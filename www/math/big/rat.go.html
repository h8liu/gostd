<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2907555">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2907610">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2907664">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2907715">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;multi-precision&nbsp;rational&nbsp;numbers.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2907774">package</span>&nbsp;<span class="ident" id="2907782">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2907787">import</span>&nbsp;<span class="op" id="2907794">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2907797">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2907816">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2907826">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2907833">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2907841">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="2907851">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907854">//&nbsp;A&nbsp;Rat&nbsp;represents&nbsp;a&nbsp;quotient&nbsp;a/b&nbsp;of&nbsp;arbitrary&nbsp;precision.</span><br>
<span class="lineno"></span><span class="comment" id="2907913">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Rat&nbsp;represents&nbsp;the&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="2907965">type</span>&nbsp;<span class="ident" id="2907970">Rat</span>&nbsp;<span class="keyword" id="2907974">struct</span>&nbsp;<span class="op" id="2907981">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2907984">//&nbsp;To&nbsp;make&nbsp;zero&nbsp;values&nbsp;for&nbsp;Rat&nbsp;work&nbsp;w/o&nbsp;initialization,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2908041">//&nbsp;a&nbsp;zero&nbsp;value&nbsp;of&nbsp;b&nbsp;(len(b)&nbsp;==&nbsp;0)&nbsp;acts&nbsp;like&nbsp;b&nbsp;==&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2908095">//&nbsp;a.neg&nbsp;determines&nbsp;the&nbsp;sign&nbsp;of&nbsp;the&nbsp;Rat,&nbsp;b.neg&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908155">a</span><span class="op" id="2908156">,</span>&nbsp;<span class="ident" id="2908158">b</span>&nbsp;<span class="ident" id="2908160"><a href="/math/big/int.go.html#2847707">Int</a></span><br>
<span class="lineno"></span><span class="op" id="2908164">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="2908167">//&nbsp;NewRat&nbsp;creates&nbsp;a&nbsp;new&nbsp;Rat&nbsp;with&nbsp;numerator&nbsp;a&nbsp;and&nbsp;denominator&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="2908231">func</span>&nbsp;<span class="ident" id="2908236">NewRat</span><span class="op" id="2908242">(</span><span class="ident" id="2908243">a</span><span class="op" id="2908244">,</span>&nbsp;<span class="ident" id="2908246">b</span>&nbsp;<span class="ident" id="2908248">int64</span><span class="op" id="2908253">)</span>&nbsp;<span class="op" id="2908255">*</span><span class="ident" id="2908256"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2908260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908263">return</span>&nbsp;<span class="builtinfunc" id="2908270">new</span><span class="op" id="2908273">(</span><span class="ident" id="2908274"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2908277">)</span><span class="op" id="2908278">.</span><span class="ident" id="2908279">SetFrac64</span><span class="op" id="2908288">(</span><span class="ident" id="2908289"><a href="/math/big/rat.go.html#2908243">a</a></span><span class="op" id="2908290">,</span>&nbsp;<span class="ident" id="2908292"><a href="/math/big/rat.go.html#2908246">b</a></span><span class="op" id="2908293">)</span><br>
<span class="lineno"></span><span class="op" id="2908295">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="2908298">//&nbsp;SetFloat64&nbsp;sets&nbsp;z&nbsp;to&nbsp;exactly&nbsp;f&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="comment" id="2908347">//&nbsp;If&nbsp;f&nbsp;is&nbsp;not&nbsp;finite,&nbsp;SetFloat&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2908392">func</span>&nbsp;<span class="op" id="2908397">(</span><span class="ident" id="2908398">z</span>&nbsp;<span class="op" id="2908400">*</span><span class="ident" id="2908401"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2908404">)</span>&nbsp;<span class="ident" id="2908406">SetFloat64</span><span class="op" id="2908416">(</span><span class="ident" id="2908417">f</span>&nbsp;<span class="builtintype" id="2908419">float64</span><span class="op" id="2908426">)</span>&nbsp;<span class="op" id="2908428">*</span><span class="ident" id="2908429"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2908433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908436">const</span>&nbsp;<span class="ident" id="2908442">expMask</span>&nbsp;<span class="op" id="2908450">=</span>&nbsp;<span class="num" id="2908452">1</span><span class="op" id="2908453">&lt;&lt;</span><span class="num" id="2908455">11</span>&nbsp;<span class="op" id="2908458">-</span>&nbsp;<span class="num" id="2908460">1</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908463">bits</span>&nbsp;<span class="op" id="2908468">:=</span>&nbsp;<span class="ident" id="2908471"><a href="/math/big/rat.go.html#2907833">math</a></span><span class="op" id="2908475">.</span><span class="ident" id="2908476">Float64bits</span><span class="op" id="2908487">(</span><span class="ident" id="2908488"><a href="/math/big/rat.go.html#2908417">f</a></span><span class="op" id="2908489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908492">mantissa</span>&nbsp;<span class="op" id="2908501">:=</span>&nbsp;<span class="ident" id="2908504"><a href="/math/big/rat.go.html#2908463">bits</a></span>&nbsp;<span class="op" id="2908509">&amp;</span>&nbsp;<span class="op" id="2908511">(</span><span class="num" id="2908512">1</span><span class="op" id="2908513">&lt;&lt;</span><span class="num" id="2908515">52</span>&nbsp;<span class="op" id="2908518">-</span>&nbsp;<span class="num" id="2908520">1</span><span class="op" id="2908521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908524">exp</span>&nbsp;<span class="op" id="2908528">:=</span>&nbsp;<span class="builtintype" id="2908531">int</span><span class="op" id="2908534">(</span><span class="op" id="2908535">(</span><span class="ident" id="2908536"><a href="/math/big/rat.go.html#2908463">bits</a></span>&nbsp;<span class="op" id="2908541">&gt;&gt;</span>&nbsp;<span class="num" id="2908544">52</span><span class="op" id="2908546">)</span>&nbsp;<span class="op" id="2908548">&amp;</span>&nbsp;<span class="ident" id="2908550"><a href="/math/big/rat.go.html#2908442">expMask</a></span><span class="op" id="2908557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908560">switch</span>&nbsp;<span class="ident" id="2908567"><a href="/math/big/rat.go.html#2908524">exp</a></span>&nbsp;<span class="op" id="2908571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908574">case</span>&nbsp;<span class="ident" id="2908579"><a href="/math/big/rat.go.html#2908442">expMask</a></span><span class="op" id="2908586">:</span>&nbsp;<span class="comment" id="2908588">//&nbsp;non-finite</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908604">return</span>&nbsp;<span class="ident" id="2908611">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908616">case</span>&nbsp;<span class="num" id="2908621">0</span><span class="op" id="2908622">:</span>&nbsp;<span class="comment" id="2908624">//&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908638"><a href="/math/big/rat.go.html#2908524">exp</a></span>&nbsp;<span class="op" id="2908642">-=</span>&nbsp;<span class="num" id="2908645">1022</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908651">default</span><span class="op" id="2908658">:</span>&nbsp;<span class="comment" id="2908660">//&nbsp;normal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908672"><a href="/math/big/rat.go.html#2908492">mantissa</a></span>&nbsp;<span class="op" id="2908681">|=</span>&nbsp;<span class="num" id="2908684">1</span>&nbsp;<span class="op" id="2908686">&lt;&lt;</span>&nbsp;<span class="num" id="2908689">52</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908694"><a href="/math/big/rat.go.html#2908524">exp</a></span>&nbsp;<span class="op" id="2908698">-=</span>&nbsp;<span class="num" id="2908701">1023</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2908707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908711">shift</span>&nbsp;<span class="op" id="2908717">:=</span>&nbsp;<span class="num" id="2908720">52</span>&nbsp;<span class="op" id="2908723">-</span>&nbsp;<span class="ident" id="2908725"><a href="/math/big/rat.go.html#2908524">exp</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2908731">//&nbsp;Optimization&nbsp;(?):&nbsp;partially&nbsp;pre-normalise.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908778">for</span>&nbsp;<span class="ident" id="2908782"><a href="/math/big/rat.go.html#2908492">mantissa</a></span><span class="op" id="2908790">&amp;</span><span class="num" id="2908791">1</span>&nbsp;<span class="op" id="2908793">==</span>&nbsp;<span class="num" id="2908796">0</span>&nbsp;<span class="op" id="2908798">&amp;&amp;</span>&nbsp;<span class="ident" id="2908801"><a href="/math/big/rat.go.html#2908711">shift</a></span>&nbsp;<span class="op" id="2908807">&gt;</span>&nbsp;<span class="num" id="2908809">0</span>&nbsp;<span class="op" id="2908811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908815"><a href="/math/big/rat.go.html#2908492">mantissa</a></span>&nbsp;<span class="op" id="2908824">&gt;&gt;=</span>&nbsp;<span class="num" id="2908828">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908832"><a href="/math/big/rat.go.html#2908711">shift</a></span><span class="op" id="2908837">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2908841">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908845"><a href="/math/big/rat.go.html#2908398">z</a></span><span class="op" id="2908846">.</span><span class="ident" id="2908847">a</span><span class="op" id="2908848">.</span><span class="ident" id="2908849">SetUint64</span><span class="op" id="2908858">(</span><span class="ident" id="2908859"><a href="/math/big/rat.go.html#2908492">mantissa</a></span><span class="op" id="2908867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908870"><a href="/math/big/rat.go.html#2908398">z</a></span><span class="op" id="2908871">.</span><span class="ident" id="2908872">a</span><span class="op" id="2908873">.</span><span class="ident" id="2908874">neg</span>&nbsp;<span class="op" id="2908878">=</span>&nbsp;<span class="ident" id="2908880"><a href="/math/big/rat.go.html#2908417">f</a></span>&nbsp;<span class="op" id="2908882">&lt;</span>&nbsp;<span class="num" id="2908884">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908887"><a href="/math/big/rat.go.html#2908398">z</a></span><span class="op" id="2908888">.</span><span class="ident" id="2908889">b</span><span class="op" id="2908890">.</span><span class="ident" id="2908891">Set</span><span class="op" id="2908894">(</span><span class="ident" id="2908895"><a href="/math/big/int.go.html#2847788">intOne</a></span><span class="op" id="2908901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908904">if</span>&nbsp;<span class="ident" id="2908907"><a href="/math/big/rat.go.html#2908711">shift</a></span>&nbsp;<span class="op" id="2908913">&gt;</span>&nbsp;<span class="num" id="2908915">0</span>&nbsp;<span class="op" id="2908917">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908921"><a href="/math/big/rat.go.html#2908398">z</a></span><span class="op" id="2908922">.</span><span class="ident" id="2908923">b</span><span class="op" id="2908924">.</span><span class="ident" id="2908925">Lsh</span><span class="op" id="2908928">(</span><span class="op" id="2908929">&amp;</span><span class="ident" id="2908930"><a href="/math/big/rat.go.html#2908398">z</a></span><span class="op" id="2908931">.</span><span class="ident" id="2908932">b</span><span class="op" id="2908933">,</span>&nbsp;<span class="builtintype" id="2908935">uint</span><span class="op" id="2908939">(</span><span class="ident" id="2908940"><a href="/math/big/rat.go.html#2908711">shift</a></span><span class="op" id="2908945">)</span><span class="op" id="2908946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2908949">}</span>&nbsp;<span class="keyword" id="2908951">else</span>&nbsp;<span class="op" id="2908956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908960"><a href="/math/big/rat.go.html#2908398">z</a></span><span class="op" id="2908961">.</span><span class="ident" id="2908962">a</span><span class="op" id="2908963">.</span><span class="ident" id="2908964">Lsh</span><span class="op" id="2908967">(</span><span class="op" id="2908968">&amp;</span><span class="ident" id="2908969"><a href="/math/big/rat.go.html#2908398">z</a></span><span class="op" id="2908970">.</span><span class="ident" id="2908971">a</span><span class="op" id="2908972">,</span>&nbsp;<span class="builtintype" id="2908974">uint</span><span class="op" id="2908978">(</span><span class="op" id="2908979">-</span><span class="ident" id="2908980"><a href="/math/big/rat.go.html#2908711">shift</a></span><span class="op" id="2908985">)</span><span class="op" id="2908986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2908989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908992">return</span>&nbsp;<span class="ident" id="2908999"><a href="/math/big/rat.go.html#2908398">z</a></span><span class="op" id="2909000">.</span><span class="ident" id="2909001">norm</span><span class="op" id="2909005">(</span><span class="op" id="2909006">)</span><br>
<span class="lineno">65</span><span class="op" id="2909008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2909011">//&nbsp;quotToFloat32&nbsp;returns&nbsp;the&nbsp;non-negative&nbsp;float32&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2909067">//&nbsp;nearest&nbsp;to&nbsp;the&nbsp;quotient&nbsp;a/b,&nbsp;using&nbsp;round-to-even&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2909122">//&nbsp;halfway&nbsp;cases.&nbsp;&nbsp;It&nbsp;does&nbsp;not&nbsp;mutate&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno">70</span><span class="comment" id="2909175">//&nbsp;Preconditions:&nbsp;b&nbsp;is&nbsp;non-zero;&nbsp;a&nbsp;and&nbsp;b&nbsp;have&nbsp;no&nbsp;common&nbsp;factors.</span><br>
<span class="lineno"></span><span class="keyword" id="2909240">func</span>&nbsp;<span class="ident" id="2909245">quotToFloat32</span><span class="op" id="2909258">(</span><span class="ident" id="2909259">a</span><span class="op" id="2909260">,</span>&nbsp;<span class="ident" id="2909262">b</span>&nbsp;<span class="ident" id="2909264"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2909267">)</span>&nbsp;<span class="op" id="2909269">(</span><span class="ident" id="2909270">f</span>&nbsp;<span class="builtintype" id="2909272">float32</span><span class="op" id="2909279">,</span>&nbsp;<span class="ident" id="2909281">exact</span>&nbsp;<span class="builtintype" id="2909287">bool</span><span class="op" id="2909291">)</span>&nbsp;<span class="op" id="2909293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909296">const</span>&nbsp;<span class="op" id="2909302">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2909306">//&nbsp;float&nbsp;size&nbsp;in&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909330">Fsize</span>&nbsp;<span class="op" id="2909336">=</span>&nbsp;<span class="num" id="2909338">32</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2909344">//&nbsp;mantissa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909358">Msize</span>&nbsp;&nbsp;<span class="op" id="2909365">=</span>&nbsp;<span class="num" id="2909367">23</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909372">Msize1</span>&nbsp;<span class="op" id="2909379">=</span>&nbsp;<span class="ident" id="2909381"><a href="/math/big/rat.go.html#2909358">Msize</a></span>&nbsp;<span class="op" id="2909387">+</span>&nbsp;<span class="num" id="2909389">1</span>&nbsp;<span class="comment" id="2909391">//&nbsp;incl.&nbsp;implicit&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909413">Msize2</span>&nbsp;<span class="op" id="2909420">=</span>&nbsp;<span class="ident" id="2909422"><a href="/math/big/rat.go.html#2909372">Msize1</a></span>&nbsp;<span class="op" id="2909429">+</span>&nbsp;<span class="num" id="2909431">1</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2909436">//&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909450">Esize</span>&nbsp;<span class="op" id="2909456">=</span>&nbsp;<span class="ident" id="2909458"><a href="/math/big/rat.go.html#2909330">Fsize</a></span>&nbsp;<span class="op" id="2909464">-</span>&nbsp;<span class="ident" id="2909466"><a href="/math/big/rat.go.html#2909372">Msize1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909475">Ebias</span>&nbsp;<span class="op" id="2909481">=</span>&nbsp;<span class="num" id="2909483">1</span><span class="op" id="2909484">&lt;&lt;</span><span class="op" id="2909486">(</span><span class="ident" id="2909487"><a href="/math/big/rat.go.html#2909450">Esize</a></span><span class="op" id="2909492">-</span><span class="num" id="2909493">1</span><span class="op" id="2909494">)</span>&nbsp;<span class="op" id="2909496">-</span>&nbsp;<span class="num" id="2909498">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909502">Emin</span>&nbsp;&nbsp;<span class="op" id="2909508">=</span>&nbsp;<span class="num" id="2909510">1</span>&nbsp;<span class="op" id="2909512">-</span>&nbsp;<span class="ident" id="2909514"><a href="/math/big/rat.go.html#2909475">Ebias</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909522">Emax</span>&nbsp;&nbsp;<span class="op" id="2909528">=</span>&nbsp;<span class="ident" id="2909530"><a href="/math/big/rat.go.html#2909475">Ebias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909537">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2909541">//&nbsp;TODO(adonovan):&nbsp;specialize&nbsp;common&nbsp;degenerate&nbsp;cases:&nbsp;1.0,&nbsp;integers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909612">alen</span>&nbsp;<span class="op" id="2909617">:=</span>&nbsp;<span class="ident" id="2909620"><a href="/math/big/rat.go.html#2909259">a</a></span><span class="op" id="2909621">.</span><span class="ident" id="2909622">bitLen</span><span class="op" id="2909628">(</span><span class="op" id="2909629">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909632">if</span>&nbsp;<span class="ident" id="2909635"><a href="/math/big/rat.go.html#2909612">alen</a></span>&nbsp;<span class="op" id="2909640">==</span>&nbsp;<span class="num" id="2909643">0</span>&nbsp;<span class="op" id="2909645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909649">return</span>&nbsp;<span class="num" id="2909656">0</span><span class="op" id="2909657">,</span>&nbsp;<span class="ident" id="2909659">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909668">blen</span>&nbsp;<span class="op" id="2909673">:=</span>&nbsp;<span class="ident" id="2909676"><a href="/math/big/rat.go.html#2909262">b</a></span><span class="op" id="2909677">.</span><span class="ident" id="2909678">bitLen</span><span class="op" id="2909684">(</span><span class="op" id="2909685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909688">if</span>&nbsp;<span class="ident" id="2909691"><a href="/math/big/rat.go.html#2909668">blen</a></span>&nbsp;<span class="op" id="2909696">==</span>&nbsp;<span class="num" id="2909699">0</span>&nbsp;<span class="op" id="2909701">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2909705">panic</span><span class="op" id="2909710">(</span><span class="string" id="2909711">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2909729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2909736">//&nbsp;1.&nbsp;Left-shift&nbsp;A&nbsp;or&nbsp;B&nbsp;such&nbsp;that&nbsp;quotient&nbsp;A/B&nbsp;is&nbsp;in&nbsp;[1&lt;&lt;Msize1,&nbsp;1&lt;&lt;(Msize2+1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2909816">//&nbsp;(Msize2&nbsp;bits&nbsp;if&nbsp;A&nbsp;&lt;&nbsp;B&nbsp;when&nbsp;they&nbsp;are&nbsp;left-aligned,&nbsp;Msize2+1&nbsp;bits&nbsp;if&nbsp;A&nbsp;&gt;=&nbsp;B).</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2909896">//&nbsp;This&nbsp;is&nbsp;2&nbsp;or&nbsp;3&nbsp;more&nbsp;than&nbsp;the&nbsp;float32&nbsp;mantissa&nbsp;field&nbsp;width&nbsp;of&nbsp;Msize:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2909968">//&nbsp;-&nbsp;the&nbsp;optional&nbsp;extra&nbsp;bit&nbsp;is&nbsp;shifted&nbsp;away&nbsp;in&nbsp;step&nbsp;3&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910030">//&nbsp;-&nbsp;the&nbsp;high-order&nbsp;1&nbsp;is&nbsp;omitted&nbsp;in&nbsp;&#34;normal&#34;&nbsp;representation;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910092">//&nbsp;-&nbsp;the&nbsp;low-order&nbsp;1&nbsp;will&nbsp;be&nbsp;used&nbsp;during&nbsp;rounding&nbsp;then&nbsp;discarded.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910159">exp</span>&nbsp;<span class="op" id="2910163">:=</span>&nbsp;<span class="ident" id="2910166"><a href="/math/big/rat.go.html#2909612">alen</a></span>&nbsp;<span class="op" id="2910171">-</span>&nbsp;<span class="ident" id="2910173"><a href="/math/big/rat.go.html#2909668">blen</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910179">var</span>&nbsp;<span class="ident" id="2910183">a2</span><span class="op" id="2910185">,</span>&nbsp;<span class="ident" id="2910187">b2</span>&nbsp;<span class="ident" id="2910190"><a href="/math/big/nat.go.html#2873877">nat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910195"><a href="/math/big/rat.go.html#2910183">a2</a></span>&nbsp;<span class="op" id="2910198">=</span>&nbsp;<span class="ident" id="2910200"><a href="/math/big/rat.go.html#2910183">a2</a></span><span class="op" id="2910202">.</span><span class="ident" id="2910203">set</span><span class="op" id="2910206">(</span><span class="ident" id="2910207"><a href="/math/big/rat.go.html#2909259">a</a></span><span class="op" id="2910208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910211"><a href="/math/big/rat.go.html#2910187">b2</a></span>&nbsp;<span class="op" id="2910214">=</span>&nbsp;<span class="ident" id="2910216"><a href="/math/big/rat.go.html#2910187">b2</a></span><span class="op" id="2910218">.</span><span class="ident" id="2910219">set</span><span class="op" id="2910222">(</span><span class="ident" id="2910223"><a href="/math/big/rat.go.html#2909262">b</a></span><span class="op" id="2910224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910227">if</span>&nbsp;<span class="ident" id="2910230">shift</span>&nbsp;<span class="op" id="2910236">:=</span>&nbsp;<span class="ident" id="2910239"><a href="/math/big/rat.go.html#2909413">Msize2</a></span>&nbsp;<span class="op" id="2910246">-</span>&nbsp;<span class="ident" id="2910248"><a href="/math/big/rat.go.html#2910159">exp</a></span><span class="op" id="2910251">;</span>&nbsp;<span class="ident" id="2910253"><a href="/math/big/rat.go.html#2910230">shift</a></span>&nbsp;<span class="op" id="2910259">&gt;</span>&nbsp;<span class="num" id="2910261">0</span>&nbsp;<span class="op" id="2910263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910267"><a href="/math/big/rat.go.html#2910183">a2</a></span>&nbsp;<span class="op" id="2910270">=</span>&nbsp;<span class="ident" id="2910272"><a href="/math/big/rat.go.html#2910183">a2</a></span><span class="op" id="2910274">.</span><span class="ident" id="2910275">shl</span><span class="op" id="2910278">(</span><span class="ident" id="2910279"><a href="/math/big/rat.go.html#2910183">a2</a></span><span class="op" id="2910281">,</span>&nbsp;<span class="builtintype" id="2910283">uint</span><span class="op" id="2910287">(</span><span class="ident" id="2910288"><a href="/math/big/rat.go.html#2910230">shift</a></span><span class="op" id="2910293">)</span><span class="op" id="2910294">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2910297">}</span>&nbsp;<span class="keyword" id="2910299">else</span>&nbsp;<span class="keyword" id="2910304">if</span>&nbsp;<span class="ident" id="2910307"><a href="/math/big/rat.go.html#2910230">shift</a></span>&nbsp;<span class="op" id="2910313">&lt;</span>&nbsp;<span class="num" id="2910315">0</span>&nbsp;<span class="op" id="2910317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910321"><a href="/math/big/rat.go.html#2910187">b2</a></span>&nbsp;<span class="op" id="2910324">=</span>&nbsp;<span class="ident" id="2910326"><a href="/math/big/rat.go.html#2910187">b2</a></span><span class="op" id="2910328">.</span><span class="ident" id="2910329">shl</span><span class="op" id="2910332">(</span><span class="ident" id="2910333"><a href="/math/big/rat.go.html#2910187">b2</a></span><span class="op" id="2910335">,</span>&nbsp;<span class="builtintype" id="2910337">uint</span><span class="op" id="2910341">(</span><span class="op" id="2910342">-</span><span class="ident" id="2910343"><a href="/math/big/rat.go.html#2910230">shift</a></span><span class="op" id="2910348">)</span><span class="op" id="2910349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2910352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910356">//&nbsp;2.&nbsp;Compute&nbsp;quotient&nbsp;and&nbsp;remainder&nbsp;(q,&nbsp;r).&nbsp;&nbsp;NB:&nbsp;due&nbsp;to&nbsp;the</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910418">//&nbsp;extra&nbsp;shift,&nbsp;the&nbsp;low-order&nbsp;bit&nbsp;of&nbsp;q&nbsp;is&nbsp;logically&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910475">//&nbsp;high-order&nbsp;bit&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910500">var</span>&nbsp;<span class="ident" id="2910504">q</span>&nbsp;<span class="ident" id="2910506"><a href="/math/big/nat.go.html#2873877">nat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910511"><a href="/math/big/rat.go.html#2910504">q</a></span><span class="op" id="2910512">,</span>&nbsp;<span class="ident" id="2910514">r</span>&nbsp;<span class="op" id="2910516">:=</span>&nbsp;<span class="ident" id="2910519"><a href="/math/big/rat.go.html#2910504">q</a></span><span class="op" id="2910520">.</span><span class="ident" id="2910521">div</span><span class="op" id="2910524">(</span><span class="ident" id="2910525"><a href="/math/big/rat.go.html#2910183">a2</a></span><span class="op" id="2910527">,</span>&nbsp;<span class="ident" id="2910529"><a href="/math/big/rat.go.html#2910183">a2</a></span><span class="op" id="2910531">,</span>&nbsp;<span class="ident" id="2910533"><a href="/math/big/rat.go.html#2910187">b2</a></span><span class="op" id="2910535">)</span>&nbsp;<span class="comment" id="2910537">//&nbsp;(recycle&nbsp;a2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910554">mantissa</span>&nbsp;<span class="op" id="2910563">:=</span>&nbsp;<span class="ident" id="2910566"><a href="/math/big/int.go.html#2860151">low32</a></span><span class="op" id="2910571">(</span><span class="ident" id="2910572"><a href="/math/big/rat.go.html#2910504">q</a></span><span class="op" id="2910573">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910576">haveRem</span>&nbsp;<span class="op" id="2910584">:=</span>&nbsp;<span class="builtinfunc" id="2910587">len</span><span class="op" id="2910590">(</span><span class="ident" id="2910591"><a href="/math/big/rat.go.html#2910514">r</a></span><span class="op" id="2910592">)</span>&nbsp;<span class="op" id="2910594">&gt;</span>&nbsp;<span class="num" id="2910596">0</span>&nbsp;<span class="comment" id="2910598">//&nbsp;mantissa&amp;1&nbsp;&amp;&amp;&nbsp;!haveRem&nbsp;=&gt;&nbsp;remainder&nbsp;is&nbsp;exactly&nbsp;half</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910655">//&nbsp;3.&nbsp;If&nbsp;quotient&nbsp;didn&#39;t&nbsp;fit&nbsp;in&nbsp;Msize2&nbsp;bits,&nbsp;redo&nbsp;division&nbsp;by&nbsp;b2&lt;&lt;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910724">//&nbsp;(in&nbsp;effect---we&nbsp;accomplish&nbsp;this&nbsp;incrementally).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910776">if</span>&nbsp;<span class="ident" id="2910779"><a href="/math/big/rat.go.html#2910554">mantissa</a></span><span class="op" id="2910787">&gt;&gt;</span><span class="ident" id="2910789"><a href="/math/big/rat.go.html#2909413">Msize2</a></span>&nbsp;<span class="op" id="2910796">==</span>&nbsp;<span class="num" id="2910799">1</span>&nbsp;<span class="op" id="2910801">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910805">if</span>&nbsp;<span class="ident" id="2910808"><a href="/math/big/rat.go.html#2910554">mantissa</a></span><span class="op" id="2910816">&amp;</span><span class="num" id="2910817">1</span>&nbsp;<span class="op" id="2910819">==</span>&nbsp;<span class="num" id="2910822">1</span>&nbsp;<span class="op" id="2910824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910829"><a href="/math/big/rat.go.html#2910576">haveRem</a></span>&nbsp;<span class="op" id="2910837">=</span>&nbsp;<span class="ident" id="2910839">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2910846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910850"><a href="/math/big/rat.go.html#2910554">mantissa</a></span>&nbsp;<span class="op" id="2910859">&gt;&gt;=</span>&nbsp;<span class="num" id="2910863">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910867"><a href="/math/big/rat.go.html#2910159">exp</a></span><span class="op" id="2910870">++</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2910874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910877">if</span>&nbsp;<span class="ident" id="2910880"><a href="/math/big/rat.go.html#2910554">mantissa</a></span><span class="op" id="2910888">&gt;&gt;</span><span class="ident" id="2910890"><a href="/math/big/rat.go.html#2909372">Msize1</a></span>&nbsp;<span class="op" id="2910897">!=</span>&nbsp;<span class="num" id="2910900">1</span>&nbsp;<span class="op" id="2910902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2910906">panic</span><span class="op" id="2910911">(</span><span class="ident" id="2910912"><a href="/math/big/rat.go.html#2907826">fmt</a></span><span class="op" id="2910915">.</span><span class="ident" id="2910916">Sprintf</span><span class="op" id="2910923">(</span><span class="string" id="2910924">&#34;expected&nbsp;exactly&nbsp;%d&nbsp;bits&nbsp;of&nbsp;result&#34;</span><span class="op" id="2910960">,</span>&nbsp;<span class="ident" id="2910962"><a href="/math/big/rat.go.html#2909413">Msize2</a></span><span class="op" id="2910968">)</span><span class="op" id="2910969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2910972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910976">//&nbsp;4.&nbsp;Rounding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910993">if</span>&nbsp;<span class="ident" id="2910996"><a href="/math/big/rat.go.html#2909502">Emin</a></span><span class="op" id="2911000">-</span><span class="ident" id="2911001"><a href="/math/big/rat.go.html#2909358">Msize</a></span>&nbsp;<span class="op" id="2911007">&lt;=</span>&nbsp;<span class="ident" id="2911010"><a href="/math/big/rat.go.html#2910159">exp</a></span>&nbsp;<span class="op" id="2911014">&amp;&amp;</span>&nbsp;<span class="ident" id="2911017"><a href="/math/big/rat.go.html#2910159">exp</a></span>&nbsp;<span class="op" id="2911021">&lt;=</span>&nbsp;<span class="ident" id="2911024"><a href="/math/big/rat.go.html#2909502">Emin</a></span>&nbsp;<span class="op" id="2911029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2911033">//&nbsp;Denormal&nbsp;case;&nbsp;lose&nbsp;&#39;shift&#39;&nbsp;bits&nbsp;of&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911085">shift</span>&nbsp;<span class="op" id="2911091">:=</span>&nbsp;<span class="builtintype" id="2911094">uint</span><span class="op" id="2911098">(</span><span class="ident" id="2911099"><a href="/math/big/rat.go.html#2909502">Emin</a></span>&nbsp;<span class="op" id="2911104">-</span>&nbsp;<span class="op" id="2911106">(</span><span class="ident" id="2911107"><a href="/math/big/rat.go.html#2910159">exp</a></span>&nbsp;<span class="op" id="2911111">-</span>&nbsp;<span class="num" id="2911113">1</span><span class="op" id="2911114">)</span><span class="op" id="2911115">)</span>&nbsp;<span class="comment" id="2911117">//&nbsp;[1..Esize1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911134">lostbits</span>&nbsp;<span class="op" id="2911143">:=</span>&nbsp;<span class="ident" id="2911146"><a href="/math/big/rat.go.html#2910554">mantissa</a></span>&nbsp;<span class="op" id="2911155">&amp;</span>&nbsp;<span class="op" id="2911157">(</span><span class="num" id="2911158">1</span><span class="op" id="2911159">&lt;&lt;</span><span class="ident" id="2911161"><a href="/math/big/rat.go.html#2911085">shift</a></span>&nbsp;<span class="op" id="2911167">-</span>&nbsp;<span class="num" id="2911169">1</span><span class="op" id="2911170">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911174"><a href="/math/big/rat.go.html#2910576">haveRem</a></span>&nbsp;<span class="op" id="2911182">=</span>&nbsp;<span class="ident" id="2911184"><a href="/math/big/rat.go.html#2910576">haveRem</a></span>&nbsp;<span class="op" id="2911192">||</span>&nbsp;<span class="ident" id="2911195"><a href="/math/big/rat.go.html#2911134">lostbits</a></span>&nbsp;<span class="op" id="2911204">!=</span>&nbsp;<span class="num" id="2911207">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911211"><a href="/math/big/rat.go.html#2910554">mantissa</a></span>&nbsp;<span class="op" id="2911220">&gt;&gt;=</span>&nbsp;<span class="ident" id="2911224"><a href="/math/big/rat.go.html#2911085">shift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911232"><a href="/math/big/rat.go.html#2910159">exp</a></span>&nbsp;<span class="op" id="2911236">=</span>&nbsp;<span class="num" id="2911238">2</span>&nbsp;<span class="op" id="2911240">-</span>&nbsp;<span class="ident" id="2911242"><a href="/math/big/rat.go.html#2909475">Ebias</a></span>&nbsp;<span class="comment" id="2911248">//&nbsp;==&nbsp;exp&nbsp;+&nbsp;shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2911270">//&nbsp;Round&nbsp;q&nbsp;using&nbsp;round-half-to-even.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911308"><a href="/math/big/rat.go.html#2909281">exact</a></span>&nbsp;<span class="op" id="2911314">=</span>&nbsp;<span class="op" id="2911316">!</span><span class="ident" id="2911317"><a href="/math/big/rat.go.html#2910576">haveRem</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911326">if</span>&nbsp;<span class="ident" id="2911329"><a href="/math/big/rat.go.html#2910554">mantissa</a></span><span class="op" id="2911337">&amp;</span><span class="num" id="2911338">1</span>&nbsp;<span class="op" id="2911340">!=</span>&nbsp;<span class="num" id="2911343">0</span>&nbsp;<span class="op" id="2911345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911349"><a href="/math/big/rat.go.html#2909281">exact</a></span>&nbsp;<span class="op" id="2911355">=</span>&nbsp;<span class="ident" id="2911357">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911365">if</span>&nbsp;<span class="ident" id="2911368"><a href="/math/big/rat.go.html#2910576">haveRem</a></span>&nbsp;<span class="op" id="2911376">||</span>&nbsp;<span class="ident" id="2911379"><a href="/math/big/rat.go.html#2910554">mantissa</a></span><span class="op" id="2911387">&amp;</span><span class="num" id="2911388">2</span>&nbsp;<span class="op" id="2911390">!=</span>&nbsp;<span class="num" id="2911393">0</span>&nbsp;<span class="op" id="2911395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911400">if</span>&nbsp;<span class="ident" id="2911403"><a href="/math/big/rat.go.html#2910554">mantissa</a></span><span class="op" id="2911411">++</span><span class="op" id="2911413">;</span>&nbsp;<span class="ident" id="2911415"><a href="/math/big/rat.go.html#2910554">mantissa</a></span>&nbsp;<span class="op" id="2911424">&gt;=</span>&nbsp;<span class="num" id="2911427">1</span><span class="op" id="2911428">&lt;&lt;</span><span class="ident" id="2911430"><a href="/math/big/rat.go.html#2909413">Msize2</a></span>&nbsp;<span class="op" id="2911437">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2911443">//&nbsp;Complete&nbsp;rollover&nbsp;11...1&nbsp;=&gt;&nbsp;100...0,&nbsp;so&nbsp;shift&nbsp;is&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911504"><a href="/math/big/rat.go.html#2910554">mantissa</a></span>&nbsp;<span class="op" id="2911513">&gt;&gt;=</span>&nbsp;<span class="num" id="2911517">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911523"><a href="/math/big/rat.go.html#2910159">exp</a></span><span class="op" id="2911526">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911536">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911542"><a href="/math/big/rat.go.html#2910554">mantissa</a></span>&nbsp;<span class="op" id="2911551">&gt;&gt;=</span>&nbsp;<span class="num" id="2911555">1</span>&nbsp;<span class="comment" id="2911557">//&nbsp;discard&nbsp;rounding&nbsp;bit.&nbsp;&nbsp;Mantissa&nbsp;now&nbsp;scaled&nbsp;by&nbsp;1&lt;&lt;Msize1.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911619"><a href="/math/big/rat.go.html#2909270">f</a></span>&nbsp;<span class="op" id="2911621">=</span>&nbsp;<span class="builtintype" id="2911623">float32</span><span class="op" id="2911630">(</span><span class="ident" id="2911631"><a href="/math/big/rat.go.html#2907833">math</a></span><span class="op" id="2911635">.</span><span class="ident" id="2911636">Ldexp</span><span class="op" id="2911641">(</span><span class="builtintype" id="2911642">float64</span><span class="op" id="2911649">(</span><span class="ident" id="2911650"><a href="/math/big/rat.go.html#2910554">mantissa</a></span><span class="op" id="2911658">)</span><span class="op" id="2911659">,</span>&nbsp;<span class="ident" id="2911661"><a href="/math/big/rat.go.html#2910159">exp</a></span><span class="op" id="2911664">-</span><span class="ident" id="2911665"><a href="/math/big/rat.go.html#2909372">Msize1</a></span><span class="op" id="2911671">)</span><span class="op" id="2911672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911675">if</span>&nbsp;<span class="ident" id="2911678"><a href="/math/big/rat.go.html#2907833">math</a></span><span class="op" id="2911682">.</span><span class="ident" id="2911683">IsInf</span><span class="op" id="2911688">(</span><span class="builtintype" id="2911689">float64</span><span class="op" id="2911696">(</span><span class="ident" id="2911697"><a href="/math/big/rat.go.html#2909270">f</a></span><span class="op" id="2911698">)</span><span class="op" id="2911699">,</span>&nbsp;<span class="num" id="2911701">0</span><span class="op" id="2911702">)</span>&nbsp;<span class="op" id="2911704">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911708"><a href="/math/big/rat.go.html#2909281">exact</a></span>&nbsp;<span class="op" id="2911714">=</span>&nbsp;<span class="ident" id="2911716">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911726">return</span><br>
<span class="lineno"></span><span class="op" id="2911733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="2911736">//&nbsp;quotToFloat64&nbsp;returns&nbsp;the&nbsp;non-negative&nbsp;float64&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2911792">//&nbsp;nearest&nbsp;to&nbsp;the&nbsp;quotient&nbsp;a/b,&nbsp;using&nbsp;round-to-even&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2911847">//&nbsp;halfway&nbsp;cases.&nbsp;&nbsp;It&nbsp;does&nbsp;not&nbsp;mutate&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="comment" id="2911900">//&nbsp;Preconditions:&nbsp;b&nbsp;is&nbsp;non-zero;&nbsp;a&nbsp;and&nbsp;b&nbsp;have&nbsp;no&nbsp;common&nbsp;factors.</span><br>
<span class="lineno"></span><span class="keyword" id="2911965">func</span>&nbsp;<span class="ident" id="2911970">quotToFloat64</span><span class="op" id="2911983">(</span><span class="ident" id="2911984">a</span><span class="op" id="2911985">,</span>&nbsp;<span class="ident" id="2911987">b</span>&nbsp;<span class="ident" id="2911989"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2911992">)</span>&nbsp;<span class="op" id="2911994">(</span><span class="ident" id="2911995">f</span>&nbsp;<span class="builtintype" id="2911997">float64</span><span class="op" id="2912004">,</span>&nbsp;<span class="ident" id="2912006">exact</span>&nbsp;<span class="builtintype" id="2912012">bool</span><span class="op" id="2912016">)</span>&nbsp;<span class="op" id="2912018">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912021">const</span>&nbsp;<span class="op" id="2912027">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912031">//&nbsp;float&nbsp;size&nbsp;in&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912055">Fsize</span>&nbsp;<span class="op" id="2912061">=</span>&nbsp;<span class="num" id="2912063">64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912069">//&nbsp;mantissa</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912083">Msize</span>&nbsp;&nbsp;<span class="op" id="2912090">=</span>&nbsp;<span class="num" id="2912092">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912097">Msize1</span>&nbsp;<span class="op" id="2912104">=</span>&nbsp;<span class="ident" id="2912106"><a href="/math/big/rat.go.html#2912083">Msize</a></span>&nbsp;<span class="op" id="2912112">+</span>&nbsp;<span class="num" id="2912114">1</span>&nbsp;<span class="comment" id="2912116">//&nbsp;incl.&nbsp;implicit&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912138">Msize2</span>&nbsp;<span class="op" id="2912145">=</span>&nbsp;<span class="ident" id="2912147"><a href="/math/big/rat.go.html#2912097">Msize1</a></span>&nbsp;<span class="op" id="2912154">+</span>&nbsp;<span class="num" id="2912156">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912161">//&nbsp;exponent</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912175">Esize</span>&nbsp;<span class="op" id="2912181">=</span>&nbsp;<span class="ident" id="2912183"><a href="/math/big/rat.go.html#2912055">Fsize</a></span>&nbsp;<span class="op" id="2912189">-</span>&nbsp;<span class="ident" id="2912191"><a href="/math/big/rat.go.html#2912097">Msize1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912200">Ebias</span>&nbsp;<span class="op" id="2912206">=</span>&nbsp;<span class="num" id="2912208">1</span><span class="op" id="2912209">&lt;&lt;</span><span class="op" id="2912211">(</span><span class="ident" id="2912212"><a href="/math/big/rat.go.html#2912175">Esize</a></span><span class="op" id="2912217">-</span><span class="num" id="2912218">1</span><span class="op" id="2912219">)</span>&nbsp;<span class="op" id="2912221">-</span>&nbsp;<span class="num" id="2912223">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912227">Emin</span>&nbsp;&nbsp;<span class="op" id="2912233">=</span>&nbsp;<span class="num" id="2912235">1</span>&nbsp;<span class="op" id="2912237">-</span>&nbsp;<span class="ident" id="2912239"><a href="/math/big/rat.go.html#2912200">Ebias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912247">Emax</span>&nbsp;&nbsp;<span class="op" id="2912253">=</span>&nbsp;<span class="ident" id="2912255"><a href="/math/big/rat.go.html#2912200">Ebias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912262">)</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912266">//&nbsp;TODO(adonovan):&nbsp;specialize&nbsp;common&nbsp;degenerate&nbsp;cases:&nbsp;1.0,&nbsp;integers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912337">alen</span>&nbsp;<span class="op" id="2912342">:=</span>&nbsp;<span class="ident" id="2912345"><a href="/math/big/rat.go.html#2911984">a</a></span><span class="op" id="2912346">.</span><span class="ident" id="2912347">bitLen</span><span class="op" id="2912353">(</span><span class="op" id="2912354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912357">if</span>&nbsp;<span class="ident" id="2912360"><a href="/math/big/rat.go.html#2912337">alen</a></span>&nbsp;<span class="op" id="2912365">==</span>&nbsp;<span class="num" id="2912368">0</span>&nbsp;<span class="op" id="2912370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912374">return</span>&nbsp;<span class="num" id="2912381">0</span><span class="op" id="2912382">,</span>&nbsp;<span class="ident" id="2912384">true</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912393">blen</span>&nbsp;<span class="op" id="2912398">:=</span>&nbsp;<span class="ident" id="2912401"><a href="/math/big/rat.go.html#2911987">b</a></span><span class="op" id="2912402">.</span><span class="ident" id="2912403">bitLen</span><span class="op" id="2912409">(</span><span class="op" id="2912410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912413">if</span>&nbsp;<span class="ident" id="2912416"><a href="/math/big/rat.go.html#2912393">blen</a></span>&nbsp;<span class="op" id="2912421">==</span>&nbsp;<span class="num" id="2912424">0</span>&nbsp;<span class="op" id="2912426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2912430">panic</span><span class="op" id="2912435">(</span><span class="string" id="2912436">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2912454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912457">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912461">//&nbsp;1.&nbsp;Left-shift&nbsp;A&nbsp;or&nbsp;B&nbsp;such&nbsp;that&nbsp;quotient&nbsp;A/B&nbsp;is&nbsp;in&nbsp;[1&lt;&lt;Msize1,&nbsp;1&lt;&lt;(Msize2+1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912541">//&nbsp;(Msize2&nbsp;bits&nbsp;if&nbsp;A&nbsp;&lt;&nbsp;B&nbsp;when&nbsp;they&nbsp;are&nbsp;left-aligned,&nbsp;Msize2+1&nbsp;bits&nbsp;if&nbsp;A&nbsp;&gt;=&nbsp;B).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912621">//&nbsp;This&nbsp;is&nbsp;2&nbsp;or&nbsp;3&nbsp;more&nbsp;than&nbsp;the&nbsp;float64&nbsp;mantissa&nbsp;field&nbsp;width&nbsp;of&nbsp;Msize:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912693">//&nbsp;-&nbsp;the&nbsp;optional&nbsp;extra&nbsp;bit&nbsp;is&nbsp;shifted&nbsp;away&nbsp;in&nbsp;step&nbsp;3&nbsp;below.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912755">//&nbsp;-&nbsp;the&nbsp;high-order&nbsp;1&nbsp;is&nbsp;omitted&nbsp;in&nbsp;&#34;normal&#34;&nbsp;representation;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2912817">//&nbsp;-&nbsp;the&nbsp;low-order&nbsp;1&nbsp;will&nbsp;be&nbsp;used&nbsp;during&nbsp;rounding&nbsp;then&nbsp;discarded.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912884">exp</span>&nbsp;<span class="op" id="2912888">:=</span>&nbsp;<span class="ident" id="2912891"><a href="/math/big/rat.go.html#2912337">alen</a></span>&nbsp;<span class="op" id="2912896">-</span>&nbsp;<span class="ident" id="2912898"><a href="/math/big/rat.go.html#2912393">blen</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912904">var</span>&nbsp;<span class="ident" id="2912908">a2</span><span class="op" id="2912910">,</span>&nbsp;<span class="ident" id="2912912">b2</span>&nbsp;<span class="ident" id="2912915"><a href="/math/big/nat.go.html#2873877">nat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912920"><a href="/math/big/rat.go.html#2912908">a2</a></span>&nbsp;<span class="op" id="2912923">=</span>&nbsp;<span class="ident" id="2912925"><a href="/math/big/rat.go.html#2912908">a2</a></span><span class="op" id="2912927">.</span><span class="ident" id="2912928">set</span><span class="op" id="2912931">(</span><span class="ident" id="2912932"><a href="/math/big/rat.go.html#2911984">a</a></span><span class="op" id="2912933">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912936"><a href="/math/big/rat.go.html#2912912">b2</a></span>&nbsp;<span class="op" id="2912939">=</span>&nbsp;<span class="ident" id="2912941"><a href="/math/big/rat.go.html#2912912">b2</a></span><span class="op" id="2912943">.</span><span class="ident" id="2912944">set</span><span class="op" id="2912947">(</span><span class="ident" id="2912948"><a href="/math/big/rat.go.html#2911987">b</a></span><span class="op" id="2912949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912952">if</span>&nbsp;<span class="ident" id="2912955">shift</span>&nbsp;<span class="op" id="2912961">:=</span>&nbsp;<span class="ident" id="2912964"><a href="/math/big/rat.go.html#2912138">Msize2</a></span>&nbsp;<span class="op" id="2912971">-</span>&nbsp;<span class="ident" id="2912973"><a href="/math/big/rat.go.html#2912884">exp</a></span><span class="op" id="2912976">;</span>&nbsp;<span class="ident" id="2912978"><a href="/math/big/rat.go.html#2912955">shift</a></span>&nbsp;<span class="op" id="2912984">&gt;</span>&nbsp;<span class="num" id="2912986">0</span>&nbsp;<span class="op" id="2912988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912992"><a href="/math/big/rat.go.html#2912908">a2</a></span>&nbsp;<span class="op" id="2912995">=</span>&nbsp;<span class="ident" id="2912997"><a href="/math/big/rat.go.html#2912908">a2</a></span><span class="op" id="2912999">.</span><span class="ident" id="2913000">shl</span><span class="op" id="2913003">(</span><span class="ident" id="2913004"><a href="/math/big/rat.go.html#2912908">a2</a></span><span class="op" id="2913006">,</span>&nbsp;<span class="builtintype" id="2913008">uint</span><span class="op" id="2913012">(</span><span class="ident" id="2913013"><a href="/math/big/rat.go.html#2912955">shift</a></span><span class="op" id="2913018">)</span><span class="op" id="2913019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913022">}</span>&nbsp;<span class="keyword" id="2913024">else</span>&nbsp;<span class="keyword" id="2913029">if</span>&nbsp;<span class="ident" id="2913032"><a href="/math/big/rat.go.html#2912955">shift</a></span>&nbsp;<span class="op" id="2913038">&lt;</span>&nbsp;<span class="num" id="2913040">0</span>&nbsp;<span class="op" id="2913042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913046"><a href="/math/big/rat.go.html#2912912">b2</a></span>&nbsp;<span class="op" id="2913049">=</span>&nbsp;<span class="ident" id="2913051"><a href="/math/big/rat.go.html#2912912">b2</a></span><span class="op" id="2913053">.</span><span class="ident" id="2913054">shl</span><span class="op" id="2913057">(</span><span class="ident" id="2913058"><a href="/math/big/rat.go.html#2912912">b2</a></span><span class="op" id="2913060">,</span>&nbsp;<span class="builtintype" id="2913062">uint</span><span class="op" id="2913066">(</span><span class="op" id="2913067">-</span><span class="ident" id="2913068"><a href="/math/big/rat.go.html#2912955">shift</a></span><span class="op" id="2913073">)</span><span class="op" id="2913074">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2913081">//&nbsp;2.&nbsp;Compute&nbsp;quotient&nbsp;and&nbsp;remainder&nbsp;(q,&nbsp;r).&nbsp;&nbsp;NB:&nbsp;due&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2913143">//&nbsp;extra&nbsp;shift,&nbsp;the&nbsp;low-order&nbsp;bit&nbsp;of&nbsp;q&nbsp;is&nbsp;logically&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2913200">//&nbsp;high-order&nbsp;bit&nbsp;of&nbsp;r.</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913225">var</span>&nbsp;<span class="ident" id="2913229">q</span>&nbsp;<span class="ident" id="2913231"><a href="/math/big/nat.go.html#2873877">nat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913236"><a href="/math/big/rat.go.html#2913229">q</a></span><span class="op" id="2913237">,</span>&nbsp;<span class="ident" id="2913239">r</span>&nbsp;<span class="op" id="2913241">:=</span>&nbsp;<span class="ident" id="2913244"><a href="/math/big/rat.go.html#2913229">q</a></span><span class="op" id="2913245">.</span><span class="ident" id="2913246">div</span><span class="op" id="2913249">(</span><span class="ident" id="2913250"><a href="/math/big/rat.go.html#2912908">a2</a></span><span class="op" id="2913252">,</span>&nbsp;<span class="ident" id="2913254"><a href="/math/big/rat.go.html#2912908">a2</a></span><span class="op" id="2913256">,</span>&nbsp;<span class="ident" id="2913258"><a href="/math/big/rat.go.html#2912912">b2</a></span><span class="op" id="2913260">)</span>&nbsp;<span class="comment" id="2913262">//&nbsp;(recycle&nbsp;a2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913279">mantissa</span>&nbsp;<span class="op" id="2913288">:=</span>&nbsp;<span class="ident" id="2913291"><a href="/math/big/int.go.html#2860287">low64</a></span><span class="op" id="2913296">(</span><span class="ident" id="2913297"><a href="/math/big/rat.go.html#2913229">q</a></span><span class="op" id="2913298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913301">haveRem</span>&nbsp;<span class="op" id="2913309">:=</span>&nbsp;<span class="builtinfunc" id="2913312">len</span><span class="op" id="2913315">(</span><span class="ident" id="2913316"><a href="/math/big/rat.go.html#2913239">r</a></span><span class="op" id="2913317">)</span>&nbsp;<span class="op" id="2913319">&gt;</span>&nbsp;<span class="num" id="2913321">0</span>&nbsp;<span class="comment" id="2913323">//&nbsp;mantissa&amp;1&nbsp;&amp;&amp;&nbsp;!haveRem&nbsp;=&gt;&nbsp;remainder&nbsp;is&nbsp;exactly&nbsp;half</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2913380">//&nbsp;3.&nbsp;If&nbsp;quotient&nbsp;didn&#39;t&nbsp;fit&nbsp;in&nbsp;Msize2&nbsp;bits,&nbsp;redo&nbsp;division&nbsp;by&nbsp;b2&lt;&lt;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2913449">//&nbsp;(in&nbsp;effect---we&nbsp;accomplish&nbsp;this&nbsp;incrementally).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913501">if</span>&nbsp;<span class="ident" id="2913504"><a href="/math/big/rat.go.html#2913279">mantissa</a></span><span class="op" id="2913512">&gt;&gt;</span><span class="ident" id="2913514"><a href="/math/big/rat.go.html#2912138">Msize2</a></span>&nbsp;<span class="op" id="2913521">==</span>&nbsp;<span class="num" id="2913524">1</span>&nbsp;<span class="op" id="2913526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913530">if</span>&nbsp;<span class="ident" id="2913533"><a href="/math/big/rat.go.html#2913279">mantissa</a></span><span class="op" id="2913541">&amp;</span><span class="num" id="2913542">1</span>&nbsp;<span class="op" id="2913544">==</span>&nbsp;<span class="num" id="2913547">1</span>&nbsp;<span class="op" id="2913549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913554"><a href="/math/big/rat.go.html#2913301">haveRem</a></span>&nbsp;<span class="op" id="2913562">=</span>&nbsp;<span class="ident" id="2913564">true</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913575"><a href="/math/big/rat.go.html#2913279">mantissa</a></span>&nbsp;<span class="op" id="2913584">&gt;&gt;=</span>&nbsp;<span class="num" id="2913588">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913592"><a href="/math/big/rat.go.html#2912884">exp</a></span><span class="op" id="2913595">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913602">if</span>&nbsp;<span class="ident" id="2913605"><a href="/math/big/rat.go.html#2913279">mantissa</a></span><span class="op" id="2913613">&gt;&gt;</span><span class="ident" id="2913615"><a href="/math/big/rat.go.html#2912097">Msize1</a></span>&nbsp;<span class="op" id="2913622">!=</span>&nbsp;<span class="num" id="2913625">1</span>&nbsp;<span class="op" id="2913627">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2913631">panic</span><span class="op" id="2913636">(</span><span class="ident" id="2913637"><a href="/math/big/rat.go.html#2907826">fmt</a></span><span class="op" id="2913640">.</span><span class="ident" id="2913641">Sprintf</span><span class="op" id="2913648">(</span><span class="string" id="2913649">&#34;expected&nbsp;exactly&nbsp;%d&nbsp;bits&nbsp;of&nbsp;result&#34;</span><span class="op" id="2913685">,</span>&nbsp;<span class="ident" id="2913687"><a href="/math/big/rat.go.html#2912138">Msize2</a></span><span class="op" id="2913693">)</span><span class="op" id="2913694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2913701">//&nbsp;4.&nbsp;Rounding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913718">if</span>&nbsp;<span class="ident" id="2913721"><a href="/math/big/rat.go.html#2912227">Emin</a></span><span class="op" id="2913725">-</span><span class="ident" id="2913726"><a href="/math/big/rat.go.html#2912083">Msize</a></span>&nbsp;<span class="op" id="2913732">&lt;=</span>&nbsp;<span class="ident" id="2913735"><a href="/math/big/rat.go.html#2912884">exp</a></span>&nbsp;<span class="op" id="2913739">&amp;&amp;</span>&nbsp;<span class="ident" id="2913742"><a href="/math/big/rat.go.html#2912884">exp</a></span>&nbsp;<span class="op" id="2913746">&lt;=</span>&nbsp;<span class="ident" id="2913749"><a href="/math/big/rat.go.html#2912227">Emin</a></span>&nbsp;<span class="op" id="2913754">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2913758">//&nbsp;Denormal&nbsp;case;&nbsp;lose&nbsp;&#39;shift&#39;&nbsp;bits&nbsp;of&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913810">shift</span>&nbsp;<span class="op" id="2913816">:=</span>&nbsp;<span class="builtintype" id="2913819">uint</span><span class="op" id="2913823">(</span><span class="ident" id="2913824"><a href="/math/big/rat.go.html#2912227">Emin</a></span>&nbsp;<span class="op" id="2913829">-</span>&nbsp;<span class="op" id="2913831">(</span><span class="ident" id="2913832"><a href="/math/big/rat.go.html#2912884">exp</a></span>&nbsp;<span class="op" id="2913836">-</span>&nbsp;<span class="num" id="2913838">1</span><span class="op" id="2913839">)</span><span class="op" id="2913840">)</span>&nbsp;<span class="comment" id="2913842">//&nbsp;[1..Esize1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913859">lostbits</span>&nbsp;<span class="op" id="2913868">:=</span>&nbsp;<span class="ident" id="2913871"><a href="/math/big/rat.go.html#2913279">mantissa</a></span>&nbsp;<span class="op" id="2913880">&amp;</span>&nbsp;<span class="op" id="2913882">(</span><span class="num" id="2913883">1</span><span class="op" id="2913884">&lt;&lt;</span><span class="ident" id="2913886"><a href="/math/big/rat.go.html#2913810">shift</a></span>&nbsp;<span class="op" id="2913892">-</span>&nbsp;<span class="num" id="2913894">1</span><span class="op" id="2913895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913899"><a href="/math/big/rat.go.html#2913301">haveRem</a></span>&nbsp;<span class="op" id="2913907">=</span>&nbsp;<span class="ident" id="2913909"><a href="/math/big/rat.go.html#2913301">haveRem</a></span>&nbsp;<span class="op" id="2913917">||</span>&nbsp;<span class="ident" id="2913920"><a href="/math/big/rat.go.html#2913859">lostbits</a></span>&nbsp;<span class="op" id="2913929">!=</span>&nbsp;<span class="num" id="2913932">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913936"><a href="/math/big/rat.go.html#2913279">mantissa</a></span>&nbsp;<span class="op" id="2913945">&gt;&gt;=</span>&nbsp;<span class="ident" id="2913949"><a href="/math/big/rat.go.html#2913810">shift</a></span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913957"><a href="/math/big/rat.go.html#2912884">exp</a></span>&nbsp;<span class="op" id="2913961">=</span>&nbsp;<span class="num" id="2913963">2</span>&nbsp;<span class="op" id="2913965">-</span>&nbsp;<span class="ident" id="2913967"><a href="/math/big/rat.go.html#2912200">Ebias</a></span>&nbsp;<span class="comment" id="2913973">//&nbsp;==&nbsp;exp&nbsp;+&nbsp;shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2913995">//&nbsp;Round&nbsp;q&nbsp;using&nbsp;round-half-to-even.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914033"><a href="/math/big/rat.go.html#2912006">exact</a></span>&nbsp;<span class="op" id="2914039">=</span>&nbsp;<span class="op" id="2914041">!</span><span class="ident" id="2914042"><a href="/math/big/rat.go.html#2913301">haveRem</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914051">if</span>&nbsp;<span class="ident" id="2914054"><a href="/math/big/rat.go.html#2913279">mantissa</a></span><span class="op" id="2914062">&amp;</span><span class="num" id="2914063">1</span>&nbsp;<span class="op" id="2914065">!=</span>&nbsp;<span class="num" id="2914068">0</span>&nbsp;<span class="op" id="2914070">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914074"><a href="/math/big/rat.go.html#2912006">exact</a></span>&nbsp;<span class="op" id="2914080">=</span>&nbsp;<span class="ident" id="2914082">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914090">if</span>&nbsp;<span class="ident" id="2914093"><a href="/math/big/rat.go.html#2913301">haveRem</a></span>&nbsp;<span class="op" id="2914101">||</span>&nbsp;<span class="ident" id="2914104"><a href="/math/big/rat.go.html#2913279">mantissa</a></span><span class="op" id="2914112">&amp;</span><span class="num" id="2914113">2</span>&nbsp;<span class="op" id="2914115">!=</span>&nbsp;<span class="num" id="2914118">0</span>&nbsp;<span class="op" id="2914120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914125">if</span>&nbsp;<span class="ident" id="2914128"><a href="/math/big/rat.go.html#2913279">mantissa</a></span><span class="op" id="2914136">++</span><span class="op" id="2914138">;</span>&nbsp;<span class="ident" id="2914140"><a href="/math/big/rat.go.html#2913279">mantissa</a></span>&nbsp;<span class="op" id="2914149">&gt;=</span>&nbsp;<span class="num" id="2914152">1</span><span class="op" id="2914153">&lt;&lt;</span><span class="ident" id="2914155"><a href="/math/big/rat.go.html#2912138">Msize2</a></span>&nbsp;<span class="op" id="2914162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2914168">//&nbsp;Complete&nbsp;rollover&nbsp;11...1&nbsp;=&gt;&nbsp;100...0,&nbsp;so&nbsp;shift&nbsp;is&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914229"><a href="/math/big/rat.go.html#2913279">mantissa</a></span>&nbsp;<span class="op" id="2914238">&gt;&gt;=</span>&nbsp;<span class="num" id="2914242">1</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914248"><a href="/math/big/rat.go.html#2912884">exp</a></span><span class="op" id="2914251">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2914257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2914261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2914264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914267"><a href="/math/big/rat.go.html#2913279">mantissa</a></span>&nbsp;<span class="op" id="2914276">&gt;&gt;=</span>&nbsp;<span class="num" id="2914280">1</span>&nbsp;<span class="comment" id="2914282">//&nbsp;discard&nbsp;rounding&nbsp;bit.&nbsp;&nbsp;Mantissa&nbsp;now&nbsp;scaled&nbsp;by&nbsp;1&lt;&lt;Msize1.</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914344"><a href="/math/big/rat.go.html#2911995">f</a></span>&nbsp;<span class="op" id="2914346">=</span>&nbsp;<span class="ident" id="2914348"><a href="/math/big/rat.go.html#2907833">math</a></span><span class="op" id="2914352">.</span><span class="ident" id="2914353">Ldexp</span><span class="op" id="2914358">(</span><span class="builtintype" id="2914359">float64</span><span class="op" id="2914366">(</span><span class="ident" id="2914367"><a href="/math/big/rat.go.html#2913279">mantissa</a></span><span class="op" id="2914375">)</span><span class="op" id="2914376">,</span>&nbsp;<span class="ident" id="2914378"><a href="/math/big/rat.go.html#2912884">exp</a></span><span class="op" id="2914381">-</span><span class="ident" id="2914382"><a href="/math/big/rat.go.html#2912097">Msize1</a></span><span class="op" id="2914388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914391">if</span>&nbsp;<span class="ident" id="2914394"><a href="/math/big/rat.go.html#2907833">math</a></span><span class="op" id="2914398">.</span><span class="ident" id="2914399">IsInf</span><span class="op" id="2914404">(</span><span class="ident" id="2914405"><a href="/math/big/rat.go.html#2911995">f</a></span><span class="op" id="2914406">,</span>&nbsp;<span class="num" id="2914408">0</span><span class="op" id="2914409">)</span>&nbsp;<span class="op" id="2914411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914415"><a href="/math/big/rat.go.html#2912006">exact</a></span>&nbsp;<span class="op" id="2914421">=</span>&nbsp;<span class="ident" id="2914423">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2914430">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914433">return</span><br>
<span class="lineno"></span><span class="op" id="2914440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2914443">//&nbsp;Float32&nbsp;returns&nbsp;the&nbsp;nearest&nbsp;float32&nbsp;value&nbsp;for&nbsp;x&nbsp;and&nbsp;a&nbsp;bool&nbsp;indicating</span><br>
<span class="lineno"></span><span class="comment" id="2914516">//&nbsp;whether&nbsp;f&nbsp;represents&nbsp;x&nbsp;exactly.&nbsp;If&nbsp;the&nbsp;magnitude&nbsp;of&nbsp;x&nbsp;is&nbsp;too&nbsp;large&nbsp;to</span><br>
<span class="lineno">265</span><span class="comment" id="2914589">//&nbsp;be&nbsp;represented&nbsp;by&nbsp;a&nbsp;float32,&nbsp;f&nbsp;is&nbsp;an&nbsp;infinity&nbsp;and&nbsp;exact&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2914658">//&nbsp;The&nbsp;sign&nbsp;of&nbsp;f&nbsp;always&nbsp;matches&nbsp;the&nbsp;sign&nbsp;of&nbsp;x,&nbsp;even&nbsp;if&nbsp;f&nbsp;==&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="2914721">func</span>&nbsp;<span class="op" id="2914726">(</span><span class="ident" id="2914727">x</span>&nbsp;<span class="op" id="2914729">*</span><span class="ident" id="2914730"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2914733">)</span>&nbsp;<span class="ident" id="2914735">Float32</span><span class="op" id="2914742">(</span><span class="op" id="2914743">)</span>&nbsp;<span class="op" id="2914745">(</span><span class="ident" id="2914746">f</span>&nbsp;<span class="builtintype" id="2914748">float32</span><span class="op" id="2914755">,</span>&nbsp;<span class="ident" id="2914757">exact</span>&nbsp;<span class="builtintype" id="2914763">bool</span><span class="op" id="2914767">)</span>&nbsp;<span class="op" id="2914769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914772">b</span>&nbsp;<span class="op" id="2914774">:=</span>&nbsp;<span class="ident" id="2914777"><a href="/math/big/rat.go.html#2914727">x</a></span><span class="op" id="2914778">.</span><span class="ident" id="2914779">b</span><span class="op" id="2914780">.</span><span class="ident" id="2914781">abs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914786">if</span>&nbsp;<span class="builtinfunc" id="2914789">len</span><span class="op" id="2914792">(</span><span class="ident" id="2914793"><a href="/math/big/rat.go.html#2914772">b</a></span><span class="op" id="2914794">)</span>&nbsp;<span class="op" id="2914796">==</span>&nbsp;<span class="num" id="2914799">0</span>&nbsp;<span class="op" id="2914801">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914805"><a href="/math/big/rat.go.html#2914772">b</a></span>&nbsp;<span class="op" id="2914807">=</span>&nbsp;<span class="ident" id="2914809"><a href="/math/big/rat.go.html#2914772">b</a></span><span class="op" id="2914810">.</span><span class="ident" id="2914811">set</span><span class="op" id="2914814">(</span><span class="ident" id="2914815"><a href="/math/big/nat.go.html#2873896">natOne</a></span><span class="op" id="2914821">)</span>&nbsp;<span class="comment" id="2914823">//&nbsp;materialize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2914851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914854"><a href="/math/big/rat.go.html#2914746">f</a></span><span class="op" id="2914855">,</span>&nbsp;<span class="ident" id="2914857"><a href="/math/big/rat.go.html#2914757">exact</a></span>&nbsp;<span class="op" id="2914863">=</span>&nbsp;<span class="ident" id="2914865"><a href="/math/big/rat.go.html#2909245">quotToFloat32</a></span><span class="op" id="2914878">(</span><span class="ident" id="2914879"><a href="/math/big/rat.go.html#2914727">x</a></span><span class="op" id="2914880">.</span><span class="ident" id="2914881">a</span><span class="op" id="2914882">.</span><span class="ident" id="2914883">abs</span><span class="op" id="2914886">,</span>&nbsp;<span class="ident" id="2914888"><a href="/math/big/rat.go.html#2914772">b</a></span><span class="op" id="2914889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914892">if</span>&nbsp;<span class="ident" id="2914895"><a href="/math/big/rat.go.html#2914727">x</a></span><span class="op" id="2914896">.</span><span class="ident" id="2914897">a</span><span class="op" id="2914898">.</span><span class="ident" id="2914899">neg</span>&nbsp;<span class="op" id="2914903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914907"><a href="/math/big/rat.go.html#2914746">f</a></span>&nbsp;<span class="op" id="2914909">=</span>&nbsp;<span class="op" id="2914911">-</span><span class="ident" id="2914912"><a href="/math/big/rat.go.html#2914746">f</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2914915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914918">return</span><br>
<span class="lineno"></span><span class="op" id="2914925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2914928">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;nearest&nbsp;float64&nbsp;value&nbsp;for&nbsp;x&nbsp;and&nbsp;a&nbsp;bool&nbsp;indicating</span><br>
<span class="lineno">280</span><span class="comment" id="2915001">//&nbsp;whether&nbsp;f&nbsp;represents&nbsp;x&nbsp;exactly.&nbsp;If&nbsp;the&nbsp;magnitude&nbsp;of&nbsp;x&nbsp;is&nbsp;too&nbsp;large&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2915074">//&nbsp;be&nbsp;represented&nbsp;by&nbsp;a&nbsp;float64,&nbsp;f&nbsp;is&nbsp;an&nbsp;infinity&nbsp;and&nbsp;exact&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2915143">//&nbsp;The&nbsp;sign&nbsp;of&nbsp;f&nbsp;always&nbsp;matches&nbsp;the&nbsp;sign&nbsp;of&nbsp;x,&nbsp;even&nbsp;if&nbsp;f&nbsp;==&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="2915206">func</span>&nbsp;<span class="op" id="2915211">(</span><span class="ident" id="2915212">x</span>&nbsp;<span class="op" id="2915214">*</span><span class="ident" id="2915215"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2915218">)</span>&nbsp;<span class="ident" id="2915220">Float64</span><span class="op" id="2915227">(</span><span class="op" id="2915228">)</span>&nbsp;<span class="op" id="2915230">(</span><span class="ident" id="2915231">f</span>&nbsp;<span class="builtintype" id="2915233">float64</span><span class="op" id="2915240">,</span>&nbsp;<span class="ident" id="2915242">exact</span>&nbsp;<span class="builtintype" id="2915248">bool</span><span class="op" id="2915252">)</span>&nbsp;<span class="op" id="2915254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915257">b</span>&nbsp;<span class="op" id="2915259">:=</span>&nbsp;<span class="ident" id="2915262"><a href="/math/big/rat.go.html#2915212">x</a></span><span class="op" id="2915263">.</span><span class="ident" id="2915264">b</span><span class="op" id="2915265">.</span><span class="ident" id="2915266">abs</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915271">if</span>&nbsp;<span class="builtinfunc" id="2915274">len</span><span class="op" id="2915277">(</span><span class="ident" id="2915278"><a href="/math/big/rat.go.html#2915257">b</a></span><span class="op" id="2915279">)</span>&nbsp;<span class="op" id="2915281">==</span>&nbsp;<span class="num" id="2915284">0</span>&nbsp;<span class="op" id="2915286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915290"><a href="/math/big/rat.go.html#2915257">b</a></span>&nbsp;<span class="op" id="2915292">=</span>&nbsp;<span class="ident" id="2915294"><a href="/math/big/rat.go.html#2915257">b</a></span><span class="op" id="2915295">.</span><span class="ident" id="2915296">set</span><span class="op" id="2915299">(</span><span class="ident" id="2915300"><a href="/math/big/nat.go.html#2873896">natOne</a></span><span class="op" id="2915306">)</span>&nbsp;<span class="comment" id="2915308">//&nbsp;materialize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915339"><a href="/math/big/rat.go.html#2915231">f</a></span><span class="op" id="2915340">,</span>&nbsp;<span class="ident" id="2915342"><a href="/math/big/rat.go.html#2915242">exact</a></span>&nbsp;<span class="op" id="2915348">=</span>&nbsp;<span class="ident" id="2915350"><a href="/math/big/rat.go.html#2911970">quotToFloat64</a></span><span class="op" id="2915363">(</span><span class="ident" id="2915364"><a href="/math/big/rat.go.html#2915212">x</a></span><span class="op" id="2915365">.</span><span class="ident" id="2915366">a</span><span class="op" id="2915367">.</span><span class="ident" id="2915368">abs</span><span class="op" id="2915371">,</span>&nbsp;<span class="ident" id="2915373"><a href="/math/big/rat.go.html#2915257">b</a></span><span class="op" id="2915374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915377">if</span>&nbsp;<span class="ident" id="2915380"><a href="/math/big/rat.go.html#2915212">x</a></span><span class="op" id="2915381">.</span><span class="ident" id="2915382">a</span><span class="op" id="2915383">.</span><span class="ident" id="2915384">neg</span>&nbsp;<span class="op" id="2915388">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915392"><a href="/math/big/rat.go.html#2915231">f</a></span>&nbsp;<span class="op" id="2915394">=</span>&nbsp;<span class="op" id="2915396">-</span><span class="ident" id="2915397"><a href="/math/big/rat.go.html#2915231">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915403">return</span><br>
<span class="lineno"></span><span class="op" id="2915410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="comment" id="2915413">//&nbsp;SetFrac&nbsp;sets&nbsp;z&nbsp;to&nbsp;a/b&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2915453">func</span>&nbsp;<span class="op" id="2915458">(</span><span class="ident" id="2915459">z</span>&nbsp;<span class="op" id="2915461">*</span><span class="ident" id="2915462"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2915465">)</span>&nbsp;<span class="ident" id="2915467">SetFrac</span><span class="op" id="2915474">(</span><span class="ident" id="2915475">a</span><span class="op" id="2915476">,</span>&nbsp;<span class="ident" id="2915478">b</span>&nbsp;<span class="op" id="2915480">*</span><span class="ident" id="2915481"><a href="/math/big/int.go.html#2847707">Int</a></span><span class="op" id="2915484">)</span>&nbsp;<span class="op" id="2915486">*</span><span class="ident" id="2915487"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2915491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915494"><a href="/math/big/rat.go.html#2915459">z</a></span><span class="op" id="2915495">.</span><span class="ident" id="2915496">a</span><span class="op" id="2915497">.</span><span class="ident" id="2915498">neg</span>&nbsp;<span class="op" id="2915502">=</span>&nbsp;<span class="ident" id="2915504"><a href="/math/big/rat.go.html#2915475">a</a></span><span class="op" id="2915505">.</span><span class="ident" id="2915506">neg</span>&nbsp;<span class="op" id="2915510">!=</span>&nbsp;<span class="ident" id="2915513"><a href="/math/big/rat.go.html#2915478">b</a></span><span class="op" id="2915514">.</span><span class="ident" id="2915515">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915520">babs</span>&nbsp;<span class="op" id="2915525">:=</span>&nbsp;<span class="ident" id="2915528"><a href="/math/big/rat.go.html#2915478">b</a></span><span class="op" id="2915529">.</span><span class="ident" id="2915530">abs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915535">if</span>&nbsp;<span class="builtinfunc" id="2915538">len</span><span class="op" id="2915541">(</span><span class="ident" id="2915542"><a href="/math/big/rat.go.html#2915520">babs</a></span><span class="op" id="2915546">)</span>&nbsp;<span class="op" id="2915548">==</span>&nbsp;<span class="num" id="2915551">0</span>&nbsp;<span class="op" id="2915553">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2915557">panic</span><span class="op" id="2915562">(</span><span class="string" id="2915563">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2915581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915587">if</span>&nbsp;<span class="op" id="2915590">&amp;</span><span class="ident" id="2915591"><a href="/math/big/rat.go.html#2915459">z</a></span><span class="op" id="2915592">.</span><span class="ident" id="2915593">a</span>&nbsp;<span class="op" id="2915595">==</span>&nbsp;<span class="ident" id="2915598"><a href="/math/big/rat.go.html#2915478">b</a></span>&nbsp;<span class="op" id="2915600">||</span>&nbsp;<span class="ident" id="2915603"><a href="/math/big/nat.go.html#2879855">alias</a></span><span class="op" id="2915608">(</span><span class="ident" id="2915609"><a href="/math/big/rat.go.html#2915459">z</a></span><span class="op" id="2915610">.</span><span class="ident" id="2915611">a</span><span class="op" id="2915612">.</span><span class="ident" id="2915613">abs</span><span class="op" id="2915616">,</span>&nbsp;<span class="ident" id="2915618"><a href="/math/big/rat.go.html#2915520">babs</a></span><span class="op" id="2915622">)</span>&nbsp;<span class="op" id="2915624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915628"><a href="/math/big/rat.go.html#2915520">babs</a></span>&nbsp;<span class="op" id="2915633">=</span>&nbsp;<span class="ident" id="2915635"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2915638">(</span><span class="ident" id="2915639">nil</span><span class="op" id="2915642">)</span><span class="op" id="2915643">.</span><span class="ident" id="2915644">set</span><span class="op" id="2915647">(</span><span class="ident" id="2915648"><a href="/math/big/rat.go.html#2915520">babs</a></span><span class="op" id="2915652">)</span>&nbsp;<span class="comment" id="2915654">//&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915670">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915673"><a href="/math/big/rat.go.html#2915459">z</a></span><span class="op" id="2915674">.</span><span class="ident" id="2915675">a</span><span class="op" id="2915676">.</span><span class="ident" id="2915677">abs</span>&nbsp;<span class="op" id="2915681">=</span>&nbsp;<span class="ident" id="2915683"><a href="/math/big/rat.go.html#2915459">z</a></span><span class="op" id="2915684">.</span><span class="ident" id="2915685">a</span><span class="op" id="2915686">.</span><span class="ident" id="2915687">abs</span><span class="op" id="2915690">.</span><span class="ident" id="2915691">set</span><span class="op" id="2915694">(</span><span class="ident" id="2915695"><a href="/math/big/rat.go.html#2915475">a</a></span><span class="op" id="2915696">.</span><span class="ident" id="2915697">abs</span><span class="op" id="2915700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915703"><a href="/math/big/rat.go.html#2915459">z</a></span><span class="op" id="2915704">.</span><span class="ident" id="2915705">b</span><span class="op" id="2915706">.</span><span class="ident" id="2915707">abs</span>&nbsp;<span class="op" id="2915711">=</span>&nbsp;<span class="ident" id="2915713"><a href="/math/big/rat.go.html#2915459">z</a></span><span class="op" id="2915714">.</span><span class="ident" id="2915715">b</span><span class="op" id="2915716">.</span><span class="ident" id="2915717">abs</span><span class="op" id="2915720">.</span><span class="ident" id="2915721">set</span><span class="op" id="2915724">(</span><span class="ident" id="2915725"><a href="/math/big/rat.go.html#2915520">babs</a></span><span class="op" id="2915729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915732">return</span>&nbsp;<span class="ident" id="2915739"><a href="/math/big/rat.go.html#2915459">z</a></span><span class="op" id="2915740">.</span><span class="ident" id="2915741">norm</span><span class="op" id="2915745">(</span><span class="op" id="2915746">)</span><br>
<span class="lineno"></span><span class="op" id="2915748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="2915751">//&nbsp;SetFrac64&nbsp;sets&nbsp;z&nbsp;to&nbsp;a/b&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2915793">func</span>&nbsp;<span class="op" id="2915798">(</span><span class="ident" id="2915799">z</span>&nbsp;<span class="op" id="2915801">*</span><span class="ident" id="2915802"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2915805">)</span>&nbsp;<span class="ident" id="2915807">SetFrac64</span><span class="op" id="2915816">(</span><span class="ident" id="2915817">a</span><span class="op" id="2915818">,</span>&nbsp;<span class="ident" id="2915820">b</span>&nbsp;<span class="ident" id="2915822">int64</span><span class="op" id="2915827">)</span>&nbsp;<span class="op" id="2915829">*</span><span class="ident" id="2915830"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2915834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915837"><a href="/math/big/rat.go.html#2915799">z</a></span><span class="op" id="2915838">.</span><span class="ident" id="2915839">a</span><span class="op" id="2915840">.</span><span class="ident" id="2915841">SetInt64</span><span class="op" id="2915849">(</span><span class="ident" id="2915850"><a href="/math/big/rat.go.html#2915817">a</a></span><span class="op" id="2915851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915854">if</span>&nbsp;<span class="ident" id="2915857"><a href="/math/big/rat.go.html#2915820">b</a></span>&nbsp;<span class="op" id="2915859">==</span>&nbsp;<span class="num" id="2915862">0</span>&nbsp;<span class="op" id="2915864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2915868">panic</span><span class="op" id="2915873">(</span><span class="string" id="2915874">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2915892">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915898">if</span>&nbsp;<span class="ident" id="2915901"><a href="/math/big/rat.go.html#2915820">b</a></span>&nbsp;<span class="op" id="2915903">&lt;</span>&nbsp;<span class="num" id="2915905">0</span>&nbsp;<span class="op" id="2915907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915911"><a href="/math/big/rat.go.html#2915820">b</a></span>&nbsp;<span class="op" id="2915913">=</span>&nbsp;<span class="op" id="2915915">-</span><span class="ident" id="2915916"><a href="/math/big/rat.go.html#2915820">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915920"><a href="/math/big/rat.go.html#2915799">z</a></span><span class="op" id="2915921">.</span><span class="ident" id="2915922">a</span><span class="op" id="2915923">.</span><span class="ident" id="2915924">neg</span>&nbsp;<span class="op" id="2915928">=</span>&nbsp;<span class="op" id="2915930">!</span><span class="ident" id="2915931"><a href="/math/big/rat.go.html#2915799">z</a></span><span class="op" id="2915932">.</span><span class="ident" id="2915933">a</span><span class="op" id="2915934">.</span><span class="ident" id="2915935">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915940">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915943"><a href="/math/big/rat.go.html#2915799">z</a></span><span class="op" id="2915944">.</span><span class="ident" id="2915945">b</span><span class="op" id="2915946">.</span><span class="ident" id="2915947">abs</span>&nbsp;<span class="op" id="2915951">=</span>&nbsp;<span class="ident" id="2915953"><a href="/math/big/rat.go.html#2915799">z</a></span><span class="op" id="2915954">.</span><span class="ident" id="2915955">b</span><span class="op" id="2915956">.</span><span class="ident" id="2915957">abs</span><span class="op" id="2915960">.</span><span class="ident" id="2915961">setUint64</span><span class="op" id="2915970">(</span><span class="ident" id="2915971">uint64</span><span class="op" id="2915977">(</span><span class="ident" id="2915978"><a href="/math/big/rat.go.html#2915820">b</a></span><span class="op" id="2915979">)</span><span class="op" id="2915980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915983">return</span>&nbsp;<span class="ident" id="2915990"><a href="/math/big/rat.go.html#2915799">z</a></span><span class="op" id="2915991">.</span><span class="ident" id="2915992">norm</span><span class="op" id="2915996">(</span><span class="op" id="2915997">)</span><br>
<span class="lineno"></span><span class="op" id="2915999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2916002">//&nbsp;SetInt&nbsp;sets&nbsp;z&nbsp;to&nbsp;x&nbsp;(by&nbsp;making&nbsp;a&nbsp;copy&nbsp;of&nbsp;x)&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno">325</span><span class="keyword" id="2916063">func</span>&nbsp;<span class="op" id="2916068">(</span><span class="ident" id="2916069">z</span>&nbsp;<span class="op" id="2916071">*</span><span class="ident" id="2916072"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2916075">)</span>&nbsp;<span class="ident" id="2916077">SetInt</span><span class="op" id="2916083">(</span><span class="ident" id="2916084">x</span>&nbsp;<span class="op" id="2916086">*</span><span class="ident" id="2916087"><a href="/math/big/int.go.html#2847707">Int</a></span><span class="op" id="2916090">)</span>&nbsp;<span class="op" id="2916092">*</span><span class="ident" id="2916093"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2916097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916100"><a href="/math/big/rat.go.html#2916069">z</a></span><span class="op" id="2916101">.</span><span class="ident" id="2916102">a</span><span class="op" id="2916103">.</span><span class="ident" id="2916104">Set</span><span class="op" id="2916107">(</span><span class="ident" id="2916108"><a href="/math/big/rat.go.html#2916084">x</a></span><span class="op" id="2916109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916112"><a href="/math/big/rat.go.html#2916069">z</a></span><span class="op" id="2916113">.</span><span class="ident" id="2916114">b</span><span class="op" id="2916115">.</span><span class="ident" id="2916116">abs</span>&nbsp;<span class="op" id="2916120">=</span>&nbsp;<span class="ident" id="2916122"><a href="/math/big/rat.go.html#2916069">z</a></span><span class="op" id="2916123">.</span><span class="ident" id="2916124">b</span><span class="op" id="2916125">.</span><span class="ident" id="2916126">abs</span><span class="op" id="2916129">.</span><span class="builtinfunc" id="2916130">make</span><span class="op" id="2916134">(</span><span class="num" id="2916135">0</span><span class="op" id="2916136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916139">return</span>&nbsp;<span class="ident" id="2916146"><a href="/math/big/rat.go.html#2916069">z</a></span><br>
<span class="lineno"></span><span class="op" id="2916148">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="comment" id="2916151">//&nbsp;SetInt64&nbsp;sets&nbsp;z&nbsp;to&nbsp;x&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2916190">func</span>&nbsp;<span class="op" id="2916195">(</span><span class="ident" id="2916196">z</span>&nbsp;<span class="op" id="2916198">*</span><span class="ident" id="2916199"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2916202">)</span>&nbsp;<span class="ident" id="2916204">SetInt64</span><span class="op" id="2916212">(</span><span class="ident" id="2916213">x</span>&nbsp;<span class="ident" id="2916215">int64</span><span class="op" id="2916220">)</span>&nbsp;<span class="op" id="2916222">*</span><span class="ident" id="2916223"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2916227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916230"><a href="/math/big/rat.go.html#2916196">z</a></span><span class="op" id="2916231">.</span><span class="ident" id="2916232">a</span><span class="op" id="2916233">.</span><span class="ident" id="2916234">SetInt64</span><span class="op" id="2916242">(</span><span class="ident" id="2916243"><a href="/math/big/rat.go.html#2916213">x</a></span><span class="op" id="2916244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916247"><a href="/math/big/rat.go.html#2916196">z</a></span><span class="op" id="2916248">.</span><span class="ident" id="2916249">b</span><span class="op" id="2916250">.</span><span class="ident" id="2916251">abs</span>&nbsp;<span class="op" id="2916255">=</span>&nbsp;<span class="ident" id="2916257"><a href="/math/big/rat.go.html#2916196">z</a></span><span class="op" id="2916258">.</span><span class="ident" id="2916259">b</span><span class="op" id="2916260">.</span><span class="ident" id="2916261">abs</span><span class="op" id="2916264">.</span><span class="builtinfunc" id="2916265">make</span><span class="op" id="2916269">(</span><span class="num" id="2916270">0</span><span class="op" id="2916271">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916274">return</span>&nbsp;<span class="ident" id="2916281"><a href="/math/big/rat.go.html#2916196">z</a></span><br>
<span class="lineno"></span><span class="op" id="2916283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2916286">//&nbsp;Set&nbsp;sets&nbsp;z&nbsp;to&nbsp;x&nbsp;(by&nbsp;making&nbsp;a&nbsp;copy&nbsp;of&nbsp;x)&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2916344">func</span>&nbsp;<span class="op" id="2916349">(</span><span class="ident" id="2916350">z</span>&nbsp;<span class="op" id="2916352">*</span><span class="ident" id="2916353"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2916356">)</span>&nbsp;<span class="ident" id="2916358">Set</span><span class="op" id="2916361">(</span><span class="ident" id="2916362">x</span>&nbsp;<span class="op" id="2916364">*</span><span class="ident" id="2916365"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2916368">)</span>&nbsp;<span class="op" id="2916370">*</span><span class="ident" id="2916371"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2916375">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916378">if</span>&nbsp;<span class="ident" id="2916381"><a href="/math/big/rat.go.html#2916350">z</a></span>&nbsp;<span class="op" id="2916383">!=</span>&nbsp;<span class="ident" id="2916386"><a href="/math/big/rat.go.html#2916362">x</a></span>&nbsp;<span class="op" id="2916388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916392"><a href="/math/big/rat.go.html#2916350">z</a></span><span class="op" id="2916393">.</span><span class="ident" id="2916394">a</span><span class="op" id="2916395">.</span><span class="ident" id="2916396">Set</span><span class="op" id="2916399">(</span><span class="op" id="2916400">&amp;</span><span class="ident" id="2916401"><a href="/math/big/rat.go.html#2916362">x</a></span><span class="op" id="2916402">.</span><span class="ident" id="2916403">a</span><span class="op" id="2916404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916408"><a href="/math/big/rat.go.html#2916350">z</a></span><span class="op" id="2916409">.</span><span class="ident" id="2916410">b</span><span class="op" id="2916411">.</span><span class="ident" id="2916412">Set</span><span class="op" id="2916415">(</span><span class="op" id="2916416">&amp;</span><span class="ident" id="2916417"><a href="/math/big/rat.go.html#2916362">x</a></span><span class="op" id="2916418">.</span><span class="ident" id="2916419">b</span><span class="op" id="2916420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916426">return</span>&nbsp;<span class="ident" id="2916433"><a href="/math/big/rat.go.html#2916350">z</a></span><br>
<span class="lineno">345</span><span class="op" id="2916435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2916438">//&nbsp;Abs&nbsp;sets&nbsp;z&nbsp;to&nbsp;|x|&nbsp;(the&nbsp;absolute&nbsp;value&nbsp;of&nbsp;x)&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2916500">func</span>&nbsp;<span class="op" id="2916505">(</span><span class="ident" id="2916506">z</span>&nbsp;<span class="op" id="2916508">*</span><span class="ident" id="2916509"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2916512">)</span>&nbsp;<span class="ident" id="2916514">Abs</span><span class="op" id="2916517">(</span><span class="ident" id="2916518">x</span>&nbsp;<span class="op" id="2916520">*</span><span class="ident" id="2916521"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2916524">)</span>&nbsp;<span class="op" id="2916526">*</span><span class="ident" id="2916527"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2916531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916534"><a href="/math/big/rat.go.html#2916506">z</a></span><span class="op" id="2916535">.</span><span class="ident" id="2916536">Set</span><span class="op" id="2916539">(</span><span class="ident" id="2916540"><a href="/math/big/rat.go.html#2916518">x</a></span><span class="op" id="2916541">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916544"><a href="/math/big/rat.go.html#2916506">z</a></span><span class="op" id="2916545">.</span><span class="ident" id="2916546">a</span><span class="op" id="2916547">.</span><span class="ident" id="2916548">neg</span>&nbsp;<span class="op" id="2916552">=</span>&nbsp;<span class="ident" id="2916554">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916561">return</span>&nbsp;<span class="ident" id="2916568"><a href="/math/big/rat.go.html#2916506">z</a></span><br>
<span class="lineno"></span><span class="op" id="2916570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2916573">//&nbsp;Neg&nbsp;sets&nbsp;z&nbsp;to&nbsp;-x&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno">355</span><span class="keyword" id="2916608">func</span>&nbsp;<span class="op" id="2916613">(</span><span class="ident" id="2916614">z</span>&nbsp;<span class="op" id="2916616">*</span><span class="ident" id="2916617"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2916620">)</span>&nbsp;<span class="ident" id="2916622">Neg</span><span class="op" id="2916625">(</span><span class="ident" id="2916626">x</span>&nbsp;<span class="op" id="2916628">*</span><span class="ident" id="2916629"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2916632">)</span>&nbsp;<span class="op" id="2916634">*</span><span class="ident" id="2916635"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2916639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916642"><a href="/math/big/rat.go.html#2916614">z</a></span><span class="op" id="2916643">.</span><span class="ident" id="2916644">Set</span><span class="op" id="2916647">(</span><span class="ident" id="2916648"><a href="/math/big/rat.go.html#2916626">x</a></span><span class="op" id="2916649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916652"><a href="/math/big/rat.go.html#2916614">z</a></span><span class="op" id="2916653">.</span><span class="ident" id="2916654">a</span><span class="op" id="2916655">.</span><span class="ident" id="2916656">neg</span>&nbsp;<span class="op" id="2916660">=</span>&nbsp;<span class="builtinfunc" id="2916662">len</span><span class="op" id="2916665">(</span><span class="ident" id="2916666"><a href="/math/big/rat.go.html#2916614">z</a></span><span class="op" id="2916667">.</span><span class="ident" id="2916668">a</span><span class="op" id="2916669">.</span><span class="ident" id="2916670">abs</span><span class="op" id="2916673">)</span>&nbsp;<span class="op" id="2916675">&gt;</span>&nbsp;<span class="num" id="2916677">0</span>&nbsp;<span class="op" id="2916679">&amp;&amp;</span>&nbsp;<span class="op" id="2916682">!</span><span class="ident" id="2916683"><a href="/math/big/rat.go.html#2916614">z</a></span><span class="op" id="2916684">.</span><span class="ident" id="2916685">a</span><span class="op" id="2916686">.</span><span class="ident" id="2916687">neg</span>&nbsp;<span class="comment" id="2916691">//&nbsp;0&nbsp;has&nbsp;no&nbsp;sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916709">return</span>&nbsp;<span class="ident" id="2916716"><a href="/math/big/rat.go.html#2916614">z</a></span><br>
<span class="lineno"></span><span class="op" id="2916718">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="comment" id="2916721">//&nbsp;Inv&nbsp;sets&nbsp;z&nbsp;to&nbsp;1/x&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2916757">func</span>&nbsp;<span class="op" id="2916762">(</span><span class="ident" id="2916763">z</span>&nbsp;<span class="op" id="2916765">*</span><span class="ident" id="2916766"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2916769">)</span>&nbsp;<span class="ident" id="2916771">Inv</span><span class="op" id="2916774">(</span><span class="ident" id="2916775">x</span>&nbsp;<span class="op" id="2916777">*</span><span class="ident" id="2916778"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2916781">)</span>&nbsp;<span class="op" id="2916783">*</span><span class="ident" id="2916784"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2916788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916791">if</span>&nbsp;<span class="builtinfunc" id="2916794">len</span><span class="op" id="2916797">(</span><span class="ident" id="2916798"><a href="/math/big/rat.go.html#2916775">x</a></span><span class="op" id="2916799">.</span><span class="ident" id="2916800">a</span><span class="op" id="2916801">.</span><span class="ident" id="2916802">abs</span><span class="op" id="2916805">)</span>&nbsp;<span class="op" id="2916807">==</span>&nbsp;<span class="num" id="2916810">0</span>&nbsp;<span class="op" id="2916812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2916816">panic</span><span class="op" id="2916821">(</span><span class="string" id="2916822">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2916840">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916846"><a href="/math/big/rat.go.html#2916763">z</a></span><span class="op" id="2916847">.</span><span class="ident" id="2916848">Set</span><span class="op" id="2916851">(</span><span class="ident" id="2916852"><a href="/math/big/rat.go.html#2916775">x</a></span><span class="op" id="2916853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916856">a</span>&nbsp;<span class="op" id="2916858">:=</span>&nbsp;<span class="ident" id="2916861"><a href="/math/big/rat.go.html#2916763">z</a></span><span class="op" id="2916862">.</span><span class="ident" id="2916863">b</span><span class="op" id="2916864">.</span><span class="ident" id="2916865">abs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916870">if</span>&nbsp;<span class="builtinfunc" id="2916873">len</span><span class="op" id="2916876">(</span><span class="ident" id="2916877"><a href="/math/big/rat.go.html#2916856">a</a></span><span class="op" id="2916878">)</span>&nbsp;<span class="op" id="2916880">==</span>&nbsp;<span class="num" id="2916883">0</span>&nbsp;<span class="op" id="2916885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916889"><a href="/math/big/rat.go.html#2916856">a</a></span>&nbsp;<span class="op" id="2916891">=</span>&nbsp;<span class="ident" id="2916893"><a href="/math/big/rat.go.html#2916856">a</a></span><span class="op" id="2916894">.</span><span class="ident" id="2916895">set</span><span class="op" id="2916898">(</span><span class="ident" id="2916899"><a href="/math/big/nat.go.html#2873896">natOne</a></span><span class="op" id="2916905">)</span>&nbsp;<span class="comment" id="2916907">//&nbsp;materialize&nbsp;numerator</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916936">b</span>&nbsp;<span class="op" id="2916938">:=</span>&nbsp;<span class="ident" id="2916941"><a href="/math/big/rat.go.html#2916763">z</a></span><span class="op" id="2916942">.</span><span class="ident" id="2916943">a</span><span class="op" id="2916944">.</span><span class="ident" id="2916945">abs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916950">if</span>&nbsp;<span class="ident" id="2916953"><a href="/math/big/rat.go.html#2916936">b</a></span><span class="op" id="2916954">.</span><span class="ident" id="2916955">cmp</span><span class="op" id="2916958">(</span><span class="ident" id="2916959"><a href="/math/big/nat.go.html#2873896">natOne</a></span><span class="op" id="2916965">)</span>&nbsp;<span class="op" id="2916967">==</span>&nbsp;<span class="num" id="2916970">0</span>&nbsp;<span class="op" id="2916972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916976"><a href="/math/big/rat.go.html#2916936">b</a></span>&nbsp;<span class="op" id="2916978">=</span>&nbsp;<span class="ident" id="2916980"><a href="/math/big/rat.go.html#2916936">b</a></span><span class="op" id="2916981">.</span><span class="builtinfunc" id="2916982">make</span><span class="op" id="2916986">(</span><span class="num" id="2916987">0</span><span class="op" id="2916988">)</span>&nbsp;<span class="comment" id="2916990">//&nbsp;normalize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917016">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917019"><a href="/math/big/rat.go.html#2916763">z</a></span><span class="op" id="2917020">.</span><span class="ident" id="2917021">a</span><span class="op" id="2917022">.</span><span class="ident" id="2917023">abs</span><span class="op" id="2917026">,</span>&nbsp;<span class="ident" id="2917028"><a href="/math/big/rat.go.html#2916763">z</a></span><span class="op" id="2917029">.</span><span class="ident" id="2917030">b</span><span class="op" id="2917031">.</span><span class="ident" id="2917032">abs</span>&nbsp;<span class="op" id="2917036">=</span>&nbsp;<span class="ident" id="2917038"><a href="/math/big/rat.go.html#2916856">a</a></span><span class="op" id="2917039">,</span>&nbsp;<span class="ident" id="2917041"><a href="/math/big/rat.go.html#2916936">b</a></span>&nbsp;<span class="comment" id="2917043">//&nbsp;sign&nbsp;doesn&#39;t&nbsp;change</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917067">return</span>&nbsp;<span class="ident" id="2917074"><a href="/math/big/rat.go.html#2916763">z</a></span><br>
<span class="lineno"></span><span class="op" id="2917076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917079">//&nbsp;Sign&nbsp;returns:</span><br>
<span class="lineno">380</span><span class="comment" id="2917096">//</span><br>
<span class="lineno"></span><span class="comment" id="2917099">//&nbsp;&nbsp;&nbsp;&nbsp-1&nbsp;if&nbsp;x&nbsp;&lt;&nbsp;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2917115">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;0&nbsp;if&nbsp;x&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2917131">//&nbsp;&nbsp;&nbsp;&nbsp+1&nbsp;if&nbsp;x&nbsp;&gt;&nbsp;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2917147">//</span><br>
<span class="lineno">385</span><span class="keyword" id="2917150">func</span>&nbsp;<span class="op" id="2917155">(</span><span class="ident" id="2917156">x</span>&nbsp;<span class="op" id="2917158">*</span><span class="ident" id="2917159"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2917162">)</span>&nbsp;<span class="ident" id="2917164">Sign</span><span class="op" id="2917168">(</span><span class="op" id="2917169">)</span>&nbsp;<span class="builtintype" id="2917171">int</span>&nbsp;<span class="op" id="2917175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917178">return</span>&nbsp;<span class="ident" id="2917185"><a href="/math/big/rat.go.html#2917156">x</a></span><span class="op" id="2917186">.</span><span class="ident" id="2917187">a</span><span class="op" id="2917188">.</span><span class="ident" id="2917189">Sign</span><span class="op" id="2917193">(</span><span class="op" id="2917194">)</span><br>
<span class="lineno"></span><span class="op" id="2917196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917199">//&nbsp;IsInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;denominator&nbsp;of&nbsp;x&nbsp;is&nbsp;1.</span><br>
<span class="lineno">390</span><span class="keyword" id="2917251">func</span>&nbsp;<span class="op" id="2917256">(</span><span class="ident" id="2917257">x</span>&nbsp;<span class="op" id="2917259">*</span><span class="ident" id="2917260"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2917263">)</span>&nbsp;<span class="ident" id="2917265">IsInt</span><span class="op" id="2917270">(</span><span class="op" id="2917271">)</span>&nbsp;<span class="builtintype" id="2917273">bool</span>&nbsp;<span class="op" id="2917278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917281">return</span>&nbsp;<span class="builtinfunc" id="2917288">len</span><span class="op" id="2917291">(</span><span class="ident" id="2917292"><a href="/math/big/rat.go.html#2917257">x</a></span><span class="op" id="2917293">.</span><span class="ident" id="2917294">b</span><span class="op" id="2917295">.</span><span class="ident" id="2917296">abs</span><span class="op" id="2917299">)</span>&nbsp;<span class="op" id="2917301">==</span>&nbsp;<span class="num" id="2917304">0</span>&nbsp;<span class="op" id="2917306">||</span>&nbsp;<span class="ident" id="2917309"><a href="/math/big/rat.go.html#2917257">x</a></span><span class="op" id="2917310">.</span><span class="ident" id="2917311">b</span><span class="op" id="2917312">.</span><span class="ident" id="2917313">abs</span><span class="op" id="2917316">.</span><span class="ident" id="2917317">cmp</span><span class="op" id="2917320">(</span><span class="ident" id="2917321"><a href="/math/big/nat.go.html#2873896">natOne</a></span><span class="op" id="2917327">)</span>&nbsp;<span class="op" id="2917329">==</span>&nbsp;<span class="num" id="2917332">0</span><br>
<span class="lineno"></span><span class="op" id="2917334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917337">//&nbsp;Num&nbsp;returns&nbsp;the&nbsp;numerator&nbsp;of&nbsp;x;&nbsp;it&nbsp;may&nbsp;be&nbsp;&lt;=&nbsp;0.</span><br>
<span class="lineno">395</span><span class="comment" id="2917388">//&nbsp;The&nbsp;result&nbsp;is&nbsp;a&nbsp;reference&nbsp;to&nbsp;x&#39;s&nbsp;numerator;&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="2917438">//&nbsp;may&nbsp;change&nbsp;if&nbsp;a&nbsp;new&nbsp;value&nbsp;is&nbsp;assigned&nbsp;to&nbsp;x,&nbsp;and&nbsp;vice&nbsp;versa.</span><br>
<span class="lineno"></span><span class="comment" id="2917501">//&nbsp;The&nbsp;sign&nbsp;of&nbsp;the&nbsp;numerator&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;sign&nbsp;of&nbsp;x.</span><br>
<span class="lineno"></span><span class="keyword" id="2917560">func</span>&nbsp;<span class="op" id="2917565">(</span><span class="ident" id="2917566">x</span>&nbsp;<span class="op" id="2917568">*</span><span class="ident" id="2917569"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2917572">)</span>&nbsp;<span class="ident" id="2917574">Num</span><span class="op" id="2917577">(</span><span class="op" id="2917578">)</span>&nbsp;<span class="op" id="2917580">*</span><span class="ident" id="2917581"><a href="/math/big/int.go.html#2847707">Int</a></span>&nbsp;<span class="op" id="2917585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917588">return</span>&nbsp;<span class="op" id="2917595">&amp;</span><span class="ident" id="2917596"><a href="/math/big/rat.go.html#2917566">x</a></span><span class="op" id="2917597">.</span><span class="ident" id="2917598">a</span><br>
<span class="lineno">400</span><span class="op" id="2917600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917603">//&nbsp;Denom&nbsp;returns&nbsp;the&nbsp;denominator&nbsp;of&nbsp;x;&nbsp;it&nbsp;is&nbsp;always&nbsp;&gt;&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2917660">//&nbsp;The&nbsp;result&nbsp;is&nbsp;a&nbsp;reference&nbsp;to&nbsp;x&#39;s&nbsp;denominator;&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="2917712">//&nbsp;may&nbsp;change&nbsp;if&nbsp;a&nbsp;new&nbsp;value&nbsp;is&nbsp;assigned&nbsp;to&nbsp;x,&nbsp;and&nbsp;vice&nbsp;versa.</span><br>
<span class="lineno">405</span><span class="keyword" id="2917775">func</span>&nbsp;<span class="op" id="2917780">(</span><span class="ident" id="2917781">x</span>&nbsp;<span class="op" id="2917783">*</span><span class="ident" id="2917784"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2917787">)</span>&nbsp;<span class="ident" id="2917789">Denom</span><span class="op" id="2917794">(</span><span class="op" id="2917795">)</span>&nbsp;<span class="op" id="2917797">*</span><span class="ident" id="2917798"><a href="/math/big/int.go.html#2847707">Int</a></span>&nbsp;<span class="op" id="2917802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917805"><a href="/math/big/rat.go.html#2917781">x</a></span><span class="op" id="2917806">.</span><span class="ident" id="2917807">b</span><span class="op" id="2917808">.</span><span class="ident" id="2917809">neg</span>&nbsp;<span class="op" id="2917813">=</span>&nbsp;<span class="ident" id="2917815">false</span>&nbsp;<span class="comment" id="2917821">//&nbsp;the&nbsp;result&nbsp;is&nbsp;always&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917851">if</span>&nbsp;<span class="builtinfunc" id="2917854">len</span><span class="op" id="2917857">(</span><span class="ident" id="2917858"><a href="/math/big/rat.go.html#2917781">x</a></span><span class="op" id="2917859">.</span><span class="ident" id="2917860">b</span><span class="op" id="2917861">.</span><span class="ident" id="2917862">abs</span><span class="op" id="2917865">)</span>&nbsp;<span class="op" id="2917867">==</span>&nbsp;<span class="num" id="2917870">0</span>&nbsp;<span class="op" id="2917872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917876"><a href="/math/big/rat.go.html#2917781">x</a></span><span class="op" id="2917877">.</span><span class="ident" id="2917878">b</span><span class="op" id="2917879">.</span><span class="ident" id="2917880">abs</span>&nbsp;<span class="op" id="2917884">=</span>&nbsp;<span class="ident" id="2917886"><a href="/math/big/rat.go.html#2917781">x</a></span><span class="op" id="2917887">.</span><span class="ident" id="2917888">b</span><span class="op" id="2917889">.</span><span class="ident" id="2917890">abs</span><span class="op" id="2917893">.</span><span class="ident" id="2917894">set</span><span class="op" id="2917897">(</span><span class="ident" id="2917898"><a href="/math/big/nat.go.html#2873896">natOne</a></span><span class="op" id="2917904">)</span>&nbsp;<span class="comment" id="2917906">//&nbsp;materialize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917934">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917937">return</span>&nbsp;<span class="op" id="2917944">&amp;</span><span class="ident" id="2917945"><a href="/math/big/rat.go.html#2917781">x</a></span><span class="op" id="2917946">.</span><span class="ident" id="2917947">b</span><br>
<span class="lineno"></span><span class="op" id="2917949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2917952">func</span>&nbsp;<span class="op" id="2917957">(</span><span class="ident" id="2917958">z</span>&nbsp;<span class="op" id="2917960">*</span><span class="ident" id="2917961"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2917964">)</span>&nbsp;<span class="ident" id="2917966">norm</span><span class="op" id="2917970">(</span><span class="op" id="2917971">)</span>&nbsp;<span class="op" id="2917973">*</span><span class="ident" id="2917974"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2917978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917981">switch</span>&nbsp;<span class="op" id="2917988">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917991">case</span>&nbsp;<span class="builtinfunc" id="2917996">len</span><span class="op" id="2917999">(</span><span class="ident" id="2918000"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918001">.</span><span class="ident" id="2918002">a</span><span class="op" id="2918003">.</span><span class="ident" id="2918004">abs</span><span class="op" id="2918007">)</span>&nbsp;<span class="op" id="2918009">==</span>&nbsp;<span class="num" id="2918012">0</span><span class="op" id="2918013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2918017">//&nbsp;z&nbsp;==&nbsp;0&nbsp;-&nbsp;normalize&nbsp;sign&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918062"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918063">.</span><span class="ident" id="2918064">a</span><span class="op" id="2918065">.</span><span class="ident" id="2918066">neg</span>&nbsp;<span class="op" id="2918070">=</span>&nbsp;<span class="ident" id="2918072">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918080"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918081">.</span><span class="ident" id="2918082">b</span><span class="op" id="2918083">.</span><span class="ident" id="2918084">abs</span>&nbsp;<span class="op" id="2918088">=</span>&nbsp;<span class="ident" id="2918090"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918091">.</span><span class="ident" id="2918092">b</span><span class="op" id="2918093">.</span><span class="ident" id="2918094">abs</span><span class="op" id="2918097">.</span><span class="builtinfunc" id="2918098">make</span><span class="op" id="2918102">(</span><span class="num" id="2918103">0</span><span class="op" id="2918104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918107">case</span>&nbsp;<span class="builtinfunc" id="2918112">len</span><span class="op" id="2918115">(</span><span class="ident" id="2918116"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918117">.</span><span class="ident" id="2918118">b</span><span class="op" id="2918119">.</span><span class="ident" id="2918120">abs</span><span class="op" id="2918123">)</span>&nbsp;<span class="op" id="2918125">==</span>&nbsp;<span class="num" id="2918128">0</span><span class="op" id="2918129">:</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2918133">//&nbsp;z&nbsp;is&nbsp;normalized&nbsp;int&nbsp;-&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918173">case</span>&nbsp;<span class="ident" id="2918178"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918179">.</span><span class="ident" id="2918180">b</span><span class="op" id="2918181">.</span><span class="ident" id="2918182">abs</span><span class="op" id="2918185">.</span><span class="ident" id="2918186">cmp</span><span class="op" id="2918189">(</span><span class="ident" id="2918190"><a href="/math/big/nat.go.html#2873896">natOne</a></span><span class="op" id="2918196">)</span>&nbsp;<span class="op" id="2918198">==</span>&nbsp;<span class="num" id="2918201">0</span><span class="op" id="2918202">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2918206">//&nbsp;z&nbsp;is&nbsp;int&nbsp;-&nbsp;normalize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918244"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918245">.</span><span class="ident" id="2918246">b</span><span class="op" id="2918247">.</span><span class="ident" id="2918248">abs</span>&nbsp;<span class="op" id="2918252">=</span>&nbsp;<span class="ident" id="2918254"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918255">.</span><span class="ident" id="2918256">b</span><span class="op" id="2918257">.</span><span class="ident" id="2918258">abs</span><span class="op" id="2918261">.</span><span class="builtinfunc" id="2918262">make</span><span class="op" id="2918266">(</span><span class="num" id="2918267">0</span><span class="op" id="2918268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918271">default</span><span class="op" id="2918278">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918282">neg</span>&nbsp;<span class="op" id="2918286">:=</span>&nbsp;<span class="ident" id="2918289"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918290">.</span><span class="ident" id="2918291">a</span><span class="op" id="2918292">.</span><span class="ident" id="2918293">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918299"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918300">.</span><span class="ident" id="2918301">a</span><span class="op" id="2918302">.</span><span class="ident" id="2918303">neg</span>&nbsp;<span class="op" id="2918307">=</span>&nbsp;<span class="ident" id="2918309">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918317"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918318">.</span><span class="ident" id="2918319">b</span><span class="op" id="2918320">.</span><span class="ident" id="2918321">neg</span>&nbsp;<span class="op" id="2918325">=</span>&nbsp;<span class="ident" id="2918327">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918335">if</span>&nbsp;<span class="ident" id="2918338">f</span>&nbsp;<span class="op" id="2918340">:=</span>&nbsp;<span class="ident" id="2918343"><a href="/math/big/int.go.html#2848377">NewInt</a></span><span class="op" id="2918349">(</span><span class="num" id="2918350">0</span><span class="op" id="2918351">)</span><span class="op" id="2918352">.</span><span class="ident" id="2918353">binaryGCD</span><span class="op" id="2918362">(</span><span class="op" id="2918363">&amp;</span><span class="ident" id="2918364"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918365">.</span><span class="ident" id="2918366">a</span><span class="op" id="2918367">,</span>&nbsp;<span class="op" id="2918369">&amp;</span><span class="ident" id="2918370"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918371">.</span><span class="ident" id="2918372">b</span><span class="op" id="2918373">)</span><span class="op" id="2918374">;</span>&nbsp;<span class="ident" id="2918376"><a href="/math/big/rat.go.html#2918338">f</a></span><span class="op" id="2918377">.</span><span class="ident" id="2918378">Cmp</span><span class="op" id="2918381">(</span><span class="ident" id="2918382"><a href="/math/big/int.go.html#2847788">intOne</a></span><span class="op" id="2918388">)</span>&nbsp;<span class="op" id="2918390">!=</span>&nbsp;<span class="num" id="2918393">0</span>&nbsp;<span class="op" id="2918395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918400"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918401">.</span><span class="ident" id="2918402">a</span><span class="op" id="2918403">.</span><span class="ident" id="2918404">abs</span><span class="op" id="2918407">,</span>&nbsp;<span class="ident" id="2918409">_</span>&nbsp;<span class="op" id="2918411">=</span>&nbsp;<span class="ident" id="2918413"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918414">.</span><span class="ident" id="2918415">a</span><span class="op" id="2918416">.</span><span class="ident" id="2918417">abs</span><span class="op" id="2918420">.</span><span class="ident" id="2918421">div</span><span class="op" id="2918424">(</span><span class="ident" id="2918425">nil</span><span class="op" id="2918428">,</span>&nbsp;<span class="ident" id="2918430"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918431">.</span><span class="ident" id="2918432">a</span><span class="op" id="2918433">.</span><span class="ident" id="2918434">abs</span><span class="op" id="2918437">,</span>&nbsp;<span class="ident" id="2918439"><a href="/math/big/rat.go.html#2918338">f</a></span><span class="op" id="2918440">.</span><span class="ident" id="2918441">abs</span><span class="op" id="2918444">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918449"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918450">.</span><span class="ident" id="2918451">b</span><span class="op" id="2918452">.</span><span class="ident" id="2918453">abs</span><span class="op" id="2918456">,</span>&nbsp;<span class="ident" id="2918458">_</span>&nbsp;<span class="op" id="2918460">=</span>&nbsp;<span class="ident" id="2918462"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918463">.</span><span class="ident" id="2918464">b</span><span class="op" id="2918465">.</span><span class="ident" id="2918466">abs</span><span class="op" id="2918469">.</span><span class="ident" id="2918470">div</span><span class="op" id="2918473">(</span><span class="ident" id="2918474">nil</span><span class="op" id="2918477">,</span>&nbsp;<span class="ident" id="2918479"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918480">.</span><span class="ident" id="2918481">b</span><span class="op" id="2918482">.</span><span class="ident" id="2918483">abs</span><span class="op" id="2918486">,</span>&nbsp;<span class="ident" id="2918488"><a href="/math/big/rat.go.html#2918338">f</a></span><span class="op" id="2918489">.</span><span class="ident" id="2918490">abs</span><span class="op" id="2918493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918498">if</span>&nbsp;<span class="ident" id="2918501"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918502">.</span><span class="ident" id="2918503">b</span><span class="op" id="2918504">.</span><span class="ident" id="2918505">abs</span><span class="op" id="2918508">.</span><span class="ident" id="2918509">cmp</span><span class="op" id="2918512">(</span><span class="ident" id="2918513"><a href="/math/big/nat.go.html#2873896">natOne</a></span><span class="op" id="2918519">)</span>&nbsp;<span class="op" id="2918521">==</span>&nbsp;<span class="num" id="2918524">0</span>&nbsp;<span class="op" id="2918526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2918532">//&nbsp;z&nbsp;is&nbsp;int&nbsp;-&nbsp;normalize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918572"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918573">.</span><span class="ident" id="2918574">b</span><span class="op" id="2918575">.</span><span class="ident" id="2918576">abs</span>&nbsp;<span class="op" id="2918580">=</span>&nbsp;<span class="ident" id="2918582"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918583">.</span><span class="ident" id="2918584">b</span><span class="op" id="2918585">.</span><span class="ident" id="2918586">abs</span><span class="op" id="2918589">.</span><span class="builtinfunc" id="2918590">make</span><span class="op" id="2918594">(</span><span class="num" id="2918595">0</span><span class="op" id="2918596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918601">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918609"><a href="/math/big/rat.go.html#2917958">z</a></span><span class="op" id="2918610">.</span><span class="ident" id="2918611">a</span><span class="op" id="2918612">.</span><span class="ident" id="2918613">neg</span>&nbsp;<span class="op" id="2918617">=</span>&nbsp;<span class="ident" id="2918619"><a href="/math/big/rat.go.html#2918282">neg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918627">return</span>&nbsp;<span class="ident" id="2918634"><a href="/math/big/rat.go.html#2917958">z</a></span><br>
<span class="lineno"></span><span class="op" id="2918636">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2918639">//&nbsp;mulDenom&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;denominator&nbsp;product&nbsp;x*y&nbsp;(by&nbsp;taking&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2918705">//&nbsp;account&nbsp;that&nbsp;0&nbsp;values&nbsp;for&nbsp;x&nbsp;or&nbsp;y&nbsp;must&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;1)&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2918771">//&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2918785">func</span>&nbsp;<span class="ident" id="2918790">mulDenom</span><span class="op" id="2918798">(</span><span class="ident" id="2918799">z</span><span class="op" id="2918800">,</span>&nbsp;<span class="ident" id="2918802">x</span><span class="op" id="2918803">,</span>&nbsp;<span class="ident" id="2918805">y</span>&nbsp;<span class="ident" id="2918807"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2918810">)</span>&nbsp;<span class="ident" id="2918812"><a href="/math/big/nat.go.html#2873877">nat</a></span>&nbsp;<span class="op" id="2918816">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918819">switch</span>&nbsp;<span class="op" id="2918826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918829">case</span>&nbsp;<span class="builtinfunc" id="2918834">len</span><span class="op" id="2918837">(</span><span class="ident" id="2918838"><a href="/math/big/rat.go.html#2918802">x</a></span><span class="op" id="2918839">)</span>&nbsp;<span class="op" id="2918841">==</span>&nbsp;<span class="num" id="2918844">0</span><span class="op" id="2918845">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918849">return</span>&nbsp;<span class="ident" id="2918856"><a href="/math/big/rat.go.html#2918799">z</a></span><span class="op" id="2918857">.</span><span class="ident" id="2918858">set</span><span class="op" id="2918861">(</span><span class="ident" id="2918862"><a href="/math/big/rat.go.html#2918805">y</a></span><span class="op" id="2918863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918866">case</span>&nbsp;<span class="builtinfunc" id="2918871">len</span><span class="op" id="2918874">(</span><span class="ident" id="2918875"><a href="/math/big/rat.go.html#2918805">y</a></span><span class="op" id="2918876">)</span>&nbsp;<span class="op" id="2918878">==</span>&nbsp;<span class="num" id="2918881">0</span><span class="op" id="2918882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918886">return</span>&nbsp;<span class="ident" id="2918893"><a href="/math/big/rat.go.html#2918799">z</a></span><span class="op" id="2918894">.</span><span class="ident" id="2918895">set</span><span class="op" id="2918898">(</span><span class="ident" id="2918899"><a href="/math/big/rat.go.html#2918802">x</a></span><span class="op" id="2918900">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918906">return</span>&nbsp;<span class="ident" id="2918913"><a href="/math/big/rat.go.html#2918799">z</a></span><span class="op" id="2918914">.</span><span class="ident" id="2918915">mul</span><span class="op" id="2918918">(</span><span class="ident" id="2918919"><a href="/math/big/rat.go.html#2918802">x</a></span><span class="op" id="2918920">,</span>&nbsp;<span class="ident" id="2918922"><a href="/math/big/rat.go.html#2918805">y</a></span><span class="op" id="2918923">)</span><br>
<span class="lineno"></span><span class="op" id="2918925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2918928">//&nbsp;scaleDenom&nbsp;computes&nbsp;x*f.</span><br>
<span class="lineno">455</span><span class="comment" id="2918956">//&nbsp;If&nbsp;f&nbsp;==&nbsp;0&nbsp;(zero&nbsp;value&nbsp;of&nbsp;denominator),&nbsp;the&nbsp;result&nbsp;is&nbsp;(a&nbsp;copy&nbsp;of)&nbsp;x.</span><br>
<span class="lineno"></span><span class="keyword" id="2919027">func</span>&nbsp;<span class="ident" id="2919032">scaleDenom</span><span class="op" id="2919042">(</span><span class="ident" id="2919043">x</span>&nbsp;<span class="op" id="2919045">*</span><span class="ident" id="2919046"><a href="/math/big/int.go.html#2847707">Int</a></span><span class="op" id="2919049">,</span>&nbsp;<span class="ident" id="2919051">f</span>&nbsp;<span class="ident" id="2919053"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2919056">)</span>&nbsp;<span class="op" id="2919058">*</span><span class="ident" id="2919059"><a href="/math/big/int.go.html#2847707">Int</a></span>&nbsp;<span class="op" id="2919063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919066">var</span>&nbsp;<span class="ident" id="2919070">z</span>&nbsp;<span class="ident" id="2919072"><a href="/math/big/int.go.html#2847707">Int</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919077">if</span>&nbsp;<span class="builtinfunc" id="2919080">len</span><span class="op" id="2919083">(</span><span class="ident" id="2919084"><a href="/math/big/rat.go.html#2919051">f</a></span><span class="op" id="2919085">)</span>&nbsp;<span class="op" id="2919087">==</span>&nbsp;<span class="num" id="2919090">0</span>&nbsp;<span class="op" id="2919092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919096">return</span>&nbsp;<span class="ident" id="2919103"><a href="/math/big/rat.go.html#2919070">z</a></span><span class="op" id="2919104">.</span><span class="ident" id="2919105">Set</span><span class="op" id="2919108">(</span><span class="ident" id="2919109"><a href="/math/big/rat.go.html#2919043">x</a></span><span class="op" id="2919110">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919116"><a href="/math/big/rat.go.html#2919070">z</a></span><span class="op" id="2919117">.</span><span class="ident" id="2919118">abs</span>&nbsp;<span class="op" id="2919122">=</span>&nbsp;<span class="ident" id="2919124"><a href="/math/big/rat.go.html#2919070">z</a></span><span class="op" id="2919125">.</span><span class="ident" id="2919126">abs</span><span class="op" id="2919129">.</span><span class="ident" id="2919130">mul</span><span class="op" id="2919133">(</span><span class="ident" id="2919134"><a href="/math/big/rat.go.html#2919043">x</a></span><span class="op" id="2919135">.</span><span class="ident" id="2919136">abs</span><span class="op" id="2919139">,</span>&nbsp;<span class="ident" id="2919141"><a href="/math/big/rat.go.html#2919051">f</a></span><span class="op" id="2919142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919145"><a href="/math/big/rat.go.html#2919070">z</a></span><span class="op" id="2919146">.</span><span class="ident" id="2919147">neg</span>&nbsp;<span class="op" id="2919151">=</span>&nbsp;<span class="ident" id="2919153"><a href="/math/big/rat.go.html#2919043">x</a></span><span class="op" id="2919154">.</span><span class="ident" id="2919155">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919160">return</span>&nbsp;<span class="op" id="2919167">&amp;</span><span class="ident" id="2919168"><a href="/math/big/rat.go.html#2919070">z</a></span><br>
<span class="lineno"></span><span class="op" id="2919170">}</span><br>
<span class="lineno">465</span><br>
<span class="lineno"></span><span class="comment" id="2919173">//&nbsp;Cmp&nbsp;compares&nbsp;x&nbsp;and&nbsp;y&nbsp;and&nbsp;returns:</span><br>
<span class="lineno"></span><span class="comment" id="2919210">//</span><br>
<span class="lineno"></span><span class="comment" id="2919213">//&nbsp;&nbsp;&nbsp;-1&nbsp;if&nbsp;x&nbsp;&lt;&nbsp;&nbsp;y</span><br>
<span class="lineno"></span><span class="comment" id="2919231">//&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;if&nbsp;x&nbsp;==&nbsp;y</span><br>
<span class="lineno">470</span><span class="comment" id="2919249">//&nbsp;&nbsp;&nbsp;+1&nbsp;if&nbsp;x&nbsp;&gt;&nbsp;&nbsp;y</span><br>
<span class="lineno"></span><span class="comment" id="2919267">//</span><br>
<span class="lineno"></span><span class="keyword" id="2919270">func</span>&nbsp;<span class="op" id="2919275">(</span><span class="ident" id="2919276">x</span>&nbsp;<span class="op" id="2919278">*</span><span class="ident" id="2919279"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2919282">)</span>&nbsp;<span class="ident" id="2919284">Cmp</span><span class="op" id="2919287">(</span><span class="ident" id="2919288">y</span>&nbsp;<span class="op" id="2919290">*</span><span class="ident" id="2919291"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2919294">)</span>&nbsp;<span class="builtintype" id="2919296">int</span>&nbsp;<span class="op" id="2919300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919303">return</span>&nbsp;<span class="ident" id="2919310"><a href="/math/big/rat.go.html#2919032">scaleDenom</a></span><span class="op" id="2919320">(</span><span class="op" id="2919321">&amp;</span><span class="ident" id="2919322"><a href="/math/big/rat.go.html#2919276">x</a></span><span class="op" id="2919323">.</span><span class="ident" id="2919324">a</span><span class="op" id="2919325">,</span>&nbsp;<span class="ident" id="2919327"><a href="/math/big/rat.go.html#2919288">y</a></span><span class="op" id="2919328">.</span><span class="ident" id="2919329">b</span><span class="op" id="2919330">.</span><span class="ident" id="2919331">abs</span><span class="op" id="2919334">)</span><span class="op" id="2919335">.</span><span class="ident" id="2919336">Cmp</span><span class="op" id="2919339">(</span><span class="ident" id="2919340"><a href="/math/big/rat.go.html#2919032">scaleDenom</a></span><span class="op" id="2919350">(</span><span class="op" id="2919351">&amp;</span><span class="ident" id="2919352"><a href="/math/big/rat.go.html#2919288">y</a></span><span class="op" id="2919353">.</span><span class="ident" id="2919354">a</span><span class="op" id="2919355">,</span>&nbsp;<span class="ident" id="2919357"><a href="/math/big/rat.go.html#2919276">x</a></span><span class="op" id="2919358">.</span><span class="ident" id="2919359">b</span><span class="op" id="2919360">.</span><span class="ident" id="2919361">abs</span><span class="op" id="2919364">)</span><span class="op" id="2919365">)</span><br>
<span class="lineno"></span><span class="op" id="2919367">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span><span class="comment" id="2919370">//&nbsp;Add&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;sum&nbsp;x+y&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2919414">func</span>&nbsp;<span class="op" id="2919419">(</span><span class="ident" id="2919420">z</span>&nbsp;<span class="op" id="2919422">*</span><span class="ident" id="2919423"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2919426">)</span>&nbsp;<span class="ident" id="2919428">Add</span><span class="op" id="2919431">(</span><span class="ident" id="2919432">x</span><span class="op" id="2919433">,</span>&nbsp;<span class="ident" id="2919435">y</span>&nbsp;<span class="op" id="2919437">*</span><span class="ident" id="2919438"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2919441">)</span>&nbsp;<span class="op" id="2919443">*</span><span class="ident" id="2919444"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2919448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919451">a1</span>&nbsp;<span class="op" id="2919454">:=</span>&nbsp;<span class="ident" id="2919457"><a href="/math/big/rat.go.html#2919032">scaleDenom</a></span><span class="op" id="2919467">(</span><span class="op" id="2919468">&amp;</span><span class="ident" id="2919469"><a href="/math/big/rat.go.html#2919432">x</a></span><span class="op" id="2919470">.</span><span class="ident" id="2919471">a</span><span class="op" id="2919472">,</span>&nbsp;<span class="ident" id="2919474"><a href="/math/big/rat.go.html#2919435">y</a></span><span class="op" id="2919475">.</span><span class="ident" id="2919476">b</span><span class="op" id="2919477">.</span><span class="ident" id="2919478">abs</span><span class="op" id="2919481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919484">a2</span>&nbsp;<span class="op" id="2919487">:=</span>&nbsp;<span class="ident" id="2919490"><a href="/math/big/rat.go.html#2919032">scaleDenom</a></span><span class="op" id="2919500">(</span><span class="op" id="2919501">&amp;</span><span class="ident" id="2919502"><a href="/math/big/rat.go.html#2919435">y</a></span><span class="op" id="2919503">.</span><span class="ident" id="2919504">a</span><span class="op" id="2919505">,</span>&nbsp;<span class="ident" id="2919507"><a href="/math/big/rat.go.html#2919432">x</a></span><span class="op" id="2919508">.</span><span class="ident" id="2919509">b</span><span class="op" id="2919510">.</span><span class="ident" id="2919511">abs</span><span class="op" id="2919514">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919517"><a href="/math/big/rat.go.html#2919420">z</a></span><span class="op" id="2919518">.</span><span class="ident" id="2919519">a</span><span class="op" id="2919520">.</span><span class="ident" id="2919521">Add</span><span class="op" id="2919524">(</span><span class="ident" id="2919525"><a href="/math/big/rat.go.html#2919451">a1</a></span><span class="op" id="2919527">,</span>&nbsp;<span class="ident" id="2919529"><a href="/math/big/rat.go.html#2919484">a2</a></span><span class="op" id="2919531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919534"><a href="/math/big/rat.go.html#2919420">z</a></span><span class="op" id="2919535">.</span><span class="ident" id="2919536">b</span><span class="op" id="2919537">.</span><span class="ident" id="2919538">abs</span>&nbsp;<span class="op" id="2919542">=</span>&nbsp;<span class="ident" id="2919544"><a href="/math/big/rat.go.html#2918790">mulDenom</a></span><span class="op" id="2919552">(</span><span class="ident" id="2919553"><a href="/math/big/rat.go.html#2919420">z</a></span><span class="op" id="2919554">.</span><span class="ident" id="2919555">b</span><span class="op" id="2919556">.</span><span class="ident" id="2919557">abs</span><span class="op" id="2919560">,</span>&nbsp;<span class="ident" id="2919562"><a href="/math/big/rat.go.html#2919432">x</a></span><span class="op" id="2919563">.</span><span class="ident" id="2919564">b</span><span class="op" id="2919565">.</span><span class="ident" id="2919566">abs</span><span class="op" id="2919569">,</span>&nbsp;<span class="ident" id="2919571"><a href="/math/big/rat.go.html#2919435">y</a></span><span class="op" id="2919572">.</span><span class="ident" id="2919573">b</span><span class="op" id="2919574">.</span><span class="ident" id="2919575">abs</span><span class="op" id="2919578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919581">return</span>&nbsp;<span class="ident" id="2919588"><a href="/math/big/rat.go.html#2919420">z</a></span><span class="op" id="2919589">.</span><span class="ident" id="2919590">norm</span><span class="op" id="2919594">(</span><span class="op" id="2919595">)</span><br>
<span class="lineno"></span><span class="op" id="2919597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="comment" id="2919600">//&nbsp;Sub&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;difference&nbsp;x-y&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2919651">func</span>&nbsp;<span class="op" id="2919656">(</span><span class="ident" id="2919657">z</span>&nbsp;<span class="op" id="2919659">*</span><span class="ident" id="2919660"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2919663">)</span>&nbsp;<span class="ident" id="2919665">Sub</span><span class="op" id="2919668">(</span><span class="ident" id="2919669">x</span><span class="op" id="2919670">,</span>&nbsp;<span class="ident" id="2919672">y</span>&nbsp;<span class="op" id="2919674">*</span><span class="ident" id="2919675"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2919678">)</span>&nbsp;<span class="op" id="2919680">*</span><span class="ident" id="2919681"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2919685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919688">a1</span>&nbsp;<span class="op" id="2919691">:=</span>&nbsp;<span class="ident" id="2919694"><a href="/math/big/rat.go.html#2919032">scaleDenom</a></span><span class="op" id="2919704">(</span><span class="op" id="2919705">&amp;</span><span class="ident" id="2919706"><a href="/math/big/rat.go.html#2919669">x</a></span><span class="op" id="2919707">.</span><span class="ident" id="2919708">a</span><span class="op" id="2919709">,</span>&nbsp;<span class="ident" id="2919711"><a href="/math/big/rat.go.html#2919672">y</a></span><span class="op" id="2919712">.</span><span class="ident" id="2919713">b</span><span class="op" id="2919714">.</span><span class="ident" id="2919715">abs</span><span class="op" id="2919718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919721">a2</span>&nbsp;<span class="op" id="2919724">:=</span>&nbsp;<span class="ident" id="2919727"><a href="/math/big/rat.go.html#2919032">scaleDenom</a></span><span class="op" id="2919737">(</span><span class="op" id="2919738">&amp;</span><span class="ident" id="2919739"><a href="/math/big/rat.go.html#2919672">y</a></span><span class="op" id="2919740">.</span><span class="ident" id="2919741">a</span><span class="op" id="2919742">,</span>&nbsp;<span class="ident" id="2919744"><a href="/math/big/rat.go.html#2919669">x</a></span><span class="op" id="2919745">.</span><span class="ident" id="2919746">b</span><span class="op" id="2919747">.</span><span class="ident" id="2919748">abs</span><span class="op" id="2919751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919754"><a href="/math/big/rat.go.html#2919657">z</a></span><span class="op" id="2919755">.</span><span class="ident" id="2919756">a</span><span class="op" id="2919757">.</span><span class="ident" id="2919758">Sub</span><span class="op" id="2919761">(</span><span class="ident" id="2919762"><a href="/math/big/rat.go.html#2919688">a1</a></span><span class="op" id="2919764">,</span>&nbsp;<span class="ident" id="2919766"><a href="/math/big/rat.go.html#2919721">a2</a></span><span class="op" id="2919768">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919771"><a href="/math/big/rat.go.html#2919657">z</a></span><span class="op" id="2919772">.</span><span class="ident" id="2919773">b</span><span class="op" id="2919774">.</span><span class="ident" id="2919775">abs</span>&nbsp;<span class="op" id="2919779">=</span>&nbsp;<span class="ident" id="2919781"><a href="/math/big/rat.go.html#2918790">mulDenom</a></span><span class="op" id="2919789">(</span><span class="ident" id="2919790"><a href="/math/big/rat.go.html#2919657">z</a></span><span class="op" id="2919791">.</span><span class="ident" id="2919792">b</span><span class="op" id="2919793">.</span><span class="ident" id="2919794">abs</span><span class="op" id="2919797">,</span>&nbsp;<span class="ident" id="2919799"><a href="/math/big/rat.go.html#2919669">x</a></span><span class="op" id="2919800">.</span><span class="ident" id="2919801">b</span><span class="op" id="2919802">.</span><span class="ident" id="2919803">abs</span><span class="op" id="2919806">,</span>&nbsp;<span class="ident" id="2919808"><a href="/math/big/rat.go.html#2919672">y</a></span><span class="op" id="2919809">.</span><span class="ident" id="2919810">b</span><span class="op" id="2919811">.</span><span class="ident" id="2919812">abs</span><span class="op" id="2919815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919818">return</span>&nbsp;<span class="ident" id="2919825"><a href="/math/big/rat.go.html#2919657">z</a></span><span class="op" id="2919826">.</span><span class="ident" id="2919827">norm</span><span class="op" id="2919831">(</span><span class="op" id="2919832">)</span><br>
<span class="lineno"></span><span class="op" id="2919834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2919837">//&nbsp;Mul&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;product&nbsp;x*y&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno">495</span><span class="keyword" id="2919885">func</span>&nbsp;<span class="op" id="2919890">(</span><span class="ident" id="2919891">z</span>&nbsp;<span class="op" id="2919893">*</span><span class="ident" id="2919894"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2919897">)</span>&nbsp;<span class="ident" id="2919899">Mul</span><span class="op" id="2919902">(</span><span class="ident" id="2919903">x</span><span class="op" id="2919904">,</span>&nbsp;<span class="ident" id="2919906">y</span>&nbsp;<span class="op" id="2919908">*</span><span class="ident" id="2919909"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2919912">)</span>&nbsp;<span class="op" id="2919914">*</span><span class="ident" id="2919915"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2919919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919922"><a href="/math/big/rat.go.html#2919891">z</a></span><span class="op" id="2919923">.</span><span class="ident" id="2919924">a</span><span class="op" id="2919925">.</span><span class="ident" id="2919926">Mul</span><span class="op" id="2919929">(</span><span class="op" id="2919930">&amp;</span><span class="ident" id="2919931"><a href="/math/big/rat.go.html#2919903">x</a></span><span class="op" id="2919932">.</span><span class="ident" id="2919933">a</span><span class="op" id="2919934">,</span>&nbsp;<span class="op" id="2919936">&amp;</span><span class="ident" id="2919937"><a href="/math/big/rat.go.html#2919906">y</a></span><span class="op" id="2919938">.</span><span class="ident" id="2919939">a</span><span class="op" id="2919940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919943"><a href="/math/big/rat.go.html#2919891">z</a></span><span class="op" id="2919944">.</span><span class="ident" id="2919945">b</span><span class="op" id="2919946">.</span><span class="ident" id="2919947">abs</span>&nbsp;<span class="op" id="2919951">=</span>&nbsp;<span class="ident" id="2919953"><a href="/math/big/rat.go.html#2918790">mulDenom</a></span><span class="op" id="2919961">(</span><span class="ident" id="2919962"><a href="/math/big/rat.go.html#2919891">z</a></span><span class="op" id="2919963">.</span><span class="ident" id="2919964">b</span><span class="op" id="2919965">.</span><span class="ident" id="2919966">abs</span><span class="op" id="2919969">,</span>&nbsp;<span class="ident" id="2919971"><a href="/math/big/rat.go.html#2919903">x</a></span><span class="op" id="2919972">.</span><span class="ident" id="2919973">b</span><span class="op" id="2919974">.</span><span class="ident" id="2919975">abs</span><span class="op" id="2919978">,</span>&nbsp;<span class="ident" id="2919980"><a href="/math/big/rat.go.html#2919906">y</a></span><span class="op" id="2919981">.</span><span class="ident" id="2919982">b</span><span class="op" id="2919983">.</span><span class="ident" id="2919984">abs</span><span class="op" id="2919987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919990">return</span>&nbsp;<span class="ident" id="2919997"><a href="/math/big/rat.go.html#2919891">z</a></span><span class="op" id="2919998">.</span><span class="ident" id="2919999">norm</span><span class="op" id="2920003">(</span><span class="op" id="2920004">)</span><br>
<span class="lineno"></span><span class="op" id="2920006">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span><span class="comment" id="2920009">//&nbsp;Quo&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;quotient&nbsp;x/y&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="comment" id="2920058">//&nbsp;If&nbsp;y&nbsp;==&nbsp;0,&nbsp;a&nbsp;division-by-zero&nbsp;run-time&nbsp;panic&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2920114">func</span>&nbsp;<span class="op" id="2920119">(</span><span class="ident" id="2920120">z</span>&nbsp;<span class="op" id="2920122">*</span><span class="ident" id="2920123"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2920126">)</span>&nbsp;<span class="ident" id="2920128">Quo</span><span class="op" id="2920131">(</span><span class="ident" id="2920132">x</span><span class="op" id="2920133">,</span>&nbsp;<span class="ident" id="2920135">y</span>&nbsp;<span class="op" id="2920137">*</span><span class="ident" id="2920138"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2920141">)</span>&nbsp;<span class="op" id="2920143">*</span><span class="ident" id="2920144"><a href="/math/big/rat.go.html#2907970">Rat</a></span>&nbsp;<span class="op" id="2920148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920151">if</span>&nbsp;<span class="builtinfunc" id="2920154">len</span><span class="op" id="2920157">(</span><span class="ident" id="2920158"><a href="/math/big/rat.go.html#2920135">y</a></span><span class="op" id="2920159">.</span><span class="ident" id="2920160">a</span><span class="op" id="2920161">.</span><span class="ident" id="2920162">abs</span><span class="op" id="2920165">)</span>&nbsp;<span class="op" id="2920167">==</span>&nbsp;<span class="num" id="2920170">0</span>&nbsp;<span class="op" id="2920172">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2920176">panic</span><span class="op" id="2920181">(</span><span class="string" id="2920182">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2920200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920206">a</span>&nbsp;<span class="op" id="2920208">:=</span>&nbsp;<span class="ident" id="2920211"><a href="/math/big/rat.go.html#2919032">scaleDenom</a></span><span class="op" id="2920221">(</span><span class="op" id="2920222">&amp;</span><span class="ident" id="2920223"><a href="/math/big/rat.go.html#2920132">x</a></span><span class="op" id="2920224">.</span><span class="ident" id="2920225">a</span><span class="op" id="2920226">,</span>&nbsp;<span class="ident" id="2920228"><a href="/math/big/rat.go.html#2920135">y</a></span><span class="op" id="2920229">.</span><span class="ident" id="2920230">b</span><span class="op" id="2920231">.</span><span class="ident" id="2920232">abs</span><span class="op" id="2920235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920238">b</span>&nbsp;<span class="op" id="2920240">:=</span>&nbsp;<span class="ident" id="2920243"><a href="/math/big/rat.go.html#2919032">scaleDenom</a></span><span class="op" id="2920253">(</span><span class="op" id="2920254">&amp;</span><span class="ident" id="2920255"><a href="/math/big/rat.go.html#2920135">y</a></span><span class="op" id="2920256">.</span><span class="ident" id="2920257">a</span><span class="op" id="2920258">,</span>&nbsp;<span class="ident" id="2920260"><a href="/math/big/rat.go.html#2920132">x</a></span><span class="op" id="2920261">.</span><span class="ident" id="2920262">b</span><span class="op" id="2920263">.</span><span class="ident" id="2920264">abs</span><span class="op" id="2920267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920270"><a href="/math/big/rat.go.html#2920120">z</a></span><span class="op" id="2920271">.</span><span class="ident" id="2920272">a</span><span class="op" id="2920273">.</span><span class="ident" id="2920274">abs</span>&nbsp;<span class="op" id="2920278">=</span>&nbsp;<span class="ident" id="2920280"><a href="/math/big/rat.go.html#2920206">a</a></span><span class="op" id="2920281">.</span><span class="ident" id="2920282">abs</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920287"><a href="/math/big/rat.go.html#2920120">z</a></span><span class="op" id="2920288">.</span><span class="ident" id="2920289">b</span><span class="op" id="2920290">.</span><span class="ident" id="2920291">abs</span>&nbsp;<span class="op" id="2920295">=</span>&nbsp;<span class="ident" id="2920297"><a href="/math/big/rat.go.html#2920238">b</a></span><span class="op" id="2920298">.</span><span class="ident" id="2920299">abs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920304"><a href="/math/big/rat.go.html#2920120">z</a></span><span class="op" id="2920305">.</span><span class="ident" id="2920306">a</span><span class="op" id="2920307">.</span><span class="ident" id="2920308">neg</span>&nbsp;<span class="op" id="2920312">=</span>&nbsp;<span class="ident" id="2920314"><a href="/math/big/rat.go.html#2920206">a</a></span><span class="op" id="2920315">.</span><span class="ident" id="2920316">neg</span>&nbsp;<span class="op" id="2920320">!=</span>&nbsp;<span class="ident" id="2920323"><a href="/math/big/rat.go.html#2920238">b</a></span><span class="op" id="2920324">.</span><span class="ident" id="2920325">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920330">return</span>&nbsp;<span class="ident" id="2920337"><a href="/math/big/rat.go.html#2920120">z</a></span><span class="op" id="2920338">.</span><span class="ident" id="2920339">norm</span><span class="op" id="2920343">(</span><span class="op" id="2920344">)</span><br>
<span class="lineno"></span><span class="op" id="2920346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="keyword" id="2920349">func</span>&nbsp;<span class="ident" id="2920354">ratTok</span><span class="op" id="2920360">(</span><span class="ident" id="2920361">ch</span>&nbsp;<span class="builtintype" id="2920364">rune</span><span class="op" id="2920368">)</span>&nbsp;<span class="builtintype" id="2920370">bool</span>&nbsp;<span class="op" id="2920375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920378">return</span>&nbsp;<span class="ident" id="2920385"><a href="/math/big/rat.go.html#2907841">strings</a></span><span class="op" id="2920392">.</span><span class="ident" id="2920393">IndexRune</span><span class="op" id="2920402">(</span><span class="string" id="2920403">&#34;+-/0123456789.eE&#34;</span><span class="op" id="2920421">,</span>&nbsp;<span class="ident" id="2920423"><a href="/math/big/rat.go.html#2920361">ch</a></span><span class="op" id="2920425">)</span>&nbsp;<span class="op" id="2920427">&gt;=</span>&nbsp;<span class="num" id="2920430">0</span><br>
<span class="lineno"></span><span class="op" id="2920432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2920435">//&nbsp;Scan&nbsp;is&nbsp;a&nbsp;support&nbsp;routine&nbsp;for&nbsp;fmt.Scanner.&nbsp;It&nbsp;accepts&nbsp;the&nbsp;formats</span><br>
<span class="lineno">520</span><span class="comment" id="2920504">//&nbsp;&#39;e&#39;,&nbsp;&#39;E&#39;,&nbsp;&#39;f&#39;,&nbsp;&#39;F&#39;,&nbsp;&#39;g&#39;,&nbsp;&#39;G&#39;,&nbsp;and&nbsp;&#39;v&#39;.&nbsp;All&nbsp;formats&nbsp;are&nbsp;equivalent.</span><br>
<span class="lineno"></span><span class="keyword" id="2920574">func</span>&nbsp;<span class="op" id="2920579">(</span><span class="ident" id="2920580">z</span>&nbsp;<span class="op" id="2920582">*</span><span class="ident" id="2920583"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2920586">)</span>&nbsp;<span class="ident" id="2920588">Scan</span><span class="op" id="2920592">(</span><span class="ident" id="2920593">s</span>&nbsp;<span class="ident" id="2920595"><a href="/math/big/rat.go.html#2907826">fmt</a></span><span class="op" id="2920598">.</span><span class="ident" id="2920599">ScanState</span><span class="op" id="2920608">,</span>&nbsp;<span class="ident" id="2920610">ch</span>&nbsp;<span class="builtintype" id="2920613">rune</span><span class="op" id="2920617">)</span>&nbsp;<span class="builtintype" id="2920619">error</span>&nbsp;<span class="op" id="2920625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920628">tok</span><span class="op" id="2920631">,</span>&nbsp;<span class="ident" id="2920633">err</span>&nbsp;<span class="op" id="2920637">:=</span>&nbsp;<span class="ident" id="2920640"><a href="/math/big/rat.go.html#2920593">s</a></span><span class="op" id="2920641">.</span><span class="ident" id="2920642">Token</span><span class="op" id="2920647">(</span><span class="ident" id="2920648">true</span><span class="op" id="2920652">,</span>&nbsp;<span class="ident" id="2920654"><a href="/math/big/rat.go.html#2920354">ratTok</a></span><span class="op" id="2920660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920663">if</span>&nbsp;<span class="ident" id="2920666"><a href="/math/big/rat.go.html#2920633">err</a></span>&nbsp;<span class="op" id="2920670">!=</span>&nbsp;<span class="ident" id="2920673">nil</span>&nbsp;<span class="op" id="2920677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920681">return</span>&nbsp;<span class="ident" id="2920688"><a href="/math/big/rat.go.html#2920633">err</a></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920696">if</span>&nbsp;<span class="ident" id="2920699"><a href="/math/big/rat.go.html#2907841">strings</a></span><span class="op" id="2920706">.</span><span class="ident" id="2920707">IndexRune</span><span class="op" id="2920716">(</span><span class="string" id="2920717">&#34;efgEFGv&#34;</span><span class="op" id="2920726">,</span>&nbsp;<span class="ident" id="2920728"><a href="/math/big/rat.go.html#2920610">ch</a></span><span class="op" id="2920730">)</span>&nbsp;<span class="op" id="2920732">&lt;</span>&nbsp;<span class="num" id="2920734">0</span>&nbsp;<span class="op" id="2920736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920740">return</span>&nbsp;<span class="ident" id="2920747"><a href="/math/big/rat.go.html#2907816">errors</a></span><span class="op" id="2920753">.</span><span class="ident" id="2920754">New</span><span class="op" id="2920757">(</span><span class="string" id="2920758">&#34;Rat.Scan:&nbsp;invalid&nbsp;verb&#34;</span><span class="op" id="2920782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920788">if</span>&nbsp;<span class="ident" id="2920791">_</span><span class="op" id="2920792">,</span>&nbsp;<span class="ident" id="2920794">ok</span>&nbsp;<span class="op" id="2920797">:=</span>&nbsp;<span class="ident" id="2920800"><a href="/math/big/rat.go.html#2920580">z</a></span><span class="op" id="2920801">.</span><span class="ident" id="2920802">SetString</span><span class="op" id="2920811">(</span><span class="builtintype" id="2920812">string</span><span class="op" id="2920818">(</span><span class="ident" id="2920819"><a href="/math/big/rat.go.html#2920628">tok</a></span><span class="op" id="2920822">)</span><span class="op" id="2920823">)</span><span class="op" id="2920824">;</span>&nbsp;<span class="op" id="2920826">!</span><span class="ident" id="2920827"><a href="/math/big/rat.go.html#2920794">ok</a></span>&nbsp;<span class="op" id="2920830">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920834">return</span>&nbsp;<span class="ident" id="2920841"><a href="/math/big/rat.go.html#2907816">errors</a></span><span class="op" id="2920847">.</span><span class="ident" id="2920848">New</span><span class="op" id="2920851">(</span><span class="string" id="2920852">&#34;Rat.Scan:&nbsp;invalid&nbsp;syntax&#34;</span><span class="op" id="2920878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920884">return</span>&nbsp;<span class="ident" id="2920891">nil</span><br>
<span class="lineno"></span><span class="op" id="2920895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="2920898">//&nbsp;SetString&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;value&nbsp;of&nbsp;s&nbsp;and&nbsp;returns&nbsp;z&nbsp;and&nbsp;a&nbsp;boolean&nbsp;indicating</span><br>
<span class="lineno"></span><span class="comment" id="2920975">//&nbsp;success.&nbsp;s&nbsp;can&nbsp;be&nbsp;given&nbsp;as&nbsp;a&nbsp;fraction&nbsp;&#34;a/b&#34;&nbsp;or&nbsp;as&nbsp;a&nbsp;floating-point&nbsp;number</span><br>
<span class="lineno"></span><span class="comment" id="2921052">//&nbsp;optionally&nbsp;followed&nbsp;by&nbsp;an&nbsp;exponent.&nbsp;If&nbsp;the&nbsp;operation&nbsp;failed,&nbsp;the&nbsp;value&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2921129">//&nbsp;z&nbsp;is&nbsp;undefined&nbsp;but&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2921178">func</span>&nbsp;<span class="op" id="2921183">(</span><span class="ident" id="2921184">z</span>&nbsp;<span class="op" id="2921186">*</span><span class="ident" id="2921187"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2921190">)</span>&nbsp;<span class="ident" id="2921192">SetString</span><span class="op" id="2921201">(</span><span class="ident" id="2921202">s</span>&nbsp;<span class="builtintype" id="2921204">string</span><span class="op" id="2921210">)</span>&nbsp;<span class="op" id="2921212">(</span><span class="op" id="2921213">*</span><span class="ident" id="2921214"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2921217">,</span>&nbsp;<span class="builtintype" id="2921219">bool</span><span class="op" id="2921223">)</span>&nbsp;<span class="op" id="2921225">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921228">if</span>&nbsp;<span class="builtinfunc" id="2921231">len</span><span class="op" id="2921234">(</span><span class="ident" id="2921235"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921236">)</span>&nbsp;<span class="op" id="2921238">==</span>&nbsp;<span class="num" id="2921241">0</span>&nbsp;<span class="op" id="2921243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921247">return</span>&nbsp;<span class="ident" id="2921254">nil</span><span class="op" id="2921257">,</span>&nbsp;<span class="ident" id="2921259">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2921270">//&nbsp;check&nbsp;for&nbsp;a&nbsp;quotient</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921295">sep</span>&nbsp;<span class="op" id="2921299">:=</span>&nbsp;<span class="ident" id="2921302"><a href="/math/big/rat.go.html#2907841">strings</a></span><span class="op" id="2921309">.</span><span class="ident" id="2921310">Index</span><span class="op" id="2921315">(</span><span class="ident" id="2921316"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921317">,</span>&nbsp;<span class="string" id="2921319">&#34;/&#34;</span><span class="op" id="2921322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921325">if</span>&nbsp;<span class="ident" id="2921328"><a href="/math/big/rat.go.html#2921295">sep</a></span>&nbsp;<span class="op" id="2921332">&gt;=</span>&nbsp;<span class="num" id="2921335">0</span>&nbsp;<span class="op" id="2921337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921341">if</span>&nbsp;<span class="ident" id="2921344">_</span><span class="op" id="2921345">,</span>&nbsp;<span class="ident" id="2921347">ok</span>&nbsp;<span class="op" id="2921350">:=</span>&nbsp;<span class="ident" id="2921353"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2921354">.</span><span class="ident" id="2921355">a</span><span class="op" id="2921356">.</span><span class="ident" id="2921357">SetString</span><span class="op" id="2921366">(</span><span class="ident" id="2921367"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921368">[</span><span class="num" id="2921369">0</span><span class="op" id="2921370">:</span><span class="ident" id="2921371"><a href="/math/big/rat.go.html#2921295">sep</a></span><span class="op" id="2921374">]</span><span class="op" id="2921375">,</span>&nbsp;<span class="num" id="2921377">10</span><span class="op" id="2921379">)</span><span class="op" id="2921380">;</span>&nbsp;<span class="op" id="2921382">!</span><span class="ident" id="2921383"><a href="/math/big/rat.go.html#2921347">ok</a></span>&nbsp;<span class="op" id="2921386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921391">return</span>&nbsp;<span class="ident" id="2921398">nil</span><span class="op" id="2921401">,</span>&nbsp;<span class="ident" id="2921403">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921411">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921415"><a href="/math/big/rat.go.html#2921202">s</a></span>&nbsp;<span class="op" id="2921417">=</span>&nbsp;<span class="ident" id="2921419"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921420">[</span><span class="ident" id="2921421"><a href="/math/big/rat.go.html#2921295">sep</a></span><span class="op" id="2921424">+</span><span class="num" id="2921425">1</span><span class="op" id="2921426">:</span><span class="op" id="2921427">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921431">var</span>&nbsp;<span class="ident" id="2921435">err</span>&nbsp;<span class="builtintype" id="2921439">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921447">if</span>&nbsp;<span class="ident" id="2921450"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2921451">.</span><span class="ident" id="2921452">b</span><span class="op" id="2921453">.</span><span class="ident" id="2921454">abs</span><span class="op" id="2921457">,</span>&nbsp;<span class="ident" id="2921459">_</span><span class="op" id="2921460">,</span>&nbsp;<span class="ident" id="2921462"><a href="/math/big/rat.go.html#2921435">err</a></span>&nbsp;<span class="op" id="2921466">=</span>&nbsp;<span class="ident" id="2921468"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2921469">.</span><span class="ident" id="2921470">b</span><span class="op" id="2921471">.</span><span class="ident" id="2921472">abs</span><span class="op" id="2921475">.</span><span class="ident" id="2921476">scan</span><span class="op" id="2921480">(</span><span class="ident" id="2921481"><a href="/math/big/rat.go.html#2907841">strings</a></span><span class="op" id="2921488">.</span><span class="ident" id="2921489">NewReader</span><span class="op" id="2921498">(</span><span class="ident" id="2921499"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921500">)</span><span class="op" id="2921501">,</span>&nbsp;<span class="num" id="2921503">10</span><span class="op" id="2921505">)</span><span class="op" id="2921506">;</span>&nbsp;<span class="ident" id="2921508"><a href="/math/big/rat.go.html#2921435">err</a></span>&nbsp;<span class="op" id="2921512">!=</span>&nbsp;<span class="ident" id="2921515">nil</span>&nbsp;<span class="op" id="2921519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921524">return</span>&nbsp;<span class="ident" id="2921531">nil</span><span class="op" id="2921534">,</span>&nbsp;<span class="ident" id="2921536">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921544">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921548">if</span>&nbsp;<span class="builtinfunc" id="2921551">len</span><span class="op" id="2921554">(</span><span class="ident" id="2921555"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2921556">.</span><span class="ident" id="2921557">b</span><span class="op" id="2921558">.</span><span class="ident" id="2921559">abs</span><span class="op" id="2921562">)</span>&nbsp;<span class="op" id="2921564">==</span>&nbsp;<span class="num" id="2921567">0</span>&nbsp;<span class="op" id="2921569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921574">return</span>&nbsp;<span class="ident" id="2921581">nil</span><span class="op" id="2921584">,</span>&nbsp;<span class="ident" id="2921586">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921598">return</span>&nbsp;<span class="ident" id="2921605"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2921606">.</span><span class="ident" id="2921607">norm</span><span class="op" id="2921611">(</span><span class="op" id="2921612">)</span><span class="op" id="2921613">,</span>&nbsp;<span class="ident" id="2921615">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921621">}</span><br>
<span class="lineno">560</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2921625">//&nbsp;check&nbsp;for&nbsp;a&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921655"><a href="/math/big/rat.go.html#2921295">sep</a></span>&nbsp;<span class="op" id="2921659">=</span>&nbsp;<span class="ident" id="2921661"><a href="/math/big/rat.go.html#2907841">strings</a></span><span class="op" id="2921668">.</span><span class="ident" id="2921669">Index</span><span class="op" id="2921674">(</span><span class="ident" id="2921675"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921676">,</span>&nbsp;<span class="string" id="2921678">&#34;.&#34;</span><span class="op" id="2921681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2921684">//&nbsp;check&nbsp;for&nbsp;an&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921710">e</span>&nbsp;<span class="op" id="2921712">:=</span>&nbsp;<span class="ident" id="2921715"><a href="/math/big/rat.go.html#2907841">strings</a></span><span class="op" id="2921722">.</span><span class="ident" id="2921723">IndexAny</span><span class="op" id="2921731">(</span><span class="ident" id="2921732"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921733">,</span>&nbsp;<span class="string" id="2921735">&#34;eE&#34;</span><span class="op" id="2921739">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921742">var</span>&nbsp;<span class="ident" id="2921746">exp</span>&nbsp;<span class="ident" id="2921750"><a href="/math/big/int.go.html#2847707">Int</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921755">if</span>&nbsp;<span class="ident" id="2921758"><a href="/math/big/rat.go.html#2921710">e</a></span>&nbsp;<span class="op" id="2921760">&gt;=</span>&nbsp;<span class="num" id="2921763">0</span>&nbsp;<span class="op" id="2921765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921769">if</span>&nbsp;<span class="ident" id="2921772"><a href="/math/big/rat.go.html#2921710">e</a></span>&nbsp;<span class="op" id="2921774">&lt;</span>&nbsp;<span class="ident" id="2921776"><a href="/math/big/rat.go.html#2921295">sep</a></span>&nbsp;<span class="op" id="2921780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2921785">//&nbsp;The&nbsp;E&nbsp;must&nbsp;come&nbsp;after&nbsp;the&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921832">return</span>&nbsp;<span class="ident" id="2921839">nil</span><span class="op" id="2921842">,</span>&nbsp;<span class="ident" id="2921844">false</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921856">if</span>&nbsp;<span class="ident" id="2921859">_</span><span class="op" id="2921860">,</span>&nbsp;<span class="ident" id="2921862">ok</span>&nbsp;<span class="op" id="2921865">:=</span>&nbsp;<span class="ident" id="2921868"><a href="/math/big/rat.go.html#2921746">exp</a></span><span class="op" id="2921871">.</span><span class="ident" id="2921872">SetString</span><span class="op" id="2921881">(</span><span class="ident" id="2921882"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921883">[</span><span class="ident" id="2921884"><a href="/math/big/rat.go.html#2921710">e</a></span><span class="op" id="2921885">+</span><span class="num" id="2921886">1</span><span class="op" id="2921887">:</span><span class="op" id="2921888">]</span><span class="op" id="2921889">,</span>&nbsp;<span class="num" id="2921891">10</span><span class="op" id="2921893">)</span><span class="op" id="2921894">;</span>&nbsp;<span class="op" id="2921896">!</span><span class="ident" id="2921897"><a href="/math/big/rat.go.html#2921862">ok</a></span>&nbsp;<span class="op" id="2921900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921905">return</span>&nbsp;<span class="ident" id="2921912">nil</span><span class="op" id="2921915">,</span>&nbsp;<span class="ident" id="2921917">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921929"><a href="/math/big/rat.go.html#2921202">s</a></span>&nbsp;<span class="op" id="2921931">=</span>&nbsp;<span class="ident" id="2921933"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921934">[</span><span class="num" id="2921935">0</span><span class="op" id="2921936">:</span><span class="ident" id="2921937"><a href="/math/big/rat.go.html#2921710">e</a></span><span class="op" id="2921938">]</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2921941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921944">if</span>&nbsp;<span class="ident" id="2921947"><a href="/math/big/rat.go.html#2921295">sep</a></span>&nbsp;<span class="op" id="2921951">&gt;=</span>&nbsp;<span class="num" id="2921954">0</span>&nbsp;<span class="op" id="2921956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921960"><a href="/math/big/rat.go.html#2921202">s</a></span>&nbsp;<span class="op" id="2921962">=</span>&nbsp;<span class="ident" id="2921964"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921965">[</span><span class="num" id="2921966">0</span><span class="op" id="2921967">:</span><span class="ident" id="2921968"><a href="/math/big/rat.go.html#2921295">sep</a></span><span class="op" id="2921971">]</span>&nbsp;<span class="op" id="2921973">+</span>&nbsp;<span class="ident" id="2921975"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2921976">[</span><span class="ident" id="2921977"><a href="/math/big/rat.go.html#2921295">sep</a></span><span class="op" id="2921980">+</span><span class="num" id="2921981">1</span><span class="op" id="2921982">:</span><span class="op" id="2921983">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2921987"><a href="/math/big/rat.go.html#2921746">exp</a></span><span class="op" id="2921990">.</span><span class="ident" id="2921991">Sub</span><span class="op" id="2921994">(</span><span class="op" id="2921995">&amp;</span><span class="ident" id="2921996"><a href="/math/big/rat.go.html#2921746">exp</a></span><span class="op" id="2921999">,</span>&nbsp;<span class="ident" id="2922001"><a href="/math/big/int.go.html#2848377">NewInt</a></span><span class="op" id="2922007">(</span><span class="ident" id="2922008">int64</span><span class="op" id="2922013">(</span><span class="builtinfunc" id="2922014">len</span><span class="op" id="2922017">(</span><span class="ident" id="2922018"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2922019">)</span><span class="op" id="2922020">-</span><span class="ident" id="2922021"><a href="/math/big/rat.go.html#2921295">sep</a></span><span class="op" id="2922024">)</span><span class="op" id="2922025">)</span><span class="op" id="2922026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922029">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922033">if</span>&nbsp;<span class="ident" id="2922036">_</span><span class="op" id="2922037">,</span>&nbsp;<span class="ident" id="2922039">ok</span>&nbsp;<span class="op" id="2922042">:=</span>&nbsp;<span class="ident" id="2922045"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2922046">.</span><span class="ident" id="2922047">a</span><span class="op" id="2922048">.</span><span class="ident" id="2922049">SetString</span><span class="op" id="2922058">(</span><span class="ident" id="2922059"><a href="/math/big/rat.go.html#2921202">s</a></span><span class="op" id="2922060">,</span>&nbsp;<span class="num" id="2922062">10</span><span class="op" id="2922064">)</span><span class="op" id="2922065">;</span>&nbsp;<span class="op" id="2922067">!</span><span class="ident" id="2922068"><a href="/math/big/rat.go.html#2922039">ok</a></span>&nbsp;<span class="op" id="2922071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922075">return</span>&nbsp;<span class="ident" id="2922082">nil</span><span class="op" id="2922085">,</span>&nbsp;<span class="ident" id="2922087">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2922097">powTen</span>&nbsp;<span class="op" id="2922104">:=</span>&nbsp;<span class="ident" id="2922107"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2922110">(</span><span class="ident" id="2922111">nil</span><span class="op" id="2922114">)</span><span class="op" id="2922115">.</span><span class="ident" id="2922116">expNN</span><span class="op" id="2922121">(</span><span class="ident" id="2922122"><a href="/math/big/nat.go.html#2873930">natTen</a></span><span class="op" id="2922128">,</span>&nbsp;<span class="ident" id="2922130"><a href="/math/big/rat.go.html#2921746">exp</a></span><span class="op" id="2922133">.</span><span class="ident" id="2922134">abs</span><span class="op" id="2922137">,</span>&nbsp;<span class="ident" id="2922139">nil</span><span class="op" id="2922142">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922145">if</span>&nbsp;<span class="ident" id="2922148"><a href="/math/big/rat.go.html#2921746">exp</a></span><span class="op" id="2922151">.</span><span class="ident" id="2922152">neg</span>&nbsp;<span class="op" id="2922156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2922160"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2922161">.</span><span class="ident" id="2922162">b</span><span class="op" id="2922163">.</span><span class="ident" id="2922164">abs</span>&nbsp;<span class="op" id="2922168">=</span>&nbsp;<span class="ident" id="2922170"><a href="/math/big/rat.go.html#2922097">powTen</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2922179"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2922180">.</span><span class="ident" id="2922181">norm</span><span class="op" id="2922185">(</span><span class="op" id="2922186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922189">}</span>&nbsp;<span class="keyword" id="2922191">else</span>&nbsp;<span class="op" id="2922196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2922200"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2922201">.</span><span class="ident" id="2922202">a</span><span class="op" id="2922203">.</span><span class="ident" id="2922204">abs</span>&nbsp;<span class="op" id="2922208">=</span>&nbsp;<span class="ident" id="2922210"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2922211">.</span><span class="ident" id="2922212">a</span><span class="op" id="2922213">.</span><span class="ident" id="2922214">abs</span><span class="op" id="2922217">.</span><span class="ident" id="2922218">mul</span><span class="op" id="2922221">(</span><span class="ident" id="2922222"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2922223">.</span><span class="ident" id="2922224">a</span><span class="op" id="2922225">.</span><span class="ident" id="2922226">abs</span><span class="op" id="2922229">,</span>&nbsp;<span class="ident" id="2922231"><a href="/math/big/rat.go.html#2922097">powTen</a></span><span class="op" id="2922237">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2922241"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2922242">.</span><span class="ident" id="2922243">b</span><span class="op" id="2922244">.</span><span class="ident" id="2922245">abs</span>&nbsp;<span class="op" id="2922249">=</span>&nbsp;<span class="ident" id="2922251"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2922252">.</span><span class="ident" id="2922253">b</span><span class="op" id="2922254">.</span><span class="ident" id="2922255">abs</span><span class="op" id="2922258">.</span><span class="builtinfunc" id="2922259">make</span><span class="op" id="2922263">(</span><span class="num" id="2922264">0</span><span class="op" id="2922265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922272">return</span>&nbsp;<span class="ident" id="2922279"><a href="/math/big/rat.go.html#2921184">z</a></span><span class="op" id="2922280">,</span>&nbsp;<span class="ident" id="2922282">true</span><br>
<span class="lineno"></span><span class="op" id="2922287">}</span><br>
<span class="lineno">595</span><br>
<span class="lineno"></span><span class="comment" id="2922290">//&nbsp;String&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;x&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;a/b&#34;&nbsp;(even&nbsp;if&nbsp;b&nbsp;==&nbsp;1).</span><br>
<span class="lineno"></span><span class="keyword" id="2922373">func</span>&nbsp;<span class="op" id="2922378">(</span><span class="ident" id="2922379">x</span>&nbsp;<span class="op" id="2922381">*</span><span class="ident" id="2922382"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2922385">)</span>&nbsp;<span class="ident" id="2922387">String</span><span class="op" id="2922393">(</span><span class="op" id="2922394">)</span>&nbsp;<span class="builtintype" id="2922396">string</span>&nbsp;<span class="op" id="2922403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2922406">s</span>&nbsp;<span class="op" id="2922408">:=</span>&nbsp;<span class="string" id="2922411">&#34;/1&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922417">if</span>&nbsp;<span class="builtinfunc" id="2922420">len</span><span class="op" id="2922423">(</span><span class="ident" id="2922424"><a href="/math/big/rat.go.html#2922379">x</a></span><span class="op" id="2922425">.</span><span class="ident" id="2922426">b</span><span class="op" id="2922427">.</span><span class="ident" id="2922428">abs</span><span class="op" id="2922431">)</span>&nbsp;<span class="op" id="2922433">!=</span>&nbsp;<span class="num" id="2922436">0</span>&nbsp;<span class="op" id="2922438">{</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2922442"><a href="/math/big/rat.go.html#2922406">s</a></span>&nbsp;<span class="op" id="2922444">=</span>&nbsp;<span class="string" id="2922446">&#34;/&#34;</span>&nbsp;<span class="op" id="2922450">+</span>&nbsp;<span class="ident" id="2922452"><a href="/math/big/rat.go.html#2922379">x</a></span><span class="op" id="2922453">.</span><span class="ident" id="2922454">b</span><span class="op" id="2922455">.</span><span class="ident" id="2922456">abs</span><span class="op" id="2922459">.</span><span class="ident" id="2922460">decimalString</span><span class="op" id="2922473">(</span><span class="op" id="2922474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922480">return</span>&nbsp;<span class="ident" id="2922487"><a href="/math/big/rat.go.html#2922379">x</a></span><span class="op" id="2922488">.</span><span class="ident" id="2922489">a</span><span class="op" id="2922490">.</span><span class="ident" id="2922491">String</span><span class="op" id="2922497">(</span><span class="op" id="2922498">)</span>&nbsp;<span class="op" id="2922500">+</span>&nbsp;<span class="ident" id="2922502"><a href="/math/big/rat.go.html#2922406">s</a></span><br>
<span class="lineno"></span><span class="op" id="2922504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span><span class="comment" id="2922507">//&nbsp;RatString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;x&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;a/b&#34;&nbsp;if&nbsp;b&nbsp;!=&nbsp;1,</span><br>
<span class="lineno"></span><span class="comment" id="2922586">//&nbsp;and&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;a&#34;&nbsp;if&nbsp;b&nbsp;==&nbsp;1.</span><br>
<span class="lineno"></span><span class="keyword" id="2922620">func</span>&nbsp;<span class="op" id="2922625">(</span><span class="ident" id="2922626">x</span>&nbsp;<span class="op" id="2922628">*</span><span class="ident" id="2922629"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2922632">)</span>&nbsp;<span class="ident" id="2922634">RatString</span><span class="op" id="2922643">(</span><span class="op" id="2922644">)</span>&nbsp;<span class="builtintype" id="2922646">string</span>&nbsp;<span class="op" id="2922653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922656">if</span>&nbsp;<span class="ident" id="2922659"><a href="/math/big/rat.go.html#2922626">x</a></span><span class="op" id="2922660">.</span><span class="ident" id="2922661">IsInt</span><span class="op" id="2922666">(</span><span class="op" id="2922667">)</span>&nbsp;<span class="op" id="2922669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922673">return</span>&nbsp;<span class="ident" id="2922680"><a href="/math/big/rat.go.html#2922626">x</a></span><span class="op" id="2922681">.</span><span class="ident" id="2922682">a</span><span class="op" id="2922683">.</span><span class="ident" id="2922684">String</span><span class="op" id="2922690">(</span><span class="op" id="2922691">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2922694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922697">return</span>&nbsp;<span class="ident" id="2922704"><a href="/math/big/rat.go.html#2922626">x</a></span><span class="op" id="2922705">.</span><span class="ident" id="2922706">String</span><span class="op" id="2922712">(</span><span class="op" id="2922713">)</span><br>
<span class="lineno"></span><span class="op" id="2922715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922718">//&nbsp;FloatString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;x&nbsp;in&nbsp;decimal&nbsp;form&nbsp;with&nbsp;prec</span><br>
<span class="lineno">615</span><span class="comment" id="2922796">//&nbsp;digits&nbsp;of&nbsp;precision&nbsp;after&nbsp;the&nbsp;decimal&nbsp;point&nbsp;and&nbsp;the&nbsp;last&nbsp;digit&nbsp;rounded.</span><br>
<span class="lineno"></span><span class="keyword" id="2922871">func</span>&nbsp;<span class="op" id="2922876">(</span><span class="ident" id="2922877">x</span>&nbsp;<span class="op" id="2922879">*</span><span class="ident" id="2922880"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2922883">)</span>&nbsp;<span class="ident" id="2922885">FloatString</span><span class="op" id="2922896">(</span><span class="ident" id="2922897">prec</span>&nbsp;<span class="builtintype" id="2922902">int</span><span class="op" id="2922905">)</span>&nbsp;<span class="builtintype" id="2922907">string</span>&nbsp;<span class="op" id="2922914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922917">if</span>&nbsp;<span class="ident" id="2922920"><a href="/math/big/rat.go.html#2922877">x</a></span><span class="op" id="2922921">.</span><span class="ident" id="2922922">IsInt</span><span class="op" id="2922927">(</span><span class="op" id="2922928">)</span>&nbsp;<span class="op" id="2922930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2922934">s</span>&nbsp;<span class="op" id="2922936">:=</span>&nbsp;<span class="ident" id="2922939"><a href="/math/big/rat.go.html#2922877">x</a></span><span class="op" id="2922940">.</span><span class="ident" id="2922941">a</span><span class="op" id="2922942">.</span><span class="ident" id="2922943">String</span><span class="op" id="2922949">(</span><span class="op" id="2922950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922954">if</span>&nbsp;<span class="ident" id="2922957"><a href="/math/big/rat.go.html#2922897">prec</a></span>&nbsp;<span class="op" id="2922962">&gt;</span>&nbsp;<span class="num" id="2922964">0</span>&nbsp;<span class="op" id="2922966">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2922971"><a href="/math/big/rat.go.html#2922934">s</a></span>&nbsp;<span class="op" id="2922973">+=</span>&nbsp;<span class="string" id="2922976">&#34;.&#34;</span>&nbsp;<span class="op" id="2922980">+</span>&nbsp;<span class="ident" id="2922982"><a href="/math/big/rat.go.html#2907841">strings</a></span><span class="op" id="2922989">.</span><span class="ident" id="2922990">Repeat</span><span class="op" id="2922996">(</span><span class="string" id="2922997">&#34;0&#34;</span><span class="op" id="2923000">,</span>&nbsp;<span class="ident" id="2923002"><a href="/math/big/rat.go.html#2922897">prec</a></span><span class="op" id="2923006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923014">return</span>&nbsp;<span class="ident" id="2923021"><a href="/math/big/rat.go.html#2922934">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2923027">//&nbsp;x.b.abs&nbsp;!=&nbsp;0</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923045">q</span><span class="op" id="2923046">,</span>&nbsp;<span class="ident" id="2923048">r</span>&nbsp;<span class="op" id="2923050">:=</span>&nbsp;<span class="ident" id="2923053"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2923056">(</span><span class="ident" id="2923057">nil</span><span class="op" id="2923060">)</span><span class="op" id="2923061">.</span><span class="ident" id="2923062">div</span><span class="op" id="2923065">(</span><span class="ident" id="2923066"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2923069">(</span><span class="ident" id="2923070">nil</span><span class="op" id="2923073">)</span><span class="op" id="2923074">,</span>&nbsp;<span class="ident" id="2923076"><a href="/math/big/rat.go.html#2922877">x</a></span><span class="op" id="2923077">.</span><span class="ident" id="2923078">a</span><span class="op" id="2923079">.</span><span class="ident" id="2923080">abs</span><span class="op" id="2923083">,</span>&nbsp;<span class="ident" id="2923085"><a href="/math/big/rat.go.html#2922877">x</a></span><span class="op" id="2923086">.</span><span class="ident" id="2923087">b</span><span class="op" id="2923088">.</span><span class="ident" id="2923089">abs</span><span class="op" id="2923092">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923096">p</span>&nbsp;<span class="op" id="2923098">:=</span>&nbsp;<span class="ident" id="2923101"><a href="/math/big/nat.go.html#2873896">natOne</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923109">if</span>&nbsp;<span class="ident" id="2923112"><a href="/math/big/rat.go.html#2922897">prec</a></span>&nbsp;<span class="op" id="2923117">&gt;</span>&nbsp;<span class="num" id="2923119">0</span>&nbsp;<span class="op" id="2923121">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923125"><a href="/math/big/rat.go.html#2923096">p</a></span>&nbsp;<span class="op" id="2923127">=</span>&nbsp;<span class="ident" id="2923129"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2923132">(</span><span class="ident" id="2923133">nil</span><span class="op" id="2923136">)</span><span class="op" id="2923137">.</span><span class="ident" id="2923138">expNN</span><span class="op" id="2923143">(</span><span class="ident" id="2923144"><a href="/math/big/nat.go.html#2873930">natTen</a></span><span class="op" id="2923150">,</span>&nbsp;<span class="ident" id="2923152"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2923155">(</span><span class="ident" id="2923156">nil</span><span class="op" id="2923159">)</span><span class="op" id="2923160">.</span><span class="ident" id="2923161">setUint64</span><span class="op" id="2923170">(</span><span class="ident" id="2923171">uint64</span><span class="op" id="2923177">(</span><span class="ident" id="2923178"><a href="/math/big/rat.go.html#2922897">prec</a></span><span class="op" id="2923182">)</span><span class="op" id="2923183">)</span><span class="op" id="2923184">,</span>&nbsp;<span class="ident" id="2923186">nil</span><span class="op" id="2923189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923196"><a href="/math/big/rat.go.html#2923048">r</a></span>&nbsp;<span class="op" id="2923198">=</span>&nbsp;<span class="ident" id="2923200"><a href="/math/big/rat.go.html#2923048">r</a></span><span class="op" id="2923201">.</span><span class="ident" id="2923202">mul</span><span class="op" id="2923205">(</span><span class="ident" id="2923206"><a href="/math/big/rat.go.html#2923048">r</a></span><span class="op" id="2923207">,</span>&nbsp;<span class="ident" id="2923209"><a href="/math/big/rat.go.html#2923096">p</a></span><span class="op" id="2923210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923213"><a href="/math/big/rat.go.html#2923048">r</a></span><span class="op" id="2923214">,</span>&nbsp;<span class="ident" id="2923216">r2</span>&nbsp;<span class="op" id="2923219">:=</span>&nbsp;<span class="ident" id="2923222"><a href="/math/big/rat.go.html#2923048">r</a></span><span class="op" id="2923223">.</span><span class="ident" id="2923224">div</span><span class="op" id="2923227">(</span><span class="ident" id="2923228"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2923231">(</span><span class="ident" id="2923232">nil</span><span class="op" id="2923235">)</span><span class="op" id="2923236">,</span>&nbsp;<span class="ident" id="2923238"><a href="/math/big/rat.go.html#2923048">r</a></span><span class="op" id="2923239">,</span>&nbsp;<span class="ident" id="2923241"><a href="/math/big/rat.go.html#2922877">x</a></span><span class="op" id="2923242">.</span><span class="ident" id="2923243">b</span><span class="op" id="2923244">.</span><span class="ident" id="2923245">abs</span><span class="op" id="2923248">)</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2923252">//&nbsp;see&nbsp;if&nbsp;we&nbsp;need&nbsp;to&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923283"><a href="/math/big/rat.go.html#2923216">r2</a></span>&nbsp;<span class="op" id="2923286">=</span>&nbsp;<span class="ident" id="2923288"><a href="/math/big/rat.go.html#2923216">r2</a></span><span class="op" id="2923290">.</span><span class="ident" id="2923291">add</span><span class="op" id="2923294">(</span><span class="ident" id="2923295"><a href="/math/big/rat.go.html#2923216">r2</a></span><span class="op" id="2923297">,</span>&nbsp;<span class="ident" id="2923299"><a href="/math/big/rat.go.html#2923216">r2</a></span><span class="op" id="2923301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923304">if</span>&nbsp;<span class="ident" id="2923307"><a href="/math/big/rat.go.html#2922877">x</a></span><span class="op" id="2923308">.</span><span class="ident" id="2923309">b</span><span class="op" id="2923310">.</span><span class="ident" id="2923311">abs</span><span class="op" id="2923314">.</span><span class="ident" id="2923315">cmp</span><span class="op" id="2923318">(</span><span class="ident" id="2923319"><a href="/math/big/rat.go.html#2923216">r2</a></span><span class="op" id="2923321">)</span>&nbsp;<span class="op" id="2923323">&lt;=</span>&nbsp;<span class="num" id="2923326">0</span>&nbsp;<span class="op" id="2923328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923332"><a href="/math/big/rat.go.html#2923048">r</a></span>&nbsp;<span class="op" id="2923334">=</span>&nbsp;<span class="ident" id="2923336"><a href="/math/big/rat.go.html#2923048">r</a></span><span class="op" id="2923337">.</span><span class="ident" id="2923338">add</span><span class="op" id="2923341">(</span><span class="ident" id="2923342"><a href="/math/big/rat.go.html#2923048">r</a></span><span class="op" id="2923343">,</span>&nbsp;<span class="ident" id="2923345"><a href="/math/big/nat.go.html#2873896">natOne</a></span><span class="op" id="2923351">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923355">if</span>&nbsp;<span class="ident" id="2923358"><a href="/math/big/rat.go.html#2923048">r</a></span><span class="op" id="2923359">.</span><span class="ident" id="2923360">cmp</span><span class="op" id="2923363">(</span><span class="ident" id="2923364"><a href="/math/big/rat.go.html#2923096">p</a></span><span class="op" id="2923365">)</span>&nbsp;<span class="op" id="2923367">&gt;=</span>&nbsp;<span class="num" id="2923370">0</span>&nbsp;<span class="op" id="2923372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923377"><a href="/math/big/rat.go.html#2923045">q</a></span>&nbsp;<span class="op" id="2923379">=</span>&nbsp;<span class="ident" id="2923381"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2923384">(</span><span class="ident" id="2923385">nil</span><span class="op" id="2923388">)</span><span class="op" id="2923389">.</span><span class="ident" id="2923390">add</span><span class="op" id="2923393">(</span><span class="ident" id="2923394"><a href="/math/big/rat.go.html#2923045">q</a></span><span class="op" id="2923395">,</span>&nbsp;<span class="ident" id="2923397"><a href="/math/big/nat.go.html#2873896">natOne</a></span><span class="op" id="2923403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923408"><a href="/math/big/rat.go.html#2923048">r</a></span>&nbsp;<span class="op" id="2923410">=</span>&nbsp;<span class="ident" id="2923412"><a href="/math/big/nat.go.html#2873877">nat</a></span><span class="op" id="2923415">(</span><span class="ident" id="2923416">nil</span><span class="op" id="2923419">)</span><span class="op" id="2923420">.</span><span class="ident" id="2923421">sub</span><span class="op" id="2923424">(</span><span class="ident" id="2923425"><a href="/math/big/rat.go.html#2923048">r</a></span><span class="op" id="2923426">,</span>&nbsp;<span class="ident" id="2923428"><a href="/math/big/rat.go.html#2923096">p</a></span><span class="op" id="2923429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923436">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923440">s</span>&nbsp;<span class="op" id="2923442">:=</span>&nbsp;<span class="ident" id="2923445"><a href="/math/big/rat.go.html#2923045">q</a></span><span class="op" id="2923446">.</span><span class="ident" id="2923447">decimalString</span><span class="op" id="2923460">(</span><span class="op" id="2923461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923464">if</span>&nbsp;<span class="ident" id="2923467"><a href="/math/big/rat.go.html#2922877">x</a></span><span class="op" id="2923468">.</span><span class="ident" id="2923469">a</span><span class="op" id="2923470">.</span><span class="ident" id="2923471">neg</span>&nbsp;<span class="op" id="2923475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923479"><a href="/math/big/rat.go.html#2923440">s</a></span>&nbsp;<span class="op" id="2923481">=</span>&nbsp;<span class="string" id="2923483">&#34;-&#34;</span>&nbsp;<span class="op" id="2923487">+</span>&nbsp;<span class="ident" id="2923489"><a href="/math/big/rat.go.html#2923440">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923492">}</span><br>
<span class="lineno">650</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923496">if</span>&nbsp;<span class="ident" id="2923499"><a href="/math/big/rat.go.html#2922897">prec</a></span>&nbsp;<span class="op" id="2923504">&gt;</span>&nbsp;<span class="num" id="2923506">0</span>&nbsp;<span class="op" id="2923508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923512">rs</span>&nbsp;<span class="op" id="2923515">:=</span>&nbsp;<span class="ident" id="2923518"><a href="/math/big/rat.go.html#2923048">r</a></span><span class="op" id="2923519">.</span><span class="ident" id="2923520">decimalString</span><span class="op" id="2923533">(</span><span class="op" id="2923534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923538">leadingZeros</span>&nbsp;<span class="op" id="2923551">:=</span>&nbsp;<span class="ident" id="2923554"><a href="/math/big/rat.go.html#2922897">prec</a></span>&nbsp;<span class="op" id="2923559">-</span>&nbsp;<span class="builtinfunc" id="2923561">len</span><span class="op" id="2923564">(</span><span class="ident" id="2923565"><a href="/math/big/rat.go.html#2923512">rs</a></span><span class="op" id="2923567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923571"><a href="/math/big/rat.go.html#2923440">s</a></span>&nbsp;<span class="op" id="2923573">+=</span>&nbsp;<span class="string" id="2923576">&#34;.&#34;</span>&nbsp;<span class="op" id="2923580">+</span>&nbsp;<span class="ident" id="2923582"><a href="/math/big/rat.go.html#2907841">strings</a></span><span class="op" id="2923589">.</span><span class="ident" id="2923590">Repeat</span><span class="op" id="2923596">(</span><span class="string" id="2923597">&#34;0&#34;</span><span class="op" id="2923600">,</span>&nbsp;<span class="ident" id="2923602"><a href="/math/big/rat.go.html#2923538">leadingZeros</a></span><span class="op" id="2923614">)</span>&nbsp;<span class="op" id="2923616">+</span>&nbsp;<span class="ident" id="2923618"><a href="/math/big/rat.go.html#2923512">rs</a></span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923626">return</span>&nbsp;<span class="ident" id="2923633"><a href="/math/big/rat.go.html#2923440">s</a></span><br>
<span class="lineno"></span><span class="op" id="2923635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">660</span><span class="comment" id="2923638">//&nbsp;Gob&nbsp;codec&nbsp;version.&nbsp;Permits&nbsp;backward-compatible&nbsp;changes&nbsp;to&nbsp;the&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="keyword" id="2923713">const</span>&nbsp;<span class="ident" id="2923719">ratGobVersion</span>&nbsp;<span class="builtintype" id="2923733">byte</span>&nbsp;<span class="op" id="2923738">=</span>&nbsp;<span class="num" id="2923740">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923743">//&nbsp;GobEncode&nbsp;implements&nbsp;the&nbsp;gob.GobEncoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2923797">func</span>&nbsp;<span class="op" id="2923802">(</span><span class="ident" id="2923803">x</span>&nbsp;<span class="op" id="2923805">*</span><span class="ident" id="2923806"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2923809">)</span>&nbsp;<span class="ident" id="2923811">GobEncode</span><span class="op" id="2923820">(</span><span class="op" id="2923821">)</span>&nbsp;<span class="op" id="2923823">(</span><span class="op" id="2923824">[</span><span class="op" id="2923825">]</span><span class="builtintype" id="2923826">byte</span><span class="op" id="2923830">,</span>&nbsp;<span class="builtintype" id="2923832">error</span><span class="op" id="2923837">)</span>&nbsp;<span class="op" id="2923839">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923842">if</span>&nbsp;<span class="ident" id="2923845"><a href="/math/big/rat.go.html#2923803">x</a></span>&nbsp;<span class="op" id="2923847">==</span>&nbsp;<span class="ident" id="2923850">nil</span>&nbsp;<span class="op" id="2923854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923858">return</span>&nbsp;<span class="ident" id="2923865">nil</span><span class="op" id="2923868">,</span>&nbsp;<span class="ident" id="2923870">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923878">buf</span>&nbsp;<span class="op" id="2923882">:=</span>&nbsp;<span class="builtinfunc" id="2923885">make</span><span class="op" id="2923889">(</span><span class="op" id="2923890">[</span><span class="op" id="2923891">]</span><span class="builtintype" id="2923892">byte</span><span class="op" id="2923896">,</span>&nbsp;<span class="num" id="2923898">1</span><span class="op" id="2923899">+</span><span class="num" id="2923900">4</span><span class="op" id="2923901">+</span><span class="op" id="2923902">(</span><span class="builtinfunc" id="2923903">len</span><span class="op" id="2923906">(</span><span class="ident" id="2923907"><a href="/math/big/rat.go.html#2923803">x</a></span><span class="op" id="2923908">.</span><span class="ident" id="2923909">a</span><span class="op" id="2923910">.</span><span class="ident" id="2923911">abs</span><span class="op" id="2923914">)</span><span class="op" id="2923915">+</span><span class="builtinfunc" id="2923916">len</span><span class="op" id="2923919">(</span><span class="ident" id="2923920"><a href="/math/big/rat.go.html#2923803">x</a></span><span class="op" id="2923921">.</span><span class="ident" id="2923922">b</span><span class="op" id="2923923">.</span><span class="ident" id="2923924">abs</span><span class="op" id="2923927">)</span><span class="op" id="2923928">)</span><span class="op" id="2923929">*</span><span class="ident" id="2923930"><a href="/math/big/arith.go.html#2842857">_S</a></span><span class="op" id="2923932">)</span>&nbsp;<span class="comment" id="2923934">//&nbsp;extra&nbsp;bytes&nbsp;for&nbsp;version&nbsp;and&nbsp;sign&nbsp;bit&nbsp;(1),&nbsp;and&nbsp;numerator&nbsp;length&nbsp;(4)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924005">i</span>&nbsp;<span class="op" id="2924007">:=</span>&nbsp;<span class="ident" id="2924010"><a href="/math/big/rat.go.html#2923803">x</a></span><span class="op" id="2924011">.</span><span class="ident" id="2924012">b</span><span class="op" id="2924013">.</span><span class="ident" id="2924014">abs</span><span class="op" id="2924017">.</span><span class="ident" id="2924018">bytes</span><span class="op" id="2924023">(</span><span class="ident" id="2924024"><a href="/math/big/rat.go.html#2923878">buf</a></span><span class="op" id="2924027">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924030">j</span>&nbsp;<span class="op" id="2924032">:=</span>&nbsp;<span class="ident" id="2924035"><a href="/math/big/rat.go.html#2923803">x</a></span><span class="op" id="2924036">.</span><span class="ident" id="2924037">a</span><span class="op" id="2924038">.</span><span class="ident" id="2924039">abs</span><span class="op" id="2924042">.</span><span class="ident" id="2924043">bytes</span><span class="op" id="2924048">(</span><span class="ident" id="2924049"><a href="/math/big/rat.go.html#2923878">buf</a></span><span class="op" id="2924052">[</span><span class="num" id="2924053">0</span><span class="op" id="2924054">:</span><span class="ident" id="2924055"><a href="/math/big/rat.go.html#2924005">i</a></span><span class="op" id="2924056">]</span><span class="op" id="2924057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924060">n</span>&nbsp;<span class="op" id="2924062">:=</span>&nbsp;<span class="ident" id="2924065"><a href="/math/big/rat.go.html#2924005">i</a></span>&nbsp;<span class="op" id="2924067">-</span>&nbsp;<span class="ident" id="2924069"><a href="/math/big/rat.go.html#2924030">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924072">if</span>&nbsp;<span class="builtintype" id="2924075">int</span><span class="op" id="2924078">(</span><span class="builtintype" id="2924079">uint32</span><span class="op" id="2924085">(</span><span class="ident" id="2924086"><a href="/math/big/rat.go.html#2924060">n</a></span><span class="op" id="2924087">)</span><span class="op" id="2924088">)</span>&nbsp;<span class="op" id="2924090">!=</span>&nbsp;<span class="ident" id="2924093"><a href="/math/big/rat.go.html#2924060">n</a></span>&nbsp;<span class="op" id="2924095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2924099">//&nbsp;this&nbsp;should&nbsp;never&nbsp;happen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924129">return</span>&nbsp;<span class="ident" id="2924136">nil</span><span class="op" id="2924139">,</span>&nbsp;<span class="ident" id="2924141"><a href="/math/big/rat.go.html#2907816">errors</a></span><span class="op" id="2924147">.</span><span class="ident" id="2924148">New</span><span class="op" id="2924151">(</span><span class="string" id="2924152">&#34;Rat.GobEncode:&nbsp;numerator&nbsp;too&nbsp;large&#34;</span><span class="op" id="2924188">)</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2924191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924194"><a href="/math/big/rat.go.html#2907797">binary</a></span><span class="op" id="2924200">.</span><span class="ident" id="2924201">BigEndian</span><span class="op" id="2924210">.</span><span class="ident" id="2924211">PutUint32</span><span class="op" id="2924220">(</span><span class="ident" id="2924221"><a href="/math/big/rat.go.html#2923878">buf</a></span><span class="op" id="2924224">[</span><span class="ident" id="2924225"><a href="/math/big/rat.go.html#2924030">j</a></span><span class="op" id="2924226">-</span><span class="num" id="2924227">4</span><span class="op" id="2924228">:</span><span class="ident" id="2924229"><a href="/math/big/rat.go.html#2924030">j</a></span><span class="op" id="2924230">]</span><span class="op" id="2924231">,</span>&nbsp;<span class="builtintype" id="2924233">uint32</span><span class="op" id="2924239">(</span><span class="ident" id="2924240"><a href="/math/big/rat.go.html#2924060">n</a></span><span class="op" id="2924241">)</span><span class="op" id="2924242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924245"><a href="/math/big/rat.go.html#2924030">j</a></span>&nbsp;<span class="op" id="2924247">-=</span>&nbsp;<span class="num" id="2924250">1</span>&nbsp;<span class="op" id="2924252">+</span>&nbsp;<span class="num" id="2924254">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924257">b</span>&nbsp;<span class="op" id="2924259">:=</span>&nbsp;<span class="ident" id="2924262"><a href="/math/big/rat.go.html#2923719">ratGobVersion</a></span>&nbsp;<span class="op" id="2924276">&lt;&lt;</span>&nbsp;<span class="num" id="2924279">1</span>&nbsp;<span class="comment" id="2924281">//&nbsp;make&nbsp;space&nbsp;for&nbsp;sign&nbsp;bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924309">if</span>&nbsp;<span class="ident" id="2924312"><a href="/math/big/rat.go.html#2923803">x</a></span><span class="op" id="2924313">.</span><span class="ident" id="2924314">a</span><span class="op" id="2924315">.</span><span class="ident" id="2924316">neg</span>&nbsp;<span class="op" id="2924320">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924324"><a href="/math/big/rat.go.html#2924257">b</a></span>&nbsp;<span class="op" id="2924326">|=</span>&nbsp;<span class="num" id="2924329">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2924332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924335"><a href="/math/big/rat.go.html#2923878">buf</a></span><span class="op" id="2924338">[</span><span class="ident" id="2924339"><a href="/math/big/rat.go.html#2924030">j</a></span><span class="op" id="2924340">]</span>&nbsp;<span class="op" id="2924342">=</span>&nbsp;<span class="ident" id="2924344"><a href="/math/big/rat.go.html#2924257">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924347">return</span>&nbsp;<span class="ident" id="2924354"><a href="/math/big/rat.go.html#2923878">buf</a></span><span class="op" id="2924357">[</span><span class="ident" id="2924358"><a href="/math/big/rat.go.html#2924030">j</a></span><span class="op" id="2924359">:</span><span class="op" id="2924360">]</span><span class="op" id="2924361">,</span>&nbsp;<span class="ident" id="2924363">nil</span><br>
<span class="lineno"></span><span class="op" id="2924367">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="comment" id="2924370">//&nbsp;GobDecode&nbsp;implements&nbsp;the&nbsp;gob.GobDecoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2924424">func</span>&nbsp;<span class="op" id="2924429">(</span><span class="ident" id="2924430">z</span>&nbsp;<span class="op" id="2924432">*</span><span class="ident" id="2924433"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2924436">)</span>&nbsp;<span class="ident" id="2924438">GobDecode</span><span class="op" id="2924447">(</span><span class="ident" id="2924448">buf</span>&nbsp;<span class="op" id="2924452">[</span><span class="op" id="2924453">]</span><span class="builtintype" id="2924454">byte</span><span class="op" id="2924458">)</span>&nbsp;<span class="builtintype" id="2924460">error</span>&nbsp;<span class="op" id="2924466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924469">if</span>&nbsp;<span class="builtinfunc" id="2924472">len</span><span class="op" id="2924475">(</span><span class="ident" id="2924476"><a href="/math/big/rat.go.html#2924448">buf</a></span><span class="op" id="2924479">)</span>&nbsp;<span class="op" id="2924481">==</span>&nbsp;<span class="num" id="2924484">0</span>&nbsp;<span class="op" id="2924486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2924490">//&nbsp;Other&nbsp;side&nbsp;sent&nbsp;a&nbsp;nil&nbsp;or&nbsp;default&nbsp;value.</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2924535">*</span><span class="ident" id="2924536"><a href="/math/big/rat.go.html#2924430">z</a></span>&nbsp;<span class="op" id="2924538">=</span>&nbsp;<span class="ident" id="2924540"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2924543">{</span><span class="op" id="2924544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924548">return</span>&nbsp;<span class="ident" id="2924555">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2924560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924563">b</span>&nbsp;<span class="op" id="2924565">:=</span>&nbsp;<span class="ident" id="2924568"><a href="/math/big/rat.go.html#2924448">buf</a></span><span class="op" id="2924571">[</span><span class="num" id="2924572">0</span><span class="op" id="2924573">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924576">if</span>&nbsp;<span class="ident" id="2924579"><a href="/math/big/rat.go.html#2924563">b</a></span><span class="op" id="2924580">&gt;&gt;</span><span class="num" id="2924582">1</span>&nbsp;<span class="op" id="2924584">!=</span>&nbsp;<span class="ident" id="2924587"><a href="/math/big/rat.go.html#2923719">ratGobVersion</a></span>&nbsp;<span class="op" id="2924601">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924605">return</span>&nbsp;<span class="ident" id="2924612"><a href="/math/big/rat.go.html#2907816">errors</a></span><span class="op" id="2924618">.</span><span class="ident" id="2924619">New</span><span class="op" id="2924622">(</span><span class="ident" id="2924623"><a href="/math/big/rat.go.html#2907826">fmt</a></span><span class="op" id="2924626">.</span><span class="ident" id="2924627">Sprintf</span><span class="op" id="2924634">(</span><span class="string" id="2924635">&#34;Rat.GobDecode:&nbsp;encoding&nbsp;version&nbsp;%d&nbsp;not&nbsp;supported&#34;</span><span class="op" id="2924685">,</span>&nbsp;<span class="ident" id="2924687"><a href="/math/big/rat.go.html#2924563">b</a></span><span class="op" id="2924688">&gt;&gt;</span><span class="num" id="2924690">1</span><span class="op" id="2924691">)</span><span class="op" id="2924692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2924695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924698">const</span>&nbsp;<span class="ident" id="2924704">j</span>&nbsp;<span class="op" id="2924706">=</span>&nbsp;<span class="num" id="2924708">1</span>&nbsp;<span class="op" id="2924710">+</span>&nbsp;<span class="num" id="2924712">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924715">i</span>&nbsp;<span class="op" id="2924717">:=</span>&nbsp;<span class="ident" id="2924720"><a href="/math/big/rat.go.html#2924704">j</a></span>&nbsp;<span class="op" id="2924722">+</span>&nbsp;<span class="ident" id="2924724"><a href="/math/big/rat.go.html#2907797">binary</a></span><span class="op" id="2924730">.</span><span class="ident" id="2924731">BigEndian</span><span class="op" id="2924740">.</span><span class="ident" id="2924741">Uint32</span><span class="op" id="2924747">(</span><span class="ident" id="2924748"><a href="/math/big/rat.go.html#2924448">buf</a></span><span class="op" id="2924751">[</span><span class="ident" id="2924752"><a href="/math/big/rat.go.html#2924704">j</a></span><span class="op" id="2924753">-</span><span class="num" id="2924754">4</span><span class="op" id="2924755">:</span><span class="ident" id="2924756"><a href="/math/big/rat.go.html#2924704">j</a></span><span class="op" id="2924757">]</span><span class="op" id="2924758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924761"><a href="/math/big/rat.go.html#2924430">z</a></span><span class="op" id="2924762">.</span><span class="ident" id="2924763">a</span><span class="op" id="2924764">.</span><span class="ident" id="2924765">neg</span>&nbsp;<span class="op" id="2924769">=</span>&nbsp;<span class="ident" id="2924771"><a href="/math/big/rat.go.html#2924563">b</a></span><span class="op" id="2924772">&amp;</span><span class="num" id="2924773">1</span>&nbsp;<span class="op" id="2924775">!=</span>&nbsp;<span class="num" id="2924778">0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924781"><a href="/math/big/rat.go.html#2924430">z</a></span><span class="op" id="2924782">.</span><span class="ident" id="2924783">a</span><span class="op" id="2924784">.</span><span class="ident" id="2924785">abs</span>&nbsp;<span class="op" id="2924789">=</span>&nbsp;<span class="ident" id="2924791"><a href="/math/big/rat.go.html#2924430">z</a></span><span class="op" id="2924792">.</span><span class="ident" id="2924793">a</span><span class="op" id="2924794">.</span><span class="ident" id="2924795">abs</span><span class="op" id="2924798">.</span><span class="ident" id="2924799">setBytes</span><span class="op" id="2924807">(</span><span class="ident" id="2924808"><a href="/math/big/rat.go.html#2924448">buf</a></span><span class="op" id="2924811">[</span><span class="ident" id="2924812"><a href="/math/big/rat.go.html#2924704">j</a></span><span class="op" id="2924813">:</span><span class="ident" id="2924814"><a href="/math/big/rat.go.html#2924715">i</a></span><span class="op" id="2924815">]</span><span class="op" id="2924816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2924819"><a href="/math/big/rat.go.html#2924430">z</a></span><span class="op" id="2924820">.</span><span class="ident" id="2924821">b</span><span class="op" id="2924822">.</span><span class="ident" id="2924823">abs</span>&nbsp;<span class="op" id="2924827">=</span>&nbsp;<span class="ident" id="2924829"><a href="/math/big/rat.go.html#2924430">z</a></span><span class="op" id="2924830">.</span><span class="ident" id="2924831">b</span><span class="op" id="2924832">.</span><span class="ident" id="2924833">abs</span><span class="op" id="2924836">.</span><span class="ident" id="2924837">setBytes</span><span class="op" id="2924845">(</span><span class="ident" id="2924846"><a href="/math/big/rat.go.html#2924448">buf</a></span><span class="op" id="2924849">[</span><span class="ident" id="2924850"><a href="/math/big/rat.go.html#2924715">i</a></span><span class="op" id="2924851">:</span><span class="op" id="2924852">]</span><span class="op" id="2924853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924856">return</span>&nbsp;<span class="ident" id="2924863">nil</span><br>
<span class="lineno"></span><span class="op" id="2924867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">705</span><span class="comment" id="2924870">//&nbsp;MarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextMarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2924934">func</span>&nbsp;<span class="op" id="2924939">(</span><span class="ident" id="2924940">r</span>&nbsp;<span class="op" id="2924942">*</span><span class="ident" id="2924943"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2924946">)</span>&nbsp;<span class="ident" id="2924948">MarshalText</span><span class="op" id="2924959">(</span><span class="op" id="2924960">)</span>&nbsp;<span class="op" id="2924962">(</span><span class="ident" id="2924963">text</span>&nbsp;<span class="op" id="2924968">[</span><span class="op" id="2924969">]</span><span class="builtintype" id="2924970">byte</span><span class="op" id="2924974">,</span>&nbsp;<span class="ident" id="2924976">err</span>&nbsp;<span class="builtintype" id="2924980">error</span><span class="op" id="2924985">)</span>&nbsp;<span class="op" id="2924987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2924990">return</span>&nbsp;<span class="op" id="2924997">[</span><span class="op" id="2924998">]</span><span class="builtintype" id="2924999">byte</span><span class="op" id="2925003">(</span><span class="ident" id="2925004"><a href="/math/big/rat.go.html#2924940">r</a></span><span class="op" id="2925005">.</span><span class="ident" id="2925006">RatString</span><span class="op" id="2925015">(</span><span class="op" id="2925016">)</span><span class="op" id="2925017">)</span><span class="op" id="2925018">,</span>&nbsp;<span class="ident" id="2925020">nil</span><br>
<span class="lineno"></span><span class="op" id="2925024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span><span class="comment" id="2925027">//&nbsp;UnmarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2925095">func</span>&nbsp;<span class="op" id="2925100">(</span><span class="ident" id="2925101">r</span>&nbsp;<span class="op" id="2925103">*</span><span class="ident" id="2925104"><a href="/math/big/rat.go.html#2907970">Rat</a></span><span class="op" id="2925107">)</span>&nbsp;<span class="ident" id="2925109">UnmarshalText</span><span class="op" id="2925122">(</span><span class="ident" id="2925123">text</span>&nbsp;<span class="op" id="2925128">[</span><span class="op" id="2925129">]</span><span class="builtintype" id="2925130">byte</span><span class="op" id="2925134">)</span>&nbsp;<span class="builtintype" id="2925136">error</span>&nbsp;<span class="op" id="2925142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925145">if</span>&nbsp;<span class="ident" id="2925148">_</span><span class="op" id="2925149">,</span>&nbsp;<span class="ident" id="2925151">ok</span>&nbsp;<span class="op" id="2925154">:=</span>&nbsp;<span class="ident" id="2925157"><a href="/math/big/rat.go.html#2925101">r</a></span><span class="op" id="2925158">.</span><span class="ident" id="2925159">SetString</span><span class="op" id="2925168">(</span><span class="builtintype" id="2925169">string</span><span class="op" id="2925175">(</span><span class="ident" id="2925176"><a href="/math/big/rat.go.html#2925123">text</a></span><span class="op" id="2925180">)</span><span class="op" id="2925181">)</span><span class="op" id="2925182">;</span>&nbsp;<span class="op" id="2925184">!</span><span class="ident" id="2925185"><a href="/math/big/rat.go.html#2925151">ok</a></span>&nbsp;<span class="op" id="2925188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925192">return</span>&nbsp;<span class="ident" id="2925199"><a href="/math/big/rat.go.html#2907826">fmt</a></span><span class="op" id="2925202">.</span><span class="ident" id="2925203">Errorf</span><span class="op" id="2925209">(</span><span class="string" id="2925210">&#34;math/big:&nbsp;cannot&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;a&nbsp;*big.Rat&#34;</span><span class="op" id="2925257">,</span>&nbsp;<span class="ident" id="2925259"><a href="/math/big/rat.go.html#2925123">text</a></span><span class="op" id="2925263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2925266">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925269">return</span>&nbsp;<span class="ident" id="2925276">nil</span><br>
<span class="lineno"></span><span class="op" id="2925280">}</span>
</div>
</body>
</html>
