<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3540696">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3540751">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3540805">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3540856">package</span>&nbsp;<span class="ident" id="3540864">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3540874">import</span>&nbsp;<span class="op" id="3540881">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3540884">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3540894">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3540900">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3540911">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3540919">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3540930">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3540945">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3540948">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3541009">var</span>&nbsp;<span class="ident" id="3541013">ErrBadPattern</span>&nbsp;<span class="op" id="3541027">=</span>&nbsp;<span class="ident" id="3541029"><a href="/path/filepath/match.go.html#3540884">errors</a></span><span class="op" id="3541035">.</span><span class="ident" id="3541036">New</span><span class="op" id="3541039">(</span><span class="string" id="3541040">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3541065">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3541068">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="3541135">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3541161">//</span><br>
<span class="lineno"></span><span class="comment" id="3541164">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno"></span><span class="comment" id="3541176">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3541189">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno">25</span><span class="comment" id="3541198">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3541263">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3541322">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3541362">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3541414">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="3541477">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3541513">//</span><br>
<span class="lineno"></span><span class="comment" id="3541516">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno"></span><span class="comment" id="3541536">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3541594">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="3541630">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3541684">//</span><br>
<span class="lineno"></span><span class="comment" id="3541687">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="3541757">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3541824">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="3541841">//</span><br>
<span class="lineno"></span><span class="comment" id="3541844">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3541909">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="3541928">//</span><br>
<span class="lineno"></span><span class="keyword" id="3541931">func</span>&nbsp;<span class="ident" id="3541936">Match</span><span class="op" id="3541941">(</span><span class="ident" id="3541942">pattern</span><span class="op" id="3541949">,</span>&nbsp;<span class="ident" id="3541951">name</span>&nbsp;<span class="builtintype" id="3541956">string</span><span class="op" id="3541962">)</span>&nbsp;<span class="op" id="3541964">(</span><span class="ident" id="3541965">matched</span>&nbsp;<span class="builtintype" id="3541973">bool</span><span class="op" id="3541977">,</span>&nbsp;<span class="ident" id="3541979">err</span>&nbsp;<span class="builtintype" id="3541983">error</span><span class="op" id="3541988">)</span>&nbsp;<span class="op" id="3541990">{</span><br>
<span class="lineno">45</span><span class="ident" id="3541992">Pattern</span><span class="op" id="3541999">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542002">for</span>&nbsp;<span class="builtinfunc" id="3542006">len</span><span class="op" id="3542009">(</span><span class="ident" id="3542010"><a href="/path/filepath/match.go.html#3541942">pattern</a></span><span class="op" id="3542017">)</span>&nbsp;<span class="op" id="3542019">&gt;</span>&nbsp;<span class="num" id="3542021">0</span>&nbsp;<span class="op" id="3542023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542027">var</span>&nbsp;<span class="ident" id="3542031">star</span>&nbsp;<span class="builtintype" id="3542036">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542043">var</span>&nbsp;<span class="ident" id="3542047">chunk</span>&nbsp;<span class="builtintype" id="3542053">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542062"><a href="/path/filepath/match.go.html#3542031">star</a></span><span class="op" id="3542066">,</span>&nbsp;<span class="ident" id="3542068"><a href="/path/filepath/match.go.html#3542047">chunk</a></span><span class="op" id="3542073">,</span>&nbsp;<span class="ident" id="3542075"><a href="/path/filepath/match.go.html#3541942">pattern</a></span>&nbsp;<span class="op" id="3542083">=</span>&nbsp;<span class="ident" id="3542085"><a href="/path/filepath/match.go.html#3543194">scanChunk</a></span><span class="op" id="3542094">(</span><span class="ident" id="3542095"><a href="/path/filepath/match.go.html#3541942">pattern</a></span><span class="op" id="3542102">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542106">if</span>&nbsp;<span class="ident" id="3542109"><a href="/path/filepath/match.go.html#3542031">star</a></span>&nbsp;<span class="op" id="3542114">&amp;&amp;</span>&nbsp;<span class="ident" id="3542117"><a href="/path/filepath/match.go.html#3542047">chunk</a></span>&nbsp;<span class="op" id="3542123">==</span>&nbsp;<span class="string" id="3542126">&#34;&#34;</span>&nbsp;<span class="op" id="3542129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3542134">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542193">return</span>&nbsp;<span class="ident" id="3542200"><a href="/path/filepath/match.go.html#3540919">strings</a></span><span class="op" id="3542207">.</span><span class="ident" id="3542208">Index</span><span class="op" id="3542213">(</span><span class="ident" id="3542214"><a href="/path/filepath/match.go.html#3541951">name</a></span><span class="op" id="3542218">,</span>&nbsp;<span class="builtintype" id="3542220">string</span><span class="op" id="3542226">(</span><span class="ident" id="3542227"><a href="/path/filepath/path.go.html#3549014">Separator</a></span><span class="op" id="3542236">)</span><span class="op" id="3542237">)</span>&nbsp;<span class="op" id="3542239">&lt;</span>&nbsp;<span class="num" id="3542241">0</span><span class="op" id="3542242">,</span>&nbsp;<span class="ident" id="3542244">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3542254">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542295">t</span><span class="op" id="3542296">,</span>&nbsp;<span class="ident" id="3542298">ok</span><span class="op" id="3542300">,</span>&nbsp;<span class="ident" id="3542302">err</span>&nbsp;<span class="op" id="3542306">:=</span>&nbsp;<span class="ident" id="3542309"><a href="/path/filepath/match.go.html#3543945">matchChunk</a></span><span class="op" id="3542319">(</span><span class="ident" id="3542320"><a href="/path/filepath/match.go.html#3542047">chunk</a></span><span class="op" id="3542325">,</span>&nbsp;<span class="ident" id="3542327"><a href="/path/filepath/match.go.html#3541951">name</a></span><span class="op" id="3542331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3542335">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3542400">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3542470">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542490">if</span>&nbsp;<span class="ident" id="3542493"><a href="/path/filepath/match.go.html#3542298">ok</a></span>&nbsp;<span class="op" id="3542496">&amp;&amp;</span>&nbsp;<span class="op" id="3542499">(</span><span class="builtinfunc" id="3542500">len</span><span class="op" id="3542503">(</span><span class="ident" id="3542504"><a href="/path/filepath/match.go.html#3542295">t</a></span><span class="op" id="3542505">)</span>&nbsp;<span class="op" id="3542507">==</span>&nbsp;<span class="num" id="3542510">0</span>&nbsp;<span class="op" id="3542512">||</span>&nbsp;<span class="builtinfunc" id="3542515">len</span><span class="op" id="3542518">(</span><span class="ident" id="3542519"><a href="/path/filepath/match.go.html#3541942">pattern</a></span><span class="op" id="3542526">)</span>&nbsp;<span class="op" id="3542528">&gt;</span>&nbsp;<span class="num" id="3542530">0</span><span class="op" id="3542531">)</span>&nbsp;<span class="op" id="3542533">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542538"><a href="/path/filepath/match.go.html#3541951">name</a></span>&nbsp;<span class="op" id="3542543">=</span>&nbsp;<span class="ident" id="3542545"><a href="/path/filepath/match.go.html#3542295">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542550">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542565">if</span>&nbsp;<span class="ident" id="3542568"><a href="/path/filepath/match.go.html#3542302">err</a></span>&nbsp;<span class="op" id="3542572">!=</span>&nbsp;<span class="ident" id="3542575">nil</span>&nbsp;<span class="op" id="3542579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542584">return</span>&nbsp;<span class="builtintype" id="3542591">false</span><span class="op" id="3542596">,</span>&nbsp;<span class="ident" id="3542598"><a href="/path/filepath/match.go.html#3542302">err</a></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542608">if</span>&nbsp;<span class="ident" id="3542611"><a href="/path/filepath/match.go.html#3542031">star</a></span>&nbsp;<span class="op" id="3542616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3542621">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3542662">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542683">for</span>&nbsp;<span class="ident" id="3542687">i</span>&nbsp;<span class="op" id="3542689">:=</span>&nbsp;<span class="num" id="3542692">0</span><span class="op" id="3542693">;</span>&nbsp;<span class="ident" id="3542695"><a href="/path/filepath/match.go.html#3542687">i</a></span>&nbsp;<span class="op" id="3542697">&lt;</span>&nbsp;<span class="builtinfunc" id="3542699">len</span><span class="op" id="3542702">(</span><span class="ident" id="3542703"><a href="/path/filepath/match.go.html#3541951">name</a></span><span class="op" id="3542707">)</span>&nbsp;<span class="op" id="3542709">&amp;&amp;</span>&nbsp;<span class="ident" id="3542712"><a href="/path/filepath/match.go.html#3541951">name</a></span><span class="op" id="3542716">[</span><span class="ident" id="3542717"><a href="/path/filepath/match.go.html#3542687">i</a></span><span class="op" id="3542718">]</span>&nbsp;<span class="op" id="3542720">!=</span>&nbsp;<span class="ident" id="3542723"><a href="/path/filepath/path.go.html#3549014">Separator</a></span><span class="op" id="3542732">;</span>&nbsp;<span class="ident" id="3542734"><a href="/path/filepath/match.go.html#3542687">i</a></span><span class="op" id="3542735">++</span>&nbsp;<span class="op" id="3542738">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542744">t</span><span class="op" id="3542745">,</span>&nbsp;<span class="ident" id="3542747">ok</span><span class="op" id="3542749">,</span>&nbsp;<span class="ident" id="3542751">err</span>&nbsp;<span class="op" id="3542755">:=</span>&nbsp;<span class="ident" id="3542758"><a href="/path/filepath/match.go.html#3543945">matchChunk</a></span><span class="op" id="3542768">(</span><span class="ident" id="3542769"><a href="/path/filepath/match.go.html#3542047">chunk</a></span><span class="op" id="3542774">,</span>&nbsp;<span class="ident" id="3542776"><a href="/path/filepath/match.go.html#3541951">name</a></span><span class="op" id="3542780">[</span><span class="ident" id="3542781"><a href="/path/filepath/match.go.html#3542687">i</a></span><span class="op" id="3542782">+</span><span class="num" id="3542783">1</span><span class="op" id="3542784">:</span><span class="op" id="3542785">]</span><span class="op" id="3542786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542792">if</span>&nbsp;<span class="ident" id="3542795"><a href="/path/filepath/match.go.html#3542747">ok</a></span>&nbsp;<span class="op" id="3542798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3542805">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542870">if</span>&nbsp;<span class="builtinfunc" id="3542873">len</span><span class="op" id="3542876">(</span><span class="ident" id="3542877"><a href="/path/filepath/match.go.html#3541942">pattern</a></span><span class="op" id="3542884">)</span>&nbsp;<span class="op" id="3542886">==</span>&nbsp;<span class="num" id="3542889">0</span>&nbsp;<span class="op" id="3542891">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3542894">len</span><span class="op" id="3542897">(</span><span class="ident" id="3542898"><a href="/path/filepath/match.go.html#3542744">t</a></span><span class="op" id="3542899">)</span>&nbsp;<span class="op" id="3542901">&gt;</span>&nbsp;<span class="num" id="3542903">0</span>&nbsp;<span class="op" id="3542905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542913">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3542934"><a href="/path/filepath/match.go.html#3541951">name</a></span>&nbsp;<span class="op" id="3542939">=</span>&nbsp;<span class="ident" id="3542941"><a href="/path/filepath/match.go.html#3542744">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542948">continue</span>&nbsp;<span class="ident" id="3542957">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3542969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542975">if</span>&nbsp;<span class="ident" id="3542978"><a href="/path/filepath/match.go.html#3542751">err</a></span>&nbsp;<span class="op" id="3542982">!=</span>&nbsp;<span class="ident" id="3542985">nil</span>&nbsp;<span class="op" id="3542989">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3542996">return</span>&nbsp;<span class="builtintype" id="3543003">false</span><span class="op" id="3543008">,</span>&nbsp;<span class="ident" id="3543010"><a href="/path/filepath/match.go.html#3542751">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543031">return</span>&nbsp;<span class="builtintype" id="3543038">false</span><span class="op" id="3543043">,</span>&nbsp;<span class="ident" id="3543045">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543053">return</span>&nbsp;<span class="builtinfunc" id="3543060">len</span><span class="op" id="3543063">(</span><span class="ident" id="3543064"><a href="/path/filepath/match.go.html#3541951">name</a></span><span class="op" id="3543068">)</span>&nbsp;<span class="op" id="3543070">==</span>&nbsp;<span class="num" id="3543073">0</span><span class="op" id="3543074">,</span>&nbsp;<span class="ident" id="3543076">nil</span><br>
<span class="lineno"></span><span class="op" id="3543080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3543083">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="3543157">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="3543189">func</span>&nbsp;<span class="ident" id="3543194">scanChunk</span><span class="op" id="3543203">(</span><span class="ident" id="3543204">pattern</span>&nbsp;<span class="builtintype" id="3543212">string</span><span class="op" id="3543218">)</span>&nbsp;<span class="op" id="3543220">(</span><span class="ident" id="3543221">star</span>&nbsp;<span class="builtintype" id="3543226">bool</span><span class="op" id="3543230">,</span>&nbsp;<span class="ident" id="3543232">chunk</span><span class="op" id="3543237">,</span>&nbsp;<span class="ident" id="3543239">rest</span>&nbsp;<span class="builtintype" id="3543244">string</span><span class="op" id="3543250">)</span>&nbsp;<span class="op" id="3543252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543255">for</span>&nbsp;<span class="builtinfunc" id="3543259">len</span><span class="op" id="3543262">(</span><span class="ident" id="3543263"><a href="/path/filepath/match.go.html#3543204">pattern</a></span><span class="op" id="3543270">)</span>&nbsp;<span class="op" id="3543272">&gt;</span>&nbsp;<span class="num" id="3543274">0</span>&nbsp;<span class="op" id="3543276">&amp;&amp;</span>&nbsp;<span class="ident" id="3543279"><a href="/path/filepath/match.go.html#3543204">pattern</a></span><span class="op" id="3543286">[</span><span class="num" id="3543287">0</span><span class="op" id="3543288">]</span>&nbsp;<span class="op" id="3543290">==</span>&nbsp;<span class="string" id="3543293">&#39;*&#39;</span>&nbsp;<span class="op" id="3543297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543301"><a href="/path/filepath/match.go.html#3543204">pattern</a></span>&nbsp;<span class="op" id="3543309">=</span>&nbsp;<span class="ident" id="3543311"><a href="/path/filepath/match.go.html#3543204">pattern</a></span><span class="op" id="3543318">[</span><span class="num" id="3543319">1</span><span class="op" id="3543320">:</span><span class="op" id="3543321">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543325"><a href="/path/filepath/match.go.html#3543221">star</a></span>&nbsp;<span class="op" id="3543330">=</span>&nbsp;<span class="builtintype" id="3543332">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543341">inrange</span>&nbsp;<span class="op" id="3543349">:=</span>&nbsp;<span class="builtintype" id="3543352">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543359">var</span>&nbsp;<span class="ident" id="3543363">i</span>&nbsp;<span class="builtintype" id="3543365">int</span><br>
<span class="lineno"></span><span class="ident" id="3543369">Scan</span><span class="op" id="3543373">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543376">for</span>&nbsp;<span class="ident" id="3543380"><a href="/path/filepath/match.go.html#3543363">i</a></span>&nbsp;<span class="op" id="3543382">=</span>&nbsp;<span class="num" id="3543384">0</span><span class="op" id="3543385">;</span>&nbsp;<span class="ident" id="3543387"><a href="/path/filepath/match.go.html#3543363">i</a></span>&nbsp;<span class="op" id="3543389">&lt;</span>&nbsp;<span class="builtinfunc" id="3543391">len</span><span class="op" id="3543394">(</span><span class="ident" id="3543395"><a href="/path/filepath/match.go.html#3543204">pattern</a></span><span class="op" id="3543402">)</span><span class="op" id="3543403">;</span>&nbsp;<span class="ident" id="3543405"><a href="/path/filepath/match.go.html#3543363">i</a></span><span class="op" id="3543406">++</span>&nbsp;<span class="op" id="3543409">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543413">switch</span>&nbsp;<span class="ident" id="3543420"><a href="/path/filepath/match.go.html#3543204">pattern</a></span><span class="op" id="3543427">[</span><span class="ident" id="3543428"><a href="/path/filepath/match.go.html#3543363">i</a></span><span class="op" id="3543429">]</span>&nbsp;<span class="op" id="3543431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543435">case</span>&nbsp;<span class="string" id="3543440">&#39;\\&#39;</span><span class="op" id="3543444">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543449">if</span>&nbsp;<span class="ident" id="3543452"><a href="/path/filepath/match.go.html#3540900">runtime</a></span><span class="op" id="3543459">.</span><span class="ident" id="3543460">GOOS</span>&nbsp;<span class="op" id="3543465">!=</span>&nbsp;<span class="string" id="3543468">&#34;windows&#34;</span>&nbsp;<span class="op" id="3543478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3543484">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543539">if</span>&nbsp;<span class="ident" id="3543542"><a href="/path/filepath/match.go.html#3543363">i</a></span><span class="op" id="3543543">+</span><span class="num" id="3543544">1</span>&nbsp;<span class="op" id="3543546">&lt;</span>&nbsp;<span class="builtinfunc" id="3543548">len</span><span class="op" id="3543551">(</span><span class="ident" id="3543552"><a href="/path/filepath/match.go.html#3543204">pattern</a></span><span class="op" id="3543559">)</span>&nbsp;<span class="op" id="3543561">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543568"><a href="/path/filepath/match.go.html#3543363">i</a></span><span class="op" id="3543569">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543585">case</span>&nbsp;<span class="string" id="3543590">&#39;[&#39;</span><span class="op" id="3543593">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543598"><a href="/path/filepath/match.go.html#3543341">inrange</a></span>&nbsp;<span class="op" id="3543606">=</span>&nbsp;<span class="builtintype" id="3543608">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543615">case</span>&nbsp;<span class="string" id="3543620">&#39;]&#39;</span><span class="op" id="3543623">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3543628"><a href="/path/filepath/match.go.html#3543341">inrange</a></span>&nbsp;<span class="op" id="3543636">=</span>&nbsp;<span class="builtintype" id="3543638">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543646">case</span>&nbsp;<span class="string" id="3543651">&#39;*&#39;</span><span class="op" id="3543654">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543659">if</span>&nbsp;<span class="op" id="3543662">!</span><span class="ident" id="3543663"><a href="/path/filepath/match.go.html#3543341">inrange</a></span>&nbsp;<span class="op" id="3543671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543677">break</span>&nbsp;<span class="ident" id="3543683">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3543698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3543701">return</span>&nbsp;<span class="ident" id="3543708"><a href="/path/filepath/match.go.html#3543221">star</a></span><span class="op" id="3543712">,</span>&nbsp;<span class="ident" id="3543714"><a href="/path/filepath/match.go.html#3543204">pattern</a></span><span class="op" id="3543721">[</span><span class="num" id="3543722">0</span><span class="op" id="3543723">:</span><span class="ident" id="3543724"><a href="/path/filepath/match.go.html#3543363">i</a></span><span class="op" id="3543725">]</span><span class="op" id="3543726">,</span>&nbsp;<span class="ident" id="3543728"><a href="/path/filepath/match.go.html#3543204">pattern</a></span><span class="op" id="3543735">[</span><span class="ident" id="3543736"><a href="/path/filepath/match.go.html#3543363">i</a></span><span class="op" id="3543737">:</span><span class="op" id="3543738">]</span><br>
<span class="lineno"></span><span class="op" id="3543740">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3543743">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3543806">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="3543865">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3543940">func</span>&nbsp;<span class="ident" id="3543945">matchChunk</span><span class="op" id="3543955">(</span><span class="ident" id="3543956">chunk</span><span class="op" id="3543961">,</span>&nbsp;<span class="ident" id="3543963">s</span>&nbsp;<span class="builtintype" id="3543965">string</span><span class="op" id="3543971">)</span>&nbsp;<span class="op" id="3543973">(</span><span class="ident" id="3543974">rest</span>&nbsp;<span class="builtintype" id="3543979">string</span><span class="op" id="3543985">,</span>&nbsp;<span class="ident" id="3543987">ok</span>&nbsp;<span class="builtintype" id="3543990">bool</span><span class="op" id="3543994">,</span>&nbsp;<span class="ident" id="3543996">err</span>&nbsp;<span class="builtintype" id="3544000">error</span><span class="op" id="3544005">)</span>&nbsp;<span class="op" id="3544007">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544010">for</span>&nbsp;<span class="builtinfunc" id="3544014">len</span><span class="op" id="3544017">(</span><span class="ident" id="3544018"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544023">)</span>&nbsp;<span class="op" id="3544025">&gt;</span>&nbsp;<span class="num" id="3544027">0</span>&nbsp;<span class="op" id="3544029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544033">if</span>&nbsp;<span class="builtinfunc" id="3544036">len</span><span class="op" id="3544039">(</span><span class="ident" id="3544040"><a href="/path/filepath/match.go.html#3543963">s</a></span><span class="op" id="3544041">)</span>&nbsp;<span class="op" id="3544043">==</span>&nbsp;<span class="num" id="3544046">0</span>&nbsp;<span class="op" id="3544048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544053">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544066">switch</span>&nbsp;<span class="ident" id="3544073"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544078">[</span><span class="num" id="3544079">0</span><span class="op" id="3544080">]</span>&nbsp;<span class="op" id="3544082">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544086">case</span>&nbsp;<span class="string" id="3544091">&#39;[&#39;</span><span class="op" id="3544094">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3544099">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544121">r</span><span class="op" id="3544122">,</span>&nbsp;<span class="ident" id="3544124">n</span>&nbsp;<span class="op" id="3544126">:=</span>&nbsp;<span class="ident" id="3544129"><a href="/path/filepath/match.go.html#3540930">utf8</a></span><span class="op" id="3544133">.</span><span class="ident" id="3544134">DecodeRuneInString</span><span class="op" id="3544152">(</span><span class="ident" id="3544153"><a href="/path/filepath/match.go.html#3543963">s</a></span><span class="op" id="3544154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544159"><a href="/path/filepath/match.go.html#3543963">s</a></span>&nbsp;<span class="op" id="3544161">=</span>&nbsp;<span class="ident" id="3544163"><a href="/path/filepath/match.go.html#3543963">s</a></span><span class="op" id="3544164">[</span><span class="ident" id="3544165"><a href="/path/filepath/match.go.html#3544124">n</a></span><span class="op" id="3544166">:</span><span class="op" id="3544167">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544172"><a href="/path/filepath/match.go.html#3543956">chunk</a></span>&nbsp;<span class="op" id="3544178">=</span>&nbsp;<span class="ident" id="3544180"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544185">[</span><span class="num" id="3544186">1</span><span class="op" id="3544187">:</span><span class="op" id="3544188">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3544193">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3544254">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544300">if</span>&nbsp;<span class="builtinfunc" id="3544303">len</span><span class="op" id="3544306">(</span><span class="ident" id="3544307"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544312">)</span>&nbsp;<span class="op" id="3544314">==</span>&nbsp;<span class="num" id="3544317">0</span>&nbsp;<span class="op" id="3544319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544325"><a href="/path/filepath/match.go.html#3543996">err</a></span>&nbsp;<span class="op" id="3544329">=</span>&nbsp;<span class="ident" id="3544331"><a href="/path/filepath/match.go.html#3541013">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544349">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3544364">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544387">negated</span>&nbsp;<span class="op" id="3544395">:=</span>&nbsp;<span class="ident" id="3544398"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544403">[</span><span class="num" id="3544404">0</span><span class="op" id="3544405">]</span>&nbsp;<span class="op" id="3544407">==</span>&nbsp;<span class="string" id="3544410">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544417">if</span>&nbsp;<span class="ident" id="3544420"><a href="/path/filepath/match.go.html#3544387">negated</a></span>&nbsp;<span class="op" id="3544428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544434"><a href="/path/filepath/match.go.html#3543956">chunk</a></span>&nbsp;<span class="op" id="3544440">=</span>&nbsp;<span class="ident" id="3544442"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544447">[</span><span class="num" id="3544448">1</span><span class="op" id="3544449">:</span><span class="op" id="3544450">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3544460">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544483">match</span>&nbsp;<span class="op" id="3544489">:=</span>&nbsp;<span class="builtintype" id="3544492">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544501">nrange</span>&nbsp;<span class="op" id="3544508">:=</span>&nbsp;<span class="num" id="3544511">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544516">for</span>&nbsp;<span class="op" id="3544520">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544526">if</span>&nbsp;<span class="builtinfunc" id="3544529">len</span><span class="op" id="3544532">(</span><span class="ident" id="3544533"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544538">)</span>&nbsp;<span class="op" id="3544540">&gt;</span>&nbsp;<span class="num" id="3544542">0</span>&nbsp;<span class="op" id="3544544">&amp;&amp;</span>&nbsp;<span class="ident" id="3544547"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544552">[</span><span class="num" id="3544553">0</span><span class="op" id="3544554">]</span>&nbsp;<span class="op" id="3544556">==</span>&nbsp;<span class="string" id="3544559">&#39;]&#39;</span>&nbsp;<span class="op" id="3544563">&amp;&amp;</span>&nbsp;<span class="ident" id="3544566"><a href="/path/filepath/match.go.html#3544501">nrange</a></span>&nbsp;<span class="op" id="3544573">&gt;</span>&nbsp;<span class="num" id="3544575">0</span>&nbsp;<span class="op" id="3544577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544584"><a href="/path/filepath/match.go.html#3543956">chunk</a></span>&nbsp;<span class="op" id="3544590">=</span>&nbsp;<span class="ident" id="3544592"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544597">[</span><span class="num" id="3544598">1</span><span class="op" id="3544599">:</span><span class="op" id="3544600">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544607">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544623">var</span>&nbsp;<span class="ident" id="3544627">lo</span><span class="op" id="3544629">,</span>&nbsp;<span class="ident" id="3544631">hi</span>&nbsp;<span class="builtintype" id="3544634">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544643">if</span>&nbsp;<span class="ident" id="3544646"><a href="/path/filepath/match.go.html#3544627">lo</a></span><span class="op" id="3544648">,</span>&nbsp;<span class="ident" id="3544650"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544655">,</span>&nbsp;<span class="ident" id="3544657"><a href="/path/filepath/match.go.html#3543996">err</a></span>&nbsp;<span class="op" id="3544661">=</span>&nbsp;<span class="ident" id="3544663"><a href="/path/filepath/match.go.html#3545427">getEsc</a></span><span class="op" id="3544669">(</span><span class="ident" id="3544670"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544675">)</span><span class="op" id="3544676">;</span>&nbsp;<span class="ident" id="3544678"><a href="/path/filepath/match.go.html#3543996">err</a></span>&nbsp;<span class="op" id="3544682">!=</span>&nbsp;<span class="ident" id="3544685">nil</span>&nbsp;<span class="op" id="3544689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544696">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544713"><a href="/path/filepath/match.go.html#3544631">hi</a></span>&nbsp;<span class="op" id="3544716">=</span>&nbsp;<span class="ident" id="3544718"><a href="/path/filepath/match.go.html#3544627">lo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544725">if</span>&nbsp;<span class="ident" id="3544728"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544733">[</span><span class="num" id="3544734">0</span><span class="op" id="3544735">]</span>&nbsp;<span class="op" id="3544737">==</span>&nbsp;<span class="string" id="3544740">&#39;-&#39;</span>&nbsp;<span class="op" id="3544744">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544751">if</span>&nbsp;<span class="ident" id="3544754"><a href="/path/filepath/match.go.html#3544631">hi</a></span><span class="op" id="3544756">,</span>&nbsp;<span class="ident" id="3544758"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544763">,</span>&nbsp;<span class="ident" id="3544765"><a href="/path/filepath/match.go.html#3543996">err</a></span>&nbsp;<span class="op" id="3544769">=</span>&nbsp;<span class="ident" id="3544771"><a href="/path/filepath/match.go.html#3545427">getEsc</a></span><span class="op" id="3544777">(</span><span class="ident" id="3544778"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3544783">[</span><span class="num" id="3544784">1</span><span class="op" id="3544785">:</span><span class="op" id="3544786">]</span><span class="op" id="3544787">)</span><span class="op" id="3544788">;</span>&nbsp;<span class="ident" id="3544790"><a href="/path/filepath/match.go.html#3543996">err</a></span>&nbsp;<span class="op" id="3544794">!=</span>&nbsp;<span class="ident" id="3544797">nil</span>&nbsp;<span class="op" id="3544801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544809">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544833">if</span>&nbsp;<span class="ident" id="3544836"><a href="/path/filepath/match.go.html#3544627">lo</a></span>&nbsp;<span class="op" id="3544839">&lt;=</span>&nbsp;<span class="ident" id="3544842"><a href="/path/filepath/match.go.html#3544121">r</a></span>&nbsp;<span class="op" id="3544844">&amp;&amp;</span>&nbsp;<span class="ident" id="3544847"><a href="/path/filepath/match.go.html#3544121">r</a></span>&nbsp;<span class="op" id="3544849">&lt;=</span>&nbsp;<span class="ident" id="3544852"><a href="/path/filepath/match.go.html#3544631">hi</a></span>&nbsp;<span class="op" id="3544855">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544862"><a href="/path/filepath/match.go.html#3544483">match</a></span>&nbsp;<span class="op" id="3544868">=</span>&nbsp;<span class="builtintype" id="3544870">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544885"><a href="/path/filepath/match.go.html#3544501">nrange</a></span><span class="op" id="3544891">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544902">if</span>&nbsp;<span class="ident" id="3544905"><a href="/path/filepath/match.go.html#3544483">match</a></span>&nbsp;<span class="op" id="3544911">==</span>&nbsp;<span class="ident" id="3544914"><a href="/path/filepath/match.go.html#3544387">negated</a></span>&nbsp;<span class="op" id="3544922">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544928">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544943">case</span>&nbsp;<span class="string" id="3544948">&#39;?&#39;</span><span class="op" id="3544951">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544956">if</span>&nbsp;<span class="ident" id="3544959"><a href="/path/filepath/match.go.html#3543963">s</a></span><span class="op" id="3544960">[</span><span class="num" id="3544961">0</span><span class="op" id="3544962">]</span>&nbsp;<span class="op" id="3544964">==</span>&nbsp;<span class="ident" id="3544967"><a href="/path/filepath/path.go.html#3549014">Separator</a></span>&nbsp;<span class="op" id="3544977">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3544983">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3544993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3544998">_</span><span class="op" id="3544999">,</span>&nbsp;<span class="ident" id="3545001">n</span>&nbsp;<span class="op" id="3545003">:=</span>&nbsp;<span class="ident" id="3545006"><a href="/path/filepath/match.go.html#3540930">utf8</a></span><span class="op" id="3545010">.</span><span class="ident" id="3545011">DecodeRuneInString</span><span class="op" id="3545029">(</span><span class="ident" id="3545030"><a href="/path/filepath/match.go.html#3543963">s</a></span><span class="op" id="3545031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545036"><a href="/path/filepath/match.go.html#3543963">s</a></span>&nbsp;<span class="op" id="3545038">=</span>&nbsp;<span class="ident" id="3545040"><a href="/path/filepath/match.go.html#3543963">s</a></span><span class="op" id="3545041">[</span><span class="ident" id="3545042"><a href="/path/filepath/match.go.html#3545001">n</a></span><span class="op" id="3545043">:</span><span class="op" id="3545044">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545049"><a href="/path/filepath/match.go.html#3543956">chunk</a></span>&nbsp;<span class="op" id="3545055">=</span>&nbsp;<span class="ident" id="3545057"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3545062">[</span><span class="num" id="3545063">1</span><span class="op" id="3545064">:</span><span class="op" id="3545065">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545070">case</span>&nbsp;<span class="string" id="3545075">&#39;\\&#39;</span><span class="op" id="3545079">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545084">if</span>&nbsp;<span class="ident" id="3545087"><a href="/path/filepath/match.go.html#3540900">runtime</a></span><span class="op" id="3545094">.</span><span class="ident" id="3545095">GOOS</span>&nbsp;<span class="op" id="3545100">!=</span>&nbsp;<span class="string" id="3545103">&#34;windows&#34;</span>&nbsp;<span class="op" id="3545113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545119"><a href="/path/filepath/match.go.html#3543956">chunk</a></span>&nbsp;<span class="op" id="3545125">=</span>&nbsp;<span class="ident" id="3545127"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3545132">[</span><span class="num" id="3545133">1</span><span class="op" id="3545134">:</span><span class="op" id="3545135">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545141">if</span>&nbsp;<span class="builtinfunc" id="3545144">len</span><span class="op" id="3545147">(</span><span class="ident" id="3545148"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3545153">)</span>&nbsp;<span class="op" id="3545155">==</span>&nbsp;<span class="num" id="3545158">0</span>&nbsp;<span class="op" id="3545160">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545167"><a href="/path/filepath/match.go.html#3543996">err</a></span>&nbsp;<span class="op" id="3545171">=</span>&nbsp;<span class="ident" id="3545173"><a href="/path/filepath/match.go.html#3541013">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545192">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3545203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3545208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545213">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545228">default</span><span class="op" id="3545235">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545240">if</span>&nbsp;<span class="ident" id="3545243"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3545248">[</span><span class="num" id="3545249">0</span><span class="op" id="3545250">]</span>&nbsp;<span class="op" id="3545252">!=</span>&nbsp;<span class="ident" id="3545255"><a href="/path/filepath/match.go.html#3543963">s</a></span><span class="op" id="3545256">[</span><span class="num" id="3545257">0</span><span class="op" id="3545258">]</span>&nbsp;<span class="op" id="3545260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545266">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3545276">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545281"><a href="/path/filepath/match.go.html#3543963">s</a></span>&nbsp;<span class="op" id="3545283">=</span>&nbsp;<span class="ident" id="3545285"><a href="/path/filepath/match.go.html#3543963">s</a></span><span class="op" id="3545286">[</span><span class="num" id="3545287">1</span><span class="op" id="3545288">:</span><span class="op" id="3545289">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545294"><a href="/path/filepath/match.go.html#3543956">chunk</a></span>&nbsp;<span class="op" id="3545300">=</span>&nbsp;<span class="ident" id="3545302"><a href="/path/filepath/match.go.html#3543956">chunk</a></span><span class="op" id="3545307">[</span><span class="num" id="3545308">1</span><span class="op" id="3545309">:</span><span class="op" id="3545310">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3545314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3545317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545320">return</span>&nbsp;<span class="ident" id="3545327"><a href="/path/filepath/match.go.html#3543963">s</a></span><span class="op" id="3545328">,</span>&nbsp;<span class="builtintype" id="3545330">true</span><span class="op" id="3545334">,</span>&nbsp;<span class="ident" id="3545336">nil</span><br>
<span class="lineno">200</span><span class="op" id="3545340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3545343">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3545422">func</span>&nbsp;<span class="ident" id="3545427">getEsc</span><span class="op" id="3545433">(</span><span class="ident" id="3545434">chunk</span>&nbsp;<span class="builtintype" id="3545440">string</span><span class="op" id="3545446">)</span>&nbsp;<span class="op" id="3545448">(</span><span class="ident" id="3545449">r</span>&nbsp;<span class="builtintype" id="3545451">rune</span><span class="op" id="3545455">,</span>&nbsp;<span class="ident" id="3545457">nchunk</span>&nbsp;<span class="builtintype" id="3545464">string</span><span class="op" id="3545470">,</span>&nbsp;<span class="ident" id="3545472">err</span>&nbsp;<span class="builtintype" id="3545476">error</span><span class="op" id="3545481">)</span>&nbsp;<span class="op" id="3545483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545486">if</span>&nbsp;<span class="builtinfunc" id="3545489">len</span><span class="op" id="3545492">(</span><span class="ident" id="3545493"><a href="/path/filepath/match.go.html#3545434">chunk</a></span><span class="op" id="3545498">)</span>&nbsp;<span class="op" id="3545500">==</span>&nbsp;<span class="num" id="3545503">0</span>&nbsp;<span class="op" id="3545505">||</span>&nbsp;<span class="ident" id="3545508"><a href="/path/filepath/match.go.html#3545434">chunk</a></span><span class="op" id="3545513">[</span><span class="num" id="3545514">0</span><span class="op" id="3545515">]</span>&nbsp;<span class="op" id="3545517">==</span>&nbsp;<span class="string" id="3545520">&#39;-&#39;</span>&nbsp;<span class="op" id="3545524">||</span>&nbsp;<span class="ident" id="3545527"><a href="/path/filepath/match.go.html#3545434">chunk</a></span><span class="op" id="3545532">[</span><span class="num" id="3545533">0</span><span class="op" id="3545534">]</span>&nbsp;<span class="op" id="3545536">==</span>&nbsp;<span class="string" id="3545539">&#39;]&#39;</span>&nbsp;<span class="op" id="3545543">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545547"><a href="/path/filepath/match.go.html#3545472">err</a></span>&nbsp;<span class="op" id="3545551">=</span>&nbsp;<span class="ident" id="3545553"><a href="/path/filepath/match.go.html#3541013">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545569">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3545577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545580">if</span>&nbsp;<span class="ident" id="3545583"><a href="/path/filepath/match.go.html#3545434">chunk</a></span><span class="op" id="3545588">[</span><span class="num" id="3545589">0</span><span class="op" id="3545590">]</span>&nbsp;<span class="op" id="3545592">==</span>&nbsp;<span class="string" id="3545595">&#39;\\&#39;</span>&nbsp;<span class="op" id="3545600">&amp;&amp;</span>&nbsp;<span class="ident" id="3545603"><a href="/path/filepath/match.go.html#3540900">runtime</a></span><span class="op" id="3545610">.</span><span class="ident" id="3545611">GOOS</span>&nbsp;<span class="op" id="3545616">!=</span>&nbsp;<span class="string" id="3545619">&#34;windows&#34;</span>&nbsp;<span class="op" id="3545629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545633"><a href="/path/filepath/match.go.html#3545434">chunk</a></span>&nbsp;<span class="op" id="3545639">=</span>&nbsp;<span class="ident" id="3545641"><a href="/path/filepath/match.go.html#3545434">chunk</a></span><span class="op" id="3545646">[</span><span class="num" id="3545647">1</span><span class="op" id="3545648">:</span><span class="op" id="3545649">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545653">if</span>&nbsp;<span class="builtinfunc" id="3545656">len</span><span class="op" id="3545659">(</span><span class="ident" id="3545660"><a href="/path/filepath/match.go.html#3545434">chunk</a></span><span class="op" id="3545665">)</span>&nbsp;<span class="op" id="3545667">==</span>&nbsp;<span class="num" id="3545670">0</span>&nbsp;<span class="op" id="3545672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545677"><a href="/path/filepath/match.go.html#3545472">err</a></span>&nbsp;<span class="op" id="3545681">=</span>&nbsp;<span class="ident" id="3545683"><a href="/path/filepath/match.go.html#3541013">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545700">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3545709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3545712">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545715"><a href="/path/filepath/match.go.html#3545449">r</a></span><span class="op" id="3545716">,</span>&nbsp;<span class="ident" id="3545718">n</span>&nbsp;<span class="op" id="3545720">:=</span>&nbsp;<span class="ident" id="3545723"><a href="/path/filepath/match.go.html#3540930">utf8</a></span><span class="op" id="3545727">.</span><span class="ident" id="3545728">DecodeRuneInString</span><span class="op" id="3545746">(</span><span class="ident" id="3545747"><a href="/path/filepath/match.go.html#3545434">chunk</a></span><span class="op" id="3545752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545755">if</span>&nbsp;<span class="ident" id="3545758"><a href="/path/filepath/match.go.html#3545449">r</a></span>&nbsp;<span class="op" id="3545760">==</span>&nbsp;<span class="ident" id="3545763"><a href="/path/filepath/match.go.html#3540930">utf8</a></span><span class="op" id="3545767">.</span><span class="ident" id="3545768">RuneError</span>&nbsp;<span class="op" id="3545778">&amp;&amp;</span>&nbsp;<span class="ident" id="3545781"><a href="/path/filepath/match.go.html#3545718">n</a></span>&nbsp;<span class="op" id="3545783">==</span>&nbsp;<span class="num" id="3545786">1</span>&nbsp;<span class="op" id="3545788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545792"><a href="/path/filepath/match.go.html#3545472">err</a></span>&nbsp;<span class="op" id="3545796">=</span>&nbsp;<span class="ident" id="3545798"><a href="/path/filepath/match.go.html#3541013">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3545813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545816"><a href="/path/filepath/match.go.html#3545457">nchunk</a></span>&nbsp;<span class="op" id="3545823">=</span>&nbsp;<span class="ident" id="3545825"><a href="/path/filepath/match.go.html#3545434">chunk</a></span><span class="op" id="3545830">[</span><span class="ident" id="3545831"><a href="/path/filepath/match.go.html#3545718">n</a></span><span class="op" id="3545832">:</span><span class="op" id="3545833">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545836">if</span>&nbsp;<span class="builtinfunc" id="3545839">len</span><span class="op" id="3545842">(</span><span class="ident" id="3545843"><a href="/path/filepath/match.go.html#3545457">nchunk</a></span><span class="op" id="3545849">)</span>&nbsp;<span class="op" id="3545851">==</span>&nbsp;<span class="num" id="3545854">0</span>&nbsp;<span class="op" id="3545856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3545860"><a href="/path/filepath/match.go.html#3545472">err</a></span>&nbsp;<span class="op" id="3545864">=</span>&nbsp;<span class="ident" id="3545866"><a href="/path/filepath/match.go.html#3541013">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3545881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3545884">return</span><br>
<span class="lineno"></span><span class="op" id="3545891">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3545894">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3545957">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="3546025">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3546093">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="3546143">//</span><br>
<span class="lineno"></span><span class="comment" id="3546146">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="3546221">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3546288">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3546305">func</span>&nbsp;<span class="ident" id="3546310">Glob</span><span class="op" id="3546314">(</span><span class="ident" id="3546315">pattern</span>&nbsp;<span class="builtintype" id="3546323">string</span><span class="op" id="3546329">)</span>&nbsp;<span class="op" id="3546331">(</span><span class="ident" id="3546332">matches</span>&nbsp;<span class="op" id="3546340">[</span><span class="op" id="3546341">]</span><span class="builtintype" id="3546342">string</span><span class="op" id="3546348">,</span>&nbsp;<span class="ident" id="3546350">err</span>&nbsp;<span class="builtintype" id="3546354">error</span><span class="op" id="3546359">)</span>&nbsp;<span class="op" id="3546361">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546364">if</span>&nbsp;<span class="op" id="3546367">!</span><span class="ident" id="3546368"><a href="/path/filepath/match.go.html#3547674">hasMeta</a></span><span class="op" id="3546375">(</span><span class="ident" id="3546376"><a href="/path/filepath/match.go.html#3546315">pattern</a></span><span class="op" id="3546383">)</span>&nbsp;<span class="op" id="3546385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546389">if</span>&nbsp;<span class="ident" id="3546392">_</span><span class="op" id="3546393">,</span>&nbsp;<span class="ident" id="3546395"><a href="/path/filepath/match.go.html#3546350">err</a></span>&nbsp;<span class="op" id="3546399">=</span>&nbsp;<span class="ident" id="3546401"><a href="/path/filepath/match.go.html#3540894">os</a></span><span class="op" id="3546403">.</span><span class="ident" id="3546404">Lstat</span><span class="op" id="3546409">(</span><span class="ident" id="3546410"><a href="/path/filepath/match.go.html#3546315">pattern</a></span><span class="op" id="3546417">)</span><span class="op" id="3546418">;</span>&nbsp;<span class="ident" id="3546420"><a href="/path/filepath/match.go.html#3546350">err</a></span>&nbsp;<span class="op" id="3546424">!=</span>&nbsp;<span class="ident" id="3546427">nil</span>&nbsp;<span class="op" id="3546431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546436">return</span>&nbsp;<span class="ident" id="3546443">nil</span><span class="op" id="3546446">,</span>&nbsp;<span class="ident" id="3546448">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3546454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546458">return</span>&nbsp;<span class="op" id="3546465">[</span><span class="op" id="3546466">]</span><span class="builtintype" id="3546467">string</span><span class="op" id="3546473">{</span><span class="ident" id="3546474"><a href="/path/filepath/match.go.html#3546315">pattern</a></span><span class="op" id="3546481">}</span><span class="op" id="3546482">,</span>&nbsp;<span class="ident" id="3546484">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3546489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3546493">dir</span><span class="op" id="3546496">,</span>&nbsp;<span class="ident" id="3546498">file</span>&nbsp;<span class="op" id="3546503">:=</span>&nbsp;<span class="ident" id="3546506"><a href="/path/filepath/path.go.html#3552961">Split</a></span><span class="op" id="3546511">(</span><span class="ident" id="3546512"><a href="/path/filepath/match.go.html#3546315">pattern</a></span><span class="op" id="3546519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546522">switch</span>&nbsp;<span class="ident" id="3546529"><a href="/path/filepath/match.go.html#3546493">dir</a></span>&nbsp;<span class="op" id="3546533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546536">case</span>&nbsp;<span class="string" id="3546541">&#34;&#34;</span><span class="op" id="3546543">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3546547"><a href="/path/filepath/match.go.html#3546493">dir</a></span>&nbsp;<span class="op" id="3546551">=</span>&nbsp;<span class="string" id="3546553">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546558">case</span>&nbsp;<span class="builtintype" id="3546563">string</span><span class="op" id="3546569">(</span><span class="ident" id="3546570"><a href="/path/filepath/path.go.html#3549014">Separator</a></span><span class="op" id="3546579">)</span><span class="op" id="3546580">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3546584">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546596">default</span><span class="op" id="3546603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3546607"><a href="/path/filepath/match.go.html#3546493">dir</a></span>&nbsp;<span class="op" id="3546611">=</span>&nbsp;<span class="ident" id="3546613"><a href="/path/filepath/match.go.html#3546493">dir</a></span><span class="op" id="3546616">[</span><span class="num" id="3546617">0</span>&nbsp;<span class="op" id="3546619">:</span>&nbsp;<span class="builtinfunc" id="3546621">len</span><span class="op" id="3546624">(</span><span class="ident" id="3546625"><a href="/path/filepath/match.go.html#3546493">dir</a></span><span class="op" id="3546628">)</span><span class="op" id="3546629">-</span><span class="num" id="3546630">1</span><span class="op" id="3546631">]</span>&nbsp;<span class="comment" id="3546633">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3546665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546669">if</span>&nbsp;<span class="op" id="3546672">!</span><span class="ident" id="3546673"><a href="/path/filepath/match.go.html#3547674">hasMeta</a></span><span class="op" id="3546680">(</span><span class="ident" id="3546681"><a href="/path/filepath/match.go.html#3546493">dir</a></span><span class="op" id="3546684">)</span>&nbsp;<span class="op" id="3546686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546690">return</span>&nbsp;<span class="ident" id="3546697"><a href="/path/filepath/match.go.html#3547120">glob</a></span><span class="op" id="3546701">(</span><span class="ident" id="3546702"><a href="/path/filepath/match.go.html#3546493">dir</a></span><span class="op" id="3546705">,</span>&nbsp;<span class="ident" id="3546707"><a href="/path/filepath/match.go.html#3546498">file</a></span><span class="op" id="3546711">,</span>&nbsp;<span class="ident" id="3546713">nil</span><span class="op" id="3546716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3546719">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546723">var</span>&nbsp;<span class="ident" id="3546727">m</span>&nbsp;<span class="op" id="3546729">[</span><span class="op" id="3546730">]</span><span class="builtintype" id="3546731">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3546739"><a href="/path/filepath/match.go.html#3546727">m</a></span><span class="op" id="3546740">,</span>&nbsp;<span class="ident" id="3546742"><a href="/path/filepath/match.go.html#3546350">err</a></span>&nbsp;<span class="op" id="3546746">=</span>&nbsp;<span class="ident" id="3546748"><a href="/path/filepath/match.go.html#3546310">Glob</a></span><span class="op" id="3546752">(</span><span class="ident" id="3546753"><a href="/path/filepath/match.go.html#3546493">dir</a></span><span class="op" id="3546756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546759">if</span>&nbsp;<span class="ident" id="3546762"><a href="/path/filepath/match.go.html#3546350">err</a></span>&nbsp;<span class="op" id="3546766">!=</span>&nbsp;<span class="ident" id="3546769">nil</span>&nbsp;<span class="op" id="3546773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546777">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3546785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546788">for</span>&nbsp;<span class="ident" id="3546792">_</span><span class="op" id="3546793">,</span>&nbsp;<span class="ident" id="3546795">d</span>&nbsp;<span class="op" id="3546797">:=</span>&nbsp;<span class="keyword" id="3546800">range</span>&nbsp;<span class="ident" id="3546806"><a href="/path/filepath/match.go.html#3546727">m</a></span>&nbsp;<span class="op" id="3546808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3546812"><a href="/path/filepath/match.go.html#3546332">matches</a></span><span class="op" id="3546819">,</span>&nbsp;<span class="ident" id="3546821"><a href="/path/filepath/match.go.html#3546350">err</a></span>&nbsp;<span class="op" id="3546825">=</span>&nbsp;<span class="ident" id="3546827"><a href="/path/filepath/match.go.html#3547120">glob</a></span><span class="op" id="3546831">(</span><span class="ident" id="3546832"><a href="/path/filepath/match.go.html#3546795">d</a></span><span class="op" id="3546833">,</span>&nbsp;<span class="ident" id="3546835"><a href="/path/filepath/match.go.html#3546498">file</a></span><span class="op" id="3546839">,</span>&nbsp;<span class="ident" id="3546841"><a href="/path/filepath/match.go.html#3546332">matches</a></span><span class="op" id="3546848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546852">if</span>&nbsp;<span class="ident" id="3546855"><a href="/path/filepath/match.go.html#3546350">err</a></span>&nbsp;<span class="op" id="3546859">!=</span>&nbsp;<span class="ident" id="3546862">nil</span>&nbsp;<span class="op" id="3546866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546871">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3546880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3546883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3546886">return</span><br>
<span class="lineno"></span><span class="op" id="3546893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3546896">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3546961">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3547020">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3547080">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3547115">func</span>&nbsp;<span class="ident" id="3547120">glob</span><span class="op" id="3547124">(</span><span class="ident" id="3547125">dir</span><span class="op" id="3547128">,</span>&nbsp;<span class="ident" id="3547130">pattern</span>&nbsp;<span class="builtintype" id="3547138">string</span><span class="op" id="3547144">,</span>&nbsp;<span class="ident" id="3547146">matches</span>&nbsp;<span class="op" id="3547154">[</span><span class="op" id="3547155">]</span><span class="builtintype" id="3547156">string</span><span class="op" id="3547162">)</span>&nbsp;<span class="op" id="3547164">(</span><span class="ident" id="3547165">m</span>&nbsp;<span class="op" id="3547167">[</span><span class="op" id="3547168">]</span><span class="builtintype" id="3547169">string</span><span class="op" id="3547175">,</span>&nbsp;<span class="ident" id="3547177">e</span>&nbsp;<span class="builtintype" id="3547179">error</span><span class="op" id="3547184">)</span>&nbsp;<span class="op" id="3547186">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3547189"><a href="/path/filepath/match.go.html#3547165">m</a></span>&nbsp;<span class="op" id="3547191">=</span>&nbsp;<span class="ident" id="3547193"><a href="/path/filepath/match.go.html#3547146">matches</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3547202">fi</span><span class="op" id="3547204">,</span>&nbsp;<span class="ident" id="3547206">err</span>&nbsp;<span class="op" id="3547210">:=</span>&nbsp;<span class="ident" id="3547213"><a href="/path/filepath/match.go.html#3540894">os</a></span><span class="op" id="3547215">.</span><span class="ident" id="3547216">Stat</span><span class="op" id="3547220">(</span><span class="ident" id="3547221"><a href="/path/filepath/match.go.html#3547125">dir</a></span><span class="op" id="3547224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547227">if</span>&nbsp;<span class="ident" id="3547230"><a href="/path/filepath/match.go.html#3547206">err</a></span>&nbsp;<span class="op" id="3547234">!=</span>&nbsp;<span class="ident" id="3547237">nil</span>&nbsp;<span class="op" id="3547241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547245">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3547253">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547256">if</span>&nbsp;<span class="op" id="3547259">!</span><span class="ident" id="3547260"><a href="/path/filepath/match.go.html#3547202">fi</a></span><span class="op" id="3547262">.</span><span class="ident" id="3547263">IsDir</span><span class="op" id="3547268">(</span><span class="op" id="3547269">)</span>&nbsp;<span class="op" id="3547271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547275">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3547283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3547286">d</span><span class="op" id="3547287">,</span>&nbsp;<span class="ident" id="3547289"><a href="/path/filepath/match.go.html#3547206">err</a></span>&nbsp;<span class="op" id="3547293">:=</span>&nbsp;<span class="ident" id="3547296"><a href="/path/filepath/match.go.html#3540894">os</a></span><span class="op" id="3547298">.</span><span class="ident" id="3547299">Open</span><span class="op" id="3547303">(</span><span class="ident" id="3547304"><a href="/path/filepath/match.go.html#3547125">dir</a></span><span class="op" id="3547307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547310">if</span>&nbsp;<span class="ident" id="3547313"><a href="/path/filepath/match.go.html#3547206">err</a></span>&nbsp;<span class="op" id="3547317">!=</span>&nbsp;<span class="ident" id="3547320">nil</span>&nbsp;<span class="op" id="3547324">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547328">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3547336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547339">defer</span>&nbsp;<span class="ident" id="3547345"><a href="/path/filepath/match.go.html#3547286">d</a></span><span class="op" id="3547346">.</span><span class="ident" id="3547347">Close</span><span class="op" id="3547352">(</span><span class="op" id="3547353">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3547357">names</span><span class="op" id="3547362">,</span>&nbsp;<span class="ident" id="3547364">_</span>&nbsp;<span class="op" id="3547366">:=</span>&nbsp;<span class="ident" id="3547369"><a href="/path/filepath/match.go.html#3547286">d</a></span><span class="op" id="3547370">.</span><span class="ident" id="3547371">Readdirnames</span><span class="op" id="3547383">(</span><span class="op" id="3547384">-</span><span class="num" id="3547385">1</span><span class="op" id="3547386">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3547389"><a href="/path/filepath/match.go.html#3540911">sort</a></span><span class="op" id="3547393">.</span><span class="ident" id="3547394">Strings</span><span class="op" id="3547401">(</span><span class="ident" id="3547402"><a href="/path/filepath/match.go.html#3547357">names</a></span><span class="op" id="3547407">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547411">for</span>&nbsp;<span class="ident" id="3547415">_</span><span class="op" id="3547416">,</span>&nbsp;<span class="ident" id="3547418">n</span>&nbsp;<span class="op" id="3547420">:=</span>&nbsp;<span class="keyword" id="3547423">range</span>&nbsp;<span class="ident" id="3547429"><a href="/path/filepath/match.go.html#3547357">names</a></span>&nbsp;<span class="op" id="3547435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3547439">matched</span><span class="op" id="3547446">,</span>&nbsp;<span class="ident" id="3547448">err</span>&nbsp;<span class="op" id="3547452">:=</span>&nbsp;<span class="ident" id="3547455"><a href="/path/filepath/match.go.html#3541936">Match</a></span><span class="op" id="3547460">(</span><span class="ident" id="3547461"><a href="/path/filepath/match.go.html#3547130">pattern</a></span><span class="op" id="3547468">,</span>&nbsp;<span class="ident" id="3547470"><a href="/path/filepath/match.go.html#3547418">n</a></span><span class="op" id="3547471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547475">if</span>&nbsp;<span class="ident" id="3547478"><a href="/path/filepath/match.go.html#3547448">err</a></span>&nbsp;<span class="op" id="3547482">!=</span>&nbsp;<span class="ident" id="3547485">nil</span>&nbsp;<span class="op" id="3547489">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547494">return</span>&nbsp;<span class="ident" id="3547501"><a href="/path/filepath/match.go.html#3547165">m</a></span><span class="op" id="3547502">,</span>&nbsp;<span class="ident" id="3547504"><a href="/path/filepath/match.go.html#3547448">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3547510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547514">if</span>&nbsp;<span class="ident" id="3547517"><a href="/path/filepath/match.go.html#3547439">matched</a></span>&nbsp;<span class="op" id="3547525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3547530"><a href="/path/filepath/match.go.html#3547165">m</a></span>&nbsp;<span class="op" id="3547532">=</span>&nbsp;<span class="builtinfunc" id="3547534">append</span><span class="op" id="3547540">(</span><span class="ident" id="3547541"><a href="/path/filepath/match.go.html#3547165">m</a></span><span class="op" id="3547542">,</span>&nbsp;<span class="ident" id="3547544"><a href="/path/filepath/path.go.html#3553316">Join</a></span><span class="op" id="3547548">(</span><span class="ident" id="3547549"><a href="/path/filepath/match.go.html#3547125">dir</a></span><span class="op" id="3547552">,</span>&nbsp;<span class="ident" id="3547554"><a href="/path/filepath/match.go.html#3547418">n</a></span><span class="op" id="3547555">)</span><span class="op" id="3547556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3547560">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3547563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547566">return</span><br>
<span class="lineno"></span><span class="op" id="3547573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3547576">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="3547645">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="3547669">func</span>&nbsp;<span class="ident" id="3547674">hasMeta</span><span class="op" id="3547681">(</span><span class="ident" id="3547682">path</span>&nbsp;<span class="builtintype" id="3547687">string</span><span class="op" id="3547693">)</span>&nbsp;<span class="builtintype" id="3547695">bool</span>&nbsp;<span class="op" id="3547700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3547703">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3547768">return</span>&nbsp;<span class="ident" id="3547775"><a href="/path/filepath/match.go.html#3540919">strings</a></span><span class="op" id="3547782">.</span><span class="ident" id="3547783">IndexAny</span><span class="op" id="3547791">(</span><span class="ident" id="3547792"><a href="/path/filepath/match.go.html#3547682">path</a></span><span class="op" id="3547796">,</span>&nbsp;<span class="string" id="3547798">&#34;*?[&#34;</span><span class="op" id="3547803">)</span>&nbsp;<span class="op" id="3547805">&gt;=</span>&nbsp;<span class="num" id="3547808">0</span><br>
<span class="lineno"></span><span class="op" id="3547810">}</span>
</div>
</body>
</html>
