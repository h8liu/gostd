<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7542709">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7542764">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7542818">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7542869">package</span>&nbsp;<span class="ident" id="7542877">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7542882">import</span>&nbsp;<span class="op" id="7542889">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7542892">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7542901">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7542920">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7542936">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7542942">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7542955">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7542961">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7542978">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7542988">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7542999">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7543010">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7543017">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7543020">type</span>&nbsp;<span class="ident" id="7543025">ZipTest</span>&nbsp;<span class="keyword" id="7543033">struct</span>&nbsp;<span class="op" id="7543040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543043">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7543051">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543059">Source</span>&nbsp;&nbsp;<span class="keyword" id="7543067">func</span><span class="op" id="7543071">(</span><span class="op" id="7543072">)</span>&nbsp;<span class="op" id="7543074">(</span><span class="ident" id="7543075">r</span>&nbsp;<span class="ident" id="7543077">io</span><span class="op" id="7543079">.</span><span class="ident" id="7543080">ReaderAt</span><span class="op" id="7543088">,</span>&nbsp;<span class="ident" id="7543090">size</span>&nbsp;<span class="ident" id="7543095">int64</span><span class="op" id="7543100">)</span>&nbsp;<span class="comment" id="7543102">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543155">Comment</span>&nbsp;<span class="builtintype" id="7543163">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543171">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7543179">[</span><span class="op" id="7543180">]</span><span class="ident" id="7543181">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543194">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7543202">error</span>&nbsp;<span class="comment" id="7543208">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="7543258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7543261">type</span>&nbsp;<span class="ident" id="7543266">ZipTestFile</span>&nbsp;<span class="keyword" id="7543278">struct</span>&nbsp;<span class="op" id="7543285">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543288">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7543299">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543307">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7543318">[</span><span class="op" id="7543319">]</span><span class="builtintype" id="7543320">byte</span>&nbsp;<span class="comment" id="7543325">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543376">ContentErr</span>&nbsp;<span class="builtintype" id="7543387">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543394">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7543405">string</span>&nbsp;<span class="comment" id="7543412">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543467">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7543478">string</span>&nbsp;<span class="comment" id="7543485">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7543533">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7543544">os</span><span class="op" id="7543546">.</span><span class="ident" id="7543547">FileMode</span><br>
<span class="lineno"></span><span class="op" id="7543556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7543559">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="7543634">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="7543709">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="7543783">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="7543857">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="7543933">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="7544007">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="7544087">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="7544166">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7544214">var</span>&nbsp;<span class="ident" id="7544218">tests</span>&nbsp;<span class="op" id="7544224">=</span>&nbsp;<span class="op" id="7544226">[</span><span class="op" id="7544227">]</span><span class="ident" id="7544228">ZipTest</span><span class="op" id="7544235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544238">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544242">Name</span><span class="op" id="7544246">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7544251">&#34;test.zip&#34;</span><span class="op" id="7544261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544265">Comment</span><span class="op" id="7544272">:</span>&nbsp;<span class="string" id="7544274">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7544302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544306">File</span><span class="op" id="7544310">:</span>&nbsp;<span class="op" id="7544312">[</span><span class="op" id="7544313">]</span><span class="ident" id="7544314">ZipTestFile</span><span class="op" id="7544325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544336">Name</span><span class="op" id="7544340">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7544345">&#34;test.txt&#34;</span><span class="op" id="7544355">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544361">Content</span><span class="op" id="7544368">:</span>&nbsp;<span class="op" id="7544370">[</span><span class="op" id="7544371">]</span><span class="builtintype" id="7544372">byte</span><span class="op" id="7544376">(</span><span class="string" id="7544377">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7544406">)</span><span class="op" id="7544407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544413">Mtime</span><span class="op" id="7544418">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7544422">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7544441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544447">Mode</span><span class="op" id="7544451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7544456">0644</span><span class="op" id="7544460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544465">}</span><span class="op" id="7544466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544471">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544477">Name</span><span class="op" id="7544481">:</span>&nbsp;&nbsp;<span class="string" id="7544484">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7544506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544512">File</span><span class="op" id="7544516">:</span>&nbsp;&nbsp;<span class="string" id="7544519">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7544541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544547">Mtime</span><span class="op" id="7544552">:</span>&nbsp;<span class="string" id="7544554">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7544573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544579">Mode</span><span class="op" id="7544583">:</span>&nbsp;&nbsp;<span class="num" id="7544586">0644</span><span class="op" id="7544590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544595">}</span><span class="op" id="7544596">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544600">}</span><span class="op" id="7544601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544604">}</span><span class="op" id="7544605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544612">Name</span><span class="op" id="7544616">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7544621">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="7544645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544649">Comment</span><span class="op" id="7544656">:</span>&nbsp;<span class="string" id="7544658">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7544686">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544690">File</span><span class="op" id="7544694">:</span>&nbsp;<span class="op" id="7544696">[</span><span class="op" id="7544697">]</span><span class="ident" id="7544698">ZipTestFile</span><span class="op" id="7544709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544720">Name</span><span class="op" id="7544724">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7544729">&#34;test.txt&#34;</span><span class="op" id="7544739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544745">Content</span><span class="op" id="7544752">:</span>&nbsp;<span class="op" id="7544754">[</span><span class="op" id="7544755">]</span><span class="builtintype" id="7544756">byte</span><span class="op" id="7544760">(</span><span class="string" id="7544761">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7544790">)</span><span class="op" id="7544791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544797">Mtime</span><span class="op" id="7544802">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7544806">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7544825">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544831">Mode</span><span class="op" id="7544835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7544840">0644</span><span class="op" id="7544844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544849">}</span><span class="op" id="7544850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544861">Name</span><span class="op" id="7544865">:</span>&nbsp;&nbsp;<span class="string" id="7544868">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7544890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544896">File</span><span class="op" id="7544900">:</span>&nbsp;&nbsp;<span class="string" id="7544903">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7544925">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544931">Mtime</span><span class="op" id="7544936">:</span>&nbsp;<span class="string" id="7544938">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7544957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544963">Mode</span><span class="op" id="7544967">:</span>&nbsp;&nbsp;<span class="num" id="7544970">0644</span><span class="op" id="7544974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544979">}</span><span class="op" id="7544980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544984">}</span><span class="op" id="7544985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544988">}</span><span class="op" id="7544989">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7544992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7544996">Name</span><span class="op" id="7545000">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7545004">&#34;r.zip&#34;</span><span class="op" id="7545011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545015">Source</span><span class="op" id="7545021">:</span>&nbsp;<span class="ident" id="7545023">returnRecursiveZip</span><span class="op" id="7545041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545045">File</span><span class="op" id="7545049">:</span>&nbsp;<span class="op" id="7545051">[</span><span class="op" id="7545052">]</span><span class="ident" id="7545053">ZipTestFile</span><span class="op" id="7545064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545069">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545075">Name</span><span class="op" id="7545079">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7545084">&#34;r/r.zip&#34;</span><span class="op" id="7545093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545099">Content</span><span class="op" id="7545106">:</span>&nbsp;<span class="ident" id="7545108">rZipBytes</span><span class="op" id="7545117">(</span><span class="op" id="7545118">)</span><span class="op" id="7545119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545125">Mtime</span><span class="op" id="7545130">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7545134">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="7545153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545159">Mode</span><span class="op" id="7545163">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7545168">0666</span><span class="op" id="7545172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545177">}</span><span class="op" id="7545178">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545182">}</span><span class="op" id="7545183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545186">}</span><span class="op" id="7545187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545194">Name</span><span class="op" id="7545198">:</span>&nbsp;<span class="string" id="7545200">&#34;symlink.zip&#34;</span><span class="op" id="7545213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545217">File</span><span class="op" id="7545221">:</span>&nbsp;<span class="op" id="7545223">[</span><span class="op" id="7545224">]</span><span class="ident" id="7545225">ZipTestFile</span><span class="op" id="7545236">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545247">Name</span><span class="op" id="7545251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7545256">&#34;symlink&#34;</span><span class="op" id="7545265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545271">Content</span><span class="op" id="7545278">:</span>&nbsp;<span class="op" id="7545280">[</span><span class="op" id="7545281">]</span><span class="builtintype" id="7545282">byte</span><span class="op" id="7545286">(</span><span class="string" id="7545287">&#34;../target&#34;</span><span class="op" id="7545298">)</span><span class="op" id="7545299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545305">Mode</span><span class="op" id="7545309">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7545314">0777</span>&nbsp;<span class="op" id="7545319">|</span>&nbsp;<span class="ident" id="7545321">os</span><span class="op" id="7545323">.</span><span class="ident" id="7545324">ModeSymlink</span><span class="op" id="7545335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545340">}</span><span class="op" id="7545341">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545345">}</span><span class="op" id="7545346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545349">}</span><span class="op" id="7545350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545357">Name</span><span class="op" id="7545361">:</span>&nbsp;<span class="string" id="7545363">&#34;readme.zip&#34;</span><span class="op" id="7545375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545378">}</span><span class="op" id="7545379">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545386">Name</span><span class="op" id="7545390">:</span>&nbsp;&nbsp;<span class="string" id="7545393">&#34;readme.notzip&#34;</span><span class="op" id="7545408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545412">Error</span><span class="op" id="7545417">:</span>&nbsp;<span class="ident" id="7545419">ErrFormat</span><span class="op" id="7545428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545431">}</span><span class="op" id="7545432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545435">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545439">Name</span><span class="op" id="7545443">:</span>&nbsp;<span class="string" id="7545445">&#34;dd.zip&#34;</span><span class="op" id="7545453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545457">File</span><span class="op" id="7545461">:</span>&nbsp;<span class="op" id="7545463">[</span><span class="op" id="7545464">]</span><span class="ident" id="7545465">ZipTestFile</span><span class="op" id="7545476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545487">Name</span><span class="op" id="7545491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7545496">&#34;filename&#34;</span><span class="op" id="7545506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545512">Content</span><span class="op" id="7545519">:</span>&nbsp;<span class="op" id="7545521">[</span><span class="op" id="7545522">]</span><span class="builtintype" id="7545523">byte</span><span class="op" id="7545527">(</span><span class="string" id="7545528">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="7545556">)</span><span class="op" id="7545557">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545563">Mtime</span><span class="op" id="7545568">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7545572">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="7545591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545597">Mode</span><span class="op" id="7545601">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7545606">0666</span><span class="op" id="7545610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545615">}</span><span class="op" id="7545616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545620">}</span><span class="op" id="7545621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545624">}</span><span class="op" id="7545625">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7545632">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545673">Name</span><span class="op" id="7545677">:</span>&nbsp;<span class="string" id="7545679">&#34;winxp.zip&#34;</span><span class="op" id="7545690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545694">File</span><span class="op" id="7545698">:</span>&nbsp;<span class="ident" id="7545700">crossPlatform</span><span class="op" id="7545713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545716">}</span><span class="op" id="7545717">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7545724">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545760">Name</span><span class="op" id="7545764">:</span>&nbsp;<span class="string" id="7545766">&#34;unix.zip&#34;</span><span class="op" id="7545776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545780">File</span><span class="op" id="7545784">:</span>&nbsp;<span class="ident" id="7545786">crossPlatform</span><span class="op" id="7545799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545802">}</span><span class="op" id="7545803">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7545810">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7545866">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545922">Name</span><span class="op" id="7545926">:</span>&nbsp;<span class="string" id="7545928">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="7545952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545956">File</span><span class="op" id="7545960">:</span>&nbsp;<span class="op" id="7545962">[</span><span class="op" id="7545963">]</span><span class="ident" id="7545964">ZipTestFile</span><span class="op" id="7545975">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7545980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7545986">Name</span><span class="op" id="7545990">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7545995">&#34;foo.txt&#34;</span><span class="op" id="7546004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546010">Content</span><span class="op" id="7546017">:</span>&nbsp;<span class="op" id="7546019">[</span><span class="op" id="7546020">]</span><span class="builtintype" id="7546021">byte</span><span class="op" id="7546025">(</span><span class="string" id="7546026">&#34;foo\n&#34;</span><span class="op" id="7546033">)</span><span class="op" id="7546034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546040">Mtime</span><span class="op" id="7546045">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7546049">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7546068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546074">Mode</span><span class="op" id="7546078">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7546083">0644</span><span class="op" id="7546087">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546092">}</span><span class="op" id="7546093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546104">Name</span><span class="op" id="7546108">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7546113">&#34;bar.txt&#34;</span><span class="op" id="7546122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546128">Content</span><span class="op" id="7546135">:</span>&nbsp;<span class="op" id="7546137">[</span><span class="op" id="7546138">]</span><span class="builtintype" id="7546139">byte</span><span class="op" id="7546143">(</span><span class="string" id="7546144">&#34;bar\n&#34;</span><span class="op" id="7546151">)</span><span class="op" id="7546152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546158">Mtime</span><span class="op" id="7546163">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7546167">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7546186">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546192">Mode</span><span class="op" id="7546196">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7546201">0644</span><span class="op" id="7546205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546210">}</span><span class="op" id="7546211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546215">}</span><span class="op" id="7546216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546219">}</span><span class="op" id="7546220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546223">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7546227">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7546282">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546338">Name</span><span class="op" id="7546342">:</span>&nbsp;<span class="string" id="7546344">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7546370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546374">File</span><span class="op" id="7546378">:</span>&nbsp;<span class="op" id="7546380">[</span><span class="op" id="7546381">]</span><span class="ident" id="7546382">ZipTestFile</span><span class="op" id="7546393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546398">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546404">Name</span><span class="op" id="7546408">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7546413">&#34;foo.txt&#34;</span><span class="op" id="7546422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546428">Content</span><span class="op" id="7546435">:</span>&nbsp;<span class="op" id="7546437">[</span><span class="op" id="7546438">]</span><span class="builtintype" id="7546439">byte</span><span class="op" id="7546443">(</span><span class="string" id="7546444">&#34;foo\n&#34;</span><span class="op" id="7546451">)</span><span class="op" id="7546452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546458">Mode</span><span class="op" id="7546462">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7546467">0666</span><span class="op" id="7546471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546476">}</span><span class="op" id="7546477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546482">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546488">Name</span><span class="op" id="7546492">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7546497">&#34;bar.txt&#34;</span><span class="op" id="7546506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546512">Content</span><span class="op" id="7546519">:</span>&nbsp;<span class="op" id="7546521">[</span><span class="op" id="7546522">]</span><span class="builtintype" id="7546523">byte</span><span class="op" id="7546527">(</span><span class="string" id="7546528">&#34;bar\n&#34;</span><span class="op" id="7546535">)</span><span class="op" id="7546536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546542">Mode</span><span class="op" id="7546546">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7546551">0666</span><span class="op" id="7546555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546560">}</span><span class="op" id="7546561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546565">}</span><span class="op" id="7546566">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546569">}</span><span class="op" id="7546570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546577">Name</span><span class="op" id="7546581">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7546585">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="7546615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546619">Source</span><span class="op" id="7546625">:</span>&nbsp;<span class="ident" id="7546627">returnCorruptCRC32Zip</span><span class="op" id="7546648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546652">File</span><span class="op" id="7546656">:</span>&nbsp;<span class="op" id="7546658">[</span><span class="op" id="7546659">]</span><span class="ident" id="7546660">ZipTestFile</span><span class="op" id="7546671">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546682">Name</span><span class="op" id="7546686">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7546694">&#34;foo.txt&#34;</span><span class="op" id="7546703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546709">Content</span><span class="op" id="7546716">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7546721">[</span><span class="op" id="7546722">]</span><span class="builtintype" id="7546723">byte</span><span class="op" id="7546727">(</span><span class="string" id="7546728">&#34;foo\n&#34;</span><span class="op" id="7546735">)</span><span class="op" id="7546736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546742">Mode</span><span class="op" id="7546746">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7546754">0666</span><span class="op" id="7546758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546764">ContentErr</span><span class="op" id="7546774">:</span>&nbsp;<span class="ident" id="7546776">ErrChecksum</span><span class="op" id="7546787">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546792">}</span><span class="op" id="7546793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546804">Name</span><span class="op" id="7546808">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7546813">&#34;bar.txt&#34;</span><span class="op" id="7546822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546828">Content</span><span class="op" id="7546835">:</span>&nbsp;<span class="op" id="7546837">[</span><span class="op" id="7546838">]</span><span class="builtintype" id="7546839">byte</span><span class="op" id="7546843">(</span><span class="string" id="7546844">&#34;bar\n&#34;</span><span class="op" id="7546851">)</span><span class="op" id="7546852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7546858">Mode</span><span class="op" id="7546862">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7546867">0666</span><span class="op" id="7546871">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546876">}</span><span class="op" id="7546877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546881">}</span><span class="op" id="7546882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7546885">}</span><span class="op" id="7546886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7546889">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7546949">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547016">Name</span><span class="op" id="7547020">:</span>&nbsp;<span class="string" id="7547022">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7547046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547050">File</span><span class="op" id="7547054">:</span>&nbsp;<span class="op" id="7547056">[</span><span class="op" id="7547057">]</span><span class="ident" id="7547058">ZipTestFile</span><span class="op" id="7547069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547080">Name</span><span class="op" id="7547084">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7547089">&#34;foo.txt&#34;</span><span class="op" id="7547098">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547104">Content</span><span class="op" id="7547111">:</span>&nbsp;<span class="op" id="7547113">[</span><span class="op" id="7547114">]</span><span class="builtintype" id="7547115">byte</span><span class="op" id="7547119">(</span><span class="string" id="7547120">&#34;foo\n&#34;</span><span class="op" id="7547127">)</span><span class="op" id="7547128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547134">Mtime</span><span class="op" id="7547139">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7547143">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7547162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547168">Mode</span><span class="op" id="7547172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7547177">0644</span><span class="op" id="7547181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547186">}</span><span class="op" id="7547187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547192">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547198">Name</span><span class="op" id="7547202">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7547207">&#34;bar.txt&#34;</span><span class="op" id="7547216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547222">Content</span><span class="op" id="7547229">:</span>&nbsp;<span class="op" id="7547231">[</span><span class="op" id="7547232">]</span><span class="builtintype" id="7547233">byte</span><span class="op" id="7547237">(</span><span class="string" id="7547238">&#34;bar\n&#34;</span><span class="op" id="7547245">)</span><span class="op" id="7547246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547252">Mtime</span><span class="op" id="7547257">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7547261">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7547280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547286">Mode</span><span class="op" id="7547290">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7547295">0644</span><span class="op" id="7547299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547304">}</span><span class="op" id="7547305">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547309">}</span><span class="op" id="7547310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547313">}</span><span class="op" id="7547314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7547317">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7547379">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547442">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547446">Name</span><span class="op" id="7547450">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7547454">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7547478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547482">Source</span><span class="op" id="7547488">:</span>&nbsp;<span class="ident" id="7547490">returnCorruptNotStreamedZip</span><span class="op" id="7547517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547521">File</span><span class="op" id="7547525">:</span>&nbsp;<span class="op" id="7547527">[</span><span class="op" id="7547528">]</span><span class="ident" id="7547529">ZipTestFile</span><span class="op" id="7547540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547551">Name</span><span class="op" id="7547555">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7547563">&#34;foo.txt&#34;</span><span class="op" id="7547572">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547578">Content</span><span class="op" id="7547585">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7547590">[</span><span class="op" id="7547591">]</span><span class="builtintype" id="7547592">byte</span><span class="op" id="7547596">(</span><span class="string" id="7547597">&#34;foo\n&#34;</span><span class="op" id="7547604">)</span><span class="op" id="7547605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547611">Mtime</span><span class="op" id="7547616">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7547623">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7547642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547648">Mode</span><span class="op" id="7547652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7547660">0644</span><span class="op" id="7547664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547670">ContentErr</span><span class="op" id="7547680">:</span>&nbsp;<span class="ident" id="7547682">ErrChecksum</span><span class="op" id="7547693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547698">}</span><span class="op" id="7547699">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547710">Name</span><span class="op" id="7547714">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7547719">&#34;bar.txt&#34;</span><span class="op" id="7547728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547734">Content</span><span class="op" id="7547741">:</span>&nbsp;<span class="op" id="7547743">[</span><span class="op" id="7547744">]</span><span class="builtintype" id="7547745">byte</span><span class="op" id="7547749">(</span><span class="string" id="7547750">&#34;bar\n&#34;</span><span class="op" id="7547757">)</span><span class="op" id="7547758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547764">Mtime</span><span class="op" id="7547769">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7547773">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7547792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547798">Mode</span><span class="op" id="7547802">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7547807">0644</span><span class="op" id="7547811">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547816">}</span><span class="op" id="7547817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547821">}</span><span class="op" id="7547822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547825">}</span><span class="op" id="7547826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547833">Name</span><span class="op" id="7547837">:</span>&nbsp;<span class="string" id="7547839">&#34;zip64.zip&#34;</span><span class="op" id="7547850">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547854">File</span><span class="op" id="7547858">:</span>&nbsp;<span class="op" id="7547860">[</span><span class="op" id="7547861">]</span><span class="ident" id="7547862">ZipTestFile</span><span class="op" id="7547873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7547878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547884">Name</span><span class="op" id="7547888">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7547893">&#34;README&#34;</span><span class="op" id="7547901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547907">Content</span><span class="op" id="7547914">:</span>&nbsp;<span class="op" id="7547916">[</span><span class="op" id="7547917">]</span><span class="builtintype" id="7547918">byte</span><span class="op" id="7547922">(</span><span class="string" id="7547923">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7547962">)</span><span class="op" id="7547963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7547969">Mtime</span><span class="op" id="7547974">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7547978">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7547997">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548003">Mode</span><span class="op" id="7548007">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7548012">0644</span><span class="op" id="7548016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548021">}</span><span class="op" id="7548022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548026">}</span><span class="op" id="7548027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548030">}</span><span class="op" id="7548031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7548034">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548115">Name</span><span class="op" id="7548119">:</span>&nbsp;<span class="string" id="7548121">&#34;zip64-2.zip&#34;</span><span class="op" id="7548134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548138">File</span><span class="op" id="7548142">:</span>&nbsp;<span class="op" id="7548144">[</span><span class="op" id="7548145">]</span><span class="ident" id="7548146">ZipTestFile</span><span class="op" id="7548157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548168">Name</span><span class="op" id="7548172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7548177">&#34;README&#34;</span><span class="op" id="7548185">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548191">Content</span><span class="op" id="7548198">:</span>&nbsp;<span class="op" id="7548200">[</span><span class="op" id="7548201">]</span><span class="builtintype" id="7548202">byte</span><span class="op" id="7548206">(</span><span class="string" id="7548207">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7548246">)</span><span class="op" id="7548247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548253">Mtime</span><span class="op" id="7548258">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7548262">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7548281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548287">Mode</span><span class="op" id="7548291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7548296">0644</span><span class="op" id="7548300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548305">}</span><span class="op" id="7548306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548310">}</span><span class="op" id="7548311">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548314">}</span><span class="op" id="7548315">,</span><br>
<span class="lineno"></span><span class="op" id="7548317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7548320">var</span>&nbsp;<span class="ident" id="7548324">crossPlatform</span>&nbsp;<span class="op" id="7548338">=</span>&nbsp;<span class="op" id="7548340">[</span><span class="op" id="7548341">]</span><span class="ident" id="7548342">ZipTestFile</span><span class="op" id="7548353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548356">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548360">Name</span><span class="op" id="7548364">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7548369">&#34;hello&#34;</span><span class="op" id="7548376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548380">Content</span><span class="op" id="7548387">:</span>&nbsp;<span class="op" id="7548389">[</span><span class="op" id="7548390">]</span><span class="builtintype" id="7548391">byte</span><span class="op" id="7548395">(</span><span class="string" id="7548396">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="7548408">)</span><span class="op" id="7548409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548413">Mode</span><span class="op" id="7548417">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7548422">0666</span><span class="op" id="7548426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548429">}</span><span class="op" id="7548430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548433">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548437">Name</span><span class="op" id="7548441">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7548446">&#34;dir/bar&#34;</span><span class="op" id="7548455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548459">Content</span><span class="op" id="7548466">:</span>&nbsp;<span class="op" id="7548468">[</span><span class="op" id="7548469">]</span><span class="builtintype" id="7548470">byte</span><span class="op" id="7548474">(</span><span class="string" id="7548475">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="7548485">)</span><span class="op" id="7548486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548490">Mode</span><span class="op" id="7548494">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7548499">0666</span><span class="op" id="7548503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548506">}</span><span class="op" id="7548507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548510">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548514">Name</span><span class="op" id="7548518">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7548523">&#34;dir/empty/&#34;</span><span class="op" id="7548535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548539">Content</span><span class="op" id="7548546">:</span>&nbsp;<span class="op" id="7548548">[</span><span class="op" id="7548549">]</span><span class="builtintype" id="7548550">byte</span><span class="op" id="7548554">{</span><span class="op" id="7548555">}</span><span class="op" id="7548556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548560">Mode</span><span class="op" id="7548564">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7548569">os</span><span class="op" id="7548571">.</span><span class="ident" id="7548572">ModeDir</span>&nbsp;<span class="op" id="7548580">|</span>&nbsp;<span class="num" id="7548582">0777</span><span class="op" id="7548586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548589">}</span><span class="op" id="7548590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548593">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548597">Name</span><span class="op" id="7548601">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7548606">&#34;readonly&#34;</span><span class="op" id="7548616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548620">Content</span><span class="op" id="7548627">:</span>&nbsp;<span class="op" id="7548629">[</span><span class="op" id="7548630">]</span><span class="builtintype" id="7548631">byte</span><span class="op" id="7548635">(</span><span class="string" id="7548636">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="7548652">)</span><span class="op" id="7548653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548657">Mode</span><span class="op" id="7548661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7548666">0444</span><span class="op" id="7548670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548673">}</span><span class="op" id="7548674">,</span><br>
<span class="lineno"></span><span class="op" id="7548676">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7548679">func</span>&nbsp;<span class="ident" id="7548684">TestReader</span><span class="op" id="7548694">(</span><span class="ident" id="7548695">t</span>&nbsp;<span class="op" id="7548697">*</span><span class="ident" id="7548698">testing</span><span class="op" id="7548705">.</span><span class="ident" id="7548706">T</span><span class="op" id="7548707">)</span>&nbsp;<span class="op" id="7548709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7548712">for</span>&nbsp;<span class="ident" id="7548716">_</span><span class="op" id="7548717">,</span>&nbsp;<span class="ident" id="7548719">zt</span>&nbsp;<span class="op" id="7548722">:=</span>&nbsp;<span class="keyword" id="7548725">range</span>&nbsp;<span class="ident" id="7548731">tests</span>&nbsp;<span class="op" id="7548737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548741">readTestZip</span><span class="op" id="7548752">(</span><span class="ident" id="7548753">t</span><span class="op" id="7548754">,</span>&nbsp;<span class="ident" id="7548756">zt</span><span class="op" id="7548758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548761">}</span><br>
<span class="lineno">280</span><span class="op" id="7548763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7548766">func</span>&nbsp;<span class="ident" id="7548771">readTestZip</span><span class="op" id="7548782">(</span><span class="ident" id="7548783">t</span>&nbsp;<span class="op" id="7548785">*</span><span class="ident" id="7548786">testing</span><span class="op" id="7548793">.</span><span class="ident" id="7548794">T</span><span class="op" id="7548795">,</span>&nbsp;<span class="ident" id="7548797">zt</span>&nbsp;<span class="ident" id="7548800">ZipTest</span><span class="op" id="7548807">)</span>&nbsp;<span class="op" id="7548809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7548812">var</span>&nbsp;<span class="ident" id="7548816">z</span>&nbsp;<span class="op" id="7548818">*</span><span class="ident" id="7548819">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7548827">var</span>&nbsp;<span class="ident" id="7548831">err</span>&nbsp;<span class="builtintype" id="7548835">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7548842">if</span>&nbsp;<span class="ident" id="7548845">zt</span><span class="op" id="7548847">.</span><span class="ident" id="7548848">Source</span>&nbsp;<span class="op" id="7548855">!=</span>&nbsp;<span class="ident" id="7548858">nil</span>&nbsp;<span class="op" id="7548862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548866">rat</span><span class="op" id="7548869">,</span>&nbsp;<span class="ident" id="7548871">size</span>&nbsp;<span class="op" id="7548876">:=</span>&nbsp;<span class="ident" id="7548879">zt</span><span class="op" id="7548881">.</span><span class="ident" id="7548882">Source</span><span class="op" id="7548888">(</span><span class="op" id="7548889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548893">z</span><span class="op" id="7548894">,</span>&nbsp;<span class="ident" id="7548896">err</span>&nbsp;<span class="op" id="7548900">=</span>&nbsp;<span class="ident" id="7548902">NewReader</span><span class="op" id="7548911">(</span><span class="ident" id="7548912">rat</span><span class="op" id="7548915">,</span>&nbsp;<span class="ident" id="7548917">size</span><span class="op" id="7548921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7548924">}</span>&nbsp;<span class="keyword" id="7548926">else</span>&nbsp;<span class="op" id="7548931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7548935">var</span>&nbsp;<span class="ident" id="7548939">rc</span>&nbsp;<span class="op" id="7548942">*</span><span class="ident" id="7548943">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7548956">rc</span><span class="op" id="7548958">,</span>&nbsp;<span class="ident" id="7548960">err</span>&nbsp;<span class="op" id="7548964">=</span>&nbsp;<span class="ident" id="7548966">OpenReader</span><span class="op" id="7548976">(</span><span class="ident" id="7548977">filepath</span><span class="op" id="7548985">.</span><span class="ident" id="7548986">Join</span><span class="op" id="7548990">(</span><span class="string" id="7548991">&#34;testdata&#34;</span><span class="op" id="7549001">,</span>&nbsp;<span class="ident" id="7549003">zt</span><span class="op" id="7549005">.</span><span class="ident" id="7549006">Name</span><span class="op" id="7549010">)</span><span class="op" id="7549011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549015">if</span>&nbsp;<span class="ident" id="7549018">err</span>&nbsp;<span class="op" id="7549022">==</span>&nbsp;<span class="ident" id="7549025">nil</span>&nbsp;<span class="op" id="7549029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549034">defer</span>&nbsp;<span class="ident" id="7549040">rc</span><span class="op" id="7549042">.</span><span class="ident" id="7549043">Close</span><span class="op" id="7549048">(</span><span class="op" id="7549049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549054">z</span>&nbsp;<span class="op" id="7549056">=</span>&nbsp;<span class="op" id="7549058">&amp;</span><span class="ident" id="7549059">rc</span><span class="op" id="7549061">.</span><span class="ident" id="7549062">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549071">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549077">if</span>&nbsp;<span class="ident" id="7549080">err</span>&nbsp;<span class="op" id="7549084">!=</span>&nbsp;<span class="ident" id="7549087">zt</span><span class="op" id="7549089">.</span><span class="ident" id="7549090">Error</span>&nbsp;<span class="op" id="7549096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549100">t</span><span class="op" id="7549101">.</span><span class="ident" id="7549102">Errorf</span><span class="op" id="7549108">(</span><span class="string" id="7549109">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7549132">,</span>&nbsp;<span class="ident" id="7549134">zt</span><span class="op" id="7549136">.</span><span class="ident" id="7549137">Name</span><span class="op" id="7549141">,</span>&nbsp;<span class="ident" id="7549143">err</span><span class="op" id="7549146">,</span>&nbsp;<span class="ident" id="7549148">zt</span><span class="op" id="7549150">.</span><span class="ident" id="7549151">Error</span><span class="op" id="7549156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549160">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549168">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7549172">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549200">if</span>&nbsp;<span class="ident" id="7549203">err</span>&nbsp;<span class="op" id="7549207">==</span>&nbsp;<span class="ident" id="7549210">ErrFormat</span>&nbsp;<span class="op" id="7549220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549224">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549232">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7549236">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7549284">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549348">if</span>&nbsp;<span class="ident" id="7549351">zt</span><span class="op" id="7549353">.</span><span class="ident" id="7549354">File</span>&nbsp;<span class="op" id="7549359">==</span>&nbsp;<span class="ident" id="7549362">nil</span>&nbsp;<span class="op" id="7549366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549370">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549382">if</span>&nbsp;<span class="ident" id="7549385">z</span><span class="op" id="7549386">.</span><span class="ident" id="7549387">Comment</span>&nbsp;<span class="op" id="7549395">!=</span>&nbsp;<span class="ident" id="7549398">zt</span><span class="op" id="7549400">.</span><span class="ident" id="7549401">Comment</span>&nbsp;<span class="op" id="7549409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549413">t</span><span class="op" id="7549414">.</span><span class="ident" id="7549415">Errorf</span><span class="op" id="7549421">(</span><span class="string" id="7549422">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7549447">,</span>&nbsp;<span class="ident" id="7549449">zt</span><span class="op" id="7549451">.</span><span class="ident" id="7549452">Name</span><span class="op" id="7549456">,</span>&nbsp;<span class="ident" id="7549458">z</span><span class="op" id="7549459">.</span><span class="ident" id="7549460">Comment</span><span class="op" id="7549467">,</span>&nbsp;<span class="ident" id="7549469">zt</span><span class="op" id="7549471">.</span><span class="ident" id="7549472">Comment</span><span class="op" id="7549479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549482">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549485">if</span>&nbsp;<span class="builtinfunc" id="7549488">len</span><span class="op" id="7549491">(</span><span class="ident" id="7549492">z</span><span class="op" id="7549493">.</span><span class="ident" id="7549494">File</span><span class="op" id="7549498">)</span>&nbsp;<span class="op" id="7549500">!=</span>&nbsp;<span class="builtinfunc" id="7549503">len</span><span class="op" id="7549506">(</span><span class="ident" id="7549507">zt</span><span class="op" id="7549509">.</span><span class="ident" id="7549510">File</span><span class="op" id="7549514">)</span>&nbsp;<span class="op" id="7549516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549520">t</span><span class="op" id="7549521">.</span><span class="ident" id="7549522">Fatalf</span><span class="op" id="7549528">(</span><span class="string" id="7549529">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7549557">,</span>&nbsp;<span class="ident" id="7549559">zt</span><span class="op" id="7549561">.</span><span class="ident" id="7549562">Name</span><span class="op" id="7549566">,</span>&nbsp;<span class="builtinfunc" id="7549568">len</span><span class="op" id="7549571">(</span><span class="ident" id="7549572">z</span><span class="op" id="7549573">.</span><span class="ident" id="7549574">File</span><span class="op" id="7549578">)</span><span class="op" id="7549579">,</span>&nbsp;<span class="builtinfunc" id="7549581">len</span><span class="op" id="7549584">(</span><span class="ident" id="7549585">zt</span><span class="op" id="7549587">.</span><span class="ident" id="7549588">File</span><span class="op" id="7549592">)</span><span class="op" id="7549593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7549600">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549627">for</span>&nbsp;<span class="ident" id="7549631">i</span><span class="op" id="7549632">,</span>&nbsp;<span class="ident" id="7549634">ft</span>&nbsp;<span class="op" id="7549637">:=</span>&nbsp;<span class="keyword" id="7549640">range</span>&nbsp;<span class="ident" id="7549646">zt</span><span class="op" id="7549648">.</span><span class="ident" id="7549649">File</span>&nbsp;<span class="op" id="7549654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549658">readTestFile</span><span class="op" id="7549670">(</span><span class="ident" id="7549671">t</span><span class="op" id="7549672">,</span>&nbsp;<span class="ident" id="7549674">zt</span><span class="op" id="7549676">,</span>&nbsp;<span class="ident" id="7549678">ft</span><span class="op" id="7549680">,</span>&nbsp;<span class="ident" id="7549682">z</span><span class="op" id="7549683">.</span><span class="ident" id="7549684">File</span><span class="op" id="7549688">[</span><span class="ident" id="7549689">i</span><span class="op" id="7549690">]</span><span class="op" id="7549691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7549698">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549726">n</span>&nbsp;<span class="op" id="7549728">:=</span>&nbsp;<span class="num" id="7549731">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549734">done</span>&nbsp;<span class="op" id="7549739">:=</span>&nbsp;<span class="builtinfunc" id="7549742">make</span><span class="op" id="7549746">(</span><span class="keyword" id="7549747">chan</span>&nbsp;<span class="builtintype" id="7549752">bool</span><span class="op" id="7549756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549759">for</span>&nbsp;<span class="ident" id="7549763">i</span>&nbsp;<span class="op" id="7549765">:=</span>&nbsp;<span class="num" id="7549768">0</span><span class="op" id="7549769">;</span>&nbsp;<span class="ident" id="7549771">i</span>&nbsp;<span class="op" id="7549773">&lt;</span>&nbsp;<span class="num" id="7549775">5</span><span class="op" id="7549776">;</span>&nbsp;<span class="ident" id="7549778">i</span><span class="op" id="7549779">++</span>&nbsp;<span class="op" id="7549782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549786">for</span>&nbsp;<span class="ident" id="7549790">j</span><span class="op" id="7549791">,</span>&nbsp;<span class="ident" id="7549793">ft</span>&nbsp;<span class="op" id="7549796">:=</span>&nbsp;<span class="keyword" id="7549799">range</span>&nbsp;<span class="ident" id="7549805">zt</span><span class="op" id="7549807">.</span><span class="ident" id="7549808">File</span>&nbsp;<span class="op" id="7549813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549818">go</span>&nbsp;<span class="keyword" id="7549821">func</span><span class="op" id="7549825">(</span><span class="ident" id="7549826">j</span>&nbsp;<span class="builtintype" id="7549828">int</span><span class="op" id="7549831">,</span>&nbsp;<span class="ident" id="7549833">ft</span>&nbsp;<span class="ident" id="7549836">ZipTestFile</span><span class="op" id="7549847">)</span>&nbsp;<span class="op" id="7549849">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549855">readTestFile</span><span class="op" id="7549867">(</span><span class="ident" id="7549868">t</span><span class="op" id="7549869">,</span>&nbsp;<span class="ident" id="7549871">zt</span><span class="op" id="7549873">,</span>&nbsp;<span class="ident" id="7549875">ft</span><span class="op" id="7549877">,</span>&nbsp;<span class="ident" id="7549879">z</span><span class="op" id="7549880">.</span><span class="ident" id="7549881">File</span><span class="op" id="7549885">[</span><span class="ident" id="7549886">j</span><span class="op" id="7549887">]</span><span class="op" id="7549888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549894">done</span>&nbsp;<span class="op" id="7549899">&lt;-</span>&nbsp;<span class="builtintype" id="7549902">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549910">}</span><span class="op" id="7549911">(</span><span class="ident" id="7549912">j</span><span class="op" id="7549913">,</span>&nbsp;<span class="ident" id="7549915">ft</span><span class="op" id="7549917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549922">n</span><span class="op" id="7549923">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549928">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7549934">for</span>&nbsp;<span class="op" id="7549938">;</span>&nbsp;<span class="ident" id="7549940">n</span>&nbsp;<span class="op" id="7549942">&gt;</span>&nbsp;<span class="num" id="7549944">0</span><span class="op" id="7549945">;</span>&nbsp;<span class="ident" id="7549947">n</span><span class="op" id="7549948">--</span>&nbsp;<span class="op" id="7549951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549955">&lt;-</span><span class="ident" id="7549957">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549963">}</span><br>
<span class="lineno"></span><span class="op" id="7549965">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7549968">func</span>&nbsp;<span class="ident" id="7549973">readTestFile</span><span class="op" id="7549985">(</span><span class="ident" id="7549986">t</span>&nbsp;<span class="op" id="7549988">*</span><span class="ident" id="7549989">testing</span><span class="op" id="7549996">.</span><span class="ident" id="7549997">T</span><span class="op" id="7549998">,</span>&nbsp;<span class="ident" id="7550000">zt</span>&nbsp;<span class="ident" id="7550003">ZipTest</span><span class="op" id="7550010">,</span>&nbsp;<span class="ident" id="7550012">ft</span>&nbsp;<span class="ident" id="7550015">ZipTestFile</span><span class="op" id="7550026">,</span>&nbsp;<span class="ident" id="7550028">f</span>&nbsp;<span class="op" id="7550030">*</span><span class="ident" id="7550031">File</span><span class="op" id="7550035">)</span>&nbsp;<span class="op" id="7550037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550040">if</span>&nbsp;<span class="ident" id="7550043">f</span><span class="op" id="7550044">.</span><span class="ident" id="7550045">Name</span>&nbsp;<span class="op" id="7550050">!=</span>&nbsp;<span class="ident" id="7550053">ft</span><span class="op" id="7550055">.</span><span class="ident" id="7550056">Name</span>&nbsp;<span class="op" id="7550061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550065">t</span><span class="op" id="7550066">.</span><span class="ident" id="7550067">Errorf</span><span class="op" id="7550073">(</span><span class="string" id="7550074">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7550096">,</span>&nbsp;<span class="ident" id="7550098">zt</span><span class="op" id="7550100">.</span><span class="ident" id="7550101">Name</span><span class="op" id="7550105">,</span>&nbsp;<span class="ident" id="7550107">f</span><span class="op" id="7550108">.</span><span class="ident" id="7550109">Name</span><span class="op" id="7550113">,</span>&nbsp;<span class="ident" id="7550115">ft</span><span class="op" id="7550117">.</span><span class="ident" id="7550118">Name</span><span class="op" id="7550122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550125">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550129">if</span>&nbsp;<span class="ident" id="7550132">ft</span><span class="op" id="7550134">.</span><span class="ident" id="7550135">Mtime</span>&nbsp;<span class="op" id="7550141">!=</span>&nbsp;<span class="string" id="7550144">&#34;&#34;</span>&nbsp;<span class="op" id="7550147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550151">mtime</span><span class="op" id="7550156">,</span>&nbsp;<span class="ident" id="7550158">err</span>&nbsp;<span class="op" id="7550162">:=</span>&nbsp;<span class="ident" id="7550165">time</span><span class="op" id="7550169">.</span><span class="ident" id="7550170">Parse</span><span class="op" id="7550175">(</span><span class="string" id="7550176">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="7550195">,</span>&nbsp;<span class="ident" id="7550197">ft</span><span class="op" id="7550199">.</span><span class="ident" id="7550200">Mtime</span><span class="op" id="7550205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550209">if</span>&nbsp;<span class="ident" id="7550212">err</span>&nbsp;<span class="op" id="7550216">!=</span>&nbsp;<span class="ident" id="7550219">nil</span>&nbsp;<span class="op" id="7550223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550228">t</span><span class="op" id="7550229">.</span><span class="ident" id="7550230">Error</span><span class="op" id="7550235">(</span><span class="ident" id="7550236">err</span><span class="op" id="7550239">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550244">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550257">if</span>&nbsp;<span class="ident" id="7550260">ft</span>&nbsp;<span class="op" id="7550263">:=</span>&nbsp;<span class="ident" id="7550266">f</span><span class="op" id="7550267">.</span><span class="ident" id="7550268">ModTime</span><span class="op" id="7550275">(</span><span class="op" id="7550276">)</span><span class="op" id="7550277">;</span>&nbsp;<span class="op" id="7550279">!</span><span class="ident" id="7550280">ft</span><span class="op" id="7550282">.</span><span class="ident" id="7550283">Equal</span><span class="op" id="7550288">(</span><span class="ident" id="7550289">mtime</span><span class="op" id="7550294">)</span>&nbsp;<span class="op" id="7550296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550301">t</span><span class="op" id="7550302">.</span><span class="ident" id="7550303">Errorf</span><span class="op" id="7550309">(</span><span class="string" id="7550310">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7550337">,</span>&nbsp;<span class="ident" id="7550339">zt</span><span class="op" id="7550341">.</span><span class="ident" id="7550342">Name</span><span class="op" id="7550346">,</span>&nbsp;<span class="ident" id="7550348">f</span><span class="op" id="7550349">.</span><span class="ident" id="7550350">Name</span><span class="op" id="7550354">,</span>&nbsp;<span class="ident" id="7550356">ft</span><span class="op" id="7550358">,</span>&nbsp;<span class="ident" id="7550360">mtime</span><span class="op" id="7550365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550369">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550376">testFileMode</span><span class="op" id="7550388">(</span><span class="ident" id="7550389">t</span><span class="op" id="7550390">,</span>&nbsp;<span class="ident" id="7550392">zt</span><span class="op" id="7550394">.</span><span class="ident" id="7550395">Name</span><span class="op" id="7550399">,</span>&nbsp;<span class="ident" id="7550401">f</span><span class="op" id="7550402">,</span>&nbsp;<span class="ident" id="7550404">ft</span><span class="op" id="7550406">.</span><span class="ident" id="7550407">Mode</span><span class="op" id="7550411">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550415">var</span>&nbsp;<span class="ident" id="7550419">b</span>&nbsp;<span class="ident" id="7550421">bytes</span><span class="op" id="7550426">.</span><span class="ident" id="7550427">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550435">r</span><span class="op" id="7550436">,</span>&nbsp;<span class="ident" id="7550438">err</span>&nbsp;<span class="op" id="7550442">:=</span>&nbsp;<span class="ident" id="7550445">f</span><span class="op" id="7550446">.</span><span class="ident" id="7550447">Open</span><span class="op" id="7550451">(</span><span class="op" id="7550452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550455">if</span>&nbsp;<span class="ident" id="7550458">err</span>&nbsp;<span class="op" id="7550462">!=</span>&nbsp;<span class="ident" id="7550465">nil</span>&nbsp;<span class="op" id="7550469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550473">t</span><span class="op" id="7550474">.</span><span class="ident" id="7550475">Errorf</span><span class="op" id="7550481">(</span><span class="string" id="7550482">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="7550490">,</span>&nbsp;<span class="ident" id="7550492">zt</span><span class="op" id="7550494">.</span><span class="ident" id="7550495">Name</span><span class="op" id="7550499">,</span>&nbsp;<span class="ident" id="7550501">err</span><span class="op" id="7550504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550508">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550516">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550520">_</span><span class="op" id="7550521">,</span>&nbsp;<span class="ident" id="7550523">err</span>&nbsp;<span class="op" id="7550527">=</span>&nbsp;<span class="ident" id="7550529">io</span><span class="op" id="7550531">.</span><span class="ident" id="7550532">Copy</span><span class="op" id="7550536">(</span><span class="op" id="7550537">&amp;</span><span class="ident" id="7550538">b</span><span class="op" id="7550539">,</span>&nbsp;<span class="ident" id="7550541">r</span><span class="op" id="7550542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550545">if</span>&nbsp;<span class="ident" id="7550548">err</span>&nbsp;<span class="op" id="7550552">!=</span>&nbsp;<span class="ident" id="7550555">ft</span><span class="op" id="7550557">.</span><span class="ident" id="7550558">ContentErr</span>&nbsp;<span class="op" id="7550569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550573">t</span><span class="op" id="7550574">.</span><span class="ident" id="7550575">Errorf</span><span class="op" id="7550581">(</span><span class="string" id="7550582">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="7550618">,</span>&nbsp;<span class="ident" id="7550620">zt</span><span class="op" id="7550622">.</span><span class="ident" id="7550623">Name</span><span class="op" id="7550627">,</span>&nbsp;<span class="ident" id="7550629">err</span><span class="op" id="7550632">,</span>&nbsp;<span class="ident" id="7550634">ft</span><span class="op" id="7550636">.</span><span class="ident" id="7550637">ContentErr</span><span class="op" id="7550647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550650">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550653">if</span>&nbsp;<span class="ident" id="7550656">err</span>&nbsp;<span class="op" id="7550660">!=</span>&nbsp;<span class="ident" id="7550663">nil</span>&nbsp;<span class="op" id="7550667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550671">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550682">r</span><span class="op" id="7550683">.</span><span class="ident" id="7550684">Close</span><span class="op" id="7550689">(</span><span class="op" id="7550690">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550694">size</span>&nbsp;<span class="op" id="7550699">:=</span>&nbsp;<span class="ident" id="7550702">uint64</span><span class="op" id="7550708">(</span><span class="ident" id="7550709">f</span><span class="op" id="7550710">.</span><span class="ident" id="7550711">UncompressedSize</span><span class="op" id="7550727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550730">if</span>&nbsp;<span class="ident" id="7550733">size</span>&nbsp;<span class="op" id="7550738">==</span>&nbsp;<span class="ident" id="7550741">uint32max</span>&nbsp;<span class="op" id="7550751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550755">size</span>&nbsp;<span class="op" id="7550760">=</span>&nbsp;<span class="ident" id="7550762">f</span><span class="op" id="7550763">.</span><span class="ident" id="7550764">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550787">if</span>&nbsp;<span class="ident" id="7550790">g</span>&nbsp;<span class="op" id="7550792">:=</span>&nbsp;<span class="ident" id="7550795">uint64</span><span class="op" id="7550801">(</span><span class="ident" id="7550802">b</span><span class="op" id="7550803">.</span><span class="ident" id="7550804">Len</span><span class="op" id="7550807">(</span><span class="op" id="7550808">)</span><span class="op" id="7550809">)</span><span class="op" id="7550810">;</span>&nbsp;<span class="ident" id="7550812">g</span>&nbsp;<span class="op" id="7550814">!=</span>&nbsp;<span class="ident" id="7550817">size</span>&nbsp;<span class="op" id="7550822">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550826">t</span><span class="op" id="7550827">.</span><span class="ident" id="7550828">Errorf</span><span class="op" id="7550834">(</span><span class="string" id="7550835">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="7550883">,</span>&nbsp;<span class="ident" id="7550885">f</span><span class="op" id="7550886">.</span><span class="ident" id="7550887">Name</span><span class="op" id="7550891">,</span>&nbsp;<span class="ident" id="7550893">g</span><span class="op" id="7550894">,</span>&nbsp;<span class="ident" id="7550896">size</span><span class="op" id="7550900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550907">var</span>&nbsp;<span class="ident" id="7550911">c</span>&nbsp;<span class="op" id="7550913">[</span><span class="op" id="7550914">]</span><span class="builtintype" id="7550915">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7550921">if</span>&nbsp;<span class="ident" id="7550924">ft</span><span class="op" id="7550926">.</span><span class="ident" id="7550927">Content</span>&nbsp;<span class="op" id="7550935">!=</span>&nbsp;<span class="ident" id="7550938">nil</span>&nbsp;<span class="op" id="7550942">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7550946">c</span>&nbsp;<span class="op" id="7550948">=</span>&nbsp;<span class="ident" id="7550950">ft</span><span class="op" id="7550952">.</span><span class="ident" id="7550953">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550962">}</span>&nbsp;<span class="keyword" id="7550964">else</span>&nbsp;<span class="keyword" id="7550969">if</span>&nbsp;<span class="ident" id="7550972">c</span><span class="op" id="7550973">,</span>&nbsp;<span class="ident" id="7550975">err</span>&nbsp;<span class="op" id="7550979">=</span>&nbsp;<span class="ident" id="7550981">ioutil</span><span class="op" id="7550987">.</span><span class="ident" id="7550988">ReadFile</span><span class="op" id="7550996">(</span><span class="string" id="7550997">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="7551009">+</span>&nbsp;<span class="ident" id="7551011">ft</span><span class="op" id="7551013">.</span><span class="ident" id="7551014">File</span><span class="op" id="7551018">)</span><span class="op" id="7551019">;</span>&nbsp;<span class="ident" id="7551021">err</span>&nbsp;<span class="op" id="7551025">!=</span>&nbsp;<span class="ident" id="7551028">nil</span>&nbsp;<span class="op" id="7551032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551036">t</span><span class="op" id="7551037">.</span><span class="ident" id="7551038">Error</span><span class="op" id="7551043">(</span><span class="ident" id="7551044">err</span><span class="op" id="7551047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551051">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551059">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551063">if</span>&nbsp;<span class="ident" id="7551066">b</span><span class="op" id="7551067">.</span><span class="ident" id="7551068">Len</span><span class="op" id="7551071">(</span><span class="op" id="7551072">)</span>&nbsp;<span class="op" id="7551074">!=</span>&nbsp;<span class="builtinfunc" id="7551077">len</span><span class="op" id="7551080">(</span><span class="ident" id="7551081">c</span><span class="op" id="7551082">)</span>&nbsp;<span class="op" id="7551084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551088">t</span><span class="op" id="7551089">.</span><span class="ident" id="7551090">Errorf</span><span class="op" id="7551096">(</span><span class="string" id="7551097">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7551118">,</span>&nbsp;<span class="ident" id="7551120">f</span><span class="op" id="7551121">.</span><span class="ident" id="7551122">Name</span><span class="op" id="7551126">,</span>&nbsp;<span class="ident" id="7551128">b</span><span class="op" id="7551129">.</span><span class="ident" id="7551130">Len</span><span class="op" id="7551133">(</span><span class="op" id="7551134">)</span><span class="op" id="7551135">,</span>&nbsp;<span class="builtinfunc" id="7551137">len</span><span class="op" id="7551140">(</span><span class="ident" id="7551141">c</span><span class="op" id="7551142">)</span><span class="op" id="7551143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551147">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551155">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551159">for</span>&nbsp;<span class="ident" id="7551163">i</span><span class="op" id="7551164">,</span>&nbsp;<span class="ident" id="7551166">b</span>&nbsp;<span class="op" id="7551168">:=</span>&nbsp;<span class="keyword" id="7551171">range</span>&nbsp;<span class="ident" id="7551177">b</span><span class="op" id="7551178">.</span><span class="ident" id="7551179">Bytes</span><span class="op" id="7551184">(</span><span class="op" id="7551185">)</span>&nbsp;<span class="op" id="7551187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551191">if</span>&nbsp;<span class="ident" id="7551194">b</span>&nbsp;<span class="op" id="7551196">!=</span>&nbsp;<span class="ident" id="7551199">c</span><span class="op" id="7551200">[</span><span class="ident" id="7551201">i</span><span class="op" id="7551202">]</span>&nbsp;<span class="op" id="7551204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551209">t</span><span class="op" id="7551210">.</span><span class="ident" id="7551211">Errorf</span><span class="op" id="7551217">(</span><span class="string" id="7551218">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7551246">,</span>&nbsp;<span class="ident" id="7551248">f</span><span class="op" id="7551249">.</span><span class="ident" id="7551250">Name</span><span class="op" id="7551254">,</span>&nbsp;<span class="ident" id="7551256">i</span><span class="op" id="7551257">,</span>&nbsp;<span class="ident" id="7551259">b</span><span class="op" id="7551260">,</span>&nbsp;<span class="ident" id="7551262">c</span><span class="op" id="7551263">[</span><span class="ident" id="7551264">i</span><span class="op" id="7551265">]</span><span class="op" id="7551266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551271">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551283">}</span><br>
<span class="lineno"></span><span class="op" id="7551285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7551288">func</span>&nbsp;<span class="ident" id="7551293">testFileMode</span><span class="op" id="7551305">(</span><span class="ident" id="7551306">t</span>&nbsp;<span class="op" id="7551308">*</span><span class="ident" id="7551309">testing</span><span class="op" id="7551316">.</span><span class="ident" id="7551317">T</span><span class="op" id="7551318">,</span>&nbsp;<span class="ident" id="7551320">zipName</span>&nbsp;<span class="builtintype" id="7551328">string</span><span class="op" id="7551334">,</span>&nbsp;<span class="ident" id="7551336">f</span>&nbsp;<span class="op" id="7551338">*</span><span class="ident" id="7551339">File</span><span class="op" id="7551343">,</span>&nbsp;<span class="ident" id="7551345">want</span>&nbsp;<span class="ident" id="7551350">os</span><span class="op" id="7551352">.</span><span class="ident" id="7551353">FileMode</span><span class="op" id="7551361">)</span>&nbsp;<span class="op" id="7551363">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551366">mode</span>&nbsp;<span class="op" id="7551371">:=</span>&nbsp;<span class="ident" id="7551374">f</span><span class="op" id="7551375">.</span><span class="ident" id="7551376">Mode</span><span class="op" id="7551380">(</span><span class="op" id="7551381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551384">if</span>&nbsp;<span class="ident" id="7551387">want</span>&nbsp;<span class="op" id="7551392">==</span>&nbsp;<span class="num" id="7551395">0</span>&nbsp;<span class="op" id="7551397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551401">t</span><span class="op" id="7551402">.</span><span class="ident" id="7551403">Errorf</span><span class="op" id="7551409">(</span><span class="string" id="7551410">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="7551442">,</span>&nbsp;<span class="ident" id="7551444">zipName</span><span class="op" id="7551451">,</span>&nbsp;<span class="ident" id="7551453">f</span><span class="op" id="7551454">.</span><span class="ident" id="7551455">Name</span><span class="op" id="7551459">,</span>&nbsp;<span class="ident" id="7551461">mode</span><span class="op" id="7551465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551468">}</span>&nbsp;<span class="keyword" id="7551470">else</span>&nbsp;<span class="keyword" id="7551475">if</span>&nbsp;<span class="ident" id="7551478">mode</span>&nbsp;<span class="op" id="7551483">!=</span>&nbsp;<span class="ident" id="7551486">want</span>&nbsp;<span class="op" id="7551491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551495">t</span><span class="op" id="7551496">.</span><span class="ident" id="7551497">Errorf</span><span class="op" id="7551503">(</span><span class="string" id="7551504">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7551534">,</span>&nbsp;<span class="ident" id="7551536">zipName</span><span class="op" id="7551543">,</span>&nbsp;<span class="ident" id="7551545">f</span><span class="op" id="7551546">.</span><span class="ident" id="7551547">Name</span><span class="op" id="7551551">,</span>&nbsp;<span class="ident" id="7551553">want</span><span class="op" id="7551557">,</span>&nbsp;<span class="ident" id="7551559">mode</span><span class="op" id="7551563">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551566">}</span><br>
<span class="lineno"></span><span class="op" id="7551568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7551571">func</span>&nbsp;<span class="ident" id="7551576">TestInvalidFiles</span><span class="op" id="7551592">(</span><span class="ident" id="7551593">t</span>&nbsp;<span class="op" id="7551595">*</span><span class="ident" id="7551596">testing</span><span class="op" id="7551603">.</span><span class="ident" id="7551604">T</span><span class="op" id="7551605">)</span>&nbsp;<span class="op" id="7551607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551610">const</span>&nbsp;<span class="ident" id="7551616">size</span>&nbsp;<span class="op" id="7551621">=</span>&nbsp;<span class="num" id="7551623">1024</span>&nbsp;<span class="op" id="7551628">*</span>&nbsp;<span class="num" id="7551630">70</span>&nbsp;<span class="comment" id="7551633">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551642">b</span>&nbsp;<span class="op" id="7551644">:=</span>&nbsp;<span class="builtinfunc" id="7551647">make</span><span class="op" id="7551651">(</span><span class="op" id="7551652">[</span><span class="op" id="7551653">]</span><span class="builtintype" id="7551654">byte</span><span class="op" id="7551658">,</span>&nbsp;<span class="ident" id="7551660">size</span><span class="op" id="7551664">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7551668">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551679">_</span><span class="op" id="7551680">,</span>&nbsp;<span class="ident" id="7551682">err</span>&nbsp;<span class="op" id="7551686">:=</span>&nbsp;<span class="ident" id="7551689">NewReader</span><span class="op" id="7551698">(</span><span class="ident" id="7551699">bytes</span><span class="op" id="7551704">.</span><span class="ident" id="7551705">NewReader</span><span class="op" id="7551714">(</span><span class="ident" id="7551715">b</span><span class="op" id="7551716">)</span><span class="op" id="7551717">,</span>&nbsp;<span class="ident" id="7551719">size</span><span class="op" id="7551723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551726">if</span>&nbsp;<span class="ident" id="7551729">err</span>&nbsp;<span class="op" id="7551733">!=</span>&nbsp;<span class="ident" id="7551736">ErrFormat</span>&nbsp;<span class="op" id="7551746">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551750">t</span><span class="op" id="7551751">.</span><span class="ident" id="7551752">Errorf</span><span class="op" id="7551758">(</span><span class="string" id="7551759">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7551786">,</span>&nbsp;<span class="ident" id="7551788">err</span><span class="op" id="7551791">,</span>&nbsp;<span class="ident" id="7551793">ErrFormat</span><span class="op" id="7551802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7551809">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551845">sig</span>&nbsp;<span class="op" id="7551849">:=</span>&nbsp;<span class="builtinfunc" id="7551852">make</span><span class="op" id="7551856">(</span><span class="op" id="7551857">[</span><span class="op" id="7551858">]</span><span class="builtintype" id="7551859">byte</span><span class="op" id="7551863">,</span>&nbsp;<span class="num" id="7551865">4</span><span class="op" id="7551866">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551869">binary</span><span class="op" id="7551875">.</span><span class="ident" id="7551876">LittleEndian</span><span class="op" id="7551888">.</span><span class="ident" id="7551889">PutUint32</span><span class="op" id="7551898">(</span><span class="ident" id="7551899">sig</span><span class="op" id="7551902">,</span>&nbsp;<span class="ident" id="7551904">directoryEndSignature</span><span class="op" id="7551925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551928">for</span>&nbsp;<span class="ident" id="7551932">i</span>&nbsp;<span class="op" id="7551934">:=</span>&nbsp;<span class="num" id="7551937">0</span><span class="op" id="7551938">;</span>&nbsp;<span class="ident" id="7551940">i</span>&nbsp;<span class="op" id="7551942">&lt;</span>&nbsp;<span class="ident" id="7551944">size</span><span class="op" id="7551948">-</span><span class="num" id="7551949">4</span><span class="op" id="7551950">;</span>&nbsp;<span class="ident" id="7551952">i</span>&nbsp;<span class="op" id="7551954">+=</span>&nbsp;<span class="num" id="7551957">4</span>&nbsp;<span class="op" id="7551959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7551963">copy</span><span class="op" id="7551967">(</span><span class="ident" id="7551968">b</span><span class="op" id="7551969">[</span><span class="ident" id="7551970">i</span><span class="op" id="7551971">:</span><span class="ident" id="7551972">i</span><span class="op" id="7551973">+</span><span class="num" id="7551974">4</span><span class="op" id="7551975">]</span><span class="op" id="7551976">,</span>&nbsp;<span class="ident" id="7551978">sig</span><span class="op" id="7551981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551987">_</span><span class="op" id="7551988">,</span>&nbsp;<span class="ident" id="7551990">err</span>&nbsp;<span class="op" id="7551994">=</span>&nbsp;<span class="ident" id="7551996">NewReader</span><span class="op" id="7552005">(</span><span class="ident" id="7552006">bytes</span><span class="op" id="7552011">.</span><span class="ident" id="7552012">NewReader</span><span class="op" id="7552021">(</span><span class="ident" id="7552022">b</span><span class="op" id="7552023">)</span><span class="op" id="7552024">,</span>&nbsp;<span class="ident" id="7552026">size</span><span class="op" id="7552030">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552033">if</span>&nbsp;<span class="ident" id="7552036">err</span>&nbsp;<span class="op" id="7552040">!=</span>&nbsp;<span class="ident" id="7552043">ErrFormat</span>&nbsp;<span class="op" id="7552053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552057">t</span><span class="op" id="7552058">.</span><span class="ident" id="7552059">Errorf</span><span class="op" id="7552065">(</span><span class="string" id="7552066">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7552091">,</span>&nbsp;<span class="ident" id="7552093">err</span><span class="op" id="7552096">,</span>&nbsp;<span class="ident" id="7552098">ErrFormat</span><span class="op" id="7552107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552110">}</span><br>
<span class="lineno"></span><span class="op" id="7552112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="7552115">func</span>&nbsp;<span class="ident" id="7552120">messWith</span><span class="op" id="7552128">(</span><span class="ident" id="7552129">fileName</span>&nbsp;<span class="builtintype" id="7552138">string</span><span class="op" id="7552144">,</span>&nbsp;<span class="ident" id="7552146">corrupter</span>&nbsp;<span class="keyword" id="7552156">func</span><span class="op" id="7552160">(</span><span class="ident" id="7552161">b</span>&nbsp;<span class="op" id="7552163">[</span><span class="op" id="7552164">]</span><span class="builtintype" id="7552165">byte</span><span class="op" id="7552169">)</span><span class="op" id="7552170">)</span>&nbsp;<span class="op" id="7552172">(</span><span class="ident" id="7552173">r</span>&nbsp;<span class="ident" id="7552175">io</span><span class="op" id="7552177">.</span><span class="ident" id="7552178">ReaderAt</span><span class="op" id="7552186">,</span>&nbsp;<span class="ident" id="7552188">size</span>&nbsp;<span class="ident" id="7552193">int64</span><span class="op" id="7552198">)</span>&nbsp;<span class="op" id="7552200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552203">data</span><span class="op" id="7552207">,</span>&nbsp;<span class="ident" id="7552209">err</span>&nbsp;<span class="op" id="7552213">:=</span>&nbsp;<span class="ident" id="7552216">ioutil</span><span class="op" id="7552222">.</span><span class="ident" id="7552223">ReadFile</span><span class="op" id="7552231">(</span><span class="ident" id="7552232">filepath</span><span class="op" id="7552240">.</span><span class="ident" id="7552241">Join</span><span class="op" id="7552245">(</span><span class="string" id="7552246">&#34;testdata&#34;</span><span class="op" id="7552256">,</span>&nbsp;<span class="ident" id="7552258">fileName</span><span class="op" id="7552266">)</span><span class="op" id="7552267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552270">if</span>&nbsp;<span class="ident" id="7552273">err</span>&nbsp;<span class="op" id="7552277">!=</span>&nbsp;<span class="ident" id="7552280">nil</span>&nbsp;<span class="op" id="7552284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7552288">panic</span><span class="op" id="7552293">(</span><span class="string" id="7552294">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="7552311">+</span>&nbsp;<span class="ident" id="7552313">fileName</span>&nbsp;<span class="op" id="7552322">+</span>&nbsp;<span class="string" id="7552324">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="7552329">+</span>&nbsp;<span class="ident" id="7552331">err</span><span class="op" id="7552334">.</span><span class="ident" id="7552335">Error</span><span class="op" id="7552340">(</span><span class="op" id="7552341">)</span><span class="op" id="7552342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552345">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552348">corrupter</span><span class="op" id="7552357">(</span><span class="ident" id="7552358">data</span><span class="op" id="7552362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552365">return</span>&nbsp;<span class="ident" id="7552372">bytes</span><span class="op" id="7552377">.</span><span class="ident" id="7552378">NewReader</span><span class="op" id="7552387">(</span><span class="ident" id="7552388">data</span><span class="op" id="7552392">)</span><span class="op" id="7552393">,</span>&nbsp;<span class="ident" id="7552395">int64</span><span class="op" id="7552400">(</span><span class="builtinfunc" id="7552401">len</span><span class="op" id="7552404">(</span><span class="ident" id="7552405">data</span><span class="op" id="7552409">)</span><span class="op" id="7552410">)</span><br>
<span class="lineno"></span><span class="op" id="7552412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7552415">func</span>&nbsp;<span class="ident" id="7552420">returnCorruptCRC32Zip</span><span class="op" id="7552441">(</span><span class="op" id="7552442">)</span>&nbsp;<span class="op" id="7552444">(</span><span class="ident" id="7552445">r</span>&nbsp;<span class="ident" id="7552447">io</span><span class="op" id="7552449">.</span><span class="ident" id="7552450">ReaderAt</span><span class="op" id="7552458">,</span>&nbsp;<span class="ident" id="7552460">size</span>&nbsp;<span class="ident" id="7552465">int64</span><span class="op" id="7552470">)</span>&nbsp;<span class="op" id="7552472">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552475">return</span>&nbsp;<span class="ident" id="7552482">messWith</span><span class="op" id="7552490">(</span><span class="string" id="7552491">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7552517">,</span>&nbsp;<span class="keyword" id="7552519">func</span><span class="op" id="7552523">(</span><span class="ident" id="7552524">b</span>&nbsp;<span class="op" id="7552526">[</span><span class="op" id="7552527">]</span><span class="builtintype" id="7552528">byte</span><span class="op" id="7552532">)</span>&nbsp;<span class="op" id="7552534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7552538">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552593">b</span><span class="op" id="7552594">[</span><span class="num" id="7552595">0x2d</span><span class="op" id="7552599">]</span><span class="op" id="7552600">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552604">}</span><span class="op" id="7552605">)</span><br>
<span class="lineno"></span><span class="op" id="7552607">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7552610">func</span>&nbsp;<span class="ident" id="7552615">returnCorruptNotStreamedZip</span><span class="op" id="7552642">(</span><span class="op" id="7552643">)</span>&nbsp;<span class="op" id="7552645">(</span><span class="ident" id="7552646">r</span>&nbsp;<span class="ident" id="7552648">io</span><span class="op" id="7552650">.</span><span class="ident" id="7552651">ReaderAt</span><span class="op" id="7552659">,</span>&nbsp;<span class="ident" id="7552661">size</span>&nbsp;<span class="ident" id="7552666">int64</span><span class="op" id="7552671">)</span>&nbsp;<span class="op" id="7552673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552676">return</span>&nbsp;<span class="ident" id="7552683">messWith</span><span class="op" id="7552691">(</span><span class="string" id="7552692">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7552716">,</span>&nbsp;<span class="keyword" id="7552718">func</span><span class="op" id="7552722">(</span><span class="ident" id="7552723">b</span>&nbsp;<span class="op" id="7552725">[</span><span class="op" id="7552726">]</span><span class="builtintype" id="7552727">byte</span><span class="op" id="7552731">)</span>&nbsp;<span class="op" id="7552733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7552737">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7552786">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552831">b</span><span class="op" id="7552832">[</span><span class="num" id="7552833">0x11</span><span class="op" id="7552837">]</span><span class="op" id="7552838">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552843">b</span><span class="op" id="7552844">[</span><span class="num" id="7552845">0x9d</span><span class="op" id="7552849">]</span><span class="op" id="7552850">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7552856">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7552911">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7552968">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7553026">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7553080">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7553135">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7553156">}</span><span class="op" id="7553157">)</span><br>
<span class="lineno">465</span><span class="op" id="7553159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7553162">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="7553226">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="7553287">func</span>&nbsp;<span class="ident" id="7553292">rZipBytes</span><span class="op" id="7553301">(</span><span class="op" id="7553302">)</span>&nbsp;<span class="op" id="7553304">[</span><span class="op" id="7553305">]</span><span class="builtintype" id="7553306">byte</span>&nbsp;<span class="op" id="7553311">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553314">s</span>&nbsp;<span class="op" id="7553316">:=</span>&nbsp;<span class="string" id="7553319">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7554867">s</span>&nbsp;<span class="op" id="7554869">=</span>&nbsp;<span class="ident" id="7554871">regexp</span><span class="op" id="7554877">.</span><span class="ident" id="7554878">MustCompile</span><span class="op" id="7554889">(</span><span class="string" id="7554890">`[0-9a-f]{7}`</span><span class="op" id="7554903">)</span><span class="op" id="7554904">.</span><span class="ident" id="7554905">ReplaceAllString</span><span class="op" id="7554921">(</span><span class="ident" id="7554922">s</span><span class="op" id="7554923">,</span>&nbsp;<span class="string" id="7554925">&#34;&#34;</span><span class="op" id="7554927">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7554930">s</span>&nbsp;<span class="op" id="7554932">=</span>&nbsp;<span class="ident" id="7554934">regexp</span><span class="op" id="7554940">.</span><span class="ident" id="7554941">MustCompile</span><span class="op" id="7554952">(</span><span class="string" id="7554953">`\s+`</span><span class="op" id="7554958">)</span><span class="op" id="7554959">.</span><span class="ident" id="7554960">ReplaceAllString</span><span class="op" id="7554976">(</span><span class="ident" id="7554977">s</span><span class="op" id="7554978">,</span>&nbsp;<span class="string" id="7554980">&#34;&#34;</span><span class="op" id="7554982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7554985">b</span><span class="op" id="7554986">,</span>&nbsp;<span class="ident" id="7554988">err</span>&nbsp;<span class="op" id="7554992">:=</span>&nbsp;<span class="ident" id="7554995">hex</span><span class="op" id="7554998">.</span><span class="ident" id="7554999">DecodeString</span><span class="op" id="7555011">(</span><span class="ident" id="7555012">s</span><span class="op" id="7555013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7555016">if</span>&nbsp;<span class="ident" id="7555019">err</span>&nbsp;<span class="op" id="7555023">!=</span>&nbsp;<span class="ident" id="7555026">nil</span>&nbsp;<span class="op" id="7555030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7555034">panic</span><span class="op" id="7555039">(</span><span class="ident" id="7555040">err</span><span class="op" id="7555043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7555046">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7555049">return</span>&nbsp;<span class="ident" id="7555056">b</span><br>
<span class="lineno"></span><span class="op" id="7555058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7555061">func</span>&nbsp;<span class="ident" id="7555066">returnRecursiveZip</span><span class="op" id="7555084">(</span><span class="op" id="7555085">)</span>&nbsp;<span class="op" id="7555087">(</span><span class="ident" id="7555088">r</span>&nbsp;<span class="ident" id="7555090">io</span><span class="op" id="7555092">.</span><span class="ident" id="7555093">ReaderAt</span><span class="op" id="7555101">,</span>&nbsp;<span class="ident" id="7555103">size</span>&nbsp;<span class="ident" id="7555108">int64</span><span class="op" id="7555113">)</span>&nbsp;<span class="op" id="7555115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7555118">b</span>&nbsp;<span class="op" id="7555120">:=</span>&nbsp;<span class="ident" id="7555123">rZipBytes</span><span class="op" id="7555132">(</span><span class="op" id="7555133">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7555136">return</span>&nbsp;<span class="ident" id="7555143">bytes</span><span class="op" id="7555148">.</span><span class="ident" id="7555149">NewReader</span><span class="op" id="7555158">(</span><span class="ident" id="7555159">b</span><span class="op" id="7555160">)</span><span class="op" id="7555161">,</span>&nbsp;<span class="ident" id="7555163">int64</span><span class="op" id="7555168">(</span><span class="builtinfunc" id="7555169">len</span><span class="op" id="7555172">(</span><span class="ident" id="7555173">b</span><span class="op" id="7555174">)</span><span class="op" id="7555175">)</span><br>
<span class="lineno"></span><span class="op" id="7555177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7555180">func</span>&nbsp;<span class="ident" id="7555185">TestIssue8186</span><span class="op" id="7555198">(</span><span class="ident" id="7555199">t</span>&nbsp;<span class="op" id="7555201">*</span><span class="ident" id="7555202">testing</span><span class="op" id="7555209">.</span><span class="ident" id="7555210">T</span><span class="op" id="7555211">)</span>&nbsp;<span class="op" id="7555213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7555216">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7555277">dirEnts</span>&nbsp;<span class="op" id="7555285">:=</span>&nbsp;<span class="op" id="7555288">[</span><span class="op" id="7555289">]</span><span class="builtintype" id="7555290">string</span><span class="op" id="7555296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7555300">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="7555527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7555531">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="7555709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7555713">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="7555884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7555888">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="7556056">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7556060">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="7556243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7556247">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="7556429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7556433">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="7556603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7556607">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98o\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="7556776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7556780">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="7556953">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7556956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7556959">for</span>&nbsp;<span class="ident" id="7556963">i</span><span class="op" id="7556964">,</span>&nbsp;<span class="ident" id="7556966">s</span>&nbsp;<span class="op" id="7556968">:=</span>&nbsp;<span class="keyword" id="7556971">range</span>&nbsp;<span class="ident" id="7556977">dirEnts</span>&nbsp;<span class="op" id="7556985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7556989">var</span>&nbsp;<span class="ident" id="7556993">f</span>&nbsp;<span class="ident" id="7556995">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7557002">err</span>&nbsp;<span class="op" id="7557006">:=</span>&nbsp;<span class="ident" id="7557009">readDirectoryHeader</span><span class="op" id="7557028">(</span><span class="op" id="7557029">&amp;</span><span class="ident" id="7557030">f</span><span class="op" id="7557031">,</span>&nbsp;<span class="ident" id="7557033">strings</span><span class="op" id="7557040">.</span><span class="ident" id="7557041">NewReader</span><span class="op" id="7557050">(</span><span class="ident" id="7557051">s</span><span class="op" id="7557052">)</span><span class="op" id="7557053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7557057">if</span>&nbsp;<span class="ident" id="7557060">err</span>&nbsp;<span class="op" id="7557064">!=</span>&nbsp;<span class="ident" id="7557067">nil</span>&nbsp;<span class="op" id="7557071">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7557076">t</span><span class="op" id="7557077">.</span><span class="ident" id="7557078">Errorf</span><span class="op" id="7557084">(</span><span class="string" id="7557085">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="7557108">,</span>&nbsp;<span class="ident" id="7557110">i</span><span class="op" id="7557111">,</span>&nbsp;<span class="ident" id="7557113">err</span><span class="op" id="7557116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7557120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7557123">}</span><br>
<span class="lineno"></span><span class="op" id="7557125">}</span>
</div>
</body>
</html>
