<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html" class="current">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6777351">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6777406">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6777460">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6777511">package</span>&nbsp;<span class="ident" id="6777519">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6777524">import</span>&nbsp;<span class="op" id="6777531">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6777534">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6777541">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6777547">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6777560">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6777571">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6777582">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6777589">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6777592">func</span>&nbsp;<span class="ident" id="6777597">isTimeout</span><span class="op" id="6777606">(</span><span class="ident" id="6777607">err</span>&nbsp;<span class="builtintype" id="6777611">error</span><span class="op" id="6777616">)</span>&nbsp;<span class="builtintype" id="6777618">bool</span>&nbsp;<span class="op" id="6777623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6777626">e</span><span class="op" id="6777627">,</span>&nbsp;<span class="ident" id="6777629">ok</span>&nbsp;<span class="op" id="6777632">:=</span>&nbsp;<span class="ident" id="6777635"><a href="/gostd/net/timeout_test.go.html#6777607">err</a></span><span class="op" id="6777638">.</span><span class="op" id="6777639">(</span><span class="ident" id="6777640"><a href="/gostd/net/net.go.html#3338570">Error</a></span><span class="op" id="6777645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6777648">return</span>&nbsp;<span class="ident" id="6777655"><a href="/gostd/net/timeout_test.go.html#6777629">ok</a></span>&nbsp;<span class="op" id="6777658">&amp;&amp;</span>&nbsp;<span class="ident" id="6777661"><a href="/gostd/net/timeout_test.go.html#6777626">e</a></span><span class="op" id="6777662">.</span><span class="ident" id="6777663"><a href="/gostd/net/net.go.html#3338596">Timeout</a></span><span class="op" id="6777670">(</span><span class="op" id="6777671">)</span><br>
<span class="lineno"></span><span class="op" id="6777673">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6777676">type</span>&nbsp;<span class="ident" id="6777681">copyRes</span>&nbsp;<span class="keyword" id="6777689">struct</span>&nbsp;<span class="op" id="6777696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6777699">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6777703">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6777710">err</span>&nbsp;<span class="builtintype" id="6777714">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6777721">d</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6777725"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6777729">.</span><span class="ident" id="6777730"><a href="/gostd/time/time.go.html#2734212">Duration</a></span><br>
<span class="lineno">25</span><span class="op" id="6777739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6777742">func</span>&nbsp;<span class="ident" id="6777747">TestAcceptTimeout</span><span class="op" id="6777764">(</span><span class="ident" id="6777765">t</span>&nbsp;<span class="op" id="6777767">*</span><span class="ident" id="6777768"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6777775">.</span><span class="ident" id="6777776"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6777777">)</span>&nbsp;<span class="op" id="6777779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6777782">switch</span>&nbsp;<span class="ident" id="6777789"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6777796">.</span><span class="ident" id="6777797"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6777802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6777805">case</span>&nbsp;<span class="string" id="6777810">&#34;plan9&#34;</span><span class="op" id="6777817">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6777821"><a href="/gostd/net/timeout_test.go.html#6777765">t</a></span><span class="op" id="6777822">.</span><span class="ident" id="6777823"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6777828">(</span><span class="string" id="6777829">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6777850">,</span>&nbsp;<span class="ident" id="6777852"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6777859">.</span><span class="ident" id="6777860"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6777864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6777867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6777871">ln</span>&nbsp;<span class="op" id="6777874">:=</span>&nbsp;<span class="ident" id="6777877"><a href="/gostd/net/dial_test.go.html#6621447">newLocalListener</a></span><span class="op" id="6777893">(</span><span class="ident" id="6777894"><a href="/gostd/net/timeout_test.go.html#6777765">t</a></span><span class="op" id="6777895">)</span><span class="op" id="6777896">.</span><span class="op" id="6777897">(</span><span class="op" id="6777898">*</span><span class="ident" id="6777899"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6777910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6777913">defer</span>&nbsp;<span class="ident" id="6777919"><a href="/gostd/net/timeout_test.go.html#6777871">ln</a></span><span class="op" id="6777921">.</span><span class="ident" id="6777922"><a href="/gostd/net/tcpsock_posix.go.html#3382598">Close</a></span><span class="op" id="6777927">(</span><span class="op" id="6777928">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6777931"><a href="/gostd/net/timeout_test.go.html#6777871">ln</a></span><span class="op" id="6777933">.</span><span class="ident" id="6777934"><a href="/gostd/net/tcpsock_posix.go.html#3382941">SetDeadline</a></span><span class="op" id="6777945">(</span><span class="ident" id="6777946"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6777950">.</span><span class="ident" id="6777951"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6777954">(</span><span class="op" id="6777955">)</span><span class="op" id="6777956">.</span><span class="ident" id="6777957"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6777960">(</span><span class="op" id="6777961">-</span><span class="num" id="6777962">1</span>&nbsp;<span class="op" id="6777964">*</span>&nbsp;<span class="ident" id="6777966"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6777970">.</span><span class="ident" id="6777971"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6777977">)</span><span class="op" id="6777978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6777981">if</span>&nbsp;<span class="ident" id="6777984">_</span><span class="op" id="6777985">,</span>&nbsp;<span class="ident" id="6777987">err</span>&nbsp;<span class="op" id="6777991">:=</span>&nbsp;<span class="ident" id="6777994"><a href="/gostd/net/timeout_test.go.html#6777871">ln</a></span><span class="op" id="6777996">.</span><span class="ident" id="6777997"><a href="/gostd/net/tcpsock_posix.go.html#3382377">Accept</a></span><span class="op" id="6778003">(</span><span class="op" id="6778004">)</span><span class="op" id="6778005">;</span>&nbsp;<span class="op" id="6778007">!</span><span class="ident" id="6778008"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6778017">(</span><span class="ident" id="6778018"><a href="/gostd/net/timeout_test.go.html#6777987">err</a></span><span class="op" id="6778021">)</span>&nbsp;<span class="op" id="6778023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778027"><a href="/gostd/net/timeout_test.go.html#6777765">t</a></span><span class="op" id="6778028">.</span><span class="ident" id="6778029"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6778035">(</span><span class="string" id="6778036">&#34;Accept:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6778069">,</span>&nbsp;<span class="ident" id="6778071"><a href="/gostd/net/net.go.html#3341194">errTimeout</a></span><span class="op" id="6778081">,</span>&nbsp;<span class="ident" id="6778083"><a href="/gostd/net/timeout_test.go.html#6777987">err</a></span><span class="op" id="6778086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6778089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778092">if</span>&nbsp;<span class="ident" id="6778095">_</span><span class="op" id="6778096">,</span>&nbsp;<span class="ident" id="6778098">err</span>&nbsp;<span class="op" id="6778102">:=</span>&nbsp;<span class="ident" id="6778105"><a href="/gostd/net/timeout_test.go.html#6777871">ln</a></span><span class="op" id="6778107">.</span><span class="ident" id="6778108"><a href="/gostd/net/tcpsock_posix.go.html#3382377">Accept</a></span><span class="op" id="6778114">(</span><span class="op" id="6778115">)</span><span class="op" id="6778116">;</span>&nbsp;<span class="op" id="6778118">!</span><span class="ident" id="6778119"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6778128">(</span><span class="ident" id="6778129"><a href="/gostd/net/timeout_test.go.html#6778098">err</a></span><span class="op" id="6778132">)</span>&nbsp;<span class="op" id="6778134">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778138"><a href="/gostd/net/timeout_test.go.html#6777765">t</a></span><span class="op" id="6778139">.</span><span class="ident" id="6778140"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6778146">(</span><span class="string" id="6778147">&#34;Accept:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6778180">,</span>&nbsp;<span class="ident" id="6778182"><a href="/gostd/net/net.go.html#3341194">errTimeout</a></span><span class="op" id="6778192">,</span>&nbsp;<span class="ident" id="6778194"><a href="/gostd/net/timeout_test.go.html#6778098">err</a></span><span class="op" id="6778197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6778200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778203"><a href="/gostd/net/timeout_test.go.html#6777871">ln</a></span><span class="op" id="6778205">.</span><span class="ident" id="6778206"><a href="/gostd/net/tcpsock_posix.go.html#3382941">SetDeadline</a></span><span class="op" id="6778217">(</span><span class="ident" id="6778218"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6778222">.</span><span class="ident" id="6778223"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6778226">(</span><span class="op" id="6778227">)</span><span class="op" id="6778228">.</span><span class="ident" id="6778229"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6778232">(</span><span class="num" id="6778233">100</span>&nbsp;<span class="op" id="6778237">*</span>&nbsp;<span class="ident" id="6778239"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6778243">.</span><span class="ident" id="6778244"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6778255">)</span><span class="op" id="6778256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778259">if</span>&nbsp;<span class="ident" id="6778262">_</span><span class="op" id="6778263">,</span>&nbsp;<span class="ident" id="6778265">err</span>&nbsp;<span class="op" id="6778269">:=</span>&nbsp;<span class="ident" id="6778272"><a href="/gostd/net/timeout_test.go.html#6777871">ln</a></span><span class="op" id="6778274">.</span><span class="ident" id="6778275"><a href="/gostd/net/tcpsock_posix.go.html#3382377">Accept</a></span><span class="op" id="6778281">(</span><span class="op" id="6778282">)</span><span class="op" id="6778283">;</span>&nbsp;<span class="op" id="6778285">!</span><span class="ident" id="6778286"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6778295">(</span><span class="ident" id="6778296"><a href="/gostd/net/timeout_test.go.html#6778265">err</a></span><span class="op" id="6778299">)</span>&nbsp;<span class="op" id="6778301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778305"><a href="/gostd/net/timeout_test.go.html#6777765">t</a></span><span class="op" id="6778306">.</span><span class="ident" id="6778307"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6778313">(</span><span class="string" id="6778314">&#34;Accept:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6778347">,</span>&nbsp;<span class="ident" id="6778349"><a href="/gostd/net/net.go.html#3341194">errTimeout</a></span><span class="op" id="6778359">,</span>&nbsp;<span class="ident" id="6778361"><a href="/gostd/net/timeout_test.go.html#6778265">err</a></span><span class="op" id="6778364">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6778367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778370">if</span>&nbsp;<span class="ident" id="6778373">_</span><span class="op" id="6778374">,</span>&nbsp;<span class="ident" id="6778376">err</span>&nbsp;<span class="op" id="6778380">:=</span>&nbsp;<span class="ident" id="6778383"><a href="/gostd/net/timeout_test.go.html#6777871">ln</a></span><span class="op" id="6778385">.</span><span class="ident" id="6778386"><a href="/gostd/net/tcpsock_posix.go.html#3382377">Accept</a></span><span class="op" id="6778392">(</span><span class="op" id="6778393">)</span><span class="op" id="6778394">;</span>&nbsp;<span class="op" id="6778396">!</span><span class="ident" id="6778397"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6778406">(</span><span class="ident" id="6778407"><a href="/gostd/net/timeout_test.go.html#6778376">err</a></span><span class="op" id="6778410">)</span>&nbsp;<span class="op" id="6778412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778416"><a href="/gostd/net/timeout_test.go.html#6777765">t</a></span><span class="op" id="6778417">.</span><span class="ident" id="6778418"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6778424">(</span><span class="string" id="6778425">&#34;Accept:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6778458">,</span>&nbsp;<span class="ident" id="6778460"><a href="/gostd/net/net.go.html#3341194">errTimeout</a></span><span class="op" id="6778470">,</span>&nbsp;<span class="ident" id="6778472"><a href="/gostd/net/timeout_test.go.html#6778376">err</a></span><span class="op" id="6778475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6778478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778481"><a href="/gostd/net/timeout_test.go.html#6777871">ln</a></span><span class="op" id="6778483">.</span><span class="ident" id="6778484"><a href="/gostd/net/tcpsock_posix.go.html#3382941">SetDeadline</a></span><span class="op" id="6778495">(</span><span class="ident" id="6778496"><a href="/gostd/net/net.go.html#3342276">noDeadline</a></span><span class="op" id="6778506">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778509">errc</span>&nbsp;<span class="op" id="6778514">:=</span>&nbsp;<span class="builtinfunc" id="6778517">make</span><span class="op" id="6778521">(</span><span class="keyword" id="6778522">chan</span>&nbsp;<span class="builtintype" id="6778527">error</span><span class="op" id="6778532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778535">go</span>&nbsp;<span class="keyword" id="6778538">func</span><span class="op" id="6778542">(</span><span class="op" id="6778543">)</span>&nbsp;<span class="op" id="6778545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778549">_</span><span class="op" id="6778550">,</span>&nbsp;<span class="ident" id="6778552">err</span>&nbsp;<span class="op" id="6778556">:=</span>&nbsp;<span class="ident" id="6778559"><a href="/gostd/net/timeout_test.go.html#6777871">ln</a></span><span class="op" id="6778561">.</span><span class="ident" id="6778562"><a href="/gostd/net/tcpsock_posix.go.html#3382377">Accept</a></span><span class="op" id="6778568">(</span><span class="op" id="6778569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778573"><a href="/gostd/net/timeout_test.go.html#6778509">errc</a></span>&nbsp;<span class="op" id="6778578">&lt;-</span>&nbsp;<span class="ident" id="6778581"><a href="/gostd/net/timeout_test.go.html#6778552">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6778586">}</span><span class="op" id="6778587">(</span><span class="op" id="6778588">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778591"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6778595">.</span><span class="ident" id="6778596"><a href="/gostd/time/sleep.go.html#2713940">Sleep</a></span><span class="op" id="6778601">(</span><span class="num" id="6778602">100</span>&nbsp;<span class="op" id="6778606">*</span>&nbsp;<span class="ident" id="6778608"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6778612">.</span><span class="ident" id="6778613"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6778624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778627">select</span>&nbsp;<span class="op" id="6778634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778637">case</span>&nbsp;<span class="ident" id="6778642">err</span>&nbsp;<span class="op" id="6778646">:=</span>&nbsp;<span class="op" id="6778649">&lt;-</span><span class="ident" id="6778651"><a href="/gostd/net/timeout_test.go.html#6778509">errc</a></span><span class="op" id="6778655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778659"><a href="/gostd/net/timeout_test.go.html#6777765">t</a></span><span class="op" id="6778660">.</span><span class="ident" id="6778661"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6778667">(</span><span class="string" id="6778668">&#34;Expected&nbsp;Accept()&nbsp;to&nbsp;not&nbsp;return,&nbsp;but&nbsp;it&nbsp;returned&nbsp;with&nbsp;%v\n&#34;</span><span class="op" id="6778728">,</span>&nbsp;<span class="ident" id="6778730"><a href="/gostd/net/timeout_test.go.html#6778642">err</a></span><span class="op" id="6778733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778736">default</span><span class="op" id="6778743">:</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6778746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778749"><a href="/gostd/net/timeout_test.go.html#6777871">ln</a></span><span class="op" id="6778751">.</span><span class="ident" id="6778752"><a href="/gostd/net/tcpsock_posix.go.html#3382598">Close</a></span><span class="op" id="6778757">(</span><span class="op" id="6778758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778761">switch</span>&nbsp;<span class="ident" id="6778768">nerr</span>&nbsp;<span class="op" id="6778773">:=</span>&nbsp;<span class="op" id="6778776">&lt;-</span><span class="ident" id="6778778"><a href="/gostd/net/timeout_test.go.html#6778509">errc</a></span><span class="op" id="6778782">;</span>&nbsp;<span class="ident" id="6778784">err</span>&nbsp;<span class="op" id="6778788">:=</span>&nbsp;<span class="ident" id="6778791"><a href="/gostd/net/timeout_test.go.html#6778768">nerr</a></span><span class="op" id="6778795">.</span><span class="op" id="6778796">(</span><span class="keyword" id="6778797">type</span><span class="op" id="6778801">)</span>&nbsp;<span class="op" id="6778803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778806">case</span>&nbsp;<span class="op" id="6778811">*</span><span class="ident" id="6778812"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="6778819">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778823">if</span>&nbsp;<span class="ident" id="6778826"><a href="/gostd/net/timeout_test.go.html#6778784">err</a></span><span class="op" id="6778829">.</span><span class="ident" id="6778830"><a href="/gostd/net/net.go.html#3341902">Err</a></span>&nbsp;<span class="op" id="6778834">!=</span>&nbsp;<span class="ident" id="6778837"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span>&nbsp;<span class="op" id="6778848">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778853"><a href="/gostd/net/timeout_test.go.html#6777765">t</a></span><span class="op" id="6778854">.</span><span class="ident" id="6778855"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6778861">(</span><span class="string" id="6778862">&#34;Accept:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6778895">,</span>&nbsp;<span class="ident" id="6778897"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span><span class="op" id="6778907">,</span>&nbsp;<span class="ident" id="6778909"><a href="/gostd/net/timeout_test.go.html#6778784">err</a></span><span class="op" id="6778912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6778916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778919">default</span><span class="op" id="6778926">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778930">if</span>&nbsp;<span class="ident" id="6778933"><a href="/gostd/net/timeout_test.go.html#6778784">err</a></span>&nbsp;<span class="op" id="6778937">!=</span>&nbsp;<span class="ident" id="6778940"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span>&nbsp;<span class="op" id="6778951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6778956"><a href="/gostd/net/timeout_test.go.html#6777765">t</a></span><span class="op" id="6778957">.</span><span class="ident" id="6778958"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6778964">(</span><span class="string" id="6778965">&#34;Accept:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6778998">,</span>&nbsp;<span class="ident" id="6779000"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span><span class="op" id="6779010">,</span>&nbsp;<span class="ident" id="6779012"><a href="/gostd/net/timeout_test.go.html#6778784">err</a></span><span class="op" id="6779015">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6779019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6779022">}</span><br>
<span class="lineno"></span><span class="op" id="6779024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6779027">func</span>&nbsp;<span class="ident" id="6779032">TestReadTimeout</span><span class="op" id="6779047">(</span><span class="ident" id="6779048">t</span>&nbsp;<span class="op" id="6779050">*</span><span class="ident" id="6779051"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6779058">.</span><span class="ident" id="6779059"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6779060">)</span>&nbsp;<span class="op" id="6779062">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6779065">switch</span>&nbsp;<span class="ident" id="6779072"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6779079">.</span><span class="ident" id="6779080"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6779085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6779088">case</span>&nbsp;<span class="string" id="6779093">&#34;plan9&#34;</span><span class="op" id="6779100">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779104"><a href="/gostd/net/timeout_test.go.html#6779048">t</a></span><span class="op" id="6779105">.</span><span class="ident" id="6779106"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6779111">(</span><span class="string" id="6779112">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6779133">,</span>&nbsp;<span class="ident" id="6779135"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6779142">.</span><span class="ident" id="6779143"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6779147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6779150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779154">ln</span>&nbsp;<span class="op" id="6779157">:=</span>&nbsp;<span class="ident" id="6779160"><a href="/gostd/net/dial_test.go.html#6621447">newLocalListener</a></span><span class="op" id="6779176">(</span><span class="ident" id="6779177"><a href="/gostd/net/timeout_test.go.html#6779048">t</a></span><span class="op" id="6779178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6779181">defer</span>&nbsp;<span class="ident" id="6779187"><a href="/gostd/net/timeout_test.go.html#6779154">ln</a></span><span class="op" id="6779189">.</span><span class="ident" id="6779190"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6779195">(</span><span class="op" id="6779196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779199">c</span><span class="op" id="6779200">,</span>&nbsp;<span class="ident" id="6779202">err</span>&nbsp;<span class="op" id="6779206">:=</span>&nbsp;<span class="ident" id="6779209"><a href="/gostd/net/tcpsock_posix.go.html#3378472">DialTCP</a></span><span class="op" id="6779216">(</span><span class="string" id="6779217">&#34;tcp&#34;</span><span class="op" id="6779222">,</span>&nbsp;<span class="builtintype" id="6779224">nil</span><span class="op" id="6779227">,</span>&nbsp;<span class="ident" id="6779229"><a href="/gostd/net/timeout_test.go.html#6779154">ln</a></span><span class="op" id="6779231">.</span><span class="ident" id="6779232"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6779236">(</span><span class="op" id="6779237">)</span><span class="op" id="6779238">.</span><span class="op" id="6779239">(</span><span class="op" id="6779240">*</span><span class="ident" id="6779241"><a href="/gostd/net/tcpsock.go.html#3373469">TCPAddr</a></span><span class="op" id="6779248">)</span><span class="op" id="6779249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6779252">if</span>&nbsp;<span class="ident" id="6779255"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span>&nbsp;<span class="op" id="6779259">!=</span>&nbsp;<span class="builtintype" id="6779262">nil</span>&nbsp;<span class="op" id="6779266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779270"><a href="/gostd/net/timeout_test.go.html#6779048">t</a></span><span class="op" id="6779271">.</span><span class="ident" id="6779272"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6779278">(</span><span class="string" id="6779279">&#34;Connect:&nbsp;%v&#34;</span><span class="op" id="6779292">,</span>&nbsp;<span class="ident" id="6779294"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span><span class="op" id="6779297">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6779300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6779303">defer</span>&nbsp;<span class="ident" id="6779309"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6779310">.</span><span class="ident" id="6779311"><a href="/gostd/net/net.go.html#3336674">Close</a></span><span class="op" id="6779316">(</span><span class="op" id="6779317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779320"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6779321">.</span><span class="ident" id="6779322"><a href="/gostd/net/net.go.html#3337096">SetDeadline</a></span><span class="op" id="6779333">(</span><span class="ident" id="6779334"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6779338">.</span><span class="ident" id="6779339"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6779342">(</span><span class="op" id="6779343">)</span><span class="op" id="6779344">.</span><span class="ident" id="6779345"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6779348">(</span><span class="ident" id="6779349"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6779353">.</span><span class="ident" id="6779354"><a href="/gostd/time/time.go.html#2734941">Hour</a></span><span class="op" id="6779358">)</span><span class="op" id="6779359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779362"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6779363">.</span><span class="ident" id="6779364"><a href="/gostd/net/net.go.html#3337279">SetReadDeadline</a></span><span class="op" id="6779379">(</span><span class="ident" id="6779380"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6779384">.</span><span class="ident" id="6779385"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6779388">(</span><span class="op" id="6779389">)</span><span class="op" id="6779390">.</span><span class="ident" id="6779391"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6779394">(</span><span class="op" id="6779395">-</span><span class="num" id="6779396">1</span>&nbsp;<span class="op" id="6779398">*</span>&nbsp;<span class="ident" id="6779400"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6779404">.</span><span class="ident" id="6779405"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6779411">)</span><span class="op" id="6779412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779415">buf</span>&nbsp;<span class="op" id="6779419">:=</span>&nbsp;<span class="builtinfunc" id="6779422">make</span><span class="op" id="6779426">(</span><span class="op" id="6779427">[</span><span class="op" id="6779428">]</span><span class="builtintype" id="6779429">byte</span><span class="op" id="6779433">,</span>&nbsp;<span class="num" id="6779435">1</span><span class="op" id="6779436">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6779439">if</span>&nbsp;<span class="ident" id="6779442">_</span><span class="op" id="6779443">,</span>&nbsp;<span class="ident" id="6779445"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span>&nbsp;<span class="op" id="6779449">=</span>&nbsp;<span class="ident" id="6779451"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6779452">.</span><span class="ident" id="6779453"><a href="/gostd/net/net.go.html#3336371">Read</a></span><span class="op" id="6779457">(</span><span class="ident" id="6779458"><a href="/gostd/net/timeout_test.go.html#6779415">buf</a></span><span class="op" id="6779461">)</span><span class="op" id="6779462">;</span>&nbsp;<span class="op" id="6779464">!</span><span class="ident" id="6779465"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6779474">(</span><span class="ident" id="6779475"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span><span class="op" id="6779478">)</span>&nbsp;<span class="op" id="6779480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779484"><a href="/gostd/net/timeout_test.go.html#6779048">t</a></span><span class="op" id="6779485">.</span><span class="ident" id="6779486"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6779492">(</span><span class="string" id="6779493">&#34;Read:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6779524">,</span>&nbsp;<span class="ident" id="6779526"><a href="/gostd/net/net.go.html#3341194">errTimeout</a></span><span class="op" id="6779536">,</span>&nbsp;<span class="ident" id="6779538"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span><span class="op" id="6779541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6779544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6779547">if</span>&nbsp;<span class="ident" id="6779550">_</span><span class="op" id="6779551">,</span>&nbsp;<span class="ident" id="6779553"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span>&nbsp;<span class="op" id="6779557">=</span>&nbsp;<span class="ident" id="6779559"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6779560">.</span><span class="ident" id="6779561"><a href="/gostd/net/net.go.html#3336371">Read</a></span><span class="op" id="6779565">(</span><span class="ident" id="6779566"><a href="/gostd/net/timeout_test.go.html#6779415">buf</a></span><span class="op" id="6779569">)</span><span class="op" id="6779570">;</span>&nbsp;<span class="op" id="6779572">!</span><span class="ident" id="6779573"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6779582">(</span><span class="ident" id="6779583"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span><span class="op" id="6779586">)</span>&nbsp;<span class="op" id="6779588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779592"><a href="/gostd/net/timeout_test.go.html#6779048">t</a></span><span class="op" id="6779593">.</span><span class="ident" id="6779594"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6779600">(</span><span class="string" id="6779601">&#34;Read:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6779632">,</span>&nbsp;<span class="ident" id="6779634"><a href="/gostd/net/net.go.html#3341194">errTimeout</a></span><span class="op" id="6779644">,</span>&nbsp;<span class="ident" id="6779646"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span><span class="op" id="6779649">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6779652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779655"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6779656">.</span><span class="ident" id="6779657"><a href="/gostd/net/net.go.html#3337096">SetDeadline</a></span><span class="op" id="6779668">(</span><span class="ident" id="6779669"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6779673">.</span><span class="ident" id="6779674"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6779677">(</span><span class="op" id="6779678">)</span><span class="op" id="6779679">.</span><span class="ident" id="6779680"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6779683">(</span><span class="num" id="6779684">100</span>&nbsp;<span class="op" id="6779688">*</span>&nbsp;<span class="ident" id="6779690"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6779694">.</span><span class="ident" id="6779695"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6779706">)</span><span class="op" id="6779707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6779710">if</span>&nbsp;<span class="ident" id="6779713">_</span><span class="op" id="6779714">,</span>&nbsp;<span class="ident" id="6779716"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span>&nbsp;<span class="op" id="6779720">=</span>&nbsp;<span class="ident" id="6779722"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6779723">.</span><span class="ident" id="6779724"><a href="/gostd/net/net.go.html#3336371">Read</a></span><span class="op" id="6779728">(</span><span class="ident" id="6779729"><a href="/gostd/net/timeout_test.go.html#6779415">buf</a></span><span class="op" id="6779732">)</span><span class="op" id="6779733">;</span>&nbsp;<span class="op" id="6779735">!</span><span class="ident" id="6779736"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6779745">(</span><span class="ident" id="6779746"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span><span class="op" id="6779749">)</span>&nbsp;<span class="op" id="6779751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779755"><a href="/gostd/net/timeout_test.go.html#6779048">t</a></span><span class="op" id="6779756">.</span><span class="ident" id="6779757"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6779763">(</span><span class="string" id="6779764">&#34;Read:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6779795">,</span>&nbsp;<span class="ident" id="6779797"><a href="/gostd/net/net.go.html#3341194">errTimeout</a></span><span class="op" id="6779807">,</span>&nbsp;<span class="ident" id="6779809"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span><span class="op" id="6779812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6779815">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6779818">if</span>&nbsp;<span class="ident" id="6779821">_</span><span class="op" id="6779822">,</span>&nbsp;<span class="ident" id="6779824"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span>&nbsp;<span class="op" id="6779828">=</span>&nbsp;<span class="ident" id="6779830"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6779831">.</span><span class="ident" id="6779832"><a href="/gostd/net/net.go.html#3336371">Read</a></span><span class="op" id="6779836">(</span><span class="ident" id="6779837"><a href="/gostd/net/timeout_test.go.html#6779415">buf</a></span><span class="op" id="6779840">)</span><span class="op" id="6779841">;</span>&nbsp;<span class="op" id="6779843">!</span><span class="ident" id="6779844"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6779853">(</span><span class="ident" id="6779854"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span><span class="op" id="6779857">)</span>&nbsp;<span class="op" id="6779859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779863"><a href="/gostd/net/timeout_test.go.html#6779048">t</a></span><span class="op" id="6779864">.</span><span class="ident" id="6779865"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6779871">(</span><span class="string" id="6779872">&#34;Read:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6779903">,</span>&nbsp;<span class="ident" id="6779905"><a href="/gostd/net/net.go.html#3341194">errTimeout</a></span><span class="op" id="6779915">,</span>&nbsp;<span class="ident" id="6779917"><a href="/gostd/net/timeout_test.go.html#6779202">err</a></span><span class="op" id="6779920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6779923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779926"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6779927">.</span><span class="ident" id="6779928"><a href="/gostd/net/net.go.html#3337279">SetReadDeadline</a></span><span class="op" id="6779943">(</span><span class="ident" id="6779944"><a href="/gostd/net/net.go.html#3342276">noDeadline</a></span><span class="op" id="6779954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6779957"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6779958">.</span><span class="ident" id="6779959"><a href="/gostd/net/net.go.html#3337472">SetWriteDeadline</a></span><span class="op" id="6779975">(</span><span class="ident" id="6779976"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6779980">.</span><span class="ident" id="6779981"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6779984">(</span><span class="op" id="6779985">)</span><span class="op" id="6779986">.</span><span class="ident" id="6779987"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6779990">(</span><span class="op" id="6779991">-</span><span class="num" id="6779992">1</span>&nbsp;<span class="op" id="6779994">*</span>&nbsp;<span class="ident" id="6779996"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6780000">.</span><span class="ident" id="6780001"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6780007">)</span><span class="op" id="6780008">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780011">errc</span>&nbsp;<span class="op" id="6780016">:=</span>&nbsp;<span class="builtinfunc" id="6780019">make</span><span class="op" id="6780023">(</span><span class="keyword" id="6780024">chan</span>&nbsp;<span class="builtintype" id="6780029">error</span><span class="op" id="6780034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780037">go</span>&nbsp;<span class="keyword" id="6780040">func</span><span class="op" id="6780044">(</span><span class="op" id="6780045">)</span>&nbsp;<span class="op" id="6780047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780051">_</span><span class="op" id="6780052">,</span>&nbsp;<span class="ident" id="6780054">err</span>&nbsp;<span class="op" id="6780058">:=</span>&nbsp;<span class="ident" id="6780061"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6780062">.</span><span class="ident" id="6780063"><a href="/gostd/net/net.go.html#3336371">Read</a></span><span class="op" id="6780067">(</span><span class="ident" id="6780068"><a href="/gostd/net/timeout_test.go.html#6779415">buf</a></span><span class="op" id="6780071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780075"><a href="/gostd/net/timeout_test.go.html#6780011">errc</a></span>&nbsp;<span class="op" id="6780080">&lt;-</span>&nbsp;<span class="ident" id="6780083"><a href="/gostd/net/timeout_test.go.html#6780054">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6780088">}</span><span class="op" id="6780089">(</span><span class="op" id="6780090">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780093"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6780097">.</span><span class="ident" id="6780098"><a href="/gostd/time/sleep.go.html#2713940">Sleep</a></span><span class="op" id="6780103">(</span><span class="num" id="6780104">100</span>&nbsp;<span class="op" id="6780108">*</span>&nbsp;<span class="ident" id="6780110"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6780114">.</span><span class="ident" id="6780115"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6780126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780129">select</span>&nbsp;<span class="op" id="6780136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780139">case</span>&nbsp;<span class="ident" id="6780144">err</span>&nbsp;<span class="op" id="6780148">:=</span>&nbsp;<span class="op" id="6780151">&lt;-</span><span class="ident" id="6780153"><a href="/gostd/net/timeout_test.go.html#6780011">errc</a></span><span class="op" id="6780157">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780161"><a href="/gostd/net/timeout_test.go.html#6779048">t</a></span><span class="op" id="6780162">.</span><span class="ident" id="6780163"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6780169">(</span><span class="string" id="6780170">&#34;Expected&nbsp;Read()&nbsp;to&nbsp;not&nbsp;return,&nbsp;but&nbsp;it&nbsp;returned&nbsp;with&nbsp;%v\n&#34;</span><span class="op" id="6780228">,</span>&nbsp;<span class="ident" id="6780230"><a href="/gostd/net/timeout_test.go.html#6780144">err</a></span><span class="op" id="6780233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780236">default</span><span class="op" id="6780243">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6780246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780249"><a href="/gostd/net/timeout_test.go.html#6779199">c</a></span><span class="op" id="6780250">.</span><span class="ident" id="6780251"><a href="/gostd/net/net.go.html#3336674">Close</a></span><span class="op" id="6780256">(</span><span class="op" id="6780257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780260">switch</span>&nbsp;<span class="ident" id="6780267">nerr</span>&nbsp;<span class="op" id="6780272">:=</span>&nbsp;<span class="op" id="6780275">&lt;-</span><span class="ident" id="6780277"><a href="/gostd/net/timeout_test.go.html#6780011">errc</a></span><span class="op" id="6780281">;</span>&nbsp;<span class="ident" id="6780283">err</span>&nbsp;<span class="op" id="6780287">:=</span>&nbsp;<span class="ident" id="6780290"><a href="/gostd/net/timeout_test.go.html#6780267">nerr</a></span><span class="op" id="6780294">.</span><span class="op" id="6780295">(</span><span class="keyword" id="6780296">type</span><span class="op" id="6780300">)</span>&nbsp;<span class="op" id="6780302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780305">case</span>&nbsp;<span class="op" id="6780310">*</span><span class="ident" id="6780311"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="6780318">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780322">if</span>&nbsp;<span class="ident" id="6780325"><a href="/gostd/net/timeout_test.go.html#6780283">err</a></span><span class="op" id="6780328">.</span><span class="ident" id="6780329"><a href="/gostd/net/net.go.html#3341902">Err</a></span>&nbsp;<span class="op" id="6780333">!=</span>&nbsp;<span class="ident" id="6780336"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span>&nbsp;<span class="op" id="6780347">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780352"><a href="/gostd/net/timeout_test.go.html#6779048">t</a></span><span class="op" id="6780353">.</span><span class="ident" id="6780354"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6780360">(</span><span class="string" id="6780361">&#34;Read:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6780392">,</span>&nbsp;<span class="ident" id="6780394"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span><span class="op" id="6780404">,</span>&nbsp;<span class="ident" id="6780406"><a href="/gostd/net/timeout_test.go.html#6780283">err</a></span><span class="op" id="6780409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6780413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780416">default</span><span class="op" id="6780423">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780427">if</span>&nbsp;<span class="ident" id="6780430"><a href="/gostd/net/timeout_test.go.html#6780283">err</a></span>&nbsp;<span class="op" id="6780434">==</span>&nbsp;<span class="ident" id="6780437"><a href="/gostd/net/timeout_test.go.html#6777541">io</a></span><span class="op" id="6780439">.</span><span class="ident" id="6780440"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="6780444">&amp;&amp;</span>&nbsp;<span class="ident" id="6780447"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6780454">.</span><span class="ident" id="6780455"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6780460">==</span>&nbsp;<span class="string" id="6780463">&#34;nacl&#34;</span>&nbsp;<span class="op" id="6780470">{</span>&nbsp;<span class="comment" id="6780472">//&nbsp;close&nbsp;enough;&nbsp;golang.org/issue/8044</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780514">break</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6780522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780526">if</span>&nbsp;<span class="ident" id="6780529"><a href="/gostd/net/timeout_test.go.html#6780283">err</a></span>&nbsp;<span class="op" id="6780533">!=</span>&nbsp;<span class="ident" id="6780536"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span>&nbsp;<span class="op" id="6780547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780552"><a href="/gostd/net/timeout_test.go.html#6779048">t</a></span><span class="op" id="6780553">.</span><span class="ident" id="6780554"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6780560">(</span><span class="string" id="6780561">&#34;Read:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6780592">,</span>&nbsp;<span class="ident" id="6780594"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span><span class="op" id="6780604">,</span>&nbsp;<span class="ident" id="6780606"><a href="/gostd/net/timeout_test.go.html#6780283">err</a></span><span class="op" id="6780609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6780613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6780616">}</span><br>
<span class="lineno">130</span><span class="op" id="6780618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6780621">func</span>&nbsp;<span class="ident" id="6780626">TestWriteTimeout</span><span class="op" id="6780642">(</span><span class="ident" id="6780643">t</span>&nbsp;<span class="op" id="6780645">*</span><span class="ident" id="6780646"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6780653">.</span><span class="ident" id="6780654"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6780655">)</span>&nbsp;<span class="op" id="6780657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780660">switch</span>&nbsp;<span class="ident" id="6780667"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6780674">.</span><span class="ident" id="6780675"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6780680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780683">case</span>&nbsp;<span class="string" id="6780688">&#34;plan9&#34;</span><span class="op" id="6780695">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780699"><a href="/gostd/net/timeout_test.go.html#6780643">t</a></span><span class="op" id="6780700">.</span><span class="ident" id="6780701"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6780706">(</span><span class="string" id="6780707">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6780728">,</span>&nbsp;<span class="ident" id="6780730"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6780737">.</span><span class="ident" id="6780738"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6780742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6780745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780749">ln</span>&nbsp;<span class="op" id="6780752">:=</span>&nbsp;<span class="ident" id="6780755"><a href="/gostd/net/dial_test.go.html#6621447">newLocalListener</a></span><span class="op" id="6780771">(</span><span class="ident" id="6780772"><a href="/gostd/net/timeout_test.go.html#6780643">t</a></span><span class="op" id="6780773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780776">defer</span>&nbsp;<span class="ident" id="6780782"><a href="/gostd/net/timeout_test.go.html#6780749">ln</a></span><span class="op" id="6780784">.</span><span class="ident" id="6780785"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6780790">(</span><span class="op" id="6780791">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780794">c</span><span class="op" id="6780795">,</span>&nbsp;<span class="ident" id="6780797">err</span>&nbsp;<span class="op" id="6780801">:=</span>&nbsp;<span class="ident" id="6780804"><a href="/gostd/net/tcpsock_posix.go.html#3378472">DialTCP</a></span><span class="op" id="6780811">(</span><span class="string" id="6780812">&#34;tcp&#34;</span><span class="op" id="6780817">,</span>&nbsp;<span class="builtintype" id="6780819">nil</span><span class="op" id="6780822">,</span>&nbsp;<span class="ident" id="6780824"><a href="/gostd/net/timeout_test.go.html#6780749">ln</a></span><span class="op" id="6780826">.</span><span class="ident" id="6780827"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6780831">(</span><span class="op" id="6780832">)</span><span class="op" id="6780833">.</span><span class="op" id="6780834">(</span><span class="op" id="6780835">*</span><span class="ident" id="6780836"><a href="/gostd/net/tcpsock.go.html#3373469">TCPAddr</a></span><span class="op" id="6780843">)</span><span class="op" id="6780844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780847">if</span>&nbsp;<span class="ident" id="6780850"><a href="/gostd/net/timeout_test.go.html#6780797">err</a></span>&nbsp;<span class="op" id="6780854">!=</span>&nbsp;<span class="builtintype" id="6780857">nil</span>&nbsp;<span class="op" id="6780861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780865"><a href="/gostd/net/timeout_test.go.html#6780643">t</a></span><span class="op" id="6780866">.</span><span class="ident" id="6780867"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6780873">(</span><span class="string" id="6780874">&#34;Connect:&nbsp;%v&#34;</span><span class="op" id="6780887">,</span>&nbsp;<span class="ident" id="6780889"><a href="/gostd/net/timeout_test.go.html#6780797">err</a></span><span class="op" id="6780892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6780895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6780898">defer</span>&nbsp;<span class="ident" id="6780904"><a href="/gostd/net/timeout_test.go.html#6780794">c</a></span><span class="op" id="6780905">.</span><span class="ident" id="6780906"><a href="/gostd/net/net.go.html#3336674">Close</a></span><span class="op" id="6780911">(</span><span class="op" id="6780912">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780915"><a href="/gostd/net/timeout_test.go.html#6780794">c</a></span><span class="op" id="6780916">.</span><span class="ident" id="6780917"><a href="/gostd/net/net.go.html#3337096">SetDeadline</a></span><span class="op" id="6780928">(</span><span class="ident" id="6780929"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6780933">.</span><span class="ident" id="6780934"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6780937">(</span><span class="op" id="6780938">)</span><span class="op" id="6780939">.</span><span class="ident" id="6780940"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6780943">(</span><span class="ident" id="6780944"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6780948">.</span><span class="ident" id="6780949"><a href="/gostd/time/time.go.html#2734941">Hour</a></span><span class="op" id="6780953">)</span><span class="op" id="6780954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6780957"><a href="/gostd/net/timeout_test.go.html#6780794">c</a></span><span class="op" id="6780958">.</span><span class="ident" id="6780959"><a href="/gostd/net/net.go.html#3337472">SetWriteDeadline</a></span><span class="op" id="6780975">(</span><span class="ident" id="6780976"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6780980">.</span><span class="ident" id="6780981"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6780984">(</span><span class="op" id="6780985">)</span><span class="op" id="6780986">.</span><span class="ident" id="6780987"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6780990">(</span><span class="op" id="6780991">-</span><span class="num" id="6780992">1</span>&nbsp;<span class="op" id="6780994">*</span>&nbsp;<span class="ident" id="6780996"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6781000">.</span><span class="ident" id="6781001"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6781007">)</span><span class="op" id="6781008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781011">buf</span>&nbsp;<span class="op" id="6781015">:=</span>&nbsp;<span class="builtinfunc" id="6781018">make</span><span class="op" id="6781022">(</span><span class="op" id="6781023">[</span><span class="op" id="6781024">]</span><span class="builtintype" id="6781025">byte</span><span class="op" id="6781029">,</span>&nbsp;<span class="num" id="6781031">4096</span><span class="op" id="6781035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781038">writeUntilTimeout</span>&nbsp;<span class="op" id="6781056">:=</span>&nbsp;<span class="keyword" id="6781059">func</span><span class="op" id="6781063">(</span><span class="op" id="6781064">)</span>&nbsp;<span class="op" id="6781066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781070">for</span>&nbsp;<span class="op" id="6781074">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781079">_</span><span class="op" id="6781080">,</span>&nbsp;<span class="ident" id="6781082">err</span>&nbsp;<span class="op" id="6781086">:=</span>&nbsp;<span class="ident" id="6781089"><a href="/gostd/net/timeout_test.go.html#6780794">c</a></span><span class="op" id="6781090">.</span><span class="ident" id="6781091"><a href="/gostd/net/net.go.html#3336527">Write</a></span><span class="op" id="6781096">(</span><span class="ident" id="6781097"><a href="/gostd/net/timeout_test.go.html#6781011">buf</a></span><span class="op" id="6781100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781105">if</span>&nbsp;<span class="ident" id="6781108"><a href="/gostd/net/timeout_test.go.html#6781082">err</a></span>&nbsp;<span class="op" id="6781112">!=</span>&nbsp;<span class="builtintype" id="6781115">nil</span>&nbsp;<span class="op" id="6781119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781125">if</span>&nbsp;<span class="ident" id="6781128"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6781137">(</span><span class="ident" id="6781138"><a href="/gostd/net/timeout_test.go.html#6781082">err</a></span><span class="op" id="6781141">)</span>&nbsp;<span class="op" id="6781143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781150">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781161">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781167"><a href="/gostd/net/timeout_test.go.html#6780643">t</a></span><span class="op" id="6781168">.</span><span class="ident" id="6781169"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6781175">(</span><span class="string" id="6781176">&#34;Write:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6781208">,</span>&nbsp;<span class="ident" id="6781210"><a href="/gostd/net/net.go.html#3341194">errTimeout</a></span><span class="op" id="6781220">,</span>&nbsp;<span class="ident" id="6781222"><a href="/gostd/net/timeout_test.go.html#6781082">err</a></span><span class="op" id="6781225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781240"><a href="/gostd/net/timeout_test.go.html#6781038">writeUntilTimeout</a></span><span class="op" id="6781257">(</span><span class="op" id="6781258">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781261"><a href="/gostd/net/timeout_test.go.html#6780794">c</a></span><span class="op" id="6781262">.</span><span class="ident" id="6781263"><a href="/gostd/net/net.go.html#3337096">SetDeadline</a></span><span class="op" id="6781274">(</span><span class="ident" id="6781275"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6781279">.</span><span class="ident" id="6781280"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6781283">(</span><span class="op" id="6781284">)</span><span class="op" id="6781285">.</span><span class="ident" id="6781286"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6781289">(</span><span class="num" id="6781290">10</span>&nbsp;<span class="op" id="6781293">*</span>&nbsp;<span class="ident" id="6781295"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6781299">.</span><span class="ident" id="6781300"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6781311">)</span><span class="op" id="6781312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781315"><a href="/gostd/net/timeout_test.go.html#6781038">writeUntilTimeout</a></span><span class="op" id="6781332">(</span><span class="op" id="6781333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781336"><a href="/gostd/net/timeout_test.go.html#6781038">writeUntilTimeout</a></span><span class="op" id="6781353">(</span><span class="op" id="6781354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781357"><a href="/gostd/net/timeout_test.go.html#6780794">c</a></span><span class="op" id="6781358">.</span><span class="ident" id="6781359"><a href="/gostd/net/net.go.html#3337472">SetWriteDeadline</a></span><span class="op" id="6781375">(</span><span class="ident" id="6781376"><a href="/gostd/net/net.go.html#3342276">noDeadline</a></span><span class="op" id="6781386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781389"><a href="/gostd/net/timeout_test.go.html#6780794">c</a></span><span class="op" id="6781390">.</span><span class="ident" id="6781391"><a href="/gostd/net/net.go.html#3337279">SetReadDeadline</a></span><span class="op" id="6781406">(</span><span class="ident" id="6781407"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6781411">.</span><span class="ident" id="6781412"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6781415">(</span><span class="op" id="6781416">)</span><span class="op" id="6781417">.</span><span class="ident" id="6781418"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6781421">(</span><span class="op" id="6781422">-</span><span class="num" id="6781423">1</span>&nbsp;<span class="op" id="6781425">*</span>&nbsp;<span class="ident" id="6781427"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6781431">.</span><span class="ident" id="6781432"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6781438">)</span><span class="op" id="6781439">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781442">errc</span>&nbsp;<span class="op" id="6781447">:=</span>&nbsp;<span class="builtinfunc" id="6781450">make</span><span class="op" id="6781454">(</span><span class="keyword" id="6781455">chan</span>&nbsp;<span class="builtintype" id="6781460">error</span><span class="op" id="6781465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781468">go</span>&nbsp;<span class="keyword" id="6781471">func</span><span class="op" id="6781475">(</span><span class="op" id="6781476">)</span>&nbsp;<span class="op" id="6781478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781482">for</span>&nbsp;<span class="op" id="6781486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781491">_</span><span class="op" id="6781492">,</span>&nbsp;<span class="ident" id="6781494">err</span>&nbsp;<span class="op" id="6781498">:=</span>&nbsp;<span class="ident" id="6781501"><a href="/gostd/net/timeout_test.go.html#6780794">c</a></span><span class="op" id="6781502">.</span><span class="ident" id="6781503"><a href="/gostd/net/net.go.html#3336527">Write</a></span><span class="op" id="6781508">(</span><span class="ident" id="6781509"><a href="/gostd/net/timeout_test.go.html#6781011">buf</a></span><span class="op" id="6781512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781517">if</span>&nbsp;<span class="ident" id="6781520"><a href="/gostd/net/timeout_test.go.html#6781494">err</a></span>&nbsp;<span class="op" id="6781524">!=</span>&nbsp;<span class="builtintype" id="6781527">nil</span>&nbsp;<span class="op" id="6781531">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781537"><a href="/gostd/net/timeout_test.go.html#6781442">errc</a></span>&nbsp;<span class="op" id="6781542">&lt;-</span>&nbsp;<span class="ident" id="6781545"><a href="/gostd/net/timeout_test.go.html#6781494">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781559">}</span><span class="op" id="6781560">(</span><span class="op" id="6781561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781564"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6781568">.</span><span class="ident" id="6781569"><a href="/gostd/time/sleep.go.html#2713940">Sleep</a></span><span class="op" id="6781574">(</span><span class="num" id="6781575">100</span>&nbsp;<span class="op" id="6781579">*</span>&nbsp;<span class="ident" id="6781581"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6781585">.</span><span class="ident" id="6781586"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6781597">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781600">select</span>&nbsp;<span class="op" id="6781607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781610">case</span>&nbsp;<span class="ident" id="6781615">err</span>&nbsp;<span class="op" id="6781619">:=</span>&nbsp;<span class="op" id="6781622">&lt;-</span><span class="ident" id="6781624"><a href="/gostd/net/timeout_test.go.html#6781442">errc</a></span><span class="op" id="6781628">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781632"><a href="/gostd/net/timeout_test.go.html#6780643">t</a></span><span class="op" id="6781633">.</span><span class="ident" id="6781634"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6781640">(</span><span class="string" id="6781641">&#34;Expected&nbsp;Write()&nbsp;to&nbsp;not&nbsp;return,&nbsp;but&nbsp;it&nbsp;returned&nbsp;with&nbsp;%v\n&#34;</span><span class="op" id="6781700">,</span>&nbsp;<span class="ident" id="6781702"><a href="/gostd/net/timeout_test.go.html#6781615">err</a></span><span class="op" id="6781705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781708">default</span><span class="op" id="6781715">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781718">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781721"><a href="/gostd/net/timeout_test.go.html#6780794">c</a></span><span class="op" id="6781722">.</span><span class="ident" id="6781723"><a href="/gostd/net/net.go.html#3336674">Close</a></span><span class="op" id="6781728">(</span><span class="op" id="6781729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781732">switch</span>&nbsp;<span class="ident" id="6781739">nerr</span>&nbsp;<span class="op" id="6781744">:=</span>&nbsp;<span class="op" id="6781747">&lt;-</span><span class="ident" id="6781749"><a href="/gostd/net/timeout_test.go.html#6781442">errc</a></span><span class="op" id="6781753">;</span>&nbsp;<span class="ident" id="6781755">err</span>&nbsp;<span class="op" id="6781759">:=</span>&nbsp;<span class="ident" id="6781762"><a href="/gostd/net/timeout_test.go.html#6781739">nerr</a></span><span class="op" id="6781766">.</span><span class="op" id="6781767">(</span><span class="keyword" id="6781768">type</span><span class="op" id="6781772">)</span>&nbsp;<span class="op" id="6781774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781777">case</span>&nbsp;<span class="op" id="6781782">*</span><span class="ident" id="6781783"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="6781790">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781794">if</span>&nbsp;<span class="ident" id="6781797"><a href="/gostd/net/timeout_test.go.html#6781755">err</a></span><span class="op" id="6781800">.</span><span class="ident" id="6781801"><a href="/gostd/net/net.go.html#3341902">Err</a></span>&nbsp;<span class="op" id="6781805">!=</span>&nbsp;<span class="ident" id="6781808"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span>&nbsp;<span class="op" id="6781819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781824"><a href="/gostd/net/timeout_test.go.html#6780643">t</a></span><span class="op" id="6781825">.</span><span class="ident" id="6781826"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6781832">(</span><span class="string" id="6781833">&#34;Write:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6781865">,</span>&nbsp;<span class="ident" id="6781867"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span><span class="op" id="6781877">,</span>&nbsp;<span class="ident" id="6781879"><a href="/gostd/net/timeout_test.go.html#6781755">err</a></span><span class="op" id="6781882">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781889">default</span><span class="op" id="6781896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6781900">if</span>&nbsp;<span class="ident" id="6781903"><a href="/gostd/net/timeout_test.go.html#6781755">err</a></span>&nbsp;<span class="op" id="6781907">!=</span>&nbsp;<span class="ident" id="6781910"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span>&nbsp;<span class="op" id="6781921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6781926"><a href="/gostd/net/timeout_test.go.html#6780643">t</a></span><span class="op" id="6781927">.</span><span class="ident" id="6781928"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6781934">(</span><span class="string" id="6781935">&#34;Write:&nbsp;expected&nbsp;err&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6781967">,</span>&nbsp;<span class="ident" id="6781969"><a href="/gostd/net/net.go.html#3341239">errClosing</a></span><span class="op" id="6781979">,</span>&nbsp;<span class="ident" id="6781981"><a href="/gostd/net/timeout_test.go.html#6781755">err</a></span><span class="op" id="6781984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781988">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6781991">}</span><br>
<span class="lineno"></span><span class="op" id="6781993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6781996">func</span>&nbsp;<span class="ident" id="6782001">testTimeout</span><span class="op" id="6782012">(</span><span class="ident" id="6782013">t</span>&nbsp;<span class="op" id="6782015">*</span><span class="ident" id="6782016"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6782023">.</span><span class="ident" id="6782024"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6782025">,</span>&nbsp;<span class="ident" id="6782027">net</span><span class="op" id="6782030">,</span>&nbsp;<span class="ident" id="6782032">addr</span>&nbsp;<span class="builtintype" id="6782037">string</span><span class="op" id="6782043">,</span>&nbsp;<span class="ident" id="6782045">readFrom</span>&nbsp;<span class="builtintype" id="6782054">bool</span><span class="op" id="6782058">)</span>&nbsp;<span class="op" id="6782060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782063">c</span><span class="op" id="6782064">,</span>&nbsp;<span class="ident" id="6782066">err</span>&nbsp;<span class="op" id="6782070">:=</span>&nbsp;<span class="ident" id="6782073"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6782077">(</span><span class="ident" id="6782078"><a href="/gostd/net/timeout_test.go.html#6782027">net</a></span><span class="op" id="6782081">,</span>&nbsp;<span class="ident" id="6782083"><a href="/gostd/net/timeout_test.go.html#6782032">addr</a></span><span class="op" id="6782087">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782090">if</span>&nbsp;<span class="ident" id="6782093"><a href="/gostd/net/timeout_test.go.html#6782066">err</a></span>&nbsp;<span class="op" id="6782097">!=</span>&nbsp;<span class="builtintype" id="6782100">nil</span>&nbsp;<span class="op" id="6782104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782108"><a href="/gostd/net/timeout_test.go.html#6782013">t</a></span><span class="op" id="6782109">.</span><span class="ident" id="6782110"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6782116">(</span><span class="string" id="6782117">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6782142">,</span>&nbsp;<span class="ident" id="6782144"><a href="/gostd/net/timeout_test.go.html#6782027">net</a></span><span class="op" id="6782147">,</span>&nbsp;<span class="ident" id="6782149"><a href="/gostd/net/timeout_test.go.html#6782032">addr</a></span><span class="op" id="6782153">,</span>&nbsp;<span class="ident" id="6782155"><a href="/gostd/net/timeout_test.go.html#6782066">err</a></span><span class="op" id="6782158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782162">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6782170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782173">defer</span>&nbsp;<span class="ident" id="6782179"><a href="/gostd/net/timeout_test.go.html#6782063">c</a></span><span class="op" id="6782180">.</span><span class="ident" id="6782181"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6782186">(</span><span class="op" id="6782187">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782190">what</span>&nbsp;<span class="op" id="6782195">:=</span>&nbsp;<span class="string" id="6782198">&#34;Read&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782206">if</span>&nbsp;<span class="ident" id="6782209"><a href="/gostd/net/timeout_test.go.html#6782045">readFrom</a></span>&nbsp;<span class="op" id="6782218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782222"><a href="/gostd/net/timeout_test.go.html#6782190">what</a></span>&nbsp;<span class="op" id="6782227">=</span>&nbsp;<span class="string" id="6782229">&#34;ReadFrom&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6782241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782245">errc</span>&nbsp;<span class="op" id="6782250">:=</span>&nbsp;<span class="builtinfunc" id="6782253">make</span><span class="op" id="6782257">(</span><span class="keyword" id="6782258">chan</span>&nbsp;<span class="builtintype" id="6782263">error</span><span class="op" id="6782268">,</span>&nbsp;<span class="num" id="6782270">1</span><span class="op" id="6782271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782274">go</span>&nbsp;<span class="keyword" id="6782277">func</span><span class="op" id="6782281">(</span><span class="op" id="6782282">)</span>&nbsp;<span class="op" id="6782284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782288">t0</span>&nbsp;<span class="op" id="6782291">:=</span>&nbsp;<span class="ident" id="6782294"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6782298">.</span><span class="ident" id="6782299"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6782302">(</span><span class="op" id="6782303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782307"><a href="/gostd/net/timeout_test.go.html#6782063">c</a></span><span class="op" id="6782308">.</span><span class="ident" id="6782309"><a href="/gostd/net/net.go.html#3335873">SetReadDeadline</a></span><span class="op" id="6782324">(</span><span class="ident" id="6782325"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6782329">.</span><span class="ident" id="6782330"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6782333">(</span><span class="op" id="6782334">)</span><span class="op" id="6782335">.</span><span class="ident" id="6782336"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6782339">(</span><span class="num" id="6782340">100</span>&nbsp;<span class="op" id="6782344">*</span>&nbsp;<span class="ident" id="6782346"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6782350">.</span><span class="ident" id="6782351"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6782362">)</span><span class="op" id="6782363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782367">var</span>&nbsp;<span class="ident" id="6782371">b</span>&nbsp;<span class="op" id="6782373">[</span><span class="num" id="6782374">100</span><span class="op" id="6782377">]</span><span class="builtintype" id="6782378">byte</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782385">var</span>&nbsp;<span class="ident" id="6782389">n</span>&nbsp;<span class="builtintype" id="6782391">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782397">var</span>&nbsp;<span class="ident" id="6782401">err</span>&nbsp;<span class="builtintype" id="6782405">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782413">if</span>&nbsp;<span class="ident" id="6782416"><a href="/gostd/net/timeout_test.go.html#6782045">readFrom</a></span>&nbsp;<span class="op" id="6782425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782430"><a href="/gostd/net/timeout_test.go.html#6782389">n</a></span><span class="op" id="6782431">,</span>&nbsp;<span class="ident" id="6782433">_</span><span class="op" id="6782434">,</span>&nbsp;<span class="ident" id="6782436"><a href="/gostd/net/timeout_test.go.html#6782401">err</a></span>&nbsp;<span class="op" id="6782440">=</span>&nbsp;<span class="ident" id="6782442"><a href="/gostd/net/timeout_test.go.html#6782063">c</a></span><span class="op" id="6782443">.</span><span class="op" id="6782444">(</span><span class="ident" id="6782445"><a href="/gostd/net/net.go.html#3338833">PacketConn</a></span><span class="op" id="6782455">)</span><span class="op" id="6782456">.</span><span class="ident" id="6782457"><a href="/gostd/net/net.go.html#3339190">ReadFrom</a></span><span class="op" id="6782465">(</span><span class="ident" id="6782466"><a href="/gostd/net/timeout_test.go.html#6782371">b</a></span><span class="op" id="6782467">[</span><span class="num" id="6782468">0</span><span class="op" id="6782469">:</span><span class="op" id="6782470">]</span><span class="op" id="6782471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6782475">}</span>&nbsp;<span class="keyword" id="6782477">else</span>&nbsp;<span class="op" id="6782482">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782487"><a href="/gostd/net/timeout_test.go.html#6782389">n</a></span><span class="op" id="6782488">,</span>&nbsp;<span class="ident" id="6782490"><a href="/gostd/net/timeout_test.go.html#6782401">err</a></span>&nbsp;<span class="op" id="6782494">=</span>&nbsp;<span class="ident" id="6782496"><a href="/gostd/net/timeout_test.go.html#6782063">c</a></span><span class="op" id="6782497">.</span><span class="ident" id="6782498"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6782502">(</span><span class="ident" id="6782503"><a href="/gostd/net/timeout_test.go.html#6782371">b</a></span><span class="op" id="6782504">[</span><span class="num" id="6782505">0</span><span class="op" id="6782506">:</span><span class="op" id="6782507">]</span><span class="op" id="6782508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6782512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782516">t1</span>&nbsp;<span class="op" id="6782519">:=</span>&nbsp;<span class="ident" id="6782522"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6782526">.</span><span class="ident" id="6782527"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6782530">(</span><span class="op" id="6782531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782535">if</span>&nbsp;<span class="ident" id="6782538"><a href="/gostd/net/timeout_test.go.html#6782389">n</a></span>&nbsp;<span class="op" id="6782540">!=</span>&nbsp;<span class="num" id="6782543">0</span>&nbsp;<span class="op" id="6782545">||</span>&nbsp;<span class="ident" id="6782548"><a href="/gostd/net/timeout_test.go.html#6782401">err</a></span>&nbsp;<span class="op" id="6782552">==</span>&nbsp;<span class="builtintype" id="6782555">nil</span>&nbsp;<span class="op" id="6782559">||</span>&nbsp;<span class="op" id="6782562">!</span><span class="ident" id="6782563"><a href="/gostd/net/timeout_test.go.html#6782401">err</a></span><span class="op" id="6782566">.</span><span class="op" id="6782567">(</span><span class="ident" id="6782568"><a href="/gostd/net/net.go.html#3338570">Error</a></span><span class="op" id="6782573">)</span><span class="op" id="6782574">.</span><span class="ident" id="6782575"><a href="/gostd/net/net.go.html#3338596">Timeout</a></span><span class="op" id="6782582">(</span><span class="op" id="6782583">)</span>&nbsp;<span class="op" id="6782585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782590"><a href="/gostd/net/timeout_test.go.html#6782245">errc</a></span>&nbsp;<span class="op" id="6782595">&lt;-</span>&nbsp;<span class="ident" id="6782598"><a href="/gostd/net/timeout_test.go.html#6777534">fmt</a></span><span class="op" id="6782601">.</span><span class="ident" id="6782602"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6782608">(</span><span class="string" id="6782609">&#34;%s(%q,&nbsp;%q)&nbsp;did&nbsp;not&nbsp;return&nbsp;0,&nbsp;timeout:&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="6782655">,</span>&nbsp;<span class="ident" id="6782657"><a href="/gostd/net/timeout_test.go.html#6782190">what</a></span><span class="op" id="6782661">,</span>&nbsp;<span class="ident" id="6782663"><a href="/gostd/net/timeout_test.go.html#6782027">net</a></span><span class="op" id="6782666">,</span>&nbsp;<span class="ident" id="6782668"><a href="/gostd/net/timeout_test.go.html#6782032">addr</a></span><span class="op" id="6782672">,</span>&nbsp;<span class="ident" id="6782674"><a href="/gostd/net/timeout_test.go.html#6782389">n</a></span><span class="op" id="6782675">,</span>&nbsp;<span class="ident" id="6782677"><a href="/gostd/net/timeout_test.go.html#6782401">err</a></span><span class="op" id="6782680">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782685">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6782694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782698">if</span>&nbsp;<span class="ident" id="6782701">dt</span>&nbsp;<span class="op" id="6782704">:=</span>&nbsp;<span class="ident" id="6782707"><a href="/gostd/net/timeout_test.go.html#6782516">t1</a></span><span class="op" id="6782709">.</span><span class="ident" id="6782710"><a href="/gostd/time/time.go.html#2739063">Sub</a></span><span class="op" id="6782713">(</span><span class="ident" id="6782714"><a href="/gostd/net/timeout_test.go.html#6782288">t0</a></span><span class="op" id="6782716">)</span><span class="op" id="6782717">;</span>&nbsp;<span class="ident" id="6782719"><a href="/gostd/net/timeout_test.go.html#6782701">dt</a></span>&nbsp;<span class="op" id="6782722">&lt;</span>&nbsp;<span class="num" id="6782724">50</span><span class="op" id="6782726">*</span><span class="ident" id="6782727"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6782731">.</span><span class="ident" id="6782732"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span>&nbsp;<span class="op" id="6782744">||</span>&nbsp;<span class="op" id="6782747">!</span><span class="ident" id="6782748"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6782755">.</span><span class="ident" id="6782756"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6782761">(</span><span class="op" id="6782762">)</span>&nbsp;<span class="op" id="6782764">&amp;&amp;</span>&nbsp;<span class="ident" id="6782767"><a href="/gostd/net/timeout_test.go.html#6782701">dt</a></span>&nbsp;<span class="op" id="6782770">&gt;</span>&nbsp;<span class="num" id="6782772">250</span><span class="op" id="6782775">*</span><span class="ident" id="6782776"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6782780">.</span><span class="ident" id="6782781"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span>&nbsp;<span class="op" id="6782793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782798"><a href="/gostd/net/timeout_test.go.html#6782245">errc</a></span>&nbsp;<span class="op" id="6782803">&lt;-</span>&nbsp;<span class="ident" id="6782806"><a href="/gostd/net/timeout_test.go.html#6777534">fmt</a></span><span class="op" id="6782809">.</span><span class="ident" id="6782810"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6782816">(</span><span class="string" id="6782817">&#34;%s(%q,&nbsp;%q)&nbsp;took&nbsp;%s,&nbsp;expected&nbsp;0.1s&#34;</span><span class="op" id="6782852">,</span>&nbsp;<span class="ident" id="6782854"><a href="/gostd/net/timeout_test.go.html#6782190">what</a></span><span class="op" id="6782858">,</span>&nbsp;<span class="ident" id="6782860"><a href="/gostd/net/timeout_test.go.html#6782027">net</a></span><span class="op" id="6782863">,</span>&nbsp;<span class="ident" id="6782865"><a href="/gostd/net/timeout_test.go.html#6782032">addr</a></span><span class="op" id="6782869">,</span>&nbsp;<span class="ident" id="6782871"><a href="/gostd/net/timeout_test.go.html#6782701">dt</a></span><span class="op" id="6782873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782878">return</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6782887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782891"><a href="/gostd/net/timeout_test.go.html#6782245">errc</a></span>&nbsp;<span class="op" id="6782896">&lt;-</span>&nbsp;<span class="builtintype" id="6782899">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6782904">}</span><span class="op" id="6782905">(</span><span class="op" id="6782906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782909">select</span>&nbsp;<span class="op" id="6782916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782919">case</span>&nbsp;<span class="ident" id="6782924">err</span>&nbsp;<span class="op" id="6782928">:=</span>&nbsp;<span class="op" id="6782931">&lt;-</span><span class="ident" id="6782933"><a href="/gostd/net/timeout_test.go.html#6782245">errc</a></span><span class="op" id="6782937">:</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782941">if</span>&nbsp;<span class="ident" id="6782944"><a href="/gostd/net/timeout_test.go.html#6782924">err</a></span>&nbsp;<span class="op" id="6782948">!=</span>&nbsp;<span class="builtintype" id="6782951">nil</span>&nbsp;<span class="op" id="6782955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6782960"><a href="/gostd/net/timeout_test.go.html#6782013">t</a></span><span class="op" id="6782961">.</span><span class="ident" id="6782962"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="6782967">(</span><span class="ident" id="6782968"><a href="/gostd/net/timeout_test.go.html#6782924">err</a></span><span class="op" id="6782971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6782975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6782978">case</span>&nbsp;<span class="op" id="6782983">&lt;-</span><span class="ident" id="6782985"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6782989">.</span><span class="ident" id="6782990"><a href="/gostd/time/sleep.go.html#2716644">After</a></span><span class="op" id="6782995">(</span><span class="num" id="6782996">1</span>&nbsp;<span class="op" id="6782998">*</span>&nbsp;<span class="ident" id="6783000"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6783004">.</span><span class="ident" id="6783005"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6783011">)</span><span class="op" id="6783012">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783016"><a href="/gostd/net/timeout_test.go.html#6782013">t</a></span><span class="op" id="6783017">.</span><span class="ident" id="6783018"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6783024">(</span><span class="string" id="6783025">&#34;%s(%q,&nbsp;%q)&nbsp;took&nbsp;over&nbsp;1&nbsp;second,&nbsp;expected&nbsp;0.1s&#34;</span><span class="op" id="6783071">,</span>&nbsp;<span class="ident" id="6783073"><a href="/gostd/net/timeout_test.go.html#6782190">what</a></span><span class="op" id="6783077">,</span>&nbsp;<span class="ident" id="6783079"><a href="/gostd/net/timeout_test.go.html#6782027">net</a></span><span class="op" id="6783082">,</span>&nbsp;<span class="ident" id="6783084"><a href="/gostd/net/timeout_test.go.html#6782032">addr</a></span><span class="op" id="6783088">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6783091">}</span><br>
<span class="lineno"></span><span class="op" id="6783093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6783096">func</span>&nbsp;<span class="ident" id="6783101">TestTimeoutUDP</span><span class="op" id="6783115">(</span><span class="ident" id="6783116">t</span>&nbsp;<span class="op" id="6783118">*</span><span class="ident" id="6783119"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6783126">.</span><span class="ident" id="6783127"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6783128">)</span>&nbsp;<span class="op" id="6783130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6783133">switch</span>&nbsp;<span class="ident" id="6783140"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6783147">.</span><span class="ident" id="6783148"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6783153">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6783156">case</span>&nbsp;<span class="string" id="6783161">&#34;plan9&#34;</span><span class="op" id="6783168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783172"><a href="/gostd/net/timeout_test.go.html#6783116">t</a></span><span class="op" id="6783173">.</span><span class="ident" id="6783174"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6783179">(</span><span class="string" id="6783180">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6783201">,</span>&nbsp;<span class="ident" id="6783203"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6783210">.</span><span class="ident" id="6783211"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6783215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6783218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6783222">//&nbsp;set&nbsp;up&nbsp;a&nbsp;listener&nbsp;that&nbsp;won&#39;t&nbsp;talk&nbsp;back</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783265">listening</span>&nbsp;<span class="op" id="6783275">:=</span>&nbsp;<span class="builtinfunc" id="6783278">make</span><span class="op" id="6783282">(</span><span class="keyword" id="6783283">chan</span>&nbsp;<span class="builtintype" id="6783288">string</span><span class="op" id="6783294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783297">done</span>&nbsp;<span class="op" id="6783302">:=</span>&nbsp;<span class="builtinfunc" id="6783305">make</span><span class="op" id="6783309">(</span><span class="keyword" id="6783310">chan</span>&nbsp;<span class="builtintype" id="6783315">int</span><span class="op" id="6783318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6783321">go</span>&nbsp;<span class="ident" id="6783324"><a href="/gostd/net/server_test.go.html#6760598">runDatagramPacketConnServer</a></span><span class="op" id="6783351">(</span><span class="ident" id="6783352"><a href="/gostd/net/timeout_test.go.html#6783116">t</a></span><span class="op" id="6783353">,</span>&nbsp;<span class="string" id="6783355">&#34;udp&#34;</span><span class="op" id="6783360">,</span>&nbsp;<span class="string" id="6783362">&#34;127.0.0.1:0&#34;</span><span class="op" id="6783375">,</span>&nbsp;<span class="ident" id="6783377"><a href="/gostd/net/timeout_test.go.html#6783265">listening</a></span><span class="op" id="6783386">,</span>&nbsp;<span class="ident" id="6783388"><a href="/gostd/net/timeout_test.go.html#6783297">done</a></span><span class="op" id="6783392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783395">addr</span>&nbsp;<span class="op" id="6783400">:=</span>&nbsp;<span class="op" id="6783403">&lt;-</span><span class="ident" id="6783405"><a href="/gostd/net/timeout_test.go.html#6783265">listening</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783417"><a href="/gostd/net/timeout_test.go.html#6782001">testTimeout</a></span><span class="op" id="6783428">(</span><span class="ident" id="6783429"><a href="/gostd/net/timeout_test.go.html#6783116">t</a></span><span class="op" id="6783430">,</span>&nbsp;<span class="string" id="6783432">&#34;udp&#34;</span><span class="op" id="6783437">,</span>&nbsp;<span class="ident" id="6783439"><a href="/gostd/net/timeout_test.go.html#6783395">addr</a></span><span class="op" id="6783443">,</span>&nbsp;<span class="builtintype" id="6783445">false</span><span class="op" id="6783450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783453"><a href="/gostd/net/timeout_test.go.html#6782001">testTimeout</a></span><span class="op" id="6783464">(</span><span class="ident" id="6783465"><a href="/gostd/net/timeout_test.go.html#6783116">t</a></span><span class="op" id="6783466">,</span>&nbsp;<span class="string" id="6783468">&#34;udp&#34;</span><span class="op" id="6783473">,</span>&nbsp;<span class="ident" id="6783475"><a href="/gostd/net/timeout_test.go.html#6783395">addr</a></span><span class="op" id="6783479">,</span>&nbsp;<span class="builtintype" id="6783481">true</span><span class="op" id="6783485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6783488">&lt;-</span><span class="ident" id="6783490"><a href="/gostd/net/timeout_test.go.html#6783297">done</a></span><br>
<span class="lineno"></span><span class="op" id="6783495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="6783498">func</span>&nbsp;<span class="ident" id="6783503">TestTimeoutTCP</span><span class="op" id="6783517">(</span><span class="ident" id="6783518">t</span>&nbsp;<span class="op" id="6783520">*</span><span class="ident" id="6783521"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6783528">.</span><span class="ident" id="6783529"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6783530">)</span>&nbsp;<span class="op" id="6783532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6783535">switch</span>&nbsp;<span class="ident" id="6783542"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6783549">.</span><span class="ident" id="6783550"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6783555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6783558">case</span>&nbsp;<span class="string" id="6783563">&#34;plan9&#34;</span><span class="op" id="6783570">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783574"><a href="/gostd/net/timeout_test.go.html#6783518">t</a></span><span class="op" id="6783575">.</span><span class="ident" id="6783576"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6783581">(</span><span class="string" id="6783582">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6783603">,</span>&nbsp;<span class="ident" id="6783605"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6783612">.</span><span class="ident" id="6783613"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6783617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6783620">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6783624">//&nbsp;set&nbsp;up&nbsp;a&nbsp;listener&nbsp;that&nbsp;won&#39;t&nbsp;talk&nbsp;back</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783667">listening</span>&nbsp;<span class="op" id="6783677">:=</span>&nbsp;<span class="builtinfunc" id="6783680">make</span><span class="op" id="6783684">(</span><span class="keyword" id="6783685">chan</span>&nbsp;<span class="builtintype" id="6783690">string</span><span class="op" id="6783696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783699">done</span>&nbsp;<span class="op" id="6783704">:=</span>&nbsp;<span class="builtinfunc" id="6783707">make</span><span class="op" id="6783711">(</span><span class="keyword" id="6783712">chan</span>&nbsp;<span class="builtintype" id="6783717">int</span><span class="op" id="6783720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6783723">go</span>&nbsp;<span class="ident" id="6783726"><a href="/gostd/net/server_test.go.html#6754310">runStreamConnServer</a></span><span class="op" id="6783745">(</span><span class="ident" id="6783746"><a href="/gostd/net/timeout_test.go.html#6783518">t</a></span><span class="op" id="6783747">,</span>&nbsp;<span class="string" id="6783749">&#34;tcp&#34;</span><span class="op" id="6783754">,</span>&nbsp;<span class="string" id="6783756">&#34;127.0.0.1:0&#34;</span><span class="op" id="6783769">,</span>&nbsp;<span class="ident" id="6783771"><a href="/gostd/net/timeout_test.go.html#6783667">listening</a></span><span class="op" id="6783780">,</span>&nbsp;<span class="ident" id="6783782"><a href="/gostd/net/timeout_test.go.html#6783699">done</a></span><span class="op" id="6783786">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783789">addr</span>&nbsp;<span class="op" id="6783794">:=</span>&nbsp;<span class="op" id="6783797">&lt;-</span><span class="ident" id="6783799"><a href="/gostd/net/timeout_test.go.html#6783667">listening</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783811"><a href="/gostd/net/timeout_test.go.html#6782001">testTimeout</a></span><span class="op" id="6783822">(</span><span class="ident" id="6783823"><a href="/gostd/net/timeout_test.go.html#6783518">t</a></span><span class="op" id="6783824">,</span>&nbsp;<span class="string" id="6783826">&#34;tcp&#34;</span><span class="op" id="6783831">,</span>&nbsp;<span class="ident" id="6783833"><a href="/gostd/net/timeout_test.go.html#6783789">addr</a></span><span class="op" id="6783837">,</span>&nbsp;<span class="builtintype" id="6783839">false</span><span class="op" id="6783844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6783847">&lt;-</span><span class="ident" id="6783849"><a href="/gostd/net/timeout_test.go.html#6783699">done</a></span><br>
<span class="lineno"></span><span class="op" id="6783854">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="keyword" id="6783857">func</span>&nbsp;<span class="ident" id="6783862">TestDeadlineReset</span><span class="op" id="6783879">(</span><span class="ident" id="6783880">t</span>&nbsp;<span class="op" id="6783882">*</span><span class="ident" id="6783883"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6783890">.</span><span class="ident" id="6783891"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6783892">)</span>&nbsp;<span class="op" id="6783894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6783897">switch</span>&nbsp;<span class="ident" id="6783904"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6783911">.</span><span class="ident" id="6783912"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6783917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6783920">case</span>&nbsp;<span class="string" id="6783925">&#34;plan9&#34;</span><span class="op" id="6783932">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783936"><a href="/gostd/net/timeout_test.go.html#6783880">t</a></span><span class="op" id="6783937">.</span><span class="ident" id="6783938"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6783943">(</span><span class="string" id="6783944">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6783965">,</span>&nbsp;<span class="ident" id="6783967"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6783974">.</span><span class="ident" id="6783975"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6783979">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6783982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6783985">ln</span><span class="op" id="6783987">,</span>&nbsp;<span class="ident" id="6783989">err</span>&nbsp;<span class="op" id="6783993">:=</span>&nbsp;<span class="ident" id="6783996"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6784002">(</span><span class="string" id="6784003">&#34;tcp&#34;</span><span class="op" id="6784008">,</span>&nbsp;<span class="string" id="6784010">&#34;127.0.0.1:0&#34;</span><span class="op" id="6784023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784026">if</span>&nbsp;<span class="ident" id="6784029"><a href="/gostd/net/timeout_test.go.html#6783989">err</a></span>&nbsp;<span class="op" id="6784033">!=</span>&nbsp;<span class="builtintype" id="6784036">nil</span>&nbsp;<span class="op" id="6784040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784044"><a href="/gostd/net/timeout_test.go.html#6783880">t</a></span><span class="op" id="6784045">.</span><span class="ident" id="6784046"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6784051">(</span><span class="ident" id="6784052"><a href="/gostd/net/timeout_test.go.html#6783989">err</a></span><span class="op" id="6784055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784058">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784061">defer</span>&nbsp;<span class="ident" id="6784067"><a href="/gostd/net/timeout_test.go.html#6783985">ln</a></span><span class="op" id="6784069">.</span><span class="ident" id="6784070"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6784075">(</span><span class="op" id="6784076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784079">tl</span>&nbsp;<span class="op" id="6784082">:=</span>&nbsp;<span class="ident" id="6784085"><a href="/gostd/net/timeout_test.go.html#6783985">ln</a></span><span class="op" id="6784087">.</span><span class="op" id="6784088">(</span><span class="op" id="6784089">*</span><span class="ident" id="6784090"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6784101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784104"><a href="/gostd/net/timeout_test.go.html#6784079">tl</a></span><span class="op" id="6784106">.</span><span class="ident" id="6784107"><a href="/gostd/net/tcpsock_posix.go.html#3382941">SetDeadline</a></span><span class="op" id="6784118">(</span><span class="ident" id="6784119"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6784123">.</span><span class="ident" id="6784124"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6784127">(</span><span class="op" id="6784128">)</span><span class="op" id="6784129">.</span><span class="ident" id="6784130"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6784133">(</span><span class="num" id="6784134">1</span>&nbsp;<span class="op" id="6784136">*</span>&nbsp;<span class="ident" id="6784138"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6784142">.</span><span class="ident" id="6784143"><a href="/gostd/time/time.go.html#2734905">Minute</a></span><span class="op" id="6784149">)</span><span class="op" id="6784150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784153"><a href="/gostd/net/timeout_test.go.html#6784079">tl</a></span><span class="op" id="6784155">.</span><span class="ident" id="6784156"><a href="/gostd/net/tcpsock_posix.go.html#3382941">SetDeadline</a></span><span class="op" id="6784167">(</span><span class="ident" id="6784168"><a href="/gostd/net/net.go.html#3342276">noDeadline</a></span><span class="op" id="6784178">)</span>&nbsp;<span class="comment" id="6784180">//&nbsp;reset&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784193">errc</span>&nbsp;<span class="op" id="6784198">:=</span>&nbsp;<span class="builtinfunc" id="6784201">make</span><span class="op" id="6784205">(</span><span class="keyword" id="6784206">chan</span>&nbsp;<span class="builtintype" id="6784211">error</span><span class="op" id="6784216">,</span>&nbsp;<span class="num" id="6784218">1</span><span class="op" id="6784219">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784222">go</span>&nbsp;<span class="keyword" id="6784225">func</span><span class="op" id="6784229">(</span><span class="op" id="6784230">)</span>&nbsp;<span class="op" id="6784232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784236">_</span><span class="op" id="6784237">,</span>&nbsp;<span class="ident" id="6784239">err</span>&nbsp;<span class="op" id="6784243">:=</span>&nbsp;<span class="ident" id="6784246"><a href="/gostd/net/timeout_test.go.html#6783985">ln</a></span><span class="op" id="6784248">.</span><span class="ident" id="6784249"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6784255">(</span><span class="op" id="6784256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784260"><a href="/gostd/net/timeout_test.go.html#6784193">errc</a></span>&nbsp;<span class="op" id="6784265">&lt;-</span>&nbsp;<span class="ident" id="6784268"><a href="/gostd/net/timeout_test.go.html#6784239">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784273">}</span><span class="op" id="6784274">(</span><span class="op" id="6784275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784278">select</span>&nbsp;<span class="op" id="6784285">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784288">case</span>&nbsp;<span class="op" id="6784293">&lt;-</span><span class="ident" id="6784295"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6784299">.</span><span class="ident" id="6784300"><a href="/gostd/time/sleep.go.html#2716644">After</a></span><span class="op" id="6784305">(</span><span class="num" id="6784306">50</span>&nbsp;<span class="op" id="6784309">*</span>&nbsp;<span class="ident" id="6784311"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6784315">.</span><span class="ident" id="6784316"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6784327">)</span><span class="op" id="6784328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6784332">//&nbsp;Pass.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784342">case</span>&nbsp;<span class="ident" id="6784347">err</span>&nbsp;<span class="op" id="6784351">:=</span>&nbsp;<span class="op" id="6784354">&lt;-</span><span class="ident" id="6784356"><a href="/gostd/net/timeout_test.go.html#6784193">errc</a></span><span class="op" id="6784360">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6784364">//&nbsp;Accept&nbsp;should&nbsp;never&nbsp;return;&nbsp;we&nbsp;never</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6784406">//&nbsp;connected&nbsp;to&nbsp;it.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784428"><a href="/gostd/net/timeout_test.go.html#6783880">t</a></span><span class="op" id="6784429">.</span><span class="ident" id="6784430"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6784436">(</span><span class="string" id="6784437">&#34;unexpected&nbsp;return&nbsp;from&nbsp;Accept;&nbsp;err=%v&#34;</span><span class="op" id="6784476">,</span>&nbsp;<span class="ident" id="6784478"><a href="/gostd/net/timeout_test.go.html#6784347">err</a></span><span class="op" id="6784481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784484">}</span><br>
<span class="lineno"></span><span class="op" id="6784486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6784489">func</span>&nbsp;<span class="ident" id="6784494">TestTimeoutAccept</span><span class="op" id="6784511">(</span><span class="ident" id="6784512">t</span>&nbsp;<span class="op" id="6784514">*</span><span class="ident" id="6784515"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6784522">.</span><span class="ident" id="6784523"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6784524">)</span>&nbsp;<span class="op" id="6784526">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784529">switch</span>&nbsp;<span class="ident" id="6784536"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6784543">.</span><span class="ident" id="6784544"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6784549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784552">case</span>&nbsp;<span class="string" id="6784557">&#34;plan9&#34;</span><span class="op" id="6784564">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784568"><a href="/gostd/net/timeout_test.go.html#6784512">t</a></span><span class="op" id="6784569">.</span><span class="ident" id="6784570"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6784575">(</span><span class="string" id="6784576">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6784597">,</span>&nbsp;<span class="ident" id="6784599"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6784606">.</span><span class="ident" id="6784607"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6784611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784617">ln</span><span class="op" id="6784619">,</span>&nbsp;<span class="ident" id="6784621">err</span>&nbsp;<span class="op" id="6784625">:=</span>&nbsp;<span class="ident" id="6784628"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6784634">(</span><span class="string" id="6784635">&#34;tcp&#34;</span><span class="op" id="6784640">,</span>&nbsp;<span class="string" id="6784642">&#34;127.0.0.1:0&#34;</span><span class="op" id="6784655">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784658">if</span>&nbsp;<span class="ident" id="6784661"><a href="/gostd/net/timeout_test.go.html#6784621">err</a></span>&nbsp;<span class="op" id="6784665">!=</span>&nbsp;<span class="builtintype" id="6784668">nil</span>&nbsp;<span class="op" id="6784672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784676"><a href="/gostd/net/timeout_test.go.html#6784512">t</a></span><span class="op" id="6784677">.</span><span class="ident" id="6784678"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6784683">(</span><span class="ident" id="6784684"><a href="/gostd/net/timeout_test.go.html#6784621">err</a></span><span class="op" id="6784687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784693">defer</span>&nbsp;<span class="ident" id="6784699"><a href="/gostd/net/timeout_test.go.html#6784617">ln</a></span><span class="op" id="6784701">.</span><span class="ident" id="6784702"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6784707">(</span><span class="op" id="6784708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784711">tl</span>&nbsp;<span class="op" id="6784714">:=</span>&nbsp;<span class="ident" id="6784717"><a href="/gostd/net/timeout_test.go.html#6784617">ln</a></span><span class="op" id="6784719">.</span><span class="op" id="6784720">(</span><span class="op" id="6784721">*</span><span class="ident" id="6784722"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6784733">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784736"><a href="/gostd/net/timeout_test.go.html#6784711">tl</a></span><span class="op" id="6784738">.</span><span class="ident" id="6784739"><a href="/gostd/net/tcpsock_posix.go.html#3382941">SetDeadline</a></span><span class="op" id="6784750">(</span><span class="ident" id="6784751"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6784755">.</span><span class="ident" id="6784756"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6784759">(</span><span class="op" id="6784760">)</span><span class="op" id="6784761">.</span><span class="ident" id="6784762"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6784765">(</span><span class="num" id="6784766">100</span>&nbsp;<span class="op" id="6784770">*</span>&nbsp;<span class="ident" id="6784772"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6784776">.</span><span class="ident" id="6784777"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6784788">)</span><span class="op" id="6784789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784792">errc</span>&nbsp;<span class="op" id="6784797">:=</span>&nbsp;<span class="builtinfunc" id="6784800">make</span><span class="op" id="6784804">(</span><span class="keyword" id="6784805">chan</span>&nbsp;<span class="builtintype" id="6784810">error</span><span class="op" id="6784815">,</span>&nbsp;<span class="num" id="6784817">1</span><span class="op" id="6784818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784821">go</span>&nbsp;<span class="keyword" id="6784824">func</span><span class="op" id="6784828">(</span><span class="op" id="6784829">)</span>&nbsp;<span class="op" id="6784831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784835">_</span><span class="op" id="6784836">,</span>&nbsp;<span class="ident" id="6784838">err</span>&nbsp;<span class="op" id="6784842">:=</span>&nbsp;<span class="ident" id="6784845"><a href="/gostd/net/timeout_test.go.html#6784617">ln</a></span><span class="op" id="6784847">.</span><span class="ident" id="6784848"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6784854">(</span><span class="op" id="6784855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784859"><a href="/gostd/net/timeout_test.go.html#6784792">errc</a></span>&nbsp;<span class="op" id="6784864">&lt;-</span>&nbsp;<span class="ident" id="6784867"><a href="/gostd/net/timeout_test.go.html#6784838">err</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784872">}</span><span class="op" id="6784873">(</span><span class="op" id="6784874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784877">select</span>&nbsp;<span class="op" id="6784884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784887">case</span>&nbsp;<span class="op" id="6784892">&lt;-</span><span class="ident" id="6784894"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6784898">.</span><span class="ident" id="6784899"><a href="/gostd/time/sleep.go.html#2716644">After</a></span><span class="op" id="6784904">(</span><span class="num" id="6784905">1</span>&nbsp;<span class="op" id="6784907">*</span>&nbsp;<span class="ident" id="6784909"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6784913">.</span><span class="ident" id="6784914"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6784920">)</span><span class="op" id="6784921">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6784925">//&nbsp;Accept&nbsp;shouldn&#39;t&nbsp;block&nbsp;indefinitely</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784966"><a href="/gostd/net/timeout_test.go.html#6784512">t</a></span><span class="op" id="6784967">.</span><span class="ident" id="6784968"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6784974">(</span><span class="string" id="6784975">&#34;Accept&nbsp;didn&#39;t&nbsp;return&nbsp;in&nbsp;an&nbsp;expected&nbsp;time&#34;</span><span class="op" id="6785017">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785020">case</span>&nbsp;<span class="op" id="6785025">&lt;-</span><span class="ident" id="6785027"><a href="/gostd/net/timeout_test.go.html#6784792">errc</a></span><span class="op" id="6785031">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6785035">//&nbsp;Pass.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785045">}</span><br>
<span class="lineno"></span><span class="op" id="6785047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="keyword" id="6785050">func</span>&nbsp;<span class="ident" id="6785055">TestReadWriteDeadline</span><span class="op" id="6785076">(</span><span class="ident" id="6785077">t</span>&nbsp;<span class="op" id="6785079">*</span><span class="ident" id="6785080"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6785087">.</span><span class="ident" id="6785088"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6785089">)</span>&nbsp;<span class="op" id="6785091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785094">switch</span>&nbsp;<span class="ident" id="6785101"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6785108">.</span><span class="ident" id="6785109"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6785114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785117">case</span>&nbsp;<span class="string" id="6785122">&#34;plan9&#34;</span><span class="op" id="6785129">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785133"><a href="/gostd/net/timeout_test.go.html#6785077">t</a></span><span class="op" id="6785134">.</span><span class="ident" id="6785135"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6785140">(</span><span class="string" id="6785141">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6785162">,</span>&nbsp;<span class="ident" id="6785164"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6785171">.</span><span class="ident" id="6785172"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6785176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785179">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785183">const</span>&nbsp;<span class="op" id="6785189">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785193">readTimeout</span>&nbsp;&nbsp;<span class="op" id="6785206">=</span>&nbsp;<span class="num" id="6785208">50</span>&nbsp;<span class="op" id="6785211">*</span>&nbsp;<span class="ident" id="6785213"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6785217">.</span><span class="ident" id="6785218"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785232">writeTimeout</span>&nbsp;<span class="op" id="6785245">=</span>&nbsp;<span class="num" id="6785247">250</span>&nbsp;<span class="op" id="6785251">*</span>&nbsp;<span class="ident" id="6785253"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6785257">.</span><span class="ident" id="6785258"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785271">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785274">checkTimeout</span>&nbsp;<span class="op" id="6785287">:=</span>&nbsp;<span class="keyword" id="6785290">func</span><span class="op" id="6785294">(</span><span class="ident" id="6785295">command</span>&nbsp;<span class="builtintype" id="6785303">string</span><span class="op" id="6785309">,</span>&nbsp;<span class="ident" id="6785311">start</span>&nbsp;<span class="ident" id="6785317"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6785321">.</span><span class="ident" id="6785322"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="6785326">,</span>&nbsp;<span class="ident" id="6785328">should</span>&nbsp;<span class="ident" id="6785335"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6785339">.</span><span class="ident" id="6785340"><a href="/gostd/time/time.go.html#2734212">Duration</a></span><span class="op" id="6785348">)</span>&nbsp;<span class="op" id="6785350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785354">is</span>&nbsp;<span class="op" id="6785357">:=</span>&nbsp;<span class="ident" id="6785360"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6785364">.</span><span class="ident" id="6785365"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6785368">(</span><span class="op" id="6785369">)</span><span class="op" id="6785370">.</span><span class="ident" id="6785371"><a href="/gostd/time/time.go.html#2739063">Sub</a></span><span class="op" id="6785374">(</span><span class="ident" id="6785375"><a href="/gostd/net/timeout_test.go.html#6785311">start</a></span><span class="op" id="6785380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785384">d</span>&nbsp;<span class="op" id="6785386">:=</span>&nbsp;<span class="ident" id="6785389"><a href="/gostd/net/timeout_test.go.html#6785354">is</a></span>&nbsp;<span class="op" id="6785392">-</span>&nbsp;<span class="ident" id="6785394"><a href="/gostd/net/timeout_test.go.html#6785328">should</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785403">if</span>&nbsp;<span class="ident" id="6785406"><a href="/gostd/net/timeout_test.go.html#6785384">d</a></span>&nbsp;<span class="op" id="6785408">&lt;</span>&nbsp;<span class="op" id="6785410">-</span><span class="num" id="6785411">30</span><span class="op" id="6785413">*</span><span class="ident" id="6785414"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6785418">.</span><span class="ident" id="6785419"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span>&nbsp;<span class="op" id="6785431">||</span>&nbsp;<span class="op" id="6785434">!</span><span class="ident" id="6785435"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6785442">.</span><span class="ident" id="6785443"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6785448">(</span><span class="op" id="6785449">)</span>&nbsp;<span class="op" id="6785451">&amp;&amp;</span>&nbsp;<span class="num" id="6785454">150</span><span class="op" id="6785457">*</span><span class="ident" id="6785458"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6785462">.</span><span class="ident" id="6785463"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span>&nbsp;<span class="op" id="6785475">&lt;</span>&nbsp;<span class="ident" id="6785477"><a href="/gostd/net/timeout_test.go.html#6785384">d</a></span>&nbsp;<span class="op" id="6785479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785484"><a href="/gostd/net/timeout_test.go.html#6785077">t</a></span><span class="op" id="6785485">.</span><span class="ident" id="6785486"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6785492">(</span><span class="string" id="6785493">&#34;%s&nbsp;timeout&nbsp;test&nbsp;failed:&nbsp;is=%v&nbsp;should=%v\n&#34;</span><span class="op" id="6785536">,</span>&nbsp;<span class="ident" id="6785538"><a href="/gostd/net/timeout_test.go.html#6785295">command</a></span><span class="op" id="6785545">,</span>&nbsp;<span class="ident" id="6785547"><a href="/gostd/net/timeout_test.go.html#6785354">is</a></span><span class="op" id="6785549">,</span>&nbsp;<span class="ident" id="6785551"><a href="/gostd/net/timeout_test.go.html#6785328">should</a></span><span class="op" id="6785557">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785568">ln</span><span class="op" id="6785570">,</span>&nbsp;<span class="ident" id="6785572">err</span>&nbsp;<span class="op" id="6785576">:=</span>&nbsp;<span class="ident" id="6785579"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6785585">(</span><span class="string" id="6785586">&#34;tcp&#34;</span><span class="op" id="6785591">,</span>&nbsp;<span class="string" id="6785593">&#34;127.0.0.1:0&#34;</span><span class="op" id="6785606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785609">if</span>&nbsp;<span class="ident" id="6785612"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span>&nbsp;<span class="op" id="6785616">!=</span>&nbsp;<span class="builtintype" id="6785619">nil</span>&nbsp;<span class="op" id="6785623">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785627"><a href="/gostd/net/timeout_test.go.html#6785077">t</a></span><span class="op" id="6785628">.</span><span class="ident" id="6785629"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6785635">(</span><span class="string" id="6785636">&#34;ListenTCP&nbsp;on&nbsp;:0:&nbsp;%v&#34;</span><span class="op" id="6785657">,</span>&nbsp;<span class="ident" id="6785659"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span><span class="op" id="6785662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785668">defer</span>&nbsp;<span class="ident" id="6785674"><a href="/gostd/net/timeout_test.go.html#6785568">ln</a></span><span class="op" id="6785676">.</span><span class="ident" id="6785677"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6785682">(</span><span class="op" id="6785683">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785687">lnquit</span>&nbsp;<span class="op" id="6785694">:=</span>&nbsp;<span class="builtinfunc" id="6785697">make</span><span class="op" id="6785701">(</span><span class="keyword" id="6785702">chan</span>&nbsp;<span class="builtintype" id="6785707">bool</span><span class="op" id="6785711">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785715">go</span>&nbsp;<span class="keyword" id="6785718">func</span><span class="op" id="6785722">(</span><span class="op" id="6785723">)</span>&nbsp;<span class="op" id="6785725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785729">c</span><span class="op" id="6785730">,</span>&nbsp;<span class="ident" id="6785732">err</span>&nbsp;<span class="op" id="6785736">:=</span>&nbsp;<span class="ident" id="6785739"><a href="/gostd/net/timeout_test.go.html#6785568">ln</a></span><span class="op" id="6785741">.</span><span class="ident" id="6785742"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6785748">(</span><span class="op" id="6785749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785753">if</span>&nbsp;<span class="ident" id="6785756"><a href="/gostd/net/timeout_test.go.html#6785732">err</a></span>&nbsp;<span class="op" id="6785760">!=</span>&nbsp;<span class="builtintype" id="6785763">nil</span>&nbsp;<span class="op" id="6785767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785772"><a href="/gostd/net/timeout_test.go.html#6785077">t</a></span><span class="op" id="6785773">.</span><span class="ident" id="6785774"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6785780">(</span><span class="string" id="6785781">&#34;Accept:&nbsp;%v&#34;</span><span class="op" id="6785793">,</span>&nbsp;<span class="ident" id="6785795"><a href="/gostd/net/timeout_test.go.html#6785732">err</a></span><span class="op" id="6785798">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785803">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785816">defer</span>&nbsp;<span class="ident" id="6785822"><a href="/gostd/net/timeout_test.go.html#6785729">c</a></span><span class="op" id="6785823">.</span><span class="ident" id="6785824"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6785829">(</span><span class="op" id="6785830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785834"><a href="/gostd/net/timeout_test.go.html#6785687">lnquit</a></span>&nbsp;<span class="op" id="6785841">&lt;-</span>&nbsp;<span class="builtintype" id="6785844">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785850">}</span><span class="op" id="6785851">(</span><span class="op" id="6785852">)</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785856">c</span><span class="op" id="6785857">,</span>&nbsp;<span class="ident" id="6785859"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span>&nbsp;<span class="op" id="6785863">:=</span>&nbsp;<span class="ident" id="6785866"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6785870">(</span><span class="string" id="6785871">&#34;tcp&#34;</span><span class="op" id="6785876">,</span>&nbsp;<span class="ident" id="6785878"><a href="/gostd/net/timeout_test.go.html#6785568">ln</a></span><span class="op" id="6785880">.</span><span class="ident" id="6785881"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6785885">(</span><span class="op" id="6785886">)</span><span class="op" id="6785887">.</span><span class="ident" id="6785888"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6785894">(</span><span class="op" id="6785895">)</span><span class="op" id="6785896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785899">if</span>&nbsp;<span class="ident" id="6785902"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span>&nbsp;<span class="op" id="6785906">!=</span>&nbsp;<span class="builtintype" id="6785909">nil</span>&nbsp;<span class="op" id="6785913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785917"><a href="/gostd/net/timeout_test.go.html#6785077">t</a></span><span class="op" id="6785918">.</span><span class="ident" id="6785919"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6785925">(</span><span class="string" id="6785926">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="6785936">,</span>&nbsp;<span class="ident" id="6785938"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span><span class="op" id="6785941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785944">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785947">defer</span>&nbsp;<span class="ident" id="6785953"><a href="/gostd/net/timeout_test.go.html#6785856">c</a></span><span class="op" id="6785954">.</span><span class="ident" id="6785955"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6785960">(</span><span class="op" id="6785961">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785965">start</span>&nbsp;<span class="op" id="6785971">:=</span>&nbsp;<span class="ident" id="6785974"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6785978">.</span><span class="ident" id="6785979"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6785982">(</span><span class="op" id="6785983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785986"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span>&nbsp;<span class="op" id="6785990">=</span>&nbsp;<span class="ident" id="6785992"><a href="/gostd/net/timeout_test.go.html#6785856">c</a></span><span class="op" id="6785993">.</span><span class="ident" id="6785994"><a href="/gostd/net/net.go.html#3335873">SetReadDeadline</a></span><span class="op" id="6786009">(</span><span class="ident" id="6786010"><a href="/gostd/net/timeout_test.go.html#6785965">start</a></span><span class="op" id="6786015">.</span><span class="ident" id="6786016"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6786019">(</span><span class="ident" id="6786020"><a href="/gostd/net/timeout_test.go.html#6785193">readTimeout</a></span><span class="op" id="6786031">)</span><span class="op" id="6786032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786035">if</span>&nbsp;<span class="ident" id="6786038"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span>&nbsp;<span class="op" id="6786042">!=</span>&nbsp;<span class="builtintype" id="6786045">nil</span>&nbsp;<span class="op" id="6786049">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786053"><a href="/gostd/net/timeout_test.go.html#6785077">t</a></span><span class="op" id="6786054">.</span><span class="ident" id="6786055"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6786061">(</span><span class="string" id="6786062">&#34;SetReadDeadline:&nbsp;%v&#34;</span><span class="op" id="6786083">,</span>&nbsp;<span class="ident" id="6786085"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span><span class="op" id="6786088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786094"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span>&nbsp;<span class="op" id="6786098">=</span>&nbsp;<span class="ident" id="6786100"><a href="/gostd/net/timeout_test.go.html#6785856">c</a></span><span class="op" id="6786101">.</span><span class="ident" id="6786102"><a href="/gostd/net/net.go.html#3336140">SetWriteDeadline</a></span><span class="op" id="6786118">(</span><span class="ident" id="6786119"><a href="/gostd/net/timeout_test.go.html#6785965">start</a></span><span class="op" id="6786124">.</span><span class="ident" id="6786125"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6786128">(</span><span class="ident" id="6786129"><a href="/gostd/net/timeout_test.go.html#6785232">writeTimeout</a></span><span class="op" id="6786141">)</span><span class="op" id="6786142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786145">if</span>&nbsp;<span class="ident" id="6786148"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span>&nbsp;<span class="op" id="6786152">!=</span>&nbsp;<span class="builtintype" id="6786155">nil</span>&nbsp;<span class="op" id="6786159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786163"><a href="/gostd/net/timeout_test.go.html#6785077">t</a></span><span class="op" id="6786164">.</span><span class="ident" id="6786165"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6786171">(</span><span class="string" id="6786172">&#34;SetWriteDeadline:&nbsp;%v&#34;</span><span class="op" id="6786194">,</span>&nbsp;<span class="ident" id="6786196"><a href="/gostd/net/timeout_test.go.html#6785572">err</a></span><span class="op" id="6786199">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786206">quit</span>&nbsp;<span class="op" id="6786211">:=</span>&nbsp;<span class="builtinfunc" id="6786214">make</span><span class="op" id="6786218">(</span><span class="keyword" id="6786219">chan</span>&nbsp;<span class="builtintype" id="6786224">bool</span><span class="op" id="6786228">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786232">go</span>&nbsp;<span class="keyword" id="6786235">func</span><span class="op" id="6786239">(</span><span class="op" id="6786240">)</span>&nbsp;<span class="op" id="6786242">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786246">var</span>&nbsp;<span class="ident" id="6786250">buf</span>&nbsp;<span class="op" id="6786254">[</span><span class="num" id="6786255">10</span><span class="op" id="6786257">]</span><span class="builtintype" id="6786258">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786265">_</span><span class="op" id="6786266">,</span>&nbsp;<span class="ident" id="6786268">err</span>&nbsp;<span class="op" id="6786272">:=</span>&nbsp;<span class="ident" id="6786275"><a href="/gostd/net/timeout_test.go.html#6785856">c</a></span><span class="op" id="6786276">.</span><span class="ident" id="6786277"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6786281">(</span><span class="ident" id="6786282"><a href="/gostd/net/timeout_test.go.html#6786250">buf</a></span><span class="op" id="6786285">[</span><span class="op" id="6786286">:</span><span class="op" id="6786287">]</span><span class="op" id="6786288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786292">if</span>&nbsp;<span class="ident" id="6786295"><a href="/gostd/net/timeout_test.go.html#6786268">err</a></span>&nbsp;<span class="op" id="6786299">==</span>&nbsp;<span class="builtintype" id="6786302">nil</span>&nbsp;<span class="op" id="6786306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786311"><a href="/gostd/net/timeout_test.go.html#6785077">t</a></span><span class="op" id="6786312">.</span><span class="ident" id="6786313"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6786319">(</span><span class="string" id="6786320">&#34;Read&nbsp;should&nbsp;not&nbsp;succeed&#34;</span><span class="op" id="6786345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786349">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786353"><a href="/gostd/net/timeout_test.go.html#6785274">checkTimeout</a></span><span class="op" id="6786365">(</span><span class="string" id="6786366">&#34;Read&#34;</span><span class="op" id="6786372">,</span>&nbsp;<span class="ident" id="6786374"><a href="/gostd/net/timeout_test.go.html#6785965">start</a></span><span class="op" id="6786379">,</span>&nbsp;<span class="ident" id="6786381"><a href="/gostd/net/timeout_test.go.html#6785193">readTimeout</a></span><span class="op" id="6786392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786396"><a href="/gostd/net/timeout_test.go.html#6786206">quit</a></span>&nbsp;<span class="op" id="6786401">&lt;-</span>&nbsp;<span class="builtintype" id="6786404">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786410">}</span><span class="op" id="6786411">(</span><span class="op" id="6786412">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786416">go</span>&nbsp;<span class="keyword" id="6786419">func</span><span class="op" id="6786423">(</span><span class="op" id="6786424">)</span>&nbsp;<span class="op" id="6786426">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786430">var</span>&nbsp;<span class="ident" id="6786434">buf</span>&nbsp;<span class="op" id="6786438">[</span><span class="num" id="6786439">10000</span><span class="op" id="6786444">]</span><span class="builtintype" id="6786445">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786452">for</span>&nbsp;<span class="op" id="6786456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786461">_</span><span class="op" id="6786462">,</span>&nbsp;<span class="ident" id="6786464">err</span>&nbsp;<span class="op" id="6786468">:=</span>&nbsp;<span class="ident" id="6786471"><a href="/gostd/net/timeout_test.go.html#6785856">c</a></span><span class="op" id="6786472">.</span><span class="ident" id="6786473"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6786478">(</span><span class="ident" id="6786479"><a href="/gostd/net/timeout_test.go.html#6786434">buf</a></span><span class="op" id="6786482">[</span><span class="op" id="6786483">:</span><span class="op" id="6786484">]</span><span class="op" id="6786485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786490">if</span>&nbsp;<span class="ident" id="6786493"><a href="/gostd/net/timeout_test.go.html#6786464">err</a></span>&nbsp;<span class="op" id="6786497">!=</span>&nbsp;<span class="builtintype" id="6786500">nil</span>&nbsp;<span class="op" id="6786504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786510">break</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786527"><a href="/gostd/net/timeout_test.go.html#6785274">checkTimeout</a></span><span class="op" id="6786539">(</span><span class="string" id="6786540">&#34;Write&#34;</span><span class="op" id="6786547">,</span>&nbsp;<span class="ident" id="6786549"><a href="/gostd/net/timeout_test.go.html#6785965">start</a></span><span class="op" id="6786554">,</span>&nbsp;<span class="ident" id="6786556"><a href="/gostd/net/timeout_test.go.html#6785232">writeTimeout</a></span><span class="op" id="6786568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786572"><a href="/gostd/net/timeout_test.go.html#6786206">quit</a></span>&nbsp;<span class="op" id="6786577">&lt;-</span>&nbsp;<span class="builtintype" id="6786580">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786586">}</span><span class="op" id="6786587">(</span><span class="op" id="6786588">)</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786592">&lt;-</span><span class="ident" id="6786594"><a href="/gostd/net/timeout_test.go.html#6786206">quit</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786600">&lt;-</span><span class="ident" id="6786602"><a href="/gostd/net/timeout_test.go.html#6786206">quit</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786608">&lt;-</span><span class="ident" id="6786610"><a href="/gostd/net/timeout_test.go.html#6785687">lnquit</a></span><br>
<span class="lineno"></span><span class="op" id="6786617">}</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span><span class="keyword" id="6786620">type</span>&nbsp;<span class="ident" id="6786625">neverEnding</span>&nbsp;<span class="builtintype" id="6786637">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6786643">func</span>&nbsp;<span class="op" id="6786648">(</span><span class="ident" id="6786649">b</span>&nbsp;<span class="ident" id="6786651"><a href="/gostd/net/timeout_test.go.html#6786625">neverEnding</a></span><span class="op" id="6786662">)</span>&nbsp;<span class="ident" id="6786664">Read</span><span class="op" id="6786668">(</span><span class="ident" id="6786669">p</span>&nbsp;<span class="op" id="6786671">[</span><span class="op" id="6786672">]</span><span class="builtintype" id="6786673">byte</span><span class="op" id="6786677">)</span>&nbsp;<span class="op" id="6786679">(</span><span class="ident" id="6786680">n</span>&nbsp;<span class="builtintype" id="6786682">int</span><span class="op" id="6786685">,</span>&nbsp;<span class="ident" id="6786687">err</span>&nbsp;<span class="builtintype" id="6786691">error</span><span class="op" id="6786696">)</span>&nbsp;<span class="op" id="6786698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786701">for</span>&nbsp;<span class="ident" id="6786705">i</span>&nbsp;<span class="op" id="6786707">:=</span>&nbsp;<span class="keyword" id="6786710">range</span>&nbsp;<span class="ident" id="6786716"><a href="/gostd/net/timeout_test.go.html#6786669">p</a></span>&nbsp;<span class="op" id="6786718">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786722"><a href="/gostd/net/timeout_test.go.html#6786669">p</a></span><span class="op" id="6786723">[</span><span class="ident" id="6786724"><a href="/gostd/net/timeout_test.go.html#6786705">i</a></span><span class="op" id="6786725">]</span>&nbsp;<span class="op" id="6786727">=</span>&nbsp;<span class="builtintype" id="6786729">byte</span><span class="op" id="6786733">(</span><span class="ident" id="6786734"><a href="/gostd/net/timeout_test.go.html#6786649">b</a></span><span class="op" id="6786735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786741">return</span>&nbsp;<span class="builtinfunc" id="6786748">len</span><span class="op" id="6786751">(</span><span class="ident" id="6786752"><a href="/gostd/net/timeout_test.go.html#6786669">p</a></span><span class="op" id="6786753">)</span><span class="op" id="6786754">,</span>&nbsp;<span class="builtintype" id="6786756">nil</span><br>
<span class="lineno"></span><span class="op" id="6786760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="keyword" id="6786763">func</span>&nbsp;<span class="ident" id="6786768">TestVariousDeadlines1Proc</span><span class="op" id="6786793">(</span><span class="ident" id="6786794">t</span>&nbsp;<span class="op" id="6786796">*</span><span class="ident" id="6786797"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6786804">.</span><span class="ident" id="6786805"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6786806">)</span>&nbsp;<span class="op" id="6786808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786811"><a href="/gostd/net/timeout_test.go.html#6786924">testVariousDeadlines</a></span><span class="op" id="6786831">(</span><span class="ident" id="6786832"><a href="/gostd/net/timeout_test.go.html#6786794">t</a></span><span class="op" id="6786833">,</span>&nbsp;<span class="num" id="6786835">1</span><span class="op" id="6786836">)</span><br>
<span class="lineno"></span><span class="op" id="6786838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6786841">func</span>&nbsp;<span class="ident" id="6786846">TestVariousDeadlines4Proc</span><span class="op" id="6786871">(</span><span class="ident" id="6786872">t</span>&nbsp;<span class="op" id="6786874">*</span><span class="ident" id="6786875"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6786882">.</span><span class="ident" id="6786883"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6786884">)</span>&nbsp;<span class="op" id="6786886">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786889"><a href="/gostd/net/timeout_test.go.html#6786924">testVariousDeadlines</a></span><span class="op" id="6786909">(</span><span class="ident" id="6786910"><a href="/gostd/net/timeout_test.go.html#6786872">t</a></span><span class="op" id="6786911">,</span>&nbsp;<span class="num" id="6786913">4</span><span class="op" id="6786914">)</span><br>
<span class="lineno"></span><span class="op" id="6786916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6786919">func</span>&nbsp;<span class="ident" id="6786924">testVariousDeadlines</span><span class="op" id="6786944">(</span><span class="ident" id="6786945">t</span>&nbsp;<span class="op" id="6786947">*</span><span class="ident" id="6786948"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6786955">.</span><span class="ident" id="6786956"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6786957">,</span>&nbsp;<span class="ident" id="6786959">maxProcs</span>&nbsp;<span class="builtintype" id="6786968">int</span><span class="op" id="6786971">)</span>&nbsp;<span class="op" id="6786973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786976">switch</span>&nbsp;<span class="ident" id="6786983"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6786990">.</span><span class="ident" id="6786991"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6786996">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786999">case</span>&nbsp;<span class="string" id="6787004">&#34;plan9&#34;</span><span class="op" id="6787011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787015"><a href="/gostd/net/timeout_test.go.html#6786945">t</a></span><span class="op" id="6787016">.</span><span class="ident" id="6787017"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6787022">(</span><span class="string" id="6787023">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6787044">,</span>&nbsp;<span class="ident" id="6787046"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6787053">.</span><span class="ident" id="6787054"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6787058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6787061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6787065">defer</span>&nbsp;<span class="ident" id="6787071"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6787078">.</span><span class="ident" id="6787079"><a href="/gostd/runtime/debug.go.html#1521359">GOMAXPROCS</a></span><span class="op" id="6787089">(</span><span class="ident" id="6787090"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6787097">.</span><span class="ident" id="6787098"><a href="/gostd/runtime/debug.go.html#1521359">GOMAXPROCS</a></span><span class="op" id="6787108">(</span><span class="ident" id="6787109"><a href="/gostd/net/timeout_test.go.html#6786959">maxProcs</a></span><span class="op" id="6787117">)</span><span class="op" id="6787118">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787121">ln</span>&nbsp;<span class="op" id="6787124">:=</span>&nbsp;<span class="ident" id="6787127"><a href="/gostd/net/dial_test.go.html#6621447">newLocalListener</a></span><span class="op" id="6787143">(</span><span class="ident" id="6787144"><a href="/gostd/net/timeout_test.go.html#6786945">t</a></span><span class="op" id="6787145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6787148">defer</span>&nbsp;<span class="ident" id="6787154"><a href="/gostd/net/timeout_test.go.html#6787121">ln</a></span><span class="op" id="6787156">.</span><span class="ident" id="6787157"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6787162">(</span><span class="op" id="6787163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787166">acceptc</span>&nbsp;<span class="op" id="6787174">:=</span>&nbsp;<span class="builtinfunc" id="6787177">make</span><span class="op" id="6787181">(</span><span class="keyword" id="6787182">chan</span>&nbsp;<span class="builtintype" id="6787187">error</span><span class="op" id="6787192">,</span>&nbsp;<span class="num" id="6787194">1</span><span class="op" id="6787195">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6787199">//&nbsp;The&nbsp;server,&nbsp;with&nbsp;no&nbsp;timeouts&nbsp;of&nbsp;its&nbsp;own,&nbsp;sending&nbsp;bytes&nbsp;to&nbsp;clients</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6787269">//&nbsp;as&nbsp;fast&nbsp;as&nbsp;it&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787292">servec</span>&nbsp;<span class="op" id="6787299">:=</span>&nbsp;<span class="builtinfunc" id="6787302">make</span><span class="op" id="6787306">(</span><span class="keyword" id="6787307">chan</span>&nbsp;<span class="ident" id="6787312"><a href="/gostd/net/timeout_test.go.html#6777681">copyRes</a></span><span class="op" id="6787319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6787322">go</span>&nbsp;<span class="keyword" id="6787325">func</span><span class="op" id="6787329">(</span><span class="op" id="6787330">)</span>&nbsp;<span class="op" id="6787332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6787336">for</span>&nbsp;<span class="op" id="6787340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787345">c</span><span class="op" id="6787346">,</span>&nbsp;<span class="ident" id="6787348">err</span>&nbsp;<span class="op" id="6787352">:=</span>&nbsp;<span class="ident" id="6787355"><a href="/gostd/net/timeout_test.go.html#6787121">ln</a></span><span class="op" id="6787357">.</span><span class="ident" id="6787358"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6787364">(</span><span class="op" id="6787365">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6787370">if</span>&nbsp;<span class="ident" id="6787373"><a href="/gostd/net/timeout_test.go.html#6787348">err</a></span>&nbsp;<span class="op" id="6787377">!=</span>&nbsp;<span class="builtintype" id="6787380">nil</span>&nbsp;<span class="op" id="6787384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787390"><a href="/gostd/net/timeout_test.go.html#6787166">acceptc</a></span>&nbsp;<span class="op" id="6787398">&lt;-</span>&nbsp;<span class="ident" id="6787401"><a href="/gostd/net/timeout_test.go.html#6787348">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6787409">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6787419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6787424">go</span>&nbsp;<span class="keyword" id="6787427">func</span><span class="op" id="6787431">(</span><span class="op" id="6787432">)</span>&nbsp;<span class="op" id="6787434">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787440">t0</span>&nbsp;<span class="op" id="6787443">:=</span>&nbsp;<span class="ident" id="6787446"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787450">.</span><span class="ident" id="6787451"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6787454">(</span><span class="op" id="6787455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787461">n</span><span class="op" id="6787462">,</span>&nbsp;<span class="ident" id="6787464">err</span>&nbsp;<span class="op" id="6787468">:=</span>&nbsp;<span class="ident" id="6787471"><a href="/gostd/net/timeout_test.go.html#6777541">io</a></span><span class="op" id="6787473">.</span><span class="ident" id="6787474"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="6787478">(</span><span class="ident" id="6787479"><a href="/gostd/net/timeout_test.go.html#6787345">c</a></span><span class="op" id="6787480">,</span>&nbsp;<span class="ident" id="6787482"><a href="/gostd/net/timeout_test.go.html#6786625">neverEnding</a></span><span class="op" id="6787493">(</span><span class="string" id="6787494">&#39;a&#39;</span><span class="op" id="6787497">)</span><span class="op" id="6787498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787504">d</span>&nbsp;<span class="op" id="6787506">:=</span>&nbsp;<span class="ident" id="6787509"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787513">.</span><span class="ident" id="6787514"><a href="/gostd/time/time.go.html#2739495">Since</a></span><span class="op" id="6787519">(</span><span class="ident" id="6787520"><a href="/gostd/net/timeout_test.go.html#6787440">t0</a></span><span class="op" id="6787522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787528"><a href="/gostd/net/timeout_test.go.html#6787345">c</a></span><span class="op" id="6787529">.</span><span class="ident" id="6787530"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6787535">(</span><span class="op" id="6787536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6787542"><a href="/gostd/net/timeout_test.go.html#6787292">servec</a></span>&nbsp;<span class="op" id="6787549">&lt;-</span>&nbsp;<span class="ident" id="6787552"><a href="/gostd/net/timeout_test.go.html#6777681">copyRes</a></span><span class="op" id="6787559">{</span><span class="ident" id="6787560"><a href="/gostd/net/timeout_test.go.html#6787461">n</a></span><span class="op" id="6787561">,</span>&nbsp;<span class="ident" id="6787563"><a href="/gostd/net/timeout_test.go.html#6787464">err</a></span><span class="op" id="6787566">,</span>&nbsp;<span class="ident" id="6787568"><a href="/gostd/net/timeout_test.go.html#6787504">d</a></span><span class="op" id="6787569">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6787574">}</span><span class="op" id="6787575">(</span><span class="op" id="6787576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6787580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6787583">}</span><span class="op" id="6787584">(</span><span class="op" id="6787585">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6787589">for</span>&nbsp;<span class="ident" id="6787593">_</span><span class="op" id="6787594">,</span>&nbsp;<span class="ident" id="6787596">timeout</span>&nbsp;<span class="op" id="6787604">:=</span>&nbsp;<span class="keyword" id="6787607">range</span>&nbsp;<span class="op" id="6787613">[</span><span class="op" id="6787614">]</span><span class="ident" id="6787615"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787619">.</span><span class="ident" id="6787620"><a href="/gostd/time/time.go.html#2734212">Duration</a></span><span class="op" id="6787628">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787632">1</span>&nbsp;<span class="op" id="6787634">*</span>&nbsp;<span class="ident" id="6787636"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787640">.</span><span class="ident" id="6787641"><a href="/gostd/time/time.go.html#2734751">Nanosecond</a></span><span class="op" id="6787651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787655">2</span>&nbsp;<span class="op" id="6787657">*</span>&nbsp;<span class="ident" id="6787659"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787663">.</span><span class="ident" id="6787664"><a href="/gostd/time/time.go.html#2734751">Nanosecond</a></span><span class="op" id="6787674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787678">5</span>&nbsp;<span class="op" id="6787680">*</span>&nbsp;<span class="ident" id="6787682"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787686">.</span><span class="ident" id="6787687"><a href="/gostd/time/time.go.html#2734751">Nanosecond</a></span><span class="op" id="6787697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787701">50</span>&nbsp;<span class="op" id="6787704">*</span>&nbsp;<span class="ident" id="6787706"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787710">.</span><span class="ident" id="6787711"><a href="/gostd/time/time.go.html#2734751">Nanosecond</a></span><span class="op" id="6787721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787725">100</span>&nbsp;<span class="op" id="6787729">*</span>&nbsp;<span class="ident" id="6787731"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787735">.</span><span class="ident" id="6787736"><a href="/gostd/time/time.go.html#2734751">Nanosecond</a></span><span class="op" id="6787746">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787750">200</span>&nbsp;<span class="op" id="6787754">*</span>&nbsp;<span class="ident" id="6787756"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787760">.</span><span class="ident" id="6787761"><a href="/gostd/time/time.go.html#2734751">Nanosecond</a></span><span class="op" id="6787771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787775">500</span>&nbsp;<span class="op" id="6787779">*</span>&nbsp;<span class="ident" id="6787781"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787785">.</span><span class="ident" id="6787786"><a href="/gostd/time/time.go.html#2734751">Nanosecond</a></span><span class="op" id="6787796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787800">750</span>&nbsp;<span class="op" id="6787804">*</span>&nbsp;<span class="ident" id="6787806"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787810">.</span><span class="ident" id="6787811"><a href="/gostd/time/time.go.html#2734751">Nanosecond</a></span><span class="op" id="6787821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787825">1</span>&nbsp;<span class="op" id="6787827">*</span>&nbsp;<span class="ident" id="6787829"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787833">.</span><span class="ident" id="6787834"><a href="/gostd/time/time.go.html#2734777">Microsecond</a></span><span class="op" id="6787845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787849">5</span>&nbsp;<span class="op" id="6787851">*</span>&nbsp;<span class="ident" id="6787853"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787857">.</span><span class="ident" id="6787858"><a href="/gostd/time/time.go.html#2734777">Microsecond</a></span><span class="op" id="6787869">,</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787873">25</span>&nbsp;<span class="op" id="6787876">*</span>&nbsp;<span class="ident" id="6787878"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787882">.</span><span class="ident" id="6787883"><a href="/gostd/time/time.go.html#2734777">Microsecond</a></span><span class="op" id="6787894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787898">250</span>&nbsp;<span class="op" id="6787902">*</span>&nbsp;<span class="ident" id="6787904"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787908">.</span><span class="ident" id="6787909"><a href="/gostd/time/time.go.html#2734777">Microsecond</a></span><span class="op" id="6787920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787924">500</span>&nbsp;<span class="op" id="6787928">*</span>&nbsp;<span class="ident" id="6787930"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787934">.</span><span class="ident" id="6787935"><a href="/gostd/time/time.go.html#2734777">Microsecond</a></span><span class="op" id="6787946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787950">1</span>&nbsp;<span class="op" id="6787952">*</span>&nbsp;<span class="ident" id="6787954"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787958">.</span><span class="ident" id="6787959"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6787970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787974">5</span>&nbsp;<span class="op" id="6787976">*</span>&nbsp;<span class="ident" id="6787978"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6787982">.</span><span class="ident" id="6787983"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6787994">,</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6787998">100</span>&nbsp;<span class="op" id="6788002">*</span>&nbsp;<span class="ident" id="6788004"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6788008">.</span><span class="ident" id="6788009"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6788020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6788024">250</span>&nbsp;<span class="op" id="6788028">*</span>&nbsp;<span class="ident" id="6788030"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6788034">.</span><span class="ident" id="6788035"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6788046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6788050">500</span>&nbsp;<span class="op" id="6788054">*</span>&nbsp;<span class="ident" id="6788056"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6788060">.</span><span class="ident" id="6788061"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6788072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6788076">1</span>&nbsp;<span class="op" id="6788078">*</span>&nbsp;<span class="ident" id="6788080"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6788084">.</span><span class="ident" id="6788085"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6788091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6788094">}</span>&nbsp;<span class="op" id="6788096">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788100">numRuns</span>&nbsp;<span class="op" id="6788108">:=</span>&nbsp;<span class="num" id="6788111">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6788115">if</span>&nbsp;<span class="ident" id="6788118"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6788125">.</span><span class="ident" id="6788126"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6788131">(</span><span class="op" id="6788132">)</span>&nbsp;<span class="op" id="6788134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788139"><a href="/gostd/net/timeout_test.go.html#6788100">numRuns</a></span>&nbsp;<span class="op" id="6788147">=</span>&nbsp;<span class="num" id="6788149">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6788154">if</span>&nbsp;<span class="ident" id="6788157"><a href="/gostd/net/timeout_test.go.html#6787596">timeout</a></span>&nbsp;<span class="op" id="6788165">&gt;</span>&nbsp;<span class="num" id="6788167">500</span><span class="op" id="6788170">*</span><span class="ident" id="6788171"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6788175">.</span><span class="ident" id="6788176"><a href="/gostd/time/time.go.html#2734777">Microsecond</a></span>&nbsp;<span class="op" id="6788188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6788194">continue</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6788206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6788210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6788214">for</span>&nbsp;<span class="ident" id="6788218">run</span>&nbsp;<span class="op" id="6788222">:=</span>&nbsp;<span class="num" id="6788225">0</span><span class="op" id="6788226">;</span>&nbsp;<span class="ident" id="6788228"><a href="/gostd/net/timeout_test.go.html#6788218">run</a></span>&nbsp;<span class="op" id="6788232">&lt;</span>&nbsp;<span class="ident" id="6788234"><a href="/gostd/net/timeout_test.go.html#6788100">numRuns</a></span><span class="op" id="6788241">;</span>&nbsp;<span class="ident" id="6788243"><a href="/gostd/net/timeout_test.go.html#6788218">run</a></span><span class="op" id="6788246">++</span>&nbsp;<span class="op" id="6788249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788254">name</span>&nbsp;<span class="op" id="6788259">:=</span>&nbsp;<span class="ident" id="6788262"><a href="/gostd/net/timeout_test.go.html#6777534">fmt</a></span><span class="op" id="6788265">.</span><span class="ident" id="6788266"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6788273">(</span><span class="string" id="6788274">&#34;%v&nbsp;run&nbsp;%d/%d&#34;</span><span class="op" id="6788288">,</span>&nbsp;<span class="ident" id="6788290"><a href="/gostd/net/timeout_test.go.html#6787596">timeout</a></span><span class="op" id="6788297">,</span>&nbsp;<span class="ident" id="6788299"><a href="/gostd/net/timeout_test.go.html#6788218">run</a></span><span class="op" id="6788302">+</span><span class="num" id="6788303">1</span><span class="op" id="6788304">,</span>&nbsp;<span class="ident" id="6788306"><a href="/gostd/net/timeout_test.go.html#6788100">numRuns</a></span><span class="op" id="6788313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788318"><a href="/gostd/net/timeout_test.go.html#6786945">t</a></span><span class="op" id="6788319">.</span><span class="ident" id="6788320"><a href="/gostd/testing/testing.go.html#5479543">Log</a></span><span class="op" id="6788323">(</span><span class="ident" id="6788324"><a href="/gostd/net/timeout_test.go.html#6788254">name</a></span><span class="op" id="6788328">)</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788334">c</span><span class="op" id="6788335">,</span>&nbsp;<span class="ident" id="6788337">err</span>&nbsp;<span class="op" id="6788341">:=</span>&nbsp;<span class="ident" id="6788344"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6788348">(</span><span class="string" id="6788349">&#34;tcp&#34;</span><span class="op" id="6788354">,</span>&nbsp;<span class="ident" id="6788356"><a href="/gostd/net/timeout_test.go.html#6787121">ln</a></span><span class="op" id="6788358">.</span><span class="ident" id="6788359"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6788363">(</span><span class="op" id="6788364">)</span><span class="op" id="6788365">.</span><span class="ident" id="6788366"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6788372">(</span><span class="op" id="6788373">)</span><span class="op" id="6788374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6788379">if</span>&nbsp;<span class="ident" id="6788382"><a href="/gostd/net/timeout_test.go.html#6788337">err</a></span>&nbsp;<span class="op" id="6788386">!=</span>&nbsp;<span class="builtintype" id="6788389">nil</span>&nbsp;<span class="op" id="6788393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788399"><a href="/gostd/net/timeout_test.go.html#6786945">t</a></span><span class="op" id="6788400">.</span><span class="ident" id="6788401"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6788407">(</span><span class="string" id="6788408">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="6788418">,</span>&nbsp;<span class="ident" id="6788420"><a href="/gostd/net/timeout_test.go.html#6788337">err</a></span><span class="op" id="6788423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6788428">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788433">clientc</span>&nbsp;<span class="op" id="6788441">:=</span>&nbsp;<span class="builtinfunc" id="6788444">make</span><span class="op" id="6788448">(</span><span class="keyword" id="6788449">chan</span>&nbsp;<span class="ident" id="6788454"><a href="/gostd/net/timeout_test.go.html#6777681">copyRes</a></span><span class="op" id="6788461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6788466">go</span>&nbsp;<span class="keyword" id="6788469">func</span><span class="op" id="6788473">(</span><span class="op" id="6788474">)</span>&nbsp;<span class="op" id="6788476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788482">t0</span>&nbsp;<span class="op" id="6788485">:=</span>&nbsp;<span class="ident" id="6788488"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6788492">.</span><span class="ident" id="6788493"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6788496">(</span><span class="op" id="6788497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788503"><a href="/gostd/net/timeout_test.go.html#6788334">c</a></span><span class="op" id="6788504">.</span><span class="ident" id="6788505"><a href="/gostd/net/net.go.html#3335726">SetDeadline</a></span><span class="op" id="6788516">(</span><span class="ident" id="6788517"><a href="/gostd/net/timeout_test.go.html#6788482">t0</a></span><span class="op" id="6788519">.</span><span class="ident" id="6788520"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6788523">(</span><span class="ident" id="6788524"><a href="/gostd/net/timeout_test.go.html#6787596">timeout</a></span><span class="op" id="6788531">)</span><span class="op" id="6788532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788538">n</span><span class="op" id="6788539">,</span>&nbsp;<span class="ident" id="6788541">err</span>&nbsp;<span class="op" id="6788545">:=</span>&nbsp;<span class="ident" id="6788548"><a href="/gostd/net/timeout_test.go.html#6777541">io</a></span><span class="op" id="6788550">.</span><span class="ident" id="6788551"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="6788555">(</span><span class="ident" id="6788556"><a href="/gostd/net/timeout_test.go.html#6777547">ioutil</a></span><span class="op" id="6788562">.</span><span class="ident" id="6788563"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="6788570">,</span>&nbsp;<span class="ident" id="6788572"><a href="/gostd/net/timeout_test.go.html#6788334">c</a></span><span class="op" id="6788573">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788579">d</span>&nbsp;<span class="op" id="6788581">:=</span>&nbsp;<span class="ident" id="6788584"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6788588">.</span><span class="ident" id="6788589"><a href="/gostd/time/time.go.html#2739495">Since</a></span><span class="op" id="6788594">(</span><span class="ident" id="6788595"><a href="/gostd/net/timeout_test.go.html#6788482">t0</a></span><span class="op" id="6788597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788603"><a href="/gostd/net/timeout_test.go.html#6788334">c</a></span><span class="op" id="6788604">.</span><span class="ident" id="6788605"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6788610">(</span><span class="op" id="6788611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788617"><a href="/gostd/net/timeout_test.go.html#6788433">clientc</a></span>&nbsp;<span class="op" id="6788625">&lt;-</span>&nbsp;<span class="ident" id="6788628"><a href="/gostd/net/timeout_test.go.html#6777681">copyRes</a></span><span class="op" id="6788635">{</span><span class="ident" id="6788636"><a href="/gostd/net/timeout_test.go.html#6788538">n</a></span><span class="op" id="6788637">,</span>&nbsp;<span class="ident" id="6788639"><a href="/gostd/net/timeout_test.go.html#6788541">err</a></span><span class="op" id="6788642">,</span>&nbsp;<span class="ident" id="6788644"><a href="/gostd/net/timeout_test.go.html#6788579">d</a></span><span class="op" id="6788645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6788650">}</span><span class="op" id="6788651">(</span><span class="op" id="6788652">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788658">tooLong</span>&nbsp;<span class="op" id="6788666">:=</span>&nbsp;<span class="num" id="6788669">5</span>&nbsp;<span class="op" id="6788671">*</span>&nbsp;<span class="ident" id="6788673"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6788677">.</span><span class="ident" id="6788678"><a href="/gostd/time/time.go.html#2734862">Second</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6788688">select</span>&nbsp;<span class="op" id="6788695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6788700">case</span>&nbsp;<span class="ident" id="6788705">res</span>&nbsp;<span class="op" id="6788709">:=</span>&nbsp;<span class="op" id="6788712">&lt;-</span><span class="ident" id="6788714"><a href="/gostd/net/timeout_test.go.html#6788433">clientc</a></span><span class="op" id="6788721">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6788727">if</span>&nbsp;<span class="ident" id="6788730"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6788739">(</span><span class="ident" id="6788740"><a href="/gostd/net/timeout_test.go.html#6788705">res</a></span><span class="op" id="6788743">.</span><span class="ident" id="6788744"><a href="/gostd/net/timeout_test.go.html#6777710">err</a></span><span class="op" id="6788747">)</span>&nbsp;<span class="op" id="6788749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788756"><a href="/gostd/net/timeout_test.go.html#6786945">t</a></span><span class="op" id="6788757">.</span><span class="ident" id="6788758"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6788762">(</span><span class="string" id="6788763">&#34;for&nbsp;%v,&nbsp;good&nbsp;client&nbsp;timeout&nbsp;after&nbsp;%v,&nbsp;reading&nbsp;%d&nbsp;bytes&#34;</span><span class="op" id="6788819">,</span>&nbsp;<span class="ident" id="6788821"><a href="/gostd/net/timeout_test.go.html#6788254">name</a></span><span class="op" id="6788825">,</span>&nbsp;<span class="ident" id="6788827"><a href="/gostd/net/timeout_test.go.html#6788705">res</a></span><span class="op" id="6788830">.</span><span class="ident" id="6788831"><a href="/gostd/net/timeout_test.go.html#6777721">d</a></span><span class="op" id="6788832">,</span>&nbsp;<span class="ident" id="6788834"><a href="/gostd/net/timeout_test.go.html#6788705">res</a></span><span class="op" id="6788837">.</span><span class="ident" id="6788838"><a href="/gostd/net/timeout_test.go.html#6777699">n</a></span><span class="op" id="6788839">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6788845">}</span>&nbsp;<span class="keyword" id="6788847">else</span>&nbsp;<span class="op" id="6788852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788859"><a href="/gostd/net/timeout_test.go.html#6786945">t</a></span><span class="op" id="6788860">.</span><span class="ident" id="6788861"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6788867">(</span><span class="string" id="6788868">&#34;for&nbsp;%v:&nbsp;client&nbsp;Copy&nbsp;=&nbsp;%d,&nbsp;%v&nbsp;(want&nbsp;timeout)&#34;</span><span class="op" id="6788913">,</span>&nbsp;<span class="ident" id="6788915"><a href="/gostd/net/timeout_test.go.html#6788254">name</a></span><span class="op" id="6788919">,</span>&nbsp;<span class="ident" id="6788921"><a href="/gostd/net/timeout_test.go.html#6788705">res</a></span><span class="op" id="6788924">.</span><span class="ident" id="6788925"><a href="/gostd/net/timeout_test.go.html#6777699">n</a></span><span class="op" id="6788926">,</span>&nbsp;<span class="ident" id="6788928"><a href="/gostd/net/timeout_test.go.html#6788705">res</a></span><span class="op" id="6788931">.</span><span class="ident" id="6788932"><a href="/gostd/net/timeout_test.go.html#6777710">err</a></span><span class="op" id="6788935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6788941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6788946">case</span>&nbsp;<span class="op" id="6788951">&lt;-</span><span class="ident" id="6788953"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6788957">.</span><span class="ident" id="6788958"><a href="/gostd/time/sleep.go.html#2716644">After</a></span><span class="op" id="6788963">(</span><span class="ident" id="6788964"><a href="/gostd/net/timeout_test.go.html#6788658">tooLong</a></span><span class="op" id="6788971">)</span><span class="op" id="6788972">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6788978"><a href="/gostd/net/timeout_test.go.html#6786945">t</a></span><span class="op" id="6788979">.</span><span class="ident" id="6788980"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6788986">(</span><span class="string" id="6788987">&#34;for&nbsp;%v:&nbsp;timeout&nbsp;(%v)&nbsp;waiting&nbsp;for&nbsp;client&nbsp;to&nbsp;timeout&nbsp;(%v)&nbsp;reading&#34;</span><span class="op" id="6789052">,</span>&nbsp;<span class="ident" id="6789054"><a href="/gostd/net/timeout_test.go.html#6788254">name</a></span><span class="op" id="6789058">,</span>&nbsp;<span class="ident" id="6789060"><a href="/gostd/net/timeout_test.go.html#6788658">tooLong</a></span><span class="op" id="6789067">,</span>&nbsp;<span class="ident" id="6789069"><a href="/gostd/net/timeout_test.go.html#6787596">timeout</a></span><span class="op" id="6789076">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6789081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789087">select</span>&nbsp;<span class="op" id="6789094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789099">case</span>&nbsp;<span class="ident" id="6789104">res</span>&nbsp;<span class="op" id="6789108">:=</span>&nbsp;<span class="op" id="6789111">&lt;-</span><span class="ident" id="6789113"><a href="/gostd/net/timeout_test.go.html#6787292">servec</a></span><span class="op" id="6789119">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789125"><a href="/gostd/net/timeout_test.go.html#6786945">t</a></span><span class="op" id="6789126">.</span><span class="ident" id="6789127"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6789131">(</span><span class="string" id="6789132">&#34;for&nbsp;%v:&nbsp;server&nbsp;in&nbsp;%v&nbsp;wrote&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="6789167">,</span>&nbsp;<span class="ident" id="6789169"><a href="/gostd/net/timeout_test.go.html#6788254">name</a></span><span class="op" id="6789173">,</span>&nbsp;<span class="ident" id="6789175"><a href="/gostd/net/timeout_test.go.html#6789104">res</a></span><span class="op" id="6789178">.</span><span class="ident" id="6789179"><a href="/gostd/net/timeout_test.go.html#6777721">d</a></span><span class="op" id="6789180">,</span>&nbsp;<span class="ident" id="6789182"><a href="/gostd/net/timeout_test.go.html#6789104">res</a></span><span class="op" id="6789185">.</span><span class="ident" id="6789186"><a href="/gostd/net/timeout_test.go.html#6777699">n</a></span><span class="op" id="6789187">,</span>&nbsp;<span class="ident" id="6789189"><a href="/gostd/net/timeout_test.go.html#6789104">res</a></span><span class="op" id="6789192">.</span><span class="ident" id="6789193"><a href="/gostd/net/timeout_test.go.html#6777710">err</a></span><span class="op" id="6789196">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789201">case</span>&nbsp;<span class="ident" id="6789206">err</span>&nbsp;<span class="op" id="6789210">:=</span>&nbsp;<span class="op" id="6789213">&lt;-</span><span class="ident" id="6789215"><a href="/gostd/net/timeout_test.go.html#6787166">acceptc</a></span><span class="op" id="6789222">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789228"><a href="/gostd/net/timeout_test.go.html#6786945">t</a></span><span class="op" id="6789229">.</span><span class="ident" id="6789230"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6789236">(</span><span class="string" id="6789237">&#34;for&nbsp;%v:&nbsp;server&nbsp;Accept&nbsp;=&nbsp;%v&#34;</span><span class="op" id="6789265">,</span>&nbsp;<span class="ident" id="6789267"><a href="/gostd/net/timeout_test.go.html#6788254">name</a></span><span class="op" id="6789271">,</span>&nbsp;<span class="ident" id="6789273"><a href="/gostd/net/timeout_test.go.html#6789206">err</a></span><span class="op" id="6789276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789281">case</span>&nbsp;<span class="op" id="6789286">&lt;-</span><span class="ident" id="6789288"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6789292">.</span><span class="ident" id="6789293"><a href="/gostd/time/sleep.go.html#2716644">After</a></span><span class="op" id="6789298">(</span><span class="ident" id="6789299"><a href="/gostd/net/timeout_test.go.html#6788658">tooLong</a></span><span class="op" id="6789306">)</span><span class="op" id="6789307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789313"><a href="/gostd/net/timeout_test.go.html#6786945">t</a></span><span class="op" id="6789314">.</span><span class="ident" id="6789315"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6789321">(</span><span class="string" id="6789322">&#34;for&nbsp;%v,&nbsp;timeout&nbsp;waiting&nbsp;for&nbsp;server&nbsp;to&nbsp;finish&nbsp;writing&#34;</span><span class="op" id="6789376">,</span>&nbsp;<span class="ident" id="6789378"><a href="/gostd/net/timeout_test.go.html#6788254">name</a></span><span class="op" id="6789382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6789387">}</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6789391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6789394">}</span><br>
<span class="lineno"></span><span class="op" id="6789396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6789399">//&nbsp;TestReadDeadlineDataAvailable&nbsp;tests&nbsp;that&nbsp;read&nbsp;deadlines&nbsp;work,&nbsp;even</span><br>
<span class="lineno">525</span><span class="comment" id="6789469">//&nbsp;if&nbsp;there&#39;s&nbsp;data&nbsp;ready&nbsp;to&nbsp;be&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="6789506">func</span>&nbsp;<span class="ident" id="6789511">TestReadDeadlineDataAvailable</span><span class="op" id="6789540">(</span><span class="ident" id="6789541">t</span>&nbsp;<span class="op" id="6789543">*</span><span class="ident" id="6789544"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6789551">.</span><span class="ident" id="6789552"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6789553">)</span>&nbsp;<span class="op" id="6789555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789558">switch</span>&nbsp;<span class="ident" id="6789565"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6789572">.</span><span class="ident" id="6789573"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6789578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789581">case</span>&nbsp;<span class="string" id="6789586">&#34;plan9&#34;</span><span class="op" id="6789593">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789597"><a href="/gostd/net/timeout_test.go.html#6789541">t</a></span><span class="op" id="6789598">.</span><span class="ident" id="6789599"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6789604">(</span><span class="string" id="6789605">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6789626">,</span>&nbsp;<span class="ident" id="6789628"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6789635">.</span><span class="ident" id="6789636"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6789640">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6789643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789647">ln</span>&nbsp;<span class="op" id="6789650">:=</span>&nbsp;<span class="ident" id="6789653"><a href="/gostd/net/dial_test.go.html#6621447">newLocalListener</a></span><span class="op" id="6789669">(</span><span class="ident" id="6789670"><a href="/gostd/net/timeout_test.go.html#6789541">t</a></span><span class="op" id="6789671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789674">defer</span>&nbsp;<span class="ident" id="6789680"><a href="/gostd/net/timeout_test.go.html#6789647">ln</a></span><span class="op" id="6789682">.</span><span class="ident" id="6789683"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6789688">(</span><span class="op" id="6789689">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789693">servec</span>&nbsp;<span class="op" id="6789700">:=</span>&nbsp;<span class="builtinfunc" id="6789703">make</span><span class="op" id="6789707">(</span><span class="keyword" id="6789708">chan</span>&nbsp;<span class="ident" id="6789713"><a href="/gostd/net/timeout_test.go.html#6777681">copyRes</a></span><span class="op" id="6789720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789723">const</span>&nbsp;<span class="ident" id="6789729">msg</span>&nbsp;<span class="op" id="6789733">=</span>&nbsp;<span class="string" id="6789735">&#34;data&nbsp;client&nbsp;shouldn&#39;t&nbsp;read,&nbsp;even&nbsp;though&nbsp;it&#39;ll&nbsp;be&nbsp;waiting&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789795">go</span>&nbsp;<span class="keyword" id="6789798">func</span><span class="op" id="6789802">(</span><span class="op" id="6789803">)</span>&nbsp;<span class="op" id="6789805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789809">c</span><span class="op" id="6789810">,</span>&nbsp;<span class="ident" id="6789812">err</span>&nbsp;<span class="op" id="6789816">:=</span>&nbsp;<span class="ident" id="6789819"><a href="/gostd/net/timeout_test.go.html#6789647">ln</a></span><span class="op" id="6789821">.</span><span class="ident" id="6789822"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6789828">(</span><span class="op" id="6789829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789833">if</span>&nbsp;<span class="ident" id="6789836"><a href="/gostd/net/timeout_test.go.html#6789812">err</a></span>&nbsp;<span class="op" id="6789840">!=</span>&nbsp;<span class="builtintype" id="6789843">nil</span>&nbsp;<span class="op" id="6789847">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789852"><a href="/gostd/net/timeout_test.go.html#6789541">t</a></span><span class="op" id="6789853">.</span><span class="ident" id="6789854"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6789860">(</span><span class="string" id="6789861">&#34;Accept:&nbsp;%v&#34;</span><span class="op" id="6789873">,</span>&nbsp;<span class="ident" id="6789875"><a href="/gostd/net/timeout_test.go.html#6789812">err</a></span><span class="op" id="6789878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789883">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6789892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6789896">defer</span>&nbsp;<span class="ident" id="6789902"><a href="/gostd/net/timeout_test.go.html#6789809">c</a></span><span class="op" id="6789903">.</span><span class="ident" id="6789904"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6789909">(</span><span class="op" id="6789910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789914">n</span><span class="op" id="6789915">,</span>&nbsp;<span class="ident" id="6789917"><a href="/gostd/net/timeout_test.go.html#6789812">err</a></span>&nbsp;<span class="op" id="6789921">:=</span>&nbsp;<span class="ident" id="6789924"><a href="/gostd/net/timeout_test.go.html#6789809">c</a></span><span class="op" id="6789925">.</span><span class="ident" id="6789926"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6789931">(</span><span class="op" id="6789932">[</span><span class="op" id="6789933">]</span><span class="builtintype" id="6789934">byte</span><span class="op" id="6789938">(</span><span class="ident" id="6789939"><a href="/gostd/net/timeout_test.go.html#6789729">msg</a></span><span class="op" id="6789942">)</span><span class="op" id="6789943">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789947"><a href="/gostd/net/timeout_test.go.html#6789693">servec</a></span>&nbsp;<span class="op" id="6789954">&lt;-</span>&nbsp;<span class="ident" id="6789957"><a href="/gostd/net/timeout_test.go.html#6777681">copyRes</a></span><span class="op" id="6789964">{</span><span class="ident" id="6789965"><a href="/gostd/net/timeout_test.go.html#6777699">n</a></span><span class="op" id="6789966">:</span>&nbsp;<span class="builtintype" id="6789968">int64</span><span class="op" id="6789973">(</span><span class="ident" id="6789974"><a href="/gostd/net/timeout_test.go.html#6789914">n</a></span><span class="op" id="6789975">)</span><span class="op" id="6789976">,</span>&nbsp;<span class="ident" id="6789978"><a href="/gostd/net/timeout_test.go.html#6777710">err</a></span><span class="op" id="6789981">:</span>&nbsp;<span class="ident" id="6789983"><a href="/gostd/net/timeout_test.go.html#6789812">err</a></span><span class="op" id="6789986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6789989">}</span><span class="op" id="6789990">(</span><span class="op" id="6789991">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789995">c</span><span class="op" id="6789996">,</span>&nbsp;<span class="ident" id="6789998">err</span>&nbsp;<span class="op" id="6790002">:=</span>&nbsp;<span class="ident" id="6790005"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6790009">(</span><span class="string" id="6790010">&#34;tcp&#34;</span><span class="op" id="6790015">,</span>&nbsp;<span class="ident" id="6790017"><a href="/gostd/net/timeout_test.go.html#6789647">ln</a></span><span class="op" id="6790019">.</span><span class="ident" id="6790020"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6790024">(</span><span class="op" id="6790025">)</span><span class="op" id="6790026">.</span><span class="ident" id="6790027"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6790033">(</span><span class="op" id="6790034">)</span><span class="op" id="6790035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790038">if</span>&nbsp;<span class="ident" id="6790041"><a href="/gostd/net/timeout_test.go.html#6789998">err</a></span>&nbsp;<span class="op" id="6790045">!=</span>&nbsp;<span class="builtintype" id="6790048">nil</span>&nbsp;<span class="op" id="6790052">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790056"><a href="/gostd/net/timeout_test.go.html#6789541">t</a></span><span class="op" id="6790057">.</span><span class="ident" id="6790058"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6790064">(</span><span class="string" id="6790065">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="6790075">,</span>&nbsp;<span class="ident" id="6790077"><a href="/gostd/net/timeout_test.go.html#6789998">err</a></span><span class="op" id="6790080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6790083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790086">defer</span>&nbsp;<span class="ident" id="6790092"><a href="/gostd/net/timeout_test.go.html#6789995">c</a></span><span class="op" id="6790093">.</span><span class="ident" id="6790094"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6790099">(</span><span class="op" id="6790100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790103">if</span>&nbsp;<span class="ident" id="6790106">res</span>&nbsp;<span class="op" id="6790110">:=</span>&nbsp;<span class="op" id="6790113">&lt;-</span><span class="ident" id="6790115"><a href="/gostd/net/timeout_test.go.html#6789693">servec</a></span><span class="op" id="6790121">;</span>&nbsp;<span class="ident" id="6790123"><a href="/gostd/net/timeout_test.go.html#6790106">res</a></span><span class="op" id="6790126">.</span><span class="ident" id="6790127"><a href="/gostd/net/timeout_test.go.html#6777710">err</a></span>&nbsp;<span class="op" id="6790131">!=</span>&nbsp;<span class="builtintype" id="6790134">nil</span>&nbsp;<span class="op" id="6790138">||</span>&nbsp;<span class="ident" id="6790141"><a href="/gostd/net/timeout_test.go.html#6790106">res</a></span><span class="op" id="6790144">.</span><span class="ident" id="6790145"><a href="/gostd/net/timeout_test.go.html#6777699">n</a></span>&nbsp;<span class="op" id="6790147">!=</span>&nbsp;<span class="builtintype" id="6790150">int64</span><span class="op" id="6790155">(</span><span class="builtinfunc" id="6790156">len</span><span class="op" id="6790159">(</span><span class="ident" id="6790160"><a href="/gostd/net/timeout_test.go.html#6789729">msg</a></span><span class="op" id="6790163">)</span><span class="op" id="6790164">)</span>&nbsp;<span class="op" id="6790166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790170"><a href="/gostd/net/timeout_test.go.html#6789541">t</a></span><span class="op" id="6790171">.</span><span class="ident" id="6790172"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6790178">(</span><span class="string" id="6790179">&#34;unexpected&nbsp;server&nbsp;Write:&nbsp;n=%d,&nbsp;err=%v;&nbsp;want&nbsp;n=%d,&nbsp;err=nil&#34;</span><span class="op" id="6790238">,</span>&nbsp;<span class="ident" id="6790240"><a href="/gostd/net/timeout_test.go.html#6790106">res</a></span><span class="op" id="6790243">.</span><span class="ident" id="6790244"><a href="/gostd/net/timeout_test.go.html#6777699">n</a></span><span class="op" id="6790245">,</span>&nbsp;<span class="ident" id="6790247"><a href="/gostd/net/timeout_test.go.html#6790106">res</a></span><span class="op" id="6790250">.</span><span class="ident" id="6790251"><a href="/gostd/net/timeout_test.go.html#6777710">err</a></span><span class="op" id="6790254">,</span>&nbsp;<span class="builtinfunc" id="6790256">len</span><span class="op" id="6790259">(</span><span class="ident" id="6790260"><a href="/gostd/net/timeout_test.go.html#6789729">msg</a></span><span class="op" id="6790263">)</span><span class="op" id="6790264">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6790267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790270"><a href="/gostd/net/timeout_test.go.html#6789995">c</a></span><span class="op" id="6790271">.</span><span class="ident" id="6790272"><a href="/gostd/net/net.go.html#3335873">SetReadDeadline</a></span><span class="op" id="6790287">(</span><span class="ident" id="6790288"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6790292">.</span><span class="ident" id="6790293"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6790296">(</span><span class="op" id="6790297">)</span><span class="op" id="6790298">.</span><span class="ident" id="6790299"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6790302">(</span><span class="op" id="6790303">-</span><span class="num" id="6790304">5</span>&nbsp;<span class="op" id="6790306">*</span>&nbsp;<span class="ident" id="6790308"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6790312">.</span><span class="ident" id="6790313"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6790319">)</span><span class="op" id="6790320">)</span>&nbsp;<span class="comment" id="6790322">//&nbsp;in&nbsp;the&nbsp;psat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790339">buf</span>&nbsp;<span class="op" id="6790343">:=</span>&nbsp;<span class="builtinfunc" id="6790346">make</span><span class="op" id="6790350">(</span><span class="op" id="6790351">[</span><span class="op" id="6790352">]</span><span class="builtintype" id="6790353">byte</span><span class="op" id="6790357">,</span>&nbsp;<span class="builtinfunc" id="6790359">len</span><span class="op" id="6790362">(</span><span class="ident" id="6790363"><a href="/gostd/net/timeout_test.go.html#6789729">msg</a></span><span class="op" id="6790366">)</span><span class="op" id="6790367">/</span><span class="num" id="6790368">2</span><span class="op" id="6790369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790372">n</span><span class="op" id="6790373">,</span>&nbsp;<span class="ident" id="6790375"><a href="/gostd/net/timeout_test.go.html#6789998">err</a></span>&nbsp;<span class="op" id="6790379">:=</span>&nbsp;<span class="ident" id="6790382"><a href="/gostd/net/timeout_test.go.html#6789995">c</a></span><span class="op" id="6790383">.</span><span class="ident" id="6790384"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6790388">(</span><span class="ident" id="6790389"><a href="/gostd/net/timeout_test.go.html#6790339">buf</a></span><span class="op" id="6790392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790395">if</span>&nbsp;<span class="ident" id="6790398"><a href="/gostd/net/timeout_test.go.html#6790372">n</a></span>&nbsp;<span class="op" id="6790400">&gt;</span>&nbsp;<span class="num" id="6790402">0</span>&nbsp;<span class="op" id="6790404">||</span>&nbsp;<span class="op" id="6790407">!</span><span class="ident" id="6790408"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6790417">(</span><span class="ident" id="6790418"><a href="/gostd/net/timeout_test.go.html#6789998">err</a></span><span class="op" id="6790421">)</span>&nbsp;<span class="op" id="6790423">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790427"><a href="/gostd/net/timeout_test.go.html#6789541">t</a></span><span class="op" id="6790428">.</span><span class="ident" id="6790429"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6790435">(</span><span class="string" id="6790436">&#34;client&nbsp;read&nbsp;=&nbsp;%d&nbsp;(%q)&nbsp;err=%v;&nbsp;want&nbsp;0,&nbsp;timeout&#34;</span><span class="op" id="6790483">,</span>&nbsp;<span class="ident" id="6790485"><a href="/gostd/net/timeout_test.go.html#6790372">n</a></span><span class="op" id="6790486">,</span>&nbsp;<span class="ident" id="6790488"><a href="/gostd/net/timeout_test.go.html#6790339">buf</a></span><span class="op" id="6790491">[</span><span class="op" id="6790492">:</span><span class="ident" id="6790493"><a href="/gostd/net/timeout_test.go.html#6790372">n</a></span><span class="op" id="6790494">]</span><span class="op" id="6790495">,</span>&nbsp;<span class="ident" id="6790497"><a href="/gostd/net/timeout_test.go.html#6789998">err</a></span><span class="op" id="6790500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6790503">}</span><br>
<span class="lineno"></span><span class="op" id="6790505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6790508">//&nbsp;TestWriteDeadlineBufferAvailable&nbsp;tests&nbsp;that&nbsp;write&nbsp;deadlines&nbsp;work,&nbsp;even</span><br>
<span class="lineno">565</span><span class="comment" id="6790582">//&nbsp;if&nbsp;there&#39;s&nbsp;buffer&nbsp;space&nbsp;available&nbsp;to&nbsp;write.</span><br>
<span class="lineno"></span><span class="keyword" id="6790629">func</span>&nbsp;<span class="ident" id="6790634">TestWriteDeadlineBufferAvailable</span><span class="op" id="6790666">(</span><span class="ident" id="6790667">t</span>&nbsp;<span class="op" id="6790669">*</span><span class="ident" id="6790670"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6790677">.</span><span class="ident" id="6790678"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6790679">)</span>&nbsp;<span class="op" id="6790681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790684">switch</span>&nbsp;<span class="ident" id="6790691"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6790698">.</span><span class="ident" id="6790699"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6790704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790707">case</span>&nbsp;<span class="string" id="6790712">&#34;plan9&#34;</span><span class="op" id="6790719">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790723"><a href="/gostd/net/timeout_test.go.html#6790667">t</a></span><span class="op" id="6790724">.</span><span class="ident" id="6790725"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6790730">(</span><span class="string" id="6790731">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6790752">,</span>&nbsp;<span class="ident" id="6790754"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6790761">.</span><span class="ident" id="6790762"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6790766">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6790769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790773">ln</span>&nbsp;<span class="op" id="6790776">:=</span>&nbsp;<span class="ident" id="6790779"><a href="/gostd/net/dial_test.go.html#6621447">newLocalListener</a></span><span class="op" id="6790795">(</span><span class="ident" id="6790796"><a href="/gostd/net/timeout_test.go.html#6790667">t</a></span><span class="op" id="6790797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790800">defer</span>&nbsp;<span class="ident" id="6790806"><a href="/gostd/net/timeout_test.go.html#6790773">ln</a></span><span class="op" id="6790808">.</span><span class="ident" id="6790809"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6790814">(</span><span class="op" id="6790815">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790819">servec</span>&nbsp;<span class="op" id="6790826">:=</span>&nbsp;<span class="builtinfunc" id="6790829">make</span><span class="op" id="6790833">(</span><span class="keyword" id="6790834">chan</span>&nbsp;<span class="ident" id="6790839"><a href="/gostd/net/timeout_test.go.html#6777681">copyRes</a></span><span class="op" id="6790846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790849">go</span>&nbsp;<span class="keyword" id="6790852">func</span><span class="op" id="6790856">(</span><span class="op" id="6790857">)</span>&nbsp;<span class="op" id="6790859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790863">c</span><span class="op" id="6790864">,</span>&nbsp;<span class="ident" id="6790866">err</span>&nbsp;<span class="op" id="6790870">:=</span>&nbsp;<span class="ident" id="6790873"><a href="/gostd/net/timeout_test.go.html#6790773">ln</a></span><span class="op" id="6790875">.</span><span class="ident" id="6790876"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6790882">(</span><span class="op" id="6790883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790887">if</span>&nbsp;<span class="ident" id="6790890"><a href="/gostd/net/timeout_test.go.html#6790866">err</a></span>&nbsp;<span class="op" id="6790894">!=</span>&nbsp;<span class="builtintype" id="6790897">nil</span>&nbsp;<span class="op" id="6790901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790906"><a href="/gostd/net/timeout_test.go.html#6790667">t</a></span><span class="op" id="6790907">.</span><span class="ident" id="6790908"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6790914">(</span><span class="string" id="6790915">&#34;Accept:&nbsp;%v&#34;</span><span class="op" id="6790927">,</span>&nbsp;<span class="ident" id="6790929"><a href="/gostd/net/timeout_test.go.html#6790866">err</a></span><span class="op" id="6790932">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790937">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6790946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6790950">defer</span>&nbsp;<span class="ident" id="6790956"><a href="/gostd/net/timeout_test.go.html#6790863">c</a></span><span class="op" id="6790957">.</span><span class="ident" id="6790958"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6790963">(</span><span class="op" id="6790964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790968"><a href="/gostd/net/timeout_test.go.html#6790863">c</a></span><span class="op" id="6790969">.</span><span class="ident" id="6790970"><a href="/gostd/net/net.go.html#3336140">SetWriteDeadline</a></span><span class="op" id="6790986">(</span><span class="ident" id="6790987"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6790991">.</span><span class="ident" id="6790992"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6790995">(</span><span class="op" id="6790996">)</span><span class="op" id="6790997">.</span><span class="ident" id="6790998"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6791001">(</span><span class="op" id="6791002">-</span><span class="num" id="6791003">5</span>&nbsp;<span class="op" id="6791005">*</span>&nbsp;<span class="ident" id="6791007"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6791011">.</span><span class="ident" id="6791012"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6791018">)</span><span class="op" id="6791019">)</span>&nbsp;<span class="comment" id="6791021">//&nbsp;in&nbsp;the&nbsp;past</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791038">n</span><span class="op" id="6791039">,</span>&nbsp;<span class="ident" id="6791041"><a href="/gostd/net/timeout_test.go.html#6790866">err</a></span>&nbsp;<span class="op" id="6791045">:=</span>&nbsp;<span class="ident" id="6791048"><a href="/gostd/net/timeout_test.go.html#6790863">c</a></span><span class="op" id="6791049">.</span><span class="ident" id="6791050"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6791055">(</span><span class="op" id="6791056">[</span><span class="op" id="6791057">]</span><span class="builtintype" id="6791058">byte</span><span class="op" id="6791062">{</span><span class="string" id="6791063">&#39;x&#39;</span><span class="op" id="6791066">}</span><span class="op" id="6791067">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791071"><a href="/gostd/net/timeout_test.go.html#6790819">servec</a></span>&nbsp;<span class="op" id="6791078">&lt;-</span>&nbsp;<span class="ident" id="6791081"><a href="/gostd/net/timeout_test.go.html#6777681">copyRes</a></span><span class="op" id="6791088">{</span><span class="ident" id="6791089"><a href="/gostd/net/timeout_test.go.html#6777699">n</a></span><span class="op" id="6791090">:</span>&nbsp;<span class="builtintype" id="6791092">int64</span><span class="op" id="6791097">(</span><span class="ident" id="6791098"><a href="/gostd/net/timeout_test.go.html#6791038">n</a></span><span class="op" id="6791099">)</span><span class="op" id="6791100">,</span>&nbsp;<span class="ident" id="6791102"><a href="/gostd/net/timeout_test.go.html#6777710">err</a></span><span class="op" id="6791105">:</span>&nbsp;<span class="ident" id="6791107"><a href="/gostd/net/timeout_test.go.html#6790866">err</a></span><span class="op" id="6791110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6791113">}</span><span class="op" id="6791114">(</span><span class="op" id="6791115">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791119">c</span><span class="op" id="6791120">,</span>&nbsp;<span class="ident" id="6791122">err</span>&nbsp;<span class="op" id="6791126">:=</span>&nbsp;<span class="ident" id="6791129"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6791133">(</span><span class="string" id="6791134">&#34;tcp&#34;</span><span class="op" id="6791139">,</span>&nbsp;<span class="ident" id="6791141"><a href="/gostd/net/timeout_test.go.html#6790773">ln</a></span><span class="op" id="6791143">.</span><span class="ident" id="6791144"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6791148">(</span><span class="op" id="6791149">)</span><span class="op" id="6791150">.</span><span class="ident" id="6791151"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6791157">(</span><span class="op" id="6791158">)</span><span class="op" id="6791159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791162">if</span>&nbsp;<span class="ident" id="6791165"><a href="/gostd/net/timeout_test.go.html#6791122">err</a></span>&nbsp;<span class="op" id="6791169">!=</span>&nbsp;<span class="builtintype" id="6791172">nil</span>&nbsp;<span class="op" id="6791176">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791180"><a href="/gostd/net/timeout_test.go.html#6790667">t</a></span><span class="op" id="6791181">.</span><span class="ident" id="6791182"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6791188">(</span><span class="string" id="6791189">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="6791199">,</span>&nbsp;<span class="ident" id="6791201"><a href="/gostd/net/timeout_test.go.html#6791122">err</a></span><span class="op" id="6791204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6791207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791210">defer</span>&nbsp;<span class="ident" id="6791216"><a href="/gostd/net/timeout_test.go.html#6791119">c</a></span><span class="op" id="6791217">.</span><span class="ident" id="6791218"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6791223">(</span><span class="op" id="6791224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791227">res</span>&nbsp;<span class="op" id="6791231">:=</span>&nbsp;<span class="op" id="6791234">&lt;-</span><span class="ident" id="6791236"><a href="/gostd/net/timeout_test.go.html#6790819">servec</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791244">if</span>&nbsp;<span class="ident" id="6791247"><a href="/gostd/net/timeout_test.go.html#6791227">res</a></span><span class="op" id="6791250">.</span><span class="ident" id="6791251"><a href="/gostd/net/timeout_test.go.html#6777699">n</a></span>&nbsp;<span class="op" id="6791253">!=</span>&nbsp;<span class="num" id="6791256">0</span>&nbsp;<span class="op" id="6791258">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791262"><a href="/gostd/net/timeout_test.go.html#6790667">t</a></span><span class="op" id="6791263">.</span><span class="ident" id="6791264"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6791270">(</span><span class="string" id="6791271">&#34;Write&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0&#34;</span><span class="op" id="6791291">,</span>&nbsp;<span class="ident" id="6791293"><a href="/gostd/net/timeout_test.go.html#6791227">res</a></span><span class="op" id="6791296">.</span><span class="ident" id="6791297"><a href="/gostd/net/timeout_test.go.html#6777699">n</a></span><span class="op" id="6791298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6791301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791304">if</span>&nbsp;<span class="op" id="6791307">!</span><span class="ident" id="6791308"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6791317">(</span><span class="ident" id="6791318"><a href="/gostd/net/timeout_test.go.html#6791227">res</a></span><span class="op" id="6791321">.</span><span class="ident" id="6791322"><a href="/gostd/net/timeout_test.go.html#6777710">err</a></span><span class="op" id="6791325">)</span>&nbsp;<span class="op" id="6791327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791331"><a href="/gostd/net/timeout_test.go.html#6790667">t</a></span><span class="op" id="6791332">.</span><span class="ident" id="6791333"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6791339">(</span><span class="string" id="6791340">&#34;Write&nbsp;error&nbsp;=&nbsp;%v;&nbsp;want&nbsp;timeout&#34;</span><span class="op" id="6791372">,</span>&nbsp;<span class="ident" id="6791374"><a href="/gostd/net/timeout_test.go.html#6791227">res</a></span><span class="op" id="6791377">.</span><span class="ident" id="6791378"><a href="/gostd/net/timeout_test.go.html#6777710">err</a></span><span class="op" id="6791381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6791384">}</span><br>
<span class="lineno">600</span><span class="op" id="6791386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6791389">//&nbsp;TestAcceptDeadlineConnectionAvailable&nbsp;tests&nbsp;that&nbsp;accept&nbsp;deadlines&nbsp;work,&nbsp;even</span><br>
<span class="lineno"></span><span class="comment" id="6791469">//&nbsp;if&nbsp;there&#39;s&nbsp;incoming&nbsp;connections&nbsp;available.</span><br>
<span class="lineno"></span><span class="keyword" id="6791515">func</span>&nbsp;<span class="ident" id="6791520">TestAcceptDeadlineConnectionAvailable</span><span class="op" id="6791557">(</span><span class="ident" id="6791558">t</span>&nbsp;<span class="op" id="6791560">*</span><span class="ident" id="6791561"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6791568">.</span><span class="ident" id="6791569"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6791570">)</span>&nbsp;<span class="op" id="6791572">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791575">switch</span>&nbsp;<span class="ident" id="6791582"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6791589">.</span><span class="ident" id="6791590"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6791595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791598">case</span>&nbsp;<span class="string" id="6791603">&#34;plan9&#34;</span><span class="op" id="6791610">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791614"><a href="/gostd/net/timeout_test.go.html#6791558">t</a></span><span class="op" id="6791615">.</span><span class="ident" id="6791616"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6791621">(</span><span class="string" id="6791622">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6791643">,</span>&nbsp;<span class="ident" id="6791645"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6791652">.</span><span class="ident" id="6791653"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6791657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6791660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791664">ln</span>&nbsp;<span class="op" id="6791667">:=</span>&nbsp;<span class="ident" id="6791670"><a href="/gostd/net/dial_test.go.html#6621447">newLocalListener</a></span><span class="op" id="6791686">(</span><span class="ident" id="6791687"><a href="/gostd/net/timeout_test.go.html#6791558">t</a></span><span class="op" id="6791688">)</span><span class="op" id="6791689">.</span><span class="op" id="6791690">(</span><span class="op" id="6791691">*</span><span class="ident" id="6791692"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6791703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791706">defer</span>&nbsp;<span class="ident" id="6791712"><a href="/gostd/net/timeout_test.go.html#6791664">ln</a></span><span class="op" id="6791714">.</span><span class="ident" id="6791715"><a href="/gostd/net/tcpsock_posix.go.html#3382598">Close</a></span><span class="op" id="6791720">(</span><span class="op" id="6791721">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791725">go</span>&nbsp;<span class="keyword" id="6791728">func</span><span class="op" id="6791732">(</span><span class="op" id="6791733">)</span>&nbsp;<span class="op" id="6791735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791739">c</span><span class="op" id="6791740">,</span>&nbsp;<span class="ident" id="6791742">err</span>&nbsp;<span class="op" id="6791746">:=</span>&nbsp;<span class="ident" id="6791749"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6791753">(</span><span class="string" id="6791754">&#34;tcp&#34;</span><span class="op" id="6791759">,</span>&nbsp;<span class="ident" id="6791761"><a href="/gostd/net/timeout_test.go.html#6791664">ln</a></span><span class="op" id="6791763">.</span><span class="ident" id="6791764"><a href="/gostd/net/tcpsock_posix.go.html#3382777">Addr</a></span><span class="op" id="6791768">(</span><span class="op" id="6791769">)</span><span class="op" id="6791770">.</span><span class="ident" id="6791771"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6791777">(</span><span class="op" id="6791778">)</span><span class="op" id="6791779">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791783">if</span>&nbsp;<span class="ident" id="6791786"><a href="/gostd/net/timeout_test.go.html#6791742">err</a></span>&nbsp;<span class="op" id="6791790">!=</span>&nbsp;<span class="builtintype" id="6791793">nil</span>&nbsp;<span class="op" id="6791797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791802"><a href="/gostd/net/timeout_test.go.html#6791558">t</a></span><span class="op" id="6791803">.</span><span class="ident" id="6791804"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6791810">(</span><span class="string" id="6791811">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="6791821">,</span>&nbsp;<span class="ident" id="6791823"><a href="/gostd/net/timeout_test.go.html#6791742">err</a></span><span class="op" id="6791826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791831">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6791840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791844">defer</span>&nbsp;<span class="ident" id="6791850"><a href="/gostd/net/timeout_test.go.html#6791739">c</a></span><span class="op" id="6791851">.</span><span class="ident" id="6791852"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6791857">(</span><span class="op" id="6791858">)</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6791862">var</span>&nbsp;<span class="ident" id="6791866">buf</span>&nbsp;<span class="op" id="6791870">[</span><span class="num" id="6791871">1</span><span class="op" id="6791872">]</span><span class="builtintype" id="6791873">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791880"><a href="/gostd/net/timeout_test.go.html#6791739">c</a></span><span class="op" id="6791881">.</span><span class="ident" id="6791882"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6791886">(</span><span class="ident" id="6791887"><a href="/gostd/net/timeout_test.go.html#6791866">buf</a></span><span class="op" id="6791890">[</span><span class="op" id="6791891">:</span><span class="op" id="6791892">]</span><span class="op" id="6791893">)</span>&nbsp;<span class="comment" id="6791895">//&nbsp;block&nbsp;until&nbsp;the&nbsp;connection&nbsp;or&nbsp;listener&nbsp;is&nbsp;closed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6791948">}</span><span class="op" id="6791949">(</span><span class="op" id="6791950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791953"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6791957">.</span><span class="ident" id="6791958"><a href="/gostd/time/sleep.go.html#2713940">Sleep</a></span><span class="op" id="6791963">(</span><span class="num" id="6791964">10</span>&nbsp;<span class="op" id="6791967">*</span>&nbsp;<span class="ident" id="6791969"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6791973">.</span><span class="ident" id="6791974"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6791985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6791988"><a href="/gostd/net/timeout_test.go.html#6791664">ln</a></span><span class="op" id="6791990">.</span><span class="ident" id="6791991"><a href="/gostd/net/tcpsock_posix.go.html#3382941">SetDeadline</a></span><span class="op" id="6792002">(</span><span class="ident" id="6792003"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6792007">.</span><span class="ident" id="6792008"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6792011">(</span><span class="op" id="6792012">)</span><span class="op" id="6792013">.</span><span class="ident" id="6792014"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6792017">(</span><span class="op" id="6792018">-</span><span class="num" id="6792019">5</span>&nbsp;<span class="op" id="6792021">*</span>&nbsp;<span class="ident" id="6792023"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6792027">.</span><span class="ident" id="6792028"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6792034">)</span><span class="op" id="6792035">)</span>&nbsp;<span class="comment" id="6792037">//&nbsp;in&nbsp;the&nbsp;past</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6792053">c</span><span class="op" id="6792054">,</span>&nbsp;<span class="ident" id="6792056">err</span>&nbsp;<span class="op" id="6792060">:=</span>&nbsp;<span class="ident" id="6792063"><a href="/gostd/net/timeout_test.go.html#6791664">ln</a></span><span class="op" id="6792065">.</span><span class="ident" id="6792066"><a href="/gostd/net/tcpsock_posix.go.html#3382377">Accept</a></span><span class="op" id="6792072">(</span><span class="op" id="6792073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792076">if</span>&nbsp;<span class="ident" id="6792079"><a href="/gostd/net/timeout_test.go.html#6792056">err</a></span>&nbsp;<span class="op" id="6792083">==</span>&nbsp;<span class="builtintype" id="6792086">nil</span>&nbsp;<span class="op" id="6792090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792094">defer</span>&nbsp;<span class="ident" id="6792100"><a href="/gostd/net/timeout_test.go.html#6792053">c</a></span><span class="op" id="6792101">.</span><span class="ident" id="6792102"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6792107">(</span><span class="op" id="6792108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6792111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792114">if</span>&nbsp;<span class="op" id="6792117">!</span><span class="ident" id="6792118"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6792127">(</span><span class="ident" id="6792128"><a href="/gostd/net/timeout_test.go.html#6792056">err</a></span><span class="op" id="6792131">)</span>&nbsp;<span class="op" id="6792133">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6792137"><a href="/gostd/net/timeout_test.go.html#6791558">t</a></span><span class="op" id="6792138">.</span><span class="ident" id="6792139"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6792145">(</span><span class="string" id="6792146">&#34;Accept:&nbsp;got&nbsp;%v;&nbsp;want&nbsp;timeout&#34;</span><span class="op" id="6792176">,</span>&nbsp;<span class="ident" id="6792178"><a href="/gostd/net/timeout_test.go.html#6792056">err</a></span><span class="op" id="6792181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6792184">}</span><br>
<span class="lineno"></span><span class="op" id="6792186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6792189">//&nbsp;TestConnectDeadlineInThePast&nbsp;tests&nbsp;that&nbsp;connect&nbsp;deadlines&nbsp;work,&nbsp;even</span><br>
<span class="lineno">635</span><span class="comment" id="6792261">//&nbsp;if&nbsp;the&nbsp;connection&nbsp;can&nbsp;be&nbsp;established&nbsp;w/o&nbsp;blocking.</span><br>
<span class="lineno"></span><span class="keyword" id="6792315">func</span>&nbsp;<span class="ident" id="6792320">TestConnectDeadlineInThePast</span><span class="op" id="6792348">(</span><span class="ident" id="6792349">t</span>&nbsp;<span class="op" id="6792351">*</span><span class="ident" id="6792352"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6792359">.</span><span class="ident" id="6792360"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6792361">)</span>&nbsp;<span class="op" id="6792363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792366">switch</span>&nbsp;<span class="ident" id="6792373"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6792380">.</span><span class="ident" id="6792381"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6792386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792389">case</span>&nbsp;<span class="string" id="6792394">&#34;plan9&#34;</span><span class="op" id="6792401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6792405"><a href="/gostd/net/timeout_test.go.html#6792349">t</a></span><span class="op" id="6792406">.</span><span class="ident" id="6792407"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6792412">(</span><span class="string" id="6792413">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6792434">,</span>&nbsp;<span class="ident" id="6792436"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6792443">.</span><span class="ident" id="6792444"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6792448">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6792451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6792455">ln</span>&nbsp;<span class="op" id="6792458">:=</span>&nbsp;<span class="ident" id="6792461"><a href="/gostd/net/dial_test.go.html#6621447">newLocalListener</a></span><span class="op" id="6792477">(</span><span class="ident" id="6792478"><a href="/gostd/net/timeout_test.go.html#6792349">t</a></span><span class="op" id="6792479">)</span><span class="op" id="6792480">.</span><span class="op" id="6792481">(</span><span class="op" id="6792482">*</span><span class="ident" id="6792483"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6792494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792497">defer</span>&nbsp;<span class="ident" id="6792503"><a href="/gostd/net/timeout_test.go.html#6792455">ln</a></span><span class="op" id="6792505">.</span><span class="ident" id="6792506"><a href="/gostd/net/tcpsock_posix.go.html#3382598">Close</a></span><span class="op" id="6792511">(</span><span class="op" id="6792512">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792516">go</span>&nbsp;<span class="keyword" id="6792519">func</span><span class="op" id="6792523">(</span><span class="op" id="6792524">)</span>&nbsp;<span class="op" id="6792526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6792530">c</span><span class="op" id="6792531">,</span>&nbsp;<span class="ident" id="6792533">err</span>&nbsp;<span class="op" id="6792537">:=</span>&nbsp;<span class="ident" id="6792540"><a href="/gostd/net/timeout_test.go.html#6792455">ln</a></span><span class="op" id="6792542">.</span><span class="ident" id="6792543"><a href="/gostd/net/tcpsock_posix.go.html#3382377">Accept</a></span><span class="op" id="6792549">(</span><span class="op" id="6792550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792554">if</span>&nbsp;<span class="ident" id="6792557"><a href="/gostd/net/timeout_test.go.html#6792533">err</a></span>&nbsp;<span class="op" id="6792561">==</span>&nbsp;<span class="builtintype" id="6792564">nil</span>&nbsp;<span class="op" id="6792568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792573">defer</span>&nbsp;<span class="ident" id="6792579"><a href="/gostd/net/timeout_test.go.html#6792530">c</a></span><span class="op" id="6792580">.</span><span class="ident" id="6792581"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6792586">(</span><span class="op" id="6792587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6792591">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6792594">}</span><span class="op" id="6792595">(</span><span class="op" id="6792596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6792599"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6792603">.</span><span class="ident" id="6792604"><a href="/gostd/time/sleep.go.html#2713940">Sleep</a></span><span class="op" id="6792609">(</span><span class="num" id="6792610">10</span>&nbsp;<span class="op" id="6792613">*</span>&nbsp;<span class="ident" id="6792615"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6792619">.</span><span class="ident" id="6792620"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6792631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6792634">c</span><span class="op" id="6792635">,</span>&nbsp;<span class="ident" id="6792637">err</span>&nbsp;<span class="op" id="6792641">:=</span>&nbsp;<span class="ident" id="6792644"><a href="/gostd/net/dial.go.html#3203665">DialTimeout</a></span><span class="op" id="6792655">(</span><span class="string" id="6792656">&#34;tcp&#34;</span><span class="op" id="6792661">,</span>&nbsp;<span class="ident" id="6792663"><a href="/gostd/net/timeout_test.go.html#6792455">ln</a></span><span class="op" id="6792665">.</span><span class="ident" id="6792666"><a href="/gostd/net/tcpsock_posix.go.html#3382777">Addr</a></span><span class="op" id="6792670">(</span><span class="op" id="6792671">)</span><span class="op" id="6792672">.</span><span class="ident" id="6792673"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6792679">(</span><span class="op" id="6792680">)</span><span class="op" id="6792681">,</span>&nbsp;<span class="op" id="6792683">-</span><span class="num" id="6792684">5</span><span class="op" id="6792685">*</span><span class="ident" id="6792686"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6792690">.</span><span class="ident" id="6792691"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6792697">)</span>&nbsp;<span class="comment" id="6792699">//&nbsp;in&nbsp;the&nbsp;past</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792715">if</span>&nbsp;<span class="ident" id="6792718"><a href="/gostd/net/timeout_test.go.html#6792637">err</a></span>&nbsp;<span class="op" id="6792722">==</span>&nbsp;<span class="builtintype" id="6792725">nil</span>&nbsp;<span class="op" id="6792729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792733">defer</span>&nbsp;<span class="ident" id="6792739"><a href="/gostd/net/timeout_test.go.html#6792634">c</a></span><span class="op" id="6792740">.</span><span class="ident" id="6792741"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6792746">(</span><span class="op" id="6792747">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6792750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792753">if</span>&nbsp;<span class="op" id="6792756">!</span><span class="ident" id="6792757"><a href="/gostd/net/timeout_test.go.html#6777597">isTimeout</a></span><span class="op" id="6792766">(</span><span class="ident" id="6792767"><a href="/gostd/net/timeout_test.go.html#6792637">err</a></span><span class="op" id="6792770">)</span>&nbsp;<span class="op" id="6792772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6792776"><a href="/gostd/net/timeout_test.go.html#6792349">t</a></span><span class="op" id="6792777">.</span><span class="ident" id="6792778"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6792784">(</span><span class="string" id="6792785">&#34;DialTimeout:&nbsp;got&nbsp;%v;&nbsp;want&nbsp;timeout&#34;</span><span class="op" id="6792820">,</span>&nbsp;<span class="ident" id="6792822"><a href="/gostd/net/timeout_test.go.html#6792637">err</a></span><span class="op" id="6792825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6792828">}</span><br>
<span class="lineno"></span><span class="op" id="6792830">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="comment" id="6792833">//&nbsp;TestProlongTimeout&nbsp;tests&nbsp;concurrent&nbsp;deadline&nbsp;modification.</span><br>
<span class="lineno"></span><span class="comment" id="6792895">//&nbsp;Known&nbsp;to&nbsp;cause&nbsp;data&nbsp;races&nbsp;in&nbsp;the&nbsp;past.</span><br>
<span class="lineno"></span><span class="keyword" id="6792937">func</span>&nbsp;<span class="ident" id="6792942">TestProlongTimeout</span><span class="op" id="6792960">(</span><span class="ident" id="6792961">t</span>&nbsp;<span class="op" id="6792963">*</span><span class="ident" id="6792964"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6792971">.</span><span class="ident" id="6792972"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6792973">)</span>&nbsp;<span class="op" id="6792975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6792978">switch</span>&nbsp;<span class="ident" id="6792985"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6792992">.</span><span class="ident" id="6792993"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6792998">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793001">case</span>&nbsp;<span class="string" id="6793006">&#34;plan9&#34;</span><span class="op" id="6793013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793017"><a href="/gostd/net/timeout_test.go.html#6792961">t</a></span><span class="op" id="6793018">.</span><span class="ident" id="6793019"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6793024">(</span><span class="string" id="6793025">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6793046">,</span>&nbsp;<span class="ident" id="6793048"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6793055">.</span><span class="ident" id="6793056"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6793060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793067">ln</span>&nbsp;<span class="op" id="6793070">:=</span>&nbsp;<span class="ident" id="6793073"><a href="/gostd/net/dial_test.go.html#6621447">newLocalListener</a></span><span class="op" id="6793089">(</span><span class="ident" id="6793090"><a href="/gostd/net/timeout_test.go.html#6792961">t</a></span><span class="op" id="6793091">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793094">defer</span>&nbsp;<span class="ident" id="6793100"><a href="/gostd/net/timeout_test.go.html#6793067">ln</a></span><span class="op" id="6793102">.</span><span class="ident" id="6793103"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6793108">(</span><span class="op" id="6793109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793112">connected</span>&nbsp;<span class="op" id="6793122">:=</span>&nbsp;<span class="builtinfunc" id="6793125">make</span><span class="op" id="6793129">(</span><span class="keyword" id="6793130">chan</span>&nbsp;<span class="builtintype" id="6793135">bool</span><span class="op" id="6793139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793142">go</span>&nbsp;<span class="keyword" id="6793145">func</span><span class="op" id="6793149">(</span><span class="op" id="6793150">)</span>&nbsp;<span class="op" id="6793152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793156">s</span><span class="op" id="6793157">,</span>&nbsp;<span class="ident" id="6793159">err</span>&nbsp;<span class="op" id="6793163">:=</span>&nbsp;<span class="ident" id="6793166"><a href="/gostd/net/timeout_test.go.html#6793067">ln</a></span><span class="op" id="6793168">.</span><span class="ident" id="6793169"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6793175">(</span><span class="op" id="6793176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793180"><a href="/gostd/net/timeout_test.go.html#6793112">connected</a></span>&nbsp;<span class="op" id="6793190">&lt;-</span>&nbsp;<span class="builtintype" id="6793193">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793200">if</span>&nbsp;<span class="ident" id="6793203"><a href="/gostd/net/timeout_test.go.html#6793159">err</a></span>&nbsp;<span class="op" id="6793207">!=</span>&nbsp;<span class="builtintype" id="6793210">nil</span>&nbsp;<span class="op" id="6793214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793219"><a href="/gostd/net/timeout_test.go.html#6792961">t</a></span><span class="op" id="6793220">.</span><span class="ident" id="6793221"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6793227">(</span><span class="string" id="6793228">&#34;ln.Accept:&nbsp;%v&#34;</span><span class="op" id="6793243">,</span>&nbsp;<span class="ident" id="6793245"><a href="/gostd/net/timeout_test.go.html#6793159">err</a></span><span class="op" id="6793248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793253">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793266">defer</span>&nbsp;<span class="ident" id="6793272"><a href="/gostd/net/timeout_test.go.html#6793156">s</a></span><span class="op" id="6793273">.</span><span class="ident" id="6793274"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6793279">(</span><span class="op" id="6793280">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793284"><a href="/gostd/net/timeout_test.go.html#6793156">s</a></span><span class="op" id="6793285">.</span><span class="ident" id="6793286"><a href="/gostd/net/net.go.html#3335726">SetDeadline</a></span><span class="op" id="6793297">(</span><span class="ident" id="6793298"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6793302">.</span><span class="ident" id="6793303"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6793306">(</span><span class="op" id="6793307">)</span><span class="op" id="6793308">.</span><span class="ident" id="6793309"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6793312">(</span><span class="ident" id="6793313"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6793317">.</span><span class="ident" id="6793318"><a href="/gostd/time/time.go.html#2734941">Hour</a></span><span class="op" id="6793322">)</span><span class="op" id="6793323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793327">go</span>&nbsp;<span class="keyword" id="6793330">func</span><span class="op" id="6793334">(</span><span class="op" id="6793335">)</span>&nbsp;<span class="op" id="6793337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793342">var</span>&nbsp;<span class="ident" id="6793346">buf</span>&nbsp;<span class="op" id="6793350">[</span><span class="num" id="6793351">4096</span><span class="op" id="6793355">]</span><span class="builtintype" id="6793356">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793364">for</span>&nbsp;<span class="op" id="6793368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793374">_</span><span class="op" id="6793375">,</span>&nbsp;<span class="ident" id="6793377">err</span>&nbsp;<span class="op" id="6793381">:=</span>&nbsp;<span class="ident" id="6793384"><a href="/gostd/net/timeout_test.go.html#6793156">s</a></span><span class="op" id="6793385">.</span><span class="ident" id="6793386"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6793391">(</span><span class="ident" id="6793392"><a href="/gostd/net/timeout_test.go.html#6793346">buf</a></span><span class="op" id="6793395">[</span><span class="op" id="6793396">:</span><span class="op" id="6793397">]</span><span class="op" id="6793398">)</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793404">if</span>&nbsp;<span class="ident" id="6793407"><a href="/gostd/net/timeout_test.go.html#6793377">err</a></span>&nbsp;<span class="op" id="6793411">!=</span>&nbsp;<span class="builtintype" id="6793414">nil</span>&nbsp;<span class="op" id="6793418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793425">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793441"><a href="/gostd/net/timeout_test.go.html#6793156">s</a></span><span class="op" id="6793442">.</span><span class="ident" id="6793443"><a href="/gostd/net/net.go.html#3335726">SetDeadline</a></span><span class="op" id="6793454">(</span><span class="ident" id="6793455"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6793459">.</span><span class="ident" id="6793460"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6793463">(</span><span class="op" id="6793464">)</span><span class="op" id="6793465">.</span><span class="ident" id="6793466"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6793469">(</span><span class="ident" id="6793470"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6793474">.</span><span class="ident" id="6793475"><a href="/gostd/time/time.go.html#2734941">Hour</a></span><span class="op" id="6793479">)</span><span class="op" id="6793480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793485">}</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793489">}</span><span class="op" id="6793490">(</span><span class="op" id="6793491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793495">buf</span>&nbsp;<span class="op" id="6793499">:=</span>&nbsp;<span class="builtinfunc" id="6793502">make</span><span class="op" id="6793506">(</span><span class="op" id="6793507">[</span><span class="op" id="6793508">]</span><span class="builtintype" id="6793509">byte</span><span class="op" id="6793513">,</span>&nbsp;<span class="num" id="6793515">1</span><span class="op" id="6793516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793520">for</span>&nbsp;<span class="op" id="6793524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793529">_</span><span class="op" id="6793530">,</span>&nbsp;<span class="ident" id="6793532">err</span>&nbsp;<span class="op" id="6793536">:=</span>&nbsp;<span class="ident" id="6793539"><a href="/gostd/net/timeout_test.go.html#6793156">s</a></span><span class="op" id="6793540">.</span><span class="ident" id="6793541"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6793545">(</span><span class="ident" id="6793546"><a href="/gostd/net/timeout_test.go.html#6793495">buf</a></span><span class="op" id="6793549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793554">if</span>&nbsp;<span class="ident" id="6793557"><a href="/gostd/net/timeout_test.go.html#6793532">err</a></span>&nbsp;<span class="op" id="6793561">!=</span>&nbsp;<span class="builtintype" id="6793564">nil</span>&nbsp;<span class="op" id="6793568">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793574">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793588"><a href="/gostd/net/timeout_test.go.html#6793156">s</a></span><span class="op" id="6793589">.</span><span class="ident" id="6793590"><a href="/gostd/net/net.go.html#3335726">SetDeadline</a></span><span class="op" id="6793601">(</span><span class="ident" id="6793602"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6793606">.</span><span class="ident" id="6793607"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6793610">(</span><span class="op" id="6793611">)</span><span class="op" id="6793612">.</span><span class="ident" id="6793613"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6793616">(</span><span class="ident" id="6793617"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6793621">.</span><span class="ident" id="6793622"><a href="/gostd/time/time.go.html#2734941">Hour</a></span><span class="op" id="6793626">)</span><span class="op" id="6793627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793634">}</span><span class="op" id="6793635">(</span><span class="op" id="6793636">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793639">c</span><span class="op" id="6793640">,</span>&nbsp;<span class="ident" id="6793642">err</span>&nbsp;<span class="op" id="6793646">:=</span>&nbsp;<span class="ident" id="6793649"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6793653">(</span><span class="string" id="6793654">&#34;tcp&#34;</span><span class="op" id="6793659">,</span>&nbsp;<span class="ident" id="6793661"><a href="/gostd/net/timeout_test.go.html#6793067">ln</a></span><span class="op" id="6793663">.</span><span class="ident" id="6793664"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6793668">(</span><span class="op" id="6793669">)</span><span class="op" id="6793670">.</span><span class="ident" id="6793671"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6793677">(</span><span class="op" id="6793678">)</span><span class="op" id="6793679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793682">if</span>&nbsp;<span class="ident" id="6793685"><a href="/gostd/net/timeout_test.go.html#6793642">err</a></span>&nbsp;<span class="op" id="6793689">!=</span>&nbsp;<span class="builtintype" id="6793692">nil</span>&nbsp;<span class="op" id="6793696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793700"><a href="/gostd/net/timeout_test.go.html#6792961">t</a></span><span class="op" id="6793701">.</span><span class="ident" id="6793702"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6793708">(</span><span class="string" id="6793709">&#34;DialTCP:&nbsp;%v&#34;</span><span class="op" id="6793722">,</span>&nbsp;<span class="ident" id="6793724"><a href="/gostd/net/timeout_test.go.html#6793642">err</a></span><span class="op" id="6793727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793733">defer</span>&nbsp;<span class="ident" id="6793739"><a href="/gostd/net/timeout_test.go.html#6793639">c</a></span><span class="op" id="6793740">.</span><span class="ident" id="6793741"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6793746">(</span><span class="op" id="6793747">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793750">&lt;-</span><span class="ident" id="6793752"><a href="/gostd/net/timeout_test.go.html#6793112">connected</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793763">for</span>&nbsp;<span class="ident" id="6793767">i</span>&nbsp;<span class="op" id="6793769">:=</span>&nbsp;<span class="num" id="6793772">0</span><span class="op" id="6793773">;</span>&nbsp;<span class="ident" id="6793775"><a href="/gostd/net/timeout_test.go.html#6793767">i</a></span>&nbsp;<span class="op" id="6793777">&lt;</span>&nbsp;<span class="num" id="6793779">1024</span><span class="op" id="6793783">;</span>&nbsp;<span class="ident" id="6793785"><a href="/gostd/net/timeout_test.go.html#6793767">i</a></span><span class="op" id="6793786">++</span>&nbsp;<span class="op" id="6793789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793793">var</span>&nbsp;<span class="ident" id="6793797">buf</span>&nbsp;<span class="op" id="6793801">[</span><span class="num" id="6793802">1</span><span class="op" id="6793803">]</span><span class="builtintype" id="6793804">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793811"><a href="/gostd/net/timeout_test.go.html#6793639">c</a></span><span class="op" id="6793812">.</span><span class="ident" id="6793813"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6793818">(</span><span class="ident" id="6793819"><a href="/gostd/net/timeout_test.go.html#6793797">buf</a></span><span class="op" id="6793822">[</span><span class="op" id="6793823">:</span><span class="op" id="6793824">]</span><span class="op" id="6793825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793828">}</span><br>
<span class="lineno">710</span><span class="op" id="6793830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6793833">func</span>&nbsp;<span class="ident" id="6793838">TestDeadlineRace</span><span class="op" id="6793854">(</span><span class="ident" id="6793855">t</span>&nbsp;<span class="op" id="6793857">*</span><span class="ident" id="6793858"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6793865">.</span><span class="ident" id="6793866"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6793867">)</span>&nbsp;<span class="op" id="6793869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793872">switch</span>&nbsp;<span class="ident" id="6793879"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6793886">.</span><span class="ident" id="6793887"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6793892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793895">case</span>&nbsp;<span class="string" id="6793900">&#34;nacl&#34;</span><span class="op" id="6793906">,</span>&nbsp;<span class="string" id="6793908">&#34;plan9&#34;</span><span class="op" id="6793915">:</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793919"><a href="/gostd/net/timeout_test.go.html#6793855">t</a></span><span class="op" id="6793920">.</span><span class="ident" id="6793921"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6793926">(</span><span class="string" id="6793927">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6793948">,</span>&nbsp;<span class="ident" id="6793950"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6793957">.</span><span class="ident" id="6793958"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6793962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6793965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6793969">N</span>&nbsp;<span class="op" id="6793971">:=</span>&nbsp;<span class="num" id="6793974">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6793980">if</span>&nbsp;<span class="ident" id="6793983"><a href="/gostd/net/timeout_test.go.html#6777571">testing</a></span><span class="op" id="6793990">.</span><span class="ident" id="6793991"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6793996">(</span><span class="op" id="6793997">)</span>&nbsp;<span class="op" id="6793999">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6794003"><a href="/gostd/net/timeout_test.go.html#6793969">N</a></span>&nbsp;<span class="op" id="6794005">=</span>&nbsp;<span class="num" id="6794007">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6794011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6794014">defer</span>&nbsp;<span class="ident" id="6794020"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6794027">.</span><span class="ident" id="6794028"><a href="/gostd/runtime/debug.go.html#1521359">GOMAXPROCS</a></span><span class="op" id="6794038">(</span><span class="ident" id="6794039"><a href="/gostd/net/timeout_test.go.html#6777560">runtime</a></span><span class="op" id="6794046">.</span><span class="ident" id="6794047"><a href="/gostd/runtime/debug.go.html#1521359">GOMAXPROCS</a></span><span class="op" id="6794057">(</span><span class="num" id="6794058">4</span><span class="op" id="6794059">)</span><span class="op" id="6794060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6794063">ln</span>&nbsp;<span class="op" id="6794066">:=</span>&nbsp;<span class="ident" id="6794069"><a href="/gostd/net/dial_test.go.html#6621447">newLocalListener</a></span><span class="op" id="6794085">(</span><span class="ident" id="6794086"><a href="/gostd/net/timeout_test.go.html#6793855">t</a></span><span class="op" id="6794087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6794090">defer</span>&nbsp;<span class="ident" id="6794096"><a href="/gostd/net/timeout_test.go.html#6794063">ln</a></span><span class="op" id="6794098">.</span><span class="ident" id="6794099"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6794104">(</span><span class="op" id="6794105">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6794108">c</span><span class="op" id="6794109">,</span>&nbsp;<span class="ident" id="6794111">err</span>&nbsp;<span class="op" id="6794115">:=</span>&nbsp;<span class="ident" id="6794118"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6794122">(</span><span class="string" id="6794123">&#34;tcp&#34;</span><span class="op" id="6794128">,</span>&nbsp;<span class="ident" id="6794130"><a href="/gostd/net/timeout_test.go.html#6794063">ln</a></span><span class="op" id="6794132">.</span><span class="ident" id="6794133"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6794137">(</span><span class="op" id="6794138">)</span><span class="op" id="6794139">.</span><span class="ident" id="6794140"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6794146">(</span><span class="op" id="6794147">)</span><span class="op" id="6794148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6794151">if</span>&nbsp;<span class="ident" id="6794154"><a href="/gostd/net/timeout_test.go.html#6794111">err</a></span>&nbsp;<span class="op" id="6794158">!=</span>&nbsp;<span class="builtintype" id="6794161">nil</span>&nbsp;<span class="op" id="6794165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6794169"><a href="/gostd/net/timeout_test.go.html#6793855">t</a></span><span class="op" id="6794170">.</span><span class="ident" id="6794171"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6794177">(</span><span class="string" id="6794178">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="6794188">,</span>&nbsp;<span class="ident" id="6794190"><a href="/gostd/net/timeout_test.go.html#6794111">err</a></span><span class="op" id="6794193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6794196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6794199">defer</span>&nbsp;<span class="ident" id="6794205"><a href="/gostd/net/timeout_test.go.html#6794108">c</a></span><span class="op" id="6794206">.</span><span class="ident" id="6794207"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6794212">(</span><span class="op" id="6794213">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6794216">done</span>&nbsp;<span class="op" id="6794221">:=</span>&nbsp;<span class="builtinfunc" id="6794224">make</span><span class="op" id="6794228">(</span><span class="keyword" id="6794229">chan</span>&nbsp;<span class="builtintype" id="6794234">bool</span><span class="op" id="6794238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6794241">go</span>&nbsp;<span class="keyword" id="6794244">func</span><span class="op" id="6794248">(</span><span class="op" id="6794249">)</span>&nbsp;<span class="op" id="6794251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6794255">t</span>&nbsp;<span class="op" id="6794257">:=</span>&nbsp;<span class="ident" id="6794260"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6794264">.</span><span class="ident" id="6794265"><a href="/gostd/time/tick.go.html#2719323">NewTicker</a></span><span class="op" id="6794274">(</span><span class="num" id="6794275">2</span>&nbsp;<span class="op" id="6794277">*</span>&nbsp;<span class="ident" id="6794279"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6794283">.</span><span class="ident" id="6794284"><a href="/gostd/time/time.go.html#2734777">Microsecond</a></span><span class="op" id="6794295">)</span><span class="op" id="6794296">.</span><span class="ident" id="6794297"><a href="/gostd/time/tick.go.html#2718903">C</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6794301">for</span>&nbsp;<span class="ident" id="6794305">i</span>&nbsp;<span class="op" id="6794307">:=</span>&nbsp;<span class="num" id="6794310">0</span><span class="op" id="6794311">;</span>&nbsp;<span class="ident" id="6794313"><a href="/gostd/net/timeout_test.go.html#6794305">i</a></span>&nbsp;<span class="op" id="6794315">&lt;</span>&nbsp;<span class="ident" id="6794317"><a href="/gostd/net/timeout_test.go.html#6793969">N</a></span><span class="op" id="6794318">;</span>&nbsp;<span class="ident" id="6794320"><a href="/gostd/net/timeout_test.go.html#6794305">i</a></span><span class="op" id="6794321">++</span>&nbsp;<span class="op" id="6794324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6794329">if</span>&nbsp;<span class="ident" id="6794332">err</span>&nbsp;<span class="op" id="6794336">:=</span>&nbsp;<span class="ident" id="6794339"><a href="/gostd/net/timeout_test.go.html#6794108">c</a></span><span class="op" id="6794340">.</span><span class="ident" id="6794341"><a href="/gostd/net/net.go.html#3335726">SetDeadline</a></span><span class="op" id="6794352">(</span><span class="ident" id="6794353"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6794357">.</span><span class="ident" id="6794358"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6794361">(</span><span class="op" id="6794362">)</span><span class="op" id="6794363">.</span><span class="ident" id="6794364"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6794367">(</span><span class="num" id="6794368">2</span>&nbsp;<span class="op" id="6794370">*</span>&nbsp;<span class="ident" id="6794372"><a href="/gostd/net/timeout_test.go.html#6777582">time</a></span><span class="op" id="6794376">.</span><span class="ident" id="6794377"><a href="/gostd/time/time.go.html#2734777">Microsecond</a></span><span class="op" id="6794388">)</span><span class="op" id="6794389">)</span><span class="op" id="6794390">;</span>&nbsp;<span class="ident" id="6794392"><a href="/gostd/net/timeout_test.go.html#6794332">err</a></span>&nbsp;<span class="op" id="6794396">!=</span>&nbsp;<span class="builtintype" id="6794399">nil</span>&nbsp;<span class="op" id="6794403">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6794409">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6794418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6794423">&lt;-</span><span class="ident" id="6794425"><a href="/gostd/net/timeout_test.go.html#6794255">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6794429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6794433"><a href="/gostd/net/timeout_test.go.html#6794216">done</a></span>&nbsp;<span class="op" id="6794438">&lt;-</span>&nbsp;<span class="builtintype" id="6794441">true</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6794447">}</span><span class="op" id="6794448">(</span><span class="op" id="6794449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6794452">var</span>&nbsp;<span class="ident" id="6794456">buf</span>&nbsp;<span class="op" id="6794460">[</span><span class="num" id="6794461">1</span><span class="op" id="6794462">]</span><span class="builtintype" id="6794463">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6794469">for</span>&nbsp;<span class="ident" id="6794473">i</span>&nbsp;<span class="op" id="6794475">:=</span>&nbsp;<span class="num" id="6794478">0</span><span class="op" id="6794479">;</span>&nbsp;<span class="ident" id="6794481"><a href="/gostd/net/timeout_test.go.html#6794473">i</a></span>&nbsp;<span class="op" id="6794483">&lt;</span>&nbsp;<span class="ident" id="6794485"><a href="/gostd/net/timeout_test.go.html#6793969">N</a></span><span class="op" id="6794486">;</span>&nbsp;<span class="ident" id="6794488"><a href="/gostd/net/timeout_test.go.html#6794473">i</a></span><span class="op" id="6794489">++</span>&nbsp;<span class="op" id="6794492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6794496"><a href="/gostd/net/timeout_test.go.html#6794108">c</a></span><span class="op" id="6794497">.</span><span class="ident" id="6794498"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6794502">(</span><span class="ident" id="6794503"><a href="/gostd/net/timeout_test.go.html#6794456">buf</a></span><span class="op" id="6794506">[</span><span class="op" id="6794507">:</span><span class="op" id="6794508">]</span><span class="op" id="6794509">)</span>&nbsp;<span class="comment" id="6794511">//&nbsp;ignore&nbsp;possible&nbsp;timeout&nbsp;errors</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6794546">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6794549"><a href="/gostd/net/timeout_test.go.html#6794108">c</a></span><span class="op" id="6794550">.</span><span class="ident" id="6794551"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6794556">(</span><span class="op" id="6794557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6794560">&lt;-</span><span class="ident" id="6794562"><a href="/gostd/net/timeout_test.go.html#6794216">done</a></span><br>
<span class="lineno"></span><span class="op" id="6794567">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
