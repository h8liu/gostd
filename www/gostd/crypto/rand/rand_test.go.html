<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/rand</h2>
<ul>
<li><a href="/gostd/crypto/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/crypto/rand/rand_linux.go.html">rand_linux.go</a></li>
<li><a href="/gostd/crypto/rand/rand_test.go.html">rand_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand_unix.go.html">rand_unix.go</a></li>
<li><a href="/gostd/crypto/rand/util.go.html">util.go</a></li>
<li><a href="/gostd/crypto/rand/util_test.go.html">util_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7893608">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7893664">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7893718">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7893769">package</span>&nbsp;<span class="ident" id="7893777">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7893783">import</span>&nbsp;<span class="op" id="7893790">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893793">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893802">&#34;compress/flate&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893820">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7893826">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7893836">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7893839">func</span>&nbsp;<span class="ident" id="7893844">TestRead</span><span class="op" id="7893852">(</span><span class="ident" id="7893853">t</span>&nbsp;<span class="op" id="7893855">*</span><span class="ident" id="7893856">testing</span><span class="op" id="7893863">.</span><span class="ident" id="7893864">T</span><span class="op" id="7893865">)</span>&nbsp;<span class="op" id="7893867">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7893870">var</span>&nbsp;<span class="ident" id="7893874">n</span>&nbsp;<span class="builtintype" id="7893876">int</span>&nbsp;<span class="op" id="7893880">=</span>&nbsp;<span class="num" id="7893882">4e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7893887">if</span>&nbsp;<span class="ident" id="7893890">testing</span><span class="op" id="7893897">.</span><span class="ident" id="7893898">Short</span><span class="op" id="7893903">(</span><span class="op" id="7893904">)</span>&nbsp;<span class="op" id="7893906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893910">n</span>&nbsp;<span class="op" id="7893912">=</span>&nbsp;<span class="num" id="7893914">1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893922">b</span>&nbsp;<span class="op" id="7893924">:=</span>&nbsp;<span class="builtinfunc" id="7893927">make</span><span class="op" id="7893931">(</span><span class="op" id="7893932">[</span><span class="op" id="7893933">]</span><span class="builtintype" id="7893934">byte</span><span class="op" id="7893938">,</span>&nbsp;<span class="ident" id="7893940">n</span><span class="op" id="7893941">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893944">n</span><span class="op" id="7893945">,</span>&nbsp;<span class="ident" id="7893947">err</span>&nbsp;<span class="op" id="7893951">:=</span>&nbsp;<span class="ident" id="7893954">io</span><span class="op" id="7893956">.</span><span class="ident" id="7893957">ReadFull</span><span class="op" id="7893965">(</span><span class="ident" id="7893966">Reader</span><span class="op" id="7893972">,</span>&nbsp;<span class="ident" id="7893974">b</span><span class="op" id="7893975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7893978">if</span>&nbsp;<span class="ident" id="7893981">n</span>&nbsp;<span class="op" id="7893983">!=</span>&nbsp;<span class="builtinfunc" id="7893986">len</span><span class="op" id="7893989">(</span><span class="ident" id="7893990">b</span><span class="op" id="7893991">)</span>&nbsp;<span class="op" id="7893993">||</span>&nbsp;<span class="ident" id="7893996">err</span>&nbsp;<span class="op" id="7894000">!=</span>&nbsp;<span class="ident" id="7894003">nil</span>&nbsp;<span class="op" id="7894007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894011">t</span><span class="op" id="7894012">.</span><span class="ident" id="7894013">Fatalf</span><span class="op" id="7894019">(</span><span class="string" id="7894020">&#34;ReadFull(buf)&nbsp;=&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7894044">,</span>&nbsp;<span class="ident" id="7894046">n</span><span class="op" id="7894047">,</span>&nbsp;<span class="ident" id="7894049">err</span><span class="op" id="7894052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7894059">var</span>&nbsp;<span class="ident" id="7894063">z</span>&nbsp;<span class="ident" id="7894065">bytes</span><span class="op" id="7894070">.</span><span class="ident" id="7894071">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894079">f</span><span class="op" id="7894080">,</span>&nbsp;<span class="ident" id="7894082">_</span>&nbsp;<span class="op" id="7894084">:=</span>&nbsp;<span class="ident" id="7894087">flate</span><span class="op" id="7894092">.</span><span class="ident" id="7894093">NewWriter</span><span class="op" id="7894102">(</span><span class="op" id="7894103">&amp;</span><span class="ident" id="7894104">z</span><span class="op" id="7894105">,</span>&nbsp;<span class="num" id="7894107">5</span><span class="op" id="7894108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894111">f</span><span class="op" id="7894112">.</span><span class="ident" id="7894113">Write</span><span class="op" id="7894118">(</span><span class="ident" id="7894119">b</span><span class="op" id="7894120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894123">f</span><span class="op" id="7894124">.</span><span class="ident" id="7894125">Close</span><span class="op" id="7894130">(</span><span class="op" id="7894131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7894134">if</span>&nbsp;<span class="ident" id="7894137">z</span><span class="op" id="7894138">.</span><span class="ident" id="7894139">Len</span><span class="op" id="7894142">(</span><span class="op" id="7894143">)</span>&nbsp;<span class="op" id="7894145">&lt;</span>&nbsp;<span class="builtinfunc" id="7894147">len</span><span class="op" id="7894150">(</span><span class="ident" id="7894151">b</span><span class="op" id="7894152">)</span><span class="op" id="7894153">*</span><span class="num" id="7894154">99</span><span class="op" id="7894156">/</span><span class="num" id="7894157">100</span>&nbsp;<span class="op" id="7894161">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894165">t</span><span class="op" id="7894166">.</span><span class="ident" id="7894167">Fatalf</span><span class="op" id="7894173">(</span><span class="string" id="7894174">&#34;Compressed&nbsp;%d&nbsp;-&gt;&nbsp;%d&#34;</span><span class="op" id="7894195">,</span>&nbsp;<span class="builtinfunc" id="7894197">len</span><span class="op" id="7894200">(</span><span class="ident" id="7894201">b</span><span class="op" id="7894202">)</span><span class="op" id="7894203">,</span>&nbsp;<span class="ident" id="7894205">z</span><span class="op" id="7894206">.</span><span class="ident" id="7894207">Len</span><span class="op" id="7894210">(</span><span class="op" id="7894211">)</span><span class="op" id="7894212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894215">}</span><br>
<span class="lineno"></span><span class="op" id="7894217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7894220">func</span>&nbsp;<span class="ident" id="7894225">TestReadEmpty</span><span class="op" id="7894238">(</span><span class="ident" id="7894239">t</span>&nbsp;<span class="op" id="7894241">*</span><span class="ident" id="7894242">testing</span><span class="op" id="7894249">.</span><span class="ident" id="7894250">T</span><span class="op" id="7894251">)</span>&nbsp;<span class="op" id="7894253">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894256">n</span><span class="op" id="7894257">,</span>&nbsp;<span class="ident" id="7894259">err</span>&nbsp;<span class="op" id="7894263">:=</span>&nbsp;<span class="ident" id="7894266">Reader</span><span class="op" id="7894272">.</span><span class="ident" id="7894273">Read</span><span class="op" id="7894277">(</span><span class="builtinfunc" id="7894278">make</span><span class="op" id="7894282">(</span><span class="op" id="7894283">[</span><span class="op" id="7894284">]</span><span class="builtintype" id="7894285">byte</span><span class="op" id="7894289">,</span>&nbsp;<span class="num" id="7894291">0</span><span class="op" id="7894292">)</span><span class="op" id="7894293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7894296">if</span>&nbsp;<span class="ident" id="7894299">n</span>&nbsp;<span class="op" id="7894301">!=</span>&nbsp;<span class="num" id="7894304">0</span>&nbsp;<span class="op" id="7894306">||</span>&nbsp;<span class="ident" id="7894309">err</span>&nbsp;<span class="op" id="7894313">!=</span>&nbsp;<span class="ident" id="7894316">nil</span>&nbsp;<span class="op" id="7894320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894324">t</span><span class="op" id="7894325">.</span><span class="ident" id="7894326">Fatalf</span><span class="op" id="7894332">(</span><span class="string" id="7894333">&#34;Read(make([]byte,&nbsp;0))&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7894365">,</span>&nbsp;<span class="ident" id="7894367">n</span><span class="op" id="7894368">,</span>&nbsp;<span class="ident" id="7894370">err</span><span class="op" id="7894373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894379">n</span><span class="op" id="7894380">,</span>&nbsp;<span class="ident" id="7894382">err</span>&nbsp;<span class="op" id="7894386">=</span>&nbsp;<span class="ident" id="7894388">Reader</span><span class="op" id="7894394">.</span><span class="ident" id="7894395">Read</span><span class="op" id="7894399">(</span><span class="ident" id="7894400">nil</span><span class="op" id="7894403">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7894406">if</span>&nbsp;<span class="ident" id="7894409">n</span>&nbsp;<span class="op" id="7894411">!=</span>&nbsp;<span class="num" id="7894414">0</span>&nbsp;<span class="op" id="7894416">||</span>&nbsp;<span class="ident" id="7894419">err</span>&nbsp;<span class="op" id="7894423">!=</span>&nbsp;<span class="ident" id="7894426">nil</span>&nbsp;<span class="op" id="7894430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894434">t</span><span class="op" id="7894435">.</span><span class="ident" id="7894436">Fatalf</span><span class="op" id="7894442">(</span><span class="string" id="7894443">&#34;Read(nil)&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7894463">,</span>&nbsp;<span class="ident" id="7894465">n</span><span class="op" id="7894466">,</span>&nbsp;<span class="ident" id="7894468">err</span><span class="op" id="7894471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894474">}</span><br>
<span class="lineno"></span><span class="op" id="7894476">}</span>
</div>
</body>
</html>
