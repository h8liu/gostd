<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/httputil</h2>
<ul>
<li><a href="/gostd/net/http/httputil/dump.go.html">dump.go</a></li>
<li><a href="/gostd/net/http/httputil/dump_test.go.html" class="current">dump_test.go</a></li>
<li><a href="/gostd/net/http/httputil/httputil.go.html">httputil.go</a></li>
<li><a href="/gostd/net/http/httputil/persist.go.html">persist.go</a></li>
<li><a href="/gostd/net/http/httputil/reverseproxy.go.html">reverseproxy.go</a></li>
<li><a href="/gostd/net/http/httputil/reverseproxy_test.go.html">reverseproxy_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7732355">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7732410">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7732464">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7732515">package</span>&nbsp;<span class="ident" id="7732523">httputil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7732533">import</span>&nbsp;<span class="op" id="7732540">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7732543">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7732552">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7732559">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7732565">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7732578">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7732590">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7732601">&#34;runtime&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7732612">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7732623">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7732633">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7732636">type</span>&nbsp;<span class="ident" id="7732641">dumpTest</span>&nbsp;<span class="keyword" id="7732650">struct</span>&nbsp;<span class="op" id="7732657">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732660">Req</span>&nbsp;&nbsp;<span class="ident" id="7732665">http</span><span class="op" id="7732669">.</span><span class="ident" id="7732670">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732679">Body</span>&nbsp;<span class="keyword" id="7732684">interface</span><span class="op" id="7732693">{</span><span class="op" id="7732694">}</span>&nbsp;<span class="comment" id="7732696">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732762">WantDump</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7732774">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732782">WantDumpOut</span>&nbsp;<span class="builtintype" id="7732794">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732802">NoBody</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7732814">bool</span>&nbsp;<span class="comment" id="7732819">//&nbsp;if&nbsp;true,&nbsp;set&nbsp;DumpRequest{,Out}&nbsp;body&nbsp;to&nbsp;false</span><br>
<span class="lineno"></span><span class="op" id="7732867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7732870">var</span>&nbsp;<span class="ident" id="7732874">dumpTests</span>&nbsp;<span class="op" id="7732884">=</span>&nbsp;<span class="op" id="7732886">[</span><span class="op" id="7732887">]</span><span class="ident" id="7732888">dumpTest</span><span class="op" id="7732896">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7732900">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732956">Req</span><span class="op" id="7732959">:</span>&nbsp;<span class="ident" id="7732961">http</span><span class="op" id="7732965">.</span><span class="ident" id="7732966">Request</span><span class="op" id="7732973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732978">Method</span><span class="op" id="7732984">:</span>&nbsp;<span class="string" id="7732986">&#34;GET&#34;</span><span class="op" id="7732991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732996">URL</span><span class="op" id="7732999">:</span>&nbsp;<span class="op" id="7733001">&amp;</span><span class="ident" id="7733002">url</span><span class="op" id="7733005">.</span><span class="ident" id="7733006">URL</span><span class="op" id="7733009">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733015">Scheme</span><span class="op" id="7733021">:</span>&nbsp;<span class="string" id="7733023">&#34;http&#34;</span><span class="op" id="7733029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733035">Host</span><span class="op" id="7733039">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7733043">&#34;www.google.com&#34;</span><span class="op" id="7733059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733065">Path</span><span class="op" id="7733069">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7733073">&#34;/search&#34;</span><span class="op" id="7733082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733087">}</span><span class="op" id="7733088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733093">ProtoMajor</span><span class="op" id="7733103">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7733111">1</span><span class="op" id="7733112">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733117">ProtoMinor</span><span class="op" id="7733127">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7733135">1</span><span class="op" id="7733136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733141">TransferEncoding</span><span class="op" id="7733157">:</span>&nbsp;<span class="op" id="7733159">[</span><span class="op" id="7733160">]</span><span class="builtintype" id="7733161">string</span><span class="op" id="7733167">{</span><span class="string" id="7733168">&#34;chunked&#34;</span><span class="op" id="7733177">}</span><span class="op" id="7733178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733182">}</span><span class="op" id="7733183">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733188">Body</span><span class="op" id="7733192">:</span>&nbsp;<span class="op" id="7733194">[</span><span class="op" id="7733195">]</span><span class="builtintype" id="7733196">byte</span><span class="op" id="7733200">(</span><span class="string" id="7733201">&#34;abcdef&#34;</span><span class="op" id="7733209">)</span><span class="op" id="7733210">,</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733215">WantDump</span><span class="op" id="7733223">:</span>&nbsp;<span class="string" id="7733225">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7733252">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733257">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7733284">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733289">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7733326">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733331">chunk</span><span class="op" id="7733336">(</span><span class="string" id="7733337">&#34;abcdef&#34;</span><span class="op" id="7733345">)</span>&nbsp;<span class="op" id="7733347">+</span>&nbsp;<span class="ident" id="7733349">chunk</span><span class="op" id="7733354">(</span><span class="string" id="7733355">&#34;&#34;</span><span class="op" id="7733357">)</span><span class="op" id="7733358">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733361">}</span><span class="op" id="7733362">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7733366">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7733449">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733483">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733487">Req</span><span class="op" id="7733490">:</span>&nbsp;<span class="ident" id="7733492">http</span><span class="op" id="7733496">.</span><span class="ident" id="7733497">Request</span><span class="op" id="7733504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733509">Method</span><span class="op" id="7733515">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733521">&#34;GET&#34;</span><span class="op" id="7733526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733531">URL</span><span class="op" id="7733534">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733543">mustParseURL</span><span class="op" id="7733555">(</span><span class="string" id="7733556">&#34;/foo&#34;</span><span class="op" id="7733562">)</span><span class="op" id="7733563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733568">ProtoMajor</span><span class="op" id="7733578">:</span>&nbsp;<span class="num" id="7733580">1</span><span class="op" id="7733581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733586">ProtoMinor</span><span class="op" id="7733596">:</span>&nbsp;<span class="num" id="7733598">0</span><span class="op" id="7733599">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733604">Header</span><span class="op" id="7733610">:</span>&nbsp;<span class="ident" id="7733612">http</span><span class="op" id="7733616">.</span><span class="ident" id="7733617">Header</span><span class="op" id="7733623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733629">&#34;X-Foo&#34;</span><span class="op" id="7733636">:</span>&nbsp;<span class="op" id="7733638">[</span><span class="op" id="7733639">]</span><span class="builtintype" id="7733640">string</span><span class="op" id="7733646">{</span><span class="string" id="7733647">&#34;X-Bar&#34;</span><span class="op" id="7733654">}</span><span class="op" id="7733655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733660">}</span><span class="op" id="7733661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733665">}</span><span class="op" id="7733666">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733671">WantDump</span><span class="op" id="7733679">:</span>&nbsp;<span class="string" id="7733681">&#34;GET&nbsp;/foo&nbsp;HTTP/1.0\r\n&#34;</span>&nbsp;<span class="op" id="7733705">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733710">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="7733732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733735">}</span><span class="op" id="7733736">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733740">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733744">Req</span><span class="op" id="7733747">:</span>&nbsp;<span class="op" id="7733749">*</span><span class="ident" id="7733750">mustNewRequest</span><span class="op" id="7733764">(</span><span class="string" id="7733765">&#34;GET&#34;</span><span class="op" id="7733770">,</span>&nbsp;<span class="string" id="7733772">&#34;http://example.com/foo&#34;</span><span class="op" id="7733796">,</span>&nbsp;<span class="ident" id="7733798">nil</span><span class="op" id="7733801">)</span><span class="op" id="7733802">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733807">WantDumpOut</span><span class="op" id="7733818">:</span>&nbsp;<span class="string" id="7733820">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7733844">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733849">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7733873">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733878">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7733916">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733921">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7733952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733955">}</span><span class="op" id="7733956">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7733960">//&nbsp;Test&nbsp;that&nbsp;an&nbsp;https&nbsp;URL&nbsp;doesn&#39;t&nbsp;try&nbsp;to&nbsp;do&nbsp;an&nbsp;SSL&nbsp;negotiation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7734024">//&nbsp;with&nbsp;a&nbsp;bytes.Buffer&nbsp;and&nbsp;hang&nbsp;with&nbsp;all&nbsp;goroutines&nbsp;not</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7734081">//&nbsp;runnable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734099">Req</span><span class="op" id="7734102">:</span>&nbsp;<span class="op" id="7734104">*</span><span class="ident" id="7734105">mustNewRequest</span><span class="op" id="7734119">(</span><span class="string" id="7734120">&#34;GET&#34;</span><span class="op" id="7734125">,</span>&nbsp;<span class="string" id="7734127">&#34;https://example.com/foo&#34;</span><span class="op" id="7734152">,</span>&nbsp;<span class="ident" id="7734154">nil</span><span class="op" id="7734157">)</span><span class="op" id="7734158">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734163">WantDumpOut</span><span class="op" id="7734174">:</span>&nbsp;<span class="string" id="7734176">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7734200">+</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734205">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7734229">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734234">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7734272">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734277">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7734308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734311">}</span><span class="op" id="7734312">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7734316">//&nbsp;Request&nbsp;with&nbsp;Body,&nbsp;but&nbsp;Dump&nbsp;requested&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734374">Req</span><span class="op" id="7734377">:</span>&nbsp;<span class="ident" id="7734379">http</span><span class="op" id="7734383">.</span><span class="ident" id="7734384">Request</span><span class="op" id="7734391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734396">Method</span><span class="op" id="7734402">:</span>&nbsp;<span class="string" id="7734404">&#34;POST&#34;</span><span class="op" id="7734410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734415">URL</span><span class="op" id="7734418">:</span>&nbsp;<span class="op" id="7734420">&amp;</span><span class="ident" id="7734421">url</span><span class="op" id="7734424">.</span><span class="ident" id="7734425">URL</span><span class="op" id="7734428">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734434">Scheme</span><span class="op" id="7734440">:</span>&nbsp;<span class="string" id="7734442">&#34;http&#34;</span><span class="op" id="7734448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734454">Host</span><span class="op" id="7734458">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7734462">&#34;post.tld&#34;</span><span class="op" id="7734472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734478">Path</span><span class="op" id="7734482">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7734486">&#34;/&#34;</span><span class="op" id="7734489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734494">}</span><span class="op" id="7734495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734500">ContentLength</span><span class="op" id="7734513">:</span>&nbsp;<span class="num" id="7734515">6</span><span class="op" id="7734516">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734521">ProtoMajor</span><span class="op" id="7734531">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7734536">1</span><span class="op" id="7734537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734542">ProtoMinor</span><span class="op" id="7734552">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7734557">1</span><span class="op" id="7734558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734562">}</span><span class="op" id="7734563">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734568">Body</span><span class="op" id="7734572">:</span>&nbsp;<span class="op" id="7734574">[</span><span class="op" id="7734575">]</span><span class="builtintype" id="7734576">byte</span><span class="op" id="7734580">(</span><span class="string" id="7734581">&#34;abcdef&#34;</span><span class="op" id="7734589">)</span><span class="op" id="7734590">,</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734595">WantDumpOut</span><span class="op" id="7734606">:</span>&nbsp;<span class="string" id="7734608">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7734630">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734635">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7734656">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734661">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7734699">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734704">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7734728">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734733">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7734764">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734769">NoBody</span><span class="op" id="7734775">:</span>&nbsp;<span class="builtintype" id="7734777">true</span><span class="op" id="7734781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734784">}</span><span class="op" id="7734785">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7734789">//&nbsp;Request&nbsp;with&nbsp;Body&nbsp;&gt;&nbsp;8196&nbsp;(default&nbsp;buffer&nbsp;size)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734844">Req</span><span class="op" id="7734847">:</span>&nbsp;<span class="ident" id="7734849">http</span><span class="op" id="7734853">.</span><span class="ident" id="7734854">Request</span><span class="op" id="7734861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734866">Method</span><span class="op" id="7734872">:</span>&nbsp;<span class="string" id="7734874">&#34;POST&#34;</span><span class="op" id="7734880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734885">URL</span><span class="op" id="7734888">:</span>&nbsp;<span class="op" id="7734890">&amp;</span><span class="ident" id="7734891">url</span><span class="op" id="7734894">.</span><span class="ident" id="7734895">URL</span><span class="op" id="7734898">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734904">Scheme</span><span class="op" id="7734910">:</span>&nbsp;<span class="string" id="7734912">&#34;http&#34;</span><span class="op" id="7734918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734924">Host</span><span class="op" id="7734928">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7734932">&#34;post.tld&#34;</span><span class="op" id="7734942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734948">Path</span><span class="op" id="7734952">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7734956">&#34;/&#34;</span><span class="op" id="7734959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734964">}</span><span class="op" id="7734965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734970">ContentLength</span><span class="op" id="7734983">:</span>&nbsp;<span class="num" id="7734985">8193</span><span class="op" id="7734989">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734994">ProtoMajor</span><span class="op" id="7735004">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7735009">1</span><span class="op" id="7735010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735015">ProtoMinor</span><span class="op" id="7735025">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7735030">1</span><span class="op" id="7735031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735035">}</span><span class="op" id="7735036">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735041">Body</span><span class="op" id="7735045">:</span>&nbsp;<span class="ident" id="7735047">bytes</span><span class="op" id="7735052">.</span><span class="ident" id="7735053">Repeat</span><span class="op" id="7735059">(</span><span class="op" id="7735060">[</span><span class="op" id="7735061">]</span><span class="builtintype" id="7735062">byte</span><span class="op" id="7735066">(</span><span class="string" id="7735067">&#34;a&#34;</span><span class="op" id="7735070">)</span><span class="op" id="7735071">,</span>&nbsp;<span class="num" id="7735073">8193</span><span class="op" id="7735077">)</span><span class="op" id="7735078">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735083">WantDumpOut</span><span class="op" id="7735094">:</span>&nbsp;<span class="string" id="7735096">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7735118">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7735123">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7735144">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7735149">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7735187">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7735192">&#34;Content-Length:&nbsp;8193\r\n&#34;</span>&nbsp;<span class="op" id="7735219">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7735224">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7735256">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735261">strings</span><span class="op" id="7735268">.</span><span class="ident" id="7735269">Repeat</span><span class="op" id="7735275">(</span><span class="string" id="7735276">&#34;a&#34;</span><span class="op" id="7735279">,</span>&nbsp;<span class="num" id="7735281">8193</span><span class="op" id="7735285">)</span><span class="op" id="7735286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735289">}</span><span class="op" id="7735290">,</span><br>
<span class="lineno"></span><span class="op" id="7735292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7735295">func</span>&nbsp;<span class="ident" id="7735300">TestDumpRequest</span><span class="op" id="7735315">(</span><span class="ident" id="7735316">t</span>&nbsp;<span class="op" id="7735318">*</span><span class="ident" id="7735319">testing</span><span class="op" id="7735326">.</span><span class="ident" id="7735327">T</span><span class="op" id="7735328">)</span>&nbsp;<span class="op" id="7735330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735333">numg0</span>&nbsp;<span class="op" id="7735339">:=</span>&nbsp;<span class="ident" id="7735342">runtime</span><span class="op" id="7735349">.</span><span class="ident" id="7735350">NumGoroutine</span><span class="op" id="7735362">(</span><span class="op" id="7735363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735366">for</span>&nbsp;<span class="ident" id="7735370">i</span><span class="op" id="7735371">,</span>&nbsp;<span class="ident" id="7735373">tt</span>&nbsp;<span class="op" id="7735376">:=</span>&nbsp;<span class="keyword" id="7735379">range</span>&nbsp;<span class="ident" id="7735385">dumpTests</span>&nbsp;<span class="op" id="7735395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735399">setBody</span>&nbsp;<span class="op" id="7735407">:=</span>&nbsp;<span class="keyword" id="7735410">func</span><span class="op" id="7735414">(</span><span class="op" id="7735415">)</span>&nbsp;<span class="op" id="7735417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735422">if</span>&nbsp;<span class="ident" id="7735425">tt</span><span class="op" id="7735427">.</span><span class="ident" id="7735428">Body</span>&nbsp;<span class="op" id="7735433">==</span>&nbsp;<span class="ident" id="7735436">nil</span>&nbsp;<span class="op" id="7735440">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735446">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735461">switch</span>&nbsp;<span class="ident" id="7735468">b</span>&nbsp;<span class="op" id="7735470">:=</span>&nbsp;<span class="ident" id="7735473">tt</span><span class="op" id="7735475">.</span><span class="ident" id="7735476">Body</span><span class="op" id="7735480">.</span><span class="op" id="7735481">(</span><span class="keyword" id="7735482">type</span><span class="op" id="7735486">)</span>&nbsp;<span class="op" id="7735488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735493">case</span>&nbsp;<span class="op" id="7735498">[</span><span class="op" id="7735499">]</span><span class="builtintype" id="7735500">byte</span><span class="op" id="7735504">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735510">tt</span><span class="op" id="7735512">.</span><span class="ident" id="7735513">Req</span><span class="op" id="7735516">.</span><span class="ident" id="7735517">Body</span>&nbsp;<span class="op" id="7735522">=</span>&nbsp;<span class="ident" id="7735524">ioutil</span><span class="op" id="7735530">.</span><span class="ident" id="7735531">NopCloser</span><span class="op" id="7735540">(</span><span class="ident" id="7735541">bytes</span><span class="op" id="7735546">.</span><span class="ident" id="7735547">NewReader</span><span class="op" id="7735556">(</span><span class="ident" id="7735557">b</span><span class="op" id="7735558">)</span><span class="op" id="7735559">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735564">case</span>&nbsp;<span class="keyword" id="7735569">func</span><span class="op" id="7735573">(</span><span class="op" id="7735574">)</span>&nbsp;<span class="ident" id="7735576">io</span><span class="op" id="7735578">.</span><span class="ident" id="7735579">ReadCloser</span><span class="op" id="7735589">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735595">tt</span><span class="op" id="7735597">.</span><span class="ident" id="7735598">Req</span><span class="op" id="7735601">.</span><span class="ident" id="7735602">Body</span>&nbsp;<span class="op" id="7735607">=</span>&nbsp;<span class="ident" id="7735609">b</span><span class="op" id="7735610">(</span><span class="op" id="7735611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735616">default</span><span class="op" id="7735623">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735629">t</span><span class="op" id="7735630">.</span><span class="ident" id="7735631">Fatalf</span><span class="op" id="7735637">(</span><span class="string" id="7735638">&#34;Test&nbsp;%d:&nbsp;unsupported&nbsp;Body&nbsp;of&nbsp;%T&#34;</span><span class="op" id="7735671">,</span>&nbsp;<span class="ident" id="7735673">i</span><span class="op" id="7735674">,</span>&nbsp;<span class="ident" id="7735676">tt</span><span class="op" id="7735678">.</span><span class="ident" id="7735679">Body</span><span class="op" id="7735683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735688">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735696">setBody</span><span class="op" id="7735703">(</span><span class="op" id="7735704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735708">if</span>&nbsp;<span class="ident" id="7735711">tt</span><span class="op" id="7735713">.</span><span class="ident" id="7735714">Req</span><span class="op" id="7735717">.</span><span class="ident" id="7735718">Header</span>&nbsp;<span class="op" id="7735725">==</span>&nbsp;<span class="ident" id="7735728">nil</span>&nbsp;<span class="op" id="7735732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735737">tt</span><span class="op" id="7735739">.</span><span class="ident" id="7735740">Req</span><span class="op" id="7735743">.</span><span class="ident" id="7735744">Header</span>&nbsp;<span class="op" id="7735751">=</span>&nbsp;<span class="builtinfunc" id="7735753">make</span><span class="op" id="7735757">(</span><span class="ident" id="7735758">http</span><span class="op" id="7735762">.</span><span class="ident" id="7735763">Header</span><span class="op" id="7735769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735773">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735778">if</span>&nbsp;<span class="ident" id="7735781">tt</span><span class="op" id="7735783">.</span><span class="ident" id="7735784">WantDump</span>&nbsp;<span class="op" id="7735793">!=</span>&nbsp;<span class="string" id="7735796">&#34;&#34;</span>&nbsp;<span class="op" id="7735799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735804">setBody</span><span class="op" id="7735811">(</span><span class="op" id="7735812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735817">dump</span><span class="op" id="7735821">,</span>&nbsp;<span class="ident" id="7735823">err</span>&nbsp;<span class="op" id="7735827">:=</span>&nbsp;<span class="ident" id="7735830">DumpRequest</span><span class="op" id="7735841">(</span><span class="op" id="7735842">&amp;</span><span class="ident" id="7735843">tt</span><span class="op" id="7735845">.</span><span class="ident" id="7735846">Req</span><span class="op" id="7735849">,</span>&nbsp;<span class="op" id="7735851">!</span><span class="ident" id="7735852">tt</span><span class="op" id="7735854">.</span><span class="ident" id="7735855">NoBody</span><span class="op" id="7735861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735866">if</span>&nbsp;<span class="ident" id="7735869">err</span>&nbsp;<span class="op" id="7735873">!=</span>&nbsp;<span class="ident" id="7735876">nil</span>&nbsp;<span class="op" id="7735880">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735886">t</span><span class="op" id="7735887">.</span><span class="ident" id="7735888">Errorf</span><span class="op" id="7735894">(</span><span class="string" id="7735895">&#34;DumpRequest&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7735916">,</span>&nbsp;<span class="ident" id="7735918">i</span><span class="op" id="7735919">,</span>&nbsp;<span class="ident" id="7735921">err</span><span class="op" id="7735924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735930">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7735947">if</span>&nbsp;<span class="builtintype" id="7735950">string</span><span class="op" id="7735956">(</span><span class="ident" id="7735957">dump</span><span class="op" id="7735961">)</span>&nbsp;<span class="op" id="7735963">!=</span>&nbsp;<span class="ident" id="7735966">tt</span><span class="op" id="7735968">.</span><span class="ident" id="7735969">WantDump</span>&nbsp;<span class="op" id="7735978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735984">t</span><span class="op" id="7735985">.</span><span class="ident" id="7735986">Errorf</span><span class="op" id="7735992">(</span><span class="string" id="7735993">&#34;DumpRequest&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7736037">,</span>&nbsp;<span class="ident" id="7736039">i</span><span class="op" id="7736040">,</span>&nbsp;<span class="ident" id="7736042">tt</span><span class="op" id="7736044">.</span><span class="ident" id="7736045">WantDump</span><span class="op" id="7736053">,</span>&nbsp;<span class="builtintype" id="7736055">string</span><span class="op" id="7736061">(</span><span class="ident" id="7736062">dump</span><span class="op" id="7736066">)</span><span class="op" id="7736067">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736073">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736094">if</span>&nbsp;<span class="ident" id="7736097">tt</span><span class="op" id="7736099">.</span><span class="ident" id="7736100">WantDumpOut</span>&nbsp;<span class="op" id="7736112">!=</span>&nbsp;<span class="string" id="7736115">&#34;&#34;</span>&nbsp;<span class="op" id="7736118">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736123">setBody</span><span class="op" id="7736130">(</span><span class="op" id="7736131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736136">dump</span><span class="op" id="7736140">,</span>&nbsp;<span class="ident" id="7736142">err</span>&nbsp;<span class="op" id="7736146">:=</span>&nbsp;<span class="ident" id="7736149">DumpRequestOut</span><span class="op" id="7736163">(</span><span class="op" id="7736164">&amp;</span><span class="ident" id="7736165">tt</span><span class="op" id="7736167">.</span><span class="ident" id="7736168">Req</span><span class="op" id="7736171">,</span>&nbsp;<span class="op" id="7736173">!</span><span class="ident" id="7736174">tt</span><span class="op" id="7736176">.</span><span class="ident" id="7736177">NoBody</span><span class="op" id="7736183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736188">if</span>&nbsp;<span class="ident" id="7736191">err</span>&nbsp;<span class="op" id="7736195">!=</span>&nbsp;<span class="ident" id="7736198">nil</span>&nbsp;<span class="op" id="7736202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736208">t</span><span class="op" id="7736209">.</span><span class="ident" id="7736210">Errorf</span><span class="op" id="7736216">(</span><span class="string" id="7736217">&#34;DumpRequestOut&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7736241">,</span>&nbsp;<span class="ident" id="7736243">i</span><span class="op" id="7736244">,</span>&nbsp;<span class="ident" id="7736246">err</span><span class="op" id="7736249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736255">continue</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736272">if</span>&nbsp;<span class="builtintype" id="7736275">string</span><span class="op" id="7736281">(</span><span class="ident" id="7736282">dump</span><span class="op" id="7736286">)</span>&nbsp;<span class="op" id="7736288">!=</span>&nbsp;<span class="ident" id="7736291">tt</span><span class="op" id="7736293">.</span><span class="ident" id="7736294">WantDumpOut</span>&nbsp;<span class="op" id="7736306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736312">t</span><span class="op" id="7736313">.</span><span class="ident" id="7736314">Errorf</span><span class="op" id="7736320">(</span><span class="string" id="7736321">&#34;DumpRequestOut&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7736368">,</span>&nbsp;<span class="ident" id="7736370">i</span><span class="op" id="7736371">,</span>&nbsp;<span class="ident" id="7736373">tt</span><span class="op" id="7736375">.</span><span class="ident" id="7736376">WantDumpOut</span><span class="op" id="7736387">,</span>&nbsp;<span class="builtintype" id="7736389">string</span><span class="op" id="7736395">(</span><span class="ident" id="7736396">dump</span><span class="op" id="7736400">)</span><span class="op" id="7736401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736407">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736419">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736429">if</span>&nbsp;<span class="ident" id="7736432">dg</span>&nbsp;<span class="op" id="7736435">:=</span>&nbsp;<span class="ident" id="7736438">runtime</span><span class="op" id="7736445">.</span><span class="ident" id="7736446">NumGoroutine</span><span class="op" id="7736458">(</span><span class="op" id="7736459">)</span>&nbsp;<span class="op" id="7736461">-</span>&nbsp;<span class="ident" id="7736463">numg0</span><span class="op" id="7736468">;</span>&nbsp;<span class="ident" id="7736470">dg</span>&nbsp;<span class="op" id="7736473">&gt;</span>&nbsp;<span class="num" id="7736475">4</span>&nbsp;<span class="op" id="7736477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736481">buf</span>&nbsp;<span class="op" id="7736485">:=</span>&nbsp;<span class="builtinfunc" id="7736488">make</span><span class="op" id="7736492">(</span><span class="op" id="7736493">[</span><span class="op" id="7736494">]</span><span class="builtintype" id="7736495">byte</span><span class="op" id="7736499">,</span>&nbsp;<span class="num" id="7736501">4096</span><span class="op" id="7736505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736509">buf</span>&nbsp;<span class="op" id="7736513">=</span>&nbsp;<span class="ident" id="7736515">buf</span><span class="op" id="7736518">[</span><span class="op" id="7736519">:</span><span class="ident" id="7736520">runtime</span><span class="op" id="7736527">.</span><span class="ident" id="7736528">Stack</span><span class="op" id="7736533">(</span><span class="ident" id="7736534">buf</span><span class="op" id="7736537">,</span>&nbsp;<span class="builtintype" id="7736539">true</span><span class="op" id="7736543">)</span><span class="op" id="7736544">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736548">t</span><span class="op" id="7736549">.</span><span class="ident" id="7736550">Errorf</span><span class="op" id="7736556">(</span><span class="string" id="7736557">&#34;Unexpectedly&nbsp;large&nbsp;number&nbsp;of&nbsp;new&nbsp;goroutines:&nbsp;%d&nbsp;new:&nbsp;%s&#34;</span><span class="op" id="7736614">,</span>&nbsp;<span class="ident" id="7736616">dg</span><span class="op" id="7736618">,</span>&nbsp;<span class="ident" id="7736620">buf</span><span class="op" id="7736623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736626">}</span><br>
<span class="lineno"></span><span class="op" id="7736628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7736631">func</span>&nbsp;<span class="ident" id="7736636">chunk</span><span class="op" id="7736641">(</span><span class="ident" id="7736642">s</span>&nbsp;<span class="builtintype" id="7736644">string</span><span class="op" id="7736650">)</span>&nbsp;<span class="builtintype" id="7736652">string</span>&nbsp;<span class="op" id="7736659">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736662">return</span>&nbsp;<span class="ident" id="7736669">fmt</span><span class="op" id="7736672">.</span><span class="ident" id="7736673">Sprintf</span><span class="op" id="7736680">(</span><span class="string" id="7736681">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="7736695">,</span>&nbsp;<span class="builtinfunc" id="7736697">len</span><span class="op" id="7736700">(</span><span class="ident" id="7736701">s</span><span class="op" id="7736702">)</span><span class="op" id="7736703">,</span>&nbsp;<span class="ident" id="7736705">s</span><span class="op" id="7736706">)</span><br>
<span class="lineno"></span><span class="op" id="7736708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7736711">func</span>&nbsp;<span class="ident" id="7736716">mustParseURL</span><span class="op" id="7736728">(</span><span class="ident" id="7736729">s</span>&nbsp;<span class="builtintype" id="7736731">string</span><span class="op" id="7736737">)</span>&nbsp;<span class="op" id="7736739">*</span><span class="ident" id="7736740">url</span><span class="op" id="7736743">.</span><span class="ident" id="7736744">URL</span>&nbsp;<span class="op" id="7736748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736751">u</span><span class="op" id="7736752">,</span>&nbsp;<span class="ident" id="7736754">err</span>&nbsp;<span class="op" id="7736758">:=</span>&nbsp;<span class="ident" id="7736761">url</span><span class="op" id="7736764">.</span><span class="ident" id="7736765">Parse</span><span class="op" id="7736770">(</span><span class="ident" id="7736771">s</span><span class="op" id="7736772">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736775">if</span>&nbsp;<span class="ident" id="7736778">err</span>&nbsp;<span class="op" id="7736782">!=</span>&nbsp;<span class="ident" id="7736785">nil</span>&nbsp;<span class="op" id="7736789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7736793">panic</span><span class="op" id="7736798">(</span><span class="ident" id="7736799">fmt</span><span class="op" id="7736802">.</span><span class="ident" id="7736803">Sprintf</span><span class="op" id="7736810">(</span><span class="string" id="7736811">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7736837">,</span>&nbsp;<span class="ident" id="7736839">s</span><span class="op" id="7736840">,</span>&nbsp;<span class="ident" id="7736842">err</span><span class="op" id="7736845">)</span><span class="op" id="7736846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736852">return</span>&nbsp;<span class="ident" id="7736859">u</span><br>
<span class="lineno"></span><span class="op" id="7736861">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7736864">func</span>&nbsp;<span class="ident" id="7736869">mustNewRequest</span><span class="op" id="7736883">(</span><span class="ident" id="7736884">method</span><span class="op" id="7736890">,</span>&nbsp;<span class="ident" id="7736892">url</span>&nbsp;<span class="builtintype" id="7736896">string</span><span class="op" id="7736902">,</span>&nbsp;<span class="ident" id="7736904">body</span>&nbsp;<span class="ident" id="7736909">io</span><span class="op" id="7736911">.</span><span class="ident" id="7736912">Reader</span><span class="op" id="7736918">)</span>&nbsp;<span class="op" id="7736920">*</span><span class="ident" id="7736921">http</span><span class="op" id="7736925">.</span><span class="ident" id="7736926">Request</span>&nbsp;<span class="op" id="7736934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736937">req</span><span class="op" id="7736940">,</span>&nbsp;<span class="ident" id="7736942">err</span>&nbsp;<span class="op" id="7736946">:=</span>&nbsp;<span class="ident" id="7736949">http</span><span class="op" id="7736953">.</span><span class="ident" id="7736954">NewRequest</span><span class="op" id="7736964">(</span><span class="ident" id="7736965">method</span><span class="op" id="7736971">,</span>&nbsp;<span class="ident" id="7736973">url</span><span class="op" id="7736976">,</span>&nbsp;<span class="ident" id="7736978">body</span><span class="op" id="7736982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736985">if</span>&nbsp;<span class="ident" id="7736988">err</span>&nbsp;<span class="op" id="7736992">!=</span>&nbsp;<span class="ident" id="7736995">nil</span>&nbsp;<span class="op" id="7736999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7737003">panic</span><span class="op" id="7737008">(</span><span class="ident" id="7737009">fmt</span><span class="op" id="7737012">.</span><span class="ident" id="7737013">Sprintf</span><span class="op" id="7737020">(</span><span class="string" id="7737021">&#34;NewRequest(%q,&nbsp;%q,&nbsp;%p)&nbsp;err&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7737054">,</span>&nbsp;<span class="ident" id="7737056">method</span><span class="op" id="7737062">,</span>&nbsp;<span class="ident" id="7737064">url</span><span class="op" id="7737067">,</span>&nbsp;<span class="ident" id="7737069">body</span><span class="op" id="7737073">,</span>&nbsp;<span class="ident" id="7737075">err</span><span class="op" id="7737078">)</span><span class="op" id="7737079">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737085">return</span>&nbsp;<span class="ident" id="7737092">req</span><br>
<span class="lineno"></span><span class="op" id="7737096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7737099">var</span>&nbsp;<span class="ident" id="7737103">dumpResTests</span>&nbsp;<span class="op" id="7737116">=</span>&nbsp;<span class="op" id="7737118">[</span><span class="op" id="7737119">]</span><span class="keyword" id="7737120">struct</span>&nbsp;<span class="op" id="7737127">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737130">res</span>&nbsp;&nbsp;<span class="op" id="7737135">*</span><span class="ident" id="7737136">http</span><span class="op" id="7737140">.</span><span class="ident" id="7737141">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737151">body</span>&nbsp;<span class="builtintype" id="7737156">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737162">want</span>&nbsp;<span class="builtintype" id="7737167">string</span><br>
<span class="lineno"></span><span class="op" id="7737174">}</span><span class="op" id="7737175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737178">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737182">res</span><span class="op" id="7737185">:</span>&nbsp;<span class="op" id="7737187">&amp;</span><span class="ident" id="7737188">http</span><span class="op" id="7737192">.</span><span class="ident" id="7737193">Response</span><span class="op" id="7737201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737206">Status</span><span class="op" id="7737212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737221">&#34;200&nbsp;OK&#34;</span><span class="op" id="7737229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737234">StatusCode</span><span class="op" id="7737244">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737249">200</span><span class="op" id="7737252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737257">Proto</span><span class="op" id="7737262">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737272">&#34;HTTP/1.1&#34;</span><span class="op" id="7737282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737287">ProtoMajor</span><span class="op" id="7737297">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737302">1</span><span class="op" id="7737303">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737308">ProtoMinor</span><span class="op" id="7737318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737323">1</span><span class="op" id="7737324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737329">ContentLength</span><span class="op" id="7737342">:</span>&nbsp;<span class="num" id="7737344">50</span><span class="op" id="7737346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737351">Header</span><span class="op" id="7737357">:</span>&nbsp;<span class="ident" id="7737359">http</span><span class="op" id="7737363">.</span><span class="ident" id="7737364">Header</span><span class="op" id="7737370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7737376">&#34;Foo&#34;</span><span class="op" id="7737381">:</span>&nbsp;<span class="op" id="7737383">[</span><span class="op" id="7737384">]</span><span class="builtintype" id="7737385">string</span><span class="op" id="7737391">{</span><span class="string" id="7737392">&#34;Bar&#34;</span><span class="op" id="7737397">}</span><span class="op" id="7737398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737403">}</span><span class="op" id="7737404">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737409">Body</span><span class="op" id="7737413">:</span>&nbsp;<span class="ident" id="7737415">ioutil</span><span class="op" id="7737421">.</span><span class="ident" id="7737422">NopCloser</span><span class="op" id="7737431">(</span><span class="ident" id="7737432">strings</span><span class="op" id="7737439">.</span><span class="ident" id="7737440">NewReader</span><span class="op" id="7737449">(</span><span class="string" id="7737450">&#34;foo&#34;</span><span class="op" id="7737455">)</span><span class="op" id="7737456">)</span><span class="op" id="7737457">,</span>&nbsp;<span class="comment" id="7737459">//&nbsp;shouldn&#39;t&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737482">}</span><span class="op" id="7737483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737487">body</span><span class="op" id="7737491">:</span>&nbsp;<span class="builtintype" id="7737493">false</span><span class="op" id="7737498">,</span>&nbsp;<span class="comment" id="7737500">//&nbsp;to&nbsp;verify&nbsp;we&nbsp;see&nbsp;50,&nbsp;not&nbsp;empty&nbsp;or&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737542">want</span><span class="op" id="7737546">:</span>&nbsp;<span class="string" id="7737548">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Content-Length:&nbsp;50<br>
<span class="lineno">235</span>Foo:&nbsp;Bar`</span><span class="op" id="7737593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737596">}</span><span class="op" id="7737597">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737605">res</span><span class="op" id="7737608">:</span>&nbsp;<span class="op" id="7737610">&amp;</span><span class="ident" id="7737611">http</span><span class="op" id="7737615">.</span><span class="ident" id="7737616">Response</span><span class="op" id="7737624">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737629">Status</span><span class="op" id="7737635">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737644">&#34;200&nbsp;OK&#34;</span><span class="op" id="7737652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737657">StatusCode</span><span class="op" id="7737667">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737672">200</span><span class="op" id="7737675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737680">Proto</span><span class="op" id="7737685">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737695">&#34;HTTP/1.1&#34;</span><span class="op" id="7737705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737710">ProtoMajor</span><span class="op" id="7737720">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737725">1</span><span class="op" id="7737726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737731">ProtoMinor</span><span class="op" id="7737741">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737746">1</span><span class="op" id="7737747">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737752">ContentLength</span><span class="op" id="7737765">:</span>&nbsp;<span class="num" id="7737767">3</span><span class="op" id="7737768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737773">Body</span><span class="op" id="7737777">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737788">ioutil</span><span class="op" id="7737794">.</span><span class="ident" id="7737795">NopCloser</span><span class="op" id="7737804">(</span><span class="ident" id="7737805">strings</span><span class="op" id="7737812">.</span><span class="ident" id="7737813">NewReader</span><span class="op" id="7737822">(</span><span class="string" id="7737823">&#34;foo&#34;</span><span class="op" id="7737828">)</span><span class="op" id="7737829">)</span><span class="op" id="7737830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737834">}</span><span class="op" id="7737835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737839">body</span><span class="op" id="7737843">:</span>&nbsp;<span class="builtintype" id="7737845">true</span><span class="op" id="7737849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737853">want</span><span class="op" id="7737857">:</span>&nbsp;<span class="string" id="7737859">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno">250</span>Content-Length:&nbsp;3<br>
<span class="lineno"></span><br>
<span class="lineno"></span>foo`</span><span class="op" id="7737899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737902">}</span><span class="op" id="7737903">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737911">res</span><span class="op" id="7737914">:</span>&nbsp;<span class="op" id="7737916">&amp;</span><span class="ident" id="7737917">http</span><span class="op" id="7737921">.</span><span class="ident" id="7737922">Response</span><span class="op" id="7737930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737935">Status</span><span class="op" id="7737941">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737953">&#34;200&nbsp;OK&#34;</span><span class="op" id="7737961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737966">StatusCode</span><span class="op" id="7737976">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737984">200</span><span class="op" id="7737987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737992">Proto</span><span class="op" id="7737997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738010">&#34;HTTP/1.1&#34;</span><span class="op" id="7738020">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738025">ProtoMajor</span><span class="op" id="7738035">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7738043">1</span><span class="op" id="7738044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738049">ProtoMinor</span><span class="op" id="7738059">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7738067">1</span><span class="op" id="7738068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738073">ContentLength</span><span class="op" id="7738086">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738091">-</span><span class="num" id="7738092">1</span><span class="op" id="7738093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738098">Body</span><span class="op" id="7738102">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738116">ioutil</span><span class="op" id="7738122">.</span><span class="ident" id="7738123">NopCloser</span><span class="op" id="7738132">(</span><span class="ident" id="7738133">strings</span><span class="op" id="7738140">.</span><span class="ident" id="7738141">NewReader</span><span class="op" id="7738150">(</span><span class="string" id="7738151">&#34;foo&#34;</span><span class="op" id="7738156">)</span><span class="op" id="7738157">)</span><span class="op" id="7738158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738163">TransferEncoding</span><span class="op" id="7738179">:</span>&nbsp;<span class="op" id="7738181">[</span><span class="op" id="7738182">]</span><span class="builtintype" id="7738183">string</span><span class="op" id="7738189">{</span><span class="string" id="7738190">&#34;chunked&#34;</span><span class="op" id="7738199">}</span><span class="op" id="7738200">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738204">}</span><span class="op" id="7738205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738209">body</span><span class="op" id="7738213">:</span>&nbsp;<span class="builtintype" id="7738215">true</span><span class="op" id="7738219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738223">want</span><span class="op" id="7738227">:</span>&nbsp;<span class="string" id="7738229">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Transfer-Encoding:&nbsp;chunked<br>
<span class="lineno"></span><br>
<span class="lineno">270</span>3<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>0`</span><span class="op" id="7738282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738285">}</span><span class="op" id="7738286">,</span><br>
<span class="lineno"></span><span class="op" id="7738288">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7738291">func</span>&nbsp;<span class="ident" id="7738296">TestDumpResponse</span><span class="op" id="7738312">(</span><span class="ident" id="7738313">t</span>&nbsp;<span class="op" id="7738315">*</span><span class="ident" id="7738316">testing</span><span class="op" id="7738323">.</span><span class="ident" id="7738324">T</span><span class="op" id="7738325">)</span>&nbsp;<span class="op" id="7738327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738330">for</span>&nbsp;<span class="ident" id="7738334">i</span><span class="op" id="7738335">,</span>&nbsp;<span class="ident" id="7738337">tt</span>&nbsp;<span class="op" id="7738340">:=</span>&nbsp;<span class="keyword" id="7738343">range</span>&nbsp;<span class="ident" id="7738349">dumpResTests</span>&nbsp;<span class="op" id="7738362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738366">gotb</span><span class="op" id="7738370">,</span>&nbsp;<span class="ident" id="7738372">err</span>&nbsp;<span class="op" id="7738376">:=</span>&nbsp;<span class="ident" id="7738379">DumpResponse</span><span class="op" id="7738391">(</span><span class="ident" id="7738392">tt</span><span class="op" id="7738394">.</span><span class="ident" id="7738395">res</span><span class="op" id="7738398">,</span>&nbsp;<span class="ident" id="7738400">tt</span><span class="op" id="7738402">.</span><span class="ident" id="7738403">body</span><span class="op" id="7738407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738411">if</span>&nbsp;<span class="ident" id="7738414">err</span>&nbsp;<span class="op" id="7738418">!=</span>&nbsp;<span class="ident" id="7738421">nil</span>&nbsp;<span class="op" id="7738425">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738430">t</span><span class="op" id="7738431">.</span><span class="ident" id="7738432">Errorf</span><span class="op" id="7738438">(</span><span class="string" id="7738439">&#34;%d.&nbsp;DumpResponse&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7738462">,</span>&nbsp;<span class="ident" id="7738464">i</span><span class="op" id="7738465">,</span>&nbsp;<span class="ident" id="7738467">err</span><span class="op" id="7738470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738475">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738490">got</span>&nbsp;<span class="op" id="7738494">:=</span>&nbsp;<span class="builtintype" id="7738497">string</span><span class="op" id="7738503">(</span><span class="ident" id="7738504">gotb</span><span class="op" id="7738508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738512">got</span>&nbsp;<span class="op" id="7738516">=</span>&nbsp;<span class="ident" id="7738518">strings</span><span class="op" id="7738525">.</span><span class="ident" id="7738526">TrimSpace</span><span class="op" id="7738535">(</span><span class="ident" id="7738536">got</span><span class="op" id="7738539">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738543">got</span>&nbsp;<span class="op" id="7738547">=</span>&nbsp;<span class="ident" id="7738549">strings</span><span class="op" id="7738556">.</span><span class="ident" id="7738557">Replace</span><span class="op" id="7738564">(</span><span class="ident" id="7738565">got</span><span class="op" id="7738568">,</span>&nbsp;<span class="string" id="7738570">&#34;\r&#34;</span><span class="op" id="7738574">,</span>&nbsp;<span class="string" id="7738576">&#34;&#34;</span><span class="op" id="7738578">,</span>&nbsp;<span class="op" id="7738580">-</span><span class="num" id="7738581">1</span><span class="op" id="7738582">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738587">if</span>&nbsp;<span class="ident" id="7738590">got</span>&nbsp;<span class="op" id="7738594">!=</span>&nbsp;<span class="ident" id="7738597">tt</span><span class="op" id="7738599">.</span><span class="ident" id="7738600">want</span>&nbsp;<span class="op" id="7738605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738610">t</span><span class="op" id="7738611">.</span><span class="ident" id="7738612">Errorf</span><span class="op" id="7738618">(</span><span class="string" id="7738619">&#34;%d.\nDumpResponse&nbsp;got:\n%s\n\nWant:\n%s\n&#34;</span><span class="op" id="7738662">,</span>&nbsp;<span class="ident" id="7738664">i</span><span class="op" id="7738665">,</span>&nbsp;<span class="ident" id="7738667">got</span><span class="op" id="7738670">,</span>&nbsp;<span class="ident" id="7738672">tt</span><span class="op" id="7738674">.</span><span class="ident" id="7738675">want</span><span class="op" id="7738679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738683">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738686">}</span><br>
<span class="lineno"></span><span class="op" id="7738688">}</span>
</div>
</body>
</html>
