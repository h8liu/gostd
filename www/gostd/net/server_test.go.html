<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html" class="current">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6697036">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6697091">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6697145">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6697196">package</span>&nbsp;<span class="ident" id="6697204">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6697209">import</span>&nbsp;<span class="op" id="6697216">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6697219">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6697227">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6697233">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6697239">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6697250">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6697261">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6697268">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6697271">func</span>&nbsp;<span class="ident" id="6697276">skipServerTest</span><span class="op" id="6697290">(</span><span class="ident" id="6697291">net</span><span class="op" id="6697294">,</span>&nbsp;<span class="ident" id="6697296">unixsotype</span><span class="op" id="6697306">,</span>&nbsp;<span class="ident" id="6697308">addr</span>&nbsp;<span class="builtintype" id="6697313">string</span><span class="op" id="6697319">,</span>&nbsp;<span class="ident" id="6697321">ipv6</span><span class="op" id="6697325">,</span>&nbsp;<span class="ident" id="6697327">ipv4map</span><span class="op" id="6697334">,</span>&nbsp;<span class="ident" id="6697336">linuxOnly</span>&nbsp;<span class="builtintype" id="6697346">bool</span><span class="op" id="6697350">)</span>&nbsp;<span class="builtintype" id="6697352">bool</span>&nbsp;<span class="op" id="6697357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697360">switch</span>&nbsp;<span class="ident" id="6697367">runtime</span><span class="op" id="6697374">.</span><span class="ident" id="6697375">GOOS</span>&nbsp;<span class="op" id="6697380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697383">case</span>&nbsp;<span class="string" id="6697388">&#34;linux&#34;</span><span class="op" id="6697395">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697398">case</span>&nbsp;<span class="string" id="6697403">&#34;nacl&#34;</span><span class="op" id="6697409">,</span>&nbsp;<span class="string" id="6697411">&#34;plan9&#34;</span><span class="op" id="6697418">,</span>&nbsp;<span class="string" id="6697420">&#34;windows&#34;</span><span class="op" id="6697429">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6697433">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697494">if</span>&nbsp;<span class="ident" id="6697497">net</span>&nbsp;<span class="op" id="6697501">==</span>&nbsp;<span class="ident" id="6697504">unixsotype</span>&nbsp;<span class="op" id="6697515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697520">return</span>&nbsp;<span class="builtintype" id="6697527">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697537">default</span><span class="op" id="6697544">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697548">if</span>&nbsp;<span class="ident" id="6697551">net</span>&nbsp;<span class="op" id="6697555">==</span>&nbsp;<span class="ident" id="6697558">unixsotype</span>&nbsp;<span class="op" id="6697569">&amp;&amp;</span>&nbsp;<span class="ident" id="6697572">linuxOnly</span>&nbsp;<span class="op" id="6697582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697587">return</span>&nbsp;<span class="builtintype" id="6697594">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697607">switch</span>&nbsp;<span class="ident" id="6697614">addr</span>&nbsp;<span class="op" id="6697619">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697622">case</span>&nbsp;<span class="string" id="6697627">&#34;&#34;</span><span class="op" id="6697629">,</span>&nbsp;<span class="string" id="6697631">&#34;0.0.0.0&#34;</span><span class="op" id="6697640">,</span>&nbsp;<span class="string" id="6697642">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6697660">,</span>&nbsp;<span class="string" id="6697662">&#34;[::]&#34;</span><span class="op" id="6697668">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697672">if</span>&nbsp;<span class="ident" id="6697675">testing</span><span class="op" id="6697682">.</span><span class="ident" id="6697683">Short</span><span class="op" id="6697688">(</span><span class="op" id="6697689">)</span>&nbsp;<span class="op" id="6697691">||</span>&nbsp;<span class="op" id="6697694">!</span><span class="op" id="6697695">*</span><span class="ident" id="6697696">testExternal</span>&nbsp;<span class="op" id="6697709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697714">return</span>&nbsp;<span class="builtintype" id="6697721">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697731">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697734">if</span>&nbsp;<span class="ident" id="6697737">ipv6</span>&nbsp;<span class="op" id="6697742">&amp;&amp;</span>&nbsp;<span class="op" id="6697745">!</span><span class="ident" id="6697746">supportsIPv6</span>&nbsp;<span class="op" id="6697759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697763">return</span>&nbsp;<span class="builtintype" id="6697770">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697779">if</span>&nbsp;<span class="ident" id="6697782">ipv4map</span>&nbsp;<span class="op" id="6697790">&amp;&amp;</span>&nbsp;<span class="op" id="6697793">!</span><span class="ident" id="6697794">supportsIPv4map</span>&nbsp;<span class="op" id="6697810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697814">return</span>&nbsp;<span class="builtintype" id="6697821">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697830">return</span>&nbsp;<span class="builtintype" id="6697837">false</span><br>
<span class="lineno"></span><span class="op" id="6697843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6697846">var</span>&nbsp;<span class="ident" id="6697850">streamConnServerTests</span>&nbsp;<span class="op" id="6697872">=</span>&nbsp;<span class="op" id="6697874">[</span><span class="op" id="6697875">]</span><span class="keyword" id="6697876">struct</span>&nbsp;<span class="op" id="6697883">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697886">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6697896">string</span>&nbsp;<span class="comment" id="6697903">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697919">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6697929">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697937">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6697947">string</span>&nbsp;<span class="comment" id="6697954">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697970">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6697980">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697988">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6697998">bool</span>&nbsp;<span class="comment" id="6698003">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698044">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6698054">bool</span>&nbsp;<span class="comment" id="6698059">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698105">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6698115">bool</span>&nbsp;<span class="comment" id="6698120">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698145">linuxOnly</span>&nbsp;<span class="builtintype" id="6698155">bool</span>&nbsp;<span class="comment" id="6698160">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6698214">}</span><span class="op" id="6698215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698218">{</span><span class="ident" id="6698219">snet</span><span class="op" id="6698223">:</span>&nbsp;<span class="string" id="6698225">&#34;tcp&#34;</span><span class="op" id="6698230">,</span>&nbsp;<span class="ident" id="6698232">saddr</span><span class="op" id="6698237">:</span>&nbsp;<span class="string" id="6698239">&#34;&#34;</span><span class="op" id="6698241">,</span>&nbsp;<span class="ident" id="6698243">cnet</span><span class="op" id="6698247">:</span>&nbsp;<span class="string" id="6698249">&#34;tcp&#34;</span><span class="op" id="6698254">,</span>&nbsp;<span class="ident" id="6698256">caddr</span><span class="op" id="6698261">:</span>&nbsp;<span class="string" id="6698263">&#34;127.0.0.1&#34;</span><span class="op" id="6698274">}</span><span class="op" id="6698275">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698278">{</span><span class="ident" id="6698279">snet</span><span class="op" id="6698283">:</span>&nbsp;<span class="string" id="6698285">&#34;tcp&#34;</span><span class="op" id="6698290">,</span>&nbsp;<span class="ident" id="6698292">saddr</span><span class="op" id="6698297">:</span>&nbsp;<span class="string" id="6698299">&#34;0.0.0.0&#34;</span><span class="op" id="6698308">,</span>&nbsp;<span class="ident" id="6698310">cnet</span><span class="op" id="6698314">:</span>&nbsp;<span class="string" id="6698316">&#34;tcp&#34;</span><span class="op" id="6698321">,</span>&nbsp;<span class="ident" id="6698323">caddr</span><span class="op" id="6698328">:</span>&nbsp;<span class="string" id="6698330">&#34;127.0.0.1&#34;</span><span class="op" id="6698341">}</span><span class="op" id="6698342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698345">{</span><span class="ident" id="6698346">snet</span><span class="op" id="6698350">:</span>&nbsp;<span class="string" id="6698352">&#34;tcp&#34;</span><span class="op" id="6698357">,</span>&nbsp;<span class="ident" id="6698359">saddr</span><span class="op" id="6698364">:</span>&nbsp;<span class="string" id="6698366">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6698384">,</span>&nbsp;<span class="ident" id="6698386">cnet</span><span class="op" id="6698390">:</span>&nbsp;<span class="string" id="6698392">&#34;tcp&#34;</span><span class="op" id="6698397">,</span>&nbsp;<span class="ident" id="6698399">caddr</span><span class="op" id="6698404">:</span>&nbsp;<span class="string" id="6698406">&#34;127.0.0.1&#34;</span><span class="op" id="6698417">}</span><span class="op" id="6698418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698421">{</span><span class="ident" id="6698422">snet</span><span class="op" id="6698426">:</span>&nbsp;<span class="string" id="6698428">&#34;tcp&#34;</span><span class="op" id="6698433">,</span>&nbsp;<span class="ident" id="6698435">saddr</span><span class="op" id="6698440">:</span>&nbsp;<span class="string" id="6698442">&#34;[::]&#34;</span><span class="op" id="6698448">,</span>&nbsp;<span class="ident" id="6698450">cnet</span><span class="op" id="6698454">:</span>&nbsp;<span class="string" id="6698456">&#34;tcp&#34;</span><span class="op" id="6698461">,</span>&nbsp;<span class="ident" id="6698463">caddr</span><span class="op" id="6698468">:</span>&nbsp;<span class="string" id="6698470">&#34;[::1]&#34;</span><span class="op" id="6698477">,</span>&nbsp;<span class="ident" id="6698479">ipv6</span><span class="op" id="6698483">:</span>&nbsp;<span class="builtintype" id="6698485">true</span><span class="op" id="6698489">}</span><span class="op" id="6698490">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698494">{</span><span class="ident" id="6698495">snet</span><span class="op" id="6698499">:</span>&nbsp;<span class="string" id="6698501">&#34;tcp&#34;</span><span class="op" id="6698506">,</span>&nbsp;<span class="ident" id="6698508">saddr</span><span class="op" id="6698513">:</span>&nbsp;<span class="string" id="6698515">&#34;&#34;</span><span class="op" id="6698517">,</span>&nbsp;<span class="ident" id="6698519">cnet</span><span class="op" id="6698523">:</span>&nbsp;<span class="string" id="6698525">&#34;tcp&#34;</span><span class="op" id="6698530">,</span>&nbsp;<span class="ident" id="6698532">caddr</span><span class="op" id="6698537">:</span>&nbsp;<span class="string" id="6698539">&#34;[::1]&#34;</span><span class="op" id="6698546">,</span>&nbsp;<span class="ident" id="6698548">ipv4map</span><span class="op" id="6698555">:</span>&nbsp;<span class="builtintype" id="6698557">true</span><span class="op" id="6698561">}</span><span class="op" id="6698562">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698565">{</span><span class="ident" id="6698566">snet</span><span class="op" id="6698570">:</span>&nbsp;<span class="string" id="6698572">&#34;tcp&#34;</span><span class="op" id="6698577">,</span>&nbsp;<span class="ident" id="6698579">saddr</span><span class="op" id="6698584">:</span>&nbsp;<span class="string" id="6698586">&#34;0.0.0.0&#34;</span><span class="op" id="6698595">,</span>&nbsp;<span class="ident" id="6698597">cnet</span><span class="op" id="6698601">:</span>&nbsp;<span class="string" id="6698603">&#34;tcp&#34;</span><span class="op" id="6698608">,</span>&nbsp;<span class="ident" id="6698610">caddr</span><span class="op" id="6698615">:</span>&nbsp;<span class="string" id="6698617">&#34;[::1]&#34;</span><span class="op" id="6698624">,</span>&nbsp;<span class="ident" id="6698626">ipv4map</span><span class="op" id="6698633">:</span>&nbsp;<span class="builtintype" id="6698635">true</span><span class="op" id="6698639">}</span><span class="op" id="6698640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698643">{</span><span class="ident" id="6698644">snet</span><span class="op" id="6698648">:</span>&nbsp;<span class="string" id="6698650">&#34;tcp&#34;</span><span class="op" id="6698655">,</span>&nbsp;<span class="ident" id="6698657">saddr</span><span class="op" id="6698662">:</span>&nbsp;<span class="string" id="6698664">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6698682">,</span>&nbsp;<span class="ident" id="6698684">cnet</span><span class="op" id="6698688">:</span>&nbsp;<span class="string" id="6698690">&#34;tcp&#34;</span><span class="op" id="6698695">,</span>&nbsp;<span class="ident" id="6698697">caddr</span><span class="op" id="6698702">:</span>&nbsp;<span class="string" id="6698704">&#34;[::1]&#34;</span><span class="op" id="6698711">,</span>&nbsp;<span class="ident" id="6698713">ipv4map</span><span class="op" id="6698720">:</span>&nbsp;<span class="builtintype" id="6698722">true</span><span class="op" id="6698726">}</span><span class="op" id="6698727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698730">{</span><span class="ident" id="6698731">snet</span><span class="op" id="6698735">:</span>&nbsp;<span class="string" id="6698737">&#34;tcp&#34;</span><span class="op" id="6698742">,</span>&nbsp;<span class="ident" id="6698744">saddr</span><span class="op" id="6698749">:</span>&nbsp;<span class="string" id="6698751">&#34;[::]&#34;</span><span class="op" id="6698757">,</span>&nbsp;<span class="ident" id="6698759">cnet</span><span class="op" id="6698763">:</span>&nbsp;<span class="string" id="6698765">&#34;tcp&#34;</span><span class="op" id="6698770">,</span>&nbsp;<span class="ident" id="6698772">caddr</span><span class="op" id="6698777">:</span>&nbsp;<span class="string" id="6698779">&#34;127.0.0.1&#34;</span><span class="op" id="6698790">,</span>&nbsp;<span class="ident" id="6698792">ipv4map</span><span class="op" id="6698799">:</span>&nbsp;<span class="builtintype" id="6698801">true</span><span class="op" id="6698805">}</span><span class="op" id="6698806">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698810">{</span><span class="ident" id="6698811">snet</span><span class="op" id="6698815">:</span>&nbsp;<span class="string" id="6698817">&#34;tcp&#34;</span><span class="op" id="6698822">,</span>&nbsp;<span class="ident" id="6698824">saddr</span><span class="op" id="6698829">:</span>&nbsp;<span class="string" id="6698831">&#34;&#34;</span><span class="op" id="6698833">,</span>&nbsp;<span class="ident" id="6698835">cnet</span><span class="op" id="6698839">:</span>&nbsp;<span class="string" id="6698841">&#34;tcp4&#34;</span><span class="op" id="6698847">,</span>&nbsp;<span class="ident" id="6698849">caddr</span><span class="op" id="6698854">:</span>&nbsp;<span class="string" id="6698856">&#34;127.0.0.1&#34;</span><span class="op" id="6698867">}</span><span class="op" id="6698868">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698871">{</span><span class="ident" id="6698872">snet</span><span class="op" id="6698876">:</span>&nbsp;<span class="string" id="6698878">&#34;tcp&#34;</span><span class="op" id="6698883">,</span>&nbsp;<span class="ident" id="6698885">saddr</span><span class="op" id="6698890">:</span>&nbsp;<span class="string" id="6698892">&#34;0.0.0.0&#34;</span><span class="op" id="6698901">,</span>&nbsp;<span class="ident" id="6698903">cnet</span><span class="op" id="6698907">:</span>&nbsp;<span class="string" id="6698909">&#34;tcp4&#34;</span><span class="op" id="6698915">,</span>&nbsp;<span class="ident" id="6698917">caddr</span><span class="op" id="6698922">:</span>&nbsp;<span class="string" id="6698924">&#34;127.0.0.1&#34;</span><span class="op" id="6698935">}</span><span class="op" id="6698936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698939">{</span><span class="ident" id="6698940">snet</span><span class="op" id="6698944">:</span>&nbsp;<span class="string" id="6698946">&#34;tcp&#34;</span><span class="op" id="6698951">,</span>&nbsp;<span class="ident" id="6698953">saddr</span><span class="op" id="6698958">:</span>&nbsp;<span class="string" id="6698960">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6698978">,</span>&nbsp;<span class="ident" id="6698980">cnet</span><span class="op" id="6698984">:</span>&nbsp;<span class="string" id="6698986">&#34;tcp4&#34;</span><span class="op" id="6698992">,</span>&nbsp;<span class="ident" id="6698994">caddr</span><span class="op" id="6698999">:</span>&nbsp;<span class="string" id="6699001">&#34;127.0.0.1&#34;</span><span class="op" id="6699012">}</span><span class="op" id="6699013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699016">{</span><span class="ident" id="6699017">snet</span><span class="op" id="6699021">:</span>&nbsp;<span class="string" id="6699023">&#34;tcp&#34;</span><span class="op" id="6699028">,</span>&nbsp;<span class="ident" id="6699030">saddr</span><span class="op" id="6699035">:</span>&nbsp;<span class="string" id="6699037">&#34;[::]&#34;</span><span class="op" id="6699043">,</span>&nbsp;<span class="ident" id="6699045">cnet</span><span class="op" id="6699049">:</span>&nbsp;<span class="string" id="6699051">&#34;tcp6&#34;</span><span class="op" id="6699057">,</span>&nbsp;<span class="ident" id="6699059">caddr</span><span class="op" id="6699064">:</span>&nbsp;<span class="string" id="6699066">&#34;[::1]&#34;</span><span class="op" id="6699073">,</span>&nbsp;<span class="ident" id="6699075">ipv6</span><span class="op" id="6699079">:</span>&nbsp;<span class="builtintype" id="6699081">true</span><span class="op" id="6699085">}</span><span class="op" id="6699086">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699090">{</span><span class="ident" id="6699091">snet</span><span class="op" id="6699095">:</span>&nbsp;<span class="string" id="6699097">&#34;tcp&#34;</span><span class="op" id="6699102">,</span>&nbsp;<span class="ident" id="6699104">saddr</span><span class="op" id="6699109">:</span>&nbsp;<span class="string" id="6699111">&#34;&#34;</span><span class="op" id="6699113">,</span>&nbsp;<span class="ident" id="6699115">cnet</span><span class="op" id="6699119">:</span>&nbsp;<span class="string" id="6699121">&#34;tcp6&#34;</span><span class="op" id="6699127">,</span>&nbsp;<span class="ident" id="6699129">caddr</span><span class="op" id="6699134">:</span>&nbsp;<span class="string" id="6699136">&#34;[::1]&#34;</span><span class="op" id="6699143">,</span>&nbsp;<span class="ident" id="6699145">ipv4map</span><span class="op" id="6699152">:</span>&nbsp;<span class="builtintype" id="6699154">true</span><span class="op" id="6699158">}</span><span class="op" id="6699159">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699162">{</span><span class="ident" id="6699163">snet</span><span class="op" id="6699167">:</span>&nbsp;<span class="string" id="6699169">&#34;tcp&#34;</span><span class="op" id="6699174">,</span>&nbsp;<span class="ident" id="6699176">saddr</span><span class="op" id="6699181">:</span>&nbsp;<span class="string" id="6699183">&#34;0.0.0.0&#34;</span><span class="op" id="6699192">,</span>&nbsp;<span class="ident" id="6699194">cnet</span><span class="op" id="6699198">:</span>&nbsp;<span class="string" id="6699200">&#34;tcp6&#34;</span><span class="op" id="6699206">,</span>&nbsp;<span class="ident" id="6699208">caddr</span><span class="op" id="6699213">:</span>&nbsp;<span class="string" id="6699215">&#34;[::1]&#34;</span><span class="op" id="6699222">,</span>&nbsp;<span class="ident" id="6699224">ipv4map</span><span class="op" id="6699231">:</span>&nbsp;<span class="builtintype" id="6699233">true</span><span class="op" id="6699237">}</span><span class="op" id="6699238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699241">{</span><span class="ident" id="6699242">snet</span><span class="op" id="6699246">:</span>&nbsp;<span class="string" id="6699248">&#34;tcp&#34;</span><span class="op" id="6699253">,</span>&nbsp;<span class="ident" id="6699255">saddr</span><span class="op" id="6699260">:</span>&nbsp;<span class="string" id="6699262">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6699280">,</span>&nbsp;<span class="ident" id="6699282">cnet</span><span class="op" id="6699286">:</span>&nbsp;<span class="string" id="6699288">&#34;tcp6&#34;</span><span class="op" id="6699294">,</span>&nbsp;<span class="ident" id="6699296">caddr</span><span class="op" id="6699301">:</span>&nbsp;<span class="string" id="6699303">&#34;[::1]&#34;</span><span class="op" id="6699310">,</span>&nbsp;<span class="ident" id="6699312">ipv4map</span><span class="op" id="6699319">:</span>&nbsp;<span class="builtintype" id="6699321">true</span><span class="op" id="6699325">}</span><span class="op" id="6699326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699329">{</span><span class="ident" id="6699330">snet</span><span class="op" id="6699334">:</span>&nbsp;<span class="string" id="6699336">&#34;tcp&#34;</span><span class="op" id="6699341">,</span>&nbsp;<span class="ident" id="6699343">saddr</span><span class="op" id="6699348">:</span>&nbsp;<span class="string" id="6699350">&#34;[::]&#34;</span><span class="op" id="6699356">,</span>&nbsp;<span class="ident" id="6699358">cnet</span><span class="op" id="6699362">:</span>&nbsp;<span class="string" id="6699364">&#34;tcp4&#34;</span><span class="op" id="6699370">,</span>&nbsp;<span class="ident" id="6699372">caddr</span><span class="op" id="6699377">:</span>&nbsp;<span class="string" id="6699379">&#34;127.0.0.1&#34;</span><span class="op" id="6699390">,</span>&nbsp;<span class="ident" id="6699392">ipv4map</span><span class="op" id="6699399">:</span>&nbsp;<span class="builtintype" id="6699401">true</span><span class="op" id="6699405">}</span><span class="op" id="6699406">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699410">{</span><span class="ident" id="6699411">snet</span><span class="op" id="6699415">:</span>&nbsp;<span class="string" id="6699417">&#34;tcp&#34;</span><span class="op" id="6699422">,</span>&nbsp;<span class="ident" id="6699424">saddr</span><span class="op" id="6699429">:</span>&nbsp;<span class="string" id="6699431">&#34;127.0.0.1&#34;</span><span class="op" id="6699442">,</span>&nbsp;<span class="ident" id="6699444">cnet</span><span class="op" id="6699448">:</span>&nbsp;<span class="string" id="6699450">&#34;tcp&#34;</span><span class="op" id="6699455">,</span>&nbsp;<span class="ident" id="6699457">caddr</span><span class="op" id="6699462">:</span>&nbsp;<span class="string" id="6699464">&#34;127.0.0.1&#34;</span><span class="op" id="6699475">}</span><span class="op" id="6699476">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699479">{</span><span class="ident" id="6699480">snet</span><span class="op" id="6699484">:</span>&nbsp;<span class="string" id="6699486">&#34;tcp&#34;</span><span class="op" id="6699491">,</span>&nbsp;<span class="ident" id="6699493">saddr</span><span class="op" id="6699498">:</span>&nbsp;<span class="string" id="6699500">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6699520">,</span>&nbsp;<span class="ident" id="6699522">cnet</span><span class="op" id="6699526">:</span>&nbsp;<span class="string" id="6699528">&#34;tcp&#34;</span><span class="op" id="6699533">,</span>&nbsp;<span class="ident" id="6699535">caddr</span><span class="op" id="6699540">:</span>&nbsp;<span class="string" id="6699542">&#34;127.0.0.1&#34;</span><span class="op" id="6699553">}</span><span class="op" id="6699554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699557">{</span><span class="ident" id="6699558">snet</span><span class="op" id="6699562">:</span>&nbsp;<span class="string" id="6699564">&#34;tcp&#34;</span><span class="op" id="6699569">,</span>&nbsp;<span class="ident" id="6699571">saddr</span><span class="op" id="6699576">:</span>&nbsp;<span class="string" id="6699578">&#34;[::1]&#34;</span><span class="op" id="6699585">,</span>&nbsp;<span class="ident" id="6699587">cnet</span><span class="op" id="6699591">:</span>&nbsp;<span class="string" id="6699593">&#34;tcp&#34;</span><span class="op" id="6699598">,</span>&nbsp;<span class="ident" id="6699600">caddr</span><span class="op" id="6699605">:</span>&nbsp;<span class="string" id="6699607">&#34;[::1]&#34;</span><span class="op" id="6699614">,</span>&nbsp;<span class="ident" id="6699616">ipv6</span><span class="op" id="6699620">:</span>&nbsp;<span class="builtintype" id="6699622">true</span><span class="op" id="6699626">}</span><span class="op" id="6699627">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699631">{</span><span class="ident" id="6699632">snet</span><span class="op" id="6699636">:</span>&nbsp;<span class="string" id="6699638">&#34;tcp4&#34;</span><span class="op" id="6699644">,</span>&nbsp;<span class="ident" id="6699646">saddr</span><span class="op" id="6699651">:</span>&nbsp;<span class="string" id="6699653">&#34;&#34;</span><span class="op" id="6699655">,</span>&nbsp;<span class="ident" id="6699657">cnet</span><span class="op" id="6699661">:</span>&nbsp;<span class="string" id="6699663">&#34;tcp4&#34;</span><span class="op" id="6699669">,</span>&nbsp;<span class="ident" id="6699671">caddr</span><span class="op" id="6699676">:</span>&nbsp;<span class="string" id="6699678">&#34;127.0.0.1&#34;</span><span class="op" id="6699689">}</span><span class="op" id="6699690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699693">{</span><span class="ident" id="6699694">snet</span><span class="op" id="6699698">:</span>&nbsp;<span class="string" id="6699700">&#34;tcp4&#34;</span><span class="op" id="6699706">,</span>&nbsp;<span class="ident" id="6699708">saddr</span><span class="op" id="6699713">:</span>&nbsp;<span class="string" id="6699715">&#34;0.0.0.0&#34;</span><span class="op" id="6699724">,</span>&nbsp;<span class="ident" id="6699726">cnet</span><span class="op" id="6699730">:</span>&nbsp;<span class="string" id="6699732">&#34;tcp4&#34;</span><span class="op" id="6699738">,</span>&nbsp;<span class="ident" id="6699740">caddr</span><span class="op" id="6699745">:</span>&nbsp;<span class="string" id="6699747">&#34;127.0.0.1&#34;</span><span class="op" id="6699758">}</span><span class="op" id="6699759">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699762">{</span><span class="ident" id="6699763">snet</span><span class="op" id="6699767">:</span>&nbsp;<span class="string" id="6699769">&#34;tcp4&#34;</span><span class="op" id="6699775">,</span>&nbsp;<span class="ident" id="6699777">saddr</span><span class="op" id="6699782">:</span>&nbsp;<span class="string" id="6699784">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6699802">,</span>&nbsp;<span class="ident" id="6699804">cnet</span><span class="op" id="6699808">:</span>&nbsp;<span class="string" id="6699810">&#34;tcp4&#34;</span><span class="op" id="6699816">,</span>&nbsp;<span class="ident" id="6699818">caddr</span><span class="op" id="6699823">:</span>&nbsp;<span class="string" id="6699825">&#34;127.0.0.1&#34;</span><span class="op" id="6699836">}</span><span class="op" id="6699837">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699841">{</span><span class="ident" id="6699842">snet</span><span class="op" id="6699846">:</span>&nbsp;<span class="string" id="6699848">&#34;tcp4&#34;</span><span class="op" id="6699854">,</span>&nbsp;<span class="ident" id="6699856">saddr</span><span class="op" id="6699861">:</span>&nbsp;<span class="string" id="6699863">&#34;127.0.0.1&#34;</span><span class="op" id="6699874">,</span>&nbsp;<span class="ident" id="6699876">cnet</span><span class="op" id="6699880">:</span>&nbsp;<span class="string" id="6699882">&#34;tcp4&#34;</span><span class="op" id="6699888">,</span>&nbsp;<span class="ident" id="6699890">caddr</span><span class="op" id="6699895">:</span>&nbsp;<span class="string" id="6699897">&#34;127.0.0.1&#34;</span><span class="op" id="6699908">}</span><span class="op" id="6699909">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699913">{</span><span class="ident" id="6699914">snet</span><span class="op" id="6699918">:</span>&nbsp;<span class="string" id="6699920">&#34;tcp6&#34;</span><span class="op" id="6699926">,</span>&nbsp;<span class="ident" id="6699928">saddr</span><span class="op" id="6699933">:</span>&nbsp;<span class="string" id="6699935">&#34;&#34;</span><span class="op" id="6699937">,</span>&nbsp;<span class="ident" id="6699939">cnet</span><span class="op" id="6699943">:</span>&nbsp;<span class="string" id="6699945">&#34;tcp6&#34;</span><span class="op" id="6699951">,</span>&nbsp;<span class="ident" id="6699953">caddr</span><span class="op" id="6699958">:</span>&nbsp;<span class="string" id="6699960">&#34;[::1]&#34;</span><span class="op" id="6699967">,</span>&nbsp;<span class="ident" id="6699969">ipv6</span><span class="op" id="6699973">:</span>&nbsp;<span class="builtintype" id="6699975">true</span><span class="op" id="6699979">}</span><span class="op" id="6699980">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699983">{</span><span class="ident" id="6699984">snet</span><span class="op" id="6699988">:</span>&nbsp;<span class="string" id="6699990">&#34;tcp6&#34;</span><span class="op" id="6699996">,</span>&nbsp;<span class="ident" id="6699998">saddr</span><span class="op" id="6700003">:</span>&nbsp;<span class="string" id="6700005">&#34;[::]&#34;</span><span class="op" id="6700011">,</span>&nbsp;<span class="ident" id="6700013">cnet</span><span class="op" id="6700017">:</span>&nbsp;<span class="string" id="6700019">&#34;tcp6&#34;</span><span class="op" id="6700025">,</span>&nbsp;<span class="ident" id="6700027">caddr</span><span class="op" id="6700032">:</span>&nbsp;<span class="string" id="6700034">&#34;[::1]&#34;</span><span class="op" id="6700041">,</span>&nbsp;<span class="ident" id="6700043">ipv6</span><span class="op" id="6700047">:</span>&nbsp;<span class="builtintype" id="6700049">true</span><span class="op" id="6700053">}</span><span class="op" id="6700054">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6700058">{</span><span class="ident" id="6700059">snet</span><span class="op" id="6700063">:</span>&nbsp;<span class="string" id="6700065">&#34;tcp6&#34;</span><span class="op" id="6700071">,</span>&nbsp;<span class="ident" id="6700073">saddr</span><span class="op" id="6700078">:</span>&nbsp;<span class="string" id="6700080">&#34;[::1]&#34;</span><span class="op" id="6700087">,</span>&nbsp;<span class="ident" id="6700089">cnet</span><span class="op" id="6700093">:</span>&nbsp;<span class="string" id="6700095">&#34;tcp6&#34;</span><span class="op" id="6700101">,</span>&nbsp;<span class="ident" id="6700103">caddr</span><span class="op" id="6700108">:</span>&nbsp;<span class="string" id="6700110">&#34;[::1]&#34;</span><span class="op" id="6700117">,</span>&nbsp;<span class="ident" id="6700119">ipv6</span><span class="op" id="6700123">:</span>&nbsp;<span class="builtintype" id="6700125">true</span><span class="op" id="6700129">}</span><span class="op" id="6700130">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6700134">{</span><span class="ident" id="6700135">snet</span><span class="op" id="6700139">:</span>&nbsp;<span class="string" id="6700141">&#34;unix&#34;</span><span class="op" id="6700147">,</span>&nbsp;<span class="ident" id="6700149">saddr</span><span class="op" id="6700154">:</span>&nbsp;<span class="ident" id="6700156">testUnixAddr</span><span class="op" id="6700168">(</span><span class="op" id="6700169">)</span><span class="op" id="6700170">,</span>&nbsp;<span class="ident" id="6700172">cnet</span><span class="op" id="6700176">:</span>&nbsp;<span class="string" id="6700178">&#34;unix&#34;</span><span class="op" id="6700184">,</span>&nbsp;<span class="ident" id="6700186">caddr</span><span class="op" id="6700191">:</span>&nbsp;<span class="ident" id="6700193">testUnixAddr</span><span class="op" id="6700205">(</span><span class="op" id="6700206">)</span><span class="op" id="6700207">}</span><span class="op" id="6700208">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6700211">{</span><span class="ident" id="6700212">snet</span><span class="op" id="6700216">:</span>&nbsp;<span class="string" id="6700218">&#34;unix&#34;</span><span class="op" id="6700224">,</span>&nbsp;<span class="ident" id="6700226">saddr</span><span class="op" id="6700231">:</span>&nbsp;<span class="string" id="6700233">&#34;@gotest2/net&#34;</span><span class="op" id="6700247">,</span>&nbsp;<span class="ident" id="6700249">cnet</span><span class="op" id="6700253">:</span>&nbsp;<span class="string" id="6700255">&#34;unix&#34;</span><span class="op" id="6700261">,</span>&nbsp;<span class="ident" id="6700263">caddr</span><span class="op" id="6700268">:</span>&nbsp;<span class="string" id="6700270">&#34;@gotest2/net.local&#34;</span><span class="op" id="6700290">,</span>&nbsp;<span class="ident" id="6700292">linuxOnly</span><span class="op" id="6700301">:</span>&nbsp;<span class="builtintype" id="6700303">true</span><span class="op" id="6700307">}</span><span class="op" id="6700308">,</span><br>
<span class="lineno"></span><span class="op" id="6700310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6700313">func</span>&nbsp;<span class="ident" id="6700318">TestStreamConnServer</span><span class="op" id="6700338">(</span><span class="ident" id="6700339">t</span>&nbsp;<span class="op" id="6700341">*</span><span class="ident" id="6700342">testing</span><span class="op" id="6700349">.</span><span class="ident" id="6700350">T</span><span class="op" id="6700351">)</span>&nbsp;<span class="op" id="6700353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6700356">for</span>&nbsp;<span class="ident" id="6700360">_</span><span class="op" id="6700361">,</span>&nbsp;<span class="ident" id="6700363">tt</span>&nbsp;<span class="op" id="6700366">:=</span>&nbsp;<span class="keyword" id="6700369">range</span>&nbsp;<span class="ident" id="6700375">streamConnServerTests</span>&nbsp;<span class="op" id="6700397">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6700401">if</span>&nbsp;<span class="ident" id="6700404">skipServerTest</span><span class="op" id="6700418">(</span><span class="ident" id="6700419">tt</span><span class="op" id="6700421">.</span><span class="ident" id="6700422">snet</span><span class="op" id="6700426">,</span>&nbsp;<span class="string" id="6700428">&#34;unix&#34;</span><span class="op" id="6700434">,</span>&nbsp;<span class="ident" id="6700436">tt</span><span class="op" id="6700438">.</span><span class="ident" id="6700439">saddr</span><span class="op" id="6700444">,</span>&nbsp;<span class="ident" id="6700446">tt</span><span class="op" id="6700448">.</span><span class="ident" id="6700449">ipv6</span><span class="op" id="6700453">,</span>&nbsp;<span class="ident" id="6700455">tt</span><span class="op" id="6700457">.</span><span class="ident" id="6700458">ipv4map</span><span class="op" id="6700465">,</span>&nbsp;<span class="ident" id="6700467">tt</span><span class="op" id="6700469">.</span><span class="ident" id="6700470">linuxOnly</span><span class="op" id="6700479">)</span>&nbsp;<span class="op" id="6700481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6700486">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6700497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6700502">listening</span>&nbsp;<span class="op" id="6700512">:=</span>&nbsp;<span class="builtinfunc" id="6700515">make</span><span class="op" id="6700519">(</span><span class="keyword" id="6700520">chan</span>&nbsp;<span class="builtintype" id="6700525">string</span><span class="op" id="6700531">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6700535">done</span>&nbsp;<span class="op" id="6700540">:=</span>&nbsp;<span class="builtinfunc" id="6700543">make</span><span class="op" id="6700547">(</span><span class="keyword" id="6700548">chan</span>&nbsp;<span class="builtintype" id="6700553">int</span><span class="op" id="6700556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6700560">switch</span>&nbsp;<span class="ident" id="6700567">tt</span><span class="op" id="6700569">.</span><span class="ident" id="6700570">snet</span>&nbsp;<span class="op" id="6700575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6700579">case</span>&nbsp;<span class="string" id="6700584">&#34;tcp&#34;</span><span class="op" id="6700589">,</span>&nbsp;<span class="string" id="6700591">&#34;tcp4&#34;</span><span class="op" id="6700597">,</span>&nbsp;<span class="string" id="6700599">&#34;tcp6&#34;</span><span class="op" id="6700605">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6700610">tt</span><span class="op" id="6700612">.</span><span class="ident" id="6700613">saddr</span>&nbsp;<span class="op" id="6700619">+=</span>&nbsp;<span class="string" id="6700622">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6700629">case</span>&nbsp;<span class="string" id="6700634">&#34;unix&#34;</span><span class="op" id="6700640">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6700645">os</span><span class="op" id="6700647">.</span><span class="ident" id="6700648">Remove</span><span class="op" id="6700654">(</span><span class="ident" id="6700655">tt</span><span class="op" id="6700657">.</span><span class="ident" id="6700658">saddr</span><span class="op" id="6700663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6700668">os</span><span class="op" id="6700670">.</span><span class="ident" id="6700671">Remove</span><span class="op" id="6700677">(</span><span class="ident" id="6700678">tt</span><span class="op" id="6700680">.</span><span class="ident" id="6700681">caddr</span><span class="op" id="6700686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6700690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6700695">go</span>&nbsp;<span class="ident" id="6700698">runStreamConnServer</span><span class="op" id="6700717">(</span><span class="ident" id="6700718">t</span><span class="op" id="6700719">,</span>&nbsp;<span class="ident" id="6700721">tt</span><span class="op" id="6700723">.</span><span class="ident" id="6700724">snet</span><span class="op" id="6700728">,</span>&nbsp;<span class="ident" id="6700730">tt</span><span class="op" id="6700732">.</span><span class="ident" id="6700733">saddr</span><span class="op" id="6700738">,</span>&nbsp;<span class="ident" id="6700740">listening</span><span class="op" id="6700749">,</span>&nbsp;<span class="ident" id="6700751">done</span><span class="op" id="6700755">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6700759">taddr</span>&nbsp;<span class="op" id="6700765">:=</span>&nbsp;<span class="op" id="6700768">&lt;-</span><span class="ident" id="6700770">listening</span>&nbsp;<span class="comment" id="6700780">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6700811">switch</span>&nbsp;<span class="ident" id="6700818">tt</span><span class="op" id="6700820">.</span><span class="ident" id="6700821">cnet</span>&nbsp;<span class="op" id="6700826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6700830">case</span>&nbsp;<span class="string" id="6700835">&#34;tcp&#34;</span><span class="op" id="6700840">,</span>&nbsp;<span class="string" id="6700842">&#34;tcp4&#34;</span><span class="op" id="6700848">,</span>&nbsp;<span class="string" id="6700850">&#34;tcp6&#34;</span><span class="op" id="6700856">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6700861">_</span><span class="op" id="6700862">,</span>&nbsp;<span class="ident" id="6700864">port</span><span class="op" id="6700868">,</span>&nbsp;<span class="ident" id="6700870">err</span>&nbsp;<span class="op" id="6700874">:=</span>&nbsp;<span class="ident" id="6700877">SplitHostPort</span><span class="op" id="6700890">(</span><span class="ident" id="6700891">taddr</span><span class="op" id="6700896">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6700901">if</span>&nbsp;<span class="ident" id="6700904">err</span>&nbsp;<span class="op" id="6700908">!=</span>&nbsp;<span class="ident" id="6700911">nil</span>&nbsp;<span class="op" id="6700915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6700921">t</span><span class="op" id="6700922">.</span><span class="ident" id="6700923">Fatalf</span><span class="op" id="6700929">(</span><span class="string" id="6700930">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6700960">,</span>&nbsp;<span class="ident" id="6700962">taddr</span><span class="op" id="6700967">,</span>&nbsp;<span class="ident" id="6700969">err</span><span class="op" id="6700972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6700977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6700982">taddr</span>&nbsp;<span class="op" id="6700988">=</span>&nbsp;<span class="ident" id="6700990">tt</span><span class="op" id="6700992">.</span><span class="ident" id="6700993">caddr</span>&nbsp;<span class="op" id="6700999">+</span>&nbsp;<span class="string" id="6701001">&#34;:&#34;</span>&nbsp;<span class="op" id="6701005">+</span>&nbsp;<span class="ident" id="6701007">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6701014">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701019">runStreamConnClient</span><span class="op" id="6701038">(</span><span class="ident" id="6701039">t</span><span class="op" id="6701040">,</span>&nbsp;<span class="ident" id="6701042">tt</span><span class="op" id="6701044">.</span><span class="ident" id="6701045">cnet</span><span class="op" id="6701049">,</span>&nbsp;<span class="ident" id="6701051">taddr</span><span class="op" id="6701056">,</span>&nbsp;<span class="ident" id="6701058">tt</span><span class="op" id="6701060">.</span><span class="ident" id="6701061">empty</span><span class="op" id="6701066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6701070">&lt;-</span><span class="ident" id="6701072">done</span>&nbsp;<span class="comment" id="6701077">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6701108">switch</span>&nbsp;<span class="ident" id="6701115">tt</span><span class="op" id="6701117">.</span><span class="ident" id="6701118">snet</span>&nbsp;<span class="op" id="6701123">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6701127">case</span>&nbsp;<span class="string" id="6701132">&#34;unix&#34;</span><span class="op" id="6701138">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701143">os</span><span class="op" id="6701145">.</span><span class="ident" id="6701146">Remove</span><span class="op" id="6701152">(</span><span class="ident" id="6701153">tt</span><span class="op" id="6701155">.</span><span class="ident" id="6701156">saddr</span><span class="op" id="6701161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701166">os</span><span class="op" id="6701168">.</span><span class="ident" id="6701169">Remove</span><span class="op" id="6701175">(</span><span class="ident" id="6701176">tt</span><span class="op" id="6701178">.</span><span class="ident" id="6701179">caddr</span><span class="op" id="6701184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6701188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6701191">}</span><br>
<span class="lineno">130</span><span class="op" id="6701193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6701196">var</span>&nbsp;<span class="ident" id="6701200">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6701225">=</span>&nbsp;<span class="op" id="6701227">[</span><span class="op" id="6701228">]</span><span class="keyword" id="6701229">struct</span>&nbsp;<span class="op" id="6701236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701239">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6701249">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701257">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6701267">string</span>&nbsp;<span class="comment" id="6701274">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701293">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6701303">string</span>&nbsp;<span class="comment" id="6701310">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701329">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6701339">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6701346">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701371">linuxOnly</span>&nbsp;<span class="builtintype" id="6701381">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6701388">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6701442">}</span><span class="op" id="6701443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6701446">{</span><span class="ident" id="6701447">net</span><span class="op" id="6701450">:</span>&nbsp;<span class="string" id="6701452">&#34;unixpacket&#34;</span><span class="op" id="6701464">,</span>&nbsp;<span class="ident" id="6701466">saddr</span><span class="op" id="6701471">:</span>&nbsp;<span class="ident" id="6701473">testUnixAddr</span><span class="op" id="6701485">(</span><span class="op" id="6701486">)</span><span class="op" id="6701487">,</span>&nbsp;<span class="ident" id="6701489">caddr</span><span class="op" id="6701494">:</span>&nbsp;<span class="ident" id="6701496">testUnixAddr</span><span class="op" id="6701508">(</span><span class="op" id="6701509">)</span><span class="op" id="6701510">}</span><span class="op" id="6701511">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6701514">{</span><span class="ident" id="6701515">net</span><span class="op" id="6701518">:</span>&nbsp;<span class="string" id="6701520">&#34;unixpacket&#34;</span><span class="op" id="6701532">,</span>&nbsp;<span class="ident" id="6701534">saddr</span><span class="op" id="6701539">:</span>&nbsp;<span class="string" id="6701541">&#34;@gotest4/net&#34;</span><span class="op" id="6701555">,</span>&nbsp;<span class="ident" id="6701557">caddr</span><span class="op" id="6701562">:</span>&nbsp;<span class="string" id="6701564">&#34;@gotest4/net.local&#34;</span><span class="op" id="6701584">,</span>&nbsp;<span class="ident" id="6701586">linuxOnly</span><span class="op" id="6701595">:</span>&nbsp;<span class="builtintype" id="6701597">true</span><span class="op" id="6701601">}</span><span class="op" id="6701602">,</span><br>
<span class="lineno"></span><span class="op" id="6701604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6701607">func</span>&nbsp;<span class="ident" id="6701612">TestSeqpacketConnServer</span><span class="op" id="6701635">(</span><span class="ident" id="6701636">t</span>&nbsp;<span class="op" id="6701638">*</span><span class="ident" id="6701639">testing</span><span class="op" id="6701646">.</span><span class="ident" id="6701647">T</span><span class="op" id="6701648">)</span>&nbsp;<span class="op" id="6701650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6701653">switch</span>&nbsp;<span class="ident" id="6701660">runtime</span><span class="op" id="6701667">.</span><span class="ident" id="6701668">GOOS</span>&nbsp;<span class="op" id="6701673">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6701676">case</span>&nbsp;<span class="string" id="6701681">&#34;darwin&#34;</span><span class="op" id="6701689">,</span>&nbsp;<span class="string" id="6701691">&#34;nacl&#34;</span><span class="op" id="6701697">,</span>&nbsp;<span class="string" id="6701699">&#34;openbsd&#34;</span><span class="op" id="6701708">,</span>&nbsp;<span class="string" id="6701710">&#34;plan9&#34;</span><span class="op" id="6701717">,</span>&nbsp;<span class="string" id="6701719">&#34;windows&#34;</span><span class="op" id="6701728">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6701732">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6701745">case</span>&nbsp;<span class="string" id="6701750">&#34;freebsd&#34;</span><span class="op" id="6701759">:</span>&nbsp;<span class="comment" id="6701761">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701803">t</span><span class="op" id="6701804">.</span><span class="ident" id="6701805">Skipf</span><span class="op" id="6701810">(</span><span class="string" id="6701811">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6701832">,</span>&nbsp;<span class="ident" id="6701834">runtime</span><span class="op" id="6701841">.</span><span class="ident" id="6701842">GOOS</span><span class="op" id="6701846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6701849">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6701853">for</span>&nbsp;<span class="ident" id="6701857">_</span><span class="op" id="6701858">,</span>&nbsp;<span class="ident" id="6701860">tt</span>&nbsp;<span class="op" id="6701863">:=</span>&nbsp;<span class="keyword" id="6701866">range</span>&nbsp;<span class="ident" id="6701872">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6701897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6701901">if</span>&nbsp;<span class="ident" id="6701904">runtime</span><span class="op" id="6701911">.</span><span class="ident" id="6701912">GOOS</span>&nbsp;<span class="op" id="6701917">!=</span>&nbsp;<span class="string" id="6701920">&#34;linux&#34;</span>&nbsp;<span class="op" id="6701928">&amp;&amp;</span>&nbsp;<span class="ident" id="6701931">tt</span><span class="op" id="6701933">.</span><span class="ident" id="6701934">linuxOnly</span>&nbsp;<span class="op" id="6701944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6701949">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6701960">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701964">listening</span>&nbsp;<span class="op" id="6701974">:=</span>&nbsp;<span class="builtinfunc" id="6701977">make</span><span class="op" id="6701981">(</span><span class="keyword" id="6701982">chan</span>&nbsp;<span class="builtintype" id="6701987">string</span><span class="op" id="6701993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6701997">done</span>&nbsp;<span class="op" id="6702002">:=</span>&nbsp;<span class="builtinfunc" id="6702005">make</span><span class="op" id="6702009">(</span><span class="keyword" id="6702010">chan</span>&nbsp;<span class="builtintype" id="6702015">int</span><span class="op" id="6702018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702022">switch</span>&nbsp;<span class="ident" id="6702029">tt</span><span class="op" id="6702031">.</span><span class="ident" id="6702032">net</span>&nbsp;<span class="op" id="6702036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702040">case</span>&nbsp;<span class="string" id="6702045">&#34;unixpacket&#34;</span><span class="op" id="6702057">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702062">os</span><span class="op" id="6702064">.</span><span class="ident" id="6702065">Remove</span><span class="op" id="6702071">(</span><span class="ident" id="6702072">tt</span><span class="op" id="6702074">.</span><span class="ident" id="6702075">saddr</span><span class="op" id="6702080">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702085">os</span><span class="op" id="6702087">.</span><span class="ident" id="6702088">Remove</span><span class="op" id="6702094">(</span><span class="ident" id="6702095">tt</span><span class="op" id="6702097">.</span><span class="ident" id="6702098">caddr</span><span class="op" id="6702103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6702107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702112">go</span>&nbsp;<span class="ident" id="6702115">runStreamConnServer</span><span class="op" id="6702134">(</span><span class="ident" id="6702135">t</span><span class="op" id="6702136">,</span>&nbsp;<span class="ident" id="6702138">tt</span><span class="op" id="6702140">.</span><span class="ident" id="6702141">net</span><span class="op" id="6702144">,</span>&nbsp;<span class="ident" id="6702146">tt</span><span class="op" id="6702148">.</span><span class="ident" id="6702149">saddr</span><span class="op" id="6702154">,</span>&nbsp;<span class="ident" id="6702156">listening</span><span class="op" id="6702165">,</span>&nbsp;<span class="ident" id="6702167">done</span><span class="op" id="6702171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702175">taddr</span>&nbsp;<span class="op" id="6702181">:=</span>&nbsp;<span class="op" id="6702184">&lt;-</span><span class="ident" id="6702186">listening</span>&nbsp;<span class="comment" id="6702196">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702227">runStreamConnClient</span><span class="op" id="6702246">(</span><span class="ident" id="6702247">t</span><span class="op" id="6702248">,</span>&nbsp;<span class="ident" id="6702250">tt</span><span class="op" id="6702252">.</span><span class="ident" id="6702253">net</span><span class="op" id="6702256">,</span>&nbsp;<span class="ident" id="6702258">taddr</span><span class="op" id="6702263">,</span>&nbsp;<span class="ident" id="6702265">tt</span><span class="op" id="6702267">.</span><span class="ident" id="6702268">empty</span><span class="op" id="6702273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6702277">&lt;-</span><span class="ident" id="6702279">done</span>&nbsp;<span class="comment" id="6702284">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702315">switch</span>&nbsp;<span class="ident" id="6702322">tt</span><span class="op" id="6702324">.</span><span class="ident" id="6702325">net</span>&nbsp;<span class="op" id="6702329">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702333">case</span>&nbsp;<span class="string" id="6702338">&#34;unixpacket&#34;</span><span class="op" id="6702350">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702355">os</span><span class="op" id="6702357">.</span><span class="ident" id="6702358">Remove</span><span class="op" id="6702364">(</span><span class="ident" id="6702365">tt</span><span class="op" id="6702367">.</span><span class="ident" id="6702368">saddr</span><span class="op" id="6702373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702378">os</span><span class="op" id="6702380">.</span><span class="ident" id="6702381">Remove</span><span class="op" id="6702387">(</span><span class="ident" id="6702388">tt</span><span class="op" id="6702390">.</span><span class="ident" id="6702391">caddr</span><span class="op" id="6702396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6702400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6702403">}</span><br>
<span class="lineno">175</span><span class="op" id="6702405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6702408">func</span>&nbsp;<span class="ident" id="6702413">runStreamConnServer</span><span class="op" id="6702432">(</span><span class="ident" id="6702433">t</span>&nbsp;<span class="op" id="6702435">*</span><span class="ident" id="6702436">testing</span><span class="op" id="6702443">.</span><span class="ident" id="6702444">T</span><span class="op" id="6702445">,</span>&nbsp;<span class="ident" id="6702447">net</span><span class="op" id="6702450">,</span>&nbsp;<span class="ident" id="6702452">laddr</span>&nbsp;<span class="builtintype" id="6702458">string</span><span class="op" id="6702464">,</span>&nbsp;<span class="ident" id="6702466">listening</span>&nbsp;<span class="keyword" id="6702476">chan</span><span class="op" id="6702480">&lt;-</span>&nbsp;<span class="builtintype" id="6702483">string</span><span class="op" id="6702489">,</span>&nbsp;<span class="ident" id="6702491">done</span>&nbsp;<span class="keyword" id="6702496">chan</span><span class="op" id="6702500">&lt;-</span>&nbsp;<span class="builtintype" id="6702503">int</span><span class="op" id="6702506">)</span>&nbsp;<span class="op" id="6702508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702511">defer</span>&nbsp;<span class="builtinfunc" id="6702517">close</span><span class="op" id="6702522">(</span><span class="ident" id="6702523">done</span><span class="op" id="6702527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702530">l</span><span class="op" id="6702531">,</span>&nbsp;<span class="ident" id="6702533">err</span>&nbsp;<span class="op" id="6702537">:=</span>&nbsp;<span class="ident" id="6702540">Listen</span><span class="op" id="6702546">(</span><span class="ident" id="6702547">net</span><span class="op" id="6702550">,</span>&nbsp;<span class="ident" id="6702552">laddr</span><span class="op" id="6702557">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702560">if</span>&nbsp;<span class="ident" id="6702563">err</span>&nbsp;<span class="op" id="6702567">!=</span>&nbsp;<span class="ident" id="6702570">nil</span>&nbsp;<span class="op" id="6702574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702578">t</span><span class="op" id="6702579">.</span><span class="ident" id="6702580">Errorf</span><span class="op" id="6702586">(</span><span class="string" id="6702587">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6702614">,</span>&nbsp;<span class="ident" id="6702616">net</span><span class="op" id="6702619">,</span>&nbsp;<span class="ident" id="6702621">laddr</span><span class="op" id="6702626">,</span>&nbsp;<span class="ident" id="6702628">err</span><span class="op" id="6702631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702635">listening</span>&nbsp;<span class="op" id="6702645">&lt;-</span>&nbsp;<span class="string" id="6702648">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702658">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6702666">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702669">defer</span>&nbsp;<span class="ident" id="6702675">l</span><span class="op" id="6702676">.</span><span class="ident" id="6702677">Close</span><span class="op" id="6702682">(</span><span class="op" id="6702683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702686">listening</span>&nbsp;<span class="op" id="6702696">&lt;-</span>&nbsp;<span class="ident" id="6702699">l</span><span class="op" id="6702700">.</span><span class="ident" id="6702701">Addr</span><span class="op" id="6702705">(</span><span class="op" id="6702706">)</span><span class="op" id="6702707">.</span><span class="ident" id="6702708">String</span><span class="op" id="6702714">(</span><span class="op" id="6702715">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702719">echo</span>&nbsp;<span class="op" id="6702724">:=</span>&nbsp;<span class="keyword" id="6702727">func</span><span class="op" id="6702731">(</span><span class="ident" id="6702732">rw</span>&nbsp;<span class="ident" id="6702735">io</span><span class="op" id="6702737">.</span><span class="ident" id="6702738">ReadWriter</span><span class="op" id="6702748">,</span>&nbsp;<span class="ident" id="6702750">done</span>&nbsp;<span class="keyword" id="6702755">chan</span><span class="op" id="6702759">&lt;-</span>&nbsp;<span class="builtintype" id="6702762">int</span><span class="op" id="6702765">)</span>&nbsp;<span class="op" id="6702767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702771">buf</span>&nbsp;<span class="op" id="6702775">:=</span>&nbsp;<span class="builtinfunc" id="6702778">make</span><span class="op" id="6702782">(</span><span class="op" id="6702783">[</span><span class="op" id="6702784">]</span><span class="builtintype" id="6702785">byte</span><span class="op" id="6702789">,</span>&nbsp;<span class="num" id="6702791">1024</span><span class="op" id="6702795">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702799">for</span>&nbsp;<span class="op" id="6702803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702808">n</span><span class="op" id="6702809">,</span>&nbsp;<span class="ident" id="6702811">err</span>&nbsp;<span class="op" id="6702815">:=</span>&nbsp;<span class="ident" id="6702818">rw</span><span class="op" id="6702820">.</span><span class="ident" id="6702821">Read</span><span class="op" id="6702825">(</span><span class="ident" id="6702826">buf</span><span class="op" id="6702829">[</span><span class="num" id="6702830">0</span><span class="op" id="6702831">:</span><span class="op" id="6702832">]</span><span class="op" id="6702833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702838">if</span>&nbsp;<span class="ident" id="6702841">err</span>&nbsp;<span class="op" id="6702845">!=</span>&nbsp;<span class="ident" id="6702848">nil</span>&nbsp;<span class="op" id="6702852">||</span>&nbsp;<span class="ident" id="6702855">n</span>&nbsp;<span class="op" id="6702857">==</span>&nbsp;<span class="num" id="6702860">0</span>&nbsp;<span class="op" id="6702862">||</span>&nbsp;<span class="builtintype" id="6702865">string</span><span class="op" id="6702871">(</span><span class="ident" id="6702872">buf</span><span class="op" id="6702875">[</span><span class="op" id="6702876">:</span><span class="ident" id="6702877">n</span><span class="op" id="6702878">]</span><span class="op" id="6702879">)</span>&nbsp;<span class="op" id="6702881">==</span>&nbsp;<span class="string" id="6702884">&#34;END&#34;</span>&nbsp;<span class="op" id="6702890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702896">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6702905">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702910">rw</span><span class="op" id="6702912">.</span><span class="ident" id="6702913">Write</span><span class="op" id="6702918">(</span><span class="ident" id="6702919">buf</span><span class="op" id="6702922">[</span><span class="num" id="6702923">0</span><span class="op" id="6702924">:</span><span class="ident" id="6702925">n</span><span class="op" id="6702926">]</span><span class="op" id="6702927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6702931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6702935">close</span><span class="op" id="6702940">(</span><span class="ident" id="6702941">done</span><span class="op" id="6702945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6702948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="6702951">run</span><span class="op" id="6702954">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702957">for</span>&nbsp;<span class="op" id="6702961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6702965">c</span><span class="op" id="6702966">,</span>&nbsp;<span class="ident" id="6702968">err</span>&nbsp;<span class="op" id="6702972">:=</span>&nbsp;<span class="ident" id="6702975">l</span><span class="op" id="6702976">.</span><span class="ident" id="6702977">Accept</span><span class="op" id="6702983">(</span><span class="op" id="6702984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6702988">if</span>&nbsp;<span class="ident" id="6702991">err</span>&nbsp;<span class="op" id="6702995">!=</span>&nbsp;<span class="ident" id="6702998">nil</span>&nbsp;<span class="op" id="6703002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703007">t</span><span class="op" id="6703008">.</span><span class="ident" id="6703009">Logf</span><span class="op" id="6703013">(</span><span class="string" id="6703014">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6703033">,</span>&nbsp;<span class="ident" id="6703035">err</span><span class="op" id="6703038">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703043">continue</span>&nbsp;<span class="ident" id="6703052">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6703058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703062">echodone</span>&nbsp;<span class="op" id="6703071">:=</span>&nbsp;<span class="builtinfunc" id="6703074">make</span><span class="op" id="6703078">(</span><span class="keyword" id="6703079">chan</span>&nbsp;<span class="builtintype" id="6703084">int</span><span class="op" id="6703087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703091">go</span>&nbsp;<span class="ident" id="6703094">echo</span><span class="op" id="6703098">(</span><span class="ident" id="6703099">c</span><span class="op" id="6703100">,</span>&nbsp;<span class="ident" id="6703102">echodone</span><span class="op" id="6703110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6703114">&lt;-</span><span class="ident" id="6703116">echodone</span>&nbsp;<span class="comment" id="6703125">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703153">c</span><span class="op" id="6703154">.</span><span class="ident" id="6703155">Close</span><span class="op" id="6703160">(</span><span class="op" id="6703161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703165">break</span>&nbsp;<span class="ident" id="6703171">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6703176">}</span><br>
<span class="lineno"></span><span class="op" id="6703178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="6703181">func</span>&nbsp;<span class="ident" id="6703186">runStreamConnClient</span><span class="op" id="6703205">(</span><span class="ident" id="6703206">t</span>&nbsp;<span class="op" id="6703208">*</span><span class="ident" id="6703209">testing</span><span class="op" id="6703216">.</span><span class="ident" id="6703217">T</span><span class="op" id="6703218">,</span>&nbsp;<span class="ident" id="6703220">net</span><span class="op" id="6703223">,</span>&nbsp;<span class="ident" id="6703225">taddr</span>&nbsp;<span class="builtintype" id="6703231">string</span><span class="op" id="6703237">,</span>&nbsp;<span class="ident" id="6703239">isEmpty</span>&nbsp;<span class="builtintype" id="6703247">bool</span><span class="op" id="6703251">)</span>&nbsp;<span class="op" id="6703253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703256">c</span><span class="op" id="6703257">,</span>&nbsp;<span class="ident" id="6703259">err</span>&nbsp;<span class="op" id="6703263">:=</span>&nbsp;<span class="ident" id="6703266">Dial</span><span class="op" id="6703270">(</span><span class="ident" id="6703271">net</span><span class="op" id="6703274">,</span>&nbsp;<span class="ident" id="6703276">taddr</span><span class="op" id="6703281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703284">if</span>&nbsp;<span class="ident" id="6703287">err</span>&nbsp;<span class="op" id="6703291">!=</span>&nbsp;<span class="ident" id="6703294">nil</span>&nbsp;<span class="op" id="6703298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703302">t</span><span class="op" id="6703303">.</span><span class="ident" id="6703304">Fatalf</span><span class="op" id="6703310">(</span><span class="string" id="6703311">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6703336">,</span>&nbsp;<span class="ident" id="6703338">net</span><span class="op" id="6703341">,</span>&nbsp;<span class="ident" id="6703343">taddr</span><span class="op" id="6703348">,</span>&nbsp;<span class="ident" id="6703350">err</span><span class="op" id="6703353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6703356">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703359">defer</span>&nbsp;<span class="ident" id="6703365">c</span><span class="op" id="6703366">.</span><span class="ident" id="6703367">Close</span><span class="op" id="6703372">(</span><span class="op" id="6703373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703376">c</span><span class="op" id="6703377">.</span><span class="ident" id="6703378">SetReadDeadline</span><span class="op" id="6703393">(</span><span class="ident" id="6703394">time</span><span class="op" id="6703398">.</span><span class="ident" id="6703399">Now</span><span class="op" id="6703402">(</span><span class="op" id="6703403">)</span><span class="op" id="6703404">.</span><span class="ident" id="6703405">Add</span><span class="op" id="6703408">(</span><span class="num" id="6703409">1</span>&nbsp;<span class="op" id="6703411">*</span>&nbsp;<span class="ident" id="6703413">time</span><span class="op" id="6703417">.</span><span class="ident" id="6703418">Second</span><span class="op" id="6703424">)</span><span class="op" id="6703425">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703429">var</span>&nbsp;<span class="ident" id="6703433">wb</span>&nbsp;<span class="op" id="6703436">[</span><span class="op" id="6703437">]</span><span class="builtintype" id="6703438">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703444">if</span>&nbsp;<span class="op" id="6703447">!</span><span class="ident" id="6703448">isEmpty</span>&nbsp;<span class="op" id="6703456">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703460">wb</span>&nbsp;<span class="op" id="6703463">=</span>&nbsp;<span class="op" id="6703465">[</span><span class="op" id="6703466">]</span><span class="builtintype" id="6703467">byte</span><span class="op" id="6703471">(</span><span class="string" id="6703472">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6703500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6703503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703506">if</span>&nbsp;<span class="ident" id="6703509">n</span><span class="op" id="6703510">,</span>&nbsp;<span class="ident" id="6703512">err</span>&nbsp;<span class="op" id="6703516">:=</span>&nbsp;<span class="ident" id="6703519">c</span><span class="op" id="6703520">.</span><span class="ident" id="6703521">Write</span><span class="op" id="6703526">(</span><span class="ident" id="6703527">wb</span><span class="op" id="6703529">)</span><span class="op" id="6703530">;</span>&nbsp;<span class="ident" id="6703532">err</span>&nbsp;<span class="op" id="6703536">!=</span>&nbsp;<span class="ident" id="6703539">nil</span>&nbsp;<span class="op" id="6703543">||</span>&nbsp;<span class="ident" id="6703546">n</span>&nbsp;<span class="op" id="6703548">!=</span>&nbsp;<span class="builtinfunc" id="6703551">len</span><span class="op" id="6703554">(</span><span class="ident" id="6703555">wb</span><span class="op" id="6703557">)</span>&nbsp;<span class="op" id="6703559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703563">t</span><span class="op" id="6703564">.</span><span class="ident" id="6703565">Fatalf</span><span class="op" id="6703571">(</span><span class="string" id="6703572">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6703610">,</span>&nbsp;<span class="ident" id="6703612">n</span><span class="op" id="6703613">,</span>&nbsp;<span class="ident" id="6703615">err</span><span class="op" id="6703618">,</span>&nbsp;<span class="builtinfunc" id="6703620">len</span><span class="op" id="6703623">(</span><span class="ident" id="6703624">wb</span><span class="op" id="6703626">)</span><span class="op" id="6703627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6703630">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703634">rb</span>&nbsp;<span class="op" id="6703637">:=</span>&nbsp;<span class="builtinfunc" id="6703640">make</span><span class="op" id="6703644">(</span><span class="op" id="6703645">[</span><span class="op" id="6703646">]</span><span class="builtintype" id="6703647">byte</span><span class="op" id="6703651">,</span>&nbsp;<span class="num" id="6703653">1024</span><span class="op" id="6703657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703660">if</span>&nbsp;<span class="ident" id="6703663">n</span><span class="op" id="6703664">,</span>&nbsp;<span class="ident" id="6703666">err</span>&nbsp;<span class="op" id="6703670">:=</span>&nbsp;<span class="ident" id="6703673">c</span><span class="op" id="6703674">.</span><span class="ident" id="6703675">Read</span><span class="op" id="6703679">(</span><span class="ident" id="6703680">rb</span><span class="op" id="6703682">[</span><span class="num" id="6703683">0</span><span class="op" id="6703684">:</span><span class="op" id="6703685">]</span><span class="op" id="6703686">)</span><span class="op" id="6703687">;</span>&nbsp;<span class="ident" id="6703689">err</span>&nbsp;<span class="op" id="6703693">!=</span>&nbsp;<span class="ident" id="6703696">nil</span>&nbsp;<span class="op" id="6703700">||</span>&nbsp;<span class="ident" id="6703703">n</span>&nbsp;<span class="op" id="6703705">!=</span>&nbsp;<span class="builtinfunc" id="6703708">len</span><span class="op" id="6703711">(</span><span class="ident" id="6703712">wb</span><span class="op" id="6703714">)</span>&nbsp;<span class="op" id="6703716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703720">t</span><span class="op" id="6703721">.</span><span class="ident" id="6703722">Fatalf</span><span class="op" id="6703728">(</span><span class="string" id="6703729">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6703766">,</span>&nbsp;<span class="ident" id="6703768">n</span><span class="op" id="6703769">,</span>&nbsp;<span class="ident" id="6703771">err</span><span class="op" id="6703774">,</span>&nbsp;<span class="builtinfunc" id="6703776">len</span><span class="op" id="6703779">(</span><span class="ident" id="6703780">wb</span><span class="op" id="6703782">)</span><span class="op" id="6703783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6703786">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6703790">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6703831">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703883">switch</span>&nbsp;<span class="ident" id="6703890">net</span>&nbsp;<span class="op" id="6703894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6703897">case</span>&nbsp;<span class="string" id="6703902">&#34;unixpacket&#34;</span><span class="op" id="6703914">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6703918">c</span><span class="op" id="6703919">.</span><span class="ident" id="6703920">Write</span><span class="op" id="6703925">(</span><span class="op" id="6703926">[</span><span class="op" id="6703927">]</span><span class="builtintype" id="6703928">byte</span><span class="op" id="6703932">(</span><span class="string" id="6703933">&#34;END&#34;</span><span class="op" id="6703938">)</span><span class="op" id="6703939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6703942">}</span><br>
<span class="lineno"></span><span class="op" id="6703944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6703947">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="6703990">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="6704041">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="6704093">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="6704123">var</span>&nbsp;<span class="ident" id="6704127">testDatagram</span>&nbsp;<span class="op" id="6704140">=</span>&nbsp;<span class="ident" id="6704142">flag</span><span class="op" id="6704146">.</span><span class="ident" id="6704147">Bool</span><span class="op" id="6704151">(</span><span class="string" id="6704152">&#34;datagram&#34;</span><span class="op" id="6704162">,</span>&nbsp;<span class="builtintype" id="6704164">false</span><span class="op" id="6704169">,</span>&nbsp;<span class="string" id="6704171">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="6704205">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="6704208">var</span>&nbsp;<span class="ident" id="6704212">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6704242">=</span>&nbsp;<span class="op" id="6704244">[</span><span class="op" id="6704245">]</span><span class="keyword" id="6704246">struct</span>&nbsp;<span class="op" id="6704253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6704256">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6704266">string</span>&nbsp;<span class="comment" id="6704273">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6704289">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6704299">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6704307">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6704317">string</span>&nbsp;<span class="comment" id="6704324">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6704340">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6704350">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6704358">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6704368">bool</span>&nbsp;<span class="comment" id="6704373">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6704414">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6704424">bool</span>&nbsp;<span class="comment" id="6704429">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6704475">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6704485">bool</span>&nbsp;<span class="comment" id="6704490">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6704521">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6704531">bool</span>&nbsp;<span class="comment" id="6704536">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6704561">linuxOnly</span>&nbsp;<span class="builtintype" id="6704571">bool</span>&nbsp;<span class="comment" id="6704576">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="6704630">}</span><span class="op" id="6704631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6704634">{</span><span class="ident" id="6704635">snet</span><span class="op" id="6704639">:</span>&nbsp;<span class="string" id="6704641">&#34;udp&#34;</span><span class="op" id="6704646">,</span>&nbsp;<span class="ident" id="6704648">saddr</span><span class="op" id="6704653">:</span>&nbsp;<span class="string" id="6704655">&#34;&#34;</span><span class="op" id="6704657">,</span>&nbsp;<span class="ident" id="6704659">cnet</span><span class="op" id="6704663">:</span>&nbsp;<span class="string" id="6704665">&#34;udp&#34;</span><span class="op" id="6704670">,</span>&nbsp;<span class="ident" id="6704672">caddr</span><span class="op" id="6704677">:</span>&nbsp;<span class="string" id="6704679">&#34;127.0.0.1&#34;</span><span class="op" id="6704690">}</span><span class="op" id="6704691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6704694">{</span><span class="ident" id="6704695">snet</span><span class="op" id="6704699">:</span>&nbsp;<span class="string" id="6704701">&#34;udp&#34;</span><span class="op" id="6704706">,</span>&nbsp;<span class="ident" id="6704708">saddr</span><span class="op" id="6704713">:</span>&nbsp;<span class="string" id="6704715">&#34;0.0.0.0&#34;</span><span class="op" id="6704724">,</span>&nbsp;<span class="ident" id="6704726">cnet</span><span class="op" id="6704730">:</span>&nbsp;<span class="string" id="6704732">&#34;udp&#34;</span><span class="op" id="6704737">,</span>&nbsp;<span class="ident" id="6704739">caddr</span><span class="op" id="6704744">:</span>&nbsp;<span class="string" id="6704746">&#34;127.0.0.1&#34;</span><span class="op" id="6704757">}</span><span class="op" id="6704758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6704761">{</span><span class="ident" id="6704762">snet</span><span class="op" id="6704766">:</span>&nbsp;<span class="string" id="6704768">&#34;udp&#34;</span><span class="op" id="6704773">,</span>&nbsp;<span class="ident" id="6704775">saddr</span><span class="op" id="6704780">:</span>&nbsp;<span class="string" id="6704782">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6704800">,</span>&nbsp;<span class="ident" id="6704802">cnet</span><span class="op" id="6704806">:</span>&nbsp;<span class="string" id="6704808">&#34;udp&#34;</span><span class="op" id="6704813">,</span>&nbsp;<span class="ident" id="6704815">caddr</span><span class="op" id="6704820">:</span>&nbsp;<span class="string" id="6704822">&#34;127.0.0.1&#34;</span><span class="op" id="6704833">}</span><span class="op" id="6704834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6704837">{</span><span class="ident" id="6704838">snet</span><span class="op" id="6704842">:</span>&nbsp;<span class="string" id="6704844">&#34;udp&#34;</span><span class="op" id="6704849">,</span>&nbsp;<span class="ident" id="6704851">saddr</span><span class="op" id="6704856">:</span>&nbsp;<span class="string" id="6704858">&#34;[::]&#34;</span><span class="op" id="6704864">,</span>&nbsp;<span class="ident" id="6704866">cnet</span><span class="op" id="6704870">:</span>&nbsp;<span class="string" id="6704872">&#34;udp&#34;</span><span class="op" id="6704877">,</span>&nbsp;<span class="ident" id="6704879">caddr</span><span class="op" id="6704884">:</span>&nbsp;<span class="string" id="6704886">&#34;[::1]&#34;</span><span class="op" id="6704893">,</span>&nbsp;<span class="ident" id="6704895">ipv6</span><span class="op" id="6704899">:</span>&nbsp;<span class="builtintype" id="6704901">true</span><span class="op" id="6704905">}</span><span class="op" id="6704906">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6704910">{</span><span class="ident" id="6704911">snet</span><span class="op" id="6704915">:</span>&nbsp;<span class="string" id="6704917">&#34;udp&#34;</span><span class="op" id="6704922">,</span>&nbsp;<span class="ident" id="6704924">saddr</span><span class="op" id="6704929">:</span>&nbsp;<span class="string" id="6704931">&#34;&#34;</span><span class="op" id="6704933">,</span>&nbsp;<span class="ident" id="6704935">cnet</span><span class="op" id="6704939">:</span>&nbsp;<span class="string" id="6704941">&#34;udp&#34;</span><span class="op" id="6704946">,</span>&nbsp;<span class="ident" id="6704948">caddr</span><span class="op" id="6704953">:</span>&nbsp;<span class="string" id="6704955">&#34;[::1]&#34;</span><span class="op" id="6704962">,</span>&nbsp;<span class="ident" id="6704964">ipv4map</span><span class="op" id="6704971">:</span>&nbsp;<span class="builtintype" id="6704973">true</span><span class="op" id="6704977">}</span><span class="op" id="6704978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6704981">{</span><span class="ident" id="6704982">snet</span><span class="op" id="6704986">:</span>&nbsp;<span class="string" id="6704988">&#34;udp&#34;</span><span class="op" id="6704993">,</span>&nbsp;<span class="ident" id="6704995">saddr</span><span class="op" id="6705000">:</span>&nbsp;<span class="string" id="6705002">&#34;0.0.0.0&#34;</span><span class="op" id="6705011">,</span>&nbsp;<span class="ident" id="6705013">cnet</span><span class="op" id="6705017">:</span>&nbsp;<span class="string" id="6705019">&#34;udp&#34;</span><span class="op" id="6705024">,</span>&nbsp;<span class="ident" id="6705026">caddr</span><span class="op" id="6705031">:</span>&nbsp;<span class="string" id="6705033">&#34;[::1]&#34;</span><span class="op" id="6705040">,</span>&nbsp;<span class="ident" id="6705042">ipv4map</span><span class="op" id="6705049">:</span>&nbsp;<span class="builtintype" id="6705051">true</span><span class="op" id="6705055">}</span><span class="op" id="6705056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705059">{</span><span class="ident" id="6705060">snet</span><span class="op" id="6705064">:</span>&nbsp;<span class="string" id="6705066">&#34;udp&#34;</span><span class="op" id="6705071">,</span>&nbsp;<span class="ident" id="6705073">saddr</span><span class="op" id="6705078">:</span>&nbsp;<span class="string" id="6705080">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6705098">,</span>&nbsp;<span class="ident" id="6705100">cnet</span><span class="op" id="6705104">:</span>&nbsp;<span class="string" id="6705106">&#34;udp&#34;</span><span class="op" id="6705111">,</span>&nbsp;<span class="ident" id="6705113">caddr</span><span class="op" id="6705118">:</span>&nbsp;<span class="string" id="6705120">&#34;[::1]&#34;</span><span class="op" id="6705127">,</span>&nbsp;<span class="ident" id="6705129">ipv4map</span><span class="op" id="6705136">:</span>&nbsp;<span class="builtintype" id="6705138">true</span><span class="op" id="6705142">}</span><span class="op" id="6705143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705146">{</span><span class="ident" id="6705147">snet</span><span class="op" id="6705151">:</span>&nbsp;<span class="string" id="6705153">&#34;udp&#34;</span><span class="op" id="6705158">,</span>&nbsp;<span class="ident" id="6705160">saddr</span><span class="op" id="6705165">:</span>&nbsp;<span class="string" id="6705167">&#34;[::]&#34;</span><span class="op" id="6705173">,</span>&nbsp;<span class="ident" id="6705175">cnet</span><span class="op" id="6705179">:</span>&nbsp;<span class="string" id="6705181">&#34;udp&#34;</span><span class="op" id="6705186">,</span>&nbsp;<span class="ident" id="6705188">caddr</span><span class="op" id="6705193">:</span>&nbsp;<span class="string" id="6705195">&#34;127.0.0.1&#34;</span><span class="op" id="6705206">,</span>&nbsp;<span class="ident" id="6705208">ipv4map</span><span class="op" id="6705215">:</span>&nbsp;<span class="builtintype" id="6705217">true</span><span class="op" id="6705221">}</span><span class="op" id="6705222">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705226">{</span><span class="ident" id="6705227">snet</span><span class="op" id="6705231">:</span>&nbsp;<span class="string" id="6705233">&#34;udp&#34;</span><span class="op" id="6705238">,</span>&nbsp;<span class="ident" id="6705240">saddr</span><span class="op" id="6705245">:</span>&nbsp;<span class="string" id="6705247">&#34;&#34;</span><span class="op" id="6705249">,</span>&nbsp;<span class="ident" id="6705251">cnet</span><span class="op" id="6705255">:</span>&nbsp;<span class="string" id="6705257">&#34;udp4&#34;</span><span class="op" id="6705263">,</span>&nbsp;<span class="ident" id="6705265">caddr</span><span class="op" id="6705270">:</span>&nbsp;<span class="string" id="6705272">&#34;127.0.0.1&#34;</span><span class="op" id="6705283">}</span><span class="op" id="6705284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705287">{</span><span class="ident" id="6705288">snet</span><span class="op" id="6705292">:</span>&nbsp;<span class="string" id="6705294">&#34;udp&#34;</span><span class="op" id="6705299">,</span>&nbsp;<span class="ident" id="6705301">saddr</span><span class="op" id="6705306">:</span>&nbsp;<span class="string" id="6705308">&#34;0.0.0.0&#34;</span><span class="op" id="6705317">,</span>&nbsp;<span class="ident" id="6705319">cnet</span><span class="op" id="6705323">:</span>&nbsp;<span class="string" id="6705325">&#34;udp4&#34;</span><span class="op" id="6705331">,</span>&nbsp;<span class="ident" id="6705333">caddr</span><span class="op" id="6705338">:</span>&nbsp;<span class="string" id="6705340">&#34;127.0.0.1&#34;</span><span class="op" id="6705351">}</span><span class="op" id="6705352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705355">{</span><span class="ident" id="6705356">snet</span><span class="op" id="6705360">:</span>&nbsp;<span class="string" id="6705362">&#34;udp&#34;</span><span class="op" id="6705367">,</span>&nbsp;<span class="ident" id="6705369">saddr</span><span class="op" id="6705374">:</span>&nbsp;<span class="string" id="6705376">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6705394">,</span>&nbsp;<span class="ident" id="6705396">cnet</span><span class="op" id="6705400">:</span>&nbsp;<span class="string" id="6705402">&#34;udp4&#34;</span><span class="op" id="6705408">,</span>&nbsp;<span class="ident" id="6705410">caddr</span><span class="op" id="6705415">:</span>&nbsp;<span class="string" id="6705417">&#34;127.0.0.1&#34;</span><span class="op" id="6705428">}</span><span class="op" id="6705429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705432">{</span><span class="ident" id="6705433">snet</span><span class="op" id="6705437">:</span>&nbsp;<span class="string" id="6705439">&#34;udp&#34;</span><span class="op" id="6705444">,</span>&nbsp;<span class="ident" id="6705446">saddr</span><span class="op" id="6705451">:</span>&nbsp;<span class="string" id="6705453">&#34;[::]&#34;</span><span class="op" id="6705459">,</span>&nbsp;<span class="ident" id="6705461">cnet</span><span class="op" id="6705465">:</span>&nbsp;<span class="string" id="6705467">&#34;udp6&#34;</span><span class="op" id="6705473">,</span>&nbsp;<span class="ident" id="6705475">caddr</span><span class="op" id="6705480">:</span>&nbsp;<span class="string" id="6705482">&#34;[::1]&#34;</span><span class="op" id="6705489">,</span>&nbsp;<span class="ident" id="6705491">ipv6</span><span class="op" id="6705495">:</span>&nbsp;<span class="builtintype" id="6705497">true</span><span class="op" id="6705501">}</span><span class="op" id="6705502">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705506">{</span><span class="ident" id="6705507">snet</span><span class="op" id="6705511">:</span>&nbsp;<span class="string" id="6705513">&#34;udp&#34;</span><span class="op" id="6705518">,</span>&nbsp;<span class="ident" id="6705520">saddr</span><span class="op" id="6705525">:</span>&nbsp;<span class="string" id="6705527">&#34;&#34;</span><span class="op" id="6705529">,</span>&nbsp;<span class="ident" id="6705531">cnet</span><span class="op" id="6705535">:</span>&nbsp;<span class="string" id="6705537">&#34;udp6&#34;</span><span class="op" id="6705543">,</span>&nbsp;<span class="ident" id="6705545">caddr</span><span class="op" id="6705550">:</span>&nbsp;<span class="string" id="6705552">&#34;[::1]&#34;</span><span class="op" id="6705559">,</span>&nbsp;<span class="ident" id="6705561">ipv4map</span><span class="op" id="6705568">:</span>&nbsp;<span class="builtintype" id="6705570">true</span><span class="op" id="6705574">}</span><span class="op" id="6705575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705578">{</span><span class="ident" id="6705579">snet</span><span class="op" id="6705583">:</span>&nbsp;<span class="string" id="6705585">&#34;udp&#34;</span><span class="op" id="6705590">,</span>&nbsp;<span class="ident" id="6705592">saddr</span><span class="op" id="6705597">:</span>&nbsp;<span class="string" id="6705599">&#34;0.0.0.0&#34;</span><span class="op" id="6705608">,</span>&nbsp;<span class="ident" id="6705610">cnet</span><span class="op" id="6705614">:</span>&nbsp;<span class="string" id="6705616">&#34;udp6&#34;</span><span class="op" id="6705622">,</span>&nbsp;<span class="ident" id="6705624">caddr</span><span class="op" id="6705629">:</span>&nbsp;<span class="string" id="6705631">&#34;[::1]&#34;</span><span class="op" id="6705638">,</span>&nbsp;<span class="ident" id="6705640">ipv4map</span><span class="op" id="6705647">:</span>&nbsp;<span class="builtintype" id="6705649">true</span><span class="op" id="6705653">}</span><span class="op" id="6705654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705657">{</span><span class="ident" id="6705658">snet</span><span class="op" id="6705662">:</span>&nbsp;<span class="string" id="6705664">&#34;udp&#34;</span><span class="op" id="6705669">,</span>&nbsp;<span class="ident" id="6705671">saddr</span><span class="op" id="6705676">:</span>&nbsp;<span class="string" id="6705678">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6705696">,</span>&nbsp;<span class="ident" id="6705698">cnet</span><span class="op" id="6705702">:</span>&nbsp;<span class="string" id="6705704">&#34;udp6&#34;</span><span class="op" id="6705710">,</span>&nbsp;<span class="ident" id="6705712">caddr</span><span class="op" id="6705717">:</span>&nbsp;<span class="string" id="6705719">&#34;[::1]&#34;</span><span class="op" id="6705726">,</span>&nbsp;<span class="ident" id="6705728">ipv4map</span><span class="op" id="6705735">:</span>&nbsp;<span class="builtintype" id="6705737">true</span><span class="op" id="6705741">}</span><span class="op" id="6705742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705745">{</span><span class="ident" id="6705746">snet</span><span class="op" id="6705750">:</span>&nbsp;<span class="string" id="6705752">&#34;udp&#34;</span><span class="op" id="6705757">,</span>&nbsp;<span class="ident" id="6705759">saddr</span><span class="op" id="6705764">:</span>&nbsp;<span class="string" id="6705766">&#34;[::]&#34;</span><span class="op" id="6705772">,</span>&nbsp;<span class="ident" id="6705774">cnet</span><span class="op" id="6705778">:</span>&nbsp;<span class="string" id="6705780">&#34;udp4&#34;</span><span class="op" id="6705786">,</span>&nbsp;<span class="ident" id="6705788">caddr</span><span class="op" id="6705793">:</span>&nbsp;<span class="string" id="6705795">&#34;127.0.0.1&#34;</span><span class="op" id="6705806">,</span>&nbsp;<span class="ident" id="6705808">ipv4map</span><span class="op" id="6705815">:</span>&nbsp;<span class="builtintype" id="6705817">true</span><span class="op" id="6705821">}</span><span class="op" id="6705822">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705826">{</span><span class="ident" id="6705827">snet</span><span class="op" id="6705831">:</span>&nbsp;<span class="string" id="6705833">&#34;udp&#34;</span><span class="op" id="6705838">,</span>&nbsp;<span class="ident" id="6705840">saddr</span><span class="op" id="6705845">:</span>&nbsp;<span class="string" id="6705847">&#34;127.0.0.1&#34;</span><span class="op" id="6705858">,</span>&nbsp;<span class="ident" id="6705860">cnet</span><span class="op" id="6705864">:</span>&nbsp;<span class="string" id="6705866">&#34;udp&#34;</span><span class="op" id="6705871">,</span>&nbsp;<span class="ident" id="6705873">caddr</span><span class="op" id="6705878">:</span>&nbsp;<span class="string" id="6705880">&#34;127.0.0.1&#34;</span><span class="op" id="6705891">}</span><span class="op" id="6705892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705895">{</span><span class="ident" id="6705896">snet</span><span class="op" id="6705900">:</span>&nbsp;<span class="string" id="6705902">&#34;udp&#34;</span><span class="op" id="6705907">,</span>&nbsp;<span class="ident" id="6705909">saddr</span><span class="op" id="6705914">:</span>&nbsp;<span class="string" id="6705916">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6705936">,</span>&nbsp;<span class="ident" id="6705938">cnet</span><span class="op" id="6705942">:</span>&nbsp;<span class="string" id="6705944">&#34;udp&#34;</span><span class="op" id="6705949">,</span>&nbsp;<span class="ident" id="6705951">caddr</span><span class="op" id="6705956">:</span>&nbsp;<span class="string" id="6705958">&#34;127.0.0.1&#34;</span><span class="op" id="6705969">}</span><span class="op" id="6705970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6705973">{</span><span class="ident" id="6705974">snet</span><span class="op" id="6705978">:</span>&nbsp;<span class="string" id="6705980">&#34;udp&#34;</span><span class="op" id="6705985">,</span>&nbsp;<span class="ident" id="6705987">saddr</span><span class="op" id="6705992">:</span>&nbsp;<span class="string" id="6705994">&#34;[::1]&#34;</span><span class="op" id="6706001">,</span>&nbsp;<span class="ident" id="6706003">cnet</span><span class="op" id="6706007">:</span>&nbsp;<span class="string" id="6706009">&#34;udp&#34;</span><span class="op" id="6706014">,</span>&nbsp;<span class="ident" id="6706016">caddr</span><span class="op" id="6706021">:</span>&nbsp;<span class="string" id="6706023">&#34;[::1]&#34;</span><span class="op" id="6706030">,</span>&nbsp;<span class="ident" id="6706032">ipv6</span><span class="op" id="6706036">:</span>&nbsp;<span class="builtintype" id="6706038">true</span><span class="op" id="6706042">}</span><span class="op" id="6706043">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706047">{</span><span class="ident" id="6706048">snet</span><span class="op" id="6706052">:</span>&nbsp;<span class="string" id="6706054">&#34;udp4&#34;</span><span class="op" id="6706060">,</span>&nbsp;<span class="ident" id="6706062">saddr</span><span class="op" id="6706067">:</span>&nbsp;<span class="string" id="6706069">&#34;&#34;</span><span class="op" id="6706071">,</span>&nbsp;<span class="ident" id="6706073">cnet</span><span class="op" id="6706077">:</span>&nbsp;<span class="string" id="6706079">&#34;udp4&#34;</span><span class="op" id="6706085">,</span>&nbsp;<span class="ident" id="6706087">caddr</span><span class="op" id="6706092">:</span>&nbsp;<span class="string" id="6706094">&#34;127.0.0.1&#34;</span><span class="op" id="6706105">}</span><span class="op" id="6706106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706109">{</span><span class="ident" id="6706110">snet</span><span class="op" id="6706114">:</span>&nbsp;<span class="string" id="6706116">&#34;udp4&#34;</span><span class="op" id="6706122">,</span>&nbsp;<span class="ident" id="6706124">saddr</span><span class="op" id="6706129">:</span>&nbsp;<span class="string" id="6706131">&#34;0.0.0.0&#34;</span><span class="op" id="6706140">,</span>&nbsp;<span class="ident" id="6706142">cnet</span><span class="op" id="6706146">:</span>&nbsp;<span class="string" id="6706148">&#34;udp4&#34;</span><span class="op" id="6706154">,</span>&nbsp;<span class="ident" id="6706156">caddr</span><span class="op" id="6706161">:</span>&nbsp;<span class="string" id="6706163">&#34;127.0.0.1&#34;</span><span class="op" id="6706174">}</span><span class="op" id="6706175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706178">{</span><span class="ident" id="6706179">snet</span><span class="op" id="6706183">:</span>&nbsp;<span class="string" id="6706185">&#34;udp4&#34;</span><span class="op" id="6706191">,</span>&nbsp;<span class="ident" id="6706193">saddr</span><span class="op" id="6706198">:</span>&nbsp;<span class="string" id="6706200">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6706218">,</span>&nbsp;<span class="ident" id="6706220">cnet</span><span class="op" id="6706224">:</span>&nbsp;<span class="string" id="6706226">&#34;udp4&#34;</span><span class="op" id="6706232">,</span>&nbsp;<span class="ident" id="6706234">caddr</span><span class="op" id="6706239">:</span>&nbsp;<span class="string" id="6706241">&#34;127.0.0.1&#34;</span><span class="op" id="6706252">}</span><span class="op" id="6706253">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706257">{</span><span class="ident" id="6706258">snet</span><span class="op" id="6706262">:</span>&nbsp;<span class="string" id="6706264">&#34;udp4&#34;</span><span class="op" id="6706270">,</span>&nbsp;<span class="ident" id="6706272">saddr</span><span class="op" id="6706277">:</span>&nbsp;<span class="string" id="6706279">&#34;127.0.0.1&#34;</span><span class="op" id="6706290">,</span>&nbsp;<span class="ident" id="6706292">cnet</span><span class="op" id="6706296">:</span>&nbsp;<span class="string" id="6706298">&#34;udp4&#34;</span><span class="op" id="6706304">,</span>&nbsp;<span class="ident" id="6706306">caddr</span><span class="op" id="6706311">:</span>&nbsp;<span class="string" id="6706313">&#34;127.0.0.1&#34;</span><span class="op" id="6706324">}</span><span class="op" id="6706325">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706329">{</span><span class="ident" id="6706330">snet</span><span class="op" id="6706334">:</span>&nbsp;<span class="string" id="6706336">&#34;udp6&#34;</span><span class="op" id="6706342">,</span>&nbsp;<span class="ident" id="6706344">saddr</span><span class="op" id="6706349">:</span>&nbsp;<span class="string" id="6706351">&#34;&#34;</span><span class="op" id="6706353">,</span>&nbsp;<span class="ident" id="6706355">cnet</span><span class="op" id="6706359">:</span>&nbsp;<span class="string" id="6706361">&#34;udp6&#34;</span><span class="op" id="6706367">,</span>&nbsp;<span class="ident" id="6706369">caddr</span><span class="op" id="6706374">:</span>&nbsp;<span class="string" id="6706376">&#34;[::1]&#34;</span><span class="op" id="6706383">,</span>&nbsp;<span class="ident" id="6706385">ipv6</span><span class="op" id="6706389">:</span>&nbsp;<span class="builtintype" id="6706391">true</span><span class="op" id="6706395">}</span><span class="op" id="6706396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706399">{</span><span class="ident" id="6706400">snet</span><span class="op" id="6706404">:</span>&nbsp;<span class="string" id="6706406">&#34;udp6&#34;</span><span class="op" id="6706412">,</span>&nbsp;<span class="ident" id="6706414">saddr</span><span class="op" id="6706419">:</span>&nbsp;<span class="string" id="6706421">&#34;[::]&#34;</span><span class="op" id="6706427">,</span>&nbsp;<span class="ident" id="6706429">cnet</span><span class="op" id="6706433">:</span>&nbsp;<span class="string" id="6706435">&#34;udp6&#34;</span><span class="op" id="6706441">,</span>&nbsp;<span class="ident" id="6706443">caddr</span><span class="op" id="6706448">:</span>&nbsp;<span class="string" id="6706450">&#34;[::1]&#34;</span><span class="op" id="6706457">,</span>&nbsp;<span class="ident" id="6706459">ipv6</span><span class="op" id="6706463">:</span>&nbsp;<span class="builtintype" id="6706465">true</span><span class="op" id="6706469">}</span><span class="op" id="6706470">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706474">{</span><span class="ident" id="6706475">snet</span><span class="op" id="6706479">:</span>&nbsp;<span class="string" id="6706481">&#34;udp6&#34;</span><span class="op" id="6706487">,</span>&nbsp;<span class="ident" id="6706489">saddr</span><span class="op" id="6706494">:</span>&nbsp;<span class="string" id="6706496">&#34;[::1]&#34;</span><span class="op" id="6706503">,</span>&nbsp;<span class="ident" id="6706505">cnet</span><span class="op" id="6706509">:</span>&nbsp;<span class="string" id="6706511">&#34;udp6&#34;</span><span class="op" id="6706517">,</span>&nbsp;<span class="ident" id="6706519">caddr</span><span class="op" id="6706524">:</span>&nbsp;<span class="string" id="6706526">&#34;[::1]&#34;</span><span class="op" id="6706533">,</span>&nbsp;<span class="ident" id="6706535">ipv6</span><span class="op" id="6706539">:</span>&nbsp;<span class="builtintype" id="6706541">true</span><span class="op" id="6706545">}</span><span class="op" id="6706546">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706550">{</span><span class="ident" id="6706551">snet</span><span class="op" id="6706555">:</span>&nbsp;<span class="string" id="6706557">&#34;udp&#34;</span><span class="op" id="6706562">,</span>&nbsp;<span class="ident" id="6706564">saddr</span><span class="op" id="6706569">:</span>&nbsp;<span class="string" id="6706571">&#34;127.0.0.1&#34;</span><span class="op" id="6706582">,</span>&nbsp;<span class="ident" id="6706584">cnet</span><span class="op" id="6706588">:</span>&nbsp;<span class="string" id="6706590">&#34;udp&#34;</span><span class="op" id="6706595">,</span>&nbsp;<span class="ident" id="6706597">caddr</span><span class="op" id="6706602">:</span>&nbsp;<span class="string" id="6706604">&#34;127.0.0.1&#34;</span><span class="op" id="6706615">,</span>&nbsp;<span class="ident" id="6706617">dial</span><span class="op" id="6706621">:</span>&nbsp;<span class="builtintype" id="6706623">true</span><span class="op" id="6706627">}</span><span class="op" id="6706628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706631">{</span><span class="ident" id="6706632">snet</span><span class="op" id="6706636">:</span>&nbsp;<span class="string" id="6706638">&#34;udp&#34;</span><span class="op" id="6706643">,</span>&nbsp;<span class="ident" id="6706645">saddr</span><span class="op" id="6706650">:</span>&nbsp;<span class="string" id="6706652">&#34;127.0.0.1&#34;</span><span class="op" id="6706663">,</span>&nbsp;<span class="ident" id="6706665">cnet</span><span class="op" id="6706669">:</span>&nbsp;<span class="string" id="6706671">&#34;udp&#34;</span><span class="op" id="6706676">,</span>&nbsp;<span class="ident" id="6706678">caddr</span><span class="op" id="6706683">:</span>&nbsp;<span class="string" id="6706685">&#34;127.0.0.1&#34;</span><span class="op" id="6706696">,</span>&nbsp;<span class="ident" id="6706698">empty</span><span class="op" id="6706703">:</span>&nbsp;<span class="builtintype" id="6706705">true</span><span class="op" id="6706709">}</span><span class="op" id="6706710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706713">{</span><span class="ident" id="6706714">snet</span><span class="op" id="6706718">:</span>&nbsp;<span class="string" id="6706720">&#34;udp&#34;</span><span class="op" id="6706725">,</span>&nbsp;<span class="ident" id="6706727">saddr</span><span class="op" id="6706732">:</span>&nbsp;<span class="string" id="6706734">&#34;127.0.0.1&#34;</span><span class="op" id="6706745">,</span>&nbsp;<span class="ident" id="6706747">cnet</span><span class="op" id="6706751">:</span>&nbsp;<span class="string" id="6706753">&#34;udp&#34;</span><span class="op" id="6706758">,</span>&nbsp;<span class="ident" id="6706760">caddr</span><span class="op" id="6706765">:</span>&nbsp;<span class="string" id="6706767">&#34;127.0.0.1&#34;</span><span class="op" id="6706778">,</span>&nbsp;<span class="ident" id="6706780">dial</span><span class="op" id="6706784">:</span>&nbsp;<span class="builtintype" id="6706786">true</span><span class="op" id="6706790">,</span>&nbsp;<span class="ident" id="6706792">empty</span><span class="op" id="6706797">:</span>&nbsp;<span class="builtintype" id="6706799">true</span><span class="op" id="6706803">}</span><span class="op" id="6706804">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706808">{</span><span class="ident" id="6706809">snet</span><span class="op" id="6706813">:</span>&nbsp;<span class="string" id="6706815">&#34;udp&#34;</span><span class="op" id="6706820">,</span>&nbsp;<span class="ident" id="6706822">saddr</span><span class="op" id="6706827">:</span>&nbsp;<span class="string" id="6706829">&#34;[::1]&#34;</span><span class="op" id="6706836">,</span>&nbsp;<span class="ident" id="6706838">cnet</span><span class="op" id="6706842">:</span>&nbsp;<span class="string" id="6706844">&#34;udp&#34;</span><span class="op" id="6706849">,</span>&nbsp;<span class="ident" id="6706851">caddr</span><span class="op" id="6706856">:</span>&nbsp;<span class="string" id="6706858">&#34;[::1]&#34;</span><span class="op" id="6706865">,</span>&nbsp;<span class="ident" id="6706867">ipv6</span><span class="op" id="6706871">:</span>&nbsp;<span class="builtintype" id="6706873">true</span><span class="op" id="6706877">,</span>&nbsp;<span class="ident" id="6706879">dial</span><span class="op" id="6706883">:</span>&nbsp;<span class="builtintype" id="6706885">true</span><span class="op" id="6706889">}</span><span class="op" id="6706890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706893">{</span><span class="ident" id="6706894">snet</span><span class="op" id="6706898">:</span>&nbsp;<span class="string" id="6706900">&#34;udp&#34;</span><span class="op" id="6706905">,</span>&nbsp;<span class="ident" id="6706907">saddr</span><span class="op" id="6706912">:</span>&nbsp;<span class="string" id="6706914">&#34;[::1]&#34;</span><span class="op" id="6706921">,</span>&nbsp;<span class="ident" id="6706923">cnet</span><span class="op" id="6706927">:</span>&nbsp;<span class="string" id="6706929">&#34;udp&#34;</span><span class="op" id="6706934">,</span>&nbsp;<span class="ident" id="6706936">caddr</span><span class="op" id="6706941">:</span>&nbsp;<span class="string" id="6706943">&#34;[::1]&#34;</span><span class="op" id="6706950">,</span>&nbsp;<span class="ident" id="6706952">ipv6</span><span class="op" id="6706956">:</span>&nbsp;<span class="builtintype" id="6706958">true</span><span class="op" id="6706962">,</span>&nbsp;<span class="ident" id="6706964">empty</span><span class="op" id="6706969">:</span>&nbsp;<span class="builtintype" id="6706971">true</span><span class="op" id="6706975">}</span><span class="op" id="6706976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6706979">{</span><span class="ident" id="6706980">snet</span><span class="op" id="6706984">:</span>&nbsp;<span class="string" id="6706986">&#34;udp&#34;</span><span class="op" id="6706991">,</span>&nbsp;<span class="ident" id="6706993">saddr</span><span class="op" id="6706998">:</span>&nbsp;<span class="string" id="6707000">&#34;[::1]&#34;</span><span class="op" id="6707007">,</span>&nbsp;<span class="ident" id="6707009">cnet</span><span class="op" id="6707013">:</span>&nbsp;<span class="string" id="6707015">&#34;udp&#34;</span><span class="op" id="6707020">,</span>&nbsp;<span class="ident" id="6707022">caddr</span><span class="op" id="6707027">:</span>&nbsp;<span class="string" id="6707029">&#34;[::1]&#34;</span><span class="op" id="6707036">,</span>&nbsp;<span class="ident" id="6707038">ipv6</span><span class="op" id="6707042">:</span>&nbsp;<span class="builtintype" id="6707044">true</span><span class="op" id="6707048">,</span>&nbsp;<span class="ident" id="6707050">dial</span><span class="op" id="6707054">:</span>&nbsp;<span class="builtintype" id="6707056">true</span><span class="op" id="6707060">,</span>&nbsp;<span class="ident" id="6707062">empty</span><span class="op" id="6707067">:</span>&nbsp;<span class="builtintype" id="6707069">true</span><span class="op" id="6707073">}</span><span class="op" id="6707074">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6707078">{</span><span class="ident" id="6707079">snet</span><span class="op" id="6707083">:</span>&nbsp;<span class="string" id="6707085">&#34;unixgram&#34;</span><span class="op" id="6707095">,</span>&nbsp;<span class="ident" id="6707097">saddr</span><span class="op" id="6707102">:</span>&nbsp;<span class="ident" id="6707104">testUnixAddr</span><span class="op" id="6707116">(</span><span class="op" id="6707117">)</span><span class="op" id="6707118">,</span>&nbsp;<span class="ident" id="6707120">cnet</span><span class="op" id="6707124">:</span>&nbsp;<span class="string" id="6707126">&#34;unixgram&#34;</span><span class="op" id="6707136">,</span>&nbsp;<span class="ident" id="6707138">caddr</span><span class="op" id="6707143">:</span>&nbsp;<span class="ident" id="6707145">testUnixAddr</span><span class="op" id="6707157">(</span><span class="op" id="6707158">)</span><span class="op" id="6707159">}</span><span class="op" id="6707160">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6707163">{</span><span class="ident" id="6707164">snet</span><span class="op" id="6707168">:</span>&nbsp;<span class="string" id="6707170">&#34;unixgram&#34;</span><span class="op" id="6707180">,</span>&nbsp;<span class="ident" id="6707182">saddr</span><span class="op" id="6707187">:</span>&nbsp;<span class="ident" id="6707189">testUnixAddr</span><span class="op" id="6707201">(</span><span class="op" id="6707202">)</span><span class="op" id="6707203">,</span>&nbsp;<span class="ident" id="6707205">cnet</span><span class="op" id="6707209">:</span>&nbsp;<span class="string" id="6707211">&#34;unixgram&#34;</span><span class="op" id="6707221">,</span>&nbsp;<span class="ident" id="6707223">caddr</span><span class="op" id="6707228">:</span>&nbsp;<span class="ident" id="6707230">testUnixAddr</span><span class="op" id="6707242">(</span><span class="op" id="6707243">)</span><span class="op" id="6707244">,</span>&nbsp;<span class="ident" id="6707246">dial</span><span class="op" id="6707250">:</span>&nbsp;<span class="builtintype" id="6707252">true</span><span class="op" id="6707256">}</span><span class="op" id="6707257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6707260">{</span><span class="ident" id="6707261">snet</span><span class="op" id="6707265">:</span>&nbsp;<span class="string" id="6707267">&#34;unixgram&#34;</span><span class="op" id="6707277">,</span>&nbsp;<span class="ident" id="6707279">saddr</span><span class="op" id="6707284">:</span>&nbsp;<span class="ident" id="6707286">testUnixAddr</span><span class="op" id="6707298">(</span><span class="op" id="6707299">)</span><span class="op" id="6707300">,</span>&nbsp;<span class="ident" id="6707302">cnet</span><span class="op" id="6707306">:</span>&nbsp;<span class="string" id="6707308">&#34;unixgram&#34;</span><span class="op" id="6707318">,</span>&nbsp;<span class="ident" id="6707320">caddr</span><span class="op" id="6707325">:</span>&nbsp;<span class="ident" id="6707327">testUnixAddr</span><span class="op" id="6707339">(</span><span class="op" id="6707340">)</span><span class="op" id="6707341">,</span>&nbsp;<span class="ident" id="6707343">empty</span><span class="op" id="6707348">:</span>&nbsp;<span class="builtintype" id="6707350">true</span><span class="op" id="6707354">}</span><span class="op" id="6707355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6707358">{</span><span class="ident" id="6707359">snet</span><span class="op" id="6707363">:</span>&nbsp;<span class="string" id="6707365">&#34;unixgram&#34;</span><span class="op" id="6707375">,</span>&nbsp;<span class="ident" id="6707377">saddr</span><span class="op" id="6707382">:</span>&nbsp;<span class="ident" id="6707384">testUnixAddr</span><span class="op" id="6707396">(</span><span class="op" id="6707397">)</span><span class="op" id="6707398">,</span>&nbsp;<span class="ident" id="6707400">cnet</span><span class="op" id="6707404">:</span>&nbsp;<span class="string" id="6707406">&#34;unixgram&#34;</span><span class="op" id="6707416">,</span>&nbsp;<span class="ident" id="6707418">caddr</span><span class="op" id="6707423">:</span>&nbsp;<span class="ident" id="6707425">testUnixAddr</span><span class="op" id="6707437">(</span><span class="op" id="6707438">)</span><span class="op" id="6707439">,</span>&nbsp;<span class="ident" id="6707441">dial</span><span class="op" id="6707445">:</span>&nbsp;<span class="builtintype" id="6707447">true</span><span class="op" id="6707451">,</span>&nbsp;<span class="ident" id="6707453">empty</span><span class="op" id="6707458">:</span>&nbsp;<span class="builtintype" id="6707460">true</span><span class="op" id="6707464">}</span><span class="op" id="6707465">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6707469">{</span><span class="ident" id="6707470">snet</span><span class="op" id="6707474">:</span>&nbsp;<span class="string" id="6707476">&#34;unixgram&#34;</span><span class="op" id="6707486">,</span>&nbsp;<span class="ident" id="6707488">saddr</span><span class="op" id="6707493">:</span>&nbsp;<span class="string" id="6707495">&#34;@gotest6/net&#34;</span><span class="op" id="6707509">,</span>&nbsp;<span class="ident" id="6707511">cnet</span><span class="op" id="6707515">:</span>&nbsp;<span class="string" id="6707517">&#34;unixgram&#34;</span><span class="op" id="6707527">,</span>&nbsp;<span class="ident" id="6707529">caddr</span><span class="op" id="6707534">:</span>&nbsp;<span class="string" id="6707536">&#34;@gotest6/net.local&#34;</span><span class="op" id="6707556">,</span>&nbsp;<span class="ident" id="6707558">linuxOnly</span><span class="op" id="6707567">:</span>&nbsp;<span class="builtintype" id="6707569">true</span><span class="op" id="6707573">}</span><span class="op" id="6707574">,</span><br>
<span class="lineno">310</span><span class="op" id="6707576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6707579">func</span>&nbsp;<span class="ident" id="6707584">TestDatagramPacketConnServer</span><span class="op" id="6707612">(</span><span class="ident" id="6707613">t</span>&nbsp;<span class="op" id="6707615">*</span><span class="ident" id="6707616">testing</span><span class="op" id="6707623">.</span><span class="ident" id="6707624">T</span><span class="op" id="6707625">)</span>&nbsp;<span class="op" id="6707627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6707630">if</span>&nbsp;<span class="op" id="6707633">!</span><span class="op" id="6707634">*</span><span class="ident" id="6707635">testDatagram</span>&nbsp;<span class="op" id="6707648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6707652">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6707660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6707664">for</span>&nbsp;<span class="ident" id="6707668">_</span><span class="op" id="6707669">,</span>&nbsp;<span class="ident" id="6707671">tt</span>&nbsp;<span class="op" id="6707674">:=</span>&nbsp;<span class="keyword" id="6707677">range</span>&nbsp;<span class="ident" id="6707683">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6707713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6707717">if</span>&nbsp;<span class="ident" id="6707720">skipServerTest</span><span class="op" id="6707734">(</span><span class="ident" id="6707735">tt</span><span class="op" id="6707737">.</span><span class="ident" id="6707738">snet</span><span class="op" id="6707742">,</span>&nbsp;<span class="string" id="6707744">&#34;unixgram&#34;</span><span class="op" id="6707754">,</span>&nbsp;<span class="ident" id="6707756">tt</span><span class="op" id="6707758">.</span><span class="ident" id="6707759">saddr</span><span class="op" id="6707764">,</span>&nbsp;<span class="ident" id="6707766">tt</span><span class="op" id="6707768">.</span><span class="ident" id="6707769">ipv6</span><span class="op" id="6707773">,</span>&nbsp;<span class="ident" id="6707775">tt</span><span class="op" id="6707777">.</span><span class="ident" id="6707778">ipv4map</span><span class="op" id="6707785">,</span>&nbsp;<span class="ident" id="6707787">tt</span><span class="op" id="6707789">.</span><span class="ident" id="6707790">linuxOnly</span><span class="op" id="6707799">)</span>&nbsp;<span class="op" id="6707801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6707806">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6707817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6707822">listening</span>&nbsp;<span class="op" id="6707832">:=</span>&nbsp;<span class="builtinfunc" id="6707835">make</span><span class="op" id="6707839">(</span><span class="keyword" id="6707840">chan</span>&nbsp;<span class="builtintype" id="6707845">string</span><span class="op" id="6707851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6707855">done</span>&nbsp;<span class="op" id="6707860">:=</span>&nbsp;<span class="builtinfunc" id="6707863">make</span><span class="op" id="6707867">(</span><span class="keyword" id="6707868">chan</span>&nbsp;<span class="builtintype" id="6707873">int</span><span class="op" id="6707876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6707880">switch</span>&nbsp;<span class="ident" id="6707887">tt</span><span class="op" id="6707889">.</span><span class="ident" id="6707890">snet</span>&nbsp;<span class="op" id="6707895">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6707899">case</span>&nbsp;<span class="string" id="6707904">&#34;udp&#34;</span><span class="op" id="6707909">,</span>&nbsp;<span class="string" id="6707911">&#34;udp4&#34;</span><span class="op" id="6707917">,</span>&nbsp;<span class="string" id="6707919">&#34;udp6&#34;</span><span class="op" id="6707925">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6707930">tt</span><span class="op" id="6707932">.</span><span class="ident" id="6707933">saddr</span>&nbsp;<span class="op" id="6707939">+=</span>&nbsp;<span class="string" id="6707942">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6707949">case</span>&nbsp;<span class="string" id="6707954">&#34;unixgram&#34;</span><span class="op" id="6707964">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6707969">os</span><span class="op" id="6707971">.</span><span class="ident" id="6707972">Remove</span><span class="op" id="6707978">(</span><span class="ident" id="6707979">tt</span><span class="op" id="6707981">.</span><span class="ident" id="6707982">saddr</span><span class="op" id="6707987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6707992">os</span><span class="op" id="6707994">.</span><span class="ident" id="6707995">Remove</span><span class="op" id="6708001">(</span><span class="ident" id="6708002">tt</span><span class="op" id="6708004">.</span><span class="ident" id="6708005">caddr</span><span class="op" id="6708010">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6708014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6708019">go</span>&nbsp;<span class="ident" id="6708022">runDatagramPacketConnServer</span><span class="op" id="6708049">(</span><span class="ident" id="6708050">t</span><span class="op" id="6708051">,</span>&nbsp;<span class="ident" id="6708053">tt</span><span class="op" id="6708055">.</span><span class="ident" id="6708056">snet</span><span class="op" id="6708060">,</span>&nbsp;<span class="ident" id="6708062">tt</span><span class="op" id="6708064">.</span><span class="ident" id="6708065">saddr</span><span class="op" id="6708070">,</span>&nbsp;<span class="ident" id="6708072">listening</span><span class="op" id="6708081">,</span>&nbsp;<span class="ident" id="6708083">done</span><span class="op" id="6708087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708091">taddr</span>&nbsp;<span class="op" id="6708097">:=</span>&nbsp;<span class="op" id="6708100">&lt;-</span><span class="ident" id="6708102">listening</span>&nbsp;<span class="comment" id="6708112">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6708143">switch</span>&nbsp;<span class="ident" id="6708150">tt</span><span class="op" id="6708152">.</span><span class="ident" id="6708153">cnet</span>&nbsp;<span class="op" id="6708158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6708162">case</span>&nbsp;<span class="string" id="6708167">&#34;udp&#34;</span><span class="op" id="6708172">,</span>&nbsp;<span class="string" id="6708174">&#34;udp4&#34;</span><span class="op" id="6708180">,</span>&nbsp;<span class="string" id="6708182">&#34;udp6&#34;</span><span class="op" id="6708188">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708193">_</span><span class="op" id="6708194">,</span>&nbsp;<span class="ident" id="6708196">port</span><span class="op" id="6708200">,</span>&nbsp;<span class="ident" id="6708202">err</span>&nbsp;<span class="op" id="6708206">:=</span>&nbsp;<span class="ident" id="6708209">SplitHostPort</span><span class="op" id="6708222">(</span><span class="ident" id="6708223">taddr</span><span class="op" id="6708228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6708233">if</span>&nbsp;<span class="ident" id="6708236">err</span>&nbsp;<span class="op" id="6708240">!=</span>&nbsp;<span class="ident" id="6708243">nil</span>&nbsp;<span class="op" id="6708247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708253">t</span><span class="op" id="6708254">.</span><span class="ident" id="6708255">Fatalf</span><span class="op" id="6708261">(</span><span class="string" id="6708262">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6708292">,</span>&nbsp;<span class="ident" id="6708294">taddr</span><span class="op" id="6708299">,</span>&nbsp;<span class="ident" id="6708301">err</span><span class="op" id="6708304">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6708309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708314">taddr</span>&nbsp;<span class="op" id="6708320">=</span>&nbsp;<span class="ident" id="6708322">tt</span><span class="op" id="6708324">.</span><span class="ident" id="6708325">caddr</span>&nbsp;<span class="op" id="6708331">+</span>&nbsp;<span class="string" id="6708333">&#34;:&#34;</span>&nbsp;<span class="op" id="6708337">+</span>&nbsp;<span class="ident" id="6708339">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708347">tt</span><span class="op" id="6708349">.</span><span class="ident" id="6708350">caddr</span>&nbsp;<span class="op" id="6708356">+=</span>&nbsp;<span class="string" id="6708359">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6708366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6708370">if</span>&nbsp;<span class="ident" id="6708373">tt</span><span class="op" id="6708375">.</span><span class="ident" id="6708376">dial</span>&nbsp;<span class="op" id="6708381">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708386">runDatagramConnClient</span><span class="op" id="6708407">(</span><span class="ident" id="6708408">t</span><span class="op" id="6708409">,</span>&nbsp;<span class="ident" id="6708411">tt</span><span class="op" id="6708413">.</span><span class="ident" id="6708414">cnet</span><span class="op" id="6708418">,</span>&nbsp;<span class="ident" id="6708420">tt</span><span class="op" id="6708422">.</span><span class="ident" id="6708423">caddr</span><span class="op" id="6708428">,</span>&nbsp;<span class="ident" id="6708430">taddr</span><span class="op" id="6708435">,</span>&nbsp;<span class="ident" id="6708437">tt</span><span class="op" id="6708439">.</span><span class="ident" id="6708440">empty</span><span class="op" id="6708445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6708449">}</span>&nbsp;<span class="keyword" id="6708451">else</span>&nbsp;<span class="op" id="6708456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708461">runDatagramPacketConnClient</span><span class="op" id="6708488">(</span><span class="ident" id="6708489">t</span><span class="op" id="6708490">,</span>&nbsp;<span class="ident" id="6708492">tt</span><span class="op" id="6708494">.</span><span class="ident" id="6708495">cnet</span><span class="op" id="6708499">,</span>&nbsp;<span class="ident" id="6708501">tt</span><span class="op" id="6708503">.</span><span class="ident" id="6708504">caddr</span><span class="op" id="6708509">,</span>&nbsp;<span class="ident" id="6708511">taddr</span><span class="op" id="6708516">,</span>&nbsp;<span class="ident" id="6708518">tt</span><span class="op" id="6708520">.</span><span class="ident" id="6708521">empty</span><span class="op" id="6708526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6708530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6708534">&lt;-</span><span class="ident" id="6708536">done</span>&nbsp;<span class="comment" id="6708541">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6708566">&lt;-</span><span class="ident" id="6708568">done</span>&nbsp;<span class="comment" id="6708573">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6708604">switch</span>&nbsp;<span class="ident" id="6708611">tt</span><span class="op" id="6708613">.</span><span class="ident" id="6708614">snet</span>&nbsp;<span class="op" id="6708619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6708623">case</span>&nbsp;<span class="string" id="6708628">&#34;unixgram&#34;</span><span class="op" id="6708638">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708643">os</span><span class="op" id="6708645">.</span><span class="ident" id="6708646">Remove</span><span class="op" id="6708652">(</span><span class="ident" id="6708653">tt</span><span class="op" id="6708655">.</span><span class="ident" id="6708656">saddr</span><span class="op" id="6708661">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708666">os</span><span class="op" id="6708668">.</span><span class="ident" id="6708669">Remove</span><span class="op" id="6708675">(</span><span class="ident" id="6708676">tt</span><span class="op" id="6708678">.</span><span class="ident" id="6708679">caddr</span><span class="op" id="6708684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6708688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6708691">}</span><br>
<span class="lineno"></span><span class="op" id="6708693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="6708696">func</span>&nbsp;<span class="ident" id="6708701">runDatagramPacketConnServer</span><span class="op" id="6708728">(</span><span class="ident" id="6708729">t</span>&nbsp;<span class="op" id="6708731">*</span><span class="ident" id="6708732">testing</span><span class="op" id="6708739">.</span><span class="ident" id="6708740">T</span><span class="op" id="6708741">,</span>&nbsp;<span class="ident" id="6708743">net</span><span class="op" id="6708746">,</span>&nbsp;<span class="ident" id="6708748">laddr</span>&nbsp;<span class="builtintype" id="6708754">string</span><span class="op" id="6708760">,</span>&nbsp;<span class="ident" id="6708762">listening</span>&nbsp;<span class="keyword" id="6708772">chan</span><span class="op" id="6708776">&lt;-</span>&nbsp;<span class="builtintype" id="6708779">string</span><span class="op" id="6708785">,</span>&nbsp;<span class="ident" id="6708787">done</span>&nbsp;<span class="keyword" id="6708792">chan</span><span class="op" id="6708796">&lt;-</span>&nbsp;<span class="builtintype" id="6708799">int</span><span class="op" id="6708802">)</span>&nbsp;<span class="op" id="6708804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708807">c</span><span class="op" id="6708808">,</span>&nbsp;<span class="ident" id="6708810">err</span>&nbsp;<span class="op" id="6708814">:=</span>&nbsp;<span class="ident" id="6708817">ListenPacket</span><span class="op" id="6708829">(</span><span class="ident" id="6708830">net</span><span class="op" id="6708833">,</span>&nbsp;<span class="ident" id="6708835">laddr</span><span class="op" id="6708840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6708843">if</span>&nbsp;<span class="ident" id="6708846">err</span>&nbsp;<span class="op" id="6708850">!=</span>&nbsp;<span class="ident" id="6708853">nil</span>&nbsp;<span class="op" id="6708857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708861">t</span><span class="op" id="6708862">.</span><span class="ident" id="6708863">Errorf</span><span class="op" id="6708869">(</span><span class="string" id="6708870">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6708903">,</span>&nbsp;<span class="ident" id="6708905">net</span><span class="op" id="6708908">,</span>&nbsp;<span class="ident" id="6708910">laddr</span><span class="op" id="6708915">,</span>&nbsp;<span class="ident" id="6708917">err</span><span class="op" id="6708920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708924">listening</span>&nbsp;<span class="op" id="6708934">&lt;-</span>&nbsp;<span class="string" id="6708937">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708947">done</span>&nbsp;<span class="op" id="6708952">&lt;-</span>&nbsp;<span class="num" id="6708955">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6708959">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6708967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6708970">defer</span>&nbsp;<span class="ident" id="6708976">c</span><span class="op" id="6708977">.</span><span class="ident" id="6708978">Close</span><span class="op" id="6708983">(</span><span class="op" id="6708984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6708987">listening</span>&nbsp;<span class="op" id="6708997">&lt;-</span>&nbsp;<span class="ident" id="6709000">c</span><span class="op" id="6709001">.</span><span class="ident" id="6709002">LocalAddr</span><span class="op" id="6709011">(</span><span class="op" id="6709012">)</span><span class="op" id="6709013">.</span><span class="ident" id="6709014">String</span><span class="op" id="6709020">(</span><span class="op" id="6709021">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6709025">buf</span>&nbsp;<span class="op" id="6709029">:=</span>&nbsp;<span class="builtinfunc" id="6709032">make</span><span class="op" id="6709036">(</span><span class="op" id="6709037">[</span><span class="op" id="6709038">]</span><span class="builtintype" id="6709039">byte</span><span class="op" id="6709043">,</span>&nbsp;<span class="num" id="6709045">1024</span><span class="op" id="6709049">)</span><br>
<span class="lineno"></span><span class="ident" id="6709051">run</span><span class="op" id="6709054">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709057">for</span>&nbsp;<span class="op" id="6709061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6709065">c</span><span class="op" id="6709066">.</span><span class="ident" id="6709067">SetReadDeadline</span><span class="op" id="6709082">(</span><span class="ident" id="6709083">time</span><span class="op" id="6709087">.</span><span class="ident" id="6709088">Now</span><span class="op" id="6709091">(</span><span class="op" id="6709092">)</span><span class="op" id="6709093">.</span><span class="ident" id="6709094">Add</span><span class="op" id="6709097">(</span><span class="num" id="6709098">10</span>&nbsp;<span class="op" id="6709101">*</span>&nbsp;<span class="ident" id="6709103">time</span><span class="op" id="6709107">.</span><span class="ident" id="6709108">Millisecond</span><span class="op" id="6709119">)</span><span class="op" id="6709120">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6709124">n</span><span class="op" id="6709125">,</span>&nbsp;<span class="ident" id="6709127">ra</span><span class="op" id="6709129">,</span>&nbsp;<span class="ident" id="6709131">err</span>&nbsp;<span class="op" id="6709135">:=</span>&nbsp;<span class="ident" id="6709138">c</span><span class="op" id="6709139">.</span><span class="ident" id="6709140">ReadFrom</span><span class="op" id="6709148">(</span><span class="ident" id="6709149">buf</span><span class="op" id="6709152">[</span><span class="num" id="6709153">0</span><span class="op" id="6709154">:</span><span class="op" id="6709155">]</span><span class="op" id="6709156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709160">if</span>&nbsp;<span class="ident" id="6709163">nerr</span><span class="op" id="6709167">,</span>&nbsp;<span class="ident" id="6709169">ok</span>&nbsp;<span class="op" id="6709172">:=</span>&nbsp;<span class="ident" id="6709175">err</span><span class="op" id="6709178">.</span><span class="op" id="6709179">(</span><span class="ident" id="6709180">Error</span><span class="op" id="6709185">)</span><span class="op" id="6709186">;</span>&nbsp;<span class="ident" id="6709188">ok</span>&nbsp;<span class="op" id="6709191">&amp;&amp;</span>&nbsp;<span class="ident" id="6709194">nerr</span><span class="op" id="6709198">.</span><span class="ident" id="6709199">Timeout</span><span class="op" id="6709206">(</span><span class="op" id="6709207">)</span>&nbsp;<span class="op" id="6709209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709214">select</span>&nbsp;<span class="op" id="6709221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709226">case</span>&nbsp;<span class="ident" id="6709231">done</span>&nbsp;<span class="op" id="6709236">&lt;-</span>&nbsp;<span class="num" id="6709239">1</span><span class="op" id="6709240">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709246">break</span>&nbsp;<span class="ident" id="6709252">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709259">default</span><span class="op" id="6709266">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709272">continue</span>&nbsp;<span class="ident" id="6709281">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6709288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6709292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709296">if</span>&nbsp;<span class="ident" id="6709299">err</span>&nbsp;<span class="op" id="6709303">!=</span>&nbsp;<span class="ident" id="6709306">nil</span>&nbsp;<span class="op" id="6709310">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709315">break</span>&nbsp;<span class="ident" id="6709321">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6709327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709331">if</span>&nbsp;<span class="ident" id="6709334">_</span><span class="op" id="6709335">,</span>&nbsp;<span class="ident" id="6709337">err</span>&nbsp;<span class="op" id="6709341">=</span>&nbsp;<span class="ident" id="6709343">c</span><span class="op" id="6709344">.</span><span class="ident" id="6709345">WriteTo</span><span class="op" id="6709352">(</span><span class="ident" id="6709353">buf</span><span class="op" id="6709356">[</span><span class="num" id="6709357">0</span><span class="op" id="6709358">:</span><span class="ident" id="6709359">n</span><span class="op" id="6709360">]</span><span class="op" id="6709361">,</span>&nbsp;<span class="ident" id="6709363">ra</span><span class="op" id="6709365">)</span><span class="op" id="6709366">;</span>&nbsp;<span class="ident" id="6709368">err</span>&nbsp;<span class="op" id="6709372">!=</span>&nbsp;<span class="ident" id="6709375">nil</span>&nbsp;<span class="op" id="6709379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6709384">t</span><span class="op" id="6709385">.</span><span class="ident" id="6709386">Errorf</span><span class="op" id="6709392">(</span><span class="string" id="6709393">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6709417">,</span>&nbsp;<span class="ident" id="6709419">ra</span><span class="op" id="6709421">,</span>&nbsp;<span class="ident" id="6709423">err</span><span class="op" id="6709426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709431">break</span>&nbsp;<span class="ident" id="6709437">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6709443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6709446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6709449">done</span>&nbsp;<span class="op" id="6709454">&lt;-</span>&nbsp;<span class="num" id="6709457">1</span><br>
<span class="lineno"></span><span class="op" id="6709459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="6709462">func</span>&nbsp;<span class="ident" id="6709467">runDatagramConnClient</span><span class="op" id="6709488">(</span><span class="ident" id="6709489">t</span>&nbsp;<span class="op" id="6709491">*</span><span class="ident" id="6709492">testing</span><span class="op" id="6709499">.</span><span class="ident" id="6709500">T</span><span class="op" id="6709501">,</span>&nbsp;<span class="ident" id="6709503">net</span><span class="op" id="6709506">,</span>&nbsp;<span class="ident" id="6709508">laddr</span><span class="op" id="6709513">,</span>&nbsp;<span class="ident" id="6709515">taddr</span>&nbsp;<span class="builtintype" id="6709521">string</span><span class="op" id="6709527">,</span>&nbsp;<span class="ident" id="6709529">isEmpty</span>&nbsp;<span class="builtintype" id="6709537">bool</span><span class="op" id="6709541">)</span>&nbsp;<span class="op" id="6709543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709546">var</span>&nbsp;<span class="ident" id="6709550">c</span>&nbsp;<span class="ident" id="6709552">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709558">var</span>&nbsp;<span class="ident" id="6709562">err</span>&nbsp;<span class="builtintype" id="6709566">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709573">switch</span>&nbsp;<span class="ident" id="6709580">net</span>&nbsp;<span class="op" id="6709584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709587">case</span>&nbsp;<span class="string" id="6709592">&#34;udp&#34;</span><span class="op" id="6709597">,</span>&nbsp;<span class="string" id="6709599">&#34;udp4&#34;</span><span class="op" id="6709605">,</span>&nbsp;<span class="string" id="6709607">&#34;udp6&#34;</span><span class="op" id="6709613">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6709617">c</span><span class="op" id="6709618">,</span>&nbsp;<span class="ident" id="6709620">err</span>&nbsp;<span class="op" id="6709624">=</span>&nbsp;<span class="ident" id="6709626">Dial</span><span class="op" id="6709630">(</span><span class="ident" id="6709631">net</span><span class="op" id="6709634">,</span>&nbsp;<span class="ident" id="6709636">taddr</span><span class="op" id="6709641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709645">if</span>&nbsp;<span class="ident" id="6709648">err</span>&nbsp;<span class="op" id="6709652">!=</span>&nbsp;<span class="ident" id="6709655">nil</span>&nbsp;<span class="op" id="6709659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6709664">t</span><span class="op" id="6709665">.</span><span class="ident" id="6709666">Fatalf</span><span class="op" id="6709672">(</span><span class="string" id="6709673">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6709698">,</span>&nbsp;<span class="ident" id="6709700">net</span><span class="op" id="6709703">,</span>&nbsp;<span class="ident" id="6709705">taddr</span><span class="op" id="6709710">,</span>&nbsp;<span class="ident" id="6709712">err</span><span class="op" id="6709715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6709719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709722">case</span>&nbsp;<span class="string" id="6709727">&#34;unixgram&#34;</span><span class="op" id="6709737">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6709741">c</span><span class="op" id="6709742">,</span>&nbsp;<span class="ident" id="6709744">err</span>&nbsp;<span class="op" id="6709748">=</span>&nbsp;<span class="ident" id="6709750">DialUnix</span><span class="op" id="6709758">(</span><span class="ident" id="6709759">net</span><span class="op" id="6709762">,</span>&nbsp;<span class="op" id="6709764">&amp;</span><span class="ident" id="6709765">UnixAddr</span><span class="op" id="6709773">{</span><span class="ident" id="6709774">Name</span><span class="op" id="6709778">:</span>&nbsp;<span class="ident" id="6709780">laddr</span><span class="op" id="6709785">,</span>&nbsp;<span class="ident" id="6709787">Net</span><span class="op" id="6709790">:</span>&nbsp;<span class="ident" id="6709792">net</span><span class="op" id="6709795">}</span><span class="op" id="6709796">,</span>&nbsp;<span class="op" id="6709798">&amp;</span><span class="ident" id="6709799">UnixAddr</span><span class="op" id="6709807">{</span><span class="ident" id="6709808">Name</span><span class="op" id="6709812">:</span>&nbsp;<span class="ident" id="6709814">taddr</span><span class="op" id="6709819">,</span>&nbsp;<span class="ident" id="6709821">Net</span><span class="op" id="6709824">:</span>&nbsp;<span class="ident" id="6709826">net</span><span class="op" id="6709829">}</span><span class="op" id="6709830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709834">if</span>&nbsp;<span class="ident" id="6709837">err</span>&nbsp;<span class="op" id="6709841">!=</span>&nbsp;<span class="ident" id="6709844">nil</span>&nbsp;<span class="op" id="6709848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6709853">t</span><span class="op" id="6709854">.</span><span class="ident" id="6709855">Fatalf</span><span class="op" id="6709861">(</span><span class="string" id="6709862">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6709897">,</span>&nbsp;<span class="ident" id="6709899">net</span><span class="op" id="6709902">,</span>&nbsp;<span class="ident" id="6709904">laddr</span><span class="op" id="6709909">,</span>&nbsp;<span class="ident" id="6709911">taddr</span><span class="op" id="6709916">,</span>&nbsp;<span class="ident" id="6709918">err</span><span class="op" id="6709921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6709925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6709928">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6709931">defer</span>&nbsp;<span class="ident" id="6709937">c</span><span class="op" id="6709938">.</span><span class="ident" id="6709939">Close</span><span class="op" id="6709944">(</span><span class="op" id="6709945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6709948">c</span><span class="op" id="6709949">.</span><span class="ident" id="6709950">SetReadDeadline</span><span class="op" id="6709965">(</span><span class="ident" id="6709966">time</span><span class="op" id="6709970">.</span><span class="ident" id="6709971">Now</span><span class="op" id="6709974">(</span><span class="op" id="6709975">)</span><span class="op" id="6709976">.</span><span class="ident" id="6709977">Add</span><span class="op" id="6709980">(</span><span class="num" id="6709981">1</span>&nbsp;<span class="op" id="6709983">*</span>&nbsp;<span class="ident" id="6709985">time</span><span class="op" id="6709989">.</span><span class="ident" id="6709990">Second</span><span class="op" id="6709996">)</span><span class="op" id="6709997">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710001">var</span>&nbsp;<span class="ident" id="6710005">wb</span>&nbsp;<span class="op" id="6710008">[</span><span class="op" id="6710009">]</span><span class="builtintype" id="6710010">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710016">if</span>&nbsp;<span class="op" id="6710019">!</span><span class="ident" id="6710020">isEmpty</span>&nbsp;<span class="op" id="6710028">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710032">wb</span>&nbsp;<span class="op" id="6710035">=</span>&nbsp;<span class="op" id="6710037">[</span><span class="op" id="6710038">]</span><span class="builtintype" id="6710039">byte</span><span class="op" id="6710043">(</span><span class="string" id="6710044">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6710074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6710077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710080">if</span>&nbsp;<span class="ident" id="6710083">n</span><span class="op" id="6710084">,</span>&nbsp;<span class="ident" id="6710086">err</span>&nbsp;<span class="op" id="6710090">:=</span>&nbsp;<span class="ident" id="6710093">c</span><span class="op" id="6710094">.</span><span class="ident" id="6710095">Write</span><span class="op" id="6710100">(</span><span class="ident" id="6710101">wb</span><span class="op" id="6710103">[</span><span class="num" id="6710104">0</span><span class="op" id="6710105">:</span><span class="op" id="6710106">]</span><span class="op" id="6710107">)</span><span class="op" id="6710108">;</span>&nbsp;<span class="ident" id="6710110">err</span>&nbsp;<span class="op" id="6710114">!=</span>&nbsp;<span class="ident" id="6710117">nil</span>&nbsp;<span class="op" id="6710121">||</span>&nbsp;<span class="ident" id="6710124">n</span>&nbsp;<span class="op" id="6710126">!=</span>&nbsp;<span class="builtinfunc" id="6710129">len</span><span class="op" id="6710132">(</span><span class="ident" id="6710133">wb</span><span class="op" id="6710135">)</span>&nbsp;<span class="op" id="6710137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710141">t</span><span class="op" id="6710142">.</span><span class="ident" id="6710143">Fatalf</span><span class="op" id="6710149">(</span><span class="string" id="6710150">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6710188">,</span>&nbsp;<span class="ident" id="6710190">n</span><span class="op" id="6710191">,</span>&nbsp;<span class="ident" id="6710193">err</span><span class="op" id="6710196">,</span>&nbsp;<span class="builtinfunc" id="6710198">len</span><span class="op" id="6710201">(</span><span class="ident" id="6710202">wb</span><span class="op" id="6710204">)</span><span class="op" id="6710205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6710208">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710212">rb</span>&nbsp;<span class="op" id="6710215">:=</span>&nbsp;<span class="builtinfunc" id="6710218">make</span><span class="op" id="6710222">(</span><span class="op" id="6710223">[</span><span class="op" id="6710224">]</span><span class="builtintype" id="6710225">byte</span><span class="op" id="6710229">,</span>&nbsp;<span class="num" id="6710231">1024</span><span class="op" id="6710235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710238">if</span>&nbsp;<span class="ident" id="6710241">n</span><span class="op" id="6710242">,</span>&nbsp;<span class="ident" id="6710244">err</span>&nbsp;<span class="op" id="6710248">:=</span>&nbsp;<span class="ident" id="6710251">c</span><span class="op" id="6710252">.</span><span class="ident" id="6710253">Read</span><span class="op" id="6710257">(</span><span class="ident" id="6710258">rb</span><span class="op" id="6710260">[</span><span class="num" id="6710261">0</span><span class="op" id="6710262">:</span><span class="op" id="6710263">]</span><span class="op" id="6710264">)</span><span class="op" id="6710265">;</span>&nbsp;<span class="ident" id="6710267">err</span>&nbsp;<span class="op" id="6710271">!=</span>&nbsp;<span class="ident" id="6710274">nil</span>&nbsp;<span class="op" id="6710278">||</span>&nbsp;<span class="ident" id="6710281">n</span>&nbsp;<span class="op" id="6710283">!=</span>&nbsp;<span class="builtinfunc" id="6710286">len</span><span class="op" id="6710289">(</span><span class="ident" id="6710290">wb</span><span class="op" id="6710292">)</span>&nbsp;<span class="op" id="6710294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710298">t</span><span class="op" id="6710299">.</span><span class="ident" id="6710300">Fatalf</span><span class="op" id="6710306">(</span><span class="string" id="6710307">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6710344">,</span>&nbsp;<span class="ident" id="6710346">n</span><span class="op" id="6710347">,</span>&nbsp;<span class="ident" id="6710349">err</span><span class="op" id="6710352">,</span>&nbsp;<span class="builtinfunc" id="6710354">len</span><span class="op" id="6710357">(</span><span class="ident" id="6710358">wb</span><span class="op" id="6710360">)</span><span class="op" id="6710361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6710364">}</span><br>
<span class="lineno">425</span><span class="op" id="6710366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6710369">func</span>&nbsp;<span class="ident" id="6710374">runDatagramPacketConnClient</span><span class="op" id="6710401">(</span><span class="ident" id="6710402">t</span>&nbsp;<span class="op" id="6710404">*</span><span class="ident" id="6710405">testing</span><span class="op" id="6710412">.</span><span class="ident" id="6710413">T</span><span class="op" id="6710414">,</span>&nbsp;<span class="ident" id="6710416">net</span><span class="op" id="6710419">,</span>&nbsp;<span class="ident" id="6710421">laddr</span><span class="op" id="6710426">,</span>&nbsp;<span class="ident" id="6710428">taddr</span>&nbsp;<span class="builtintype" id="6710434">string</span><span class="op" id="6710440">,</span>&nbsp;<span class="ident" id="6710442">isEmpty</span>&nbsp;<span class="builtintype" id="6710450">bool</span><span class="op" id="6710454">)</span>&nbsp;<span class="op" id="6710456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710459">var</span>&nbsp;<span class="ident" id="6710463">ra</span>&nbsp;<span class="ident" id="6710466">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710472">var</span>&nbsp;<span class="ident" id="6710476">err</span>&nbsp;<span class="builtintype" id="6710480">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710487">switch</span>&nbsp;<span class="ident" id="6710494">net</span>&nbsp;<span class="op" id="6710498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710501">case</span>&nbsp;<span class="string" id="6710506">&#34;udp&#34;</span><span class="op" id="6710511">,</span>&nbsp;<span class="string" id="6710513">&#34;udp4&#34;</span><span class="op" id="6710519">,</span>&nbsp;<span class="string" id="6710521">&#34;udp6&#34;</span><span class="op" id="6710527">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710531">ra</span><span class="op" id="6710533">,</span>&nbsp;<span class="ident" id="6710535">err</span>&nbsp;<span class="op" id="6710539">=</span>&nbsp;<span class="ident" id="6710541">ResolveUDPAddr</span><span class="op" id="6710555">(</span><span class="ident" id="6710556">net</span><span class="op" id="6710559">,</span>&nbsp;<span class="ident" id="6710561">taddr</span><span class="op" id="6710566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710570">if</span>&nbsp;<span class="ident" id="6710573">err</span>&nbsp;<span class="op" id="6710577">!=</span>&nbsp;<span class="ident" id="6710580">nil</span>&nbsp;<span class="op" id="6710584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710589">t</span><span class="op" id="6710590">.</span><span class="ident" id="6710591">Fatalf</span><span class="op" id="6710597">(</span><span class="string" id="6710598">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6710633">,</span>&nbsp;<span class="ident" id="6710635">net</span><span class="op" id="6710638">,</span>&nbsp;<span class="ident" id="6710640">taddr</span><span class="op" id="6710645">,</span>&nbsp;<span class="ident" id="6710647">err</span><span class="op" id="6710650">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6710654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710657">case</span>&nbsp;<span class="string" id="6710662">&#34;unixgram&#34;</span><span class="op" id="6710672">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710676">ra</span><span class="op" id="6710678">,</span>&nbsp;<span class="ident" id="6710680">err</span>&nbsp;<span class="op" id="6710684">=</span>&nbsp;<span class="ident" id="6710686">ResolveUnixAddr</span><span class="op" id="6710701">(</span><span class="ident" id="6710702">net</span><span class="op" id="6710705">,</span>&nbsp;<span class="ident" id="6710707">taddr</span><span class="op" id="6710712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710716">if</span>&nbsp;<span class="ident" id="6710719">err</span>&nbsp;<span class="op" id="6710723">!=</span>&nbsp;<span class="ident" id="6710726">nil</span>&nbsp;<span class="op" id="6710730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710735">t</span><span class="op" id="6710736">.</span><span class="ident" id="6710737">Fatalf</span><span class="op" id="6710743">(</span><span class="string" id="6710744">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6710780">,</span>&nbsp;<span class="ident" id="6710782">net</span><span class="op" id="6710785">,</span>&nbsp;<span class="ident" id="6710787">taddr</span><span class="op" id="6710792">,</span>&nbsp;<span class="ident" id="6710794">err</span><span class="op" id="6710797">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6710801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6710804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710807">c</span><span class="op" id="6710808">,</span>&nbsp;<span class="ident" id="6710810">err</span>&nbsp;<span class="op" id="6710814">:=</span>&nbsp;<span class="ident" id="6710817">ListenPacket</span><span class="op" id="6710829">(</span><span class="ident" id="6710830">net</span><span class="op" id="6710833">,</span>&nbsp;<span class="ident" id="6710835">laddr</span><span class="op" id="6710840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710843">if</span>&nbsp;<span class="ident" id="6710846">err</span>&nbsp;<span class="op" id="6710850">!=</span>&nbsp;<span class="ident" id="6710853">nil</span>&nbsp;<span class="op" id="6710857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710861">t</span><span class="op" id="6710862">.</span><span class="ident" id="6710863">Fatalf</span><span class="op" id="6710869">(</span><span class="string" id="6710870">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="6710902">,</span>&nbsp;<span class="ident" id="6710904">net</span><span class="op" id="6710907">,</span>&nbsp;<span class="ident" id="6710909">laddr</span><span class="op" id="6710914">,</span>&nbsp;<span class="ident" id="6710916">err</span><span class="op" id="6710919">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6710922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710925">defer</span>&nbsp;<span class="ident" id="6710931">c</span><span class="op" id="6710932">.</span><span class="ident" id="6710933">Close</span><span class="op" id="6710938">(</span><span class="op" id="6710939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6710942">c</span><span class="op" id="6710943">.</span><span class="ident" id="6710944">SetReadDeadline</span><span class="op" id="6710959">(</span><span class="ident" id="6710960">time</span><span class="op" id="6710964">.</span><span class="ident" id="6710965">Now</span><span class="op" id="6710968">(</span><span class="op" id="6710969">)</span><span class="op" id="6710970">.</span><span class="ident" id="6710971">Add</span><span class="op" id="6710974">(</span><span class="num" id="6710975">1</span>&nbsp;<span class="op" id="6710977">*</span>&nbsp;<span class="ident" id="6710979">time</span><span class="op" id="6710983">.</span><span class="ident" id="6710984">Second</span><span class="op" id="6710990">)</span><span class="op" id="6710991">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6710995">var</span>&nbsp;<span class="ident" id="6710999">wb</span>&nbsp;<span class="op" id="6711002">[</span><span class="op" id="6711003">]</span><span class="builtintype" id="6711004">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6711010">if</span>&nbsp;<span class="op" id="6711013">!</span><span class="ident" id="6711014">isEmpty</span>&nbsp;<span class="op" id="6711022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6711026">wb</span>&nbsp;<span class="op" id="6711029">=</span>&nbsp;<span class="op" id="6711031">[</span><span class="op" id="6711032">]</span><span class="builtintype" id="6711033">byte</span><span class="op" id="6711037">(</span><span class="string" id="6711038">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="6711082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6711085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6711088">if</span>&nbsp;<span class="ident" id="6711091">n</span><span class="op" id="6711092">,</span>&nbsp;<span class="ident" id="6711094">err</span>&nbsp;<span class="op" id="6711098">:=</span>&nbsp;<span class="ident" id="6711101">c</span><span class="op" id="6711102">.</span><span class="ident" id="6711103">WriteTo</span><span class="op" id="6711110">(</span><span class="ident" id="6711111">wb</span><span class="op" id="6711113">[</span><span class="num" id="6711114">0</span><span class="op" id="6711115">:</span><span class="op" id="6711116">]</span><span class="op" id="6711117">,</span>&nbsp;<span class="ident" id="6711119">ra</span><span class="op" id="6711121">)</span><span class="op" id="6711122">;</span>&nbsp;<span class="ident" id="6711124">err</span>&nbsp;<span class="op" id="6711128">!=</span>&nbsp;<span class="ident" id="6711131">nil</span>&nbsp;<span class="op" id="6711135">||</span>&nbsp;<span class="ident" id="6711138">n</span>&nbsp;<span class="op" id="6711140">!=</span>&nbsp;<span class="builtinfunc" id="6711143">len</span><span class="op" id="6711146">(</span><span class="ident" id="6711147">wb</span><span class="op" id="6711149">)</span>&nbsp;<span class="op" id="6711151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6711155">t</span><span class="op" id="6711156">.</span><span class="ident" id="6711157">Fatalf</span><span class="op" id="6711163">(</span><span class="string" id="6711164">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6711208">,</span>&nbsp;<span class="ident" id="6711210">ra</span><span class="op" id="6711212">,</span>&nbsp;<span class="ident" id="6711214">n</span><span class="op" id="6711215">,</span>&nbsp;<span class="ident" id="6711217">err</span><span class="op" id="6711220">,</span>&nbsp;<span class="builtinfunc" id="6711222">len</span><span class="op" id="6711225">(</span><span class="ident" id="6711226">wb</span><span class="op" id="6711228">)</span><span class="op" id="6711229">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6711232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6711236">rb</span>&nbsp;<span class="op" id="6711239">:=</span>&nbsp;<span class="builtinfunc" id="6711242">make</span><span class="op" id="6711246">(</span><span class="op" id="6711247">[</span><span class="op" id="6711248">]</span><span class="builtintype" id="6711249">byte</span><span class="op" id="6711253">,</span>&nbsp;<span class="num" id="6711255">1024</span><span class="op" id="6711259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6711262">if</span>&nbsp;<span class="ident" id="6711265">n</span><span class="op" id="6711266">,</span>&nbsp;<span class="ident" id="6711268">_</span><span class="op" id="6711269">,</span>&nbsp;<span class="ident" id="6711271">err</span>&nbsp;<span class="op" id="6711275">:=</span>&nbsp;<span class="ident" id="6711278">c</span><span class="op" id="6711279">.</span><span class="ident" id="6711280">ReadFrom</span><span class="op" id="6711288">(</span><span class="ident" id="6711289">rb</span><span class="op" id="6711291">[</span><span class="num" id="6711292">0</span><span class="op" id="6711293">:</span><span class="op" id="6711294">]</span><span class="op" id="6711295">)</span><span class="op" id="6711296">;</span>&nbsp;<span class="ident" id="6711298">err</span>&nbsp;<span class="op" id="6711302">!=</span>&nbsp;<span class="ident" id="6711305">nil</span>&nbsp;<span class="op" id="6711309">||</span>&nbsp;<span class="ident" id="6711312">n</span>&nbsp;<span class="op" id="6711314">!=</span>&nbsp;<span class="builtinfunc" id="6711317">len</span><span class="op" id="6711320">(</span><span class="ident" id="6711321">wb</span><span class="op" id="6711323">)</span>&nbsp;<span class="op" id="6711325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6711329">t</span><span class="op" id="6711330">.</span><span class="ident" id="6711331">Fatalf</span><span class="op" id="6711337">(</span><span class="string" id="6711338">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6711379">,</span>&nbsp;<span class="ident" id="6711381">n</span><span class="op" id="6711382">,</span>&nbsp;<span class="ident" id="6711384">err</span><span class="op" id="6711387">,</span>&nbsp;<span class="builtinfunc" id="6711389">len</span><span class="op" id="6711392">(</span><span class="ident" id="6711393">wb</span><span class="op" id="6711395">)</span><span class="op" id="6711396">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6711399">}</span><br>
<span class="lineno"></span><span class="op" id="6711401">}</span>
</div>
</body>
</html>
