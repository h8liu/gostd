<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8341323">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8341379">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8341433">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8341484">package</span>&nbsp;<span class="ident" id="8341492">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8341498">import</span>&nbsp;<span class="op" id="8341505">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8341508">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8341517">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8341528">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8341539">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8341546">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8341549">var</span>&nbsp;<span class="ident" id="8341553">headerWriteTests</span>&nbsp;<span class="op" id="8341570">=</span>&nbsp;<span class="op" id="8341572">[</span><span class="op" id="8341573">]</span><span class="keyword" id="8341574">struct</span>&nbsp;<span class="op" id="8341581">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341584">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8341593">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341601">exclude</span>&nbsp;&nbsp;<span class="keyword" id="8341610">map</span><span class="op" id="8341613">[</span><span class="builtintype" id="8341614">string</span><span class="op" id="8341620">]</span><span class="builtintype" id="8341621">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341627">expected</span>&nbsp;<span class="builtintype" id="8341636">string</span><br>
<span class="lineno"></span><span class="op" id="8341643">}</span><span class="op" id="8341644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8341647">{</span><span class="ident" id="8341648">Header</span><span class="op" id="8341654">{</span><span class="op" id="8341655">}</span><span class="op" id="8341656">,</span>&nbsp;<span class="ident" id="8341658">nil</span><span class="op" id="8341661">,</span>&nbsp;<span class="string" id="8341663">&#34;&#34;</span><span class="op" id="8341665">}</span><span class="op" id="8341666">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8341669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341673">Header</span><span class="op" id="8341679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8341684">&#34;Content-Type&#34;</span><span class="op" id="8341698">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8341702">{</span><span class="string" id="8341703">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="8341729">}</span><span class="op" id="8341730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8341735">&#34;Content-Length&#34;</span><span class="op" id="8341751">:</span>&nbsp;<span class="op" id="8341753">{</span><span class="string" id="8341754">&#34;0&#34;</span><span class="op" id="8341757">}</span><span class="op" id="8341758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8341762">}</span><span class="op" id="8341763">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341767">nil</span><span class="op" id="8341770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8341774">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="8341839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8341842">}</span><span class="op" id="8341843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8341846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341850">Header</span><span class="op" id="8341856">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8341861">&#34;Content-Length&#34;</span><span class="op" id="8341877">:</span>&nbsp;<span class="op" id="8341879">{</span><span class="string" id="8341880">&#34;0&#34;</span><span class="op" id="8341883">,</span>&nbsp;<span class="string" id="8341885">&#34;1&#34;</span><span class="op" id="8341888">,</span>&nbsp;<span class="string" id="8341890">&#34;2&#34;</span><span class="op" id="8341893">}</span><span class="op" id="8341894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8341898">}</span><span class="op" id="8341899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341903">nil</span><span class="op" id="8341906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8341910">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="8341975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8341978">}</span><span class="op" id="8341979">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8341982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8341986">Header</span><span class="op" id="8341992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8341997">&#34;Expires&#34;</span><span class="op" id="8342006">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8342017">{</span><span class="string" id="8342018">&#34;-1&#34;</span><span class="op" id="8342022">}</span><span class="op" id="8342023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342028">&#34;Content-Length&#34;</span><span class="op" id="8342044">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8342048">{</span><span class="string" id="8342049">&#34;0&#34;</span><span class="op" id="8342052">}</span><span class="op" id="8342053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342058">&#34;Content-Encoding&#34;</span><span class="op" id="8342076">:</span>&nbsp;<span class="op" id="8342078">{</span><span class="string" id="8342079">&#34;gzip&#34;</span><span class="op" id="8342085">}</span><span class="op" id="8342086">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342090">}</span><span class="op" id="8342091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8342095">map</span><span class="op" id="8342098">[</span><span class="builtintype" id="8342099">string</span><span class="op" id="8342105">]</span><span class="builtintype" id="8342106">bool</span><span class="op" id="8342110">{</span><span class="string" id="8342111">&#34;Content-Length&#34;</span><span class="op" id="8342127">:</span>&nbsp;<span class="builtintype" id="8342129">true</span><span class="op" id="8342133">}</span><span class="op" id="8342134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342138">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="8342181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342184">}</span><span class="op" id="8342185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342188">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342192">Header</span><span class="op" id="8342198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342203">&#34;Expires&#34;</span><span class="op" id="8342212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8342223">{</span><span class="string" id="8342224">&#34;-1&#34;</span><span class="op" id="8342228">}</span><span class="op" id="8342229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342234">&#34;Content-Length&#34;</span><span class="op" id="8342250">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8342254">{</span><span class="string" id="8342255">&#34;0&#34;</span><span class="op" id="8342258">,</span>&nbsp;<span class="string" id="8342260">&#34;1&#34;</span><span class="op" id="8342263">,</span>&nbsp;<span class="string" id="8342265">&#34;2&#34;</span><span class="op" id="8342268">}</span><span class="op" id="8342269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342274">&#34;Content-Encoding&#34;</span><span class="op" id="8342292">:</span>&nbsp;<span class="op" id="8342294">{</span><span class="string" id="8342295">&#34;gzip&#34;</span><span class="op" id="8342301">}</span><span class="op" id="8342302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342306">}</span><span class="op" id="8342307">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8342311">map</span><span class="op" id="8342314">[</span><span class="builtintype" id="8342315">string</span><span class="op" id="8342321">]</span><span class="builtintype" id="8342322">bool</span><span class="op" id="8342326">{</span><span class="string" id="8342327">&#34;Content-Length&#34;</span><span class="op" id="8342343">:</span>&nbsp;<span class="builtintype" id="8342345">true</span><span class="op" id="8342349">}</span><span class="op" id="8342350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342354">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="8342397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342400">}</span><span class="op" id="8342401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342408">Header</span><span class="op" id="8342414">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342419">&#34;Expires&#34;</span><span class="op" id="8342428">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8342439">{</span><span class="string" id="8342440">&#34;-1&#34;</span><span class="op" id="8342444">}</span><span class="op" id="8342445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342450">&#34;Content-Length&#34;</span><span class="op" id="8342466">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8342470">{</span><span class="string" id="8342471">&#34;0&#34;</span><span class="op" id="8342474">}</span><span class="op" id="8342475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342480">&#34;Content-Encoding&#34;</span><span class="op" id="8342498">:</span>&nbsp;<span class="op" id="8342500">{</span><span class="string" id="8342501">&#34;gzip&#34;</span><span class="op" id="8342507">}</span><span class="op" id="8342508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342512">}</span><span class="op" id="8342513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8342517">map</span><span class="op" id="8342520">[</span><span class="builtintype" id="8342521">string</span><span class="op" id="8342527">]</span><span class="builtintype" id="8342528">bool</span><span class="op" id="8342532">{</span><span class="string" id="8342533">&#34;Content-Length&#34;</span><span class="op" id="8342549">:</span>&nbsp;<span class="builtintype" id="8342551">true</span><span class="op" id="8342555">,</span>&nbsp;<span class="string" id="8342557">&#34;Expires&#34;</span><span class="op" id="8342566">:</span>&nbsp;<span class="builtintype" id="8342568">true</span><span class="op" id="8342572">,</span>&nbsp;<span class="string" id="8342574">&#34;Content-Encoding&#34;</span><span class="op" id="8342592">:</span>&nbsp;<span class="builtintype" id="8342594">true</span><span class="op" id="8342598">}</span><span class="op" id="8342599">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342603">&#34;&#34;</span><span class="op" id="8342605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342608">}</span><span class="op" id="8342609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342616">Header</span><span class="op" id="8342622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342627">&#34;Nil&#34;</span><span class="op" id="8342632">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8342643">nil</span><span class="op" id="8342646">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342651">&#34;Empty&#34;</span><span class="op" id="8342658">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8342667">{</span><span class="op" id="8342668">}</span><span class="op" id="8342669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342674">&#34;Blank&#34;</span><span class="op" id="8342681">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8342690">{</span><span class="string" id="8342691">&#34;&#34;</span><span class="op" id="8342693">}</span><span class="op" id="8342694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342699">&#34;Double-Blank&#34;</span><span class="op" id="8342713">:</span>&nbsp;<span class="op" id="8342715">{</span><span class="string" id="8342716">&#34;&#34;</span><span class="op" id="8342718">,</span>&nbsp;<span class="string" id="8342720">&#34;&#34;</span><span class="op" id="8342722">}</span><span class="op" id="8342723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342727">}</span><span class="op" id="8342728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342732">nil</span><span class="op" id="8342735">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342739">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="8342788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342791">}</span><span class="op" id="8342792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8342795">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8342865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8342869">Header</span><span class="op" id="8342875">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342880">&#34;k1&#34;</span><span class="op" id="8342884">:</span>&nbsp;<span class="op" id="8342886">{</span><span class="string" id="8342887">&#34;1a&#34;</span><span class="op" id="8342891">,</span>&nbsp;<span class="string" id="8342893">&#34;1b&#34;</span><span class="op" id="8342897">}</span><span class="op" id="8342898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342903">&#34;k2&#34;</span><span class="op" id="8342907">:</span>&nbsp;<span class="op" id="8342909">{</span><span class="string" id="8342910">&#34;2a&#34;</span><span class="op" id="8342914">,</span>&nbsp;<span class="string" id="8342916">&#34;2b&#34;</span><span class="op" id="8342920">}</span><span class="op" id="8342921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342926">&#34;k3&#34;</span><span class="op" id="8342930">:</span>&nbsp;<span class="op" id="8342932">{</span><span class="string" id="8342933">&#34;3a&#34;</span><span class="op" id="8342937">,</span>&nbsp;<span class="string" id="8342939">&#34;3b&#34;</span><span class="op" id="8342943">}</span><span class="op" id="8342944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342949">&#34;k4&#34;</span><span class="op" id="8342953">:</span>&nbsp;<span class="op" id="8342955">{</span><span class="string" id="8342956">&#34;4a&#34;</span><span class="op" id="8342960">,</span>&nbsp;<span class="string" id="8342962">&#34;4b&#34;</span><span class="op" id="8342966">}</span><span class="op" id="8342967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342972">&#34;k5&#34;</span><span class="op" id="8342976">:</span>&nbsp;<span class="op" id="8342978">{</span><span class="string" id="8342979">&#34;5a&#34;</span><span class="op" id="8342983">,</span>&nbsp;<span class="string" id="8342985">&#34;5b&#34;</span><span class="op" id="8342989">}</span><span class="op" id="8342990">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8342995">&#34;k6&#34;</span><span class="op" id="8342999">:</span>&nbsp;<span class="op" id="8343001">{</span><span class="string" id="8343002">&#34;6a&#34;</span><span class="op" id="8343006">,</span>&nbsp;<span class="string" id="8343008">&#34;6b&#34;</span><span class="op" id="8343012">}</span><span class="op" id="8343013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8343018">&#34;k7&#34;</span><span class="op" id="8343022">:</span>&nbsp;<span class="op" id="8343024">{</span><span class="string" id="8343025">&#34;7a&#34;</span><span class="op" id="8343029">,</span>&nbsp;<span class="string" id="8343031">&#34;7b&#34;</span><span class="op" id="8343035">}</span><span class="op" id="8343036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8343041">&#34;k8&#34;</span><span class="op" id="8343045">:</span>&nbsp;<span class="op" id="8343047">{</span><span class="string" id="8343048">&#34;8a&#34;</span><span class="op" id="8343052">,</span>&nbsp;<span class="string" id="8343054">&#34;8b&#34;</span><span class="op" id="8343058">}</span><span class="op" id="8343059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8343064">&#34;k9&#34;</span><span class="op" id="8343068">:</span>&nbsp;<span class="op" id="8343070">{</span><span class="string" id="8343071">&#34;9a&#34;</span><span class="op" id="8343075">,</span>&nbsp;<span class="string" id="8343077">&#34;9b&#34;</span><span class="op" id="8343081">}</span><span class="op" id="8343082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343086">}</span><span class="op" id="8343087">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8343091">map</span><span class="op" id="8343094">[</span><span class="builtintype" id="8343095">string</span><span class="op" id="8343101">]</span><span class="builtintype" id="8343102">bool</span><span class="op" id="8343106">{</span><span class="string" id="8343107">&#34;k5&#34;</span><span class="op" id="8343111">:</span>&nbsp;<span class="builtintype" id="8343113">true</span><span class="op" id="8343117">}</span><span class="op" id="8343118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8343122">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="8343185">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8343190">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="8343233">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8343238">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="8343300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343303">}</span><span class="op" id="8343304">,</span><br>
<span class="lineno">90</span><span class="op" id="8343306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8343309">func</span>&nbsp;<span class="ident" id="8343314">TestHeaderWrite</span><span class="op" id="8343329">(</span><span class="ident" id="8343330">t</span>&nbsp;<span class="op" id="8343332">*</span><span class="ident" id="8343333">testing</span><span class="op" id="8343340">.</span><span class="ident" id="8343341">T</span><span class="op" id="8343342">)</span>&nbsp;<span class="op" id="8343344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8343347">var</span>&nbsp;<span class="ident" id="8343351">buf</span>&nbsp;<span class="ident" id="8343355">bytes</span><span class="op" id="8343360">.</span><span class="ident" id="8343361">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8343369">for</span>&nbsp;<span class="ident" id="8343373">i</span><span class="op" id="8343374">,</span>&nbsp;<span class="ident" id="8343376">test</span>&nbsp;<span class="op" id="8343381">:=</span>&nbsp;<span class="keyword" id="8343384">range</span>&nbsp;<span class="ident" id="8343390">headerWriteTests</span>&nbsp;<span class="op" id="8343407">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343411">test</span><span class="op" id="8343415">.</span><span class="ident" id="8343416">h</span><span class="op" id="8343417">.</span><span class="ident" id="8343418">WriteSubset</span><span class="op" id="8343429">(</span><span class="op" id="8343430">&amp;</span><span class="ident" id="8343431">buf</span><span class="op" id="8343434">,</span>&nbsp;<span class="ident" id="8343436">test</span><span class="op" id="8343440">.</span><span class="ident" id="8343441">exclude</span><span class="op" id="8343448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8343452">if</span>&nbsp;<span class="ident" id="8343455">buf</span><span class="op" id="8343458">.</span><span class="ident" id="8343459">String</span><span class="op" id="8343465">(</span><span class="op" id="8343466">)</span>&nbsp;<span class="op" id="8343468">!=</span>&nbsp;<span class="ident" id="8343471">test</span><span class="op" id="8343475">.</span><span class="ident" id="8343476">expected</span>&nbsp;<span class="op" id="8343485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343490">t</span><span class="op" id="8343491">.</span><span class="ident" id="8343492">Errorf</span><span class="op" id="8343498">(</span><span class="string" id="8343499">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="8343525">,</span>&nbsp;<span class="ident" id="8343527">i</span><span class="op" id="8343528">,</span>&nbsp;<span class="ident" id="8343530">buf</span><span class="op" id="8343533">.</span><span class="ident" id="8343534">String</span><span class="op" id="8343540">(</span><span class="op" id="8343541">)</span><span class="op" id="8343542">,</span>&nbsp;<span class="ident" id="8343544">test</span><span class="op" id="8343548">.</span><span class="ident" id="8343549">expected</span><span class="op" id="8343557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343565">buf</span><span class="op" id="8343568">.</span><span class="ident" id="8343569">Reset</span><span class="op" id="8343574">(</span><span class="op" id="8343575">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343578">}</span><br>
<span class="lineno"></span><span class="op" id="8343580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8343583">var</span>&nbsp;<span class="ident" id="8343587">parseTimeTests</span>&nbsp;<span class="op" id="8343602">=</span>&nbsp;<span class="op" id="8343604">[</span><span class="op" id="8343605">]</span><span class="keyword" id="8343606">struct</span>&nbsp;<span class="op" id="8343613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343616">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8343620">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343628">err</span>&nbsp;<span class="builtintype" id="8343632">bool</span><br>
<span class="lineno"></span><span class="op" id="8343637">}</span><span class="op" id="8343638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343641">{</span><span class="ident" id="8343642">Header</span><span class="op" id="8343648">{</span><span class="string" id="8343649">&#34;Date&#34;</span><span class="op" id="8343655">:</span>&nbsp;<span class="op" id="8343657">{</span><span class="string" id="8343658">&#34;&#34;</span><span class="op" id="8343660">}</span><span class="op" id="8343661">}</span><span class="op" id="8343662">,</span>&nbsp;<span class="builtintype" id="8343664">true</span><span class="op" id="8343668">}</span><span class="op" id="8343669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343672">{</span><span class="ident" id="8343673">Header</span><span class="op" id="8343679">{</span><span class="string" id="8343680">&#34;Date&#34;</span><span class="op" id="8343686">:</span>&nbsp;<span class="op" id="8343688">{</span><span class="string" id="8343689">&#34;invalid&#34;</span><span class="op" id="8343698">}</span><span class="op" id="8343699">}</span><span class="op" id="8343700">,</span>&nbsp;<span class="builtintype" id="8343702">true</span><span class="op" id="8343706">}</span><span class="op" id="8343707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343710">{</span><span class="ident" id="8343711">Header</span><span class="op" id="8343717">{</span><span class="string" id="8343718">&#34;Date&#34;</span><span class="op" id="8343724">:</span>&nbsp;<span class="op" id="8343726">{</span><span class="string" id="8343727">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="8343754">}</span><span class="op" id="8343755">}</span><span class="op" id="8343756">,</span>&nbsp;<span class="builtintype" id="8343758">true</span><span class="op" id="8343762">}</span><span class="op" id="8343763">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343766">{</span><span class="ident" id="8343767">Header</span><span class="op" id="8343773">{</span><span class="string" id="8343774">&#34;Date&#34;</span><span class="op" id="8343780">:</span>&nbsp;<span class="op" id="8343782">{</span><span class="string" id="8343783">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="8343814">}</span><span class="op" id="8343815">}</span><span class="op" id="8343816">,</span>&nbsp;<span class="builtintype" id="8343818">false</span><span class="op" id="8343823">}</span><span class="op" id="8343824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343827">{</span><span class="ident" id="8343828">Header</span><span class="op" id="8343834">{</span><span class="string" id="8343835">&#34;Date&#34;</span><span class="op" id="8343841">:</span>&nbsp;<span class="op" id="8343843">{</span><span class="string" id="8343844">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="8343876">}</span><span class="op" id="8343877">}</span><span class="op" id="8343878">,</span>&nbsp;<span class="builtintype" id="8343880">false</span><span class="op" id="8343885">}</span><span class="op" id="8343886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8343889">{</span><span class="ident" id="8343890">Header</span><span class="op" id="8343896">{</span><span class="string" id="8343897">&#34;Date&#34;</span><span class="op" id="8343903">:</span>&nbsp;<span class="op" id="8343905">{</span><span class="string" id="8343906">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="8343932">}</span><span class="op" id="8343933">}</span><span class="op" id="8343934">,</span>&nbsp;<span class="builtintype" id="8343936">false</span><span class="op" id="8343941">}</span><span class="op" id="8343942">,</span><br>
<span class="lineno"></span><span class="op" id="8343944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="8343947">func</span>&nbsp;<span class="ident" id="8343952">TestParseTime</span><span class="op" id="8343965">(</span><span class="ident" id="8343966">t</span>&nbsp;<span class="op" id="8343968">*</span><span class="ident" id="8343969">testing</span><span class="op" id="8343976">.</span><span class="ident" id="8343977">T</span><span class="op" id="8343978">)</span>&nbsp;<span class="op" id="8343980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8343983">expect</span>&nbsp;<span class="op" id="8343990">:=</span>&nbsp;<span class="ident" id="8343993">time</span><span class="op" id="8343997">.</span><span class="ident" id="8343998">Date</span><span class="op" id="8344002">(</span><span class="num" id="8344003">1994</span><span class="op" id="8344007">,</span>&nbsp;<span class="num" id="8344009">11</span><span class="op" id="8344011">,</span>&nbsp;<span class="num" id="8344013">6</span><span class="op" id="8344014">,</span>&nbsp;<span class="num" id="8344016">8</span><span class="op" id="8344017">,</span>&nbsp;<span class="num" id="8344019">49</span><span class="op" id="8344021">,</span>&nbsp;<span class="num" id="8344023">37</span><span class="op" id="8344025">,</span>&nbsp;<span class="num" id="8344027">0</span><span class="op" id="8344028">,</span>&nbsp;<span class="ident" id="8344030">time</span><span class="op" id="8344034">.</span><span class="ident" id="8344035">UTC</span><span class="op" id="8344038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344041">for</span>&nbsp;<span class="ident" id="8344045">i</span><span class="op" id="8344046">,</span>&nbsp;<span class="ident" id="8344048">test</span>&nbsp;<span class="op" id="8344053">:=</span>&nbsp;<span class="keyword" id="8344056">range</span>&nbsp;<span class="ident" id="8344062">parseTimeTests</span>&nbsp;<span class="op" id="8344077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344081">d</span><span class="op" id="8344082">,</span>&nbsp;<span class="ident" id="8344084">err</span>&nbsp;<span class="op" id="8344088">:=</span>&nbsp;<span class="ident" id="8344091">ParseTime</span><span class="op" id="8344100">(</span><span class="ident" id="8344101">test</span><span class="op" id="8344105">.</span><span class="ident" id="8344106">h</span><span class="op" id="8344107">.</span><span class="ident" id="8344108">Get</span><span class="op" id="8344111">(</span><span class="string" id="8344112">&#34;Date&#34;</span><span class="op" id="8344118">)</span><span class="op" id="8344119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344123">if</span>&nbsp;<span class="ident" id="8344126">err</span>&nbsp;<span class="op" id="8344130">!=</span>&nbsp;<span class="ident" id="8344133">nil</span>&nbsp;<span class="op" id="8344137">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344142">if</span>&nbsp;<span class="op" id="8344145">!</span><span class="ident" id="8344146">test</span><span class="op" id="8344150">.</span><span class="ident" id="8344151">err</span>&nbsp;<span class="op" id="8344155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344161">t</span><span class="op" id="8344162">.</span><span class="ident" id="8344163">Errorf</span><span class="op" id="8344169">(</span><span class="string" id="8344170">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="8344190">,</span>&nbsp;<span class="ident" id="8344192">i</span><span class="op" id="8344193">,</span>&nbsp;<span class="ident" id="8344195">err</span><span class="op" id="8344198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344208">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344219">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344223">if</span>&nbsp;<span class="ident" id="8344226">test</span><span class="op" id="8344230">.</span><span class="ident" id="8344231">err</span>&nbsp;<span class="op" id="8344235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344240">t</span><span class="op" id="8344241">.</span><span class="ident" id="8344242">Errorf</span><span class="op" id="8344248">(</span><span class="string" id="8344249">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="8344269">,</span>&nbsp;<span class="ident" id="8344271">i</span><span class="op" id="8344272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344277">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8344292">if</span>&nbsp;<span class="op" id="8344295">!</span><span class="ident" id="8344296">expect</span><span class="op" id="8344302">.</span><span class="ident" id="8344303">Equal</span><span class="op" id="8344308">(</span><span class="ident" id="8344309">d</span><span class="op" id="8344310">)</span>&nbsp;<span class="op" id="8344312">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344317">t</span><span class="op" id="8344318">.</span><span class="ident" id="8344319">Errorf</span><span class="op" id="8344325">(</span><span class="string" id="8344326">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="8344352">,</span>&nbsp;<span class="ident" id="8344354">i</span><span class="op" id="8344355">,</span>&nbsp;<span class="ident" id="8344357">d</span><span class="op" id="8344358">,</span>&nbsp;<span class="ident" id="8344360">expect</span><span class="op" id="8344366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344373">}</span><br>
<span class="lineno"></span><span class="op" id="8344375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8344378">type</span>&nbsp;<span class="ident" id="8344383">hasTokenTest</span>&nbsp;<span class="keyword" id="8344396">struct</span>&nbsp;<span class="op" id="8344403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344406">header</span>&nbsp;<span class="builtintype" id="8344413">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344421">token</span>&nbsp;&nbsp;<span class="builtintype" id="8344428">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8344436">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8344443">bool</span><br>
<span class="lineno"></span><span class="op" id="8344448">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8344451">var</span>&nbsp;<span class="ident" id="8344455">hasTokenTests</span>&nbsp;<span class="op" id="8344469">=</span>&nbsp;<span class="op" id="8344471">[</span><span class="op" id="8344472">]</span><span class="ident" id="8344473">hasTokenTest</span><span class="op" id="8344485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344488">{</span><span class="string" id="8344489">&#34;&#34;</span><span class="op" id="8344491">,</span>&nbsp;<span class="string" id="8344493">&#34;&#34;</span><span class="op" id="8344495">,</span>&nbsp;<span class="builtintype" id="8344497">false</span><span class="op" id="8344502">}</span><span class="op" id="8344503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344506">{</span><span class="string" id="8344507">&#34;&#34;</span><span class="op" id="8344509">,</span>&nbsp;<span class="string" id="8344511">&#34;foo&#34;</span><span class="op" id="8344516">,</span>&nbsp;<span class="builtintype" id="8344518">false</span><span class="op" id="8344523">}</span><span class="op" id="8344524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344527">{</span><span class="string" id="8344528">&#34;foo&#34;</span><span class="op" id="8344533">,</span>&nbsp;<span class="string" id="8344535">&#34;foo&#34;</span><span class="op" id="8344540">,</span>&nbsp;<span class="builtintype" id="8344542">true</span><span class="op" id="8344546">}</span><span class="op" id="8344547">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344550">{</span><span class="string" id="8344551">&#34;foo&nbsp;&#34;</span><span class="op" id="8344557">,</span>&nbsp;<span class="string" id="8344559">&#34;foo&#34;</span><span class="op" id="8344564">,</span>&nbsp;<span class="builtintype" id="8344566">true</span><span class="op" id="8344570">}</span><span class="op" id="8344571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344574">{</span><span class="string" id="8344575">&#34;&nbsp;foo&#34;</span><span class="op" id="8344581">,</span>&nbsp;<span class="string" id="8344583">&#34;foo&#34;</span><span class="op" id="8344588">,</span>&nbsp;<span class="builtintype" id="8344590">true</span><span class="op" id="8344594">}</span><span class="op" id="8344595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344598">{</span><span class="string" id="8344599">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="8344606">,</span>&nbsp;<span class="string" id="8344608">&#34;foo&#34;</span><span class="op" id="8344613">,</span>&nbsp;<span class="builtintype" id="8344615">true</span><span class="op" id="8344619">}</span><span class="op" id="8344620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344623">{</span><span class="string" id="8344624">&#34;foo,bar&#34;</span><span class="op" id="8344633">,</span>&nbsp;<span class="string" id="8344635">&#34;foo&#34;</span><span class="op" id="8344640">,</span>&nbsp;<span class="builtintype" id="8344642">true</span><span class="op" id="8344646">}</span><span class="op" id="8344647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344650">{</span><span class="string" id="8344651">&#34;bar,foo&#34;</span><span class="op" id="8344660">,</span>&nbsp;<span class="string" id="8344662">&#34;foo&#34;</span><span class="op" id="8344667">,</span>&nbsp;<span class="builtintype" id="8344669">true</span><span class="op" id="8344673">}</span><span class="op" id="8344674">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344677">{</span><span class="string" id="8344678">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="8344688">,</span>&nbsp;<span class="string" id="8344690">&#34;foo&#34;</span><span class="op" id="8344695">,</span>&nbsp;<span class="builtintype" id="8344697">true</span><span class="op" id="8344701">}</span><span class="op" id="8344702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344705">{</span><span class="string" id="8344706">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="8344720">,</span>&nbsp;<span class="string" id="8344722">&#34;foo&#34;</span><span class="op" id="8344727">,</span>&nbsp;<span class="builtintype" id="8344729">true</span><span class="op" id="8344733">}</span><span class="op" id="8344734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344737">{</span><span class="string" id="8344738">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="8344752">,</span>&nbsp;<span class="string" id="8344754">&#34;foo&#34;</span><span class="op" id="8344759">,</span>&nbsp;<span class="builtintype" id="8344761">true</span><span class="op" id="8344765">}</span><span class="op" id="8344766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344769">{</span><span class="string" id="8344770">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="8344784">,</span>&nbsp;<span class="string" id="8344786">&#34;foo&#34;</span><span class="op" id="8344791">,</span>&nbsp;<span class="builtintype" id="8344793">true</span><span class="op" id="8344797">}</span><span class="op" id="8344798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344801">{</span><span class="string" id="8344802">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="8344817">,</span>&nbsp;<span class="string" id="8344819">&#34;foo&#34;</span><span class="op" id="8344824">,</span>&nbsp;<span class="builtintype" id="8344826">true</span><span class="op" id="8344830">}</span><span class="op" id="8344831">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344834">{</span><span class="string" id="8344835">&#34;FOO&#34;</span><span class="op" id="8344840">,</span>&nbsp;<span class="string" id="8344842">&#34;foo&#34;</span><span class="op" id="8344847">,</span>&nbsp;<span class="builtintype" id="8344849">true</span><span class="op" id="8344853">}</span><span class="op" id="8344854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344857">{</span><span class="string" id="8344858">&#34;FOO&nbsp;&#34;</span><span class="op" id="8344864">,</span>&nbsp;<span class="string" id="8344866">&#34;foo&#34;</span><span class="op" id="8344871">,</span>&nbsp;<span class="builtintype" id="8344873">true</span><span class="op" id="8344877">}</span><span class="op" id="8344878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344881">{</span><span class="string" id="8344882">&#34;&nbsp;FOO&#34;</span><span class="op" id="8344888">,</span>&nbsp;<span class="string" id="8344890">&#34;foo&#34;</span><span class="op" id="8344895">,</span>&nbsp;<span class="builtintype" id="8344897">true</span><span class="op" id="8344901">}</span><span class="op" id="8344902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344905">{</span><span class="string" id="8344906">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="8344913">,</span>&nbsp;<span class="string" id="8344915">&#34;foo&#34;</span><span class="op" id="8344920">,</span>&nbsp;<span class="builtintype" id="8344922">true</span><span class="op" id="8344926">}</span><span class="op" id="8344927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344930">{</span><span class="string" id="8344931">&#34;FOO,BAR&#34;</span><span class="op" id="8344940">,</span>&nbsp;<span class="string" id="8344942">&#34;foo&#34;</span><span class="op" id="8344947">,</span>&nbsp;<span class="builtintype" id="8344949">true</span><span class="op" id="8344953">}</span><span class="op" id="8344954">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344957">{</span><span class="string" id="8344958">&#34;BAR,FOO&#34;</span><span class="op" id="8344967">,</span>&nbsp;<span class="string" id="8344969">&#34;foo&#34;</span><span class="op" id="8344974">,</span>&nbsp;<span class="builtintype" id="8344976">true</span><span class="op" id="8344980">}</span><span class="op" id="8344981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8344984">{</span><span class="string" id="8344985">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="8344995">,</span>&nbsp;<span class="string" id="8344997">&#34;foo&#34;</span><span class="op" id="8345002">,</span>&nbsp;<span class="builtintype" id="8345004">true</span><span class="op" id="8345008">}</span><span class="op" id="8345009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345012">{</span><span class="string" id="8345013">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="8345027">,</span>&nbsp;<span class="string" id="8345029">&#34;foo&#34;</span><span class="op" id="8345034">,</span>&nbsp;<span class="builtintype" id="8345036">true</span><span class="op" id="8345040">}</span><span class="op" id="8345041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345044">{</span><span class="string" id="8345045">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="8345059">,</span>&nbsp;<span class="string" id="8345061">&#34;foo&#34;</span><span class="op" id="8345066">,</span>&nbsp;<span class="builtintype" id="8345068">true</span><span class="op" id="8345072">}</span><span class="op" id="8345073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345076">{</span><span class="string" id="8345077">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="8345091">,</span>&nbsp;<span class="string" id="8345093">&#34;foo&#34;</span><span class="op" id="8345098">,</span>&nbsp;<span class="builtintype" id="8345100">true</span><span class="op" id="8345104">}</span><span class="op" id="8345105">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345108">{</span><span class="string" id="8345109">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="8345124">,</span>&nbsp;<span class="string" id="8345126">&#34;foo&#34;</span><span class="op" id="8345131">,</span>&nbsp;<span class="builtintype" id="8345133">true</span><span class="op" id="8345137">}</span><span class="op" id="8345138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345141">{</span><span class="string" id="8345142">&#34;foobar&#34;</span><span class="op" id="8345150">,</span>&nbsp;<span class="string" id="8345152">&#34;foo&#34;</span><span class="op" id="8345157">,</span>&nbsp;<span class="builtintype" id="8345159">false</span><span class="op" id="8345164">}</span><span class="op" id="8345165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345168">{</span><span class="string" id="8345169">&#34;barfoo&nbsp;&#34;</span><span class="op" id="8345178">,</span>&nbsp;<span class="string" id="8345180">&#34;foo&#34;</span><span class="op" id="8345185">,</span>&nbsp;<span class="builtintype" id="8345187">false</span><span class="op" id="8345192">}</span><span class="op" id="8345193">,</span><br>
<span class="lineno"></span><span class="op" id="8345195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8345198">func</span>&nbsp;<span class="ident" id="8345203">TestHasToken</span><span class="op" id="8345215">(</span><span class="ident" id="8345216">t</span>&nbsp;<span class="op" id="8345218">*</span><span class="ident" id="8345219">testing</span><span class="op" id="8345226">.</span><span class="ident" id="8345227">T</span><span class="op" id="8345228">)</span>&nbsp;<span class="op" id="8345230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345233">for</span>&nbsp;<span class="ident" id="8345237">_</span><span class="op" id="8345238">,</span>&nbsp;<span class="ident" id="8345240">tt</span>&nbsp;<span class="op" id="8345243">:=</span>&nbsp;<span class="keyword" id="8345246">range</span>&nbsp;<span class="ident" id="8345252">hasTokenTests</span>&nbsp;<span class="op" id="8345266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345270">if</span>&nbsp;<span class="ident" id="8345273">hasToken</span><span class="op" id="8345281">(</span><span class="ident" id="8345282">tt</span><span class="op" id="8345284">.</span><span class="ident" id="8345285">header</span><span class="op" id="8345291">,</span>&nbsp;<span class="ident" id="8345293">tt</span><span class="op" id="8345295">.</span><span class="ident" id="8345296">token</span><span class="op" id="8345301">)</span>&nbsp;<span class="op" id="8345303">!=</span>&nbsp;<span class="ident" id="8345306">tt</span><span class="op" id="8345308">.</span><span class="ident" id="8345309">want</span>&nbsp;<span class="op" id="8345314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345319">t</span><span class="op" id="8345320">.</span><span class="ident" id="8345321">Errorf</span><span class="op" id="8345327">(</span><span class="string" id="8345328">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8345360">,</span>&nbsp;<span class="ident" id="8345362">tt</span><span class="op" id="8345364">.</span><span class="ident" id="8345365">header</span><span class="op" id="8345371">,</span>&nbsp;<span class="ident" id="8345373">tt</span><span class="op" id="8345375">.</span><span class="ident" id="8345376">token</span><span class="op" id="8345381">,</span>&nbsp;<span class="op" id="8345383">!</span><span class="ident" id="8345384">tt</span><span class="op" id="8345386">.</span><span class="ident" id="8345387">want</span><span class="op" id="8345391">,</span>&nbsp;<span class="ident" id="8345393">tt</span><span class="op" id="8345395">.</span><span class="ident" id="8345396">want</span><span class="op" id="8345400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345404">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345407">}</span><br>
<span class="lineno"></span><span class="op" id="8345409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8345412">var</span>&nbsp;<span class="ident" id="8345416">testHeader</span>&nbsp;<span class="op" id="8345427">=</span>&nbsp;<span class="ident" id="8345429">Header</span><span class="op" id="8345435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8345438">&#34;Content-Length&#34;</span><span class="op" id="8345454">:</span>&nbsp;<span class="op" id="8345456">{</span><span class="string" id="8345457">&#34;123&#34;</span><span class="op" id="8345462">}</span><span class="op" id="8345463">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8345466">&#34;Content-Type&#34;</span><span class="op" id="8345480">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8345484">{</span><span class="string" id="8345485">&#34;text/plain&#34;</span><span class="op" id="8345497">}</span><span class="op" id="8345498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8345501">&#34;Date&#34;</span><span class="op" id="8345507">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8345519">{</span><span class="string" id="8345520">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="8345546">}</span><span class="op" id="8345547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8345550">&#34;Server&#34;</span><span class="op" id="8345558">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8345568">{</span><span class="ident" id="8345569">DefaultUserAgent</span><span class="op" id="8345585">}</span><span class="op" id="8345586">,</span><br>
<span class="lineno"></span><span class="op" id="8345588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="8345591">var</span>&nbsp;<span class="ident" id="8345595">buf</span>&nbsp;<span class="ident" id="8345599">bytes</span><span class="op" id="8345604">.</span><span class="ident" id="8345605">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8345613">func</span>&nbsp;<span class="ident" id="8345618">BenchmarkHeaderWriteSubset</span><span class="op" id="8345644">(</span><span class="ident" id="8345645">b</span>&nbsp;<span class="op" id="8345647">*</span><span class="ident" id="8345648">testing</span><span class="op" id="8345655">.</span><span class="ident" id="8345656">B</span><span class="op" id="8345657">)</span>&nbsp;<span class="op" id="8345659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345662">b</span><span class="op" id="8345663">.</span><span class="ident" id="8345664">ReportAllocs</span><span class="op" id="8345676">(</span><span class="op" id="8345677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345680">for</span>&nbsp;<span class="ident" id="8345684">i</span>&nbsp;<span class="op" id="8345686">:=</span>&nbsp;<span class="num" id="8345689">0</span><span class="op" id="8345690">;</span>&nbsp;<span class="ident" id="8345692">i</span>&nbsp;<span class="op" id="8345694">&lt;</span>&nbsp;<span class="ident" id="8345696">b</span><span class="op" id="8345697">.</span><span class="ident" id="8345698">N</span><span class="op" id="8345699">;</span>&nbsp;<span class="ident" id="8345701">i</span><span class="op" id="8345702">++</span>&nbsp;<span class="op" id="8345705">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345709">buf</span><span class="op" id="8345712">.</span><span class="ident" id="8345713">Reset</span><span class="op" id="8345718">(</span><span class="op" id="8345719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345723">testHeader</span><span class="op" id="8345733">.</span><span class="ident" id="8345734">WriteSubset</span><span class="op" id="8345745">(</span><span class="op" id="8345746">&amp;</span><span class="ident" id="8345747">buf</span><span class="op" id="8345750">,</span>&nbsp;<span class="ident" id="8345752">nil</span><span class="op" id="8345755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345758">}</span><br>
<span class="lineno"></span><span class="op" id="8345760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="8345763">func</span>&nbsp;<span class="ident" id="8345768">TestHeaderWriteSubsetAllocs</span><span class="op" id="8345795">(</span><span class="ident" id="8345796">t</span>&nbsp;<span class="op" id="8345798">*</span><span class="ident" id="8345799">testing</span><span class="op" id="8345806">.</span><span class="ident" id="8345807">T</span><span class="op" id="8345808">)</span>&nbsp;<span class="op" id="8345810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345813">if</span>&nbsp;<span class="ident" id="8345816">testing</span><span class="op" id="8345823">.</span><span class="ident" id="8345824">Short</span><span class="op" id="8345829">(</span><span class="op" id="8345830">)</span>&nbsp;<span class="op" id="8345832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345836">t</span><span class="op" id="8345837">.</span><span class="ident" id="8345838">Skip</span><span class="op" id="8345842">(</span><span class="string" id="8345843">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8345878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345884">if</span>&nbsp;<span class="ident" id="8345887">raceEnabled</span>&nbsp;<span class="op" id="8345899">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345903">t</span><span class="op" id="8345904">.</span><span class="ident" id="8345905">Skip</span><span class="op" id="8345909">(</span><span class="string" id="8345910">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="8345945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8345948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8345951">if</span>&nbsp;<span class="ident" id="8345954">runtime</span><span class="op" id="8345961">.</span><span class="ident" id="8345962">GOMAXPROCS</span><span class="op" id="8345972">(</span><span class="num" id="8345973">0</span><span class="op" id="8345974">)</span>&nbsp;<span class="op" id="8345976">&gt;</span>&nbsp;<span class="num" id="8345978">1</span>&nbsp;<span class="op" id="8345980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8345984">t</span><span class="op" id="8345985">.</span><span class="ident" id="8345986">Skip</span><span class="op" id="8345990">(</span><span class="string" id="8345991">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8346015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8346018">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346021">n</span>&nbsp;<span class="op" id="8346023">:=</span>&nbsp;<span class="ident" id="8346026">testing</span><span class="op" id="8346033">.</span><span class="ident" id="8346034">AllocsPerRun</span><span class="op" id="8346046">(</span><span class="num" id="8346047">100</span><span class="op" id="8346050">,</span>&nbsp;<span class="keyword" id="8346052">func</span><span class="op" id="8346056">(</span><span class="op" id="8346057">)</span>&nbsp;<span class="op" id="8346059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346063">buf</span><span class="op" id="8346066">.</span><span class="ident" id="8346067">Reset</span><span class="op" id="8346072">(</span><span class="op" id="8346073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346077">testHeader</span><span class="op" id="8346087">.</span><span class="ident" id="8346088">WriteSubset</span><span class="op" id="8346099">(</span><span class="op" id="8346100">&amp;</span><span class="ident" id="8346101">buf</span><span class="op" id="8346104">,</span>&nbsp;<span class="ident" id="8346106">nil</span><span class="op" id="8346109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8346112">}</span><span class="op" id="8346113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8346116">if</span>&nbsp;<span class="ident" id="8346119">n</span>&nbsp;<span class="op" id="8346121">&gt;</span>&nbsp;<span class="num" id="8346123">0</span>&nbsp;<span class="op" id="8346125">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8346129">t</span><span class="op" id="8346130">.</span><span class="ident" id="8346131">Errorf</span><span class="op" id="8346137">(</span><span class="string" id="8346138">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="8346159">,</span>&nbsp;<span class="ident" id="8346161">n</span><span class="op" id="8346162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8346165">}</span><br>
<span class="lineno"></span><span class="op" id="8346167">}</span>
</div>
</body>
</html>
