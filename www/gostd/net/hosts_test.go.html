<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html" class="current">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6663377">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6663432">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6663486">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6663537">package</span>&nbsp;<span class="ident" id="6663545">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6663550">import</span>&nbsp;<span class="op" id="6663557">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6663560">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6663568">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6663578">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6663581">type</span>&nbsp;<span class="ident" id="6663586">hostTest</span>&nbsp;<span class="keyword" id="6663595">struct</span>&nbsp;<span class="op" id="6663602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6663605">host</span>&nbsp;<span class="builtintype" id="6663610">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6663618">ips</span>&nbsp;&nbsp;<span class="op" id="6663623">[</span><span class="op" id="6663624">]</span><span class="ident" id="6663625">IP</span><br>
<span class="lineno">15</span><span class="op" id="6663628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6663631">var</span>&nbsp;<span class="ident" id="6663635">hosttests</span>&nbsp;<span class="op" id="6663645">=</span>&nbsp;<span class="op" id="6663647">[</span><span class="op" id="6663648">]</span><span class="ident" id="6663649">hostTest</span><span class="op" id="6663657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6663660">{</span><span class="string" id="6663661">&#34;odin&#34;</span><span class="op" id="6663667">,</span>&nbsp;<span class="op" id="6663669">[</span><span class="op" id="6663670">]</span><span class="ident" id="6663671">IP</span><span class="op" id="6663673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6663677">IPv4</span><span class="op" id="6663681">(</span><span class="num" id="6663682">127</span><span class="op" id="6663685">,</span>&nbsp;<span class="num" id="6663687">0</span><span class="op" id="6663688">,</span>&nbsp;<span class="num" id="6663690">0</span><span class="op" id="6663691">,</span>&nbsp;<span class="num" id="6663693">2</span><span class="op" id="6663694">)</span><span class="op" id="6663695">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6663699">IPv4</span><span class="op" id="6663703">(</span><span class="num" id="6663704">127</span><span class="op" id="6663707">,</span>&nbsp;<span class="num" id="6663709">0</span><span class="op" id="6663710">,</span>&nbsp;<span class="num" id="6663712">0</span><span class="op" id="6663713">,</span>&nbsp;<span class="num" id="6663715">3</span><span class="op" id="6663716">)</span><span class="op" id="6663717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6663721">ParseIP</span><span class="op" id="6663728">(</span><span class="string" id="6663729">&#34;::2&#34;</span><span class="op" id="6663734">)</span><span class="op" id="6663735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6663738">}</span><span class="op" id="6663739">}</span><span class="op" id="6663740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6663743">{</span><span class="string" id="6663744">&#34;thor&#34;</span><span class="op" id="6663750">,</span>&nbsp;<span class="op" id="6663752">[</span><span class="op" id="6663753">]</span><span class="ident" id="6663754">IP</span><span class="op" id="6663756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6663760">IPv4</span><span class="op" id="6663764">(</span><span class="num" id="6663765">127</span><span class="op" id="6663768">,</span>&nbsp;<span class="num" id="6663770">1</span><span class="op" id="6663771">,</span>&nbsp;<span class="num" id="6663773">1</span><span class="op" id="6663774">,</span>&nbsp;<span class="num" id="6663776">1</span><span class="op" id="6663777">)</span><span class="op" id="6663778">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6663781">}</span><span class="op" id="6663782">}</span><span class="op" id="6663783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6663786">{</span><span class="string" id="6663787">&#34;loki&#34;</span><span class="op" id="6663793">,</span>&nbsp;<span class="op" id="6663795">[</span><span class="op" id="6663796">]</span><span class="ident" id="6663797">IP</span><span class="op" id="6663799">{</span><span class="op" id="6663800">}</span><span class="op" id="6663801">}</span><span class="op" id="6663802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6663805">{</span><span class="string" id="6663806">&#34;ullr&#34;</span><span class="op" id="6663812">,</span>&nbsp;<span class="op" id="6663814">[</span><span class="op" id="6663815">]</span><span class="ident" id="6663816">IP</span><span class="op" id="6663818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6663822">IPv4</span><span class="op" id="6663826">(</span><span class="num" id="6663827">127</span><span class="op" id="6663830">,</span>&nbsp;<span class="num" id="6663832">1</span><span class="op" id="6663833">,</span>&nbsp;<span class="num" id="6663835">1</span><span class="op" id="6663836">,</span>&nbsp;<span class="num" id="6663838">2</span><span class="op" id="6663839">)</span><span class="op" id="6663840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6663843">}</span><span class="op" id="6663844">}</span><span class="op" id="6663845">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6663848">{</span><span class="string" id="6663849">&#34;ullrhost&#34;</span><span class="op" id="6663859">,</span>&nbsp;<span class="op" id="6663861">[</span><span class="op" id="6663862">]</span><span class="ident" id="6663863">IP</span><span class="op" id="6663865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6663869">IPv4</span><span class="op" id="6663873">(</span><span class="num" id="6663874">127</span><span class="op" id="6663877">,</span>&nbsp;<span class="num" id="6663879">1</span><span class="op" id="6663880">,</span>&nbsp;<span class="num" id="6663882">1</span><span class="op" id="6663883">,</span>&nbsp;<span class="num" id="6663885">2</span><span class="op" id="6663886">)</span><span class="op" id="6663887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6663890">}</span><span class="op" id="6663891">}</span><span class="op" id="6663892">,</span><br>
<span class="lineno"></span><span class="op" id="6663894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6663897">func</span>&nbsp;<span class="ident" id="6663902">TestLookupStaticHost</span><span class="op" id="6663922">(</span><span class="ident" id="6663923">t</span>&nbsp;<span class="op" id="6663925">*</span><span class="ident" id="6663926">testing</span><span class="op" id="6663933">.</span><span class="ident" id="6663934">T</span><span class="op" id="6663935">)</span>&nbsp;<span class="op" id="6663937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6663940">p</span>&nbsp;<span class="op" id="6663942">:=</span>&nbsp;<span class="ident" id="6663945">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6663956">hostsPath</span>&nbsp;<span class="op" id="6663966">=</span>&nbsp;<span class="string" id="6663968">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6663986">for</span>&nbsp;<span class="ident" id="6663990">i</span>&nbsp;<span class="op" id="6663992">:=</span>&nbsp;<span class="num" id="6663995">0</span><span class="op" id="6663996">;</span>&nbsp;<span class="ident" id="6663998">i</span>&nbsp;<span class="op" id="6664000">&lt;</span>&nbsp;<span class="builtinfunc" id="6664002">len</span><span class="op" id="6664005">(</span><span class="ident" id="6664006">hosttests</span><span class="op" id="6664015">)</span><span class="op" id="6664016">;</span>&nbsp;<span class="ident" id="6664018">i</span><span class="op" id="6664019">++</span>&nbsp;<span class="op" id="6664022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664026">tt</span>&nbsp;<span class="op" id="6664029">:=</span>&nbsp;<span class="ident" id="6664032">hosttests</span><span class="op" id="6664041">[</span><span class="ident" id="6664042">i</span><span class="op" id="6664043">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664047">ips</span>&nbsp;<span class="op" id="6664051">:=</span>&nbsp;<span class="ident" id="6664054">lookupStaticHost</span><span class="op" id="6664070">(</span><span class="ident" id="6664071">tt</span><span class="op" id="6664073">.</span><span class="ident" id="6664074">host</span><span class="op" id="6664078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6664082">if</span>&nbsp;<span class="builtinfunc" id="6664085">len</span><span class="op" id="6664088">(</span><span class="ident" id="6664089">ips</span><span class="op" id="6664092">)</span>&nbsp;<span class="op" id="6664094">!=</span>&nbsp;<span class="builtinfunc" id="6664097">len</span><span class="op" id="6664100">(</span><span class="ident" id="6664101">tt</span><span class="op" id="6664103">.</span><span class="ident" id="6664104">ips</span><span class="op" id="6664107">)</span>&nbsp;<span class="op" id="6664109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664114">t</span><span class="op" id="6664115">.</span><span class="ident" id="6664116">Errorf</span><span class="op" id="6664122">(</span><span class="string" id="6664123">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6664149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6664155">len</span><span class="op" id="6664158">(</span><span class="ident" id="6664159">ips</span><span class="op" id="6664162">)</span><span class="op" id="6664163">,</span>&nbsp;<span class="builtinfunc" id="6664165">len</span><span class="op" id="6664168">(</span><span class="ident" id="6664169">tt</span><span class="op" id="6664171">.</span><span class="ident" id="6664172">ips</span><span class="op" id="6664175">)</span><span class="op" id="6664176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6664181">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6664192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6664196">for</span>&nbsp;<span class="ident" id="6664200">k</span><span class="op" id="6664201">,</span>&nbsp;<span class="ident" id="6664203">v</span>&nbsp;<span class="op" id="6664205">:=</span>&nbsp;<span class="keyword" id="6664208">range</span>&nbsp;<span class="ident" id="6664214">ips</span>&nbsp;<span class="op" id="6664218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6664223">if</span>&nbsp;<span class="ident" id="6664226">tt</span><span class="op" id="6664228">.</span><span class="ident" id="6664229">ips</span><span class="op" id="6664232">[</span><span class="ident" id="6664233">k</span><span class="op" id="6664234">]</span><span class="op" id="6664235">.</span><span class="ident" id="6664236">String</span><span class="op" id="6664242">(</span><span class="op" id="6664243">)</span>&nbsp;<span class="op" id="6664245">!=</span>&nbsp;<span class="ident" id="6664248">v</span>&nbsp;<span class="op" id="6664250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664256">t</span><span class="op" id="6664257">.</span><span class="ident" id="6664258">Errorf</span><span class="op" id="6664264">(</span><span class="string" id="6664265">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6664301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664308">tt</span><span class="op" id="6664310">.</span><span class="ident" id="6664311">host</span><span class="op" id="6664315">,</span>&nbsp;<span class="ident" id="6664317">v</span><span class="op" id="6664318">,</span>&nbsp;<span class="ident" id="6664320">tt</span><span class="op" id="6664322">.</span><span class="ident" id="6664323">ips</span><span class="op" id="6664326">[</span><span class="ident" id="6664327">k</span><span class="op" id="6664328">]</span><span class="op" id="6664329">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6664334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6664338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6664341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664344">hostsPath</span>&nbsp;<span class="op" id="6664354">=</span>&nbsp;<span class="ident" id="6664356">p</span><br>
<span class="lineno"></span><span class="op" id="6664358">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="6664361">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="6664415">func</span>&nbsp;<span class="ident" id="6664420">TestSingleLineHostsFile</span><span class="op" id="6664443">(</span><span class="ident" id="6664444">t</span>&nbsp;<span class="op" id="6664446">*</span><span class="ident" id="6664447">testing</span><span class="op" id="6664454">.</span><span class="ident" id="6664455">T</span><span class="op" id="6664456">)</span>&nbsp;<span class="op" id="6664458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664461">p</span>&nbsp;<span class="op" id="6664463">:=</span>&nbsp;<span class="ident" id="6664466">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664477">hostsPath</span>&nbsp;<span class="op" id="6664487">=</span>&nbsp;<span class="string" id="6664489">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664519">ips</span>&nbsp;<span class="op" id="6664523">:=</span>&nbsp;<span class="ident" id="6664526">lookupStaticHost</span><span class="op" id="6664542">(</span><span class="string" id="6664543">&#34;odin&#34;</span><span class="op" id="6664549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6664552">if</span>&nbsp;<span class="builtinfunc" id="6664555">len</span><span class="op" id="6664558">(</span><span class="ident" id="6664559">ips</span><span class="op" id="6664562">)</span>&nbsp;<span class="op" id="6664564">!=</span>&nbsp;<span class="num" id="6664567">1</span>&nbsp;<span class="op" id="6664569">||</span>&nbsp;<span class="ident" id="6664572">ips</span><span class="op" id="6664575">[</span><span class="num" id="6664576">0</span><span class="op" id="6664577">]</span>&nbsp;<span class="op" id="6664579">!=</span>&nbsp;<span class="string" id="6664582">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="6664594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664598">t</span><span class="op" id="6664599">.</span><span class="ident" id="6664600">Errorf</span><span class="op" id="6664606">(</span><span class="string" id="6664607">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6664639">,</span>&nbsp;<span class="ident" id="6664641">ips</span><span class="op" id="6664644">,</span>&nbsp;<span class="op" id="6664646">[</span><span class="op" id="6664647">]</span><span class="builtintype" id="6664648">string</span><span class="op" id="6664654">{</span><span class="string" id="6664655">&#34;127.0.0.2&#34;</span><span class="op" id="6664666">}</span><span class="op" id="6664667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6664670">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664674">hostsPath</span>&nbsp;<span class="op" id="6664684">=</span>&nbsp;<span class="ident" id="6664686">p</span><br>
<span class="lineno"></span><span class="op" id="6664688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6664691">func</span>&nbsp;<span class="ident" id="6664696">TestLookupHost</span><span class="op" id="6664710">(</span><span class="ident" id="6664711">t</span>&nbsp;<span class="op" id="6664713">*</span><span class="ident" id="6664714">testing</span><span class="op" id="6664721">.</span><span class="ident" id="6664722">T</span><span class="op" id="6664723">)</span>&nbsp;<span class="op" id="6664725">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6664728">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6664787">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6664845">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6664898">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664922">addrs</span><span class="op" id="6664927">,</span>&nbsp;<span class="ident" id="6664929">_</span>&nbsp;<span class="op" id="6664931">:=</span>&nbsp;<span class="ident" id="6664934">LookupHost</span><span class="op" id="6664944">(</span><span class="string" id="6664945">&#34;localhost&#34;</span><span class="op" id="6664956">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6664959">sort</span><span class="op" id="6664963">.</span><span class="ident" id="6664964">Strings</span><span class="op" id="6664971">(</span><span class="ident" id="6664972">addrs</span><span class="op" id="6664977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6664980">for</span>&nbsp;<span class="ident" id="6664984">i</span>&nbsp;<span class="op" id="6664986">:=</span>&nbsp;<span class="num" id="6664989">0</span><span class="op" id="6664990">;</span>&nbsp;<span class="ident" id="6664992">i</span><span class="op" id="6664993">+</span><span class="num" id="6664994">1</span>&nbsp;<span class="op" id="6664996">&lt;</span>&nbsp;<span class="builtinfunc" id="6664998">len</span><span class="op" id="6665001">(</span><span class="ident" id="6665002">addrs</span><span class="op" id="6665007">)</span><span class="op" id="6665008">;</span>&nbsp;<span class="ident" id="6665010">i</span><span class="op" id="6665011">++</span>&nbsp;<span class="op" id="6665014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6665018">if</span>&nbsp;<span class="ident" id="6665021">addrs</span><span class="op" id="6665026">[</span><span class="ident" id="6665027">i</span><span class="op" id="6665028">]</span>&nbsp;<span class="op" id="6665030">==</span>&nbsp;<span class="ident" id="6665033">addrs</span><span class="op" id="6665038">[</span><span class="ident" id="6665039">i</span><span class="op" id="6665040">+</span><span class="num" id="6665041">1</span><span class="op" id="6665042">]</span>&nbsp;<span class="op" id="6665044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6665049">t</span><span class="op" id="6665050">.</span><span class="ident" id="6665051">Fatalf</span><span class="op" id="6665057">(</span><span class="string" id="6665058">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="6665115">,</span>&nbsp;<span class="ident" id="6665117">addrs</span><span class="op" id="6665122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6665126">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6665129">}</span><br>
<span class="lineno"></span><span class="op" id="6665131">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
