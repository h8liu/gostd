<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html" class="current">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1533158">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1533213">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1533267">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1533318">package</span>&nbsp;<span class="ident" id="1533326">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1533335">import</span>&nbsp;<span class="op" id="1533342">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1533345">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1533354">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1533357">const</span>&nbsp;<span class="op" id="1533363">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1533366">hashSize</span>&nbsp;<span class="op" id="1533375">=</span>&nbsp;<span class="num" id="1533377">1009</span><br>
<span class="lineno"></span><span class="op" id="1533382">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1533385">var</span>&nbsp;<span class="op" id="1533389">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1533392">ifaceLock</span>&nbsp;<span class="ident" id="1533402">mutex</span>&nbsp;<span class="comment" id="1533408">//&nbsp;lock&nbsp;for&nbsp;accessing&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1533436">hash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1533446">[</span><span class="ident" id="1533447">hashSize</span><span class="op" id="1533455">]</span><span class="op" id="1533456">*</span><span class="ident" id="1533457">itab</span><br>
<span class="lineno"></span><span class="op" id="1533462">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1533465">//&nbsp;fInterface&nbsp;is&nbsp;our&nbsp;standard&nbsp;non-empty&nbsp;interface.&nbsp;&nbsp;We&nbsp;use&nbsp;it&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="1533535">//&nbsp;of&nbsp;interface{f()}&nbsp;in&nbsp;function&nbsp;prototypes&nbsp;because&nbsp;gofmt&nbsp;insists&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1533604">//&nbsp;putting&nbsp;lots&nbsp;of&nbsp;newlines&nbsp;in&nbsp;the&nbsp;otherwise&nbsp;concise&nbsp;interface{f()}.</span><br>
<span class="lineno"></span><span class="keyword" id="1533673">type</span>&nbsp;<span class="ident" id="1533678">fInterface</span>&nbsp;<span class="keyword" id="1533689">interface</span>&nbsp;<span class="op" id="1533699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1533702">f</span><span class="op" id="1533703">(</span><span class="op" id="1533704">)</span><br>
<span class="lineno">25</span><span class="op" id="1533706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1533709">func</span>&nbsp;<span class="ident" id="1533714">getitab</span><span class="op" id="1533721">(</span><span class="ident" id="1533722">inter</span>&nbsp;<span class="op" id="1533728">*</span><span class="ident" id="1533729">interfacetype</span><span class="op" id="1533742">,</span>&nbsp;<span class="ident" id="1533744">typ</span>&nbsp;<span class="op" id="1533748">*</span><span class="ident" id="1533749">_type</span><span class="op" id="1533754">,</span>&nbsp;<span class="ident" id="1533756">canfail</span>&nbsp;<span class="builtintype" id="1533764">bool</span><span class="op" id="1533768">)</span>&nbsp;<span class="op" id="1533770">*</span><span class="ident" id="1533771">itab</span>&nbsp;<span class="op" id="1533776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1533779">if</span>&nbsp;<span class="builtinfunc" id="1533782">len</span><span class="op" id="1533785">(</span><span class="ident" id="1533786">inter</span><span class="op" id="1533791">.</span><span class="ident" id="1533792">mhdr</span><span class="op" id="1533796">)</span>&nbsp;<span class="op" id="1533798">==</span>&nbsp;<span class="num" id="1533801">0</span>&nbsp;<span class="op" id="1533803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1533807">gothrow</span><span class="op" id="1533814">(</span><span class="string" id="1533815">&#34;internal&nbsp;error&nbsp;-&nbsp;misuse&nbsp;of&nbsp;itab&#34;</span><span class="op" id="1533848">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1533851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1533855">//&nbsp;easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1533869">x</span>&nbsp;<span class="op" id="1533871">:=</span>&nbsp;<span class="ident" id="1533874">typ</span><span class="op" id="1533877">.</span><span class="ident" id="1533878">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1533881">if</span>&nbsp;<span class="ident" id="1533884">x</span>&nbsp;<span class="op" id="1533886">==</span>&nbsp;<span class="builtintype" id="1533889">nil</span>&nbsp;<span class="op" id="1533893">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1533897">if</span>&nbsp;<span class="ident" id="1533900">canfail</span>&nbsp;<span class="op" id="1533908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1533913">return</span>&nbsp;<span class="builtintype" id="1533920">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1533926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1533930">i</span>&nbsp;<span class="op" id="1533932">:=</span>&nbsp;<span class="op" id="1533935">(</span><span class="op" id="1533936">*</span><span class="ident" id="1533937">imethod</span><span class="op" id="1533944">)</span><span class="op" id="1533945">(</span><span class="ident" id="1533946">add</span><span class="op" id="1533949">(</span><span class="ident" id="1533950">unsafe</span><span class="op" id="1533956">.</span><span class="ident" id="1533957">Pointer</span><span class="op" id="1533964">(</span><span class="ident" id="1533965">inter</span><span class="op" id="1533970">)</span><span class="op" id="1533971">,</span>&nbsp;<span class="ident" id="1533973">unsafe</span><span class="op" id="1533979">.</span><span class="ident" id="1533980">Sizeof</span><span class="op" id="1533986">(</span><span class="ident" id="1533987">interfacetype</span><span class="op" id="1534000">{</span><span class="op" id="1534001">}</span><span class="op" id="1534002">)</span><span class="op" id="1534003">)</span><span class="op" id="1534004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1534008">panic</span><span class="op" id="1534013">(</span><span class="op" id="1534014">&amp;</span><span class="ident" id="1534015">TypeAssertionError</span><span class="op" id="1534033">{</span><span class="string" id="1534034">&#34;&#34;</span><span class="op" id="1534036">,</span>&nbsp;<span class="op" id="1534038">*</span><span class="ident" id="1534039">typ</span><span class="op" id="1534042">.</span><span class="ident" id="1534043">_string</span><span class="op" id="1534050">,</span>&nbsp;<span class="op" id="1534052">*</span><span class="ident" id="1534053">inter</span><span class="op" id="1534058">.</span><span class="ident" id="1534059">typ</span><span class="op" id="1534062">.</span><span class="ident" id="1534063">_string</span><span class="op" id="1534070">,</span>&nbsp;<span class="op" id="1534072">*</span><span class="ident" id="1534073">i</span><span class="op" id="1534074">.</span><span class="ident" id="1534075">name</span><span class="op" id="1534079">}</span><span class="op" id="1534080">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1534083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534087">//&nbsp;compiler&nbsp;has&nbsp;provided&nbsp;some&nbsp;good&nbsp;hash&nbsp;codes&nbsp;for&nbsp;us.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1534142">h</span>&nbsp;<span class="op" id="1534144">:=</span>&nbsp;<span class="ident" id="1534147">inter</span><span class="op" id="1534152">.</span><span class="ident" id="1534153">typ</span><span class="op" id="1534156">.</span><span class="ident" id="1534157">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1534163">h</span>&nbsp;<span class="op" id="1534165">+=</span>&nbsp;<span class="num" id="1534168">17</span>&nbsp;<span class="op" id="1534171">*</span>&nbsp;<span class="ident" id="1534173">typ</span><span class="op" id="1534176">.</span><span class="ident" id="1534177">hash</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534183">//&nbsp;TODO(rsc):&nbsp;h&nbsp;+=&nbsp;23&nbsp;*&nbsp;x.mhash&nbsp;?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1534218">h</span>&nbsp;<span class="op" id="1534220">%=</span>&nbsp;<span class="ident" id="1534223">hashSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534234">//&nbsp;look&nbsp;twice&nbsp;-&nbsp;once&nbsp;without&nbsp;lock,&nbsp;once&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534281">//&nbsp;common&nbsp;case&nbsp;will&nbsp;be&nbsp;no&nbsp;lock&nbsp;contention.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1534325">var</span>&nbsp;<span class="ident" id="1534329">m</span>&nbsp;<span class="op" id="1534331">*</span><span class="ident" id="1534332">itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1534338">var</span>&nbsp;<span class="ident" id="1534342">locked</span>&nbsp;<span class="builtintype" id="1534349">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1534354">for</span>&nbsp;<span class="ident" id="1534358">locked</span>&nbsp;<span class="op" id="1534365">=</span>&nbsp;<span class="num" id="1534367">0</span><span class="op" id="1534368">;</span>&nbsp;<span class="ident" id="1534370">locked</span>&nbsp;<span class="op" id="1534377">&lt;</span>&nbsp;<span class="num" id="1534379">2</span><span class="op" id="1534380">;</span>&nbsp;<span class="ident" id="1534382">locked</span><span class="op" id="1534388">++</span>&nbsp;<span class="op" id="1534391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1534395">if</span>&nbsp;<span class="ident" id="1534398">locked</span>&nbsp;<span class="op" id="1534405">!=</span>&nbsp;<span class="num" id="1534408">0</span>&nbsp;<span class="op" id="1534410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1534415">lock</span><span class="op" id="1534419">(</span><span class="op" id="1534420">&amp;</span><span class="ident" id="1534421">ifaceLock</span><span class="op" id="1534430">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1534434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1534438">for</span>&nbsp;<span class="ident" id="1534442">m</span>&nbsp;<span class="op" id="1534444">=</span>&nbsp;<span class="op" id="1534446">(</span><span class="op" id="1534447">*</span><span class="ident" id="1534448">itab</span><span class="op" id="1534452">)</span><span class="op" id="1534453">(</span><span class="ident" id="1534454">atomicloadp</span><span class="op" id="1534465">(</span><span class="ident" id="1534466">unsafe</span><span class="op" id="1534472">.</span><span class="ident" id="1534473">Pointer</span><span class="op" id="1534480">(</span><span class="op" id="1534481">&amp;</span><span class="ident" id="1534482">hash</span><span class="op" id="1534486">[</span><span class="ident" id="1534487">h</span><span class="op" id="1534488">]</span><span class="op" id="1534489">)</span><span class="op" id="1534490">)</span><span class="op" id="1534491">)</span><span class="op" id="1534492">;</span>&nbsp;<span class="ident" id="1534494">m</span>&nbsp;<span class="op" id="1534496">!=</span>&nbsp;<span class="builtintype" id="1534499">nil</span><span class="op" id="1534502">;</span>&nbsp;<span class="ident" id="1534504">m</span>&nbsp;<span class="op" id="1534506">=</span>&nbsp;<span class="ident" id="1534508">m</span><span class="op" id="1534509">.</span><span class="ident" id="1534510">link</span>&nbsp;<span class="op" id="1534515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1534520">if</span>&nbsp;<span class="ident" id="1534523">m</span><span class="op" id="1534524">.</span><span class="ident" id="1534525">inter</span>&nbsp;<span class="op" id="1534531">==</span>&nbsp;<span class="ident" id="1534534">inter</span>&nbsp;<span class="op" id="1534540">&amp;&amp;</span>&nbsp;<span class="ident" id="1534543">m</span><span class="op" id="1534544">.</span><span class="ident" id="1534545">_type</span>&nbsp;<span class="op" id="1534551">==</span>&nbsp;<span class="ident" id="1534554">typ</span>&nbsp;<span class="op" id="1534558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1534564">if</span>&nbsp;<span class="ident" id="1534567">m</span><span class="op" id="1534568">.</span><span class="ident" id="1534569">bad</span>&nbsp;<span class="op" id="1534573">!=</span>&nbsp;<span class="num" id="1534576">0</span>&nbsp;<span class="op" id="1534578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1534585">m</span>&nbsp;<span class="op" id="1534587">=</span>&nbsp;<span class="builtintype" id="1534589">nil</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1534598">if</span>&nbsp;<span class="op" id="1534601">!</span><span class="ident" id="1534602">canfail</span>&nbsp;<span class="op" id="1534610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534618">//&nbsp;this&nbsp;can&nbsp;only&nbsp;happen&nbsp;if&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534666">//&nbsp;was&nbsp;already&nbsp;done&nbsp;once&nbsp;using&nbsp;the&nbsp;,&nbsp;ok&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534717">//&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;cached&nbsp;negative&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534764">//&nbsp;the&nbsp;cached&nbsp;result&nbsp;doesn&#39;t&nbsp;record&nbsp;which</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534812">//&nbsp;interface&nbsp;function&nbsp;was&nbsp;missing,&nbsp;so&nbsp;jump</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534861">//&nbsp;down&nbsp;to&nbsp;the&nbsp;interface&nbsp;check,&nbsp;which&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1534910">//&nbsp;do&nbsp;more&nbsp;work&nbsp;but&nbsp;give&nbsp;a&nbsp;better&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1534957">goto</span>&nbsp;<span class="ident" id="1534962">search</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1534974">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1534980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1534986">if</span>&nbsp;<span class="ident" id="1534989">locked</span>&nbsp;<span class="op" id="1534996">!=</span>&nbsp;<span class="num" id="1534999">0</span>&nbsp;<span class="op" id="1535001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535008">unlock</span><span class="op" id="1535014">(</span><span class="op" id="1535015">&amp;</span><span class="ident" id="1535016">ifaceLock</span><span class="op" id="1535025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1535031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1535037">return</span>&nbsp;<span class="ident" id="1535044">m</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1535049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1535053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1535056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535060">m</span>&nbsp;<span class="op" id="1535062">=</span>&nbsp;<span class="op" id="1535064">(</span><span class="op" id="1535065">*</span><span class="ident" id="1535066">itab</span><span class="op" id="1535070">)</span><span class="op" id="1535071">(</span><span class="ident" id="1535072">persistentalloc</span><span class="op" id="1535087">(</span><span class="ident" id="1535088">unsafe</span><span class="op" id="1535094">.</span><span class="ident" id="1535095">Sizeof</span><span class="op" id="1535101">(</span><span class="ident" id="1535102">itab</span><span class="op" id="1535106">{</span><span class="op" id="1535107">}</span><span class="op" id="1535108">)</span><span class="op" id="1535109">+</span><span class="builtintype" id="1535110">uintptr</span><span class="op" id="1535117">(</span><span class="builtinfunc" id="1535118">len</span><span class="op" id="1535121">(</span><span class="ident" id="1535122">inter</span><span class="op" id="1535127">.</span><span class="ident" id="1535128">mhdr</span><span class="op" id="1535132">)</span><span class="op" id="1535133">)</span><span class="op" id="1535134">*</span><span class="ident" id="1535135">ptrSize</span><span class="op" id="1535142">,</span>&nbsp;<span class="num" id="1535144">0</span><span class="op" id="1535145">,</span>&nbsp;<span class="op" id="1535147">&amp;</span><span class="ident" id="1535148">memstats</span><span class="op" id="1535156">.</span><span class="ident" id="1535157">other_sys</span><span class="op" id="1535166">)</span><span class="op" id="1535167">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535170">m</span><span class="op" id="1535171">.</span><span class="ident" id="1535172">inter</span>&nbsp;<span class="op" id="1535178">=</span>&nbsp;<span class="ident" id="1535180">inter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535187">m</span><span class="op" id="1535188">.</span><span class="ident" id="1535189">_type</span>&nbsp;<span class="op" id="1535195">=</span>&nbsp;<span class="ident" id="1535197">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1535202">search</span><span class="op" id="1535208">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1535211">//&nbsp;both&nbsp;inter&nbsp;and&nbsp;typ&nbsp;have&nbsp;method&nbsp;sorted&nbsp;by&nbsp;name,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1535262">//&nbsp;and&nbsp;interface&nbsp;names&nbsp;are&nbsp;unique,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1535298">//&nbsp;so&nbsp;can&nbsp;iterate&nbsp;over&nbsp;both&nbsp;in&nbsp;lock&nbsp;step;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1535341">//&nbsp;the&nbsp;loop&nbsp;is&nbsp;O(ni+nt)&nbsp;not&nbsp;O(ni*nt).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535380">ni</span>&nbsp;<span class="op" id="1535383">:=</span>&nbsp;<span class="builtinfunc" id="1535386">len</span><span class="op" id="1535389">(</span><span class="ident" id="1535390">inter</span><span class="op" id="1535395">.</span><span class="ident" id="1535396">mhdr</span><span class="op" id="1535400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535403">nt</span>&nbsp;<span class="op" id="1535406">:=</span>&nbsp;<span class="builtinfunc" id="1535409">len</span><span class="op" id="1535412">(</span><span class="ident" id="1535413">x</span><span class="op" id="1535414">.</span><span class="ident" id="1535415">mhdr</span><span class="op" id="1535419">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535422">j</span>&nbsp;<span class="op" id="1535424">:=</span>&nbsp;<span class="num" id="1535427">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1535430">for</span>&nbsp;<span class="ident" id="1535434">k</span>&nbsp;<span class="op" id="1535436">:=</span>&nbsp;<span class="num" id="1535439">0</span><span class="op" id="1535440">;</span>&nbsp;<span class="ident" id="1535442">k</span>&nbsp;<span class="op" id="1535444">&lt;</span>&nbsp;<span class="ident" id="1535446">ni</span><span class="op" id="1535448">;</span>&nbsp;<span class="ident" id="1535450">k</span><span class="op" id="1535451">++</span>&nbsp;<span class="op" id="1535454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535458">i</span>&nbsp;<span class="op" id="1535460">:=</span>&nbsp;<span class="op" id="1535463">(</span><span class="op" id="1535464">*</span><span class="ident" id="1535465">imethod</span><span class="op" id="1535472">)</span><span class="op" id="1535473">(</span><span class="ident" id="1535474">add</span><span class="op" id="1535477">(</span><span class="ident" id="1535478">unsafe</span><span class="op" id="1535484">.</span><span class="ident" id="1535485">Pointer</span><span class="op" id="1535492">(</span><span class="ident" id="1535493">inter</span><span class="op" id="1535498">)</span><span class="op" id="1535499">,</span>&nbsp;<span class="ident" id="1535501">unsafe</span><span class="op" id="1535507">.</span><span class="ident" id="1535508">Sizeof</span><span class="op" id="1535514">(</span><span class="ident" id="1535515">interfacetype</span><span class="op" id="1535528">{</span><span class="op" id="1535529">}</span><span class="op" id="1535530">)</span><span class="op" id="1535531">+</span><span class="builtintype" id="1535532">uintptr</span><span class="op" id="1535539">(</span><span class="ident" id="1535540">k</span><span class="op" id="1535541">)</span><span class="op" id="1535542">*</span><span class="ident" id="1535543">unsafe</span><span class="op" id="1535549">.</span><span class="ident" id="1535550">Sizeof</span><span class="op" id="1535556">(</span><span class="ident" id="1535557">imethod</span><span class="op" id="1535564">{</span><span class="op" id="1535565">}</span><span class="op" id="1535566">)</span><span class="op" id="1535567">)</span><span class="op" id="1535568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535572">iname</span>&nbsp;<span class="op" id="1535578">:=</span>&nbsp;<span class="ident" id="1535581">i</span><span class="op" id="1535582">.</span><span class="ident" id="1535583">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535590">ipkgpath</span>&nbsp;<span class="op" id="1535599">:=</span>&nbsp;<span class="ident" id="1535602">i</span><span class="op" id="1535603">.</span><span class="ident" id="1535604">pkgpath</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535614">itype</span>&nbsp;<span class="op" id="1535620">:=</span>&nbsp;<span class="ident" id="1535623">i</span><span class="op" id="1535624">.</span><span class="ident" id="1535625">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1535633">for</span>&nbsp;<span class="op" id="1535637">;</span>&nbsp;<span class="ident" id="1535639">j</span>&nbsp;<span class="op" id="1535641">&lt;</span>&nbsp;<span class="ident" id="1535643">nt</span><span class="op" id="1535645">;</span>&nbsp;<span class="ident" id="1535647">j</span><span class="op" id="1535648">++</span>&nbsp;<span class="op" id="1535651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1535656">t</span>&nbsp;<span class="op" id="1535658">:=</span>&nbsp;<span class="op" id="1535661">(</span><span class="op" id="1535662">*</span><span class="ident" id="1535663">method</span><span class="op" id="1535669">)</span><span class="op" id="1535670">(</span><span class="ident" id="1535671">add</span><span class="op" id="1535674">(</span><span class="ident" id="1535675">unsafe</span><span class="op" id="1535681">.</span><span class="ident" id="1535682">Pointer</span><span class="op" id="1535689">(</span><span class="ident" id="1535690">x</span><span class="op" id="1535691">)</span><span class="op" id="1535692">,</span>&nbsp;<span class="ident" id="1535694">unsafe</span><span class="op" id="1535700">.</span><span class="ident" id="1535701">Sizeof</span><span class="op" id="1535707">(</span><span class="ident" id="1535708">uncommontype</span><span class="op" id="1535720">{</span><span class="op" id="1535721">}</span><span class="op" id="1535722">)</span><span class="op" id="1535723">+</span><span class="builtintype" id="1535724">uintptr</span><span class="op" id="1535731">(</span><span class="ident" id="1535732">j</span><span class="op" id="1535733">)</span><span class="op" id="1535734">*</span><span class="ident" id="1535735">unsafe</span><span class="op" id="1535741">.</span><span class="ident" id="1535742">Sizeof</span><span class="op" id="1535748">(</span><span class="ident" id="1535749">method</span><span class="op" id="1535755">{</span><span class="op" id="1535756">}</span><span class="op" id="1535757">)</span><span class="op" id="1535758">)</span><span class="op" id="1535759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1535764">if</span>&nbsp;<span class="ident" id="1535767">t</span><span class="op" id="1535768">.</span><span class="ident" id="1535769">mtyp</span>&nbsp;<span class="op" id="1535774">==</span>&nbsp;<span class="ident" id="1535777">itype</span>&nbsp;<span class="op" id="1535783">&amp;&amp;</span>&nbsp;<span class="ident" id="1535786">t</span><span class="op" id="1535787">.</span><span class="ident" id="1535788">name</span>&nbsp;<span class="op" id="1535793">==</span>&nbsp;<span class="ident" id="1535796">iname</span>&nbsp;<span class="op" id="1535802">&amp;&amp;</span>&nbsp;<span class="ident" id="1535805">t</span><span class="op" id="1535806">.</span><span class="ident" id="1535807">pkgpath</span>&nbsp;<span class="op" id="1535815">==</span>&nbsp;<span class="ident" id="1535818">ipkgpath</span>&nbsp;<span class="op" id="1535827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1535833">if</span>&nbsp;<span class="ident" id="1535836">m</span>&nbsp;<span class="op" id="1535838">!=</span>&nbsp;<span class="builtintype" id="1535841">nil</span>&nbsp;<span class="op" id="1535845">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1535852">*</span><span class="op" id="1535853">(</span><span class="op" id="1535854">*</span><span class="ident" id="1535855">unsafe</span><span class="op" id="1535861">.</span><span class="ident" id="1535862">Pointer</span><span class="op" id="1535869">)</span><span class="op" id="1535870">(</span><span class="ident" id="1535871">add</span><span class="op" id="1535874">(</span><span class="ident" id="1535875">unsafe</span><span class="op" id="1535881">.</span><span class="ident" id="1535882">Pointer</span><span class="op" id="1535889">(</span><span class="ident" id="1535890">m</span><span class="op" id="1535891">)</span><span class="op" id="1535892">,</span>&nbsp;<span class="ident" id="1535894">unsafe</span><span class="op" id="1535900">.</span><span class="ident" id="1535901">Sizeof</span><span class="op" id="1535907">(</span><span class="ident" id="1535908">itab</span><span class="op" id="1535912">{</span><span class="op" id="1535913">}</span><span class="op" id="1535914">)</span><span class="op" id="1535915">+</span><span class="builtintype" id="1535916">uintptr</span><span class="op" id="1535923">(</span><span class="ident" id="1535924">k</span><span class="op" id="1535925">)</span><span class="op" id="1535926">*</span><span class="ident" id="1535927">ptrSize</span><span class="op" id="1535934">)</span><span class="op" id="1535935">)</span>&nbsp;<span class="op" id="1535937">=</span>&nbsp;<span class="ident" id="1535939">t</span><span class="op" id="1535940">.</span><span class="ident" id="1535941">ifn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1535949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1535955">goto</span>&nbsp;<span class="ident" id="1535960">nextimethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1535975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1535979">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1535983">//&nbsp;didn&#39;t&nbsp;find&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1536007">if</span>&nbsp;<span class="op" id="1536010">!</span><span class="ident" id="1536011">canfail</span>&nbsp;<span class="op" id="1536019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1536024">if</span>&nbsp;<span class="ident" id="1536027">locked</span>&nbsp;<span class="op" id="1536034">!=</span>&nbsp;<span class="num" id="1536037">0</span>&nbsp;<span class="op" id="1536039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536045">unlock</span><span class="op" id="1536051">(</span><span class="op" id="1536052">&amp;</span><span class="ident" id="1536053">ifaceLock</span><span class="op" id="1536062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1536067">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1536072">panic</span><span class="op" id="1536077">(</span><span class="op" id="1536078">&amp;</span><span class="ident" id="1536079">TypeAssertionError</span><span class="op" id="1536097">{</span><span class="string" id="1536098">&#34;&#34;</span><span class="op" id="1536100">,</span>&nbsp;<span class="op" id="1536102">*</span><span class="ident" id="1536103">typ</span><span class="op" id="1536106">.</span><span class="ident" id="1536107">_string</span><span class="op" id="1536114">,</span>&nbsp;<span class="op" id="1536116">*</span><span class="ident" id="1536117">inter</span><span class="op" id="1536122">.</span><span class="ident" id="1536123">typ</span><span class="op" id="1536126">.</span><span class="ident" id="1536127">_string</span><span class="op" id="1536134">,</span>&nbsp;<span class="op" id="1536136">*</span><span class="ident" id="1536137">iname</span><span class="op" id="1536142">}</span><span class="op" id="1536143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1536147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536151">m</span><span class="op" id="1536152">.</span><span class="ident" id="1536153">bad</span>&nbsp;<span class="op" id="1536157">=</span>&nbsp;<span class="num" id="1536159">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1536163">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536170">nextimethod</span><span class="op" id="1536181">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1536184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1536187">if</span>&nbsp;<span class="ident" id="1536190">locked</span>&nbsp;<span class="op" id="1536197">==</span>&nbsp;<span class="num" id="1536200">0</span>&nbsp;<span class="op" id="1536202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536206">gothrow</span><span class="op" id="1536213">(</span><span class="string" id="1536214">&#34;invalid&nbsp;itab&nbsp;locking&#34;</span><span class="op" id="1536236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1536239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536242">m</span><span class="op" id="1536243">.</span><span class="ident" id="1536244">link</span>&nbsp;<span class="op" id="1536249">=</span>&nbsp;<span class="ident" id="1536251">hash</span><span class="op" id="1536255">[</span><span class="ident" id="1536256">h</span><span class="op" id="1536257">]</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536260">atomicstorep</span><span class="op" id="1536272">(</span><span class="ident" id="1536273">unsafe</span><span class="op" id="1536279">.</span><span class="ident" id="1536280">Pointer</span><span class="op" id="1536287">(</span><span class="op" id="1536288">&amp;</span><span class="ident" id="1536289">hash</span><span class="op" id="1536293">[</span><span class="ident" id="1536294">h</span><span class="op" id="1536295">]</span><span class="op" id="1536296">)</span><span class="op" id="1536297">,</span>&nbsp;<span class="ident" id="1536299">unsafe</span><span class="op" id="1536305">.</span><span class="ident" id="1536306">Pointer</span><span class="op" id="1536313">(</span><span class="ident" id="1536314">m</span><span class="op" id="1536315">)</span><span class="op" id="1536316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536319">unlock</span><span class="op" id="1536325">(</span><span class="op" id="1536326">&amp;</span><span class="ident" id="1536327">ifaceLock</span><span class="op" id="1536336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1536339">if</span>&nbsp;<span class="ident" id="1536342">m</span><span class="op" id="1536343">.</span><span class="ident" id="1536344">bad</span>&nbsp;<span class="op" id="1536348">!=</span>&nbsp;<span class="num" id="1536351">0</span>&nbsp;<span class="op" id="1536353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1536357">return</span>&nbsp;<span class="builtintype" id="1536364">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1536369">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1536372">return</span>&nbsp;<span class="ident" id="1536379">m</span><br>
<span class="lineno"></span><span class="op" id="1536381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1536384">func</span>&nbsp;<span class="ident" id="1536389">typ2Itab</span><span class="op" id="1536397">(</span><span class="ident" id="1536398">t</span>&nbsp;<span class="op" id="1536400">*</span><span class="ident" id="1536401">_type</span><span class="op" id="1536406">,</span>&nbsp;<span class="ident" id="1536408">inter</span>&nbsp;<span class="op" id="1536414">*</span><span class="ident" id="1536415">interfacetype</span><span class="op" id="1536428">,</span>&nbsp;<span class="ident" id="1536430">cache</span>&nbsp;<span class="op" id="1536436">*</span><span class="op" id="1536437">*</span><span class="ident" id="1536438">itab</span><span class="op" id="1536442">)</span>&nbsp;<span class="op" id="1536444">*</span><span class="ident" id="1536445">itab</span>&nbsp;<span class="op" id="1536450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536453">tab</span>&nbsp;<span class="op" id="1536457">:=</span>&nbsp;<span class="ident" id="1536460">getitab</span><span class="op" id="1536467">(</span><span class="ident" id="1536468">inter</span><span class="op" id="1536473">,</span>&nbsp;<span class="ident" id="1536475">t</span><span class="op" id="1536476">,</span>&nbsp;<span class="builtintype" id="1536478">false</span><span class="op" id="1536483">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536486">atomicstorep</span><span class="op" id="1536498">(</span><span class="ident" id="1536499">unsafe</span><span class="op" id="1536505">.</span><span class="ident" id="1536506">Pointer</span><span class="op" id="1536513">(</span><span class="ident" id="1536514">cache</span><span class="op" id="1536519">)</span><span class="op" id="1536520">,</span>&nbsp;<span class="ident" id="1536522">unsafe</span><span class="op" id="1536528">.</span><span class="ident" id="1536529">Pointer</span><span class="op" id="1536536">(</span><span class="ident" id="1536537">tab</span><span class="op" id="1536540">)</span><span class="op" id="1536541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1536544">return</span>&nbsp;<span class="ident" id="1536551">tab</span><br>
<span class="lineno"></span><span class="op" id="1536555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1536558">func</span>&nbsp;<span class="ident" id="1536563">convT2E</span><span class="op" id="1536570">(</span><span class="ident" id="1536571">t</span>&nbsp;<span class="op" id="1536573">*</span><span class="ident" id="1536574">_type</span><span class="op" id="1536579">,</span>&nbsp;<span class="ident" id="1536581">elem</span>&nbsp;<span class="ident" id="1536586">unsafe</span><span class="op" id="1536592">.</span><span class="ident" id="1536593">Pointer</span><span class="op" id="1536600">)</span>&nbsp;<span class="op" id="1536602">(</span><span class="ident" id="1536603">e</span>&nbsp;<span class="keyword" id="1536605">interface</span><span class="op" id="1536614">{</span><span class="op" id="1536615">}</span><span class="op" id="1536616">)</span>&nbsp;<span class="op" id="1536618">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536621">size</span>&nbsp;<span class="op" id="1536626">:=</span>&nbsp;<span class="builtintype" id="1536629">uintptr</span><span class="op" id="1536636">(</span><span class="ident" id="1536637">t</span><span class="op" id="1536638">.</span><span class="ident" id="1536639">size</span><span class="op" id="1536643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536646">ep</span>&nbsp;<span class="op" id="1536649">:=</span>&nbsp;<span class="op" id="1536652">(</span><span class="op" id="1536653">*</span><span class="ident" id="1536654">eface</span><span class="op" id="1536659">)</span><span class="op" id="1536660">(</span><span class="ident" id="1536661">unsafe</span><span class="op" id="1536667">.</span><span class="ident" id="1536668">Pointer</span><span class="op" id="1536675">(</span><span class="op" id="1536676">&amp;</span><span class="ident" id="1536677">e</span><span class="op" id="1536678">)</span><span class="op" id="1536679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1536682">if</span>&nbsp;<span class="ident" id="1536685">isDirectIface</span><span class="op" id="1536698">(</span><span class="ident" id="1536699">t</span><span class="op" id="1536700">)</span>&nbsp;<span class="op" id="1536702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536706">ep</span><span class="op" id="1536708">.</span><span class="ident" id="1536709">_type</span>&nbsp;<span class="op" id="1536715">=</span>&nbsp;<span class="ident" id="1536717">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536721">memmove</span><span class="op" id="1536728">(</span><span class="ident" id="1536729">unsafe</span><span class="op" id="1536735">.</span><span class="ident" id="1536736">Pointer</span><span class="op" id="1536743">(</span><span class="op" id="1536744">&amp;</span><span class="ident" id="1536745">ep</span><span class="op" id="1536747">.</span><span class="ident" id="1536748">data</span><span class="op" id="1536752">)</span><span class="op" id="1536753">,</span>&nbsp;<span class="ident" id="1536755">elem</span><span class="op" id="1536759">,</span>&nbsp;<span class="ident" id="1536761">size</span><span class="op" id="1536765">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1536768">}</span>&nbsp;<span class="keyword" id="1536770">else</span>&nbsp;<span class="op" id="1536775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536779">x</span>&nbsp;<span class="op" id="1536781">:=</span>&nbsp;<span class="ident" id="1536784">newobject</span><span class="op" id="1536793">(</span><span class="ident" id="1536794">t</span><span class="op" id="1536795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1536799">//&nbsp;TODO:&nbsp;We&nbsp;allocate&nbsp;a&nbsp;zeroed&nbsp;object&nbsp;only&nbsp;to&nbsp;overwrite&nbsp;it&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1536864">//&nbsp;actual&nbsp;data.&nbsp;&nbsp;Figure&nbsp;out&nbsp;how&nbsp;to&nbsp;avoid&nbsp;zeroing.&nbsp;&nbsp;Also&nbsp;below&nbsp;in&nbsp;convT2I.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536940">memmove</span><span class="op" id="1536947">(</span><span class="ident" id="1536948">x</span><span class="op" id="1536949">,</span>&nbsp;<span class="ident" id="1536951">elem</span><span class="op" id="1536955">,</span>&nbsp;<span class="ident" id="1536957">size</span><span class="op" id="1536961">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536965">ep</span><span class="op" id="1536967">.</span><span class="ident" id="1536968">_type</span>&nbsp;<span class="op" id="1536974">=</span>&nbsp;<span class="ident" id="1536976">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1536980">ep</span><span class="op" id="1536982">.</span><span class="ident" id="1536983">data</span>&nbsp;<span class="op" id="1536988">=</span>&nbsp;<span class="ident" id="1536990">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1536993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1536996">return</span><br>
<span class="lineno"></span><span class="op" id="1537003">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="1537006">func</span>&nbsp;<span class="ident" id="1537011">convT2I</span><span class="op" id="1537018">(</span><span class="ident" id="1537019">t</span>&nbsp;<span class="op" id="1537021">*</span><span class="ident" id="1537022">_type</span><span class="op" id="1537027">,</span>&nbsp;<span class="ident" id="1537029">inter</span>&nbsp;<span class="op" id="1537035">*</span><span class="ident" id="1537036">interfacetype</span><span class="op" id="1537049">,</span>&nbsp;<span class="ident" id="1537051">cache</span>&nbsp;<span class="op" id="1537057">*</span><span class="op" id="1537058">*</span><span class="ident" id="1537059">itab</span><span class="op" id="1537063">,</span>&nbsp;<span class="ident" id="1537065">elem</span>&nbsp;<span class="ident" id="1537070">unsafe</span><span class="op" id="1537076">.</span><span class="ident" id="1537077">Pointer</span><span class="op" id="1537084">)</span>&nbsp;<span class="op" id="1537086">(</span><span class="ident" id="1537087">i</span>&nbsp;<span class="ident" id="1537089">fInterface</span><span class="op" id="1537099">)</span>&nbsp;<span class="op" id="1537101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537104">tab</span>&nbsp;<span class="op" id="1537108">:=</span>&nbsp;<span class="op" id="1537111">(</span><span class="op" id="1537112">*</span><span class="ident" id="1537113">itab</span><span class="op" id="1537117">)</span><span class="op" id="1537118">(</span><span class="ident" id="1537119">atomicloadp</span><span class="op" id="1537130">(</span><span class="ident" id="1537131">unsafe</span><span class="op" id="1537137">.</span><span class="ident" id="1537138">Pointer</span><span class="op" id="1537145">(</span><span class="ident" id="1537146">cache</span><span class="op" id="1537151">)</span><span class="op" id="1537152">)</span><span class="op" id="1537153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1537156">if</span>&nbsp;<span class="ident" id="1537159">tab</span>&nbsp;<span class="op" id="1537163">==</span>&nbsp;<span class="builtintype" id="1537166">nil</span>&nbsp;<span class="op" id="1537170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537174">tab</span>&nbsp;<span class="op" id="1537178">=</span>&nbsp;<span class="ident" id="1537180">getitab</span><span class="op" id="1537187">(</span><span class="ident" id="1537188">inter</span><span class="op" id="1537193">,</span>&nbsp;<span class="ident" id="1537195">t</span><span class="op" id="1537196">,</span>&nbsp;<span class="builtintype" id="1537198">false</span><span class="op" id="1537203">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537207">atomicstorep</span><span class="op" id="1537219">(</span><span class="ident" id="1537220">unsafe</span><span class="op" id="1537226">.</span><span class="ident" id="1537227">Pointer</span><span class="op" id="1537234">(</span><span class="ident" id="1537235">cache</span><span class="op" id="1537240">)</span><span class="op" id="1537241">,</span>&nbsp;<span class="ident" id="1537243">unsafe</span><span class="op" id="1537249">.</span><span class="ident" id="1537250">Pointer</span><span class="op" id="1537257">(</span><span class="ident" id="1537258">tab</span><span class="op" id="1537261">)</span><span class="op" id="1537262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537268">size</span>&nbsp;<span class="op" id="1537273">:=</span>&nbsp;<span class="builtintype" id="1537276">uintptr</span><span class="op" id="1537283">(</span><span class="ident" id="1537284">t</span><span class="op" id="1537285">.</span><span class="ident" id="1537286">size</span><span class="op" id="1537290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537293">pi</span>&nbsp;<span class="op" id="1537296">:=</span>&nbsp;<span class="op" id="1537299">(</span><span class="op" id="1537300">*</span><span class="ident" id="1537301">iface</span><span class="op" id="1537306">)</span><span class="op" id="1537307">(</span><span class="ident" id="1537308">unsafe</span><span class="op" id="1537314">.</span><span class="ident" id="1537315">Pointer</span><span class="op" id="1537322">(</span><span class="op" id="1537323">&amp;</span><span class="ident" id="1537324">i</span><span class="op" id="1537325">)</span><span class="op" id="1537326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1537329">if</span>&nbsp;<span class="ident" id="1537332">isDirectIface</span><span class="op" id="1537345">(</span><span class="ident" id="1537346">t</span><span class="op" id="1537347">)</span>&nbsp;<span class="op" id="1537349">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537353">pi</span><span class="op" id="1537355">.</span><span class="ident" id="1537356">tab</span>&nbsp;<span class="op" id="1537360">=</span>&nbsp;<span class="ident" id="1537362">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537368">memmove</span><span class="op" id="1537375">(</span><span class="ident" id="1537376">unsafe</span><span class="op" id="1537382">.</span><span class="ident" id="1537383">Pointer</span><span class="op" id="1537390">(</span><span class="op" id="1537391">&amp;</span><span class="ident" id="1537392">pi</span><span class="op" id="1537394">.</span><span class="ident" id="1537395">data</span><span class="op" id="1537399">)</span><span class="op" id="1537400">,</span>&nbsp;<span class="ident" id="1537402">elem</span><span class="op" id="1537406">,</span>&nbsp;<span class="ident" id="1537408">size</span><span class="op" id="1537412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537415">}</span>&nbsp;<span class="keyword" id="1537417">else</span>&nbsp;<span class="op" id="1537422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537426">x</span>&nbsp;<span class="op" id="1537428">:=</span>&nbsp;<span class="ident" id="1537431">newobject</span><span class="op" id="1537440">(</span><span class="ident" id="1537441">t</span><span class="op" id="1537442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537446">memmove</span><span class="op" id="1537453">(</span><span class="ident" id="1537454">x</span><span class="op" id="1537455">,</span>&nbsp;<span class="ident" id="1537457">elem</span><span class="op" id="1537461">,</span>&nbsp;<span class="ident" id="1537463">size</span><span class="op" id="1537467">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537471">pi</span><span class="op" id="1537473">.</span><span class="ident" id="1537474">tab</span>&nbsp;<span class="op" id="1537478">=</span>&nbsp;<span class="ident" id="1537480">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537486">pi</span><span class="op" id="1537488">.</span><span class="ident" id="1537489">data</span>&nbsp;<span class="op" id="1537494">=</span>&nbsp;<span class="ident" id="1537496">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1537502">return</span><br>
<span class="lineno"></span><span class="op" id="1537509">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="comment" id="1537512">//&nbsp;TODO:&nbsp;give&nbsp;these&nbsp;routines&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;result&nbsp;area&nbsp;instead&nbsp;of&nbsp;writing</span><br>
<span class="lineno"></span><span class="comment" id="1537589">//&nbsp;extra&nbsp;data&nbsp;in&nbsp;the&nbsp;outargs&nbsp;section.&nbsp;&nbsp;Then&nbsp;we&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;go:nosplit.</span><br>
<span class="lineno"></span><span class="comment" id="1537663">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1537676">func</span>&nbsp;<span class="ident" id="1537681">assertI2T</span><span class="op" id="1537690">(</span><span class="ident" id="1537691">t</span>&nbsp;<span class="op" id="1537693">*</span><span class="ident" id="1537694">_type</span><span class="op" id="1537699">,</span>&nbsp;<span class="ident" id="1537701">i</span>&nbsp;<span class="ident" id="1537703">fInterface</span><span class="op" id="1537713">)</span>&nbsp;<span class="op" id="1537715">(</span><span class="ident" id="1537716">r</span>&nbsp;<span class="keyword" id="1537718">struct</span><span class="op" id="1537724">{</span><span class="op" id="1537725">}</span><span class="op" id="1537726">)</span>&nbsp;<span class="op" id="1537728">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537731">ip</span>&nbsp;<span class="op" id="1537734">:=</span>&nbsp;<span class="op" id="1537737">(</span><span class="op" id="1537738">*</span><span class="ident" id="1537739">iface</span><span class="op" id="1537744">)</span><span class="op" id="1537745">(</span><span class="ident" id="1537746">unsafe</span><span class="op" id="1537752">.</span><span class="ident" id="1537753">Pointer</span><span class="op" id="1537760">(</span><span class="op" id="1537761">&amp;</span><span class="ident" id="1537762">i</span><span class="op" id="1537763">)</span><span class="op" id="1537764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537767">tab</span>&nbsp;<span class="op" id="1537771">:=</span>&nbsp;<span class="ident" id="1537774">ip</span><span class="op" id="1537776">.</span><span class="ident" id="1537777">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1537782">if</span>&nbsp;<span class="ident" id="1537785">tab</span>&nbsp;<span class="op" id="1537789">==</span>&nbsp;<span class="builtintype" id="1537792">nil</span>&nbsp;<span class="op" id="1537796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1537800">panic</span><span class="op" id="1537805">(</span><span class="op" id="1537806">&amp;</span><span class="ident" id="1537807">TypeAssertionError</span><span class="op" id="1537825">{</span><span class="string" id="1537826">&#34;&#34;</span><span class="op" id="1537828">,</span>&nbsp;<span class="string" id="1537830">&#34;&#34;</span><span class="op" id="1537832">,</span>&nbsp;<span class="op" id="1537834">*</span><span class="ident" id="1537835">t</span><span class="op" id="1537836">.</span><span class="ident" id="1537837">_string</span><span class="op" id="1537844">,</span>&nbsp;<span class="string" id="1537846">&#34;&#34;</span><span class="op" id="1537848">}</span><span class="op" id="1537849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537852">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1537855">if</span>&nbsp;<span class="ident" id="1537858">tab</span><span class="op" id="1537861">.</span><span class="ident" id="1537862">_type</span>&nbsp;<span class="op" id="1537868">!=</span>&nbsp;<span class="ident" id="1537871">t</span>&nbsp;<span class="op" id="1537873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1537877">panic</span><span class="op" id="1537882">(</span><span class="op" id="1537883">&amp;</span><span class="ident" id="1537884">TypeAssertionError</span><span class="op" id="1537902">{</span><span class="op" id="1537903">*</span><span class="ident" id="1537904">tab</span><span class="op" id="1537907">.</span><span class="ident" id="1537908">inter</span><span class="op" id="1537913">.</span><span class="ident" id="1537914">typ</span><span class="op" id="1537917">.</span><span class="ident" id="1537918">_string</span><span class="op" id="1537925">,</span>&nbsp;<span class="op" id="1537927">*</span><span class="ident" id="1537928">tab</span><span class="op" id="1537931">.</span><span class="ident" id="1537932">_type</span><span class="op" id="1537937">.</span><span class="ident" id="1537938">_string</span><span class="op" id="1537945">,</span>&nbsp;<span class="op" id="1537947">*</span><span class="ident" id="1537948">t</span><span class="op" id="1537949">.</span><span class="ident" id="1537950">_string</span><span class="op" id="1537957">,</span>&nbsp;<span class="string" id="1537959">&#34;&#34;</span><span class="op" id="1537961">}</span><span class="op" id="1537962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1537965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1537968">size</span>&nbsp;<span class="op" id="1537973">:=</span>&nbsp;<span class="builtintype" id="1537976">uintptr</span><span class="op" id="1537983">(</span><span class="ident" id="1537984">t</span><span class="op" id="1537985">.</span><span class="ident" id="1537986">size</span><span class="op" id="1537990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1537993">if</span>&nbsp;<span class="ident" id="1537996">isDirectIface</span><span class="op" id="1538009">(</span><span class="ident" id="1538010">t</span><span class="op" id="1538011">)</span>&nbsp;<span class="op" id="1538013">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538017">memmove</span><span class="op" id="1538024">(</span><span class="ident" id="1538025">unsafe</span><span class="op" id="1538031">.</span><span class="ident" id="1538032">Pointer</span><span class="op" id="1538039">(</span><span class="op" id="1538040">&amp;</span><span class="ident" id="1538041">r</span><span class="op" id="1538042">)</span><span class="op" id="1538043">,</span>&nbsp;<span class="ident" id="1538045">unsafe</span><span class="op" id="1538051">.</span><span class="ident" id="1538052">Pointer</span><span class="op" id="1538059">(</span><span class="op" id="1538060">&amp;</span><span class="ident" id="1538061">ip</span><span class="op" id="1538063">.</span><span class="ident" id="1538064">data</span><span class="op" id="1538068">)</span><span class="op" id="1538069">,</span>&nbsp;<span class="ident" id="1538071">size</span><span class="op" id="1538075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1538078">}</span>&nbsp;<span class="keyword" id="1538080">else</span>&nbsp;<span class="op" id="1538085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538089">memmove</span><span class="op" id="1538096">(</span><span class="ident" id="1538097">unsafe</span><span class="op" id="1538103">.</span><span class="ident" id="1538104">Pointer</span><span class="op" id="1538111">(</span><span class="op" id="1538112">&amp;</span><span class="ident" id="1538113">r</span><span class="op" id="1538114">)</span><span class="op" id="1538115">,</span>&nbsp;<span class="ident" id="1538117">ip</span><span class="op" id="1538119">.</span><span class="ident" id="1538120">data</span><span class="op" id="1538124">,</span>&nbsp;<span class="ident" id="1538126">size</span><span class="op" id="1538130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1538133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1538136">return</span><br>
<span class="lineno">190</span><span class="op" id="1538143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1538146">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1538159">func</span>&nbsp;<span class="ident" id="1538164">assertI2T2</span><span class="op" id="1538174">(</span><span class="ident" id="1538175">t</span>&nbsp;<span class="op" id="1538177">*</span><span class="ident" id="1538178">_type</span><span class="op" id="1538183">,</span>&nbsp;<span class="ident" id="1538185">i</span>&nbsp;<span class="ident" id="1538187">fInterface</span><span class="op" id="1538197">)</span>&nbsp;<span class="op" id="1538199">(</span><span class="ident" id="1538200">r</span>&nbsp;<span class="builtintype" id="1538202">byte</span><span class="op" id="1538206">)</span>&nbsp;<span class="op" id="1538208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538211">ip</span>&nbsp;<span class="op" id="1538214">:=</span>&nbsp;<span class="op" id="1538217">(</span><span class="op" id="1538218">*</span><span class="ident" id="1538219">iface</span><span class="op" id="1538224">)</span><span class="op" id="1538225">(</span><span class="ident" id="1538226">unsafe</span><span class="op" id="1538232">.</span><span class="ident" id="1538233">Pointer</span><span class="op" id="1538240">(</span><span class="op" id="1538241">&amp;</span><span class="ident" id="1538242">i</span><span class="op" id="1538243">)</span><span class="op" id="1538244">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538247">size</span>&nbsp;<span class="op" id="1538252">:=</span>&nbsp;<span class="builtintype" id="1538255">uintptr</span><span class="op" id="1538262">(</span><span class="ident" id="1538263">t</span><span class="op" id="1538264">.</span><span class="ident" id="1538265">size</span><span class="op" id="1538269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538272">ok</span>&nbsp;<span class="op" id="1538275">:=</span>&nbsp;<span class="op" id="1538278">(</span><span class="op" id="1538279">*</span><span class="builtintype" id="1538280">bool</span><span class="op" id="1538284">)</span><span class="op" id="1538285">(</span><span class="ident" id="1538286">add</span><span class="op" id="1538289">(</span><span class="ident" id="1538290">unsafe</span><span class="op" id="1538296">.</span><span class="ident" id="1538297">Pointer</span><span class="op" id="1538304">(</span><span class="op" id="1538305">&amp;</span><span class="ident" id="1538306">r</span><span class="op" id="1538307">)</span><span class="op" id="1538308">,</span>&nbsp;<span class="ident" id="1538310">size</span><span class="op" id="1538314">)</span><span class="op" id="1538315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538318">tab</span>&nbsp;<span class="op" id="1538322">:=</span>&nbsp;<span class="ident" id="1538325">ip</span><span class="op" id="1538327">.</span><span class="ident" id="1538328">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1538333">if</span>&nbsp;<span class="ident" id="1538336">tab</span>&nbsp;<span class="op" id="1538340">==</span>&nbsp;<span class="builtintype" id="1538343">nil</span>&nbsp;<span class="op" id="1538347">||</span>&nbsp;<span class="ident" id="1538350">tab</span><span class="op" id="1538353">.</span><span class="ident" id="1538354">_type</span>&nbsp;<span class="op" id="1538360">!=</span>&nbsp;<span class="ident" id="1538363">t</span>&nbsp;<span class="op" id="1538365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1538369">*</span><span class="ident" id="1538370">ok</span>&nbsp;<span class="op" id="1538373">=</span>&nbsp;<span class="builtintype" id="1538375">false</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538383">memclr</span><span class="op" id="1538389">(</span><span class="ident" id="1538390">unsafe</span><span class="op" id="1538396">.</span><span class="ident" id="1538397">Pointer</span><span class="op" id="1538404">(</span><span class="op" id="1538405">&amp;</span><span class="ident" id="1538406">r</span><span class="op" id="1538407">)</span><span class="op" id="1538408">,</span>&nbsp;<span class="ident" id="1538410">size</span><span class="op" id="1538414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1538418">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1538426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1538429">*</span><span class="ident" id="1538430">ok</span>&nbsp;<span class="op" id="1538433">=</span>&nbsp;<span class="builtintype" id="1538435">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1538441">if</span>&nbsp;<span class="ident" id="1538444">isDirectIface</span><span class="op" id="1538457">(</span><span class="ident" id="1538458">t</span><span class="op" id="1538459">)</span>&nbsp;<span class="op" id="1538461">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538465">memmove</span><span class="op" id="1538472">(</span><span class="ident" id="1538473">unsafe</span><span class="op" id="1538479">.</span><span class="ident" id="1538480">Pointer</span><span class="op" id="1538487">(</span><span class="op" id="1538488">&amp;</span><span class="ident" id="1538489">r</span><span class="op" id="1538490">)</span><span class="op" id="1538491">,</span>&nbsp;<span class="ident" id="1538493">unsafe</span><span class="op" id="1538499">.</span><span class="ident" id="1538500">Pointer</span><span class="op" id="1538507">(</span><span class="op" id="1538508">&amp;</span><span class="ident" id="1538509">ip</span><span class="op" id="1538511">.</span><span class="ident" id="1538512">data</span><span class="op" id="1538516">)</span><span class="op" id="1538517">,</span>&nbsp;<span class="ident" id="1538519">size</span><span class="op" id="1538523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1538526">}</span>&nbsp;<span class="keyword" id="1538528">else</span>&nbsp;<span class="op" id="1538533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538537">memmove</span><span class="op" id="1538544">(</span><span class="ident" id="1538545">unsafe</span><span class="op" id="1538551">.</span><span class="ident" id="1538552">Pointer</span><span class="op" id="1538559">(</span><span class="op" id="1538560">&amp;</span><span class="ident" id="1538561">r</span><span class="op" id="1538562">)</span><span class="op" id="1538563">,</span>&nbsp;<span class="ident" id="1538565">ip</span><span class="op" id="1538567">.</span><span class="ident" id="1538568">data</span><span class="op" id="1538572">,</span>&nbsp;<span class="ident" id="1538574">size</span><span class="op" id="1538578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1538581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1538584">return</span><br>
<span class="lineno">210</span><span class="op" id="1538591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1538594">func</span>&nbsp;<span class="ident" id="1538599">assertI2TOK</span><span class="op" id="1538610">(</span><span class="ident" id="1538611">t</span>&nbsp;<span class="op" id="1538613">*</span><span class="ident" id="1538614">_type</span><span class="op" id="1538619">,</span>&nbsp;<span class="ident" id="1538621">i</span>&nbsp;<span class="ident" id="1538623">fInterface</span><span class="op" id="1538633">)</span>&nbsp;<span class="builtintype" id="1538635">bool</span>&nbsp;<span class="op" id="1538640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538643">ip</span>&nbsp;<span class="op" id="1538646">:=</span>&nbsp;<span class="op" id="1538649">(</span><span class="op" id="1538650">*</span><span class="ident" id="1538651">iface</span><span class="op" id="1538656">)</span><span class="op" id="1538657">(</span><span class="ident" id="1538658">unsafe</span><span class="op" id="1538664">.</span><span class="ident" id="1538665">Pointer</span><span class="op" id="1538672">(</span><span class="op" id="1538673">&amp;</span><span class="ident" id="1538674">i</span><span class="op" id="1538675">)</span><span class="op" id="1538676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538679">tab</span>&nbsp;<span class="op" id="1538683">:=</span>&nbsp;<span class="ident" id="1538686">ip</span><span class="op" id="1538688">.</span><span class="ident" id="1538689">tab</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1538694">return</span>&nbsp;<span class="ident" id="1538701">tab</span>&nbsp;<span class="op" id="1538705">!=</span>&nbsp;<span class="builtintype" id="1538708">nil</span>&nbsp;<span class="op" id="1538712">&amp;&amp;</span>&nbsp;<span class="ident" id="1538715">tab</span><span class="op" id="1538718">.</span><span class="ident" id="1538719">_type</span>&nbsp;<span class="op" id="1538725">==</span>&nbsp;<span class="ident" id="1538728">t</span><br>
<span class="lineno"></span><span class="op" id="1538730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1538733">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1538746">func</span>&nbsp;<span class="ident" id="1538751">assertE2T</span><span class="op" id="1538760">(</span><span class="ident" id="1538761">t</span>&nbsp;<span class="op" id="1538763">*</span><span class="ident" id="1538764">_type</span><span class="op" id="1538769">,</span>&nbsp;<span class="ident" id="1538771">e</span>&nbsp;<span class="keyword" id="1538773">interface</span><span class="op" id="1538782">{</span><span class="op" id="1538783">}</span><span class="op" id="1538784">)</span>&nbsp;<span class="op" id="1538786">(</span><span class="ident" id="1538787">r</span>&nbsp;<span class="keyword" id="1538789">struct</span><span class="op" id="1538795">{</span><span class="op" id="1538796">}</span><span class="op" id="1538797">)</span>&nbsp;<span class="op" id="1538799">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1538802">ep</span>&nbsp;<span class="op" id="1538805">:=</span>&nbsp;<span class="op" id="1538808">(</span><span class="op" id="1538809">*</span><span class="ident" id="1538810">eface</span><span class="op" id="1538815">)</span><span class="op" id="1538816">(</span><span class="ident" id="1538817">unsafe</span><span class="op" id="1538823">.</span><span class="ident" id="1538824">Pointer</span><span class="op" id="1538831">(</span><span class="op" id="1538832">&amp;</span><span class="ident" id="1538833">e</span><span class="op" id="1538834">)</span><span class="op" id="1538835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1538838">if</span>&nbsp;<span class="ident" id="1538841">ep</span><span class="op" id="1538843">.</span><span class="ident" id="1538844">_type</span>&nbsp;<span class="op" id="1538850">==</span>&nbsp;<span class="builtintype" id="1538853">nil</span>&nbsp;<span class="op" id="1538857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1538861">panic</span><span class="op" id="1538866">(</span><span class="op" id="1538867">&amp;</span><span class="ident" id="1538868">TypeAssertionError</span><span class="op" id="1538886">{</span><span class="string" id="1538887">&#34;&#34;</span><span class="op" id="1538889">,</span>&nbsp;<span class="string" id="1538891">&#34;&#34;</span><span class="op" id="1538893">,</span>&nbsp;<span class="op" id="1538895">*</span><span class="ident" id="1538896">t</span><span class="op" id="1538897">.</span><span class="ident" id="1538898">_string</span><span class="op" id="1538905">,</span>&nbsp;<span class="string" id="1538907">&#34;&#34;</span><span class="op" id="1538909">}</span><span class="op" id="1538910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1538913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1538916">if</span>&nbsp;<span class="ident" id="1538919">ep</span><span class="op" id="1538921">.</span><span class="ident" id="1538922">_type</span>&nbsp;<span class="op" id="1538928">!=</span>&nbsp;<span class="ident" id="1538931">t</span>&nbsp;<span class="op" id="1538933">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1538937">panic</span><span class="op" id="1538942">(</span><span class="op" id="1538943">&amp;</span><span class="ident" id="1538944">TypeAssertionError</span><span class="op" id="1538962">{</span><span class="string" id="1538963">&#34;&#34;</span><span class="op" id="1538965">,</span>&nbsp;<span class="op" id="1538967">*</span><span class="ident" id="1538968">ep</span><span class="op" id="1538970">.</span><span class="ident" id="1538971">_type</span><span class="op" id="1538976">.</span><span class="ident" id="1538977">_string</span><span class="op" id="1538984">,</span>&nbsp;<span class="op" id="1538986">*</span><span class="ident" id="1538987">t</span><span class="op" id="1538988">.</span><span class="ident" id="1538989">_string</span><span class="op" id="1538996">,</span>&nbsp;<span class="string" id="1538998">&#34;&#34;</span><span class="op" id="1539000">}</span><span class="op" id="1539001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539007">size</span>&nbsp;<span class="op" id="1539012">:=</span>&nbsp;<span class="builtintype" id="1539015">uintptr</span><span class="op" id="1539022">(</span><span class="ident" id="1539023">t</span><span class="op" id="1539024">.</span><span class="ident" id="1539025">size</span><span class="op" id="1539029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539032">if</span>&nbsp;<span class="ident" id="1539035">isDirectIface</span><span class="op" id="1539048">(</span><span class="ident" id="1539049">t</span><span class="op" id="1539050">)</span>&nbsp;<span class="op" id="1539052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539056">memmove</span><span class="op" id="1539063">(</span><span class="ident" id="1539064">unsafe</span><span class="op" id="1539070">.</span><span class="ident" id="1539071">Pointer</span><span class="op" id="1539078">(</span><span class="op" id="1539079">&amp;</span><span class="ident" id="1539080">r</span><span class="op" id="1539081">)</span><span class="op" id="1539082">,</span>&nbsp;<span class="ident" id="1539084">unsafe</span><span class="op" id="1539090">.</span><span class="ident" id="1539091">Pointer</span><span class="op" id="1539098">(</span><span class="op" id="1539099">&amp;</span><span class="ident" id="1539100">ep</span><span class="op" id="1539102">.</span><span class="ident" id="1539103">data</span><span class="op" id="1539107">)</span><span class="op" id="1539108">,</span>&nbsp;<span class="ident" id="1539110">size</span><span class="op" id="1539114">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539117">}</span>&nbsp;<span class="keyword" id="1539119">else</span>&nbsp;<span class="op" id="1539124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539128">memmove</span><span class="op" id="1539135">(</span><span class="ident" id="1539136">unsafe</span><span class="op" id="1539142">.</span><span class="ident" id="1539143">Pointer</span><span class="op" id="1539150">(</span><span class="op" id="1539151">&amp;</span><span class="ident" id="1539152">r</span><span class="op" id="1539153">)</span><span class="op" id="1539154">,</span>&nbsp;<span class="ident" id="1539156">ep</span><span class="op" id="1539158">.</span><span class="ident" id="1539159">data</span><span class="op" id="1539163">,</span>&nbsp;<span class="ident" id="1539165">size</span><span class="op" id="1539169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539175">return</span><br>
<span class="lineno"></span><span class="op" id="1539182">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="1539185">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1539198">func</span>&nbsp;<span class="ident" id="1539203">assertE2T2</span><span class="op" id="1539213">(</span><span class="ident" id="1539214">t</span>&nbsp;<span class="op" id="1539216">*</span><span class="ident" id="1539217">_type</span><span class="op" id="1539222">,</span>&nbsp;<span class="ident" id="1539224">e</span>&nbsp;<span class="keyword" id="1539226">interface</span><span class="op" id="1539235">{</span><span class="op" id="1539236">}</span><span class="op" id="1539237">)</span>&nbsp;<span class="op" id="1539239">(</span><span class="ident" id="1539240">r</span>&nbsp;<span class="builtintype" id="1539242">byte</span><span class="op" id="1539246">)</span>&nbsp;<span class="op" id="1539248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539251">ep</span>&nbsp;<span class="op" id="1539254">:=</span>&nbsp;<span class="op" id="1539257">(</span><span class="op" id="1539258">*</span><span class="ident" id="1539259">eface</span><span class="op" id="1539264">)</span><span class="op" id="1539265">(</span><span class="ident" id="1539266">unsafe</span><span class="op" id="1539272">.</span><span class="ident" id="1539273">Pointer</span><span class="op" id="1539280">(</span><span class="op" id="1539281">&amp;</span><span class="ident" id="1539282">e</span><span class="op" id="1539283">)</span><span class="op" id="1539284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539287">size</span>&nbsp;<span class="op" id="1539292">:=</span>&nbsp;<span class="builtintype" id="1539295">uintptr</span><span class="op" id="1539302">(</span><span class="ident" id="1539303">t</span><span class="op" id="1539304">.</span><span class="ident" id="1539305">size</span><span class="op" id="1539309">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539312">ok</span>&nbsp;<span class="op" id="1539315">:=</span>&nbsp;<span class="op" id="1539318">(</span><span class="op" id="1539319">*</span><span class="builtintype" id="1539320">bool</span><span class="op" id="1539324">)</span><span class="op" id="1539325">(</span><span class="ident" id="1539326">add</span><span class="op" id="1539329">(</span><span class="ident" id="1539330">unsafe</span><span class="op" id="1539336">.</span><span class="ident" id="1539337">Pointer</span><span class="op" id="1539344">(</span><span class="op" id="1539345">&amp;</span><span class="ident" id="1539346">r</span><span class="op" id="1539347">)</span><span class="op" id="1539348">,</span>&nbsp;<span class="ident" id="1539350">size</span><span class="op" id="1539354">)</span><span class="op" id="1539355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539358">if</span>&nbsp;<span class="ident" id="1539361">ep</span><span class="op" id="1539363">.</span><span class="ident" id="1539364">_type</span>&nbsp;<span class="op" id="1539370">!=</span>&nbsp;<span class="ident" id="1539373">t</span>&nbsp;<span class="op" id="1539375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539379">*</span><span class="ident" id="1539380">ok</span>&nbsp;<span class="op" id="1539383">=</span>&nbsp;<span class="builtintype" id="1539385">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539393">memclr</span><span class="op" id="1539399">(</span><span class="ident" id="1539400">unsafe</span><span class="op" id="1539406">.</span><span class="ident" id="1539407">Pointer</span><span class="op" id="1539414">(</span><span class="op" id="1539415">&amp;</span><span class="ident" id="1539416">r</span><span class="op" id="1539417">)</span><span class="op" id="1539418">,</span>&nbsp;<span class="ident" id="1539420">size</span><span class="op" id="1539424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539428">return</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539439">*</span><span class="ident" id="1539440">ok</span>&nbsp;<span class="op" id="1539443">=</span>&nbsp;<span class="builtintype" id="1539445">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539451">if</span>&nbsp;<span class="ident" id="1539454">isDirectIface</span><span class="op" id="1539467">(</span><span class="ident" id="1539468">t</span><span class="op" id="1539469">)</span>&nbsp;<span class="op" id="1539471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539475">memmove</span><span class="op" id="1539482">(</span><span class="ident" id="1539483">unsafe</span><span class="op" id="1539489">.</span><span class="ident" id="1539490">Pointer</span><span class="op" id="1539497">(</span><span class="op" id="1539498">&amp;</span><span class="ident" id="1539499">r</span><span class="op" id="1539500">)</span><span class="op" id="1539501">,</span>&nbsp;<span class="ident" id="1539503">unsafe</span><span class="op" id="1539509">.</span><span class="ident" id="1539510">Pointer</span><span class="op" id="1539517">(</span><span class="op" id="1539518">&amp;</span><span class="ident" id="1539519">ep</span><span class="op" id="1539521">.</span><span class="ident" id="1539522">data</span><span class="op" id="1539526">)</span><span class="op" id="1539527">,</span>&nbsp;<span class="ident" id="1539529">size</span><span class="op" id="1539533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539536">}</span>&nbsp;<span class="keyword" id="1539538">else</span>&nbsp;<span class="op" id="1539543">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539547">memmove</span><span class="op" id="1539554">(</span><span class="ident" id="1539555">unsafe</span><span class="op" id="1539561">.</span><span class="ident" id="1539562">Pointer</span><span class="op" id="1539569">(</span><span class="op" id="1539570">&amp;</span><span class="ident" id="1539571">r</span><span class="op" id="1539572">)</span><span class="op" id="1539573">,</span>&nbsp;<span class="ident" id="1539575">ep</span><span class="op" id="1539577">.</span><span class="ident" id="1539578">data</span><span class="op" id="1539582">,</span>&nbsp;<span class="ident" id="1539584">size</span><span class="op" id="1539588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539594">return</span><br>
<span class="lineno"></span><span class="op" id="1539601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="1539604">func</span>&nbsp;<span class="ident" id="1539609">assertE2TOK</span><span class="op" id="1539620">(</span><span class="ident" id="1539621">t</span>&nbsp;<span class="op" id="1539623">*</span><span class="ident" id="1539624">_type</span><span class="op" id="1539629">,</span>&nbsp;<span class="ident" id="1539631">e</span>&nbsp;<span class="keyword" id="1539633">interface</span><span class="op" id="1539642">{</span><span class="op" id="1539643">}</span><span class="op" id="1539644">)</span>&nbsp;<span class="builtintype" id="1539646">bool</span>&nbsp;<span class="op" id="1539651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539654">ep</span>&nbsp;<span class="op" id="1539657">:=</span>&nbsp;<span class="op" id="1539660">(</span><span class="op" id="1539661">*</span><span class="ident" id="1539662">eface</span><span class="op" id="1539667">)</span><span class="op" id="1539668">(</span><span class="ident" id="1539669">unsafe</span><span class="op" id="1539675">.</span><span class="ident" id="1539676">Pointer</span><span class="op" id="1539683">(</span><span class="op" id="1539684">&amp;</span><span class="ident" id="1539685">e</span><span class="op" id="1539686">)</span><span class="op" id="1539687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539690">return</span>&nbsp;<span class="ident" id="1539697">t</span>&nbsp;<span class="op" id="1539699">==</span>&nbsp;<span class="ident" id="1539702">ep</span><span class="op" id="1539704">.</span><span class="ident" id="1539705">_type</span><br>
<span class="lineno"></span><span class="op" id="1539711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="1539714">func</span>&nbsp;<span class="ident" id="1539719">convI2E</span><span class="op" id="1539726">(</span><span class="ident" id="1539727">i</span>&nbsp;<span class="ident" id="1539729">fInterface</span><span class="op" id="1539739">)</span>&nbsp;<span class="op" id="1539741">(</span><span class="ident" id="1539742">r</span>&nbsp;<span class="keyword" id="1539744">interface</span><span class="op" id="1539753">{</span><span class="op" id="1539754">}</span><span class="op" id="1539755">)</span>&nbsp;<span class="op" id="1539757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539760">ip</span>&nbsp;<span class="op" id="1539763">:=</span>&nbsp;<span class="op" id="1539766">(</span><span class="op" id="1539767">*</span><span class="ident" id="1539768">iface</span><span class="op" id="1539773">)</span><span class="op" id="1539774">(</span><span class="ident" id="1539775">unsafe</span><span class="op" id="1539781">.</span><span class="ident" id="1539782">Pointer</span><span class="op" id="1539789">(</span><span class="op" id="1539790">&amp;</span><span class="ident" id="1539791">i</span><span class="op" id="1539792">)</span><span class="op" id="1539793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539796">tab</span>&nbsp;<span class="op" id="1539800">:=</span>&nbsp;<span class="ident" id="1539803">ip</span><span class="op" id="1539805">.</span><span class="ident" id="1539806">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539811">if</span>&nbsp;<span class="ident" id="1539814">tab</span>&nbsp;<span class="op" id="1539818">==</span>&nbsp;<span class="builtintype" id="1539821">nil</span>&nbsp;<span class="op" id="1539825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539829">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539840">rp</span>&nbsp;<span class="op" id="1539843">:=</span>&nbsp;<span class="op" id="1539846">(</span><span class="op" id="1539847">*</span><span class="ident" id="1539848">eface</span><span class="op" id="1539853">)</span><span class="op" id="1539854">(</span><span class="ident" id="1539855">unsafe</span><span class="op" id="1539861">.</span><span class="ident" id="1539862">Pointer</span><span class="op" id="1539869">(</span><span class="op" id="1539870">&amp;</span><span class="ident" id="1539871">r</span><span class="op" id="1539872">)</span><span class="op" id="1539873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539876">rp</span><span class="op" id="1539878">.</span><span class="ident" id="1539879">_type</span>&nbsp;<span class="op" id="1539885">=</span>&nbsp;<span class="ident" id="1539887">tab</span><span class="op" id="1539890">.</span><span class="ident" id="1539891">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539898">rp</span><span class="op" id="1539900">.</span><span class="ident" id="1539901">data</span>&nbsp;<span class="op" id="1539906">=</span>&nbsp;<span class="ident" id="1539908">ip</span><span class="op" id="1539910">.</span><span class="ident" id="1539911">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539917">return</span><br>
<span class="lineno">270</span><span class="op" id="1539924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1539927">func</span>&nbsp;<span class="ident" id="1539932">assertI2E</span><span class="op" id="1539941">(</span><span class="ident" id="1539942">inter</span>&nbsp;<span class="op" id="1539948">*</span><span class="ident" id="1539949">interfacetype</span><span class="op" id="1539962">,</span>&nbsp;<span class="ident" id="1539964">i</span>&nbsp;<span class="ident" id="1539966">fInterface</span><span class="op" id="1539976">)</span>&nbsp;<span class="op" id="1539978">(</span><span class="ident" id="1539979">r</span>&nbsp;<span class="keyword" id="1539981">interface</span><span class="op" id="1539990">{</span><span class="op" id="1539991">}</span><span class="op" id="1539992">)</span>&nbsp;<span class="op" id="1539994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539997">ip</span>&nbsp;<span class="op" id="1540000">:=</span>&nbsp;<span class="op" id="1540003">(</span><span class="op" id="1540004">*</span><span class="ident" id="1540005">iface</span><span class="op" id="1540010">)</span><span class="op" id="1540011">(</span><span class="ident" id="1540012">unsafe</span><span class="op" id="1540018">.</span><span class="ident" id="1540019">Pointer</span><span class="op" id="1540026">(</span><span class="op" id="1540027">&amp;</span><span class="ident" id="1540028">i</span><span class="op" id="1540029">)</span><span class="op" id="1540030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540033">tab</span>&nbsp;<span class="op" id="1540037">:=</span>&nbsp;<span class="ident" id="1540040">ip</span><span class="op" id="1540042">.</span><span class="ident" id="1540043">tab</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540048">if</span>&nbsp;<span class="ident" id="1540051">tab</span>&nbsp;<span class="op" id="1540055">==</span>&nbsp;<span class="builtintype" id="1540058">nil</span>&nbsp;<span class="op" id="1540062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540066">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1540125">panic</span><span class="op" id="1540130">(</span><span class="op" id="1540131">&amp;</span><span class="ident" id="1540132">TypeAssertionError</span><span class="op" id="1540150">{</span><span class="string" id="1540151">&#34;&#34;</span><span class="op" id="1540153">,</span>&nbsp;<span class="string" id="1540155">&#34;&#34;</span><span class="op" id="1540157">,</span>&nbsp;<span class="op" id="1540159">*</span><span class="ident" id="1540160">inter</span><span class="op" id="1540165">.</span><span class="ident" id="1540166">typ</span><span class="op" id="1540169">.</span><span class="ident" id="1540170">_string</span><span class="op" id="1540177">,</span>&nbsp;<span class="string" id="1540179">&#34;&#34;</span><span class="op" id="1540181">}</span><span class="op" id="1540182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540188">rp</span>&nbsp;<span class="op" id="1540191">:=</span>&nbsp;<span class="op" id="1540194">(</span><span class="op" id="1540195">*</span><span class="ident" id="1540196">eface</span><span class="op" id="1540201">)</span><span class="op" id="1540202">(</span><span class="ident" id="1540203">unsafe</span><span class="op" id="1540209">.</span><span class="ident" id="1540210">Pointer</span><span class="op" id="1540217">(</span><span class="op" id="1540218">&amp;</span><span class="ident" id="1540219">r</span><span class="op" id="1540220">)</span><span class="op" id="1540221">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540224">rp</span><span class="op" id="1540226">.</span><span class="ident" id="1540227">_type</span>&nbsp;<span class="op" id="1540233">=</span>&nbsp;<span class="ident" id="1540235">tab</span><span class="op" id="1540238">.</span><span class="ident" id="1540239">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540246">rp</span><span class="op" id="1540248">.</span><span class="ident" id="1540249">data</span>&nbsp;<span class="op" id="1540254">=</span>&nbsp;<span class="ident" id="1540256">ip</span><span class="op" id="1540258">.</span><span class="ident" id="1540259">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540265">return</span><br>
<span class="lineno"></span><span class="op" id="1540272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="1540275">func</span>&nbsp;<span class="ident" id="1540280">assertI2E2</span><span class="op" id="1540290">(</span><span class="ident" id="1540291">inter</span>&nbsp;<span class="op" id="1540297">*</span><span class="ident" id="1540298">interfacetype</span><span class="op" id="1540311">,</span>&nbsp;<span class="ident" id="1540313">i</span>&nbsp;<span class="ident" id="1540315">fInterface</span><span class="op" id="1540325">)</span>&nbsp;<span class="op" id="1540327">(</span><span class="ident" id="1540328">r</span>&nbsp;<span class="keyword" id="1540330">interface</span><span class="op" id="1540339">{</span><span class="op" id="1540340">}</span><span class="op" id="1540341">,</span>&nbsp;<span class="ident" id="1540343">ok</span>&nbsp;<span class="builtintype" id="1540346">bool</span><span class="op" id="1540350">)</span>&nbsp;<span class="op" id="1540352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540355">ip</span>&nbsp;<span class="op" id="1540358">:=</span>&nbsp;<span class="op" id="1540361">(</span><span class="op" id="1540362">*</span><span class="ident" id="1540363">iface</span><span class="op" id="1540368">)</span><span class="op" id="1540369">(</span><span class="ident" id="1540370">unsafe</span><span class="op" id="1540376">.</span><span class="ident" id="1540377">Pointer</span><span class="op" id="1540384">(</span><span class="op" id="1540385">&amp;</span><span class="ident" id="1540386">i</span><span class="op" id="1540387">)</span><span class="op" id="1540388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540391">tab</span>&nbsp;<span class="op" id="1540395">:=</span>&nbsp;<span class="ident" id="1540398">ip</span><span class="op" id="1540400">.</span><span class="ident" id="1540401">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540406">if</span>&nbsp;<span class="ident" id="1540409">tab</span>&nbsp;<span class="op" id="1540413">==</span>&nbsp;<span class="builtintype" id="1540416">nil</span>&nbsp;<span class="op" id="1540420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540424">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540435">rp</span>&nbsp;<span class="op" id="1540438">:=</span>&nbsp;<span class="op" id="1540441">(</span><span class="op" id="1540442">*</span><span class="ident" id="1540443">eface</span><span class="op" id="1540448">)</span><span class="op" id="1540449">(</span><span class="ident" id="1540450">unsafe</span><span class="op" id="1540456">.</span><span class="ident" id="1540457">Pointer</span><span class="op" id="1540464">(</span><span class="op" id="1540465">&amp;</span><span class="ident" id="1540466">r</span><span class="op" id="1540467">)</span><span class="op" id="1540468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540471">rp</span><span class="op" id="1540473">.</span><span class="ident" id="1540474">_type</span>&nbsp;<span class="op" id="1540480">=</span>&nbsp;<span class="ident" id="1540482">tab</span><span class="op" id="1540485">.</span><span class="ident" id="1540486">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540493">rp</span><span class="op" id="1540495">.</span><span class="ident" id="1540496">data</span>&nbsp;<span class="op" id="1540501">=</span>&nbsp;<span class="ident" id="1540503">ip</span><span class="op" id="1540505">.</span><span class="ident" id="1540506">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540512">ok</span>&nbsp;<span class="op" id="1540515">=</span>&nbsp;<span class="builtintype" id="1540517">true</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540523">return</span><br>
<span class="lineno"></span><span class="op" id="1540530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1540533">func</span>&nbsp;<span class="ident" id="1540538">convI2I</span><span class="op" id="1540545">(</span><span class="ident" id="1540546">inter</span>&nbsp;<span class="op" id="1540552">*</span><span class="ident" id="1540553">interfacetype</span><span class="op" id="1540566">,</span>&nbsp;<span class="ident" id="1540568">i</span>&nbsp;<span class="ident" id="1540570">fInterface</span><span class="op" id="1540580">)</span>&nbsp;<span class="op" id="1540582">(</span><span class="ident" id="1540583">r</span>&nbsp;<span class="ident" id="1540585">fInterface</span><span class="op" id="1540595">)</span>&nbsp;<span class="op" id="1540597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540600">ip</span>&nbsp;<span class="op" id="1540603">:=</span>&nbsp;<span class="op" id="1540606">(</span><span class="op" id="1540607">*</span><span class="ident" id="1540608">iface</span><span class="op" id="1540613">)</span><span class="op" id="1540614">(</span><span class="ident" id="1540615">unsafe</span><span class="op" id="1540621">.</span><span class="ident" id="1540622">Pointer</span><span class="op" id="1540629">(</span><span class="op" id="1540630">&amp;</span><span class="ident" id="1540631">i</span><span class="op" id="1540632">)</span><span class="op" id="1540633">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540636">tab</span>&nbsp;<span class="op" id="1540640">:=</span>&nbsp;<span class="ident" id="1540643">ip</span><span class="op" id="1540645">.</span><span class="ident" id="1540646">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540651">if</span>&nbsp;<span class="ident" id="1540654">tab</span>&nbsp;<span class="op" id="1540658">==</span>&nbsp;<span class="builtintype" id="1540661">nil</span>&nbsp;<span class="op" id="1540665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540669">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540680">rp</span>&nbsp;<span class="op" id="1540683">:=</span>&nbsp;<span class="op" id="1540686">(</span><span class="op" id="1540687">*</span><span class="ident" id="1540688">iface</span><span class="op" id="1540693">)</span><span class="op" id="1540694">(</span><span class="ident" id="1540695">unsafe</span><span class="op" id="1540701">.</span><span class="ident" id="1540702">Pointer</span><span class="op" id="1540709">(</span><span class="op" id="1540710">&amp;</span><span class="ident" id="1540711">r</span><span class="op" id="1540712">)</span><span class="op" id="1540713">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540716">if</span>&nbsp;<span class="ident" id="1540719">tab</span><span class="op" id="1540722">.</span><span class="ident" id="1540723">inter</span>&nbsp;<span class="op" id="1540729">==</span>&nbsp;<span class="ident" id="1540732">inter</span>&nbsp;<span class="op" id="1540738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540742">rp</span><span class="op" id="1540744">.</span><span class="ident" id="1540745">tab</span>&nbsp;<span class="op" id="1540749">=</span>&nbsp;<span class="ident" id="1540751">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540757">rp</span><span class="op" id="1540759">.</span><span class="ident" id="1540760">data</span>&nbsp;<span class="op" id="1540765">=</span>&nbsp;<span class="ident" id="1540767">ip</span><span class="op" id="1540769">.</span><span class="ident" id="1540770">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540777">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540785">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540788">rp</span><span class="op" id="1540790">.</span><span class="ident" id="1540791">tab</span>&nbsp;<span class="op" id="1540795">=</span>&nbsp;<span class="ident" id="1540797">getitab</span><span class="op" id="1540804">(</span><span class="ident" id="1540805">inter</span><span class="op" id="1540810">,</span>&nbsp;<span class="ident" id="1540812">tab</span><span class="op" id="1540815">.</span><span class="ident" id="1540816">_type</span><span class="op" id="1540821">,</span>&nbsp;<span class="builtintype" id="1540823">false</span><span class="op" id="1540828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540831">rp</span><span class="op" id="1540833">.</span><span class="ident" id="1540834">data</span>&nbsp;<span class="op" id="1540839">=</span>&nbsp;<span class="ident" id="1540841">ip</span><span class="op" id="1540843">.</span><span class="ident" id="1540844">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540850">return</span><br>
<span class="lineno"></span><span class="op" id="1540857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1540860">func</span>&nbsp;<span class="ident" id="1540865">assertI2I</span><span class="op" id="1540874">(</span><span class="ident" id="1540875">inter</span>&nbsp;<span class="op" id="1540881">*</span><span class="ident" id="1540882">interfacetype</span><span class="op" id="1540895">,</span>&nbsp;<span class="ident" id="1540897">i</span>&nbsp;<span class="ident" id="1540899">fInterface</span><span class="op" id="1540909">)</span>&nbsp;<span class="op" id="1540911">(</span><span class="ident" id="1540912">r</span>&nbsp;<span class="ident" id="1540914">fInterface</span><span class="op" id="1540924">)</span>&nbsp;<span class="op" id="1540926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540929">ip</span>&nbsp;<span class="op" id="1540932">:=</span>&nbsp;<span class="op" id="1540935">(</span><span class="op" id="1540936">*</span><span class="ident" id="1540937">iface</span><span class="op" id="1540942">)</span><span class="op" id="1540943">(</span><span class="ident" id="1540944">unsafe</span><span class="op" id="1540950">.</span><span class="ident" id="1540951">Pointer</span><span class="op" id="1540958">(</span><span class="op" id="1540959">&amp;</span><span class="ident" id="1540960">i</span><span class="op" id="1540961">)</span><span class="op" id="1540962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540965">tab</span>&nbsp;<span class="op" id="1540969">:=</span>&nbsp;<span class="ident" id="1540972">ip</span><span class="op" id="1540974">.</span><span class="ident" id="1540975">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540980">if</span>&nbsp;<span class="ident" id="1540983">tab</span>&nbsp;<span class="op" id="1540987">==</span>&nbsp;<span class="builtintype" id="1540990">nil</span>&nbsp;<span class="op" id="1540994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540998">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1541057">panic</span><span class="op" id="1541062">(</span><span class="op" id="1541063">&amp;</span><span class="ident" id="1541064">TypeAssertionError</span><span class="op" id="1541082">{</span><span class="string" id="1541083">&#34;&#34;</span><span class="op" id="1541085">,</span>&nbsp;<span class="string" id="1541087">&#34;&#34;</span><span class="op" id="1541089">,</span>&nbsp;<span class="op" id="1541091">*</span><span class="ident" id="1541092">inter</span><span class="op" id="1541097">.</span><span class="ident" id="1541098">typ</span><span class="op" id="1541101">.</span><span class="ident" id="1541102">_string</span><span class="op" id="1541109">,</span>&nbsp;<span class="string" id="1541111">&#34;&#34;</span><span class="op" id="1541113">}</span><span class="op" id="1541114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541120">rp</span>&nbsp;<span class="op" id="1541123">:=</span>&nbsp;<span class="op" id="1541126">(</span><span class="op" id="1541127">*</span><span class="ident" id="1541128">iface</span><span class="op" id="1541133">)</span><span class="op" id="1541134">(</span><span class="ident" id="1541135">unsafe</span><span class="op" id="1541141">.</span><span class="ident" id="1541142">Pointer</span><span class="op" id="1541149">(</span><span class="op" id="1541150">&amp;</span><span class="ident" id="1541151">r</span><span class="op" id="1541152">)</span><span class="op" id="1541153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541156">if</span>&nbsp;<span class="ident" id="1541159">tab</span><span class="op" id="1541162">.</span><span class="ident" id="1541163">inter</span>&nbsp;<span class="op" id="1541169">==</span>&nbsp;<span class="ident" id="1541172">inter</span>&nbsp;<span class="op" id="1541178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541182">rp</span><span class="op" id="1541184">.</span><span class="ident" id="1541185">tab</span>&nbsp;<span class="op" id="1541189">=</span>&nbsp;<span class="ident" id="1541191">tab</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541197">rp</span><span class="op" id="1541199">.</span><span class="ident" id="1541200">data</span>&nbsp;<span class="op" id="1541205">=</span>&nbsp;<span class="ident" id="1541207">ip</span><span class="op" id="1541209">.</span><span class="ident" id="1541210">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541217">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541228">rp</span><span class="op" id="1541230">.</span><span class="ident" id="1541231">tab</span>&nbsp;<span class="op" id="1541235">=</span>&nbsp;<span class="ident" id="1541237">getitab</span><span class="op" id="1541244">(</span><span class="ident" id="1541245">inter</span><span class="op" id="1541250">,</span>&nbsp;<span class="ident" id="1541252">tab</span><span class="op" id="1541255">.</span><span class="ident" id="1541256">_type</span><span class="op" id="1541261">,</span>&nbsp;<span class="builtintype" id="1541263">false</span><span class="op" id="1541268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541271">rp</span><span class="op" id="1541273">.</span><span class="ident" id="1541274">data</span>&nbsp;<span class="op" id="1541279">=</span>&nbsp;<span class="ident" id="1541281">ip</span><span class="op" id="1541283">.</span><span class="ident" id="1541284">data</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541290">return</span><br>
<span class="lineno"></span><span class="op" id="1541297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1541300">func</span>&nbsp;<span class="ident" id="1541305">assertI2I2</span><span class="op" id="1541315">(</span><span class="ident" id="1541316">inter</span>&nbsp;<span class="op" id="1541322">*</span><span class="ident" id="1541323">interfacetype</span><span class="op" id="1541336">,</span>&nbsp;<span class="ident" id="1541338">i</span>&nbsp;<span class="ident" id="1541340">fInterface</span><span class="op" id="1541350">)</span>&nbsp;<span class="op" id="1541352">(</span><span class="ident" id="1541353">r</span>&nbsp;<span class="ident" id="1541355">fInterface</span><span class="op" id="1541365">,</span>&nbsp;<span class="ident" id="1541367">ok</span>&nbsp;<span class="builtintype" id="1541370">bool</span><span class="op" id="1541374">)</span>&nbsp;<span class="op" id="1541376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541379">ip</span>&nbsp;<span class="op" id="1541382">:=</span>&nbsp;<span class="op" id="1541385">(</span><span class="op" id="1541386">*</span><span class="ident" id="1541387">iface</span><span class="op" id="1541392">)</span><span class="op" id="1541393">(</span><span class="ident" id="1541394">unsafe</span><span class="op" id="1541400">.</span><span class="ident" id="1541401">Pointer</span><span class="op" id="1541408">(</span><span class="op" id="1541409">&amp;</span><span class="ident" id="1541410">i</span><span class="op" id="1541411">)</span><span class="op" id="1541412">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541415">tab</span>&nbsp;<span class="op" id="1541419">:=</span>&nbsp;<span class="ident" id="1541422">ip</span><span class="op" id="1541424">.</span><span class="ident" id="1541425">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541430">if</span>&nbsp;<span class="ident" id="1541433">tab</span>&nbsp;<span class="op" id="1541437">==</span>&nbsp;<span class="builtintype" id="1541440">nil</span>&nbsp;<span class="op" id="1541444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541448">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541459">rp</span>&nbsp;<span class="op" id="1541462">:=</span>&nbsp;<span class="op" id="1541465">(</span><span class="op" id="1541466">*</span><span class="ident" id="1541467">iface</span><span class="op" id="1541472">)</span><span class="op" id="1541473">(</span><span class="ident" id="1541474">unsafe</span><span class="op" id="1541480">.</span><span class="ident" id="1541481">Pointer</span><span class="op" id="1541488">(</span><span class="op" id="1541489">&amp;</span><span class="ident" id="1541490">r</span><span class="op" id="1541491">)</span><span class="op" id="1541492">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541495">if</span>&nbsp;<span class="ident" id="1541498">tab</span><span class="op" id="1541501">.</span><span class="ident" id="1541502">inter</span>&nbsp;<span class="op" id="1541508">==</span>&nbsp;<span class="ident" id="1541511">inter</span>&nbsp;<span class="op" id="1541517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541521">rp</span><span class="op" id="1541523">.</span><span class="ident" id="1541524">tab</span>&nbsp;<span class="op" id="1541528">=</span>&nbsp;<span class="ident" id="1541530">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541536">rp</span><span class="op" id="1541538">.</span><span class="ident" id="1541539">data</span>&nbsp;<span class="op" id="1541544">=</span>&nbsp;<span class="ident" id="1541546">ip</span><span class="op" id="1541548">.</span><span class="ident" id="1541549">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541556">ok</span>&nbsp;<span class="op" id="1541559">=</span>&nbsp;<span class="builtintype" id="1541561">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541568">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541579">tab</span>&nbsp;<span class="op" id="1541583">=</span>&nbsp;<span class="ident" id="1541585">getitab</span><span class="op" id="1541592">(</span><span class="ident" id="1541593">inter</span><span class="op" id="1541598">,</span>&nbsp;<span class="ident" id="1541600">tab</span><span class="op" id="1541603">.</span><span class="ident" id="1541604">_type</span><span class="op" id="1541609">,</span>&nbsp;<span class="builtintype" id="1541611">true</span><span class="op" id="1541615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541618">if</span>&nbsp;<span class="ident" id="1541621">tab</span>&nbsp;<span class="op" id="1541625">==</span>&nbsp;<span class="builtintype" id="1541628">nil</span>&nbsp;<span class="op" id="1541632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541636">rp</span><span class="op" id="1541638">.</span><span class="ident" id="1541639">data</span>&nbsp;<span class="op" id="1541644">=</span>&nbsp;<span class="builtintype" id="1541646">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541652">rp</span><span class="op" id="1541654">.</span><span class="ident" id="1541655">tab</span>&nbsp;<span class="op" id="1541659">=</span>&nbsp;<span class="builtintype" id="1541661">nil</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541667">ok</span>&nbsp;<span class="op" id="1541670">=</span>&nbsp;<span class="builtintype" id="1541672">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541680">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541691">rp</span><span class="op" id="1541693">.</span><span class="ident" id="1541694">tab</span>&nbsp;<span class="op" id="1541698">=</span>&nbsp;<span class="ident" id="1541700">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541705">rp</span><span class="op" id="1541707">.</span><span class="ident" id="1541708">data</span>&nbsp;<span class="op" id="1541713">=</span>&nbsp;<span class="ident" id="1541715">ip</span><span class="op" id="1541717">.</span><span class="ident" id="1541718">data</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541724">ok</span>&nbsp;<span class="op" id="1541727">=</span>&nbsp;<span class="builtintype" id="1541729">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541735">return</span><br>
<span class="lineno"></span><span class="op" id="1541742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1541745">func</span>&nbsp;<span class="ident" id="1541750">assertE2I</span><span class="op" id="1541759">(</span><span class="ident" id="1541760">inter</span>&nbsp;<span class="op" id="1541766">*</span><span class="ident" id="1541767">interfacetype</span><span class="op" id="1541780">,</span>&nbsp;<span class="ident" id="1541782">e</span>&nbsp;<span class="keyword" id="1541784">interface</span><span class="op" id="1541793">{</span><span class="op" id="1541794">}</span><span class="op" id="1541795">)</span>&nbsp;<span class="op" id="1541797">(</span><span class="ident" id="1541798">r</span>&nbsp;<span class="ident" id="1541800">fInterface</span><span class="op" id="1541810">)</span>&nbsp;<span class="op" id="1541812">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541815">ep</span>&nbsp;<span class="op" id="1541818">:=</span>&nbsp;<span class="op" id="1541821">(</span><span class="op" id="1541822">*</span><span class="ident" id="1541823">eface</span><span class="op" id="1541828">)</span><span class="op" id="1541829">(</span><span class="ident" id="1541830">unsafe</span><span class="op" id="1541836">.</span><span class="ident" id="1541837">Pointer</span><span class="op" id="1541844">(</span><span class="op" id="1541845">&amp;</span><span class="ident" id="1541846">e</span><span class="op" id="1541847">)</span><span class="op" id="1541848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541851">t</span>&nbsp;<span class="op" id="1541853">:=</span>&nbsp;<span class="ident" id="1541856">ep</span><span class="op" id="1541858">.</span><span class="ident" id="1541859">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541866">if</span>&nbsp;<span class="ident" id="1541869">t</span>&nbsp;<span class="op" id="1541871">==</span>&nbsp;<span class="builtintype" id="1541874">nil</span>&nbsp;<span class="op" id="1541878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541882">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1541941">panic</span><span class="op" id="1541946">(</span><span class="op" id="1541947">&amp;</span><span class="ident" id="1541948">TypeAssertionError</span><span class="op" id="1541966">{</span><span class="string" id="1541967">&#34;&#34;</span><span class="op" id="1541969">,</span>&nbsp;<span class="string" id="1541971">&#34;&#34;</span><span class="op" id="1541973">,</span>&nbsp;<span class="op" id="1541975">*</span><span class="ident" id="1541976">inter</span><span class="op" id="1541981">.</span><span class="ident" id="1541982">typ</span><span class="op" id="1541985">.</span><span class="ident" id="1541986">_string</span><span class="op" id="1541993">,</span>&nbsp;<span class="string" id="1541995">&#34;&#34;</span><span class="op" id="1541997">}</span><span class="op" id="1541998">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542004">rp</span>&nbsp;<span class="op" id="1542007">:=</span>&nbsp;<span class="op" id="1542010">(</span><span class="op" id="1542011">*</span><span class="ident" id="1542012">iface</span><span class="op" id="1542017">)</span><span class="op" id="1542018">(</span><span class="ident" id="1542019">unsafe</span><span class="op" id="1542025">.</span><span class="ident" id="1542026">Pointer</span><span class="op" id="1542033">(</span><span class="op" id="1542034">&amp;</span><span class="ident" id="1542035">r</span><span class="op" id="1542036">)</span><span class="op" id="1542037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542040">rp</span><span class="op" id="1542042">.</span><span class="ident" id="1542043">tab</span>&nbsp;<span class="op" id="1542047">=</span>&nbsp;<span class="ident" id="1542049">getitab</span><span class="op" id="1542056">(</span><span class="ident" id="1542057">inter</span><span class="op" id="1542062">,</span>&nbsp;<span class="ident" id="1542064">t</span><span class="op" id="1542065">,</span>&nbsp;<span class="builtintype" id="1542067">false</span><span class="op" id="1542072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542075">rp</span><span class="op" id="1542077">.</span><span class="ident" id="1542078">data</span>&nbsp;<span class="op" id="1542083">=</span>&nbsp;<span class="ident" id="1542085">ep</span><span class="op" id="1542087">.</span><span class="ident" id="1542088">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542094">return</span><br>
<span class="lineno">370</span><span class="op" id="1542101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1542104">func</span>&nbsp;<span class="ident" id="1542109">assertE2I2</span><span class="op" id="1542119">(</span><span class="ident" id="1542120">inter</span>&nbsp;<span class="op" id="1542126">*</span><span class="ident" id="1542127">interfacetype</span><span class="op" id="1542140">,</span>&nbsp;<span class="ident" id="1542142">e</span>&nbsp;<span class="keyword" id="1542144">interface</span><span class="op" id="1542153">{</span><span class="op" id="1542154">}</span><span class="op" id="1542155">)</span>&nbsp;<span class="op" id="1542157">(</span><span class="ident" id="1542158">r</span>&nbsp;<span class="ident" id="1542160">fInterface</span><span class="op" id="1542170">,</span>&nbsp;<span class="ident" id="1542172">ok</span>&nbsp;<span class="builtintype" id="1542175">bool</span><span class="op" id="1542179">)</span>&nbsp;<span class="op" id="1542181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542184">ep</span>&nbsp;<span class="op" id="1542187">:=</span>&nbsp;<span class="op" id="1542190">(</span><span class="op" id="1542191">*</span><span class="ident" id="1542192">eface</span><span class="op" id="1542197">)</span><span class="op" id="1542198">(</span><span class="ident" id="1542199">unsafe</span><span class="op" id="1542205">.</span><span class="ident" id="1542206">Pointer</span><span class="op" id="1542213">(</span><span class="op" id="1542214">&amp;</span><span class="ident" id="1542215">e</span><span class="op" id="1542216">)</span><span class="op" id="1542217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542220">t</span>&nbsp;<span class="op" id="1542222">:=</span>&nbsp;<span class="ident" id="1542225">ep</span><span class="op" id="1542227">.</span><span class="ident" id="1542228">_type</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542235">if</span>&nbsp;<span class="ident" id="1542238">t</span>&nbsp;<span class="op" id="1542240">==</span>&nbsp;<span class="builtintype" id="1542243">nil</span>&nbsp;<span class="op" id="1542247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542251">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542262">tab</span>&nbsp;<span class="op" id="1542266">:=</span>&nbsp;<span class="ident" id="1542269">getitab</span><span class="op" id="1542276">(</span><span class="ident" id="1542277">inter</span><span class="op" id="1542282">,</span>&nbsp;<span class="ident" id="1542284">t</span><span class="op" id="1542285">,</span>&nbsp;<span class="builtintype" id="1542287">true</span><span class="op" id="1542291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542294">if</span>&nbsp;<span class="ident" id="1542297">tab</span>&nbsp;<span class="op" id="1542301">==</span>&nbsp;<span class="builtintype" id="1542304">nil</span>&nbsp;<span class="op" id="1542308">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542312">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542323">rp</span>&nbsp;<span class="op" id="1542326">:=</span>&nbsp;<span class="op" id="1542329">(</span><span class="op" id="1542330">*</span><span class="ident" id="1542331">iface</span><span class="op" id="1542336">)</span><span class="op" id="1542337">(</span><span class="ident" id="1542338">unsafe</span><span class="op" id="1542344">.</span><span class="ident" id="1542345">Pointer</span><span class="op" id="1542352">(</span><span class="op" id="1542353">&amp;</span><span class="ident" id="1542354">r</span><span class="op" id="1542355">)</span><span class="op" id="1542356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542359">rp</span><span class="op" id="1542361">.</span><span class="ident" id="1542362">tab</span>&nbsp;<span class="op" id="1542366">=</span>&nbsp;<span class="ident" id="1542368">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542373">rp</span><span class="op" id="1542375">.</span><span class="ident" id="1542376">data</span>&nbsp;<span class="op" id="1542381">=</span>&nbsp;<span class="ident" id="1542383">ep</span><span class="op" id="1542385">.</span><span class="ident" id="1542386">data</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542392">ok</span>&nbsp;<span class="op" id="1542395">=</span>&nbsp;<span class="builtintype" id="1542397">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542403">return</span><br>
<span class="lineno"></span><span class="op" id="1542410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1542413">func</span>&nbsp;<span class="ident" id="1542418">reflect_ifaceE2I</span><span class="op" id="1542434">(</span><span class="ident" id="1542435">inter</span>&nbsp;<span class="op" id="1542441">*</span><span class="ident" id="1542442">interfacetype</span><span class="op" id="1542455">,</span>&nbsp;<span class="ident" id="1542457">e</span>&nbsp;<span class="keyword" id="1542459">interface</span><span class="op" id="1542468">{</span><span class="op" id="1542469">}</span><span class="op" id="1542470">,</span>&nbsp;<span class="ident" id="1542472">dst</span>&nbsp;<span class="op" id="1542476">*</span><span class="ident" id="1542477">fInterface</span><span class="op" id="1542487">)</span>&nbsp;<span class="op" id="1542489">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542492">*</span><span class="ident" id="1542493">dst</span>&nbsp;<span class="op" id="1542497">=</span>&nbsp;<span class="ident" id="1542499">assertE2I</span><span class="op" id="1542508">(</span><span class="ident" id="1542509">inter</span><span class="op" id="1542514">,</span>&nbsp;<span class="ident" id="1542516">e</span><span class="op" id="1542517">)</span><br>
<span class="lineno"></span><span class="op" id="1542519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1542522">func</span>&nbsp;<span class="ident" id="1542527">assertE2E</span><span class="op" id="1542536">(</span><span class="ident" id="1542537">inter</span>&nbsp;<span class="op" id="1542543">*</span><span class="ident" id="1542544">interfacetype</span><span class="op" id="1542557">,</span>&nbsp;<span class="ident" id="1542559">e</span>&nbsp;<span class="keyword" id="1542561">interface</span><span class="op" id="1542570">{</span><span class="op" id="1542571">}</span><span class="op" id="1542572">)</span>&nbsp;<span class="keyword" id="1542574">interface</span><span class="op" id="1542583">{</span><span class="op" id="1542584">}</span>&nbsp;<span class="op" id="1542586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542589">ep</span>&nbsp;<span class="op" id="1542592">:=</span>&nbsp;<span class="op" id="1542595">(</span><span class="op" id="1542596">*</span><span class="ident" id="1542597">eface</span><span class="op" id="1542602">)</span><span class="op" id="1542603">(</span><span class="ident" id="1542604">unsafe</span><span class="op" id="1542610">.</span><span class="ident" id="1542611">Pointer</span><span class="op" id="1542618">(</span><span class="op" id="1542619">&amp;</span><span class="ident" id="1542620">e</span><span class="op" id="1542621">)</span><span class="op" id="1542622">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542625">if</span>&nbsp;<span class="ident" id="1542628">ep</span><span class="op" id="1542630">.</span><span class="ident" id="1542631">_type</span>&nbsp;<span class="op" id="1542637">==</span>&nbsp;<span class="builtintype" id="1542640">nil</span>&nbsp;<span class="op" id="1542644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1542648">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1542707">panic</span><span class="op" id="1542712">(</span><span class="op" id="1542713">&amp;</span><span class="ident" id="1542714">TypeAssertionError</span><span class="op" id="1542732">{</span><span class="string" id="1542733">&#34;&#34;</span><span class="op" id="1542735">,</span>&nbsp;<span class="string" id="1542737">&#34;&#34;</span><span class="op" id="1542739">,</span>&nbsp;<span class="op" id="1542741">*</span><span class="ident" id="1542742">inter</span><span class="op" id="1542747">.</span><span class="ident" id="1542748">typ</span><span class="op" id="1542751">.</span><span class="ident" id="1542752">_string</span><span class="op" id="1542759">,</span>&nbsp;<span class="string" id="1542761">&#34;&#34;</span><span class="op" id="1542763">}</span><span class="op" id="1542764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542770">return</span>&nbsp;<span class="ident" id="1542777">e</span><br>
<span class="lineno">400</span><span class="op" id="1542779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1542782">func</span>&nbsp;<span class="ident" id="1542787">assertE2E2</span><span class="op" id="1542797">(</span><span class="ident" id="1542798">inter</span>&nbsp;<span class="op" id="1542804">*</span><span class="ident" id="1542805">interfacetype</span><span class="op" id="1542818">,</span>&nbsp;<span class="ident" id="1542820">e</span>&nbsp;<span class="keyword" id="1542822">interface</span><span class="op" id="1542831">{</span><span class="op" id="1542832">}</span><span class="op" id="1542833">)</span>&nbsp;<span class="op" id="1542835">(</span><span class="keyword" id="1542836">interface</span><span class="op" id="1542845">{</span><span class="op" id="1542846">}</span><span class="op" id="1542847">,</span>&nbsp;<span class="builtintype" id="1542849">bool</span><span class="op" id="1542853">)</span>&nbsp;<span class="op" id="1542855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542858">ep</span>&nbsp;<span class="op" id="1542861">:=</span>&nbsp;<span class="op" id="1542864">(</span><span class="op" id="1542865">*</span><span class="ident" id="1542866">eface</span><span class="op" id="1542871">)</span><span class="op" id="1542872">(</span><span class="ident" id="1542873">unsafe</span><span class="op" id="1542879">.</span><span class="ident" id="1542880">Pointer</span><span class="op" id="1542887">(</span><span class="op" id="1542888">&amp;</span><span class="ident" id="1542889">e</span><span class="op" id="1542890">)</span><span class="op" id="1542891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542894">if</span>&nbsp;<span class="ident" id="1542897">ep</span><span class="op" id="1542899">.</span><span class="ident" id="1542900">_type</span>&nbsp;<span class="op" id="1542906">==</span>&nbsp;<span class="builtintype" id="1542909">nil</span>&nbsp;<span class="op" id="1542913">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542917">return</span>&nbsp;<span class="builtintype" id="1542924">nil</span><span class="op" id="1542927">,</span>&nbsp;<span class="builtintype" id="1542929">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542939">return</span>&nbsp;<span class="ident" id="1542946">e</span><span class="op" id="1542947">,</span>&nbsp;<span class="builtintype" id="1542949">true</span><br>
<span class="lineno"></span><span class="op" id="1542954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="1542957">func</span>&nbsp;<span class="ident" id="1542962">ifacethash</span><span class="op" id="1542972">(</span><span class="ident" id="1542973">i</span>&nbsp;<span class="ident" id="1542975">fInterface</span><span class="op" id="1542985">)</span>&nbsp;<span class="builtintype" id="1542987">uint32</span>&nbsp;<span class="op" id="1542994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542997">ip</span>&nbsp;<span class="op" id="1543000">:=</span>&nbsp;<span class="op" id="1543003">(</span><span class="op" id="1543004">*</span><span class="ident" id="1543005">iface</span><span class="op" id="1543010">)</span><span class="op" id="1543011">(</span><span class="ident" id="1543012">unsafe</span><span class="op" id="1543018">.</span><span class="ident" id="1543019">Pointer</span><span class="op" id="1543026">(</span><span class="op" id="1543027">&amp;</span><span class="ident" id="1543028">i</span><span class="op" id="1543029">)</span><span class="op" id="1543030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543033">tab</span>&nbsp;<span class="op" id="1543037">:=</span>&nbsp;<span class="ident" id="1543040">ip</span><span class="op" id="1543042">.</span><span class="ident" id="1543043">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543048">if</span>&nbsp;<span class="ident" id="1543051">tab</span>&nbsp;<span class="op" id="1543055">==</span>&nbsp;<span class="builtintype" id="1543058">nil</span>&nbsp;<span class="op" id="1543062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543066">return</span>&nbsp;<span class="num" id="1543073">0</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543079">return</span>&nbsp;<span class="ident" id="1543086">tab</span><span class="op" id="1543089">.</span><span class="ident" id="1543090">_type</span><span class="op" id="1543095">.</span><span class="ident" id="1543096">hash</span><br>
<span class="lineno"></span><span class="op" id="1543101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1543104">func</span>&nbsp;<span class="ident" id="1543109">efacethash</span><span class="op" id="1543119">(</span><span class="ident" id="1543120">e</span>&nbsp;<span class="keyword" id="1543122">interface</span><span class="op" id="1543131">{</span><span class="op" id="1543132">}</span><span class="op" id="1543133">)</span>&nbsp;<span class="builtintype" id="1543135">uint32</span>&nbsp;<span class="op" id="1543142">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543145">ep</span>&nbsp;<span class="op" id="1543148">:=</span>&nbsp;<span class="op" id="1543151">(</span><span class="op" id="1543152">*</span><span class="ident" id="1543153">eface</span><span class="op" id="1543158">)</span><span class="op" id="1543159">(</span><span class="ident" id="1543160">unsafe</span><span class="op" id="1543166">.</span><span class="ident" id="1543167">Pointer</span><span class="op" id="1543174">(</span><span class="op" id="1543175">&amp;</span><span class="ident" id="1543176">e</span><span class="op" id="1543177">)</span><span class="op" id="1543178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543181">t</span>&nbsp;<span class="op" id="1543183">:=</span>&nbsp;<span class="ident" id="1543186">ep</span><span class="op" id="1543188">.</span><span class="ident" id="1543189">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543196">if</span>&nbsp;<span class="ident" id="1543199">t</span>&nbsp;<span class="op" id="1543201">==</span>&nbsp;<span class="builtintype" id="1543204">nil</span>&nbsp;<span class="op" id="1543208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543212">return</span>&nbsp;<span class="num" id="1543219">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543222">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543225">return</span>&nbsp;<span class="ident" id="1543232">t</span><span class="op" id="1543233">.</span><span class="ident" id="1543234">hash</span><br>
<span class="lineno"></span><span class="op" id="1543239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1543242">func</span>&nbsp;<span class="ident" id="1543247">iterate_itabs</span><span class="op" id="1543260">(</span><span class="ident" id="1543261">fn</span>&nbsp;<span class="keyword" id="1543264">func</span><span class="op" id="1543268">(</span><span class="op" id="1543269">*</span><span class="ident" id="1543270">itab</span><span class="op" id="1543274">)</span><span class="op" id="1543275">)</span>&nbsp;<span class="op" id="1543277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543280">for</span>&nbsp;<span class="ident" id="1543284">_</span><span class="op" id="1543285">,</span>&nbsp;<span class="ident" id="1543287">h</span>&nbsp;<span class="op" id="1543289">:=</span>&nbsp;<span class="keyword" id="1543292">range</span>&nbsp;<span class="op" id="1543298">&amp;</span><span class="ident" id="1543299">hash</span>&nbsp;<span class="op" id="1543304">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543308">for</span>&nbsp;<span class="op" id="1543312">;</span>&nbsp;<span class="ident" id="1543314">h</span>&nbsp;<span class="op" id="1543316">!=</span>&nbsp;<span class="builtintype" id="1543319">nil</span><span class="op" id="1543322">;</span>&nbsp;<span class="ident" id="1543324">h</span>&nbsp;<span class="op" id="1543326">=</span>&nbsp;<span class="ident" id="1543328">h</span><span class="op" id="1543329">.</span><span class="ident" id="1543330">link</span>&nbsp;<span class="op" id="1543335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543340">fn</span><span class="op" id="1543342">(</span><span class="ident" id="1543343">h</span><span class="op" id="1543344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543351">}</span><br>
<span class="lineno"></span><span class="op" id="1543353">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="1543356">func</span>&nbsp;<span class="ident" id="1543361">ifaceE2I2</span><span class="op" id="1543370">(</span><span class="ident" id="1543371">inter</span>&nbsp;<span class="op" id="1543377">*</span><span class="ident" id="1543378">interfacetype</span><span class="op" id="1543391">,</span>&nbsp;<span class="ident" id="1543393">e</span>&nbsp;<span class="keyword" id="1543395">interface</span><span class="op" id="1543404">{</span><span class="op" id="1543405">}</span><span class="op" id="1543406">,</span>&nbsp;<span class="ident" id="1543408">r</span>&nbsp;<span class="op" id="1543410">*</span><span class="ident" id="1543411">fInterface</span><span class="op" id="1543421">)</span>&nbsp;<span class="op" id="1543423">(</span><span class="ident" id="1543424">ok</span>&nbsp;<span class="builtintype" id="1543427">bool</span><span class="op" id="1543431">)</span>&nbsp;<span class="op" id="1543433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543436">*</span><span class="ident" id="1543437">r</span><span class="op" id="1543438">,</span>&nbsp;<span class="ident" id="1543440">ok</span>&nbsp;<span class="op" id="1543443">=</span>&nbsp;<span class="ident" id="1543445">assertE2I2</span><span class="op" id="1543455">(</span><span class="ident" id="1543456">inter</span><span class="op" id="1543461">,</span>&nbsp;<span class="ident" id="1543463">e</span><span class="op" id="1543464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543467">return</span><br>
<span class="lineno"></span><span class="op" id="1543474">}</span>
</div>
</body>
</html>
