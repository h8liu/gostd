<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3753581">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3753636">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3753690">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3753741">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="3753792">package</span>&nbsp;<span class="ident" id="3753800">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3753807">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="3753884">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="3753916">type</span>&nbsp;<span class="ident" id="3753921">Color</span>&nbsp;<span class="keyword" id="3753927">interface</span>&nbsp;<span class="op" id="3753937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3753940">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3754015">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3754091">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3754167">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754181">RGBA</span><span class="op" id="3754185">(</span><span class="op" id="3754186">)</span>&nbsp;<span class="op" id="3754188">(</span><span class="ident" id="3754189">r</span><span class="op" id="3754190">,</span>&nbsp;<span class="ident" id="3754192">g</span><span class="op" id="3754193">,</span>&nbsp;<span class="ident" id="3754195">b</span><span class="op" id="3754196">,</span>&nbsp;<span class="ident" id="3754198">a</span>&nbsp;<span class="builtintype" id="3754200">uint32</span><span class="op" id="3754206">)</span><br>
<span class="lineno"></span><span class="op" id="3754208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3754211">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="3754278">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="3754335">type</span>&nbsp;<span class="ident" id="3754340">RGBA</span>&nbsp;<span class="keyword" id="3754345">struct</span>&nbsp;<span class="op" id="3754352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754355">R</span><span class="op" id="3754356">,</span>&nbsp;<span class="ident" id="3754358">G</span><span class="op" id="3754359">,</span>&nbsp;<span class="ident" id="3754361">B</span><span class="op" id="3754362">,</span>&nbsp;<span class="ident" id="3754364">A</span>&nbsp;<span class="builtintype" id="3754366">uint8</span><br>
<span class="lineno"></span><span class="op" id="3754372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3754375">func</span>&nbsp;<span class="op" id="3754380">(</span><span class="ident" id="3754381">c</span>&nbsp;<span class="ident" id="3754383">RGBA</span><span class="op" id="3754387">)</span>&nbsp;<span class="ident" id="3754389">RGBA</span><span class="op" id="3754393">(</span><span class="op" id="3754394">)</span>&nbsp;<span class="op" id="3754396">(</span><span class="ident" id="3754397">r</span><span class="op" id="3754398">,</span>&nbsp;<span class="ident" id="3754400">g</span><span class="op" id="3754401">,</span>&nbsp;<span class="ident" id="3754403">b</span><span class="op" id="3754404">,</span>&nbsp;<span class="ident" id="3754406">a</span>&nbsp;<span class="builtintype" id="3754408">uint32</span><span class="op" id="3754414">)</span>&nbsp;<span class="op" id="3754416">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754419">r</span>&nbsp;<span class="op" id="3754421">=</span>&nbsp;<span class="builtintype" id="3754423">uint32</span><span class="op" id="3754429">(</span><span class="ident" id="3754430">c</span><span class="op" id="3754431">.</span><span class="ident" id="3754432">R</span><span class="op" id="3754433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754436">r</span>&nbsp;<span class="op" id="3754438">|=</span>&nbsp;<span class="ident" id="3754441">r</span>&nbsp;<span class="op" id="3754443">&lt;&lt;</span>&nbsp;<span class="num" id="3754446">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754449">g</span>&nbsp;<span class="op" id="3754451">=</span>&nbsp;<span class="builtintype" id="3754453">uint32</span><span class="op" id="3754459">(</span><span class="ident" id="3754460">c</span><span class="op" id="3754461">.</span><span class="ident" id="3754462">G</span><span class="op" id="3754463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754466">g</span>&nbsp;<span class="op" id="3754468">|=</span>&nbsp;<span class="ident" id="3754471">g</span>&nbsp;<span class="op" id="3754473">&lt;&lt;</span>&nbsp;<span class="num" id="3754476">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754479">b</span>&nbsp;<span class="op" id="3754481">=</span>&nbsp;<span class="builtintype" id="3754483">uint32</span><span class="op" id="3754489">(</span><span class="ident" id="3754490">c</span><span class="op" id="3754491">.</span><span class="ident" id="3754492">B</span><span class="op" id="3754493">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754496">b</span>&nbsp;<span class="op" id="3754498">|=</span>&nbsp;<span class="ident" id="3754501">b</span>&nbsp;<span class="op" id="3754503">&lt;&lt;</span>&nbsp;<span class="num" id="3754506">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754509">a</span>&nbsp;<span class="op" id="3754511">=</span>&nbsp;<span class="builtintype" id="3754513">uint32</span><span class="op" id="3754519">(</span><span class="ident" id="3754520">c</span><span class="op" id="3754521">.</span><span class="ident" id="3754522">A</span><span class="op" id="3754523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754526">a</span>&nbsp;<span class="op" id="3754528">|=</span>&nbsp;<span class="ident" id="3754531">a</span>&nbsp;<span class="op" id="3754533">&lt;&lt;</span>&nbsp;<span class="num" id="3754536">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3754539">return</span><br>
<span class="lineno"></span><span class="op" id="3754546">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="3754549">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="3754606">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="3754664">type</span>&nbsp;<span class="ident" id="3754669">RGBA64</span>&nbsp;<span class="keyword" id="3754676">struct</span>&nbsp;<span class="op" id="3754683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754686">R</span><span class="op" id="3754687">,</span>&nbsp;<span class="ident" id="3754689">G</span><span class="op" id="3754690">,</span>&nbsp;<span class="ident" id="3754692">B</span><span class="op" id="3754693">,</span>&nbsp;<span class="ident" id="3754695">A</span>&nbsp;<span class="builtintype" id="3754697">uint16</span><br>
<span class="lineno">40</span><span class="op" id="3754704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3754707">func</span>&nbsp;<span class="op" id="3754712">(</span><span class="ident" id="3754713">c</span>&nbsp;<span class="ident" id="3754715">RGBA64</span><span class="op" id="3754721">)</span>&nbsp;<span class="ident" id="3754723">RGBA</span><span class="op" id="3754727">(</span><span class="op" id="3754728">)</span>&nbsp;<span class="op" id="3754730">(</span><span class="ident" id="3754731">r</span><span class="op" id="3754732">,</span>&nbsp;<span class="ident" id="3754734">g</span><span class="op" id="3754735">,</span>&nbsp;<span class="ident" id="3754737">b</span><span class="op" id="3754738">,</span>&nbsp;<span class="ident" id="3754740">a</span>&nbsp;<span class="builtintype" id="3754742">uint32</span><span class="op" id="3754748">)</span>&nbsp;<span class="op" id="3754750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3754753">return</span>&nbsp;<span class="builtintype" id="3754760">uint32</span><span class="op" id="3754766">(</span><span class="ident" id="3754767">c</span><span class="op" id="3754768">.</span><span class="ident" id="3754769">R</span><span class="op" id="3754770">)</span><span class="op" id="3754771">,</span>&nbsp;<span class="builtintype" id="3754773">uint32</span><span class="op" id="3754779">(</span><span class="ident" id="3754780">c</span><span class="op" id="3754781">.</span><span class="ident" id="3754782">G</span><span class="op" id="3754783">)</span><span class="op" id="3754784">,</span>&nbsp;<span class="builtintype" id="3754786">uint32</span><span class="op" id="3754792">(</span><span class="ident" id="3754793">c</span><span class="op" id="3754794">.</span><span class="ident" id="3754795">B</span><span class="op" id="3754796">)</span><span class="op" id="3754797">,</span>&nbsp;<span class="builtintype" id="3754799">uint32</span><span class="op" id="3754805">(</span><span class="ident" id="3754806">c</span><span class="op" id="3754807">.</span><span class="ident" id="3754808">A</span><span class="op" id="3754809">)</span><br>
<span class="lineno"></span><span class="op" id="3754811">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="3754814">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3754874">type</span>&nbsp;<span class="ident" id="3754879">NRGBA</span>&nbsp;<span class="keyword" id="3754885">struct</span>&nbsp;<span class="op" id="3754892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754895">R</span><span class="op" id="3754896">,</span>&nbsp;<span class="ident" id="3754898">G</span><span class="op" id="3754899">,</span>&nbsp;<span class="ident" id="3754901">B</span><span class="op" id="3754902">,</span>&nbsp;<span class="ident" id="3754904">A</span>&nbsp;<span class="builtintype" id="3754906">uint8</span><br>
<span class="lineno"></span><span class="op" id="3754912">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3754915">func</span>&nbsp;<span class="op" id="3754920">(</span><span class="ident" id="3754921">c</span>&nbsp;<span class="ident" id="3754923">NRGBA</span><span class="op" id="3754928">)</span>&nbsp;<span class="ident" id="3754930">RGBA</span><span class="op" id="3754934">(</span><span class="op" id="3754935">)</span>&nbsp;<span class="op" id="3754937">(</span><span class="ident" id="3754938">r</span><span class="op" id="3754939">,</span>&nbsp;<span class="ident" id="3754941">g</span><span class="op" id="3754942">,</span>&nbsp;<span class="ident" id="3754944">b</span><span class="op" id="3754945">,</span>&nbsp;<span class="ident" id="3754947">a</span>&nbsp;<span class="builtintype" id="3754949">uint32</span><span class="op" id="3754955">)</span>&nbsp;<span class="op" id="3754957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754960">r</span>&nbsp;<span class="op" id="3754962">=</span>&nbsp;<span class="builtintype" id="3754964">uint32</span><span class="op" id="3754970">(</span><span class="ident" id="3754971">c</span><span class="op" id="3754972">.</span><span class="ident" id="3754973">R</span><span class="op" id="3754974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754977">r</span>&nbsp;<span class="op" id="3754979">|=</span>&nbsp;<span class="ident" id="3754982">r</span>&nbsp;<span class="op" id="3754984">&lt;&lt;</span>&nbsp;<span class="num" id="3754987">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3754990">r</span>&nbsp;<span class="op" id="3754992">*=</span>&nbsp;<span class="builtintype" id="3754995">uint32</span><span class="op" id="3755001">(</span><span class="ident" id="3755002">c</span><span class="op" id="3755003">.</span><span class="ident" id="3755004">A</span><span class="op" id="3755005">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755008">r</span>&nbsp;<span class="op" id="3755010">/=</span>&nbsp;<span class="num" id="3755013">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755019">g</span>&nbsp;<span class="op" id="3755021">=</span>&nbsp;<span class="builtintype" id="3755023">uint32</span><span class="op" id="3755029">(</span><span class="ident" id="3755030">c</span><span class="op" id="3755031">.</span><span class="ident" id="3755032">G</span><span class="op" id="3755033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755036">g</span>&nbsp;<span class="op" id="3755038">|=</span>&nbsp;<span class="ident" id="3755041">g</span>&nbsp;<span class="op" id="3755043">&lt;&lt;</span>&nbsp;<span class="num" id="3755046">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755049">g</span>&nbsp;<span class="op" id="3755051">*=</span>&nbsp;<span class="builtintype" id="3755054">uint32</span><span class="op" id="3755060">(</span><span class="ident" id="3755061">c</span><span class="op" id="3755062">.</span><span class="ident" id="3755063">A</span><span class="op" id="3755064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755067">g</span>&nbsp;<span class="op" id="3755069">/=</span>&nbsp;<span class="num" id="3755072">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755078">b</span>&nbsp;<span class="op" id="3755080">=</span>&nbsp;<span class="builtintype" id="3755082">uint32</span><span class="op" id="3755088">(</span><span class="ident" id="3755089">c</span><span class="op" id="3755090">.</span><span class="ident" id="3755091">B</span><span class="op" id="3755092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755095">b</span>&nbsp;<span class="op" id="3755097">|=</span>&nbsp;<span class="ident" id="3755100">b</span>&nbsp;<span class="op" id="3755102">&lt;&lt;</span>&nbsp;<span class="num" id="3755105">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755108">b</span>&nbsp;<span class="op" id="3755110">*=</span>&nbsp;<span class="builtintype" id="3755113">uint32</span><span class="op" id="3755119">(</span><span class="ident" id="3755120">c</span><span class="op" id="3755121">.</span><span class="ident" id="3755122">A</span><span class="op" id="3755123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755126">b</span>&nbsp;<span class="op" id="3755128">/=</span>&nbsp;<span class="num" id="3755131">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755137">a</span>&nbsp;<span class="op" id="3755139">=</span>&nbsp;<span class="builtintype" id="3755141">uint32</span><span class="op" id="3755147">(</span><span class="ident" id="3755148">c</span><span class="op" id="3755149">.</span><span class="ident" id="3755150">A</span><span class="op" id="3755151">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755154">a</span>&nbsp;<span class="op" id="3755156">|=</span>&nbsp;<span class="ident" id="3755159">a</span>&nbsp;<span class="op" id="3755161">&lt;&lt;</span>&nbsp;<span class="num" id="3755164">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3755167">return</span><br>
<span class="lineno"></span><span class="op" id="3755174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3755177">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="3755239">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="3755297">type</span>&nbsp;<span class="ident" id="3755302">NRGBA64</span>&nbsp;<span class="keyword" id="3755310">struct</span>&nbsp;<span class="op" id="3755317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755320">R</span><span class="op" id="3755321">,</span>&nbsp;<span class="ident" id="3755323">G</span><span class="op" id="3755324">,</span>&nbsp;<span class="ident" id="3755326">B</span><span class="op" id="3755327">,</span>&nbsp;<span class="ident" id="3755329">A</span>&nbsp;<span class="builtintype" id="3755331">uint16</span><br>
<span class="lineno"></span><span class="op" id="3755338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="3755341">func</span>&nbsp;<span class="op" id="3755346">(</span><span class="ident" id="3755347">c</span>&nbsp;<span class="ident" id="3755349">NRGBA64</span><span class="op" id="3755356">)</span>&nbsp;<span class="ident" id="3755358">RGBA</span><span class="op" id="3755362">(</span><span class="op" id="3755363">)</span>&nbsp;<span class="op" id="3755365">(</span><span class="ident" id="3755366">r</span><span class="op" id="3755367">,</span>&nbsp;<span class="ident" id="3755369">g</span><span class="op" id="3755370">,</span>&nbsp;<span class="ident" id="3755372">b</span><span class="op" id="3755373">,</span>&nbsp;<span class="ident" id="3755375">a</span>&nbsp;<span class="builtintype" id="3755377">uint32</span><span class="op" id="3755383">)</span>&nbsp;<span class="op" id="3755385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755388">r</span>&nbsp;<span class="op" id="3755390">=</span>&nbsp;<span class="builtintype" id="3755392">uint32</span><span class="op" id="3755398">(</span><span class="ident" id="3755399">c</span><span class="op" id="3755400">.</span><span class="ident" id="3755401">R</span><span class="op" id="3755402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755405">r</span>&nbsp;<span class="op" id="3755407">*=</span>&nbsp;<span class="builtintype" id="3755410">uint32</span><span class="op" id="3755416">(</span><span class="ident" id="3755417">c</span><span class="op" id="3755418">.</span><span class="ident" id="3755419">A</span><span class="op" id="3755420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755423">r</span>&nbsp;<span class="op" id="3755425">/=</span>&nbsp;<span class="num" id="3755428">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755436">g</span>&nbsp;<span class="op" id="3755438">=</span>&nbsp;<span class="builtintype" id="3755440">uint32</span><span class="op" id="3755446">(</span><span class="ident" id="3755447">c</span><span class="op" id="3755448">.</span><span class="ident" id="3755449">G</span><span class="op" id="3755450">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755453">g</span>&nbsp;<span class="op" id="3755455">*=</span>&nbsp;<span class="builtintype" id="3755458">uint32</span><span class="op" id="3755464">(</span><span class="ident" id="3755465">c</span><span class="op" id="3755466">.</span><span class="ident" id="3755467">A</span><span class="op" id="3755468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755471">g</span>&nbsp;<span class="op" id="3755473">/=</span>&nbsp;<span class="num" id="3755476">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755484">b</span>&nbsp;<span class="op" id="3755486">=</span>&nbsp;<span class="builtintype" id="3755488">uint32</span><span class="op" id="3755494">(</span><span class="ident" id="3755495">c</span><span class="op" id="3755496">.</span><span class="ident" id="3755497">B</span><span class="op" id="3755498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755501">b</span>&nbsp;<span class="op" id="3755503">*=</span>&nbsp;<span class="builtintype" id="3755506">uint32</span><span class="op" id="3755512">(</span><span class="ident" id="3755513">c</span><span class="op" id="3755514">.</span><span class="ident" id="3755515">A</span><span class="op" id="3755516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755519">b</span>&nbsp;<span class="op" id="3755521">/=</span>&nbsp;<span class="num" id="3755524">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755532">a</span>&nbsp;<span class="op" id="3755534">=</span>&nbsp;<span class="builtintype" id="3755536">uint32</span><span class="op" id="3755542">(</span><span class="ident" id="3755543">c</span><span class="op" id="3755544">.</span><span class="ident" id="3755545">A</span><span class="op" id="3755546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3755549">return</span><br>
<span class="lineno"></span><span class="op" id="3755556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3755559">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="3755601">type</span>&nbsp;<span class="ident" id="3755606">Alpha</span>&nbsp;<span class="keyword" id="3755612">struct</span>&nbsp;<span class="op" id="3755619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755622">A</span>&nbsp;<span class="builtintype" id="3755624">uint8</span><br>
<span class="lineno"></span><span class="op" id="3755630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3755633">func</span>&nbsp;<span class="op" id="3755638">(</span><span class="ident" id="3755639">c</span>&nbsp;<span class="ident" id="3755641">Alpha</span><span class="op" id="3755646">)</span>&nbsp;<span class="ident" id="3755648">RGBA</span><span class="op" id="3755652">(</span><span class="op" id="3755653">)</span>&nbsp;<span class="op" id="3755655">(</span><span class="ident" id="3755656">r</span><span class="op" id="3755657">,</span>&nbsp;<span class="ident" id="3755659">g</span><span class="op" id="3755660">,</span>&nbsp;<span class="ident" id="3755662">b</span><span class="op" id="3755663">,</span>&nbsp;<span class="ident" id="3755665">a</span>&nbsp;<span class="builtintype" id="3755667">uint32</span><span class="op" id="3755673">)</span>&nbsp;<span class="op" id="3755675">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755678">a</span>&nbsp;<span class="op" id="3755680">=</span>&nbsp;<span class="builtintype" id="3755682">uint32</span><span class="op" id="3755688">(</span><span class="ident" id="3755689">c</span><span class="op" id="3755690">.</span><span class="ident" id="3755691">A</span><span class="op" id="3755692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755695">a</span>&nbsp;<span class="op" id="3755697">|=</span>&nbsp;<span class="ident" id="3755700">a</span>&nbsp;<span class="op" id="3755702">&lt;&lt;</span>&nbsp;<span class="num" id="3755705">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3755708">return</span>&nbsp;<span class="ident" id="3755715">a</span><span class="op" id="3755716">,</span>&nbsp;<span class="ident" id="3755718">a</span><span class="op" id="3755719">,</span>&nbsp;<span class="ident" id="3755721">a</span><span class="op" id="3755722">,</span>&nbsp;<span class="ident" id="3755724">a</span><br>
<span class="lineno"></span><span class="op" id="3755726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="3755729">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3755773">type</span>&nbsp;<span class="ident" id="3755778">Alpha16</span>&nbsp;<span class="keyword" id="3755786">struct</span>&nbsp;<span class="op" id="3755793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755796">A</span>&nbsp;<span class="builtintype" id="3755798">uint16</span><br>
<span class="lineno"></span><span class="op" id="3755805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="3755808">func</span>&nbsp;<span class="op" id="3755813">(</span><span class="ident" id="3755814">c</span>&nbsp;<span class="ident" id="3755816">Alpha16</span><span class="op" id="3755823">)</span>&nbsp;<span class="ident" id="3755825">RGBA</span><span class="op" id="3755829">(</span><span class="op" id="3755830">)</span>&nbsp;<span class="op" id="3755832">(</span><span class="ident" id="3755833">r</span><span class="op" id="3755834">,</span>&nbsp;<span class="ident" id="3755836">g</span><span class="op" id="3755837">,</span>&nbsp;<span class="ident" id="3755839">b</span><span class="op" id="3755840">,</span>&nbsp;<span class="ident" id="3755842">a</span>&nbsp;<span class="builtintype" id="3755844">uint32</span><span class="op" id="3755850">)</span>&nbsp;<span class="op" id="3755852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755855">a</span>&nbsp;<span class="op" id="3755857">=</span>&nbsp;<span class="builtintype" id="3755859">uint32</span><span class="op" id="3755865">(</span><span class="ident" id="3755866">c</span><span class="op" id="3755867">.</span><span class="ident" id="3755868">A</span><span class="op" id="3755869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3755872">return</span>&nbsp;<span class="ident" id="3755879">a</span><span class="op" id="3755880">,</span>&nbsp;<span class="ident" id="3755882">a</span><span class="op" id="3755883">,</span>&nbsp;<span class="ident" id="3755885">a</span><span class="op" id="3755886">,</span>&nbsp;<span class="ident" id="3755888">a</span><br>
<span class="lineno"></span><span class="op" id="3755890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="3755893">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3755938">type</span>&nbsp;<span class="ident" id="3755943">Gray</span>&nbsp;<span class="keyword" id="3755948">struct</span>&nbsp;<span class="op" id="3755955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3755958">Y</span>&nbsp;<span class="builtintype" id="3755960">uint8</span><br>
<span class="lineno"></span><span class="op" id="3755966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="3755969">func</span>&nbsp;<span class="op" id="3755974">(</span><span class="ident" id="3755975">c</span>&nbsp;<span class="ident" id="3755977">Gray</span><span class="op" id="3755981">)</span>&nbsp;<span class="ident" id="3755983">RGBA</span><span class="op" id="3755987">(</span><span class="op" id="3755988">)</span>&nbsp;<span class="op" id="3755990">(</span><span class="ident" id="3755991">r</span><span class="op" id="3755992">,</span>&nbsp;<span class="ident" id="3755994">g</span><span class="op" id="3755995">,</span>&nbsp;<span class="ident" id="3755997">b</span><span class="op" id="3755998">,</span>&nbsp;<span class="ident" id="3756000">a</span>&nbsp;<span class="builtintype" id="3756002">uint32</span><span class="op" id="3756008">)</span>&nbsp;<span class="op" id="3756010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3756013">y</span>&nbsp;<span class="op" id="3756015">:=</span>&nbsp;<span class="builtintype" id="3756018">uint32</span><span class="op" id="3756024">(</span><span class="ident" id="3756025">c</span><span class="op" id="3756026">.</span><span class="ident" id="3756027">Y</span><span class="op" id="3756028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3756031">y</span>&nbsp;<span class="op" id="3756033">|=</span>&nbsp;<span class="ident" id="3756036">y</span>&nbsp;<span class="op" id="3756038">&lt;&lt;</span>&nbsp;<span class="num" id="3756041">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3756044">return</span>&nbsp;<span class="ident" id="3756051">y</span><span class="op" id="3756052">,</span>&nbsp;<span class="ident" id="3756054">y</span><span class="op" id="3756055">,</span>&nbsp;<span class="ident" id="3756057">y</span><span class="op" id="3756058">,</span>&nbsp;<span class="num" id="3756060">0xffff</span><br>
<span class="lineno"></span><span class="op" id="3756067">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3756070">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3756117">type</span>&nbsp;<span class="ident" id="3756122">Gray16</span>&nbsp;<span class="keyword" id="3756129">struct</span>&nbsp;<span class="op" id="3756136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3756139">Y</span>&nbsp;<span class="builtintype" id="3756141">uint16</span><br>
<span class="lineno"></span><span class="op" id="3756148">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="3756151">func</span>&nbsp;<span class="op" id="3756156">(</span><span class="ident" id="3756157">c</span>&nbsp;<span class="ident" id="3756159">Gray16</span><span class="op" id="3756165">)</span>&nbsp;<span class="ident" id="3756167">RGBA</span><span class="op" id="3756171">(</span><span class="op" id="3756172">)</span>&nbsp;<span class="op" id="3756174">(</span><span class="ident" id="3756175">r</span><span class="op" id="3756176">,</span>&nbsp;<span class="ident" id="3756178">g</span><span class="op" id="3756179">,</span>&nbsp;<span class="ident" id="3756181">b</span><span class="op" id="3756182">,</span>&nbsp;<span class="ident" id="3756184">a</span>&nbsp;<span class="builtintype" id="3756186">uint32</span><span class="op" id="3756192">)</span>&nbsp;<span class="op" id="3756194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3756197">y</span>&nbsp;<span class="op" id="3756199">:=</span>&nbsp;<span class="builtintype" id="3756202">uint32</span><span class="op" id="3756208">(</span><span class="ident" id="3756209">c</span><span class="op" id="3756210">.</span><span class="ident" id="3756211">Y</span><span class="op" id="3756212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3756215">return</span>&nbsp;<span class="ident" id="3756222">y</span><span class="op" id="3756223">,</span>&nbsp;<span class="ident" id="3756225">y</span><span class="op" id="3756226">,</span>&nbsp;<span class="ident" id="3756228">y</span><span class="op" id="3756229">,</span>&nbsp;<span class="num" id="3756231">0xffff</span><br>
<span class="lineno"></span><span class="op" id="3756238">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="3756241">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="3756320">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="3756337">type</span>&nbsp;<span class="ident" id="3756342">Model</span>&nbsp;<span class="keyword" id="3756348">interface</span>&nbsp;<span class="op" id="3756358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3756361">Convert</span><span class="op" id="3756368">(</span><span class="ident" id="3756369">c</span>&nbsp;<span class="ident" id="3756371">Color</span><span class="op" id="3756376">)</span>&nbsp;<span class="ident" id="3756378">Color</span><br>
<span class="lineno">135</span><span class="op" id="3756384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3756387">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="3756460">func</span>&nbsp;<span class="ident" id="3756465">ModelFunc</span><span class="op" id="3756474">(</span><span class="ident" id="3756475">f</span>&nbsp;<span class="keyword" id="3756477">func</span><span class="op" id="3756481">(</span><span class="ident" id="3756482">Color</span><span class="op" id="3756487">)</span>&nbsp;<span class="ident" id="3756489">Color</span><span class="op" id="3756494">)</span>&nbsp;<span class="ident" id="3756496">Model</span>&nbsp;<span class="op" id="3756502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3756505">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3756554">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3756603">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3756653">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3756703">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3756733">return</span>&nbsp;<span class="op" id="3756740">&amp;</span><span class="ident" id="3756741">modelFunc</span><span class="op" id="3756750">{</span><span class="ident" id="3756751">f</span><span class="op" id="3756752">}</span><br>
<span class="lineno">145</span><span class="op" id="3756754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3756757">type</span>&nbsp;<span class="ident" id="3756762">modelFunc</span>&nbsp;<span class="keyword" id="3756772">struct</span>&nbsp;<span class="op" id="3756779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3756782">f</span>&nbsp;<span class="keyword" id="3756784">func</span><span class="op" id="3756788">(</span><span class="ident" id="3756789">Color</span><span class="op" id="3756794">)</span>&nbsp;<span class="ident" id="3756796">Color</span><br>
<span class="lineno"></span><span class="op" id="3756802">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3756805">func</span>&nbsp;<span class="op" id="3756810">(</span><span class="ident" id="3756811">m</span>&nbsp;<span class="op" id="3756813">*</span><span class="ident" id="3756814">modelFunc</span><span class="op" id="3756823">)</span>&nbsp;<span class="ident" id="3756825">Convert</span><span class="op" id="3756832">(</span><span class="ident" id="3756833">c</span>&nbsp;<span class="ident" id="3756835">Color</span><span class="op" id="3756840">)</span>&nbsp;<span class="ident" id="3756842">Color</span>&nbsp;<span class="op" id="3756848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3756851">return</span>&nbsp;<span class="ident" id="3756858">m</span><span class="op" id="3756859">.</span><span class="ident" id="3756860">f</span><span class="op" id="3756861">(</span><span class="ident" id="3756862">c</span><span class="op" id="3756863">)</span><br>
<span class="lineno"></span><span class="op" id="3756865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="3756868">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="3756908">var</span>&nbsp;<span class="op" id="3756912">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3756915">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3756928">Model</span>&nbsp;<span class="op" id="3756934">=</span>&nbsp;<span class="ident" id="3756936">ModelFunc</span><span class="op" id="3756945">(</span><span class="ident" id="3756946">rgbaModel</span><span class="op" id="3756955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3756958">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="3756971">Model</span>&nbsp;<span class="op" id="3756977">=</span>&nbsp;<span class="ident" id="3756979">ModelFunc</span><span class="op" id="3756988">(</span><span class="ident" id="3756989">rgba64Model</span><span class="op" id="3757000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757003">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3757016">Model</span>&nbsp;<span class="op" id="3757022">=</span>&nbsp;<span class="ident" id="3757024">ModelFunc</span><span class="op" id="3757033">(</span><span class="ident" id="3757034">nrgbaModel</span><span class="op" id="3757044">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757047">NRGBA64Model</span>&nbsp;<span class="ident" id="3757060">Model</span>&nbsp;<span class="op" id="3757066">=</span>&nbsp;<span class="ident" id="3757068">ModelFunc</span><span class="op" id="3757077">(</span><span class="ident" id="3757078">nrgba64Model</span><span class="op" id="3757090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757093">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3757106">Model</span>&nbsp;<span class="op" id="3757112">=</span>&nbsp;<span class="ident" id="3757114">ModelFunc</span><span class="op" id="3757123">(</span><span class="ident" id="3757124">alphaModel</span><span class="op" id="3757134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757137">Alpha16Model</span>&nbsp;<span class="ident" id="3757150">Model</span>&nbsp;<span class="op" id="3757156">=</span>&nbsp;<span class="ident" id="3757158">ModelFunc</span><span class="op" id="3757167">(</span><span class="ident" id="3757168">alpha16Model</span><span class="op" id="3757180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757183">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3757196">Model</span>&nbsp;<span class="op" id="3757202">=</span>&nbsp;<span class="ident" id="3757204">ModelFunc</span><span class="op" id="3757213">(</span><span class="ident" id="3757214">grayModel</span><span class="op" id="3757223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757226">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="3757239">Model</span>&nbsp;<span class="op" id="3757245">=</span>&nbsp;<span class="ident" id="3757247">ModelFunc</span><span class="op" id="3757256">(</span><span class="ident" id="3757257">gray16Model</span><span class="op" id="3757268">)</span><br>
<span class="lineno">165</span><span class="op" id="3757270">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3757273">func</span>&nbsp;<span class="ident" id="3757278">rgbaModel</span><span class="op" id="3757287">(</span><span class="ident" id="3757288">c</span>&nbsp;<span class="ident" id="3757290">Color</span><span class="op" id="3757295">)</span>&nbsp;<span class="ident" id="3757297">Color</span>&nbsp;<span class="op" id="3757303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757306">if</span>&nbsp;<span class="ident" id="3757309">_</span><span class="op" id="3757310">,</span>&nbsp;<span class="ident" id="3757312">ok</span>&nbsp;<span class="op" id="3757315">:=</span>&nbsp;<span class="ident" id="3757318">c</span><span class="op" id="3757319">.</span><span class="op" id="3757320">(</span><span class="ident" id="3757321">RGBA</span><span class="op" id="3757325">)</span><span class="op" id="3757326">;</span>&nbsp;<span class="ident" id="3757328">ok</span>&nbsp;<span class="op" id="3757331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757335">return</span>&nbsp;<span class="ident" id="3757342">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3757345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757348">r</span><span class="op" id="3757349">,</span>&nbsp;<span class="ident" id="3757351">g</span><span class="op" id="3757352">,</span>&nbsp;<span class="ident" id="3757354">b</span><span class="op" id="3757355">,</span>&nbsp;<span class="ident" id="3757357">a</span>&nbsp;<span class="op" id="3757359">:=</span>&nbsp;<span class="ident" id="3757362">c</span><span class="op" id="3757363">.</span><span class="ident" id="3757364">RGBA</span><span class="op" id="3757368">(</span><span class="op" id="3757369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757372">return</span>&nbsp;<span class="ident" id="3757379">RGBA</span><span class="op" id="3757383">{</span><span class="builtintype" id="3757384">uint8</span><span class="op" id="3757389">(</span><span class="ident" id="3757390">r</span>&nbsp;<span class="op" id="3757392">&gt;&gt;</span>&nbsp;<span class="num" id="3757395">8</span><span class="op" id="3757396">)</span><span class="op" id="3757397">,</span>&nbsp;<span class="builtintype" id="3757399">uint8</span><span class="op" id="3757404">(</span><span class="ident" id="3757405">g</span>&nbsp;<span class="op" id="3757407">&gt;&gt;</span>&nbsp;<span class="num" id="3757410">8</span><span class="op" id="3757411">)</span><span class="op" id="3757412">,</span>&nbsp;<span class="builtintype" id="3757414">uint8</span><span class="op" id="3757419">(</span><span class="ident" id="3757420">b</span>&nbsp;<span class="op" id="3757422">&gt;&gt;</span>&nbsp;<span class="num" id="3757425">8</span><span class="op" id="3757426">)</span><span class="op" id="3757427">,</span>&nbsp;<span class="builtintype" id="3757429">uint8</span><span class="op" id="3757434">(</span><span class="ident" id="3757435">a</span>&nbsp;<span class="op" id="3757437">&gt;&gt;</span>&nbsp;<span class="num" id="3757440">8</span><span class="op" id="3757441">)</span><span class="op" id="3757442">}</span><br>
<span class="lineno"></span><span class="op" id="3757444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="3757447">func</span>&nbsp;<span class="ident" id="3757452">rgba64Model</span><span class="op" id="3757463">(</span><span class="ident" id="3757464">c</span>&nbsp;<span class="ident" id="3757466">Color</span><span class="op" id="3757471">)</span>&nbsp;<span class="ident" id="3757473">Color</span>&nbsp;<span class="op" id="3757479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757482">if</span>&nbsp;<span class="ident" id="3757485">_</span><span class="op" id="3757486">,</span>&nbsp;<span class="ident" id="3757488">ok</span>&nbsp;<span class="op" id="3757491">:=</span>&nbsp;<span class="ident" id="3757494">c</span><span class="op" id="3757495">.</span><span class="op" id="3757496">(</span><span class="ident" id="3757497">RGBA64</span><span class="op" id="3757503">)</span><span class="op" id="3757504">;</span>&nbsp;<span class="ident" id="3757506">ok</span>&nbsp;<span class="op" id="3757509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757513">return</span>&nbsp;<span class="ident" id="3757520">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3757523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757526">r</span><span class="op" id="3757527">,</span>&nbsp;<span class="ident" id="3757529">g</span><span class="op" id="3757530">,</span>&nbsp;<span class="ident" id="3757532">b</span><span class="op" id="3757533">,</span>&nbsp;<span class="ident" id="3757535">a</span>&nbsp;<span class="op" id="3757537">:=</span>&nbsp;<span class="ident" id="3757540">c</span><span class="op" id="3757541">.</span><span class="ident" id="3757542">RGBA</span><span class="op" id="3757546">(</span><span class="op" id="3757547">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757550">return</span>&nbsp;<span class="ident" id="3757557">RGBA64</span><span class="op" id="3757563">{</span><span class="builtintype" id="3757564">uint16</span><span class="op" id="3757570">(</span><span class="ident" id="3757571">r</span><span class="op" id="3757572">)</span><span class="op" id="3757573">,</span>&nbsp;<span class="builtintype" id="3757575">uint16</span><span class="op" id="3757581">(</span><span class="ident" id="3757582">g</span><span class="op" id="3757583">)</span><span class="op" id="3757584">,</span>&nbsp;<span class="builtintype" id="3757586">uint16</span><span class="op" id="3757592">(</span><span class="ident" id="3757593">b</span><span class="op" id="3757594">)</span><span class="op" id="3757595">,</span>&nbsp;<span class="builtintype" id="3757597">uint16</span><span class="op" id="3757603">(</span><span class="ident" id="3757604">a</span><span class="op" id="3757605">)</span><span class="op" id="3757606">}</span><br>
<span class="lineno"></span><span class="op" id="3757608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3757611">func</span>&nbsp;<span class="ident" id="3757616">nrgbaModel</span><span class="op" id="3757626">(</span><span class="ident" id="3757627">c</span>&nbsp;<span class="ident" id="3757629">Color</span><span class="op" id="3757634">)</span>&nbsp;<span class="ident" id="3757636">Color</span>&nbsp;<span class="op" id="3757642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757645">if</span>&nbsp;<span class="ident" id="3757648">_</span><span class="op" id="3757649">,</span>&nbsp;<span class="ident" id="3757651">ok</span>&nbsp;<span class="op" id="3757654">:=</span>&nbsp;<span class="ident" id="3757657">c</span><span class="op" id="3757658">.</span><span class="op" id="3757659">(</span><span class="ident" id="3757660">NRGBA</span><span class="op" id="3757665">)</span><span class="op" id="3757666">;</span>&nbsp;<span class="ident" id="3757668">ok</span>&nbsp;<span class="op" id="3757671">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757675">return</span>&nbsp;<span class="ident" id="3757682">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3757685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757688">r</span><span class="op" id="3757689">,</span>&nbsp;<span class="ident" id="3757691">g</span><span class="op" id="3757692">,</span>&nbsp;<span class="ident" id="3757694">b</span><span class="op" id="3757695">,</span>&nbsp;<span class="ident" id="3757697">a</span>&nbsp;<span class="op" id="3757699">:=</span>&nbsp;<span class="ident" id="3757702">c</span><span class="op" id="3757703">.</span><span class="ident" id="3757704">RGBA</span><span class="op" id="3757708">(</span><span class="op" id="3757709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757712">if</span>&nbsp;<span class="ident" id="3757715">a</span>&nbsp;<span class="op" id="3757717">==</span>&nbsp;<span class="num" id="3757720">0xffff</span>&nbsp;<span class="op" id="3757727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757731">return</span>&nbsp;<span class="ident" id="3757738">NRGBA</span><span class="op" id="3757743">{</span><span class="builtintype" id="3757744">uint8</span><span class="op" id="3757749">(</span><span class="ident" id="3757750">r</span>&nbsp;<span class="op" id="3757752">&gt;&gt;</span>&nbsp;<span class="num" id="3757755">8</span><span class="op" id="3757756">)</span><span class="op" id="3757757">,</span>&nbsp;<span class="builtintype" id="3757759">uint8</span><span class="op" id="3757764">(</span><span class="ident" id="3757765">g</span>&nbsp;<span class="op" id="3757767">&gt;&gt;</span>&nbsp;<span class="num" id="3757770">8</span><span class="op" id="3757771">)</span><span class="op" id="3757772">,</span>&nbsp;<span class="builtintype" id="3757774">uint8</span><span class="op" id="3757779">(</span><span class="ident" id="3757780">b</span>&nbsp;<span class="op" id="3757782">&gt;&gt;</span>&nbsp;<span class="num" id="3757785">8</span><span class="op" id="3757786">)</span><span class="op" id="3757787">,</span>&nbsp;<span class="num" id="3757789">0xff</span><span class="op" id="3757793">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3757796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757799">if</span>&nbsp;<span class="ident" id="3757802">a</span>&nbsp;<span class="op" id="3757804">==</span>&nbsp;<span class="num" id="3757807">0</span>&nbsp;<span class="op" id="3757809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3757813">return</span>&nbsp;<span class="ident" id="3757820">NRGBA</span><span class="op" id="3757825">{</span><span class="num" id="3757826">0</span><span class="op" id="3757827">,</span>&nbsp;<span class="num" id="3757829">0</span><span class="op" id="3757830">,</span>&nbsp;<span class="num" id="3757832">0</span><span class="op" id="3757833">,</span>&nbsp;<span class="num" id="3757835">0</span><span class="op" id="3757836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3757839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3757842">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757943">r</span>&nbsp;<span class="op" id="3757945">=</span>&nbsp;<span class="op" id="3757947">(</span><span class="ident" id="3757948">r</span>&nbsp;<span class="op" id="3757950">*</span>&nbsp;<span class="num" id="3757952">0xffff</span><span class="op" id="3757958">)</span>&nbsp;<span class="op" id="3757960">/</span>&nbsp;<span class="ident" id="3757962">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757965">g</span>&nbsp;<span class="op" id="3757967">=</span>&nbsp;<span class="op" id="3757969">(</span><span class="ident" id="3757970">g</span>&nbsp;<span class="op" id="3757972">*</span>&nbsp;<span class="num" id="3757974">0xffff</span><span class="op" id="3757980">)</span>&nbsp;<span class="op" id="3757982">/</span>&nbsp;<span class="ident" id="3757984">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3757987">b</span>&nbsp;<span class="op" id="3757989">=</span>&nbsp;<span class="op" id="3757991">(</span><span class="ident" id="3757992">b</span>&nbsp;<span class="op" id="3757994">*</span>&nbsp;<span class="num" id="3757996">0xffff</span><span class="op" id="3758002">)</span>&nbsp;<span class="op" id="3758004">/</span>&nbsp;<span class="ident" id="3758006">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758009">return</span>&nbsp;<span class="ident" id="3758016">NRGBA</span><span class="op" id="3758021">{</span><span class="builtintype" id="3758022">uint8</span><span class="op" id="3758027">(</span><span class="ident" id="3758028">r</span>&nbsp;<span class="op" id="3758030">&gt;&gt;</span>&nbsp;<span class="num" id="3758033">8</span><span class="op" id="3758034">)</span><span class="op" id="3758035">,</span>&nbsp;<span class="builtintype" id="3758037">uint8</span><span class="op" id="3758042">(</span><span class="ident" id="3758043">g</span>&nbsp;<span class="op" id="3758045">&gt;&gt;</span>&nbsp;<span class="num" id="3758048">8</span><span class="op" id="3758049">)</span><span class="op" id="3758050">,</span>&nbsp;<span class="builtintype" id="3758052">uint8</span><span class="op" id="3758057">(</span><span class="ident" id="3758058">b</span>&nbsp;<span class="op" id="3758060">&gt;&gt;</span>&nbsp;<span class="num" id="3758063">8</span><span class="op" id="3758064">)</span><span class="op" id="3758065">,</span>&nbsp;<span class="builtintype" id="3758067">uint8</span><span class="op" id="3758072">(</span><span class="ident" id="3758073">a</span>&nbsp;<span class="op" id="3758075">&gt;&gt;</span>&nbsp;<span class="num" id="3758078">8</span><span class="op" id="3758079">)</span><span class="op" id="3758080">}</span><br>
<span class="lineno"></span><span class="op" id="3758082">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="3758085">func</span>&nbsp;<span class="ident" id="3758090">nrgba64Model</span><span class="op" id="3758102">(</span><span class="ident" id="3758103">c</span>&nbsp;<span class="ident" id="3758105">Color</span><span class="op" id="3758110">)</span>&nbsp;<span class="ident" id="3758112">Color</span>&nbsp;<span class="op" id="3758118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758121">if</span>&nbsp;<span class="ident" id="3758124">_</span><span class="op" id="3758125">,</span>&nbsp;<span class="ident" id="3758127">ok</span>&nbsp;<span class="op" id="3758130">:=</span>&nbsp;<span class="ident" id="3758133">c</span><span class="op" id="3758134">.</span><span class="op" id="3758135">(</span><span class="ident" id="3758136">NRGBA64</span><span class="op" id="3758143">)</span><span class="op" id="3758144">;</span>&nbsp;<span class="ident" id="3758146">ok</span>&nbsp;<span class="op" id="3758149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758153">return</span>&nbsp;<span class="ident" id="3758160">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3758163">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3758166">r</span><span class="op" id="3758167">,</span>&nbsp;<span class="ident" id="3758169">g</span><span class="op" id="3758170">,</span>&nbsp;<span class="ident" id="3758172">b</span><span class="op" id="3758173">,</span>&nbsp;<span class="ident" id="3758175">a</span>&nbsp;<span class="op" id="3758177">:=</span>&nbsp;<span class="ident" id="3758180">c</span><span class="op" id="3758181">.</span><span class="ident" id="3758182">RGBA</span><span class="op" id="3758186">(</span><span class="op" id="3758187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758190">if</span>&nbsp;<span class="ident" id="3758193">a</span>&nbsp;<span class="op" id="3758195">==</span>&nbsp;<span class="num" id="3758198">0xffff</span>&nbsp;<span class="op" id="3758205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758209">return</span>&nbsp;<span class="ident" id="3758216">NRGBA64</span><span class="op" id="3758223">{</span><span class="builtintype" id="3758224">uint16</span><span class="op" id="3758230">(</span><span class="ident" id="3758231">r</span><span class="op" id="3758232">)</span><span class="op" id="3758233">,</span>&nbsp;<span class="builtintype" id="3758235">uint16</span><span class="op" id="3758241">(</span><span class="ident" id="3758242">g</span><span class="op" id="3758243">)</span><span class="op" id="3758244">,</span>&nbsp;<span class="builtintype" id="3758246">uint16</span><span class="op" id="3758252">(</span><span class="ident" id="3758253">b</span><span class="op" id="3758254">)</span><span class="op" id="3758255">,</span>&nbsp;<span class="num" id="3758257">0xffff</span><span class="op" id="3758263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3758266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758269">if</span>&nbsp;<span class="ident" id="3758272">a</span>&nbsp;<span class="op" id="3758274">==</span>&nbsp;<span class="num" id="3758277">0</span>&nbsp;<span class="op" id="3758279">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758283">return</span>&nbsp;<span class="ident" id="3758290">NRGBA64</span><span class="op" id="3758297">{</span><span class="num" id="3758298">0</span><span class="op" id="3758299">,</span>&nbsp;<span class="num" id="3758301">0</span><span class="op" id="3758302">,</span>&nbsp;<span class="num" id="3758304">0</span><span class="op" id="3758305">,</span>&nbsp;<span class="num" id="3758307">0</span><span class="op" id="3758308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3758311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3758314">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3758415">r</span>&nbsp;<span class="op" id="3758417">=</span>&nbsp;<span class="op" id="3758419">(</span><span class="ident" id="3758420">r</span>&nbsp;<span class="op" id="3758422">*</span>&nbsp;<span class="num" id="3758424">0xffff</span><span class="op" id="3758430">)</span>&nbsp;<span class="op" id="3758432">/</span>&nbsp;<span class="ident" id="3758434">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3758437">g</span>&nbsp;<span class="op" id="3758439">=</span>&nbsp;<span class="op" id="3758441">(</span><span class="ident" id="3758442">g</span>&nbsp;<span class="op" id="3758444">*</span>&nbsp;<span class="num" id="3758446">0xffff</span><span class="op" id="3758452">)</span>&nbsp;<span class="op" id="3758454">/</span>&nbsp;<span class="ident" id="3758456">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3758459">b</span>&nbsp;<span class="op" id="3758461">=</span>&nbsp;<span class="op" id="3758463">(</span><span class="ident" id="3758464">b</span>&nbsp;<span class="op" id="3758466">*</span>&nbsp;<span class="num" id="3758468">0xffff</span><span class="op" id="3758474">)</span>&nbsp;<span class="op" id="3758476">/</span>&nbsp;<span class="ident" id="3758478">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758481">return</span>&nbsp;<span class="ident" id="3758488">NRGBA64</span><span class="op" id="3758495">{</span><span class="builtintype" id="3758496">uint16</span><span class="op" id="3758502">(</span><span class="ident" id="3758503">r</span><span class="op" id="3758504">)</span><span class="op" id="3758505">,</span>&nbsp;<span class="builtintype" id="3758507">uint16</span><span class="op" id="3758513">(</span><span class="ident" id="3758514">g</span><span class="op" id="3758515">)</span><span class="op" id="3758516">,</span>&nbsp;<span class="builtintype" id="3758518">uint16</span><span class="op" id="3758524">(</span><span class="ident" id="3758525">b</span><span class="op" id="3758526">)</span><span class="op" id="3758527">,</span>&nbsp;<span class="builtintype" id="3758529">uint16</span><span class="op" id="3758535">(</span><span class="ident" id="3758536">a</span><span class="op" id="3758537">)</span><span class="op" id="3758538">}</span><br>
<span class="lineno"></span><span class="op" id="3758540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3758543">func</span>&nbsp;<span class="ident" id="3758548">alphaModel</span><span class="op" id="3758558">(</span><span class="ident" id="3758559">c</span>&nbsp;<span class="ident" id="3758561">Color</span><span class="op" id="3758566">)</span>&nbsp;<span class="ident" id="3758568">Color</span>&nbsp;<span class="op" id="3758574">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758577">if</span>&nbsp;<span class="ident" id="3758580">_</span><span class="op" id="3758581">,</span>&nbsp;<span class="ident" id="3758583">ok</span>&nbsp;<span class="op" id="3758586">:=</span>&nbsp;<span class="ident" id="3758589">c</span><span class="op" id="3758590">.</span><span class="op" id="3758591">(</span><span class="ident" id="3758592">Alpha</span><span class="op" id="3758597">)</span><span class="op" id="3758598">;</span>&nbsp;<span class="ident" id="3758600">ok</span>&nbsp;<span class="op" id="3758603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758607">return</span>&nbsp;<span class="ident" id="3758614">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3758617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3758620">_</span><span class="op" id="3758621">,</span>&nbsp;<span class="ident" id="3758623">_</span><span class="op" id="3758624">,</span>&nbsp;<span class="ident" id="3758626">_</span><span class="op" id="3758627">,</span>&nbsp;<span class="ident" id="3758629">a</span>&nbsp;<span class="op" id="3758631">:=</span>&nbsp;<span class="ident" id="3758634">c</span><span class="op" id="3758635">.</span><span class="ident" id="3758636">RGBA</span><span class="op" id="3758640">(</span><span class="op" id="3758641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758644">return</span>&nbsp;<span class="ident" id="3758651">Alpha</span><span class="op" id="3758656">{</span><span class="builtintype" id="3758657">uint8</span><span class="op" id="3758662">(</span><span class="ident" id="3758663">a</span>&nbsp;<span class="op" id="3758665">&gt;&gt;</span>&nbsp;<span class="num" id="3758668">8</span><span class="op" id="3758669">)</span><span class="op" id="3758670">}</span><br>
<span class="lineno">225</span><span class="op" id="3758672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3758675">func</span>&nbsp;<span class="ident" id="3758680">alpha16Model</span><span class="op" id="3758692">(</span><span class="ident" id="3758693">c</span>&nbsp;<span class="ident" id="3758695">Color</span><span class="op" id="3758700">)</span>&nbsp;<span class="ident" id="3758702">Color</span>&nbsp;<span class="op" id="3758708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758711">if</span>&nbsp;<span class="ident" id="3758714">_</span><span class="op" id="3758715">,</span>&nbsp;<span class="ident" id="3758717">ok</span>&nbsp;<span class="op" id="3758720">:=</span>&nbsp;<span class="ident" id="3758723">c</span><span class="op" id="3758724">.</span><span class="op" id="3758725">(</span><span class="ident" id="3758726">Alpha16</span><span class="op" id="3758733">)</span><span class="op" id="3758734">;</span>&nbsp;<span class="ident" id="3758736">ok</span>&nbsp;<span class="op" id="3758739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758743">return</span>&nbsp;<span class="ident" id="3758750">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3758753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3758756">_</span><span class="op" id="3758757">,</span>&nbsp;<span class="ident" id="3758759">_</span><span class="op" id="3758760">,</span>&nbsp;<span class="ident" id="3758762">_</span><span class="op" id="3758763">,</span>&nbsp;<span class="ident" id="3758765">a</span>&nbsp;<span class="op" id="3758767">:=</span>&nbsp;<span class="ident" id="3758770">c</span><span class="op" id="3758771">.</span><span class="ident" id="3758772">RGBA</span><span class="op" id="3758776">(</span><span class="op" id="3758777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758780">return</span>&nbsp;<span class="ident" id="3758787">Alpha16</span><span class="op" id="3758794">{</span><span class="builtintype" id="3758795">uint16</span><span class="op" id="3758801">(</span><span class="ident" id="3758802">a</span><span class="op" id="3758803">)</span><span class="op" id="3758804">}</span><br>
<span class="lineno"></span><span class="op" id="3758806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="3758809">func</span>&nbsp;<span class="ident" id="3758814">grayModel</span><span class="op" id="3758823">(</span><span class="ident" id="3758824">c</span>&nbsp;<span class="ident" id="3758826">Color</span><span class="op" id="3758831">)</span>&nbsp;<span class="ident" id="3758833">Color</span>&nbsp;<span class="op" id="3758839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758842">if</span>&nbsp;<span class="ident" id="3758845">_</span><span class="op" id="3758846">,</span>&nbsp;<span class="ident" id="3758848">ok</span>&nbsp;<span class="op" id="3758851">:=</span>&nbsp;<span class="ident" id="3758854">c</span><span class="op" id="3758855">.</span><span class="op" id="3758856">(</span><span class="ident" id="3758857">Gray</span><span class="op" id="3758861">)</span><span class="op" id="3758862">;</span>&nbsp;<span class="ident" id="3758864">ok</span>&nbsp;<span class="op" id="3758867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758871">return</span>&nbsp;<span class="ident" id="3758878">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3758881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3758884">r</span><span class="op" id="3758885">,</span>&nbsp;<span class="ident" id="3758887">g</span><span class="op" id="3758888">,</span>&nbsp;<span class="ident" id="3758890">b</span><span class="op" id="3758891">,</span>&nbsp;<span class="ident" id="3758893">_</span>&nbsp;<span class="op" id="3758895">:=</span>&nbsp;<span class="ident" id="3758898">c</span><span class="op" id="3758899">.</span><span class="ident" id="3758900">RGBA</span><span class="op" id="3758904">(</span><span class="op" id="3758905">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3758908">y</span>&nbsp;<span class="op" id="3758910">:=</span>&nbsp;<span class="op" id="3758913">(</span><span class="num" id="3758914">299</span><span class="op" id="3758917">*</span><span class="ident" id="3758918">r</span>&nbsp;<span class="op" id="3758920">+</span>&nbsp;<span class="num" id="3758922">587</span><span class="op" id="3758925">*</span><span class="ident" id="3758926">g</span>&nbsp;<span class="op" id="3758928">+</span>&nbsp;<span class="num" id="3758930">114</span><span class="op" id="3758933">*</span><span class="ident" id="3758934">b</span>&nbsp;<span class="op" id="3758936">+</span>&nbsp;<span class="num" id="3758938">500</span><span class="op" id="3758941">)</span>&nbsp;<span class="op" id="3758943">/</span>&nbsp;<span class="num" id="3758945">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3758951">return</span>&nbsp;<span class="ident" id="3758958">Gray</span><span class="op" id="3758962">{</span><span class="builtintype" id="3758963">uint8</span><span class="op" id="3758968">(</span><span class="ident" id="3758969">y</span>&nbsp;<span class="op" id="3758971">&gt;&gt;</span>&nbsp;<span class="num" id="3758974">8</span><span class="op" id="3758975">)</span><span class="op" id="3758976">}</span><br>
<span class="lineno"></span><span class="op" id="3758978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3758981">func</span>&nbsp;<span class="ident" id="3758986">gray16Model</span><span class="op" id="3758997">(</span><span class="ident" id="3758998">c</span>&nbsp;<span class="ident" id="3759000">Color</span><span class="op" id="3759005">)</span>&nbsp;<span class="ident" id="3759007">Color</span>&nbsp;<span class="op" id="3759013">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3759016">if</span>&nbsp;<span class="ident" id="3759019">_</span><span class="op" id="3759020">,</span>&nbsp;<span class="ident" id="3759022">ok</span>&nbsp;<span class="op" id="3759025">:=</span>&nbsp;<span class="ident" id="3759028">c</span><span class="op" id="3759029">.</span><span class="op" id="3759030">(</span><span class="ident" id="3759031">Gray16</span><span class="op" id="3759037">)</span><span class="op" id="3759038">;</span>&nbsp;<span class="ident" id="3759040">ok</span>&nbsp;<span class="op" id="3759043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3759047">return</span>&nbsp;<span class="ident" id="3759054">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3759057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759060">r</span><span class="op" id="3759061">,</span>&nbsp;<span class="ident" id="3759063">g</span><span class="op" id="3759064">,</span>&nbsp;<span class="ident" id="3759066">b</span><span class="op" id="3759067">,</span>&nbsp;<span class="ident" id="3759069">_</span>&nbsp;<span class="op" id="3759071">:=</span>&nbsp;<span class="ident" id="3759074">c</span><span class="op" id="3759075">.</span><span class="ident" id="3759076">RGBA</span><span class="op" id="3759080">(</span><span class="op" id="3759081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759084">y</span>&nbsp;<span class="op" id="3759086">:=</span>&nbsp;<span class="op" id="3759089">(</span><span class="num" id="3759090">299</span><span class="op" id="3759093">*</span><span class="ident" id="3759094">r</span>&nbsp;<span class="op" id="3759096">+</span>&nbsp;<span class="num" id="3759098">587</span><span class="op" id="3759101">*</span><span class="ident" id="3759102">g</span>&nbsp;<span class="op" id="3759104">+</span>&nbsp;<span class="num" id="3759106">114</span><span class="op" id="3759109">*</span><span class="ident" id="3759110">b</span>&nbsp;<span class="op" id="3759112">+</span>&nbsp;<span class="num" id="3759114">500</span><span class="op" id="3759117">)</span>&nbsp;<span class="op" id="3759119">/</span>&nbsp;<span class="num" id="3759121">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3759127">return</span>&nbsp;<span class="ident" id="3759134">Gray16</span><span class="op" id="3759140">{</span><span class="builtintype" id="3759141">uint16</span><span class="op" id="3759147">(</span><span class="ident" id="3759148">y</span><span class="op" id="3759149">)</span><span class="op" id="3759150">}</span><br>
<span class="lineno"></span><span class="op" id="3759152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3759155">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="3759190">type</span>&nbsp;<span class="ident" id="3759195">Palette</span>&nbsp;<span class="op" id="3759203">[</span><span class="op" id="3759204">]</span><span class="ident" id="3759205">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="3759212">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="3759288">func</span>&nbsp;<span class="op" id="3759293">(</span><span class="ident" id="3759294">p</span>&nbsp;<span class="ident" id="3759296">Palette</span><span class="op" id="3759303">)</span>&nbsp;<span class="ident" id="3759305">Convert</span><span class="op" id="3759312">(</span><span class="ident" id="3759313">c</span>&nbsp;<span class="ident" id="3759315">Color</span><span class="op" id="3759320">)</span>&nbsp;<span class="ident" id="3759322">Color</span>&nbsp;<span class="op" id="3759328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3759331">if</span>&nbsp;<span class="builtinfunc" id="3759334">len</span><span class="op" id="3759337">(</span><span class="ident" id="3759338">p</span><span class="op" id="3759339">)</span>&nbsp;<span class="op" id="3759341">==</span>&nbsp;<span class="num" id="3759344">0</span>&nbsp;<span class="op" id="3759346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3759350">return</span>&nbsp;<span class="ident" id="3759357">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3759362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3759365">return</span>&nbsp;<span class="ident" id="3759372">p</span><span class="op" id="3759373">[</span><span class="ident" id="3759374">p</span><span class="op" id="3759375">.</span><span class="ident" id="3759376">Index</span><span class="op" id="3759381">(</span><span class="ident" id="3759382">c</span><span class="op" id="3759383">)</span><span class="op" id="3759384">]</span><br>
<span class="lineno"></span><span class="op" id="3759386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3759389">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="3759463">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="3759479">func</span>&nbsp;<span class="op" id="3759484">(</span><span class="ident" id="3759485">p</span>&nbsp;<span class="ident" id="3759487">Palette</span><span class="op" id="3759494">)</span>&nbsp;<span class="ident" id="3759496">Index</span><span class="op" id="3759501">(</span><span class="ident" id="3759502">c</span>&nbsp;<span class="ident" id="3759504">Color</span><span class="op" id="3759509">)</span>&nbsp;<span class="builtintype" id="3759511">int</span>&nbsp;<span class="op" id="3759515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3759518">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759585">cr</span><span class="op" id="3759587">,</span>&nbsp;<span class="ident" id="3759589">cg</span><span class="op" id="3759591">,</span>&nbsp;<span class="ident" id="3759593">cb</span><span class="op" id="3759595">,</span>&nbsp;<span class="ident" id="3759597">_</span>&nbsp;<span class="op" id="3759599">:=</span>&nbsp;<span class="ident" id="3759602">c</span><span class="op" id="3759603">.</span><span class="ident" id="3759604">RGBA</span><span class="op" id="3759608">(</span><span class="op" id="3759609">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759612">ret</span><span class="op" id="3759615">,</span>&nbsp;<span class="ident" id="3759617">bestSSD</span>&nbsp;<span class="op" id="3759625">:=</span>&nbsp;<span class="num" id="3759628">0</span><span class="op" id="3759629">,</span>&nbsp;<span class="builtintype" id="3759631">uint32</span><span class="op" id="3759637">(</span><span class="num" id="3759638">1</span><span class="op" id="3759639">&lt;&lt;</span><span class="num" id="3759641">32</span><span class="op" id="3759643">-</span><span class="num" id="3759644">1</span><span class="op" id="3759645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3759648">for</span>&nbsp;<span class="ident" id="3759652">i</span><span class="op" id="3759653">,</span>&nbsp;<span class="ident" id="3759655">v</span>&nbsp;<span class="op" id="3759657">:=</span>&nbsp;<span class="keyword" id="3759660">range</span>&nbsp;<span class="ident" id="3759666">p</span>&nbsp;<span class="op" id="3759668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759672">vr</span><span class="op" id="3759674">,</span>&nbsp;<span class="ident" id="3759676">vg</span><span class="op" id="3759678">,</span>&nbsp;<span class="ident" id="3759680">vb</span><span class="op" id="3759682">,</span>&nbsp;<span class="ident" id="3759684">_</span>&nbsp;<span class="op" id="3759686">:=</span>&nbsp;<span class="ident" id="3759689">v</span><span class="op" id="3759690">.</span><span class="ident" id="3759691">RGBA</span><span class="op" id="3759695">(</span><span class="op" id="3759696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3759700">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3759761">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759790">delta</span>&nbsp;<span class="op" id="3759796">:=</span>&nbsp;<span class="op" id="3759799">(</span><span class="builtintype" id="3759800">int32</span><span class="op" id="3759805">(</span><span class="ident" id="3759806">cr</span><span class="op" id="3759808">)</span>&nbsp;<span class="op" id="3759810">-</span>&nbsp;<span class="builtintype" id="3759812">int32</span><span class="op" id="3759817">(</span><span class="ident" id="3759818">vr</span><span class="op" id="3759820">)</span><span class="op" id="3759821">)</span>&nbsp;<span class="op" id="3759823">&gt;&gt;</span>&nbsp;<span class="num" id="3759826">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759830">ssd</span>&nbsp;<span class="op" id="3759834">:=</span>&nbsp;<span class="builtintype" id="3759837">uint32</span><span class="op" id="3759843">(</span><span class="ident" id="3759844">delta</span>&nbsp;<span class="op" id="3759850">*</span>&nbsp;<span class="ident" id="3759852">delta</span><span class="op" id="3759857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759861">delta</span>&nbsp;<span class="op" id="3759867">=</span>&nbsp;<span class="op" id="3759869">(</span><span class="builtintype" id="3759870">int32</span><span class="op" id="3759875">(</span><span class="ident" id="3759876">cg</span><span class="op" id="3759878">)</span>&nbsp;<span class="op" id="3759880">-</span>&nbsp;<span class="builtintype" id="3759882">int32</span><span class="op" id="3759887">(</span><span class="ident" id="3759888">vg</span><span class="op" id="3759890">)</span><span class="op" id="3759891">)</span>&nbsp;<span class="op" id="3759893">&gt;&gt;</span>&nbsp;<span class="num" id="3759896">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759900">ssd</span>&nbsp;<span class="op" id="3759904">+=</span>&nbsp;<span class="builtintype" id="3759907">uint32</span><span class="op" id="3759913">(</span><span class="ident" id="3759914">delta</span>&nbsp;<span class="op" id="3759920">*</span>&nbsp;<span class="ident" id="3759922">delta</span><span class="op" id="3759927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759931">delta</span>&nbsp;<span class="op" id="3759937">=</span>&nbsp;<span class="op" id="3759939">(</span><span class="builtintype" id="3759940">int32</span><span class="op" id="3759945">(</span><span class="ident" id="3759946">cb</span><span class="op" id="3759948">)</span>&nbsp;<span class="op" id="3759950">-</span>&nbsp;<span class="builtintype" id="3759952">int32</span><span class="op" id="3759957">(</span><span class="ident" id="3759958">vb</span><span class="op" id="3759960">)</span><span class="op" id="3759961">)</span>&nbsp;<span class="op" id="3759963">&gt;&gt;</span>&nbsp;<span class="num" id="3759966">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3759970">ssd</span>&nbsp;<span class="op" id="3759974">+=</span>&nbsp;<span class="builtintype" id="3759977">uint32</span><span class="op" id="3759983">(</span><span class="ident" id="3759984">delta</span>&nbsp;<span class="op" id="3759990">*</span>&nbsp;<span class="ident" id="3759992">delta</span><span class="op" id="3759997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3760001">if</span>&nbsp;<span class="ident" id="3760004">ssd</span>&nbsp;<span class="op" id="3760008">&lt;</span>&nbsp;<span class="ident" id="3760010">bestSSD</span>&nbsp;<span class="op" id="3760018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3760023">if</span>&nbsp;<span class="ident" id="3760026">ssd</span>&nbsp;<span class="op" id="3760030">==</span>&nbsp;<span class="num" id="3760033">0</span>&nbsp;<span class="op" id="3760035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3760041">return</span>&nbsp;<span class="ident" id="3760048">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3760053">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3760058">ret</span><span class="op" id="3760061">,</span>&nbsp;<span class="ident" id="3760063">bestSSD</span>&nbsp;<span class="op" id="3760071">=</span>&nbsp;<span class="ident" id="3760073">i</span><span class="op" id="3760074">,</span>&nbsp;<span class="ident" id="3760076">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3760082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3760085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3760088">return</span>&nbsp;<span class="ident" id="3760095">ret</span><br>
<span class="lineno"></span><span class="op" id="3760099">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="3760102">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="3760122">var</span>&nbsp;<span class="op" id="3760126">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3760129">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760141">=</span>&nbsp;<span class="ident" id="3760143">Gray16</span><span class="op" id="3760149">{</span><span class="num" id="3760150">0</span><span class="op" id="3760151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3760154">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760166">=</span>&nbsp;<span class="ident" id="3760168">Gray16</span><span class="op" id="3760174">{</span><span class="num" id="3760175">0xffff</span><span class="op" id="3760181">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3760184">Transparent</span>&nbsp;<span class="op" id="3760196">=</span>&nbsp;<span class="ident" id="3760198">Alpha16</span><span class="op" id="3760205">{</span><span class="num" id="3760206">0</span><span class="op" id="3760207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3760210">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760222">=</span>&nbsp;<span class="ident" id="3760224">Alpha16</span><span class="op" id="3760231">{</span><span class="num" id="3760232">0xffff</span><span class="op" id="3760238">}</span><br>
<span class="lineno"></span><span class="op" id="3760240">)</span>
</div>
</body>
</html>
