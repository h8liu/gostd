<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html" class="current">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6717322">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6717377">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6717431">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6717482">package</span>&nbsp;<span class="ident" id="6717490">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6717495">import</span>&nbsp;<span class="op" id="6717502">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6717505">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6717512">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6717518">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6717529">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6717539">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6717542">var</span>&nbsp;<span class="ident" id="6717546">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="6717573">=</span>&nbsp;<span class="op" id="6717575">[</span><span class="op" id="6717576">]</span><span class="keyword" id="6717577">struct</span>&nbsp;<span class="op" id="6717584">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6717587">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6717593">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6717601">gaddr</span>&nbsp;<span class="op" id="6717607">*</span><span class="ident" id="6717608">UDPAddr</span>&nbsp;<span class="comment" id="6717616">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="6717632">}</span><span class="op" id="6717633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6717636">{</span><span class="string" id="6717637">&#34;udp&#34;</span><span class="op" id="6717642">,</span>&nbsp;<span class="op" id="6717644">&amp;</span><span class="ident" id="6717645">UDPAddr</span><span class="op" id="6717652">{</span><span class="ident" id="6717653">IP</span><span class="op" id="6717655">:</span>&nbsp;<span class="ident" id="6717657">IPv4</span><span class="op" id="6717661">(</span><span class="num" id="6717662">224</span><span class="op" id="6717665">,</span>&nbsp;<span class="num" id="6717667">0</span><span class="op" id="6717668">,</span>&nbsp;<span class="num" id="6717670">0</span><span class="op" id="6717671">,</span>&nbsp;<span class="num" id="6717673">254</span><span class="op" id="6717676">)</span><span class="op" id="6717677">,</span>&nbsp;<span class="ident" id="6717679">Port</span><span class="op" id="6717683">:</span>&nbsp;<span class="num" id="6717685">12345</span><span class="op" id="6717690">}</span><span class="op" id="6717691">}</span><span class="op" id="6717692">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6717696">{</span><span class="string" id="6717697">&#34;udp4&#34;</span><span class="op" id="6717703">,</span>&nbsp;<span class="op" id="6717705">&amp;</span><span class="ident" id="6717706">UDPAddr</span><span class="op" id="6717713">{</span><span class="ident" id="6717714">IP</span><span class="op" id="6717716">:</span>&nbsp;<span class="ident" id="6717718">IPv4</span><span class="op" id="6717722">(</span><span class="num" id="6717723">224</span><span class="op" id="6717726">,</span>&nbsp;<span class="num" id="6717728">0</span><span class="op" id="6717729">,</span>&nbsp;<span class="num" id="6717731">0</span><span class="op" id="6717732">,</span>&nbsp;<span class="num" id="6717734">254</span><span class="op" id="6717737">)</span><span class="op" id="6717738">,</span>&nbsp;<span class="ident" id="6717740">Port</span><span class="op" id="6717744">:</span>&nbsp;<span class="num" id="6717746">12345</span><span class="op" id="6717751">}</span><span class="op" id="6717752">}</span><span class="op" id="6717753">,</span><br>
<span class="lineno"></span><span class="op" id="6717755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6717758">//&nbsp;TestIPv4MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6717828">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">25</span><span class="comment" id="6717899">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="6717908">func</span>&nbsp;<span class="ident" id="6717913">TestIPv4MulticastListener</span><span class="op" id="6717938">(</span><span class="ident" id="6717939">t</span>&nbsp;<span class="op" id="6717941">*</span><span class="ident" id="6717942">testing</span><span class="op" id="6717949">.</span><span class="ident" id="6717950">T</span><span class="op" id="6717951">)</span>&nbsp;<span class="op" id="6717953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6717956">switch</span>&nbsp;<span class="ident" id="6717963">runtime</span><span class="op" id="6717970">.</span><span class="ident" id="6717971">GOOS</span>&nbsp;<span class="op" id="6717976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6717979">case</span>&nbsp;<span class="string" id="6717984">&#34;android&#34;</span><span class="op" id="6717993">,</span>&nbsp;<span class="string" id="6717995">&#34;nacl&#34;</span><span class="op" id="6718001">,</span>&nbsp;<span class="string" id="6718003">&#34;plan9&#34;</span><span class="op" id="6718010">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718014">t</span><span class="op" id="6718015">.</span><span class="ident" id="6718016">Skipf</span><span class="op" id="6718021">(</span><span class="string" id="6718022">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6718043">,</span>&nbsp;<span class="ident" id="6718045">runtime</span><span class="op" id="6718052">.</span><span class="ident" id="6718053">GOOS</span><span class="op" id="6718057">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718060">case</span>&nbsp;<span class="string" id="6718065">&#34;solaris&#34;</span><span class="op" id="6718074">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718078">t</span><span class="op" id="6718079">.</span><span class="ident" id="6718080">Skipf</span><span class="op" id="6718085">(</span><span class="string" id="6718086">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="6718128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6718131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718135">closer</span>&nbsp;<span class="op" id="6718142">:=</span>&nbsp;<span class="keyword" id="6718145">func</span><span class="op" id="6718149">(</span><span class="ident" id="6718150">cs</span>&nbsp;<span class="op" id="6718153">[</span><span class="op" id="6718154">]</span><span class="op" id="6718155">*</span><span class="ident" id="6718156">UDPConn</span><span class="op" id="6718163">)</span>&nbsp;<span class="op" id="6718165">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718169">for</span>&nbsp;<span class="ident" id="6718173">_</span><span class="op" id="6718174">,</span>&nbsp;<span class="ident" id="6718176">c</span>&nbsp;<span class="op" id="6718178">:=</span>&nbsp;<span class="keyword" id="6718181">range</span>&nbsp;<span class="ident" id="6718187">cs</span>&nbsp;<span class="op" id="6718190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718195">if</span>&nbsp;<span class="ident" id="6718198">c</span>&nbsp;<span class="op" id="6718200">!=</span>&nbsp;<span class="builtintype" id="6718203">nil</span>&nbsp;<span class="op" id="6718207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718213">c</span><span class="op" id="6718214">.</span><span class="ident" id="6718215">Close</span><span class="op" id="6718220">(</span><span class="op" id="6718221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6718226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6718230">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6718233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718237">for</span>&nbsp;<span class="ident" id="6718241">_</span><span class="op" id="6718242">,</span>&nbsp;<span class="ident" id="6718244">ifi</span>&nbsp;<span class="op" id="6718248">:=</span>&nbsp;<span class="keyword" id="6718251">range</span>&nbsp;<span class="op" id="6718257">[</span><span class="op" id="6718258">]</span><span class="op" id="6718259">*</span><span class="ident" id="6718260">Interface</span><span class="op" id="6718269">{</span><span class="ident" id="6718270">loopbackInterface</span><span class="op" id="6718287">(</span><span class="op" id="6718288">)</span><span class="op" id="6718289">,</span>&nbsp;<span class="builtintype" id="6718291">nil</span><span class="op" id="6718294">}</span>&nbsp;<span class="op" id="6718296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6718300">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6718356">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6718409">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6718459">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6718511">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718529">if</span>&nbsp;<span class="ident" id="6718532">ifi</span>&nbsp;<span class="op" id="6718536">==</span>&nbsp;<span class="builtintype" id="6718539">nil</span>&nbsp;<span class="op" id="6718543">&amp;&amp;</span>&nbsp;<span class="op" id="6718546">!</span><span class="op" id="6718547">*</span><span class="ident" id="6718548">testExternal</span>&nbsp;<span class="op" id="6718561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718566">continue</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6718577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718581">for</span>&nbsp;<span class="ident" id="6718585">_</span><span class="op" id="6718586">,</span>&nbsp;<span class="ident" id="6718588">tt</span>&nbsp;<span class="op" id="6718591">:=</span>&nbsp;<span class="keyword" id="6718594">range</span>&nbsp;<span class="ident" id="6718600">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="6718627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718632">var</span>&nbsp;<span class="ident" id="6718636">err</span>&nbsp;<span class="builtintype" id="6718640">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718649">cs</span>&nbsp;<span class="op" id="6718652">:=</span>&nbsp;<span class="builtinfunc" id="6718655">make</span><span class="op" id="6718659">(</span><span class="op" id="6718660">[</span><span class="op" id="6718661">]</span><span class="op" id="6718662">*</span><span class="ident" id="6718663">UDPConn</span><span class="op" id="6718670">,</span>&nbsp;<span class="num" id="6718672">2</span><span class="op" id="6718673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718678">if</span>&nbsp;<span class="ident" id="6718681">cs</span><span class="op" id="6718683">[</span><span class="num" id="6718684">0</span><span class="op" id="6718685">]</span><span class="op" id="6718686">,</span>&nbsp;<span class="ident" id="6718688">err</span>&nbsp;<span class="op" id="6718692">=</span>&nbsp;<span class="ident" id="6718694">ListenMulticastUDP</span><span class="op" id="6718712">(</span><span class="ident" id="6718713">tt</span><span class="op" id="6718715">.</span><span class="ident" id="6718716">net</span><span class="op" id="6718719">,</span>&nbsp;<span class="ident" id="6718721">ifi</span><span class="op" id="6718724">,</span>&nbsp;<span class="ident" id="6718726">tt</span><span class="op" id="6718728">.</span><span class="ident" id="6718729">gaddr</span><span class="op" id="6718734">)</span><span class="op" id="6718735">;</span>&nbsp;<span class="ident" id="6718737">err</span>&nbsp;<span class="op" id="6718741">!=</span>&nbsp;<span class="builtintype" id="6718744">nil</span>&nbsp;<span class="op" id="6718748">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718754">t</span><span class="op" id="6718755">.</span><span class="ident" id="6718756">Fatalf</span><span class="op" id="6718762">(</span><span class="string" id="6718763">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6718806">,</span>&nbsp;<span class="ident" id="6718808">ifi</span><span class="op" id="6718811">,</span>&nbsp;<span class="ident" id="6718813">err</span><span class="op" id="6718816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6718821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718826">if</span>&nbsp;<span class="ident" id="6718829">err</span>&nbsp;<span class="op" id="6718833">:=</span>&nbsp;<span class="ident" id="6718836">checkMulticastListener</span><span class="op" id="6718858">(</span><span class="ident" id="6718859">cs</span><span class="op" id="6718861">[</span><span class="num" id="6718862">0</span><span class="op" id="6718863">]</span><span class="op" id="6718864">,</span>&nbsp;<span class="ident" id="6718866">tt</span><span class="op" id="6718868">.</span><span class="ident" id="6718869">gaddr</span><span class="op" id="6718874">.</span><span class="ident" id="6718875">IP</span><span class="op" id="6718877">)</span><span class="op" id="6718878">;</span>&nbsp;<span class="ident" id="6718880">err</span>&nbsp;<span class="op" id="6718884">!=</span>&nbsp;<span class="builtintype" id="6718887">nil</span>&nbsp;<span class="op" id="6718891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718897">closer</span><span class="op" id="6718903">(</span><span class="ident" id="6718904">cs</span><span class="op" id="6718906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718912">t</span><span class="op" id="6718913">.</span><span class="ident" id="6718914">Fatal</span><span class="op" id="6718919">(</span><span class="ident" id="6718920">err</span><span class="op" id="6718923">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6718928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718933">if</span>&nbsp;<span class="ident" id="6718936">cs</span><span class="op" id="6718938">[</span><span class="num" id="6718939">1</span><span class="op" id="6718940">]</span><span class="op" id="6718941">,</span>&nbsp;<span class="ident" id="6718943">err</span>&nbsp;<span class="op" id="6718947">=</span>&nbsp;<span class="ident" id="6718949">ListenMulticastUDP</span><span class="op" id="6718967">(</span><span class="ident" id="6718968">tt</span><span class="op" id="6718970">.</span><span class="ident" id="6718971">net</span><span class="op" id="6718974">,</span>&nbsp;<span class="ident" id="6718976">ifi</span><span class="op" id="6718979">,</span>&nbsp;<span class="ident" id="6718981">tt</span><span class="op" id="6718983">.</span><span class="ident" id="6718984">gaddr</span><span class="op" id="6718989">)</span><span class="op" id="6718990">;</span>&nbsp;<span class="ident" id="6718992">err</span>&nbsp;<span class="op" id="6718996">!=</span>&nbsp;<span class="builtintype" id="6718999">nil</span>&nbsp;<span class="op" id="6719003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719009">closer</span><span class="op" id="6719015">(</span><span class="ident" id="6719016">cs</span><span class="op" id="6719018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719024">t</span><span class="op" id="6719025">.</span><span class="ident" id="6719026">Fatalf</span><span class="op" id="6719032">(</span><span class="string" id="6719033">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6719077">,</span>&nbsp;<span class="ident" id="6719079">ifi</span><span class="op" id="6719082">,</span>&nbsp;<span class="ident" id="6719084">err</span><span class="op" id="6719087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719092">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6719097">if</span>&nbsp;<span class="ident" id="6719100">err</span>&nbsp;<span class="op" id="6719104">:=</span>&nbsp;<span class="ident" id="6719107">checkMulticastListener</span><span class="op" id="6719129">(</span><span class="ident" id="6719130">cs</span><span class="op" id="6719132">[</span><span class="num" id="6719133">1</span><span class="op" id="6719134">]</span><span class="op" id="6719135">,</span>&nbsp;<span class="ident" id="6719137">tt</span><span class="op" id="6719139">.</span><span class="ident" id="6719140">gaddr</span><span class="op" id="6719145">.</span><span class="ident" id="6719146">IP</span><span class="op" id="6719148">)</span><span class="op" id="6719149">;</span>&nbsp;<span class="ident" id="6719151">err</span>&nbsp;<span class="op" id="6719155">!=</span>&nbsp;<span class="builtintype" id="6719158">nil</span>&nbsp;<span class="op" id="6719162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719168">closer</span><span class="op" id="6719174">(</span><span class="ident" id="6719175">cs</span><span class="op" id="6719177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719183">t</span><span class="op" id="6719184">.</span><span class="ident" id="6719185">Fatal</span><span class="op" id="6719190">(</span><span class="ident" id="6719191">err</span><span class="op" id="6719194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719204">closer</span><span class="op" id="6719210">(</span><span class="ident" id="6719211">cs</span><span class="op" id="6719213">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719220">}</span><br>
<span class="lineno"></span><span class="op" id="6719222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6719225">var</span>&nbsp;<span class="ident" id="6719229">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="6719256">=</span>&nbsp;<span class="op" id="6719258">[</span><span class="op" id="6719259">]</span><span class="keyword" id="6719260">struct</span>&nbsp;<span class="op" id="6719267">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719270">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6719276">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719284">gaddr</span>&nbsp;<span class="op" id="6719290">*</span><span class="ident" id="6719291">UDPAddr</span>&nbsp;<span class="comment" id="6719299">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="6719315">}</span><span class="op" id="6719316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719319">{</span><span class="string" id="6719320">&#34;udp&#34;</span><span class="op" id="6719325">,</span>&nbsp;<span class="op" id="6719327">&amp;</span><span class="ident" id="6719328">UDPAddr</span><span class="op" id="6719335">{</span><span class="ident" id="6719336">IP</span><span class="op" id="6719338">:</span>&nbsp;<span class="ident" id="6719340">ParseIP</span><span class="op" id="6719347">(</span><span class="string" id="6719348">&#34;ff01::114&#34;</span><span class="op" id="6719359">)</span><span class="op" id="6719360">,</span>&nbsp;<span class="ident" id="6719362">Port</span><span class="op" id="6719366">:</span>&nbsp;<span class="num" id="6719368">12345</span><span class="op" id="6719373">}</span><span class="op" id="6719374">}</span><span class="op" id="6719375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719378">{</span><span class="string" id="6719379">&#34;udp&#34;</span><span class="op" id="6719384">,</span>&nbsp;<span class="op" id="6719386">&amp;</span><span class="ident" id="6719387">UDPAddr</span><span class="op" id="6719394">{</span><span class="ident" id="6719395">IP</span><span class="op" id="6719397">:</span>&nbsp;<span class="ident" id="6719399">ParseIP</span><span class="op" id="6719406">(</span><span class="string" id="6719407">&#34;ff02::114&#34;</span><span class="op" id="6719418">)</span><span class="op" id="6719419">,</span>&nbsp;<span class="ident" id="6719421">Port</span><span class="op" id="6719425">:</span>&nbsp;<span class="num" id="6719427">12345</span><span class="op" id="6719432">}</span><span class="op" id="6719433">}</span><span class="op" id="6719434">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719437">{</span><span class="string" id="6719438">&#34;udp&#34;</span><span class="op" id="6719443">,</span>&nbsp;<span class="op" id="6719445">&amp;</span><span class="ident" id="6719446">UDPAddr</span><span class="op" id="6719453">{</span><span class="ident" id="6719454">IP</span><span class="op" id="6719456">:</span>&nbsp;<span class="ident" id="6719458">ParseIP</span><span class="op" id="6719465">(</span><span class="string" id="6719466">&#34;ff04::114&#34;</span><span class="op" id="6719477">)</span><span class="op" id="6719478">,</span>&nbsp;<span class="ident" id="6719480">Port</span><span class="op" id="6719484">:</span>&nbsp;<span class="num" id="6719486">12345</span><span class="op" id="6719491">}</span><span class="op" id="6719492">}</span><span class="op" id="6719493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719496">{</span><span class="string" id="6719497">&#34;udp&#34;</span><span class="op" id="6719502">,</span>&nbsp;<span class="op" id="6719504">&amp;</span><span class="ident" id="6719505">UDPAddr</span><span class="op" id="6719512">{</span><span class="ident" id="6719513">IP</span><span class="op" id="6719515">:</span>&nbsp;<span class="ident" id="6719517">ParseIP</span><span class="op" id="6719524">(</span><span class="string" id="6719525">&#34;ff05::114&#34;</span><span class="op" id="6719536">)</span><span class="op" id="6719537">,</span>&nbsp;<span class="ident" id="6719539">Port</span><span class="op" id="6719543">:</span>&nbsp;<span class="num" id="6719545">12345</span><span class="op" id="6719550">}</span><span class="op" id="6719551">}</span><span class="op" id="6719552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719555">{</span><span class="string" id="6719556">&#34;udp&#34;</span><span class="op" id="6719561">,</span>&nbsp;<span class="op" id="6719563">&amp;</span><span class="ident" id="6719564">UDPAddr</span><span class="op" id="6719571">{</span><span class="ident" id="6719572">IP</span><span class="op" id="6719574">:</span>&nbsp;<span class="ident" id="6719576">ParseIP</span><span class="op" id="6719583">(</span><span class="string" id="6719584">&#34;ff08::114&#34;</span><span class="op" id="6719595">)</span><span class="op" id="6719596">,</span>&nbsp;<span class="ident" id="6719598">Port</span><span class="op" id="6719602">:</span>&nbsp;<span class="num" id="6719604">12345</span><span class="op" id="6719609">}</span><span class="op" id="6719610">}</span><span class="op" id="6719611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719614">{</span><span class="string" id="6719615">&#34;udp&#34;</span><span class="op" id="6719620">,</span>&nbsp;<span class="op" id="6719622">&amp;</span><span class="ident" id="6719623">UDPAddr</span><span class="op" id="6719630">{</span><span class="ident" id="6719631">IP</span><span class="op" id="6719633">:</span>&nbsp;<span class="ident" id="6719635">ParseIP</span><span class="op" id="6719642">(</span><span class="string" id="6719643">&#34;ff0e::114&#34;</span><span class="op" id="6719654">)</span><span class="op" id="6719655">,</span>&nbsp;<span class="ident" id="6719657">Port</span><span class="op" id="6719661">:</span>&nbsp;<span class="num" id="6719663">12345</span><span class="op" id="6719668">}</span><span class="op" id="6719669">}</span><span class="op" id="6719670">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719674">{</span><span class="string" id="6719675">&#34;udp6&#34;</span><span class="op" id="6719681">,</span>&nbsp;<span class="op" id="6719683">&amp;</span><span class="ident" id="6719684">UDPAddr</span><span class="op" id="6719691">{</span><span class="ident" id="6719692">IP</span><span class="op" id="6719694">:</span>&nbsp;<span class="ident" id="6719696">ParseIP</span><span class="op" id="6719703">(</span><span class="string" id="6719704">&#34;ff01::114&#34;</span><span class="op" id="6719715">)</span><span class="op" id="6719716">,</span>&nbsp;<span class="ident" id="6719718">Port</span><span class="op" id="6719722">:</span>&nbsp;<span class="num" id="6719724">12345</span><span class="op" id="6719729">}</span><span class="op" id="6719730">}</span><span class="op" id="6719731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719734">{</span><span class="string" id="6719735">&#34;udp6&#34;</span><span class="op" id="6719741">,</span>&nbsp;<span class="op" id="6719743">&amp;</span><span class="ident" id="6719744">UDPAddr</span><span class="op" id="6719751">{</span><span class="ident" id="6719752">IP</span><span class="op" id="6719754">:</span>&nbsp;<span class="ident" id="6719756">ParseIP</span><span class="op" id="6719763">(</span><span class="string" id="6719764">&#34;ff02::114&#34;</span><span class="op" id="6719775">)</span><span class="op" id="6719776">,</span>&nbsp;<span class="ident" id="6719778">Port</span><span class="op" id="6719782">:</span>&nbsp;<span class="num" id="6719784">12345</span><span class="op" id="6719789">}</span><span class="op" id="6719790">}</span><span class="op" id="6719791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719794">{</span><span class="string" id="6719795">&#34;udp6&#34;</span><span class="op" id="6719801">,</span>&nbsp;<span class="op" id="6719803">&amp;</span><span class="ident" id="6719804">UDPAddr</span><span class="op" id="6719811">{</span><span class="ident" id="6719812">IP</span><span class="op" id="6719814">:</span>&nbsp;<span class="ident" id="6719816">ParseIP</span><span class="op" id="6719823">(</span><span class="string" id="6719824">&#34;ff04::114&#34;</span><span class="op" id="6719835">)</span><span class="op" id="6719836">,</span>&nbsp;<span class="ident" id="6719838">Port</span><span class="op" id="6719842">:</span>&nbsp;<span class="num" id="6719844">12345</span><span class="op" id="6719849">}</span><span class="op" id="6719850">}</span><span class="op" id="6719851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719854">{</span><span class="string" id="6719855">&#34;udp6&#34;</span><span class="op" id="6719861">,</span>&nbsp;<span class="op" id="6719863">&amp;</span><span class="ident" id="6719864">UDPAddr</span><span class="op" id="6719871">{</span><span class="ident" id="6719872">IP</span><span class="op" id="6719874">:</span>&nbsp;<span class="ident" id="6719876">ParseIP</span><span class="op" id="6719883">(</span><span class="string" id="6719884">&#34;ff05::114&#34;</span><span class="op" id="6719895">)</span><span class="op" id="6719896">,</span>&nbsp;<span class="ident" id="6719898">Port</span><span class="op" id="6719902">:</span>&nbsp;<span class="num" id="6719904">12345</span><span class="op" id="6719909">}</span><span class="op" id="6719910">}</span><span class="op" id="6719911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719914">{</span><span class="string" id="6719915">&#34;udp6&#34;</span><span class="op" id="6719921">,</span>&nbsp;<span class="op" id="6719923">&amp;</span><span class="ident" id="6719924">UDPAddr</span><span class="op" id="6719931">{</span><span class="ident" id="6719932">IP</span><span class="op" id="6719934">:</span>&nbsp;<span class="ident" id="6719936">ParseIP</span><span class="op" id="6719943">(</span><span class="string" id="6719944">&#34;ff08::114&#34;</span><span class="op" id="6719955">)</span><span class="op" id="6719956">,</span>&nbsp;<span class="ident" id="6719958">Port</span><span class="op" id="6719962">:</span>&nbsp;<span class="num" id="6719964">12345</span><span class="op" id="6719969">}</span><span class="op" id="6719970">}</span><span class="op" id="6719971">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719974">{</span><span class="string" id="6719975">&#34;udp6&#34;</span><span class="op" id="6719981">,</span>&nbsp;<span class="op" id="6719983">&amp;</span><span class="ident" id="6719984">UDPAddr</span><span class="op" id="6719991">{</span><span class="ident" id="6719992">IP</span><span class="op" id="6719994">:</span>&nbsp;<span class="ident" id="6719996">ParseIP</span><span class="op" id="6720003">(</span><span class="string" id="6720004">&#34;ff0e::114&#34;</span><span class="op" id="6720015">)</span><span class="op" id="6720016">,</span>&nbsp;<span class="ident" id="6720018">Port</span><span class="op" id="6720022">:</span>&nbsp;<span class="num" id="6720024">12345</span><span class="op" id="6720029">}</span><span class="op" id="6720030">}</span><span class="op" id="6720031">,</span><br>
<span class="lineno"></span><span class="op" id="6720033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6720036">//&nbsp;TestIPv6MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6720106">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">95</span><span class="comment" id="6720177">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="6720186">func</span>&nbsp;<span class="ident" id="6720191">TestIPv6MulticastListener</span><span class="op" id="6720216">(</span><span class="ident" id="6720217">t</span>&nbsp;<span class="op" id="6720219">*</span><span class="ident" id="6720220">testing</span><span class="op" id="6720227">.</span><span class="ident" id="6720228">T</span><span class="op" id="6720229">)</span>&nbsp;<span class="op" id="6720231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720234">switch</span>&nbsp;<span class="ident" id="6720241">runtime</span><span class="op" id="6720248">.</span><span class="ident" id="6720249">GOOS</span>&nbsp;<span class="op" id="6720254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720257">case</span>&nbsp;<span class="string" id="6720262">&#34;plan9&#34;</span><span class="op" id="6720269">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720273">t</span><span class="op" id="6720274">.</span><span class="ident" id="6720275">Skipf</span><span class="op" id="6720280">(</span><span class="string" id="6720281">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6720302">,</span>&nbsp;<span class="ident" id="6720304">runtime</span><span class="op" id="6720311">.</span><span class="ident" id="6720312">GOOS</span><span class="op" id="6720316">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720319">case</span>&nbsp;<span class="string" id="6720324">&#34;solaris&#34;</span><span class="op" id="6720333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720337">t</span><span class="op" id="6720338">.</span><span class="ident" id="6720339">Skipf</span><span class="op" id="6720344">(</span><span class="string" id="6720345">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="6720387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720393">if</span>&nbsp;<span class="op" id="6720396">!</span><span class="ident" id="6720397">supportsIPv6</span>&nbsp;<span class="op" id="6720410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720414">t</span><span class="op" id="6720415">.</span><span class="ident" id="6720416">Skip</span><span class="op" id="6720420">(</span><span class="string" id="6720421">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6720444">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720450">if</span>&nbsp;<span class="ident" id="6720453">os</span><span class="op" id="6720455">.</span><span class="ident" id="6720456">Getuid</span><span class="op" id="6720462">(</span><span class="op" id="6720463">)</span>&nbsp;<span class="op" id="6720465">!=</span>&nbsp;<span class="num" id="6720468">0</span>&nbsp;<span class="op" id="6720470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720474">t</span><span class="op" id="6720475">.</span><span class="ident" id="6720476">Skip</span><span class="op" id="6720480">(</span><span class="string" id="6720481">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="6720510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720517">closer</span>&nbsp;<span class="op" id="6720524">:=</span>&nbsp;<span class="keyword" id="6720527">func</span><span class="op" id="6720531">(</span><span class="ident" id="6720532">cs</span>&nbsp;<span class="op" id="6720535">[</span><span class="op" id="6720536">]</span><span class="op" id="6720537">*</span><span class="ident" id="6720538">UDPConn</span><span class="op" id="6720545">)</span>&nbsp;<span class="op" id="6720547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720551">for</span>&nbsp;<span class="ident" id="6720555">_</span><span class="op" id="6720556">,</span>&nbsp;<span class="ident" id="6720558">c</span>&nbsp;<span class="op" id="6720560">:=</span>&nbsp;<span class="keyword" id="6720563">range</span>&nbsp;<span class="ident" id="6720569">cs</span>&nbsp;<span class="op" id="6720572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720577">if</span>&nbsp;<span class="ident" id="6720580">c</span>&nbsp;<span class="op" id="6720582">!=</span>&nbsp;<span class="builtintype" id="6720585">nil</span>&nbsp;<span class="op" id="6720589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6720595">c</span><span class="op" id="6720596">.</span><span class="ident" id="6720597">Close</span><span class="op" id="6720602">(</span><span class="op" id="6720603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720608">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720619">for</span>&nbsp;<span class="ident" id="6720623">_</span><span class="op" id="6720624">,</span>&nbsp;<span class="ident" id="6720626">ifi</span>&nbsp;<span class="op" id="6720630">:=</span>&nbsp;<span class="keyword" id="6720633">range</span>&nbsp;<span class="op" id="6720639">[</span><span class="op" id="6720640">]</span><span class="op" id="6720641">*</span><span class="ident" id="6720642">Interface</span><span class="op" id="6720651">{</span><span class="ident" id="6720652">loopbackInterface</span><span class="op" id="6720669">(</span><span class="op" id="6720670">)</span><span class="op" id="6720671">,</span>&nbsp;<span class="builtintype" id="6720673">nil</span><span class="op" id="6720676">}</span>&nbsp;<span class="op" id="6720678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6720682">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6720738">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6720791">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6720841">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6720893">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720911">if</span>&nbsp;<span class="ident" id="6720914">ifi</span>&nbsp;<span class="op" id="6720918">==</span>&nbsp;<span class="builtintype" id="6720921">nil</span>&nbsp;<span class="op" id="6720925">&amp;&amp;</span>&nbsp;<span class="op" id="6720928">(</span><span class="op" id="6720929">!</span><span class="op" id="6720930">*</span><span class="ident" id="6720931">testExternal</span>&nbsp;<span class="op" id="6720944">||</span>&nbsp;<span class="op" id="6720947">!</span><span class="op" id="6720948">*</span><span class="ident" id="6720949">testIPv6</span><span class="op" id="6720957">)</span>&nbsp;<span class="op" id="6720959">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720964">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6720975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6720979">for</span>&nbsp;<span class="ident" id="6720983">_</span><span class="op" id="6720984">,</span>&nbsp;<span class="ident" id="6720986">tt</span>&nbsp;<span class="op" id="6720989">:=</span>&nbsp;<span class="keyword" id="6720992">range</span>&nbsp;<span class="ident" id="6720998">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="6721025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721030">var</span>&nbsp;<span class="ident" id="6721034">err</span>&nbsp;<span class="builtintype" id="6721038">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721047">cs</span>&nbsp;<span class="op" id="6721050">:=</span>&nbsp;<span class="builtinfunc" id="6721053">make</span><span class="op" id="6721057">(</span><span class="op" id="6721058">[</span><span class="op" id="6721059">]</span><span class="op" id="6721060">*</span><span class="ident" id="6721061">UDPConn</span><span class="op" id="6721068">,</span>&nbsp;<span class="num" id="6721070">2</span><span class="op" id="6721071">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721076">if</span>&nbsp;<span class="ident" id="6721079">cs</span><span class="op" id="6721081">[</span><span class="num" id="6721082">0</span><span class="op" id="6721083">]</span><span class="op" id="6721084">,</span>&nbsp;<span class="ident" id="6721086">err</span>&nbsp;<span class="op" id="6721090">=</span>&nbsp;<span class="ident" id="6721092">ListenMulticastUDP</span><span class="op" id="6721110">(</span><span class="ident" id="6721111">tt</span><span class="op" id="6721113">.</span><span class="ident" id="6721114">net</span><span class="op" id="6721117">,</span>&nbsp;<span class="ident" id="6721119">ifi</span><span class="op" id="6721122">,</span>&nbsp;<span class="ident" id="6721124">tt</span><span class="op" id="6721126">.</span><span class="ident" id="6721127">gaddr</span><span class="op" id="6721132">)</span><span class="op" id="6721133">;</span>&nbsp;<span class="ident" id="6721135">err</span>&nbsp;<span class="op" id="6721139">!=</span>&nbsp;<span class="builtintype" id="6721142">nil</span>&nbsp;<span class="op" id="6721146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721152">t</span><span class="op" id="6721153">.</span><span class="ident" id="6721154">Fatalf</span><span class="op" id="6721160">(</span><span class="string" id="6721161">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6721204">,</span>&nbsp;<span class="ident" id="6721206">ifi</span><span class="op" id="6721209">,</span>&nbsp;<span class="ident" id="6721211">err</span><span class="op" id="6721214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721224">if</span>&nbsp;<span class="ident" id="6721227">err</span>&nbsp;<span class="op" id="6721231">:=</span>&nbsp;<span class="ident" id="6721234">checkMulticastListener</span><span class="op" id="6721256">(</span><span class="ident" id="6721257">cs</span><span class="op" id="6721259">[</span><span class="num" id="6721260">0</span><span class="op" id="6721261">]</span><span class="op" id="6721262">,</span>&nbsp;<span class="ident" id="6721264">tt</span><span class="op" id="6721266">.</span><span class="ident" id="6721267">gaddr</span><span class="op" id="6721272">.</span><span class="ident" id="6721273">IP</span><span class="op" id="6721275">)</span><span class="op" id="6721276">;</span>&nbsp;<span class="ident" id="6721278">err</span>&nbsp;<span class="op" id="6721282">!=</span>&nbsp;<span class="builtintype" id="6721285">nil</span>&nbsp;<span class="op" id="6721289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721295">closer</span><span class="op" id="6721301">(</span><span class="ident" id="6721302">cs</span><span class="op" id="6721304">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721310">t</span><span class="op" id="6721311">.</span><span class="ident" id="6721312">Fatal</span><span class="op" id="6721317">(</span><span class="ident" id="6721318">err</span><span class="op" id="6721321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721331">if</span>&nbsp;<span class="ident" id="6721334">cs</span><span class="op" id="6721336">[</span><span class="num" id="6721337">1</span><span class="op" id="6721338">]</span><span class="op" id="6721339">,</span>&nbsp;<span class="ident" id="6721341">err</span>&nbsp;<span class="op" id="6721345">=</span>&nbsp;<span class="ident" id="6721347">ListenMulticastUDP</span><span class="op" id="6721365">(</span><span class="ident" id="6721366">tt</span><span class="op" id="6721368">.</span><span class="ident" id="6721369">net</span><span class="op" id="6721372">,</span>&nbsp;<span class="ident" id="6721374">ifi</span><span class="op" id="6721377">,</span>&nbsp;<span class="ident" id="6721379">tt</span><span class="op" id="6721381">.</span><span class="ident" id="6721382">gaddr</span><span class="op" id="6721387">)</span><span class="op" id="6721388">;</span>&nbsp;<span class="ident" id="6721390">err</span>&nbsp;<span class="op" id="6721394">!=</span>&nbsp;<span class="builtintype" id="6721397">nil</span>&nbsp;<span class="op" id="6721401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721407">closer</span><span class="op" id="6721413">(</span><span class="ident" id="6721414">cs</span><span class="op" id="6721416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721422">t</span><span class="op" id="6721423">.</span><span class="ident" id="6721424">Fatalf</span><span class="op" id="6721430">(</span><span class="string" id="6721431">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6721475">,</span>&nbsp;<span class="ident" id="6721477">ifi</span><span class="op" id="6721480">,</span>&nbsp;<span class="ident" id="6721482">err</span><span class="op" id="6721485">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721495">if</span>&nbsp;<span class="ident" id="6721498">err</span>&nbsp;<span class="op" id="6721502">:=</span>&nbsp;<span class="ident" id="6721505">checkMulticastListener</span><span class="op" id="6721527">(</span><span class="ident" id="6721528">cs</span><span class="op" id="6721530">[</span><span class="num" id="6721531">1</span><span class="op" id="6721532">]</span><span class="op" id="6721533">,</span>&nbsp;<span class="ident" id="6721535">tt</span><span class="op" id="6721537">.</span><span class="ident" id="6721538">gaddr</span><span class="op" id="6721543">.</span><span class="ident" id="6721544">IP</span><span class="op" id="6721546">)</span><span class="op" id="6721547">;</span>&nbsp;<span class="ident" id="6721549">err</span>&nbsp;<span class="op" id="6721553">!=</span>&nbsp;<span class="builtintype" id="6721556">nil</span>&nbsp;<span class="op" id="6721560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721566">closer</span><span class="op" id="6721572">(</span><span class="ident" id="6721573">cs</span><span class="op" id="6721575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721581">t</span><span class="op" id="6721582">.</span><span class="ident" id="6721583">Fatal</span><span class="op" id="6721588">(</span><span class="ident" id="6721589">err</span><span class="op" id="6721592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721597">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721602">closer</span><span class="op" id="6721608">(</span><span class="ident" id="6721609">cs</span><span class="op" id="6721611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721618">}</span><br>
<span class="lineno"></span><span class="op" id="6721620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="6721623">func</span>&nbsp;<span class="ident" id="6721628">checkMulticastListener</span><span class="op" id="6721650">(</span><span class="ident" id="6721651">c</span>&nbsp;<span class="op" id="6721653">*</span><span class="ident" id="6721654">UDPConn</span><span class="op" id="6721661">,</span>&nbsp;<span class="ident" id="6721663">ip</span>&nbsp;<span class="ident" id="6721666">IP</span><span class="op" id="6721668">)</span>&nbsp;<span class="builtintype" id="6721670">error</span>&nbsp;<span class="op" id="6721676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721679">if</span>&nbsp;<span class="ident" id="6721682">ok</span><span class="op" id="6721684">,</span>&nbsp;<span class="ident" id="6721686">err</span>&nbsp;<span class="op" id="6721690">:=</span>&nbsp;<span class="ident" id="6721693">multicastRIBContains</span><span class="op" id="6721713">(</span><span class="ident" id="6721714">ip</span><span class="op" id="6721716">)</span><span class="op" id="6721717">;</span>&nbsp;<span class="ident" id="6721719">err</span>&nbsp;<span class="op" id="6721723">!=</span>&nbsp;<span class="builtintype" id="6721726">nil</span>&nbsp;<span class="op" id="6721730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721734">return</span>&nbsp;<span class="ident" id="6721741">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721746">}</span>&nbsp;<span class="keyword" id="6721748">else</span>&nbsp;<span class="keyword" id="6721753">if</span>&nbsp;<span class="op" id="6721756">!</span><span class="ident" id="6721757">ok</span>&nbsp;<span class="op" id="6721760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721764">return</span>&nbsp;<span class="ident" id="6721771">fmt</span><span class="op" id="6721774">.</span><span class="ident" id="6721775">Errorf</span><span class="op" id="6721781">(</span><span class="string" id="6721782">&#34;%q&nbsp;not&nbsp;found&nbsp;in&nbsp;multicast&nbsp;RIB&#34;</span><span class="op" id="6721813">,</span>&nbsp;<span class="ident" id="6721815">ip</span><span class="op" id="6721817">.</span><span class="ident" id="6721818">String</span><span class="op" id="6721824">(</span><span class="op" id="6721825">)</span><span class="op" id="6721826">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6721832">la</span>&nbsp;<span class="op" id="6721835">:=</span>&nbsp;<span class="ident" id="6721838">c</span><span class="op" id="6721839">.</span><span class="ident" id="6721840">LocalAddr</span><span class="op" id="6721849">(</span><span class="op" id="6721850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721853">if</span>&nbsp;<span class="ident" id="6721856">la</span><span class="op" id="6721858">,</span>&nbsp;<span class="ident" id="6721860">ok</span>&nbsp;<span class="op" id="6721863">:=</span>&nbsp;<span class="ident" id="6721866">la</span><span class="op" id="6721868">.</span><span class="op" id="6721869">(</span><span class="op" id="6721870">*</span><span class="ident" id="6721871">UDPAddr</span><span class="op" id="6721878">)</span><span class="op" id="6721879">;</span>&nbsp;<span class="op" id="6721881">!</span><span class="ident" id="6721882">ok</span>&nbsp;<span class="op" id="6721885">||</span>&nbsp;<span class="ident" id="6721888">la</span><span class="op" id="6721890">.</span><span class="ident" id="6721891">Port</span>&nbsp;<span class="op" id="6721896">==</span>&nbsp;<span class="num" id="6721899">0</span>&nbsp;<span class="op" id="6721901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721905">return</span>&nbsp;<span class="ident" id="6721912">fmt</span><span class="op" id="6721915">.</span><span class="ident" id="6721916">Errorf</span><span class="op" id="6721922">(</span><span class="string" id="6721923">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;non-zero&nbsp;port&nbsp;number&#34;</span><span class="op" id="6721984">,</span>&nbsp;<span class="ident" id="6721986">la</span><span class="op" id="6721988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6721991">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6721994">return</span>&nbsp;<span class="builtintype" id="6722001">nil</span><br>
<span class="lineno"></span><span class="op" id="6722005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6722008">func</span>&nbsp;<span class="ident" id="6722013">multicastRIBContains</span><span class="op" id="6722033">(</span><span class="ident" id="6722034">ip</span>&nbsp;<span class="ident" id="6722037">IP</span><span class="op" id="6722039">)</span>&nbsp;<span class="op" id="6722041">(</span><span class="builtintype" id="6722042">bool</span><span class="op" id="6722046">,</span>&nbsp;<span class="builtintype" id="6722048">error</span><span class="op" id="6722053">)</span>&nbsp;<span class="op" id="6722055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722058">switch</span>&nbsp;<span class="ident" id="6722065">runtime</span><span class="op" id="6722072">.</span><span class="ident" id="6722073">GOOS</span>&nbsp;<span class="op" id="6722078">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722081">case</span>&nbsp;<span class="string" id="6722086">&#34;dragonfly&#34;</span><span class="op" id="6722097">,</span>&nbsp;<span class="string" id="6722099">&#34;netbsd&#34;</span><span class="op" id="6722107">,</span>&nbsp;<span class="string" id="6722109">&#34;openbsd&#34;</span><span class="op" id="6722118">,</span>&nbsp;<span class="string" id="6722120">&#34;plan9&#34;</span><span class="op" id="6722127">,</span>&nbsp;<span class="string" id="6722129">&#34;solaris&#34;</span><span class="op" id="6722138">,</span>&nbsp;<span class="string" id="6722140">&#34;windows&#34;</span><span class="op" id="6722149">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722153">return</span>&nbsp;<span class="builtintype" id="6722160">true</span><span class="op" id="6722164">,</span>&nbsp;<span class="builtintype" id="6722166">nil</span>&nbsp;<span class="comment" id="6722170">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722194">case</span>&nbsp;<span class="string" id="6722199">&#34;linux&#34;</span><span class="op" id="6722206">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722210">if</span>&nbsp;<span class="ident" id="6722213">runtime</span><span class="op" id="6722220">.</span><span class="ident" id="6722221">GOARCH</span>&nbsp;<span class="op" id="6722228">==</span>&nbsp;<span class="string" id="6722231">&#34;arm&#34;</span>&nbsp;<span class="op" id="6722237">||</span>&nbsp;<span class="ident" id="6722240">runtime</span><span class="op" id="6722247">.</span><span class="ident" id="6722248">GOARCH</span>&nbsp;<span class="op" id="6722255">==</span>&nbsp;<span class="string" id="6722258">&#34;alpha&#34;</span>&nbsp;<span class="op" id="6722266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722271">return</span>&nbsp;<span class="builtintype" id="6722278">true</span><span class="op" id="6722282">,</span>&nbsp;<span class="builtintype" id="6722284">nil</span>&nbsp;<span class="comment" id="6722288">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722319">ift</span><span class="op" id="6722322">,</span>&nbsp;<span class="ident" id="6722324">err</span>&nbsp;<span class="op" id="6722328">:=</span>&nbsp;<span class="ident" id="6722331">Interfaces</span><span class="op" id="6722341">(</span><span class="op" id="6722342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722345">if</span>&nbsp;<span class="ident" id="6722348">err</span>&nbsp;<span class="op" id="6722352">!=</span>&nbsp;<span class="builtintype" id="6722355">nil</span>&nbsp;<span class="op" id="6722359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722363">return</span>&nbsp;<span class="builtintype" id="6722370">false</span><span class="op" id="6722375">,</span>&nbsp;<span class="ident" id="6722377">err</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722385">for</span>&nbsp;<span class="ident" id="6722389">_</span><span class="op" id="6722390">,</span>&nbsp;<span class="ident" id="6722392">ifi</span>&nbsp;<span class="op" id="6722396">:=</span>&nbsp;<span class="keyword" id="6722399">range</span>&nbsp;<span class="ident" id="6722405">ift</span>&nbsp;<span class="op" id="6722409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6722413">ifmat</span><span class="op" id="6722418">,</span>&nbsp;<span class="ident" id="6722420">err</span>&nbsp;<span class="op" id="6722424">:=</span>&nbsp;<span class="ident" id="6722427">ifi</span><span class="op" id="6722430">.</span><span class="ident" id="6722431">MulticastAddrs</span><span class="op" id="6722445">(</span><span class="op" id="6722446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722450">if</span>&nbsp;<span class="ident" id="6722453">err</span>&nbsp;<span class="op" id="6722457">!=</span>&nbsp;<span class="builtintype" id="6722460">nil</span>&nbsp;<span class="op" id="6722464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722469">return</span>&nbsp;<span class="builtintype" id="6722476">false</span><span class="op" id="6722481">,</span>&nbsp;<span class="ident" id="6722483">err</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722493">for</span>&nbsp;<span class="ident" id="6722497">_</span><span class="op" id="6722498">,</span>&nbsp;<span class="ident" id="6722500">ifma</span>&nbsp;<span class="op" id="6722505">:=</span>&nbsp;<span class="keyword" id="6722508">range</span>&nbsp;<span class="ident" id="6722514">ifmat</span>&nbsp;<span class="op" id="6722520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722525">if</span>&nbsp;<span class="ident" id="6722528">ifma</span><span class="op" id="6722532">.</span><span class="op" id="6722533">(</span><span class="op" id="6722534">*</span><span class="ident" id="6722535">IPAddr</span><span class="op" id="6722541">)</span><span class="op" id="6722542">.</span><span class="ident" id="6722543">IP</span><span class="op" id="6722545">.</span><span class="ident" id="6722546">Equal</span><span class="op" id="6722551">(</span><span class="ident" id="6722552">ip</span><span class="op" id="6722554">)</span>&nbsp;<span class="op" id="6722556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722562">return</span>&nbsp;<span class="builtintype" id="6722569">true</span><span class="op" id="6722573">,</span>&nbsp;<span class="builtintype" id="6722575">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722582">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6722589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6722592">return</span>&nbsp;<span class="builtintype" id="6722599">false</span><span class="op" id="6722604">,</span>&nbsp;<span class="builtintype" id="6722606">nil</span><br>
<span class="lineno"></span><span class="op" id="6722610">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
