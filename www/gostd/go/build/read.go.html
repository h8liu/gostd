<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html" class="current">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4956330">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4956386">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4956440">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4956491">package</span>&nbsp;<span class="ident" id="4956499">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4956506">import</span>&nbsp;<span class="op" id="4956513">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4956516">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4956525">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4956535">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4956540">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4956543">type</span>&nbsp;<span class="ident" id="4956548">importReader</span>&nbsp;<span class="keyword" id="4956561">struct</span>&nbsp;<span class="op" id="4956568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4956571">b</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4956576">*</span><span class="ident" id="4956577">bufio</span><span class="op" id="4956582">.</span><span class="ident" id="4956583">Reader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4956591">buf</span>&nbsp;&nbsp;<span class="op" id="4956596">[</span><span class="op" id="4956597">]</span><span class="builtintype" id="4956598">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4956604">peek</span>&nbsp;<span class="builtintype" id="4956609">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4956615">err</span>&nbsp;&nbsp;<span class="builtintype" id="4956620">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4956627">eof</span>&nbsp;&nbsp;<span class="builtintype" id="4956632">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4956638">nerr</span>&nbsp;<span class="builtintype" id="4956643">int</span><br>
<span class="lineno">20</span><span class="op" id="4956647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4956650">func</span>&nbsp;<span class="ident" id="4956655">isIdent</span><span class="op" id="4956662">(</span><span class="ident" id="4956663">c</span>&nbsp;<span class="builtintype" id="4956665">byte</span><span class="op" id="4956669">)</span>&nbsp;<span class="builtintype" id="4956671">bool</span>&nbsp;<span class="op" id="4956676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4956679">return</span>&nbsp;<span class="string" id="4956686">&#39;A&#39;</span>&nbsp;<span class="op" id="4956690">&lt;=</span>&nbsp;<span class="ident" id="4956693">c</span>&nbsp;<span class="op" id="4956695">&amp;&amp;</span>&nbsp;<span class="ident" id="4956698">c</span>&nbsp;<span class="op" id="4956700">&lt;=</span>&nbsp;<span class="string" id="4956703">&#39;Z&#39;</span>&nbsp;<span class="op" id="4956707">||</span>&nbsp;<span class="string" id="4956710">&#39;a&#39;</span>&nbsp;<span class="op" id="4956714">&lt;=</span>&nbsp;<span class="ident" id="4956717">c</span>&nbsp;<span class="op" id="4956719">&amp;&amp;</span>&nbsp;<span class="ident" id="4956722">c</span>&nbsp;<span class="op" id="4956724">&lt;=</span>&nbsp;<span class="string" id="4956727">&#39;z&#39;</span>&nbsp;<span class="op" id="4956731">||</span>&nbsp;<span class="string" id="4956734">&#39;0&#39;</span>&nbsp;<span class="op" id="4956738">&lt;=</span>&nbsp;<span class="ident" id="4956741">c</span>&nbsp;<span class="op" id="4956743">&amp;&amp;</span>&nbsp;<span class="ident" id="4956746">c</span>&nbsp;<span class="op" id="4956748">&lt;=</span>&nbsp;<span class="string" id="4956751">&#39;9&#39;</span>&nbsp;<span class="op" id="4956755">||</span>&nbsp;<span class="ident" id="4956758">c</span>&nbsp;<span class="op" id="4956760">==</span>&nbsp;<span class="string" id="4956763">&#39;_&#39;</span>&nbsp;<span class="op" id="4956767">||</span>&nbsp;<span class="ident" id="4956770">c</span>&nbsp;<span class="op" id="4956772">&gt;=</span>&nbsp;<span class="num" id="4956775">0x80</span><br>
<span class="lineno"></span><span class="op" id="4956780">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="4956783">var</span>&nbsp;<span class="op" id="4956787">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4956790">errSyntax</span>&nbsp;<span class="op" id="4956800">=</span>&nbsp;<span class="ident" id="4956802">errors</span><span class="op" id="4956808">.</span><span class="ident" id="4956809">New</span><span class="op" id="4956812">(</span><span class="string" id="4956813">&#34;syntax&nbsp;error&#34;</span><span class="op" id="4956827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4956830">errNUL</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4956840">=</span>&nbsp;<span class="ident" id="4956842">errors</span><span class="op" id="4956848">.</span><span class="ident" id="4956849">New</span><span class="op" id="4956852">(</span><span class="string" id="4956853">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="4956878">)</span><br>
<span class="lineno"></span><span class="op" id="4956880">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="4956883">//&nbsp;syntaxError&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;but&nbsp;only&nbsp;if&nbsp;an&nbsp;I/O&nbsp;error&nbsp;has&nbsp;not&nbsp;already&nbsp;been&nbsp;recorded.</span><br>
<span class="lineno"></span><span class="keyword" id="4956978">func</span>&nbsp;<span class="op" id="4956983">(</span><span class="ident" id="4956984">r</span>&nbsp;<span class="op" id="4956986">*</span><span class="ident" id="4956987">importReader</span><span class="op" id="4956999">)</span>&nbsp;<span class="ident" id="4957001">syntaxError</span><span class="op" id="4957012">(</span><span class="op" id="4957013">)</span>&nbsp;<span class="op" id="4957015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4957018">if</span>&nbsp;<span class="ident" id="4957021">r</span><span class="op" id="4957022">.</span><span class="ident" id="4957023">err</span>&nbsp;<span class="op" id="4957027">==</span>&nbsp;<span class="builtintype" id="4957030">nil</span>&nbsp;<span class="op" id="4957034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4957038">r</span><span class="op" id="4957039">.</span><span class="ident" id="4957040">err</span>&nbsp;<span class="op" id="4957044">=</span>&nbsp;<span class="ident" id="4957046">errSyntax</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4957057">}</span><br>
<span class="lineno"></span><span class="op" id="4957059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4957062">//&nbsp;readByte&nbsp;reads&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;saves&nbsp;it&nbsp;in&nbsp;buf,&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="4957143">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;readByte&nbsp;records&nbsp;the&nbsp;error&nbsp;in&nbsp;r.err&nbsp;and&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="keyword" id="4957217">func</span>&nbsp;<span class="op" id="4957222">(</span><span class="ident" id="4957223">r</span>&nbsp;<span class="op" id="4957225">*</span><span class="ident" id="4957226">importReader</span><span class="op" id="4957238">)</span>&nbsp;<span class="ident" id="4957240">readByte</span><span class="op" id="4957248">(</span><span class="op" id="4957249">)</span>&nbsp;<span class="builtintype" id="4957251">byte</span>&nbsp;<span class="op" id="4957256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4957259">c</span><span class="op" id="4957260">,</span>&nbsp;<span class="ident" id="4957262">err</span>&nbsp;<span class="op" id="4957266">:=</span>&nbsp;<span class="ident" id="4957269">r</span><span class="op" id="4957270">.</span><span class="ident" id="4957271">b</span><span class="op" id="4957272">.</span><span class="ident" id="4957273">ReadByte</span><span class="op" id="4957281">(</span><span class="op" id="4957282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4957285">if</span>&nbsp;<span class="ident" id="4957288">err</span>&nbsp;<span class="op" id="4957292">==</span>&nbsp;<span class="builtintype" id="4957295">nil</span>&nbsp;<span class="op" id="4957299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4957303">r</span><span class="op" id="4957304">.</span><span class="ident" id="4957305">buf</span>&nbsp;<span class="op" id="4957309">=</span>&nbsp;<span class="builtinfunc" id="4957311">append</span><span class="op" id="4957317">(</span><span class="ident" id="4957318">r</span><span class="op" id="4957319">.</span><span class="ident" id="4957320">buf</span><span class="op" id="4957323">,</span>&nbsp;<span class="ident" id="4957325">c</span><span class="op" id="4957326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4957330">if</span>&nbsp;<span class="ident" id="4957333">c</span>&nbsp;<span class="op" id="4957335">==</span>&nbsp;<span class="num" id="4957338">0</span>&nbsp;<span class="op" id="4957340">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4957345">err</span>&nbsp;<span class="op" id="4957349">=</span>&nbsp;<span class="ident" id="4957351">errNUL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4957360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4957363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4957366">if</span>&nbsp;<span class="ident" id="4957369">err</span>&nbsp;<span class="op" id="4957373">!=</span>&nbsp;<span class="builtintype" id="4957376">nil</span>&nbsp;<span class="op" id="4957380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4957384">if</span>&nbsp;<span class="ident" id="4957387">err</span>&nbsp;<span class="op" id="4957391">==</span>&nbsp;<span class="ident" id="4957394">io</span><span class="op" id="4957396">.</span><span class="ident" id="4957397">EOF</span>&nbsp;<span class="op" id="4957401">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4957406">r</span><span class="op" id="4957407">.</span><span class="ident" id="4957408">eof</span>&nbsp;<span class="op" id="4957412">=</span>&nbsp;<span class="builtintype" id="4957414">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4957421">}</span>&nbsp;<span class="keyword" id="4957423">else</span>&nbsp;<span class="keyword" id="4957428">if</span>&nbsp;<span class="ident" id="4957431">r</span><span class="op" id="4957432">.</span><span class="ident" id="4957433">err</span>&nbsp;<span class="op" id="4957437">==</span>&nbsp;<span class="builtintype" id="4957440">nil</span>&nbsp;<span class="op" id="4957444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4957449">r</span><span class="op" id="4957450">.</span><span class="ident" id="4957451">err</span>&nbsp;<span class="op" id="4957455">=</span>&nbsp;<span class="ident" id="4957457">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4957463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4957467">c</span>&nbsp;<span class="op" id="4957469">=</span>&nbsp;<span class="num" id="4957471">0</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4957474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4957477">return</span>&nbsp;<span class="ident" id="4957484">c</span><br>
<span class="lineno"></span><span class="op" id="4957486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4957489">//&nbsp;peekByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input&nbsp;reader&nbsp;but&nbsp;does&nbsp;not&nbsp;advance&nbsp;beyond&nbsp;it.</span><br>
<span class="lineno">60</span><span class="comment" id="4957577">//&nbsp;If&nbsp;skipSpace&nbsp;is&nbsp;set,&nbsp;peekByte&nbsp;skips&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;comments.</span><br>
<span class="lineno"></span><span class="keyword" id="4957645">func</span>&nbsp;<span class="op" id="4957650">(</span><span class="ident" id="4957651">r</span>&nbsp;<span class="op" id="4957653">*</span><span class="ident" id="4957654">importReader</span><span class="op" id="4957666">)</span>&nbsp;<span class="ident" id="4957668">peekByte</span><span class="op" id="4957676">(</span><span class="ident" id="4957677">skipSpace</span>&nbsp;<span class="builtintype" id="4957687">bool</span><span class="op" id="4957691">)</span>&nbsp;<span class="builtintype" id="4957693">byte</span>&nbsp;<span class="op" id="4957698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4957701">if</span>&nbsp;<span class="ident" id="4957704">r</span><span class="op" id="4957705">.</span><span class="ident" id="4957706">err</span>&nbsp;<span class="op" id="4957710">!=</span>&nbsp;<span class="builtintype" id="4957713">nil</span>&nbsp;<span class="op" id="4957717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4957721">if</span>&nbsp;<span class="ident" id="4957724">r</span><span class="op" id="4957725">.</span><span class="ident" id="4957726">nerr</span><span class="op" id="4957730">++</span><span class="op" id="4957732">;</span>&nbsp;<span class="ident" id="4957734">r</span><span class="op" id="4957735">.</span><span class="ident" id="4957736">nerr</span>&nbsp;<span class="op" id="4957741">&gt;</span>&nbsp;<span class="num" id="4957743">10000</span>&nbsp;<span class="op" id="4957749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4957754">panic</span><span class="op" id="4957759">(</span><span class="string" id="4957760">&#34;go/build:&nbsp;import&nbsp;reader&nbsp;looping&#34;</span><span class="op" id="4957793">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4957797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4957801">return</span>&nbsp;<span class="num" id="4957808">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4957811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4957815">//&nbsp;Use&nbsp;r.peek&nbsp;as&nbsp;first&nbsp;input&nbsp;byte.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4957851">//&nbsp;Don&#39;t&nbsp;just&nbsp;return&nbsp;r.peek&nbsp;here:&nbsp;it&nbsp;might&nbsp;have&nbsp;been&nbsp;left&nbsp;by&nbsp;peekByte(false)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4957929">//&nbsp;and&nbsp;this&nbsp;might&nbsp;be&nbsp;peekByte(true).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4957967">c</span>&nbsp;<span class="op" id="4957969">:=</span>&nbsp;<span class="ident" id="4957972">r</span><span class="op" id="4957973">.</span><span class="ident" id="4957974">peek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4957980">if</span>&nbsp;<span class="ident" id="4957983">c</span>&nbsp;<span class="op" id="4957985">==</span>&nbsp;<span class="num" id="4957988">0</span>&nbsp;<span class="op" id="4957990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4957994">c</span>&nbsp;<span class="op" id="4957996">=</span>&nbsp;<span class="ident" id="4957998">r</span><span class="op" id="4957999">.</span><span class="ident" id="4958000">readByte</span><span class="op" id="4958008">(</span><span class="op" id="4958009">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958015">for</span>&nbsp;<span class="ident" id="4958019">r</span><span class="op" id="4958020">.</span><span class="ident" id="4958021">err</span>&nbsp;<span class="op" id="4958025">==</span>&nbsp;<span class="builtintype" id="4958028">nil</span>&nbsp;<span class="op" id="4958032">&amp;&amp;</span>&nbsp;<span class="op" id="4958035">!</span><span class="ident" id="4958036">r</span><span class="op" id="4958037">.</span><span class="ident" id="4958038">eof</span>&nbsp;<span class="op" id="4958042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958046">if</span>&nbsp;<span class="ident" id="4958049">skipSpace</span>&nbsp;<span class="op" id="4958059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4958064">//&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;reader,&nbsp;semicolons&nbsp;are&nbsp;never&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4958137">//&nbsp;understand&nbsp;the&nbsp;input&nbsp;and&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958191">switch</span>&nbsp;<span class="ident" id="4958198">c</span>&nbsp;<span class="op" id="4958200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958205">case</span>&nbsp;<span class="string" id="4958210">&#39;&nbsp;&#39;</span><span class="op" id="4958213">,</span>&nbsp;<span class="string" id="4958215">&#39;\f&#39;</span><span class="op" id="4958219">,</span>&nbsp;<span class="string" id="4958221">&#39;\t&#39;</span><span class="op" id="4958225">,</span>&nbsp;<span class="string" id="4958227">&#39;\r&#39;</span><span class="op" id="4958231">,</span>&nbsp;<span class="string" id="4958233">&#39;\n&#39;</span><span class="op" id="4958237">,</span>&nbsp;<span class="string" id="4958239">&#39;;&#39;</span><span class="op" id="4958242">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4958248">c</span>&nbsp;<span class="op" id="4958250">=</span>&nbsp;<span class="ident" id="4958252">r</span><span class="op" id="4958253">.</span><span class="ident" id="4958254">readByte</span><span class="op" id="4958262">(</span><span class="op" id="4958263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958269">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958282">case</span>&nbsp;<span class="string" id="4958287">&#39;/&#39;</span><span class="op" id="4958290">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4958296">c</span>&nbsp;<span class="op" id="4958298">=</span>&nbsp;<span class="ident" id="4958300">r</span><span class="op" id="4958301">.</span><span class="ident" id="4958302">readByte</span><span class="op" id="4958310">(</span><span class="op" id="4958311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958317">if</span>&nbsp;<span class="ident" id="4958320">c</span>&nbsp;<span class="op" id="4958322">==</span>&nbsp;<span class="string" id="4958325">&#39;/&#39;</span>&nbsp;<span class="op" id="4958329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958336">for</span>&nbsp;<span class="ident" id="4958340">c</span>&nbsp;<span class="op" id="4958342">!=</span>&nbsp;<span class="string" id="4958345">&#39;\n&#39;</span>&nbsp;<span class="op" id="4958350">&amp;&amp;</span>&nbsp;<span class="ident" id="4958353">r</span><span class="op" id="4958354">.</span><span class="ident" id="4958355">err</span>&nbsp;<span class="op" id="4958359">==</span>&nbsp;<span class="builtintype" id="4958362">nil</span>&nbsp;<span class="op" id="4958366">&amp;&amp;</span>&nbsp;<span class="op" id="4958369">!</span><span class="ident" id="4958370">r</span><span class="op" id="4958371">.</span><span class="ident" id="4958372">eof</span>&nbsp;<span class="op" id="4958376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4958384">c</span>&nbsp;<span class="op" id="4958386">=</span>&nbsp;<span class="ident" id="4958388">r</span><span class="op" id="4958389">.</span><span class="ident" id="4958390">readByte</span><span class="op" id="4958398">(</span><span class="op" id="4958399">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958412">}</span>&nbsp;<span class="keyword" id="4958414">else</span>&nbsp;<span class="keyword" id="4958419">if</span>&nbsp;<span class="ident" id="4958422">c</span>&nbsp;<span class="op" id="4958424">==</span>&nbsp;<span class="string" id="4958427">&#39;*&#39;</span>&nbsp;<span class="op" id="4958431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958438">var</span>&nbsp;<span class="ident" id="4958442">c1</span>&nbsp;<span class="builtintype" id="4958445">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958455">for</span>&nbsp;<span class="op" id="4958459">(</span><span class="ident" id="4958460">c</span>&nbsp;<span class="op" id="4958462">!=</span>&nbsp;<span class="string" id="4958465">&#39;*&#39;</span>&nbsp;<span class="op" id="4958469">||</span>&nbsp;<span class="ident" id="4958472">c1</span>&nbsp;<span class="op" id="4958475">!=</span>&nbsp;<span class="string" id="4958478">&#39;/&#39;</span><span class="op" id="4958481">)</span>&nbsp;<span class="op" id="4958483">&amp;&amp;</span>&nbsp;<span class="ident" id="4958486">r</span><span class="op" id="4958487">.</span><span class="ident" id="4958488">err</span>&nbsp;<span class="op" id="4958492">==</span>&nbsp;<span class="builtintype" id="4958495">nil</span>&nbsp;<span class="op" id="4958499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958507">if</span>&nbsp;<span class="ident" id="4958510">r</span><span class="op" id="4958511">.</span><span class="ident" id="4958512">eof</span>&nbsp;<span class="op" id="4958516">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4958525">r</span><span class="op" id="4958526">.</span><span class="ident" id="4958527">syntaxError</span><span class="op" id="4958538">(</span><span class="op" id="4958539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4958555">c</span><span class="op" id="4958556">,</span>&nbsp;<span class="ident" id="4958558">c1</span>&nbsp;<span class="op" id="4958561">=</span>&nbsp;<span class="ident" id="4958563">c1</span><span class="op" id="4958565">,</span>&nbsp;<span class="ident" id="4958567">r</span><span class="op" id="4958568">.</span><span class="ident" id="4958569">readByte</span><span class="op" id="4958577">(</span><span class="op" id="4958578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958591">}</span>&nbsp;<span class="keyword" id="4958593">else</span>&nbsp;<span class="op" id="4958598">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4958605">r</span><span class="op" id="4958606">.</span><span class="ident" id="4958607">syntaxError</span><span class="op" id="4958618">(</span><span class="op" id="4958619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4958631">c</span>&nbsp;<span class="op" id="4958633">=</span>&nbsp;<span class="ident" id="4958635">r</span><span class="op" id="4958636">.</span><span class="ident" id="4958637">readByte</span><span class="op" id="4958645">(</span><span class="op" id="4958646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958652">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958664">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958672">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4958682">r</span><span class="op" id="4958683">.</span><span class="ident" id="4958684">peek</span>&nbsp;<span class="op" id="4958689">=</span>&nbsp;<span class="ident" id="4958691">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958694">return</span>&nbsp;<span class="ident" id="4958701">r</span><span class="op" id="4958702">.</span><span class="ident" id="4958703">peek</span><br>
<span class="lineno">110</span><span class="op" id="4958708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4958711">//&nbsp;nextByte&nbsp;is&nbsp;like&nbsp;peekByte&nbsp;but&nbsp;advances&nbsp;beyond&nbsp;the&nbsp;returned&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="4958779">func</span>&nbsp;<span class="op" id="4958784">(</span><span class="ident" id="4958785">r</span>&nbsp;<span class="op" id="4958787">*</span><span class="ident" id="4958788">importReader</span><span class="op" id="4958800">)</span>&nbsp;<span class="ident" id="4958802">nextByte</span><span class="op" id="4958810">(</span><span class="ident" id="4958811">skipSpace</span>&nbsp;<span class="builtintype" id="4958821">bool</span><span class="op" id="4958825">)</span>&nbsp;<span class="builtintype" id="4958827">byte</span>&nbsp;<span class="op" id="4958832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4958835">c</span>&nbsp;<span class="op" id="4958837">:=</span>&nbsp;<span class="ident" id="4958840">r</span><span class="op" id="4958841">.</span><span class="ident" id="4958842">peekByte</span><span class="op" id="4958850">(</span><span class="ident" id="4958851">skipSpace</span><span class="op" id="4958860">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4958863">r</span><span class="op" id="4958864">.</span><span class="ident" id="4958865">peek</span>&nbsp;<span class="op" id="4958870">=</span>&nbsp;<span class="num" id="4958872">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4958875">return</span>&nbsp;<span class="ident" id="4958882">c</span><br>
<span class="lineno"></span><span class="op" id="4958884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4958887">//&nbsp;readKeyword&nbsp;reads&nbsp;the&nbsp;given&nbsp;keyword&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">120</span><span class="comment" id="4958942">//&nbsp;If&nbsp;the&nbsp;keyword&nbsp;is&nbsp;not&nbsp;present,&nbsp;readKeyword&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4959012">func</span>&nbsp;<span class="op" id="4959017">(</span><span class="ident" id="4959018">r</span>&nbsp;<span class="op" id="4959020">*</span><span class="ident" id="4959021">importReader</span><span class="op" id="4959033">)</span>&nbsp;<span class="ident" id="4959035">readKeyword</span><span class="op" id="4959046">(</span><span class="ident" id="4959047">kw</span>&nbsp;<span class="builtintype" id="4959050">string</span><span class="op" id="4959056">)</span>&nbsp;<span class="op" id="4959058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959061">r</span><span class="op" id="4959062">.</span><span class="ident" id="4959063">peekByte</span><span class="op" id="4959071">(</span><span class="builtintype" id="4959072">true</span><span class="op" id="4959076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959079">for</span>&nbsp;<span class="ident" id="4959083">i</span>&nbsp;<span class="op" id="4959085">:=</span>&nbsp;<span class="num" id="4959088">0</span><span class="op" id="4959089">;</span>&nbsp;<span class="ident" id="4959091">i</span>&nbsp;<span class="op" id="4959093">&lt;</span>&nbsp;<span class="builtinfunc" id="4959095">len</span><span class="op" id="4959098">(</span><span class="ident" id="4959099">kw</span><span class="op" id="4959101">)</span><span class="op" id="4959102">;</span>&nbsp;<span class="ident" id="4959104">i</span><span class="op" id="4959105">++</span>&nbsp;<span class="op" id="4959108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959112">if</span>&nbsp;<span class="ident" id="4959115">r</span><span class="op" id="4959116">.</span><span class="ident" id="4959117">nextByte</span><span class="op" id="4959125">(</span><span class="builtintype" id="4959126">false</span><span class="op" id="4959131">)</span>&nbsp;<span class="op" id="4959133">!=</span>&nbsp;<span class="ident" id="4959136">kw</span><span class="op" id="4959138">[</span><span class="ident" id="4959139">i</span><span class="op" id="4959140">]</span>&nbsp;<span class="op" id="4959142">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959147">r</span><span class="op" id="4959148">.</span><span class="ident" id="4959149">syntaxError</span><span class="op" id="4959160">(</span><span class="op" id="4959161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959166">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4959175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4959178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959181">if</span>&nbsp;<span class="ident" id="4959184">isIdent</span><span class="op" id="4959191">(</span><span class="ident" id="4959192">r</span><span class="op" id="4959193">.</span><span class="ident" id="4959194">peekByte</span><span class="op" id="4959202">(</span><span class="builtintype" id="4959203">false</span><span class="op" id="4959208">)</span><span class="op" id="4959209">)</span>&nbsp;<span class="op" id="4959211">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959215">r</span><span class="op" id="4959216">.</span><span class="ident" id="4959217">syntaxError</span><span class="op" id="4959228">(</span><span class="op" id="4959229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4959232">}</span><br>
<span class="lineno"></span><span class="op" id="4959234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4959237">//&nbsp;readIdent&nbsp;reads&nbsp;an&nbsp;identifier&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">135</span><span class="comment" id="4959286">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readIdent&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4959356">func</span>&nbsp;<span class="op" id="4959361">(</span><span class="ident" id="4959362">r</span>&nbsp;<span class="op" id="4959364">*</span><span class="ident" id="4959365">importReader</span><span class="op" id="4959377">)</span>&nbsp;<span class="ident" id="4959379">readIdent</span><span class="op" id="4959388">(</span><span class="op" id="4959389">)</span>&nbsp;<span class="op" id="4959391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959394">c</span>&nbsp;<span class="op" id="4959396">:=</span>&nbsp;<span class="ident" id="4959399">r</span><span class="op" id="4959400">.</span><span class="ident" id="4959401">peekByte</span><span class="op" id="4959409">(</span><span class="builtintype" id="4959410">true</span><span class="op" id="4959414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959417">if</span>&nbsp;<span class="op" id="4959420">!</span><span class="ident" id="4959421">isIdent</span><span class="op" id="4959428">(</span><span class="ident" id="4959429">c</span><span class="op" id="4959430">)</span>&nbsp;<span class="op" id="4959432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959436">r</span><span class="op" id="4959437">.</span><span class="ident" id="4959438">syntaxError</span><span class="op" id="4959449">(</span><span class="op" id="4959450">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959454">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4959462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959465">for</span>&nbsp;<span class="ident" id="4959469">isIdent</span><span class="op" id="4959476">(</span><span class="ident" id="4959477">r</span><span class="op" id="4959478">.</span><span class="ident" id="4959479">peekByte</span><span class="op" id="4959487">(</span><span class="builtintype" id="4959488">false</span><span class="op" id="4959493">)</span><span class="op" id="4959494">)</span>&nbsp;<span class="op" id="4959496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959500">r</span><span class="op" id="4959501">.</span><span class="ident" id="4959502">peek</span>&nbsp;<span class="op" id="4959507">=</span>&nbsp;<span class="num" id="4959509">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4959512">}</span><br>
<span class="lineno">145</span><span class="op" id="4959514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4959517">//&nbsp;readString&nbsp;reads&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="4959577">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readString&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4959648">func</span>&nbsp;<span class="op" id="4959653">(</span><span class="ident" id="4959654">r</span>&nbsp;<span class="op" id="4959656">*</span><span class="ident" id="4959657">importReader</span><span class="op" id="4959669">)</span>&nbsp;<span class="ident" id="4959671">readString</span><span class="op" id="4959681">(</span><span class="op" id="4959682">)</span>&nbsp;<span class="op" id="4959684">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959687">switch</span>&nbsp;<span class="ident" id="4959694">r</span><span class="op" id="4959695">.</span><span class="ident" id="4959696">nextByte</span><span class="op" id="4959704">(</span><span class="builtintype" id="4959705">true</span><span class="op" id="4959709">)</span>&nbsp;<span class="op" id="4959711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959714">case</span>&nbsp;<span class="string" id="4959719">&#39;`&#39;</span><span class="op" id="4959722">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959726">for</span>&nbsp;<span class="ident" id="4959730">r</span><span class="op" id="4959731">.</span><span class="ident" id="4959732">err</span>&nbsp;<span class="op" id="4959736">==</span>&nbsp;<span class="builtintype" id="4959739">nil</span>&nbsp;<span class="op" id="4959743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959748">if</span>&nbsp;<span class="ident" id="4959751">r</span><span class="op" id="4959752">.</span><span class="ident" id="4959753">nextByte</span><span class="op" id="4959761">(</span><span class="builtintype" id="4959762">false</span><span class="op" id="4959767">)</span>&nbsp;<span class="op" id="4959769">==</span>&nbsp;<span class="string" id="4959772">&#39;`&#39;</span>&nbsp;<span class="op" id="4959776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959782">break</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4959791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959796">if</span>&nbsp;<span class="ident" id="4959799">r</span><span class="op" id="4959800">.</span><span class="ident" id="4959801">eof</span>&nbsp;<span class="op" id="4959805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959811">r</span><span class="op" id="4959812">.</span><span class="ident" id="4959813">syntaxError</span><span class="op" id="4959824">(</span><span class="op" id="4959825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4959830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4959834">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959837">case</span>&nbsp;<span class="string" id="4959842">&#39;&#34;&#39;</span><span class="op" id="4959845">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959849">for</span>&nbsp;<span class="ident" id="4959853">r</span><span class="op" id="4959854">.</span><span class="ident" id="4959855">err</span>&nbsp;<span class="op" id="4959859">==</span>&nbsp;<span class="builtintype" id="4959862">nil</span>&nbsp;<span class="op" id="4959866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959871">c</span>&nbsp;<span class="op" id="4959873">:=</span>&nbsp;<span class="ident" id="4959876">r</span><span class="op" id="4959877">.</span><span class="ident" id="4959878">nextByte</span><span class="op" id="4959886">(</span><span class="builtintype" id="4959887">false</span><span class="op" id="4959892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959897">if</span>&nbsp;<span class="ident" id="4959900">c</span>&nbsp;<span class="op" id="4959902">==</span>&nbsp;<span class="string" id="4959905">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4959909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959915">break</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4959924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959929">if</span>&nbsp;<span class="ident" id="4959932">r</span><span class="op" id="4959933">.</span><span class="ident" id="4959934">eof</span>&nbsp;<span class="op" id="4959938">||</span>&nbsp;<span class="ident" id="4959941">c</span>&nbsp;<span class="op" id="4959943">==</span>&nbsp;<span class="string" id="4959946">&#39;\n&#39;</span>&nbsp;<span class="op" id="4959951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4959957">r</span><span class="op" id="4959958">.</span><span class="ident" id="4959959">syntaxError</span><span class="op" id="4959970">(</span><span class="op" id="4959971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4959976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4959981">if</span>&nbsp;<span class="ident" id="4959984">c</span>&nbsp;<span class="op" id="4959986">==</span>&nbsp;<span class="string" id="4959989">&#39;\\&#39;</span>&nbsp;<span class="op" id="4959994">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960000">r</span><span class="op" id="4960001">.</span><span class="ident" id="4960002">nextByte</span><span class="op" id="4960010">(</span><span class="builtintype" id="4960011">false</span><span class="op" id="4960016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960028">default</span><span class="op" id="4960035">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960039">r</span><span class="op" id="4960040">.</span><span class="ident" id="4960041">syntaxError</span><span class="op" id="4960052">(</span><span class="op" id="4960053">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960056">}</span><br>
<span class="lineno"></span><span class="op" id="4960058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4960061">//&nbsp;readImport&nbsp;reads&nbsp;an&nbsp;import&nbsp;clause&nbsp;-&nbsp;optional&nbsp;identifier&nbsp;followed&nbsp;by&nbsp;quoted&nbsp;string&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="4960148">//&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">180</span><span class="keyword" id="4960167">func</span>&nbsp;<span class="op" id="4960172">(</span><span class="ident" id="4960173">r</span>&nbsp;<span class="op" id="4960175">*</span><span class="ident" id="4960176">importReader</span><span class="op" id="4960188">)</span>&nbsp;<span class="ident" id="4960190">readImport</span><span class="op" id="4960200">(</span><span class="op" id="4960201">)</span>&nbsp;<span class="op" id="4960203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960206">c</span>&nbsp;<span class="op" id="4960208">:=</span>&nbsp;<span class="ident" id="4960211">r</span><span class="op" id="4960212">.</span><span class="ident" id="4960213">peekByte</span><span class="op" id="4960221">(</span><span class="builtintype" id="4960222">true</span><span class="op" id="4960226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960229">if</span>&nbsp;<span class="ident" id="4960232">c</span>&nbsp;<span class="op" id="4960234">==</span>&nbsp;<span class="string" id="4960237">&#39;.&#39;</span>&nbsp;<span class="op" id="4960241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960245">r</span><span class="op" id="4960246">.</span><span class="ident" id="4960247">peek</span>&nbsp;<span class="op" id="4960252">=</span>&nbsp;<span class="num" id="4960254">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960257">}</span>&nbsp;<span class="keyword" id="4960259">else</span>&nbsp;<span class="keyword" id="4960264">if</span>&nbsp;<span class="ident" id="4960267">isIdent</span><span class="op" id="4960274">(</span><span class="ident" id="4960275">c</span><span class="op" id="4960276">)</span>&nbsp;<span class="op" id="4960278">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960282">r</span><span class="op" id="4960283">.</span><span class="ident" id="4960284">readIdent</span><span class="op" id="4960293">(</span><span class="op" id="4960294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960300">r</span><span class="op" id="4960301">.</span><span class="ident" id="4960302">readString</span><span class="op" id="4960312">(</span><span class="op" id="4960313">)</span><br>
<span class="lineno"></span><span class="op" id="4960315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="4960318">//&nbsp;readComments&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;only&nbsp;reads&nbsp;the&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="4960396">//&nbsp;block&nbsp;of&nbsp;comments&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="4960430">func</span>&nbsp;<span class="ident" id="4960435">readComments</span><span class="op" id="4960447">(</span><span class="ident" id="4960448">f</span>&nbsp;<span class="ident" id="4960450">io</span><span class="op" id="4960452">.</span><span class="ident" id="4960453">Reader</span><span class="op" id="4960459">)</span>&nbsp;<span class="op" id="4960461">(</span><span class="op" id="4960462">[</span><span class="op" id="4960463">]</span><span class="builtintype" id="4960464">byte</span><span class="op" id="4960468">,</span>&nbsp;<span class="builtintype" id="4960470">error</span><span class="op" id="4960475">)</span>&nbsp;<span class="op" id="4960477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960480">r</span>&nbsp;<span class="op" id="4960482">:=</span>&nbsp;<span class="op" id="4960485">&amp;</span><span class="ident" id="4960486">importReader</span><span class="op" id="4960498">{</span><span class="ident" id="4960499">b</span><span class="op" id="4960500">:</span>&nbsp;<span class="ident" id="4960502">bufio</span><span class="op" id="4960507">.</span><span class="ident" id="4960508">NewReader</span><span class="op" id="4960517">(</span><span class="ident" id="4960518">f</span><span class="op" id="4960519">)</span><span class="op" id="4960520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960523">r</span><span class="op" id="4960524">.</span><span class="ident" id="4960525">peekByte</span><span class="op" id="4960533">(</span><span class="builtintype" id="4960534">true</span><span class="op" id="4960538">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960541">if</span>&nbsp;<span class="ident" id="4960544">r</span><span class="op" id="4960545">.</span><span class="ident" id="4960546">err</span>&nbsp;<span class="op" id="4960550">==</span>&nbsp;<span class="builtintype" id="4960553">nil</span>&nbsp;<span class="op" id="4960557">&amp;&amp;</span>&nbsp;<span class="op" id="4960560">!</span><span class="ident" id="4960561">r</span><span class="op" id="4960562">.</span><span class="ident" id="4960563">eof</span>&nbsp;<span class="op" id="4960567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4960571">//&nbsp;Didn&#39;t&nbsp;reach&nbsp;EOF,&nbsp;so&nbsp;must&nbsp;have&nbsp;found&nbsp;a&nbsp;non-space&nbsp;byte.&nbsp;Remove&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960642">r</span><span class="op" id="4960643">.</span><span class="ident" id="4960644">buf</span>&nbsp;<span class="op" id="4960648">=</span>&nbsp;<span class="ident" id="4960650">r</span><span class="op" id="4960651">.</span><span class="ident" id="4960652">buf</span><span class="op" id="4960655">[</span><span class="op" id="4960656">:</span><span class="builtinfunc" id="4960657">len</span><span class="op" id="4960660">(</span><span class="ident" id="4960661">r</span><span class="op" id="4960662">.</span><span class="ident" id="4960663">buf</span><span class="op" id="4960666">)</span><span class="op" id="4960667">-</span><span class="num" id="4960668">1</span><span class="op" id="4960669">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4960672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4960675">return</span>&nbsp;<span class="ident" id="4960682">r</span><span class="op" id="4960683">.</span><span class="ident" id="4960684">buf</span><span class="op" id="4960687">,</span>&nbsp;<span class="ident" id="4960689">r</span><span class="op" id="4960690">.</span><span class="ident" id="4960691">err</span><br>
<span class="lineno">200</span><span class="op" id="4960695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4960698">//&nbsp;readImports&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;expects&nbsp;a&nbsp;Go&nbsp;file&nbsp;as&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="4960779">//&nbsp;and&nbsp;stops&nbsp;reading&nbsp;the&nbsp;input&nbsp;once&nbsp;the&nbsp;imports&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span><span class="keyword" id="4960843">func</span>&nbsp;<span class="ident" id="4960848">readImports</span><span class="op" id="4960859">(</span><span class="ident" id="4960860">f</span>&nbsp;<span class="ident" id="4960862">io</span><span class="op" id="4960864">.</span><span class="ident" id="4960865">Reader</span><span class="op" id="4960871">,</span>&nbsp;<span class="ident" id="4960873">reportSyntaxError</span>&nbsp;<span class="builtintype" id="4960891">bool</span><span class="op" id="4960895">)</span>&nbsp;<span class="op" id="4960897">(</span><span class="op" id="4960898">[</span><span class="op" id="4960899">]</span><span class="builtintype" id="4960900">byte</span><span class="op" id="4960904">,</span>&nbsp;<span class="builtintype" id="4960906">error</span><span class="op" id="4960911">)</span>&nbsp;<span class="op" id="4960913">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960916">r</span>&nbsp;<span class="op" id="4960918">:=</span>&nbsp;<span class="op" id="4960921">&amp;</span><span class="ident" id="4960922">importReader</span><span class="op" id="4960934">{</span><span class="ident" id="4960935">b</span><span class="op" id="4960936">:</span>&nbsp;<span class="ident" id="4960938">bufio</span><span class="op" id="4960943">.</span><span class="ident" id="4960944">NewReader</span><span class="op" id="4960953">(</span><span class="ident" id="4960954">f</span><span class="op" id="4960955">)</span><span class="op" id="4960956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960960">r</span><span class="op" id="4960961">.</span><span class="ident" id="4960962">readKeyword</span><span class="op" id="4960973">(</span><span class="string" id="4960974">&#34;package&#34;</span><span class="op" id="4960983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4960986">r</span><span class="op" id="4960987">.</span><span class="ident" id="4960988">readIdent</span><span class="op" id="4960997">(</span><span class="op" id="4960998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961001">for</span>&nbsp;<span class="ident" id="4961005">r</span><span class="op" id="4961006">.</span><span class="ident" id="4961007">peekByte</span><span class="op" id="4961015">(</span><span class="builtintype" id="4961016">true</span><span class="op" id="4961020">)</span>&nbsp;<span class="op" id="4961022">==</span>&nbsp;<span class="string" id="4961025">&#39;i&#39;</span>&nbsp;<span class="op" id="4961029">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961033">r</span><span class="op" id="4961034">.</span><span class="ident" id="4961035">readKeyword</span><span class="op" id="4961046">(</span><span class="string" id="4961047">&#34;import&#34;</span><span class="op" id="4961055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961059">if</span>&nbsp;<span class="ident" id="4961062">r</span><span class="op" id="4961063">.</span><span class="ident" id="4961064">peekByte</span><span class="op" id="4961072">(</span><span class="builtintype" id="4961073">true</span><span class="op" id="4961077">)</span>&nbsp;<span class="op" id="4961079">==</span>&nbsp;<span class="string" id="4961082">&#39;(&#39;</span>&nbsp;<span class="op" id="4961086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961091">r</span><span class="op" id="4961092">.</span><span class="ident" id="4961093">nextByte</span><span class="op" id="4961101">(</span><span class="builtintype" id="4961102">false</span><span class="op" id="4961107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961112">for</span>&nbsp;<span class="ident" id="4961116">r</span><span class="op" id="4961117">.</span><span class="ident" id="4961118">peekByte</span><span class="op" id="4961126">(</span><span class="builtintype" id="4961127">true</span><span class="op" id="4961131">)</span>&nbsp;<span class="op" id="4961133">!=</span>&nbsp;<span class="string" id="4961136">&#39;)&#39;</span>&nbsp;<span class="op" id="4961140">&amp;&amp;</span>&nbsp;<span class="ident" id="4961143">r</span><span class="op" id="4961144">.</span><span class="ident" id="4961145">err</span>&nbsp;<span class="op" id="4961149">==</span>&nbsp;<span class="builtintype" id="4961152">nil</span>&nbsp;<span class="op" id="4961156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961162">r</span><span class="op" id="4961163">.</span><span class="ident" id="4961164">readImport</span><span class="op" id="4961174">(</span><span class="op" id="4961175">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961185">r</span><span class="op" id="4961186">.</span><span class="ident" id="4961187">nextByte</span><span class="op" id="4961195">(</span><span class="builtintype" id="4961196">false</span><span class="op" id="4961201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961205">}</span>&nbsp;<span class="keyword" id="4961207">else</span>&nbsp;<span class="op" id="4961212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961217">r</span><span class="op" id="4961218">.</span><span class="ident" id="4961219">readImport</span><span class="op" id="4961229">(</span><span class="op" id="4961230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961234">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4961241">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;successfully&nbsp;before&nbsp;EOF,&nbsp;we&nbsp;read&nbsp;a&nbsp;byte&nbsp;that&nbsp;told&nbsp;us&nbsp;we&nbsp;were&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4961326">//&nbsp;Return&nbsp;all&nbsp;but&nbsp;that&nbsp;last&nbsp;byte,&nbsp;which&nbsp;would&nbsp;cause&nbsp;a&nbsp;syntax&nbsp;error&nbsp;if&nbsp;we&nbsp;let&nbsp;it&nbsp;through.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961416">if</span>&nbsp;<span class="ident" id="4961419">r</span><span class="op" id="4961420">.</span><span class="ident" id="4961421">err</span>&nbsp;<span class="op" id="4961425">==</span>&nbsp;<span class="builtintype" id="4961428">nil</span>&nbsp;<span class="op" id="4961432">&amp;&amp;</span>&nbsp;<span class="op" id="4961435">!</span><span class="ident" id="4961436">r</span><span class="op" id="4961437">.</span><span class="ident" id="4961438">eof</span>&nbsp;<span class="op" id="4961442">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961446">return</span>&nbsp;<span class="ident" id="4961453">r</span><span class="op" id="4961454">.</span><span class="ident" id="4961455">buf</span><span class="op" id="4961458">[</span><span class="op" id="4961459">:</span><span class="builtinfunc" id="4961460">len</span><span class="op" id="4961463">(</span><span class="ident" id="4961464">r</span><span class="op" id="4961465">.</span><span class="ident" id="4961466">buf</span><span class="op" id="4961469">)</span><span class="op" id="4961470">-</span><span class="num" id="4961471">1</span><span class="op" id="4961472">]</span><span class="op" id="4961473">,</span>&nbsp;<span class="builtintype" id="4961475">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4961484">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;for&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;consume&nbsp;the&nbsp;whole&nbsp;file&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4961553">//&nbsp;we&nbsp;are&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;the&nbsp;errors&nbsp;that&nbsp;go/parser&nbsp;returns.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961620">if</span>&nbsp;<span class="ident" id="4961623">r</span><span class="op" id="4961624">.</span><span class="ident" id="4961625">err</span>&nbsp;<span class="op" id="4961629">==</span>&nbsp;<span class="ident" id="4961632">errSyntax</span>&nbsp;<span class="op" id="4961642">&amp;&amp;</span>&nbsp;<span class="op" id="4961645">!</span><span class="ident" id="4961646">reportSyntaxError</span>&nbsp;<span class="op" id="4961664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961668">r</span><span class="op" id="4961669">.</span><span class="ident" id="4961670">err</span>&nbsp;<span class="op" id="4961674">=</span>&nbsp;<span class="builtintype" id="4961676">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961682">for</span>&nbsp;<span class="ident" id="4961686">r</span><span class="op" id="4961687">.</span><span class="ident" id="4961688">err</span>&nbsp;<span class="op" id="4961692">==</span>&nbsp;<span class="builtintype" id="4961695">nil</span>&nbsp;<span class="op" id="4961699">&amp;&amp;</span>&nbsp;<span class="op" id="4961702">!</span><span class="ident" id="4961703">r</span><span class="op" id="4961704">.</span><span class="ident" id="4961705">eof</span>&nbsp;<span class="op" id="4961709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4961714">r</span><span class="op" id="4961715">.</span><span class="ident" id="4961716">readByte</span><span class="op" id="4961724">(</span><span class="op" id="4961725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961729">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4961732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4961736">return</span>&nbsp;<span class="ident" id="4961743">r</span><span class="op" id="4961744">.</span><span class="ident" id="4961745">buf</span><span class="op" id="4961748">,</span>&nbsp;<span class="ident" id="4961750">r</span><span class="op" id="4961751">.</span><span class="ident" id="4961752">err</span><br>
<span class="lineno"></span><span class="op" id="4961756">}</span>
</div>
</body>
</html>
