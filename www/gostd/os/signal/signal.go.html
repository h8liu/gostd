<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html" class="current">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5435200">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5435255">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5435309">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5435360">//&nbsp;Package&nbsp;signal&nbsp;implements&nbsp;access&nbsp;to&nbsp;incoming&nbsp;signals.</span><br>
<span class="lineno"></span><span class="keyword" id="5435417">package</span>&nbsp;<span class="ident" id="5435425">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5435433">//&nbsp;BUG(rsc):&nbsp;This&nbsp;package&nbsp;is&nbsp;not&nbsp;yet&nbsp;implemented&nbsp;on&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="5435494">import</span>&nbsp;<span class="op" id="5435501">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5435504">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5435510">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5435517">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5435520">var</span>&nbsp;<span class="ident" id="5435524">handlers</span>&nbsp;<span class="keyword" id="5435533">struct</span>&nbsp;<span class="op" id="5435540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435543"><a href="/gostd/os/signal/signal.go.html#5435510">sync</a></span><span class="op" id="5435547">.</span><span class="ident" id="5435548"><a href="/gostd/sync/mutex.go.html#1443974">Mutex</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435555">m</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="5435559">map</span><span class="op" id="5435562">[</span><span class="keyword" id="5435563">chan</span><span class="op" id="5435567">&lt;-</span>&nbsp;<span class="ident" id="5435570"><a href="/gostd/os/signal/signal.go.html#5435504">os</a></span><span class="op" id="5435572">.</span><span class="ident" id="5435573"><a href="/gostd/os/exec.go.html#2435118">Signal</a></span><span class="op" id="5435579">]</span><span class="op" id="5435580">*</span><span class="ident" id="5435581"><a href="/gostd/os/signal/signal.go.html#5435616">handler</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435590">ref</span>&nbsp;<span class="op" id="5435594">[</span><span class="ident" id="5435595"><a href="/gostd/os/signal/signal_unix.go.html#5438519">numSig</a></span><span class="op" id="5435601">]</span><span class="builtintype" id="5435602">int64</span><br>
<span class="lineno"></span><span class="op" id="5435608">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="5435611">type</span>&nbsp;<span class="ident" id="5435616">handler</span>&nbsp;<span class="keyword" id="5435624">struct</span>&nbsp;<span class="op" id="5435631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435634">mask</span>&nbsp;<span class="op" id="5435639">[</span><span class="op" id="5435640">(</span><span class="ident" id="5435641"><a href="/gostd/os/signal/signal_unix.go.html#5438519">numSig</a></span>&nbsp;<span class="op" id="5435648">+</span>&nbsp;<span class="num" id="5435650">31</span><span class="op" id="5435652">)</span>&nbsp;<span class="op" id="5435654">/</span>&nbsp;<span class="num" id="5435656">32</span><span class="op" id="5435658">]</span><span class="builtintype" id="5435659">uint32</span><br>
<span class="lineno"></span><span class="op" id="5435666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5435669">func</span>&nbsp;<span class="op" id="5435674">(</span><span class="ident" id="5435675">h</span>&nbsp;<span class="op" id="5435677">*</span><span class="ident" id="5435678"><a href="/gostd/os/signal/signal.go.html#5435616">handler</a></span><span class="op" id="5435685">)</span>&nbsp;<span class="ident" id="5435687">want</span><span class="op" id="5435691">(</span><span class="ident" id="5435692">sig</span>&nbsp;<span class="builtintype" id="5435696">int</span><span class="op" id="5435699">)</span>&nbsp;<span class="builtintype" id="5435701">bool</span>&nbsp;<span class="op" id="5435706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5435709">return</span>&nbsp;<span class="op" id="5435716">(</span><span class="ident" id="5435717"><a href="/gostd/os/signal/signal.go.html#5435675">h</a></span><span class="op" id="5435718">.</span><span class="ident" id="5435719"><a href="/gostd/os/signal/signal.go.html#5435634">mask</a></span><span class="op" id="5435723">[</span><span class="ident" id="5435724"><a href="/gostd/os/signal/signal.go.html#5435692">sig</a></span><span class="op" id="5435727">/</span><span class="num" id="5435728">32</span><span class="op" id="5435730">]</span><span class="op" id="5435731">&gt;&gt;</span><span class="builtintype" id="5435733">uint</span><span class="op" id="5435737">(</span><span class="ident" id="5435738"><a href="/gostd/os/signal/signal.go.html#5435692">sig</a></span><span class="op" id="5435741">&amp;</span><span class="num" id="5435742">31</span><span class="op" id="5435744">)</span><span class="op" id="5435745">)</span><span class="op" id="5435746">&amp;</span><span class="num" id="5435747">1</span>&nbsp;<span class="op" id="5435749">!=</span>&nbsp;<span class="num" id="5435752">0</span><br>
<span class="lineno"></span><span class="op" id="5435754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5435757">func</span>&nbsp;<span class="op" id="5435762">(</span><span class="ident" id="5435763">h</span>&nbsp;<span class="op" id="5435765">*</span><span class="ident" id="5435766"><a href="/gostd/os/signal/signal.go.html#5435616">handler</a></span><span class="op" id="5435773">)</span>&nbsp;<span class="ident" id="5435775">set</span><span class="op" id="5435778">(</span><span class="ident" id="5435779">sig</span>&nbsp;<span class="builtintype" id="5435783">int</span><span class="op" id="5435786">)</span>&nbsp;<span class="op" id="5435788">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435791"><a href="/gostd/os/signal/signal.go.html#5435763">h</a></span><span class="op" id="5435792">.</span><span class="ident" id="5435793"><a href="/gostd/os/signal/signal.go.html#5435634">mask</a></span><span class="op" id="5435797">[</span><span class="ident" id="5435798"><a href="/gostd/os/signal/signal.go.html#5435779">sig</a></span><span class="op" id="5435801">/</span><span class="num" id="5435802">32</span><span class="op" id="5435804">]</span>&nbsp;<span class="op" id="5435806">|=</span>&nbsp;<span class="num" id="5435809">1</span>&nbsp;<span class="op" id="5435811">&lt;&lt;</span>&nbsp;<span class="builtintype" id="5435814">uint</span><span class="op" id="5435818">(</span><span class="ident" id="5435819"><a href="/gostd/os/signal/signal.go.html#5435779">sig</a></span><span class="op" id="5435822">&amp;</span><span class="num" id="5435823">31</span><span class="op" id="5435825">)</span><br>
<span class="lineno"></span><span class="op" id="5435827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5435830">//&nbsp;Notify&nbsp;causes&nbsp;package&nbsp;signal&nbsp;to&nbsp;relay&nbsp;incoming&nbsp;signals&nbsp;to&nbsp;c.</span><br>
<span class="lineno"></span><span class="comment" id="5435894">//&nbsp;If&nbsp;no&nbsp;signals&nbsp;are&nbsp;listed,&nbsp;all&nbsp;incoming&nbsp;signals&nbsp;will&nbsp;be&nbsp;relayed&nbsp;to&nbsp;c.</span><br>
<span class="lineno">35</span><span class="comment" id="5435966">//&nbsp;Otherwise,&nbsp;just&nbsp;the&nbsp;listed&nbsp;signals&nbsp;will.</span><br>
<span class="lineno"></span><span class="comment" id="5436010">//</span><br>
<span class="lineno"></span><span class="comment" id="5436013">//&nbsp;Package&nbsp;signal&nbsp;will&nbsp;not&nbsp;block&nbsp;sending&nbsp;to&nbsp;c:&nbsp;the&nbsp;caller&nbsp;must&nbsp;ensure</span><br>
<span class="lineno"></span><span class="comment" id="5436083">//&nbsp;that&nbsp;c&nbsp;has&nbsp;sufficient&nbsp;buffer&nbsp;space&nbsp;to&nbsp;keep&nbsp;up&nbsp;with&nbsp;the&nbsp;expected</span><br>
<span class="lineno"></span><span class="comment" id="5436150">//&nbsp;signal&nbsp;rate.&nbsp;&nbsp;For&nbsp;a&nbsp;channel&nbsp;used&nbsp;for&nbsp;notification&nbsp;of&nbsp;just&nbsp;one&nbsp;signal&nbsp;value,</span><br>
<span class="lineno">40</span><span class="comment" id="5436229">//&nbsp;a&nbsp;buffer&nbsp;of&nbsp;size&nbsp;1&nbsp;is&nbsp;sufficient.</span><br>
<span class="lineno"></span><span class="comment" id="5436266">//</span><br>
<span class="lineno"></span><span class="comment" id="5436269">//&nbsp;It&nbsp;is&nbsp;allowed&nbsp;to&nbsp;call&nbsp;Notify&nbsp;multiple&nbsp;times&nbsp;with&nbsp;the&nbsp;same&nbsp;channel:</span><br>
<span class="lineno"></span><span class="comment" id="5436339">//&nbsp;each&nbsp;call&nbsp;expands&nbsp;the&nbsp;set&nbsp;of&nbsp;signals&nbsp;sent&nbsp;to&nbsp;that&nbsp;channel.</span><br>
<span class="lineno"></span><span class="comment" id="5436401">//&nbsp;The&nbsp;only&nbsp;way&nbsp;to&nbsp;remove&nbsp;signals&nbsp;from&nbsp;the&nbsp;set&nbsp;is&nbsp;to&nbsp;call&nbsp;Stop.</span><br>
<span class="lineno">45</span><span class="comment" id="5436465">//</span><br>
<span class="lineno"></span><span class="comment" id="5436468">//&nbsp;It&nbsp;is&nbsp;allowed&nbsp;to&nbsp;call&nbsp;Notify&nbsp;multiple&nbsp;times&nbsp;with&nbsp;different&nbsp;channels</span><br>
<span class="lineno"></span><span class="comment" id="5436539">//&nbsp;and&nbsp;the&nbsp;same&nbsp;signals:&nbsp;each&nbsp;channel&nbsp;receives&nbsp;copies&nbsp;of&nbsp;incoming</span><br>
<span class="lineno"></span><span class="comment" id="5436605">//&nbsp;signals&nbsp;independently.</span><br>
<span class="lineno"></span><span class="keyword" id="5436631">func</span>&nbsp;<span class="ident" id="5436636">Notify</span><span class="op" id="5436642">(</span><span class="ident" id="5436643">c</span>&nbsp;<span class="keyword" id="5436645">chan</span><span class="op" id="5436649">&lt;-</span>&nbsp;<span class="ident" id="5436652"><a href="/gostd/os/signal/signal.go.html#5435504">os</a></span><span class="op" id="5436654">.</span><span class="ident" id="5436655"><a href="/gostd/os/exec.go.html#2435118">Signal</a></span><span class="op" id="5436661">,</span>&nbsp;<span class="ident" id="5436663">sig</span>&nbsp;<span class="op" id="5436667">...</span><span class="ident" id="5436670"><a href="/gostd/os/signal/signal.go.html#5435504">os</a></span><span class="op" id="5436672">.</span><span class="ident" id="5436673"><a href="/gostd/os/exec.go.html#2435118">Signal</a></span><span class="op" id="5436679">)</span>&nbsp;<span class="op" id="5436681">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5436684">if</span>&nbsp;<span class="ident" id="5436687"><a href="/gostd/os/signal/signal.go.html#5436643">c</a></span>&nbsp;<span class="op" id="5436689">==</span>&nbsp;<span class="builtintype" id="5436692">nil</span>&nbsp;<span class="op" id="5436696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5436700">panic</span><span class="op" id="5436705">(</span><span class="string" id="5436706">&#34;os/signal:&nbsp;Notify&nbsp;using&nbsp;nil&nbsp;channel&#34;</span><span class="op" id="5436743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5436746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5436750"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5436758">.</span><span class="ident" id="5436759"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5436763">(</span><span class="op" id="5436764">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5436767">defer</span>&nbsp;<span class="ident" id="5436773"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5436781">.</span><span class="ident" id="5436782"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5436788">(</span><span class="op" id="5436789">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5436793">h</span>&nbsp;<span class="op" id="5436795">:=</span>&nbsp;<span class="ident" id="5436798"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5436806">.</span><span class="ident" id="5436807"><a href="/gostd/os/signal/signal.go.html#5435555">m</a></span><span class="op" id="5436808">[</span><span class="ident" id="5436809"><a href="/gostd/os/signal/signal.go.html#5436643">c</a></span><span class="op" id="5436810">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5436813">if</span>&nbsp;<span class="ident" id="5436816"><a href="/gostd/os/signal/signal.go.html#5436793">h</a></span>&nbsp;<span class="op" id="5436818">==</span>&nbsp;<span class="builtintype" id="5436821">nil</span>&nbsp;<span class="op" id="5436825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5436829">if</span>&nbsp;<span class="ident" id="5436832"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5436840">.</span><span class="ident" id="5436841"><a href="/gostd/os/signal/signal.go.html#5435555">m</a></span>&nbsp;<span class="op" id="5436843">==</span>&nbsp;<span class="builtintype" id="5436846">nil</span>&nbsp;<span class="op" id="5436850">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5436855"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5436863">.</span><span class="ident" id="5436864"><a href="/gostd/os/signal/signal.go.html#5435555">m</a></span>&nbsp;<span class="op" id="5436866">=</span>&nbsp;<span class="builtinfunc" id="5436868">make</span><span class="op" id="5436872">(</span><span class="keyword" id="5436873">map</span><span class="op" id="5436876">[</span><span class="keyword" id="5436877">chan</span><span class="op" id="5436881">&lt;-</span>&nbsp;<span class="ident" id="5436884"><a href="/gostd/os/signal/signal.go.html#5435504">os</a></span><span class="op" id="5436886">.</span><span class="ident" id="5436887"><a href="/gostd/os/exec.go.html#2435118">Signal</a></span><span class="op" id="5436893">]</span><span class="op" id="5436894">*</span><span class="ident" id="5436895"><a href="/gostd/os/signal/signal.go.html#5435616">handler</a></span><span class="op" id="5436902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5436906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5436910"><a href="/gostd/os/signal/signal.go.html#5436793">h</a></span>&nbsp;<span class="op" id="5436912">=</span>&nbsp;<span class="builtinfunc" id="5436914">new</span><span class="op" id="5436917">(</span><span class="ident" id="5436918"><a href="/gostd/os/signal/signal.go.html#5435616">handler</a></span><span class="op" id="5436925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5436929"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5436937">.</span><span class="ident" id="5436938"><a href="/gostd/os/signal/signal.go.html#5435555">m</a></span><span class="op" id="5436939">[</span><span class="ident" id="5436940"><a href="/gostd/os/signal/signal.go.html#5436643">c</a></span><span class="op" id="5436941">]</span>&nbsp;<span class="op" id="5436943">=</span>&nbsp;<span class="ident" id="5436945"><a href="/gostd/os/signal/signal.go.html#5436793">h</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5436948">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5436952">add</span>&nbsp;<span class="op" id="5436956">:=</span>&nbsp;<span class="keyword" id="5436959">func</span><span class="op" id="5436963">(</span><span class="ident" id="5436964">n</span>&nbsp;<span class="builtintype" id="5436966">int</span><span class="op" id="5436969">)</span>&nbsp;<span class="op" id="5436971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5436975">if</span>&nbsp;<span class="ident" id="5436978"><a href="/gostd/os/signal/signal.go.html#5436964">n</a></span>&nbsp;<span class="op" id="5436980">&lt;</span>&nbsp;<span class="num" id="5436982">0</span>&nbsp;<span class="op" id="5436984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5436989">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5436998">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437002">if</span>&nbsp;<span class="op" id="5437005">!</span><span class="ident" id="5437006"><a href="/gostd/os/signal/signal.go.html#5436793">h</a></span><span class="op" id="5437007">.</span><span class="ident" id="5437008"><a href="/gostd/os/signal/signal.go.html#5435687">want</a></span><span class="op" id="5437012">(</span><span class="ident" id="5437013"><a href="/gostd/os/signal/signal.go.html#5436964">n</a></span><span class="op" id="5437014">)</span>&nbsp;<span class="op" id="5437016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437021"><a href="/gostd/os/signal/signal.go.html#5436793">h</a></span><span class="op" id="5437022">.</span><span class="ident" id="5437023"><a href="/gostd/os/signal/signal.go.html#5435775">set</a></span><span class="op" id="5437026">(</span><span class="ident" id="5437027"><a href="/gostd/os/signal/signal.go.html#5436964">n</a></span><span class="op" id="5437028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437033">if</span>&nbsp;<span class="ident" id="5437036"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437044">.</span><span class="ident" id="5437045"><a href="/gostd/os/signal/signal.go.html#5435590">ref</a></span><span class="op" id="5437048">[</span><span class="ident" id="5437049"><a href="/gostd/os/signal/signal.go.html#5436964">n</a></span><span class="op" id="5437050">]</span>&nbsp;<span class="op" id="5437052">==</span>&nbsp;<span class="num" id="5437055">0</span>&nbsp;<span class="op" id="5437057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437063"><a href="/gostd/os/signal/signal_unix.go.html#5438748">enableSignal</a></span><span class="op" id="5437075">(</span><span class="ident" id="5437076"><a href="/gostd/os/signal/signal.go.html#5436964">n</a></span><span class="op" id="5437077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437082">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437087"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437095">.</span><span class="ident" id="5437096"><a href="/gostd/os/signal/signal.go.html#5435590">ref</a></span><span class="op" id="5437099">[</span><span class="ident" id="5437100"><a href="/gostd/os/signal/signal.go.html#5436964">n</a></span><span class="op" id="5437101">]</span><span class="op" id="5437102">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437114">if</span>&nbsp;<span class="builtinfunc" id="5437117">len</span><span class="op" id="5437120">(</span><span class="ident" id="5437121"><a href="/gostd/os/signal/signal.go.html#5436663">sig</a></span><span class="op" id="5437124">)</span>&nbsp;<span class="op" id="5437126">==</span>&nbsp;<span class="num" id="5437129">0</span>&nbsp;<span class="op" id="5437131">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437135">for</span>&nbsp;<span class="ident" id="5437139">n</span>&nbsp;<span class="op" id="5437141">:=</span>&nbsp;<span class="num" id="5437144">0</span><span class="op" id="5437145">;</span>&nbsp;<span class="ident" id="5437147"><a href="/gostd/os/signal/signal.go.html#5437139">n</a></span>&nbsp;<span class="op" id="5437149">&lt;</span>&nbsp;<span class="ident" id="5437151"><a href="/gostd/os/signal/signal_unix.go.html#5438519">numSig</a></span><span class="op" id="5437157">;</span>&nbsp;<span class="ident" id="5437159"><a href="/gostd/os/signal/signal.go.html#5437139">n</a></span><span class="op" id="5437160">++</span>&nbsp;<span class="op" id="5437163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437168"><a href="/gostd/os/signal/signal.go.html#5436952">add</a></span><span class="op" id="5437171">(</span><span class="ident" id="5437172"><a href="/gostd/os/signal/signal.go.html#5437139">n</a></span><span class="op" id="5437173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437180">}</span>&nbsp;<span class="keyword" id="5437182">else</span>&nbsp;<span class="op" id="5437187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437191">for</span>&nbsp;<span class="ident" id="5437195">_</span><span class="op" id="5437196">,</span>&nbsp;<span class="ident" id="5437198">s</span>&nbsp;<span class="op" id="5437200">:=</span>&nbsp;<span class="keyword" id="5437203">range</span>&nbsp;<span class="ident" id="5437209"><a href="/gostd/os/signal/signal.go.html#5436663">sig</a></span>&nbsp;<span class="op" id="5437213">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437218"><a href="/gostd/os/signal/signal.go.html#5436952">add</a></span><span class="op" id="5437221">(</span><span class="ident" id="5437222"><a href="/gostd/os/signal/signal_unix.go.html#5438565">signum</a></span><span class="op" id="5437228">(</span><span class="ident" id="5437229"><a href="/gostd/os/signal/signal.go.html#5437198">s</a></span><span class="op" id="5437230">)</span><span class="op" id="5437231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437238">}</span><br>
<span class="lineno"></span><span class="op" id="5437240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="5437243">//&nbsp;Stop&nbsp;causes&nbsp;package&nbsp;signal&nbsp;to&nbsp;stop&nbsp;relaying&nbsp;incoming&nbsp;signals&nbsp;to&nbsp;c.</span><br>
<span class="lineno"></span><span class="comment" id="5437313">//&nbsp;It&nbsp;undoes&nbsp;the&nbsp;effect&nbsp;of&nbsp;all&nbsp;prior&nbsp;calls&nbsp;to&nbsp;Notify&nbsp;using&nbsp;c.</span><br>
<span class="lineno"></span><span class="comment" id="5437375">//&nbsp;When&nbsp;Stop&nbsp;returns,&nbsp;it&nbsp;is&nbsp;guaranteed&nbsp;that&nbsp;c&nbsp;will&nbsp;receive&nbsp;no&nbsp;more&nbsp;signals.</span><br>
<span class="lineno"></span><span class="keyword" id="5437451">func</span>&nbsp;<span class="ident" id="5437456">Stop</span><span class="op" id="5437460">(</span><span class="ident" id="5437461">c</span>&nbsp;<span class="keyword" id="5437463">chan</span><span class="op" id="5437467">&lt;-</span>&nbsp;<span class="ident" id="5437470"><a href="/gostd/os/signal/signal.go.html#5435504">os</a></span><span class="op" id="5437472">.</span><span class="ident" id="5437473"><a href="/gostd/os/exec.go.html#2435118">Signal</a></span><span class="op" id="5437479">)</span>&nbsp;<span class="op" id="5437481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437484"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437492">.</span><span class="ident" id="5437493"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5437497">(</span><span class="op" id="5437498">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437501">defer</span>&nbsp;<span class="ident" id="5437507"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437515">.</span><span class="ident" id="5437516"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5437522">(</span><span class="op" id="5437523">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437527">h</span>&nbsp;<span class="op" id="5437529">:=</span>&nbsp;<span class="ident" id="5437532"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437540">.</span><span class="ident" id="5437541"><a href="/gostd/os/signal/signal.go.html#5435555">m</a></span><span class="op" id="5437542">[</span><span class="ident" id="5437543"><a href="/gostd/os/signal/signal.go.html#5437461">c</a></span><span class="op" id="5437544">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437547">if</span>&nbsp;<span class="ident" id="5437550"><a href="/gostd/os/signal/signal.go.html#5437527">h</a></span>&nbsp;<span class="op" id="5437552">==</span>&nbsp;<span class="builtintype" id="5437555">nil</span>&nbsp;<span class="op" id="5437559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437563">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5437574">delete</span><span class="op" id="5437580">(</span><span class="ident" id="5437581"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437589">.</span><span class="ident" id="5437590"><a href="/gostd/os/signal/signal.go.html#5435555">m</a></span><span class="op" id="5437591">,</span>&nbsp;<span class="ident" id="5437593"><a href="/gostd/os/signal/signal.go.html#5437461">c</a></span><span class="op" id="5437594">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437598">for</span>&nbsp;<span class="ident" id="5437602">n</span>&nbsp;<span class="op" id="5437604">:=</span>&nbsp;<span class="num" id="5437607">0</span><span class="op" id="5437608">;</span>&nbsp;<span class="ident" id="5437610"><a href="/gostd/os/signal/signal.go.html#5437602">n</a></span>&nbsp;<span class="op" id="5437612">&lt;</span>&nbsp;<span class="ident" id="5437614"><a href="/gostd/os/signal/signal_unix.go.html#5438519">numSig</a></span><span class="op" id="5437620">;</span>&nbsp;<span class="ident" id="5437622"><a href="/gostd/os/signal/signal.go.html#5437602">n</a></span><span class="op" id="5437623">++</span>&nbsp;<span class="op" id="5437626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437630">if</span>&nbsp;<span class="ident" id="5437633"><a href="/gostd/os/signal/signal.go.html#5437527">h</a></span><span class="op" id="5437634">.</span><span class="ident" id="5437635"><a href="/gostd/os/signal/signal.go.html#5435687">want</a></span><span class="op" id="5437639">(</span><span class="ident" id="5437640"><a href="/gostd/os/signal/signal.go.html#5437602">n</a></span><span class="op" id="5437641">)</span>&nbsp;<span class="op" id="5437643">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437648"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437656">.</span><span class="ident" id="5437657"><a href="/gostd/os/signal/signal.go.html#5435590">ref</a></span><span class="op" id="5437660">[</span><span class="ident" id="5437661"><a href="/gostd/os/signal/signal.go.html#5437602">n</a></span><span class="op" id="5437662">]</span><span class="op" id="5437663">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437669">if</span>&nbsp;<span class="ident" id="5437672"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437680">.</span><span class="ident" id="5437681"><a href="/gostd/os/signal/signal.go.html#5435590">ref</a></span><span class="op" id="5437684">[</span><span class="ident" id="5437685"><a href="/gostd/os/signal/signal.go.html#5437602">n</a></span><span class="op" id="5437686">]</span>&nbsp;<span class="op" id="5437688">==</span>&nbsp;<span class="num" id="5437691">0</span>&nbsp;<span class="op" id="5437693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437699"><a href="/gostd/os/signal/signal_unix.go.html#5438808">disableSignal</a></span><span class="op" id="5437712">(</span><span class="ident" id="5437713"><a href="/gostd/os/signal/signal.go.html#5437602">n</a></span><span class="op" id="5437714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437723">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437726">}</span><br>
<span class="lineno"></span><span class="op" id="5437728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5437731">func</span>&nbsp;<span class="ident" id="5437736">process</span><span class="op" id="5437743">(</span><span class="ident" id="5437744">sig</span>&nbsp;<span class="ident" id="5437748"><a href="/gostd/os/signal/signal.go.html#5435504">os</a></span><span class="op" id="5437750">.</span><span class="ident" id="5437751"><a href="/gostd/os/exec.go.html#2435118">Signal</a></span><span class="op" id="5437757">)</span>&nbsp;<span class="op" id="5437759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437762">n</span>&nbsp;<span class="op" id="5437764">:=</span>&nbsp;<span class="ident" id="5437767"><a href="/gostd/os/signal/signal_unix.go.html#5438565">signum</a></span><span class="op" id="5437773">(</span><span class="ident" id="5437774"><a href="/gostd/os/signal/signal.go.html#5437744">sig</a></span><span class="op" id="5437777">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437780">if</span>&nbsp;<span class="ident" id="5437783"><a href="/gostd/os/signal/signal.go.html#5437762">n</a></span>&nbsp;<span class="op" id="5437785">&lt;</span>&nbsp;<span class="num" id="5437787">0</span>&nbsp;<span class="op" id="5437789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437793">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5437805"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437813">.</span><span class="ident" id="5437814"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5437818">(</span><span class="op" id="5437819">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437822">defer</span>&nbsp;<span class="ident" id="5437828"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437836">.</span><span class="ident" id="5437837"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5437843">(</span><span class="op" id="5437844">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437848">for</span>&nbsp;<span class="ident" id="5437852">c</span><span class="op" id="5437853">,</span>&nbsp;<span class="ident" id="5437855">h</span>&nbsp;<span class="op" id="5437857">:=</span>&nbsp;<span class="keyword" id="5437860">range</span>&nbsp;<span class="ident" id="5437866"><a href="/gostd/os/signal/signal.go.html#5435524">handlers</a></span><span class="op" id="5437874">.</span><span class="ident" id="5437875"><a href="/gostd/os/signal/signal.go.html#5435555">m</a></span>&nbsp;<span class="op" id="5437877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437881">if</span>&nbsp;<span class="ident" id="5437884"><a href="/gostd/os/signal/signal.go.html#5437855">h</a></span><span class="op" id="5437885">.</span><span class="ident" id="5437886"><a href="/gostd/os/signal/signal.go.html#5435687">want</a></span><span class="op" id="5437890">(</span><span class="ident" id="5437891"><a href="/gostd/os/signal/signal.go.html#5437762">n</a></span><span class="op" id="5437892">)</span>&nbsp;<span class="op" id="5437894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5437899">//&nbsp;send&nbsp;but&nbsp;do&nbsp;not&nbsp;block&nbsp;for&nbsp;it</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437934">select</span>&nbsp;<span class="op" id="5437941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437946">case</span>&nbsp;<span class="ident" id="5437951"><a href="/gostd/os/signal/signal.go.html#5437852">c</a></span>&nbsp;<span class="op" id="5437953">&lt;-</span>&nbsp;<span class="ident" id="5437956"><a href="/gostd/os/signal/signal.go.html#5437744">sig</a></span><span class="op" id="5437959">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5437964">default</span><span class="op" id="5437971">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437980">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5437983">}</span><br>
<span class="lineno"></span><span class="op" id="5437985">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
