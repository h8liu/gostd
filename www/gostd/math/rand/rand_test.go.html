<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7562003">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7562058">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7562112">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7562163">package</span>&nbsp;<span class="ident" id="7562171">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7562177">import</span>&nbsp;<span class="op" id="7562184">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7562187">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7562197">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7562204">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7562212">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7562222">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7562225">const</span>&nbsp;<span class="op" id="7562231">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7562234">numTestSamples</span>&nbsp;<span class="op" id="7562249">=</span>&nbsp;<span class="num" id="7562251">10000</span><br>
<span class="lineno"></span><span class="op" id="7562257">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7562260">type</span>&nbsp;<span class="ident" id="7562265">statsResults</span>&nbsp;<span class="keyword" id="7562278">struct</span>&nbsp;<span class="op" id="7562285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7562288">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7562300">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7562309">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7562321">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7562330">closeEnough</span>&nbsp;<span class="builtintype" id="7562342">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7562351">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7562363">float64</span><br>
<span class="lineno"></span><span class="op" id="7562371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7562374">func</span>&nbsp;<span class="ident" id="7562379">max</span><span class="op" id="7562382">(</span><span class="ident" id="7562383">a</span><span class="op" id="7562384">,</span>&nbsp;<span class="ident" id="7562386">b</span>&nbsp;<span class="builtintype" id="7562388">float64</span><span class="op" id="7562395">)</span>&nbsp;<span class="builtintype" id="7562397">float64</span>&nbsp;<span class="op" id="7562405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7562408">if</span>&nbsp;<span class="ident" id="7562411">a</span>&nbsp;<span class="op" id="7562413">&gt;</span>&nbsp;<span class="ident" id="7562415">b</span>&nbsp;<span class="op" id="7562417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7562421">return</span>&nbsp;<span class="ident" id="7562428">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7562431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7562434">return</span>&nbsp;<span class="ident" id="7562441">b</span><br>
<span class="lineno">30</span><span class="op" id="7562443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7562446">func</span>&nbsp;<span class="ident" id="7562451">nearEqual</span><span class="op" id="7562460">(</span><span class="ident" id="7562461">a</span><span class="op" id="7562462">,</span>&nbsp;<span class="ident" id="7562464">b</span><span class="op" id="7562465">,</span>&nbsp;<span class="ident" id="7562467">closeEnough</span><span class="op" id="7562478">,</span>&nbsp;<span class="ident" id="7562480">maxError</span>&nbsp;<span class="builtintype" id="7562489">float64</span><span class="op" id="7562496">)</span>&nbsp;<span class="builtintype" id="7562498">bool</span>&nbsp;<span class="op" id="7562503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7562506">absDiff</span>&nbsp;<span class="op" id="7562514">:=</span>&nbsp;<span class="ident" id="7562517">math</span><span class="op" id="7562521">.</span><span class="ident" id="7562522">Abs</span><span class="op" id="7562525">(</span><span class="ident" id="7562526">a</span>&nbsp;<span class="op" id="7562528">-</span>&nbsp;<span class="ident" id="7562530">b</span><span class="op" id="7562531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7562534">if</span>&nbsp;<span class="ident" id="7562537">absDiff</span>&nbsp;<span class="op" id="7562545">&lt;</span>&nbsp;<span class="ident" id="7562547">closeEnough</span>&nbsp;<span class="op" id="7562559">{</span>&nbsp;<span class="comment" id="7562561">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7562631">return</span>&nbsp;<span class="builtintype" id="7562638">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7562644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7562647">return</span>&nbsp;<span class="ident" id="7562654">absDiff</span><span class="op" id="7562661">/</span><span class="ident" id="7562662">max</span><span class="op" id="7562665">(</span><span class="ident" id="7562666">math</span><span class="op" id="7562670">.</span><span class="ident" id="7562671">Abs</span><span class="op" id="7562674">(</span><span class="ident" id="7562675">a</span><span class="op" id="7562676">)</span><span class="op" id="7562677">,</span>&nbsp;<span class="ident" id="7562679">math</span><span class="op" id="7562683">.</span><span class="ident" id="7562684">Abs</span><span class="op" id="7562687">(</span><span class="ident" id="7562688">b</span><span class="op" id="7562689">)</span><span class="op" id="7562690">)</span>&nbsp;<span class="op" id="7562692">&lt;</span>&nbsp;<span class="ident" id="7562694">maxError</span><br>
<span class="lineno"></span><span class="op" id="7562703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7562706">var</span>&nbsp;<span class="ident" id="7562710">testSeeds</span>&nbsp;<span class="op" id="7562720">=</span>&nbsp;<span class="op" id="7562722">[</span><span class="op" id="7562723">]</span><span class="ident" id="7562724">int64</span><span class="op" id="7562729">{</span><span class="num" id="7562730">1</span><span class="op" id="7562731">,</span>&nbsp;<span class="num" id="7562733">1754801282</span><span class="op" id="7562743">,</span>&nbsp;<span class="num" id="7562745">1698661970</span><span class="op" id="7562755">,</span>&nbsp;<span class="num" id="7562757">1550503961</span><span class="op" id="7562767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7562770">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7562844">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="7562877">func</span>&nbsp;<span class="op" id="7562882">(</span><span class="ident" id="7562883">this</span>&nbsp;<span class="op" id="7562888">*</span><span class="ident" id="7562889">statsResults</span><span class="op" id="7562901">)</span>&nbsp;<span class="ident" id="7562903">checkSimilarDistribution</span><span class="op" id="7562927">(</span><span class="ident" id="7562928">expected</span>&nbsp;<span class="op" id="7562937">*</span><span class="ident" id="7562938">statsResults</span><span class="op" id="7562950">)</span>&nbsp;<span class="builtintype" id="7562952">error</span>&nbsp;<span class="op" id="7562958">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7562961">if</span>&nbsp;<span class="op" id="7562964">!</span><span class="ident" id="7562965">nearEqual</span><span class="op" id="7562974">(</span><span class="ident" id="7562975">this</span><span class="op" id="7562979">.</span><span class="ident" id="7562980">mean</span><span class="op" id="7562984">,</span>&nbsp;<span class="ident" id="7562986">expected</span><span class="op" id="7562994">.</span><span class="ident" id="7562995">mean</span><span class="op" id="7562999">,</span>&nbsp;<span class="ident" id="7563001">expected</span><span class="op" id="7563009">.</span><span class="ident" id="7563010">closeEnough</span><span class="op" id="7563021">,</span>&nbsp;<span class="ident" id="7563023">expected</span><span class="op" id="7563031">.</span><span class="ident" id="7563032">maxError</span><span class="op" id="7563040">)</span>&nbsp;<span class="op" id="7563042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563046">s</span>&nbsp;<span class="op" id="7563048">:=</span>&nbsp;<span class="ident" id="7563051">fmt</span><span class="op" id="7563054">.</span><span class="ident" id="7563055">Sprintf</span><span class="op" id="7563062">(</span><span class="string" id="7563063">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7563101">,</span>&nbsp;<span class="ident" id="7563103">this</span><span class="op" id="7563107">.</span><span class="ident" id="7563108">mean</span><span class="op" id="7563112">,</span>&nbsp;<span class="ident" id="7563114">expected</span><span class="op" id="7563122">.</span><span class="ident" id="7563123">mean</span><span class="op" id="7563127">,</span>&nbsp;<span class="ident" id="7563129">expected</span><span class="op" id="7563137">.</span><span class="ident" id="7563138">closeEnough</span><span class="op" id="7563149">,</span>&nbsp;<span class="ident" id="7563151">expected</span><span class="op" id="7563159">.</span><span class="ident" id="7563160">maxError</span><span class="op" id="7563168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563172">fmt</span><span class="op" id="7563175">.</span><span class="ident" id="7563176">Println</span><span class="op" id="7563183">(</span><span class="ident" id="7563184">s</span><span class="op" id="7563185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7563189">return</span>&nbsp;<span class="ident" id="7563196">errors</span><span class="op" id="7563202">.</span><span class="ident" id="7563203">New</span><span class="op" id="7563206">(</span><span class="ident" id="7563207">s</span><span class="op" id="7563208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7563211">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7563214">if</span>&nbsp;<span class="op" id="7563217">!</span><span class="ident" id="7563218">nearEqual</span><span class="op" id="7563227">(</span><span class="ident" id="7563228">this</span><span class="op" id="7563232">.</span><span class="ident" id="7563233">stddev</span><span class="op" id="7563239">,</span>&nbsp;<span class="ident" id="7563241">expected</span><span class="op" id="7563249">.</span><span class="ident" id="7563250">stddev</span><span class="op" id="7563256">,</span>&nbsp;<span class="num" id="7563258">0</span><span class="op" id="7563259">,</span>&nbsp;<span class="ident" id="7563261">expected</span><span class="op" id="7563269">.</span><span class="ident" id="7563270">maxError</span><span class="op" id="7563278">)</span>&nbsp;<span class="op" id="7563280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563284">s</span>&nbsp;<span class="op" id="7563286">:=</span>&nbsp;<span class="ident" id="7563289">fmt</span><span class="op" id="7563292">.</span><span class="ident" id="7563293">Sprintf</span><span class="op" id="7563300">(</span><span class="string" id="7563301">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7563341">,</span>&nbsp;<span class="ident" id="7563343">this</span><span class="op" id="7563347">.</span><span class="ident" id="7563348">stddev</span><span class="op" id="7563354">,</span>&nbsp;<span class="ident" id="7563356">expected</span><span class="op" id="7563364">.</span><span class="ident" id="7563365">stddev</span><span class="op" id="7563371">,</span>&nbsp;<span class="ident" id="7563373">expected</span><span class="op" id="7563381">.</span><span class="ident" id="7563382">closeEnough</span><span class="op" id="7563393">,</span>&nbsp;<span class="ident" id="7563395">expected</span><span class="op" id="7563403">.</span><span class="ident" id="7563404">maxError</span><span class="op" id="7563412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563416">fmt</span><span class="op" id="7563419">.</span><span class="ident" id="7563420">Println</span><span class="op" id="7563427">(</span><span class="ident" id="7563428">s</span><span class="op" id="7563429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7563433">return</span>&nbsp;<span class="ident" id="7563440">errors</span><span class="op" id="7563446">.</span><span class="ident" id="7563447">New</span><span class="op" id="7563450">(</span><span class="ident" id="7563451">s</span><span class="op" id="7563452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7563455">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7563458">return</span>&nbsp;<span class="ident" id="7563465">nil</span><br>
<span class="lineno"></span><span class="op" id="7563469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7563472">func</span>&nbsp;<span class="ident" id="7563477">getStatsResults</span><span class="op" id="7563492">(</span><span class="ident" id="7563493">samples</span>&nbsp;<span class="op" id="7563501">[</span><span class="op" id="7563502">]</span><span class="builtintype" id="7563503">float64</span><span class="op" id="7563510">)</span>&nbsp;<span class="op" id="7563512">*</span><span class="ident" id="7563513">statsResults</span>&nbsp;<span class="op" id="7563526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563529">res</span>&nbsp;<span class="op" id="7563533">:=</span>&nbsp;<span class="builtinfunc" id="7563536">new</span><span class="op" id="7563539">(</span><span class="ident" id="7563540">statsResults</span><span class="op" id="7563552">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7563555">var</span>&nbsp;<span class="ident" id="7563559">sum</span><span class="op" id="7563562">,</span>&nbsp;<span class="ident" id="7563564">squaresum</span>&nbsp;<span class="builtintype" id="7563574">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7563583">for</span>&nbsp;<span class="ident" id="7563587">_</span><span class="op" id="7563588">,</span>&nbsp;<span class="ident" id="7563590">s</span>&nbsp;<span class="op" id="7563592">:=</span>&nbsp;<span class="keyword" id="7563595">range</span>&nbsp;<span class="ident" id="7563601">samples</span>&nbsp;<span class="op" id="7563609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563613">sum</span>&nbsp;<span class="op" id="7563617">+=</span>&nbsp;<span class="ident" id="7563620">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563624">squaresum</span>&nbsp;<span class="op" id="7563634">+=</span>&nbsp;<span class="ident" id="7563637">s</span>&nbsp;<span class="op" id="7563639">*</span>&nbsp;<span class="ident" id="7563641">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7563644">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563647">res</span><span class="op" id="7563650">.</span><span class="ident" id="7563651">mean</span>&nbsp;<span class="op" id="7563656">=</span>&nbsp;<span class="ident" id="7563658">sum</span>&nbsp;<span class="op" id="7563662">/</span>&nbsp;<span class="builtintype" id="7563664">float64</span><span class="op" id="7563671">(</span><span class="builtinfunc" id="7563672">len</span><span class="op" id="7563675">(</span><span class="ident" id="7563676">samples</span><span class="op" id="7563683">)</span><span class="op" id="7563684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563687">res</span><span class="op" id="7563690">.</span><span class="ident" id="7563691">stddev</span>&nbsp;<span class="op" id="7563698">=</span>&nbsp;<span class="ident" id="7563700">math</span><span class="op" id="7563704">.</span><span class="ident" id="7563705">Sqrt</span><span class="op" id="7563709">(</span><span class="ident" id="7563710">squaresum</span><span class="op" id="7563719">/</span><span class="builtintype" id="7563720">float64</span><span class="op" id="7563727">(</span><span class="builtinfunc" id="7563728">len</span><span class="op" id="7563731">(</span><span class="ident" id="7563732">samples</span><span class="op" id="7563739">)</span><span class="op" id="7563740">)</span>&nbsp;<span class="op" id="7563742">-</span>&nbsp;<span class="ident" id="7563744">res</span><span class="op" id="7563747">.</span><span class="ident" id="7563748">mean</span><span class="op" id="7563752">*</span><span class="ident" id="7563753">res</span><span class="op" id="7563756">.</span><span class="ident" id="7563757">mean</span><span class="op" id="7563761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7563764">return</span>&nbsp;<span class="ident" id="7563771">res</span><br>
<span class="lineno"></span><span class="op" id="7563775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="7563778">func</span>&nbsp;<span class="ident" id="7563783">checkSampleDistribution</span><span class="op" id="7563806">(</span><span class="ident" id="7563807">t</span>&nbsp;<span class="op" id="7563809">*</span><span class="ident" id="7563810">testing</span><span class="op" id="7563817">.</span><span class="ident" id="7563818">T</span><span class="op" id="7563819">,</span>&nbsp;<span class="ident" id="7563821">samples</span>&nbsp;<span class="op" id="7563829">[</span><span class="op" id="7563830">]</span><span class="builtintype" id="7563831">float64</span><span class="op" id="7563838">,</span>&nbsp;<span class="ident" id="7563840">expected</span>&nbsp;<span class="op" id="7563849">*</span><span class="ident" id="7563850">statsResults</span><span class="op" id="7563862">)</span>&nbsp;<span class="op" id="7563864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563867">actual</span>&nbsp;<span class="op" id="7563874">:=</span>&nbsp;<span class="ident" id="7563877">getStatsResults</span><span class="op" id="7563892">(</span><span class="ident" id="7563893">samples</span><span class="op" id="7563900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563903">err</span>&nbsp;<span class="op" id="7563907">:=</span>&nbsp;<span class="ident" id="7563910">actual</span><span class="op" id="7563916">.</span><span class="ident" id="7563917">checkSimilarDistribution</span><span class="op" id="7563941">(</span><span class="ident" id="7563942">expected</span><span class="op" id="7563950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7563953">if</span>&nbsp;<span class="ident" id="7563956">err</span>&nbsp;<span class="op" id="7563960">!=</span>&nbsp;<span class="ident" id="7563963">nil</span>&nbsp;<span class="op" id="7563967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7563971">t</span><span class="op" id="7563972">.</span><span class="ident" id="7563973">Errorf</span><span class="op" id="7563979">(</span><span class="ident" id="7563980">err</span><span class="op" id="7563983">.</span><span class="ident" id="7563984">Error</span><span class="op" id="7563989">(</span><span class="op" id="7563990">)</span><span class="op" id="7563991">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7563994">}</span><br>
<span class="lineno"></span><span class="op" id="7563996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7563999">func</span>&nbsp;<span class="ident" id="7564004">checkSampleSliceDistributions</span><span class="op" id="7564033">(</span><span class="ident" id="7564034">t</span>&nbsp;<span class="op" id="7564036">*</span><span class="ident" id="7564037">testing</span><span class="op" id="7564044">.</span><span class="ident" id="7564045">T</span><span class="op" id="7564046">,</span>&nbsp;<span class="ident" id="7564048">samples</span>&nbsp;<span class="op" id="7564056">[</span><span class="op" id="7564057">]</span><span class="builtintype" id="7564058">float64</span><span class="op" id="7564065">,</span>&nbsp;<span class="ident" id="7564067">nslices</span>&nbsp;<span class="builtintype" id="7564075">int</span><span class="op" id="7564078">,</span>&nbsp;<span class="ident" id="7564080">expected</span>&nbsp;<span class="op" id="7564089">*</span><span class="ident" id="7564090">statsResults</span><span class="op" id="7564102">)</span>&nbsp;<span class="op" id="7564104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564107">chunk</span>&nbsp;<span class="op" id="7564113">:=</span>&nbsp;<span class="builtinfunc" id="7564116">len</span><span class="op" id="7564119">(</span><span class="ident" id="7564120">samples</span><span class="op" id="7564127">)</span>&nbsp;<span class="op" id="7564129">/</span>&nbsp;<span class="ident" id="7564131">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7564140">for</span>&nbsp;<span class="ident" id="7564144">i</span>&nbsp;<span class="op" id="7564146">:=</span>&nbsp;<span class="num" id="7564149">0</span><span class="op" id="7564150">;</span>&nbsp;<span class="ident" id="7564152">i</span>&nbsp;<span class="op" id="7564154">&lt;</span>&nbsp;<span class="ident" id="7564156">nslices</span><span class="op" id="7564163">;</span>&nbsp;<span class="ident" id="7564165">i</span><span class="op" id="7564166">++</span>&nbsp;<span class="op" id="7564169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564173">low</span>&nbsp;<span class="op" id="7564177">:=</span>&nbsp;<span class="ident" id="7564180">i</span>&nbsp;<span class="op" id="7564182">*</span>&nbsp;<span class="ident" id="7564184">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7564192">var</span>&nbsp;<span class="ident" id="7564196">high</span>&nbsp;<span class="builtintype" id="7564201">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7564207">if</span>&nbsp;<span class="ident" id="7564210">i</span>&nbsp;<span class="op" id="7564212">==</span>&nbsp;<span class="ident" id="7564215">nslices</span><span class="op" id="7564222">-</span><span class="num" id="7564223">1</span>&nbsp;<span class="op" id="7564225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564230">high</span>&nbsp;<span class="op" id="7564235">=</span>&nbsp;<span class="builtinfunc" id="7564237">len</span><span class="op" id="7564240">(</span><span class="ident" id="7564241">samples</span><span class="op" id="7564248">)</span>&nbsp;<span class="op" id="7564250">-</span>&nbsp;<span class="num" id="7564252">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7564256">}</span>&nbsp;<span class="keyword" id="7564258">else</span>&nbsp;<span class="op" id="7564263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564268">high</span>&nbsp;<span class="op" id="7564273">=</span>&nbsp;<span class="op" id="7564275">(</span><span class="ident" id="7564276">i</span>&nbsp;<span class="op" id="7564278">+</span>&nbsp;<span class="num" id="7564280">1</span><span class="op" id="7564281">)</span>&nbsp;<span class="op" id="7564283">*</span>&nbsp;<span class="ident" id="7564285">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7564293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564297">checkSampleDistribution</span><span class="op" id="7564320">(</span><span class="ident" id="7564321">t</span><span class="op" id="7564322">,</span>&nbsp;<span class="ident" id="7564324">samples</span><span class="op" id="7564331">[</span><span class="ident" id="7564332">low</span><span class="op" id="7564335">:</span><span class="ident" id="7564336">high</span><span class="op" id="7564340">]</span><span class="op" id="7564341">,</span>&nbsp;<span class="ident" id="7564343">expected</span><span class="op" id="7564351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7564354">}</span><br>
<span class="lineno">90</span><span class="op" id="7564356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7564359">//</span><br>
<span class="lineno"></span><span class="comment" id="7564362">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7564391">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7564395">func</span>&nbsp;<span class="ident" id="7564400">generateNormalSamples</span><span class="op" id="7564421">(</span><span class="ident" id="7564422">nsamples</span>&nbsp;<span class="builtintype" id="7564431">int</span><span class="op" id="7564434">,</span>&nbsp;<span class="ident" id="7564436">mean</span><span class="op" id="7564440">,</span>&nbsp;<span class="ident" id="7564442">stddev</span>&nbsp;<span class="builtintype" id="7564449">float64</span><span class="op" id="7564456">,</span>&nbsp;<span class="ident" id="7564458">seed</span>&nbsp;<span class="ident" id="7564463">int64</span><span class="op" id="7564468">)</span>&nbsp;<span class="op" id="7564470">[</span><span class="op" id="7564471">]</span><span class="builtintype" id="7564472">float64</span>&nbsp;<span class="op" id="7564480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564483">r</span>&nbsp;<span class="op" id="7564485">:=</span>&nbsp;<span class="ident" id="7564488">New</span><span class="op" id="7564491">(</span><span class="ident" id="7564492">NewSource</span><span class="op" id="7564501">(</span><span class="ident" id="7564502">seed</span><span class="op" id="7564506">)</span><span class="op" id="7564507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564510">samples</span>&nbsp;<span class="op" id="7564518">:=</span>&nbsp;<span class="builtinfunc" id="7564521">make</span><span class="op" id="7564525">(</span><span class="op" id="7564526">[</span><span class="op" id="7564527">]</span><span class="builtintype" id="7564528">float64</span><span class="op" id="7564535">,</span>&nbsp;<span class="ident" id="7564537">nsamples</span><span class="op" id="7564545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7564548">for</span>&nbsp;<span class="ident" id="7564552">i</span>&nbsp;<span class="op" id="7564554">:=</span>&nbsp;<span class="keyword" id="7564557">range</span>&nbsp;<span class="ident" id="7564563">samples</span>&nbsp;<span class="op" id="7564571">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564575">samples</span><span class="op" id="7564582">[</span><span class="ident" id="7564583">i</span><span class="op" id="7564584">]</span>&nbsp;<span class="op" id="7564586">=</span>&nbsp;<span class="ident" id="7564588">r</span><span class="op" id="7564589">.</span><span class="ident" id="7564590">NormFloat64</span><span class="op" id="7564601">(</span><span class="op" id="7564602">)</span><span class="op" id="7564603">*</span><span class="ident" id="7564604">stddev</span>&nbsp;<span class="op" id="7564611">+</span>&nbsp;<span class="ident" id="7564613">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7564619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7564622">return</span>&nbsp;<span class="ident" id="7564629">samples</span><br>
<span class="lineno"></span><span class="op" id="7564637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7564640">func</span>&nbsp;<span class="ident" id="7564645">testNormalDistribution</span><span class="op" id="7564667">(</span><span class="ident" id="7564668">t</span>&nbsp;<span class="op" id="7564670">*</span><span class="ident" id="7564671">testing</span><span class="op" id="7564678">.</span><span class="ident" id="7564679">T</span><span class="op" id="7564680">,</span>&nbsp;<span class="ident" id="7564682">nsamples</span>&nbsp;<span class="builtintype" id="7564691">int</span><span class="op" id="7564694">,</span>&nbsp;<span class="ident" id="7564696">mean</span><span class="op" id="7564700">,</span>&nbsp;<span class="ident" id="7564702">stddev</span>&nbsp;<span class="builtintype" id="7564709">float64</span><span class="op" id="7564716">,</span>&nbsp;<span class="ident" id="7564718">seed</span>&nbsp;<span class="ident" id="7564723">int64</span><span class="op" id="7564728">)</span>&nbsp;<span class="op" id="7564730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7564733">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564830">samples</span>&nbsp;<span class="op" id="7564838">:=</span>&nbsp;<span class="ident" id="7564841">generateNormalSamples</span><span class="op" id="7564862">(</span><span class="ident" id="7564863">nsamples</span><span class="op" id="7564871">,</span>&nbsp;<span class="ident" id="7564873">mean</span><span class="op" id="7564877">,</span>&nbsp;<span class="ident" id="7564879">stddev</span><span class="op" id="7564885">,</span>&nbsp;<span class="ident" id="7564887">seed</span><span class="op" id="7564891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564894">errorScale</span>&nbsp;<span class="op" id="7564905">:=</span>&nbsp;<span class="ident" id="7564908">max</span><span class="op" id="7564911">(</span><span class="num" id="7564912">1.0</span><span class="op" id="7564915">,</span>&nbsp;<span class="ident" id="7564917">stddev</span><span class="op" id="7564923">)</span>&nbsp;<span class="comment" id="7564925">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7564954">expected</span>&nbsp;<span class="op" id="7564963">:=</span>&nbsp;<span class="op" id="7564966">&amp;</span><span class="ident" id="7564967">statsResults</span><span class="op" id="7564979">{</span><span class="ident" id="7564980">mean</span><span class="op" id="7564984">,</span>&nbsp;<span class="ident" id="7564986">stddev</span><span class="op" id="7564992">,</span>&nbsp;<span class="num" id="7564994">0.10</span>&nbsp;<span class="op" id="7564999">*</span>&nbsp;<span class="ident" id="7565001">errorScale</span><span class="op" id="7565011">,</span>&nbsp;<span class="num" id="7565013">0.08</span>&nbsp;<span class="op" id="7565018">*</span>&nbsp;<span class="ident" id="7565020">errorScale</span><span class="op" id="7565030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7565034">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7565103">checkSampleDistribution</span><span class="op" id="7565126">(</span><span class="ident" id="7565127">t</span><span class="op" id="7565128">,</span>&nbsp;<span class="ident" id="7565130">samples</span><span class="op" id="7565137">,</span>&nbsp;<span class="ident" id="7565139">expected</span><span class="op" id="7565147">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7565151">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7565226">checkSampleSliceDistributions</span><span class="op" id="7565255">(</span><span class="ident" id="7565256">t</span><span class="op" id="7565257">,</span>&nbsp;<span class="ident" id="7565259">samples</span><span class="op" id="7565266">,</span>&nbsp;<span class="num" id="7565268">2</span><span class="op" id="7565269">,</span>&nbsp;<span class="ident" id="7565271">expected</span><span class="op" id="7565279">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7565283">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7565357">checkSampleSliceDistributions</span><span class="op" id="7565386">(</span><span class="ident" id="7565387">t</span><span class="op" id="7565388">,</span>&nbsp;<span class="ident" id="7565390">samples</span><span class="op" id="7565397">,</span>&nbsp;<span class="num" id="7565399">7</span><span class="op" id="7565400">,</span>&nbsp;<span class="ident" id="7565402">expected</span><span class="op" id="7565410">)</span><br>
<span class="lineno">120</span><span class="op" id="7565412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7565415">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7565432">func</span>&nbsp;<span class="ident" id="7565437">TestStandardNormalValues</span><span class="op" id="7565461">(</span><span class="ident" id="7565462">t</span>&nbsp;<span class="op" id="7565464">*</span><span class="ident" id="7565465">testing</span><span class="op" id="7565472">.</span><span class="ident" id="7565473">T</span><span class="op" id="7565474">)</span>&nbsp;<span class="op" id="7565476">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7565479">for</span>&nbsp;<span class="ident" id="7565483">_</span><span class="op" id="7565484">,</span>&nbsp;<span class="ident" id="7565486">seed</span>&nbsp;<span class="op" id="7565491">:=</span>&nbsp;<span class="keyword" id="7565494">range</span>&nbsp;<span class="ident" id="7565500">testSeeds</span>&nbsp;<span class="op" id="7565510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7565514">testNormalDistribution</span><span class="op" id="7565536">(</span><span class="ident" id="7565537">t</span><span class="op" id="7565538">,</span>&nbsp;<span class="ident" id="7565540">numTestSamples</span><span class="op" id="7565554">,</span>&nbsp;<span class="num" id="7565556">0</span><span class="op" id="7565557">,</span>&nbsp;<span class="num" id="7565559">1</span><span class="op" id="7565560">,</span>&nbsp;<span class="ident" id="7565562">seed</span><span class="op" id="7565566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7565569">}</span><br>
<span class="lineno"></span><span class="op" id="7565571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="7565574">func</span>&nbsp;<span class="ident" id="7565579">TestNonStandardNormalValues</span><span class="op" id="7565606">(</span><span class="ident" id="7565607">t</span>&nbsp;<span class="op" id="7565609">*</span><span class="ident" id="7565610">testing</span><span class="op" id="7565617">.</span><span class="ident" id="7565618">T</span><span class="op" id="7565619">)</span>&nbsp;<span class="op" id="7565621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7565624">sdmax</span>&nbsp;<span class="op" id="7565630">:=</span>&nbsp;<span class="num" id="7565633">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7565641">mmax</span>&nbsp;<span class="op" id="7565646">:=</span>&nbsp;<span class="num" id="7565649">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7565657">if</span>&nbsp;<span class="ident" id="7565660">testing</span><span class="op" id="7565667">.</span><span class="ident" id="7565668">Short</span><span class="op" id="7565673">(</span><span class="op" id="7565674">)</span>&nbsp;<span class="op" id="7565676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7565680">sdmax</span>&nbsp;<span class="op" id="7565686">=</span>&nbsp;<span class="num" id="7565688">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7565692">mmax</span>&nbsp;<span class="op" id="7565697">=</span>&nbsp;<span class="num" id="7565699">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7565702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7565705">for</span>&nbsp;<span class="ident" id="7565709">sd</span>&nbsp;<span class="op" id="7565712">:=</span>&nbsp;<span class="num" id="7565715">0.5</span><span class="op" id="7565718">;</span>&nbsp;<span class="ident" id="7565720">sd</span>&nbsp;<span class="op" id="7565723">&lt;</span>&nbsp;<span class="ident" id="7565725">sdmax</span><span class="op" id="7565730">;</span>&nbsp;<span class="ident" id="7565732">sd</span>&nbsp;<span class="op" id="7565735">*=</span>&nbsp;<span class="num" id="7565738">2</span>&nbsp;<span class="op" id="7565740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7565744">for</span>&nbsp;<span class="ident" id="7565748">m</span>&nbsp;<span class="op" id="7565750">:=</span>&nbsp;<span class="num" id="7565753">0.5</span><span class="op" id="7565756">;</span>&nbsp;<span class="ident" id="7565758">m</span>&nbsp;<span class="op" id="7565760">&lt;</span>&nbsp;<span class="ident" id="7565762">mmax</span><span class="op" id="7565766">;</span>&nbsp;<span class="ident" id="7565768">m</span>&nbsp;<span class="op" id="7565770">*=</span>&nbsp;<span class="num" id="7565773">2</span>&nbsp;<span class="op" id="7565775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7565780">for</span>&nbsp;<span class="ident" id="7565784">_</span><span class="op" id="7565785">,</span>&nbsp;<span class="ident" id="7565787">seed</span>&nbsp;<span class="op" id="7565792">:=</span>&nbsp;<span class="keyword" id="7565795">range</span>&nbsp;<span class="ident" id="7565801">testSeeds</span>&nbsp;<span class="op" id="7565811">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7565817">testNormalDistribution</span><span class="op" id="7565839">(</span><span class="ident" id="7565840">t</span><span class="op" id="7565841">,</span>&nbsp;<span class="ident" id="7565843">numTestSamples</span><span class="op" id="7565857">,</span>&nbsp;<span class="ident" id="7565859">m</span><span class="op" id="7565860">,</span>&nbsp;<span class="ident" id="7565862">sd</span><span class="op" id="7565864">,</span>&nbsp;<span class="ident" id="7565866">seed</span><span class="op" id="7565870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7565876">if</span>&nbsp;<span class="ident" id="7565879">testing</span><span class="op" id="7565886">.</span><span class="ident" id="7565887">Short</span><span class="op" id="7565892">(</span><span class="op" id="7565893">)</span>&nbsp;<span class="op" id="7565895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7565902">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7565912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7565917">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7565921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7565924">}</span><br>
<span class="lineno"></span><span class="op" id="7565926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7565929">//</span><br>
<span class="lineno">150</span><span class="comment" id="7565932">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7565966">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7565970">func</span>&nbsp;<span class="ident" id="7565975">generateExponentialSamples</span><span class="op" id="7566001">(</span><span class="ident" id="7566002">nsamples</span>&nbsp;<span class="builtintype" id="7566011">int</span><span class="op" id="7566014">,</span>&nbsp;<span class="ident" id="7566016">rate</span>&nbsp;<span class="builtintype" id="7566021">float64</span><span class="op" id="7566028">,</span>&nbsp;<span class="ident" id="7566030">seed</span>&nbsp;<span class="ident" id="7566035">int64</span><span class="op" id="7566040">)</span>&nbsp;<span class="op" id="7566042">[</span><span class="op" id="7566043">]</span><span class="builtintype" id="7566044">float64</span>&nbsp;<span class="op" id="7566052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566055">r</span>&nbsp;<span class="op" id="7566057">:=</span>&nbsp;<span class="ident" id="7566060">New</span><span class="op" id="7566063">(</span><span class="ident" id="7566064">NewSource</span><span class="op" id="7566073">(</span><span class="ident" id="7566074">seed</span><span class="op" id="7566078">)</span><span class="op" id="7566079">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566082">samples</span>&nbsp;<span class="op" id="7566090">:=</span>&nbsp;<span class="builtinfunc" id="7566093">make</span><span class="op" id="7566097">(</span><span class="op" id="7566098">[</span><span class="op" id="7566099">]</span><span class="builtintype" id="7566100">float64</span><span class="op" id="7566107">,</span>&nbsp;<span class="ident" id="7566109">nsamples</span><span class="op" id="7566117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7566120">for</span>&nbsp;<span class="ident" id="7566124">i</span>&nbsp;<span class="op" id="7566126">:=</span>&nbsp;<span class="keyword" id="7566129">range</span>&nbsp;<span class="ident" id="7566135">samples</span>&nbsp;<span class="op" id="7566143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566147">samples</span><span class="op" id="7566154">[</span><span class="ident" id="7566155">i</span><span class="op" id="7566156">]</span>&nbsp;<span class="op" id="7566158">=</span>&nbsp;<span class="ident" id="7566160">r</span><span class="op" id="7566161">.</span><span class="ident" id="7566162">ExpFloat64</span><span class="op" id="7566172">(</span><span class="op" id="7566173">)</span>&nbsp;<span class="op" id="7566175">/</span>&nbsp;<span class="ident" id="7566177">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7566183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7566186">return</span>&nbsp;<span class="ident" id="7566193">samples</span><br>
<span class="lineno">160</span><span class="op" id="7566201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7566204">func</span>&nbsp;<span class="ident" id="7566209">testExponentialDistribution</span><span class="op" id="7566236">(</span><span class="ident" id="7566237">t</span>&nbsp;<span class="op" id="7566239">*</span><span class="ident" id="7566240">testing</span><span class="op" id="7566247">.</span><span class="ident" id="7566248">T</span><span class="op" id="7566249">,</span>&nbsp;<span class="ident" id="7566251">nsamples</span>&nbsp;<span class="builtintype" id="7566260">int</span><span class="op" id="7566263">,</span>&nbsp;<span class="ident" id="7566265">rate</span>&nbsp;<span class="builtintype" id="7566270">float64</span><span class="op" id="7566277">,</span>&nbsp;<span class="ident" id="7566279">seed</span>&nbsp;<span class="ident" id="7566284">int64</span><span class="op" id="7566289">)</span>&nbsp;<span class="op" id="7566291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7566294">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566373">mean</span>&nbsp;<span class="op" id="7566378">:=</span>&nbsp;<span class="num" id="7566381">1</span>&nbsp;<span class="op" id="7566383">/</span>&nbsp;<span class="ident" id="7566385">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566391">stddev</span>&nbsp;<span class="op" id="7566398">:=</span>&nbsp;<span class="ident" id="7566401">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566408">samples</span>&nbsp;<span class="op" id="7566416">:=</span>&nbsp;<span class="ident" id="7566419">generateExponentialSamples</span><span class="op" id="7566445">(</span><span class="ident" id="7566446">nsamples</span><span class="op" id="7566454">,</span>&nbsp;<span class="ident" id="7566456">rate</span><span class="op" id="7566460">,</span>&nbsp;<span class="ident" id="7566462">seed</span><span class="op" id="7566466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566469">errorScale</span>&nbsp;<span class="op" id="7566480">:=</span>&nbsp;<span class="ident" id="7566483">max</span><span class="op" id="7566486">(</span><span class="num" id="7566487">1.0</span><span class="op" id="7566490">,</span>&nbsp;<span class="num" id="7566492">1</span><span class="op" id="7566493">/</span><span class="ident" id="7566494">rate</span><span class="op" id="7566498">)</span>&nbsp;<span class="comment" id="7566500">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566546">expected</span>&nbsp;<span class="op" id="7566555">:=</span>&nbsp;<span class="op" id="7566558">&amp;</span><span class="ident" id="7566559">statsResults</span><span class="op" id="7566571">{</span><span class="ident" id="7566572">mean</span><span class="op" id="7566576">,</span>&nbsp;<span class="ident" id="7566578">stddev</span><span class="op" id="7566584">,</span>&nbsp;<span class="num" id="7566586">0.10</span>&nbsp;<span class="op" id="7566591">*</span>&nbsp;<span class="ident" id="7566593">errorScale</span><span class="op" id="7566603">,</span>&nbsp;<span class="num" id="7566605">0.20</span>&nbsp;<span class="op" id="7566610">*</span>&nbsp;<span class="ident" id="7566612">errorScale</span><span class="op" id="7566622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7566626">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566695">checkSampleDistribution</span><span class="op" id="7566718">(</span><span class="ident" id="7566719">t</span><span class="op" id="7566720">,</span>&nbsp;<span class="ident" id="7566722">samples</span><span class="op" id="7566729">,</span>&nbsp;<span class="ident" id="7566731">expected</span><span class="op" id="7566739">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7566743">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566818">checkSampleSliceDistributions</span><span class="op" id="7566847">(</span><span class="ident" id="7566848">t</span><span class="op" id="7566849">,</span>&nbsp;<span class="ident" id="7566851">samples</span><span class="op" id="7566858">,</span>&nbsp;<span class="num" id="7566860">2</span><span class="op" id="7566861">,</span>&nbsp;<span class="ident" id="7566863">expected</span><span class="op" id="7566871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7566875">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7566949">checkSampleSliceDistributions</span><span class="op" id="7566978">(</span><span class="ident" id="7566979">t</span><span class="op" id="7566980">,</span>&nbsp;<span class="ident" id="7566982">samples</span><span class="op" id="7566989">,</span>&nbsp;<span class="num" id="7566991">7</span><span class="op" id="7566992">,</span>&nbsp;<span class="ident" id="7566994">expected</span><span class="op" id="7567002">)</span><br>
<span class="lineno">180</span><span class="op" id="7567004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7567007">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7567024">func</span>&nbsp;<span class="ident" id="7567029">TestStandardExponentialValues</span><span class="op" id="7567058">(</span><span class="ident" id="7567059">t</span>&nbsp;<span class="op" id="7567061">*</span><span class="ident" id="7567062">testing</span><span class="op" id="7567069">.</span><span class="ident" id="7567070">T</span><span class="op" id="7567071">)</span>&nbsp;<span class="op" id="7567073">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7567076">for</span>&nbsp;<span class="ident" id="7567080">_</span><span class="op" id="7567081">,</span>&nbsp;<span class="ident" id="7567083">seed</span>&nbsp;<span class="op" id="7567088">:=</span>&nbsp;<span class="keyword" id="7567091">range</span>&nbsp;<span class="ident" id="7567097">testSeeds</span>&nbsp;<span class="op" id="7567107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567111">testExponentialDistribution</span><span class="op" id="7567138">(</span><span class="ident" id="7567139">t</span><span class="op" id="7567140">,</span>&nbsp;<span class="ident" id="7567142">numTestSamples</span><span class="op" id="7567156">,</span>&nbsp;<span class="num" id="7567158">1</span><span class="op" id="7567159">,</span>&nbsp;<span class="ident" id="7567161">seed</span><span class="op" id="7567165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7567168">}</span><br>
<span class="lineno"></span><span class="op" id="7567170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="7567173">func</span>&nbsp;<span class="ident" id="7567178">TestNonStandardExponentialValues</span><span class="op" id="7567210">(</span><span class="ident" id="7567211">t</span>&nbsp;<span class="op" id="7567213">*</span><span class="ident" id="7567214">testing</span><span class="op" id="7567221">.</span><span class="ident" id="7567222">T</span><span class="op" id="7567223">)</span>&nbsp;<span class="op" id="7567225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7567228">for</span>&nbsp;<span class="ident" id="7567232">rate</span>&nbsp;<span class="op" id="7567237">:=</span>&nbsp;<span class="num" id="7567240">0.05</span><span class="op" id="7567244">;</span>&nbsp;<span class="ident" id="7567246">rate</span>&nbsp;<span class="op" id="7567251">&lt;</span>&nbsp;<span class="num" id="7567253">10</span><span class="op" id="7567255">;</span>&nbsp;<span class="ident" id="7567257">rate</span>&nbsp;<span class="op" id="7567262">*=</span>&nbsp;<span class="num" id="7567265">2</span>&nbsp;<span class="op" id="7567267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7567271">for</span>&nbsp;<span class="ident" id="7567275">_</span><span class="op" id="7567276">,</span>&nbsp;<span class="ident" id="7567278">seed</span>&nbsp;<span class="op" id="7567283">:=</span>&nbsp;<span class="keyword" id="7567286">range</span>&nbsp;<span class="ident" id="7567292">testSeeds</span>&nbsp;<span class="op" id="7567302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567307">testExponentialDistribution</span><span class="op" id="7567334">(</span><span class="ident" id="7567335">t</span><span class="op" id="7567336">,</span>&nbsp;<span class="ident" id="7567338">numTestSamples</span><span class="op" id="7567352">,</span>&nbsp;<span class="ident" id="7567354">rate</span><span class="op" id="7567358">,</span>&nbsp;<span class="ident" id="7567360">seed</span><span class="op" id="7567364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7567369">if</span>&nbsp;<span class="ident" id="7567372">testing</span><span class="op" id="7567379">.</span><span class="ident" id="7567380">Short</span><span class="op" id="7567385">(</span><span class="op" id="7567386">)</span>&nbsp;<span class="op" id="7567388">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7567394">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7567403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7567407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7567410">}</span><br>
<span class="lineno"></span><span class="op" id="7567412">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="7567415">//</span><br>
<span class="lineno"></span><span class="comment" id="7567418">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7567444">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="7567448">func</span>&nbsp;<span class="ident" id="7567453">initNorm</span><span class="op" id="7567461">(</span><span class="op" id="7567462">)</span>&nbsp;<span class="op" id="7567464">(</span><span class="ident" id="7567465">testKn</span>&nbsp;<span class="op" id="7567472">[</span><span class="op" id="7567473">]</span><span class="builtintype" id="7567474">uint32</span><span class="op" id="7567480">,</span>&nbsp;<span class="ident" id="7567482">testWn</span><span class="op" id="7567488">,</span>&nbsp;<span class="ident" id="7567490">testFn</span>&nbsp;<span class="op" id="7567497">[</span><span class="op" id="7567498">]</span><span class="builtintype" id="7567499">float32</span><span class="op" id="7567506">)</span>&nbsp;<span class="op" id="7567508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7567511">const</span>&nbsp;<span class="ident" id="7567517">m1</span>&nbsp;<span class="op" id="7567520">=</span>&nbsp;<span class="num" id="7567522">1</span>&nbsp;<span class="op" id="7567524">&lt;&lt;</span>&nbsp;<span class="num" id="7567527">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7567531">var</span>&nbsp;<span class="op" id="7567535">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567539">dn</span>&nbsp;<span class="builtintype" id="7567542">float64</span>&nbsp;<span class="op" id="7567550">=</span>&nbsp;<span class="ident" id="7567552">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567557">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7567568">=</span>&nbsp;<span class="ident" id="7567570">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567575">vn</span>&nbsp;<span class="builtintype" id="7567578">float64</span>&nbsp;<span class="op" id="7567586">=</span>&nbsp;<span class="num" id="7567588">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7567609">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567613">testKn</span>&nbsp;<span class="op" id="7567620">=</span>&nbsp;<span class="builtinfunc" id="7567622">make</span><span class="op" id="7567626">(</span><span class="op" id="7567627">[</span><span class="op" id="7567628">]</span><span class="builtintype" id="7567629">uint32</span><span class="op" id="7567635">,</span>&nbsp;<span class="num" id="7567637">128</span><span class="op" id="7567640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567643">testWn</span>&nbsp;<span class="op" id="7567650">=</span>&nbsp;<span class="builtinfunc" id="7567652">make</span><span class="op" id="7567656">(</span><span class="op" id="7567657">[</span><span class="op" id="7567658">]</span><span class="builtintype" id="7567659">float32</span><span class="op" id="7567666">,</span>&nbsp;<span class="num" id="7567668">128</span><span class="op" id="7567671">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567674">testFn</span>&nbsp;<span class="op" id="7567681">=</span>&nbsp;<span class="builtinfunc" id="7567683">make</span><span class="op" id="7567687">(</span><span class="op" id="7567688">[</span><span class="op" id="7567689">]</span><span class="builtintype" id="7567690">float32</span><span class="op" id="7567697">,</span>&nbsp;<span class="num" id="7567699">128</span><span class="op" id="7567702">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567706">q</span>&nbsp;<span class="op" id="7567708">:=</span>&nbsp;<span class="ident" id="7567711">vn</span>&nbsp;<span class="op" id="7567714">/</span>&nbsp;<span class="ident" id="7567716">math</span><span class="op" id="7567720">.</span><span class="ident" id="7567721">Exp</span><span class="op" id="7567724">(</span><span class="op" id="7567725">-</span><span class="num" id="7567726">0.5</span><span class="op" id="7567729">*</span><span class="ident" id="7567730">dn</span><span class="op" id="7567732">*</span><span class="ident" id="7567733">dn</span><span class="op" id="7567735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567738">testKn</span><span class="op" id="7567744">[</span><span class="num" id="7567745">0</span><span class="op" id="7567746">]</span>&nbsp;<span class="op" id="7567748">=</span>&nbsp;<span class="builtintype" id="7567750">uint32</span><span class="op" id="7567756">(</span><span class="op" id="7567757">(</span><span class="ident" id="7567758">dn</span>&nbsp;<span class="op" id="7567761">/</span>&nbsp;<span class="ident" id="7567763">q</span><span class="op" id="7567764">)</span>&nbsp;<span class="op" id="7567766">*</span>&nbsp;<span class="ident" id="7567768">m1</span><span class="op" id="7567770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567773">testKn</span><span class="op" id="7567779">[</span><span class="num" id="7567780">1</span><span class="op" id="7567781">]</span>&nbsp;<span class="op" id="7567783">=</span>&nbsp;<span class="num" id="7567785">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567788">testWn</span><span class="op" id="7567794">[</span><span class="num" id="7567795">0</span><span class="op" id="7567796">]</span>&nbsp;<span class="op" id="7567798">=</span>&nbsp;<span class="builtintype" id="7567800">float32</span><span class="op" id="7567807">(</span><span class="ident" id="7567808">q</span>&nbsp;<span class="op" id="7567810">/</span>&nbsp;<span class="ident" id="7567812">m1</span><span class="op" id="7567814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567817">testWn</span><span class="op" id="7567823">[</span><span class="num" id="7567824">127</span><span class="op" id="7567827">]</span>&nbsp;<span class="op" id="7567829">=</span>&nbsp;<span class="builtintype" id="7567831">float32</span><span class="op" id="7567838">(</span><span class="ident" id="7567839">dn</span>&nbsp;<span class="op" id="7567842">/</span>&nbsp;<span class="ident" id="7567844">m1</span><span class="op" id="7567846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567849">testFn</span><span class="op" id="7567855">[</span><span class="num" id="7567856">0</span><span class="op" id="7567857">]</span>&nbsp;<span class="op" id="7567859">=</span>&nbsp;<span class="num" id="7567861">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567866">testFn</span><span class="op" id="7567872">[</span><span class="num" id="7567873">127</span><span class="op" id="7567876">]</span>&nbsp;<span class="op" id="7567878">=</span>&nbsp;<span class="builtintype" id="7567880">float32</span><span class="op" id="7567887">(</span><span class="ident" id="7567888">math</span><span class="op" id="7567892">.</span><span class="ident" id="7567893">Exp</span><span class="op" id="7567896">(</span><span class="op" id="7567897">-</span><span class="num" id="7567898">0.5</span>&nbsp;<span class="op" id="7567902">*</span>&nbsp;<span class="ident" id="7567904">dn</span>&nbsp;<span class="op" id="7567907">*</span>&nbsp;<span class="ident" id="7567909">dn</span><span class="op" id="7567911">)</span><span class="op" id="7567912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7567915">for</span>&nbsp;<span class="ident" id="7567919">i</span>&nbsp;<span class="op" id="7567921">:=</span>&nbsp;<span class="num" id="7567924">126</span><span class="op" id="7567927">;</span>&nbsp;<span class="ident" id="7567929">i</span>&nbsp;<span class="op" id="7567931">&gt;=</span>&nbsp;<span class="num" id="7567934">1</span><span class="op" id="7567935">;</span>&nbsp;<span class="ident" id="7567937">i</span><span class="op" id="7567938">--</span>&nbsp;<span class="op" id="7567941">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7567945">dn</span>&nbsp;<span class="op" id="7567948">=</span>&nbsp;<span class="ident" id="7567950">math</span><span class="op" id="7567954">.</span><span class="ident" id="7567955">Sqrt</span><span class="op" id="7567959">(</span><span class="op" id="7567960">-</span><span class="num" id="7567961">2.0</span>&nbsp;<span class="op" id="7567965">*</span>&nbsp;<span class="ident" id="7567967">math</span><span class="op" id="7567971">.</span><span class="ident" id="7567972">Log</span><span class="op" id="7567975">(</span><span class="ident" id="7567976">vn</span><span class="op" id="7567978">/</span><span class="ident" id="7567979">dn</span><span class="op" id="7567981">+</span><span class="ident" id="7567982">math</span><span class="op" id="7567986">.</span><span class="ident" id="7567987">Exp</span><span class="op" id="7567990">(</span><span class="op" id="7567991">-</span><span class="num" id="7567992">0.5</span><span class="op" id="7567995">*</span><span class="ident" id="7567996">dn</span><span class="op" id="7567998">*</span><span class="ident" id="7567999">dn</span><span class="op" id="7568001">)</span><span class="op" id="7568002">)</span><span class="op" id="7568003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568007">testKn</span><span class="op" id="7568013">[</span><span class="ident" id="7568014">i</span><span class="op" id="7568015">+</span><span class="num" id="7568016">1</span><span class="op" id="7568017">]</span>&nbsp;<span class="op" id="7568019">=</span>&nbsp;<span class="builtintype" id="7568021">uint32</span><span class="op" id="7568027">(</span><span class="op" id="7568028">(</span><span class="ident" id="7568029">dn</span>&nbsp;<span class="op" id="7568032">/</span>&nbsp;<span class="ident" id="7568034">tn</span><span class="op" id="7568036">)</span>&nbsp;<span class="op" id="7568038">*</span>&nbsp;<span class="ident" id="7568040">m1</span><span class="op" id="7568042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568046">tn</span>&nbsp;<span class="op" id="7568049">=</span>&nbsp;<span class="ident" id="7568051">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568056">testFn</span><span class="op" id="7568062">[</span><span class="ident" id="7568063">i</span><span class="op" id="7568064">]</span>&nbsp;<span class="op" id="7568066">=</span>&nbsp;<span class="builtintype" id="7568068">float32</span><span class="op" id="7568075">(</span><span class="ident" id="7568076">math</span><span class="op" id="7568080">.</span><span class="ident" id="7568081">Exp</span><span class="op" id="7568084">(</span><span class="op" id="7568085">-</span><span class="num" id="7568086">0.5</span>&nbsp;<span class="op" id="7568090">*</span>&nbsp;<span class="ident" id="7568092">dn</span>&nbsp;<span class="op" id="7568095">*</span>&nbsp;<span class="ident" id="7568097">dn</span><span class="op" id="7568099">)</span><span class="op" id="7568100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568104">testWn</span><span class="op" id="7568110">[</span><span class="ident" id="7568111">i</span><span class="op" id="7568112">]</span>&nbsp;<span class="op" id="7568114">=</span>&nbsp;<span class="builtintype" id="7568116">float32</span><span class="op" id="7568123">(</span><span class="ident" id="7568124">dn</span>&nbsp;<span class="op" id="7568127">/</span>&nbsp;<span class="ident" id="7568129">m1</span><span class="op" id="7568131">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7568134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7568137">return</span><br>
<span class="lineno"></span><span class="op" id="7568144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7568147">func</span>&nbsp;<span class="ident" id="7568152">initExp</span><span class="op" id="7568159">(</span><span class="op" id="7568160">)</span>&nbsp;<span class="op" id="7568162">(</span><span class="ident" id="7568163">testKe</span>&nbsp;<span class="op" id="7568170">[</span><span class="op" id="7568171">]</span><span class="builtintype" id="7568172">uint32</span><span class="op" id="7568178">,</span>&nbsp;<span class="ident" id="7568180">testWe</span><span class="op" id="7568186">,</span>&nbsp;<span class="ident" id="7568188">testFe</span>&nbsp;<span class="op" id="7568195">[</span><span class="op" id="7568196">]</span><span class="builtintype" id="7568197">float32</span><span class="op" id="7568204">)</span>&nbsp;<span class="op" id="7568206">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7568209">const</span>&nbsp;<span class="ident" id="7568215">m2</span>&nbsp;<span class="op" id="7568218">=</span>&nbsp;<span class="num" id="7568220">1</span>&nbsp;<span class="op" id="7568222">&lt;&lt;</span>&nbsp;<span class="num" id="7568225">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7568229">var</span>&nbsp;<span class="op" id="7568233">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568237">de</span>&nbsp;<span class="builtintype" id="7568240">float64</span>&nbsp;<span class="op" id="7568248">=</span>&nbsp;<span class="ident" id="7568250">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568255">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7568266">=</span>&nbsp;<span class="ident" id="7568268">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568273">ve</span>&nbsp;<span class="builtintype" id="7568276">float64</span>&nbsp;<span class="op" id="7568284">=</span>&nbsp;<span class="num" id="7568286">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7568312">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568316">testKe</span>&nbsp;<span class="op" id="7568323">=</span>&nbsp;<span class="builtinfunc" id="7568325">make</span><span class="op" id="7568329">(</span><span class="op" id="7568330">[</span><span class="op" id="7568331">]</span><span class="builtintype" id="7568332">uint32</span><span class="op" id="7568338">,</span>&nbsp;<span class="num" id="7568340">256</span><span class="op" id="7568343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568346">testWe</span>&nbsp;<span class="op" id="7568353">=</span>&nbsp;<span class="builtinfunc" id="7568355">make</span><span class="op" id="7568359">(</span><span class="op" id="7568360">[</span><span class="op" id="7568361">]</span><span class="builtintype" id="7568362">float32</span><span class="op" id="7568369">,</span>&nbsp;<span class="num" id="7568371">256</span><span class="op" id="7568374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568377">testFe</span>&nbsp;<span class="op" id="7568384">=</span>&nbsp;<span class="builtinfunc" id="7568386">make</span><span class="op" id="7568390">(</span><span class="op" id="7568391">[</span><span class="op" id="7568392">]</span><span class="builtintype" id="7568393">float32</span><span class="op" id="7568400">,</span>&nbsp;<span class="num" id="7568402">256</span><span class="op" id="7568405">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568409">q</span>&nbsp;<span class="op" id="7568411">:=</span>&nbsp;<span class="ident" id="7568414">ve</span>&nbsp;<span class="op" id="7568417">/</span>&nbsp;<span class="ident" id="7568419">math</span><span class="op" id="7568423">.</span><span class="ident" id="7568424">Exp</span><span class="op" id="7568427">(</span><span class="op" id="7568428">-</span><span class="ident" id="7568429">de</span><span class="op" id="7568431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568434">testKe</span><span class="op" id="7568440">[</span><span class="num" id="7568441">0</span><span class="op" id="7568442">]</span>&nbsp;<span class="op" id="7568444">=</span>&nbsp;<span class="builtintype" id="7568446">uint32</span><span class="op" id="7568452">(</span><span class="op" id="7568453">(</span><span class="ident" id="7568454">de</span>&nbsp;<span class="op" id="7568457">/</span>&nbsp;<span class="ident" id="7568459">q</span><span class="op" id="7568460">)</span>&nbsp;<span class="op" id="7568462">*</span>&nbsp;<span class="ident" id="7568464">m2</span><span class="op" id="7568466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568469">testKe</span><span class="op" id="7568475">[</span><span class="num" id="7568476">1</span><span class="op" id="7568477">]</span>&nbsp;<span class="op" id="7568479">=</span>&nbsp;<span class="num" id="7568481">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568484">testWe</span><span class="op" id="7568490">[</span><span class="num" id="7568491">0</span><span class="op" id="7568492">]</span>&nbsp;<span class="op" id="7568494">=</span>&nbsp;<span class="builtintype" id="7568496">float32</span><span class="op" id="7568503">(</span><span class="ident" id="7568504">q</span>&nbsp;<span class="op" id="7568506">/</span>&nbsp;<span class="ident" id="7568508">m2</span><span class="op" id="7568510">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568513">testWe</span><span class="op" id="7568519">[</span><span class="num" id="7568520">255</span><span class="op" id="7568523">]</span>&nbsp;<span class="op" id="7568525">=</span>&nbsp;<span class="builtintype" id="7568527">float32</span><span class="op" id="7568534">(</span><span class="ident" id="7568535">de</span>&nbsp;<span class="op" id="7568538">/</span>&nbsp;<span class="ident" id="7568540">m2</span><span class="op" id="7568542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568545">testFe</span><span class="op" id="7568551">[</span><span class="num" id="7568552">0</span><span class="op" id="7568553">]</span>&nbsp;<span class="op" id="7568555">=</span>&nbsp;<span class="num" id="7568557">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568562">testFe</span><span class="op" id="7568568">[</span><span class="num" id="7568569">255</span><span class="op" id="7568572">]</span>&nbsp;<span class="op" id="7568574">=</span>&nbsp;<span class="builtintype" id="7568576">float32</span><span class="op" id="7568583">(</span><span class="ident" id="7568584">math</span><span class="op" id="7568588">.</span><span class="ident" id="7568589">Exp</span><span class="op" id="7568592">(</span><span class="op" id="7568593">-</span><span class="ident" id="7568594">de</span><span class="op" id="7568596">)</span><span class="op" id="7568597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7568600">for</span>&nbsp;<span class="ident" id="7568604">i</span>&nbsp;<span class="op" id="7568606">:=</span>&nbsp;<span class="num" id="7568609">254</span><span class="op" id="7568612">;</span>&nbsp;<span class="ident" id="7568614">i</span>&nbsp;<span class="op" id="7568616">&gt;=</span>&nbsp;<span class="num" id="7568619">1</span><span class="op" id="7568620">;</span>&nbsp;<span class="ident" id="7568622">i</span><span class="op" id="7568623">--</span>&nbsp;<span class="op" id="7568626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568630">de</span>&nbsp;<span class="op" id="7568633">=</span>&nbsp;<span class="op" id="7568635">-</span><span class="ident" id="7568636">math</span><span class="op" id="7568640">.</span><span class="ident" id="7568641">Log</span><span class="op" id="7568644">(</span><span class="ident" id="7568645">ve</span><span class="op" id="7568647">/</span><span class="ident" id="7568648">de</span>&nbsp;<span class="op" id="7568651">+</span>&nbsp;<span class="ident" id="7568653">math</span><span class="op" id="7568657">.</span><span class="ident" id="7568658">Exp</span><span class="op" id="7568661">(</span><span class="op" id="7568662">-</span><span class="ident" id="7568663">de</span><span class="op" id="7568665">)</span><span class="op" id="7568666">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568670">testKe</span><span class="op" id="7568676">[</span><span class="ident" id="7568677">i</span><span class="op" id="7568678">+</span><span class="num" id="7568679">1</span><span class="op" id="7568680">]</span>&nbsp;<span class="op" id="7568682">=</span>&nbsp;<span class="builtintype" id="7568684">uint32</span><span class="op" id="7568690">(</span><span class="op" id="7568691">(</span><span class="ident" id="7568692">de</span>&nbsp;<span class="op" id="7568695">/</span>&nbsp;<span class="ident" id="7568697">te</span><span class="op" id="7568699">)</span>&nbsp;<span class="op" id="7568701">*</span>&nbsp;<span class="ident" id="7568703">m2</span><span class="op" id="7568705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568709">te</span>&nbsp;<span class="op" id="7568712">=</span>&nbsp;<span class="ident" id="7568714">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568719">testFe</span><span class="op" id="7568725">[</span><span class="ident" id="7568726">i</span><span class="op" id="7568727">]</span>&nbsp;<span class="op" id="7568729">=</span>&nbsp;<span class="builtintype" id="7568731">float32</span><span class="op" id="7568738">(</span><span class="ident" id="7568739">math</span><span class="op" id="7568743">.</span><span class="ident" id="7568744">Exp</span><span class="op" id="7568747">(</span><span class="op" id="7568748">-</span><span class="ident" id="7568749">de</span><span class="op" id="7568751">)</span><span class="op" id="7568752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7568756">testWe</span><span class="op" id="7568762">[</span><span class="ident" id="7568763">i</span><span class="op" id="7568764">]</span>&nbsp;<span class="op" id="7568766">=</span>&nbsp;<span class="builtintype" id="7568768">float32</span><span class="op" id="7568775">(</span><span class="ident" id="7568776">de</span>&nbsp;<span class="op" id="7568779">/</span>&nbsp;<span class="ident" id="7568781">m2</span><span class="op" id="7568783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7568786">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7568789">return</span><br>
<span class="lineno"></span><span class="op" id="7568796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7568799">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7568867">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="7568931">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7568949">func</span>&nbsp;<span class="ident" id="7568954">compareUint32Slices</span><span class="op" id="7568973">(</span><span class="ident" id="7568974">s1</span><span class="op" id="7568976">,</span>&nbsp;<span class="ident" id="7568978">s2</span>&nbsp;<span class="op" id="7568981">[</span><span class="op" id="7568982">]</span><span class="builtintype" id="7568983">uint32</span><span class="op" id="7568989">)</span>&nbsp;<span class="builtintype" id="7568991">int</span>&nbsp;<span class="op" id="7568995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7568998">if</span>&nbsp;<span class="builtinfunc" id="7569001">len</span><span class="op" id="7569004">(</span><span class="ident" id="7569005">s1</span><span class="op" id="7569007">)</span>&nbsp;<span class="op" id="7569009">!=</span>&nbsp;<span class="builtinfunc" id="7569012">len</span><span class="op" id="7569015">(</span><span class="ident" id="7569016">s2</span><span class="op" id="7569018">)</span>&nbsp;<span class="op" id="7569020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569024">if</span>&nbsp;<span class="builtinfunc" id="7569027">len</span><span class="op" id="7569030">(</span><span class="ident" id="7569031">s1</span><span class="op" id="7569033">)</span>&nbsp;<span class="op" id="7569035">&gt;</span>&nbsp;<span class="builtinfunc" id="7569037">len</span><span class="op" id="7569040">(</span><span class="ident" id="7569041">s2</span><span class="op" id="7569043">)</span>&nbsp;<span class="op" id="7569045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569050">return</span>&nbsp;<span class="builtinfunc" id="7569057">len</span><span class="op" id="7569060">(</span><span class="ident" id="7569061">s2</span><span class="op" id="7569063">)</span>&nbsp;<span class="op" id="7569065">+</span>&nbsp;<span class="num" id="7569067">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7569071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569075">return</span>&nbsp;<span class="builtinfunc" id="7569082">len</span><span class="op" id="7569085">(</span><span class="ident" id="7569086">s1</span><span class="op" id="7569088">)</span>&nbsp;<span class="op" id="7569090">+</span>&nbsp;<span class="num" id="7569092">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7569095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569098">for</span>&nbsp;<span class="ident" id="7569102">i</span>&nbsp;<span class="op" id="7569104">:=</span>&nbsp;<span class="keyword" id="7569107">range</span>&nbsp;<span class="ident" id="7569113">s1</span>&nbsp;<span class="op" id="7569116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569120">if</span>&nbsp;<span class="ident" id="7569123">s1</span><span class="op" id="7569125">[</span><span class="ident" id="7569126">i</span><span class="op" id="7569127">]</span>&nbsp;<span class="op" id="7569129">!=</span>&nbsp;<span class="ident" id="7569132">s2</span><span class="op" id="7569134">[</span><span class="ident" id="7569135">i</span><span class="op" id="7569136">]</span>&nbsp;<span class="op" id="7569138">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569143">return</span>&nbsp;<span class="ident" id="7569150">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7569154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7569157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569160">return</span>&nbsp;<span class="op" id="7569167">-</span><span class="num" id="7569168">1</span><br>
<span class="lineno"></span><span class="op" id="7569170">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="7569173">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7569242">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="7569306">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7569324">func</span>&nbsp;<span class="ident" id="7569329">compareFloat32Slices</span><span class="op" id="7569349">(</span><span class="ident" id="7569350">s1</span><span class="op" id="7569352">,</span>&nbsp;<span class="ident" id="7569354">s2</span>&nbsp;<span class="op" id="7569357">[</span><span class="op" id="7569358">]</span><span class="builtintype" id="7569359">float32</span><span class="op" id="7569366">)</span>&nbsp;<span class="builtintype" id="7569368">int</span>&nbsp;<span class="op" id="7569372">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569375">if</span>&nbsp;<span class="builtinfunc" id="7569378">len</span><span class="op" id="7569381">(</span><span class="ident" id="7569382">s1</span><span class="op" id="7569384">)</span>&nbsp;<span class="op" id="7569386">!=</span>&nbsp;<span class="builtinfunc" id="7569389">len</span><span class="op" id="7569392">(</span><span class="ident" id="7569393">s2</span><span class="op" id="7569395">)</span>&nbsp;<span class="op" id="7569397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569401">if</span>&nbsp;<span class="builtinfunc" id="7569404">len</span><span class="op" id="7569407">(</span><span class="ident" id="7569408">s1</span><span class="op" id="7569410">)</span>&nbsp;<span class="op" id="7569412">&gt;</span>&nbsp;<span class="builtinfunc" id="7569414">len</span><span class="op" id="7569417">(</span><span class="ident" id="7569418">s2</span><span class="op" id="7569420">)</span>&nbsp;<span class="op" id="7569422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569427">return</span>&nbsp;<span class="builtinfunc" id="7569434">len</span><span class="op" id="7569437">(</span><span class="ident" id="7569438">s2</span><span class="op" id="7569440">)</span>&nbsp;<span class="op" id="7569442">+</span>&nbsp;<span class="num" id="7569444">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7569448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569452">return</span>&nbsp;<span class="builtinfunc" id="7569459">len</span><span class="op" id="7569462">(</span><span class="ident" id="7569463">s1</span><span class="op" id="7569465">)</span>&nbsp;<span class="op" id="7569467">+</span>&nbsp;<span class="num" id="7569469">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7569472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569475">for</span>&nbsp;<span class="ident" id="7569479">i</span>&nbsp;<span class="op" id="7569481">:=</span>&nbsp;<span class="keyword" id="7569484">range</span>&nbsp;<span class="ident" id="7569490">s1</span>&nbsp;<span class="op" id="7569493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569497">if</span>&nbsp;<span class="op" id="7569500">!</span><span class="ident" id="7569501">nearEqual</span><span class="op" id="7569510">(</span><span class="builtintype" id="7569511">float64</span><span class="op" id="7569518">(</span><span class="ident" id="7569519">s1</span><span class="op" id="7569521">[</span><span class="ident" id="7569522">i</span><span class="op" id="7569523">]</span><span class="op" id="7569524">)</span><span class="op" id="7569525">,</span>&nbsp;<span class="builtintype" id="7569527">float64</span><span class="op" id="7569534">(</span><span class="ident" id="7569535">s2</span><span class="op" id="7569537">[</span><span class="ident" id="7569538">i</span><span class="op" id="7569539">]</span><span class="op" id="7569540">)</span><span class="op" id="7569541">,</span>&nbsp;<span class="num" id="7569543">0</span><span class="op" id="7569544">,</span>&nbsp;<span class="num" id="7569546">1e-7</span><span class="op" id="7569550">)</span>&nbsp;<span class="op" id="7569552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569557">return</span>&nbsp;<span class="ident" id="7569564">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7569568">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7569571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569574">return</span>&nbsp;<span class="op" id="7569581">-</span><span class="num" id="7569582">1</span><br>
<span class="lineno"></span><span class="op" id="7569584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7569587">func</span>&nbsp;<span class="ident" id="7569592">TestNormTables</span><span class="op" id="7569606">(</span><span class="ident" id="7569607">t</span>&nbsp;<span class="op" id="7569609">*</span><span class="ident" id="7569610">testing</span><span class="op" id="7569617">.</span><span class="ident" id="7569618">T</span><span class="op" id="7569619">)</span>&nbsp;<span class="op" id="7569621">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7569624">testKn</span><span class="op" id="7569630">,</span>&nbsp;<span class="ident" id="7569632">testWn</span><span class="op" id="7569638">,</span>&nbsp;<span class="ident" id="7569640">testFn</span>&nbsp;<span class="op" id="7569647">:=</span>&nbsp;<span class="ident" id="7569650">initNorm</span><span class="op" id="7569658">(</span><span class="op" id="7569659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569662">if</span>&nbsp;<span class="ident" id="7569665">i</span>&nbsp;<span class="op" id="7569667">:=</span>&nbsp;<span class="ident" id="7569670">compareUint32Slices</span><span class="op" id="7569689">(</span><span class="ident" id="7569690">kn</span><span class="op" id="7569692">[</span><span class="num" id="7569693">0</span><span class="op" id="7569694">:</span><span class="op" id="7569695">]</span><span class="op" id="7569696">,</span>&nbsp;<span class="ident" id="7569698">testKn</span><span class="op" id="7569704">)</span><span class="op" id="7569705">;</span>&nbsp;<span class="ident" id="7569707">i</span>&nbsp;<span class="op" id="7569709">&gt;=</span>&nbsp;<span class="num" id="7569712">0</span>&nbsp;<span class="op" id="7569714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7569718">t</span><span class="op" id="7569719">.</span><span class="ident" id="7569720">Errorf</span><span class="op" id="7569726">(</span><span class="string" id="7569727">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7569763">,</span>&nbsp;<span class="ident" id="7569765">i</span><span class="op" id="7569766">,</span>&nbsp;<span class="ident" id="7569768">kn</span><span class="op" id="7569770">[</span><span class="ident" id="7569771">i</span><span class="op" id="7569772">]</span><span class="op" id="7569773">,</span>&nbsp;<span class="ident" id="7569775">testKn</span><span class="op" id="7569781">[</span><span class="ident" id="7569782">i</span><span class="op" id="7569783">]</span><span class="op" id="7569784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7569787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569790">if</span>&nbsp;<span class="ident" id="7569793">i</span>&nbsp;<span class="op" id="7569795">:=</span>&nbsp;<span class="ident" id="7569798">compareFloat32Slices</span><span class="op" id="7569818">(</span><span class="ident" id="7569819">wn</span><span class="op" id="7569821">[</span><span class="num" id="7569822">0</span><span class="op" id="7569823">:</span><span class="op" id="7569824">]</span><span class="op" id="7569825">,</span>&nbsp;<span class="ident" id="7569827">testWn</span><span class="op" id="7569833">)</span><span class="op" id="7569834">;</span>&nbsp;<span class="ident" id="7569836">i</span>&nbsp;<span class="op" id="7569838">&gt;=</span>&nbsp;<span class="num" id="7569841">0</span>&nbsp;<span class="op" id="7569843">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7569847">t</span><span class="op" id="7569848">.</span><span class="ident" id="7569849">Errorf</span><span class="op" id="7569855">(</span><span class="string" id="7569856">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7569892">,</span>&nbsp;<span class="ident" id="7569894">i</span><span class="op" id="7569895">,</span>&nbsp;<span class="ident" id="7569897">wn</span><span class="op" id="7569899">[</span><span class="ident" id="7569900">i</span><span class="op" id="7569901">]</span><span class="op" id="7569902">,</span>&nbsp;<span class="ident" id="7569904">testWn</span><span class="op" id="7569910">[</span><span class="ident" id="7569911">i</span><span class="op" id="7569912">]</span><span class="op" id="7569913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7569916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7569919">if</span>&nbsp;<span class="ident" id="7569922">i</span>&nbsp;<span class="op" id="7569924">:=</span>&nbsp;<span class="ident" id="7569927">compareFloat32Slices</span><span class="op" id="7569947">(</span><span class="ident" id="7569948">fn</span><span class="op" id="7569950">[</span><span class="num" id="7569951">0</span><span class="op" id="7569952">:</span><span class="op" id="7569953">]</span><span class="op" id="7569954">,</span>&nbsp;<span class="ident" id="7569956">testFn</span><span class="op" id="7569962">)</span><span class="op" id="7569963">;</span>&nbsp;<span class="ident" id="7569965">i</span>&nbsp;<span class="op" id="7569967">&gt;=</span>&nbsp;<span class="num" id="7569970">0</span>&nbsp;<span class="op" id="7569972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7569976">t</span><span class="op" id="7569977">.</span><span class="ident" id="7569978">Errorf</span><span class="op" id="7569984">(</span><span class="string" id="7569985">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7570021">,</span>&nbsp;<span class="ident" id="7570023">i</span><span class="op" id="7570024">,</span>&nbsp;<span class="ident" id="7570026">fn</span><span class="op" id="7570028">[</span><span class="ident" id="7570029">i</span><span class="op" id="7570030">]</span><span class="op" id="7570031">,</span>&nbsp;<span class="ident" id="7570033">testFn</span><span class="op" id="7570039">[</span><span class="ident" id="7570040">i</span><span class="op" id="7570041">]</span><span class="op" id="7570042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7570045">}</span><br>
<span class="lineno">310</span><span class="op" id="7570047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7570050">func</span>&nbsp;<span class="ident" id="7570055">TestExpTables</span><span class="op" id="7570068">(</span><span class="ident" id="7570069">t</span>&nbsp;<span class="op" id="7570071">*</span><span class="ident" id="7570072">testing</span><span class="op" id="7570079">.</span><span class="ident" id="7570080">T</span><span class="op" id="7570081">)</span>&nbsp;<span class="op" id="7570083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7570086">testKe</span><span class="op" id="7570092">,</span>&nbsp;<span class="ident" id="7570094">testWe</span><span class="op" id="7570100">,</span>&nbsp;<span class="ident" id="7570102">testFe</span>&nbsp;<span class="op" id="7570109">:=</span>&nbsp;<span class="ident" id="7570112">initExp</span><span class="op" id="7570119">(</span><span class="op" id="7570120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7570123">if</span>&nbsp;<span class="ident" id="7570126">i</span>&nbsp;<span class="op" id="7570128">:=</span>&nbsp;<span class="ident" id="7570131">compareUint32Slices</span><span class="op" id="7570150">(</span><span class="ident" id="7570151">ke</span><span class="op" id="7570153">[</span><span class="num" id="7570154">0</span><span class="op" id="7570155">:</span><span class="op" id="7570156">]</span><span class="op" id="7570157">,</span>&nbsp;<span class="ident" id="7570159">testKe</span><span class="op" id="7570165">)</span><span class="op" id="7570166">;</span>&nbsp;<span class="ident" id="7570168">i</span>&nbsp;<span class="op" id="7570170">&gt;=</span>&nbsp;<span class="num" id="7570173">0</span>&nbsp;<span class="op" id="7570175">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7570179">t</span><span class="op" id="7570180">.</span><span class="ident" id="7570181">Errorf</span><span class="op" id="7570187">(</span><span class="string" id="7570188">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7570224">,</span>&nbsp;<span class="ident" id="7570226">i</span><span class="op" id="7570227">,</span>&nbsp;<span class="ident" id="7570229">ke</span><span class="op" id="7570231">[</span><span class="ident" id="7570232">i</span><span class="op" id="7570233">]</span><span class="op" id="7570234">,</span>&nbsp;<span class="ident" id="7570236">testKe</span><span class="op" id="7570242">[</span><span class="ident" id="7570243">i</span><span class="op" id="7570244">]</span><span class="op" id="7570245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7570248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7570251">if</span>&nbsp;<span class="ident" id="7570254">i</span>&nbsp;<span class="op" id="7570256">:=</span>&nbsp;<span class="ident" id="7570259">compareFloat32Slices</span><span class="op" id="7570279">(</span><span class="ident" id="7570280">we</span><span class="op" id="7570282">[</span><span class="num" id="7570283">0</span><span class="op" id="7570284">:</span><span class="op" id="7570285">]</span><span class="op" id="7570286">,</span>&nbsp;<span class="ident" id="7570288">testWe</span><span class="op" id="7570294">)</span><span class="op" id="7570295">;</span>&nbsp;<span class="ident" id="7570297">i</span>&nbsp;<span class="op" id="7570299">&gt;=</span>&nbsp;<span class="num" id="7570302">0</span>&nbsp;<span class="op" id="7570304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7570308">t</span><span class="op" id="7570309">.</span><span class="ident" id="7570310">Errorf</span><span class="op" id="7570316">(</span><span class="string" id="7570317">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7570353">,</span>&nbsp;<span class="ident" id="7570355">i</span><span class="op" id="7570356">,</span>&nbsp;<span class="ident" id="7570358">we</span><span class="op" id="7570360">[</span><span class="ident" id="7570361">i</span><span class="op" id="7570362">]</span><span class="op" id="7570363">,</span>&nbsp;<span class="ident" id="7570365">testWe</span><span class="op" id="7570371">[</span><span class="ident" id="7570372">i</span><span class="op" id="7570373">]</span><span class="op" id="7570374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7570377">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7570380">if</span>&nbsp;<span class="ident" id="7570383">i</span>&nbsp;<span class="op" id="7570385">:=</span>&nbsp;<span class="ident" id="7570388">compareFloat32Slices</span><span class="op" id="7570408">(</span><span class="ident" id="7570409">fe</span><span class="op" id="7570411">[</span><span class="num" id="7570412">0</span><span class="op" id="7570413">:</span><span class="op" id="7570414">]</span><span class="op" id="7570415">,</span>&nbsp;<span class="ident" id="7570417">testFe</span><span class="op" id="7570423">)</span><span class="op" id="7570424">;</span>&nbsp;<span class="ident" id="7570426">i</span>&nbsp;<span class="op" id="7570428">&gt;=</span>&nbsp;<span class="num" id="7570431">0</span>&nbsp;<span class="op" id="7570433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7570437">t</span><span class="op" id="7570438">.</span><span class="ident" id="7570439">Errorf</span><span class="op" id="7570445">(</span><span class="string" id="7570446">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7570482">,</span>&nbsp;<span class="ident" id="7570484">i</span><span class="op" id="7570485">,</span>&nbsp;<span class="ident" id="7570487">fe</span><span class="op" id="7570489">[</span><span class="ident" id="7570490">i</span><span class="op" id="7570491">]</span><span class="op" id="7570492">,</span>&nbsp;<span class="ident" id="7570494">testFe</span><span class="op" id="7570500">[</span><span class="ident" id="7570501">i</span><span class="op" id="7570502">]</span><span class="op" id="7570503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7570506">}</span><br>
<span class="lineno"></span><span class="op" id="7570508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="7570511">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="7570583">func</span>&nbsp;<span class="ident" id="7570588">TestFloat32</span><span class="op" id="7570599">(</span><span class="ident" id="7570600">t</span>&nbsp;<span class="op" id="7570602">*</span><span class="ident" id="7570603">testing</span><span class="op" id="7570610">.</span><span class="ident" id="7570611">T</span><span class="op" id="7570612">)</span>&nbsp;<span class="op" id="7570614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7570617">r</span>&nbsp;<span class="op" id="7570619">:=</span>&nbsp;<span class="ident" id="7570622">New</span><span class="op" id="7570625">(</span><span class="ident" id="7570626">NewSource</span><span class="op" id="7570635">(</span><span class="num" id="7570636">1</span><span class="op" id="7570637">)</span><span class="op" id="7570638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7570641">for</span>&nbsp;<span class="ident" id="7570645">ct</span>&nbsp;<span class="op" id="7570648">:=</span>&nbsp;<span class="num" id="7570651">0</span><span class="op" id="7570652">;</span>&nbsp;<span class="ident" id="7570654">ct</span>&nbsp;<span class="op" id="7570657">&lt;</span>&nbsp;<span class="num" id="7570659">10e6</span><span class="op" id="7570663">;</span>&nbsp;<span class="ident" id="7570665">ct</span><span class="op" id="7570667">++</span>&nbsp;<span class="op" id="7570670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7570674">f</span>&nbsp;<span class="op" id="7570676">:=</span>&nbsp;<span class="ident" id="7570679">r</span><span class="op" id="7570680">.</span><span class="ident" id="7570681">Float32</span><span class="op" id="7570688">(</span><span class="op" id="7570689">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7570693">if</span>&nbsp;<span class="ident" id="7570696">f</span>&nbsp;<span class="op" id="7570698">&gt;=</span>&nbsp;<span class="num" id="7570701">1</span>&nbsp;<span class="op" id="7570703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7570708">t</span><span class="op" id="7570709">.</span><span class="ident" id="7570710">Fatal</span><span class="op" id="7570715">(</span><span class="string" id="7570716">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="7570757">,</span>&nbsp;<span class="ident" id="7570759">ct</span><span class="op" id="7570761">,</span>&nbsp;<span class="string" id="7570763">&#34;f:&#34;</span><span class="op" id="7570767">,</span>&nbsp;<span class="ident" id="7570769">f</span><span class="op" id="7570770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7570774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7570777">}</span><br>
<span class="lineno"></span><span class="op" id="7570779">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="7570782">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7570797">func</span>&nbsp;<span class="ident" id="7570802">BenchmarkInt63Threadsafe</span><span class="op" id="7570826">(</span><span class="ident" id="7570827">b</span>&nbsp;<span class="op" id="7570829">*</span><span class="ident" id="7570830">testing</span><span class="op" id="7570837">.</span><span class="ident" id="7570838">B</span><span class="op" id="7570839">)</span>&nbsp;<span class="op" id="7570841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7570844">for</span>&nbsp;<span class="ident" id="7570848">n</span>&nbsp;<span class="op" id="7570850">:=</span>&nbsp;<span class="ident" id="7570853">b</span><span class="op" id="7570854">.</span><span class="ident" id="7570855">N</span><span class="op" id="7570856">;</span>&nbsp;<span class="ident" id="7570858">n</span>&nbsp;<span class="op" id="7570860">&gt;</span>&nbsp;<span class="num" id="7570862">0</span><span class="op" id="7570863">;</span>&nbsp;<span class="ident" id="7570865">n</span><span class="op" id="7570866">--</span>&nbsp;<span class="op" id="7570869">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7570873">Int63</span><span class="op" id="7570878">(</span><span class="op" id="7570879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7570882">}</span><br>
<span class="lineno"></span><span class="op" id="7570884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7570887">func</span>&nbsp;<span class="ident" id="7570892">BenchmarkInt63Unthreadsafe</span><span class="op" id="7570918">(</span><span class="ident" id="7570919">b</span>&nbsp;<span class="op" id="7570921">*</span><span class="ident" id="7570922">testing</span><span class="op" id="7570929">.</span><span class="ident" id="7570930">B</span><span class="op" id="7570931">)</span>&nbsp;<span class="op" id="7570933">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7570936">r</span>&nbsp;<span class="op" id="7570938">:=</span>&nbsp;<span class="ident" id="7570941">New</span><span class="op" id="7570944">(</span><span class="ident" id="7570945">NewSource</span><span class="op" id="7570954">(</span><span class="num" id="7570955">1</span><span class="op" id="7570956">)</span><span class="op" id="7570957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7570960">for</span>&nbsp;<span class="ident" id="7570964">n</span>&nbsp;<span class="op" id="7570966">:=</span>&nbsp;<span class="ident" id="7570969">b</span><span class="op" id="7570970">.</span><span class="ident" id="7570971">N</span><span class="op" id="7570972">;</span>&nbsp;<span class="ident" id="7570974">n</span>&nbsp;<span class="op" id="7570976">&gt;</span>&nbsp;<span class="num" id="7570978">0</span><span class="op" id="7570979">;</span>&nbsp;<span class="ident" id="7570981">n</span><span class="op" id="7570982">--</span>&nbsp;<span class="op" id="7570985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7570989">r</span><span class="op" id="7570990">.</span><span class="ident" id="7570991">Int63</span><span class="op" id="7570996">(</span><span class="op" id="7570997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7571000">}</span><br>
<span class="lineno"></span><span class="op" id="7571002">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7571005">func</span>&nbsp;<span class="ident" id="7571010">BenchmarkIntn1000</span><span class="op" id="7571027">(</span><span class="ident" id="7571028">b</span>&nbsp;<span class="op" id="7571030">*</span><span class="ident" id="7571031">testing</span><span class="op" id="7571038">.</span><span class="ident" id="7571039">B</span><span class="op" id="7571040">)</span>&nbsp;<span class="op" id="7571042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571045">r</span>&nbsp;<span class="op" id="7571047">:=</span>&nbsp;<span class="ident" id="7571050">New</span><span class="op" id="7571053">(</span><span class="ident" id="7571054">NewSource</span><span class="op" id="7571063">(</span><span class="num" id="7571064">1</span><span class="op" id="7571065">)</span><span class="op" id="7571066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7571069">for</span>&nbsp;<span class="ident" id="7571073">n</span>&nbsp;<span class="op" id="7571075">:=</span>&nbsp;<span class="ident" id="7571078">b</span><span class="op" id="7571079">.</span><span class="ident" id="7571080">N</span><span class="op" id="7571081">;</span>&nbsp;<span class="ident" id="7571083">n</span>&nbsp;<span class="op" id="7571085">&gt;</span>&nbsp;<span class="num" id="7571087">0</span><span class="op" id="7571088">;</span>&nbsp;<span class="ident" id="7571090">n</span><span class="op" id="7571091">--</span>&nbsp;<span class="op" id="7571094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571098">r</span><span class="op" id="7571099">.</span><span class="ident" id="7571100">Intn</span><span class="op" id="7571104">(</span><span class="num" id="7571105">1000</span><span class="op" id="7571109">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7571112">}</span><br>
<span class="lineno"></span><span class="op" id="7571114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7571117">func</span>&nbsp;<span class="ident" id="7571122">BenchmarkInt63n1000</span><span class="op" id="7571141">(</span><span class="ident" id="7571142">b</span>&nbsp;<span class="op" id="7571144">*</span><span class="ident" id="7571145">testing</span><span class="op" id="7571152">.</span><span class="ident" id="7571153">B</span><span class="op" id="7571154">)</span>&nbsp;<span class="op" id="7571156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571159">r</span>&nbsp;<span class="op" id="7571161">:=</span>&nbsp;<span class="ident" id="7571164">New</span><span class="op" id="7571167">(</span><span class="ident" id="7571168">NewSource</span><span class="op" id="7571177">(</span><span class="num" id="7571178">1</span><span class="op" id="7571179">)</span><span class="op" id="7571180">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7571183">for</span>&nbsp;<span class="ident" id="7571187">n</span>&nbsp;<span class="op" id="7571189">:=</span>&nbsp;<span class="ident" id="7571192">b</span><span class="op" id="7571193">.</span><span class="ident" id="7571194">N</span><span class="op" id="7571195">;</span>&nbsp;<span class="ident" id="7571197">n</span>&nbsp;<span class="op" id="7571199">&gt;</span>&nbsp;<span class="num" id="7571201">0</span><span class="op" id="7571202">;</span>&nbsp;<span class="ident" id="7571204">n</span><span class="op" id="7571205">--</span>&nbsp;<span class="op" id="7571208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571212">r</span><span class="op" id="7571213">.</span><span class="ident" id="7571214">Int63n</span><span class="op" id="7571220">(</span><span class="num" id="7571221">1000</span><span class="op" id="7571225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7571228">}</span><br>
<span class="lineno"></span><span class="op" id="7571230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="7571233">func</span>&nbsp;<span class="ident" id="7571238">BenchmarkInt31n1000</span><span class="op" id="7571257">(</span><span class="ident" id="7571258">b</span>&nbsp;<span class="op" id="7571260">*</span><span class="ident" id="7571261">testing</span><span class="op" id="7571268">.</span><span class="ident" id="7571269">B</span><span class="op" id="7571270">)</span>&nbsp;<span class="op" id="7571272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571275">r</span>&nbsp;<span class="op" id="7571277">:=</span>&nbsp;<span class="ident" id="7571280">New</span><span class="op" id="7571283">(</span><span class="ident" id="7571284">NewSource</span><span class="op" id="7571293">(</span><span class="num" id="7571294">1</span><span class="op" id="7571295">)</span><span class="op" id="7571296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7571299">for</span>&nbsp;<span class="ident" id="7571303">n</span>&nbsp;<span class="op" id="7571305">:=</span>&nbsp;<span class="ident" id="7571308">b</span><span class="op" id="7571309">.</span><span class="ident" id="7571310">N</span><span class="op" id="7571311">;</span>&nbsp;<span class="ident" id="7571313">n</span>&nbsp;<span class="op" id="7571315">&gt;</span>&nbsp;<span class="num" id="7571317">0</span><span class="op" id="7571318">;</span>&nbsp;<span class="ident" id="7571320">n</span><span class="op" id="7571321">--</span>&nbsp;<span class="op" id="7571324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571328">r</span><span class="op" id="7571329">.</span><span class="ident" id="7571330">Int31n</span><span class="op" id="7571336">(</span><span class="num" id="7571337">1000</span><span class="op" id="7571341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7571344">}</span><br>
<span class="lineno">370</span><span class="op" id="7571346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7571349">func</span>&nbsp;<span class="ident" id="7571354">BenchmarkFloat32</span><span class="op" id="7571370">(</span><span class="ident" id="7571371">b</span>&nbsp;<span class="op" id="7571373">*</span><span class="ident" id="7571374">testing</span><span class="op" id="7571381">.</span><span class="ident" id="7571382">B</span><span class="op" id="7571383">)</span>&nbsp;<span class="op" id="7571385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571388">r</span>&nbsp;<span class="op" id="7571390">:=</span>&nbsp;<span class="ident" id="7571393">New</span><span class="op" id="7571396">(</span><span class="ident" id="7571397">NewSource</span><span class="op" id="7571406">(</span><span class="num" id="7571407">1</span><span class="op" id="7571408">)</span><span class="op" id="7571409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7571412">for</span>&nbsp;<span class="ident" id="7571416">n</span>&nbsp;<span class="op" id="7571418">:=</span>&nbsp;<span class="ident" id="7571421">b</span><span class="op" id="7571422">.</span><span class="ident" id="7571423">N</span><span class="op" id="7571424">;</span>&nbsp;<span class="ident" id="7571426">n</span>&nbsp;<span class="op" id="7571428">&gt;</span>&nbsp;<span class="num" id="7571430">0</span><span class="op" id="7571431">;</span>&nbsp;<span class="ident" id="7571433">n</span><span class="op" id="7571434">--</span>&nbsp;<span class="op" id="7571437">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571441">r</span><span class="op" id="7571442">.</span><span class="ident" id="7571443">Float32</span><span class="op" id="7571450">(</span><span class="op" id="7571451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7571454">}</span><br>
<span class="lineno"></span><span class="op" id="7571456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7571459">func</span>&nbsp;<span class="ident" id="7571464">BenchmarkFloat64</span><span class="op" id="7571480">(</span><span class="ident" id="7571481">b</span>&nbsp;<span class="op" id="7571483">*</span><span class="ident" id="7571484">testing</span><span class="op" id="7571491">.</span><span class="ident" id="7571492">B</span><span class="op" id="7571493">)</span>&nbsp;<span class="op" id="7571495">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571498">r</span>&nbsp;<span class="op" id="7571500">:=</span>&nbsp;<span class="ident" id="7571503">New</span><span class="op" id="7571506">(</span><span class="ident" id="7571507">NewSource</span><span class="op" id="7571516">(</span><span class="num" id="7571517">1</span><span class="op" id="7571518">)</span><span class="op" id="7571519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7571522">for</span>&nbsp;<span class="ident" id="7571526">n</span>&nbsp;<span class="op" id="7571528">:=</span>&nbsp;<span class="ident" id="7571531">b</span><span class="op" id="7571532">.</span><span class="ident" id="7571533">N</span><span class="op" id="7571534">;</span>&nbsp;<span class="ident" id="7571536">n</span>&nbsp;<span class="op" id="7571538">&gt;</span>&nbsp;<span class="num" id="7571540">0</span><span class="op" id="7571541">;</span>&nbsp;<span class="ident" id="7571543">n</span><span class="op" id="7571544">--</span>&nbsp;<span class="op" id="7571547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571551">r</span><span class="op" id="7571552">.</span><span class="ident" id="7571553">Float64</span><span class="op" id="7571560">(</span><span class="op" id="7571561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7571564">}</span><br>
<span class="lineno"></span><span class="op" id="7571566">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="7571569">func</span>&nbsp;<span class="ident" id="7571574">BenchmarkPerm3</span><span class="op" id="7571588">(</span><span class="ident" id="7571589">b</span>&nbsp;<span class="op" id="7571591">*</span><span class="ident" id="7571592">testing</span><span class="op" id="7571599">.</span><span class="ident" id="7571600">B</span><span class="op" id="7571601">)</span>&nbsp;<span class="op" id="7571603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571606">r</span>&nbsp;<span class="op" id="7571608">:=</span>&nbsp;<span class="ident" id="7571611">New</span><span class="op" id="7571614">(</span><span class="ident" id="7571615">NewSource</span><span class="op" id="7571624">(</span><span class="num" id="7571625">1</span><span class="op" id="7571626">)</span><span class="op" id="7571627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7571630">for</span>&nbsp;<span class="ident" id="7571634">n</span>&nbsp;<span class="op" id="7571636">:=</span>&nbsp;<span class="ident" id="7571639">b</span><span class="op" id="7571640">.</span><span class="ident" id="7571641">N</span><span class="op" id="7571642">;</span>&nbsp;<span class="ident" id="7571644">n</span>&nbsp;<span class="op" id="7571646">&gt;</span>&nbsp;<span class="num" id="7571648">0</span><span class="op" id="7571649">;</span>&nbsp;<span class="ident" id="7571651">n</span><span class="op" id="7571652">--</span>&nbsp;<span class="op" id="7571655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571659">r</span><span class="op" id="7571660">.</span><span class="ident" id="7571661">Perm</span><span class="op" id="7571665">(</span><span class="num" id="7571666">3</span><span class="op" id="7571667">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7571670">}</span><br>
<span class="lineno"></span><span class="op" id="7571672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7571675">func</span>&nbsp;<span class="ident" id="7571680">BenchmarkPerm30</span><span class="op" id="7571695">(</span><span class="ident" id="7571696">b</span>&nbsp;<span class="op" id="7571698">*</span><span class="ident" id="7571699">testing</span><span class="op" id="7571706">.</span><span class="ident" id="7571707">B</span><span class="op" id="7571708">)</span>&nbsp;<span class="op" id="7571710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571713">r</span>&nbsp;<span class="op" id="7571715">:=</span>&nbsp;<span class="ident" id="7571718">New</span><span class="op" id="7571721">(</span><span class="ident" id="7571722">NewSource</span><span class="op" id="7571731">(</span><span class="num" id="7571732">1</span><span class="op" id="7571733">)</span><span class="op" id="7571734">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7571737">for</span>&nbsp;<span class="ident" id="7571741">n</span>&nbsp;<span class="op" id="7571743">:=</span>&nbsp;<span class="ident" id="7571746">b</span><span class="op" id="7571747">.</span><span class="ident" id="7571748">N</span><span class="op" id="7571749">;</span>&nbsp;<span class="ident" id="7571751">n</span>&nbsp;<span class="op" id="7571753">&gt;</span>&nbsp;<span class="num" id="7571755">0</span><span class="op" id="7571756">;</span>&nbsp;<span class="ident" id="7571758">n</span><span class="op" id="7571759">--</span>&nbsp;<span class="op" id="7571762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7571766">r</span><span class="op" id="7571767">.</span><span class="ident" id="7571768">Perm</span><span class="op" id="7571772">(</span><span class="num" id="7571773">30</span><span class="op" id="7571775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7571778">}</span><br>
<span class="lineno"></span><span class="op" id="7571780">}</span>
</div>
</body>
</html>
