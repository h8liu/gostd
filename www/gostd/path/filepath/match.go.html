<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path/filepath</h2>
<ul>
<li><a href="/gostd/path/filepath/example_unix_test.go.html">example_unix_test.go</a></li>
<li><a href="/gostd/path/filepath/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/path/filepath/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/filepath/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/filepath/path.go.html">path.go</a></li>
<li><a href="/gostd/path/filepath/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/path/filepath/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/path/filepath/symlink.go.html">symlink.go</a></li>
<li><a href="/gostd/path/filepath/symlink_unix.go.html">symlink_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2972793">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2972848">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2972902">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2972953">package</span>&nbsp;<span class="ident" id="2972961">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2972971">import</span>&nbsp;<span class="op" id="2972978">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2972981">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2972991">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2972997">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2973008">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2973016">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2973027">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2973042">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2973045">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="2973106">var</span>&nbsp;<span class="ident" id="2973110">ErrBadPattern</span>&nbsp;<span class="op" id="2973124">=</span>&nbsp;<span class="ident" id="2973126">errors</span><span class="op" id="2973132">.</span><span class="ident" id="2973133">New</span><span class="op" id="2973136">(</span><span class="string" id="2973137">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="2973162">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2973165">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="2973232">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="2973258">//</span><br>
<span class="lineno"></span><span class="comment" id="2973261">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno"></span><span class="comment" id="2973273">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="2973286">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno">25</span><span class="comment" id="2973295">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="2973360">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="2973419">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2973459">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="2973511">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="2973574">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="2973610">//</span><br>
<span class="lineno"></span><span class="comment" id="2973613">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno"></span><span class="comment" id="2973633">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="2973691">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="2973727">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="2973781">//</span><br>
<span class="lineno"></span><span class="comment" id="2973784">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="2973854">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="2973921">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="2973938">//</span><br>
<span class="lineno"></span><span class="comment" id="2973941">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2974006">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="2974025">//</span><br>
<span class="lineno"></span><span class="keyword" id="2974028">func</span>&nbsp;<span class="ident" id="2974033">Match</span><span class="op" id="2974038">(</span><span class="ident" id="2974039">pattern</span><span class="op" id="2974046">,</span>&nbsp;<span class="ident" id="2974048">name</span>&nbsp;<span class="builtintype" id="2974053">string</span><span class="op" id="2974059">)</span>&nbsp;<span class="op" id="2974061">(</span><span class="ident" id="2974062">matched</span>&nbsp;<span class="builtintype" id="2974070">bool</span><span class="op" id="2974074">,</span>&nbsp;<span class="ident" id="2974076">err</span>&nbsp;<span class="builtintype" id="2974080">error</span><span class="op" id="2974085">)</span>&nbsp;<span class="op" id="2974087">{</span><br>
<span class="lineno">45</span><span class="ident" id="2974089">Pattern</span><span class="op" id="2974096">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974099">for</span>&nbsp;<span class="builtinfunc" id="2974103">len</span><span class="op" id="2974106">(</span><span class="ident" id="2974107">pattern</span><span class="op" id="2974114">)</span>&nbsp;<span class="op" id="2974116">&gt;</span>&nbsp;<span class="num" id="2974118">0</span>&nbsp;<span class="op" id="2974120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974124">var</span>&nbsp;<span class="ident" id="2974128">star</span>&nbsp;<span class="builtintype" id="2974133">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974140">var</span>&nbsp;<span class="ident" id="2974144">chunk</span>&nbsp;<span class="builtintype" id="2974150">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974159">star</span><span class="op" id="2974163">,</span>&nbsp;<span class="ident" id="2974165">chunk</span><span class="op" id="2974170">,</span>&nbsp;<span class="ident" id="2974172">pattern</span>&nbsp;<span class="op" id="2974180">=</span>&nbsp;<span class="ident" id="2974182">scanChunk</span><span class="op" id="2974191">(</span><span class="ident" id="2974192">pattern</span><span class="op" id="2974199">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974203">if</span>&nbsp;<span class="ident" id="2974206">star</span>&nbsp;<span class="op" id="2974211">&amp;&amp;</span>&nbsp;<span class="ident" id="2974214">chunk</span>&nbsp;<span class="op" id="2974220">==</span>&nbsp;<span class="string" id="2974223">&#34;&#34;</span>&nbsp;<span class="op" id="2974226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2974231">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974290">return</span>&nbsp;<span class="ident" id="2974297">strings</span><span class="op" id="2974304">.</span><span class="ident" id="2974305">Index</span><span class="op" id="2974310">(</span><span class="ident" id="2974311">name</span><span class="op" id="2974315">,</span>&nbsp;<span class="builtintype" id="2974317">string</span><span class="op" id="2974323">(</span><span class="ident" id="2974324">Separator</span><span class="op" id="2974333">)</span><span class="op" id="2974334">)</span>&nbsp;<span class="op" id="2974336">&lt;</span>&nbsp;<span class="num" id="2974338">0</span><span class="op" id="2974339">,</span>&nbsp;<span class="ident" id="2974341">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2974351">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974392">t</span><span class="op" id="2974393">,</span>&nbsp;<span class="ident" id="2974395">ok</span><span class="op" id="2974397">,</span>&nbsp;<span class="ident" id="2974399">err</span>&nbsp;<span class="op" id="2974403">:=</span>&nbsp;<span class="ident" id="2974406">matchChunk</span><span class="op" id="2974416">(</span><span class="ident" id="2974417">chunk</span><span class="op" id="2974422">,</span>&nbsp;<span class="ident" id="2974424">name</span><span class="op" id="2974428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2974432">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2974497">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2974567">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974587">if</span>&nbsp;<span class="ident" id="2974590">ok</span>&nbsp;<span class="op" id="2974593">&amp;&amp;</span>&nbsp;<span class="op" id="2974596">(</span><span class="builtinfunc" id="2974597">len</span><span class="op" id="2974600">(</span><span class="ident" id="2974601">t</span><span class="op" id="2974602">)</span>&nbsp;<span class="op" id="2974604">==</span>&nbsp;<span class="num" id="2974607">0</span>&nbsp;<span class="op" id="2974609">||</span>&nbsp;<span class="builtinfunc" id="2974612">len</span><span class="op" id="2974615">(</span><span class="ident" id="2974616">pattern</span><span class="op" id="2974623">)</span>&nbsp;<span class="op" id="2974625">&gt;</span>&nbsp;<span class="num" id="2974627">0</span><span class="op" id="2974628">)</span>&nbsp;<span class="op" id="2974630">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974635">name</span>&nbsp;<span class="op" id="2974640">=</span>&nbsp;<span class="ident" id="2974642">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974647">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974662">if</span>&nbsp;<span class="ident" id="2974665">err</span>&nbsp;<span class="op" id="2974669">!=</span>&nbsp;<span class="ident" id="2974672">nil</span>&nbsp;<span class="op" id="2974676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974681">return</span>&nbsp;<span class="builtintype" id="2974688">false</span><span class="op" id="2974693">,</span>&nbsp;<span class="ident" id="2974695">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974705">if</span>&nbsp;<span class="ident" id="2974708">star</span>&nbsp;<span class="op" id="2974713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2974718">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2974759">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974780">for</span>&nbsp;<span class="ident" id="2974784">i</span>&nbsp;<span class="op" id="2974786">:=</span>&nbsp;<span class="num" id="2974789">0</span><span class="op" id="2974790">;</span>&nbsp;<span class="ident" id="2974792">i</span>&nbsp;<span class="op" id="2974794">&lt;</span>&nbsp;<span class="builtinfunc" id="2974796">len</span><span class="op" id="2974799">(</span><span class="ident" id="2974800">name</span><span class="op" id="2974804">)</span>&nbsp;<span class="op" id="2974806">&amp;&amp;</span>&nbsp;<span class="ident" id="2974809">name</span><span class="op" id="2974813">[</span><span class="ident" id="2974814">i</span><span class="op" id="2974815">]</span>&nbsp;<span class="op" id="2974817">!=</span>&nbsp;<span class="ident" id="2974820">Separator</span><span class="op" id="2974829">;</span>&nbsp;<span class="ident" id="2974831">i</span><span class="op" id="2974832">++</span>&nbsp;<span class="op" id="2974835">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974841">t</span><span class="op" id="2974842">,</span>&nbsp;<span class="ident" id="2974844">ok</span><span class="op" id="2974846">,</span>&nbsp;<span class="ident" id="2974848">err</span>&nbsp;<span class="op" id="2974852">:=</span>&nbsp;<span class="ident" id="2974855">matchChunk</span><span class="op" id="2974865">(</span><span class="ident" id="2974866">chunk</span><span class="op" id="2974871">,</span>&nbsp;<span class="ident" id="2974873">name</span><span class="op" id="2974877">[</span><span class="ident" id="2974878">i</span><span class="op" id="2974879">+</span><span class="num" id="2974880">1</span><span class="op" id="2974881">:</span><span class="op" id="2974882">]</span><span class="op" id="2974883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974889">if</span>&nbsp;<span class="ident" id="2974892">ok</span>&nbsp;<span class="op" id="2974895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2974902">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974967">if</span>&nbsp;<span class="builtinfunc" id="2974970">len</span><span class="op" id="2974973">(</span><span class="ident" id="2974974">pattern</span><span class="op" id="2974981">)</span>&nbsp;<span class="op" id="2974983">==</span>&nbsp;<span class="num" id="2974986">0</span>&nbsp;<span class="op" id="2974988">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2974991">len</span><span class="op" id="2974994">(</span><span class="ident" id="2974995">t</span><span class="op" id="2974996">)</span>&nbsp;<span class="op" id="2974998">&gt;</span>&nbsp;<span class="num" id="2975000">0</span>&nbsp;<span class="op" id="2975002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975010">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975031">name</span>&nbsp;<span class="op" id="2975036">=</span>&nbsp;<span class="ident" id="2975038">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975045">continue</span>&nbsp;<span class="ident" id="2975054">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975072">if</span>&nbsp;<span class="ident" id="2975075">err</span>&nbsp;<span class="op" id="2975079">!=</span>&nbsp;<span class="ident" id="2975082">nil</span>&nbsp;<span class="op" id="2975086">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975093">return</span>&nbsp;<span class="builtintype" id="2975100">false</span><span class="op" id="2975105">,</span>&nbsp;<span class="ident" id="2975107">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975128">return</span>&nbsp;<span class="builtintype" id="2975135">false</span><span class="op" id="2975140">,</span>&nbsp;<span class="ident" id="2975142">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975150">return</span>&nbsp;<span class="builtinfunc" id="2975157">len</span><span class="op" id="2975160">(</span><span class="ident" id="2975161">name</span><span class="op" id="2975165">)</span>&nbsp;<span class="op" id="2975167">==</span>&nbsp;<span class="num" id="2975170">0</span><span class="op" id="2975171">,</span>&nbsp;<span class="ident" id="2975173">nil</span><br>
<span class="lineno"></span><span class="op" id="2975177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2975180">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="2975254">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="2975286">func</span>&nbsp;<span class="ident" id="2975291">scanChunk</span><span class="op" id="2975300">(</span><span class="ident" id="2975301">pattern</span>&nbsp;<span class="builtintype" id="2975309">string</span><span class="op" id="2975315">)</span>&nbsp;<span class="op" id="2975317">(</span><span class="ident" id="2975318">star</span>&nbsp;<span class="builtintype" id="2975323">bool</span><span class="op" id="2975327">,</span>&nbsp;<span class="ident" id="2975329">chunk</span><span class="op" id="2975334">,</span>&nbsp;<span class="ident" id="2975336">rest</span>&nbsp;<span class="builtintype" id="2975341">string</span><span class="op" id="2975347">)</span>&nbsp;<span class="op" id="2975349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975352">for</span>&nbsp;<span class="builtinfunc" id="2975356">len</span><span class="op" id="2975359">(</span><span class="ident" id="2975360">pattern</span><span class="op" id="2975367">)</span>&nbsp;<span class="op" id="2975369">&gt;</span>&nbsp;<span class="num" id="2975371">0</span>&nbsp;<span class="op" id="2975373">&amp;&amp;</span>&nbsp;<span class="ident" id="2975376">pattern</span><span class="op" id="2975383">[</span><span class="num" id="2975384">0</span><span class="op" id="2975385">]</span>&nbsp;<span class="op" id="2975387">==</span>&nbsp;<span class="string" id="2975390">&#39;*&#39;</span>&nbsp;<span class="op" id="2975394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975398">pattern</span>&nbsp;<span class="op" id="2975406">=</span>&nbsp;<span class="ident" id="2975408">pattern</span><span class="op" id="2975415">[</span><span class="num" id="2975416">1</span><span class="op" id="2975417">:</span><span class="op" id="2975418">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975422">star</span>&nbsp;<span class="op" id="2975427">=</span>&nbsp;<span class="builtintype" id="2975429">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975438">inrange</span>&nbsp;<span class="op" id="2975446">:=</span>&nbsp;<span class="builtintype" id="2975449">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975456">var</span>&nbsp;<span class="ident" id="2975460">i</span>&nbsp;<span class="builtintype" id="2975462">int</span><br>
<span class="lineno"></span><span class="ident" id="2975466">Scan</span><span class="op" id="2975470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975473">for</span>&nbsp;<span class="ident" id="2975477">i</span>&nbsp;<span class="op" id="2975479">=</span>&nbsp;<span class="num" id="2975481">0</span><span class="op" id="2975482">;</span>&nbsp;<span class="ident" id="2975484">i</span>&nbsp;<span class="op" id="2975486">&lt;</span>&nbsp;<span class="builtinfunc" id="2975488">len</span><span class="op" id="2975491">(</span><span class="ident" id="2975492">pattern</span><span class="op" id="2975499">)</span><span class="op" id="2975500">;</span>&nbsp;<span class="ident" id="2975502">i</span><span class="op" id="2975503">++</span>&nbsp;<span class="op" id="2975506">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975510">switch</span>&nbsp;<span class="ident" id="2975517">pattern</span><span class="op" id="2975524">[</span><span class="ident" id="2975525">i</span><span class="op" id="2975526">]</span>&nbsp;<span class="op" id="2975528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975532">case</span>&nbsp;<span class="string" id="2975537">&#39;\\&#39;</span><span class="op" id="2975541">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975546">if</span>&nbsp;<span class="ident" id="2975549">runtime</span><span class="op" id="2975556">.</span><span class="ident" id="2975557">GOOS</span>&nbsp;<span class="op" id="2975562">!=</span>&nbsp;<span class="string" id="2975565">&#34;windows&#34;</span>&nbsp;<span class="op" id="2975575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2975581">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975636">if</span>&nbsp;<span class="ident" id="2975639">i</span><span class="op" id="2975640">+</span><span class="num" id="2975641">1</span>&nbsp;<span class="op" id="2975643">&lt;</span>&nbsp;<span class="builtinfunc" id="2975645">len</span><span class="op" id="2975648">(</span><span class="ident" id="2975649">pattern</span><span class="op" id="2975656">)</span>&nbsp;<span class="op" id="2975658">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975665">i</span><span class="op" id="2975666">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975682">case</span>&nbsp;<span class="string" id="2975687">&#39;[&#39;</span><span class="op" id="2975690">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975695">inrange</span>&nbsp;<span class="op" id="2975703">=</span>&nbsp;<span class="builtintype" id="2975705">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975712">case</span>&nbsp;<span class="string" id="2975717">&#39;]&#39;</span><span class="op" id="2975720">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975725">inrange</span>&nbsp;<span class="op" id="2975733">=</span>&nbsp;<span class="builtintype" id="2975735">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975743">case</span>&nbsp;<span class="string" id="2975748">&#39;*&#39;</span><span class="op" id="2975751">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975756">if</span>&nbsp;<span class="op" id="2975759">!</span><span class="ident" id="2975760">inrange</span>&nbsp;<span class="op" id="2975768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975774">break</span>&nbsp;<span class="ident" id="2975780">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975798">return</span>&nbsp;<span class="ident" id="2975805">star</span><span class="op" id="2975809">,</span>&nbsp;<span class="ident" id="2975811">pattern</span><span class="op" id="2975818">[</span><span class="num" id="2975819">0</span><span class="op" id="2975820">:</span><span class="ident" id="2975821">i</span><span class="op" id="2975822">]</span><span class="op" id="2975823">,</span>&nbsp;<span class="ident" id="2975825">pattern</span><span class="op" id="2975832">[</span><span class="ident" id="2975833">i</span><span class="op" id="2975834">:</span><span class="op" id="2975835">]</span><br>
<span class="lineno"></span><span class="op" id="2975837">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="2975840">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="2975903">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="2975962">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="2976037">func</span>&nbsp;<span class="ident" id="2976042">matchChunk</span><span class="op" id="2976052">(</span><span class="ident" id="2976053">chunk</span><span class="op" id="2976058">,</span>&nbsp;<span class="ident" id="2976060">s</span>&nbsp;<span class="builtintype" id="2976062">string</span><span class="op" id="2976068">)</span>&nbsp;<span class="op" id="2976070">(</span><span class="ident" id="2976071">rest</span>&nbsp;<span class="builtintype" id="2976076">string</span><span class="op" id="2976082">,</span>&nbsp;<span class="ident" id="2976084">ok</span>&nbsp;<span class="builtintype" id="2976087">bool</span><span class="op" id="2976091">,</span>&nbsp;<span class="ident" id="2976093">err</span>&nbsp;<span class="builtintype" id="2976097">error</span><span class="op" id="2976102">)</span>&nbsp;<span class="op" id="2976104">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976107">for</span>&nbsp;<span class="builtinfunc" id="2976111">len</span><span class="op" id="2976114">(</span><span class="ident" id="2976115">chunk</span><span class="op" id="2976120">)</span>&nbsp;<span class="op" id="2976122">&gt;</span>&nbsp;<span class="num" id="2976124">0</span>&nbsp;<span class="op" id="2976126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976130">if</span>&nbsp;<span class="builtinfunc" id="2976133">len</span><span class="op" id="2976136">(</span><span class="ident" id="2976137">s</span><span class="op" id="2976138">)</span>&nbsp;<span class="op" id="2976140">==</span>&nbsp;<span class="num" id="2976143">0</span>&nbsp;<span class="op" id="2976145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976150">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976163">switch</span>&nbsp;<span class="ident" id="2976170">chunk</span><span class="op" id="2976175">[</span><span class="num" id="2976176">0</span><span class="op" id="2976177">]</span>&nbsp;<span class="op" id="2976179">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976183">case</span>&nbsp;<span class="string" id="2976188">&#39;[&#39;</span><span class="op" id="2976191">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2976196">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976218">r</span><span class="op" id="2976219">,</span>&nbsp;<span class="ident" id="2976221">n</span>&nbsp;<span class="op" id="2976223">:=</span>&nbsp;<span class="ident" id="2976226">utf8</span><span class="op" id="2976230">.</span><span class="ident" id="2976231">DecodeRuneInString</span><span class="op" id="2976249">(</span><span class="ident" id="2976250">s</span><span class="op" id="2976251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976256">s</span>&nbsp;<span class="op" id="2976258">=</span>&nbsp;<span class="ident" id="2976260">s</span><span class="op" id="2976261">[</span><span class="ident" id="2976262">n</span><span class="op" id="2976263">:</span><span class="op" id="2976264">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976269">chunk</span>&nbsp;<span class="op" id="2976275">=</span>&nbsp;<span class="ident" id="2976277">chunk</span><span class="op" id="2976282">[</span><span class="num" id="2976283">1</span><span class="op" id="2976284">:</span><span class="op" id="2976285">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2976290">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2976351">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976397">if</span>&nbsp;<span class="builtinfunc" id="2976400">len</span><span class="op" id="2976403">(</span><span class="ident" id="2976404">chunk</span><span class="op" id="2976409">)</span>&nbsp;<span class="op" id="2976411">==</span>&nbsp;<span class="num" id="2976414">0</span>&nbsp;<span class="op" id="2976416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976422">err</span>&nbsp;<span class="op" id="2976426">=</span>&nbsp;<span class="ident" id="2976428">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976446">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2976461">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976484">negated</span>&nbsp;<span class="op" id="2976492">:=</span>&nbsp;<span class="ident" id="2976495">chunk</span><span class="op" id="2976500">[</span><span class="num" id="2976501">0</span><span class="op" id="2976502">]</span>&nbsp;<span class="op" id="2976504">==</span>&nbsp;<span class="string" id="2976507">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976514">if</span>&nbsp;<span class="ident" id="2976517">negated</span>&nbsp;<span class="op" id="2976525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976531">chunk</span>&nbsp;<span class="op" id="2976537">=</span>&nbsp;<span class="ident" id="2976539">chunk</span><span class="op" id="2976544">[</span><span class="num" id="2976545">1</span><span class="op" id="2976546">:</span><span class="op" id="2976547">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2976557">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976580">match</span>&nbsp;<span class="op" id="2976586">:=</span>&nbsp;<span class="builtintype" id="2976589">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976598">nrange</span>&nbsp;<span class="op" id="2976605">:=</span>&nbsp;<span class="num" id="2976608">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976613">for</span>&nbsp;<span class="op" id="2976617">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976623">if</span>&nbsp;<span class="builtinfunc" id="2976626">len</span><span class="op" id="2976629">(</span><span class="ident" id="2976630">chunk</span><span class="op" id="2976635">)</span>&nbsp;<span class="op" id="2976637">&gt;</span>&nbsp;<span class="num" id="2976639">0</span>&nbsp;<span class="op" id="2976641">&amp;&amp;</span>&nbsp;<span class="ident" id="2976644">chunk</span><span class="op" id="2976649">[</span><span class="num" id="2976650">0</span><span class="op" id="2976651">]</span>&nbsp;<span class="op" id="2976653">==</span>&nbsp;<span class="string" id="2976656">&#39;]&#39;</span>&nbsp;<span class="op" id="2976660">&amp;&amp;</span>&nbsp;<span class="ident" id="2976663">nrange</span>&nbsp;<span class="op" id="2976670">&gt;</span>&nbsp;<span class="num" id="2976672">0</span>&nbsp;<span class="op" id="2976674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976681">chunk</span>&nbsp;<span class="op" id="2976687">=</span>&nbsp;<span class="ident" id="2976689">chunk</span><span class="op" id="2976694">[</span><span class="num" id="2976695">1</span><span class="op" id="2976696">:</span><span class="op" id="2976697">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976704">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976720">var</span>&nbsp;<span class="ident" id="2976724">lo</span><span class="op" id="2976726">,</span>&nbsp;<span class="ident" id="2976728">hi</span>&nbsp;<span class="builtintype" id="2976731">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976740">if</span>&nbsp;<span class="ident" id="2976743">lo</span><span class="op" id="2976745">,</span>&nbsp;<span class="ident" id="2976747">chunk</span><span class="op" id="2976752">,</span>&nbsp;<span class="ident" id="2976754">err</span>&nbsp;<span class="op" id="2976758">=</span>&nbsp;<span class="ident" id="2976760">getEsc</span><span class="op" id="2976766">(</span><span class="ident" id="2976767">chunk</span><span class="op" id="2976772">)</span><span class="op" id="2976773">;</span>&nbsp;<span class="ident" id="2976775">err</span>&nbsp;<span class="op" id="2976779">!=</span>&nbsp;<span class="ident" id="2976782">nil</span>&nbsp;<span class="op" id="2976786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976793">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976810">hi</span>&nbsp;<span class="op" id="2976813">=</span>&nbsp;<span class="ident" id="2976815">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976822">if</span>&nbsp;<span class="ident" id="2976825">chunk</span><span class="op" id="2976830">[</span><span class="num" id="2976831">0</span><span class="op" id="2976832">]</span>&nbsp;<span class="op" id="2976834">==</span>&nbsp;<span class="string" id="2976837">&#39;-&#39;</span>&nbsp;<span class="op" id="2976841">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976848">if</span>&nbsp;<span class="ident" id="2976851">hi</span><span class="op" id="2976853">,</span>&nbsp;<span class="ident" id="2976855">chunk</span><span class="op" id="2976860">,</span>&nbsp;<span class="ident" id="2976862">err</span>&nbsp;<span class="op" id="2976866">=</span>&nbsp;<span class="ident" id="2976868">getEsc</span><span class="op" id="2976874">(</span><span class="ident" id="2976875">chunk</span><span class="op" id="2976880">[</span><span class="num" id="2976881">1</span><span class="op" id="2976882">:</span><span class="op" id="2976883">]</span><span class="op" id="2976884">)</span><span class="op" id="2976885">;</span>&nbsp;<span class="ident" id="2976887">err</span>&nbsp;<span class="op" id="2976891">!=</span>&nbsp;<span class="ident" id="2976894">nil</span>&nbsp;<span class="op" id="2976898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976906">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976930">if</span>&nbsp;<span class="ident" id="2976933">lo</span>&nbsp;<span class="op" id="2976936">&lt;=</span>&nbsp;<span class="ident" id="2976939">r</span>&nbsp;<span class="op" id="2976941">&amp;&amp;</span>&nbsp;<span class="ident" id="2976944">r</span>&nbsp;<span class="op" id="2976946">&lt;=</span>&nbsp;<span class="ident" id="2976949">hi</span>&nbsp;<span class="op" id="2976952">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976959">match</span>&nbsp;<span class="op" id="2976965">=</span>&nbsp;<span class="builtintype" id="2976967">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976982">nrange</span><span class="op" id="2976988">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976999">if</span>&nbsp;<span class="ident" id="2977002">match</span>&nbsp;<span class="op" id="2977008">==</span>&nbsp;<span class="ident" id="2977011">negated</span>&nbsp;<span class="op" id="2977019">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977025">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977040">case</span>&nbsp;<span class="string" id="2977045">&#39;?&#39;</span><span class="op" id="2977048">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977053">if</span>&nbsp;<span class="ident" id="2977056">s</span><span class="op" id="2977057">[</span><span class="num" id="2977058">0</span><span class="op" id="2977059">]</span>&nbsp;<span class="op" id="2977061">==</span>&nbsp;<span class="ident" id="2977064">Separator</span>&nbsp;<span class="op" id="2977074">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977080">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977095">_</span><span class="op" id="2977096">,</span>&nbsp;<span class="ident" id="2977098">n</span>&nbsp;<span class="op" id="2977100">:=</span>&nbsp;<span class="ident" id="2977103">utf8</span><span class="op" id="2977107">.</span><span class="ident" id="2977108">DecodeRuneInString</span><span class="op" id="2977126">(</span><span class="ident" id="2977127">s</span><span class="op" id="2977128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977133">s</span>&nbsp;<span class="op" id="2977135">=</span>&nbsp;<span class="ident" id="2977137">s</span><span class="op" id="2977138">[</span><span class="ident" id="2977139">n</span><span class="op" id="2977140">:</span><span class="op" id="2977141">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977146">chunk</span>&nbsp;<span class="op" id="2977152">=</span>&nbsp;<span class="ident" id="2977154">chunk</span><span class="op" id="2977159">[</span><span class="num" id="2977160">1</span><span class="op" id="2977161">:</span><span class="op" id="2977162">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977167">case</span>&nbsp;<span class="string" id="2977172">&#39;\\&#39;</span><span class="op" id="2977176">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977181">if</span>&nbsp;<span class="ident" id="2977184">runtime</span><span class="op" id="2977191">.</span><span class="ident" id="2977192">GOOS</span>&nbsp;<span class="op" id="2977197">!=</span>&nbsp;<span class="string" id="2977200">&#34;windows&#34;</span>&nbsp;<span class="op" id="2977210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977216">chunk</span>&nbsp;<span class="op" id="2977222">=</span>&nbsp;<span class="ident" id="2977224">chunk</span><span class="op" id="2977229">[</span><span class="num" id="2977230">1</span><span class="op" id="2977231">:</span><span class="op" id="2977232">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977238">if</span>&nbsp;<span class="builtinfunc" id="2977241">len</span><span class="op" id="2977244">(</span><span class="ident" id="2977245">chunk</span><span class="op" id="2977250">)</span>&nbsp;<span class="op" id="2977252">==</span>&nbsp;<span class="num" id="2977255">0</span>&nbsp;<span class="op" id="2977257">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977264">err</span>&nbsp;<span class="op" id="2977268">=</span>&nbsp;<span class="ident" id="2977270">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977289">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977310">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977325">default</span><span class="op" id="2977332">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977337">if</span>&nbsp;<span class="ident" id="2977340">chunk</span><span class="op" id="2977345">[</span><span class="num" id="2977346">0</span><span class="op" id="2977347">]</span>&nbsp;<span class="op" id="2977349">!=</span>&nbsp;<span class="ident" id="2977352">s</span><span class="op" id="2977353">[</span><span class="num" id="2977354">0</span><span class="op" id="2977355">]</span>&nbsp;<span class="op" id="2977357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977363">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977373">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977378">s</span>&nbsp;<span class="op" id="2977380">=</span>&nbsp;<span class="ident" id="2977382">s</span><span class="op" id="2977383">[</span><span class="num" id="2977384">1</span><span class="op" id="2977385">:</span><span class="op" id="2977386">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977391">chunk</span>&nbsp;<span class="op" id="2977397">=</span>&nbsp;<span class="ident" id="2977399">chunk</span><span class="op" id="2977404">[</span><span class="num" id="2977405">1</span><span class="op" id="2977406">:</span><span class="op" id="2977407">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977417">return</span>&nbsp;<span class="ident" id="2977424">s</span><span class="op" id="2977425">,</span>&nbsp;<span class="builtintype" id="2977427">true</span><span class="op" id="2977431">,</span>&nbsp;<span class="ident" id="2977433">nil</span><br>
<span class="lineno">200</span><span class="op" id="2977437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2977440">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="2977519">func</span>&nbsp;<span class="ident" id="2977524">getEsc</span><span class="op" id="2977530">(</span><span class="ident" id="2977531">chunk</span>&nbsp;<span class="builtintype" id="2977537">string</span><span class="op" id="2977543">)</span>&nbsp;<span class="op" id="2977545">(</span><span class="ident" id="2977546">r</span>&nbsp;<span class="builtintype" id="2977548">rune</span><span class="op" id="2977552">,</span>&nbsp;<span class="ident" id="2977554">nchunk</span>&nbsp;<span class="builtintype" id="2977561">string</span><span class="op" id="2977567">,</span>&nbsp;<span class="ident" id="2977569">err</span>&nbsp;<span class="builtintype" id="2977573">error</span><span class="op" id="2977578">)</span>&nbsp;<span class="op" id="2977580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977583">if</span>&nbsp;<span class="builtinfunc" id="2977586">len</span><span class="op" id="2977589">(</span><span class="ident" id="2977590">chunk</span><span class="op" id="2977595">)</span>&nbsp;<span class="op" id="2977597">==</span>&nbsp;<span class="num" id="2977600">0</span>&nbsp;<span class="op" id="2977602">||</span>&nbsp;<span class="ident" id="2977605">chunk</span><span class="op" id="2977610">[</span><span class="num" id="2977611">0</span><span class="op" id="2977612">]</span>&nbsp;<span class="op" id="2977614">==</span>&nbsp;<span class="string" id="2977617">&#39;-&#39;</span>&nbsp;<span class="op" id="2977621">||</span>&nbsp;<span class="ident" id="2977624">chunk</span><span class="op" id="2977629">[</span><span class="num" id="2977630">0</span><span class="op" id="2977631">]</span>&nbsp;<span class="op" id="2977633">==</span>&nbsp;<span class="string" id="2977636">&#39;]&#39;</span>&nbsp;<span class="op" id="2977640">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977644">err</span>&nbsp;<span class="op" id="2977648">=</span>&nbsp;<span class="ident" id="2977650">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977666">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977677">if</span>&nbsp;<span class="ident" id="2977680">chunk</span><span class="op" id="2977685">[</span><span class="num" id="2977686">0</span><span class="op" id="2977687">]</span>&nbsp;<span class="op" id="2977689">==</span>&nbsp;<span class="string" id="2977692">&#39;\\&#39;</span>&nbsp;<span class="op" id="2977697">&amp;&amp;</span>&nbsp;<span class="ident" id="2977700">runtime</span><span class="op" id="2977707">.</span><span class="ident" id="2977708">GOOS</span>&nbsp;<span class="op" id="2977713">!=</span>&nbsp;<span class="string" id="2977716">&#34;windows&#34;</span>&nbsp;<span class="op" id="2977726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977730">chunk</span>&nbsp;<span class="op" id="2977736">=</span>&nbsp;<span class="ident" id="2977738">chunk</span><span class="op" id="2977743">[</span><span class="num" id="2977744">1</span><span class="op" id="2977745">:</span><span class="op" id="2977746">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977750">if</span>&nbsp;<span class="builtinfunc" id="2977753">len</span><span class="op" id="2977756">(</span><span class="ident" id="2977757">chunk</span><span class="op" id="2977762">)</span>&nbsp;<span class="op" id="2977764">==</span>&nbsp;<span class="num" id="2977767">0</span>&nbsp;<span class="op" id="2977769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977774">err</span>&nbsp;<span class="op" id="2977778">=</span>&nbsp;<span class="ident" id="2977780">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977797">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977809">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977812">r</span><span class="op" id="2977813">,</span>&nbsp;<span class="ident" id="2977815">n</span>&nbsp;<span class="op" id="2977817">:=</span>&nbsp;<span class="ident" id="2977820">utf8</span><span class="op" id="2977824">.</span><span class="ident" id="2977825">DecodeRuneInString</span><span class="op" id="2977843">(</span><span class="ident" id="2977844">chunk</span><span class="op" id="2977849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977852">if</span>&nbsp;<span class="ident" id="2977855">r</span>&nbsp;<span class="op" id="2977857">==</span>&nbsp;<span class="ident" id="2977860">utf8</span><span class="op" id="2977864">.</span><span class="ident" id="2977865">RuneError</span>&nbsp;<span class="op" id="2977875">&amp;&amp;</span>&nbsp;<span class="ident" id="2977878">n</span>&nbsp;<span class="op" id="2977880">==</span>&nbsp;<span class="num" id="2977883">1</span>&nbsp;<span class="op" id="2977885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977889">err</span>&nbsp;<span class="op" id="2977893">=</span>&nbsp;<span class="ident" id="2977895">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977913">nchunk</span>&nbsp;<span class="op" id="2977920">=</span>&nbsp;<span class="ident" id="2977922">chunk</span><span class="op" id="2977927">[</span><span class="ident" id="2977928">n</span><span class="op" id="2977929">:</span><span class="op" id="2977930">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977933">if</span>&nbsp;<span class="builtinfunc" id="2977936">len</span><span class="op" id="2977939">(</span><span class="ident" id="2977940">nchunk</span><span class="op" id="2977946">)</span>&nbsp;<span class="op" id="2977948">==</span>&nbsp;<span class="num" id="2977951">0</span>&nbsp;<span class="op" id="2977953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977957">err</span>&nbsp;<span class="op" id="2977961">=</span>&nbsp;<span class="ident" id="2977963">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977981">return</span><br>
<span class="lineno"></span><span class="op" id="2977988">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2977991">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="2978054">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="2978122">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2978190">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="2978240">//</span><br>
<span class="lineno"></span><span class="comment" id="2978243">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="2978318">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="2978385">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="2978402">func</span>&nbsp;<span class="ident" id="2978407">Glob</span><span class="op" id="2978411">(</span><span class="ident" id="2978412">pattern</span>&nbsp;<span class="builtintype" id="2978420">string</span><span class="op" id="2978426">)</span>&nbsp;<span class="op" id="2978428">(</span><span class="ident" id="2978429">matches</span>&nbsp;<span class="op" id="2978437">[</span><span class="op" id="2978438">]</span><span class="builtintype" id="2978439">string</span><span class="op" id="2978445">,</span>&nbsp;<span class="ident" id="2978447">err</span>&nbsp;<span class="builtintype" id="2978451">error</span><span class="op" id="2978456">)</span>&nbsp;<span class="op" id="2978458">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978461">if</span>&nbsp;<span class="op" id="2978464">!</span><span class="ident" id="2978465">hasMeta</span><span class="op" id="2978472">(</span><span class="ident" id="2978473">pattern</span><span class="op" id="2978480">)</span>&nbsp;<span class="op" id="2978482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978486">if</span>&nbsp;<span class="ident" id="2978489">_</span><span class="op" id="2978490">,</span>&nbsp;<span class="ident" id="2978492">err</span>&nbsp;<span class="op" id="2978496">=</span>&nbsp;<span class="ident" id="2978498">os</span><span class="op" id="2978500">.</span><span class="ident" id="2978501">Lstat</span><span class="op" id="2978506">(</span><span class="ident" id="2978507">pattern</span><span class="op" id="2978514">)</span><span class="op" id="2978515">;</span>&nbsp;<span class="ident" id="2978517">err</span>&nbsp;<span class="op" id="2978521">!=</span>&nbsp;<span class="ident" id="2978524">nil</span>&nbsp;<span class="op" id="2978528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978533">return</span>&nbsp;<span class="ident" id="2978540">nil</span><span class="op" id="2978543">,</span>&nbsp;<span class="ident" id="2978545">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978555">return</span>&nbsp;<span class="op" id="2978562">[</span><span class="op" id="2978563">]</span><span class="builtintype" id="2978564">string</span><span class="op" id="2978570">{</span><span class="ident" id="2978571">pattern</span><span class="op" id="2978578">}</span><span class="op" id="2978579">,</span>&nbsp;<span class="ident" id="2978581">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978590">dir</span><span class="op" id="2978593">,</span>&nbsp;<span class="ident" id="2978595">file</span>&nbsp;<span class="op" id="2978600">:=</span>&nbsp;<span class="ident" id="2978603">Split</span><span class="op" id="2978608">(</span><span class="ident" id="2978609">pattern</span><span class="op" id="2978616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978619">switch</span>&nbsp;<span class="ident" id="2978626">dir</span>&nbsp;<span class="op" id="2978630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978633">case</span>&nbsp;<span class="string" id="2978638">&#34;&#34;</span><span class="op" id="2978640">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978644">dir</span>&nbsp;<span class="op" id="2978648">=</span>&nbsp;<span class="string" id="2978650">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978655">case</span>&nbsp;<span class="builtintype" id="2978660">string</span><span class="op" id="2978666">(</span><span class="ident" id="2978667">Separator</span><span class="op" id="2978676">)</span><span class="op" id="2978677">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2978681">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978693">default</span><span class="op" id="2978700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978704">dir</span>&nbsp;<span class="op" id="2978708">=</span>&nbsp;<span class="ident" id="2978710">dir</span><span class="op" id="2978713">[</span><span class="num" id="2978714">0</span>&nbsp;<span class="op" id="2978716">:</span>&nbsp;<span class="builtinfunc" id="2978718">len</span><span class="op" id="2978721">(</span><span class="ident" id="2978722">dir</span><span class="op" id="2978725">)</span><span class="op" id="2978726">-</span><span class="num" id="2978727">1</span><span class="op" id="2978728">]</span>&nbsp;<span class="comment" id="2978730">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978766">if</span>&nbsp;<span class="op" id="2978769">!</span><span class="ident" id="2978770">hasMeta</span><span class="op" id="2978777">(</span><span class="ident" id="2978778">dir</span><span class="op" id="2978781">)</span>&nbsp;<span class="op" id="2978783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978787">return</span>&nbsp;<span class="ident" id="2978794">glob</span><span class="op" id="2978798">(</span><span class="ident" id="2978799">dir</span><span class="op" id="2978802">,</span>&nbsp;<span class="ident" id="2978804">file</span><span class="op" id="2978808">,</span>&nbsp;<span class="ident" id="2978810">nil</span><span class="op" id="2978813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978816">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978820">var</span>&nbsp;<span class="ident" id="2978824">m</span>&nbsp;<span class="op" id="2978826">[</span><span class="op" id="2978827">]</span><span class="builtintype" id="2978828">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978836">m</span><span class="op" id="2978837">,</span>&nbsp;<span class="ident" id="2978839">err</span>&nbsp;<span class="op" id="2978843">=</span>&nbsp;<span class="ident" id="2978845">Glob</span><span class="op" id="2978849">(</span><span class="ident" id="2978850">dir</span><span class="op" id="2978853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978856">if</span>&nbsp;<span class="ident" id="2978859">err</span>&nbsp;<span class="op" id="2978863">!=</span>&nbsp;<span class="ident" id="2978866">nil</span>&nbsp;<span class="op" id="2978870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978874">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978885">for</span>&nbsp;<span class="ident" id="2978889">_</span><span class="op" id="2978890">,</span>&nbsp;<span class="ident" id="2978892">d</span>&nbsp;<span class="op" id="2978894">:=</span>&nbsp;<span class="keyword" id="2978897">range</span>&nbsp;<span class="ident" id="2978903">m</span>&nbsp;<span class="op" id="2978905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978909">matches</span><span class="op" id="2978916">,</span>&nbsp;<span class="ident" id="2978918">err</span>&nbsp;<span class="op" id="2978922">=</span>&nbsp;<span class="ident" id="2978924">glob</span><span class="op" id="2978928">(</span><span class="ident" id="2978929">d</span><span class="op" id="2978930">,</span>&nbsp;<span class="ident" id="2978932">file</span><span class="op" id="2978936">,</span>&nbsp;<span class="ident" id="2978938">matches</span><span class="op" id="2978945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978949">if</span>&nbsp;<span class="ident" id="2978952">err</span>&nbsp;<span class="op" id="2978956">!=</span>&nbsp;<span class="ident" id="2978959">nil</span>&nbsp;<span class="op" id="2978963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978968">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978983">return</span><br>
<span class="lineno"></span><span class="op" id="2978990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="2978993">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="2979058">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2979117">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="2979177">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2979212">func</span>&nbsp;<span class="ident" id="2979217">glob</span><span class="op" id="2979221">(</span><span class="ident" id="2979222">dir</span><span class="op" id="2979225">,</span>&nbsp;<span class="ident" id="2979227">pattern</span>&nbsp;<span class="builtintype" id="2979235">string</span><span class="op" id="2979241">,</span>&nbsp;<span class="ident" id="2979243">matches</span>&nbsp;<span class="op" id="2979251">[</span><span class="op" id="2979252">]</span><span class="builtintype" id="2979253">string</span><span class="op" id="2979259">)</span>&nbsp;<span class="op" id="2979261">(</span><span class="ident" id="2979262">m</span>&nbsp;<span class="op" id="2979264">[</span><span class="op" id="2979265">]</span><span class="builtintype" id="2979266">string</span><span class="op" id="2979272">,</span>&nbsp;<span class="ident" id="2979274">e</span>&nbsp;<span class="builtintype" id="2979276">error</span><span class="op" id="2979281">)</span>&nbsp;<span class="op" id="2979283">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979286">m</span>&nbsp;<span class="op" id="2979288">=</span>&nbsp;<span class="ident" id="2979290">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979299">fi</span><span class="op" id="2979301">,</span>&nbsp;<span class="ident" id="2979303">err</span>&nbsp;<span class="op" id="2979307">:=</span>&nbsp;<span class="ident" id="2979310">os</span><span class="op" id="2979312">.</span><span class="ident" id="2979313">Stat</span><span class="op" id="2979317">(</span><span class="ident" id="2979318">dir</span><span class="op" id="2979321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979324">if</span>&nbsp;<span class="ident" id="2979327">err</span>&nbsp;<span class="op" id="2979331">!=</span>&nbsp;<span class="ident" id="2979334">nil</span>&nbsp;<span class="op" id="2979338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979342">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979350">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979353">if</span>&nbsp;<span class="op" id="2979356">!</span><span class="ident" id="2979357">fi</span><span class="op" id="2979359">.</span><span class="ident" id="2979360">IsDir</span><span class="op" id="2979365">(</span><span class="op" id="2979366">)</span>&nbsp;<span class="op" id="2979368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979372">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979383">d</span><span class="op" id="2979384">,</span>&nbsp;<span class="ident" id="2979386">err</span>&nbsp;<span class="op" id="2979390">:=</span>&nbsp;<span class="ident" id="2979393">os</span><span class="op" id="2979395">.</span><span class="ident" id="2979396">Open</span><span class="op" id="2979400">(</span><span class="ident" id="2979401">dir</span><span class="op" id="2979404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979407">if</span>&nbsp;<span class="ident" id="2979410">err</span>&nbsp;<span class="op" id="2979414">!=</span>&nbsp;<span class="ident" id="2979417">nil</span>&nbsp;<span class="op" id="2979421">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979425">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979436">defer</span>&nbsp;<span class="ident" id="2979442">d</span><span class="op" id="2979443">.</span><span class="ident" id="2979444">Close</span><span class="op" id="2979449">(</span><span class="op" id="2979450">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979454">names</span><span class="op" id="2979459">,</span>&nbsp;<span class="ident" id="2979461">_</span>&nbsp;<span class="op" id="2979463">:=</span>&nbsp;<span class="ident" id="2979466">d</span><span class="op" id="2979467">.</span><span class="ident" id="2979468">Readdirnames</span><span class="op" id="2979480">(</span><span class="op" id="2979481">-</span><span class="num" id="2979482">1</span><span class="op" id="2979483">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979486">sort</span><span class="op" id="2979490">.</span><span class="ident" id="2979491">Strings</span><span class="op" id="2979498">(</span><span class="ident" id="2979499">names</span><span class="op" id="2979504">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979508">for</span>&nbsp;<span class="ident" id="2979512">_</span><span class="op" id="2979513">,</span>&nbsp;<span class="ident" id="2979515">n</span>&nbsp;<span class="op" id="2979517">:=</span>&nbsp;<span class="keyword" id="2979520">range</span>&nbsp;<span class="ident" id="2979526">names</span>&nbsp;<span class="op" id="2979532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979536">matched</span><span class="op" id="2979543">,</span>&nbsp;<span class="ident" id="2979545">err</span>&nbsp;<span class="op" id="2979549">:=</span>&nbsp;<span class="ident" id="2979552">Match</span><span class="op" id="2979557">(</span><span class="ident" id="2979558">pattern</span><span class="op" id="2979565">,</span>&nbsp;<span class="ident" id="2979567">n</span><span class="op" id="2979568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979572">if</span>&nbsp;<span class="ident" id="2979575">err</span>&nbsp;<span class="op" id="2979579">!=</span>&nbsp;<span class="ident" id="2979582">nil</span>&nbsp;<span class="op" id="2979586">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979591">return</span>&nbsp;<span class="ident" id="2979598">m</span><span class="op" id="2979599">,</span>&nbsp;<span class="ident" id="2979601">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979611">if</span>&nbsp;<span class="ident" id="2979614">matched</span>&nbsp;<span class="op" id="2979622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979627">m</span>&nbsp;<span class="op" id="2979629">=</span>&nbsp;<span class="builtinfunc" id="2979631">append</span><span class="op" id="2979637">(</span><span class="ident" id="2979638">m</span><span class="op" id="2979639">,</span>&nbsp;<span class="ident" id="2979641">Join</span><span class="op" id="2979645">(</span><span class="ident" id="2979646">dir</span><span class="op" id="2979649">,</span>&nbsp;<span class="ident" id="2979651">n</span><span class="op" id="2979652">)</span><span class="op" id="2979653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979657">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979663">return</span><br>
<span class="lineno"></span><span class="op" id="2979670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2979673">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="2979742">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="2979766">func</span>&nbsp;<span class="ident" id="2979771">hasMeta</span><span class="op" id="2979778">(</span><span class="ident" id="2979779">path</span>&nbsp;<span class="builtintype" id="2979784">string</span><span class="op" id="2979790">)</span>&nbsp;<span class="builtintype" id="2979792">bool</span>&nbsp;<span class="op" id="2979797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2979800">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979865">return</span>&nbsp;<span class="ident" id="2979872">strings</span><span class="op" id="2979879">.</span><span class="ident" id="2979880">IndexAny</span><span class="op" id="2979888">(</span><span class="ident" id="2979889">path</span><span class="op" id="2979893">,</span>&nbsp;<span class="string" id="2979895">&#34;*?[&#34;</span><span class="op" id="2979900">)</span>&nbsp;<span class="op" id="2979902">&gt;=</span>&nbsp;<span class="num" id="2979905">0</span><br>
<span class="lineno"></span><span class="op" id="2979907">}</span>
</div>
</body>
</html>
