<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html" class="current">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7395111">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7395167">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7395221">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7395272">package</span>&nbsp;<span class="ident" id="7395280">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7395287">import</span>&nbsp;<span class="op" id="7395294">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7395297">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7395308">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7395318">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7395321">var</span>&nbsp;<span class="op" id="7395325">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7395328">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395338">=</span>&nbsp;<span class="ident" id="7395340">runtime</span><span class="op" id="7395347">.</span><span class="ident" id="7395348">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7395354">thisArch</span>&nbsp;&nbsp;<span class="op" id="7395364">=</span>&nbsp;<span class="ident" id="7395366">runtime</span><span class="op" id="7395373">.</span><span class="ident" id="7395374">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7395382">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7395392">=</span>&nbsp;<span class="ident" id="7395394">anotherOS</span><span class="op" id="7395403">(</span><span class="op" id="7395404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7395407">otherArch</span>&nbsp;<span class="op" id="7395417">=</span>&nbsp;<span class="ident" id="7395419">anotherArch</span><span class="op" id="7395430">(</span><span class="op" id="7395431">)</span><br>
<span class="lineno"></span><span class="op" id="7395433">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7395436">func</span>&nbsp;<span class="ident" id="7395441">anotherOS</span><span class="op" id="7395450">(</span><span class="op" id="7395451">)</span>&nbsp;<span class="builtintype" id="7395453">string</span>&nbsp;<span class="op" id="7395460">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7395463">if</span>&nbsp;<span class="ident" id="7395466">thisOS</span>&nbsp;<span class="op" id="7395473">!=</span>&nbsp;<span class="string" id="7395476">&#34;darwin&#34;</span>&nbsp;<span class="op" id="7395485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7395489">return</span>&nbsp;<span class="string" id="7395496">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7395509">return</span>&nbsp;<span class="string" id="7395516">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="7395524">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7395527">func</span>&nbsp;<span class="ident" id="7395532">anotherArch</span><span class="op" id="7395543">(</span><span class="op" id="7395544">)</span>&nbsp;<span class="builtintype" id="7395546">string</span>&nbsp;<span class="op" id="7395553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7395556">if</span>&nbsp;<span class="ident" id="7395559">thisArch</span>&nbsp;<span class="op" id="7395568">!=</span>&nbsp;<span class="string" id="7395571">&#34;amd64&#34;</span>&nbsp;<span class="op" id="7395579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7395583">return</span>&nbsp;<span class="string" id="7395590">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395599">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7395602">return</span>&nbsp;<span class="string" id="7395609">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="7395615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7395618">type</span>&nbsp;<span class="ident" id="7395623">GoodFileTest</span>&nbsp;<span class="keyword" id="7395636">struct</span>&nbsp;<span class="op" id="7395643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7395646">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7395653">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7395661">result</span>&nbsp;<span class="builtintype" id="7395668">bool</span><br>
<span class="lineno"></span><span class="op" id="7395673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7395676">var</span>&nbsp;<span class="ident" id="7395680">tests</span>&nbsp;<span class="op" id="7395686">=</span>&nbsp;<span class="op" id="7395688">[</span><span class="op" id="7395689">]</span><span class="ident" id="7395690">GoodFileTest</span><span class="op" id="7395702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395705">{</span><span class="string" id="7395706">&#34;file.go&#34;</span><span class="op" id="7395715">,</span>&nbsp;<span class="builtintype" id="7395717">true</span><span class="op" id="7395721">}</span><span class="op" id="7395722">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395725">{</span><span class="string" id="7395726">&#34;file.c&#34;</span><span class="op" id="7395734">,</span>&nbsp;<span class="builtintype" id="7395736">true</span><span class="op" id="7395740">}</span><span class="op" id="7395741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395744">{</span><span class="string" id="7395745">&#34;file_foo.go&#34;</span><span class="op" id="7395758">,</span>&nbsp;<span class="builtintype" id="7395760">true</span><span class="op" id="7395764">}</span><span class="op" id="7395765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395768">{</span><span class="string" id="7395769">&#34;file_&#34;</span>&nbsp;<span class="op" id="7395777">+</span>&nbsp;<span class="ident" id="7395779">thisArch</span>&nbsp;<span class="op" id="7395788">+</span>&nbsp;<span class="string" id="7395790">&#34;.go&#34;</span><span class="op" id="7395795">,</span>&nbsp;<span class="builtintype" id="7395797">true</span><span class="op" id="7395801">}</span><span class="op" id="7395802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395805">{</span><span class="string" id="7395806">&#34;file_&#34;</span>&nbsp;<span class="op" id="7395814">+</span>&nbsp;<span class="ident" id="7395816">otherArch</span>&nbsp;<span class="op" id="7395826">+</span>&nbsp;<span class="string" id="7395828">&#34;.go&#34;</span><span class="op" id="7395833">,</span>&nbsp;<span class="builtintype" id="7395835">false</span><span class="op" id="7395840">}</span><span class="op" id="7395841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395844">{</span><span class="string" id="7395845">&#34;file_&#34;</span>&nbsp;<span class="op" id="7395853">+</span>&nbsp;<span class="ident" id="7395855">thisOS</span>&nbsp;<span class="op" id="7395862">+</span>&nbsp;<span class="string" id="7395864">&#34;.go&#34;</span><span class="op" id="7395869">,</span>&nbsp;<span class="builtintype" id="7395871">true</span><span class="op" id="7395875">}</span><span class="op" id="7395876">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395879">{</span><span class="string" id="7395880">&#34;file_&#34;</span>&nbsp;<span class="op" id="7395888">+</span>&nbsp;<span class="ident" id="7395890">otherOS</span>&nbsp;<span class="op" id="7395898">+</span>&nbsp;<span class="string" id="7395900">&#34;.go&#34;</span><span class="op" id="7395905">,</span>&nbsp;<span class="builtintype" id="7395907">false</span><span class="op" id="7395912">}</span><span class="op" id="7395913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395916">{</span><span class="string" id="7395917">&#34;file_&#34;</span>&nbsp;<span class="op" id="7395925">+</span>&nbsp;<span class="ident" id="7395927">thisOS</span>&nbsp;<span class="op" id="7395934">+</span>&nbsp;<span class="string" id="7395936">&#34;_&#34;</span>&nbsp;<span class="op" id="7395940">+</span>&nbsp;<span class="ident" id="7395942">thisArch</span>&nbsp;<span class="op" id="7395951">+</span>&nbsp;<span class="string" id="7395953">&#34;.go&#34;</span><span class="op" id="7395958">,</span>&nbsp;<span class="builtintype" id="7395960">true</span><span class="op" id="7395964">}</span><span class="op" id="7395965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7395968">{</span><span class="string" id="7395969">&#34;file_&#34;</span>&nbsp;<span class="op" id="7395977">+</span>&nbsp;<span class="ident" id="7395979">otherOS</span>&nbsp;<span class="op" id="7395987">+</span>&nbsp;<span class="string" id="7395989">&#34;_&#34;</span>&nbsp;<span class="op" id="7395993">+</span>&nbsp;<span class="ident" id="7395995">thisArch</span>&nbsp;<span class="op" id="7396004">+</span>&nbsp;<span class="string" id="7396006">&#34;.go&#34;</span><span class="op" id="7396011">,</span>&nbsp;<span class="builtintype" id="7396013">false</span><span class="op" id="7396018">}</span><span class="op" id="7396019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7396022">{</span><span class="string" id="7396023">&#34;file_&#34;</span>&nbsp;<span class="op" id="7396031">+</span>&nbsp;<span class="ident" id="7396033">thisOS</span>&nbsp;<span class="op" id="7396040">+</span>&nbsp;<span class="string" id="7396042">&#34;_&#34;</span>&nbsp;<span class="op" id="7396046">+</span>&nbsp;<span class="ident" id="7396048">otherArch</span>&nbsp;<span class="op" id="7396058">+</span>&nbsp;<span class="string" id="7396060">&#34;.go&#34;</span><span class="op" id="7396065">,</span>&nbsp;<span class="builtintype" id="7396067">false</span><span class="op" id="7396072">}</span><span class="op" id="7396073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7396076">{</span><span class="string" id="7396077">&#34;file_&#34;</span>&nbsp;<span class="op" id="7396085">+</span>&nbsp;<span class="ident" id="7396087">otherOS</span>&nbsp;<span class="op" id="7396095">+</span>&nbsp;<span class="string" id="7396097">&#34;_&#34;</span>&nbsp;<span class="op" id="7396101">+</span>&nbsp;<span class="ident" id="7396103">otherArch</span>&nbsp;<span class="op" id="7396113">+</span>&nbsp;<span class="string" id="7396115">&#34;.go&#34;</span><span class="op" id="7396120">,</span>&nbsp;<span class="builtintype" id="7396122">false</span><span class="op" id="7396127">}</span><span class="op" id="7396128">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7396131">{</span><span class="string" id="7396132">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7396144">+</span>&nbsp;<span class="ident" id="7396146">thisArch</span>&nbsp;<span class="op" id="7396155">+</span>&nbsp;<span class="string" id="7396157">&#34;.go&#34;</span><span class="op" id="7396162">,</span>&nbsp;<span class="builtintype" id="7396164">true</span><span class="op" id="7396168">}</span><span class="op" id="7396169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7396172">{</span><span class="string" id="7396173">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7396185">+</span>&nbsp;<span class="ident" id="7396187">otherArch</span>&nbsp;<span class="op" id="7396197">+</span>&nbsp;<span class="string" id="7396199">&#34;.go&#34;</span><span class="op" id="7396204">,</span>&nbsp;<span class="builtintype" id="7396206">false</span><span class="op" id="7396211">}</span><span class="op" id="7396212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7396215">{</span><span class="string" id="7396216">&#34;file_&#34;</span>&nbsp;<span class="op" id="7396224">+</span>&nbsp;<span class="ident" id="7396226">thisOS</span>&nbsp;<span class="op" id="7396233">+</span>&nbsp;<span class="string" id="7396235">&#34;.c&#34;</span><span class="op" id="7396239">,</span>&nbsp;<span class="builtintype" id="7396241">true</span><span class="op" id="7396245">}</span><span class="op" id="7396246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7396249">{</span><span class="string" id="7396250">&#34;file_&#34;</span>&nbsp;<span class="op" id="7396258">+</span>&nbsp;<span class="ident" id="7396260">otherOS</span>&nbsp;<span class="op" id="7396268">+</span>&nbsp;<span class="string" id="7396270">&#34;.c&#34;</span><span class="op" id="7396274">,</span>&nbsp;<span class="builtintype" id="7396276">false</span><span class="op" id="7396281">}</span><span class="op" id="7396282">,</span><br>
<span class="lineno"></span><span class="op" id="7396284">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7396287">func</span>&nbsp;<span class="ident" id="7396292">TestGoodOSArch</span><span class="op" id="7396306">(</span><span class="ident" id="7396307">t</span>&nbsp;<span class="op" id="7396309">*</span><span class="ident" id="7396310">testing</span><span class="op" id="7396317">.</span><span class="ident" id="7396318">T</span><span class="op" id="7396319">)</span>&nbsp;<span class="op" id="7396321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7396324">for</span>&nbsp;<span class="ident" id="7396328">_</span><span class="op" id="7396329">,</span>&nbsp;<span class="ident" id="7396331">test</span>&nbsp;<span class="op" id="7396336">:=</span>&nbsp;<span class="keyword" id="7396339">range</span>&nbsp;<span class="ident" id="7396345">tests</span>&nbsp;<span class="op" id="7396351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7396355">if</span>&nbsp;<span class="ident" id="7396358">Default</span><span class="op" id="7396365">.</span><span class="ident" id="7396366">goodOSArchFile</span><span class="op" id="7396380">(</span><span class="ident" id="7396381">test</span><span class="op" id="7396385">.</span><span class="ident" id="7396386">name</span><span class="op" id="7396390">,</span>&nbsp;<span class="builtinfunc" id="7396392">make</span><span class="op" id="7396396">(</span><span class="keyword" id="7396397">map</span><span class="op" id="7396400">[</span><span class="builtintype" id="7396401">string</span><span class="op" id="7396407">]</span><span class="builtintype" id="7396408">bool</span><span class="op" id="7396412">)</span><span class="op" id="7396413">)</span>&nbsp;<span class="op" id="7396415">!=</span>&nbsp;<span class="ident" id="7396418">test</span><span class="op" id="7396422">.</span><span class="ident" id="7396423">result</span>&nbsp;<span class="op" id="7396430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7396435">t</span><span class="op" id="7396436">.</span><span class="ident" id="7396437">Fatalf</span><span class="op" id="7396443">(</span><span class="string" id="7396444">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7396470">,</span>&nbsp;<span class="ident" id="7396472">test</span><span class="op" id="7396476">.</span><span class="ident" id="7396477">name</span><span class="op" id="7396481">,</span>&nbsp;<span class="ident" id="7396483">test</span><span class="op" id="7396487">.</span><span class="ident" id="7396488">result</span><span class="op" id="7396494">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7396498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7396501">}</span><br>
<span class="lineno"></span><span class="op" id="7396503">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
