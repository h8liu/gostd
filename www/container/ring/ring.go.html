<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4988481">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4988536">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4988590">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4988641">//&nbsp;Package&nbsp;ring&nbsp;implements&nbsp;operations&nbsp;on&nbsp;circular&nbsp;lists.</span><br>
<span class="lineno"></span><span class="keyword" id="4988698">package</span>&nbsp;<span class="ident" id="4988706">ring</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4988712">//&nbsp;A&nbsp;Ring&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;circular&nbsp;list,&nbsp;or&nbsp;ring.</span><br>
<span class="lineno"></span><span class="comment" id="4988765">//&nbsp;Rings&nbsp;do&nbsp;not&nbsp;have&nbsp;a&nbsp;beginning&nbsp;or&nbsp;end;&nbsp;a&nbsp;pointer&nbsp;to&nbsp;any&nbsp;ring&nbsp;element</span><br>
<span class="lineno">10</span><span class="comment" id="4988836">//&nbsp;serves&nbsp;as&nbsp;reference&nbsp;to&nbsp;the&nbsp;entire&nbsp;ring.&nbsp;Empty&nbsp;rings&nbsp;are&nbsp;represented</span><br>
<span class="lineno"></span><span class="comment" id="4988907">//&nbsp;as&nbsp;nil&nbsp;Ring&nbsp;pointers.&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Ring&nbsp;is&nbsp;a&nbsp;one-element</span><br>
<span class="lineno"></span><span class="comment" id="4988975">//&nbsp;ring&nbsp;with&nbsp;a&nbsp;nil&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="4989001">//</span><br>
<span class="lineno"></span><span class="keyword" id="4989004">type</span>&nbsp;<span class="ident" id="4989009">Ring</span>&nbsp;<span class="keyword" id="4989014">struct</span>&nbsp;<span class="op" id="4989021">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4989024">next</span><span class="op" id="4989028">,</span>&nbsp;<span class="ident" id="4989030">prev</span>&nbsp;<span class="op" id="4989035">*</span><span class="ident" id="4989036"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4989042">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4989053">interface</span><span class="op" id="4989062">{</span><span class="op" id="4989063">}</span>&nbsp;<span class="comment" id="4989065">//&nbsp;for&nbsp;use&nbsp;by&nbsp;client;&nbsp;untouched&nbsp;by&nbsp;this&nbsp;library</span><br>
<span class="lineno"></span><span class="op" id="4989113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4989116">func</span>&nbsp;<span class="op" id="4989121">(</span><span class="ident" id="4989122">r</span>&nbsp;<span class="op" id="4989124">*</span><span class="ident" id="4989125"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4989129">)</span>&nbsp;<span class="ident" id="4989131">init</span><span class="op" id="4989135">(</span><span class="op" id="4989136">)</span>&nbsp;<span class="op" id="4989138">*</span><span class="ident" id="4989139"><a href="/container/ring/ring.go.html#4989009">Ring</a></span>&nbsp;<span class="op" id="4989144">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4989147"><a href="/container/ring/ring.go.html#4989122">r</a></span><span class="op" id="4989148">.</span><span class="ident" id="4989149">next</span>&nbsp;<span class="op" id="4989154">=</span>&nbsp;<span class="ident" id="4989156"><a href="/container/ring/ring.go.html#4989122">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4989159"><a href="/container/ring/ring.go.html#4989122">r</a></span><span class="op" id="4989160">.</span><span class="ident" id="4989161">prev</span>&nbsp;<span class="op" id="4989166">=</span>&nbsp;<span class="ident" id="4989168"><a href="/container/ring/ring.go.html#4989122">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989171">return</span>&nbsp;<span class="ident" id="4989178"><a href="/container/ring/ring.go.html#4989122">r</a></span><br>
<span class="lineno"></span><span class="op" id="4989180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="4989183">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="keyword" id="4989243">func</span>&nbsp;<span class="op" id="4989248">(</span><span class="ident" id="4989249">r</span>&nbsp;<span class="op" id="4989251">*</span><span class="ident" id="4989252"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4989256">)</span>&nbsp;<span class="ident" id="4989258">Next</span><span class="op" id="4989262">(</span><span class="op" id="4989263">)</span>&nbsp;<span class="op" id="4989265">*</span><span class="ident" id="4989266"><a href="/container/ring/ring.go.html#4989009">Ring</a></span>&nbsp;<span class="op" id="4989271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989274">if</span>&nbsp;<span class="ident" id="4989277"><a href="/container/ring/ring.go.html#4989249">r</a></span><span class="op" id="4989278">.</span><span class="ident" id="4989279">next</span>&nbsp;<span class="op" id="4989284">==</span>&nbsp;<span class="ident" id="4989287">nil</span>&nbsp;<span class="op" id="4989291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989295">return</span>&nbsp;<span class="ident" id="4989302"><a href="/container/ring/ring.go.html#4989249">r</a></span><span class="op" id="4989303">.</span><span class="ident" id="4989304">init</span><span class="op" id="4989308">(</span><span class="op" id="4989309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4989312">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989315">return</span>&nbsp;<span class="ident" id="4989322"><a href="/container/ring/ring.go.html#4989249">r</a></span><span class="op" id="4989323">.</span><span class="ident" id="4989324">next</span><br>
<span class="lineno"></span><span class="op" id="4989329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4989332">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="keyword" id="4989396">func</span>&nbsp;<span class="op" id="4989401">(</span><span class="ident" id="4989402">r</span>&nbsp;<span class="op" id="4989404">*</span><span class="ident" id="4989405"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4989409">)</span>&nbsp;<span class="ident" id="4989411">Prev</span><span class="op" id="4989415">(</span><span class="op" id="4989416">)</span>&nbsp;<span class="op" id="4989418">*</span><span class="ident" id="4989419"><a href="/container/ring/ring.go.html#4989009">Ring</a></span>&nbsp;<span class="op" id="4989424">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989427">if</span>&nbsp;<span class="ident" id="4989430"><a href="/container/ring/ring.go.html#4989402">r</a></span><span class="op" id="4989431">.</span><span class="ident" id="4989432">next</span>&nbsp;<span class="op" id="4989437">==</span>&nbsp;<span class="ident" id="4989440">nil</span>&nbsp;<span class="op" id="4989444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989448">return</span>&nbsp;<span class="ident" id="4989455"><a href="/container/ring/ring.go.html#4989402">r</a></span><span class="op" id="4989456">.</span><span class="ident" id="4989457">init</span><span class="op" id="4989461">(</span><span class="op" id="4989462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4989465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989468">return</span>&nbsp;<span class="ident" id="4989475"><a href="/container/ring/ring.go.html#4989402">r</a></span><span class="op" id="4989476">.</span><span class="ident" id="4989477">prev</span><br>
<span class="lineno"></span><span class="op" id="4989482">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="4989485">//&nbsp;Move&nbsp;moves&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;elements&nbsp;backward&nbsp;(n&nbsp;&lt;&nbsp;0)&nbsp;or&nbsp;forward&nbsp;(n&nbsp;&gt;=&nbsp;0)</span><br>
<span class="lineno"></span><span class="comment" id="4989557">//&nbsp;in&nbsp;the&nbsp;ring&nbsp;and&nbsp;returns&nbsp;that&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="comment" id="4989624">//</span><br>
<span class="lineno"></span><span class="keyword" id="4989627">func</span>&nbsp;<span class="op" id="4989632">(</span><span class="ident" id="4989633">r</span>&nbsp;<span class="op" id="4989635">*</span><span class="ident" id="4989636"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4989640">)</span>&nbsp;<span class="ident" id="4989642">Move</span><span class="op" id="4989646">(</span><span class="ident" id="4989647">n</span>&nbsp;<span class="builtintype" id="4989649">int</span><span class="op" id="4989652">)</span>&nbsp;<span class="op" id="4989654">*</span><span class="ident" id="4989655"><a href="/container/ring/ring.go.html#4989009">Ring</a></span>&nbsp;<span class="op" id="4989660">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989663">if</span>&nbsp;<span class="ident" id="4989666"><a href="/container/ring/ring.go.html#4989633">r</a></span><span class="op" id="4989667">.</span><span class="ident" id="4989668">next</span>&nbsp;<span class="op" id="4989673">==</span>&nbsp;<span class="ident" id="4989676">nil</span>&nbsp;<span class="op" id="4989680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989684">return</span>&nbsp;<span class="ident" id="4989691"><a href="/container/ring/ring.go.html#4989633">r</a></span><span class="op" id="4989692">.</span><span class="ident" id="4989693">init</span><span class="op" id="4989697">(</span><span class="op" id="4989698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4989701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989704">switch</span>&nbsp;<span class="op" id="4989711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989714">case</span>&nbsp;<span class="ident" id="4989719"><a href="/container/ring/ring.go.html#4989647">n</a></span>&nbsp;<span class="op" id="4989721">&lt;</span>&nbsp;<span class="num" id="4989723">0</span><span class="op" id="4989724">:</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989728">for</span>&nbsp;<span class="op" id="4989732">;</span>&nbsp;<span class="ident" id="4989734"><a href="/container/ring/ring.go.html#4989647">n</a></span>&nbsp;<span class="op" id="4989736">&lt;</span>&nbsp;<span class="num" id="4989738">0</span><span class="op" id="4989739">;</span>&nbsp;<span class="ident" id="4989741"><a href="/container/ring/ring.go.html#4989647">n</a></span><span class="op" id="4989742">++</span>&nbsp;<span class="op" id="4989745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4989750"><a href="/container/ring/ring.go.html#4989633">r</a></span>&nbsp;<span class="op" id="4989752">=</span>&nbsp;<span class="ident" id="4989754"><a href="/container/ring/ring.go.html#4989633">r</a></span><span class="op" id="4989755">.</span><span class="ident" id="4989756">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4989763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989766">case</span>&nbsp;<span class="ident" id="4989771"><a href="/container/ring/ring.go.html#4989647">n</a></span>&nbsp;<span class="op" id="4989773">&gt;</span>&nbsp;<span class="num" id="4989775">0</span><span class="op" id="4989776">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989780">for</span>&nbsp;<span class="op" id="4989784">;</span>&nbsp;<span class="ident" id="4989786"><a href="/container/ring/ring.go.html#4989647">n</a></span>&nbsp;<span class="op" id="4989788">&gt;</span>&nbsp;<span class="num" id="4989790">0</span><span class="op" id="4989791">;</span>&nbsp;<span class="ident" id="4989793"><a href="/container/ring/ring.go.html#4989647">n</a></span><span class="op" id="4989794">--</span>&nbsp;<span class="op" id="4989797">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4989802"><a href="/container/ring/ring.go.html#4989633">r</a></span>&nbsp;<span class="op" id="4989804">=</span>&nbsp;<span class="ident" id="4989806"><a href="/container/ring/ring.go.html#4989633">r</a></span><span class="op" id="4989807">.</span><span class="ident" id="4989808">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4989815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4989818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989821">return</span>&nbsp;<span class="ident" id="4989828"><a href="/container/ring/ring.go.html#4989633">r</a></span><br>
<span class="lineno"></span><span class="op" id="4989830">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="4989833">//&nbsp;New&nbsp;creates&nbsp;a&nbsp;ring&nbsp;of&nbsp;n&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="4989870">func</span>&nbsp;<span class="ident" id="4989875">New</span><span class="op" id="4989878">(</span><span class="ident" id="4989879">n</span>&nbsp;<span class="builtintype" id="4989881">int</span><span class="op" id="4989884">)</span>&nbsp;<span class="op" id="4989886">*</span><span class="ident" id="4989887"><a href="/container/ring/ring.go.html#4989009">Ring</a></span>&nbsp;<span class="op" id="4989892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989895">if</span>&nbsp;<span class="ident" id="4989898"><a href="/container/ring/ring.go.html#4989879">n</a></span>&nbsp;<span class="op" id="4989900">&lt;=</span>&nbsp;<span class="num" id="4989903">0</span>&nbsp;<span class="op" id="4989905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989909">return</span>&nbsp;<span class="ident" id="4989916">nil</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4989921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4989924">r</span>&nbsp;<span class="op" id="4989926">:=</span>&nbsp;<span class="builtinfunc" id="4989929">new</span><span class="op" id="4989932">(</span><span class="ident" id="4989933"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4989937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4989940">p</span>&nbsp;<span class="op" id="4989942">:=</span>&nbsp;<span class="ident" id="4989945"><a href="/container/ring/ring.go.html#4989924">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4989948">for</span>&nbsp;<span class="ident" id="4989952">i</span>&nbsp;<span class="op" id="4989954">:=</span>&nbsp;<span class="num" id="4989957">1</span><span class="op" id="4989958">;</span>&nbsp;<span class="ident" id="4989960"><a href="/container/ring/ring.go.html#4989952">i</a></span>&nbsp;<span class="op" id="4989962">&lt;</span>&nbsp;<span class="ident" id="4989964"><a href="/container/ring/ring.go.html#4989879">n</a></span><span class="op" id="4989965">;</span>&nbsp;<span class="ident" id="4989967"><a href="/container/ring/ring.go.html#4989952">i</a></span><span class="op" id="4989968">++</span>&nbsp;<span class="op" id="4989971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4989975"><a href="/container/ring/ring.go.html#4989940">p</a></span><span class="op" id="4989976">.</span><span class="ident" id="4989977">next</span>&nbsp;<span class="op" id="4989982">=</span>&nbsp;<span class="op" id="4989984">&amp;</span><span class="ident" id="4989985"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4989989">{</span><span class="ident" id="4989990">prev</span><span class="op" id="4989994">:</span>&nbsp;<span class="ident" id="4989996"><a href="/container/ring/ring.go.html#4989940">p</a></span><span class="op" id="4989997">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4990001"><a href="/container/ring/ring.go.html#4989940">p</a></span>&nbsp;<span class="op" id="4990003">=</span>&nbsp;<span class="ident" id="4990005"><a href="/container/ring/ring.go.html#4989940">p</a></span><span class="op" id="4990006">.</span><span class="ident" id="4990007">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4990013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4990016"><a href="/container/ring/ring.go.html#4989940">p</a></span><span class="op" id="4990017">.</span><span class="ident" id="4990018">next</span>&nbsp;<span class="op" id="4990023">=</span>&nbsp;<span class="ident" id="4990025"><a href="/container/ring/ring.go.html#4989924">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4990028"><a href="/container/ring/ring.go.html#4989924">r</a></span><span class="op" id="4990029">.</span><span class="ident" id="4990030">prev</span>&nbsp;<span class="op" id="4990035">=</span>&nbsp;<span class="ident" id="4990037"><a href="/container/ring/ring.go.html#4989940">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4990040">return</span>&nbsp;<span class="ident" id="4990047"><a href="/container/ring/ring.go.html#4989924">r</a></span><br>
<span class="lineno">75</span><span class="op" id="4990049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4990052">//&nbsp;Link&nbsp;connects&nbsp;ring&nbsp;r&nbsp;with&nbsp;ring&nbsp;s&nbsp;such&nbsp;that&nbsp;r.Next()</span><br>
<span class="lineno"></span><span class="comment" id="4990107">//&nbsp;becomes&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;original&nbsp;value&nbsp;for&nbsp;r.Next().</span><br>
<span class="lineno"></span><span class="comment" id="4990165">//&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno">80</span><span class="comment" id="4990189">//</span><br>
<span class="lineno"></span><span class="comment" id="4990192">//&nbsp;If&nbsp;r&nbsp;and&nbsp;s&nbsp;point&nbsp;to&nbsp;the&nbsp;same&nbsp;ring,&nbsp;linking</span><br>
<span class="lineno"></span><span class="comment" id="4990238">//&nbsp;them&nbsp;removes&nbsp;the&nbsp;elements&nbsp;between&nbsp;r&nbsp;and&nbsp;s&nbsp;from&nbsp;the&nbsp;ring.</span><br>
<span class="lineno"></span><span class="comment" id="4990298">//&nbsp;The&nbsp;removed&nbsp;elements&nbsp;form&nbsp;a&nbsp;subring&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4990357">//&nbsp;reference&nbsp;to&nbsp;that&nbsp;subring&nbsp;(if&nbsp;no&nbsp;elements&nbsp;were&nbsp;removed,</span><br>
<span class="lineno">85</span><span class="comment" id="4990416">//&nbsp;the&nbsp;result&nbsp;is&nbsp;still&nbsp;the&nbsp;original&nbsp;value&nbsp;for&nbsp;r.Next(),</span><br>
<span class="lineno"></span><span class="comment" id="4990472">//&nbsp;and&nbsp;not&nbsp;nil).</span><br>
<span class="lineno"></span><span class="comment" id="4990489">//</span><br>
<span class="lineno"></span><span class="comment" id="4990492">//&nbsp;If&nbsp;r&nbsp;and&nbsp;s&nbsp;point&nbsp;to&nbsp;different&nbsp;rings,&nbsp;linking</span><br>
<span class="lineno"></span><span class="comment" id="4990540">//&nbsp;them&nbsp;creates&nbsp;a&nbsp;single&nbsp;ring&nbsp;with&nbsp;the&nbsp;elements&nbsp;of&nbsp;s&nbsp;inserted</span><br>
<span class="lineno">90</span><span class="comment" id="4990602">//&nbsp;after&nbsp;r.&nbsp;The&nbsp;result&nbsp;points&nbsp;to&nbsp;the&nbsp;element&nbsp;following&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4990661">//&nbsp;last&nbsp;element&nbsp;of&nbsp;s&nbsp;after&nbsp;insertion.</span><br>
<span class="lineno"></span><span class="comment" id="4990699">//</span><br>
<span class="lineno"></span><span class="keyword" id="4990702">func</span>&nbsp;<span class="op" id="4990707">(</span><span class="ident" id="4990708">r</span>&nbsp;<span class="op" id="4990710">*</span><span class="ident" id="4990711"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4990715">)</span>&nbsp;<span class="ident" id="4990717">Link</span><span class="op" id="4990721">(</span><span class="ident" id="4990722">s</span>&nbsp;<span class="op" id="4990724">*</span><span class="ident" id="4990725"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4990729">)</span>&nbsp;<span class="op" id="4990731">*</span><span class="ident" id="4990732"><a href="/container/ring/ring.go.html#4989009">Ring</a></span>&nbsp;<span class="op" id="4990737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4990740">n</span>&nbsp;<span class="op" id="4990742">:=</span>&nbsp;<span class="ident" id="4990745"><a href="/container/ring/ring.go.html#4990708">r</a></span><span class="op" id="4990746">.</span><span class="ident" id="4990747">Next</span><span class="op" id="4990751">(</span><span class="op" id="4990752">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4990755">if</span>&nbsp;<span class="ident" id="4990758"><a href="/container/ring/ring.go.html#4990722">s</a></span>&nbsp;<span class="op" id="4990760">!=</span>&nbsp;<span class="ident" id="4990763">nil</span>&nbsp;<span class="op" id="4990767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4990771">p</span>&nbsp;<span class="op" id="4990773">:=</span>&nbsp;<span class="ident" id="4990776"><a href="/container/ring/ring.go.html#4990722">s</a></span><span class="op" id="4990777">.</span><span class="ident" id="4990778">Prev</span><span class="op" id="4990782">(</span><span class="op" id="4990783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4990787">//&nbsp;Note:&nbsp;Cannot&nbsp;use&nbsp;multiple&nbsp;assignment&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4990837">//&nbsp;evaluation&nbsp;order&nbsp;of&nbsp;LHS&nbsp;is&nbsp;not&nbsp;specified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4990884"><a href="/container/ring/ring.go.html#4990708">r</a></span><span class="op" id="4990885">.</span><span class="ident" id="4990886">next</span>&nbsp;<span class="op" id="4990891">=</span>&nbsp;<span class="ident" id="4990893"><a href="/container/ring/ring.go.html#4990722">s</a></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4990897"><a href="/container/ring/ring.go.html#4990722">s</a></span><span class="op" id="4990898">.</span><span class="ident" id="4990899">prev</span>&nbsp;<span class="op" id="4990904">=</span>&nbsp;<span class="ident" id="4990906"><a href="/container/ring/ring.go.html#4990708">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4990910"><a href="/container/ring/ring.go.html#4990740">n</a></span><span class="op" id="4990911">.</span><span class="ident" id="4990912">prev</span>&nbsp;<span class="op" id="4990917">=</span>&nbsp;<span class="ident" id="4990919"><a href="/container/ring/ring.go.html#4990771">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4990923"><a href="/container/ring/ring.go.html#4990771">p</a></span><span class="op" id="4990924">.</span><span class="ident" id="4990925">next</span>&nbsp;<span class="op" id="4990930">=</span>&nbsp;<span class="ident" id="4990932"><a href="/container/ring/ring.go.html#4990740">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4990935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4990938">return</span>&nbsp;<span class="ident" id="4990945"><a href="/container/ring/ring.go.html#4990740">n</a></span><br>
<span class="lineno">105</span><span class="op" id="4990947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4990950">//&nbsp;Unlink&nbsp;removes&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;elements&nbsp;from&nbsp;the&nbsp;ring&nbsp;r,&nbsp;starting</span><br>
<span class="lineno"></span><span class="comment" id="4991015">//&nbsp;at&nbsp;r.Next().&nbsp;If&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;==&nbsp;0,&nbsp;r&nbsp;remains&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="4991073">//&nbsp;The&nbsp;result&nbsp;is&nbsp;the&nbsp;removed&nbsp;subring.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno">110</span><span class="comment" id="4991132">//</span><br>
<span class="lineno"></span><span class="keyword" id="4991135">func</span>&nbsp;<span class="op" id="4991140">(</span><span class="ident" id="4991141">r</span>&nbsp;<span class="op" id="4991143">*</span><span class="ident" id="4991144"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4991148">)</span>&nbsp;<span class="ident" id="4991150">Unlink</span><span class="op" id="4991156">(</span><span class="ident" id="4991157">n</span>&nbsp;<span class="builtintype" id="4991159">int</span><span class="op" id="4991162">)</span>&nbsp;<span class="op" id="4991164">*</span><span class="ident" id="4991165"><a href="/container/ring/ring.go.html#4989009">Ring</a></span>&nbsp;<span class="op" id="4991170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4991173">if</span>&nbsp;<span class="ident" id="4991176"><a href="/container/ring/ring.go.html#4991157">n</a></span>&nbsp;<span class="op" id="4991178">&lt;=</span>&nbsp;<span class="num" id="4991181">0</span>&nbsp;<span class="op" id="4991183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4991187">return</span>&nbsp;<span class="ident" id="4991194">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4991199">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4991202">return</span>&nbsp;<span class="ident" id="4991209"><a href="/container/ring/ring.go.html#4991141">r</a></span><span class="op" id="4991210">.</span><span class="ident" id="4991211">Link</span><span class="op" id="4991215">(</span><span class="ident" id="4991216"><a href="/container/ring/ring.go.html#4991141">r</a></span><span class="op" id="4991217">.</span><span class="ident" id="4991218">Move</span><span class="op" id="4991222">(</span><span class="ident" id="4991223"><a href="/container/ring/ring.go.html#4991157">n</a></span>&nbsp;<span class="op" id="4991225">+</span>&nbsp;<span class="num" id="4991227">1</span><span class="op" id="4991228">)</span><span class="op" id="4991229">)</span><br>
<span class="lineno"></span><span class="op" id="4991231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4991234">//&nbsp;Len&nbsp;computes&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;ring&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="4991284">//&nbsp;It&nbsp;executes&nbsp;in&nbsp;time&nbsp;proportional&nbsp;to&nbsp;the&nbsp;number&nbsp;of&nbsp;elements.</span><br>
<span class="lineno">120</span><span class="comment" id="4991347">//</span><br>
<span class="lineno"></span><span class="keyword" id="4991350">func</span>&nbsp;<span class="op" id="4991355">(</span><span class="ident" id="4991356">r</span>&nbsp;<span class="op" id="4991358">*</span><span class="ident" id="4991359"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4991363">)</span>&nbsp;<span class="ident" id="4991365">Len</span><span class="op" id="4991368">(</span><span class="op" id="4991369">)</span>&nbsp;<span class="builtintype" id="4991371">int</span>&nbsp;<span class="op" id="4991375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4991378">n</span>&nbsp;<span class="op" id="4991380">:=</span>&nbsp;<span class="num" id="4991383">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4991386">if</span>&nbsp;<span class="ident" id="4991389"><a href="/container/ring/ring.go.html#4991356">r</a></span>&nbsp;<span class="op" id="4991391">!=</span>&nbsp;<span class="ident" id="4991394">nil</span>&nbsp;<span class="op" id="4991398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4991402"><a href="/container/ring/ring.go.html#4991378">n</a></span>&nbsp;<span class="op" id="4991404">=</span>&nbsp;<span class="num" id="4991406">1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4991410">for</span>&nbsp;<span class="ident" id="4991414">p</span>&nbsp;<span class="op" id="4991416">:=</span>&nbsp;<span class="ident" id="4991419"><a href="/container/ring/ring.go.html#4991356">r</a></span><span class="op" id="4991420">.</span><span class="ident" id="4991421">Next</span><span class="op" id="4991425">(</span><span class="op" id="4991426">)</span><span class="op" id="4991427">;</span>&nbsp;<span class="ident" id="4991429"><a href="/container/ring/ring.go.html#4991414">p</a></span>&nbsp;<span class="op" id="4991431">!=</span>&nbsp;<span class="ident" id="4991434"><a href="/container/ring/ring.go.html#4991356">r</a></span><span class="op" id="4991435">;</span>&nbsp;<span class="ident" id="4991437"><a href="/container/ring/ring.go.html#4991414">p</a></span>&nbsp;<span class="op" id="4991439">=</span>&nbsp;<span class="ident" id="4991441"><a href="/container/ring/ring.go.html#4991414">p</a></span><span class="op" id="4991442">.</span><span class="ident" id="4991443">next</span>&nbsp;<span class="op" id="4991448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4991453"><a href="/container/ring/ring.go.html#4991378">n</a></span><span class="op" id="4991454">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4991459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4991462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4991465">return</span>&nbsp;<span class="ident" id="4991472"><a href="/container/ring/ring.go.html#4991378">n</a></span><br>
<span class="lineno">130</span><span class="op" id="4991474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4991477">//&nbsp;Do&nbsp;calls&nbsp;function&nbsp;f&nbsp;on&nbsp;each&nbsp;element&nbsp;of&nbsp;the&nbsp;ring,&nbsp;in&nbsp;forward&nbsp;order.</span><br>
<span class="lineno"></span><span class="comment" id="4991547">//&nbsp;The&nbsp;behavior&nbsp;of&nbsp;Do&nbsp;is&nbsp;undefined&nbsp;if&nbsp;f&nbsp;changes&nbsp;*r.</span><br>
<span class="lineno"></span><span class="keyword" id="4991599">func</span>&nbsp;<span class="op" id="4991604">(</span><span class="ident" id="4991605">r</span>&nbsp;<span class="op" id="4991607">*</span><span class="ident" id="4991608"><a href="/container/ring/ring.go.html#4989009">Ring</a></span><span class="op" id="4991612">)</span>&nbsp;<span class="ident" id="4991614">Do</span><span class="op" id="4991616">(</span><span class="ident" id="4991617">f</span>&nbsp;<span class="keyword" id="4991619">func</span><span class="op" id="4991623">(</span><span class="keyword" id="4991624">interface</span><span class="op" id="4991633">{</span><span class="op" id="4991634">}</span><span class="op" id="4991635">)</span><span class="op" id="4991636">)</span>&nbsp;<span class="op" id="4991638">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4991641">if</span>&nbsp;<span class="ident" id="4991644"><a href="/container/ring/ring.go.html#4991605">r</a></span>&nbsp;<span class="op" id="4991646">!=</span>&nbsp;<span class="ident" id="4991649">nil</span>&nbsp;<span class="op" id="4991653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4991657"><a href="/container/ring/ring.go.html#4991617">f</a></span><span class="op" id="4991658">(</span><span class="ident" id="4991659"><a href="/container/ring/ring.go.html#4991605">r</a></span><span class="op" id="4991660">.</span><span class="ident" id="4991661">Value</span><span class="op" id="4991666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4991670">for</span>&nbsp;<span class="ident" id="4991674">p</span>&nbsp;<span class="op" id="4991676">:=</span>&nbsp;<span class="ident" id="4991679"><a href="/container/ring/ring.go.html#4991605">r</a></span><span class="op" id="4991680">.</span><span class="ident" id="4991681">Next</span><span class="op" id="4991685">(</span><span class="op" id="4991686">)</span><span class="op" id="4991687">;</span>&nbsp;<span class="ident" id="4991689"><a href="/container/ring/ring.go.html#4991674">p</a></span>&nbsp;<span class="op" id="4991691">!=</span>&nbsp;<span class="ident" id="4991694"><a href="/container/ring/ring.go.html#4991605">r</a></span><span class="op" id="4991695">;</span>&nbsp;<span class="ident" id="4991697"><a href="/container/ring/ring.go.html#4991674">p</a></span>&nbsp;<span class="op" id="4991699">=</span>&nbsp;<span class="ident" id="4991701"><a href="/container/ring/ring.go.html#4991674">p</a></span><span class="op" id="4991702">.</span><span class="ident" id="4991703">next</span>&nbsp;<span class="op" id="4991708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4991713"><a href="/container/ring/ring.go.html#4991617">f</a></span><span class="op" id="4991714">(</span><span class="ident" id="4991715"><a href="/container/ring/ring.go.html#4991674">p</a></span><span class="op" id="4991716">.</span><span class="ident" id="4991717">Value</span><span class="op" id="4991722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4991726">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4991729">}</span><br>
<span class="lineno"></span><span class="op" id="4991731">}</span>
</div>
</body>
</html>
