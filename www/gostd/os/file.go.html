<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2323008">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2323063">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2323117">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2323168">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2323244">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2323318">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2323399">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2323470">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2323545">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2323616">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2323675">//</span><br>
<span class="lineno"></span><span class="comment" id="2323678">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2323754">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2323837">//</span><br>
<span class="lineno"></span><span class="comment" id="2323840">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2323908">//</span><br>
<span class="lineno"></span><span class="comment" id="2323911">//&nbsp;&nbsp;&nbsp;&nbspfile,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2323966">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2323985">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2324004">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2324009">//</span><br>
<span class="lineno"></span><span class="comment" id="2324012">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2324082">//</span><br>
<span class="lineno">25</span><span class="comment" id="2324085">//&nbsp;&nbsp;&nbsp;&nbspopen&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2324128">//</span><br>
<span class="lineno"></span><span class="comment" id="2324131">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2324199">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2324270">//</span><br>
<span class="lineno">30</span><span class="comment" id="2324273">//&nbsp;&nbsp;&nbsp;&nbspdata&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2324302">//&nbsp;&nbsp;&nbsp;&nbspcount,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2324335">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2324354">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2324373">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">35</span><span class="comment" id="2324378">//&nbsp;&nbsp;&nbsp;&nbspfmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2324436">//</span><br>
<span class="lineno"></span><span class="keyword" id="2324439">package</span>&nbsp;<span class="ident" id="2324447">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2324451">import</span>&nbsp;<span class="op" id="2324458">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2324461">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2324467">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2324477">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2324480">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2324539">func</span>&nbsp;<span class="op" id="2324544">(</span><span class="ident" id="2324545">f</span>&nbsp;<span class="op" id="2324547">*</span><span class="ident" id="2324548">File</span><span class="op" id="2324552">)</span>&nbsp;<span class="ident" id="2324554">Name</span><span class="op" id="2324558">(</span><span class="op" id="2324559">)</span>&nbsp;<span class="builtintype" id="2324561">string</span>&nbsp;<span class="op" id="2324568">{</span>&nbsp;<span class="keyword" id="2324570">return</span>&nbsp;<span class="ident" id="2324577">f</span><span class="op" id="2324578">.</span><span class="ident" id="2324579">name</span>&nbsp;<span class="op" id="2324584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2324587">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2324663">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2324720">var</span>&nbsp;<span class="op" id="2324724">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2324727">Stdin</span>&nbsp;&nbsp;<span class="op" id="2324734">=</span>&nbsp;<span class="ident" id="2324736">NewFile</span><span class="op" id="2324743">(</span><span class="builtintype" id="2324744">uintptr</span><span class="op" id="2324751">(</span><span class="ident" id="2324752">syscall</span><span class="op" id="2324759">.</span><span class="ident" id="2324760">Stdin</span><span class="op" id="2324765">)</span><span class="op" id="2324766">,</span>&nbsp;<span class="string" id="2324768">&#34;/dev/stdin&#34;</span><span class="op" id="2324780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2324783">Stdout</span>&nbsp;<span class="op" id="2324790">=</span>&nbsp;<span class="ident" id="2324792">NewFile</span><span class="op" id="2324799">(</span><span class="builtintype" id="2324800">uintptr</span><span class="op" id="2324807">(</span><span class="ident" id="2324808">syscall</span><span class="op" id="2324815">.</span><span class="ident" id="2324816">Stdout</span><span class="op" id="2324822">)</span><span class="op" id="2324823">,</span>&nbsp;<span class="string" id="2324825">&#34;/dev/stdout&#34;</span><span class="op" id="2324838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2324841">Stderr</span>&nbsp;<span class="op" id="2324848">=</span>&nbsp;<span class="ident" id="2324850">NewFile</span><span class="op" id="2324857">(</span><span class="builtintype" id="2324858">uintptr</span><span class="op" id="2324865">(</span><span class="ident" id="2324866">syscall</span><span class="op" id="2324873">.</span><span class="ident" id="2324874">Stderr</span><span class="op" id="2324880">)</span><span class="op" id="2324881">,</span>&nbsp;<span class="string" id="2324883">&#34;/dev/stderr&#34;</span><span class="op" id="2324896">)</span><br>
<span class="lineno"></span><span class="op" id="2324898">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2324901">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2324973">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2325014">const</span>&nbsp;<span class="op" id="2325020">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325023">O_RDONLY</span>&nbsp;<span class="builtintype" id="2325032">int</span>&nbsp;<span class="op" id="2325036">=</span>&nbsp;<span class="ident" id="2325038">syscall</span><span class="op" id="2325045">.</span><span class="ident" id="2325046">O_RDONLY</span>&nbsp;<span class="comment" id="2325055">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325084">O_WRONLY</span>&nbsp;<span class="builtintype" id="2325093">int</span>&nbsp;<span class="op" id="2325097">=</span>&nbsp;<span class="ident" id="2325099">syscall</span><span class="op" id="2325106">.</span><span class="ident" id="2325107">O_WRONLY</span>&nbsp;<span class="comment" id="2325116">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325146">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2325155">int</span>&nbsp;<span class="op" id="2325159">=</span>&nbsp;<span class="ident" id="2325161">syscall</span><span class="op" id="2325168">.</span><span class="ident" id="2325169">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2325178">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325208">O_APPEND</span>&nbsp;<span class="builtintype" id="2325217">int</span>&nbsp;<span class="op" id="2325221">=</span>&nbsp;<span class="ident" id="2325223">syscall</span><span class="op" id="2325230">.</span><span class="ident" id="2325231">O_APPEND</span>&nbsp;<span class="comment" id="2325240">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325282">O_CREATE</span>&nbsp;<span class="builtintype" id="2325291">int</span>&nbsp;<span class="op" id="2325295">=</span>&nbsp;<span class="ident" id="2325297">syscall</span><span class="op" id="2325304">.</span><span class="ident" id="2325305">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2325314">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325352">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2325361">int</span>&nbsp;<span class="op" id="2325365">=</span>&nbsp;<span class="ident" id="2325367">syscall</span><span class="op" id="2325374">.</span><span class="ident" id="2325375">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2325384">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325428">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2325437">int</span>&nbsp;<span class="op" id="2325441">=</span>&nbsp;<span class="ident" id="2325443">syscall</span><span class="op" id="2325450">.</span><span class="ident" id="2325451">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2325460">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325490">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2325499">int</span>&nbsp;<span class="op" id="2325503">=</span>&nbsp;<span class="ident" id="2325505">syscall</span><span class="op" id="2325512">.</span><span class="ident" id="2325513">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2325522">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2325565">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2325568">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2325591">const</span>&nbsp;<span class="op" id="2325597">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325600">SEEK_SET</span>&nbsp;<span class="builtintype" id="2325609">int</span>&nbsp;<span class="op" id="2325613">=</span>&nbsp;<span class="num" id="2325615">0</span>&nbsp;<span class="comment" id="2325617">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325661">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2325670">int</span>&nbsp;<span class="op" id="2325674">=</span>&nbsp;<span class="num" id="2325676">1</span>&nbsp;<span class="comment" id="2325678">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325718">SEEK_END</span>&nbsp;<span class="builtintype" id="2325727">int</span>&nbsp;<span class="op" id="2325731">=</span>&nbsp;<span class="num" id="2325733">2</span>&nbsp;<span class="comment" id="2325735">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2325763">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2325766">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2325831">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2325876">type</span>&nbsp;<span class="ident" id="2325881">LinkError</span>&nbsp;<span class="keyword" id="2325891">struct</span>&nbsp;<span class="op" id="2325898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325901">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2325905">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325913">Old</span>&nbsp;<span class="builtintype" id="2325917">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325925">New</span>&nbsp;<span class="builtintype" id="2325929">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325937">Err</span>&nbsp;<span class="builtintype" id="2325941">error</span><br>
<span class="lineno"></span><span class="op" id="2325947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2325950">func</span>&nbsp;<span class="op" id="2325955">(</span><span class="ident" id="2325956">e</span>&nbsp;<span class="op" id="2325958">*</span><span class="ident" id="2325959">LinkError</span><span class="op" id="2325968">)</span>&nbsp;<span class="ident" id="2325970">Error</span><span class="op" id="2325975">(</span><span class="op" id="2325976">)</span>&nbsp;<span class="builtintype" id="2325978">string</span>&nbsp;<span class="op" id="2325985">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2325988">return</span>&nbsp;<span class="ident" id="2325995">e</span><span class="op" id="2325996">.</span><span class="ident" id="2325997">Op</span>&nbsp;<span class="op" id="2326000">+</span>&nbsp;<span class="string" id="2326002">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2326006">+</span>&nbsp;<span class="ident" id="2326008">e</span><span class="op" id="2326009">.</span><span class="ident" id="2326010">Old</span>&nbsp;<span class="op" id="2326014">+</span>&nbsp;<span class="string" id="2326016">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2326020">+</span>&nbsp;<span class="ident" id="2326022">e</span><span class="op" id="2326023">.</span><span class="ident" id="2326024">New</span>&nbsp;<span class="op" id="2326028">+</span>&nbsp;<span class="string" id="2326030">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2326035">+</span>&nbsp;<span class="ident" id="2326037">e</span><span class="op" id="2326038">.</span><span class="ident" id="2326039">Err</span><span class="op" id="2326042">.</span><span class="ident" id="2326043">Error</span><span class="op" id="2326048">(</span><span class="op" id="2326049">)</span><br>
<span class="lineno"></span><span class="op" id="2326051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2326054">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2326102">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2326163">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2326222">func</span>&nbsp;<span class="op" id="2326227">(</span><span class="ident" id="2326228">f</span>&nbsp;<span class="op" id="2326230">*</span><span class="ident" id="2326231">File</span><span class="op" id="2326235">)</span>&nbsp;<span class="ident" id="2326237">Read</span><span class="op" id="2326241">(</span><span class="ident" id="2326242">b</span>&nbsp;<span class="op" id="2326244">[</span><span class="op" id="2326245">]</span><span class="builtintype" id="2326246">byte</span><span class="op" id="2326250">)</span>&nbsp;<span class="op" id="2326252">(</span><span class="ident" id="2326253">n</span>&nbsp;<span class="builtintype" id="2326255">int</span><span class="op" id="2326258">,</span>&nbsp;<span class="ident" id="2326260">err</span>&nbsp;<span class="builtintype" id="2326264">error</span><span class="op" id="2326269">)</span>&nbsp;<span class="op" id="2326271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326274">if</span>&nbsp;<span class="ident" id="2326277">f</span>&nbsp;<span class="op" id="2326279">==</span>&nbsp;<span class="ident" id="2326282">nil</span>&nbsp;<span class="op" id="2326286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326290">return</span>&nbsp;<span class="num" id="2326297">0</span><span class="op" id="2326298">,</span>&nbsp;<span class="ident" id="2326300">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326312">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326315">n</span><span class="op" id="2326316">,</span>&nbsp;<span class="ident" id="2326318">e</span>&nbsp;<span class="op" id="2326320">:=</span>&nbsp;<span class="ident" id="2326323">f</span><span class="op" id="2326324">.</span><span class="ident" id="2326325">read</span><span class="op" id="2326329">(</span><span class="ident" id="2326330">b</span><span class="op" id="2326331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326334">if</span>&nbsp;<span class="ident" id="2326337">n</span>&nbsp;<span class="op" id="2326339">&lt;</span>&nbsp;<span class="num" id="2326341">0</span>&nbsp;<span class="op" id="2326343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326347">n</span>&nbsp;<span class="op" id="2326349">=</span>&nbsp;<span class="num" id="2326351">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326357">if</span>&nbsp;<span class="ident" id="2326360">n</span>&nbsp;<span class="op" id="2326362">==</span>&nbsp;<span class="num" id="2326365">0</span>&nbsp;<span class="op" id="2326367">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2326370">len</span><span class="op" id="2326373">(</span><span class="ident" id="2326374">b</span><span class="op" id="2326375">)</span>&nbsp;<span class="op" id="2326377">&gt;</span>&nbsp;<span class="num" id="2326379">0</span>&nbsp;<span class="op" id="2326381">&amp;&amp;</span>&nbsp;<span class="ident" id="2326384">e</span>&nbsp;<span class="op" id="2326386">==</span>&nbsp;<span class="ident" id="2326389">nil</span>&nbsp;<span class="op" id="2326393">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326397">return</span>&nbsp;<span class="num" id="2326404">0</span><span class="op" id="2326405">,</span>&nbsp;<span class="ident" id="2326407">io</span><span class="op" id="2326409">.</span><span class="ident" id="2326410">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326418">if</span>&nbsp;<span class="ident" id="2326421">e</span>&nbsp;<span class="op" id="2326423">!=</span>&nbsp;<span class="ident" id="2326426">nil</span>&nbsp;<span class="op" id="2326430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326434">err</span>&nbsp;<span class="op" id="2326438">=</span>&nbsp;<span class="op" id="2326440">&amp;</span><span class="ident" id="2326441">PathError</span><span class="op" id="2326450">{</span><span class="string" id="2326451">&#34;read&#34;</span><span class="op" id="2326457">,</span>&nbsp;<span class="ident" id="2326459">f</span><span class="op" id="2326460">.</span><span class="ident" id="2326461">name</span><span class="op" id="2326465">,</span>&nbsp;<span class="ident" id="2326467">e</span><span class="op" id="2326468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326471">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326474">return</span>&nbsp;<span class="ident" id="2326481">n</span><span class="op" id="2326482">,</span>&nbsp;<span class="ident" id="2326484">err</span><br>
<span class="lineno"></span><span class="op" id="2326488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2326491">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2326563">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2326625">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2326683">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2326724">func</span>&nbsp;<span class="op" id="2326729">(</span><span class="ident" id="2326730">f</span>&nbsp;<span class="op" id="2326732">*</span><span class="ident" id="2326733">File</span><span class="op" id="2326737">)</span>&nbsp;<span class="ident" id="2326739">ReadAt</span><span class="op" id="2326745">(</span><span class="ident" id="2326746">b</span>&nbsp;<span class="op" id="2326748">[</span><span class="op" id="2326749">]</span><span class="builtintype" id="2326750">byte</span><span class="op" id="2326754">,</span>&nbsp;<span class="ident" id="2326756">off</span>&nbsp;<span class="ident" id="2326760">int64</span><span class="op" id="2326765">)</span>&nbsp;<span class="op" id="2326767">(</span><span class="ident" id="2326768">n</span>&nbsp;<span class="builtintype" id="2326770">int</span><span class="op" id="2326773">,</span>&nbsp;<span class="ident" id="2326775">err</span>&nbsp;<span class="builtintype" id="2326779">error</span><span class="op" id="2326784">)</span>&nbsp;<span class="op" id="2326786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326789">if</span>&nbsp;<span class="ident" id="2326792">f</span>&nbsp;<span class="op" id="2326794">==</span>&nbsp;<span class="ident" id="2326797">nil</span>&nbsp;<span class="op" id="2326801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326805">return</span>&nbsp;<span class="num" id="2326812">0</span><span class="op" id="2326813">,</span>&nbsp;<span class="ident" id="2326815">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326830">for</span>&nbsp;<span class="builtinfunc" id="2326834">len</span><span class="op" id="2326837">(</span><span class="ident" id="2326838">b</span><span class="op" id="2326839">)</span>&nbsp;<span class="op" id="2326841">&gt;</span>&nbsp;<span class="num" id="2326843">0</span>&nbsp;<span class="op" id="2326845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326849">m</span><span class="op" id="2326850">,</span>&nbsp;<span class="ident" id="2326852">e</span>&nbsp;<span class="op" id="2326854">:=</span>&nbsp;<span class="ident" id="2326857">f</span><span class="op" id="2326858">.</span><span class="ident" id="2326859">pread</span><span class="op" id="2326864">(</span><span class="ident" id="2326865">b</span><span class="op" id="2326866">,</span>&nbsp;<span class="ident" id="2326868">off</span><span class="op" id="2326871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326875">if</span>&nbsp;<span class="ident" id="2326878">m</span>&nbsp;<span class="op" id="2326880">==</span>&nbsp;<span class="num" id="2326883">0</span>&nbsp;<span class="op" id="2326885">&amp;&amp;</span>&nbsp;<span class="ident" id="2326888">e</span>&nbsp;<span class="op" id="2326890">==</span>&nbsp;<span class="ident" id="2326893">nil</span>&nbsp;<span class="op" id="2326897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326902">return</span>&nbsp;<span class="ident" id="2326909">n</span><span class="op" id="2326910">,</span>&nbsp;<span class="ident" id="2326912">io</span><span class="op" id="2326914">.</span><span class="ident" id="2326915">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326925">if</span>&nbsp;<span class="ident" id="2326928">e</span>&nbsp;<span class="op" id="2326930">!=</span>&nbsp;<span class="ident" id="2326933">nil</span>&nbsp;<span class="op" id="2326937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326942">err</span>&nbsp;<span class="op" id="2326946">=</span>&nbsp;<span class="op" id="2326948">&amp;</span><span class="ident" id="2326949">PathError</span><span class="op" id="2326958">{</span><span class="string" id="2326959">&#34;read&#34;</span><span class="op" id="2326965">,</span>&nbsp;<span class="ident" id="2326967">f</span><span class="op" id="2326968">.</span><span class="ident" id="2326969">name</span><span class="op" id="2326973">,</span>&nbsp;<span class="ident" id="2326975">e</span><span class="op" id="2326976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326981">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326989">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326993">n</span>&nbsp;<span class="op" id="2326995">+=</span>&nbsp;<span class="ident" id="2326998">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327002">b</span>&nbsp;<span class="op" id="2327004">=</span>&nbsp;<span class="ident" id="2327006">b</span><span class="op" id="2327007">[</span><span class="ident" id="2327008">m</span><span class="op" id="2327009">:</span><span class="op" id="2327010">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327014">off</span>&nbsp;<span class="op" id="2327018">+=</span>&nbsp;<span class="ident" id="2327021">int64</span><span class="op" id="2327026">(</span><span class="ident" id="2327027">m</span><span class="op" id="2327028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327034">return</span><br>
<span class="lineno">130</span><span class="op" id="2327041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2327044">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2327086">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2327150">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2327201">func</span>&nbsp;<span class="op" id="2327206">(</span><span class="ident" id="2327207">f</span>&nbsp;<span class="op" id="2327209">*</span><span class="ident" id="2327210">File</span><span class="op" id="2327214">)</span>&nbsp;<span class="ident" id="2327216">Write</span><span class="op" id="2327221">(</span><span class="ident" id="2327222">b</span>&nbsp;<span class="op" id="2327224">[</span><span class="op" id="2327225">]</span><span class="builtintype" id="2327226">byte</span><span class="op" id="2327230">)</span>&nbsp;<span class="op" id="2327232">(</span><span class="ident" id="2327233">n</span>&nbsp;<span class="builtintype" id="2327235">int</span><span class="op" id="2327238">,</span>&nbsp;<span class="ident" id="2327240">err</span>&nbsp;<span class="builtintype" id="2327244">error</span><span class="op" id="2327249">)</span>&nbsp;<span class="op" id="2327251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327254">if</span>&nbsp;<span class="ident" id="2327257">f</span>&nbsp;<span class="op" id="2327259">==</span>&nbsp;<span class="ident" id="2327262">nil</span>&nbsp;<span class="op" id="2327266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327270">return</span>&nbsp;<span class="num" id="2327277">0</span><span class="op" id="2327278">,</span>&nbsp;<span class="ident" id="2327280">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327295">n</span><span class="op" id="2327296">,</span>&nbsp;<span class="ident" id="2327298">e</span>&nbsp;<span class="op" id="2327300">:=</span>&nbsp;<span class="ident" id="2327303">f</span><span class="op" id="2327304">.</span><span class="ident" id="2327305">write</span><span class="op" id="2327310">(</span><span class="ident" id="2327311">b</span><span class="op" id="2327312">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327315">if</span>&nbsp;<span class="ident" id="2327318">n</span>&nbsp;<span class="op" id="2327320">&lt;</span>&nbsp;<span class="num" id="2327322">0</span>&nbsp;<span class="op" id="2327324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327328">n</span>&nbsp;<span class="op" id="2327330">=</span>&nbsp;<span class="num" id="2327332">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327338">if</span>&nbsp;<span class="ident" id="2327341">n</span>&nbsp;<span class="op" id="2327343">!=</span>&nbsp;<span class="builtinfunc" id="2327346">len</span><span class="op" id="2327349">(</span><span class="ident" id="2327350">b</span><span class="op" id="2327351">)</span>&nbsp;<span class="op" id="2327353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327357">err</span>&nbsp;<span class="op" id="2327361">=</span>&nbsp;<span class="ident" id="2327363">io</span><span class="op" id="2327365">.</span><span class="ident" id="2327366">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327385">epipecheck</span><span class="op" id="2327395">(</span><span class="ident" id="2327396">f</span><span class="op" id="2327397">,</span>&nbsp;<span class="ident" id="2327399">e</span><span class="op" id="2327400">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327404">if</span>&nbsp;<span class="ident" id="2327407">e</span>&nbsp;<span class="op" id="2327409">!=</span>&nbsp;<span class="ident" id="2327412">nil</span>&nbsp;<span class="op" id="2327416">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327420">err</span>&nbsp;<span class="op" id="2327424">=</span>&nbsp;<span class="op" id="2327426">&amp;</span><span class="ident" id="2327427">PathError</span><span class="op" id="2327436">{</span><span class="string" id="2327437">&#34;write&#34;</span><span class="op" id="2327444">,</span>&nbsp;<span class="ident" id="2327446">f</span><span class="op" id="2327447">.</span><span class="ident" id="2327448">name</span><span class="op" id="2327452">,</span>&nbsp;<span class="ident" id="2327454">e</span><span class="op" id="2327455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327461">return</span>&nbsp;<span class="ident" id="2327468">n</span><span class="op" id="2327469">,</span>&nbsp;<span class="ident" id="2327471">err</span><br>
<span class="lineno"></span><span class="op" id="2327475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2327478">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2327550">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2327614">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2327667">func</span>&nbsp;<span class="op" id="2327672">(</span><span class="ident" id="2327673">f</span>&nbsp;<span class="op" id="2327675">*</span><span class="ident" id="2327676">File</span><span class="op" id="2327680">)</span>&nbsp;<span class="ident" id="2327682">WriteAt</span><span class="op" id="2327689">(</span><span class="ident" id="2327690">b</span>&nbsp;<span class="op" id="2327692">[</span><span class="op" id="2327693">]</span><span class="builtintype" id="2327694">byte</span><span class="op" id="2327698">,</span>&nbsp;<span class="ident" id="2327700">off</span>&nbsp;<span class="ident" id="2327704">int64</span><span class="op" id="2327709">)</span>&nbsp;<span class="op" id="2327711">(</span><span class="ident" id="2327712">n</span>&nbsp;<span class="builtintype" id="2327714">int</span><span class="op" id="2327717">,</span>&nbsp;<span class="ident" id="2327719">err</span>&nbsp;<span class="builtintype" id="2327723">error</span><span class="op" id="2327728">)</span>&nbsp;<span class="op" id="2327730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327733">if</span>&nbsp;<span class="ident" id="2327736">f</span>&nbsp;<span class="op" id="2327738">==</span>&nbsp;<span class="ident" id="2327741">nil</span>&nbsp;<span class="op" id="2327745">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327749">return</span>&nbsp;<span class="num" id="2327756">0</span><span class="op" id="2327757">,</span>&nbsp;<span class="ident" id="2327759">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327774">for</span>&nbsp;<span class="builtinfunc" id="2327778">len</span><span class="op" id="2327781">(</span><span class="ident" id="2327782">b</span><span class="op" id="2327783">)</span>&nbsp;<span class="op" id="2327785">&gt;</span>&nbsp;<span class="num" id="2327787">0</span>&nbsp;<span class="op" id="2327789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327793">m</span><span class="op" id="2327794">,</span>&nbsp;<span class="ident" id="2327796">e</span>&nbsp;<span class="op" id="2327798">:=</span>&nbsp;<span class="ident" id="2327801">f</span><span class="op" id="2327802">.</span><span class="ident" id="2327803">pwrite</span><span class="op" id="2327809">(</span><span class="ident" id="2327810">b</span><span class="op" id="2327811">,</span>&nbsp;<span class="ident" id="2327813">off</span><span class="op" id="2327816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327820">if</span>&nbsp;<span class="ident" id="2327823">e</span>&nbsp;<span class="op" id="2327825">!=</span>&nbsp;<span class="ident" id="2327828">nil</span>&nbsp;<span class="op" id="2327832">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327837">err</span>&nbsp;<span class="op" id="2327841">=</span>&nbsp;<span class="op" id="2327843">&amp;</span><span class="ident" id="2327844">PathError</span><span class="op" id="2327853">{</span><span class="string" id="2327854">&#34;write&#34;</span><span class="op" id="2327861">,</span>&nbsp;<span class="ident" id="2327863">f</span><span class="op" id="2327864">.</span><span class="ident" id="2327865">name</span><span class="op" id="2327869">,</span>&nbsp;<span class="ident" id="2327871">e</span><span class="op" id="2327872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327877">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327889">n</span>&nbsp;<span class="op" id="2327891">+=</span>&nbsp;<span class="ident" id="2327894">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327898">b</span>&nbsp;<span class="op" id="2327900">=</span>&nbsp;<span class="ident" id="2327902">b</span><span class="op" id="2327903">[</span><span class="ident" id="2327904">m</span><span class="op" id="2327905">:</span><span class="op" id="2327906">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327910">off</span>&nbsp;<span class="op" id="2327914">+=</span>&nbsp;<span class="ident" id="2327917">int64</span><span class="op" id="2327922">(</span><span class="ident" id="2327923">m</span><span class="op" id="2327924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327930">return</span><br>
<span class="lineno"></span><span class="op" id="2327937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2327940">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2328022">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2328098">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2328166">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2328217">func</span>&nbsp;<span class="op" id="2328222">(</span><span class="ident" id="2328223">f</span>&nbsp;<span class="op" id="2328225">*</span><span class="ident" id="2328226">File</span><span class="op" id="2328230">)</span>&nbsp;<span class="ident" id="2328232">Seek</span><span class="op" id="2328236">(</span><span class="ident" id="2328237">offset</span>&nbsp;<span class="ident" id="2328244">int64</span><span class="op" id="2328249">,</span>&nbsp;<span class="ident" id="2328251">whence</span>&nbsp;<span class="builtintype" id="2328258">int</span><span class="op" id="2328261">)</span>&nbsp;<span class="op" id="2328263">(</span><span class="ident" id="2328264">ret</span>&nbsp;<span class="ident" id="2328268">int64</span><span class="op" id="2328273">,</span>&nbsp;<span class="ident" id="2328275">err</span>&nbsp;<span class="builtintype" id="2328279">error</span><span class="op" id="2328284">)</span>&nbsp;<span class="op" id="2328286">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328289">if</span>&nbsp;<span class="ident" id="2328292">f</span>&nbsp;<span class="op" id="2328294">==</span>&nbsp;<span class="ident" id="2328297">nil</span>&nbsp;<span class="op" id="2328301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328305">return</span>&nbsp;<span class="num" id="2328312">0</span><span class="op" id="2328313">,</span>&nbsp;<span class="ident" id="2328315">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328330">r</span><span class="op" id="2328331">,</span>&nbsp;<span class="ident" id="2328333">e</span>&nbsp;<span class="op" id="2328335">:=</span>&nbsp;<span class="ident" id="2328338">f</span><span class="op" id="2328339">.</span><span class="ident" id="2328340">seek</span><span class="op" id="2328344">(</span><span class="ident" id="2328345">offset</span><span class="op" id="2328351">,</span>&nbsp;<span class="ident" id="2328353">whence</span><span class="op" id="2328359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328362">if</span>&nbsp;<span class="ident" id="2328365">e</span>&nbsp;<span class="op" id="2328367">==</span>&nbsp;<span class="ident" id="2328370">nil</span>&nbsp;<span class="op" id="2328374">&amp;&amp;</span>&nbsp;<span class="ident" id="2328377">f</span><span class="op" id="2328378">.</span><span class="ident" id="2328379">dirinfo</span>&nbsp;<span class="op" id="2328387">!=</span>&nbsp;<span class="ident" id="2328390">nil</span>&nbsp;<span class="op" id="2328394">&amp;&amp;</span>&nbsp;<span class="ident" id="2328397">r</span>&nbsp;<span class="op" id="2328399">!=</span>&nbsp;<span class="num" id="2328402">0</span>&nbsp;<span class="op" id="2328404">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328408">e</span>&nbsp;<span class="op" id="2328410">=</span>&nbsp;<span class="ident" id="2328412">syscall</span><span class="op" id="2328419">.</span><span class="ident" id="2328420">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328431">if</span>&nbsp;<span class="ident" id="2328434">e</span>&nbsp;<span class="op" id="2328436">!=</span>&nbsp;<span class="ident" id="2328439">nil</span>&nbsp;<span class="op" id="2328443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328447">return</span>&nbsp;<span class="num" id="2328454">0</span><span class="op" id="2328455">,</span>&nbsp;<span class="op" id="2328457">&amp;</span><span class="ident" id="2328458">PathError</span><span class="op" id="2328467">{</span><span class="string" id="2328468">&#34;seek&#34;</span><span class="op" id="2328474">,</span>&nbsp;<span class="ident" id="2328476">f</span><span class="op" id="2328477">.</span><span class="ident" id="2328478">name</span><span class="op" id="2328482">,</span>&nbsp;<span class="ident" id="2328484">e</span><span class="op" id="2328485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328488">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328491">return</span>&nbsp;<span class="ident" id="2328498">r</span><span class="op" id="2328499">,</span>&nbsp;<span class="ident" id="2328501">nil</span><br>
<span class="lineno"></span><span class="op" id="2328505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2328508">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2328586">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2328607">func</span>&nbsp;<span class="op" id="2328612">(</span><span class="ident" id="2328613">f</span>&nbsp;<span class="op" id="2328615">*</span><span class="ident" id="2328616">File</span><span class="op" id="2328620">)</span>&nbsp;<span class="ident" id="2328622">WriteString</span><span class="op" id="2328633">(</span><span class="ident" id="2328634">s</span>&nbsp;<span class="builtintype" id="2328636">string</span><span class="op" id="2328642">)</span>&nbsp;<span class="op" id="2328644">(</span><span class="ident" id="2328645">ret</span>&nbsp;<span class="builtintype" id="2328649">int</span><span class="op" id="2328652">,</span>&nbsp;<span class="ident" id="2328654">err</span>&nbsp;<span class="builtintype" id="2328658">error</span><span class="op" id="2328663">)</span>&nbsp;<span class="op" id="2328665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328668">if</span>&nbsp;<span class="ident" id="2328671">f</span>&nbsp;<span class="op" id="2328673">==</span>&nbsp;<span class="ident" id="2328676">nil</span>&nbsp;<span class="op" id="2328680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328684">return</span>&nbsp;<span class="num" id="2328691">0</span><span class="op" id="2328692">,</span>&nbsp;<span class="ident" id="2328694">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328709">return</span>&nbsp;<span class="ident" id="2328716">f</span><span class="op" id="2328717">.</span><span class="ident" id="2328718">Write</span><span class="op" id="2328723">(</span><span class="op" id="2328724">[</span><span class="op" id="2328725">]</span><span class="builtintype" id="2328726">byte</span><span class="op" id="2328730">(</span><span class="ident" id="2328731">s</span><span class="op" id="2328732">)</span><span class="op" id="2328733">)</span><br>
<span class="lineno">200</span><span class="op" id="2328735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2328738">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2328816">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2328872">func</span>&nbsp;<span class="ident" id="2328877">Mkdir</span><span class="op" id="2328882">(</span><span class="ident" id="2328883">name</span>&nbsp;<span class="builtintype" id="2328888">string</span><span class="op" id="2328894">,</span>&nbsp;<span class="ident" id="2328896">perm</span>&nbsp;<span class="ident" id="2328901">FileMode</span><span class="op" id="2328909">)</span>&nbsp;<span class="builtintype" id="2328911">error</span>&nbsp;<span class="op" id="2328917">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328920">e</span>&nbsp;<span class="op" id="2328922">:=</span>&nbsp;<span class="ident" id="2328925">syscall</span><span class="op" id="2328932">.</span><span class="ident" id="2328933">Mkdir</span><span class="op" id="2328938">(</span><span class="ident" id="2328939">name</span><span class="op" id="2328943">,</span>&nbsp;<span class="ident" id="2328945">syscallMode</span><span class="op" id="2328956">(</span><span class="ident" id="2328957">perm</span><span class="op" id="2328961">)</span><span class="op" id="2328962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328965">if</span>&nbsp;<span class="ident" id="2328968">e</span>&nbsp;<span class="op" id="2328970">!=</span>&nbsp;<span class="ident" id="2328973">nil</span>&nbsp;<span class="op" id="2328977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328981">return</span>&nbsp;<span class="op" id="2328988">&amp;</span><span class="ident" id="2328989">PathError</span><span class="op" id="2328998">{</span><span class="string" id="2328999">&#34;mkdir&#34;</span><span class="op" id="2329006">,</span>&nbsp;<span class="ident" id="2329008">name</span><span class="op" id="2329012">,</span>&nbsp;<span class="ident" id="2329014">e</span><span class="op" id="2329015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329021">return</span>&nbsp;<span class="ident" id="2329028">nil</span><br>
<span class="lineno">210</span><span class="op" id="2329032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2329035">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2329106">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2329162">func</span>&nbsp;<span class="ident" id="2329167">Chdir</span><span class="op" id="2329172">(</span><span class="ident" id="2329173">dir</span>&nbsp;<span class="builtintype" id="2329177">string</span><span class="op" id="2329183">)</span>&nbsp;<span class="builtintype" id="2329185">error</span>&nbsp;<span class="op" id="2329191">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329194">if</span>&nbsp;<span class="ident" id="2329197">e</span>&nbsp;<span class="op" id="2329199">:=</span>&nbsp;<span class="ident" id="2329202">syscall</span><span class="op" id="2329209">.</span><span class="ident" id="2329210">Chdir</span><span class="op" id="2329215">(</span><span class="ident" id="2329216">dir</span><span class="op" id="2329219">)</span><span class="op" id="2329220">;</span>&nbsp;<span class="ident" id="2329222">e</span>&nbsp;<span class="op" id="2329224">!=</span>&nbsp;<span class="ident" id="2329227">nil</span>&nbsp;<span class="op" id="2329231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329235">return</span>&nbsp;<span class="op" id="2329242">&amp;</span><span class="ident" id="2329243">PathError</span><span class="op" id="2329252">{</span><span class="string" id="2329253">&#34;chdir&#34;</span><span class="op" id="2329260">,</span>&nbsp;<span class="ident" id="2329262">dir</span><span class="op" id="2329265">,</span>&nbsp;<span class="ident" id="2329267">e</span><span class="op" id="2329268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329274">return</span>&nbsp;<span class="ident" id="2329281">nil</span><br>
<span class="lineno"></span><span class="op" id="2329285">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2329288">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2329348">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2329378">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2329434">func</span>&nbsp;<span class="op" id="2329439">(</span><span class="ident" id="2329440">f</span>&nbsp;<span class="op" id="2329442">*</span><span class="ident" id="2329443">File</span><span class="op" id="2329447">)</span>&nbsp;<span class="ident" id="2329449">Chdir</span><span class="op" id="2329454">(</span><span class="op" id="2329455">)</span>&nbsp;<span class="builtintype" id="2329457">error</span>&nbsp;<span class="op" id="2329463">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329466">if</span>&nbsp;<span class="ident" id="2329469">f</span>&nbsp;<span class="op" id="2329471">==</span>&nbsp;<span class="ident" id="2329474">nil</span>&nbsp;<span class="op" id="2329478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329482">return</span>&nbsp;<span class="ident" id="2329489">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329504">if</span>&nbsp;<span class="ident" id="2329507">e</span>&nbsp;<span class="op" id="2329509">:=</span>&nbsp;<span class="ident" id="2329512">syscall</span><span class="op" id="2329519">.</span><span class="ident" id="2329520">Fchdir</span><span class="op" id="2329526">(</span><span class="ident" id="2329527">f</span><span class="op" id="2329528">.</span><span class="ident" id="2329529">fd</span><span class="op" id="2329531">)</span><span class="op" id="2329532">;</span>&nbsp;<span class="ident" id="2329534">e</span>&nbsp;<span class="op" id="2329536">!=</span>&nbsp;<span class="ident" id="2329539">nil</span>&nbsp;<span class="op" id="2329543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329547">return</span>&nbsp;<span class="op" id="2329554">&amp;</span><span class="ident" id="2329555">PathError</span><span class="op" id="2329564">{</span><span class="string" id="2329565">&#34;chdir&#34;</span><span class="op" id="2329572">,</span>&nbsp;<span class="ident" id="2329574">f</span><span class="op" id="2329575">.</span><span class="ident" id="2329576">name</span><span class="op" id="2329580">,</span>&nbsp;<span class="ident" id="2329582">e</span><span class="op" id="2329583">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329589">return</span>&nbsp;<span class="ident" id="2329596">nil</span><br>
<span class="lineno"></span><span class="op" id="2329600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2329603">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2329672">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2329738">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2329771">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2329827">func</span>&nbsp;<span class="ident" id="2329832">Open</span><span class="op" id="2329836">(</span><span class="ident" id="2329837">name</span>&nbsp;<span class="builtintype" id="2329842">string</span><span class="op" id="2329848">)</span>&nbsp;<span class="op" id="2329850">(</span><span class="ident" id="2329851">file</span>&nbsp;<span class="op" id="2329856">*</span><span class="ident" id="2329857">File</span><span class="op" id="2329861">,</span>&nbsp;<span class="ident" id="2329863">err</span>&nbsp;<span class="builtintype" id="2329867">error</span><span class="op" id="2329872">)</span>&nbsp;<span class="op" id="2329874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329877">return</span>&nbsp;<span class="ident" id="2329884">OpenFile</span><span class="op" id="2329892">(</span><span class="ident" id="2329893">name</span><span class="op" id="2329897">,</span>&nbsp;<span class="ident" id="2329899">O_RDONLY</span><span class="op" id="2329907">,</span>&nbsp;<span class="num" id="2329909">0</span><span class="op" id="2329910">)</span><br>
<span class="lineno">240</span><span class="op" id="2329912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2329915">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2329985">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2330053">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2330122">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2330133">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2330189">func</span>&nbsp;<span class="ident" id="2330194">Create</span><span class="op" id="2330200">(</span><span class="ident" id="2330201">name</span>&nbsp;<span class="builtintype" id="2330206">string</span><span class="op" id="2330212">)</span>&nbsp;<span class="op" id="2330214">(</span><span class="ident" id="2330215">file</span>&nbsp;<span class="op" id="2330220">*</span><span class="ident" id="2330221">File</span><span class="op" id="2330225">,</span>&nbsp;<span class="ident" id="2330227">err</span>&nbsp;<span class="builtintype" id="2330231">error</span><span class="op" id="2330236">)</span>&nbsp;<span class="op" id="2330238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330241">return</span>&nbsp;<span class="ident" id="2330248">OpenFile</span><span class="op" id="2330256">(</span><span class="ident" id="2330257">name</span><span class="op" id="2330261">,</span>&nbsp;<span class="ident" id="2330263">O_RDWR</span><span class="op" id="2330269">|</span><span class="ident" id="2330270">O_CREATE</span><span class="op" id="2330278">|</span><span class="ident" id="2330279">O_TRUNC</span><span class="op" id="2330286">,</span>&nbsp;<span class="num" id="2330288">0666</span><span class="op" id="2330292">)</span><br>
<span class="lineno"></span><span class="op" id="2330294">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2330297">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2330330">var</span>&nbsp;<span class="ident" id="2330334">lstat</span>&nbsp;<span class="op" id="2330340">=</span>&nbsp;<span class="ident" id="2330342">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2330349">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2330421">func</span>&nbsp;<span class="ident" id="2330426">Rename</span><span class="op" id="2330432">(</span><span class="ident" id="2330433">oldpath</span><span class="op" id="2330440">,</span>&nbsp;<span class="ident" id="2330442">newpath</span>&nbsp;<span class="builtintype" id="2330450">string</span><span class="op" id="2330456">)</span>&nbsp;<span class="builtintype" id="2330458">error</span>&nbsp;<span class="op" id="2330464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330467">return</span>&nbsp;<span class="ident" id="2330474">rename</span><span class="op" id="2330480">(</span><span class="ident" id="2330481">oldpath</span><span class="op" id="2330488">,</span>&nbsp;<span class="ident" id="2330490">newpath</span><span class="op" id="2330497">)</span><br>
<span class="lineno"></span><span class="op" id="2330499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2330502">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2330574">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2330638">func</span>&nbsp;<span class="ident" id="2330643">fixCount</span><span class="op" id="2330651">(</span><span class="ident" id="2330652">n</span>&nbsp;<span class="builtintype" id="2330654">int</span><span class="op" id="2330657">,</span>&nbsp;<span class="ident" id="2330659">err</span>&nbsp;<span class="builtintype" id="2330663">error</span><span class="op" id="2330668">)</span>&nbsp;<span class="op" id="2330670">(</span><span class="builtintype" id="2330671">int</span><span class="op" id="2330674">,</span>&nbsp;<span class="builtintype" id="2330676">error</span><span class="op" id="2330681">)</span>&nbsp;<span class="op" id="2330683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330686">if</span>&nbsp;<span class="ident" id="2330689">n</span>&nbsp;<span class="op" id="2330691">&lt;</span>&nbsp;<span class="num" id="2330693">0</span>&nbsp;<span class="op" id="2330695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2330699">n</span>&nbsp;<span class="op" id="2330701">=</span>&nbsp;<span class="num" id="2330703">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2330706">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330709">return</span>&nbsp;<span class="ident" id="2330716">n</span><span class="op" id="2330717">,</span>&nbsp;<span class="ident" id="2330719">err</span><br>
<span class="lineno"></span><span class="op" id="2330723">}</span>
</div>
</body>
</html>
