<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6475696">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6475751">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6475805">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6475856">package</span>&nbsp;<span class="ident" id="6475864">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6475870">import</span>&nbsp;<span class="op" id="6475877">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475880">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475889">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475904">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475917">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475923">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6475933">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6475936">func</span>&nbsp;<span class="ident" id="6475941">eq</span><span class="op" id="6475943">(</span><span class="ident" id="6475944">c0</span><span class="op" id="6475946">,</span>&nbsp;<span class="ident" id="6475948">c1</span>&nbsp;<span class="ident" id="6475951">color</span><span class="op" id="6475956">.</span><span class="ident" id="6475957">Color</span><span class="op" id="6475962">)</span>&nbsp;<span class="builtintype" id="6475964">bool</span>&nbsp;<span class="op" id="6475969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475972">r0</span><span class="op" id="6475974">,</span>&nbsp;<span class="ident" id="6475976">g0</span><span class="op" id="6475978">,</span>&nbsp;<span class="ident" id="6475980">b0</span><span class="op" id="6475982">,</span>&nbsp;<span class="ident" id="6475984">a0</span>&nbsp;<span class="op" id="6475987">:=</span>&nbsp;<span class="ident" id="6475990">c0</span><span class="op" id="6475992">.</span><span class="ident" id="6475993">RGBA</span><span class="op" id="6475997">(</span><span class="op" id="6475998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476001">r1</span><span class="op" id="6476003">,</span>&nbsp;<span class="ident" id="6476005">g1</span><span class="op" id="6476007">,</span>&nbsp;<span class="ident" id="6476009">b1</span><span class="op" id="6476011">,</span>&nbsp;<span class="ident" id="6476013">a1</span>&nbsp;<span class="op" id="6476016">:=</span>&nbsp;<span class="ident" id="6476019">c1</span><span class="op" id="6476021">.</span><span class="ident" id="6476022">RGBA</span><span class="op" id="6476026">(</span><span class="op" id="6476027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476030">return</span>&nbsp;<span class="ident" id="6476037">r0</span>&nbsp;<span class="op" id="6476040">==</span>&nbsp;<span class="ident" id="6476043">r1</span>&nbsp;<span class="op" id="6476046">&amp;&amp;</span>&nbsp;<span class="ident" id="6476049">g0</span>&nbsp;<span class="op" id="6476052">==</span>&nbsp;<span class="ident" id="6476055">g1</span>&nbsp;<span class="op" id="6476058">&amp;&amp;</span>&nbsp;<span class="ident" id="6476061">b0</span>&nbsp;<span class="op" id="6476064">==</span>&nbsp;<span class="ident" id="6476067">b1</span>&nbsp;<span class="op" id="6476070">&amp;&amp;</span>&nbsp;<span class="ident" id="6476073">a0</span>&nbsp;<span class="op" id="6476076">==</span>&nbsp;<span class="ident" id="6476079">a1</span><br>
<span class="lineno"></span><span class="op" id="6476082">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6476085">func</span>&nbsp;<span class="ident" id="6476090">fillBlue</span><span class="op" id="6476098">(</span><span class="ident" id="6476099">alpha</span>&nbsp;<span class="builtintype" id="6476105">int</span><span class="op" id="6476108">)</span>&nbsp;<span class="ident" id="6476110">image</span><span class="op" id="6476115">.</span><span class="ident" id="6476116">Image</span>&nbsp;<span class="op" id="6476122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476125">return</span>&nbsp;<span class="ident" id="6476132">image</span><span class="op" id="6476137">.</span><span class="ident" id="6476138">NewUniform</span><span class="op" id="6476148">(</span><span class="ident" id="6476149">color</span><span class="op" id="6476154">.</span><span class="ident" id="6476155">RGBA</span><span class="op" id="6476159">{</span><span class="num" id="6476160">0</span><span class="op" id="6476161">,</span>&nbsp;<span class="num" id="6476163">0</span><span class="op" id="6476164">,</span>&nbsp;<span class="builtintype" id="6476166">uint8</span><span class="op" id="6476171">(</span><span class="ident" id="6476172">alpha</span><span class="op" id="6476177">)</span><span class="op" id="6476178">,</span>&nbsp;<span class="builtintype" id="6476180">uint8</span><span class="op" id="6476185">(</span><span class="ident" id="6476186">alpha</span><span class="op" id="6476191">)</span><span class="op" id="6476192">}</span><span class="op" id="6476193">)</span><br>
<span class="lineno"></span><span class="op" id="6476195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6476198">func</span>&nbsp;<span class="ident" id="6476203">fillAlpha</span><span class="op" id="6476212">(</span><span class="ident" id="6476213">alpha</span>&nbsp;<span class="builtintype" id="6476219">int</span><span class="op" id="6476222">)</span>&nbsp;<span class="ident" id="6476224">image</span><span class="op" id="6476229">.</span><span class="ident" id="6476230">Image</span>&nbsp;<span class="op" id="6476236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476239">return</span>&nbsp;<span class="ident" id="6476246">image</span><span class="op" id="6476251">.</span><span class="ident" id="6476252">NewUniform</span><span class="op" id="6476262">(</span><span class="ident" id="6476263">color</span><span class="op" id="6476268">.</span><span class="ident" id="6476269">Alpha</span><span class="op" id="6476274">{</span><span class="builtintype" id="6476275">uint8</span><span class="op" id="6476280">(</span><span class="ident" id="6476281">alpha</span><span class="op" id="6476286">)</span><span class="op" id="6476287">}</span><span class="op" id="6476288">)</span><br>
<span class="lineno"></span><span class="op" id="6476290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6476293">func</span>&nbsp;<span class="ident" id="6476298">vgradGreen</span><span class="op" id="6476308">(</span><span class="ident" id="6476309">alpha</span>&nbsp;<span class="builtintype" id="6476315">int</span><span class="op" id="6476318">)</span>&nbsp;<span class="ident" id="6476320">image</span><span class="op" id="6476325">.</span><span class="ident" id="6476326">Image</span>&nbsp;<span class="op" id="6476332">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476335">m</span>&nbsp;<span class="op" id="6476337">:=</span>&nbsp;<span class="ident" id="6476340">image</span><span class="op" id="6476345">.</span><span class="ident" id="6476346">NewRGBA</span><span class="op" id="6476353">(</span><span class="ident" id="6476354">image</span><span class="op" id="6476359">.</span><span class="ident" id="6476360">Rect</span><span class="op" id="6476364">(</span><span class="num" id="6476365">0</span><span class="op" id="6476366">,</span>&nbsp;<span class="num" id="6476368">0</span><span class="op" id="6476369">,</span>&nbsp;<span class="num" id="6476371">16</span><span class="op" id="6476373">,</span>&nbsp;<span class="num" id="6476375">16</span><span class="op" id="6476377">)</span><span class="op" id="6476378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476381">for</span>&nbsp;<span class="ident" id="6476385">y</span>&nbsp;<span class="op" id="6476387">:=</span>&nbsp;<span class="num" id="6476390">0</span><span class="op" id="6476391">;</span>&nbsp;<span class="ident" id="6476393">y</span>&nbsp;<span class="op" id="6476395">&lt;</span>&nbsp;<span class="num" id="6476397">16</span><span class="op" id="6476399">;</span>&nbsp;<span class="ident" id="6476401">y</span><span class="op" id="6476402">++</span>&nbsp;<span class="op" id="6476405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476409">for</span>&nbsp;<span class="ident" id="6476413">x</span>&nbsp;<span class="op" id="6476415">:=</span>&nbsp;<span class="num" id="6476418">0</span><span class="op" id="6476419">;</span>&nbsp;<span class="ident" id="6476421">x</span>&nbsp;<span class="op" id="6476423">&lt;</span>&nbsp;<span class="num" id="6476425">16</span><span class="op" id="6476427">;</span>&nbsp;<span class="ident" id="6476429">x</span><span class="op" id="6476430">++</span>&nbsp;<span class="op" id="6476433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476438">m</span><span class="op" id="6476439">.</span><span class="ident" id="6476440">Set</span><span class="op" id="6476443">(</span><span class="ident" id="6476444">x</span><span class="op" id="6476445">,</span>&nbsp;<span class="ident" id="6476447">y</span><span class="op" id="6476448">,</span>&nbsp;<span class="ident" id="6476450">color</span><span class="op" id="6476455">.</span><span class="ident" id="6476456">RGBA</span><span class="op" id="6476460">{</span><span class="num" id="6476461">0</span><span class="op" id="6476462">,</span>&nbsp;<span class="builtintype" id="6476464">uint8</span><span class="op" id="6476469">(</span><span class="ident" id="6476470">y</span>&nbsp;<span class="op" id="6476472">*</span>&nbsp;<span class="ident" id="6476474">alpha</span>&nbsp;<span class="op" id="6476480">/</span>&nbsp;<span class="num" id="6476482">15</span><span class="op" id="6476484">)</span><span class="op" id="6476485">,</span>&nbsp;<span class="num" id="6476487">0</span><span class="op" id="6476488">,</span>&nbsp;<span class="builtintype" id="6476490">uint8</span><span class="op" id="6476495">(</span><span class="ident" id="6476496">alpha</span><span class="op" id="6476501">)</span><span class="op" id="6476502">}</span><span class="op" id="6476503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476507">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476513">return</span>&nbsp;<span class="ident" id="6476520">m</span><br>
<span class="lineno"></span><span class="op" id="6476522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6476525">func</span>&nbsp;<span class="ident" id="6476530">vgradAlpha</span><span class="op" id="6476540">(</span><span class="ident" id="6476541">alpha</span>&nbsp;<span class="builtintype" id="6476547">int</span><span class="op" id="6476550">)</span>&nbsp;<span class="ident" id="6476552">image</span><span class="op" id="6476557">.</span><span class="ident" id="6476558">Image</span>&nbsp;<span class="op" id="6476564">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476567">m</span>&nbsp;<span class="op" id="6476569">:=</span>&nbsp;<span class="ident" id="6476572">image</span><span class="op" id="6476577">.</span><span class="ident" id="6476578">NewAlpha</span><span class="op" id="6476586">(</span><span class="ident" id="6476587">image</span><span class="op" id="6476592">.</span><span class="ident" id="6476593">Rect</span><span class="op" id="6476597">(</span><span class="num" id="6476598">0</span><span class="op" id="6476599">,</span>&nbsp;<span class="num" id="6476601">0</span><span class="op" id="6476602">,</span>&nbsp;<span class="num" id="6476604">16</span><span class="op" id="6476606">,</span>&nbsp;<span class="num" id="6476608">16</span><span class="op" id="6476610">)</span><span class="op" id="6476611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476614">for</span>&nbsp;<span class="ident" id="6476618">y</span>&nbsp;<span class="op" id="6476620">:=</span>&nbsp;<span class="num" id="6476623">0</span><span class="op" id="6476624">;</span>&nbsp;<span class="ident" id="6476626">y</span>&nbsp;<span class="op" id="6476628">&lt;</span>&nbsp;<span class="num" id="6476630">16</span><span class="op" id="6476632">;</span>&nbsp;<span class="ident" id="6476634">y</span><span class="op" id="6476635">++</span>&nbsp;<span class="op" id="6476638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476642">for</span>&nbsp;<span class="ident" id="6476646">x</span>&nbsp;<span class="op" id="6476648">:=</span>&nbsp;<span class="num" id="6476651">0</span><span class="op" id="6476652">;</span>&nbsp;<span class="ident" id="6476654">x</span>&nbsp;<span class="op" id="6476656">&lt;</span>&nbsp;<span class="num" id="6476658">16</span><span class="op" id="6476660">;</span>&nbsp;<span class="ident" id="6476662">x</span><span class="op" id="6476663">++</span>&nbsp;<span class="op" id="6476666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476671">m</span><span class="op" id="6476672">.</span><span class="ident" id="6476673">Set</span><span class="op" id="6476676">(</span><span class="ident" id="6476677">x</span><span class="op" id="6476678">,</span>&nbsp;<span class="ident" id="6476680">y</span><span class="op" id="6476681">,</span>&nbsp;<span class="ident" id="6476683">color</span><span class="op" id="6476688">.</span><span class="ident" id="6476689">Alpha</span><span class="op" id="6476694">{</span><span class="builtintype" id="6476695">uint8</span><span class="op" id="6476700">(</span><span class="ident" id="6476701">y</span>&nbsp;<span class="op" id="6476703">*</span>&nbsp;<span class="ident" id="6476705">alpha</span>&nbsp;<span class="op" id="6476711">/</span>&nbsp;<span class="num" id="6476713">15</span><span class="op" id="6476715">)</span><span class="op" id="6476716">}</span><span class="op" id="6476717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476721">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476727">return</span>&nbsp;<span class="ident" id="6476734">m</span><br>
<span class="lineno"></span><span class="op" id="6476736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6476739">func</span>&nbsp;<span class="ident" id="6476744">vgradGreenNRGBA</span><span class="op" id="6476759">(</span><span class="ident" id="6476760">alpha</span>&nbsp;<span class="builtintype" id="6476766">int</span><span class="op" id="6476769">)</span>&nbsp;<span class="ident" id="6476771">image</span><span class="op" id="6476776">.</span><span class="ident" id="6476777">Image</span>&nbsp;<span class="op" id="6476783">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476786">m</span>&nbsp;<span class="op" id="6476788">:=</span>&nbsp;<span class="ident" id="6476791">image</span><span class="op" id="6476796">.</span><span class="ident" id="6476797">NewNRGBA</span><span class="op" id="6476805">(</span><span class="ident" id="6476806">image</span><span class="op" id="6476811">.</span><span class="ident" id="6476812">Rect</span><span class="op" id="6476816">(</span><span class="num" id="6476817">0</span><span class="op" id="6476818">,</span>&nbsp;<span class="num" id="6476820">0</span><span class="op" id="6476821">,</span>&nbsp;<span class="num" id="6476823">16</span><span class="op" id="6476825">,</span>&nbsp;<span class="num" id="6476827">16</span><span class="op" id="6476829">)</span><span class="op" id="6476830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476833">for</span>&nbsp;<span class="ident" id="6476837">y</span>&nbsp;<span class="op" id="6476839">:=</span>&nbsp;<span class="num" id="6476842">0</span><span class="op" id="6476843">;</span>&nbsp;<span class="ident" id="6476845">y</span>&nbsp;<span class="op" id="6476847">&lt;</span>&nbsp;<span class="num" id="6476849">16</span><span class="op" id="6476851">;</span>&nbsp;<span class="ident" id="6476853">y</span><span class="op" id="6476854">++</span>&nbsp;<span class="op" id="6476857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476861">for</span>&nbsp;<span class="ident" id="6476865">x</span>&nbsp;<span class="op" id="6476867">:=</span>&nbsp;<span class="num" id="6476870">0</span><span class="op" id="6476871">;</span>&nbsp;<span class="ident" id="6476873">x</span>&nbsp;<span class="op" id="6476875">&lt;</span>&nbsp;<span class="num" id="6476877">16</span><span class="op" id="6476879">;</span>&nbsp;<span class="ident" id="6476881">x</span><span class="op" id="6476882">++</span>&nbsp;<span class="op" id="6476885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476890">m</span><span class="op" id="6476891">.</span><span class="ident" id="6476892">Set</span><span class="op" id="6476895">(</span><span class="ident" id="6476896">x</span><span class="op" id="6476897">,</span>&nbsp;<span class="ident" id="6476899">y</span><span class="op" id="6476900">,</span>&nbsp;<span class="ident" id="6476902">color</span><span class="op" id="6476907">.</span><span class="ident" id="6476908">RGBA</span><span class="op" id="6476912">{</span><span class="num" id="6476913">0</span><span class="op" id="6476914">,</span>&nbsp;<span class="builtintype" id="6476916">uint8</span><span class="op" id="6476921">(</span><span class="ident" id="6476922">y</span>&nbsp;<span class="op" id="6476924">*</span>&nbsp;<span class="num" id="6476926">0x11</span><span class="op" id="6476930">)</span><span class="op" id="6476931">,</span>&nbsp;<span class="num" id="6476933">0</span><span class="op" id="6476934">,</span>&nbsp;<span class="builtintype" id="6476936">uint8</span><span class="op" id="6476941">(</span><span class="ident" id="6476942">alpha</span><span class="op" id="6476947">)</span><span class="op" id="6476948">}</span><span class="op" id="6476949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476953">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476959">return</span>&nbsp;<span class="ident" id="6476966">m</span><br>
<span class="lineno"></span><span class="op" id="6476968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6476971">func</span>&nbsp;<span class="ident" id="6476976">vgradCr</span><span class="op" id="6476983">(</span><span class="op" id="6476984">)</span>&nbsp;<span class="ident" id="6476986">image</span><span class="op" id="6476991">.</span><span class="ident" id="6476992">Image</span>&nbsp;<span class="op" id="6476998">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477001">m</span>&nbsp;<span class="op" id="6477003">:=</span>&nbsp;<span class="op" id="6477006">&amp;</span><span class="ident" id="6477007">image</span><span class="op" id="6477012">.</span><span class="ident" id="6477013">YCbCr</span><span class="op" id="6477018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477022">Y</span><span class="op" id="6477023">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6477038">make</span><span class="op" id="6477042">(</span><span class="op" id="6477043">[</span><span class="op" id="6477044">]</span><span class="builtintype" id="6477045">byte</span><span class="op" id="6477049">,</span>&nbsp;<span class="num" id="6477051">16</span><span class="op" id="6477053">*</span><span class="num" id="6477054">16</span><span class="op" id="6477056">)</span><span class="op" id="6477057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477061">Cb</span><span class="op" id="6477063">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6477077">make</span><span class="op" id="6477081">(</span><span class="op" id="6477082">[</span><span class="op" id="6477083">]</span><span class="builtintype" id="6477084">byte</span><span class="op" id="6477088">,</span>&nbsp;<span class="num" id="6477090">16</span><span class="op" id="6477092">*</span><span class="num" id="6477093">16</span><span class="op" id="6477095">)</span><span class="op" id="6477096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477100">Cr</span><span class="op" id="6477102">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6477116">make</span><span class="op" id="6477120">(</span><span class="op" id="6477121">[</span><span class="op" id="6477122">]</span><span class="builtintype" id="6477123">byte</span><span class="op" id="6477127">,</span>&nbsp;<span class="num" id="6477129">16</span><span class="op" id="6477131">*</span><span class="num" id="6477132">16</span><span class="op" id="6477134">)</span><span class="op" id="6477135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477139">YStride</span><span class="op" id="6477146">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6477155">16</span><span class="op" id="6477157">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477161">CStride</span><span class="op" id="6477168">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6477177">16</span><span class="op" id="6477179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477183">SubsampleRatio</span><span class="op" id="6477197">:</span>&nbsp;<span class="ident" id="6477199">image</span><span class="op" id="6477204">.</span><span class="ident" id="6477205">YCbCrSubsampleRatio444</span><span class="op" id="6477227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477231">Rect</span><span class="op" id="6477235">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6477247">image</span><span class="op" id="6477252">.</span><span class="ident" id="6477253">Rect</span><span class="op" id="6477257">(</span><span class="num" id="6477258">0</span><span class="op" id="6477259">,</span>&nbsp;<span class="num" id="6477261">0</span><span class="op" id="6477262">,</span>&nbsp;<span class="num" id="6477264">16</span><span class="op" id="6477266">,</span>&nbsp;<span class="num" id="6477268">16</span><span class="op" id="6477270">)</span><span class="op" id="6477271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6477274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477277">for</span>&nbsp;<span class="ident" id="6477281">y</span>&nbsp;<span class="op" id="6477283">:=</span>&nbsp;<span class="num" id="6477286">0</span><span class="op" id="6477287">;</span>&nbsp;<span class="ident" id="6477289">y</span>&nbsp;<span class="op" id="6477291">&lt;</span>&nbsp;<span class="num" id="6477293">16</span><span class="op" id="6477295">;</span>&nbsp;<span class="ident" id="6477297">y</span><span class="op" id="6477298">++</span>&nbsp;<span class="op" id="6477301">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477305">for</span>&nbsp;<span class="ident" id="6477309">x</span>&nbsp;<span class="op" id="6477311">:=</span>&nbsp;<span class="num" id="6477314">0</span><span class="op" id="6477315">;</span>&nbsp;<span class="ident" id="6477317">x</span>&nbsp;<span class="op" id="6477319">&lt;</span>&nbsp;<span class="num" id="6477321">16</span><span class="op" id="6477323">;</span>&nbsp;<span class="ident" id="6477325">x</span><span class="op" id="6477326">++</span>&nbsp;<span class="op" id="6477329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477334">m</span><span class="op" id="6477335">.</span><span class="ident" id="6477336">Cr</span><span class="op" id="6477338">[</span><span class="ident" id="6477339">y</span><span class="op" id="6477340">*</span><span class="ident" id="6477341">m</span><span class="op" id="6477342">.</span><span class="ident" id="6477343">CStride</span><span class="op" id="6477350">+</span><span class="ident" id="6477351">x</span><span class="op" id="6477352">]</span>&nbsp;<span class="op" id="6477354">=</span>&nbsp;<span class="builtintype" id="6477356">uint8</span><span class="op" id="6477361">(</span><span class="ident" id="6477362">y</span>&nbsp;<span class="op" id="6477364">*</span>&nbsp;<span class="num" id="6477366">0x11</span><span class="op" id="6477370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6477374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6477377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477380">return</span>&nbsp;<span class="ident" id="6477387">m</span><br>
<span class="lineno">75</span><span class="op" id="6477389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6477392">func</span>&nbsp;<span class="ident" id="6477397">hgradRed</span><span class="op" id="6477405">(</span><span class="ident" id="6477406">alpha</span>&nbsp;<span class="builtintype" id="6477412">int</span><span class="op" id="6477415">)</span>&nbsp;<span class="ident" id="6477417">Image</span>&nbsp;<span class="op" id="6477423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477426">m</span>&nbsp;<span class="op" id="6477428">:=</span>&nbsp;<span class="ident" id="6477431">image</span><span class="op" id="6477436">.</span><span class="ident" id="6477437">NewRGBA</span><span class="op" id="6477444">(</span><span class="ident" id="6477445">image</span><span class="op" id="6477450">.</span><span class="ident" id="6477451">Rect</span><span class="op" id="6477455">(</span><span class="num" id="6477456">0</span><span class="op" id="6477457">,</span>&nbsp;<span class="num" id="6477459">0</span><span class="op" id="6477460">,</span>&nbsp;<span class="num" id="6477462">16</span><span class="op" id="6477464">,</span>&nbsp;<span class="num" id="6477466">16</span><span class="op" id="6477468">)</span><span class="op" id="6477469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477472">for</span>&nbsp;<span class="ident" id="6477476">y</span>&nbsp;<span class="op" id="6477478">:=</span>&nbsp;<span class="num" id="6477481">0</span><span class="op" id="6477482">;</span>&nbsp;<span class="ident" id="6477484">y</span>&nbsp;<span class="op" id="6477486">&lt;</span>&nbsp;<span class="num" id="6477488">16</span><span class="op" id="6477490">;</span>&nbsp;<span class="ident" id="6477492">y</span><span class="op" id="6477493">++</span>&nbsp;<span class="op" id="6477496">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477500">for</span>&nbsp;<span class="ident" id="6477504">x</span>&nbsp;<span class="op" id="6477506">:=</span>&nbsp;<span class="num" id="6477509">0</span><span class="op" id="6477510">;</span>&nbsp;<span class="ident" id="6477512">x</span>&nbsp;<span class="op" id="6477514">&lt;</span>&nbsp;<span class="num" id="6477516">16</span><span class="op" id="6477518">;</span>&nbsp;<span class="ident" id="6477520">x</span><span class="op" id="6477521">++</span>&nbsp;<span class="op" id="6477524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477529">m</span><span class="op" id="6477530">.</span><span class="ident" id="6477531">Set</span><span class="op" id="6477534">(</span><span class="ident" id="6477535">x</span><span class="op" id="6477536">,</span>&nbsp;<span class="ident" id="6477538">y</span><span class="op" id="6477539">,</span>&nbsp;<span class="ident" id="6477541">color</span><span class="op" id="6477546">.</span><span class="ident" id="6477547">RGBA</span><span class="op" id="6477551">{</span><span class="builtintype" id="6477552">uint8</span><span class="op" id="6477557">(</span><span class="ident" id="6477558">x</span>&nbsp;<span class="op" id="6477560">*</span>&nbsp;<span class="ident" id="6477562">alpha</span>&nbsp;<span class="op" id="6477568">/</span>&nbsp;<span class="num" id="6477570">15</span><span class="op" id="6477572">)</span><span class="op" id="6477573">,</span>&nbsp;<span class="num" id="6477575">0</span><span class="op" id="6477576">,</span>&nbsp;<span class="num" id="6477578">0</span><span class="op" id="6477579">,</span>&nbsp;<span class="builtintype" id="6477581">uint8</span><span class="op" id="6477586">(</span><span class="ident" id="6477587">alpha</span><span class="op" id="6477592">)</span><span class="op" id="6477593">}</span><span class="op" id="6477594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6477598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6477601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477604">return</span>&nbsp;<span class="ident" id="6477611">m</span><br>
<span class="lineno">85</span><span class="op" id="6477613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6477616">func</span>&nbsp;<span class="ident" id="6477621">gradYellow</span><span class="op" id="6477631">(</span><span class="ident" id="6477632">alpha</span>&nbsp;<span class="builtintype" id="6477638">int</span><span class="op" id="6477641">)</span>&nbsp;<span class="ident" id="6477643">Image</span>&nbsp;<span class="op" id="6477649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477652">m</span>&nbsp;<span class="op" id="6477654">:=</span>&nbsp;<span class="ident" id="6477657">image</span><span class="op" id="6477662">.</span><span class="ident" id="6477663">NewRGBA</span><span class="op" id="6477670">(</span><span class="ident" id="6477671">image</span><span class="op" id="6477676">.</span><span class="ident" id="6477677">Rect</span><span class="op" id="6477681">(</span><span class="num" id="6477682">0</span><span class="op" id="6477683">,</span>&nbsp;<span class="num" id="6477685">0</span><span class="op" id="6477686">,</span>&nbsp;<span class="num" id="6477688">16</span><span class="op" id="6477690">,</span>&nbsp;<span class="num" id="6477692">16</span><span class="op" id="6477694">)</span><span class="op" id="6477695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477698">for</span>&nbsp;<span class="ident" id="6477702">y</span>&nbsp;<span class="op" id="6477704">:=</span>&nbsp;<span class="num" id="6477707">0</span><span class="op" id="6477708">;</span>&nbsp;<span class="ident" id="6477710">y</span>&nbsp;<span class="op" id="6477712">&lt;</span>&nbsp;<span class="num" id="6477714">16</span><span class="op" id="6477716">;</span>&nbsp;<span class="ident" id="6477718">y</span><span class="op" id="6477719">++</span>&nbsp;<span class="op" id="6477722">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477726">for</span>&nbsp;<span class="ident" id="6477730">x</span>&nbsp;<span class="op" id="6477732">:=</span>&nbsp;<span class="num" id="6477735">0</span><span class="op" id="6477736">;</span>&nbsp;<span class="ident" id="6477738">x</span>&nbsp;<span class="op" id="6477740">&lt;</span>&nbsp;<span class="num" id="6477742">16</span><span class="op" id="6477744">;</span>&nbsp;<span class="ident" id="6477746">x</span><span class="op" id="6477747">++</span>&nbsp;<span class="op" id="6477750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477755">m</span><span class="op" id="6477756">.</span><span class="ident" id="6477757">Set</span><span class="op" id="6477760">(</span><span class="ident" id="6477761">x</span><span class="op" id="6477762">,</span>&nbsp;<span class="ident" id="6477764">y</span><span class="op" id="6477765">,</span>&nbsp;<span class="ident" id="6477767">color</span><span class="op" id="6477772">.</span><span class="ident" id="6477773">RGBA</span><span class="op" id="6477777">{</span><span class="builtintype" id="6477778">uint8</span><span class="op" id="6477783">(</span><span class="ident" id="6477784">x</span>&nbsp;<span class="op" id="6477786">*</span>&nbsp;<span class="ident" id="6477788">alpha</span>&nbsp;<span class="op" id="6477794">/</span>&nbsp;<span class="num" id="6477796">15</span><span class="op" id="6477798">)</span><span class="op" id="6477799">,</span>&nbsp;<span class="builtintype" id="6477801">uint8</span><span class="op" id="6477806">(</span><span class="ident" id="6477807">y</span>&nbsp;<span class="op" id="6477809">*</span>&nbsp;<span class="ident" id="6477811">alpha</span>&nbsp;<span class="op" id="6477817">/</span>&nbsp;<span class="num" id="6477819">15</span><span class="op" id="6477821">)</span><span class="op" id="6477822">,</span>&nbsp;<span class="num" id="6477824">0</span><span class="op" id="6477825">,</span>&nbsp;<span class="builtintype" id="6477827">uint8</span><span class="op" id="6477832">(</span><span class="ident" id="6477833">alpha</span><span class="op" id="6477838">)</span><span class="op" id="6477839">}</span><span class="op" id="6477840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6477844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6477847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477850">return</span>&nbsp;<span class="ident" id="6477857">m</span><br>
<span class="lineno">95</span><span class="op" id="6477859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6477862">type</span>&nbsp;<span class="ident" id="6477867">drawTest</span>&nbsp;<span class="keyword" id="6477876">struct</span>&nbsp;<span class="op" id="6477883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477886">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6477895">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477903">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6477912">image</span><span class="op" id="6477917">.</span><span class="ident" id="6477918">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477925">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6477934">image</span><span class="op" id="6477939">.</span><span class="ident" id="6477940">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477947">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6477956">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477960">expected</span>&nbsp;<span class="ident" id="6477969">color</span><span class="op" id="6477974">.</span><span class="ident" id="6477975">Color</span><br>
<span class="lineno"></span><span class="op" id="6477981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6477984">var</span>&nbsp;<span class="ident" id="6477988">drawTests</span>&nbsp;<span class="op" id="6477998">=</span>&nbsp;<span class="op" id="6478000">[</span><span class="op" id="6478001">]</span><span class="ident" id="6478002">drawTest</span><span class="op" id="6478010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478013">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478043">{</span><span class="string" id="6478044">&#34;nop&#34;</span><span class="op" id="6478049">,</span>&nbsp;<span class="ident" id="6478051">vgradGreen</span><span class="op" id="6478061">(</span><span class="num" id="6478062">255</span><span class="op" id="6478065">)</span><span class="op" id="6478066">,</span>&nbsp;<span class="ident" id="6478068">fillAlpha</span><span class="op" id="6478077">(</span><span class="num" id="6478078">0</span><span class="op" id="6478079">)</span><span class="op" id="6478080">,</span>&nbsp;<span class="ident" id="6478082">Over</span><span class="op" id="6478086">,</span>&nbsp;<span class="ident" id="6478088">color</span><span class="op" id="6478093">.</span><span class="ident" id="6478094">RGBA</span><span class="op" id="6478098">{</span><span class="num" id="6478099">136</span><span class="op" id="6478102">,</span>&nbsp;<span class="num" id="6478104">0</span><span class="op" id="6478105">,</span>&nbsp;<span class="num" id="6478107">0</span><span class="op" id="6478108">,</span>&nbsp;<span class="num" id="6478110">255</span><span class="op" id="6478113">}</span><span class="op" id="6478114">}</span><span class="op" id="6478115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478118">{</span><span class="string" id="6478119">&#34;clear&#34;</span><span class="op" id="6478126">,</span>&nbsp;<span class="ident" id="6478128">vgradGreen</span><span class="op" id="6478138">(</span><span class="num" id="6478139">255</span><span class="op" id="6478142">)</span><span class="op" id="6478143">,</span>&nbsp;<span class="ident" id="6478145">fillAlpha</span><span class="op" id="6478154">(</span><span class="num" id="6478155">0</span><span class="op" id="6478156">)</span><span class="op" id="6478157">,</span>&nbsp;<span class="ident" id="6478159">Src</span><span class="op" id="6478162">,</span>&nbsp;<span class="ident" id="6478164">color</span><span class="op" id="6478169">.</span><span class="ident" id="6478170">RGBA</span><span class="op" id="6478174">{</span><span class="num" id="6478175">0</span><span class="op" id="6478176">,</span>&nbsp;<span class="num" id="6478178">0</span><span class="op" id="6478179">,</span>&nbsp;<span class="num" id="6478181">0</span><span class="op" id="6478182">,</span>&nbsp;<span class="num" id="6478184">0</span><span class="op" id="6478185">}</span><span class="op" id="6478186">}</span><span class="op" id="6478187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478190">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478244">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478269">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478316">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478356">{</span><span class="string" id="6478357">&#34;fill&#34;</span><span class="op" id="6478363">,</span>&nbsp;<span class="ident" id="6478365">fillBlue</span><span class="op" id="6478373">(</span><span class="num" id="6478374">90</span><span class="op" id="6478376">)</span><span class="op" id="6478377">,</span>&nbsp;<span class="ident" id="6478379">fillAlpha</span><span class="op" id="6478388">(</span><span class="num" id="6478389">255</span><span class="op" id="6478392">)</span><span class="op" id="6478393">,</span>&nbsp;<span class="ident" id="6478395">Over</span><span class="op" id="6478399">,</span>&nbsp;<span class="ident" id="6478401">color</span><span class="op" id="6478406">.</span><span class="ident" id="6478407">RGBA</span><span class="op" id="6478411">{</span><span class="num" id="6478412">88</span><span class="op" id="6478414">,</span>&nbsp;<span class="num" id="6478416">0</span><span class="op" id="6478417">,</span>&nbsp;<span class="num" id="6478419">90</span><span class="op" id="6478421">,</span>&nbsp;<span class="num" id="6478423">255</span><span class="op" id="6478426">}</span><span class="op" id="6478427">}</span><span class="op" id="6478428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478431">{</span><span class="string" id="6478432">&#34;fillSrc&#34;</span><span class="op" id="6478441">,</span>&nbsp;<span class="ident" id="6478443">fillBlue</span><span class="op" id="6478451">(</span><span class="num" id="6478452">90</span><span class="op" id="6478454">)</span><span class="op" id="6478455">,</span>&nbsp;<span class="ident" id="6478457">fillAlpha</span><span class="op" id="6478466">(</span><span class="num" id="6478467">255</span><span class="op" id="6478470">)</span><span class="op" id="6478471">,</span>&nbsp;<span class="ident" id="6478473">Src</span><span class="op" id="6478476">,</span>&nbsp;<span class="ident" id="6478478">color</span><span class="op" id="6478483">.</span><span class="ident" id="6478484">RGBA</span><span class="op" id="6478488">{</span><span class="num" id="6478489">0</span><span class="op" id="6478490">,</span>&nbsp;<span class="num" id="6478492">0</span><span class="op" id="6478493">,</span>&nbsp;<span class="num" id="6478495">90</span><span class="op" id="6478497">,</span>&nbsp;<span class="num" id="6478499">90</span><span class="op" id="6478501">}</span><span class="op" id="6478502">}</span><span class="op" id="6478503">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478506">{</span><span class="string" id="6478507">&#34;fillAlpha&#34;</span><span class="op" id="6478518">,</span>&nbsp;<span class="ident" id="6478520">fillBlue</span><span class="op" id="6478528">(</span><span class="num" id="6478529">90</span><span class="op" id="6478531">)</span><span class="op" id="6478532">,</span>&nbsp;<span class="ident" id="6478534">fillAlpha</span><span class="op" id="6478543">(</span><span class="num" id="6478544">192</span><span class="op" id="6478547">)</span><span class="op" id="6478548">,</span>&nbsp;<span class="ident" id="6478550">Over</span><span class="op" id="6478554">,</span>&nbsp;<span class="ident" id="6478556">color</span><span class="op" id="6478561">.</span><span class="ident" id="6478562">RGBA</span><span class="op" id="6478566">{</span><span class="num" id="6478567">100</span><span class="op" id="6478570">,</span>&nbsp;<span class="num" id="6478572">0</span><span class="op" id="6478573">,</span>&nbsp;<span class="num" id="6478575">68</span><span class="op" id="6478577">,</span>&nbsp;<span class="num" id="6478579">255</span><span class="op" id="6478582">}</span><span class="op" id="6478583">}</span><span class="op" id="6478584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478587">{</span><span class="string" id="6478588">&#34;fillAlphaSrc&#34;</span><span class="op" id="6478602">,</span>&nbsp;<span class="ident" id="6478604">fillBlue</span><span class="op" id="6478612">(</span><span class="num" id="6478613">90</span><span class="op" id="6478615">)</span><span class="op" id="6478616">,</span>&nbsp;<span class="ident" id="6478618">fillAlpha</span><span class="op" id="6478627">(</span><span class="num" id="6478628">192</span><span class="op" id="6478631">)</span><span class="op" id="6478632">,</span>&nbsp;<span class="ident" id="6478634">Src</span><span class="op" id="6478637">,</span>&nbsp;<span class="ident" id="6478639">color</span><span class="op" id="6478644">.</span><span class="ident" id="6478645">RGBA</span><span class="op" id="6478649">{</span><span class="num" id="6478650">0</span><span class="op" id="6478651">,</span>&nbsp;<span class="num" id="6478653">0</span><span class="op" id="6478654">,</span>&nbsp;<span class="num" id="6478656">68</span><span class="op" id="6478658">,</span>&nbsp;<span class="num" id="6478660">68</span><span class="op" id="6478662">}</span><span class="op" id="6478663">}</span><span class="op" id="6478664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478667">{</span><span class="string" id="6478668">&#34;fillNil&#34;</span><span class="op" id="6478677">,</span>&nbsp;<span class="ident" id="6478679">fillBlue</span><span class="op" id="6478687">(</span><span class="num" id="6478688">90</span><span class="op" id="6478690">)</span><span class="op" id="6478691">,</span>&nbsp;<span class="ident" id="6478693">nil</span><span class="op" id="6478696">,</span>&nbsp;<span class="ident" id="6478698">Over</span><span class="op" id="6478702">,</span>&nbsp;<span class="ident" id="6478704">color</span><span class="op" id="6478709">.</span><span class="ident" id="6478710">RGBA</span><span class="op" id="6478714">{</span><span class="num" id="6478715">88</span><span class="op" id="6478717">,</span>&nbsp;<span class="num" id="6478719">0</span><span class="op" id="6478720">,</span>&nbsp;<span class="num" id="6478722">90</span><span class="op" id="6478724">,</span>&nbsp;<span class="num" id="6478726">255</span><span class="op" id="6478729">}</span><span class="op" id="6478730">}</span><span class="op" id="6478731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478734">{</span><span class="string" id="6478735">&#34;fillNilSrc&#34;</span><span class="op" id="6478747">,</span>&nbsp;<span class="ident" id="6478749">fillBlue</span><span class="op" id="6478757">(</span><span class="num" id="6478758">90</span><span class="op" id="6478760">)</span><span class="op" id="6478761">,</span>&nbsp;<span class="ident" id="6478763">nil</span><span class="op" id="6478766">,</span>&nbsp;<span class="ident" id="6478768">Src</span><span class="op" id="6478771">,</span>&nbsp;<span class="ident" id="6478773">color</span><span class="op" id="6478778">.</span><span class="ident" id="6478779">RGBA</span><span class="op" id="6478783">{</span><span class="num" id="6478784">0</span><span class="op" id="6478785">,</span>&nbsp;<span class="num" id="6478787">0</span><span class="op" id="6478788">,</span>&nbsp;<span class="num" id="6478790">90</span><span class="op" id="6478792">,</span>&nbsp;<span class="num" id="6478794">90</span><span class="op" id="6478796">}</span><span class="op" id="6478797">}</span><span class="op" id="6478798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478801">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478856">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478881">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478928">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478968">{</span><span class="string" id="6478969">&#34;copy&#34;</span><span class="op" id="6478975">,</span>&nbsp;<span class="ident" id="6478977">vgradGreen</span><span class="op" id="6478987">(</span><span class="num" id="6478988">90</span><span class="op" id="6478990">)</span><span class="op" id="6478991">,</span>&nbsp;<span class="ident" id="6478993">fillAlpha</span><span class="op" id="6479002">(</span><span class="num" id="6479003">255</span><span class="op" id="6479006">)</span><span class="op" id="6479007">,</span>&nbsp;<span class="ident" id="6479009">Over</span><span class="op" id="6479013">,</span>&nbsp;<span class="ident" id="6479015">color</span><span class="op" id="6479020">.</span><span class="ident" id="6479021">RGBA</span><span class="op" id="6479025">{</span><span class="num" id="6479026">88</span><span class="op" id="6479028">,</span>&nbsp;<span class="num" id="6479030">48</span><span class="op" id="6479032">,</span>&nbsp;<span class="num" id="6479034">0</span><span class="op" id="6479035">,</span>&nbsp;<span class="num" id="6479037">255</span><span class="op" id="6479040">}</span><span class="op" id="6479041">}</span><span class="op" id="6479042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479045">{</span><span class="string" id="6479046">&#34;copySrc&#34;</span><span class="op" id="6479055">,</span>&nbsp;<span class="ident" id="6479057">vgradGreen</span><span class="op" id="6479067">(</span><span class="num" id="6479068">90</span><span class="op" id="6479070">)</span><span class="op" id="6479071">,</span>&nbsp;<span class="ident" id="6479073">fillAlpha</span><span class="op" id="6479082">(</span><span class="num" id="6479083">255</span><span class="op" id="6479086">)</span><span class="op" id="6479087">,</span>&nbsp;<span class="ident" id="6479089">Src</span><span class="op" id="6479092">,</span>&nbsp;<span class="ident" id="6479094">color</span><span class="op" id="6479099">.</span><span class="ident" id="6479100">RGBA</span><span class="op" id="6479104">{</span><span class="num" id="6479105">0</span><span class="op" id="6479106">,</span>&nbsp;<span class="num" id="6479108">48</span><span class="op" id="6479110">,</span>&nbsp;<span class="num" id="6479112">0</span><span class="op" id="6479113">,</span>&nbsp;<span class="num" id="6479115">90</span><span class="op" id="6479117">}</span><span class="op" id="6479118">}</span><span class="op" id="6479119">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479122">{</span><span class="string" id="6479123">&#34;copyAlpha&#34;</span><span class="op" id="6479134">,</span>&nbsp;<span class="ident" id="6479136">vgradGreen</span><span class="op" id="6479146">(</span><span class="num" id="6479147">90</span><span class="op" id="6479149">)</span><span class="op" id="6479150">,</span>&nbsp;<span class="ident" id="6479152">fillAlpha</span><span class="op" id="6479161">(</span><span class="num" id="6479162">192</span><span class="op" id="6479165">)</span><span class="op" id="6479166">,</span>&nbsp;<span class="ident" id="6479168">Over</span><span class="op" id="6479172">,</span>&nbsp;<span class="ident" id="6479174">color</span><span class="op" id="6479179">.</span><span class="ident" id="6479180">RGBA</span><span class="op" id="6479184">{</span><span class="num" id="6479185">100</span><span class="op" id="6479188">,</span>&nbsp;<span class="num" id="6479190">36</span><span class="op" id="6479192">,</span>&nbsp;<span class="num" id="6479194">0</span><span class="op" id="6479195">,</span>&nbsp;<span class="num" id="6479197">255</span><span class="op" id="6479200">}</span><span class="op" id="6479201">}</span><span class="op" id="6479202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479205">{</span><span class="string" id="6479206">&#34;copyAlphaSrc&#34;</span><span class="op" id="6479220">,</span>&nbsp;<span class="ident" id="6479222">vgradGreen</span><span class="op" id="6479232">(</span><span class="num" id="6479233">90</span><span class="op" id="6479235">)</span><span class="op" id="6479236">,</span>&nbsp;<span class="ident" id="6479238">fillAlpha</span><span class="op" id="6479247">(</span><span class="num" id="6479248">192</span><span class="op" id="6479251">)</span><span class="op" id="6479252">,</span>&nbsp;<span class="ident" id="6479254">Src</span><span class="op" id="6479257">,</span>&nbsp;<span class="ident" id="6479259">color</span><span class="op" id="6479264">.</span><span class="ident" id="6479265">RGBA</span><span class="op" id="6479269">{</span><span class="num" id="6479270">0</span><span class="op" id="6479271">,</span>&nbsp;<span class="num" id="6479273">36</span><span class="op" id="6479275">,</span>&nbsp;<span class="num" id="6479277">0</span><span class="op" id="6479278">,</span>&nbsp;<span class="num" id="6479280">68</span><span class="op" id="6479282">}</span><span class="op" id="6479283">}</span><span class="op" id="6479284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479287">{</span><span class="string" id="6479288">&#34;copyNil&#34;</span><span class="op" id="6479297">,</span>&nbsp;<span class="ident" id="6479299">vgradGreen</span><span class="op" id="6479309">(</span><span class="num" id="6479310">90</span><span class="op" id="6479312">)</span><span class="op" id="6479313">,</span>&nbsp;<span class="ident" id="6479315">nil</span><span class="op" id="6479318">,</span>&nbsp;<span class="ident" id="6479320">Over</span><span class="op" id="6479324">,</span>&nbsp;<span class="ident" id="6479326">color</span><span class="op" id="6479331">.</span><span class="ident" id="6479332">RGBA</span><span class="op" id="6479336">{</span><span class="num" id="6479337">88</span><span class="op" id="6479339">,</span>&nbsp;<span class="num" id="6479341">48</span><span class="op" id="6479343">,</span>&nbsp;<span class="num" id="6479345">0</span><span class="op" id="6479346">,</span>&nbsp;<span class="num" id="6479348">255</span><span class="op" id="6479351">}</span><span class="op" id="6479352">}</span><span class="op" id="6479353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479356">{</span><span class="string" id="6479357">&#34;copyNilSrc&#34;</span><span class="op" id="6479369">,</span>&nbsp;<span class="ident" id="6479371">vgradGreen</span><span class="op" id="6479381">(</span><span class="num" id="6479382">90</span><span class="op" id="6479384">)</span><span class="op" id="6479385">,</span>&nbsp;<span class="ident" id="6479387">nil</span><span class="op" id="6479390">,</span>&nbsp;<span class="ident" id="6479392">Src</span><span class="op" id="6479395">,</span>&nbsp;<span class="ident" id="6479397">color</span><span class="op" id="6479402">.</span><span class="ident" id="6479403">RGBA</span><span class="op" id="6479407">{</span><span class="num" id="6479408">0</span><span class="op" id="6479409">,</span>&nbsp;<span class="num" id="6479411">48</span><span class="op" id="6479413">,</span>&nbsp;<span class="num" id="6479415">0</span><span class="op" id="6479416">,</span>&nbsp;<span class="num" id="6479418">90</span><span class="op" id="6479420">}</span><span class="op" id="6479421">}</span><span class="op" id="6479422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6479425">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6479486">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6479511">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6479558">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6479653">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479746">{</span><span class="string" id="6479747">&#34;nrgba&#34;</span><span class="op" id="6479754">,</span>&nbsp;<span class="ident" id="6479756">vgradGreenNRGBA</span><span class="op" id="6479771">(</span><span class="num" id="6479772">90</span><span class="op" id="6479774">)</span><span class="op" id="6479775">,</span>&nbsp;<span class="ident" id="6479777">fillAlpha</span><span class="op" id="6479786">(</span><span class="num" id="6479787">255</span><span class="op" id="6479790">)</span><span class="op" id="6479791">,</span>&nbsp;<span class="ident" id="6479793">Over</span><span class="op" id="6479797">,</span>&nbsp;<span class="ident" id="6479799">color</span><span class="op" id="6479804">.</span><span class="ident" id="6479805">RGBA</span><span class="op" id="6479809">{</span><span class="num" id="6479810">88</span><span class="op" id="6479812">,</span>&nbsp;<span class="num" id="6479814">46</span><span class="op" id="6479816">,</span>&nbsp;<span class="num" id="6479818">0</span><span class="op" id="6479819">,</span>&nbsp;<span class="num" id="6479821">255</span><span class="op" id="6479824">}</span><span class="op" id="6479825">}</span><span class="op" id="6479826">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479829">{</span><span class="string" id="6479830">&#34;nrgbaSrc&#34;</span><span class="op" id="6479840">,</span>&nbsp;<span class="ident" id="6479842">vgradGreenNRGBA</span><span class="op" id="6479857">(</span><span class="num" id="6479858">90</span><span class="op" id="6479860">)</span><span class="op" id="6479861">,</span>&nbsp;<span class="ident" id="6479863">fillAlpha</span><span class="op" id="6479872">(</span><span class="num" id="6479873">255</span><span class="op" id="6479876">)</span><span class="op" id="6479877">,</span>&nbsp;<span class="ident" id="6479879">Src</span><span class="op" id="6479882">,</span>&nbsp;<span class="ident" id="6479884">color</span><span class="op" id="6479889">.</span><span class="ident" id="6479890">RGBA</span><span class="op" id="6479894">{</span><span class="num" id="6479895">0</span><span class="op" id="6479896">,</span>&nbsp;<span class="num" id="6479898">46</span><span class="op" id="6479900">,</span>&nbsp;<span class="num" id="6479902">0</span><span class="op" id="6479903">,</span>&nbsp;<span class="num" id="6479905">90</span><span class="op" id="6479907">}</span><span class="op" id="6479908">}</span><span class="op" id="6479909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479912">{</span><span class="string" id="6479913">&#34;nrgbaAlpha&#34;</span><span class="op" id="6479925">,</span>&nbsp;<span class="ident" id="6479927">vgradGreenNRGBA</span><span class="op" id="6479942">(</span><span class="num" id="6479943">90</span><span class="op" id="6479945">)</span><span class="op" id="6479946">,</span>&nbsp;<span class="ident" id="6479948">fillAlpha</span><span class="op" id="6479957">(</span><span class="num" id="6479958">192</span><span class="op" id="6479961">)</span><span class="op" id="6479962">,</span>&nbsp;<span class="ident" id="6479964">Over</span><span class="op" id="6479968">,</span>&nbsp;<span class="ident" id="6479970">color</span><span class="op" id="6479975">.</span><span class="ident" id="6479976">RGBA</span><span class="op" id="6479980">{</span><span class="num" id="6479981">100</span><span class="op" id="6479984">,</span>&nbsp;<span class="num" id="6479986">34</span><span class="op" id="6479988">,</span>&nbsp;<span class="num" id="6479990">0</span><span class="op" id="6479991">,</span>&nbsp;<span class="num" id="6479993">255</span><span class="op" id="6479996">}</span><span class="op" id="6479997">}</span><span class="op" id="6479998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480001">{</span><span class="string" id="6480002">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="6480017">,</span>&nbsp;<span class="ident" id="6480019">vgradGreenNRGBA</span><span class="op" id="6480034">(</span><span class="num" id="6480035">90</span><span class="op" id="6480037">)</span><span class="op" id="6480038">,</span>&nbsp;<span class="ident" id="6480040">fillAlpha</span><span class="op" id="6480049">(</span><span class="num" id="6480050">192</span><span class="op" id="6480053">)</span><span class="op" id="6480054">,</span>&nbsp;<span class="ident" id="6480056">Src</span><span class="op" id="6480059">,</span>&nbsp;<span class="ident" id="6480061">color</span><span class="op" id="6480066">.</span><span class="ident" id="6480067">RGBA</span><span class="op" id="6480071">{</span><span class="num" id="6480072">0</span><span class="op" id="6480073">,</span>&nbsp;<span class="num" id="6480075">34</span><span class="op" id="6480077">,</span>&nbsp;<span class="num" id="6480079">0</span><span class="op" id="6480080">,</span>&nbsp;<span class="num" id="6480082">68</span><span class="op" id="6480084">}</span><span class="op" id="6480085">}</span><span class="op" id="6480086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480089">{</span><span class="string" id="6480090">&#34;nrgbaNil&#34;</span><span class="op" id="6480100">,</span>&nbsp;<span class="ident" id="6480102">vgradGreenNRGBA</span><span class="op" id="6480117">(</span><span class="num" id="6480118">90</span><span class="op" id="6480120">)</span><span class="op" id="6480121">,</span>&nbsp;<span class="ident" id="6480123">nil</span><span class="op" id="6480126">,</span>&nbsp;<span class="ident" id="6480128">Over</span><span class="op" id="6480132">,</span>&nbsp;<span class="ident" id="6480134">color</span><span class="op" id="6480139">.</span><span class="ident" id="6480140">RGBA</span><span class="op" id="6480144">{</span><span class="num" id="6480145">88</span><span class="op" id="6480147">,</span>&nbsp;<span class="num" id="6480149">46</span><span class="op" id="6480151">,</span>&nbsp;<span class="num" id="6480153">0</span><span class="op" id="6480154">,</span>&nbsp;<span class="num" id="6480156">255</span><span class="op" id="6480159">}</span><span class="op" id="6480160">}</span><span class="op" id="6480161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480164">{</span><span class="string" id="6480165">&#34;nrgbaNilSrc&#34;</span><span class="op" id="6480178">,</span>&nbsp;<span class="ident" id="6480180">vgradGreenNRGBA</span><span class="op" id="6480195">(</span><span class="num" id="6480196">90</span><span class="op" id="6480198">)</span><span class="op" id="6480199">,</span>&nbsp;<span class="ident" id="6480201">nil</span><span class="op" id="6480204">,</span>&nbsp;<span class="ident" id="6480206">Src</span><span class="op" id="6480209">,</span>&nbsp;<span class="ident" id="6480211">color</span><span class="op" id="6480216">.</span><span class="ident" id="6480217">RGBA</span><span class="op" id="6480221">{</span><span class="num" id="6480222">0</span><span class="op" id="6480223">,</span>&nbsp;<span class="num" id="6480225">46</span><span class="op" id="6480227">,</span>&nbsp;<span class="num" id="6480229">0</span><span class="op" id="6480230">,</span>&nbsp;<span class="num" id="6480232">90</span><span class="op" id="6480234">}</span><span class="op" id="6480235">}</span><span class="op" id="6480236">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6480239">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6480300">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6480325">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6480372">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480464">{</span><span class="string" id="6480465">&#34;ycbcr&#34;</span><span class="op" id="6480472">,</span>&nbsp;<span class="ident" id="6480474">vgradCr</span><span class="op" id="6480481">(</span><span class="op" id="6480482">)</span><span class="op" id="6480483">,</span>&nbsp;<span class="ident" id="6480485">fillAlpha</span><span class="op" id="6480494">(</span><span class="num" id="6480495">255</span><span class="op" id="6480498">)</span><span class="op" id="6480499">,</span>&nbsp;<span class="ident" id="6480501">Over</span><span class="op" id="6480505">,</span>&nbsp;<span class="ident" id="6480507">color</span><span class="op" id="6480512">.</span><span class="ident" id="6480513">RGBA</span><span class="op" id="6480517">{</span><span class="num" id="6480518">11</span><span class="op" id="6480520">,</span>&nbsp;<span class="num" id="6480522">38</span><span class="op" id="6480524">,</span>&nbsp;<span class="num" id="6480526">0</span><span class="op" id="6480527">,</span>&nbsp;<span class="num" id="6480529">255</span><span class="op" id="6480532">}</span><span class="op" id="6480533">}</span><span class="op" id="6480534">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480537">{</span><span class="string" id="6480538">&#34;ycbcrSrc&#34;</span><span class="op" id="6480548">,</span>&nbsp;<span class="ident" id="6480550">vgradCr</span><span class="op" id="6480557">(</span><span class="op" id="6480558">)</span><span class="op" id="6480559">,</span>&nbsp;<span class="ident" id="6480561">fillAlpha</span><span class="op" id="6480570">(</span><span class="num" id="6480571">255</span><span class="op" id="6480574">)</span><span class="op" id="6480575">,</span>&nbsp;<span class="ident" id="6480577">Src</span><span class="op" id="6480580">,</span>&nbsp;<span class="ident" id="6480582">color</span><span class="op" id="6480587">.</span><span class="ident" id="6480588">RGBA</span><span class="op" id="6480592">{</span><span class="num" id="6480593">11</span><span class="op" id="6480595">,</span>&nbsp;<span class="num" id="6480597">38</span><span class="op" id="6480599">,</span>&nbsp;<span class="num" id="6480601">0</span><span class="op" id="6480602">,</span>&nbsp;<span class="num" id="6480604">255</span><span class="op" id="6480607">}</span><span class="op" id="6480608">}</span><span class="op" id="6480609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480612">{</span><span class="string" id="6480613">&#34;ycbcrAlpha&#34;</span><span class="op" id="6480625">,</span>&nbsp;<span class="ident" id="6480627">vgradCr</span><span class="op" id="6480634">(</span><span class="op" id="6480635">)</span><span class="op" id="6480636">,</span>&nbsp;<span class="ident" id="6480638">fillAlpha</span><span class="op" id="6480647">(</span><span class="num" id="6480648">192</span><span class="op" id="6480651">)</span><span class="op" id="6480652">,</span>&nbsp;<span class="ident" id="6480654">Over</span><span class="op" id="6480658">,</span>&nbsp;<span class="ident" id="6480660">color</span><span class="op" id="6480665">.</span><span class="ident" id="6480666">RGBA</span><span class="op" id="6480670">{</span><span class="num" id="6480671">42</span><span class="op" id="6480673">,</span>&nbsp;<span class="num" id="6480675">28</span><span class="op" id="6480677">,</span>&nbsp;<span class="num" id="6480679">0</span><span class="op" id="6480680">,</span>&nbsp;<span class="num" id="6480682">255</span><span class="op" id="6480685">}</span><span class="op" id="6480686">}</span><span class="op" id="6480687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480690">{</span><span class="string" id="6480691">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="6480706">,</span>&nbsp;<span class="ident" id="6480708">vgradCr</span><span class="op" id="6480715">(</span><span class="op" id="6480716">)</span><span class="op" id="6480717">,</span>&nbsp;<span class="ident" id="6480719">fillAlpha</span><span class="op" id="6480728">(</span><span class="num" id="6480729">192</span><span class="op" id="6480732">)</span><span class="op" id="6480733">,</span>&nbsp;<span class="ident" id="6480735">Src</span><span class="op" id="6480738">,</span>&nbsp;<span class="ident" id="6480740">color</span><span class="op" id="6480745">.</span><span class="ident" id="6480746">RGBA</span><span class="op" id="6480750">{</span><span class="num" id="6480751">8</span><span class="op" id="6480752">,</span>&nbsp;<span class="num" id="6480754">28</span><span class="op" id="6480756">,</span>&nbsp;<span class="num" id="6480758">0</span><span class="op" id="6480759">,</span>&nbsp;<span class="num" id="6480761">192</span><span class="op" id="6480764">}</span><span class="op" id="6480765">}</span><span class="op" id="6480766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480769">{</span><span class="string" id="6480770">&#34;ycbcrNil&#34;</span><span class="op" id="6480780">,</span>&nbsp;<span class="ident" id="6480782">vgradCr</span><span class="op" id="6480789">(</span><span class="op" id="6480790">)</span><span class="op" id="6480791">,</span>&nbsp;<span class="ident" id="6480793">nil</span><span class="op" id="6480796">,</span>&nbsp;<span class="ident" id="6480798">Over</span><span class="op" id="6480802">,</span>&nbsp;<span class="ident" id="6480804">color</span><span class="op" id="6480809">.</span><span class="ident" id="6480810">RGBA</span><span class="op" id="6480814">{</span><span class="num" id="6480815">11</span><span class="op" id="6480817">,</span>&nbsp;<span class="num" id="6480819">38</span><span class="op" id="6480821">,</span>&nbsp;<span class="num" id="6480823">0</span><span class="op" id="6480824">,</span>&nbsp;<span class="num" id="6480826">255</span><span class="op" id="6480829">}</span><span class="op" id="6480830">}</span><span class="op" id="6480831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480834">{</span><span class="string" id="6480835">&#34;ycbcrNilSrc&#34;</span><span class="op" id="6480848">,</span>&nbsp;<span class="ident" id="6480850">vgradCr</span><span class="op" id="6480857">(</span><span class="op" id="6480858">)</span><span class="op" id="6480859">,</span>&nbsp;<span class="ident" id="6480861">nil</span><span class="op" id="6480864">,</span>&nbsp;<span class="ident" id="6480866">Src</span><span class="op" id="6480869">,</span>&nbsp;<span class="ident" id="6480871">color</span><span class="op" id="6480876">.</span><span class="ident" id="6480877">RGBA</span><span class="op" id="6480881">{</span><span class="num" id="6480882">11</span><span class="op" id="6480884">,</span>&nbsp;<span class="num" id="6480886">38</span><span class="op" id="6480888">,</span>&nbsp;<span class="num" id="6480890">0</span><span class="op" id="6480891">,</span>&nbsp;<span class="num" id="6480893">255</span><span class="op" id="6480896">}</span><span class="op" id="6480897">}</span><span class="op" id="6480898">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6480901">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6480940">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6480965">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6481012">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6481054">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481097">{</span><span class="string" id="6481098">&#34;generic&#34;</span><span class="op" id="6481107">,</span>&nbsp;<span class="ident" id="6481109">fillBlue</span><span class="op" id="6481117">(</span><span class="num" id="6481118">255</span><span class="op" id="6481121">)</span><span class="op" id="6481122">,</span>&nbsp;<span class="ident" id="6481124">vgradAlpha</span><span class="op" id="6481134">(</span><span class="num" id="6481135">192</span><span class="op" id="6481138">)</span><span class="op" id="6481139">,</span>&nbsp;<span class="ident" id="6481141">Over</span><span class="op" id="6481145">,</span>&nbsp;<span class="ident" id="6481147">color</span><span class="op" id="6481152">.</span><span class="ident" id="6481153">RGBA</span><span class="op" id="6481157">{</span><span class="num" id="6481158">81</span><span class="op" id="6481160">,</span>&nbsp;<span class="num" id="6481162">0</span><span class="op" id="6481163">,</span>&nbsp;<span class="num" id="6481165">102</span><span class="op" id="6481168">,</span>&nbsp;<span class="num" id="6481170">255</span><span class="op" id="6481173">}</span><span class="op" id="6481174">}</span><span class="op" id="6481175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481178">{</span><span class="string" id="6481179">&#34;genericSrc&#34;</span><span class="op" id="6481191">,</span>&nbsp;<span class="ident" id="6481193">fillBlue</span><span class="op" id="6481201">(</span><span class="num" id="6481202">255</span><span class="op" id="6481205">)</span><span class="op" id="6481206">,</span>&nbsp;<span class="ident" id="6481208">vgradAlpha</span><span class="op" id="6481218">(</span><span class="num" id="6481219">192</span><span class="op" id="6481222">)</span><span class="op" id="6481223">,</span>&nbsp;<span class="ident" id="6481225">Src</span><span class="op" id="6481228">,</span>&nbsp;<span class="ident" id="6481230">color</span><span class="op" id="6481235">.</span><span class="ident" id="6481236">RGBA</span><span class="op" id="6481240">{</span><span class="num" id="6481241">0</span><span class="op" id="6481242">,</span>&nbsp;<span class="num" id="6481244">0</span><span class="op" id="6481245">,</span>&nbsp;<span class="num" id="6481247">102</span><span class="op" id="6481250">,</span>&nbsp;<span class="num" id="6481252">102</span><span class="op" id="6481255">}</span><span class="op" id="6481256">}</span><span class="op" id="6481257">,</span><br>
<span class="lineno"></span><span class="op" id="6481259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6481262">func</span>&nbsp;<span class="ident" id="6481267">makeGolden</span><span class="op" id="6481277">(</span><span class="ident" id="6481278">dst</span>&nbsp;<span class="ident" id="6481282">image</span><span class="op" id="6481287">.</span><span class="ident" id="6481288">Image</span><span class="op" id="6481293">,</span>&nbsp;<span class="ident" id="6481295">r</span>&nbsp;<span class="ident" id="6481297">image</span><span class="op" id="6481302">.</span><span class="ident" id="6481303">Rectangle</span><span class="op" id="6481312">,</span>&nbsp;<span class="ident" id="6481314">src</span>&nbsp;<span class="ident" id="6481318">image</span><span class="op" id="6481323">.</span><span class="ident" id="6481324">Image</span><span class="op" id="6481329">,</span>&nbsp;<span class="ident" id="6481331">sp</span>&nbsp;<span class="ident" id="6481334">image</span><span class="op" id="6481339">.</span><span class="ident" id="6481340">Point</span><span class="op" id="6481345">,</span>&nbsp;<span class="ident" id="6481347">mask</span>&nbsp;<span class="ident" id="6481352">image</span><span class="op" id="6481357">.</span><span class="ident" id="6481358">Image</span><span class="op" id="6481363">,</span>&nbsp;<span class="ident" id="6481365">mp</span>&nbsp;<span class="ident" id="6481368">image</span><span class="op" id="6481373">.</span><span class="ident" id="6481374">Point</span><span class="op" id="6481379">,</span>&nbsp;<span class="ident" id="6481381">op</span>&nbsp;<span class="ident" id="6481384">Op</span><span class="op" id="6481386">)</span>&nbsp;<span class="ident" id="6481388">image</span><span class="op" id="6481393">.</span><span class="ident" id="6481394">Image</span>&nbsp;<span class="op" id="6481400">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6481403">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6481478">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481548">b</span>&nbsp;<span class="op" id="6481550">:=</span>&nbsp;<span class="ident" id="6481553">dst</span><span class="op" id="6481556">.</span><span class="ident" id="6481557">Bounds</span><span class="op" id="6481563">(</span><span class="op" id="6481564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481567">sb</span>&nbsp;<span class="op" id="6481570">:=</span>&nbsp;<span class="ident" id="6481573">src</span><span class="op" id="6481576">.</span><span class="ident" id="6481577">Bounds</span><span class="op" id="6481583">(</span><span class="op" id="6481584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481587">mb</span>&nbsp;<span class="op" id="6481590">:=</span>&nbsp;<span class="ident" id="6481593">image</span><span class="op" id="6481598">.</span><span class="ident" id="6481599">Rect</span><span class="op" id="6481603">(</span><span class="op" id="6481604">-</span><span class="num" id="6481605">1e9</span><span class="op" id="6481608">,</span>&nbsp;<span class="op" id="6481610">-</span><span class="num" id="6481611">1e9</span><span class="op" id="6481614">,</span>&nbsp;<span class="num" id="6481616">1e9</span><span class="op" id="6481619">,</span>&nbsp;<span class="num" id="6481621">1e9</span><span class="op" id="6481624">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481627">if</span>&nbsp;<span class="ident" id="6481630">mask</span>&nbsp;<span class="op" id="6481635">!=</span>&nbsp;<span class="ident" id="6481638">nil</span>&nbsp;<span class="op" id="6481642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481646">mb</span>&nbsp;<span class="op" id="6481649">=</span>&nbsp;<span class="ident" id="6481651">mask</span><span class="op" id="6481655">.</span><span class="ident" id="6481656">Bounds</span><span class="op" id="6481662">(</span><span class="op" id="6481663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481669">golden</span>&nbsp;<span class="op" id="6481676">:=</span>&nbsp;<span class="ident" id="6481679">image</span><span class="op" id="6481684">.</span><span class="ident" id="6481685">NewRGBA</span><span class="op" id="6481692">(</span><span class="ident" id="6481693">image</span><span class="op" id="6481698">.</span><span class="ident" id="6481699">Rect</span><span class="op" id="6481703">(</span><span class="num" id="6481704">0</span><span class="op" id="6481705">,</span>&nbsp;<span class="num" id="6481707">0</span><span class="op" id="6481708">,</span>&nbsp;<span class="ident" id="6481710">b</span><span class="op" id="6481711">.</span><span class="ident" id="6481712">Max</span><span class="op" id="6481715">.</span><span class="ident" id="6481716">X</span><span class="op" id="6481717">,</span>&nbsp;<span class="ident" id="6481719">b</span><span class="op" id="6481720">.</span><span class="ident" id="6481721">Max</span><span class="op" id="6481724">.</span><span class="ident" id="6481725">Y</span><span class="op" id="6481726">)</span><span class="op" id="6481727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481730">for</span>&nbsp;<span class="ident" id="6481734">y</span>&nbsp;<span class="op" id="6481736">:=</span>&nbsp;<span class="ident" id="6481739">r</span><span class="op" id="6481740">.</span><span class="ident" id="6481741">Min</span><span class="op" id="6481744">.</span><span class="ident" id="6481745">Y</span><span class="op" id="6481746">;</span>&nbsp;<span class="ident" id="6481748">y</span>&nbsp;<span class="op" id="6481750">&lt;</span>&nbsp;<span class="ident" id="6481752">r</span><span class="op" id="6481753">.</span><span class="ident" id="6481754">Max</span><span class="op" id="6481757">.</span><span class="ident" id="6481758">Y</span><span class="op" id="6481759">;</span>&nbsp;<span class="ident" id="6481761">y</span><span class="op" id="6481762">++</span>&nbsp;<span class="op" id="6481765">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481769">sy</span>&nbsp;<span class="op" id="6481772">:=</span>&nbsp;<span class="ident" id="6481775">y</span>&nbsp;<span class="op" id="6481777">+</span>&nbsp;<span class="ident" id="6481779">sp</span><span class="op" id="6481781">.</span><span class="ident" id="6481782">Y</span>&nbsp;<span class="op" id="6481784">-</span>&nbsp;<span class="ident" id="6481786">r</span><span class="op" id="6481787">.</span><span class="ident" id="6481788">Min</span><span class="op" id="6481791">.</span><span class="ident" id="6481792">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481796">my</span>&nbsp;<span class="op" id="6481799">:=</span>&nbsp;<span class="ident" id="6481802">y</span>&nbsp;<span class="op" id="6481804">+</span>&nbsp;<span class="ident" id="6481806">mp</span><span class="op" id="6481808">.</span><span class="ident" id="6481809">Y</span>&nbsp;<span class="op" id="6481811">-</span>&nbsp;<span class="ident" id="6481813">r</span><span class="op" id="6481814">.</span><span class="ident" id="6481815">Min</span><span class="op" id="6481818">.</span><span class="ident" id="6481819">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481823">for</span>&nbsp;<span class="ident" id="6481827">x</span>&nbsp;<span class="op" id="6481829">:=</span>&nbsp;<span class="ident" id="6481832">r</span><span class="op" id="6481833">.</span><span class="ident" id="6481834">Min</span><span class="op" id="6481837">.</span><span class="ident" id="6481838">X</span><span class="op" id="6481839">;</span>&nbsp;<span class="ident" id="6481841">x</span>&nbsp;<span class="op" id="6481843">&lt;</span>&nbsp;<span class="ident" id="6481845">r</span><span class="op" id="6481846">.</span><span class="ident" id="6481847">Max</span><span class="op" id="6481850">.</span><span class="ident" id="6481851">X</span><span class="op" id="6481852">;</span>&nbsp;<span class="ident" id="6481854">x</span><span class="op" id="6481855">++</span>&nbsp;<span class="op" id="6481858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481863">if</span>&nbsp;<span class="op" id="6481866">!</span><span class="op" id="6481867">(</span><span class="ident" id="6481868">image</span><span class="op" id="6481873">.</span><span class="ident" id="6481874">Pt</span><span class="op" id="6481876">(</span><span class="ident" id="6481877">x</span><span class="op" id="6481878">,</span>&nbsp;<span class="ident" id="6481880">y</span><span class="op" id="6481881">)</span><span class="op" id="6481882">.</span><span class="ident" id="6481883">In</span><span class="op" id="6481885">(</span><span class="ident" id="6481886">b</span><span class="op" id="6481887">)</span><span class="op" id="6481888">)</span>&nbsp;<span class="op" id="6481890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481896">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481913">sx</span>&nbsp;<span class="op" id="6481916">:=</span>&nbsp;<span class="ident" id="6481919">x</span>&nbsp;<span class="op" id="6481921">+</span>&nbsp;<span class="ident" id="6481923">sp</span><span class="op" id="6481925">.</span><span class="ident" id="6481926">X</span>&nbsp;<span class="op" id="6481928">-</span>&nbsp;<span class="ident" id="6481930">r</span><span class="op" id="6481931">.</span><span class="ident" id="6481932">Min</span><span class="op" id="6481935">.</span><span class="ident" id="6481936">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481941">if</span>&nbsp;<span class="op" id="6481944">!</span><span class="op" id="6481945">(</span><span class="ident" id="6481946">image</span><span class="op" id="6481951">.</span><span class="ident" id="6481952">Pt</span><span class="op" id="6481954">(</span><span class="ident" id="6481955">sx</span><span class="op" id="6481957">,</span>&nbsp;<span class="ident" id="6481959">sy</span><span class="op" id="6481961">)</span><span class="op" id="6481962">.</span><span class="ident" id="6481963">In</span><span class="op" id="6481965">(</span><span class="ident" id="6481966">sb</span><span class="op" id="6481968">)</span><span class="op" id="6481969">)</span>&nbsp;<span class="op" id="6481971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481977">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481989">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481994">mx</span>&nbsp;<span class="op" id="6481997">:=</span>&nbsp;<span class="ident" id="6482000">x</span>&nbsp;<span class="op" id="6482002">+</span>&nbsp;<span class="ident" id="6482004">mp</span><span class="op" id="6482006">.</span><span class="ident" id="6482007">X</span>&nbsp;<span class="op" id="6482009">-</span>&nbsp;<span class="ident" id="6482011">r</span><span class="op" id="6482012">.</span><span class="ident" id="6482013">Min</span><span class="op" id="6482016">.</span><span class="ident" id="6482017">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482022">if</span>&nbsp;<span class="op" id="6482025">!</span><span class="op" id="6482026">(</span><span class="ident" id="6482027">image</span><span class="op" id="6482032">.</span><span class="ident" id="6482033">Pt</span><span class="op" id="6482035">(</span><span class="ident" id="6482036">mx</span><span class="op" id="6482038">,</span>&nbsp;<span class="ident" id="6482040">my</span><span class="op" id="6482042">)</span><span class="op" id="6482043">.</span><span class="ident" id="6482044">In</span><span class="op" id="6482046">(</span><span class="ident" id="6482047">mb</span><span class="op" id="6482049">)</span><span class="op" id="6482050">)</span>&nbsp;<span class="op" id="6482052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482058">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482076">const</span>&nbsp;<span class="ident" id="6482082">M</span>&nbsp;<span class="op" id="6482084">=</span>&nbsp;<span class="num" id="6482086">1</span><span class="op" id="6482087">&lt;&lt;</span><span class="num" id="6482089">16</span>&nbsp;<span class="op" id="6482092">-</span>&nbsp;<span class="num" id="6482094">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482099">var</span>&nbsp;<span class="ident" id="6482103">dr</span><span class="op" id="6482105">,</span>&nbsp;<span class="ident" id="6482107">dg</span><span class="op" id="6482109">,</span>&nbsp;<span class="ident" id="6482111">db</span><span class="op" id="6482113">,</span>&nbsp;<span class="ident" id="6482115">da</span>&nbsp;<span class="builtintype" id="6482118">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482128">if</span>&nbsp;<span class="ident" id="6482131">op</span>&nbsp;<span class="op" id="6482134">==</span>&nbsp;<span class="ident" id="6482137">Over</span>&nbsp;<span class="op" id="6482142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482148">dr</span><span class="op" id="6482150">,</span>&nbsp;<span class="ident" id="6482152">dg</span><span class="op" id="6482154">,</span>&nbsp;<span class="ident" id="6482156">db</span><span class="op" id="6482158">,</span>&nbsp;<span class="ident" id="6482160">da</span>&nbsp;<span class="op" id="6482163">=</span>&nbsp;<span class="ident" id="6482165">dst</span><span class="op" id="6482168">.</span><span class="ident" id="6482169">At</span><span class="op" id="6482171">(</span><span class="ident" id="6482172">x</span><span class="op" id="6482173">,</span>&nbsp;<span class="ident" id="6482175">y</span><span class="op" id="6482176">)</span><span class="op" id="6482177">.</span><span class="ident" id="6482178">RGBA</span><span class="op" id="6482182">(</span><span class="op" id="6482183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482188">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482193">sr</span><span class="op" id="6482195">,</span>&nbsp;<span class="ident" id="6482197">sg</span><span class="op" id="6482199">,</span>&nbsp;<span class="ident" id="6482201">sb</span><span class="op" id="6482203">,</span>&nbsp;<span class="ident" id="6482205">sa</span>&nbsp;<span class="op" id="6482208">:=</span>&nbsp;<span class="ident" id="6482211">src</span><span class="op" id="6482214">.</span><span class="ident" id="6482215">At</span><span class="op" id="6482217">(</span><span class="ident" id="6482218">sx</span><span class="op" id="6482220">,</span>&nbsp;<span class="ident" id="6482222">sy</span><span class="op" id="6482224">)</span><span class="op" id="6482225">.</span><span class="ident" id="6482226">RGBA</span><span class="op" id="6482230">(</span><span class="op" id="6482231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482236">ma</span>&nbsp;<span class="op" id="6482239">:=</span>&nbsp;<span class="builtintype" id="6482242">uint32</span><span class="op" id="6482248">(</span><span class="ident" id="6482249">M</span><span class="op" id="6482250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482255">if</span>&nbsp;<span class="ident" id="6482258">mask</span>&nbsp;<span class="op" id="6482263">!=</span>&nbsp;<span class="ident" id="6482266">nil</span>&nbsp;<span class="op" id="6482270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482276">_</span><span class="op" id="6482277">,</span>&nbsp;<span class="ident" id="6482279">_</span><span class="op" id="6482280">,</span>&nbsp;<span class="ident" id="6482282">_</span><span class="op" id="6482283">,</span>&nbsp;<span class="ident" id="6482285">ma</span>&nbsp;<span class="op" id="6482288">=</span>&nbsp;<span class="ident" id="6482290">mask</span><span class="op" id="6482294">.</span><span class="ident" id="6482295">At</span><span class="op" id="6482297">(</span><span class="ident" id="6482298">mx</span><span class="op" id="6482300">,</span>&nbsp;<span class="ident" id="6482302">my</span><span class="op" id="6482304">)</span><span class="op" id="6482305">.</span><span class="ident" id="6482306">RGBA</span><span class="op" id="6482310">(</span><span class="op" id="6482311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482316">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482321">a</span>&nbsp;<span class="op" id="6482323">:=</span>&nbsp;<span class="ident" id="6482326">M</span>&nbsp;<span class="op" id="6482328">-</span>&nbsp;<span class="op" id="6482330">(</span><span class="ident" id="6482331">sa</span>&nbsp;<span class="op" id="6482334">*</span>&nbsp;<span class="ident" id="6482336">ma</span>&nbsp;<span class="op" id="6482339">/</span>&nbsp;<span class="ident" id="6482341">M</span><span class="op" id="6482342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482347">golden</span><span class="op" id="6482353">.</span><span class="ident" id="6482354">Set</span><span class="op" id="6482357">(</span><span class="ident" id="6482358">x</span><span class="op" id="6482359">,</span>&nbsp;<span class="ident" id="6482361">y</span><span class="op" id="6482362">,</span>&nbsp;<span class="ident" id="6482364">color</span><span class="op" id="6482369">.</span><span class="ident" id="6482370">RGBA64</span><span class="op" id="6482376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6482382">uint16</span><span class="op" id="6482388">(</span><span class="op" id="6482389">(</span><span class="ident" id="6482390">dr</span><span class="op" id="6482392">*</span><span class="ident" id="6482393">a</span>&nbsp;<span class="op" id="6482395">+</span>&nbsp;<span class="ident" id="6482397">sr</span><span class="op" id="6482399">*</span><span class="ident" id="6482400">ma</span><span class="op" id="6482402">)</span>&nbsp;<span class="op" id="6482404">/</span>&nbsp;<span class="ident" id="6482406">M</span><span class="op" id="6482407">)</span><span class="op" id="6482408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6482414">uint16</span><span class="op" id="6482420">(</span><span class="op" id="6482421">(</span><span class="ident" id="6482422">dg</span><span class="op" id="6482424">*</span><span class="ident" id="6482425">a</span>&nbsp;<span class="op" id="6482427">+</span>&nbsp;<span class="ident" id="6482429">sg</span><span class="op" id="6482431">*</span><span class="ident" id="6482432">ma</span><span class="op" id="6482434">)</span>&nbsp;<span class="op" id="6482436">/</span>&nbsp;<span class="ident" id="6482438">M</span><span class="op" id="6482439">)</span><span class="op" id="6482440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6482446">uint16</span><span class="op" id="6482452">(</span><span class="op" id="6482453">(</span><span class="ident" id="6482454">db</span><span class="op" id="6482456">*</span><span class="ident" id="6482457">a</span>&nbsp;<span class="op" id="6482459">+</span>&nbsp;<span class="ident" id="6482461">sb</span><span class="op" id="6482463">*</span><span class="ident" id="6482464">ma</span><span class="op" id="6482466">)</span>&nbsp;<span class="op" id="6482468">/</span>&nbsp;<span class="ident" id="6482470">M</span><span class="op" id="6482471">)</span><span class="op" id="6482472">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6482478">uint16</span><span class="op" id="6482484">(</span><span class="op" id="6482485">(</span><span class="ident" id="6482486">da</span><span class="op" id="6482488">*</span><span class="ident" id="6482489">a</span>&nbsp;<span class="op" id="6482491">+</span>&nbsp;<span class="ident" id="6482493">sa</span><span class="op" id="6482495">*</span><span class="ident" id="6482496">ma</span><span class="op" id="6482498">)</span>&nbsp;<span class="op" id="6482500">/</span>&nbsp;<span class="ident" id="6482502">M</span><span class="op" id="6482503">)</span><span class="op" id="6482504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482509">}</span><span class="op" id="6482510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482520">return</span>&nbsp;<span class="ident" id="6482527">golden</span><span class="op" id="6482533">.</span><span class="ident" id="6482534">SubImage</span><span class="op" id="6482542">(</span><span class="ident" id="6482543">b</span><span class="op" id="6482544">)</span><br>
<span class="lineno">205</span><span class="op" id="6482546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6482549">func</span>&nbsp;<span class="ident" id="6482554">TestDraw</span><span class="op" id="6482562">(</span><span class="ident" id="6482563">t</span>&nbsp;<span class="op" id="6482565">*</span><span class="ident" id="6482566">testing</span><span class="op" id="6482573">.</span><span class="ident" id="6482574">T</span><span class="op" id="6482575">)</span>&nbsp;<span class="op" id="6482577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482580">rr</span>&nbsp;<span class="op" id="6482583">:=</span>&nbsp;<span class="op" id="6482586">[</span><span class="op" id="6482587">]</span><span class="ident" id="6482588">image</span><span class="op" id="6482593">.</span><span class="ident" id="6482594">Rectangle</span><span class="op" id="6482603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482607">image</span><span class="op" id="6482612">.</span><span class="ident" id="6482613">Rect</span><span class="op" id="6482617">(</span><span class="num" id="6482618">0</span><span class="op" id="6482619">,</span>&nbsp;<span class="num" id="6482621">0</span><span class="op" id="6482622">,</span>&nbsp;<span class="num" id="6482624">0</span><span class="op" id="6482625">,</span>&nbsp;<span class="num" id="6482627">0</span><span class="op" id="6482628">)</span><span class="op" id="6482629">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482633">image</span><span class="op" id="6482638">.</span><span class="ident" id="6482639">Rect</span><span class="op" id="6482643">(</span><span class="num" id="6482644">0</span><span class="op" id="6482645">,</span>&nbsp;<span class="num" id="6482647">0</span><span class="op" id="6482648">,</span>&nbsp;<span class="num" id="6482650">16</span><span class="op" id="6482652">,</span>&nbsp;<span class="num" id="6482654">16</span><span class="op" id="6482656">)</span><span class="op" id="6482657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482661">image</span><span class="op" id="6482666">.</span><span class="ident" id="6482667">Rect</span><span class="op" id="6482671">(</span><span class="num" id="6482672">3</span><span class="op" id="6482673">,</span>&nbsp;<span class="num" id="6482675">5</span><span class="op" id="6482676">,</span>&nbsp;<span class="num" id="6482678">12</span><span class="op" id="6482680">,</span>&nbsp;<span class="num" id="6482682">10</span><span class="op" id="6482684">)</span><span class="op" id="6482685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482689">image</span><span class="op" id="6482694">.</span><span class="ident" id="6482695">Rect</span><span class="op" id="6482699">(</span><span class="num" id="6482700">0</span><span class="op" id="6482701">,</span>&nbsp;<span class="num" id="6482703">0</span><span class="op" id="6482704">,</span>&nbsp;<span class="num" id="6482706">9</span><span class="op" id="6482707">,</span>&nbsp;<span class="num" id="6482709">9</span><span class="op" id="6482710">)</span><span class="op" id="6482711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482715">image</span><span class="op" id="6482720">.</span><span class="ident" id="6482721">Rect</span><span class="op" id="6482725">(</span><span class="num" id="6482726">8</span><span class="op" id="6482727">,</span>&nbsp;<span class="num" id="6482729">8</span><span class="op" id="6482730">,</span>&nbsp;<span class="num" id="6482732">16</span><span class="op" id="6482734">,</span>&nbsp;<span class="num" id="6482736">16</span><span class="op" id="6482738">)</span><span class="op" id="6482739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482743">image</span><span class="op" id="6482748">.</span><span class="ident" id="6482749">Rect</span><span class="op" id="6482753">(</span><span class="num" id="6482754">8</span><span class="op" id="6482755">,</span>&nbsp;<span class="num" id="6482757">0</span><span class="op" id="6482758">,</span>&nbsp;<span class="num" id="6482760">9</span><span class="op" id="6482761">,</span>&nbsp;<span class="num" id="6482763">16</span><span class="op" id="6482765">)</span><span class="op" id="6482766">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482770">image</span><span class="op" id="6482775">.</span><span class="ident" id="6482776">Rect</span><span class="op" id="6482780">(</span><span class="num" id="6482781">0</span><span class="op" id="6482782">,</span>&nbsp;<span class="num" id="6482784">8</span><span class="op" id="6482785">,</span>&nbsp;<span class="num" id="6482787">16</span><span class="op" id="6482789">,</span>&nbsp;<span class="num" id="6482791">9</span><span class="op" id="6482792">)</span><span class="op" id="6482793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482797">image</span><span class="op" id="6482802">.</span><span class="ident" id="6482803">Rect</span><span class="op" id="6482807">(</span><span class="num" id="6482808">8</span><span class="op" id="6482809">,</span>&nbsp;<span class="num" id="6482811">8</span><span class="op" id="6482812">,</span>&nbsp;<span class="num" id="6482814">9</span><span class="op" id="6482815">,</span>&nbsp;<span class="num" id="6482817">9</span><span class="op" id="6482818">)</span><span class="op" id="6482819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482823">image</span><span class="op" id="6482828">.</span><span class="ident" id="6482829">Rect</span><span class="op" id="6482833">(</span><span class="num" id="6482834">8</span><span class="op" id="6482835">,</span>&nbsp;<span class="num" id="6482837">8</span><span class="op" id="6482838">,</span>&nbsp;<span class="num" id="6482840">8</span><span class="op" id="6482841">,</span>&nbsp;<span class="num" id="6482843">8</span><span class="op" id="6482844">)</span><span class="op" id="6482845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482851">for</span>&nbsp;<span class="ident" id="6482855">_</span><span class="op" id="6482856">,</span>&nbsp;<span class="ident" id="6482858">r</span>&nbsp;<span class="op" id="6482860">:=</span>&nbsp;<span class="keyword" id="6482863">range</span>&nbsp;<span class="ident" id="6482869">rr</span>&nbsp;<span class="op" id="6482872">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482875">loop</span><span class="op" id="6482879">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482883">for</span>&nbsp;<span class="ident" id="6482887">_</span><span class="op" id="6482888">,</span>&nbsp;<span class="ident" id="6482890">test</span>&nbsp;<span class="op" id="6482895">:=</span>&nbsp;<span class="keyword" id="6482898">range</span>&nbsp;<span class="ident" id="6482904">drawTests</span>&nbsp;<span class="op" id="6482914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482919">dst</span>&nbsp;<span class="op" id="6482923">:=</span>&nbsp;<span class="ident" id="6482926">hgradRed</span><span class="op" id="6482934">(</span><span class="num" id="6482935">255</span><span class="op" id="6482938">)</span><span class="op" id="6482939">.</span><span class="op" id="6482940">(</span><span class="op" id="6482941">*</span><span class="ident" id="6482942">image</span><span class="op" id="6482947">.</span><span class="ident" id="6482948">RGBA</span><span class="op" id="6482952">)</span><span class="op" id="6482953">.</span><span class="ident" id="6482954">SubImage</span><span class="op" id="6482962">(</span><span class="ident" id="6482963">r</span><span class="op" id="6482964">)</span><span class="op" id="6482965">.</span><span class="op" id="6482966">(</span><span class="ident" id="6482967">Image</span><span class="op" id="6482972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6482977">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483078">golden</span>&nbsp;<span class="op" id="6483085">:=</span>&nbsp;<span class="ident" id="6483088">makeGolden</span><span class="op" id="6483098">(</span><span class="ident" id="6483099">dst</span><span class="op" id="6483102">,</span>&nbsp;<span class="ident" id="6483104">image</span><span class="op" id="6483109">.</span><span class="ident" id="6483110">Rect</span><span class="op" id="6483114">(</span><span class="num" id="6483115">0</span><span class="op" id="6483116">,</span>&nbsp;<span class="num" id="6483118">0</span><span class="op" id="6483119">,</span>&nbsp;<span class="num" id="6483121">16</span><span class="op" id="6483123">,</span>&nbsp;<span class="num" id="6483125">16</span><span class="op" id="6483127">)</span><span class="op" id="6483128">,</span>&nbsp;<span class="ident" id="6483130">test</span><span class="op" id="6483134">.</span><span class="ident" id="6483135">src</span><span class="op" id="6483138">,</span>&nbsp;<span class="ident" id="6483140">image</span><span class="op" id="6483145">.</span><span class="ident" id="6483146">ZP</span><span class="op" id="6483148">,</span>&nbsp;<span class="ident" id="6483150">test</span><span class="op" id="6483154">.</span><span class="ident" id="6483155">mask</span><span class="op" id="6483159">,</span>&nbsp;<span class="ident" id="6483161">image</span><span class="op" id="6483166">.</span><span class="ident" id="6483167">ZP</span><span class="op" id="6483169">,</span>&nbsp;<span class="ident" id="6483171">test</span><span class="op" id="6483175">.</span><span class="ident" id="6483176">op</span><span class="op" id="6483178">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483183">b</span>&nbsp;<span class="op" id="6483185">:=</span>&nbsp;<span class="ident" id="6483188">dst</span><span class="op" id="6483191">.</span><span class="ident" id="6483192">Bounds</span><span class="op" id="6483198">(</span><span class="op" id="6483199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483204">if</span>&nbsp;<span class="op" id="6483207">!</span><span class="ident" id="6483208">b</span><span class="op" id="6483209">.</span><span class="ident" id="6483210">Eq</span><span class="op" id="6483212">(</span><span class="ident" id="6483213">golden</span><span class="op" id="6483219">.</span><span class="ident" id="6483220">Bounds</span><span class="op" id="6483226">(</span><span class="op" id="6483227">)</span><span class="op" id="6483228">)</span>&nbsp;<span class="op" id="6483230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483236">t</span><span class="op" id="6483237">.</span><span class="ident" id="6483238">Errorf</span><span class="op" id="6483244">(</span><span class="string" id="6483245">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6483278">,</span>&nbsp;<span class="ident" id="6483280">r</span><span class="op" id="6483281">,</span>&nbsp;<span class="ident" id="6483283">test</span><span class="op" id="6483287">.</span><span class="ident" id="6483288">desc</span><span class="op" id="6483292">,</span>&nbsp;<span class="ident" id="6483294">dst</span><span class="op" id="6483297">.</span><span class="ident" id="6483298">Bounds</span><span class="op" id="6483304">(</span><span class="op" id="6483305">)</span><span class="op" id="6483306">,</span>&nbsp;<span class="ident" id="6483308">golden</span><span class="op" id="6483314">.</span><span class="ident" id="6483315">Bounds</span><span class="op" id="6483321">(</span><span class="op" id="6483322">)</span><span class="op" id="6483323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483329">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483341">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6483346">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483443">DrawMask</span><span class="op" id="6483451">(</span><span class="ident" id="6483452">dst</span><span class="op" id="6483455">,</span>&nbsp;<span class="ident" id="6483457">image</span><span class="op" id="6483462">.</span><span class="ident" id="6483463">Rect</span><span class="op" id="6483467">(</span><span class="num" id="6483468">0</span><span class="op" id="6483469">,</span>&nbsp;<span class="num" id="6483471">0</span><span class="op" id="6483472">,</span>&nbsp;<span class="num" id="6483474">16</span><span class="op" id="6483476">,</span>&nbsp;<span class="num" id="6483478">16</span><span class="op" id="6483480">)</span><span class="op" id="6483481">,</span>&nbsp;<span class="ident" id="6483483">test</span><span class="op" id="6483487">.</span><span class="ident" id="6483488">src</span><span class="op" id="6483491">,</span>&nbsp;<span class="ident" id="6483493">image</span><span class="op" id="6483498">.</span><span class="ident" id="6483499">ZP</span><span class="op" id="6483501">,</span>&nbsp;<span class="ident" id="6483503">test</span><span class="op" id="6483507">.</span><span class="ident" id="6483508">mask</span><span class="op" id="6483512">,</span>&nbsp;<span class="ident" id="6483514">image</span><span class="op" id="6483519">.</span><span class="ident" id="6483520">ZP</span><span class="op" id="6483522">,</span>&nbsp;<span class="ident" id="6483524">test</span><span class="op" id="6483528">.</span><span class="ident" id="6483529">op</span><span class="op" id="6483531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483536">if</span>&nbsp;<span class="ident" id="6483539">image</span><span class="op" id="6483544">.</span><span class="ident" id="6483545">Pt</span><span class="op" id="6483547">(</span><span class="num" id="6483548">8</span><span class="op" id="6483549">,</span>&nbsp;<span class="num" id="6483551">8</span><span class="op" id="6483552">)</span><span class="op" id="6483553">.</span><span class="ident" id="6483554">In</span><span class="op" id="6483556">(</span><span class="ident" id="6483557">r</span><span class="op" id="6483558">)</span>&nbsp;<span class="op" id="6483560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6483566">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6483637">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483690">if</span>&nbsp;<span class="op" id="6483693">!</span><span class="ident" id="6483694">eq</span><span class="op" id="6483696">(</span><span class="ident" id="6483697">dst</span><span class="op" id="6483700">.</span><span class="ident" id="6483701">At</span><span class="op" id="6483703">(</span><span class="num" id="6483704">8</span><span class="op" id="6483705">,</span>&nbsp;<span class="num" id="6483707">8</span><span class="op" id="6483708">)</span><span class="op" id="6483709">,</span>&nbsp;<span class="ident" id="6483711">test</span><span class="op" id="6483715">.</span><span class="ident" id="6483716">expected</span><span class="op" id="6483724">)</span>&nbsp;<span class="op" id="6483726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483733">t</span><span class="op" id="6483734">.</span><span class="ident" id="6483735">Errorf</span><span class="op" id="6483741">(</span><span class="string" id="6483742">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6483778">,</span>&nbsp;<span class="ident" id="6483780">r</span><span class="op" id="6483781">,</span>&nbsp;<span class="ident" id="6483783">test</span><span class="op" id="6483787">.</span><span class="ident" id="6483788">desc</span><span class="op" id="6483792">,</span>&nbsp;<span class="ident" id="6483794">dst</span><span class="op" id="6483797">.</span><span class="ident" id="6483798">At</span><span class="op" id="6483800">(</span><span class="num" id="6483801">8</span><span class="op" id="6483802">,</span>&nbsp;<span class="num" id="6483804">8</span><span class="op" id="6483805">)</span><span class="op" id="6483806">,</span>&nbsp;<span class="ident" id="6483808">test</span><span class="op" id="6483812">.</span><span class="ident" id="6483813">expected</span><span class="op" id="6483821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483828">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483846">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6483851">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483919">for</span>&nbsp;<span class="ident" id="6483923">y</span>&nbsp;<span class="op" id="6483925">:=</span>&nbsp;<span class="ident" id="6483928">b</span><span class="op" id="6483929">.</span><span class="ident" id="6483930">Min</span><span class="op" id="6483933">.</span><span class="ident" id="6483934">Y</span><span class="op" id="6483935">;</span>&nbsp;<span class="ident" id="6483937">y</span>&nbsp;<span class="op" id="6483939">&lt;</span>&nbsp;<span class="ident" id="6483941">b</span><span class="op" id="6483942">.</span><span class="ident" id="6483943">Max</span><span class="op" id="6483946">.</span><span class="ident" id="6483947">Y</span><span class="op" id="6483948">;</span>&nbsp;<span class="ident" id="6483950">y</span><span class="op" id="6483951">++</span>&nbsp;<span class="op" id="6483954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483960">for</span>&nbsp;<span class="ident" id="6483964">x</span>&nbsp;<span class="op" id="6483966">:=</span>&nbsp;<span class="ident" id="6483969">b</span><span class="op" id="6483970">.</span><span class="ident" id="6483971">Min</span><span class="op" id="6483974">.</span><span class="ident" id="6483975">X</span><span class="op" id="6483976">;</span>&nbsp;<span class="ident" id="6483978">x</span>&nbsp;<span class="op" id="6483980">&lt;</span>&nbsp;<span class="ident" id="6483982">b</span><span class="op" id="6483983">.</span><span class="ident" id="6483984">Max</span><span class="op" id="6483987">.</span><span class="ident" id="6483988">X</span><span class="op" id="6483989">;</span>&nbsp;<span class="ident" id="6483991">x</span><span class="op" id="6483992">++</span>&nbsp;<span class="op" id="6483995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6484002">if</span>&nbsp;<span class="op" id="6484005">!</span><span class="ident" id="6484006">eq</span><span class="op" id="6484008">(</span><span class="ident" id="6484009">dst</span><span class="op" id="6484012">.</span><span class="ident" id="6484013">At</span><span class="op" id="6484015">(</span><span class="ident" id="6484016">x</span><span class="op" id="6484017">,</span>&nbsp;<span class="ident" id="6484019">y</span><span class="op" id="6484020">)</span><span class="op" id="6484021">,</span>&nbsp;<span class="ident" id="6484023">golden</span><span class="op" id="6484029">.</span><span class="ident" id="6484030">At</span><span class="op" id="6484032">(</span><span class="ident" id="6484033">x</span><span class="op" id="6484034">,</span>&nbsp;<span class="ident" id="6484036">y</span><span class="op" id="6484037">)</span><span class="op" id="6484038">)</span>&nbsp;<span class="op" id="6484040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484048">t</span><span class="op" id="6484049">.</span><span class="ident" id="6484050">Errorf</span><span class="op" id="6484056">(</span><span class="string" id="6484057">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6484103">,</span>&nbsp;<span class="ident" id="6484105">r</span><span class="op" id="6484106">,</span>&nbsp;<span class="ident" id="6484108">test</span><span class="op" id="6484112">.</span><span class="ident" id="6484113">desc</span><span class="op" id="6484117">,</span>&nbsp;<span class="ident" id="6484119">x</span><span class="op" id="6484120">,</span>&nbsp;<span class="ident" id="6484122">y</span><span class="op" id="6484123">,</span>&nbsp;<span class="ident" id="6484125">dst</span><span class="op" id="6484128">.</span><span class="ident" id="6484129">At</span><span class="op" id="6484131">(</span><span class="ident" id="6484132">x</span><span class="op" id="6484133">,</span>&nbsp;<span class="ident" id="6484135">y</span><span class="op" id="6484136">)</span><span class="op" id="6484137">,</span>&nbsp;<span class="ident" id="6484139">golden</span><span class="op" id="6484145">.</span><span class="ident" id="6484146">At</span><span class="op" id="6484148">(</span><span class="ident" id="6484149">x</span><span class="op" id="6484150">,</span>&nbsp;<span class="ident" id="6484152">y</span><span class="op" id="6484153">)</span><span class="op" id="6484154">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6484162">continue</span>&nbsp;<span class="ident" id="6484171">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6484181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6484187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6484192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6484196">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6484199">}</span><br>
<span class="lineno"></span><span class="op" id="6484201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6484204">func</span>&nbsp;<span class="ident" id="6484209">TestDrawOverlap</span><span class="op" id="6484224">(</span><span class="ident" id="6484225">t</span>&nbsp;<span class="op" id="6484227">*</span><span class="ident" id="6484228">testing</span><span class="op" id="6484235">.</span><span class="ident" id="6484236">T</span><span class="op" id="6484237">)</span>&nbsp;<span class="op" id="6484239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6484242">for</span>&nbsp;<span class="ident" id="6484246">_</span><span class="op" id="6484247">,</span>&nbsp;<span class="ident" id="6484249">op</span>&nbsp;<span class="op" id="6484252">:=</span>&nbsp;<span class="keyword" id="6484255">range</span>&nbsp;<span class="op" id="6484261">[</span><span class="op" id="6484262">]</span><span class="ident" id="6484263">Op</span><span class="op" id="6484265">{</span><span class="ident" id="6484266">Over</span><span class="op" id="6484270">,</span>&nbsp;<span class="ident" id="6484272">Src</span><span class="op" id="6484275">}</span>&nbsp;<span class="op" id="6484277">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6484281">for</span>&nbsp;<span class="ident" id="6484285">yoff</span>&nbsp;<span class="op" id="6484290">:=</span>&nbsp;<span class="op" id="6484293">-</span><span class="num" id="6484294">2</span><span class="op" id="6484295">;</span>&nbsp;<span class="ident" id="6484297">yoff</span>&nbsp;<span class="op" id="6484302">&lt;=</span>&nbsp;<span class="num" id="6484305">2</span><span class="op" id="6484306">;</span>&nbsp;<span class="ident" id="6484308">yoff</span><span class="op" id="6484312">++</span>&nbsp;<span class="op" id="6484315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484319">loop</span><span class="op" id="6484323">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6484328">for</span>&nbsp;<span class="ident" id="6484332">xoff</span>&nbsp;<span class="op" id="6484337">:=</span>&nbsp;<span class="op" id="6484340">-</span><span class="num" id="6484341">2</span><span class="op" id="6484342">;</span>&nbsp;<span class="ident" id="6484344">xoff</span>&nbsp;<span class="op" id="6484349">&lt;=</span>&nbsp;<span class="num" id="6484352">2</span><span class="op" id="6484353">;</span>&nbsp;<span class="ident" id="6484355">xoff</span><span class="op" id="6484359">++</span>&nbsp;<span class="op" id="6484362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484368">m</span>&nbsp;<span class="op" id="6484370">:=</span>&nbsp;<span class="ident" id="6484373">gradYellow</span><span class="op" id="6484383">(</span><span class="num" id="6484384">127</span><span class="op" id="6484387">)</span><span class="op" id="6484388">.</span><span class="op" id="6484389">(</span><span class="op" id="6484390">*</span><span class="ident" id="6484391">image</span><span class="op" id="6484396">.</span><span class="ident" id="6484397">RGBA</span><span class="op" id="6484401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484407">dst</span>&nbsp;<span class="op" id="6484411">:=</span>&nbsp;<span class="ident" id="6484414">m</span><span class="op" id="6484415">.</span><span class="ident" id="6484416">SubImage</span><span class="op" id="6484424">(</span><span class="ident" id="6484425">image</span><span class="op" id="6484430">.</span><span class="ident" id="6484431">Rect</span><span class="op" id="6484435">(</span><span class="num" id="6484436">5</span><span class="op" id="6484437">,</span>&nbsp;<span class="num" id="6484439">5</span><span class="op" id="6484440">,</span>&nbsp;<span class="num" id="6484442">10</span><span class="op" id="6484444">,</span>&nbsp;<span class="num" id="6484446">10</span><span class="op" id="6484448">)</span><span class="op" id="6484449">)</span><span class="op" id="6484450">.</span><span class="op" id="6484451">(</span><span class="op" id="6484452">*</span><span class="ident" id="6484453">image</span><span class="op" id="6484458">.</span><span class="ident" id="6484459">RGBA</span><span class="op" id="6484463">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484469">src</span>&nbsp;<span class="op" id="6484473">:=</span>&nbsp;<span class="ident" id="6484476">m</span><span class="op" id="6484477">.</span><span class="ident" id="6484478">SubImage</span><span class="op" id="6484486">(</span><span class="ident" id="6484487">image</span><span class="op" id="6484492">.</span><span class="ident" id="6484493">Rect</span><span class="op" id="6484497">(</span><span class="num" id="6484498">5</span><span class="op" id="6484499">+</span><span class="ident" id="6484500">xoff</span><span class="op" id="6484504">,</span>&nbsp;<span class="num" id="6484506">5</span><span class="op" id="6484507">+</span><span class="ident" id="6484508">yoff</span><span class="op" id="6484512">,</span>&nbsp;<span class="num" id="6484514">10</span><span class="op" id="6484516">+</span><span class="ident" id="6484517">xoff</span><span class="op" id="6484521">,</span>&nbsp;<span class="num" id="6484523">10</span><span class="op" id="6484525">+</span><span class="ident" id="6484526">yoff</span><span class="op" id="6484530">)</span><span class="op" id="6484531">)</span><span class="op" id="6484532">.</span><span class="op" id="6484533">(</span><span class="op" id="6484534">*</span><span class="ident" id="6484535">image</span><span class="op" id="6484540">.</span><span class="ident" id="6484541">RGBA</span><span class="op" id="6484545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484551">b</span>&nbsp;<span class="op" id="6484553">:=</span>&nbsp;<span class="ident" id="6484556">dst</span><span class="op" id="6484559">.</span><span class="ident" id="6484560">Bounds</span><span class="op" id="6484566">(</span><span class="op" id="6484567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6484573">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484675">golden</span>&nbsp;<span class="op" id="6484682">:=</span>&nbsp;<span class="ident" id="6484685">makeGolden</span><span class="op" id="6484695">(</span><span class="ident" id="6484696">dst</span><span class="op" id="6484699">,</span>&nbsp;<span class="ident" id="6484701">b</span><span class="op" id="6484702">,</span>&nbsp;<span class="ident" id="6484704">src</span><span class="op" id="6484707">,</span>&nbsp;<span class="ident" id="6484709">src</span><span class="op" id="6484712">.</span><span class="ident" id="6484713">Bounds</span><span class="op" id="6484719">(</span><span class="op" id="6484720">)</span><span class="op" id="6484721">.</span><span class="ident" id="6484722">Min</span><span class="op" id="6484725">,</span>&nbsp;<span class="ident" id="6484727">nil</span><span class="op" id="6484730">,</span>&nbsp;<span class="ident" id="6484732">image</span><span class="op" id="6484737">.</span><span class="ident" id="6484738">ZP</span><span class="op" id="6484740">,</span>&nbsp;<span class="ident" id="6484742">op</span><span class="op" id="6484744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6484750">if</span>&nbsp;<span class="op" id="6484753">!</span><span class="ident" id="6484754">b</span><span class="op" id="6484755">.</span><span class="ident" id="6484756">Eq</span><span class="op" id="6484758">(</span><span class="ident" id="6484759">golden</span><span class="op" id="6484765">.</span><span class="ident" id="6484766">Bounds</span><span class="op" id="6484772">(</span><span class="op" id="6484773">)</span><span class="op" id="6484774">)</span>&nbsp;<span class="op" id="6484776">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484783">t</span><span class="op" id="6484784">.</span><span class="ident" id="6484785">Errorf</span><span class="op" id="6484791">(</span><span class="string" id="6484792">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6484842">,</span>&nbsp;<span class="ident" id="6484844">xoff</span><span class="op" id="6484848">,</span>&nbsp;<span class="ident" id="6484850">yoff</span><span class="op" id="6484854">,</span>&nbsp;<span class="ident" id="6484856">dst</span><span class="op" id="6484859">.</span><span class="ident" id="6484860">Bounds</span><span class="op" id="6484866">(</span><span class="op" id="6484867">)</span><span class="op" id="6484868">,</span>&nbsp;<span class="ident" id="6484870">golden</span><span class="op" id="6484876">.</span><span class="ident" id="6484877">Bounds</span><span class="op" id="6484883">(</span><span class="op" id="6484884">)</span><span class="op" id="6484885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6484892">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6484905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6484911">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485009">DrawMask</span><span class="op" id="6485017">(</span><span class="ident" id="6485018">dst</span><span class="op" id="6485021">,</span>&nbsp;<span class="ident" id="6485023">b</span><span class="op" id="6485024">,</span>&nbsp;<span class="ident" id="6485026">src</span><span class="op" id="6485029">,</span>&nbsp;<span class="ident" id="6485031">src</span><span class="op" id="6485034">.</span><span class="ident" id="6485035">Bounds</span><span class="op" id="6485041">(</span><span class="op" id="6485042">)</span><span class="op" id="6485043">.</span><span class="ident" id="6485044">Min</span><span class="op" id="6485047">,</span>&nbsp;<span class="ident" id="6485049">nil</span><span class="op" id="6485052">,</span>&nbsp;<span class="ident" id="6485054">image</span><span class="op" id="6485059">.</span><span class="ident" id="6485060">ZP</span><span class="op" id="6485062">,</span>&nbsp;<span class="ident" id="6485064">op</span><span class="op" id="6485066">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6485072">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6485141">for</span>&nbsp;<span class="ident" id="6485145">y</span>&nbsp;<span class="op" id="6485147">:=</span>&nbsp;<span class="ident" id="6485150">b</span><span class="op" id="6485151">.</span><span class="ident" id="6485152">Min</span><span class="op" id="6485155">.</span><span class="ident" id="6485156">Y</span><span class="op" id="6485157">;</span>&nbsp;<span class="ident" id="6485159">y</span>&nbsp;<span class="op" id="6485161">&lt;</span>&nbsp;<span class="ident" id="6485163">b</span><span class="op" id="6485164">.</span><span class="ident" id="6485165">Max</span><span class="op" id="6485168">.</span><span class="ident" id="6485169">Y</span><span class="op" id="6485170">;</span>&nbsp;<span class="ident" id="6485172">y</span><span class="op" id="6485173">++</span>&nbsp;<span class="op" id="6485176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6485183">for</span>&nbsp;<span class="ident" id="6485187">x</span>&nbsp;<span class="op" id="6485189">:=</span>&nbsp;<span class="ident" id="6485192">b</span><span class="op" id="6485193">.</span><span class="ident" id="6485194">Min</span><span class="op" id="6485197">.</span><span class="ident" id="6485198">X</span><span class="op" id="6485199">;</span>&nbsp;<span class="ident" id="6485201">x</span>&nbsp;<span class="op" id="6485203">&lt;</span>&nbsp;<span class="ident" id="6485205">b</span><span class="op" id="6485206">.</span><span class="ident" id="6485207">Max</span><span class="op" id="6485210">.</span><span class="ident" id="6485211">X</span><span class="op" id="6485212">;</span>&nbsp;<span class="ident" id="6485214">x</span><span class="op" id="6485215">++</span>&nbsp;<span class="op" id="6485218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6485226">if</span>&nbsp;<span class="op" id="6485229">!</span><span class="ident" id="6485230">eq</span><span class="op" id="6485232">(</span><span class="ident" id="6485233">dst</span><span class="op" id="6485236">.</span><span class="ident" id="6485237">At</span><span class="op" id="6485239">(</span><span class="ident" id="6485240">x</span><span class="op" id="6485241">,</span>&nbsp;<span class="ident" id="6485243">y</span><span class="op" id="6485244">)</span><span class="op" id="6485245">,</span>&nbsp;<span class="ident" id="6485247">golden</span><span class="op" id="6485253">.</span><span class="ident" id="6485254">At</span><span class="op" id="6485256">(</span><span class="ident" id="6485257">x</span><span class="op" id="6485258">,</span>&nbsp;<span class="ident" id="6485260">y</span><span class="op" id="6485261">)</span><span class="op" id="6485262">)</span>&nbsp;<span class="op" id="6485264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485273">t</span><span class="op" id="6485274">.</span><span class="ident" id="6485275">Errorf</span><span class="op" id="6485281">(</span><span class="string" id="6485282">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6485345">,</span>&nbsp;<span class="ident" id="6485347">xoff</span><span class="op" id="6485351">,</span>&nbsp;<span class="ident" id="6485353">yoff</span><span class="op" id="6485357">,</span>&nbsp;<span class="ident" id="6485359">x</span><span class="op" id="6485360">,</span>&nbsp;<span class="ident" id="6485362">y</span><span class="op" id="6485363">,</span>&nbsp;<span class="ident" id="6485365">dst</span><span class="op" id="6485368">.</span><span class="ident" id="6485369">At</span><span class="op" id="6485371">(</span><span class="ident" id="6485372">x</span><span class="op" id="6485373">,</span>&nbsp;<span class="ident" id="6485375">y</span><span class="op" id="6485376">)</span><span class="op" id="6485377">,</span>&nbsp;<span class="ident" id="6485379">golden</span><span class="op" id="6485385">.</span><span class="ident" id="6485386">At</span><span class="op" id="6485388">(</span><span class="ident" id="6485389">x</span><span class="op" id="6485390">,</span>&nbsp;<span class="ident" id="6485392">y</span><span class="op" id="6485393">)</span><span class="op" id="6485394">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6485403">continue</span>&nbsp;<span class="ident" id="6485412">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485441">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485448">}</span><br>
<span class="lineno"></span><span class="op" id="6485450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6485453">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="6485525">func</span>&nbsp;<span class="ident" id="6485530">TestNonZeroSrcPt</span><span class="op" id="6485546">(</span><span class="ident" id="6485547">t</span>&nbsp;<span class="op" id="6485549">*</span><span class="ident" id="6485550">testing</span><span class="op" id="6485557">.</span><span class="ident" id="6485558">T</span><span class="op" id="6485559">)</span>&nbsp;<span class="op" id="6485561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485564">a</span>&nbsp;<span class="op" id="6485566">:=</span>&nbsp;<span class="ident" id="6485569">image</span><span class="op" id="6485574">.</span><span class="ident" id="6485575">NewRGBA</span><span class="op" id="6485582">(</span><span class="ident" id="6485583">image</span><span class="op" id="6485588">.</span><span class="ident" id="6485589">Rect</span><span class="op" id="6485593">(</span><span class="num" id="6485594">0</span><span class="op" id="6485595">,</span>&nbsp;<span class="num" id="6485597">0</span><span class="op" id="6485598">,</span>&nbsp;<span class="num" id="6485600">1</span><span class="op" id="6485601">,</span>&nbsp;<span class="num" id="6485603">1</span><span class="op" id="6485604">)</span><span class="op" id="6485605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485608">b</span>&nbsp;<span class="op" id="6485610">:=</span>&nbsp;<span class="ident" id="6485613">image</span><span class="op" id="6485618">.</span><span class="ident" id="6485619">NewRGBA</span><span class="op" id="6485626">(</span><span class="ident" id="6485627">image</span><span class="op" id="6485632">.</span><span class="ident" id="6485633">Rect</span><span class="op" id="6485637">(</span><span class="num" id="6485638">0</span><span class="op" id="6485639">,</span>&nbsp;<span class="num" id="6485641">0</span><span class="op" id="6485642">,</span>&nbsp;<span class="num" id="6485644">2</span><span class="op" id="6485645">,</span>&nbsp;<span class="num" id="6485647">2</span><span class="op" id="6485648">)</span><span class="op" id="6485649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485652">b</span><span class="op" id="6485653">.</span><span class="ident" id="6485654">Set</span><span class="op" id="6485657">(</span><span class="num" id="6485658">0</span><span class="op" id="6485659">,</span>&nbsp;<span class="num" id="6485661">0</span><span class="op" id="6485662">,</span>&nbsp;<span class="ident" id="6485664">color</span><span class="op" id="6485669">.</span><span class="ident" id="6485670">RGBA</span><span class="op" id="6485674">{</span><span class="num" id="6485675">0</span><span class="op" id="6485676">,</span>&nbsp;<span class="num" id="6485678">0</span><span class="op" id="6485679">,</span>&nbsp;<span class="num" id="6485681">0</span><span class="op" id="6485682">,</span>&nbsp;<span class="num" id="6485684">5</span><span class="op" id="6485685">}</span><span class="op" id="6485686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485689">b</span><span class="op" id="6485690">.</span><span class="ident" id="6485691">Set</span><span class="op" id="6485694">(</span><span class="num" id="6485695">1</span><span class="op" id="6485696">,</span>&nbsp;<span class="num" id="6485698">0</span><span class="op" id="6485699">,</span>&nbsp;<span class="ident" id="6485701">color</span><span class="op" id="6485706">.</span><span class="ident" id="6485707">RGBA</span><span class="op" id="6485711">{</span><span class="num" id="6485712">0</span><span class="op" id="6485713">,</span>&nbsp;<span class="num" id="6485715">0</span><span class="op" id="6485716">,</span>&nbsp;<span class="num" id="6485718">5</span><span class="op" id="6485719">,</span>&nbsp;<span class="num" id="6485721">5</span><span class="op" id="6485722">}</span><span class="op" id="6485723">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485726">b</span><span class="op" id="6485727">.</span><span class="ident" id="6485728">Set</span><span class="op" id="6485731">(</span><span class="num" id="6485732">0</span><span class="op" id="6485733">,</span>&nbsp;<span class="num" id="6485735">1</span><span class="op" id="6485736">,</span>&nbsp;<span class="ident" id="6485738">color</span><span class="op" id="6485743">.</span><span class="ident" id="6485744">RGBA</span><span class="op" id="6485748">{</span><span class="num" id="6485749">0</span><span class="op" id="6485750">,</span>&nbsp;<span class="num" id="6485752">5</span><span class="op" id="6485753">,</span>&nbsp;<span class="num" id="6485755">0</span><span class="op" id="6485756">,</span>&nbsp;<span class="num" id="6485758">5</span><span class="op" id="6485759">}</span><span class="op" id="6485760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485763">b</span><span class="op" id="6485764">.</span><span class="ident" id="6485765">Set</span><span class="op" id="6485768">(</span><span class="num" id="6485769">1</span><span class="op" id="6485770">,</span>&nbsp;<span class="num" id="6485772">1</span><span class="op" id="6485773">,</span>&nbsp;<span class="ident" id="6485775">color</span><span class="op" id="6485780">.</span><span class="ident" id="6485781">RGBA</span><span class="op" id="6485785">{</span><span class="num" id="6485786">5</span><span class="op" id="6485787">,</span>&nbsp;<span class="num" id="6485789">0</span><span class="op" id="6485790">,</span>&nbsp;<span class="num" id="6485792">0</span><span class="op" id="6485793">,</span>&nbsp;<span class="num" id="6485795">5</span><span class="op" id="6485796">}</span><span class="op" id="6485797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485800">Draw</span><span class="op" id="6485804">(</span><span class="ident" id="6485805">a</span><span class="op" id="6485806">,</span>&nbsp;<span class="ident" id="6485808">image</span><span class="op" id="6485813">.</span><span class="ident" id="6485814">Rect</span><span class="op" id="6485818">(</span><span class="num" id="6485819">0</span><span class="op" id="6485820">,</span>&nbsp;<span class="num" id="6485822">0</span><span class="op" id="6485823">,</span>&nbsp;<span class="num" id="6485825">1</span><span class="op" id="6485826">,</span>&nbsp;<span class="num" id="6485828">1</span><span class="op" id="6485829">)</span><span class="op" id="6485830">,</span>&nbsp;<span class="ident" id="6485832">b</span><span class="op" id="6485833">,</span>&nbsp;<span class="ident" id="6485835">image</span><span class="op" id="6485840">.</span><span class="ident" id="6485841">Pt</span><span class="op" id="6485843">(</span><span class="num" id="6485844">1</span><span class="op" id="6485845">,</span>&nbsp;<span class="num" id="6485847">1</span><span class="op" id="6485848">)</span><span class="op" id="6485849">,</span>&nbsp;<span class="ident" id="6485851">Over</span><span class="op" id="6485855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6485858">if</span>&nbsp;<span class="op" id="6485861">!</span><span class="ident" id="6485862">eq</span><span class="op" id="6485864">(</span><span class="ident" id="6485865">color</span><span class="op" id="6485870">.</span><span class="ident" id="6485871">RGBA</span><span class="op" id="6485875">{</span><span class="num" id="6485876">5</span><span class="op" id="6485877">,</span>&nbsp;<span class="num" id="6485879">0</span><span class="op" id="6485880">,</span>&nbsp;<span class="num" id="6485882">0</span><span class="op" id="6485883">,</span>&nbsp;<span class="num" id="6485885">5</span><span class="op" id="6485886">}</span><span class="op" id="6485887">,</span>&nbsp;<span class="ident" id="6485889">a</span><span class="op" id="6485890">.</span><span class="ident" id="6485891">At</span><span class="op" id="6485893">(</span><span class="num" id="6485894">0</span><span class="op" id="6485895">,</span>&nbsp;<span class="num" id="6485897">0</span><span class="op" id="6485898">)</span><span class="op" id="6485899">)</span>&nbsp;<span class="op" id="6485901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485905">t</span><span class="op" id="6485906">.</span><span class="ident" id="6485907">Errorf</span><span class="op" id="6485913">(</span><span class="string" id="6485914">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6485947">,</span>&nbsp;<span class="ident" id="6485949">color</span><span class="op" id="6485954">.</span><span class="ident" id="6485955">RGBA</span><span class="op" id="6485959">{</span><span class="num" id="6485960">5</span><span class="op" id="6485961">,</span>&nbsp;<span class="num" id="6485963">0</span><span class="op" id="6485964">,</span>&nbsp;<span class="num" id="6485966">0</span><span class="op" id="6485967">,</span>&nbsp;<span class="num" id="6485969">5</span><span class="op" id="6485970">}</span><span class="op" id="6485971">,</span>&nbsp;<span class="ident" id="6485973">a</span><span class="op" id="6485974">.</span><span class="ident" id="6485975">At</span><span class="op" id="6485977">(</span><span class="num" id="6485978">0</span><span class="op" id="6485979">,</span>&nbsp;<span class="num" id="6485981">0</span><span class="op" id="6485982">)</span><span class="op" id="6485983">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485986">}</span><br>
<span class="lineno"></span><span class="op" id="6485988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6485991">func</span>&nbsp;<span class="ident" id="6485996">TestFill</span><span class="op" id="6486004">(</span><span class="ident" id="6486005">t</span>&nbsp;<span class="op" id="6486007">*</span><span class="ident" id="6486008">testing</span><span class="op" id="6486015">.</span><span class="ident" id="6486016">T</span><span class="op" id="6486017">)</span>&nbsp;<span class="op" id="6486019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486022">rr</span>&nbsp;<span class="op" id="6486025">:=</span>&nbsp;<span class="op" id="6486028">[</span><span class="op" id="6486029">]</span><span class="ident" id="6486030">image</span><span class="op" id="6486035">.</span><span class="ident" id="6486036">Rectangle</span><span class="op" id="6486045">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486049">image</span><span class="op" id="6486054">.</span><span class="ident" id="6486055">Rect</span><span class="op" id="6486059">(</span><span class="num" id="6486060">0</span><span class="op" id="6486061">,</span>&nbsp;<span class="num" id="6486063">0</span><span class="op" id="6486064">,</span>&nbsp;<span class="num" id="6486066">0</span><span class="op" id="6486067">,</span>&nbsp;<span class="num" id="6486069">0</span><span class="op" id="6486070">)</span><span class="op" id="6486071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486075">image</span><span class="op" id="6486080">.</span><span class="ident" id="6486081">Rect</span><span class="op" id="6486085">(</span><span class="num" id="6486086">0</span><span class="op" id="6486087">,</span>&nbsp;<span class="num" id="6486089">0</span><span class="op" id="6486090">,</span>&nbsp;<span class="num" id="6486092">40</span><span class="op" id="6486094">,</span>&nbsp;<span class="num" id="6486096">30</span><span class="op" id="6486098">)</span><span class="op" id="6486099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486103">image</span><span class="op" id="6486108">.</span><span class="ident" id="6486109">Rect</span><span class="op" id="6486113">(</span><span class="num" id="6486114">10</span><span class="op" id="6486116">,</span>&nbsp;<span class="num" id="6486118">0</span><span class="op" id="6486119">,</span>&nbsp;<span class="num" id="6486121">40</span><span class="op" id="6486123">,</span>&nbsp;<span class="num" id="6486125">30</span><span class="op" id="6486127">)</span><span class="op" id="6486128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486132">image</span><span class="op" id="6486137">.</span><span class="ident" id="6486138">Rect</span><span class="op" id="6486142">(</span><span class="num" id="6486143">0</span><span class="op" id="6486144">,</span>&nbsp;<span class="num" id="6486146">20</span><span class="op" id="6486148">,</span>&nbsp;<span class="num" id="6486150">40</span><span class="op" id="6486152">,</span>&nbsp;<span class="num" id="6486154">30</span><span class="op" id="6486156">)</span><span class="op" id="6486157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486161">image</span><span class="op" id="6486166">.</span><span class="ident" id="6486167">Rect</span><span class="op" id="6486171">(</span><span class="num" id="6486172">10</span><span class="op" id="6486174">,</span>&nbsp;<span class="num" id="6486176">20</span><span class="op" id="6486178">,</span>&nbsp;<span class="num" id="6486180">40</span><span class="op" id="6486182">,</span>&nbsp;<span class="num" id="6486184">30</span><span class="op" id="6486186">)</span><span class="op" id="6486187">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486191">image</span><span class="op" id="6486196">.</span><span class="ident" id="6486197">Rect</span><span class="op" id="6486201">(</span><span class="num" id="6486202">10</span><span class="op" id="6486204">,</span>&nbsp;<span class="num" id="6486206">20</span><span class="op" id="6486208">,</span>&nbsp;<span class="num" id="6486210">15</span><span class="op" id="6486212">,</span>&nbsp;<span class="num" id="6486214">25</span><span class="op" id="6486216">)</span><span class="op" id="6486217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486221">image</span><span class="op" id="6486226">.</span><span class="ident" id="6486227">Rect</span><span class="op" id="6486231">(</span><span class="num" id="6486232">10</span><span class="op" id="6486234">,</span>&nbsp;<span class="num" id="6486236">0</span><span class="op" id="6486237">,</span>&nbsp;<span class="num" id="6486239">35</span><span class="op" id="6486241">,</span>&nbsp;<span class="num" id="6486243">30</span><span class="op" id="6486245">)</span><span class="op" id="6486246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486250">image</span><span class="op" id="6486255">.</span><span class="ident" id="6486256">Rect</span><span class="op" id="6486260">(</span><span class="num" id="6486261">0</span><span class="op" id="6486262">,</span>&nbsp;<span class="num" id="6486264">15</span><span class="op" id="6486266">,</span>&nbsp;<span class="num" id="6486268">40</span><span class="op" id="6486270">,</span>&nbsp;<span class="num" id="6486272">16</span><span class="op" id="6486274">)</span><span class="op" id="6486275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486279">image</span><span class="op" id="6486284">.</span><span class="ident" id="6486285">Rect</span><span class="op" id="6486289">(</span><span class="num" id="6486290">24</span><span class="op" id="6486292">,</span>&nbsp;<span class="num" id="6486294">24</span><span class="op" id="6486296">,</span>&nbsp;<span class="num" id="6486298">25</span><span class="op" id="6486300">,</span>&nbsp;<span class="num" id="6486302">25</span><span class="op" id="6486304">)</span><span class="op" id="6486305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486309">image</span><span class="op" id="6486314">.</span><span class="ident" id="6486315">Rect</span><span class="op" id="6486319">(</span><span class="num" id="6486320">23</span><span class="op" id="6486322">,</span>&nbsp;<span class="num" id="6486324">23</span><span class="op" id="6486326">,</span>&nbsp;<span class="num" id="6486328">26</span><span class="op" id="6486330">,</span>&nbsp;<span class="num" id="6486332">26</span><span class="op" id="6486334">)</span><span class="op" id="6486335">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486339">image</span><span class="op" id="6486344">.</span><span class="ident" id="6486345">Rect</span><span class="op" id="6486349">(</span><span class="num" id="6486350">22</span><span class="op" id="6486352">,</span>&nbsp;<span class="num" id="6486354">22</span><span class="op" id="6486356">,</span>&nbsp;<span class="num" id="6486358">27</span><span class="op" id="6486360">,</span>&nbsp;<span class="num" id="6486362">27</span><span class="op" id="6486364">)</span><span class="op" id="6486365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486369">image</span><span class="op" id="6486374">.</span><span class="ident" id="6486375">Rect</span><span class="op" id="6486379">(</span><span class="num" id="6486380">21</span><span class="op" id="6486382">,</span>&nbsp;<span class="num" id="6486384">21</span><span class="op" id="6486386">,</span>&nbsp;<span class="num" id="6486388">28</span><span class="op" id="6486390">,</span>&nbsp;<span class="num" id="6486392">28</span><span class="op" id="6486394">)</span><span class="op" id="6486395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486399">image</span><span class="op" id="6486404">.</span><span class="ident" id="6486405">Rect</span><span class="op" id="6486409">(</span><span class="num" id="6486410">20</span><span class="op" id="6486412">,</span>&nbsp;<span class="num" id="6486414">20</span><span class="op" id="6486416">,</span>&nbsp;<span class="num" id="6486418">29</span><span class="op" id="6486420">,</span>&nbsp;<span class="num" id="6486422">29</span><span class="op" id="6486424">)</span><span class="op" id="6486425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486431">for</span>&nbsp;<span class="ident" id="6486435">_</span><span class="op" id="6486436">,</span>&nbsp;<span class="ident" id="6486438">r</span>&nbsp;<span class="op" id="6486440">:=</span>&nbsp;<span class="keyword" id="6486443">range</span>&nbsp;<span class="ident" id="6486449">rr</span>&nbsp;<span class="op" id="6486452">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486456">m</span>&nbsp;<span class="op" id="6486458">:=</span>&nbsp;<span class="ident" id="6486461">image</span><span class="op" id="6486466">.</span><span class="ident" id="6486467">NewRGBA</span><span class="op" id="6486474">(</span><span class="ident" id="6486475">image</span><span class="op" id="6486480">.</span><span class="ident" id="6486481">Rect</span><span class="op" id="6486485">(</span><span class="num" id="6486486">0</span><span class="op" id="6486487">,</span>&nbsp;<span class="num" id="6486489">0</span><span class="op" id="6486490">,</span>&nbsp;<span class="num" id="6486492">40</span><span class="op" id="6486494">,</span>&nbsp;<span class="num" id="6486496">30</span><span class="op" id="6486498">)</span><span class="op" id="6486499">)</span><span class="op" id="6486500">.</span><span class="ident" id="6486501">SubImage</span><span class="op" id="6486509">(</span><span class="ident" id="6486510">r</span><span class="op" id="6486511">)</span><span class="op" id="6486512">.</span><span class="op" id="6486513">(</span><span class="op" id="6486514">*</span><span class="ident" id="6486515">image</span><span class="op" id="6486520">.</span><span class="ident" id="6486521">RGBA</span><span class="op" id="6486525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486529">b</span>&nbsp;<span class="op" id="6486531">:=</span>&nbsp;<span class="ident" id="6486534">m</span><span class="op" id="6486535">.</span><span class="ident" id="6486536">Bounds</span><span class="op" id="6486542">(</span><span class="op" id="6486543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486547">c</span>&nbsp;<span class="op" id="6486549">:=</span>&nbsp;<span class="ident" id="6486552">color</span><span class="op" id="6486557">.</span><span class="ident" id="6486558">RGBA</span><span class="op" id="6486562">{</span><span class="num" id="6486563">11</span><span class="op" id="6486565">,</span>&nbsp;<span class="num" id="6486567">0</span><span class="op" id="6486568">,</span>&nbsp;<span class="num" id="6486570">0</span><span class="op" id="6486571">,</span>&nbsp;<span class="num" id="6486573">255</span><span class="op" id="6486576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486580">src</span>&nbsp;<span class="op" id="6486584">:=</span>&nbsp;<span class="op" id="6486587">&amp;</span><span class="ident" id="6486588">image</span><span class="op" id="6486593">.</span><span class="ident" id="6486594">Uniform</span><span class="op" id="6486601">{</span><span class="ident" id="6486602">C</span><span class="op" id="6486603">:</span>&nbsp;<span class="ident" id="6486605">c</span><span class="op" id="6486606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486610">check</span>&nbsp;<span class="op" id="6486616">:=</span>&nbsp;<span class="keyword" id="6486619">func</span><span class="op" id="6486623">(</span><span class="ident" id="6486624">desc</span>&nbsp;<span class="builtintype" id="6486629">string</span><span class="op" id="6486635">)</span>&nbsp;<span class="op" id="6486637">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486642">for</span>&nbsp;<span class="ident" id="6486646">y</span>&nbsp;<span class="op" id="6486648">:=</span>&nbsp;<span class="ident" id="6486651">b</span><span class="op" id="6486652">.</span><span class="ident" id="6486653">Min</span><span class="op" id="6486656">.</span><span class="ident" id="6486657">Y</span><span class="op" id="6486658">;</span>&nbsp;<span class="ident" id="6486660">y</span>&nbsp;<span class="op" id="6486662">&lt;</span>&nbsp;<span class="ident" id="6486664">b</span><span class="op" id="6486665">.</span><span class="ident" id="6486666">Max</span><span class="op" id="6486669">.</span><span class="ident" id="6486670">Y</span><span class="op" id="6486671">;</span>&nbsp;<span class="ident" id="6486673">y</span><span class="op" id="6486674">++</span>&nbsp;<span class="op" id="6486677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486683">for</span>&nbsp;<span class="ident" id="6486687">x</span>&nbsp;<span class="op" id="6486689">:=</span>&nbsp;<span class="ident" id="6486692">b</span><span class="op" id="6486693">.</span><span class="ident" id="6486694">Min</span><span class="op" id="6486697">.</span><span class="ident" id="6486698">X</span><span class="op" id="6486699">;</span>&nbsp;<span class="ident" id="6486701">x</span>&nbsp;<span class="op" id="6486703">&lt;</span>&nbsp;<span class="ident" id="6486705">b</span><span class="op" id="6486706">.</span><span class="ident" id="6486707">Max</span><span class="op" id="6486710">.</span><span class="ident" id="6486711">X</span><span class="op" id="6486712">;</span>&nbsp;<span class="ident" id="6486714">x</span><span class="op" id="6486715">++</span>&nbsp;<span class="op" id="6486718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486725">if</span>&nbsp;<span class="op" id="6486728">!</span><span class="ident" id="6486729">eq</span><span class="op" id="6486731">(</span><span class="ident" id="6486732">c</span><span class="op" id="6486733">,</span>&nbsp;<span class="ident" id="6486735">m</span><span class="op" id="6486736">.</span><span class="ident" id="6486737">At</span><span class="op" id="6486739">(</span><span class="ident" id="6486740">x</span><span class="op" id="6486741">,</span>&nbsp;<span class="ident" id="6486743">y</span><span class="op" id="6486744">)</span><span class="op" id="6486745">)</span>&nbsp;<span class="op" id="6486747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486755">t</span><span class="op" id="6486756">.</span><span class="ident" id="6486757">Errorf</span><span class="op" id="6486763">(</span><span class="string" id="6486764">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6486823">,</span>&nbsp;<span class="ident" id="6486825">desc</span><span class="op" id="6486829">,</span>&nbsp;<span class="ident" id="6486831">x</span><span class="op" id="6486832">,</span>&nbsp;<span class="ident" id="6486834">y</span><span class="op" id="6486835">,</span>&nbsp;<span class="ident" id="6486837">r</span><span class="op" id="6486838">,</span>&nbsp;<span class="ident" id="6486840">c</span><span class="op" id="6486841">,</span>&nbsp;<span class="ident" id="6486843">m</span><span class="op" id="6486844">.</span><span class="ident" id="6486845">At</span><span class="op" id="6486847">(</span><span class="ident" id="6486848">x</span><span class="op" id="6486849">,</span>&nbsp;<span class="ident" id="6486851">y</span><span class="op" id="6486852">)</span><span class="op" id="6486853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486861">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6486892">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486921">for</span>&nbsp;<span class="ident" id="6486925">y</span>&nbsp;<span class="op" id="6486927">:=</span>&nbsp;<span class="ident" id="6486930">b</span><span class="op" id="6486931">.</span><span class="ident" id="6486932">Min</span><span class="op" id="6486935">.</span><span class="ident" id="6486936">Y</span><span class="op" id="6486937">;</span>&nbsp;<span class="ident" id="6486939">y</span>&nbsp;<span class="op" id="6486941">&lt;</span>&nbsp;<span class="ident" id="6486943">b</span><span class="op" id="6486944">.</span><span class="ident" id="6486945">Max</span><span class="op" id="6486948">.</span><span class="ident" id="6486949">Y</span><span class="op" id="6486950">;</span>&nbsp;<span class="ident" id="6486952">y</span><span class="op" id="6486953">++</span>&nbsp;<span class="op" id="6486956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486961">for</span>&nbsp;<span class="ident" id="6486965">x</span>&nbsp;<span class="op" id="6486967">:=</span>&nbsp;<span class="ident" id="6486970">b</span><span class="op" id="6486971">.</span><span class="ident" id="6486972">Min</span><span class="op" id="6486975">.</span><span class="ident" id="6486976">X</span><span class="op" id="6486977">;</span>&nbsp;<span class="ident" id="6486979">x</span>&nbsp;<span class="op" id="6486981">&lt;</span>&nbsp;<span class="ident" id="6486983">b</span><span class="op" id="6486984">.</span><span class="ident" id="6486985">Max</span><span class="op" id="6486988">.</span><span class="ident" id="6486989">X</span><span class="op" id="6486990">;</span>&nbsp;<span class="ident" id="6486992">x</span><span class="op" id="6486993">++</span>&nbsp;<span class="op" id="6486996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487002">DrawMask</span><span class="op" id="6487010">(</span><span class="ident" id="6487011">m</span><span class="op" id="6487012">,</span>&nbsp;<span class="ident" id="6487014">image</span><span class="op" id="6487019">.</span><span class="ident" id="6487020">Rect</span><span class="op" id="6487024">(</span><span class="ident" id="6487025">x</span><span class="op" id="6487026">,</span>&nbsp;<span class="ident" id="6487028">y</span><span class="op" id="6487029">,</span>&nbsp;<span class="ident" id="6487031">x</span><span class="op" id="6487032">+</span><span class="num" id="6487033">1</span><span class="op" id="6487034">,</span>&nbsp;<span class="ident" id="6487036">y</span><span class="op" id="6487037">+</span><span class="num" id="6487038">1</span><span class="op" id="6487039">)</span><span class="op" id="6487040">,</span>&nbsp;<span class="ident" id="6487042">src</span><span class="op" id="6487045">,</span>&nbsp;<span class="ident" id="6487047">image</span><span class="op" id="6487052">.</span><span class="ident" id="6487053">ZP</span><span class="op" id="6487055">,</span>&nbsp;<span class="ident" id="6487057">nil</span><span class="op" id="6487060">,</span>&nbsp;<span class="ident" id="6487062">image</span><span class="op" id="6487067">.</span><span class="ident" id="6487068">ZP</span><span class="op" id="6487070">,</span>&nbsp;<span class="ident" id="6487072">Src</span><span class="op" id="6487075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487084">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487088">check</span><span class="op" id="6487093">(</span><span class="string" id="6487094">&#34;pixel&#34;</span><span class="op" id="6487101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6487105">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487132">c</span>&nbsp;<span class="op" id="6487134">=</span>&nbsp;<span class="ident" id="6487136">color</span><span class="op" id="6487141">.</span><span class="ident" id="6487142">RGBA</span><span class="op" id="6487146">{</span><span class="num" id="6487147">0</span><span class="op" id="6487148">,</span>&nbsp;<span class="num" id="6487150">22</span><span class="op" id="6487152">,</span>&nbsp;<span class="num" id="6487154">0</span><span class="op" id="6487155">,</span>&nbsp;<span class="num" id="6487157">255</span><span class="op" id="6487160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487164">src</span>&nbsp;<span class="op" id="6487168">=</span>&nbsp;<span class="op" id="6487170">&amp;</span><span class="ident" id="6487171">image</span><span class="op" id="6487176">.</span><span class="ident" id="6487177">Uniform</span><span class="op" id="6487184">{</span><span class="ident" id="6487185">C</span><span class="op" id="6487186">:</span>&nbsp;<span class="ident" id="6487188">c</span><span class="op" id="6487189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6487193">for</span>&nbsp;<span class="ident" id="6487197">y</span>&nbsp;<span class="op" id="6487199">:=</span>&nbsp;<span class="ident" id="6487202">b</span><span class="op" id="6487203">.</span><span class="ident" id="6487204">Min</span><span class="op" id="6487207">.</span><span class="ident" id="6487208">Y</span><span class="op" id="6487209">;</span>&nbsp;<span class="ident" id="6487211">y</span>&nbsp;<span class="op" id="6487213">&lt;</span>&nbsp;<span class="ident" id="6487215">b</span><span class="op" id="6487216">.</span><span class="ident" id="6487217">Max</span><span class="op" id="6487220">.</span><span class="ident" id="6487221">Y</span><span class="op" id="6487222">;</span>&nbsp;<span class="ident" id="6487224">y</span><span class="op" id="6487225">++</span>&nbsp;<span class="op" id="6487228">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487233">DrawMask</span><span class="op" id="6487241">(</span><span class="ident" id="6487242">m</span><span class="op" id="6487243">,</span>&nbsp;<span class="ident" id="6487245">image</span><span class="op" id="6487250">.</span><span class="ident" id="6487251">Rect</span><span class="op" id="6487255">(</span><span class="ident" id="6487256">b</span><span class="op" id="6487257">.</span><span class="ident" id="6487258">Min</span><span class="op" id="6487261">.</span><span class="ident" id="6487262">X</span><span class="op" id="6487263">,</span>&nbsp;<span class="ident" id="6487265">y</span><span class="op" id="6487266">,</span>&nbsp;<span class="ident" id="6487268">b</span><span class="op" id="6487269">.</span><span class="ident" id="6487270">Max</span><span class="op" id="6487273">.</span><span class="ident" id="6487274">X</span><span class="op" id="6487275">,</span>&nbsp;<span class="ident" id="6487277">y</span><span class="op" id="6487278">+</span><span class="num" id="6487279">1</span><span class="op" id="6487280">)</span><span class="op" id="6487281">,</span>&nbsp;<span class="ident" id="6487283">src</span><span class="op" id="6487286">,</span>&nbsp;<span class="ident" id="6487288">image</span><span class="op" id="6487293">.</span><span class="ident" id="6487294">ZP</span><span class="op" id="6487296">,</span>&nbsp;<span class="ident" id="6487298">nil</span><span class="op" id="6487301">,</span>&nbsp;<span class="ident" id="6487303">image</span><span class="op" id="6487308">.</span><span class="ident" id="6487309">ZP</span><span class="op" id="6487311">,</span>&nbsp;<span class="ident" id="6487313">Src</span><span class="op" id="6487316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487324">check</span><span class="op" id="6487329">(</span><span class="string" id="6487330">&#34;row&#34;</span><span class="op" id="6487335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6487339">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487369">c</span>&nbsp;<span class="op" id="6487371">=</span>&nbsp;<span class="ident" id="6487373">color</span><span class="op" id="6487378">.</span><span class="ident" id="6487379">RGBA</span><span class="op" id="6487383">{</span><span class="num" id="6487384">0</span><span class="op" id="6487385">,</span>&nbsp;<span class="num" id="6487387">0</span><span class="op" id="6487388">,</span>&nbsp;<span class="num" id="6487390">33</span><span class="op" id="6487392">,</span>&nbsp;<span class="num" id="6487394">255</span><span class="op" id="6487397">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487401">src</span>&nbsp;<span class="op" id="6487405">=</span>&nbsp;<span class="op" id="6487407">&amp;</span><span class="ident" id="6487408">image</span><span class="op" id="6487413">.</span><span class="ident" id="6487414">Uniform</span><span class="op" id="6487421">{</span><span class="ident" id="6487422">C</span><span class="op" id="6487423">:</span>&nbsp;<span class="ident" id="6487425">c</span><span class="op" id="6487426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6487430">for</span>&nbsp;<span class="ident" id="6487434">x</span>&nbsp;<span class="op" id="6487436">:=</span>&nbsp;<span class="ident" id="6487439">b</span><span class="op" id="6487440">.</span><span class="ident" id="6487441">Min</span><span class="op" id="6487444">.</span><span class="ident" id="6487445">X</span><span class="op" id="6487446">;</span>&nbsp;<span class="ident" id="6487448">x</span>&nbsp;<span class="op" id="6487450">&lt;</span>&nbsp;<span class="ident" id="6487452">b</span><span class="op" id="6487453">.</span><span class="ident" id="6487454">Max</span><span class="op" id="6487457">.</span><span class="ident" id="6487458">X</span><span class="op" id="6487459">;</span>&nbsp;<span class="ident" id="6487461">x</span><span class="op" id="6487462">++</span>&nbsp;<span class="op" id="6487465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487470">DrawMask</span><span class="op" id="6487478">(</span><span class="ident" id="6487479">m</span><span class="op" id="6487480">,</span>&nbsp;<span class="ident" id="6487482">image</span><span class="op" id="6487487">.</span><span class="ident" id="6487488">Rect</span><span class="op" id="6487492">(</span><span class="ident" id="6487493">x</span><span class="op" id="6487494">,</span>&nbsp;<span class="ident" id="6487496">b</span><span class="op" id="6487497">.</span><span class="ident" id="6487498">Min</span><span class="op" id="6487501">.</span><span class="ident" id="6487502">Y</span><span class="op" id="6487503">,</span>&nbsp;<span class="ident" id="6487505">x</span><span class="op" id="6487506">+</span><span class="num" id="6487507">1</span><span class="op" id="6487508">,</span>&nbsp;<span class="ident" id="6487510">b</span><span class="op" id="6487511">.</span><span class="ident" id="6487512">Max</span><span class="op" id="6487515">.</span><span class="ident" id="6487516">Y</span><span class="op" id="6487517">)</span><span class="op" id="6487518">,</span>&nbsp;<span class="ident" id="6487520">src</span><span class="op" id="6487523">,</span>&nbsp;<span class="ident" id="6487525">image</span><span class="op" id="6487530">.</span><span class="ident" id="6487531">ZP</span><span class="op" id="6487533">,</span>&nbsp;<span class="ident" id="6487535">nil</span><span class="op" id="6487538">,</span>&nbsp;<span class="ident" id="6487540">image</span><span class="op" id="6487545">.</span><span class="ident" id="6487546">ZP</span><span class="op" id="6487548">,</span>&nbsp;<span class="ident" id="6487550">Src</span><span class="op" id="6487553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487561">check</span><span class="op" id="6487566">(</span><span class="string" id="6487567">&#34;column&#34;</span><span class="op" id="6487575">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6487579">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487614">c</span>&nbsp;<span class="op" id="6487616">=</span>&nbsp;<span class="ident" id="6487618">color</span><span class="op" id="6487623">.</span><span class="ident" id="6487624">RGBA</span><span class="op" id="6487628">{</span><span class="num" id="6487629">44</span><span class="op" id="6487631">,</span>&nbsp;<span class="num" id="6487633">55</span><span class="op" id="6487635">,</span>&nbsp;<span class="num" id="6487637">66</span><span class="op" id="6487639">,</span>&nbsp;<span class="num" id="6487641">77</span><span class="op" id="6487643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487647">src</span>&nbsp;<span class="op" id="6487651">=</span>&nbsp;<span class="op" id="6487653">&amp;</span><span class="ident" id="6487654">image</span><span class="op" id="6487659">.</span><span class="ident" id="6487660">Uniform</span><span class="op" id="6487667">{</span><span class="ident" id="6487668">C</span><span class="op" id="6487669">:</span>&nbsp;<span class="ident" id="6487671">c</span><span class="op" id="6487672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487676">DrawMask</span><span class="op" id="6487684">(</span><span class="ident" id="6487685">m</span><span class="op" id="6487686">,</span>&nbsp;<span class="ident" id="6487688">b</span><span class="op" id="6487689">,</span>&nbsp;<span class="ident" id="6487691">src</span><span class="op" id="6487694">,</span>&nbsp;<span class="ident" id="6487696">image</span><span class="op" id="6487701">.</span><span class="ident" id="6487702">ZP</span><span class="op" id="6487704">,</span>&nbsp;<span class="ident" id="6487706">nil</span><span class="op" id="6487709">,</span>&nbsp;<span class="ident" id="6487711">image</span><span class="op" id="6487716">.</span><span class="ident" id="6487717">ZP</span><span class="op" id="6487719">,</span>&nbsp;<span class="ident" id="6487721">Src</span><span class="op" id="6487724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487728">check</span><span class="op" id="6487733">(</span><span class="string" id="6487734">&#34;whole&#34;</span><span class="op" id="6487741">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487744">}</span><br>
<span class="lineno"></span><span class="op" id="6487746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6487749">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="6487824">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="6487901">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="6487939">func</span>&nbsp;<span class="ident" id="6487944">TestFloydSteinbergCheckerboard</span><span class="op" id="6487974">(</span><span class="ident" id="6487975">t</span>&nbsp;<span class="op" id="6487977">*</span><span class="ident" id="6487978">testing</span><span class="op" id="6487985">.</span><span class="ident" id="6487986">T</span><span class="op" id="6487987">)</span>&nbsp;<span class="op" id="6487989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487992">b</span>&nbsp;<span class="op" id="6487994">:=</span>&nbsp;<span class="ident" id="6487997">image</span><span class="op" id="6488002">.</span><span class="ident" id="6488003">Rect</span><span class="op" id="6488007">(</span><span class="num" id="6488008">0</span><span class="op" id="6488009">,</span>&nbsp;<span class="num" id="6488011">0</span><span class="op" id="6488012">,</span>&nbsp;<span class="num" id="6488014">640</span><span class="op" id="6488017">,</span>&nbsp;<span class="num" id="6488019">480</span><span class="op" id="6488022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488025">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488098">src</span>&nbsp;<span class="op" id="6488102">:=</span>&nbsp;<span class="op" id="6488105">&amp;</span><span class="ident" id="6488106">image</span><span class="op" id="6488111">.</span><span class="ident" id="6488112">Uniform</span><span class="op" id="6488119">{</span><span class="ident" id="6488120">color</span><span class="op" id="6488125">.</span><span class="ident" id="6488126">Gray16</span><span class="op" id="6488132">{</span><span class="num" id="6488133">0x7fff</span><span class="op" id="6488139">}</span><span class="op" id="6488140">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488143">dst</span>&nbsp;<span class="op" id="6488147">:=</span>&nbsp;<span class="ident" id="6488150">image</span><span class="op" id="6488155">.</span><span class="ident" id="6488156">NewPaletted</span><span class="op" id="6488167">(</span><span class="ident" id="6488168">b</span><span class="op" id="6488169">,</span>&nbsp;<span class="ident" id="6488171">color</span><span class="op" id="6488176">.</span><span class="ident" id="6488177">Palette</span><span class="op" id="6488184">{</span><span class="ident" id="6488185">color</span><span class="op" id="6488190">.</span><span class="ident" id="6488191">Black</span><span class="op" id="6488196">,</span>&nbsp;<span class="ident" id="6488198">color</span><span class="op" id="6488203">.</span><span class="ident" id="6488204">White</span><span class="op" id="6488209">}</span><span class="op" id="6488210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488213">FloydSteinberg</span><span class="op" id="6488227">.</span><span class="ident" id="6488228">Draw</span><span class="op" id="6488232">(</span><span class="ident" id="6488233">dst</span><span class="op" id="6488236">,</span>&nbsp;<span class="ident" id="6488238">b</span><span class="op" id="6488239">,</span>&nbsp;<span class="ident" id="6488241">src</span><span class="op" id="6488244">,</span>&nbsp;<span class="ident" id="6488246">image</span><span class="op" id="6488251">.</span><span class="ident" id="6488252">Point</span><span class="op" id="6488257">{</span><span class="op" id="6488258">}</span><span class="op" id="6488259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488262">nErr</span>&nbsp;<span class="op" id="6488267">:=</span>&nbsp;<span class="num" id="6488270">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488273">for</span>&nbsp;<span class="ident" id="6488277">y</span>&nbsp;<span class="op" id="6488279">:=</span>&nbsp;<span class="ident" id="6488282">b</span><span class="op" id="6488283">.</span><span class="ident" id="6488284">Min</span><span class="op" id="6488287">.</span><span class="ident" id="6488288">Y</span><span class="op" id="6488289">;</span>&nbsp;<span class="ident" id="6488291">y</span>&nbsp;<span class="op" id="6488293">&lt;</span>&nbsp;<span class="ident" id="6488295">b</span><span class="op" id="6488296">.</span><span class="ident" id="6488297">Max</span><span class="op" id="6488300">.</span><span class="ident" id="6488301">Y</span><span class="op" id="6488302">;</span>&nbsp;<span class="ident" id="6488304">y</span><span class="op" id="6488305">++</span>&nbsp;<span class="op" id="6488308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488312">for</span>&nbsp;<span class="ident" id="6488316">x</span>&nbsp;<span class="op" id="6488318">:=</span>&nbsp;<span class="ident" id="6488321">b</span><span class="op" id="6488322">.</span><span class="ident" id="6488323">Min</span><span class="op" id="6488326">.</span><span class="ident" id="6488327">X</span><span class="op" id="6488328">;</span>&nbsp;<span class="ident" id="6488330">x</span>&nbsp;<span class="op" id="6488332">&lt;</span>&nbsp;<span class="ident" id="6488334">b</span><span class="op" id="6488335">.</span><span class="ident" id="6488336">Max</span><span class="op" id="6488339">.</span><span class="ident" id="6488340">X</span><span class="op" id="6488341">;</span>&nbsp;<span class="ident" id="6488343">x</span><span class="op" id="6488344">++</span>&nbsp;<span class="op" id="6488347">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488352">got</span>&nbsp;<span class="op" id="6488356">:=</span>&nbsp;<span class="ident" id="6488359">dst</span><span class="op" id="6488362">.</span><span class="ident" id="6488363">Pix</span><span class="op" id="6488366">[</span><span class="ident" id="6488367">dst</span><span class="op" id="6488370">.</span><span class="ident" id="6488371">PixOffset</span><span class="op" id="6488380">(</span><span class="ident" id="6488381">x</span><span class="op" id="6488382">,</span>&nbsp;<span class="ident" id="6488384">y</span><span class="op" id="6488385">)</span><span class="op" id="6488386">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488391">want</span>&nbsp;<span class="op" id="6488396">:=</span>&nbsp;<span class="builtintype" id="6488399">uint8</span><span class="op" id="6488404">(</span><span class="ident" id="6488405">x</span><span class="op" id="6488406">+</span><span class="ident" id="6488407">y</span><span class="op" id="6488408">)</span>&nbsp;<span class="op" id="6488410">%</span>&nbsp;<span class="num" id="6488412">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488417">if</span>&nbsp;<span class="ident" id="6488420">got</span>&nbsp;<span class="op" id="6488424">!=</span>&nbsp;<span class="ident" id="6488427">want</span>&nbsp;<span class="op" id="6488432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488438">t</span><span class="op" id="6488439">.</span><span class="ident" id="6488440">Errorf</span><span class="op" id="6488446">(</span><span class="string" id="6488447">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6488477">,</span>&nbsp;<span class="ident" id="6488479">x</span><span class="op" id="6488480">,</span>&nbsp;<span class="ident" id="6488482">y</span><span class="op" id="6488483">,</span>&nbsp;<span class="ident" id="6488485">got</span><span class="op" id="6488488">,</span>&nbsp;<span class="ident" id="6488490">want</span><span class="op" id="6488494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488500">if</span>&nbsp;<span class="ident" id="6488503">nErr</span><span class="op" id="6488507">++</span><span class="op" id="6488509">;</span>&nbsp;<span class="ident" id="6488511">nErr</span>&nbsp;<span class="op" id="6488516">==</span>&nbsp;<span class="num" id="6488519">10</span>&nbsp;<span class="op" id="6488522">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488529">t</span><span class="op" id="6488530">.</span><span class="ident" id="6488531">Fatal</span><span class="op" id="6488536">(</span><span class="string" id="6488537">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="6488563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488581">}</span><br>
<span class="lineno">380</span><span class="op" id="6488583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6488586">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="6488665">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="6488697">type</span>&nbsp;<span class="ident" id="6488702">embeddedPaletted</span>&nbsp;<span class="keyword" id="6488719">struct</span>&nbsp;<span class="op" id="6488726">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488729">*</span><span class="ident" id="6488730">image</span><span class="op" id="6488735">.</span><span class="ident" id="6488736">Paletted</span><br>
<span class="lineno"></span><span class="op" id="6488745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6488748">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="6488818">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="6488870">func</span>&nbsp;<span class="ident" id="6488875">TestPaletted</span><span class="op" id="6488887">(</span><span class="ident" id="6488888">t</span>&nbsp;<span class="op" id="6488890">*</span><span class="ident" id="6488891">testing</span><span class="op" id="6488898">.</span><span class="ident" id="6488899">T</span><span class="op" id="6488900">)</span>&nbsp;<span class="op" id="6488902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488905">f</span><span class="op" id="6488906">,</span>&nbsp;<span class="ident" id="6488908">err</span>&nbsp;<span class="op" id="6488912">:=</span>&nbsp;<span class="ident" id="6488915">os</span><span class="op" id="6488917">.</span><span class="ident" id="6488918">Open</span><span class="op" id="6488922">(</span><span class="string" id="6488923">&#34;../testdata/video-001.png&#34;</span><span class="op" id="6488950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6488953">if</span>&nbsp;<span class="ident" id="6488956">err</span>&nbsp;<span class="op" id="6488960">!=</span>&nbsp;<span class="ident" id="6488963">nil</span>&nbsp;<span class="op" id="6488967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488971">t</span><span class="op" id="6488972">.</span><span class="ident" id="6488973">Fatalf</span><span class="op" id="6488979">(</span><span class="string" id="6488980">&#34;open:&nbsp;%v&#34;</span><span class="op" id="6488990">,</span>&nbsp;<span class="ident" id="6488992">err</span><span class="op" id="6488995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488998">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489001">defer</span>&nbsp;<span class="ident" id="6489007">f</span><span class="op" id="6489008">.</span><span class="ident" id="6489009">Close</span><span class="op" id="6489014">(</span><span class="op" id="6489015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489018">src</span><span class="op" id="6489021">,</span>&nbsp;<span class="ident" id="6489023">err</span>&nbsp;<span class="op" id="6489027">:=</span>&nbsp;<span class="ident" id="6489030">png</span><span class="op" id="6489033">.</span><span class="ident" id="6489034">Decode</span><span class="op" id="6489040">(</span><span class="ident" id="6489041">f</span><span class="op" id="6489042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489045">if</span>&nbsp;<span class="ident" id="6489048">err</span>&nbsp;<span class="op" id="6489052">!=</span>&nbsp;<span class="ident" id="6489055">nil</span>&nbsp;<span class="op" id="6489059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489063">t</span><span class="op" id="6489064">.</span><span class="ident" id="6489065">Fatalf</span><span class="op" id="6489071">(</span><span class="string" id="6489072">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6489084">,</span>&nbsp;<span class="ident" id="6489086">err</span><span class="op" id="6489089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489092">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489095">b</span>&nbsp;<span class="op" id="6489097">:=</span>&nbsp;<span class="ident" id="6489100">src</span><span class="op" id="6489103">.</span><span class="ident" id="6489104">Bounds</span><span class="op" id="6489110">(</span><span class="op" id="6489111">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489115">cgaPalette</span>&nbsp;<span class="op" id="6489126">:=</span>&nbsp;<span class="ident" id="6489129">color</span><span class="op" id="6489134">.</span><span class="ident" id="6489135">Palette</span><span class="op" id="6489142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489146">color</span><span class="op" id="6489151">.</span><span class="ident" id="6489152">RGBA</span><span class="op" id="6489156">{</span><span class="num" id="6489157">0x00</span><span class="op" id="6489161">,</span>&nbsp;<span class="num" id="6489163">0x00</span><span class="op" id="6489167">,</span>&nbsp;<span class="num" id="6489169">0x00</span><span class="op" id="6489173">,</span>&nbsp;<span class="num" id="6489175">0xff</span><span class="op" id="6489179">}</span><span class="op" id="6489180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489184">color</span><span class="op" id="6489189">.</span><span class="ident" id="6489190">RGBA</span><span class="op" id="6489194">{</span><span class="num" id="6489195">0x55</span><span class="op" id="6489199">,</span>&nbsp;<span class="num" id="6489201">0xff</span><span class="op" id="6489205">,</span>&nbsp;<span class="num" id="6489207">0xff</span><span class="op" id="6489211">,</span>&nbsp;<span class="num" id="6489213">0xff</span><span class="op" id="6489217">}</span><span class="op" id="6489218">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489222">color</span><span class="op" id="6489227">.</span><span class="ident" id="6489228">RGBA</span><span class="op" id="6489232">{</span><span class="num" id="6489233">0xff</span><span class="op" id="6489237">,</span>&nbsp;<span class="num" id="6489239">0x55</span><span class="op" id="6489243">,</span>&nbsp;<span class="num" id="6489245">0xff</span><span class="op" id="6489249">,</span>&nbsp;<span class="num" id="6489251">0xff</span><span class="op" id="6489255">}</span><span class="op" id="6489256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489260">color</span><span class="op" id="6489265">.</span><span class="ident" id="6489266">RGBA</span><span class="op" id="6489270">{</span><span class="num" id="6489271">0xff</span><span class="op" id="6489275">,</span>&nbsp;<span class="num" id="6489277">0xff</span><span class="op" id="6489281">,</span>&nbsp;<span class="num" id="6489283">0xff</span><span class="op" id="6489287">,</span>&nbsp;<span class="num" id="6489289">0xff</span><span class="op" id="6489293">}</span><span class="op" id="6489294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489300">drawers</span>&nbsp;<span class="op" id="6489308">:=</span>&nbsp;<span class="keyword" id="6489311">map</span><span class="op" id="6489314">[</span><span class="builtintype" id="6489315">string</span><span class="op" id="6489321">]</span><span class="ident" id="6489322">Drawer</span><span class="op" id="6489328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6489332">&#34;src&#34;</span><span class="op" id="6489337">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6489351">Src</span><span class="op" id="6489354">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6489358">&#34;floyd-steinberg&#34;</span><span class="op" id="6489375">:</span>&nbsp;<span class="ident" id="6489377">FloydSteinberg</span><span class="op" id="6489391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="6489397">loop</span><span class="op" id="6489401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489404">for</span>&nbsp;<span class="ident" id="6489408">dName</span><span class="op" id="6489413">,</span>&nbsp;<span class="ident" id="6489415">d</span>&nbsp;<span class="op" id="6489417">:=</span>&nbsp;<span class="keyword" id="6489420">range</span>&nbsp;<span class="ident" id="6489426">drawers</span>&nbsp;<span class="op" id="6489434">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489438">dst0</span>&nbsp;<span class="op" id="6489443">:=</span>&nbsp;<span class="ident" id="6489446">image</span><span class="op" id="6489451">.</span><span class="ident" id="6489452">NewPaletted</span><span class="op" id="6489463">(</span><span class="ident" id="6489464">b</span><span class="op" id="6489465">,</span>&nbsp;<span class="ident" id="6489467">cgaPalette</span><span class="op" id="6489477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489481">dst1</span>&nbsp;<span class="op" id="6489486">:=</span>&nbsp;<span class="ident" id="6489489">image</span><span class="op" id="6489494">.</span><span class="ident" id="6489495">NewPaletted</span><span class="op" id="6489506">(</span><span class="ident" id="6489507">b</span><span class="op" id="6489508">,</span>&nbsp;<span class="ident" id="6489510">cgaPalette</span><span class="op" id="6489520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489524">d</span><span class="op" id="6489525">.</span><span class="ident" id="6489526">Draw</span><span class="op" id="6489530">(</span><span class="ident" id="6489531">dst0</span><span class="op" id="6489535">,</span>&nbsp;<span class="ident" id="6489537">b</span><span class="op" id="6489538">,</span>&nbsp;<span class="ident" id="6489540">src</span><span class="op" id="6489543">,</span>&nbsp;<span class="ident" id="6489545">image</span><span class="op" id="6489550">.</span><span class="ident" id="6489551">Point</span><span class="op" id="6489556">{</span><span class="op" id="6489557">}</span><span class="op" id="6489558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489562">d</span><span class="op" id="6489563">.</span><span class="ident" id="6489564">Draw</span><span class="op" id="6489568">(</span><span class="ident" id="6489569">embeddedPaletted</span><span class="op" id="6489585">{</span><span class="ident" id="6489586">dst1</span><span class="op" id="6489590">}</span><span class="op" id="6489591">,</span>&nbsp;<span class="ident" id="6489593">b</span><span class="op" id="6489594">,</span>&nbsp;<span class="ident" id="6489596">src</span><span class="op" id="6489599">,</span>&nbsp;<span class="ident" id="6489601">image</span><span class="op" id="6489606">.</span><span class="ident" id="6489607">Point</span><span class="op" id="6489612">{</span><span class="op" id="6489613">}</span><span class="op" id="6489614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489618">for</span>&nbsp;<span class="ident" id="6489622">y</span>&nbsp;<span class="op" id="6489624">:=</span>&nbsp;<span class="ident" id="6489627">b</span><span class="op" id="6489628">.</span><span class="ident" id="6489629">Min</span><span class="op" id="6489632">.</span><span class="ident" id="6489633">Y</span><span class="op" id="6489634">;</span>&nbsp;<span class="ident" id="6489636">y</span>&nbsp;<span class="op" id="6489638">&lt;</span>&nbsp;<span class="ident" id="6489640">b</span><span class="op" id="6489641">.</span><span class="ident" id="6489642">Max</span><span class="op" id="6489645">.</span><span class="ident" id="6489646">Y</span><span class="op" id="6489647">;</span>&nbsp;<span class="ident" id="6489649">y</span><span class="op" id="6489650">++</span>&nbsp;<span class="op" id="6489653">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489658">for</span>&nbsp;<span class="ident" id="6489662">x</span>&nbsp;<span class="op" id="6489664">:=</span>&nbsp;<span class="ident" id="6489667">b</span><span class="op" id="6489668">.</span><span class="ident" id="6489669">Min</span><span class="op" id="6489672">.</span><span class="ident" id="6489673">X</span><span class="op" id="6489674">;</span>&nbsp;<span class="ident" id="6489676">x</span>&nbsp;<span class="op" id="6489678">&lt;</span>&nbsp;<span class="ident" id="6489680">b</span><span class="op" id="6489681">.</span><span class="ident" id="6489682">Max</span><span class="op" id="6489685">.</span><span class="ident" id="6489686">X</span><span class="op" id="6489687">;</span>&nbsp;<span class="ident" id="6489689">x</span><span class="op" id="6489690">++</span>&nbsp;<span class="op" id="6489693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489699">if</span>&nbsp;<span class="op" id="6489702">!</span><span class="ident" id="6489703">eq</span><span class="op" id="6489705">(</span><span class="ident" id="6489706">dst0</span><span class="op" id="6489710">.</span><span class="ident" id="6489711">At</span><span class="op" id="6489713">(</span><span class="ident" id="6489714">x</span><span class="op" id="6489715">,</span>&nbsp;<span class="ident" id="6489717">y</span><span class="op" id="6489718">)</span><span class="op" id="6489719">,</span>&nbsp;<span class="ident" id="6489721">dst1</span><span class="op" id="6489725">.</span><span class="ident" id="6489726">At</span><span class="op" id="6489728">(</span><span class="ident" id="6489729">x</span><span class="op" id="6489730">,</span>&nbsp;<span class="ident" id="6489732">y</span><span class="op" id="6489733">)</span><span class="op" id="6489734">)</span>&nbsp;<span class="op" id="6489736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489743">t</span><span class="op" id="6489744">.</span><span class="ident" id="6489745">Errorf</span><span class="op" id="6489751">(</span><span class="string" id="6489752">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6489783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489791">dName</span><span class="op" id="6489796">,</span>&nbsp;<span class="ident" id="6489798">x</span><span class="op" id="6489799">,</span>&nbsp;<span class="ident" id="6489801">y</span><span class="op" id="6489802">,</span>&nbsp;<span class="ident" id="6489804">dst0</span><span class="op" id="6489808">.</span><span class="ident" id="6489809">At</span><span class="op" id="6489811">(</span><span class="ident" id="6489812">x</span><span class="op" id="6489813">,</span>&nbsp;<span class="ident" id="6489815">y</span><span class="op" id="6489816">)</span><span class="op" id="6489817">,</span>&nbsp;<span class="ident" id="6489819">dst1</span><span class="op" id="6489823">.</span><span class="ident" id="6489824">At</span><span class="op" id="6489826">(</span><span class="ident" id="6489827">x</span><span class="op" id="6489828">,</span>&nbsp;<span class="ident" id="6489830">y</span><span class="op" id="6489831">)</span><span class="op" id="6489832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489839">continue</span>&nbsp;<span class="ident" id="6489848">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489869">}</span><br>
<span class="lineno"></span><span class="op" id="6489871">}</span>
</div>
</body>
</html>
