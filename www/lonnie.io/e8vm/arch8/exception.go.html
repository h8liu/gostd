<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="4861988">package</span>&nbsp;<span class="ident" id="4861996">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4862003">import</span>&nbsp;<span class="op" id="4862010">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4862013">&#34;errors&#34;</span><br>
<span class="lineno">5</span><span class="op" id="4862022">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4862025">//&nbsp;Excep&nbsp;defines&nbsp;an&nbsp;exception&nbsp;error&nbsp;with&nbsp;a&nbsp;code</span><br>
<span class="lineno"></span><span class="keyword" id="4862073">type</span>&nbsp;<span class="ident" id="4862078">Excep</span>&nbsp;<span class="keyword" id="4862084">struct</span>&nbsp;<span class="op" id="4862091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862094">Code</span>&nbsp;<span class="builtintype" id="4862099">byte</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862105">Arg</span>&nbsp;&nbsp;<span class="builtintype" id="4862110">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862118">Err</span>&nbsp;&nbsp;<span class="builtintype" id="4862123">error</span><br>
<span class="lineno"></span><span class="op" id="4862129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4862132">//&nbsp;NewExcep&nbsp;creates&nbsp;a&nbsp;new&nbsp;Exception&nbsp;with&nbsp;a&nbsp;particular&nbsp;code&nbsp;and&nbsp;message.</span><br>
<span class="lineno">15</span><span class="keyword" id="4862204">func</span>&nbsp;<span class="ident" id="4862209">newExcep</span><span class="op" id="4862217">(</span><span class="ident" id="4862218">c</span>&nbsp;<span class="builtintype" id="4862220">byte</span><span class="op" id="4862224">,</span>&nbsp;<span class="ident" id="4862226">s</span>&nbsp;<span class="builtintype" id="4862228">string</span><span class="op" id="4862234">)</span>&nbsp;<span class="op" id="4862236">*</span><span class="ident" id="4862237">Excep</span>&nbsp;<span class="op" id="4862243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862246">ret</span>&nbsp;<span class="op" id="4862250">:=</span>&nbsp;<span class="builtinfunc" id="4862253">new</span><span class="op" id="4862256">(</span><span class="ident" id="4862257">Excep</span><span class="op" id="4862262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862265">ret</span><span class="op" id="4862268">.</span><span class="ident" id="4862269">Code</span>&nbsp;<span class="op" id="4862274">=</span>&nbsp;<span class="ident" id="4862276">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862279">ret</span><span class="op" id="4862282">.</span><span class="ident" id="4862283">Err</span>&nbsp;<span class="op" id="4862287">=</span>&nbsp;<span class="ident" id="4862289">errors</span><span class="op" id="4862295">.</span><span class="ident" id="4862296">New</span><span class="op" id="4862299">(</span><span class="ident" id="4862300">s</span><span class="op" id="4862301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4862304">return</span>&nbsp;<span class="ident" id="4862311">ret</span><br>
<span class="lineno">20</span><span class="op" id="4862315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4862318">func</span>&nbsp;<span class="op" id="4862323">(</span><span class="ident" id="4862324">e</span>&nbsp;<span class="op" id="4862326">*</span><span class="ident" id="4862327">Excep</span><span class="op" id="4862332">)</span>&nbsp;<span class="ident" id="4862334">Error</span><span class="op" id="4862339">(</span><span class="op" id="4862340">)</span>&nbsp;<span class="builtintype" id="4862342">string</span>&nbsp;<span class="op" id="4862349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4862352">return</span>&nbsp;<span class="ident" id="4862359">e</span><span class="op" id="4862360">.</span><span class="ident" id="4862361">Err</span><span class="op" id="4862364">.</span><span class="ident" id="4862365">Error</span><span class="op" id="4862370">(</span><span class="op" id="4862371">)</span><br>
<span class="lineno"></span><span class="op" id="4862373">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="4862376">//&nbsp;Exception&nbsp;codes</span><br>
<span class="lineno"></span><span class="keyword" id="4862395">const</span>&nbsp;<span class="op" id="4862401">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862404">ErrHalt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4862420">=</span>&nbsp;<span class="num" id="4862422">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862425">ErrTimer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4862441">=</span>&nbsp;<span class="num" id="4862443">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862446">ErrInvalidInst</span>&nbsp;&nbsp;<span class="op" id="4862462">=</span>&nbsp;<span class="num" id="4862464">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862467">ErrOutOfRange</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4862483">=</span>&nbsp;<span class="num" id="4862485">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862488">ErrMisalign</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4862504">=</span>&nbsp;<span class="num" id="4862506">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862509">ErrPageFault</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4862525">=</span>&nbsp;<span class="num" id="4862527">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862530">ErrPageReadonly</span>&nbsp;<span class="op" id="4862546">=</span>&nbsp;<span class="num" id="4862548">7</span><br>
<span class="lineno">35</span><span class="op" id="4862550">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4862553">var</span>&nbsp;<span class="op" id="4862557">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862560">errHalt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4862575">=</span>&nbsp;<span class="ident" id="4862577">newExcep</span><span class="op" id="4862585">(</span><span class="ident" id="4862586">ErrHalt</span><span class="op" id="4862593">,</span>&nbsp;<span class="string" id="4862595">&#34;halt&#34;</span><span class="op" id="4862601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862604">errTimeInt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4862619">=</span>&nbsp;<span class="ident" id="4862621">newExcep</span><span class="op" id="4862629">(</span><span class="ident" id="4862630">ErrTimer</span><span class="op" id="4862638">,</span>&nbsp;<span class="string" id="4862640">&#34;time&nbsp;interrupt&#34;</span><span class="op" id="4862656">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862659">errInvalidInst</span>&nbsp;<span class="op" id="4862674">=</span>&nbsp;<span class="ident" id="4862676">newExcep</span><span class="op" id="4862684">(</span><span class="ident" id="4862685">ErrInvalidInst</span><span class="op" id="4862699">,</span>&nbsp;<span class="string" id="4862701">&#34;invalid&nbsp;instruction&#34;</span><span class="op" id="4862722">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862726">errOutOfRange</span>&nbsp;<span class="op" id="4862740">=</span>&nbsp;<span class="ident" id="4862742">newExcep</span><span class="op" id="4862750">(</span><span class="ident" id="4862751">ErrOutOfRange</span><span class="op" id="4862764">,</span>&nbsp;<span class="string" id="4862766">&#34;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="4862780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862783">errMisalign</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4862797">=</span>&nbsp;<span class="ident" id="4862799">newExcep</span><span class="op" id="4862807">(</span><span class="ident" id="4862808">ErrMisalign</span><span class="op" id="4862819">,</span>&nbsp;<span class="string" id="4862821">&#34;address&nbsp;misalign&#34;</span><span class="op" id="4862839">)</span><br>
<span class="lineno"></span><span class="op" id="4862841">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="4862844">func</span>&nbsp;<span class="ident" id="4862849">newPageFault</span><span class="op" id="4862861">(</span><span class="ident" id="4862862">va</span>&nbsp;<span class="builtintype" id="4862865">uint32</span><span class="op" id="4862871">)</span>&nbsp;<span class="op" id="4862873">*</span><span class="ident" id="4862874">Excep</span>&nbsp;<span class="op" id="4862880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862883">ret</span>&nbsp;<span class="op" id="4862887">:=</span>&nbsp;<span class="ident" id="4862890">newExcep</span><span class="op" id="4862898">(</span><span class="ident" id="4862899">ErrPageFault</span><span class="op" id="4862911">,</span>&nbsp;<span class="string" id="4862913">&#34;page&nbsp;fault&#34;</span><span class="op" id="4862925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862928">ret</span><span class="op" id="4862931">.</span><span class="ident" id="4862932">Arg</span>&nbsp;<span class="op" id="4862936">=</span>&nbsp;<span class="ident" id="4862938">va</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4862942">return</span>&nbsp;<span class="ident" id="4862949">ret</span><br>
<span class="lineno">50</span><span class="op" id="4862953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4862956">func</span>&nbsp;<span class="ident" id="4862961">newPageReadonly</span><span class="op" id="4862976">(</span><span class="ident" id="4862977">va</span>&nbsp;<span class="builtintype" id="4862980">uint32</span><span class="op" id="4862986">)</span>&nbsp;<span class="op" id="4862988">*</span><span class="ident" id="4862989">Excep</span>&nbsp;<span class="op" id="4862995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862998">ret</span>&nbsp;<span class="op" id="4863002">:=</span>&nbsp;<span class="ident" id="4863005">newExcep</span><span class="op" id="4863013">(</span><span class="ident" id="4863014">ErrPageReadonly</span><span class="op" id="4863029">,</span>&nbsp;<span class="string" id="4863031">&#34;page&nbsp;read-only&#34;</span><span class="op" id="4863047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863050">ret</span><span class="op" id="4863053">.</span><span class="ident" id="4863054">Arg</span>&nbsp;<span class="op" id="4863058">=</span>&nbsp;<span class="ident" id="4863060">va</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863064">return</span>&nbsp;<span class="ident" id="4863071">ret</span><br>
<span class="lineno"></span><span class="op" id="4863075">}</span>
</div>
</body>
</html>
