<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3125028">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3125083">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3125137">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3125188">package</span>&nbsp;<span class="ident" id="3125196">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3125201">import</span>&nbsp;<span class="op" id="3125208">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3125211">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3125224">&#34;sort&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3125231">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3125234">//&nbsp;DNSError&nbsp;represents&nbsp;a&nbsp;DNS&nbsp;lookup&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3125277">type</span>&nbsp;<span class="ident" id="3125282">DNSError</span>&nbsp;<span class="keyword" id="3125291">struct</span>&nbsp;<span class="op" id="3125298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3125301">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3125311">string</span>&nbsp;<span class="comment" id="3125318">//&nbsp;description&nbsp;of&nbsp;the&nbsp;error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3125347">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3125357">string</span>&nbsp;<span class="comment" id="3125364">//&nbsp;name&nbsp;looked&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3125384">Server</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3125394">string</span>&nbsp;<span class="comment" id="3125401">//&nbsp;server&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3125417">IsTimeout</span>&nbsp;<span class="builtintype" id="3125427">bool</span><br>
<span class="lineno"></span><span class="op" id="3125432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="3125435">func</span>&nbsp;<span class="op" id="3125440">(</span><span class="ident" id="3125441">e</span>&nbsp;<span class="op" id="3125443">*</span><span class="ident" id="3125444">DNSError</span><span class="op" id="3125452">)</span>&nbsp;<span class="ident" id="3125454">Error</span><span class="op" id="3125459">(</span><span class="op" id="3125460">)</span>&nbsp;<span class="builtintype" id="3125462">string</span>&nbsp;<span class="op" id="3125469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3125472">if</span>&nbsp;<span class="ident" id="3125475">e</span>&nbsp;<span class="op" id="3125477">==</span>&nbsp;<span class="ident" id="3125480">nil</span>&nbsp;<span class="op" id="3125484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3125488">return</span>&nbsp;<span class="string" id="3125495">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3125504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3125507">s</span>&nbsp;<span class="op" id="3125509">:=</span>&nbsp;<span class="string" id="3125512">&#34;lookup&nbsp;&#34;</span>&nbsp;<span class="op" id="3125522">+</span>&nbsp;<span class="ident" id="3125524">e</span><span class="op" id="3125525">.</span><span class="ident" id="3125526">Name</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3125532">if</span>&nbsp;<span class="ident" id="3125535">e</span><span class="op" id="3125536">.</span><span class="ident" id="3125537">Server</span>&nbsp;<span class="op" id="3125544">!=</span>&nbsp;<span class="string" id="3125547">&#34;&#34;</span>&nbsp;<span class="op" id="3125550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3125554">s</span>&nbsp;<span class="op" id="3125556">+=</span>&nbsp;<span class="string" id="3125559">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="3125566">+</span>&nbsp;<span class="ident" id="3125568">e</span><span class="op" id="3125569">.</span><span class="ident" id="3125570">Server</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3125578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3125581">s</span>&nbsp;<span class="op" id="3125583">+=</span>&nbsp;<span class="string" id="3125586">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3125591">+</span>&nbsp;<span class="ident" id="3125593">e</span><span class="op" id="3125594">.</span><span class="ident" id="3125595">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3125600">return</span>&nbsp;<span class="ident" id="3125607">s</span><br>
<span class="lineno">30</span><span class="op" id="3125609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3125612">func</span>&nbsp;<span class="op" id="3125617">(</span><span class="ident" id="3125618">e</span>&nbsp;<span class="op" id="3125620">*</span><span class="ident" id="3125621">DNSError</span><span class="op" id="3125629">)</span>&nbsp;<span class="ident" id="3125631">Timeout</span><span class="op" id="3125638">(</span><span class="op" id="3125639">)</span>&nbsp;<span class="builtintype" id="3125641">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3125648">{</span>&nbsp;<span class="keyword" id="3125650">return</span>&nbsp;<span class="ident" id="3125657">e</span><span class="op" id="3125658">.</span><span class="ident" id="3125659">IsTimeout</span>&nbsp;<span class="op" id="3125669">}</span><br>
<span class="lineno"></span><span class="keyword" id="3125671">func</span>&nbsp;<span class="op" id="3125676">(</span><span class="ident" id="3125677">e</span>&nbsp;<span class="op" id="3125679">*</span><span class="ident" id="3125680">DNSError</span><span class="op" id="3125688">)</span>&nbsp;<span class="ident" id="3125690">Temporary</span><span class="op" id="3125699">(</span><span class="op" id="3125700">)</span>&nbsp;<span class="builtintype" id="3125702">bool</span>&nbsp;<span class="op" id="3125707">{</span>&nbsp;<span class="keyword" id="3125709">return</span>&nbsp;<span class="ident" id="3125716">e</span><span class="op" id="3125717">.</span><span class="ident" id="3125718">IsTimeout</span>&nbsp;<span class="op" id="3125728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="3125731">const</span>&nbsp;<span class="ident" id="3125737">noSuchHost</span>&nbsp;<span class="op" id="3125748">=</span>&nbsp;<span class="string" id="3125750">&#34;no&nbsp;such&nbsp;host&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3125766">//&nbsp;reverseaddr&nbsp;returns&nbsp;the&nbsp;in-addr.arpa.&nbsp;or&nbsp;ip6.arpa.&nbsp;hostname&nbsp;of&nbsp;the&nbsp;IP</span><br>
<span class="lineno"></span><span class="comment" id="3125839">//&nbsp;address&nbsp;addr&nbsp;suitable&nbsp;for&nbsp;rDNS&nbsp;(PTR)&nbsp;record&nbsp;lookup&nbsp;or&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;fails</span><br>
<span class="lineno"></span><span class="comment" id="3125917">//&nbsp;to&nbsp;parse&nbsp;the&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">40</span><span class="keyword" id="3125945">func</span>&nbsp;<span class="ident" id="3125950">reverseaddr</span><span class="op" id="3125961">(</span><span class="ident" id="3125962">addr</span>&nbsp;<span class="builtintype" id="3125967">string</span><span class="op" id="3125973">)</span>&nbsp;<span class="op" id="3125975">(</span><span class="ident" id="3125976">arpa</span>&nbsp;<span class="builtintype" id="3125981">string</span><span class="op" id="3125987">,</span>&nbsp;<span class="ident" id="3125989">err</span>&nbsp;<span class="builtintype" id="3125993">error</span><span class="op" id="3125998">)</span>&nbsp;<span class="op" id="3126000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3126003">ip</span>&nbsp;<span class="op" id="3126006">:=</span>&nbsp;<span class="ident" id="3126009">ParseIP</span><span class="op" id="3126016">(</span><span class="ident" id="3126017">addr</span><span class="op" id="3126021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3126024">if</span>&nbsp;<span class="ident" id="3126027">ip</span>&nbsp;<span class="op" id="3126030">==</span>&nbsp;<span class="ident" id="3126033">nil</span>&nbsp;<span class="op" id="3126037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3126041">return</span>&nbsp;<span class="string" id="3126048">&#34;&#34;</span><span class="op" id="3126050">,</span>&nbsp;<span class="op" id="3126052">&amp;</span><span class="ident" id="3126053">DNSError</span><span class="op" id="3126061">{</span><span class="ident" id="3126062">Err</span><span class="op" id="3126065">:</span>&nbsp;<span class="string" id="3126067">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="3126089">,</span>&nbsp;<span class="ident" id="3126091">Name</span><span class="op" id="3126095">:</span>&nbsp;<span class="ident" id="3126097">addr</span><span class="op" id="3126101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3126104">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3126107">if</span>&nbsp;<span class="ident" id="3126110">ip</span><span class="op" id="3126112">.</span><span class="ident" id="3126113">To4</span><span class="op" id="3126116">(</span><span class="op" id="3126117">)</span>&nbsp;<span class="op" id="3126119">!=</span>&nbsp;<span class="ident" id="3126122">nil</span>&nbsp;<span class="op" id="3126126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3126130">return</span>&nbsp;<span class="ident" id="3126137">itoa</span><span class="op" id="3126141">(</span><span class="builtintype" id="3126142">int</span><span class="op" id="3126145">(</span><span class="ident" id="3126146">ip</span><span class="op" id="3126148">[</span><span class="num" id="3126149">15</span><span class="op" id="3126151">]</span><span class="op" id="3126152">)</span><span class="op" id="3126153">)</span>&nbsp;<span class="op" id="3126155">+</span>&nbsp;<span class="string" id="3126157">&#34;.&#34;</span>&nbsp;<span class="op" id="3126161">+</span>&nbsp;<span class="ident" id="3126163">itoa</span><span class="op" id="3126167">(</span><span class="builtintype" id="3126168">int</span><span class="op" id="3126171">(</span><span class="ident" id="3126172">ip</span><span class="op" id="3126174">[</span><span class="num" id="3126175">14</span><span class="op" id="3126177">]</span><span class="op" id="3126178">)</span><span class="op" id="3126179">)</span>&nbsp;<span class="op" id="3126181">+</span>&nbsp;<span class="string" id="3126183">&#34;.&#34;</span>&nbsp;<span class="op" id="3126187">+</span>&nbsp;<span class="ident" id="3126189">itoa</span><span class="op" id="3126193">(</span><span class="builtintype" id="3126194">int</span><span class="op" id="3126197">(</span><span class="ident" id="3126198">ip</span><span class="op" id="3126200">[</span><span class="num" id="3126201">13</span><span class="op" id="3126203">]</span><span class="op" id="3126204">)</span><span class="op" id="3126205">)</span>&nbsp;<span class="op" id="3126207">+</span>&nbsp;<span class="string" id="3126209">&#34;.&#34;</span>&nbsp;<span class="op" id="3126213">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3126218">itoa</span><span class="op" id="3126222">(</span><span class="builtintype" id="3126223">int</span><span class="op" id="3126226">(</span><span class="ident" id="3126227">ip</span><span class="op" id="3126229">[</span><span class="num" id="3126230">12</span><span class="op" id="3126232">]</span><span class="op" id="3126233">)</span><span class="op" id="3126234">)</span>&nbsp;<span class="op" id="3126236">+</span>&nbsp;<span class="string" id="3126238">&#34;.in-addr.arpa.&#34;</span><span class="op" id="3126254">,</span>&nbsp;<span class="ident" id="3126256">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3126261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3126264">//&nbsp;Must&nbsp;be&nbsp;IPv6</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3126281">buf</span>&nbsp;<span class="op" id="3126285">:=</span>&nbsp;<span class="builtinfunc" id="3126288">make</span><span class="op" id="3126292">(</span><span class="op" id="3126293">[</span><span class="op" id="3126294">]</span><span class="builtintype" id="3126295">byte</span><span class="op" id="3126299">,</span>&nbsp;<span class="num" id="3126301">0</span><span class="op" id="3126302">,</span>&nbsp;<span class="builtinfunc" id="3126304">len</span><span class="op" id="3126307">(</span><span class="ident" id="3126308">ip</span><span class="op" id="3126310">)</span><span class="op" id="3126311">*</span><span class="num" id="3126312">4</span><span class="op" id="3126313">+</span><span class="builtinfunc" id="3126314">len</span><span class="op" id="3126317">(</span><span class="string" id="3126318">&#34;ip6.arpa.&#34;</span><span class="op" id="3126329">)</span><span class="op" id="3126330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3126333">//&nbsp;Add&nbsp;it,&nbsp;in&nbsp;reverse,&nbsp;to&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3126371">for</span>&nbsp;<span class="ident" id="3126375">i</span>&nbsp;<span class="op" id="3126377">:=</span>&nbsp;<span class="builtinfunc" id="3126380">len</span><span class="op" id="3126383">(</span><span class="ident" id="3126384">ip</span><span class="op" id="3126386">)</span>&nbsp;<span class="op" id="3126388">-</span>&nbsp;<span class="num" id="3126390">1</span><span class="op" id="3126391">;</span>&nbsp;<span class="ident" id="3126393">i</span>&nbsp;<span class="op" id="3126395">&gt;=</span>&nbsp;<span class="num" id="3126398">0</span><span class="op" id="3126399">;</span>&nbsp;<span class="ident" id="3126401">i</span><span class="op" id="3126402">--</span>&nbsp;<span class="op" id="3126405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3126409">v</span>&nbsp;<span class="op" id="3126411">:=</span>&nbsp;<span class="ident" id="3126414">ip</span><span class="op" id="3126416">[</span><span class="ident" id="3126417">i</span><span class="op" id="3126418">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3126422">buf</span>&nbsp;<span class="op" id="3126426">=</span>&nbsp;<span class="builtinfunc" id="3126428">append</span><span class="op" id="3126434">(</span><span class="ident" id="3126435">buf</span><span class="op" id="3126438">,</span>&nbsp;<span class="ident" id="3126440">hexDigit</span><span class="op" id="3126448">[</span><span class="ident" id="3126449">v</span><span class="op" id="3126450">&amp;</span><span class="num" id="3126451">0xF</span><span class="op" id="3126454">]</span><span class="op" id="3126455">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3126459">buf</span>&nbsp;<span class="op" id="3126463">=</span>&nbsp;<span class="builtinfunc" id="3126465">append</span><span class="op" id="3126471">(</span><span class="ident" id="3126472">buf</span><span class="op" id="3126475">,</span>&nbsp;<span class="string" id="3126477">&#39;.&#39;</span><span class="op" id="3126480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3126484">buf</span>&nbsp;<span class="op" id="3126488">=</span>&nbsp;<span class="builtinfunc" id="3126490">append</span><span class="op" id="3126496">(</span><span class="ident" id="3126497">buf</span><span class="op" id="3126500">,</span>&nbsp;<span class="ident" id="3126502">hexDigit</span><span class="op" id="3126510">[</span><span class="ident" id="3126511">v</span><span class="op" id="3126512">&gt;&gt;</span><span class="num" id="3126514">4</span><span class="op" id="3126515">]</span><span class="op" id="3126516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3126520">buf</span>&nbsp;<span class="op" id="3126524">=</span>&nbsp;<span class="builtinfunc" id="3126526">append</span><span class="op" id="3126532">(</span><span class="ident" id="3126533">buf</span><span class="op" id="3126536">,</span>&nbsp;<span class="string" id="3126538">&#39;.&#39;</span><span class="op" id="3126541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3126544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3126547">//&nbsp;Append&nbsp;&#34;ip6.arpa.&#34;&nbsp;and&nbsp;return&nbsp;(buf&nbsp;already&nbsp;has&nbsp;the&nbsp;final&nbsp;.)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3126611">buf</span>&nbsp;<span class="op" id="3126615">=</span>&nbsp;<span class="builtinfunc" id="3126617">append</span><span class="op" id="3126623">(</span><span class="ident" id="3126624">buf</span><span class="op" id="3126627">,</span>&nbsp;<span class="string" id="3126629">&#34;ip6.arpa.&#34;</span><span class="op" id="3126640">...</span><span class="op" id="3126643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3126646">return</span>&nbsp;<span class="builtintype" id="3126653">string</span><span class="op" id="3126659">(</span><span class="ident" id="3126660">buf</span><span class="op" id="3126663">)</span><span class="op" id="3126664">,</span>&nbsp;<span class="ident" id="3126666">nil</span><br>
<span class="lineno"></span><span class="op" id="3126670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3126673">//&nbsp;Find&nbsp;answer&nbsp;for&nbsp;name&nbsp;in&nbsp;dns&nbsp;message.</span><br>
<span class="lineno">65</span><span class="comment" id="3126713">//&nbsp;On&nbsp;return,&nbsp;if&nbsp;err&nbsp;==&nbsp;nil,&nbsp;addrs&nbsp;!=&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3126756">func</span>&nbsp;<span class="ident" id="3126761">answer</span><span class="op" id="3126767">(</span><span class="ident" id="3126768">name</span><span class="op" id="3126772">,</span>&nbsp;<span class="ident" id="3126774">server</span>&nbsp;<span class="builtintype" id="3126781">string</span><span class="op" id="3126787">,</span>&nbsp;<span class="ident" id="3126789">dns</span>&nbsp;<span class="op" id="3126793">*</span><span class="ident" id="3126794">dnsMsg</span><span class="op" id="3126800">,</span>&nbsp;<span class="ident" id="3126802">qtype</span>&nbsp;<span class="builtintype" id="3126808">uint16</span><span class="op" id="3126814">)</span>&nbsp;<span class="op" id="3126816">(</span><span class="ident" id="3126817">cname</span>&nbsp;<span class="builtintype" id="3126823">string</span><span class="op" id="3126829">,</span>&nbsp;<span class="ident" id="3126831">addrs</span>&nbsp;<span class="op" id="3126837">[</span><span class="op" id="3126838">]</span><span class="ident" id="3126839">dnsRR</span><span class="op" id="3126844">,</span>&nbsp;<span class="ident" id="3126846">err</span>&nbsp;<span class="builtintype" id="3126850">error</span><span class="op" id="3126855">)</span>&nbsp;<span class="op" id="3126857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3126860">addrs</span>&nbsp;<span class="op" id="3126866">=</span>&nbsp;<span class="builtinfunc" id="3126868">make</span><span class="op" id="3126872">(</span><span class="op" id="3126873">[</span><span class="op" id="3126874">]</span><span class="ident" id="3126875">dnsRR</span><span class="op" id="3126880">,</span>&nbsp;<span class="num" id="3126882">0</span><span class="op" id="3126883">,</span>&nbsp;<span class="builtinfunc" id="3126885">len</span><span class="op" id="3126888">(</span><span class="ident" id="3126889">dns</span><span class="op" id="3126892">.</span><span class="ident" id="3126893">answer</span><span class="op" id="3126899">)</span><span class="op" id="3126900">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3126904">if</span>&nbsp;<span class="ident" id="3126907">dns</span><span class="op" id="3126910">.</span><span class="ident" id="3126911">rcode</span>&nbsp;<span class="op" id="3126917">==</span>&nbsp;<span class="ident" id="3126920">dnsRcodeNameError</span>&nbsp;<span class="op" id="3126938">&amp;&amp;</span>&nbsp;<span class="ident" id="3126941">dns</span><span class="op" id="3126944">.</span><span class="ident" id="3126945">recursion_available</span>&nbsp;<span class="op" id="3126965">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3126969">return</span>&nbsp;<span class="string" id="3126976">&#34;&#34;</span><span class="op" id="3126978">,</span>&nbsp;<span class="ident" id="3126980">nil</span><span class="op" id="3126983">,</span>&nbsp;<span class="op" id="3126985">&amp;</span><span class="ident" id="3126986">DNSError</span><span class="op" id="3126994">{</span><span class="ident" id="3126995">Err</span><span class="op" id="3126998">:</span>&nbsp;<span class="ident" id="3127000">noSuchHost</span><span class="op" id="3127010">,</span>&nbsp;<span class="ident" id="3127012">Name</span><span class="op" id="3127016">:</span>&nbsp;<span class="ident" id="3127018">name</span><span class="op" id="3127022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3127025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3127028">if</span>&nbsp;<span class="ident" id="3127031">dns</span><span class="op" id="3127034">.</span><span class="ident" id="3127035">rcode</span>&nbsp;<span class="op" id="3127041">!=</span>&nbsp;<span class="ident" id="3127044">dnsRcodeSuccess</span>&nbsp;<span class="op" id="3127060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127064">//&nbsp;None&nbsp;of&nbsp;the&nbsp;error&nbsp;codes&nbsp;make&nbsp;sense</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127104">//&nbsp;for&nbsp;the&nbsp;query&nbsp;we&nbsp;sent.&nbsp;&nbsp;If&nbsp;we&nbsp;didn&#39;t&nbsp;get</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127150">//&nbsp;a&nbsp;name&nbsp;error&nbsp;and&nbsp;we&nbsp;didn&#39;t&nbsp;get&nbsp;success,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127195">//&nbsp;the&nbsp;server&nbsp;is&nbsp;behaving&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3127236">return</span>&nbsp;<span class="string" id="3127243">&#34;&#34;</span><span class="op" id="3127245">,</span>&nbsp;<span class="ident" id="3127247">nil</span><span class="op" id="3127250">,</span>&nbsp;<span class="op" id="3127252">&amp;</span><span class="ident" id="3127253">DNSError</span><span class="op" id="3127261">{</span><span class="ident" id="3127262">Err</span><span class="op" id="3127265">:</span>&nbsp;<span class="string" id="3127267">&#34;server&nbsp;misbehaving&#34;</span><span class="op" id="3127287">,</span>&nbsp;<span class="ident" id="3127289">Name</span><span class="op" id="3127293">:</span>&nbsp;<span class="ident" id="3127295">name</span><span class="op" id="3127299">,</span>&nbsp;<span class="ident" id="3127301">Server</span><span class="op" id="3127307">:</span>&nbsp;<span class="ident" id="3127309">server</span><span class="op" id="3127315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3127318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127322">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127345">//&nbsp;Presotto&nbsp;says&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;assume&nbsp;that&nbsp;servers&nbsp;listed&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127406">//&nbsp;/etc/resolv.conf&nbsp;are&nbsp;recursive&nbsp;resolvers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127452">//&nbsp;We&nbsp;asked&nbsp;for&nbsp;recursion,&nbsp;so&nbsp;it&nbsp;should&nbsp;have&nbsp;included</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127507">//&nbsp;all&nbsp;the&nbsp;answers&nbsp;we&nbsp;need&nbsp;in&nbsp;this&nbsp;one&nbsp;packet.</span><br>
<span class="lineno">85</span><span class="ident" id="3127554">Cname</span><span class="op" id="3127559">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3127562">for</span>&nbsp;<span class="ident" id="3127566">cnameloop</span>&nbsp;<span class="op" id="3127576">:=</span>&nbsp;<span class="num" id="3127579">0</span><span class="op" id="3127580">;</span>&nbsp;<span class="ident" id="3127582">cnameloop</span>&nbsp;<span class="op" id="3127592">&lt;</span>&nbsp;<span class="num" id="3127594">10</span><span class="op" id="3127596">;</span>&nbsp;<span class="ident" id="3127598">cnameloop</span><span class="op" id="3127607">++</span>&nbsp;<span class="op" id="3127610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3127614">addrs</span>&nbsp;<span class="op" id="3127620">=</span>&nbsp;<span class="ident" id="3127622">addrs</span><span class="op" id="3127627">[</span><span class="num" id="3127628">0</span><span class="op" id="3127629">:</span><span class="num" id="3127630">0</span><span class="op" id="3127631">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3127635">for</span>&nbsp;<span class="ident" id="3127639">_</span><span class="op" id="3127640">,</span>&nbsp;<span class="ident" id="3127642">rr</span>&nbsp;<span class="op" id="3127645">:=</span>&nbsp;<span class="keyword" id="3127648">range</span>&nbsp;<span class="ident" id="3127654">dns</span><span class="op" id="3127657">.</span><span class="ident" id="3127658">answer</span>&nbsp;<span class="op" id="3127665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3127670">if</span>&nbsp;<span class="ident" id="3127673">_</span><span class="op" id="3127674">,</span>&nbsp;<span class="ident" id="3127676">justHeader</span>&nbsp;<span class="op" id="3127687">:=</span>&nbsp;<span class="ident" id="3127690">rr</span><span class="op" id="3127692">.</span><span class="op" id="3127693">(</span><span class="op" id="3127694">*</span><span class="ident" id="3127695">dnsRR_Header</span><span class="op" id="3127707">)</span><span class="op" id="3127708">;</span>&nbsp;<span class="ident" id="3127710">justHeader</span>&nbsp;<span class="op" id="3127721">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127727">//&nbsp;Corrupt&nbsp;record:&nbsp;we&nbsp;only&nbsp;have&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127765">//&nbsp;header.&nbsp;That&nbsp;header&nbsp;might&nbsp;say&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127807">//&nbsp;of&nbsp;type&nbsp;qtype,&nbsp;but&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3127842">//&nbsp;actually&nbsp;have&nbsp;it.&nbsp;Skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3127873">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3127885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3127890">h</span>&nbsp;<span class="op" id="3127892">:=</span>&nbsp;<span class="ident" id="3127895">rr</span><span class="op" id="3127897">.</span><span class="ident" id="3127898">Header</span><span class="op" id="3127904">(</span><span class="op" id="3127905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3127910">if</span>&nbsp;<span class="ident" id="3127913">h</span><span class="op" id="3127914">.</span><span class="ident" id="3127915">Class</span>&nbsp;<span class="op" id="3127921">==</span>&nbsp;<span class="ident" id="3127924">dnsClassINET</span>&nbsp;<span class="op" id="3127937">&amp;&amp;</span>&nbsp;<span class="ident" id="3127940">h</span><span class="op" id="3127941">.</span><span class="ident" id="3127942">Name</span>&nbsp;<span class="op" id="3127947">==</span>&nbsp;<span class="ident" id="3127950">name</span>&nbsp;<span class="op" id="3127955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3127961">switch</span>&nbsp;<span class="ident" id="3127968">h</span><span class="op" id="3127969">.</span><span class="ident" id="3127970">Rrtype</span>&nbsp;<span class="op" id="3127977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3127983">case</span>&nbsp;<span class="ident" id="3127988">qtype</span><span class="op" id="3127993">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3128000">addrs</span>&nbsp;<span class="op" id="3128006">=</span>&nbsp;<span class="builtinfunc" id="3128008">append</span><span class="op" id="3128014">(</span><span class="ident" id="3128015">addrs</span><span class="op" id="3128020">,</span>&nbsp;<span class="ident" id="3128022">rr</span><span class="op" id="3128024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128030">case</span>&nbsp;<span class="ident" id="3128035">dnsTypeCNAME</span><span class="op" id="3128047">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3128054">//&nbsp;redirect&nbsp;to&nbsp;cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3128080">name</span>&nbsp;<span class="op" id="3128085">=</span>&nbsp;<span class="ident" id="3128087">rr</span><span class="op" id="3128089">.</span><span class="op" id="3128090">(</span><span class="op" id="3128091">*</span><span class="ident" id="3128092">dnsRR_CNAME</span><span class="op" id="3128103">)</span><span class="op" id="3128104">.</span><span class="ident" id="3128105">Cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128116">continue</span>&nbsp;<span class="ident" id="3128125">Cname</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3128135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3128140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3128144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128148">if</span>&nbsp;<span class="builtinfunc" id="3128151">len</span><span class="op" id="3128154">(</span><span class="ident" id="3128155">addrs</span><span class="op" id="3128160">)</span>&nbsp;<span class="op" id="3128162">==</span>&nbsp;<span class="num" id="3128165">0</span>&nbsp;<span class="op" id="3128167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128172">return</span>&nbsp;<span class="string" id="3128179">&#34;&#34;</span><span class="op" id="3128181">,</span>&nbsp;<span class="ident" id="3128183">nil</span><span class="op" id="3128186">,</span>&nbsp;<span class="op" id="3128188">&amp;</span><span class="ident" id="3128189">DNSError</span><span class="op" id="3128197">{</span><span class="ident" id="3128198">Err</span><span class="op" id="3128201">:</span>&nbsp;<span class="ident" id="3128203">noSuchHost</span><span class="op" id="3128213">,</span>&nbsp;<span class="ident" id="3128215">Name</span><span class="op" id="3128219">:</span>&nbsp;<span class="ident" id="3128221">name</span><span class="op" id="3128225">,</span>&nbsp;<span class="ident" id="3128227">Server</span><span class="op" id="3128233">:</span>&nbsp;<span class="ident" id="3128235">server</span><span class="op" id="3128241">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3128245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128249">return</span>&nbsp;<span class="ident" id="3128256">name</span><span class="op" id="3128260">,</span>&nbsp;<span class="ident" id="3128262">addrs</span><span class="op" id="3128267">,</span>&nbsp;<span class="ident" id="3128269">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3128274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128278">return</span>&nbsp;<span class="string" id="3128285">&#34;&#34;</span><span class="op" id="3128287">,</span>&nbsp;<span class="ident" id="3128289">nil</span><span class="op" id="3128292">,</span>&nbsp;<span class="op" id="3128294">&amp;</span><span class="ident" id="3128295">DNSError</span><span class="op" id="3128303">{</span><span class="ident" id="3128304">Err</span><span class="op" id="3128307">:</span>&nbsp;<span class="string" id="3128309">&#34;too&nbsp;many&nbsp;redirects&#34;</span><span class="op" id="3128329">,</span>&nbsp;<span class="ident" id="3128331">Name</span><span class="op" id="3128335">:</span>&nbsp;<span class="ident" id="3128337">name</span><span class="op" id="3128341">,</span>&nbsp;<span class="ident" id="3128343">Server</span><span class="op" id="3128349">:</span>&nbsp;<span class="ident" id="3128351">server</span><span class="op" id="3128357">}</span><br>
<span class="lineno">115</span><span class="op" id="3128359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3128362">func</span>&nbsp;<span class="ident" id="3128367">isDomainName</span><span class="op" id="3128379">(</span><span class="ident" id="3128380">s</span>&nbsp;<span class="builtintype" id="3128382">string</span><span class="op" id="3128388">)</span>&nbsp;<span class="builtintype" id="3128390">bool</span>&nbsp;<span class="op" id="3128395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3128398">//&nbsp;See&nbsp;RFC&nbsp;1035,&nbsp;RFC&nbsp;3696.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128426">if</span>&nbsp;<span class="builtinfunc" id="3128429">len</span><span class="op" id="3128432">(</span><span class="ident" id="3128433">s</span><span class="op" id="3128434">)</span>&nbsp;<span class="op" id="3128436">==</span>&nbsp;<span class="num" id="3128439">0</span>&nbsp;<span class="op" id="3128441">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128445">return</span>&nbsp;<span class="builtintype" id="3128452">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3128459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128462">if</span>&nbsp;<span class="builtinfunc" id="3128465">len</span><span class="op" id="3128468">(</span><span class="ident" id="3128469">s</span><span class="op" id="3128470">)</span>&nbsp;<span class="op" id="3128472">&gt;</span>&nbsp;<span class="num" id="3128474">255</span>&nbsp;<span class="op" id="3128478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128482">return</span>&nbsp;<span class="builtintype" id="3128489">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3128496">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3128500">last</span>&nbsp;<span class="op" id="3128505">:=</span>&nbsp;<span class="builtintype" id="3128508">byte</span><span class="op" id="3128512">(</span><span class="string" id="3128513">&#39;.&#39;</span><span class="op" id="3128516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3128519">ok</span>&nbsp;<span class="op" id="3128522">:=</span>&nbsp;<span class="builtintype" id="3128525">false</span>&nbsp;<span class="comment" id="3128531">//&nbsp;Ok&nbsp;once&nbsp;we&#39;ve&nbsp;seen&nbsp;a&nbsp;letter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3128564">partlen</span>&nbsp;<span class="op" id="3128572">:=</span>&nbsp;<span class="num" id="3128575">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128578">for</span>&nbsp;<span class="ident" id="3128582">i</span>&nbsp;<span class="op" id="3128584">:=</span>&nbsp;<span class="num" id="3128587">0</span><span class="op" id="3128588">;</span>&nbsp;<span class="ident" id="3128590">i</span>&nbsp;<span class="op" id="3128592">&lt;</span>&nbsp;<span class="builtinfunc" id="3128594">len</span><span class="op" id="3128597">(</span><span class="ident" id="3128598">s</span><span class="op" id="3128599">)</span><span class="op" id="3128600">;</span>&nbsp;<span class="ident" id="3128602">i</span><span class="op" id="3128603">++</span>&nbsp;<span class="op" id="3128606">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3128610">c</span>&nbsp;<span class="op" id="3128612">:=</span>&nbsp;<span class="ident" id="3128615">s</span><span class="op" id="3128616">[</span><span class="ident" id="3128617">i</span><span class="op" id="3128618">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128622">switch</span>&nbsp;<span class="op" id="3128629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128633">default</span><span class="op" id="3128640">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128645">return</span>&nbsp;<span class="builtintype" id="3128652">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128660">case</span>&nbsp;<span class="string" id="3128665">&#39;a&#39;</span>&nbsp;<span class="op" id="3128669">&lt;=</span>&nbsp;<span class="ident" id="3128672">c</span>&nbsp;<span class="op" id="3128674">&amp;&amp;</span>&nbsp;<span class="ident" id="3128677">c</span>&nbsp;<span class="op" id="3128679">&lt;=</span>&nbsp;<span class="string" id="3128682">&#39;z&#39;</span>&nbsp;<span class="op" id="3128686">||</span>&nbsp;<span class="string" id="3128689">&#39;A&#39;</span>&nbsp;<span class="op" id="3128693">&lt;=</span>&nbsp;<span class="ident" id="3128696">c</span>&nbsp;<span class="op" id="3128698">&amp;&amp;</span>&nbsp;<span class="ident" id="3128701">c</span>&nbsp;<span class="op" id="3128703">&lt;=</span>&nbsp;<span class="string" id="3128706">&#39;Z&#39;</span>&nbsp;<span class="op" id="3128710">||</span>&nbsp;<span class="ident" id="3128713">c</span>&nbsp;<span class="op" id="3128715">==</span>&nbsp;<span class="string" id="3128718">&#39;_&#39;</span><span class="op" id="3128721">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3128726">ok</span>&nbsp;<span class="op" id="3128729">=</span>&nbsp;<span class="builtintype" id="3128731">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3128739">partlen</span><span class="op" id="3128746">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128751">case</span>&nbsp;<span class="string" id="3128756">&#39;0&#39;</span>&nbsp;<span class="op" id="3128760">&lt;=</span>&nbsp;<span class="ident" id="3128763">c</span>&nbsp;<span class="op" id="3128765">&amp;&amp;</span>&nbsp;<span class="ident" id="3128768">c</span>&nbsp;<span class="op" id="3128770">&lt;=</span>&nbsp;<span class="string" id="3128773">&#39;9&#39;</span><span class="op" id="3128776">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3128781">//&nbsp;fine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3128792">partlen</span><span class="op" id="3128799">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128804">case</span>&nbsp;<span class="ident" id="3128809">c</span>&nbsp;<span class="op" id="3128811">==</span>&nbsp;<span class="string" id="3128814">&#39;-&#39;</span><span class="op" id="3128817">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3128822">//&nbsp;Byte&nbsp;before&nbsp;dash&nbsp;cannot&nbsp;be&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128860">if</span>&nbsp;<span class="ident" id="3128863">last</span>&nbsp;<span class="op" id="3128868">==</span>&nbsp;<span class="string" id="3128871">&#39;.&#39;</span>&nbsp;<span class="op" id="3128875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128881">return</span>&nbsp;<span class="builtintype" id="3128888">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3128897">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3128902">partlen</span><span class="op" id="3128909">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128914">case</span>&nbsp;<span class="ident" id="3128919">c</span>&nbsp;<span class="op" id="3128921">==</span>&nbsp;<span class="string" id="3128924">&#39;.&#39;</span><span class="op" id="3128927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3128932">//&nbsp;Byte&nbsp;before&nbsp;dot&nbsp;cannot&nbsp;be&nbsp;dot,&nbsp;dash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3128975">if</span>&nbsp;<span class="ident" id="3128978">last</span>&nbsp;<span class="op" id="3128983">==</span>&nbsp;<span class="string" id="3128986">&#39;.&#39;</span>&nbsp;<span class="op" id="3128990">||</span>&nbsp;<span class="ident" id="3128993">last</span>&nbsp;<span class="op" id="3128998">==</span>&nbsp;<span class="string" id="3129001">&#39;-&#39;</span>&nbsp;<span class="op" id="3129005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3129011">return</span>&nbsp;<span class="builtintype" id="3129018">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3129027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3129032">if</span>&nbsp;<span class="ident" id="3129035">partlen</span>&nbsp;<span class="op" id="3129043">&gt;</span>&nbsp;<span class="num" id="3129045">63</span>&nbsp;<span class="op" id="3129048">||</span>&nbsp;<span class="ident" id="3129051">partlen</span>&nbsp;<span class="op" id="3129059">==</span>&nbsp;<span class="num" id="3129062">0</span>&nbsp;<span class="op" id="3129064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3129070">return</span>&nbsp;<span class="builtintype" id="3129077">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3129086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3129091">partlen</span>&nbsp;<span class="op" id="3129099">=</span>&nbsp;<span class="num" id="3129101">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3129105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3129109">last</span>&nbsp;<span class="op" id="3129114">=</span>&nbsp;<span class="ident" id="3129116">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3129119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3129122">if</span>&nbsp;<span class="ident" id="3129125">last</span>&nbsp;<span class="op" id="3129130">==</span>&nbsp;<span class="string" id="3129133">&#39;-&#39;</span>&nbsp;<span class="op" id="3129137">||</span>&nbsp;<span class="ident" id="3129140">partlen</span>&nbsp;<span class="op" id="3129148">&gt;</span>&nbsp;<span class="num" id="3129150">63</span>&nbsp;<span class="op" id="3129153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3129157">return</span>&nbsp;<span class="builtintype" id="3129164">false</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3129171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3129175">return</span>&nbsp;<span class="ident" id="3129182">ok</span><br>
<span class="lineno"></span><span class="op" id="3129185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="3129188">//&nbsp;An&nbsp;SRV&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;SRV&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3129234">type</span>&nbsp;<span class="ident" id="3129239">SRV</span>&nbsp;<span class="keyword" id="3129243">struct</span>&nbsp;<span class="op" id="3129250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3129253">Target</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3129262">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3129270">Port</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3129279">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3129287">Priority</span>&nbsp;<span class="builtintype" id="3129296">uint16</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3129304">Weight</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3129313">uint16</span><br>
<span class="lineno"></span><span class="op" id="3129320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3129323">//&nbsp;byPriorityWeight&nbsp;sorts&nbsp;SRV&nbsp;records&nbsp;by&nbsp;ascending&nbsp;priority&nbsp;and&nbsp;weight.</span><br>
<span class="lineno"></span><span class="keyword" id="3129395">type</span>&nbsp;<span class="ident" id="3129400">byPriorityWeight</span>&nbsp;<span class="op" id="3129417">[</span><span class="op" id="3129418">]</span><span class="op" id="3129419">*</span><span class="ident" id="3129420">SRV</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="3129425">func</span>&nbsp;<span class="op" id="3129430">(</span><span class="ident" id="3129431">s</span>&nbsp;<span class="ident" id="3129433">byPriorityWeight</span><span class="op" id="3129449">)</span>&nbsp;<span class="ident" id="3129451">Len</span><span class="op" id="3129454">(</span><span class="op" id="3129455">)</span>&nbsp;<span class="builtintype" id="3129457">int</span>&nbsp;<span class="op" id="3129461">{</span>&nbsp;<span class="keyword" id="3129463">return</span>&nbsp;<span class="builtinfunc" id="3129470">len</span><span class="op" id="3129473">(</span><span class="ident" id="3129474">s</span><span class="op" id="3129475">)</span>&nbsp;<span class="op" id="3129477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3129480">func</span>&nbsp;<span class="op" id="3129485">(</span><span class="ident" id="3129486">s</span>&nbsp;<span class="ident" id="3129488">byPriorityWeight</span><span class="op" id="3129504">)</span>&nbsp;<span class="ident" id="3129506">Swap</span><span class="op" id="3129510">(</span><span class="ident" id="3129511">i</span><span class="op" id="3129512">,</span>&nbsp;<span class="ident" id="3129514">j</span>&nbsp;<span class="builtintype" id="3129516">int</span><span class="op" id="3129519">)</span>&nbsp;<span class="op" id="3129521">{</span>&nbsp;<span class="ident" id="3129523">s</span><span class="op" id="3129524">[</span><span class="ident" id="3129525">i</span><span class="op" id="3129526">]</span><span class="op" id="3129527">,</span>&nbsp;<span class="ident" id="3129529">s</span><span class="op" id="3129530">[</span><span class="ident" id="3129531">j</span><span class="op" id="3129532">]</span>&nbsp;<span class="op" id="3129534">=</span>&nbsp;<span class="ident" id="3129536">s</span><span class="op" id="3129537">[</span><span class="ident" id="3129538">j</span><span class="op" id="3129539">]</span><span class="op" id="3129540">,</span>&nbsp;<span class="ident" id="3129542">s</span><span class="op" id="3129543">[</span><span class="ident" id="3129544">i</span><span class="op" id="3129545">]</span>&nbsp;<span class="op" id="3129547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="3129550">func</span>&nbsp;<span class="op" id="3129555">(</span><span class="ident" id="3129556">s</span>&nbsp;<span class="ident" id="3129558">byPriorityWeight</span><span class="op" id="3129574">)</span>&nbsp;<span class="ident" id="3129576">Less</span><span class="op" id="3129580">(</span><span class="ident" id="3129581">i</span><span class="op" id="3129582">,</span>&nbsp;<span class="ident" id="3129584">j</span>&nbsp;<span class="builtintype" id="3129586">int</span><span class="op" id="3129589">)</span>&nbsp;<span class="builtintype" id="3129591">bool</span>&nbsp;<span class="op" id="3129596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3129599">return</span>&nbsp;<span class="ident" id="3129606">s</span><span class="op" id="3129607">[</span><span class="ident" id="3129608">i</span><span class="op" id="3129609">]</span><span class="op" id="3129610">.</span><span class="ident" id="3129611">Priority</span>&nbsp;<span class="op" id="3129620">&lt;</span>&nbsp;<span class="ident" id="3129622">s</span><span class="op" id="3129623">[</span><span class="ident" id="3129624">j</span><span class="op" id="3129625">]</span><span class="op" id="3129626">.</span><span class="ident" id="3129627">Priority</span>&nbsp;<span class="op" id="3129636">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3129641">(</span><span class="ident" id="3129642">s</span><span class="op" id="3129643">[</span><span class="ident" id="3129644">i</span><span class="op" id="3129645">]</span><span class="op" id="3129646">.</span><span class="ident" id="3129647">Priority</span>&nbsp;<span class="op" id="3129656">==</span>&nbsp;<span class="ident" id="3129659">s</span><span class="op" id="3129660">[</span><span class="ident" id="3129661">j</span><span class="op" id="3129662">]</span><span class="op" id="3129663">.</span><span class="ident" id="3129664">Priority</span>&nbsp;<span class="op" id="3129673">&amp;&amp;</span>&nbsp;<span class="ident" id="3129676">s</span><span class="op" id="3129677">[</span><span class="ident" id="3129678">i</span><span class="op" id="3129679">]</span><span class="op" id="3129680">.</span><span class="ident" id="3129681">Weight</span>&nbsp;<span class="op" id="3129688">&lt;</span>&nbsp;<span class="ident" id="3129690">s</span><span class="op" id="3129691">[</span><span class="ident" id="3129692">j</span><span class="op" id="3129693">]</span><span class="op" id="3129694">.</span><span class="ident" id="3129695">Weight</span><span class="op" id="3129701">)</span><br>
<span class="lineno"></span><span class="op" id="3129703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="comment" id="3129706">//&nbsp;shuffleByWeight&nbsp;shuffles&nbsp;SRV&nbsp;records&nbsp;by&nbsp;weight&nbsp;using&nbsp;the&nbsp;algorithm</span><br>
<span class="lineno"></span><span class="comment" id="3129776">//&nbsp;described&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno"></span><span class="keyword" id="3129802">func</span>&nbsp;<span class="op" id="3129807">(</span><span class="ident" id="3129808">addrs</span>&nbsp;<span class="ident" id="3129814">byPriorityWeight</span><span class="op" id="3129830">)</span>&nbsp;<span class="ident" id="3129832">shuffleByWeight</span><span class="op" id="3129847">(</span><span class="op" id="3129848">)</span>&nbsp;<span class="op" id="3129850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3129853">sum</span>&nbsp;<span class="op" id="3129857">:=</span>&nbsp;<span class="num" id="3129860">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3129863">for</span>&nbsp;<span class="ident" id="3129867">_</span><span class="op" id="3129868">,</span>&nbsp;<span class="ident" id="3129870">addr</span>&nbsp;<span class="op" id="3129875">:=</span>&nbsp;<span class="keyword" id="3129878">range</span>&nbsp;<span class="ident" id="3129884">addrs</span>&nbsp;<span class="op" id="3129890">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3129894">sum</span>&nbsp;<span class="op" id="3129898">+=</span>&nbsp;<span class="builtintype" id="3129901">int</span><span class="op" id="3129904">(</span><span class="ident" id="3129905">addr</span><span class="op" id="3129909">.</span><span class="ident" id="3129910">Weight</span><span class="op" id="3129916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3129919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3129922">for</span>&nbsp;<span class="ident" id="3129926">sum</span>&nbsp;<span class="op" id="3129930">&gt;</span>&nbsp;<span class="num" id="3129932">0</span>&nbsp;<span class="op" id="3129934">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3129937">len</span><span class="op" id="3129940">(</span><span class="ident" id="3129941">addrs</span><span class="op" id="3129946">)</span>&nbsp;<span class="op" id="3129948">&gt;</span>&nbsp;<span class="num" id="3129950">1</span>&nbsp;<span class="op" id="3129952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3129956">s</span>&nbsp;<span class="op" id="3129958">:=</span>&nbsp;<span class="num" id="3129961">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3129965">n</span>&nbsp;<span class="op" id="3129967">:=</span>&nbsp;<span class="ident" id="3129970">rand</span><span class="op" id="3129974">.</span><span class="ident" id="3129975">Intn</span><span class="op" id="3129979">(</span><span class="ident" id="3129980">sum</span><span class="op" id="3129983">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3129987">for</span>&nbsp;<span class="ident" id="3129991">i</span>&nbsp;<span class="op" id="3129993">:=</span>&nbsp;<span class="keyword" id="3129996">range</span>&nbsp;<span class="ident" id="3130002">addrs</span>&nbsp;<span class="op" id="3130008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130013">s</span>&nbsp;<span class="op" id="3130015">+=</span>&nbsp;<span class="builtintype" id="3130018">int</span><span class="op" id="3130021">(</span><span class="ident" id="3130022">addrs</span><span class="op" id="3130027">[</span><span class="ident" id="3130028">i</span><span class="op" id="3130029">]</span><span class="op" id="3130030">.</span><span class="ident" id="3130031">Weight</span><span class="op" id="3130037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3130042">if</span>&nbsp;<span class="ident" id="3130045">s</span>&nbsp;<span class="op" id="3130047">&gt;</span>&nbsp;<span class="ident" id="3130049">n</span>&nbsp;<span class="op" id="3130051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3130057">if</span>&nbsp;<span class="ident" id="3130060">i</span>&nbsp;<span class="op" id="3130062">&gt;</span>&nbsp;<span class="num" id="3130064">0</span>&nbsp;<span class="op" id="3130066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130073">addrs</span><span class="op" id="3130078">[</span><span class="num" id="3130079">0</span><span class="op" id="3130080">]</span><span class="op" id="3130081">,</span>&nbsp;<span class="ident" id="3130083">addrs</span><span class="op" id="3130088">[</span><span class="ident" id="3130089">i</span><span class="op" id="3130090">]</span>&nbsp;<span class="op" id="3130092">=</span>&nbsp;<span class="ident" id="3130094">addrs</span><span class="op" id="3130099">[</span><span class="ident" id="3130100">i</span><span class="op" id="3130101">]</span><span class="op" id="3130102">,</span>&nbsp;<span class="ident" id="3130104">addrs</span><span class="op" id="3130109">[</span><span class="num" id="3130110">0</span><span class="op" id="3130111">]</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3130117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3130123">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3130132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3130136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130140">sum</span>&nbsp;<span class="op" id="3130144">-=</span>&nbsp;<span class="builtintype" id="3130147">int</span><span class="op" id="3130150">(</span><span class="ident" id="3130151">addrs</span><span class="op" id="3130156">[</span><span class="num" id="3130157">0</span><span class="op" id="3130158">]</span><span class="op" id="3130159">.</span><span class="ident" id="3130160">Weight</span><span class="op" id="3130166">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130170">addrs</span>&nbsp;<span class="op" id="3130176">=</span>&nbsp;<span class="ident" id="3130178">addrs</span><span class="op" id="3130183">[</span><span class="num" id="3130184">1</span><span class="op" id="3130185">:</span><span class="op" id="3130186">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3130189">}</span><br>
<span class="lineno"></span><span class="op" id="3130191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3130194">//&nbsp;sort&nbsp;reorders&nbsp;SRV&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno">210</span><span class="keyword" id="3130249">func</span>&nbsp;<span class="op" id="3130254">(</span><span class="ident" id="3130255">addrs</span>&nbsp;<span class="ident" id="3130261">byPriorityWeight</span><span class="op" id="3130277">)</span>&nbsp;<span class="ident" id="3130279">sort</span><span class="op" id="3130283">(</span><span class="op" id="3130284">)</span>&nbsp;<span class="op" id="3130286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130289">sort</span><span class="op" id="3130293">.</span><span class="ident" id="3130294">Sort</span><span class="op" id="3130298">(</span><span class="ident" id="3130299">addrs</span><span class="op" id="3130304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130307">i</span>&nbsp;<span class="op" id="3130309">:=</span>&nbsp;<span class="num" id="3130312">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3130315">for</span>&nbsp;<span class="ident" id="3130319">j</span>&nbsp;<span class="op" id="3130321">:=</span>&nbsp;<span class="num" id="3130324">1</span><span class="op" id="3130325">;</span>&nbsp;<span class="ident" id="3130327">j</span>&nbsp;<span class="op" id="3130329">&lt;</span>&nbsp;<span class="builtinfunc" id="3130331">len</span><span class="op" id="3130334">(</span><span class="ident" id="3130335">addrs</span><span class="op" id="3130340">)</span><span class="op" id="3130341">;</span>&nbsp;<span class="ident" id="3130343">j</span><span class="op" id="3130344">++</span>&nbsp;<span class="op" id="3130347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3130351">if</span>&nbsp;<span class="ident" id="3130354">addrs</span><span class="op" id="3130359">[</span><span class="ident" id="3130360">i</span><span class="op" id="3130361">]</span><span class="op" id="3130362">.</span><span class="ident" id="3130363">Priority</span>&nbsp;<span class="op" id="3130372">!=</span>&nbsp;<span class="ident" id="3130375">addrs</span><span class="op" id="3130380">[</span><span class="ident" id="3130381">j</span><span class="op" id="3130382">]</span><span class="op" id="3130383">.</span><span class="ident" id="3130384">Priority</span>&nbsp;<span class="op" id="3130393">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130398">addrs</span><span class="op" id="3130403">[</span><span class="ident" id="3130404">i</span><span class="op" id="3130405">:</span><span class="ident" id="3130406">j</span><span class="op" id="3130407">]</span><span class="op" id="3130408">.</span><span class="ident" id="3130409">shuffleByWeight</span><span class="op" id="3130424">(</span><span class="op" id="3130425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130430">i</span>&nbsp;<span class="op" id="3130432">=</span>&nbsp;<span class="ident" id="3130434">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3130438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3130441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130444">addrs</span><span class="op" id="3130449">[</span><span class="ident" id="3130450">i</span><span class="op" id="3130451">:</span><span class="op" id="3130452">]</span><span class="op" id="3130453">.</span><span class="ident" id="3130454">shuffleByWeight</span><span class="op" id="3130469">(</span><span class="op" id="3130470">)</span><br>
<span class="lineno">220</span><span class="op" id="3130472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3130475">//&nbsp;An&nbsp;MX&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;MX&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3130519">type</span>&nbsp;<span class="ident" id="3130524">MX</span>&nbsp;<span class="keyword" id="3130527">struct</span>&nbsp;<span class="op" id="3130534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130537">Host</span>&nbsp;<span class="builtintype" id="3130542">string</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130550">Pref</span>&nbsp;<span class="builtintype" id="3130555">uint16</span><br>
<span class="lineno"></span><span class="op" id="3130562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3130565">//&nbsp;byPref&nbsp;implements&nbsp;sort.Interface&nbsp;to&nbsp;sort&nbsp;MX&nbsp;records&nbsp;by&nbsp;preference</span><br>
<span class="lineno"></span><span class="keyword" id="3130634">type</span>&nbsp;<span class="ident" id="3130639">byPref</span>&nbsp;<span class="op" id="3130646">[</span><span class="op" id="3130647">]</span><span class="op" id="3130648">*</span><span class="ident" id="3130649">MX</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="3130653">func</span>&nbsp;<span class="op" id="3130658">(</span><span class="ident" id="3130659">s</span>&nbsp;<span class="ident" id="3130661">byPref</span><span class="op" id="3130667">)</span>&nbsp;<span class="ident" id="3130669">Len</span><span class="op" id="3130672">(</span><span class="op" id="3130673">)</span>&nbsp;<span class="builtintype" id="3130675">int</span>&nbsp;<span class="op" id="3130679">{</span>&nbsp;<span class="keyword" id="3130681">return</span>&nbsp;<span class="builtinfunc" id="3130688">len</span><span class="op" id="3130691">(</span><span class="ident" id="3130692">s</span><span class="op" id="3130693">)</span>&nbsp;<span class="op" id="3130695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3130698">func</span>&nbsp;<span class="op" id="3130703">(</span><span class="ident" id="3130704">s</span>&nbsp;<span class="ident" id="3130706">byPref</span><span class="op" id="3130712">)</span>&nbsp;<span class="ident" id="3130714">Less</span><span class="op" id="3130718">(</span><span class="ident" id="3130719">i</span><span class="op" id="3130720">,</span>&nbsp;<span class="ident" id="3130722">j</span>&nbsp;<span class="builtintype" id="3130724">int</span><span class="op" id="3130727">)</span>&nbsp;<span class="builtintype" id="3130729">bool</span>&nbsp;<span class="op" id="3130734">{</span>&nbsp;<span class="keyword" id="3130736">return</span>&nbsp;<span class="ident" id="3130743">s</span><span class="op" id="3130744">[</span><span class="ident" id="3130745">i</span><span class="op" id="3130746">]</span><span class="op" id="3130747">.</span><span class="ident" id="3130748">Pref</span>&nbsp;<span class="op" id="3130753">&lt;</span>&nbsp;<span class="ident" id="3130755">s</span><span class="op" id="3130756">[</span><span class="ident" id="3130757">j</span><span class="op" id="3130758">]</span><span class="op" id="3130759">.</span><span class="ident" id="3130760">Pref</span>&nbsp;<span class="op" id="3130765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="3130768">func</span>&nbsp;<span class="op" id="3130773">(</span><span class="ident" id="3130774">s</span>&nbsp;<span class="ident" id="3130776">byPref</span><span class="op" id="3130782">)</span>&nbsp;<span class="ident" id="3130784">Swap</span><span class="op" id="3130788">(</span><span class="ident" id="3130789">i</span><span class="op" id="3130790">,</span>&nbsp;<span class="ident" id="3130792">j</span>&nbsp;<span class="builtintype" id="3130794">int</span><span class="op" id="3130797">)</span>&nbsp;<span class="op" id="3130799">{</span>&nbsp;<span class="ident" id="3130801">s</span><span class="op" id="3130802">[</span><span class="ident" id="3130803">i</span><span class="op" id="3130804">]</span><span class="op" id="3130805">,</span>&nbsp;<span class="ident" id="3130807">s</span><span class="op" id="3130808">[</span><span class="ident" id="3130809">j</span><span class="op" id="3130810">]</span>&nbsp;<span class="op" id="3130812">=</span>&nbsp;<span class="ident" id="3130814">s</span><span class="op" id="3130815">[</span><span class="ident" id="3130816">j</span><span class="op" id="3130817">]</span><span class="op" id="3130818">,</span>&nbsp;<span class="ident" id="3130820">s</span><span class="op" id="3130821">[</span><span class="ident" id="3130822">i</span><span class="op" id="3130823">]</span>&nbsp;<span class="op" id="3130825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3130828">//&nbsp;sort&nbsp;reorders&nbsp;MX&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;5321.</span><br>
<span class="lineno"></span><span class="keyword" id="3130882">func</span>&nbsp;<span class="op" id="3130887">(</span><span class="ident" id="3130888">s</span>&nbsp;<span class="ident" id="3130890">byPref</span><span class="op" id="3130896">)</span>&nbsp;<span class="ident" id="3130898">sort</span><span class="op" id="3130902">(</span><span class="op" id="3130903">)</span>&nbsp;<span class="op" id="3130905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3130908">for</span>&nbsp;<span class="ident" id="3130912">i</span>&nbsp;<span class="op" id="3130914">:=</span>&nbsp;<span class="keyword" id="3130917">range</span>&nbsp;<span class="ident" id="3130923">s</span>&nbsp;<span class="op" id="3130925">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130929">j</span>&nbsp;<span class="op" id="3130931">:=</span>&nbsp;<span class="ident" id="3130934">rand</span><span class="op" id="3130938">.</span><span class="ident" id="3130939">Intn</span><span class="op" id="3130943">(</span><span class="ident" id="3130944">i</span>&nbsp;<span class="op" id="3130946">+</span>&nbsp;<span class="num" id="3130948">1</span><span class="op" id="3130949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130953">s</span><span class="op" id="3130954">[</span><span class="ident" id="3130955">i</span><span class="op" id="3130956">]</span><span class="op" id="3130957">,</span>&nbsp;<span class="ident" id="3130959">s</span><span class="op" id="3130960">[</span><span class="ident" id="3130961">j</span><span class="op" id="3130962">]</span>&nbsp;<span class="op" id="3130964">=</span>&nbsp;<span class="ident" id="3130966">s</span><span class="op" id="3130967">[</span><span class="ident" id="3130968">j</span><span class="op" id="3130969">]</span><span class="op" id="3130970">,</span>&nbsp;<span class="ident" id="3130972">s</span><span class="op" id="3130973">[</span><span class="ident" id="3130974">i</span><span class="op" id="3130975">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3130978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3130981">sort</span><span class="op" id="3130985">.</span><span class="ident" id="3130986">Sort</span><span class="op" id="3130990">(</span><span class="ident" id="3130991">s</span><span class="op" id="3130992">)</span><br>
<span class="lineno"></span><span class="op" id="3130994">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="3130997">//&nbsp;An&nbsp;NS&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;NS&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3131041">type</span>&nbsp;<span class="ident" id="3131046">NS</span>&nbsp;<span class="keyword" id="3131049">struct</span>&nbsp;<span class="op" id="3131056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3131059">Host</span>&nbsp;<span class="builtintype" id="3131064">string</span><br>
<span class="lineno"></span><span class="op" id="3131071">}</span>
</div>
</body>
</html>
