<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="4863078">package</span>&nbsp;<span class="ident" id="4863086">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4863093">//&nbsp;InstArch8&nbsp;dispatches&nbsp;and&nbsp;executes&nbsp;an&nbsp;arch8&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="keyword" id="4863152">type</span>&nbsp;<span class="ident" id="4863157">instArch8</span>&nbsp;<span class="keyword" id="4863167">struct</span>&nbsp;<span class="op" id="4863174">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863177">reg</span>&nbsp;<span class="ident" id="4863181">instReg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863190">imm</span>&nbsp;<span class="ident" id="4863194">instImm</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863203">br</span>&nbsp;&nbsp;<span class="ident" id="4863207">instBr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863215">sys</span>&nbsp;<span class="ident" id="4863219">instSys</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863228">jmp</span>&nbsp;<span class="ident" id="4863232">instJmp</span><br>
<span class="lineno">10</span><span class="op" id="4863240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4863243">//&nbsp;I&nbsp;executes&nbsp;an&nbsp;arch8&nbsp;instructino</span><br>
<span class="lineno"></span><span class="keyword" id="4863278">func</span>&nbsp;<span class="op" id="4863283">(</span><span class="ident" id="4863284">i</span>&nbsp;<span class="op" id="4863286">*</span><span class="ident" id="4863287">instArch8</span><span class="op" id="4863296">)</span>&nbsp;<span class="ident" id="4863298">I</span><span class="op" id="4863299">(</span><span class="ident" id="4863300">cpu</span>&nbsp;<span class="op" id="4863304">*</span><span class="ident" id="4863305">cpu</span><span class="op" id="4863308">,</span>&nbsp;<span class="ident" id="4863310">in</span>&nbsp;<span class="builtintype" id="4863313">uint32</span><span class="op" id="4863319">)</span>&nbsp;<span class="op" id="4863321">*</span><span class="ident" id="4863322">Excep</span>&nbsp;<span class="op" id="4863328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863331">if</span>&nbsp;<span class="op" id="4863334">(</span><span class="ident" id="4863335">in</span>&nbsp;<span class="op" id="4863338">&gt;&gt;</span>&nbsp;<span class="num" id="4863341">31</span><span class="op" id="4863343">)</span>&nbsp;<span class="op" id="4863345">==</span>&nbsp;<span class="num" id="4863348">0</span>&nbsp;<span class="op" id="4863350">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863354">op</span>&nbsp;<span class="op" id="4863357">:=</span>&nbsp;<span class="op" id="4863360">(</span><span class="ident" id="4863361">in</span>&nbsp;<span class="op" id="4863364">&gt;&gt;</span>&nbsp;<span class="num" id="4863367">24</span><span class="op" id="4863369">)</span>&nbsp;<span class="op" id="4863371">&amp;</span>&nbsp;<span class="num" id="4863373">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863380">switch</span>&nbsp;<span class="op" id="4863387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863391">case</span>&nbsp;<span class="ident" id="4863396">op</span>&nbsp;<span class="op" id="4863399">==</span>&nbsp;<span class="num" id="4863402">0</span><span class="op" id="4863403">:</span>&nbsp;<span class="comment" id="4863405">//&nbsp;op&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863419">return</span>&nbsp;<span class="ident" id="4863426">i</span><span class="op" id="4863427">.</span><span class="ident" id="4863428">reg</span><span class="op" id="4863431">.</span><span class="ident" id="4863432">I</span><span class="op" id="4863433">(</span><span class="ident" id="4863434">cpu</span><span class="op" id="4863437">,</span>&nbsp;<span class="ident" id="4863439">in</span><span class="op" id="4863441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863445">case</span>&nbsp;<span class="ident" id="4863450">op</span>&nbsp;<span class="op" id="4863453">&lt;</span>&nbsp;<span class="num" id="4863455">32</span><span class="op" id="4863457">:</span>&nbsp;<span class="comment" id="4863459">//&nbsp;op&nbsp;in&nbsp;(0,&nbsp;32)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863479">return</span>&nbsp;<span class="ident" id="4863486">i</span><span class="op" id="4863487">.</span><span class="ident" id="4863488">imm</span><span class="op" id="4863491">.</span><span class="ident" id="4863492">I</span><span class="op" id="4863493">(</span><span class="ident" id="4863494">cpu</span><span class="op" id="4863497">,</span>&nbsp;<span class="ident" id="4863499">in</span><span class="op" id="4863501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863505">case</span>&nbsp;<span class="ident" id="4863510">op</span>&nbsp;<span class="op" id="4863513">&lt;</span>&nbsp;<span class="num" id="4863515">64</span><span class="op" id="4863517">:</span>&nbsp;<span class="comment" id="4863519">//&nbsp;op&nbsp;in&nbsp;[32,&nbsp;64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863540">return</span>&nbsp;<span class="ident" id="4863547">i</span><span class="op" id="4863548">.</span><span class="ident" id="4863549">br</span><span class="op" id="4863551">.</span><span class="ident" id="4863552">I</span><span class="op" id="4863553">(</span><span class="ident" id="4863554">cpu</span><span class="op" id="4863557">,</span>&nbsp;<span class="ident" id="4863559">in</span><span class="op" id="4863561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863565">case</span>&nbsp;<span class="ident" id="4863570">op</span>&nbsp;<span class="op" id="4863573">&lt;</span>&nbsp;<span class="num" id="4863575">128</span><span class="op" id="4863578">:</span>&nbsp;<span class="comment" id="4863580">//&nbsp;op&nbsp;in&nbsp;[64,&nbsp;128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863602">return</span>&nbsp;<span class="ident" id="4863609">i</span><span class="op" id="4863610">.</span><span class="ident" id="4863611">sys</span><span class="op" id="4863614">.</span><span class="ident" id="4863615">I</span><span class="op" id="4863616">(</span><span class="ident" id="4863617">cpu</span><span class="op" id="4863620">,</span>&nbsp;<span class="ident" id="4863622">in</span><span class="op" id="4863624">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863628">default</span><span class="op" id="4863635">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4863640">panic</span><span class="op" id="4863645">(</span><span class="string" id="4863646">&#34;bug&#34;</span><span class="op" id="4863651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4863655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4863658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863662">return</span>&nbsp;<span class="ident" id="4863669">i</span><span class="op" id="4863670">.</span><span class="ident" id="4863671">jmp</span><span class="op" id="4863674">.</span><span class="ident" id="4863675">I</span><span class="op" id="4863676">(</span><span class="ident" id="4863677">cpu</span><span class="op" id="4863680">,</span>&nbsp;<span class="ident" id="4863682">in</span><span class="op" id="4863684">)</span><br>
<span class="lineno"></span><span class="op" id="4863686">}</span>
</div>
</body>
</html>
