<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8315129">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8315184">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8315238">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8315289">package</span>&nbsp;<span class="ident" id="8315297">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8315302">import</span>&nbsp;<span class="op" id="8315309">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8315312">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8315320">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8315326">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8315332">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8315343">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8315354">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8315361">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8315364">func</span>&nbsp;<span class="ident" id="8315369">skipServerTest</span><span class="op" id="8315383">(</span><span class="ident" id="8315384">net</span><span class="op" id="8315387">,</span>&nbsp;<span class="ident" id="8315389">unixsotype</span><span class="op" id="8315399">,</span>&nbsp;<span class="ident" id="8315401">addr</span>&nbsp;<span class="builtintype" id="8315406">string</span><span class="op" id="8315412">,</span>&nbsp;<span class="ident" id="8315414">ipv6</span><span class="op" id="8315418">,</span>&nbsp;<span class="ident" id="8315420">ipv4map</span><span class="op" id="8315427">,</span>&nbsp;<span class="ident" id="8315429">linuxOnly</span>&nbsp;<span class="builtintype" id="8315439">bool</span><span class="op" id="8315443">)</span>&nbsp;<span class="builtintype" id="8315445">bool</span>&nbsp;<span class="op" id="8315450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315453">switch</span>&nbsp;<span class="ident" id="8315460">runtime</span><span class="op" id="8315467">.</span><span class="ident" id="8315468">GOOS</span>&nbsp;<span class="op" id="8315473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315476">case</span>&nbsp;<span class="string" id="8315481">&#34;linux&#34;</span><span class="op" id="8315488">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315491">case</span>&nbsp;<span class="string" id="8315496">&#34;nacl&#34;</span><span class="op" id="8315502">,</span>&nbsp;<span class="string" id="8315504">&#34;plan9&#34;</span><span class="op" id="8315511">,</span>&nbsp;<span class="string" id="8315513">&#34;windows&#34;</span><span class="op" id="8315522">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8315526">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315587">if</span>&nbsp;<span class="ident" id="8315590">net</span>&nbsp;<span class="op" id="8315594">==</span>&nbsp;<span class="ident" id="8315597">unixsotype</span>&nbsp;<span class="op" id="8315608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315613">return</span>&nbsp;<span class="builtintype" id="8315620">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315630">default</span><span class="op" id="8315637">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315641">if</span>&nbsp;<span class="ident" id="8315644">net</span>&nbsp;<span class="op" id="8315648">==</span>&nbsp;<span class="ident" id="8315651">unixsotype</span>&nbsp;<span class="op" id="8315662">&amp;&amp;</span>&nbsp;<span class="ident" id="8315665">linuxOnly</span>&nbsp;<span class="op" id="8315675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315680">return</span>&nbsp;<span class="builtintype" id="8315687">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315700">switch</span>&nbsp;<span class="ident" id="8315707">addr</span>&nbsp;<span class="op" id="8315712">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315715">case</span>&nbsp;<span class="string" id="8315720">&#34;&#34;</span><span class="op" id="8315722">,</span>&nbsp;<span class="string" id="8315724">&#34;0.0.0.0&#34;</span><span class="op" id="8315733">,</span>&nbsp;<span class="string" id="8315735">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8315753">,</span>&nbsp;<span class="string" id="8315755">&#34;[::]&#34;</span><span class="op" id="8315761">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315765">if</span>&nbsp;<span class="ident" id="8315768">testing</span><span class="op" id="8315775">.</span><span class="ident" id="8315776">Short</span><span class="op" id="8315781">(</span><span class="op" id="8315782">)</span>&nbsp;<span class="op" id="8315784">||</span>&nbsp;<span class="op" id="8315787">!</span><span class="op" id="8315788">*</span><span class="ident" id="8315789">testExternal</span>&nbsp;<span class="op" id="8315802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315807">return</span>&nbsp;<span class="builtintype" id="8315814">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315824">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315827">if</span>&nbsp;<span class="ident" id="8315830">ipv6</span>&nbsp;<span class="op" id="8315835">&amp;&amp;</span>&nbsp;<span class="op" id="8315838">!</span><span class="ident" id="8315839">supportsIPv6</span>&nbsp;<span class="op" id="8315852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315856">return</span>&nbsp;<span class="builtintype" id="8315863">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315872">if</span>&nbsp;<span class="ident" id="8315875">ipv4map</span>&nbsp;<span class="op" id="8315883">&amp;&amp;</span>&nbsp;<span class="op" id="8315886">!</span><span class="ident" id="8315887">supportsIPv4map</span>&nbsp;<span class="op" id="8315903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315907">return</span>&nbsp;<span class="builtintype" id="8315914">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8315920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8315923">return</span>&nbsp;<span class="builtintype" id="8315930">false</span><br>
<span class="lineno"></span><span class="op" id="8315936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8315939">var</span>&nbsp;<span class="ident" id="8315943">streamConnServerTests</span>&nbsp;<span class="op" id="8315965">=</span>&nbsp;<span class="op" id="8315967">[</span><span class="op" id="8315968">]</span><span class="keyword" id="8315969">struct</span>&nbsp;<span class="op" id="8315976">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8315979">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8315989">string</span>&nbsp;<span class="comment" id="8315996">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316012">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8316022">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316030">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8316040">string</span>&nbsp;<span class="comment" id="8316047">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316063">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8316073">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316081">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8316091">bool</span>&nbsp;<span class="comment" id="8316096">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316137">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8316147">bool</span>&nbsp;<span class="comment" id="8316152">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316198">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8316208">bool</span>&nbsp;<span class="comment" id="8316213">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8316238">linuxOnly</span>&nbsp;<span class="builtintype" id="8316248">bool</span>&nbsp;<span class="comment" id="8316253">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="8316307">}</span><span class="op" id="8316308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316311">{</span><span class="ident" id="8316312">snet</span><span class="op" id="8316316">:</span>&nbsp;<span class="string" id="8316318">&#34;tcp&#34;</span><span class="op" id="8316323">,</span>&nbsp;<span class="ident" id="8316325">saddr</span><span class="op" id="8316330">:</span>&nbsp;<span class="string" id="8316332">&#34;&#34;</span><span class="op" id="8316334">,</span>&nbsp;<span class="ident" id="8316336">cnet</span><span class="op" id="8316340">:</span>&nbsp;<span class="string" id="8316342">&#34;tcp&#34;</span><span class="op" id="8316347">,</span>&nbsp;<span class="ident" id="8316349">caddr</span><span class="op" id="8316354">:</span>&nbsp;<span class="string" id="8316356">&#34;127.0.0.1&#34;</span><span class="op" id="8316367">}</span><span class="op" id="8316368">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316371">{</span><span class="ident" id="8316372">snet</span><span class="op" id="8316376">:</span>&nbsp;<span class="string" id="8316378">&#34;tcp&#34;</span><span class="op" id="8316383">,</span>&nbsp;<span class="ident" id="8316385">saddr</span><span class="op" id="8316390">:</span>&nbsp;<span class="string" id="8316392">&#34;0.0.0.0&#34;</span><span class="op" id="8316401">,</span>&nbsp;<span class="ident" id="8316403">cnet</span><span class="op" id="8316407">:</span>&nbsp;<span class="string" id="8316409">&#34;tcp&#34;</span><span class="op" id="8316414">,</span>&nbsp;<span class="ident" id="8316416">caddr</span><span class="op" id="8316421">:</span>&nbsp;<span class="string" id="8316423">&#34;127.0.0.1&#34;</span><span class="op" id="8316434">}</span><span class="op" id="8316435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316438">{</span><span class="ident" id="8316439">snet</span><span class="op" id="8316443">:</span>&nbsp;<span class="string" id="8316445">&#34;tcp&#34;</span><span class="op" id="8316450">,</span>&nbsp;<span class="ident" id="8316452">saddr</span><span class="op" id="8316457">:</span>&nbsp;<span class="string" id="8316459">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8316477">,</span>&nbsp;<span class="ident" id="8316479">cnet</span><span class="op" id="8316483">:</span>&nbsp;<span class="string" id="8316485">&#34;tcp&#34;</span><span class="op" id="8316490">,</span>&nbsp;<span class="ident" id="8316492">caddr</span><span class="op" id="8316497">:</span>&nbsp;<span class="string" id="8316499">&#34;127.0.0.1&#34;</span><span class="op" id="8316510">}</span><span class="op" id="8316511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316514">{</span><span class="ident" id="8316515">snet</span><span class="op" id="8316519">:</span>&nbsp;<span class="string" id="8316521">&#34;tcp&#34;</span><span class="op" id="8316526">,</span>&nbsp;<span class="ident" id="8316528">saddr</span><span class="op" id="8316533">:</span>&nbsp;<span class="string" id="8316535">&#34;[::]&#34;</span><span class="op" id="8316541">,</span>&nbsp;<span class="ident" id="8316543">cnet</span><span class="op" id="8316547">:</span>&nbsp;<span class="string" id="8316549">&#34;tcp&#34;</span><span class="op" id="8316554">,</span>&nbsp;<span class="ident" id="8316556">caddr</span><span class="op" id="8316561">:</span>&nbsp;<span class="string" id="8316563">&#34;[::1]&#34;</span><span class="op" id="8316570">,</span>&nbsp;<span class="ident" id="8316572">ipv6</span><span class="op" id="8316576">:</span>&nbsp;<span class="builtintype" id="8316578">true</span><span class="op" id="8316582">}</span><span class="op" id="8316583">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316587">{</span><span class="ident" id="8316588">snet</span><span class="op" id="8316592">:</span>&nbsp;<span class="string" id="8316594">&#34;tcp&#34;</span><span class="op" id="8316599">,</span>&nbsp;<span class="ident" id="8316601">saddr</span><span class="op" id="8316606">:</span>&nbsp;<span class="string" id="8316608">&#34;&#34;</span><span class="op" id="8316610">,</span>&nbsp;<span class="ident" id="8316612">cnet</span><span class="op" id="8316616">:</span>&nbsp;<span class="string" id="8316618">&#34;tcp&#34;</span><span class="op" id="8316623">,</span>&nbsp;<span class="ident" id="8316625">caddr</span><span class="op" id="8316630">:</span>&nbsp;<span class="string" id="8316632">&#34;[::1]&#34;</span><span class="op" id="8316639">,</span>&nbsp;<span class="ident" id="8316641">ipv4map</span><span class="op" id="8316648">:</span>&nbsp;<span class="builtintype" id="8316650">true</span><span class="op" id="8316654">}</span><span class="op" id="8316655">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316658">{</span><span class="ident" id="8316659">snet</span><span class="op" id="8316663">:</span>&nbsp;<span class="string" id="8316665">&#34;tcp&#34;</span><span class="op" id="8316670">,</span>&nbsp;<span class="ident" id="8316672">saddr</span><span class="op" id="8316677">:</span>&nbsp;<span class="string" id="8316679">&#34;0.0.0.0&#34;</span><span class="op" id="8316688">,</span>&nbsp;<span class="ident" id="8316690">cnet</span><span class="op" id="8316694">:</span>&nbsp;<span class="string" id="8316696">&#34;tcp&#34;</span><span class="op" id="8316701">,</span>&nbsp;<span class="ident" id="8316703">caddr</span><span class="op" id="8316708">:</span>&nbsp;<span class="string" id="8316710">&#34;[::1]&#34;</span><span class="op" id="8316717">,</span>&nbsp;<span class="ident" id="8316719">ipv4map</span><span class="op" id="8316726">:</span>&nbsp;<span class="builtintype" id="8316728">true</span><span class="op" id="8316732">}</span><span class="op" id="8316733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316736">{</span><span class="ident" id="8316737">snet</span><span class="op" id="8316741">:</span>&nbsp;<span class="string" id="8316743">&#34;tcp&#34;</span><span class="op" id="8316748">,</span>&nbsp;<span class="ident" id="8316750">saddr</span><span class="op" id="8316755">:</span>&nbsp;<span class="string" id="8316757">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8316775">,</span>&nbsp;<span class="ident" id="8316777">cnet</span><span class="op" id="8316781">:</span>&nbsp;<span class="string" id="8316783">&#34;tcp&#34;</span><span class="op" id="8316788">,</span>&nbsp;<span class="ident" id="8316790">caddr</span><span class="op" id="8316795">:</span>&nbsp;<span class="string" id="8316797">&#34;[::1]&#34;</span><span class="op" id="8316804">,</span>&nbsp;<span class="ident" id="8316806">ipv4map</span><span class="op" id="8316813">:</span>&nbsp;<span class="builtintype" id="8316815">true</span><span class="op" id="8316819">}</span><span class="op" id="8316820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316823">{</span><span class="ident" id="8316824">snet</span><span class="op" id="8316828">:</span>&nbsp;<span class="string" id="8316830">&#34;tcp&#34;</span><span class="op" id="8316835">,</span>&nbsp;<span class="ident" id="8316837">saddr</span><span class="op" id="8316842">:</span>&nbsp;<span class="string" id="8316844">&#34;[::]&#34;</span><span class="op" id="8316850">,</span>&nbsp;<span class="ident" id="8316852">cnet</span><span class="op" id="8316856">:</span>&nbsp;<span class="string" id="8316858">&#34;tcp&#34;</span><span class="op" id="8316863">,</span>&nbsp;<span class="ident" id="8316865">caddr</span><span class="op" id="8316870">:</span>&nbsp;<span class="string" id="8316872">&#34;127.0.0.1&#34;</span><span class="op" id="8316883">,</span>&nbsp;<span class="ident" id="8316885">ipv4map</span><span class="op" id="8316892">:</span>&nbsp;<span class="builtintype" id="8316894">true</span><span class="op" id="8316898">}</span><span class="op" id="8316899">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316903">{</span><span class="ident" id="8316904">snet</span><span class="op" id="8316908">:</span>&nbsp;<span class="string" id="8316910">&#34;tcp&#34;</span><span class="op" id="8316915">,</span>&nbsp;<span class="ident" id="8316917">saddr</span><span class="op" id="8316922">:</span>&nbsp;<span class="string" id="8316924">&#34;&#34;</span><span class="op" id="8316926">,</span>&nbsp;<span class="ident" id="8316928">cnet</span><span class="op" id="8316932">:</span>&nbsp;<span class="string" id="8316934">&#34;tcp4&#34;</span><span class="op" id="8316940">,</span>&nbsp;<span class="ident" id="8316942">caddr</span><span class="op" id="8316947">:</span>&nbsp;<span class="string" id="8316949">&#34;127.0.0.1&#34;</span><span class="op" id="8316960">}</span><span class="op" id="8316961">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8316964">{</span><span class="ident" id="8316965">snet</span><span class="op" id="8316969">:</span>&nbsp;<span class="string" id="8316971">&#34;tcp&#34;</span><span class="op" id="8316976">,</span>&nbsp;<span class="ident" id="8316978">saddr</span><span class="op" id="8316983">:</span>&nbsp;<span class="string" id="8316985">&#34;0.0.0.0&#34;</span><span class="op" id="8316994">,</span>&nbsp;<span class="ident" id="8316996">cnet</span><span class="op" id="8317000">:</span>&nbsp;<span class="string" id="8317002">&#34;tcp4&#34;</span><span class="op" id="8317008">,</span>&nbsp;<span class="ident" id="8317010">caddr</span><span class="op" id="8317015">:</span>&nbsp;<span class="string" id="8317017">&#34;127.0.0.1&#34;</span><span class="op" id="8317028">}</span><span class="op" id="8317029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317032">{</span><span class="ident" id="8317033">snet</span><span class="op" id="8317037">:</span>&nbsp;<span class="string" id="8317039">&#34;tcp&#34;</span><span class="op" id="8317044">,</span>&nbsp;<span class="ident" id="8317046">saddr</span><span class="op" id="8317051">:</span>&nbsp;<span class="string" id="8317053">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8317071">,</span>&nbsp;<span class="ident" id="8317073">cnet</span><span class="op" id="8317077">:</span>&nbsp;<span class="string" id="8317079">&#34;tcp4&#34;</span><span class="op" id="8317085">,</span>&nbsp;<span class="ident" id="8317087">caddr</span><span class="op" id="8317092">:</span>&nbsp;<span class="string" id="8317094">&#34;127.0.0.1&#34;</span><span class="op" id="8317105">}</span><span class="op" id="8317106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317109">{</span><span class="ident" id="8317110">snet</span><span class="op" id="8317114">:</span>&nbsp;<span class="string" id="8317116">&#34;tcp&#34;</span><span class="op" id="8317121">,</span>&nbsp;<span class="ident" id="8317123">saddr</span><span class="op" id="8317128">:</span>&nbsp;<span class="string" id="8317130">&#34;[::]&#34;</span><span class="op" id="8317136">,</span>&nbsp;<span class="ident" id="8317138">cnet</span><span class="op" id="8317142">:</span>&nbsp;<span class="string" id="8317144">&#34;tcp6&#34;</span><span class="op" id="8317150">,</span>&nbsp;<span class="ident" id="8317152">caddr</span><span class="op" id="8317157">:</span>&nbsp;<span class="string" id="8317159">&#34;[::1]&#34;</span><span class="op" id="8317166">,</span>&nbsp;<span class="ident" id="8317168">ipv6</span><span class="op" id="8317172">:</span>&nbsp;<span class="builtintype" id="8317174">true</span><span class="op" id="8317178">}</span><span class="op" id="8317179">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317183">{</span><span class="ident" id="8317184">snet</span><span class="op" id="8317188">:</span>&nbsp;<span class="string" id="8317190">&#34;tcp&#34;</span><span class="op" id="8317195">,</span>&nbsp;<span class="ident" id="8317197">saddr</span><span class="op" id="8317202">:</span>&nbsp;<span class="string" id="8317204">&#34;&#34;</span><span class="op" id="8317206">,</span>&nbsp;<span class="ident" id="8317208">cnet</span><span class="op" id="8317212">:</span>&nbsp;<span class="string" id="8317214">&#34;tcp6&#34;</span><span class="op" id="8317220">,</span>&nbsp;<span class="ident" id="8317222">caddr</span><span class="op" id="8317227">:</span>&nbsp;<span class="string" id="8317229">&#34;[::1]&#34;</span><span class="op" id="8317236">,</span>&nbsp;<span class="ident" id="8317238">ipv4map</span><span class="op" id="8317245">:</span>&nbsp;<span class="builtintype" id="8317247">true</span><span class="op" id="8317251">}</span><span class="op" id="8317252">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317255">{</span><span class="ident" id="8317256">snet</span><span class="op" id="8317260">:</span>&nbsp;<span class="string" id="8317262">&#34;tcp&#34;</span><span class="op" id="8317267">,</span>&nbsp;<span class="ident" id="8317269">saddr</span><span class="op" id="8317274">:</span>&nbsp;<span class="string" id="8317276">&#34;0.0.0.0&#34;</span><span class="op" id="8317285">,</span>&nbsp;<span class="ident" id="8317287">cnet</span><span class="op" id="8317291">:</span>&nbsp;<span class="string" id="8317293">&#34;tcp6&#34;</span><span class="op" id="8317299">,</span>&nbsp;<span class="ident" id="8317301">caddr</span><span class="op" id="8317306">:</span>&nbsp;<span class="string" id="8317308">&#34;[::1]&#34;</span><span class="op" id="8317315">,</span>&nbsp;<span class="ident" id="8317317">ipv4map</span><span class="op" id="8317324">:</span>&nbsp;<span class="builtintype" id="8317326">true</span><span class="op" id="8317330">}</span><span class="op" id="8317331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317334">{</span><span class="ident" id="8317335">snet</span><span class="op" id="8317339">:</span>&nbsp;<span class="string" id="8317341">&#34;tcp&#34;</span><span class="op" id="8317346">,</span>&nbsp;<span class="ident" id="8317348">saddr</span><span class="op" id="8317353">:</span>&nbsp;<span class="string" id="8317355">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8317373">,</span>&nbsp;<span class="ident" id="8317375">cnet</span><span class="op" id="8317379">:</span>&nbsp;<span class="string" id="8317381">&#34;tcp6&#34;</span><span class="op" id="8317387">,</span>&nbsp;<span class="ident" id="8317389">caddr</span><span class="op" id="8317394">:</span>&nbsp;<span class="string" id="8317396">&#34;[::1]&#34;</span><span class="op" id="8317403">,</span>&nbsp;<span class="ident" id="8317405">ipv4map</span><span class="op" id="8317412">:</span>&nbsp;<span class="builtintype" id="8317414">true</span><span class="op" id="8317418">}</span><span class="op" id="8317419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317422">{</span><span class="ident" id="8317423">snet</span><span class="op" id="8317427">:</span>&nbsp;<span class="string" id="8317429">&#34;tcp&#34;</span><span class="op" id="8317434">,</span>&nbsp;<span class="ident" id="8317436">saddr</span><span class="op" id="8317441">:</span>&nbsp;<span class="string" id="8317443">&#34;[::]&#34;</span><span class="op" id="8317449">,</span>&nbsp;<span class="ident" id="8317451">cnet</span><span class="op" id="8317455">:</span>&nbsp;<span class="string" id="8317457">&#34;tcp4&#34;</span><span class="op" id="8317463">,</span>&nbsp;<span class="ident" id="8317465">caddr</span><span class="op" id="8317470">:</span>&nbsp;<span class="string" id="8317472">&#34;127.0.0.1&#34;</span><span class="op" id="8317483">,</span>&nbsp;<span class="ident" id="8317485">ipv4map</span><span class="op" id="8317492">:</span>&nbsp;<span class="builtintype" id="8317494">true</span><span class="op" id="8317498">}</span><span class="op" id="8317499">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317503">{</span><span class="ident" id="8317504">snet</span><span class="op" id="8317508">:</span>&nbsp;<span class="string" id="8317510">&#34;tcp&#34;</span><span class="op" id="8317515">,</span>&nbsp;<span class="ident" id="8317517">saddr</span><span class="op" id="8317522">:</span>&nbsp;<span class="string" id="8317524">&#34;127.0.0.1&#34;</span><span class="op" id="8317535">,</span>&nbsp;<span class="ident" id="8317537">cnet</span><span class="op" id="8317541">:</span>&nbsp;<span class="string" id="8317543">&#34;tcp&#34;</span><span class="op" id="8317548">,</span>&nbsp;<span class="ident" id="8317550">caddr</span><span class="op" id="8317555">:</span>&nbsp;<span class="string" id="8317557">&#34;127.0.0.1&#34;</span><span class="op" id="8317568">}</span><span class="op" id="8317569">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317572">{</span><span class="ident" id="8317573">snet</span><span class="op" id="8317577">:</span>&nbsp;<span class="string" id="8317579">&#34;tcp&#34;</span><span class="op" id="8317584">,</span>&nbsp;<span class="ident" id="8317586">saddr</span><span class="op" id="8317591">:</span>&nbsp;<span class="string" id="8317593">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="8317613">,</span>&nbsp;<span class="ident" id="8317615">cnet</span><span class="op" id="8317619">:</span>&nbsp;<span class="string" id="8317621">&#34;tcp&#34;</span><span class="op" id="8317626">,</span>&nbsp;<span class="ident" id="8317628">caddr</span><span class="op" id="8317633">:</span>&nbsp;<span class="string" id="8317635">&#34;127.0.0.1&#34;</span><span class="op" id="8317646">}</span><span class="op" id="8317647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317650">{</span><span class="ident" id="8317651">snet</span><span class="op" id="8317655">:</span>&nbsp;<span class="string" id="8317657">&#34;tcp&#34;</span><span class="op" id="8317662">,</span>&nbsp;<span class="ident" id="8317664">saddr</span><span class="op" id="8317669">:</span>&nbsp;<span class="string" id="8317671">&#34;[::1]&#34;</span><span class="op" id="8317678">,</span>&nbsp;<span class="ident" id="8317680">cnet</span><span class="op" id="8317684">:</span>&nbsp;<span class="string" id="8317686">&#34;tcp&#34;</span><span class="op" id="8317691">,</span>&nbsp;<span class="ident" id="8317693">caddr</span><span class="op" id="8317698">:</span>&nbsp;<span class="string" id="8317700">&#34;[::1]&#34;</span><span class="op" id="8317707">,</span>&nbsp;<span class="ident" id="8317709">ipv6</span><span class="op" id="8317713">:</span>&nbsp;<span class="builtintype" id="8317715">true</span><span class="op" id="8317719">}</span><span class="op" id="8317720">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317724">{</span><span class="ident" id="8317725">snet</span><span class="op" id="8317729">:</span>&nbsp;<span class="string" id="8317731">&#34;tcp4&#34;</span><span class="op" id="8317737">,</span>&nbsp;<span class="ident" id="8317739">saddr</span><span class="op" id="8317744">:</span>&nbsp;<span class="string" id="8317746">&#34;&#34;</span><span class="op" id="8317748">,</span>&nbsp;<span class="ident" id="8317750">cnet</span><span class="op" id="8317754">:</span>&nbsp;<span class="string" id="8317756">&#34;tcp4&#34;</span><span class="op" id="8317762">,</span>&nbsp;<span class="ident" id="8317764">caddr</span><span class="op" id="8317769">:</span>&nbsp;<span class="string" id="8317771">&#34;127.0.0.1&#34;</span><span class="op" id="8317782">}</span><span class="op" id="8317783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317786">{</span><span class="ident" id="8317787">snet</span><span class="op" id="8317791">:</span>&nbsp;<span class="string" id="8317793">&#34;tcp4&#34;</span><span class="op" id="8317799">,</span>&nbsp;<span class="ident" id="8317801">saddr</span><span class="op" id="8317806">:</span>&nbsp;<span class="string" id="8317808">&#34;0.0.0.0&#34;</span><span class="op" id="8317817">,</span>&nbsp;<span class="ident" id="8317819">cnet</span><span class="op" id="8317823">:</span>&nbsp;<span class="string" id="8317825">&#34;tcp4&#34;</span><span class="op" id="8317831">,</span>&nbsp;<span class="ident" id="8317833">caddr</span><span class="op" id="8317838">:</span>&nbsp;<span class="string" id="8317840">&#34;127.0.0.1&#34;</span><span class="op" id="8317851">}</span><span class="op" id="8317852">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317855">{</span><span class="ident" id="8317856">snet</span><span class="op" id="8317860">:</span>&nbsp;<span class="string" id="8317862">&#34;tcp4&#34;</span><span class="op" id="8317868">,</span>&nbsp;<span class="ident" id="8317870">saddr</span><span class="op" id="8317875">:</span>&nbsp;<span class="string" id="8317877">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8317895">,</span>&nbsp;<span class="ident" id="8317897">cnet</span><span class="op" id="8317901">:</span>&nbsp;<span class="string" id="8317903">&#34;tcp4&#34;</span><span class="op" id="8317909">,</span>&nbsp;<span class="ident" id="8317911">caddr</span><span class="op" id="8317916">:</span>&nbsp;<span class="string" id="8317918">&#34;127.0.0.1&#34;</span><span class="op" id="8317929">}</span><span class="op" id="8317930">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8317934">{</span><span class="ident" id="8317935">snet</span><span class="op" id="8317939">:</span>&nbsp;<span class="string" id="8317941">&#34;tcp4&#34;</span><span class="op" id="8317947">,</span>&nbsp;<span class="ident" id="8317949">saddr</span><span class="op" id="8317954">:</span>&nbsp;<span class="string" id="8317956">&#34;127.0.0.1&#34;</span><span class="op" id="8317967">,</span>&nbsp;<span class="ident" id="8317969">cnet</span><span class="op" id="8317973">:</span>&nbsp;<span class="string" id="8317975">&#34;tcp4&#34;</span><span class="op" id="8317981">,</span>&nbsp;<span class="ident" id="8317983">caddr</span><span class="op" id="8317988">:</span>&nbsp;<span class="string" id="8317990">&#34;127.0.0.1&#34;</span><span class="op" id="8318001">}</span><span class="op" id="8318002">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318006">{</span><span class="ident" id="8318007">snet</span><span class="op" id="8318011">:</span>&nbsp;<span class="string" id="8318013">&#34;tcp6&#34;</span><span class="op" id="8318019">,</span>&nbsp;<span class="ident" id="8318021">saddr</span><span class="op" id="8318026">:</span>&nbsp;<span class="string" id="8318028">&#34;&#34;</span><span class="op" id="8318030">,</span>&nbsp;<span class="ident" id="8318032">cnet</span><span class="op" id="8318036">:</span>&nbsp;<span class="string" id="8318038">&#34;tcp6&#34;</span><span class="op" id="8318044">,</span>&nbsp;<span class="ident" id="8318046">caddr</span><span class="op" id="8318051">:</span>&nbsp;<span class="string" id="8318053">&#34;[::1]&#34;</span><span class="op" id="8318060">,</span>&nbsp;<span class="ident" id="8318062">ipv6</span><span class="op" id="8318066">:</span>&nbsp;<span class="builtintype" id="8318068">true</span><span class="op" id="8318072">}</span><span class="op" id="8318073">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318076">{</span><span class="ident" id="8318077">snet</span><span class="op" id="8318081">:</span>&nbsp;<span class="string" id="8318083">&#34;tcp6&#34;</span><span class="op" id="8318089">,</span>&nbsp;<span class="ident" id="8318091">saddr</span><span class="op" id="8318096">:</span>&nbsp;<span class="string" id="8318098">&#34;[::]&#34;</span><span class="op" id="8318104">,</span>&nbsp;<span class="ident" id="8318106">cnet</span><span class="op" id="8318110">:</span>&nbsp;<span class="string" id="8318112">&#34;tcp6&#34;</span><span class="op" id="8318118">,</span>&nbsp;<span class="ident" id="8318120">caddr</span><span class="op" id="8318125">:</span>&nbsp;<span class="string" id="8318127">&#34;[::1]&#34;</span><span class="op" id="8318134">,</span>&nbsp;<span class="ident" id="8318136">ipv6</span><span class="op" id="8318140">:</span>&nbsp;<span class="builtintype" id="8318142">true</span><span class="op" id="8318146">}</span><span class="op" id="8318147">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318151">{</span><span class="ident" id="8318152">snet</span><span class="op" id="8318156">:</span>&nbsp;<span class="string" id="8318158">&#34;tcp6&#34;</span><span class="op" id="8318164">,</span>&nbsp;<span class="ident" id="8318166">saddr</span><span class="op" id="8318171">:</span>&nbsp;<span class="string" id="8318173">&#34;[::1]&#34;</span><span class="op" id="8318180">,</span>&nbsp;<span class="ident" id="8318182">cnet</span><span class="op" id="8318186">:</span>&nbsp;<span class="string" id="8318188">&#34;tcp6&#34;</span><span class="op" id="8318194">,</span>&nbsp;<span class="ident" id="8318196">caddr</span><span class="op" id="8318201">:</span>&nbsp;<span class="string" id="8318203">&#34;[::1]&#34;</span><span class="op" id="8318210">,</span>&nbsp;<span class="ident" id="8318212">ipv6</span><span class="op" id="8318216">:</span>&nbsp;<span class="builtintype" id="8318218">true</span><span class="op" id="8318222">}</span><span class="op" id="8318223">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318227">{</span><span class="ident" id="8318228">snet</span><span class="op" id="8318232">:</span>&nbsp;<span class="string" id="8318234">&#34;unix&#34;</span><span class="op" id="8318240">,</span>&nbsp;<span class="ident" id="8318242">saddr</span><span class="op" id="8318247">:</span>&nbsp;<span class="ident" id="8318249">testUnixAddr</span><span class="op" id="8318261">(</span><span class="op" id="8318262">)</span><span class="op" id="8318263">,</span>&nbsp;<span class="ident" id="8318265">cnet</span><span class="op" id="8318269">:</span>&nbsp;<span class="string" id="8318271">&#34;unix&#34;</span><span class="op" id="8318277">,</span>&nbsp;<span class="ident" id="8318279">caddr</span><span class="op" id="8318284">:</span>&nbsp;<span class="ident" id="8318286">testUnixAddr</span><span class="op" id="8318298">(</span><span class="op" id="8318299">)</span><span class="op" id="8318300">}</span><span class="op" id="8318301">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318304">{</span><span class="ident" id="8318305">snet</span><span class="op" id="8318309">:</span>&nbsp;<span class="string" id="8318311">&#34;unix&#34;</span><span class="op" id="8318317">,</span>&nbsp;<span class="ident" id="8318319">saddr</span><span class="op" id="8318324">:</span>&nbsp;<span class="string" id="8318326">&#34;@gotest2/net&#34;</span><span class="op" id="8318340">,</span>&nbsp;<span class="ident" id="8318342">cnet</span><span class="op" id="8318346">:</span>&nbsp;<span class="string" id="8318348">&#34;unix&#34;</span><span class="op" id="8318354">,</span>&nbsp;<span class="ident" id="8318356">caddr</span><span class="op" id="8318361">:</span>&nbsp;<span class="string" id="8318363">&#34;@gotest2/net.local&#34;</span><span class="op" id="8318383">,</span>&nbsp;<span class="ident" id="8318385">linuxOnly</span><span class="op" id="8318394">:</span>&nbsp;<span class="builtintype" id="8318396">true</span><span class="op" id="8318400">}</span><span class="op" id="8318401">,</span><br>
<span class="lineno"></span><span class="op" id="8318403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8318406">func</span>&nbsp;<span class="ident" id="8318411">TestStreamConnServer</span><span class="op" id="8318431">(</span><span class="ident" id="8318432">t</span>&nbsp;<span class="op" id="8318434">*</span><span class="ident" id="8318435">testing</span><span class="op" id="8318442">.</span><span class="ident" id="8318443">T</span><span class="op" id="8318444">)</span>&nbsp;<span class="op" id="8318446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318449">for</span>&nbsp;<span class="ident" id="8318453">_</span><span class="op" id="8318454">,</span>&nbsp;<span class="ident" id="8318456">tt</span>&nbsp;<span class="op" id="8318459">:=</span>&nbsp;<span class="keyword" id="8318462">range</span>&nbsp;<span class="ident" id="8318468">streamConnServerTests</span>&nbsp;<span class="op" id="8318490">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318494">if</span>&nbsp;<span class="ident" id="8318497">skipServerTest</span><span class="op" id="8318511">(</span><span class="ident" id="8318512">tt</span><span class="op" id="8318514">.</span><span class="ident" id="8318515">snet</span><span class="op" id="8318519">,</span>&nbsp;<span class="string" id="8318521">&#34;unix&#34;</span><span class="op" id="8318527">,</span>&nbsp;<span class="ident" id="8318529">tt</span><span class="op" id="8318531">.</span><span class="ident" id="8318532">saddr</span><span class="op" id="8318537">,</span>&nbsp;<span class="ident" id="8318539">tt</span><span class="op" id="8318541">.</span><span class="ident" id="8318542">ipv6</span><span class="op" id="8318546">,</span>&nbsp;<span class="ident" id="8318548">tt</span><span class="op" id="8318550">.</span><span class="ident" id="8318551">ipv4map</span><span class="op" id="8318558">,</span>&nbsp;<span class="ident" id="8318560">tt</span><span class="op" id="8318562">.</span><span class="ident" id="8318563">linuxOnly</span><span class="op" id="8318572">)</span>&nbsp;<span class="op" id="8318574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318579">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318595">listening</span>&nbsp;<span class="op" id="8318605">:=</span>&nbsp;<span class="builtinfunc" id="8318608">make</span><span class="op" id="8318612">(</span><span class="keyword" id="8318613">chan</span>&nbsp;<span class="builtintype" id="8318618">string</span><span class="op" id="8318624">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318628">done</span>&nbsp;<span class="op" id="8318633">:=</span>&nbsp;<span class="builtinfunc" id="8318636">make</span><span class="op" id="8318640">(</span><span class="keyword" id="8318641">chan</span>&nbsp;<span class="builtintype" id="8318646">int</span><span class="op" id="8318649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318653">switch</span>&nbsp;<span class="ident" id="8318660">tt</span><span class="op" id="8318662">.</span><span class="ident" id="8318663">snet</span>&nbsp;<span class="op" id="8318668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318672">case</span>&nbsp;<span class="string" id="8318677">&#34;tcp&#34;</span><span class="op" id="8318682">,</span>&nbsp;<span class="string" id="8318684">&#34;tcp4&#34;</span><span class="op" id="8318690">,</span>&nbsp;<span class="string" id="8318692">&#34;tcp6&#34;</span><span class="op" id="8318698">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318703">tt</span><span class="op" id="8318705">.</span><span class="ident" id="8318706">saddr</span>&nbsp;<span class="op" id="8318712">+=</span>&nbsp;<span class="string" id="8318715">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318722">case</span>&nbsp;<span class="string" id="8318727">&#34;unix&#34;</span><span class="op" id="8318733">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318738">os</span><span class="op" id="8318740">.</span><span class="ident" id="8318741">Remove</span><span class="op" id="8318747">(</span><span class="ident" id="8318748">tt</span><span class="op" id="8318750">.</span><span class="ident" id="8318751">saddr</span><span class="op" id="8318756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318761">os</span><span class="op" id="8318763">.</span><span class="ident" id="8318764">Remove</span><span class="op" id="8318770">(</span><span class="ident" id="8318771">tt</span><span class="op" id="8318773">.</span><span class="ident" id="8318774">caddr</span><span class="op" id="8318779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8318783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318788">go</span>&nbsp;<span class="ident" id="8318791">runStreamConnServer</span><span class="op" id="8318810">(</span><span class="ident" id="8318811">t</span><span class="op" id="8318812">,</span>&nbsp;<span class="ident" id="8318814">tt</span><span class="op" id="8318816">.</span><span class="ident" id="8318817">snet</span><span class="op" id="8318821">,</span>&nbsp;<span class="ident" id="8318823">tt</span><span class="op" id="8318825">.</span><span class="ident" id="8318826">saddr</span><span class="op" id="8318831">,</span>&nbsp;<span class="ident" id="8318833">listening</span><span class="op" id="8318842">,</span>&nbsp;<span class="ident" id="8318844">done</span><span class="op" id="8318848">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318852">taddr</span>&nbsp;<span class="op" id="8318858">:=</span>&nbsp;<span class="op" id="8318861">&lt;-</span><span class="ident" id="8318863">listening</span>&nbsp;<span class="comment" id="8318873">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318904">switch</span>&nbsp;<span class="ident" id="8318911">tt</span><span class="op" id="8318913">.</span><span class="ident" id="8318914">cnet</span>&nbsp;<span class="op" id="8318919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318923">case</span>&nbsp;<span class="string" id="8318928">&#34;tcp&#34;</span><span class="op" id="8318933">,</span>&nbsp;<span class="string" id="8318935">&#34;tcp4&#34;</span><span class="op" id="8318941">,</span>&nbsp;<span class="string" id="8318943">&#34;tcp6&#34;</span><span class="op" id="8318949">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8318954">_</span><span class="op" id="8318955">,</span>&nbsp;<span class="ident" id="8318957">port</span><span class="op" id="8318961">,</span>&nbsp;<span class="ident" id="8318963">err</span>&nbsp;<span class="op" id="8318967">:=</span>&nbsp;<span class="ident" id="8318970">SplitHostPort</span><span class="op" id="8318983">(</span><span class="ident" id="8318984">taddr</span><span class="op" id="8318989">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8318994">if</span>&nbsp;<span class="ident" id="8318997">err</span>&nbsp;<span class="op" id="8319001">!=</span>&nbsp;<span class="ident" id="8319004">nil</span>&nbsp;<span class="op" id="8319008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319014">t</span><span class="op" id="8319015">.</span><span class="ident" id="8319016">Fatalf</span><span class="op" id="8319022">(</span><span class="string" id="8319023">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8319053">,</span>&nbsp;<span class="ident" id="8319055">taddr</span><span class="op" id="8319060">,</span>&nbsp;<span class="ident" id="8319062">err</span><span class="op" id="8319065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319075">taddr</span>&nbsp;<span class="op" id="8319081">=</span>&nbsp;<span class="ident" id="8319083">tt</span><span class="op" id="8319085">.</span><span class="ident" id="8319086">caddr</span>&nbsp;<span class="op" id="8319092">+</span>&nbsp;<span class="string" id="8319094">&#34;:&#34;</span>&nbsp;<span class="op" id="8319098">+</span>&nbsp;<span class="ident" id="8319100">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319107">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319112">runStreamConnClient</span><span class="op" id="8319131">(</span><span class="ident" id="8319132">t</span><span class="op" id="8319133">,</span>&nbsp;<span class="ident" id="8319135">tt</span><span class="op" id="8319137">.</span><span class="ident" id="8319138">cnet</span><span class="op" id="8319142">,</span>&nbsp;<span class="ident" id="8319144">taddr</span><span class="op" id="8319149">,</span>&nbsp;<span class="ident" id="8319151">tt</span><span class="op" id="8319153">.</span><span class="ident" id="8319154">empty</span><span class="op" id="8319159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319163">&lt;-</span><span class="ident" id="8319165">done</span>&nbsp;<span class="comment" id="8319170">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319201">switch</span>&nbsp;<span class="ident" id="8319208">tt</span><span class="op" id="8319210">.</span><span class="ident" id="8319211">snet</span>&nbsp;<span class="op" id="8319216">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319220">case</span>&nbsp;<span class="string" id="8319225">&#34;unix&#34;</span><span class="op" id="8319231">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319236">os</span><span class="op" id="8319238">.</span><span class="ident" id="8319239">Remove</span><span class="op" id="8319245">(</span><span class="ident" id="8319246">tt</span><span class="op" id="8319248">.</span><span class="ident" id="8319249">saddr</span><span class="op" id="8319254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319259">os</span><span class="op" id="8319261">.</span><span class="ident" id="8319262">Remove</span><span class="op" id="8319268">(</span><span class="ident" id="8319269">tt</span><span class="op" id="8319271">.</span><span class="ident" id="8319272">caddr</span><span class="op" id="8319277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319284">}</span><br>
<span class="lineno">130</span><span class="op" id="8319286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8319289">var</span>&nbsp;<span class="ident" id="8319293">seqpacketConnServerTests</span>&nbsp;<span class="op" id="8319318">=</span>&nbsp;<span class="op" id="8319320">[</span><span class="op" id="8319321">]</span><span class="keyword" id="8319322">struct</span>&nbsp;<span class="op" id="8319329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319332">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8319342">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319350">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8319360">string</span>&nbsp;<span class="comment" id="8319367">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319386">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8319396">string</span>&nbsp;<span class="comment" id="8319403">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319422">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8319432">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8319439">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319464">linuxOnly</span>&nbsp;<span class="builtintype" id="8319474">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8319481">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="8319535">}</span><span class="op" id="8319536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319539">{</span><span class="ident" id="8319540">net</span><span class="op" id="8319543">:</span>&nbsp;<span class="string" id="8319545">&#34;unixpacket&#34;</span><span class="op" id="8319557">,</span>&nbsp;<span class="ident" id="8319559">saddr</span><span class="op" id="8319564">:</span>&nbsp;<span class="ident" id="8319566">testUnixAddr</span><span class="op" id="8319578">(</span><span class="op" id="8319579">)</span><span class="op" id="8319580">,</span>&nbsp;<span class="ident" id="8319582">caddr</span><span class="op" id="8319587">:</span>&nbsp;<span class="ident" id="8319589">testUnixAddr</span><span class="op" id="8319601">(</span><span class="op" id="8319602">)</span><span class="op" id="8319603">}</span><span class="op" id="8319604">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319607">{</span><span class="ident" id="8319608">net</span><span class="op" id="8319611">:</span>&nbsp;<span class="string" id="8319613">&#34;unixpacket&#34;</span><span class="op" id="8319625">,</span>&nbsp;<span class="ident" id="8319627">saddr</span><span class="op" id="8319632">:</span>&nbsp;<span class="string" id="8319634">&#34;@gotest4/net&#34;</span><span class="op" id="8319648">,</span>&nbsp;<span class="ident" id="8319650">caddr</span><span class="op" id="8319655">:</span>&nbsp;<span class="string" id="8319657">&#34;@gotest4/net.local&#34;</span><span class="op" id="8319677">,</span>&nbsp;<span class="ident" id="8319679">linuxOnly</span><span class="op" id="8319688">:</span>&nbsp;<span class="builtintype" id="8319690">true</span><span class="op" id="8319694">}</span><span class="op" id="8319695">,</span><br>
<span class="lineno"></span><span class="op" id="8319697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8319700">func</span>&nbsp;<span class="ident" id="8319705">TestSeqpacketConnServer</span><span class="op" id="8319728">(</span><span class="ident" id="8319729">t</span>&nbsp;<span class="op" id="8319731">*</span><span class="ident" id="8319732">testing</span><span class="op" id="8319739">.</span><span class="ident" id="8319740">T</span><span class="op" id="8319741">)</span>&nbsp;<span class="op" id="8319743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319746">switch</span>&nbsp;<span class="ident" id="8319753">runtime</span><span class="op" id="8319760">.</span><span class="ident" id="8319761">GOOS</span>&nbsp;<span class="op" id="8319766">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319769">case</span>&nbsp;<span class="string" id="8319774">&#34;darwin&#34;</span><span class="op" id="8319782">,</span>&nbsp;<span class="string" id="8319784">&#34;nacl&#34;</span><span class="op" id="8319790">,</span>&nbsp;<span class="string" id="8319792">&#34;openbsd&#34;</span><span class="op" id="8319801">,</span>&nbsp;<span class="string" id="8319803">&#34;plan9&#34;</span><span class="op" id="8319810">,</span>&nbsp;<span class="string" id="8319812">&#34;windows&#34;</span><span class="op" id="8319821">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319825">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319838">case</span>&nbsp;<span class="string" id="8319843">&#34;freebsd&#34;</span><span class="op" id="8319852">:</span>&nbsp;<span class="comment" id="8319854">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8319896">t</span><span class="op" id="8319897">.</span><span class="ident" id="8319898">Skipf</span><span class="op" id="8319903">(</span><span class="string" id="8319904">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8319925">,</span>&nbsp;<span class="ident" id="8319927">runtime</span><span class="op" id="8319934">.</span><span class="ident" id="8319935">GOOS</span><span class="op" id="8319939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8319942">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319946">for</span>&nbsp;<span class="ident" id="8319950">_</span><span class="op" id="8319951">,</span>&nbsp;<span class="ident" id="8319953">tt</span>&nbsp;<span class="op" id="8319956">:=</span>&nbsp;<span class="keyword" id="8319959">range</span>&nbsp;<span class="ident" id="8319965">seqpacketConnServerTests</span>&nbsp;<span class="op" id="8319990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8319994">if</span>&nbsp;<span class="ident" id="8319997">runtime</span><span class="op" id="8320004">.</span><span class="ident" id="8320005">GOOS</span>&nbsp;<span class="op" id="8320010">!=</span>&nbsp;<span class="string" id="8320013">&#34;linux&#34;</span>&nbsp;<span class="op" id="8320021">&amp;&amp;</span>&nbsp;<span class="ident" id="8320024">tt</span><span class="op" id="8320026">.</span><span class="ident" id="8320027">linuxOnly</span>&nbsp;<span class="op" id="8320037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320042">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8320053">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320057">listening</span>&nbsp;<span class="op" id="8320067">:=</span>&nbsp;<span class="builtinfunc" id="8320070">make</span><span class="op" id="8320074">(</span><span class="keyword" id="8320075">chan</span>&nbsp;<span class="builtintype" id="8320080">string</span><span class="op" id="8320086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320090">done</span>&nbsp;<span class="op" id="8320095">:=</span>&nbsp;<span class="builtinfunc" id="8320098">make</span><span class="op" id="8320102">(</span><span class="keyword" id="8320103">chan</span>&nbsp;<span class="builtintype" id="8320108">int</span><span class="op" id="8320111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320115">switch</span>&nbsp;<span class="ident" id="8320122">tt</span><span class="op" id="8320124">.</span><span class="ident" id="8320125">net</span>&nbsp;<span class="op" id="8320129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320133">case</span>&nbsp;<span class="string" id="8320138">&#34;unixpacket&#34;</span><span class="op" id="8320150">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320155">os</span><span class="op" id="8320157">.</span><span class="ident" id="8320158">Remove</span><span class="op" id="8320164">(</span><span class="ident" id="8320165">tt</span><span class="op" id="8320167">.</span><span class="ident" id="8320168">saddr</span><span class="op" id="8320173">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320178">os</span><span class="op" id="8320180">.</span><span class="ident" id="8320181">Remove</span><span class="op" id="8320187">(</span><span class="ident" id="8320188">tt</span><span class="op" id="8320190">.</span><span class="ident" id="8320191">caddr</span><span class="op" id="8320196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8320200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320205">go</span>&nbsp;<span class="ident" id="8320208">runStreamConnServer</span><span class="op" id="8320227">(</span><span class="ident" id="8320228">t</span><span class="op" id="8320229">,</span>&nbsp;<span class="ident" id="8320231">tt</span><span class="op" id="8320233">.</span><span class="ident" id="8320234">net</span><span class="op" id="8320237">,</span>&nbsp;<span class="ident" id="8320239">tt</span><span class="op" id="8320241">.</span><span class="ident" id="8320242">saddr</span><span class="op" id="8320247">,</span>&nbsp;<span class="ident" id="8320249">listening</span><span class="op" id="8320258">,</span>&nbsp;<span class="ident" id="8320260">done</span><span class="op" id="8320264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320268">taddr</span>&nbsp;<span class="op" id="8320274">:=</span>&nbsp;<span class="op" id="8320277">&lt;-</span><span class="ident" id="8320279">listening</span>&nbsp;<span class="comment" id="8320289">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320320">runStreamConnClient</span><span class="op" id="8320339">(</span><span class="ident" id="8320340">t</span><span class="op" id="8320341">,</span>&nbsp;<span class="ident" id="8320343">tt</span><span class="op" id="8320345">.</span><span class="ident" id="8320346">net</span><span class="op" id="8320349">,</span>&nbsp;<span class="ident" id="8320351">taddr</span><span class="op" id="8320356">,</span>&nbsp;<span class="ident" id="8320358">tt</span><span class="op" id="8320360">.</span><span class="ident" id="8320361">empty</span><span class="op" id="8320366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8320370">&lt;-</span><span class="ident" id="8320372">done</span>&nbsp;<span class="comment" id="8320377">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320408">switch</span>&nbsp;<span class="ident" id="8320415">tt</span><span class="op" id="8320417">.</span><span class="ident" id="8320418">net</span>&nbsp;<span class="op" id="8320422">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320426">case</span>&nbsp;<span class="string" id="8320431">&#34;unixpacket&#34;</span><span class="op" id="8320443">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320448">os</span><span class="op" id="8320450">.</span><span class="ident" id="8320451">Remove</span><span class="op" id="8320457">(</span><span class="ident" id="8320458">tt</span><span class="op" id="8320460">.</span><span class="ident" id="8320461">saddr</span><span class="op" id="8320466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320471">os</span><span class="op" id="8320473">.</span><span class="ident" id="8320474">Remove</span><span class="op" id="8320480">(</span><span class="ident" id="8320481">tt</span><span class="op" id="8320483">.</span><span class="ident" id="8320484">caddr</span><span class="op" id="8320489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8320493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8320496">}</span><br>
<span class="lineno">175</span><span class="op" id="8320498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8320501">func</span>&nbsp;<span class="ident" id="8320506">runStreamConnServer</span><span class="op" id="8320525">(</span><span class="ident" id="8320526">t</span>&nbsp;<span class="op" id="8320528">*</span><span class="ident" id="8320529">testing</span><span class="op" id="8320536">.</span><span class="ident" id="8320537">T</span><span class="op" id="8320538">,</span>&nbsp;<span class="ident" id="8320540">net</span><span class="op" id="8320543">,</span>&nbsp;<span class="ident" id="8320545">laddr</span>&nbsp;<span class="builtintype" id="8320551">string</span><span class="op" id="8320557">,</span>&nbsp;<span class="ident" id="8320559">listening</span>&nbsp;<span class="keyword" id="8320569">chan</span><span class="op" id="8320573">&lt;-</span>&nbsp;<span class="builtintype" id="8320576">string</span><span class="op" id="8320582">,</span>&nbsp;<span class="ident" id="8320584">done</span>&nbsp;<span class="keyword" id="8320589">chan</span><span class="op" id="8320593">&lt;-</span>&nbsp;<span class="builtintype" id="8320596">int</span><span class="op" id="8320599">)</span>&nbsp;<span class="op" id="8320601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320604">defer</span>&nbsp;<span class="builtinfunc" id="8320610">close</span><span class="op" id="8320615">(</span><span class="ident" id="8320616">done</span><span class="op" id="8320620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320623">l</span><span class="op" id="8320624">,</span>&nbsp;<span class="ident" id="8320626">err</span>&nbsp;<span class="op" id="8320630">:=</span>&nbsp;<span class="ident" id="8320633">Listen</span><span class="op" id="8320639">(</span><span class="ident" id="8320640">net</span><span class="op" id="8320643">,</span>&nbsp;<span class="ident" id="8320645">laddr</span><span class="op" id="8320650">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320653">if</span>&nbsp;<span class="ident" id="8320656">err</span>&nbsp;<span class="op" id="8320660">!=</span>&nbsp;<span class="ident" id="8320663">nil</span>&nbsp;<span class="op" id="8320667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320671">t</span><span class="op" id="8320672">.</span><span class="ident" id="8320673">Errorf</span><span class="op" id="8320679">(</span><span class="string" id="8320680">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8320707">,</span>&nbsp;<span class="ident" id="8320709">net</span><span class="op" id="8320712">,</span>&nbsp;<span class="ident" id="8320714">laddr</span><span class="op" id="8320719">,</span>&nbsp;<span class="ident" id="8320721">err</span><span class="op" id="8320724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320728">listening</span>&nbsp;<span class="op" id="8320738">&lt;-</span>&nbsp;<span class="string" id="8320741">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320751">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8320759">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320762">defer</span>&nbsp;<span class="ident" id="8320768">l</span><span class="op" id="8320769">.</span><span class="ident" id="8320770">Close</span><span class="op" id="8320775">(</span><span class="op" id="8320776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320779">listening</span>&nbsp;<span class="op" id="8320789">&lt;-</span>&nbsp;<span class="ident" id="8320792">l</span><span class="op" id="8320793">.</span><span class="ident" id="8320794">Addr</span><span class="op" id="8320798">(</span><span class="op" id="8320799">)</span><span class="op" id="8320800">.</span><span class="ident" id="8320801">String</span><span class="op" id="8320807">(</span><span class="op" id="8320808">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320812">echo</span>&nbsp;<span class="op" id="8320817">:=</span>&nbsp;<span class="keyword" id="8320820">func</span><span class="op" id="8320824">(</span><span class="ident" id="8320825">rw</span>&nbsp;<span class="ident" id="8320828">io</span><span class="op" id="8320830">.</span><span class="ident" id="8320831">ReadWriter</span><span class="op" id="8320841">,</span>&nbsp;<span class="ident" id="8320843">done</span>&nbsp;<span class="keyword" id="8320848">chan</span><span class="op" id="8320852">&lt;-</span>&nbsp;<span class="builtintype" id="8320855">int</span><span class="op" id="8320858">)</span>&nbsp;<span class="op" id="8320860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320864">buf</span>&nbsp;<span class="op" id="8320868">:=</span>&nbsp;<span class="builtinfunc" id="8320871">make</span><span class="op" id="8320875">(</span><span class="op" id="8320876">[</span><span class="op" id="8320877">]</span><span class="builtintype" id="8320878">byte</span><span class="op" id="8320882">,</span>&nbsp;<span class="num" id="8320884">1024</span><span class="op" id="8320888">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320892">for</span>&nbsp;<span class="op" id="8320896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8320901">n</span><span class="op" id="8320902">,</span>&nbsp;<span class="ident" id="8320904">err</span>&nbsp;<span class="op" id="8320908">:=</span>&nbsp;<span class="ident" id="8320911">rw</span><span class="op" id="8320913">.</span><span class="ident" id="8320914">Read</span><span class="op" id="8320918">(</span><span class="ident" id="8320919">buf</span><span class="op" id="8320922">[</span><span class="num" id="8320923">0</span><span class="op" id="8320924">:</span><span class="op" id="8320925">]</span><span class="op" id="8320926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320931">if</span>&nbsp;<span class="ident" id="8320934">err</span>&nbsp;<span class="op" id="8320938">!=</span>&nbsp;<span class="ident" id="8320941">nil</span>&nbsp;<span class="op" id="8320945">||</span>&nbsp;<span class="ident" id="8320948">n</span>&nbsp;<span class="op" id="8320950">==</span>&nbsp;<span class="num" id="8320953">0</span>&nbsp;<span class="op" id="8320955">||</span>&nbsp;<span class="builtintype" id="8320958">string</span><span class="op" id="8320964">(</span><span class="ident" id="8320965">buf</span><span class="op" id="8320968">[</span><span class="op" id="8320969">:</span><span class="ident" id="8320970">n</span><span class="op" id="8320971">]</span><span class="op" id="8320972">)</span>&nbsp;<span class="op" id="8320974">==</span>&nbsp;<span class="string" id="8320977">&#34;END&#34;</span>&nbsp;<span class="op" id="8320983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8320989">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8320998">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321003">rw</span><span class="op" id="8321005">.</span><span class="ident" id="8321006">Write</span><span class="op" id="8321011">(</span><span class="ident" id="8321012">buf</span><span class="op" id="8321015">[</span><span class="num" id="8321016">0</span><span class="op" id="8321017">:</span><span class="ident" id="8321018">n</span><span class="op" id="8321019">]</span><span class="op" id="8321020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8321024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8321028">close</span><span class="op" id="8321033">(</span><span class="ident" id="8321034">done</span><span class="op" id="8321038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8321041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="8321044">run</span><span class="op" id="8321047">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321050">for</span>&nbsp;<span class="op" id="8321054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321058">c</span><span class="op" id="8321059">,</span>&nbsp;<span class="ident" id="8321061">err</span>&nbsp;<span class="op" id="8321065">:=</span>&nbsp;<span class="ident" id="8321068">l</span><span class="op" id="8321069">.</span><span class="ident" id="8321070">Accept</span><span class="op" id="8321076">(</span><span class="op" id="8321077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321081">if</span>&nbsp;<span class="ident" id="8321084">err</span>&nbsp;<span class="op" id="8321088">!=</span>&nbsp;<span class="ident" id="8321091">nil</span>&nbsp;<span class="op" id="8321095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321100">t</span><span class="op" id="8321101">.</span><span class="ident" id="8321102">Logf</span><span class="op" id="8321106">(</span><span class="string" id="8321107">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8321126">,</span>&nbsp;<span class="ident" id="8321128">err</span><span class="op" id="8321131">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321136">continue</span>&nbsp;<span class="ident" id="8321145">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8321151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321155">echodone</span>&nbsp;<span class="op" id="8321164">:=</span>&nbsp;<span class="builtinfunc" id="8321167">make</span><span class="op" id="8321171">(</span><span class="keyword" id="8321172">chan</span>&nbsp;<span class="builtintype" id="8321177">int</span><span class="op" id="8321180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321184">go</span>&nbsp;<span class="ident" id="8321187">echo</span><span class="op" id="8321191">(</span><span class="ident" id="8321192">c</span><span class="op" id="8321193">,</span>&nbsp;<span class="ident" id="8321195">echodone</span><span class="op" id="8321203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8321207">&lt;-</span><span class="ident" id="8321209">echodone</span>&nbsp;<span class="comment" id="8321218">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321246">c</span><span class="op" id="8321247">.</span><span class="ident" id="8321248">Close</span><span class="op" id="8321253">(</span><span class="op" id="8321254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321258">break</span>&nbsp;<span class="ident" id="8321264">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8321269">}</span><br>
<span class="lineno"></span><span class="op" id="8321271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="8321274">func</span>&nbsp;<span class="ident" id="8321279">runStreamConnClient</span><span class="op" id="8321298">(</span><span class="ident" id="8321299">t</span>&nbsp;<span class="op" id="8321301">*</span><span class="ident" id="8321302">testing</span><span class="op" id="8321309">.</span><span class="ident" id="8321310">T</span><span class="op" id="8321311">,</span>&nbsp;<span class="ident" id="8321313">net</span><span class="op" id="8321316">,</span>&nbsp;<span class="ident" id="8321318">taddr</span>&nbsp;<span class="builtintype" id="8321324">string</span><span class="op" id="8321330">,</span>&nbsp;<span class="ident" id="8321332">isEmpty</span>&nbsp;<span class="builtintype" id="8321340">bool</span><span class="op" id="8321344">)</span>&nbsp;<span class="op" id="8321346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321349">c</span><span class="op" id="8321350">,</span>&nbsp;<span class="ident" id="8321352">err</span>&nbsp;<span class="op" id="8321356">:=</span>&nbsp;<span class="ident" id="8321359">Dial</span><span class="op" id="8321363">(</span><span class="ident" id="8321364">net</span><span class="op" id="8321367">,</span>&nbsp;<span class="ident" id="8321369">taddr</span><span class="op" id="8321374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321377">if</span>&nbsp;<span class="ident" id="8321380">err</span>&nbsp;<span class="op" id="8321384">!=</span>&nbsp;<span class="ident" id="8321387">nil</span>&nbsp;<span class="op" id="8321391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321395">t</span><span class="op" id="8321396">.</span><span class="ident" id="8321397">Fatalf</span><span class="op" id="8321403">(</span><span class="string" id="8321404">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8321429">,</span>&nbsp;<span class="ident" id="8321431">net</span><span class="op" id="8321434">,</span>&nbsp;<span class="ident" id="8321436">taddr</span><span class="op" id="8321441">,</span>&nbsp;<span class="ident" id="8321443">err</span><span class="op" id="8321446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8321449">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321452">defer</span>&nbsp;<span class="ident" id="8321458">c</span><span class="op" id="8321459">.</span><span class="ident" id="8321460">Close</span><span class="op" id="8321465">(</span><span class="op" id="8321466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321469">c</span><span class="op" id="8321470">.</span><span class="ident" id="8321471">SetReadDeadline</span><span class="op" id="8321486">(</span><span class="ident" id="8321487">time</span><span class="op" id="8321491">.</span><span class="ident" id="8321492">Now</span><span class="op" id="8321495">(</span><span class="op" id="8321496">)</span><span class="op" id="8321497">.</span><span class="ident" id="8321498">Add</span><span class="op" id="8321501">(</span><span class="num" id="8321502">1</span>&nbsp;<span class="op" id="8321504">*</span>&nbsp;<span class="ident" id="8321506">time</span><span class="op" id="8321510">.</span><span class="ident" id="8321511">Second</span><span class="op" id="8321517">)</span><span class="op" id="8321518">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321522">var</span>&nbsp;<span class="ident" id="8321526">wb</span>&nbsp;<span class="op" id="8321529">[</span><span class="op" id="8321530">]</span><span class="builtintype" id="8321531">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321537">if</span>&nbsp;<span class="op" id="8321540">!</span><span class="ident" id="8321541">isEmpty</span>&nbsp;<span class="op" id="8321549">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321553">wb</span>&nbsp;<span class="op" id="8321556">=</span>&nbsp;<span class="op" id="8321558">[</span><span class="op" id="8321559">]</span><span class="builtintype" id="8321560">byte</span><span class="op" id="8321564">(</span><span class="string" id="8321565">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="8321593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8321596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321599">if</span>&nbsp;<span class="ident" id="8321602">n</span><span class="op" id="8321603">,</span>&nbsp;<span class="ident" id="8321605">err</span>&nbsp;<span class="op" id="8321609">:=</span>&nbsp;<span class="ident" id="8321612">c</span><span class="op" id="8321613">.</span><span class="ident" id="8321614">Write</span><span class="op" id="8321619">(</span><span class="ident" id="8321620">wb</span><span class="op" id="8321622">)</span><span class="op" id="8321623">;</span>&nbsp;<span class="ident" id="8321625">err</span>&nbsp;<span class="op" id="8321629">!=</span>&nbsp;<span class="ident" id="8321632">nil</span>&nbsp;<span class="op" id="8321636">||</span>&nbsp;<span class="ident" id="8321639">n</span>&nbsp;<span class="op" id="8321641">!=</span>&nbsp;<span class="builtinfunc" id="8321644">len</span><span class="op" id="8321647">(</span><span class="ident" id="8321648">wb</span><span class="op" id="8321650">)</span>&nbsp;<span class="op" id="8321652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321656">t</span><span class="op" id="8321657">.</span><span class="ident" id="8321658">Fatalf</span><span class="op" id="8321664">(</span><span class="string" id="8321665">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8321703">,</span>&nbsp;<span class="ident" id="8321705">n</span><span class="op" id="8321706">,</span>&nbsp;<span class="ident" id="8321708">err</span><span class="op" id="8321711">,</span>&nbsp;<span class="builtinfunc" id="8321713">len</span><span class="op" id="8321716">(</span><span class="ident" id="8321717">wb</span><span class="op" id="8321719">)</span><span class="op" id="8321720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8321723">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321727">rb</span>&nbsp;<span class="op" id="8321730">:=</span>&nbsp;<span class="builtinfunc" id="8321733">make</span><span class="op" id="8321737">(</span><span class="op" id="8321738">[</span><span class="op" id="8321739">]</span><span class="builtintype" id="8321740">byte</span><span class="op" id="8321744">,</span>&nbsp;<span class="num" id="8321746">1024</span><span class="op" id="8321750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321753">if</span>&nbsp;<span class="ident" id="8321756">n</span><span class="op" id="8321757">,</span>&nbsp;<span class="ident" id="8321759">err</span>&nbsp;<span class="op" id="8321763">:=</span>&nbsp;<span class="ident" id="8321766">c</span><span class="op" id="8321767">.</span><span class="ident" id="8321768">Read</span><span class="op" id="8321772">(</span><span class="ident" id="8321773">rb</span><span class="op" id="8321775">[</span><span class="num" id="8321776">0</span><span class="op" id="8321777">:</span><span class="op" id="8321778">]</span><span class="op" id="8321779">)</span><span class="op" id="8321780">;</span>&nbsp;<span class="ident" id="8321782">err</span>&nbsp;<span class="op" id="8321786">!=</span>&nbsp;<span class="ident" id="8321789">nil</span>&nbsp;<span class="op" id="8321793">||</span>&nbsp;<span class="ident" id="8321796">n</span>&nbsp;<span class="op" id="8321798">!=</span>&nbsp;<span class="builtinfunc" id="8321801">len</span><span class="op" id="8321804">(</span><span class="ident" id="8321805">wb</span><span class="op" id="8321807">)</span>&nbsp;<span class="op" id="8321809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8321813">t</span><span class="op" id="8321814">.</span><span class="ident" id="8321815">Fatalf</span><span class="op" id="8321821">(</span><span class="string" id="8321822">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8321859">,</span>&nbsp;<span class="ident" id="8321861">n</span><span class="op" id="8321862">,</span>&nbsp;<span class="ident" id="8321864">err</span><span class="op" id="8321867">,</span>&nbsp;<span class="builtinfunc" id="8321869">len</span><span class="op" id="8321872">(</span><span class="ident" id="8321873">wb</span><span class="op" id="8321875">)</span><span class="op" id="8321876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8321879">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8321883">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8321924">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321976">switch</span>&nbsp;<span class="ident" id="8321983">net</span>&nbsp;<span class="op" id="8321987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8321990">case</span>&nbsp;<span class="string" id="8321995">&#34;unixpacket&#34;</span><span class="op" id="8322007">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8322011">c</span><span class="op" id="8322012">.</span><span class="ident" id="8322013">Write</span><span class="op" id="8322018">(</span><span class="op" id="8322019">[</span><span class="op" id="8322020">]</span><span class="builtintype" id="8322021">byte</span><span class="op" id="8322025">(</span><span class="string" id="8322026">&#34;END&#34;</span><span class="op" id="8322031">)</span><span class="op" id="8322032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8322035">}</span><br>
<span class="lineno"></span><span class="op" id="8322037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8322040">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="8322083">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="8322134">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="8322186">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="8322216">var</span>&nbsp;<span class="ident" id="8322220">testDatagram</span>&nbsp;<span class="op" id="8322233">=</span>&nbsp;<span class="ident" id="8322235">flag</span><span class="op" id="8322239">.</span><span class="ident" id="8322240">Bool</span><span class="op" id="8322244">(</span><span class="string" id="8322245">&#34;datagram&#34;</span><span class="op" id="8322255">,</span>&nbsp;<span class="builtintype" id="8322257">false</span><span class="op" id="8322262">,</span>&nbsp;<span class="string" id="8322264">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="8322298">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="8322301">var</span>&nbsp;<span class="ident" id="8322305">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="8322335">=</span>&nbsp;<span class="op" id="8322337">[</span><span class="op" id="8322338">]</span><span class="keyword" id="8322339">struct</span>&nbsp;<span class="op" id="8322346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8322349">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8322359">string</span>&nbsp;<span class="comment" id="8322366">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8322382">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8322392">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8322400">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8322410">string</span>&nbsp;<span class="comment" id="8322417">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8322433">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8322443">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8322451">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8322461">bool</span>&nbsp;<span class="comment" id="8322466">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8322507">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8322517">bool</span>&nbsp;<span class="comment" id="8322522">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8322568">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8322578">bool</span>&nbsp;<span class="comment" id="8322583">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8322614">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8322624">bool</span>&nbsp;<span class="comment" id="8322629">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8322654">linuxOnly</span>&nbsp;<span class="builtintype" id="8322664">bool</span>&nbsp;<span class="comment" id="8322669">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="8322723">}</span><span class="op" id="8322724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8322727">{</span><span class="ident" id="8322728">snet</span><span class="op" id="8322732">:</span>&nbsp;<span class="string" id="8322734">&#34;udp&#34;</span><span class="op" id="8322739">,</span>&nbsp;<span class="ident" id="8322741">saddr</span><span class="op" id="8322746">:</span>&nbsp;<span class="string" id="8322748">&#34;&#34;</span><span class="op" id="8322750">,</span>&nbsp;<span class="ident" id="8322752">cnet</span><span class="op" id="8322756">:</span>&nbsp;<span class="string" id="8322758">&#34;udp&#34;</span><span class="op" id="8322763">,</span>&nbsp;<span class="ident" id="8322765">caddr</span><span class="op" id="8322770">:</span>&nbsp;<span class="string" id="8322772">&#34;127.0.0.1&#34;</span><span class="op" id="8322783">}</span><span class="op" id="8322784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8322787">{</span><span class="ident" id="8322788">snet</span><span class="op" id="8322792">:</span>&nbsp;<span class="string" id="8322794">&#34;udp&#34;</span><span class="op" id="8322799">,</span>&nbsp;<span class="ident" id="8322801">saddr</span><span class="op" id="8322806">:</span>&nbsp;<span class="string" id="8322808">&#34;0.0.0.0&#34;</span><span class="op" id="8322817">,</span>&nbsp;<span class="ident" id="8322819">cnet</span><span class="op" id="8322823">:</span>&nbsp;<span class="string" id="8322825">&#34;udp&#34;</span><span class="op" id="8322830">,</span>&nbsp;<span class="ident" id="8322832">caddr</span><span class="op" id="8322837">:</span>&nbsp;<span class="string" id="8322839">&#34;127.0.0.1&#34;</span><span class="op" id="8322850">}</span><span class="op" id="8322851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8322854">{</span><span class="ident" id="8322855">snet</span><span class="op" id="8322859">:</span>&nbsp;<span class="string" id="8322861">&#34;udp&#34;</span><span class="op" id="8322866">,</span>&nbsp;<span class="ident" id="8322868">saddr</span><span class="op" id="8322873">:</span>&nbsp;<span class="string" id="8322875">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8322893">,</span>&nbsp;<span class="ident" id="8322895">cnet</span><span class="op" id="8322899">:</span>&nbsp;<span class="string" id="8322901">&#34;udp&#34;</span><span class="op" id="8322906">,</span>&nbsp;<span class="ident" id="8322908">caddr</span><span class="op" id="8322913">:</span>&nbsp;<span class="string" id="8322915">&#34;127.0.0.1&#34;</span><span class="op" id="8322926">}</span><span class="op" id="8322927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8322930">{</span><span class="ident" id="8322931">snet</span><span class="op" id="8322935">:</span>&nbsp;<span class="string" id="8322937">&#34;udp&#34;</span><span class="op" id="8322942">,</span>&nbsp;<span class="ident" id="8322944">saddr</span><span class="op" id="8322949">:</span>&nbsp;<span class="string" id="8322951">&#34;[::]&#34;</span><span class="op" id="8322957">,</span>&nbsp;<span class="ident" id="8322959">cnet</span><span class="op" id="8322963">:</span>&nbsp;<span class="string" id="8322965">&#34;udp&#34;</span><span class="op" id="8322970">,</span>&nbsp;<span class="ident" id="8322972">caddr</span><span class="op" id="8322977">:</span>&nbsp;<span class="string" id="8322979">&#34;[::1]&#34;</span><span class="op" id="8322986">,</span>&nbsp;<span class="ident" id="8322988">ipv6</span><span class="op" id="8322992">:</span>&nbsp;<span class="builtintype" id="8322994">true</span><span class="op" id="8322998">}</span><span class="op" id="8322999">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323003">{</span><span class="ident" id="8323004">snet</span><span class="op" id="8323008">:</span>&nbsp;<span class="string" id="8323010">&#34;udp&#34;</span><span class="op" id="8323015">,</span>&nbsp;<span class="ident" id="8323017">saddr</span><span class="op" id="8323022">:</span>&nbsp;<span class="string" id="8323024">&#34;&#34;</span><span class="op" id="8323026">,</span>&nbsp;<span class="ident" id="8323028">cnet</span><span class="op" id="8323032">:</span>&nbsp;<span class="string" id="8323034">&#34;udp&#34;</span><span class="op" id="8323039">,</span>&nbsp;<span class="ident" id="8323041">caddr</span><span class="op" id="8323046">:</span>&nbsp;<span class="string" id="8323048">&#34;[::1]&#34;</span><span class="op" id="8323055">,</span>&nbsp;<span class="ident" id="8323057">ipv4map</span><span class="op" id="8323064">:</span>&nbsp;<span class="builtintype" id="8323066">true</span><span class="op" id="8323070">}</span><span class="op" id="8323071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323074">{</span><span class="ident" id="8323075">snet</span><span class="op" id="8323079">:</span>&nbsp;<span class="string" id="8323081">&#34;udp&#34;</span><span class="op" id="8323086">,</span>&nbsp;<span class="ident" id="8323088">saddr</span><span class="op" id="8323093">:</span>&nbsp;<span class="string" id="8323095">&#34;0.0.0.0&#34;</span><span class="op" id="8323104">,</span>&nbsp;<span class="ident" id="8323106">cnet</span><span class="op" id="8323110">:</span>&nbsp;<span class="string" id="8323112">&#34;udp&#34;</span><span class="op" id="8323117">,</span>&nbsp;<span class="ident" id="8323119">caddr</span><span class="op" id="8323124">:</span>&nbsp;<span class="string" id="8323126">&#34;[::1]&#34;</span><span class="op" id="8323133">,</span>&nbsp;<span class="ident" id="8323135">ipv4map</span><span class="op" id="8323142">:</span>&nbsp;<span class="builtintype" id="8323144">true</span><span class="op" id="8323148">}</span><span class="op" id="8323149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323152">{</span><span class="ident" id="8323153">snet</span><span class="op" id="8323157">:</span>&nbsp;<span class="string" id="8323159">&#34;udp&#34;</span><span class="op" id="8323164">,</span>&nbsp;<span class="ident" id="8323166">saddr</span><span class="op" id="8323171">:</span>&nbsp;<span class="string" id="8323173">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8323191">,</span>&nbsp;<span class="ident" id="8323193">cnet</span><span class="op" id="8323197">:</span>&nbsp;<span class="string" id="8323199">&#34;udp&#34;</span><span class="op" id="8323204">,</span>&nbsp;<span class="ident" id="8323206">caddr</span><span class="op" id="8323211">:</span>&nbsp;<span class="string" id="8323213">&#34;[::1]&#34;</span><span class="op" id="8323220">,</span>&nbsp;<span class="ident" id="8323222">ipv4map</span><span class="op" id="8323229">:</span>&nbsp;<span class="builtintype" id="8323231">true</span><span class="op" id="8323235">}</span><span class="op" id="8323236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323239">{</span><span class="ident" id="8323240">snet</span><span class="op" id="8323244">:</span>&nbsp;<span class="string" id="8323246">&#34;udp&#34;</span><span class="op" id="8323251">,</span>&nbsp;<span class="ident" id="8323253">saddr</span><span class="op" id="8323258">:</span>&nbsp;<span class="string" id="8323260">&#34;[::]&#34;</span><span class="op" id="8323266">,</span>&nbsp;<span class="ident" id="8323268">cnet</span><span class="op" id="8323272">:</span>&nbsp;<span class="string" id="8323274">&#34;udp&#34;</span><span class="op" id="8323279">,</span>&nbsp;<span class="ident" id="8323281">caddr</span><span class="op" id="8323286">:</span>&nbsp;<span class="string" id="8323288">&#34;127.0.0.1&#34;</span><span class="op" id="8323299">,</span>&nbsp;<span class="ident" id="8323301">ipv4map</span><span class="op" id="8323308">:</span>&nbsp;<span class="builtintype" id="8323310">true</span><span class="op" id="8323314">}</span><span class="op" id="8323315">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323319">{</span><span class="ident" id="8323320">snet</span><span class="op" id="8323324">:</span>&nbsp;<span class="string" id="8323326">&#34;udp&#34;</span><span class="op" id="8323331">,</span>&nbsp;<span class="ident" id="8323333">saddr</span><span class="op" id="8323338">:</span>&nbsp;<span class="string" id="8323340">&#34;&#34;</span><span class="op" id="8323342">,</span>&nbsp;<span class="ident" id="8323344">cnet</span><span class="op" id="8323348">:</span>&nbsp;<span class="string" id="8323350">&#34;udp4&#34;</span><span class="op" id="8323356">,</span>&nbsp;<span class="ident" id="8323358">caddr</span><span class="op" id="8323363">:</span>&nbsp;<span class="string" id="8323365">&#34;127.0.0.1&#34;</span><span class="op" id="8323376">}</span><span class="op" id="8323377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323380">{</span><span class="ident" id="8323381">snet</span><span class="op" id="8323385">:</span>&nbsp;<span class="string" id="8323387">&#34;udp&#34;</span><span class="op" id="8323392">,</span>&nbsp;<span class="ident" id="8323394">saddr</span><span class="op" id="8323399">:</span>&nbsp;<span class="string" id="8323401">&#34;0.0.0.0&#34;</span><span class="op" id="8323410">,</span>&nbsp;<span class="ident" id="8323412">cnet</span><span class="op" id="8323416">:</span>&nbsp;<span class="string" id="8323418">&#34;udp4&#34;</span><span class="op" id="8323424">,</span>&nbsp;<span class="ident" id="8323426">caddr</span><span class="op" id="8323431">:</span>&nbsp;<span class="string" id="8323433">&#34;127.0.0.1&#34;</span><span class="op" id="8323444">}</span><span class="op" id="8323445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323448">{</span><span class="ident" id="8323449">snet</span><span class="op" id="8323453">:</span>&nbsp;<span class="string" id="8323455">&#34;udp&#34;</span><span class="op" id="8323460">,</span>&nbsp;<span class="ident" id="8323462">saddr</span><span class="op" id="8323467">:</span>&nbsp;<span class="string" id="8323469">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8323487">,</span>&nbsp;<span class="ident" id="8323489">cnet</span><span class="op" id="8323493">:</span>&nbsp;<span class="string" id="8323495">&#34;udp4&#34;</span><span class="op" id="8323501">,</span>&nbsp;<span class="ident" id="8323503">caddr</span><span class="op" id="8323508">:</span>&nbsp;<span class="string" id="8323510">&#34;127.0.0.1&#34;</span><span class="op" id="8323521">}</span><span class="op" id="8323522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323525">{</span><span class="ident" id="8323526">snet</span><span class="op" id="8323530">:</span>&nbsp;<span class="string" id="8323532">&#34;udp&#34;</span><span class="op" id="8323537">,</span>&nbsp;<span class="ident" id="8323539">saddr</span><span class="op" id="8323544">:</span>&nbsp;<span class="string" id="8323546">&#34;[::]&#34;</span><span class="op" id="8323552">,</span>&nbsp;<span class="ident" id="8323554">cnet</span><span class="op" id="8323558">:</span>&nbsp;<span class="string" id="8323560">&#34;udp6&#34;</span><span class="op" id="8323566">,</span>&nbsp;<span class="ident" id="8323568">caddr</span><span class="op" id="8323573">:</span>&nbsp;<span class="string" id="8323575">&#34;[::1]&#34;</span><span class="op" id="8323582">,</span>&nbsp;<span class="ident" id="8323584">ipv6</span><span class="op" id="8323588">:</span>&nbsp;<span class="builtintype" id="8323590">true</span><span class="op" id="8323594">}</span><span class="op" id="8323595">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323599">{</span><span class="ident" id="8323600">snet</span><span class="op" id="8323604">:</span>&nbsp;<span class="string" id="8323606">&#34;udp&#34;</span><span class="op" id="8323611">,</span>&nbsp;<span class="ident" id="8323613">saddr</span><span class="op" id="8323618">:</span>&nbsp;<span class="string" id="8323620">&#34;&#34;</span><span class="op" id="8323622">,</span>&nbsp;<span class="ident" id="8323624">cnet</span><span class="op" id="8323628">:</span>&nbsp;<span class="string" id="8323630">&#34;udp6&#34;</span><span class="op" id="8323636">,</span>&nbsp;<span class="ident" id="8323638">caddr</span><span class="op" id="8323643">:</span>&nbsp;<span class="string" id="8323645">&#34;[::1]&#34;</span><span class="op" id="8323652">,</span>&nbsp;<span class="ident" id="8323654">ipv4map</span><span class="op" id="8323661">:</span>&nbsp;<span class="builtintype" id="8323663">true</span><span class="op" id="8323667">}</span><span class="op" id="8323668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323671">{</span><span class="ident" id="8323672">snet</span><span class="op" id="8323676">:</span>&nbsp;<span class="string" id="8323678">&#34;udp&#34;</span><span class="op" id="8323683">,</span>&nbsp;<span class="ident" id="8323685">saddr</span><span class="op" id="8323690">:</span>&nbsp;<span class="string" id="8323692">&#34;0.0.0.0&#34;</span><span class="op" id="8323701">,</span>&nbsp;<span class="ident" id="8323703">cnet</span><span class="op" id="8323707">:</span>&nbsp;<span class="string" id="8323709">&#34;udp6&#34;</span><span class="op" id="8323715">,</span>&nbsp;<span class="ident" id="8323717">caddr</span><span class="op" id="8323722">:</span>&nbsp;<span class="string" id="8323724">&#34;[::1]&#34;</span><span class="op" id="8323731">,</span>&nbsp;<span class="ident" id="8323733">ipv4map</span><span class="op" id="8323740">:</span>&nbsp;<span class="builtintype" id="8323742">true</span><span class="op" id="8323746">}</span><span class="op" id="8323747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323750">{</span><span class="ident" id="8323751">snet</span><span class="op" id="8323755">:</span>&nbsp;<span class="string" id="8323757">&#34;udp&#34;</span><span class="op" id="8323762">,</span>&nbsp;<span class="ident" id="8323764">saddr</span><span class="op" id="8323769">:</span>&nbsp;<span class="string" id="8323771">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8323789">,</span>&nbsp;<span class="ident" id="8323791">cnet</span><span class="op" id="8323795">:</span>&nbsp;<span class="string" id="8323797">&#34;udp6&#34;</span><span class="op" id="8323803">,</span>&nbsp;<span class="ident" id="8323805">caddr</span><span class="op" id="8323810">:</span>&nbsp;<span class="string" id="8323812">&#34;[::1]&#34;</span><span class="op" id="8323819">,</span>&nbsp;<span class="ident" id="8323821">ipv4map</span><span class="op" id="8323828">:</span>&nbsp;<span class="builtintype" id="8323830">true</span><span class="op" id="8323834">}</span><span class="op" id="8323835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323838">{</span><span class="ident" id="8323839">snet</span><span class="op" id="8323843">:</span>&nbsp;<span class="string" id="8323845">&#34;udp&#34;</span><span class="op" id="8323850">,</span>&nbsp;<span class="ident" id="8323852">saddr</span><span class="op" id="8323857">:</span>&nbsp;<span class="string" id="8323859">&#34;[::]&#34;</span><span class="op" id="8323865">,</span>&nbsp;<span class="ident" id="8323867">cnet</span><span class="op" id="8323871">:</span>&nbsp;<span class="string" id="8323873">&#34;udp4&#34;</span><span class="op" id="8323879">,</span>&nbsp;<span class="ident" id="8323881">caddr</span><span class="op" id="8323886">:</span>&nbsp;<span class="string" id="8323888">&#34;127.0.0.1&#34;</span><span class="op" id="8323899">,</span>&nbsp;<span class="ident" id="8323901">ipv4map</span><span class="op" id="8323908">:</span>&nbsp;<span class="builtintype" id="8323910">true</span><span class="op" id="8323914">}</span><span class="op" id="8323915">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323919">{</span><span class="ident" id="8323920">snet</span><span class="op" id="8323924">:</span>&nbsp;<span class="string" id="8323926">&#34;udp&#34;</span><span class="op" id="8323931">,</span>&nbsp;<span class="ident" id="8323933">saddr</span><span class="op" id="8323938">:</span>&nbsp;<span class="string" id="8323940">&#34;127.0.0.1&#34;</span><span class="op" id="8323951">,</span>&nbsp;<span class="ident" id="8323953">cnet</span><span class="op" id="8323957">:</span>&nbsp;<span class="string" id="8323959">&#34;udp&#34;</span><span class="op" id="8323964">,</span>&nbsp;<span class="ident" id="8323966">caddr</span><span class="op" id="8323971">:</span>&nbsp;<span class="string" id="8323973">&#34;127.0.0.1&#34;</span><span class="op" id="8323984">}</span><span class="op" id="8323985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8323988">{</span><span class="ident" id="8323989">snet</span><span class="op" id="8323993">:</span>&nbsp;<span class="string" id="8323995">&#34;udp&#34;</span><span class="op" id="8324000">,</span>&nbsp;<span class="ident" id="8324002">saddr</span><span class="op" id="8324007">:</span>&nbsp;<span class="string" id="8324009">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="8324029">,</span>&nbsp;<span class="ident" id="8324031">cnet</span><span class="op" id="8324035">:</span>&nbsp;<span class="string" id="8324037">&#34;udp&#34;</span><span class="op" id="8324042">,</span>&nbsp;<span class="ident" id="8324044">caddr</span><span class="op" id="8324049">:</span>&nbsp;<span class="string" id="8324051">&#34;127.0.0.1&#34;</span><span class="op" id="8324062">}</span><span class="op" id="8324063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324066">{</span><span class="ident" id="8324067">snet</span><span class="op" id="8324071">:</span>&nbsp;<span class="string" id="8324073">&#34;udp&#34;</span><span class="op" id="8324078">,</span>&nbsp;<span class="ident" id="8324080">saddr</span><span class="op" id="8324085">:</span>&nbsp;<span class="string" id="8324087">&#34;[::1]&#34;</span><span class="op" id="8324094">,</span>&nbsp;<span class="ident" id="8324096">cnet</span><span class="op" id="8324100">:</span>&nbsp;<span class="string" id="8324102">&#34;udp&#34;</span><span class="op" id="8324107">,</span>&nbsp;<span class="ident" id="8324109">caddr</span><span class="op" id="8324114">:</span>&nbsp;<span class="string" id="8324116">&#34;[::1]&#34;</span><span class="op" id="8324123">,</span>&nbsp;<span class="ident" id="8324125">ipv6</span><span class="op" id="8324129">:</span>&nbsp;<span class="builtintype" id="8324131">true</span><span class="op" id="8324135">}</span><span class="op" id="8324136">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324140">{</span><span class="ident" id="8324141">snet</span><span class="op" id="8324145">:</span>&nbsp;<span class="string" id="8324147">&#34;udp4&#34;</span><span class="op" id="8324153">,</span>&nbsp;<span class="ident" id="8324155">saddr</span><span class="op" id="8324160">:</span>&nbsp;<span class="string" id="8324162">&#34;&#34;</span><span class="op" id="8324164">,</span>&nbsp;<span class="ident" id="8324166">cnet</span><span class="op" id="8324170">:</span>&nbsp;<span class="string" id="8324172">&#34;udp4&#34;</span><span class="op" id="8324178">,</span>&nbsp;<span class="ident" id="8324180">caddr</span><span class="op" id="8324185">:</span>&nbsp;<span class="string" id="8324187">&#34;127.0.0.1&#34;</span><span class="op" id="8324198">}</span><span class="op" id="8324199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324202">{</span><span class="ident" id="8324203">snet</span><span class="op" id="8324207">:</span>&nbsp;<span class="string" id="8324209">&#34;udp4&#34;</span><span class="op" id="8324215">,</span>&nbsp;<span class="ident" id="8324217">saddr</span><span class="op" id="8324222">:</span>&nbsp;<span class="string" id="8324224">&#34;0.0.0.0&#34;</span><span class="op" id="8324233">,</span>&nbsp;<span class="ident" id="8324235">cnet</span><span class="op" id="8324239">:</span>&nbsp;<span class="string" id="8324241">&#34;udp4&#34;</span><span class="op" id="8324247">,</span>&nbsp;<span class="ident" id="8324249">caddr</span><span class="op" id="8324254">:</span>&nbsp;<span class="string" id="8324256">&#34;127.0.0.1&#34;</span><span class="op" id="8324267">}</span><span class="op" id="8324268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324271">{</span><span class="ident" id="8324272">snet</span><span class="op" id="8324276">:</span>&nbsp;<span class="string" id="8324278">&#34;udp4&#34;</span><span class="op" id="8324284">,</span>&nbsp;<span class="ident" id="8324286">saddr</span><span class="op" id="8324291">:</span>&nbsp;<span class="string" id="8324293">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="8324311">,</span>&nbsp;<span class="ident" id="8324313">cnet</span><span class="op" id="8324317">:</span>&nbsp;<span class="string" id="8324319">&#34;udp4&#34;</span><span class="op" id="8324325">,</span>&nbsp;<span class="ident" id="8324327">caddr</span><span class="op" id="8324332">:</span>&nbsp;<span class="string" id="8324334">&#34;127.0.0.1&#34;</span><span class="op" id="8324345">}</span><span class="op" id="8324346">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324350">{</span><span class="ident" id="8324351">snet</span><span class="op" id="8324355">:</span>&nbsp;<span class="string" id="8324357">&#34;udp4&#34;</span><span class="op" id="8324363">,</span>&nbsp;<span class="ident" id="8324365">saddr</span><span class="op" id="8324370">:</span>&nbsp;<span class="string" id="8324372">&#34;127.0.0.1&#34;</span><span class="op" id="8324383">,</span>&nbsp;<span class="ident" id="8324385">cnet</span><span class="op" id="8324389">:</span>&nbsp;<span class="string" id="8324391">&#34;udp4&#34;</span><span class="op" id="8324397">,</span>&nbsp;<span class="ident" id="8324399">caddr</span><span class="op" id="8324404">:</span>&nbsp;<span class="string" id="8324406">&#34;127.0.0.1&#34;</span><span class="op" id="8324417">}</span><span class="op" id="8324418">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324422">{</span><span class="ident" id="8324423">snet</span><span class="op" id="8324427">:</span>&nbsp;<span class="string" id="8324429">&#34;udp6&#34;</span><span class="op" id="8324435">,</span>&nbsp;<span class="ident" id="8324437">saddr</span><span class="op" id="8324442">:</span>&nbsp;<span class="string" id="8324444">&#34;&#34;</span><span class="op" id="8324446">,</span>&nbsp;<span class="ident" id="8324448">cnet</span><span class="op" id="8324452">:</span>&nbsp;<span class="string" id="8324454">&#34;udp6&#34;</span><span class="op" id="8324460">,</span>&nbsp;<span class="ident" id="8324462">caddr</span><span class="op" id="8324467">:</span>&nbsp;<span class="string" id="8324469">&#34;[::1]&#34;</span><span class="op" id="8324476">,</span>&nbsp;<span class="ident" id="8324478">ipv6</span><span class="op" id="8324482">:</span>&nbsp;<span class="builtintype" id="8324484">true</span><span class="op" id="8324488">}</span><span class="op" id="8324489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324492">{</span><span class="ident" id="8324493">snet</span><span class="op" id="8324497">:</span>&nbsp;<span class="string" id="8324499">&#34;udp6&#34;</span><span class="op" id="8324505">,</span>&nbsp;<span class="ident" id="8324507">saddr</span><span class="op" id="8324512">:</span>&nbsp;<span class="string" id="8324514">&#34;[::]&#34;</span><span class="op" id="8324520">,</span>&nbsp;<span class="ident" id="8324522">cnet</span><span class="op" id="8324526">:</span>&nbsp;<span class="string" id="8324528">&#34;udp6&#34;</span><span class="op" id="8324534">,</span>&nbsp;<span class="ident" id="8324536">caddr</span><span class="op" id="8324541">:</span>&nbsp;<span class="string" id="8324543">&#34;[::1]&#34;</span><span class="op" id="8324550">,</span>&nbsp;<span class="ident" id="8324552">ipv6</span><span class="op" id="8324556">:</span>&nbsp;<span class="builtintype" id="8324558">true</span><span class="op" id="8324562">}</span><span class="op" id="8324563">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324567">{</span><span class="ident" id="8324568">snet</span><span class="op" id="8324572">:</span>&nbsp;<span class="string" id="8324574">&#34;udp6&#34;</span><span class="op" id="8324580">,</span>&nbsp;<span class="ident" id="8324582">saddr</span><span class="op" id="8324587">:</span>&nbsp;<span class="string" id="8324589">&#34;[::1]&#34;</span><span class="op" id="8324596">,</span>&nbsp;<span class="ident" id="8324598">cnet</span><span class="op" id="8324602">:</span>&nbsp;<span class="string" id="8324604">&#34;udp6&#34;</span><span class="op" id="8324610">,</span>&nbsp;<span class="ident" id="8324612">caddr</span><span class="op" id="8324617">:</span>&nbsp;<span class="string" id="8324619">&#34;[::1]&#34;</span><span class="op" id="8324626">,</span>&nbsp;<span class="ident" id="8324628">ipv6</span><span class="op" id="8324632">:</span>&nbsp;<span class="builtintype" id="8324634">true</span><span class="op" id="8324638">}</span><span class="op" id="8324639">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324643">{</span><span class="ident" id="8324644">snet</span><span class="op" id="8324648">:</span>&nbsp;<span class="string" id="8324650">&#34;udp&#34;</span><span class="op" id="8324655">,</span>&nbsp;<span class="ident" id="8324657">saddr</span><span class="op" id="8324662">:</span>&nbsp;<span class="string" id="8324664">&#34;127.0.0.1&#34;</span><span class="op" id="8324675">,</span>&nbsp;<span class="ident" id="8324677">cnet</span><span class="op" id="8324681">:</span>&nbsp;<span class="string" id="8324683">&#34;udp&#34;</span><span class="op" id="8324688">,</span>&nbsp;<span class="ident" id="8324690">caddr</span><span class="op" id="8324695">:</span>&nbsp;<span class="string" id="8324697">&#34;127.0.0.1&#34;</span><span class="op" id="8324708">,</span>&nbsp;<span class="ident" id="8324710">dial</span><span class="op" id="8324714">:</span>&nbsp;<span class="builtintype" id="8324716">true</span><span class="op" id="8324720">}</span><span class="op" id="8324721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324724">{</span><span class="ident" id="8324725">snet</span><span class="op" id="8324729">:</span>&nbsp;<span class="string" id="8324731">&#34;udp&#34;</span><span class="op" id="8324736">,</span>&nbsp;<span class="ident" id="8324738">saddr</span><span class="op" id="8324743">:</span>&nbsp;<span class="string" id="8324745">&#34;127.0.0.1&#34;</span><span class="op" id="8324756">,</span>&nbsp;<span class="ident" id="8324758">cnet</span><span class="op" id="8324762">:</span>&nbsp;<span class="string" id="8324764">&#34;udp&#34;</span><span class="op" id="8324769">,</span>&nbsp;<span class="ident" id="8324771">caddr</span><span class="op" id="8324776">:</span>&nbsp;<span class="string" id="8324778">&#34;127.0.0.1&#34;</span><span class="op" id="8324789">,</span>&nbsp;<span class="ident" id="8324791">empty</span><span class="op" id="8324796">:</span>&nbsp;<span class="builtintype" id="8324798">true</span><span class="op" id="8324802">}</span><span class="op" id="8324803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324806">{</span><span class="ident" id="8324807">snet</span><span class="op" id="8324811">:</span>&nbsp;<span class="string" id="8324813">&#34;udp&#34;</span><span class="op" id="8324818">,</span>&nbsp;<span class="ident" id="8324820">saddr</span><span class="op" id="8324825">:</span>&nbsp;<span class="string" id="8324827">&#34;127.0.0.1&#34;</span><span class="op" id="8324838">,</span>&nbsp;<span class="ident" id="8324840">cnet</span><span class="op" id="8324844">:</span>&nbsp;<span class="string" id="8324846">&#34;udp&#34;</span><span class="op" id="8324851">,</span>&nbsp;<span class="ident" id="8324853">caddr</span><span class="op" id="8324858">:</span>&nbsp;<span class="string" id="8324860">&#34;127.0.0.1&#34;</span><span class="op" id="8324871">,</span>&nbsp;<span class="ident" id="8324873">dial</span><span class="op" id="8324877">:</span>&nbsp;<span class="builtintype" id="8324879">true</span><span class="op" id="8324883">,</span>&nbsp;<span class="ident" id="8324885">empty</span><span class="op" id="8324890">:</span>&nbsp;<span class="builtintype" id="8324892">true</span><span class="op" id="8324896">}</span><span class="op" id="8324897">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324901">{</span><span class="ident" id="8324902">snet</span><span class="op" id="8324906">:</span>&nbsp;<span class="string" id="8324908">&#34;udp&#34;</span><span class="op" id="8324913">,</span>&nbsp;<span class="ident" id="8324915">saddr</span><span class="op" id="8324920">:</span>&nbsp;<span class="string" id="8324922">&#34;[::1]&#34;</span><span class="op" id="8324929">,</span>&nbsp;<span class="ident" id="8324931">cnet</span><span class="op" id="8324935">:</span>&nbsp;<span class="string" id="8324937">&#34;udp&#34;</span><span class="op" id="8324942">,</span>&nbsp;<span class="ident" id="8324944">caddr</span><span class="op" id="8324949">:</span>&nbsp;<span class="string" id="8324951">&#34;[::1]&#34;</span><span class="op" id="8324958">,</span>&nbsp;<span class="ident" id="8324960">ipv6</span><span class="op" id="8324964">:</span>&nbsp;<span class="builtintype" id="8324966">true</span><span class="op" id="8324970">,</span>&nbsp;<span class="ident" id="8324972">dial</span><span class="op" id="8324976">:</span>&nbsp;<span class="builtintype" id="8324978">true</span><span class="op" id="8324982">}</span><span class="op" id="8324983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8324986">{</span><span class="ident" id="8324987">snet</span><span class="op" id="8324991">:</span>&nbsp;<span class="string" id="8324993">&#34;udp&#34;</span><span class="op" id="8324998">,</span>&nbsp;<span class="ident" id="8325000">saddr</span><span class="op" id="8325005">:</span>&nbsp;<span class="string" id="8325007">&#34;[::1]&#34;</span><span class="op" id="8325014">,</span>&nbsp;<span class="ident" id="8325016">cnet</span><span class="op" id="8325020">:</span>&nbsp;<span class="string" id="8325022">&#34;udp&#34;</span><span class="op" id="8325027">,</span>&nbsp;<span class="ident" id="8325029">caddr</span><span class="op" id="8325034">:</span>&nbsp;<span class="string" id="8325036">&#34;[::1]&#34;</span><span class="op" id="8325043">,</span>&nbsp;<span class="ident" id="8325045">ipv6</span><span class="op" id="8325049">:</span>&nbsp;<span class="builtintype" id="8325051">true</span><span class="op" id="8325055">,</span>&nbsp;<span class="ident" id="8325057">empty</span><span class="op" id="8325062">:</span>&nbsp;<span class="builtintype" id="8325064">true</span><span class="op" id="8325068">}</span><span class="op" id="8325069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8325072">{</span><span class="ident" id="8325073">snet</span><span class="op" id="8325077">:</span>&nbsp;<span class="string" id="8325079">&#34;udp&#34;</span><span class="op" id="8325084">,</span>&nbsp;<span class="ident" id="8325086">saddr</span><span class="op" id="8325091">:</span>&nbsp;<span class="string" id="8325093">&#34;[::1]&#34;</span><span class="op" id="8325100">,</span>&nbsp;<span class="ident" id="8325102">cnet</span><span class="op" id="8325106">:</span>&nbsp;<span class="string" id="8325108">&#34;udp&#34;</span><span class="op" id="8325113">,</span>&nbsp;<span class="ident" id="8325115">caddr</span><span class="op" id="8325120">:</span>&nbsp;<span class="string" id="8325122">&#34;[::1]&#34;</span><span class="op" id="8325129">,</span>&nbsp;<span class="ident" id="8325131">ipv6</span><span class="op" id="8325135">:</span>&nbsp;<span class="builtintype" id="8325137">true</span><span class="op" id="8325141">,</span>&nbsp;<span class="ident" id="8325143">dial</span><span class="op" id="8325147">:</span>&nbsp;<span class="builtintype" id="8325149">true</span><span class="op" id="8325153">,</span>&nbsp;<span class="ident" id="8325155">empty</span><span class="op" id="8325160">:</span>&nbsp;<span class="builtintype" id="8325162">true</span><span class="op" id="8325166">}</span><span class="op" id="8325167">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8325171">{</span><span class="ident" id="8325172">snet</span><span class="op" id="8325176">:</span>&nbsp;<span class="string" id="8325178">&#34;unixgram&#34;</span><span class="op" id="8325188">,</span>&nbsp;<span class="ident" id="8325190">saddr</span><span class="op" id="8325195">:</span>&nbsp;<span class="ident" id="8325197">testUnixAddr</span><span class="op" id="8325209">(</span><span class="op" id="8325210">)</span><span class="op" id="8325211">,</span>&nbsp;<span class="ident" id="8325213">cnet</span><span class="op" id="8325217">:</span>&nbsp;<span class="string" id="8325219">&#34;unixgram&#34;</span><span class="op" id="8325229">,</span>&nbsp;<span class="ident" id="8325231">caddr</span><span class="op" id="8325236">:</span>&nbsp;<span class="ident" id="8325238">testUnixAddr</span><span class="op" id="8325250">(</span><span class="op" id="8325251">)</span><span class="op" id="8325252">}</span><span class="op" id="8325253">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8325256">{</span><span class="ident" id="8325257">snet</span><span class="op" id="8325261">:</span>&nbsp;<span class="string" id="8325263">&#34;unixgram&#34;</span><span class="op" id="8325273">,</span>&nbsp;<span class="ident" id="8325275">saddr</span><span class="op" id="8325280">:</span>&nbsp;<span class="ident" id="8325282">testUnixAddr</span><span class="op" id="8325294">(</span><span class="op" id="8325295">)</span><span class="op" id="8325296">,</span>&nbsp;<span class="ident" id="8325298">cnet</span><span class="op" id="8325302">:</span>&nbsp;<span class="string" id="8325304">&#34;unixgram&#34;</span><span class="op" id="8325314">,</span>&nbsp;<span class="ident" id="8325316">caddr</span><span class="op" id="8325321">:</span>&nbsp;<span class="ident" id="8325323">testUnixAddr</span><span class="op" id="8325335">(</span><span class="op" id="8325336">)</span><span class="op" id="8325337">,</span>&nbsp;<span class="ident" id="8325339">dial</span><span class="op" id="8325343">:</span>&nbsp;<span class="builtintype" id="8325345">true</span><span class="op" id="8325349">}</span><span class="op" id="8325350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8325353">{</span><span class="ident" id="8325354">snet</span><span class="op" id="8325358">:</span>&nbsp;<span class="string" id="8325360">&#34;unixgram&#34;</span><span class="op" id="8325370">,</span>&nbsp;<span class="ident" id="8325372">saddr</span><span class="op" id="8325377">:</span>&nbsp;<span class="ident" id="8325379">testUnixAddr</span><span class="op" id="8325391">(</span><span class="op" id="8325392">)</span><span class="op" id="8325393">,</span>&nbsp;<span class="ident" id="8325395">cnet</span><span class="op" id="8325399">:</span>&nbsp;<span class="string" id="8325401">&#34;unixgram&#34;</span><span class="op" id="8325411">,</span>&nbsp;<span class="ident" id="8325413">caddr</span><span class="op" id="8325418">:</span>&nbsp;<span class="ident" id="8325420">testUnixAddr</span><span class="op" id="8325432">(</span><span class="op" id="8325433">)</span><span class="op" id="8325434">,</span>&nbsp;<span class="ident" id="8325436">empty</span><span class="op" id="8325441">:</span>&nbsp;<span class="builtintype" id="8325443">true</span><span class="op" id="8325447">}</span><span class="op" id="8325448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8325451">{</span><span class="ident" id="8325452">snet</span><span class="op" id="8325456">:</span>&nbsp;<span class="string" id="8325458">&#34;unixgram&#34;</span><span class="op" id="8325468">,</span>&nbsp;<span class="ident" id="8325470">saddr</span><span class="op" id="8325475">:</span>&nbsp;<span class="ident" id="8325477">testUnixAddr</span><span class="op" id="8325489">(</span><span class="op" id="8325490">)</span><span class="op" id="8325491">,</span>&nbsp;<span class="ident" id="8325493">cnet</span><span class="op" id="8325497">:</span>&nbsp;<span class="string" id="8325499">&#34;unixgram&#34;</span><span class="op" id="8325509">,</span>&nbsp;<span class="ident" id="8325511">caddr</span><span class="op" id="8325516">:</span>&nbsp;<span class="ident" id="8325518">testUnixAddr</span><span class="op" id="8325530">(</span><span class="op" id="8325531">)</span><span class="op" id="8325532">,</span>&nbsp;<span class="ident" id="8325534">dial</span><span class="op" id="8325538">:</span>&nbsp;<span class="builtintype" id="8325540">true</span><span class="op" id="8325544">,</span>&nbsp;<span class="ident" id="8325546">empty</span><span class="op" id="8325551">:</span>&nbsp;<span class="builtintype" id="8325553">true</span><span class="op" id="8325557">}</span><span class="op" id="8325558">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8325562">{</span><span class="ident" id="8325563">snet</span><span class="op" id="8325567">:</span>&nbsp;<span class="string" id="8325569">&#34;unixgram&#34;</span><span class="op" id="8325579">,</span>&nbsp;<span class="ident" id="8325581">saddr</span><span class="op" id="8325586">:</span>&nbsp;<span class="string" id="8325588">&#34;@gotest6/net&#34;</span><span class="op" id="8325602">,</span>&nbsp;<span class="ident" id="8325604">cnet</span><span class="op" id="8325608">:</span>&nbsp;<span class="string" id="8325610">&#34;unixgram&#34;</span><span class="op" id="8325620">,</span>&nbsp;<span class="ident" id="8325622">caddr</span><span class="op" id="8325627">:</span>&nbsp;<span class="string" id="8325629">&#34;@gotest6/net.local&#34;</span><span class="op" id="8325649">,</span>&nbsp;<span class="ident" id="8325651">linuxOnly</span><span class="op" id="8325660">:</span>&nbsp;<span class="builtintype" id="8325662">true</span><span class="op" id="8325666">}</span><span class="op" id="8325667">,</span><br>
<span class="lineno">310</span><span class="op" id="8325669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8325672">func</span>&nbsp;<span class="ident" id="8325677">TestDatagramPacketConnServer</span><span class="op" id="8325705">(</span><span class="ident" id="8325706">t</span>&nbsp;<span class="op" id="8325708">*</span><span class="ident" id="8325709">testing</span><span class="op" id="8325716">.</span><span class="ident" id="8325717">T</span><span class="op" id="8325718">)</span>&nbsp;<span class="op" id="8325720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8325723">if</span>&nbsp;<span class="op" id="8325726">!</span><span class="op" id="8325727">*</span><span class="ident" id="8325728">testDatagram</span>&nbsp;<span class="op" id="8325741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8325745">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8325753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8325757">for</span>&nbsp;<span class="ident" id="8325761">_</span><span class="op" id="8325762">,</span>&nbsp;<span class="ident" id="8325764">tt</span>&nbsp;<span class="op" id="8325767">:=</span>&nbsp;<span class="keyword" id="8325770">range</span>&nbsp;<span class="ident" id="8325776">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="8325806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8325810">if</span>&nbsp;<span class="ident" id="8325813">skipServerTest</span><span class="op" id="8325827">(</span><span class="ident" id="8325828">tt</span><span class="op" id="8325830">.</span><span class="ident" id="8325831">snet</span><span class="op" id="8325835">,</span>&nbsp;<span class="string" id="8325837">&#34;unixgram&#34;</span><span class="op" id="8325847">,</span>&nbsp;<span class="ident" id="8325849">tt</span><span class="op" id="8325851">.</span><span class="ident" id="8325852">saddr</span><span class="op" id="8325857">,</span>&nbsp;<span class="ident" id="8325859">tt</span><span class="op" id="8325861">.</span><span class="ident" id="8325862">ipv6</span><span class="op" id="8325866">,</span>&nbsp;<span class="ident" id="8325868">tt</span><span class="op" id="8325870">.</span><span class="ident" id="8325871">ipv4map</span><span class="op" id="8325878">,</span>&nbsp;<span class="ident" id="8325880">tt</span><span class="op" id="8325882">.</span><span class="ident" id="8325883">linuxOnly</span><span class="op" id="8325892">)</span>&nbsp;<span class="op" id="8325894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8325899">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8325910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8325915">listening</span>&nbsp;<span class="op" id="8325925">:=</span>&nbsp;<span class="builtinfunc" id="8325928">make</span><span class="op" id="8325932">(</span><span class="keyword" id="8325933">chan</span>&nbsp;<span class="builtintype" id="8325938">string</span><span class="op" id="8325944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8325948">done</span>&nbsp;<span class="op" id="8325953">:=</span>&nbsp;<span class="builtinfunc" id="8325956">make</span><span class="op" id="8325960">(</span><span class="keyword" id="8325961">chan</span>&nbsp;<span class="builtintype" id="8325966">int</span><span class="op" id="8325969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8325973">switch</span>&nbsp;<span class="ident" id="8325980">tt</span><span class="op" id="8325982">.</span><span class="ident" id="8325983">snet</span>&nbsp;<span class="op" id="8325988">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8325992">case</span>&nbsp;<span class="string" id="8325997">&#34;udp&#34;</span><span class="op" id="8326002">,</span>&nbsp;<span class="string" id="8326004">&#34;udp4&#34;</span><span class="op" id="8326010">,</span>&nbsp;<span class="string" id="8326012">&#34;udp6&#34;</span><span class="op" id="8326018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326023">tt</span><span class="op" id="8326025">.</span><span class="ident" id="8326026">saddr</span>&nbsp;<span class="op" id="8326032">+=</span>&nbsp;<span class="string" id="8326035">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8326042">case</span>&nbsp;<span class="string" id="8326047">&#34;unixgram&#34;</span><span class="op" id="8326057">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326062">os</span><span class="op" id="8326064">.</span><span class="ident" id="8326065">Remove</span><span class="op" id="8326071">(</span><span class="ident" id="8326072">tt</span><span class="op" id="8326074">.</span><span class="ident" id="8326075">saddr</span><span class="op" id="8326080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326085">os</span><span class="op" id="8326087">.</span><span class="ident" id="8326088">Remove</span><span class="op" id="8326094">(</span><span class="ident" id="8326095">tt</span><span class="op" id="8326097">.</span><span class="ident" id="8326098">caddr</span><span class="op" id="8326103">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8326107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8326112">go</span>&nbsp;<span class="ident" id="8326115">runDatagramPacketConnServer</span><span class="op" id="8326142">(</span><span class="ident" id="8326143">t</span><span class="op" id="8326144">,</span>&nbsp;<span class="ident" id="8326146">tt</span><span class="op" id="8326148">.</span><span class="ident" id="8326149">snet</span><span class="op" id="8326153">,</span>&nbsp;<span class="ident" id="8326155">tt</span><span class="op" id="8326157">.</span><span class="ident" id="8326158">saddr</span><span class="op" id="8326163">,</span>&nbsp;<span class="ident" id="8326165">listening</span><span class="op" id="8326174">,</span>&nbsp;<span class="ident" id="8326176">done</span><span class="op" id="8326180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326184">taddr</span>&nbsp;<span class="op" id="8326190">:=</span>&nbsp;<span class="op" id="8326193">&lt;-</span><span class="ident" id="8326195">listening</span>&nbsp;<span class="comment" id="8326205">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8326236">switch</span>&nbsp;<span class="ident" id="8326243">tt</span><span class="op" id="8326245">.</span><span class="ident" id="8326246">cnet</span>&nbsp;<span class="op" id="8326251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8326255">case</span>&nbsp;<span class="string" id="8326260">&#34;udp&#34;</span><span class="op" id="8326265">,</span>&nbsp;<span class="string" id="8326267">&#34;udp4&#34;</span><span class="op" id="8326273">,</span>&nbsp;<span class="string" id="8326275">&#34;udp6&#34;</span><span class="op" id="8326281">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326286">_</span><span class="op" id="8326287">,</span>&nbsp;<span class="ident" id="8326289">port</span><span class="op" id="8326293">,</span>&nbsp;<span class="ident" id="8326295">err</span>&nbsp;<span class="op" id="8326299">:=</span>&nbsp;<span class="ident" id="8326302">SplitHostPort</span><span class="op" id="8326315">(</span><span class="ident" id="8326316">taddr</span><span class="op" id="8326321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8326326">if</span>&nbsp;<span class="ident" id="8326329">err</span>&nbsp;<span class="op" id="8326333">!=</span>&nbsp;<span class="ident" id="8326336">nil</span>&nbsp;<span class="op" id="8326340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326346">t</span><span class="op" id="8326347">.</span><span class="ident" id="8326348">Fatalf</span><span class="op" id="8326354">(</span><span class="string" id="8326355">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8326385">,</span>&nbsp;<span class="ident" id="8326387">taddr</span><span class="op" id="8326392">,</span>&nbsp;<span class="ident" id="8326394">err</span><span class="op" id="8326397">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8326402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326407">taddr</span>&nbsp;<span class="op" id="8326413">=</span>&nbsp;<span class="ident" id="8326415">tt</span><span class="op" id="8326417">.</span><span class="ident" id="8326418">caddr</span>&nbsp;<span class="op" id="8326424">+</span>&nbsp;<span class="string" id="8326426">&#34;:&#34;</span>&nbsp;<span class="op" id="8326430">+</span>&nbsp;<span class="ident" id="8326432">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326440">tt</span><span class="op" id="8326442">.</span><span class="ident" id="8326443">caddr</span>&nbsp;<span class="op" id="8326449">+=</span>&nbsp;<span class="string" id="8326452">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8326459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8326463">if</span>&nbsp;<span class="ident" id="8326466">tt</span><span class="op" id="8326468">.</span><span class="ident" id="8326469">dial</span>&nbsp;<span class="op" id="8326474">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326479">runDatagramConnClient</span><span class="op" id="8326500">(</span><span class="ident" id="8326501">t</span><span class="op" id="8326502">,</span>&nbsp;<span class="ident" id="8326504">tt</span><span class="op" id="8326506">.</span><span class="ident" id="8326507">cnet</span><span class="op" id="8326511">,</span>&nbsp;<span class="ident" id="8326513">tt</span><span class="op" id="8326515">.</span><span class="ident" id="8326516">caddr</span><span class="op" id="8326521">,</span>&nbsp;<span class="ident" id="8326523">taddr</span><span class="op" id="8326528">,</span>&nbsp;<span class="ident" id="8326530">tt</span><span class="op" id="8326532">.</span><span class="ident" id="8326533">empty</span><span class="op" id="8326538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8326542">}</span>&nbsp;<span class="keyword" id="8326544">else</span>&nbsp;<span class="op" id="8326549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326554">runDatagramPacketConnClient</span><span class="op" id="8326581">(</span><span class="ident" id="8326582">t</span><span class="op" id="8326583">,</span>&nbsp;<span class="ident" id="8326585">tt</span><span class="op" id="8326587">.</span><span class="ident" id="8326588">cnet</span><span class="op" id="8326592">,</span>&nbsp;<span class="ident" id="8326594">tt</span><span class="op" id="8326596">.</span><span class="ident" id="8326597">caddr</span><span class="op" id="8326602">,</span>&nbsp;<span class="ident" id="8326604">taddr</span><span class="op" id="8326609">,</span>&nbsp;<span class="ident" id="8326611">tt</span><span class="op" id="8326613">.</span><span class="ident" id="8326614">empty</span><span class="op" id="8326619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8326623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8326627">&lt;-</span><span class="ident" id="8326629">done</span>&nbsp;<span class="comment" id="8326634">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8326659">&lt;-</span><span class="ident" id="8326661">done</span>&nbsp;<span class="comment" id="8326666">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8326697">switch</span>&nbsp;<span class="ident" id="8326704">tt</span><span class="op" id="8326706">.</span><span class="ident" id="8326707">snet</span>&nbsp;<span class="op" id="8326712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8326716">case</span>&nbsp;<span class="string" id="8326721">&#34;unixgram&#34;</span><span class="op" id="8326731">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326736">os</span><span class="op" id="8326738">.</span><span class="ident" id="8326739">Remove</span><span class="op" id="8326745">(</span><span class="ident" id="8326746">tt</span><span class="op" id="8326748">.</span><span class="ident" id="8326749">saddr</span><span class="op" id="8326754">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326759">os</span><span class="op" id="8326761">.</span><span class="ident" id="8326762">Remove</span><span class="op" id="8326768">(</span><span class="ident" id="8326769">tt</span><span class="op" id="8326771">.</span><span class="ident" id="8326772">caddr</span><span class="op" id="8326777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8326781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8326784">}</span><br>
<span class="lineno"></span><span class="op" id="8326786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="8326789">func</span>&nbsp;<span class="ident" id="8326794">runDatagramPacketConnServer</span><span class="op" id="8326821">(</span><span class="ident" id="8326822">t</span>&nbsp;<span class="op" id="8326824">*</span><span class="ident" id="8326825">testing</span><span class="op" id="8326832">.</span><span class="ident" id="8326833">T</span><span class="op" id="8326834">,</span>&nbsp;<span class="ident" id="8326836">net</span><span class="op" id="8326839">,</span>&nbsp;<span class="ident" id="8326841">laddr</span>&nbsp;<span class="builtintype" id="8326847">string</span><span class="op" id="8326853">,</span>&nbsp;<span class="ident" id="8326855">listening</span>&nbsp;<span class="keyword" id="8326865">chan</span><span class="op" id="8326869">&lt;-</span>&nbsp;<span class="builtintype" id="8326872">string</span><span class="op" id="8326878">,</span>&nbsp;<span class="ident" id="8326880">done</span>&nbsp;<span class="keyword" id="8326885">chan</span><span class="op" id="8326889">&lt;-</span>&nbsp;<span class="builtintype" id="8326892">int</span><span class="op" id="8326895">)</span>&nbsp;<span class="op" id="8326897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326900">c</span><span class="op" id="8326901">,</span>&nbsp;<span class="ident" id="8326903">err</span>&nbsp;<span class="op" id="8326907">:=</span>&nbsp;<span class="ident" id="8326910">ListenPacket</span><span class="op" id="8326922">(</span><span class="ident" id="8326923">net</span><span class="op" id="8326926">,</span>&nbsp;<span class="ident" id="8326928">laddr</span><span class="op" id="8326933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8326936">if</span>&nbsp;<span class="ident" id="8326939">err</span>&nbsp;<span class="op" id="8326943">!=</span>&nbsp;<span class="ident" id="8326946">nil</span>&nbsp;<span class="op" id="8326950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8326954">t</span><span class="op" id="8326955">.</span><span class="ident" id="8326956">Errorf</span><span class="op" id="8326962">(</span><span class="string" id="8326963">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8326996">,</span>&nbsp;<span class="ident" id="8326998">net</span><span class="op" id="8327001">,</span>&nbsp;<span class="ident" id="8327003">laddr</span><span class="op" id="8327008">,</span>&nbsp;<span class="ident" id="8327010">err</span><span class="op" id="8327013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327017">listening</span>&nbsp;<span class="op" id="8327027">&lt;-</span>&nbsp;<span class="string" id="8327030">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327040">done</span>&nbsp;<span class="op" id="8327045">&lt;-</span>&nbsp;<span class="num" id="8327048">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327052">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8327060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327063">defer</span>&nbsp;<span class="ident" id="8327069">c</span><span class="op" id="8327070">.</span><span class="ident" id="8327071">Close</span><span class="op" id="8327076">(</span><span class="op" id="8327077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327080">listening</span>&nbsp;<span class="op" id="8327090">&lt;-</span>&nbsp;<span class="ident" id="8327093">c</span><span class="op" id="8327094">.</span><span class="ident" id="8327095">LocalAddr</span><span class="op" id="8327104">(</span><span class="op" id="8327105">)</span><span class="op" id="8327106">.</span><span class="ident" id="8327107">String</span><span class="op" id="8327113">(</span><span class="op" id="8327114">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327118">buf</span>&nbsp;<span class="op" id="8327122">:=</span>&nbsp;<span class="builtinfunc" id="8327125">make</span><span class="op" id="8327129">(</span><span class="op" id="8327130">[</span><span class="op" id="8327131">]</span><span class="builtintype" id="8327132">byte</span><span class="op" id="8327136">,</span>&nbsp;<span class="num" id="8327138">1024</span><span class="op" id="8327142">)</span><br>
<span class="lineno"></span><span class="ident" id="8327144">run</span><span class="op" id="8327147">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327150">for</span>&nbsp;<span class="op" id="8327154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327158">c</span><span class="op" id="8327159">.</span><span class="ident" id="8327160">SetReadDeadline</span><span class="op" id="8327175">(</span><span class="ident" id="8327176">time</span><span class="op" id="8327180">.</span><span class="ident" id="8327181">Now</span><span class="op" id="8327184">(</span><span class="op" id="8327185">)</span><span class="op" id="8327186">.</span><span class="ident" id="8327187">Add</span><span class="op" id="8327190">(</span><span class="num" id="8327191">10</span>&nbsp;<span class="op" id="8327194">*</span>&nbsp;<span class="ident" id="8327196">time</span><span class="op" id="8327200">.</span><span class="ident" id="8327201">Millisecond</span><span class="op" id="8327212">)</span><span class="op" id="8327213">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327217">n</span><span class="op" id="8327218">,</span>&nbsp;<span class="ident" id="8327220">ra</span><span class="op" id="8327222">,</span>&nbsp;<span class="ident" id="8327224">err</span>&nbsp;<span class="op" id="8327228">:=</span>&nbsp;<span class="ident" id="8327231">c</span><span class="op" id="8327232">.</span><span class="ident" id="8327233">ReadFrom</span><span class="op" id="8327241">(</span><span class="ident" id="8327242">buf</span><span class="op" id="8327245">[</span><span class="num" id="8327246">0</span><span class="op" id="8327247">:</span><span class="op" id="8327248">]</span><span class="op" id="8327249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327253">if</span>&nbsp;<span class="ident" id="8327256">nerr</span><span class="op" id="8327260">,</span>&nbsp;<span class="ident" id="8327262">ok</span>&nbsp;<span class="op" id="8327265">:=</span>&nbsp;<span class="ident" id="8327268">err</span><span class="op" id="8327271">.</span><span class="op" id="8327272">(</span><span class="ident" id="8327273">Error</span><span class="op" id="8327278">)</span><span class="op" id="8327279">;</span>&nbsp;<span class="ident" id="8327281">ok</span>&nbsp;<span class="op" id="8327284">&amp;&amp;</span>&nbsp;<span class="ident" id="8327287">nerr</span><span class="op" id="8327291">.</span><span class="ident" id="8327292">Timeout</span><span class="op" id="8327299">(</span><span class="op" id="8327300">)</span>&nbsp;<span class="op" id="8327302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327307">select</span>&nbsp;<span class="op" id="8327314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327319">case</span>&nbsp;<span class="ident" id="8327324">done</span>&nbsp;<span class="op" id="8327329">&lt;-</span>&nbsp;<span class="num" id="8327332">1</span><span class="op" id="8327333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327339">break</span>&nbsp;<span class="ident" id="8327345">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327352">default</span><span class="op" id="8327359">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327365">continue</span>&nbsp;<span class="ident" id="8327374">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8327381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8327385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327389">if</span>&nbsp;<span class="ident" id="8327392">err</span>&nbsp;<span class="op" id="8327396">!=</span>&nbsp;<span class="ident" id="8327399">nil</span>&nbsp;<span class="op" id="8327403">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327408">break</span>&nbsp;<span class="ident" id="8327414">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8327420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327424">if</span>&nbsp;<span class="ident" id="8327427">_</span><span class="op" id="8327428">,</span>&nbsp;<span class="ident" id="8327430">err</span>&nbsp;<span class="op" id="8327434">=</span>&nbsp;<span class="ident" id="8327436">c</span><span class="op" id="8327437">.</span><span class="ident" id="8327438">WriteTo</span><span class="op" id="8327445">(</span><span class="ident" id="8327446">buf</span><span class="op" id="8327449">[</span><span class="num" id="8327450">0</span><span class="op" id="8327451">:</span><span class="ident" id="8327452">n</span><span class="op" id="8327453">]</span><span class="op" id="8327454">,</span>&nbsp;<span class="ident" id="8327456">ra</span><span class="op" id="8327458">)</span><span class="op" id="8327459">;</span>&nbsp;<span class="ident" id="8327461">err</span>&nbsp;<span class="op" id="8327465">!=</span>&nbsp;<span class="ident" id="8327468">nil</span>&nbsp;<span class="op" id="8327472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327477">t</span><span class="op" id="8327478">.</span><span class="ident" id="8327479">Errorf</span><span class="op" id="8327485">(</span><span class="string" id="8327486">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8327510">,</span>&nbsp;<span class="ident" id="8327512">ra</span><span class="op" id="8327514">,</span>&nbsp;<span class="ident" id="8327516">err</span><span class="op" id="8327519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327524">break</span>&nbsp;<span class="ident" id="8327530">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8327536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8327539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327542">done</span>&nbsp;<span class="op" id="8327547">&lt;-</span>&nbsp;<span class="num" id="8327550">1</span><br>
<span class="lineno"></span><span class="op" id="8327552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="8327555">func</span>&nbsp;<span class="ident" id="8327560">runDatagramConnClient</span><span class="op" id="8327581">(</span><span class="ident" id="8327582">t</span>&nbsp;<span class="op" id="8327584">*</span><span class="ident" id="8327585">testing</span><span class="op" id="8327592">.</span><span class="ident" id="8327593">T</span><span class="op" id="8327594">,</span>&nbsp;<span class="ident" id="8327596">net</span><span class="op" id="8327599">,</span>&nbsp;<span class="ident" id="8327601">laddr</span><span class="op" id="8327606">,</span>&nbsp;<span class="ident" id="8327608">taddr</span>&nbsp;<span class="builtintype" id="8327614">string</span><span class="op" id="8327620">,</span>&nbsp;<span class="ident" id="8327622">isEmpty</span>&nbsp;<span class="builtintype" id="8327630">bool</span><span class="op" id="8327634">)</span>&nbsp;<span class="op" id="8327636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327639">var</span>&nbsp;<span class="ident" id="8327643">c</span>&nbsp;<span class="ident" id="8327645">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327651">var</span>&nbsp;<span class="ident" id="8327655">err</span>&nbsp;<span class="builtintype" id="8327659">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327666">switch</span>&nbsp;<span class="ident" id="8327673">net</span>&nbsp;<span class="op" id="8327677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327680">case</span>&nbsp;<span class="string" id="8327685">&#34;udp&#34;</span><span class="op" id="8327690">,</span>&nbsp;<span class="string" id="8327692">&#34;udp4&#34;</span><span class="op" id="8327698">,</span>&nbsp;<span class="string" id="8327700">&#34;udp6&#34;</span><span class="op" id="8327706">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327710">c</span><span class="op" id="8327711">,</span>&nbsp;<span class="ident" id="8327713">err</span>&nbsp;<span class="op" id="8327717">=</span>&nbsp;<span class="ident" id="8327719">Dial</span><span class="op" id="8327723">(</span><span class="ident" id="8327724">net</span><span class="op" id="8327727">,</span>&nbsp;<span class="ident" id="8327729">taddr</span><span class="op" id="8327734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327738">if</span>&nbsp;<span class="ident" id="8327741">err</span>&nbsp;<span class="op" id="8327745">!=</span>&nbsp;<span class="ident" id="8327748">nil</span>&nbsp;<span class="op" id="8327752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327757">t</span><span class="op" id="8327758">.</span><span class="ident" id="8327759">Fatalf</span><span class="op" id="8327765">(</span><span class="string" id="8327766">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8327791">,</span>&nbsp;<span class="ident" id="8327793">net</span><span class="op" id="8327796">,</span>&nbsp;<span class="ident" id="8327798">taddr</span><span class="op" id="8327803">,</span>&nbsp;<span class="ident" id="8327805">err</span><span class="op" id="8327808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8327812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327815">case</span>&nbsp;<span class="string" id="8327820">&#34;unixgram&#34;</span><span class="op" id="8327830">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327834">c</span><span class="op" id="8327835">,</span>&nbsp;<span class="ident" id="8327837">err</span>&nbsp;<span class="op" id="8327841">=</span>&nbsp;<span class="ident" id="8327843">DialUnix</span><span class="op" id="8327851">(</span><span class="ident" id="8327852">net</span><span class="op" id="8327855">,</span>&nbsp;<span class="op" id="8327857">&amp;</span><span class="ident" id="8327858">UnixAddr</span><span class="op" id="8327866">{</span><span class="ident" id="8327867">Name</span><span class="op" id="8327871">:</span>&nbsp;<span class="ident" id="8327873">laddr</span><span class="op" id="8327878">,</span>&nbsp;<span class="ident" id="8327880">Net</span><span class="op" id="8327883">:</span>&nbsp;<span class="ident" id="8327885">net</span><span class="op" id="8327888">}</span><span class="op" id="8327889">,</span>&nbsp;<span class="op" id="8327891">&amp;</span><span class="ident" id="8327892">UnixAddr</span><span class="op" id="8327900">{</span><span class="ident" id="8327901">Name</span><span class="op" id="8327905">:</span>&nbsp;<span class="ident" id="8327907">taddr</span><span class="op" id="8327912">,</span>&nbsp;<span class="ident" id="8327914">Net</span><span class="op" id="8327917">:</span>&nbsp;<span class="ident" id="8327919">net</span><span class="op" id="8327922">}</span><span class="op" id="8327923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8327927">if</span>&nbsp;<span class="ident" id="8327930">err</span>&nbsp;<span class="op" id="8327934">!=</span>&nbsp;<span class="ident" id="8327937">nil</span>&nbsp;<span class="op" id="8327941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8327946">t</span><span class="op" id="8327947">.</span><span class="ident" id="8327948">Fatalf</span><span class="op" id="8327954">(</span><span class="string" id="8327955">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8327990">,</span>&nbsp;<span class="ident" id="8327992">net</span><span class="op" id="8327995">,</span>&nbsp;<span class="ident" id="8327997">laddr</span><span class="op" id="8328002">,</span>&nbsp;<span class="ident" id="8328004">taddr</span><span class="op" id="8328009">,</span>&nbsp;<span class="ident" id="8328011">err</span><span class="op" id="8328014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328021">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328024">defer</span>&nbsp;<span class="ident" id="8328030">c</span><span class="op" id="8328031">.</span><span class="ident" id="8328032">Close</span><span class="op" id="8328037">(</span><span class="op" id="8328038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328041">c</span><span class="op" id="8328042">.</span><span class="ident" id="8328043">SetReadDeadline</span><span class="op" id="8328058">(</span><span class="ident" id="8328059">time</span><span class="op" id="8328063">.</span><span class="ident" id="8328064">Now</span><span class="op" id="8328067">(</span><span class="op" id="8328068">)</span><span class="op" id="8328069">.</span><span class="ident" id="8328070">Add</span><span class="op" id="8328073">(</span><span class="num" id="8328074">1</span>&nbsp;<span class="op" id="8328076">*</span>&nbsp;<span class="ident" id="8328078">time</span><span class="op" id="8328082">.</span><span class="ident" id="8328083">Second</span><span class="op" id="8328089">)</span><span class="op" id="8328090">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328094">var</span>&nbsp;<span class="ident" id="8328098">wb</span>&nbsp;<span class="op" id="8328101">[</span><span class="op" id="8328102">]</span><span class="builtintype" id="8328103">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328109">if</span>&nbsp;<span class="op" id="8328112">!</span><span class="ident" id="8328113">isEmpty</span>&nbsp;<span class="op" id="8328121">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328125">wb</span>&nbsp;<span class="op" id="8328128">=</span>&nbsp;<span class="op" id="8328130">[</span><span class="op" id="8328131">]</span><span class="builtintype" id="8328132">byte</span><span class="op" id="8328136">(</span><span class="string" id="8328137">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="8328167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328173">if</span>&nbsp;<span class="ident" id="8328176">n</span><span class="op" id="8328177">,</span>&nbsp;<span class="ident" id="8328179">err</span>&nbsp;<span class="op" id="8328183">:=</span>&nbsp;<span class="ident" id="8328186">c</span><span class="op" id="8328187">.</span><span class="ident" id="8328188">Write</span><span class="op" id="8328193">(</span><span class="ident" id="8328194">wb</span><span class="op" id="8328196">[</span><span class="num" id="8328197">0</span><span class="op" id="8328198">:</span><span class="op" id="8328199">]</span><span class="op" id="8328200">)</span><span class="op" id="8328201">;</span>&nbsp;<span class="ident" id="8328203">err</span>&nbsp;<span class="op" id="8328207">!=</span>&nbsp;<span class="ident" id="8328210">nil</span>&nbsp;<span class="op" id="8328214">||</span>&nbsp;<span class="ident" id="8328217">n</span>&nbsp;<span class="op" id="8328219">!=</span>&nbsp;<span class="builtinfunc" id="8328222">len</span><span class="op" id="8328225">(</span><span class="ident" id="8328226">wb</span><span class="op" id="8328228">)</span>&nbsp;<span class="op" id="8328230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328234">t</span><span class="op" id="8328235">.</span><span class="ident" id="8328236">Fatalf</span><span class="op" id="8328242">(</span><span class="string" id="8328243">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8328281">,</span>&nbsp;<span class="ident" id="8328283">n</span><span class="op" id="8328284">,</span>&nbsp;<span class="ident" id="8328286">err</span><span class="op" id="8328289">,</span>&nbsp;<span class="builtinfunc" id="8328291">len</span><span class="op" id="8328294">(</span><span class="ident" id="8328295">wb</span><span class="op" id="8328297">)</span><span class="op" id="8328298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328301">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328305">rb</span>&nbsp;<span class="op" id="8328308">:=</span>&nbsp;<span class="builtinfunc" id="8328311">make</span><span class="op" id="8328315">(</span><span class="op" id="8328316">[</span><span class="op" id="8328317">]</span><span class="builtintype" id="8328318">byte</span><span class="op" id="8328322">,</span>&nbsp;<span class="num" id="8328324">1024</span><span class="op" id="8328328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328331">if</span>&nbsp;<span class="ident" id="8328334">n</span><span class="op" id="8328335">,</span>&nbsp;<span class="ident" id="8328337">err</span>&nbsp;<span class="op" id="8328341">:=</span>&nbsp;<span class="ident" id="8328344">c</span><span class="op" id="8328345">.</span><span class="ident" id="8328346">Read</span><span class="op" id="8328350">(</span><span class="ident" id="8328351">rb</span><span class="op" id="8328353">[</span><span class="num" id="8328354">0</span><span class="op" id="8328355">:</span><span class="op" id="8328356">]</span><span class="op" id="8328357">)</span><span class="op" id="8328358">;</span>&nbsp;<span class="ident" id="8328360">err</span>&nbsp;<span class="op" id="8328364">!=</span>&nbsp;<span class="ident" id="8328367">nil</span>&nbsp;<span class="op" id="8328371">||</span>&nbsp;<span class="ident" id="8328374">n</span>&nbsp;<span class="op" id="8328376">!=</span>&nbsp;<span class="builtinfunc" id="8328379">len</span><span class="op" id="8328382">(</span><span class="ident" id="8328383">wb</span><span class="op" id="8328385">)</span>&nbsp;<span class="op" id="8328387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328391">t</span><span class="op" id="8328392">.</span><span class="ident" id="8328393">Fatalf</span><span class="op" id="8328399">(</span><span class="string" id="8328400">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8328437">,</span>&nbsp;<span class="ident" id="8328439">n</span><span class="op" id="8328440">,</span>&nbsp;<span class="ident" id="8328442">err</span><span class="op" id="8328445">,</span>&nbsp;<span class="builtinfunc" id="8328447">len</span><span class="op" id="8328450">(</span><span class="ident" id="8328451">wb</span><span class="op" id="8328453">)</span><span class="op" id="8328454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328457">}</span><br>
<span class="lineno">425</span><span class="op" id="8328459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8328462">func</span>&nbsp;<span class="ident" id="8328467">runDatagramPacketConnClient</span><span class="op" id="8328494">(</span><span class="ident" id="8328495">t</span>&nbsp;<span class="op" id="8328497">*</span><span class="ident" id="8328498">testing</span><span class="op" id="8328505">.</span><span class="ident" id="8328506">T</span><span class="op" id="8328507">,</span>&nbsp;<span class="ident" id="8328509">net</span><span class="op" id="8328512">,</span>&nbsp;<span class="ident" id="8328514">laddr</span><span class="op" id="8328519">,</span>&nbsp;<span class="ident" id="8328521">taddr</span>&nbsp;<span class="builtintype" id="8328527">string</span><span class="op" id="8328533">,</span>&nbsp;<span class="ident" id="8328535">isEmpty</span>&nbsp;<span class="builtintype" id="8328543">bool</span><span class="op" id="8328547">)</span>&nbsp;<span class="op" id="8328549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328552">var</span>&nbsp;<span class="ident" id="8328556">ra</span>&nbsp;<span class="ident" id="8328559">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328565">var</span>&nbsp;<span class="ident" id="8328569">err</span>&nbsp;<span class="builtintype" id="8328573">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328580">switch</span>&nbsp;<span class="ident" id="8328587">net</span>&nbsp;<span class="op" id="8328591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328594">case</span>&nbsp;<span class="string" id="8328599">&#34;udp&#34;</span><span class="op" id="8328604">,</span>&nbsp;<span class="string" id="8328606">&#34;udp4&#34;</span><span class="op" id="8328612">,</span>&nbsp;<span class="string" id="8328614">&#34;udp6&#34;</span><span class="op" id="8328620">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328624">ra</span><span class="op" id="8328626">,</span>&nbsp;<span class="ident" id="8328628">err</span>&nbsp;<span class="op" id="8328632">=</span>&nbsp;<span class="ident" id="8328634">ResolveUDPAddr</span><span class="op" id="8328648">(</span><span class="ident" id="8328649">net</span><span class="op" id="8328652">,</span>&nbsp;<span class="ident" id="8328654">taddr</span><span class="op" id="8328659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328663">if</span>&nbsp;<span class="ident" id="8328666">err</span>&nbsp;<span class="op" id="8328670">!=</span>&nbsp;<span class="ident" id="8328673">nil</span>&nbsp;<span class="op" id="8328677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328682">t</span><span class="op" id="8328683">.</span><span class="ident" id="8328684">Fatalf</span><span class="op" id="8328690">(</span><span class="string" id="8328691">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8328726">,</span>&nbsp;<span class="ident" id="8328728">net</span><span class="op" id="8328731">,</span>&nbsp;<span class="ident" id="8328733">taddr</span><span class="op" id="8328738">,</span>&nbsp;<span class="ident" id="8328740">err</span><span class="op" id="8328743">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328750">case</span>&nbsp;<span class="string" id="8328755">&#34;unixgram&#34;</span><span class="op" id="8328765">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328769">ra</span><span class="op" id="8328771">,</span>&nbsp;<span class="ident" id="8328773">err</span>&nbsp;<span class="op" id="8328777">=</span>&nbsp;<span class="ident" id="8328779">ResolveUnixAddr</span><span class="op" id="8328794">(</span><span class="ident" id="8328795">net</span><span class="op" id="8328798">,</span>&nbsp;<span class="ident" id="8328800">taddr</span><span class="op" id="8328805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328809">if</span>&nbsp;<span class="ident" id="8328812">err</span>&nbsp;<span class="op" id="8328816">!=</span>&nbsp;<span class="ident" id="8328819">nil</span>&nbsp;<span class="op" id="8328823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328828">t</span><span class="op" id="8328829">.</span><span class="ident" id="8328830">Fatalf</span><span class="op" id="8328836">(</span><span class="string" id="8328837">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8328873">,</span>&nbsp;<span class="ident" id="8328875">net</span><span class="op" id="8328878">,</span>&nbsp;<span class="ident" id="8328880">taddr</span><span class="op" id="8328885">,</span>&nbsp;<span class="ident" id="8328887">err</span><span class="op" id="8328890">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328900">c</span><span class="op" id="8328901">,</span>&nbsp;<span class="ident" id="8328903">err</span>&nbsp;<span class="op" id="8328907">:=</span>&nbsp;<span class="ident" id="8328910">ListenPacket</span><span class="op" id="8328922">(</span><span class="ident" id="8328923">net</span><span class="op" id="8328926">,</span>&nbsp;<span class="ident" id="8328928">laddr</span><span class="op" id="8328933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328936">if</span>&nbsp;<span class="ident" id="8328939">err</span>&nbsp;<span class="op" id="8328943">!=</span>&nbsp;<span class="ident" id="8328946">nil</span>&nbsp;<span class="op" id="8328950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328954">t</span><span class="op" id="8328955">.</span><span class="ident" id="8328956">Fatalf</span><span class="op" id="8328962">(</span><span class="string" id="8328963">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="8328995">,</span>&nbsp;<span class="ident" id="8328997">net</span><span class="op" id="8329000">,</span>&nbsp;<span class="ident" id="8329002">laddr</span><span class="op" id="8329007">,</span>&nbsp;<span class="ident" id="8329009">err</span><span class="op" id="8329012">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329018">defer</span>&nbsp;<span class="ident" id="8329024">c</span><span class="op" id="8329025">.</span><span class="ident" id="8329026">Close</span><span class="op" id="8329031">(</span><span class="op" id="8329032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329035">c</span><span class="op" id="8329036">.</span><span class="ident" id="8329037">SetReadDeadline</span><span class="op" id="8329052">(</span><span class="ident" id="8329053">time</span><span class="op" id="8329057">.</span><span class="ident" id="8329058">Now</span><span class="op" id="8329061">(</span><span class="op" id="8329062">)</span><span class="op" id="8329063">.</span><span class="ident" id="8329064">Add</span><span class="op" id="8329067">(</span><span class="num" id="8329068">1</span>&nbsp;<span class="op" id="8329070">*</span>&nbsp;<span class="ident" id="8329072">time</span><span class="op" id="8329076">.</span><span class="ident" id="8329077">Second</span><span class="op" id="8329083">)</span><span class="op" id="8329084">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329088">var</span>&nbsp;<span class="ident" id="8329092">wb</span>&nbsp;<span class="op" id="8329095">[</span><span class="op" id="8329096">]</span><span class="builtintype" id="8329097">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329103">if</span>&nbsp;<span class="op" id="8329106">!</span><span class="ident" id="8329107">isEmpty</span>&nbsp;<span class="op" id="8329115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329119">wb</span>&nbsp;<span class="op" id="8329122">=</span>&nbsp;<span class="op" id="8329124">[</span><span class="op" id="8329125">]</span><span class="builtintype" id="8329126">byte</span><span class="op" id="8329130">(</span><span class="string" id="8329131">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="8329175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329181">if</span>&nbsp;<span class="ident" id="8329184">n</span><span class="op" id="8329185">,</span>&nbsp;<span class="ident" id="8329187">err</span>&nbsp;<span class="op" id="8329191">:=</span>&nbsp;<span class="ident" id="8329194">c</span><span class="op" id="8329195">.</span><span class="ident" id="8329196">WriteTo</span><span class="op" id="8329203">(</span><span class="ident" id="8329204">wb</span><span class="op" id="8329206">[</span><span class="num" id="8329207">0</span><span class="op" id="8329208">:</span><span class="op" id="8329209">]</span><span class="op" id="8329210">,</span>&nbsp;<span class="ident" id="8329212">ra</span><span class="op" id="8329214">)</span><span class="op" id="8329215">;</span>&nbsp;<span class="ident" id="8329217">err</span>&nbsp;<span class="op" id="8329221">!=</span>&nbsp;<span class="ident" id="8329224">nil</span>&nbsp;<span class="op" id="8329228">||</span>&nbsp;<span class="ident" id="8329231">n</span>&nbsp;<span class="op" id="8329233">!=</span>&nbsp;<span class="builtinfunc" id="8329236">len</span><span class="op" id="8329239">(</span><span class="ident" id="8329240">wb</span><span class="op" id="8329242">)</span>&nbsp;<span class="op" id="8329244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329248">t</span><span class="op" id="8329249">.</span><span class="ident" id="8329250">Fatalf</span><span class="op" id="8329256">(</span><span class="string" id="8329257">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8329301">,</span>&nbsp;<span class="ident" id="8329303">ra</span><span class="op" id="8329305">,</span>&nbsp;<span class="ident" id="8329307">n</span><span class="op" id="8329308">,</span>&nbsp;<span class="ident" id="8329310">err</span><span class="op" id="8329313">,</span>&nbsp;<span class="builtinfunc" id="8329315">len</span><span class="op" id="8329318">(</span><span class="ident" id="8329319">wb</span><span class="op" id="8329321">)</span><span class="op" id="8329322">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329329">rb</span>&nbsp;<span class="op" id="8329332">:=</span>&nbsp;<span class="builtinfunc" id="8329335">make</span><span class="op" id="8329339">(</span><span class="op" id="8329340">[</span><span class="op" id="8329341">]</span><span class="builtintype" id="8329342">byte</span><span class="op" id="8329346">,</span>&nbsp;<span class="num" id="8329348">1024</span><span class="op" id="8329352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329355">if</span>&nbsp;<span class="ident" id="8329358">n</span><span class="op" id="8329359">,</span>&nbsp;<span class="ident" id="8329361">_</span><span class="op" id="8329362">,</span>&nbsp;<span class="ident" id="8329364">err</span>&nbsp;<span class="op" id="8329368">:=</span>&nbsp;<span class="ident" id="8329371">c</span><span class="op" id="8329372">.</span><span class="ident" id="8329373">ReadFrom</span><span class="op" id="8329381">(</span><span class="ident" id="8329382">rb</span><span class="op" id="8329384">[</span><span class="num" id="8329385">0</span><span class="op" id="8329386">:</span><span class="op" id="8329387">]</span><span class="op" id="8329388">)</span><span class="op" id="8329389">;</span>&nbsp;<span class="ident" id="8329391">err</span>&nbsp;<span class="op" id="8329395">!=</span>&nbsp;<span class="ident" id="8329398">nil</span>&nbsp;<span class="op" id="8329402">||</span>&nbsp;<span class="ident" id="8329405">n</span>&nbsp;<span class="op" id="8329407">!=</span>&nbsp;<span class="builtinfunc" id="8329410">len</span><span class="op" id="8329413">(</span><span class="ident" id="8329414">wb</span><span class="op" id="8329416">)</span>&nbsp;<span class="op" id="8329418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329422">t</span><span class="op" id="8329423">.</span><span class="ident" id="8329424">Fatalf</span><span class="op" id="8329430">(</span><span class="string" id="8329431">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="8329472">,</span>&nbsp;<span class="ident" id="8329474">n</span><span class="op" id="8329475">,</span>&nbsp;<span class="ident" id="8329477">err</span><span class="op" id="8329480">,</span>&nbsp;<span class="builtinfunc" id="8329482">len</span><span class="op" id="8329485">(</span><span class="ident" id="8329486">wb</span><span class="op" id="8329488">)</span><span class="op" id="8329489">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329492">}</span><br>
<span class="lineno"></span><span class="op" id="8329494">}</span>
</div>
</body>
</html>
