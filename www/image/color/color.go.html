<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5549991">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5550046">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5550100">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5550151">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="5550202">package</span>&nbsp;<span class="ident" id="5550210">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5550217">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="5550294">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="5550326">type</span>&nbsp;<span class="ident" id="5550331">Color</span>&nbsp;<span class="keyword" id="5550337">interface</span>&nbsp;<span class="op" id="5550347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5550350">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5550425">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5550501">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5550577">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5550591">RGBA</span><span class="op" id="5550595">(</span><span class="op" id="5550596">)</span>&nbsp;<span class="op" id="5550598">(</span><span class="ident" id="5550599">r</span><span class="op" id="5550600">,</span>&nbsp;<span class="ident" id="5550602">g</span><span class="op" id="5550603">,</span>&nbsp;<span class="ident" id="5550605">b</span><span class="op" id="5550606">,</span>&nbsp;<span class="ident" id="5550608">a</span>&nbsp;<span class="builtintype" id="5550610">uint32</span><span class="op" id="5550616">)</span><br>
<span class="lineno"></span><span class="op" id="5550618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5550621">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5550688">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="5550745">type</span>&nbsp;<span class="ident" id="5550750">RGBA</span>&nbsp;<span class="keyword" id="5550755">struct</span>&nbsp;<span class="op" id="5550762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5550765">R</span><span class="op" id="5550766">,</span>&nbsp;<span class="ident" id="5550768">G</span><span class="op" id="5550769">,</span>&nbsp;<span class="ident" id="5550771">B</span><span class="op" id="5550772">,</span>&nbsp;<span class="ident" id="5550774">A</span>&nbsp;<span class="builtintype" id="5550776">uint8</span><br>
<span class="lineno"></span><span class="op" id="5550782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5550785">func</span>&nbsp;<span class="op" id="5550790">(</span><span class="ident" id="5550791">c</span>&nbsp;<span class="ident" id="5550793">RGBA</span><span class="op" id="5550797">)</span>&nbsp;<span class="ident" id="5550799">RGBA</span><span class="op" id="5550803">(</span><span class="op" id="5550804">)</span>&nbsp;<span class="op" id="5550806">(</span><span class="ident" id="5550807">r</span><span class="op" id="5550808">,</span>&nbsp;<span class="ident" id="5550810">g</span><span class="op" id="5550811">,</span>&nbsp;<span class="ident" id="5550813">b</span><span class="op" id="5550814">,</span>&nbsp;<span class="ident" id="5550816">a</span>&nbsp;<span class="builtintype" id="5550818">uint32</span><span class="op" id="5550824">)</span>&nbsp;<span class="op" id="5550826">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5550829">r</span>&nbsp;<span class="op" id="5550831">=</span>&nbsp;<span class="builtintype" id="5550833">uint32</span><span class="op" id="5550839">(</span><span class="ident" id="5550840">c</span><span class="op" id="5550841">.</span><span class="ident" id="5550842">R</span><span class="op" id="5550843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5550846">r</span>&nbsp;<span class="op" id="5550848">|=</span>&nbsp;<span class="ident" id="5550851">r</span>&nbsp;<span class="op" id="5550853">&lt;&lt;</span>&nbsp;<span class="num" id="5550856">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5550859">g</span>&nbsp;<span class="op" id="5550861">=</span>&nbsp;<span class="builtintype" id="5550863">uint32</span><span class="op" id="5550869">(</span><span class="ident" id="5550870">c</span><span class="op" id="5550871">.</span><span class="ident" id="5550872">G</span><span class="op" id="5550873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5550876">g</span>&nbsp;<span class="op" id="5550878">|=</span>&nbsp;<span class="ident" id="5550881">g</span>&nbsp;<span class="op" id="5550883">&lt;&lt;</span>&nbsp;<span class="num" id="5550886">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5550889">b</span>&nbsp;<span class="op" id="5550891">=</span>&nbsp;<span class="builtintype" id="5550893">uint32</span><span class="op" id="5550899">(</span><span class="ident" id="5550900">c</span><span class="op" id="5550901">.</span><span class="ident" id="5550902">B</span><span class="op" id="5550903">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5550906">b</span>&nbsp;<span class="op" id="5550908">|=</span>&nbsp;<span class="ident" id="5550911">b</span>&nbsp;<span class="op" id="5550913">&lt;&lt;</span>&nbsp;<span class="num" id="5550916">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5550919">a</span>&nbsp;<span class="op" id="5550921">=</span>&nbsp;<span class="builtintype" id="5550923">uint32</span><span class="op" id="5550929">(</span><span class="ident" id="5550930">c</span><span class="op" id="5550931">.</span><span class="ident" id="5550932">A</span><span class="op" id="5550933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5550936">a</span>&nbsp;<span class="op" id="5550938">|=</span>&nbsp;<span class="ident" id="5550941">a</span>&nbsp;<span class="op" id="5550943">&lt;&lt;</span>&nbsp;<span class="num" id="5550946">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5550949">return</span><br>
<span class="lineno"></span><span class="op" id="5550956">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5550959">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5551016">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5551074">type</span>&nbsp;<span class="ident" id="5551079">RGBA64</span>&nbsp;<span class="keyword" id="5551086">struct</span>&nbsp;<span class="op" id="5551093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551096">R</span><span class="op" id="5551097">,</span>&nbsp;<span class="ident" id="5551099">G</span><span class="op" id="5551100">,</span>&nbsp;<span class="ident" id="5551102">B</span><span class="op" id="5551103">,</span>&nbsp;<span class="ident" id="5551105">A</span>&nbsp;<span class="builtintype" id="5551107">uint16</span><br>
<span class="lineno">40</span><span class="op" id="5551114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5551117">func</span>&nbsp;<span class="op" id="5551122">(</span><span class="ident" id="5551123">c</span>&nbsp;<span class="ident" id="5551125">RGBA64</span><span class="op" id="5551131">)</span>&nbsp;<span class="ident" id="5551133">RGBA</span><span class="op" id="5551137">(</span><span class="op" id="5551138">)</span>&nbsp;<span class="op" id="5551140">(</span><span class="ident" id="5551141">r</span><span class="op" id="5551142">,</span>&nbsp;<span class="ident" id="5551144">g</span><span class="op" id="5551145">,</span>&nbsp;<span class="ident" id="5551147">b</span><span class="op" id="5551148">,</span>&nbsp;<span class="ident" id="5551150">a</span>&nbsp;<span class="builtintype" id="5551152">uint32</span><span class="op" id="5551158">)</span>&nbsp;<span class="op" id="5551160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5551163">return</span>&nbsp;<span class="builtintype" id="5551170">uint32</span><span class="op" id="5551176">(</span><span class="ident" id="5551177">c</span><span class="op" id="5551178">.</span><span class="ident" id="5551179">R</span><span class="op" id="5551180">)</span><span class="op" id="5551181">,</span>&nbsp;<span class="builtintype" id="5551183">uint32</span><span class="op" id="5551189">(</span><span class="ident" id="5551190">c</span><span class="op" id="5551191">.</span><span class="ident" id="5551192">G</span><span class="op" id="5551193">)</span><span class="op" id="5551194">,</span>&nbsp;<span class="builtintype" id="5551196">uint32</span><span class="op" id="5551202">(</span><span class="ident" id="5551203">c</span><span class="op" id="5551204">.</span><span class="ident" id="5551205">B</span><span class="op" id="5551206">)</span><span class="op" id="5551207">,</span>&nbsp;<span class="builtintype" id="5551209">uint32</span><span class="op" id="5551215">(</span><span class="ident" id="5551216">c</span><span class="op" id="5551217">.</span><span class="ident" id="5551218">A</span><span class="op" id="5551219">)</span><br>
<span class="lineno"></span><span class="op" id="5551221">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="5551224">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5551284">type</span>&nbsp;<span class="ident" id="5551289">NRGBA</span>&nbsp;<span class="keyword" id="5551295">struct</span>&nbsp;<span class="op" id="5551302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551305">R</span><span class="op" id="5551306">,</span>&nbsp;<span class="ident" id="5551308">G</span><span class="op" id="5551309">,</span>&nbsp;<span class="ident" id="5551311">B</span><span class="op" id="5551312">,</span>&nbsp;<span class="ident" id="5551314">A</span>&nbsp;<span class="builtintype" id="5551316">uint8</span><br>
<span class="lineno"></span><span class="op" id="5551322">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5551325">func</span>&nbsp;<span class="op" id="5551330">(</span><span class="ident" id="5551331">c</span>&nbsp;<span class="ident" id="5551333">NRGBA</span><span class="op" id="5551338">)</span>&nbsp;<span class="ident" id="5551340">RGBA</span><span class="op" id="5551344">(</span><span class="op" id="5551345">)</span>&nbsp;<span class="op" id="5551347">(</span><span class="ident" id="5551348">r</span><span class="op" id="5551349">,</span>&nbsp;<span class="ident" id="5551351">g</span><span class="op" id="5551352">,</span>&nbsp;<span class="ident" id="5551354">b</span><span class="op" id="5551355">,</span>&nbsp;<span class="ident" id="5551357">a</span>&nbsp;<span class="builtintype" id="5551359">uint32</span><span class="op" id="5551365">)</span>&nbsp;<span class="op" id="5551367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551370">r</span>&nbsp;<span class="op" id="5551372">=</span>&nbsp;<span class="builtintype" id="5551374">uint32</span><span class="op" id="5551380">(</span><span class="ident" id="5551381">c</span><span class="op" id="5551382">.</span><span class="ident" id="5551383">R</span><span class="op" id="5551384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551387">r</span>&nbsp;<span class="op" id="5551389">|=</span>&nbsp;<span class="ident" id="5551392">r</span>&nbsp;<span class="op" id="5551394">&lt;&lt;</span>&nbsp;<span class="num" id="5551397">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551400">r</span>&nbsp;<span class="op" id="5551402">*=</span>&nbsp;<span class="builtintype" id="5551405">uint32</span><span class="op" id="5551411">(</span><span class="ident" id="5551412">c</span><span class="op" id="5551413">.</span><span class="ident" id="5551414">A</span><span class="op" id="5551415">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551418">r</span>&nbsp;<span class="op" id="5551420">/=</span>&nbsp;<span class="num" id="5551423">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551429">g</span>&nbsp;<span class="op" id="5551431">=</span>&nbsp;<span class="builtintype" id="5551433">uint32</span><span class="op" id="5551439">(</span><span class="ident" id="5551440">c</span><span class="op" id="5551441">.</span><span class="ident" id="5551442">G</span><span class="op" id="5551443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551446">g</span>&nbsp;<span class="op" id="5551448">|=</span>&nbsp;<span class="ident" id="5551451">g</span>&nbsp;<span class="op" id="5551453">&lt;&lt;</span>&nbsp;<span class="num" id="5551456">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551459">g</span>&nbsp;<span class="op" id="5551461">*=</span>&nbsp;<span class="builtintype" id="5551464">uint32</span><span class="op" id="5551470">(</span><span class="ident" id="5551471">c</span><span class="op" id="5551472">.</span><span class="ident" id="5551473">A</span><span class="op" id="5551474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551477">g</span>&nbsp;<span class="op" id="5551479">/=</span>&nbsp;<span class="num" id="5551482">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551488">b</span>&nbsp;<span class="op" id="5551490">=</span>&nbsp;<span class="builtintype" id="5551492">uint32</span><span class="op" id="5551498">(</span><span class="ident" id="5551499">c</span><span class="op" id="5551500">.</span><span class="ident" id="5551501">B</span><span class="op" id="5551502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551505">b</span>&nbsp;<span class="op" id="5551507">|=</span>&nbsp;<span class="ident" id="5551510">b</span>&nbsp;<span class="op" id="5551512">&lt;&lt;</span>&nbsp;<span class="num" id="5551515">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551518">b</span>&nbsp;<span class="op" id="5551520">*=</span>&nbsp;<span class="builtintype" id="5551523">uint32</span><span class="op" id="5551529">(</span><span class="ident" id="5551530">c</span><span class="op" id="5551531">.</span><span class="ident" id="5551532">A</span><span class="op" id="5551533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551536">b</span>&nbsp;<span class="op" id="5551538">/=</span>&nbsp;<span class="num" id="5551541">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551547">a</span>&nbsp;<span class="op" id="5551549">=</span>&nbsp;<span class="builtintype" id="5551551">uint32</span><span class="op" id="5551557">(</span><span class="ident" id="5551558">c</span><span class="op" id="5551559">.</span><span class="ident" id="5551560">A</span><span class="op" id="5551561">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551564">a</span>&nbsp;<span class="op" id="5551566">|=</span>&nbsp;<span class="ident" id="5551569">a</span>&nbsp;<span class="op" id="5551571">&lt;&lt;</span>&nbsp;<span class="num" id="5551574">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5551577">return</span><br>
<span class="lineno"></span><span class="op" id="5551584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5551587">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="5551649">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5551707">type</span>&nbsp;<span class="ident" id="5551712">NRGBA64</span>&nbsp;<span class="keyword" id="5551720">struct</span>&nbsp;<span class="op" id="5551727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551730">R</span><span class="op" id="5551731">,</span>&nbsp;<span class="ident" id="5551733">G</span><span class="op" id="5551734">,</span>&nbsp;<span class="ident" id="5551736">B</span><span class="op" id="5551737">,</span>&nbsp;<span class="ident" id="5551739">A</span>&nbsp;<span class="builtintype" id="5551741">uint16</span><br>
<span class="lineno"></span><span class="op" id="5551748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="5551751">func</span>&nbsp;<span class="op" id="5551756">(</span><span class="ident" id="5551757">c</span>&nbsp;<span class="ident" id="5551759">NRGBA64</span><span class="op" id="5551766">)</span>&nbsp;<span class="ident" id="5551768">RGBA</span><span class="op" id="5551772">(</span><span class="op" id="5551773">)</span>&nbsp;<span class="op" id="5551775">(</span><span class="ident" id="5551776">r</span><span class="op" id="5551777">,</span>&nbsp;<span class="ident" id="5551779">g</span><span class="op" id="5551780">,</span>&nbsp;<span class="ident" id="5551782">b</span><span class="op" id="5551783">,</span>&nbsp;<span class="ident" id="5551785">a</span>&nbsp;<span class="builtintype" id="5551787">uint32</span><span class="op" id="5551793">)</span>&nbsp;<span class="op" id="5551795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551798">r</span>&nbsp;<span class="op" id="5551800">=</span>&nbsp;<span class="builtintype" id="5551802">uint32</span><span class="op" id="5551808">(</span><span class="ident" id="5551809">c</span><span class="op" id="5551810">.</span><span class="ident" id="5551811">R</span><span class="op" id="5551812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551815">r</span>&nbsp;<span class="op" id="5551817">*=</span>&nbsp;<span class="builtintype" id="5551820">uint32</span><span class="op" id="5551826">(</span><span class="ident" id="5551827">c</span><span class="op" id="5551828">.</span><span class="ident" id="5551829">A</span><span class="op" id="5551830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551833">r</span>&nbsp;<span class="op" id="5551835">/=</span>&nbsp;<span class="num" id="5551838">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551846">g</span>&nbsp;<span class="op" id="5551848">=</span>&nbsp;<span class="builtintype" id="5551850">uint32</span><span class="op" id="5551856">(</span><span class="ident" id="5551857">c</span><span class="op" id="5551858">.</span><span class="ident" id="5551859">G</span><span class="op" id="5551860">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551863">g</span>&nbsp;<span class="op" id="5551865">*=</span>&nbsp;<span class="builtintype" id="5551868">uint32</span><span class="op" id="5551874">(</span><span class="ident" id="5551875">c</span><span class="op" id="5551876">.</span><span class="ident" id="5551877">A</span><span class="op" id="5551878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551881">g</span>&nbsp;<span class="op" id="5551883">/=</span>&nbsp;<span class="num" id="5551886">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551894">b</span>&nbsp;<span class="op" id="5551896">=</span>&nbsp;<span class="builtintype" id="5551898">uint32</span><span class="op" id="5551904">(</span><span class="ident" id="5551905">c</span><span class="op" id="5551906">.</span><span class="ident" id="5551907">B</span><span class="op" id="5551908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551911">b</span>&nbsp;<span class="op" id="5551913">*=</span>&nbsp;<span class="builtintype" id="5551916">uint32</span><span class="op" id="5551922">(</span><span class="ident" id="5551923">c</span><span class="op" id="5551924">.</span><span class="ident" id="5551925">A</span><span class="op" id="5551926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551929">b</span>&nbsp;<span class="op" id="5551931">/=</span>&nbsp;<span class="num" id="5551934">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5551942">a</span>&nbsp;<span class="op" id="5551944">=</span>&nbsp;<span class="builtintype" id="5551946">uint32</span><span class="op" id="5551952">(</span><span class="ident" id="5551953">c</span><span class="op" id="5551954">.</span><span class="ident" id="5551955">A</span><span class="op" id="5551956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5551959">return</span><br>
<span class="lineno"></span><span class="op" id="5551966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5551969">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="5552011">type</span>&nbsp;<span class="ident" id="5552016">Alpha</span>&nbsp;<span class="keyword" id="5552022">struct</span>&nbsp;<span class="op" id="5552029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552032">A</span>&nbsp;<span class="builtintype" id="5552034">uint8</span><br>
<span class="lineno"></span><span class="op" id="5552040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5552043">func</span>&nbsp;<span class="op" id="5552048">(</span><span class="ident" id="5552049">c</span>&nbsp;<span class="ident" id="5552051">Alpha</span><span class="op" id="5552056">)</span>&nbsp;<span class="ident" id="5552058">RGBA</span><span class="op" id="5552062">(</span><span class="op" id="5552063">)</span>&nbsp;<span class="op" id="5552065">(</span><span class="ident" id="5552066">r</span><span class="op" id="5552067">,</span>&nbsp;<span class="ident" id="5552069">g</span><span class="op" id="5552070">,</span>&nbsp;<span class="ident" id="5552072">b</span><span class="op" id="5552073">,</span>&nbsp;<span class="ident" id="5552075">a</span>&nbsp;<span class="builtintype" id="5552077">uint32</span><span class="op" id="5552083">)</span>&nbsp;<span class="op" id="5552085">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552088">a</span>&nbsp;<span class="op" id="5552090">=</span>&nbsp;<span class="builtintype" id="5552092">uint32</span><span class="op" id="5552098">(</span><span class="ident" id="5552099">c</span><span class="op" id="5552100">.</span><span class="ident" id="5552101">A</span><span class="op" id="5552102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552105">a</span>&nbsp;<span class="op" id="5552107">|=</span>&nbsp;<span class="ident" id="5552110">a</span>&nbsp;<span class="op" id="5552112">&lt;&lt;</span>&nbsp;<span class="num" id="5552115">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5552118">return</span>&nbsp;<span class="ident" id="5552125">a</span><span class="op" id="5552126">,</span>&nbsp;<span class="ident" id="5552128">a</span><span class="op" id="5552129">,</span>&nbsp;<span class="ident" id="5552131">a</span><span class="op" id="5552132">,</span>&nbsp;<span class="ident" id="5552134">a</span><br>
<span class="lineno"></span><span class="op" id="5552136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="5552139">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5552183">type</span>&nbsp;<span class="ident" id="5552188">Alpha16</span>&nbsp;<span class="keyword" id="5552196">struct</span>&nbsp;<span class="op" id="5552203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552206">A</span>&nbsp;<span class="builtintype" id="5552208">uint16</span><br>
<span class="lineno"></span><span class="op" id="5552215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5552218">func</span>&nbsp;<span class="op" id="5552223">(</span><span class="ident" id="5552224">c</span>&nbsp;<span class="ident" id="5552226">Alpha16</span><span class="op" id="5552233">)</span>&nbsp;<span class="ident" id="5552235">RGBA</span><span class="op" id="5552239">(</span><span class="op" id="5552240">)</span>&nbsp;<span class="op" id="5552242">(</span><span class="ident" id="5552243">r</span><span class="op" id="5552244">,</span>&nbsp;<span class="ident" id="5552246">g</span><span class="op" id="5552247">,</span>&nbsp;<span class="ident" id="5552249">b</span><span class="op" id="5552250">,</span>&nbsp;<span class="ident" id="5552252">a</span>&nbsp;<span class="builtintype" id="5552254">uint32</span><span class="op" id="5552260">)</span>&nbsp;<span class="op" id="5552262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552265">a</span>&nbsp;<span class="op" id="5552267">=</span>&nbsp;<span class="builtintype" id="5552269">uint32</span><span class="op" id="5552275">(</span><span class="ident" id="5552276">c</span><span class="op" id="5552277">.</span><span class="ident" id="5552278">A</span><span class="op" id="5552279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5552282">return</span>&nbsp;<span class="ident" id="5552289">a</span><span class="op" id="5552290">,</span>&nbsp;<span class="ident" id="5552292">a</span><span class="op" id="5552293">,</span>&nbsp;<span class="ident" id="5552295">a</span><span class="op" id="5552296">,</span>&nbsp;<span class="ident" id="5552298">a</span><br>
<span class="lineno"></span><span class="op" id="5552300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5552303">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5552348">type</span>&nbsp;<span class="ident" id="5552353">Gray</span>&nbsp;<span class="keyword" id="5552358">struct</span>&nbsp;<span class="op" id="5552365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552368">Y</span>&nbsp;<span class="builtintype" id="5552370">uint8</span><br>
<span class="lineno"></span><span class="op" id="5552376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="5552379">func</span>&nbsp;<span class="op" id="5552384">(</span><span class="ident" id="5552385">c</span>&nbsp;<span class="ident" id="5552387">Gray</span><span class="op" id="5552391">)</span>&nbsp;<span class="ident" id="5552393">RGBA</span><span class="op" id="5552397">(</span><span class="op" id="5552398">)</span>&nbsp;<span class="op" id="5552400">(</span><span class="ident" id="5552401">r</span><span class="op" id="5552402">,</span>&nbsp;<span class="ident" id="5552404">g</span><span class="op" id="5552405">,</span>&nbsp;<span class="ident" id="5552407">b</span><span class="op" id="5552408">,</span>&nbsp;<span class="ident" id="5552410">a</span>&nbsp;<span class="builtintype" id="5552412">uint32</span><span class="op" id="5552418">)</span>&nbsp;<span class="op" id="5552420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552423">y</span>&nbsp;<span class="op" id="5552425">:=</span>&nbsp;<span class="builtintype" id="5552428">uint32</span><span class="op" id="5552434">(</span><span class="ident" id="5552435">c</span><span class="op" id="5552436">.</span><span class="ident" id="5552437">Y</span><span class="op" id="5552438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552441">y</span>&nbsp;<span class="op" id="5552443">|=</span>&nbsp;<span class="ident" id="5552446">y</span>&nbsp;<span class="op" id="5552448">&lt;&lt;</span>&nbsp;<span class="num" id="5552451">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5552454">return</span>&nbsp;<span class="ident" id="5552461">y</span><span class="op" id="5552462">,</span>&nbsp;<span class="ident" id="5552464">y</span><span class="op" id="5552465">,</span>&nbsp;<span class="ident" id="5552467">y</span><span class="op" id="5552468">,</span>&nbsp;<span class="num" id="5552470">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5552477">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5552480">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5552527">type</span>&nbsp;<span class="ident" id="5552532">Gray16</span>&nbsp;<span class="keyword" id="5552539">struct</span>&nbsp;<span class="op" id="5552546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552549">Y</span>&nbsp;<span class="builtintype" id="5552551">uint16</span><br>
<span class="lineno"></span><span class="op" id="5552558">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="5552561">func</span>&nbsp;<span class="op" id="5552566">(</span><span class="ident" id="5552567">c</span>&nbsp;<span class="ident" id="5552569">Gray16</span><span class="op" id="5552575">)</span>&nbsp;<span class="ident" id="5552577">RGBA</span><span class="op" id="5552581">(</span><span class="op" id="5552582">)</span>&nbsp;<span class="op" id="5552584">(</span><span class="ident" id="5552585">r</span><span class="op" id="5552586">,</span>&nbsp;<span class="ident" id="5552588">g</span><span class="op" id="5552589">,</span>&nbsp;<span class="ident" id="5552591">b</span><span class="op" id="5552592">,</span>&nbsp;<span class="ident" id="5552594">a</span>&nbsp;<span class="builtintype" id="5552596">uint32</span><span class="op" id="5552602">)</span>&nbsp;<span class="op" id="5552604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552607">y</span>&nbsp;<span class="op" id="5552609">:=</span>&nbsp;<span class="builtintype" id="5552612">uint32</span><span class="op" id="5552618">(</span><span class="ident" id="5552619">c</span><span class="op" id="5552620">.</span><span class="ident" id="5552621">Y</span><span class="op" id="5552622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5552625">return</span>&nbsp;<span class="ident" id="5552632">y</span><span class="op" id="5552633">,</span>&nbsp;<span class="ident" id="5552635">y</span><span class="op" id="5552636">,</span>&nbsp;<span class="ident" id="5552638">y</span><span class="op" id="5552639">,</span>&nbsp;<span class="num" id="5552641">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5552648">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="5552651">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="5552730">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="5552747">type</span>&nbsp;<span class="ident" id="5552752">Model</span>&nbsp;<span class="keyword" id="5552758">interface</span>&nbsp;<span class="op" id="5552768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5552771">Convert</span><span class="op" id="5552778">(</span><span class="ident" id="5552779">c</span>&nbsp;<span class="ident" id="5552781">Color</span><span class="op" id="5552786">)</span>&nbsp;<span class="ident" id="5552788">Color</span><br>
<span class="lineno">135</span><span class="op" id="5552794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5552797">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="5552870">func</span>&nbsp;<span class="ident" id="5552875">ModelFunc</span><span class="op" id="5552884">(</span><span class="ident" id="5552885">f</span>&nbsp;<span class="keyword" id="5552887">func</span><span class="op" id="5552891">(</span><span class="ident" id="5552892">Color</span><span class="op" id="5552897">)</span>&nbsp;<span class="ident" id="5552899">Color</span><span class="op" id="5552904">)</span>&nbsp;<span class="ident" id="5552906">Model</span>&nbsp;<span class="op" id="5552912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5552915">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5552964">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5553013">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5553063">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5553113">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5553143">return</span>&nbsp;<span class="op" id="5553150">&amp;</span><span class="ident" id="5553151">modelFunc</span><span class="op" id="5553160">{</span><span class="ident" id="5553161">f</span><span class="op" id="5553162">}</span><br>
<span class="lineno">145</span><span class="op" id="5553164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5553167">type</span>&nbsp;<span class="ident" id="5553172">modelFunc</span>&nbsp;<span class="keyword" id="5553182">struct</span>&nbsp;<span class="op" id="5553189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553192">f</span>&nbsp;<span class="keyword" id="5553194">func</span><span class="op" id="5553198">(</span><span class="ident" id="5553199">Color</span><span class="op" id="5553204">)</span>&nbsp;<span class="ident" id="5553206">Color</span><br>
<span class="lineno"></span><span class="op" id="5553212">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="5553215">func</span>&nbsp;<span class="op" id="5553220">(</span><span class="ident" id="5553221">m</span>&nbsp;<span class="op" id="5553223">*</span><span class="ident" id="5553224">modelFunc</span><span class="op" id="5553233">)</span>&nbsp;<span class="ident" id="5553235">Convert</span><span class="op" id="5553242">(</span><span class="ident" id="5553243">c</span>&nbsp;<span class="ident" id="5553245">Color</span><span class="op" id="5553250">)</span>&nbsp;<span class="ident" id="5553252">Color</span>&nbsp;<span class="op" id="5553258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5553261">return</span>&nbsp;<span class="ident" id="5553268">m</span><span class="op" id="5553269">.</span><span class="ident" id="5553270">f</span><span class="op" id="5553271">(</span><span class="ident" id="5553272">c</span><span class="op" id="5553273">)</span><br>
<span class="lineno"></span><span class="op" id="5553275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="5553278">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="5553318">var</span>&nbsp;<span class="op" id="5553322">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553325">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5553338">Model</span>&nbsp;<span class="op" id="5553344">=</span>&nbsp;<span class="ident" id="5553346">ModelFunc</span><span class="op" id="5553355">(</span><span class="ident" id="5553356">rgbaModel</span><span class="op" id="5553365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553368">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="5553381">Model</span>&nbsp;<span class="op" id="5553387">=</span>&nbsp;<span class="ident" id="5553389">ModelFunc</span><span class="op" id="5553398">(</span><span class="ident" id="5553399">rgba64Model</span><span class="op" id="5553410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553413">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5553426">Model</span>&nbsp;<span class="op" id="5553432">=</span>&nbsp;<span class="ident" id="5553434">ModelFunc</span><span class="op" id="5553443">(</span><span class="ident" id="5553444">nrgbaModel</span><span class="op" id="5553454">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553457">NRGBA64Model</span>&nbsp;<span class="ident" id="5553470">Model</span>&nbsp;<span class="op" id="5553476">=</span>&nbsp;<span class="ident" id="5553478">ModelFunc</span><span class="op" id="5553487">(</span><span class="ident" id="5553488">nrgba64Model</span><span class="op" id="5553500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553503">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5553516">Model</span>&nbsp;<span class="op" id="5553522">=</span>&nbsp;<span class="ident" id="5553524">ModelFunc</span><span class="op" id="5553533">(</span><span class="ident" id="5553534">alphaModel</span><span class="op" id="5553544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553547">Alpha16Model</span>&nbsp;<span class="ident" id="5553560">Model</span>&nbsp;<span class="op" id="5553566">=</span>&nbsp;<span class="ident" id="5553568">ModelFunc</span><span class="op" id="5553577">(</span><span class="ident" id="5553578">alpha16Model</span><span class="op" id="5553590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553593">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5553606">Model</span>&nbsp;<span class="op" id="5553612">=</span>&nbsp;<span class="ident" id="5553614">ModelFunc</span><span class="op" id="5553623">(</span><span class="ident" id="5553624">grayModel</span><span class="op" id="5553633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553636">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="5553649">Model</span>&nbsp;<span class="op" id="5553655">=</span>&nbsp;<span class="ident" id="5553657">ModelFunc</span><span class="op" id="5553666">(</span><span class="ident" id="5553667">gray16Model</span><span class="op" id="5553678">)</span><br>
<span class="lineno">165</span><span class="op" id="5553680">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5553683">func</span>&nbsp;<span class="ident" id="5553688">rgbaModel</span><span class="op" id="5553697">(</span><span class="ident" id="5553698">c</span>&nbsp;<span class="ident" id="5553700">Color</span><span class="op" id="5553705">)</span>&nbsp;<span class="ident" id="5553707">Color</span>&nbsp;<span class="op" id="5553713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5553716">if</span>&nbsp;<span class="ident" id="5553719">_</span><span class="op" id="5553720">,</span>&nbsp;<span class="ident" id="5553722">ok</span>&nbsp;<span class="op" id="5553725">:=</span>&nbsp;<span class="ident" id="5553728">c</span><span class="op" id="5553729">.</span><span class="op" id="5553730">(</span><span class="ident" id="5553731">RGBA</span><span class="op" id="5553735">)</span><span class="op" id="5553736">;</span>&nbsp;<span class="ident" id="5553738">ok</span>&nbsp;<span class="op" id="5553741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5553745">return</span>&nbsp;<span class="ident" id="5553752">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5553755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553758">r</span><span class="op" id="5553759">,</span>&nbsp;<span class="ident" id="5553761">g</span><span class="op" id="5553762">,</span>&nbsp;<span class="ident" id="5553764">b</span><span class="op" id="5553765">,</span>&nbsp;<span class="ident" id="5553767">a</span>&nbsp;<span class="op" id="5553769">:=</span>&nbsp;<span class="ident" id="5553772">c</span><span class="op" id="5553773">.</span><span class="ident" id="5553774">RGBA</span><span class="op" id="5553778">(</span><span class="op" id="5553779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5553782">return</span>&nbsp;<span class="ident" id="5553789">RGBA</span><span class="op" id="5553793">{</span><span class="builtintype" id="5553794">uint8</span><span class="op" id="5553799">(</span><span class="ident" id="5553800">r</span>&nbsp;<span class="op" id="5553802">&gt;&gt;</span>&nbsp;<span class="num" id="5553805">8</span><span class="op" id="5553806">)</span><span class="op" id="5553807">,</span>&nbsp;<span class="builtintype" id="5553809">uint8</span><span class="op" id="5553814">(</span><span class="ident" id="5553815">g</span>&nbsp;<span class="op" id="5553817">&gt;&gt;</span>&nbsp;<span class="num" id="5553820">8</span><span class="op" id="5553821">)</span><span class="op" id="5553822">,</span>&nbsp;<span class="builtintype" id="5553824">uint8</span><span class="op" id="5553829">(</span><span class="ident" id="5553830">b</span>&nbsp;<span class="op" id="5553832">&gt;&gt;</span>&nbsp;<span class="num" id="5553835">8</span><span class="op" id="5553836">)</span><span class="op" id="5553837">,</span>&nbsp;<span class="builtintype" id="5553839">uint8</span><span class="op" id="5553844">(</span><span class="ident" id="5553845">a</span>&nbsp;<span class="op" id="5553847">&gt;&gt;</span>&nbsp;<span class="num" id="5553850">8</span><span class="op" id="5553851">)</span><span class="op" id="5553852">}</span><br>
<span class="lineno"></span><span class="op" id="5553854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="5553857">func</span>&nbsp;<span class="ident" id="5553862">rgba64Model</span><span class="op" id="5553873">(</span><span class="ident" id="5553874">c</span>&nbsp;<span class="ident" id="5553876">Color</span><span class="op" id="5553881">)</span>&nbsp;<span class="ident" id="5553883">Color</span>&nbsp;<span class="op" id="5553889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5553892">if</span>&nbsp;<span class="ident" id="5553895">_</span><span class="op" id="5553896">,</span>&nbsp;<span class="ident" id="5553898">ok</span>&nbsp;<span class="op" id="5553901">:=</span>&nbsp;<span class="ident" id="5553904">c</span><span class="op" id="5553905">.</span><span class="op" id="5553906">(</span><span class="ident" id="5553907">RGBA64</span><span class="op" id="5553913">)</span><span class="op" id="5553914">;</span>&nbsp;<span class="ident" id="5553916">ok</span>&nbsp;<span class="op" id="5553919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5553923">return</span>&nbsp;<span class="ident" id="5553930">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5553933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5553936">r</span><span class="op" id="5553937">,</span>&nbsp;<span class="ident" id="5553939">g</span><span class="op" id="5553940">,</span>&nbsp;<span class="ident" id="5553942">b</span><span class="op" id="5553943">,</span>&nbsp;<span class="ident" id="5553945">a</span>&nbsp;<span class="op" id="5553947">:=</span>&nbsp;<span class="ident" id="5553950">c</span><span class="op" id="5553951">.</span><span class="ident" id="5553952">RGBA</span><span class="op" id="5553956">(</span><span class="op" id="5553957">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5553960">return</span>&nbsp;<span class="ident" id="5553967">RGBA64</span><span class="op" id="5553973">{</span><span class="builtintype" id="5553974">uint16</span><span class="op" id="5553980">(</span><span class="ident" id="5553981">r</span><span class="op" id="5553982">)</span><span class="op" id="5553983">,</span>&nbsp;<span class="builtintype" id="5553985">uint16</span><span class="op" id="5553991">(</span><span class="ident" id="5553992">g</span><span class="op" id="5553993">)</span><span class="op" id="5553994">,</span>&nbsp;<span class="builtintype" id="5553996">uint16</span><span class="op" id="5554002">(</span><span class="ident" id="5554003">b</span><span class="op" id="5554004">)</span><span class="op" id="5554005">,</span>&nbsp;<span class="builtintype" id="5554007">uint16</span><span class="op" id="5554013">(</span><span class="ident" id="5554014">a</span><span class="op" id="5554015">)</span><span class="op" id="5554016">}</span><br>
<span class="lineno"></span><span class="op" id="5554018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5554021">func</span>&nbsp;<span class="ident" id="5554026">nrgbaModel</span><span class="op" id="5554036">(</span><span class="ident" id="5554037">c</span>&nbsp;<span class="ident" id="5554039">Color</span><span class="op" id="5554044">)</span>&nbsp;<span class="ident" id="5554046">Color</span>&nbsp;<span class="op" id="5554052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554055">if</span>&nbsp;<span class="ident" id="5554058">_</span><span class="op" id="5554059">,</span>&nbsp;<span class="ident" id="5554061">ok</span>&nbsp;<span class="op" id="5554064">:=</span>&nbsp;<span class="ident" id="5554067">c</span><span class="op" id="5554068">.</span><span class="op" id="5554069">(</span><span class="ident" id="5554070">NRGBA</span><span class="op" id="5554075">)</span><span class="op" id="5554076">;</span>&nbsp;<span class="ident" id="5554078">ok</span>&nbsp;<span class="op" id="5554081">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554085">return</span>&nbsp;<span class="ident" id="5554092">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5554095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5554098">r</span><span class="op" id="5554099">,</span>&nbsp;<span class="ident" id="5554101">g</span><span class="op" id="5554102">,</span>&nbsp;<span class="ident" id="5554104">b</span><span class="op" id="5554105">,</span>&nbsp;<span class="ident" id="5554107">a</span>&nbsp;<span class="op" id="5554109">:=</span>&nbsp;<span class="ident" id="5554112">c</span><span class="op" id="5554113">.</span><span class="ident" id="5554114">RGBA</span><span class="op" id="5554118">(</span><span class="op" id="5554119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554122">if</span>&nbsp;<span class="ident" id="5554125">a</span>&nbsp;<span class="op" id="5554127">==</span>&nbsp;<span class="num" id="5554130">0xffff</span>&nbsp;<span class="op" id="5554137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554141">return</span>&nbsp;<span class="ident" id="5554148">NRGBA</span><span class="op" id="5554153">{</span><span class="builtintype" id="5554154">uint8</span><span class="op" id="5554159">(</span><span class="ident" id="5554160">r</span>&nbsp;<span class="op" id="5554162">&gt;&gt;</span>&nbsp;<span class="num" id="5554165">8</span><span class="op" id="5554166">)</span><span class="op" id="5554167">,</span>&nbsp;<span class="builtintype" id="5554169">uint8</span><span class="op" id="5554174">(</span><span class="ident" id="5554175">g</span>&nbsp;<span class="op" id="5554177">&gt;&gt;</span>&nbsp;<span class="num" id="5554180">8</span><span class="op" id="5554181">)</span><span class="op" id="5554182">,</span>&nbsp;<span class="builtintype" id="5554184">uint8</span><span class="op" id="5554189">(</span><span class="ident" id="5554190">b</span>&nbsp;<span class="op" id="5554192">&gt;&gt;</span>&nbsp;<span class="num" id="5554195">8</span><span class="op" id="5554196">)</span><span class="op" id="5554197">,</span>&nbsp;<span class="num" id="5554199">0xff</span><span class="op" id="5554203">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5554206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554209">if</span>&nbsp;<span class="ident" id="5554212">a</span>&nbsp;<span class="op" id="5554214">==</span>&nbsp;<span class="num" id="5554217">0</span>&nbsp;<span class="op" id="5554219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554223">return</span>&nbsp;<span class="ident" id="5554230">NRGBA</span><span class="op" id="5554235">{</span><span class="num" id="5554236">0</span><span class="op" id="5554237">,</span>&nbsp;<span class="num" id="5554239">0</span><span class="op" id="5554240">,</span>&nbsp;<span class="num" id="5554242">0</span><span class="op" id="5554243">,</span>&nbsp;<span class="num" id="5554245">0</span><span class="op" id="5554246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5554249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5554252">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5554353">r</span>&nbsp;<span class="op" id="5554355">=</span>&nbsp;<span class="op" id="5554357">(</span><span class="ident" id="5554358">r</span>&nbsp;<span class="op" id="5554360">*</span>&nbsp;<span class="num" id="5554362">0xffff</span><span class="op" id="5554368">)</span>&nbsp;<span class="op" id="5554370">/</span>&nbsp;<span class="ident" id="5554372">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5554375">g</span>&nbsp;<span class="op" id="5554377">=</span>&nbsp;<span class="op" id="5554379">(</span><span class="ident" id="5554380">g</span>&nbsp;<span class="op" id="5554382">*</span>&nbsp;<span class="num" id="5554384">0xffff</span><span class="op" id="5554390">)</span>&nbsp;<span class="op" id="5554392">/</span>&nbsp;<span class="ident" id="5554394">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5554397">b</span>&nbsp;<span class="op" id="5554399">=</span>&nbsp;<span class="op" id="5554401">(</span><span class="ident" id="5554402">b</span>&nbsp;<span class="op" id="5554404">*</span>&nbsp;<span class="num" id="5554406">0xffff</span><span class="op" id="5554412">)</span>&nbsp;<span class="op" id="5554414">/</span>&nbsp;<span class="ident" id="5554416">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554419">return</span>&nbsp;<span class="ident" id="5554426">NRGBA</span><span class="op" id="5554431">{</span><span class="builtintype" id="5554432">uint8</span><span class="op" id="5554437">(</span><span class="ident" id="5554438">r</span>&nbsp;<span class="op" id="5554440">&gt;&gt;</span>&nbsp;<span class="num" id="5554443">8</span><span class="op" id="5554444">)</span><span class="op" id="5554445">,</span>&nbsp;<span class="builtintype" id="5554447">uint8</span><span class="op" id="5554452">(</span><span class="ident" id="5554453">g</span>&nbsp;<span class="op" id="5554455">&gt;&gt;</span>&nbsp;<span class="num" id="5554458">8</span><span class="op" id="5554459">)</span><span class="op" id="5554460">,</span>&nbsp;<span class="builtintype" id="5554462">uint8</span><span class="op" id="5554467">(</span><span class="ident" id="5554468">b</span>&nbsp;<span class="op" id="5554470">&gt;&gt;</span>&nbsp;<span class="num" id="5554473">8</span><span class="op" id="5554474">)</span><span class="op" id="5554475">,</span>&nbsp;<span class="builtintype" id="5554477">uint8</span><span class="op" id="5554482">(</span><span class="ident" id="5554483">a</span>&nbsp;<span class="op" id="5554485">&gt;&gt;</span>&nbsp;<span class="num" id="5554488">8</span><span class="op" id="5554489">)</span><span class="op" id="5554490">}</span><br>
<span class="lineno"></span><span class="op" id="5554492">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="5554495">func</span>&nbsp;<span class="ident" id="5554500">nrgba64Model</span><span class="op" id="5554512">(</span><span class="ident" id="5554513">c</span>&nbsp;<span class="ident" id="5554515">Color</span><span class="op" id="5554520">)</span>&nbsp;<span class="ident" id="5554522">Color</span>&nbsp;<span class="op" id="5554528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554531">if</span>&nbsp;<span class="ident" id="5554534">_</span><span class="op" id="5554535">,</span>&nbsp;<span class="ident" id="5554537">ok</span>&nbsp;<span class="op" id="5554540">:=</span>&nbsp;<span class="ident" id="5554543">c</span><span class="op" id="5554544">.</span><span class="op" id="5554545">(</span><span class="ident" id="5554546">NRGBA64</span><span class="op" id="5554553">)</span><span class="op" id="5554554">;</span>&nbsp;<span class="ident" id="5554556">ok</span>&nbsp;<span class="op" id="5554559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554563">return</span>&nbsp;<span class="ident" id="5554570">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5554573">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5554576">r</span><span class="op" id="5554577">,</span>&nbsp;<span class="ident" id="5554579">g</span><span class="op" id="5554580">,</span>&nbsp;<span class="ident" id="5554582">b</span><span class="op" id="5554583">,</span>&nbsp;<span class="ident" id="5554585">a</span>&nbsp;<span class="op" id="5554587">:=</span>&nbsp;<span class="ident" id="5554590">c</span><span class="op" id="5554591">.</span><span class="ident" id="5554592">RGBA</span><span class="op" id="5554596">(</span><span class="op" id="5554597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554600">if</span>&nbsp;<span class="ident" id="5554603">a</span>&nbsp;<span class="op" id="5554605">==</span>&nbsp;<span class="num" id="5554608">0xffff</span>&nbsp;<span class="op" id="5554615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554619">return</span>&nbsp;<span class="ident" id="5554626">NRGBA64</span><span class="op" id="5554633">{</span><span class="builtintype" id="5554634">uint16</span><span class="op" id="5554640">(</span><span class="ident" id="5554641">r</span><span class="op" id="5554642">)</span><span class="op" id="5554643">,</span>&nbsp;<span class="builtintype" id="5554645">uint16</span><span class="op" id="5554651">(</span><span class="ident" id="5554652">g</span><span class="op" id="5554653">)</span><span class="op" id="5554654">,</span>&nbsp;<span class="builtintype" id="5554656">uint16</span><span class="op" id="5554662">(</span><span class="ident" id="5554663">b</span><span class="op" id="5554664">)</span><span class="op" id="5554665">,</span>&nbsp;<span class="num" id="5554667">0xffff</span><span class="op" id="5554673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5554676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554679">if</span>&nbsp;<span class="ident" id="5554682">a</span>&nbsp;<span class="op" id="5554684">==</span>&nbsp;<span class="num" id="5554687">0</span>&nbsp;<span class="op" id="5554689">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554693">return</span>&nbsp;<span class="ident" id="5554700">NRGBA64</span><span class="op" id="5554707">{</span><span class="num" id="5554708">0</span><span class="op" id="5554709">,</span>&nbsp;<span class="num" id="5554711">0</span><span class="op" id="5554712">,</span>&nbsp;<span class="num" id="5554714">0</span><span class="op" id="5554715">,</span>&nbsp;<span class="num" id="5554717">0</span><span class="op" id="5554718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5554721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5554724">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5554825">r</span>&nbsp;<span class="op" id="5554827">=</span>&nbsp;<span class="op" id="5554829">(</span><span class="ident" id="5554830">r</span>&nbsp;<span class="op" id="5554832">*</span>&nbsp;<span class="num" id="5554834">0xffff</span><span class="op" id="5554840">)</span>&nbsp;<span class="op" id="5554842">/</span>&nbsp;<span class="ident" id="5554844">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5554847">g</span>&nbsp;<span class="op" id="5554849">=</span>&nbsp;<span class="op" id="5554851">(</span><span class="ident" id="5554852">g</span>&nbsp;<span class="op" id="5554854">*</span>&nbsp;<span class="num" id="5554856">0xffff</span><span class="op" id="5554862">)</span>&nbsp;<span class="op" id="5554864">/</span>&nbsp;<span class="ident" id="5554866">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5554869">b</span>&nbsp;<span class="op" id="5554871">=</span>&nbsp;<span class="op" id="5554873">(</span><span class="ident" id="5554874">b</span>&nbsp;<span class="op" id="5554876">*</span>&nbsp;<span class="num" id="5554878">0xffff</span><span class="op" id="5554884">)</span>&nbsp;<span class="op" id="5554886">/</span>&nbsp;<span class="ident" id="5554888">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554891">return</span>&nbsp;<span class="ident" id="5554898">NRGBA64</span><span class="op" id="5554905">{</span><span class="builtintype" id="5554906">uint16</span><span class="op" id="5554912">(</span><span class="ident" id="5554913">r</span><span class="op" id="5554914">)</span><span class="op" id="5554915">,</span>&nbsp;<span class="builtintype" id="5554917">uint16</span><span class="op" id="5554923">(</span><span class="ident" id="5554924">g</span><span class="op" id="5554925">)</span><span class="op" id="5554926">,</span>&nbsp;<span class="builtintype" id="5554928">uint16</span><span class="op" id="5554934">(</span><span class="ident" id="5554935">b</span><span class="op" id="5554936">)</span><span class="op" id="5554937">,</span>&nbsp;<span class="builtintype" id="5554939">uint16</span><span class="op" id="5554945">(</span><span class="ident" id="5554946">a</span><span class="op" id="5554947">)</span><span class="op" id="5554948">}</span><br>
<span class="lineno"></span><span class="op" id="5554950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5554953">func</span>&nbsp;<span class="ident" id="5554958">alphaModel</span><span class="op" id="5554968">(</span><span class="ident" id="5554969">c</span>&nbsp;<span class="ident" id="5554971">Color</span><span class="op" id="5554976">)</span>&nbsp;<span class="ident" id="5554978">Color</span>&nbsp;<span class="op" id="5554984">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5554987">if</span>&nbsp;<span class="ident" id="5554990">_</span><span class="op" id="5554991">,</span>&nbsp;<span class="ident" id="5554993">ok</span>&nbsp;<span class="op" id="5554996">:=</span>&nbsp;<span class="ident" id="5554999">c</span><span class="op" id="5555000">.</span><span class="op" id="5555001">(</span><span class="ident" id="5555002">Alpha</span><span class="op" id="5555007">)</span><span class="op" id="5555008">;</span>&nbsp;<span class="ident" id="5555010">ok</span>&nbsp;<span class="op" id="5555013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555017">return</span>&nbsp;<span class="ident" id="5555024">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5555027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5555030">_</span><span class="op" id="5555031">,</span>&nbsp;<span class="ident" id="5555033">_</span><span class="op" id="5555034">,</span>&nbsp;<span class="ident" id="5555036">_</span><span class="op" id="5555037">,</span>&nbsp;<span class="ident" id="5555039">a</span>&nbsp;<span class="op" id="5555041">:=</span>&nbsp;<span class="ident" id="5555044">c</span><span class="op" id="5555045">.</span><span class="ident" id="5555046">RGBA</span><span class="op" id="5555050">(</span><span class="op" id="5555051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555054">return</span>&nbsp;<span class="ident" id="5555061">Alpha</span><span class="op" id="5555066">{</span><span class="builtintype" id="5555067">uint8</span><span class="op" id="5555072">(</span><span class="ident" id="5555073">a</span>&nbsp;<span class="op" id="5555075">&gt;&gt;</span>&nbsp;<span class="num" id="5555078">8</span><span class="op" id="5555079">)</span><span class="op" id="5555080">}</span><br>
<span class="lineno">225</span><span class="op" id="5555082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5555085">func</span>&nbsp;<span class="ident" id="5555090">alpha16Model</span><span class="op" id="5555102">(</span><span class="ident" id="5555103">c</span>&nbsp;<span class="ident" id="5555105">Color</span><span class="op" id="5555110">)</span>&nbsp;<span class="ident" id="5555112">Color</span>&nbsp;<span class="op" id="5555118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555121">if</span>&nbsp;<span class="ident" id="5555124">_</span><span class="op" id="5555125">,</span>&nbsp;<span class="ident" id="5555127">ok</span>&nbsp;<span class="op" id="5555130">:=</span>&nbsp;<span class="ident" id="5555133">c</span><span class="op" id="5555134">.</span><span class="op" id="5555135">(</span><span class="ident" id="5555136">Alpha16</span><span class="op" id="5555143">)</span><span class="op" id="5555144">;</span>&nbsp;<span class="ident" id="5555146">ok</span>&nbsp;<span class="op" id="5555149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555153">return</span>&nbsp;<span class="ident" id="5555160">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5555163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5555166">_</span><span class="op" id="5555167">,</span>&nbsp;<span class="ident" id="5555169">_</span><span class="op" id="5555170">,</span>&nbsp;<span class="ident" id="5555172">_</span><span class="op" id="5555173">,</span>&nbsp;<span class="ident" id="5555175">a</span>&nbsp;<span class="op" id="5555177">:=</span>&nbsp;<span class="ident" id="5555180">c</span><span class="op" id="5555181">.</span><span class="ident" id="5555182">RGBA</span><span class="op" id="5555186">(</span><span class="op" id="5555187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555190">return</span>&nbsp;<span class="ident" id="5555197">Alpha16</span><span class="op" id="5555204">{</span><span class="builtintype" id="5555205">uint16</span><span class="op" id="5555211">(</span><span class="ident" id="5555212">a</span><span class="op" id="5555213">)</span><span class="op" id="5555214">}</span><br>
<span class="lineno"></span><span class="op" id="5555216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="5555219">func</span>&nbsp;<span class="ident" id="5555224">grayModel</span><span class="op" id="5555233">(</span><span class="ident" id="5555234">c</span>&nbsp;<span class="ident" id="5555236">Color</span><span class="op" id="5555241">)</span>&nbsp;<span class="ident" id="5555243">Color</span>&nbsp;<span class="op" id="5555249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555252">if</span>&nbsp;<span class="ident" id="5555255">_</span><span class="op" id="5555256">,</span>&nbsp;<span class="ident" id="5555258">ok</span>&nbsp;<span class="op" id="5555261">:=</span>&nbsp;<span class="ident" id="5555264">c</span><span class="op" id="5555265">.</span><span class="op" id="5555266">(</span><span class="ident" id="5555267">Gray</span><span class="op" id="5555271">)</span><span class="op" id="5555272">;</span>&nbsp;<span class="ident" id="5555274">ok</span>&nbsp;<span class="op" id="5555277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555281">return</span>&nbsp;<span class="ident" id="5555288">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5555291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5555294">r</span><span class="op" id="5555295">,</span>&nbsp;<span class="ident" id="5555297">g</span><span class="op" id="5555298">,</span>&nbsp;<span class="ident" id="5555300">b</span><span class="op" id="5555301">,</span>&nbsp;<span class="ident" id="5555303">_</span>&nbsp;<span class="op" id="5555305">:=</span>&nbsp;<span class="ident" id="5555308">c</span><span class="op" id="5555309">.</span><span class="ident" id="5555310">RGBA</span><span class="op" id="5555314">(</span><span class="op" id="5555315">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5555318">y</span>&nbsp;<span class="op" id="5555320">:=</span>&nbsp;<span class="op" id="5555323">(</span><span class="num" id="5555324">299</span><span class="op" id="5555327">*</span><span class="ident" id="5555328">r</span>&nbsp;<span class="op" id="5555330">+</span>&nbsp;<span class="num" id="5555332">587</span><span class="op" id="5555335">*</span><span class="ident" id="5555336">g</span>&nbsp;<span class="op" id="5555338">+</span>&nbsp;<span class="num" id="5555340">114</span><span class="op" id="5555343">*</span><span class="ident" id="5555344">b</span>&nbsp;<span class="op" id="5555346">+</span>&nbsp;<span class="num" id="5555348">500</span><span class="op" id="5555351">)</span>&nbsp;<span class="op" id="5555353">/</span>&nbsp;<span class="num" id="5555355">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555361">return</span>&nbsp;<span class="ident" id="5555368">Gray</span><span class="op" id="5555372">{</span><span class="builtintype" id="5555373">uint8</span><span class="op" id="5555378">(</span><span class="ident" id="5555379">y</span>&nbsp;<span class="op" id="5555381">&gt;&gt;</span>&nbsp;<span class="num" id="5555384">8</span><span class="op" id="5555385">)</span><span class="op" id="5555386">}</span><br>
<span class="lineno"></span><span class="op" id="5555388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5555391">func</span>&nbsp;<span class="ident" id="5555396">gray16Model</span><span class="op" id="5555407">(</span><span class="ident" id="5555408">c</span>&nbsp;<span class="ident" id="5555410">Color</span><span class="op" id="5555415">)</span>&nbsp;<span class="ident" id="5555417">Color</span>&nbsp;<span class="op" id="5555423">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555426">if</span>&nbsp;<span class="ident" id="5555429">_</span><span class="op" id="5555430">,</span>&nbsp;<span class="ident" id="5555432">ok</span>&nbsp;<span class="op" id="5555435">:=</span>&nbsp;<span class="ident" id="5555438">c</span><span class="op" id="5555439">.</span><span class="op" id="5555440">(</span><span class="ident" id="5555441">Gray16</span><span class="op" id="5555447">)</span><span class="op" id="5555448">;</span>&nbsp;<span class="ident" id="5555450">ok</span>&nbsp;<span class="op" id="5555453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555457">return</span>&nbsp;<span class="ident" id="5555464">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5555467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5555470">r</span><span class="op" id="5555471">,</span>&nbsp;<span class="ident" id="5555473">g</span><span class="op" id="5555474">,</span>&nbsp;<span class="ident" id="5555476">b</span><span class="op" id="5555477">,</span>&nbsp;<span class="ident" id="5555479">_</span>&nbsp;<span class="op" id="5555481">:=</span>&nbsp;<span class="ident" id="5555484">c</span><span class="op" id="5555485">.</span><span class="ident" id="5555486">RGBA</span><span class="op" id="5555490">(</span><span class="op" id="5555491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5555494">y</span>&nbsp;<span class="op" id="5555496">:=</span>&nbsp;<span class="op" id="5555499">(</span><span class="num" id="5555500">299</span><span class="op" id="5555503">*</span><span class="ident" id="5555504">r</span>&nbsp;<span class="op" id="5555506">+</span>&nbsp;<span class="num" id="5555508">587</span><span class="op" id="5555511">*</span><span class="ident" id="5555512">g</span>&nbsp;<span class="op" id="5555514">+</span>&nbsp;<span class="num" id="5555516">114</span><span class="op" id="5555519">*</span><span class="ident" id="5555520">b</span>&nbsp;<span class="op" id="5555522">+</span>&nbsp;<span class="num" id="5555524">500</span><span class="op" id="5555527">)</span>&nbsp;<span class="op" id="5555529">/</span>&nbsp;<span class="num" id="5555531">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555537">return</span>&nbsp;<span class="ident" id="5555544">Gray16</span><span class="op" id="5555550">{</span><span class="builtintype" id="5555551">uint16</span><span class="op" id="5555557">(</span><span class="ident" id="5555558">y</span><span class="op" id="5555559">)</span><span class="op" id="5555560">}</span><br>
<span class="lineno"></span><span class="op" id="5555562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5555565">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5555600">type</span>&nbsp;<span class="ident" id="5555605">Palette</span>&nbsp;<span class="op" id="5555613">[</span><span class="op" id="5555614">]</span><span class="ident" id="5555615">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="5555622">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5555698">func</span>&nbsp;<span class="op" id="5555703">(</span><span class="ident" id="5555704">p</span>&nbsp;<span class="ident" id="5555706">Palette</span><span class="op" id="5555713">)</span>&nbsp;<span class="ident" id="5555715">Convert</span><span class="op" id="5555722">(</span><span class="ident" id="5555723">c</span>&nbsp;<span class="ident" id="5555725">Color</span><span class="op" id="5555730">)</span>&nbsp;<span class="ident" id="5555732">Color</span>&nbsp;<span class="op" id="5555738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555741">if</span>&nbsp;<span class="builtinfunc" id="5555744">len</span><span class="op" id="5555747">(</span><span class="ident" id="5555748">p</span><span class="op" id="5555749">)</span>&nbsp;<span class="op" id="5555751">==</span>&nbsp;<span class="num" id="5555754">0</span>&nbsp;<span class="op" id="5555756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555760">return</span>&nbsp;<span class="ident" id="5555767">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5555772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5555775">return</span>&nbsp;<span class="ident" id="5555782">p</span><span class="op" id="5555783">[</span><span class="ident" id="5555784">p</span><span class="op" id="5555785">.</span><span class="ident" id="5555786">Index</span><span class="op" id="5555791">(</span><span class="ident" id="5555792">c</span><span class="op" id="5555793">)</span><span class="op" id="5555794">]</span><br>
<span class="lineno"></span><span class="op" id="5555796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5555799">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="5555873">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5555889">func</span>&nbsp;<span class="op" id="5555894">(</span><span class="ident" id="5555895">p</span>&nbsp;<span class="ident" id="5555897">Palette</span><span class="op" id="5555904">)</span>&nbsp;<span class="ident" id="5555906">Index</span><span class="op" id="5555911">(</span><span class="ident" id="5555912">c</span>&nbsp;<span class="ident" id="5555914">Color</span><span class="op" id="5555919">)</span>&nbsp;<span class="builtintype" id="5555921">int</span>&nbsp;<span class="op" id="5555925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5555928">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5555995">cr</span><span class="op" id="5555997">,</span>&nbsp;<span class="ident" id="5555999">cg</span><span class="op" id="5556001">,</span>&nbsp;<span class="ident" id="5556003">cb</span><span class="op" id="5556005">,</span>&nbsp;<span class="ident" id="5556007">_</span>&nbsp;<span class="op" id="5556009">:=</span>&nbsp;<span class="ident" id="5556012">c</span><span class="op" id="5556013">.</span><span class="ident" id="5556014">RGBA</span><span class="op" id="5556018">(</span><span class="op" id="5556019">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556022">ret</span><span class="op" id="5556025">,</span>&nbsp;<span class="ident" id="5556027">bestSSD</span>&nbsp;<span class="op" id="5556035">:=</span>&nbsp;<span class="num" id="5556038">0</span><span class="op" id="5556039">,</span>&nbsp;<span class="builtintype" id="5556041">uint32</span><span class="op" id="5556047">(</span><span class="num" id="5556048">1</span><span class="op" id="5556049">&lt;&lt;</span><span class="num" id="5556051">32</span><span class="op" id="5556053">-</span><span class="num" id="5556054">1</span><span class="op" id="5556055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5556058">for</span>&nbsp;<span class="ident" id="5556062">i</span><span class="op" id="5556063">,</span>&nbsp;<span class="ident" id="5556065">v</span>&nbsp;<span class="op" id="5556067">:=</span>&nbsp;<span class="keyword" id="5556070">range</span>&nbsp;<span class="ident" id="5556076">p</span>&nbsp;<span class="op" id="5556078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556082">vr</span><span class="op" id="5556084">,</span>&nbsp;<span class="ident" id="5556086">vg</span><span class="op" id="5556088">,</span>&nbsp;<span class="ident" id="5556090">vb</span><span class="op" id="5556092">,</span>&nbsp;<span class="ident" id="5556094">_</span>&nbsp;<span class="op" id="5556096">:=</span>&nbsp;<span class="ident" id="5556099">v</span><span class="op" id="5556100">.</span><span class="ident" id="5556101">RGBA</span><span class="op" id="5556105">(</span><span class="op" id="5556106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5556110">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5556171">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556200">delta</span>&nbsp;<span class="op" id="5556206">:=</span>&nbsp;<span class="op" id="5556209">(</span><span class="builtintype" id="5556210">int32</span><span class="op" id="5556215">(</span><span class="ident" id="5556216">cr</span><span class="op" id="5556218">)</span>&nbsp;<span class="op" id="5556220">-</span>&nbsp;<span class="builtintype" id="5556222">int32</span><span class="op" id="5556227">(</span><span class="ident" id="5556228">vr</span><span class="op" id="5556230">)</span><span class="op" id="5556231">)</span>&nbsp;<span class="op" id="5556233">&gt;&gt;</span>&nbsp;<span class="num" id="5556236">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556240">ssd</span>&nbsp;<span class="op" id="5556244">:=</span>&nbsp;<span class="builtintype" id="5556247">uint32</span><span class="op" id="5556253">(</span><span class="ident" id="5556254">delta</span>&nbsp;<span class="op" id="5556260">*</span>&nbsp;<span class="ident" id="5556262">delta</span><span class="op" id="5556267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556271">delta</span>&nbsp;<span class="op" id="5556277">=</span>&nbsp;<span class="op" id="5556279">(</span><span class="builtintype" id="5556280">int32</span><span class="op" id="5556285">(</span><span class="ident" id="5556286">cg</span><span class="op" id="5556288">)</span>&nbsp;<span class="op" id="5556290">-</span>&nbsp;<span class="builtintype" id="5556292">int32</span><span class="op" id="5556297">(</span><span class="ident" id="5556298">vg</span><span class="op" id="5556300">)</span><span class="op" id="5556301">)</span>&nbsp;<span class="op" id="5556303">&gt;&gt;</span>&nbsp;<span class="num" id="5556306">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556310">ssd</span>&nbsp;<span class="op" id="5556314">+=</span>&nbsp;<span class="builtintype" id="5556317">uint32</span><span class="op" id="5556323">(</span><span class="ident" id="5556324">delta</span>&nbsp;<span class="op" id="5556330">*</span>&nbsp;<span class="ident" id="5556332">delta</span><span class="op" id="5556337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556341">delta</span>&nbsp;<span class="op" id="5556347">=</span>&nbsp;<span class="op" id="5556349">(</span><span class="builtintype" id="5556350">int32</span><span class="op" id="5556355">(</span><span class="ident" id="5556356">cb</span><span class="op" id="5556358">)</span>&nbsp;<span class="op" id="5556360">-</span>&nbsp;<span class="builtintype" id="5556362">int32</span><span class="op" id="5556367">(</span><span class="ident" id="5556368">vb</span><span class="op" id="5556370">)</span><span class="op" id="5556371">)</span>&nbsp;<span class="op" id="5556373">&gt;&gt;</span>&nbsp;<span class="num" id="5556376">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556380">ssd</span>&nbsp;<span class="op" id="5556384">+=</span>&nbsp;<span class="builtintype" id="5556387">uint32</span><span class="op" id="5556393">(</span><span class="ident" id="5556394">delta</span>&nbsp;<span class="op" id="5556400">*</span>&nbsp;<span class="ident" id="5556402">delta</span><span class="op" id="5556407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5556411">if</span>&nbsp;<span class="ident" id="5556414">ssd</span>&nbsp;<span class="op" id="5556418">&lt;</span>&nbsp;<span class="ident" id="5556420">bestSSD</span>&nbsp;<span class="op" id="5556428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5556433">if</span>&nbsp;<span class="ident" id="5556436">ssd</span>&nbsp;<span class="op" id="5556440">==</span>&nbsp;<span class="num" id="5556443">0</span>&nbsp;<span class="op" id="5556445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5556451">return</span>&nbsp;<span class="ident" id="5556458">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5556463">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556468">ret</span><span class="op" id="5556471">,</span>&nbsp;<span class="ident" id="5556473">bestSSD</span>&nbsp;<span class="op" id="5556481">=</span>&nbsp;<span class="ident" id="5556483">i</span><span class="op" id="5556484">,</span>&nbsp;<span class="ident" id="5556486">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5556492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5556495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5556498">return</span>&nbsp;<span class="ident" id="5556505">ret</span><br>
<span class="lineno"></span><span class="op" id="5556509">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="5556512">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5556532">var</span>&nbsp;<span class="op" id="5556536">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556539">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5556551">=</span>&nbsp;<span class="ident" id="5556553">Gray16</span><span class="op" id="5556559">{</span><span class="num" id="5556560">0</span><span class="op" id="5556561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556564">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5556576">=</span>&nbsp;<span class="ident" id="5556578">Gray16</span><span class="op" id="5556584">{</span><span class="num" id="5556585">0xffff</span><span class="op" id="5556591">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556594">Transparent</span>&nbsp;<span class="op" id="5556606">=</span>&nbsp;<span class="ident" id="5556608">Alpha16</span><span class="op" id="5556615">{</span><span class="num" id="5556616">0</span><span class="op" id="5556617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5556620">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5556632">=</span>&nbsp;<span class="ident" id="5556634">Alpha16</span><span class="op" id="5556641">{</span><span class="num" id="5556642">0xffff</span><span class="op" id="5556648">}</span><br>
<span class="lineno"></span><span class="op" id="5556650">)</span>
</div>
</body>
</html>
