<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>database/sql/driver</h2>
<ul>
<li><a href="/gostd/database/sql/driver/driver.go.html" class="current">driver.go</a></li>
<li><a href="/gostd/database/sql/driver/types.go.html">types.go</a></li>
<li><a href="/gostd/database/sql/driver/types_test.go.html">types_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5740646">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5740701">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5740755">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5740806">//&nbsp;Package&nbsp;driver&nbsp;defines&nbsp;interfaces&nbsp;to&nbsp;be&nbsp;implemented&nbsp;by&nbsp;database</span><br>
<span class="lineno"></span><span class="comment" id="5740873">//&nbsp;drivers&nbsp;as&nbsp;used&nbsp;by&nbsp;package&nbsp;sql.</span><br>
<span class="lineno"></span><span class="comment" id="5740908">//</span><br>
<span class="lineno"></span><span class="comment" id="5740911">//&nbsp;Most&nbsp;code&nbsp;should&nbsp;use&nbsp;package&nbsp;sql.</span><br>
<span class="lineno"></span><span class="keyword" id="5740948">package</span>&nbsp;<span class="ident" id="5740956">driver</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5740964">import</span>&nbsp;<span class="string" id="5740971">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5740981">//&nbsp;Value&nbsp;is&nbsp;a&nbsp;value&nbsp;that&nbsp;drivers&nbsp;must&nbsp;be&nbsp;able&nbsp;to&nbsp;handle.</span><br>
<span class="lineno"></span><span class="comment" id="5741038">//&nbsp;It&nbsp;is&nbsp;either&nbsp;nil&nbsp;or&nbsp;an&nbsp;instance&nbsp;of&nbsp;one&nbsp;of&nbsp;these&nbsp;types:</span><br>
<span class="lineno">15</span><span class="comment" id="5741096">//</span><br>
<span class="lineno"></span><span class="comment" id="5741099">//&nbsp;&nbsp;&nbsp;int64</span><br>
<span class="lineno"></span><span class="comment" id="5741110">//&nbsp;&nbsp;&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="5741123">//&nbsp;&nbsp;&nbsp;bool</span><br>
<span class="lineno"></span><span class="comment" id="5741133">//&nbsp;&nbsp;&nbsp;[]byte</span><br>
<span class="lineno">20</span><span class="comment" id="5741145">//&nbsp;&nbsp;&nbsp;string&nbsp;&nbsp;&nbsp;[*]&nbsp;everywhere&nbsp;except&nbsp;from&nbsp;Rows.Next.</span><br>
<span class="lineno"></span><span class="comment" id="5741197">//&nbsp;&nbsp;&nbsp;time.Time</span><br>
<span class="lineno"></span><span class="keyword" id="5741212">type</span>&nbsp;<span class="ident" id="5741217">Value</span>&nbsp;<span class="keyword" id="5741223">interface</span><span class="op" id="5741232">{</span><span class="op" id="5741233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5741236">//&nbsp;Driver&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;must&nbsp;be&nbsp;implemented&nbsp;by&nbsp;a&nbsp;database</span><br>
<span class="lineno">25</span><span class="comment" id="5741302">//&nbsp;driver.</span><br>
<span class="lineno"></span><span class="keyword" id="5741313">type</span>&nbsp;<span class="ident" id="5741318">Driver</span>&nbsp;<span class="keyword" id="5741325">interface</span>&nbsp;<span class="op" id="5741335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741338">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;connection&nbsp;to&nbsp;the&nbsp;database.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741389">//&nbsp;The&nbsp;name&nbsp;is&nbsp;a&nbsp;string&nbsp;in&nbsp;a&nbsp;driver-specific&nbsp;format.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741443">//</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741447">//&nbsp;Open&nbsp;may&nbsp;return&nbsp;a&nbsp;cached&nbsp;connection&nbsp;(one&nbsp;previously</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741503">//&nbsp;closed),&nbsp;but&nbsp;doing&nbsp;so&nbsp;is&nbsp;unnecessary;&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741561">//&nbsp;maintains&nbsp;a&nbsp;pool&nbsp;of&nbsp;idle&nbsp;connections&nbsp;for&nbsp;efficient&nbsp;re-use.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741624">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741628">//&nbsp;The&nbsp;returned&nbsp;connection&nbsp;is&nbsp;only&nbsp;used&nbsp;by&nbsp;one&nbsp;goroutine&nbsp;at&nbsp;a</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5741691">//&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5741701">Open</span><span class="op" id="5741705">(</span><span class="ident" id="5741706">name</span>&nbsp;<span class="builtintype" id="5741711">string</span><span class="op" id="5741717">)</span>&nbsp;<span class="op" id="5741719">(</span><span class="ident" id="5741720">Conn</span><span class="op" id="5741724">,</span>&nbsp;<span class="builtintype" id="5741726">error</span><span class="op" id="5741731">)</span><br>
<span class="lineno"></span><span class="op" id="5741733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5741736">//&nbsp;ErrSkip&nbsp;may&nbsp;be&nbsp;returned&nbsp;by&nbsp;some&nbsp;optional&nbsp;interfaces&#39;&nbsp;methods&nbsp;to</span><br>
<span class="lineno">40</span><span class="comment" id="5741803">//&nbsp;indicate&nbsp;at&nbsp;runtime&nbsp;that&nbsp;the&nbsp;fast&nbsp;path&nbsp;is&nbsp;unavailable&nbsp;and&nbsp;the&nbsp;sql</span><br>
<span class="lineno"></span><span class="comment" id="5741872">//&nbsp;package&nbsp;should&nbsp;continue&nbsp;as&nbsp;if&nbsp;the&nbsp;optional&nbsp;interface&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="5741936">//&nbsp;implemented.&nbsp;ErrSkip&nbsp;is&nbsp;only&nbsp;supported&nbsp;where&nbsp;explicitly</span><br>
<span class="lineno"></span><span class="comment" id="5741995">//&nbsp;documented.</span><br>
<span class="lineno"></span><span class="keyword" id="5742010">var</span>&nbsp;<span class="ident" id="5742014">ErrSkip</span>&nbsp;<span class="op" id="5742022">=</span>&nbsp;<span class="ident" id="5742024">errors</span><span class="op" id="5742030">.</span><span class="ident" id="5742031">New</span><span class="op" id="5742034">(</span><span class="string" id="5742035">&#34;driver:&nbsp;skip&nbsp;fast-path;&nbsp;continue&nbsp;as&nbsp;if&nbsp;unimplemented&#34;</span><span class="op" id="5742089">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="5742092">//&nbsp;ErrBadConn&nbsp;should&nbsp;be&nbsp;returned&nbsp;by&nbsp;a&nbsp;driver&nbsp;to&nbsp;signal&nbsp;to&nbsp;the&nbsp;sql</span><br>
<span class="lineno"></span><span class="comment" id="5742158">//&nbsp;package&nbsp;that&nbsp;a&nbsp;driver.Conn&nbsp;is&nbsp;in&nbsp;a&nbsp;bad&nbsp;state&nbsp;(such&nbsp;as&nbsp;the&nbsp;server</span><br>
<span class="lineno"></span><span class="comment" id="5742226">//&nbsp;having&nbsp;earlier&nbsp;closed&nbsp;the&nbsp;connection)&nbsp;and&nbsp;the&nbsp;sql&nbsp;package&nbsp;should</span><br>
<span class="lineno"></span><span class="comment" id="5742294">//&nbsp;retry&nbsp;on&nbsp;a&nbsp;new&nbsp;connection.</span><br>
<span class="lineno">50</span><span class="comment" id="5742324">//</span><br>
<span class="lineno"></span><span class="comment" id="5742327">//&nbsp;To&nbsp;prevent&nbsp;duplicate&nbsp;operations,&nbsp;ErrBadConn&nbsp;should&nbsp;NOT&nbsp;be&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="5742397">//&nbsp;if&nbsp;there&#39;s&nbsp;a&nbsp;possibility&nbsp;that&nbsp;the&nbsp;database&nbsp;server&nbsp;might&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="5742461">//&nbsp;performed&nbsp;the&nbsp;operation.&nbsp;Even&nbsp;if&nbsp;the&nbsp;server&nbsp;sends&nbsp;back&nbsp;an&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="5742529">//&nbsp;you&nbsp;shouldn&#39;t&nbsp;return&nbsp;ErrBadConn.</span><br>
<span class="lineno">55</span><span class="keyword" id="5742565">var</span>&nbsp;<span class="ident" id="5742569">ErrBadConn</span>&nbsp;<span class="op" id="5742580">=</span>&nbsp;<span class="ident" id="5742582">errors</span><span class="op" id="5742588">.</span><span class="ident" id="5742589">New</span><span class="op" id="5742592">(</span><span class="string" id="5742593">&#34;driver:&nbsp;bad&nbsp;connection&#34;</span><span class="op" id="5742617">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5742620">//&nbsp;Execer&nbsp;is&nbsp;an&nbsp;optional&nbsp;interface&nbsp;that&nbsp;may&nbsp;be&nbsp;implemented&nbsp;by&nbsp;a&nbsp;Conn.</span><br>
<span class="lineno"></span><span class="comment" id="5742690">//</span><br>
<span class="lineno"></span><span class="comment" id="5742693">//&nbsp;If&nbsp;a&nbsp;Conn&nbsp;does&nbsp;not&nbsp;implement&nbsp;Execer,&nbsp;the&nbsp;sql&nbsp;package&#39;s&nbsp;DB.Exec&nbsp;will</span><br>
<span class="lineno">60</span><span class="comment" id="5742764">//&nbsp;first&nbsp;prepare&nbsp;a&nbsp;query,&nbsp;execute&nbsp;the&nbsp;statement,&nbsp;and&nbsp;then&nbsp;close&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5742832">//&nbsp;statement.</span><br>
<span class="lineno"></span><span class="comment" id="5742846">//</span><br>
<span class="lineno"></span><span class="comment" id="5742849">//&nbsp;Exec&nbsp;may&nbsp;return&nbsp;ErrSkip.</span><br>
<span class="lineno"></span><span class="keyword" id="5742877">type</span>&nbsp;<span class="ident" id="5742882">Execer</span>&nbsp;<span class="keyword" id="5742889">interface</span>&nbsp;<span class="op" id="5742899">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5742902">Exec</span><span class="op" id="5742906">(</span><span class="ident" id="5742907">query</span>&nbsp;<span class="builtintype" id="5742913">string</span><span class="op" id="5742919">,</span>&nbsp;<span class="ident" id="5742921">args</span>&nbsp;<span class="op" id="5742926">[</span><span class="op" id="5742927">]</span><span class="ident" id="5742928">Value</span><span class="op" id="5742933">)</span>&nbsp;<span class="op" id="5742935">(</span><span class="ident" id="5742936">Result</span><span class="op" id="5742942">,</span>&nbsp;<span class="builtintype" id="5742944">error</span><span class="op" id="5742949">)</span><br>
<span class="lineno"></span><span class="op" id="5742951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5742954">//&nbsp;Queryer&nbsp;is&nbsp;an&nbsp;optional&nbsp;interface&nbsp;that&nbsp;may&nbsp;be&nbsp;implemented&nbsp;by&nbsp;a&nbsp;Conn.</span><br>
<span class="lineno"></span><span class="comment" id="5743025">//</span><br>
<span class="lineno">70</span><span class="comment" id="5743028">//&nbsp;If&nbsp;a&nbsp;Conn&nbsp;does&nbsp;not&nbsp;implement&nbsp;Queryer,&nbsp;the&nbsp;sql&nbsp;package&#39;s&nbsp;DB.Query&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="5743101">//&nbsp;first&nbsp;prepare&nbsp;a&nbsp;query,&nbsp;execute&nbsp;the&nbsp;statement,&nbsp;and&nbsp;then&nbsp;close&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5743169">//&nbsp;statement.</span><br>
<span class="lineno"></span><span class="comment" id="5743183">//</span><br>
<span class="lineno"></span><span class="comment" id="5743186">//&nbsp;Query&nbsp;may&nbsp;return&nbsp;ErrSkip.</span><br>
<span class="lineno">75</span><span class="keyword" id="5743215">type</span>&nbsp;<span class="ident" id="5743220">Queryer</span>&nbsp;<span class="keyword" id="5743228">interface</span>&nbsp;<span class="op" id="5743238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743241">Query</span><span class="op" id="5743246">(</span><span class="ident" id="5743247">query</span>&nbsp;<span class="builtintype" id="5743253">string</span><span class="op" id="5743259">,</span>&nbsp;<span class="ident" id="5743261">args</span>&nbsp;<span class="op" id="5743266">[</span><span class="op" id="5743267">]</span><span class="ident" id="5743268">Value</span><span class="op" id="5743273">)</span>&nbsp;<span class="op" id="5743275">(</span><span class="ident" id="5743276">Rows</span><span class="op" id="5743280">,</span>&nbsp;<span class="builtintype" id="5743282">error</span><span class="op" id="5743287">)</span><br>
<span class="lineno"></span><span class="op" id="5743289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5743292">//&nbsp;Conn&nbsp;is&nbsp;a&nbsp;connection&nbsp;to&nbsp;a&nbsp;database.&nbsp;It&nbsp;is&nbsp;not&nbsp;used&nbsp;concurrently</span><br>
<span class="lineno">80</span><span class="comment" id="5743359">//&nbsp;by&nbsp;multiple&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="comment" id="5743386">//</span><br>
<span class="lineno"></span><span class="comment" id="5743389">//&nbsp;Conn&nbsp;is&nbsp;assumed&nbsp;to&nbsp;be&nbsp;stateful.</span><br>
<span class="lineno"></span><span class="keyword" id="5743424">type</span>&nbsp;<span class="ident" id="5743429">Conn</span>&nbsp;<span class="keyword" id="5743434">interface</span>&nbsp;<span class="op" id="5743444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743447">//&nbsp;Prepare&nbsp;returns&nbsp;a&nbsp;prepared&nbsp;statement,&nbsp;bound&nbsp;to&nbsp;this&nbsp;connection.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743515">Prepare</span><span class="op" id="5743522">(</span><span class="ident" id="5743523">query</span>&nbsp;<span class="builtintype" id="5743529">string</span><span class="op" id="5743535">)</span>&nbsp;<span class="op" id="5743537">(</span><span class="ident" id="5743538">Stmt</span><span class="op" id="5743542">,</span>&nbsp;<span class="builtintype" id="5743544">error</span><span class="op" id="5743549">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743553">//&nbsp;Close&nbsp;invalidates&nbsp;and&nbsp;potentially&nbsp;stops&nbsp;any&nbsp;current</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743609">//&nbsp;prepared&nbsp;statements&nbsp;and&nbsp;transactions,&nbsp;marking&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743664">//&nbsp;connection&nbsp;as&nbsp;no&nbsp;longer&nbsp;in&nbsp;use.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743700">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743704">//&nbsp;Because&nbsp;the&nbsp;sql&nbsp;package&nbsp;maintains&nbsp;a&nbsp;free&nbsp;pool&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743757">//&nbsp;connections&nbsp;and&nbsp;only&nbsp;calls&nbsp;Close&nbsp;when&nbsp;there&#39;s&nbsp;a&nbsp;surplus&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743820">//&nbsp;idle&nbsp;connections,&nbsp;it&nbsp;shouldn&#39;t&nbsp;be&nbsp;necessary&nbsp;for&nbsp;drivers&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743883">//&nbsp;do&nbsp;their&nbsp;own&nbsp;connection&nbsp;caching.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743920">Close</span><span class="op" id="5743925">(</span><span class="op" id="5743926">)</span>&nbsp;<span class="builtintype" id="5743928">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5743936">//&nbsp;Begin&nbsp;starts&nbsp;and&nbsp;returns&nbsp;a&nbsp;new&nbsp;transaction.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5743984">Begin</span><span class="op" id="5743989">(</span><span class="op" id="5743990">)</span>&nbsp;<span class="op" id="5743992">(</span><span class="ident" id="5743993">Tx</span><span class="op" id="5743995">,</span>&nbsp;<span class="builtintype" id="5743997">error</span><span class="op" id="5744002">)</span><br>
<span class="lineno"></span><span class="op" id="5744004">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5744007">//&nbsp;Result&nbsp;is&nbsp;the&nbsp;result&nbsp;of&nbsp;a&nbsp;query&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="5744053">type</span>&nbsp;<span class="ident" id="5744058">Result</span>&nbsp;<span class="keyword" id="5744065">interface</span>&nbsp;<span class="op" id="5744075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744078">//&nbsp;LastInsertId&nbsp;returns&nbsp;the&nbsp;database&#39;s&nbsp;auto-generated&nbsp;ID</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744136">//&nbsp;after,&nbsp;for&nbsp;example,&nbsp;an&nbsp;INSERT&nbsp;into&nbsp;a&nbsp;table&nbsp;with&nbsp;primary</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744196">//&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744205">LastInsertId</span><span class="op" id="5744217">(</span><span class="op" id="5744218">)</span>&nbsp;<span class="op" id="5744220">(</span><span class="ident" id="5744221">int64</span><span class="op" id="5744226">,</span>&nbsp;<span class="builtintype" id="5744228">error</span><span class="op" id="5744233">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744237">//&nbsp;RowsAffected&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;rows&nbsp;affected&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744297">//&nbsp;query.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744308">RowsAffected</span><span class="op" id="5744320">(</span><span class="op" id="5744321">)</span>&nbsp;<span class="op" id="5744323">(</span><span class="ident" id="5744324">int64</span><span class="op" id="5744329">,</span>&nbsp;<span class="builtintype" id="5744331">error</span><span class="op" id="5744336">)</span><br>
<span class="lineno"></span><span class="op" id="5744338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5744341">//&nbsp;Stmt&nbsp;is&nbsp;a&nbsp;prepared&nbsp;statement.&nbsp;It&nbsp;is&nbsp;bound&nbsp;to&nbsp;a&nbsp;Conn&nbsp;and&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="5744404">//&nbsp;used&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;concurrently.</span><br>
<span class="lineno">115</span><span class="keyword" id="5744449">type</span>&nbsp;<span class="ident" id="5744454">Stmt</span>&nbsp;<span class="keyword" id="5744459">interface</span>&nbsp;<span class="op" id="5744469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744472">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;statement.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744504">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744508">//&nbsp;As&nbsp;of&nbsp;Go&nbsp;1.1,&nbsp;a&nbsp;Stmt&nbsp;will&nbsp;not&nbsp;be&nbsp;closed&nbsp;if&nbsp;it&#39;s&nbsp;in&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744567">//&nbsp;by&nbsp;any&nbsp;queries.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5744587">Close</span><span class="op" id="5744592">(</span><span class="op" id="5744593">)</span>&nbsp;<span class="builtintype" id="5744595">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744603">//&nbsp;NumInput&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;placeholder&nbsp;parameters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744662">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744666">//&nbsp;If&nbsp;NumInput&nbsp;returns&nbsp;&gt;=&nbsp;0,&nbsp;the&nbsp;sql&nbsp;package&nbsp;will&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744730">//&nbsp;argument&nbsp;counts&nbsp;from&nbsp;callers&nbsp;and&nbsp;return&nbsp;errors&nbsp;to&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744795">//&nbsp;before&nbsp;the&nbsp;statement&#39;s&nbsp;Exec&nbsp;or&nbsp;Query&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744856">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744860">//&nbsp;NumInput&nbsp;may&nbsp;also&nbsp;return&nbsp;-1,&nbsp;if&nbsp;the&nbsp;driver&nbsp;doesn&#39;t&nbsp;know</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744920">//&nbsp;its&nbsp;number&nbsp;of&nbsp;placeholders.&nbsp;In&nbsp;that&nbsp;case,&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5744982">//&nbsp;will&nbsp;not&nbsp;sanity&nbsp;check&nbsp;Exec&nbsp;or&nbsp;Query&nbsp;argument&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745039">NumInput</span><span class="op" id="5745047">(</span><span class="op" id="5745048">)</span>&nbsp;<span class="builtintype" id="5745050">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745056">//&nbsp;Exec&nbsp;executes&nbsp;a&nbsp;query&nbsp;that&nbsp;doesn&#39;t&nbsp;return&nbsp;rows,&nbsp;such</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745113">//&nbsp;as&nbsp;an&nbsp;INSERT&nbsp;or&nbsp;UPDATE.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745141">Exec</span><span class="op" id="5745145">(</span><span class="ident" id="5745146">args</span>&nbsp;<span class="op" id="5745151">[</span><span class="op" id="5745152">]</span><span class="ident" id="5745153">Value</span><span class="op" id="5745158">)</span>&nbsp;<span class="op" id="5745160">(</span><span class="ident" id="5745161">Result</span><span class="op" id="5745167">,</span>&nbsp;<span class="builtintype" id="5745169">error</span><span class="op" id="5745174">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745178">//&nbsp;Query&nbsp;executes&nbsp;a&nbsp;query&nbsp;that&nbsp;may&nbsp;return&nbsp;rows,&nbsp;such&nbsp;as&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745237">//&nbsp;SELECT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745249">Query</span><span class="op" id="5745254">(</span><span class="ident" id="5745255">args</span>&nbsp;<span class="op" id="5745260">[</span><span class="op" id="5745261">]</span><span class="ident" id="5745262">Value</span><span class="op" id="5745267">)</span>&nbsp;<span class="op" id="5745269">(</span><span class="ident" id="5745270">Rows</span><span class="op" id="5745274">,</span>&nbsp;<span class="builtintype" id="5745276">error</span><span class="op" id="5745281">)</span><br>
<span class="lineno">140</span><span class="op" id="5745283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5745286">//&nbsp;ColumnConverter&nbsp;may&nbsp;be&nbsp;optionally&nbsp;implemented&nbsp;by&nbsp;Stmt&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5745350">//&nbsp;statement&nbsp;is&nbsp;aware&nbsp;of&nbsp;its&nbsp;own&nbsp;columns&#39;&nbsp;types&nbsp;and&nbsp;can&nbsp;convert&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="5745419">//&nbsp;any&nbsp;type&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno">145</span><span class="keyword" id="5745450">type</span>&nbsp;<span class="ident" id="5745455">ColumnConverter</span>&nbsp;<span class="keyword" id="5745471">interface</span>&nbsp;<span class="op" id="5745481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745484">//&nbsp;ColumnConverter&nbsp;returns&nbsp;a&nbsp;ValueConverter&nbsp;for&nbsp;the&nbsp;provided</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745546">//&nbsp;column&nbsp;index.&nbsp;&nbsp;If&nbsp;the&nbsp;type&nbsp;of&nbsp;a&nbsp;specific&nbsp;column&nbsp;isn&#39;t&nbsp;known</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745610">//&nbsp;or&nbsp;shouldn&#39;t&nbsp;be&nbsp;handled&nbsp;specially,&nbsp;DefaultValueConverter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745671">//&nbsp;can&nbsp;be&nbsp;returned.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5745692">ColumnConverter</span><span class="op" id="5745707">(</span><span class="ident" id="5745708">idx</span>&nbsp;<span class="builtintype" id="5745712">int</span><span class="op" id="5745715">)</span>&nbsp;<span class="ident" id="5745717">ValueConverter</span><br>
<span class="lineno"></span><span class="op" id="5745732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5745735">//&nbsp;Rows&nbsp;is&nbsp;an&nbsp;iterator&nbsp;over&nbsp;an&nbsp;executed&nbsp;query&#39;s&nbsp;results.</span><br>
<span class="lineno"></span><span class="keyword" id="5745792">type</span>&nbsp;<span class="ident" id="5745797">Rows</span>&nbsp;<span class="keyword" id="5745802">interface</span>&nbsp;<span class="op" id="5745812">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745815">//&nbsp;Columns&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;the&nbsp;columns.&nbsp;The&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745875">//&nbsp;columns&nbsp;of&nbsp;the&nbsp;result&nbsp;is&nbsp;inferred&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745936">//&nbsp;slice.&nbsp;&nbsp;If&nbsp;a&nbsp;particular&nbsp;column&nbsp;name&nbsp;isn&#39;t&nbsp;known,&nbsp;an&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5745998">//&nbsp;string&nbsp;should&nbsp;be&nbsp;returned&nbsp;for&nbsp;that&nbsp;entry.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746044">Columns</span><span class="op" id="5746051">(</span><span class="op" id="5746052">)</span>&nbsp;<span class="op" id="5746054">[</span><span class="op" id="5746055">]</span><span class="builtintype" id="5746056">string</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746065">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;rows&nbsp;iterator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746101">Close</span><span class="op" id="5746106">(</span><span class="op" id="5746107">)</span>&nbsp;<span class="builtintype" id="5746109">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746117">//&nbsp;Next&nbsp;is&nbsp;called&nbsp;to&nbsp;populate&nbsp;the&nbsp;next&nbsp;row&nbsp;of&nbsp;data&nbsp;into</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746174">//&nbsp;the&nbsp;provided&nbsp;slice.&nbsp;The&nbsp;provided&nbsp;slice&nbsp;will&nbsp;be&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746234">//&nbsp;size&nbsp;as&nbsp;the&nbsp;Columns()&nbsp;are&nbsp;wide.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746270">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746274">//&nbsp;The&nbsp;dest&nbsp;slice&nbsp;may&nbsp;be&nbsp;populated&nbsp;only&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746320">//&nbsp;a&nbsp;driver&nbsp;Value&nbsp;type,&nbsp;but&nbsp;excluding&nbsp;string.</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746367">//&nbsp;All&nbsp;string&nbsp;values&nbsp;must&nbsp;be&nbsp;converted&nbsp;to&nbsp;[]byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746418">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5746422">//&nbsp;Next&nbsp;should&nbsp;return&nbsp;io.EOF&nbsp;when&nbsp;there&nbsp;are&nbsp;no&nbsp;more&nbsp;rows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746481">Next</span><span class="op" id="5746485">(</span><span class="ident" id="5746486">dest</span>&nbsp;<span class="op" id="5746491">[</span><span class="op" id="5746492">]</span><span class="ident" id="5746493">Value</span><span class="op" id="5746498">)</span>&nbsp;<span class="builtintype" id="5746500">error</span><br>
<span class="lineno"></span><span class="op" id="5746506">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="5746509">//&nbsp;Tx&nbsp;is&nbsp;a&nbsp;transaction.</span><br>
<span class="lineno"></span><span class="keyword" id="5746533">type</span>&nbsp;<span class="ident" id="5746538">Tx</span>&nbsp;<span class="keyword" id="5746541">interface</span>&nbsp;<span class="op" id="5746551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746554">Commit</span><span class="op" id="5746560">(</span><span class="op" id="5746561">)</span>&nbsp;<span class="builtintype" id="5746563">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5746570">Rollback</span><span class="op" id="5746578">(</span><span class="op" id="5746579">)</span>&nbsp;<span class="builtintype" id="5746581">error</span><br>
<span class="lineno">180</span><span class="op" id="5746587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5746590">//&nbsp;RowsAffected&nbsp;implements&nbsp;Result&nbsp;for&nbsp;an&nbsp;INSERT&nbsp;or&nbsp;UPDATE&nbsp;operation</span><br>
<span class="lineno"></span><span class="comment" id="5746658">//&nbsp;which&nbsp;mutates&nbsp;a&nbsp;number&nbsp;of&nbsp;rows.</span><br>
<span class="lineno"></span><span class="keyword" id="5746693">type</span>&nbsp;<span class="ident" id="5746698">RowsAffected</span>&nbsp;<span class="ident" id="5746711">int64</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="5746718">var</span>&nbsp;<span class="ident" id="5746722">_</span>&nbsp;<span class="ident" id="5746724">Result</span>&nbsp;<span class="op" id="5746731">=</span>&nbsp;<span class="ident" id="5746733">RowsAffected</span><span class="op" id="5746745">(</span><span class="num" id="5746746">0</span><span class="op" id="5746747">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5746750">func</span>&nbsp;<span class="op" id="5746755">(</span><span class="ident" id="5746756">RowsAffected</span><span class="op" id="5746768">)</span>&nbsp;<span class="ident" id="5746770">LastInsertId</span><span class="op" id="5746782">(</span><span class="op" id="5746783">)</span>&nbsp;<span class="op" id="5746785">(</span><span class="ident" id="5746786">int64</span><span class="op" id="5746791">,</span>&nbsp;<span class="builtintype" id="5746793">error</span><span class="op" id="5746798">)</span>&nbsp;<span class="op" id="5746800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5746803">return</span>&nbsp;<span class="num" id="5746810">0</span><span class="op" id="5746811">,</span>&nbsp;<span class="ident" id="5746813">errors</span><span class="op" id="5746819">.</span><span class="ident" id="5746820">New</span><span class="op" id="5746823">(</span><span class="string" id="5746824">&#34;no&nbsp;LastInsertId&nbsp;available&#34;</span><span class="op" id="5746851">)</span><br>
<span class="lineno">190</span><span class="op" id="5746853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5746856">func</span>&nbsp;<span class="op" id="5746861">(</span><span class="ident" id="5746862">v</span>&nbsp;<span class="ident" id="5746864">RowsAffected</span><span class="op" id="5746876">)</span>&nbsp;<span class="ident" id="5746878">RowsAffected</span><span class="op" id="5746890">(</span><span class="op" id="5746891">)</span>&nbsp;<span class="op" id="5746893">(</span><span class="ident" id="5746894">int64</span><span class="op" id="5746899">,</span>&nbsp;<span class="builtintype" id="5746901">error</span><span class="op" id="5746906">)</span>&nbsp;<span class="op" id="5746908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5746911">return</span>&nbsp;<span class="ident" id="5746918">int64</span><span class="op" id="5746923">(</span><span class="ident" id="5746924">v</span><span class="op" id="5746925">)</span><span class="op" id="5746926">,</span>&nbsp;<span class="ident" id="5746928">nil</span><br>
<span class="lineno"></span><span class="op" id="5746932">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="5746935">//&nbsp;ResultNoRows&nbsp;is&nbsp;a&nbsp;pre-defined&nbsp;Result&nbsp;for&nbsp;drivers&nbsp;to&nbsp;return&nbsp;when&nbsp;a&nbsp;DDL</span><br>
<span class="lineno"></span><span class="comment" id="5747008">//&nbsp;command&nbsp;(such&nbsp;as&nbsp;a&nbsp;CREATE&nbsp;TABLE)&nbsp;succeeds.&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;for&nbsp;both</span><br>
<span class="lineno"></span><span class="comment" id="5747083">//&nbsp;LastInsertId&nbsp;and&nbsp;RowsAffected.</span><br>
<span class="lineno"></span><span class="keyword" id="5747117">var</span>&nbsp;<span class="ident" id="5747121">ResultNoRows</span>&nbsp;<span class="ident" id="5747134">noRows</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="5747142">type</span>&nbsp;<span class="ident" id="5747147">noRows</span>&nbsp;<span class="keyword" id="5747154">struct</span><span class="op" id="5747160">{</span><span class="op" id="5747161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5747164">var</span>&nbsp;<span class="ident" id="5747168">_</span>&nbsp;<span class="ident" id="5747170">Result</span>&nbsp;<span class="op" id="5747177">=</span>&nbsp;<span class="ident" id="5747179">noRows</span><span class="op" id="5747185">{</span><span class="op" id="5747186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="5747189">func</span>&nbsp;<span class="op" id="5747194">(</span><span class="ident" id="5747195">noRows</span><span class="op" id="5747201">)</span>&nbsp;<span class="ident" id="5747203">LastInsertId</span><span class="op" id="5747215">(</span><span class="op" id="5747216">)</span>&nbsp;<span class="op" id="5747218">(</span><span class="ident" id="5747219">int64</span><span class="op" id="5747224">,</span>&nbsp;<span class="builtintype" id="5747226">error</span><span class="op" id="5747231">)</span>&nbsp;<span class="op" id="5747233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747236">return</span>&nbsp;<span class="num" id="5747243">0</span><span class="op" id="5747244">,</span>&nbsp;<span class="ident" id="5747246">errors</span><span class="op" id="5747252">.</span><span class="ident" id="5747253">New</span><span class="op" id="5747256">(</span><span class="string" id="5747257">&#34;no&nbsp;LastInsertId&nbsp;available&nbsp;after&nbsp;DDL&nbsp;statement&#34;</span><span class="op" id="5747304">)</span><br>
<span class="lineno"></span><span class="op" id="5747306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5747309">func</span>&nbsp;<span class="op" id="5747314">(</span><span class="ident" id="5747315">noRows</span><span class="op" id="5747321">)</span>&nbsp;<span class="ident" id="5747323">RowsAffected</span><span class="op" id="5747335">(</span><span class="op" id="5747336">)</span>&nbsp;<span class="op" id="5747338">(</span><span class="ident" id="5747339">int64</span><span class="op" id="5747344">,</span>&nbsp;<span class="builtintype" id="5747346">error</span><span class="op" id="5747351">)</span>&nbsp;<span class="op" id="5747353">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5747356">return</span>&nbsp;<span class="num" id="5747363">0</span><span class="op" id="5747364">,</span>&nbsp;<span class="ident" id="5747366">errors</span><span class="op" id="5747372">.</span><span class="ident" id="5747373">New</span><span class="op" id="5747376">(</span><span class="string" id="5747377">&#34;no&nbsp;RowsAffected&nbsp;available&nbsp;after&nbsp;DDL&nbsp;statement&#34;</span><span class="op" id="5747424">)</span><br>
<span class="lineno"></span><span class="op" id="5747426">}</span>
</div>
</body>
</html>
