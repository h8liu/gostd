<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html" class="current">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4883479">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4883534">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4883588">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4883639">package</span>&nbsp;<span class="ident" id="4883647">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4883652">import</span>&nbsp;<span class="op" id="4883659">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4883662">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4883671">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4883681">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4883687">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4883698">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="4883705">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4883708">//&nbsp;tooBig&nbsp;provides&nbsp;a&nbsp;sanity&nbsp;check&nbsp;for&nbsp;sizes;&nbsp;used&nbsp;in&nbsp;several&nbsp;places.</span><br>
<span class="lineno"></span><span class="comment" id="4883777">//&nbsp;Upper&nbsp;limit&nbsp;of&nbsp;1GB,&nbsp;allowing&nbsp;room&nbsp;to&nbsp;grow&nbsp;a&nbsp;little&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="4883849">//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;adjustable?</span><br>
<span class="lineno"></span><span class="keyword" id="4883880">const</span>&nbsp;<span class="ident" id="4883886">tooBig</span>&nbsp;<span class="op" id="4883893">=</span>&nbsp;<span class="num" id="4883895">1</span>&nbsp;<span class="op" id="4883897">&lt;&lt;</span>&nbsp;<span class="num" id="4883900">30</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="4883904">//&nbsp;A&nbsp;Decoder&nbsp;manages&nbsp;the&nbsp;receipt&nbsp;of&nbsp;type&nbsp;and&nbsp;data&nbsp;information&nbsp;read&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4883980">//&nbsp;remote&nbsp;side&nbsp;of&nbsp;a&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="4884012">type</span>&nbsp;<span class="ident" id="4884017">Decoder</span>&nbsp;<span class="keyword" id="4884025">struct</span>&nbsp;<span class="op" id="4884032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884035">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4884048">sync</span><span class="op" id="4884052">.</span><span class="ident" id="4884053">Mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884088">//&nbsp;each&nbsp;item&nbsp;must&nbsp;be&nbsp;received&nbsp;atomically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884130">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4884143">io</span><span class="op" id="4884145">.</span><span class="ident" id="4884146">Reader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884183">//&nbsp;source&nbsp;of&nbsp;the&nbsp;data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884206">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4884219">decBuffer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884259">//&nbsp;buffer&nbsp;for&nbsp;more&nbsp;efficient&nbsp;i/o&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884300">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4884313">map</span><span class="op" id="4884316">[</span><span class="ident" id="4884317">typeId</span><span class="op" id="4884323">]</span><span class="op" id="4884324">*</span><span class="ident" id="4884325">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884353">//&nbsp;map&nbsp;from&nbsp;remote&nbsp;ID&nbsp;to&nbsp;local&nbsp;description</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884397">decoderCache</span>&nbsp;<span class="keyword" id="4884410">map</span><span class="op" id="4884413">[</span><span class="ident" id="4884414">reflect</span><span class="op" id="4884421">.</span><span class="ident" id="4884422">Type</span><span class="op" id="4884426">]</span><span class="keyword" id="4884427">map</span><span class="op" id="4884430">[</span><span class="ident" id="4884431">typeId</span><span class="op" id="4884437">]</span><span class="op" id="4884438">*</span><span class="op" id="4884439">*</span><span class="ident" id="4884440">decEngine</span>&nbsp;<span class="comment" id="4884450">//&nbsp;cache&nbsp;of&nbsp;compiled&nbsp;engines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884480">ignorerCache</span>&nbsp;<span class="keyword" id="4884493">map</span><span class="op" id="4884496">[</span><span class="ident" id="4884497">typeId</span><span class="op" id="4884503">]</span><span class="op" id="4884504">*</span><span class="op" id="4884505">*</span><span class="ident" id="4884506">decEngine</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884533">//&nbsp;ditto&nbsp;for&nbsp;ignored&nbsp;objects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884563">freeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4884576">*</span><span class="ident" id="4884577">decoderState</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884616">//&nbsp;list&nbsp;of&nbsp;free&nbsp;decoderStates;&nbsp;avoids&nbsp;reallocation</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884668">countBuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4884681">[</span><span class="op" id="4884682">]</span><span class="builtintype" id="4884683">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884721">//&nbsp;used&nbsp;for&nbsp;decoding&nbsp;integers&nbsp;while&nbsp;parsing&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884775">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4884788">error</span><br>
<span class="lineno"></span><span class="op" id="4884794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4884797">//&nbsp;NewDecoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;decoder&nbsp;that&nbsp;reads&nbsp;from&nbsp;the&nbsp;io.Reader.</span><br>
<span class="lineno">35</span><span class="comment" id="4884864">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,&nbsp;it&nbsp;will&nbsp;be&nbsp;wrapped&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4884935">//&nbsp;bufio.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="4884952">func</span>&nbsp;<span class="ident" id="4884957">NewDecoder</span><span class="op" id="4884967">(</span><span class="ident" id="4884968">r</span>&nbsp;<span class="ident" id="4884970">io</span><span class="op" id="4884972">.</span><span class="ident" id="4884973">Reader</span><span class="op" id="4884979">)</span>&nbsp;<span class="op" id="4884981">*</span><span class="ident" id="4884982">Decoder</span>&nbsp;<span class="op" id="4884990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4884993">dec</span>&nbsp;<span class="op" id="4884997">:=</span>&nbsp;<span class="builtinfunc" id="4885000">new</span><span class="op" id="4885003">(</span><span class="ident" id="4885004">Decoder</span><span class="op" id="4885011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885014">//&nbsp;We&nbsp;use&nbsp;the&nbsp;ability&nbsp;to&nbsp;read&nbsp;bytes&nbsp;as&nbsp;a&nbsp;plausible&nbsp;surrogate&nbsp;for&nbsp;buffering.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885091">if</span>&nbsp;<span class="ident" id="4885094">_</span><span class="op" id="4885095">,</span>&nbsp;<span class="ident" id="4885097">ok</span>&nbsp;<span class="op" id="4885100">:=</span>&nbsp;<span class="ident" id="4885103">r</span><span class="op" id="4885104">.</span><span class="op" id="4885105">(</span><span class="ident" id="4885106">io</span><span class="op" id="4885108">.</span><span class="ident" id="4885109">ByteReader</span><span class="op" id="4885119">)</span><span class="op" id="4885120">;</span>&nbsp;<span class="op" id="4885122">!</span><span class="ident" id="4885123">ok</span>&nbsp;<span class="op" id="4885126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885130">r</span>&nbsp;<span class="op" id="4885132">=</span>&nbsp;<span class="ident" id="4885134">bufio</span><span class="op" id="4885139">.</span><span class="ident" id="4885140">NewReader</span><span class="op" id="4885149">(</span><span class="ident" id="4885150">r</span><span class="op" id="4885151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885157">dec</span><span class="op" id="4885160">.</span><span class="ident" id="4885161">r</span>&nbsp;<span class="op" id="4885163">=</span>&nbsp;<span class="ident" id="4885165">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885168">dec</span><span class="op" id="4885171">.</span><span class="ident" id="4885172">wireType</span>&nbsp;<span class="op" id="4885181">=</span>&nbsp;<span class="builtinfunc" id="4885183">make</span><span class="op" id="4885187">(</span><span class="keyword" id="4885188">map</span><span class="op" id="4885191">[</span><span class="ident" id="4885192">typeId</span><span class="op" id="4885198">]</span><span class="op" id="4885199">*</span><span class="ident" id="4885200">wireType</span><span class="op" id="4885208">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885211">dec</span><span class="op" id="4885214">.</span><span class="ident" id="4885215">decoderCache</span>&nbsp;<span class="op" id="4885228">=</span>&nbsp;<span class="builtinfunc" id="4885230">make</span><span class="op" id="4885234">(</span><span class="keyword" id="4885235">map</span><span class="op" id="4885238">[</span><span class="ident" id="4885239">reflect</span><span class="op" id="4885246">.</span><span class="ident" id="4885247">Type</span><span class="op" id="4885251">]</span><span class="keyword" id="4885252">map</span><span class="op" id="4885255">[</span><span class="ident" id="4885256">typeId</span><span class="op" id="4885262">]</span><span class="op" id="4885263">*</span><span class="op" id="4885264">*</span><span class="ident" id="4885265">decEngine</span><span class="op" id="4885274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885277">dec</span><span class="op" id="4885280">.</span><span class="ident" id="4885281">ignorerCache</span>&nbsp;<span class="op" id="4885294">=</span>&nbsp;<span class="builtinfunc" id="4885296">make</span><span class="op" id="4885300">(</span><span class="keyword" id="4885301">map</span><span class="op" id="4885304">[</span><span class="ident" id="4885305">typeId</span><span class="op" id="4885311">]</span><span class="op" id="4885312">*</span><span class="op" id="4885313">*</span><span class="ident" id="4885314">decEngine</span><span class="op" id="4885323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885326">dec</span><span class="op" id="4885329">.</span><span class="ident" id="4885330">countBuf</span>&nbsp;<span class="op" id="4885339">=</span>&nbsp;<span class="builtinfunc" id="4885341">make</span><span class="op" id="4885345">(</span><span class="op" id="4885346">[</span><span class="op" id="4885347">]</span><span class="builtintype" id="4885348">byte</span><span class="op" id="4885352">,</span>&nbsp;<span class="num" id="4885354">9</span><span class="op" id="4885355">)</span>&nbsp;<span class="comment" id="4885357">//&nbsp;counts&nbsp;may&nbsp;be&nbsp;uint64s&nbsp;(unlikely!),&nbsp;require&nbsp;9&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885413">return</span>&nbsp;<span class="ident" id="4885420">dec</span><br>
<span class="lineno">50</span><span class="op" id="4885424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4885427">//&nbsp;recvType&nbsp;loads&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4885471">func</span>&nbsp;<span class="op" id="4885476">(</span><span class="ident" id="4885477">dec</span>&nbsp;<span class="op" id="4885481">*</span><span class="ident" id="4885482">Decoder</span><span class="op" id="4885489">)</span>&nbsp;<span class="ident" id="4885491">recvType</span><span class="op" id="4885499">(</span><span class="ident" id="4885500">id</span>&nbsp;<span class="ident" id="4885503">typeId</span><span class="op" id="4885509">)</span>&nbsp;<span class="op" id="4885511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885514">//&nbsp;Have&nbsp;we&nbsp;already&nbsp;seen&nbsp;this&nbsp;type?&nbsp;&nbsp;That&#39;s&nbsp;an&nbsp;error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885567">if</span>&nbsp;<span class="ident" id="4885570">id</span>&nbsp;<span class="op" id="4885573">&lt;</span>&nbsp;<span class="ident" id="4885575">firstUserId</span>&nbsp;<span class="op" id="4885587">||</span>&nbsp;<span class="ident" id="4885590">dec</span><span class="op" id="4885593">.</span><span class="ident" id="4885594">wireType</span><span class="op" id="4885602">[</span><span class="ident" id="4885603">id</span><span class="op" id="4885605">]</span>&nbsp;<span class="op" id="4885607">!=</span>&nbsp;<span class="ident" id="4885610">nil</span>&nbsp;<span class="op" id="4885614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885618">dec</span><span class="op" id="4885621">.</span><span class="ident" id="4885622">err</span>&nbsp;<span class="op" id="4885626">=</span>&nbsp;<span class="ident" id="4885628">errors</span><span class="op" id="4885634">.</span><span class="ident" id="4885635">New</span><span class="op" id="4885638">(</span><span class="string" id="4885639">&#34;gob:&nbsp;duplicate&nbsp;type&nbsp;received&#34;</span><span class="op" id="4885669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885673">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885685">//&nbsp;Type:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885695">wire</span>&nbsp;<span class="op" id="4885700">:=</span>&nbsp;<span class="builtinfunc" id="4885703">new</span><span class="op" id="4885706">(</span><span class="ident" id="4885707">wireType</span><span class="op" id="4885715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885718">dec</span><span class="op" id="4885721">.</span><span class="ident" id="4885722">decodeValue</span><span class="op" id="4885733">(</span><span class="ident" id="4885734">tWireType</span><span class="op" id="4885743">,</span>&nbsp;<span class="ident" id="4885745">reflect</span><span class="op" id="4885752">.</span><span class="ident" id="4885753">ValueOf</span><span class="op" id="4885760">(</span><span class="ident" id="4885761">wire</span><span class="op" id="4885765">)</span><span class="op" id="4885766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885769">if</span>&nbsp;<span class="ident" id="4885772">dec</span><span class="op" id="4885775">.</span><span class="ident" id="4885776">err</span>&nbsp;<span class="op" id="4885780">!=</span>&nbsp;<span class="ident" id="4885783">nil</span>&nbsp;<span class="op" id="4885787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4885791">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4885799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4885802">//&nbsp;Remember&nbsp;we&#39;ve&nbsp;seen&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4885837">dec</span><span class="op" id="4885840">.</span><span class="ident" id="4885841">wireType</span><span class="op" id="4885849">[</span><span class="ident" id="4885850">id</span><span class="op" id="4885852">]</span>&nbsp;<span class="op" id="4885854">=</span>&nbsp;<span class="ident" id="4885856">wire</span><br>
<span class="lineno"></span><span class="op" id="4885861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="4885864">var</span>&nbsp;<span class="ident" id="4885868">errBadCount</span>&nbsp;<span class="op" id="4885880">=</span>&nbsp;<span class="ident" id="4885882">errors</span><span class="op" id="4885888">.</span><span class="ident" id="4885889">New</span><span class="op" id="4885892">(</span><span class="string" id="4885893">&#34;invalid&nbsp;message&nbsp;length&#34;</span><span class="op" id="4885917">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4885920">//&nbsp;recvMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;count-delimited&nbsp;item&nbsp;from&nbsp;the&nbsp;input.&nbsp;It&nbsp;is&nbsp;the&nbsp;converse</span><br>
<span class="lineno"></span><span class="comment" id="4886006">//&nbsp;of&nbsp;Encoder.writeMessage.&nbsp;It&nbsp;returns&nbsp;false&nbsp;on&nbsp;EOF&nbsp;or&nbsp;other&nbsp;error&nbsp;reading&nbsp;the&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="4886094">func</span>&nbsp;<span class="op" id="4886099">(</span><span class="ident" id="4886100">dec</span>&nbsp;<span class="op" id="4886104">*</span><span class="ident" id="4886105">Decoder</span><span class="op" id="4886112">)</span>&nbsp;<span class="ident" id="4886114">recvMessage</span><span class="op" id="4886125">(</span><span class="op" id="4886126">)</span>&nbsp;<span class="builtintype" id="4886128">bool</span>&nbsp;<span class="op" id="4886133">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4886136">//&nbsp;Read&nbsp;a&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886154">nbytes</span><span class="op" id="4886160">,</span>&nbsp;<span class="ident" id="4886162">_</span><span class="op" id="4886163">,</span>&nbsp;<span class="ident" id="4886165">err</span>&nbsp;<span class="op" id="4886169">:=</span>&nbsp;<span class="ident" id="4886172">decodeUintReader</span><span class="op" id="4886188">(</span><span class="ident" id="4886189">dec</span><span class="op" id="4886192">.</span><span class="ident" id="4886193">r</span><span class="op" id="4886194">,</span>&nbsp;<span class="ident" id="4886196">dec</span><span class="op" id="4886199">.</span><span class="ident" id="4886200">countBuf</span><span class="op" id="4886208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886211">if</span>&nbsp;<span class="ident" id="4886214">err</span>&nbsp;<span class="op" id="4886218">!=</span>&nbsp;<span class="ident" id="4886221">nil</span>&nbsp;<span class="op" id="4886225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886229">dec</span><span class="op" id="4886232">.</span><span class="ident" id="4886233">err</span>&nbsp;<span class="op" id="4886237">=</span>&nbsp;<span class="ident" id="4886239">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886245">return</span>&nbsp;<span class="builtintype" id="4886252">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886262">if</span>&nbsp;<span class="ident" id="4886265">nbytes</span>&nbsp;<span class="op" id="4886272">&gt;=</span>&nbsp;<span class="ident" id="4886275">tooBig</span>&nbsp;<span class="op" id="4886282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886286">dec</span><span class="op" id="4886289">.</span><span class="ident" id="4886290">err</span>&nbsp;<span class="op" id="4886294">=</span>&nbsp;<span class="ident" id="4886296">errBadCount</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886310">return</span>&nbsp;<span class="builtintype" id="4886317">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886324">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886327">dec</span><span class="op" id="4886330">.</span><span class="ident" id="4886331">readMessage</span><span class="op" id="4886342">(</span><span class="builtintype" id="4886343">int</span><span class="op" id="4886346">(</span><span class="ident" id="4886347">nbytes</span><span class="op" id="4886353">)</span><span class="op" id="4886354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886357">return</span>&nbsp;<span class="ident" id="4886364">dec</span><span class="op" id="4886367">.</span><span class="ident" id="4886368">err</span>&nbsp;<span class="op" id="4886372">==</span>&nbsp;<span class="ident" id="4886375">nil</span><br>
<span class="lineno"></span><span class="op" id="4886379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4886382">//&nbsp;readMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;nbytes&nbsp;bytes&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">90</span><span class="keyword" id="4886441">func</span>&nbsp;<span class="op" id="4886446">(</span><span class="ident" id="4886447">dec</span>&nbsp;<span class="op" id="4886451">*</span><span class="ident" id="4886452">Decoder</span><span class="op" id="4886459">)</span>&nbsp;<span class="ident" id="4886461">readMessage</span><span class="op" id="4886472">(</span><span class="ident" id="4886473">nbytes</span>&nbsp;<span class="builtintype" id="4886480">int</span><span class="op" id="4886483">)</span>&nbsp;<span class="op" id="4886485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886488">if</span>&nbsp;<span class="ident" id="4886491">dec</span><span class="op" id="4886494">.</span><span class="ident" id="4886495">buf</span><span class="op" id="4886498">.</span><span class="ident" id="4886499">Len</span><span class="op" id="4886502">(</span><span class="op" id="4886503">)</span>&nbsp;<span class="op" id="4886505">!=</span>&nbsp;<span class="num" id="4886508">0</span>&nbsp;<span class="op" id="4886510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4886514">//&nbsp;The&nbsp;buffer&nbsp;should&nbsp;always&nbsp;be&nbsp;empty&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4886558">panic</span><span class="op" id="4886563">(</span><span class="string" id="4886564">&#34;non-empty&nbsp;decoder&nbsp;buffer&#34;</span><span class="op" id="4886590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886593">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4886596">//&nbsp;Read&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886614">dec</span><span class="op" id="4886617">.</span><span class="ident" id="4886618">buf</span><span class="op" id="4886621">.</span><span class="ident" id="4886622">Size</span><span class="op" id="4886626">(</span><span class="ident" id="4886627">nbytes</span><span class="op" id="4886633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886636">_</span><span class="op" id="4886637">,</span>&nbsp;<span class="ident" id="4886639">dec</span><span class="op" id="4886642">.</span><span class="ident" id="4886643">err</span>&nbsp;<span class="op" id="4886647">=</span>&nbsp;<span class="ident" id="4886649">io</span><span class="op" id="4886651">.</span><span class="ident" id="4886652">ReadFull</span><span class="op" id="4886660">(</span><span class="ident" id="4886661">dec</span><span class="op" id="4886664">.</span><span class="ident" id="4886665">r</span><span class="op" id="4886666">,</span>&nbsp;<span class="ident" id="4886668">dec</span><span class="op" id="4886671">.</span><span class="ident" id="4886672">buf</span><span class="op" id="4886675">.</span><span class="ident" id="4886676">Bytes</span><span class="op" id="4886681">(</span><span class="op" id="4886682">)</span><span class="op" id="4886683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886686">if</span>&nbsp;<span class="ident" id="4886689">dec</span><span class="op" id="4886692">.</span><span class="ident" id="4886693">err</span>&nbsp;<span class="op" id="4886697">!=</span>&nbsp;<span class="ident" id="4886700">nil</span>&nbsp;<span class="op" id="4886704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886708">if</span>&nbsp;<span class="ident" id="4886711">dec</span><span class="op" id="4886714">.</span><span class="ident" id="4886715">err</span>&nbsp;<span class="op" id="4886719">==</span>&nbsp;<span class="ident" id="4886722">io</span><span class="op" id="4886724">.</span><span class="ident" id="4886725">EOF</span>&nbsp;<span class="op" id="4886729">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886734">dec</span><span class="op" id="4886737">.</span><span class="ident" id="4886738">err</span>&nbsp;<span class="op" id="4886742">=</span>&nbsp;<span class="ident" id="4886744">io</span><span class="op" id="4886746">.</span><span class="ident" id="4886747">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886769">}</span><br>
<span class="lineno"></span><span class="op" id="4886771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4886774">//&nbsp;toInt&nbsp;turns&nbsp;an&nbsp;encoded&nbsp;uint64&nbsp;into&nbsp;an&nbsp;int,&nbsp;according&nbsp;to&nbsp;the&nbsp;marshaling&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="4886855">func</span>&nbsp;<span class="ident" id="4886860">toInt</span><span class="op" id="4886865">(</span><span class="ident" id="4886866">x</span>&nbsp;<span class="ident" id="4886868">uint64</span><span class="op" id="4886874">)</span>&nbsp;<span class="ident" id="4886876">int64</span>&nbsp;<span class="op" id="4886882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886885">i</span>&nbsp;<span class="op" id="4886887">:=</span>&nbsp;<span class="ident" id="4886890">int64</span><span class="op" id="4886895">(</span><span class="ident" id="4886896">x</span>&nbsp;<span class="op" id="4886898">&gt;&gt;</span>&nbsp;<span class="num" id="4886901">1</span><span class="op" id="4886902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886905">if</span>&nbsp;<span class="ident" id="4886908">x</span><span class="op" id="4886909">&amp;</span><span class="num" id="4886910">1</span>&nbsp;<span class="op" id="4886912">!=</span>&nbsp;<span class="num" id="4886915">0</span>&nbsp;<span class="op" id="4886917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886921">i</span>&nbsp;<span class="op" id="4886923">=</span>&nbsp;<span class="op" id="4886925">^</span><span class="ident" id="4886926">i</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4886929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4886932">return</span>&nbsp;<span class="ident" id="4886939">i</span><br>
<span class="lineno"></span><span class="op" id="4886941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4886944">func</span>&nbsp;<span class="op" id="4886949">(</span><span class="ident" id="4886950">dec</span>&nbsp;<span class="op" id="4886954">*</span><span class="ident" id="4886955">Decoder</span><span class="op" id="4886962">)</span>&nbsp;<span class="ident" id="4886964">nextInt</span><span class="op" id="4886971">(</span><span class="op" id="4886972">)</span>&nbsp;<span class="ident" id="4886974">int64</span>&nbsp;<span class="op" id="4886980">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4886983">n</span><span class="op" id="4886984">,</span>&nbsp;<span class="ident" id="4886986">_</span><span class="op" id="4886987">,</span>&nbsp;<span class="ident" id="4886989">err</span>&nbsp;<span class="op" id="4886993">:=</span>&nbsp;<span class="ident" id="4886996">decodeUintReader</span><span class="op" id="4887012">(</span><span class="op" id="4887013">&amp;</span><span class="ident" id="4887014">dec</span><span class="op" id="4887017">.</span><span class="ident" id="4887018">buf</span><span class="op" id="4887021">,</span>&nbsp;<span class="ident" id="4887023">dec</span><span class="op" id="4887026">.</span><span class="ident" id="4887027">countBuf</span><span class="op" id="4887035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887038">if</span>&nbsp;<span class="ident" id="4887041">err</span>&nbsp;<span class="op" id="4887045">!=</span>&nbsp;<span class="ident" id="4887048">nil</span>&nbsp;<span class="op" id="4887052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887056">dec</span><span class="op" id="4887059">.</span><span class="ident" id="4887060">err</span>&nbsp;<span class="op" id="4887064">=</span>&nbsp;<span class="ident" id="4887066">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887074">return</span>&nbsp;<span class="ident" id="4887081">toInt</span><span class="op" id="4887086">(</span><span class="ident" id="4887087">n</span><span class="op" id="4887088">)</span><br>
<span class="lineno">120</span><span class="op" id="4887090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4887093">func</span>&nbsp;<span class="op" id="4887098">(</span><span class="ident" id="4887099">dec</span>&nbsp;<span class="op" id="4887103">*</span><span class="ident" id="4887104">Decoder</span><span class="op" id="4887111">)</span>&nbsp;<span class="ident" id="4887113">nextUint</span><span class="op" id="4887121">(</span><span class="op" id="4887122">)</span>&nbsp;<span class="ident" id="4887124">uint64</span>&nbsp;<span class="op" id="4887131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887134">n</span><span class="op" id="4887135">,</span>&nbsp;<span class="ident" id="4887137">_</span><span class="op" id="4887138">,</span>&nbsp;<span class="ident" id="4887140">err</span>&nbsp;<span class="op" id="4887144">:=</span>&nbsp;<span class="ident" id="4887147">decodeUintReader</span><span class="op" id="4887163">(</span><span class="op" id="4887164">&amp;</span><span class="ident" id="4887165">dec</span><span class="op" id="4887168">.</span><span class="ident" id="4887169">buf</span><span class="op" id="4887172">,</span>&nbsp;<span class="ident" id="4887174">dec</span><span class="op" id="4887177">.</span><span class="ident" id="4887178">countBuf</span><span class="op" id="4887186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887189">if</span>&nbsp;<span class="ident" id="4887192">err</span>&nbsp;<span class="op" id="4887196">!=</span>&nbsp;<span class="ident" id="4887199">nil</span>&nbsp;<span class="op" id="4887203">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887207">dec</span><span class="op" id="4887210">.</span><span class="ident" id="4887211">err</span>&nbsp;<span class="op" id="4887215">=</span>&nbsp;<span class="ident" id="4887217">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887225">return</span>&nbsp;<span class="ident" id="4887232">n</span><br>
<span class="lineno"></span><span class="op" id="4887234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4887237">//&nbsp;decodeTypeSequence&nbsp;parses:</span><br>
<span class="lineno"></span><span class="comment" id="4887267">//&nbsp;TypeSequence</span><br>
<span class="lineno"></span><span class="comment" id="4887283">//&nbsp;&nbsp;&nbsp;&nbsp(TypeDefinition&nbsp;DelimitedTypeDefinition*)?</span><br>
<span class="lineno"></span><span class="comment" id="4887329">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;next&nbsp;value.&nbsp;&nbsp;It&nbsp;returns&nbsp;-1&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="4887393">//&nbsp;EOF.&nbsp;&nbsp;Upon&nbsp;return,&nbsp;the&nbsp;remainder&nbsp;of&nbsp;dec.buf&nbsp;is&nbsp;the&nbsp;value&nbsp;to&nbsp;be</span><br>
<span class="lineno">135</span><span class="comment" id="4887459">//&nbsp;decoded.&nbsp;&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4887524">//&nbsp;resetting&nbsp;that&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="4887550">func</span>&nbsp;<span class="op" id="4887555">(</span><span class="ident" id="4887556">dec</span>&nbsp;<span class="op" id="4887560">*</span><span class="ident" id="4887561">Decoder</span><span class="op" id="4887568">)</span>&nbsp;<span class="ident" id="4887570">decodeTypeSequence</span><span class="op" id="4887588">(</span><span class="ident" id="4887589">isInterface</span>&nbsp;<span class="builtintype" id="4887601">bool</span><span class="op" id="4887605">)</span>&nbsp;<span class="ident" id="4887607">typeId</span>&nbsp;<span class="op" id="4887614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887617">for</span>&nbsp;<span class="ident" id="4887621">dec</span><span class="op" id="4887624">.</span><span class="ident" id="4887625">err</span>&nbsp;<span class="op" id="4887629">==</span>&nbsp;<span class="ident" id="4887632">nil</span>&nbsp;<span class="op" id="4887636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887640">if</span>&nbsp;<span class="ident" id="4887643">dec</span><span class="op" id="4887646">.</span><span class="ident" id="4887647">buf</span><span class="op" id="4887650">.</span><span class="ident" id="4887651">Len</span><span class="op" id="4887654">(</span><span class="op" id="4887655">)</span>&nbsp;<span class="op" id="4887657">==</span>&nbsp;<span class="num" id="4887660">0</span>&nbsp;<span class="op" id="4887662">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887667">if</span>&nbsp;<span class="op" id="4887670">!</span><span class="ident" id="4887671">dec</span><span class="op" id="4887674">.</span><span class="ident" id="4887675">recvMessage</span><span class="op" id="4887686">(</span><span class="op" id="4887687">)</span>&nbsp;<span class="op" id="4887689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887695">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4887712">//&nbsp;Receive&nbsp;a&nbsp;type&nbsp;id.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887736">id</span>&nbsp;<span class="op" id="4887739">:=</span>&nbsp;<span class="ident" id="4887742">typeId</span><span class="op" id="4887748">(</span><span class="ident" id="4887749">dec</span><span class="op" id="4887752">.</span><span class="ident" id="4887753">nextInt</span><span class="op" id="4887760">(</span><span class="op" id="4887761">)</span><span class="op" id="4887762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887766">if</span>&nbsp;<span class="ident" id="4887769">id</span>&nbsp;<span class="op" id="4887772">&gt;=</span>&nbsp;<span class="num" id="4887775">0</span>&nbsp;<span class="op" id="4887777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4887782">//&nbsp;Value&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4887803">return</span>&nbsp;<span class="ident" id="4887810">id</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4887815">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4887819">//&nbsp;Type&nbsp;definition&nbsp;for&nbsp;(-id)&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4887859">dec</span><span class="op" id="4887862">.</span><span class="ident" id="4887863">recvType</span><span class="op" id="4887871">(</span><span class="op" id="4887872">-</span><span class="ident" id="4887873">id</span><span class="op" id="4887875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4887879">//&nbsp;When&nbsp;decoding&nbsp;an&nbsp;interface,&nbsp;after&nbsp;a&nbsp;type&nbsp;there&nbsp;may&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4887940">//&nbsp;DelimitedValue&nbsp;still&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;&nbsp;Skip&nbsp;its&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4887998">//&nbsp;(Alternatively,&nbsp;the&nbsp;buffer&nbsp;is&nbsp;empty&nbsp;and&nbsp;the&nbsp;byte&nbsp;count</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4888058">//&nbsp;will&nbsp;be&nbsp;absorbed&nbsp;by&nbsp;recvMessage.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888097">if</span>&nbsp;<span class="ident" id="4888100">dec</span><span class="op" id="4888103">.</span><span class="ident" id="4888104">buf</span><span class="op" id="4888107">.</span><span class="ident" id="4888108">Len</span><span class="op" id="4888111">(</span><span class="op" id="4888112">)</span>&nbsp;<span class="op" id="4888114">&gt;</span>&nbsp;<span class="num" id="4888116">0</span>&nbsp;<span class="op" id="4888118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888123">if</span>&nbsp;<span class="op" id="4888126">!</span><span class="ident" id="4888127">isInterface</span>&nbsp;<span class="op" id="4888139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888145">dec</span><span class="op" id="4888148">.</span><span class="ident" id="4888149">err</span>&nbsp;<span class="op" id="4888153">=</span>&nbsp;<span class="ident" id="4888155">errors</span><span class="op" id="4888161">.</span><span class="ident" id="4888162">New</span><span class="op" id="4888165">(</span><span class="string" id="4888166">&#34;extra&nbsp;data&nbsp;in&nbsp;buffer&#34;</span><span class="op" id="4888188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888194">break</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888208">dec</span><span class="op" id="4888211">.</span><span class="ident" id="4888212">nextUint</span><span class="op" id="4888220">(</span><span class="op" id="4888221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888231">return</span>&nbsp;<span class="op" id="4888238">-</span><span class="num" id="4888239">1</span><br>
<span class="lineno">165</span><span class="op" id="4888241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4888244">//&nbsp;Decode&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream&nbsp;and&nbsp;stores</span><br>
<span class="lineno"></span><span class="comment" id="4888308">//&nbsp;it&nbsp;in&nbsp;the&nbsp;data&nbsp;represented&nbsp;by&nbsp;the&nbsp;empty&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4888368">//&nbsp;If&nbsp;e&nbsp;is&nbsp;nil,&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;discarded.&nbsp;Otherwise,</span><br>
<span class="lineno">170</span><span class="comment" id="4888424">//&nbsp;the&nbsp;value&nbsp;underlying&nbsp;e&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4888475">//&nbsp;correct&nbsp;type&nbsp;for&nbsp;the&nbsp;next&nbsp;data&nbsp;item&nbsp;received.</span><br>
<span class="lineno"></span><span class="comment" id="4888524">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;Decode&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4888577">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4888599">func</span>&nbsp;<span class="op" id="4888604">(</span><span class="ident" id="4888605">dec</span>&nbsp;<span class="op" id="4888609">*</span><span class="ident" id="4888610">Decoder</span><span class="op" id="4888617">)</span>&nbsp;<span class="ident" id="4888619">Decode</span><span class="op" id="4888625">(</span><span class="ident" id="4888626">e</span>&nbsp;<span class="keyword" id="4888628">interface</span><span class="op" id="4888637">{</span><span class="op" id="4888638">}</span><span class="op" id="4888639">)</span>&nbsp;<span class="builtintype" id="4888641">error</span>&nbsp;<span class="op" id="4888647">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888650">if</span>&nbsp;<span class="ident" id="4888653">e</span>&nbsp;<span class="op" id="4888655">==</span>&nbsp;<span class="ident" id="4888658">nil</span>&nbsp;<span class="op" id="4888662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888666">return</span>&nbsp;<span class="ident" id="4888673">dec</span><span class="op" id="4888676">.</span><span class="ident" id="4888677">DecodeValue</span><span class="op" id="4888688">(</span><span class="ident" id="4888689">reflect</span><span class="op" id="4888696">.</span><span class="ident" id="4888697">Value</span><span class="op" id="4888702">{</span><span class="op" id="4888703">}</span><span class="op" id="4888704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888710">value</span>&nbsp;<span class="op" id="4888716">:=</span>&nbsp;<span class="ident" id="4888719">reflect</span><span class="op" id="4888726">.</span><span class="ident" id="4888727">ValueOf</span><span class="op" id="4888734">(</span><span class="ident" id="4888735">e</span><span class="op" id="4888736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4888739">//&nbsp;If&nbsp;e&nbsp;represents&nbsp;a&nbsp;value&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;pointer,&nbsp;the&nbsp;answer&nbsp;won&#39;t</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4888809">//&nbsp;get&nbsp;back&nbsp;to&nbsp;the&nbsp;caller.&nbsp;&nbsp;Make&nbsp;sure&nbsp;it&#39;s&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888864">if</span>&nbsp;<span class="ident" id="4888867">value</span><span class="op" id="4888872">.</span><span class="ident" id="4888873">Type</span><span class="op" id="4888877">(</span><span class="op" id="4888878">)</span><span class="op" id="4888879">.</span><span class="ident" id="4888880">Kind</span><span class="op" id="4888884">(</span><span class="op" id="4888885">)</span>&nbsp;<span class="op" id="4888887">!=</span>&nbsp;<span class="ident" id="4888890">reflect</span><span class="op" id="4888897">.</span><span class="ident" id="4888898">Ptr</span>&nbsp;<span class="op" id="4888902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4888906">dec</span><span class="op" id="4888909">.</span><span class="ident" id="4888910">err</span>&nbsp;<span class="op" id="4888914">=</span>&nbsp;<span class="ident" id="4888916">errors</span><span class="op" id="4888922">.</span><span class="ident" id="4888923">New</span><span class="op" id="4888926">(</span><span class="string" id="4888927">&#34;gob:&nbsp;attempt&nbsp;to&nbsp;decode&nbsp;into&nbsp;a&nbsp;non-pointer&#34;</span><span class="op" id="4888970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888974">return</span>&nbsp;<span class="ident" id="4888981">dec</span><span class="op" id="4888984">.</span><span class="ident" id="4888985">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4888990">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4888993">return</span>&nbsp;<span class="ident" id="4889000">dec</span><span class="op" id="4889003">.</span><span class="ident" id="4889004">DecodeValue</span><span class="op" id="4889015">(</span><span class="ident" id="4889016">value</span><span class="op" id="4889021">)</span><br>
<span class="lineno"></span><span class="op" id="4889023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4889026">//&nbsp;DecodeValue&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="4889085">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;reflect.Value&nbsp;(v.Kind()&nbsp;==&nbsp;Invalid),&nbsp;DecodeValue&nbsp;discards&nbsp;the&nbsp;value.</span><br>
<span class="lineno">190</span><span class="comment" id="4889174">//&nbsp;Otherwise,&nbsp;it&nbsp;stores&nbsp;the&nbsp;value&nbsp;into&nbsp;v.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;v&nbsp;must&nbsp;represent</span><br>
<span class="lineno"></span><span class="comment" id="4889248">//&nbsp;a&nbsp;non-nil&nbsp;pointer&nbsp;to&nbsp;data&nbsp;or&nbsp;be&nbsp;an&nbsp;assignable&nbsp;reflect.Value&nbsp;(v.CanSet())</span><br>
<span class="lineno"></span><span class="comment" id="4889324">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;DecodeValue&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4889382">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="4889404">func</span>&nbsp;<span class="op" id="4889409">(</span><span class="ident" id="4889410">dec</span>&nbsp;<span class="op" id="4889414">*</span><span class="ident" id="4889415">Decoder</span><span class="op" id="4889422">)</span>&nbsp;<span class="ident" id="4889424">DecodeValue</span><span class="op" id="4889435">(</span><span class="ident" id="4889436">v</span>&nbsp;<span class="ident" id="4889438">reflect</span><span class="op" id="4889445">.</span><span class="ident" id="4889446">Value</span><span class="op" id="4889451">)</span>&nbsp;<span class="builtintype" id="4889453">error</span>&nbsp;<span class="op" id="4889459">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889462">if</span>&nbsp;<span class="ident" id="4889465">v</span><span class="op" id="4889466">.</span><span class="ident" id="4889467">IsValid</span><span class="op" id="4889474">(</span><span class="op" id="4889475">)</span>&nbsp;<span class="op" id="4889477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889481">if</span>&nbsp;<span class="ident" id="4889484">v</span><span class="op" id="4889485">.</span><span class="ident" id="4889486">Kind</span><span class="op" id="4889490">(</span><span class="op" id="4889491">)</span>&nbsp;<span class="op" id="4889493">==</span>&nbsp;<span class="ident" id="4889496">reflect</span><span class="op" id="4889503">.</span><span class="ident" id="4889504">Ptr</span>&nbsp;<span class="op" id="4889508">&amp;&amp;</span>&nbsp;<span class="op" id="4889511">!</span><span class="ident" id="4889512">v</span><span class="op" id="4889513">.</span><span class="ident" id="4889514">IsNil</span><span class="op" id="4889519">(</span><span class="op" id="4889520">)</span>&nbsp;<span class="op" id="4889522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4889527">//&nbsp;That&#39;s&nbsp;okay,&nbsp;we&#39;ll&nbsp;store&nbsp;through&nbsp;the&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889578">}</span>&nbsp;<span class="keyword" id="4889580">else</span>&nbsp;<span class="keyword" id="4889585">if</span>&nbsp;<span class="op" id="4889588">!</span><span class="ident" id="4889589">v</span><span class="op" id="4889590">.</span><span class="ident" id="4889591">CanSet</span><span class="op" id="4889597">(</span><span class="op" id="4889598">)</span>&nbsp;<span class="op" id="4889600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889605">return</span>&nbsp;<span class="ident" id="4889612">errors</span><span class="op" id="4889618">.</span><span class="ident" id="4889619">New</span><span class="op" id="4889622">(</span><span class="string" id="4889623">&#34;gob:&nbsp;DecodeValue&nbsp;of&nbsp;unassignable&nbsp;value&#34;</span><span class="op" id="4889663">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4889673">//&nbsp;Make&nbsp;sure&nbsp;we&#39;re&nbsp;single-threaded&nbsp;through&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889723">dec</span><span class="op" id="4889726">.</span><span class="ident" id="4889727">mutex</span><span class="op" id="4889732">.</span><span class="ident" id="4889733">Lock</span><span class="op" id="4889737">(</span><span class="op" id="4889738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889741">defer</span>&nbsp;<span class="ident" id="4889747">dec</span><span class="op" id="4889750">.</span><span class="ident" id="4889751">mutex</span><span class="op" id="4889756">.</span><span class="ident" id="4889757">Unlock</span><span class="op" id="4889763">(</span><span class="op" id="4889764">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889768">dec</span><span class="op" id="4889771">.</span><span class="ident" id="4889772">buf</span><span class="op" id="4889775">.</span><span class="ident" id="4889776">Reset</span><span class="op" id="4889781">(</span><span class="op" id="4889782">)</span>&nbsp;<span class="comment" id="4889784">//&nbsp;In&nbsp;case&nbsp;data&nbsp;lingers&nbsp;from&nbsp;previous&nbsp;invocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889835">dec</span><span class="op" id="4889838">.</span><span class="ident" id="4889839">err</span>&nbsp;<span class="op" id="4889843">=</span>&nbsp;<span class="ident" id="4889845">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889850">id</span>&nbsp;<span class="op" id="4889853">:=</span>&nbsp;<span class="ident" id="4889856">dec</span><span class="op" id="4889859">.</span><span class="ident" id="4889860">decodeTypeSequence</span><span class="op" id="4889878">(</span><span class="builtintype" id="4889879">false</span><span class="op" id="4889884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889887">if</span>&nbsp;<span class="ident" id="4889890">dec</span><span class="op" id="4889893">.</span><span class="ident" id="4889894">err</span>&nbsp;<span class="op" id="4889898">==</span>&nbsp;<span class="ident" id="4889901">nil</span>&nbsp;<span class="op" id="4889905">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4889909">dec</span><span class="op" id="4889912">.</span><span class="ident" id="4889913">decodeValue</span><span class="op" id="4889924">(</span><span class="ident" id="4889925">id</span><span class="op" id="4889927">,</span>&nbsp;<span class="ident" id="4889929">v</span><span class="op" id="4889930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4889933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4889936">return</span>&nbsp;<span class="ident" id="4889943">dec</span><span class="op" id="4889946">.</span><span class="ident" id="4889947">err</span><br>
<span class="lineno"></span><span class="op" id="4889951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="4889954">//&nbsp;If&nbsp;debug.go&nbsp;is&nbsp;compiled&nbsp;into&nbsp;the&nbsp;program&nbsp;,&nbsp;debugFunc&nbsp;prints&nbsp;a&nbsp;human-readable</span><br>
<span class="lineno"></span><span class="comment" id="4890034">//&nbsp;representation&nbsp;of&nbsp;the&nbsp;gob&nbsp;data&nbsp;read&nbsp;from&nbsp;r&nbsp;by&nbsp;calling&nbsp;that&nbsp;file&#39;s&nbsp;Debug&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="4890119">//&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4890143">var</span>&nbsp;<span class="ident" id="4890147">debugFunc</span>&nbsp;<span class="keyword" id="4890157">func</span><span class="op" id="4890161">(</span><span class="ident" id="4890162">io</span><span class="op" id="4890164">.</span><span class="ident" id="4890165">Reader</span><span class="op" id="4890171">)</span>
</div>
</body>
</html>
