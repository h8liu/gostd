<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/asn1</h2>
<ul>
<li><a href="/gostd/encoding/asn1/asn1.go.html">asn1.go</a></li>
<li><a href="/gostd/encoding/asn1/asn1_test.go.html">asn1_test.go</a></li>
<li><a href="/gostd/encoding/asn1/common.go.html">common.go</a></li>
<li><a href="/gostd/encoding/asn1/marshal.go.html" class="current">marshal.go</a></li>
<li><a href="/gostd/encoding/asn1/marshal_test.go.html">marshal_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4077658">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4077713">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4077767">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4077818">package</span>&nbsp;<span class="ident" id="4077826">asn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4077832">import</span>&nbsp;<span class="op" id="4077839">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4077842">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4077851">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4077861">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4077868">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4077874">&#34;math/big&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4077886">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4077897">&#34;time&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4077905">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4077920">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4077923">//&nbsp;A&nbsp;forkableWriter&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;buffer&nbsp;that&nbsp;can&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="4077978">//&nbsp;&#39;forked&#39;&nbsp;to&nbsp;create&nbsp;new&nbsp;forkableWriters&nbsp;that&nbsp;bracket&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="4078037">//&nbsp;original.&nbsp;&nbsp;After</span><br>
<span class="lineno"></span><span class="comment" id="4078057">//&nbsp;&nbsp;&nbsp;&nbsp;pre,&nbsp;post&nbsp;:=&nbsp;w.fork();</span><br>
<span class="lineno"></span><span class="comment" id="4078086">//&nbsp;the&nbsp;overall&nbsp;sequence&nbsp;of&nbsp;bytes&nbsp;represented&nbsp;is&nbsp;logically&nbsp;w+pre+post.</span><br>
<span class="lineno"></span><span class="keyword" id="4078156">type</span>&nbsp;<span class="ident" id="4078161">forkableWriter</span>&nbsp;<span class="keyword" id="4078176">struct</span>&nbsp;<span class="op" id="4078183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4078186">*</span><span class="ident" id="4078187">bytes</span><span class="op" id="4078192">.</span><span class="ident" id="4078193">Buffer</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078201">pre</span><span class="op" id="4078204">,</span>&nbsp;<span class="ident" id="4078206">post</span>&nbsp;<span class="op" id="4078211">*</span><span class="ident" id="4078212">forkableWriter</span><br>
<span class="lineno"></span><span class="op" id="4078227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4078230">func</span>&nbsp;<span class="ident" id="4078235">newForkableWriter</span><span class="op" id="4078252">(</span><span class="op" id="4078253">)</span>&nbsp;<span class="op" id="4078255">*</span><span class="ident" id="4078256">forkableWriter</span>&nbsp;<span class="op" id="4078271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078274">return</span>&nbsp;<span class="op" id="4078281">&amp;</span><span class="ident" id="4078282">forkableWriter</span><span class="op" id="4078296">{</span><span class="builtinfunc" id="4078297">new</span><span class="op" id="4078300">(</span><span class="ident" id="4078301">bytes</span><span class="op" id="4078306">.</span><span class="ident" id="4078307">Buffer</span><span class="op" id="4078313">)</span><span class="op" id="4078314">,</span>&nbsp;<span class="builtintype" id="4078316">nil</span><span class="op" id="4078319">,</span>&nbsp;<span class="builtintype" id="4078321">nil</span><span class="op" id="4078324">}</span><br>
<span class="lineno">30</span><span class="op" id="4078326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4078329">func</span>&nbsp;<span class="op" id="4078334">(</span><span class="ident" id="4078335">f</span>&nbsp;<span class="op" id="4078337">*</span><span class="ident" id="4078338">forkableWriter</span><span class="op" id="4078352">)</span>&nbsp;<span class="ident" id="4078354">fork</span><span class="op" id="4078358">(</span><span class="op" id="4078359">)</span>&nbsp;<span class="op" id="4078361">(</span><span class="ident" id="4078362">pre</span><span class="op" id="4078365">,</span>&nbsp;<span class="ident" id="4078367">post</span>&nbsp;<span class="op" id="4078372">*</span><span class="ident" id="4078373">forkableWriter</span><span class="op" id="4078387">)</span>&nbsp;<span class="op" id="4078389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078392">if</span>&nbsp;<span class="ident" id="4078395">f</span><span class="op" id="4078396">.</span><span class="ident" id="4078397">pre</span>&nbsp;<span class="op" id="4078401">!=</span>&nbsp;<span class="builtintype" id="4078404">nil</span>&nbsp;<span class="op" id="4078408">||</span>&nbsp;<span class="ident" id="4078411">f</span><span class="op" id="4078412">.</span><span class="ident" id="4078413">post</span>&nbsp;<span class="op" id="4078418">!=</span>&nbsp;<span class="builtintype" id="4078421">nil</span>&nbsp;<span class="op" id="4078425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4078429">panic</span><span class="op" id="4078434">(</span><span class="string" id="4078435">&#34;have&nbsp;already&nbsp;forked&#34;</span><span class="op" id="4078456">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4078459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078462">f</span><span class="op" id="4078463">.</span><span class="ident" id="4078464">pre</span>&nbsp;<span class="op" id="4078468">=</span>&nbsp;<span class="ident" id="4078470">newForkableWriter</span><span class="op" id="4078487">(</span><span class="op" id="4078488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078491">f</span><span class="op" id="4078492">.</span><span class="ident" id="4078493">post</span>&nbsp;<span class="op" id="4078498">=</span>&nbsp;<span class="ident" id="4078500">newForkableWriter</span><span class="op" id="4078517">(</span><span class="op" id="4078518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078521">return</span>&nbsp;<span class="ident" id="4078528">f</span><span class="op" id="4078529">.</span><span class="ident" id="4078530">pre</span><span class="op" id="4078533">,</span>&nbsp;<span class="ident" id="4078535">f</span><span class="op" id="4078536">.</span><span class="ident" id="4078537">post</span><br>
<span class="lineno"></span><span class="op" id="4078542">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="4078545">func</span>&nbsp;<span class="op" id="4078550">(</span><span class="ident" id="4078551">f</span>&nbsp;<span class="op" id="4078553">*</span><span class="ident" id="4078554">forkableWriter</span><span class="op" id="4078568">)</span>&nbsp;<span class="ident" id="4078570">Len</span><span class="op" id="4078573">(</span><span class="op" id="4078574">)</span>&nbsp;<span class="op" id="4078576">(</span><span class="ident" id="4078577">l</span>&nbsp;<span class="builtintype" id="4078579">int</span><span class="op" id="4078582">)</span>&nbsp;<span class="op" id="4078584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078587">l</span>&nbsp;<span class="op" id="4078589">+=</span>&nbsp;<span class="ident" id="4078592">f</span><span class="op" id="4078593">.</span><span class="ident" id="4078594">Buffer</span><span class="op" id="4078600">.</span><span class="ident" id="4078601">Len</span><span class="op" id="4078604">(</span><span class="op" id="4078605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078608">if</span>&nbsp;<span class="ident" id="4078611">f</span><span class="op" id="4078612">.</span><span class="ident" id="4078613">pre</span>&nbsp;<span class="op" id="4078617">!=</span>&nbsp;<span class="builtintype" id="4078620">nil</span>&nbsp;<span class="op" id="4078624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078628">l</span>&nbsp;<span class="op" id="4078630">+=</span>&nbsp;<span class="ident" id="4078633">f</span><span class="op" id="4078634">.</span><span class="ident" id="4078635">pre</span><span class="op" id="4078638">.</span><span class="ident" id="4078639">Len</span><span class="op" id="4078642">(</span><span class="op" id="4078643">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4078646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078649">if</span>&nbsp;<span class="ident" id="4078652">f</span><span class="op" id="4078653">.</span><span class="ident" id="4078654">post</span>&nbsp;<span class="op" id="4078659">!=</span>&nbsp;<span class="builtintype" id="4078662">nil</span>&nbsp;<span class="op" id="4078666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078670">l</span>&nbsp;<span class="op" id="4078672">+=</span>&nbsp;<span class="ident" id="4078675">f</span><span class="op" id="4078676">.</span><span class="ident" id="4078677">post</span><span class="op" id="4078681">.</span><span class="ident" id="4078682">Len</span><span class="op" id="4078685">(</span><span class="op" id="4078686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4078689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078692">return</span><br>
<span class="lineno">50</span><span class="op" id="4078699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4078702">func</span>&nbsp;<span class="op" id="4078707">(</span><span class="ident" id="4078708">f</span>&nbsp;<span class="op" id="4078710">*</span><span class="ident" id="4078711">forkableWriter</span><span class="op" id="4078725">)</span>&nbsp;<span class="ident" id="4078727">writeTo</span><span class="op" id="4078734">(</span><span class="ident" id="4078735">out</span>&nbsp;<span class="ident" id="4078739">io</span><span class="op" id="4078741">.</span><span class="ident" id="4078742">Writer</span><span class="op" id="4078748">)</span>&nbsp;<span class="op" id="4078750">(</span><span class="ident" id="4078751">n</span>&nbsp;<span class="builtintype" id="4078753">int</span><span class="op" id="4078756">,</span>&nbsp;<span class="ident" id="4078758">err</span>&nbsp;<span class="builtintype" id="4078762">error</span><span class="op" id="4078767">)</span>&nbsp;<span class="op" id="4078769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078772">n</span><span class="op" id="4078773">,</span>&nbsp;<span class="ident" id="4078775">err</span>&nbsp;<span class="op" id="4078779">=</span>&nbsp;<span class="ident" id="4078781">out</span><span class="op" id="4078784">.</span><span class="ident" id="4078785">Write</span><span class="op" id="4078790">(</span><span class="ident" id="4078791">f</span><span class="op" id="4078792">.</span><span class="ident" id="4078793">Bytes</span><span class="op" id="4078798">(</span><span class="op" id="4078799">)</span><span class="op" id="4078800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078803">if</span>&nbsp;<span class="ident" id="4078806">err</span>&nbsp;<span class="op" id="4078810">!=</span>&nbsp;<span class="builtintype" id="4078813">nil</span>&nbsp;<span class="op" id="4078817">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078821">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4078829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078833">var</span>&nbsp;<span class="ident" id="4078837">nn</span>&nbsp;<span class="builtintype" id="4078840">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078846">if</span>&nbsp;<span class="ident" id="4078849">f</span><span class="op" id="4078850">.</span><span class="ident" id="4078851">pre</span>&nbsp;<span class="op" id="4078855">!=</span>&nbsp;<span class="builtintype" id="4078858">nil</span>&nbsp;<span class="op" id="4078862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078866">nn</span><span class="op" id="4078868">,</span>&nbsp;<span class="ident" id="4078870">err</span>&nbsp;<span class="op" id="4078874">=</span>&nbsp;<span class="ident" id="4078876">f</span><span class="op" id="4078877">.</span><span class="ident" id="4078878">pre</span><span class="op" id="4078881">.</span><span class="ident" id="4078882">writeTo</span><span class="op" id="4078889">(</span><span class="ident" id="4078890">out</span><span class="op" id="4078893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078897">n</span>&nbsp;<span class="op" id="4078899">+=</span>&nbsp;<span class="ident" id="4078902">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078907">if</span>&nbsp;<span class="ident" id="4078910">err</span>&nbsp;<span class="op" id="4078914">!=</span>&nbsp;<span class="builtintype" id="4078917">nil</span>&nbsp;<span class="op" id="4078921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078926">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4078935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4078938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4078942">if</span>&nbsp;<span class="ident" id="4078945">f</span><span class="op" id="4078946">.</span><span class="ident" id="4078947">post</span>&nbsp;<span class="op" id="4078952">!=</span>&nbsp;<span class="builtintype" id="4078955">nil</span>&nbsp;<span class="op" id="4078959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078963">nn</span><span class="op" id="4078965">,</span>&nbsp;<span class="ident" id="4078967">err</span>&nbsp;<span class="op" id="4078971">=</span>&nbsp;<span class="ident" id="4078973">f</span><span class="op" id="4078974">.</span><span class="ident" id="4078975">post</span><span class="op" id="4078979">.</span><span class="ident" id="4078980">writeTo</span><span class="op" id="4078987">(</span><span class="ident" id="4078988">out</span><span class="op" id="4078991">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4078995">n</span>&nbsp;<span class="op" id="4078997">+=</span>&nbsp;<span class="ident" id="4079000">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4079004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079007">return</span><br>
<span class="lineno"></span><span class="op" id="4079014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="4079017">func</span>&nbsp;<span class="ident" id="4079022">marshalBase128Int</span><span class="op" id="4079039">(</span><span class="ident" id="4079040">out</span>&nbsp;<span class="op" id="4079044">*</span><span class="ident" id="4079045">forkableWriter</span><span class="op" id="4079059">,</span>&nbsp;<span class="ident" id="4079061">n</span>&nbsp;<span class="ident" id="4079063">int64</span><span class="op" id="4079068">)</span>&nbsp;<span class="op" id="4079070">(</span><span class="ident" id="4079071">err</span>&nbsp;<span class="builtintype" id="4079075">error</span><span class="op" id="4079080">)</span>&nbsp;<span class="op" id="4079082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079085">if</span>&nbsp;<span class="ident" id="4079088">n</span>&nbsp;<span class="op" id="4079090">==</span>&nbsp;<span class="num" id="4079093">0</span>&nbsp;<span class="op" id="4079095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079099">err</span>&nbsp;<span class="op" id="4079103">=</span>&nbsp;<span class="ident" id="4079105">out</span><span class="op" id="4079108">.</span><span class="ident" id="4079109">WriteByte</span><span class="op" id="4079118">(</span><span class="num" id="4079119">0</span><span class="op" id="4079120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079124">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4079132">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079136">l</span>&nbsp;<span class="op" id="4079138">:=</span>&nbsp;<span class="num" id="4079141">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079144">for</span>&nbsp;<span class="ident" id="4079148">i</span>&nbsp;<span class="op" id="4079150">:=</span>&nbsp;<span class="ident" id="4079153">n</span><span class="op" id="4079154">;</span>&nbsp;<span class="ident" id="4079156">i</span>&nbsp;<span class="op" id="4079158">&gt;</span>&nbsp;<span class="num" id="4079160">0</span><span class="op" id="4079161">;</span>&nbsp;<span class="ident" id="4079163">i</span>&nbsp;<span class="op" id="4079165">&gt;&gt;=</span>&nbsp;<span class="num" id="4079169">7</span>&nbsp;<span class="op" id="4079171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079175">l</span><span class="op" id="4079176">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4079180">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079184">for</span>&nbsp;<span class="ident" id="4079188">i</span>&nbsp;<span class="op" id="4079190">:=</span>&nbsp;<span class="ident" id="4079193">l</span>&nbsp;<span class="op" id="4079195">-</span>&nbsp;<span class="num" id="4079197">1</span><span class="op" id="4079198">;</span>&nbsp;<span class="ident" id="4079200">i</span>&nbsp;<span class="op" id="4079202">&gt;=</span>&nbsp;<span class="num" id="4079205">0</span><span class="op" id="4079206">;</span>&nbsp;<span class="ident" id="4079208">i</span><span class="op" id="4079209">--</span>&nbsp;<span class="op" id="4079212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079216">o</span>&nbsp;<span class="op" id="4079218">:=</span>&nbsp;<span class="builtintype" id="4079221">byte</span><span class="op" id="4079225">(</span><span class="ident" id="4079226">n</span>&nbsp;<span class="op" id="4079228">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4079231">uint</span><span class="op" id="4079235">(</span><span class="ident" id="4079236">i</span><span class="op" id="4079237">*</span><span class="num" id="4079238">7</span><span class="op" id="4079239">)</span><span class="op" id="4079240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079244">o</span>&nbsp;<span class="op" id="4079246">&amp;=</span>&nbsp;<span class="num" id="4079249">0x7f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079256">if</span>&nbsp;<span class="ident" id="4079259">i</span>&nbsp;<span class="op" id="4079261">!=</span>&nbsp;<span class="num" id="4079264">0</span>&nbsp;<span class="op" id="4079266">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079271">o</span>&nbsp;<span class="op" id="4079273">|=</span>&nbsp;<span class="num" id="4079276">0x80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4079283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079287">err</span>&nbsp;<span class="op" id="4079291">=</span>&nbsp;<span class="ident" id="4079293">out</span><span class="op" id="4079296">.</span><span class="ident" id="4079297">WriteByte</span><span class="op" id="4079306">(</span><span class="ident" id="4079307">o</span><span class="op" id="4079308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079312">if</span>&nbsp;<span class="ident" id="4079315">err</span>&nbsp;<span class="op" id="4079319">!=</span>&nbsp;<span class="builtintype" id="4079322">nil</span>&nbsp;<span class="op" id="4079326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079331">return</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4079340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4079343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079347">return</span>&nbsp;<span class="builtintype" id="4079354">nil</span><br>
<span class="lineno"></span><span class="op" id="4079358">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="4079361">func</span>&nbsp;<span class="ident" id="4079366">marshalInt64</span><span class="op" id="4079378">(</span><span class="ident" id="4079379">out</span>&nbsp;<span class="op" id="4079383">*</span><span class="ident" id="4079384">forkableWriter</span><span class="op" id="4079398">,</span>&nbsp;<span class="ident" id="4079400">i</span>&nbsp;<span class="ident" id="4079402">int64</span><span class="op" id="4079407">)</span>&nbsp;<span class="op" id="4079409">(</span><span class="ident" id="4079410">err</span>&nbsp;<span class="builtintype" id="4079414">error</span><span class="op" id="4079419">)</span>&nbsp;<span class="op" id="4079421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079424">n</span>&nbsp;<span class="op" id="4079426">:=</span>&nbsp;<span class="ident" id="4079429">int64Length</span><span class="op" id="4079440">(</span><span class="ident" id="4079441">i</span><span class="op" id="4079442">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079446">for</span>&nbsp;<span class="op" id="4079450">;</span>&nbsp;<span class="ident" id="4079452">n</span>&nbsp;<span class="op" id="4079454">&gt;</span>&nbsp;<span class="num" id="4079456">0</span><span class="op" id="4079457">;</span>&nbsp;<span class="ident" id="4079459">n</span><span class="op" id="4079460">--</span>&nbsp;<span class="op" id="4079463">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079467">err</span>&nbsp;<span class="op" id="4079471">=</span>&nbsp;<span class="ident" id="4079473">out</span><span class="op" id="4079476">.</span><span class="ident" id="4079477">WriteByte</span><span class="op" id="4079486">(</span><span class="builtintype" id="4079487">byte</span><span class="op" id="4079491">(</span><span class="ident" id="4079492">i</span>&nbsp;<span class="op" id="4079494">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4079497">uint</span><span class="op" id="4079501">(</span><span class="op" id="4079502">(</span><span class="ident" id="4079503">n</span><span class="op" id="4079504">-</span><span class="num" id="4079505">1</span><span class="op" id="4079506">)</span><span class="op" id="4079507">*</span><span class="num" id="4079508">8</span><span class="op" id="4079509">)</span><span class="op" id="4079510">)</span><span class="op" id="4079511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079515">if</span>&nbsp;<span class="ident" id="4079518">err</span>&nbsp;<span class="op" id="4079522">!=</span>&nbsp;<span class="builtintype" id="4079525">nil</span>&nbsp;<span class="op" id="4079529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079534">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4079543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4079546">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079550">return</span>&nbsp;<span class="builtintype" id="4079557">nil</span><br>
<span class="lineno"></span><span class="op" id="4079561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4079564">func</span>&nbsp;<span class="ident" id="4079569">int64Length</span><span class="op" id="4079580">(</span><span class="ident" id="4079581">i</span>&nbsp;<span class="ident" id="4079583">int64</span><span class="op" id="4079588">)</span>&nbsp;<span class="op" id="4079590">(</span><span class="ident" id="4079591">numBytes</span>&nbsp;<span class="builtintype" id="4079600">int</span><span class="op" id="4079603">)</span>&nbsp;<span class="op" id="4079605">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079608">numBytes</span>&nbsp;<span class="op" id="4079617">=</span>&nbsp;<span class="num" id="4079619">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079623">for</span>&nbsp;<span class="ident" id="4079627">i</span>&nbsp;<span class="op" id="4079629">&gt;</span>&nbsp;<span class="num" id="4079631">127</span>&nbsp;<span class="op" id="4079635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079639">numBytes</span><span class="op" id="4079647">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079652">i</span>&nbsp;<span class="op" id="4079654">&gt;&gt;=</span>&nbsp;<span class="num" id="4079658">8</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4079661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079665">for</span>&nbsp;<span class="ident" id="4079669">i</span>&nbsp;<span class="op" id="4079671">&lt;</span>&nbsp;<span class="op" id="4079673">-</span><span class="num" id="4079674">128</span>&nbsp;<span class="op" id="4079678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079682">numBytes</span><span class="op" id="4079690">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4079695">i</span>&nbsp;<span class="op" id="4079697">&gt;&gt;=</span>&nbsp;<span class="num" id="4079701">8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4079704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079708">return</span><br>
<span class="lineno"></span><span class="op" id="4079715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="4079718">func</span>&nbsp;<span class="ident" id="4079723">marshalBigInt</span><span class="op" id="4079736">(</span><span class="ident" id="4079737">out</span>&nbsp;<span class="op" id="4079741">*</span><span class="ident" id="4079742">forkableWriter</span><span class="op" id="4079756">,</span>&nbsp;<span class="ident" id="4079758">n</span>&nbsp;<span class="op" id="4079760">*</span><span class="ident" id="4079761">big</span><span class="op" id="4079764">.</span><span class="ident" id="4079765">Int</span><span class="op" id="4079768">)</span>&nbsp;<span class="op" id="4079770">(</span><span class="ident" id="4079771">err</span>&nbsp;<span class="builtintype" id="4079775">error</span><span class="op" id="4079780">)</span>&nbsp;<span class="op" id="4079782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4079785">if</span>&nbsp;<span class="ident" id="4079788">n</span><span class="op" id="4079789">.</span><span class="ident" id="4079790">Sign</span><span class="op" id="4079794">(</span><span class="op" id="4079795">)</span>&nbsp;<span class="op" id="4079797">&lt;</span>&nbsp;<span class="num" id="4079799">0</span>&nbsp;<span class="op" id="4079801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4079805">//&nbsp;A&nbsp;negative&nbsp;number&nbsp;has&nbsp;to&nbsp;be&nbsp;converted&nbsp;to&nbsp;two&#39;s-complement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4079868">//&nbsp;form.&nbsp;So&nbsp;we&#39;ll&nbsp;subtract&nbsp;1&nbsp;and&nbsp;invert.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4079918">//&nbsp;most-significant-bit&nbsp;isn&#39;t&nbsp;set&nbsp;then&nbsp;we&#39;ll&nbsp;need&nbsp;to&nbsp;pad&nbsp;the</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4079981">//&nbsp;beginning&nbsp;with&nbsp;0xff&nbsp;in&nbsp;order&nbsp;to&nbsp;keep&nbsp;the&nbsp;number&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080044">nMinus1</span>&nbsp;<span class="op" id="4080052">:=</span>&nbsp;<span class="builtinfunc" id="4080055">new</span><span class="op" id="4080058">(</span><span class="ident" id="4080059">big</span><span class="op" id="4080062">.</span><span class="ident" id="4080063">Int</span><span class="op" id="4080066">)</span><span class="op" id="4080067">.</span><span class="ident" id="4080068">Neg</span><span class="op" id="4080071">(</span><span class="ident" id="4080072">n</span><span class="op" id="4080073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080077">nMinus1</span><span class="op" id="4080084">.</span><span class="ident" id="4080085">Sub</span><span class="op" id="4080088">(</span><span class="ident" id="4080089">nMinus1</span><span class="op" id="4080096">,</span>&nbsp;<span class="ident" id="4080098">bigOne</span><span class="op" id="4080104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080108">bytes</span>&nbsp;<span class="op" id="4080114">:=</span>&nbsp;<span class="ident" id="4080117">nMinus1</span><span class="op" id="4080124">.</span><span class="ident" id="4080125">Bytes</span><span class="op" id="4080130">(</span><span class="op" id="4080131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080135">for</span>&nbsp;<span class="ident" id="4080139">i</span>&nbsp;<span class="op" id="4080141">:=</span>&nbsp;<span class="keyword" id="4080144">range</span>&nbsp;<span class="ident" id="4080150">bytes</span>&nbsp;<span class="op" id="4080156">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080161">bytes</span><span class="op" id="4080166">[</span><span class="ident" id="4080167">i</span><span class="op" id="4080168">]</span>&nbsp;<span class="op" id="4080170">^=</span>&nbsp;<span class="num" id="4080173">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4080180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080184">if</span>&nbsp;<span class="builtinfunc" id="4080187">len</span><span class="op" id="4080190">(</span><span class="ident" id="4080191">bytes</span><span class="op" id="4080196">)</span>&nbsp;<span class="op" id="4080198">==</span>&nbsp;<span class="num" id="4080201">0</span>&nbsp;<span class="op" id="4080203">||</span>&nbsp;<span class="ident" id="4080206">bytes</span><span class="op" id="4080211">[</span><span class="num" id="4080212">0</span><span class="op" id="4080213">]</span><span class="op" id="4080214">&amp;</span><span class="num" id="4080215">0x80</span>&nbsp;<span class="op" id="4080220">==</span>&nbsp;<span class="num" id="4080223">0</span>&nbsp;<span class="op" id="4080225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080230">err</span>&nbsp;<span class="op" id="4080234">=</span>&nbsp;<span class="ident" id="4080236">out</span><span class="op" id="4080239">.</span><span class="ident" id="4080240">WriteByte</span><span class="op" id="4080249">(</span><span class="num" id="4080250">0xff</span><span class="op" id="4080254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080259">if</span>&nbsp;<span class="ident" id="4080262">err</span>&nbsp;<span class="op" id="4080266">!=</span>&nbsp;<span class="builtintype" id="4080269">nil</span>&nbsp;<span class="op" id="4080273">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080279">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4080289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4080293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080297">_</span><span class="op" id="4080298">,</span>&nbsp;<span class="ident" id="4080300">err</span>&nbsp;<span class="op" id="4080304">=</span>&nbsp;<span class="ident" id="4080306">out</span><span class="op" id="4080309">.</span><span class="ident" id="4080310">Write</span><span class="op" id="4080315">(</span><span class="ident" id="4080316">bytes</span><span class="op" id="4080321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4080324">}</span>&nbsp;<span class="keyword" id="4080326">else</span>&nbsp;<span class="keyword" id="4080331">if</span>&nbsp;<span class="ident" id="4080334">n</span><span class="op" id="4080335">.</span><span class="ident" id="4080336">Sign</span><span class="op" id="4080340">(</span><span class="op" id="4080341">)</span>&nbsp;<span class="op" id="4080343">==</span>&nbsp;<span class="num" id="4080346">0</span>&nbsp;<span class="op" id="4080348">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4080352">//&nbsp;Zero&nbsp;is&nbsp;written&nbsp;as&nbsp;a&nbsp;single&nbsp;0&nbsp;zero&nbsp;rather&nbsp;than&nbsp;no&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080414">err</span>&nbsp;<span class="op" id="4080418">=</span>&nbsp;<span class="ident" id="4080420">out</span><span class="op" id="4080423">.</span><span class="ident" id="4080424">WriteByte</span><span class="op" id="4080433">(</span><span class="num" id="4080434">0x00</span><span class="op" id="4080438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4080441">}</span>&nbsp;<span class="keyword" id="4080443">else</span>&nbsp;<span class="op" id="4080448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080452">bytes</span>&nbsp;<span class="op" id="4080458">:=</span>&nbsp;<span class="ident" id="4080461">n</span><span class="op" id="4080462">.</span><span class="ident" id="4080463">Bytes</span><span class="op" id="4080468">(</span><span class="op" id="4080469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080473">if</span>&nbsp;<span class="builtinfunc" id="4080476">len</span><span class="op" id="4080479">(</span><span class="ident" id="4080480">bytes</span><span class="op" id="4080485">)</span>&nbsp;<span class="op" id="4080487">&gt;</span>&nbsp;<span class="num" id="4080489">0</span>&nbsp;<span class="op" id="4080491">&amp;&amp;</span>&nbsp;<span class="ident" id="4080494">bytes</span><span class="op" id="4080499">[</span><span class="num" id="4080500">0</span><span class="op" id="4080501">]</span><span class="op" id="4080502">&amp;</span><span class="num" id="4080503">0x80</span>&nbsp;<span class="op" id="4080508">!=</span>&nbsp;<span class="num" id="4080511">0</span>&nbsp;<span class="op" id="4080513">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4080518">//&nbsp;We&#39;ll&nbsp;have&nbsp;to&nbsp;pad&nbsp;this&nbsp;with&nbsp;0x00&nbsp;in&nbsp;order&nbsp;to&nbsp;stop&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4080577">//&nbsp;looking&nbsp;like&nbsp;a&nbsp;negative&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080615">err</span>&nbsp;<span class="op" id="4080619">=</span>&nbsp;<span class="ident" id="4080621">out</span><span class="op" id="4080624">.</span><span class="ident" id="4080625">WriteByte</span><span class="op" id="4080634">(</span><span class="num" id="4080635">0</span><span class="op" id="4080636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080641">if</span>&nbsp;<span class="ident" id="4080644">err</span>&nbsp;<span class="op" id="4080648">!=</span>&nbsp;<span class="builtintype" id="4080651">nil</span>&nbsp;<span class="op" id="4080655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080661">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4080671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4080675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080679">_</span><span class="op" id="4080680">,</span>&nbsp;<span class="ident" id="4080682">err</span>&nbsp;<span class="op" id="4080686">=</span>&nbsp;<span class="ident" id="4080688">out</span><span class="op" id="4080691">.</span><span class="ident" id="4080692">Write</span><span class="op" id="4080697">(</span><span class="ident" id="4080698">bytes</span><span class="op" id="4080703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4080706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080709">return</span><br>
<span class="lineno">165</span><span class="op" id="4080716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4080719">func</span>&nbsp;<span class="ident" id="4080724">marshalLength</span><span class="op" id="4080737">(</span><span class="ident" id="4080738">out</span>&nbsp;<span class="op" id="4080742">*</span><span class="ident" id="4080743">forkableWriter</span><span class="op" id="4080757">,</span>&nbsp;<span class="ident" id="4080759">i</span>&nbsp;<span class="builtintype" id="4080761">int</span><span class="op" id="4080764">)</span>&nbsp;<span class="op" id="4080766">(</span><span class="ident" id="4080767">err</span>&nbsp;<span class="builtintype" id="4080771">error</span><span class="op" id="4080776">)</span>&nbsp;<span class="op" id="4080778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080781">n</span>&nbsp;<span class="op" id="4080783">:=</span>&nbsp;<span class="ident" id="4080786">lengthLength</span><span class="op" id="4080798">(</span><span class="ident" id="4080799">i</span><span class="op" id="4080800">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080804">for</span>&nbsp;<span class="op" id="4080808">;</span>&nbsp;<span class="ident" id="4080810">n</span>&nbsp;<span class="op" id="4080812">&gt;</span>&nbsp;<span class="num" id="4080814">0</span><span class="op" id="4080815">;</span>&nbsp;<span class="ident" id="4080817">n</span><span class="op" id="4080818">--</span>&nbsp;<span class="op" id="4080821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080825">err</span>&nbsp;<span class="op" id="4080829">=</span>&nbsp;<span class="ident" id="4080831">out</span><span class="op" id="4080834">.</span><span class="ident" id="4080835">WriteByte</span><span class="op" id="4080844">(</span><span class="builtintype" id="4080845">byte</span><span class="op" id="4080849">(</span><span class="ident" id="4080850">i</span>&nbsp;<span class="op" id="4080852">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4080855">uint</span><span class="op" id="4080859">(</span><span class="op" id="4080860">(</span><span class="ident" id="4080861">n</span><span class="op" id="4080862">-</span><span class="num" id="4080863">1</span><span class="op" id="4080864">)</span><span class="op" id="4080865">*</span><span class="num" id="4080866">8</span><span class="op" id="4080867">)</span><span class="op" id="4080868">)</span><span class="op" id="4080869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080873">if</span>&nbsp;<span class="ident" id="4080876">err</span>&nbsp;<span class="op" id="4080880">!=</span>&nbsp;<span class="builtintype" id="4080883">nil</span>&nbsp;<span class="op" id="4080887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080892">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4080901">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4080904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080908">return</span>&nbsp;<span class="builtintype" id="4080915">nil</span><br>
<span class="lineno"></span><span class="op" id="4080919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="4080922">func</span>&nbsp;<span class="ident" id="4080927">lengthLength</span><span class="op" id="4080939">(</span><span class="ident" id="4080940">i</span>&nbsp;<span class="builtintype" id="4080942">int</span><span class="op" id="4080945">)</span>&nbsp;<span class="op" id="4080947">(</span><span class="ident" id="4080948">numBytes</span>&nbsp;<span class="builtintype" id="4080957">int</span><span class="op" id="4080960">)</span>&nbsp;<span class="op" id="4080962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080965">numBytes</span>&nbsp;<span class="op" id="4080974">=</span>&nbsp;<span class="num" id="4080976">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4080979">for</span>&nbsp;<span class="ident" id="4080983">i</span>&nbsp;<span class="op" id="4080985">&gt;</span>&nbsp;<span class="num" id="4080987">255</span>&nbsp;<span class="op" id="4080991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4080995">numBytes</span><span class="op" id="4081003">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081008">i</span>&nbsp;<span class="op" id="4081010">&gt;&gt;=</span>&nbsp;<span class="num" id="4081014">8</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081020">return</span><br>
<span class="lineno"></span><span class="op" id="4081027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4081030">func</span>&nbsp;<span class="ident" id="4081035">marshalTagAndLength</span><span class="op" id="4081054">(</span><span class="ident" id="4081055">out</span>&nbsp;<span class="op" id="4081059">*</span><span class="ident" id="4081060">forkableWriter</span><span class="op" id="4081074">,</span>&nbsp;<span class="ident" id="4081076">t</span>&nbsp;<span class="ident" id="4081078">tagAndLength</span><span class="op" id="4081090">)</span>&nbsp;<span class="op" id="4081092">(</span><span class="ident" id="4081093">err</span>&nbsp;<span class="builtintype" id="4081097">error</span><span class="op" id="4081102">)</span>&nbsp;<span class="op" id="4081104">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081107">b</span>&nbsp;<span class="op" id="4081109">:=</span>&nbsp;<span class="builtintype" id="4081112">uint8</span><span class="op" id="4081117">(</span><span class="ident" id="4081118">t</span><span class="op" id="4081119">.</span><span class="ident" id="4081120">class</span><span class="op" id="4081125">)</span>&nbsp;<span class="op" id="4081127">&lt;&lt;</span>&nbsp;<span class="num" id="4081130">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081133">if</span>&nbsp;<span class="ident" id="4081136">t</span><span class="op" id="4081137">.</span><span class="ident" id="4081138">isCompound</span>&nbsp;<span class="op" id="4081149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081153">b</span>&nbsp;<span class="op" id="4081155">|=</span>&nbsp;<span class="num" id="4081158">0x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081167">if</span>&nbsp;<span class="ident" id="4081170">t</span><span class="op" id="4081171">.</span><span class="ident" id="4081172">tag</span>&nbsp;<span class="op" id="4081176">&gt;=</span>&nbsp;<span class="num" id="4081179">31</span>&nbsp;<span class="op" id="4081182">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081186">b</span>&nbsp;<span class="op" id="4081188">|=</span>&nbsp;<span class="num" id="4081191">0x1f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081198">err</span>&nbsp;<span class="op" id="4081202">=</span>&nbsp;<span class="ident" id="4081204">out</span><span class="op" id="4081207">.</span><span class="ident" id="4081208">WriteByte</span><span class="op" id="4081217">(</span><span class="ident" id="4081218">b</span><span class="op" id="4081219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081223">if</span>&nbsp;<span class="ident" id="4081226">err</span>&nbsp;<span class="op" id="4081230">!=</span>&nbsp;<span class="builtintype" id="4081233">nil</span>&nbsp;<span class="op" id="4081237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081242">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081251">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081255">err</span>&nbsp;<span class="op" id="4081259">=</span>&nbsp;<span class="ident" id="4081261">marshalBase128Int</span><span class="op" id="4081278">(</span><span class="ident" id="4081279">out</span><span class="op" id="4081282">,</span>&nbsp;<span class="ident" id="4081284">int64</span><span class="op" id="4081289">(</span><span class="ident" id="4081290">t</span><span class="op" id="4081291">.</span><span class="ident" id="4081292">tag</span><span class="op" id="4081295">)</span><span class="op" id="4081296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081300">if</span>&nbsp;<span class="ident" id="4081303">err</span>&nbsp;<span class="op" id="4081307">!=</span>&nbsp;<span class="builtintype" id="4081310">nil</span>&nbsp;<span class="op" id="4081314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081319">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081331">}</span>&nbsp;<span class="keyword" id="4081333">else</span>&nbsp;<span class="op" id="4081338">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081342">b</span>&nbsp;<span class="op" id="4081344">|=</span>&nbsp;<span class="builtintype" id="4081347">uint8</span><span class="op" id="4081352">(</span><span class="ident" id="4081353">t</span><span class="op" id="4081354">.</span><span class="ident" id="4081355">tag</span><span class="op" id="4081358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081362">err</span>&nbsp;<span class="op" id="4081366">=</span>&nbsp;<span class="ident" id="4081368">out</span><span class="op" id="4081371">.</span><span class="ident" id="4081372">WriteByte</span><span class="op" id="4081381">(</span><span class="ident" id="4081382">b</span><span class="op" id="4081383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081387">if</span>&nbsp;<span class="ident" id="4081390">err</span>&nbsp;<span class="op" id="4081394">!=</span>&nbsp;<span class="builtintype" id="4081397">nil</span>&nbsp;<span class="op" id="4081401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081406">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081415">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081422">if</span>&nbsp;<span class="ident" id="4081425">t</span><span class="op" id="4081426">.</span><span class="ident" id="4081427">length</span>&nbsp;<span class="op" id="4081434">&gt;=</span>&nbsp;<span class="num" id="4081437">128</span>&nbsp;<span class="op" id="4081441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081445">l</span>&nbsp;<span class="op" id="4081447">:=</span>&nbsp;<span class="ident" id="4081450">lengthLength</span><span class="op" id="4081462">(</span><span class="ident" id="4081463">t</span><span class="op" id="4081464">.</span><span class="ident" id="4081465">length</span><span class="op" id="4081471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081475">err</span>&nbsp;<span class="op" id="4081479">=</span>&nbsp;<span class="ident" id="4081481">out</span><span class="op" id="4081484">.</span><span class="ident" id="4081485">WriteByte</span><span class="op" id="4081494">(</span><span class="num" id="4081495">0x80</span>&nbsp;<span class="op" id="4081500">|</span>&nbsp;<span class="builtintype" id="4081502">byte</span><span class="op" id="4081506">(</span><span class="ident" id="4081507">l</span><span class="op" id="4081508">)</span><span class="op" id="4081509">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081513">if</span>&nbsp;<span class="ident" id="4081516">err</span>&nbsp;<span class="op" id="4081520">!=</span>&nbsp;<span class="builtintype" id="4081523">nil</span>&nbsp;<span class="op" id="4081527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081532">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081545">err</span>&nbsp;<span class="op" id="4081549">=</span>&nbsp;<span class="ident" id="4081551">marshalLength</span><span class="op" id="4081564">(</span><span class="ident" id="4081565">out</span><span class="op" id="4081568">,</span>&nbsp;<span class="ident" id="4081570">t</span><span class="op" id="4081571">.</span><span class="ident" id="4081572">length</span><span class="op" id="4081578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081582">if</span>&nbsp;<span class="ident" id="4081585">err</span>&nbsp;<span class="op" id="4081589">!=</span>&nbsp;<span class="builtintype" id="4081592">nil</span>&nbsp;<span class="op" id="4081596">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081601">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081613">}</span>&nbsp;<span class="keyword" id="4081615">else</span>&nbsp;<span class="op" id="4081620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081624">err</span>&nbsp;<span class="op" id="4081628">=</span>&nbsp;<span class="ident" id="4081630">out</span><span class="op" id="4081633">.</span><span class="ident" id="4081634">WriteByte</span><span class="op" id="4081643">(</span><span class="builtintype" id="4081644">byte</span><span class="op" id="4081648">(</span><span class="ident" id="4081649">t</span><span class="op" id="4081650">.</span><span class="ident" id="4081651">length</span><span class="op" id="4081657">)</span><span class="op" id="4081658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081662">if</span>&nbsp;<span class="ident" id="4081665">err</span>&nbsp;<span class="op" id="4081669">!=</span>&nbsp;<span class="builtintype" id="4081672">nil</span>&nbsp;<span class="op" id="4081676">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081681">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081697">return</span>&nbsp;<span class="builtintype" id="4081704">nil</span><br>
<span class="lineno">230</span><span class="op" id="4081708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4081711">func</span>&nbsp;<span class="ident" id="4081716">marshalBitString</span><span class="op" id="4081732">(</span><span class="ident" id="4081733">out</span>&nbsp;<span class="op" id="4081737">*</span><span class="ident" id="4081738">forkableWriter</span><span class="op" id="4081752">,</span>&nbsp;<span class="ident" id="4081754">b</span>&nbsp;<span class="ident" id="4081756">BitString</span><span class="op" id="4081765">)</span>&nbsp;<span class="op" id="4081767">(</span><span class="ident" id="4081768">err</span>&nbsp;<span class="builtintype" id="4081772">error</span><span class="op" id="4081777">)</span>&nbsp;<span class="op" id="4081779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081782">paddingBits</span>&nbsp;<span class="op" id="4081794">:=</span>&nbsp;<span class="builtintype" id="4081797">byte</span><span class="op" id="4081801">(</span><span class="op" id="4081802">(</span><span class="num" id="4081803">8</span>&nbsp;<span class="op" id="4081805">-</span>&nbsp;<span class="ident" id="4081807">b</span><span class="op" id="4081808">.</span><span class="ident" id="4081809">BitLength</span><span class="op" id="4081818">%</span><span class="num" id="4081819">8</span><span class="op" id="4081820">)</span>&nbsp;<span class="op" id="4081822">%</span>&nbsp;<span class="num" id="4081824">8</span><span class="op" id="4081825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081828">err</span>&nbsp;<span class="op" id="4081832">=</span>&nbsp;<span class="ident" id="4081834">out</span><span class="op" id="4081837">.</span><span class="ident" id="4081838">WriteByte</span><span class="op" id="4081847">(</span><span class="ident" id="4081848">paddingBits</span><span class="op" id="4081859">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081862">if</span>&nbsp;<span class="ident" id="4081865">err</span>&nbsp;<span class="op" id="4081869">!=</span>&nbsp;<span class="builtintype" id="4081872">nil</span>&nbsp;<span class="op" id="4081876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081880">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4081888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4081891">_</span><span class="op" id="4081892">,</span>&nbsp;<span class="ident" id="4081894">err</span>&nbsp;<span class="op" id="4081898">=</span>&nbsp;<span class="ident" id="4081900">out</span><span class="op" id="4081903">.</span><span class="ident" id="4081904">Write</span><span class="op" id="4081909">(</span><span class="ident" id="4081910">b</span><span class="op" id="4081911">.</span><span class="ident" id="4081912">Bytes</span><span class="op" id="4081917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4081920">return</span><br>
<span class="lineno">240</span><span class="op" id="4081927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4081930">func</span>&nbsp;<span class="ident" id="4081935">marshalObjectIdentifier</span><span class="op" id="4081958">(</span><span class="ident" id="4081959">out</span>&nbsp;<span class="op" id="4081963">*</span><span class="ident" id="4081964">forkableWriter</span><span class="op" id="4081978">,</span>&nbsp;<span class="ident" id="4081980">oid</span>&nbsp;<span class="op" id="4081984">[</span><span class="op" id="4081985">]</span><span class="builtintype" id="4081986">int</span><span class="op" id="4081989">)</span>&nbsp;<span class="op" id="4081991">(</span><span class="ident" id="4081992">err</span>&nbsp;<span class="builtintype" id="4081996">error</span><span class="op" id="4082001">)</span>&nbsp;<span class="op" id="4082003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082006">if</span>&nbsp;<span class="builtinfunc" id="4082009">len</span><span class="op" id="4082012">(</span><span class="ident" id="4082013">oid</span><span class="op" id="4082016">)</span>&nbsp;<span class="op" id="4082018">&lt;</span>&nbsp;<span class="num" id="4082020">2</span>&nbsp;<span class="op" id="4082022">||</span>&nbsp;<span class="ident" id="4082025">oid</span><span class="op" id="4082028">[</span><span class="num" id="4082029">0</span><span class="op" id="4082030">]</span>&nbsp;<span class="op" id="4082032">&gt;</span>&nbsp;<span class="num" id="4082034">2</span>&nbsp;<span class="op" id="4082036">||</span>&nbsp;<span class="op" id="4082039">(</span><span class="ident" id="4082040">oid</span><span class="op" id="4082043">[</span><span class="num" id="4082044">0</span><span class="op" id="4082045">]</span>&nbsp;<span class="op" id="4082047">&lt;</span>&nbsp;<span class="num" id="4082049">2</span>&nbsp;<span class="op" id="4082051">&amp;&amp;</span>&nbsp;<span class="ident" id="4082054">oid</span><span class="op" id="4082057">[</span><span class="num" id="4082058">1</span><span class="op" id="4082059">]</span>&nbsp;<span class="op" id="4082061">&gt;=</span>&nbsp;<span class="num" id="4082064">40</span><span class="op" id="4082066">)</span>&nbsp;<span class="op" id="4082068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082072">return</span>&nbsp;<span class="ident" id="4082079">StructuralError</span><span class="op" id="4082094">{</span><span class="string" id="4082095">&#34;invalid&nbsp;object&nbsp;identifier&#34;</span><span class="op" id="4082122">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4082125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4082129">err</span>&nbsp;<span class="op" id="4082133">=</span>&nbsp;<span class="ident" id="4082135">marshalBase128Int</span><span class="op" id="4082152">(</span><span class="ident" id="4082153">out</span><span class="op" id="4082156">,</span>&nbsp;<span class="ident" id="4082158">int64</span><span class="op" id="4082163">(</span><span class="ident" id="4082164">oid</span><span class="op" id="4082167">[</span><span class="num" id="4082168">0</span><span class="op" id="4082169">]</span><span class="op" id="4082170">*</span><span class="num" id="4082171">40</span><span class="op" id="4082173">+</span><span class="ident" id="4082174">oid</span><span class="op" id="4082177">[</span><span class="num" id="4082178">1</span><span class="op" id="4082179">]</span><span class="op" id="4082180">)</span><span class="op" id="4082181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082184">if</span>&nbsp;<span class="ident" id="4082187">err</span>&nbsp;<span class="op" id="4082191">!=</span>&nbsp;<span class="builtintype" id="4082194">nil</span>&nbsp;<span class="op" id="4082198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082202">return</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4082210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082213">for</span>&nbsp;<span class="ident" id="4082217">i</span>&nbsp;<span class="op" id="4082219">:=</span>&nbsp;<span class="num" id="4082222">2</span><span class="op" id="4082223">;</span>&nbsp;<span class="ident" id="4082225">i</span>&nbsp;<span class="op" id="4082227">&lt;</span>&nbsp;<span class="builtinfunc" id="4082229">len</span><span class="op" id="4082232">(</span><span class="ident" id="4082233">oid</span><span class="op" id="4082236">)</span><span class="op" id="4082237">;</span>&nbsp;<span class="ident" id="4082239">i</span><span class="op" id="4082240">++</span>&nbsp;<span class="op" id="4082243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4082247">err</span>&nbsp;<span class="op" id="4082251">=</span>&nbsp;<span class="ident" id="4082253">marshalBase128Int</span><span class="op" id="4082270">(</span><span class="ident" id="4082271">out</span><span class="op" id="4082274">,</span>&nbsp;<span class="ident" id="4082276">int64</span><span class="op" id="4082281">(</span><span class="ident" id="4082282">oid</span><span class="op" id="4082285">[</span><span class="ident" id="4082286">i</span><span class="op" id="4082287">]</span><span class="op" id="4082288">)</span><span class="op" id="4082289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082293">if</span>&nbsp;<span class="ident" id="4082296">err</span>&nbsp;<span class="op" id="4082300">!=</span>&nbsp;<span class="builtintype" id="4082303">nil</span>&nbsp;<span class="op" id="4082307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082312">return</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4082321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4082324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082328">return</span><br>
<span class="lineno"></span><span class="op" id="4082335">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4082338">func</span>&nbsp;<span class="ident" id="4082343">marshalPrintableString</span><span class="op" id="4082365">(</span><span class="ident" id="4082366">out</span>&nbsp;<span class="op" id="4082370">*</span><span class="ident" id="4082371">forkableWriter</span><span class="op" id="4082385">,</span>&nbsp;<span class="ident" id="4082387">s</span>&nbsp;<span class="builtintype" id="4082389">string</span><span class="op" id="4082395">)</span>&nbsp;<span class="op" id="4082397">(</span><span class="ident" id="4082398">err</span>&nbsp;<span class="builtintype" id="4082402">error</span><span class="op" id="4082407">)</span>&nbsp;<span class="op" id="4082409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4082412">b</span>&nbsp;<span class="op" id="4082414">:=</span>&nbsp;<span class="op" id="4082417">[</span><span class="op" id="4082418">]</span><span class="builtintype" id="4082419">byte</span><span class="op" id="4082423">(</span><span class="ident" id="4082424">s</span><span class="op" id="4082425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082428">for</span>&nbsp;<span class="ident" id="4082432">_</span><span class="op" id="4082433">,</span>&nbsp;<span class="ident" id="4082435">c</span>&nbsp;<span class="op" id="4082437">:=</span>&nbsp;<span class="keyword" id="4082440">range</span>&nbsp;<span class="ident" id="4082446">b</span>&nbsp;<span class="op" id="4082448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082452">if</span>&nbsp;<span class="op" id="4082455">!</span><span class="ident" id="4082456">isPrintable</span><span class="op" id="4082467">(</span><span class="ident" id="4082468">c</span><span class="op" id="4082469">)</span>&nbsp;<span class="op" id="4082471">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082476">return</span>&nbsp;<span class="ident" id="4082483">StructuralError</span><span class="op" id="4082498">{</span><span class="string" id="4082499">&#34;PrintableString&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4082543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4082547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4082550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4082554">_</span><span class="op" id="4082555">,</span>&nbsp;<span class="ident" id="4082557">err</span>&nbsp;<span class="op" id="4082561">=</span>&nbsp;<span class="ident" id="4082563">out</span><span class="op" id="4082566">.</span><span class="ident" id="4082567">Write</span><span class="op" id="4082572">(</span><span class="ident" id="4082573">b</span><span class="op" id="4082574">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082577">return</span><br>
<span class="lineno"></span><span class="op" id="4082584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4082587">func</span>&nbsp;<span class="ident" id="4082592">marshalIA5String</span><span class="op" id="4082608">(</span><span class="ident" id="4082609">out</span>&nbsp;<span class="op" id="4082613">*</span><span class="ident" id="4082614">forkableWriter</span><span class="op" id="4082628">,</span>&nbsp;<span class="ident" id="4082630">s</span>&nbsp;<span class="builtintype" id="4082632">string</span><span class="op" id="4082638">)</span>&nbsp;<span class="op" id="4082640">(</span><span class="ident" id="4082641">err</span>&nbsp;<span class="builtintype" id="4082645">error</span><span class="op" id="4082650">)</span>&nbsp;<span class="op" id="4082652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4082655">b</span>&nbsp;<span class="op" id="4082657">:=</span>&nbsp;<span class="op" id="4082660">[</span><span class="op" id="4082661">]</span><span class="builtintype" id="4082662">byte</span><span class="op" id="4082666">(</span><span class="ident" id="4082667">s</span><span class="op" id="4082668">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082671">for</span>&nbsp;<span class="ident" id="4082675">_</span><span class="op" id="4082676">,</span>&nbsp;<span class="ident" id="4082678">c</span>&nbsp;<span class="op" id="4082680">:=</span>&nbsp;<span class="keyword" id="4082683">range</span>&nbsp;<span class="ident" id="4082689">b</span>&nbsp;<span class="op" id="4082691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082695">if</span>&nbsp;<span class="ident" id="4082698">c</span>&nbsp;<span class="op" id="4082700">&gt;</span>&nbsp;<span class="num" id="4082702">127</span>&nbsp;<span class="op" id="4082706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082711">return</span>&nbsp;<span class="ident" id="4082718">StructuralError</span><span class="op" id="4082733">{</span><span class="string" id="4082734">&#34;IA5String&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4082772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4082776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4082779">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4082783">_</span><span class="op" id="4082784">,</span>&nbsp;<span class="ident" id="4082786">err</span>&nbsp;<span class="op" id="4082790">=</span>&nbsp;<span class="ident" id="4082792">out</span><span class="op" id="4082795">.</span><span class="ident" id="4082796">Write</span><span class="op" id="4082801">(</span><span class="ident" id="4082802">b</span><span class="op" id="4082803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082806">return</span><br>
<span class="lineno"></span><span class="op" id="4082813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="4082816">func</span>&nbsp;<span class="ident" id="4082821">marshalUTF8String</span><span class="op" id="4082838">(</span><span class="ident" id="4082839">out</span>&nbsp;<span class="op" id="4082843">*</span><span class="ident" id="4082844">forkableWriter</span><span class="op" id="4082858">,</span>&nbsp;<span class="ident" id="4082860">s</span>&nbsp;<span class="builtintype" id="4082862">string</span><span class="op" id="4082868">)</span>&nbsp;<span class="op" id="4082870">(</span><span class="ident" id="4082871">err</span>&nbsp;<span class="builtintype" id="4082875">error</span><span class="op" id="4082880">)</span>&nbsp;<span class="op" id="4082882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4082885">_</span><span class="op" id="4082886">,</span>&nbsp;<span class="ident" id="4082888">err</span>&nbsp;<span class="op" id="4082892">=</span>&nbsp;<span class="ident" id="4082894">out</span><span class="op" id="4082897">.</span><span class="ident" id="4082898">Write</span><span class="op" id="4082903">(</span><span class="op" id="4082904">[</span><span class="op" id="4082905">]</span><span class="builtintype" id="4082906">byte</span><span class="op" id="4082910">(</span><span class="ident" id="4082911">s</span><span class="op" id="4082912">)</span><span class="op" id="4082913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4082916">return</span><br>
<span class="lineno"></span><span class="op" id="4082923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="4082926">func</span>&nbsp;<span class="ident" id="4082931">marshalTwoDigits</span><span class="op" id="4082947">(</span><span class="ident" id="4082948">out</span>&nbsp;<span class="op" id="4082952">*</span><span class="ident" id="4082953">forkableWriter</span><span class="op" id="4082967">,</span>&nbsp;<span class="ident" id="4082969">v</span>&nbsp;<span class="builtintype" id="4082971">int</span><span class="op" id="4082974">)</span>&nbsp;<span class="op" id="4082976">(</span><span class="ident" id="4082977">err</span>&nbsp;<span class="builtintype" id="4082981">error</span><span class="op" id="4082986">)</span>&nbsp;<span class="op" id="4082988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4082991">err</span>&nbsp;<span class="op" id="4082995">=</span>&nbsp;<span class="ident" id="4082997">out</span><span class="op" id="4083000">.</span><span class="ident" id="4083001">WriteByte</span><span class="op" id="4083010">(</span><span class="builtintype" id="4083011">byte</span><span class="op" id="4083015">(</span><span class="string" id="4083016">&#39;0&#39;</span>&nbsp;<span class="op" id="4083020">+</span>&nbsp;<span class="op" id="4083022">(</span><span class="ident" id="4083023">v</span><span class="op" id="4083024">/</span><span class="num" id="4083025">10</span><span class="op" id="4083027">)</span><span class="op" id="4083028">%</span><span class="num" id="4083029">10</span><span class="op" id="4083031">)</span><span class="op" id="4083032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083035">if</span>&nbsp;<span class="ident" id="4083038">err</span>&nbsp;<span class="op" id="4083042">!=</span>&nbsp;<span class="builtintype" id="4083045">nil</span>&nbsp;<span class="op" id="4083049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083053">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4083061">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083064">return</span>&nbsp;<span class="ident" id="4083071">out</span><span class="op" id="4083074">.</span><span class="ident" id="4083075">WriteByte</span><span class="op" id="4083084">(</span><span class="builtintype" id="4083085">byte</span><span class="op" id="4083089">(</span><span class="string" id="4083090">&#39;0&#39;</span>&nbsp;<span class="op" id="4083094">+</span>&nbsp;<span class="ident" id="4083096">v</span><span class="op" id="4083097">%</span><span class="num" id="4083098">10</span><span class="op" id="4083100">)</span><span class="op" id="4083101">)</span><br>
<span class="lineno"></span><span class="op" id="4083103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4083106">func</span>&nbsp;<span class="ident" id="4083111">marshalFourDigits</span><span class="op" id="4083128">(</span><span class="ident" id="4083129">out</span>&nbsp;<span class="op" id="4083133">*</span><span class="ident" id="4083134">forkableWriter</span><span class="op" id="4083148">,</span>&nbsp;<span class="ident" id="4083150">v</span>&nbsp;<span class="builtintype" id="4083152">int</span><span class="op" id="4083155">)</span>&nbsp;<span class="op" id="4083157">(</span><span class="ident" id="4083158">err</span>&nbsp;<span class="builtintype" id="4083162">error</span><span class="op" id="4083167">)</span>&nbsp;<span class="op" id="4083169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083172">var</span>&nbsp;<span class="ident" id="4083176">bytes</span>&nbsp;<span class="op" id="4083182">[</span><span class="num" id="4083183">4</span><span class="op" id="4083184">]</span><span class="builtintype" id="4083185">byte</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083191">for</span>&nbsp;<span class="ident" id="4083195">i</span>&nbsp;<span class="op" id="4083197">:=</span>&nbsp;<span class="keyword" id="4083200">range</span>&nbsp;<span class="ident" id="4083206">bytes</span>&nbsp;<span class="op" id="4083212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4083216">bytes</span><span class="op" id="4083221">[</span><span class="num" id="4083222">3</span><span class="op" id="4083223">-</span><span class="ident" id="4083224">i</span><span class="op" id="4083225">]</span>&nbsp;<span class="op" id="4083227">=</span>&nbsp;<span class="string" id="4083229">&#39;0&#39;</span>&nbsp;<span class="op" id="4083233">+</span>&nbsp;<span class="builtintype" id="4083235">byte</span><span class="op" id="4083239">(</span><span class="ident" id="4083240">v</span><span class="op" id="4083241">%</span><span class="num" id="4083242">10</span><span class="op" id="4083244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4083248">v</span>&nbsp;<span class="op" id="4083250">/=</span>&nbsp;<span class="num" id="4083253">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4083257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4083260">_</span><span class="op" id="4083261">,</span>&nbsp;<span class="ident" id="4083263">err</span>&nbsp;<span class="op" id="4083267">=</span>&nbsp;<span class="ident" id="4083269">out</span><span class="op" id="4083272">.</span><span class="ident" id="4083273">Write</span><span class="op" id="4083278">(</span><span class="ident" id="4083279">bytes</span><span class="op" id="4083284">[</span><span class="op" id="4083285">:</span><span class="op" id="4083286">]</span><span class="op" id="4083287">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083290">return</span><br>
<span class="lineno"></span><span class="op" id="4083297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4083300">func</span>&nbsp;<span class="ident" id="4083305">outsideUTCRange</span><span class="op" id="4083320">(</span><span class="ident" id="4083321">t</span>&nbsp;<span class="ident" id="4083323">time</span><span class="op" id="4083327">.</span><span class="ident" id="4083328">Time</span><span class="op" id="4083332">)</span>&nbsp;<span class="builtintype" id="4083334">bool</span>&nbsp;<span class="op" id="4083339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4083342">year</span>&nbsp;<span class="op" id="4083347">:=</span>&nbsp;<span class="ident" id="4083350">t</span><span class="op" id="4083351">.</span><span class="ident" id="4083352">Year</span><span class="op" id="4083356">(</span><span class="op" id="4083357">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083360">return</span>&nbsp;<span class="ident" id="4083367">year</span>&nbsp;<span class="op" id="4083372">&lt;</span>&nbsp;<span class="num" id="4083374">1950</span>&nbsp;<span class="op" id="4083379">||</span>&nbsp;<span class="ident" id="4083382">year</span>&nbsp;<span class="op" id="4083387">&gt;=</span>&nbsp;<span class="num" id="4083390">2050</span><br>
<span class="lineno"></span><span class="op" id="4083395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4083398">func</span>&nbsp;<span class="ident" id="4083403">marshalUTCTime</span><span class="op" id="4083417">(</span><span class="ident" id="4083418">out</span>&nbsp;<span class="op" id="4083422">*</span><span class="ident" id="4083423">forkableWriter</span><span class="op" id="4083437">,</span>&nbsp;<span class="ident" id="4083439">t</span>&nbsp;<span class="ident" id="4083441">time</span><span class="op" id="4083445">.</span><span class="ident" id="4083446">Time</span><span class="op" id="4083450">)</span>&nbsp;<span class="op" id="4083452">(</span><span class="ident" id="4083453">err</span>&nbsp;<span class="builtintype" id="4083457">error</span><span class="op" id="4083462">)</span>&nbsp;<span class="op" id="4083464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4083467">year</span>&nbsp;<span class="op" id="4083472">:=</span>&nbsp;<span class="ident" id="4083475">t</span><span class="op" id="4083476">.</span><span class="ident" id="4083477">Year</span><span class="op" id="4083481">(</span><span class="op" id="4083482">)</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083486">switch</span>&nbsp;<span class="op" id="4083493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083496">case</span>&nbsp;<span class="num" id="4083501">1950</span>&nbsp;<span class="op" id="4083506">&lt;=</span>&nbsp;<span class="ident" id="4083509">year</span>&nbsp;<span class="op" id="4083514">&amp;&amp;</span>&nbsp;<span class="ident" id="4083517">year</span>&nbsp;<span class="op" id="4083522">&lt;</span>&nbsp;<span class="num" id="4083524">2000</span><span class="op" id="4083528">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4083532">err</span>&nbsp;<span class="op" id="4083536">=</span>&nbsp;<span class="ident" id="4083538">marshalTwoDigits</span><span class="op" id="4083554">(</span><span class="ident" id="4083555">out</span><span class="op" id="4083558">,</span>&nbsp;<span class="builtintype" id="4083560">int</span><span class="op" id="4083563">(</span><span class="ident" id="4083564">year</span><span class="op" id="4083568">-</span><span class="num" id="4083569">1900</span><span class="op" id="4083573">)</span><span class="op" id="4083574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083577">case</span>&nbsp;<span class="num" id="4083582">2000</span>&nbsp;<span class="op" id="4083587">&lt;=</span>&nbsp;<span class="ident" id="4083590">year</span>&nbsp;<span class="op" id="4083595">&amp;&amp;</span>&nbsp;<span class="ident" id="4083598">year</span>&nbsp;<span class="op" id="4083603">&lt;</span>&nbsp;<span class="num" id="4083605">2050</span><span class="op" id="4083609">:</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4083613">err</span>&nbsp;<span class="op" id="4083617">=</span>&nbsp;<span class="ident" id="4083619">marshalTwoDigits</span><span class="op" id="4083635">(</span><span class="ident" id="4083636">out</span><span class="op" id="4083639">,</span>&nbsp;<span class="builtintype" id="4083641">int</span><span class="op" id="4083644">(</span><span class="ident" id="4083645">year</span><span class="op" id="4083649">-</span><span class="num" id="4083650">2000</span><span class="op" id="4083654">)</span><span class="op" id="4083655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083658">default</span><span class="op" id="4083665">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083669">return</span>&nbsp;<span class="ident" id="4083676">StructuralError</span><span class="op" id="4083691">{</span><span class="string" id="4083692">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;UTCTime&#34;</span><span class="op" id="4083726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4083729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083732">if</span>&nbsp;<span class="ident" id="4083735">err</span>&nbsp;<span class="op" id="4083739">!=</span>&nbsp;<span class="builtintype" id="4083742">nil</span>&nbsp;<span class="op" id="4083746">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083750">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4083758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083762">return</span>&nbsp;<span class="ident" id="4083769">marshalTimeCommon</span><span class="op" id="4083786">(</span><span class="ident" id="4083787">out</span><span class="op" id="4083790">,</span>&nbsp;<span class="ident" id="4083792">t</span><span class="op" id="4083793">)</span><br>
<span class="lineno"></span><span class="op" id="4083795">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="4083798">func</span>&nbsp;<span class="ident" id="4083803">marshalGeneralizedTime</span><span class="op" id="4083825">(</span><span class="ident" id="4083826">out</span>&nbsp;<span class="op" id="4083830">*</span><span class="ident" id="4083831">forkableWriter</span><span class="op" id="4083845">,</span>&nbsp;<span class="ident" id="4083847">t</span>&nbsp;<span class="ident" id="4083849">time</span><span class="op" id="4083853">.</span><span class="ident" id="4083854">Time</span><span class="op" id="4083858">)</span>&nbsp;<span class="op" id="4083860">(</span><span class="ident" id="4083861">err</span>&nbsp;<span class="builtintype" id="4083865">error</span><span class="op" id="4083870">)</span>&nbsp;<span class="op" id="4083872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4083875">year</span>&nbsp;<span class="op" id="4083880">:=</span>&nbsp;<span class="ident" id="4083883">t</span><span class="op" id="4083884">.</span><span class="ident" id="4083885">Year</span><span class="op" id="4083889">(</span><span class="op" id="4083890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083893">if</span>&nbsp;<span class="ident" id="4083896">year</span>&nbsp;<span class="op" id="4083901">&lt;</span>&nbsp;<span class="num" id="4083903">0</span>&nbsp;<span class="op" id="4083905">||</span>&nbsp;<span class="ident" id="4083908">year</span>&nbsp;<span class="op" id="4083913">&gt;</span>&nbsp;<span class="num" id="4083915">9999</span>&nbsp;<span class="op" id="4083920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083924">return</span>&nbsp;<span class="ident" id="4083931">StructuralError</span><span class="op" id="4083946">{</span><span class="string" id="4083947">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;GeneralizedTime&#34;</span><span class="op" id="4083989">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4083992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4083995">if</span>&nbsp;<span class="ident" id="4083998">err</span>&nbsp;<span class="op" id="4084002">=</span>&nbsp;<span class="ident" id="4084004">marshalFourDigits</span><span class="op" id="4084021">(</span><span class="ident" id="4084022">out</span><span class="op" id="4084025">,</span>&nbsp;<span class="ident" id="4084027">year</span><span class="op" id="4084031">)</span><span class="op" id="4084032">;</span>&nbsp;<span class="ident" id="4084034">err</span>&nbsp;<span class="op" id="4084038">!=</span>&nbsp;<span class="builtintype" id="4084041">nil</span>&nbsp;<span class="op" id="4084045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084049">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4084057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084061">return</span>&nbsp;<span class="ident" id="4084068">marshalTimeCommon</span><span class="op" id="4084085">(</span><span class="ident" id="4084086">out</span><span class="op" id="4084089">,</span>&nbsp;<span class="ident" id="4084091">t</span><span class="op" id="4084092">)</span><br>
<span class="lineno"></span><span class="op" id="4084094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4084097">func</span>&nbsp;<span class="ident" id="4084102">marshalTimeCommon</span><span class="op" id="4084119">(</span><span class="ident" id="4084120">out</span>&nbsp;<span class="op" id="4084124">*</span><span class="ident" id="4084125">forkableWriter</span><span class="op" id="4084139">,</span>&nbsp;<span class="ident" id="4084141">t</span>&nbsp;<span class="ident" id="4084143">time</span><span class="op" id="4084147">.</span><span class="ident" id="4084148">Time</span><span class="op" id="4084152">)</span>&nbsp;<span class="op" id="4084154">(</span><span class="ident" id="4084155">err</span>&nbsp;<span class="builtintype" id="4084159">error</span><span class="op" id="4084164">)</span>&nbsp;<span class="op" id="4084166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084169">_</span><span class="op" id="4084170">,</span>&nbsp;<span class="ident" id="4084172">month</span><span class="op" id="4084177">,</span>&nbsp;<span class="ident" id="4084179">day</span>&nbsp;<span class="op" id="4084183">:=</span>&nbsp;<span class="ident" id="4084186">t</span><span class="op" id="4084187">.</span><span class="ident" id="4084188">Date</span><span class="op" id="4084192">(</span><span class="op" id="4084193">)</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084197">err</span>&nbsp;<span class="op" id="4084201">=</span>&nbsp;<span class="ident" id="4084203">marshalTwoDigits</span><span class="op" id="4084219">(</span><span class="ident" id="4084220">out</span><span class="op" id="4084223">,</span>&nbsp;<span class="builtintype" id="4084225">int</span><span class="op" id="4084228">(</span><span class="ident" id="4084229">month</span><span class="op" id="4084234">)</span><span class="op" id="4084235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084238">if</span>&nbsp;<span class="ident" id="4084241">err</span>&nbsp;<span class="op" id="4084245">!=</span>&nbsp;<span class="builtintype" id="4084248">nil</span>&nbsp;<span class="op" id="4084252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084256">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4084264">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084268">err</span>&nbsp;<span class="op" id="4084272">=</span>&nbsp;<span class="ident" id="4084274">marshalTwoDigits</span><span class="op" id="4084290">(</span><span class="ident" id="4084291">out</span><span class="op" id="4084294">,</span>&nbsp;<span class="ident" id="4084296">day</span><span class="op" id="4084299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084302">if</span>&nbsp;<span class="ident" id="4084305">err</span>&nbsp;<span class="op" id="4084309">!=</span>&nbsp;<span class="builtintype" id="4084312">nil</span>&nbsp;<span class="op" id="4084316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084320">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4084328">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084332">hour</span><span class="op" id="4084336">,</span>&nbsp;<span class="ident" id="4084338">min</span><span class="op" id="4084341">,</span>&nbsp;<span class="ident" id="4084343">sec</span>&nbsp;<span class="op" id="4084347">:=</span>&nbsp;<span class="ident" id="4084350">t</span><span class="op" id="4084351">.</span><span class="ident" id="4084352">Clock</span><span class="op" id="4084357">(</span><span class="op" id="4084358">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084362">err</span>&nbsp;<span class="op" id="4084366">=</span>&nbsp;<span class="ident" id="4084368">marshalTwoDigits</span><span class="op" id="4084384">(</span><span class="ident" id="4084385">out</span><span class="op" id="4084388">,</span>&nbsp;<span class="ident" id="4084390">hour</span><span class="op" id="4084394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084397">if</span>&nbsp;<span class="ident" id="4084400">err</span>&nbsp;<span class="op" id="4084404">!=</span>&nbsp;<span class="builtintype" id="4084407">nil</span>&nbsp;<span class="op" id="4084411">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084415">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4084423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084427">err</span>&nbsp;<span class="op" id="4084431">=</span>&nbsp;<span class="ident" id="4084433">marshalTwoDigits</span><span class="op" id="4084449">(</span><span class="ident" id="4084450">out</span><span class="op" id="4084453">,</span>&nbsp;<span class="ident" id="4084455">min</span><span class="op" id="4084458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084461">if</span>&nbsp;<span class="ident" id="4084464">err</span>&nbsp;<span class="op" id="4084468">!=</span>&nbsp;<span class="builtintype" id="4084471">nil</span>&nbsp;<span class="op" id="4084475">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084479">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4084487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084491">err</span>&nbsp;<span class="op" id="4084495">=</span>&nbsp;<span class="ident" id="4084497">marshalTwoDigits</span><span class="op" id="4084513">(</span><span class="ident" id="4084514">out</span><span class="op" id="4084517">,</span>&nbsp;<span class="ident" id="4084519">sec</span><span class="op" id="4084522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084525">if</span>&nbsp;<span class="ident" id="4084528">err</span>&nbsp;<span class="op" id="4084532">!=</span>&nbsp;<span class="builtintype" id="4084535">nil</span>&nbsp;<span class="op" id="4084539">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084543">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4084551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084555">_</span><span class="op" id="4084556">,</span>&nbsp;<span class="ident" id="4084558">offset</span>&nbsp;<span class="op" id="4084565">:=</span>&nbsp;<span class="ident" id="4084568">t</span><span class="op" id="4084569">.</span><span class="ident" id="4084570">Zone</span><span class="op" id="4084574">(</span><span class="op" id="4084575">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084579">switch</span>&nbsp;<span class="op" id="4084586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084589">case</span>&nbsp;<span class="ident" id="4084594">offset</span><span class="op" id="4084600">/</span><span class="num" id="4084601">60</span>&nbsp;<span class="op" id="4084604">==</span>&nbsp;<span class="num" id="4084607">0</span><span class="op" id="4084608">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084612">err</span>&nbsp;<span class="op" id="4084616">=</span>&nbsp;<span class="ident" id="4084618">out</span><span class="op" id="4084621">.</span><span class="ident" id="4084622">WriteByte</span><span class="op" id="4084631">(</span><span class="string" id="4084632">&#39;Z&#39;</span><span class="op" id="4084635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084639">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084647">case</span>&nbsp;<span class="ident" id="4084652">offset</span>&nbsp;<span class="op" id="4084659">&gt;</span>&nbsp;<span class="num" id="4084661">0</span><span class="op" id="4084662">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084666">err</span>&nbsp;<span class="op" id="4084670">=</span>&nbsp;<span class="ident" id="4084672">out</span><span class="op" id="4084675">.</span><span class="ident" id="4084676">WriteByte</span><span class="op" id="4084685">(</span><span class="string" id="4084686">&#39;+&#39;</span><span class="op" id="4084689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084692">case</span>&nbsp;<span class="ident" id="4084697">offset</span>&nbsp;<span class="op" id="4084704">&lt;</span>&nbsp;<span class="num" id="4084706">0</span><span class="op" id="4084707">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084711">err</span>&nbsp;<span class="op" id="4084715">=</span>&nbsp;<span class="ident" id="4084717">out</span><span class="op" id="4084720">.</span><span class="ident" id="4084721">WriteByte</span><span class="op" id="4084730">(</span><span class="string" id="4084731">&#39;-&#39;</span><span class="op" id="4084734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4084737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084741">if</span>&nbsp;<span class="ident" id="4084744">err</span>&nbsp;<span class="op" id="4084748">!=</span>&nbsp;<span class="builtintype" id="4084751">nil</span>&nbsp;<span class="op" id="4084755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084759">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4084767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084771">offsetMinutes</span>&nbsp;<span class="op" id="4084785">:=</span>&nbsp;<span class="ident" id="4084788">offset</span>&nbsp;<span class="op" id="4084795">/</span>&nbsp;<span class="num" id="4084797">60</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084801">if</span>&nbsp;<span class="ident" id="4084804">offsetMinutes</span>&nbsp;<span class="op" id="4084818">&lt;</span>&nbsp;<span class="num" id="4084820">0</span>&nbsp;<span class="op" id="4084822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084826">offsetMinutes</span>&nbsp;<span class="op" id="4084840">=</span>&nbsp;<span class="op" id="4084842">-</span><span class="ident" id="4084843">offsetMinutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4084858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084862">err</span>&nbsp;<span class="op" id="4084866">=</span>&nbsp;<span class="ident" id="4084868">marshalTwoDigits</span><span class="op" id="4084884">(</span><span class="ident" id="4084885">out</span><span class="op" id="4084888">,</span>&nbsp;<span class="ident" id="4084890">offsetMinutes</span><span class="op" id="4084903">/</span><span class="num" id="4084904">60</span><span class="op" id="4084906">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084909">if</span>&nbsp;<span class="ident" id="4084912">err</span>&nbsp;<span class="op" id="4084916">!=</span>&nbsp;<span class="builtintype" id="4084919">nil</span>&nbsp;<span class="op" id="4084923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084927">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4084935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4084939">err</span>&nbsp;<span class="op" id="4084943">=</span>&nbsp;<span class="ident" id="4084945">marshalTwoDigits</span><span class="op" id="4084961">(</span><span class="ident" id="4084962">out</span><span class="op" id="4084965">,</span>&nbsp;<span class="ident" id="4084967">offsetMinutes</span><span class="op" id="4084980">%</span><span class="num" id="4084981">60</span><span class="op" id="4084983">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4084986">return</span><br>
<span class="lineno"></span><span class="op" id="4084993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4084996">func</span>&nbsp;<span class="ident" id="4085001">stripTagAndLength</span><span class="op" id="4085018">(</span><span class="ident" id="4085019">in</span>&nbsp;<span class="op" id="4085022">[</span><span class="op" id="4085023">]</span><span class="builtintype" id="4085024">byte</span><span class="op" id="4085028">)</span>&nbsp;<span class="op" id="4085030">[</span><span class="op" id="4085031">]</span><span class="builtintype" id="4085032">byte</span>&nbsp;<span class="op" id="4085037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4085040">_</span><span class="op" id="4085041">,</span>&nbsp;<span class="ident" id="4085043">offset</span><span class="op" id="4085049">,</span>&nbsp;<span class="ident" id="4085051">err</span>&nbsp;<span class="op" id="4085055">:=</span>&nbsp;<span class="ident" id="4085058">parseTagAndLength</span><span class="op" id="4085075">(</span><span class="ident" id="4085076">in</span><span class="op" id="4085078">,</span>&nbsp;<span class="num" id="4085080">0</span><span class="op" id="4085081">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085084">if</span>&nbsp;<span class="ident" id="4085087">err</span>&nbsp;<span class="op" id="4085091">!=</span>&nbsp;<span class="builtintype" id="4085094">nil</span>&nbsp;<span class="op" id="4085098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085102">return</span>&nbsp;<span class="ident" id="4085109">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4085113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085116">return</span>&nbsp;<span class="ident" id="4085123">in</span><span class="op" id="4085125">[</span><span class="ident" id="4085126">offset</span><span class="op" id="4085132">:</span><span class="op" id="4085133">]</span><br>
<span class="lineno"></span><span class="op" id="4085135">}</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span><span class="keyword" id="4085138">func</span>&nbsp;<span class="ident" id="4085143">marshalBody</span><span class="op" id="4085154">(</span><span class="ident" id="4085155">out</span>&nbsp;<span class="op" id="4085159">*</span><span class="ident" id="4085160">forkableWriter</span><span class="op" id="4085174">,</span>&nbsp;<span class="ident" id="4085176">value</span>&nbsp;<span class="ident" id="4085182">reflect</span><span class="op" id="4085189">.</span><span class="ident" id="4085190">Value</span><span class="op" id="4085195">,</span>&nbsp;<span class="ident" id="4085197">params</span>&nbsp;<span class="ident" id="4085204">fieldParameters</span><span class="op" id="4085219">)</span>&nbsp;<span class="op" id="4085221">(</span><span class="ident" id="4085222">err</span>&nbsp;<span class="builtintype" id="4085226">error</span><span class="op" id="4085231">)</span>&nbsp;<span class="op" id="4085233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085236">switch</span>&nbsp;<span class="ident" id="4085243">value</span><span class="op" id="4085248">.</span><span class="ident" id="4085249">Type</span><span class="op" id="4085253">(</span><span class="op" id="4085254">)</span>&nbsp;<span class="op" id="4085256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085259">case</span>&nbsp;<span class="ident" id="4085264">timeType</span><span class="op" id="4085272">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4085276">t</span>&nbsp;<span class="op" id="4085278">:=</span>&nbsp;<span class="ident" id="4085281">value</span><span class="op" id="4085286">.</span><span class="ident" id="4085287">Interface</span><span class="op" id="4085296">(</span><span class="op" id="4085297">)</span><span class="op" id="4085298">.</span><span class="op" id="4085299">(</span><span class="ident" id="4085300">time</span><span class="op" id="4085304">.</span><span class="ident" id="4085305">Time</span><span class="op" id="4085309">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085313">if</span>&nbsp;<span class="ident" id="4085316">outsideUTCRange</span><span class="op" id="4085331">(</span><span class="ident" id="4085332">t</span><span class="op" id="4085333">)</span>&nbsp;<span class="op" id="4085335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085340">return</span>&nbsp;<span class="ident" id="4085347">marshalGeneralizedTime</span><span class="op" id="4085369">(</span><span class="ident" id="4085370">out</span><span class="op" id="4085373">,</span>&nbsp;<span class="ident" id="4085375">t</span><span class="op" id="4085376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4085380">}</span>&nbsp;<span class="keyword" id="4085382">else</span>&nbsp;<span class="op" id="4085387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085392">return</span>&nbsp;<span class="ident" id="4085399">marshalUTCTime</span><span class="op" id="4085413">(</span><span class="ident" id="4085414">out</span><span class="op" id="4085417">,</span>&nbsp;<span class="ident" id="4085419">t</span><span class="op" id="4085420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4085424">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085427">case</span>&nbsp;<span class="ident" id="4085432">bitStringType</span><span class="op" id="4085445">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085449">return</span>&nbsp;<span class="ident" id="4085456">marshalBitString</span><span class="op" id="4085472">(</span><span class="ident" id="4085473">out</span><span class="op" id="4085476">,</span>&nbsp;<span class="ident" id="4085478">value</span><span class="op" id="4085483">.</span><span class="ident" id="4085484">Interface</span><span class="op" id="4085493">(</span><span class="op" id="4085494">)</span><span class="op" id="4085495">.</span><span class="op" id="4085496">(</span><span class="ident" id="4085497">BitString</span><span class="op" id="4085506">)</span><span class="op" id="4085507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085510">case</span>&nbsp;<span class="ident" id="4085515">objectIdentifierType</span><span class="op" id="4085535">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085539">return</span>&nbsp;<span class="ident" id="4085546">marshalObjectIdentifier</span><span class="op" id="4085569">(</span><span class="ident" id="4085570">out</span><span class="op" id="4085573">,</span>&nbsp;<span class="ident" id="4085575">value</span><span class="op" id="4085580">.</span><span class="ident" id="4085581">Interface</span><span class="op" id="4085590">(</span><span class="op" id="4085591">)</span><span class="op" id="4085592">.</span><span class="op" id="4085593">(</span><span class="ident" id="4085594">ObjectIdentifier</span><span class="op" id="4085610">)</span><span class="op" id="4085611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085614">case</span>&nbsp;<span class="ident" id="4085619">bigIntType</span><span class="op" id="4085629">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085633">return</span>&nbsp;<span class="ident" id="4085640">marshalBigInt</span><span class="op" id="4085653">(</span><span class="ident" id="4085654">out</span><span class="op" id="4085657">,</span>&nbsp;<span class="ident" id="4085659">value</span><span class="op" id="4085664">.</span><span class="ident" id="4085665">Interface</span><span class="op" id="4085674">(</span><span class="op" id="4085675">)</span><span class="op" id="4085676">.</span><span class="op" id="4085677">(</span><span class="op" id="4085678">*</span><span class="ident" id="4085679">big</span><span class="op" id="4085682">.</span><span class="ident" id="4085683">Int</span><span class="op" id="4085686">)</span><span class="op" id="4085687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4085690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085694">switch</span>&nbsp;<span class="ident" id="4085701">v</span>&nbsp;<span class="op" id="4085703">:=</span>&nbsp;<span class="ident" id="4085706">value</span><span class="op" id="4085711">;</span>&nbsp;<span class="ident" id="4085713">v</span><span class="op" id="4085714">.</span><span class="ident" id="4085715">Kind</span><span class="op" id="4085719">(</span><span class="op" id="4085720">)</span>&nbsp;<span class="op" id="4085722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085725">case</span>&nbsp;<span class="ident" id="4085730">reflect</span><span class="op" id="4085737">.</span><span class="ident" id="4085738">Bool</span><span class="op" id="4085742">:</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085746">if</span>&nbsp;<span class="ident" id="4085749">v</span><span class="op" id="4085750">.</span><span class="ident" id="4085751">Bool</span><span class="op" id="4085755">(</span><span class="op" id="4085756">)</span>&nbsp;<span class="op" id="4085758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085763">return</span>&nbsp;<span class="ident" id="4085770">out</span><span class="op" id="4085773">.</span><span class="ident" id="4085774">WriteByte</span><span class="op" id="4085783">(</span><span class="num" id="4085784">255</span><span class="op" id="4085787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4085791">}</span>&nbsp;<span class="keyword" id="4085793">else</span>&nbsp;<span class="op" id="4085798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085803">return</span>&nbsp;<span class="ident" id="4085810">out</span><span class="op" id="4085813">.</span><span class="ident" id="4085814">WriteByte</span><span class="op" id="4085823">(</span><span class="num" id="4085824">0</span><span class="op" id="4085825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4085829">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085832">case</span>&nbsp;<span class="ident" id="4085837">reflect</span><span class="op" id="4085844">.</span><span class="ident" id="4085845">Int</span><span class="op" id="4085848">,</span>&nbsp;<span class="ident" id="4085850">reflect</span><span class="op" id="4085857">.</span><span class="ident" id="4085858">Int8</span><span class="op" id="4085862">,</span>&nbsp;<span class="ident" id="4085864">reflect</span><span class="op" id="4085871">.</span><span class="ident" id="4085872">Int16</span><span class="op" id="4085877">,</span>&nbsp;<span class="ident" id="4085879">reflect</span><span class="op" id="4085886">.</span><span class="ident" id="4085887">Int32</span><span class="op" id="4085892">,</span>&nbsp;<span class="ident" id="4085894">reflect</span><span class="op" id="4085901">.</span><span class="ident" id="4085902">Int64</span><span class="op" id="4085907">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085911">return</span>&nbsp;<span class="ident" id="4085918">marshalInt64</span><span class="op" id="4085930">(</span><span class="ident" id="4085931">out</span><span class="op" id="4085934">,</span>&nbsp;<span class="ident" id="4085936">int64</span><span class="op" id="4085941">(</span><span class="ident" id="4085942">v</span><span class="op" id="4085943">.</span><span class="ident" id="4085944">Int</span><span class="op" id="4085947">(</span><span class="op" id="4085948">)</span><span class="op" id="4085949">)</span><span class="op" id="4085950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4085953">case</span>&nbsp;<span class="ident" id="4085958">reflect</span><span class="op" id="4085965">.</span><span class="ident" id="4085966">Struct</span><span class="op" id="4085972">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4085976">t</span>&nbsp;<span class="op" id="4085978">:=</span>&nbsp;<span class="ident" id="4085981">v</span><span class="op" id="4085982">.</span><span class="ident" id="4085983">Type</span><span class="op" id="4085987">(</span><span class="op" id="4085988">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4085993">startingField</span>&nbsp;<span class="op" id="4086007">:=</span>&nbsp;<span class="num" id="4086010">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4086015">//&nbsp;If&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;the&nbsp;structure&nbsp;is&nbsp;a&nbsp;non-empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4086073">//&nbsp;RawContents,&nbsp;then&nbsp;we&nbsp;don&#39;t&nbsp;bother&nbsp;serializing&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086134">if</span>&nbsp;<span class="ident" id="4086137">t</span><span class="op" id="4086138">.</span><span class="ident" id="4086139">NumField</span><span class="op" id="4086147">(</span><span class="op" id="4086148">)</span>&nbsp;<span class="op" id="4086150">&gt;</span>&nbsp;<span class="num" id="4086152">0</span>&nbsp;<span class="op" id="4086154">&amp;&amp;</span>&nbsp;<span class="ident" id="4086157">t</span><span class="op" id="4086158">.</span><span class="ident" id="4086159">Field</span><span class="op" id="4086164">(</span><span class="num" id="4086165">0</span><span class="op" id="4086166">)</span><span class="op" id="4086167">.</span><span class="ident" id="4086168">Type</span>&nbsp;<span class="op" id="4086173">==</span>&nbsp;<span class="ident" id="4086176">rawContentsType</span>&nbsp;<span class="op" id="4086192">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4086197">s</span>&nbsp;<span class="op" id="4086199">:=</span>&nbsp;<span class="ident" id="4086202">v</span><span class="op" id="4086203">.</span><span class="ident" id="4086204">Field</span><span class="op" id="4086209">(</span><span class="num" id="4086210">0</span><span class="op" id="4086211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086216">if</span>&nbsp;<span class="ident" id="4086219">s</span><span class="op" id="4086220">.</span><span class="ident" id="4086221">Len</span><span class="op" id="4086224">(</span><span class="op" id="4086225">)</span>&nbsp;<span class="op" id="4086227">&gt;</span>&nbsp;<span class="num" id="4086229">0</span>&nbsp;<span class="op" id="4086231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4086237">bytes</span>&nbsp;<span class="op" id="4086243">:=</span>&nbsp;<span class="builtinfunc" id="4086246">make</span><span class="op" id="4086250">(</span><span class="op" id="4086251">[</span><span class="op" id="4086252">]</span><span class="builtintype" id="4086253">byte</span><span class="op" id="4086257">,</span>&nbsp;<span class="ident" id="4086259">s</span><span class="op" id="4086260">.</span><span class="ident" id="4086261">Len</span><span class="op" id="4086264">(</span><span class="op" id="4086265">)</span><span class="op" id="4086266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086272">for</span>&nbsp;<span class="ident" id="4086276">i</span>&nbsp;<span class="op" id="4086278">:=</span>&nbsp;<span class="num" id="4086281">0</span><span class="op" id="4086282">;</span>&nbsp;<span class="ident" id="4086284">i</span>&nbsp;<span class="op" id="4086286">&lt;</span>&nbsp;<span class="ident" id="4086288">s</span><span class="op" id="4086289">.</span><span class="ident" id="4086290">Len</span><span class="op" id="4086293">(</span><span class="op" id="4086294">)</span><span class="op" id="4086295">;</span>&nbsp;<span class="ident" id="4086297">i</span><span class="op" id="4086298">++</span>&nbsp;<span class="op" id="4086301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4086308">bytes</span><span class="op" id="4086313">[</span><span class="ident" id="4086314">i</span><span class="op" id="4086315">]</span>&nbsp;<span class="op" id="4086317">=</span>&nbsp;<span class="builtintype" id="4086319">uint8</span><span class="op" id="4086324">(</span><span class="ident" id="4086325">s</span><span class="op" id="4086326">.</span><span class="ident" id="4086327">Index</span><span class="op" id="4086332">(</span><span class="ident" id="4086333">i</span><span class="op" id="4086334">)</span><span class="op" id="4086335">.</span><span class="ident" id="4086336">Uint</span><span class="op" id="4086340">(</span><span class="op" id="4086341">)</span><span class="op" id="4086342">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4086348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4086354">/*&nbsp;The&nbsp;RawContents&nbsp;will&nbsp;contain&nbsp;the&nbsp;tag&nbsp;and<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;length&nbsp;fields&nbsp;but&nbsp;we&#39;ll&nbsp;also&nbsp;be&nbsp;writing<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;those&nbsp;ourselves,&nbsp;so&nbsp;we&nbsp;strip&nbsp;them&nbsp;out&nbsp;of<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;bytes&nbsp;*/</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4086513">_</span><span class="op" id="4086514">,</span>&nbsp;<span class="ident" id="4086516">err</span>&nbsp;<span class="op" id="4086520">=</span>&nbsp;<span class="ident" id="4086522">out</span><span class="op" id="4086525">.</span><span class="ident" id="4086526">Write</span><span class="op" id="4086531">(</span><span class="ident" id="4086532">stripTagAndLength</span><span class="op" id="4086549">(</span><span class="ident" id="4086550">bytes</span><span class="op" id="4086555">)</span><span class="op" id="4086556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086562">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4086572">}</span>&nbsp;<span class="keyword" id="4086574">else</span>&nbsp;<span class="op" id="4086579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4086585">startingField</span>&nbsp;<span class="op" id="4086599">=</span>&nbsp;<span class="num" id="4086601">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4086606">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4086610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086615">for</span>&nbsp;<span class="ident" id="4086619">i</span>&nbsp;<span class="op" id="4086621">:=</span>&nbsp;<span class="ident" id="4086624">startingField</span><span class="op" id="4086637">;</span>&nbsp;<span class="ident" id="4086639">i</span>&nbsp;<span class="op" id="4086641">&lt;</span>&nbsp;<span class="ident" id="4086643">t</span><span class="op" id="4086644">.</span><span class="ident" id="4086645">NumField</span><span class="op" id="4086653">(</span><span class="op" id="4086654">)</span><span class="op" id="4086655">;</span>&nbsp;<span class="ident" id="4086657">i</span><span class="op" id="4086658">++</span>&nbsp;<span class="op" id="4086661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086666">var</span>&nbsp;<span class="ident" id="4086670">pre</span>&nbsp;<span class="op" id="4086674">*</span><span class="ident" id="4086675">forkableWriter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4086693">pre</span><span class="op" id="4086696">,</span>&nbsp;<span class="ident" id="4086698">out</span>&nbsp;<span class="op" id="4086702">=</span>&nbsp;<span class="ident" id="4086704">out</span><span class="op" id="4086707">.</span><span class="ident" id="4086708">fork</span><span class="op" id="4086712">(</span><span class="op" id="4086713">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4086718">err</span>&nbsp;<span class="op" id="4086722">=</span>&nbsp;<span class="ident" id="4086724">marshalField</span><span class="op" id="4086736">(</span><span class="ident" id="4086737">pre</span><span class="op" id="4086740">,</span>&nbsp;<span class="ident" id="4086742">v</span><span class="op" id="4086743">.</span><span class="ident" id="4086744">Field</span><span class="op" id="4086749">(</span><span class="ident" id="4086750">i</span><span class="op" id="4086751">)</span><span class="op" id="4086752">,</span>&nbsp;<span class="ident" id="4086754">parseFieldParameters</span><span class="op" id="4086774">(</span><span class="ident" id="4086775">t</span><span class="op" id="4086776">.</span><span class="ident" id="4086777">Field</span><span class="op" id="4086782">(</span><span class="ident" id="4086783">i</span><span class="op" id="4086784">)</span><span class="op" id="4086785">.</span><span class="ident" id="4086786">Tag</span><span class="op" id="4086789">.</span><span class="ident" id="4086790">Get</span><span class="op" id="4086793">(</span><span class="string" id="4086794">&#34;asn1&#34;</span><span class="op" id="4086800">)</span><span class="op" id="4086801">)</span><span class="op" id="4086802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086807">if</span>&nbsp;<span class="ident" id="4086810">err</span>&nbsp;<span class="op" id="4086814">!=</span>&nbsp;<span class="builtintype" id="4086817">nil</span>&nbsp;<span class="op" id="4086821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086827">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4086837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4086841">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086845">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086853">case</span>&nbsp;<span class="ident" id="4086858">reflect</span><span class="op" id="4086865">.</span><span class="ident" id="4086866">Slice</span><span class="op" id="4086871">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4086875">sliceType</span>&nbsp;<span class="op" id="4086885">:=</span>&nbsp;<span class="ident" id="4086888">v</span><span class="op" id="4086889">.</span><span class="ident" id="4086890">Type</span><span class="op" id="4086894">(</span><span class="op" id="4086895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086899">if</span>&nbsp;<span class="ident" id="4086902">sliceType</span><span class="op" id="4086911">.</span><span class="ident" id="4086912">Elem</span><span class="op" id="4086916">(</span><span class="op" id="4086917">)</span><span class="op" id="4086918">.</span><span class="ident" id="4086919">Kind</span><span class="op" id="4086923">(</span><span class="op" id="4086924">)</span>&nbsp;<span class="op" id="4086926">==</span>&nbsp;<span class="ident" id="4086929">reflect</span><span class="op" id="4086936">.</span><span class="ident" id="4086937">Uint8</span>&nbsp;<span class="op" id="4086943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4086948">bytes</span>&nbsp;<span class="op" id="4086954">:=</span>&nbsp;<span class="builtinfunc" id="4086957">make</span><span class="op" id="4086961">(</span><span class="op" id="4086962">[</span><span class="op" id="4086963">]</span><span class="builtintype" id="4086964">byte</span><span class="op" id="4086968">,</span>&nbsp;<span class="ident" id="4086970">v</span><span class="op" id="4086971">.</span><span class="ident" id="4086972">Len</span><span class="op" id="4086975">(</span><span class="op" id="4086976">)</span><span class="op" id="4086977">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4086982">for</span>&nbsp;<span class="ident" id="4086986">i</span>&nbsp;<span class="op" id="4086988">:=</span>&nbsp;<span class="num" id="4086991">0</span><span class="op" id="4086992">;</span>&nbsp;<span class="ident" id="4086994">i</span>&nbsp;<span class="op" id="4086996">&lt;</span>&nbsp;<span class="ident" id="4086998">v</span><span class="op" id="4086999">.</span><span class="ident" id="4087000">Len</span><span class="op" id="4087003">(</span><span class="op" id="4087004">)</span><span class="op" id="4087005">;</span>&nbsp;<span class="ident" id="4087007">i</span><span class="op" id="4087008">++</span>&nbsp;<span class="op" id="4087011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4087017">bytes</span><span class="op" id="4087022">[</span><span class="ident" id="4087023">i</span><span class="op" id="4087024">]</span>&nbsp;<span class="op" id="4087026">=</span>&nbsp;<span class="builtintype" id="4087028">uint8</span><span class="op" id="4087033">(</span><span class="ident" id="4087034">v</span><span class="op" id="4087035">.</span><span class="ident" id="4087036">Index</span><span class="op" id="4087041">(</span><span class="ident" id="4087042">i</span><span class="op" id="4087043">)</span><span class="op" id="4087044">.</span><span class="ident" id="4087045">Uint</span><span class="op" id="4087049">(</span><span class="op" id="4087050">)</span><span class="op" id="4087051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4087056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4087061">_</span><span class="op" id="4087062">,</span>&nbsp;<span class="ident" id="4087064">err</span>&nbsp;<span class="op" id="4087068">=</span>&nbsp;<span class="ident" id="4087070">out</span><span class="op" id="4087073">.</span><span class="ident" id="4087074">Write</span><span class="op" id="4087079">(</span><span class="ident" id="4087080">bytes</span><span class="op" id="4087085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087090">return</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4087099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087104">var</span>&nbsp;<span class="ident" id="4087108">fp</span>&nbsp;<span class="ident" id="4087111">fieldParameters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087129">for</span>&nbsp;<span class="ident" id="4087133">i</span>&nbsp;<span class="op" id="4087135">:=</span>&nbsp;<span class="num" id="4087138">0</span><span class="op" id="4087139">;</span>&nbsp;<span class="ident" id="4087141">i</span>&nbsp;<span class="op" id="4087143">&lt;</span>&nbsp;<span class="ident" id="4087145">v</span><span class="op" id="4087146">.</span><span class="ident" id="4087147">Len</span><span class="op" id="4087150">(</span><span class="op" id="4087151">)</span><span class="op" id="4087152">;</span>&nbsp;<span class="ident" id="4087154">i</span><span class="op" id="4087155">++</span>&nbsp;<span class="op" id="4087158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087163">var</span>&nbsp;<span class="ident" id="4087167">pre</span>&nbsp;<span class="op" id="4087171">*</span><span class="ident" id="4087172">forkableWriter</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4087190">pre</span><span class="op" id="4087193">,</span>&nbsp;<span class="ident" id="4087195">out</span>&nbsp;<span class="op" id="4087199">=</span>&nbsp;<span class="ident" id="4087201">out</span><span class="op" id="4087204">.</span><span class="ident" id="4087205">fork</span><span class="op" id="4087209">(</span><span class="op" id="4087210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4087215">err</span>&nbsp;<span class="op" id="4087219">=</span>&nbsp;<span class="ident" id="4087221">marshalField</span><span class="op" id="4087233">(</span><span class="ident" id="4087234">pre</span><span class="op" id="4087237">,</span>&nbsp;<span class="ident" id="4087239">v</span><span class="op" id="4087240">.</span><span class="ident" id="4087241">Index</span><span class="op" id="4087246">(</span><span class="ident" id="4087247">i</span><span class="op" id="4087248">)</span><span class="op" id="4087249">,</span>&nbsp;<span class="ident" id="4087251">fp</span><span class="op" id="4087253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087258">if</span>&nbsp;<span class="ident" id="4087261">err</span>&nbsp;<span class="op" id="4087265">!=</span>&nbsp;<span class="builtintype" id="4087268">nil</span>&nbsp;<span class="op" id="4087272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087278">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4087288">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4087292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087296">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087304">case</span>&nbsp;<span class="ident" id="4087309">reflect</span><span class="op" id="4087316">.</span><span class="ident" id="4087317">String</span><span class="op" id="4087323">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087327">switch</span>&nbsp;<span class="ident" id="4087334">params</span><span class="op" id="4087340">.</span><span class="ident" id="4087341">stringType</span>&nbsp;<span class="op" id="4087352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087356">case</span>&nbsp;<span class="ident" id="4087361">tagIA5String</span><span class="op" id="4087373">:</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087378">return</span>&nbsp;<span class="ident" id="4087385">marshalIA5String</span><span class="op" id="4087401">(</span><span class="ident" id="4087402">out</span><span class="op" id="4087405">,</span>&nbsp;<span class="ident" id="4087407">v</span><span class="op" id="4087408">.</span><span class="ident" id="4087409">String</span><span class="op" id="4087415">(</span><span class="op" id="4087416">)</span><span class="op" id="4087417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087421">case</span>&nbsp;<span class="ident" id="4087426">tagPrintableString</span><span class="op" id="4087444">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087449">return</span>&nbsp;<span class="ident" id="4087456">marshalPrintableString</span><span class="op" id="4087478">(</span><span class="ident" id="4087479">out</span><span class="op" id="4087482">,</span>&nbsp;<span class="ident" id="4087484">v</span><span class="op" id="4087485">.</span><span class="ident" id="4087486">String</span><span class="op" id="4087492">(</span><span class="op" id="4087493">)</span><span class="op" id="4087494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087498">default</span><span class="op" id="4087505">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087510">return</span>&nbsp;<span class="ident" id="4087517">marshalUTF8String</span><span class="op" id="4087534">(</span><span class="ident" id="4087535">out</span><span class="op" id="4087538">,</span>&nbsp;<span class="ident" id="4087540">v</span><span class="op" id="4087541">.</span><span class="ident" id="4087542">String</span><span class="op" id="4087548">(</span><span class="op" id="4087549">)</span><span class="op" id="4087550">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4087554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4087557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087561">return</span>&nbsp;<span class="ident" id="4087568">StructuralError</span><span class="op" id="4087583">{</span><span class="string" id="4087584">&#34;unknown&nbsp;Go&nbsp;type&#34;</span><span class="op" id="4087601">}</span><br>
<span class="lineno"></span><span class="op" id="4087603">}</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span><span class="keyword" id="4087606">func</span>&nbsp;<span class="ident" id="4087611">marshalField</span><span class="op" id="4087623">(</span><span class="ident" id="4087624">out</span>&nbsp;<span class="op" id="4087628">*</span><span class="ident" id="4087629">forkableWriter</span><span class="op" id="4087643">,</span>&nbsp;<span class="ident" id="4087645">v</span>&nbsp;<span class="ident" id="4087647">reflect</span><span class="op" id="4087654">.</span><span class="ident" id="4087655">Value</span><span class="op" id="4087660">,</span>&nbsp;<span class="ident" id="4087662">params</span>&nbsp;<span class="ident" id="4087669">fieldParameters</span><span class="op" id="4087684">)</span>&nbsp;<span class="op" id="4087686">(</span><span class="ident" id="4087687">err</span>&nbsp;<span class="builtintype" id="4087691">error</span><span class="op" id="4087696">)</span>&nbsp;<span class="op" id="4087698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4087701">//&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;an&nbsp;interface{}&nbsp;then&nbsp;recurse&nbsp;into&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087758">if</span>&nbsp;<span class="ident" id="4087761">v</span><span class="op" id="4087762">.</span><span class="ident" id="4087763">Kind</span><span class="op" id="4087767">(</span><span class="op" id="4087768">)</span>&nbsp;<span class="op" id="4087770">==</span>&nbsp;<span class="ident" id="4087773">reflect</span><span class="op" id="4087780">.</span><span class="ident" id="4087781">Interface</span>&nbsp;<span class="op" id="4087791">&amp;&amp;</span>&nbsp;<span class="ident" id="4087794">v</span><span class="op" id="4087795">.</span><span class="ident" id="4087796">Type</span><span class="op" id="4087800">(</span><span class="op" id="4087801">)</span><span class="op" id="4087802">.</span><span class="ident" id="4087803">NumMethod</span><span class="op" id="4087812">(</span><span class="op" id="4087813">)</span>&nbsp;<span class="op" id="4087815">==</span>&nbsp;<span class="num" id="4087818">0</span>&nbsp;<span class="op" id="4087820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087824">return</span>&nbsp;<span class="ident" id="4087831">marshalField</span><span class="op" id="4087843">(</span><span class="ident" id="4087844">out</span><span class="op" id="4087847">,</span>&nbsp;<span class="ident" id="4087849">v</span><span class="op" id="4087850">.</span><span class="ident" id="4087851">Elem</span><span class="op" id="4087855">(</span><span class="op" id="4087856">)</span><span class="op" id="4087857">,</span>&nbsp;<span class="ident" id="4087859">params</span><span class="op" id="4087865">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4087868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087872">if</span>&nbsp;<span class="ident" id="4087875">v</span><span class="op" id="4087876">.</span><span class="ident" id="4087877">Kind</span><span class="op" id="4087881">(</span><span class="op" id="4087882">)</span>&nbsp;<span class="op" id="4087884">==</span>&nbsp;<span class="ident" id="4087887">reflect</span><span class="op" id="4087894">.</span><span class="ident" id="4087895">Slice</span>&nbsp;<span class="op" id="4087901">&amp;&amp;</span>&nbsp;<span class="ident" id="4087904">v</span><span class="op" id="4087905">.</span><span class="ident" id="4087906">Len</span><span class="op" id="4087909">(</span><span class="op" id="4087910">)</span>&nbsp;<span class="op" id="4087912">==</span>&nbsp;<span class="num" id="4087915">0</span>&nbsp;<span class="op" id="4087917">&amp;&amp;</span>&nbsp;<span class="ident" id="4087920">params</span><span class="op" id="4087926">.</span><span class="ident" id="4087927">omitEmpty</span>&nbsp;<span class="op" id="4087937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087941">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4087949">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4087953">if</span>&nbsp;<span class="ident" id="4087956">params</span><span class="op" id="4087962">.</span><span class="ident" id="4087963">optional</span>&nbsp;<span class="op" id="4087972">&amp;&amp;</span>&nbsp;<span class="ident" id="4087975">params</span><span class="op" id="4087981">.</span><span class="ident" id="4087982">defaultValue</span>&nbsp;<span class="op" id="4087995">!=</span>&nbsp;<span class="builtintype" id="4087998">nil</span>&nbsp;<span class="op" id="4088002">&amp;&amp;</span>&nbsp;<span class="ident" id="4088005">canHaveDefaultValue</span><span class="op" id="4088024">(</span><span class="ident" id="4088025">v</span><span class="op" id="4088026">.</span><span class="ident" id="4088027">Kind</span><span class="op" id="4088031">(</span><span class="op" id="4088032">)</span><span class="op" id="4088033">)</span>&nbsp;<span class="op" id="4088035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088039">defaultValue</span>&nbsp;<span class="op" id="4088052">:=</span>&nbsp;<span class="ident" id="4088055">reflect</span><span class="op" id="4088062">.</span><span class="ident" id="4088063">New</span><span class="op" id="4088066">(</span><span class="ident" id="4088067">v</span><span class="op" id="4088068">.</span><span class="ident" id="4088069">Type</span><span class="op" id="4088073">(</span><span class="op" id="4088074">)</span><span class="op" id="4088075">)</span><span class="op" id="4088076">.</span><span class="ident" id="4088077">Elem</span><span class="op" id="4088081">(</span><span class="op" id="4088082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088086">defaultValue</span><span class="op" id="4088098">.</span><span class="ident" id="4088099">SetInt</span><span class="op" id="4088105">(</span><span class="op" id="4088106">*</span><span class="ident" id="4088107">params</span><span class="op" id="4088113">.</span><span class="ident" id="4088114">defaultValue</span><span class="op" id="4088126">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088131">if</span>&nbsp;<span class="ident" id="4088134">reflect</span><span class="op" id="4088141">.</span><span class="ident" id="4088142">DeepEqual</span><span class="op" id="4088151">(</span><span class="ident" id="4088152">v</span><span class="op" id="4088153">.</span><span class="ident" id="4088154">Interface</span><span class="op" id="4088163">(</span><span class="op" id="4088164">)</span><span class="op" id="4088165">,</span>&nbsp;<span class="ident" id="4088167">defaultValue</span><span class="op" id="4088179">.</span><span class="ident" id="4088180">Interface</span><span class="op" id="4088189">(</span><span class="op" id="4088190">)</span><span class="op" id="4088191">)</span>&nbsp;<span class="op" id="4088193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088198">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4088207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4088210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4088214">//&nbsp;If&nbsp;no&nbsp;default&nbsp;value&nbsp;is&nbsp;given&nbsp;then&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;type&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4088283">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;the&nbsp;default&nbsp;value.&nbsp;This&nbsp;isn&#39;t&nbsp;obviously&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4088353">//&nbsp;behaviour,&nbsp;but&nbsp;it&#39;s&nbsp;what&nbsp;Go&nbsp;has&nbsp;traditionally&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088409">if</span>&nbsp;<span class="ident" id="4088412">params</span><span class="op" id="4088418">.</span><span class="ident" id="4088419">optional</span>&nbsp;<span class="op" id="4088428">&amp;&amp;</span>&nbsp;<span class="ident" id="4088431">params</span><span class="op" id="4088437">.</span><span class="ident" id="4088438">defaultValue</span>&nbsp;<span class="op" id="4088451">==</span>&nbsp;<span class="builtintype" id="4088454">nil</span>&nbsp;<span class="op" id="4088458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088462">if</span>&nbsp;<span class="ident" id="4088465">reflect</span><span class="op" id="4088472">.</span><span class="ident" id="4088473">DeepEqual</span><span class="op" id="4088482">(</span><span class="ident" id="4088483">v</span><span class="op" id="4088484">.</span><span class="ident" id="4088485">Interface</span><span class="op" id="4088494">(</span><span class="op" id="4088495">)</span><span class="op" id="4088496">,</span>&nbsp;<span class="ident" id="4088498">reflect</span><span class="op" id="4088505">.</span><span class="ident" id="4088506">Zero</span><span class="op" id="4088510">(</span><span class="ident" id="4088511">v</span><span class="op" id="4088512">.</span><span class="ident" id="4088513">Type</span><span class="op" id="4088517">(</span><span class="op" id="4088518">)</span><span class="op" id="4088519">)</span><span class="op" id="4088520">.</span><span class="ident" id="4088521">Interface</span><span class="op" id="4088530">(</span><span class="op" id="4088531">)</span><span class="op" id="4088532">)</span>&nbsp;<span class="op" id="4088534">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088539">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4088548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4088551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088555">if</span>&nbsp;<span class="ident" id="4088558">v</span><span class="op" id="4088559">.</span><span class="ident" id="4088560">Type</span><span class="op" id="4088564">(</span><span class="op" id="4088565">)</span>&nbsp;<span class="op" id="4088567">==</span>&nbsp;<span class="ident" id="4088570">rawValueType</span>&nbsp;<span class="op" id="4088583">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088587">rv</span>&nbsp;<span class="op" id="4088590">:=</span>&nbsp;<span class="ident" id="4088593">v</span><span class="op" id="4088594">.</span><span class="ident" id="4088595">Interface</span><span class="op" id="4088604">(</span><span class="op" id="4088605">)</span><span class="op" id="4088606">.</span><span class="op" id="4088607">(</span><span class="ident" id="4088608">RawValue</span><span class="op" id="4088616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088620">if</span>&nbsp;<span class="builtinfunc" id="4088623">len</span><span class="op" id="4088626">(</span><span class="ident" id="4088627">rv</span><span class="op" id="4088629">.</span><span class="ident" id="4088630">FullBytes</span><span class="op" id="4088639">)</span>&nbsp;<span class="op" id="4088641">!=</span>&nbsp;<span class="num" id="4088644">0</span>&nbsp;<span class="op" id="4088646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088651">_</span><span class="op" id="4088652">,</span>&nbsp;<span class="ident" id="4088654">err</span>&nbsp;<span class="op" id="4088658">=</span>&nbsp;<span class="ident" id="4088660">out</span><span class="op" id="4088663">.</span><span class="ident" id="4088664">Write</span><span class="op" id="4088669">(</span><span class="ident" id="4088670">rv</span><span class="op" id="4088672">.</span><span class="ident" id="4088673">FullBytes</span><span class="op" id="4088682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4088686">}</span>&nbsp;<span class="keyword" id="4088688">else</span>&nbsp;<span class="op" id="4088693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088698">err</span>&nbsp;<span class="op" id="4088702">=</span>&nbsp;<span class="ident" id="4088704">marshalTagAndLength</span><span class="op" id="4088723">(</span><span class="ident" id="4088724">out</span><span class="op" id="4088727">,</span>&nbsp;<span class="ident" id="4088729">tagAndLength</span><span class="op" id="4088741">{</span><span class="ident" id="4088742">rv</span><span class="op" id="4088744">.</span><span class="ident" id="4088745">Class</span><span class="op" id="4088750">,</span>&nbsp;<span class="ident" id="4088752">rv</span><span class="op" id="4088754">.</span><span class="ident" id="4088755">Tag</span><span class="op" id="4088758">,</span>&nbsp;<span class="builtinfunc" id="4088760">len</span><span class="op" id="4088763">(</span><span class="ident" id="4088764">rv</span><span class="op" id="4088766">.</span><span class="ident" id="4088767">Bytes</span><span class="op" id="4088772">)</span><span class="op" id="4088773">,</span>&nbsp;<span class="ident" id="4088775">rv</span><span class="op" id="4088777">.</span><span class="ident" id="4088778">IsCompound</span><span class="op" id="4088788">}</span><span class="op" id="4088789">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088794">if</span>&nbsp;<span class="ident" id="4088797">err</span>&nbsp;<span class="op" id="4088801">!=</span>&nbsp;<span class="builtintype" id="4088804">nil</span>&nbsp;<span class="op" id="4088808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088814">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4088824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088829">_</span><span class="op" id="4088830">,</span>&nbsp;<span class="ident" id="4088832">err</span>&nbsp;<span class="op" id="4088836">=</span>&nbsp;<span class="ident" id="4088838">out</span><span class="op" id="4088841">.</span><span class="ident" id="4088842">Write</span><span class="op" id="4088847">(</span><span class="ident" id="4088848">rv</span><span class="op" id="4088850">.</span><span class="ident" id="4088851">Bytes</span><span class="op" id="4088856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4088860">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088864">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4088872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088876">tag</span><span class="op" id="4088879">,</span>&nbsp;<span class="ident" id="4088881">isCompound</span><span class="op" id="4088891">,</span>&nbsp;<span class="ident" id="4088893">ok</span>&nbsp;<span class="op" id="4088896">:=</span>&nbsp;<span class="ident" id="4088899">getUniversalType</span><span class="op" id="4088915">(</span><span class="ident" id="4088916">v</span><span class="op" id="4088917">.</span><span class="ident" id="4088918">Type</span><span class="op" id="4088922">(</span><span class="op" id="4088923">)</span><span class="op" id="4088924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088927">if</span>&nbsp;<span class="op" id="4088930">!</span><span class="ident" id="4088931">ok</span>&nbsp;<span class="op" id="4088934">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088938">err</span>&nbsp;<span class="op" id="4088942">=</span>&nbsp;<span class="ident" id="4088944">StructuralError</span><span class="op" id="4088959">{</span><span class="ident" id="4088960">fmt</span><span class="op" id="4088963">.</span><span class="ident" id="4088964">Sprintf</span><span class="op" id="4088971">(</span><span class="string" id="4088972">&#34;unknown&nbsp;Go&nbsp;type:&nbsp;%v&#34;</span><span class="op" id="4088993">,</span>&nbsp;<span class="ident" id="4088995">v</span><span class="op" id="4088996">.</span><span class="ident" id="4088997">Type</span><span class="op" id="4089001">(</span><span class="op" id="4089002">)</span><span class="op" id="4089003">)</span><span class="op" id="4089004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089008">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089019">class</span>&nbsp;<span class="op" id="4089025">:=</span>&nbsp;<span class="ident" id="4089028">classUniversal</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089045">if</span>&nbsp;<span class="ident" id="4089048">params</span><span class="op" id="4089054">.</span><span class="ident" id="4089055">stringType</span>&nbsp;<span class="op" id="4089066">!=</span>&nbsp;<span class="num" id="4089069">0</span>&nbsp;<span class="op" id="4089071">&amp;&amp;</span>&nbsp;<span class="ident" id="4089074">tag</span>&nbsp;<span class="op" id="4089078">!=</span>&nbsp;<span class="ident" id="4089081">tagPrintableString</span>&nbsp;<span class="op" id="4089100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089104">return</span>&nbsp;<span class="ident" id="4089111">StructuralError</span><span class="op" id="4089126">{</span><span class="string" id="4089127">&#34;explicit&nbsp;string&nbsp;type&nbsp;given&nbsp;to&nbsp;non-string&nbsp;member&#34;</span><span class="op" id="4089176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089183">switch</span>&nbsp;<span class="ident" id="4089190">tag</span>&nbsp;<span class="op" id="4089194">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089197">case</span>&nbsp;<span class="ident" id="4089202">tagPrintableString</span><span class="op" id="4089220">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089224">if</span>&nbsp;<span class="ident" id="4089227">params</span><span class="op" id="4089233">.</span><span class="ident" id="4089234">stringType</span>&nbsp;<span class="op" id="4089245">==</span>&nbsp;<span class="num" id="4089248">0</span>&nbsp;<span class="op" id="4089250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4089255">//&nbsp;This&nbsp;is&nbsp;a&nbsp;string&nbsp;without&nbsp;an&nbsp;explicit&nbsp;string&nbsp;type.&nbsp;We&#39;ll&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4089321">//&nbsp;a&nbsp;PrintableString&nbsp;if&nbsp;the&nbsp;character&nbsp;set&nbsp;in&nbsp;the&nbsp;string&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4089383">//&nbsp;sufficiently&nbsp;limited,&nbsp;otherwise&nbsp;we&#39;ll&nbsp;use&nbsp;a&nbsp;UTF8String.</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089445">for</span>&nbsp;<span class="ident" id="4089449">_</span><span class="op" id="4089450">,</span>&nbsp;<span class="ident" id="4089452">r</span>&nbsp;<span class="op" id="4089454">:=</span>&nbsp;<span class="keyword" id="4089457">range</span>&nbsp;<span class="ident" id="4089463">v</span><span class="op" id="4089464">.</span><span class="ident" id="4089465">String</span><span class="op" id="4089471">(</span><span class="op" id="4089472">)</span>&nbsp;<span class="op" id="4089474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089480">if</span>&nbsp;<span class="ident" id="4089483">r</span>&nbsp;<span class="op" id="4089485">&gt;=</span>&nbsp;<span class="ident" id="4089488">utf8</span><span class="op" id="4089492">.</span><span class="ident" id="4089493">RuneSelf</span>&nbsp;<span class="op" id="4089502">||</span>&nbsp;<span class="op" id="4089505">!</span><span class="ident" id="4089506">isPrintable</span><span class="op" id="4089517">(</span><span class="builtintype" id="4089518">byte</span><span class="op" id="4089522">(</span><span class="ident" id="4089523">r</span><span class="op" id="4089524">)</span><span class="op" id="4089525">)</span>&nbsp;<span class="op" id="4089527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089534">if</span>&nbsp;<span class="op" id="4089537">!</span><span class="ident" id="4089538">utf8</span><span class="op" id="4089542">.</span><span class="ident" id="4089543">ValidString</span><span class="op" id="4089554">(</span><span class="ident" id="4089555">v</span><span class="op" id="4089556">.</span><span class="ident" id="4089557">String</span><span class="op" id="4089563">(</span><span class="op" id="4089564">)</span><span class="op" id="4089565">)</span>&nbsp;<span class="op" id="4089567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089575">return</span>&nbsp;<span class="ident" id="4089582">errors</span><span class="op" id="4089588">.</span><span class="ident" id="4089589">New</span><span class="op" id="4089592">(</span><span class="string" id="4089593">&#34;asn1:&nbsp;string&nbsp;not&nbsp;valid&nbsp;UTF-8&#34;</span><span class="op" id="4089623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089630">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089637">tag</span>&nbsp;<span class="op" id="4089641">=</span>&nbsp;<span class="ident" id="4089643">tagUTF8String</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089662">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089681">}</span>&nbsp;<span class="keyword" id="4089683">else</span>&nbsp;<span class="op" id="4089688">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089693">tag</span>&nbsp;<span class="op" id="4089697">=</span>&nbsp;<span class="ident" id="4089699">params</span><span class="op" id="4089705">.</span><span class="ident" id="4089706">stringType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089722">case</span>&nbsp;<span class="ident" id="4089727">tagUTCTime</span><span class="op" id="4089737">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089741">if</span>&nbsp;<span class="ident" id="4089744">outsideUTCRange</span><span class="op" id="4089759">(</span><span class="ident" id="4089760">v</span><span class="op" id="4089761">.</span><span class="ident" id="4089762">Interface</span><span class="op" id="4089771">(</span><span class="op" id="4089772">)</span><span class="op" id="4089773">.</span><span class="op" id="4089774">(</span><span class="ident" id="4089775">time</span><span class="op" id="4089779">.</span><span class="ident" id="4089780">Time</span><span class="op" id="4089784">)</span><span class="op" id="4089785">)</span>&nbsp;<span class="op" id="4089787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089792">tag</span>&nbsp;<span class="op" id="4089796">=</span>&nbsp;<span class="ident" id="4089798">tagGeneralizedTime</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089826">if</span>&nbsp;<span class="ident" id="4089829">params</span><span class="op" id="4089835">.</span><span class="ident" id="4089836">set</span>&nbsp;<span class="op" id="4089840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089844">if</span>&nbsp;<span class="ident" id="4089847">tag</span>&nbsp;<span class="op" id="4089851">!=</span>&nbsp;<span class="ident" id="4089854">tagSequence</span>&nbsp;<span class="op" id="4089866">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089871">return</span>&nbsp;<span class="ident" id="4089878">StructuralError</span><span class="op" id="4089893">{</span><span class="string" id="4089894">&#34;non&nbsp;sequence&nbsp;tagged&nbsp;as&nbsp;set&#34;</span><span class="op" id="4089922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089930">tag</span>&nbsp;<span class="op" id="4089934">=</span>&nbsp;<span class="ident" id="4089936">tagSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089948">tags</span><span class="op" id="4089952">,</span>&nbsp;<span class="ident" id="4089954">body</span>&nbsp;<span class="op" id="4089959">:=</span>&nbsp;<span class="ident" id="4089962">out</span><span class="op" id="4089965">.</span><span class="ident" id="4089966">fork</span><span class="op" id="4089970">(</span><span class="op" id="4089971">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089975">err</span>&nbsp;<span class="op" id="4089979">=</span>&nbsp;<span class="ident" id="4089981">marshalBody</span><span class="op" id="4089992">(</span><span class="ident" id="4089993">body</span><span class="op" id="4089997">,</span>&nbsp;<span class="ident" id="4089999">v</span><span class="op" id="4090000">,</span>&nbsp;<span class="ident" id="4090002">params</span><span class="op" id="4090008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4090011">if</span>&nbsp;<span class="ident" id="4090014">err</span>&nbsp;<span class="op" id="4090018">!=</span>&nbsp;<span class="builtintype" id="4090021">nil</span>&nbsp;<span class="op" id="4090025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4090029">return</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4090037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090041">bodyLen</span>&nbsp;<span class="op" id="4090049">:=</span>&nbsp;<span class="ident" id="4090052">body</span><span class="op" id="4090056">.</span><span class="ident" id="4090057">Len</span><span class="op" id="4090060">(</span><span class="op" id="4090061">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4090065">var</span>&nbsp;<span class="ident" id="4090069">explicitTag</span>&nbsp;<span class="op" id="4090081">*</span><span class="ident" id="4090082">forkableWriter</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4090098">if</span>&nbsp;<span class="ident" id="4090101">params</span><span class="op" id="4090107">.</span><span class="ident" id="4090108">explicit</span>&nbsp;<span class="op" id="4090117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090121">explicitTag</span><span class="op" id="4090132">,</span>&nbsp;<span class="ident" id="4090134">tags</span>&nbsp;<span class="op" id="4090139">=</span>&nbsp;<span class="ident" id="4090141">tags</span><span class="op" id="4090145">.</span><span class="ident" id="4090146">fork</span><span class="op" id="4090150">(</span><span class="op" id="4090151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4090154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4090158">if</span>&nbsp;<span class="op" id="4090161">!</span><span class="ident" id="4090162">params</span><span class="op" id="4090168">.</span><span class="ident" id="4090169">explicit</span>&nbsp;<span class="op" id="4090178">&amp;&amp;</span>&nbsp;<span class="ident" id="4090181">params</span><span class="op" id="4090187">.</span><span class="ident" id="4090188">tag</span>&nbsp;<span class="op" id="4090192">!=</span>&nbsp;<span class="builtintype" id="4090195">nil</span>&nbsp;<span class="op" id="4090199">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4090203">//&nbsp;implicit&nbsp;tag.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090222">tag</span>&nbsp;<span class="op" id="4090226">=</span>&nbsp;<span class="op" id="4090228">*</span><span class="ident" id="4090229">params</span><span class="op" id="4090235">.</span><span class="ident" id="4090236">tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090242">class</span>&nbsp;<span class="op" id="4090248">=</span>&nbsp;<span class="ident" id="4090250">classContextSpecific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4090272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090276">err</span>&nbsp;<span class="op" id="4090280">=</span>&nbsp;<span class="ident" id="4090282">marshalTagAndLength</span><span class="op" id="4090301">(</span><span class="ident" id="4090302">tags</span><span class="op" id="4090306">,</span>&nbsp;<span class="ident" id="4090308">tagAndLength</span><span class="op" id="4090320">{</span><span class="ident" id="4090321">class</span><span class="op" id="4090326">,</span>&nbsp;<span class="ident" id="4090328">tag</span><span class="op" id="4090331">,</span>&nbsp;<span class="ident" id="4090333">bodyLen</span><span class="op" id="4090340">,</span>&nbsp;<span class="ident" id="4090342">isCompound</span><span class="op" id="4090352">}</span><span class="op" id="4090353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4090356">if</span>&nbsp;<span class="ident" id="4090359">err</span>&nbsp;<span class="op" id="4090363">!=</span>&nbsp;<span class="builtintype" id="4090366">nil</span>&nbsp;<span class="op" id="4090370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4090374">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4090382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4090386">if</span>&nbsp;<span class="ident" id="4090389">params</span><span class="op" id="4090395">.</span><span class="ident" id="4090396">explicit</span>&nbsp;<span class="op" id="4090405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090409">err</span>&nbsp;<span class="op" id="4090413">=</span>&nbsp;<span class="ident" id="4090415">marshalTagAndLength</span><span class="op" id="4090434">(</span><span class="ident" id="4090435">explicitTag</span><span class="op" id="4090446">,</span>&nbsp;<span class="ident" id="4090448">tagAndLength</span><span class="op" id="4090460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090465">class</span><span class="op" id="4090470">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090477">classContextSpecific</span><span class="op" id="4090497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090502">tag</span><span class="op" id="4090505">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4090514">*</span><span class="ident" id="4090515">params</span><span class="op" id="4090521">.</span><span class="ident" id="4090522">tag</span><span class="op" id="4090525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090530">length</span><span class="op" id="4090536">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090542">bodyLen</span>&nbsp;<span class="op" id="4090550">+</span>&nbsp;<span class="ident" id="4090552">tags</span><span class="op" id="4090556">.</span><span class="ident" id="4090557">Len</span><span class="op" id="4090560">(</span><span class="op" id="4090561">)</span><span class="op" id="4090562">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090567">isCompound</span><span class="op" id="4090577">:</span>&nbsp;<span class="builtintype" id="4090579">true</span><span class="op" id="4090583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4090587">}</span><span class="op" id="4090588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4090591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4090595">return</span>&nbsp;<span class="builtintype" id="4090602">nil</span><br>
<span class="lineno">625</span><span class="op" id="4090606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4090609">//&nbsp;Marshal&nbsp;returns&nbsp;the&nbsp;ASN.1&nbsp;encoding&nbsp;of&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="4090655">//</span><br>
<span class="lineno"></span><span class="comment" id="4090658">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;struct&nbsp;tags&nbsp;recognised&nbsp;by&nbsp;Unmarshal,&nbsp;the&nbsp;following&nbsp;can&nbsp;be</span><br>
<span class="lineno">630</span><span class="comment" id="4090738">//&nbsp;used:</span><br>
<span class="lineno"></span><span class="comment" id="4090747">//</span><br>
<span class="lineno"></span><span class="comment" id="4090750">//&nbsp;&nbsp;&nbsp;&nbsp;ia5:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;IA5&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="4090812">//&nbsp;&nbsp;&nbsp;&nbsp;omitempty:&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;empty&nbsp;slices&nbsp;to&nbsp;be&nbsp;skipped</span><br>
<span class="lineno"></span><span class="comment" id="4090860">//&nbsp;&nbsp;&nbsp;&nbsp;printable:&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;PrintableString&nbsp;strings.</span><br>
<span class="lineno">635</span><span class="comment" id="4090940">//&nbsp;&nbsp;&nbsp;&nbsp;utf8:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;UTF8&nbsp;strings</span><br>
<span class="lineno"></span><span class="keyword" id="4091004">func</span>&nbsp;<span class="ident" id="4091009">Marshal</span><span class="op" id="4091016">(</span><span class="ident" id="4091017">val</span>&nbsp;<span class="keyword" id="4091021">interface</span><span class="op" id="4091030">{</span><span class="op" id="4091031">}</span><span class="op" id="4091032">)</span>&nbsp;<span class="op" id="4091034">(</span><span class="op" id="4091035">[</span><span class="op" id="4091036">]</span><span class="builtintype" id="4091037">byte</span><span class="op" id="4091041">,</span>&nbsp;<span class="builtintype" id="4091043">error</span><span class="op" id="4091048">)</span>&nbsp;<span class="op" id="4091050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091053">var</span>&nbsp;<span class="ident" id="4091057">out</span>&nbsp;<span class="ident" id="4091061">bytes</span><span class="op" id="4091066">.</span><span class="ident" id="4091067">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091075">v</span>&nbsp;<span class="op" id="4091077">:=</span>&nbsp;<span class="ident" id="4091080">reflect</span><span class="op" id="4091087">.</span><span class="ident" id="4091088">ValueOf</span><span class="op" id="4091095">(</span><span class="ident" id="4091096">val</span><span class="op" id="4091099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091102">f</span>&nbsp;<span class="op" id="4091104">:=</span>&nbsp;<span class="ident" id="4091107">newForkableWriter</span><span class="op" id="4091124">(</span><span class="op" id="4091125">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091128">err</span>&nbsp;<span class="op" id="4091132">:=</span>&nbsp;<span class="ident" id="4091135">marshalField</span><span class="op" id="4091147">(</span><span class="ident" id="4091148">f</span><span class="op" id="4091149">,</span>&nbsp;<span class="ident" id="4091151">v</span><span class="op" id="4091152">,</span>&nbsp;<span class="ident" id="4091154">fieldParameters</span><span class="op" id="4091169">{</span><span class="op" id="4091170">}</span><span class="op" id="4091171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091174">if</span>&nbsp;<span class="ident" id="4091177">err</span>&nbsp;<span class="op" id="4091181">!=</span>&nbsp;<span class="builtintype" id="4091184">nil</span>&nbsp;<span class="op" id="4091188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091192">return</span>&nbsp;<span class="builtintype" id="4091199">nil</span><span class="op" id="4091202">,</span>&nbsp;<span class="ident" id="4091204">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091212">_</span><span class="op" id="4091213">,</span>&nbsp;<span class="ident" id="4091215">err</span>&nbsp;<span class="op" id="4091219">=</span>&nbsp;<span class="ident" id="4091221">f</span><span class="op" id="4091222">.</span><span class="ident" id="4091223">writeTo</span><span class="op" id="4091230">(</span><span class="op" id="4091231">&amp;</span><span class="ident" id="4091232">out</span><span class="op" id="4091235">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091238">return</span>&nbsp;<span class="ident" id="4091245">out</span><span class="op" id="4091248">.</span><span class="ident" id="4091249">Bytes</span><span class="op" id="4091254">(</span><span class="op" id="4091255">)</span><span class="op" id="4091256">,</span>&nbsp;<span class="builtintype" id="4091258">nil</span><br>
<span class="lineno"></span><span class="op" id="4091262">}</span>
</div>
</body>
</html>
