<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/asm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/asm8/bare_func.go.html">bare_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_file.go.html">build_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_func.go.html">build_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_lib.go.html">build_lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_var.go.html">build_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/builder.go.html">builder.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/check_type.go.html">check_type.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_hex.go.html">data_hex.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_nums.go.html">data_nums.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_str.go.html">data_str.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/file.go.html">file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_decl.go.html">func_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_stmt.go.html">func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst.go.html">inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all.go.html">lex_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all_test.go.html">lex_all_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_comment.go.html">lex_comment.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_operand.go.html">lex_operand.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_string.go.html">lex_string.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lib.go.html">lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/package.go.html">package.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_arg.go.html">parse_arg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_file.go.html">parse_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func.go.html">parse_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_stmt.go.html">parse_func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_test.go.html">parse_func_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_inst.go.html">parse_inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_label.go.html">parse_label.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_reg.go.html">parse_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_sym.go.html">parse_sym.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var.go.html">parse_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var_stmt.go.html">parse_var_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parser.go.html">parser.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/single_file.go.html">single_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/stmt_lexer.go.html">stmt_lexer.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_scope.go.html">sym_scope.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_table.go.html">sym_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/symbol.go.html">symbol.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/token.go.html">token.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_decl.go.html">var_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_stmt.go.html">var_stmt.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3644616">package</span>&nbsp;<span class="ident" id="3644624">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3644630">import</span>&nbsp;<span class="op" id="3644637">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3644640">&#34;io&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3644647">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3644669">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3644672">func</span>&nbsp;<span class="ident" id="3644677">lexAsm8</span><span class="op" id="3644684">(</span><span class="ident" id="3644685">x</span>&nbsp;<span class="op" id="3644687">*</span><span class="ident" id="3644688">lex8</span><span class="op" id="3644692">.</span><span class="ident" id="3644693">Lexer</span><span class="op" id="3644698">)</span>&nbsp;<span class="op" id="3644700">*</span><span class="ident" id="3644701">lex8</span><span class="op" id="3644705">.</span><span class="ident" id="3644706">Token</span>&nbsp;<span class="op" id="3644712">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644715">r</span>&nbsp;<span class="op" id="3644717">:=</span>&nbsp;<span class="ident" id="3644720">x</span><span class="op" id="3644721">.</span><span class="ident" id="3644722">Rune</span><span class="op" id="3644726">(</span><span class="op" id="3644727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644730">if</span>&nbsp;<span class="ident" id="3644733">x</span><span class="op" id="3644734">.</span><span class="ident" id="3644735">IsWhite</span><span class="op" id="3644742">(</span><span class="ident" id="3644743">r</span><span class="op" id="3644744">)</span>&nbsp;<span class="op" id="3644746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3644750">panic</span><span class="op" id="3644755">(</span><span class="string" id="3644756">&#34;incorrect&nbsp;token&nbsp;start&#34;</span><span class="op" id="3644779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3644782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644786">switch</span>&nbsp;<span class="ident" id="3644793">r</span>&nbsp;<span class="op" id="3644795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644798">case</span>&nbsp;<span class="string" id="3644803">&#39;\n&#39;</span><span class="op" id="3644807">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644811">x</span><span class="op" id="3644812">.</span><span class="ident" id="3644813">Next</span><span class="op" id="3644817">(</span><span class="op" id="3644818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644822">return</span>&nbsp;<span class="ident" id="3644829">x</span><span class="op" id="3644830">.</span><span class="ident" id="3644831">MakeToken</span><span class="op" id="3644840">(</span><span class="ident" id="3644841">Endl</span><span class="op" id="3644845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644848">case</span>&nbsp;<span class="string" id="3644853">&#39;{&#39;</span><span class="op" id="3644856">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644860">x</span><span class="op" id="3644861">.</span><span class="ident" id="3644862">Next</span><span class="op" id="3644866">(</span><span class="op" id="3644867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644871">return</span>&nbsp;<span class="ident" id="3644878">x</span><span class="op" id="3644879">.</span><span class="ident" id="3644880">MakeToken</span><span class="op" id="3644889">(</span><span class="ident" id="3644890">Lbrace</span><span class="op" id="3644896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644899">case</span>&nbsp;<span class="string" id="3644904">&#39;}&#39;</span><span class="op" id="3644907">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644911">x</span><span class="op" id="3644912">.</span><span class="ident" id="3644913">Next</span><span class="op" id="3644917">(</span><span class="op" id="3644918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644922">return</span>&nbsp;<span class="ident" id="3644929">x</span><span class="op" id="3644930">.</span><span class="ident" id="3644931">MakeToken</span><span class="op" id="3644940">(</span><span class="ident" id="3644941">Rbrace</span><span class="op" id="3644947">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644950">case</span>&nbsp;<span class="string" id="3644955">&#39;/&#39;</span><span class="op" id="3644958">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644962">return</span>&nbsp;<span class="ident" id="3644969">lexComment</span><span class="op" id="3644979">(</span><span class="ident" id="3644980">x</span><span class="op" id="3644981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644984">case</span>&nbsp;<span class="string" id="3644989">&#39;&#34;&#39;</span><span class="op" id="3644992">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644996">return</span>&nbsp;<span class="ident" id="3645003">lexString</span><span class="op" id="3645012">(</span><span class="ident" id="3645013">x</span><span class="op" id="3645014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3645017">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645021">if</span>&nbsp;<span class="ident" id="3645024">isOperandChar</span><span class="op" id="3645037">(</span><span class="ident" id="3645038">r</span><span class="op" id="3645039">)</span>&nbsp;<span class="op" id="3645041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645045">return</span>&nbsp;<span class="ident" id="3645052">lexOperand</span><span class="op" id="3645062">(</span><span class="ident" id="3645063">x</span><span class="op" id="3645064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3645067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3645071">x</span><span class="op" id="3645072">.</span><span class="ident" id="3645073">Err</span><span class="op" id="3645076">(</span><span class="string" id="3645077">&#34;illegal&nbsp;char&nbsp;%q&#34;</span><span class="op" id="3645094">,</span>&nbsp;<span class="ident" id="3645096">r</span><span class="op" id="3645097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3645100">x</span><span class="op" id="3645101">.</span><span class="ident" id="3645102">Next</span><span class="op" id="3645106">(</span><span class="op" id="3645107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645110">return</span>&nbsp;<span class="ident" id="3645117">x</span><span class="op" id="3645118">.</span><span class="ident" id="3645119">MakeToken</span><span class="op" id="3645128">(</span><span class="ident" id="3645129">lex8</span><span class="op" id="3645133">.</span><span class="ident" id="3645134">Illegal</span><span class="op" id="3645141">)</span><br>
<span class="lineno"></span><span class="op" id="3645143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="3645146">//&nbsp;NewLexer&nbsp;creates&nbsp;a&nbsp;new&nbsp;lexer&nbsp;of&nbsp;a&nbsp;file&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="3645196">func</span>&nbsp;<span class="ident" id="3645201">newLexer</span><span class="op" id="3645209">(</span><span class="ident" id="3645210">file</span>&nbsp;<span class="builtintype" id="3645215">string</span><span class="op" id="3645221">,</span>&nbsp;<span class="ident" id="3645223">r</span>&nbsp;<span class="ident" id="3645225">io</span><span class="op" id="3645227">.</span><span class="ident" id="3645228">ReadCloser</span><span class="op" id="3645238">)</span>&nbsp;<span class="op" id="3645240">*</span><span class="ident" id="3645241">lex8</span><span class="op" id="3645245">.</span><span class="ident" id="3645246">Lexer</span>&nbsp;<span class="op" id="3645252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3645255">ret</span>&nbsp;<span class="op" id="3645259">:=</span>&nbsp;<span class="ident" id="3645262">lex8</span><span class="op" id="3645266">.</span><span class="ident" id="3645267">NewLexer</span><span class="op" id="3645275">(</span><span class="ident" id="3645276">file</span><span class="op" id="3645280">,</span>&nbsp;<span class="ident" id="3645282">r</span><span class="op" id="3645283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3645286">ret</span><span class="op" id="3645289">.</span><span class="ident" id="3645290">LexFunc</span>&nbsp;<span class="op" id="3645298">=</span>&nbsp;<span class="ident" id="3645300">lexAsm8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645309">return</span>&nbsp;<span class="ident" id="3645316">ret</span><br>
<span class="lineno">45</span><span class="op" id="3645320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3645323">//&nbsp;Tokens&nbsp;parses&nbsp;a&nbsp;file&nbsp;in&nbsp;a&nbsp;token&nbsp;array</span><br>
<span class="lineno"></span><span class="keyword" id="3645364">func</span>&nbsp;<span class="ident" id="3645369">Tokens</span><span class="op" id="3645375">(</span><span class="ident" id="3645376">f</span>&nbsp;<span class="builtintype" id="3645378">string</span><span class="op" id="3645384">,</span>&nbsp;<span class="ident" id="3645386">r</span>&nbsp;<span class="ident" id="3645388">io</span><span class="op" id="3645390">.</span><span class="ident" id="3645391">ReadCloser</span><span class="op" id="3645401">)</span>&nbsp;<span class="op" id="3645403">(</span><span class="op" id="3645404">[</span><span class="op" id="3645405">]</span><span class="op" id="3645406">*</span><span class="ident" id="3645407">lex8</span><span class="op" id="3645411">.</span><span class="ident" id="3645412">Token</span><span class="op" id="3645417">,</span>&nbsp;<span class="op" id="3645419">[</span><span class="op" id="3645420">]</span><span class="op" id="3645421">*</span><span class="ident" id="3645422">lex8</span><span class="op" id="3645426">.</span><span class="ident" id="3645427">Error</span><span class="op" id="3645432">)</span>&nbsp;<span class="op" id="3645434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3645437">x</span>&nbsp;<span class="op" id="3645439">:=</span>&nbsp;<span class="ident" id="3645442">newLexer</span><span class="op" id="3645450">(</span><span class="ident" id="3645451">f</span><span class="op" id="3645452">,</span>&nbsp;<span class="ident" id="3645454">r</span><span class="op" id="3645455">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645459">var</span>&nbsp;<span class="ident" id="3645463">ret</span>&nbsp;<span class="op" id="3645467">[</span><span class="op" id="3645468">]</span><span class="op" id="3645469">*</span><span class="ident" id="3645470">lex8</span><span class="op" id="3645474">.</span><span class="ident" id="3645475">Token</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645483">for</span>&nbsp;<span class="op" id="3645487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3645491">t</span>&nbsp;<span class="op" id="3645493">:=</span>&nbsp;<span class="ident" id="3645496">x</span><span class="op" id="3645497">.</span><span class="ident" id="3645498">Token</span><span class="op" id="3645503">(</span><span class="op" id="3645504">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3645508">ret</span>&nbsp;<span class="op" id="3645512">=</span>&nbsp;<span class="builtinfunc" id="3645514">append</span><span class="op" id="3645520">(</span><span class="ident" id="3645521">ret</span><span class="op" id="3645524">,</span>&nbsp;<span class="ident" id="3645526">t</span><span class="op" id="3645527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645531">if</span>&nbsp;<span class="ident" id="3645534">t</span><span class="op" id="3645535">.</span><span class="ident" id="3645536">Type</span>&nbsp;<span class="op" id="3645541">==</span>&nbsp;<span class="ident" id="3645544">lex8</span><span class="op" id="3645548">.</span><span class="ident" id="3645549">EOF</span>&nbsp;<span class="op" id="3645553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645558">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3645566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3645569">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3645573">errs</span>&nbsp;<span class="op" id="3645578">:=</span>&nbsp;<span class="ident" id="3645581">x</span><span class="op" id="3645582">.</span><span class="ident" id="3645583">Errs</span><span class="op" id="3645587">(</span><span class="op" id="3645588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645591">if</span>&nbsp;<span class="ident" id="3645594">errs</span>&nbsp;<span class="op" id="3645599">!=</span>&nbsp;<span class="ident" id="3645602">nil</span>&nbsp;<span class="op" id="3645606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645610">return</span>&nbsp;<span class="ident" id="3645617">nil</span><span class="op" id="3645620">,</span>&nbsp;<span class="ident" id="3645622">errs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3645628">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3645632">return</span>&nbsp;<span class="ident" id="3645639">ret</span><span class="op" id="3645642">,</span>&nbsp;<span class="ident" id="3645644">nil</span><br>
<span class="lineno"></span><span class="op" id="3645648">}</span>
</div>
</body>
</html>
