<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6031363">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6031419">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6031473">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6031524">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6031583">package</span>&nbsp;<span class="ident" id="6031591">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6031598">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6031650">import</span>&nbsp;<span class="op" id="6031657">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6031660">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6031669">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6031684">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6031703">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6031710">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6031716">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6031721">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6031724">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="6031766">type</span>&nbsp;<span class="ident" id="6031771">File</span>&nbsp;<span class="keyword" id="6031776">struct</span>&nbsp;<span class="op" id="6031783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6031786">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6031798">ByteOrder</span>&nbsp;<span class="ident" id="6031808">binary</span><span class="op" id="6031814">.</span><span class="ident" id="6031815">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6031826">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6031836">[</span><span class="op" id="6031837">]</span><span class="ident" id="6031838">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6031844">Sections</span>&nbsp;&nbsp;<span class="op" id="6031854">[</span><span class="op" id="6031855">]</span><span class="op" id="6031856">*</span><span class="ident" id="6031857">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6031867">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6031876">*</span><span class="ident" id="6031877">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6031885">Dysymtab</span>&nbsp;<span class="op" id="6031894">*</span><span class="ident" id="6031895">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6031906">closer</span>&nbsp;<span class="ident" id="6031913">io</span><span class="op" id="6031915">.</span><span class="ident" id="6031916">Closer</span><br>
<span class="lineno">30</span><span class="op" id="6031923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6031926">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6031972">type</span>&nbsp;<span class="ident" id="6031977">Load</span>&nbsp;<span class="keyword" id="6031982">interface</span>&nbsp;<span class="op" id="6031992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6031995">Raw</span><span class="op" id="6031998">(</span><span class="op" id="6031999">)</span>&nbsp;<span class="op" id="6032001">[</span><span class="op" id="6032002">]</span><span class="builtintype" id="6032003">byte</span><br>
<span class="lineno">35</span><span class="op" id="6032008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6032011">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6032079">type</span>&nbsp;<span class="ident" id="6032084">LoadBytes</span>&nbsp;<span class="op" id="6032094">[</span><span class="op" id="6032095">]</span><span class="builtintype" id="6032096">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6032102">func</span>&nbsp;<span class="op" id="6032107">(</span><span class="ident" id="6032108">b</span>&nbsp;<span class="ident" id="6032110">LoadBytes</span><span class="op" id="6032119">)</span>&nbsp;<span class="ident" id="6032121">Raw</span><span class="op" id="6032124">(</span><span class="op" id="6032125">)</span>&nbsp;<span class="op" id="6032127">[</span><span class="op" id="6032128">]</span><span class="builtintype" id="6032129">byte</span>&nbsp;<span class="op" id="6032134">{</span>&nbsp;<span class="keyword" id="6032136">return</span>&nbsp;<span class="ident" id="6032143">b</span>&nbsp;<span class="op" id="6032145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6032148">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6032233">type</span>&nbsp;<span class="ident" id="6032238">SegmentHeader</span>&nbsp;<span class="keyword" id="6032252">struct</span>&nbsp;<span class="op" id="6032259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032262">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032270">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032279">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6032287">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032295">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6032303">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032311">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032319">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032327">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6032335">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032343">Offset</span>&nbsp;&nbsp;<span class="ident" id="6032351">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032359">Filesz</span>&nbsp;&nbsp;<span class="ident" id="6032367">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032375">Maxprot</span>&nbsp;<span class="builtintype" id="6032383">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032391">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6032399">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032407">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6032415">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032423">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6032431">uint32</span><br>
<span class="lineno">55</span><span class="op" id="6032438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6032441">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6032513">type</span>&nbsp;<span class="ident" id="6032518">Segment</span>&nbsp;<span class="keyword" id="6032526">struct</span>&nbsp;<span class="op" id="6032533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032536">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032547">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6032563">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6032601">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6032641">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6032676">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6032724">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6032774">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032798">io</span><span class="op" id="6032800">.</span><span class="ident" id="6032801">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032811">sr</span>&nbsp;<span class="op" id="6032814">*</span><span class="ident" id="6032815">io</span><span class="op" id="6032817">.</span><span class="ident" id="6032818">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="6032832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6032835">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6032890">func</span>&nbsp;<span class="op" id="6032895">(</span><span class="ident" id="6032896">s</span>&nbsp;<span class="op" id="6032898">*</span><span class="ident" id="6032899">Segment</span><span class="op" id="6032906">)</span>&nbsp;<span class="ident" id="6032908">Data</span><span class="op" id="6032912">(</span><span class="op" id="6032913">)</span>&nbsp;<span class="op" id="6032915">(</span><span class="op" id="6032916">[</span><span class="op" id="6032917">]</span><span class="builtintype" id="6032918">byte</span><span class="op" id="6032922">,</span>&nbsp;<span class="builtintype" id="6032924">error</span><span class="op" id="6032929">)</span>&nbsp;<span class="op" id="6032931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032934">dat</span>&nbsp;<span class="op" id="6032938">:=</span>&nbsp;<span class="builtinfunc" id="6032941">make</span><span class="op" id="6032945">(</span><span class="op" id="6032946">[</span><span class="op" id="6032947">]</span><span class="builtintype" id="6032948">byte</span><span class="op" id="6032952">,</span>&nbsp;<span class="ident" id="6032954">s</span><span class="op" id="6032955">.</span><span class="ident" id="6032956">sr</span><span class="op" id="6032958">.</span><span class="ident" id="6032959">Size</span><span class="op" id="6032963">(</span><span class="op" id="6032964">)</span><span class="op" id="6032965">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6032968">n</span><span class="op" id="6032969">,</span>&nbsp;<span class="ident" id="6032971">err</span>&nbsp;<span class="op" id="6032975">:=</span>&nbsp;<span class="ident" id="6032978">s</span><span class="op" id="6032979">.</span><span class="ident" id="6032980">sr</span><span class="op" id="6032982">.</span><span class="ident" id="6032983">ReadAt</span><span class="op" id="6032989">(</span><span class="ident" id="6032990">dat</span><span class="op" id="6032993">,</span>&nbsp;<span class="num" id="6032995">0</span><span class="op" id="6032996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6032999">if</span>&nbsp;<span class="ident" id="6033002">n</span>&nbsp;<span class="op" id="6033004">==</span>&nbsp;<span class="builtinfunc" id="6033007">len</span><span class="op" id="6033010">(</span><span class="ident" id="6033011">dat</span><span class="op" id="6033014">)</span>&nbsp;<span class="op" id="6033016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033020">err</span>&nbsp;<span class="op" id="6033024">=</span>&nbsp;<span class="ident" id="6033026">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6033031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6033034">return</span>&nbsp;<span class="ident" id="6033041">dat</span><span class="op" id="6033044">[</span><span class="num" id="6033045">0</span><span class="op" id="6033046">:</span><span class="ident" id="6033047">n</span><span class="op" id="6033048">]</span><span class="op" id="6033049">,</span>&nbsp;<span class="ident" id="6033051">err</span><br>
<span class="lineno">80</span><span class="op" id="6033055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6033058">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6033112">func</span>&nbsp;<span class="op" id="6033117">(</span><span class="ident" id="6033118">s</span>&nbsp;<span class="op" id="6033120">*</span><span class="ident" id="6033121">Segment</span><span class="op" id="6033128">)</span>&nbsp;<span class="ident" id="6033130">Open</span><span class="op" id="6033134">(</span><span class="op" id="6033135">)</span>&nbsp;<span class="ident" id="6033137">io</span><span class="op" id="6033139">.</span><span class="ident" id="6033140">ReadSeeker</span>&nbsp;<span class="op" id="6033151">{</span>&nbsp;<span class="keyword" id="6033153">return</span>&nbsp;<span class="ident" id="6033160">io</span><span class="op" id="6033162">.</span><span class="ident" id="6033163">NewSectionReader</span><span class="op" id="6033179">(</span><span class="ident" id="6033180">s</span><span class="op" id="6033181">.</span><span class="ident" id="6033182">sr</span><span class="op" id="6033184">,</span>&nbsp;<span class="num" id="6033186">0</span><span class="op" id="6033187">,</span>&nbsp;<span class="num" id="6033189">1</span><span class="op" id="6033190">&lt;&lt;</span><span class="num" id="6033192">63</span><span class="op" id="6033194">-</span><span class="num" id="6033195">1</span><span class="op" id="6033196">)</span>&nbsp;<span class="op" id="6033198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6033201">type</span>&nbsp;<span class="ident" id="6033206">SectionHeader</span>&nbsp;<span class="keyword" id="6033220">struct</span>&nbsp;<span class="op" id="6033227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033230">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6033237">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033245">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6033252">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033260">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6033267">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033275">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6033282">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033290">Offset</span>&nbsp;<span class="builtintype" id="6033297">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033305">Align</span>&nbsp;&nbsp;<span class="builtintype" id="6033312">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033320">Reloff</span>&nbsp;<span class="builtintype" id="6033327">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033335">Nreloc</span>&nbsp;<span class="builtintype" id="6033342">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033350">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="6033357">uint32</span><br>
<span class="lineno">95</span><span class="op" id="6033364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6033367">type</span>&nbsp;<span class="ident" id="6033372">Section</span>&nbsp;<span class="keyword" id="6033380">struct</span>&nbsp;<span class="op" id="6033387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033390">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6033406">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6033444">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6033484">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6033519">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6033567">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6033617">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033641">io</span><span class="op" id="6033643">.</span><span class="ident" id="6033644">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033654">sr</span>&nbsp;<span class="op" id="6033657">*</span><span class="ident" id="6033658">io</span><span class="op" id="6033660">.</span><span class="ident" id="6033661">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="6033675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6033678">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6033740">func</span>&nbsp;<span class="op" id="6033745">(</span><span class="ident" id="6033746">s</span>&nbsp;<span class="op" id="6033748">*</span><span class="ident" id="6033749">Section</span><span class="op" id="6033756">)</span>&nbsp;<span class="ident" id="6033758">Data</span><span class="op" id="6033762">(</span><span class="op" id="6033763">)</span>&nbsp;<span class="op" id="6033765">(</span><span class="op" id="6033766">[</span><span class="op" id="6033767">]</span><span class="builtintype" id="6033768">byte</span><span class="op" id="6033772">,</span>&nbsp;<span class="builtintype" id="6033774">error</span><span class="op" id="6033779">)</span>&nbsp;<span class="op" id="6033781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033784">dat</span>&nbsp;<span class="op" id="6033788">:=</span>&nbsp;<span class="builtinfunc" id="6033791">make</span><span class="op" id="6033795">(</span><span class="op" id="6033796">[</span><span class="op" id="6033797">]</span><span class="builtintype" id="6033798">byte</span><span class="op" id="6033802">,</span>&nbsp;<span class="ident" id="6033804">s</span><span class="op" id="6033805">.</span><span class="ident" id="6033806">sr</span><span class="op" id="6033808">.</span><span class="ident" id="6033809">Size</span><span class="op" id="6033813">(</span><span class="op" id="6033814">)</span><span class="op" id="6033815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033818">n</span><span class="op" id="6033819">,</span>&nbsp;<span class="ident" id="6033821">err</span>&nbsp;<span class="op" id="6033825">:=</span>&nbsp;<span class="ident" id="6033828">s</span><span class="op" id="6033829">.</span><span class="ident" id="6033830">sr</span><span class="op" id="6033832">.</span><span class="ident" id="6033833">ReadAt</span><span class="op" id="6033839">(</span><span class="ident" id="6033840">dat</span><span class="op" id="6033843">,</span>&nbsp;<span class="num" id="6033845">0</span><span class="op" id="6033846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6033849">if</span>&nbsp;<span class="ident" id="6033852">n</span>&nbsp;<span class="op" id="6033854">==</span>&nbsp;<span class="builtinfunc" id="6033857">len</span><span class="op" id="6033860">(</span><span class="ident" id="6033861">dat</span><span class="op" id="6033864">)</span>&nbsp;<span class="op" id="6033866">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6033870">err</span>&nbsp;<span class="op" id="6033874">=</span>&nbsp;<span class="ident" id="6033876">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6033881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6033884">return</span>&nbsp;<span class="ident" id="6033891">dat</span><span class="op" id="6033894">[</span><span class="num" id="6033895">0</span><span class="op" id="6033896">:</span><span class="ident" id="6033897">n</span><span class="op" id="6033898">]</span><span class="op" id="6033899">,</span>&nbsp;<span class="ident" id="6033901">err</span><br>
<span class="lineno"></span><span class="op" id="6033905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="6033908">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6033969">func</span>&nbsp;<span class="op" id="6033974">(</span><span class="ident" id="6033975">s</span>&nbsp;<span class="op" id="6033977">*</span><span class="ident" id="6033978">Section</span><span class="op" id="6033985">)</span>&nbsp;<span class="ident" id="6033987">Open</span><span class="op" id="6033991">(</span><span class="op" id="6033992">)</span>&nbsp;<span class="ident" id="6033994">io</span><span class="op" id="6033996">.</span><span class="ident" id="6033997">ReadSeeker</span>&nbsp;<span class="op" id="6034008">{</span>&nbsp;<span class="keyword" id="6034010">return</span>&nbsp;<span class="ident" id="6034017">io</span><span class="op" id="6034019">.</span><span class="ident" id="6034020">NewSectionReader</span><span class="op" id="6034036">(</span><span class="ident" id="6034037">s</span><span class="op" id="6034038">.</span><span class="ident" id="6034039">sr</span><span class="op" id="6034041">,</span>&nbsp;<span class="num" id="6034043">0</span><span class="op" id="6034044">,</span>&nbsp;<span class="num" id="6034046">1</span><span class="op" id="6034047">&lt;&lt;</span><span class="num" id="6034049">63</span><span class="op" id="6034051">-</span><span class="num" id="6034052">1</span><span class="op" id="6034053">)</span>&nbsp;<span class="op" id="6034055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6034058">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6034119">type</span>&nbsp;<span class="ident" id="6034124">Dylib</span>&nbsp;<span class="keyword" id="6034130">struct</span>&nbsp;<span class="op" id="6034137">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034140">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034151">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6034166">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034174">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6034189">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034197">CurrentVersion</span>&nbsp;<span class="builtintype" id="6034212">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034220">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="6034235">uint32</span><br>
<span class="lineno">130</span><span class="op" id="6034242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6034245">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6034299">type</span>&nbsp;<span class="ident" id="6034304">Symtab</span>&nbsp;<span class="keyword" id="6034311">struct</span>&nbsp;<span class="op" id="6034318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034321">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034332">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034343">Syms</span>&nbsp;<span class="op" id="6034348">[</span><span class="op" id="6034349">]</span><span class="ident" id="6034350">Symbol</span><br>
<span class="lineno"></span><span class="op" id="6034357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6034360">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="6034424">type</span>&nbsp;<span class="ident" id="6034429">Dysymtab</span>&nbsp;<span class="keyword" id="6034438">struct</span>&nbsp;<span class="op" id="6034445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034448">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034459">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034472">IndirectSyms</span>&nbsp;<span class="op" id="6034485">[</span><span class="op" id="6034486">]</span><span class="builtintype" id="6034487">uint32</span>&nbsp;<span class="comment" id="6034494">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="6034522">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="6034525">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6034550">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6034613">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6034664">type</span>&nbsp;<span class="ident" id="6034669">FormatError</span>&nbsp;<span class="keyword" id="6034681">struct</span>&nbsp;<span class="op" id="6034688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034691">off</span>&nbsp;<span class="ident" id="6034695">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034702">msg</span>&nbsp;<span class="builtintype" id="6034706">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034714">val</span>&nbsp;<span class="keyword" id="6034718">interface</span><span class="op" id="6034727">{</span><span class="op" id="6034728">}</span><br>
<span class="lineno"></span><span class="op" id="6034730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6034733">func</span>&nbsp;<span class="op" id="6034738">(</span><span class="ident" id="6034739">e</span>&nbsp;<span class="op" id="6034741">*</span><span class="ident" id="6034742">FormatError</span><span class="op" id="6034753">)</span>&nbsp;<span class="ident" id="6034755">Error</span><span class="op" id="6034760">(</span><span class="op" id="6034761">)</span>&nbsp;<span class="builtintype" id="6034763">string</span>&nbsp;<span class="op" id="6034770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034773">msg</span>&nbsp;<span class="op" id="6034777">:=</span>&nbsp;<span class="ident" id="6034780">e</span><span class="op" id="6034781">.</span><span class="ident" id="6034782">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6034787">if</span>&nbsp;<span class="ident" id="6034790">e</span><span class="op" id="6034791">.</span><span class="ident" id="6034792">val</span>&nbsp;<span class="op" id="6034796">!=</span>&nbsp;<span class="ident" id="6034799">nil</span>&nbsp;<span class="op" id="6034803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034807">msg</span>&nbsp;<span class="op" id="6034811">+=</span>&nbsp;<span class="ident" id="6034814">fmt</span><span class="op" id="6034817">.</span><span class="ident" id="6034818">Sprintf</span><span class="op" id="6034825">(</span><span class="string" id="6034826">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="6034833">,</span>&nbsp;<span class="ident" id="6034835">e</span><span class="op" id="6034836">.</span><span class="ident" id="6034837">val</span><span class="op" id="6034840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6034843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6034846">msg</span>&nbsp;<span class="op" id="6034850">+=</span>&nbsp;<span class="ident" id="6034853">fmt</span><span class="op" id="6034856">.</span><span class="ident" id="6034857">Sprintf</span><span class="op" id="6034864">(</span><span class="string" id="6034865">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="6034889">,</span>&nbsp;<span class="ident" id="6034891">e</span><span class="op" id="6034892">.</span><span class="ident" id="6034893">off</span><span class="op" id="6034896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6034899">return</span>&nbsp;<span class="ident" id="6034906">msg</span><br>
<span class="lineno">165</span><span class="op" id="6034910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6034913">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="6035000">func</span>&nbsp;<span class="ident" id="6035005">Open</span><span class="op" id="6035009">(</span><span class="ident" id="6035010">name</span>&nbsp;<span class="builtintype" id="6035015">string</span><span class="op" id="6035021">)</span>&nbsp;<span class="op" id="6035023">(</span><span class="op" id="6035024">*</span><span class="ident" id="6035025">File</span><span class="op" id="6035029">,</span>&nbsp;<span class="builtintype" id="6035031">error</span><span class="op" id="6035036">)</span>&nbsp;<span class="op" id="6035038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6035041">f</span><span class="op" id="6035042">,</span>&nbsp;<span class="ident" id="6035044">err</span>&nbsp;<span class="op" id="6035048">:=</span>&nbsp;<span class="ident" id="6035051">os</span><span class="op" id="6035053">.</span><span class="ident" id="6035054">Open</span><span class="op" id="6035058">(</span><span class="ident" id="6035059">name</span><span class="op" id="6035063">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035066">if</span>&nbsp;<span class="ident" id="6035069">err</span>&nbsp;<span class="op" id="6035073">!=</span>&nbsp;<span class="ident" id="6035076">nil</span>&nbsp;<span class="op" id="6035080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035084">return</span>&nbsp;<span class="ident" id="6035091">nil</span><span class="op" id="6035094">,</span>&nbsp;<span class="ident" id="6035096">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6035101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6035104">ff</span><span class="op" id="6035106">,</span>&nbsp;<span class="ident" id="6035108">err</span>&nbsp;<span class="op" id="6035112">:=</span>&nbsp;<span class="ident" id="6035115">NewFile</span><span class="op" id="6035122">(</span><span class="ident" id="6035123">f</span><span class="op" id="6035124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035127">if</span>&nbsp;<span class="ident" id="6035130">err</span>&nbsp;<span class="op" id="6035134">!=</span>&nbsp;<span class="ident" id="6035137">nil</span>&nbsp;<span class="op" id="6035141">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6035145">f</span><span class="op" id="6035146">.</span><span class="ident" id="6035147">Close</span><span class="op" id="6035152">(</span><span class="op" id="6035153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035157">return</span>&nbsp;<span class="ident" id="6035164">nil</span><span class="op" id="6035167">,</span>&nbsp;<span class="ident" id="6035169">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6035174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6035177">ff</span><span class="op" id="6035179">.</span><span class="ident" id="6035180">closer</span>&nbsp;<span class="op" id="6035187">=</span>&nbsp;<span class="ident" id="6035189">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035192">return</span>&nbsp;<span class="ident" id="6035199">ff</span><span class="op" id="6035201">,</span>&nbsp;<span class="ident" id="6035203">nil</span><br>
<span class="lineno">180</span><span class="op" id="6035207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6035210">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="6035236">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="6035303">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="6035327">func</span>&nbsp;<span class="op" id="6035332">(</span><span class="ident" id="6035333">f</span>&nbsp;<span class="op" id="6035335">*</span><span class="ident" id="6035336">File</span><span class="op" id="6035340">)</span>&nbsp;<span class="ident" id="6035342">Close</span><span class="op" id="6035347">(</span><span class="op" id="6035348">)</span>&nbsp;<span class="builtintype" id="6035350">error</span>&nbsp;<span class="op" id="6035356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035359">var</span>&nbsp;<span class="ident" id="6035363">err</span>&nbsp;<span class="builtintype" id="6035367">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035374">if</span>&nbsp;<span class="ident" id="6035377">f</span><span class="op" id="6035378">.</span><span class="ident" id="6035379">closer</span>&nbsp;<span class="op" id="6035386">!=</span>&nbsp;<span class="ident" id="6035389">nil</span>&nbsp;<span class="op" id="6035393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6035397">err</span>&nbsp;<span class="op" id="6035401">=</span>&nbsp;<span class="ident" id="6035403">f</span><span class="op" id="6035404">.</span><span class="ident" id="6035405">closer</span><span class="op" id="6035411">.</span><span class="ident" id="6035412">Close</span><span class="op" id="6035417">(</span><span class="op" id="6035418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6035422">f</span><span class="op" id="6035423">.</span><span class="ident" id="6035424">closer</span>&nbsp;<span class="op" id="6035431">=</span>&nbsp;<span class="ident" id="6035433">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6035438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035441">return</span>&nbsp;<span class="ident" id="6035448">err</span><br>
<span class="lineno"></span><span class="op" id="6035452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6035455">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="6035540">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="6035613">func</span>&nbsp;<span class="ident" id="6035618">NewFile</span><span class="op" id="6035625">(</span><span class="ident" id="6035626">r</span>&nbsp;<span class="ident" id="6035628">io</span><span class="op" id="6035630">.</span><span class="ident" id="6035631">ReaderAt</span><span class="op" id="6035639">)</span>&nbsp;<span class="op" id="6035641">(</span><span class="op" id="6035642">*</span><span class="ident" id="6035643">File</span><span class="op" id="6035647">,</span>&nbsp;<span class="builtintype" id="6035649">error</span><span class="op" id="6035654">)</span>&nbsp;<span class="op" id="6035656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6035659">f</span>&nbsp;<span class="op" id="6035661">:=</span>&nbsp;<span class="builtinfunc" id="6035664">new</span><span class="op" id="6035667">(</span><span class="ident" id="6035668">File</span><span class="op" id="6035672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6035675">sr</span>&nbsp;<span class="op" id="6035678">:=</span>&nbsp;<span class="ident" id="6035681">io</span><span class="op" id="6035683">.</span><span class="ident" id="6035684">NewSectionReader</span><span class="op" id="6035700">(</span><span class="ident" id="6035701">r</span><span class="op" id="6035702">,</span>&nbsp;<span class="num" id="6035704">0</span><span class="op" id="6035705">,</span>&nbsp;<span class="num" id="6035707">1</span><span class="op" id="6035708">&lt;&lt;</span><span class="num" id="6035710">63</span><span class="op" id="6035712">-</span><span class="num" id="6035713">1</span><span class="op" id="6035714">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6035718">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6035780">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035835">var</span>&nbsp;<span class="ident" id="6035839">ident</span>&nbsp;<span class="op" id="6035845">[</span><span class="num" id="6035846">4</span><span class="op" id="6035847">]</span><span class="builtintype" id="6035848">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035854">if</span>&nbsp;<span class="ident" id="6035857">_</span><span class="op" id="6035858">,</span>&nbsp;<span class="ident" id="6035860">err</span>&nbsp;<span class="op" id="6035864">:=</span>&nbsp;<span class="ident" id="6035867">r</span><span class="op" id="6035868">.</span><span class="ident" id="6035869">ReadAt</span><span class="op" id="6035875">(</span><span class="ident" id="6035876">ident</span><span class="op" id="6035881">[</span><span class="num" id="6035882">0</span><span class="op" id="6035883">:</span><span class="op" id="6035884">]</span><span class="op" id="6035885">,</span>&nbsp;<span class="num" id="6035887">0</span><span class="op" id="6035888">)</span><span class="op" id="6035889">;</span>&nbsp;<span class="ident" id="6035891">err</span>&nbsp;<span class="op" id="6035895">!=</span>&nbsp;<span class="ident" id="6035898">nil</span>&nbsp;<span class="op" id="6035902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6035906">return</span>&nbsp;<span class="ident" id="6035913">nil</span><span class="op" id="6035916">,</span>&nbsp;<span class="ident" id="6035918">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6035923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6035926">be</span>&nbsp;<span class="op" id="6035929">:=</span>&nbsp;<span class="ident" id="6035932">binary</span><span class="op" id="6035938">.</span><span class="ident" id="6035939">BigEndian</span><span class="op" id="6035948">.</span><span class="ident" id="6035949">Uint32</span><span class="op" id="6035955">(</span><span class="ident" id="6035956">ident</span><span class="op" id="6035961">[</span><span class="num" id="6035962">0</span><span class="op" id="6035963">:</span><span class="op" id="6035964">]</span><span class="op" id="6035965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6035968">le</span>&nbsp;<span class="op" id="6035971">:=</span>&nbsp;<span class="ident" id="6035974">binary</span><span class="op" id="6035980">.</span><span class="ident" id="6035981">LittleEndian</span><span class="op" id="6035993">.</span><span class="ident" id="6035994">Uint32</span><span class="op" id="6036000">(</span><span class="ident" id="6036001">ident</span><span class="op" id="6036006">[</span><span class="num" id="6036007">0</span><span class="op" id="6036008">:</span><span class="op" id="6036009">]</span><span class="op" id="6036010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036013">switch</span>&nbsp;<span class="ident" id="6036020">Magic32</span>&nbsp;<span class="op" id="6036028">&amp;^</span>&nbsp;<span class="num" id="6036031">1</span>&nbsp;<span class="op" id="6036033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036036">case</span>&nbsp;<span class="ident" id="6036041">be</span>&nbsp;<span class="op" id="6036044">&amp;^</span>&nbsp;<span class="num" id="6036047">1</span><span class="op" id="6036048">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6036052">f</span><span class="op" id="6036053">.</span><span class="ident" id="6036054">ByteOrder</span>&nbsp;<span class="op" id="6036064">=</span>&nbsp;<span class="ident" id="6036066">binary</span><span class="op" id="6036072">.</span><span class="ident" id="6036073">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6036085">f</span><span class="op" id="6036086">.</span><span class="ident" id="6036087">Magic</span>&nbsp;<span class="op" id="6036093">=</span>&nbsp;<span class="ident" id="6036095">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036099">case</span>&nbsp;<span class="ident" id="6036104">le</span>&nbsp;<span class="op" id="6036107">&amp;^</span>&nbsp;<span class="num" id="6036110">1</span><span class="op" id="6036111">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6036115">f</span><span class="op" id="6036116">.</span><span class="ident" id="6036117">ByteOrder</span>&nbsp;<span class="op" id="6036127">=</span>&nbsp;<span class="ident" id="6036129">binary</span><span class="op" id="6036135">.</span><span class="ident" id="6036136">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6036151">f</span><span class="op" id="6036152">.</span><span class="ident" id="6036153">Magic</span>&nbsp;<span class="op" id="6036159">=</span>&nbsp;<span class="ident" id="6036161">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036165">default</span><span class="op" id="6036172">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036176">return</span>&nbsp;<span class="ident" id="6036183">nil</span><span class="op" id="6036186">,</span>&nbsp;<span class="op" id="6036188">&amp;</span><span class="ident" id="6036189">FormatError</span><span class="op" id="6036200">{</span><span class="num" id="6036201">0</span><span class="op" id="6036202">,</span>&nbsp;<span class="string" id="6036204">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6036226">,</span>&nbsp;<span class="ident" id="6036228">nil</span><span class="op" id="6036231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6036234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6036238">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036267">if</span>&nbsp;<span class="ident" id="6036270">err</span>&nbsp;<span class="op" id="6036274">:=</span>&nbsp;<span class="ident" id="6036277">binary</span><span class="op" id="6036283">.</span><span class="ident" id="6036284">Read</span><span class="op" id="6036288">(</span><span class="ident" id="6036289">sr</span><span class="op" id="6036291">,</span>&nbsp;<span class="ident" id="6036293">f</span><span class="op" id="6036294">.</span><span class="ident" id="6036295">ByteOrder</span><span class="op" id="6036304">,</span>&nbsp;<span class="op" id="6036306">&amp;</span><span class="ident" id="6036307">f</span><span class="op" id="6036308">.</span><span class="ident" id="6036309">FileHeader</span><span class="op" id="6036319">)</span><span class="op" id="6036320">;</span>&nbsp;<span class="ident" id="6036322">err</span>&nbsp;<span class="op" id="6036326">!=</span>&nbsp;<span class="ident" id="6036329">nil</span>&nbsp;<span class="op" id="6036333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036337">return</span>&nbsp;<span class="ident" id="6036344">nil</span><span class="op" id="6036347">,</span>&nbsp;<span class="ident" id="6036349">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6036354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6036358">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6036382">offset</span>&nbsp;<span class="op" id="6036389">:=</span>&nbsp;<span class="ident" id="6036392">int64</span><span class="op" id="6036397">(</span><span class="ident" id="6036398">fileHeaderSize32</span><span class="op" id="6036414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036417">if</span>&nbsp;<span class="ident" id="6036420">f</span><span class="op" id="6036421">.</span><span class="ident" id="6036422">Magic</span>&nbsp;<span class="op" id="6036428">==</span>&nbsp;<span class="ident" id="6036431">Magic64</span>&nbsp;<span class="op" id="6036439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6036443">offset</span>&nbsp;<span class="op" id="6036450">=</span>&nbsp;<span class="ident" id="6036452">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6036470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6036473">dat</span>&nbsp;<span class="op" id="6036477">:=</span>&nbsp;<span class="builtinfunc" id="6036480">make</span><span class="op" id="6036484">(</span><span class="op" id="6036485">[</span><span class="op" id="6036486">]</span><span class="builtintype" id="6036487">byte</span><span class="op" id="6036491">,</span>&nbsp;<span class="ident" id="6036493">f</span><span class="op" id="6036494">.</span><span class="ident" id="6036495">Cmdsz</span><span class="op" id="6036500">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036503">if</span>&nbsp;<span class="ident" id="6036506">_</span><span class="op" id="6036507">,</span>&nbsp;<span class="ident" id="6036509">err</span>&nbsp;<span class="op" id="6036513">:=</span>&nbsp;<span class="ident" id="6036516">r</span><span class="op" id="6036517">.</span><span class="ident" id="6036518">ReadAt</span><span class="op" id="6036524">(</span><span class="ident" id="6036525">dat</span><span class="op" id="6036528">,</span>&nbsp;<span class="ident" id="6036530">offset</span><span class="op" id="6036536">)</span><span class="op" id="6036537">;</span>&nbsp;<span class="ident" id="6036539">err</span>&nbsp;<span class="op" id="6036543">!=</span>&nbsp;<span class="ident" id="6036546">nil</span>&nbsp;<span class="op" id="6036550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036554">return</span>&nbsp;<span class="ident" id="6036561">nil</span><span class="op" id="6036564">,</span>&nbsp;<span class="ident" id="6036566">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6036571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6036574">f</span><span class="op" id="6036575">.</span><span class="ident" id="6036576">Loads</span>&nbsp;<span class="op" id="6036582">=</span>&nbsp;<span class="builtinfunc" id="6036584">make</span><span class="op" id="6036588">(</span><span class="op" id="6036589">[</span><span class="op" id="6036590">]</span><span class="ident" id="6036591">Load</span><span class="op" id="6036595">,</span>&nbsp;<span class="ident" id="6036597">f</span><span class="op" id="6036598">.</span><span class="ident" id="6036599">Ncmd</span><span class="op" id="6036603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6036606">bo</span>&nbsp;<span class="op" id="6036609">:=</span>&nbsp;<span class="ident" id="6036612">f</span><span class="op" id="6036613">.</span><span class="ident" id="6036614">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036625">for</span>&nbsp;<span class="ident" id="6036629">i</span>&nbsp;<span class="op" id="6036631">:=</span>&nbsp;<span class="keyword" id="6036634">range</span>&nbsp;<span class="ident" id="6036640">f</span><span class="op" id="6036641">.</span><span class="ident" id="6036642">Loads</span>&nbsp;<span class="op" id="6036648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6036652">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036714">if</span>&nbsp;<span class="builtinfunc" id="6036717">len</span><span class="op" id="6036720">(</span><span class="ident" id="6036721">dat</span><span class="op" id="6036724">)</span>&nbsp;<span class="op" id="6036726">&lt;</span>&nbsp;<span class="num" id="6036728">8</span>&nbsp;<span class="op" id="6036730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036735">return</span>&nbsp;<span class="ident" id="6036742">nil</span><span class="op" id="6036745">,</span>&nbsp;<span class="op" id="6036747">&amp;</span><span class="ident" id="6036748">FormatError</span><span class="op" id="6036759">{</span><span class="ident" id="6036760">offset</span><span class="op" id="6036766">,</span>&nbsp;<span class="string" id="6036768">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="6036793">,</span>&nbsp;<span class="ident" id="6036795">nil</span><span class="op" id="6036798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6036802">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6036806">cmd</span><span class="op" id="6036809">,</span>&nbsp;<span class="ident" id="6036811">siz</span>&nbsp;<span class="op" id="6036815">:=</span>&nbsp;<span class="ident" id="6036818">LoadCmd</span><span class="op" id="6036825">(</span><span class="ident" id="6036826">bo</span><span class="op" id="6036828">.</span><span class="ident" id="6036829">Uint32</span><span class="op" id="6036835">(</span><span class="ident" id="6036836">dat</span><span class="op" id="6036839">[</span><span class="num" id="6036840">0</span><span class="op" id="6036841">:</span><span class="num" id="6036842">4</span><span class="op" id="6036843">]</span><span class="op" id="6036844">)</span><span class="op" id="6036845">)</span><span class="op" id="6036846">,</span>&nbsp;<span class="ident" id="6036848">bo</span><span class="op" id="6036850">.</span><span class="ident" id="6036851">Uint32</span><span class="op" id="6036857">(</span><span class="ident" id="6036858">dat</span><span class="op" id="6036861">[</span><span class="num" id="6036862">4</span><span class="op" id="6036863">:</span><span class="num" id="6036864">8</span><span class="op" id="6036865">]</span><span class="op" id="6036866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036870">if</span>&nbsp;<span class="ident" id="6036873">siz</span>&nbsp;<span class="op" id="6036877">&lt;</span>&nbsp;<span class="num" id="6036879">8</span>&nbsp;<span class="op" id="6036881">||</span>&nbsp;<span class="ident" id="6036884">siz</span>&nbsp;<span class="op" id="6036888">&gt;</span>&nbsp;<span class="builtintype" id="6036890">uint32</span><span class="op" id="6036896">(</span><span class="builtinfunc" id="6036897">len</span><span class="op" id="6036900">(</span><span class="ident" id="6036901">dat</span><span class="op" id="6036904">)</span><span class="op" id="6036905">)</span>&nbsp;<span class="op" id="6036907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036912">return</span>&nbsp;<span class="ident" id="6036919">nil</span><span class="op" id="6036922">,</span>&nbsp;<span class="op" id="6036924">&amp;</span><span class="ident" id="6036925">FormatError</span><span class="op" id="6036936">{</span><span class="ident" id="6036937">offset</span><span class="op" id="6036943">,</span>&nbsp;<span class="string" id="6036945">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="6036973">,</span>&nbsp;<span class="ident" id="6036975">nil</span><span class="op" id="6036978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6036982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6036986">var</span>&nbsp;<span class="ident" id="6036990">cmddat</span>&nbsp;<span class="op" id="6036997">[</span><span class="op" id="6036998">]</span><span class="builtintype" id="6036999">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037006">cmddat</span><span class="op" id="6037012">,</span>&nbsp;<span class="ident" id="6037014">dat</span>&nbsp;<span class="op" id="6037018">=</span>&nbsp;<span class="ident" id="6037020">dat</span><span class="op" id="6037023">[</span><span class="num" id="6037024">0</span><span class="op" id="6037025">:</span><span class="ident" id="6037026">siz</span><span class="op" id="6037029">]</span><span class="op" id="6037030">,</span>&nbsp;<span class="ident" id="6037032">dat</span><span class="op" id="6037035">[</span><span class="ident" id="6037036">siz</span><span class="op" id="6037039">:</span><span class="op" id="6037040">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037044">offset</span>&nbsp;<span class="op" id="6037051">+=</span>&nbsp;<span class="ident" id="6037054">int64</span><span class="op" id="6037059">(</span><span class="ident" id="6037060">siz</span><span class="op" id="6037063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037067">var</span>&nbsp;<span class="ident" id="6037071">s</span>&nbsp;<span class="op" id="6037073">*</span><span class="ident" id="6037074">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037084">switch</span>&nbsp;<span class="ident" id="6037091">cmd</span>&nbsp;<span class="op" id="6037095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037099">default</span><span class="op" id="6037106">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037111">f</span><span class="op" id="6037112">.</span><span class="ident" id="6037113">Loads</span><span class="op" id="6037118">[</span><span class="ident" id="6037119">i</span><span class="op" id="6037120">]</span>&nbsp;<span class="op" id="6037122">=</span>&nbsp;<span class="ident" id="6037124">LoadBytes</span><span class="op" id="6037133">(</span><span class="ident" id="6037134">cmddat</span><span class="op" id="6037140">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037145">case</span>&nbsp;<span class="ident" id="6037150">LoadCmdDylib</span><span class="op" id="6037162">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037167">var</span>&nbsp;<span class="ident" id="6037171">hdr</span>&nbsp;<span class="ident" id="6037175">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037187">b</span>&nbsp;<span class="op" id="6037189">:=</span>&nbsp;<span class="ident" id="6037192">bytes</span><span class="op" id="6037197">.</span><span class="ident" id="6037198">NewReader</span><span class="op" id="6037207">(</span><span class="ident" id="6037208">cmddat</span><span class="op" id="6037214">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037219">if</span>&nbsp;<span class="ident" id="6037222">err</span>&nbsp;<span class="op" id="6037226">:=</span>&nbsp;<span class="ident" id="6037229">binary</span><span class="op" id="6037235">.</span><span class="ident" id="6037236">Read</span><span class="op" id="6037240">(</span><span class="ident" id="6037241">b</span><span class="op" id="6037242">,</span>&nbsp;<span class="ident" id="6037244">bo</span><span class="op" id="6037246">,</span>&nbsp;<span class="op" id="6037248">&amp;</span><span class="ident" id="6037249">hdr</span><span class="op" id="6037252">)</span><span class="op" id="6037253">;</span>&nbsp;<span class="ident" id="6037255">err</span>&nbsp;<span class="op" id="6037259">!=</span>&nbsp;<span class="ident" id="6037262">nil</span>&nbsp;<span class="op" id="6037266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037272">return</span>&nbsp;<span class="ident" id="6037279">nil</span><span class="op" id="6037282">,</span>&nbsp;<span class="ident" id="6037284">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6037291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037296">l</span>&nbsp;<span class="op" id="6037298">:=</span>&nbsp;<span class="builtinfunc" id="6037301">new</span><span class="op" id="6037304">(</span><span class="ident" id="6037305">Dylib</span><span class="op" id="6037310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037315">if</span>&nbsp;<span class="ident" id="6037318">hdr</span><span class="op" id="6037321">.</span><span class="ident" id="6037322">Name</span>&nbsp;<span class="op" id="6037327">&gt;=</span>&nbsp;<span class="builtintype" id="6037330">uint32</span><span class="op" id="6037336">(</span><span class="builtinfunc" id="6037337">len</span><span class="op" id="6037340">(</span><span class="ident" id="6037341">cmddat</span><span class="op" id="6037347">)</span><span class="op" id="6037348">)</span>&nbsp;<span class="op" id="6037350">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037356">return</span>&nbsp;<span class="ident" id="6037363">nil</span><span class="op" id="6037366">,</span>&nbsp;<span class="op" id="6037368">&amp;</span><span class="ident" id="6037369">FormatError</span><span class="op" id="6037380">{</span><span class="ident" id="6037381">offset</span><span class="op" id="6037387">,</span>&nbsp;<span class="string" id="6037389">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="6037430">,</span>&nbsp;<span class="ident" id="6037432">hdr</span><span class="op" id="6037435">.</span><span class="ident" id="6037436">Name</span><span class="op" id="6037440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6037445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037450">l</span><span class="op" id="6037451">.</span><span class="ident" id="6037452">Name</span>&nbsp;<span class="op" id="6037457">=</span>&nbsp;<span class="ident" id="6037459">cstring</span><span class="op" id="6037466">(</span><span class="ident" id="6037467">cmddat</span><span class="op" id="6037473">[</span><span class="ident" id="6037474">hdr</span><span class="op" id="6037477">.</span><span class="ident" id="6037478">Name</span><span class="op" id="6037482">:</span><span class="op" id="6037483">]</span><span class="op" id="6037484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037489">l</span><span class="op" id="6037490">.</span><span class="ident" id="6037491">Time</span>&nbsp;<span class="op" id="6037496">=</span>&nbsp;<span class="ident" id="6037498">hdr</span><span class="op" id="6037501">.</span><span class="ident" id="6037502">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037510">l</span><span class="op" id="6037511">.</span><span class="ident" id="6037512">CurrentVersion</span>&nbsp;<span class="op" id="6037527">=</span>&nbsp;<span class="ident" id="6037529">hdr</span><span class="op" id="6037532">.</span><span class="ident" id="6037533">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037551">l</span><span class="op" id="6037552">.</span><span class="ident" id="6037553">CompatVersion</span>&nbsp;<span class="op" id="6037567">=</span>&nbsp;<span class="ident" id="6037569">hdr</span><span class="op" id="6037572">.</span><span class="ident" id="6037573">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037590">l</span><span class="op" id="6037591">.</span><span class="ident" id="6037592">LoadBytes</span>&nbsp;<span class="op" id="6037602">=</span>&nbsp;<span class="ident" id="6037604">LoadBytes</span><span class="op" id="6037613">(</span><span class="ident" id="6037614">cmddat</span><span class="op" id="6037620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037625">f</span><span class="op" id="6037626">.</span><span class="ident" id="6037627">Loads</span><span class="op" id="6037632">[</span><span class="ident" id="6037633">i</span><span class="op" id="6037634">]</span>&nbsp;<span class="op" id="6037636">=</span>&nbsp;<span class="ident" id="6037638">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037643">case</span>&nbsp;<span class="ident" id="6037648">LoadCmdSymtab</span><span class="op" id="6037661">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037666">var</span>&nbsp;<span class="ident" id="6037670">hdr</span>&nbsp;<span class="ident" id="6037674">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037687">b</span>&nbsp;<span class="op" id="6037689">:=</span>&nbsp;<span class="ident" id="6037692">bytes</span><span class="op" id="6037697">.</span><span class="ident" id="6037698">NewReader</span><span class="op" id="6037707">(</span><span class="ident" id="6037708">cmddat</span><span class="op" id="6037714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037719">if</span>&nbsp;<span class="ident" id="6037722">err</span>&nbsp;<span class="op" id="6037726">:=</span>&nbsp;<span class="ident" id="6037729">binary</span><span class="op" id="6037735">.</span><span class="ident" id="6037736">Read</span><span class="op" id="6037740">(</span><span class="ident" id="6037741">b</span><span class="op" id="6037742">,</span>&nbsp;<span class="ident" id="6037744">bo</span><span class="op" id="6037746">,</span>&nbsp;<span class="op" id="6037748">&amp;</span><span class="ident" id="6037749">hdr</span><span class="op" id="6037752">)</span><span class="op" id="6037753">;</span>&nbsp;<span class="ident" id="6037755">err</span>&nbsp;<span class="op" id="6037759">!=</span>&nbsp;<span class="ident" id="6037762">nil</span>&nbsp;<span class="op" id="6037766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037772">return</span>&nbsp;<span class="ident" id="6037779">nil</span><span class="op" id="6037782">,</span>&nbsp;<span class="ident" id="6037784">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6037791">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037796">strtab</span>&nbsp;<span class="op" id="6037803">:=</span>&nbsp;<span class="builtinfunc" id="6037806">make</span><span class="op" id="6037810">(</span><span class="op" id="6037811">[</span><span class="op" id="6037812">]</span><span class="builtintype" id="6037813">byte</span><span class="op" id="6037817">,</span>&nbsp;<span class="ident" id="6037819">hdr</span><span class="op" id="6037822">.</span><span class="ident" id="6037823">Strsize</span><span class="op" id="6037830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037835">if</span>&nbsp;<span class="ident" id="6037838">_</span><span class="op" id="6037839">,</span>&nbsp;<span class="ident" id="6037841">err</span>&nbsp;<span class="op" id="6037845">:=</span>&nbsp;<span class="ident" id="6037848">r</span><span class="op" id="6037849">.</span><span class="ident" id="6037850">ReadAt</span><span class="op" id="6037856">(</span><span class="ident" id="6037857">strtab</span><span class="op" id="6037863">,</span>&nbsp;<span class="ident" id="6037865">int64</span><span class="op" id="6037870">(</span><span class="ident" id="6037871">hdr</span><span class="op" id="6037874">.</span><span class="ident" id="6037875">Stroff</span><span class="op" id="6037881">)</span><span class="op" id="6037882">)</span><span class="op" id="6037883">;</span>&nbsp;<span class="ident" id="6037885">err</span>&nbsp;<span class="op" id="6037889">!=</span>&nbsp;<span class="ident" id="6037892">nil</span>&nbsp;<span class="op" id="6037896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037902">return</span>&nbsp;<span class="ident" id="6037909">nil</span><span class="op" id="6037912">,</span>&nbsp;<span class="ident" id="6037914">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6037921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037926">var</span>&nbsp;<span class="ident" id="6037930">symsz</span>&nbsp;<span class="builtintype" id="6037936">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6037943">if</span>&nbsp;<span class="ident" id="6037946">f</span><span class="op" id="6037947">.</span><span class="ident" id="6037948">Magic</span>&nbsp;<span class="op" id="6037954">==</span>&nbsp;<span class="ident" id="6037957">Magic64</span>&nbsp;<span class="op" id="6037965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037971">symsz</span>&nbsp;<span class="op" id="6037977">=</span>&nbsp;<span class="num" id="6037979">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6037985">}</span>&nbsp;<span class="keyword" id="6037987">else</span>&nbsp;<span class="op" id="6037992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6037998">symsz</span>&nbsp;<span class="op" id="6038004">=</span>&nbsp;<span class="num" id="6038006">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038012">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038017">symdat</span>&nbsp;<span class="op" id="6038024">:=</span>&nbsp;<span class="builtinfunc" id="6038027">make</span><span class="op" id="6038031">(</span><span class="op" id="6038032">[</span><span class="op" id="6038033">]</span><span class="builtintype" id="6038034">byte</span><span class="op" id="6038038">,</span>&nbsp;<span class="builtintype" id="6038040">int</span><span class="op" id="6038043">(</span><span class="ident" id="6038044">hdr</span><span class="op" id="6038047">.</span><span class="ident" id="6038048">Nsyms</span><span class="op" id="6038053">)</span><span class="op" id="6038054">*</span><span class="ident" id="6038055">symsz</span><span class="op" id="6038060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038065">if</span>&nbsp;<span class="ident" id="6038068">_</span><span class="op" id="6038069">,</span>&nbsp;<span class="ident" id="6038071">err</span>&nbsp;<span class="op" id="6038075">:=</span>&nbsp;<span class="ident" id="6038078">r</span><span class="op" id="6038079">.</span><span class="ident" id="6038080">ReadAt</span><span class="op" id="6038086">(</span><span class="ident" id="6038087">symdat</span><span class="op" id="6038093">,</span>&nbsp;<span class="ident" id="6038095">int64</span><span class="op" id="6038100">(</span><span class="ident" id="6038101">hdr</span><span class="op" id="6038104">.</span><span class="ident" id="6038105">Symoff</span><span class="op" id="6038111">)</span><span class="op" id="6038112">)</span><span class="op" id="6038113">;</span>&nbsp;<span class="ident" id="6038115">err</span>&nbsp;<span class="op" id="6038119">!=</span>&nbsp;<span class="ident" id="6038122">nil</span>&nbsp;<span class="op" id="6038126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038132">return</span>&nbsp;<span class="ident" id="6038139">nil</span><span class="op" id="6038142">,</span>&nbsp;<span class="ident" id="6038144">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038156">st</span><span class="op" id="6038158">,</span>&nbsp;<span class="ident" id="6038160">err</span>&nbsp;<span class="op" id="6038164">:=</span>&nbsp;<span class="ident" id="6038167">f</span><span class="op" id="6038168">.</span><span class="ident" id="6038169">parseSymtab</span><span class="op" id="6038180">(</span><span class="ident" id="6038181">symdat</span><span class="op" id="6038187">,</span>&nbsp;<span class="ident" id="6038189">strtab</span><span class="op" id="6038195">,</span>&nbsp;<span class="ident" id="6038197">cmddat</span><span class="op" id="6038203">,</span>&nbsp;<span class="op" id="6038205">&amp;</span><span class="ident" id="6038206">hdr</span><span class="op" id="6038209">,</span>&nbsp;<span class="ident" id="6038211">offset</span><span class="op" id="6038217">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038222">if</span>&nbsp;<span class="ident" id="6038225">err</span>&nbsp;<span class="op" id="6038229">!=</span>&nbsp;<span class="ident" id="6038232">nil</span>&nbsp;<span class="op" id="6038236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038242">return</span>&nbsp;<span class="ident" id="6038249">nil</span><span class="op" id="6038252">,</span>&nbsp;<span class="ident" id="6038254">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038266">f</span><span class="op" id="6038267">.</span><span class="ident" id="6038268">Loads</span><span class="op" id="6038273">[</span><span class="ident" id="6038274">i</span><span class="op" id="6038275">]</span>&nbsp;<span class="op" id="6038277">=</span>&nbsp;<span class="ident" id="6038279">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038285">f</span><span class="op" id="6038286">.</span><span class="ident" id="6038287">Symtab</span>&nbsp;<span class="op" id="6038294">=</span>&nbsp;<span class="ident" id="6038296">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038302">case</span>&nbsp;<span class="ident" id="6038307">LoadCmdDysymtab</span><span class="op" id="6038322">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038327">var</span>&nbsp;<span class="ident" id="6038331">hdr</span>&nbsp;<span class="ident" id="6038335">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038350">b</span>&nbsp;<span class="op" id="6038352">:=</span>&nbsp;<span class="ident" id="6038355">bytes</span><span class="op" id="6038360">.</span><span class="ident" id="6038361">NewReader</span><span class="op" id="6038370">(</span><span class="ident" id="6038371">cmddat</span><span class="op" id="6038377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038382">if</span>&nbsp;<span class="ident" id="6038385">err</span>&nbsp;<span class="op" id="6038389">:=</span>&nbsp;<span class="ident" id="6038392">binary</span><span class="op" id="6038398">.</span><span class="ident" id="6038399">Read</span><span class="op" id="6038403">(</span><span class="ident" id="6038404">b</span><span class="op" id="6038405">,</span>&nbsp;<span class="ident" id="6038407">bo</span><span class="op" id="6038409">,</span>&nbsp;<span class="op" id="6038411">&amp;</span><span class="ident" id="6038412">hdr</span><span class="op" id="6038415">)</span><span class="op" id="6038416">;</span>&nbsp;<span class="ident" id="6038418">err</span>&nbsp;<span class="op" id="6038422">!=</span>&nbsp;<span class="ident" id="6038425">nil</span>&nbsp;<span class="op" id="6038429">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038435">return</span>&nbsp;<span class="ident" id="6038442">nil</span><span class="op" id="6038445">,</span>&nbsp;<span class="ident" id="6038447">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038459">dat</span>&nbsp;<span class="op" id="6038463">:=</span>&nbsp;<span class="builtinfunc" id="6038466">make</span><span class="op" id="6038470">(</span><span class="op" id="6038471">[</span><span class="op" id="6038472">]</span><span class="builtintype" id="6038473">byte</span><span class="op" id="6038477">,</span>&nbsp;<span class="ident" id="6038479">hdr</span><span class="op" id="6038482">.</span><span class="ident" id="6038483">Nindirectsyms</span><span class="op" id="6038496">*</span><span class="num" id="6038497">4</span><span class="op" id="6038498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038503">if</span>&nbsp;<span class="ident" id="6038506">_</span><span class="op" id="6038507">,</span>&nbsp;<span class="ident" id="6038509">err</span>&nbsp;<span class="op" id="6038513">:=</span>&nbsp;<span class="ident" id="6038516">r</span><span class="op" id="6038517">.</span><span class="ident" id="6038518">ReadAt</span><span class="op" id="6038524">(</span><span class="ident" id="6038525">dat</span><span class="op" id="6038528">,</span>&nbsp;<span class="ident" id="6038530">int64</span><span class="op" id="6038535">(</span><span class="ident" id="6038536">hdr</span><span class="op" id="6038539">.</span><span class="ident" id="6038540">Indirectsymoff</span><span class="op" id="6038554">)</span><span class="op" id="6038555">)</span><span class="op" id="6038556">;</span>&nbsp;<span class="ident" id="6038558">err</span>&nbsp;<span class="op" id="6038562">!=</span>&nbsp;<span class="ident" id="6038565">nil</span>&nbsp;<span class="op" id="6038569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038575">return</span>&nbsp;<span class="ident" id="6038582">nil</span><span class="op" id="6038585">,</span>&nbsp;<span class="ident" id="6038587">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038599">x</span>&nbsp;<span class="op" id="6038601">:=</span>&nbsp;<span class="builtinfunc" id="6038604">make</span><span class="op" id="6038608">(</span><span class="op" id="6038609">[</span><span class="op" id="6038610">]</span><span class="builtintype" id="6038611">uint32</span><span class="op" id="6038617">,</span>&nbsp;<span class="ident" id="6038619">hdr</span><span class="op" id="6038622">.</span><span class="ident" id="6038623">Nindirectsyms</span><span class="op" id="6038636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038641">if</span>&nbsp;<span class="ident" id="6038644">err</span>&nbsp;<span class="op" id="6038648">:=</span>&nbsp;<span class="ident" id="6038651">binary</span><span class="op" id="6038657">.</span><span class="ident" id="6038658">Read</span><span class="op" id="6038662">(</span><span class="ident" id="6038663">bytes</span><span class="op" id="6038668">.</span><span class="ident" id="6038669">NewReader</span><span class="op" id="6038678">(</span><span class="ident" id="6038679">dat</span><span class="op" id="6038682">)</span><span class="op" id="6038683">,</span>&nbsp;<span class="ident" id="6038685">bo</span><span class="op" id="6038687">,</span>&nbsp;<span class="ident" id="6038689">x</span><span class="op" id="6038690">)</span><span class="op" id="6038691">;</span>&nbsp;<span class="ident" id="6038693">err</span>&nbsp;<span class="op" id="6038697">!=</span>&nbsp;<span class="ident" id="6038700">nil</span>&nbsp;<span class="op" id="6038704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038710">return</span>&nbsp;<span class="ident" id="6038717">nil</span><span class="op" id="6038720">,</span>&nbsp;<span class="ident" id="6038722">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6038729">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038734">st</span>&nbsp;<span class="op" id="6038737">:=</span>&nbsp;<span class="builtinfunc" id="6038740">new</span><span class="op" id="6038743">(</span><span class="ident" id="6038744">Dysymtab</span><span class="op" id="6038752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038757">st</span><span class="op" id="6038759">.</span><span class="ident" id="6038760">LoadBytes</span>&nbsp;<span class="op" id="6038770">=</span>&nbsp;<span class="ident" id="6038772">LoadBytes</span><span class="op" id="6038781">(</span><span class="ident" id="6038782">cmddat</span><span class="op" id="6038788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038793">st</span><span class="op" id="6038795">.</span><span class="ident" id="6038796">DysymtabCmd</span>&nbsp;<span class="op" id="6038808">=</span>&nbsp;<span class="ident" id="6038810">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038817">st</span><span class="op" id="6038819">.</span><span class="ident" id="6038820">IndirectSyms</span>&nbsp;<span class="op" id="6038833">=</span>&nbsp;<span class="ident" id="6038835">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038840">f</span><span class="op" id="6038841">.</span><span class="ident" id="6038842">Loads</span><span class="op" id="6038847">[</span><span class="ident" id="6038848">i</span><span class="op" id="6038849">]</span>&nbsp;<span class="op" id="6038851">=</span>&nbsp;<span class="ident" id="6038853">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038859">f</span><span class="op" id="6038860">.</span><span class="ident" id="6038861">Dysymtab</span>&nbsp;<span class="op" id="6038870">=</span>&nbsp;<span class="ident" id="6038872">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038878">case</span>&nbsp;<span class="ident" id="6038883">LoadCmdSegment</span><span class="op" id="6038897">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038902">var</span>&nbsp;<span class="ident" id="6038906">seg32</span>&nbsp;<span class="ident" id="6038912">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038925">b</span>&nbsp;<span class="op" id="6038927">:=</span>&nbsp;<span class="ident" id="6038930">bytes</span><span class="op" id="6038935">.</span><span class="ident" id="6038936">NewReader</span><span class="op" id="6038945">(</span><span class="ident" id="6038946">cmddat</span><span class="op" id="6038952">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6038957">if</span>&nbsp;<span class="ident" id="6038960">err</span>&nbsp;<span class="op" id="6038964">:=</span>&nbsp;<span class="ident" id="6038967">binary</span><span class="op" id="6038973">.</span><span class="ident" id="6038974">Read</span><span class="op" id="6038978">(</span><span class="ident" id="6038979">b</span><span class="op" id="6038980">,</span>&nbsp;<span class="ident" id="6038982">bo</span><span class="op" id="6038984">,</span>&nbsp;<span class="op" id="6038986">&amp;</span><span class="ident" id="6038987">seg32</span><span class="op" id="6038992">)</span><span class="op" id="6038993">;</span>&nbsp;<span class="ident" id="6038995">err</span>&nbsp;<span class="op" id="6038999">!=</span>&nbsp;<span class="ident" id="6039002">nil</span>&nbsp;<span class="op" id="6039006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039012">return</span>&nbsp;<span class="ident" id="6039019">nil</span><span class="op" id="6039022">,</span>&nbsp;<span class="ident" id="6039024">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039036">s</span>&nbsp;<span class="op" id="6039038">=</span>&nbsp;<span class="builtinfunc" id="6039040">new</span><span class="op" id="6039043">(</span><span class="ident" id="6039044">Segment</span><span class="op" id="6039051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039056">s</span><span class="op" id="6039057">.</span><span class="ident" id="6039058">LoadBytes</span>&nbsp;<span class="op" id="6039068">=</span>&nbsp;<span class="ident" id="6039070">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039080">s</span><span class="op" id="6039081">.</span><span class="ident" id="6039082">Cmd</span>&nbsp;<span class="op" id="6039086">=</span>&nbsp;<span class="ident" id="6039088">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039095">s</span><span class="op" id="6039096">.</span><span class="ident" id="6039097">Len</span>&nbsp;<span class="op" id="6039101">=</span>&nbsp;<span class="ident" id="6039103">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039110">s</span><span class="op" id="6039111">.</span><span class="ident" id="6039112">Name</span>&nbsp;<span class="op" id="6039117">=</span>&nbsp;<span class="ident" id="6039119">cstring</span><span class="op" id="6039126">(</span><span class="ident" id="6039127">seg32</span><span class="op" id="6039132">.</span><span class="ident" id="6039133">Name</span><span class="op" id="6039137">[</span><span class="num" id="6039138">0</span><span class="op" id="6039139">:</span><span class="op" id="6039140">]</span><span class="op" id="6039141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039146">s</span><span class="op" id="6039147">.</span><span class="ident" id="6039148">Addr</span>&nbsp;<span class="op" id="6039153">=</span>&nbsp;<span class="ident" id="6039155">uint64</span><span class="op" id="6039161">(</span><span class="ident" id="6039162">seg32</span><span class="op" id="6039167">.</span><span class="ident" id="6039168">Addr</span><span class="op" id="6039172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039177">s</span><span class="op" id="6039178">.</span><span class="ident" id="6039179">Memsz</span>&nbsp;<span class="op" id="6039185">=</span>&nbsp;<span class="ident" id="6039187">uint64</span><span class="op" id="6039193">(</span><span class="ident" id="6039194">seg32</span><span class="op" id="6039199">.</span><span class="ident" id="6039200">Memsz</span><span class="op" id="6039205">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039210">s</span><span class="op" id="6039211">.</span><span class="ident" id="6039212">Offset</span>&nbsp;<span class="op" id="6039219">=</span>&nbsp;<span class="ident" id="6039221">uint64</span><span class="op" id="6039227">(</span><span class="ident" id="6039228">seg32</span><span class="op" id="6039233">.</span><span class="ident" id="6039234">Offset</span><span class="op" id="6039240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039245">s</span><span class="op" id="6039246">.</span><span class="ident" id="6039247">Filesz</span>&nbsp;<span class="op" id="6039254">=</span>&nbsp;<span class="ident" id="6039256">uint64</span><span class="op" id="6039262">(</span><span class="ident" id="6039263">seg32</span><span class="op" id="6039268">.</span><span class="ident" id="6039269">Filesz</span><span class="op" id="6039275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039280">s</span><span class="op" id="6039281">.</span><span class="ident" id="6039282">Maxprot</span>&nbsp;<span class="op" id="6039290">=</span>&nbsp;<span class="ident" id="6039292">seg32</span><span class="op" id="6039297">.</span><span class="ident" id="6039298">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039309">s</span><span class="op" id="6039310">.</span><span class="ident" id="6039311">Prot</span>&nbsp;<span class="op" id="6039316">=</span>&nbsp;<span class="ident" id="6039318">seg32</span><span class="op" id="6039323">.</span><span class="ident" id="6039324">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039332">s</span><span class="op" id="6039333">.</span><span class="ident" id="6039334">Nsect</span>&nbsp;<span class="op" id="6039340">=</span>&nbsp;<span class="ident" id="6039342">seg32</span><span class="op" id="6039347">.</span><span class="ident" id="6039348">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039357">s</span><span class="op" id="6039358">.</span><span class="ident" id="6039359">Flag</span>&nbsp;<span class="op" id="6039364">=</span>&nbsp;<span class="ident" id="6039366">seg32</span><span class="op" id="6039371">.</span><span class="ident" id="6039372">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039380">f</span><span class="op" id="6039381">.</span><span class="ident" id="6039382">Loads</span><span class="op" id="6039387">[</span><span class="ident" id="6039388">i</span><span class="op" id="6039389">]</span>&nbsp;<span class="op" id="6039391">=</span>&nbsp;<span class="ident" id="6039393">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039398">for</span>&nbsp;<span class="ident" id="6039402">i</span>&nbsp;<span class="op" id="6039404">:=</span>&nbsp;<span class="num" id="6039407">0</span><span class="op" id="6039408">;</span>&nbsp;<span class="ident" id="6039410">i</span>&nbsp;<span class="op" id="6039412">&lt;</span>&nbsp;<span class="builtintype" id="6039414">int</span><span class="op" id="6039417">(</span><span class="ident" id="6039418">s</span><span class="op" id="6039419">.</span><span class="ident" id="6039420">Nsect</span><span class="op" id="6039425">)</span><span class="op" id="6039426">;</span>&nbsp;<span class="ident" id="6039428">i</span><span class="op" id="6039429">++</span>&nbsp;<span class="op" id="6039432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039438">var</span>&nbsp;<span class="ident" id="6039442">sh32</span>&nbsp;<span class="ident" id="6039447">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039461">if</span>&nbsp;<span class="ident" id="6039464">err</span>&nbsp;<span class="op" id="6039468">:=</span>&nbsp;<span class="ident" id="6039471">binary</span><span class="op" id="6039477">.</span><span class="ident" id="6039478">Read</span><span class="op" id="6039482">(</span><span class="ident" id="6039483">b</span><span class="op" id="6039484">,</span>&nbsp;<span class="ident" id="6039486">bo</span><span class="op" id="6039488">,</span>&nbsp;<span class="op" id="6039490">&amp;</span><span class="ident" id="6039491">sh32</span><span class="op" id="6039495">)</span><span class="op" id="6039496">;</span>&nbsp;<span class="ident" id="6039498">err</span>&nbsp;<span class="op" id="6039502">!=</span>&nbsp;<span class="ident" id="6039505">nil</span>&nbsp;<span class="op" id="6039509">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039516">return</span>&nbsp;<span class="ident" id="6039523">nil</span><span class="op" id="6039526">,</span>&nbsp;<span class="ident" id="6039528">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039542">sh</span>&nbsp;<span class="op" id="6039545">:=</span>&nbsp;<span class="builtinfunc" id="6039548">new</span><span class="op" id="6039551">(</span><span class="ident" id="6039552">Section</span><span class="op" id="6039559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039565">sh</span><span class="op" id="6039567">.</span><span class="ident" id="6039568">Name</span>&nbsp;<span class="op" id="6039573">=</span>&nbsp;<span class="ident" id="6039575">cstring</span><span class="op" id="6039582">(</span><span class="ident" id="6039583">sh32</span><span class="op" id="6039587">.</span><span class="ident" id="6039588">Name</span><span class="op" id="6039592">[</span><span class="num" id="6039593">0</span><span class="op" id="6039594">:</span><span class="op" id="6039595">]</span><span class="op" id="6039596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039602">sh</span><span class="op" id="6039604">.</span><span class="ident" id="6039605">Seg</span>&nbsp;<span class="op" id="6039609">=</span>&nbsp;<span class="ident" id="6039611">cstring</span><span class="op" id="6039618">(</span><span class="ident" id="6039619">sh32</span><span class="op" id="6039623">.</span><span class="ident" id="6039624">Seg</span><span class="op" id="6039627">[</span><span class="num" id="6039628">0</span><span class="op" id="6039629">:</span><span class="op" id="6039630">]</span><span class="op" id="6039631">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039637">sh</span><span class="op" id="6039639">.</span><span class="ident" id="6039640">Addr</span>&nbsp;<span class="op" id="6039645">=</span>&nbsp;<span class="ident" id="6039647">uint64</span><span class="op" id="6039653">(</span><span class="ident" id="6039654">sh32</span><span class="op" id="6039658">.</span><span class="ident" id="6039659">Addr</span><span class="op" id="6039663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039669">sh</span><span class="op" id="6039671">.</span><span class="ident" id="6039672">Size</span>&nbsp;<span class="op" id="6039677">=</span>&nbsp;<span class="ident" id="6039679">uint64</span><span class="op" id="6039685">(</span><span class="ident" id="6039686">sh32</span><span class="op" id="6039690">.</span><span class="ident" id="6039691">Size</span><span class="op" id="6039695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039701">sh</span><span class="op" id="6039703">.</span><span class="ident" id="6039704">Offset</span>&nbsp;<span class="op" id="6039711">=</span>&nbsp;<span class="ident" id="6039713">sh32</span><span class="op" id="6039717">.</span><span class="ident" id="6039718">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039729">sh</span><span class="op" id="6039731">.</span><span class="ident" id="6039732">Align</span>&nbsp;<span class="op" id="6039738">=</span>&nbsp;<span class="ident" id="6039740">sh32</span><span class="op" id="6039744">.</span><span class="ident" id="6039745">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039755">sh</span><span class="op" id="6039757">.</span><span class="ident" id="6039758">Reloff</span>&nbsp;<span class="op" id="6039765">=</span>&nbsp;<span class="ident" id="6039767">sh32</span><span class="op" id="6039771">.</span><span class="ident" id="6039772">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039783">sh</span><span class="op" id="6039785">.</span><span class="ident" id="6039786">Nreloc</span>&nbsp;<span class="op" id="6039793">=</span>&nbsp;<span class="ident" id="6039795">sh32</span><span class="op" id="6039799">.</span><span class="ident" id="6039800">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039811">sh</span><span class="op" id="6039813">.</span><span class="ident" id="6039814">Flags</span>&nbsp;<span class="op" id="6039820">=</span>&nbsp;<span class="ident" id="6039822">sh32</span><span class="op" id="6039826">.</span><span class="ident" id="6039827">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039837">f</span><span class="op" id="6039838">.</span><span class="ident" id="6039839">pushSection</span><span class="op" id="6039850">(</span><span class="ident" id="6039851">sh</span><span class="op" id="6039853">,</span>&nbsp;<span class="ident" id="6039855">r</span><span class="op" id="6039856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039866">case</span>&nbsp;<span class="ident" id="6039871">LoadCmdSegment64</span><span class="op" id="6039887">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039892">var</span>&nbsp;<span class="ident" id="6039896">seg64</span>&nbsp;<span class="ident" id="6039902">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039915">b</span>&nbsp;<span class="op" id="6039917">:=</span>&nbsp;<span class="ident" id="6039920">bytes</span><span class="op" id="6039925">.</span><span class="ident" id="6039926">NewReader</span><span class="op" id="6039935">(</span><span class="ident" id="6039936">cmddat</span><span class="op" id="6039942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039947">if</span>&nbsp;<span class="ident" id="6039950">err</span>&nbsp;<span class="op" id="6039954">:=</span>&nbsp;<span class="ident" id="6039957">binary</span><span class="op" id="6039963">.</span><span class="ident" id="6039964">Read</span><span class="op" id="6039968">(</span><span class="ident" id="6039969">b</span><span class="op" id="6039970">,</span>&nbsp;<span class="ident" id="6039972">bo</span><span class="op" id="6039974">,</span>&nbsp;<span class="op" id="6039976">&amp;</span><span class="ident" id="6039977">seg64</span><span class="op" id="6039982">)</span><span class="op" id="6039983">;</span>&nbsp;<span class="ident" id="6039985">err</span>&nbsp;<span class="op" id="6039989">!=</span>&nbsp;<span class="ident" id="6039992">nil</span>&nbsp;<span class="op" id="6039996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040002">return</span>&nbsp;<span class="ident" id="6040009">nil</span><span class="op" id="6040012">,</span>&nbsp;<span class="ident" id="6040014">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040026">s</span>&nbsp;<span class="op" id="6040028">=</span>&nbsp;<span class="builtinfunc" id="6040030">new</span><span class="op" id="6040033">(</span><span class="ident" id="6040034">Segment</span><span class="op" id="6040041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040046">s</span><span class="op" id="6040047">.</span><span class="ident" id="6040048">LoadBytes</span>&nbsp;<span class="op" id="6040058">=</span>&nbsp;<span class="ident" id="6040060">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040070">s</span><span class="op" id="6040071">.</span><span class="ident" id="6040072">Cmd</span>&nbsp;<span class="op" id="6040076">=</span>&nbsp;<span class="ident" id="6040078">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040085">s</span><span class="op" id="6040086">.</span><span class="ident" id="6040087">Len</span>&nbsp;<span class="op" id="6040091">=</span>&nbsp;<span class="ident" id="6040093">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040100">s</span><span class="op" id="6040101">.</span><span class="ident" id="6040102">Name</span>&nbsp;<span class="op" id="6040107">=</span>&nbsp;<span class="ident" id="6040109">cstring</span><span class="op" id="6040116">(</span><span class="ident" id="6040117">seg64</span><span class="op" id="6040122">.</span><span class="ident" id="6040123">Name</span><span class="op" id="6040127">[</span><span class="num" id="6040128">0</span><span class="op" id="6040129">:</span><span class="op" id="6040130">]</span><span class="op" id="6040131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040136">s</span><span class="op" id="6040137">.</span><span class="ident" id="6040138">Addr</span>&nbsp;<span class="op" id="6040143">=</span>&nbsp;<span class="ident" id="6040145">seg64</span><span class="op" id="6040150">.</span><span class="ident" id="6040151">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040159">s</span><span class="op" id="6040160">.</span><span class="ident" id="6040161">Memsz</span>&nbsp;<span class="op" id="6040167">=</span>&nbsp;<span class="ident" id="6040169">seg64</span><span class="op" id="6040174">.</span><span class="ident" id="6040175">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040184">s</span><span class="op" id="6040185">.</span><span class="ident" id="6040186">Offset</span>&nbsp;<span class="op" id="6040193">=</span>&nbsp;<span class="ident" id="6040195">seg64</span><span class="op" id="6040200">.</span><span class="ident" id="6040201">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040211">s</span><span class="op" id="6040212">.</span><span class="ident" id="6040213">Filesz</span>&nbsp;<span class="op" id="6040220">=</span>&nbsp;<span class="ident" id="6040222">seg64</span><span class="op" id="6040227">.</span><span class="ident" id="6040228">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040238">s</span><span class="op" id="6040239">.</span><span class="ident" id="6040240">Maxprot</span>&nbsp;<span class="op" id="6040248">=</span>&nbsp;<span class="ident" id="6040250">seg64</span><span class="op" id="6040255">.</span><span class="ident" id="6040256">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040267">s</span><span class="op" id="6040268">.</span><span class="ident" id="6040269">Prot</span>&nbsp;<span class="op" id="6040274">=</span>&nbsp;<span class="ident" id="6040276">seg64</span><span class="op" id="6040281">.</span><span class="ident" id="6040282">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040290">s</span><span class="op" id="6040291">.</span><span class="ident" id="6040292">Nsect</span>&nbsp;<span class="op" id="6040298">=</span>&nbsp;<span class="ident" id="6040300">seg64</span><span class="op" id="6040305">.</span><span class="ident" id="6040306">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040315">s</span><span class="op" id="6040316">.</span><span class="ident" id="6040317">Flag</span>&nbsp;<span class="op" id="6040322">=</span>&nbsp;<span class="ident" id="6040324">seg64</span><span class="op" id="6040329">.</span><span class="ident" id="6040330">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040338">f</span><span class="op" id="6040339">.</span><span class="ident" id="6040340">Loads</span><span class="op" id="6040345">[</span><span class="ident" id="6040346">i</span><span class="op" id="6040347">]</span>&nbsp;<span class="op" id="6040349">=</span>&nbsp;<span class="ident" id="6040351">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040356">for</span>&nbsp;<span class="ident" id="6040360">i</span>&nbsp;<span class="op" id="6040362">:=</span>&nbsp;<span class="num" id="6040365">0</span><span class="op" id="6040366">;</span>&nbsp;<span class="ident" id="6040368">i</span>&nbsp;<span class="op" id="6040370">&lt;</span>&nbsp;<span class="builtintype" id="6040372">int</span><span class="op" id="6040375">(</span><span class="ident" id="6040376">s</span><span class="op" id="6040377">.</span><span class="ident" id="6040378">Nsect</span><span class="op" id="6040383">)</span><span class="op" id="6040384">;</span>&nbsp;<span class="ident" id="6040386">i</span><span class="op" id="6040387">++</span>&nbsp;<span class="op" id="6040390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040396">var</span>&nbsp;<span class="ident" id="6040400">sh64</span>&nbsp;<span class="ident" id="6040405">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040419">if</span>&nbsp;<span class="ident" id="6040422">err</span>&nbsp;<span class="op" id="6040426">:=</span>&nbsp;<span class="ident" id="6040429">binary</span><span class="op" id="6040435">.</span><span class="ident" id="6040436">Read</span><span class="op" id="6040440">(</span><span class="ident" id="6040441">b</span><span class="op" id="6040442">,</span>&nbsp;<span class="ident" id="6040444">bo</span><span class="op" id="6040446">,</span>&nbsp;<span class="op" id="6040448">&amp;</span><span class="ident" id="6040449">sh64</span><span class="op" id="6040453">)</span><span class="op" id="6040454">;</span>&nbsp;<span class="ident" id="6040456">err</span>&nbsp;<span class="op" id="6040460">!=</span>&nbsp;<span class="ident" id="6040463">nil</span>&nbsp;<span class="op" id="6040467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040474">return</span>&nbsp;<span class="ident" id="6040481">nil</span><span class="op" id="6040484">,</span>&nbsp;<span class="ident" id="6040486">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040494">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040500">sh</span>&nbsp;<span class="op" id="6040503">:=</span>&nbsp;<span class="builtinfunc" id="6040506">new</span><span class="op" id="6040509">(</span><span class="ident" id="6040510">Section</span><span class="op" id="6040517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040523">sh</span><span class="op" id="6040525">.</span><span class="ident" id="6040526">Name</span>&nbsp;<span class="op" id="6040531">=</span>&nbsp;<span class="ident" id="6040533">cstring</span><span class="op" id="6040540">(</span><span class="ident" id="6040541">sh64</span><span class="op" id="6040545">.</span><span class="ident" id="6040546">Name</span><span class="op" id="6040550">[</span><span class="num" id="6040551">0</span><span class="op" id="6040552">:</span><span class="op" id="6040553">]</span><span class="op" id="6040554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040560">sh</span><span class="op" id="6040562">.</span><span class="ident" id="6040563">Seg</span>&nbsp;<span class="op" id="6040567">=</span>&nbsp;<span class="ident" id="6040569">cstring</span><span class="op" id="6040576">(</span><span class="ident" id="6040577">sh64</span><span class="op" id="6040581">.</span><span class="ident" id="6040582">Seg</span><span class="op" id="6040585">[</span><span class="num" id="6040586">0</span><span class="op" id="6040587">:</span><span class="op" id="6040588">]</span><span class="op" id="6040589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040595">sh</span><span class="op" id="6040597">.</span><span class="ident" id="6040598">Addr</span>&nbsp;<span class="op" id="6040603">=</span>&nbsp;<span class="ident" id="6040605">sh64</span><span class="op" id="6040609">.</span><span class="ident" id="6040610">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040619">sh</span><span class="op" id="6040621">.</span><span class="ident" id="6040622">Size</span>&nbsp;<span class="op" id="6040627">=</span>&nbsp;<span class="ident" id="6040629">sh64</span><span class="op" id="6040633">.</span><span class="ident" id="6040634">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040643">sh</span><span class="op" id="6040645">.</span><span class="ident" id="6040646">Offset</span>&nbsp;<span class="op" id="6040653">=</span>&nbsp;<span class="ident" id="6040655">sh64</span><span class="op" id="6040659">.</span><span class="ident" id="6040660">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040671">sh</span><span class="op" id="6040673">.</span><span class="ident" id="6040674">Align</span>&nbsp;<span class="op" id="6040680">=</span>&nbsp;<span class="ident" id="6040682">sh64</span><span class="op" id="6040686">.</span><span class="ident" id="6040687">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040697">sh</span><span class="op" id="6040699">.</span><span class="ident" id="6040700">Reloff</span>&nbsp;<span class="op" id="6040707">=</span>&nbsp;<span class="ident" id="6040709">sh64</span><span class="op" id="6040713">.</span><span class="ident" id="6040714">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040725">sh</span><span class="op" id="6040727">.</span><span class="ident" id="6040728">Nreloc</span>&nbsp;<span class="op" id="6040735">=</span>&nbsp;<span class="ident" id="6040737">sh64</span><span class="op" id="6040741">.</span><span class="ident" id="6040742">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040753">sh</span><span class="op" id="6040755">.</span><span class="ident" id="6040756">Flags</span>&nbsp;<span class="op" id="6040762">=</span>&nbsp;<span class="ident" id="6040764">sh64</span><span class="op" id="6040768">.</span><span class="ident" id="6040769">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040779">f</span><span class="op" id="6040780">.</span><span class="ident" id="6040781">pushSection</span><span class="op" id="6040792">(</span><span class="ident" id="6040793">sh</span><span class="op" id="6040795">,</span>&nbsp;<span class="ident" id="6040797">r</span><span class="op" id="6040798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040811">if</span>&nbsp;<span class="ident" id="6040814">s</span>&nbsp;<span class="op" id="6040816">!=</span>&nbsp;<span class="ident" id="6040819">nil</span>&nbsp;<span class="op" id="6040823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040828">s</span><span class="op" id="6040829">.</span><span class="ident" id="6040830">sr</span>&nbsp;<span class="op" id="6040833">=</span>&nbsp;<span class="ident" id="6040835">io</span><span class="op" id="6040837">.</span><span class="ident" id="6040838">NewSectionReader</span><span class="op" id="6040854">(</span><span class="ident" id="6040855">r</span><span class="op" id="6040856">,</span>&nbsp;<span class="ident" id="6040858">int64</span><span class="op" id="6040863">(</span><span class="ident" id="6040864">s</span><span class="op" id="6040865">.</span><span class="ident" id="6040866">Offset</span><span class="op" id="6040872">)</span><span class="op" id="6040873">,</span>&nbsp;<span class="ident" id="6040875">int64</span><span class="op" id="6040880">(</span><span class="ident" id="6040881">s</span><span class="op" id="6040882">.</span><span class="ident" id="6040883">Filesz</span><span class="op" id="6040889">)</span><span class="op" id="6040890">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040895">s</span><span class="op" id="6040896">.</span><span class="ident" id="6040897">ReaderAt</span>&nbsp;<span class="op" id="6040906">=</span>&nbsp;<span class="ident" id="6040908">s</span><span class="op" id="6040909">.</span><span class="ident" id="6040910">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040921">return</span>&nbsp;<span class="ident" id="6040928">f</span><span class="op" id="6040929">,</span>&nbsp;<span class="ident" id="6040931">nil</span><br>
<span class="lineno"></span><span class="op" id="6040935">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="6040938">func</span>&nbsp;<span class="op" id="6040943">(</span><span class="ident" id="6040944">f</span>&nbsp;<span class="op" id="6040946">*</span><span class="ident" id="6040947">File</span><span class="op" id="6040951">)</span>&nbsp;<span class="ident" id="6040953">parseSymtab</span><span class="op" id="6040964">(</span><span class="ident" id="6040965">symdat</span><span class="op" id="6040971">,</span>&nbsp;<span class="ident" id="6040973">strtab</span><span class="op" id="6040979">,</span>&nbsp;<span class="ident" id="6040981">cmddat</span>&nbsp;<span class="op" id="6040988">[</span><span class="op" id="6040989">]</span><span class="builtintype" id="6040990">byte</span><span class="op" id="6040994">,</span>&nbsp;<span class="ident" id="6040996">hdr</span>&nbsp;<span class="op" id="6041000">*</span><span class="ident" id="6041001">SymtabCmd</span><span class="op" id="6041010">,</span>&nbsp;<span class="ident" id="6041012">offset</span>&nbsp;<span class="ident" id="6041019">int64</span><span class="op" id="6041024">)</span>&nbsp;<span class="op" id="6041026">(</span><span class="op" id="6041027">*</span><span class="ident" id="6041028">Symtab</span><span class="op" id="6041034">,</span>&nbsp;<span class="builtintype" id="6041036">error</span><span class="op" id="6041041">)</span>&nbsp;<span class="op" id="6041043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041046">bo</span>&nbsp;<span class="op" id="6041049">:=</span>&nbsp;<span class="ident" id="6041052">f</span><span class="op" id="6041053">.</span><span class="ident" id="6041054">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041065">symtab</span>&nbsp;<span class="op" id="6041072">:=</span>&nbsp;<span class="builtinfunc" id="6041075">make</span><span class="op" id="6041079">(</span><span class="op" id="6041080">[</span><span class="op" id="6041081">]</span><span class="ident" id="6041082">Symbol</span><span class="op" id="6041088">,</span>&nbsp;<span class="ident" id="6041090">hdr</span><span class="op" id="6041093">.</span><span class="ident" id="6041094">Nsyms</span><span class="op" id="6041099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041102">b</span>&nbsp;<span class="op" id="6041104">:=</span>&nbsp;<span class="ident" id="6041107">bytes</span><span class="op" id="6041112">.</span><span class="ident" id="6041113">NewReader</span><span class="op" id="6041122">(</span><span class="ident" id="6041123">symdat</span><span class="op" id="6041129">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041132">for</span>&nbsp;<span class="ident" id="6041136">i</span>&nbsp;<span class="op" id="6041138">:=</span>&nbsp;<span class="keyword" id="6041141">range</span>&nbsp;<span class="ident" id="6041147">symtab</span>&nbsp;<span class="op" id="6041154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041158">var</span>&nbsp;<span class="ident" id="6041162">n</span>&nbsp;<span class="ident" id="6041164">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041174">if</span>&nbsp;<span class="ident" id="6041177">f</span><span class="op" id="6041178">.</span><span class="ident" id="6041179">Magic</span>&nbsp;<span class="op" id="6041185">==</span>&nbsp;<span class="ident" id="6041188">Magic64</span>&nbsp;<span class="op" id="6041196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041201">if</span>&nbsp;<span class="ident" id="6041204">err</span>&nbsp;<span class="op" id="6041208">:=</span>&nbsp;<span class="ident" id="6041211">binary</span><span class="op" id="6041217">.</span><span class="ident" id="6041218">Read</span><span class="op" id="6041222">(</span><span class="ident" id="6041223">b</span><span class="op" id="6041224">,</span>&nbsp;<span class="ident" id="6041226">bo</span><span class="op" id="6041228">,</span>&nbsp;<span class="op" id="6041230">&amp;</span><span class="ident" id="6041231">n</span><span class="op" id="6041232">)</span><span class="op" id="6041233">;</span>&nbsp;<span class="ident" id="6041235">err</span>&nbsp;<span class="op" id="6041239">!=</span>&nbsp;<span class="ident" id="6041242">nil</span>&nbsp;<span class="op" id="6041246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041252">return</span>&nbsp;<span class="ident" id="6041259">nil</span><span class="op" id="6041262">,</span>&nbsp;<span class="ident" id="6041264">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041275">}</span>&nbsp;<span class="keyword" id="6041277">else</span>&nbsp;<span class="op" id="6041282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041287">var</span>&nbsp;<span class="ident" id="6041291">n32</span>&nbsp;<span class="ident" id="6041295">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041306">if</span>&nbsp;<span class="ident" id="6041309">err</span>&nbsp;<span class="op" id="6041313">:=</span>&nbsp;<span class="ident" id="6041316">binary</span><span class="op" id="6041322">.</span><span class="ident" id="6041323">Read</span><span class="op" id="6041327">(</span><span class="ident" id="6041328">b</span><span class="op" id="6041329">,</span>&nbsp;<span class="ident" id="6041331">bo</span><span class="op" id="6041333">,</span>&nbsp;<span class="op" id="6041335">&amp;</span><span class="ident" id="6041336">n32</span><span class="op" id="6041339">)</span><span class="op" id="6041340">;</span>&nbsp;<span class="ident" id="6041342">err</span>&nbsp;<span class="op" id="6041346">!=</span>&nbsp;<span class="ident" id="6041349">nil</span>&nbsp;<span class="op" id="6041353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041359">return</span>&nbsp;<span class="ident" id="6041366">nil</span><span class="op" id="6041369">,</span>&nbsp;<span class="ident" id="6041371">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041383">n</span><span class="op" id="6041384">.</span><span class="ident" id="6041385">Name</span>&nbsp;<span class="op" id="6041390">=</span>&nbsp;<span class="ident" id="6041392">n32</span><span class="op" id="6041395">.</span><span class="ident" id="6041396">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041404">n</span><span class="op" id="6041405">.</span><span class="ident" id="6041406">Type</span>&nbsp;<span class="op" id="6041411">=</span>&nbsp;<span class="ident" id="6041413">n32</span><span class="op" id="6041416">.</span><span class="ident" id="6041417">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041425">n</span><span class="op" id="6041426">.</span><span class="ident" id="6041427">Sect</span>&nbsp;<span class="op" id="6041432">=</span>&nbsp;<span class="ident" id="6041434">n32</span><span class="op" id="6041437">.</span><span class="ident" id="6041438">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041446">n</span><span class="op" id="6041447">.</span><span class="ident" id="6041448">Desc</span>&nbsp;<span class="op" id="6041453">=</span>&nbsp;<span class="ident" id="6041455">n32</span><span class="op" id="6041458">.</span><span class="ident" id="6041459">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041467">n</span><span class="op" id="6041468">.</span><span class="ident" id="6041469">Value</span>&nbsp;<span class="op" id="6041475">=</span>&nbsp;<span class="ident" id="6041477">uint64</span><span class="op" id="6041483">(</span><span class="ident" id="6041484">n32</span><span class="op" id="6041487">.</span><span class="ident" id="6041488">Value</span><span class="op" id="6041493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041501">sym</span>&nbsp;<span class="op" id="6041505">:=</span>&nbsp;<span class="op" id="6041508">&amp;</span><span class="ident" id="6041509">symtab</span><span class="op" id="6041515">[</span><span class="ident" id="6041516">i</span><span class="op" id="6041517">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041521">if</span>&nbsp;<span class="ident" id="6041524">n</span><span class="op" id="6041525">.</span><span class="ident" id="6041526">Name</span>&nbsp;<span class="op" id="6041531">&gt;=</span>&nbsp;<span class="builtintype" id="6041534">uint32</span><span class="op" id="6041540">(</span><span class="builtinfunc" id="6041541">len</span><span class="op" id="6041544">(</span><span class="ident" id="6041545">strtab</span><span class="op" id="6041551">)</span><span class="op" id="6041552">)</span>&nbsp;<span class="op" id="6041554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041559">return</span>&nbsp;<span class="ident" id="6041566">nil</span><span class="op" id="6041569">,</span>&nbsp;<span class="op" id="6041571">&amp;</span><span class="ident" id="6041572">FormatError</span><span class="op" id="6041583">{</span><span class="ident" id="6041584">offset</span><span class="op" id="6041590">,</span>&nbsp;<span class="string" id="6041592">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6041622">,</span>&nbsp;<span class="ident" id="6041624">n</span><span class="op" id="6041625">.</span><span class="ident" id="6041626">Name</span><span class="op" id="6041630">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041638">sym</span><span class="op" id="6041641">.</span><span class="ident" id="6041642">Name</span>&nbsp;<span class="op" id="6041647">=</span>&nbsp;<span class="ident" id="6041649">cstring</span><span class="op" id="6041656">(</span><span class="ident" id="6041657">strtab</span><span class="op" id="6041663">[</span><span class="ident" id="6041664">n</span><span class="op" id="6041665">.</span><span class="ident" id="6041666">Name</span><span class="op" id="6041670">:</span><span class="op" id="6041671">]</span><span class="op" id="6041672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041676">sym</span><span class="op" id="6041679">.</span><span class="ident" id="6041680">Type</span>&nbsp;<span class="op" id="6041685">=</span>&nbsp;<span class="ident" id="6041687">n</span><span class="op" id="6041688">.</span><span class="ident" id="6041689">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041696">sym</span><span class="op" id="6041699">.</span><span class="ident" id="6041700">Sect</span>&nbsp;<span class="op" id="6041705">=</span>&nbsp;<span class="ident" id="6041707">n</span><span class="op" id="6041708">.</span><span class="ident" id="6041709">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041716">sym</span><span class="op" id="6041719">.</span><span class="ident" id="6041720">Desc</span>&nbsp;<span class="op" id="6041725">=</span>&nbsp;<span class="ident" id="6041727">n</span><span class="op" id="6041728">.</span><span class="ident" id="6041729">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041736">sym</span><span class="op" id="6041739">.</span><span class="ident" id="6041740">Value</span>&nbsp;<span class="op" id="6041746">=</span>&nbsp;<span class="ident" id="6041748">n</span><span class="op" id="6041749">.</span><span class="ident" id="6041750">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041760">st</span>&nbsp;<span class="op" id="6041763">:=</span>&nbsp;<span class="builtinfunc" id="6041766">new</span><span class="op" id="6041769">(</span><span class="ident" id="6041770">Symtab</span><span class="op" id="6041776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041779">st</span><span class="op" id="6041781">.</span><span class="ident" id="6041782">LoadBytes</span>&nbsp;<span class="op" id="6041792">=</span>&nbsp;<span class="ident" id="6041794">LoadBytes</span><span class="op" id="6041803">(</span><span class="ident" id="6041804">cmddat</span><span class="op" id="6041810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041813">st</span><span class="op" id="6041815">.</span><span class="ident" id="6041816">Syms</span>&nbsp;<span class="op" id="6041821">=</span>&nbsp;<span class="ident" id="6041823">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041831">return</span>&nbsp;<span class="ident" id="6041838">st</span><span class="op" id="6041840">,</span>&nbsp;<span class="ident" id="6041842">nil</span><br>
<span class="lineno"></span><span class="op" id="6041846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6041849">func</span>&nbsp;<span class="op" id="6041854">(</span><span class="ident" id="6041855">f</span>&nbsp;<span class="op" id="6041857">*</span><span class="ident" id="6041858">File</span><span class="op" id="6041862">)</span>&nbsp;<span class="ident" id="6041864">pushSection</span><span class="op" id="6041875">(</span><span class="ident" id="6041876">sh</span>&nbsp;<span class="op" id="6041879">*</span><span class="ident" id="6041880">Section</span><span class="op" id="6041887">,</span>&nbsp;<span class="ident" id="6041889">r</span>&nbsp;<span class="ident" id="6041891">io</span><span class="op" id="6041893">.</span><span class="ident" id="6041894">ReaderAt</span><span class="op" id="6041902">)</span>&nbsp;<span class="op" id="6041904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041907">f</span><span class="op" id="6041908">.</span><span class="ident" id="6041909">Sections</span>&nbsp;<span class="op" id="6041918">=</span>&nbsp;<span class="builtinfunc" id="6041920">append</span><span class="op" id="6041926">(</span><span class="ident" id="6041927">f</span><span class="op" id="6041928">.</span><span class="ident" id="6041929">Sections</span><span class="op" id="6041937">,</span>&nbsp;<span class="ident" id="6041939">sh</span><span class="op" id="6041941">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041944">sh</span><span class="op" id="6041946">.</span><span class="ident" id="6041947">sr</span>&nbsp;<span class="op" id="6041950">=</span>&nbsp;<span class="ident" id="6041952">io</span><span class="op" id="6041954">.</span><span class="ident" id="6041955">NewSectionReader</span><span class="op" id="6041971">(</span><span class="ident" id="6041972">r</span><span class="op" id="6041973">,</span>&nbsp;<span class="ident" id="6041975">int64</span><span class="op" id="6041980">(</span><span class="ident" id="6041981">sh</span><span class="op" id="6041983">.</span><span class="ident" id="6041984">Offset</span><span class="op" id="6041990">)</span><span class="op" id="6041991">,</span>&nbsp;<span class="ident" id="6041993">int64</span><span class="op" id="6041998">(</span><span class="ident" id="6041999">sh</span><span class="op" id="6042001">.</span><span class="ident" id="6042002">Size</span><span class="op" id="6042006">)</span><span class="op" id="6042007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042010">sh</span><span class="op" id="6042012">.</span><span class="ident" id="6042013">ReaderAt</span>&nbsp;<span class="op" id="6042022">=</span>&nbsp;<span class="ident" id="6042024">sh</span><span class="op" id="6042026">.</span><span class="ident" id="6042027">sr</span><br>
<span class="lineno"></span><span class="op" id="6042030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6042033">func</span>&nbsp;<span class="ident" id="6042038">cstring</span><span class="op" id="6042045">(</span><span class="ident" id="6042046">b</span>&nbsp;<span class="op" id="6042048">[</span><span class="op" id="6042049">]</span><span class="builtintype" id="6042050">byte</span><span class="op" id="6042054">)</span>&nbsp;<span class="builtintype" id="6042056">string</span>&nbsp;<span class="op" id="6042063">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042066">var</span>&nbsp;<span class="ident" id="6042070">i</span>&nbsp;<span class="builtintype" id="6042072">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042077">for</span>&nbsp;<span class="ident" id="6042081">i</span>&nbsp;<span class="op" id="6042083">=</span>&nbsp;<span class="num" id="6042085">0</span><span class="op" id="6042086">;</span>&nbsp;<span class="ident" id="6042088">i</span>&nbsp;<span class="op" id="6042090">&lt;</span>&nbsp;<span class="builtinfunc" id="6042092">len</span><span class="op" id="6042095">(</span><span class="ident" id="6042096">b</span><span class="op" id="6042097">)</span>&nbsp;<span class="op" id="6042099">&amp;&amp;</span>&nbsp;<span class="ident" id="6042102">b</span><span class="op" id="6042103">[</span><span class="ident" id="6042104">i</span><span class="op" id="6042105">]</span>&nbsp;<span class="op" id="6042107">!=</span>&nbsp;<span class="num" id="6042110">0</span><span class="op" id="6042111">;</span>&nbsp;<span class="ident" id="6042113">i</span><span class="op" id="6042114">++</span>&nbsp;<span class="op" id="6042117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042123">return</span>&nbsp;<span class="builtintype" id="6042130">string</span><span class="op" id="6042136">(</span><span class="ident" id="6042137">b</span><span class="op" id="6042138">[</span><span class="num" id="6042139">0</span><span class="op" id="6042140">:</span><span class="ident" id="6042141">i</span><span class="op" id="6042142">]</span><span class="op" id="6042143">)</span><br>
<span class="lineno"></span><span class="op" id="6042145">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="6042148">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6042240">func</span>&nbsp;<span class="op" id="6042245">(</span><span class="ident" id="6042246">f</span>&nbsp;<span class="op" id="6042248">*</span><span class="ident" id="6042249">File</span><span class="op" id="6042253">)</span>&nbsp;<span class="ident" id="6042255">Segment</span><span class="op" id="6042262">(</span><span class="ident" id="6042263">name</span>&nbsp;<span class="builtintype" id="6042268">string</span><span class="op" id="6042274">)</span>&nbsp;<span class="op" id="6042276">*</span><span class="ident" id="6042277">Segment</span>&nbsp;<span class="op" id="6042285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042288">for</span>&nbsp;<span class="ident" id="6042292">_</span><span class="op" id="6042293">,</span>&nbsp;<span class="ident" id="6042295">l</span>&nbsp;<span class="op" id="6042297">:=</span>&nbsp;<span class="keyword" id="6042300">range</span>&nbsp;<span class="ident" id="6042306">f</span><span class="op" id="6042307">.</span><span class="ident" id="6042308">Loads</span>&nbsp;<span class="op" id="6042314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042318">if</span>&nbsp;<span class="ident" id="6042321">s</span><span class="op" id="6042322">,</span>&nbsp;<span class="ident" id="6042324">ok</span>&nbsp;<span class="op" id="6042327">:=</span>&nbsp;<span class="ident" id="6042330">l</span><span class="op" id="6042331">.</span><span class="op" id="6042332">(</span><span class="op" id="6042333">*</span><span class="ident" id="6042334">Segment</span><span class="op" id="6042341">)</span><span class="op" id="6042342">;</span>&nbsp;<span class="ident" id="6042344">ok</span>&nbsp;<span class="op" id="6042347">&amp;&amp;</span>&nbsp;<span class="ident" id="6042350">s</span><span class="op" id="6042351">.</span><span class="ident" id="6042352">Name</span>&nbsp;<span class="op" id="6042357">==</span>&nbsp;<span class="ident" id="6042360">name</span>&nbsp;<span class="op" id="6042365">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042370">return</span>&nbsp;<span class="ident" id="6042377">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042387">return</span>&nbsp;<span class="ident" id="6042394">nil</span><br>
<span class="lineno"></span><span class="op" id="6042398">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="6042401">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6042477">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6042496">func</span>&nbsp;<span class="op" id="6042501">(</span><span class="ident" id="6042502">f</span>&nbsp;<span class="op" id="6042504">*</span><span class="ident" id="6042505">File</span><span class="op" id="6042509">)</span>&nbsp;<span class="ident" id="6042511">Section</span><span class="op" id="6042518">(</span><span class="ident" id="6042519">name</span>&nbsp;<span class="builtintype" id="6042524">string</span><span class="op" id="6042530">)</span>&nbsp;<span class="op" id="6042532">*</span><span class="ident" id="6042533">Section</span>&nbsp;<span class="op" id="6042541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042544">for</span>&nbsp;<span class="ident" id="6042548">_</span><span class="op" id="6042549">,</span>&nbsp;<span class="ident" id="6042551">s</span>&nbsp;<span class="op" id="6042553">:=</span>&nbsp;<span class="keyword" id="6042556">range</span>&nbsp;<span class="ident" id="6042562">f</span><span class="op" id="6042563">.</span><span class="ident" id="6042564">Sections</span>&nbsp;<span class="op" id="6042573">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042577">if</span>&nbsp;<span class="ident" id="6042580">s</span><span class="op" id="6042581">.</span><span class="ident" id="6042582">Name</span>&nbsp;<span class="op" id="6042587">==</span>&nbsp;<span class="ident" id="6042590">name</span>&nbsp;<span class="op" id="6042595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042600">return</span>&nbsp;<span class="ident" id="6042607">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042617">return</span>&nbsp;<span class="ident" id="6042624">nil</span><br>
<span class="lineno">470</span><span class="op" id="6042628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6042631">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6042697">func</span>&nbsp;<span class="op" id="6042702">(</span><span class="ident" id="6042703">f</span>&nbsp;<span class="op" id="6042705">*</span><span class="ident" id="6042706">File</span><span class="op" id="6042710">)</span>&nbsp;<span class="ident" id="6042712">DWARF</span><span class="op" id="6042717">(</span><span class="op" id="6042718">)</span>&nbsp;<span class="op" id="6042720">(</span><span class="op" id="6042721">*</span><span class="ident" id="6042722">dwarf</span><span class="op" id="6042727">.</span><span class="ident" id="6042728">Data</span><span class="op" id="6042732">,</span>&nbsp;<span class="builtintype" id="6042734">error</span><span class="op" id="6042739">)</span>&nbsp;<span class="op" id="6042741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6042744">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6042795">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6042850">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042909">var</span>&nbsp;<span class="ident" id="6042913">names</span>&nbsp;<span class="op" id="6042919">=</span>&nbsp;<span class="op" id="6042921">[</span><span class="op" id="6042922">...</span><span class="op" id="6042925">]</span><span class="builtintype" id="6042926">string</span><span class="op" id="6042932">{</span><span class="string" id="6042933">&#34;abbrev&#34;</span><span class="op" id="6042941">,</span>&nbsp;<span class="string" id="6042943">&#34;info&#34;</span><span class="op" id="6042949">,</span>&nbsp;<span class="string" id="6042951">&#34;str&#34;</span><span class="op" id="6042956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042959">var</span>&nbsp;<span class="ident" id="6042963">dat</span>&nbsp;<span class="op" id="6042967">[</span><span class="builtinfunc" id="6042968">len</span><span class="op" id="6042971">(</span><span class="ident" id="6042972">names</span><span class="op" id="6042977">)</span><span class="op" id="6042978">]</span><span class="op" id="6042979">[</span><span class="op" id="6042980">]</span><span class="builtintype" id="6042981">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042987">for</span>&nbsp;<span class="ident" id="6042991">i</span><span class="op" id="6042992">,</span>&nbsp;<span class="ident" id="6042994">name</span>&nbsp;<span class="op" id="6042999">:=</span>&nbsp;<span class="keyword" id="6043002">range</span>&nbsp;<span class="ident" id="6043008">names</span>&nbsp;<span class="op" id="6043014">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043018">name</span>&nbsp;<span class="op" id="6043023">=</span>&nbsp;<span class="string" id="6043025">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="6043036">+</span>&nbsp;<span class="ident" id="6043038">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043045">s</span>&nbsp;<span class="op" id="6043047">:=</span>&nbsp;<span class="ident" id="6043050">f</span><span class="op" id="6043051">.</span><span class="ident" id="6043052">Section</span><span class="op" id="6043059">(</span><span class="ident" id="6043060">name</span><span class="op" id="6043064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043068">if</span>&nbsp;<span class="ident" id="6043071">s</span>&nbsp;<span class="op" id="6043073">==</span>&nbsp;<span class="ident" id="6043076">nil</span>&nbsp;<span class="op" id="6043080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043085">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043096">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043100">b</span><span class="op" id="6043101">,</span>&nbsp;<span class="ident" id="6043103">err</span>&nbsp;<span class="op" id="6043107">:=</span>&nbsp;<span class="ident" id="6043110">s</span><span class="op" id="6043111">.</span><span class="ident" id="6043112">Data</span><span class="op" id="6043116">(</span><span class="op" id="6043117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043121">if</span>&nbsp;<span class="ident" id="6043124">err</span>&nbsp;<span class="op" id="6043128">!=</span>&nbsp;<span class="ident" id="6043131">nil</span>&nbsp;<span class="op" id="6043135">&amp;&amp;</span>&nbsp;<span class="ident" id="6043138">uint64</span><span class="op" id="6043144">(</span><span class="builtinfunc" id="6043145">len</span><span class="op" id="6043148">(</span><span class="ident" id="6043149">b</span><span class="op" id="6043150">)</span><span class="op" id="6043151">)</span>&nbsp;<span class="op" id="6043153">&lt;</span>&nbsp;<span class="ident" id="6043155">s</span><span class="op" id="6043156">.</span><span class="ident" id="6043157">Size</span>&nbsp;<span class="op" id="6043162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043167">return</span>&nbsp;<span class="ident" id="6043174">nil</span><span class="op" id="6043177">,</span>&nbsp;<span class="ident" id="6043179">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043189">dat</span><span class="op" id="6043192">[</span><span class="ident" id="6043193">i</span><span class="op" id="6043194">]</span>&nbsp;<span class="op" id="6043196">=</span>&nbsp;<span class="ident" id="6043198">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043205">abbrev</span><span class="op" id="6043211">,</span>&nbsp;<span class="ident" id="6043213">info</span><span class="op" id="6043217">,</span>&nbsp;<span class="ident" id="6043219">str</span>&nbsp;<span class="op" id="6043223">:=</span>&nbsp;<span class="ident" id="6043226">dat</span><span class="op" id="6043229">[</span><span class="num" id="6043230">0</span><span class="op" id="6043231">]</span><span class="op" id="6043232">,</span>&nbsp;<span class="ident" id="6043234">dat</span><span class="op" id="6043237">[</span><span class="num" id="6043238">1</span><span class="op" id="6043239">]</span><span class="op" id="6043240">,</span>&nbsp;<span class="ident" id="6043242">dat</span><span class="op" id="6043245">[</span><span class="num" id="6043246">2</span><span class="op" id="6043247">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043250">return</span>&nbsp;<span class="ident" id="6043257">dwarf</span><span class="op" id="6043262">.</span><span class="ident" id="6043263">New</span><span class="op" id="6043266">(</span><span class="ident" id="6043267">abbrev</span><span class="op" id="6043273">,</span>&nbsp;<span class="ident" id="6043275">nil</span><span class="op" id="6043278">,</span>&nbsp;<span class="ident" id="6043280">nil</span><span class="op" id="6043283">,</span>&nbsp;<span class="ident" id="6043285">info</span><span class="op" id="6043289">,</span>&nbsp;<span class="ident" id="6043291">nil</span><span class="op" id="6043294">,</span>&nbsp;<span class="ident" id="6043296">nil</span><span class="op" id="6043299">,</span>&nbsp;<span class="ident" id="6043301">nil</span><span class="op" id="6043304">,</span>&nbsp;<span class="ident" id="6043306">str</span><span class="op" id="6043309">)</span><br>
<span class="lineno"></span><span class="op" id="6043311">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="6043314">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="6043366">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6043421">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6043475">func</span>&nbsp;<span class="op" id="6043480">(</span><span class="ident" id="6043481">f</span>&nbsp;<span class="op" id="6043483">*</span><span class="ident" id="6043484">File</span><span class="op" id="6043488">)</span>&nbsp;<span class="ident" id="6043490">ImportedSymbols</span><span class="op" id="6043505">(</span><span class="op" id="6043506">)</span>&nbsp;<span class="op" id="6043508">(</span><span class="op" id="6043509">[</span><span class="op" id="6043510">]</span><span class="builtintype" id="6043511">string</span><span class="op" id="6043517">,</span>&nbsp;<span class="builtintype" id="6043519">error</span><span class="op" id="6043524">)</span>&nbsp;<span class="op" id="6043526">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043529">if</span>&nbsp;<span class="ident" id="6043532">f</span><span class="op" id="6043533">.</span><span class="ident" id="6043534">Dysymtab</span>&nbsp;<span class="op" id="6043543">==</span>&nbsp;<span class="ident" id="6043546">nil</span>&nbsp;<span class="op" id="6043550">||</span>&nbsp;<span class="ident" id="6043553">f</span><span class="op" id="6043554">.</span><span class="ident" id="6043555">Symtab</span>&nbsp;<span class="op" id="6043562">==</span>&nbsp;<span class="ident" id="6043565">nil</span>&nbsp;<span class="op" id="6043569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043573">return</span>&nbsp;<span class="ident" id="6043580">nil</span><span class="op" id="6043583">,</span>&nbsp;<span class="op" id="6043585">&amp;</span><span class="ident" id="6043586">FormatError</span><span class="op" id="6043597">{</span><span class="num" id="6043598">0</span><span class="op" id="6043599">,</span>&nbsp;<span class="string" id="6043601">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6043623">,</span>&nbsp;<span class="ident" id="6043625">nil</span><span class="op" id="6043628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043635">st</span>&nbsp;<span class="op" id="6043638">:=</span>&nbsp;<span class="ident" id="6043641">f</span><span class="op" id="6043642">.</span><span class="ident" id="6043643">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043651">dt</span>&nbsp;<span class="op" id="6043654">:=</span>&nbsp;<span class="ident" id="6043657">f</span><span class="op" id="6043658">.</span><span class="ident" id="6043659">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043669">var</span>&nbsp;<span class="ident" id="6043673">all</span>&nbsp;<span class="op" id="6043677">[</span><span class="op" id="6043678">]</span><span class="builtintype" id="6043679">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043687">for</span>&nbsp;<span class="ident" id="6043691">_</span><span class="op" id="6043692">,</span>&nbsp;<span class="ident" id="6043694">s</span>&nbsp;<span class="op" id="6043696">:=</span>&nbsp;<span class="keyword" id="6043699">range</span>&nbsp;<span class="ident" id="6043705">st</span><span class="op" id="6043707">.</span><span class="ident" id="6043708">Syms</span><span class="op" id="6043712">[</span><span class="ident" id="6043713">dt</span><span class="op" id="6043715">.</span><span class="ident" id="6043716">Iundefsym</span>&nbsp;<span class="op" id="6043726">:</span>&nbsp;<span class="ident" id="6043728">dt</span><span class="op" id="6043730">.</span><span class="ident" id="6043731">Iundefsym</span><span class="op" id="6043740">+</span><span class="ident" id="6043741">dt</span><span class="op" id="6043743">.</span><span class="ident" id="6043744">Nundefsym</span><span class="op" id="6043753">]</span>&nbsp;<span class="op" id="6043755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043759">all</span>&nbsp;<span class="op" id="6043763">=</span>&nbsp;<span class="builtinfunc" id="6043765">append</span><span class="op" id="6043771">(</span><span class="ident" id="6043772">all</span><span class="op" id="6043775">,</span>&nbsp;<span class="ident" id="6043777">s</span><span class="op" id="6043778">.</span><span class="ident" id="6043779">Name</span><span class="op" id="6043783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043786">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043789">return</span>&nbsp;<span class="ident" id="6043796">all</span><span class="op" id="6043799">,</span>&nbsp;<span class="ident" id="6043801">nil</span><br>
<span class="lineno"></span><span class="op" id="6043805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6043808">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="6043864">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="6043919">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6043967">func</span>&nbsp;<span class="op" id="6043972">(</span><span class="ident" id="6043973">f</span>&nbsp;<span class="op" id="6043975">*</span><span class="ident" id="6043976">File</span><span class="op" id="6043980">)</span>&nbsp;<span class="ident" id="6043982">ImportedLibraries</span><span class="op" id="6043999">(</span><span class="op" id="6044000">)</span>&nbsp;<span class="op" id="6044002">(</span><span class="op" id="6044003">[</span><span class="op" id="6044004">]</span><span class="builtintype" id="6044005">string</span><span class="op" id="6044011">,</span>&nbsp;<span class="builtintype" id="6044013">error</span><span class="op" id="6044018">)</span>&nbsp;<span class="op" id="6044020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044023">var</span>&nbsp;<span class="ident" id="6044027">all</span>&nbsp;<span class="op" id="6044031">[</span><span class="op" id="6044032">]</span><span class="builtintype" id="6044033">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044041">for</span>&nbsp;<span class="ident" id="6044045">_</span><span class="op" id="6044046">,</span>&nbsp;<span class="ident" id="6044048">l</span>&nbsp;<span class="op" id="6044050">:=</span>&nbsp;<span class="keyword" id="6044053">range</span>&nbsp;<span class="ident" id="6044059">f</span><span class="op" id="6044060">.</span><span class="ident" id="6044061">Loads</span>&nbsp;<span class="op" id="6044067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044071">if</span>&nbsp;<span class="ident" id="6044074">lib</span><span class="op" id="6044077">,</span>&nbsp;<span class="ident" id="6044079">ok</span>&nbsp;<span class="op" id="6044082">:=</span>&nbsp;<span class="ident" id="6044085">l</span><span class="op" id="6044086">.</span><span class="op" id="6044087">(</span><span class="op" id="6044088">*</span><span class="ident" id="6044089">Dylib</span><span class="op" id="6044094">)</span><span class="op" id="6044095">;</span>&nbsp;<span class="ident" id="6044097">ok</span>&nbsp;<span class="op" id="6044100">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044105">all</span>&nbsp;<span class="op" id="6044109">=</span>&nbsp;<span class="builtinfunc" id="6044111">append</span><span class="op" id="6044117">(</span><span class="ident" id="6044118">all</span><span class="op" id="6044121">,</span>&nbsp;<span class="ident" id="6044123">lib</span><span class="op" id="6044126">.</span><span class="ident" id="6044127">Name</span><span class="op" id="6044131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044141">return</span>&nbsp;<span class="ident" id="6044148">all</span><span class="op" id="6044151">,</span>&nbsp;<span class="ident" id="6044153">nil</span><br>
<span class="lineno"></span><span class="op" id="6044157">}</span>
</div>
</body>
</html>
