<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5824782">package</span>&nbsp;<span class="ident" id="5824790">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5824796">import</span>&nbsp;<span class="op" id="5824803">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5824806">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5824828">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5824831">func</span>&nbsp;<span class="ident" id="5824836">parseFuncStmts</span><span class="op" id="5824850">(</span><span class="ident" id="5824851">p</span>&nbsp;<span class="op" id="5824853">*</span><span class="ident" id="5824854">parser</span><span class="op" id="5824860">,</span>&nbsp;<span class="ident" id="5824862">f</span>&nbsp;<span class="op" id="5824864">*</span><span class="ident" id="5824865">funcDecl</span><span class="op" id="5824873">)</span>&nbsp;<span class="op" id="5824875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824878">for</span>&nbsp;<span class="op" id="5824882">!</span><span class="op" id="5824883">(</span><span class="ident" id="5824884">p</span><span class="op" id="5824885">.</span><span class="ident" id="5824886">see</span><span class="op" id="5824889">(</span><span class="ident" id="5824890">Rbrace</span><span class="op" id="5824896">)</span>&nbsp;<span class="op" id="5824898">||</span>&nbsp;<span class="ident" id="5824901">p</span><span class="op" id="5824902">.</span><span class="ident" id="5824903">see</span><span class="op" id="5824906">(</span><span class="ident" id="5824907">lex8</span><span class="op" id="5824911">.</span><span class="ident" id="5824912">EOF</span><span class="op" id="5824915">)</span><span class="op" id="5824916">)</span>&nbsp;<span class="op" id="5824918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824922">stmt</span>&nbsp;<span class="op" id="5824927">:=</span>&nbsp;<span class="ident" id="5824930">parseFuncStmt</span><span class="op" id="5824943">(</span><span class="ident" id="5824944">p</span><span class="op" id="5824945">)</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824949">if</span>&nbsp;<span class="ident" id="5824952">stmt</span>&nbsp;<span class="op" id="5824957">!=</span>&nbsp;<span class="ident" id="5824960">nil</span>&nbsp;<span class="op" id="5824964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824969">f</span><span class="op" id="5824970">.</span><span class="ident" id="5824971">stmts</span>&nbsp;<span class="op" id="5824977">=</span>&nbsp;<span class="builtinfunc" id="5824979">append</span><span class="op" id="5824985">(</span><span class="ident" id="5824986">f</span><span class="op" id="5824987">.</span><span class="ident" id="5824988">stmts</span><span class="op" id="5824993">,</span>&nbsp;<span class="ident" id="5824995">stmt</span><span class="op" id="5824999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825007">p</span><span class="op" id="5825008">.</span><span class="ident" id="5825009">clearErr</span><span class="op" id="5825017">(</span><span class="op" id="5825018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825021">}</span><br>
<span class="lineno">15</span><span class="op" id="5825023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5825026">func</span>&nbsp;<span class="ident" id="5825031">parseBareFunc</span><span class="op" id="5825044">(</span><span class="ident" id="5825045">p</span>&nbsp;<span class="op" id="5825047">*</span><span class="ident" id="5825048">parser</span><span class="op" id="5825054">)</span>&nbsp;<span class="op" id="5825056">*</span><span class="ident" id="5825057">funcDecl</span>&nbsp;<span class="op" id="5825066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825069">ret</span>&nbsp;<span class="op" id="5825073">:=</span>&nbsp;<span class="builtinfunc" id="5825076">new</span><span class="op" id="5825079">(</span><span class="ident" id="5825080">funcDecl</span><span class="op" id="5825088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825091">ret</span><span class="op" id="5825094">.</span><span class="ident" id="5825095">name</span>&nbsp;<span class="op" id="5825100">=</span>&nbsp;<span class="op" id="5825102">&amp;</span><span class="ident" id="5825103">lex8</span><span class="op" id="5825107">.</span><span class="ident" id="5825108">Token</span><span class="op" id="5825113">{</span><span class="ident" id="5825114">Operand</span><span class="op" id="5825121">,</span>&nbsp;<span class="string" id="5825123">&#34;_&#34;</span><span class="op" id="5825126">,</span>&nbsp;<span class="ident" id="5825128">nil</span><span class="op" id="5825131">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825134">parseFuncStmts</span><span class="op" id="5825148">(</span><span class="ident" id="5825149">p</span><span class="op" id="5825150">,</span>&nbsp;<span class="ident" id="5825152">ret</span><span class="op" id="5825155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825158">return</span>&nbsp;<span class="ident" id="5825165">ret</span><br>
<span class="lineno"></span><span class="op" id="5825169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5825172">func</span>&nbsp;<span class="ident" id="5825177">parseFunc</span><span class="op" id="5825186">(</span><span class="ident" id="5825187">p</span>&nbsp;<span class="op" id="5825189">*</span><span class="ident" id="5825190">parser</span><span class="op" id="5825196">)</span>&nbsp;<span class="op" id="5825198">*</span><span class="ident" id="5825199">funcDecl</span>&nbsp;<span class="op" id="5825208">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825211">ret</span>&nbsp;<span class="op" id="5825215">:=</span>&nbsp;<span class="builtinfunc" id="5825218">new</span><span class="op" id="5825221">(</span><span class="ident" id="5825222">funcDecl</span><span class="op" id="5825230">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825234">ret</span><span class="op" id="5825237">.</span><span class="ident" id="5825238">kw</span>&nbsp;<span class="op" id="5825241">=</span>&nbsp;<span class="ident" id="5825243">p</span><span class="op" id="5825244">.</span><span class="ident" id="5825245">expectKeyword</span><span class="op" id="5825258">(</span><span class="string" id="5825259">&#34;func&#34;</span><span class="op" id="5825265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825268">ret</span><span class="op" id="5825271">.</span><span class="ident" id="5825272">name</span>&nbsp;<span class="op" id="5825277">=</span>&nbsp;<span class="ident" id="5825279">p</span><span class="op" id="5825280">.</span><span class="ident" id="5825281">expect</span><span class="op" id="5825287">(</span><span class="ident" id="5825288">Operand</span><span class="op" id="5825295">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825299">if</span>&nbsp;<span class="ident" id="5825302">ret</span><span class="op" id="5825305">.</span><span class="ident" id="5825306">name</span>&nbsp;<span class="op" id="5825311">!=</span>&nbsp;<span class="ident" id="5825314">nil</span>&nbsp;<span class="op" id="5825318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825322">name</span>&nbsp;<span class="op" id="5825327">:=</span>&nbsp;<span class="ident" id="5825330">ret</span><span class="op" id="5825333">.</span><span class="ident" id="5825334">name</span><span class="op" id="5825338">.</span><span class="ident" id="5825339">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825345">if</span>&nbsp;<span class="op" id="5825348">!</span><span class="ident" id="5825349">isIdent</span><span class="op" id="5825356">(</span><span class="ident" id="5825357">name</span><span class="op" id="5825361">)</span>&nbsp;<span class="op" id="5825363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825368">p</span><span class="op" id="5825369">.</span><span class="ident" id="5825370">err</span><span class="op" id="5825373">(</span><span class="ident" id="5825374">ret</span><span class="op" id="5825377">.</span><span class="ident" id="5825378">name</span><span class="op" id="5825382">.</span><span class="ident" id="5825383">Pos</span><span class="op" id="5825386">,</span>&nbsp;<span class="string" id="5825388">&#34;invalid&nbsp;func&nbsp;name&nbsp;%q&#34;</span><span class="op" id="5825410">,</span>&nbsp;<span class="ident" id="5825412">name</span><span class="op" id="5825416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825420">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825427">ret</span><span class="op" id="5825430">.</span><span class="ident" id="5825431">lbrace</span>&nbsp;<span class="op" id="5825438">=</span>&nbsp;<span class="ident" id="5825440">p</span><span class="op" id="5825441">.</span><span class="ident" id="5825442">expect</span><span class="op" id="5825448">(</span><span class="ident" id="5825449">Lbrace</span><span class="op" id="5825455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825458">if</span>&nbsp;<span class="ident" id="5825461">p</span><span class="op" id="5825462">.</span><span class="ident" id="5825463">skipErrStmt</span><span class="op" id="5825474">(</span><span class="op" id="5825475">)</span>&nbsp;<span class="op" id="5825477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825481">return</span>&nbsp;<span class="ident" id="5825488">ret</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825497">parseFuncStmts</span><span class="op" id="5825511">(</span><span class="ident" id="5825512">p</span><span class="op" id="5825513">,</span>&nbsp;<span class="ident" id="5825515">ret</span><span class="op" id="5825518">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825522">ret</span><span class="op" id="5825525">.</span><span class="ident" id="5825526">rbrace</span>&nbsp;<span class="op" id="5825533">=</span>&nbsp;<span class="ident" id="5825535">p</span><span class="op" id="5825536">.</span><span class="ident" id="5825537">expect</span><span class="op" id="5825543">(</span><span class="ident" id="5825544">Rbrace</span><span class="op" id="5825550">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825553">ret</span><span class="op" id="5825556">.</span><span class="ident" id="5825557">semi</span>&nbsp;<span class="op" id="5825562">=</span>&nbsp;<span class="ident" id="5825564">p</span><span class="op" id="5825565">.</span><span class="ident" id="5825566">expect</span><span class="op" id="5825572">(</span><span class="ident" id="5825573">Semi</span><span class="op" id="5825577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825580">p</span><span class="op" id="5825581">.</span><span class="ident" id="5825582">skipErrStmt</span><span class="op" id="5825593">(</span><span class="op" id="5825594">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825598">return</span>&nbsp;<span class="ident" id="5825605">ret</span><br>
<span class="lineno"></span><span class="op" id="5825609">}</span>
</div>
</body>
</html>
