<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6641478">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6641533">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6641587">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6641638">//&nbsp;TODO&nbsp;It&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;use&nbsp;a&nbsp;mock&nbsp;DNS&nbsp;server,&nbsp;to&nbsp;eliminate</span><br>
<span class="lineno"></span><span class="comment" id="6641702">//&nbsp;external&nbsp;dependencies.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6641729">package</span>&nbsp;<span class="ident" id="6641737">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6641742">import</span>&nbsp;<span class="op" id="6641749">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6641752">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6641760">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6641771">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6641781">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6641784">var</span>&nbsp;<span class="ident" id="6641788">testExternal</span>&nbsp;<span class="op" id="6641801">=</span>&nbsp;<span class="ident" id="6641803">flag</span><span class="op" id="6641807">.</span><span class="ident" id="6641808">Bool</span><span class="op" id="6641812">(</span><span class="string" id="6641813">&#34;external&#34;</span><span class="op" id="6641823">,</span>&nbsp;<span class="builtintype" id="6641825">true</span><span class="op" id="6641829">,</span>&nbsp;<span class="string" id="6641831">&#34;allow&nbsp;use&nbsp;of&nbsp;external&nbsp;networks&nbsp;during&nbsp;long&nbsp;test&#34;</span><span class="op" id="6641880">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6641883">var</span>&nbsp;<span class="ident" id="6641887">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="6641908">=</span>&nbsp;<span class="op" id="6641910">[</span><span class="op" id="6641911">]</span><span class="keyword" id="6641912">struct</span>&nbsp;<span class="op" id="6641919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641922">service</span><span class="op" id="6641929">,</span>&nbsp;<span class="ident" id="6641931">proto</span><span class="op" id="6641936">,</span>&nbsp;<span class="ident" id="6641938">name</span>&nbsp;<span class="builtintype" id="6641943">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641951">cname</span><span class="op" id="6641956">,</span>&nbsp;<span class="ident" id="6641958">target</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6641972">string</span><br>
<span class="lineno"></span><span class="op" id="6641979">}</span><span class="op" id="6641980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6641983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6641987">&#34;xmpp-server&#34;</span><span class="op" id="6642000">,</span>&nbsp;<span class="string" id="6642002">&#34;tcp&#34;</span><span class="op" id="6642007">,</span>&nbsp;<span class="string" id="6642009">&#34;google.com&#34;</span><span class="op" id="6642021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6642025">&#34;.google.com&#34;</span><span class="op" id="6642038">,</span>&nbsp;<span class="string" id="6642040">&#34;.google.com&#34;</span><span class="op" id="6642053">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642056">}</span><span class="op" id="6642057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6642064">&#34;&#34;</span><span class="op" id="6642066">,</span>&nbsp;<span class="string" id="6642068">&#34;&#34;</span><span class="op" id="6642070">,</span>&nbsp;<span class="string" id="6642072">&#34;_xmpp-server._tcp.google.com&#34;</span><span class="op" id="6642102">,</span>&nbsp;<span class="comment" id="6642104">//&nbsp;non-standard&nbsp;back&nbsp;door</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6642132">&#34;.google.com&#34;</span><span class="op" id="6642145">,</span>&nbsp;<span class="string" id="6642147">&#34;.google.com&#34;</span><span class="op" id="6642160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642163">}</span><span class="op" id="6642164">,</span><br>
<span class="lineno">30</span><span class="op" id="6642166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6642169">func</span>&nbsp;<span class="ident" id="6642174">TestLookupGoogleSRV</span><span class="op" id="6642193">(</span><span class="ident" id="6642194">t</span>&nbsp;<span class="op" id="6642196">*</span><span class="ident" id="6642197">testing</span><span class="op" id="6642204">.</span><span class="ident" id="6642205">T</span><span class="op" id="6642206">)</span>&nbsp;<span class="op" id="6642208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642211">if</span>&nbsp;<span class="ident" id="6642214">testing</span><span class="op" id="6642221">.</span><span class="ident" id="6642222">Short</span><span class="op" id="6642227">(</span><span class="op" id="6642228">)</span>&nbsp;<span class="op" id="6642230">||</span>&nbsp;<span class="op" id="6642233">!</span><span class="op" id="6642234">*</span><span class="ident" id="6642235">testExternal</span>&nbsp;<span class="op" id="6642248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642252">t</span><span class="op" id="6642253">.</span><span class="ident" id="6642254">Skip</span><span class="op" id="6642258">(</span><span class="string" id="6642259">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6642300">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642307">for</span>&nbsp;<span class="ident" id="6642311">_</span><span class="op" id="6642312">,</span>&nbsp;<span class="ident" id="6642314">tt</span>&nbsp;<span class="op" id="6642317">:=</span>&nbsp;<span class="keyword" id="6642320">range</span>&nbsp;<span class="ident" id="6642326">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="6642347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642351">cname</span><span class="op" id="6642356">,</span>&nbsp;<span class="ident" id="6642358">srvs</span><span class="op" id="6642362">,</span>&nbsp;<span class="ident" id="6642364">err</span>&nbsp;<span class="op" id="6642368">:=</span>&nbsp;<span class="ident" id="6642371">LookupSRV</span><span class="op" id="6642380">(</span><span class="ident" id="6642381">tt</span><span class="op" id="6642383">.</span><span class="ident" id="6642384">service</span><span class="op" id="6642391">,</span>&nbsp;<span class="ident" id="6642393">tt</span><span class="op" id="6642395">.</span><span class="ident" id="6642396">proto</span><span class="op" id="6642401">,</span>&nbsp;<span class="ident" id="6642403">tt</span><span class="op" id="6642405">.</span><span class="ident" id="6642406">name</span><span class="op" id="6642410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642414">if</span>&nbsp;<span class="ident" id="6642417">err</span>&nbsp;<span class="op" id="6642421">!=</span>&nbsp;<span class="ident" id="6642424">nil</span>&nbsp;<span class="op" id="6642428">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642433">t</span><span class="op" id="6642434">.</span><span class="ident" id="6642435">Fatal</span><span class="op" id="6642440">(</span><span class="ident" id="6642441">err</span><span class="op" id="6642444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642452">if</span>&nbsp;<span class="builtinfunc" id="6642455">len</span><span class="op" id="6642458">(</span><span class="ident" id="6642459">srvs</span><span class="op" id="6642463">)</span>&nbsp;<span class="op" id="6642465">==</span>&nbsp;<span class="num" id="6642468">0</span>&nbsp;<span class="op" id="6642470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642475">t</span><span class="op" id="6642476">.</span><span class="ident" id="6642477">Error</span><span class="op" id="6642482">(</span><span class="string" id="6642483">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6642498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642502">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642506">if</span>&nbsp;<span class="op" id="6642509">!</span><span class="ident" id="6642510">strings</span><span class="op" id="6642517">.</span><span class="ident" id="6642518">Contains</span><span class="op" id="6642526">(</span><span class="ident" id="6642527">cname</span><span class="op" id="6642532">,</span>&nbsp;<span class="ident" id="6642534">tt</span><span class="op" id="6642536">.</span><span class="ident" id="6642537">cname</span><span class="op" id="6642542">)</span>&nbsp;<span class="op" id="6642544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642549">t</span><span class="op" id="6642550">.</span><span class="ident" id="6642551">Errorf</span><span class="op" id="6642557">(</span><span class="string" id="6642558">&#34;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6642575">,</span>&nbsp;<span class="ident" id="6642577">cname</span><span class="op" id="6642582">,</span>&nbsp;<span class="ident" id="6642584">tt</span><span class="op" id="6642586">.</span><span class="ident" id="6642587">cname</span><span class="op" id="6642592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642600">for</span>&nbsp;<span class="ident" id="6642604">_</span><span class="op" id="6642605">,</span>&nbsp;<span class="ident" id="6642607">srv</span>&nbsp;<span class="op" id="6642611">:=</span>&nbsp;<span class="keyword" id="6642614">range</span>&nbsp;<span class="ident" id="6642620">srvs</span>&nbsp;<span class="op" id="6642625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642630">if</span>&nbsp;<span class="op" id="6642633">!</span><span class="ident" id="6642634">strings</span><span class="op" id="6642641">.</span><span class="ident" id="6642642">Contains</span><span class="op" id="6642650">(</span><span class="ident" id="6642651">srv</span><span class="op" id="6642654">.</span><span class="ident" id="6642655">Target</span><span class="op" id="6642661">,</span>&nbsp;<span class="ident" id="6642663">tt</span><span class="op" id="6642665">.</span><span class="ident" id="6642666">target</span><span class="op" id="6642672">)</span>&nbsp;<span class="op" id="6642674">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642680">t</span><span class="op" id="6642681">.</span><span class="ident" id="6642682">Errorf</span><span class="op" id="6642688">(</span><span class="string" id="6642689">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="6642726">,</span>&nbsp;<span class="ident" id="6642728">srv</span><span class="op" id="6642731">,</span>&nbsp;<span class="ident" id="6642733">tt</span><span class="op" id="6642735">.</span><span class="ident" id="6642736">target</span><span class="op" id="6642742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642754">}</span><br>
<span class="lineno"></span><span class="op" id="6642756">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="6642759">func</span>&nbsp;<span class="ident" id="6642764">TestLookupGmailMX</span><span class="op" id="6642781">(</span><span class="ident" id="6642782">t</span>&nbsp;<span class="op" id="6642784">*</span><span class="ident" id="6642785">testing</span><span class="op" id="6642792">.</span><span class="ident" id="6642793">T</span><span class="op" id="6642794">)</span>&nbsp;<span class="op" id="6642796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642799">if</span>&nbsp;<span class="ident" id="6642802">testing</span><span class="op" id="6642809">.</span><span class="ident" id="6642810">Short</span><span class="op" id="6642815">(</span><span class="op" id="6642816">)</span>&nbsp;<span class="op" id="6642818">||</span>&nbsp;<span class="op" id="6642821">!</span><span class="op" id="6642822">*</span><span class="ident" id="6642823">testExternal</span>&nbsp;<span class="op" id="6642836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642840">t</span><span class="op" id="6642841">.</span><span class="ident" id="6642842">Skip</span><span class="op" id="6642846">(</span><span class="string" id="6642847">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6642888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642891">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642895">mxs</span><span class="op" id="6642898">,</span>&nbsp;<span class="ident" id="6642900">err</span>&nbsp;<span class="op" id="6642904">:=</span>&nbsp;<span class="ident" id="6642907">LookupMX</span><span class="op" id="6642915">(</span><span class="string" id="6642916">&#34;gmail.com&#34;</span><span class="op" id="6642927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642930">if</span>&nbsp;<span class="ident" id="6642933">err</span>&nbsp;<span class="op" id="6642937">!=</span>&nbsp;<span class="ident" id="6642940">nil</span>&nbsp;<span class="op" id="6642944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642948">t</span><span class="op" id="6642949">.</span><span class="ident" id="6642950">Fatal</span><span class="op" id="6642955">(</span><span class="ident" id="6642956">err</span><span class="op" id="6642959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642962">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642965">if</span>&nbsp;<span class="builtinfunc" id="6642968">len</span><span class="op" id="6642971">(</span><span class="ident" id="6642972">mxs</span><span class="op" id="6642975">)</span>&nbsp;<span class="op" id="6642977">==</span>&nbsp;<span class="num" id="6642980">0</span>&nbsp;<span class="op" id="6642982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642986">t</span><span class="op" id="6642987">.</span><span class="ident" id="6642988">Error</span><span class="op" id="6642993">(</span><span class="string" id="6642994">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6643009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643015">for</span>&nbsp;<span class="ident" id="6643019">_</span><span class="op" id="6643020">,</span>&nbsp;<span class="ident" id="6643022">mx</span>&nbsp;<span class="op" id="6643025">:=</span>&nbsp;<span class="keyword" id="6643028">range</span>&nbsp;<span class="ident" id="6643034">mxs</span>&nbsp;<span class="op" id="6643038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643042">if</span>&nbsp;<span class="op" id="6643045">!</span><span class="ident" id="6643046">strings</span><span class="op" id="6643053">.</span><span class="ident" id="6643054">Contains</span><span class="op" id="6643062">(</span><span class="ident" id="6643063">mx</span><span class="op" id="6643065">.</span><span class="ident" id="6643066">Host</span><span class="op" id="6643070">,</span>&nbsp;<span class="string" id="6643072">&#34;.google.com&#34;</span><span class="op" id="6643085">)</span>&nbsp;<span class="op" id="6643087">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643092">t</span><span class="op" id="6643093">.</span><span class="ident" id="6643094">Errorf</span><span class="op" id="6643100">(</span><span class="string" id="6643101">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="6643148">,</span>&nbsp;<span class="ident" id="6643150">mx</span><span class="op" id="6643152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643159">}</span><br>
<span class="lineno"></span><span class="op" id="6643161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="6643164">func</span>&nbsp;<span class="ident" id="6643169">TestLookupGmailNS</span><span class="op" id="6643186">(</span><span class="ident" id="6643187">t</span>&nbsp;<span class="op" id="6643189">*</span><span class="ident" id="6643190">testing</span><span class="op" id="6643197">.</span><span class="ident" id="6643198">T</span><span class="op" id="6643199">)</span>&nbsp;<span class="op" id="6643201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643204">if</span>&nbsp;<span class="ident" id="6643207">testing</span><span class="op" id="6643214">.</span><span class="ident" id="6643215">Short</span><span class="op" id="6643220">(</span><span class="op" id="6643221">)</span>&nbsp;<span class="op" id="6643223">||</span>&nbsp;<span class="op" id="6643226">!</span><span class="op" id="6643227">*</span><span class="ident" id="6643228">testExternal</span>&nbsp;<span class="op" id="6643241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643245">t</span><span class="op" id="6643246">.</span><span class="ident" id="6643247">Skip</span><span class="op" id="6643251">(</span><span class="string" id="6643252">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6643293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643300">nss</span><span class="op" id="6643303">,</span>&nbsp;<span class="ident" id="6643305">err</span>&nbsp;<span class="op" id="6643309">:=</span>&nbsp;<span class="ident" id="6643312">LookupNS</span><span class="op" id="6643320">(</span><span class="string" id="6643321">&#34;gmail.com&#34;</span><span class="op" id="6643332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643335">if</span>&nbsp;<span class="ident" id="6643338">err</span>&nbsp;<span class="op" id="6643342">!=</span>&nbsp;<span class="ident" id="6643345">nil</span>&nbsp;<span class="op" id="6643349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643353">t</span><span class="op" id="6643354">.</span><span class="ident" id="6643355">Fatal</span><span class="op" id="6643360">(</span><span class="ident" id="6643361">err</span><span class="op" id="6643364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643370">if</span>&nbsp;<span class="builtinfunc" id="6643373">len</span><span class="op" id="6643376">(</span><span class="ident" id="6643377">nss</span><span class="op" id="6643380">)</span>&nbsp;<span class="op" id="6643382">==</span>&nbsp;<span class="num" id="6643385">0</span>&nbsp;<span class="op" id="6643387">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643391">t</span><span class="op" id="6643392">.</span><span class="ident" id="6643393">Error</span><span class="op" id="6643398">(</span><span class="string" id="6643399">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6643414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643420">for</span>&nbsp;<span class="ident" id="6643424">_</span><span class="op" id="6643425">,</span>&nbsp;<span class="ident" id="6643427">ns</span>&nbsp;<span class="op" id="6643430">:=</span>&nbsp;<span class="keyword" id="6643433">range</span>&nbsp;<span class="ident" id="6643439">nss</span>&nbsp;<span class="op" id="6643443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643447">if</span>&nbsp;<span class="op" id="6643450">!</span><span class="ident" id="6643451">strings</span><span class="op" id="6643458">.</span><span class="ident" id="6643459">Contains</span><span class="op" id="6643467">(</span><span class="ident" id="6643468">ns</span><span class="op" id="6643470">.</span><span class="ident" id="6643471">Host</span><span class="op" id="6643475">,</span>&nbsp;<span class="string" id="6643477">&#34;.google.com&#34;</span><span class="op" id="6643490">)</span>&nbsp;<span class="op" id="6643492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643497">t</span><span class="op" id="6643498">.</span><span class="ident" id="6643499">Errorf</span><span class="op" id="6643505">(</span><span class="string" id="6643506">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="6643553">,</span>&nbsp;<span class="ident" id="6643555">ns</span><span class="op" id="6643557">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643564">}</span><br>
<span class="lineno"></span><span class="op" id="6643566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6643569">func</span>&nbsp;<span class="ident" id="6643574">TestLookupGmailTXT</span><span class="op" id="6643592">(</span><span class="ident" id="6643593">t</span>&nbsp;<span class="op" id="6643595">*</span><span class="ident" id="6643596">testing</span><span class="op" id="6643603">.</span><span class="ident" id="6643604">T</span><span class="op" id="6643605">)</span>&nbsp;<span class="op" id="6643607">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643610">if</span>&nbsp;<span class="ident" id="6643613">testing</span><span class="op" id="6643620">.</span><span class="ident" id="6643621">Short</span><span class="op" id="6643626">(</span><span class="op" id="6643627">)</span>&nbsp;<span class="op" id="6643629">||</span>&nbsp;<span class="op" id="6643632">!</span><span class="op" id="6643633">*</span><span class="ident" id="6643634">testExternal</span>&nbsp;<span class="op" id="6643647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643651">t</span><span class="op" id="6643652">.</span><span class="ident" id="6643653">Skip</span><span class="op" id="6643657">(</span><span class="string" id="6643658">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6643699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643706">txts</span><span class="op" id="6643710">,</span>&nbsp;<span class="ident" id="6643712">err</span>&nbsp;<span class="op" id="6643716">:=</span>&nbsp;<span class="ident" id="6643719">LookupTXT</span><span class="op" id="6643728">(</span><span class="string" id="6643729">&#34;gmail.com&#34;</span><span class="op" id="6643740">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643743">if</span>&nbsp;<span class="ident" id="6643746">err</span>&nbsp;<span class="op" id="6643750">!=</span>&nbsp;<span class="ident" id="6643753">nil</span>&nbsp;<span class="op" id="6643757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643761">t</span><span class="op" id="6643762">.</span><span class="ident" id="6643763">Fatal</span><span class="op" id="6643768">(</span><span class="ident" id="6643769">err</span><span class="op" id="6643772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643778">if</span>&nbsp;<span class="builtinfunc" id="6643781">len</span><span class="op" id="6643784">(</span><span class="ident" id="6643785">txts</span><span class="op" id="6643789">)</span>&nbsp;<span class="op" id="6643791">==</span>&nbsp;<span class="num" id="6643794">0</span>&nbsp;<span class="op" id="6643796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643800">t</span><span class="op" id="6643801">.</span><span class="ident" id="6643802">Error</span><span class="op" id="6643807">(</span><span class="string" id="6643808">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6643823">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643829">for</span>&nbsp;<span class="ident" id="6643833">_</span><span class="op" id="6643834">,</span>&nbsp;<span class="ident" id="6643836">txt</span>&nbsp;<span class="op" id="6643840">:=</span>&nbsp;<span class="keyword" id="6643843">range</span>&nbsp;<span class="ident" id="6643849">txts</span>&nbsp;<span class="op" id="6643854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643858">if</span>&nbsp;<span class="op" id="6643861">!</span><span class="ident" id="6643862">strings</span><span class="op" id="6643869">.</span><span class="ident" id="6643870">Contains</span><span class="op" id="6643878">(</span><span class="ident" id="6643879">txt</span><span class="op" id="6643882">,</span>&nbsp;<span class="string" id="6643884">&#34;spf&#34;</span><span class="op" id="6643889">)</span>&nbsp;<span class="op" id="6643891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643896">t</span><span class="op" id="6643897">.</span><span class="ident" id="6643898">Errorf</span><span class="op" id="6643904">(</span><span class="string" id="6643905">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;spf&nbsp;record&#34;</span><span class="op" id="6643932">,</span>&nbsp;<span class="ident" id="6643934">txt</span><span class="op" id="6643937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643941">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643944">}</span><br>
<span class="lineno"></span><span class="op" id="6643946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6643949">var</span>&nbsp;<span class="ident" id="6643953">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="6643980">=</span>&nbsp;<span class="op" id="6643982">[</span><span class="op" id="6643983">]</span><span class="keyword" id="6643984">struct</span>&nbsp;<span class="op" id="6643991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643994">addr</span>&nbsp;<span class="builtintype" id="6643999">string</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644007">name</span>&nbsp;<span class="builtintype" id="6644012">string</span><br>
<span class="lineno"></span><span class="op" id="6644019">}</span><span class="op" id="6644020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644023">{</span><span class="string" id="6644024">&#34;8.8.8.8&#34;</span><span class="op" id="6644033">,</span>&nbsp;<span class="string" id="6644035">&#34;.google.com.&#34;</span><span class="op" id="6644049">}</span><span class="op" id="6644050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644053">{</span><span class="string" id="6644054">&#34;8.8.4.4&#34;</span><span class="op" id="6644063">,</span>&nbsp;<span class="string" id="6644065">&#34;.google.com.&#34;</span><span class="op" id="6644079">}</span><span class="op" id="6644080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644083">{</span><span class="string" id="6644084">&#34;2001:4860:4860::8888&#34;</span><span class="op" id="6644106">,</span>&nbsp;<span class="string" id="6644108">&#34;.google.com.&#34;</span><span class="op" id="6644122">}</span><span class="op" id="6644123">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644126">{</span><span class="string" id="6644127">&#34;2001:4860:4860::8844&#34;</span><span class="op" id="6644149">,</span>&nbsp;<span class="string" id="6644151">&#34;.google.com.&#34;</span><span class="op" id="6644165">}</span><span class="op" id="6644166">,</span><br>
<span class="lineno"></span><span class="op" id="6644168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6644171">func</span>&nbsp;<span class="ident" id="6644176">TestLookupGooglePublicDNSAddr</span><span class="op" id="6644205">(</span><span class="ident" id="6644206">t</span>&nbsp;<span class="op" id="6644208">*</span><span class="ident" id="6644209">testing</span><span class="op" id="6644216">.</span><span class="ident" id="6644217">T</span><span class="op" id="6644218">)</span>&nbsp;<span class="op" id="6644220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644223">if</span>&nbsp;<span class="ident" id="6644226">testing</span><span class="op" id="6644233">.</span><span class="ident" id="6644234">Short</span><span class="op" id="6644239">(</span><span class="op" id="6644240">)</span>&nbsp;<span class="op" id="6644242">||</span>&nbsp;<span class="op" id="6644245">!</span><span class="op" id="6644246">*</span><span class="ident" id="6644247">testExternal</span>&nbsp;<span class="op" id="6644260">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644264">t</span><span class="op" id="6644265">.</span><span class="ident" id="6644266">Skip</span><span class="op" id="6644270">(</span><span class="string" id="6644271">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6644312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644319">for</span>&nbsp;<span class="ident" id="6644323">_</span><span class="op" id="6644324">,</span>&nbsp;<span class="ident" id="6644326">tt</span>&nbsp;<span class="op" id="6644329">:=</span>&nbsp;<span class="keyword" id="6644332">range</span>&nbsp;<span class="ident" id="6644338">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="6644365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644369">names</span><span class="op" id="6644374">,</span>&nbsp;<span class="ident" id="6644376">err</span>&nbsp;<span class="op" id="6644380">:=</span>&nbsp;<span class="ident" id="6644383">LookupAddr</span><span class="op" id="6644393">(</span><span class="ident" id="6644394">tt</span><span class="op" id="6644396">.</span><span class="ident" id="6644397">addr</span><span class="op" id="6644401">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644405">if</span>&nbsp;<span class="ident" id="6644408">err</span>&nbsp;<span class="op" id="6644412">!=</span>&nbsp;<span class="ident" id="6644415">nil</span>&nbsp;<span class="op" id="6644419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644424">t</span><span class="op" id="6644425">.</span><span class="ident" id="6644426">Fatal</span><span class="op" id="6644431">(</span><span class="ident" id="6644432">err</span><span class="op" id="6644435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644443">if</span>&nbsp;<span class="builtinfunc" id="6644446">len</span><span class="op" id="6644449">(</span><span class="ident" id="6644450">names</span><span class="op" id="6644455">)</span>&nbsp;<span class="op" id="6644457">==</span>&nbsp;<span class="num" id="6644460">0</span>&nbsp;<span class="op" id="6644462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644467">t</span><span class="op" id="6644468">.</span><span class="ident" id="6644469">Error</span><span class="op" id="6644474">(</span><span class="string" id="6644475">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6644490">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644498">for</span>&nbsp;<span class="ident" id="6644502">_</span><span class="op" id="6644503">,</span>&nbsp;<span class="ident" id="6644505">name</span>&nbsp;<span class="op" id="6644510">:=</span>&nbsp;<span class="keyword" id="6644513">range</span>&nbsp;<span class="ident" id="6644519">names</span>&nbsp;<span class="op" id="6644525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644530">if</span>&nbsp;<span class="op" id="6644533">!</span><span class="ident" id="6644534">strings</span><span class="op" id="6644541">.</span><span class="ident" id="6644542">HasSuffix</span><span class="op" id="6644551">(</span><span class="ident" id="6644552">name</span><span class="op" id="6644556">,</span>&nbsp;<span class="ident" id="6644558">tt</span><span class="op" id="6644560">.</span><span class="ident" id="6644561">name</span><span class="op" id="6644565">)</span>&nbsp;<span class="op" id="6644567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644573">t</span><span class="op" id="6644574">.</span><span class="ident" id="6644575">Errorf</span><span class="op" id="6644581">(</span><span class="string" id="6644582">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="6644619">,</span>&nbsp;<span class="ident" id="6644621">name</span><span class="op" id="6644625">,</span>&nbsp;<span class="ident" id="6644627">tt</span><span class="op" id="6644629">.</span><span class="ident" id="6644630">name</span><span class="op" id="6644634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644639">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644646">}</span><br>
<span class="lineno"></span><span class="op" id="6644648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6644651">func</span>&nbsp;<span class="ident" id="6644656">TestLookupIANACNAME</span><span class="op" id="6644675">(</span><span class="ident" id="6644676">t</span>&nbsp;<span class="op" id="6644678">*</span><span class="ident" id="6644679">testing</span><span class="op" id="6644686">.</span><span class="ident" id="6644687">T</span><span class="op" id="6644688">)</span>&nbsp;<span class="op" id="6644690">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644693">if</span>&nbsp;<span class="ident" id="6644696">testing</span><span class="op" id="6644703">.</span><span class="ident" id="6644704">Short</span><span class="op" id="6644709">(</span><span class="op" id="6644710">)</span>&nbsp;<span class="op" id="6644712">||</span>&nbsp;<span class="op" id="6644715">!</span><span class="op" id="6644716">*</span><span class="ident" id="6644717">testExternal</span>&nbsp;<span class="op" id="6644730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644734">t</span><span class="op" id="6644735">.</span><span class="ident" id="6644736">Skip</span><span class="op" id="6644740">(</span><span class="string" id="6644741">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6644782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644789">cname</span><span class="op" id="6644794">,</span>&nbsp;<span class="ident" id="6644796">err</span>&nbsp;<span class="op" id="6644800">:=</span>&nbsp;<span class="ident" id="6644803">LookupCNAME</span><span class="op" id="6644814">(</span><span class="string" id="6644815">&#34;www.iana.org&#34;</span><span class="op" id="6644829">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644832">if</span>&nbsp;<span class="ident" id="6644835">err</span>&nbsp;<span class="op" id="6644839">!=</span>&nbsp;<span class="ident" id="6644842">nil</span>&nbsp;<span class="op" id="6644846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644850">t</span><span class="op" id="6644851">.</span><span class="ident" id="6644852">Fatal</span><span class="op" id="6644857">(</span><span class="ident" id="6644858">err</span><span class="op" id="6644861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644867">if</span>&nbsp;<span class="op" id="6644870">!</span><span class="ident" id="6644871">strings</span><span class="op" id="6644878">.</span><span class="ident" id="6644879">HasSuffix</span><span class="op" id="6644888">(</span><span class="ident" id="6644889">cname</span><span class="op" id="6644894">,</span>&nbsp;<span class="string" id="6644896">&#34;.icann.org.&#34;</span><span class="op" id="6644909">)</span>&nbsp;<span class="op" id="6644911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644915">t</span><span class="op" id="6644916">.</span><span class="ident" id="6644917">Errorf</span><span class="op" id="6644923">(</span><span class="string" id="6644924">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.icann.org.&#34;</span><span class="op" id="6644970">,</span>&nbsp;<span class="ident" id="6644972">cname</span><span class="op" id="6644977">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644980">}</span><br>
<span class="lineno"></span><span class="op" id="6644982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6644985">func</span>&nbsp;<span class="ident" id="6644990">TestLookupGoogleHost</span><span class="op" id="6645010">(</span><span class="ident" id="6645011">t</span>&nbsp;<span class="op" id="6645013">*</span><span class="ident" id="6645014">testing</span><span class="op" id="6645021">.</span><span class="ident" id="6645022">T</span><span class="op" id="6645023">)</span>&nbsp;<span class="op" id="6645025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645028">if</span>&nbsp;<span class="ident" id="6645031">testing</span><span class="op" id="6645038">.</span><span class="ident" id="6645039">Short</span><span class="op" id="6645044">(</span><span class="op" id="6645045">)</span>&nbsp;<span class="op" id="6645047">||</span>&nbsp;<span class="op" id="6645050">!</span><span class="op" id="6645051">*</span><span class="ident" id="6645052">testExternal</span>&nbsp;<span class="op" id="6645065">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645069">t</span><span class="op" id="6645070">.</span><span class="ident" id="6645071">Skip</span><span class="op" id="6645075">(</span><span class="string" id="6645076">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6645117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645124">addrs</span><span class="op" id="6645129">,</span>&nbsp;<span class="ident" id="6645131">err</span>&nbsp;<span class="op" id="6645135">:=</span>&nbsp;<span class="ident" id="6645138">LookupHost</span><span class="op" id="6645148">(</span><span class="string" id="6645149">&#34;google.com&#34;</span><span class="op" id="6645161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645164">if</span>&nbsp;<span class="ident" id="6645167">err</span>&nbsp;<span class="op" id="6645171">!=</span>&nbsp;<span class="ident" id="6645174">nil</span>&nbsp;<span class="op" id="6645178">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645182">t</span><span class="op" id="6645183">.</span><span class="ident" id="6645184">Fatal</span><span class="op" id="6645189">(</span><span class="ident" id="6645190">err</span><span class="op" id="6645193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645199">if</span>&nbsp;<span class="builtinfunc" id="6645202">len</span><span class="op" id="6645205">(</span><span class="ident" id="6645206">addrs</span><span class="op" id="6645211">)</span>&nbsp;<span class="op" id="6645213">==</span>&nbsp;<span class="num" id="6645216">0</span>&nbsp;<span class="op" id="6645218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645222">t</span><span class="op" id="6645223">.</span><span class="ident" id="6645224">Error</span><span class="op" id="6645229">(</span><span class="string" id="6645230">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6645245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645248">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645251">for</span>&nbsp;<span class="ident" id="6645255">_</span><span class="op" id="6645256">,</span>&nbsp;<span class="ident" id="6645258">addr</span>&nbsp;<span class="op" id="6645263">:=</span>&nbsp;<span class="keyword" id="6645266">range</span>&nbsp;<span class="ident" id="6645272">addrs</span>&nbsp;<span class="op" id="6645278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645282">if</span>&nbsp;<span class="ident" id="6645285">ParseIP</span><span class="op" id="6645292">(</span><span class="ident" id="6645293">addr</span><span class="op" id="6645297">)</span>&nbsp;<span class="op" id="6645299">==</span>&nbsp;<span class="ident" id="6645302">nil</span>&nbsp;<span class="op" id="6645306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645311">t</span><span class="op" id="6645312">.</span><span class="ident" id="6645313">Errorf</span><span class="op" id="6645319">(</span><span class="string" id="6645320">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;literal&nbsp;ip&nbsp;address&#34;</span><span class="op" id="6645355">,</span>&nbsp;<span class="ident" id="6645357">addr</span><span class="op" id="6645361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645368">}</span><br>
<span class="lineno">175</span><span class="op" id="6645370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6645373">func</span>&nbsp;<span class="ident" id="6645378">TestLookupGoogleIP</span><span class="op" id="6645396">(</span><span class="ident" id="6645397">t</span>&nbsp;<span class="op" id="6645399">*</span><span class="ident" id="6645400">testing</span><span class="op" id="6645407">.</span><span class="ident" id="6645408">T</span><span class="op" id="6645409">)</span>&nbsp;<span class="op" id="6645411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645414">if</span>&nbsp;<span class="ident" id="6645417">testing</span><span class="op" id="6645424">.</span><span class="ident" id="6645425">Short</span><span class="op" id="6645430">(</span><span class="op" id="6645431">)</span>&nbsp;<span class="op" id="6645433">||</span>&nbsp;<span class="op" id="6645436">!</span><span class="op" id="6645437">*</span><span class="ident" id="6645438">testExternal</span>&nbsp;<span class="op" id="6645451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645455">t</span><span class="op" id="6645456">.</span><span class="ident" id="6645457">Skip</span><span class="op" id="6645461">(</span><span class="string" id="6645462">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6645503">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645510">ips</span><span class="op" id="6645513">,</span>&nbsp;<span class="ident" id="6645515">err</span>&nbsp;<span class="op" id="6645519">:=</span>&nbsp;<span class="ident" id="6645522">LookupIP</span><span class="op" id="6645530">(</span><span class="string" id="6645531">&#34;google.com&#34;</span><span class="op" id="6645543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645546">if</span>&nbsp;<span class="ident" id="6645549">err</span>&nbsp;<span class="op" id="6645553">!=</span>&nbsp;<span class="ident" id="6645556">nil</span>&nbsp;<span class="op" id="6645560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645564">t</span><span class="op" id="6645565">.</span><span class="ident" id="6645566">Fatal</span><span class="op" id="6645571">(</span><span class="ident" id="6645572">err</span><span class="op" id="6645575">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645581">if</span>&nbsp;<span class="builtinfunc" id="6645584">len</span><span class="op" id="6645587">(</span><span class="ident" id="6645588">ips</span><span class="op" id="6645591">)</span>&nbsp;<span class="op" id="6645593">==</span>&nbsp;<span class="num" id="6645596">0</span>&nbsp;<span class="op" id="6645598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645602">t</span><span class="op" id="6645603">.</span><span class="ident" id="6645604">Error</span><span class="op" id="6645609">(</span><span class="string" id="6645610">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6645625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645631">for</span>&nbsp;<span class="ident" id="6645635">_</span><span class="op" id="6645636">,</span>&nbsp;<span class="ident" id="6645638">ip</span>&nbsp;<span class="op" id="6645641">:=</span>&nbsp;<span class="keyword" id="6645644">range</span>&nbsp;<span class="ident" id="6645650">ips</span>&nbsp;<span class="op" id="6645654">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645658">if</span>&nbsp;<span class="ident" id="6645661">ip</span><span class="op" id="6645663">.</span><span class="ident" id="6645664">To4</span><span class="op" id="6645667">(</span><span class="op" id="6645668">)</span>&nbsp;<span class="op" id="6645670">==</span>&nbsp;<span class="ident" id="6645673">nil</span>&nbsp;<span class="op" id="6645677">&amp;&amp;</span>&nbsp;<span class="ident" id="6645680">ip</span><span class="op" id="6645682">.</span><span class="ident" id="6645683">To16</span><span class="op" id="6645687">(</span><span class="op" id="6645688">)</span>&nbsp;<span class="op" id="6645690">==</span>&nbsp;<span class="ident" id="6645693">nil</span>&nbsp;<span class="op" id="6645697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645702">t</span><span class="op" id="6645703">.</span><span class="ident" id="6645704">Errorf</span><span class="op" id="6645710">(</span><span class="string" id="6645711">&#34;got&nbsp;%v;&nbsp;want&nbsp;an&nbsp;ip&nbsp;address&#34;</span><span class="op" id="6645739">,</span>&nbsp;<span class="ident" id="6645741">ip</span><span class="op" id="6645743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645750">}</span><br>
<span class="lineno"></span><span class="op" id="6645752">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="6645755">var</span>&nbsp;<span class="ident" id="6645759">revAddrTests</span>&nbsp;<span class="op" id="6645772">=</span>&nbsp;<span class="op" id="6645774">[</span><span class="op" id="6645775">]</span><span class="keyword" id="6645776">struct</span>&nbsp;<span class="op" id="6645783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645786">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6645796">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645804">Reverse</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6645814">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645822">ErrPrefix</span>&nbsp;<span class="builtintype" id="6645832">string</span><br>
<span class="lineno">200</span><span class="op" id="6645839">}</span><span class="op" id="6645840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645843">{</span><span class="string" id="6645844">&#34;1.2.3.4&#34;</span><span class="op" id="6645853">,</span>&nbsp;<span class="string" id="6645855">&#34;4.3.2.1.in-addr.arpa.&#34;</span><span class="op" id="6645878">,</span>&nbsp;<span class="string" id="6645880">&#34;&#34;</span><span class="op" id="6645882">}</span><span class="op" id="6645883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645886">{</span><span class="string" id="6645887">&#34;245.110.36.114&#34;</span><span class="op" id="6645903">,</span>&nbsp;<span class="string" id="6645905">&#34;114.36.110.245.in-addr.arpa.&#34;</span><span class="op" id="6645935">,</span>&nbsp;<span class="string" id="6645937">&#34;&#34;</span><span class="op" id="6645939">}</span><span class="op" id="6645940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645943">{</span><span class="string" id="6645944">&#34;::ffff:12.34.56.78&#34;</span><span class="op" id="6645964">,</span>&nbsp;<span class="string" id="6645966">&#34;78.56.34.12.in-addr.arpa.&#34;</span><span class="op" id="6645993">,</span>&nbsp;<span class="string" id="6645995">&#34;&#34;</span><span class="op" id="6645997">}</span><span class="op" id="6645998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646001">{</span><span class="string" id="6646002">&#34;::1&#34;</span><span class="op" id="6646007">,</span>&nbsp;<span class="string" id="6646009">&#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.&#34;</span><span class="op" id="6646084">,</span>&nbsp;<span class="string" id="6646086">&#34;&#34;</span><span class="op" id="6646088">}</span><span class="op" id="6646089">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646092">{</span><span class="string" id="6646093">&#34;1::&#34;</span><span class="op" id="6646098">,</span>&nbsp;<span class="string" id="6646100">&#34;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.ip6.arpa.&#34;</span><span class="op" id="6646175">,</span>&nbsp;<span class="string" id="6646177">&#34;&#34;</span><span class="op" id="6646179">}</span><span class="op" id="6646180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646183">{</span><span class="string" id="6646184">&#34;1234:567::89a:bcde&#34;</span><span class="op" id="6646204">,</span>&nbsp;<span class="string" id="6646206">&#34;e.d.c.b.a.9.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="6646281">,</span>&nbsp;<span class="string" id="6646283">&#34;&#34;</span><span class="op" id="6646285">}</span><span class="op" id="6646286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646289">{</span><span class="string" id="6646290">&#34;1234:567:fefe:bcbc:adad:9e4a:89a:bcde&#34;</span><span class="op" id="6646329">,</span>&nbsp;<span class="string" id="6646331">&#34;e.d.c.b.a.9.8.0.a.4.e.9.d.a.d.a.c.b.c.b.e.f.e.f.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="6646406">,</span>&nbsp;<span class="string" id="6646408">&#34;&#34;</span><span class="op" id="6646410">}</span><span class="op" id="6646411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646414">{</span><span class="string" id="6646415">&#34;1.2.3&#34;</span><span class="op" id="6646422">,</span>&nbsp;<span class="string" id="6646424">&#34;&#34;</span><span class="op" id="6646426">,</span>&nbsp;<span class="string" id="6646428">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6646450">}</span><span class="op" id="6646451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646454">{</span><span class="string" id="6646455">&#34;1.2.3.4.5&#34;</span><span class="op" id="6646466">,</span>&nbsp;<span class="string" id="6646468">&#34;&#34;</span><span class="op" id="6646470">,</span>&nbsp;<span class="string" id="6646472">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6646494">}</span><span class="op" id="6646495">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646498">{</span><span class="string" id="6646499">&#34;1234:567:bcbca::89a:bcde&#34;</span><span class="op" id="6646525">,</span>&nbsp;<span class="string" id="6646527">&#34;&#34;</span><span class="op" id="6646529">,</span>&nbsp;<span class="string" id="6646531">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6646553">}</span><span class="op" id="6646554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646557">{</span><span class="string" id="6646558">&#34;1234:567::bcbc:adad::89a:bcde&#34;</span><span class="op" id="6646589">,</span>&nbsp;<span class="string" id="6646591">&#34;&#34;</span><span class="op" id="6646593">,</span>&nbsp;<span class="string" id="6646595">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6646617">}</span><span class="op" id="6646618">,</span><br>
<span class="lineno"></span><span class="op" id="6646620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6646623">func</span>&nbsp;<span class="ident" id="6646628">TestReverseAddress</span><span class="op" id="6646646">(</span><span class="ident" id="6646647">t</span>&nbsp;<span class="op" id="6646649">*</span><span class="ident" id="6646650">testing</span><span class="op" id="6646657">.</span><span class="ident" id="6646658">T</span><span class="op" id="6646659">)</span>&nbsp;<span class="op" id="6646661">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6646664">for</span>&nbsp;<span class="ident" id="6646668">i</span><span class="op" id="6646669">,</span>&nbsp;<span class="ident" id="6646671">tt</span>&nbsp;<span class="op" id="6646674">:=</span>&nbsp;<span class="keyword" id="6646677">range</span>&nbsp;<span class="ident" id="6646683">revAddrTests</span>&nbsp;<span class="op" id="6646696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646700">a</span><span class="op" id="6646701">,</span>&nbsp;<span class="ident" id="6646703">err</span>&nbsp;<span class="op" id="6646707">:=</span>&nbsp;<span class="ident" id="6646710">reverseaddr</span><span class="op" id="6646721">(</span><span class="ident" id="6646722">tt</span><span class="op" id="6646724">.</span><span class="ident" id="6646725">Addr</span><span class="op" id="6646729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6646733">if</span>&nbsp;<span class="builtinfunc" id="6646736">len</span><span class="op" id="6646739">(</span><span class="ident" id="6646740">tt</span><span class="op" id="6646742">.</span><span class="ident" id="6646743">ErrPrefix</span><span class="op" id="6646752">)</span>&nbsp;<span class="op" id="6646754">&gt;</span>&nbsp;<span class="num" id="6646756">0</span>&nbsp;<span class="op" id="6646758">&amp;&amp;</span>&nbsp;<span class="ident" id="6646761">err</span>&nbsp;<span class="op" id="6646765">==</span>&nbsp;<span class="ident" id="6646768">nil</span>&nbsp;<span class="op" id="6646772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646777">t</span><span class="op" id="6646778">.</span><span class="ident" id="6646779">Errorf</span><span class="op" id="6646785">(</span><span class="string" id="6646786">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;&lt;nil&gt;&nbsp;(error)&#34;</span><span class="op" id="6646823">,</span>&nbsp;<span class="ident" id="6646825">i</span><span class="op" id="6646826">,</span>&nbsp;<span class="ident" id="6646828">tt</span><span class="op" id="6646830">.</span><span class="ident" id="6646831">ErrPrefix</span><span class="op" id="6646840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6646845">continue</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6646860">if</span>&nbsp;<span class="builtinfunc" id="6646863">len</span><span class="op" id="6646866">(</span><span class="ident" id="6646867">tt</span><span class="op" id="6646869">.</span><span class="ident" id="6646870">ErrPrefix</span><span class="op" id="6646879">)</span>&nbsp;<span class="op" id="6646881">==</span>&nbsp;<span class="num" id="6646884">0</span>&nbsp;<span class="op" id="6646886">&amp;&amp;</span>&nbsp;<span class="ident" id="6646889">err</span>&nbsp;<span class="op" id="6646893">!=</span>&nbsp;<span class="ident" id="6646896">nil</span>&nbsp;<span class="op" id="6646900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646905">t</span><span class="op" id="6646906">.</span><span class="ident" id="6646907">Errorf</span><span class="op" id="6646913">(</span><span class="string" id="6646914">&#34;#%d:&nbsp;expected&nbsp;&lt;nil&gt;,&nbsp;got&nbsp;%q&nbsp;(error)&#34;</span><span class="op" id="6646951">,</span>&nbsp;<span class="ident" id="6646953">i</span><span class="op" id="6646954">,</span>&nbsp;<span class="ident" id="6646956">err</span><span class="op" id="6646959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6646967">if</span>&nbsp;<span class="ident" id="6646970">err</span>&nbsp;<span class="op" id="6646974">!=</span>&nbsp;<span class="ident" id="6646977">nil</span>&nbsp;<span class="op" id="6646981">&amp;&amp;</span>&nbsp;<span class="ident" id="6646984">err</span><span class="op" id="6646987">.</span><span class="op" id="6646988">(</span><span class="op" id="6646989">*</span><span class="ident" id="6646990">DNSError</span><span class="op" id="6646998">)</span><span class="op" id="6646999">.</span><span class="ident" id="6647000">Err</span>&nbsp;<span class="op" id="6647004">!=</span>&nbsp;<span class="ident" id="6647007">tt</span><span class="op" id="6647009">.</span><span class="ident" id="6647010">ErrPrefix</span>&nbsp;<span class="op" id="6647020">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6647025">t</span><span class="op" id="6647026">.</span><span class="ident" id="6647027">Errorf</span><span class="op" id="6647033">(</span><span class="string" id="6647034">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(mismatched&nbsp;error)&#34;</span><span class="op" id="6647079">,</span>&nbsp;<span class="ident" id="6647081">i</span><span class="op" id="6647082">,</span>&nbsp;<span class="ident" id="6647084">tt</span><span class="op" id="6647086">.</span><span class="ident" id="6647087">ErrPrefix</span><span class="op" id="6647096">,</span>&nbsp;<span class="ident" id="6647098">err</span><span class="op" id="6647101">.</span><span class="op" id="6647102">(</span><span class="op" id="6647103">*</span><span class="ident" id="6647104">DNSError</span><span class="op" id="6647112">)</span><span class="op" id="6647113">.</span><span class="ident" id="6647114">Err</span><span class="op" id="6647117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6647121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6647125">if</span>&nbsp;<span class="ident" id="6647128">a</span>&nbsp;<span class="op" id="6647130">!=</span>&nbsp;<span class="ident" id="6647133">tt</span><span class="op" id="6647135">.</span><span class="ident" id="6647136">Reverse</span>&nbsp;<span class="op" id="6647144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6647149">t</span><span class="op" id="6647150">.</span><span class="ident" id="6647151">Errorf</span><span class="op" id="6647157">(</span><span class="string" id="6647158">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(reverse&nbsp;address)&#34;</span><span class="op" id="6647202">,</span>&nbsp;<span class="ident" id="6647204">i</span><span class="op" id="6647205">,</span>&nbsp;<span class="ident" id="6647207">tt</span><span class="op" id="6647209">.</span><span class="ident" id="6647210">Reverse</span><span class="op" id="6647217">,</span>&nbsp;<span class="ident" id="6647219">a</span><span class="op" id="6647220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6647224">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6647227">}</span><br>
<span class="lineno"></span><span class="op" id="6647229">}</span>
</div>
</body>
</html>
