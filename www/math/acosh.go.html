<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1961074">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1961129">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1961183">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1961234">package</span>&nbsp;<span class="ident" id="1961242">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1961248">//&nbsp;The&nbsp;original&nbsp;C&nbsp;code,&nbsp;the&nbsp;long&nbsp;comment,&nbsp;and&nbsp;the&nbsp;constants</span><br>
<span class="lineno"></span><span class="comment" id="1961308">//&nbsp;below&nbsp;are&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_acosh.c</span><br>
<span class="lineno"></span><span class="comment" id="1961368">//&nbsp;and&nbsp;came&nbsp;with&nbsp;this&nbsp;notice.&nbsp;&nbsp;The&nbsp;go&nbsp;code&nbsp;is&nbsp;a&nbsp;simplified</span><br>
<span class="lineno">10</span><span class="comment" id="1961427">//&nbsp;version&nbsp;of&nbsp;the&nbsp;original&nbsp;C.</span><br>
<span class="lineno"></span><span class="comment" id="1961457">//</span><br>
<span class="lineno"></span><span class="comment" id="1961460">//&nbsp;====================================================</span><br>
<span class="lineno"></span><span class="comment" id="1961516">//&nbsp;Copyright&nbsp;(C)&nbsp;1993&nbsp;by&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1961585">//</span><br>
<span class="lineno">15</span><span class="comment" id="1961588">//&nbsp;Developed&nbsp;at&nbsp;SunPro,&nbsp;a&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;business.</span><br>
<span class="lineno"></span><span class="comment" id="1961647">//&nbsp;Permission&nbsp;to&nbsp;use,&nbsp;copy,&nbsp;modify,&nbsp;and&nbsp;distribute&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="1961703">//&nbsp;software&nbsp;is&nbsp;freely&nbsp;granted,&nbsp;provided&nbsp;that&nbsp;this&nbsp;notice</span><br>
<span class="lineno"></span><span class="comment" id="1961760">//&nbsp;is&nbsp;preserved.</span><br>
<span class="lineno"></span><span class="comment" id="1961777">//&nbsp;====================================================</span><br>
<span class="lineno">20</span><span class="comment" id="1961833">//</span><br>
<span class="lineno"></span><span class="comment" id="1961836">//</span><br>
<span class="lineno"></span><span class="comment" id="1961839">//&nbsp;__ieee754_acosh(x)</span><br>
<span class="lineno"></span><span class="comment" id="1961861">//&nbsp;Method&nbsp;:</span><br>
<span class="lineno"></span><span class="comment" id="1961873">//&nbsp;&nbsp;&nbsp;&nbspBased&nbsp;on</span><br>
<span class="lineno">25</span><span class="comment" id="1961885">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;=&nbsp;log&nbsp;[&nbsp;x&nbsp;+&nbsp;sqrt(x*x-1)&nbsp;]</span><br>
<span class="lineno"></span><span class="comment" id="1961931">//&nbsp;&nbsp;&nbsp;&nbspwe&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="1961942">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log(x)+ln2,&nbsp;&nbsp;&nbsp;&nbspif&nbsp;x&nbsp;is&nbsp;large;&nbsp;else</span><br>
<span class="lineno"></span><span class="comment" id="1961997">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log(2x-1/(sqrt(x*x-1)+x))&nbsp;if&nbsp;x&gt;2;&nbsp;else</span><br>
<span class="lineno"></span><span class="comment" id="1962059">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log1p(t+sqrt(2.0*t+t*t));&nbsp;where&nbsp;t=x-1.</span><br>
<span class="lineno">30</span><span class="comment" id="1962121">//</span><br>
<span class="lineno"></span><span class="comment" id="1962124">//&nbsp;Special&nbsp;cases:</span><br>
<span class="lineno"></span><span class="comment" id="1962142">//&nbsp;&nbsp;&nbsp;&nbspacosh(x)&nbsp;is&nbsp;NaN&nbsp;with&nbsp;signal&nbsp;if&nbsp;x&lt;1.</span><br>
<span class="lineno"></span><span class="comment" id="1962181">//&nbsp;&nbsp;&nbsp;&nbspacosh(NaN)&nbsp;is&nbsp;NaN&nbsp;without&nbsp;signal.</span><br>
<span class="lineno"></span><span class="comment" id="1962218">//</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="1962222">//&nbsp;Acosh&nbsp;returns&nbsp;the&nbsp;inverse&nbsp;hyperbolic&nbsp;cosine&nbsp;of&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="1962275">//</span><br>
<span class="lineno"></span><span class="comment" id="1962278">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="1962300">//&nbsp;&nbsp;&nbsp;&nbspAcosh(+Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">40</span><span class="comment" id="1962322">//&nbsp;&nbsp;&nbsp;&nbspAcosh(x)&nbsp;=&nbsp;NaN&nbsp;if&nbsp;x&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1962349">//&nbsp;&nbsp;&nbsp;&nbspAcosh(NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="keyword" id="1962369">func</span>&nbsp;<span class="ident" id="1962374">Acosh</span><span class="op" id="1962379">(</span><span class="ident" id="1962380">x</span>&nbsp;<span class="builtintype" id="1962382">float64</span><span class="op" id="1962389">)</span>&nbsp;<span class="builtintype" id="1962391">float64</span>&nbsp;<span class="op" id="1962399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962402">const</span>&nbsp;<span class="op" id="1962408">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1962412">Ln2</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1962418">=</span>&nbsp;<span class="num" id="1962420">6.93147180559945286227e-01</span>&nbsp;<span class="comment" id="1962447">//&nbsp;0x3FE62E42FEFA39EF</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1962471">Large</span>&nbsp;<span class="op" id="1962477">=</span>&nbsp;<span class="num" id="1962479">1</span>&nbsp;<span class="op" id="1962481">&lt;&lt;</span>&nbsp;<span class="num" id="1962484">28</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1962506">//&nbsp;2**28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1962516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1962519">//&nbsp;first&nbsp;case&nbsp;is&nbsp;special&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962550">switch</span>&nbsp;<span class="op" id="1962557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962560">case</span>&nbsp;<span class="ident" id="1962565">x</span>&nbsp;<span class="op" id="1962567">&lt;</span>&nbsp;<span class="num" id="1962569">1</span>&nbsp;<span class="op" id="1962571">||</span>&nbsp;<span class="ident" id="1962574">IsNaN</span><span class="op" id="1962579">(</span><span class="ident" id="1962580">x</span><span class="op" id="1962581">)</span><span class="op" id="1962582">:</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962586">return</span>&nbsp;<span class="ident" id="1962593">NaN</span><span class="op" id="1962596">(</span><span class="op" id="1962597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962600">case</span>&nbsp;<span class="ident" id="1962605">x</span>&nbsp;<span class="op" id="1962607">==</span>&nbsp;<span class="num" id="1962610">1</span><span class="op" id="1962611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962615">return</span>&nbsp;<span class="num" id="1962622">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962625">case</span>&nbsp;<span class="ident" id="1962630">x</span>&nbsp;<span class="op" id="1962632">&gt;=</span>&nbsp;<span class="ident" id="1962635">Large</span><span class="op" id="1962640">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962644">return</span>&nbsp;<span class="ident" id="1962651">Log</span><span class="op" id="1962654">(</span><span class="ident" id="1962655">x</span><span class="op" id="1962656">)</span>&nbsp;<span class="op" id="1962658">+</span>&nbsp;<span class="ident" id="1962660">Ln2</span>&nbsp;<span class="comment" id="1962664">//&nbsp;x&nbsp;&gt;&nbsp;2**28</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962678">case</span>&nbsp;<span class="ident" id="1962683">x</span>&nbsp;<span class="op" id="1962685">&gt;</span>&nbsp;<span class="num" id="1962687">2</span><span class="op" id="1962688">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962692">return</span>&nbsp;<span class="ident" id="1962699">Log</span><span class="op" id="1962702">(</span><span class="num" id="1962703">2</span><span class="op" id="1962704">*</span><span class="ident" id="1962705">x</span>&nbsp;<span class="op" id="1962707">-</span>&nbsp;<span class="num" id="1962709">1</span><span class="op" id="1962710">/</span><span class="op" id="1962711">(</span><span class="ident" id="1962712">x</span><span class="op" id="1962713">+</span><span class="ident" id="1962714">Sqrt</span><span class="op" id="1962718">(</span><span class="ident" id="1962719">x</span><span class="op" id="1962720">*</span><span class="ident" id="1962721">x</span><span class="op" id="1962722">-</span><span class="num" id="1962723">1</span><span class="op" id="1962724">)</span><span class="op" id="1962725">)</span><span class="op" id="1962726">)</span>&nbsp;<span class="comment" id="1962728">//&nbsp;2**28&nbsp;&gt;&nbsp;x&nbsp;&gt;&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1962746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1962749">t</span>&nbsp;<span class="op" id="1962751">:=</span>&nbsp;<span class="ident" id="1962754">x</span>&nbsp;<span class="op" id="1962756">-</span>&nbsp;<span class="num" id="1962758">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1962761">return</span>&nbsp;<span class="ident" id="1962768">Log1p</span><span class="op" id="1962773">(</span><span class="ident" id="1962774">t</span>&nbsp;<span class="op" id="1962776">+</span>&nbsp;<span class="ident" id="1962778">Sqrt</span><span class="op" id="1962782">(</span><span class="num" id="1962783">2</span><span class="op" id="1962784">*</span><span class="ident" id="1962785">t</span><span class="op" id="1962786">+</span><span class="ident" id="1962787">t</span><span class="op" id="1962788">*</span><span class="ident" id="1962789">t</span><span class="op" id="1962790">)</span><span class="op" id="1962791">)</span>&nbsp;<span class="comment" id="1962793">//&nbsp;2&nbsp;&gt;=&nbsp;x&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno">60</span><span class="op" id="1962807">}</span>
</div>
</body>
</html>
