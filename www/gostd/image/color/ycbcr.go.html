<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html" class="current">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5191515">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5191570">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5191624">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5191675">package</span>&nbsp;<span class="ident" id="5191683">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5191690">//&nbsp;RGBToYCbCr&nbsp;converts&nbsp;an&nbsp;RGB&nbsp;triple&nbsp;to&nbsp;a&nbsp;Y&#39;CbCr&nbsp;triple.</span><br>
<span class="lineno"></span><span class="keyword" id="5191747">func</span>&nbsp;<span class="ident" id="5191752">RGBToYCbCr</span><span class="op" id="5191762">(</span><span class="ident" id="5191763">r</span><span class="op" id="5191764">,</span>&nbsp;<span class="ident" id="5191766">g</span><span class="op" id="5191767">,</span>&nbsp;<span class="ident" id="5191769">b</span>&nbsp;<span class="builtintype" id="5191771">uint8</span><span class="op" id="5191776">)</span>&nbsp;<span class="op" id="5191778">(</span><span class="builtintype" id="5191779">uint8</span><span class="op" id="5191784">,</span>&nbsp;<span class="builtintype" id="5191786">uint8</span><span class="op" id="5191791">,</span>&nbsp;<span class="builtintype" id="5191793">uint8</span><span class="op" id="5191798">)</span>&nbsp;<span class="op" id="5191800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5191803">//&nbsp;The&nbsp;JFIF&nbsp;specification&nbsp;says:</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5191836">//&nbsp;&nbsp;&nbsp;&nbsp;Y&#39;&nbsp;=&nbsp;&nbsp;0.2990*R&nbsp;+&nbsp;0.5870*G&nbsp;+&nbsp;0.1140*B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5191877">//&nbsp;&nbsp;&nbsp;&nbsp;Cb&nbsp;=&nbsp;-0.1687*R&nbsp;-&nbsp;0.3313*G&nbsp;+&nbsp;0.5000*B&nbsp;+&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5191924">//&nbsp;&nbsp;&nbsp;&nbsp;Cr&nbsp;=&nbsp;&nbsp;0.5000*R&nbsp;-&nbsp;0.4187*G&nbsp;-&nbsp;0.0813*B&nbsp;+&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5191971">//&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf&nbsp;says&nbsp;Y&nbsp;but&nbsp;means&nbsp;Y&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192038">r1</span>&nbsp;<span class="op" id="5192041">:=</span>&nbsp;<span class="builtintype" id="5192044">int</span><span class="op" id="5192047">(</span><span class="ident" id="5192048"><a href="/gostd/image/color/ycbcr.go.html#5191763">r</a></span><span class="op" id="5192049">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192052">g1</span>&nbsp;<span class="op" id="5192055">:=</span>&nbsp;<span class="builtintype" id="5192058">int</span><span class="op" id="5192061">(</span><span class="ident" id="5192062"><a href="/gostd/image/color/ycbcr.go.html#5191766">g</a></span><span class="op" id="5192063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192066">b1</span>&nbsp;<span class="op" id="5192069">:=</span>&nbsp;<span class="builtintype" id="5192072">int</span><span class="op" id="5192075">(</span><span class="ident" id="5192076"><a href="/gostd/image/color/ycbcr.go.html#5191769">b</a></span><span class="op" id="5192077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192080">yy</span>&nbsp;<span class="op" id="5192083">:=</span>&nbsp;<span class="op" id="5192086">(</span><span class="num" id="5192087">19595</span><span class="op" id="5192092">*</span><span class="ident" id="5192093"><a href="/gostd/image/color/ycbcr.go.html#5192038">r1</a></span>&nbsp;<span class="op" id="5192096">+</span>&nbsp;<span class="num" id="5192098">38470</span><span class="op" id="5192103">*</span><span class="ident" id="5192104"><a href="/gostd/image/color/ycbcr.go.html#5192052">g1</a></span>&nbsp;<span class="op" id="5192107">+</span>&nbsp;<span class="num" id="5192109">7471</span><span class="op" id="5192113">*</span><span class="ident" id="5192114"><a href="/gostd/image/color/ycbcr.go.html#5192066">b1</a></span>&nbsp;<span class="op" id="5192117">+</span>&nbsp;<span class="num" id="5192119">1</span><span class="op" id="5192120">&lt;&lt;</span><span class="num" id="5192122">15</span><span class="op" id="5192124">)</span>&nbsp;<span class="op" id="5192126">&gt;&gt;</span>&nbsp;<span class="num" id="5192129">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192133">cb</span>&nbsp;<span class="op" id="5192136">:=</span>&nbsp;<span class="op" id="5192139">(</span><span class="op" id="5192140">-</span><span class="num" id="5192141">11056</span><span class="op" id="5192146">*</span><span class="ident" id="5192147"><a href="/gostd/image/color/ycbcr.go.html#5192038">r1</a></span>&nbsp;<span class="op" id="5192150">-</span>&nbsp;<span class="num" id="5192152">21712</span><span class="op" id="5192157">*</span><span class="ident" id="5192158"><a href="/gostd/image/color/ycbcr.go.html#5192052">g1</a></span>&nbsp;<span class="op" id="5192161">+</span>&nbsp;<span class="num" id="5192163">32768</span><span class="op" id="5192168">*</span><span class="ident" id="5192169"><a href="/gostd/image/color/ycbcr.go.html#5192066">b1</a></span>&nbsp;<span class="op" id="5192172">+</span>&nbsp;<span class="num" id="5192174">257</span><span class="op" id="5192177">&lt;&lt;</span><span class="num" id="5192179">15</span><span class="op" id="5192181">)</span>&nbsp;<span class="op" id="5192183">&gt;&gt;</span>&nbsp;<span class="num" id="5192186">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192190">cr</span>&nbsp;<span class="op" id="5192193">:=</span>&nbsp;<span class="op" id="5192196">(</span><span class="num" id="5192197">32768</span><span class="op" id="5192202">*</span><span class="ident" id="5192203"><a href="/gostd/image/color/ycbcr.go.html#5192038">r1</a></span>&nbsp;<span class="op" id="5192206">-</span>&nbsp;<span class="num" id="5192208">27440</span><span class="op" id="5192213">*</span><span class="ident" id="5192214"><a href="/gostd/image/color/ycbcr.go.html#5192052">g1</a></span>&nbsp;<span class="op" id="5192217">-</span>&nbsp;<span class="num" id="5192219">5328</span><span class="op" id="5192223">*</span><span class="ident" id="5192224"><a href="/gostd/image/color/ycbcr.go.html#5192066">b1</a></span>&nbsp;<span class="op" id="5192227">+</span>&nbsp;<span class="num" id="5192229">257</span><span class="op" id="5192232">&lt;&lt;</span><span class="num" id="5192234">15</span><span class="op" id="5192236">)</span>&nbsp;<span class="op" id="5192238">&gt;&gt;</span>&nbsp;<span class="num" id="5192241">16</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5192245">if</span>&nbsp;<span class="ident" id="5192248"><a href="/gostd/image/color/ycbcr.go.html#5192080">yy</a></span>&nbsp;<span class="op" id="5192251">&lt;</span>&nbsp;<span class="num" id="5192253">0</span>&nbsp;<span class="op" id="5192255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192259"><a href="/gostd/image/color/ycbcr.go.html#5192080">yy</a></span>&nbsp;<span class="op" id="5192262">=</span>&nbsp;<span class="num" id="5192264">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5192267">}</span>&nbsp;<span class="keyword" id="5192269">else</span>&nbsp;<span class="keyword" id="5192274">if</span>&nbsp;<span class="ident" id="5192277"><a href="/gostd/image/color/ycbcr.go.html#5192080">yy</a></span>&nbsp;<span class="op" id="5192280">&gt;</span>&nbsp;<span class="num" id="5192282">255</span>&nbsp;<span class="op" id="5192286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192290"><a href="/gostd/image/color/ycbcr.go.html#5192080">yy</a></span>&nbsp;<span class="op" id="5192293">=</span>&nbsp;<span class="num" id="5192295">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5192300">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5192303">if</span>&nbsp;<span class="ident" id="5192306"><a href="/gostd/image/color/ycbcr.go.html#5192133">cb</a></span>&nbsp;<span class="op" id="5192309">&lt;</span>&nbsp;<span class="num" id="5192311">0</span>&nbsp;<span class="op" id="5192313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192317"><a href="/gostd/image/color/ycbcr.go.html#5192133">cb</a></span>&nbsp;<span class="op" id="5192320">=</span>&nbsp;<span class="num" id="5192322">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5192325">}</span>&nbsp;<span class="keyword" id="5192327">else</span>&nbsp;<span class="keyword" id="5192332">if</span>&nbsp;<span class="ident" id="5192335"><a href="/gostd/image/color/ycbcr.go.html#5192133">cb</a></span>&nbsp;<span class="op" id="5192338">&gt;</span>&nbsp;<span class="num" id="5192340">255</span>&nbsp;<span class="op" id="5192344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192348"><a href="/gostd/image/color/ycbcr.go.html#5192133">cb</a></span>&nbsp;<span class="op" id="5192351">=</span>&nbsp;<span class="num" id="5192353">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5192358">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5192361">if</span>&nbsp;<span class="ident" id="5192364"><a href="/gostd/image/color/ycbcr.go.html#5192190">cr</a></span>&nbsp;<span class="op" id="5192367">&lt;</span>&nbsp;<span class="num" id="5192369">0</span>&nbsp;<span class="op" id="5192371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192375"><a href="/gostd/image/color/ycbcr.go.html#5192190">cr</a></span>&nbsp;<span class="op" id="5192378">=</span>&nbsp;<span class="num" id="5192380">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5192383">}</span>&nbsp;<span class="keyword" id="5192385">else</span>&nbsp;<span class="keyword" id="5192390">if</span>&nbsp;<span class="ident" id="5192393"><a href="/gostd/image/color/ycbcr.go.html#5192190">cr</a></span>&nbsp;<span class="op" id="5192396">&gt;</span>&nbsp;<span class="num" id="5192398">255</span>&nbsp;<span class="op" id="5192402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192406"><a href="/gostd/image/color/ycbcr.go.html#5192190">cr</a></span>&nbsp;<span class="op" id="5192409">=</span>&nbsp;<span class="num" id="5192411">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5192416">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5192419">return</span>&nbsp;<span class="builtintype" id="5192426">uint8</span><span class="op" id="5192431">(</span><span class="ident" id="5192432"><a href="/gostd/image/color/ycbcr.go.html#5192080">yy</a></span><span class="op" id="5192434">)</span><span class="op" id="5192435">,</span>&nbsp;<span class="builtintype" id="5192437">uint8</span><span class="op" id="5192442">(</span><span class="ident" id="5192443"><a href="/gostd/image/color/ycbcr.go.html#5192133">cb</a></span><span class="op" id="5192445">)</span><span class="op" id="5192446">,</span>&nbsp;<span class="builtintype" id="5192448">uint8</span><span class="op" id="5192453">(</span><span class="ident" id="5192454"><a href="/gostd/image/color/ycbcr.go.html#5192190">cr</a></span><span class="op" id="5192456">)</span><br>
<span class="lineno"></span><span class="op" id="5192458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5192461">//&nbsp;YCbCrToRGB&nbsp;converts&nbsp;a&nbsp;Y&#39;CbCr&nbsp;triple&nbsp;to&nbsp;an&nbsp;RGB&nbsp;triple.</span><br>
<span class="lineno"></span><span class="keyword" id="5192518">func</span>&nbsp;<span class="ident" id="5192523">YCbCrToRGB</span><span class="op" id="5192533">(</span><span class="ident" id="5192534">y</span><span class="op" id="5192535">,</span>&nbsp;<span class="ident" id="5192537">cb</span><span class="op" id="5192539">,</span>&nbsp;<span class="ident" id="5192541">cr</span>&nbsp;<span class="builtintype" id="5192544">uint8</span><span class="op" id="5192549">)</span>&nbsp;<span class="op" id="5192551">(</span><span class="builtintype" id="5192552">uint8</span><span class="op" id="5192557">,</span>&nbsp;<span class="builtintype" id="5192559">uint8</span><span class="op" id="5192564">,</span>&nbsp;<span class="builtintype" id="5192566">uint8</span><span class="op" id="5192571">)</span>&nbsp;<span class="op" id="5192573">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5192576">//&nbsp;The&nbsp;JFIF&nbsp;specification&nbsp;says:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5192609">//&nbsp;&nbsp;&nbsp;&nbsp;R&nbsp;=&nbsp;Y&#39;&nbsp;+&nbsp;1.40200*(Cr-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5192639">//&nbsp;&nbsp;&nbsp;&nbsp;G&nbsp;=&nbsp;Y&#39;&nbsp;-&nbsp;0.34414*(Cb-128)&nbsp;-&nbsp;0.71414*(Cr-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5192688">//&nbsp;&nbsp;&nbsp;&nbsp;B&nbsp;=&nbsp;Y&#39;&nbsp;+&nbsp;1.77200*(Cb-128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5192718">//&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf&nbsp;says&nbsp;Y&nbsp;but&nbsp;means&nbsp;Y&#39;.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192785">yy1</span>&nbsp;<span class="op" id="5192789">:=</span>&nbsp;<span class="builtintype" id="5192792">int</span><span class="op" id="5192795">(</span><span class="ident" id="5192796"><a href="/gostd/image/color/ycbcr.go.html#5192534">y</a></span><span class="op" id="5192797">)</span><span class="op" id="5192798">&lt;&lt;</span><span class="num" id="5192800">16</span>&nbsp;<span class="op" id="5192803">+</span>&nbsp;<span class="num" id="5192805">1</span><span class="op" id="5192806">&lt;&lt;</span><span class="num" id="5192808">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192812">cb1</span>&nbsp;<span class="op" id="5192816">:=</span>&nbsp;<span class="builtintype" id="5192819">int</span><span class="op" id="5192822">(</span><span class="ident" id="5192823"><a href="/gostd/image/color/ycbcr.go.html#5192537">cb</a></span><span class="op" id="5192825">)</span>&nbsp;<span class="op" id="5192827">-</span>&nbsp;<span class="num" id="5192829">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192834">cr1</span>&nbsp;<span class="op" id="5192838">:=</span>&nbsp;<span class="builtintype" id="5192841">int</span><span class="op" id="5192844">(</span><span class="ident" id="5192845"><a href="/gostd/image/color/ycbcr.go.html#5192541">cr</a></span><span class="op" id="5192847">)</span>&nbsp;<span class="op" id="5192849">-</span>&nbsp;<span class="num" id="5192851">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192856">r</span>&nbsp;<span class="op" id="5192858">:=</span>&nbsp;<span class="op" id="5192861">(</span><span class="ident" id="5192862"><a href="/gostd/image/color/ycbcr.go.html#5192785">yy1</a></span>&nbsp;<span class="op" id="5192866">+</span>&nbsp;<span class="num" id="5192868">91881</span><span class="op" id="5192873">*</span><span class="ident" id="5192874"><a href="/gostd/image/color/ycbcr.go.html#5192834">cr1</a></span><span class="op" id="5192877">)</span>&nbsp;<span class="op" id="5192879">&gt;&gt;</span>&nbsp;<span class="num" id="5192882">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192886">g</span>&nbsp;<span class="op" id="5192888">:=</span>&nbsp;<span class="op" id="5192891">(</span><span class="ident" id="5192892"><a href="/gostd/image/color/ycbcr.go.html#5192785">yy1</a></span>&nbsp;<span class="op" id="5192896">-</span>&nbsp;<span class="num" id="5192898">22554</span><span class="op" id="5192903">*</span><span class="ident" id="5192904"><a href="/gostd/image/color/ycbcr.go.html#5192812">cb1</a></span>&nbsp;<span class="op" id="5192908">-</span>&nbsp;<span class="num" id="5192910">46802</span><span class="op" id="5192915">*</span><span class="ident" id="5192916"><a href="/gostd/image/color/ycbcr.go.html#5192834">cr1</a></span><span class="op" id="5192919">)</span>&nbsp;<span class="op" id="5192921">&gt;&gt;</span>&nbsp;<span class="num" id="5192924">16</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192928">b</span>&nbsp;<span class="op" id="5192930">:=</span>&nbsp;<span class="op" id="5192933">(</span><span class="ident" id="5192934"><a href="/gostd/image/color/ycbcr.go.html#5192785">yy1</a></span>&nbsp;<span class="op" id="5192938">+</span>&nbsp;<span class="num" id="5192940">116130</span><span class="op" id="5192946">*</span><span class="ident" id="5192947"><a href="/gostd/image/color/ycbcr.go.html#5192812">cb1</a></span><span class="op" id="5192950">)</span>&nbsp;<span class="op" id="5192952">&gt;&gt;</span>&nbsp;<span class="num" id="5192955">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5192959">if</span>&nbsp;<span class="ident" id="5192962"><a href="/gostd/image/color/ycbcr.go.html#5192856">r</a></span>&nbsp;<span class="op" id="5192964">&lt;</span>&nbsp;<span class="num" id="5192966">0</span>&nbsp;<span class="op" id="5192968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5192972"><a href="/gostd/image/color/ycbcr.go.html#5192856">r</a></span>&nbsp;<span class="op" id="5192974">=</span>&nbsp;<span class="num" id="5192976">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5192979">}</span>&nbsp;<span class="keyword" id="5192981">else</span>&nbsp;<span class="keyword" id="5192986">if</span>&nbsp;<span class="ident" id="5192989"><a href="/gostd/image/color/ycbcr.go.html#5192856">r</a></span>&nbsp;<span class="op" id="5192991">&gt;</span>&nbsp;<span class="num" id="5192993">255</span>&nbsp;<span class="op" id="5192997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5193001"><a href="/gostd/image/color/ycbcr.go.html#5192856">r</a></span>&nbsp;<span class="op" id="5193003">=</span>&nbsp;<span class="num" id="5193005">255</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5193010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5193013">if</span>&nbsp;<span class="ident" id="5193016"><a href="/gostd/image/color/ycbcr.go.html#5192886">g</a></span>&nbsp;<span class="op" id="5193018">&lt;</span>&nbsp;<span class="num" id="5193020">0</span>&nbsp;<span class="op" id="5193022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5193026"><a href="/gostd/image/color/ycbcr.go.html#5192886">g</a></span>&nbsp;<span class="op" id="5193028">=</span>&nbsp;<span class="num" id="5193030">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5193033">}</span>&nbsp;<span class="keyword" id="5193035">else</span>&nbsp;<span class="keyword" id="5193040">if</span>&nbsp;<span class="ident" id="5193043"><a href="/gostd/image/color/ycbcr.go.html#5192886">g</a></span>&nbsp;<span class="op" id="5193045">&gt;</span>&nbsp;<span class="num" id="5193047">255</span>&nbsp;<span class="op" id="5193051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5193055"><a href="/gostd/image/color/ycbcr.go.html#5192886">g</a></span>&nbsp;<span class="op" id="5193057">=</span>&nbsp;<span class="num" id="5193059">255</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5193064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5193067">if</span>&nbsp;<span class="ident" id="5193070"><a href="/gostd/image/color/ycbcr.go.html#5192928">b</a></span>&nbsp;<span class="op" id="5193072">&lt;</span>&nbsp;<span class="num" id="5193074">0</span>&nbsp;<span class="op" id="5193076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5193080"><a href="/gostd/image/color/ycbcr.go.html#5192928">b</a></span>&nbsp;<span class="op" id="5193082">=</span>&nbsp;<span class="num" id="5193084">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5193087">}</span>&nbsp;<span class="keyword" id="5193089">else</span>&nbsp;<span class="keyword" id="5193094">if</span>&nbsp;<span class="ident" id="5193097"><a href="/gostd/image/color/ycbcr.go.html#5192928">b</a></span>&nbsp;<span class="op" id="5193099">&gt;</span>&nbsp;<span class="num" id="5193101">255</span>&nbsp;<span class="op" id="5193105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5193109"><a href="/gostd/image/color/ycbcr.go.html#5192928">b</a></span>&nbsp;<span class="op" id="5193111">=</span>&nbsp;<span class="num" id="5193113">255</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5193118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5193121">return</span>&nbsp;<span class="builtintype" id="5193128">uint8</span><span class="op" id="5193133">(</span><span class="ident" id="5193134"><a href="/gostd/image/color/ycbcr.go.html#5192856">r</a></span><span class="op" id="5193135">)</span><span class="op" id="5193136">,</span>&nbsp;<span class="builtintype" id="5193138">uint8</span><span class="op" id="5193143">(</span><span class="ident" id="5193144"><a href="/gostd/image/color/ycbcr.go.html#5192886">g</a></span><span class="op" id="5193145">)</span><span class="op" id="5193146">,</span>&nbsp;<span class="builtintype" id="5193148">uint8</span><span class="op" id="5193153">(</span><span class="ident" id="5193154"><a href="/gostd/image/color/ycbcr.go.html#5192928">b</a></span><span class="op" id="5193155">)</span><br>
<span class="lineno"></span><span class="op" id="5193157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5193160">//&nbsp;YCbCr&nbsp;represents&nbsp;a&nbsp;fully&nbsp;opaque&nbsp;24-bit&nbsp;Y&#39;CbCr&nbsp;color,&nbsp;having&nbsp;8&nbsp;bits&nbsp;each&nbsp;for</span><br>
<span class="lineno">70</span><span class="comment" id="5193239">//&nbsp;one&nbsp;luma&nbsp;and&nbsp;two&nbsp;chroma&nbsp;components.</span><br>
<span class="lineno"></span><span class="comment" id="5193278">//</span><br>
<span class="lineno"></span><span class="comment" id="5193281">//&nbsp;JPEG,&nbsp;VP8,&nbsp;the&nbsp;MPEG&nbsp;family&nbsp;and&nbsp;other&nbsp;codecs&nbsp;use&nbsp;this&nbsp;color&nbsp;model.&nbsp;Such</span><br>
<span class="lineno"></span><span class="comment" id="5193355">//&nbsp;codecs&nbsp;often&nbsp;use&nbsp;the&nbsp;terms&nbsp;YUV&nbsp;and&nbsp;Y&#39;CbCr&nbsp;interchangeably,&nbsp;but&nbsp;strictly</span><br>
<span class="lineno"></span><span class="comment" id="5193430">//&nbsp;speaking,&nbsp;the&nbsp;term&nbsp;YUV&nbsp;applies&nbsp;only&nbsp;to&nbsp;analog&nbsp;video&nbsp;signals,&nbsp;and&nbsp;Y&#39;&nbsp;(luma)</span><br>
<span class="lineno">75</span><span class="comment" id="5193508">//&nbsp;is&nbsp;Y&nbsp;(luminance)&nbsp;after&nbsp;applying&nbsp;gamma&nbsp;correction.</span><br>
<span class="lineno"></span><span class="comment" id="5193561">//</span><br>
<span class="lineno"></span><span class="comment" id="5193564">//&nbsp;Conversion&nbsp;between&nbsp;RGB&nbsp;and&nbsp;Y&#39;CbCr&nbsp;is&nbsp;lossy&nbsp;and&nbsp;there&nbsp;are&nbsp;multiple,&nbsp;slightly</span><br>
<span class="lineno"></span><span class="comment" id="5193643">//&nbsp;different&nbsp;formulae&nbsp;for&nbsp;converting&nbsp;between&nbsp;the&nbsp;two.&nbsp;This&nbsp;package&nbsp;follows</span><br>
<span class="lineno"></span><span class="comment" id="5193718">//&nbsp;the&nbsp;JFIF&nbsp;specification&nbsp;at&nbsp;http://www.w3.org/Graphics/JPEG/jfif3.pdf.</span><br>
<span class="lineno">80</span><span class="keyword" id="5193790">type</span>&nbsp;<span class="ident" id="5193795">YCbCr</span>&nbsp;<span class="keyword" id="5193801">struct</span>&nbsp;<span class="op" id="5193808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5193811">Y</span><span class="op" id="5193812">,</span>&nbsp;<span class="ident" id="5193814">Cb</span><span class="op" id="5193816">,</span>&nbsp;<span class="ident" id="5193818">Cr</span>&nbsp;<span class="builtintype" id="5193821">uint8</span><br>
<span class="lineno"></span><span class="op" id="5193827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5193830">func</span>&nbsp;<span class="op" id="5193835">(</span><span class="ident" id="5193836">c</span>&nbsp;<span class="ident" id="5193838"><a href="/gostd/image/color/ycbcr.go.html#5193795">YCbCr</a></span><span class="op" id="5193843">)</span>&nbsp;<span class="ident" id="5193845">RGBA</span><span class="op" id="5193849">(</span><span class="op" id="5193850">)</span>&nbsp;<span class="op" id="5193852">(</span><span class="builtintype" id="5193853">uint32</span><span class="op" id="5193859">,</span>&nbsp;<span class="builtintype" id="5193861">uint32</span><span class="op" id="5193867">,</span>&nbsp;<span class="builtintype" id="5193869">uint32</span><span class="op" id="5193875">,</span>&nbsp;<span class="builtintype" id="5193877">uint32</span><span class="op" id="5193883">)</span>&nbsp;<span class="op" id="5193885">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5193888">r</span><span class="op" id="5193889">,</span>&nbsp;<span class="ident" id="5193891">g</span><span class="op" id="5193892">,</span>&nbsp;<span class="ident" id="5193894">b</span>&nbsp;<span class="op" id="5193896">:=</span>&nbsp;<span class="ident" id="5193899"><a href="/gostd/image/color/ycbcr.go.html#5192523">YCbCrToRGB</a></span><span class="op" id="5193909">(</span><span class="ident" id="5193910"><a href="/gostd/image/color/ycbcr.go.html#5193836">c</a></span><span class="op" id="5193911">.</span><span class="ident" id="5193912"><a href="/gostd/image/color/ycbcr.go.html#5193811">Y</a></span><span class="op" id="5193913">,</span>&nbsp;<span class="ident" id="5193915"><a href="/gostd/image/color/ycbcr.go.html#5193836">c</a></span><span class="op" id="5193916">.</span><span class="ident" id="5193917"><a href="/gostd/image/color/ycbcr.go.html#5193814">Cb</a></span><span class="op" id="5193919">,</span>&nbsp;<span class="ident" id="5193921"><a href="/gostd/image/color/ycbcr.go.html#5193836">c</a></span><span class="op" id="5193922">.</span><span class="ident" id="5193923"><a href="/gostd/image/color/ycbcr.go.html#5193818">Cr</a></span><span class="op" id="5193925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5193928">return</span>&nbsp;<span class="builtintype" id="5193935">uint32</span><span class="op" id="5193941">(</span><span class="ident" id="5193942"><a href="/gostd/image/color/ycbcr.go.html#5193888">r</a></span><span class="op" id="5193943">)</span>&nbsp;<span class="op" id="5193945">*</span>&nbsp;<span class="num" id="5193947">0x101</span><span class="op" id="5193952">,</span>&nbsp;<span class="builtintype" id="5193954">uint32</span><span class="op" id="5193960">(</span><span class="ident" id="5193961"><a href="/gostd/image/color/ycbcr.go.html#5193891">g</a></span><span class="op" id="5193962">)</span>&nbsp;<span class="op" id="5193964">*</span>&nbsp;<span class="num" id="5193966">0x101</span><span class="op" id="5193971">,</span>&nbsp;<span class="builtintype" id="5193973">uint32</span><span class="op" id="5193979">(</span><span class="ident" id="5193980"><a href="/gostd/image/color/ycbcr.go.html#5193894">b</a></span><span class="op" id="5193981">)</span>&nbsp;<span class="op" id="5193983">*</span>&nbsp;<span class="num" id="5193985">0x101</span><span class="op" id="5193990">,</span>&nbsp;<span class="num" id="5193992">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5193999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5194002">//&nbsp;YCbCrModel&nbsp;is&nbsp;the&nbsp;Model&nbsp;for&nbsp;Y&#39;CbCr&nbsp;colors.</span><br>
<span class="lineno">90</span><span class="keyword" id="5194048">var</span>&nbsp;<span class="ident" id="5194052">YCbCrModel</span>&nbsp;<span class="ident" id="5194063"><a href="/gostd/image/color/color.go.html#5187614">Model</a></span>&nbsp;<span class="op" id="5194069">=</span>&nbsp;<span class="ident" id="5194071"><a href="/gostd/image/color/color.go.html#5187737">ModelFunc</a></span><span class="op" id="5194080">(</span><span class="ident" id="5194081"><a href="/gostd/image/color/ycbcr.go.html#5194099">yCbCrModel</a></span><span class="op" id="5194091">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5194094">func</span>&nbsp;<span class="ident" id="5194099">yCbCrModel</span><span class="op" id="5194109">(</span><span class="ident" id="5194110">c</span>&nbsp;<span class="ident" id="5194112"><a href="/gostd/image/color/color.go.html#5185193">Color</a></span><span class="op" id="5194117">)</span>&nbsp;<span class="ident" id="5194119"><a href="/gostd/image/color/color.go.html#5185193">Color</a></span>&nbsp;<span class="op" id="5194125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5194128">if</span>&nbsp;<span class="ident" id="5194131">_</span><span class="op" id="5194132">,</span>&nbsp;<span class="ident" id="5194134">ok</span>&nbsp;<span class="op" id="5194137">:=</span>&nbsp;<span class="ident" id="5194140"><a href="/gostd/image/color/ycbcr.go.html#5194110">c</a></span><span class="op" id="5194141">.</span><span class="op" id="5194142">(</span><span class="ident" id="5194143"><a href="/gostd/image/color/ycbcr.go.html#5193795">YCbCr</a></span><span class="op" id="5194148">)</span><span class="op" id="5194149">;</span>&nbsp;<span class="ident" id="5194151"><a href="/gostd/image/color/ycbcr.go.html#5194134">ok</a></span>&nbsp;<span class="op" id="5194154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5194158">return</span>&nbsp;<span class="ident" id="5194165"><a href="/gostd/image/color/ycbcr.go.html#5194110">c</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5194168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5194171">r</span><span class="op" id="5194172">,</span>&nbsp;<span class="ident" id="5194174">g</span><span class="op" id="5194175">,</span>&nbsp;<span class="ident" id="5194177">b</span><span class="op" id="5194178">,</span>&nbsp;<span class="ident" id="5194180">_</span>&nbsp;<span class="op" id="5194182">:=</span>&nbsp;<span class="ident" id="5194185"><a href="/gostd/image/color/ycbcr.go.html#5194110">c</a></span><span class="op" id="5194186">.</span><span class="ident" id="5194187"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="5194191">(</span><span class="op" id="5194192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5194195">y</span><span class="op" id="5194196">,</span>&nbsp;<span class="ident" id="5194198">u</span><span class="op" id="5194199">,</span>&nbsp;<span class="ident" id="5194201">v</span>&nbsp;<span class="op" id="5194203">:=</span>&nbsp;<span class="ident" id="5194206"><a href="/gostd/image/color/ycbcr.go.html#5191752">RGBToYCbCr</a></span><span class="op" id="5194216">(</span><span class="builtintype" id="5194217">uint8</span><span class="op" id="5194222">(</span><span class="ident" id="5194223"><a href="/gostd/image/color/ycbcr.go.html#5194171">r</a></span><span class="op" id="5194224">&gt;&gt;</span><span class="num" id="5194226">8</span><span class="op" id="5194227">)</span><span class="op" id="5194228">,</span>&nbsp;<span class="builtintype" id="5194230">uint8</span><span class="op" id="5194235">(</span><span class="ident" id="5194236"><a href="/gostd/image/color/ycbcr.go.html#5194174">g</a></span><span class="op" id="5194237">&gt;&gt;</span><span class="num" id="5194239">8</span><span class="op" id="5194240">)</span><span class="op" id="5194241">,</span>&nbsp;<span class="builtintype" id="5194243">uint8</span><span class="op" id="5194248">(</span><span class="ident" id="5194249"><a href="/gostd/image/color/ycbcr.go.html#5194177">b</a></span><span class="op" id="5194250">&gt;&gt;</span><span class="num" id="5194252">8</span><span class="op" id="5194253">)</span><span class="op" id="5194254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5194257">return</span>&nbsp;<span class="ident" id="5194264"><a href="/gostd/image/color/ycbcr.go.html#5193795">YCbCr</a></span><span class="op" id="5194269">{</span><span class="ident" id="5194270"><a href="/gostd/image/color/ycbcr.go.html#5194195">y</a></span><span class="op" id="5194271">,</span>&nbsp;<span class="ident" id="5194273"><a href="/gostd/image/color/ycbcr.go.html#5194198">u</a></span><span class="op" id="5194274">,</span>&nbsp;<span class="ident" id="5194276"><a href="/gostd/image/color/ycbcr.go.html#5194201">v</a></span><span class="op" id="5194277">}</span><br>
<span class="lineno"></span><span class="op" id="5194279">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
