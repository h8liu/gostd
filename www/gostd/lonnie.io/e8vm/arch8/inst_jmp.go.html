<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5054518">package</span>&nbsp;<span class="ident" id="5054526">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5054533">//&nbsp;InstJmp&nbsp;executes&nbsp;jump&nbsp;instruction</span><br>
<span class="lineno"></span><span class="keyword" id="5054570">type</span>&nbsp;<span class="ident" id="5054575">instJmp</span>&nbsp;<span class="keyword" id="5054583">struct</span><span class="op" id="5054589">{</span><span class="op" id="5054590">}</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span><span class="comment" id="5054593">//&nbsp;I&nbsp;executes&nbsp;the&nbsp;jump&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="5054629">//&nbsp;Might&nbsp;return&nbsp;invalid&nbsp;instruction&nbsp;exception.</span><br>
<span class="lineno"></span><span class="keyword" id="5054676">func</span>&nbsp;<span class="op" id="5054681">(</span><span class="ident" id="5054682">i</span>&nbsp;<span class="op" id="5054684">*</span><span class="ident" id="5054685">instJmp</span><span class="op" id="5054692">)</span>&nbsp;<span class="ident" id="5054694">I</span><span class="op" id="5054695">(</span><span class="ident" id="5054696">cpu</span>&nbsp;<span class="op" id="5054700">*</span><span class="ident" id="5054701">cpu</span><span class="op" id="5054704">,</span>&nbsp;<span class="ident" id="5054706">in</span>&nbsp;<span class="builtintype" id="5054709">uint32</span><span class="op" id="5054715">)</span>&nbsp;<span class="op" id="5054717">*</span><span class="ident" id="5054718">Excep</span>&nbsp;<span class="op" id="5054724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054727">op</span>&nbsp;<span class="op" id="5054730">:=</span>&nbsp;<span class="op" id="5054733">(</span><span class="ident" id="5054734">in</span>&nbsp;<span class="op" id="5054737">&gt;&gt;</span>&nbsp;<span class="num" id="5054740">30</span><span class="op" id="5054742">)</span>&nbsp;<span class="op" id="5054744">&amp;</span>&nbsp;<span class="num" id="5054746">0x3</span>&nbsp;<span class="comment" id="5054750">//&nbsp;(32:30]</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054762">off</span>&nbsp;<span class="op" id="5054766">:=</span>&nbsp;<span class="ident" id="5054769">in</span>&nbsp;<span class="op" id="5054772">&amp;</span>&nbsp;<span class="num" id="5054774">0x3fffffff</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054787">pc</span>&nbsp;<span class="op" id="5054790">:=</span>&nbsp;<span class="ident" id="5054793">cpu</span><span class="op" id="5054796">.</span><span class="ident" id="5054797">regs</span><span class="op" id="5054801">[</span><span class="ident" id="5054802">PC</span><span class="op" id="5054804">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054807">to</span>&nbsp;<span class="op" id="5054810">:=</span>&nbsp;<span class="ident" id="5054813">pc</span>&nbsp;<span class="op" id="5054816">+</span>&nbsp;<span class="op" id="5054818">(</span><span class="ident" id="5054819">off</span>&nbsp;<span class="op" id="5054823">&lt;&lt;</span>&nbsp;<span class="num" id="5054826">2</span><span class="op" id="5054827">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054831">switch</span>&nbsp;<span class="ident" id="5054838">op</span>&nbsp;<span class="op" id="5054841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054844">case</span>&nbsp;<span class="num" id="5054849">2</span><span class="op" id="5054850">:</span>&nbsp;<span class="comment" id="5054852">//&nbsp;j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5054859">/*&nbsp;do&nbsp;nothing&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054877">case</span>&nbsp;<span class="num" id="5054882">3</span><span class="op" id="5054883">:</span>&nbsp;<span class="comment" id="5054885">//&nbsp;jal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054894">cpu</span><span class="op" id="5054897">.</span><span class="ident" id="5054898">regs</span><span class="op" id="5054902">[</span><span class="ident" id="5054903">RET</span><span class="op" id="5054906">]</span>&nbsp;<span class="op" id="5054908">=</span>&nbsp;<span class="ident" id="5054910">pc</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054914">default</span><span class="op" id="5054921">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054925">return</span>&nbsp;<span class="ident" id="5054932">errInvalidInst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5054948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054952">cpu</span><span class="op" id="5054955">.</span><span class="ident" id="5054956">regs</span><span class="op" id="5054960">[</span><span class="ident" id="5054961">PC</span><span class="op" id="5054963">]</span>&nbsp;<span class="op" id="5054965">=</span>&nbsp;<span class="ident" id="5054967">to</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054971">return</span>&nbsp;<span class="ident" id="5054978">nil</span><br>
<span class="lineno"></span><span class="op" id="5054982">}</span>
</div>
</body>
</html>
