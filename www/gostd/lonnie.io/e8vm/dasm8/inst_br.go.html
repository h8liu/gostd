<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/dasm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/dasm.go.html">dasm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/line.go.html">line.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/reg.go.html">reg.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3695908">package</span>&nbsp;<span class="ident" id="3695916">dasm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3695923">import</span>&nbsp;<span class="op" id="3695930">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3695933">&#34;fmt&#34;</span><br>
<span class="lineno">5</span><span class="op" id="3695939">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3695942">var</span>&nbsp;<span class="op" id="3695946">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695949">opBrMap</span>&nbsp;<span class="op" id="3695957">=</span>&nbsp;<span class="keyword" id="3695959">map</span><span class="op" id="3695962">[</span><span class="builtintype" id="3695963">uint32</span><span class="op" id="3695969">]</span><span class="builtintype" id="3695970">string</span><span class="op" id="3695976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3695980">32</span><span class="op" id="3695982">:</span>&nbsp;<span class="string" id="3695984">&#34;bne&#34;</span><span class="op" id="3695989">,</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3695993">33</span><span class="op" id="3695995">:</span>&nbsp;<span class="string" id="3695997">&#34;beq&#34;</span><span class="op" id="3696002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696005">}</span><br>
<span class="lineno"></span><span class="op" id="3696007">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3696010">func</span>&nbsp;<span class="ident" id="3696015">instBr</span><span class="op" id="3696021">(</span><span class="ident" id="3696022">addr</span>&nbsp;<span class="builtintype" id="3696027">uint32</span><span class="op" id="3696033">,</span>&nbsp;<span class="ident" id="3696035">in</span>&nbsp;<span class="builtintype" id="3696038">uint32</span><span class="op" id="3696044">)</span>&nbsp;<span class="op" id="3696046">*</span><span class="ident" id="3696047">Line</span>&nbsp;<span class="op" id="3696052">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696055">op</span>&nbsp;<span class="op" id="3696058">:=</span>&nbsp;<span class="op" id="3696061">(</span><span class="ident" id="3696062">in</span>&nbsp;<span class="op" id="3696065">&gt;&gt;</span>&nbsp;<span class="num" id="3696068">24</span><span class="op" id="3696070">)</span>&nbsp;<span class="op" id="3696072">&amp;</span>&nbsp;<span class="num" id="3696074">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696080">src1</span>&nbsp;<span class="op" id="3696085">:=</span>&nbsp;<span class="ident" id="3696088">regStr</span><span class="op" id="3696094">(</span><span class="op" id="3696095">(</span><span class="ident" id="3696096">in</span>&nbsp;<span class="op" id="3696099">&gt;&gt;</span>&nbsp;<span class="num" id="3696102">21</span><span class="op" id="3696104">)</span>&nbsp;<span class="op" id="3696106">&amp;</span>&nbsp;<span class="num" id="3696108">0x7</span><span class="op" id="3696111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696114">src2</span>&nbsp;<span class="op" id="3696119">:=</span>&nbsp;<span class="ident" id="3696122">regStr</span><span class="op" id="3696128">(</span><span class="op" id="3696129">(</span><span class="ident" id="3696130">in</span>&nbsp;<span class="op" id="3696133">&gt;&gt;</span>&nbsp;<span class="num" id="3696136">18</span><span class="op" id="3696138">)</span>&nbsp;<span class="op" id="3696140">&amp;</span>&nbsp;<span class="num" id="3696142">0x7</span><span class="op" id="3696145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696148">im</span>&nbsp;<span class="op" id="3696151">:=</span>&nbsp;<span class="ident" id="3696154">in</span>&nbsp;<span class="op" id="3696157">&amp;</span>&nbsp;<span class="num" id="3696159">0x3ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696168">off</span>&nbsp;<span class="op" id="3696172">:=</span>&nbsp;<span class="builtintype" id="3696175">int32</span><span class="op" id="3696180">(</span><span class="ident" id="3696181">im</span><span class="op" id="3696183">&lt;&lt;</span><span class="num" id="3696185">14</span><span class="op" id="3696187">)</span>&nbsp;<span class="op" id="3696189">&gt;&gt;</span>&nbsp;<span class="num" id="3696192">12</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696197">ret</span>&nbsp;<span class="op" id="3696201">:=</span>&nbsp;<span class="ident" id="3696204">newLine</span><span class="op" id="3696211">(</span><span class="ident" id="3696212">addr</span><span class="op" id="3696216">,</span>&nbsp;<span class="ident" id="3696218">in</span><span class="op" id="3696220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696223">if</span>&nbsp;<span class="ident" id="3696226">opStr</span><span class="op" id="3696231">,</span>&nbsp;<span class="ident" id="3696233">found</span>&nbsp;<span class="op" id="3696239">:=</span>&nbsp;<span class="ident" id="3696242">opBrMap</span><span class="op" id="3696249">[</span><span class="ident" id="3696250">op</span><span class="op" id="3696252">]</span><span class="op" id="3696253">;</span>&nbsp;<span class="ident" id="3696255">found</span>&nbsp;<span class="op" id="3696261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696265">s</span>&nbsp;<span class="op" id="3696267">:=</span>&nbsp;<span class="ident" id="3696270">fmt</span><span class="op" id="3696273">.</span><span class="ident" id="3696274">Sprintf</span><span class="op" id="3696281">(</span><span class="string" id="3696282">&#34;%s&nbsp;%s&nbsp;%s&nbsp;%d&#34;</span><span class="op" id="3696295">,</span>&nbsp;<span class="ident" id="3696297">opStr</span><span class="op" id="3696302">,</span>&nbsp;<span class="ident" id="3696304">src1</span><span class="op" id="3696308">,</span>&nbsp;<span class="ident" id="3696310">src2</span><span class="op" id="3696314">,</span>&nbsp;<span class="ident" id="3696316">off</span><span class="op" id="3696319">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696324">ret</span><span class="op" id="3696327">.</span><span class="ident" id="3696328">Str</span>&nbsp;<span class="op" id="3696332">=</span>&nbsp;<span class="ident" id="3696334">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696338">ret</span><span class="op" id="3696341">.</span><span class="ident" id="3696342">IsJump</span>&nbsp;<span class="op" id="3696349">=</span>&nbsp;<span class="builtintype" id="3696351">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696358">ret</span><span class="op" id="3696361">.</span><span class="ident" id="3696362">To</span>&nbsp;<span class="op" id="3696365">=</span>&nbsp;<span class="ident" id="3696367">addr</span>&nbsp;<span class="op" id="3696372">+</span>&nbsp;<span class="num" id="3696374">4</span>&nbsp;<span class="op" id="3696376">+</span>&nbsp;<span class="builtintype" id="3696378">uint32</span><span class="op" id="3696384">(</span><span class="ident" id="3696385">off</span><span class="op" id="3696388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696395">return</span>&nbsp;<span class="ident" id="3696402">ret</span><br>
<span class="lineno"></span><span class="op" id="3696406">}</span>
</div>
</body>
</html>
