<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6167990">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6168045">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6168099">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6168150">//&nbsp;Package&nbsp;scanner&nbsp;provides&nbsp;a&nbsp;scanner&nbsp;and&nbsp;tokenizer&nbsp;for&nbsp;UTF-8-encoded&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="6168226">//&nbsp;It&nbsp;takes&nbsp;an&nbsp;io.Reader&nbsp;providing&nbsp;the&nbsp;source,&nbsp;which&nbsp;then&nbsp;can&nbsp;be&nbsp;tokenized</span><br>
<span class="lineno"></span><span class="comment" id="6168301">//&nbsp;through&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;the&nbsp;Scan&nbsp;function.&nbsp;&nbsp;For&nbsp;compatibility&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6168373">//&nbsp;existing&nbsp;tools,&nbsp;the&nbsp;NUL&nbsp;character&nbsp;is&nbsp;not&nbsp;allowed.&nbsp;If&nbsp;the&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="6168449">//&nbsp;in&nbsp;the&nbsp;source&nbsp;is&nbsp;a&nbsp;UTF-8&nbsp;encoded&nbsp;byte&nbsp;order&nbsp;mark&nbsp;(BOM),&nbsp;it&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno">10</span><span class="comment" id="6168525">//</span><br>
<span class="lineno"></span><span class="comment" id="6168528">//&nbsp;By&nbsp;default,&nbsp;a&nbsp;Scanner&nbsp;skips&nbsp;white&nbsp;space&nbsp;and&nbsp;Go&nbsp;comments&nbsp;and&nbsp;recognizes&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="6168606">//&nbsp;literals&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;Go&nbsp;language&nbsp;specification.&nbsp;&nbsp;It&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6168674">//&nbsp;customized&nbsp;to&nbsp;recognize&nbsp;only&nbsp;a&nbsp;subset&nbsp;of&nbsp;those&nbsp;literals&nbsp;and&nbsp;to&nbsp;recognize</span><br>
<span class="lineno"></span><span class="comment" id="6168750">//&nbsp;different&nbsp;identifier&nbsp;and&nbsp;white&nbsp;space&nbsp;characters.</span><br>
<span class="lineno">15</span><span class="comment" id="6168802">//</span><br>
<span class="lineno"></span><span class="comment" id="6168805">//&nbsp;Basic&nbsp;usage&nbsp;pattern:</span><br>
<span class="lineno"></span><span class="comment" id="6168829">//</span><br>
<span class="lineno"></span><span class="comment" id="6168832">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;s&nbsp;scanner.Scanner</span><br>
<span class="lineno"></span><span class="comment" id="6168857">//&nbsp;&nbsp;&nbsp;&nbsps.Init(src)</span><br>
<span class="lineno">20</span><span class="comment" id="6168872">//&nbsp;&nbsp;&nbsp;&nbsptok&nbsp;:=&nbsp;s.Scan()</span><br>
<span class="lineno"></span><span class="comment" id="6168891">//&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;tok&nbsp;!=&nbsp;scanner.EOF&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6168919">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;do&nbsp;something&nbsp;with&nbsp;tok</span><br>
<span class="lineno"></span><span class="comment" id="6168948">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsptok&nbsp;=&nbsp;s.Scan()</span><br>
<span class="lineno"></span><span class="comment" id="6168967">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">25</span><span class="comment" id="6168972">//</span><br>
<span class="lineno"></span><span class="keyword" id="6168975">package</span>&nbsp;<span class="ident" id="6168983">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6168992">import</span>&nbsp;<span class="op" id="6168999">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6169002">&#34;bytes&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6169011">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6169018">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6169024">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6169030">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6169041">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">35</span><span class="op" id="6169056">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6169059">//&nbsp;A&nbsp;source&nbsp;position&nbsp;is&nbsp;represented&nbsp;by&nbsp;a&nbsp;Position&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6169116">//&nbsp;A&nbsp;position&nbsp;is&nbsp;valid&nbsp;if&nbsp;Line&nbsp;&gt;&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="6169152">type</span>&nbsp;<span class="ident" id="6169157">Position</span>&nbsp;<span class="keyword" id="6169166">struct</span>&nbsp;<span class="op" id="6169173">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6169176">Filename</span>&nbsp;<span class="builtintype" id="6169185">string</span>&nbsp;<span class="comment" id="6169192">//&nbsp;filename,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6169213">Offset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6169222">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6169229">//&nbsp;byte&nbsp;offset,&nbsp;starting&nbsp;at&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6169260">Line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6169269">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6169276">//&nbsp;line&nbsp;number,&nbsp;starting&nbsp;at&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6169307">Column</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6169316">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6169323">//&nbsp;column&nbsp;number,&nbsp;starting&nbsp;at&nbsp;1&nbsp;(character&nbsp;count&nbsp;per&nbsp;line)</span><br>
<span class="lineno"></span><span class="op" id="6169382">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="6169385">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;position&nbsp;is&nbsp;valid.</span><br>
<span class="lineno"></span><span class="keyword" id="6169435">func</span>&nbsp;<span class="op" id="6169440">(</span><span class="ident" id="6169441">pos</span>&nbsp;<span class="op" id="6169445">*</span><span class="ident" id="6169446"><a href="/text/scanner/scanner.go.html#6169157">Position</a></span><span class="op" id="6169454">)</span>&nbsp;<span class="ident" id="6169456">IsValid</span><span class="op" id="6169463">(</span><span class="op" id="6169464">)</span>&nbsp;<span class="builtintype" id="6169466">bool</span>&nbsp;<span class="op" id="6169471">{</span>&nbsp;<span class="keyword" id="6169473">return</span>&nbsp;<span class="ident" id="6169480"><a href="/text/scanner/scanner.go.html#6169441">pos</a></span><span class="op" id="6169483">.</span><span class="ident" id="6169484">Line</span>&nbsp;<span class="op" id="6169489">&gt;</span>&nbsp;<span class="num" id="6169491">0</span>&nbsp;<span class="op" id="6169493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6169496">func</span>&nbsp;<span class="op" id="6169501">(</span><span class="ident" id="6169502">pos</span>&nbsp;<span class="ident" id="6169506"><a href="/text/scanner/scanner.go.html#6169157">Position</a></span><span class="op" id="6169514">)</span>&nbsp;<span class="ident" id="6169516">String</span><span class="op" id="6169522">(</span><span class="op" id="6169523">)</span>&nbsp;<span class="builtintype" id="6169525">string</span>&nbsp;<span class="op" id="6169532">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6169535">s</span>&nbsp;<span class="op" id="6169537">:=</span>&nbsp;<span class="ident" id="6169540"><a href="/text/scanner/scanner.go.html#6169502">pos</a></span><span class="op" id="6169543">.</span><span class="ident" id="6169544">Filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6169554">if</span>&nbsp;<span class="ident" id="6169557"><a href="/text/scanner/scanner.go.html#6169502">pos</a></span><span class="op" id="6169560">.</span><span class="ident" id="6169561">IsValid</span><span class="op" id="6169568">(</span><span class="op" id="6169569">)</span>&nbsp;<span class="op" id="6169571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6169575">if</span>&nbsp;<span class="ident" id="6169578"><a href="/text/scanner/scanner.go.html#6169535">s</a></span>&nbsp;<span class="op" id="6169580">!=</span>&nbsp;<span class="string" id="6169583">&#34;&#34;</span>&nbsp;<span class="op" id="6169586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6169591"><a href="/text/scanner/scanner.go.html#6169535">s</a></span>&nbsp;<span class="op" id="6169593">+=</span>&nbsp;<span class="string" id="6169596">&#34;:&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6169602">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6169606"><a href="/text/scanner/scanner.go.html#6169535">s</a></span>&nbsp;<span class="op" id="6169608">+=</span>&nbsp;<span class="ident" id="6169611"><a href="/text/scanner/scanner.go.html#6169011">fmt</a></span><span class="op" id="6169614">.</span><span class="ident" id="6169615">Sprintf</span><span class="op" id="6169622">(</span><span class="string" id="6169623">&#34;%d:%d&#34;</span><span class="op" id="6169630">,</span>&nbsp;<span class="ident" id="6169632"><a href="/text/scanner/scanner.go.html#6169502">pos</a></span><span class="op" id="6169635">.</span><span class="ident" id="6169636">Line</span><span class="op" id="6169640">,</span>&nbsp;<span class="ident" id="6169642"><a href="/text/scanner/scanner.go.html#6169502">pos</a></span><span class="op" id="6169645">.</span><span class="ident" id="6169646">Column</span><span class="op" id="6169652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6169655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6169658">if</span>&nbsp;<span class="ident" id="6169661"><a href="/text/scanner/scanner.go.html#6169535">s</a></span>&nbsp;<span class="op" id="6169663">==</span>&nbsp;<span class="string" id="6169666">&#34;&#34;</span>&nbsp;<span class="op" id="6169669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6169673"><a href="/text/scanner/scanner.go.html#6169535">s</a></span>&nbsp;<span class="op" id="6169675">=</span>&nbsp;<span class="string" id="6169677">&#34;???&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6169684">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6169687">return</span>&nbsp;<span class="ident" id="6169694"><a href="/text/scanner/scanner.go.html#6169535">s</a></span><br>
<span class="lineno"></span><span class="op" id="6169696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6169699">//&nbsp;Predefined&nbsp;mode&nbsp;bits&nbsp;to&nbsp;control&nbsp;recognition&nbsp;of&nbsp;tokens.&nbsp;For&nbsp;instance,</span><br>
<span class="lineno"></span><span class="comment" id="6169771">//&nbsp;to&nbsp;configure&nbsp;a&nbsp;Scanner&nbsp;such&nbsp;that&nbsp;it&nbsp;only&nbsp;recognizes&nbsp;(Go)&nbsp;identifiers,</span><br>
<span class="lineno">65</span><span class="comment" id="6169844">//&nbsp;integers,&nbsp;and&nbsp;skips&nbsp;comments,&nbsp;set&nbsp;the&nbsp;Scanner&#39;s&nbsp;Mode&nbsp;field&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="6169910">//</span><br>
<span class="lineno"></span><span class="comment" id="6169913">//&nbsp;&nbsp;&nbsp;&nbspScanIdents&nbsp;|&nbsp;ScanInts&nbsp;|&nbsp;SkipComments</span><br>
<span class="lineno"></span><span class="comment" id="6169953">//</span><br>
<span class="lineno"></span><span class="comment" id="6169956">//&nbsp;With&nbsp;the&nbsp;exceptions&nbsp;of&nbsp;comments,&nbsp;which&nbsp;are&nbsp;skipped&nbsp;if&nbsp;SkipComments&nbsp;is</span><br>
<span class="lineno">70</span><span class="comment" id="6170029">//&nbsp;set,&nbsp;unrecognized&nbsp;tokens&nbsp;are&nbsp;not&nbsp;ignored.&nbsp;Instead,&nbsp;the&nbsp;scanner&nbsp;simply</span><br>
<span class="lineno"></span><span class="comment" id="6170102">//&nbsp;returns&nbsp;the&nbsp;respective&nbsp;individual&nbsp;characters&nbsp;(or&nbsp;possibly&nbsp;sub-tokens).</span><br>
<span class="lineno"></span><span class="comment" id="6170176">//&nbsp;For&nbsp;instance,&nbsp;if&nbsp;the&nbsp;mode&nbsp;is&nbsp;ScanIdents&nbsp;(not&nbsp;ScanStrings),&nbsp;the&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="6170249">//&nbsp;&#34;foo&#34;&nbsp;is&nbsp;scanned&nbsp;as&nbsp;the&nbsp;token&nbsp;sequence&nbsp;&#39;&#34;&#39;&nbsp;Ident&nbsp;&#39;&#34;&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6170306">//</span><br>
<span class="lineno">75</span><span class="keyword" id="6170309">const</span>&nbsp;<span class="op" id="6170315">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170318">ScanIdents</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170333">=</span>&nbsp;<span class="num" id="6170335">1</span>&nbsp;<span class="op" id="6170337">&lt;&lt;</span>&nbsp;<span class="op" id="6170340">-</span><span class="ident" id="6170341"><a href="/text/scanner/scanner.go.html#6170864">Ident</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170348">ScanInts</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170363">=</span>&nbsp;<span class="num" id="6170365">1</span>&nbsp;<span class="op" id="6170367">&lt;&lt;</span>&nbsp;<span class="op" id="6170370">-</span><span class="ident" id="6170371"><a href="/text/scanner/scanner.go.html#6170871">Int</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170376">ScanFloats</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170391">=</span>&nbsp;<span class="num" id="6170393">1</span>&nbsp;<span class="op" id="6170395">&lt;&lt;</span>&nbsp;<span class="op" id="6170398">-</span><span class="ident" id="6170399"><a href="/text/scanner/scanner.go.html#6170876">Float</a></span>&nbsp;<span class="comment" id="6170405">//&nbsp;includes&nbsp;Ints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170423">ScanChars</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170438">=</span>&nbsp;<span class="num" id="6170440">1</span>&nbsp;<span class="op" id="6170442">&lt;&lt;</span>&nbsp;<span class="op" id="6170445">-</span><span class="ident" id="6170446"><a href="/text/scanner/scanner.go.html#6170883">Char</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170452">ScanStrings</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170467">=</span>&nbsp;<span class="num" id="6170469">1</span>&nbsp;<span class="op" id="6170471">&lt;&lt;</span>&nbsp;<span class="op" id="6170474">-</span><span class="ident" id="6170475"><a href="/text/scanner/scanner.go.html#6170889">String</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170483">ScanRawStrings</span>&nbsp;<span class="op" id="6170498">=</span>&nbsp;<span class="num" id="6170500">1</span>&nbsp;<span class="op" id="6170502">&lt;&lt;</span>&nbsp;<span class="op" id="6170505">-</span><span class="ident" id="6170506"><a href="/text/scanner/scanner.go.html#6170897">RawString</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170517">ScanComments</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6170532">=</span>&nbsp;<span class="num" id="6170534">1</span>&nbsp;<span class="op" id="6170536">&lt;&lt;</span>&nbsp;<span class="op" id="6170539">-</span><span class="ident" id="6170540"><a href="/text/scanner/scanner.go.html#6170908">Comment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170549">SkipComments</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6170564">=</span>&nbsp;<span class="num" id="6170566">1</span>&nbsp;<span class="op" id="6170568">&lt;&lt;</span>&nbsp;<span class="op" id="6170571">-</span><span class="ident" id="6170572"><a href="/text/scanner/scanner.go.html#6170917">skipComment</a></span>&nbsp;<span class="comment" id="6170584">//&nbsp;if&nbsp;set&nbsp;with&nbsp;ScanComments,&nbsp;comments&nbsp;become&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170642">GoTokens</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170657">=</span>&nbsp;<span class="ident" id="6170659"><a href="/text/scanner/scanner.go.html#6170318">ScanIdents</a></span>&nbsp;<span class="op" id="6170670">|</span>&nbsp;<span class="ident" id="6170672"><a href="/text/scanner/scanner.go.html#6170376">ScanFloats</a></span>&nbsp;<span class="op" id="6170683">|</span>&nbsp;<span class="ident" id="6170685"><a href="/text/scanner/scanner.go.html#6170423">ScanChars</a></span>&nbsp;<span class="op" id="6170695">|</span>&nbsp;<span class="ident" id="6170697"><a href="/text/scanner/scanner.go.html#6170452">ScanStrings</a></span>&nbsp;<span class="op" id="6170709">|</span>&nbsp;<span class="ident" id="6170711"><a href="/text/scanner/scanner.go.html#6170483">ScanRawStrings</a></span>&nbsp;<span class="op" id="6170726">|</span>&nbsp;<span class="ident" id="6170728"><a href="/text/scanner/scanner.go.html#6170517">ScanComments</a></span>&nbsp;<span class="op" id="6170741">|</span>&nbsp;<span class="ident" id="6170743"><a href="/text/scanner/scanner.go.html#6170549">SkipComments</a></span><br>
<span class="lineno">85</span><span class="op" id="6170756">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6170759">//&nbsp;The&nbsp;result&nbsp;of&nbsp;Scan&nbsp;is&nbsp;one&nbsp;of&nbsp;the&nbsp;following&nbsp;tokens&nbsp;or&nbsp;a&nbsp;Unicode&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="6170836">const</span>&nbsp;<span class="op" id="6170842">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170845">EOF</span>&nbsp;<span class="op" id="6170849">=</span>&nbsp;<span class="op" id="6170851">-</span><span class="op" id="6170852">(</span><span class="ident" id="6170853">iota</span>&nbsp;<span class="op" id="6170858">+</span>&nbsp;<span class="num" id="6170860">1</span><span class="op" id="6170861">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170864">Ident</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170871">Int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170876">Float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170883">Char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170889">String</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170897">RawString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170908">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170917">skipComment</span><br>
<span class="lineno"></span><span class="op" id="6170929">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="6170932">var</span>&nbsp;<span class="ident" id="6170936">tokenString</span>&nbsp;<span class="op" id="6170948">=</span>&nbsp;<span class="keyword" id="6170950">map</span><span class="op" id="6170953">[</span><span class="builtintype" id="6170954">rune</span><span class="op" id="6170958">]</span><span class="builtintype" id="6170959">string</span><span class="op" id="6170965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170968"><a href="/text/scanner/scanner.go.html#6170845">EOF</a></span><span class="op" id="6170971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6170979">&#34;EOF&#34;</span><span class="op" id="6170984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6170987"><a href="/text/scanner/scanner.go.html#6170864">Ident</a></span><span class="op" id="6170992">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6170998">&#34;Ident&#34;</span><span class="op" id="6171005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171008"><a href="/text/scanner/scanner.go.html#6170871">Int</a></span><span class="op" id="6171011">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6171019">&#34;Int&#34;</span><span class="op" id="6171024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171027"><a href="/text/scanner/scanner.go.html#6170876">Float</a></span><span class="op" id="6171032">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6171038">&#34;Float&#34;</span><span class="op" id="6171045">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171048"><a href="/text/scanner/scanner.go.html#6170883">Char</a></span><span class="op" id="6171052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6171059">&#34;Char&#34;</span><span class="op" id="6171065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171068"><a href="/text/scanner/scanner.go.html#6170889">String</a></span><span class="op" id="6171074">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6171079">&#34;String&#34;</span><span class="op" id="6171087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171090"><a href="/text/scanner/scanner.go.html#6170897">RawString</a></span><span class="op" id="6171099">:</span>&nbsp;<span class="string" id="6171101">&#34;RawString&#34;</span><span class="op" id="6171112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171115"><a href="/text/scanner/scanner.go.html#6170908">Comment</a></span><span class="op" id="6171122">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6171126">&#34;Comment&#34;</span><span class="op" id="6171135">,</span><br>
<span class="lineno"></span><span class="op" id="6171137">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="6171140">//&nbsp;TokenString&nbsp;returns&nbsp;a&nbsp;printable&nbsp;string&nbsp;for&nbsp;a&nbsp;token&nbsp;or&nbsp;Unicode&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="6171216">func</span>&nbsp;<span class="ident" id="6171221">TokenString</span><span class="op" id="6171232">(</span><span class="ident" id="6171233">tok</span>&nbsp;<span class="builtintype" id="6171237">rune</span><span class="op" id="6171241">)</span>&nbsp;<span class="builtintype" id="6171243">string</span>&nbsp;<span class="op" id="6171250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6171253">if</span>&nbsp;<span class="ident" id="6171256">s</span><span class="op" id="6171257">,</span>&nbsp;<span class="ident" id="6171259">found</span>&nbsp;<span class="op" id="6171265">:=</span>&nbsp;<span class="ident" id="6171268"><a href="/text/scanner/scanner.go.html#6170936">tokenString</a></span><span class="op" id="6171279">[</span><span class="ident" id="6171280"><a href="/text/scanner/scanner.go.html#6171233">tok</a></span><span class="op" id="6171283">]</span><span class="op" id="6171284">;</span>&nbsp;<span class="ident" id="6171286"><a href="/text/scanner/scanner.go.html#6171259">found</a></span>&nbsp;<span class="op" id="6171292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6171296">return</span>&nbsp;<span class="ident" id="6171303"><a href="/text/scanner/scanner.go.html#6171256">s</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6171306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6171309">return</span>&nbsp;<span class="ident" id="6171316"><a href="/text/scanner/scanner.go.html#6169011">fmt</a></span><span class="op" id="6171319">.</span><span class="ident" id="6171320">Sprintf</span><span class="op" id="6171327">(</span><span class="string" id="6171328">&#34;%q&#34;</span><span class="op" id="6171332">,</span>&nbsp;<span class="builtintype" id="6171334">string</span><span class="op" id="6171340">(</span><span class="ident" id="6171341"><a href="/text/scanner/scanner.go.html#6171233">tok</a></span><span class="op" id="6171344">)</span><span class="op" id="6171345">)</span><br>
<span class="lineno"></span><span class="op" id="6171347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6171350">//&nbsp;GoWhitespace&nbsp;is&nbsp;the&nbsp;default&nbsp;value&nbsp;for&nbsp;the&nbsp;Scanner&#39;s&nbsp;Whitespace&nbsp;field.</span><br>
<span class="lineno">120</span><span class="comment" id="6171423">//&nbsp;Its&nbsp;value&nbsp;selects&nbsp;Go&#39;s&nbsp;white&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span><span class="keyword" id="6171473">const</span>&nbsp;<span class="ident" id="6171479">GoWhitespace</span>&nbsp;<span class="op" id="6171492">=</span>&nbsp;<span class="num" id="6171494">1</span><span class="op" id="6171495">&lt;&lt;</span><span class="string" id="6171497">&#39;\t&#39;</span>&nbsp;<span class="op" id="6171502">|</span>&nbsp;<span class="num" id="6171504">1</span><span class="op" id="6171505">&lt;&lt;</span><span class="string" id="6171507">&#39;\n&#39;</span>&nbsp;<span class="op" id="6171512">|</span>&nbsp;<span class="num" id="6171514">1</span><span class="op" id="6171515">&lt;&lt;</span><span class="string" id="6171517">&#39;\r&#39;</span>&nbsp;<span class="op" id="6171522">|</span>&nbsp;<span class="num" id="6171524">1</span><span class="op" id="6171525">&lt;&lt;</span><span class="string" id="6171527">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6171532">const</span>&nbsp;<span class="ident" id="6171538">bufLen</span>&nbsp;<span class="op" id="6171545">=</span>&nbsp;<span class="num" id="6171547">1024</span>&nbsp;<span class="comment" id="6171552">//&nbsp;at&nbsp;least&nbsp;utf8.UTFMax</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="6171577">//&nbsp;A&nbsp;Scanner&nbsp;implements&nbsp;reading&nbsp;of&nbsp;Unicode&nbsp;characters&nbsp;and&nbsp;tokens&nbsp;from&nbsp;an&nbsp;io.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="6171661">type</span>&nbsp;<span class="ident" id="6171666">Scanner</span>&nbsp;<span class="keyword" id="6171674">struct</span>&nbsp;<span class="op" id="6171681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6171684">//&nbsp;Input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171694">src</span>&nbsp;<span class="ident" id="6171698"><a href="/text/scanner/scanner.go.html#6169018">io</a></span><span class="op" id="6171700">.</span><span class="ident" id="6171701">Reader</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6171710">//&nbsp;Source&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171728">srcBuf</span>&nbsp;<span class="op" id="6171735">[</span><span class="ident" id="6171736"><a href="/text/scanner/scanner.go.html#6171538">bufLen</a></span>&nbsp;<span class="op" id="6171743">+</span>&nbsp;<span class="num" id="6171745">1</span><span class="op" id="6171746">]</span><span class="builtintype" id="6171747">byte</span>&nbsp;<span class="comment" id="6171752">//&nbsp;+1&nbsp;for&nbsp;sentinel&nbsp;for&nbsp;common&nbsp;case&nbsp;of&nbsp;s.next()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171800">srcPos</span>&nbsp;<span class="builtintype" id="6171807">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6171824">//&nbsp;reading&nbsp;position&nbsp;(srcBuf&nbsp;index)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171860">srcEnd</span>&nbsp;<span class="builtintype" id="6171867">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6171884">//&nbsp;source&nbsp;end&nbsp;(srcBuf&nbsp;index)</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6171915">//&nbsp;Source&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171935">srcBufOffset</span>&nbsp;<span class="builtintype" id="6171948">int</span>&nbsp;<span class="comment" id="6171952">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;srcBuf[0]&nbsp;in&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6171991">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6172004">int</span>&nbsp;<span class="comment" id="6172008">//&nbsp;line&nbsp;count</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6172023">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6172036">int</span>&nbsp;<span class="comment" id="6172040">//&nbsp;character&nbsp;count</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6172060">lastLineLen</span>&nbsp;&nbsp;<span class="builtintype" id="6172073">int</span>&nbsp;<span class="comment" id="6172077">//&nbsp;length&nbsp;of&nbsp;last&nbsp;line&nbsp;in&nbsp;characters&nbsp;(for&nbsp;correct&nbsp;column&nbsp;reporting)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6172146">lastCharLen</span>&nbsp;&nbsp;<span class="builtintype" id="6172159">int</span>&nbsp;<span class="comment" id="6172163">//&nbsp;length&nbsp;of&nbsp;last&nbsp;character&nbsp;in&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6172202">//&nbsp;Token&nbsp;text&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6172224">//&nbsp;Typically,&nbsp;token&nbsp;text&nbsp;is&nbsp;stored&nbsp;completely&nbsp;in&nbsp;srcBuf,&nbsp;but&nbsp;in&nbsp;general</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6172297">//&nbsp;the&nbsp;token&nbsp;text&#39;s&nbsp;head&nbsp;may&nbsp;be&nbsp;buffered&nbsp;in&nbsp;tokBuf&nbsp;while&nbsp;the&nbsp;token&nbsp;text&#39;s</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6172372">//&nbsp;tail&nbsp;is&nbsp;stored&nbsp;in&nbsp;srcBuf.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6172402">tokBuf</span>&nbsp;<span class="ident" id="6172409"><a href="/text/scanner/scanner.go.html#6169002">bytes</a></span><span class="op" id="6172414">.</span><span class="ident" id="6172415">Buffer</span>&nbsp;<span class="comment" id="6172422">//&nbsp;token&nbsp;text&nbsp;head&nbsp;that&nbsp;is&nbsp;not&nbsp;in&nbsp;srcBuf&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6172472">tokPos</span>&nbsp;<span class="builtintype" id="6172479">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6172492">//&nbsp;token&nbsp;text&nbsp;tail&nbsp;position&nbsp;(srcBuf&nbsp;index);&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6172551">tokEnd</span>&nbsp;<span class="builtintype" id="6172558">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6172571">//&nbsp;token&nbsp;text&nbsp;tail&nbsp;end&nbsp;(srcBuf&nbsp;index)</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6172611">//&nbsp;One&nbsp;character&nbsp;look-ahead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6172640">ch</span>&nbsp;<span class="builtintype" id="6172643">rune</span>&nbsp;<span class="comment" id="6172648">//&nbsp;character&nbsp;before&nbsp;current&nbsp;srcPos</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6172685">//&nbsp;Error&nbsp;is&nbsp;called&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered.&nbsp;If&nbsp;no&nbsp;Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6172745">//&nbsp;function&nbsp;is&nbsp;set,&nbsp;the&nbsp;error&nbsp;is&nbsp;reported&nbsp;to&nbsp;os.Stderr.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6172802">Error</span>&nbsp;<span class="keyword" id="6172808">func</span><span class="op" id="6172812">(</span><span class="ident" id="6172813">s</span>&nbsp;<span class="op" id="6172815">*</span><span class="ident" id="6172816"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6172823">,</span>&nbsp;<span class="ident" id="6172825">msg</span>&nbsp;<span class="builtintype" id="6172829">string</span><span class="op" id="6172835">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6172839">//&nbsp;ErrorCount&nbsp;is&nbsp;incremented&nbsp;by&nbsp;one&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6172904">ErrorCount</span>&nbsp;<span class="builtintype" id="6172915">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6172921">//&nbsp;The&nbsp;Mode&nbsp;field&nbsp;controls&nbsp;which&nbsp;tokens&nbsp;are&nbsp;recognized.&nbsp;For&nbsp;instance,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6172992">//&nbsp;to&nbsp;recognize&nbsp;Ints,&nbsp;set&nbsp;the&nbsp;ScanInts&nbsp;bit&nbsp;in&nbsp;Mode.&nbsp;The&nbsp;field&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173062">//&nbsp;changed&nbsp;at&nbsp;any&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6173087">Mode</span>&nbsp;<span class="builtintype" id="6173092">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173099">//&nbsp;The&nbsp;Whitespace&nbsp;field&nbsp;controls&nbsp;which&nbsp;characters&nbsp;are&nbsp;recognized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173165">//&nbsp;as&nbsp;white&nbsp;space.&nbsp;To&nbsp;recognize&nbsp;a&nbsp;character&nbsp;ch&nbsp;&lt;=&nbsp;&#39;&nbsp;&#39;&nbsp;as&nbsp;white&nbsp;space,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173236">//&nbsp;set&nbsp;the&nbsp;ch&#39;th&nbsp;bit&nbsp;in&nbsp;Whitespace&nbsp;(the&nbsp;Scanner&#39;s&nbsp;behavior&nbsp;is&nbsp;undefined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173309">//&nbsp;for&nbsp;values&nbsp;ch&nbsp;&gt;&nbsp;&#39;&nbsp;&#39;).&nbsp;The&nbsp;field&nbsp;may&nbsp;be&nbsp;changed&nbsp;at&nbsp;any&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6173373">Whitespace</span>&nbsp;<span class="ident" id="6173384">uint64</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173393">//&nbsp;IsIdentRune&nbsp;is&nbsp;a&nbsp;predicate&nbsp;controlling&nbsp;the&nbsp;characters&nbsp;accepted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173460">//&nbsp;as&nbsp;the&nbsp;ith&nbsp;rune&nbsp;in&nbsp;an&nbsp;identifier.&nbsp;The&nbsp;set&nbsp;of&nbsp;valid&nbsp;characters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173526">//&nbsp;must&nbsp;not&nbsp;intersect&nbsp;with&nbsp;the&nbsp;set&nbsp;of&nbsp;white&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173589">//&nbsp;If&nbsp;no&nbsp;IsIdentRune&nbsp;function&nbsp;is&nbsp;set,&nbsp;regular&nbsp;Go&nbsp;identifiers&nbsp;are</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173655">//&nbsp;accepted&nbsp;instead.&nbsp;The&nbsp;field&nbsp;may&nbsp;be&nbsp;changed&nbsp;at&nbsp;any&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6173715">IsIdentRune</span>&nbsp;<span class="keyword" id="6173727">func</span><span class="op" id="6173731">(</span><span class="ident" id="6173732">ch</span>&nbsp;<span class="builtintype" id="6173735">rune</span><span class="op" id="6173739">,</span>&nbsp;<span class="ident" id="6173741">i</span>&nbsp;<span class="builtintype" id="6173743">int</span><span class="op" id="6173746">)</span>&nbsp;<span class="builtintype" id="6173748">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173755">//&nbsp;Start&nbsp;position&nbsp;of&nbsp;most&nbsp;recently&nbsp;scanned&nbsp;token;&nbsp;set&nbsp;by&nbsp;Scan.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173819">//&nbsp;Calling&nbsp;Init&nbsp;or&nbsp;Next&nbsp;invalidates&nbsp;the&nbsp;position&nbsp;(Line&nbsp;==&nbsp;0).</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173882">//&nbsp;The&nbsp;Filename&nbsp;field&nbsp;is&nbsp;always&nbsp;left&nbsp;untouched&nbsp;by&nbsp;the&nbsp;Scanner.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6173946">//&nbsp;If&nbsp;an&nbsp;error&nbsp;is&nbsp;reported&nbsp;(via&nbsp;Error)&nbsp;and&nbsp;Position&nbsp;is&nbsp;invalid,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6174011">//&nbsp;the&nbsp;scanner&nbsp;is&nbsp;not&nbsp;inside&nbsp;a&nbsp;token.&nbsp;Call&nbsp;Pos&nbsp;to&nbsp;obtain&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6174078">//&nbsp;position&nbsp;in&nbsp;that&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174105"><a href="/text/scanner/scanner.go.html#6169157">Position</a></span><br>
<span class="lineno">185</span><span class="op" id="6174114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6174117">//&nbsp;Init&nbsp;initializes&nbsp;a&nbsp;Scanner&nbsp;with&nbsp;a&nbsp;new&nbsp;source&nbsp;and&nbsp;returns&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="6174180">//&nbsp;Error&nbsp;is&nbsp;set&nbsp;to&nbsp;nil,&nbsp;ErrorCount&nbsp;is&nbsp;set&nbsp;to&nbsp;0,&nbsp;Mode&nbsp;is&nbsp;set&nbsp;to&nbsp;GoTokens,</span><br>
<span class="lineno"></span><span class="comment" id="6174253">//&nbsp;and&nbsp;Whitespace&nbsp;is&nbsp;set&nbsp;to&nbsp;GoWhitespace.</span><br>
<span class="lineno">190</span><span class="keyword" id="6174295">func</span>&nbsp;<span class="op" id="6174300">(</span><span class="ident" id="6174301">s</span>&nbsp;<span class="op" id="6174303">*</span><span class="ident" id="6174304"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6174311">)</span>&nbsp;<span class="ident" id="6174313">Init</span><span class="op" id="6174317">(</span><span class="ident" id="6174318">src</span>&nbsp;<span class="ident" id="6174322"><a href="/text/scanner/scanner.go.html#6169018">io</a></span><span class="op" id="6174324">.</span><span class="ident" id="6174325">Reader</span><span class="op" id="6174331">)</span>&nbsp;<span class="op" id="6174333">*</span><span class="ident" id="6174334"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span>&nbsp;<span class="op" id="6174342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174345"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174346">.</span><span class="ident" id="6174347">src</span>&nbsp;<span class="op" id="6174351">=</span>&nbsp;<span class="ident" id="6174353"><a href="/text/scanner/scanner.go.html#6174318">src</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6174359">//&nbsp;initialize&nbsp;source&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6174388">//&nbsp;(the&nbsp;first&nbsp;call&nbsp;to&nbsp;next()&nbsp;will&nbsp;fill&nbsp;it&nbsp;by&nbsp;calling&nbsp;src.Read)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174452"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174453">.</span><span class="ident" id="6174454">srcBuf</span><span class="op" id="6174460">[</span><span class="num" id="6174461">0</span><span class="op" id="6174462">]</span>&nbsp;<span class="op" id="6174464">=</span>&nbsp;<span class="ident" id="6174466"><a href="/text/scanner/scanner.go.html#6169041">utf8</a></span><span class="op" id="6174470">.</span><span class="ident" id="6174471">RuneSelf</span>&nbsp;<span class="comment" id="6174480">//&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174493"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174494">.</span><span class="ident" id="6174495">srcPos</span>&nbsp;<span class="op" id="6174502">=</span>&nbsp;<span class="num" id="6174504">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174507"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174508">.</span><span class="ident" id="6174509">srcEnd</span>&nbsp;<span class="op" id="6174516">=</span>&nbsp;<span class="num" id="6174518">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6174522">//&nbsp;initialize&nbsp;source&nbsp;position</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174553"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174554">.</span><span class="ident" id="6174555">srcBufOffset</span>&nbsp;<span class="op" id="6174568">=</span>&nbsp;<span class="num" id="6174570">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174573"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174574">.</span><span class="ident" id="6174575">line</span>&nbsp;<span class="op" id="6174580">=</span>&nbsp;<span class="num" id="6174582">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174585"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174586">.</span><span class="ident" id="6174587">column</span>&nbsp;<span class="op" id="6174594">=</span>&nbsp;<span class="num" id="6174596">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174599"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174600">.</span><span class="ident" id="6174601">lastLineLen</span>&nbsp;<span class="op" id="6174613">=</span>&nbsp;<span class="num" id="6174615">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174618"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174619">.</span><span class="ident" id="6174620">lastCharLen</span>&nbsp;<span class="op" id="6174632">=</span>&nbsp;<span class="num" id="6174634">0</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6174638">//&nbsp;initialize&nbsp;token&nbsp;text&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6174671">//&nbsp;(required&nbsp;for&nbsp;first&nbsp;call&nbsp;to&nbsp;next()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174712"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174713">.</span><span class="ident" id="6174714">tokPos</span>&nbsp;<span class="op" id="6174721">=</span>&nbsp;<span class="op" id="6174723">-</span><span class="num" id="6174724">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6174728">//&nbsp;initialize&nbsp;one&nbsp;character&nbsp;look-ahead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174768"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174769">.</span><span class="ident" id="6174770">ch</span>&nbsp;<span class="op" id="6174773">=</span>&nbsp;<span class="op" id="6174775">-</span><span class="num" id="6174776">1</span>&nbsp;<span class="comment" id="6174778">//&nbsp;no&nbsp;char&nbsp;read&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6174800">//&nbsp;initialize&nbsp;public&nbsp;fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174829"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174830">.</span><span class="ident" id="6174831">Error</span>&nbsp;<span class="op" id="6174837">=</span>&nbsp;<span class="ident" id="6174839">nil</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174844"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174845">.</span><span class="ident" id="6174846">ErrorCount</span>&nbsp;<span class="op" id="6174857">=</span>&nbsp;<span class="num" id="6174859">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174862"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174863">.</span><span class="ident" id="6174864">Mode</span>&nbsp;<span class="op" id="6174869">=</span>&nbsp;<span class="ident" id="6174871"><a href="/text/scanner/scanner.go.html#6170642">GoTokens</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174881"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174882">.</span><span class="ident" id="6174883">Whitespace</span>&nbsp;<span class="op" id="6174894">=</span>&nbsp;<span class="ident" id="6174896"><a href="/text/scanner/scanner.go.html#6171479">GoWhitespace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174910"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><span class="op" id="6174911">.</span><span class="ident" id="6174912">Line</span>&nbsp;<span class="op" id="6174917">=</span>&nbsp;<span class="num" id="6174919">0</span>&nbsp;<span class="comment" id="6174921">//&nbsp;invalidate&nbsp;token&nbsp;position</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6174952">return</span>&nbsp;<span class="ident" id="6174959"><a href="/text/scanner/scanner.go.html#6174301">s</a></span><br>
<span class="lineno"></span><span class="op" id="6174961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6174964">//&nbsp;next&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;character.&nbsp;It&nbsp;is&nbsp;designed&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6175038">//&nbsp;that&nbsp;only&nbsp;a&nbsp;minimal&nbsp;amount&nbsp;of&nbsp;work&nbsp;needs&nbsp;to&nbsp;be&nbsp;done&nbsp;in&nbsp;the&nbsp;common&nbsp;ASCII</span><br>
<span class="lineno">225</span><span class="comment" id="6175113">//&nbsp;case&nbsp;(one&nbsp;test&nbsp;to&nbsp;check&nbsp;for&nbsp;both&nbsp;ASCII&nbsp;and&nbsp;end-of-buffer,&nbsp;and&nbsp;one&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="6175187">//&nbsp;to&nbsp;check&nbsp;for&nbsp;newlines).</span><br>
<span class="lineno"></span><span class="keyword" id="6175214">func</span>&nbsp;<span class="op" id="6175219">(</span><span class="ident" id="6175220">s</span>&nbsp;<span class="op" id="6175222">*</span><span class="ident" id="6175223"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6175230">)</span>&nbsp;<span class="ident" id="6175232">next</span><span class="op" id="6175236">(</span><span class="op" id="6175237">)</span>&nbsp;<span class="builtintype" id="6175239">rune</span>&nbsp;<span class="op" id="6175244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175247">ch</span><span class="op" id="6175249">,</span>&nbsp;<span class="ident" id="6175251">width</span>&nbsp;<span class="op" id="6175257">:=</span>&nbsp;<span class="builtintype" id="6175260">rune</span><span class="op" id="6175264">(</span><span class="ident" id="6175265"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175266">.</span><span class="ident" id="6175267">srcBuf</span><span class="op" id="6175273">[</span><span class="ident" id="6175274"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175275">.</span><span class="ident" id="6175276">srcPos</span><span class="op" id="6175282">]</span><span class="op" id="6175283">)</span><span class="op" id="6175284">,</span>&nbsp;<span class="num" id="6175286">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175290">if</span>&nbsp;<span class="ident" id="6175293"><a href="/text/scanner/scanner.go.html#6175247">ch</a></span>&nbsp;<span class="op" id="6175296">&gt;=</span>&nbsp;<span class="ident" id="6175299"><a href="/text/scanner/scanner.go.html#6169041">utf8</a></span><span class="op" id="6175303">.</span><span class="ident" id="6175304">RuneSelf</span>&nbsp;<span class="op" id="6175313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6175317">//&nbsp;uncommon&nbsp;case:&nbsp;not&nbsp;ASCII&nbsp;or&nbsp;not&nbsp;enough&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175367">for</span>&nbsp;<span class="ident" id="6175371"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175372">.</span><span class="ident" id="6175373">srcPos</span><span class="op" id="6175379">+</span><span class="ident" id="6175380"><a href="/text/scanner/scanner.go.html#6169041">utf8</a></span><span class="op" id="6175384">.</span><span class="ident" id="6175385">UTFMax</span>&nbsp;<span class="op" id="6175392">&gt;</span>&nbsp;<span class="ident" id="6175394"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175395">.</span><span class="ident" id="6175396">srcEnd</span>&nbsp;<span class="op" id="6175403">&amp;&amp;</span>&nbsp;<span class="op" id="6175406">!</span><span class="ident" id="6175407"><a href="/text/scanner/scanner.go.html#6169041">utf8</a></span><span class="op" id="6175411">.</span><span class="ident" id="6175412">FullRune</span><span class="op" id="6175420">(</span><span class="ident" id="6175421"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175422">.</span><span class="ident" id="6175423">srcBuf</span><span class="op" id="6175429">[</span><span class="ident" id="6175430"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175431">.</span><span class="ident" id="6175432">srcPos</span><span class="op" id="6175438">:</span><span class="ident" id="6175439"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175440">.</span><span class="ident" id="6175441">srcEnd</span><span class="op" id="6175447">]</span><span class="op" id="6175448">)</span>&nbsp;<span class="op" id="6175450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6175455">//&nbsp;not&nbsp;enough&nbsp;bytes:&nbsp;read&nbsp;some&nbsp;more,&nbsp;but&nbsp;first</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6175505">//&nbsp;save&nbsp;away&nbsp;token&nbsp;text&nbsp;if&nbsp;any</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175539">if</span>&nbsp;<span class="ident" id="6175542"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175543">.</span><span class="ident" id="6175544">tokPos</span>&nbsp;<span class="op" id="6175551">&gt;=</span>&nbsp;<span class="num" id="6175554">0</span>&nbsp;<span class="op" id="6175556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175562"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175563">.</span><span class="ident" id="6175564">tokBuf</span><span class="op" id="6175570">.</span><span class="ident" id="6175571">Write</span><span class="op" id="6175576">(</span><span class="ident" id="6175577"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175578">.</span><span class="ident" id="6175579">srcBuf</span><span class="op" id="6175585">[</span><span class="ident" id="6175586"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175587">.</span><span class="ident" id="6175588">tokPos</span><span class="op" id="6175594">:</span><span class="ident" id="6175595"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175596">.</span><span class="ident" id="6175597">srcPos</span><span class="op" id="6175603">]</span><span class="op" id="6175604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175610"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175611">.</span><span class="ident" id="6175612">tokPos</span>&nbsp;<span class="op" id="6175619">=</span>&nbsp;<span class="num" id="6175621">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6175627">//&nbsp;s.tokEnd&nbsp;is&nbsp;set&nbsp;by&nbsp;Scan()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6175659">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6175664">//&nbsp;move&nbsp;unread&nbsp;bytes&nbsp;to&nbsp;beginning&nbsp;of&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6175711">copy</span><span class="op" id="6175715">(</span><span class="ident" id="6175716"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175717">.</span><span class="ident" id="6175718">srcBuf</span><span class="op" id="6175724">[</span><span class="num" id="6175725">0</span><span class="op" id="6175726">:</span><span class="op" id="6175727">]</span><span class="op" id="6175728">,</span>&nbsp;<span class="ident" id="6175730"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175731">.</span><span class="ident" id="6175732">srcBuf</span><span class="op" id="6175738">[</span><span class="ident" id="6175739"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175740">.</span><span class="ident" id="6175741">srcPos</span><span class="op" id="6175747">:</span><span class="ident" id="6175748"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175749">.</span><span class="ident" id="6175750">srcEnd</span><span class="op" id="6175756">]</span><span class="op" id="6175757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175762"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175763">.</span><span class="ident" id="6175764">srcBufOffset</span>&nbsp;<span class="op" id="6175777">+=</span>&nbsp;<span class="ident" id="6175780"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6175781">.</span><span class="ident" id="6175782">srcPos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6175792">//&nbsp;read&nbsp;more&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6175814">//&nbsp;(an&nbsp;io.Reader&nbsp;must&nbsp;return&nbsp;io.EOF&nbsp;when&nbsp;it&nbsp;reaches</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6175869">//&nbsp;the&nbsp;end&nbsp;of&nbsp;what&nbsp;it&nbsp;is&nbsp;reading&nbsp;-&nbsp;simply&nbsp;returning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6175924">//&nbsp;n&nbsp;==&nbsp;0&nbsp;will&nbsp;make&nbsp;this&nbsp;loop&nbsp;retry&nbsp;forever;&nbsp;but&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6175980">//&nbsp;error&nbsp;is&nbsp;in&nbsp;the&nbsp;reader&nbsp;implementation&nbsp;in&nbsp;that&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176038">i</span>&nbsp;<span class="op" id="6176040">:=</span>&nbsp;<span class="ident" id="6176043"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176044">.</span><span class="ident" id="6176045">srcEnd</span>&nbsp;<span class="op" id="6176052">-</span>&nbsp;<span class="ident" id="6176054"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176055">.</span><span class="ident" id="6176056">srcPos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176066">n</span><span class="op" id="6176067">,</span>&nbsp;<span class="ident" id="6176069">err</span>&nbsp;<span class="op" id="6176073">:=</span>&nbsp;<span class="ident" id="6176076"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176077">.</span><span class="ident" id="6176078">src</span><span class="op" id="6176081">.</span><span class="ident" id="6176082">Read</span><span class="op" id="6176086">(</span><span class="ident" id="6176087"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176088">.</span><span class="ident" id="6176089">srcBuf</span><span class="op" id="6176095">[</span><span class="ident" id="6176096"><a href="/text/scanner/scanner.go.html#6176038">i</a></span><span class="op" id="6176097">:</span><span class="ident" id="6176098"><a href="/text/scanner/scanner.go.html#6171538">bufLen</a></span><span class="op" id="6176104">]</span><span class="op" id="6176105">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176110"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176111">.</span><span class="ident" id="6176112">srcPos</span>&nbsp;<span class="op" id="6176119">=</span>&nbsp;<span class="num" id="6176121">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176126"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176127">.</span><span class="ident" id="6176128">srcEnd</span>&nbsp;<span class="op" id="6176135">=</span>&nbsp;<span class="ident" id="6176137"><a href="/text/scanner/scanner.go.html#6176038">i</a></span>&nbsp;<span class="op" id="6176139">+</span>&nbsp;<span class="ident" id="6176141"><a href="/text/scanner/scanner.go.html#6176066">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176146"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176147">.</span><span class="ident" id="6176148">srcBuf</span><span class="op" id="6176154">[</span><span class="ident" id="6176155"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176156">.</span><span class="ident" id="6176157">srcEnd</span><span class="op" id="6176163">]</span>&nbsp;<span class="op" id="6176165">=</span>&nbsp;<span class="ident" id="6176167"><a href="/text/scanner/scanner.go.html#6169041">utf8</a></span><span class="op" id="6176171">.</span><span class="ident" id="6176172">RuneSelf</span>&nbsp;<span class="comment" id="6176181">//&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176196">if</span>&nbsp;<span class="ident" id="6176199"><a href="/text/scanner/scanner.go.html#6176069">err</a></span>&nbsp;<span class="op" id="6176203">!=</span>&nbsp;<span class="ident" id="6176206">nil</span>&nbsp;<span class="op" id="6176210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176216">if</span>&nbsp;<span class="ident" id="6176219"><a href="/text/scanner/scanner.go.html#6176069">err</a></span>&nbsp;<span class="op" id="6176223">!=</span>&nbsp;<span class="ident" id="6176226"><a href="/text/scanner/scanner.go.html#6169018">io</a></span><span class="op" id="6176228">.</span><span class="ident" id="6176229">EOF</span>&nbsp;<span class="op" id="6176233">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176240"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176241">.</span><span class="builtintype" id="6176242">error</span><span class="op" id="6176247">(</span><span class="ident" id="6176248"><a href="/text/scanner/scanner.go.html#6176069">err</a></span><span class="op" id="6176251">.</span><span class="ident" id="6176252">Error</span><span class="op" id="6176257">(</span><span class="op" id="6176258">)</span><span class="op" id="6176259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176271">if</span>&nbsp;<span class="ident" id="6176274"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176275">.</span><span class="ident" id="6176276">srcEnd</span>&nbsp;<span class="op" id="6176283">==</span>&nbsp;<span class="num" id="6176286">0</span>&nbsp;<span class="op" id="6176288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176295">if</span>&nbsp;<span class="ident" id="6176298"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176299">.</span><span class="ident" id="6176300">lastCharLen</span>&nbsp;<span class="op" id="6176312">&gt;</span>&nbsp;<span class="num" id="6176314">0</span>&nbsp;<span class="op" id="6176316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176324">//&nbsp;previous&nbsp;character&nbsp;was&nbsp;not&nbsp;EOF</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176364"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176365">.</span><span class="ident" id="6176366">column</span><span class="op" id="6176372">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176387"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176388">.</span><span class="ident" id="6176389">lastCharLen</span>&nbsp;<span class="op" id="6176401">=</span>&nbsp;<span class="num" id="6176403">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176410">return</span>&nbsp;<span class="ident" id="6176417"><a href="/text/scanner/scanner.go.html#6170845">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176425">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176431">//&nbsp;If&nbsp;err&nbsp;==&nbsp;EOF,&nbsp;we&nbsp;won&#39;t&nbsp;be&nbsp;getting&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176478">//&nbsp;bytes;&nbsp;break&nbsp;to&nbsp;avoid&nbsp;infinite&nbsp;loop.&nbsp;If</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176525">//&nbsp;err&nbsp;is&nbsp;something&nbsp;else,&nbsp;we&nbsp;don&#39;t&nbsp;know&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176572">//&nbsp;we&nbsp;can&nbsp;get&nbsp;more&nbsp;bytes;&nbsp;thus&nbsp;also&nbsp;break.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176619">break</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176636">//&nbsp;at&nbsp;least&nbsp;one&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176659"><a href="/text/scanner/scanner.go.html#6175247">ch</a></span>&nbsp;<span class="op" id="6176662">=</span>&nbsp;<span class="builtintype" id="6176664">rune</span><span class="op" id="6176668">(</span><span class="ident" id="6176669"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176670">.</span><span class="ident" id="6176671">srcBuf</span><span class="op" id="6176677">[</span><span class="ident" id="6176678"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176679">.</span><span class="ident" id="6176680">srcPos</span><span class="op" id="6176686">]</span><span class="op" id="6176687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176691">if</span>&nbsp;<span class="ident" id="6176694"><a href="/text/scanner/scanner.go.html#6175247">ch</a></span>&nbsp;<span class="op" id="6176697">&gt;=</span>&nbsp;<span class="ident" id="6176700"><a href="/text/scanner/scanner.go.html#6169041">utf8</a></span><span class="op" id="6176704">.</span><span class="ident" id="6176705">RuneSelf</span>&nbsp;<span class="op" id="6176714">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176719">//&nbsp;uncommon&nbsp;case:&nbsp;not&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176750"><a href="/text/scanner/scanner.go.html#6175247">ch</a></span><span class="op" id="6176752">,</span>&nbsp;<span class="ident" id="6176754"><a href="/text/scanner/scanner.go.html#6175251">width</a></span>&nbsp;<span class="op" id="6176760">=</span>&nbsp;<span class="ident" id="6176762"><a href="/text/scanner/scanner.go.html#6169041">utf8</a></span><span class="op" id="6176766">.</span><span class="ident" id="6176767">DecodeRune</span><span class="op" id="6176777">(</span><span class="ident" id="6176778"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176779">.</span><span class="ident" id="6176780">srcBuf</span><span class="op" id="6176786">[</span><span class="ident" id="6176787"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176788">.</span><span class="ident" id="6176789">srcPos</span><span class="op" id="6176795">:</span><span class="ident" id="6176796"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176797">.</span><span class="ident" id="6176798">srcEnd</span><span class="op" id="6176804">]</span><span class="op" id="6176805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176810">if</span>&nbsp;<span class="ident" id="6176813"><a href="/text/scanner/scanner.go.html#6175247">ch</a></span>&nbsp;<span class="op" id="6176816">==</span>&nbsp;<span class="ident" id="6176819"><a href="/text/scanner/scanner.go.html#6169041">utf8</a></span><span class="op" id="6176823">.</span><span class="ident" id="6176824">RuneError</span>&nbsp;<span class="op" id="6176834">&amp;&amp;</span>&nbsp;<span class="ident" id="6176837"><a href="/text/scanner/scanner.go.html#6175251">width</a></span>&nbsp;<span class="op" id="6176843">==</span>&nbsp;<span class="num" id="6176846">1</span>&nbsp;<span class="op" id="6176848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176854">//&nbsp;advance&nbsp;for&nbsp;correct&nbsp;error&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176896"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176897">.</span><span class="ident" id="6176898">srcPos</span>&nbsp;<span class="op" id="6176905">+=</span>&nbsp;<span class="ident" id="6176908"><a href="/text/scanner/scanner.go.html#6175251">width</a></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176918"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176919">.</span><span class="ident" id="6176920">lastCharLen</span>&nbsp;<span class="op" id="6176932">=</span>&nbsp;<span class="ident" id="6176934"><a href="/text/scanner/scanner.go.html#6175251">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176944"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176945">.</span><span class="ident" id="6176946">column</span><span class="op" id="6176952">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176959"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6176960">.</span><span class="builtintype" id="6176961">error</span><span class="op" id="6176966">(</span><span class="string" id="6176967">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op" id="6176991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176997">return</span>&nbsp;<span class="ident" id="6177004"><a href="/text/scanner/scanner.go.html#6175247">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177010">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6177021">//&nbsp;advance</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177033"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6177034">.</span><span class="ident" id="6177035">srcPos</span>&nbsp;<span class="op" id="6177042">+=</span>&nbsp;<span class="ident" id="6177045"><a href="/text/scanner/scanner.go.html#6175251">width</a></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177052"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6177053">.</span><span class="ident" id="6177054">lastCharLen</span>&nbsp;<span class="op" id="6177066">=</span>&nbsp;<span class="ident" id="6177068"><a href="/text/scanner/scanner.go.html#6175251">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177075"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6177076">.</span><span class="ident" id="6177077">column</span><span class="op" id="6177083">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6177088">//&nbsp;special&nbsp;situations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177111">switch</span>&nbsp;<span class="ident" id="6177118"><a href="/text/scanner/scanner.go.html#6175247">ch</a></span>&nbsp;<span class="op" id="6177121">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177124">case</span>&nbsp;<span class="num" id="6177129">0</span><span class="op" id="6177130">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6177134">//&nbsp;for&nbsp;compatibility&nbsp;with&nbsp;other&nbsp;tools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177174"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6177175">.</span><span class="builtintype" id="6177176">error</span><span class="op" id="6177181">(</span><span class="string" id="6177182">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op" id="6177205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177208">case</span>&nbsp;<span class="string" id="6177213">&#39;\n&#39;</span><span class="op" id="6177217">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177221"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6177222">.</span><span class="ident" id="6177223">line</span><span class="op" id="6177227">++</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177232"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6177233">.</span><span class="ident" id="6177234">lastLineLen</span>&nbsp;<span class="op" id="6177246">=</span>&nbsp;<span class="ident" id="6177248"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6177249">.</span><span class="ident" id="6177250">column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177259"><a href="/text/scanner/scanner.go.html#6175220">s</a></span><span class="op" id="6177260">.</span><span class="ident" id="6177261">column</span>&nbsp;<span class="op" id="6177268">=</span>&nbsp;<span class="num" id="6177270">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177277">return</span>&nbsp;<span class="ident" id="6177284"><a href="/text/scanner/scanner.go.html#6175247">ch</a></span><br>
<span class="lineno">305</span><span class="op" id="6177287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6177290">//&nbsp;Next&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="6177344">//&nbsp;It&nbsp;returns&nbsp;EOF&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;source.&nbsp;It&nbsp;reports</span><br>
<span class="lineno"></span><span class="comment" id="6177399">//&nbsp;a&nbsp;read&nbsp;error&nbsp;by&nbsp;calling&nbsp;s.Error,&nbsp;if&nbsp;not&nbsp;nil;&nbsp;otherwise</span><br>
<span class="lineno">310</span><span class="comment" id="6177457">//&nbsp;it&nbsp;prints&nbsp;an&nbsp;error&nbsp;message&nbsp;to&nbsp;os.Stderr.&nbsp;Next&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="6177515">//&nbsp;update&nbsp;the&nbsp;Scanner&#39;s&nbsp;Position&nbsp;field;&nbsp;use&nbsp;Pos()&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6177568">//&nbsp;get&nbsp;the&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span><span class="keyword" id="6177597">func</span>&nbsp;<span class="op" id="6177602">(</span><span class="ident" id="6177603">s</span>&nbsp;<span class="op" id="6177605">*</span><span class="ident" id="6177606"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6177613">)</span>&nbsp;<span class="ident" id="6177615">Next</span><span class="op" id="6177619">(</span><span class="op" id="6177620">)</span>&nbsp;<span class="builtintype" id="6177622">rune</span>&nbsp;<span class="op" id="6177627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177630"><a href="/text/scanner/scanner.go.html#6177603">s</a></span><span class="op" id="6177631">.</span><span class="ident" id="6177632">tokPos</span>&nbsp;<span class="op" id="6177639">=</span>&nbsp;<span class="op" id="6177641">-</span><span class="num" id="6177642">1</span>&nbsp;<span class="comment" id="6177644">//&nbsp;don&#39;t&nbsp;collect&nbsp;token&nbsp;text</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177673"><a href="/text/scanner/scanner.go.html#6177603">s</a></span><span class="op" id="6177674">.</span><span class="ident" id="6177675">Line</span>&nbsp;<span class="op" id="6177680">=</span>&nbsp;<span class="num" id="6177682">0</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6177687">//&nbsp;invalidate&nbsp;token&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177717">ch</span>&nbsp;<span class="op" id="6177720">:=</span>&nbsp;<span class="ident" id="6177723"><a href="/text/scanner/scanner.go.html#6177603">s</a></span><span class="op" id="6177724">.</span><span class="ident" id="6177725">Peek</span><span class="op" id="6177729">(</span><span class="op" id="6177730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177733"><a href="/text/scanner/scanner.go.html#6177603">s</a></span><span class="op" id="6177734">.</span><span class="ident" id="6177735">ch</span>&nbsp;<span class="op" id="6177738">=</span>&nbsp;<span class="ident" id="6177740"><a href="/text/scanner/scanner.go.html#6177603">s</a></span><span class="op" id="6177741">.</span><span class="ident" id="6177742">next</span><span class="op" id="6177746">(</span><span class="op" id="6177747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177750">return</span>&nbsp;<span class="ident" id="6177757"><a href="/text/scanner/scanner.go.html#6177717">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6177760">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="6177763">//&nbsp;Peek&nbsp;returns&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;character&nbsp;in&nbsp;the&nbsp;source&nbsp;without&nbsp;advancing</span><br>
<span class="lineno"></span><span class="comment" id="6177838">//&nbsp;the&nbsp;scanner.&nbsp;It&nbsp;returns&nbsp;EOF&nbsp;if&nbsp;the&nbsp;scanner&#39;s&nbsp;position&nbsp;is&nbsp;at&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span><span class="comment" id="6177910">//&nbsp;character&nbsp;of&nbsp;the&nbsp;source.</span><br>
<span class="lineno"></span><span class="keyword" id="6177938">func</span>&nbsp;<span class="op" id="6177943">(</span><span class="ident" id="6177944">s</span>&nbsp;<span class="op" id="6177946">*</span><span class="ident" id="6177947"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6177954">)</span>&nbsp;<span class="ident" id="6177956">Peek</span><span class="op" id="6177960">(</span><span class="op" id="6177961">)</span>&nbsp;<span class="builtintype" id="6177963">rune</span>&nbsp;<span class="op" id="6177968">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177971">if</span>&nbsp;<span class="ident" id="6177974"><a href="/text/scanner/scanner.go.html#6177944">s</a></span><span class="op" id="6177975">.</span><span class="ident" id="6177976">ch</span>&nbsp;<span class="op" id="6177979">&lt;</span>&nbsp;<span class="num" id="6177981">0</span>&nbsp;<span class="op" id="6177983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6177987">//&nbsp;this&nbsp;code&nbsp;is&nbsp;only&nbsp;run&nbsp;for&nbsp;the&nbsp;very&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178043"><a href="/text/scanner/scanner.go.html#6177944">s</a></span><span class="op" id="6178044">.</span><span class="ident" id="6178045">ch</span>&nbsp;<span class="op" id="6178048">=</span>&nbsp;<span class="ident" id="6178050"><a href="/text/scanner/scanner.go.html#6177944">s</a></span><span class="op" id="6178051">.</span><span class="ident" id="6178052">next</span><span class="op" id="6178056">(</span><span class="op" id="6178057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178061">if</span>&nbsp;<span class="ident" id="6178064"><a href="/text/scanner/scanner.go.html#6177944">s</a></span><span class="op" id="6178065">.</span><span class="ident" id="6178066">ch</span>&nbsp;<span class="op" id="6178069">==</span>&nbsp;<span class="string" id="6178072">&#39;\uFEFF&#39;</span>&nbsp;<span class="op" id="6178081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178086"><a href="/text/scanner/scanner.go.html#6177944">s</a></span><span class="op" id="6178087">.</span><span class="ident" id="6178088">ch</span>&nbsp;<span class="op" id="6178091">=</span>&nbsp;<span class="ident" id="6178093"><a href="/text/scanner/scanner.go.html#6177944">s</a></span><span class="op" id="6178094">.</span><span class="ident" id="6178095">next</span><span class="op" id="6178099">(</span><span class="op" id="6178100">)</span>&nbsp;<span class="comment" id="6178102">//&nbsp;ignore&nbsp;BOM</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178124">return</span>&nbsp;<span class="ident" id="6178131"><a href="/text/scanner/scanner.go.html#6177944">s</a></span><span class="op" id="6178132">.</span><span class="ident" id="6178133">ch</span><br>
<span class="lineno"></span><span class="op" id="6178136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="6178139">func</span>&nbsp;<span class="op" id="6178144">(</span><span class="ident" id="6178145">s</span>&nbsp;<span class="op" id="6178147">*</span><span class="ident" id="6178148"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6178155">)</span>&nbsp;<span class="builtintype" id="6178157">error</span><span class="op" id="6178162">(</span><span class="ident" id="6178163">msg</span>&nbsp;<span class="builtintype" id="6178167">string</span><span class="op" id="6178173">)</span>&nbsp;<span class="op" id="6178175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178178"><a href="/text/scanner/scanner.go.html#6178145">s</a></span><span class="op" id="6178179">.</span><span class="ident" id="6178180">ErrorCount</span><span class="op" id="6178190">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178194">if</span>&nbsp;<span class="ident" id="6178197"><a href="/text/scanner/scanner.go.html#6178145">s</a></span><span class="op" id="6178198">.</span><span class="ident" id="6178199">Error</span>&nbsp;<span class="op" id="6178205">!=</span>&nbsp;<span class="ident" id="6178208">nil</span>&nbsp;<span class="op" id="6178212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178216"><a href="/text/scanner/scanner.go.html#6178145">s</a></span><span class="op" id="6178217">.</span><span class="ident" id="6178218">Error</span><span class="op" id="6178223">(</span><span class="ident" id="6178224"><a href="/text/scanner/scanner.go.html#6178145">s</a></span><span class="op" id="6178225">,</span>&nbsp;<span class="ident" id="6178227"><a href="/text/scanner/scanner.go.html#6178163">msg</a></span><span class="op" id="6178230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178234">return</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178245">pos</span>&nbsp;<span class="op" id="6178249">:=</span>&nbsp;<span class="ident" id="6178252"><a href="/text/scanner/scanner.go.html#6178145">s</a></span><span class="op" id="6178253">.</span><span class="ident" id="6178254">Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178264">if</span>&nbsp;<span class="op" id="6178267">!</span><span class="ident" id="6178268"><a href="/text/scanner/scanner.go.html#6178245">pos</a></span><span class="op" id="6178271">.</span><span class="ident" id="6178272">IsValid</span><span class="op" id="6178279">(</span><span class="op" id="6178280">)</span>&nbsp;<span class="op" id="6178282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178286"><a href="/text/scanner/scanner.go.html#6178245">pos</a></span>&nbsp;<span class="op" id="6178290">=</span>&nbsp;<span class="ident" id="6178292"><a href="/text/scanner/scanner.go.html#6178145">s</a></span><span class="op" id="6178293">.</span><span class="ident" id="6178294">Pos</span><span class="op" id="6178297">(</span><span class="op" id="6178298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178301">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178304"><a href="/text/scanner/scanner.go.html#6169011">fmt</a></span><span class="op" id="6178307">.</span><span class="ident" id="6178308">Fprintf</span><span class="op" id="6178315">(</span><span class="ident" id="6178316"><a href="/text/scanner/scanner.go.html#6169024">os</a></span><span class="op" id="6178318">.</span><span class="ident" id="6178319">Stderr</span><span class="op" id="6178325">,</span>&nbsp;<span class="string" id="6178327">&#34;%s:&nbsp;%s\n&#34;</span><span class="op" id="6178337">,</span>&nbsp;<span class="ident" id="6178339"><a href="/text/scanner/scanner.go.html#6178245">pos</a></span><span class="op" id="6178342">,</span>&nbsp;<span class="ident" id="6178344"><a href="/text/scanner/scanner.go.html#6178163">msg</a></span><span class="op" id="6178347">)</span><br>
<span class="lineno"></span><span class="op" id="6178349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6178352">func</span>&nbsp;<span class="op" id="6178357">(</span><span class="ident" id="6178358">s</span>&nbsp;<span class="op" id="6178360">*</span><span class="ident" id="6178361"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6178368">)</span>&nbsp;<span class="ident" id="6178370">isIdentRune</span><span class="op" id="6178381">(</span><span class="ident" id="6178382">ch</span>&nbsp;<span class="builtintype" id="6178385">rune</span><span class="op" id="6178389">,</span>&nbsp;<span class="ident" id="6178391">i</span>&nbsp;<span class="builtintype" id="6178393">int</span><span class="op" id="6178396">)</span>&nbsp;<span class="builtintype" id="6178398">bool</span>&nbsp;<span class="op" id="6178403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178406">if</span>&nbsp;<span class="ident" id="6178409"><a href="/text/scanner/scanner.go.html#6178358">s</a></span><span class="op" id="6178410">.</span><span class="ident" id="6178411">IsIdentRune</span>&nbsp;<span class="op" id="6178423">!=</span>&nbsp;<span class="ident" id="6178426">nil</span>&nbsp;<span class="op" id="6178430">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178434">return</span>&nbsp;<span class="ident" id="6178441"><a href="/text/scanner/scanner.go.html#6178358">s</a></span><span class="op" id="6178442">.</span><span class="ident" id="6178443">IsIdentRune</span><span class="op" id="6178454">(</span><span class="ident" id="6178455"><a href="/text/scanner/scanner.go.html#6178382">ch</a></span><span class="op" id="6178457">,</span>&nbsp;<span class="ident" id="6178459"><a href="/text/scanner/scanner.go.html#6178391">i</a></span><span class="op" id="6178460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178466">return</span>&nbsp;<span class="ident" id="6178473"><a href="/text/scanner/scanner.go.html#6178382">ch</a></span>&nbsp;<span class="op" id="6178476">==</span>&nbsp;<span class="string" id="6178479">&#39;_&#39;</span>&nbsp;<span class="op" id="6178483">||</span>&nbsp;<span class="ident" id="6178486"><a href="/text/scanner/scanner.go.html#6169030">unicode</a></span><span class="op" id="6178493">.</span><span class="ident" id="6178494">IsLetter</span><span class="op" id="6178502">(</span><span class="ident" id="6178503"><a href="/text/scanner/scanner.go.html#6178382">ch</a></span><span class="op" id="6178505">)</span>&nbsp;<span class="op" id="6178507">||</span>&nbsp;<span class="ident" id="6178510"><a href="/text/scanner/scanner.go.html#6169030">unicode</a></span><span class="op" id="6178517">.</span><span class="ident" id="6178518">IsDigit</span><span class="op" id="6178525">(</span><span class="ident" id="6178526"><a href="/text/scanner/scanner.go.html#6178382">ch</a></span><span class="op" id="6178528">)</span>&nbsp;<span class="op" id="6178530">&amp;&amp;</span>&nbsp;<span class="ident" id="6178533"><a href="/text/scanner/scanner.go.html#6178391">i</a></span>&nbsp;<span class="op" id="6178535">&gt;</span>&nbsp;<span class="num" id="6178537">0</span><br>
<span class="lineno"></span><span class="op" id="6178539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="keyword" id="6178542">func</span>&nbsp;<span class="op" id="6178547">(</span><span class="ident" id="6178548">s</span>&nbsp;<span class="op" id="6178550">*</span><span class="ident" id="6178551"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6178558">)</span>&nbsp;<span class="ident" id="6178560">scanIdentifier</span><span class="op" id="6178574">(</span><span class="op" id="6178575">)</span>&nbsp;<span class="builtintype" id="6178577">rune</span>&nbsp;<span class="op" id="6178582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6178585">//&nbsp;we&nbsp;know&nbsp;the&nbsp;zero&#39;th&nbsp;rune&nbsp;is&nbsp;OK;&nbsp;start&nbsp;scanning&nbsp;at&nbsp;the&nbsp;next&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178652">ch</span>&nbsp;<span class="op" id="6178655">:=</span>&nbsp;<span class="ident" id="6178658"><a href="/text/scanner/scanner.go.html#6178548">s</a></span><span class="op" id="6178659">.</span><span class="ident" id="6178660">next</span><span class="op" id="6178664">(</span><span class="op" id="6178665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178668">for</span>&nbsp;<span class="ident" id="6178672">i</span>&nbsp;<span class="op" id="6178674">:=</span>&nbsp;<span class="num" id="6178677">1</span><span class="op" id="6178678">;</span>&nbsp;<span class="ident" id="6178680"><a href="/text/scanner/scanner.go.html#6178548">s</a></span><span class="op" id="6178681">.</span><span class="ident" id="6178682">isIdentRune</span><span class="op" id="6178693">(</span><span class="ident" id="6178694"><a href="/text/scanner/scanner.go.html#6178652">ch</a></span><span class="op" id="6178696">,</span>&nbsp;<span class="ident" id="6178698"><a href="/text/scanner/scanner.go.html#6178672">i</a></span><span class="op" id="6178699">)</span><span class="op" id="6178700">;</span>&nbsp;<span class="ident" id="6178702"><a href="/text/scanner/scanner.go.html#6178672">i</a></span><span class="op" id="6178703">++</span>&nbsp;<span class="op" id="6178706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178710"><a href="/text/scanner/scanner.go.html#6178652">ch</a></span>&nbsp;<span class="op" id="6178713">=</span>&nbsp;<span class="ident" id="6178715"><a href="/text/scanner/scanner.go.html#6178548">s</a></span><span class="op" id="6178716">.</span><span class="ident" id="6178717">next</span><span class="op" id="6178721">(</span><span class="op" id="6178722">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178728">return</span>&nbsp;<span class="ident" id="6178735"><a href="/text/scanner/scanner.go.html#6178652">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6178738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6178741">func</span>&nbsp;<span class="ident" id="6178746">digitVal</span><span class="op" id="6178754">(</span><span class="ident" id="6178755">ch</span>&nbsp;<span class="builtintype" id="6178758">rune</span><span class="op" id="6178762">)</span>&nbsp;<span class="builtintype" id="6178764">int</span>&nbsp;<span class="op" id="6178768">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178771">switch</span>&nbsp;<span class="op" id="6178778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178781">case</span>&nbsp;<span class="string" id="6178786">&#39;0&#39;</span>&nbsp;<span class="op" id="6178790">&lt;=</span>&nbsp;<span class="ident" id="6178793"><a href="/text/scanner/scanner.go.html#6178755">ch</a></span>&nbsp;<span class="op" id="6178796">&amp;&amp;</span>&nbsp;<span class="ident" id="6178799"><a href="/text/scanner/scanner.go.html#6178755">ch</a></span>&nbsp;<span class="op" id="6178802">&lt;=</span>&nbsp;<span class="string" id="6178805">&#39;9&#39;</span><span class="op" id="6178808">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178812">return</span>&nbsp;<span class="builtintype" id="6178819">int</span><span class="op" id="6178822">(</span><span class="ident" id="6178823"><a href="/text/scanner/scanner.go.html#6178755">ch</a></span>&nbsp;<span class="op" id="6178826">-</span>&nbsp;<span class="string" id="6178828">&#39;0&#39;</span><span class="op" id="6178831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178834">case</span>&nbsp;<span class="string" id="6178839">&#39;a&#39;</span>&nbsp;<span class="op" id="6178843">&lt;=</span>&nbsp;<span class="ident" id="6178846"><a href="/text/scanner/scanner.go.html#6178755">ch</a></span>&nbsp;<span class="op" id="6178849">&amp;&amp;</span>&nbsp;<span class="ident" id="6178852"><a href="/text/scanner/scanner.go.html#6178755">ch</a></span>&nbsp;<span class="op" id="6178855">&lt;=</span>&nbsp;<span class="string" id="6178858">&#39;f&#39;</span><span class="op" id="6178861">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178865">return</span>&nbsp;<span class="builtintype" id="6178872">int</span><span class="op" id="6178875">(</span><span class="ident" id="6178876"><a href="/text/scanner/scanner.go.html#6178755">ch</a></span>&nbsp;<span class="op" id="6178879">-</span>&nbsp;<span class="string" id="6178881">&#39;a&#39;</span>&nbsp;<span class="op" id="6178885">+</span>&nbsp;<span class="num" id="6178887">10</span><span class="op" id="6178889">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178892">case</span>&nbsp;<span class="string" id="6178897">&#39;A&#39;</span>&nbsp;<span class="op" id="6178901">&lt;=</span>&nbsp;<span class="ident" id="6178904"><a href="/text/scanner/scanner.go.html#6178755">ch</a></span>&nbsp;<span class="op" id="6178907">&amp;&amp;</span>&nbsp;<span class="ident" id="6178910"><a href="/text/scanner/scanner.go.html#6178755">ch</a></span>&nbsp;<span class="op" id="6178913">&lt;=</span>&nbsp;<span class="string" id="6178916">&#39;F&#39;</span><span class="op" id="6178919">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178923">return</span>&nbsp;<span class="builtintype" id="6178930">int</span><span class="op" id="6178933">(</span><span class="ident" id="6178934"><a href="/text/scanner/scanner.go.html#6178755">ch</a></span>&nbsp;<span class="op" id="6178937">-</span>&nbsp;<span class="string" id="6178939">&#39;A&#39;</span>&nbsp;<span class="op" id="6178943">+</span>&nbsp;<span class="num" id="6178945">10</span><span class="op" id="6178947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178953">return</span>&nbsp;<span class="num" id="6178960">16</span>&nbsp;<span class="comment" id="6178963">//&nbsp;larger&nbsp;than&nbsp;any&nbsp;legal&nbsp;digit&nbsp;val</span><br>
<span class="lineno"></span><span class="op" id="6178998">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span><span class="keyword" id="6179001">func</span>&nbsp;<span class="ident" id="6179006">isDecimal</span><span class="op" id="6179015">(</span><span class="ident" id="6179016">ch</span>&nbsp;<span class="builtintype" id="6179019">rune</span><span class="op" id="6179023">)</span>&nbsp;<span class="builtintype" id="6179025">bool</span>&nbsp;<span class="op" id="6179030">{</span>&nbsp;<span class="keyword" id="6179032">return</span>&nbsp;<span class="string" id="6179039">&#39;0&#39;</span>&nbsp;<span class="op" id="6179043">&lt;=</span>&nbsp;<span class="ident" id="6179046"><a href="/text/scanner/scanner.go.html#6179016">ch</a></span>&nbsp;<span class="op" id="6179049">&amp;&amp;</span>&nbsp;<span class="ident" id="6179052"><a href="/text/scanner/scanner.go.html#6179016">ch</a></span>&nbsp;<span class="op" id="6179055">&lt;=</span>&nbsp;<span class="string" id="6179058">&#39;9&#39;</span>&nbsp;<span class="op" id="6179062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6179065">func</span>&nbsp;<span class="op" id="6179070">(</span><span class="ident" id="6179071">s</span>&nbsp;<span class="op" id="6179073">*</span><span class="ident" id="6179074"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6179081">)</span>&nbsp;<span class="ident" id="6179083">scanMantissa</span><span class="op" id="6179095">(</span><span class="ident" id="6179096">ch</span>&nbsp;<span class="builtintype" id="6179099">rune</span><span class="op" id="6179103">)</span>&nbsp;<span class="builtintype" id="6179105">rune</span>&nbsp;<span class="op" id="6179110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179113">for</span>&nbsp;<span class="ident" id="6179117"><a href="/text/scanner/scanner.go.html#6179006">isDecimal</a></span><span class="op" id="6179126">(</span><span class="ident" id="6179127"><a href="/text/scanner/scanner.go.html#6179096">ch</a></span><span class="op" id="6179129">)</span>&nbsp;<span class="op" id="6179131">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179135"><a href="/text/scanner/scanner.go.html#6179096">ch</a></span>&nbsp;<span class="op" id="6179138">=</span>&nbsp;<span class="ident" id="6179140"><a href="/text/scanner/scanner.go.html#6179071">s</a></span><span class="op" id="6179141">.</span><span class="ident" id="6179142">next</span><span class="op" id="6179146">(</span><span class="op" id="6179147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179153">return</span>&nbsp;<span class="ident" id="6179160"><a href="/text/scanner/scanner.go.html#6179096">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6179163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="6179166">func</span>&nbsp;<span class="op" id="6179171">(</span><span class="ident" id="6179172">s</span>&nbsp;<span class="op" id="6179174">*</span><span class="ident" id="6179175"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6179182">)</span>&nbsp;<span class="ident" id="6179184">scanFraction</span><span class="op" id="6179196">(</span><span class="ident" id="6179197">ch</span>&nbsp;<span class="builtintype" id="6179200">rune</span><span class="op" id="6179204">)</span>&nbsp;<span class="builtintype" id="6179206">rune</span>&nbsp;<span class="op" id="6179211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179214">if</span>&nbsp;<span class="ident" id="6179217"><a href="/text/scanner/scanner.go.html#6179197">ch</a></span>&nbsp;<span class="op" id="6179220">==</span>&nbsp;<span class="string" id="6179223">&#39;.&#39;</span>&nbsp;<span class="op" id="6179227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179231"><a href="/text/scanner/scanner.go.html#6179197">ch</a></span>&nbsp;<span class="op" id="6179234">=</span>&nbsp;<span class="ident" id="6179236"><a href="/text/scanner/scanner.go.html#6179172">s</a></span><span class="op" id="6179237">.</span><span class="ident" id="6179238">scanMantissa</span><span class="op" id="6179250">(</span><span class="ident" id="6179251"><a href="/text/scanner/scanner.go.html#6179172">s</a></span><span class="op" id="6179252">.</span><span class="ident" id="6179253">next</span><span class="op" id="6179257">(</span><span class="op" id="6179258">)</span><span class="op" id="6179259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179265">return</span>&nbsp;<span class="ident" id="6179272"><a href="/text/scanner/scanner.go.html#6179197">ch</a></span><br>
<span class="lineno">390</span><span class="op" id="6179275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6179278">func</span>&nbsp;<span class="op" id="6179283">(</span><span class="ident" id="6179284">s</span>&nbsp;<span class="op" id="6179286">*</span><span class="ident" id="6179287"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6179294">)</span>&nbsp;<span class="ident" id="6179296">scanExponent</span><span class="op" id="6179308">(</span><span class="ident" id="6179309">ch</span>&nbsp;<span class="builtintype" id="6179312">rune</span><span class="op" id="6179316">)</span>&nbsp;<span class="builtintype" id="6179318">rune</span>&nbsp;<span class="op" id="6179323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179326">if</span>&nbsp;<span class="ident" id="6179329"><a href="/text/scanner/scanner.go.html#6179309">ch</a></span>&nbsp;<span class="op" id="6179332">==</span>&nbsp;<span class="string" id="6179335">&#39;e&#39;</span>&nbsp;<span class="op" id="6179339">||</span>&nbsp;<span class="ident" id="6179342"><a href="/text/scanner/scanner.go.html#6179309">ch</a></span>&nbsp;<span class="op" id="6179345">==</span>&nbsp;<span class="string" id="6179348">&#39;E&#39;</span>&nbsp;<span class="op" id="6179352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179356"><a href="/text/scanner/scanner.go.html#6179309">ch</a></span>&nbsp;<span class="op" id="6179359">=</span>&nbsp;<span class="ident" id="6179361"><a href="/text/scanner/scanner.go.html#6179284">s</a></span><span class="op" id="6179362">.</span><span class="ident" id="6179363">next</span><span class="op" id="6179367">(</span><span class="op" id="6179368">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179372">if</span>&nbsp;<span class="ident" id="6179375"><a href="/text/scanner/scanner.go.html#6179309">ch</a></span>&nbsp;<span class="op" id="6179378">==</span>&nbsp;<span class="string" id="6179381">&#39;-&#39;</span>&nbsp;<span class="op" id="6179385">||</span>&nbsp;<span class="ident" id="6179388"><a href="/text/scanner/scanner.go.html#6179309">ch</a></span>&nbsp;<span class="op" id="6179391">==</span>&nbsp;<span class="string" id="6179394">&#39;+&#39;</span>&nbsp;<span class="op" id="6179398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179403"><a href="/text/scanner/scanner.go.html#6179309">ch</a></span>&nbsp;<span class="op" id="6179406">=</span>&nbsp;<span class="ident" id="6179408"><a href="/text/scanner/scanner.go.html#6179284">s</a></span><span class="op" id="6179409">.</span><span class="ident" id="6179410">next</span><span class="op" id="6179414">(</span><span class="op" id="6179415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179423"><a href="/text/scanner/scanner.go.html#6179309">ch</a></span>&nbsp;<span class="op" id="6179426">=</span>&nbsp;<span class="ident" id="6179428"><a href="/text/scanner/scanner.go.html#6179284">s</a></span><span class="op" id="6179429">.</span><span class="ident" id="6179430">scanMantissa</span><span class="op" id="6179442">(</span><span class="ident" id="6179443"><a href="/text/scanner/scanner.go.html#6179309">ch</a></span><span class="op" id="6179445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179448">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179451">return</span>&nbsp;<span class="ident" id="6179458"><a href="/text/scanner/scanner.go.html#6179309">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6179461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6179464">func</span>&nbsp;<span class="op" id="6179469">(</span><span class="ident" id="6179470">s</span>&nbsp;<span class="op" id="6179472">*</span><span class="ident" id="6179473"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6179480">)</span>&nbsp;<span class="ident" id="6179482">scanNumber</span><span class="op" id="6179492">(</span><span class="ident" id="6179493">ch</span>&nbsp;<span class="builtintype" id="6179496">rune</span><span class="op" id="6179500">)</span>&nbsp;<span class="op" id="6179502">(</span><span class="builtintype" id="6179503">rune</span><span class="op" id="6179507">,</span>&nbsp;<span class="builtintype" id="6179509">rune</span><span class="op" id="6179513">)</span>&nbsp;<span class="op" id="6179515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6179518">//&nbsp;isDecimal(ch)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179536">if</span>&nbsp;<span class="ident" id="6179539"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6179542">==</span>&nbsp;<span class="string" id="6179545">&#39;0&#39;</span>&nbsp;<span class="op" id="6179549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6179553">//&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179571"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6179574">=</span>&nbsp;<span class="ident" id="6179576"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6179577">.</span><span class="ident" id="6179578">next</span><span class="op" id="6179582">(</span><span class="op" id="6179583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179587">if</span>&nbsp;<span class="ident" id="6179590"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6179593">==</span>&nbsp;<span class="string" id="6179596">&#39;x&#39;</span>&nbsp;<span class="op" id="6179600">||</span>&nbsp;<span class="ident" id="6179603"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6179606">==</span>&nbsp;<span class="string" id="6179609">&#39;X&#39;</span>&nbsp;<span class="op" id="6179613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6179618">//&nbsp;hexadecimal&nbsp;int</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179640"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6179643">=</span>&nbsp;<span class="ident" id="6179645"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6179646">.</span><span class="ident" id="6179647">next</span><span class="op" id="6179651">(</span><span class="op" id="6179652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179657">hasMantissa</span>&nbsp;<span class="op" id="6179669">:=</span>&nbsp;<span class="builtintype" id="6179672">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179681">for</span>&nbsp;<span class="ident" id="6179685"><a href="/text/scanner/scanner.go.html#6178746">digitVal</a></span><span class="op" id="6179693">(</span><span class="ident" id="6179694"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><span class="op" id="6179696">)</span>&nbsp;<span class="op" id="6179698">&lt;</span>&nbsp;<span class="num" id="6179700">16</span>&nbsp;<span class="op" id="6179703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179709"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6179712">=</span>&nbsp;<span class="ident" id="6179714"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6179715">.</span><span class="ident" id="6179716">next</span><span class="op" id="6179720">(</span><span class="op" id="6179721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179727"><a href="/text/scanner/scanner.go.html#6179657">hasMantissa</a></span>&nbsp;<span class="op" id="6179739">=</span>&nbsp;<span class="builtintype" id="6179741">true</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179754">if</span>&nbsp;<span class="op" id="6179757">!</span><span class="ident" id="6179758"><a href="/text/scanner/scanner.go.html#6179657">hasMantissa</a></span>&nbsp;<span class="op" id="6179770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179776"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6179777">.</span><span class="builtintype" id="6179778">error</span><span class="op" id="6179783">(</span><span class="string" id="6179784">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op" id="6179812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179821">}</span>&nbsp;<span class="keyword" id="6179823">else</span>&nbsp;<span class="op" id="6179828">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6179833">//&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179858">has8or9</span>&nbsp;<span class="op" id="6179866">:=</span>&nbsp;<span class="builtintype" id="6179869">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179878">for</span>&nbsp;<span class="ident" id="6179882"><a href="/text/scanner/scanner.go.html#6179006">isDecimal</a></span><span class="op" id="6179891">(</span><span class="ident" id="6179892"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><span class="op" id="6179894">)</span>&nbsp;<span class="op" id="6179896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179902">if</span>&nbsp;<span class="ident" id="6179905"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6179908">&gt;</span>&nbsp;<span class="string" id="6179910">&#39;7&#39;</span>&nbsp;<span class="op" id="6179914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179921"><a href="/text/scanner/scanner.go.html#6179858">has8or9</a></span>&nbsp;<span class="op" id="6179929">=</span>&nbsp;<span class="builtintype" id="6179931">true</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179946"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6179949">=</span>&nbsp;<span class="ident" id="6179951"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6179952">.</span><span class="ident" id="6179953">next</span><span class="op" id="6179957">(</span><span class="op" id="6179958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179968">if</span>&nbsp;<span class="ident" id="6179971"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6179972">.</span><span class="ident" id="6179973">Mode</span><span class="op" id="6179977">&amp;</span><span class="ident" id="6179978"><a href="/text/scanner/scanner.go.html#6170376">ScanFloats</a></span>&nbsp;<span class="op" id="6179989">!=</span>&nbsp;<span class="num" id="6179992">0</span>&nbsp;<span class="op" id="6179994">&amp;&amp;</span>&nbsp;<span class="op" id="6179997">(</span><span class="ident" id="6179998"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180001">==</span>&nbsp;<span class="string" id="6180004">&#39;.&#39;</span>&nbsp;<span class="op" id="6180008">||</span>&nbsp;<span class="ident" id="6180011"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180014">==</span>&nbsp;<span class="string" id="6180017">&#39;e&#39;</span>&nbsp;<span class="op" id="6180021">||</span>&nbsp;<span class="ident" id="6180024"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180027">==</span>&nbsp;<span class="string" id="6180030">&#39;E&#39;</span><span class="op" id="6180033">)</span>&nbsp;<span class="op" id="6180035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180041">//&nbsp;float</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180054"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180057">=</span>&nbsp;<span class="ident" id="6180059"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6180060">.</span><span class="ident" id="6180061">scanFraction</span><span class="op" id="6180073">(</span><span class="ident" id="6180074"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><span class="op" id="6180076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180082"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180085">=</span>&nbsp;<span class="ident" id="6180087"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6180088">.</span><span class="ident" id="6180089">scanExponent</span><span class="op" id="6180101">(</span><span class="ident" id="6180102"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><span class="op" id="6180104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180110">return</span>&nbsp;<span class="ident" id="6180117"><a href="/text/scanner/scanner.go.html#6170876">Float</a></span><span class="op" id="6180122">,</span>&nbsp;<span class="ident" id="6180124"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6180130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180135">//&nbsp;octal&nbsp;int</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180151">if</span>&nbsp;<span class="ident" id="6180154"><a href="/text/scanner/scanner.go.html#6179858">has8or9</a></span>&nbsp;<span class="op" id="6180162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180168"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6180169">.</span><span class="builtintype" id="6180170">error</span><span class="op" id="6180175">(</span><span class="string" id="6180176">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op" id="6180198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6180203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6180207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180211">return</span>&nbsp;<span class="ident" id="6180218"><a href="/text/scanner/scanner.go.html#6170871">Int</a></span><span class="op" id="6180221">,</span>&nbsp;<span class="ident" id="6180223"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6180227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180230">//&nbsp;decimal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180255"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180258">=</span>&nbsp;<span class="ident" id="6180260"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6180261">.</span><span class="ident" id="6180262">scanMantissa</span><span class="op" id="6180274">(</span><span class="ident" id="6180275"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><span class="op" id="6180277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180280">if</span>&nbsp;<span class="ident" id="6180283"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6180284">.</span><span class="ident" id="6180285">Mode</span><span class="op" id="6180289">&amp;</span><span class="ident" id="6180290"><a href="/text/scanner/scanner.go.html#6170376">ScanFloats</a></span>&nbsp;<span class="op" id="6180301">!=</span>&nbsp;<span class="num" id="6180304">0</span>&nbsp;<span class="op" id="6180306">&amp;&amp;</span>&nbsp;<span class="op" id="6180309">(</span><span class="ident" id="6180310"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180313">==</span>&nbsp;<span class="string" id="6180316">&#39;.&#39;</span>&nbsp;<span class="op" id="6180320">||</span>&nbsp;<span class="ident" id="6180323"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180326">==</span>&nbsp;<span class="string" id="6180329">&#39;e&#39;</span>&nbsp;<span class="op" id="6180333">||</span>&nbsp;<span class="ident" id="6180336"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180339">==</span>&nbsp;<span class="string" id="6180342">&#39;E&#39;</span><span class="op" id="6180345">)</span>&nbsp;<span class="op" id="6180347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180351">//&nbsp;float</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180362"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180365">=</span>&nbsp;<span class="ident" id="6180367"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6180368">.</span><span class="ident" id="6180369">scanFraction</span><span class="op" id="6180381">(</span><span class="ident" id="6180382"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><span class="op" id="6180384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180388"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span>&nbsp;<span class="op" id="6180391">=</span>&nbsp;<span class="ident" id="6180393"><a href="/text/scanner/scanner.go.html#6179470">s</a></span><span class="op" id="6180394">.</span><span class="ident" id="6180395">scanExponent</span><span class="op" id="6180407">(</span><span class="ident" id="6180408"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><span class="op" id="6180410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180414">return</span>&nbsp;<span class="ident" id="6180421"><a href="/text/scanner/scanner.go.html#6170876">Float</a></span><span class="op" id="6180426">,</span>&nbsp;<span class="ident" id="6180428"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6180432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180435">return</span>&nbsp;<span class="ident" id="6180442"><a href="/text/scanner/scanner.go.html#6170871">Int</a></span><span class="op" id="6180445">,</span>&nbsp;<span class="ident" id="6180447"><a href="/text/scanner/scanner.go.html#6179493">ch</a></span><br>
<span class="lineno">450</span><span class="op" id="6180450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6180453">func</span>&nbsp;<span class="op" id="6180458">(</span><span class="ident" id="6180459">s</span>&nbsp;<span class="op" id="6180461">*</span><span class="ident" id="6180462"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6180469">)</span>&nbsp;<span class="ident" id="6180471">scanDigits</span><span class="op" id="6180481">(</span><span class="ident" id="6180482">ch</span>&nbsp;<span class="builtintype" id="6180485">rune</span><span class="op" id="6180489">,</span>&nbsp;<span class="ident" id="6180491">base</span><span class="op" id="6180495">,</span>&nbsp;<span class="ident" id="6180497">n</span>&nbsp;<span class="builtintype" id="6180499">int</span><span class="op" id="6180502">)</span>&nbsp;<span class="builtintype" id="6180504">rune</span>&nbsp;<span class="op" id="6180509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180512">for</span>&nbsp;<span class="ident" id="6180516"><a href="/text/scanner/scanner.go.html#6180497">n</a></span>&nbsp;<span class="op" id="6180518">&gt;</span>&nbsp;<span class="num" id="6180520">0</span>&nbsp;<span class="op" id="6180522">&amp;&amp;</span>&nbsp;<span class="ident" id="6180525"><a href="/text/scanner/scanner.go.html#6178746">digitVal</a></span><span class="op" id="6180533">(</span><span class="ident" id="6180534"><a href="/text/scanner/scanner.go.html#6180482">ch</a></span><span class="op" id="6180536">)</span>&nbsp;<span class="op" id="6180538">&lt;</span>&nbsp;<span class="ident" id="6180540"><a href="/text/scanner/scanner.go.html#6180491">base</a></span>&nbsp;<span class="op" id="6180545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180549"><a href="/text/scanner/scanner.go.html#6180482">ch</a></span>&nbsp;<span class="op" id="6180552">=</span>&nbsp;<span class="ident" id="6180554"><a href="/text/scanner/scanner.go.html#6180459">s</a></span><span class="op" id="6180555">.</span><span class="ident" id="6180556">next</span><span class="op" id="6180560">(</span><span class="op" id="6180561">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180565"><a href="/text/scanner/scanner.go.html#6180497">n</a></span><span class="op" id="6180566">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6180570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180573">if</span>&nbsp;<span class="ident" id="6180576"><a href="/text/scanner/scanner.go.html#6180497">n</a></span>&nbsp;<span class="op" id="6180578">&gt;</span>&nbsp;<span class="num" id="6180580">0</span>&nbsp;<span class="op" id="6180582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180586"><a href="/text/scanner/scanner.go.html#6180459">s</a></span><span class="op" id="6180587">.</span><span class="builtintype" id="6180588">error</span><span class="op" id="6180593">(</span><span class="string" id="6180594">&#34;illegal&nbsp;char&nbsp;escape&#34;</span><span class="op" id="6180615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6180618">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180621">return</span>&nbsp;<span class="ident" id="6180628"><a href="/text/scanner/scanner.go.html#6180482">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6180631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6180634">func</span>&nbsp;<span class="op" id="6180639">(</span><span class="ident" id="6180640">s</span>&nbsp;<span class="op" id="6180642">*</span><span class="ident" id="6180643"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6180650">)</span>&nbsp;<span class="ident" id="6180652">scanEscape</span><span class="op" id="6180662">(</span><span class="ident" id="6180663">quote</span>&nbsp;<span class="builtintype" id="6180669">rune</span><span class="op" id="6180673">)</span>&nbsp;<span class="builtintype" id="6180675">rune</span>&nbsp;<span class="op" id="6180680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180683">ch</span>&nbsp;<span class="op" id="6180686">:=</span>&nbsp;<span class="ident" id="6180689"><a href="/text/scanner/scanner.go.html#6180640">s</a></span><span class="op" id="6180690">.</span><span class="ident" id="6180691">next</span><span class="op" id="6180695">(</span><span class="op" id="6180696">)</span>&nbsp;<span class="comment" id="6180698">//&nbsp;read&nbsp;character&nbsp;after&nbsp;&#39;/&#39;</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180727">switch</span>&nbsp;<span class="ident" id="6180734"><a href="/text/scanner/scanner.go.html#6180683">ch</a></span>&nbsp;<span class="op" id="6180737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180740">case</span>&nbsp;<span class="string" id="6180745">&#39;a&#39;</span><span class="op" id="6180748">,</span>&nbsp;<span class="string" id="6180750">&#39;b&#39;</span><span class="op" id="6180753">,</span>&nbsp;<span class="string" id="6180755">&#39;f&#39;</span><span class="op" id="6180758">,</span>&nbsp;<span class="string" id="6180760">&#39;n&#39;</span><span class="op" id="6180763">,</span>&nbsp;<span class="string" id="6180765">&#39;r&#39;</span><span class="op" id="6180768">,</span>&nbsp;<span class="string" id="6180770">&#39;t&#39;</span><span class="op" id="6180773">,</span>&nbsp;<span class="string" id="6180775">&#39;v&#39;</span><span class="op" id="6180778">,</span>&nbsp;<span class="string" id="6180780">&#39;\\&#39;</span><span class="op" id="6180784">,</span>&nbsp;<span class="ident" id="6180786"><a href="/text/scanner/scanner.go.html#6180663">quote</a></span><span class="op" id="6180791">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180795">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180814"><a href="/text/scanner/scanner.go.html#6180683">ch</a></span>&nbsp;<span class="op" id="6180817">=</span>&nbsp;<span class="ident" id="6180819"><a href="/text/scanner/scanner.go.html#6180640">s</a></span><span class="op" id="6180820">.</span><span class="ident" id="6180821">next</span><span class="op" id="6180825">(</span><span class="op" id="6180826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180829">case</span>&nbsp;<span class="string" id="6180834">&#39;0&#39;</span><span class="op" id="6180837">,</span>&nbsp;<span class="string" id="6180839">&#39;1&#39;</span><span class="op" id="6180842">,</span>&nbsp;<span class="string" id="6180844">&#39;2&#39;</span><span class="op" id="6180847">,</span>&nbsp;<span class="string" id="6180849">&#39;3&#39;</span><span class="op" id="6180852">,</span>&nbsp;<span class="string" id="6180854">&#39;4&#39;</span><span class="op" id="6180857">,</span>&nbsp;<span class="string" id="6180859">&#39;5&#39;</span><span class="op" id="6180862">,</span>&nbsp;<span class="string" id="6180864">&#39;6&#39;</span><span class="op" id="6180867">,</span>&nbsp;<span class="string" id="6180869">&#39;7&#39;</span><span class="op" id="6180872">:</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180876"><a href="/text/scanner/scanner.go.html#6180683">ch</a></span>&nbsp;<span class="op" id="6180879">=</span>&nbsp;<span class="ident" id="6180881"><a href="/text/scanner/scanner.go.html#6180640">s</a></span><span class="op" id="6180882">.</span><span class="ident" id="6180883">scanDigits</span><span class="op" id="6180893">(</span><span class="ident" id="6180894"><a href="/text/scanner/scanner.go.html#6180683">ch</a></span><span class="op" id="6180896">,</span>&nbsp;<span class="num" id="6180898">8</span><span class="op" id="6180899">,</span>&nbsp;<span class="num" id="6180901">3</span><span class="op" id="6180902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180905">case</span>&nbsp;<span class="string" id="6180910">&#39;x&#39;</span><span class="op" id="6180913">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180917"><a href="/text/scanner/scanner.go.html#6180683">ch</a></span>&nbsp;<span class="op" id="6180920">=</span>&nbsp;<span class="ident" id="6180922"><a href="/text/scanner/scanner.go.html#6180640">s</a></span><span class="op" id="6180923">.</span><span class="ident" id="6180924">scanDigits</span><span class="op" id="6180934">(</span><span class="ident" id="6180935"><a href="/text/scanner/scanner.go.html#6180640">s</a></span><span class="op" id="6180936">.</span><span class="ident" id="6180937">next</span><span class="op" id="6180941">(</span><span class="op" id="6180942">)</span><span class="op" id="6180943">,</span>&nbsp;<span class="num" id="6180945">16</span><span class="op" id="6180947">,</span>&nbsp;<span class="num" id="6180949">2</span><span class="op" id="6180950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180953">case</span>&nbsp;<span class="string" id="6180958">&#39;u&#39;</span><span class="op" id="6180961">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180965"><a href="/text/scanner/scanner.go.html#6180683">ch</a></span>&nbsp;<span class="op" id="6180968">=</span>&nbsp;<span class="ident" id="6180970"><a href="/text/scanner/scanner.go.html#6180640">s</a></span><span class="op" id="6180971">.</span><span class="ident" id="6180972">scanDigits</span><span class="op" id="6180982">(</span><span class="ident" id="6180983"><a href="/text/scanner/scanner.go.html#6180640">s</a></span><span class="op" id="6180984">.</span><span class="ident" id="6180985">next</span><span class="op" id="6180989">(</span><span class="op" id="6180990">)</span><span class="op" id="6180991">,</span>&nbsp;<span class="num" id="6180993">16</span><span class="op" id="6180995">,</span>&nbsp;<span class="num" id="6180997">4</span><span class="op" id="6180998">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181001">case</span>&nbsp;<span class="string" id="6181006">&#39;U&#39;</span><span class="op" id="6181009">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181013"><a href="/text/scanner/scanner.go.html#6180683">ch</a></span>&nbsp;<span class="op" id="6181016">=</span>&nbsp;<span class="ident" id="6181018"><a href="/text/scanner/scanner.go.html#6180640">s</a></span><span class="op" id="6181019">.</span><span class="ident" id="6181020">scanDigits</span><span class="op" id="6181030">(</span><span class="ident" id="6181031"><a href="/text/scanner/scanner.go.html#6180640">s</a></span><span class="op" id="6181032">.</span><span class="ident" id="6181033">next</span><span class="op" id="6181037">(</span><span class="op" id="6181038">)</span><span class="op" id="6181039">,</span>&nbsp;<span class="num" id="6181041">16</span><span class="op" id="6181043">,</span>&nbsp;<span class="num" id="6181045">8</span><span class="op" id="6181046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181049">default</span><span class="op" id="6181056">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181060"><a href="/text/scanner/scanner.go.html#6180640">s</a></span><span class="op" id="6181061">.</span><span class="builtintype" id="6181062">error</span><span class="op" id="6181067">(</span><span class="string" id="6181068">&#34;illegal&nbsp;char&nbsp;escape&#34;</span><span class="op" id="6181089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181092">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181095">return</span>&nbsp;<span class="ident" id="6181102"><a href="/text/scanner/scanner.go.html#6180683">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6181105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6181108">func</span>&nbsp;<span class="op" id="6181113">(</span><span class="ident" id="6181114">s</span>&nbsp;<span class="op" id="6181116">*</span><span class="ident" id="6181117"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6181124">)</span>&nbsp;<span class="ident" id="6181126">scanString</span><span class="op" id="6181136">(</span><span class="ident" id="6181137">quote</span>&nbsp;<span class="builtintype" id="6181143">rune</span><span class="op" id="6181147">)</span>&nbsp;<span class="op" id="6181149">(</span><span class="ident" id="6181150">n</span>&nbsp;<span class="builtintype" id="6181152">int</span><span class="op" id="6181155">)</span>&nbsp;<span class="op" id="6181157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181160">ch</span>&nbsp;<span class="op" id="6181163">:=</span>&nbsp;<span class="ident" id="6181166"><a href="/text/scanner/scanner.go.html#6181114">s</a></span><span class="op" id="6181167">.</span><span class="ident" id="6181168">next</span><span class="op" id="6181172">(</span><span class="op" id="6181173">)</span>&nbsp;<span class="comment" id="6181175">//&nbsp;read&nbsp;character&nbsp;after&nbsp;quote</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181206">for</span>&nbsp;<span class="ident" id="6181210"><a href="/text/scanner/scanner.go.html#6181160">ch</a></span>&nbsp;<span class="op" id="6181213">!=</span>&nbsp;<span class="ident" id="6181216"><a href="/text/scanner/scanner.go.html#6181137">quote</a></span>&nbsp;<span class="op" id="6181222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181226">if</span>&nbsp;<span class="ident" id="6181229"><a href="/text/scanner/scanner.go.html#6181160">ch</a></span>&nbsp;<span class="op" id="6181232">==</span>&nbsp;<span class="string" id="6181235">&#39;\n&#39;</span>&nbsp;<span class="op" id="6181240">||</span>&nbsp;<span class="ident" id="6181243"><a href="/text/scanner/scanner.go.html#6181160">ch</a></span>&nbsp;<span class="op" id="6181246">&lt;</span>&nbsp;<span class="num" id="6181248">0</span>&nbsp;<span class="op" id="6181250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181255"><a href="/text/scanner/scanner.go.html#6181114">s</a></span><span class="op" id="6181256">.</span><span class="builtintype" id="6181257">error</span><span class="op" id="6181262">(</span><span class="string" id="6181263">&#34;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="6181287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181292">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181301">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181305">if</span>&nbsp;<span class="ident" id="6181308"><a href="/text/scanner/scanner.go.html#6181160">ch</a></span>&nbsp;<span class="op" id="6181311">==</span>&nbsp;<span class="string" id="6181314">&#39;\\&#39;</span>&nbsp;<span class="op" id="6181319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181324"><a href="/text/scanner/scanner.go.html#6181160">ch</a></span>&nbsp;<span class="op" id="6181327">=</span>&nbsp;<span class="ident" id="6181329"><a href="/text/scanner/scanner.go.html#6181114">s</a></span><span class="op" id="6181330">.</span><span class="ident" id="6181331">scanEscape</span><span class="op" id="6181341">(</span><span class="ident" id="6181342"><a href="/text/scanner/scanner.go.html#6181137">quote</a></span><span class="op" id="6181347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181351">}</span>&nbsp;<span class="keyword" id="6181353">else</span>&nbsp;<span class="op" id="6181358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181363"><a href="/text/scanner/scanner.go.html#6181160">ch</a></span>&nbsp;<span class="op" id="6181366">=</span>&nbsp;<span class="ident" id="6181368"><a href="/text/scanner/scanner.go.html#6181114">s</a></span><span class="op" id="6181369">.</span><span class="ident" id="6181370">next</span><span class="op" id="6181374">(</span><span class="op" id="6181375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181379">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181383"><a href="/text/scanner/scanner.go.html#6181150">n</a></span><span class="op" id="6181384">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181391">return</span><br>
<span class="lineno"></span><span class="op" id="6181398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="6181401">func</span>&nbsp;<span class="op" id="6181406">(</span><span class="ident" id="6181407">s</span>&nbsp;<span class="op" id="6181409">*</span><span class="ident" id="6181410"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6181417">)</span>&nbsp;<span class="ident" id="6181419">scanRawString</span><span class="op" id="6181432">(</span><span class="op" id="6181433">)</span>&nbsp;<span class="op" id="6181435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181438">ch</span>&nbsp;<span class="op" id="6181441">:=</span>&nbsp;<span class="ident" id="6181444"><a href="/text/scanner/scanner.go.html#6181407">s</a></span><span class="op" id="6181445">.</span><span class="ident" id="6181446">next</span><span class="op" id="6181450">(</span><span class="op" id="6181451">)</span>&nbsp;<span class="comment" id="6181453">//&nbsp;read&nbsp;character&nbsp;after&nbsp;&#39;`&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181482">for</span>&nbsp;<span class="ident" id="6181486"><a href="/text/scanner/scanner.go.html#6181438">ch</a></span>&nbsp;<span class="op" id="6181489">!=</span>&nbsp;<span class="string" id="6181492">&#39;`&#39;</span>&nbsp;<span class="op" id="6181496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181500">if</span>&nbsp;<span class="ident" id="6181503"><a href="/text/scanner/scanner.go.html#6181438">ch</a></span>&nbsp;<span class="op" id="6181506">&lt;</span>&nbsp;<span class="num" id="6181508">0</span>&nbsp;<span class="op" id="6181510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181515"><a href="/text/scanner/scanner.go.html#6181407">s</a></span><span class="op" id="6181516">.</span><span class="builtintype" id="6181517">error</span><span class="op" id="6181522">(</span><span class="string" id="6181523">&#34;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="6181547">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181552">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181565"><a href="/text/scanner/scanner.go.html#6181438">ch</a></span>&nbsp;<span class="op" id="6181568">=</span>&nbsp;<span class="ident" id="6181570"><a href="/text/scanner/scanner.go.html#6181407">s</a></span><span class="op" id="6181571">.</span><span class="ident" id="6181572">next</span><span class="op" id="6181576">(</span><span class="op" id="6181577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181580">}</span><br>
<span class="lineno"></span><span class="op" id="6181582">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span><span class="keyword" id="6181585">func</span>&nbsp;<span class="op" id="6181590">(</span><span class="ident" id="6181591">s</span>&nbsp;<span class="op" id="6181593">*</span><span class="ident" id="6181594"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6181601">)</span>&nbsp;<span class="ident" id="6181603">scanChar</span><span class="op" id="6181611">(</span><span class="op" id="6181612">)</span>&nbsp;<span class="op" id="6181614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181617">if</span>&nbsp;<span class="ident" id="6181620"><a href="/text/scanner/scanner.go.html#6181591">s</a></span><span class="op" id="6181621">.</span><span class="ident" id="6181622">scanString</span><span class="op" id="6181632">(</span><span class="string" id="6181633">&#39;\&#39;&#39;</span><span class="op" id="6181637">)</span>&nbsp;<span class="op" id="6181639">!=</span>&nbsp;<span class="num" id="6181642">1</span>&nbsp;<span class="op" id="6181644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181648"><a href="/text/scanner/scanner.go.html#6181591">s</a></span><span class="op" id="6181649">.</span><span class="builtintype" id="6181650">error</span><span class="op" id="6181655">(</span><span class="string" id="6181656">&#34;illegal&nbsp;char&nbsp;literal&#34;</span><span class="op" id="6181678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181681">}</span><br>
<span class="lineno">515</span><span class="op" id="6181683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6181686">func</span>&nbsp;<span class="op" id="6181691">(</span><span class="ident" id="6181692">s</span>&nbsp;<span class="op" id="6181694">*</span><span class="ident" id="6181695"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6181702">)</span>&nbsp;<span class="ident" id="6181704">scanComment</span><span class="op" id="6181715">(</span><span class="ident" id="6181716">ch</span>&nbsp;<span class="builtintype" id="6181719">rune</span><span class="op" id="6181723">)</span>&nbsp;<span class="builtintype" id="6181725">rune</span>&nbsp;<span class="op" id="6181730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181733">//&nbsp;ch&nbsp;==&nbsp;&#39;/&#39;&nbsp;||&nbsp;ch&nbsp;==&nbsp;&#39;*&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181760">if</span>&nbsp;<span class="ident" id="6181763"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span>&nbsp;<span class="op" id="6181766">==</span>&nbsp;<span class="string" id="6181769">&#39;/&#39;</span>&nbsp;<span class="op" id="6181773">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181777">//&nbsp;line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181795"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span>&nbsp;<span class="op" id="6181798">=</span>&nbsp;<span class="ident" id="6181800"><a href="/text/scanner/scanner.go.html#6181692">s</a></span><span class="op" id="6181801">.</span><span class="ident" id="6181802">next</span><span class="op" id="6181806">(</span><span class="op" id="6181807">)</span>&nbsp;<span class="comment" id="6181809">//&nbsp;read&nbsp;character&nbsp;after&nbsp;&#34;//&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181840">for</span>&nbsp;<span class="ident" id="6181844"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span>&nbsp;<span class="op" id="6181847">!=</span>&nbsp;<span class="string" id="6181850">&#39;\n&#39;</span>&nbsp;<span class="op" id="6181855">&amp;&amp;</span>&nbsp;<span class="ident" id="6181858"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span>&nbsp;<span class="op" id="6181861">&gt;=</span>&nbsp;<span class="num" id="6181864">0</span>&nbsp;<span class="op" id="6181866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181871"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span>&nbsp;<span class="op" id="6181874">=</span>&nbsp;<span class="ident" id="6181876"><a href="/text/scanner/scanner.go.html#6181692">s</a></span><span class="op" id="6181877">.</span><span class="ident" id="6181878">next</span><span class="op" id="6181882">(</span><span class="op" id="6181883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181887">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181891">return</span>&nbsp;<span class="ident" id="6181898"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181906">//&nbsp;general&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181926"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span>&nbsp;<span class="op" id="6181929">=</span>&nbsp;<span class="ident" id="6181931"><a href="/text/scanner/scanner.go.html#6181692">s</a></span><span class="op" id="6181932">.</span><span class="ident" id="6181933">next</span><span class="op" id="6181937">(</span><span class="op" id="6181938">)</span>&nbsp;<span class="comment" id="6181940">//&nbsp;read&nbsp;character&nbsp;after&nbsp;&#34;/*&#34;</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181970">for</span>&nbsp;<span class="op" id="6181974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181978">if</span>&nbsp;<span class="ident" id="6181981"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span>&nbsp;<span class="op" id="6181984">&lt;</span>&nbsp;<span class="num" id="6181986">0</span>&nbsp;<span class="op" id="6181988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181993"><a href="/text/scanner/scanner.go.html#6181692">s</a></span><span class="op" id="6181994">.</span><span class="builtintype" id="6181995">error</span><span class="op" id="6182000">(</span><span class="string" id="6182001">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="6182025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182030">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182038">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182042">ch0</span>&nbsp;<span class="op" id="6182046">:=</span>&nbsp;<span class="ident" id="6182049"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182054"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span>&nbsp;<span class="op" id="6182057">=</span>&nbsp;<span class="ident" id="6182059"><a href="/text/scanner/scanner.go.html#6181692">s</a></span><span class="op" id="6182060">.</span><span class="ident" id="6182061">next</span><span class="op" id="6182065">(</span><span class="op" id="6182066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182070">if</span>&nbsp;<span class="ident" id="6182073"><a href="/text/scanner/scanner.go.html#6182042">ch0</a></span>&nbsp;<span class="op" id="6182077">==</span>&nbsp;<span class="string" id="6182080">&#39;*&#39;</span>&nbsp;<span class="op" id="6182084">&amp;&amp;</span>&nbsp;<span class="ident" id="6182087"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span>&nbsp;<span class="op" id="6182090">==</span>&nbsp;<span class="string" id="6182093">&#39;/&#39;</span>&nbsp;<span class="op" id="6182097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182102"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span>&nbsp;<span class="op" id="6182105">=</span>&nbsp;<span class="ident" id="6182107"><a href="/text/scanner/scanner.go.html#6181692">s</a></span><span class="op" id="6182108">.</span><span class="ident" id="6182109">next</span><span class="op" id="6182113">(</span><span class="op" id="6182114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182119">break</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182133">return</span>&nbsp;<span class="ident" id="6182140"><a href="/text/scanner/scanner.go.html#6181716">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6182143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span><span class="comment" id="6182146">//&nbsp;Scan&nbsp;reads&nbsp;the&nbsp;next&nbsp;token&nbsp;or&nbsp;Unicode&nbsp;character&nbsp;from&nbsp;source&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="6182224">//&nbsp;It&nbsp;only&nbsp;recognizes&nbsp;tokens&nbsp;t&nbsp;for&nbsp;which&nbsp;the&nbsp;respective&nbsp;Mode&nbsp;bit&nbsp;(1&lt;&lt;-t)&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="comment" id="6182305">//&nbsp;It&nbsp;returns&nbsp;EOF&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;source.&nbsp;It&nbsp;reports&nbsp;scanner&nbsp;errors&nbsp;(read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6182385">//&nbsp;token&nbsp;errors)&nbsp;by&nbsp;calling&nbsp;s.Error,&nbsp;if&nbsp;not&nbsp;nil;&nbsp;otherwise&nbsp;it&nbsp;prints&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="6182463">//&nbsp;message&nbsp;to&nbsp;os.Stderr.</span><br>
<span class="lineno">550</span><span class="keyword" id="6182488">func</span>&nbsp;<span class="op" id="6182493">(</span><span class="ident" id="6182494">s</span>&nbsp;<span class="op" id="6182496">*</span><span class="ident" id="6182497"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6182504">)</span>&nbsp;<span class="ident" id="6182506">Scan</span><span class="op" id="6182510">(</span><span class="op" id="6182511">)</span>&nbsp;<span class="builtintype" id="6182513">rune</span>&nbsp;<span class="op" id="6182518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182521">ch</span>&nbsp;<span class="op" id="6182524">:=</span>&nbsp;<span class="ident" id="6182527"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182528">.</span><span class="ident" id="6182529">Peek</span><span class="op" id="6182533">(</span><span class="op" id="6182534">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182538">//&nbsp;reset&nbsp;token&nbsp;text&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182568"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182569">.</span><span class="ident" id="6182570">tokPos</span>&nbsp;<span class="op" id="6182577">=</span>&nbsp;<span class="op" id="6182579">-</span><span class="num" id="6182580">1</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182583"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182584">.</span><span class="ident" id="6182585">Line</span>&nbsp;<span class="op" id="6182590">=</span>&nbsp;<span class="num" id="6182592">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="6182595">redo</span><span class="op" id="6182599">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182602">//&nbsp;skip&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182623">for</span>&nbsp;<span class="ident" id="6182627"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182628">.</span><span class="ident" id="6182629">Whitespace</span><span class="op" id="6182639">&amp;</span><span class="op" id="6182640">(</span><span class="num" id="6182641">1</span><span class="op" id="6182642">&lt;&lt;</span><span class="builtintype" id="6182644">uint</span><span class="op" id="6182648">(</span><span class="ident" id="6182649"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><span class="op" id="6182651">)</span><span class="op" id="6182652">)</span>&nbsp;<span class="op" id="6182654">!=</span>&nbsp;<span class="num" id="6182657">0</span>&nbsp;<span class="op" id="6182659">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182663"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6182666">=</span>&nbsp;<span class="ident" id="6182668"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182669">.</span><span class="ident" id="6182670">next</span><span class="op" id="6182674">(</span><span class="op" id="6182675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182682">//&nbsp;start&nbsp;collecting&nbsp;token&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182714"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182715">.</span><span class="ident" id="6182716">tokBuf</span><span class="op" id="6182722">.</span><span class="ident" id="6182723">Reset</span><span class="op" id="6182728">(</span><span class="op" id="6182729">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182732"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182733">.</span><span class="ident" id="6182734">tokPos</span>&nbsp;<span class="op" id="6182741">=</span>&nbsp;<span class="ident" id="6182743"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182744">.</span><span class="ident" id="6182745">srcPos</span>&nbsp;<span class="op" id="6182752">-</span>&nbsp;<span class="ident" id="6182754"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182755">.</span><span class="ident" id="6182756">lastCharLen</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182770">//&nbsp;set&nbsp;token&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182793">//&nbsp;(this&nbsp;is&nbsp;a&nbsp;slightly&nbsp;optimized&nbsp;version&nbsp;of&nbsp;the&nbsp;code&nbsp;in&nbsp;Pos())</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182857"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182858">.</span><span class="ident" id="6182859">Offset</span>&nbsp;<span class="op" id="6182866">=</span>&nbsp;<span class="ident" id="6182868"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182869">.</span><span class="ident" id="6182870">srcBufOffset</span>&nbsp;<span class="op" id="6182883">+</span>&nbsp;<span class="ident" id="6182885"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182886">.</span><span class="ident" id="6182887">tokPos</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182895">if</span>&nbsp;<span class="ident" id="6182898"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182899">.</span><span class="ident" id="6182900">column</span>&nbsp;<span class="op" id="6182907">&gt;</span>&nbsp;<span class="num" id="6182909">0</span>&nbsp;<span class="op" id="6182911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182915">//&nbsp;common&nbsp;case:&nbsp;last&nbsp;character&nbsp;was&nbsp;not&nbsp;a&nbsp;&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182963"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182964">.</span><span class="ident" id="6182965">Line</span>&nbsp;<span class="op" id="6182970">=</span>&nbsp;<span class="ident" id="6182972"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182973">.</span><span class="ident" id="6182974">line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182981"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182982">.</span><span class="ident" id="6182983">Column</span>&nbsp;<span class="op" id="6182990">=</span>&nbsp;<span class="ident" id="6182992"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6182993">.</span><span class="ident" id="6182994">column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183002">}</span>&nbsp;<span class="keyword" id="6183004">else</span>&nbsp;<span class="op" id="6183009">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6183013">//&nbsp;last&nbsp;character&nbsp;was&nbsp;a&nbsp;&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6183044">//&nbsp;(we&nbsp;cannot&nbsp;be&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6183094">//&nbsp;since&nbsp;we&nbsp;have&nbsp;called&nbsp;next()&nbsp;at&nbsp;least&nbsp;once)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183142"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183143">.</span><span class="ident" id="6183144">Line</span>&nbsp;<span class="op" id="6183149">=</span>&nbsp;<span class="ident" id="6183151"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183152">.</span><span class="ident" id="6183153">line</span>&nbsp;<span class="op" id="6183158">-</span>&nbsp;<span class="num" id="6183160">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183164"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183165">.</span><span class="ident" id="6183166">Column</span>&nbsp;<span class="op" id="6183173">=</span>&nbsp;<span class="ident" id="6183175"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183176">.</span><span class="ident" id="6183177">lastLineLen</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6183194">//&nbsp;determine&nbsp;token&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183220">tok</span>&nbsp;<span class="op" id="6183224">:=</span>&nbsp;<span class="ident" id="6183227"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183231">switch</span>&nbsp;<span class="op" id="6183238">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183241">case</span>&nbsp;<span class="ident" id="6183246"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183247">.</span><span class="ident" id="6183248">isIdentRune</span><span class="op" id="6183259">(</span><span class="ident" id="6183260"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><span class="op" id="6183262">,</span>&nbsp;<span class="num" id="6183264">0</span><span class="op" id="6183265">)</span><span class="op" id="6183266">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183270">if</span>&nbsp;<span class="ident" id="6183273"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183274">.</span><span class="ident" id="6183275">Mode</span><span class="op" id="6183279">&amp;</span><span class="ident" id="6183280"><a href="/text/scanner/scanner.go.html#6170318">ScanIdents</a></span>&nbsp;<span class="op" id="6183291">!=</span>&nbsp;<span class="num" id="6183294">0</span>&nbsp;<span class="op" id="6183296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183301"><a href="/text/scanner/scanner.go.html#6183220">tok</a></span>&nbsp;<span class="op" id="6183305">=</span>&nbsp;<span class="ident" id="6183307"><a href="/text/scanner/scanner.go.html#6170864">Ident</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183316"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183319">=</span>&nbsp;<span class="ident" id="6183321"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183322">.</span><span class="ident" id="6183323">scanIdentifier</span><span class="op" id="6183337">(</span><span class="op" id="6183338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183342">}</span>&nbsp;<span class="keyword" id="6183344">else</span>&nbsp;<span class="op" id="6183349">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183354"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183357">=</span>&nbsp;<span class="ident" id="6183359"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183360">.</span><span class="ident" id="6183361">next</span><span class="op" id="6183365">(</span><span class="op" id="6183366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183373">case</span>&nbsp;<span class="ident" id="6183378"><a href="/text/scanner/scanner.go.html#6179006">isDecimal</a></span><span class="op" id="6183387">(</span><span class="ident" id="6183388"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><span class="op" id="6183390">)</span><span class="op" id="6183391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183395">if</span>&nbsp;<span class="ident" id="6183398"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183399">.</span><span class="ident" id="6183400">Mode</span><span class="op" id="6183404">&amp;</span><span class="op" id="6183405">(</span><span class="ident" id="6183406"><a href="/text/scanner/scanner.go.html#6170348">ScanInts</a></span><span class="op" id="6183414">|</span><span class="ident" id="6183415"><a href="/text/scanner/scanner.go.html#6170376">ScanFloats</a></span><span class="op" id="6183425">)</span>&nbsp;<span class="op" id="6183427">!=</span>&nbsp;<span class="num" id="6183430">0</span>&nbsp;<span class="op" id="6183432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183437"><a href="/text/scanner/scanner.go.html#6183220">tok</a></span><span class="op" id="6183440">,</span>&nbsp;<span class="ident" id="6183442"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183445">=</span>&nbsp;<span class="ident" id="6183447"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183448">.</span><span class="ident" id="6183449">scanNumber</span><span class="op" id="6183459">(</span><span class="ident" id="6183460"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><span class="op" id="6183462">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183466">}</span>&nbsp;<span class="keyword" id="6183468">else</span>&nbsp;<span class="op" id="6183473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183478"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183481">=</span>&nbsp;<span class="ident" id="6183483"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183484">.</span><span class="ident" id="6183485">next</span><span class="op" id="6183489">(</span><span class="op" id="6183490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183497">default</span><span class="op" id="6183504">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183508">switch</span>&nbsp;<span class="ident" id="6183515"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183518">{</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183522">case</span>&nbsp;<span class="string" id="6183527">&#39;&#34;&#39;</span><span class="op" id="6183530">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183535">if</span>&nbsp;<span class="ident" id="6183538"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183539">.</span><span class="ident" id="6183540">Mode</span><span class="op" id="6183544">&amp;</span><span class="ident" id="6183545"><a href="/text/scanner/scanner.go.html#6170452">ScanStrings</a></span>&nbsp;<span class="op" id="6183557">!=</span>&nbsp;<span class="num" id="6183560">0</span>&nbsp;<span class="op" id="6183562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183568"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183569">.</span><span class="ident" id="6183570">scanString</span><span class="op" id="6183580">(</span><span class="string" id="6183581">&#39;&#34;&#39;</span><span class="op" id="6183584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183590"><a href="/text/scanner/scanner.go.html#6183220">tok</a></span>&nbsp;<span class="op" id="6183594">=</span>&nbsp;<span class="ident" id="6183596"><a href="/text/scanner/scanner.go.html#6170889">String</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183606">}</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183611"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183614">=</span>&nbsp;<span class="ident" id="6183616"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183617">.</span><span class="ident" id="6183618">next</span><span class="op" id="6183622">(</span><span class="op" id="6183623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183627">case</span>&nbsp;<span class="string" id="6183632">&#39;\&#39;&#39;</span><span class="op" id="6183636">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183641">if</span>&nbsp;<span class="ident" id="6183644"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183645">.</span><span class="ident" id="6183646">Mode</span><span class="op" id="6183650">&amp;</span><span class="ident" id="6183651"><a href="/text/scanner/scanner.go.html#6170423">ScanChars</a></span>&nbsp;<span class="op" id="6183661">!=</span>&nbsp;<span class="num" id="6183664">0</span>&nbsp;<span class="op" id="6183666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183672"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183673">.</span><span class="ident" id="6183674">scanChar</span><span class="op" id="6183682">(</span><span class="op" id="6183683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183689"><a href="/text/scanner/scanner.go.html#6183220">tok</a></span>&nbsp;<span class="op" id="6183693">=</span>&nbsp;<span class="ident" id="6183695"><a href="/text/scanner/scanner.go.html#6170883">Char</a></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183708"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183711">=</span>&nbsp;<span class="ident" id="6183713"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183714">.</span><span class="ident" id="6183715">next</span><span class="op" id="6183719">(</span><span class="op" id="6183720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183724">case</span>&nbsp;<span class="string" id="6183729">&#39;.&#39;</span><span class="op" id="6183732">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183737"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183740">=</span>&nbsp;<span class="ident" id="6183742"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183743">.</span><span class="ident" id="6183744">next</span><span class="op" id="6183748">(</span><span class="op" id="6183749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183754">if</span>&nbsp;<span class="ident" id="6183757"><a href="/text/scanner/scanner.go.html#6179006">isDecimal</a></span><span class="op" id="6183766">(</span><span class="ident" id="6183767"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><span class="op" id="6183769">)</span>&nbsp;<span class="op" id="6183771">&amp;&amp;</span>&nbsp;<span class="ident" id="6183774"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183775">.</span><span class="ident" id="6183776">Mode</span><span class="op" id="6183780">&amp;</span><span class="ident" id="6183781"><a href="/text/scanner/scanner.go.html#6170376">ScanFloats</a></span>&nbsp;<span class="op" id="6183792">!=</span>&nbsp;<span class="num" id="6183795">0</span>&nbsp;<span class="op" id="6183797">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183803"><a href="/text/scanner/scanner.go.html#6183220">tok</a></span>&nbsp;<span class="op" id="6183807">=</span>&nbsp;<span class="ident" id="6183809"><a href="/text/scanner/scanner.go.html#6170876">Float</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183819"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183822">=</span>&nbsp;<span class="ident" id="6183824"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183825">.</span><span class="ident" id="6183826">scanMantissa</span><span class="op" id="6183838">(</span><span class="ident" id="6183839"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><span class="op" id="6183841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183847"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183850">=</span>&nbsp;<span class="ident" id="6183852"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183853">.</span><span class="ident" id="6183854">scanExponent</span><span class="op" id="6183866">(</span><span class="ident" id="6183867"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><span class="op" id="6183869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183878">case</span>&nbsp;<span class="string" id="6183883">&#39;/&#39;</span><span class="op" id="6183886">:</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183891"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183894">=</span>&nbsp;<span class="ident" id="6183896"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183897">.</span><span class="ident" id="6183898">next</span><span class="op" id="6183902">(</span><span class="op" id="6183903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183908">if</span>&nbsp;<span class="op" id="6183911">(</span><span class="ident" id="6183912"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183915">==</span>&nbsp;<span class="string" id="6183918">&#39;/&#39;</span>&nbsp;<span class="op" id="6183922">||</span>&nbsp;<span class="ident" id="6183925"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6183928">==</span>&nbsp;<span class="string" id="6183931">&#39;*&#39;</span><span class="op" id="6183934">)</span>&nbsp;<span class="op" id="6183936">&amp;&amp;</span>&nbsp;<span class="ident" id="6183939"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183940">.</span><span class="ident" id="6183941">Mode</span><span class="op" id="6183945">&amp;</span><span class="ident" id="6183946"><a href="/text/scanner/scanner.go.html#6170517">ScanComments</a></span>&nbsp;<span class="op" id="6183959">!=</span>&nbsp;<span class="num" id="6183962">0</span>&nbsp;<span class="op" id="6183964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183970">if</span>&nbsp;<span class="ident" id="6183973"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6183974">.</span><span class="ident" id="6183975">Mode</span><span class="op" id="6183979">&amp;</span><span class="ident" id="6183980"><a href="/text/scanner/scanner.go.html#6170549">SkipComments</a></span>&nbsp;<span class="op" id="6183993">!=</span>&nbsp;<span class="num" id="6183996">0</span>&nbsp;<span class="op" id="6183998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184005"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184006">.</span><span class="ident" id="6184007">tokPos</span>&nbsp;<span class="op" id="6184014">=</span>&nbsp;<span class="op" id="6184016">-</span><span class="num" id="6184017">1</span>&nbsp;<span class="comment" id="6184019">//&nbsp;don&#39;t&nbsp;collect&nbsp;token&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184052"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6184055">=</span>&nbsp;<span class="ident" id="6184057"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184058">.</span><span class="ident" id="6184059">scanComment</span><span class="op" id="6184070">(</span><span class="ident" id="6184071"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><span class="op" id="6184073">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184080">goto</span>&nbsp;<span class="ident" id="6184085">redo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184100"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6184103">=</span>&nbsp;<span class="ident" id="6184105"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184106">.</span><span class="ident" id="6184107">scanComment</span><span class="op" id="6184118">(</span><span class="ident" id="6184119"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><span class="op" id="6184121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184127"><a href="/text/scanner/scanner.go.html#6183220">tok</a></span>&nbsp;<span class="op" id="6184131">=</span>&nbsp;<span class="ident" id="6184133"><a href="/text/scanner/scanner.go.html#6170908">Comment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184144">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184148">case</span>&nbsp;<span class="string" id="6184153">&#39;`&#39;</span><span class="op" id="6184156">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184161">if</span>&nbsp;<span class="ident" id="6184164"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184165">.</span><span class="ident" id="6184166">Mode</span><span class="op" id="6184170">&amp;</span><span class="ident" id="6184171"><a href="/text/scanner/scanner.go.html#6170483">ScanRawStrings</a></span>&nbsp;<span class="op" id="6184186">!=</span>&nbsp;<span class="num" id="6184189">0</span>&nbsp;<span class="op" id="6184191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184197"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184198">.</span><span class="ident" id="6184199">scanRawString</span><span class="op" id="6184212">(</span><span class="op" id="6184213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184219"><a href="/text/scanner/scanner.go.html#6183220">tok</a></span>&nbsp;<span class="op" id="6184223">=</span>&nbsp;<span class="ident" id="6184225"><a href="/text/scanner/scanner.go.html#6170889">String</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184235">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184240"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6184243">=</span>&nbsp;<span class="ident" id="6184245"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184246">.</span><span class="ident" id="6184247">next</span><span class="op" id="6184251">(</span><span class="op" id="6184252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184256">default</span><span class="op" id="6184263">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184268"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span>&nbsp;<span class="op" id="6184271">=</span>&nbsp;<span class="ident" id="6184273"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184274">.</span><span class="ident" id="6184275">next</span><span class="op" id="6184279">(</span><span class="op" id="6184280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184287">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6184291">//&nbsp;end&nbsp;of&nbsp;token&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184313"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184314">.</span><span class="ident" id="6184315">tokEnd</span>&nbsp;<span class="op" id="6184322">=</span>&nbsp;<span class="ident" id="6184324"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184325">.</span><span class="ident" id="6184326">srcPos</span>&nbsp;<span class="op" id="6184333">-</span>&nbsp;<span class="ident" id="6184335"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184336">.</span><span class="ident" id="6184337">lastCharLen</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184351"><a href="/text/scanner/scanner.go.html#6182494">s</a></span><span class="op" id="6184352">.</span><span class="ident" id="6184353">ch</span>&nbsp;<span class="op" id="6184356">=</span>&nbsp;<span class="ident" id="6184358"><a href="/text/scanner/scanner.go.html#6182521">ch</a></span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184362">return</span>&nbsp;<span class="ident" id="6184369"><a href="/text/scanner/scanner.go.html#6183220">tok</a></span><br>
<span class="lineno"></span><span class="op" id="6184373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6184376">//&nbsp;Pos&nbsp;returns&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;character&nbsp;immediately&nbsp;after</span><br>
<span class="lineno"></span><span class="comment" id="6184439">//&nbsp;the&nbsp;character&nbsp;or&nbsp;token&nbsp;returned&nbsp;by&nbsp;the&nbsp;last&nbsp;call&nbsp;to&nbsp;Next&nbsp;or&nbsp;Scan.</span><br>
<span class="lineno">650</span><span class="keyword" id="6184508">func</span>&nbsp;<span class="op" id="6184513">(</span><span class="ident" id="6184514">s</span>&nbsp;<span class="op" id="6184516">*</span><span class="ident" id="6184517"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6184524">)</span>&nbsp;<span class="ident" id="6184526">Pos</span><span class="op" id="6184529">(</span><span class="op" id="6184530">)</span>&nbsp;<span class="op" id="6184532">(</span><span class="ident" id="6184533">pos</span>&nbsp;<span class="ident" id="6184537"><a href="/text/scanner/scanner.go.html#6169157">Position</a></span><span class="op" id="6184545">)</span>&nbsp;<span class="op" id="6184547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184550"><a href="/text/scanner/scanner.go.html#6184533">pos</a></span><span class="op" id="6184553">.</span><span class="ident" id="6184554">Filename</span>&nbsp;<span class="op" id="6184563">=</span>&nbsp;<span class="ident" id="6184565"><a href="/text/scanner/scanner.go.html#6184514">s</a></span><span class="op" id="6184566">.</span><span class="ident" id="6184567">Filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184577"><a href="/text/scanner/scanner.go.html#6184533">pos</a></span><span class="op" id="6184580">.</span><span class="ident" id="6184581">Offset</span>&nbsp;<span class="op" id="6184588">=</span>&nbsp;<span class="ident" id="6184590"><a href="/text/scanner/scanner.go.html#6184514">s</a></span><span class="op" id="6184591">.</span><span class="ident" id="6184592">srcBufOffset</span>&nbsp;<span class="op" id="6184605">+</span>&nbsp;<span class="ident" id="6184607"><a href="/text/scanner/scanner.go.html#6184514">s</a></span><span class="op" id="6184608">.</span><span class="ident" id="6184609">srcPos</span>&nbsp;<span class="op" id="6184616">-</span>&nbsp;<span class="ident" id="6184618"><a href="/text/scanner/scanner.go.html#6184514">s</a></span><span class="op" id="6184619">.</span><span class="ident" id="6184620">lastCharLen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184633">switch</span>&nbsp;<span class="op" id="6184640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184643">case</span>&nbsp;<span class="ident" id="6184648"><a href="/text/scanner/scanner.go.html#6184514">s</a></span><span class="op" id="6184649">.</span><span class="ident" id="6184650">column</span>&nbsp;<span class="op" id="6184657">&gt;</span>&nbsp;<span class="num" id="6184659">0</span><span class="op" id="6184660">:</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6184664">//&nbsp;common&nbsp;case:&nbsp;last&nbsp;character&nbsp;was&nbsp;not&nbsp;a&nbsp;&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184712"><a href="/text/scanner/scanner.go.html#6184533">pos</a></span><span class="op" id="6184715">.</span><span class="ident" id="6184716">Line</span>&nbsp;<span class="op" id="6184721">=</span>&nbsp;<span class="ident" id="6184723"><a href="/text/scanner/scanner.go.html#6184514">s</a></span><span class="op" id="6184724">.</span><span class="ident" id="6184725">line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184732"><a href="/text/scanner/scanner.go.html#6184533">pos</a></span><span class="op" id="6184735">.</span><span class="ident" id="6184736">Column</span>&nbsp;<span class="op" id="6184743">=</span>&nbsp;<span class="ident" id="6184745"><a href="/text/scanner/scanner.go.html#6184514">s</a></span><span class="op" id="6184746">.</span><span class="ident" id="6184747">column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184755">case</span>&nbsp;<span class="ident" id="6184760"><a href="/text/scanner/scanner.go.html#6184514">s</a></span><span class="op" id="6184761">.</span><span class="ident" id="6184762">lastLineLen</span>&nbsp;<span class="op" id="6184774">&gt;</span>&nbsp;<span class="num" id="6184776">0</span><span class="op" id="6184777">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6184781">//&nbsp;last&nbsp;character&nbsp;was&nbsp;a&nbsp;&#39;\n&#39;</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184812"><a href="/text/scanner/scanner.go.html#6184533">pos</a></span><span class="op" id="6184815">.</span><span class="ident" id="6184816">Line</span>&nbsp;<span class="op" id="6184821">=</span>&nbsp;<span class="ident" id="6184823"><a href="/text/scanner/scanner.go.html#6184514">s</a></span><span class="op" id="6184824">.</span><span class="ident" id="6184825">line</span>&nbsp;<span class="op" id="6184830">-</span>&nbsp;<span class="num" id="6184832">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184836"><a href="/text/scanner/scanner.go.html#6184533">pos</a></span><span class="op" id="6184839">.</span><span class="ident" id="6184840">Column</span>&nbsp;<span class="op" id="6184847">=</span>&nbsp;<span class="ident" id="6184849"><a href="/text/scanner/scanner.go.html#6184514">s</a></span><span class="op" id="6184850">.</span><span class="ident" id="6184851">lastLineLen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184864">default</span><span class="op" id="6184871">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6184875">//&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184911"><a href="/text/scanner/scanner.go.html#6184533">pos</a></span><span class="op" id="6184914">.</span><span class="ident" id="6184915">Line</span>&nbsp;<span class="op" id="6184920">=</span>&nbsp;<span class="num" id="6184922">1</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184926"><a href="/text/scanner/scanner.go.html#6184533">pos</a></span><span class="op" id="6184929">.</span><span class="ident" id="6184930">Column</span>&nbsp;<span class="op" id="6184937">=</span>&nbsp;<span class="num" id="6184939">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184945">return</span><br>
<span class="lineno"></span><span class="op" id="6184952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">670</span><span class="comment" id="6184955">//&nbsp;TokenText&nbsp;returns&nbsp;the&nbsp;string&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;most&nbsp;recently&nbsp;scanned&nbsp;token.</span><br>
<span class="lineno"></span><span class="comment" id="6185037">//&nbsp;Valid&nbsp;after&nbsp;calling&nbsp;Scan().</span><br>
<span class="lineno"></span><span class="keyword" id="6185068">func</span>&nbsp;<span class="op" id="6185073">(</span><span class="ident" id="6185074">s</span>&nbsp;<span class="op" id="6185076">*</span><span class="ident" id="6185077"><a href="/text/scanner/scanner.go.html#6171666">Scanner</a></span><span class="op" id="6185084">)</span>&nbsp;<span class="ident" id="6185086">TokenText</span><span class="op" id="6185095">(</span><span class="op" id="6185096">)</span>&nbsp;<span class="builtintype" id="6185098">string</span>&nbsp;<span class="op" id="6185105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185108">if</span>&nbsp;<span class="ident" id="6185111"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185112">.</span><span class="ident" id="6185113">tokPos</span>&nbsp;<span class="op" id="6185120">&lt;</span>&nbsp;<span class="num" id="6185122">0</span>&nbsp;<span class="op" id="6185124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185128">//&nbsp;no&nbsp;token&nbsp;text</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185147">return</span>&nbsp;<span class="string" id="6185154">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6185158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185162">if</span>&nbsp;<span class="ident" id="6185165"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185166">.</span><span class="ident" id="6185167">tokEnd</span>&nbsp;<span class="op" id="6185174">&lt;</span>&nbsp;<span class="num" id="6185176">0</span>&nbsp;<span class="op" id="6185178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185182">//&nbsp;if&nbsp;EOF&nbsp;was&nbsp;reached,&nbsp;s.tokEnd&nbsp;is&nbsp;set&nbsp;to&nbsp;-1&nbsp;(s.srcPos&nbsp;==&nbsp;0)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185245"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185246">.</span><span class="ident" id="6185247">tokEnd</span>&nbsp;<span class="op" id="6185254">=</span>&nbsp;<span class="ident" id="6185256"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185257">.</span><span class="ident" id="6185258">tokPos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6185266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185270">if</span>&nbsp;<span class="ident" id="6185273"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185274">.</span><span class="ident" id="6185275">tokBuf</span><span class="op" id="6185281">.</span><span class="ident" id="6185282">Len</span><span class="op" id="6185285">(</span><span class="op" id="6185286">)</span>&nbsp;<span class="op" id="6185288">==</span>&nbsp;<span class="num" id="6185291">0</span>&nbsp;<span class="op" id="6185293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185297">//&nbsp;common&nbsp;case:&nbsp;the&nbsp;entire&nbsp;token&nbsp;text&nbsp;is&nbsp;still&nbsp;in&nbsp;srcBuf</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185356">return</span>&nbsp;<span class="builtintype" id="6185363">string</span><span class="op" id="6185369">(</span><span class="ident" id="6185370"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185371">.</span><span class="ident" id="6185372">srcBuf</span><span class="op" id="6185378">[</span><span class="ident" id="6185379"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185380">.</span><span class="ident" id="6185381">tokPos</span><span class="op" id="6185387">:</span><span class="ident" id="6185388"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185389">.</span><span class="ident" id="6185390">tokEnd</span><span class="op" id="6185396">]</span><span class="op" id="6185397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6185400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185404">//&nbsp;part&nbsp;of&nbsp;the&nbsp;token&nbsp;text&nbsp;was&nbsp;saved&nbsp;in&nbsp;tokBuf:&nbsp;save&nbsp;the&nbsp;rest&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185469">//&nbsp;tokBuf&nbsp;as&nbsp;well&nbsp;and&nbsp;return&nbsp;its&nbsp;content</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185511"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185512">.</span><span class="ident" id="6185513">tokBuf</span><span class="op" id="6185519">.</span><span class="ident" id="6185520">Write</span><span class="op" id="6185525">(</span><span class="ident" id="6185526"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185527">.</span><span class="ident" id="6185528">srcBuf</span><span class="op" id="6185534">[</span><span class="ident" id="6185535"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185536">.</span><span class="ident" id="6185537">tokPos</span><span class="op" id="6185543">:</span><span class="ident" id="6185544"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185545">.</span><span class="ident" id="6185546">tokEnd</span><span class="op" id="6185552">]</span><span class="op" id="6185553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185556"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185557">.</span><span class="ident" id="6185558">tokPos</span>&nbsp;<span class="op" id="6185565">=</span>&nbsp;<span class="ident" id="6185567"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185568">.</span><span class="ident" id="6185569">tokEnd</span>&nbsp;<span class="comment" id="6185576">//&nbsp;ensure&nbsp;idempotency&nbsp;of&nbsp;TokenText()&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185619">return</span>&nbsp;<span class="ident" id="6185626"><a href="/text/scanner/scanner.go.html#6185074">s</a></span><span class="op" id="6185627">.</span><span class="ident" id="6185628">tokBuf</span><span class="op" id="6185634">.</span><span class="ident" id="6185635">String</span><span class="op" id="6185641">(</span><span class="op" id="6185642">)</span><br>
<span class="lineno"></span><span class="op" id="6185644">}</span>
</div>
</body>
</html>
