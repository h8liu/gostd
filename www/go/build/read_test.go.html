<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8043604">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8043660">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8043714">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8043765">package</span>&nbsp;<span class="ident" id="8043773">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8043780">import</span>&nbsp;<span class="op" id="8043787">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8043790">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8043796">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8043807">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8043817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8043820">const</span>&nbsp;<span class="ident" id="8043826">quote</span>&nbsp;<span class="op" id="8043832">=</span>&nbsp;<span class="string" id="8043834">&#34;`&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8043839">type</span>&nbsp;<span class="ident" id="8043844">readTest</span>&nbsp;<span class="keyword" id="8043853">struct</span>&nbsp;<span class="op" id="8043860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8043863">//&nbsp;Test&nbsp;input&nbsp;contains&nbsp;ℙ&nbsp;where&nbsp;readImports&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8043922">in</span>&nbsp;&nbsp;<span class="builtintype" id="8043926">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8043934">err</span>&nbsp;<span class="builtintype" id="8043938">string</span><br>
<span class="lineno"></span><span class="op" id="8043945">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8043948">var</span>&nbsp;<span class="ident" id="8043952">readImportsTests</span>&nbsp;<span class="op" id="8043969">=</span>&nbsp;<span class="op" id="8043971">[</span><span class="op" id="8043972">]</span><span class="ident" id="8043973"><a href="/go/build/read_test.go.html#8043844">readTest</a></span><span class="op" id="8043981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8043984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8043988">`package&nbsp;p`</span><span class="op" id="8043999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044003">&#34;&#34;</span><span class="op" id="8044005">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044008">}</span><span class="op" id="8044009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044016">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="8044039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044043">&#34;&#34;</span><span class="op" id="8044045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044048">}</span><span class="op" id="8044049">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044056">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="8044081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044085">&#34;&#34;</span><span class="op" id="8044087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044090">}</span><span class="op" id="8044091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044094">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044098">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;;ℙvar&nbsp;x&nbsp;=&nbsp;1`</span><span class="op" id="8044134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044138">&#34;&#34;</span><span class="op" id="8044140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044143">}</span><span class="op" id="8044144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044151">`package&nbsp;p<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;a&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;&#34;x&#34;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span>&nbsp;<span class="op" id="8044312">+</span>&nbsp;<span class="ident" id="8044314"><a href="/go/build/read_test.go.html#8043826">quote</a></span>&nbsp;<span class="op" id="8044320">+</span>&nbsp;<span class="string" id="8044322">`x`</span>&nbsp;<span class="op" id="8044326">+</span>&nbsp;<span class="ident" id="8044328"><a href="/go/build/read_test.go.html#8043826">quote</a></span>&nbsp;<span class="op" id="8044334">+</span>&nbsp;<span class="string" id="8044336">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;/*comment*/&nbsp;`</span>&nbsp;<span class="op" id="8044357">+</span>&nbsp;<span class="ident" id="8044359"><a href="/go/build/read_test.go.html#8043826">quote</a></span>&nbsp;<span class="op" id="8044365">+</span>&nbsp;<span class="string" id="8044367">`x`</span>&nbsp;<span class="op" id="8044371">+</span>&nbsp;<span class="ident" id="8044373"><a href="/go/build/read_test.go.html#8043826">quote</a></span>&nbsp;<span class="op" id="8044379">+</span>&nbsp;<span class="string" id="8044381">`<br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;`</span>&nbsp;<span class="op" id="8044390">+</span>&nbsp;<span class="ident" id="8044392"><a href="/go/build/read_test.go.html#8043826">quote</a></span>&nbsp;<span class="op" id="8044398">+</span>&nbsp;<span class="string" id="8044400">`x`</span>&nbsp;<span class="op" id="8044404">+</span>&nbsp;<span class="ident" id="8044406"><a href="/go/build/read_test.go.html#8043826">quote</a></span>&nbsp;<span class="op" id="8044412">+</span>&nbsp;<span class="string" id="8044414">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;()<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport()import()import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport();import();import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙvar&nbsp;x&nbsp;=&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span><span class="op" id="8044524">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044528">&#34;&#34;</span><span class="op" id="8044530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044533">}</span><span class="op" id="8044534">,</span><br>
<span class="lineno"></span><span class="op" id="8044536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8044539">var</span>&nbsp;<span class="ident" id="8044543">readCommentsTests</span>&nbsp;<span class="op" id="8044561">=</span>&nbsp;<span class="op" id="8044563">[</span><span class="op" id="8044564">]</span><span class="ident" id="8044565"><a href="/go/build/read_test.go.html#8043844">readTest</a></span><span class="op" id="8044573">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044580">`ℙpackage&nbsp;p`</span><span class="op" id="8044594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044598">&#34;&#34;</span><span class="op" id="8044600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044603">}</span><span class="op" id="8044604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044607">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044611">`ℙpackage&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="8044637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044641">&#34;&#34;</span><span class="op" id="8044643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044646">}</span><span class="op" id="8044647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044654">`ℙpackage&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="8044682">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044686">&#34;&#34;</span><span class="op" id="8044688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044691">}</span><span class="op" id="8044692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044699">`//&nbsp;foo<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;bar&nbsp;*/<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;quux&nbsp;*/&nbsp;//&nbsp;baz<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*/&nbsp;zot&nbsp;*/<br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;asdf<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙHello,&nbsp;world`</span><span class="op" id="8044786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8044790">&#34;&#34;</span><span class="op" id="8044792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8044795">}</span><span class="op" id="8044796">,</span><br>
<span class="lineno">95</span><span class="op" id="8044798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8044801">func</span>&nbsp;<span class="ident" id="8044806">testRead</span><span class="op" id="8044814">(</span><span class="ident" id="8044815">t</span>&nbsp;<span class="op" id="8044817">*</span><span class="ident" id="8044818"><a href="/go/build/read_test.go.html#8043807">testing</a></span><span class="op" id="8044825">.</span><span class="ident" id="8044826">T</span><span class="op" id="8044827">,</span>&nbsp;<span class="ident" id="8044829">tests</span>&nbsp;<span class="op" id="8044835">[</span><span class="op" id="8044836">]</span><span class="ident" id="8044837"><a href="/go/build/read_test.go.html#8043844">readTest</a></span><span class="op" id="8044845">,</span>&nbsp;<span class="ident" id="8044847">read</span>&nbsp;<span class="keyword" id="8044852">func</span><span class="op" id="8044856">(</span><span class="ident" id="8044857"><a href="/go/build/read_test.go.html#8043790">io</a></span><span class="op" id="8044859">.</span><span class="ident" id="8044860">Reader</span><span class="op" id="8044866">)</span>&nbsp;<span class="op" id="8044868">(</span><span class="op" id="8044869">[</span><span class="op" id="8044870">]</span><span class="builtintype" id="8044871">byte</span><span class="op" id="8044875">,</span>&nbsp;<span class="builtintype" id="8044877">error</span><span class="op" id="8044882">)</span><span class="op" id="8044883">)</span>&nbsp;<span class="op" id="8044885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8044888">for</span>&nbsp;<span class="ident" id="8044892">i</span><span class="op" id="8044893">,</span>&nbsp;<span class="ident" id="8044895">tt</span>&nbsp;<span class="op" id="8044898">:=</span>&nbsp;<span class="keyword" id="8044901">range</span>&nbsp;<span class="ident" id="8044907"><a href="/go/build/read_test.go.html#8044829">tests</a></span>&nbsp;<span class="op" id="8044913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8044917">var</span>&nbsp;<span class="ident" id="8044921">in</span><span class="op" id="8044923">,</span>&nbsp;<span class="ident" id="8044925">testOut</span>&nbsp;<span class="builtintype" id="8044933">string</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8044942">j</span>&nbsp;<span class="op" id="8044944">:=</span>&nbsp;<span class="ident" id="8044947"><a href="/go/build/read_test.go.html#8043796">strings</a></span><span class="op" id="8044954">.</span><span class="ident" id="8044955">Index</span><span class="op" id="8044960">(</span><span class="ident" id="8044961"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8044963">.</span><span class="ident" id="8044964">in</span><span class="op" id="8044966">,</span>&nbsp;<span class="string" id="8044968">&#34;ℙ&#34;</span><span class="op" id="8044973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8044977">if</span>&nbsp;<span class="ident" id="8044980"><a href="/go/build/read_test.go.html#8044942">j</a></span>&nbsp;<span class="op" id="8044982">&lt;</span>&nbsp;<span class="num" id="8044984">0</span>&nbsp;<span class="op" id="8044986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8044991"><a href="/go/build/read_test.go.html#8044921">in</a></span>&nbsp;<span class="op" id="8044994">=</span>&nbsp;<span class="ident" id="8044996"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8044998">.</span><span class="ident" id="8044999">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045005"><a href="/go/build/read_test.go.html#8044925">testOut</a></span>&nbsp;<span class="op" id="8045013">=</span>&nbsp;<span class="ident" id="8045015"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8045017">.</span><span class="ident" id="8045018">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045023">}</span>&nbsp;<span class="keyword" id="8045025">else</span>&nbsp;<span class="op" id="8045030">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045035"><a href="/go/build/read_test.go.html#8044921">in</a></span>&nbsp;<span class="op" id="8045038">=</span>&nbsp;<span class="ident" id="8045040"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8045042">.</span><span class="ident" id="8045043">in</span><span class="op" id="8045045">[</span><span class="op" id="8045046">:</span><span class="ident" id="8045047"><a href="/go/build/read_test.go.html#8044942">j</a></span><span class="op" id="8045048">]</span>&nbsp;<span class="op" id="8045050">+</span>&nbsp;<span class="ident" id="8045052"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8045054">.</span><span class="ident" id="8045055">in</span><span class="op" id="8045057">[</span><span class="ident" id="8045058"><a href="/go/build/read_test.go.html#8044942">j</a></span><span class="op" id="8045059">+</span><span class="builtinfunc" id="8045060">len</span><span class="op" id="8045063">(</span><span class="string" id="8045064">&#34;ℙ&#34;</span><span class="op" id="8045069">)</span><span class="op" id="8045070">:</span><span class="op" id="8045071">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045076"><a href="/go/build/read_test.go.html#8044925">testOut</a></span>&nbsp;<span class="op" id="8045084">=</span>&nbsp;<span class="ident" id="8045086"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8045088">.</span><span class="ident" id="8045089">in</span><span class="op" id="8045091">[</span><span class="op" id="8045092">:</span><span class="ident" id="8045093"><a href="/go/build/read_test.go.html#8044942">j</a></span><span class="op" id="8045094">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045102">r</span>&nbsp;<span class="op" id="8045104">:=</span>&nbsp;<span class="ident" id="8045107"><a href="/go/build/read_test.go.html#8043796">strings</a></span><span class="op" id="8045114">.</span><span class="ident" id="8045115">NewReader</span><span class="op" id="8045124">(</span><span class="ident" id="8045125"><a href="/go/build/read_test.go.html#8044921">in</a></span><span class="op" id="8045127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045131">buf</span><span class="op" id="8045134">,</span>&nbsp;<span class="ident" id="8045136">err</span>&nbsp;<span class="op" id="8045140">:=</span>&nbsp;<span class="ident" id="8045143"><a href="/go/build/read_test.go.html#8044847">read</a></span><span class="op" id="8045147">(</span><span class="ident" id="8045148"><a href="/go/build/read_test.go.html#8045102">r</a></span><span class="op" id="8045149">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045153">if</span>&nbsp;<span class="ident" id="8045156"><a href="/go/build/read_test.go.html#8045136">err</a></span>&nbsp;<span class="op" id="8045160">!=</span>&nbsp;<span class="ident" id="8045163">nil</span>&nbsp;<span class="op" id="8045167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045172">if</span>&nbsp;<span class="ident" id="8045175"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8045177">.</span><span class="ident" id="8045178">err</span>&nbsp;<span class="op" id="8045182">==</span>&nbsp;<span class="string" id="8045185">&#34;&#34;</span>&nbsp;<span class="op" id="8045188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045194"><a href="/go/build/read_test.go.html#8044815">t</a></span><span class="op" id="8045195">.</span><span class="ident" id="8045196">Errorf</span><span class="op" id="8045202">(</span><span class="string" id="8045203">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;success&nbsp;(%q)&#34;</span><span class="op" id="8045239">,</span>&nbsp;<span class="ident" id="8045241"><a href="/go/build/read_test.go.html#8044892">i</a></span><span class="op" id="8045242">,</span>&nbsp;<span class="ident" id="8045244"><a href="/go/build/read_test.go.html#8045136">err</a></span><span class="op" id="8045247">,</span>&nbsp;<span class="builtintype" id="8045249">string</span><span class="op" id="8045255">(</span><span class="ident" id="8045256"><a href="/go/build/read_test.go.html#8045131">buf</a></span><span class="op" id="8045259">)</span><span class="op" id="8045260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045266">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045278">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045283">if</span>&nbsp;<span class="op" id="8045286">!</span><span class="ident" id="8045287"><a href="/go/build/read_test.go.html#8043796">strings</a></span><span class="op" id="8045294">.</span><span class="ident" id="8045295">Contains</span><span class="op" id="8045303">(</span><span class="ident" id="8045304"><a href="/go/build/read_test.go.html#8045136">err</a></span><span class="op" id="8045307">.</span><span class="ident" id="8045308">Error</span><span class="op" id="8045313">(</span><span class="op" id="8045314">)</span><span class="op" id="8045315">,</span>&nbsp;<span class="ident" id="8045317"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8045319">.</span><span class="ident" id="8045320">err</span><span class="op" id="8045323">)</span>&nbsp;<span class="op" id="8045325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045331"><a href="/go/build/read_test.go.html#8044815">t</a></span><span class="op" id="8045332">.</span><span class="ident" id="8045333">Errorf</span><span class="op" id="8045339">(</span><span class="string" id="8045340">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8045366">,</span>&nbsp;<span class="ident" id="8045368"><a href="/go/build/read_test.go.html#8044892">i</a></span><span class="op" id="8045369">,</span>&nbsp;<span class="ident" id="8045371"><a href="/go/build/read_test.go.html#8045136">err</a></span><span class="op" id="8045374">,</span>&nbsp;<span class="ident" id="8045376"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8045378">.</span><span class="ident" id="8045379">err</span><span class="op" id="8045382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045388">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045405">continue</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045420">if</span>&nbsp;<span class="ident" id="8045423"><a href="/go/build/read_test.go.html#8045136">err</a></span>&nbsp;<span class="op" id="8045427">==</span>&nbsp;<span class="ident" id="8045430">nil</span>&nbsp;<span class="op" id="8045434">&amp;&amp;</span>&nbsp;<span class="ident" id="8045437"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8045439">.</span><span class="ident" id="8045440">err</span>&nbsp;<span class="op" id="8045444">!=</span>&nbsp;<span class="string" id="8045447">&#34;&#34;</span>&nbsp;<span class="op" id="8045450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045455"><a href="/go/build/read_test.go.html#8044815">t</a></span><span class="op" id="8045456">.</span><span class="ident" id="8045457">Errorf</span><span class="op" id="8045463">(</span><span class="string" id="8045464">&#34;#%d:&nbsp;success,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8045491">,</span>&nbsp;<span class="ident" id="8045493"><a href="/go/build/read_test.go.html#8044892">i</a></span><span class="op" id="8045494">,</span>&nbsp;<span class="ident" id="8045496"><a href="/go/build/read_test.go.html#8044895">tt</a></span><span class="op" id="8045498">.</span><span class="ident" id="8045499">err</span><span class="op" id="8045502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045507">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045518">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045523">out</span>&nbsp;<span class="op" id="8045527">:=</span>&nbsp;<span class="builtintype" id="8045530">string</span><span class="op" id="8045536">(</span><span class="ident" id="8045537"><a href="/go/build/read_test.go.html#8045131">buf</a></span><span class="op" id="8045540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045544">if</span>&nbsp;<span class="ident" id="8045547"><a href="/go/build/read_test.go.html#8045523">out</a></span>&nbsp;<span class="op" id="8045551">!=</span>&nbsp;<span class="ident" id="8045554"><a href="/go/build/read_test.go.html#8044925">testOut</a></span>&nbsp;<span class="op" id="8045562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045567"><a href="/go/build/read_test.go.html#8044815">t</a></span><span class="op" id="8045568">.</span><span class="ident" id="8045569">Errorf</span><span class="op" id="8045575">(</span><span class="string" id="8045576">&#34;#%d:&nbsp;wrong&nbsp;output:\nhave&nbsp;%q\nwant&nbsp;%q\n&#34;</span><span class="op" id="8045616">,</span>&nbsp;<span class="ident" id="8045618"><a href="/go/build/read_test.go.html#8044892">i</a></span><span class="op" id="8045619">,</span>&nbsp;<span class="ident" id="8045621"><a href="/go/build/read_test.go.html#8045523">out</a></span><span class="op" id="8045624">,</span>&nbsp;<span class="ident" id="8045626"><a href="/go/build/read_test.go.html#8044925">testOut</a></span><span class="op" id="8045633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045637">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045640">}</span><br>
<span class="lineno"></span><span class="op" id="8045642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8045645">func</span>&nbsp;<span class="ident" id="8045650">TestReadImports</span><span class="op" id="8045665">(</span><span class="ident" id="8045666">t</span>&nbsp;<span class="op" id="8045668">*</span><span class="ident" id="8045669"><a href="/go/build/read_test.go.html#8043807">testing</a></span><span class="op" id="8045676">.</span><span class="ident" id="8045677">T</span><span class="op" id="8045678">)</span>&nbsp;<span class="op" id="8045680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045683"><a href="/go/build/read_test.go.html#8044806">testRead</a></span><span class="op" id="8045691">(</span><span class="ident" id="8045692"><a href="/go/build/read_test.go.html#8045666">t</a></span><span class="op" id="8045693">,</span>&nbsp;<span class="ident" id="8045695"><a href="/go/build/read_test.go.html#8043952">readImportsTests</a></span><span class="op" id="8045711">,</span>&nbsp;<span class="keyword" id="8045713">func</span><span class="op" id="8045717">(</span><span class="ident" id="8045718">r</span>&nbsp;<span class="ident" id="8045720"><a href="/go/build/read_test.go.html#8043790">io</a></span><span class="op" id="8045722">.</span><span class="ident" id="8045723">Reader</span><span class="op" id="8045729">)</span>&nbsp;<span class="op" id="8045731">(</span><span class="op" id="8045732">[</span><span class="op" id="8045733">]</span><span class="builtintype" id="8045734">byte</span><span class="op" id="8045738">,</span>&nbsp;<span class="builtintype" id="8045740">error</span><span class="op" id="8045745">)</span>&nbsp;<span class="op" id="8045747">{</span>&nbsp;<span class="keyword" id="8045749">return</span>&nbsp;<span class="ident" id="8045756"><a href="/go/build/read.go.html#5851261">readImports</a></span><span class="op" id="8045767">(</span><span class="ident" id="8045768"><a href="/go/build/read_test.go.html#8045718">r</a></span><span class="op" id="8045769">,</span>&nbsp;<span class="ident" id="8045771">true</span><span class="op" id="8045775">)</span>&nbsp;<span class="op" id="8045777">}</span><span class="op" id="8045778">)</span><br>
<span class="lineno">135</span><span class="op" id="8045780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8045783">func</span>&nbsp;<span class="ident" id="8045788">TestReadComments</span><span class="op" id="8045804">(</span><span class="ident" id="8045805">t</span>&nbsp;<span class="op" id="8045807">*</span><span class="ident" id="8045808"><a href="/go/build/read_test.go.html#8043807">testing</a></span><span class="op" id="8045815">.</span><span class="ident" id="8045816">T</span><span class="op" id="8045817">)</span>&nbsp;<span class="op" id="8045819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8045822"><a href="/go/build/read_test.go.html#8044806">testRead</a></span><span class="op" id="8045830">(</span><span class="ident" id="8045831"><a href="/go/build/read_test.go.html#8045805">t</a></span><span class="op" id="8045832">,</span>&nbsp;<span class="ident" id="8045834"><a href="/go/build/read_test.go.html#8044543">readCommentsTests</a></span><span class="op" id="8045851">,</span>&nbsp;<span class="ident" id="8045853"><a href="/go/build/read.go.html#5850848">readComments</a></span><span class="op" id="8045865">)</span><br>
<span class="lineno"></span><span class="op" id="8045867">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8045870">var</span>&nbsp;<span class="ident" id="8045874">readFailuresTests</span>&nbsp;<span class="op" id="8045892">=</span>&nbsp;<span class="op" id="8045894">[</span><span class="op" id="8045895">]</span><span class="ident" id="8045896"><a href="/go/build/read_test.go.html#8043844">readTest</a></span><span class="op" id="8045904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8045911">`package`</span><span class="op" id="8045920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8045924">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8045938">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045941">}</span><span class="op" id="8045942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8045949">&#34;package&nbsp;p\n\x00\nimport&nbsp;`math`\n&#34;</span><span class="op" id="8045983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8045987">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="8046012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046015">}</span><span class="op" id="8046016">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046023">`package&nbsp;p;&nbsp;import`</span><span class="op" id="8046042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046046">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046063">}</span><span class="op" id="8046064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046067">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046071">`package&nbsp;p;&nbsp;import&nbsp;&#34;`</span><span class="op" id="8046092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046096">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046113">}</span><span class="op" id="8046114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046121">&#34;package&nbsp;p;&nbsp;import&nbsp;`&nbsp;\n\n&#34;</span><span class="op" id="8046147">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046151">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046168">}</span><span class="op" id="8046169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046176">`package&nbsp;p;&nbsp;import&nbsp;&#34;x`</span><span class="op" id="8046198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046202">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046216">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046219">}</span><span class="op" id="8046220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046227">`package&nbsp;p;&nbsp;import&nbsp;_`</span><span class="op" id="8046248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046252">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046269">}</span><span class="op" id="8046270">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046277">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;`</span><span class="op" id="8046300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046304">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046321">}</span><span class="op" id="8046322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046325">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046329">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;x`</span><span class="op" id="8046353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046357">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046374">}</span><span class="op" id="8046375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046382">`package&nbsp;p;&nbsp;import&nbsp;.`</span><span class="op" id="8046403">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046407">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046424">}</span><span class="op" id="8046425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046432">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;`</span><span class="op" id="8046455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046459">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046473">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046476">}</span><span class="op" id="8046477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046484">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x`</span><span class="op" id="8046508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046512">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046529">}</span><span class="op" id="8046530">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046537">`package&nbsp;p;&nbsp;import&nbsp;(`</span><span class="op" id="8046558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046562">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046579">}</span><span class="op" id="8046580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046583">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046587">`package&nbsp;p;&nbsp;import&nbsp;(&#34;`</span><span class="op" id="8046609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046613">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046630">}</span><span class="op" id="8046631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046638">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x`</span><span class="op" id="8046661">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046665">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046682">}</span><span class="op" id="8046683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046690">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x&#34;`</span><span class="op" id="8046714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8046718">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8046732">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046735">}</span><span class="op" id="8046736">,</span><br>
<span class="lineno"></span><span class="op" id="8046738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8046741">func</span>&nbsp;<span class="ident" id="8046746">TestReadFailures</span><span class="op" id="8046762">(</span><span class="ident" id="8046763">t</span>&nbsp;<span class="op" id="8046765">*</span><span class="ident" id="8046766"><a href="/go/build/read_test.go.html#8043807">testing</a></span><span class="op" id="8046773">.</span><span class="ident" id="8046774">T</span><span class="op" id="8046775">)</span>&nbsp;<span class="op" id="8046777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8046780">//&nbsp;Errors&nbsp;should&nbsp;be&nbsp;reported&nbsp;(true&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8046837"><a href="/go/build/read_test.go.html#8044806">testRead</a></span><span class="op" id="8046845">(</span><span class="ident" id="8046846"><a href="/go/build/read_test.go.html#8046763">t</a></span><span class="op" id="8046847">,</span>&nbsp;<span class="ident" id="8046849"><a href="/go/build/read_test.go.html#8045874">readFailuresTests</a></span><span class="op" id="8046866">,</span>&nbsp;<span class="keyword" id="8046868">func</span><span class="op" id="8046872">(</span><span class="ident" id="8046873">r</span>&nbsp;<span class="ident" id="8046875"><a href="/go/build/read_test.go.html#8043790">io</a></span><span class="op" id="8046877">.</span><span class="ident" id="8046878">Reader</span><span class="op" id="8046884">)</span>&nbsp;<span class="op" id="8046886">(</span><span class="op" id="8046887">[</span><span class="op" id="8046888">]</span><span class="builtintype" id="8046889">byte</span><span class="op" id="8046893">,</span>&nbsp;<span class="builtintype" id="8046895">error</span><span class="op" id="8046900">)</span>&nbsp;<span class="op" id="8046902">{</span>&nbsp;<span class="keyword" id="8046904">return</span>&nbsp;<span class="ident" id="8046911"><a href="/go/build/read.go.html#5851261">readImports</a></span><span class="op" id="8046922">(</span><span class="ident" id="8046923"><a href="/go/build/read_test.go.html#8046873">r</a></span><span class="op" id="8046924">,</span>&nbsp;<span class="ident" id="8046926">true</span><span class="op" id="8046930">)</span>&nbsp;<span class="op" id="8046932">}</span><span class="op" id="8046933">)</span><br>
<span class="lineno"></span><span class="op" id="8046935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8046938">func</span>&nbsp;<span class="ident" id="8046943">TestReadFailuresIgnored</span><span class="op" id="8046966">(</span><span class="ident" id="8046967">t</span>&nbsp;<span class="op" id="8046969">*</span><span class="ident" id="8046970"><a href="/go/build/read_test.go.html#8043807">testing</a></span><span class="op" id="8046977">.</span><span class="ident" id="8046978">T</span><span class="op" id="8046979">)</span>&nbsp;<span class="op" id="8046981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8046984">//&nbsp;Syntax&nbsp;errors&nbsp;should&nbsp;not&nbsp;be&nbsp;reported&nbsp;(false&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8047053">//&nbsp;Instead,&nbsp;entire&nbsp;file&nbsp;should&nbsp;be&nbsp;the&nbsp;output&nbsp;and&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8047113">//&nbsp;Convert&nbsp;tests&nbsp;not&nbsp;to&nbsp;return&nbsp;syntax&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047160">tests</span>&nbsp;<span class="op" id="8047166">:=</span>&nbsp;<span class="builtinfunc" id="8047169">make</span><span class="op" id="8047173">(</span><span class="op" id="8047174">[</span><span class="op" id="8047175">]</span><span class="ident" id="8047176"><a href="/go/build/read_test.go.html#8043844">readTest</a></span><span class="op" id="8047184">,</span>&nbsp;<span class="builtinfunc" id="8047186">len</span><span class="op" id="8047189">(</span><span class="ident" id="8047190"><a href="/go/build/read_test.go.html#8045874">readFailuresTests</a></span><span class="op" id="8047207">)</span><span class="op" id="8047208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8047211">copy</span><span class="op" id="8047215">(</span><span class="ident" id="8047216"><a href="/go/build/read_test.go.html#8047160">tests</a></span><span class="op" id="8047221">,</span>&nbsp;<span class="ident" id="8047223"><a href="/go/build/read_test.go.html#8045874">readFailuresTests</a></span><span class="op" id="8047240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047243">for</span>&nbsp;<span class="ident" id="8047247">i</span>&nbsp;<span class="op" id="8047249">:=</span>&nbsp;<span class="keyword" id="8047252">range</span>&nbsp;<span class="ident" id="8047258"><a href="/go/build/read_test.go.html#8047160">tests</a></span>&nbsp;<span class="op" id="8047264">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047268">tt</span>&nbsp;<span class="op" id="8047271">:=</span>&nbsp;<span class="op" id="8047274">&amp;</span><span class="ident" id="8047275"><a href="/go/build/read_test.go.html#8047160">tests</a></span><span class="op" id="8047280">[</span><span class="ident" id="8047281"><a href="/go/build/read_test.go.html#8047247">i</a></span><span class="op" id="8047282">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047286">if</span>&nbsp;<span class="op" id="8047289">!</span><span class="ident" id="8047290"><a href="/go/build/read_test.go.html#8043796">strings</a></span><span class="op" id="8047297">.</span><span class="ident" id="8047298">Contains</span><span class="op" id="8047306">(</span><span class="ident" id="8047307"><a href="/go/build/read_test.go.html#8047268">tt</a></span><span class="op" id="8047309">.</span><span class="ident" id="8047310">err</span><span class="op" id="8047313">,</span>&nbsp;<span class="string" id="8047315">&#34;NUL&#34;</span><span class="op" id="8047320">)</span>&nbsp;<span class="op" id="8047322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047327"><a href="/go/build/read_test.go.html#8047268">tt</a></span><span class="op" id="8047329">.</span><span class="ident" id="8047330">err</span>&nbsp;<span class="op" id="8047334">=</span>&nbsp;<span class="string" id="8047336">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047344">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047347"><a href="/go/build/read_test.go.html#8044806">testRead</a></span><span class="op" id="8047355">(</span><span class="ident" id="8047356"><a href="/go/build/read_test.go.html#8046967">t</a></span><span class="op" id="8047357">,</span>&nbsp;<span class="ident" id="8047359"><a href="/go/build/read_test.go.html#8047160">tests</a></span><span class="op" id="8047364">,</span>&nbsp;<span class="keyword" id="8047366">func</span><span class="op" id="8047370">(</span><span class="ident" id="8047371">r</span>&nbsp;<span class="ident" id="8047373"><a href="/go/build/read_test.go.html#8043790">io</a></span><span class="op" id="8047375">.</span><span class="ident" id="8047376">Reader</span><span class="op" id="8047382">)</span>&nbsp;<span class="op" id="8047384">(</span><span class="op" id="8047385">[</span><span class="op" id="8047386">]</span><span class="builtintype" id="8047387">byte</span><span class="op" id="8047391">,</span>&nbsp;<span class="builtintype" id="8047393">error</span><span class="op" id="8047398">)</span>&nbsp;<span class="op" id="8047400">{</span>&nbsp;<span class="keyword" id="8047402">return</span>&nbsp;<span class="ident" id="8047409"><a href="/go/build/read.go.html#5851261">readImports</a></span><span class="op" id="8047420">(</span><span class="ident" id="8047421"><a href="/go/build/read_test.go.html#8047371">r</a></span><span class="op" id="8047422">,</span>&nbsp;<span class="ident" id="8047424">false</span><span class="op" id="8047429">)</span>&nbsp;<span class="op" id="8047431">}</span><span class="op" id="8047432">)</span><br>
<span class="lineno"></span><span class="op" id="8047434">}</span>
</div>
</body>
</html>
