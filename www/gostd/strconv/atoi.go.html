<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html" class="current">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2324153">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2324208">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2324262">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2324313">package</span>&nbsp;<span class="ident" id="2324321">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2324330">import</span>&nbsp;<span class="string" id="2324337">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2324347">//&nbsp;ErrRange&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno">10</span><span class="keyword" id="2324419">var</span>&nbsp;<span class="ident" id="2324423">ErrRange</span>&nbsp;<span class="op" id="2324432">=</span>&nbsp;<span class="ident" id="2324434">errors</span><span class="op" id="2324440">.</span><span class="ident" id="2324441">New</span><span class="op" id="2324444">(</span><span class="string" id="2324445">&#34;value&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2324465">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2324468">//&nbsp;ErrSyntax&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;right&nbsp;syntax&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2324556">var</span>&nbsp;<span class="ident" id="2324560">ErrSyntax</span>&nbsp;<span class="op" id="2324570">=</span>&nbsp;<span class="ident" id="2324572">errors</span><span class="op" id="2324578">.</span><span class="ident" id="2324579">New</span><span class="op" id="2324582">(</span><span class="string" id="2324583">&#34;invalid&nbsp;syntax&#34;</span><span class="op" id="2324599">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2324602">//&nbsp;A&nbsp;NumError&nbsp;records&nbsp;a&nbsp;failed&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="2324645">type</span>&nbsp;<span class="ident" id="2324650">NumError</span>&nbsp;<span class="keyword" id="2324659">struct</span>&nbsp;<span class="op" id="2324666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324669">Func</span>&nbsp;<span class="builtintype" id="2324674">string</span>&nbsp;<span class="comment" id="2324681">//&nbsp;the&nbsp;failing&nbsp;function&nbsp;(ParseBool,&nbsp;ParseInt,&nbsp;ParseUint,&nbsp;ParseFloat)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324751">Num</span>&nbsp;&nbsp;<span class="builtintype" id="2324756">string</span>&nbsp;<span class="comment" id="2324763">//&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2324777">Err</span>&nbsp;&nbsp;<span class="builtintype" id="2324782">error</span>&nbsp;&nbsp;<span class="comment" id="2324789">//&nbsp;the&nbsp;reason&nbsp;the&nbsp;conversion&nbsp;failed&nbsp;(ErrRange,&nbsp;ErrSyntax)</span><br>
<span class="lineno">20</span><span class="op" id="2324847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2324850">func</span>&nbsp;<span class="op" id="2324855">(</span><span class="ident" id="2324856">e</span>&nbsp;<span class="op" id="2324858">*</span><span class="ident" id="2324859">NumError</span><span class="op" id="2324867">)</span>&nbsp;<span class="ident" id="2324869">Error</span><span class="op" id="2324874">(</span><span class="op" id="2324875">)</span>&nbsp;<span class="builtintype" id="2324877">string</span>&nbsp;<span class="op" id="2324884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2324887">return</span>&nbsp;<span class="string" id="2324894">&#34;strconv.&#34;</span>&nbsp;<span class="op" id="2324905">+</span>&nbsp;<span class="ident" id="2324907">e</span><span class="op" id="2324908">.</span><span class="ident" id="2324909">Func</span>&nbsp;<span class="op" id="2324914">+</span>&nbsp;<span class="string" id="2324916">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2324921">+</span>&nbsp;<span class="string" id="2324923">&#34;parsing&nbsp;&#34;</span>&nbsp;<span class="op" id="2324934">+</span>&nbsp;<span class="ident" id="2324936">Quote</span><span class="op" id="2324941">(</span><span class="ident" id="2324942">e</span><span class="op" id="2324943">.</span><span class="ident" id="2324944">Num</span><span class="op" id="2324947">)</span>&nbsp;<span class="op" id="2324949">+</span>&nbsp;<span class="string" id="2324951">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2324956">+</span>&nbsp;<span class="ident" id="2324958">e</span><span class="op" id="2324959">.</span><span class="ident" id="2324960">Err</span><span class="op" id="2324963">.</span><span class="ident" id="2324964">Error</span><span class="op" id="2324969">(</span><span class="op" id="2324970">)</span><br>
<span class="lineno"></span><span class="op" id="2324972">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="2324975">func</span>&nbsp;<span class="ident" id="2324980">syntaxError</span><span class="op" id="2324991">(</span><span class="ident" id="2324992">fn</span><span class="op" id="2324994">,</span>&nbsp;<span class="ident" id="2324996">str</span>&nbsp;<span class="builtintype" id="2325000">string</span><span class="op" id="2325006">)</span>&nbsp;<span class="op" id="2325008">*</span><span class="ident" id="2325009">NumError</span>&nbsp;<span class="op" id="2325018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325021">return</span>&nbsp;<span class="op" id="2325028">&amp;</span><span class="ident" id="2325029">NumError</span><span class="op" id="2325037">{</span><span class="ident" id="2325038">fn</span><span class="op" id="2325040">,</span>&nbsp;<span class="ident" id="2325042">str</span><span class="op" id="2325045">,</span>&nbsp;<span class="ident" id="2325047">ErrSyntax</span><span class="op" id="2325056">}</span><br>
<span class="lineno"></span><span class="op" id="2325058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="2325061">func</span>&nbsp;<span class="ident" id="2325066">rangeError</span><span class="op" id="2325076">(</span><span class="ident" id="2325077">fn</span><span class="op" id="2325079">,</span>&nbsp;<span class="ident" id="2325081">str</span>&nbsp;<span class="builtintype" id="2325085">string</span><span class="op" id="2325091">)</span>&nbsp;<span class="op" id="2325093">*</span><span class="ident" id="2325094">NumError</span>&nbsp;<span class="op" id="2325103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325106">return</span>&nbsp;<span class="op" id="2325113">&amp;</span><span class="ident" id="2325114">NumError</span><span class="op" id="2325122">{</span><span class="ident" id="2325123">fn</span><span class="op" id="2325125">,</span>&nbsp;<span class="ident" id="2325127">str</span><span class="op" id="2325130">,</span>&nbsp;<span class="ident" id="2325132">ErrRange</span><span class="op" id="2325140">}</span><br>
<span class="lineno"></span><span class="op" id="2325142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2325145">const</span>&nbsp;<span class="ident" id="2325151">intSize</span>&nbsp;<span class="op" id="2325159">=</span>&nbsp;<span class="num" id="2325161">32</span>&nbsp;<span class="op" id="2325164">&lt;&lt;</span>&nbsp;<span class="op" id="2325167">(</span><span class="op" id="2325168">^</span><span class="builtintype" id="2325169">uint</span><span class="op" id="2325173">(</span><span class="num" id="2325174">0</span><span class="op" id="2325175">)</span>&nbsp;<span class="op" id="2325177">&gt;&gt;</span>&nbsp;<span class="num" id="2325180">63</span><span class="op" id="2325182">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2325185">//&nbsp;IntSize&nbsp;is&nbsp;the&nbsp;size&nbsp;in&nbsp;bits&nbsp;of&nbsp;an&nbsp;int&nbsp;or&nbsp;uint&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2325241">const</span>&nbsp;<span class="ident" id="2325247">IntSize</span>&nbsp;<span class="op" id="2325255">=</span>&nbsp;<span class="ident" id="2325257">intSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2325266">//&nbsp;Return&nbsp;the&nbsp;first&nbsp;number&nbsp;n&nbsp;such&nbsp;that&nbsp;n*base&nbsp;&gt;=&nbsp;1&lt;&lt;64.</span><br>
<span class="lineno">40</span><span class="keyword" id="2325322">func</span>&nbsp;<span class="ident" id="2325327">cutoff64</span><span class="op" id="2325335">(</span><span class="ident" id="2325336">base</span>&nbsp;<span class="builtintype" id="2325341">int</span><span class="op" id="2325344">)</span>&nbsp;<span class="ident" id="2325346">uint64</span>&nbsp;<span class="op" id="2325353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325356">if</span>&nbsp;<span class="ident" id="2325359">base</span>&nbsp;<span class="op" id="2325364">&lt;</span>&nbsp;<span class="num" id="2325366">2</span>&nbsp;<span class="op" id="2325368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325372">return</span>&nbsp;<span class="num" id="2325379">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325385">return</span>&nbsp;<span class="op" id="2325392">(</span><span class="num" id="2325393">1</span><span class="op" id="2325394">&lt;&lt;</span><span class="num" id="2325396">64</span><span class="op" id="2325398">-</span><span class="num" id="2325399">1</span><span class="op" id="2325400">)</span><span class="op" id="2325401">/</span><span class="ident" id="2325402">uint64</span><span class="op" id="2325408">(</span><span class="ident" id="2325409">base</span><span class="op" id="2325413">)</span>&nbsp;<span class="op" id="2325415">+</span>&nbsp;<span class="num" id="2325417">1</span><br>
<span class="lineno">45</span><span class="op" id="2325419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2325422">//&nbsp;ParseUint&nbsp;is&nbsp;like&nbsp;ParseInt&nbsp;but&nbsp;for&nbsp;unsigned&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="keyword" id="2325478">func</span>&nbsp;<span class="ident" id="2325483">ParseUint</span><span class="op" id="2325492">(</span><span class="ident" id="2325493">s</span>&nbsp;<span class="builtintype" id="2325495">string</span><span class="op" id="2325501">,</span>&nbsp;<span class="ident" id="2325503">base</span>&nbsp;<span class="builtintype" id="2325508">int</span><span class="op" id="2325511">,</span>&nbsp;<span class="ident" id="2325513">bitSize</span>&nbsp;<span class="builtintype" id="2325521">int</span><span class="op" id="2325524">)</span>&nbsp;<span class="op" id="2325526">(</span><span class="ident" id="2325527">n</span>&nbsp;<span class="ident" id="2325529">uint64</span><span class="op" id="2325535">,</span>&nbsp;<span class="ident" id="2325537">err</span>&nbsp;<span class="builtintype" id="2325541">error</span><span class="op" id="2325546">)</span>&nbsp;<span class="op" id="2325548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325551">var</span>&nbsp;<span class="ident" id="2325555">cutoff</span><span class="op" id="2325561">,</span>&nbsp;<span class="ident" id="2325563">maxVal</span>&nbsp;<span class="ident" id="2325570">uint64</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325579">if</span>&nbsp;<span class="ident" id="2325582">bitSize</span>&nbsp;<span class="op" id="2325590">==</span>&nbsp;<span class="num" id="2325593">0</span>&nbsp;<span class="op" id="2325595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325599">bitSize</span>&nbsp;<span class="op" id="2325607">=</span>&nbsp;<span class="builtintype" id="2325609">int</span><span class="op" id="2325612">(</span><span class="ident" id="2325613">IntSize</span><span class="op" id="2325620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325627">s0</span>&nbsp;<span class="op" id="2325630">:=</span>&nbsp;<span class="ident" id="2325633">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325636">switch</span>&nbsp;<span class="op" id="2325643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325646">case</span>&nbsp;<span class="builtinfunc" id="2325651">len</span><span class="op" id="2325654">(</span><span class="ident" id="2325655">s</span><span class="op" id="2325656">)</span>&nbsp;<span class="op" id="2325658">&lt;</span>&nbsp;<span class="num" id="2325660">1</span><span class="op" id="2325661">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325665">err</span>&nbsp;<span class="op" id="2325669">=</span>&nbsp;<span class="ident" id="2325671">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325683">goto</span>&nbsp;<span class="ident" id="2325688">Error</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325696">case</span>&nbsp;<span class="num" id="2325701">2</span>&nbsp;<span class="op" id="2325703">&lt;=</span>&nbsp;<span class="ident" id="2325706">base</span>&nbsp;<span class="op" id="2325711">&amp;&amp;</span>&nbsp;<span class="ident" id="2325714">base</span>&nbsp;<span class="op" id="2325719">&lt;=</span>&nbsp;<span class="num" id="2325722">36</span><span class="op" id="2325724">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2325728">//&nbsp;valid&nbsp;base;&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325759">case</span>&nbsp;<span class="ident" id="2325764">base</span>&nbsp;<span class="op" id="2325769">==</span>&nbsp;<span class="num" id="2325772">0</span><span class="op" id="2325773">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2325777">//&nbsp;Look&nbsp;for&nbsp;octal,&nbsp;hex&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325810">switch</span>&nbsp;<span class="op" id="2325817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325821">case</span>&nbsp;<span class="ident" id="2325826">s</span><span class="op" id="2325827">[</span><span class="num" id="2325828">0</span><span class="op" id="2325829">]</span>&nbsp;<span class="op" id="2325831">==</span>&nbsp;<span class="string" id="2325834">&#39;0&#39;</span>&nbsp;<span class="op" id="2325838">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2325841">len</span><span class="op" id="2325844">(</span><span class="ident" id="2325845">s</span><span class="op" id="2325846">)</span>&nbsp;<span class="op" id="2325848">&gt;</span>&nbsp;<span class="num" id="2325850">1</span>&nbsp;<span class="op" id="2325852">&amp;&amp;</span>&nbsp;<span class="op" id="2325855">(</span><span class="ident" id="2325856">s</span><span class="op" id="2325857">[</span><span class="num" id="2325858">1</span><span class="op" id="2325859">]</span>&nbsp;<span class="op" id="2325861">==</span>&nbsp;<span class="string" id="2325864">&#39;x&#39;</span>&nbsp;<span class="op" id="2325868">||</span>&nbsp;<span class="ident" id="2325871">s</span><span class="op" id="2325872">[</span><span class="num" id="2325873">1</span><span class="op" id="2325874">]</span>&nbsp;<span class="op" id="2325876">==</span>&nbsp;<span class="string" id="2325879">&#39;X&#39;</span><span class="op" id="2325882">)</span><span class="op" id="2325883">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325888">base</span>&nbsp;<span class="op" id="2325893">=</span>&nbsp;<span class="num" id="2325895">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325901">s</span>&nbsp;<span class="op" id="2325903">=</span>&nbsp;<span class="ident" id="2325905">s</span><span class="op" id="2325906">[</span><span class="num" id="2325907">2</span><span class="op" id="2325908">:</span><span class="op" id="2325909">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325914">if</span>&nbsp;<span class="builtinfunc" id="2325917">len</span><span class="op" id="2325920">(</span><span class="ident" id="2325921">s</span><span class="op" id="2325922">)</span>&nbsp;<span class="op" id="2325924">&lt;</span>&nbsp;<span class="num" id="2325926">1</span>&nbsp;<span class="op" id="2325928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325934">err</span>&nbsp;<span class="op" id="2325938">=</span>&nbsp;<span class="ident" id="2325940">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325954">goto</span>&nbsp;<span class="ident" id="2325959">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2325968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2325972">case</span>&nbsp;<span class="ident" id="2325977">s</span><span class="op" id="2325978">[</span><span class="num" id="2325979">0</span><span class="op" id="2325980">]</span>&nbsp;<span class="op" id="2325982">==</span>&nbsp;<span class="string" id="2325985">&#39;0&#39;</span><span class="op" id="2325988">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325993">base</span>&nbsp;<span class="op" id="2325998">=</span>&nbsp;<span class="num" id="2326000">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326004">default</span><span class="op" id="2326011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326016">base</span>&nbsp;<span class="op" id="2326021">=</span>&nbsp;<span class="num" id="2326023">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2326028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326032">default</span><span class="op" id="2326039">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326043">err</span>&nbsp;<span class="op" id="2326047">=</span>&nbsp;<span class="ident" id="2326049">errors</span><span class="op" id="2326055">.</span><span class="ident" id="2326056">New</span><span class="op" id="2326059">(</span><span class="string" id="2326060">&#34;invalid&nbsp;base&nbsp;&#34;</span>&nbsp;<span class="op" id="2326076">+</span>&nbsp;<span class="ident" id="2326078">Itoa</span><span class="op" id="2326082">(</span><span class="ident" id="2326083">base</span><span class="op" id="2326087">)</span><span class="op" id="2326088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326092">goto</span>&nbsp;<span class="ident" id="2326097">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2326104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326108">n</span>&nbsp;<span class="op" id="2326110">=</span>&nbsp;<span class="num" id="2326112">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326115">cutoff</span>&nbsp;<span class="op" id="2326122">=</span>&nbsp;<span class="ident" id="2326124">cutoff64</span><span class="op" id="2326132">(</span><span class="ident" id="2326133">base</span><span class="op" id="2326137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326140">maxVal</span>&nbsp;<span class="op" id="2326147">=</span>&nbsp;<span class="num" id="2326149">1</span><span class="op" id="2326150">&lt;&lt;</span><span class="builtintype" id="2326152">uint</span><span class="op" id="2326156">(</span><span class="ident" id="2326157">bitSize</span><span class="op" id="2326164">)</span>&nbsp;<span class="op" id="2326166">-</span>&nbsp;<span class="num" id="2326168">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326172">for</span>&nbsp;<span class="ident" id="2326176">i</span>&nbsp;<span class="op" id="2326178">:=</span>&nbsp;<span class="num" id="2326181">0</span><span class="op" id="2326182">;</span>&nbsp;<span class="ident" id="2326184">i</span>&nbsp;<span class="op" id="2326186">&lt;</span>&nbsp;<span class="builtinfunc" id="2326188">len</span><span class="op" id="2326191">(</span><span class="ident" id="2326192">s</span><span class="op" id="2326193">)</span><span class="op" id="2326194">;</span>&nbsp;<span class="ident" id="2326196">i</span><span class="op" id="2326197">++</span>&nbsp;<span class="op" id="2326200">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326204">var</span>&nbsp;<span class="ident" id="2326208">v</span>&nbsp;<span class="builtintype" id="2326210">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326217">d</span>&nbsp;<span class="op" id="2326219">:=</span>&nbsp;<span class="ident" id="2326222">s</span><span class="op" id="2326223">[</span><span class="ident" id="2326224">i</span><span class="op" id="2326225">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326229">switch</span>&nbsp;<span class="op" id="2326236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326240">case</span>&nbsp;<span class="string" id="2326245">&#39;0&#39;</span>&nbsp;<span class="op" id="2326249">&lt;=</span>&nbsp;<span class="ident" id="2326252">d</span>&nbsp;<span class="op" id="2326254">&amp;&amp;</span>&nbsp;<span class="ident" id="2326257">d</span>&nbsp;<span class="op" id="2326259">&lt;=</span>&nbsp;<span class="string" id="2326262">&#39;9&#39;</span><span class="op" id="2326265">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326270">v</span>&nbsp;<span class="op" id="2326272">=</span>&nbsp;<span class="ident" id="2326274">d</span>&nbsp;<span class="op" id="2326276">-</span>&nbsp;<span class="string" id="2326278">&#39;0&#39;</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326284">case</span>&nbsp;<span class="string" id="2326289">&#39;a&#39;</span>&nbsp;<span class="op" id="2326293">&lt;=</span>&nbsp;<span class="ident" id="2326296">d</span>&nbsp;<span class="op" id="2326298">&amp;&amp;</span>&nbsp;<span class="ident" id="2326301">d</span>&nbsp;<span class="op" id="2326303">&lt;=</span>&nbsp;<span class="string" id="2326306">&#39;z&#39;</span><span class="op" id="2326309">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326314">v</span>&nbsp;<span class="op" id="2326316">=</span>&nbsp;<span class="ident" id="2326318">d</span>&nbsp;<span class="op" id="2326320">-</span>&nbsp;<span class="string" id="2326322">&#39;a&#39;</span>&nbsp;<span class="op" id="2326326">+</span>&nbsp;<span class="num" id="2326328">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326333">case</span>&nbsp;<span class="string" id="2326338">&#39;A&#39;</span>&nbsp;<span class="op" id="2326342">&lt;=</span>&nbsp;<span class="ident" id="2326345">d</span>&nbsp;<span class="op" id="2326347">&amp;&amp;</span>&nbsp;<span class="ident" id="2326350">d</span>&nbsp;<span class="op" id="2326352">&lt;=</span>&nbsp;<span class="string" id="2326355">&#39;Z&#39;</span><span class="op" id="2326358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326363">v</span>&nbsp;<span class="op" id="2326365">=</span>&nbsp;<span class="ident" id="2326367">d</span>&nbsp;<span class="op" id="2326369">-</span>&nbsp;<span class="string" id="2326371">&#39;A&#39;</span>&nbsp;<span class="op" id="2326375">+</span>&nbsp;<span class="num" id="2326377">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326382">default</span><span class="op" id="2326389">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326394">n</span>&nbsp;<span class="op" id="2326396">=</span>&nbsp;<span class="num" id="2326398">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326403">err</span>&nbsp;<span class="op" id="2326407">=</span>&nbsp;<span class="ident" id="2326409">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326422">goto</span>&nbsp;<span class="ident" id="2326427">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2326435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326439">if</span>&nbsp;<span class="builtintype" id="2326442">int</span><span class="op" id="2326445">(</span><span class="ident" id="2326446">v</span><span class="op" id="2326447">)</span>&nbsp;<span class="op" id="2326449">&gt;=</span>&nbsp;<span class="ident" id="2326452">base</span>&nbsp;<span class="op" id="2326457">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326462">n</span>&nbsp;<span class="op" id="2326464">=</span>&nbsp;<span class="num" id="2326466">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326471">err</span>&nbsp;<span class="op" id="2326475">=</span>&nbsp;<span class="ident" id="2326477">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326490">goto</span>&nbsp;<span class="ident" id="2326495">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2326503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326508">if</span>&nbsp;<span class="ident" id="2326511">n</span>&nbsp;<span class="op" id="2326513">&gt;=</span>&nbsp;<span class="ident" id="2326516">cutoff</span>&nbsp;<span class="op" id="2326523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2326528">//&nbsp;n*base&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326551">n</span>&nbsp;<span class="op" id="2326553">=</span>&nbsp;<span class="num" id="2326555">1</span><span class="op" id="2326556">&lt;&lt;</span><span class="num" id="2326558">64</span>&nbsp;<span class="op" id="2326561">-</span>&nbsp;<span class="num" id="2326563">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326568">err</span>&nbsp;<span class="op" id="2326572">=</span>&nbsp;<span class="ident" id="2326574">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326586">goto</span>&nbsp;<span class="ident" id="2326591">Error</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2326599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326603">n</span>&nbsp;<span class="op" id="2326605">*=</span>&nbsp;<span class="ident" id="2326608">uint64</span><span class="op" id="2326614">(</span><span class="ident" id="2326615">base</span><span class="op" id="2326619">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326624">n1</span>&nbsp;<span class="op" id="2326627">:=</span>&nbsp;<span class="ident" id="2326630">n</span>&nbsp;<span class="op" id="2326632">+</span>&nbsp;<span class="ident" id="2326634">uint64</span><span class="op" id="2326640">(</span><span class="ident" id="2326641">v</span><span class="op" id="2326642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326646">if</span>&nbsp;<span class="ident" id="2326649">n1</span>&nbsp;<span class="op" id="2326652">&lt;</span>&nbsp;<span class="ident" id="2326654">n</span>&nbsp;<span class="op" id="2326656">||</span>&nbsp;<span class="ident" id="2326659">n1</span>&nbsp;<span class="op" id="2326662">&gt;</span>&nbsp;<span class="ident" id="2326664">maxVal</span>&nbsp;<span class="op" id="2326671">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2326676">//&nbsp;n+v&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326696">n</span>&nbsp;<span class="op" id="2326698">=</span>&nbsp;<span class="num" id="2326700">1</span><span class="op" id="2326701">&lt;&lt;</span><span class="num" id="2326703">64</span>&nbsp;<span class="op" id="2326706">-</span>&nbsp;<span class="num" id="2326708">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326713">err</span>&nbsp;<span class="op" id="2326717">=</span>&nbsp;<span class="ident" id="2326719">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326731">goto</span>&nbsp;<span class="ident" id="2326736">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2326744">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2326748">n</span>&nbsp;<span class="op" id="2326750">=</span>&nbsp;<span class="ident" id="2326752">n1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2326756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326760">return</span>&nbsp;<span class="ident" id="2326767">n</span><span class="op" id="2326768">,</span>&nbsp;<span class="ident" id="2326770">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="ident" id="2326775">Error</span><span class="op" id="2326780">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2326783">return</span>&nbsp;<span class="ident" id="2326790">n</span><span class="op" id="2326791">,</span>&nbsp;<span class="op" id="2326793">&amp;</span><span class="ident" id="2326794">NumError</span><span class="op" id="2326802">{</span><span class="string" id="2326803">&#34;ParseUint&#34;</span><span class="op" id="2326814">,</span>&nbsp;<span class="ident" id="2326816">s0</span><span class="op" id="2326818">,</span>&nbsp;<span class="ident" id="2326820">err</span><span class="op" id="2326823">}</span><br>
<span class="lineno"></span><span class="op" id="2326825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2326828">//&nbsp;ParseInt&nbsp;interprets&nbsp;a&nbsp;string&nbsp;s&nbsp;in&nbsp;the&nbsp;given&nbsp;base&nbsp;(2&nbsp;to&nbsp;36)&nbsp;and</span><br>
<span class="lineno">135</span><span class="comment" id="2326894">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;value&nbsp;i.&nbsp;&nbsp;If&nbsp;base&nbsp;==&nbsp;0,&nbsp;the&nbsp;base&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2326959">//&nbsp;implied&nbsp;by&nbsp;the&nbsp;string&#39;s&nbsp;prefix:&nbsp;base&nbsp;16&nbsp;for&nbsp;&#34;0x&#34;,&nbsp;base&nbsp;8&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2327023">//&nbsp;&#34;0&#34;,&nbsp;and&nbsp;base&nbsp;10&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2327054">//</span><br>
<span class="lineno"></span><span class="comment" id="2327057">//&nbsp;The&nbsp;bitSize&nbsp;argument&nbsp;specifies&nbsp;the&nbsp;integer&nbsp;type</span><br>
<span class="lineno">140</span><span class="comment" id="2327108">//&nbsp;that&nbsp;the&nbsp;result&nbsp;must&nbsp;fit&nbsp;into.&nbsp;&nbsp;Bit&nbsp;sizes&nbsp;0,&nbsp;8,&nbsp;16,&nbsp;32,&nbsp;and&nbsp;64</span><br>
<span class="lineno"></span><span class="comment" id="2327174">//&nbsp;correspond&nbsp;to&nbsp;int,&nbsp;int8,&nbsp;int16,&nbsp;int32,&nbsp;and&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2327227">//</span><br>
<span class="lineno"></span><span class="comment" id="2327230">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseInt&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="2327295">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.&nbsp;&nbsp;If&nbsp;s&nbsp;is&nbsp;empty&nbsp;or&nbsp;contains&nbsp;invalid</span><br>
<span class="lineno">145</span><span class="comment" id="2327358">//&nbsp;digits,&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax&nbsp;and&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;0;</span><br>
<span class="lineno"></span><span class="comment" id="2327418">//&nbsp;if&nbsp;the&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;s&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2327480">//&nbsp;signed&nbsp;integer&nbsp;of&nbsp;the&nbsp;given&nbsp;size,&nbsp;err.Err&nbsp;=&nbsp;ErrRange&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2327544">//&nbsp;returned&nbsp;value&nbsp;is&nbsp;the&nbsp;maximum&nbsp;magnitude&nbsp;integer&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2327602">//&nbsp;appropriate&nbsp;bitSize&nbsp;and&nbsp;sign.</span><br>
<span class="lineno">150</span><span class="keyword" id="2327635">func</span>&nbsp;<span class="ident" id="2327640">ParseInt</span><span class="op" id="2327648">(</span><span class="ident" id="2327649">s</span>&nbsp;<span class="builtintype" id="2327651">string</span><span class="op" id="2327657">,</span>&nbsp;<span class="ident" id="2327659">base</span>&nbsp;<span class="builtintype" id="2327664">int</span><span class="op" id="2327667">,</span>&nbsp;<span class="ident" id="2327669">bitSize</span>&nbsp;<span class="builtintype" id="2327677">int</span><span class="op" id="2327680">)</span>&nbsp;<span class="op" id="2327682">(</span><span class="ident" id="2327683">i</span>&nbsp;<span class="ident" id="2327685">int64</span><span class="op" id="2327690">,</span>&nbsp;<span class="ident" id="2327692">err</span>&nbsp;<span class="builtintype" id="2327696">error</span><span class="op" id="2327701">)</span>&nbsp;<span class="op" id="2327703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2327706">const</span>&nbsp;<span class="ident" id="2327712">fnParseInt</span>&nbsp;<span class="op" id="2327723">=</span>&nbsp;<span class="string" id="2327725">&#34;ParseInt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2327738">if</span>&nbsp;<span class="ident" id="2327741">bitSize</span>&nbsp;<span class="op" id="2327749">==</span>&nbsp;<span class="num" id="2327752">0</span>&nbsp;<span class="op" id="2327754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2327758">bitSize</span>&nbsp;<span class="op" id="2327766">=</span>&nbsp;<span class="builtintype" id="2327768">int</span><span class="op" id="2327771">(</span><span class="ident" id="2327772">IntSize</span><span class="op" id="2327779">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2327782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2327786">//&nbsp;Empty&nbsp;string&nbsp;bad.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2327808">if</span>&nbsp;<span class="builtinfunc" id="2327811">len</span><span class="op" id="2327814">(</span><span class="ident" id="2327815">s</span><span class="op" id="2327816">)</span>&nbsp;<span class="op" id="2327818">==</span>&nbsp;<span class="num" id="2327821">0</span>&nbsp;<span class="op" id="2327823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2327827">return</span>&nbsp;<span class="num" id="2327834">0</span><span class="op" id="2327835">,</span>&nbsp;<span class="ident" id="2327837">syntaxError</span><span class="op" id="2327848">(</span><span class="ident" id="2327849">fnParseInt</span><span class="op" id="2327859">,</span>&nbsp;<span class="ident" id="2327861">s</span><span class="op" id="2327862">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2327865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2327869">//&nbsp;Pick&nbsp;off&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2327896">s0</span>&nbsp;<span class="op" id="2327899">:=</span>&nbsp;<span class="ident" id="2327902">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2327905">neg</span>&nbsp;<span class="op" id="2327909">:=</span>&nbsp;<span class="builtintype" id="2327912">false</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2327919">if</span>&nbsp;<span class="ident" id="2327922">s</span><span class="op" id="2327923">[</span><span class="num" id="2327924">0</span><span class="op" id="2327925">]</span>&nbsp;<span class="op" id="2327927">==</span>&nbsp;<span class="string" id="2327930">&#39;+&#39;</span>&nbsp;<span class="op" id="2327934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2327938">s</span>&nbsp;<span class="op" id="2327940">=</span>&nbsp;<span class="ident" id="2327942">s</span><span class="op" id="2327943">[</span><span class="num" id="2327944">1</span><span class="op" id="2327945">:</span><span class="op" id="2327946">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2327949">}</span>&nbsp;<span class="keyword" id="2327951">else</span>&nbsp;<span class="keyword" id="2327956">if</span>&nbsp;<span class="ident" id="2327959">s</span><span class="op" id="2327960">[</span><span class="num" id="2327961">0</span><span class="op" id="2327962">]</span>&nbsp;<span class="op" id="2327964">==</span>&nbsp;<span class="string" id="2327967">&#39;-&#39;</span>&nbsp;<span class="op" id="2327971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2327975">neg</span>&nbsp;<span class="op" id="2327979">=</span>&nbsp;<span class="builtintype" id="2327981">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2327988">s</span>&nbsp;<span class="op" id="2327990">=</span>&nbsp;<span class="ident" id="2327992">s</span><span class="op" id="2327993">[</span><span class="num" id="2327994">1</span><span class="op" id="2327995">:</span><span class="op" id="2327996">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2327999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2328003">//&nbsp;Convert&nbsp;unsigned&nbsp;and&nbsp;check&nbsp;range.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2328041">var</span>&nbsp;<span class="ident" id="2328045">un</span>&nbsp;<span class="ident" id="2328048">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2328056">un</span><span class="op" id="2328058">,</span>&nbsp;<span class="ident" id="2328060">err</span>&nbsp;<span class="op" id="2328064">=</span>&nbsp;<span class="ident" id="2328066">ParseUint</span><span class="op" id="2328075">(</span><span class="ident" id="2328076">s</span><span class="op" id="2328077">,</span>&nbsp;<span class="ident" id="2328079">base</span><span class="op" id="2328083">,</span>&nbsp;<span class="ident" id="2328085">bitSize</span><span class="op" id="2328092">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2328095">if</span>&nbsp;<span class="ident" id="2328098">err</span>&nbsp;<span class="op" id="2328102">!=</span>&nbsp;<span class="ident" id="2328105">nil</span>&nbsp;<span class="op" id="2328109">&amp;&amp;</span>&nbsp;<span class="ident" id="2328112">err</span><span class="op" id="2328115">.</span><span class="op" id="2328116">(</span><span class="op" id="2328117">*</span><span class="ident" id="2328118">NumError</span><span class="op" id="2328126">)</span><span class="op" id="2328127">.</span><span class="ident" id="2328128">Err</span>&nbsp;<span class="op" id="2328132">!=</span>&nbsp;<span class="ident" id="2328135">ErrRange</span>&nbsp;<span class="op" id="2328144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2328148">err</span><span class="op" id="2328151">.</span><span class="op" id="2328152">(</span><span class="op" id="2328153">*</span><span class="ident" id="2328154">NumError</span><span class="op" id="2328162">)</span><span class="op" id="2328163">.</span><span class="ident" id="2328164">Func</span>&nbsp;<span class="op" id="2328169">=</span>&nbsp;<span class="ident" id="2328171">fnParseInt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2328184">err</span><span class="op" id="2328187">.</span><span class="op" id="2328188">(</span><span class="op" id="2328189">*</span><span class="ident" id="2328190">NumError</span><span class="op" id="2328198">)</span><span class="op" id="2328199">.</span><span class="ident" id="2328200">Num</span>&nbsp;<span class="op" id="2328204">=</span>&nbsp;<span class="ident" id="2328206">s0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2328211">return</span>&nbsp;<span class="num" id="2328218">0</span><span class="op" id="2328219">,</span>&nbsp;<span class="ident" id="2328221">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2328226">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2328229">cutoff</span>&nbsp;<span class="op" id="2328236">:=</span>&nbsp;<span class="ident" id="2328239">uint64</span><span class="op" id="2328245">(</span><span class="num" id="2328246">1</span>&nbsp;<span class="op" id="2328248">&lt;&lt;</span>&nbsp;<span class="builtintype" id="2328251">uint</span><span class="op" id="2328255">(</span><span class="ident" id="2328256">bitSize</span><span class="op" id="2328263">-</span><span class="num" id="2328264">1</span><span class="op" id="2328265">)</span><span class="op" id="2328266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2328269">if</span>&nbsp;<span class="op" id="2328272">!</span><span class="ident" id="2328273">neg</span>&nbsp;<span class="op" id="2328277">&amp;&amp;</span>&nbsp;<span class="ident" id="2328280">un</span>&nbsp;<span class="op" id="2328283">&gt;=</span>&nbsp;<span class="ident" id="2328286">cutoff</span>&nbsp;<span class="op" id="2328293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2328297">return</span>&nbsp;<span class="ident" id="2328304">int64</span><span class="op" id="2328309">(</span><span class="ident" id="2328310">cutoff</span>&nbsp;<span class="op" id="2328317">-</span>&nbsp;<span class="num" id="2328319">1</span><span class="op" id="2328320">)</span><span class="op" id="2328321">,</span>&nbsp;<span class="ident" id="2328323">rangeError</span><span class="op" id="2328333">(</span><span class="ident" id="2328334">fnParseInt</span><span class="op" id="2328344">,</span>&nbsp;<span class="ident" id="2328346">s0</span><span class="op" id="2328348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2328351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2328354">if</span>&nbsp;<span class="ident" id="2328357">neg</span>&nbsp;<span class="op" id="2328361">&amp;&amp;</span>&nbsp;<span class="ident" id="2328364">un</span>&nbsp;<span class="op" id="2328367">&gt;</span>&nbsp;<span class="ident" id="2328369">cutoff</span>&nbsp;<span class="op" id="2328376">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2328380">return</span>&nbsp;<span class="op" id="2328387">-</span><span class="ident" id="2328388">int64</span><span class="op" id="2328393">(</span><span class="ident" id="2328394">cutoff</span><span class="op" id="2328400">)</span><span class="op" id="2328401">,</span>&nbsp;<span class="ident" id="2328403">rangeError</span><span class="op" id="2328413">(</span><span class="ident" id="2328414">fnParseInt</span><span class="op" id="2328424">,</span>&nbsp;<span class="ident" id="2328426">s0</span><span class="op" id="2328428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2328431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2328434">n</span>&nbsp;<span class="op" id="2328436">:=</span>&nbsp;<span class="ident" id="2328439">int64</span><span class="op" id="2328444">(</span><span class="ident" id="2328445">un</span><span class="op" id="2328447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2328450">if</span>&nbsp;<span class="ident" id="2328453">neg</span>&nbsp;<span class="op" id="2328457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2328461">n</span>&nbsp;<span class="op" id="2328463">=</span>&nbsp;<span class="op" id="2328465">-</span><span class="ident" id="2328466">n</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2328469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2328472">return</span>&nbsp;<span class="ident" id="2328479">n</span><span class="op" id="2328480">,</span>&nbsp;<span class="ident" id="2328482">nil</span><br>
<span class="lineno"></span><span class="op" id="2328486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2328489">//&nbsp;Atoi&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;ParseInt(s,&nbsp;10,&nbsp;0).</span><br>
<span class="lineno">195</span><span class="keyword" id="2328534">func</span>&nbsp;<span class="ident" id="2328539">Atoi</span><span class="op" id="2328543">(</span><span class="ident" id="2328544">s</span>&nbsp;<span class="builtintype" id="2328546">string</span><span class="op" id="2328552">)</span>&nbsp;<span class="op" id="2328554">(</span><span class="ident" id="2328555">i</span>&nbsp;<span class="builtintype" id="2328557">int</span><span class="op" id="2328560">,</span>&nbsp;<span class="ident" id="2328562">err</span>&nbsp;<span class="builtintype" id="2328566">error</span><span class="op" id="2328571">)</span>&nbsp;<span class="op" id="2328573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2328576">i64</span><span class="op" id="2328579">,</span>&nbsp;<span class="ident" id="2328581">err</span>&nbsp;<span class="op" id="2328585">:=</span>&nbsp;<span class="ident" id="2328588">ParseInt</span><span class="op" id="2328596">(</span><span class="ident" id="2328597">s</span><span class="op" id="2328598">,</span>&nbsp;<span class="num" id="2328600">10</span><span class="op" id="2328602">,</span>&nbsp;<span class="num" id="2328604">0</span><span class="op" id="2328605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2328608">return</span>&nbsp;<span class="builtintype" id="2328615">int</span><span class="op" id="2328618">(</span><span class="ident" id="2328619">i64</span><span class="op" id="2328622">)</span><span class="op" id="2328623">,</span>&nbsp;<span class="ident" id="2328625">err</span><br>
<span class="lineno"></span><span class="op" id="2328629">}</span>
</div>
</body>
</html>
