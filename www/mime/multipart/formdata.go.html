<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3604661">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3604716">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3604770">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3604821">package</span>&nbsp;<span class="ident" id="3604829">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3604840">import</span>&nbsp;<span class="op" id="3604847">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3604850">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3604859">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3604869">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3604875">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3604888">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3604905">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3604910">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3604913">//&nbsp;TODO(adg,bradfitz):&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;unify&nbsp;the&nbsp;DoS-prevention&nbsp;strategy&nbsp;here</span><br>
<span class="lineno"></span><span class="comment" id="3604989">//&nbsp;with&nbsp;that&nbsp;of&nbsp;the&nbsp;http&nbsp;package&#39;s&nbsp;ParseForm.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3605036">//&nbsp;ReadForm&nbsp;parses&nbsp;an&nbsp;entire&nbsp;multipart&nbsp;message&nbsp;whose&nbsp;parts&nbsp;have</span><br>
<span class="lineno">20</span><span class="comment" id="3605100">//&nbsp;a&nbsp;Content-Disposition&nbsp;of&nbsp;&#34;form-data&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3605141">//&nbsp;It&nbsp;stores&nbsp;up&nbsp;to&nbsp;maxMemory&nbsp;bytes&nbsp;of&nbsp;the&nbsp;file&nbsp;parts&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span><span class="comment" id="3605204">//&nbsp;and&nbsp;the&nbsp;remainder&nbsp;on&nbsp;disk&nbsp;in&nbsp;temporary&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="3605253">func</span>&nbsp;<span class="op" id="3605258">(</span><span class="ident" id="3605259">r</span>&nbsp;<span class="op" id="3605261">*</span><span class="ident" id="3605262"><a href="/mime/multipart/multipart.go.html#3613969">Reader</a></span><span class="op" id="3605268">)</span>&nbsp;<span class="ident" id="3605270">ReadForm</span><span class="op" id="3605278">(</span><span class="ident" id="3605279">maxMemory</span>&nbsp;<span class="ident" id="3605289">int64</span><span class="op" id="3605294">)</span>&nbsp;<span class="op" id="3605296">(</span><span class="ident" id="3605297">f</span>&nbsp;<span class="op" id="3605299">*</span><span class="ident" id="3605300"><a href="/mime/multipart/formdata.go.html#3606990">Form</a></span><span class="op" id="3605304">,</span>&nbsp;<span class="ident" id="3605306">err</span>&nbsp;<span class="builtintype" id="3605310">error</span><span class="op" id="3605315">)</span>&nbsp;<span class="op" id="3605317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605320">form</span>&nbsp;<span class="op" id="3605325">:=</span>&nbsp;<span class="op" id="3605328">&amp;</span><span class="ident" id="3605329"><a href="/mime/multipart/formdata.go.html#3606990">Form</a></span><span class="op" id="3605333">{</span><span class="builtinfunc" id="3605334">make</span><span class="op" id="3605338">(</span><span class="keyword" id="3605339">map</span><span class="op" id="3605342">[</span><span class="builtintype" id="3605343">string</span><span class="op" id="3605349">]</span><span class="op" id="3605350">[</span><span class="op" id="3605351">]</span><span class="builtintype" id="3605352">string</span><span class="op" id="3605358">)</span><span class="op" id="3605359">,</span>&nbsp;<span class="builtinfunc" id="3605361">make</span><span class="op" id="3605365">(</span><span class="keyword" id="3605366">map</span><span class="op" id="3605369">[</span><span class="builtintype" id="3605370">string</span><span class="op" id="3605376">]</span><span class="op" id="3605377">[</span><span class="op" id="3605378">]</span><span class="op" id="3605379">*</span><span class="ident" id="3605380"><a href="/mime/multipart/formdata.go.html#3607439">FileHeader</a></span><span class="op" id="3605390">)</span><span class="op" id="3605391">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605394">defer</span>&nbsp;<span class="keyword" id="3605400">func</span><span class="op" id="3605404">(</span><span class="op" id="3605405">)</span>&nbsp;<span class="op" id="3605407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605411">if</span>&nbsp;<span class="ident" id="3605414"><a href="/mime/multipart/formdata.go.html#3605306">err</a></span>&nbsp;<span class="op" id="3605418">!=</span>&nbsp;<span class="ident" id="3605421">nil</span>&nbsp;<span class="op" id="3605425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605430"><a href="/mime/multipart/formdata.go.html#3605320">form</a></span><span class="op" id="3605434">.</span><span class="ident" id="3605435">RemoveAll</span><span class="op" id="3605444">(</span><span class="op" id="3605445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3605449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3605452">}</span><span class="op" id="3605453">(</span><span class="op" id="3605454">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605458">maxValueBytes</span>&nbsp;<span class="op" id="3605472">:=</span>&nbsp;<span class="ident" id="3605475">int64</span><span class="op" id="3605480">(</span><span class="num" id="3605481">10</span>&nbsp;<span class="op" id="3605484">&lt;&lt;</span>&nbsp;<span class="num" id="3605487">20</span><span class="op" id="3605489">)</span>&nbsp;<span class="comment" id="3605491">//&nbsp;10&nbsp;MB&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605519">for</span>&nbsp;<span class="op" id="3605523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605527">p</span><span class="op" id="3605528">,</span>&nbsp;<span class="ident" id="3605530">err</span>&nbsp;<span class="op" id="3605534">:=</span>&nbsp;<span class="ident" id="3605537"><a href="/mime/multipart/formdata.go.html#3605259">r</a></span><span class="op" id="3605538">.</span><span class="ident" id="3605539">NextPart</span><span class="op" id="3605547">(</span><span class="op" id="3605548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605552">if</span>&nbsp;<span class="ident" id="3605555"><a href="/mime/multipart/formdata.go.html#3605530">err</a></span>&nbsp;<span class="op" id="3605559">==</span>&nbsp;<span class="ident" id="3605562"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3605564">.</span><span class="ident" id="3605565">EOF</span>&nbsp;<span class="op" id="3605569">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605574">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3605582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605586">if</span>&nbsp;<span class="ident" id="3605589"><a href="/mime/multipart/formdata.go.html#3605530">err</a></span>&nbsp;<span class="op" id="3605593">!=</span>&nbsp;<span class="ident" id="3605596">nil</span>&nbsp;<span class="op" id="3605600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605605">return</span>&nbsp;<span class="ident" id="3605612">nil</span><span class="op" id="3605615">,</span>&nbsp;<span class="ident" id="3605617"><a href="/mime/multipart/formdata.go.html#3605530">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3605623">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605628">name</span>&nbsp;<span class="op" id="3605633">:=</span>&nbsp;<span class="ident" id="3605636"><a href="/mime/multipart/formdata.go.html#3605527">p</a></span><span class="op" id="3605637">.</span><span class="ident" id="3605638">FormName</span><span class="op" id="3605646">(</span><span class="op" id="3605647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605651">if</span>&nbsp;<span class="ident" id="3605654"><a href="/mime/multipart/formdata.go.html#3605628">name</a></span>&nbsp;<span class="op" id="3605659">==</span>&nbsp;<span class="string" id="3605662">&#34;&#34;</span>&nbsp;<span class="op" id="3605665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605670">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3605681">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605685">filename</span>&nbsp;<span class="op" id="3605694">:=</span>&nbsp;<span class="ident" id="3605697"><a href="/mime/multipart/formdata.go.html#3605527">p</a></span><span class="op" id="3605698">.</span><span class="ident" id="3605699">FileName</span><span class="op" id="3605707">(</span><span class="op" id="3605708">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605713">var</span>&nbsp;<span class="ident" id="3605717">b</span>&nbsp;<span class="ident" id="3605719"><a href="/mime/multipart/formdata.go.html#3604850">bytes</a></span><span class="op" id="3605724">.</span><span class="ident" id="3605725">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605735">if</span>&nbsp;<span class="ident" id="3605738"><a href="/mime/multipart/formdata.go.html#3605685">filename</a></span>&nbsp;<span class="op" id="3605747">==</span>&nbsp;<span class="string" id="3605750">&#34;&#34;</span>&nbsp;<span class="op" id="3605753">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3605758">//&nbsp;value,&nbsp;store&nbsp;as&nbsp;string&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605797">n</span><span class="op" id="3605798">,</span>&nbsp;<span class="ident" id="3605800">err</span>&nbsp;<span class="op" id="3605804">:=</span>&nbsp;<span class="ident" id="3605807"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3605809">.</span><span class="ident" id="3605810">CopyN</span><span class="op" id="3605815">(</span><span class="op" id="3605816">&amp;</span><span class="ident" id="3605817"><a href="/mime/multipart/formdata.go.html#3605717">b</a></span><span class="op" id="3605818">,</span>&nbsp;<span class="ident" id="3605820"><a href="/mime/multipart/formdata.go.html#3605527">p</a></span><span class="op" id="3605821">,</span>&nbsp;<span class="ident" id="3605823"><a href="/mime/multipart/formdata.go.html#3605458">maxValueBytes</a></span><span class="op" id="3605836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605841">if</span>&nbsp;<span class="ident" id="3605844"><a href="/mime/multipart/formdata.go.html#3605800">err</a></span>&nbsp;<span class="op" id="3605848">!=</span>&nbsp;<span class="ident" id="3605851">nil</span>&nbsp;<span class="op" id="3605855">&amp;&amp;</span>&nbsp;<span class="ident" id="3605858"><a href="/mime/multipart/formdata.go.html#3605800">err</a></span>&nbsp;<span class="op" id="3605862">!=</span>&nbsp;<span class="ident" id="3605865"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3605867">.</span><span class="ident" id="3605868">EOF</span>&nbsp;<span class="op" id="3605872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605878">return</span>&nbsp;<span class="ident" id="3605885">nil</span><span class="op" id="3605888">,</span>&nbsp;<span class="ident" id="3605890"><a href="/mime/multipart/formdata.go.html#3605800">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3605897">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3605902"><a href="/mime/multipart/formdata.go.html#3605458">maxValueBytes</a></span>&nbsp;<span class="op" id="3605916">-=</span>&nbsp;<span class="ident" id="3605919"><a href="/mime/multipart/formdata.go.html#3605797">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605924">if</span>&nbsp;<span class="ident" id="3605927"><a href="/mime/multipart/formdata.go.html#3605458">maxValueBytes</a></span>&nbsp;<span class="op" id="3605941">==</span>&nbsp;<span class="num" id="3605944">0</span>&nbsp;<span class="op" id="3605946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3605952">return</span>&nbsp;<span class="ident" id="3605959">nil</span><span class="op" id="3605962">,</span>&nbsp;<span class="ident" id="3605964"><a href="/mime/multipart/formdata.go.html#3604859">errors</a></span><span class="op" id="3605970">.</span><span class="ident" id="3605971">New</span><span class="op" id="3605974">(</span><span class="string" id="3605975">&#34;multipart:&nbsp;message&nbsp;too&nbsp;large&#34;</span><span class="op" id="3606005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606015"><a href="/mime/multipart/formdata.go.html#3605320">form</a></span><span class="op" id="3606019">.</span><span class="ident" id="3606020">Value</span><span class="op" id="3606025">[</span><span class="ident" id="3606026"><a href="/mime/multipart/formdata.go.html#3605628">name</a></span><span class="op" id="3606030">]</span>&nbsp;<span class="op" id="3606032">=</span>&nbsp;<span class="builtinfunc" id="3606034">append</span><span class="op" id="3606040">(</span><span class="ident" id="3606041"><a href="/mime/multipart/formdata.go.html#3605320">form</a></span><span class="op" id="3606045">.</span><span class="ident" id="3606046">Value</span><span class="op" id="3606051">[</span><span class="ident" id="3606052"><a href="/mime/multipart/formdata.go.html#3605628">name</a></span><span class="op" id="3606056">]</span><span class="op" id="3606057">,</span>&nbsp;<span class="ident" id="3606059"><a href="/mime/multipart/formdata.go.html#3605717">b</a></span><span class="op" id="3606060">.</span><span class="ident" id="3606061">String</span><span class="op" id="3606067">(</span><span class="op" id="3606068">)</span><span class="op" id="3606069">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606074">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606090">//&nbsp;file,&nbsp;store&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606128">fh</span>&nbsp;<span class="op" id="3606131">:=</span>&nbsp;<span class="op" id="3606134">&amp;</span><span class="ident" id="3606135"><a href="/mime/multipart/formdata.go.html#3607439">FileHeader</a></span><span class="op" id="3606145">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606150">Filename</span><span class="op" id="3606158">:</span>&nbsp;<span class="ident" id="3606160"><a href="/mime/multipart/formdata.go.html#3605685">filename</a></span><span class="op" id="3606168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606173">Header</span><span class="op" id="3606179">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3606183"><a href="/mime/multipart/formdata.go.html#3605527">p</a></span><span class="op" id="3606184">.</span><span class="ident" id="3606185">Header</span><span class="op" id="3606191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606199">n</span><span class="op" id="3606200">,</span>&nbsp;<span class="ident" id="3606202"><a href="/mime/multipart/formdata.go.html#3605530">err</a></span>&nbsp;<span class="op" id="3606206">:=</span>&nbsp;<span class="ident" id="3606209"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3606211">.</span><span class="ident" id="3606212">CopyN</span><span class="op" id="3606217">(</span><span class="op" id="3606218">&amp;</span><span class="ident" id="3606219"><a href="/mime/multipart/formdata.go.html#3605717">b</a></span><span class="op" id="3606220">,</span>&nbsp;<span class="ident" id="3606222"><a href="/mime/multipart/formdata.go.html#3605527">p</a></span><span class="op" id="3606223">,</span>&nbsp;<span class="ident" id="3606225"><a href="/mime/multipart/formdata.go.html#3605279">maxMemory</a></span><span class="op" id="3606234">+</span><span class="num" id="3606235">1</span><span class="op" id="3606236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606240">if</span>&nbsp;<span class="ident" id="3606243"><a href="/mime/multipart/formdata.go.html#3605530">err</a></span>&nbsp;<span class="op" id="3606247">!=</span>&nbsp;<span class="ident" id="3606250">nil</span>&nbsp;<span class="op" id="3606254">&amp;&amp;</span>&nbsp;<span class="ident" id="3606257"><a href="/mime/multipart/formdata.go.html#3605530">err</a></span>&nbsp;<span class="op" id="3606261">!=</span>&nbsp;<span class="ident" id="3606264"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3606266">.</span><span class="ident" id="3606267">EOF</span>&nbsp;<span class="op" id="3606271">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606276">return</span>&nbsp;<span class="ident" id="3606283">nil</span><span class="op" id="3606286">,</span>&nbsp;<span class="ident" id="3606288"><a href="/mime/multipart/formdata.go.html#3605530">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606298">if</span>&nbsp;<span class="ident" id="3606301"><a href="/mime/multipart/formdata.go.html#3606199">n</a></span>&nbsp;<span class="op" id="3606303">&gt;</span>&nbsp;<span class="ident" id="3606305"><a href="/mime/multipart/formdata.go.html#3605279">maxMemory</a></span>&nbsp;<span class="op" id="3606315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3606320">//&nbsp;too&nbsp;big,&nbsp;write&nbsp;to&nbsp;disk&nbsp;and&nbsp;flush&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606366">file</span><span class="op" id="3606370">,</span>&nbsp;<span class="ident" id="3606372">err</span>&nbsp;<span class="op" id="3606376">:=</span>&nbsp;<span class="ident" id="3606379"><a href="/mime/multipart/formdata.go.html#3604875">ioutil</a></span><span class="op" id="3606385">.</span><span class="ident" id="3606386">TempFile</span><span class="op" id="3606394">(</span><span class="string" id="3606395">&#34;&#34;</span><span class="op" id="3606397">,</span>&nbsp;<span class="string" id="3606399">&#34;multipart-&#34;</span><span class="op" id="3606411">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606416">if</span>&nbsp;<span class="ident" id="3606419"><a href="/mime/multipart/formdata.go.html#3606372">err</a></span>&nbsp;<span class="op" id="3606423">!=</span>&nbsp;<span class="ident" id="3606426">nil</span>&nbsp;<span class="op" id="3606430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606436">return</span>&nbsp;<span class="ident" id="3606443">nil</span><span class="op" id="3606446">,</span>&nbsp;<span class="ident" id="3606448"><a href="/mime/multipart/formdata.go.html#3606372">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606460">defer</span>&nbsp;<span class="ident" id="3606466"><a href="/mime/multipart/formdata.go.html#3606366">file</a></span><span class="op" id="3606470">.</span><span class="ident" id="3606471">Close</span><span class="op" id="3606476">(</span><span class="op" id="3606477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606482">_</span><span class="op" id="3606483">,</span>&nbsp;<span class="ident" id="3606485"><a href="/mime/multipart/formdata.go.html#3606372">err</a></span>&nbsp;<span class="op" id="3606489">=</span>&nbsp;<span class="ident" id="3606491"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3606493">.</span><span class="ident" id="3606494">Copy</span><span class="op" id="3606498">(</span><span class="ident" id="3606499"><a href="/mime/multipart/formdata.go.html#3606366">file</a></span><span class="op" id="3606503">,</span>&nbsp;<span class="ident" id="3606505"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3606507">.</span><span class="ident" id="3606508">MultiReader</span><span class="op" id="3606519">(</span><span class="op" id="3606520">&amp;</span><span class="ident" id="3606521"><a href="/mime/multipart/formdata.go.html#3605717">b</a></span><span class="op" id="3606522">,</span>&nbsp;<span class="ident" id="3606524"><a href="/mime/multipart/formdata.go.html#3605527">p</a></span><span class="op" id="3606525">)</span><span class="op" id="3606526">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606531">if</span>&nbsp;<span class="ident" id="3606534"><a href="/mime/multipart/formdata.go.html#3606372">err</a></span>&nbsp;<span class="op" id="3606538">!=</span>&nbsp;<span class="ident" id="3606541">nil</span>&nbsp;<span class="op" id="3606545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606551"><a href="/mime/multipart/formdata.go.html#3604905">os</a></span><span class="op" id="3606553">.</span><span class="ident" id="3606554">Remove</span><span class="op" id="3606560">(</span><span class="ident" id="3606561"><a href="/mime/multipart/formdata.go.html#3606366">file</a></span><span class="op" id="3606565">.</span><span class="ident" id="3606566">Name</span><span class="op" id="3606570">(</span><span class="op" id="3606571">)</span><span class="op" id="3606572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606578">return</span>&nbsp;<span class="ident" id="3606585">nil</span><span class="op" id="3606588">,</span>&nbsp;<span class="ident" id="3606590"><a href="/mime/multipart/formdata.go.html#3606372">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606602"><a href="/mime/multipart/formdata.go.html#3606128">fh</a></span><span class="op" id="3606604">.</span><span class="ident" id="3606605">tmpfile</span>&nbsp;<span class="op" id="3606613">=</span>&nbsp;<span class="ident" id="3606615"><a href="/mime/multipart/formdata.go.html#3606366">file</a></span><span class="op" id="3606619">.</span><span class="ident" id="3606620">Name</span><span class="op" id="3606624">(</span><span class="op" id="3606625">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606629">}</span>&nbsp;<span class="keyword" id="3606631">else</span>&nbsp;<span class="op" id="3606636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606641"><a href="/mime/multipart/formdata.go.html#3606128">fh</a></span><span class="op" id="3606643">.</span><span class="ident" id="3606644">content</span>&nbsp;<span class="op" id="3606652">=</span>&nbsp;<span class="ident" id="3606654"><a href="/mime/multipart/formdata.go.html#3605717">b</a></span><span class="op" id="3606655">.</span><span class="ident" id="3606656">Bytes</span><span class="op" id="3606661">(</span><span class="op" id="3606662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606667"><a href="/mime/multipart/formdata.go.html#3605279">maxMemory</a></span>&nbsp;<span class="op" id="3606677">-=</span>&nbsp;<span class="ident" id="3606680"><a href="/mime/multipart/formdata.go.html#3606199">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3606688"><a href="/mime/multipart/formdata.go.html#3605320">form</a></span><span class="op" id="3606692">.</span><span class="ident" id="3606693">File</span><span class="op" id="3606697">[</span><span class="ident" id="3606698"><a href="/mime/multipart/formdata.go.html#3605628">name</a></span><span class="op" id="3606702">]</span>&nbsp;<span class="op" id="3606704">=</span>&nbsp;<span class="builtinfunc" id="3606706">append</span><span class="op" id="3606712">(</span><span class="ident" id="3606713"><a href="/mime/multipart/formdata.go.html#3605320">form</a></span><span class="op" id="3606717">.</span><span class="ident" id="3606718">File</span><span class="op" id="3606722">[</span><span class="ident" id="3606723"><a href="/mime/multipart/formdata.go.html#3605628">name</a></span><span class="op" id="3606727">]</span><span class="op" id="3606728">,</span>&nbsp;<span class="ident" id="3606730"><a href="/mime/multipart/formdata.go.html#3606128">fh</a></span><span class="op" id="3606732">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3606735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3606739">return</span>&nbsp;<span class="ident" id="3606746"><a href="/mime/multipart/formdata.go.html#3605320">form</a></span><span class="op" id="3606750">,</span>&nbsp;<span class="ident" id="3606752">nil</span><br>
<span class="lineno"></span><span class="op" id="3606756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="3606759">//&nbsp;Form&nbsp;is&nbsp;a&nbsp;parsed&nbsp;multipart&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="3606795">//&nbsp;Its&nbsp;File&nbsp;parts&nbsp;are&nbsp;stored&nbsp;either&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk,</span><br>
<span class="lineno"></span><span class="comment" id="3606853">//&nbsp;and&nbsp;are&nbsp;accessible&nbsp;via&nbsp;the&nbsp;*FileHeader&#39;s&nbsp;Open&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="3606910">//&nbsp;Its&nbsp;Value&nbsp;parts&nbsp;are&nbsp;stored&nbsp;as&nbsp;strings.</span><br>
<span class="lineno"></span><span class="comment" id="3606952">//&nbsp;Both&nbsp;are&nbsp;keyed&nbsp;by&nbsp;field&nbsp;name.</span><br>
<span class="lineno">100</span><span class="keyword" id="3606985">type</span>&nbsp;<span class="ident" id="3606990">Form</span>&nbsp;<span class="keyword" id="3606995">struct</span>&nbsp;<span class="op" id="3607002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3607005">Value</span>&nbsp;<span class="keyword" id="3607011">map</span><span class="op" id="3607014">[</span><span class="builtintype" id="3607015">string</span><span class="op" id="3607021">]</span><span class="op" id="3607022">[</span><span class="op" id="3607023">]</span><span class="builtintype" id="3607024">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3607032">File</span>&nbsp;&nbsp;<span class="keyword" id="3607038">map</span><span class="op" id="3607041">[</span><span class="builtintype" id="3607042">string</span><span class="op" id="3607048">]</span><span class="op" id="3607049">[</span><span class="op" id="3607050">]</span><span class="op" id="3607051">*</span><span class="ident" id="3607052"><a href="/mime/multipart/formdata.go.html#3607439">FileHeader</a></span><br>
<span class="lineno"></span><span class="op" id="3607063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3607066">//&nbsp;RemoveAll&nbsp;removes&nbsp;any&nbsp;temporary&nbsp;files&nbsp;associated&nbsp;with&nbsp;a&nbsp;Form.</span><br>
<span class="lineno"></span><span class="keyword" id="3607131">func</span>&nbsp;<span class="op" id="3607136">(</span><span class="ident" id="3607137">f</span>&nbsp;<span class="op" id="3607139">*</span><span class="ident" id="3607140"><a href="/mime/multipart/formdata.go.html#3606990">Form</a></span><span class="op" id="3607144">)</span>&nbsp;<span class="ident" id="3607146">RemoveAll</span><span class="op" id="3607155">(</span><span class="op" id="3607156">)</span>&nbsp;<span class="builtintype" id="3607158">error</span>&nbsp;<span class="op" id="3607164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607167">var</span>&nbsp;<span class="ident" id="3607171">err</span>&nbsp;<span class="builtintype" id="3607175">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607182">for</span>&nbsp;<span class="ident" id="3607186">_</span><span class="op" id="3607187">,</span>&nbsp;<span class="ident" id="3607189">fhs</span>&nbsp;<span class="op" id="3607193">:=</span>&nbsp;<span class="keyword" id="3607196">range</span>&nbsp;<span class="ident" id="3607202"><a href="/mime/multipart/formdata.go.html#3607137">f</a></span><span class="op" id="3607203">.</span><span class="ident" id="3607204">File</span>&nbsp;<span class="op" id="3607209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607213">for</span>&nbsp;<span class="ident" id="3607217">_</span><span class="op" id="3607218">,</span>&nbsp;<span class="ident" id="3607220">fh</span>&nbsp;<span class="op" id="3607223">:=</span>&nbsp;<span class="keyword" id="3607226">range</span>&nbsp;<span class="ident" id="3607232"><a href="/mime/multipart/formdata.go.html#3607189">fhs</a></span>&nbsp;<span class="op" id="3607236">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607241">if</span>&nbsp;<span class="ident" id="3607244"><a href="/mime/multipart/formdata.go.html#3607220">fh</a></span><span class="op" id="3607246">.</span><span class="ident" id="3607247">tmpfile</span>&nbsp;<span class="op" id="3607255">!=</span>&nbsp;<span class="string" id="3607258">&#34;&#34;</span>&nbsp;<span class="op" id="3607261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3607267">e</span>&nbsp;<span class="op" id="3607269">:=</span>&nbsp;<span class="ident" id="3607272"><a href="/mime/multipart/formdata.go.html#3604905">os</a></span><span class="op" id="3607274">.</span><span class="ident" id="3607275">Remove</span><span class="op" id="3607281">(</span><span class="ident" id="3607282"><a href="/mime/multipart/formdata.go.html#3607220">fh</a></span><span class="op" id="3607284">.</span><span class="ident" id="3607285">tmpfile</span><span class="op" id="3607292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607298">if</span>&nbsp;<span class="ident" id="3607301"><a href="/mime/multipart/formdata.go.html#3607267">e</a></span>&nbsp;<span class="op" id="3607303">!=</span>&nbsp;<span class="ident" id="3607306">nil</span>&nbsp;<span class="op" id="3607310">&amp;&amp;</span>&nbsp;<span class="ident" id="3607313"><a href="/mime/multipart/formdata.go.html#3607171">err</a></span>&nbsp;<span class="op" id="3607317">==</span>&nbsp;<span class="ident" id="3607320">nil</span>&nbsp;<span class="op" id="3607324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3607331"><a href="/mime/multipart/formdata.go.html#3607171">err</a></span>&nbsp;<span class="op" id="3607335">=</span>&nbsp;<span class="ident" id="3607337"><a href="/mime/multipart/formdata.go.html#3607267">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3607343">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3607348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3607352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3607355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607358">return</span>&nbsp;<span class="ident" id="3607365"><a href="/mime/multipart/formdata.go.html#3607171">err</a></span><br>
<span class="lineno"></span><span class="op" id="3607369">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3607372">//&nbsp;A&nbsp;FileHeader&nbsp;describes&nbsp;a&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="3607434">type</span>&nbsp;<span class="ident" id="3607439">FileHeader</span>&nbsp;<span class="keyword" id="3607450">struct</span>&nbsp;<span class="op" id="3607457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3607460">Filename</span>&nbsp;<span class="builtintype" id="3607469">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3607477">Header</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3607486"><a href="/mime/multipart/formdata.go.html#3604888">textproto</a></span><span class="op" id="3607495">.</span><span class="ident" id="3607496">MIMEHeader</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3607509">content</span>&nbsp;<span class="op" id="3607517">[</span><span class="op" id="3607518">]</span><span class="builtintype" id="3607519">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3607525">tmpfile</span>&nbsp;<span class="builtintype" id="3607533">string</span><br>
<span class="lineno"></span><span class="op" id="3607540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="3607543">//&nbsp;Open&nbsp;opens&nbsp;and&nbsp;returns&nbsp;the&nbsp;FileHeader&#39;s&nbsp;associated&nbsp;File.</span><br>
<span class="lineno"></span><span class="keyword" id="3607603">func</span>&nbsp;<span class="op" id="3607608">(</span><span class="ident" id="3607609">fh</span>&nbsp;<span class="op" id="3607612">*</span><span class="ident" id="3607613"><a href="/mime/multipart/formdata.go.html#3607439">FileHeader</a></span><span class="op" id="3607623">)</span>&nbsp;<span class="ident" id="3607625">Open</span><span class="op" id="3607629">(</span><span class="op" id="3607630">)</span>&nbsp;<span class="op" id="3607632">(</span><span class="ident" id="3607633"><a href="/mime/multipart/formdata.go.html#3608029">File</a></span><span class="op" id="3607637">,</span>&nbsp;<span class="builtintype" id="3607639">error</span><span class="op" id="3607644">)</span>&nbsp;<span class="op" id="3607646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607649">if</span>&nbsp;<span class="ident" id="3607652">b</span>&nbsp;<span class="op" id="3607654">:=</span>&nbsp;<span class="ident" id="3607657"><a href="/mime/multipart/formdata.go.html#3607609">fh</a></span><span class="op" id="3607659">.</span><span class="ident" id="3607660">content</span><span class="op" id="3607667">;</span>&nbsp;<span class="ident" id="3607669"><a href="/mime/multipart/formdata.go.html#3607652">b</a></span>&nbsp;<span class="op" id="3607671">!=</span>&nbsp;<span class="ident" id="3607674">nil</span>&nbsp;<span class="op" id="3607678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3607682">r</span>&nbsp;<span class="op" id="3607684">:=</span>&nbsp;<span class="ident" id="3607687"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3607689">.</span><span class="ident" id="3607690">NewSectionReader</span><span class="op" id="3607706">(</span><span class="ident" id="3607707"><a href="/mime/multipart/formdata.go.html#3604850">bytes</a></span><span class="op" id="3607712">.</span><span class="ident" id="3607713">NewReader</span><span class="op" id="3607722">(</span><span class="ident" id="3607723"><a href="/mime/multipart/formdata.go.html#3607652">b</a></span><span class="op" id="3607724">)</span><span class="op" id="3607725">,</span>&nbsp;<span class="num" id="3607727">0</span><span class="op" id="3607728">,</span>&nbsp;<span class="ident" id="3607730">int64</span><span class="op" id="3607735">(</span><span class="builtinfunc" id="3607736">len</span><span class="op" id="3607739">(</span><span class="ident" id="3607740"><a href="/mime/multipart/formdata.go.html#3607652">b</a></span><span class="op" id="3607741">)</span><span class="op" id="3607742">)</span><span class="op" id="3607743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607747">return</span>&nbsp;<span class="ident" id="3607754"><a href="/mime/multipart/formdata.go.html#3608146">sectionReadCloser</a></span><span class="op" id="3607771">{</span><span class="ident" id="3607772"><a href="/mime/multipart/formdata.go.html#3607682">r</a></span><span class="op" id="3607773">}</span><span class="op" id="3607774">,</span>&nbsp;<span class="ident" id="3607776">nil</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3607781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3607784">return</span>&nbsp;<span class="ident" id="3607791"><a href="/mime/multipart/formdata.go.html#3604905">os</a></span><span class="op" id="3607793">.</span><span class="ident" id="3607794">Open</span><span class="op" id="3607798">(</span><span class="ident" id="3607799"><a href="/mime/multipart/formdata.go.html#3607609">fh</a></span><span class="op" id="3607801">.</span><span class="ident" id="3607802">tmpfile</span><span class="op" id="3607809">)</span><br>
<span class="lineno"></span><span class="op" id="3607811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3607814">//&nbsp;File&nbsp;is&nbsp;an&nbsp;interface&nbsp;to&nbsp;access&nbsp;the&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;message.</span><br>
<span class="lineno">140</span><span class="comment" id="3607886">//&nbsp;Its&nbsp;contents&nbsp;may&nbsp;be&nbsp;either&nbsp;stored&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk.</span><br>
<span class="lineno"></span><span class="comment" id="3607945">//&nbsp;If&nbsp;stored&nbsp;on&nbsp;disk,&nbsp;the&nbsp;File&#39;s&nbsp;underlying&nbsp;concrete&nbsp;type&nbsp;will&nbsp;be&nbsp;an&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="keyword" id="3608024">type</span>&nbsp;<span class="ident" id="3608029">File</span>&nbsp;<span class="keyword" id="3608034">interface</span>&nbsp;<span class="op" id="3608044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3608047"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3608049">.</span><span class="ident" id="3608050">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3608058"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3608060">.</span><span class="ident" id="3608061">ReaderAt</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3608071"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3608073">.</span><span class="ident" id="3608074">Seeker</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3608082"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3608084">.</span><span class="ident" id="3608085">Closer</span><br>
<span class="lineno"></span><span class="op" id="3608092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3608095">//&nbsp;helper&nbsp;types&nbsp;to&nbsp;turn&nbsp;a&nbsp;[]byte&nbsp;into&nbsp;a&nbsp;File</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3608141">type</span>&nbsp;<span class="ident" id="3608146">sectionReadCloser</span>&nbsp;<span class="keyword" id="3608164">struct</span>&nbsp;<span class="op" id="3608171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3608174">*</span><span class="ident" id="3608175"><a href="/mime/multipart/formdata.go.html#3604869">io</a></span><span class="op" id="3608177">.</span><span class="ident" id="3608178">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="3608192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="3608195">func</span>&nbsp;<span class="op" id="3608200">(</span><span class="ident" id="3608201">rc</span>&nbsp;<span class="ident" id="3608204"><a href="/mime/multipart/formdata.go.html#3608146">sectionReadCloser</a></span><span class="op" id="3608221">)</span>&nbsp;<span class="ident" id="3608223">Close</span><span class="op" id="3608228">(</span><span class="op" id="3608229">)</span>&nbsp;<span class="builtintype" id="3608231">error</span>&nbsp;<span class="op" id="3608237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3608240">return</span>&nbsp;<span class="ident" id="3608247">nil</span><br>
<span class="lineno"></span><span class="op" id="3608251">}</span>
</div>
</body>
</html>
