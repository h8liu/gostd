<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3713999">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3714054">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3714108">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3714159">package</span>&nbsp;<span class="ident" id="3714167">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3714174">import</span>&nbsp;<span class="op" id="3714181">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3714184">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3714193">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3714203">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="3714208">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3714211">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="3714279">var</span>&nbsp;<span class="ident" id="3714283">ErrFormat</span>&nbsp;<span class="op" id="3714293">=</span>&nbsp;<span class="ident" id="3714295">errors</span><span class="op" id="3714301">.</span><span class="ident" id="3714302">New</span><span class="op" id="3714305">(</span><span class="string" id="3714306">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="3714329">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3714332">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="3714409">type</span>&nbsp;<span class="ident" id="3714414">format</span>&nbsp;<span class="keyword" id="3714421">struct</span>&nbsp;<span class="op" id="3714428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714431">name</span><span class="op" id="3714435">,</span>&nbsp;<span class="ident" id="3714437">magic</span>&nbsp;&nbsp;<span class="builtintype" id="3714444">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714452">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3714465">func</span><span class="op" id="3714469">(</span><span class="ident" id="3714470">io</span><span class="op" id="3714472">.</span><span class="ident" id="3714473">Reader</span><span class="op" id="3714479">)</span>&nbsp;<span class="op" id="3714481">(</span><span class="ident" id="3714482">Image</span><span class="op" id="3714487">,</span>&nbsp;<span class="builtintype" id="3714489">error</span><span class="op" id="3714494">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714497">decodeConfig</span>&nbsp;<span class="keyword" id="3714510">func</span><span class="op" id="3714514">(</span><span class="ident" id="3714515">io</span><span class="op" id="3714517">.</span><span class="ident" id="3714518">Reader</span><span class="op" id="3714524">)</span>&nbsp;<span class="op" id="3714526">(</span><span class="ident" id="3714527">Config</span><span class="op" id="3714533">,</span>&nbsp;<span class="builtintype" id="3714535">error</span><span class="op" id="3714540">)</span><br>
<span class="lineno"></span><span class="op" id="3714542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3714545">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="3714591">var</span>&nbsp;<span class="ident" id="3714595">formats</span>&nbsp;<span class="op" id="3714603">[</span><span class="op" id="3714604">]</span><span class="ident" id="3714605">format</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="3714613">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="3714676">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3714733">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="3714811">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="3714877">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="3714935">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="3715004">func</span>&nbsp;<span class="ident" id="3715009">RegisterFormat</span><span class="op" id="3715023">(</span><span class="ident" id="3715024">name</span><span class="op" id="3715028">,</span>&nbsp;<span class="ident" id="3715030">magic</span>&nbsp;<span class="builtintype" id="3715036">string</span><span class="op" id="3715042">,</span>&nbsp;<span class="ident" id="3715044">decode</span>&nbsp;<span class="keyword" id="3715051">func</span><span class="op" id="3715055">(</span><span class="ident" id="3715056">io</span><span class="op" id="3715058">.</span><span class="ident" id="3715059">Reader</span><span class="op" id="3715065">)</span>&nbsp;<span class="op" id="3715067">(</span><span class="ident" id="3715068">Image</span><span class="op" id="3715073">,</span>&nbsp;<span class="builtintype" id="3715075">error</span><span class="op" id="3715080">)</span><span class="op" id="3715081">,</span>&nbsp;<span class="ident" id="3715083">decodeConfig</span>&nbsp;<span class="keyword" id="3715096">func</span><span class="op" id="3715100">(</span><span class="ident" id="3715101">io</span><span class="op" id="3715103">.</span><span class="ident" id="3715104">Reader</span><span class="op" id="3715110">)</span>&nbsp;<span class="op" id="3715112">(</span><span class="ident" id="3715113">Config</span><span class="op" id="3715119">,</span>&nbsp;<span class="builtintype" id="3715121">error</span><span class="op" id="3715126">)</span><span class="op" id="3715127">)</span>&nbsp;<span class="op" id="3715129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715132">formats</span>&nbsp;<span class="op" id="3715140">=</span>&nbsp;<span class="builtinfunc" id="3715142">append</span><span class="op" id="3715148">(</span><span class="ident" id="3715149">formats</span><span class="op" id="3715156">,</span>&nbsp;<span class="ident" id="3715158">format</span><span class="op" id="3715164">{</span><span class="ident" id="3715165">name</span><span class="op" id="3715169">,</span>&nbsp;<span class="ident" id="3715171">magic</span><span class="op" id="3715176">,</span>&nbsp;<span class="ident" id="3715178">decode</span><span class="op" id="3715184">,</span>&nbsp;<span class="ident" id="3715186">decodeConfig</span><span class="op" id="3715198">}</span><span class="op" id="3715199">)</span><br>
<span class="lineno"></span><span class="op" id="3715201">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="3715204">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="3715258">type</span>&nbsp;<span class="ident" id="3715263">reader</span>&nbsp;<span class="keyword" id="3715270">interface</span>&nbsp;<span class="op" id="3715280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715283">io</span><span class="op" id="3715285">.</span><span class="ident" id="3715286">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715294">Peek</span><span class="op" id="3715298">(</span><span class="builtintype" id="3715299">int</span><span class="op" id="3715302">)</span>&nbsp;<span class="op" id="3715304">(</span><span class="op" id="3715305">[</span><span class="op" id="3715306">]</span><span class="builtintype" id="3715307">byte</span><span class="op" id="3715311">,</span>&nbsp;<span class="builtintype" id="3715313">error</span><span class="op" id="3715318">)</span><br>
<span class="lineno">40</span><span class="op" id="3715320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3715323">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="3715370">func</span>&nbsp;<span class="ident" id="3715375">asReader</span><span class="op" id="3715383">(</span><span class="ident" id="3715384">r</span>&nbsp;<span class="ident" id="3715386">io</span><span class="op" id="3715388">.</span><span class="ident" id="3715389">Reader</span><span class="op" id="3715395">)</span>&nbsp;<span class="ident" id="3715397">reader</span>&nbsp;<span class="op" id="3715404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715407">if</span>&nbsp;<span class="ident" id="3715410">rr</span><span class="op" id="3715412">,</span>&nbsp;<span class="ident" id="3715414">ok</span>&nbsp;<span class="op" id="3715417">:=</span>&nbsp;<span class="ident" id="3715420">r</span><span class="op" id="3715421">.</span><span class="op" id="3715422">(</span><span class="ident" id="3715423">reader</span><span class="op" id="3715429">)</span><span class="op" id="3715430">;</span>&nbsp;<span class="ident" id="3715432">ok</span>&nbsp;<span class="op" id="3715435">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715439">return</span>&nbsp;<span class="ident" id="3715446">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3715450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715453">return</span>&nbsp;<span class="ident" id="3715460">bufio</span><span class="op" id="3715465">.</span><span class="ident" id="3715466">NewReader</span><span class="op" id="3715475">(</span><span class="ident" id="3715476">r</span><span class="op" id="3715477">)</span><br>
<span class="lineno"></span><span class="op" id="3715479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="3715482">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="3715557">func</span>&nbsp;<span class="ident" id="3715562">match</span><span class="op" id="3715567">(</span><span class="ident" id="3715568">magic</span>&nbsp;<span class="builtintype" id="3715574">string</span><span class="op" id="3715580">,</span>&nbsp;<span class="ident" id="3715582">b</span>&nbsp;<span class="op" id="3715584">[</span><span class="op" id="3715585">]</span><span class="builtintype" id="3715586">byte</span><span class="op" id="3715590">)</span>&nbsp;<span class="builtintype" id="3715592">bool</span>&nbsp;<span class="op" id="3715597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715600">if</span>&nbsp;<span class="builtinfunc" id="3715603">len</span><span class="op" id="3715606">(</span><span class="ident" id="3715607">magic</span><span class="op" id="3715612">)</span>&nbsp;<span class="op" id="3715614">!=</span>&nbsp;<span class="builtinfunc" id="3715617">len</span><span class="op" id="3715620">(</span><span class="ident" id="3715621">b</span><span class="op" id="3715622">)</span>&nbsp;<span class="op" id="3715624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715628">return</span>&nbsp;<span class="builtintype" id="3715635">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3715642">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715645">for</span>&nbsp;<span class="ident" id="3715649">i</span><span class="op" id="3715650">,</span>&nbsp;<span class="ident" id="3715652">c</span>&nbsp;<span class="op" id="3715654">:=</span>&nbsp;<span class="keyword" id="3715657">range</span>&nbsp;<span class="ident" id="3715663">b</span>&nbsp;<span class="op" id="3715665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715669">if</span>&nbsp;<span class="ident" id="3715672">magic</span><span class="op" id="3715677">[</span><span class="ident" id="3715678">i</span><span class="op" id="3715679">]</span>&nbsp;<span class="op" id="3715681">!=</span>&nbsp;<span class="ident" id="3715684">c</span>&nbsp;<span class="op" id="3715686">&amp;&amp;</span>&nbsp;<span class="ident" id="3715689">magic</span><span class="op" id="3715694">[</span><span class="ident" id="3715695">i</span><span class="op" id="3715696">]</span>&nbsp;<span class="op" id="3715698">!=</span>&nbsp;<span class="string" id="3715701">&#39;?&#39;</span>&nbsp;<span class="op" id="3715705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715710">return</span>&nbsp;<span class="builtintype" id="3715717">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3715725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3715728">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715731">return</span>&nbsp;<span class="builtintype" id="3715738">true</span><br>
<span class="lineno"></span><span class="op" id="3715743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3715746">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="3715790">func</span>&nbsp;<span class="ident" id="3715795">sniff</span><span class="op" id="3715800">(</span><span class="ident" id="3715801">r</span>&nbsp;<span class="ident" id="3715803">reader</span><span class="op" id="3715809">)</span>&nbsp;<span class="ident" id="3715811">format</span>&nbsp;<span class="op" id="3715818">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715821">for</span>&nbsp;<span class="ident" id="3715825">_</span><span class="op" id="3715826">,</span>&nbsp;<span class="ident" id="3715828">f</span>&nbsp;<span class="op" id="3715830">:=</span>&nbsp;<span class="keyword" id="3715833">range</span>&nbsp;<span class="ident" id="3715839">formats</span>&nbsp;<span class="op" id="3715847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715851">b</span><span class="op" id="3715852">,</span>&nbsp;<span class="ident" id="3715854">err</span>&nbsp;<span class="op" id="3715858">:=</span>&nbsp;<span class="ident" id="3715861">r</span><span class="op" id="3715862">.</span><span class="ident" id="3715863">Peek</span><span class="op" id="3715867">(</span><span class="builtinfunc" id="3715868">len</span><span class="op" id="3715871">(</span><span class="ident" id="3715872">f</span><span class="op" id="3715873">.</span><span class="ident" id="3715874">magic</span><span class="op" id="3715879">)</span><span class="op" id="3715880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715884">if</span>&nbsp;<span class="ident" id="3715887">err</span>&nbsp;<span class="op" id="3715891">==</span>&nbsp;<span class="ident" id="3715894">nil</span>&nbsp;<span class="op" id="3715898">&amp;&amp;</span>&nbsp;<span class="ident" id="3715901">match</span><span class="op" id="3715906">(</span><span class="ident" id="3715907">f</span><span class="op" id="3715908">.</span><span class="ident" id="3715909">magic</span><span class="op" id="3715914">,</span>&nbsp;<span class="ident" id="3715916">b</span><span class="op" id="3715917">)</span>&nbsp;<span class="op" id="3715919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715924">return</span>&nbsp;<span class="ident" id="3715931">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3715935">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3715938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715941">return</span>&nbsp;<span class="ident" id="3715948">format</span><span class="op" id="3715954">{</span><span class="op" id="3715955">}</span><br>
<span class="lineno"></span><span class="op" id="3715957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3715960">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="3716033">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="3716108">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="3716183">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="3716204">func</span>&nbsp;<span class="ident" id="3716209">Decode</span><span class="op" id="3716215">(</span><span class="ident" id="3716216">r</span>&nbsp;<span class="ident" id="3716218">io</span><span class="op" id="3716220">.</span><span class="ident" id="3716221">Reader</span><span class="op" id="3716227">)</span>&nbsp;<span class="op" id="3716229">(</span><span class="ident" id="3716230">Image</span><span class="op" id="3716235">,</span>&nbsp;<span class="builtintype" id="3716237">string</span><span class="op" id="3716243">,</span>&nbsp;<span class="builtintype" id="3716245">error</span><span class="op" id="3716250">)</span>&nbsp;<span class="op" id="3716252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3716255">rr</span>&nbsp;<span class="op" id="3716258">:=</span>&nbsp;<span class="ident" id="3716261">asReader</span><span class="op" id="3716269">(</span><span class="ident" id="3716270">r</span><span class="op" id="3716271">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3716274">f</span>&nbsp;<span class="op" id="3716276">:=</span>&nbsp;<span class="ident" id="3716279">sniff</span><span class="op" id="3716284">(</span><span class="ident" id="3716285">rr</span><span class="op" id="3716287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3716290">if</span>&nbsp;<span class="ident" id="3716293">f</span><span class="op" id="3716294">.</span><span class="ident" id="3716295">decode</span>&nbsp;<span class="op" id="3716302">==</span>&nbsp;<span class="ident" id="3716305">nil</span>&nbsp;<span class="op" id="3716309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3716313">return</span>&nbsp;<span class="ident" id="3716320">nil</span><span class="op" id="3716323">,</span>&nbsp;<span class="string" id="3716325">&#34;&#34;</span><span class="op" id="3716327">,</span>&nbsp;<span class="ident" id="3716329">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3716340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3716343">m</span><span class="op" id="3716344">,</span>&nbsp;<span class="ident" id="3716346">err</span>&nbsp;<span class="op" id="3716350">:=</span>&nbsp;<span class="ident" id="3716353">f</span><span class="op" id="3716354">.</span><span class="ident" id="3716355">decode</span><span class="op" id="3716361">(</span><span class="ident" id="3716362">rr</span><span class="op" id="3716364">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3716367">return</span>&nbsp;<span class="ident" id="3716374">m</span><span class="op" id="3716375">,</span>&nbsp;<span class="ident" id="3716377">f</span><span class="op" id="3716378">.</span><span class="ident" id="3716379">name</span><span class="op" id="3716383">,</span>&nbsp;<span class="ident" id="3716385">err</span><br>
<span class="lineno"></span><span class="op" id="3716389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3716392">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="3716468">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="3716547">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3716624">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="3716675">func</span>&nbsp;<span class="ident" id="3716680">DecodeConfig</span><span class="op" id="3716692">(</span><span class="ident" id="3716693">r</span>&nbsp;<span class="ident" id="3716695">io</span><span class="op" id="3716697">.</span><span class="ident" id="3716698">Reader</span><span class="op" id="3716704">)</span>&nbsp;<span class="op" id="3716706">(</span><span class="ident" id="3716707">Config</span><span class="op" id="3716713">,</span>&nbsp;<span class="builtintype" id="3716715">string</span><span class="op" id="3716721">,</span>&nbsp;<span class="builtintype" id="3716723">error</span><span class="op" id="3716728">)</span>&nbsp;<span class="op" id="3716730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3716733">rr</span>&nbsp;<span class="op" id="3716736">:=</span>&nbsp;<span class="ident" id="3716739">asReader</span><span class="op" id="3716747">(</span><span class="ident" id="3716748">r</span><span class="op" id="3716749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3716752">f</span>&nbsp;<span class="op" id="3716754">:=</span>&nbsp;<span class="ident" id="3716757">sniff</span><span class="op" id="3716762">(</span><span class="ident" id="3716763">rr</span><span class="op" id="3716765">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3716768">if</span>&nbsp;<span class="ident" id="3716771">f</span><span class="op" id="3716772">.</span><span class="ident" id="3716773">decodeConfig</span>&nbsp;<span class="op" id="3716786">==</span>&nbsp;<span class="ident" id="3716789">nil</span>&nbsp;<span class="op" id="3716793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3716797">return</span>&nbsp;<span class="ident" id="3716804">Config</span><span class="op" id="3716810">{</span><span class="op" id="3716811">}</span><span class="op" id="3716812">,</span>&nbsp;<span class="string" id="3716814">&#34;&#34;</span><span class="op" id="3716816">,</span>&nbsp;<span class="ident" id="3716818">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3716829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3716832">c</span><span class="op" id="3716833">,</span>&nbsp;<span class="ident" id="3716835">err</span>&nbsp;<span class="op" id="3716839">:=</span>&nbsp;<span class="ident" id="3716842">f</span><span class="op" id="3716843">.</span><span class="ident" id="3716844">decodeConfig</span><span class="op" id="3716856">(</span><span class="ident" id="3716857">rr</span><span class="op" id="3716859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3716862">return</span>&nbsp;<span class="ident" id="3716869">c</span><span class="op" id="3716870">,</span>&nbsp;<span class="ident" id="3716872">f</span><span class="op" id="3716873">.</span><span class="ident" id="3716874">name</span><span class="op" id="3716878">,</span>&nbsp;<span class="ident" id="3716880">err</span><br>
<span class="lineno">100</span><span class="op" id="3716884">}</span>
</div>
</body>
</html>
