<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/format</h2>
<ul>
<li><a href="/gostd/go/format/format.go.html">format.go</a></li>
<li><a href="/gostd/go/format/format_test.go.html">format_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7266710">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7266765">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7266819">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7266870">package</span>&nbsp;<span class="ident" id="7266878">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7266886">import</span>&nbsp;<span class="op" id="7266893">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266896">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266905">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266918">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266930">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266943">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266954">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7266964">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7266967">const</span>&nbsp;<span class="ident" id="7266973">testfile</span>&nbsp;<span class="op" id="7266982">=</span>&nbsp;<span class="string" id="7266984">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7267002">func</span>&nbsp;<span class="ident" id="7267007">diff</span><span class="op" id="7267011">(</span><span class="ident" id="7267012">t</span>&nbsp;<span class="op" id="7267014">*</span><span class="ident" id="7267015">testing</span><span class="op" id="7267022">.</span><span class="ident" id="7267023">T</span><span class="op" id="7267024">,</span>&nbsp;<span class="ident" id="7267026">dst</span><span class="op" id="7267029">,</span>&nbsp;<span class="ident" id="7267031">src</span>&nbsp;<span class="op" id="7267035">[</span><span class="op" id="7267036">]</span><span class="builtintype" id="7267037">byte</span><span class="op" id="7267041">)</span>&nbsp;<span class="op" id="7267043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267046">line</span>&nbsp;<span class="op" id="7267051">:=</span>&nbsp;<span class="num" id="7267054">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267057">offs</span>&nbsp;<span class="op" id="7267062">:=</span>&nbsp;<span class="num" id="7267065">0</span>&nbsp;<span class="comment" id="7267067">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267083">for</span>&nbsp;<span class="ident" id="7267087">i</span>&nbsp;<span class="op" id="7267089">:=</span>&nbsp;<span class="num" id="7267092">0</span><span class="op" id="7267093">;</span>&nbsp;<span class="ident" id="7267095">i</span>&nbsp;<span class="op" id="7267097">&lt;</span>&nbsp;<span class="builtinfunc" id="7267099">len</span><span class="op" id="7267102">(</span><span class="ident" id="7267103">dst</span><span class="op" id="7267106">)</span>&nbsp;<span class="op" id="7267108">&amp;&amp;</span>&nbsp;<span class="ident" id="7267111">i</span>&nbsp;<span class="op" id="7267113">&lt;</span>&nbsp;<span class="builtinfunc" id="7267115">len</span><span class="op" id="7267118">(</span><span class="ident" id="7267119">src</span><span class="op" id="7267122">)</span><span class="op" id="7267123">;</span>&nbsp;<span class="ident" id="7267125">i</span><span class="op" id="7267126">++</span>&nbsp;<span class="op" id="7267129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267133">d</span>&nbsp;<span class="op" id="7267135">:=</span>&nbsp;<span class="ident" id="7267138">dst</span><span class="op" id="7267141">[</span><span class="ident" id="7267142">i</span><span class="op" id="7267143">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267147">s</span>&nbsp;<span class="op" id="7267149">:=</span>&nbsp;<span class="ident" id="7267152">src</span><span class="op" id="7267155">[</span><span class="ident" id="7267156">i</span><span class="op" id="7267157">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267161">if</span>&nbsp;<span class="ident" id="7267164">d</span>&nbsp;<span class="op" id="7267166">!=</span>&nbsp;<span class="ident" id="7267169">s</span>&nbsp;<span class="op" id="7267171">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267176">t</span><span class="op" id="7267177">.</span><span class="ident" id="7267178">Errorf</span><span class="op" id="7267184">(</span><span class="string" id="7267185">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="7267199">,</span>&nbsp;<span class="ident" id="7267201">line</span><span class="op" id="7267205">,</span>&nbsp;<span class="ident" id="7267207">dst</span><span class="op" id="7267210">[</span><span class="ident" id="7267211">offs</span><span class="op" id="7267215">:</span><span class="ident" id="7267216">i</span><span class="op" id="7267217">+</span><span class="num" id="7267218">1</span><span class="op" id="7267219">]</span><span class="op" id="7267220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267225">t</span><span class="op" id="7267226">.</span><span class="ident" id="7267227">Errorf</span><span class="op" id="7267233">(</span><span class="string" id="7267234">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="7267248">,</span>&nbsp;<span class="ident" id="7267250">line</span><span class="op" id="7267254">,</span>&nbsp;<span class="ident" id="7267256">src</span><span class="op" id="7267259">[</span><span class="ident" id="7267260">offs</span><span class="op" id="7267264">:</span><span class="ident" id="7267265">i</span><span class="op" id="7267266">+</span><span class="num" id="7267267">1</span><span class="op" id="7267268">]</span><span class="op" id="7267269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267274">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267287">if</span>&nbsp;<span class="ident" id="7267290">s</span>&nbsp;<span class="op" id="7267292">==</span>&nbsp;<span class="string" id="7267295">&#39;\n&#39;</span>&nbsp;<span class="op" id="7267300">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267305">line</span><span class="op" id="7267309">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267315">offs</span>&nbsp;<span class="op" id="7267320">=</span>&nbsp;<span class="ident" id="7267322">i</span>&nbsp;<span class="op" id="7267324">+</span>&nbsp;<span class="num" id="7267326">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267336">if</span>&nbsp;<span class="builtinfunc" id="7267339">len</span><span class="op" id="7267342">(</span><span class="ident" id="7267343">dst</span><span class="op" id="7267346">)</span>&nbsp;<span class="op" id="7267348">!=</span>&nbsp;<span class="builtinfunc" id="7267351">len</span><span class="op" id="7267354">(</span><span class="ident" id="7267355">src</span><span class="op" id="7267358">)</span>&nbsp;<span class="op" id="7267360">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267364">t</span><span class="op" id="7267365">.</span><span class="ident" id="7267366">Errorf</span><span class="op" id="7267372">(</span><span class="string" id="7267373">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="7267413">,</span>&nbsp;<span class="builtinfunc" id="7267415">len</span><span class="op" id="7267418">(</span><span class="ident" id="7267419">dst</span><span class="op" id="7267422">)</span><span class="op" id="7267423">,</span>&nbsp;<span class="builtinfunc" id="7267425">len</span><span class="op" id="7267428">(</span><span class="ident" id="7267429">src</span><span class="op" id="7267432">)</span><span class="op" id="7267433">,</span>&nbsp;<span class="ident" id="7267435">src</span><span class="op" id="7267438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267441">}</span><br>
<span class="lineno"></span><span class="op" id="7267443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7267446">func</span>&nbsp;<span class="ident" id="7267451">TestNode</span><span class="op" id="7267459">(</span><span class="ident" id="7267460">t</span>&nbsp;<span class="op" id="7267462">*</span><span class="ident" id="7267463">testing</span><span class="op" id="7267470">.</span><span class="ident" id="7267471">T</span><span class="op" id="7267472">)</span>&nbsp;<span class="op" id="7267474">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267477">src</span><span class="op" id="7267480">,</span>&nbsp;<span class="ident" id="7267482">err</span>&nbsp;<span class="op" id="7267486">:=</span>&nbsp;<span class="ident" id="7267489">ioutil</span><span class="op" id="7267495">.</span><span class="ident" id="7267496">ReadFile</span><span class="op" id="7267504">(</span><span class="ident" id="7267505">testfile</span><span class="op" id="7267513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267516">if</span>&nbsp;<span class="ident" id="7267519">err</span>&nbsp;<span class="op" id="7267523">!=</span>&nbsp;<span class="ident" id="7267526">nil</span>&nbsp;<span class="op" id="7267530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267534">t</span><span class="op" id="7267535">.</span><span class="ident" id="7267536">Fatal</span><span class="op" id="7267541">(</span><span class="ident" id="7267542">err</span><span class="op" id="7267545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267552">fset</span>&nbsp;<span class="op" id="7267557">:=</span>&nbsp;<span class="ident" id="7267560">token</span><span class="op" id="7267565">.</span><span class="ident" id="7267566">NewFileSet</span><span class="op" id="7267576">(</span><span class="op" id="7267577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267580">file</span><span class="op" id="7267584">,</span>&nbsp;<span class="ident" id="7267586">err</span>&nbsp;<span class="op" id="7267590">:=</span>&nbsp;<span class="ident" id="7267593">parser</span><span class="op" id="7267599">.</span><span class="ident" id="7267600">ParseFile</span><span class="op" id="7267609">(</span><span class="ident" id="7267610">fset</span><span class="op" id="7267614">,</span>&nbsp;<span class="ident" id="7267616">testfile</span><span class="op" id="7267624">,</span>&nbsp;<span class="ident" id="7267626">src</span><span class="op" id="7267629">,</span>&nbsp;<span class="ident" id="7267631">parser</span><span class="op" id="7267637">.</span><span class="ident" id="7267638">ParseComments</span><span class="op" id="7267651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267654">if</span>&nbsp;<span class="ident" id="7267657">err</span>&nbsp;<span class="op" id="7267661">!=</span>&nbsp;<span class="ident" id="7267664">nil</span>&nbsp;<span class="op" id="7267668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267672">t</span><span class="op" id="7267673">.</span><span class="ident" id="7267674">Fatal</span><span class="op" id="7267679">(</span><span class="ident" id="7267680">err</span><span class="op" id="7267683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267686">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267690">var</span>&nbsp;<span class="ident" id="7267694">buf</span>&nbsp;<span class="ident" id="7267698">bytes</span><span class="op" id="7267703">.</span><span class="ident" id="7267704">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267713">if</span>&nbsp;<span class="ident" id="7267716">err</span>&nbsp;<span class="op" id="7267720">=</span>&nbsp;<span class="ident" id="7267722">Node</span><span class="op" id="7267726">(</span><span class="op" id="7267727">&amp;</span><span class="ident" id="7267728">buf</span><span class="op" id="7267731">,</span>&nbsp;<span class="ident" id="7267733">fset</span><span class="op" id="7267737">,</span>&nbsp;<span class="ident" id="7267739">file</span><span class="op" id="7267743">)</span><span class="op" id="7267744">;</span>&nbsp;<span class="ident" id="7267746">err</span>&nbsp;<span class="op" id="7267750">!=</span>&nbsp;<span class="ident" id="7267753">nil</span>&nbsp;<span class="op" id="7267757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267761">t</span><span class="op" id="7267762">.</span><span class="ident" id="7267763">Fatal</span><span class="op" id="7267768">(</span><span class="string" id="7267769">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="7267783">,</span>&nbsp;<span class="ident" id="7267785">err</span><span class="op" id="7267788">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267795">diff</span><span class="op" id="7267799">(</span><span class="ident" id="7267800">t</span><span class="op" id="7267801">,</span>&nbsp;<span class="ident" id="7267803">buf</span><span class="op" id="7267806">.</span><span class="ident" id="7267807">Bytes</span><span class="op" id="7267812">(</span><span class="op" id="7267813">)</span><span class="op" id="7267814">,</span>&nbsp;<span class="ident" id="7267816">src</span><span class="op" id="7267819">)</span><br>
<span class="lineno"></span><span class="op" id="7267821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7267824">func</span>&nbsp;<span class="ident" id="7267829">TestSource</span><span class="op" id="7267839">(</span><span class="ident" id="7267840">t</span>&nbsp;<span class="op" id="7267842">*</span><span class="ident" id="7267843">testing</span><span class="op" id="7267850">.</span><span class="ident" id="7267851">T</span><span class="op" id="7267852">)</span>&nbsp;<span class="op" id="7267854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267857">src</span><span class="op" id="7267860">,</span>&nbsp;<span class="ident" id="7267862">err</span>&nbsp;<span class="op" id="7267866">:=</span>&nbsp;<span class="ident" id="7267869">ioutil</span><span class="op" id="7267875">.</span><span class="ident" id="7267876">ReadFile</span><span class="op" id="7267884">(</span><span class="ident" id="7267885">testfile</span><span class="op" id="7267893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267896">if</span>&nbsp;<span class="ident" id="7267899">err</span>&nbsp;<span class="op" id="7267903">!=</span>&nbsp;<span class="ident" id="7267906">nil</span>&nbsp;<span class="op" id="7267910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267914">t</span><span class="op" id="7267915">.</span><span class="ident" id="7267916">Fatal</span><span class="op" id="7267921">(</span><span class="ident" id="7267922">err</span><span class="op" id="7267925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267928">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267932">res</span><span class="op" id="7267935">,</span>&nbsp;<span class="ident" id="7267937">err</span>&nbsp;<span class="op" id="7267941">:=</span>&nbsp;<span class="ident" id="7267944">Source</span><span class="op" id="7267950">(</span><span class="ident" id="7267951">src</span><span class="op" id="7267954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267957">if</span>&nbsp;<span class="ident" id="7267960">err</span>&nbsp;<span class="op" id="7267964">!=</span>&nbsp;<span class="ident" id="7267967">nil</span>&nbsp;<span class="op" id="7267971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267975">t</span><span class="op" id="7267976">.</span><span class="ident" id="7267977">Fatal</span><span class="op" id="7267982">(</span><span class="string" id="7267983">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="7267999">,</span>&nbsp;<span class="ident" id="7268001">err</span><span class="op" id="7268004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7268007">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7268011">diff</span><span class="op" id="7268015">(</span><span class="ident" id="7268016">t</span><span class="op" id="7268017">,</span>&nbsp;<span class="ident" id="7268019">res</span><span class="op" id="7268022">,</span>&nbsp;<span class="ident" id="7268024">src</span><span class="op" id="7268027">)</span><br>
<span class="lineno"></span><span class="op" id="7268029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7268032">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="7268106">var</span>&nbsp;<span class="ident" id="7268110">tests</span>&nbsp;<span class="op" id="7268116">=</span>&nbsp;<span class="op" id="7268118">[</span><span class="op" id="7268119">]</span><span class="builtintype" id="7268120">string</span><span class="op" id="7268126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7268129">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268151">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="7268171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268174">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="7268185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268188">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="7268218">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7268222">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268242">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="7268250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268253">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="7268289">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7268293">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268337">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="7268357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268360">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7268386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268389">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7268425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268428">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7268472">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268475">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="7268532">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7268538">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268582">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="7268643">,</span>&nbsp;<span class="comment" id="7268645">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7268692">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268705">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="7268727">,</span>&nbsp;<span class="comment" id="7268729">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7268746">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268769">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="7268783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7268786">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="7268800">,</span><br>
<span class="lineno"></span><span class="op" id="7268802">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="7268805">func</span>&nbsp;<span class="ident" id="7268810">String</span><span class="op" id="7268816">(</span><span class="ident" id="7268817">s</span>&nbsp;<span class="builtintype" id="7268819">string</span><span class="op" id="7268825">)</span>&nbsp;<span class="op" id="7268827">(</span><span class="builtintype" id="7268828">string</span><span class="op" id="7268834">,</span>&nbsp;<span class="builtintype" id="7268836">error</span><span class="op" id="7268841">)</span>&nbsp;<span class="op" id="7268843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7268846">res</span><span class="op" id="7268849">,</span>&nbsp;<span class="ident" id="7268851">err</span>&nbsp;<span class="op" id="7268855">:=</span>&nbsp;<span class="ident" id="7268858">Source</span><span class="op" id="7268864">(</span><span class="op" id="7268865">[</span><span class="op" id="7268866">]</span><span class="builtintype" id="7268867">byte</span><span class="op" id="7268871">(</span><span class="ident" id="7268872">s</span><span class="op" id="7268873">)</span><span class="op" id="7268874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7268877">if</span>&nbsp;<span class="ident" id="7268880">err</span>&nbsp;<span class="op" id="7268884">!=</span>&nbsp;<span class="ident" id="7268887">nil</span>&nbsp;<span class="op" id="7268891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7268895">return</span>&nbsp;<span class="string" id="7268902">&#34;&#34;</span><span class="op" id="7268904">,</span>&nbsp;<span class="ident" id="7268906">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7268911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7268914">return</span>&nbsp;<span class="builtintype" id="7268921">string</span><span class="op" id="7268927">(</span><span class="ident" id="7268928">res</span><span class="op" id="7268931">)</span><span class="op" id="7268932">,</span>&nbsp;<span class="ident" id="7268934">nil</span><br>
<span class="lineno"></span><span class="op" id="7268938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7268941">func</span>&nbsp;<span class="ident" id="7268946">TestPartial</span><span class="op" id="7268957">(</span><span class="ident" id="7268958">t</span>&nbsp;<span class="op" id="7268960">*</span><span class="ident" id="7268961">testing</span><span class="op" id="7268968">.</span><span class="ident" id="7268969">T</span><span class="op" id="7268970">)</span>&nbsp;<span class="op" id="7268972">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7268975">for</span>&nbsp;<span class="ident" id="7268979">_</span><span class="op" id="7268980">,</span>&nbsp;<span class="ident" id="7268982">src</span>&nbsp;<span class="op" id="7268986">:=</span>&nbsp;<span class="keyword" id="7268989">range</span>&nbsp;<span class="ident" id="7268995">tests</span>&nbsp;<span class="op" id="7269001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7269005">if</span>&nbsp;<span class="ident" id="7269008">strings</span><span class="op" id="7269015">.</span><span class="ident" id="7269016">HasPrefix</span><span class="op" id="7269025">(</span><span class="ident" id="7269026">src</span><span class="op" id="7269029">,</span>&nbsp;<span class="string" id="7269031">&#34;ERROR&#34;</span><span class="op" id="7269038">)</span>&nbsp;<span class="op" id="7269040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7269045">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7269073">src</span>&nbsp;<span class="op" id="7269077">=</span>&nbsp;<span class="ident" id="7269079">src</span><span class="op" id="7269082">[</span><span class="num" id="7269083">5</span><span class="op" id="7269084">:</span><span class="op" id="7269085">]</span>&nbsp;<span class="comment" id="7269087">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7269113">res</span><span class="op" id="7269116">,</span>&nbsp;<span class="ident" id="7269118">err</span>&nbsp;<span class="op" id="7269122">:=</span>&nbsp;<span class="ident" id="7269125">String</span><span class="op" id="7269131">(</span><span class="ident" id="7269132">src</span><span class="op" id="7269135">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7269140">if</span>&nbsp;<span class="ident" id="7269143">err</span>&nbsp;<span class="op" id="7269147">==</span>&nbsp;<span class="ident" id="7269150">nil</span>&nbsp;<span class="op" id="7269154">&amp;&amp;</span>&nbsp;<span class="ident" id="7269157">res</span>&nbsp;<span class="op" id="7269161">==</span>&nbsp;<span class="ident" id="7269164">src</span>&nbsp;<span class="op" id="7269168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7269174">t</span><span class="op" id="7269175">.</span><span class="ident" id="7269176">Errorf</span><span class="op" id="7269182">(</span><span class="string" id="7269183">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="7269235">,</span>&nbsp;<span class="ident" id="7269237">src</span><span class="op" id="7269240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7269245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7269249">}</span>&nbsp;<span class="keyword" id="7269251">else</span>&nbsp;<span class="op" id="7269256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7269261">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7269292">res</span><span class="op" id="7269295">,</span>&nbsp;<span class="ident" id="7269297">err</span>&nbsp;<span class="op" id="7269301">:=</span>&nbsp;<span class="ident" id="7269304">String</span><span class="op" id="7269310">(</span><span class="ident" id="7269311">src</span><span class="op" id="7269314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7269319">if</span>&nbsp;<span class="ident" id="7269322">err</span>&nbsp;<span class="op" id="7269326">!=</span>&nbsp;<span class="ident" id="7269329">nil</span>&nbsp;<span class="op" id="7269333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7269339">t</span><span class="op" id="7269340">.</span><span class="ident" id="7269341">Errorf</span><span class="op" id="7269347">(</span><span class="string" id="7269348">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="7269377">,</span>&nbsp;<span class="ident" id="7269379">err</span><span class="op" id="7269382">,</span>&nbsp;<span class="ident" id="7269384">src</span><span class="op" id="7269387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7269392">}</span>&nbsp;<span class="keyword" id="7269394">else</span>&nbsp;<span class="keyword" id="7269399">if</span>&nbsp;<span class="ident" id="7269402">res</span>&nbsp;<span class="op" id="7269406">!=</span>&nbsp;<span class="ident" id="7269409">src</span>&nbsp;<span class="op" id="7269413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7269419">t</span><span class="op" id="7269420">.</span><span class="ident" id="7269421">Errorf</span><span class="op" id="7269427">(</span><span class="string" id="7269428">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="7269475">,</span>&nbsp;<span class="ident" id="7269477">src</span><span class="op" id="7269480">,</span>&nbsp;<span class="ident" id="7269482">res</span><span class="op" id="7269485">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7269490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7269494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7269497">}</span><br>
<span class="lineno"></span><span class="op" id="7269499">}</span>
</div>
</body>
</html>
