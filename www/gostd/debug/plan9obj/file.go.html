<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/plan9obj</h2>
<ul>
<li><a href="/gostd/debug/plan9obj/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/debug/plan9obj/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/plan9obj/plan9obj.go.html">plan9obj.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5840021">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5840077">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5840131">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5840182">//&nbsp;Package&nbsp;plan9obj&nbsp;implements&nbsp;access&nbsp;to&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5840250">package</span>&nbsp;<span class="ident" id="5840258">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5840268">import</span>&nbsp;<span class="op" id="5840275">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5840278">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5840297">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5840307">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5840314">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5840320">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5840325">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5840328">//&nbsp;A&nbsp;FileHeader&nbsp;represents&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="5840383">type</span>&nbsp;<span class="ident" id="5840388">FileHeader</span>&nbsp;<span class="keyword" id="5840399">struct</span>&nbsp;<span class="op" id="5840406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840409">Magic</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5840421">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840429">Bss</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5840441">uint32</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840449">Entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840461">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840469">PtrSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5840481">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840486">LoadAddress</span>&nbsp;<span class="ident" id="5840498">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840506">HdrSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840518">uint64</span><br>
<span class="lineno"></span><span class="op" id="5840525">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5840528">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5840576">type</span>&nbsp;<span class="ident" id="5840581">File</span>&nbsp;<span class="keyword" id="5840586">struct</span>&nbsp;<span class="op" id="5840593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840596">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840608">Sections</span>&nbsp;<span class="op" id="5840617">[</span><span class="op" id="5840618">]</span><span class="op" id="5840619">*</span><span class="ident" id="5840620">Section</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840629">closer</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5840638">io</span><span class="op" id="5840640">.</span><span class="ident" id="5840641">Closer</span><br>
<span class="lineno"></span><span class="op" id="5840648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5840651">//&nbsp;A&nbsp;SectionHeader&nbsp;represents&nbsp;a&nbsp;single&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section&nbsp;header.</span><br>
<span class="lineno"></span><span class="comment" id="5840719">//&nbsp;This&nbsp;structure&nbsp;doesn&#39;t&nbsp;exist&nbsp;on-disk,&nbsp;but&nbsp;eases&nbsp;navigation</span><br>
<span class="lineno">35</span><span class="comment" id="5840781">//&nbsp;through&nbsp;the&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5840809">type</span>&nbsp;<span class="ident" id="5840814">SectionHeader</span>&nbsp;<span class="keyword" id="5840828">struct</span>&nbsp;<span class="op" id="5840835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840838">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5840845">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840853">Size</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5840860">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840868">Offset</span>&nbsp;<span class="builtintype" id="5840875">uint32</span><br>
<span class="lineno">40</span><span class="op" id="5840882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5840885">//&nbsp;A&nbsp;Section&nbsp;represents&nbsp;a&nbsp;single&nbsp;section&nbsp;in&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5840950">type</span>&nbsp;<span class="ident" id="5840955">Section</span>&nbsp;<span class="keyword" id="5840963">struct</span>&nbsp;<span class="op" id="5840970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5840973">SectionHeader</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5840989">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5841027">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5841067">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5841102">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5841150">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5841200">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841224">io</span><span class="op" id="5841226">.</span><span class="ident" id="5841227">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841237">sr</span>&nbsp;<span class="op" id="5841240">*</span><span class="ident" id="5841241">io</span><span class="op" id="5841243">.</span><span class="ident" id="5841244">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="5841258">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="5841261">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5841329">func</span>&nbsp;<span class="op" id="5841334">(</span><span class="ident" id="5841335">s</span>&nbsp;<span class="op" id="5841337">*</span><span class="ident" id="5841338">Section</span><span class="op" id="5841345">)</span>&nbsp;<span class="ident" id="5841347">Data</span><span class="op" id="5841351">(</span><span class="op" id="5841352">)</span>&nbsp;<span class="op" id="5841354">(</span><span class="op" id="5841355">[</span><span class="op" id="5841356">]</span><span class="builtintype" id="5841357">byte</span><span class="op" id="5841361">,</span>&nbsp;<span class="builtintype" id="5841363">error</span><span class="op" id="5841368">)</span>&nbsp;<span class="op" id="5841370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841373">dat</span>&nbsp;<span class="op" id="5841377">:=</span>&nbsp;<span class="builtinfunc" id="5841380">make</span><span class="op" id="5841384">(</span><span class="op" id="5841385">[</span><span class="op" id="5841386">]</span><span class="builtintype" id="5841387">byte</span><span class="op" id="5841391">,</span>&nbsp;<span class="ident" id="5841393">s</span><span class="op" id="5841394">.</span><span class="ident" id="5841395">sr</span><span class="op" id="5841397">.</span><span class="ident" id="5841398">Size</span><span class="op" id="5841402">(</span><span class="op" id="5841403">)</span><span class="op" id="5841404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841407">n</span><span class="op" id="5841408">,</span>&nbsp;<span class="ident" id="5841410">err</span>&nbsp;<span class="op" id="5841414">:=</span>&nbsp;<span class="ident" id="5841417">s</span><span class="op" id="5841418">.</span><span class="ident" id="5841419">sr</span><span class="op" id="5841421">.</span><span class="ident" id="5841422">ReadAt</span><span class="op" id="5841428">(</span><span class="ident" id="5841429">dat</span><span class="op" id="5841432">,</span>&nbsp;<span class="num" id="5841434">0</span><span class="op" id="5841435">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5841438">if</span>&nbsp;<span class="ident" id="5841441">n</span>&nbsp;<span class="op" id="5841443">==</span>&nbsp;<span class="builtinfunc" id="5841446">len</span><span class="op" id="5841449">(</span><span class="ident" id="5841450">dat</span><span class="op" id="5841453">)</span>&nbsp;<span class="op" id="5841455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841459">err</span>&nbsp;<span class="op" id="5841463">=</span>&nbsp;<span class="builtintype" id="5841465">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5841470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5841473">return</span>&nbsp;<span class="ident" id="5841480">dat</span><span class="op" id="5841483">[</span><span class="num" id="5841484">0</span><span class="op" id="5841485">:</span><span class="ident" id="5841486">n</span><span class="op" id="5841487">]</span><span class="op" id="5841488">,</span>&nbsp;<span class="ident" id="5841490">err</span><br>
<span class="lineno"></span><span class="op" id="5841494">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="5841497">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5841564">func</span>&nbsp;<span class="op" id="5841569">(</span><span class="ident" id="5841570">s</span>&nbsp;<span class="op" id="5841572">*</span><span class="ident" id="5841573">Section</span><span class="op" id="5841580">)</span>&nbsp;<span class="ident" id="5841582">Open</span><span class="op" id="5841586">(</span><span class="op" id="5841587">)</span>&nbsp;<span class="ident" id="5841589">io</span><span class="op" id="5841591">.</span><span class="ident" id="5841592">ReadSeeker</span>&nbsp;<span class="op" id="5841603">{</span>&nbsp;<span class="keyword" id="5841605">return</span>&nbsp;<span class="ident" id="5841612">io</span><span class="op" id="5841614">.</span><span class="ident" id="5841615">NewSectionReader</span><span class="op" id="5841631">(</span><span class="ident" id="5841632">s</span><span class="op" id="5841633">.</span><span class="ident" id="5841634">sr</span><span class="op" id="5841636">,</span>&nbsp;<span class="num" id="5841638">0</span><span class="op" id="5841639">,</span>&nbsp;<span class="num" id="5841641">1</span><span class="op" id="5841642">&lt;&lt;</span><span class="num" id="5841644">63</span><span class="op" id="5841646">-</span><span class="num" id="5841647">1</span><span class="op" id="5841648">)</span>&nbsp;<span class="op" id="5841650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5841653">//&nbsp;A&nbsp;Symbol&nbsp;represents&nbsp;an&nbsp;entry&nbsp;in&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;symbol&nbsp;table&nbsp;section.</span><br>
<span class="lineno">70</span><span class="keyword" id="5841725">type</span>&nbsp;<span class="ident" id="5841730">Sym</span>&nbsp;<span class="keyword" id="5841734">struct</span>&nbsp;<span class="op" id="5841741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841744">Value</span>&nbsp;<span class="ident" id="5841750">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841758">Type</span>&nbsp;&nbsp;<span class="builtintype" id="5841764">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841770">Name</span>&nbsp;&nbsp;<span class="builtintype" id="5841776">string</span><br>
<span class="lineno"></span><span class="op" id="5841783">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="5841786">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="5841817">//&nbsp;formatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="5841880">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5841931">type</span>&nbsp;<span class="ident" id="5841936">formatError</span>&nbsp;<span class="keyword" id="5841948">struct</span>&nbsp;<span class="op" id="5841955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841958">off</span>&nbsp;<span class="builtintype" id="5841962">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841967">msg</span>&nbsp;<span class="builtintype" id="5841971">string</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5841979">val</span>&nbsp;<span class="keyword" id="5841983">interface</span><span class="op" id="5841992">{</span><span class="op" id="5841993">}</span><br>
<span class="lineno"></span><span class="op" id="5841995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5841998">func</span>&nbsp;<span class="op" id="5842003">(</span><span class="ident" id="5842004">e</span>&nbsp;<span class="op" id="5842006">*</span><span class="ident" id="5842007">formatError</span><span class="op" id="5842018">)</span>&nbsp;<span class="ident" id="5842020">Error</span><span class="op" id="5842025">(</span><span class="op" id="5842026">)</span>&nbsp;<span class="builtintype" id="5842028">string</span>&nbsp;<span class="op" id="5842035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842038">msg</span>&nbsp;<span class="op" id="5842042">:=</span>&nbsp;<span class="ident" id="5842045">e</span><span class="op" id="5842046">.</span><span class="ident" id="5842047">msg</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842052">if</span>&nbsp;<span class="ident" id="5842055">e</span><span class="op" id="5842056">.</span><span class="ident" id="5842057">val</span>&nbsp;<span class="op" id="5842061">!=</span>&nbsp;<span class="builtintype" id="5842064">nil</span>&nbsp;<span class="op" id="5842068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842072">msg</span>&nbsp;<span class="op" id="5842076">+=</span>&nbsp;<span class="ident" id="5842079">fmt</span><span class="op" id="5842082">.</span><span class="ident" id="5842083">Sprintf</span><span class="op" id="5842090">(</span><span class="string" id="5842091">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="5842098">,</span>&nbsp;<span class="ident" id="5842100">e</span><span class="op" id="5842101">.</span><span class="ident" id="5842102">val</span><span class="op" id="5842105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5842108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842111">msg</span>&nbsp;<span class="op" id="5842115">+=</span>&nbsp;<span class="ident" id="5842118">fmt</span><span class="op" id="5842121">.</span><span class="ident" id="5842122">Sprintf</span><span class="op" id="5842129">(</span><span class="string" id="5842130">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="5842154">,</span>&nbsp;<span class="ident" id="5842156">e</span><span class="op" id="5842157">.</span><span class="ident" id="5842158">off</span><span class="op" id="5842161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842164">return</span>&nbsp;<span class="ident" id="5842171">msg</span><br>
<span class="lineno">95</span><span class="op" id="5842175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5842178">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="5842271">func</span>&nbsp;<span class="ident" id="5842276">Open</span><span class="op" id="5842280">(</span><span class="ident" id="5842281">name</span>&nbsp;<span class="builtintype" id="5842286">string</span><span class="op" id="5842292">)</span>&nbsp;<span class="op" id="5842294">(</span><span class="op" id="5842295">*</span><span class="ident" id="5842296">File</span><span class="op" id="5842300">,</span>&nbsp;<span class="builtintype" id="5842302">error</span><span class="op" id="5842307">)</span>&nbsp;<span class="op" id="5842309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842312">f</span><span class="op" id="5842313">,</span>&nbsp;<span class="ident" id="5842315">err</span>&nbsp;<span class="op" id="5842319">:=</span>&nbsp;<span class="ident" id="5842322">os</span><span class="op" id="5842324">.</span><span class="ident" id="5842325">Open</span><span class="op" id="5842329">(</span><span class="ident" id="5842330">name</span><span class="op" id="5842334">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842337">if</span>&nbsp;<span class="ident" id="5842340">err</span>&nbsp;<span class="op" id="5842344">!=</span>&nbsp;<span class="builtintype" id="5842347">nil</span>&nbsp;<span class="op" id="5842351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842355">return</span>&nbsp;<span class="builtintype" id="5842362">nil</span><span class="op" id="5842365">,</span>&nbsp;<span class="ident" id="5842367">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5842372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842375">ff</span><span class="op" id="5842377">,</span>&nbsp;<span class="ident" id="5842379">err</span>&nbsp;<span class="op" id="5842383">:=</span>&nbsp;<span class="ident" id="5842386">NewFile</span><span class="op" id="5842393">(</span><span class="ident" id="5842394">f</span><span class="op" id="5842395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842398">if</span>&nbsp;<span class="ident" id="5842401">err</span>&nbsp;<span class="op" id="5842405">!=</span>&nbsp;<span class="builtintype" id="5842408">nil</span>&nbsp;<span class="op" id="5842412">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842416">f</span><span class="op" id="5842417">.</span><span class="ident" id="5842418">Close</span><span class="op" id="5842423">(</span><span class="op" id="5842424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842428">return</span>&nbsp;<span class="builtintype" id="5842435">nil</span><span class="op" id="5842438">,</span>&nbsp;<span class="ident" id="5842440">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5842445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842448">ff</span><span class="op" id="5842450">.</span><span class="ident" id="5842451">closer</span>&nbsp;<span class="op" id="5842458">=</span>&nbsp;<span class="ident" id="5842460">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842463">return</span>&nbsp;<span class="ident" id="5842470">ff</span><span class="op" id="5842472">,</span>&nbsp;<span class="builtintype" id="5842474">nil</span><br>
<span class="lineno">110</span><span class="op" id="5842478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5842481">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="5842507">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="5842574">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">115</span><span class="keyword" id="5842598">func</span>&nbsp;<span class="op" id="5842603">(</span><span class="ident" id="5842604">f</span>&nbsp;<span class="op" id="5842606">*</span><span class="ident" id="5842607">File</span><span class="op" id="5842611">)</span>&nbsp;<span class="ident" id="5842613">Close</span><span class="op" id="5842618">(</span><span class="op" id="5842619">)</span>&nbsp;<span class="builtintype" id="5842621">error</span>&nbsp;<span class="op" id="5842627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842630">var</span>&nbsp;<span class="ident" id="5842634">err</span>&nbsp;<span class="builtintype" id="5842638">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842645">if</span>&nbsp;<span class="ident" id="5842648">f</span><span class="op" id="5842649">.</span><span class="ident" id="5842650">closer</span>&nbsp;<span class="op" id="5842657">!=</span>&nbsp;<span class="builtintype" id="5842660">nil</span>&nbsp;<span class="op" id="5842664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842668">err</span>&nbsp;<span class="op" id="5842672">=</span>&nbsp;<span class="ident" id="5842674">f</span><span class="op" id="5842675">.</span><span class="ident" id="5842676">closer</span><span class="op" id="5842682">.</span><span class="ident" id="5842683">Close</span><span class="op" id="5842688">(</span><span class="op" id="5842689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842693">f</span><span class="op" id="5842694">.</span><span class="ident" id="5842695">closer</span>&nbsp;<span class="op" id="5842702">=</span>&nbsp;<span class="builtintype" id="5842704">nil</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5842709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842712">return</span>&nbsp;<span class="ident" id="5842719">err</span><br>
<span class="lineno"></span><span class="op" id="5842723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5842726">func</span>&nbsp;<span class="ident" id="5842731">parseMagic</span><span class="op" id="5842741">(</span><span class="ident" id="5842742">magic</span>&nbsp;<span class="op" id="5842748">[</span><span class="op" id="5842749">]</span><span class="builtintype" id="5842750">byte</span><span class="op" id="5842754">)</span>&nbsp;<span class="op" id="5842756">(</span><span class="builtintype" id="5842757">uint32</span><span class="op" id="5842763">,</span>&nbsp;<span class="builtintype" id="5842765">error</span><span class="op" id="5842770">)</span>&nbsp;<span class="op" id="5842772">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842775">m</span>&nbsp;<span class="op" id="5842777">:=</span>&nbsp;<span class="ident" id="5842780">binary</span><span class="op" id="5842786">.</span><span class="ident" id="5842787">BigEndian</span><span class="op" id="5842796">.</span><span class="ident" id="5842797">Uint32</span><span class="op" id="5842803">(</span><span class="ident" id="5842804">magic</span><span class="op" id="5842809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842812">switch</span>&nbsp;<span class="ident" id="5842819">m</span>&nbsp;<span class="op" id="5842821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842824">case</span>&nbsp;<span class="ident" id="5842829">Magic386</span><span class="op" id="5842837">,</span>&nbsp;<span class="ident" id="5842839">MagicAMD64</span><span class="op" id="5842849">,</span>&nbsp;<span class="ident" id="5842851">MagicARM</span><span class="op" id="5842859">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842863">return</span>&nbsp;<span class="ident" id="5842870">m</span><span class="op" id="5842871">,</span>&nbsp;<span class="builtintype" id="5842873">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5842878">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5842881">return</span>&nbsp;<span class="num" id="5842888">0</span><span class="op" id="5842889">,</span>&nbsp;<span class="op" id="5842891">&amp;</span><span class="ident" id="5842892">formatError</span><span class="op" id="5842903">{</span><span class="num" id="5842904">0</span><span class="op" id="5842905">,</span>&nbsp;<span class="string" id="5842907">&#34;bad&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5842925">,</span>&nbsp;<span class="ident" id="5842927">magic</span><span class="op" id="5842932">}</span><br>
<span class="lineno"></span><span class="op" id="5842934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5842937">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Plan&nbsp;9&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno"></span><span class="comment" id="5843022">//&nbsp;The&nbsp;Plan&nbsp;9&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno">135</span><span class="keyword" id="5843095">func</span>&nbsp;<span class="ident" id="5843100">NewFile</span><span class="op" id="5843107">(</span><span class="ident" id="5843108">r</span>&nbsp;<span class="ident" id="5843110">io</span><span class="op" id="5843112">.</span><span class="ident" id="5843113">ReaderAt</span><span class="op" id="5843121">)</span>&nbsp;<span class="op" id="5843123">(</span><span class="op" id="5843124">*</span><span class="ident" id="5843125">File</span><span class="op" id="5843129">,</span>&nbsp;<span class="builtintype" id="5843131">error</span><span class="op" id="5843136">)</span>&nbsp;<span class="op" id="5843138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843141">sr</span>&nbsp;<span class="op" id="5843144">:=</span>&nbsp;<span class="ident" id="5843147">io</span><span class="op" id="5843149">.</span><span class="ident" id="5843150">NewSectionReader</span><span class="op" id="5843166">(</span><span class="ident" id="5843167">r</span><span class="op" id="5843168">,</span>&nbsp;<span class="num" id="5843170">0</span><span class="op" id="5843171">,</span>&nbsp;<span class="num" id="5843173">1</span><span class="op" id="5843174">&lt;&lt;</span><span class="num" id="5843176">63</span><span class="op" id="5843178">-</span><span class="num" id="5843179">1</span><span class="op" id="5843180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5843183">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Plan&nbsp;9&nbsp;magic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843216">var</span>&nbsp;<span class="ident" id="5843220">magic</span>&nbsp;<span class="op" id="5843226">[</span><span class="num" id="5843227">4</span><span class="op" id="5843228">]</span><span class="builtintype" id="5843229">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843235">if</span>&nbsp;<span class="ident" id="5843238">_</span><span class="op" id="5843239">,</span>&nbsp;<span class="ident" id="5843241">err</span>&nbsp;<span class="op" id="5843245">:=</span>&nbsp;<span class="ident" id="5843248">r</span><span class="op" id="5843249">.</span><span class="ident" id="5843250">ReadAt</span><span class="op" id="5843256">(</span><span class="ident" id="5843257">magic</span><span class="op" id="5843262">[</span><span class="op" id="5843263">:</span><span class="op" id="5843264">]</span><span class="op" id="5843265">,</span>&nbsp;<span class="num" id="5843267">0</span><span class="op" id="5843268">)</span><span class="op" id="5843269">;</span>&nbsp;<span class="ident" id="5843271">err</span>&nbsp;<span class="op" id="5843275">!=</span>&nbsp;<span class="builtintype" id="5843278">nil</span>&nbsp;<span class="op" id="5843282">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843286">return</span>&nbsp;<span class="builtintype" id="5843293">nil</span><span class="op" id="5843296">,</span>&nbsp;<span class="ident" id="5843298">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843306">_</span><span class="op" id="5843307">,</span>&nbsp;<span class="ident" id="5843309">err</span>&nbsp;<span class="op" id="5843313">:=</span>&nbsp;<span class="ident" id="5843316">parseMagic</span><span class="op" id="5843326">(</span><span class="ident" id="5843327">magic</span><span class="op" id="5843332">[</span><span class="op" id="5843333">:</span><span class="op" id="5843334">]</span><span class="op" id="5843335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843338">if</span>&nbsp;<span class="ident" id="5843341">err</span>&nbsp;<span class="op" id="5843345">!=</span>&nbsp;<span class="builtintype" id="5843348">nil</span>&nbsp;<span class="op" id="5843352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843356">return</span>&nbsp;<span class="builtintype" id="5843363">nil</span><span class="op" id="5843366">,</span>&nbsp;<span class="ident" id="5843368">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843377">ph</span>&nbsp;<span class="op" id="5843380">:=</span>&nbsp;<span class="builtinfunc" id="5843383">new</span><span class="op" id="5843386">(</span><span class="ident" id="5843387">prog</span><span class="op" id="5843391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843394">if</span>&nbsp;<span class="ident" id="5843397">err</span>&nbsp;<span class="op" id="5843401">:=</span>&nbsp;<span class="ident" id="5843404">binary</span><span class="op" id="5843410">.</span><span class="ident" id="5843411">Read</span><span class="op" id="5843415">(</span><span class="ident" id="5843416">sr</span><span class="op" id="5843418">,</span>&nbsp;<span class="ident" id="5843420">binary</span><span class="op" id="5843426">.</span><span class="ident" id="5843427">BigEndian</span><span class="op" id="5843436">,</span>&nbsp;<span class="ident" id="5843438">ph</span><span class="op" id="5843440">)</span><span class="op" id="5843441">;</span>&nbsp;<span class="ident" id="5843443">err</span>&nbsp;<span class="op" id="5843447">!=</span>&nbsp;<span class="builtintype" id="5843450">nil</span>&nbsp;<span class="op" id="5843454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843458">return</span>&nbsp;<span class="builtintype" id="5843465">nil</span><span class="op" id="5843468">,</span>&nbsp;<span class="ident" id="5843470">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843479">f</span>&nbsp;<span class="op" id="5843481">:=</span>&nbsp;<span class="op" id="5843484">&amp;</span><span class="ident" id="5843485">File</span><span class="op" id="5843489">{</span><span class="ident" id="5843490">FileHeader</span><span class="op" id="5843500">:</span>&nbsp;<span class="ident" id="5843502">FileHeader</span><span class="op" id="5843512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843516">Magic</span><span class="op" id="5843521">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843529">ph</span><span class="op" id="5843531">.</span><span class="ident" id="5843532">Magic</span><span class="op" id="5843537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843541">Bss</span><span class="op" id="5843544">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843554">ph</span><span class="op" id="5843556">.</span><span class="ident" id="5843557">Bss</span><span class="op" id="5843560">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843564">Entry</span><span class="op" id="5843569">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843577">uint64</span><span class="op" id="5843583">(</span><span class="ident" id="5843584">ph</span><span class="op" id="5843586">.</span><span class="ident" id="5843587">Entry</span><span class="op" id="5843592">)</span><span class="op" id="5843593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843597">PtrSize</span><span class="op" id="5843604">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="5843610">4</span><span class="op" id="5843611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843615">LoadAddress</span><span class="op" id="5843626">:</span>&nbsp;<span class="num" id="5843628">0x1000</span><span class="op" id="5843634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843638">HdrSize</span><span class="op" id="5843645">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="5843651">4</span>&nbsp;<span class="op" id="5843653">*</span>&nbsp;<span class="num" id="5843655">8</span><span class="op" id="5843656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843659">}</span><span class="op" id="5843660">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843664">if</span>&nbsp;<span class="ident" id="5843667">ph</span><span class="op" id="5843669">.</span><span class="ident" id="5843670">Magic</span><span class="op" id="5843675">&amp;</span><span class="ident" id="5843676">Magic64</span>&nbsp;<span class="op" id="5843684">!=</span>&nbsp;<span class="num" id="5843687">0</span>&nbsp;<span class="op" id="5843689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843693">if</span>&nbsp;<span class="ident" id="5843696">err</span>&nbsp;<span class="op" id="5843700">:=</span>&nbsp;<span class="ident" id="5843703">binary</span><span class="op" id="5843709">.</span><span class="ident" id="5843710">Read</span><span class="op" id="5843714">(</span><span class="ident" id="5843715">sr</span><span class="op" id="5843717">,</span>&nbsp;<span class="ident" id="5843719">binary</span><span class="op" id="5843725">.</span><span class="ident" id="5843726">BigEndian</span><span class="op" id="5843735">,</span>&nbsp;<span class="op" id="5843737">&amp;</span><span class="ident" id="5843738">f</span><span class="op" id="5843739">.</span><span class="ident" id="5843740">Entry</span><span class="op" id="5843745">)</span><span class="op" id="5843746">;</span>&nbsp;<span class="ident" id="5843748">err</span>&nbsp;<span class="op" id="5843752">!=</span>&nbsp;<span class="builtintype" id="5843755">nil</span>&nbsp;<span class="op" id="5843759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843764">return</span>&nbsp;<span class="builtintype" id="5843771">nil</span><span class="op" id="5843774">,</span>&nbsp;<span class="ident" id="5843776">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843782">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843786">f</span><span class="op" id="5843787">.</span><span class="ident" id="5843788">PtrSize</span>&nbsp;<span class="op" id="5843796">=</span>&nbsp;<span class="num" id="5843798">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843802">f</span><span class="op" id="5843803">.</span><span class="ident" id="5843804">LoadAddress</span>&nbsp;<span class="op" id="5843816">=</span>&nbsp;<span class="num" id="5843818">0x200000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843829">f</span><span class="op" id="5843830">.</span><span class="ident" id="5843831">HdrSize</span>&nbsp;<span class="op" id="5843839">+=</span>&nbsp;<span class="num" id="5843842">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5843849">var</span>&nbsp;<span class="ident" id="5843853">sects</span>&nbsp;<span class="op" id="5843859">=</span>&nbsp;<span class="op" id="5843861">[</span><span class="op" id="5843862">]</span><span class="keyword" id="5843863">struct</span>&nbsp;<span class="op" id="5843870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843874">name</span>&nbsp;<span class="builtintype" id="5843879">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843888">size</span>&nbsp;<span class="builtintype" id="5843893">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843901">}</span><span class="op" id="5843902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843906">{</span><span class="string" id="5843907">&#34;text&#34;</span><span class="op" id="5843913">,</span>&nbsp;<span class="ident" id="5843915">ph</span><span class="op" id="5843917">.</span><span class="ident" id="5843918">Text</span><span class="op" id="5843922">}</span><span class="op" id="5843923">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843927">{</span><span class="string" id="5843928">&#34;data&#34;</span><span class="op" id="5843934">,</span>&nbsp;<span class="ident" id="5843936">ph</span><span class="op" id="5843938">.</span><span class="ident" id="5843939">Data</span><span class="op" id="5843943">}</span><span class="op" id="5843944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843948">{</span><span class="string" id="5843949">&#34;syms&#34;</span><span class="op" id="5843955">,</span>&nbsp;<span class="ident" id="5843957">ph</span><span class="op" id="5843959">.</span><span class="ident" id="5843960">Syms</span><span class="op" id="5843964">}</span><span class="op" id="5843965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843969">{</span><span class="string" id="5843970">&#34;spsz&#34;</span><span class="op" id="5843976">,</span>&nbsp;<span class="ident" id="5843978">ph</span><span class="op" id="5843980">.</span><span class="ident" id="5843981">Spsz</span><span class="op" id="5843985">}</span><span class="op" id="5843986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843990">{</span><span class="string" id="5843991">&#34;pcsz&#34;</span><span class="op" id="5843997">,</span>&nbsp;<span class="ident" id="5843999">ph</span><span class="op" id="5844001">.</span><span class="ident" id="5844002">Pcsz</span><span class="op" id="5844006">}</span><span class="op" id="5844007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844010">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844014">f</span><span class="op" id="5844015">.</span><span class="ident" id="5844016">Sections</span>&nbsp;<span class="op" id="5844025">=</span>&nbsp;<span class="builtinfunc" id="5844027">make</span><span class="op" id="5844031">(</span><span class="op" id="5844032">[</span><span class="op" id="5844033">]</span><span class="op" id="5844034">*</span><span class="ident" id="5844035">Section</span><span class="op" id="5844042">,</span>&nbsp;<span class="num" id="5844044">5</span><span class="op" id="5844045">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844049">off</span>&nbsp;<span class="op" id="5844053">:=</span>&nbsp;<span class="builtintype" id="5844056">uint32</span><span class="op" id="5844062">(</span><span class="ident" id="5844063">f</span><span class="op" id="5844064">.</span><span class="ident" id="5844065">HdrSize</span><span class="op" id="5844072">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844076">for</span>&nbsp;<span class="ident" id="5844080">i</span><span class="op" id="5844081">,</span>&nbsp;<span class="ident" id="5844083">sect</span>&nbsp;<span class="op" id="5844088">:=</span>&nbsp;<span class="keyword" id="5844091">range</span>&nbsp;<span class="ident" id="5844097">sects</span>&nbsp;<span class="op" id="5844103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844107">s</span>&nbsp;<span class="op" id="5844109">:=</span>&nbsp;<span class="builtinfunc" id="5844112">new</span><span class="op" id="5844115">(</span><span class="ident" id="5844116">Section</span><span class="op" id="5844123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844127">s</span><span class="op" id="5844128">.</span><span class="ident" id="5844129">SectionHeader</span>&nbsp;<span class="op" id="5844143">=</span>&nbsp;<span class="ident" id="5844145">SectionHeader</span><span class="op" id="5844158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844163">Name</span><span class="op" id="5844167">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5844171">sect</span><span class="op" id="5844175">.</span><span class="ident" id="5844176">name</span><span class="op" id="5844180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844185">Size</span><span class="op" id="5844189">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5844193">sect</span><span class="op" id="5844197">.</span><span class="ident" id="5844198">size</span><span class="op" id="5844202">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844207">Offset</span><span class="op" id="5844213">:</span>&nbsp;<span class="ident" id="5844215">off</span><span class="op" id="5844218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844226">off</span>&nbsp;<span class="op" id="5844230">+=</span>&nbsp;<span class="ident" id="5844233">sect</span><span class="op" id="5844237">.</span><span class="ident" id="5844238">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844245">s</span><span class="op" id="5844246">.</span><span class="ident" id="5844247">sr</span>&nbsp;<span class="op" id="5844250">=</span>&nbsp;<span class="ident" id="5844252">io</span><span class="op" id="5844254">.</span><span class="ident" id="5844255">NewSectionReader</span><span class="op" id="5844271">(</span><span class="ident" id="5844272">r</span><span class="op" id="5844273">,</span>&nbsp;<span class="ident" id="5844275">int64</span><span class="op" id="5844280">(</span><span class="ident" id="5844281">s</span><span class="op" id="5844282">.</span><span class="ident" id="5844283">Offset</span><span class="op" id="5844289">)</span><span class="op" id="5844290">,</span>&nbsp;<span class="ident" id="5844292">int64</span><span class="op" id="5844297">(</span><span class="ident" id="5844298">s</span><span class="op" id="5844299">.</span><span class="ident" id="5844300">Size</span><span class="op" id="5844304">)</span><span class="op" id="5844305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844309">s</span><span class="op" id="5844310">.</span><span class="ident" id="5844311">ReaderAt</span>&nbsp;<span class="op" id="5844320">=</span>&nbsp;<span class="ident" id="5844322">s</span><span class="op" id="5844323">.</span><span class="ident" id="5844324">sr</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844329">f</span><span class="op" id="5844330">.</span><span class="ident" id="5844331">Sections</span><span class="op" id="5844339">[</span><span class="ident" id="5844340">i</span><span class="op" id="5844341">]</span>&nbsp;<span class="op" id="5844343">=</span>&nbsp;<span class="ident" id="5844345">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844352">return</span>&nbsp;<span class="ident" id="5844359">f</span><span class="op" id="5844360">,</span>&nbsp;<span class="builtintype" id="5844362">nil</span><br>
<span class="lineno"></span><span class="op" id="5844366">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="5844369">func</span>&nbsp;<span class="ident" id="5844374">walksymtab</span><span class="op" id="5844384">(</span><span class="ident" id="5844385">data</span>&nbsp;<span class="op" id="5844390">[</span><span class="op" id="5844391">]</span><span class="builtintype" id="5844392">byte</span><span class="op" id="5844396">,</span>&nbsp;<span class="ident" id="5844398">ptrsz</span>&nbsp;<span class="builtintype" id="5844404">int</span><span class="op" id="5844407">,</span>&nbsp;<span class="ident" id="5844409">fn</span>&nbsp;<span class="keyword" id="5844412">func</span><span class="op" id="5844416">(</span><span class="ident" id="5844417">sym</span><span class="op" id="5844420">)</span>&nbsp;<span class="builtintype" id="5844422">error</span><span class="op" id="5844427">)</span>&nbsp;<span class="builtintype" id="5844429">error</span>&nbsp;<span class="op" id="5844435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844438">var</span>&nbsp;<span class="ident" id="5844442">order</span>&nbsp;<span class="ident" id="5844448">binary</span><span class="op" id="5844454">.</span><span class="ident" id="5844455">ByteOrder</span>&nbsp;<span class="op" id="5844465">=</span>&nbsp;<span class="ident" id="5844467">binary</span><span class="op" id="5844473">.</span><span class="ident" id="5844474">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844485">var</span>&nbsp;<span class="ident" id="5844489">s</span>&nbsp;<span class="ident" id="5844491">sym</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844496">p</span>&nbsp;<span class="op" id="5844498">:=</span>&nbsp;<span class="ident" id="5844501">data</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844507">for</span>&nbsp;<span class="builtinfunc" id="5844511">len</span><span class="op" id="5844514">(</span><span class="ident" id="5844515">p</span><span class="op" id="5844516">)</span>&nbsp;<span class="op" id="5844518">&gt;=</span>&nbsp;<span class="num" id="5844521">4</span>&nbsp;<span class="op" id="5844523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844527">//&nbsp;Symbol&nbsp;type,&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844552">if</span>&nbsp;<span class="builtinfunc" id="5844555">len</span><span class="op" id="5844558">(</span><span class="ident" id="5844559">p</span><span class="op" id="5844560">)</span>&nbsp;<span class="op" id="5844562">&lt;</span>&nbsp;<span class="ident" id="5844564">ptrsz</span>&nbsp;<span class="op" id="5844570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844575">return</span>&nbsp;<span class="op" id="5844582">&amp;</span><span class="ident" id="5844583">formatError</span><span class="op" id="5844594">{</span><span class="builtinfunc" id="5844595">len</span><span class="op" id="5844598">(</span><span class="ident" id="5844599">data</span><span class="op" id="5844603">)</span><span class="op" id="5844604">,</span>&nbsp;<span class="string" id="5844606">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="5844622">,</span>&nbsp;<span class="builtintype" id="5844624">nil</span><span class="op" id="5844627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844631">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844635">//&nbsp;fixed-width&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844658">if</span>&nbsp;<span class="ident" id="5844661">ptrsz</span>&nbsp;<span class="op" id="5844667">==</span>&nbsp;<span class="num" id="5844670">8</span>&nbsp;<span class="op" id="5844672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844677">s</span><span class="op" id="5844678">.</span><span class="ident" id="5844679">value</span>&nbsp;<span class="op" id="5844685">=</span>&nbsp;<span class="ident" id="5844687">order</span><span class="op" id="5844692">.</span><span class="ident" id="5844693">Uint64</span><span class="op" id="5844699">(</span><span class="ident" id="5844700">p</span><span class="op" id="5844701">[</span><span class="num" id="5844702">0</span><span class="op" id="5844703">:</span><span class="num" id="5844704">8</span><span class="op" id="5844705">]</span><span class="op" id="5844706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844711">p</span>&nbsp;<span class="op" id="5844713">=</span>&nbsp;<span class="ident" id="5844715">p</span><span class="op" id="5844716">[</span><span class="num" id="5844717">8</span><span class="op" id="5844718">:</span><span class="op" id="5844719">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844723">}</span>&nbsp;<span class="keyword" id="5844725">else</span>&nbsp;<span class="op" id="5844730">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844735">s</span><span class="op" id="5844736">.</span><span class="ident" id="5844737">value</span>&nbsp;<span class="op" id="5844743">=</span>&nbsp;<span class="ident" id="5844745">uint64</span><span class="op" id="5844751">(</span><span class="ident" id="5844752">order</span><span class="op" id="5844757">.</span><span class="ident" id="5844758">Uint32</span><span class="op" id="5844764">(</span><span class="ident" id="5844765">p</span><span class="op" id="5844766">[</span><span class="num" id="5844767">0</span><span class="op" id="5844768">:</span><span class="num" id="5844769">4</span><span class="op" id="5844770">]</span><span class="op" id="5844771">)</span><span class="op" id="5844772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844777">p</span>&nbsp;<span class="op" id="5844779">=</span>&nbsp;<span class="ident" id="5844781">p</span><span class="op" id="5844782">[</span><span class="num" id="5844783">4</span><span class="op" id="5844784">:</span><span class="op" id="5844785">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844794">var</span>&nbsp;<span class="ident" id="5844798">typ</span>&nbsp;<span class="builtintype" id="5844802">byte</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844809">typ</span>&nbsp;<span class="op" id="5844813">=</span>&nbsp;<span class="ident" id="5844815">p</span><span class="op" id="5844816">[</span><span class="num" id="5844817">0</span><span class="op" id="5844818">]</span>&nbsp;<span class="op" id="5844820">&amp;</span>&nbsp;<span class="num" id="5844822">0x7F</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844829">s</span><span class="op" id="5844830">.</span><span class="ident" id="5844831">typ</span>&nbsp;<span class="op" id="5844835">=</span>&nbsp;<span class="ident" id="5844837">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844843">p</span>&nbsp;<span class="op" id="5844845">=</span>&nbsp;<span class="ident" id="5844847">p</span><span class="op" id="5844848">[</span><span class="num" id="5844849">1</span><span class="op" id="5844850">:</span><span class="op" id="5844851">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844856">//&nbsp;Name.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844867">var</span>&nbsp;<span class="ident" id="5844871">i</span>&nbsp;<span class="builtintype" id="5844873">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844879">var</span>&nbsp;<span class="ident" id="5844883">nnul</span>&nbsp;<span class="builtintype" id="5844888">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844894">for</span>&nbsp;<span class="ident" id="5844898">i</span>&nbsp;<span class="op" id="5844900">=</span>&nbsp;<span class="num" id="5844902">0</span><span class="op" id="5844903">;</span>&nbsp;<span class="ident" id="5844905">i</span>&nbsp;<span class="op" id="5844907">&lt;</span>&nbsp;<span class="builtinfunc" id="5844909">len</span><span class="op" id="5844912">(</span><span class="ident" id="5844913">p</span><span class="op" id="5844914">)</span><span class="op" id="5844915">;</span>&nbsp;<span class="ident" id="5844917">i</span><span class="op" id="5844918">++</span>&nbsp;<span class="op" id="5844921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844926">if</span>&nbsp;<span class="ident" id="5844929">p</span><span class="op" id="5844930">[</span><span class="ident" id="5844931">i</span><span class="op" id="5844932">]</span>&nbsp;<span class="op" id="5844934">==</span>&nbsp;<span class="num" id="5844937">0</span>&nbsp;<span class="op" id="5844939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844945">nnul</span>&nbsp;<span class="op" id="5844950">=</span>&nbsp;<span class="num" id="5844952">1</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844958">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844975">switch</span>&nbsp;<span class="ident" id="5844982">typ</span>&nbsp;<span class="op" id="5844986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5844990">case</span>&nbsp;<span class="string" id="5844995">&#39;z&#39;</span><span class="op" id="5844998">,</span>&nbsp;<span class="string" id="5845000">&#39;Z&#39;</span><span class="op" id="5845003">:</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845008">p</span>&nbsp;<span class="op" id="5845010">=</span>&nbsp;<span class="ident" id="5845012">p</span><span class="op" id="5845013">[</span><span class="ident" id="5845014">i</span><span class="op" id="5845015">+</span><span class="ident" id="5845016">nnul</span><span class="op" id="5845020">:</span><span class="op" id="5845021">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845026">for</span>&nbsp;<span class="ident" id="5845030">i</span>&nbsp;<span class="op" id="5845032">=</span>&nbsp;<span class="num" id="5845034">0</span><span class="op" id="5845035">;</span>&nbsp;<span class="ident" id="5845037">i</span><span class="op" id="5845038">+</span><span class="num" id="5845039">2</span>&nbsp;<span class="op" id="5845041">&lt;=</span>&nbsp;<span class="builtinfunc" id="5845044">len</span><span class="op" id="5845047">(</span><span class="ident" id="5845048">p</span><span class="op" id="5845049">)</span><span class="op" id="5845050">;</span>&nbsp;<span class="ident" id="5845052">i</span>&nbsp;<span class="op" id="5845054">+=</span>&nbsp;<span class="num" id="5845057">2</span>&nbsp;<span class="op" id="5845059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845065">if</span>&nbsp;<span class="ident" id="5845068">p</span><span class="op" id="5845069">[</span><span class="ident" id="5845070">i</span><span class="op" id="5845071">]</span>&nbsp;<span class="op" id="5845073">==</span>&nbsp;<span class="num" id="5845076">0</span>&nbsp;<span class="op" id="5845078">&amp;&amp;</span>&nbsp;<span class="ident" id="5845081">p</span><span class="op" id="5845082">[</span><span class="ident" id="5845083">i</span><span class="op" id="5845084">+</span><span class="num" id="5845085">1</span><span class="op" id="5845086">]</span>&nbsp;<span class="op" id="5845088">==</span>&nbsp;<span class="num" id="5845091">0</span>&nbsp;<span class="op" id="5845093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845100">nnul</span>&nbsp;<span class="op" id="5845105">=</span>&nbsp;<span class="num" id="5845107">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845114">break</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845137">if</span>&nbsp;<span class="builtinfunc" id="5845140">len</span><span class="op" id="5845143">(</span><span class="ident" id="5845144">p</span><span class="op" id="5845145">)</span>&nbsp;<span class="op" id="5845147">&lt;</span>&nbsp;<span class="ident" id="5845149">i</span><span class="op" id="5845150">+</span><span class="ident" id="5845151">nnul</span>&nbsp;<span class="op" id="5845156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845161">return</span>&nbsp;<span class="op" id="5845168">&amp;</span><span class="ident" id="5845169">formatError</span><span class="op" id="5845180">{</span><span class="builtinfunc" id="5845181">len</span><span class="op" id="5845184">(</span><span class="ident" id="5845185">data</span><span class="op" id="5845189">)</span><span class="op" id="5845190">,</span>&nbsp;<span class="string" id="5845192">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="5845208">,</span>&nbsp;<span class="builtintype" id="5845210">nil</span><span class="op" id="5845213">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845221">s</span><span class="op" id="5845222">.</span><span class="ident" id="5845223">name</span>&nbsp;<span class="op" id="5845228">=</span>&nbsp;<span class="ident" id="5845230">p</span><span class="op" id="5845231">[</span><span class="num" id="5845232">0</span><span class="op" id="5845233">:</span><span class="ident" id="5845234">i</span><span class="op" id="5845235">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845239">i</span>&nbsp;<span class="op" id="5845241">+=</span>&nbsp;<span class="ident" id="5845244">nnul</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845251">p</span>&nbsp;<span class="op" id="5845253">=</span>&nbsp;<span class="ident" id="5845255">p</span><span class="op" id="5845256">[</span><span class="ident" id="5845257">i</span><span class="op" id="5845258">:</span><span class="op" id="5845259">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845264">fn</span><span class="op" id="5845266">(</span><span class="ident" id="5845267">s</span><span class="op" id="5845268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845274">return</span>&nbsp;<span class="builtintype" id="5845281">nil</span><br>
<span class="lineno"></span><span class="op" id="5845285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="5845288">//&nbsp;NewTable&nbsp;decodes&nbsp;the&nbsp;Go&nbsp;symbol&nbsp;table&nbsp;in&nbsp;data,</span><br>
<span class="lineno"></span><span class="comment" id="5845337">//&nbsp;returning&nbsp;an&nbsp;in-memory&nbsp;representation.</span><br>
<span class="lineno"></span><span class="keyword" id="5845379">func</span>&nbsp;<span class="ident" id="5845384">newTable</span><span class="op" id="5845392">(</span><span class="ident" id="5845393">symtab</span>&nbsp;<span class="op" id="5845400">[</span><span class="op" id="5845401">]</span><span class="builtintype" id="5845402">byte</span><span class="op" id="5845406">,</span>&nbsp;<span class="ident" id="5845408">ptrsz</span>&nbsp;<span class="builtintype" id="5845414">int</span><span class="op" id="5845417">)</span>&nbsp;<span class="op" id="5845419">(</span><span class="op" id="5845420">[</span><span class="op" id="5845421">]</span><span class="ident" id="5845422">Sym</span><span class="op" id="5845425">,</span>&nbsp;<span class="builtintype" id="5845427">error</span><span class="op" id="5845432">)</span>&nbsp;<span class="op" id="5845434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845437">var</span>&nbsp;<span class="ident" id="5845441">n</span>&nbsp;<span class="builtintype" id="5845443">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845448">err</span>&nbsp;<span class="op" id="5845452">:=</span>&nbsp;<span class="ident" id="5845455">walksymtab</span><span class="op" id="5845465">(</span><span class="ident" id="5845466">symtab</span><span class="op" id="5845472">,</span>&nbsp;<span class="ident" id="5845474">ptrsz</span><span class="op" id="5845479">,</span>&nbsp;<span class="keyword" id="5845481">func</span><span class="op" id="5845485">(</span><span class="ident" id="5845486">s</span>&nbsp;<span class="ident" id="5845488">sym</span><span class="op" id="5845491">)</span>&nbsp;<span class="builtintype" id="5845493">error</span>&nbsp;<span class="op" id="5845499">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845503">n</span><span class="op" id="5845504">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845509">return</span>&nbsp;<span class="builtintype" id="5845516">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845521">}</span><span class="op" id="5845522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845525">if</span>&nbsp;<span class="ident" id="5845528">err</span>&nbsp;<span class="op" id="5845532">!=</span>&nbsp;<span class="builtintype" id="5845535">nil</span>&nbsp;<span class="op" id="5845539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845543">return</span>&nbsp;<span class="builtintype" id="5845550">nil</span><span class="op" id="5845553">,</span>&nbsp;<span class="ident" id="5845555">err</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845564">fname</span>&nbsp;<span class="op" id="5845570">:=</span>&nbsp;<span class="builtinfunc" id="5845573">make</span><span class="op" id="5845577">(</span><span class="keyword" id="5845578">map</span><span class="op" id="5845581">[</span><span class="builtintype" id="5845582">uint16</span><span class="op" id="5845588">]</span><span class="builtintype" id="5845589">string</span><span class="op" id="5845595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845598">syms</span>&nbsp;<span class="op" id="5845603">:=</span>&nbsp;<span class="builtinfunc" id="5845606">make</span><span class="op" id="5845610">(</span><span class="op" id="5845611">[</span><span class="op" id="5845612">]</span><span class="ident" id="5845613">Sym</span><span class="op" id="5845616">,</span>&nbsp;<span class="num" id="5845618">0</span><span class="op" id="5845619">,</span>&nbsp;<span class="ident" id="5845621">n</span><span class="op" id="5845622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845625">err</span>&nbsp;<span class="op" id="5845629">=</span>&nbsp;<span class="ident" id="5845631">walksymtab</span><span class="op" id="5845641">(</span><span class="ident" id="5845642">symtab</span><span class="op" id="5845648">,</span>&nbsp;<span class="ident" id="5845650">ptrsz</span><span class="op" id="5845655">,</span>&nbsp;<span class="keyword" id="5845657">func</span><span class="op" id="5845661">(</span><span class="ident" id="5845662">s</span>&nbsp;<span class="ident" id="5845664">sym</span><span class="op" id="5845667">)</span>&nbsp;<span class="builtintype" id="5845669">error</span>&nbsp;<span class="op" id="5845675">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845679">n</span>&nbsp;<span class="op" id="5845681">:=</span>&nbsp;<span class="builtinfunc" id="5845684">len</span><span class="op" id="5845687">(</span><span class="ident" id="5845688">syms</span><span class="op" id="5845692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845696">syms</span>&nbsp;<span class="op" id="5845701">=</span>&nbsp;<span class="ident" id="5845703">syms</span><span class="op" id="5845707">[</span><span class="num" id="5845708">0</span>&nbsp;<span class="op" id="5845710">:</span>&nbsp;<span class="ident" id="5845712">n</span><span class="op" id="5845713">+</span><span class="num" id="5845714">1</span><span class="op" id="5845715">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845719">ts</span>&nbsp;<span class="op" id="5845722">:=</span>&nbsp;<span class="op" id="5845725">&amp;</span><span class="ident" id="5845726">syms</span><span class="op" id="5845730">[</span><span class="ident" id="5845731">n</span><span class="op" id="5845732">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845736">ts</span><span class="op" id="5845738">.</span><span class="ident" id="5845739">Type</span>&nbsp;<span class="op" id="5845744">=</span>&nbsp;<span class="builtintype" id="5845746">rune</span><span class="op" id="5845750">(</span><span class="ident" id="5845751">s</span><span class="op" id="5845752">.</span><span class="ident" id="5845753">typ</span><span class="op" id="5845756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845760">ts</span><span class="op" id="5845762">.</span><span class="ident" id="5845763">Value</span>&nbsp;<span class="op" id="5845769">=</span>&nbsp;<span class="ident" id="5845771">s</span><span class="op" id="5845772">.</span><span class="ident" id="5845773">value</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845781">switch</span>&nbsp;<span class="ident" id="5845788">s</span><span class="op" id="5845789">.</span><span class="ident" id="5845790">typ</span>&nbsp;<span class="op" id="5845794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845798">default</span><span class="op" id="5845805">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845810">ts</span><span class="op" id="5845812">.</span><span class="ident" id="5845813">Name</span>&nbsp;<span class="op" id="5845818">=</span>&nbsp;<span class="builtintype" id="5845820">string</span><span class="op" id="5845826">(</span><span class="ident" id="5845827">s</span><span class="op" id="5845828">.</span><span class="ident" id="5845829">name</span><span class="op" id="5845833">[</span><span class="op" id="5845834">:</span><span class="op" id="5845835">]</span><span class="op" id="5845836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845840">case</span>&nbsp;<span class="string" id="5845845">&#39;z&#39;</span><span class="op" id="5845848">,</span>&nbsp;<span class="string" id="5845850">&#39;Z&#39;</span><span class="op" id="5845853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845858">for</span>&nbsp;<span class="ident" id="5845862">i</span>&nbsp;<span class="op" id="5845864">:=</span>&nbsp;<span class="num" id="5845867">0</span><span class="op" id="5845868">;</span>&nbsp;<span class="ident" id="5845870">i</span>&nbsp;<span class="op" id="5845872">&lt;</span>&nbsp;<span class="builtinfunc" id="5845874">len</span><span class="op" id="5845877">(</span><span class="ident" id="5845878">s</span><span class="op" id="5845879">.</span><span class="ident" id="5845880">name</span><span class="op" id="5845884">)</span><span class="op" id="5845885">;</span>&nbsp;<span class="ident" id="5845887">i</span>&nbsp;<span class="op" id="5845889">+=</span>&nbsp;<span class="num" id="5845892">2</span>&nbsp;<span class="op" id="5845894">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845900">eltIdx</span>&nbsp;<span class="op" id="5845907">:=</span>&nbsp;<span class="ident" id="5845910">binary</span><span class="op" id="5845916">.</span><span class="ident" id="5845917">BigEndian</span><span class="op" id="5845926">.</span><span class="ident" id="5845927">Uint16</span><span class="op" id="5845933">(</span><span class="ident" id="5845934">s</span><span class="op" id="5845935">.</span><span class="ident" id="5845936">name</span><span class="op" id="5845940">[</span><span class="ident" id="5845941">i</span>&nbsp;<span class="op" id="5845943">:</span>&nbsp;<span class="ident" id="5845945">i</span><span class="op" id="5845946">+</span><span class="num" id="5845947">2</span><span class="op" id="5845948">]</span><span class="op" id="5845949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845955">elt</span><span class="op" id="5845958">,</span>&nbsp;<span class="ident" id="5845960">ok</span>&nbsp;<span class="op" id="5845963">:=</span>&nbsp;<span class="ident" id="5845966">fname</span><span class="op" id="5845971">[</span><span class="ident" id="5845972">eltIdx</span><span class="op" id="5845978">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845984">if</span>&nbsp;<span class="op" id="5845987">!</span><span class="ident" id="5845988">ok</span>&nbsp;<span class="op" id="5845991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845998">return</span>&nbsp;<span class="op" id="5846005">&amp;</span><span class="ident" id="5846006">formatError</span><span class="op" id="5846017">{</span><span class="op" id="5846018">-</span><span class="num" id="5846019">1</span><span class="op" id="5846020">,</span>&nbsp;<span class="string" id="5846022">&#34;bad&nbsp;filename&nbsp;code&#34;</span><span class="op" id="5846041">,</span>&nbsp;<span class="ident" id="5846043">eltIdx</span><span class="op" id="5846049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846055">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846061">if</span>&nbsp;<span class="ident" id="5846064">n</span>&nbsp;<span class="op" id="5846066">:=</span>&nbsp;<span class="builtinfunc" id="5846069">len</span><span class="op" id="5846072">(</span><span class="ident" id="5846073">ts</span><span class="op" id="5846075">.</span><span class="ident" id="5846076">Name</span><span class="op" id="5846080">)</span><span class="op" id="5846081">;</span>&nbsp;<span class="ident" id="5846083">n</span>&nbsp;<span class="op" id="5846085">&gt;</span>&nbsp;<span class="num" id="5846087">0</span>&nbsp;<span class="op" id="5846089">&amp;&amp;</span>&nbsp;<span class="ident" id="5846092">ts</span><span class="op" id="5846094">.</span><span class="ident" id="5846095">Name</span><span class="op" id="5846099">[</span><span class="ident" id="5846100">n</span><span class="op" id="5846101">-</span><span class="num" id="5846102">1</span><span class="op" id="5846103">]</span>&nbsp;<span class="op" id="5846105">!=</span>&nbsp;<span class="string" id="5846108">&#39;/&#39;</span>&nbsp;<span class="op" id="5846112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846119">ts</span><span class="op" id="5846121">.</span><span class="ident" id="5846122">Name</span>&nbsp;<span class="op" id="5846127">+=</span>&nbsp;<span class="string" id="5846130">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846144">ts</span><span class="op" id="5846146">.</span><span class="ident" id="5846147">Name</span>&nbsp;<span class="op" id="5846152">+=</span>&nbsp;<span class="ident" id="5846155">elt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846162">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846170">switch</span>&nbsp;<span class="ident" id="5846177">s</span><span class="op" id="5846178">.</span><span class="ident" id="5846179">typ</span>&nbsp;<span class="op" id="5846183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846187">case</span>&nbsp;<span class="string" id="5846192">&#39;f&#39;</span><span class="op" id="5846195">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846200">fname</span><span class="op" id="5846205">[</span><span class="builtintype" id="5846206">uint16</span><span class="op" id="5846212">(</span><span class="ident" id="5846213">s</span><span class="op" id="5846214">.</span><span class="ident" id="5846215">value</span><span class="op" id="5846220">)</span><span class="op" id="5846221">]</span>&nbsp;<span class="op" id="5846223">=</span>&nbsp;<span class="ident" id="5846225">ts</span><span class="op" id="5846227">.</span><span class="ident" id="5846228">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846235">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846239">return</span>&nbsp;<span class="builtintype" id="5846246">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846251">}</span><span class="op" id="5846252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846255">if</span>&nbsp;<span class="ident" id="5846258">err</span>&nbsp;<span class="op" id="5846262">!=</span>&nbsp;<span class="builtintype" id="5846265">nil</span>&nbsp;<span class="op" id="5846269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846273">return</span>&nbsp;<span class="builtintype" id="5846280">nil</span><span class="op" id="5846283">,</span>&nbsp;<span class="ident" id="5846285">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846290">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846294">return</span>&nbsp;<span class="ident" id="5846301">syms</span><span class="op" id="5846305">,</span>&nbsp;<span class="builtintype" id="5846307">nil</span><br>
<span class="lineno"></span><span class="op" id="5846311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5846314">//&nbsp;Symbols&nbsp;returns&nbsp;the&nbsp;symbol&nbsp;table&nbsp;for&nbsp;f.</span><br>
<span class="lineno">305</span><span class="keyword" id="5846357">func</span>&nbsp;<span class="op" id="5846362">(</span><span class="ident" id="5846363">f</span>&nbsp;<span class="op" id="5846365">*</span><span class="ident" id="5846366">File</span><span class="op" id="5846370">)</span>&nbsp;<span class="ident" id="5846372">Symbols</span><span class="op" id="5846379">(</span><span class="op" id="5846380">)</span>&nbsp;<span class="op" id="5846382">(</span><span class="op" id="5846383">[</span><span class="op" id="5846384">]</span><span class="ident" id="5846385">Sym</span><span class="op" id="5846388">,</span>&nbsp;<span class="builtintype" id="5846390">error</span><span class="op" id="5846395">)</span>&nbsp;<span class="op" id="5846397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846400">symtabSection</span>&nbsp;<span class="op" id="5846414">:=</span>&nbsp;<span class="ident" id="5846417">f</span><span class="op" id="5846418">.</span><span class="ident" id="5846419">Section</span><span class="op" id="5846426">(</span><span class="string" id="5846427">&#34;syms&#34;</span><span class="op" id="5846433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846436">if</span>&nbsp;<span class="ident" id="5846439">symtabSection</span>&nbsp;<span class="op" id="5846453">==</span>&nbsp;<span class="builtintype" id="5846456">nil</span>&nbsp;<span class="op" id="5846460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846464">return</span>&nbsp;<span class="builtintype" id="5846471">nil</span><span class="op" id="5846474">,</span>&nbsp;<span class="ident" id="5846476">errors</span><span class="op" id="5846482">.</span><span class="ident" id="5846483">New</span><span class="op" id="5846486">(</span><span class="string" id="5846487">&#34;no&nbsp;symbol&nbsp;section&#34;</span><span class="op" id="5846506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846509">}</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846513">symtab</span><span class="op" id="5846519">,</span>&nbsp;<span class="ident" id="5846521">err</span>&nbsp;<span class="op" id="5846525">:=</span>&nbsp;<span class="ident" id="5846528">symtabSection</span><span class="op" id="5846541">.</span><span class="ident" id="5846542">Data</span><span class="op" id="5846546">(</span><span class="op" id="5846547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846550">if</span>&nbsp;<span class="ident" id="5846553">err</span>&nbsp;<span class="op" id="5846557">!=</span>&nbsp;<span class="builtintype" id="5846560">nil</span>&nbsp;<span class="op" id="5846564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846568">return</span>&nbsp;<span class="builtintype" id="5846575">nil</span><span class="op" id="5846578">,</span>&nbsp;<span class="ident" id="5846580">errors</span><span class="op" id="5846586">.</span><span class="ident" id="5846587">New</span><span class="op" id="5846590">(</span><span class="string" id="5846591">&#34;cannot&nbsp;load&nbsp;symbol&nbsp;section&#34;</span><span class="op" id="5846619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846622">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846626">return</span>&nbsp;<span class="ident" id="5846633">newTable</span><span class="op" id="5846641">(</span><span class="ident" id="5846642">symtab</span><span class="op" id="5846648">,</span>&nbsp;<span class="ident" id="5846650">f</span><span class="op" id="5846651">.</span><span class="ident" id="5846652">PtrSize</span><span class="op" id="5846659">)</span><br>
<span class="lineno"></span><span class="op" id="5846661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5846664">//&nbsp;Section&nbsp;returns&nbsp;a&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno">320</span><span class="comment" id="5846732">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="5846751">func</span>&nbsp;<span class="op" id="5846756">(</span><span class="ident" id="5846757">f</span>&nbsp;<span class="op" id="5846759">*</span><span class="ident" id="5846760">File</span><span class="op" id="5846764">)</span>&nbsp;<span class="ident" id="5846766">Section</span><span class="op" id="5846773">(</span><span class="ident" id="5846774">name</span>&nbsp;<span class="builtintype" id="5846779">string</span><span class="op" id="5846785">)</span>&nbsp;<span class="op" id="5846787">*</span><span class="ident" id="5846788">Section</span>&nbsp;<span class="op" id="5846796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846799">for</span>&nbsp;<span class="ident" id="5846803">_</span><span class="op" id="5846804">,</span>&nbsp;<span class="ident" id="5846806">s</span>&nbsp;<span class="op" id="5846808">:=</span>&nbsp;<span class="keyword" id="5846811">range</span>&nbsp;<span class="ident" id="5846817">f</span><span class="op" id="5846818">.</span><span class="ident" id="5846819">Sections</span>&nbsp;<span class="op" id="5846828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846832">if</span>&nbsp;<span class="ident" id="5846835">s</span><span class="op" id="5846836">.</span><span class="ident" id="5846837">Name</span>&nbsp;<span class="op" id="5846842">==</span>&nbsp;<span class="ident" id="5846845">name</span>&nbsp;<span class="op" id="5846850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846855">return</span>&nbsp;<span class="ident" id="5846862">s</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846872">return</span>&nbsp;<span class="builtintype" id="5846879">nil</span><br>
<span class="lineno"></span><span class="op" id="5846883">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
