<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2924640">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2924695">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2924749">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2924800">package</span>&nbsp;<span class="ident" id="2924808">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2924818">import</span>&nbsp;<span class="op" id="2924825">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2924828">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2924838">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2924844">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2924855">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2924863">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2924874">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2924889">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2924892">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="2924953">var</span>&nbsp;<span class="ident" id="2924957">ErrBadPattern</span>&nbsp;<span class="op" id="2924971">=</span>&nbsp;<span class="ident" id="2924973">errors</span><span class="op" id="2924979">.</span><span class="ident" id="2924980">New</span><span class="op" id="2924983">(</span><span class="string" id="2924984">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="2925009">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2925012">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="2925079">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="2925105">//</span><br>
<span class="lineno"></span><span class="comment" id="2925108">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno"></span><span class="comment" id="2925120">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="2925133">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno">25</span><span class="comment" id="2925142">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="2925207">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="2925266">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2925306">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="2925358">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="2925421">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="2925457">//</span><br>
<span class="lineno"></span><span class="comment" id="2925460">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno"></span><span class="comment" id="2925480">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="2925538">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="2925574">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="2925628">//</span><br>
<span class="lineno"></span><span class="comment" id="2925631">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="2925701">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="2925768">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="2925785">//</span><br>
<span class="lineno"></span><span class="comment" id="2925788">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2925853">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="2925872">//</span><br>
<span class="lineno"></span><span class="keyword" id="2925875">func</span>&nbsp;<span class="ident" id="2925880">Match</span><span class="op" id="2925885">(</span><span class="ident" id="2925886">pattern</span><span class="op" id="2925893">,</span>&nbsp;<span class="ident" id="2925895">name</span>&nbsp;<span class="builtintype" id="2925900">string</span><span class="op" id="2925906">)</span>&nbsp;<span class="op" id="2925908">(</span><span class="ident" id="2925909">matched</span>&nbsp;<span class="builtintype" id="2925917">bool</span><span class="op" id="2925921">,</span>&nbsp;<span class="ident" id="2925923">err</span>&nbsp;<span class="builtintype" id="2925927">error</span><span class="op" id="2925932">)</span>&nbsp;<span class="op" id="2925934">{</span><br>
<span class="lineno">45</span><span class="ident" id="2925936">Pattern</span><span class="op" id="2925943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925946">for</span>&nbsp;<span class="builtinfunc" id="2925950">len</span><span class="op" id="2925953">(</span><span class="ident" id="2925954">pattern</span><span class="op" id="2925961">)</span>&nbsp;<span class="op" id="2925963">&gt;</span>&nbsp;<span class="num" id="2925965">0</span>&nbsp;<span class="op" id="2925967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925971">var</span>&nbsp;<span class="ident" id="2925975">star</span>&nbsp;<span class="builtintype" id="2925980">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925987">var</span>&nbsp;<span class="ident" id="2925991">chunk</span>&nbsp;<span class="builtintype" id="2925997">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2926006">star</span><span class="op" id="2926010">,</span>&nbsp;<span class="ident" id="2926012">chunk</span><span class="op" id="2926017">,</span>&nbsp;<span class="ident" id="2926019">pattern</span>&nbsp;<span class="op" id="2926027">=</span>&nbsp;<span class="ident" id="2926029">scanChunk</span><span class="op" id="2926038">(</span><span class="ident" id="2926039">pattern</span><span class="op" id="2926046">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926050">if</span>&nbsp;<span class="ident" id="2926053">star</span>&nbsp;<span class="op" id="2926058">&amp;&amp;</span>&nbsp;<span class="ident" id="2926061">chunk</span>&nbsp;<span class="op" id="2926067">==</span>&nbsp;<span class="string" id="2926070">&#34;&#34;</span>&nbsp;<span class="op" id="2926073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2926078">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926137">return</span>&nbsp;<span class="ident" id="2926144">strings</span><span class="op" id="2926151">.</span><span class="ident" id="2926152">Index</span><span class="op" id="2926157">(</span><span class="ident" id="2926158">name</span><span class="op" id="2926162">,</span>&nbsp;<span class="builtintype" id="2926164">string</span><span class="op" id="2926170">(</span><span class="ident" id="2926171">Separator</span><span class="op" id="2926180">)</span><span class="op" id="2926181">)</span>&nbsp;<span class="op" id="2926183">&lt;</span>&nbsp;<span class="num" id="2926185">0</span><span class="op" id="2926186">,</span>&nbsp;<span class="ident" id="2926188">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2926198">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2926239">t</span><span class="op" id="2926240">,</span>&nbsp;<span class="ident" id="2926242">ok</span><span class="op" id="2926244">,</span>&nbsp;<span class="ident" id="2926246">err</span>&nbsp;<span class="op" id="2926250">:=</span>&nbsp;<span class="ident" id="2926253">matchChunk</span><span class="op" id="2926263">(</span><span class="ident" id="2926264">chunk</span><span class="op" id="2926269">,</span>&nbsp;<span class="ident" id="2926271">name</span><span class="op" id="2926275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2926279">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2926344">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2926414">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926434">if</span>&nbsp;<span class="ident" id="2926437">ok</span>&nbsp;<span class="op" id="2926440">&amp;&amp;</span>&nbsp;<span class="op" id="2926443">(</span><span class="builtinfunc" id="2926444">len</span><span class="op" id="2926447">(</span><span class="ident" id="2926448">t</span><span class="op" id="2926449">)</span>&nbsp;<span class="op" id="2926451">==</span>&nbsp;<span class="num" id="2926454">0</span>&nbsp;<span class="op" id="2926456">||</span>&nbsp;<span class="builtinfunc" id="2926459">len</span><span class="op" id="2926462">(</span><span class="ident" id="2926463">pattern</span><span class="op" id="2926470">)</span>&nbsp;<span class="op" id="2926472">&gt;</span>&nbsp;<span class="num" id="2926474">0</span><span class="op" id="2926475">)</span>&nbsp;<span class="op" id="2926477">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2926482">name</span>&nbsp;<span class="op" id="2926487">=</span>&nbsp;<span class="ident" id="2926489">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926494">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926509">if</span>&nbsp;<span class="ident" id="2926512">err</span>&nbsp;<span class="op" id="2926516">!=</span>&nbsp;<span class="ident" id="2926519">nil</span>&nbsp;<span class="op" id="2926523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926528">return</span>&nbsp;<span class="builtintype" id="2926535">false</span><span class="op" id="2926540">,</span>&nbsp;<span class="ident" id="2926542">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926552">if</span>&nbsp;<span class="ident" id="2926555">star</span>&nbsp;<span class="op" id="2926560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2926565">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2926606">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926627">for</span>&nbsp;<span class="ident" id="2926631">i</span>&nbsp;<span class="op" id="2926633">:=</span>&nbsp;<span class="num" id="2926636">0</span><span class="op" id="2926637">;</span>&nbsp;<span class="ident" id="2926639">i</span>&nbsp;<span class="op" id="2926641">&lt;</span>&nbsp;<span class="builtinfunc" id="2926643">len</span><span class="op" id="2926646">(</span><span class="ident" id="2926647">name</span><span class="op" id="2926651">)</span>&nbsp;<span class="op" id="2926653">&amp;&amp;</span>&nbsp;<span class="ident" id="2926656">name</span><span class="op" id="2926660">[</span><span class="ident" id="2926661">i</span><span class="op" id="2926662">]</span>&nbsp;<span class="op" id="2926664">!=</span>&nbsp;<span class="ident" id="2926667">Separator</span><span class="op" id="2926676">;</span>&nbsp;<span class="ident" id="2926678">i</span><span class="op" id="2926679">++</span>&nbsp;<span class="op" id="2926682">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2926688">t</span><span class="op" id="2926689">,</span>&nbsp;<span class="ident" id="2926691">ok</span><span class="op" id="2926693">,</span>&nbsp;<span class="ident" id="2926695">err</span>&nbsp;<span class="op" id="2926699">:=</span>&nbsp;<span class="ident" id="2926702">matchChunk</span><span class="op" id="2926712">(</span><span class="ident" id="2926713">chunk</span><span class="op" id="2926718">,</span>&nbsp;<span class="ident" id="2926720">name</span><span class="op" id="2926724">[</span><span class="ident" id="2926725">i</span><span class="op" id="2926726">+</span><span class="num" id="2926727">1</span><span class="op" id="2926728">:</span><span class="op" id="2926729">]</span><span class="op" id="2926730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926736">if</span>&nbsp;<span class="ident" id="2926739">ok</span>&nbsp;<span class="op" id="2926742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2926749">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926814">if</span>&nbsp;<span class="builtinfunc" id="2926817">len</span><span class="op" id="2926820">(</span><span class="ident" id="2926821">pattern</span><span class="op" id="2926828">)</span>&nbsp;<span class="op" id="2926830">==</span>&nbsp;<span class="num" id="2926833">0</span>&nbsp;<span class="op" id="2926835">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2926838">len</span><span class="op" id="2926841">(</span><span class="ident" id="2926842">t</span><span class="op" id="2926843">)</span>&nbsp;<span class="op" id="2926845">&gt;</span>&nbsp;<span class="num" id="2926847">0</span>&nbsp;<span class="op" id="2926849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926857">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2926878">name</span>&nbsp;<span class="op" id="2926883">=</span>&nbsp;<span class="ident" id="2926885">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926892">continue</span>&nbsp;<span class="ident" id="2926901">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926919">if</span>&nbsp;<span class="ident" id="2926922">err</span>&nbsp;<span class="op" id="2926926">!=</span>&nbsp;<span class="ident" id="2926929">nil</span>&nbsp;<span class="op" id="2926933">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926940">return</span>&nbsp;<span class="builtintype" id="2926947">false</span><span class="op" id="2926952">,</span>&nbsp;<span class="ident" id="2926954">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926975">return</span>&nbsp;<span class="builtintype" id="2926982">false</span><span class="op" id="2926987">,</span>&nbsp;<span class="ident" id="2926989">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2926994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2926997">return</span>&nbsp;<span class="builtinfunc" id="2927004">len</span><span class="op" id="2927007">(</span><span class="ident" id="2927008">name</span><span class="op" id="2927012">)</span>&nbsp;<span class="op" id="2927014">==</span>&nbsp;<span class="num" id="2927017">0</span><span class="op" id="2927018">,</span>&nbsp;<span class="ident" id="2927020">nil</span><br>
<span class="lineno"></span><span class="op" id="2927024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2927027">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="2927101">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="2927133">func</span>&nbsp;<span class="ident" id="2927138">scanChunk</span><span class="op" id="2927147">(</span><span class="ident" id="2927148">pattern</span>&nbsp;<span class="builtintype" id="2927156">string</span><span class="op" id="2927162">)</span>&nbsp;<span class="op" id="2927164">(</span><span class="ident" id="2927165">star</span>&nbsp;<span class="builtintype" id="2927170">bool</span><span class="op" id="2927174">,</span>&nbsp;<span class="ident" id="2927176">chunk</span><span class="op" id="2927181">,</span>&nbsp;<span class="ident" id="2927183">rest</span>&nbsp;<span class="builtintype" id="2927188">string</span><span class="op" id="2927194">)</span>&nbsp;<span class="op" id="2927196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927199">for</span>&nbsp;<span class="builtinfunc" id="2927203">len</span><span class="op" id="2927206">(</span><span class="ident" id="2927207">pattern</span><span class="op" id="2927214">)</span>&nbsp;<span class="op" id="2927216">&gt;</span>&nbsp;<span class="num" id="2927218">0</span>&nbsp;<span class="op" id="2927220">&amp;&amp;</span>&nbsp;<span class="ident" id="2927223">pattern</span><span class="op" id="2927230">[</span><span class="num" id="2927231">0</span><span class="op" id="2927232">]</span>&nbsp;<span class="op" id="2927234">==</span>&nbsp;<span class="string" id="2927237">&#39;*&#39;</span>&nbsp;<span class="op" id="2927241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2927245">pattern</span>&nbsp;<span class="op" id="2927253">=</span>&nbsp;<span class="ident" id="2927255">pattern</span><span class="op" id="2927262">[</span><span class="num" id="2927263">1</span><span class="op" id="2927264">:</span><span class="op" id="2927265">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2927269">star</span>&nbsp;<span class="op" id="2927274">=</span>&nbsp;<span class="builtintype" id="2927276">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2927285">inrange</span>&nbsp;<span class="op" id="2927293">:=</span>&nbsp;<span class="builtintype" id="2927296">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927303">var</span>&nbsp;<span class="ident" id="2927307">i</span>&nbsp;<span class="builtintype" id="2927309">int</span><br>
<span class="lineno"></span><span class="ident" id="2927313">Scan</span><span class="op" id="2927317">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927320">for</span>&nbsp;<span class="ident" id="2927324">i</span>&nbsp;<span class="op" id="2927326">=</span>&nbsp;<span class="num" id="2927328">0</span><span class="op" id="2927329">;</span>&nbsp;<span class="ident" id="2927331">i</span>&nbsp;<span class="op" id="2927333">&lt;</span>&nbsp;<span class="builtinfunc" id="2927335">len</span><span class="op" id="2927338">(</span><span class="ident" id="2927339">pattern</span><span class="op" id="2927346">)</span><span class="op" id="2927347">;</span>&nbsp;<span class="ident" id="2927349">i</span><span class="op" id="2927350">++</span>&nbsp;<span class="op" id="2927353">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927357">switch</span>&nbsp;<span class="ident" id="2927364">pattern</span><span class="op" id="2927371">[</span><span class="ident" id="2927372">i</span><span class="op" id="2927373">]</span>&nbsp;<span class="op" id="2927375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927379">case</span>&nbsp;<span class="string" id="2927384">&#39;\\&#39;</span><span class="op" id="2927388">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927393">if</span>&nbsp;<span class="ident" id="2927396">runtime</span><span class="op" id="2927403">.</span><span class="ident" id="2927404">GOOS</span>&nbsp;<span class="op" id="2927409">!=</span>&nbsp;<span class="string" id="2927412">&#34;windows&#34;</span>&nbsp;<span class="op" id="2927422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2927428">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927483">if</span>&nbsp;<span class="ident" id="2927486">i</span><span class="op" id="2927487">+</span><span class="num" id="2927488">1</span>&nbsp;<span class="op" id="2927490">&lt;</span>&nbsp;<span class="builtinfunc" id="2927492">len</span><span class="op" id="2927495">(</span><span class="ident" id="2927496">pattern</span><span class="op" id="2927503">)</span>&nbsp;<span class="op" id="2927505">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2927512">i</span><span class="op" id="2927513">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927529">case</span>&nbsp;<span class="string" id="2927534">&#39;[&#39;</span><span class="op" id="2927537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2927542">inrange</span>&nbsp;<span class="op" id="2927550">=</span>&nbsp;<span class="builtintype" id="2927552">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927559">case</span>&nbsp;<span class="string" id="2927564">&#39;]&#39;</span><span class="op" id="2927567">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2927572">inrange</span>&nbsp;<span class="op" id="2927580">=</span>&nbsp;<span class="builtintype" id="2927582">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927590">case</span>&nbsp;<span class="string" id="2927595">&#39;*&#39;</span><span class="op" id="2927598">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927603">if</span>&nbsp;<span class="op" id="2927606">!</span><span class="ident" id="2927607">inrange</span>&nbsp;<span class="op" id="2927615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927621">break</span>&nbsp;<span class="ident" id="2927627">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2927642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927645">return</span>&nbsp;<span class="ident" id="2927652">star</span><span class="op" id="2927656">,</span>&nbsp;<span class="ident" id="2927658">pattern</span><span class="op" id="2927665">[</span><span class="num" id="2927666">0</span><span class="op" id="2927667">:</span><span class="ident" id="2927668">i</span><span class="op" id="2927669">]</span><span class="op" id="2927670">,</span>&nbsp;<span class="ident" id="2927672">pattern</span><span class="op" id="2927679">[</span><span class="ident" id="2927680">i</span><span class="op" id="2927681">:</span><span class="op" id="2927682">]</span><br>
<span class="lineno"></span><span class="op" id="2927684">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="2927687">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="2927750">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="2927809">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="2927884">func</span>&nbsp;<span class="ident" id="2927889">matchChunk</span><span class="op" id="2927899">(</span><span class="ident" id="2927900">chunk</span><span class="op" id="2927905">,</span>&nbsp;<span class="ident" id="2927907">s</span>&nbsp;<span class="builtintype" id="2927909">string</span><span class="op" id="2927915">)</span>&nbsp;<span class="op" id="2927917">(</span><span class="ident" id="2927918">rest</span>&nbsp;<span class="builtintype" id="2927923">string</span><span class="op" id="2927929">,</span>&nbsp;<span class="ident" id="2927931">ok</span>&nbsp;<span class="builtintype" id="2927934">bool</span><span class="op" id="2927938">,</span>&nbsp;<span class="ident" id="2927940">err</span>&nbsp;<span class="builtintype" id="2927944">error</span><span class="op" id="2927949">)</span>&nbsp;<span class="op" id="2927951">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927954">for</span>&nbsp;<span class="builtinfunc" id="2927958">len</span><span class="op" id="2927961">(</span><span class="ident" id="2927962">chunk</span><span class="op" id="2927967">)</span>&nbsp;<span class="op" id="2927969">&gt;</span>&nbsp;<span class="num" id="2927971">0</span>&nbsp;<span class="op" id="2927973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927977">if</span>&nbsp;<span class="builtinfunc" id="2927980">len</span><span class="op" id="2927983">(</span><span class="ident" id="2927984">s</span><span class="op" id="2927985">)</span>&nbsp;<span class="op" id="2927987">==</span>&nbsp;<span class="num" id="2927990">0</span>&nbsp;<span class="op" id="2927992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2927997">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928010">switch</span>&nbsp;<span class="ident" id="2928017">chunk</span><span class="op" id="2928022">[</span><span class="num" id="2928023">0</span><span class="op" id="2928024">]</span>&nbsp;<span class="op" id="2928026">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928030">case</span>&nbsp;<span class="string" id="2928035">&#39;[&#39;</span><span class="op" id="2928038">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2928043">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928065">r</span><span class="op" id="2928066">,</span>&nbsp;<span class="ident" id="2928068">n</span>&nbsp;<span class="op" id="2928070">:=</span>&nbsp;<span class="ident" id="2928073">utf8</span><span class="op" id="2928077">.</span><span class="ident" id="2928078">DecodeRuneInString</span><span class="op" id="2928096">(</span><span class="ident" id="2928097">s</span><span class="op" id="2928098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928103">s</span>&nbsp;<span class="op" id="2928105">=</span>&nbsp;<span class="ident" id="2928107">s</span><span class="op" id="2928108">[</span><span class="ident" id="2928109">n</span><span class="op" id="2928110">:</span><span class="op" id="2928111">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928116">chunk</span>&nbsp;<span class="op" id="2928122">=</span>&nbsp;<span class="ident" id="2928124">chunk</span><span class="op" id="2928129">[</span><span class="num" id="2928130">1</span><span class="op" id="2928131">:</span><span class="op" id="2928132">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2928137">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2928198">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928244">if</span>&nbsp;<span class="builtinfunc" id="2928247">len</span><span class="op" id="2928250">(</span><span class="ident" id="2928251">chunk</span><span class="op" id="2928256">)</span>&nbsp;<span class="op" id="2928258">==</span>&nbsp;<span class="num" id="2928261">0</span>&nbsp;<span class="op" id="2928263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928269">err</span>&nbsp;<span class="op" id="2928273">=</span>&nbsp;<span class="ident" id="2928275">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928293">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2928308">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928331">negated</span>&nbsp;<span class="op" id="2928339">:=</span>&nbsp;<span class="ident" id="2928342">chunk</span><span class="op" id="2928347">[</span><span class="num" id="2928348">0</span><span class="op" id="2928349">]</span>&nbsp;<span class="op" id="2928351">==</span>&nbsp;<span class="string" id="2928354">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928361">if</span>&nbsp;<span class="ident" id="2928364">negated</span>&nbsp;<span class="op" id="2928372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928378">chunk</span>&nbsp;<span class="op" id="2928384">=</span>&nbsp;<span class="ident" id="2928386">chunk</span><span class="op" id="2928391">[</span><span class="num" id="2928392">1</span><span class="op" id="2928393">:</span><span class="op" id="2928394">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2928404">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928427">match</span>&nbsp;<span class="op" id="2928433">:=</span>&nbsp;<span class="builtintype" id="2928436">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928445">nrange</span>&nbsp;<span class="op" id="2928452">:=</span>&nbsp;<span class="num" id="2928455">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928460">for</span>&nbsp;<span class="op" id="2928464">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928470">if</span>&nbsp;<span class="builtinfunc" id="2928473">len</span><span class="op" id="2928476">(</span><span class="ident" id="2928477">chunk</span><span class="op" id="2928482">)</span>&nbsp;<span class="op" id="2928484">&gt;</span>&nbsp;<span class="num" id="2928486">0</span>&nbsp;<span class="op" id="2928488">&amp;&amp;</span>&nbsp;<span class="ident" id="2928491">chunk</span><span class="op" id="2928496">[</span><span class="num" id="2928497">0</span><span class="op" id="2928498">]</span>&nbsp;<span class="op" id="2928500">==</span>&nbsp;<span class="string" id="2928503">&#39;]&#39;</span>&nbsp;<span class="op" id="2928507">&amp;&amp;</span>&nbsp;<span class="ident" id="2928510">nrange</span>&nbsp;<span class="op" id="2928517">&gt;</span>&nbsp;<span class="num" id="2928519">0</span>&nbsp;<span class="op" id="2928521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928528">chunk</span>&nbsp;<span class="op" id="2928534">=</span>&nbsp;<span class="ident" id="2928536">chunk</span><span class="op" id="2928541">[</span><span class="num" id="2928542">1</span><span class="op" id="2928543">:</span><span class="op" id="2928544">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928551">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928567">var</span>&nbsp;<span class="ident" id="2928571">lo</span><span class="op" id="2928573">,</span>&nbsp;<span class="ident" id="2928575">hi</span>&nbsp;<span class="builtintype" id="2928578">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928587">if</span>&nbsp;<span class="ident" id="2928590">lo</span><span class="op" id="2928592">,</span>&nbsp;<span class="ident" id="2928594">chunk</span><span class="op" id="2928599">,</span>&nbsp;<span class="ident" id="2928601">err</span>&nbsp;<span class="op" id="2928605">=</span>&nbsp;<span class="ident" id="2928607">getEsc</span><span class="op" id="2928613">(</span><span class="ident" id="2928614">chunk</span><span class="op" id="2928619">)</span><span class="op" id="2928620">;</span>&nbsp;<span class="ident" id="2928622">err</span>&nbsp;<span class="op" id="2928626">!=</span>&nbsp;<span class="ident" id="2928629">nil</span>&nbsp;<span class="op" id="2928633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928640">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928657">hi</span>&nbsp;<span class="op" id="2928660">=</span>&nbsp;<span class="ident" id="2928662">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928669">if</span>&nbsp;<span class="ident" id="2928672">chunk</span><span class="op" id="2928677">[</span><span class="num" id="2928678">0</span><span class="op" id="2928679">]</span>&nbsp;<span class="op" id="2928681">==</span>&nbsp;<span class="string" id="2928684">&#39;-&#39;</span>&nbsp;<span class="op" id="2928688">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928695">if</span>&nbsp;<span class="ident" id="2928698">hi</span><span class="op" id="2928700">,</span>&nbsp;<span class="ident" id="2928702">chunk</span><span class="op" id="2928707">,</span>&nbsp;<span class="ident" id="2928709">err</span>&nbsp;<span class="op" id="2928713">=</span>&nbsp;<span class="ident" id="2928715">getEsc</span><span class="op" id="2928721">(</span><span class="ident" id="2928722">chunk</span><span class="op" id="2928727">[</span><span class="num" id="2928728">1</span><span class="op" id="2928729">:</span><span class="op" id="2928730">]</span><span class="op" id="2928731">)</span><span class="op" id="2928732">;</span>&nbsp;<span class="ident" id="2928734">err</span>&nbsp;<span class="op" id="2928738">!=</span>&nbsp;<span class="ident" id="2928741">nil</span>&nbsp;<span class="op" id="2928745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928753">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928777">if</span>&nbsp;<span class="ident" id="2928780">lo</span>&nbsp;<span class="op" id="2928783">&lt;=</span>&nbsp;<span class="ident" id="2928786">r</span>&nbsp;<span class="op" id="2928788">&amp;&amp;</span>&nbsp;<span class="ident" id="2928791">r</span>&nbsp;<span class="op" id="2928793">&lt;=</span>&nbsp;<span class="ident" id="2928796">hi</span>&nbsp;<span class="op" id="2928799">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928806">match</span>&nbsp;<span class="op" id="2928812">=</span>&nbsp;<span class="builtintype" id="2928814">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928829">nrange</span><span class="op" id="2928835">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928846">if</span>&nbsp;<span class="ident" id="2928849">match</span>&nbsp;<span class="op" id="2928855">==</span>&nbsp;<span class="ident" id="2928858">negated</span>&nbsp;<span class="op" id="2928866">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928872">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928887">case</span>&nbsp;<span class="string" id="2928892">&#39;?&#39;</span><span class="op" id="2928895">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928900">if</span>&nbsp;<span class="ident" id="2928903">s</span><span class="op" id="2928904">[</span><span class="num" id="2928905">0</span><span class="op" id="2928906">]</span>&nbsp;<span class="op" id="2928908">==</span>&nbsp;<span class="ident" id="2928911">Separator</span>&nbsp;<span class="op" id="2928921">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2928927">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2928937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928942">_</span><span class="op" id="2928943">,</span>&nbsp;<span class="ident" id="2928945">n</span>&nbsp;<span class="op" id="2928947">:=</span>&nbsp;<span class="ident" id="2928950">utf8</span><span class="op" id="2928954">.</span><span class="ident" id="2928955">DecodeRuneInString</span><span class="op" id="2928973">(</span><span class="ident" id="2928974">s</span><span class="op" id="2928975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928980">s</span>&nbsp;<span class="op" id="2928982">=</span>&nbsp;<span class="ident" id="2928984">s</span><span class="op" id="2928985">[</span><span class="ident" id="2928986">n</span><span class="op" id="2928987">:</span><span class="op" id="2928988">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2928993">chunk</span>&nbsp;<span class="op" id="2928999">=</span>&nbsp;<span class="ident" id="2929001">chunk</span><span class="op" id="2929006">[</span><span class="num" id="2929007">1</span><span class="op" id="2929008">:</span><span class="op" id="2929009">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929014">case</span>&nbsp;<span class="string" id="2929019">&#39;\\&#39;</span><span class="op" id="2929023">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929028">if</span>&nbsp;<span class="ident" id="2929031">runtime</span><span class="op" id="2929038">.</span><span class="ident" id="2929039">GOOS</span>&nbsp;<span class="op" id="2929044">!=</span>&nbsp;<span class="string" id="2929047">&#34;windows&#34;</span>&nbsp;<span class="op" id="2929057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929063">chunk</span>&nbsp;<span class="op" id="2929069">=</span>&nbsp;<span class="ident" id="2929071">chunk</span><span class="op" id="2929076">[</span><span class="num" id="2929077">1</span><span class="op" id="2929078">:</span><span class="op" id="2929079">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929085">if</span>&nbsp;<span class="builtinfunc" id="2929088">len</span><span class="op" id="2929091">(</span><span class="ident" id="2929092">chunk</span><span class="op" id="2929097">)</span>&nbsp;<span class="op" id="2929099">==</span>&nbsp;<span class="num" id="2929102">0</span>&nbsp;<span class="op" id="2929104">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929111">err</span>&nbsp;<span class="op" id="2929115">=</span>&nbsp;<span class="ident" id="2929117">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929136">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929157">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929172">default</span><span class="op" id="2929179">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929184">if</span>&nbsp;<span class="ident" id="2929187">chunk</span><span class="op" id="2929192">[</span><span class="num" id="2929193">0</span><span class="op" id="2929194">]</span>&nbsp;<span class="op" id="2929196">!=</span>&nbsp;<span class="ident" id="2929199">s</span><span class="op" id="2929200">[</span><span class="num" id="2929201">0</span><span class="op" id="2929202">]</span>&nbsp;<span class="op" id="2929204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929210">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929220">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929225">s</span>&nbsp;<span class="op" id="2929227">=</span>&nbsp;<span class="ident" id="2929229">s</span><span class="op" id="2929230">[</span><span class="num" id="2929231">1</span><span class="op" id="2929232">:</span><span class="op" id="2929233">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929238">chunk</span>&nbsp;<span class="op" id="2929244">=</span>&nbsp;<span class="ident" id="2929246">chunk</span><span class="op" id="2929251">[</span><span class="num" id="2929252">1</span><span class="op" id="2929253">:</span><span class="op" id="2929254">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929264">return</span>&nbsp;<span class="ident" id="2929271">s</span><span class="op" id="2929272">,</span>&nbsp;<span class="builtintype" id="2929274">true</span><span class="op" id="2929278">,</span>&nbsp;<span class="ident" id="2929280">nil</span><br>
<span class="lineno">200</span><span class="op" id="2929284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2929287">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="2929366">func</span>&nbsp;<span class="ident" id="2929371">getEsc</span><span class="op" id="2929377">(</span><span class="ident" id="2929378">chunk</span>&nbsp;<span class="builtintype" id="2929384">string</span><span class="op" id="2929390">)</span>&nbsp;<span class="op" id="2929392">(</span><span class="ident" id="2929393">r</span>&nbsp;<span class="builtintype" id="2929395">rune</span><span class="op" id="2929399">,</span>&nbsp;<span class="ident" id="2929401">nchunk</span>&nbsp;<span class="builtintype" id="2929408">string</span><span class="op" id="2929414">,</span>&nbsp;<span class="ident" id="2929416">err</span>&nbsp;<span class="builtintype" id="2929420">error</span><span class="op" id="2929425">)</span>&nbsp;<span class="op" id="2929427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929430">if</span>&nbsp;<span class="builtinfunc" id="2929433">len</span><span class="op" id="2929436">(</span><span class="ident" id="2929437">chunk</span><span class="op" id="2929442">)</span>&nbsp;<span class="op" id="2929444">==</span>&nbsp;<span class="num" id="2929447">0</span>&nbsp;<span class="op" id="2929449">||</span>&nbsp;<span class="ident" id="2929452">chunk</span><span class="op" id="2929457">[</span><span class="num" id="2929458">0</span><span class="op" id="2929459">]</span>&nbsp;<span class="op" id="2929461">==</span>&nbsp;<span class="string" id="2929464">&#39;-&#39;</span>&nbsp;<span class="op" id="2929468">||</span>&nbsp;<span class="ident" id="2929471">chunk</span><span class="op" id="2929476">[</span><span class="num" id="2929477">0</span><span class="op" id="2929478">]</span>&nbsp;<span class="op" id="2929480">==</span>&nbsp;<span class="string" id="2929483">&#39;]&#39;</span>&nbsp;<span class="op" id="2929487">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929491">err</span>&nbsp;<span class="op" id="2929495">=</span>&nbsp;<span class="ident" id="2929497">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929513">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929524">if</span>&nbsp;<span class="ident" id="2929527">chunk</span><span class="op" id="2929532">[</span><span class="num" id="2929533">0</span><span class="op" id="2929534">]</span>&nbsp;<span class="op" id="2929536">==</span>&nbsp;<span class="string" id="2929539">&#39;\\&#39;</span>&nbsp;<span class="op" id="2929544">&amp;&amp;</span>&nbsp;<span class="ident" id="2929547">runtime</span><span class="op" id="2929554">.</span><span class="ident" id="2929555">GOOS</span>&nbsp;<span class="op" id="2929560">!=</span>&nbsp;<span class="string" id="2929563">&#34;windows&#34;</span>&nbsp;<span class="op" id="2929573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929577">chunk</span>&nbsp;<span class="op" id="2929583">=</span>&nbsp;<span class="ident" id="2929585">chunk</span><span class="op" id="2929590">[</span><span class="num" id="2929591">1</span><span class="op" id="2929592">:</span><span class="op" id="2929593">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929597">if</span>&nbsp;<span class="builtinfunc" id="2929600">len</span><span class="op" id="2929603">(</span><span class="ident" id="2929604">chunk</span><span class="op" id="2929609">)</span>&nbsp;<span class="op" id="2929611">==</span>&nbsp;<span class="num" id="2929614">0</span>&nbsp;<span class="op" id="2929616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929621">err</span>&nbsp;<span class="op" id="2929625">=</span>&nbsp;<span class="ident" id="2929627">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929644">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929656">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929659">r</span><span class="op" id="2929660">,</span>&nbsp;<span class="ident" id="2929662">n</span>&nbsp;<span class="op" id="2929664">:=</span>&nbsp;<span class="ident" id="2929667">utf8</span><span class="op" id="2929671">.</span><span class="ident" id="2929672">DecodeRuneInString</span><span class="op" id="2929690">(</span><span class="ident" id="2929691">chunk</span><span class="op" id="2929696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929699">if</span>&nbsp;<span class="ident" id="2929702">r</span>&nbsp;<span class="op" id="2929704">==</span>&nbsp;<span class="ident" id="2929707">utf8</span><span class="op" id="2929711">.</span><span class="ident" id="2929712">RuneError</span>&nbsp;<span class="op" id="2929722">&amp;&amp;</span>&nbsp;<span class="ident" id="2929725">n</span>&nbsp;<span class="op" id="2929727">==</span>&nbsp;<span class="num" id="2929730">1</span>&nbsp;<span class="op" id="2929732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929736">err</span>&nbsp;<span class="op" id="2929740">=</span>&nbsp;<span class="ident" id="2929742">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929760">nchunk</span>&nbsp;<span class="op" id="2929767">=</span>&nbsp;<span class="ident" id="2929769">chunk</span><span class="op" id="2929774">[</span><span class="ident" id="2929775">n</span><span class="op" id="2929776">:</span><span class="op" id="2929777">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929780">if</span>&nbsp;<span class="builtinfunc" id="2929783">len</span><span class="op" id="2929786">(</span><span class="ident" id="2929787">nchunk</span><span class="op" id="2929793">)</span>&nbsp;<span class="op" id="2929795">==</span>&nbsp;<span class="num" id="2929798">0</span>&nbsp;<span class="op" id="2929800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2929804">err</span>&nbsp;<span class="op" id="2929808">=</span>&nbsp;<span class="ident" id="2929810">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2929825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2929828">return</span><br>
<span class="lineno"></span><span class="op" id="2929835">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2929838">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="2929901">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="2929969">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2930037">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="2930087">//</span><br>
<span class="lineno"></span><span class="comment" id="2930090">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="2930165">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="2930232">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="2930249">func</span>&nbsp;<span class="ident" id="2930254">Glob</span><span class="op" id="2930258">(</span><span class="ident" id="2930259">pattern</span>&nbsp;<span class="builtintype" id="2930267">string</span><span class="op" id="2930273">)</span>&nbsp;<span class="op" id="2930275">(</span><span class="ident" id="2930276">matches</span>&nbsp;<span class="op" id="2930284">[</span><span class="op" id="2930285">]</span><span class="builtintype" id="2930286">string</span><span class="op" id="2930292">,</span>&nbsp;<span class="ident" id="2930294">err</span>&nbsp;<span class="builtintype" id="2930298">error</span><span class="op" id="2930303">)</span>&nbsp;<span class="op" id="2930305">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930308">if</span>&nbsp;<span class="op" id="2930311">!</span><span class="ident" id="2930312">hasMeta</span><span class="op" id="2930319">(</span><span class="ident" id="2930320">pattern</span><span class="op" id="2930327">)</span>&nbsp;<span class="op" id="2930329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930333">if</span>&nbsp;<span class="ident" id="2930336">_</span><span class="op" id="2930337">,</span>&nbsp;<span class="ident" id="2930339">err</span>&nbsp;<span class="op" id="2930343">=</span>&nbsp;<span class="ident" id="2930345">os</span><span class="op" id="2930347">.</span><span class="ident" id="2930348">Lstat</span><span class="op" id="2930353">(</span><span class="ident" id="2930354">pattern</span><span class="op" id="2930361">)</span><span class="op" id="2930362">;</span>&nbsp;<span class="ident" id="2930364">err</span>&nbsp;<span class="op" id="2930368">!=</span>&nbsp;<span class="ident" id="2930371">nil</span>&nbsp;<span class="op" id="2930375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930380">return</span>&nbsp;<span class="ident" id="2930387">nil</span><span class="op" id="2930390">,</span>&nbsp;<span class="ident" id="2930392">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2930398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930402">return</span>&nbsp;<span class="op" id="2930409">[</span><span class="op" id="2930410">]</span><span class="builtintype" id="2930411">string</span><span class="op" id="2930417">{</span><span class="ident" id="2930418">pattern</span><span class="op" id="2930425">}</span><span class="op" id="2930426">,</span>&nbsp;<span class="ident" id="2930428">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2930433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930437">dir</span><span class="op" id="2930440">,</span>&nbsp;<span class="ident" id="2930442">file</span>&nbsp;<span class="op" id="2930447">:=</span>&nbsp;<span class="ident" id="2930450">Split</span><span class="op" id="2930455">(</span><span class="ident" id="2930456">pattern</span><span class="op" id="2930463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930466">switch</span>&nbsp;<span class="ident" id="2930473">dir</span>&nbsp;<span class="op" id="2930477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930480">case</span>&nbsp;<span class="string" id="2930485">&#34;&#34;</span><span class="op" id="2930487">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930491">dir</span>&nbsp;<span class="op" id="2930495">=</span>&nbsp;<span class="string" id="2930497">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930502">case</span>&nbsp;<span class="builtintype" id="2930507">string</span><span class="op" id="2930513">(</span><span class="ident" id="2930514">Separator</span><span class="op" id="2930523">)</span><span class="op" id="2930524">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2930528">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930540">default</span><span class="op" id="2930547">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930551">dir</span>&nbsp;<span class="op" id="2930555">=</span>&nbsp;<span class="ident" id="2930557">dir</span><span class="op" id="2930560">[</span><span class="num" id="2930561">0</span>&nbsp;<span class="op" id="2930563">:</span>&nbsp;<span class="builtinfunc" id="2930565">len</span><span class="op" id="2930568">(</span><span class="ident" id="2930569">dir</span><span class="op" id="2930572">)</span><span class="op" id="2930573">-</span><span class="num" id="2930574">1</span><span class="op" id="2930575">]</span>&nbsp;<span class="comment" id="2930577">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2930609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930613">if</span>&nbsp;<span class="op" id="2930616">!</span><span class="ident" id="2930617">hasMeta</span><span class="op" id="2930624">(</span><span class="ident" id="2930625">dir</span><span class="op" id="2930628">)</span>&nbsp;<span class="op" id="2930630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930634">return</span>&nbsp;<span class="ident" id="2930641">glob</span><span class="op" id="2930645">(</span><span class="ident" id="2930646">dir</span><span class="op" id="2930649">,</span>&nbsp;<span class="ident" id="2930651">file</span><span class="op" id="2930655">,</span>&nbsp;<span class="ident" id="2930657">nil</span><span class="op" id="2930660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2930663">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930667">var</span>&nbsp;<span class="ident" id="2930671">m</span>&nbsp;<span class="op" id="2930673">[</span><span class="op" id="2930674">]</span><span class="builtintype" id="2930675">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930683">m</span><span class="op" id="2930684">,</span>&nbsp;<span class="ident" id="2930686">err</span>&nbsp;<span class="op" id="2930690">=</span>&nbsp;<span class="ident" id="2930692">Glob</span><span class="op" id="2930696">(</span><span class="ident" id="2930697">dir</span><span class="op" id="2930700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930703">if</span>&nbsp;<span class="ident" id="2930706">err</span>&nbsp;<span class="op" id="2930710">!=</span>&nbsp;<span class="ident" id="2930713">nil</span>&nbsp;<span class="op" id="2930717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930721">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2930729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930732">for</span>&nbsp;<span class="ident" id="2930736">_</span><span class="op" id="2930737">,</span>&nbsp;<span class="ident" id="2930739">d</span>&nbsp;<span class="op" id="2930741">:=</span>&nbsp;<span class="keyword" id="2930744">range</span>&nbsp;<span class="ident" id="2930750">m</span>&nbsp;<span class="op" id="2930752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2930756">matches</span><span class="op" id="2930763">,</span>&nbsp;<span class="ident" id="2930765">err</span>&nbsp;<span class="op" id="2930769">=</span>&nbsp;<span class="ident" id="2930771">glob</span><span class="op" id="2930775">(</span><span class="ident" id="2930776">d</span><span class="op" id="2930777">,</span>&nbsp;<span class="ident" id="2930779">file</span><span class="op" id="2930783">,</span>&nbsp;<span class="ident" id="2930785">matches</span><span class="op" id="2930792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930796">if</span>&nbsp;<span class="ident" id="2930799">err</span>&nbsp;<span class="op" id="2930803">!=</span>&nbsp;<span class="ident" id="2930806">nil</span>&nbsp;<span class="op" id="2930810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930815">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2930824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2930827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2930830">return</span><br>
<span class="lineno"></span><span class="op" id="2930837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="2930840">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="2930905">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2930964">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="2931024">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2931059">func</span>&nbsp;<span class="ident" id="2931064">glob</span><span class="op" id="2931068">(</span><span class="ident" id="2931069">dir</span><span class="op" id="2931072">,</span>&nbsp;<span class="ident" id="2931074">pattern</span>&nbsp;<span class="builtintype" id="2931082">string</span><span class="op" id="2931088">,</span>&nbsp;<span class="ident" id="2931090">matches</span>&nbsp;<span class="op" id="2931098">[</span><span class="op" id="2931099">]</span><span class="builtintype" id="2931100">string</span><span class="op" id="2931106">)</span>&nbsp;<span class="op" id="2931108">(</span><span class="ident" id="2931109">m</span>&nbsp;<span class="op" id="2931111">[</span><span class="op" id="2931112">]</span><span class="builtintype" id="2931113">string</span><span class="op" id="2931119">,</span>&nbsp;<span class="ident" id="2931121">e</span>&nbsp;<span class="builtintype" id="2931123">error</span><span class="op" id="2931128">)</span>&nbsp;<span class="op" id="2931130">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2931133">m</span>&nbsp;<span class="op" id="2931135">=</span>&nbsp;<span class="ident" id="2931137">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2931146">fi</span><span class="op" id="2931148">,</span>&nbsp;<span class="ident" id="2931150">err</span>&nbsp;<span class="op" id="2931154">:=</span>&nbsp;<span class="ident" id="2931157">os</span><span class="op" id="2931159">.</span><span class="ident" id="2931160">Stat</span><span class="op" id="2931164">(</span><span class="ident" id="2931165">dir</span><span class="op" id="2931168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931171">if</span>&nbsp;<span class="ident" id="2931174">err</span>&nbsp;<span class="op" id="2931178">!=</span>&nbsp;<span class="ident" id="2931181">nil</span>&nbsp;<span class="op" id="2931185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931189">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2931197">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931200">if</span>&nbsp;<span class="op" id="2931203">!</span><span class="ident" id="2931204">fi</span><span class="op" id="2931206">.</span><span class="ident" id="2931207">IsDir</span><span class="op" id="2931212">(</span><span class="op" id="2931213">)</span>&nbsp;<span class="op" id="2931215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931219">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2931227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2931230">d</span><span class="op" id="2931231">,</span>&nbsp;<span class="ident" id="2931233">err</span>&nbsp;<span class="op" id="2931237">:=</span>&nbsp;<span class="ident" id="2931240">os</span><span class="op" id="2931242">.</span><span class="ident" id="2931243">Open</span><span class="op" id="2931247">(</span><span class="ident" id="2931248">dir</span><span class="op" id="2931251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931254">if</span>&nbsp;<span class="ident" id="2931257">err</span>&nbsp;<span class="op" id="2931261">!=</span>&nbsp;<span class="ident" id="2931264">nil</span>&nbsp;<span class="op" id="2931268">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931272">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2931280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931283">defer</span>&nbsp;<span class="ident" id="2931289">d</span><span class="op" id="2931290">.</span><span class="ident" id="2931291">Close</span><span class="op" id="2931296">(</span><span class="op" id="2931297">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2931301">names</span><span class="op" id="2931306">,</span>&nbsp;<span class="ident" id="2931308">_</span>&nbsp;<span class="op" id="2931310">:=</span>&nbsp;<span class="ident" id="2931313">d</span><span class="op" id="2931314">.</span><span class="ident" id="2931315">Readdirnames</span><span class="op" id="2931327">(</span><span class="op" id="2931328">-</span><span class="num" id="2931329">1</span><span class="op" id="2931330">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2931333">sort</span><span class="op" id="2931337">.</span><span class="ident" id="2931338">Strings</span><span class="op" id="2931345">(</span><span class="ident" id="2931346">names</span><span class="op" id="2931351">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931355">for</span>&nbsp;<span class="ident" id="2931359">_</span><span class="op" id="2931360">,</span>&nbsp;<span class="ident" id="2931362">n</span>&nbsp;<span class="op" id="2931364">:=</span>&nbsp;<span class="keyword" id="2931367">range</span>&nbsp;<span class="ident" id="2931373">names</span>&nbsp;<span class="op" id="2931379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2931383">matched</span><span class="op" id="2931390">,</span>&nbsp;<span class="ident" id="2931392">err</span>&nbsp;<span class="op" id="2931396">:=</span>&nbsp;<span class="ident" id="2931399">Match</span><span class="op" id="2931404">(</span><span class="ident" id="2931405">pattern</span><span class="op" id="2931412">,</span>&nbsp;<span class="ident" id="2931414">n</span><span class="op" id="2931415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931419">if</span>&nbsp;<span class="ident" id="2931422">err</span>&nbsp;<span class="op" id="2931426">!=</span>&nbsp;<span class="ident" id="2931429">nil</span>&nbsp;<span class="op" id="2931433">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931438">return</span>&nbsp;<span class="ident" id="2931445">m</span><span class="op" id="2931446">,</span>&nbsp;<span class="ident" id="2931448">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2931454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931458">if</span>&nbsp;<span class="ident" id="2931461">matched</span>&nbsp;<span class="op" id="2931469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2931474">m</span>&nbsp;<span class="op" id="2931476">=</span>&nbsp;<span class="builtinfunc" id="2931478">append</span><span class="op" id="2931484">(</span><span class="ident" id="2931485">m</span><span class="op" id="2931486">,</span>&nbsp;<span class="ident" id="2931488">Join</span><span class="op" id="2931492">(</span><span class="ident" id="2931493">dir</span><span class="op" id="2931496">,</span>&nbsp;<span class="ident" id="2931498">n</span><span class="op" id="2931499">)</span><span class="op" id="2931500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2931504">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2931507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931510">return</span><br>
<span class="lineno"></span><span class="op" id="2931517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2931520">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="2931589">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="2931613">func</span>&nbsp;<span class="ident" id="2931618">hasMeta</span><span class="op" id="2931625">(</span><span class="ident" id="2931626">path</span>&nbsp;<span class="builtintype" id="2931631">string</span><span class="op" id="2931637">)</span>&nbsp;<span class="builtintype" id="2931639">bool</span>&nbsp;<span class="op" id="2931644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2931647">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2931712">return</span>&nbsp;<span class="ident" id="2931719">strings</span><span class="op" id="2931726">.</span><span class="ident" id="2931727">IndexAny</span><span class="op" id="2931735">(</span><span class="ident" id="2931736">path</span><span class="op" id="2931740">,</span>&nbsp;<span class="string" id="2931742">&#34;*?[&#34;</span><span class="op" id="2931747">)</span>&nbsp;<span class="op" id="2931749">&gt;=</span>&nbsp;<span class="num" id="2931752">0</span><br>
<span class="lineno"></span><span class="op" id="2931754">}</span>
</div>
</body>
</html>
