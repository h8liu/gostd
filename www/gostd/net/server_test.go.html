<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6683291">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6683346">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6683400">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6683451">package</span>&nbsp;<span class="ident" id="6683459">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6683464">import</span>&nbsp;<span class="op" id="6683471">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683474">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683482">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683488">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683494">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683505">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683516">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6683523">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6683526">func</span>&nbsp;<span class="ident" id="6683531">skipServerTest</span><span class="op" id="6683545">(</span><span class="ident" id="6683546">net</span><span class="op" id="6683549">,</span>&nbsp;<span class="ident" id="6683551">unixsotype</span><span class="op" id="6683561">,</span>&nbsp;<span class="ident" id="6683563">addr</span>&nbsp;<span class="builtintype" id="6683568">string</span><span class="op" id="6683574">,</span>&nbsp;<span class="ident" id="6683576">ipv6</span><span class="op" id="6683580">,</span>&nbsp;<span class="ident" id="6683582">ipv4map</span><span class="op" id="6683589">,</span>&nbsp;<span class="ident" id="6683591">linuxOnly</span>&nbsp;<span class="builtintype" id="6683601">bool</span><span class="op" id="6683605">)</span>&nbsp;<span class="builtintype" id="6683607">bool</span>&nbsp;<span class="op" id="6683612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683615">switch</span>&nbsp;<span class="ident" id="6683622">runtime</span><span class="op" id="6683629">.</span><span class="ident" id="6683630">GOOS</span>&nbsp;<span class="op" id="6683635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683638">case</span>&nbsp;<span class="string" id="6683643">&#34;linux&#34;</span><span class="op" id="6683650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683653">case</span>&nbsp;<span class="string" id="6683658">&#34;nacl&#34;</span><span class="op" id="6683664">,</span>&nbsp;<span class="string" id="6683666">&#34;plan9&#34;</span><span class="op" id="6683673">,</span>&nbsp;<span class="string" id="6683675">&#34;windows&#34;</span><span class="op" id="6683684">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6683688">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683749">if</span>&nbsp;<span class="ident" id="6683752">net</span>&nbsp;<span class="op" id="6683756">==</span>&nbsp;<span class="ident" id="6683759">unixsotype</span>&nbsp;<span class="op" id="6683770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683775">return</span>&nbsp;<span class="builtintype" id="6683782">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6683789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683792">default</span><span class="op" id="6683799">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683803">if</span>&nbsp;<span class="ident" id="6683806">net</span>&nbsp;<span class="op" id="6683810">==</span>&nbsp;<span class="ident" id="6683813">unixsotype</span>&nbsp;<span class="op" id="6683824">&amp;&amp;</span>&nbsp;<span class="ident" id="6683827">linuxOnly</span>&nbsp;<span class="op" id="6683837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683842">return</span>&nbsp;<span class="builtintype" id="6683849">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6683856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6683859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683862">switch</span>&nbsp;<span class="ident" id="6683869">addr</span>&nbsp;<span class="op" id="6683874">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683877">case</span>&nbsp;<span class="string" id="6683882">&#34;&#34;</span><span class="op" id="6683884">,</span>&nbsp;<span class="string" id="6683886">&#34;0.0.0.0&#34;</span><span class="op" id="6683895">,</span>&nbsp;<span class="string" id="6683897">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6683915">,</span>&nbsp;<span class="string" id="6683917">&#34;[::]&#34;</span><span class="op" id="6683923">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683927">if</span>&nbsp;<span class="ident" id="6683930">testing</span><span class="op" id="6683937">.</span><span class="ident" id="6683938">Short</span><span class="op" id="6683943">(</span><span class="op" id="6683944">)</span>&nbsp;<span class="op" id="6683946">||</span>&nbsp;<span class="op" id="6683949">!</span><span class="op" id="6683950">*</span><span class="ident" id="6683951">testExternal</span>&nbsp;<span class="op" id="6683964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683969">return</span>&nbsp;<span class="builtintype" id="6683976">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6683983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6683986">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683989">if</span>&nbsp;<span class="ident" id="6683992">ipv6</span>&nbsp;<span class="op" id="6683997">&amp;&amp;</span>&nbsp;<span class="op" id="6684000">!</span><span class="ident" id="6684001">supportsIPv6</span>&nbsp;<span class="op" id="6684014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684018">return</span>&nbsp;<span class="builtintype" id="6684025">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684034">if</span>&nbsp;<span class="ident" id="6684037">ipv4map</span>&nbsp;<span class="op" id="6684045">&amp;&amp;</span>&nbsp;<span class="op" id="6684048">!</span><span class="ident" id="6684049">supportsIPv4map</span>&nbsp;<span class="op" id="6684065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684069">return</span>&nbsp;<span class="builtintype" id="6684076">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684085">return</span>&nbsp;<span class="builtintype" id="6684092">false</span><br>
<span class="lineno"></span><span class="op" id="6684098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6684101">var</span>&nbsp;<span class="ident" id="6684105">streamConnServerTests</span>&nbsp;<span class="op" id="6684127">=</span>&nbsp;<span class="op" id="6684129">[</span><span class="op" id="6684130">]</span><span class="keyword" id="6684131">struct</span>&nbsp;<span class="op" id="6684138">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684141">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6684151">string</span>&nbsp;<span class="comment" id="6684158">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684174">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6684184">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684192">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6684202">string</span>&nbsp;<span class="comment" id="6684209">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684225">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6684235">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684243">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6684253">bool</span>&nbsp;<span class="comment" id="6684258">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684299">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6684309">bool</span>&nbsp;<span class="comment" id="6684314">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684360">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6684370">bool</span>&nbsp;<span class="comment" id="6684375">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684400">linuxOnly</span>&nbsp;<span class="builtintype" id="6684410">bool</span>&nbsp;<span class="comment" id="6684415">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6684469">}</span><span class="op" id="6684470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684473">{</span><span class="ident" id="6684474">snet</span><span class="op" id="6684478">:</span>&nbsp;<span class="string" id="6684480">&#34;tcp&#34;</span><span class="op" id="6684485">,</span>&nbsp;<span class="ident" id="6684487">saddr</span><span class="op" id="6684492">:</span>&nbsp;<span class="string" id="6684494">&#34;&#34;</span><span class="op" id="6684496">,</span>&nbsp;<span class="ident" id="6684498">cnet</span><span class="op" id="6684502">:</span>&nbsp;<span class="string" id="6684504">&#34;tcp&#34;</span><span class="op" id="6684509">,</span>&nbsp;<span class="ident" id="6684511">caddr</span><span class="op" id="6684516">:</span>&nbsp;<span class="string" id="6684518">&#34;127.0.0.1&#34;</span><span class="op" id="6684529">}</span><span class="op" id="6684530">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684533">{</span><span class="ident" id="6684534">snet</span><span class="op" id="6684538">:</span>&nbsp;<span class="string" id="6684540">&#34;tcp&#34;</span><span class="op" id="6684545">,</span>&nbsp;<span class="ident" id="6684547">saddr</span><span class="op" id="6684552">:</span>&nbsp;<span class="string" id="6684554">&#34;0.0.0.0&#34;</span><span class="op" id="6684563">,</span>&nbsp;<span class="ident" id="6684565">cnet</span><span class="op" id="6684569">:</span>&nbsp;<span class="string" id="6684571">&#34;tcp&#34;</span><span class="op" id="6684576">,</span>&nbsp;<span class="ident" id="6684578">caddr</span><span class="op" id="6684583">:</span>&nbsp;<span class="string" id="6684585">&#34;127.0.0.1&#34;</span><span class="op" id="6684596">}</span><span class="op" id="6684597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684600">{</span><span class="ident" id="6684601">snet</span><span class="op" id="6684605">:</span>&nbsp;<span class="string" id="6684607">&#34;tcp&#34;</span><span class="op" id="6684612">,</span>&nbsp;<span class="ident" id="6684614">saddr</span><span class="op" id="6684619">:</span>&nbsp;<span class="string" id="6684621">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6684639">,</span>&nbsp;<span class="ident" id="6684641">cnet</span><span class="op" id="6684645">:</span>&nbsp;<span class="string" id="6684647">&#34;tcp&#34;</span><span class="op" id="6684652">,</span>&nbsp;<span class="ident" id="6684654">caddr</span><span class="op" id="6684659">:</span>&nbsp;<span class="string" id="6684661">&#34;127.0.0.1&#34;</span><span class="op" id="6684672">}</span><span class="op" id="6684673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684676">{</span><span class="ident" id="6684677">snet</span><span class="op" id="6684681">:</span>&nbsp;<span class="string" id="6684683">&#34;tcp&#34;</span><span class="op" id="6684688">,</span>&nbsp;<span class="ident" id="6684690">saddr</span><span class="op" id="6684695">:</span>&nbsp;<span class="string" id="6684697">&#34;[::]&#34;</span><span class="op" id="6684703">,</span>&nbsp;<span class="ident" id="6684705">cnet</span><span class="op" id="6684709">:</span>&nbsp;<span class="string" id="6684711">&#34;tcp&#34;</span><span class="op" id="6684716">,</span>&nbsp;<span class="ident" id="6684718">caddr</span><span class="op" id="6684723">:</span>&nbsp;<span class="string" id="6684725">&#34;[::1]&#34;</span><span class="op" id="6684732">,</span>&nbsp;<span class="ident" id="6684734">ipv6</span><span class="op" id="6684738">:</span>&nbsp;<span class="builtintype" id="6684740">true</span><span class="op" id="6684744">}</span><span class="op" id="6684745">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684749">{</span><span class="ident" id="6684750">snet</span><span class="op" id="6684754">:</span>&nbsp;<span class="string" id="6684756">&#34;tcp&#34;</span><span class="op" id="6684761">,</span>&nbsp;<span class="ident" id="6684763">saddr</span><span class="op" id="6684768">:</span>&nbsp;<span class="string" id="6684770">&#34;&#34;</span><span class="op" id="6684772">,</span>&nbsp;<span class="ident" id="6684774">cnet</span><span class="op" id="6684778">:</span>&nbsp;<span class="string" id="6684780">&#34;tcp&#34;</span><span class="op" id="6684785">,</span>&nbsp;<span class="ident" id="6684787">caddr</span><span class="op" id="6684792">:</span>&nbsp;<span class="string" id="6684794">&#34;[::1]&#34;</span><span class="op" id="6684801">,</span>&nbsp;<span class="ident" id="6684803">ipv4map</span><span class="op" id="6684810">:</span>&nbsp;<span class="builtintype" id="6684812">true</span><span class="op" id="6684816">}</span><span class="op" id="6684817">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684820">{</span><span class="ident" id="6684821">snet</span><span class="op" id="6684825">:</span>&nbsp;<span class="string" id="6684827">&#34;tcp&#34;</span><span class="op" id="6684832">,</span>&nbsp;<span class="ident" id="6684834">saddr</span><span class="op" id="6684839">:</span>&nbsp;<span class="string" id="6684841">&#34;0.0.0.0&#34;</span><span class="op" id="6684850">,</span>&nbsp;<span class="ident" id="6684852">cnet</span><span class="op" id="6684856">:</span>&nbsp;<span class="string" id="6684858">&#34;tcp&#34;</span><span class="op" id="6684863">,</span>&nbsp;<span class="ident" id="6684865">caddr</span><span class="op" id="6684870">:</span>&nbsp;<span class="string" id="6684872">&#34;[::1]&#34;</span><span class="op" id="6684879">,</span>&nbsp;<span class="ident" id="6684881">ipv4map</span><span class="op" id="6684888">:</span>&nbsp;<span class="builtintype" id="6684890">true</span><span class="op" id="6684894">}</span><span class="op" id="6684895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684898">{</span><span class="ident" id="6684899">snet</span><span class="op" id="6684903">:</span>&nbsp;<span class="string" id="6684905">&#34;tcp&#34;</span><span class="op" id="6684910">,</span>&nbsp;<span class="ident" id="6684912">saddr</span><span class="op" id="6684917">:</span>&nbsp;<span class="string" id="6684919">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6684937">,</span>&nbsp;<span class="ident" id="6684939">cnet</span><span class="op" id="6684943">:</span>&nbsp;<span class="string" id="6684945">&#34;tcp&#34;</span><span class="op" id="6684950">,</span>&nbsp;<span class="ident" id="6684952">caddr</span><span class="op" id="6684957">:</span>&nbsp;<span class="string" id="6684959">&#34;[::1]&#34;</span><span class="op" id="6684966">,</span>&nbsp;<span class="ident" id="6684968">ipv4map</span><span class="op" id="6684975">:</span>&nbsp;<span class="builtintype" id="6684977">true</span><span class="op" id="6684981">}</span><span class="op" id="6684982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684985">{</span><span class="ident" id="6684986">snet</span><span class="op" id="6684990">:</span>&nbsp;<span class="string" id="6684992">&#34;tcp&#34;</span><span class="op" id="6684997">,</span>&nbsp;<span class="ident" id="6684999">saddr</span><span class="op" id="6685004">:</span>&nbsp;<span class="string" id="6685006">&#34;[::]&#34;</span><span class="op" id="6685012">,</span>&nbsp;<span class="ident" id="6685014">cnet</span><span class="op" id="6685018">:</span>&nbsp;<span class="string" id="6685020">&#34;tcp&#34;</span><span class="op" id="6685025">,</span>&nbsp;<span class="ident" id="6685027">caddr</span><span class="op" id="6685032">:</span>&nbsp;<span class="string" id="6685034">&#34;127.0.0.1&#34;</span><span class="op" id="6685045">,</span>&nbsp;<span class="ident" id="6685047">ipv4map</span><span class="op" id="6685054">:</span>&nbsp;<span class="builtintype" id="6685056">true</span><span class="op" id="6685060">}</span><span class="op" id="6685061">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685065">{</span><span class="ident" id="6685066">snet</span><span class="op" id="6685070">:</span>&nbsp;<span class="string" id="6685072">&#34;tcp&#34;</span><span class="op" id="6685077">,</span>&nbsp;<span class="ident" id="6685079">saddr</span><span class="op" id="6685084">:</span>&nbsp;<span class="string" id="6685086">&#34;&#34;</span><span class="op" id="6685088">,</span>&nbsp;<span class="ident" id="6685090">cnet</span><span class="op" id="6685094">:</span>&nbsp;<span class="string" id="6685096">&#34;tcp4&#34;</span><span class="op" id="6685102">,</span>&nbsp;<span class="ident" id="6685104">caddr</span><span class="op" id="6685109">:</span>&nbsp;<span class="string" id="6685111">&#34;127.0.0.1&#34;</span><span class="op" id="6685122">}</span><span class="op" id="6685123">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685126">{</span><span class="ident" id="6685127">snet</span><span class="op" id="6685131">:</span>&nbsp;<span class="string" id="6685133">&#34;tcp&#34;</span><span class="op" id="6685138">,</span>&nbsp;<span class="ident" id="6685140">saddr</span><span class="op" id="6685145">:</span>&nbsp;<span class="string" id="6685147">&#34;0.0.0.0&#34;</span><span class="op" id="6685156">,</span>&nbsp;<span class="ident" id="6685158">cnet</span><span class="op" id="6685162">:</span>&nbsp;<span class="string" id="6685164">&#34;tcp4&#34;</span><span class="op" id="6685170">,</span>&nbsp;<span class="ident" id="6685172">caddr</span><span class="op" id="6685177">:</span>&nbsp;<span class="string" id="6685179">&#34;127.0.0.1&#34;</span><span class="op" id="6685190">}</span><span class="op" id="6685191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685194">{</span><span class="ident" id="6685195">snet</span><span class="op" id="6685199">:</span>&nbsp;<span class="string" id="6685201">&#34;tcp&#34;</span><span class="op" id="6685206">,</span>&nbsp;<span class="ident" id="6685208">saddr</span><span class="op" id="6685213">:</span>&nbsp;<span class="string" id="6685215">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6685233">,</span>&nbsp;<span class="ident" id="6685235">cnet</span><span class="op" id="6685239">:</span>&nbsp;<span class="string" id="6685241">&#34;tcp4&#34;</span><span class="op" id="6685247">,</span>&nbsp;<span class="ident" id="6685249">caddr</span><span class="op" id="6685254">:</span>&nbsp;<span class="string" id="6685256">&#34;127.0.0.1&#34;</span><span class="op" id="6685267">}</span><span class="op" id="6685268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685271">{</span><span class="ident" id="6685272">snet</span><span class="op" id="6685276">:</span>&nbsp;<span class="string" id="6685278">&#34;tcp&#34;</span><span class="op" id="6685283">,</span>&nbsp;<span class="ident" id="6685285">saddr</span><span class="op" id="6685290">:</span>&nbsp;<span class="string" id="6685292">&#34;[::]&#34;</span><span class="op" id="6685298">,</span>&nbsp;<span class="ident" id="6685300">cnet</span><span class="op" id="6685304">:</span>&nbsp;<span class="string" id="6685306">&#34;tcp6&#34;</span><span class="op" id="6685312">,</span>&nbsp;<span class="ident" id="6685314">caddr</span><span class="op" id="6685319">:</span>&nbsp;<span class="string" id="6685321">&#34;[::1]&#34;</span><span class="op" id="6685328">,</span>&nbsp;<span class="ident" id="6685330">ipv6</span><span class="op" id="6685334">:</span>&nbsp;<span class="builtintype" id="6685336">true</span><span class="op" id="6685340">}</span><span class="op" id="6685341">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685345">{</span><span class="ident" id="6685346">snet</span><span class="op" id="6685350">:</span>&nbsp;<span class="string" id="6685352">&#34;tcp&#34;</span><span class="op" id="6685357">,</span>&nbsp;<span class="ident" id="6685359">saddr</span><span class="op" id="6685364">:</span>&nbsp;<span class="string" id="6685366">&#34;&#34;</span><span class="op" id="6685368">,</span>&nbsp;<span class="ident" id="6685370">cnet</span><span class="op" id="6685374">:</span>&nbsp;<span class="string" id="6685376">&#34;tcp6&#34;</span><span class="op" id="6685382">,</span>&nbsp;<span class="ident" id="6685384">caddr</span><span class="op" id="6685389">:</span>&nbsp;<span class="string" id="6685391">&#34;[::1]&#34;</span><span class="op" id="6685398">,</span>&nbsp;<span class="ident" id="6685400">ipv4map</span><span class="op" id="6685407">:</span>&nbsp;<span class="builtintype" id="6685409">true</span><span class="op" id="6685413">}</span><span class="op" id="6685414">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685417">{</span><span class="ident" id="6685418">snet</span><span class="op" id="6685422">:</span>&nbsp;<span class="string" id="6685424">&#34;tcp&#34;</span><span class="op" id="6685429">,</span>&nbsp;<span class="ident" id="6685431">saddr</span><span class="op" id="6685436">:</span>&nbsp;<span class="string" id="6685438">&#34;0.0.0.0&#34;</span><span class="op" id="6685447">,</span>&nbsp;<span class="ident" id="6685449">cnet</span><span class="op" id="6685453">:</span>&nbsp;<span class="string" id="6685455">&#34;tcp6&#34;</span><span class="op" id="6685461">,</span>&nbsp;<span class="ident" id="6685463">caddr</span><span class="op" id="6685468">:</span>&nbsp;<span class="string" id="6685470">&#34;[::1]&#34;</span><span class="op" id="6685477">,</span>&nbsp;<span class="ident" id="6685479">ipv4map</span><span class="op" id="6685486">:</span>&nbsp;<span class="builtintype" id="6685488">true</span><span class="op" id="6685492">}</span><span class="op" id="6685493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685496">{</span><span class="ident" id="6685497">snet</span><span class="op" id="6685501">:</span>&nbsp;<span class="string" id="6685503">&#34;tcp&#34;</span><span class="op" id="6685508">,</span>&nbsp;<span class="ident" id="6685510">saddr</span><span class="op" id="6685515">:</span>&nbsp;<span class="string" id="6685517">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6685535">,</span>&nbsp;<span class="ident" id="6685537">cnet</span><span class="op" id="6685541">:</span>&nbsp;<span class="string" id="6685543">&#34;tcp6&#34;</span><span class="op" id="6685549">,</span>&nbsp;<span class="ident" id="6685551">caddr</span><span class="op" id="6685556">:</span>&nbsp;<span class="string" id="6685558">&#34;[::1]&#34;</span><span class="op" id="6685565">,</span>&nbsp;<span class="ident" id="6685567">ipv4map</span><span class="op" id="6685574">:</span>&nbsp;<span class="builtintype" id="6685576">true</span><span class="op" id="6685580">}</span><span class="op" id="6685581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685584">{</span><span class="ident" id="6685585">snet</span><span class="op" id="6685589">:</span>&nbsp;<span class="string" id="6685591">&#34;tcp&#34;</span><span class="op" id="6685596">,</span>&nbsp;<span class="ident" id="6685598">saddr</span><span class="op" id="6685603">:</span>&nbsp;<span class="string" id="6685605">&#34;[::]&#34;</span><span class="op" id="6685611">,</span>&nbsp;<span class="ident" id="6685613">cnet</span><span class="op" id="6685617">:</span>&nbsp;<span class="string" id="6685619">&#34;tcp4&#34;</span><span class="op" id="6685625">,</span>&nbsp;<span class="ident" id="6685627">caddr</span><span class="op" id="6685632">:</span>&nbsp;<span class="string" id="6685634">&#34;127.0.0.1&#34;</span><span class="op" id="6685645">,</span>&nbsp;<span class="ident" id="6685647">ipv4map</span><span class="op" id="6685654">:</span>&nbsp;<span class="builtintype" id="6685656">true</span><span class="op" id="6685660">}</span><span class="op" id="6685661">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685665">{</span><span class="ident" id="6685666">snet</span><span class="op" id="6685670">:</span>&nbsp;<span class="string" id="6685672">&#34;tcp&#34;</span><span class="op" id="6685677">,</span>&nbsp;<span class="ident" id="6685679">saddr</span><span class="op" id="6685684">:</span>&nbsp;<span class="string" id="6685686">&#34;127.0.0.1&#34;</span><span class="op" id="6685697">,</span>&nbsp;<span class="ident" id="6685699">cnet</span><span class="op" id="6685703">:</span>&nbsp;<span class="string" id="6685705">&#34;tcp&#34;</span><span class="op" id="6685710">,</span>&nbsp;<span class="ident" id="6685712">caddr</span><span class="op" id="6685717">:</span>&nbsp;<span class="string" id="6685719">&#34;127.0.0.1&#34;</span><span class="op" id="6685730">}</span><span class="op" id="6685731">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685734">{</span><span class="ident" id="6685735">snet</span><span class="op" id="6685739">:</span>&nbsp;<span class="string" id="6685741">&#34;tcp&#34;</span><span class="op" id="6685746">,</span>&nbsp;<span class="ident" id="6685748">saddr</span><span class="op" id="6685753">:</span>&nbsp;<span class="string" id="6685755">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6685775">,</span>&nbsp;<span class="ident" id="6685777">cnet</span><span class="op" id="6685781">:</span>&nbsp;<span class="string" id="6685783">&#34;tcp&#34;</span><span class="op" id="6685788">,</span>&nbsp;<span class="ident" id="6685790">caddr</span><span class="op" id="6685795">:</span>&nbsp;<span class="string" id="6685797">&#34;127.0.0.1&#34;</span><span class="op" id="6685808">}</span><span class="op" id="6685809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685812">{</span><span class="ident" id="6685813">snet</span><span class="op" id="6685817">:</span>&nbsp;<span class="string" id="6685819">&#34;tcp&#34;</span><span class="op" id="6685824">,</span>&nbsp;<span class="ident" id="6685826">saddr</span><span class="op" id="6685831">:</span>&nbsp;<span class="string" id="6685833">&#34;[::1]&#34;</span><span class="op" id="6685840">,</span>&nbsp;<span class="ident" id="6685842">cnet</span><span class="op" id="6685846">:</span>&nbsp;<span class="string" id="6685848">&#34;tcp&#34;</span><span class="op" id="6685853">,</span>&nbsp;<span class="ident" id="6685855">caddr</span><span class="op" id="6685860">:</span>&nbsp;<span class="string" id="6685862">&#34;[::1]&#34;</span><span class="op" id="6685869">,</span>&nbsp;<span class="ident" id="6685871">ipv6</span><span class="op" id="6685875">:</span>&nbsp;<span class="builtintype" id="6685877">true</span><span class="op" id="6685881">}</span><span class="op" id="6685882">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685886">{</span><span class="ident" id="6685887">snet</span><span class="op" id="6685891">:</span>&nbsp;<span class="string" id="6685893">&#34;tcp4&#34;</span><span class="op" id="6685899">,</span>&nbsp;<span class="ident" id="6685901">saddr</span><span class="op" id="6685906">:</span>&nbsp;<span class="string" id="6685908">&#34;&#34;</span><span class="op" id="6685910">,</span>&nbsp;<span class="ident" id="6685912">cnet</span><span class="op" id="6685916">:</span>&nbsp;<span class="string" id="6685918">&#34;tcp4&#34;</span><span class="op" id="6685924">,</span>&nbsp;<span class="ident" id="6685926">caddr</span><span class="op" id="6685931">:</span>&nbsp;<span class="string" id="6685933">&#34;127.0.0.1&#34;</span><span class="op" id="6685944">}</span><span class="op" id="6685945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685948">{</span><span class="ident" id="6685949">snet</span><span class="op" id="6685953">:</span>&nbsp;<span class="string" id="6685955">&#34;tcp4&#34;</span><span class="op" id="6685961">,</span>&nbsp;<span class="ident" id="6685963">saddr</span><span class="op" id="6685968">:</span>&nbsp;<span class="string" id="6685970">&#34;0.0.0.0&#34;</span><span class="op" id="6685979">,</span>&nbsp;<span class="ident" id="6685981">cnet</span><span class="op" id="6685985">:</span>&nbsp;<span class="string" id="6685987">&#34;tcp4&#34;</span><span class="op" id="6685993">,</span>&nbsp;<span class="ident" id="6685995">caddr</span><span class="op" id="6686000">:</span>&nbsp;<span class="string" id="6686002">&#34;127.0.0.1&#34;</span><span class="op" id="6686013">}</span><span class="op" id="6686014">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686017">{</span><span class="ident" id="6686018">snet</span><span class="op" id="6686022">:</span>&nbsp;<span class="string" id="6686024">&#34;tcp4&#34;</span><span class="op" id="6686030">,</span>&nbsp;<span class="ident" id="6686032">saddr</span><span class="op" id="6686037">:</span>&nbsp;<span class="string" id="6686039">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6686057">,</span>&nbsp;<span class="ident" id="6686059">cnet</span><span class="op" id="6686063">:</span>&nbsp;<span class="string" id="6686065">&#34;tcp4&#34;</span><span class="op" id="6686071">,</span>&nbsp;<span class="ident" id="6686073">caddr</span><span class="op" id="6686078">:</span>&nbsp;<span class="string" id="6686080">&#34;127.0.0.1&#34;</span><span class="op" id="6686091">}</span><span class="op" id="6686092">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686096">{</span><span class="ident" id="6686097">snet</span><span class="op" id="6686101">:</span>&nbsp;<span class="string" id="6686103">&#34;tcp4&#34;</span><span class="op" id="6686109">,</span>&nbsp;<span class="ident" id="6686111">saddr</span><span class="op" id="6686116">:</span>&nbsp;<span class="string" id="6686118">&#34;127.0.0.1&#34;</span><span class="op" id="6686129">,</span>&nbsp;<span class="ident" id="6686131">cnet</span><span class="op" id="6686135">:</span>&nbsp;<span class="string" id="6686137">&#34;tcp4&#34;</span><span class="op" id="6686143">,</span>&nbsp;<span class="ident" id="6686145">caddr</span><span class="op" id="6686150">:</span>&nbsp;<span class="string" id="6686152">&#34;127.0.0.1&#34;</span><span class="op" id="6686163">}</span><span class="op" id="6686164">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686168">{</span><span class="ident" id="6686169">snet</span><span class="op" id="6686173">:</span>&nbsp;<span class="string" id="6686175">&#34;tcp6&#34;</span><span class="op" id="6686181">,</span>&nbsp;<span class="ident" id="6686183">saddr</span><span class="op" id="6686188">:</span>&nbsp;<span class="string" id="6686190">&#34;&#34;</span><span class="op" id="6686192">,</span>&nbsp;<span class="ident" id="6686194">cnet</span><span class="op" id="6686198">:</span>&nbsp;<span class="string" id="6686200">&#34;tcp6&#34;</span><span class="op" id="6686206">,</span>&nbsp;<span class="ident" id="6686208">caddr</span><span class="op" id="6686213">:</span>&nbsp;<span class="string" id="6686215">&#34;[::1]&#34;</span><span class="op" id="6686222">,</span>&nbsp;<span class="ident" id="6686224">ipv6</span><span class="op" id="6686228">:</span>&nbsp;<span class="builtintype" id="6686230">true</span><span class="op" id="6686234">}</span><span class="op" id="6686235">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686238">{</span><span class="ident" id="6686239">snet</span><span class="op" id="6686243">:</span>&nbsp;<span class="string" id="6686245">&#34;tcp6&#34;</span><span class="op" id="6686251">,</span>&nbsp;<span class="ident" id="6686253">saddr</span><span class="op" id="6686258">:</span>&nbsp;<span class="string" id="6686260">&#34;[::]&#34;</span><span class="op" id="6686266">,</span>&nbsp;<span class="ident" id="6686268">cnet</span><span class="op" id="6686272">:</span>&nbsp;<span class="string" id="6686274">&#34;tcp6&#34;</span><span class="op" id="6686280">,</span>&nbsp;<span class="ident" id="6686282">caddr</span><span class="op" id="6686287">:</span>&nbsp;<span class="string" id="6686289">&#34;[::1]&#34;</span><span class="op" id="6686296">,</span>&nbsp;<span class="ident" id="6686298">ipv6</span><span class="op" id="6686302">:</span>&nbsp;<span class="builtintype" id="6686304">true</span><span class="op" id="6686308">}</span><span class="op" id="6686309">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686313">{</span><span class="ident" id="6686314">snet</span><span class="op" id="6686318">:</span>&nbsp;<span class="string" id="6686320">&#34;tcp6&#34;</span><span class="op" id="6686326">,</span>&nbsp;<span class="ident" id="6686328">saddr</span><span class="op" id="6686333">:</span>&nbsp;<span class="string" id="6686335">&#34;[::1]&#34;</span><span class="op" id="6686342">,</span>&nbsp;<span class="ident" id="6686344">cnet</span><span class="op" id="6686348">:</span>&nbsp;<span class="string" id="6686350">&#34;tcp6&#34;</span><span class="op" id="6686356">,</span>&nbsp;<span class="ident" id="6686358">caddr</span><span class="op" id="6686363">:</span>&nbsp;<span class="string" id="6686365">&#34;[::1]&#34;</span><span class="op" id="6686372">,</span>&nbsp;<span class="ident" id="6686374">ipv6</span><span class="op" id="6686378">:</span>&nbsp;<span class="builtintype" id="6686380">true</span><span class="op" id="6686384">}</span><span class="op" id="6686385">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686389">{</span><span class="ident" id="6686390">snet</span><span class="op" id="6686394">:</span>&nbsp;<span class="string" id="6686396">&#34;unix&#34;</span><span class="op" id="6686402">,</span>&nbsp;<span class="ident" id="6686404">saddr</span><span class="op" id="6686409">:</span>&nbsp;<span class="ident" id="6686411">testUnixAddr</span><span class="op" id="6686423">(</span><span class="op" id="6686424">)</span><span class="op" id="6686425">,</span>&nbsp;<span class="ident" id="6686427">cnet</span><span class="op" id="6686431">:</span>&nbsp;<span class="string" id="6686433">&#34;unix&#34;</span><span class="op" id="6686439">,</span>&nbsp;<span class="ident" id="6686441">caddr</span><span class="op" id="6686446">:</span>&nbsp;<span class="ident" id="6686448">testUnixAddr</span><span class="op" id="6686460">(</span><span class="op" id="6686461">)</span><span class="op" id="6686462">}</span><span class="op" id="6686463">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686466">{</span><span class="ident" id="6686467">snet</span><span class="op" id="6686471">:</span>&nbsp;<span class="string" id="6686473">&#34;unix&#34;</span><span class="op" id="6686479">,</span>&nbsp;<span class="ident" id="6686481">saddr</span><span class="op" id="6686486">:</span>&nbsp;<span class="string" id="6686488">&#34;@gotest2/net&#34;</span><span class="op" id="6686502">,</span>&nbsp;<span class="ident" id="6686504">cnet</span><span class="op" id="6686508">:</span>&nbsp;<span class="string" id="6686510">&#34;unix&#34;</span><span class="op" id="6686516">,</span>&nbsp;<span class="ident" id="6686518">caddr</span><span class="op" id="6686523">:</span>&nbsp;<span class="string" id="6686525">&#34;@gotest2/net.local&#34;</span><span class="op" id="6686545">,</span>&nbsp;<span class="ident" id="6686547">linuxOnly</span><span class="op" id="6686556">:</span>&nbsp;<span class="builtintype" id="6686558">true</span><span class="op" id="6686562">}</span><span class="op" id="6686563">,</span><br>
<span class="lineno"></span><span class="op" id="6686565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6686568">func</span>&nbsp;<span class="ident" id="6686573">TestStreamConnServer</span><span class="op" id="6686593">(</span><span class="ident" id="6686594">t</span>&nbsp;<span class="op" id="6686596">*</span><span class="ident" id="6686597">testing</span><span class="op" id="6686604">.</span><span class="ident" id="6686605">T</span><span class="op" id="6686606">)</span>&nbsp;<span class="op" id="6686608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686611">for</span>&nbsp;<span class="ident" id="6686615">_</span><span class="op" id="6686616">,</span>&nbsp;<span class="ident" id="6686618">tt</span>&nbsp;<span class="op" id="6686621">:=</span>&nbsp;<span class="keyword" id="6686624">range</span>&nbsp;<span class="ident" id="6686630">streamConnServerTests</span>&nbsp;<span class="op" id="6686652">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686656">if</span>&nbsp;<span class="ident" id="6686659">skipServerTest</span><span class="op" id="6686673">(</span><span class="ident" id="6686674">tt</span><span class="op" id="6686676">.</span><span class="ident" id="6686677">snet</span><span class="op" id="6686681">,</span>&nbsp;<span class="string" id="6686683">&#34;unix&#34;</span><span class="op" id="6686689">,</span>&nbsp;<span class="ident" id="6686691">tt</span><span class="op" id="6686693">.</span><span class="ident" id="6686694">saddr</span><span class="op" id="6686699">,</span>&nbsp;<span class="ident" id="6686701">tt</span><span class="op" id="6686703">.</span><span class="ident" id="6686704">ipv6</span><span class="op" id="6686708">,</span>&nbsp;<span class="ident" id="6686710">tt</span><span class="op" id="6686712">.</span><span class="ident" id="6686713">ipv4map</span><span class="op" id="6686720">,</span>&nbsp;<span class="ident" id="6686722">tt</span><span class="op" id="6686724">.</span><span class="ident" id="6686725">linuxOnly</span><span class="op" id="6686734">)</span>&nbsp;<span class="op" id="6686736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686741">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686757">listening</span>&nbsp;<span class="op" id="6686767">:=</span>&nbsp;<span class="builtinfunc" id="6686770">make</span><span class="op" id="6686774">(</span><span class="keyword" id="6686775">chan</span>&nbsp;<span class="builtintype" id="6686780">string</span><span class="op" id="6686786">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686790">done</span>&nbsp;<span class="op" id="6686795">:=</span>&nbsp;<span class="builtinfunc" id="6686798">make</span><span class="op" id="6686802">(</span><span class="keyword" id="6686803">chan</span>&nbsp;<span class="builtintype" id="6686808">int</span><span class="op" id="6686811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686815">switch</span>&nbsp;<span class="ident" id="6686822">tt</span><span class="op" id="6686824">.</span><span class="ident" id="6686825">snet</span>&nbsp;<span class="op" id="6686830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686834">case</span>&nbsp;<span class="string" id="6686839">&#34;tcp&#34;</span><span class="op" id="6686844">,</span>&nbsp;<span class="string" id="6686846">&#34;tcp4&#34;</span><span class="op" id="6686852">,</span>&nbsp;<span class="string" id="6686854">&#34;tcp6&#34;</span><span class="op" id="6686860">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686865">tt</span><span class="op" id="6686867">.</span><span class="ident" id="6686868">saddr</span>&nbsp;<span class="op" id="6686874">+=</span>&nbsp;<span class="string" id="6686877">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686884">case</span>&nbsp;<span class="string" id="6686889">&#34;unix&#34;</span><span class="op" id="6686895">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686900">os</span><span class="op" id="6686902">.</span><span class="ident" id="6686903">Remove</span><span class="op" id="6686909">(</span><span class="ident" id="6686910">tt</span><span class="op" id="6686912">.</span><span class="ident" id="6686913">saddr</span><span class="op" id="6686918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686923">os</span><span class="op" id="6686925">.</span><span class="ident" id="6686926">Remove</span><span class="op" id="6686932">(</span><span class="ident" id="6686933">tt</span><span class="op" id="6686935">.</span><span class="ident" id="6686936">caddr</span><span class="op" id="6686941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686950">go</span>&nbsp;<span class="ident" id="6686953">runStreamConnServer</span><span class="op" id="6686972">(</span><span class="ident" id="6686973">t</span><span class="op" id="6686974">,</span>&nbsp;<span class="ident" id="6686976">tt</span><span class="op" id="6686978">.</span><span class="ident" id="6686979">snet</span><span class="op" id="6686983">,</span>&nbsp;<span class="ident" id="6686985">tt</span><span class="op" id="6686987">.</span><span class="ident" id="6686988">saddr</span><span class="op" id="6686993">,</span>&nbsp;<span class="ident" id="6686995">listening</span><span class="op" id="6687004">,</span>&nbsp;<span class="ident" id="6687006">done</span><span class="op" id="6687010">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687014">taddr</span>&nbsp;<span class="op" id="6687020">:=</span>&nbsp;<span class="op" id="6687023">&lt;-</span><span class="ident" id="6687025">listening</span>&nbsp;<span class="comment" id="6687035">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687066">switch</span>&nbsp;<span class="ident" id="6687073">tt</span><span class="op" id="6687075">.</span><span class="ident" id="6687076">cnet</span>&nbsp;<span class="op" id="6687081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687085">case</span>&nbsp;<span class="string" id="6687090">&#34;tcp&#34;</span><span class="op" id="6687095">,</span>&nbsp;<span class="string" id="6687097">&#34;tcp4&#34;</span><span class="op" id="6687103">,</span>&nbsp;<span class="string" id="6687105">&#34;tcp6&#34;</span><span class="op" id="6687111">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687116">_</span><span class="op" id="6687117">,</span>&nbsp;<span class="ident" id="6687119">port</span><span class="op" id="6687123">,</span>&nbsp;<span class="ident" id="6687125">err</span>&nbsp;<span class="op" id="6687129">:=</span>&nbsp;<span class="ident" id="6687132">SplitHostPort</span><span class="op" id="6687145">(</span><span class="ident" id="6687146">taddr</span><span class="op" id="6687151">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687156">if</span>&nbsp;<span class="ident" id="6687159">err</span>&nbsp;<span class="op" id="6687163">!=</span>&nbsp;<span class="ident" id="6687166">nil</span>&nbsp;<span class="op" id="6687170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687176">t</span><span class="op" id="6687177">.</span><span class="ident" id="6687178">Fatalf</span><span class="op" id="6687184">(</span><span class="string" id="6687185">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6687215">,</span>&nbsp;<span class="ident" id="6687217">taddr</span><span class="op" id="6687222">,</span>&nbsp;<span class="ident" id="6687224">err</span><span class="op" id="6687227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687237">taddr</span>&nbsp;<span class="op" id="6687243">=</span>&nbsp;<span class="ident" id="6687245">tt</span><span class="op" id="6687247">.</span><span class="ident" id="6687248">caddr</span>&nbsp;<span class="op" id="6687254">+</span>&nbsp;<span class="string" id="6687256">&#34;:&#34;</span>&nbsp;<span class="op" id="6687260">+</span>&nbsp;<span class="ident" id="6687262">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687269">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687274">runStreamConnClient</span><span class="op" id="6687293">(</span><span class="ident" id="6687294">t</span><span class="op" id="6687295">,</span>&nbsp;<span class="ident" id="6687297">tt</span><span class="op" id="6687299">.</span><span class="ident" id="6687300">cnet</span><span class="op" id="6687304">,</span>&nbsp;<span class="ident" id="6687306">taddr</span><span class="op" id="6687311">,</span>&nbsp;<span class="ident" id="6687313">tt</span><span class="op" id="6687315">.</span><span class="ident" id="6687316">empty</span><span class="op" id="6687321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687325">&lt;-</span><span class="ident" id="6687327">done</span>&nbsp;<span class="comment" id="6687332">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687363">switch</span>&nbsp;<span class="ident" id="6687370">tt</span><span class="op" id="6687372">.</span><span class="ident" id="6687373">snet</span>&nbsp;<span class="op" id="6687378">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687382">case</span>&nbsp;<span class="string" id="6687387">&#34;unix&#34;</span><span class="op" id="6687393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687398">os</span><span class="op" id="6687400">.</span><span class="ident" id="6687401">Remove</span><span class="op" id="6687407">(</span><span class="ident" id="6687408">tt</span><span class="op" id="6687410">.</span><span class="ident" id="6687411">saddr</span><span class="op" id="6687416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687421">os</span><span class="op" id="6687423">.</span><span class="ident" id="6687424">Remove</span><span class="op" id="6687430">(</span><span class="ident" id="6687431">tt</span><span class="op" id="6687433">.</span><span class="ident" id="6687434">caddr</span><span class="op" id="6687439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687446">}</span><br>
<span class="lineno">130</span><span class="op" id="6687448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6687451">var</span>&nbsp;<span class="ident" id="6687455">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6687480">=</span>&nbsp;<span class="op" id="6687482">[</span><span class="op" id="6687483">]</span><span class="keyword" id="6687484">struct</span>&nbsp;<span class="op" id="6687491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687494">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6687504">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687512">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6687522">string</span>&nbsp;<span class="comment" id="6687529">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687548">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6687558">string</span>&nbsp;<span class="comment" id="6687565">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687584">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6687594">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6687601">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687626">linuxOnly</span>&nbsp;<span class="builtintype" id="6687636">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6687643">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6687697">}</span><span class="op" id="6687698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687701">{</span><span class="ident" id="6687702">net</span><span class="op" id="6687705">:</span>&nbsp;<span class="string" id="6687707">&#34;unixpacket&#34;</span><span class="op" id="6687719">,</span>&nbsp;<span class="ident" id="6687721">saddr</span><span class="op" id="6687726">:</span>&nbsp;<span class="ident" id="6687728">testUnixAddr</span><span class="op" id="6687740">(</span><span class="op" id="6687741">)</span><span class="op" id="6687742">,</span>&nbsp;<span class="ident" id="6687744">caddr</span><span class="op" id="6687749">:</span>&nbsp;<span class="ident" id="6687751">testUnixAddr</span><span class="op" id="6687763">(</span><span class="op" id="6687764">)</span><span class="op" id="6687765">}</span><span class="op" id="6687766">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687769">{</span><span class="ident" id="6687770">net</span><span class="op" id="6687773">:</span>&nbsp;<span class="string" id="6687775">&#34;unixpacket&#34;</span><span class="op" id="6687787">,</span>&nbsp;<span class="ident" id="6687789">saddr</span><span class="op" id="6687794">:</span>&nbsp;<span class="string" id="6687796">&#34;@gotest4/net&#34;</span><span class="op" id="6687810">,</span>&nbsp;<span class="ident" id="6687812">caddr</span><span class="op" id="6687817">:</span>&nbsp;<span class="string" id="6687819">&#34;@gotest4/net.local&#34;</span><span class="op" id="6687839">,</span>&nbsp;<span class="ident" id="6687841">linuxOnly</span><span class="op" id="6687850">:</span>&nbsp;<span class="builtintype" id="6687852">true</span><span class="op" id="6687856">}</span><span class="op" id="6687857">,</span><br>
<span class="lineno"></span><span class="op" id="6687859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6687862">func</span>&nbsp;<span class="ident" id="6687867">TestSeqpacketConnServer</span><span class="op" id="6687890">(</span><span class="ident" id="6687891">t</span>&nbsp;<span class="op" id="6687893">*</span><span class="ident" id="6687894">testing</span><span class="op" id="6687901">.</span><span class="ident" id="6687902">T</span><span class="op" id="6687903">)</span>&nbsp;<span class="op" id="6687905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687908">switch</span>&nbsp;<span class="ident" id="6687915">runtime</span><span class="op" id="6687922">.</span><span class="ident" id="6687923">GOOS</span>&nbsp;<span class="op" id="6687928">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687931">case</span>&nbsp;<span class="string" id="6687936">&#34;darwin&#34;</span><span class="op" id="6687944">,</span>&nbsp;<span class="string" id="6687946">&#34;nacl&#34;</span><span class="op" id="6687952">,</span>&nbsp;<span class="string" id="6687954">&#34;openbsd&#34;</span><span class="op" id="6687963">,</span>&nbsp;<span class="string" id="6687965">&#34;plan9&#34;</span><span class="op" id="6687972">,</span>&nbsp;<span class="string" id="6687974">&#34;windows&#34;</span><span class="op" id="6687983">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687987">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688000">case</span>&nbsp;<span class="string" id="6688005">&#34;freebsd&#34;</span><span class="op" id="6688014">:</span>&nbsp;<span class="comment" id="6688016">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688058">t</span><span class="op" id="6688059">.</span><span class="ident" id="6688060">Skipf</span><span class="op" id="6688065">(</span><span class="string" id="6688066">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6688087">,</span>&nbsp;<span class="ident" id="6688089">runtime</span><span class="op" id="6688096">.</span><span class="ident" id="6688097">GOOS</span><span class="op" id="6688101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688104">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688108">for</span>&nbsp;<span class="ident" id="6688112">_</span><span class="op" id="6688113">,</span>&nbsp;<span class="ident" id="6688115">tt</span>&nbsp;<span class="op" id="6688118">:=</span>&nbsp;<span class="keyword" id="6688121">range</span>&nbsp;<span class="ident" id="6688127">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6688152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688156">if</span>&nbsp;<span class="ident" id="6688159">runtime</span><span class="op" id="6688166">.</span><span class="ident" id="6688167">GOOS</span>&nbsp;<span class="op" id="6688172">!=</span>&nbsp;<span class="string" id="6688175">&#34;linux&#34;</span>&nbsp;<span class="op" id="6688183">&amp;&amp;</span>&nbsp;<span class="ident" id="6688186">tt</span><span class="op" id="6688188">.</span><span class="ident" id="6688189">linuxOnly</span>&nbsp;<span class="op" id="6688199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688204">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688215">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688219">listening</span>&nbsp;<span class="op" id="6688229">:=</span>&nbsp;<span class="builtinfunc" id="6688232">make</span><span class="op" id="6688236">(</span><span class="keyword" id="6688237">chan</span>&nbsp;<span class="builtintype" id="6688242">string</span><span class="op" id="6688248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688252">done</span>&nbsp;<span class="op" id="6688257">:=</span>&nbsp;<span class="builtinfunc" id="6688260">make</span><span class="op" id="6688264">(</span><span class="keyword" id="6688265">chan</span>&nbsp;<span class="builtintype" id="6688270">int</span><span class="op" id="6688273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688277">switch</span>&nbsp;<span class="ident" id="6688284">tt</span><span class="op" id="6688286">.</span><span class="ident" id="6688287">net</span>&nbsp;<span class="op" id="6688291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688295">case</span>&nbsp;<span class="string" id="6688300">&#34;unixpacket&#34;</span><span class="op" id="6688312">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688317">os</span><span class="op" id="6688319">.</span><span class="ident" id="6688320">Remove</span><span class="op" id="6688326">(</span><span class="ident" id="6688327">tt</span><span class="op" id="6688329">.</span><span class="ident" id="6688330">saddr</span><span class="op" id="6688335">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688340">os</span><span class="op" id="6688342">.</span><span class="ident" id="6688343">Remove</span><span class="op" id="6688349">(</span><span class="ident" id="6688350">tt</span><span class="op" id="6688352">.</span><span class="ident" id="6688353">caddr</span><span class="op" id="6688358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688367">go</span>&nbsp;<span class="ident" id="6688370">runStreamConnServer</span><span class="op" id="6688389">(</span><span class="ident" id="6688390">t</span><span class="op" id="6688391">,</span>&nbsp;<span class="ident" id="6688393">tt</span><span class="op" id="6688395">.</span><span class="ident" id="6688396">net</span><span class="op" id="6688399">,</span>&nbsp;<span class="ident" id="6688401">tt</span><span class="op" id="6688403">.</span><span class="ident" id="6688404">saddr</span><span class="op" id="6688409">,</span>&nbsp;<span class="ident" id="6688411">listening</span><span class="op" id="6688420">,</span>&nbsp;<span class="ident" id="6688422">done</span><span class="op" id="6688426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688430">taddr</span>&nbsp;<span class="op" id="6688436">:=</span>&nbsp;<span class="op" id="6688439">&lt;-</span><span class="ident" id="6688441">listening</span>&nbsp;<span class="comment" id="6688451">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688482">runStreamConnClient</span><span class="op" id="6688501">(</span><span class="ident" id="6688502">t</span><span class="op" id="6688503">,</span>&nbsp;<span class="ident" id="6688505">tt</span><span class="op" id="6688507">.</span><span class="ident" id="6688508">net</span><span class="op" id="6688511">,</span>&nbsp;<span class="ident" id="6688513">taddr</span><span class="op" id="6688518">,</span>&nbsp;<span class="ident" id="6688520">tt</span><span class="op" id="6688522">.</span><span class="ident" id="6688523">empty</span><span class="op" id="6688528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688532">&lt;-</span><span class="ident" id="6688534">done</span>&nbsp;<span class="comment" id="6688539">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688570">switch</span>&nbsp;<span class="ident" id="6688577">tt</span><span class="op" id="6688579">.</span><span class="ident" id="6688580">net</span>&nbsp;<span class="op" id="6688584">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688588">case</span>&nbsp;<span class="string" id="6688593">&#34;unixpacket&#34;</span><span class="op" id="6688605">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688610">os</span><span class="op" id="6688612">.</span><span class="ident" id="6688613">Remove</span><span class="op" id="6688619">(</span><span class="ident" id="6688620">tt</span><span class="op" id="6688622">.</span><span class="ident" id="6688623">saddr</span><span class="op" id="6688628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688633">os</span><span class="op" id="6688635">.</span><span class="ident" id="6688636">Remove</span><span class="op" id="6688642">(</span><span class="ident" id="6688643">tt</span><span class="op" id="6688645">.</span><span class="ident" id="6688646">caddr</span><span class="op" id="6688651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688658">}</span><br>
<span class="lineno">175</span><span class="op" id="6688660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6688663">func</span>&nbsp;<span class="ident" id="6688668">runStreamConnServer</span><span class="op" id="6688687">(</span><span class="ident" id="6688688">t</span>&nbsp;<span class="op" id="6688690">*</span><span class="ident" id="6688691">testing</span><span class="op" id="6688698">.</span><span class="ident" id="6688699">T</span><span class="op" id="6688700">,</span>&nbsp;<span class="ident" id="6688702">net</span><span class="op" id="6688705">,</span>&nbsp;<span class="ident" id="6688707">laddr</span>&nbsp;<span class="builtintype" id="6688713">string</span><span class="op" id="6688719">,</span>&nbsp;<span class="ident" id="6688721">listening</span>&nbsp;<span class="keyword" id="6688731">chan</span><span class="op" id="6688735">&lt;-</span>&nbsp;<span class="builtintype" id="6688738">string</span><span class="op" id="6688744">,</span>&nbsp;<span class="ident" id="6688746">done</span>&nbsp;<span class="keyword" id="6688751">chan</span><span class="op" id="6688755">&lt;-</span>&nbsp;<span class="builtintype" id="6688758">int</span><span class="op" id="6688761">)</span>&nbsp;<span class="op" id="6688763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688766">defer</span>&nbsp;<span class="builtinfunc" id="6688772">close</span><span class="op" id="6688777">(</span><span class="ident" id="6688778">done</span><span class="op" id="6688782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688785">l</span><span class="op" id="6688786">,</span>&nbsp;<span class="ident" id="6688788">err</span>&nbsp;<span class="op" id="6688792">:=</span>&nbsp;<span class="ident" id="6688795">Listen</span><span class="op" id="6688801">(</span><span class="ident" id="6688802">net</span><span class="op" id="6688805">,</span>&nbsp;<span class="ident" id="6688807">laddr</span><span class="op" id="6688812">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688815">if</span>&nbsp;<span class="ident" id="6688818">err</span>&nbsp;<span class="op" id="6688822">!=</span>&nbsp;<span class="ident" id="6688825">nil</span>&nbsp;<span class="op" id="6688829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688833">t</span><span class="op" id="6688834">.</span><span class="ident" id="6688835">Errorf</span><span class="op" id="6688841">(</span><span class="string" id="6688842">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6688869">,</span>&nbsp;<span class="ident" id="6688871">net</span><span class="op" id="6688874">,</span>&nbsp;<span class="ident" id="6688876">laddr</span><span class="op" id="6688881">,</span>&nbsp;<span class="ident" id="6688883">err</span><span class="op" id="6688886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688890">listening</span>&nbsp;<span class="op" id="6688900">&lt;-</span>&nbsp;<span class="string" id="6688903">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688913">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688921">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688924">defer</span>&nbsp;<span class="ident" id="6688930">l</span><span class="op" id="6688931">.</span><span class="ident" id="6688932">Close</span><span class="op" id="6688937">(</span><span class="op" id="6688938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688941">listening</span>&nbsp;<span class="op" id="6688951">&lt;-</span>&nbsp;<span class="ident" id="6688954">l</span><span class="op" id="6688955">.</span><span class="ident" id="6688956">Addr</span><span class="op" id="6688960">(</span><span class="op" id="6688961">)</span><span class="op" id="6688962">.</span><span class="ident" id="6688963">String</span><span class="op" id="6688969">(</span><span class="op" id="6688970">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688974">echo</span>&nbsp;<span class="op" id="6688979">:=</span>&nbsp;<span class="keyword" id="6688982">func</span><span class="op" id="6688986">(</span><span class="ident" id="6688987">rw</span>&nbsp;<span class="ident" id="6688990">io</span><span class="op" id="6688992">.</span><span class="ident" id="6688993">ReadWriter</span><span class="op" id="6689003">,</span>&nbsp;<span class="ident" id="6689005">done</span>&nbsp;<span class="keyword" id="6689010">chan</span><span class="op" id="6689014">&lt;-</span>&nbsp;<span class="builtintype" id="6689017">int</span><span class="op" id="6689020">)</span>&nbsp;<span class="op" id="6689022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689026">buf</span>&nbsp;<span class="op" id="6689030">:=</span>&nbsp;<span class="builtinfunc" id="6689033">make</span><span class="op" id="6689037">(</span><span class="op" id="6689038">[</span><span class="op" id="6689039">]</span><span class="builtintype" id="6689040">byte</span><span class="op" id="6689044">,</span>&nbsp;<span class="num" id="6689046">1024</span><span class="op" id="6689050">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689054">for</span>&nbsp;<span class="op" id="6689058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689063">n</span><span class="op" id="6689064">,</span>&nbsp;<span class="ident" id="6689066">err</span>&nbsp;<span class="op" id="6689070">:=</span>&nbsp;<span class="ident" id="6689073">rw</span><span class="op" id="6689075">.</span><span class="ident" id="6689076">Read</span><span class="op" id="6689080">(</span><span class="ident" id="6689081">buf</span><span class="op" id="6689084">[</span><span class="num" id="6689085">0</span><span class="op" id="6689086">:</span><span class="op" id="6689087">]</span><span class="op" id="6689088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689093">if</span>&nbsp;<span class="ident" id="6689096">err</span>&nbsp;<span class="op" id="6689100">!=</span>&nbsp;<span class="ident" id="6689103">nil</span>&nbsp;<span class="op" id="6689107">||</span>&nbsp;<span class="ident" id="6689110">n</span>&nbsp;<span class="op" id="6689112">==</span>&nbsp;<span class="num" id="6689115">0</span>&nbsp;<span class="op" id="6689117">||</span>&nbsp;<span class="builtintype" id="6689120">string</span><span class="op" id="6689126">(</span><span class="ident" id="6689127">buf</span><span class="op" id="6689130">[</span><span class="op" id="6689131">:</span><span class="ident" id="6689132">n</span><span class="op" id="6689133">]</span><span class="op" id="6689134">)</span>&nbsp;<span class="op" id="6689136">==</span>&nbsp;<span class="string" id="6689139">&#34;END&#34;</span>&nbsp;<span class="op" id="6689145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689151">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689160">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689165">rw</span><span class="op" id="6689167">.</span><span class="ident" id="6689168">Write</span><span class="op" id="6689173">(</span><span class="ident" id="6689174">buf</span><span class="op" id="6689177">[</span><span class="num" id="6689178">0</span><span class="op" id="6689179">:</span><span class="ident" id="6689180">n</span><span class="op" id="6689181">]</span><span class="op" id="6689182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6689190">close</span><span class="op" id="6689195">(</span><span class="ident" id="6689196">done</span><span class="op" id="6689200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="6689206">run</span><span class="op" id="6689209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689212">for</span>&nbsp;<span class="op" id="6689216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689220">c</span><span class="op" id="6689221">,</span>&nbsp;<span class="ident" id="6689223">err</span>&nbsp;<span class="op" id="6689227">:=</span>&nbsp;<span class="ident" id="6689230">l</span><span class="op" id="6689231">.</span><span class="ident" id="6689232">Accept</span><span class="op" id="6689238">(</span><span class="op" id="6689239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689243">if</span>&nbsp;<span class="ident" id="6689246">err</span>&nbsp;<span class="op" id="6689250">!=</span>&nbsp;<span class="ident" id="6689253">nil</span>&nbsp;<span class="op" id="6689257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689262">t</span><span class="op" id="6689263">.</span><span class="ident" id="6689264">Logf</span><span class="op" id="6689268">(</span><span class="string" id="6689269">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6689288">,</span>&nbsp;<span class="ident" id="6689290">err</span><span class="op" id="6689293">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689298">continue</span>&nbsp;<span class="ident" id="6689307">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689317">echodone</span>&nbsp;<span class="op" id="6689326">:=</span>&nbsp;<span class="builtinfunc" id="6689329">make</span><span class="op" id="6689333">(</span><span class="keyword" id="6689334">chan</span>&nbsp;<span class="builtintype" id="6689339">int</span><span class="op" id="6689342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689346">go</span>&nbsp;<span class="ident" id="6689349">echo</span><span class="op" id="6689353">(</span><span class="ident" id="6689354">c</span><span class="op" id="6689355">,</span>&nbsp;<span class="ident" id="6689357">echodone</span><span class="op" id="6689365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689369">&lt;-</span><span class="ident" id="6689371">echodone</span>&nbsp;<span class="comment" id="6689380">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689408">c</span><span class="op" id="6689409">.</span><span class="ident" id="6689410">Close</span><span class="op" id="6689415">(</span><span class="op" id="6689416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689420">break</span>&nbsp;<span class="ident" id="6689426">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689431">}</span><br>
<span class="lineno"></span><span class="op" id="6689433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="6689436">func</span>&nbsp;<span class="ident" id="6689441">runStreamConnClient</span><span class="op" id="6689460">(</span><span class="ident" id="6689461">t</span>&nbsp;<span class="op" id="6689463">*</span><span class="ident" id="6689464">testing</span><span class="op" id="6689471">.</span><span class="ident" id="6689472">T</span><span class="op" id="6689473">,</span>&nbsp;<span class="ident" id="6689475">net</span><span class="op" id="6689478">,</span>&nbsp;<span class="ident" id="6689480">taddr</span>&nbsp;<span class="builtintype" id="6689486">string</span><span class="op" id="6689492">,</span>&nbsp;<span class="ident" id="6689494">isEmpty</span>&nbsp;<span class="builtintype" id="6689502">bool</span><span class="op" id="6689506">)</span>&nbsp;<span class="op" id="6689508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689511">c</span><span class="op" id="6689512">,</span>&nbsp;<span class="ident" id="6689514">err</span>&nbsp;<span class="op" id="6689518">:=</span>&nbsp;<span class="ident" id="6689521">Dial</span><span class="op" id="6689525">(</span><span class="ident" id="6689526">net</span><span class="op" id="6689529">,</span>&nbsp;<span class="ident" id="6689531">taddr</span><span class="op" id="6689536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689539">if</span>&nbsp;<span class="ident" id="6689542">err</span>&nbsp;<span class="op" id="6689546">!=</span>&nbsp;<span class="ident" id="6689549">nil</span>&nbsp;<span class="op" id="6689553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689557">t</span><span class="op" id="6689558">.</span><span class="ident" id="6689559">Fatalf</span><span class="op" id="6689565">(</span><span class="string" id="6689566">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6689591">,</span>&nbsp;<span class="ident" id="6689593">net</span><span class="op" id="6689596">,</span>&nbsp;<span class="ident" id="6689598">taddr</span><span class="op" id="6689603">,</span>&nbsp;<span class="ident" id="6689605">err</span><span class="op" id="6689608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689611">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689614">defer</span>&nbsp;<span class="ident" id="6689620">c</span><span class="op" id="6689621">.</span><span class="ident" id="6689622">Close</span><span class="op" id="6689627">(</span><span class="op" id="6689628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689631">c</span><span class="op" id="6689632">.</span><span class="ident" id="6689633">SetReadDeadline</span><span class="op" id="6689648">(</span><span class="ident" id="6689649">time</span><span class="op" id="6689653">.</span><span class="ident" id="6689654">Now</span><span class="op" id="6689657">(</span><span class="op" id="6689658">)</span><span class="op" id="6689659">.</span><span class="ident" id="6689660">Add</span><span class="op" id="6689663">(</span><span class="num" id="6689664">1</span>&nbsp;<span class="op" id="6689666">*</span>&nbsp;<span class="ident" id="6689668">time</span><span class="op" id="6689672">.</span><span class="ident" id="6689673">Second</span><span class="op" id="6689679">)</span><span class="op" id="6689680">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689684">var</span>&nbsp;<span class="ident" id="6689688">wb</span>&nbsp;<span class="op" id="6689691">[</span><span class="op" id="6689692">]</span><span class="builtintype" id="6689693">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689699">if</span>&nbsp;<span class="op" id="6689702">!</span><span class="ident" id="6689703">isEmpty</span>&nbsp;<span class="op" id="6689711">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689715">wb</span>&nbsp;<span class="op" id="6689718">=</span>&nbsp;<span class="op" id="6689720">[</span><span class="op" id="6689721">]</span><span class="builtintype" id="6689722">byte</span><span class="op" id="6689726">(</span><span class="string" id="6689727">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6689755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689761">if</span>&nbsp;<span class="ident" id="6689764">n</span><span class="op" id="6689765">,</span>&nbsp;<span class="ident" id="6689767">err</span>&nbsp;<span class="op" id="6689771">:=</span>&nbsp;<span class="ident" id="6689774">c</span><span class="op" id="6689775">.</span><span class="ident" id="6689776">Write</span><span class="op" id="6689781">(</span><span class="ident" id="6689782">wb</span><span class="op" id="6689784">)</span><span class="op" id="6689785">;</span>&nbsp;<span class="ident" id="6689787">err</span>&nbsp;<span class="op" id="6689791">!=</span>&nbsp;<span class="ident" id="6689794">nil</span>&nbsp;<span class="op" id="6689798">||</span>&nbsp;<span class="ident" id="6689801">n</span>&nbsp;<span class="op" id="6689803">!=</span>&nbsp;<span class="builtinfunc" id="6689806">len</span><span class="op" id="6689809">(</span><span class="ident" id="6689810">wb</span><span class="op" id="6689812">)</span>&nbsp;<span class="op" id="6689814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689818">t</span><span class="op" id="6689819">.</span><span class="ident" id="6689820">Fatalf</span><span class="op" id="6689826">(</span><span class="string" id="6689827">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6689865">,</span>&nbsp;<span class="ident" id="6689867">n</span><span class="op" id="6689868">,</span>&nbsp;<span class="ident" id="6689870">err</span><span class="op" id="6689873">,</span>&nbsp;<span class="builtinfunc" id="6689875">len</span><span class="op" id="6689878">(</span><span class="ident" id="6689879">wb</span><span class="op" id="6689881">)</span><span class="op" id="6689882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689885">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689889">rb</span>&nbsp;<span class="op" id="6689892">:=</span>&nbsp;<span class="builtinfunc" id="6689895">make</span><span class="op" id="6689899">(</span><span class="op" id="6689900">[</span><span class="op" id="6689901">]</span><span class="builtintype" id="6689902">byte</span><span class="op" id="6689906">,</span>&nbsp;<span class="num" id="6689908">1024</span><span class="op" id="6689912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689915">if</span>&nbsp;<span class="ident" id="6689918">n</span><span class="op" id="6689919">,</span>&nbsp;<span class="ident" id="6689921">err</span>&nbsp;<span class="op" id="6689925">:=</span>&nbsp;<span class="ident" id="6689928">c</span><span class="op" id="6689929">.</span><span class="ident" id="6689930">Read</span><span class="op" id="6689934">(</span><span class="ident" id="6689935">rb</span><span class="op" id="6689937">[</span><span class="num" id="6689938">0</span><span class="op" id="6689939">:</span><span class="op" id="6689940">]</span><span class="op" id="6689941">)</span><span class="op" id="6689942">;</span>&nbsp;<span class="ident" id="6689944">err</span>&nbsp;<span class="op" id="6689948">!=</span>&nbsp;<span class="ident" id="6689951">nil</span>&nbsp;<span class="op" id="6689955">||</span>&nbsp;<span class="ident" id="6689958">n</span>&nbsp;<span class="op" id="6689960">!=</span>&nbsp;<span class="builtinfunc" id="6689963">len</span><span class="op" id="6689966">(</span><span class="ident" id="6689967">wb</span><span class="op" id="6689969">)</span>&nbsp;<span class="op" id="6689971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689975">t</span><span class="op" id="6689976">.</span><span class="ident" id="6689977">Fatalf</span><span class="op" id="6689983">(</span><span class="string" id="6689984">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6690021">,</span>&nbsp;<span class="ident" id="6690023">n</span><span class="op" id="6690024">,</span>&nbsp;<span class="ident" id="6690026">err</span><span class="op" id="6690029">,</span>&nbsp;<span class="builtinfunc" id="6690031">len</span><span class="op" id="6690034">(</span><span class="ident" id="6690035">wb</span><span class="op" id="6690037">)</span><span class="op" id="6690038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690041">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6690045">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6690086">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690138">switch</span>&nbsp;<span class="ident" id="6690145">net</span>&nbsp;<span class="op" id="6690149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690152">case</span>&nbsp;<span class="string" id="6690157">&#34;unixpacket&#34;</span><span class="op" id="6690169">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690173">c</span><span class="op" id="6690174">.</span><span class="ident" id="6690175">Write</span><span class="op" id="6690180">(</span><span class="op" id="6690181">[</span><span class="op" id="6690182">]</span><span class="builtintype" id="6690183">byte</span><span class="op" id="6690187">(</span><span class="string" id="6690188">&#34;END&#34;</span><span class="op" id="6690193">)</span><span class="op" id="6690194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690197">}</span><br>
<span class="lineno"></span><span class="op" id="6690199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6690202">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="6690245">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="6690296">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="6690348">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="6690378">var</span>&nbsp;<span class="ident" id="6690382">testDatagram</span>&nbsp;<span class="op" id="6690395">=</span>&nbsp;<span class="ident" id="6690397">flag</span><span class="op" id="6690401">.</span><span class="ident" id="6690402">Bool</span><span class="op" id="6690406">(</span><span class="string" id="6690407">&#34;datagram&#34;</span><span class="op" id="6690417">,</span>&nbsp;<span class="builtintype" id="6690419">false</span><span class="op" id="6690424">,</span>&nbsp;<span class="string" id="6690426">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="6690460">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="6690463">var</span>&nbsp;<span class="ident" id="6690467">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6690497">=</span>&nbsp;<span class="op" id="6690499">[</span><span class="op" id="6690500">]</span><span class="keyword" id="6690501">struct</span>&nbsp;<span class="op" id="6690508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690511">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690521">string</span>&nbsp;<span class="comment" id="6690528">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690544">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690554">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690562">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690572">string</span>&nbsp;<span class="comment" id="6690579">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690595">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690605">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690613">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690623">bool</span>&nbsp;<span class="comment" id="6690628">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690669">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690679">bool</span>&nbsp;<span class="comment" id="6690684">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690730">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690740">bool</span>&nbsp;<span class="comment" id="6690745">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690776">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690786">bool</span>&nbsp;<span class="comment" id="6690791">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690816">linuxOnly</span>&nbsp;<span class="builtintype" id="6690826">bool</span>&nbsp;<span class="comment" id="6690831">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="6690885">}</span><span class="op" id="6690886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690889">{</span><span class="ident" id="6690890">snet</span><span class="op" id="6690894">:</span>&nbsp;<span class="string" id="6690896">&#34;udp&#34;</span><span class="op" id="6690901">,</span>&nbsp;<span class="ident" id="6690903">saddr</span><span class="op" id="6690908">:</span>&nbsp;<span class="string" id="6690910">&#34;&#34;</span><span class="op" id="6690912">,</span>&nbsp;<span class="ident" id="6690914">cnet</span><span class="op" id="6690918">:</span>&nbsp;<span class="string" id="6690920">&#34;udp&#34;</span><span class="op" id="6690925">,</span>&nbsp;<span class="ident" id="6690927">caddr</span><span class="op" id="6690932">:</span>&nbsp;<span class="string" id="6690934">&#34;127.0.0.1&#34;</span><span class="op" id="6690945">}</span><span class="op" id="6690946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690949">{</span><span class="ident" id="6690950">snet</span><span class="op" id="6690954">:</span>&nbsp;<span class="string" id="6690956">&#34;udp&#34;</span><span class="op" id="6690961">,</span>&nbsp;<span class="ident" id="6690963">saddr</span><span class="op" id="6690968">:</span>&nbsp;<span class="string" id="6690970">&#34;0.0.0.0&#34;</span><span class="op" id="6690979">,</span>&nbsp;<span class="ident" id="6690981">cnet</span><span class="op" id="6690985">:</span>&nbsp;<span class="string" id="6690987">&#34;udp&#34;</span><span class="op" id="6690992">,</span>&nbsp;<span class="ident" id="6690994">caddr</span><span class="op" id="6690999">:</span>&nbsp;<span class="string" id="6691001">&#34;127.0.0.1&#34;</span><span class="op" id="6691012">}</span><span class="op" id="6691013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691016">{</span><span class="ident" id="6691017">snet</span><span class="op" id="6691021">:</span>&nbsp;<span class="string" id="6691023">&#34;udp&#34;</span><span class="op" id="6691028">,</span>&nbsp;<span class="ident" id="6691030">saddr</span><span class="op" id="6691035">:</span>&nbsp;<span class="string" id="6691037">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6691055">,</span>&nbsp;<span class="ident" id="6691057">cnet</span><span class="op" id="6691061">:</span>&nbsp;<span class="string" id="6691063">&#34;udp&#34;</span><span class="op" id="6691068">,</span>&nbsp;<span class="ident" id="6691070">caddr</span><span class="op" id="6691075">:</span>&nbsp;<span class="string" id="6691077">&#34;127.0.0.1&#34;</span><span class="op" id="6691088">}</span><span class="op" id="6691089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691092">{</span><span class="ident" id="6691093">snet</span><span class="op" id="6691097">:</span>&nbsp;<span class="string" id="6691099">&#34;udp&#34;</span><span class="op" id="6691104">,</span>&nbsp;<span class="ident" id="6691106">saddr</span><span class="op" id="6691111">:</span>&nbsp;<span class="string" id="6691113">&#34;[::]&#34;</span><span class="op" id="6691119">,</span>&nbsp;<span class="ident" id="6691121">cnet</span><span class="op" id="6691125">:</span>&nbsp;<span class="string" id="6691127">&#34;udp&#34;</span><span class="op" id="6691132">,</span>&nbsp;<span class="ident" id="6691134">caddr</span><span class="op" id="6691139">:</span>&nbsp;<span class="string" id="6691141">&#34;[::1]&#34;</span><span class="op" id="6691148">,</span>&nbsp;<span class="ident" id="6691150">ipv6</span><span class="op" id="6691154">:</span>&nbsp;<span class="builtintype" id="6691156">true</span><span class="op" id="6691160">}</span><span class="op" id="6691161">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691165">{</span><span class="ident" id="6691166">snet</span><span class="op" id="6691170">:</span>&nbsp;<span class="string" id="6691172">&#34;udp&#34;</span><span class="op" id="6691177">,</span>&nbsp;<span class="ident" id="6691179">saddr</span><span class="op" id="6691184">:</span>&nbsp;<span class="string" id="6691186">&#34;&#34;</span><span class="op" id="6691188">,</span>&nbsp;<span class="ident" id="6691190">cnet</span><span class="op" id="6691194">:</span>&nbsp;<span class="string" id="6691196">&#34;udp&#34;</span><span class="op" id="6691201">,</span>&nbsp;<span class="ident" id="6691203">caddr</span><span class="op" id="6691208">:</span>&nbsp;<span class="string" id="6691210">&#34;[::1]&#34;</span><span class="op" id="6691217">,</span>&nbsp;<span class="ident" id="6691219">ipv4map</span><span class="op" id="6691226">:</span>&nbsp;<span class="builtintype" id="6691228">true</span><span class="op" id="6691232">}</span><span class="op" id="6691233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691236">{</span><span class="ident" id="6691237">snet</span><span class="op" id="6691241">:</span>&nbsp;<span class="string" id="6691243">&#34;udp&#34;</span><span class="op" id="6691248">,</span>&nbsp;<span class="ident" id="6691250">saddr</span><span class="op" id="6691255">:</span>&nbsp;<span class="string" id="6691257">&#34;0.0.0.0&#34;</span><span class="op" id="6691266">,</span>&nbsp;<span class="ident" id="6691268">cnet</span><span class="op" id="6691272">:</span>&nbsp;<span class="string" id="6691274">&#34;udp&#34;</span><span class="op" id="6691279">,</span>&nbsp;<span class="ident" id="6691281">caddr</span><span class="op" id="6691286">:</span>&nbsp;<span class="string" id="6691288">&#34;[::1]&#34;</span><span class="op" id="6691295">,</span>&nbsp;<span class="ident" id="6691297">ipv4map</span><span class="op" id="6691304">:</span>&nbsp;<span class="builtintype" id="6691306">true</span><span class="op" id="6691310">}</span><span class="op" id="6691311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691314">{</span><span class="ident" id="6691315">snet</span><span class="op" id="6691319">:</span>&nbsp;<span class="string" id="6691321">&#34;udp&#34;</span><span class="op" id="6691326">,</span>&nbsp;<span class="ident" id="6691328">saddr</span><span class="op" id="6691333">:</span>&nbsp;<span class="string" id="6691335">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6691353">,</span>&nbsp;<span class="ident" id="6691355">cnet</span><span class="op" id="6691359">:</span>&nbsp;<span class="string" id="6691361">&#34;udp&#34;</span><span class="op" id="6691366">,</span>&nbsp;<span class="ident" id="6691368">caddr</span><span class="op" id="6691373">:</span>&nbsp;<span class="string" id="6691375">&#34;[::1]&#34;</span><span class="op" id="6691382">,</span>&nbsp;<span class="ident" id="6691384">ipv4map</span><span class="op" id="6691391">:</span>&nbsp;<span class="builtintype" id="6691393">true</span><span class="op" id="6691397">}</span><span class="op" id="6691398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691401">{</span><span class="ident" id="6691402">snet</span><span class="op" id="6691406">:</span>&nbsp;<span class="string" id="6691408">&#34;udp&#34;</span><span class="op" id="6691413">,</span>&nbsp;<span class="ident" id="6691415">saddr</span><span class="op" id="6691420">:</span>&nbsp;<span class="string" id="6691422">&#34;[::]&#34;</span><span class="op" id="6691428">,</span>&nbsp;<span class="ident" id="6691430">cnet</span><span class="op" id="6691434">:</span>&nbsp;<span class="string" id="6691436">&#34;udp&#34;</span><span class="op" id="6691441">,</span>&nbsp;<span class="ident" id="6691443">caddr</span><span class="op" id="6691448">:</span>&nbsp;<span class="string" id="6691450">&#34;127.0.0.1&#34;</span><span class="op" id="6691461">,</span>&nbsp;<span class="ident" id="6691463">ipv4map</span><span class="op" id="6691470">:</span>&nbsp;<span class="builtintype" id="6691472">true</span><span class="op" id="6691476">}</span><span class="op" id="6691477">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691481">{</span><span class="ident" id="6691482">snet</span><span class="op" id="6691486">:</span>&nbsp;<span class="string" id="6691488">&#34;udp&#34;</span><span class="op" id="6691493">,</span>&nbsp;<span class="ident" id="6691495">saddr</span><span class="op" id="6691500">:</span>&nbsp;<span class="string" id="6691502">&#34;&#34;</span><span class="op" id="6691504">,</span>&nbsp;<span class="ident" id="6691506">cnet</span><span class="op" id="6691510">:</span>&nbsp;<span class="string" id="6691512">&#34;udp4&#34;</span><span class="op" id="6691518">,</span>&nbsp;<span class="ident" id="6691520">caddr</span><span class="op" id="6691525">:</span>&nbsp;<span class="string" id="6691527">&#34;127.0.0.1&#34;</span><span class="op" id="6691538">}</span><span class="op" id="6691539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691542">{</span><span class="ident" id="6691543">snet</span><span class="op" id="6691547">:</span>&nbsp;<span class="string" id="6691549">&#34;udp&#34;</span><span class="op" id="6691554">,</span>&nbsp;<span class="ident" id="6691556">saddr</span><span class="op" id="6691561">:</span>&nbsp;<span class="string" id="6691563">&#34;0.0.0.0&#34;</span><span class="op" id="6691572">,</span>&nbsp;<span class="ident" id="6691574">cnet</span><span class="op" id="6691578">:</span>&nbsp;<span class="string" id="6691580">&#34;udp4&#34;</span><span class="op" id="6691586">,</span>&nbsp;<span class="ident" id="6691588">caddr</span><span class="op" id="6691593">:</span>&nbsp;<span class="string" id="6691595">&#34;127.0.0.1&#34;</span><span class="op" id="6691606">}</span><span class="op" id="6691607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691610">{</span><span class="ident" id="6691611">snet</span><span class="op" id="6691615">:</span>&nbsp;<span class="string" id="6691617">&#34;udp&#34;</span><span class="op" id="6691622">,</span>&nbsp;<span class="ident" id="6691624">saddr</span><span class="op" id="6691629">:</span>&nbsp;<span class="string" id="6691631">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6691649">,</span>&nbsp;<span class="ident" id="6691651">cnet</span><span class="op" id="6691655">:</span>&nbsp;<span class="string" id="6691657">&#34;udp4&#34;</span><span class="op" id="6691663">,</span>&nbsp;<span class="ident" id="6691665">caddr</span><span class="op" id="6691670">:</span>&nbsp;<span class="string" id="6691672">&#34;127.0.0.1&#34;</span><span class="op" id="6691683">}</span><span class="op" id="6691684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691687">{</span><span class="ident" id="6691688">snet</span><span class="op" id="6691692">:</span>&nbsp;<span class="string" id="6691694">&#34;udp&#34;</span><span class="op" id="6691699">,</span>&nbsp;<span class="ident" id="6691701">saddr</span><span class="op" id="6691706">:</span>&nbsp;<span class="string" id="6691708">&#34;[::]&#34;</span><span class="op" id="6691714">,</span>&nbsp;<span class="ident" id="6691716">cnet</span><span class="op" id="6691720">:</span>&nbsp;<span class="string" id="6691722">&#34;udp6&#34;</span><span class="op" id="6691728">,</span>&nbsp;<span class="ident" id="6691730">caddr</span><span class="op" id="6691735">:</span>&nbsp;<span class="string" id="6691737">&#34;[::1]&#34;</span><span class="op" id="6691744">,</span>&nbsp;<span class="ident" id="6691746">ipv6</span><span class="op" id="6691750">:</span>&nbsp;<span class="builtintype" id="6691752">true</span><span class="op" id="6691756">}</span><span class="op" id="6691757">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691761">{</span><span class="ident" id="6691762">snet</span><span class="op" id="6691766">:</span>&nbsp;<span class="string" id="6691768">&#34;udp&#34;</span><span class="op" id="6691773">,</span>&nbsp;<span class="ident" id="6691775">saddr</span><span class="op" id="6691780">:</span>&nbsp;<span class="string" id="6691782">&#34;&#34;</span><span class="op" id="6691784">,</span>&nbsp;<span class="ident" id="6691786">cnet</span><span class="op" id="6691790">:</span>&nbsp;<span class="string" id="6691792">&#34;udp6&#34;</span><span class="op" id="6691798">,</span>&nbsp;<span class="ident" id="6691800">caddr</span><span class="op" id="6691805">:</span>&nbsp;<span class="string" id="6691807">&#34;[::1]&#34;</span><span class="op" id="6691814">,</span>&nbsp;<span class="ident" id="6691816">ipv4map</span><span class="op" id="6691823">:</span>&nbsp;<span class="builtintype" id="6691825">true</span><span class="op" id="6691829">}</span><span class="op" id="6691830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691833">{</span><span class="ident" id="6691834">snet</span><span class="op" id="6691838">:</span>&nbsp;<span class="string" id="6691840">&#34;udp&#34;</span><span class="op" id="6691845">,</span>&nbsp;<span class="ident" id="6691847">saddr</span><span class="op" id="6691852">:</span>&nbsp;<span class="string" id="6691854">&#34;0.0.0.0&#34;</span><span class="op" id="6691863">,</span>&nbsp;<span class="ident" id="6691865">cnet</span><span class="op" id="6691869">:</span>&nbsp;<span class="string" id="6691871">&#34;udp6&#34;</span><span class="op" id="6691877">,</span>&nbsp;<span class="ident" id="6691879">caddr</span><span class="op" id="6691884">:</span>&nbsp;<span class="string" id="6691886">&#34;[::1]&#34;</span><span class="op" id="6691893">,</span>&nbsp;<span class="ident" id="6691895">ipv4map</span><span class="op" id="6691902">:</span>&nbsp;<span class="builtintype" id="6691904">true</span><span class="op" id="6691908">}</span><span class="op" id="6691909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691912">{</span><span class="ident" id="6691913">snet</span><span class="op" id="6691917">:</span>&nbsp;<span class="string" id="6691919">&#34;udp&#34;</span><span class="op" id="6691924">,</span>&nbsp;<span class="ident" id="6691926">saddr</span><span class="op" id="6691931">:</span>&nbsp;<span class="string" id="6691933">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6691951">,</span>&nbsp;<span class="ident" id="6691953">cnet</span><span class="op" id="6691957">:</span>&nbsp;<span class="string" id="6691959">&#34;udp6&#34;</span><span class="op" id="6691965">,</span>&nbsp;<span class="ident" id="6691967">caddr</span><span class="op" id="6691972">:</span>&nbsp;<span class="string" id="6691974">&#34;[::1]&#34;</span><span class="op" id="6691981">,</span>&nbsp;<span class="ident" id="6691983">ipv4map</span><span class="op" id="6691990">:</span>&nbsp;<span class="builtintype" id="6691992">true</span><span class="op" id="6691996">}</span><span class="op" id="6691997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692000">{</span><span class="ident" id="6692001">snet</span><span class="op" id="6692005">:</span>&nbsp;<span class="string" id="6692007">&#34;udp&#34;</span><span class="op" id="6692012">,</span>&nbsp;<span class="ident" id="6692014">saddr</span><span class="op" id="6692019">:</span>&nbsp;<span class="string" id="6692021">&#34;[::]&#34;</span><span class="op" id="6692027">,</span>&nbsp;<span class="ident" id="6692029">cnet</span><span class="op" id="6692033">:</span>&nbsp;<span class="string" id="6692035">&#34;udp4&#34;</span><span class="op" id="6692041">,</span>&nbsp;<span class="ident" id="6692043">caddr</span><span class="op" id="6692048">:</span>&nbsp;<span class="string" id="6692050">&#34;127.0.0.1&#34;</span><span class="op" id="6692061">,</span>&nbsp;<span class="ident" id="6692063">ipv4map</span><span class="op" id="6692070">:</span>&nbsp;<span class="builtintype" id="6692072">true</span><span class="op" id="6692076">}</span><span class="op" id="6692077">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692081">{</span><span class="ident" id="6692082">snet</span><span class="op" id="6692086">:</span>&nbsp;<span class="string" id="6692088">&#34;udp&#34;</span><span class="op" id="6692093">,</span>&nbsp;<span class="ident" id="6692095">saddr</span><span class="op" id="6692100">:</span>&nbsp;<span class="string" id="6692102">&#34;127.0.0.1&#34;</span><span class="op" id="6692113">,</span>&nbsp;<span class="ident" id="6692115">cnet</span><span class="op" id="6692119">:</span>&nbsp;<span class="string" id="6692121">&#34;udp&#34;</span><span class="op" id="6692126">,</span>&nbsp;<span class="ident" id="6692128">caddr</span><span class="op" id="6692133">:</span>&nbsp;<span class="string" id="6692135">&#34;127.0.0.1&#34;</span><span class="op" id="6692146">}</span><span class="op" id="6692147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692150">{</span><span class="ident" id="6692151">snet</span><span class="op" id="6692155">:</span>&nbsp;<span class="string" id="6692157">&#34;udp&#34;</span><span class="op" id="6692162">,</span>&nbsp;<span class="ident" id="6692164">saddr</span><span class="op" id="6692169">:</span>&nbsp;<span class="string" id="6692171">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6692191">,</span>&nbsp;<span class="ident" id="6692193">cnet</span><span class="op" id="6692197">:</span>&nbsp;<span class="string" id="6692199">&#34;udp&#34;</span><span class="op" id="6692204">,</span>&nbsp;<span class="ident" id="6692206">caddr</span><span class="op" id="6692211">:</span>&nbsp;<span class="string" id="6692213">&#34;127.0.0.1&#34;</span><span class="op" id="6692224">}</span><span class="op" id="6692225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692228">{</span><span class="ident" id="6692229">snet</span><span class="op" id="6692233">:</span>&nbsp;<span class="string" id="6692235">&#34;udp&#34;</span><span class="op" id="6692240">,</span>&nbsp;<span class="ident" id="6692242">saddr</span><span class="op" id="6692247">:</span>&nbsp;<span class="string" id="6692249">&#34;[::1]&#34;</span><span class="op" id="6692256">,</span>&nbsp;<span class="ident" id="6692258">cnet</span><span class="op" id="6692262">:</span>&nbsp;<span class="string" id="6692264">&#34;udp&#34;</span><span class="op" id="6692269">,</span>&nbsp;<span class="ident" id="6692271">caddr</span><span class="op" id="6692276">:</span>&nbsp;<span class="string" id="6692278">&#34;[::1]&#34;</span><span class="op" id="6692285">,</span>&nbsp;<span class="ident" id="6692287">ipv6</span><span class="op" id="6692291">:</span>&nbsp;<span class="builtintype" id="6692293">true</span><span class="op" id="6692297">}</span><span class="op" id="6692298">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692302">{</span><span class="ident" id="6692303">snet</span><span class="op" id="6692307">:</span>&nbsp;<span class="string" id="6692309">&#34;udp4&#34;</span><span class="op" id="6692315">,</span>&nbsp;<span class="ident" id="6692317">saddr</span><span class="op" id="6692322">:</span>&nbsp;<span class="string" id="6692324">&#34;&#34;</span><span class="op" id="6692326">,</span>&nbsp;<span class="ident" id="6692328">cnet</span><span class="op" id="6692332">:</span>&nbsp;<span class="string" id="6692334">&#34;udp4&#34;</span><span class="op" id="6692340">,</span>&nbsp;<span class="ident" id="6692342">caddr</span><span class="op" id="6692347">:</span>&nbsp;<span class="string" id="6692349">&#34;127.0.0.1&#34;</span><span class="op" id="6692360">}</span><span class="op" id="6692361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692364">{</span><span class="ident" id="6692365">snet</span><span class="op" id="6692369">:</span>&nbsp;<span class="string" id="6692371">&#34;udp4&#34;</span><span class="op" id="6692377">,</span>&nbsp;<span class="ident" id="6692379">saddr</span><span class="op" id="6692384">:</span>&nbsp;<span class="string" id="6692386">&#34;0.0.0.0&#34;</span><span class="op" id="6692395">,</span>&nbsp;<span class="ident" id="6692397">cnet</span><span class="op" id="6692401">:</span>&nbsp;<span class="string" id="6692403">&#34;udp4&#34;</span><span class="op" id="6692409">,</span>&nbsp;<span class="ident" id="6692411">caddr</span><span class="op" id="6692416">:</span>&nbsp;<span class="string" id="6692418">&#34;127.0.0.1&#34;</span><span class="op" id="6692429">}</span><span class="op" id="6692430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692433">{</span><span class="ident" id="6692434">snet</span><span class="op" id="6692438">:</span>&nbsp;<span class="string" id="6692440">&#34;udp4&#34;</span><span class="op" id="6692446">,</span>&nbsp;<span class="ident" id="6692448">saddr</span><span class="op" id="6692453">:</span>&nbsp;<span class="string" id="6692455">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6692473">,</span>&nbsp;<span class="ident" id="6692475">cnet</span><span class="op" id="6692479">:</span>&nbsp;<span class="string" id="6692481">&#34;udp4&#34;</span><span class="op" id="6692487">,</span>&nbsp;<span class="ident" id="6692489">caddr</span><span class="op" id="6692494">:</span>&nbsp;<span class="string" id="6692496">&#34;127.0.0.1&#34;</span><span class="op" id="6692507">}</span><span class="op" id="6692508">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692512">{</span><span class="ident" id="6692513">snet</span><span class="op" id="6692517">:</span>&nbsp;<span class="string" id="6692519">&#34;udp4&#34;</span><span class="op" id="6692525">,</span>&nbsp;<span class="ident" id="6692527">saddr</span><span class="op" id="6692532">:</span>&nbsp;<span class="string" id="6692534">&#34;127.0.0.1&#34;</span><span class="op" id="6692545">,</span>&nbsp;<span class="ident" id="6692547">cnet</span><span class="op" id="6692551">:</span>&nbsp;<span class="string" id="6692553">&#34;udp4&#34;</span><span class="op" id="6692559">,</span>&nbsp;<span class="ident" id="6692561">caddr</span><span class="op" id="6692566">:</span>&nbsp;<span class="string" id="6692568">&#34;127.0.0.1&#34;</span><span class="op" id="6692579">}</span><span class="op" id="6692580">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692584">{</span><span class="ident" id="6692585">snet</span><span class="op" id="6692589">:</span>&nbsp;<span class="string" id="6692591">&#34;udp6&#34;</span><span class="op" id="6692597">,</span>&nbsp;<span class="ident" id="6692599">saddr</span><span class="op" id="6692604">:</span>&nbsp;<span class="string" id="6692606">&#34;&#34;</span><span class="op" id="6692608">,</span>&nbsp;<span class="ident" id="6692610">cnet</span><span class="op" id="6692614">:</span>&nbsp;<span class="string" id="6692616">&#34;udp6&#34;</span><span class="op" id="6692622">,</span>&nbsp;<span class="ident" id="6692624">caddr</span><span class="op" id="6692629">:</span>&nbsp;<span class="string" id="6692631">&#34;[::1]&#34;</span><span class="op" id="6692638">,</span>&nbsp;<span class="ident" id="6692640">ipv6</span><span class="op" id="6692644">:</span>&nbsp;<span class="builtintype" id="6692646">true</span><span class="op" id="6692650">}</span><span class="op" id="6692651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692654">{</span><span class="ident" id="6692655">snet</span><span class="op" id="6692659">:</span>&nbsp;<span class="string" id="6692661">&#34;udp6&#34;</span><span class="op" id="6692667">,</span>&nbsp;<span class="ident" id="6692669">saddr</span><span class="op" id="6692674">:</span>&nbsp;<span class="string" id="6692676">&#34;[::]&#34;</span><span class="op" id="6692682">,</span>&nbsp;<span class="ident" id="6692684">cnet</span><span class="op" id="6692688">:</span>&nbsp;<span class="string" id="6692690">&#34;udp6&#34;</span><span class="op" id="6692696">,</span>&nbsp;<span class="ident" id="6692698">caddr</span><span class="op" id="6692703">:</span>&nbsp;<span class="string" id="6692705">&#34;[::1]&#34;</span><span class="op" id="6692712">,</span>&nbsp;<span class="ident" id="6692714">ipv6</span><span class="op" id="6692718">:</span>&nbsp;<span class="builtintype" id="6692720">true</span><span class="op" id="6692724">}</span><span class="op" id="6692725">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692729">{</span><span class="ident" id="6692730">snet</span><span class="op" id="6692734">:</span>&nbsp;<span class="string" id="6692736">&#34;udp6&#34;</span><span class="op" id="6692742">,</span>&nbsp;<span class="ident" id="6692744">saddr</span><span class="op" id="6692749">:</span>&nbsp;<span class="string" id="6692751">&#34;[::1]&#34;</span><span class="op" id="6692758">,</span>&nbsp;<span class="ident" id="6692760">cnet</span><span class="op" id="6692764">:</span>&nbsp;<span class="string" id="6692766">&#34;udp6&#34;</span><span class="op" id="6692772">,</span>&nbsp;<span class="ident" id="6692774">caddr</span><span class="op" id="6692779">:</span>&nbsp;<span class="string" id="6692781">&#34;[::1]&#34;</span><span class="op" id="6692788">,</span>&nbsp;<span class="ident" id="6692790">ipv6</span><span class="op" id="6692794">:</span>&nbsp;<span class="builtintype" id="6692796">true</span><span class="op" id="6692800">}</span><span class="op" id="6692801">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692805">{</span><span class="ident" id="6692806">snet</span><span class="op" id="6692810">:</span>&nbsp;<span class="string" id="6692812">&#34;udp&#34;</span><span class="op" id="6692817">,</span>&nbsp;<span class="ident" id="6692819">saddr</span><span class="op" id="6692824">:</span>&nbsp;<span class="string" id="6692826">&#34;127.0.0.1&#34;</span><span class="op" id="6692837">,</span>&nbsp;<span class="ident" id="6692839">cnet</span><span class="op" id="6692843">:</span>&nbsp;<span class="string" id="6692845">&#34;udp&#34;</span><span class="op" id="6692850">,</span>&nbsp;<span class="ident" id="6692852">caddr</span><span class="op" id="6692857">:</span>&nbsp;<span class="string" id="6692859">&#34;127.0.0.1&#34;</span><span class="op" id="6692870">,</span>&nbsp;<span class="ident" id="6692872">dial</span><span class="op" id="6692876">:</span>&nbsp;<span class="builtintype" id="6692878">true</span><span class="op" id="6692882">}</span><span class="op" id="6692883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692886">{</span><span class="ident" id="6692887">snet</span><span class="op" id="6692891">:</span>&nbsp;<span class="string" id="6692893">&#34;udp&#34;</span><span class="op" id="6692898">,</span>&nbsp;<span class="ident" id="6692900">saddr</span><span class="op" id="6692905">:</span>&nbsp;<span class="string" id="6692907">&#34;127.0.0.1&#34;</span><span class="op" id="6692918">,</span>&nbsp;<span class="ident" id="6692920">cnet</span><span class="op" id="6692924">:</span>&nbsp;<span class="string" id="6692926">&#34;udp&#34;</span><span class="op" id="6692931">,</span>&nbsp;<span class="ident" id="6692933">caddr</span><span class="op" id="6692938">:</span>&nbsp;<span class="string" id="6692940">&#34;127.0.0.1&#34;</span><span class="op" id="6692951">,</span>&nbsp;<span class="ident" id="6692953">empty</span><span class="op" id="6692958">:</span>&nbsp;<span class="builtintype" id="6692960">true</span><span class="op" id="6692964">}</span><span class="op" id="6692965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692968">{</span><span class="ident" id="6692969">snet</span><span class="op" id="6692973">:</span>&nbsp;<span class="string" id="6692975">&#34;udp&#34;</span><span class="op" id="6692980">,</span>&nbsp;<span class="ident" id="6692982">saddr</span><span class="op" id="6692987">:</span>&nbsp;<span class="string" id="6692989">&#34;127.0.0.1&#34;</span><span class="op" id="6693000">,</span>&nbsp;<span class="ident" id="6693002">cnet</span><span class="op" id="6693006">:</span>&nbsp;<span class="string" id="6693008">&#34;udp&#34;</span><span class="op" id="6693013">,</span>&nbsp;<span class="ident" id="6693015">caddr</span><span class="op" id="6693020">:</span>&nbsp;<span class="string" id="6693022">&#34;127.0.0.1&#34;</span><span class="op" id="6693033">,</span>&nbsp;<span class="ident" id="6693035">dial</span><span class="op" id="6693039">:</span>&nbsp;<span class="builtintype" id="6693041">true</span><span class="op" id="6693045">,</span>&nbsp;<span class="ident" id="6693047">empty</span><span class="op" id="6693052">:</span>&nbsp;<span class="builtintype" id="6693054">true</span><span class="op" id="6693058">}</span><span class="op" id="6693059">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693063">{</span><span class="ident" id="6693064">snet</span><span class="op" id="6693068">:</span>&nbsp;<span class="string" id="6693070">&#34;udp&#34;</span><span class="op" id="6693075">,</span>&nbsp;<span class="ident" id="6693077">saddr</span><span class="op" id="6693082">:</span>&nbsp;<span class="string" id="6693084">&#34;[::1]&#34;</span><span class="op" id="6693091">,</span>&nbsp;<span class="ident" id="6693093">cnet</span><span class="op" id="6693097">:</span>&nbsp;<span class="string" id="6693099">&#34;udp&#34;</span><span class="op" id="6693104">,</span>&nbsp;<span class="ident" id="6693106">caddr</span><span class="op" id="6693111">:</span>&nbsp;<span class="string" id="6693113">&#34;[::1]&#34;</span><span class="op" id="6693120">,</span>&nbsp;<span class="ident" id="6693122">ipv6</span><span class="op" id="6693126">:</span>&nbsp;<span class="builtintype" id="6693128">true</span><span class="op" id="6693132">,</span>&nbsp;<span class="ident" id="6693134">dial</span><span class="op" id="6693138">:</span>&nbsp;<span class="builtintype" id="6693140">true</span><span class="op" id="6693144">}</span><span class="op" id="6693145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693148">{</span><span class="ident" id="6693149">snet</span><span class="op" id="6693153">:</span>&nbsp;<span class="string" id="6693155">&#34;udp&#34;</span><span class="op" id="6693160">,</span>&nbsp;<span class="ident" id="6693162">saddr</span><span class="op" id="6693167">:</span>&nbsp;<span class="string" id="6693169">&#34;[::1]&#34;</span><span class="op" id="6693176">,</span>&nbsp;<span class="ident" id="6693178">cnet</span><span class="op" id="6693182">:</span>&nbsp;<span class="string" id="6693184">&#34;udp&#34;</span><span class="op" id="6693189">,</span>&nbsp;<span class="ident" id="6693191">caddr</span><span class="op" id="6693196">:</span>&nbsp;<span class="string" id="6693198">&#34;[::1]&#34;</span><span class="op" id="6693205">,</span>&nbsp;<span class="ident" id="6693207">ipv6</span><span class="op" id="6693211">:</span>&nbsp;<span class="builtintype" id="6693213">true</span><span class="op" id="6693217">,</span>&nbsp;<span class="ident" id="6693219">empty</span><span class="op" id="6693224">:</span>&nbsp;<span class="builtintype" id="6693226">true</span><span class="op" id="6693230">}</span><span class="op" id="6693231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693234">{</span><span class="ident" id="6693235">snet</span><span class="op" id="6693239">:</span>&nbsp;<span class="string" id="6693241">&#34;udp&#34;</span><span class="op" id="6693246">,</span>&nbsp;<span class="ident" id="6693248">saddr</span><span class="op" id="6693253">:</span>&nbsp;<span class="string" id="6693255">&#34;[::1]&#34;</span><span class="op" id="6693262">,</span>&nbsp;<span class="ident" id="6693264">cnet</span><span class="op" id="6693268">:</span>&nbsp;<span class="string" id="6693270">&#34;udp&#34;</span><span class="op" id="6693275">,</span>&nbsp;<span class="ident" id="6693277">caddr</span><span class="op" id="6693282">:</span>&nbsp;<span class="string" id="6693284">&#34;[::1]&#34;</span><span class="op" id="6693291">,</span>&nbsp;<span class="ident" id="6693293">ipv6</span><span class="op" id="6693297">:</span>&nbsp;<span class="builtintype" id="6693299">true</span><span class="op" id="6693303">,</span>&nbsp;<span class="ident" id="6693305">dial</span><span class="op" id="6693309">:</span>&nbsp;<span class="builtintype" id="6693311">true</span><span class="op" id="6693315">,</span>&nbsp;<span class="ident" id="6693317">empty</span><span class="op" id="6693322">:</span>&nbsp;<span class="builtintype" id="6693324">true</span><span class="op" id="6693328">}</span><span class="op" id="6693329">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693333">{</span><span class="ident" id="6693334">snet</span><span class="op" id="6693338">:</span>&nbsp;<span class="string" id="6693340">&#34;unixgram&#34;</span><span class="op" id="6693350">,</span>&nbsp;<span class="ident" id="6693352">saddr</span><span class="op" id="6693357">:</span>&nbsp;<span class="ident" id="6693359">testUnixAddr</span><span class="op" id="6693371">(</span><span class="op" id="6693372">)</span><span class="op" id="6693373">,</span>&nbsp;<span class="ident" id="6693375">cnet</span><span class="op" id="6693379">:</span>&nbsp;<span class="string" id="6693381">&#34;unixgram&#34;</span><span class="op" id="6693391">,</span>&nbsp;<span class="ident" id="6693393">caddr</span><span class="op" id="6693398">:</span>&nbsp;<span class="ident" id="6693400">testUnixAddr</span><span class="op" id="6693412">(</span><span class="op" id="6693413">)</span><span class="op" id="6693414">}</span><span class="op" id="6693415">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693418">{</span><span class="ident" id="6693419">snet</span><span class="op" id="6693423">:</span>&nbsp;<span class="string" id="6693425">&#34;unixgram&#34;</span><span class="op" id="6693435">,</span>&nbsp;<span class="ident" id="6693437">saddr</span><span class="op" id="6693442">:</span>&nbsp;<span class="ident" id="6693444">testUnixAddr</span><span class="op" id="6693456">(</span><span class="op" id="6693457">)</span><span class="op" id="6693458">,</span>&nbsp;<span class="ident" id="6693460">cnet</span><span class="op" id="6693464">:</span>&nbsp;<span class="string" id="6693466">&#34;unixgram&#34;</span><span class="op" id="6693476">,</span>&nbsp;<span class="ident" id="6693478">caddr</span><span class="op" id="6693483">:</span>&nbsp;<span class="ident" id="6693485">testUnixAddr</span><span class="op" id="6693497">(</span><span class="op" id="6693498">)</span><span class="op" id="6693499">,</span>&nbsp;<span class="ident" id="6693501">dial</span><span class="op" id="6693505">:</span>&nbsp;<span class="builtintype" id="6693507">true</span><span class="op" id="6693511">}</span><span class="op" id="6693512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693515">{</span><span class="ident" id="6693516">snet</span><span class="op" id="6693520">:</span>&nbsp;<span class="string" id="6693522">&#34;unixgram&#34;</span><span class="op" id="6693532">,</span>&nbsp;<span class="ident" id="6693534">saddr</span><span class="op" id="6693539">:</span>&nbsp;<span class="ident" id="6693541">testUnixAddr</span><span class="op" id="6693553">(</span><span class="op" id="6693554">)</span><span class="op" id="6693555">,</span>&nbsp;<span class="ident" id="6693557">cnet</span><span class="op" id="6693561">:</span>&nbsp;<span class="string" id="6693563">&#34;unixgram&#34;</span><span class="op" id="6693573">,</span>&nbsp;<span class="ident" id="6693575">caddr</span><span class="op" id="6693580">:</span>&nbsp;<span class="ident" id="6693582">testUnixAddr</span><span class="op" id="6693594">(</span><span class="op" id="6693595">)</span><span class="op" id="6693596">,</span>&nbsp;<span class="ident" id="6693598">empty</span><span class="op" id="6693603">:</span>&nbsp;<span class="builtintype" id="6693605">true</span><span class="op" id="6693609">}</span><span class="op" id="6693610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693613">{</span><span class="ident" id="6693614">snet</span><span class="op" id="6693618">:</span>&nbsp;<span class="string" id="6693620">&#34;unixgram&#34;</span><span class="op" id="6693630">,</span>&nbsp;<span class="ident" id="6693632">saddr</span><span class="op" id="6693637">:</span>&nbsp;<span class="ident" id="6693639">testUnixAddr</span><span class="op" id="6693651">(</span><span class="op" id="6693652">)</span><span class="op" id="6693653">,</span>&nbsp;<span class="ident" id="6693655">cnet</span><span class="op" id="6693659">:</span>&nbsp;<span class="string" id="6693661">&#34;unixgram&#34;</span><span class="op" id="6693671">,</span>&nbsp;<span class="ident" id="6693673">caddr</span><span class="op" id="6693678">:</span>&nbsp;<span class="ident" id="6693680">testUnixAddr</span><span class="op" id="6693692">(</span><span class="op" id="6693693">)</span><span class="op" id="6693694">,</span>&nbsp;<span class="ident" id="6693696">dial</span><span class="op" id="6693700">:</span>&nbsp;<span class="builtintype" id="6693702">true</span><span class="op" id="6693706">,</span>&nbsp;<span class="ident" id="6693708">empty</span><span class="op" id="6693713">:</span>&nbsp;<span class="builtintype" id="6693715">true</span><span class="op" id="6693719">}</span><span class="op" id="6693720">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693724">{</span><span class="ident" id="6693725">snet</span><span class="op" id="6693729">:</span>&nbsp;<span class="string" id="6693731">&#34;unixgram&#34;</span><span class="op" id="6693741">,</span>&nbsp;<span class="ident" id="6693743">saddr</span><span class="op" id="6693748">:</span>&nbsp;<span class="string" id="6693750">&#34;@gotest6/net&#34;</span><span class="op" id="6693764">,</span>&nbsp;<span class="ident" id="6693766">cnet</span><span class="op" id="6693770">:</span>&nbsp;<span class="string" id="6693772">&#34;unixgram&#34;</span><span class="op" id="6693782">,</span>&nbsp;<span class="ident" id="6693784">caddr</span><span class="op" id="6693789">:</span>&nbsp;<span class="string" id="6693791">&#34;@gotest6/net.local&#34;</span><span class="op" id="6693811">,</span>&nbsp;<span class="ident" id="6693813">linuxOnly</span><span class="op" id="6693822">:</span>&nbsp;<span class="builtintype" id="6693824">true</span><span class="op" id="6693828">}</span><span class="op" id="6693829">,</span><br>
<span class="lineno">310</span><span class="op" id="6693831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6693834">func</span>&nbsp;<span class="ident" id="6693839">TestDatagramPacketConnServer</span><span class="op" id="6693867">(</span><span class="ident" id="6693868">t</span>&nbsp;<span class="op" id="6693870">*</span><span class="ident" id="6693871">testing</span><span class="op" id="6693878">.</span><span class="ident" id="6693879">T</span><span class="op" id="6693880">)</span>&nbsp;<span class="op" id="6693882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6693885">if</span>&nbsp;<span class="op" id="6693888">!</span><span class="op" id="6693889">*</span><span class="ident" id="6693890">testDatagram</span>&nbsp;<span class="op" id="6693903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6693907">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6693919">for</span>&nbsp;<span class="ident" id="6693923">_</span><span class="op" id="6693924">,</span>&nbsp;<span class="ident" id="6693926">tt</span>&nbsp;<span class="op" id="6693929">:=</span>&nbsp;<span class="keyword" id="6693932">range</span>&nbsp;<span class="ident" id="6693938">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6693968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6693972">if</span>&nbsp;<span class="ident" id="6693975">skipServerTest</span><span class="op" id="6693989">(</span><span class="ident" id="6693990">tt</span><span class="op" id="6693992">.</span><span class="ident" id="6693993">snet</span><span class="op" id="6693997">,</span>&nbsp;<span class="string" id="6693999">&#34;unixgram&#34;</span><span class="op" id="6694009">,</span>&nbsp;<span class="ident" id="6694011">tt</span><span class="op" id="6694013">.</span><span class="ident" id="6694014">saddr</span><span class="op" id="6694019">,</span>&nbsp;<span class="ident" id="6694021">tt</span><span class="op" id="6694023">.</span><span class="ident" id="6694024">ipv6</span><span class="op" id="6694028">,</span>&nbsp;<span class="ident" id="6694030">tt</span><span class="op" id="6694032">.</span><span class="ident" id="6694033">ipv4map</span><span class="op" id="6694040">,</span>&nbsp;<span class="ident" id="6694042">tt</span><span class="op" id="6694044">.</span><span class="ident" id="6694045">linuxOnly</span><span class="op" id="6694054">)</span>&nbsp;<span class="op" id="6694056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694061">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694077">listening</span>&nbsp;<span class="op" id="6694087">:=</span>&nbsp;<span class="builtinfunc" id="6694090">make</span><span class="op" id="6694094">(</span><span class="keyword" id="6694095">chan</span>&nbsp;<span class="builtintype" id="6694100">string</span><span class="op" id="6694106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694110">done</span>&nbsp;<span class="op" id="6694115">:=</span>&nbsp;<span class="builtinfunc" id="6694118">make</span><span class="op" id="6694122">(</span><span class="keyword" id="6694123">chan</span>&nbsp;<span class="builtintype" id="6694128">int</span><span class="op" id="6694131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694135">switch</span>&nbsp;<span class="ident" id="6694142">tt</span><span class="op" id="6694144">.</span><span class="ident" id="6694145">snet</span>&nbsp;<span class="op" id="6694150">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694154">case</span>&nbsp;<span class="string" id="6694159">&#34;udp&#34;</span><span class="op" id="6694164">,</span>&nbsp;<span class="string" id="6694166">&#34;udp4&#34;</span><span class="op" id="6694172">,</span>&nbsp;<span class="string" id="6694174">&#34;udp6&#34;</span><span class="op" id="6694180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694185">tt</span><span class="op" id="6694187">.</span><span class="ident" id="6694188">saddr</span>&nbsp;<span class="op" id="6694194">+=</span>&nbsp;<span class="string" id="6694197">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694204">case</span>&nbsp;<span class="string" id="6694209">&#34;unixgram&#34;</span><span class="op" id="6694219">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694224">os</span><span class="op" id="6694226">.</span><span class="ident" id="6694227">Remove</span><span class="op" id="6694233">(</span><span class="ident" id="6694234">tt</span><span class="op" id="6694236">.</span><span class="ident" id="6694237">saddr</span><span class="op" id="6694242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694247">os</span><span class="op" id="6694249">.</span><span class="ident" id="6694250">Remove</span><span class="op" id="6694256">(</span><span class="ident" id="6694257">tt</span><span class="op" id="6694259">.</span><span class="ident" id="6694260">caddr</span><span class="op" id="6694265">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694274">go</span>&nbsp;<span class="ident" id="6694277">runDatagramPacketConnServer</span><span class="op" id="6694304">(</span><span class="ident" id="6694305">t</span><span class="op" id="6694306">,</span>&nbsp;<span class="ident" id="6694308">tt</span><span class="op" id="6694310">.</span><span class="ident" id="6694311">snet</span><span class="op" id="6694315">,</span>&nbsp;<span class="ident" id="6694317">tt</span><span class="op" id="6694319">.</span><span class="ident" id="6694320">saddr</span><span class="op" id="6694325">,</span>&nbsp;<span class="ident" id="6694327">listening</span><span class="op" id="6694336">,</span>&nbsp;<span class="ident" id="6694338">done</span><span class="op" id="6694342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694346">taddr</span>&nbsp;<span class="op" id="6694352">:=</span>&nbsp;<span class="op" id="6694355">&lt;-</span><span class="ident" id="6694357">listening</span>&nbsp;<span class="comment" id="6694367">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694398">switch</span>&nbsp;<span class="ident" id="6694405">tt</span><span class="op" id="6694407">.</span><span class="ident" id="6694408">cnet</span>&nbsp;<span class="op" id="6694413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694417">case</span>&nbsp;<span class="string" id="6694422">&#34;udp&#34;</span><span class="op" id="6694427">,</span>&nbsp;<span class="string" id="6694429">&#34;udp4&#34;</span><span class="op" id="6694435">,</span>&nbsp;<span class="string" id="6694437">&#34;udp6&#34;</span><span class="op" id="6694443">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694448">_</span><span class="op" id="6694449">,</span>&nbsp;<span class="ident" id="6694451">port</span><span class="op" id="6694455">,</span>&nbsp;<span class="ident" id="6694457">err</span>&nbsp;<span class="op" id="6694461">:=</span>&nbsp;<span class="ident" id="6694464">SplitHostPort</span><span class="op" id="6694477">(</span><span class="ident" id="6694478">taddr</span><span class="op" id="6694483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694488">if</span>&nbsp;<span class="ident" id="6694491">err</span>&nbsp;<span class="op" id="6694495">!=</span>&nbsp;<span class="ident" id="6694498">nil</span>&nbsp;<span class="op" id="6694502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694508">t</span><span class="op" id="6694509">.</span><span class="ident" id="6694510">Fatalf</span><span class="op" id="6694516">(</span><span class="string" id="6694517">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6694547">,</span>&nbsp;<span class="ident" id="6694549">taddr</span><span class="op" id="6694554">,</span>&nbsp;<span class="ident" id="6694556">err</span><span class="op" id="6694559">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694569">taddr</span>&nbsp;<span class="op" id="6694575">=</span>&nbsp;<span class="ident" id="6694577">tt</span><span class="op" id="6694579">.</span><span class="ident" id="6694580">caddr</span>&nbsp;<span class="op" id="6694586">+</span>&nbsp;<span class="string" id="6694588">&#34;:&#34;</span>&nbsp;<span class="op" id="6694592">+</span>&nbsp;<span class="ident" id="6694594">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694602">tt</span><span class="op" id="6694604">.</span><span class="ident" id="6694605">caddr</span>&nbsp;<span class="op" id="6694611">+=</span>&nbsp;<span class="string" id="6694614">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694625">if</span>&nbsp;<span class="ident" id="6694628">tt</span><span class="op" id="6694630">.</span><span class="ident" id="6694631">dial</span>&nbsp;<span class="op" id="6694636">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694641">runDatagramConnClient</span><span class="op" id="6694662">(</span><span class="ident" id="6694663">t</span><span class="op" id="6694664">,</span>&nbsp;<span class="ident" id="6694666">tt</span><span class="op" id="6694668">.</span><span class="ident" id="6694669">cnet</span><span class="op" id="6694673">,</span>&nbsp;<span class="ident" id="6694675">tt</span><span class="op" id="6694677">.</span><span class="ident" id="6694678">caddr</span><span class="op" id="6694683">,</span>&nbsp;<span class="ident" id="6694685">taddr</span><span class="op" id="6694690">,</span>&nbsp;<span class="ident" id="6694692">tt</span><span class="op" id="6694694">.</span><span class="ident" id="6694695">empty</span><span class="op" id="6694700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694704">}</span>&nbsp;<span class="keyword" id="6694706">else</span>&nbsp;<span class="op" id="6694711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694716">runDatagramPacketConnClient</span><span class="op" id="6694743">(</span><span class="ident" id="6694744">t</span><span class="op" id="6694745">,</span>&nbsp;<span class="ident" id="6694747">tt</span><span class="op" id="6694749">.</span><span class="ident" id="6694750">cnet</span><span class="op" id="6694754">,</span>&nbsp;<span class="ident" id="6694756">tt</span><span class="op" id="6694758">.</span><span class="ident" id="6694759">caddr</span><span class="op" id="6694764">,</span>&nbsp;<span class="ident" id="6694766">taddr</span><span class="op" id="6694771">,</span>&nbsp;<span class="ident" id="6694773">tt</span><span class="op" id="6694775">.</span><span class="ident" id="6694776">empty</span><span class="op" id="6694781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694789">&lt;-</span><span class="ident" id="6694791">done</span>&nbsp;<span class="comment" id="6694796">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694821">&lt;-</span><span class="ident" id="6694823">done</span>&nbsp;<span class="comment" id="6694828">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694859">switch</span>&nbsp;<span class="ident" id="6694866">tt</span><span class="op" id="6694868">.</span><span class="ident" id="6694869">snet</span>&nbsp;<span class="op" id="6694874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694878">case</span>&nbsp;<span class="string" id="6694883">&#34;unixgram&#34;</span><span class="op" id="6694893">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694898">os</span><span class="op" id="6694900">.</span><span class="ident" id="6694901">Remove</span><span class="op" id="6694907">(</span><span class="ident" id="6694908">tt</span><span class="op" id="6694910">.</span><span class="ident" id="6694911">saddr</span><span class="op" id="6694916">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694921">os</span><span class="op" id="6694923">.</span><span class="ident" id="6694924">Remove</span><span class="op" id="6694930">(</span><span class="ident" id="6694931">tt</span><span class="op" id="6694933">.</span><span class="ident" id="6694934">caddr</span><span class="op" id="6694939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694946">}</span><br>
<span class="lineno"></span><span class="op" id="6694948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="6694951">func</span>&nbsp;<span class="ident" id="6694956">runDatagramPacketConnServer</span><span class="op" id="6694983">(</span><span class="ident" id="6694984">t</span>&nbsp;<span class="op" id="6694986">*</span><span class="ident" id="6694987">testing</span><span class="op" id="6694994">.</span><span class="ident" id="6694995">T</span><span class="op" id="6694996">,</span>&nbsp;<span class="ident" id="6694998">net</span><span class="op" id="6695001">,</span>&nbsp;<span class="ident" id="6695003">laddr</span>&nbsp;<span class="builtintype" id="6695009">string</span><span class="op" id="6695015">,</span>&nbsp;<span class="ident" id="6695017">listening</span>&nbsp;<span class="keyword" id="6695027">chan</span><span class="op" id="6695031">&lt;-</span>&nbsp;<span class="builtintype" id="6695034">string</span><span class="op" id="6695040">,</span>&nbsp;<span class="ident" id="6695042">done</span>&nbsp;<span class="keyword" id="6695047">chan</span><span class="op" id="6695051">&lt;-</span>&nbsp;<span class="builtintype" id="6695054">int</span><span class="op" id="6695057">)</span>&nbsp;<span class="op" id="6695059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695062">c</span><span class="op" id="6695063">,</span>&nbsp;<span class="ident" id="6695065">err</span>&nbsp;<span class="op" id="6695069">:=</span>&nbsp;<span class="ident" id="6695072">ListenPacket</span><span class="op" id="6695084">(</span><span class="ident" id="6695085">net</span><span class="op" id="6695088">,</span>&nbsp;<span class="ident" id="6695090">laddr</span><span class="op" id="6695095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695098">if</span>&nbsp;<span class="ident" id="6695101">err</span>&nbsp;<span class="op" id="6695105">!=</span>&nbsp;<span class="ident" id="6695108">nil</span>&nbsp;<span class="op" id="6695112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695116">t</span><span class="op" id="6695117">.</span><span class="ident" id="6695118">Errorf</span><span class="op" id="6695124">(</span><span class="string" id="6695125">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6695158">,</span>&nbsp;<span class="ident" id="6695160">net</span><span class="op" id="6695163">,</span>&nbsp;<span class="ident" id="6695165">laddr</span><span class="op" id="6695170">,</span>&nbsp;<span class="ident" id="6695172">err</span><span class="op" id="6695175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695179">listening</span>&nbsp;<span class="op" id="6695189">&lt;-</span>&nbsp;<span class="string" id="6695192">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695202">done</span>&nbsp;<span class="op" id="6695207">&lt;-</span>&nbsp;<span class="num" id="6695210">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695214">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6695222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695225">defer</span>&nbsp;<span class="ident" id="6695231">c</span><span class="op" id="6695232">.</span><span class="ident" id="6695233">Close</span><span class="op" id="6695238">(</span><span class="op" id="6695239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695242">listening</span>&nbsp;<span class="op" id="6695252">&lt;-</span>&nbsp;<span class="ident" id="6695255">c</span><span class="op" id="6695256">.</span><span class="ident" id="6695257">LocalAddr</span><span class="op" id="6695266">(</span><span class="op" id="6695267">)</span><span class="op" id="6695268">.</span><span class="ident" id="6695269">String</span><span class="op" id="6695275">(</span><span class="op" id="6695276">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695280">buf</span>&nbsp;<span class="op" id="6695284">:=</span>&nbsp;<span class="builtinfunc" id="6695287">make</span><span class="op" id="6695291">(</span><span class="op" id="6695292">[</span><span class="op" id="6695293">]</span><span class="builtintype" id="6695294">byte</span><span class="op" id="6695298">,</span>&nbsp;<span class="num" id="6695300">1024</span><span class="op" id="6695304">)</span><br>
<span class="lineno"></span><span class="ident" id="6695306">run</span><span class="op" id="6695309">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695312">for</span>&nbsp;<span class="op" id="6695316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695320">c</span><span class="op" id="6695321">.</span><span class="ident" id="6695322">SetReadDeadline</span><span class="op" id="6695337">(</span><span class="ident" id="6695338">time</span><span class="op" id="6695342">.</span><span class="ident" id="6695343">Now</span><span class="op" id="6695346">(</span><span class="op" id="6695347">)</span><span class="op" id="6695348">.</span><span class="ident" id="6695349">Add</span><span class="op" id="6695352">(</span><span class="num" id="6695353">10</span>&nbsp;<span class="op" id="6695356">*</span>&nbsp;<span class="ident" id="6695358">time</span><span class="op" id="6695362">.</span><span class="ident" id="6695363">Millisecond</span><span class="op" id="6695374">)</span><span class="op" id="6695375">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695379">n</span><span class="op" id="6695380">,</span>&nbsp;<span class="ident" id="6695382">ra</span><span class="op" id="6695384">,</span>&nbsp;<span class="ident" id="6695386">err</span>&nbsp;<span class="op" id="6695390">:=</span>&nbsp;<span class="ident" id="6695393">c</span><span class="op" id="6695394">.</span><span class="ident" id="6695395">ReadFrom</span><span class="op" id="6695403">(</span><span class="ident" id="6695404">buf</span><span class="op" id="6695407">[</span><span class="num" id="6695408">0</span><span class="op" id="6695409">:</span><span class="op" id="6695410">]</span><span class="op" id="6695411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695415">if</span>&nbsp;<span class="ident" id="6695418">nerr</span><span class="op" id="6695422">,</span>&nbsp;<span class="ident" id="6695424">ok</span>&nbsp;<span class="op" id="6695427">:=</span>&nbsp;<span class="ident" id="6695430">err</span><span class="op" id="6695433">.</span><span class="op" id="6695434">(</span><span class="ident" id="6695435">Error</span><span class="op" id="6695440">)</span><span class="op" id="6695441">;</span>&nbsp;<span class="ident" id="6695443">ok</span>&nbsp;<span class="op" id="6695446">&amp;&amp;</span>&nbsp;<span class="ident" id="6695449">nerr</span><span class="op" id="6695453">.</span><span class="ident" id="6695454">Timeout</span><span class="op" id="6695461">(</span><span class="op" id="6695462">)</span>&nbsp;<span class="op" id="6695464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695469">select</span>&nbsp;<span class="op" id="6695476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695481">case</span>&nbsp;<span class="ident" id="6695486">done</span>&nbsp;<span class="op" id="6695491">&lt;-</span>&nbsp;<span class="num" id="6695494">1</span><span class="op" id="6695495">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695501">break</span>&nbsp;<span class="ident" id="6695507">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695514">default</span><span class="op" id="6695521">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695527">continue</span>&nbsp;<span class="ident" id="6695536">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6695543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6695547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695551">if</span>&nbsp;<span class="ident" id="6695554">err</span>&nbsp;<span class="op" id="6695558">!=</span>&nbsp;<span class="ident" id="6695561">nil</span>&nbsp;<span class="op" id="6695565">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695570">break</span>&nbsp;<span class="ident" id="6695576">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6695582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695586">if</span>&nbsp;<span class="ident" id="6695589">_</span><span class="op" id="6695590">,</span>&nbsp;<span class="ident" id="6695592">err</span>&nbsp;<span class="op" id="6695596">=</span>&nbsp;<span class="ident" id="6695598">c</span><span class="op" id="6695599">.</span><span class="ident" id="6695600">WriteTo</span><span class="op" id="6695607">(</span><span class="ident" id="6695608">buf</span><span class="op" id="6695611">[</span><span class="num" id="6695612">0</span><span class="op" id="6695613">:</span><span class="ident" id="6695614">n</span><span class="op" id="6695615">]</span><span class="op" id="6695616">,</span>&nbsp;<span class="ident" id="6695618">ra</span><span class="op" id="6695620">)</span><span class="op" id="6695621">;</span>&nbsp;<span class="ident" id="6695623">err</span>&nbsp;<span class="op" id="6695627">!=</span>&nbsp;<span class="ident" id="6695630">nil</span>&nbsp;<span class="op" id="6695634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695639">t</span><span class="op" id="6695640">.</span><span class="ident" id="6695641">Errorf</span><span class="op" id="6695647">(</span><span class="string" id="6695648">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6695672">,</span>&nbsp;<span class="ident" id="6695674">ra</span><span class="op" id="6695676">,</span>&nbsp;<span class="ident" id="6695678">err</span><span class="op" id="6695681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695686">break</span>&nbsp;<span class="ident" id="6695692">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6695698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6695701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695704">done</span>&nbsp;<span class="op" id="6695709">&lt;-</span>&nbsp;<span class="num" id="6695712">1</span><br>
<span class="lineno"></span><span class="op" id="6695714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="6695717">func</span>&nbsp;<span class="ident" id="6695722">runDatagramConnClient</span><span class="op" id="6695743">(</span><span class="ident" id="6695744">t</span>&nbsp;<span class="op" id="6695746">*</span><span class="ident" id="6695747">testing</span><span class="op" id="6695754">.</span><span class="ident" id="6695755">T</span><span class="op" id="6695756">,</span>&nbsp;<span class="ident" id="6695758">net</span><span class="op" id="6695761">,</span>&nbsp;<span class="ident" id="6695763">laddr</span><span class="op" id="6695768">,</span>&nbsp;<span class="ident" id="6695770">taddr</span>&nbsp;<span class="builtintype" id="6695776">string</span><span class="op" id="6695782">,</span>&nbsp;<span class="ident" id="6695784">isEmpty</span>&nbsp;<span class="builtintype" id="6695792">bool</span><span class="op" id="6695796">)</span>&nbsp;<span class="op" id="6695798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695801">var</span>&nbsp;<span class="ident" id="6695805">c</span>&nbsp;<span class="ident" id="6695807">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695813">var</span>&nbsp;<span class="ident" id="6695817">err</span>&nbsp;<span class="builtintype" id="6695821">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695828">switch</span>&nbsp;<span class="ident" id="6695835">net</span>&nbsp;<span class="op" id="6695839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695842">case</span>&nbsp;<span class="string" id="6695847">&#34;udp&#34;</span><span class="op" id="6695852">,</span>&nbsp;<span class="string" id="6695854">&#34;udp4&#34;</span><span class="op" id="6695860">,</span>&nbsp;<span class="string" id="6695862">&#34;udp6&#34;</span><span class="op" id="6695868">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695872">c</span><span class="op" id="6695873">,</span>&nbsp;<span class="ident" id="6695875">err</span>&nbsp;<span class="op" id="6695879">=</span>&nbsp;<span class="ident" id="6695881">Dial</span><span class="op" id="6695885">(</span><span class="ident" id="6695886">net</span><span class="op" id="6695889">,</span>&nbsp;<span class="ident" id="6695891">taddr</span><span class="op" id="6695896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695900">if</span>&nbsp;<span class="ident" id="6695903">err</span>&nbsp;<span class="op" id="6695907">!=</span>&nbsp;<span class="ident" id="6695910">nil</span>&nbsp;<span class="op" id="6695914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695919">t</span><span class="op" id="6695920">.</span><span class="ident" id="6695921">Fatalf</span><span class="op" id="6695927">(</span><span class="string" id="6695928">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6695953">,</span>&nbsp;<span class="ident" id="6695955">net</span><span class="op" id="6695958">,</span>&nbsp;<span class="ident" id="6695960">taddr</span><span class="op" id="6695965">,</span>&nbsp;<span class="ident" id="6695967">err</span><span class="op" id="6695970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6695974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6695977">case</span>&nbsp;<span class="string" id="6695982">&#34;unixgram&#34;</span><span class="op" id="6695992">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6695996">c</span><span class="op" id="6695997">,</span>&nbsp;<span class="ident" id="6695999">err</span>&nbsp;<span class="op" id="6696003">=</span>&nbsp;<span class="ident" id="6696005">DialUnix</span><span class="op" id="6696013">(</span><span class="ident" id="6696014">net</span><span class="op" id="6696017">,</span>&nbsp;<span class="op" id="6696019">&amp;</span><span class="ident" id="6696020">UnixAddr</span><span class="op" id="6696028">{</span><span class="ident" id="6696029">Name</span><span class="op" id="6696033">:</span>&nbsp;<span class="ident" id="6696035">laddr</span><span class="op" id="6696040">,</span>&nbsp;<span class="ident" id="6696042">Net</span><span class="op" id="6696045">:</span>&nbsp;<span class="ident" id="6696047">net</span><span class="op" id="6696050">}</span><span class="op" id="6696051">,</span>&nbsp;<span class="op" id="6696053">&amp;</span><span class="ident" id="6696054">UnixAddr</span><span class="op" id="6696062">{</span><span class="ident" id="6696063">Name</span><span class="op" id="6696067">:</span>&nbsp;<span class="ident" id="6696069">taddr</span><span class="op" id="6696074">,</span>&nbsp;<span class="ident" id="6696076">Net</span><span class="op" id="6696079">:</span>&nbsp;<span class="ident" id="6696081">net</span><span class="op" id="6696084">}</span><span class="op" id="6696085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696089">if</span>&nbsp;<span class="ident" id="6696092">err</span>&nbsp;<span class="op" id="6696096">!=</span>&nbsp;<span class="ident" id="6696099">nil</span>&nbsp;<span class="op" id="6696103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696108">t</span><span class="op" id="6696109">.</span><span class="ident" id="6696110">Fatalf</span><span class="op" id="6696116">(</span><span class="string" id="6696117">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6696152">,</span>&nbsp;<span class="ident" id="6696154">net</span><span class="op" id="6696157">,</span>&nbsp;<span class="ident" id="6696159">laddr</span><span class="op" id="6696164">,</span>&nbsp;<span class="ident" id="6696166">taddr</span><span class="op" id="6696171">,</span>&nbsp;<span class="ident" id="6696173">err</span><span class="op" id="6696176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696183">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696186">defer</span>&nbsp;<span class="ident" id="6696192">c</span><span class="op" id="6696193">.</span><span class="ident" id="6696194">Close</span><span class="op" id="6696199">(</span><span class="op" id="6696200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696203">c</span><span class="op" id="6696204">.</span><span class="ident" id="6696205">SetReadDeadline</span><span class="op" id="6696220">(</span><span class="ident" id="6696221">time</span><span class="op" id="6696225">.</span><span class="ident" id="6696226">Now</span><span class="op" id="6696229">(</span><span class="op" id="6696230">)</span><span class="op" id="6696231">.</span><span class="ident" id="6696232">Add</span><span class="op" id="6696235">(</span><span class="num" id="6696236">1</span>&nbsp;<span class="op" id="6696238">*</span>&nbsp;<span class="ident" id="6696240">time</span><span class="op" id="6696244">.</span><span class="ident" id="6696245">Second</span><span class="op" id="6696251">)</span><span class="op" id="6696252">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696256">var</span>&nbsp;<span class="ident" id="6696260">wb</span>&nbsp;<span class="op" id="6696263">[</span><span class="op" id="6696264">]</span><span class="builtintype" id="6696265">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696271">if</span>&nbsp;<span class="op" id="6696274">!</span><span class="ident" id="6696275">isEmpty</span>&nbsp;<span class="op" id="6696283">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696287">wb</span>&nbsp;<span class="op" id="6696290">=</span>&nbsp;<span class="op" id="6696292">[</span><span class="op" id="6696293">]</span><span class="builtintype" id="6696294">byte</span><span class="op" id="6696298">(</span><span class="string" id="6696299">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6696329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696335">if</span>&nbsp;<span class="ident" id="6696338">n</span><span class="op" id="6696339">,</span>&nbsp;<span class="ident" id="6696341">err</span>&nbsp;<span class="op" id="6696345">:=</span>&nbsp;<span class="ident" id="6696348">c</span><span class="op" id="6696349">.</span><span class="ident" id="6696350">Write</span><span class="op" id="6696355">(</span><span class="ident" id="6696356">wb</span><span class="op" id="6696358">[</span><span class="num" id="6696359">0</span><span class="op" id="6696360">:</span><span class="op" id="6696361">]</span><span class="op" id="6696362">)</span><span class="op" id="6696363">;</span>&nbsp;<span class="ident" id="6696365">err</span>&nbsp;<span class="op" id="6696369">!=</span>&nbsp;<span class="ident" id="6696372">nil</span>&nbsp;<span class="op" id="6696376">||</span>&nbsp;<span class="ident" id="6696379">n</span>&nbsp;<span class="op" id="6696381">!=</span>&nbsp;<span class="builtinfunc" id="6696384">len</span><span class="op" id="6696387">(</span><span class="ident" id="6696388">wb</span><span class="op" id="6696390">)</span>&nbsp;<span class="op" id="6696392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696396">t</span><span class="op" id="6696397">.</span><span class="ident" id="6696398">Fatalf</span><span class="op" id="6696404">(</span><span class="string" id="6696405">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6696443">,</span>&nbsp;<span class="ident" id="6696445">n</span><span class="op" id="6696446">,</span>&nbsp;<span class="ident" id="6696448">err</span><span class="op" id="6696451">,</span>&nbsp;<span class="builtinfunc" id="6696453">len</span><span class="op" id="6696456">(</span><span class="ident" id="6696457">wb</span><span class="op" id="6696459">)</span><span class="op" id="6696460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696463">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696467">rb</span>&nbsp;<span class="op" id="6696470">:=</span>&nbsp;<span class="builtinfunc" id="6696473">make</span><span class="op" id="6696477">(</span><span class="op" id="6696478">[</span><span class="op" id="6696479">]</span><span class="builtintype" id="6696480">byte</span><span class="op" id="6696484">,</span>&nbsp;<span class="num" id="6696486">1024</span><span class="op" id="6696490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696493">if</span>&nbsp;<span class="ident" id="6696496">n</span><span class="op" id="6696497">,</span>&nbsp;<span class="ident" id="6696499">err</span>&nbsp;<span class="op" id="6696503">:=</span>&nbsp;<span class="ident" id="6696506">c</span><span class="op" id="6696507">.</span><span class="ident" id="6696508">Read</span><span class="op" id="6696512">(</span><span class="ident" id="6696513">rb</span><span class="op" id="6696515">[</span><span class="num" id="6696516">0</span><span class="op" id="6696517">:</span><span class="op" id="6696518">]</span><span class="op" id="6696519">)</span><span class="op" id="6696520">;</span>&nbsp;<span class="ident" id="6696522">err</span>&nbsp;<span class="op" id="6696526">!=</span>&nbsp;<span class="ident" id="6696529">nil</span>&nbsp;<span class="op" id="6696533">||</span>&nbsp;<span class="ident" id="6696536">n</span>&nbsp;<span class="op" id="6696538">!=</span>&nbsp;<span class="builtinfunc" id="6696541">len</span><span class="op" id="6696544">(</span><span class="ident" id="6696545">wb</span><span class="op" id="6696547">)</span>&nbsp;<span class="op" id="6696549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696553">t</span><span class="op" id="6696554">.</span><span class="ident" id="6696555">Fatalf</span><span class="op" id="6696561">(</span><span class="string" id="6696562">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6696599">,</span>&nbsp;<span class="ident" id="6696601">n</span><span class="op" id="6696602">,</span>&nbsp;<span class="ident" id="6696604">err</span><span class="op" id="6696607">,</span>&nbsp;<span class="builtinfunc" id="6696609">len</span><span class="op" id="6696612">(</span><span class="ident" id="6696613">wb</span><span class="op" id="6696615">)</span><span class="op" id="6696616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696619">}</span><br>
<span class="lineno">425</span><span class="op" id="6696621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6696624">func</span>&nbsp;<span class="ident" id="6696629">runDatagramPacketConnClient</span><span class="op" id="6696656">(</span><span class="ident" id="6696657">t</span>&nbsp;<span class="op" id="6696659">*</span><span class="ident" id="6696660">testing</span><span class="op" id="6696667">.</span><span class="ident" id="6696668">T</span><span class="op" id="6696669">,</span>&nbsp;<span class="ident" id="6696671">net</span><span class="op" id="6696674">,</span>&nbsp;<span class="ident" id="6696676">laddr</span><span class="op" id="6696681">,</span>&nbsp;<span class="ident" id="6696683">taddr</span>&nbsp;<span class="builtintype" id="6696689">string</span><span class="op" id="6696695">,</span>&nbsp;<span class="ident" id="6696697">isEmpty</span>&nbsp;<span class="builtintype" id="6696705">bool</span><span class="op" id="6696709">)</span>&nbsp;<span class="op" id="6696711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696714">var</span>&nbsp;<span class="ident" id="6696718">ra</span>&nbsp;<span class="ident" id="6696721">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696727">var</span>&nbsp;<span class="ident" id="6696731">err</span>&nbsp;<span class="builtintype" id="6696735">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696742">switch</span>&nbsp;<span class="ident" id="6696749">net</span>&nbsp;<span class="op" id="6696753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696756">case</span>&nbsp;<span class="string" id="6696761">&#34;udp&#34;</span><span class="op" id="6696766">,</span>&nbsp;<span class="string" id="6696768">&#34;udp4&#34;</span><span class="op" id="6696774">,</span>&nbsp;<span class="string" id="6696776">&#34;udp6&#34;</span><span class="op" id="6696782">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696786">ra</span><span class="op" id="6696788">,</span>&nbsp;<span class="ident" id="6696790">err</span>&nbsp;<span class="op" id="6696794">=</span>&nbsp;<span class="ident" id="6696796">ResolveUDPAddr</span><span class="op" id="6696810">(</span><span class="ident" id="6696811">net</span><span class="op" id="6696814">,</span>&nbsp;<span class="ident" id="6696816">taddr</span><span class="op" id="6696821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696825">if</span>&nbsp;<span class="ident" id="6696828">err</span>&nbsp;<span class="op" id="6696832">!=</span>&nbsp;<span class="ident" id="6696835">nil</span>&nbsp;<span class="op" id="6696839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696844">t</span><span class="op" id="6696845">.</span><span class="ident" id="6696846">Fatalf</span><span class="op" id="6696852">(</span><span class="string" id="6696853">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6696888">,</span>&nbsp;<span class="ident" id="6696890">net</span><span class="op" id="6696893">,</span>&nbsp;<span class="ident" id="6696895">taddr</span><span class="op" id="6696900">,</span>&nbsp;<span class="ident" id="6696902">err</span><span class="op" id="6696905">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696912">case</span>&nbsp;<span class="string" id="6696917">&#34;unixgram&#34;</span><span class="op" id="6696927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696931">ra</span><span class="op" id="6696933">,</span>&nbsp;<span class="ident" id="6696935">err</span>&nbsp;<span class="op" id="6696939">=</span>&nbsp;<span class="ident" id="6696941">ResolveUnixAddr</span><span class="op" id="6696956">(</span><span class="ident" id="6696957">net</span><span class="op" id="6696960">,</span>&nbsp;<span class="ident" id="6696962">taddr</span><span class="op" id="6696967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696971">if</span>&nbsp;<span class="ident" id="6696974">err</span>&nbsp;<span class="op" id="6696978">!=</span>&nbsp;<span class="ident" id="6696981">nil</span>&nbsp;<span class="op" id="6696985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696990">t</span><span class="op" id="6696991">.</span><span class="ident" id="6696992">Fatalf</span><span class="op" id="6696998">(</span><span class="string" id="6696999">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6697035">,</span>&nbsp;<span class="ident" id="6697037">net</span><span class="op" id="6697040">,</span>&nbsp;<span class="ident" id="6697042">taddr</span><span class="op" id="6697047">,</span>&nbsp;<span class="ident" id="6697049">err</span><span class="op" id="6697052">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697062">c</span><span class="op" id="6697063">,</span>&nbsp;<span class="ident" id="6697065">err</span>&nbsp;<span class="op" id="6697069">:=</span>&nbsp;<span class="ident" id="6697072">ListenPacket</span><span class="op" id="6697084">(</span><span class="ident" id="6697085">net</span><span class="op" id="6697088">,</span>&nbsp;<span class="ident" id="6697090">laddr</span><span class="op" id="6697095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697098">if</span>&nbsp;<span class="ident" id="6697101">err</span>&nbsp;<span class="op" id="6697105">!=</span>&nbsp;<span class="ident" id="6697108">nil</span>&nbsp;<span class="op" id="6697112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697116">t</span><span class="op" id="6697117">.</span><span class="ident" id="6697118">Fatalf</span><span class="op" id="6697124">(</span><span class="string" id="6697125">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="6697157">,</span>&nbsp;<span class="ident" id="6697159">net</span><span class="op" id="6697162">,</span>&nbsp;<span class="ident" id="6697164">laddr</span><span class="op" id="6697169">,</span>&nbsp;<span class="ident" id="6697171">err</span><span class="op" id="6697174">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697180">defer</span>&nbsp;<span class="ident" id="6697186">c</span><span class="op" id="6697187">.</span><span class="ident" id="6697188">Close</span><span class="op" id="6697193">(</span><span class="op" id="6697194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697197">c</span><span class="op" id="6697198">.</span><span class="ident" id="6697199">SetReadDeadline</span><span class="op" id="6697214">(</span><span class="ident" id="6697215">time</span><span class="op" id="6697219">.</span><span class="ident" id="6697220">Now</span><span class="op" id="6697223">(</span><span class="op" id="6697224">)</span><span class="op" id="6697225">.</span><span class="ident" id="6697226">Add</span><span class="op" id="6697229">(</span><span class="num" id="6697230">1</span>&nbsp;<span class="op" id="6697232">*</span>&nbsp;<span class="ident" id="6697234">time</span><span class="op" id="6697238">.</span><span class="ident" id="6697239">Second</span><span class="op" id="6697245">)</span><span class="op" id="6697246">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697250">var</span>&nbsp;<span class="ident" id="6697254">wb</span>&nbsp;<span class="op" id="6697257">[</span><span class="op" id="6697258">]</span><span class="builtintype" id="6697259">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697265">if</span>&nbsp;<span class="op" id="6697268">!</span><span class="ident" id="6697269">isEmpty</span>&nbsp;<span class="op" id="6697277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697281">wb</span>&nbsp;<span class="op" id="6697284">=</span>&nbsp;<span class="op" id="6697286">[</span><span class="op" id="6697287">]</span><span class="builtintype" id="6697288">byte</span><span class="op" id="6697292">(</span><span class="string" id="6697293">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="6697337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697343">if</span>&nbsp;<span class="ident" id="6697346">n</span><span class="op" id="6697347">,</span>&nbsp;<span class="ident" id="6697349">err</span>&nbsp;<span class="op" id="6697353">:=</span>&nbsp;<span class="ident" id="6697356">c</span><span class="op" id="6697357">.</span><span class="ident" id="6697358">WriteTo</span><span class="op" id="6697365">(</span><span class="ident" id="6697366">wb</span><span class="op" id="6697368">[</span><span class="num" id="6697369">0</span><span class="op" id="6697370">:</span><span class="op" id="6697371">]</span><span class="op" id="6697372">,</span>&nbsp;<span class="ident" id="6697374">ra</span><span class="op" id="6697376">)</span><span class="op" id="6697377">;</span>&nbsp;<span class="ident" id="6697379">err</span>&nbsp;<span class="op" id="6697383">!=</span>&nbsp;<span class="ident" id="6697386">nil</span>&nbsp;<span class="op" id="6697390">||</span>&nbsp;<span class="ident" id="6697393">n</span>&nbsp;<span class="op" id="6697395">!=</span>&nbsp;<span class="builtinfunc" id="6697398">len</span><span class="op" id="6697401">(</span><span class="ident" id="6697402">wb</span><span class="op" id="6697404">)</span>&nbsp;<span class="op" id="6697406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697410">t</span><span class="op" id="6697411">.</span><span class="ident" id="6697412">Fatalf</span><span class="op" id="6697418">(</span><span class="string" id="6697419">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6697463">,</span>&nbsp;<span class="ident" id="6697465">ra</span><span class="op" id="6697467">,</span>&nbsp;<span class="ident" id="6697469">n</span><span class="op" id="6697470">,</span>&nbsp;<span class="ident" id="6697472">err</span><span class="op" id="6697475">,</span>&nbsp;<span class="builtinfunc" id="6697477">len</span><span class="op" id="6697480">(</span><span class="ident" id="6697481">wb</span><span class="op" id="6697483">)</span><span class="op" id="6697484">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697491">rb</span>&nbsp;<span class="op" id="6697494">:=</span>&nbsp;<span class="builtinfunc" id="6697497">make</span><span class="op" id="6697501">(</span><span class="op" id="6697502">[</span><span class="op" id="6697503">]</span><span class="builtintype" id="6697504">byte</span><span class="op" id="6697508">,</span>&nbsp;<span class="num" id="6697510">1024</span><span class="op" id="6697514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697517">if</span>&nbsp;<span class="ident" id="6697520">n</span><span class="op" id="6697521">,</span>&nbsp;<span class="ident" id="6697523">_</span><span class="op" id="6697524">,</span>&nbsp;<span class="ident" id="6697526">err</span>&nbsp;<span class="op" id="6697530">:=</span>&nbsp;<span class="ident" id="6697533">c</span><span class="op" id="6697534">.</span><span class="ident" id="6697535">ReadFrom</span><span class="op" id="6697543">(</span><span class="ident" id="6697544">rb</span><span class="op" id="6697546">[</span><span class="num" id="6697547">0</span><span class="op" id="6697548">:</span><span class="op" id="6697549">]</span><span class="op" id="6697550">)</span><span class="op" id="6697551">;</span>&nbsp;<span class="ident" id="6697553">err</span>&nbsp;<span class="op" id="6697557">!=</span>&nbsp;<span class="ident" id="6697560">nil</span>&nbsp;<span class="op" id="6697564">||</span>&nbsp;<span class="ident" id="6697567">n</span>&nbsp;<span class="op" id="6697569">!=</span>&nbsp;<span class="builtinfunc" id="6697572">len</span><span class="op" id="6697575">(</span><span class="ident" id="6697576">wb</span><span class="op" id="6697578">)</span>&nbsp;<span class="op" id="6697580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697584">t</span><span class="op" id="6697585">.</span><span class="ident" id="6697586">Fatalf</span><span class="op" id="6697592">(</span><span class="string" id="6697593">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6697634">,</span>&nbsp;<span class="ident" id="6697636">n</span><span class="op" id="6697637">,</span>&nbsp;<span class="ident" id="6697639">err</span><span class="op" id="6697642">,</span>&nbsp;<span class="builtinfunc" id="6697644">len</span><span class="op" id="6697647">(</span><span class="ident" id="6697648">wb</span><span class="op" id="6697650">)</span><span class="op" id="6697651">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697654">}</span><br>
<span class="lineno"></span><span class="op" id="6697656">}</span>
</div>
</body>
</html>
