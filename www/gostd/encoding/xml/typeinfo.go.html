<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/xml</h2>
<ul>
<li><a href="/gostd/encoding/xml/atom_test.go.html">atom_test.go</a></li>
<li><a href="/gostd/encoding/xml/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/xml/marshal.go.html">marshal.go</a></li>
<li><a href="/gostd/encoding/xml/marshal_test.go.html">marshal_test.go</a></li>
<li><a href="/gostd/encoding/xml/read.go.html">read.go</a></li>
<li><a href="/gostd/encoding/xml/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/encoding/xml/typeinfo.go.html" class="current">typeinfo.go</a></li>
<li><a href="/gostd/encoding/xml/xml.go.html">xml.go</a></li>
<li><a href="/gostd/encoding/xml/xml_test.go.html">xml_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6231496">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6231552">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6231606">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6231657">package</span>&nbsp;<span class="ident" id="6231665">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6231670">import</span>&nbsp;<span class="op" id="6231677">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6231680">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6231687">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6231698">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6231709">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="6231716">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6231719">//&nbsp;typeInfo&nbsp;holds&nbsp;details&nbsp;for&nbsp;the&nbsp;xml&nbsp;representation&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno">15</span><span class="keyword" id="6231783">type</span>&nbsp;<span class="ident" id="6231788">typeInfo</span>&nbsp;<span class="keyword" id="6231797">struct</span>&nbsp;<span class="op" id="6231804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6231807">xmlname</span>&nbsp;<span class="op" id="6231815">*</span><span class="ident" id="6231816"><a href="/gostd/encoding/xml/typeinfo.go.html#6231928">fieldInfo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6231827">fields</span>&nbsp;&nbsp;<span class="op" id="6231835">[</span><span class="op" id="6231836">]</span><span class="ident" id="6231837"><a href="/gostd/encoding/xml/typeinfo.go.html#6231928">fieldInfo</a></span><br>
<span class="lineno"></span><span class="op" id="6231847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6231850">//&nbsp;fieldInfo&nbsp;holds&nbsp;details&nbsp;for&nbsp;the&nbsp;xml&nbsp;representation&nbsp;of&nbsp;a&nbsp;single&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="6231923">type</span>&nbsp;<span class="ident" id="6231928">fieldInfo</span>&nbsp;<span class="keyword" id="6231938">struct</span>&nbsp;<span class="op" id="6231945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6231948">idx</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6231956">[</span><span class="op" id="6231957">]</span><span class="builtintype" id="6231958">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6231963">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6231971">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6231979">xmlns</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6231987">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6231995">flags</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6232003"><a href="/gostd/encoding/xml/typeinfo.go.html#6232040">fieldFlags</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232015">parents</span>&nbsp;<span class="op" id="6232023">[</span><span class="op" id="6232024">]</span><span class="builtintype" id="6232025">string</span><br>
<span class="lineno"></span><span class="op" id="6232032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6232035">type</span>&nbsp;<span class="ident" id="6232040">fieldFlags</span>&nbsp;<span class="builtintype" id="6232051">int</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="6232056">const</span>&nbsp;<span class="op" id="6232062">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232065">fElement</span>&nbsp;<span class="ident" id="6232074"><a href="/gostd/encoding/xml/typeinfo.go.html#6232040">fieldFlags</a></span>&nbsp;<span class="op" id="6232085">=</span>&nbsp;<span class="num" id="6232087">1</span>&nbsp;<span class="op" id="6232089">&lt;&lt;</span>&nbsp;<span class="ident" id="6232092">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232098">fAttr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232105">fCharData</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232116">fInnerXml</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232127">fComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232137">fAny</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232144">fOmitEmpty</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232157">fMode</span>&nbsp;<span class="op" id="6232163">=</span>&nbsp;<span class="ident" id="6232165"><a href="/gostd/encoding/xml/typeinfo.go.html#6232065">fElement</a></span>&nbsp;<span class="op" id="6232174">|</span>&nbsp;<span class="ident" id="6232176"><a href="/gostd/encoding/xml/typeinfo.go.html#6232098">fAttr</a></span>&nbsp;<span class="op" id="6232182">|</span>&nbsp;<span class="ident" id="6232184"><a href="/gostd/encoding/xml/typeinfo.go.html#6232105">fCharData</a></span>&nbsp;<span class="op" id="6232194">|</span>&nbsp;<span class="ident" id="6232196"><a href="/gostd/encoding/xml/typeinfo.go.html#6232116">fInnerXml</a></span>&nbsp;<span class="op" id="6232206">|</span>&nbsp;<span class="ident" id="6232208"><a href="/gostd/encoding/xml/typeinfo.go.html#6232127">fComment</a></span>&nbsp;<span class="op" id="6232217">|</span>&nbsp;<span class="ident" id="6232219"><a href="/gostd/encoding/xml/typeinfo.go.html#6232137">fAny</a></span><br>
<span class="lineno"></span><span class="op" id="6232224">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6232227">var</span>&nbsp;<span class="ident" id="6232231">tinfoMap</span>&nbsp;<span class="op" id="6232240">=</span>&nbsp;<span class="builtinfunc" id="6232242">make</span><span class="op" id="6232246">(</span><span class="keyword" id="6232247">map</span><span class="op" id="6232250">[</span><span class="ident" id="6232251"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6232258">.</span><span class="ident" id="6232259"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="6232263">]</span><span class="op" id="6232264">*</span><span class="ident" id="6232265"><a href="/gostd/encoding/xml/typeinfo.go.html#6231788">typeInfo</a></span><span class="op" id="6232273">)</span><br>
<span class="lineno">45</span><span class="keyword" id="6232275">var</span>&nbsp;<span class="ident" id="6232279">tinfoLock</span>&nbsp;<span class="ident" id="6232289"><a href="/gostd/encoding/xml/typeinfo.go.html#6231709">sync</a></span><span class="op" id="6232293">.</span><span class="ident" id="6232294"><a href="/gostd/sync/rwmutex.go.html#1456076">RWMutex</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6232303">var</span>&nbsp;<span class="ident" id="6232307">nameType</span>&nbsp;<span class="op" id="6232316">=</span>&nbsp;<span class="ident" id="6232318"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6232325">.</span><span class="ident" id="6232326"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="6232332">(</span><span class="ident" id="6232333"><a href="/gostd/encoding/xml/xml.go.html#6241995">Name</a></span><span class="op" id="6232337">{</span><span class="op" id="6232338">}</span><span class="op" id="6232339">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6232342">//&nbsp;getTypeInfo&nbsp;returns&nbsp;the&nbsp;typeInfo&nbsp;structure&nbsp;with&nbsp;details&nbsp;necessary</span><br>
<span class="lineno">50</span><span class="comment" id="6232411">//&nbsp;for&nbsp;marshalling&nbsp;and&nbsp;unmarshalling&nbsp;typ.</span><br>
<span class="lineno"></span><span class="keyword" id="6232453">func</span>&nbsp;<span class="ident" id="6232458">getTypeInfo</span><span class="op" id="6232469">(</span><span class="ident" id="6232470">typ</span>&nbsp;<span class="ident" id="6232474"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6232481">.</span><span class="ident" id="6232482"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="6232486">)</span>&nbsp;<span class="op" id="6232488">(</span><span class="op" id="6232489">*</span><span class="ident" id="6232490"><a href="/gostd/encoding/xml/typeinfo.go.html#6231788">typeInfo</a></span><span class="op" id="6232498">,</span>&nbsp;<span class="builtintype" id="6232500">error</span><span class="op" id="6232505">)</span>&nbsp;<span class="op" id="6232507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232510"><a href="/gostd/encoding/xml/typeinfo.go.html#6232279">tinfoLock</a></span><span class="op" id="6232519">.</span><span class="ident" id="6232520"><a href="/gostd/sync/rwmutex.go.html#1456490">RLock</a></span><span class="op" id="6232525">(</span><span class="op" id="6232526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232529">tinfo</span><span class="op" id="6232534">,</span>&nbsp;<span class="ident" id="6232536">ok</span>&nbsp;<span class="op" id="6232539">:=</span>&nbsp;<span class="ident" id="6232542"><a href="/gostd/encoding/xml/typeinfo.go.html#6232231">tinfoMap</a></span><span class="op" id="6232550">[</span><span class="ident" id="6232551"><a href="/gostd/encoding/xml/typeinfo.go.html#6232470">typ</a></span><span class="op" id="6232554">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232557"><a href="/gostd/encoding/xml/typeinfo.go.html#6232279">tinfoLock</a></span><span class="op" id="6232566">.</span><span class="ident" id="6232567"><a href="/gostd/sync/rwmutex.go.html#1456952">RUnlock</a></span><span class="op" id="6232574">(</span><span class="op" id="6232575">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6232578">if</span>&nbsp;<span class="ident" id="6232581"><a href="/gostd/encoding/xml/typeinfo.go.html#6232536">ok</a></span>&nbsp;<span class="op" id="6232584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6232588">return</span>&nbsp;<span class="ident" id="6232595"><a href="/gostd/encoding/xml/typeinfo.go.html#6232529">tinfo</a></span><span class="op" id="6232600">,</span>&nbsp;<span class="builtintype" id="6232602">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6232607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232610"><a href="/gostd/encoding/xml/typeinfo.go.html#6232529">tinfo</a></span>&nbsp;<span class="op" id="6232616">=</span>&nbsp;<span class="op" id="6232618">&amp;</span><span class="ident" id="6232619"><a href="/gostd/encoding/xml/typeinfo.go.html#6231788">typeInfo</a></span><span class="op" id="6232627">{</span><span class="op" id="6232628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6232631">if</span>&nbsp;<span class="ident" id="6232634"><a href="/gostd/encoding/xml/typeinfo.go.html#6232470">typ</a></span><span class="op" id="6232637">.</span><span class="ident" id="6232638"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6232642">(</span><span class="op" id="6232643">)</span>&nbsp;<span class="op" id="6232645">==</span>&nbsp;<span class="ident" id="6232648"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6232655">.</span><span class="ident" id="6232656"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span>&nbsp;<span class="op" id="6232663">&amp;&amp;</span>&nbsp;<span class="ident" id="6232666"><a href="/gostd/encoding/xml/typeinfo.go.html#6232470">typ</a></span>&nbsp;<span class="op" id="6232670">!=</span>&nbsp;<span class="ident" id="6232673"><a href="/gostd/encoding/xml/typeinfo.go.html#6232307">nameType</a></span>&nbsp;<span class="op" id="6232682">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232686">n</span>&nbsp;<span class="op" id="6232688">:=</span>&nbsp;<span class="ident" id="6232691"><a href="/gostd/encoding/xml/typeinfo.go.html#6232470">typ</a></span><span class="op" id="6232694">.</span><span class="ident" id="6232695"><a href="/gostd/reflect/type.go.html#2786550">NumField</a></span><span class="op" id="6232703">(</span><span class="op" id="6232704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6232708">for</span>&nbsp;<span class="ident" id="6232712">i</span>&nbsp;<span class="op" id="6232714">:=</span>&nbsp;<span class="num" id="6232717">0</span><span class="op" id="6232718">;</span>&nbsp;<span class="ident" id="6232720"><a href="/gostd/encoding/xml/typeinfo.go.html#6232712">i</a></span>&nbsp;<span class="op" id="6232722">&lt;</span>&nbsp;<span class="ident" id="6232724"><a href="/gostd/encoding/xml/typeinfo.go.html#6232686">n</a></span><span class="op" id="6232725">;</span>&nbsp;<span class="ident" id="6232727"><a href="/gostd/encoding/xml/typeinfo.go.html#6232712">i</a></span><span class="op" id="6232728">++</span>&nbsp;<span class="op" id="6232731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232736">f</span>&nbsp;<span class="op" id="6232738">:=</span>&nbsp;<span class="ident" id="6232741"><a href="/gostd/encoding/xml/typeinfo.go.html#6232470">typ</a></span><span class="op" id="6232744">.</span><span class="ident" id="6232745"><a href="/gostd/reflect/type.go.html#2785427">Field</a></span><span class="op" id="6232750">(</span><span class="ident" id="6232751"><a href="/gostd/encoding/xml/typeinfo.go.html#6232712">i</a></span><span class="op" id="6232752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6232757">if</span>&nbsp;<span class="ident" id="6232760"><a href="/gostd/encoding/xml/typeinfo.go.html#6232736">f</a></span><span class="op" id="6232761">.</span><span class="ident" id="6232762"><a href="/gostd/reflect/type.go.html#2801017">PkgPath</a></span>&nbsp;<span class="op" id="6232770">!=</span>&nbsp;<span class="string" id="6232773">&#34;&#34;</span>&nbsp;<span class="op" id="6232776">||</span>&nbsp;<span class="ident" id="6232779"><a href="/gostd/encoding/xml/typeinfo.go.html#6232736">f</a></span><span class="op" id="6232780">.</span><span class="ident" id="6232781"><a href="/gostd/reflect/type.go.html#2801069">Tag</a></span><span class="op" id="6232784">.</span><span class="ident" id="6232785"><a href="/gostd/reflect/type.go.html#2801940">Get</a></span><span class="op" id="6232788">(</span><span class="string" id="6232789">&#34;xml&#34;</span><span class="op" id="6232794">)</span>&nbsp;<span class="op" id="6232796">==</span>&nbsp;<span class="string" id="6232799">&#34;-&#34;</span>&nbsp;<span class="op" id="6232803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6232809">continue</span>&nbsp;<span class="comment" id="6232818">//&nbsp;Private&nbsp;field</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6232838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6232844">//&nbsp;For&nbsp;embedded&nbsp;structs,&nbsp;embed&nbsp;its&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6232890">if</span>&nbsp;<span class="ident" id="6232893"><a href="/gostd/encoding/xml/typeinfo.go.html#6232736">f</a></span><span class="op" id="6232894">.</span><span class="ident" id="6232895"><a href="/gostd/reflect/type.go.html#2801226">Anonymous</a></span>&nbsp;<span class="op" id="6232905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232911">t</span>&nbsp;<span class="op" id="6232913">:=</span>&nbsp;<span class="ident" id="6232916"><a href="/gostd/encoding/xml/typeinfo.go.html#6232736">f</a></span><span class="op" id="6232917">.</span><span class="ident" id="6232918"><a href="/gostd/reflect/type.go.html#2801034">Type</a></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6232927">if</span>&nbsp;<span class="ident" id="6232930"><a href="/gostd/encoding/xml/typeinfo.go.html#6232911">t</a></span><span class="op" id="6232931">.</span><span class="ident" id="6232932"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6232936">(</span><span class="op" id="6232937">)</span>&nbsp;<span class="op" id="6232939">==</span>&nbsp;<span class="ident" id="6232942"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6232949">.</span><span class="ident" id="6232950"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="6232954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6232961"><a href="/gostd/encoding/xml/typeinfo.go.html#6232911">t</a></span>&nbsp;<span class="op" id="6232963">=</span>&nbsp;<span class="ident" id="6232965"><a href="/gostd/encoding/xml/typeinfo.go.html#6232911">t</a></span><span class="op" id="6232966">.</span><span class="ident" id="6232967"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6232971">(</span><span class="op" id="6232972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6232978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6232984">if</span>&nbsp;<span class="ident" id="6232987"><a href="/gostd/encoding/xml/typeinfo.go.html#6232911">t</a></span><span class="op" id="6232988">.</span><span class="ident" id="6232989"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6232993">(</span><span class="op" id="6232994">)</span>&nbsp;<span class="op" id="6232996">==</span>&nbsp;<span class="ident" id="6232999"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6233006">.</span><span class="ident" id="6233007"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span>&nbsp;<span class="op" id="6233014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6233021">inner</span><span class="op" id="6233026">,</span>&nbsp;<span class="ident" id="6233028">err</span>&nbsp;<span class="op" id="6233032">:=</span>&nbsp;<span class="ident" id="6233035"><a href="/gostd/encoding/xml/typeinfo.go.html#6232458">getTypeInfo</a></span><span class="op" id="6233046">(</span><span class="ident" id="6233047"><a href="/gostd/encoding/xml/typeinfo.go.html#6232911">t</a></span><span class="op" id="6233048">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233055">if</span>&nbsp;<span class="ident" id="6233058"><a href="/gostd/encoding/xml/typeinfo.go.html#6233028">err</a></span>&nbsp;<span class="op" id="6233062">!=</span>&nbsp;<span class="builtintype" id="6233065">nil</span>&nbsp;<span class="op" id="6233069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233077">return</span>&nbsp;<span class="builtintype" id="6233084">nil</span><span class="op" id="6233087">,</span>&nbsp;<span class="ident" id="6233089"><a href="/gostd/encoding/xml/typeinfo.go.html#6233028">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233105">if</span>&nbsp;<span class="ident" id="6233108"><a href="/gostd/encoding/xml/typeinfo.go.html#6232529">tinfo</a></span><span class="op" id="6233113">.</span><span class="ident" id="6233114"><a href="/gostd/encoding/xml/typeinfo.go.html#6231807">xmlname</a></span>&nbsp;<span class="op" id="6233122">==</span>&nbsp;<span class="builtintype" id="6233125">nil</span>&nbsp;<span class="op" id="6233129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6233137"><a href="/gostd/encoding/xml/typeinfo.go.html#6232529">tinfo</a></span><span class="op" id="6233142">.</span><span class="ident" id="6233143"><a href="/gostd/encoding/xml/typeinfo.go.html#6231807">xmlname</a></span>&nbsp;<span class="op" id="6233151">=</span>&nbsp;<span class="ident" id="6233153"><a href="/gostd/encoding/xml/typeinfo.go.html#6233021">inner</a></span><span class="op" id="6233158">.</span><span class="ident" id="6233159"><a href="/gostd/encoding/xml/typeinfo.go.html#6231807">xmlname</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233179">for</span>&nbsp;<span class="ident" id="6233183">_</span><span class="op" id="6233184">,</span>&nbsp;<span class="ident" id="6233186">finfo</span>&nbsp;<span class="op" id="6233192">:=</span>&nbsp;<span class="keyword" id="6233195">range</span>&nbsp;<span class="ident" id="6233201"><a href="/gostd/encoding/xml/typeinfo.go.html#6233021">inner</a></span><span class="op" id="6233206">.</span><span class="ident" id="6233207"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span>&nbsp;<span class="op" id="6233214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6233222"><a href="/gostd/encoding/xml/typeinfo.go.html#6233186">finfo</a></span><span class="op" id="6233227">.</span><span class="ident" id="6233228"><a href="/gostd/encoding/xml/typeinfo.go.html#6231948">idx</a></span>&nbsp;<span class="op" id="6233232">=</span>&nbsp;<span class="builtinfunc" id="6233234">append</span><span class="op" id="6233240">(</span><span class="op" id="6233241">[</span><span class="op" id="6233242">]</span><span class="builtintype" id="6233243">int</span><span class="op" id="6233246">{</span><span class="ident" id="6233247"><a href="/gostd/encoding/xml/typeinfo.go.html#6232712">i</a></span><span class="op" id="6233248">}</span><span class="op" id="6233249">,</span>&nbsp;<span class="ident" id="6233251"><a href="/gostd/encoding/xml/typeinfo.go.html#6233186">finfo</a></span><span class="op" id="6233256">.</span><span class="ident" id="6233257"><a href="/gostd/encoding/xml/typeinfo.go.html#6231948">idx</a></span><span class="op" id="6233260">...</span><span class="op" id="6233263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233271">if</span>&nbsp;<span class="ident" id="6233274">err</span>&nbsp;<span class="op" id="6233278">:=</span>&nbsp;<span class="ident" id="6233281"><a href="/gostd/encoding/xml/typeinfo.go.html#6238141">addFieldInfo</a></span><span class="op" id="6233293">(</span><span class="ident" id="6233294"><a href="/gostd/encoding/xml/typeinfo.go.html#6232470">typ</a></span><span class="op" id="6233297">,</span>&nbsp;<span class="ident" id="6233299"><a href="/gostd/encoding/xml/typeinfo.go.html#6232529">tinfo</a></span><span class="op" id="6233304">,</span>&nbsp;<span class="op" id="6233306">&amp;</span><span class="ident" id="6233307"><a href="/gostd/encoding/xml/typeinfo.go.html#6233186">finfo</a></span><span class="op" id="6233312">)</span><span class="op" id="6233313">;</span>&nbsp;<span class="ident" id="6233315"><a href="/gostd/encoding/xml/typeinfo.go.html#6233274">err</a></span>&nbsp;<span class="op" id="6233319">!=</span>&nbsp;<span class="builtintype" id="6233322">nil</span>&nbsp;<span class="op" id="6233326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233335">return</span>&nbsp;<span class="builtintype" id="6233342">nil</span><span class="op" id="6233345">,</span>&nbsp;<span class="ident" id="6233347"><a href="/gostd/encoding/xml/typeinfo.go.html#6233274">err</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233371">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233389">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6233395">finfo</span><span class="op" id="6233400">,</span>&nbsp;<span class="ident" id="6233402">err</span>&nbsp;<span class="op" id="6233406">:=</span>&nbsp;<span class="ident" id="6233409"><a href="/gostd/encoding/xml/typeinfo.go.html#6233850">structFieldInfo</a></span><span class="op" id="6233424">(</span><span class="ident" id="6233425"><a href="/gostd/encoding/xml/typeinfo.go.html#6232470">typ</a></span><span class="op" id="6233428">,</span>&nbsp;<span class="op" id="6233430">&amp;</span><span class="ident" id="6233431"><a href="/gostd/encoding/xml/typeinfo.go.html#6232736">f</a></span><span class="op" id="6233432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233437">if</span>&nbsp;<span class="ident" id="6233440"><a href="/gostd/encoding/xml/typeinfo.go.html#6233402">err</a></span>&nbsp;<span class="op" id="6233444">!=</span>&nbsp;<span class="builtintype" id="6233447">nil</span>&nbsp;<span class="op" id="6233451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233457">return</span>&nbsp;<span class="builtintype" id="6233464">nil</span><span class="op" id="6233467">,</span>&nbsp;<span class="ident" id="6233469"><a href="/gostd/encoding/xml/typeinfo.go.html#6233402">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233476">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233482">if</span>&nbsp;<span class="ident" id="6233485"><a href="/gostd/encoding/xml/typeinfo.go.html#6232736">f</a></span><span class="op" id="6233486">.</span><span class="ident" id="6233487"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span>&nbsp;<span class="op" id="6233492">==</span>&nbsp;<span class="string" id="6233495">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="6233505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6233511"><a href="/gostd/encoding/xml/typeinfo.go.html#6232529">tinfo</a></span><span class="op" id="6233516">.</span><span class="ident" id="6233517"><a href="/gostd/encoding/xml/typeinfo.go.html#6231807">xmlname</a></span>&nbsp;<span class="op" id="6233525">=</span>&nbsp;<span class="ident" id="6233527"><a href="/gostd/encoding/xml/typeinfo.go.html#6233395">finfo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233537">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233549">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6233555">//&nbsp;Add&nbsp;the&nbsp;field&nbsp;if&nbsp;it&nbsp;doesn&#39;t&nbsp;conflict&nbsp;with&nbsp;other&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233617">if</span>&nbsp;<span class="ident" id="6233620">err</span>&nbsp;<span class="op" id="6233624">:=</span>&nbsp;<span class="ident" id="6233627"><a href="/gostd/encoding/xml/typeinfo.go.html#6238141">addFieldInfo</a></span><span class="op" id="6233639">(</span><span class="ident" id="6233640"><a href="/gostd/encoding/xml/typeinfo.go.html#6232470">typ</a></span><span class="op" id="6233643">,</span>&nbsp;<span class="ident" id="6233645"><a href="/gostd/encoding/xml/typeinfo.go.html#6232529">tinfo</a></span><span class="op" id="6233650">,</span>&nbsp;<span class="ident" id="6233652"><a href="/gostd/encoding/xml/typeinfo.go.html#6233395">finfo</a></span><span class="op" id="6233657">)</span><span class="op" id="6233658">;</span>&nbsp;<span class="ident" id="6233660"><a href="/gostd/encoding/xml/typeinfo.go.html#6233620">err</a></span>&nbsp;<span class="op" id="6233664">!=</span>&nbsp;<span class="builtintype" id="6233667">nil</span>&nbsp;<span class="op" id="6233671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233677">return</span>&nbsp;<span class="builtintype" id="6233684">nil</span><span class="op" id="6233687">,</span>&nbsp;<span class="ident" id="6233689"><a href="/gostd/encoding/xml/typeinfo.go.html#6233620">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233696">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6233703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6233706"><a href="/gostd/encoding/xml/typeinfo.go.html#6232279">tinfoLock</a></span><span class="op" id="6233715">.</span><span class="ident" id="6233716"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="6233720">(</span><span class="op" id="6233721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6233724"><a href="/gostd/encoding/xml/typeinfo.go.html#6232231">tinfoMap</a></span><span class="op" id="6233732">[</span><span class="ident" id="6233733"><a href="/gostd/encoding/xml/typeinfo.go.html#6232470">typ</a></span><span class="op" id="6233736">]</span>&nbsp;<span class="op" id="6233738">=</span>&nbsp;<span class="ident" id="6233740"><a href="/gostd/encoding/xml/typeinfo.go.html#6232529">tinfo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6233747"><a href="/gostd/encoding/xml/typeinfo.go.html#6232279">tinfoLock</a></span><span class="op" id="6233756">.</span><span class="ident" id="6233757"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="6233763">(</span><span class="op" id="6233764">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6233767">return</span>&nbsp;<span class="ident" id="6233774"><a href="/gostd/encoding/xml/typeinfo.go.html#6232529">tinfo</a></span><span class="op" id="6233779">,</span>&nbsp;<span class="builtintype" id="6233781">nil</span><br>
<span class="lineno"></span><span class="op" id="6233785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6233788">//&nbsp;structFieldInfo&nbsp;builds&nbsp;and&nbsp;returns&nbsp;a&nbsp;fieldInfo&nbsp;for&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="6233845">func</span>&nbsp;<span class="ident" id="6233850">structFieldInfo</span><span class="op" id="6233865">(</span><span class="ident" id="6233866">typ</span>&nbsp;<span class="ident" id="6233870"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6233877">.</span><span class="ident" id="6233878"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="6233882">,</span>&nbsp;<span class="ident" id="6233884">f</span>&nbsp;<span class="op" id="6233886">*</span><span class="ident" id="6233887"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6233894">.</span><span class="ident" id="6233895"><a href="/gostd/reflect/type.go.html#2800749">StructField</a></span><span class="op" id="6233906">)</span>&nbsp;<span class="op" id="6233908">(</span><span class="op" id="6233909">*</span><span class="ident" id="6233910"><a href="/gostd/encoding/xml/typeinfo.go.html#6231928">fieldInfo</a></span><span class="op" id="6233919">,</span>&nbsp;<span class="builtintype" id="6233921">error</span><span class="op" id="6233926">)</span>&nbsp;<span class="op" id="6233928">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6233931">finfo</span>&nbsp;<span class="op" id="6233937">:=</span>&nbsp;<span class="op" id="6233940">&amp;</span><span class="ident" id="6233941"><a href="/gostd/encoding/xml/typeinfo.go.html#6231928">fieldInfo</a></span><span class="op" id="6233950">{</span><span class="ident" id="6233951"><a href="/gostd/encoding/xml/typeinfo.go.html#6231948">idx</a></span><span class="op" id="6233954">:</span>&nbsp;<span class="ident" id="6233956"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6233957">.</span><span class="ident" id="6233958"><a href="/gostd/reflect/type.go.html#2801165">Index</a></span><span class="op" id="6233963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6233967">//&nbsp;Split&nbsp;the&nbsp;tag&nbsp;from&nbsp;the&nbsp;xml&nbsp;namespace&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234022">tag</span>&nbsp;<span class="op" id="6234026">:=</span>&nbsp;<span class="ident" id="6234029"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6234030">.</span><span class="ident" id="6234031"><a href="/gostd/reflect/type.go.html#2801069">Tag</a></span><span class="op" id="6234034">.</span><span class="ident" id="6234035"><a href="/gostd/reflect/type.go.html#2801940">Get</a></span><span class="op" id="6234038">(</span><span class="string" id="6234039">&#34;xml&#34;</span><span class="op" id="6234044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234047">if</span>&nbsp;<span class="ident" id="6234050">i</span>&nbsp;<span class="op" id="6234052">:=</span>&nbsp;<span class="ident" id="6234055"><a href="/gostd/encoding/xml/typeinfo.go.html#6231698">strings</a></span><span class="op" id="6234062">.</span><span class="ident" id="6234063"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="6234068">(</span><span class="ident" id="6234069"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span><span class="op" id="6234072">,</span>&nbsp;<span class="string" id="6234074">&#34;&nbsp;&#34;</span><span class="op" id="6234077">)</span><span class="op" id="6234078">;</span>&nbsp;<span class="ident" id="6234080"><a href="/gostd/encoding/xml/typeinfo.go.html#6234050">i</a></span>&nbsp;<span class="op" id="6234082">&gt;=</span>&nbsp;<span class="num" id="6234085">0</span>&nbsp;<span class="op" id="6234087">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234091"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234096">.</span><span class="ident" id="6234097"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span><span class="op" id="6234102">,</span>&nbsp;<span class="ident" id="6234104"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span>&nbsp;<span class="op" id="6234108">=</span>&nbsp;<span class="ident" id="6234110"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span><span class="op" id="6234113">[</span><span class="op" id="6234114">:</span><span class="ident" id="6234115"><a href="/gostd/encoding/xml/typeinfo.go.html#6234050">i</a></span><span class="op" id="6234116">]</span><span class="op" id="6234117">,</span>&nbsp;<span class="ident" id="6234119"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span><span class="op" id="6234122">[</span><span class="ident" id="6234123"><a href="/gostd/encoding/xml/typeinfo.go.html#6234050">i</a></span><span class="op" id="6234124">+</span><span class="num" id="6234125">1</span><span class="op" id="6234126">:</span><span class="op" id="6234127">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6234130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6234134">//&nbsp;Parse&nbsp;flags.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234151">tokens</span>&nbsp;<span class="op" id="6234158">:=</span>&nbsp;<span class="ident" id="6234161"><a href="/gostd/encoding/xml/typeinfo.go.html#6231698">strings</a></span><span class="op" id="6234168">.</span><span class="ident" id="6234169"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="6234174">(</span><span class="ident" id="6234175"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span><span class="op" id="6234178">,</span>&nbsp;<span class="string" id="6234180">&#34;,&#34;</span><span class="op" id="6234183">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234186">if</span>&nbsp;<span class="builtinfunc" id="6234189">len</span><span class="op" id="6234192">(</span><span class="ident" id="6234193"><a href="/gostd/encoding/xml/typeinfo.go.html#6234151">tokens</a></span><span class="op" id="6234199">)</span>&nbsp;<span class="op" id="6234201">==</span>&nbsp;<span class="num" id="6234204">1</span>&nbsp;<span class="op" id="6234206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234210"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234215">.</span><span class="ident" id="6234216"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6234222">=</span>&nbsp;<span class="ident" id="6234224"><a href="/gostd/encoding/xml/typeinfo.go.html#6232065">fElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6234234">}</span>&nbsp;<span class="keyword" id="6234236">else</span>&nbsp;<span class="op" id="6234241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234245"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span>&nbsp;<span class="op" id="6234249">=</span>&nbsp;<span class="ident" id="6234251"><a href="/gostd/encoding/xml/typeinfo.go.html#6234151">tokens</a></span><span class="op" id="6234257">[</span><span class="num" id="6234258">0</span><span class="op" id="6234259">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234263">for</span>&nbsp;<span class="ident" id="6234267">_</span><span class="op" id="6234268">,</span>&nbsp;<span class="ident" id="6234270">flag</span>&nbsp;<span class="op" id="6234275">:=</span>&nbsp;<span class="keyword" id="6234278">range</span>&nbsp;<span class="ident" id="6234284"><a href="/gostd/encoding/xml/typeinfo.go.html#6234151">tokens</a></span><span class="op" id="6234290">[</span><span class="num" id="6234291">1</span><span class="op" id="6234292">:</span><span class="op" id="6234293">]</span>&nbsp;<span class="op" id="6234295">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234300">switch</span>&nbsp;<span class="ident" id="6234307"><a href="/gostd/encoding/xml/typeinfo.go.html#6234270">flag</a></span>&nbsp;<span class="op" id="6234312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234317">case</span>&nbsp;<span class="string" id="6234322">&#34;attr&#34;</span><span class="op" id="6234328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234334"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234339">.</span><span class="ident" id="6234340"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6234346">|=</span>&nbsp;<span class="ident" id="6234349"><a href="/gostd/encoding/xml/typeinfo.go.html#6232098">fAttr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234358">case</span>&nbsp;<span class="string" id="6234363">&#34;chardata&#34;</span><span class="op" id="6234373">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234379"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234384">.</span><span class="ident" id="6234385"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6234391">|=</span>&nbsp;<span class="ident" id="6234394"><a href="/gostd/encoding/xml/typeinfo.go.html#6232105">fCharData</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234407">case</span>&nbsp;<span class="string" id="6234412">&#34;innerxml&#34;</span><span class="op" id="6234422">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234428"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234433">.</span><span class="ident" id="6234434"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6234440">|=</span>&nbsp;<span class="ident" id="6234443"><a href="/gostd/encoding/xml/typeinfo.go.html#6232116">fInnerXml</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234456">case</span>&nbsp;<span class="string" id="6234461">&#34;comment&#34;</span><span class="op" id="6234470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234476"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234481">.</span><span class="ident" id="6234482"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6234488">|=</span>&nbsp;<span class="ident" id="6234491"><a href="/gostd/encoding/xml/typeinfo.go.html#6232127">fComment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234503">case</span>&nbsp;<span class="string" id="6234508">&#34;any&#34;</span><span class="op" id="6234513">:</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234519"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234524">.</span><span class="ident" id="6234525"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6234531">|=</span>&nbsp;<span class="ident" id="6234534"><a href="/gostd/encoding/xml/typeinfo.go.html#6232137">fAny</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234542">case</span>&nbsp;<span class="string" id="6234547">&#34;omitempty&#34;</span><span class="op" id="6234558">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234564"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234569">.</span><span class="ident" id="6234570"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6234576">|=</span>&nbsp;<span class="ident" id="6234579"><a href="/gostd/encoding/xml/typeinfo.go.html#6232144">fOmitEmpty</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6234593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6234597">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6234602">//&nbsp;Validate&nbsp;the&nbsp;flags&nbsp;used.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234632">valid</span>&nbsp;<span class="op" id="6234638">:=</span>&nbsp;<span class="builtintype" id="6234641">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234648">switch</span>&nbsp;<span class="ident" id="6234655">mode</span>&nbsp;<span class="op" id="6234660">:=</span>&nbsp;<span class="ident" id="6234663"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234668">.</span><span class="ident" id="6234669"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6234675">&amp;</span>&nbsp;<span class="ident" id="6234677"><a href="/gostd/encoding/xml/typeinfo.go.html#6232157">fMode</a></span><span class="op" id="6234682">;</span>&nbsp;<span class="ident" id="6234684"><a href="/gostd/encoding/xml/typeinfo.go.html#6234655">mode</a></span>&nbsp;<span class="op" id="6234689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234693">case</span>&nbsp;<span class="num" id="6234698">0</span><span class="op" id="6234699">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234704"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234709">.</span><span class="ident" id="6234710"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6234716">|=</span>&nbsp;<span class="ident" id="6234719"><a href="/gostd/encoding/xml/typeinfo.go.html#6232065">fElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234730">case</span>&nbsp;<span class="ident" id="6234735"><a href="/gostd/encoding/xml/typeinfo.go.html#6232098">fAttr</a></span><span class="op" id="6234740">,</span>&nbsp;<span class="ident" id="6234742"><a href="/gostd/encoding/xml/typeinfo.go.html#6232105">fCharData</a></span><span class="op" id="6234751">,</span>&nbsp;<span class="ident" id="6234753"><a href="/gostd/encoding/xml/typeinfo.go.html#6232116">fInnerXml</a></span><span class="op" id="6234762">,</span>&nbsp;<span class="ident" id="6234764"><a href="/gostd/encoding/xml/typeinfo.go.html#6232127">fComment</a></span><span class="op" id="6234772">,</span>&nbsp;<span class="ident" id="6234774"><a href="/gostd/encoding/xml/typeinfo.go.html#6232137">fAny</a></span><span class="op" id="6234778">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234783">if</span>&nbsp;<span class="ident" id="6234786"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6234787">.</span><span class="ident" id="6234788"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span>&nbsp;<span class="op" id="6234793">==</span>&nbsp;<span class="string" id="6234796">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="6234806">||</span>&nbsp;<span class="ident" id="6234809"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span>&nbsp;<span class="op" id="6234813">!=</span>&nbsp;<span class="string" id="6234816">&#34;&#34;</span>&nbsp;<span class="op" id="6234819">&amp;&amp;</span>&nbsp;<span class="ident" id="6234822"><a href="/gostd/encoding/xml/typeinfo.go.html#6234655">mode</a></span>&nbsp;<span class="op" id="6234827">!=</span>&nbsp;<span class="ident" id="6234830"><a href="/gostd/encoding/xml/typeinfo.go.html#6232098">fAttr</a></span>&nbsp;<span class="op" id="6234836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234842"><a href="/gostd/encoding/xml/typeinfo.go.html#6234632">valid</a></span>&nbsp;<span class="op" id="6234848">=</span>&nbsp;<span class="builtintype" id="6234850">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6234859">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234863">default</span><span class="op" id="6234870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6234875">//&nbsp;This&nbsp;will&nbsp;also&nbsp;catch&nbsp;multiple&nbsp;modes&nbsp;in&nbsp;a&nbsp;single&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234936"><a href="/gostd/encoding/xml/typeinfo.go.html#6234632">valid</a></span>&nbsp;<span class="op" id="6234942">=</span>&nbsp;<span class="builtintype" id="6234944">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6234952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6234956">if</span>&nbsp;<span class="ident" id="6234959"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234964">.</span><span class="ident" id="6234965"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span><span class="op" id="6234970">&amp;</span><span class="ident" id="6234971"><a href="/gostd/encoding/xml/typeinfo.go.html#6232157">fMode</a></span>&nbsp;<span class="op" id="6234977">==</span>&nbsp;<span class="ident" id="6234980"><a href="/gostd/encoding/xml/typeinfo.go.html#6232137">fAny</a></span>&nbsp;<span class="op" id="6234985">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6234990"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6234995">.</span><span class="ident" id="6234996"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6235002">|=</span>&nbsp;<span class="ident" id="6235005"><a href="/gostd/encoding/xml/typeinfo.go.html#6232065">fElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6235016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6235020">if</span>&nbsp;<span class="ident" id="6235023"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6235028">.</span><span class="ident" id="6235029"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span><span class="op" id="6235034">&amp;</span><span class="ident" id="6235035"><a href="/gostd/encoding/xml/typeinfo.go.html#6232144">fOmitEmpty</a></span>&nbsp;<span class="op" id="6235046">!=</span>&nbsp;<span class="num" id="6235049">0</span>&nbsp;<span class="op" id="6235051">&amp;&amp;</span>&nbsp;<span class="ident" id="6235054"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6235059">.</span><span class="ident" id="6235060"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span><span class="op" id="6235065">&amp;</span><span class="op" id="6235066">(</span><span class="ident" id="6235067"><a href="/gostd/encoding/xml/typeinfo.go.html#6232065">fElement</a></span><span class="op" id="6235075">|</span><span class="ident" id="6235076"><a href="/gostd/encoding/xml/typeinfo.go.html#6232098">fAttr</a></span><span class="op" id="6235081">)</span>&nbsp;<span class="op" id="6235083">==</span>&nbsp;<span class="num" id="6235086">0</span>&nbsp;<span class="op" id="6235088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6235093"><a href="/gostd/encoding/xml/typeinfo.go.html#6234632">valid</a></span>&nbsp;<span class="op" id="6235099">=</span>&nbsp;<span class="builtintype" id="6235101">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6235109">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6235113">if</span>&nbsp;<span class="op" id="6235116">!</span><span class="ident" id="6235117"><a href="/gostd/encoding/xml/typeinfo.go.html#6234632">valid</a></span>&nbsp;<span class="op" id="6235123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6235128">return</span>&nbsp;<span class="builtintype" id="6235135">nil</span><span class="op" id="6235138">,</span>&nbsp;<span class="ident" id="6235140"><a href="/gostd/encoding/xml/typeinfo.go.html#6231680">fmt</a></span><span class="op" id="6235143">.</span><span class="ident" id="6235144"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6235150">(</span><span class="string" id="6235151">&#34;xml:&nbsp;invalid&nbsp;tag&nbsp;in&nbsp;field&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s:&nbsp;%q&#34;</span><span class="op" id="6235196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6235202"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6235203">.</span><span class="ident" id="6235204"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span><span class="op" id="6235208">,</span>&nbsp;<span class="ident" id="6235210"><a href="/gostd/encoding/xml/typeinfo.go.html#6233866">typ</a></span><span class="op" id="6235213">,</span>&nbsp;<span class="ident" id="6235215"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6235216">.</span><span class="ident" id="6235217"><a href="/gostd/reflect/type.go.html#2801069">Tag</a></span><span class="op" id="6235220">.</span><span class="ident" id="6235221"><a href="/gostd/reflect/type.go.html#2801940">Get</a></span><span class="op" id="6235224">(</span><span class="string" id="6235225">&#34;xml&#34;</span><span class="op" id="6235230">)</span><span class="op" id="6235231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6235235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6235238">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6235242">//&nbsp;Use&nbsp;of&nbsp;xmlns&nbsp;without&nbsp;a&nbsp;name&nbsp;is&nbsp;not&nbsp;allowed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6235290">if</span>&nbsp;<span class="ident" id="6235293"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6235298">.</span><span class="ident" id="6235299"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span>&nbsp;<span class="op" id="6235305">!=</span>&nbsp;<span class="string" id="6235308">&#34;&#34;</span>&nbsp;<span class="op" id="6235311">&amp;&amp;</span>&nbsp;<span class="ident" id="6235314"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span>&nbsp;<span class="op" id="6235318">==</span>&nbsp;<span class="string" id="6235321">&#34;&#34;</span>&nbsp;<span class="op" id="6235324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6235328">return</span>&nbsp;<span class="builtintype" id="6235335">nil</span><span class="op" id="6235338">,</span>&nbsp;<span class="ident" id="6235340"><a href="/gostd/encoding/xml/typeinfo.go.html#6231680">fmt</a></span><span class="op" id="6235343">.</span><span class="ident" id="6235344"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6235350">(</span><span class="string" id="6235351">&#34;xml:&nbsp;namespace&nbsp;without&nbsp;name&nbsp;in&nbsp;field&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s:&nbsp;%q&#34;</span><span class="op" id="6235407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6235412"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6235413">.</span><span class="ident" id="6235414"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span><span class="op" id="6235418">,</span>&nbsp;<span class="ident" id="6235420"><a href="/gostd/encoding/xml/typeinfo.go.html#6233866">typ</a></span><span class="op" id="6235423">,</span>&nbsp;<span class="ident" id="6235425"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6235426">.</span><span class="ident" id="6235427"><a href="/gostd/reflect/type.go.html#2801069">Tag</a></span><span class="op" id="6235430">.</span><span class="ident" id="6235431"><a href="/gostd/reflect/type.go.html#2801940">Get</a></span><span class="op" id="6235434">(</span><span class="string" id="6235435">&#34;xml&#34;</span><span class="op" id="6235440">)</span><span class="op" id="6235441">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6235444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6235448">if</span>&nbsp;<span class="ident" id="6235451"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6235452">.</span><span class="ident" id="6235453"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span>&nbsp;<span class="op" id="6235458">==</span>&nbsp;<span class="string" id="6235461">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="6235471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6235475">//&nbsp;The&nbsp;XMLName&nbsp;field&nbsp;records&nbsp;the&nbsp;XML&nbsp;element&nbsp;name.&nbsp;Don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6235534">//&nbsp;process&nbsp;it&nbsp;as&nbsp;usual&nbsp;because&nbsp;its&nbsp;name&nbsp;should&nbsp;default&nbsp;to</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6235594">//&nbsp;empty&nbsp;rather&nbsp;than&nbsp;to&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6235636"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6235641">.</span><span class="ident" id="6235642"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6235647">=</span>&nbsp;<span class="ident" id="6235649"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6235655">return</span>&nbsp;<span class="ident" id="6235662"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6235667">,</span>&nbsp;<span class="builtintype" id="6235669">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6235674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6235678">if</span>&nbsp;<span class="ident" id="6235681"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span>&nbsp;<span class="op" id="6235685">==</span>&nbsp;<span class="string" id="6235688">&#34;&#34;</span>&nbsp;<span class="op" id="6235691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6235695">//&nbsp;If&nbsp;the&nbsp;name&nbsp;part&nbsp;of&nbsp;the&nbsp;tag&nbsp;is&nbsp;completely&nbsp;empty,&nbsp;get</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6235753">//&nbsp;default&nbsp;from&nbsp;XMLName&nbsp;of&nbsp;underlying&nbsp;struct&nbsp;if&nbsp;feasible,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6235813">//&nbsp;or&nbsp;field&nbsp;name&nbsp;otherwise.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6235843">if</span>&nbsp;<span class="ident" id="6235846">xmlname</span>&nbsp;<span class="op" id="6235854">:=</span>&nbsp;<span class="ident" id="6235857"><a href="/gostd/encoding/xml/typeinfo.go.html#6237132">lookupXMLName</a></span><span class="op" id="6235870">(</span><span class="ident" id="6235871"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6235872">.</span><span class="ident" id="6235873"><a href="/gostd/reflect/type.go.html#2801034">Type</a></span><span class="op" id="6235877">)</span><span class="op" id="6235878">;</span>&nbsp;<span class="ident" id="6235880"><a href="/gostd/encoding/xml/typeinfo.go.html#6235846">xmlname</a></span>&nbsp;<span class="op" id="6235888">!=</span>&nbsp;<span class="builtintype" id="6235891">nil</span>&nbsp;<span class="op" id="6235895">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6235900"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6235905">.</span><span class="ident" id="6235906"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span><span class="op" id="6235911">,</span>&nbsp;<span class="ident" id="6235913"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6235918">.</span><span class="ident" id="6235919"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6235924">=</span>&nbsp;<span class="ident" id="6235926"><a href="/gostd/encoding/xml/typeinfo.go.html#6235846">xmlname</a></span><span class="op" id="6235933">.</span><span class="ident" id="6235934"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span><span class="op" id="6235939">,</span>&nbsp;<span class="ident" id="6235941"><a href="/gostd/encoding/xml/typeinfo.go.html#6235846">xmlname</a></span><span class="op" id="6235948">.</span><span class="ident" id="6235949"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6235956">}</span>&nbsp;<span class="keyword" id="6235958">else</span>&nbsp;<span class="op" id="6235963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6235968"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6235973">.</span><span class="ident" id="6235974"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6235979">=</span>&nbsp;<span class="ident" id="6235981"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6235982">.</span><span class="ident" id="6235983"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6235990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6235994">return</span>&nbsp;<span class="ident" id="6236001"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6236006">,</span>&nbsp;<span class="builtintype" id="6236008">nil</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6236013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6236017">//&nbsp;Prepare&nbsp;field&nbsp;name&nbsp;and&nbsp;parents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6236053">parents</span>&nbsp;<span class="op" id="6236061">:=</span>&nbsp;<span class="ident" id="6236064"><a href="/gostd/encoding/xml/typeinfo.go.html#6231698">strings</a></span><span class="op" id="6236071">.</span><span class="ident" id="6236072"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="6236077">(</span><span class="ident" id="6236078"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span><span class="op" id="6236081">,</span>&nbsp;<span class="string" id="6236083">&#34;&gt;&#34;</span><span class="op" id="6236086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6236089">if</span>&nbsp;<span class="ident" id="6236092"><a href="/gostd/encoding/xml/typeinfo.go.html#6236053">parents</a></span><span class="op" id="6236099">[</span><span class="num" id="6236100">0</span><span class="op" id="6236101">]</span>&nbsp;<span class="op" id="6236103">==</span>&nbsp;<span class="string" id="6236106">&#34;&#34;</span>&nbsp;<span class="op" id="6236109">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6236113"><a href="/gostd/encoding/xml/typeinfo.go.html#6236053">parents</a></span><span class="op" id="6236120">[</span><span class="num" id="6236121">0</span><span class="op" id="6236122">]</span>&nbsp;<span class="op" id="6236124">=</span>&nbsp;<span class="ident" id="6236126"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6236127">.</span><span class="ident" id="6236128"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6236134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6236137">if</span>&nbsp;<span class="ident" id="6236140"><a href="/gostd/encoding/xml/typeinfo.go.html#6236053">parents</a></span><span class="op" id="6236147">[</span><span class="builtinfunc" id="6236148">len</span><span class="op" id="6236151">(</span><span class="ident" id="6236152"><a href="/gostd/encoding/xml/typeinfo.go.html#6236053">parents</a></span><span class="op" id="6236159">)</span><span class="op" id="6236160">-</span><span class="num" id="6236161">1</span><span class="op" id="6236162">]</span>&nbsp;<span class="op" id="6236164">==</span>&nbsp;<span class="string" id="6236167">&#34;&#34;</span>&nbsp;<span class="op" id="6236170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6236174">return</span>&nbsp;<span class="builtintype" id="6236181">nil</span><span class="op" id="6236184">,</span>&nbsp;<span class="ident" id="6236186"><a href="/gostd/encoding/xml/typeinfo.go.html#6231680">fmt</a></span><span class="op" id="6236189">.</span><span class="ident" id="6236190"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6236196">(</span><span class="string" id="6236197">&#34;xml:&nbsp;trailing&nbsp;&#39;&gt;&#39;&nbsp;in&nbsp;field&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="6236239">,</span>&nbsp;<span class="ident" id="6236241"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6236242">.</span><span class="ident" id="6236243"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span><span class="op" id="6236247">,</span>&nbsp;<span class="ident" id="6236249"><a href="/gostd/encoding/xml/typeinfo.go.html#6233866">typ</a></span><span class="op" id="6236252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6236255">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6236258"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6236263">.</span><span class="ident" id="6236264"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6236269">=</span>&nbsp;<span class="ident" id="6236271"><a href="/gostd/encoding/xml/typeinfo.go.html#6236053">parents</a></span><span class="op" id="6236278">[</span><span class="builtinfunc" id="6236279">len</span><span class="op" id="6236282">(</span><span class="ident" id="6236283"><a href="/gostd/encoding/xml/typeinfo.go.html#6236053">parents</a></span><span class="op" id="6236290">)</span><span class="op" id="6236291">-</span><span class="num" id="6236292">1</span><span class="op" id="6236293">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6236296">if</span>&nbsp;<span class="builtinfunc" id="6236299">len</span><span class="op" id="6236302">(</span><span class="ident" id="6236303"><a href="/gostd/encoding/xml/typeinfo.go.html#6236053">parents</a></span><span class="op" id="6236310">)</span>&nbsp;<span class="op" id="6236312">&gt;</span>&nbsp;<span class="num" id="6236314">1</span>&nbsp;<span class="op" id="6236316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6236320">if</span>&nbsp;<span class="op" id="6236323">(</span><span class="ident" id="6236324"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6236329">.</span><span class="ident" id="6236330"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6236336">&amp;</span>&nbsp;<span class="ident" id="6236338"><a href="/gostd/encoding/xml/typeinfo.go.html#6232065">fElement</a></span><span class="op" id="6236346">)</span>&nbsp;<span class="op" id="6236348">==</span>&nbsp;<span class="num" id="6236351">0</span>&nbsp;<span class="op" id="6236353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6236358">return</span>&nbsp;<span class="builtintype" id="6236365">nil</span><span class="op" id="6236368">,</span>&nbsp;<span class="ident" id="6236370"><a href="/gostd/encoding/xml/typeinfo.go.html#6231680">fmt</a></span><span class="op" id="6236373">.</span><span class="ident" id="6236374"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6236380">(</span><span class="string" id="6236381">&#34;xml:&nbsp;%s&nbsp;chain&nbsp;not&nbsp;valid&nbsp;with&nbsp;%s&nbsp;flag&#34;</span><span class="op" id="6236419">,</span>&nbsp;<span class="ident" id="6236421"><a href="/gostd/encoding/xml/typeinfo.go.html#6234022">tag</a></span><span class="op" id="6236424">,</span>&nbsp;<span class="ident" id="6236426"><a href="/gostd/encoding/xml/typeinfo.go.html#6231698">strings</a></span><span class="op" id="6236433">.</span><span class="ident" id="6236434"><a href="/gostd/strings/strings.go.html#2974969">Join</a></span><span class="op" id="6236438">(</span><span class="ident" id="6236439"><a href="/gostd/encoding/xml/typeinfo.go.html#6234151">tokens</a></span><span class="op" id="6236445">[</span><span class="num" id="6236446">1</span><span class="op" id="6236447">:</span><span class="op" id="6236448">]</span><span class="op" id="6236449">,</span>&nbsp;<span class="string" id="6236451">&#34;,&#34;</span><span class="op" id="6236454">)</span><span class="op" id="6236455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6236459">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6236463"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6236468">.</span><span class="ident" id="6236469"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span>&nbsp;<span class="op" id="6236477">=</span>&nbsp;<span class="ident" id="6236479"><a href="/gostd/encoding/xml/typeinfo.go.html#6236053">parents</a></span><span class="op" id="6236486">[</span><span class="op" id="6236487">:</span><span class="builtinfunc" id="6236488">len</span><span class="op" id="6236491">(</span><span class="ident" id="6236492"><a href="/gostd/encoding/xml/typeinfo.go.html#6236053">parents</a></span><span class="op" id="6236499">)</span><span class="op" id="6236500">-</span><span class="num" id="6236501">1</span><span class="op" id="6236502">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6236505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6236509">//&nbsp;If&nbsp;the&nbsp;field&nbsp;type&nbsp;has&nbsp;an&nbsp;XMLName&nbsp;field,&nbsp;the&nbsp;names&nbsp;must&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6236574">//&nbsp;so&nbsp;that&nbsp;the&nbsp;behavior&nbsp;of&nbsp;both&nbsp;marshalling&nbsp;and&nbsp;unmarshalling</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6236637">//&nbsp;is&nbsp;straightforward&nbsp;and&nbsp;unambiguous.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6236677">if</span>&nbsp;<span class="ident" id="6236680"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6236685">.</span><span class="ident" id="6236686"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span><span class="op" id="6236691">&amp;</span><span class="ident" id="6236692"><a href="/gostd/encoding/xml/typeinfo.go.html#6232065">fElement</a></span>&nbsp;<span class="op" id="6236701">!=</span>&nbsp;<span class="num" id="6236704">0</span>&nbsp;<span class="op" id="6236706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6236710">ftyp</span>&nbsp;<span class="op" id="6236715">:=</span>&nbsp;<span class="ident" id="6236718"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6236719">.</span><span class="ident" id="6236720"><a href="/gostd/reflect/type.go.html#2801034">Type</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6236727">xmlname</span>&nbsp;<span class="op" id="6236735">:=</span>&nbsp;<span class="ident" id="6236738"><a href="/gostd/encoding/xml/typeinfo.go.html#6237132">lookupXMLName</a></span><span class="op" id="6236751">(</span><span class="ident" id="6236752"><a href="/gostd/encoding/xml/typeinfo.go.html#6236710">ftyp</a></span><span class="op" id="6236756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6236760">if</span>&nbsp;<span class="ident" id="6236763"><a href="/gostd/encoding/xml/typeinfo.go.html#6236727">xmlname</a></span>&nbsp;<span class="op" id="6236771">!=</span>&nbsp;<span class="builtintype" id="6236774">nil</span>&nbsp;<span class="op" id="6236778">&amp;&amp;</span>&nbsp;<span class="ident" id="6236781"><a href="/gostd/encoding/xml/typeinfo.go.html#6236727">xmlname</a></span><span class="op" id="6236788">.</span><span class="ident" id="6236789"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6236794">!=</span>&nbsp;<span class="ident" id="6236797"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6236802">.</span><span class="ident" id="6236803"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6236808">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6236813">return</span>&nbsp;<span class="builtintype" id="6236820">nil</span><span class="op" id="6236823">,</span>&nbsp;<span class="ident" id="6236825"><a href="/gostd/encoding/xml/typeinfo.go.html#6231680">fmt</a></span><span class="op" id="6236828">.</span><span class="ident" id="6236829"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6236835">(</span><span class="string" id="6236836">&#34;xml:&nbsp;name&nbsp;%q&nbsp;in&nbsp;tag&nbsp;of&nbsp;%s.%s&nbsp;conflicts&nbsp;with&nbsp;name&nbsp;%q&nbsp;in&nbsp;%s.XMLName&#34;</span><span class="op" id="6236903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6236909"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6236914">.</span><span class="ident" id="6236915"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span><span class="op" id="6236919">,</span>&nbsp;<span class="ident" id="6236921"><a href="/gostd/encoding/xml/typeinfo.go.html#6233866">typ</a></span><span class="op" id="6236924">,</span>&nbsp;<span class="ident" id="6236926"><a href="/gostd/encoding/xml/typeinfo.go.html#6233884">f</a></span><span class="op" id="6236927">.</span><span class="ident" id="6236928"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span><span class="op" id="6236932">,</span>&nbsp;<span class="ident" id="6236934"><a href="/gostd/encoding/xml/typeinfo.go.html#6236727">xmlname</a></span><span class="op" id="6236941">.</span><span class="ident" id="6236942"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span><span class="op" id="6236946">,</span>&nbsp;<span class="ident" id="6236948"><a href="/gostd/encoding/xml/typeinfo.go.html#6236710">ftyp</a></span><span class="op" id="6236952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6236956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6236959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6236962">return</span>&nbsp;<span class="ident" id="6236969"><a href="/gostd/encoding/xml/typeinfo.go.html#6233931">finfo</a></span><span class="op" id="6236974">,</span>&nbsp;<span class="builtintype" id="6236976">nil</span><br>
<span class="lineno">225</span><span class="op" id="6236980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6236983">//&nbsp;lookupXMLName&nbsp;returns&nbsp;the&nbsp;fieldInfo&nbsp;for&nbsp;typ&#39;s&nbsp;XMLName&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6237046">//&nbsp;in&nbsp;case&nbsp;it&nbsp;exists&nbsp;and&nbsp;has&nbsp;a&nbsp;valid&nbsp;xml&nbsp;field&nbsp;tag,&nbsp;otherwise</span><br>
<span class="lineno"></span><span class="comment" id="6237108">//&nbsp;it&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno">230</span><span class="keyword" id="6237127">func</span>&nbsp;<span class="ident" id="6237132">lookupXMLName</span><span class="op" id="6237145">(</span><span class="ident" id="6237146">typ</span>&nbsp;<span class="ident" id="6237150"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6237157">.</span><span class="ident" id="6237158"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="6237162">)</span>&nbsp;<span class="op" id="6237164">(</span><span class="ident" id="6237165">xmlname</span>&nbsp;<span class="op" id="6237173">*</span><span class="ident" id="6237174"><a href="/gostd/encoding/xml/typeinfo.go.html#6231928">fieldInfo</a></span><span class="op" id="6237183">)</span>&nbsp;<span class="op" id="6237185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237188">for</span>&nbsp;<span class="ident" id="6237192"><a href="/gostd/encoding/xml/typeinfo.go.html#6237146">typ</a></span><span class="op" id="6237195">.</span><span class="ident" id="6237196"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6237200">(</span><span class="op" id="6237201">)</span>&nbsp;<span class="op" id="6237203">==</span>&nbsp;<span class="ident" id="6237206"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6237213">.</span><span class="ident" id="6237214"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="6237218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6237222"><a href="/gostd/encoding/xml/typeinfo.go.html#6237146">typ</a></span>&nbsp;<span class="op" id="6237226">=</span>&nbsp;<span class="ident" id="6237228"><a href="/gostd/encoding/xml/typeinfo.go.html#6237146">typ</a></span><span class="op" id="6237231">.</span><span class="ident" id="6237232"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6237236">(</span><span class="op" id="6237237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6237240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237243">if</span>&nbsp;<span class="ident" id="6237246"><a href="/gostd/encoding/xml/typeinfo.go.html#6237146">typ</a></span><span class="op" id="6237249">.</span><span class="ident" id="6237250"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6237254">(</span><span class="op" id="6237255">)</span>&nbsp;<span class="op" id="6237257">!=</span>&nbsp;<span class="ident" id="6237260"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6237267">.</span><span class="ident" id="6237268"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span>&nbsp;<span class="op" id="6237275">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237279">return</span>&nbsp;<span class="builtintype" id="6237286">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6237291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237294">for</span>&nbsp;<span class="ident" id="6237298">i</span><span class="op" id="6237299">,</span>&nbsp;<span class="ident" id="6237301">n</span>&nbsp;<span class="op" id="6237303">:=</span>&nbsp;<span class="num" id="6237306">0</span><span class="op" id="6237307">,</span>&nbsp;<span class="ident" id="6237309"><a href="/gostd/encoding/xml/typeinfo.go.html#6237146">typ</a></span><span class="op" id="6237312">.</span><span class="ident" id="6237313"><a href="/gostd/reflect/type.go.html#2786550">NumField</a></span><span class="op" id="6237321">(</span><span class="op" id="6237322">)</span><span class="op" id="6237323">;</span>&nbsp;<span class="ident" id="6237325"><a href="/gostd/encoding/xml/typeinfo.go.html#6237298">i</a></span>&nbsp;<span class="op" id="6237327">&lt;</span>&nbsp;<span class="ident" id="6237329"><a href="/gostd/encoding/xml/typeinfo.go.html#6237301">n</a></span><span class="op" id="6237330">;</span>&nbsp;<span class="ident" id="6237332"><a href="/gostd/encoding/xml/typeinfo.go.html#6237298">i</a></span><span class="op" id="6237333">++</span>&nbsp;<span class="op" id="6237336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6237340">f</span>&nbsp;<span class="op" id="6237342">:=</span>&nbsp;<span class="ident" id="6237345"><a href="/gostd/encoding/xml/typeinfo.go.html#6237146">typ</a></span><span class="op" id="6237348">.</span><span class="ident" id="6237349"><a href="/gostd/reflect/type.go.html#2785427">Field</a></span><span class="op" id="6237354">(</span><span class="ident" id="6237355"><a href="/gostd/encoding/xml/typeinfo.go.html#6237298">i</a></span><span class="op" id="6237356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237360">if</span>&nbsp;<span class="ident" id="6237363"><a href="/gostd/encoding/xml/typeinfo.go.html#6237340">f</a></span><span class="op" id="6237364">.</span><span class="ident" id="6237365"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span>&nbsp;<span class="op" id="6237370">!=</span>&nbsp;<span class="string" id="6237373">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="6237383">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237388">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6237399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6237403">finfo</span><span class="op" id="6237408">,</span>&nbsp;<span class="ident" id="6237410">err</span>&nbsp;<span class="op" id="6237414">:=</span>&nbsp;<span class="ident" id="6237417"><a href="/gostd/encoding/xml/typeinfo.go.html#6233850">structFieldInfo</a></span><span class="op" id="6237432">(</span><span class="ident" id="6237433"><a href="/gostd/encoding/xml/typeinfo.go.html#6237146">typ</a></span><span class="op" id="6237436">,</span>&nbsp;<span class="op" id="6237438">&amp;</span><span class="ident" id="6237439"><a href="/gostd/encoding/xml/typeinfo.go.html#6237340">f</a></span><span class="op" id="6237440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237444">if</span>&nbsp;<span class="ident" id="6237447"><a href="/gostd/encoding/xml/typeinfo.go.html#6237403">finfo</a></span><span class="op" id="6237452">.</span><span class="ident" id="6237453"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6237458">!=</span>&nbsp;<span class="string" id="6237461">&#34;&#34;</span>&nbsp;<span class="op" id="6237464">&amp;&amp;</span>&nbsp;<span class="ident" id="6237467"><a href="/gostd/encoding/xml/typeinfo.go.html#6237410">err</a></span>&nbsp;<span class="op" id="6237471">==</span>&nbsp;<span class="builtintype" id="6237474">nil</span>&nbsp;<span class="op" id="6237478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237483">return</span>&nbsp;<span class="ident" id="6237490"><a href="/gostd/encoding/xml/typeinfo.go.html#6237403">finfo</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6237498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6237502">//&nbsp;Also&nbsp;consider&nbsp;errors&nbsp;as&nbsp;a&nbsp;non-existent&nbsp;field&nbsp;tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6237556">//&nbsp;and&nbsp;let&nbsp;getTypeInfo&nbsp;itself&nbsp;report&nbsp;the&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237606">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6237613">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237616">return</span>&nbsp;<span class="builtintype" id="6237623">nil</span><br>
<span class="lineno"></span><span class="op" id="6237627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6237630">func</span>&nbsp;<span class="ident" id="6237635">min</span><span class="op" id="6237638">(</span><span class="ident" id="6237639">a</span><span class="op" id="6237640">,</span>&nbsp;<span class="ident" id="6237642">b</span>&nbsp;<span class="builtintype" id="6237644">int</span><span class="op" id="6237647">)</span>&nbsp;<span class="builtintype" id="6237649">int</span>&nbsp;<span class="op" id="6237653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237656">if</span>&nbsp;<span class="ident" id="6237659"><a href="/gostd/encoding/xml/typeinfo.go.html#6237639">a</a></span>&nbsp;<span class="op" id="6237661">&lt;=</span>&nbsp;<span class="ident" id="6237664"><a href="/gostd/encoding/xml/typeinfo.go.html#6237642">b</a></span>&nbsp;<span class="op" id="6237666">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237670">return</span>&nbsp;<span class="ident" id="6237677"><a href="/gostd/encoding/xml/typeinfo.go.html#6237639">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6237680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6237683">return</span>&nbsp;<span class="ident" id="6237690"><a href="/gostd/encoding/xml/typeinfo.go.html#6237642">b</a></span><br>
<span class="lineno"></span><span class="op" id="6237692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="6237695">//&nbsp;addFieldInfo&nbsp;adds&nbsp;finfo&nbsp;to&nbsp;tinfo.fields&nbsp;if&nbsp;there&nbsp;are&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="6237754">//&nbsp;conflicts,&nbsp;or&nbsp;if&nbsp;conflicts&nbsp;arise&nbsp;from&nbsp;previous&nbsp;fields&nbsp;that&nbsp;were</span><br>
<span class="lineno"></span><span class="comment" id="6237821">//&nbsp;obtained&nbsp;from&nbsp;deeper&nbsp;embedded&nbsp;structures&nbsp;than&nbsp;finfo.&nbsp;In&nbsp;the&nbsp;latter</span><br>
<span class="lineno"></span><span class="comment" id="6237891">//&nbsp;case,&nbsp;the&nbsp;conflicting&nbsp;entries&nbsp;are&nbsp;dropped.</span><br>
<span class="lineno"></span><span class="comment" id="6237937">//&nbsp;A&nbsp;conflict&nbsp;occurs&nbsp;when&nbsp;the&nbsp;path&nbsp;(parent&nbsp;+&nbsp;name)&nbsp;to&nbsp;a&nbsp;field&nbsp;is</span><br>
<span class="lineno">265</span><span class="comment" id="6238002">//&nbsp;itself&nbsp;a&nbsp;prefix&nbsp;of&nbsp;another&nbsp;path,&nbsp;or&nbsp;when&nbsp;two&nbsp;paths&nbsp;match&nbsp;exactly.</span><br>
<span class="lineno"></span><span class="comment" id="6238071">//&nbsp;It&nbsp;is&nbsp;okay&nbsp;for&nbsp;field&nbsp;paths&nbsp;to&nbsp;share&nbsp;a&nbsp;common,&nbsp;shorter&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="6238136">func</span>&nbsp;<span class="ident" id="6238141">addFieldInfo</span><span class="op" id="6238153">(</span><span class="ident" id="6238154">typ</span>&nbsp;<span class="ident" id="6238158"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6238165">.</span><span class="ident" id="6238166"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="6238170">,</span>&nbsp;<span class="ident" id="6238172">tinfo</span>&nbsp;<span class="op" id="6238178">*</span><span class="ident" id="6238179"><a href="/gostd/encoding/xml/typeinfo.go.html#6231788">typeInfo</a></span><span class="op" id="6238187">,</span>&nbsp;<span class="ident" id="6238189">newf</span>&nbsp;<span class="op" id="6238194">*</span><span class="ident" id="6238195"><a href="/gostd/encoding/xml/typeinfo.go.html#6231928">fieldInfo</a></span><span class="op" id="6238204">)</span>&nbsp;<span class="builtintype" id="6238206">error</span>&nbsp;<span class="op" id="6238212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238215">var</span>&nbsp;<span class="ident" id="6238219">conflicts</span>&nbsp;<span class="op" id="6238229">[</span><span class="op" id="6238230">]</span><span class="builtintype" id="6238231">int</span><br>
<span class="lineno"></span><span class="ident" id="6238235">Loop</span><span class="op" id="6238239">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6238242">//&nbsp;First,&nbsp;figure&nbsp;all&nbsp;conflicts.&nbsp;Most&nbsp;working&nbsp;code&nbsp;will&nbsp;have&nbsp;none.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238309">for</span>&nbsp;<span class="ident" id="6238313">i</span>&nbsp;<span class="op" id="6238315">:=</span>&nbsp;<span class="keyword" id="6238318">range</span>&nbsp;<span class="ident" id="6238324"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6238329">.</span><span class="ident" id="6238330"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span>&nbsp;<span class="op" id="6238337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6238341">oldf</span>&nbsp;<span class="op" id="6238346">:=</span>&nbsp;<span class="op" id="6238349">&amp;</span><span class="ident" id="6238350"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6238355">.</span><span class="ident" id="6238356"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6238362">[</span><span class="ident" id="6238363"><a href="/gostd/encoding/xml/typeinfo.go.html#6238313">i</a></span><span class="op" id="6238364">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238368">if</span>&nbsp;<span class="ident" id="6238371"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238375">.</span><span class="ident" id="6238376"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span><span class="op" id="6238381">&amp;</span><span class="ident" id="6238382"><a href="/gostd/encoding/xml/typeinfo.go.html#6232157">fMode</a></span>&nbsp;<span class="op" id="6238388">!=</span>&nbsp;<span class="ident" id="6238391"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238395">.</span><span class="ident" id="6238396"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span><span class="op" id="6238401">&amp;</span><span class="ident" id="6238402"><a href="/gostd/encoding/xml/typeinfo.go.html#6232157">fMode</a></span>&nbsp;<span class="op" id="6238408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238413">continue</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6238424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238428">if</span>&nbsp;<span class="ident" id="6238431"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238435">.</span><span class="ident" id="6238436"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span>&nbsp;<span class="op" id="6238442">!=</span>&nbsp;<span class="string" id="6238445">&#34;&#34;</span>&nbsp;<span class="op" id="6238448">&amp;&amp;</span>&nbsp;<span class="ident" id="6238451"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238455">.</span><span class="ident" id="6238456"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span>&nbsp;<span class="op" id="6238462">!=</span>&nbsp;<span class="string" id="6238465">&#34;&#34;</span>&nbsp;<span class="op" id="6238468">&amp;&amp;</span>&nbsp;<span class="ident" id="6238471"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238475">.</span><span class="ident" id="6238476"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span>&nbsp;<span class="op" id="6238482">!=</span>&nbsp;<span class="ident" id="6238485"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238489">.</span><span class="ident" id="6238490"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span>&nbsp;<span class="op" id="6238496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238501">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6238512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6238516">minl</span>&nbsp;<span class="op" id="6238521">:=</span>&nbsp;<span class="ident" id="6238524"><a href="/gostd/encoding/xml/typeinfo.go.html#6237635">min</a></span><span class="op" id="6238527">(</span><span class="builtinfunc" id="6238528">len</span><span class="op" id="6238531">(</span><span class="ident" id="6238532"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238536">.</span><span class="ident" id="6238537"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238544">)</span><span class="op" id="6238545">,</span>&nbsp;<span class="builtinfunc" id="6238547">len</span><span class="op" id="6238550">(</span><span class="ident" id="6238551"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238555">.</span><span class="ident" id="6238556"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238563">)</span><span class="op" id="6238564">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238568">for</span>&nbsp;<span class="ident" id="6238572">p</span>&nbsp;<span class="op" id="6238574">:=</span>&nbsp;<span class="num" id="6238577">0</span><span class="op" id="6238578">;</span>&nbsp;<span class="ident" id="6238580"><a href="/gostd/encoding/xml/typeinfo.go.html#6238572">p</a></span>&nbsp;<span class="op" id="6238582">&lt;</span>&nbsp;<span class="ident" id="6238584"><a href="/gostd/encoding/xml/typeinfo.go.html#6238516">minl</a></span><span class="op" id="6238588">;</span>&nbsp;<span class="ident" id="6238590"><a href="/gostd/encoding/xml/typeinfo.go.html#6238572">p</a></span><span class="op" id="6238591">++</span>&nbsp;<span class="op" id="6238594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238599">if</span>&nbsp;<span class="ident" id="6238602"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238606">.</span><span class="ident" id="6238607"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238614">[</span><span class="ident" id="6238615"><a href="/gostd/encoding/xml/typeinfo.go.html#6238572">p</a></span><span class="op" id="6238616">]</span>&nbsp;<span class="op" id="6238618">!=</span>&nbsp;<span class="ident" id="6238621"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238625">.</span><span class="ident" id="6238626"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238633">[</span><span class="ident" id="6238634"><a href="/gostd/encoding/xml/typeinfo.go.html#6238572">p</a></span><span class="op" id="6238635">]</span>&nbsp;<span class="op" id="6238637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238643">continue</span>&nbsp;<span class="ident" id="6238652"><a href="/gostd/encoding/xml/typeinfo.go.html#6238235">Loop</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6238660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6238664">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238668">if</span>&nbsp;<span class="builtinfunc" id="6238671">len</span><span class="op" id="6238674">(</span><span class="ident" id="6238675"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238679">.</span><span class="ident" id="6238680"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238687">)</span>&nbsp;<span class="op" id="6238689">&gt;</span>&nbsp;<span class="builtinfunc" id="6238691">len</span><span class="op" id="6238694">(</span><span class="ident" id="6238695"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238699">.</span><span class="ident" id="6238700"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238707">)</span>&nbsp;<span class="op" id="6238709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238714">if</span>&nbsp;<span class="ident" id="6238717"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238721">.</span><span class="ident" id="6238722"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238729">[</span><span class="builtinfunc" id="6238730">len</span><span class="op" id="6238733">(</span><span class="ident" id="6238734"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238738">.</span><span class="ident" id="6238739"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238746">)</span><span class="op" id="6238747">]</span>&nbsp;<span class="op" id="6238749">==</span>&nbsp;<span class="ident" id="6238752"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238756">.</span><span class="ident" id="6238757"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6238762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6238768"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span>&nbsp;<span class="op" id="6238778">=</span>&nbsp;<span class="builtinfunc" id="6238780">append</span><span class="op" id="6238786">(</span><span class="ident" id="6238787"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span><span class="op" id="6238796">,</span>&nbsp;<span class="ident" id="6238798"><a href="/gostd/encoding/xml/typeinfo.go.html#6238313">i</a></span><span class="op" id="6238799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6238804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6238808">}</span>&nbsp;<span class="keyword" id="6238810">else</span>&nbsp;<span class="keyword" id="6238815">if</span>&nbsp;<span class="builtinfunc" id="6238818">len</span><span class="op" id="6238821">(</span><span class="ident" id="6238822"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238826">.</span><span class="ident" id="6238827"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238834">)</span>&nbsp;<span class="op" id="6238836">&lt;</span>&nbsp;<span class="builtinfunc" id="6238838">len</span><span class="op" id="6238841">(</span><span class="ident" id="6238842"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238846">.</span><span class="ident" id="6238847"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238854">)</span>&nbsp;<span class="op" id="6238856">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238861">if</span>&nbsp;<span class="ident" id="6238864"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238868">.</span><span class="ident" id="6238869"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238876">[</span><span class="builtinfunc" id="6238877">len</span><span class="op" id="6238880">(</span><span class="ident" id="6238881"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238885">.</span><span class="ident" id="6238886"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6238893">)</span><span class="op" id="6238894">]</span>&nbsp;<span class="op" id="6238896">==</span>&nbsp;<span class="ident" id="6238899"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238903">.</span><span class="ident" id="6238904"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6238909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6238915"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span>&nbsp;<span class="op" id="6238925">=</span>&nbsp;<span class="builtinfunc" id="6238927">append</span><span class="op" id="6238933">(</span><span class="ident" id="6238934"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span><span class="op" id="6238943">,</span>&nbsp;<span class="ident" id="6238945"><a href="/gostd/encoding/xml/typeinfo.go.html#6238313">i</a></span><span class="op" id="6238946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6238951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6238955">}</span>&nbsp;<span class="keyword" id="6238957">else</span>&nbsp;<span class="op" id="6238962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6238967">if</span>&nbsp;<span class="ident" id="6238970"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6238974">.</span><span class="ident" id="6238975"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6238980">==</span>&nbsp;<span class="ident" id="6238983"><a href="/gostd/encoding/xml/typeinfo.go.html#6238341">oldf</a></span><span class="op" id="6238987">.</span><span class="ident" id="6238988"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6238993">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6238999"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span>&nbsp;<span class="op" id="6239009">=</span>&nbsp;<span class="builtinfunc" id="6239011">append</span><span class="op" id="6239017">(</span><span class="ident" id="6239018"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span><span class="op" id="6239027">,</span>&nbsp;<span class="ident" id="6239029"><a href="/gostd/encoding/xml/typeinfo.go.html#6238313">i</a></span><span class="op" id="6239030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6239035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6239039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6239042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6239045">//&nbsp;Without&nbsp;conflicts,&nbsp;add&nbsp;the&nbsp;new&nbsp;field&nbsp;and&nbsp;return.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6239098">if</span>&nbsp;<span class="ident" id="6239101"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span>&nbsp;<span class="op" id="6239111">==</span>&nbsp;<span class="builtintype" id="6239114">nil</span>&nbsp;<span class="op" id="6239118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6239122"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6239127">.</span><span class="ident" id="6239128"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span>&nbsp;<span class="op" id="6239135">=</span>&nbsp;<span class="builtinfunc" id="6239137">append</span><span class="op" id="6239143">(</span><span class="ident" id="6239144"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6239149">.</span><span class="ident" id="6239150"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6239156">,</span>&nbsp;<span class="op" id="6239158">*</span><span class="ident" id="6239159"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6239163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6239167">return</span>&nbsp;<span class="builtintype" id="6239174">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6239179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6239183">//&nbsp;If&nbsp;any&nbsp;conflict&nbsp;is&nbsp;shallower,&nbsp;ignore&nbsp;the&nbsp;new&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6239239">//&nbsp;This&nbsp;matches&nbsp;the&nbsp;Go&nbsp;field&nbsp;resolution&nbsp;on&nbsp;embedding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6239294">for</span>&nbsp;<span class="ident" id="6239298">_</span><span class="op" id="6239299">,</span>&nbsp;<span class="ident" id="6239301">i</span>&nbsp;<span class="op" id="6239303">:=</span>&nbsp;<span class="keyword" id="6239306">range</span>&nbsp;<span class="ident" id="6239312"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span>&nbsp;<span class="op" id="6239322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6239326">if</span>&nbsp;<span class="builtinfunc" id="6239329">len</span><span class="op" id="6239332">(</span><span class="ident" id="6239333"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6239338">.</span><span class="ident" id="6239339"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6239345">[</span><span class="ident" id="6239346"><a href="/gostd/encoding/xml/typeinfo.go.html#6239301">i</a></span><span class="op" id="6239347">]</span><span class="op" id="6239348">.</span><span class="ident" id="6239349"><a href="/gostd/encoding/xml/typeinfo.go.html#6231948">idx</a></span><span class="op" id="6239352">)</span>&nbsp;<span class="op" id="6239354">&lt;</span>&nbsp;<span class="builtinfunc" id="6239356">len</span><span class="op" id="6239359">(</span><span class="ident" id="6239360"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6239364">.</span><span class="ident" id="6239365"><a href="/gostd/encoding/xml/typeinfo.go.html#6231948">idx</a></span><span class="op" id="6239368">)</span>&nbsp;<span class="op" id="6239370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6239375">return</span>&nbsp;<span class="builtintype" id="6239382">nil</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6239388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6239391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6239395">//&nbsp;Otherwise,&nbsp;if&nbsp;any&nbsp;of&nbsp;them&nbsp;is&nbsp;at&nbsp;the&nbsp;same&nbsp;depth&nbsp;level,&nbsp;it&#39;s&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6239468">for</span>&nbsp;<span class="ident" id="6239472">_</span><span class="op" id="6239473">,</span>&nbsp;<span class="ident" id="6239475">i</span>&nbsp;<span class="op" id="6239477">:=</span>&nbsp;<span class="keyword" id="6239480">range</span>&nbsp;<span class="ident" id="6239486"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span>&nbsp;<span class="op" id="6239496">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6239500">oldf</span>&nbsp;<span class="op" id="6239505">:=</span>&nbsp;<span class="op" id="6239508">&amp;</span><span class="ident" id="6239509"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6239514">.</span><span class="ident" id="6239515"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6239521">[</span><span class="ident" id="6239522"><a href="/gostd/encoding/xml/typeinfo.go.html#6239475">i</a></span><span class="op" id="6239523">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6239527">if</span>&nbsp;<span class="builtinfunc" id="6239530">len</span><span class="op" id="6239533">(</span><span class="ident" id="6239534"><a href="/gostd/encoding/xml/typeinfo.go.html#6239500">oldf</a></span><span class="op" id="6239538">.</span><span class="ident" id="6239539"><a href="/gostd/encoding/xml/typeinfo.go.html#6231948">idx</a></span><span class="op" id="6239542">)</span>&nbsp;<span class="op" id="6239544">==</span>&nbsp;<span class="builtinfunc" id="6239547">len</span><span class="op" id="6239550">(</span><span class="ident" id="6239551"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6239555">.</span><span class="ident" id="6239556"><a href="/gostd/encoding/xml/typeinfo.go.html#6231948">idx</a></span><span class="op" id="6239559">)</span>&nbsp;<span class="op" id="6239561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6239566">f1</span>&nbsp;<span class="op" id="6239569">:=</span>&nbsp;<span class="ident" id="6239572"><a href="/gostd/encoding/xml/typeinfo.go.html#6238154">typ</a></span><span class="op" id="6239575">.</span><span class="ident" id="6239576"><a href="/gostd/reflect/type.go.html#2785655">FieldByIndex</a></span><span class="op" id="6239588">(</span><span class="ident" id="6239589"><a href="/gostd/encoding/xml/typeinfo.go.html#6239500">oldf</a></span><span class="op" id="6239593">.</span><span class="ident" id="6239594"><a href="/gostd/encoding/xml/typeinfo.go.html#6231948">idx</a></span><span class="op" id="6239597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6239602">f2</span>&nbsp;<span class="op" id="6239605">:=</span>&nbsp;<span class="ident" id="6239608"><a href="/gostd/encoding/xml/typeinfo.go.html#6238154">typ</a></span><span class="op" id="6239611">.</span><span class="ident" id="6239612"><a href="/gostd/reflect/type.go.html#2785655">FieldByIndex</a></span><span class="op" id="6239624">(</span><span class="ident" id="6239625"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6239629">.</span><span class="ident" id="6239630"><a href="/gostd/encoding/xml/typeinfo.go.html#6231948">idx</a></span><span class="op" id="6239633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6239638">return</span>&nbsp;<span class="op" id="6239645">&amp;</span><span class="ident" id="6239646"><a href="/gostd/encoding/xml/typeinfo.go.html#6240222">TagPathError</a></span><span class="op" id="6239658">{</span><span class="ident" id="6239659"><a href="/gostd/encoding/xml/typeinfo.go.html#6238154">typ</a></span><span class="op" id="6239662">,</span>&nbsp;<span class="ident" id="6239664"><a href="/gostd/encoding/xml/typeinfo.go.html#6239566">f1</a></span><span class="op" id="6239666">.</span><span class="ident" id="6239667"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span><span class="op" id="6239671">,</span>&nbsp;<span class="ident" id="6239673"><a href="/gostd/encoding/xml/typeinfo.go.html#6239566">f1</a></span><span class="op" id="6239675">.</span><span class="ident" id="6239676"><a href="/gostd/reflect/type.go.html#2801069">Tag</a></span><span class="op" id="6239679">.</span><span class="ident" id="6239680"><a href="/gostd/reflect/type.go.html#2801940">Get</a></span><span class="op" id="6239683">(</span><span class="string" id="6239684">&#34;xml&#34;</span><span class="op" id="6239689">)</span><span class="op" id="6239690">,</span>&nbsp;<span class="ident" id="6239692"><a href="/gostd/encoding/xml/typeinfo.go.html#6239602">f2</a></span><span class="op" id="6239694">.</span><span class="ident" id="6239695"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span><span class="op" id="6239699">,</span>&nbsp;<span class="ident" id="6239701"><a href="/gostd/encoding/xml/typeinfo.go.html#6239602">f2</a></span><span class="op" id="6239703">.</span><span class="ident" id="6239704"><a href="/gostd/reflect/type.go.html#2801069">Tag</a></span><span class="op" id="6239707">.</span><span class="ident" id="6239708"><a href="/gostd/reflect/type.go.html#2801940">Get</a></span><span class="op" id="6239711">(</span><span class="string" id="6239712">&#34;xml&#34;</span><span class="op" id="6239717">)</span><span class="op" id="6239718">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6239722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6239725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6239729">//&nbsp;Otherwise,&nbsp;the&nbsp;new&nbsp;field&nbsp;is&nbsp;shallower,&nbsp;and&nbsp;thus&nbsp;takes&nbsp;precedence,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6239799">//&nbsp;so&nbsp;drop&nbsp;the&nbsp;conflicting&nbsp;fields&nbsp;from&nbsp;tinfo&nbsp;and&nbsp;append&nbsp;the&nbsp;new&nbsp;one.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6239869">for</span>&nbsp;<span class="ident" id="6239873">c</span>&nbsp;<span class="op" id="6239875">:=</span>&nbsp;<span class="builtinfunc" id="6239878">len</span><span class="op" id="6239881">(</span><span class="ident" id="6239882"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span><span class="op" id="6239891">)</span>&nbsp;<span class="op" id="6239893">-</span>&nbsp;<span class="num" id="6239895">1</span><span class="op" id="6239896">;</span>&nbsp;<span class="ident" id="6239898"><a href="/gostd/encoding/xml/typeinfo.go.html#6239873">c</a></span>&nbsp;<span class="op" id="6239900">&gt;=</span>&nbsp;<span class="num" id="6239903">0</span><span class="op" id="6239904">;</span>&nbsp;<span class="ident" id="6239906"><a href="/gostd/encoding/xml/typeinfo.go.html#6239873">c</a></span><span class="op" id="6239907">--</span>&nbsp;<span class="op" id="6239910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6239914">i</span>&nbsp;<span class="op" id="6239916">:=</span>&nbsp;<span class="ident" id="6239919"><a href="/gostd/encoding/xml/typeinfo.go.html#6238219">conflicts</a></span><span class="op" id="6239928">[</span><span class="ident" id="6239929"><a href="/gostd/encoding/xml/typeinfo.go.html#6239873">c</a></span><span class="op" id="6239930">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6239934">copy</span><span class="op" id="6239938">(</span><span class="ident" id="6239939"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6239944">.</span><span class="ident" id="6239945"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6239951">[</span><span class="ident" id="6239952"><a href="/gostd/encoding/xml/typeinfo.go.html#6239914">i</a></span><span class="op" id="6239953">:</span><span class="op" id="6239954">]</span><span class="op" id="6239955">,</span>&nbsp;<span class="ident" id="6239957"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6239962">.</span><span class="ident" id="6239963"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6239969">[</span><span class="ident" id="6239970"><a href="/gostd/encoding/xml/typeinfo.go.html#6239914">i</a></span><span class="op" id="6239971">+</span><span class="num" id="6239972">1</span><span class="op" id="6239973">:</span><span class="op" id="6239974">]</span><span class="op" id="6239975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6239979"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6239984">.</span><span class="ident" id="6239985"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span>&nbsp;<span class="op" id="6239992">=</span>&nbsp;<span class="ident" id="6239994"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6239999">.</span><span class="ident" id="6240000"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6240006">[</span><span class="op" id="6240007">:</span><span class="builtinfunc" id="6240008">len</span><span class="op" id="6240011">(</span><span class="ident" id="6240012"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6240017">.</span><span class="ident" id="6240018"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6240024">)</span><span class="op" id="6240025">-</span><span class="num" id="6240026">1</span><span class="op" id="6240027">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6240030">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6240033"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6240038">.</span><span class="ident" id="6240039"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span>&nbsp;<span class="op" id="6240046">=</span>&nbsp;<span class="builtinfunc" id="6240048">append</span><span class="op" id="6240054">(</span><span class="ident" id="6240055"><a href="/gostd/encoding/xml/typeinfo.go.html#6238172">tinfo</a></span><span class="op" id="6240060">.</span><span class="ident" id="6240061"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6240067">,</span>&nbsp;<span class="op" id="6240069">*</span><span class="ident" id="6240070"><a href="/gostd/encoding/xml/typeinfo.go.html#6238189">newf</a></span><span class="op" id="6240074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6240077">return</span>&nbsp;<span class="builtintype" id="6240084">nil</span><br>
<span class="lineno"></span><span class="op" id="6240088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6240091">//&nbsp;A&nbsp;TagPathError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process</span><br>
<span class="lineno">335</span><span class="comment" id="6240158">//&nbsp;caused&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;field&nbsp;tags&nbsp;with&nbsp;conflicting&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="6240217">type</span>&nbsp;<span class="ident" id="6240222">TagPathError</span>&nbsp;<span class="keyword" id="6240235">struct</span>&nbsp;<span class="op" id="6240242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6240245">Struct</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6240258"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6240265">.</span><span class="ident" id="6240266"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6240272">Field1</span><span class="op" id="6240278">,</span>&nbsp;<span class="ident" id="6240280">Tag1</span>&nbsp;<span class="builtintype" id="6240285">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6240293">Field2</span><span class="op" id="6240299">,</span>&nbsp;<span class="ident" id="6240301">Tag2</span>&nbsp;<span class="builtintype" id="6240306">string</span><br>
<span class="lineno">340</span><span class="op" id="6240313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6240316">func</span>&nbsp;<span class="op" id="6240321">(</span><span class="ident" id="6240322">e</span>&nbsp;<span class="op" id="6240324">*</span><span class="ident" id="6240325"><a href="/gostd/encoding/xml/typeinfo.go.html#6240222">TagPathError</a></span><span class="op" id="6240337">)</span>&nbsp;<span class="ident" id="6240339">Error</span><span class="op" id="6240344">(</span><span class="op" id="6240345">)</span>&nbsp;<span class="builtintype" id="6240347">string</span>&nbsp;<span class="op" id="6240354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6240357">return</span>&nbsp;<span class="ident" id="6240364"><a href="/gostd/encoding/xml/typeinfo.go.html#6231680">fmt</a></span><span class="op" id="6240367">.</span><span class="ident" id="6240368"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6240375">(</span><span class="string" id="6240376">&#34;%s&nbsp;field&nbsp;%q&nbsp;with&nbsp;tag&nbsp;%q&nbsp;conflicts&nbsp;with&nbsp;field&nbsp;%q&nbsp;with&nbsp;tag&nbsp;%q&#34;</span><span class="op" id="6240437">,</span>&nbsp;<span class="ident" id="6240439"><a href="/gostd/encoding/xml/typeinfo.go.html#6240322">e</a></span><span class="op" id="6240440">.</span><span class="ident" id="6240441"><a href="/gostd/encoding/xml/typeinfo.go.html#6240245">Struct</a></span><span class="op" id="6240447">,</span>&nbsp;<span class="ident" id="6240449"><a href="/gostd/encoding/xml/typeinfo.go.html#6240322">e</a></span><span class="op" id="6240450">.</span><span class="ident" id="6240451"><a href="/gostd/encoding/xml/typeinfo.go.html#6240272">Field1</a></span><span class="op" id="6240457">,</span>&nbsp;<span class="ident" id="6240459"><a href="/gostd/encoding/xml/typeinfo.go.html#6240322">e</a></span><span class="op" id="6240460">.</span><span class="ident" id="6240461"><a href="/gostd/encoding/xml/typeinfo.go.html#6240280">Tag1</a></span><span class="op" id="6240465">,</span>&nbsp;<span class="ident" id="6240467"><a href="/gostd/encoding/xml/typeinfo.go.html#6240322">e</a></span><span class="op" id="6240468">.</span><span class="ident" id="6240469"><a href="/gostd/encoding/xml/typeinfo.go.html#6240293">Field2</a></span><span class="op" id="6240475">,</span>&nbsp;<span class="ident" id="6240477"><a href="/gostd/encoding/xml/typeinfo.go.html#6240322">e</a></span><span class="op" id="6240478">.</span><span class="ident" id="6240479"><a href="/gostd/encoding/xml/typeinfo.go.html#6240301">Tag2</a></span><span class="op" id="6240483">)</span><br>
<span class="lineno"></span><span class="op" id="6240485">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span><span class="comment" id="6240488">//&nbsp;value&nbsp;returns&nbsp;v&#39;s&nbsp;field&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;finfo.</span><br>
<span class="lineno"></span><span class="comment" id="6240545">//&nbsp;It&#39;s&nbsp;equivalent&nbsp;to&nbsp;v.FieldByIndex(finfo.idx),&nbsp;but&nbsp;initializes</span><br>
<span class="lineno"></span><span class="comment" id="6240610">//&nbsp;and&nbsp;dereferences&nbsp;pointers&nbsp;as&nbsp;necessary.</span><br>
<span class="lineno"></span><span class="keyword" id="6240653">func</span>&nbsp;<span class="op" id="6240658">(</span><span class="ident" id="6240659">finfo</span>&nbsp;<span class="op" id="6240665">*</span><span class="ident" id="6240666"><a href="/gostd/encoding/xml/typeinfo.go.html#6231928">fieldInfo</a></span><span class="op" id="6240675">)</span>&nbsp;<span class="ident" id="6240677">value</span><span class="op" id="6240682">(</span><span class="ident" id="6240683">v</span>&nbsp;<span class="ident" id="6240685"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6240692">.</span><span class="ident" id="6240693"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="6240698">)</span>&nbsp;<span class="ident" id="6240700"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6240707">.</span><span class="ident" id="6240708"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span>&nbsp;<span class="op" id="6240714">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6240717">for</span>&nbsp;<span class="ident" id="6240721">i</span><span class="op" id="6240722">,</span>&nbsp;<span class="ident" id="6240724">x</span>&nbsp;<span class="op" id="6240726">:=</span>&nbsp;<span class="keyword" id="6240729">range</span>&nbsp;<span class="ident" id="6240735"><a href="/gostd/encoding/xml/typeinfo.go.html#6240659">finfo</a></span><span class="op" id="6240740">.</span><span class="ident" id="6240741"><a href="/gostd/encoding/xml/typeinfo.go.html#6231948">idx</a></span>&nbsp;<span class="op" id="6240745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6240749">if</span>&nbsp;<span class="ident" id="6240752"><a href="/gostd/encoding/xml/typeinfo.go.html#6240721">i</a></span>&nbsp;<span class="op" id="6240754">&gt;</span>&nbsp;<span class="num" id="6240756">0</span>&nbsp;<span class="op" id="6240758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6240763">t</span>&nbsp;<span class="op" id="6240765">:=</span>&nbsp;<span class="ident" id="6240768"><a href="/gostd/encoding/xml/typeinfo.go.html#6240683">v</a></span><span class="op" id="6240769">.</span><span class="ident" id="6240770"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6240774">(</span><span class="op" id="6240775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6240780">if</span>&nbsp;<span class="ident" id="6240783"><a href="/gostd/encoding/xml/typeinfo.go.html#6240763">t</a></span><span class="op" id="6240784">.</span><span class="ident" id="6240785"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6240789">(</span><span class="op" id="6240790">)</span>&nbsp;<span class="op" id="6240792">==</span>&nbsp;<span class="ident" id="6240795"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6240802">.</span><span class="ident" id="6240803"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="6240807">&amp;&amp;</span>&nbsp;<span class="ident" id="6240810"><a href="/gostd/encoding/xml/typeinfo.go.html#6240763">t</a></span><span class="op" id="6240811">.</span><span class="ident" id="6240812"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6240816">(</span><span class="op" id="6240817">)</span><span class="op" id="6240818">.</span><span class="ident" id="6240819"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6240823">(</span><span class="op" id="6240824">)</span>&nbsp;<span class="op" id="6240826">==</span>&nbsp;<span class="ident" id="6240829"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6240836">.</span><span class="ident" id="6240837"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span>&nbsp;<span class="op" id="6240844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6240850">if</span>&nbsp;<span class="ident" id="6240853"><a href="/gostd/encoding/xml/typeinfo.go.html#6240683">v</a></span><span class="op" id="6240854">.</span><span class="ident" id="6240855"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="6240860">(</span><span class="op" id="6240861">)</span>&nbsp;<span class="op" id="6240863">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6240870"><a href="/gostd/encoding/xml/typeinfo.go.html#6240683">v</a></span><span class="op" id="6240871">.</span><span class="ident" id="6240872"><a href="/gostd/reflect/value.go.html#2871444">Set</a></span><span class="op" id="6240875">(</span><span class="ident" id="6240876"><a href="/gostd/encoding/xml/typeinfo.go.html#6231687">reflect</a></span><span class="op" id="6240883">.</span><span class="ident" id="6240884"><a href="/gostd/reflect/value.go.html#2893570">New</a></span><span class="op" id="6240887">(</span><span class="ident" id="6240888"><a href="/gostd/encoding/xml/typeinfo.go.html#6240683">v</a></span><span class="op" id="6240889">.</span><span class="ident" id="6240890"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6240894">(</span><span class="op" id="6240895">)</span><span class="op" id="6240896">.</span><span class="ident" id="6240897"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6240901">(</span><span class="op" id="6240902">)</span><span class="op" id="6240903">)</span><span class="op" id="6240904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6240910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6240916"><a href="/gostd/encoding/xml/typeinfo.go.html#6240683">v</a></span>&nbsp;<span class="op" id="6240918">=</span>&nbsp;<span class="ident" id="6240920"><a href="/gostd/encoding/xml/typeinfo.go.html#6240683">v</a></span><span class="op" id="6240921">.</span><span class="ident" id="6240922"><a href="/gostd/reflect/value.go.html#2853087">Elem</a></span><span class="op" id="6240926">(</span><span class="op" id="6240927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6240932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6240936">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6240940"><a href="/gostd/encoding/xml/typeinfo.go.html#6240683">v</a></span>&nbsp;<span class="op" id="6240942">=</span>&nbsp;<span class="ident" id="6240944"><a href="/gostd/encoding/xml/typeinfo.go.html#6240683">v</a></span><span class="op" id="6240945">.</span><span class="ident" id="6240946"><a href="/gostd/reflect/value.go.html#2853921">Field</a></span><span class="op" id="6240951">(</span><span class="ident" id="6240952"><a href="/gostd/encoding/xml/typeinfo.go.html#6240724">x</a></span><span class="op" id="6240953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6240956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6240959">return</span>&nbsp;<span class="ident" id="6240966"><a href="/gostd/encoding/xml/typeinfo.go.html#6240683">v</a></span><br>
<span class="lineno"></span><span class="op" id="6240968">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
