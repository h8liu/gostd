<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6475111">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6475166">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6475220">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6475271">package</span>&nbsp;<span class="ident" id="6475279">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6475288">import</span>&nbsp;<span class="op" id="6475295">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475298">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475307">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475314">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475320">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475326">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6475337">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6475344">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6475347">type</span>&nbsp;<span class="ident" id="6475352">InternalExample</span>&nbsp;<span class="keyword" id="6475368">struct</span>&nbsp;<span class="op" id="6475375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475378">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6475385">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475393">F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6475400">func</span><span class="op" id="6475404">(</span><span class="op" id="6475405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475408">Output</span>&nbsp;<span class="builtintype" id="6475415">string</span><br>
<span class="lineno">20</span><span class="op" id="6475422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6475425">func</span>&nbsp;<span class="ident" id="6475430">RunExamples</span><span class="op" id="6475441">(</span><span class="ident" id="6475442">matchString</span>&nbsp;<span class="keyword" id="6475454">func</span><span class="op" id="6475458">(</span><span class="ident" id="6475459">pat</span><span class="op" id="6475462">,</span>&nbsp;<span class="ident" id="6475464">str</span>&nbsp;<span class="builtintype" id="6475468">string</span><span class="op" id="6475474">)</span>&nbsp;<span class="op" id="6475476">(</span><span class="builtintype" id="6475477">bool</span><span class="op" id="6475481">,</span>&nbsp;<span class="builtintype" id="6475483">error</span><span class="op" id="6475488">)</span><span class="op" id="6475489">,</span>&nbsp;<span class="ident" id="6475491">examples</span>&nbsp;<span class="op" id="6475500">[</span><span class="op" id="6475501">]</span><span class="ident" id="6475502"><a href="/testing/example.go.html#6475352">InternalExample</a></span><span class="op" id="6475517">)</span>&nbsp;<span class="op" id="6475519">(</span><span class="ident" id="6475520">ok</span>&nbsp;<span class="builtintype" id="6475523">bool</span><span class="op" id="6475527">)</span>&nbsp;<span class="op" id="6475529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475532"><a href="/testing/example.go.html#6475520">ok</a></span>&nbsp;<span class="op" id="6475535">=</span>&nbsp;<span class="ident" id="6475537">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475544">var</span>&nbsp;<span class="ident" id="6475548">eg</span>&nbsp;<span class="ident" id="6475551"><a href="/testing/example.go.html#6475352">InternalExample</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475569">for</span>&nbsp;<span class="ident" id="6475573">_</span><span class="op" id="6475574">,</span>&nbsp;<span class="ident" id="6475576"><a href="/testing/example.go.html#6475548">eg</a></span>&nbsp;<span class="op" id="6475579">=</span>&nbsp;<span class="keyword" id="6475581">range</span>&nbsp;<span class="ident" id="6475587"><a href="/testing/example.go.html#6475491">examples</a></span>&nbsp;<span class="op" id="6475596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475600">matched</span><span class="op" id="6475607">,</span>&nbsp;<span class="ident" id="6475609">err</span>&nbsp;<span class="op" id="6475613">:=</span>&nbsp;<span class="ident" id="6475616"><a href="/testing/example.go.html#6475442">matchString</a></span><span class="op" id="6475627">(</span><span class="op" id="6475628">*</span><span class="ident" id="6475629"><a href="/testing/testing.go.html#6483459">match</a></span><span class="op" id="6475634">,</span>&nbsp;<span class="ident" id="6475636"><a href="/testing/example.go.html#6475548">eg</a></span><span class="op" id="6475638">.</span><span class="ident" id="6475639">Name</span><span class="op" id="6475643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475647">if</span>&nbsp;<span class="ident" id="6475650"><a href="/testing/example.go.html#6475609">err</a></span>&nbsp;<span class="op" id="6475654">!=</span>&nbsp;<span class="ident" id="6475657">nil</span>&nbsp;<span class="op" id="6475661">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475666"><a href="/testing/example.go.html#6475307">fmt</a></span><span class="op" id="6475669">.</span><span class="ident" id="6475670">Fprintf</span><span class="op" id="6475677">(</span><span class="ident" id="6475678"><a href="/testing/example.go.html#6475320">os</a></span><span class="op" id="6475680">.</span><span class="ident" id="6475681">Stderr</span><span class="op" id="6475687">,</span>&nbsp;<span class="string" id="6475689">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="6475734">,</span>&nbsp;<span class="ident" id="6475736"><a href="/testing/example.go.html#6475609">err</a></span><span class="op" id="6475739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475744"><a href="/testing/example.go.html#6475320">os</a></span><span class="op" id="6475746">.</span><span class="ident" id="6475747">Exit</span><span class="op" id="6475751">(</span><span class="num" id="6475752">1</span><span class="op" id="6475753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475761">if</span>&nbsp;<span class="op" id="6475764">!</span><span class="ident" id="6475765"><a href="/testing/example.go.html#6475600">matched</a></span>&nbsp;<span class="op" id="6475773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475778">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475793">if</span>&nbsp;<span class="op" id="6475796">!</span><span class="ident" id="6475797"><a href="/testing/example.go.html#6475852">runExample</a></span><span class="op" id="6475807">(</span><span class="ident" id="6475808"><a href="/testing/example.go.html#6475548">eg</a></span><span class="op" id="6475810">)</span>&nbsp;<span class="op" id="6475812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475817"><a href="/testing/example.go.html#6475520">ok</a></span>&nbsp;<span class="op" id="6475820">=</span>&nbsp;<span class="ident" id="6475822">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475833">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475837">return</span><br>
<span class="lineno"></span><span class="op" id="6475844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6475847">func</span>&nbsp;<span class="ident" id="6475852">runExample</span><span class="op" id="6475862">(</span><span class="ident" id="6475863">eg</span>&nbsp;<span class="ident" id="6475866"><a href="/testing/example.go.html#6475352">InternalExample</a></span><span class="op" id="6475881">)</span>&nbsp;<span class="op" id="6475883">(</span><span class="ident" id="6475884">ok</span>&nbsp;<span class="builtintype" id="6475887">bool</span><span class="op" id="6475891">)</span>&nbsp;<span class="op" id="6475893">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475896">if</span>&nbsp;<span class="op" id="6475899">*</span><span class="ident" id="6475900"><a href="/testing/testing.go.html#6483257">chatty</a></span>&nbsp;<span class="op" id="6475907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475911"><a href="/testing/example.go.html#6475307">fmt</a></span><span class="op" id="6475914">.</span><span class="ident" id="6475915">Printf</span><span class="op" id="6475921">(</span><span class="string" id="6475922">&#34;===&nbsp;RUN:&nbsp;%s\n&#34;</span><span class="op" id="6475937">,</span>&nbsp;<span class="ident" id="6475939"><a href="/testing/example.go.html#6475863">eg</a></span><span class="op" id="6475941">.</span><span class="ident" id="6475942">Name</span><span class="op" id="6475946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6475953">//&nbsp;Capture&nbsp;stdout.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475973">stdout</span>&nbsp;<span class="op" id="6475980">:=</span>&nbsp;<span class="ident" id="6475983"><a href="/testing/example.go.html#6475320">os</a></span><span class="op" id="6475985">.</span><span class="ident" id="6475986">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475994">r</span><span class="op" id="6475995">,</span>&nbsp;<span class="ident" id="6475997">w</span><span class="op" id="6475998">,</span>&nbsp;<span class="ident" id="6476000">err</span>&nbsp;<span class="op" id="6476004">:=</span>&nbsp;<span class="ident" id="6476007"><a href="/testing/example.go.html#6475320">os</a></span><span class="op" id="6476009">.</span><span class="ident" id="6476010">Pipe</span><span class="op" id="6476014">(</span><span class="op" id="6476015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476018">if</span>&nbsp;<span class="ident" id="6476021"><a href="/testing/example.go.html#6476000">err</a></span>&nbsp;<span class="op" id="6476025">!=</span>&nbsp;<span class="ident" id="6476028">nil</span>&nbsp;<span class="op" id="6476032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476036"><a href="/testing/example.go.html#6475307">fmt</a></span><span class="op" id="6476039">.</span><span class="ident" id="6476040">Fprintln</span><span class="op" id="6476048">(</span><span class="ident" id="6476049"><a href="/testing/example.go.html#6475320">os</a></span><span class="op" id="6476051">.</span><span class="ident" id="6476052">Stderr</span><span class="op" id="6476058">,</span>&nbsp;<span class="ident" id="6476060"><a href="/testing/example.go.html#6476000">err</a></span><span class="op" id="6476063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476067"><a href="/testing/example.go.html#6475320">os</a></span><span class="op" id="6476069">.</span><span class="ident" id="6476070">Exit</span><span class="op" id="6476074">(</span><span class="num" id="6476075">1</span><span class="op" id="6476076">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476082"><a href="/testing/example.go.html#6475320">os</a></span><span class="op" id="6476084">.</span><span class="ident" id="6476085">Stdout</span>&nbsp;<span class="op" id="6476092">=</span>&nbsp;<span class="ident" id="6476094"><a href="/testing/example.go.html#6475997">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476097">outC</span>&nbsp;<span class="op" id="6476102">:=</span>&nbsp;<span class="builtinfunc" id="6476105">make</span><span class="op" id="6476109">(</span><span class="keyword" id="6476110">chan</span>&nbsp;<span class="builtintype" id="6476115">string</span><span class="op" id="6476121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476124">go</span>&nbsp;<span class="keyword" id="6476127">func</span><span class="op" id="6476131">(</span><span class="op" id="6476132">)</span>&nbsp;<span class="op" id="6476134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476138">buf</span>&nbsp;<span class="op" id="6476142">:=</span>&nbsp;<span class="builtinfunc" id="6476145">new</span><span class="op" id="6476148">(</span><span class="ident" id="6476149"><a href="/testing/example.go.html#6475298">bytes</a></span><span class="op" id="6476154">.</span><span class="ident" id="6476155">Buffer</span><span class="op" id="6476161">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476165">_</span><span class="op" id="6476166">,</span>&nbsp;<span class="ident" id="6476168">err</span>&nbsp;<span class="op" id="6476172">:=</span>&nbsp;<span class="ident" id="6476175"><a href="/testing/example.go.html#6475314">io</a></span><span class="op" id="6476177">.</span><span class="ident" id="6476178">Copy</span><span class="op" id="6476182">(</span><span class="ident" id="6476183"><a href="/testing/example.go.html#6476138">buf</a></span><span class="op" id="6476186">,</span>&nbsp;<span class="ident" id="6476188"><a href="/testing/example.go.html#6475994">r</a></span><span class="op" id="6476189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476193"><a href="/testing/example.go.html#6475994">r</a></span><span class="op" id="6476194">.</span><span class="ident" id="6476195">Close</span><span class="op" id="6476200">(</span><span class="op" id="6476201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476205">if</span>&nbsp;<span class="ident" id="6476208"><a href="/testing/example.go.html#6476168">err</a></span>&nbsp;<span class="op" id="6476212">!=</span>&nbsp;<span class="ident" id="6476215">nil</span>&nbsp;<span class="op" id="6476219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476224"><a href="/testing/example.go.html#6475307">fmt</a></span><span class="op" id="6476227">.</span><span class="ident" id="6476228">Fprintf</span><span class="op" id="6476235">(</span><span class="ident" id="6476236"><a href="/testing/example.go.html#6475320">os</a></span><span class="op" id="6476238">.</span><span class="ident" id="6476239">Stderr</span><span class="op" id="6476245">,</span>&nbsp;<span class="string" id="6476247">&#34;testing:&nbsp;copying&nbsp;pipe:&nbsp;%v\n&#34;</span><span class="op" id="6476276">,</span>&nbsp;<span class="ident" id="6476278"><a href="/testing/example.go.html#6476168">err</a></span><span class="op" id="6476281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476286"><a href="/testing/example.go.html#6475320">os</a></span><span class="op" id="6476288">.</span><span class="ident" id="6476289">Exit</span><span class="op" id="6476293">(</span><span class="num" id="6476294">1</span><span class="op" id="6476295">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476303"><a href="/testing/example.go.html#6476097">outC</a></span>&nbsp;<span class="op" id="6476308">&lt;-</span>&nbsp;<span class="ident" id="6476311"><a href="/testing/example.go.html#6476138">buf</a></span><span class="op" id="6476314">.</span><span class="ident" id="6476315">String</span><span class="op" id="6476321">(</span><span class="op" id="6476322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476325">}</span><span class="op" id="6476326">(</span><span class="op" id="6476327">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476331">start</span>&nbsp;<span class="op" id="6476337">:=</span>&nbsp;<span class="ident" id="6476340"><a href="/testing/example.go.html#6475337">time</a></span><span class="op" id="6476344">.</span><span class="ident" id="6476345">Now</span><span class="op" id="6476348">(</span><span class="op" id="6476349">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476352"><a href="/testing/example.go.html#6475884">ok</a></span>&nbsp;<span class="op" id="6476355">=</span>&nbsp;<span class="ident" id="6476357">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6476364">//&nbsp;Clean&nbsp;up&nbsp;in&nbsp;a&nbsp;deferred&nbsp;call&nbsp;so&nbsp;we&nbsp;can&nbsp;recover&nbsp;if&nbsp;the&nbsp;example&nbsp;panics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476437">defer</span>&nbsp;<span class="keyword" id="6476443">func</span><span class="op" id="6476447">(</span><span class="op" id="6476448">)</span>&nbsp;<span class="op" id="6476450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476454">dstr</span>&nbsp;<span class="op" id="6476459">:=</span>&nbsp;<span class="ident" id="6476462"><a href="/testing/testing.go.html#6486324">fmtDuration</a></span><span class="op" id="6476473">(</span><span class="ident" id="6476474"><a href="/testing/example.go.html#6475337">time</a></span><span class="op" id="6476478">.</span><span class="ident" id="6476479">Now</span><span class="op" id="6476482">(</span><span class="op" id="6476483">)</span><span class="op" id="6476484">.</span><span class="ident" id="6476485">Sub</span><span class="op" id="6476488">(</span><span class="ident" id="6476489"><a href="/testing/example.go.html#6476331">start</a></span><span class="op" id="6476494">)</span><span class="op" id="6476495">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6476500">//&nbsp;Close&nbsp;pipe,&nbsp;restore&nbsp;stdout,&nbsp;get&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476545"><a href="/testing/example.go.html#6475997">w</a></span><span class="op" id="6476546">.</span><span class="ident" id="6476547">Close</span><span class="op" id="6476552">(</span><span class="op" id="6476553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476557"><a href="/testing/example.go.html#6475320">os</a></span><span class="op" id="6476559">.</span><span class="ident" id="6476560">Stdout</span>&nbsp;<span class="op" id="6476567">=</span>&nbsp;<span class="ident" id="6476569"><a href="/testing/example.go.html#6475973">stdout</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476578">out</span>&nbsp;<span class="op" id="6476582">:=</span>&nbsp;<span class="op" id="6476585">&lt;-</span><span class="ident" id="6476587"><a href="/testing/example.go.html#6476097">outC</a></span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476595">var</span>&nbsp;<span class="ident" id="6476599">fail</span>&nbsp;<span class="builtintype" id="6476604">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476613">err</span>&nbsp;<span class="op" id="6476617">:=</span>&nbsp;<span class="builtinfunc" id="6476620">recover</span><span class="op" id="6476627">(</span><span class="op" id="6476628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476632">if</span>&nbsp;<span class="ident" id="6476635">g</span><span class="op" id="6476636">,</span>&nbsp;<span class="ident" id="6476638">e</span>&nbsp;<span class="op" id="6476640">:=</span>&nbsp;<span class="ident" id="6476643"><a href="/testing/example.go.html#6475326">strings</a></span><span class="op" id="6476650">.</span><span class="ident" id="6476651">TrimSpace</span><span class="op" id="6476660">(</span><span class="ident" id="6476661"><a href="/testing/example.go.html#6476578">out</a></span><span class="op" id="6476664">)</span><span class="op" id="6476665">,</span>&nbsp;<span class="ident" id="6476667"><a href="/testing/example.go.html#6475326">strings</a></span><span class="op" id="6476674">.</span><span class="ident" id="6476675">TrimSpace</span><span class="op" id="6476684">(</span><span class="ident" id="6476685"><a href="/testing/example.go.html#6475863">eg</a></span><span class="op" id="6476687">.</span><span class="ident" id="6476688">Output</span><span class="op" id="6476694">)</span><span class="op" id="6476695">;</span>&nbsp;<span class="ident" id="6476697"><a href="/testing/example.go.html#6476635">g</a></span>&nbsp;<span class="op" id="6476699">!=</span>&nbsp;<span class="ident" id="6476702"><a href="/testing/example.go.html#6476638">e</a></span>&nbsp;<span class="op" id="6476704">&amp;&amp;</span>&nbsp;<span class="ident" id="6476707"><a href="/testing/example.go.html#6476613">err</a></span>&nbsp;<span class="op" id="6476711">==</span>&nbsp;<span class="ident" id="6476714">nil</span>&nbsp;<span class="op" id="6476718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476723"><a href="/testing/example.go.html#6476599">fail</a></span>&nbsp;<span class="op" id="6476728">=</span>&nbsp;<span class="ident" id="6476730"><a href="/testing/example.go.html#6475307">fmt</a></span><span class="op" id="6476733">.</span><span class="ident" id="6476734">Sprintf</span><span class="op" id="6476741">(</span><span class="string" id="6476742">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="6476765">,</span>&nbsp;<span class="ident" id="6476767"><a href="/testing/example.go.html#6476635">g</a></span><span class="op" id="6476768">,</span>&nbsp;<span class="ident" id="6476770"><a href="/testing/example.go.html#6476638">e</a></span><span class="op" id="6476771">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476779">if</span>&nbsp;<span class="ident" id="6476782"><a href="/testing/example.go.html#6476599">fail</a></span>&nbsp;<span class="op" id="6476787">!=</span>&nbsp;<span class="string" id="6476790">&#34;&#34;</span>&nbsp;<span class="op" id="6476793">||</span>&nbsp;<span class="ident" id="6476796"><a href="/testing/example.go.html#6476613">err</a></span>&nbsp;<span class="op" id="6476800">!=</span>&nbsp;<span class="ident" id="6476803">nil</span>&nbsp;<span class="op" id="6476807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476812"><a href="/testing/example.go.html#6475307">fmt</a></span><span class="op" id="6476815">.</span><span class="ident" id="6476816">Printf</span><span class="op" id="6476822">(</span><span class="string" id="6476823">&#34;---&nbsp;FAIL:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><span class="op" id="6476846">,</span>&nbsp;<span class="ident" id="6476848"><a href="/testing/example.go.html#6475863">eg</a></span><span class="op" id="6476850">.</span><span class="ident" id="6476851">Name</span><span class="op" id="6476855">,</span>&nbsp;<span class="ident" id="6476857"><a href="/testing/example.go.html#6476454">dstr</a></span><span class="op" id="6476861">,</span>&nbsp;<span class="ident" id="6476863"><a href="/testing/example.go.html#6476599">fail</a></span><span class="op" id="6476867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476872"><a href="/testing/example.go.html#6475884">ok</a></span>&nbsp;<span class="op" id="6476875">=</span>&nbsp;<span class="ident" id="6476877">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476885">}</span>&nbsp;<span class="keyword" id="6476887">else</span>&nbsp;<span class="keyword" id="6476892">if</span>&nbsp;<span class="op" id="6476895">*</span><span class="ident" id="6476896"><a href="/testing/testing.go.html#6483257">chatty</a></span>&nbsp;<span class="op" id="6476903">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476908"><a href="/testing/example.go.html#6475307">fmt</a></span><span class="op" id="6476911">.</span><span class="ident" id="6476912">Printf</span><span class="op" id="6476918">(</span><span class="string" id="6476919">&#34;---&nbsp;PASS:&nbsp;%s&nbsp;(%s)\n&#34;</span><span class="op" id="6476940">,</span>&nbsp;<span class="ident" id="6476942"><a href="/testing/example.go.html#6475863">eg</a></span><span class="op" id="6476944">.</span><span class="ident" id="6476945">Name</span><span class="op" id="6476949">,</span>&nbsp;<span class="ident" id="6476951"><a href="/testing/example.go.html#6476454">dstr</a></span><span class="op" id="6476955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476963">if</span>&nbsp;<span class="ident" id="6476966"><a href="/testing/example.go.html#6476613">err</a></span>&nbsp;<span class="op" id="6476970">!=</span>&nbsp;<span class="ident" id="6476973">nil</span>&nbsp;<span class="op" id="6476977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6476982">panic</span><span class="op" id="6476987">(</span><span class="ident" id="6476988"><a href="/testing/example.go.html#6476613">err</a></span><span class="op" id="6476991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476995">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476998">}</span><span class="op" id="6476999">(</span><span class="op" id="6477000">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6477004">//&nbsp;Run&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477021"><a href="/testing/example.go.html#6475863">eg</a></span><span class="op" id="6477023">.</span><span class="ident" id="6477024">F</span><span class="op" id="6477025">(</span><span class="op" id="6477026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477029">return</span><br>
<span class="lineno">100</span><span class="op" id="6477036">}</span>
</div>
</body>
</html>
