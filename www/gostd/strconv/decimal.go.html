<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1743193">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1743248">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1743302">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1743353">//&nbsp;Multiprecision&nbsp;decimal&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="1743388">//&nbsp;For&nbsp;floating-point&nbsp;formatting&nbsp;only;&nbsp;not&nbsp;general&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="comment" id="1743448">//&nbsp;Only&nbsp;operations&nbsp;are&nbsp;assign&nbsp;and&nbsp;(binary)&nbsp;left/right&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="1743509">//&nbsp;Can&nbsp;do&nbsp;binary&nbsp;floating&nbsp;point&nbsp;in&nbsp;multiprecision&nbsp;decimal&nbsp;precisely</span><br>
<span class="lineno"></span><span class="comment" id="1743577">//&nbsp;because&nbsp;2&nbsp;divides&nbsp;10;&nbsp;cannot&nbsp;do&nbsp;decimal&nbsp;floating&nbsp;point</span><br>
<span class="lineno">10</span><span class="comment" id="1743635">//&nbsp;in&nbsp;multiprecision&nbsp;binary&nbsp;precisely.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1743675">package</span>&nbsp;<span class="ident" id="1743683">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1743692">type</span>&nbsp;<span class="ident" id="1743697">decimal</span>&nbsp;<span class="keyword" id="1743705">struct</span>&nbsp;<span class="op" id="1743712">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743715">d</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1743721">[</span><span class="num" id="1743722">800</span><span class="op" id="1743725">]</span><span class="builtintype" id="1743726">byte</span>&nbsp;<span class="comment" id="1743731">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743742">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1743748">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1743758">//&nbsp;number&nbsp;of&nbsp;digits&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743784">dp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1743790">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1743800">//&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743818">neg</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1743824">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743830">trunc</span>&nbsp;<span class="builtintype" id="1743836">bool</span>&nbsp;<span class="comment" id="1743841">//&nbsp;discarded&nbsp;nonzero&nbsp;digits&nbsp;beyond&nbsp;d[:nd]</span><br>
<span class="lineno">20</span><span class="op" id="1743883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1743886">func</span>&nbsp;<span class="op" id="1743891">(</span><span class="ident" id="1743892">a</span>&nbsp;<span class="op" id="1743894">*</span><span class="ident" id="1743895">decimal</span><span class="op" id="1743902">)</span>&nbsp;<span class="ident" id="1743904">String</span><span class="op" id="1743910">(</span><span class="op" id="1743911">)</span>&nbsp;<span class="builtintype" id="1743913">string</span>&nbsp;<span class="op" id="1743920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743923">n</span>&nbsp;<span class="op" id="1743925">:=</span>&nbsp;<span class="num" id="1743928">10</span>&nbsp;<span class="op" id="1743931">+</span>&nbsp;<span class="ident" id="1743933">a</span><span class="op" id="1743934">.</span><span class="ident" id="1743935">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743939">if</span>&nbsp;<span class="ident" id="1743942">a</span><span class="op" id="1743943">.</span><span class="ident" id="1743944">dp</span>&nbsp;<span class="op" id="1743947">&gt;</span>&nbsp;<span class="num" id="1743949">0</span>&nbsp;<span class="op" id="1743951">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743955">n</span>&nbsp;<span class="op" id="1743957">+=</span>&nbsp;<span class="ident" id="1743960">a</span><span class="op" id="1743961">.</span><span class="ident" id="1743962">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743969">if</span>&nbsp;<span class="ident" id="1743972">a</span><span class="op" id="1743973">.</span><span class="ident" id="1743974">dp</span>&nbsp;<span class="op" id="1743977">&lt;</span>&nbsp;<span class="num" id="1743979">0</span>&nbsp;<span class="op" id="1743981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743985">n</span>&nbsp;<span class="op" id="1743987">+=</span>&nbsp;<span class="op" id="1743990">-</span><span class="ident" id="1743991">a</span><span class="op" id="1743992">.</span><span class="ident" id="1743993">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743997">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744001">buf</span>&nbsp;<span class="op" id="1744005">:=</span>&nbsp;<span class="builtinfunc" id="1744008">make</span><span class="op" id="1744012">(</span><span class="op" id="1744013">[</span><span class="op" id="1744014">]</span><span class="builtintype" id="1744015">byte</span><span class="op" id="1744019">,</span>&nbsp;<span class="ident" id="1744021">n</span><span class="op" id="1744022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744025">w</span>&nbsp;<span class="op" id="1744027">:=</span>&nbsp;<span class="num" id="1744030">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744033">switch</span>&nbsp;<span class="op" id="1744040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744043">case</span>&nbsp;<span class="ident" id="1744048">a</span><span class="op" id="1744049">.</span><span class="ident" id="1744050">nd</span>&nbsp;<span class="op" id="1744053">==</span>&nbsp;<span class="num" id="1744056">0</span><span class="op" id="1744057">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744061">return</span>&nbsp;<span class="string" id="1744068">&#34;0&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744074">case</span>&nbsp;<span class="ident" id="1744079">a</span><span class="op" id="1744080">.</span><span class="ident" id="1744081">dp</span>&nbsp;<span class="op" id="1744084">&lt;=</span>&nbsp;<span class="num" id="1744087">0</span><span class="op" id="1744088">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1744092">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;decimal&nbsp;point&nbsp;and&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744147">buf</span><span class="op" id="1744150">[</span><span class="ident" id="1744151">w</span><span class="op" id="1744152">]</span>&nbsp;<span class="op" id="1744154">=</span>&nbsp;<span class="string" id="1744156">&#39;0&#39;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744162">w</span><span class="op" id="1744163">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744168">buf</span><span class="op" id="1744171">[</span><span class="ident" id="1744172">w</span><span class="op" id="1744173">]</span>&nbsp;<span class="op" id="1744175">=</span>&nbsp;<span class="string" id="1744177">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744183">w</span><span class="op" id="1744184">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744189">w</span>&nbsp;<span class="op" id="1744191">+=</span>&nbsp;<span class="ident" id="1744194">digitZero</span><span class="op" id="1744203">(</span><span class="ident" id="1744204">buf</span><span class="op" id="1744207">[</span><span class="ident" id="1744208">w</span>&nbsp;<span class="op" id="1744210">:</span>&nbsp;<span class="ident" id="1744212">w</span><span class="op" id="1744213">+</span><span class="op" id="1744214">-</span><span class="ident" id="1744215">a</span><span class="op" id="1744216">.</span><span class="ident" id="1744217">dp</span><span class="op" id="1744219">]</span><span class="op" id="1744220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744224">w</span>&nbsp;<span class="op" id="1744226">+=</span>&nbsp;<span class="builtinfunc" id="1744229">copy</span><span class="op" id="1744233">(</span><span class="ident" id="1744234">buf</span><span class="op" id="1744237">[</span><span class="ident" id="1744238">w</span><span class="op" id="1744239">:</span><span class="op" id="1744240">]</span><span class="op" id="1744241">,</span>&nbsp;<span class="ident" id="1744243">a</span><span class="op" id="1744244">.</span><span class="ident" id="1744245">d</span><span class="op" id="1744246">[</span><span class="num" id="1744247">0</span><span class="op" id="1744248">:</span><span class="ident" id="1744249">a</span><span class="op" id="1744250">.</span><span class="ident" id="1744251">nd</span><span class="op" id="1744253">]</span><span class="op" id="1744254">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744258">case</span>&nbsp;<span class="ident" id="1744263">a</span><span class="op" id="1744264">.</span><span class="ident" id="1744265">dp</span>&nbsp;<span class="op" id="1744268">&lt;</span>&nbsp;<span class="ident" id="1744270">a</span><span class="op" id="1744271">.</span><span class="ident" id="1744272">nd</span><span class="op" id="1744274">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1744278">//&nbsp;decimal&nbsp;point&nbsp;in&nbsp;middle&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744317">w</span>&nbsp;<span class="op" id="1744319">+=</span>&nbsp;<span class="builtinfunc" id="1744322">copy</span><span class="op" id="1744326">(</span><span class="ident" id="1744327">buf</span><span class="op" id="1744330">[</span><span class="ident" id="1744331">w</span><span class="op" id="1744332">:</span><span class="op" id="1744333">]</span><span class="op" id="1744334">,</span>&nbsp;<span class="ident" id="1744336">a</span><span class="op" id="1744337">.</span><span class="ident" id="1744338">d</span><span class="op" id="1744339">[</span><span class="num" id="1744340">0</span><span class="op" id="1744341">:</span><span class="ident" id="1744342">a</span><span class="op" id="1744343">.</span><span class="ident" id="1744344">dp</span><span class="op" id="1744346">]</span><span class="op" id="1744347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744351">buf</span><span class="op" id="1744354">[</span><span class="ident" id="1744355">w</span><span class="op" id="1744356">]</span>&nbsp;<span class="op" id="1744358">=</span>&nbsp;<span class="string" id="1744360">&#39;.&#39;</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744366">w</span><span class="op" id="1744367">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744372">w</span>&nbsp;<span class="op" id="1744374">+=</span>&nbsp;<span class="builtinfunc" id="1744377">copy</span><span class="op" id="1744381">(</span><span class="ident" id="1744382">buf</span><span class="op" id="1744385">[</span><span class="ident" id="1744386">w</span><span class="op" id="1744387">:</span><span class="op" id="1744388">]</span><span class="op" id="1744389">,</span>&nbsp;<span class="ident" id="1744391">a</span><span class="op" id="1744392">.</span><span class="ident" id="1744393">d</span><span class="op" id="1744394">[</span><span class="ident" id="1744395">a</span><span class="op" id="1744396">.</span><span class="ident" id="1744397">dp</span><span class="op" id="1744399">:</span><span class="ident" id="1744400">a</span><span class="op" id="1744401">.</span><span class="ident" id="1744402">nd</span><span class="op" id="1744404">]</span><span class="op" id="1744405">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744409">default</span><span class="op" id="1744416">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1744420">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;digits&nbsp;and&nbsp;decimal&nbsp;point</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744475">w</span>&nbsp;<span class="op" id="1744477">+=</span>&nbsp;<span class="builtinfunc" id="1744480">copy</span><span class="op" id="1744484">(</span><span class="ident" id="1744485">buf</span><span class="op" id="1744488">[</span><span class="ident" id="1744489">w</span><span class="op" id="1744490">:</span><span class="op" id="1744491">]</span><span class="op" id="1744492">,</span>&nbsp;<span class="ident" id="1744494">a</span><span class="op" id="1744495">.</span><span class="ident" id="1744496">d</span><span class="op" id="1744497">[</span><span class="num" id="1744498">0</span><span class="op" id="1744499">:</span><span class="ident" id="1744500">a</span><span class="op" id="1744501">.</span><span class="ident" id="1744502">nd</span><span class="op" id="1744504">]</span><span class="op" id="1744505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744509">w</span>&nbsp;<span class="op" id="1744511">+=</span>&nbsp;<span class="ident" id="1744514">digitZero</span><span class="op" id="1744523">(</span><span class="ident" id="1744524">buf</span><span class="op" id="1744527">[</span><span class="ident" id="1744528">w</span>&nbsp;<span class="op" id="1744530">:</span>&nbsp;<span class="ident" id="1744532">w</span><span class="op" id="1744533">+</span><span class="ident" id="1744534">a</span><span class="op" id="1744535">.</span><span class="ident" id="1744536">dp</span><span class="op" id="1744538">-</span><span class="ident" id="1744539">a</span><span class="op" id="1744540">.</span><span class="ident" id="1744541">nd</span><span class="op" id="1744543">]</span><span class="op" id="1744544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1744547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744550">return</span>&nbsp;<span class="builtintype" id="1744557">string</span><span class="op" id="1744563">(</span><span class="ident" id="1744564">buf</span><span class="op" id="1744567">[</span><span class="num" id="1744568">0</span><span class="op" id="1744569">:</span><span class="ident" id="1744570">w</span><span class="op" id="1744571">]</span><span class="op" id="1744572">)</span><br>
<span class="lineno"></span><span class="op" id="1744574">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="1744577">func</span>&nbsp;<span class="ident" id="1744582">digitZero</span><span class="op" id="1744591">(</span><span class="ident" id="1744592">dst</span>&nbsp;<span class="op" id="1744596">[</span><span class="op" id="1744597">]</span><span class="builtintype" id="1744598">byte</span><span class="op" id="1744602">)</span>&nbsp;<span class="builtintype" id="1744604">int</span>&nbsp;<span class="op" id="1744608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744611">for</span>&nbsp;<span class="ident" id="1744615">i</span>&nbsp;<span class="op" id="1744617">:=</span>&nbsp;<span class="keyword" id="1744620">range</span>&nbsp;<span class="ident" id="1744626">dst</span>&nbsp;<span class="op" id="1744630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744634">dst</span><span class="op" id="1744637">[</span><span class="ident" id="1744638">i</span><span class="op" id="1744639">]</span>&nbsp;<span class="op" id="1744641">=</span>&nbsp;<span class="string" id="1744643">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1744648">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744651">return</span>&nbsp;<span class="builtinfunc" id="1744658">len</span><span class="op" id="1744661">(</span><span class="ident" id="1744662">dst</span><span class="op" id="1744665">)</span><br>
<span class="lineno"></span><span class="op" id="1744667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1744670">//&nbsp;trim&nbsp;trailing&nbsp;zeros&nbsp;from&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="1744706">//&nbsp;(They&nbsp;are&nbsp;meaningless;&nbsp;the&nbsp;decimal&nbsp;point&nbsp;is&nbsp;tracked</span><br>
<span class="lineno">70</span><span class="comment" id="1744761">//&nbsp;independent&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;digits.)</span><br>
<span class="lineno"></span><span class="keyword" id="1744802">func</span>&nbsp;<span class="ident" id="1744807">trim</span><span class="op" id="1744811">(</span><span class="ident" id="1744812">a</span>&nbsp;<span class="op" id="1744814">*</span><span class="ident" id="1744815">decimal</span><span class="op" id="1744822">)</span>&nbsp;<span class="op" id="1744824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744827">for</span>&nbsp;<span class="ident" id="1744831">a</span><span class="op" id="1744832">.</span><span class="ident" id="1744833">nd</span>&nbsp;<span class="op" id="1744836">&gt;</span>&nbsp;<span class="num" id="1744838">0</span>&nbsp;<span class="op" id="1744840">&amp;&amp;</span>&nbsp;<span class="ident" id="1744843">a</span><span class="op" id="1744844">.</span><span class="ident" id="1744845">d</span><span class="op" id="1744846">[</span><span class="ident" id="1744847">a</span><span class="op" id="1744848">.</span><span class="ident" id="1744849">nd</span><span class="op" id="1744851">-</span><span class="num" id="1744852">1</span><span class="op" id="1744853">]</span>&nbsp;<span class="op" id="1744855">==</span>&nbsp;<span class="string" id="1744858">&#39;0&#39;</span>&nbsp;<span class="op" id="1744862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744866">a</span><span class="op" id="1744867">.</span><span class="ident" id="1744868">nd</span><span class="op" id="1744870">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1744874">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744877">if</span>&nbsp;<span class="ident" id="1744880">a</span><span class="op" id="1744881">.</span><span class="ident" id="1744882">nd</span>&nbsp;<span class="op" id="1744885">==</span>&nbsp;<span class="num" id="1744888">0</span>&nbsp;<span class="op" id="1744890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744894">a</span><span class="op" id="1744895">.</span><span class="ident" id="1744896">dp</span>&nbsp;<span class="op" id="1744899">=</span>&nbsp;<span class="num" id="1744901">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1744904">}</span><br>
<span class="lineno"></span><span class="op" id="1744906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="1744909">//&nbsp;Assign&nbsp;v&nbsp;to&nbsp;a.</span><br>
<span class="lineno"></span><span class="keyword" id="1744927">func</span>&nbsp;<span class="op" id="1744932">(</span><span class="ident" id="1744933">a</span>&nbsp;<span class="op" id="1744935">*</span><span class="ident" id="1744936">decimal</span><span class="op" id="1744943">)</span>&nbsp;<span class="ident" id="1744945">Assign</span><span class="op" id="1744951">(</span><span class="ident" id="1744952">v</span>&nbsp;<span class="ident" id="1744954">uint64</span><span class="op" id="1744960">)</span>&nbsp;<span class="op" id="1744962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744965">var</span>&nbsp;<span class="ident" id="1744969">buf</span>&nbsp;<span class="op" id="1744973">[</span><span class="num" id="1744974">24</span><span class="op" id="1744976">]</span><span class="builtintype" id="1744977">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1744984">//&nbsp;Write&nbsp;reversed&nbsp;decimal&nbsp;in&nbsp;buf.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745019">n</span>&nbsp;<span class="op" id="1745021">:=</span>&nbsp;<span class="num" id="1745024">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745027">for</span>&nbsp;<span class="ident" id="1745031">v</span>&nbsp;<span class="op" id="1745033">&gt;</span>&nbsp;<span class="num" id="1745035">0</span>&nbsp;<span class="op" id="1745037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745041">v1</span>&nbsp;<span class="op" id="1745044">:=</span>&nbsp;<span class="ident" id="1745047">v</span>&nbsp;<span class="op" id="1745049">/</span>&nbsp;<span class="num" id="1745051">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745056">v</span>&nbsp;<span class="op" id="1745058">-=</span>&nbsp;<span class="num" id="1745061">10</span>&nbsp;<span class="op" id="1745064">*</span>&nbsp;<span class="ident" id="1745066">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745071">buf</span><span class="op" id="1745074">[</span><span class="ident" id="1745075">n</span><span class="op" id="1745076">]</span>&nbsp;<span class="op" id="1745078">=</span>&nbsp;<span class="builtintype" id="1745080">byte</span><span class="op" id="1745084">(</span><span class="ident" id="1745085">v</span>&nbsp;<span class="op" id="1745087">+</span>&nbsp;<span class="string" id="1745089">&#39;0&#39;</span><span class="op" id="1745092">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745096">n</span><span class="op" id="1745097">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745102">v</span>&nbsp;<span class="op" id="1745104">=</span>&nbsp;<span class="ident" id="1745106">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1745114">//&nbsp;Reverse&nbsp;again&nbsp;to&nbsp;produce&nbsp;forward&nbsp;decimal&nbsp;in&nbsp;a.d.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745167">a</span><span class="op" id="1745168">.</span><span class="ident" id="1745169">nd</span>&nbsp;<span class="op" id="1745172">=</span>&nbsp;<span class="num" id="1745174">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745177">for</span>&nbsp;<span class="ident" id="1745181">n</span><span class="op" id="1745182">--</span><span class="op" id="1745184">;</span>&nbsp;<span class="ident" id="1745186">n</span>&nbsp;<span class="op" id="1745188">&gt;=</span>&nbsp;<span class="num" id="1745191">0</span><span class="op" id="1745192">;</span>&nbsp;<span class="ident" id="1745194">n</span><span class="op" id="1745195">--</span>&nbsp;<span class="op" id="1745198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745202">a</span><span class="op" id="1745203">.</span><span class="ident" id="1745204">d</span><span class="op" id="1745205">[</span><span class="ident" id="1745206">a</span><span class="op" id="1745207">.</span><span class="ident" id="1745208">nd</span><span class="op" id="1745210">]</span>&nbsp;<span class="op" id="1745212">=</span>&nbsp;<span class="ident" id="1745214">buf</span><span class="op" id="1745217">[</span><span class="ident" id="1745218">n</span><span class="op" id="1745219">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745223">a</span><span class="op" id="1745224">.</span><span class="ident" id="1745225">nd</span><span class="op" id="1745227">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745231">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745234">a</span><span class="op" id="1745235">.</span><span class="ident" id="1745236">dp</span>&nbsp;<span class="op" id="1745239">=</span>&nbsp;<span class="ident" id="1745241">a</span><span class="op" id="1745242">.</span><span class="ident" id="1745243">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745247">trim</span><span class="op" id="1745251">(</span><span class="ident" id="1745252">a</span><span class="op" id="1745253">)</span><br>
<span class="lineno"></span><span class="op" id="1745255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1745258">//&nbsp;Maximum&nbsp;shift&nbsp;that&nbsp;we&nbsp;can&nbsp;do&nbsp;in&nbsp;one&nbsp;pass&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno">105</span><span class="comment" id="1745320">//&nbsp;Signed&nbsp;int&nbsp;has&nbsp;31&nbsp;bits,&nbsp;and&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;accommodate&nbsp;9&lt;&lt;k.</span><br>
<span class="lineno"></span><span class="keyword" id="1745391">const</span>&nbsp;<span class="ident" id="1745397">maxShift</span>&nbsp;<span class="op" id="1745406">=</span>&nbsp;<span class="num" id="1745408">27</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1745412">//&nbsp;Binary&nbsp;shift&nbsp;right&nbsp;(*&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="1745485">func</span>&nbsp;<span class="ident" id="1745490">rightShift</span><span class="op" id="1745500">(</span><span class="ident" id="1745501">a</span>&nbsp;<span class="op" id="1745503">*</span><span class="ident" id="1745504">decimal</span><span class="op" id="1745511">,</span>&nbsp;<span class="ident" id="1745513">k</span>&nbsp;<span class="builtintype" id="1745515">uint</span><span class="op" id="1745519">)</span>&nbsp;<span class="op" id="1745521">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745524">r</span>&nbsp;<span class="op" id="1745526">:=</span>&nbsp;<span class="num" id="1745529">0</span>&nbsp;<span class="comment" id="1745531">//&nbsp;read&nbsp;pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745548">w</span>&nbsp;<span class="op" id="1745550">:=</span>&nbsp;<span class="num" id="1745553">0</span>&nbsp;<span class="comment" id="1745555">//&nbsp;write&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1745574">//&nbsp;Pick&nbsp;up&nbsp;enough&nbsp;leading&nbsp;digits&nbsp;to&nbsp;cover&nbsp;first&nbsp;shift.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745630">n</span>&nbsp;<span class="op" id="1745632">:=</span>&nbsp;<span class="num" id="1745635">0</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745638">for</span>&nbsp;<span class="op" id="1745642">;</span>&nbsp;<span class="ident" id="1745644">n</span><span class="op" id="1745645">&gt;&gt;</span><span class="ident" id="1745647">k</span>&nbsp;<span class="op" id="1745649">==</span>&nbsp;<span class="num" id="1745652">0</span><span class="op" id="1745653">;</span>&nbsp;<span class="ident" id="1745655">r</span><span class="op" id="1745656">++</span>&nbsp;<span class="op" id="1745659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745663">if</span>&nbsp;<span class="ident" id="1745666">r</span>&nbsp;<span class="op" id="1745668">&gt;=</span>&nbsp;<span class="ident" id="1745671">a</span><span class="op" id="1745672">.</span><span class="ident" id="1745673">nd</span>&nbsp;<span class="op" id="1745676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745681">if</span>&nbsp;<span class="ident" id="1745684">n</span>&nbsp;<span class="op" id="1745686">==</span>&nbsp;<span class="num" id="1745689">0</span>&nbsp;<span class="op" id="1745691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1745697">//&nbsp;a&nbsp;==&nbsp;0;&nbsp;shouldn&#39;t&nbsp;get&nbsp;here,&nbsp;but&nbsp;handle&nbsp;anyway.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745751">a</span><span class="op" id="1745752">.</span><span class="ident" id="1745753">nd</span>&nbsp;<span class="op" id="1745756">=</span>&nbsp;<span class="num" id="1745758">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745764">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745779">for</span>&nbsp;<span class="ident" id="1745783">n</span><span class="op" id="1745784">&gt;&gt;</span><span class="ident" id="1745786">k</span>&nbsp;<span class="op" id="1745788">==</span>&nbsp;<span class="num" id="1745791">0</span>&nbsp;<span class="op" id="1745793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745799">n</span>&nbsp;<span class="op" id="1745801">=</span>&nbsp;<span class="ident" id="1745803">n</span>&nbsp;<span class="op" id="1745805">*</span>&nbsp;<span class="num" id="1745807">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745814">r</span><span class="op" id="1745815">++</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745826">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745838">c</span>&nbsp;<span class="op" id="1745840">:=</span>&nbsp;<span class="builtintype" id="1745843">int</span><span class="op" id="1745846">(</span><span class="ident" id="1745847">a</span><span class="op" id="1745848">.</span><span class="ident" id="1745849">d</span><span class="op" id="1745850">[</span><span class="ident" id="1745851">r</span><span class="op" id="1745852">]</span><span class="op" id="1745853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745857">n</span>&nbsp;<span class="op" id="1745859">=</span>&nbsp;<span class="ident" id="1745861">n</span><span class="op" id="1745862">*</span><span class="num" id="1745863">10</span>&nbsp;<span class="op" id="1745866">+</span>&nbsp;<span class="ident" id="1745868">c</span>&nbsp;<span class="op" id="1745870">-</span>&nbsp;<span class="string" id="1745872">&#39;0&#39;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745880">a</span><span class="op" id="1745881">.</span><span class="ident" id="1745882">dp</span>&nbsp;<span class="op" id="1745885">-=</span>&nbsp;<span class="ident" id="1745888">r</span>&nbsp;<span class="op" id="1745890">-</span>&nbsp;<span class="num" id="1745892">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1745896">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745935">for</span>&nbsp;<span class="op" id="1745939">;</span>&nbsp;<span class="ident" id="1745941">r</span>&nbsp;<span class="op" id="1745943">&lt;</span>&nbsp;<span class="ident" id="1745945">a</span><span class="op" id="1745946">.</span><span class="ident" id="1745947">nd</span><span class="op" id="1745949">;</span>&nbsp;<span class="ident" id="1745951">r</span><span class="op" id="1745952">++</span>&nbsp;<span class="op" id="1745955">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745959">c</span>&nbsp;<span class="op" id="1745961">:=</span>&nbsp;<span class="builtintype" id="1745964">int</span><span class="op" id="1745967">(</span><span class="ident" id="1745968">a</span><span class="op" id="1745969">.</span><span class="ident" id="1745970">d</span><span class="op" id="1745971">[</span><span class="ident" id="1745972">r</span><span class="op" id="1745973">]</span><span class="op" id="1745974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745978">dig</span>&nbsp;<span class="op" id="1745982">:=</span>&nbsp;<span class="ident" id="1745985">n</span>&nbsp;<span class="op" id="1745987">&gt;&gt;</span>&nbsp;<span class="ident" id="1745990">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745994">n</span>&nbsp;<span class="op" id="1745996">-=</span>&nbsp;<span class="ident" id="1745999">dig</span>&nbsp;<span class="op" id="1746003">&lt;&lt;</span>&nbsp;<span class="ident" id="1746006">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746010">a</span><span class="op" id="1746011">.</span><span class="ident" id="1746012">d</span><span class="op" id="1746013">[</span><span class="ident" id="1746014">w</span><span class="op" id="1746015">]</span>&nbsp;<span class="op" id="1746017">=</span>&nbsp;<span class="builtintype" id="1746019">byte</span><span class="op" id="1746023">(</span><span class="ident" id="1746024">dig</span>&nbsp;<span class="op" id="1746028">+</span>&nbsp;<span class="string" id="1746030">&#39;0&#39;</span><span class="op" id="1746033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746037">w</span><span class="op" id="1746038">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746043">n</span>&nbsp;<span class="op" id="1746045">=</span>&nbsp;<span class="ident" id="1746047">n</span><span class="op" id="1746048">*</span><span class="num" id="1746049">10</span>&nbsp;<span class="op" id="1746052">+</span>&nbsp;<span class="ident" id="1746054">c</span>&nbsp;<span class="op" id="1746056">-</span>&nbsp;<span class="string" id="1746058">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1746067">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746094">for</span>&nbsp;<span class="ident" id="1746098">n</span>&nbsp;<span class="op" id="1746100">&gt;</span>&nbsp;<span class="num" id="1746102">0</span>&nbsp;<span class="op" id="1746104">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746108">dig</span>&nbsp;<span class="op" id="1746112">:=</span>&nbsp;<span class="ident" id="1746115">n</span>&nbsp;<span class="op" id="1746117">&gt;&gt;</span>&nbsp;<span class="ident" id="1746120">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746124">n</span>&nbsp;<span class="op" id="1746126">-=</span>&nbsp;<span class="ident" id="1746129">dig</span>&nbsp;<span class="op" id="1746133">&lt;&lt;</span>&nbsp;<span class="ident" id="1746136">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746140">if</span>&nbsp;<span class="ident" id="1746143">w</span>&nbsp;<span class="op" id="1746145">&lt;</span>&nbsp;<span class="builtinfunc" id="1746147">len</span><span class="op" id="1746150">(</span><span class="ident" id="1746151">a</span><span class="op" id="1746152">.</span><span class="ident" id="1746153">d</span><span class="op" id="1746154">)</span>&nbsp;<span class="op" id="1746156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746161">a</span><span class="op" id="1746162">.</span><span class="ident" id="1746163">d</span><span class="op" id="1746164">[</span><span class="ident" id="1746165">w</span><span class="op" id="1746166">]</span>&nbsp;<span class="op" id="1746168">=</span>&nbsp;<span class="builtintype" id="1746170">byte</span><span class="op" id="1746174">(</span><span class="ident" id="1746175">dig</span>&nbsp;<span class="op" id="1746179">+</span>&nbsp;<span class="string" id="1746181">&#39;0&#39;</span><span class="op" id="1746184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746189">w</span><span class="op" id="1746190">++</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746195">}</span>&nbsp;<span class="keyword" id="1746197">else</span>&nbsp;<span class="keyword" id="1746202">if</span>&nbsp;<span class="ident" id="1746205">dig</span>&nbsp;<span class="op" id="1746209">&gt;</span>&nbsp;<span class="num" id="1746211">0</span>&nbsp;<span class="op" id="1746213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746218">a</span><span class="op" id="1746219">.</span><span class="ident" id="1746220">trunc</span>&nbsp;<span class="op" id="1746226">=</span>&nbsp;<span class="builtintype" id="1746228">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746239">n</span>&nbsp;<span class="op" id="1746241">=</span>&nbsp;<span class="ident" id="1746243">n</span>&nbsp;<span class="op" id="1746245">*</span>&nbsp;<span class="num" id="1746247">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746251">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746255">a</span><span class="op" id="1746256">.</span><span class="ident" id="1746257">nd</span>&nbsp;<span class="op" id="1746260">=</span>&nbsp;<span class="ident" id="1746262">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746265">trim</span><span class="op" id="1746269">(</span><span class="ident" id="1746270">a</span><span class="op" id="1746271">)</span><br>
<span class="lineno"></span><span class="op" id="1746273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="1746276">//&nbsp;Cheat&nbsp;sheet&nbsp;for&nbsp;left&nbsp;shift:&nbsp;table&nbsp;indexed&nbsp;by&nbsp;shift&nbsp;count&nbsp;giving</span><br>
<span class="lineno"></span><span class="comment" id="1746343">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits&nbsp;that&nbsp;will&nbsp;be&nbsp;introduced&nbsp;by&nbsp;that&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="1746406">//</span><br>
<span class="lineno"></span><span class="comment" id="1746409">//&nbsp;For&nbsp;example,&nbsp;leftcheats[4]&nbsp;=&nbsp;{2,&nbsp;&#34;625&#34;}.&nbsp;&nbsp;That&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1746470">//&nbsp;if&nbsp;we&nbsp;are&nbsp;shifting&nbsp;by&nbsp;4&nbsp;(multiplying&nbsp;by&nbsp;16),&nbsp;it&nbsp;will&nbsp;add&nbsp;2&nbsp;digits</span><br>
<span class="lineno">165</span><span class="comment" id="1746539">//&nbsp;when&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;625&#34;&nbsp;through&nbsp;&#34;999&#34;,&nbsp;and&nbsp;one&nbsp;fewer&nbsp;digit</span><br>
<span class="lineno"></span><span class="comment" id="1746609">//&nbsp;if&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;000&#34;&nbsp;through&nbsp;&#34;624&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="1746657">//</span><br>
<span class="lineno"></span><span class="comment" id="1746660">//&nbsp;Credit&nbsp;for&nbsp;this&nbsp;trick&nbsp;goes&nbsp;to&nbsp;Ken.</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="1746699">type</span>&nbsp;<span class="ident" id="1746704">leftCheat</span>&nbsp;<span class="keyword" id="1746714">struct</span>&nbsp;<span class="op" id="1746721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746724">delta</span>&nbsp;&nbsp;<span class="builtintype" id="1746731">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1746738">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746763">cutoff</span>&nbsp;<span class="builtintype" id="1746770">string</span>&nbsp;<span class="comment" id="1746777">//&nbsp;&nbsp;&nbsp;minus&nbsp;one&nbsp;digit&nbsp;if&nbsp;original&nbsp;&lt;&nbsp;a.</span><br>
<span class="lineno"></span><span class="op" id="1746815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="1746818">var</span>&nbsp;<span class="ident" id="1746822">leftcheats</span>&nbsp;<span class="op" id="1746833">=</span>&nbsp;<span class="op" id="1746835">[</span><span class="op" id="1746836">]</span><span class="ident" id="1746837">leftCheat</span><span class="op" id="1746846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1746849">//&nbsp;Leading&nbsp;digits&nbsp;of&nbsp;1/2^i&nbsp;=&nbsp;5^i.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1746884">//&nbsp;5^23&nbsp;is&nbsp;not&nbsp;an&nbsp;exact&nbsp;64-bit&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1746939">//&nbsp;so&nbsp;have&nbsp;to&nbsp;use&nbsp;bc&nbsp;for&nbsp;the&nbsp;math.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1746975">/*<br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspseq&nbsp;27&nbsp;|&nbsp;sed&nbsp;&#39;s/^/5^/&#39;&nbsp;|&nbsp;bc&nbsp;|<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspawk&nbsp;&#39;BEGIN{&nbsp;print&nbsp;&#34;\tleftCheat{&nbsp;0,&nbsp;\&#34;\&#34;&nbsp;},&#34;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog2&nbsp;=&nbsp;log(2)/log(10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspprintf(&#34;\tleftCheat{&nbsp;%d,&nbsp;\&#34;%s\&#34;&nbsp;},\t//&nbsp;*&nbsp;%d\n&#34;,<br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspint(log2*NR+1),&nbsp;$0,&nbsp;2**NR)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}&#39;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747179">{</span><span class="num" id="1747180">0</span><span class="op" id="1747181">,</span>&nbsp;<span class="string" id="1747183">&#34;&#34;</span><span class="op" id="1747185">}</span><span class="op" id="1747186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747189">{</span><span class="num" id="1747190">1</span><span class="op" id="1747191">,</span>&nbsp;<span class="string" id="1747193">&#34;5&#34;</span><span class="op" id="1747196">}</span><span class="op" id="1747197">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747217">//&nbsp;*&nbsp;2</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747225">{</span><span class="num" id="1747226">1</span><span class="op" id="1747227">,</span>&nbsp;<span class="string" id="1747229">&#34;25&#34;</span><span class="op" id="1747233">}</span><span class="op" id="1747234">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747253">//&nbsp;*&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747261">{</span><span class="num" id="1747262">1</span><span class="op" id="1747263">,</span>&nbsp;<span class="string" id="1747265">&#34;125&#34;</span><span class="op" id="1747270">}</span><span class="op" id="1747271">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747289">//&nbsp;*&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747297">{</span><span class="num" id="1747298">2</span><span class="op" id="1747299">,</span>&nbsp;<span class="string" id="1747301">&#34;625&#34;</span><span class="op" id="1747306">}</span><span class="op" id="1747307">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747325">//&nbsp;*&nbsp;16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747334">{</span><span class="num" id="1747335">2</span><span class="op" id="1747336">,</span>&nbsp;<span class="string" id="1747338">&#34;3125&#34;</span><span class="op" id="1747344">}</span><span class="op" id="1747345">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747362">//&nbsp;*&nbsp;32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747371">{</span><span class="num" id="1747372">2</span><span class="op" id="1747373">,</span>&nbsp;<span class="string" id="1747375">&#34;15625&#34;</span><span class="op" id="1747382">}</span><span class="op" id="1747383">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747399">//&nbsp;*&nbsp;64</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747408">{</span><span class="num" id="1747409">3</span><span class="op" id="1747410">,</span>&nbsp;<span class="string" id="1747412">&#34;78125&#34;</span><span class="op" id="1747419">}</span><span class="op" id="1747420">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747436">//&nbsp;*&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747446">{</span><span class="num" id="1747447">3</span><span class="op" id="1747448">,</span>&nbsp;<span class="string" id="1747450">&#34;390625&#34;</span><span class="op" id="1747458">}</span><span class="op" id="1747459">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747474">//&nbsp;*&nbsp;256</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747484">{</span><span class="num" id="1747485">3</span><span class="op" id="1747486">,</span>&nbsp;<span class="string" id="1747488">&#34;1953125&#34;</span><span class="op" id="1747497">}</span><span class="op" id="1747498">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747512">//&nbsp;*&nbsp;512</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747522">{</span><span class="num" id="1747523">4</span><span class="op" id="1747524">,</span>&nbsp;<span class="string" id="1747526">&#34;9765625&#34;</span><span class="op" id="1747535">}</span><span class="op" id="1747536">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747550">//&nbsp;*&nbsp;1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747561">{</span><span class="num" id="1747562">4</span><span class="op" id="1747563">,</span>&nbsp;<span class="string" id="1747565">&#34;48828125&#34;</span><span class="op" id="1747575">}</span><span class="op" id="1747576">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747589">//&nbsp;*&nbsp;2048</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747600">{</span><span class="num" id="1747601">4</span><span class="op" id="1747602">,</span>&nbsp;<span class="string" id="1747604">&#34;244140625&#34;</span><span class="op" id="1747615">}</span><span class="op" id="1747616">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747628">//&nbsp;*&nbsp;4096</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747639">{</span><span class="num" id="1747640">4</span><span class="op" id="1747641">,</span>&nbsp;<span class="string" id="1747643">&#34;1220703125&#34;</span><span class="op" id="1747655">}</span><span class="op" id="1747656">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747667">//&nbsp;*&nbsp;8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747678">{</span><span class="num" id="1747679">5</span><span class="op" id="1747680">,</span>&nbsp;<span class="string" id="1747682">&#34;6103515625&#34;</span><span class="op" id="1747694">}</span><span class="op" id="1747695">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747706">//&nbsp;*&nbsp;16384</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747718">{</span><span class="num" id="1747719">5</span><span class="op" id="1747720">,</span>&nbsp;<span class="string" id="1747722">&#34;30517578125&#34;</span><span class="op" id="1747735">}</span><span class="op" id="1747736">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747746">//&nbsp;*&nbsp;32768</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747758">{</span><span class="num" id="1747759">5</span><span class="op" id="1747760">,</span>&nbsp;<span class="string" id="1747762">&#34;152587890625&#34;</span><span class="op" id="1747776">}</span><span class="op" id="1747777">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747786">//&nbsp;*&nbsp;65536</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747798">{</span><span class="num" id="1747799">6</span><span class="op" id="1747800">,</span>&nbsp;<span class="string" id="1747802">&#34;762939453125&#34;</span><span class="op" id="1747816">}</span><span class="op" id="1747817">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747826">//&nbsp;*&nbsp;131072</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747839">{</span><span class="num" id="1747840">6</span><span class="op" id="1747841">,</span>&nbsp;<span class="string" id="1747843">&#34;3814697265625&#34;</span><span class="op" id="1747858">}</span><span class="op" id="1747859">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747867">//&nbsp;*&nbsp;262144</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747880">{</span><span class="num" id="1747881">6</span><span class="op" id="1747882">,</span>&nbsp;<span class="string" id="1747884">&#34;19073486328125&#34;</span><span class="op" id="1747900">}</span><span class="op" id="1747901">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747908">//&nbsp;*&nbsp;524288</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747921">{</span><span class="num" id="1747922">7</span><span class="op" id="1747923">,</span>&nbsp;<span class="string" id="1747925">&#34;95367431640625&#34;</span><span class="op" id="1747941">}</span><span class="op" id="1747942">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747949">//&nbsp;*&nbsp;1048576</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747963">{</span><span class="num" id="1747964">7</span><span class="op" id="1747965">,</span>&nbsp;<span class="string" id="1747967">&#34;476837158203125&#34;</span><span class="op" id="1747984">}</span><span class="op" id="1747985">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1747991">//&nbsp;*&nbsp;2097152</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748005">{</span><span class="num" id="1748006">7</span><span class="op" id="1748007">,</span>&nbsp;<span class="string" id="1748009">&#34;2384185791015625&#34;</span><span class="op" id="1748027">}</span><span class="op" id="1748028">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1748033">//&nbsp;*&nbsp;4194304</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748047">{</span><span class="num" id="1748048">7</span><span class="op" id="1748049">,</span>&nbsp;<span class="string" id="1748051">&#34;11920928955078125&#34;</span><span class="op" id="1748070">}</span><span class="op" id="1748071">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1748075">//&nbsp;*&nbsp;8388608</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748089">{</span><span class="num" id="1748090">8</span><span class="op" id="1748091">,</span>&nbsp;<span class="string" id="1748093">&#34;59604644775390625&#34;</span><span class="op" id="1748112">}</span><span class="op" id="1748113">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1748117">//&nbsp;*&nbsp;16777216</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748132">{</span><span class="num" id="1748133">8</span><span class="op" id="1748134">,</span>&nbsp;<span class="string" id="1748136">&#34;298023223876953125&#34;</span><span class="op" id="1748156">}</span><span class="op" id="1748157">,</span>&nbsp;&nbsp;<span class="comment" id="1748160">//&nbsp;*&nbsp;33554432</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748175">{</span><span class="num" id="1748176">8</span><span class="op" id="1748177">,</span>&nbsp;<span class="string" id="1748179">&#34;1490116119384765625&#34;</span><span class="op" id="1748200">}</span><span class="op" id="1748201">,</span>&nbsp;<span class="comment" id="1748203">//&nbsp;*&nbsp;67108864</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748218">{</span><span class="num" id="1748219">9</span><span class="op" id="1748220">,</span>&nbsp;<span class="string" id="1748222">&#34;7450580596923828125&#34;</span><span class="op" id="1748243">}</span><span class="op" id="1748244">,</span>&nbsp;<span class="comment" id="1748246">//&nbsp;*&nbsp;134217728</span><br>
<span class="lineno"></span><span class="op" id="1748261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1748264">//&nbsp;Is&nbsp;the&nbsp;leading&nbsp;prefix&nbsp;of&nbsp;b&nbsp;lexicographically&nbsp;less&nbsp;than&nbsp;s?</span><br>
<span class="lineno"></span><span class="keyword" id="1748325">func</span>&nbsp;<span class="ident" id="1748330">prefixIsLessThan</span><span class="op" id="1748346">(</span><span class="ident" id="1748347">b</span>&nbsp;<span class="op" id="1748349">[</span><span class="op" id="1748350">]</span><span class="builtintype" id="1748351">byte</span><span class="op" id="1748355">,</span>&nbsp;<span class="ident" id="1748357">s</span>&nbsp;<span class="builtintype" id="1748359">string</span><span class="op" id="1748365">)</span>&nbsp;<span class="builtintype" id="1748367">bool</span>&nbsp;<span class="op" id="1748372">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748375">for</span>&nbsp;<span class="ident" id="1748379">i</span>&nbsp;<span class="op" id="1748381">:=</span>&nbsp;<span class="num" id="1748384">0</span><span class="op" id="1748385">;</span>&nbsp;<span class="ident" id="1748387">i</span>&nbsp;<span class="op" id="1748389">&lt;</span>&nbsp;<span class="builtinfunc" id="1748391">len</span><span class="op" id="1748394">(</span><span class="ident" id="1748395">s</span><span class="op" id="1748396">)</span><span class="op" id="1748397">;</span>&nbsp;<span class="ident" id="1748399">i</span><span class="op" id="1748400">++</span>&nbsp;<span class="op" id="1748403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748407">if</span>&nbsp;<span class="ident" id="1748410">i</span>&nbsp;<span class="op" id="1748412">&gt;=</span>&nbsp;<span class="builtinfunc" id="1748415">len</span><span class="op" id="1748418">(</span><span class="ident" id="1748419">b</span><span class="op" id="1748420">)</span>&nbsp;<span class="op" id="1748422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748427">return</span>&nbsp;<span class="builtintype" id="1748434">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748445">if</span>&nbsp;<span class="ident" id="1748448">b</span><span class="op" id="1748449">[</span><span class="ident" id="1748450">i</span><span class="op" id="1748451">]</span>&nbsp;<span class="op" id="1748453">!=</span>&nbsp;<span class="ident" id="1748456">s</span><span class="op" id="1748457">[</span><span class="ident" id="1748458">i</span><span class="op" id="1748459">]</span>&nbsp;<span class="op" id="1748461">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748466">return</span>&nbsp;<span class="ident" id="1748473">b</span><span class="op" id="1748474">[</span><span class="ident" id="1748475">i</span><span class="op" id="1748476">]</span>&nbsp;<span class="op" id="1748478">&lt;</span>&nbsp;<span class="ident" id="1748480">s</span><span class="op" id="1748481">[</span><span class="ident" id="1748482">i</span><span class="op" id="1748483">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748493">return</span>&nbsp;<span class="builtintype" id="1748500">false</span><br>
<span class="lineno"></span><span class="op" id="1748506">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="1748509">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(/&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="1748581">func</span>&nbsp;<span class="ident" id="1748586">leftShift</span><span class="op" id="1748595">(</span><span class="ident" id="1748596">a</span>&nbsp;<span class="op" id="1748598">*</span><span class="ident" id="1748599">decimal</span><span class="op" id="1748606">,</span>&nbsp;<span class="ident" id="1748608">k</span>&nbsp;<span class="builtintype" id="1748610">uint</span><span class="op" id="1748614">)</span>&nbsp;<span class="op" id="1748616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748619">delta</span>&nbsp;<span class="op" id="1748625">:=</span>&nbsp;<span class="ident" id="1748628">leftcheats</span><span class="op" id="1748638">[</span><span class="ident" id="1748639">k</span><span class="op" id="1748640">]</span><span class="op" id="1748641">.</span><span class="ident" id="1748642">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748649">if</span>&nbsp;<span class="ident" id="1748652">prefixIsLessThan</span><span class="op" id="1748668">(</span><span class="ident" id="1748669">a</span><span class="op" id="1748670">.</span><span class="ident" id="1748671">d</span><span class="op" id="1748672">[</span><span class="num" id="1748673">0</span><span class="op" id="1748674">:</span><span class="ident" id="1748675">a</span><span class="op" id="1748676">.</span><span class="ident" id="1748677">nd</span><span class="op" id="1748679">]</span><span class="op" id="1748680">,</span>&nbsp;<span class="ident" id="1748682">leftcheats</span><span class="op" id="1748692">[</span><span class="ident" id="1748693">k</span><span class="op" id="1748694">]</span><span class="op" id="1748695">.</span><span class="ident" id="1748696">cutoff</span><span class="op" id="1748702">)</span>&nbsp;<span class="op" id="1748704">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748708">delta</span><span class="op" id="1748713">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748721">r</span>&nbsp;<span class="op" id="1748723">:=</span>&nbsp;<span class="ident" id="1748726">a</span><span class="op" id="1748727">.</span><span class="ident" id="1748728">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1748739">//&nbsp;read&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748754">w</span>&nbsp;<span class="op" id="1748756">:=</span>&nbsp;<span class="ident" id="1748759">a</span><span class="op" id="1748760">.</span><span class="ident" id="1748761">nd</span>&nbsp;<span class="op" id="1748764">+</span>&nbsp;<span class="ident" id="1748766">delta</span>&nbsp;<span class="comment" id="1748772">//&nbsp;write&nbsp;index</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748788">n</span>&nbsp;<span class="op" id="1748790">:=</span>&nbsp;<span class="num" id="1748793">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1748797">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748836">for</span>&nbsp;<span class="ident" id="1748840">r</span><span class="op" id="1748841">--</span><span class="op" id="1748843">;</span>&nbsp;<span class="ident" id="1748845">r</span>&nbsp;<span class="op" id="1748847">&gt;=</span>&nbsp;<span class="num" id="1748850">0</span><span class="op" id="1748851">;</span>&nbsp;<span class="ident" id="1748853">r</span><span class="op" id="1748854">--</span>&nbsp;<span class="op" id="1748857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748861">n</span>&nbsp;<span class="op" id="1748863">+=</span>&nbsp;<span class="op" id="1748866">(</span><span class="builtintype" id="1748867">int</span><span class="op" id="1748870">(</span><span class="ident" id="1748871">a</span><span class="op" id="1748872">.</span><span class="ident" id="1748873">d</span><span class="op" id="1748874">[</span><span class="ident" id="1748875">r</span><span class="op" id="1748876">]</span><span class="op" id="1748877">)</span>&nbsp;<span class="op" id="1748879">-</span>&nbsp;<span class="string" id="1748881">&#39;0&#39;</span><span class="op" id="1748884">)</span>&nbsp;<span class="op" id="1748886">&lt;&lt;</span>&nbsp;<span class="ident" id="1748889">k</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748893">quo</span>&nbsp;<span class="op" id="1748897">:=</span>&nbsp;<span class="ident" id="1748900">n</span>&nbsp;<span class="op" id="1748902">/</span>&nbsp;<span class="num" id="1748904">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748909">rem</span>&nbsp;<span class="op" id="1748913">:=</span>&nbsp;<span class="ident" id="1748916">n</span>&nbsp;<span class="op" id="1748918">-</span>&nbsp;<span class="num" id="1748920">10</span><span class="op" id="1748922">*</span><span class="ident" id="1748923">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748929">w</span><span class="op" id="1748930">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748935">if</span>&nbsp;<span class="ident" id="1748938">w</span>&nbsp;<span class="op" id="1748940">&lt;</span>&nbsp;<span class="builtinfunc" id="1748942">len</span><span class="op" id="1748945">(</span><span class="ident" id="1748946">a</span><span class="op" id="1748947">.</span><span class="ident" id="1748948">d</span><span class="op" id="1748949">)</span>&nbsp;<span class="op" id="1748951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748956">a</span><span class="op" id="1748957">.</span><span class="ident" id="1748958">d</span><span class="op" id="1748959">[</span><span class="ident" id="1748960">w</span><span class="op" id="1748961">]</span>&nbsp;<span class="op" id="1748963">=</span>&nbsp;<span class="builtintype" id="1748965">byte</span><span class="op" id="1748969">(</span><span class="ident" id="1748970">rem</span>&nbsp;<span class="op" id="1748974">+</span>&nbsp;<span class="string" id="1748976">&#39;0&#39;</span><span class="op" id="1748979">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748983">}</span>&nbsp;<span class="keyword" id="1748985">else</span>&nbsp;<span class="keyword" id="1748990">if</span>&nbsp;<span class="ident" id="1748993">rem</span>&nbsp;<span class="op" id="1748997">!=</span>&nbsp;<span class="num" id="1749000">0</span>&nbsp;<span class="op" id="1749002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749007">a</span><span class="op" id="1749008">.</span><span class="ident" id="1749009">trunc</span>&nbsp;<span class="op" id="1749015">=</span>&nbsp;<span class="builtintype" id="1749017">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749028">n</span>&nbsp;<span class="op" id="1749030">=</span>&nbsp;<span class="ident" id="1749032">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749037">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1749041">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749068">for</span>&nbsp;<span class="ident" id="1749072">n</span>&nbsp;<span class="op" id="1749074">&gt;</span>&nbsp;<span class="num" id="1749076">0</span>&nbsp;<span class="op" id="1749078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749082">quo</span>&nbsp;<span class="op" id="1749086">:=</span>&nbsp;<span class="ident" id="1749089">n</span>&nbsp;<span class="op" id="1749091">/</span>&nbsp;<span class="num" id="1749093">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749098">rem</span>&nbsp;<span class="op" id="1749102">:=</span>&nbsp;<span class="ident" id="1749105">n</span>&nbsp;<span class="op" id="1749107">-</span>&nbsp;<span class="num" id="1749109">10</span><span class="op" id="1749111">*</span><span class="ident" id="1749112">quo</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749118">w</span><span class="op" id="1749119">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749124">if</span>&nbsp;<span class="ident" id="1749127">w</span>&nbsp;<span class="op" id="1749129">&lt;</span>&nbsp;<span class="builtinfunc" id="1749131">len</span><span class="op" id="1749134">(</span><span class="ident" id="1749135">a</span><span class="op" id="1749136">.</span><span class="ident" id="1749137">d</span><span class="op" id="1749138">)</span>&nbsp;<span class="op" id="1749140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749145">a</span><span class="op" id="1749146">.</span><span class="ident" id="1749147">d</span><span class="op" id="1749148">[</span><span class="ident" id="1749149">w</span><span class="op" id="1749150">]</span>&nbsp;<span class="op" id="1749152">=</span>&nbsp;<span class="builtintype" id="1749154">byte</span><span class="op" id="1749158">(</span><span class="ident" id="1749159">rem</span>&nbsp;<span class="op" id="1749163">+</span>&nbsp;<span class="string" id="1749165">&#39;0&#39;</span><span class="op" id="1749168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749172">}</span>&nbsp;<span class="keyword" id="1749174">else</span>&nbsp;<span class="keyword" id="1749179">if</span>&nbsp;<span class="ident" id="1749182">rem</span>&nbsp;<span class="op" id="1749186">!=</span>&nbsp;<span class="num" id="1749189">0</span>&nbsp;<span class="op" id="1749191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749196">a</span><span class="op" id="1749197">.</span><span class="ident" id="1749198">trunc</span>&nbsp;<span class="op" id="1749204">=</span>&nbsp;<span class="builtintype" id="1749206">true</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749217">n</span>&nbsp;<span class="op" id="1749219">=</span>&nbsp;<span class="ident" id="1749221">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749230">a</span><span class="op" id="1749231">.</span><span class="ident" id="1749232">nd</span>&nbsp;<span class="op" id="1749235">+=</span>&nbsp;<span class="ident" id="1749238">delta</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749245">if</span>&nbsp;<span class="ident" id="1749248">a</span><span class="op" id="1749249">.</span><span class="ident" id="1749250">nd</span>&nbsp;<span class="op" id="1749253">&gt;=</span>&nbsp;<span class="builtinfunc" id="1749256">len</span><span class="op" id="1749259">(</span><span class="ident" id="1749260">a</span><span class="op" id="1749261">.</span><span class="ident" id="1749262">d</span><span class="op" id="1749263">)</span>&nbsp;<span class="op" id="1749265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749269">a</span><span class="op" id="1749270">.</span><span class="ident" id="1749271">nd</span>&nbsp;<span class="op" id="1749274">=</span>&nbsp;<span class="builtinfunc" id="1749276">len</span><span class="op" id="1749279">(</span><span class="ident" id="1749280">a</span><span class="op" id="1749281">.</span><span class="ident" id="1749282">d</span><span class="op" id="1749283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749289">a</span><span class="op" id="1749290">.</span><span class="ident" id="1749291">dp</span>&nbsp;<span class="op" id="1749294">+=</span>&nbsp;<span class="ident" id="1749297">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749304">trim</span><span class="op" id="1749308">(</span><span class="ident" id="1749309">a</span><span class="op" id="1749310">)</span><br>
<span class="lineno">275</span><span class="op" id="1749312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1749315">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(k&nbsp;&gt;&nbsp;0)&nbsp;or&nbsp;right&nbsp;(k&nbsp;&lt;&nbsp;0).</span><br>
<span class="lineno"></span><span class="keyword" id="1749362">func</span>&nbsp;<span class="op" id="1749367">(</span><span class="ident" id="1749368">a</span>&nbsp;<span class="op" id="1749370">*</span><span class="ident" id="1749371">decimal</span><span class="op" id="1749378">)</span>&nbsp;<span class="ident" id="1749380">Shift</span><span class="op" id="1749385">(</span><span class="ident" id="1749386">k</span>&nbsp;<span class="builtintype" id="1749388">int</span><span class="op" id="1749391">)</span>&nbsp;<span class="op" id="1749393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749396">switch</span>&nbsp;<span class="op" id="1749403">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749406">case</span>&nbsp;<span class="ident" id="1749411">a</span><span class="op" id="1749412">.</span><span class="ident" id="1749413">nd</span>&nbsp;<span class="op" id="1749416">==</span>&nbsp;<span class="num" id="1749419">0</span><span class="op" id="1749420">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1749424">//&nbsp;nothing&nbsp;to&nbsp;do:&nbsp;a&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749450">case</span>&nbsp;<span class="ident" id="1749455">k</span>&nbsp;<span class="op" id="1749457">&gt;</span>&nbsp;<span class="num" id="1749459">0</span><span class="op" id="1749460">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749464">for</span>&nbsp;<span class="ident" id="1749468">k</span>&nbsp;<span class="op" id="1749470">&gt;</span>&nbsp;<span class="ident" id="1749472">maxShift</span>&nbsp;<span class="op" id="1749481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749486">leftShift</span><span class="op" id="1749495">(</span><span class="ident" id="1749496">a</span><span class="op" id="1749497">,</span>&nbsp;<span class="ident" id="1749499">maxShift</span><span class="op" id="1749507">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749512">k</span>&nbsp;<span class="op" id="1749514">-=</span>&nbsp;<span class="ident" id="1749517">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749532">leftShift</span><span class="op" id="1749541">(</span><span class="ident" id="1749542">a</span><span class="op" id="1749543">,</span>&nbsp;<span class="builtintype" id="1749545">uint</span><span class="op" id="1749549">(</span><span class="ident" id="1749550">k</span><span class="op" id="1749551">)</span><span class="op" id="1749552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749555">case</span>&nbsp;<span class="ident" id="1749560">k</span>&nbsp;<span class="op" id="1749562">&lt;</span>&nbsp;<span class="num" id="1749564">0</span><span class="op" id="1749565">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749569">for</span>&nbsp;<span class="ident" id="1749573">k</span>&nbsp;<span class="op" id="1749575">&lt;</span>&nbsp;<span class="op" id="1749577">-</span><span class="ident" id="1749578">maxShift</span>&nbsp;<span class="op" id="1749587">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749592">rightShift</span><span class="op" id="1749602">(</span><span class="ident" id="1749603">a</span><span class="op" id="1749604">,</span>&nbsp;<span class="ident" id="1749606">maxShift</span><span class="op" id="1749614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749619">k</span>&nbsp;<span class="op" id="1749621">+=</span>&nbsp;<span class="ident" id="1749624">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749639">rightShift</span><span class="op" id="1749649">(</span><span class="ident" id="1749650">a</span><span class="op" id="1749651">,</span>&nbsp;<span class="builtintype" id="1749653">uint</span><span class="op" id="1749657">(</span><span class="op" id="1749658">-</span><span class="ident" id="1749659">k</span><span class="op" id="1749660">)</span><span class="op" id="1749661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749664">}</span><br>
<span class="lineno">295</span><span class="op" id="1749666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1749669">//&nbsp;If&nbsp;we&nbsp;chop&nbsp;a&nbsp;at&nbsp;nd&nbsp;digits,&nbsp;should&nbsp;we&nbsp;round&nbsp;up?</span><br>
<span class="lineno"></span><span class="keyword" id="1749719">func</span>&nbsp;<span class="ident" id="1749724">shouldRoundUp</span><span class="op" id="1749737">(</span><span class="ident" id="1749738">a</span>&nbsp;<span class="op" id="1749740">*</span><span class="ident" id="1749741">decimal</span><span class="op" id="1749748">,</span>&nbsp;<span class="ident" id="1749750">nd</span>&nbsp;<span class="builtintype" id="1749753">int</span><span class="op" id="1749756">)</span>&nbsp;<span class="builtintype" id="1749758">bool</span>&nbsp;<span class="op" id="1749763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749766">if</span>&nbsp;<span class="ident" id="1749769">nd</span>&nbsp;<span class="op" id="1749772">&lt;</span>&nbsp;<span class="num" id="1749774">0</span>&nbsp;<span class="op" id="1749776">||</span>&nbsp;<span class="ident" id="1749779">nd</span>&nbsp;<span class="op" id="1749782">&gt;=</span>&nbsp;<span class="ident" id="1749785">a</span><span class="op" id="1749786">.</span><span class="ident" id="1749787">nd</span>&nbsp;<span class="op" id="1749790">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749794">return</span>&nbsp;<span class="builtintype" id="1749801">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749811">if</span>&nbsp;<span class="ident" id="1749814">a</span><span class="op" id="1749815">.</span><span class="ident" id="1749816">d</span><span class="op" id="1749817">[</span><span class="ident" id="1749818">nd</span><span class="op" id="1749820">]</span>&nbsp;<span class="op" id="1749822">==</span>&nbsp;<span class="string" id="1749825">&#39;5&#39;</span>&nbsp;<span class="op" id="1749829">&amp;&amp;</span>&nbsp;<span class="ident" id="1749832">nd</span><span class="op" id="1749834">+</span><span class="num" id="1749835">1</span>&nbsp;<span class="op" id="1749837">==</span>&nbsp;<span class="ident" id="1749840">a</span><span class="op" id="1749841">.</span><span class="ident" id="1749842">nd</span>&nbsp;<span class="op" id="1749845">{</span>&nbsp;<span class="comment" id="1749847">//&nbsp;exactly&nbsp;halfway&nbsp;-&nbsp;round&nbsp;to&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1749884">//&nbsp;if&nbsp;we&nbsp;truncated,&nbsp;a&nbsp;little&nbsp;higher&nbsp;than&nbsp;what&#39;s&nbsp;recorded&nbsp;-&nbsp;always&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749961">if</span>&nbsp;<span class="ident" id="1749964">a</span><span class="op" id="1749965">.</span><span class="ident" id="1749966">trunc</span>&nbsp;<span class="op" id="1749972">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749977">return</span>&nbsp;<span class="builtintype" id="1749984">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749995">return</span>&nbsp;<span class="ident" id="1750002">nd</span>&nbsp;<span class="op" id="1750005">&gt;</span>&nbsp;<span class="num" id="1750007">0</span>&nbsp;<span class="op" id="1750009">&amp;&amp;</span>&nbsp;<span class="op" id="1750012">(</span><span class="ident" id="1750013">a</span><span class="op" id="1750014">.</span><span class="ident" id="1750015">d</span><span class="op" id="1750016">[</span><span class="ident" id="1750017">nd</span><span class="op" id="1750019">-</span><span class="num" id="1750020">1</span><span class="op" id="1750021">]</span><span class="op" id="1750022">-</span><span class="string" id="1750023">&#39;0&#39;</span><span class="op" id="1750026">)</span><span class="op" id="1750027">%</span><span class="num" id="1750028">2</span>&nbsp;<span class="op" id="1750030">!=</span>&nbsp;<span class="num" id="1750033">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1750039">//&nbsp;not&nbsp;halfway&nbsp;-&nbsp;digit&nbsp;tells&nbsp;all</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750073">return</span>&nbsp;<span class="ident" id="1750080">a</span><span class="op" id="1750081">.</span><span class="ident" id="1750082">d</span><span class="op" id="1750083">[</span><span class="ident" id="1750084">nd</span><span class="op" id="1750086">]</span>&nbsp;<span class="op" id="1750088">&gt;=</span>&nbsp;<span class="string" id="1750091">&#39;5&#39;</span><br>
<span class="lineno"></span><span class="op" id="1750095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1750098">//&nbsp;Round&nbsp;a&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="comment" id="1750134">//&nbsp;If&nbsp;nd&nbsp;is&nbsp;zero,&nbsp;it&nbsp;means&nbsp;we&#39;re&nbsp;rounding</span><br>
<span class="lineno">315</span><span class="comment" id="1750176">//&nbsp;just&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;digits,&nbsp;as&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="1750217">//&nbsp;0.09&nbsp;-&gt;&nbsp;0.1.</span><br>
<span class="lineno"></span><span class="keyword" id="1750233">func</span>&nbsp;<span class="op" id="1750238">(</span><span class="ident" id="1750239">a</span>&nbsp;<span class="op" id="1750241">*</span><span class="ident" id="1750242">decimal</span><span class="op" id="1750249">)</span>&nbsp;<span class="ident" id="1750251">Round</span><span class="op" id="1750256">(</span><span class="ident" id="1750257">nd</span>&nbsp;<span class="builtintype" id="1750260">int</span><span class="op" id="1750263">)</span>&nbsp;<span class="op" id="1750265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750268">if</span>&nbsp;<span class="ident" id="1750271">nd</span>&nbsp;<span class="op" id="1750274">&lt;</span>&nbsp;<span class="num" id="1750276">0</span>&nbsp;<span class="op" id="1750278">||</span>&nbsp;<span class="ident" id="1750281">nd</span>&nbsp;<span class="op" id="1750284">&gt;=</span>&nbsp;<span class="ident" id="1750287">a</span><span class="op" id="1750288">.</span><span class="ident" id="1750289">nd</span>&nbsp;<span class="op" id="1750292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750296">return</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750307">if</span>&nbsp;<span class="ident" id="1750310">shouldRoundUp</span><span class="op" id="1750323">(</span><span class="ident" id="1750324">a</span><span class="op" id="1750325">,</span>&nbsp;<span class="ident" id="1750327">nd</span><span class="op" id="1750329">)</span>&nbsp;<span class="op" id="1750331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750335">a</span><span class="op" id="1750336">.</span><span class="ident" id="1750337">RoundUp</span><span class="op" id="1750344">(</span><span class="ident" id="1750345">nd</span><span class="op" id="1750347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750350">}</span>&nbsp;<span class="keyword" id="1750352">else</span>&nbsp;<span class="op" id="1750357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750361">a</span><span class="op" id="1750362">.</span><span class="ident" id="1750363">RoundDown</span><span class="op" id="1750372">(</span><span class="ident" id="1750373">nd</span><span class="op" id="1750375">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750378">}</span><br>
<span class="lineno"></span><span class="op" id="1750380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1750383">//&nbsp;Round&nbsp;a&nbsp;down&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="1750424">func</span>&nbsp;<span class="op" id="1750429">(</span><span class="ident" id="1750430">a</span>&nbsp;<span class="op" id="1750432">*</span><span class="ident" id="1750433">decimal</span><span class="op" id="1750440">)</span>&nbsp;<span class="ident" id="1750442">RoundDown</span><span class="op" id="1750451">(</span><span class="ident" id="1750452">nd</span>&nbsp;<span class="builtintype" id="1750455">int</span><span class="op" id="1750458">)</span>&nbsp;<span class="op" id="1750460">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750463">if</span>&nbsp;<span class="ident" id="1750466">nd</span>&nbsp;<span class="op" id="1750469">&lt;</span>&nbsp;<span class="num" id="1750471">0</span>&nbsp;<span class="op" id="1750473">||</span>&nbsp;<span class="ident" id="1750476">nd</span>&nbsp;<span class="op" id="1750479">&gt;=</span>&nbsp;<span class="ident" id="1750482">a</span><span class="op" id="1750483">.</span><span class="ident" id="1750484">nd</span>&nbsp;<span class="op" id="1750487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750491">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750502">a</span><span class="op" id="1750503">.</span><span class="ident" id="1750504">nd</span>&nbsp;<span class="op" id="1750507">=</span>&nbsp;<span class="ident" id="1750509">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750513">trim</span><span class="op" id="1750517">(</span><span class="ident" id="1750518">a</span><span class="op" id="1750519">)</span><br>
<span class="lineno">335</span><span class="op" id="1750521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1750524">//&nbsp;Round&nbsp;a&nbsp;up&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="1750563">func</span>&nbsp;<span class="op" id="1750568">(</span><span class="ident" id="1750569">a</span>&nbsp;<span class="op" id="1750571">*</span><span class="ident" id="1750572">decimal</span><span class="op" id="1750579">)</span>&nbsp;<span class="ident" id="1750581">RoundUp</span><span class="op" id="1750588">(</span><span class="ident" id="1750589">nd</span>&nbsp;<span class="builtintype" id="1750592">int</span><span class="op" id="1750595">)</span>&nbsp;<span class="op" id="1750597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750600">if</span>&nbsp;<span class="ident" id="1750603">nd</span>&nbsp;<span class="op" id="1750606">&lt;</span>&nbsp;<span class="num" id="1750608">0</span>&nbsp;<span class="op" id="1750610">||</span>&nbsp;<span class="ident" id="1750613">nd</span>&nbsp;<span class="op" id="1750616">&gt;=</span>&nbsp;<span class="ident" id="1750619">a</span><span class="op" id="1750620">.</span><span class="ident" id="1750621">nd</span>&nbsp;<span class="op" id="1750624">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750628">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1750640">//&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750653">for</span>&nbsp;<span class="ident" id="1750657">i</span>&nbsp;<span class="op" id="1750659">:=</span>&nbsp;<span class="ident" id="1750662">nd</span>&nbsp;<span class="op" id="1750665">-</span>&nbsp;<span class="num" id="1750667">1</span><span class="op" id="1750668">;</span>&nbsp;<span class="ident" id="1750670">i</span>&nbsp;<span class="op" id="1750672">&gt;=</span>&nbsp;<span class="num" id="1750675">0</span><span class="op" id="1750676">;</span>&nbsp;<span class="ident" id="1750678">i</span><span class="op" id="1750679">--</span>&nbsp;<span class="op" id="1750682">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750686">c</span>&nbsp;<span class="op" id="1750688">:=</span>&nbsp;<span class="ident" id="1750691">a</span><span class="op" id="1750692">.</span><span class="ident" id="1750693">d</span><span class="op" id="1750694">[</span><span class="ident" id="1750695">i</span><span class="op" id="1750696">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750700">if</span>&nbsp;<span class="ident" id="1750703">c</span>&nbsp;<span class="op" id="1750705">&lt;</span>&nbsp;<span class="string" id="1750707">&#39;9&#39;</span>&nbsp;<span class="op" id="1750711">{</span>&nbsp;<span class="comment" id="1750713">//&nbsp;can&nbsp;stop&nbsp;after&nbsp;this&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750745">a</span><span class="op" id="1750746">.</span><span class="ident" id="1750747">d</span><span class="op" id="1750748">[</span><span class="ident" id="1750749">i</span><span class="op" id="1750750">]</span><span class="op" id="1750751">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750757">a</span><span class="op" id="1750758">.</span><span class="ident" id="1750759">nd</span>&nbsp;<span class="op" id="1750762">=</span>&nbsp;<span class="ident" id="1750764">i</span>&nbsp;<span class="op" id="1750766">+</span>&nbsp;<span class="num" id="1750768">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750773">return</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1750789">//&nbsp;Number&nbsp;is&nbsp;all&nbsp;9s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1750811">//&nbsp;Change&nbsp;to&nbsp;single&nbsp;1&nbsp;with&nbsp;adjusted&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750863">a</span><span class="op" id="1750864">.</span><span class="ident" id="1750865">d</span><span class="op" id="1750866">[</span><span class="num" id="1750867">0</span><span class="op" id="1750868">]</span>&nbsp;<span class="op" id="1750870">=</span>&nbsp;<span class="string" id="1750872">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750877">a</span><span class="op" id="1750878">.</span><span class="ident" id="1750879">nd</span>&nbsp;<span class="op" id="1750882">=</span>&nbsp;<span class="num" id="1750884">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750887">a</span><span class="op" id="1750888">.</span><span class="ident" id="1750889">dp</span><span class="op" id="1750891">++</span><br>
<span class="lineno"></span><span class="op" id="1750894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="1750897">//&nbsp;Extract&nbsp;integer&nbsp;part,&nbsp;rounded&nbsp;appropriately.</span><br>
<span class="lineno"></span><span class="comment" id="1750945">//&nbsp;No&nbsp;guarantees&nbsp;about&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="1750978">func</span>&nbsp;<span class="op" id="1750983">(</span><span class="ident" id="1750984">a</span>&nbsp;<span class="op" id="1750986">*</span><span class="ident" id="1750987">decimal</span><span class="op" id="1750994">)</span>&nbsp;<span class="ident" id="1750996">RoundedInteger</span><span class="op" id="1751010">(</span><span class="op" id="1751011">)</span>&nbsp;<span class="ident" id="1751013">uint64</span>&nbsp;<span class="op" id="1751020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751023">if</span>&nbsp;<span class="ident" id="1751026">a</span><span class="op" id="1751027">.</span><span class="ident" id="1751028">dp</span>&nbsp;<span class="op" id="1751031">&gt;</span>&nbsp;<span class="num" id="1751033">20</span>&nbsp;<span class="op" id="1751036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751040">return</span>&nbsp;<span class="num" id="1751047">0xFFFFFFFFFFFFFFFF</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1751067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751070">var</span>&nbsp;<span class="ident" id="1751074">i</span>&nbsp;<span class="builtintype" id="1751076">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1751081">n</span>&nbsp;<span class="op" id="1751083">:=</span>&nbsp;<span class="ident" id="1751086">uint64</span><span class="op" id="1751092">(</span><span class="num" id="1751093">0</span><span class="op" id="1751094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751097">for</span>&nbsp;<span class="ident" id="1751101">i</span>&nbsp;<span class="op" id="1751103">=</span>&nbsp;<span class="num" id="1751105">0</span><span class="op" id="1751106">;</span>&nbsp;<span class="ident" id="1751108">i</span>&nbsp;<span class="op" id="1751110">&lt;</span>&nbsp;<span class="ident" id="1751112">a</span><span class="op" id="1751113">.</span><span class="ident" id="1751114">dp</span>&nbsp;<span class="op" id="1751117">&amp;&amp;</span>&nbsp;<span class="ident" id="1751120">i</span>&nbsp;<span class="op" id="1751122">&lt;</span>&nbsp;<span class="ident" id="1751124">a</span><span class="op" id="1751125">.</span><span class="ident" id="1751126">nd</span><span class="op" id="1751128">;</span>&nbsp;<span class="ident" id="1751130">i</span><span class="op" id="1751131">++</span>&nbsp;<span class="op" id="1751134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1751138">n</span>&nbsp;<span class="op" id="1751140">=</span>&nbsp;<span class="ident" id="1751142">n</span><span class="op" id="1751143">*</span><span class="num" id="1751144">10</span>&nbsp;<span class="op" id="1751147">+</span>&nbsp;<span class="ident" id="1751149">uint64</span><span class="op" id="1751155">(</span><span class="ident" id="1751156">a</span><span class="op" id="1751157">.</span><span class="ident" id="1751158">d</span><span class="op" id="1751159">[</span><span class="ident" id="1751160">i</span><span class="op" id="1751161">]</span><span class="op" id="1751162">-</span><span class="string" id="1751163">&#39;0&#39;</span><span class="op" id="1751166">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1751169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751172">for</span>&nbsp;<span class="op" id="1751176">;</span>&nbsp;<span class="ident" id="1751178">i</span>&nbsp;<span class="op" id="1751180">&lt;</span>&nbsp;<span class="ident" id="1751182">a</span><span class="op" id="1751183">.</span><span class="ident" id="1751184">dp</span><span class="op" id="1751186">;</span>&nbsp;<span class="ident" id="1751188">i</span><span class="op" id="1751189">++</span>&nbsp;<span class="op" id="1751192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1751196">n</span>&nbsp;<span class="op" id="1751198">*=</span>&nbsp;<span class="num" id="1751201">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1751205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751208">if</span>&nbsp;<span class="ident" id="1751211">shouldRoundUp</span><span class="op" id="1751224">(</span><span class="ident" id="1751225">a</span><span class="op" id="1751226">,</span>&nbsp;<span class="ident" id="1751228">a</span><span class="op" id="1751229">.</span><span class="ident" id="1751230">dp</span><span class="op" id="1751232">)</span>&nbsp;<span class="op" id="1751234">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1751238">n</span><span class="op" id="1751239">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1751243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751246">return</span>&nbsp;<span class="ident" id="1751253">n</span><br>
<span class="lineno"></span><span class="op" id="1751255">}</span>
</div>
</body>
</html>
