<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7832104">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7832159">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7832213">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7832264">package</span>&nbsp;<span class="ident" id="7832272">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7832277">import</span>&nbsp;<span class="op" id="7832284">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7832287">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7832296">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7832312">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7832329">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7832345">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7832352">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7832360">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7832371">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7832382">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7832392">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7832395">func</span>&nbsp;<span class="ident" id="7832400">TestZeroRat</span><span class="op" id="7832411">(</span><span class="ident" id="7832412">t</span>&nbsp;<span class="op" id="7832414">*</span><span class="ident" id="7832415">testing</span><span class="op" id="7832422">.</span><span class="ident" id="7832423">T</span><span class="op" id="7832424">)</span>&nbsp;<span class="op" id="7832426">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832429">var</span>&nbsp;<span class="ident" id="7832433">x</span><span class="op" id="7832434">,</span>&nbsp;<span class="ident" id="7832436">y</span><span class="op" id="7832437">,</span>&nbsp;<span class="ident" id="7832439">z</span>&nbsp;<span class="ident" id="7832441">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832446">y</span><span class="op" id="7832447">.</span><span class="ident" id="7832448">SetFrac64</span><span class="op" id="7832457">(</span><span class="num" id="7832458">0</span><span class="op" id="7832459">,</span>&nbsp;<span class="num" id="7832461">42</span><span class="op" id="7832463">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832467">if</span>&nbsp;<span class="ident" id="7832470">x</span><span class="op" id="7832471">.</span><span class="ident" id="7832472">Cmp</span><span class="op" id="7832475">(</span><span class="op" id="7832476">&amp;</span><span class="ident" id="7832477">y</span><span class="op" id="7832478">)</span>&nbsp;<span class="op" id="7832480">!=</span>&nbsp;<span class="num" id="7832483">0</span>&nbsp;<span class="op" id="7832485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832489">t</span><span class="op" id="7832490">.</span><span class="ident" id="7832491">Errorf</span><span class="op" id="7832497">(</span><span class="string" id="7832498">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="7832537">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832544">if</span>&nbsp;<span class="ident" id="7832547">s</span>&nbsp;<span class="op" id="7832549">:=</span>&nbsp;<span class="ident" id="7832552">x</span><span class="op" id="7832553">.</span><span class="ident" id="7832554">String</span><span class="op" id="7832560">(</span><span class="op" id="7832561">)</span><span class="op" id="7832562">;</span>&nbsp;<span class="ident" id="7832564">s</span>&nbsp;<span class="op" id="7832566">!=</span>&nbsp;<span class="string" id="7832569">&#34;0/1&#34;</span>&nbsp;<span class="op" id="7832575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832579">t</span><span class="op" id="7832580">.</span><span class="ident" id="7832581">Errorf</span><span class="op" id="7832587">(</span><span class="string" id="7832588">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="7832610">,</span>&nbsp;<span class="ident" id="7832612">s</span><span class="op" id="7832613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832616">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832620">if</span>&nbsp;<span class="ident" id="7832623">s</span>&nbsp;<span class="op" id="7832625">:=</span>&nbsp;<span class="ident" id="7832628">x</span><span class="op" id="7832629">.</span><span class="ident" id="7832630">RatString</span><span class="op" id="7832639">(</span><span class="op" id="7832640">)</span><span class="op" id="7832641">;</span>&nbsp;<span class="ident" id="7832643">s</span>&nbsp;<span class="op" id="7832645">!=</span>&nbsp;<span class="string" id="7832648">&#34;0&#34;</span>&nbsp;<span class="op" id="7832652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832656">t</span><span class="op" id="7832657">.</span><span class="ident" id="7832658">Errorf</span><span class="op" id="7832664">(</span><span class="string" id="7832665">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7832685">,</span>&nbsp;<span class="ident" id="7832687">s</span><span class="op" id="7832688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832695">z</span><span class="op" id="7832696">.</span><span class="ident" id="7832697">Add</span><span class="op" id="7832700">(</span><span class="op" id="7832701">&amp;</span><span class="ident" id="7832702">x</span><span class="op" id="7832703">,</span>&nbsp;<span class="op" id="7832705">&amp;</span><span class="ident" id="7832706">y</span><span class="op" id="7832707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832710">if</span>&nbsp;<span class="ident" id="7832713">s</span>&nbsp;<span class="op" id="7832715">:=</span>&nbsp;<span class="ident" id="7832718">z</span><span class="op" id="7832719">.</span><span class="ident" id="7832720">RatString</span><span class="op" id="7832729">(</span><span class="op" id="7832730">)</span><span class="op" id="7832731">;</span>&nbsp;<span class="ident" id="7832733">s</span>&nbsp;<span class="op" id="7832735">!=</span>&nbsp;<span class="string" id="7832738">&#34;0&#34;</span>&nbsp;<span class="op" id="7832742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832746">t</span><span class="op" id="7832747">.</span><span class="ident" id="7832748">Errorf</span><span class="op" id="7832754">(</span><span class="string" id="7832755">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7832777">,</span>&nbsp;<span class="ident" id="7832779">s</span><span class="op" id="7832780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832787">z</span><span class="op" id="7832788">.</span><span class="ident" id="7832789">Sub</span><span class="op" id="7832792">(</span><span class="op" id="7832793">&amp;</span><span class="ident" id="7832794">x</span><span class="op" id="7832795">,</span>&nbsp;<span class="op" id="7832797">&amp;</span><span class="ident" id="7832798">y</span><span class="op" id="7832799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832802">if</span>&nbsp;<span class="ident" id="7832805">s</span>&nbsp;<span class="op" id="7832807">:=</span>&nbsp;<span class="ident" id="7832810">z</span><span class="op" id="7832811">.</span><span class="ident" id="7832812">RatString</span><span class="op" id="7832821">(</span><span class="op" id="7832822">)</span><span class="op" id="7832823">;</span>&nbsp;<span class="ident" id="7832825">s</span>&nbsp;<span class="op" id="7832827">!=</span>&nbsp;<span class="string" id="7832830">&#34;0&#34;</span>&nbsp;<span class="op" id="7832834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832838">t</span><span class="op" id="7832839">.</span><span class="ident" id="7832840">Errorf</span><span class="op" id="7832846">(</span><span class="string" id="7832847">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7832869">,</span>&nbsp;<span class="ident" id="7832871">s</span><span class="op" id="7832872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832879">z</span><span class="op" id="7832880">.</span><span class="ident" id="7832881">Mul</span><span class="op" id="7832884">(</span><span class="op" id="7832885">&amp;</span><span class="ident" id="7832886">x</span><span class="op" id="7832887">,</span>&nbsp;<span class="op" id="7832889">&amp;</span><span class="ident" id="7832890">y</span><span class="op" id="7832891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7832894">if</span>&nbsp;<span class="ident" id="7832897">s</span>&nbsp;<span class="op" id="7832899">:=</span>&nbsp;<span class="ident" id="7832902">z</span><span class="op" id="7832903">.</span><span class="ident" id="7832904">RatString</span><span class="op" id="7832913">(</span><span class="op" id="7832914">)</span><span class="op" id="7832915">;</span>&nbsp;<span class="ident" id="7832917">s</span>&nbsp;<span class="op" id="7832919">!=</span>&nbsp;<span class="string" id="7832922">&#34;0&#34;</span>&nbsp;<span class="op" id="7832926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7832930">t</span><span class="op" id="7832931">.</span><span class="ident" id="7832932">Errorf</span><span class="op" id="7832938">(</span><span class="string" id="7832939">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7832961">,</span>&nbsp;<span class="ident" id="7832963">s</span><span class="op" id="7832964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7832967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7832971">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7833002">defer</span>&nbsp;<span class="keyword" id="7833008">func</span><span class="op" id="7833012">(</span><span class="op" id="7833013">)</span>&nbsp;<span class="op" id="7833015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7833019">if</span>&nbsp;<span class="ident" id="7833022">s</span>&nbsp;<span class="op" id="7833024">:=</span>&nbsp;<span class="builtinfunc" id="7833027">recover</span><span class="op" id="7833034">(</span><span class="op" id="7833035">)</span><span class="op" id="7833036">;</span>&nbsp;<span class="ident" id="7833038">s</span>&nbsp;<span class="op" id="7833040">==</span>&nbsp;<span class="ident" id="7833043">nil</span>&nbsp;<span class="op" id="7833047">||</span>&nbsp;<span class="ident" id="7833050">s</span><span class="op" id="7833051">.</span><span class="op" id="7833052">(</span><span class="builtintype" id="7833053">string</span><span class="op" id="7833059">)</span>&nbsp;<span class="op" id="7833061">!=</span>&nbsp;<span class="string" id="7833064">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="7833083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7833088">panic</span><span class="op" id="7833093">(</span><span class="ident" id="7833094">s</span><span class="op" id="7833095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833099">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833102">}</span><span class="op" id="7833103">(</span><span class="op" id="7833104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7833107">z</span><span class="op" id="7833108">.</span><span class="ident" id="7833109">Quo</span><span class="op" id="7833112">(</span><span class="op" id="7833113">&amp;</span><span class="ident" id="7833114">x</span><span class="op" id="7833115">,</span>&nbsp;<span class="op" id="7833117">&amp;</span><span class="ident" id="7833118">y</span><span class="op" id="7833119">)</span><br>
<span class="lineno"></span><span class="op" id="7833121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7833124">var</span>&nbsp;<span class="ident" id="7833128">setStringTests</span>&nbsp;<span class="op" id="7833143">=</span>&nbsp;<span class="op" id="7833145">[</span><span class="op" id="7833146">]</span><span class="keyword" id="7833147">struct</span>&nbsp;<span class="op" id="7833154">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7833157">in</span><span class="op" id="7833159">,</span>&nbsp;<span class="ident" id="7833161">out</span>&nbsp;<span class="builtintype" id="7833165">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7833173">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7833181">bool</span><br>
<span class="lineno"></span><span class="op" id="7833186">}</span><span class="op" id="7833187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833190">{</span><span class="string" id="7833191">&#34;0&#34;</span><span class="op" id="7833194">,</span>&nbsp;<span class="string" id="7833196">&#34;0&#34;</span><span class="op" id="7833199">,</span>&nbsp;<span class="builtintype" id="7833201">true</span><span class="op" id="7833205">}</span><span class="op" id="7833206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833209">{</span><span class="string" id="7833210">&#34;-0&#34;</span><span class="op" id="7833214">,</span>&nbsp;<span class="string" id="7833216">&#34;0&#34;</span><span class="op" id="7833219">,</span>&nbsp;<span class="builtintype" id="7833221">true</span><span class="op" id="7833225">}</span><span class="op" id="7833226">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833229">{</span><span class="string" id="7833230">&#34;1&#34;</span><span class="op" id="7833233">,</span>&nbsp;<span class="string" id="7833235">&#34;1&#34;</span><span class="op" id="7833238">,</span>&nbsp;<span class="builtintype" id="7833240">true</span><span class="op" id="7833244">}</span><span class="op" id="7833245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833248">{</span><span class="string" id="7833249">&#34;-1&#34;</span><span class="op" id="7833253">,</span>&nbsp;<span class="string" id="7833255">&#34;-1&#34;</span><span class="op" id="7833259">,</span>&nbsp;<span class="builtintype" id="7833261">true</span><span class="op" id="7833265">}</span><span class="op" id="7833266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833269">{</span><span class="string" id="7833270">&#34;1.&#34;</span><span class="op" id="7833274">,</span>&nbsp;<span class="string" id="7833276">&#34;1&#34;</span><span class="op" id="7833279">,</span>&nbsp;<span class="builtintype" id="7833281">true</span><span class="op" id="7833285">}</span><span class="op" id="7833286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833289">{</span><span class="string" id="7833290">&#34;1e0&#34;</span><span class="op" id="7833295">,</span>&nbsp;<span class="string" id="7833297">&#34;1&#34;</span><span class="op" id="7833300">,</span>&nbsp;<span class="builtintype" id="7833302">true</span><span class="op" id="7833306">}</span><span class="op" id="7833307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833310">{</span><span class="string" id="7833311">&#34;1.e1&#34;</span><span class="op" id="7833317">,</span>&nbsp;<span class="string" id="7833319">&#34;10&#34;</span><span class="op" id="7833323">,</span>&nbsp;<span class="builtintype" id="7833325">true</span><span class="op" id="7833329">}</span><span class="op" id="7833330">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833333">{</span><span class="ident" id="7833334">in</span><span class="op" id="7833336">:</span>&nbsp;<span class="string" id="7833338">&#34;1e&#34;</span><span class="op" id="7833342">,</span>&nbsp;<span class="ident" id="7833344">ok</span><span class="op" id="7833346">:</span>&nbsp;<span class="builtintype" id="7833348">false</span><span class="op" id="7833353">}</span><span class="op" id="7833354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833357">{</span><span class="ident" id="7833358">in</span><span class="op" id="7833360">:</span>&nbsp;<span class="string" id="7833362">&#34;1.e&#34;</span><span class="op" id="7833367">,</span>&nbsp;<span class="ident" id="7833369">ok</span><span class="op" id="7833371">:</span>&nbsp;<span class="builtintype" id="7833373">false</span><span class="op" id="7833378">}</span><span class="op" id="7833379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833382">{</span><span class="ident" id="7833383">in</span><span class="op" id="7833385">:</span>&nbsp;<span class="string" id="7833387">&#34;1e+14e-5&#34;</span><span class="op" id="7833397">,</span>&nbsp;<span class="ident" id="7833399">ok</span><span class="op" id="7833401">:</span>&nbsp;<span class="builtintype" id="7833403">false</span><span class="op" id="7833408">}</span><span class="op" id="7833409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833412">{</span><span class="ident" id="7833413">in</span><span class="op" id="7833415">:</span>&nbsp;<span class="string" id="7833417">&#34;1e4.5&#34;</span><span class="op" id="7833424">,</span>&nbsp;<span class="ident" id="7833426">ok</span><span class="op" id="7833428">:</span>&nbsp;<span class="builtintype" id="7833430">false</span><span class="op" id="7833435">}</span><span class="op" id="7833436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833439">{</span><span class="ident" id="7833440">in</span><span class="op" id="7833442">:</span>&nbsp;<span class="string" id="7833444">&#34;r&#34;</span><span class="op" id="7833447">,</span>&nbsp;<span class="ident" id="7833449">ok</span><span class="op" id="7833451">:</span>&nbsp;<span class="builtintype" id="7833453">false</span><span class="op" id="7833458">}</span><span class="op" id="7833459">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833462">{</span><span class="ident" id="7833463">in</span><span class="op" id="7833465">:</span>&nbsp;<span class="string" id="7833467">&#34;a/b&#34;</span><span class="op" id="7833472">,</span>&nbsp;<span class="ident" id="7833474">ok</span><span class="op" id="7833476">:</span>&nbsp;<span class="builtintype" id="7833478">false</span><span class="op" id="7833483">}</span><span class="op" id="7833484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833487">{</span><span class="ident" id="7833488">in</span><span class="op" id="7833490">:</span>&nbsp;<span class="string" id="7833492">&#34;a.b&#34;</span><span class="op" id="7833497">,</span>&nbsp;<span class="ident" id="7833499">ok</span><span class="op" id="7833501">:</span>&nbsp;<span class="builtintype" id="7833503">false</span><span class="op" id="7833508">}</span><span class="op" id="7833509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833512">{</span><span class="string" id="7833513">&#34;-0.1&#34;</span><span class="op" id="7833519">,</span>&nbsp;<span class="string" id="7833521">&#34;-1/10&#34;</span><span class="op" id="7833528">,</span>&nbsp;<span class="builtintype" id="7833530">true</span><span class="op" id="7833534">}</span><span class="op" id="7833535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833538">{</span><span class="string" id="7833539">&#34;-.1&#34;</span><span class="op" id="7833544">,</span>&nbsp;<span class="string" id="7833546">&#34;-1/10&#34;</span><span class="op" id="7833553">,</span>&nbsp;<span class="builtintype" id="7833555">true</span><span class="op" id="7833559">}</span><span class="op" id="7833560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833563">{</span><span class="string" id="7833564">&#34;2/4&#34;</span><span class="op" id="7833569">,</span>&nbsp;<span class="string" id="7833571">&#34;1/2&#34;</span><span class="op" id="7833576">,</span>&nbsp;<span class="builtintype" id="7833578">true</span><span class="op" id="7833582">}</span><span class="op" id="7833583">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833586">{</span><span class="string" id="7833587">&#34;.25&#34;</span><span class="op" id="7833592">,</span>&nbsp;<span class="string" id="7833594">&#34;1/4&#34;</span><span class="op" id="7833599">,</span>&nbsp;<span class="builtintype" id="7833601">true</span><span class="op" id="7833605">}</span><span class="op" id="7833606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833609">{</span><span class="string" id="7833610">&#34;-1/5&#34;</span><span class="op" id="7833616">,</span>&nbsp;<span class="string" id="7833618">&#34;-1/5&#34;</span><span class="op" id="7833624">,</span>&nbsp;<span class="builtintype" id="7833626">true</span><span class="op" id="7833630">}</span><span class="op" id="7833631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833634">{</span><span class="string" id="7833635">&#34;8129567.7690E14&#34;</span><span class="op" id="7833652">,</span>&nbsp;<span class="string" id="7833654">&#34;812956776900000000000&#34;</span><span class="op" id="7833677">,</span>&nbsp;<span class="builtintype" id="7833679">true</span><span class="op" id="7833683">}</span><span class="op" id="7833684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833687">{</span><span class="string" id="7833688">&#34;78189e+4&#34;</span><span class="op" id="7833698">,</span>&nbsp;<span class="string" id="7833700">&#34;781890000&#34;</span><span class="op" id="7833711">,</span>&nbsp;<span class="builtintype" id="7833713">true</span><span class="op" id="7833717">}</span><span class="op" id="7833718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833721">{</span><span class="string" id="7833722">&#34;553019.8935e+8&#34;</span><span class="op" id="7833738">,</span>&nbsp;<span class="string" id="7833740">&#34;55301989350000&#34;</span><span class="op" id="7833756">,</span>&nbsp;<span class="builtintype" id="7833758">true</span><span class="op" id="7833762">}</span><span class="op" id="7833763">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833766">{</span><span class="string" id="7833767">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="7833802">,</span>&nbsp;<span class="string" id="7833804">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="7833847">,</span>&nbsp;<span class="builtintype" id="7833849">true</span><span class="op" id="7833853">}</span><span class="op" id="7833854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833857">{</span><span class="string" id="7833858">&#34;9877861857500000E-7&#34;</span><span class="op" id="7833879">,</span>&nbsp;<span class="string" id="7833881">&#34;3951144743/4&#34;</span><span class="op" id="7833895">,</span>&nbsp;<span class="builtintype" id="7833897">true</span><span class="op" id="7833901">}</span><span class="op" id="7833902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833905">{</span><span class="string" id="7833906">&#34;2169378.417e-3&#34;</span><span class="op" id="7833922">,</span>&nbsp;<span class="string" id="7833924">&#34;2169378417/1000000&#34;</span><span class="op" id="7833944">,</span>&nbsp;<span class="builtintype" id="7833946">true</span><span class="op" id="7833950">}</span><span class="op" id="7833951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7833954">{</span><span class="string" id="7833955">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7833993">,</span>&nbsp;<span class="string" id="7833995">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7834033">,</span>&nbsp;<span class="builtintype" id="7834035">true</span><span class="op" id="7834039">}</span><span class="op" id="7834040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834043">{</span><span class="string" id="7834044">&#34;53/70893980658822810696&#34;</span><span class="op" id="7834069">,</span>&nbsp;<span class="string" id="7834071">&#34;53/70893980658822810696&#34;</span><span class="op" id="7834096">,</span>&nbsp;<span class="builtintype" id="7834098">true</span><span class="op" id="7834102">}</span><span class="op" id="7834103">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834106">{</span><span class="string" id="7834107">&#34;106/141787961317645621392&#34;</span><span class="op" id="7834134">,</span>&nbsp;<span class="string" id="7834136">&#34;53/70893980658822810696&#34;</span><span class="op" id="7834161">,</span>&nbsp;<span class="builtintype" id="7834163">true</span><span class="op" id="7834167">}</span><span class="op" id="7834168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834171">{</span><span class="string" id="7834172">&#34;204211327800791583.81095&#34;</span><span class="op" id="7834198">,</span>&nbsp;<span class="string" id="7834200">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="7834230">,</span>&nbsp;<span class="builtintype" id="7834232">true</span><span class="op" id="7834236">}</span><span class="op" id="7834237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834240">{</span><span class="ident" id="7834241">in</span><span class="op" id="7834243">:</span>&nbsp;<span class="string" id="7834245">&#34;1/0&#34;</span><span class="op" id="7834250">,</span>&nbsp;<span class="ident" id="7834252">ok</span><span class="op" id="7834254">:</span>&nbsp;<span class="builtintype" id="7834256">false</span><span class="op" id="7834261">}</span><span class="op" id="7834262">,</span><br>
<span class="lineno"></span><span class="op" id="7834264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7834267">func</span>&nbsp;<span class="ident" id="7834272">TestRatSetString</span><span class="op" id="7834288">(</span><span class="ident" id="7834289">t</span>&nbsp;<span class="op" id="7834291">*</span><span class="ident" id="7834292">testing</span><span class="op" id="7834299">.</span><span class="ident" id="7834300">T</span><span class="op" id="7834301">)</span>&nbsp;<span class="op" id="7834303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834306">for</span>&nbsp;<span class="ident" id="7834310">i</span><span class="op" id="7834311">,</span>&nbsp;<span class="ident" id="7834313">test</span>&nbsp;<span class="op" id="7834318">:=</span>&nbsp;<span class="keyword" id="7834321">range</span>&nbsp;<span class="ident" id="7834327">setStringTests</span>&nbsp;<span class="op" id="7834342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834346">x</span><span class="op" id="7834347">,</span>&nbsp;<span class="ident" id="7834349">ok</span>&nbsp;<span class="op" id="7834352">:=</span>&nbsp;<span class="builtinfunc" id="7834355">new</span><span class="op" id="7834358">(</span><span class="ident" id="7834359">Rat</span><span class="op" id="7834362">)</span><span class="op" id="7834363">.</span><span class="ident" id="7834364">SetString</span><span class="op" id="7834373">(</span><span class="ident" id="7834374">test</span><span class="op" id="7834378">.</span><span class="ident" id="7834379">in</span><span class="op" id="7834381">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834386">if</span>&nbsp;<span class="ident" id="7834389">ok</span>&nbsp;<span class="op" id="7834392">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834397">if</span>&nbsp;<span class="op" id="7834400">!</span><span class="ident" id="7834401">test</span><span class="op" id="7834405">.</span><span class="ident" id="7834406">ok</span>&nbsp;<span class="op" id="7834409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834415">t</span><span class="op" id="7834416">.</span><span class="ident" id="7834417">Errorf</span><span class="op" id="7834423">(</span><span class="string" id="7834424">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="7834460">,</span>&nbsp;<span class="ident" id="7834462">i</span><span class="op" id="7834463">,</span>&nbsp;<span class="ident" id="7834465">test</span><span class="op" id="7834469">.</span><span class="ident" id="7834470">in</span><span class="op" id="7834472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834477">}</span>&nbsp;<span class="keyword" id="7834479">else</span>&nbsp;<span class="keyword" id="7834484">if</span>&nbsp;<span class="ident" id="7834487">x</span><span class="op" id="7834488">.</span><span class="ident" id="7834489">RatString</span><span class="op" id="7834498">(</span><span class="op" id="7834499">)</span>&nbsp;<span class="op" id="7834501">!=</span>&nbsp;<span class="ident" id="7834504">test</span><span class="op" id="7834508">.</span><span class="ident" id="7834509">out</span>&nbsp;<span class="op" id="7834513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834519">t</span><span class="op" id="7834520">.</span><span class="ident" id="7834521">Errorf</span><span class="op" id="7834527">(</span><span class="string" id="7834528">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7834562">,</span>&nbsp;<span class="ident" id="7834564">i</span><span class="op" id="7834565">,</span>&nbsp;<span class="ident" id="7834567">test</span><span class="op" id="7834571">.</span><span class="ident" id="7834572">in</span><span class="op" id="7834574">,</span>&nbsp;<span class="ident" id="7834576">x</span><span class="op" id="7834577">.</span><span class="ident" id="7834578">RatString</span><span class="op" id="7834587">(</span><span class="op" id="7834588">)</span><span class="op" id="7834589">,</span>&nbsp;<span class="ident" id="7834591">test</span><span class="op" id="7834595">.</span><span class="ident" id="7834596">out</span><span class="op" id="7834599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834604">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834608">}</span>&nbsp;<span class="keyword" id="7834610">else</span>&nbsp;<span class="keyword" id="7834615">if</span>&nbsp;<span class="ident" id="7834618">x</span>&nbsp;<span class="op" id="7834620">!=</span>&nbsp;<span class="ident" id="7834623">nil</span>&nbsp;<span class="op" id="7834627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834632">t</span><span class="op" id="7834633">.</span><span class="ident" id="7834634">Errorf</span><span class="op" id="7834640">(</span><span class="string" id="7834641">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7834676">,</span>&nbsp;<span class="ident" id="7834678">i</span><span class="op" id="7834679">,</span>&nbsp;<span class="ident" id="7834681">test</span><span class="op" id="7834685">.</span><span class="ident" id="7834686">in</span><span class="op" id="7834688">,</span>&nbsp;<span class="ident" id="7834690">x</span><span class="op" id="7834691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834698">}</span><br>
<span class="lineno"></span><span class="op" id="7834700">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="7834703">func</span>&nbsp;<span class="ident" id="7834708">TestRatScan</span><span class="op" id="7834719">(</span><span class="ident" id="7834720">t</span>&nbsp;<span class="op" id="7834722">*</span><span class="ident" id="7834723">testing</span><span class="op" id="7834730">.</span><span class="ident" id="7834731">T</span><span class="op" id="7834732">)</span>&nbsp;<span class="op" id="7834734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834737">var</span>&nbsp;<span class="ident" id="7834741">buf</span>&nbsp;<span class="ident" id="7834745">bytes</span><span class="op" id="7834750">.</span><span class="ident" id="7834751">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834759">for</span>&nbsp;<span class="ident" id="7834763">i</span><span class="op" id="7834764">,</span>&nbsp;<span class="ident" id="7834766">test</span>&nbsp;<span class="op" id="7834771">:=</span>&nbsp;<span class="keyword" id="7834774">range</span>&nbsp;<span class="ident" id="7834780">setStringTests</span>&nbsp;<span class="op" id="7834795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834799">x</span>&nbsp;<span class="op" id="7834801">:=</span>&nbsp;<span class="builtinfunc" id="7834804">new</span><span class="op" id="7834807">(</span><span class="ident" id="7834808">Rat</span><span class="op" id="7834811">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834815">buf</span><span class="op" id="7834818">.</span><span class="ident" id="7834819">Reset</span><span class="op" id="7834824">(</span><span class="op" id="7834825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834829">buf</span><span class="op" id="7834832">.</span><span class="ident" id="7834833">WriteString</span><span class="op" id="7834844">(</span><span class="ident" id="7834845">test</span><span class="op" id="7834849">.</span><span class="ident" id="7834850">in</span><span class="op" id="7834852">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834857">_</span><span class="op" id="7834858">,</span>&nbsp;<span class="ident" id="7834860">err</span>&nbsp;<span class="op" id="7834864">:=</span>&nbsp;<span class="ident" id="7834867">fmt</span><span class="op" id="7834870">.</span><span class="ident" id="7834871">Fscanf</span><span class="op" id="7834877">(</span><span class="op" id="7834878">&amp;</span><span class="ident" id="7834879">buf</span><span class="op" id="7834882">,</span>&nbsp;<span class="string" id="7834884">&#34;%v&#34;</span><span class="op" id="7834888">,</span>&nbsp;<span class="ident" id="7834890">x</span><span class="op" id="7834891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834895">if</span>&nbsp;<span class="ident" id="7834898">err</span>&nbsp;<span class="op" id="7834902">==</span>&nbsp;<span class="ident" id="7834905">nil</span>&nbsp;<span class="op" id="7834909">!=</span>&nbsp;<span class="ident" id="7834912">test</span><span class="op" id="7834916">.</span><span class="ident" id="7834917">ok</span>&nbsp;<span class="op" id="7834920">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7834925">if</span>&nbsp;<span class="ident" id="7834928">test</span><span class="op" id="7834932">.</span><span class="ident" id="7834933">ok</span>&nbsp;<span class="op" id="7834936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834942">t</span><span class="op" id="7834943">.</span><span class="ident" id="7834944">Errorf</span><span class="op" id="7834950">(</span><span class="string" id="7834951">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7834966">,</span>&nbsp;<span class="ident" id="7834968">i</span><span class="op" id="7834969">,</span>&nbsp;<span class="ident" id="7834971">err</span><span class="op" id="7834974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7834979">}</span>&nbsp;<span class="keyword" id="7834981">else</span>&nbsp;<span class="op" id="7834986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7834992">t</span><span class="op" id="7834993">.</span><span class="ident" id="7834994">Errorf</span><span class="op" id="7835000">(</span><span class="string" id="7835001">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="7835021">,</span>&nbsp;<span class="ident" id="7835023">i</span><span class="op" id="7835024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835029">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835034">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835049">if</span>&nbsp;<span class="ident" id="7835052">err</span>&nbsp;<span class="op" id="7835056">==</span>&nbsp;<span class="ident" id="7835059">nil</span>&nbsp;<span class="op" id="7835063">&amp;&amp;</span>&nbsp;<span class="ident" id="7835066">x</span><span class="op" id="7835067">.</span><span class="ident" id="7835068">RatString</span><span class="op" id="7835077">(</span><span class="op" id="7835078">)</span>&nbsp;<span class="op" id="7835080">!=</span>&nbsp;<span class="ident" id="7835083">test</span><span class="op" id="7835087">.</span><span class="ident" id="7835088">out</span>&nbsp;<span class="op" id="7835092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835097">t</span><span class="op" id="7835098">.</span><span class="ident" id="7835099">Errorf</span><span class="op" id="7835105">(</span><span class="string" id="7835106">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7835126">,</span>&nbsp;<span class="ident" id="7835128">i</span><span class="op" id="7835129">,</span>&nbsp;<span class="ident" id="7835131">x</span><span class="op" id="7835132">.</span><span class="ident" id="7835133">RatString</span><span class="op" id="7835142">(</span><span class="op" id="7835143">)</span><span class="op" id="7835144">,</span>&nbsp;<span class="ident" id="7835146">test</span><span class="op" id="7835150">.</span><span class="ident" id="7835151">out</span><span class="op" id="7835154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835158">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835161">}</span><br>
<span class="lineno"></span><span class="op" id="7835163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7835166">var</span>&nbsp;<span class="ident" id="7835170">floatStringTests</span>&nbsp;<span class="op" id="7835187">=</span>&nbsp;<span class="op" id="7835189">[</span><span class="op" id="7835190">]</span><span class="keyword" id="7835191">struct</span>&nbsp;<span class="op" id="7835198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835201">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7835206">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835214">prec</span>&nbsp;<span class="builtintype" id="7835219">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835224">out</span>&nbsp;&nbsp;<span class="builtintype" id="7835229">string</span><br>
<span class="lineno"></span><span class="op" id="7835236">}</span><span class="op" id="7835237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835240">{</span><span class="string" id="7835241">&#34;0&#34;</span><span class="op" id="7835244">,</span>&nbsp;<span class="num" id="7835246">0</span><span class="op" id="7835247">,</span>&nbsp;<span class="string" id="7835249">&#34;0&#34;</span><span class="op" id="7835252">}</span><span class="op" id="7835253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835256">{</span><span class="string" id="7835257">&#34;0&#34;</span><span class="op" id="7835260">,</span>&nbsp;<span class="num" id="7835262">4</span><span class="op" id="7835263">,</span>&nbsp;<span class="string" id="7835265">&#34;0.0000&#34;</span><span class="op" id="7835273">}</span><span class="op" id="7835274">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835277">{</span><span class="string" id="7835278">&#34;1&#34;</span><span class="op" id="7835281">,</span>&nbsp;<span class="num" id="7835283">0</span><span class="op" id="7835284">,</span>&nbsp;<span class="string" id="7835286">&#34;1&#34;</span><span class="op" id="7835289">}</span><span class="op" id="7835290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835293">{</span><span class="string" id="7835294">&#34;1&#34;</span><span class="op" id="7835297">,</span>&nbsp;<span class="num" id="7835299">2</span><span class="op" id="7835300">,</span>&nbsp;<span class="string" id="7835302">&#34;1.00&#34;</span><span class="op" id="7835308">}</span><span class="op" id="7835309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835312">{</span><span class="string" id="7835313">&#34;-1&#34;</span><span class="op" id="7835317">,</span>&nbsp;<span class="num" id="7835319">0</span><span class="op" id="7835320">,</span>&nbsp;<span class="string" id="7835322">&#34;-1&#34;</span><span class="op" id="7835326">}</span><span class="op" id="7835327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835330">{</span><span class="string" id="7835331">&#34;.25&#34;</span><span class="op" id="7835336">,</span>&nbsp;<span class="num" id="7835338">2</span><span class="op" id="7835339">,</span>&nbsp;<span class="string" id="7835341">&#34;0.25&#34;</span><span class="op" id="7835347">}</span><span class="op" id="7835348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835351">{</span><span class="string" id="7835352">&#34;.25&#34;</span><span class="op" id="7835357">,</span>&nbsp;<span class="num" id="7835359">1</span><span class="op" id="7835360">,</span>&nbsp;<span class="string" id="7835362">&#34;0.3&#34;</span><span class="op" id="7835367">}</span><span class="op" id="7835368">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835371">{</span><span class="string" id="7835372">&#34;.25&#34;</span><span class="op" id="7835377">,</span>&nbsp;<span class="num" id="7835379">3</span><span class="op" id="7835380">,</span>&nbsp;<span class="string" id="7835382">&#34;0.250&#34;</span><span class="op" id="7835389">}</span><span class="op" id="7835390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835393">{</span><span class="string" id="7835394">&#34;-1/3&#34;</span><span class="op" id="7835400">,</span>&nbsp;<span class="num" id="7835402">3</span><span class="op" id="7835403">,</span>&nbsp;<span class="string" id="7835405">&#34;-0.333&#34;</span><span class="op" id="7835413">}</span><span class="op" id="7835414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835417">{</span><span class="string" id="7835418">&#34;-2/3&#34;</span><span class="op" id="7835424">,</span>&nbsp;<span class="num" id="7835426">4</span><span class="op" id="7835427">,</span>&nbsp;<span class="string" id="7835429">&#34;-0.6667&#34;</span><span class="op" id="7835438">}</span><span class="op" id="7835439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835442">{</span><span class="string" id="7835443">&#34;0.96&#34;</span><span class="op" id="7835449">,</span>&nbsp;<span class="num" id="7835451">1</span><span class="op" id="7835452">,</span>&nbsp;<span class="string" id="7835454">&#34;1.0&#34;</span><span class="op" id="7835459">}</span><span class="op" id="7835460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835463">{</span><span class="string" id="7835464">&#34;0.999&#34;</span><span class="op" id="7835471">,</span>&nbsp;<span class="num" id="7835473">2</span><span class="op" id="7835474">,</span>&nbsp;<span class="string" id="7835476">&#34;1.00&#34;</span><span class="op" id="7835482">}</span><span class="op" id="7835483">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835486">{</span><span class="string" id="7835487">&#34;0.9&#34;</span><span class="op" id="7835492">,</span>&nbsp;<span class="num" id="7835494">0</span><span class="op" id="7835495">,</span>&nbsp;<span class="string" id="7835497">&#34;1&#34;</span><span class="op" id="7835500">}</span><span class="op" id="7835501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835504">{</span><span class="string" id="7835505">&#34;.25&#34;</span><span class="op" id="7835510">,</span>&nbsp;<span class="op" id="7835512">-</span><span class="num" id="7835513">1</span><span class="op" id="7835514">,</span>&nbsp;<span class="string" id="7835516">&#34;0&#34;</span><span class="op" id="7835519">}</span><span class="op" id="7835520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835523">{</span><span class="string" id="7835524">&#34;.55&#34;</span><span class="op" id="7835529">,</span>&nbsp;<span class="op" id="7835531">-</span><span class="num" id="7835532">1</span><span class="op" id="7835533">,</span>&nbsp;<span class="string" id="7835535">&#34;1&#34;</span><span class="op" id="7835538">}</span><span class="op" id="7835539">,</span><br>
<span class="lineno"></span><span class="op" id="7835541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7835544">func</span>&nbsp;<span class="ident" id="7835549">TestFloatString</span><span class="op" id="7835564">(</span><span class="ident" id="7835565">t</span>&nbsp;<span class="op" id="7835567">*</span><span class="ident" id="7835568">testing</span><span class="op" id="7835575">.</span><span class="ident" id="7835576">T</span><span class="op" id="7835577">)</span>&nbsp;<span class="op" id="7835579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835582">for</span>&nbsp;<span class="ident" id="7835586">i</span><span class="op" id="7835587">,</span>&nbsp;<span class="ident" id="7835589">test</span>&nbsp;<span class="op" id="7835594">:=</span>&nbsp;<span class="keyword" id="7835597">range</span>&nbsp;<span class="ident" id="7835603">floatStringTests</span>&nbsp;<span class="op" id="7835620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835624">x</span><span class="op" id="7835625">,</span>&nbsp;<span class="ident" id="7835627">_</span>&nbsp;<span class="op" id="7835629">:=</span>&nbsp;<span class="builtinfunc" id="7835632">new</span><span class="op" id="7835635">(</span><span class="ident" id="7835636">Rat</span><span class="op" id="7835639">)</span><span class="op" id="7835640">.</span><span class="ident" id="7835641">SetString</span><span class="op" id="7835650">(</span><span class="ident" id="7835651">test</span><span class="op" id="7835655">.</span><span class="ident" id="7835656">in</span><span class="op" id="7835658">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835663">if</span>&nbsp;<span class="ident" id="7835666">x</span><span class="op" id="7835667">.</span><span class="ident" id="7835668">FloatString</span><span class="op" id="7835679">(</span><span class="ident" id="7835680">test</span><span class="op" id="7835684">.</span><span class="ident" id="7835685">prec</span><span class="op" id="7835689">)</span>&nbsp;<span class="op" id="7835691">!=</span>&nbsp;<span class="ident" id="7835694">test</span><span class="op" id="7835698">.</span><span class="ident" id="7835699">out</span>&nbsp;<span class="op" id="7835703">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835708">t</span><span class="op" id="7835709">.</span><span class="ident" id="7835710">Errorf</span><span class="op" id="7835716">(</span><span class="string" id="7835717">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7835737">,</span>&nbsp;<span class="ident" id="7835739">i</span><span class="op" id="7835740">,</span>&nbsp;<span class="ident" id="7835742">x</span><span class="op" id="7835743">.</span><span class="ident" id="7835744">FloatString</span><span class="op" id="7835755">(</span><span class="ident" id="7835756">test</span><span class="op" id="7835760">.</span><span class="ident" id="7835761">prec</span><span class="op" id="7835765">)</span><span class="op" id="7835766">,</span>&nbsp;<span class="ident" id="7835768">test</span><span class="op" id="7835772">.</span><span class="ident" id="7835773">out</span><span class="op" id="7835776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835783">}</span><br>
<span class="lineno"></span><span class="op" id="7835785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7835788">func</span>&nbsp;<span class="ident" id="7835793">TestRatSign</span><span class="op" id="7835804">(</span><span class="ident" id="7835805">t</span>&nbsp;<span class="op" id="7835807">*</span><span class="ident" id="7835808">testing</span><span class="op" id="7835815">.</span><span class="ident" id="7835816">T</span><span class="op" id="7835817">)</span>&nbsp;<span class="op" id="7835819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835822">zero</span>&nbsp;<span class="op" id="7835827">:=</span>&nbsp;<span class="ident" id="7835830">NewRat</span><span class="op" id="7835836">(</span><span class="num" id="7835837">0</span><span class="op" id="7835838">,</span>&nbsp;<span class="num" id="7835840">1</span><span class="op" id="7835841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835844">for</span>&nbsp;<span class="ident" id="7835848">_</span><span class="op" id="7835849">,</span>&nbsp;<span class="ident" id="7835851">a</span>&nbsp;<span class="op" id="7835853">:=</span>&nbsp;<span class="keyword" id="7835856">range</span>&nbsp;<span class="ident" id="7835862">setStringTests</span>&nbsp;<span class="op" id="7835877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835881">x</span><span class="op" id="7835882">,</span>&nbsp;<span class="ident" id="7835884">ok</span>&nbsp;<span class="op" id="7835887">:=</span>&nbsp;<span class="builtinfunc" id="7835890">new</span><span class="op" id="7835893">(</span><span class="ident" id="7835894">Rat</span><span class="op" id="7835897">)</span><span class="op" id="7835898">.</span><span class="ident" id="7835899">SetString</span><span class="op" id="7835908">(</span><span class="ident" id="7835909">a</span><span class="op" id="7835910">.</span><span class="ident" id="7835911">in</span><span class="op" id="7835913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835917">if</span>&nbsp;<span class="op" id="7835920">!</span><span class="ident" id="7835921">ok</span>&nbsp;<span class="op" id="7835924">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835929">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7835940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835944">s</span>&nbsp;<span class="op" id="7835946">:=</span>&nbsp;<span class="ident" id="7835949">x</span><span class="op" id="7835950">.</span><span class="ident" id="7835951">Sign</span><span class="op" id="7835955">(</span><span class="op" id="7835956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835960">e</span>&nbsp;<span class="op" id="7835962">:=</span>&nbsp;<span class="ident" id="7835965">x</span><span class="op" id="7835966">.</span><span class="ident" id="7835967">Cmp</span><span class="op" id="7835970">(</span><span class="ident" id="7835971">zero</span><span class="op" id="7835975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7835979">if</span>&nbsp;<span class="ident" id="7835982">s</span>&nbsp;<span class="op" id="7835984">!=</span>&nbsp;<span class="ident" id="7835987">e</span>&nbsp;<span class="op" id="7835989">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7835994">t</span><span class="op" id="7835995">.</span><span class="ident" id="7835996">Errorf</span><span class="op" id="7836002">(</span><span class="string" id="7836003">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7836031">,</span>&nbsp;<span class="ident" id="7836033">s</span><span class="op" id="7836034">,</span>&nbsp;<span class="ident" id="7836036">e</span><span class="op" id="7836037">,</span>&nbsp;<span class="op" id="7836039">&amp;</span><span class="ident" id="7836040">x</span><span class="op" id="7836041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836048">}</span><br>
<span class="lineno"></span><span class="op" id="7836050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7836053">var</span>&nbsp;<span class="ident" id="7836057">ratCmpTests</span>&nbsp;<span class="op" id="7836069">=</span>&nbsp;<span class="op" id="7836071">[</span><span class="op" id="7836072">]</span><span class="keyword" id="7836073">struct</span>&nbsp;<span class="op" id="7836080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836083">rat1</span><span class="op" id="7836087">,</span>&nbsp;<span class="ident" id="7836089">rat2</span>&nbsp;<span class="builtintype" id="7836094">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836102">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7836113">int</span><br>
<span class="lineno"></span><span class="op" id="7836117">}</span><span class="op" id="7836118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836121">{</span><span class="string" id="7836122">&#34;0&#34;</span><span class="op" id="7836125">,</span>&nbsp;<span class="string" id="7836127">&#34;0/1&#34;</span><span class="op" id="7836132">,</span>&nbsp;<span class="num" id="7836134">0</span><span class="op" id="7836135">}</span><span class="op" id="7836136">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836139">{</span><span class="string" id="7836140">&#34;1/1&#34;</span><span class="op" id="7836145">,</span>&nbsp;<span class="string" id="7836147">&#34;1&#34;</span><span class="op" id="7836150">,</span>&nbsp;<span class="num" id="7836152">0</span><span class="op" id="7836153">}</span><span class="op" id="7836154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836157">{</span><span class="string" id="7836158">&#34;-1&#34;</span><span class="op" id="7836162">,</span>&nbsp;<span class="string" id="7836164">&#34;-2/2&#34;</span><span class="op" id="7836170">,</span>&nbsp;<span class="num" id="7836172">0</span><span class="op" id="7836173">}</span><span class="op" id="7836174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836177">{</span><span class="string" id="7836178">&#34;1&#34;</span><span class="op" id="7836181">,</span>&nbsp;<span class="string" id="7836183">&#34;0&#34;</span><span class="op" id="7836186">,</span>&nbsp;<span class="num" id="7836188">1</span><span class="op" id="7836189">}</span><span class="op" id="7836190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836193">{</span><span class="string" id="7836194">&#34;0/1&#34;</span><span class="op" id="7836199">,</span>&nbsp;<span class="string" id="7836201">&#34;1/1&#34;</span><span class="op" id="7836206">,</span>&nbsp;<span class="op" id="7836208">-</span><span class="num" id="7836209">1</span><span class="op" id="7836210">}</span><span class="op" id="7836211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836214">{</span><span class="string" id="7836215">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="7836242">,</span>&nbsp;<span class="string" id="7836244">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="7836271">,</span>&nbsp;<span class="op" id="7836273">-</span><span class="num" id="7836274">1</span><span class="op" id="7836275">}</span><span class="op" id="7836276">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836279">{</span><span class="string" id="7836280">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="7836313">,</span>&nbsp;<span class="string" id="7836315">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="7836348">,</span>&nbsp;<span class="op" id="7836350">-</span><span class="num" id="7836351">1</span><span class="op" id="7836352">}</span><span class="op" id="7836353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836356">{</span><span class="string" id="7836357">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="7836394">,</span>&nbsp;<span class="string" id="7836396">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7836432">,</span>&nbsp;<span class="op" id="7836434">-</span><span class="num" id="7836435">1</span><span class="op" id="7836436">}</span><span class="op" id="7836437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836440">{</span><span class="string" id="7836441">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7836477">,</span>&nbsp;<span class="string" id="7836479">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="7836516">,</span>&nbsp;<span class="num" id="7836518">0</span><span class="op" id="7836519">}</span><span class="op" id="7836520">,</span><br>
<span class="lineno"></span><span class="op" id="7836522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7836525">func</span>&nbsp;<span class="ident" id="7836530">TestRatCmp</span><span class="op" id="7836540">(</span><span class="ident" id="7836541">t</span>&nbsp;<span class="op" id="7836543">*</span><span class="ident" id="7836544">testing</span><span class="op" id="7836551">.</span><span class="ident" id="7836552">T</span><span class="op" id="7836553">)</span>&nbsp;<span class="op" id="7836555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836558">for</span>&nbsp;<span class="ident" id="7836562">i</span><span class="op" id="7836563">,</span>&nbsp;<span class="ident" id="7836565">test</span>&nbsp;<span class="op" id="7836570">:=</span>&nbsp;<span class="keyword" id="7836573">range</span>&nbsp;<span class="ident" id="7836579">ratCmpTests</span>&nbsp;<span class="op" id="7836591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836595">x</span><span class="op" id="7836596">,</span>&nbsp;<span class="ident" id="7836598">_</span>&nbsp;<span class="op" id="7836600">:=</span>&nbsp;<span class="builtinfunc" id="7836603">new</span><span class="op" id="7836606">(</span><span class="ident" id="7836607">Rat</span><span class="op" id="7836610">)</span><span class="op" id="7836611">.</span><span class="ident" id="7836612">SetString</span><span class="op" id="7836621">(</span><span class="ident" id="7836622">test</span><span class="op" id="7836626">.</span><span class="ident" id="7836627">rat1</span><span class="op" id="7836631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836635">y</span><span class="op" id="7836636">,</span>&nbsp;<span class="ident" id="7836638">_</span>&nbsp;<span class="op" id="7836640">:=</span>&nbsp;<span class="builtinfunc" id="7836643">new</span><span class="op" id="7836646">(</span><span class="ident" id="7836647">Rat</span><span class="op" id="7836650">)</span><span class="op" id="7836651">.</span><span class="ident" id="7836652">SetString</span><span class="op" id="7836661">(</span><span class="ident" id="7836662">test</span><span class="op" id="7836666">.</span><span class="ident" id="7836667">rat2</span><span class="op" id="7836671">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836676">out</span>&nbsp;<span class="op" id="7836680">:=</span>&nbsp;<span class="ident" id="7836683">x</span><span class="op" id="7836684">.</span><span class="ident" id="7836685">Cmp</span><span class="op" id="7836688">(</span><span class="ident" id="7836689">y</span><span class="op" id="7836690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836694">if</span>&nbsp;<span class="ident" id="7836697">out</span>&nbsp;<span class="op" id="7836701">!=</span>&nbsp;<span class="ident" id="7836704">test</span><span class="op" id="7836708">.</span><span class="ident" id="7836709">out</span>&nbsp;<span class="op" id="7836713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836718">t</span><span class="op" id="7836719">.</span><span class="ident" id="7836720">Errorf</span><span class="op" id="7836726">(</span><span class="string" id="7836727">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7836754">,</span>&nbsp;<span class="ident" id="7836756">i</span><span class="op" id="7836757">,</span>&nbsp;<span class="ident" id="7836759">out</span><span class="op" id="7836762">,</span>&nbsp;<span class="ident" id="7836764">test</span><span class="op" id="7836768">.</span><span class="ident" id="7836769">out</span><span class="op" id="7836772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836779">}</span><br>
<span class="lineno">205</span><span class="op" id="7836781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7836784">func</span>&nbsp;<span class="ident" id="7836789">TestIsInt</span><span class="op" id="7836798">(</span><span class="ident" id="7836799">t</span>&nbsp;<span class="op" id="7836801">*</span><span class="ident" id="7836802">testing</span><span class="op" id="7836809">.</span><span class="ident" id="7836810">T</span><span class="op" id="7836811">)</span>&nbsp;<span class="op" id="7836813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836816">one</span>&nbsp;<span class="op" id="7836820">:=</span>&nbsp;<span class="ident" id="7836823">NewInt</span><span class="op" id="7836829">(</span><span class="num" id="7836830">1</span><span class="op" id="7836831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836834">for</span>&nbsp;<span class="ident" id="7836838">_</span><span class="op" id="7836839">,</span>&nbsp;<span class="ident" id="7836841">a</span>&nbsp;<span class="op" id="7836843">:=</span>&nbsp;<span class="keyword" id="7836846">range</span>&nbsp;<span class="ident" id="7836852">setStringTests</span>&nbsp;<span class="op" id="7836867">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836871">x</span><span class="op" id="7836872">,</span>&nbsp;<span class="ident" id="7836874">ok</span>&nbsp;<span class="op" id="7836877">:=</span>&nbsp;<span class="builtinfunc" id="7836880">new</span><span class="op" id="7836883">(</span><span class="ident" id="7836884">Rat</span><span class="op" id="7836887">)</span><span class="op" id="7836888">.</span><span class="ident" id="7836889">SetString</span><span class="op" id="7836898">(</span><span class="ident" id="7836899">a</span><span class="op" id="7836900">.</span><span class="ident" id="7836901">in</span><span class="op" id="7836903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836907">if</span>&nbsp;<span class="op" id="7836910">!</span><span class="ident" id="7836911">ok</span>&nbsp;<span class="op" id="7836914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836919">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7836930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836934">i</span>&nbsp;<span class="op" id="7836936">:=</span>&nbsp;<span class="ident" id="7836939">x</span><span class="op" id="7836940">.</span><span class="ident" id="7836941">IsInt</span><span class="op" id="7836946">(</span><span class="op" id="7836947">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836951">e</span>&nbsp;<span class="op" id="7836953">:=</span>&nbsp;<span class="ident" id="7836956">x</span><span class="op" id="7836957">.</span><span class="ident" id="7836958">Denom</span><span class="op" id="7836963">(</span><span class="op" id="7836964">)</span><span class="op" id="7836965">.</span><span class="ident" id="7836966">Cmp</span><span class="op" id="7836969">(</span><span class="ident" id="7836970">one</span><span class="op" id="7836973">)</span>&nbsp;<span class="op" id="7836975">==</span>&nbsp;<span class="num" id="7836978">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7836982">if</span>&nbsp;<span class="ident" id="7836985">i</span>&nbsp;<span class="op" id="7836987">!=</span>&nbsp;<span class="ident" id="7836990">e</span>&nbsp;<span class="op" id="7836992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7836997">t</span><span class="op" id="7836998">.</span><span class="ident" id="7836999">Errorf</span><span class="op" id="7837005">(</span><span class="string" id="7837006">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7837036">,</span>&nbsp;<span class="ident" id="7837038">x</span><span class="op" id="7837039">,</span>&nbsp;<span class="ident" id="7837041">i</span><span class="op" id="7837042">,</span>&nbsp;<span class="ident" id="7837044">e</span><span class="op" id="7837045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837052">}</span><br>
<span class="lineno">220</span><span class="op" id="7837054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7837057">func</span>&nbsp;<span class="ident" id="7837062">TestRatAbs</span><span class="op" id="7837072">(</span><span class="ident" id="7837073">t</span>&nbsp;<span class="op" id="7837075">*</span><span class="ident" id="7837076">testing</span><span class="op" id="7837083">.</span><span class="ident" id="7837084">T</span><span class="op" id="7837085">)</span>&nbsp;<span class="op" id="7837087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837090">zero</span>&nbsp;<span class="op" id="7837095">:=</span>&nbsp;<span class="builtinfunc" id="7837098">new</span><span class="op" id="7837101">(</span><span class="ident" id="7837102">Rat</span><span class="op" id="7837105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837108">for</span>&nbsp;<span class="ident" id="7837112">_</span><span class="op" id="7837113">,</span>&nbsp;<span class="ident" id="7837115">a</span>&nbsp;<span class="op" id="7837117">:=</span>&nbsp;<span class="keyword" id="7837120">range</span>&nbsp;<span class="ident" id="7837126">setStringTests</span>&nbsp;<span class="op" id="7837141">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837145">x</span><span class="op" id="7837146">,</span>&nbsp;<span class="ident" id="7837148">ok</span>&nbsp;<span class="op" id="7837151">:=</span>&nbsp;<span class="builtinfunc" id="7837154">new</span><span class="op" id="7837157">(</span><span class="ident" id="7837158">Rat</span><span class="op" id="7837161">)</span><span class="op" id="7837162">.</span><span class="ident" id="7837163">SetString</span><span class="op" id="7837172">(</span><span class="ident" id="7837173">a</span><span class="op" id="7837174">.</span><span class="ident" id="7837175">in</span><span class="op" id="7837177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837181">if</span>&nbsp;<span class="op" id="7837184">!</span><span class="ident" id="7837185">ok</span>&nbsp;<span class="op" id="7837188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837193">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837208">e</span>&nbsp;<span class="op" id="7837210">:=</span>&nbsp;<span class="builtinfunc" id="7837213">new</span><span class="op" id="7837216">(</span><span class="ident" id="7837217">Rat</span><span class="op" id="7837220">)</span><span class="op" id="7837221">.</span><span class="ident" id="7837222">Set</span><span class="op" id="7837225">(</span><span class="ident" id="7837226">x</span><span class="op" id="7837227">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837231">if</span>&nbsp;<span class="ident" id="7837234">e</span><span class="op" id="7837235">.</span><span class="ident" id="7837236">Cmp</span><span class="op" id="7837239">(</span><span class="ident" id="7837240">zero</span><span class="op" id="7837244">)</span>&nbsp;<span class="op" id="7837246">&lt;</span>&nbsp;<span class="num" id="7837248">0</span>&nbsp;<span class="op" id="7837250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837255">e</span><span class="op" id="7837256">.</span><span class="ident" id="7837257">Sub</span><span class="op" id="7837260">(</span><span class="ident" id="7837261">zero</span><span class="op" id="7837265">,</span>&nbsp;<span class="ident" id="7837267">e</span><span class="op" id="7837268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837276">z</span>&nbsp;<span class="op" id="7837278">:=</span>&nbsp;<span class="builtinfunc" id="7837281">new</span><span class="op" id="7837284">(</span><span class="ident" id="7837285">Rat</span><span class="op" id="7837288">)</span><span class="op" id="7837289">.</span><span class="ident" id="7837290">Abs</span><span class="op" id="7837293">(</span><span class="ident" id="7837294">x</span><span class="op" id="7837295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837299">if</span>&nbsp;<span class="ident" id="7837302">z</span><span class="op" id="7837303">.</span><span class="ident" id="7837304">Cmp</span><span class="op" id="7837307">(</span><span class="ident" id="7837308">e</span><span class="op" id="7837309">)</span>&nbsp;<span class="op" id="7837311">!=</span>&nbsp;<span class="num" id="7837314">0</span>&nbsp;<span class="op" id="7837316">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837321">t</span><span class="op" id="7837322">.</span><span class="ident" id="7837323">Errorf</span><span class="op" id="7837329">(</span><span class="string" id="7837330">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7837357">,</span>&nbsp;<span class="ident" id="7837359">x</span><span class="op" id="7837360">,</span>&nbsp;<span class="ident" id="7837362">z</span><span class="op" id="7837363">,</span>&nbsp;<span class="ident" id="7837365">e</span><span class="op" id="7837366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837373">}</span><br>
<span class="lineno"></span><span class="op" id="7837375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7837378">func</span>&nbsp;<span class="ident" id="7837383">TestRatNeg</span><span class="op" id="7837393">(</span><span class="ident" id="7837394">t</span>&nbsp;<span class="op" id="7837396">*</span><span class="ident" id="7837397">testing</span><span class="op" id="7837404">.</span><span class="ident" id="7837405">T</span><span class="op" id="7837406">)</span>&nbsp;<span class="op" id="7837408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837411">zero</span>&nbsp;<span class="op" id="7837416">:=</span>&nbsp;<span class="builtinfunc" id="7837419">new</span><span class="op" id="7837422">(</span><span class="ident" id="7837423">Rat</span><span class="op" id="7837426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837429">for</span>&nbsp;<span class="ident" id="7837433">_</span><span class="op" id="7837434">,</span>&nbsp;<span class="ident" id="7837436">a</span>&nbsp;<span class="op" id="7837438">:=</span>&nbsp;<span class="keyword" id="7837441">range</span>&nbsp;<span class="ident" id="7837447">setStringTests</span>&nbsp;<span class="op" id="7837462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837466">x</span><span class="op" id="7837467">,</span>&nbsp;<span class="ident" id="7837469">ok</span>&nbsp;<span class="op" id="7837472">:=</span>&nbsp;<span class="builtinfunc" id="7837475">new</span><span class="op" id="7837478">(</span><span class="ident" id="7837479">Rat</span><span class="op" id="7837482">)</span><span class="op" id="7837483">.</span><span class="ident" id="7837484">SetString</span><span class="op" id="7837493">(</span><span class="ident" id="7837494">a</span><span class="op" id="7837495">.</span><span class="ident" id="7837496">in</span><span class="op" id="7837498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837502">if</span>&nbsp;<span class="op" id="7837505">!</span><span class="ident" id="7837506">ok</span>&nbsp;<span class="op" id="7837509">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837514">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837529">e</span>&nbsp;<span class="op" id="7837531">:=</span>&nbsp;<span class="builtinfunc" id="7837534">new</span><span class="op" id="7837537">(</span><span class="ident" id="7837538">Rat</span><span class="op" id="7837541">)</span><span class="op" id="7837542">.</span><span class="ident" id="7837543">Sub</span><span class="op" id="7837546">(</span><span class="ident" id="7837547">zero</span><span class="op" id="7837551">,</span>&nbsp;<span class="ident" id="7837553">x</span><span class="op" id="7837554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837558">z</span>&nbsp;<span class="op" id="7837560">:=</span>&nbsp;<span class="builtinfunc" id="7837563">new</span><span class="op" id="7837566">(</span><span class="ident" id="7837567">Rat</span><span class="op" id="7837570">)</span><span class="op" id="7837571">.</span><span class="ident" id="7837572">Neg</span><span class="op" id="7837575">(</span><span class="ident" id="7837576">x</span><span class="op" id="7837577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837581">if</span>&nbsp;<span class="ident" id="7837584">z</span><span class="op" id="7837585">.</span><span class="ident" id="7837586">Cmp</span><span class="op" id="7837589">(</span><span class="ident" id="7837590">e</span><span class="op" id="7837591">)</span>&nbsp;<span class="op" id="7837593">!=</span>&nbsp;<span class="num" id="7837596">0</span>&nbsp;<span class="op" id="7837598">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837603">t</span><span class="op" id="7837604">.</span><span class="ident" id="7837605">Errorf</span><span class="op" id="7837611">(</span><span class="string" id="7837612">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7837639">,</span>&nbsp;<span class="ident" id="7837641">x</span><span class="op" id="7837642">,</span>&nbsp;<span class="ident" id="7837644">z</span><span class="op" id="7837645">,</span>&nbsp;<span class="ident" id="7837647">e</span><span class="op" id="7837648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837655">}</span><br>
<span class="lineno"></span><span class="op" id="7837657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7837660">func</span>&nbsp;<span class="ident" id="7837665">TestRatInv</span><span class="op" id="7837675">(</span><span class="ident" id="7837676">t</span>&nbsp;<span class="op" id="7837678">*</span><span class="ident" id="7837679">testing</span><span class="op" id="7837686">.</span><span class="ident" id="7837687">T</span><span class="op" id="7837688">)</span>&nbsp;<span class="op" id="7837690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837693">zero</span>&nbsp;<span class="op" id="7837698">:=</span>&nbsp;<span class="builtinfunc" id="7837701">new</span><span class="op" id="7837704">(</span><span class="ident" id="7837705">Rat</span><span class="op" id="7837708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837711">for</span>&nbsp;<span class="ident" id="7837715">_</span><span class="op" id="7837716">,</span>&nbsp;<span class="ident" id="7837718">a</span>&nbsp;<span class="op" id="7837720">:=</span>&nbsp;<span class="keyword" id="7837723">range</span>&nbsp;<span class="ident" id="7837729">setStringTests</span>&nbsp;<span class="op" id="7837744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837748">x</span><span class="op" id="7837749">,</span>&nbsp;<span class="ident" id="7837751">ok</span>&nbsp;<span class="op" id="7837754">:=</span>&nbsp;<span class="builtinfunc" id="7837757">new</span><span class="op" id="7837760">(</span><span class="ident" id="7837761">Rat</span><span class="op" id="7837764">)</span><span class="op" id="7837765">.</span><span class="ident" id="7837766">SetString</span><span class="op" id="7837775">(</span><span class="ident" id="7837776">a</span><span class="op" id="7837777">.</span><span class="ident" id="7837778">in</span><span class="op" id="7837780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837784">if</span>&nbsp;<span class="op" id="7837787">!</span><span class="ident" id="7837788">ok</span>&nbsp;<span class="op" id="7837791">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837796">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837811">if</span>&nbsp;<span class="ident" id="7837814">x</span><span class="op" id="7837815">.</span><span class="ident" id="7837816">Cmp</span><span class="op" id="7837819">(</span><span class="ident" id="7837820">zero</span><span class="op" id="7837824">)</span>&nbsp;<span class="op" id="7837826">==</span>&nbsp;<span class="num" id="7837829">0</span>&nbsp;<span class="op" id="7837831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837836">continue</span>&nbsp;<span class="comment" id="7837845">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7837873">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837877">e</span>&nbsp;<span class="op" id="7837879">:=</span>&nbsp;<span class="builtinfunc" id="7837882">new</span><span class="op" id="7837885">(</span><span class="ident" id="7837886">Rat</span><span class="op" id="7837889">)</span><span class="op" id="7837890">.</span><span class="ident" id="7837891">SetFrac</span><span class="op" id="7837898">(</span><span class="ident" id="7837899">x</span><span class="op" id="7837900">.</span><span class="ident" id="7837901">Denom</span><span class="op" id="7837906">(</span><span class="op" id="7837907">)</span><span class="op" id="7837908">,</span>&nbsp;<span class="ident" id="7837910">x</span><span class="op" id="7837911">.</span><span class="ident" id="7837912">Num</span><span class="op" id="7837915">(</span><span class="op" id="7837916">)</span><span class="op" id="7837917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837921">z</span>&nbsp;<span class="op" id="7837923">:=</span>&nbsp;<span class="builtinfunc" id="7837926">new</span><span class="op" id="7837929">(</span><span class="ident" id="7837930">Rat</span><span class="op" id="7837933">)</span><span class="op" id="7837934">.</span><span class="ident" id="7837935">Inv</span><span class="op" id="7837938">(</span><span class="ident" id="7837939">x</span><span class="op" id="7837940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7837944">if</span>&nbsp;<span class="ident" id="7837947">z</span><span class="op" id="7837948">.</span><span class="ident" id="7837949">Cmp</span><span class="op" id="7837952">(</span><span class="ident" id="7837953">e</span><span class="op" id="7837954">)</span>&nbsp;<span class="op" id="7837956">!=</span>&nbsp;<span class="num" id="7837959">0</span>&nbsp;<span class="op" id="7837961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7837966">t</span><span class="op" id="7837967">.</span><span class="ident" id="7837968">Errorf</span><span class="op" id="7837974">(</span><span class="string" id="7837975">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7838002">,</span>&nbsp;<span class="ident" id="7838004">x</span><span class="op" id="7838005">,</span>&nbsp;<span class="ident" id="7838007">z</span><span class="op" id="7838008">,</span>&nbsp;<span class="ident" id="7838010">e</span><span class="op" id="7838011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838015">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838018">}</span><br>
<span class="lineno"></span><span class="op" id="7838020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7838023">type</span>&nbsp;<span class="ident" id="7838028">ratBinFun</span>&nbsp;<span class="keyword" id="7838038">func</span><span class="op" id="7838042">(</span><span class="ident" id="7838043">z</span><span class="op" id="7838044">,</span>&nbsp;<span class="ident" id="7838046">x</span><span class="op" id="7838047">,</span>&nbsp;<span class="ident" id="7838049">y</span>&nbsp;<span class="op" id="7838051">*</span><span class="ident" id="7838052">Rat</span><span class="op" id="7838055">)</span>&nbsp;<span class="op" id="7838057">*</span><span class="ident" id="7838058">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="7838062">type</span>&nbsp;<span class="ident" id="7838067">ratBinArg</span>&nbsp;<span class="keyword" id="7838077">struct</span>&nbsp;<span class="op" id="7838084">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838087">x</span><span class="op" id="7838088">,</span>&nbsp;<span class="ident" id="7838090">y</span><span class="op" id="7838091">,</span>&nbsp;<span class="ident" id="7838093">z</span>&nbsp;<span class="builtintype" id="7838095">string</span><br>
<span class="lineno"></span><span class="op" id="7838102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7838105">func</span>&nbsp;<span class="ident" id="7838110">testRatBin</span><span class="op" id="7838120">(</span><span class="ident" id="7838121">t</span>&nbsp;<span class="op" id="7838123">*</span><span class="ident" id="7838124">testing</span><span class="op" id="7838131">.</span><span class="ident" id="7838132">T</span><span class="op" id="7838133">,</span>&nbsp;<span class="ident" id="7838135">i</span>&nbsp;<span class="builtintype" id="7838137">int</span><span class="op" id="7838140">,</span>&nbsp;<span class="ident" id="7838142">name</span>&nbsp;<span class="builtintype" id="7838147">string</span><span class="op" id="7838153">,</span>&nbsp;<span class="ident" id="7838155">f</span>&nbsp;<span class="ident" id="7838157">ratBinFun</span><span class="op" id="7838166">,</span>&nbsp;<span class="ident" id="7838168">a</span>&nbsp;<span class="ident" id="7838170">ratBinArg</span><span class="op" id="7838179">)</span>&nbsp;<span class="op" id="7838181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838184">x</span><span class="op" id="7838185">,</span>&nbsp;<span class="ident" id="7838187">_</span>&nbsp;<span class="op" id="7838189">:=</span>&nbsp;<span class="builtinfunc" id="7838192">new</span><span class="op" id="7838195">(</span><span class="ident" id="7838196">Rat</span><span class="op" id="7838199">)</span><span class="op" id="7838200">.</span><span class="ident" id="7838201">SetString</span><span class="op" id="7838210">(</span><span class="ident" id="7838211">a</span><span class="op" id="7838212">.</span><span class="ident" id="7838213">x</span><span class="op" id="7838214">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838217">y</span><span class="op" id="7838218">,</span>&nbsp;<span class="ident" id="7838220">_</span>&nbsp;<span class="op" id="7838222">:=</span>&nbsp;<span class="builtinfunc" id="7838225">new</span><span class="op" id="7838228">(</span><span class="ident" id="7838229">Rat</span><span class="op" id="7838232">)</span><span class="op" id="7838233">.</span><span class="ident" id="7838234">SetString</span><span class="op" id="7838243">(</span><span class="ident" id="7838244">a</span><span class="op" id="7838245">.</span><span class="ident" id="7838246">y</span><span class="op" id="7838247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838250">z</span><span class="op" id="7838251">,</span>&nbsp;<span class="ident" id="7838253">_</span>&nbsp;<span class="op" id="7838255">:=</span>&nbsp;<span class="builtinfunc" id="7838258">new</span><span class="op" id="7838261">(</span><span class="ident" id="7838262">Rat</span><span class="op" id="7838265">)</span><span class="op" id="7838266">.</span><span class="ident" id="7838267">SetString</span><span class="op" id="7838276">(</span><span class="ident" id="7838277">a</span><span class="op" id="7838278">.</span><span class="ident" id="7838279">z</span><span class="op" id="7838280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838283">out</span>&nbsp;<span class="op" id="7838287">:=</span>&nbsp;<span class="ident" id="7838290">f</span><span class="op" id="7838291">(</span><span class="builtinfunc" id="7838292">new</span><span class="op" id="7838295">(</span><span class="ident" id="7838296">Rat</span><span class="op" id="7838299">)</span><span class="op" id="7838300">,</span>&nbsp;<span class="ident" id="7838302">x</span><span class="op" id="7838303">,</span>&nbsp;<span class="ident" id="7838305">y</span><span class="op" id="7838306">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7838310">if</span>&nbsp;<span class="ident" id="7838313">out</span><span class="op" id="7838316">.</span><span class="ident" id="7838317">Cmp</span><span class="op" id="7838320">(</span><span class="ident" id="7838321">z</span><span class="op" id="7838322">)</span>&nbsp;<span class="op" id="7838324">!=</span>&nbsp;<span class="num" id="7838327">0</span>&nbsp;<span class="op" id="7838329">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838333">t</span><span class="op" id="7838334">.</span><span class="ident" id="7838335">Errorf</span><span class="op" id="7838341">(</span><span class="string" id="7838342">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7838365">,</span>&nbsp;<span class="ident" id="7838367">name</span><span class="op" id="7838371">,</span>&nbsp;<span class="ident" id="7838373">i</span><span class="op" id="7838374">,</span>&nbsp;<span class="ident" id="7838376">out</span><span class="op" id="7838379">,</span>&nbsp;<span class="ident" id="7838381">z</span><span class="op" id="7838382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838385">}</span><br>
<span class="lineno"></span><span class="op" id="7838387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7838390">var</span>&nbsp;<span class="ident" id="7838394">ratBinTests</span>&nbsp;<span class="op" id="7838406">=</span>&nbsp;<span class="op" id="7838408">[</span><span class="op" id="7838409">]</span><span class="keyword" id="7838410">struct</span>&nbsp;<span class="op" id="7838417">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838420">x</span><span class="op" id="7838421">,</span>&nbsp;<span class="ident" id="7838423">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7838430">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838438">sum</span><span class="op" id="7838441">,</span>&nbsp;<span class="ident" id="7838443">prod</span>&nbsp;<span class="builtintype" id="7838448">string</span><br>
<span class="lineno"></span><span class="op" id="7838455">}</span><span class="op" id="7838456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838459">{</span><span class="string" id="7838460">&#34;0&#34;</span><span class="op" id="7838463">,</span>&nbsp;<span class="string" id="7838465">&#34;0&#34;</span><span class="op" id="7838468">,</span>&nbsp;<span class="string" id="7838470">&#34;0&#34;</span><span class="op" id="7838473">,</span>&nbsp;<span class="string" id="7838475">&#34;0&#34;</span><span class="op" id="7838478">}</span><span class="op" id="7838479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838482">{</span><span class="string" id="7838483">&#34;0&#34;</span><span class="op" id="7838486">,</span>&nbsp;<span class="string" id="7838488">&#34;1&#34;</span><span class="op" id="7838491">,</span>&nbsp;<span class="string" id="7838493">&#34;1&#34;</span><span class="op" id="7838496">,</span>&nbsp;<span class="string" id="7838498">&#34;0&#34;</span><span class="op" id="7838501">}</span><span class="op" id="7838502">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838505">{</span><span class="string" id="7838506">&#34;-1&#34;</span><span class="op" id="7838510">,</span>&nbsp;<span class="string" id="7838512">&#34;0&#34;</span><span class="op" id="7838515">,</span>&nbsp;<span class="string" id="7838517">&#34;-1&#34;</span><span class="op" id="7838521">,</span>&nbsp;<span class="string" id="7838523">&#34;0&#34;</span><span class="op" id="7838526">}</span><span class="op" id="7838527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838530">{</span><span class="string" id="7838531">&#34;-1&#34;</span><span class="op" id="7838535">,</span>&nbsp;<span class="string" id="7838537">&#34;1&#34;</span><span class="op" id="7838540">,</span>&nbsp;<span class="string" id="7838542">&#34;0&#34;</span><span class="op" id="7838545">,</span>&nbsp;<span class="string" id="7838547">&#34;-1&#34;</span><span class="op" id="7838551">}</span><span class="op" id="7838552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838555">{</span><span class="string" id="7838556">&#34;1&#34;</span><span class="op" id="7838559">,</span>&nbsp;<span class="string" id="7838561">&#34;1&#34;</span><span class="op" id="7838564">,</span>&nbsp;<span class="string" id="7838566">&#34;2&#34;</span><span class="op" id="7838569">,</span>&nbsp;<span class="string" id="7838571">&#34;1&#34;</span><span class="op" id="7838574">}</span><span class="op" id="7838575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838578">{</span><span class="string" id="7838579">&#34;1/2&#34;</span><span class="op" id="7838584">,</span>&nbsp;<span class="string" id="7838586">&#34;1/2&#34;</span><span class="op" id="7838591">,</span>&nbsp;<span class="string" id="7838593">&#34;1&#34;</span><span class="op" id="7838596">,</span>&nbsp;<span class="string" id="7838598">&#34;1/4&#34;</span><span class="op" id="7838603">}</span><span class="op" id="7838604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838607">{</span><span class="string" id="7838608">&#34;1/4&#34;</span><span class="op" id="7838613">,</span>&nbsp;<span class="string" id="7838615">&#34;1/3&#34;</span><span class="op" id="7838620">,</span>&nbsp;<span class="string" id="7838622">&#34;7/12&#34;</span><span class="op" id="7838628">,</span>&nbsp;<span class="string" id="7838630">&#34;1/12&#34;</span><span class="op" id="7838636">}</span><span class="op" id="7838637">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838640">{</span><span class="string" id="7838641">&#34;2/5&#34;</span><span class="op" id="7838646">,</span>&nbsp;<span class="string" id="7838648">&#34;-14/3&#34;</span><span class="op" id="7838655">,</span>&nbsp;<span class="string" id="7838657">&#34;-64/15&#34;</span><span class="op" id="7838665">,</span>&nbsp;<span class="string" id="7838667">&#34;-28/15&#34;</span><span class="op" id="7838675">}</span><span class="op" id="7838676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838679">{</span><span class="string" id="7838680">&#34;4707/49292519774798173060&#34;</span><span class="op" id="7838707">,</span>&nbsp;<span class="string" id="7838709">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="7838737">,</span>&nbsp;<span class="string" id="7838739">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="7838805">,</span>&nbsp;<span class="string" id="7838807">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="7838857">}</span><span class="op" id="7838858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838861">{</span><span class="string" id="7838862">&#34;-61204110018146728334/3&#34;</span><span class="op" id="7838887">,</span>&nbsp;<span class="string" id="7838889">&#34;-31052192278051565633/2&#34;</span><span class="op" id="7838914">,</span>&nbsp;<span class="string" id="7838916">&#34;-215564796870448153567/6&#34;</span><span class="op" id="7838942">,</span>&nbsp;<span class="string" id="7838944">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="7838987">}</span><span class="op" id="7838988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838991">{</span><span class="string" id="7838992">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="7839054">,</span>&nbsp;<span class="string" id="7839056">&#34;-18/31750379913563777419&#34;</span><span class="op" id="7839082">,</span>&nbsp;<span class="string" id="7839084">&#34;-27/133467566250814981&#34;</span><span class="op" id="7839108">,</span>&nbsp;<span class="string" id="7839110">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="7839193">}</span><span class="op" id="7839194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839197">{</span><span class="string" id="7839198">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="7839257">,</span>&nbsp;<span class="string" id="7839259">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="7839292">,</span>&nbsp;<span class="string" id="7839294">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="7839328">,</span>&nbsp;<span class="string" id="7839330">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="7839417">}</span><span class="op" id="7839418">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839421">{</span><span class="string" id="7839422">&#34;-3/26206484091896184128&#34;</span><span class="op" id="7839447">,</span>&nbsp;<span class="string" id="7839449">&#34;5/2848423294177090248&#34;</span><span class="op" id="7839472">,</span>&nbsp;<span class="string" id="7839474">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="7839534">,</span>&nbsp;<span class="string" id="7839536">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="7839579">}</span><span class="op" id="7839580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839583">{</span><span class="string" id="7839584">&#34;26946729/330400702820&#34;</span><span class="op" id="7839607">,</span>&nbsp;<span class="string" id="7839609">&#34;41563965/225583428284&#34;</span><span class="op" id="7839632">,</span>&nbsp;<span class="string" id="7839634">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="7839678">,</span>&nbsp;<span class="string" id="7839680">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="7839721">}</span><span class="op" id="7839722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839725">{</span><span class="string" id="7839726">&#34;-8259900599013409474/7&#34;</span><span class="op" id="7839750">,</span>&nbsp;<span class="string" id="7839752">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="7839796">,</span>&nbsp;<span class="string" id="7839798">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="7839862">,</span>&nbsp;<span class="string" id="7839864">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="7839927">}</span><span class="op" id="7839928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839931">{</span><span class="string" id="7839932">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="7839972">,</span>&nbsp;<span class="string" id="7839974">&#34;29/712593081308&#34;</span><span class="op" id="7839991">,</span>&nbsp;<span class="string" id="7839993">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="7840056">,</span>&nbsp;<span class="string" id="7840058">&#34;808/45524274987585732633&#34;</span><span class="op" id="7840084">}</span><span class="op" id="7840085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840088">{</span><span class="string" id="7840089">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="7840130">,</span>&nbsp;<span class="string" id="7840132">&#34;6269770/1992362624741777&#34;</span><span class="op" id="7840158">,</span>&nbsp;<span class="string" id="7840160">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="7840231">,</span>&nbsp;<span class="string" id="7840233">&#34;8967230/3296219033&#34;</span><span class="op" id="7840253">}</span><span class="op" id="7840254">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840257">{</span><span class="string" id="7840258">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="7840305">,</span>&nbsp;<span class="string" id="7840307">&#34;9381566963714/9633539&#34;</span><span class="op" id="7840330">,</span>&nbsp;<span class="string" id="7840332">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="7840401">,</span>&nbsp;<span class="string" id="7840403">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="7840430">}</span><span class="op" id="7840431">,</span><br>
<span class="lineno"></span><span class="op" id="7840433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7840436">func</span>&nbsp;<span class="ident" id="7840441">TestRatBin</span><span class="op" id="7840451">(</span><span class="ident" id="7840452">t</span>&nbsp;<span class="op" id="7840454">*</span><span class="ident" id="7840455">testing</span><span class="op" id="7840462">.</span><span class="ident" id="7840463">T</span><span class="op" id="7840464">)</span>&nbsp;<span class="op" id="7840466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840469">for</span>&nbsp;<span class="ident" id="7840473">i</span><span class="op" id="7840474">,</span>&nbsp;<span class="ident" id="7840476">test</span>&nbsp;<span class="op" id="7840481">:=</span>&nbsp;<span class="keyword" id="7840484">range</span>&nbsp;<span class="ident" id="7840490">ratBinTests</span>&nbsp;<span class="op" id="7840502">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840506">arg</span>&nbsp;<span class="op" id="7840510">:=</span>&nbsp;<span class="ident" id="7840513">ratBinArg</span><span class="op" id="7840522">{</span><span class="ident" id="7840523">test</span><span class="op" id="7840527">.</span><span class="ident" id="7840528">x</span><span class="op" id="7840529">,</span>&nbsp;<span class="ident" id="7840531">test</span><span class="op" id="7840535">.</span><span class="ident" id="7840536">y</span><span class="op" id="7840537">,</span>&nbsp;<span class="ident" id="7840539">test</span><span class="op" id="7840543">.</span><span class="ident" id="7840544">sum</span><span class="op" id="7840547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840551">testRatBin</span><span class="op" id="7840561">(</span><span class="ident" id="7840562">t</span><span class="op" id="7840563">,</span>&nbsp;<span class="ident" id="7840565">i</span><span class="op" id="7840566">,</span>&nbsp;<span class="string" id="7840568">&#34;Add&#34;</span><span class="op" id="7840573">,</span>&nbsp;<span class="op" id="7840575">(</span><span class="op" id="7840576">*</span><span class="ident" id="7840577">Rat</span><span class="op" id="7840580">)</span><span class="op" id="7840581">.</span><span class="ident" id="7840582">Add</span><span class="op" id="7840585">,</span>&nbsp;<span class="ident" id="7840587">arg</span><span class="op" id="7840590">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840595">arg</span>&nbsp;<span class="op" id="7840599">=</span>&nbsp;<span class="ident" id="7840601">ratBinArg</span><span class="op" id="7840610">{</span><span class="ident" id="7840611">test</span><span class="op" id="7840615">.</span><span class="ident" id="7840616">y</span><span class="op" id="7840617">,</span>&nbsp;<span class="ident" id="7840619">test</span><span class="op" id="7840623">.</span><span class="ident" id="7840624">x</span><span class="op" id="7840625">,</span>&nbsp;<span class="ident" id="7840627">test</span><span class="op" id="7840631">.</span><span class="ident" id="7840632">sum</span><span class="op" id="7840635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840639">testRatBin</span><span class="op" id="7840649">(</span><span class="ident" id="7840650">t</span><span class="op" id="7840651">,</span>&nbsp;<span class="ident" id="7840653">i</span><span class="op" id="7840654">,</span>&nbsp;<span class="string" id="7840656">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="7840671">,</span>&nbsp;<span class="op" id="7840673">(</span><span class="op" id="7840674">*</span><span class="ident" id="7840675">Rat</span><span class="op" id="7840678">)</span><span class="op" id="7840679">.</span><span class="ident" id="7840680">Add</span><span class="op" id="7840683">,</span>&nbsp;<span class="ident" id="7840685">arg</span><span class="op" id="7840688">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840693">arg</span>&nbsp;<span class="op" id="7840697">=</span>&nbsp;<span class="ident" id="7840699">ratBinArg</span><span class="op" id="7840708">{</span><span class="ident" id="7840709">test</span><span class="op" id="7840713">.</span><span class="ident" id="7840714">sum</span><span class="op" id="7840717">,</span>&nbsp;<span class="ident" id="7840719">test</span><span class="op" id="7840723">.</span><span class="ident" id="7840724">x</span><span class="op" id="7840725">,</span>&nbsp;<span class="ident" id="7840727">test</span><span class="op" id="7840731">.</span><span class="ident" id="7840732">y</span><span class="op" id="7840733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840737">testRatBin</span><span class="op" id="7840747">(</span><span class="ident" id="7840748">t</span><span class="op" id="7840749">,</span>&nbsp;<span class="ident" id="7840751">i</span><span class="op" id="7840752">,</span>&nbsp;<span class="string" id="7840754">&#34;Sub&#34;</span><span class="op" id="7840759">,</span>&nbsp;<span class="op" id="7840761">(</span><span class="op" id="7840762">*</span><span class="ident" id="7840763">Rat</span><span class="op" id="7840766">)</span><span class="op" id="7840767">.</span><span class="ident" id="7840768">Sub</span><span class="op" id="7840771">,</span>&nbsp;<span class="ident" id="7840773">arg</span><span class="op" id="7840776">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840781">arg</span>&nbsp;<span class="op" id="7840785">=</span>&nbsp;<span class="ident" id="7840787">ratBinArg</span><span class="op" id="7840796">{</span><span class="ident" id="7840797">test</span><span class="op" id="7840801">.</span><span class="ident" id="7840802">sum</span><span class="op" id="7840805">,</span>&nbsp;<span class="ident" id="7840807">test</span><span class="op" id="7840811">.</span><span class="ident" id="7840812">y</span><span class="op" id="7840813">,</span>&nbsp;<span class="ident" id="7840815">test</span><span class="op" id="7840819">.</span><span class="ident" id="7840820">x</span><span class="op" id="7840821">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840825">testRatBin</span><span class="op" id="7840835">(</span><span class="ident" id="7840836">t</span><span class="op" id="7840837">,</span>&nbsp;<span class="ident" id="7840839">i</span><span class="op" id="7840840">,</span>&nbsp;<span class="string" id="7840842">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="7840857">,</span>&nbsp;<span class="op" id="7840859">(</span><span class="op" id="7840860">*</span><span class="ident" id="7840861">Rat</span><span class="op" id="7840864">)</span><span class="op" id="7840865">.</span><span class="ident" id="7840866">Sub</span><span class="op" id="7840869">,</span>&nbsp;<span class="ident" id="7840871">arg</span><span class="op" id="7840874">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840879">arg</span>&nbsp;<span class="op" id="7840883">=</span>&nbsp;<span class="ident" id="7840885">ratBinArg</span><span class="op" id="7840894">{</span><span class="ident" id="7840895">test</span><span class="op" id="7840899">.</span><span class="ident" id="7840900">x</span><span class="op" id="7840901">,</span>&nbsp;<span class="ident" id="7840903">test</span><span class="op" id="7840907">.</span><span class="ident" id="7840908">y</span><span class="op" id="7840909">,</span>&nbsp;<span class="ident" id="7840911">test</span><span class="op" id="7840915">.</span><span class="ident" id="7840916">prod</span><span class="op" id="7840920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840924">testRatBin</span><span class="op" id="7840934">(</span><span class="ident" id="7840935">t</span><span class="op" id="7840936">,</span>&nbsp;<span class="ident" id="7840938">i</span><span class="op" id="7840939">,</span>&nbsp;<span class="string" id="7840941">&#34;Mul&#34;</span><span class="op" id="7840946">,</span>&nbsp;<span class="op" id="7840948">(</span><span class="op" id="7840949">*</span><span class="ident" id="7840950">Rat</span><span class="op" id="7840953">)</span><span class="op" id="7840954">.</span><span class="ident" id="7840955">Mul</span><span class="op" id="7840958">,</span>&nbsp;<span class="ident" id="7840960">arg</span><span class="op" id="7840963">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840968">arg</span>&nbsp;<span class="op" id="7840972">=</span>&nbsp;<span class="ident" id="7840974">ratBinArg</span><span class="op" id="7840983">{</span><span class="ident" id="7840984">test</span><span class="op" id="7840988">.</span><span class="ident" id="7840989">y</span><span class="op" id="7840990">,</span>&nbsp;<span class="ident" id="7840992">test</span><span class="op" id="7840996">.</span><span class="ident" id="7840997">x</span><span class="op" id="7840998">,</span>&nbsp;<span class="ident" id="7841000">test</span><span class="op" id="7841004">.</span><span class="ident" id="7841005">prod</span><span class="op" id="7841009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841013">testRatBin</span><span class="op" id="7841023">(</span><span class="ident" id="7841024">t</span><span class="op" id="7841025">,</span>&nbsp;<span class="ident" id="7841027">i</span><span class="op" id="7841028">,</span>&nbsp;<span class="string" id="7841030">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="7841045">,</span>&nbsp;<span class="op" id="7841047">(</span><span class="op" id="7841048">*</span><span class="ident" id="7841049">Rat</span><span class="op" id="7841052">)</span><span class="op" id="7841053">.</span><span class="ident" id="7841054">Mul</span><span class="op" id="7841057">,</span>&nbsp;<span class="ident" id="7841059">arg</span><span class="op" id="7841062">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841067">if</span>&nbsp;<span class="ident" id="7841070">test</span><span class="op" id="7841074">.</span><span class="ident" id="7841075">x</span>&nbsp;<span class="op" id="7841077">!=</span>&nbsp;<span class="string" id="7841080">&#34;0&#34;</span>&nbsp;<span class="op" id="7841084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841089">arg</span>&nbsp;<span class="op" id="7841093">=</span>&nbsp;<span class="ident" id="7841095">ratBinArg</span><span class="op" id="7841104">{</span><span class="ident" id="7841105">test</span><span class="op" id="7841109">.</span><span class="ident" id="7841110">prod</span><span class="op" id="7841114">,</span>&nbsp;<span class="ident" id="7841116">test</span><span class="op" id="7841120">.</span><span class="ident" id="7841121">x</span><span class="op" id="7841122">,</span>&nbsp;<span class="ident" id="7841124">test</span><span class="op" id="7841128">.</span><span class="ident" id="7841129">y</span><span class="op" id="7841130">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841135">testRatBin</span><span class="op" id="7841145">(</span><span class="ident" id="7841146">t</span><span class="op" id="7841147">,</span>&nbsp;<span class="ident" id="7841149">i</span><span class="op" id="7841150">,</span>&nbsp;<span class="string" id="7841152">&#34;Quo&#34;</span><span class="op" id="7841157">,</span>&nbsp;<span class="op" id="7841159">(</span><span class="op" id="7841160">*</span><span class="ident" id="7841161">Rat</span><span class="op" id="7841164">)</span><span class="op" id="7841165">.</span><span class="ident" id="7841166">Quo</span><span class="op" id="7841169">,</span>&nbsp;<span class="ident" id="7841171">arg</span><span class="op" id="7841174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841183">if</span>&nbsp;<span class="ident" id="7841186">test</span><span class="op" id="7841190">.</span><span class="ident" id="7841191">y</span>&nbsp;<span class="op" id="7841193">!=</span>&nbsp;<span class="string" id="7841196">&#34;0&#34;</span>&nbsp;<span class="op" id="7841200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841205">arg</span>&nbsp;<span class="op" id="7841209">=</span>&nbsp;<span class="ident" id="7841211">ratBinArg</span><span class="op" id="7841220">{</span><span class="ident" id="7841221">test</span><span class="op" id="7841225">.</span><span class="ident" id="7841226">prod</span><span class="op" id="7841230">,</span>&nbsp;<span class="ident" id="7841232">test</span><span class="op" id="7841236">.</span><span class="ident" id="7841237">y</span><span class="op" id="7841238">,</span>&nbsp;<span class="ident" id="7841240">test</span><span class="op" id="7841244">.</span><span class="ident" id="7841245">x</span><span class="op" id="7841246">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841251">testRatBin</span><span class="op" id="7841261">(</span><span class="ident" id="7841262">t</span><span class="op" id="7841263">,</span>&nbsp;<span class="ident" id="7841265">i</span><span class="op" id="7841266">,</span>&nbsp;<span class="string" id="7841268">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="7841283">,</span>&nbsp;<span class="op" id="7841285">(</span><span class="op" id="7841286">*</span><span class="ident" id="7841287">Rat</span><span class="op" id="7841290">)</span><span class="op" id="7841291">.</span><span class="ident" id="7841292">Quo</span><span class="op" id="7841295">,</span>&nbsp;<span class="ident" id="7841297">arg</span><span class="op" id="7841300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841307">}</span><br>
<span class="lineno"></span><span class="op" id="7841309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7841312">func</span>&nbsp;<span class="ident" id="7841317">TestIssue820</span><span class="op" id="7841329">(</span><span class="ident" id="7841330">t</span>&nbsp;<span class="op" id="7841332">*</span><span class="ident" id="7841333">testing</span><span class="op" id="7841340">.</span><span class="ident" id="7841341">T</span><span class="op" id="7841342">)</span>&nbsp;<span class="op" id="7841344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841347">x</span>&nbsp;<span class="op" id="7841349">:=</span>&nbsp;<span class="ident" id="7841352">NewRat</span><span class="op" id="7841358">(</span><span class="num" id="7841359">3</span><span class="op" id="7841360">,</span>&nbsp;<span class="num" id="7841362">1</span><span class="op" id="7841363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841366">y</span>&nbsp;<span class="op" id="7841368">:=</span>&nbsp;<span class="ident" id="7841371">NewRat</span><span class="op" id="7841377">(</span><span class="num" id="7841378">2</span><span class="op" id="7841379">,</span>&nbsp;<span class="num" id="7841381">1</span><span class="op" id="7841382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841385">z</span>&nbsp;<span class="op" id="7841387">:=</span>&nbsp;<span class="ident" id="7841390">y</span><span class="op" id="7841391">.</span><span class="ident" id="7841392">Quo</span><span class="op" id="7841395">(</span><span class="ident" id="7841396">x</span><span class="op" id="7841397">,</span>&nbsp;<span class="ident" id="7841399">y</span><span class="op" id="7841400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841403">q</span>&nbsp;<span class="op" id="7841405">:=</span>&nbsp;<span class="ident" id="7841408">NewRat</span><span class="op" id="7841414">(</span><span class="num" id="7841415">3</span><span class="op" id="7841416">,</span>&nbsp;<span class="num" id="7841418">2</span><span class="op" id="7841419">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841422">if</span>&nbsp;<span class="ident" id="7841425">z</span><span class="op" id="7841426">.</span><span class="ident" id="7841427">Cmp</span><span class="op" id="7841430">(</span><span class="ident" id="7841431">q</span><span class="op" id="7841432">)</span>&nbsp;<span class="op" id="7841434">!=</span>&nbsp;<span class="num" id="7841437">0</span>&nbsp;<span class="op" id="7841439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841443">t</span><span class="op" id="7841444">.</span><span class="ident" id="7841445">Errorf</span><span class="op" id="7841451">(</span><span class="string" id="7841452">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7841468">,</span>&nbsp;<span class="ident" id="7841470">z</span><span class="op" id="7841471">,</span>&nbsp;<span class="ident" id="7841473">q</span><span class="op" id="7841474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841481">y</span>&nbsp;<span class="op" id="7841483">=</span>&nbsp;<span class="ident" id="7841485">NewRat</span><span class="op" id="7841491">(</span><span class="num" id="7841492">3</span><span class="op" id="7841493">,</span>&nbsp;<span class="num" id="7841495">1</span><span class="op" id="7841496">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841499">x</span>&nbsp;<span class="op" id="7841501">=</span>&nbsp;<span class="ident" id="7841503">NewRat</span><span class="op" id="7841509">(</span><span class="num" id="7841510">2</span><span class="op" id="7841511">,</span>&nbsp;<span class="num" id="7841513">1</span><span class="op" id="7841514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841517">z</span>&nbsp;<span class="op" id="7841519">=</span>&nbsp;<span class="ident" id="7841521">y</span><span class="op" id="7841522">.</span><span class="ident" id="7841523">Quo</span><span class="op" id="7841526">(</span><span class="ident" id="7841527">x</span><span class="op" id="7841528">,</span>&nbsp;<span class="ident" id="7841530">y</span><span class="op" id="7841531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841534">q</span>&nbsp;<span class="op" id="7841536">=</span>&nbsp;<span class="ident" id="7841538">NewRat</span><span class="op" id="7841544">(</span><span class="num" id="7841545">2</span><span class="op" id="7841546">,</span>&nbsp;<span class="num" id="7841548">3</span><span class="op" id="7841549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841552">if</span>&nbsp;<span class="ident" id="7841555">z</span><span class="op" id="7841556">.</span><span class="ident" id="7841557">Cmp</span><span class="op" id="7841560">(</span><span class="ident" id="7841561">q</span><span class="op" id="7841562">)</span>&nbsp;<span class="op" id="7841564">!=</span>&nbsp;<span class="num" id="7841567">0</span>&nbsp;<span class="op" id="7841569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841573">t</span><span class="op" id="7841574">.</span><span class="ident" id="7841575">Errorf</span><span class="op" id="7841581">(</span><span class="string" id="7841582">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7841598">,</span>&nbsp;<span class="ident" id="7841600">z</span><span class="op" id="7841601">,</span>&nbsp;<span class="ident" id="7841603">q</span><span class="op" id="7841604">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841611">x</span>&nbsp;<span class="op" id="7841613">=</span>&nbsp;<span class="ident" id="7841615">NewRat</span><span class="op" id="7841621">(</span><span class="num" id="7841622">3</span><span class="op" id="7841623">,</span>&nbsp;<span class="num" id="7841625">1</span><span class="op" id="7841626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841629">z</span>&nbsp;<span class="op" id="7841631">=</span>&nbsp;<span class="ident" id="7841633">x</span><span class="op" id="7841634">.</span><span class="ident" id="7841635">Quo</span><span class="op" id="7841638">(</span><span class="ident" id="7841639">x</span><span class="op" id="7841640">,</span>&nbsp;<span class="ident" id="7841642">x</span><span class="op" id="7841643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841646">q</span>&nbsp;<span class="op" id="7841648">=</span>&nbsp;<span class="ident" id="7841650">NewRat</span><span class="op" id="7841656">(</span><span class="num" id="7841657">3</span><span class="op" id="7841658">,</span>&nbsp;<span class="num" id="7841660">3</span><span class="op" id="7841661">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841664">if</span>&nbsp;<span class="ident" id="7841667">z</span><span class="op" id="7841668">.</span><span class="ident" id="7841669">Cmp</span><span class="op" id="7841672">(</span><span class="ident" id="7841673">q</span><span class="op" id="7841674">)</span>&nbsp;<span class="op" id="7841676">!=</span>&nbsp;<span class="num" id="7841679">0</span>&nbsp;<span class="op" id="7841681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841685">t</span><span class="op" id="7841686">.</span><span class="ident" id="7841687">Errorf</span><span class="op" id="7841693">(</span><span class="string" id="7841694">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7841710">,</span>&nbsp;<span class="ident" id="7841712">z</span><span class="op" id="7841713">,</span>&nbsp;<span class="ident" id="7841715">q</span><span class="op" id="7841716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841719">}</span><br>
<span class="lineno"></span><span class="op" id="7841721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="7841724">var</span>&nbsp;<span class="ident" id="7841728">setFrac64Tests</span>&nbsp;<span class="op" id="7841743">=</span>&nbsp;<span class="op" id="7841745">[</span><span class="op" id="7841746">]</span><span class="keyword" id="7841747">struct</span>&nbsp;<span class="op" id="7841754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841757">a</span><span class="op" id="7841758">,</span>&nbsp;<span class="ident" id="7841760">b</span>&nbsp;<span class="ident" id="7841762">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841769">out</span>&nbsp;&nbsp;<span class="builtintype" id="7841774">string</span><br>
<span class="lineno"></span><span class="op" id="7841781">}</span><span class="op" id="7841782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841785">{</span><span class="num" id="7841786">0</span><span class="op" id="7841787">,</span>&nbsp;<span class="num" id="7841789">1</span><span class="op" id="7841790">,</span>&nbsp;<span class="string" id="7841792">&#34;0&#34;</span><span class="op" id="7841795">}</span><span class="op" id="7841796">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841799">{</span><span class="num" id="7841800">0</span><span class="op" id="7841801">,</span>&nbsp;<span class="op" id="7841803">-</span><span class="num" id="7841804">1</span><span class="op" id="7841805">,</span>&nbsp;<span class="string" id="7841807">&#34;0&#34;</span><span class="op" id="7841810">}</span><span class="op" id="7841811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841814">{</span><span class="num" id="7841815">1</span><span class="op" id="7841816">,</span>&nbsp;<span class="num" id="7841818">1</span><span class="op" id="7841819">,</span>&nbsp;<span class="string" id="7841821">&#34;1&#34;</span><span class="op" id="7841824">}</span><span class="op" id="7841825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841828">{</span><span class="op" id="7841829">-</span><span class="num" id="7841830">1</span><span class="op" id="7841831">,</span>&nbsp;<span class="num" id="7841833">1</span><span class="op" id="7841834">,</span>&nbsp;<span class="string" id="7841836">&#34;-1&#34;</span><span class="op" id="7841840">}</span><span class="op" id="7841841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841844">{</span><span class="num" id="7841845">1</span><span class="op" id="7841846">,</span>&nbsp;<span class="op" id="7841848">-</span><span class="num" id="7841849">1</span><span class="op" id="7841850">,</span>&nbsp;<span class="string" id="7841852">&#34;-1&#34;</span><span class="op" id="7841856">}</span><span class="op" id="7841857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841860">{</span><span class="op" id="7841861">-</span><span class="num" id="7841862">1</span><span class="op" id="7841863">,</span>&nbsp;<span class="op" id="7841865">-</span><span class="num" id="7841866">1</span><span class="op" id="7841867">,</span>&nbsp;<span class="string" id="7841869">&#34;1&#34;</span><span class="op" id="7841872">}</span><span class="op" id="7841873">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841876">{</span><span class="op" id="7841877">-</span><span class="num" id="7841878">9223372036854775808</span><span class="op" id="7841897">,</span>&nbsp;<span class="op" id="7841899">-</span><span class="num" id="7841900">9223372036854775808</span><span class="op" id="7841919">,</span>&nbsp;<span class="string" id="7841921">&#34;1&#34;</span><span class="op" id="7841924">}</span><span class="op" id="7841925">,</span><br>
<span class="lineno"></span><span class="op" id="7841927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7841930">func</span>&nbsp;<span class="ident" id="7841935">TestRatSetFrac64Rat</span><span class="op" id="7841954">(</span><span class="ident" id="7841955">t</span>&nbsp;<span class="op" id="7841957">*</span><span class="ident" id="7841958">testing</span><span class="op" id="7841965">.</span><span class="ident" id="7841966">T</span><span class="op" id="7841967">)</span>&nbsp;<span class="op" id="7841969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841972">for</span>&nbsp;<span class="ident" id="7841976">i</span><span class="op" id="7841977">,</span>&nbsp;<span class="ident" id="7841979">test</span>&nbsp;<span class="op" id="7841984">:=</span>&nbsp;<span class="keyword" id="7841987">range</span>&nbsp;<span class="ident" id="7841993">setFrac64Tests</span>&nbsp;<span class="op" id="7842008">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842012">x</span>&nbsp;<span class="op" id="7842014">:=</span>&nbsp;<span class="builtinfunc" id="7842017">new</span><span class="op" id="7842020">(</span><span class="ident" id="7842021">Rat</span><span class="op" id="7842024">)</span><span class="op" id="7842025">.</span><span class="ident" id="7842026">SetFrac64</span><span class="op" id="7842035">(</span><span class="ident" id="7842036">test</span><span class="op" id="7842040">.</span><span class="ident" id="7842041">a</span><span class="op" id="7842042">,</span>&nbsp;<span class="ident" id="7842044">test</span><span class="op" id="7842048">.</span><span class="ident" id="7842049">b</span><span class="op" id="7842050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842054">if</span>&nbsp;<span class="ident" id="7842057">x</span><span class="op" id="7842058">.</span><span class="ident" id="7842059">RatString</span><span class="op" id="7842068">(</span><span class="op" id="7842069">)</span>&nbsp;<span class="op" id="7842071">!=</span>&nbsp;<span class="ident" id="7842074">test</span><span class="op" id="7842078">.</span><span class="ident" id="7842079">out</span>&nbsp;<span class="op" id="7842083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842088">t</span><span class="op" id="7842089">.</span><span class="ident" id="7842090">Errorf</span><span class="op" id="7842096">(</span><span class="string" id="7842097">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7842117">,</span>&nbsp;<span class="ident" id="7842119">i</span><span class="op" id="7842120">,</span>&nbsp;<span class="ident" id="7842122">x</span><span class="op" id="7842123">.</span><span class="ident" id="7842124">RatString</span><span class="op" id="7842133">(</span><span class="op" id="7842134">)</span><span class="op" id="7842135">,</span>&nbsp;<span class="ident" id="7842137">test</span><span class="op" id="7842141">.</span><span class="ident" id="7842142">out</span><span class="op" id="7842145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7842149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7842152">}</span><br>
<span class="lineno">390</span><span class="op" id="7842154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7842157">func</span>&nbsp;<span class="ident" id="7842162">TestRatGobEncoding</span><span class="op" id="7842180">(</span><span class="ident" id="7842181">t</span>&nbsp;<span class="op" id="7842183">*</span><span class="ident" id="7842184">testing</span><span class="op" id="7842191">.</span><span class="ident" id="7842192">T</span><span class="op" id="7842193">)</span>&nbsp;<span class="op" id="7842195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842198">var</span>&nbsp;<span class="ident" id="7842202">medium</span>&nbsp;<span class="ident" id="7842209">bytes</span><span class="op" id="7842214">.</span><span class="ident" id="7842215">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842223">enc</span>&nbsp;<span class="op" id="7842227">:=</span>&nbsp;<span class="ident" id="7842230">gob</span><span class="op" id="7842233">.</span><span class="ident" id="7842234">NewEncoder</span><span class="op" id="7842244">(</span><span class="op" id="7842245">&amp;</span><span class="ident" id="7842246">medium</span><span class="op" id="7842252">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842255">dec</span>&nbsp;<span class="op" id="7842259">:=</span>&nbsp;<span class="ident" id="7842262">gob</span><span class="op" id="7842265">.</span><span class="ident" id="7842266">NewDecoder</span><span class="op" id="7842276">(</span><span class="op" id="7842277">&amp;</span><span class="ident" id="7842278">medium</span><span class="op" id="7842284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842287">for</span>&nbsp;<span class="ident" id="7842291">_</span><span class="op" id="7842292">,</span>&nbsp;<span class="ident" id="7842294">test</span>&nbsp;<span class="op" id="7842299">:=</span>&nbsp;<span class="keyword" id="7842302">range</span>&nbsp;<span class="ident" id="7842308">encodingTests</span>&nbsp;<span class="op" id="7842322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842326">medium</span><span class="op" id="7842332">.</span><span class="ident" id="7842333">Reset</span><span class="op" id="7842338">(</span><span class="op" id="7842339">)</span>&nbsp;<span class="comment" id="7842341">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842400">var</span>&nbsp;<span class="ident" id="7842404">tx</span>&nbsp;<span class="ident" id="7842407">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842413">tx</span><span class="op" id="7842415">.</span><span class="ident" id="7842416">SetString</span><span class="op" id="7842425">(</span><span class="ident" id="7842426">test</span>&nbsp;<span class="op" id="7842431">+</span>&nbsp;<span class="string" id="7842433">&#34;.14159265&#34;</span><span class="op" id="7842444">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842448">if</span>&nbsp;<span class="ident" id="7842451">err</span>&nbsp;<span class="op" id="7842455">:=</span>&nbsp;<span class="ident" id="7842458">enc</span><span class="op" id="7842461">.</span><span class="ident" id="7842462">Encode</span><span class="op" id="7842468">(</span><span class="op" id="7842469">&amp;</span><span class="ident" id="7842470">tx</span><span class="op" id="7842472">)</span><span class="op" id="7842473">;</span>&nbsp;<span class="ident" id="7842475">err</span>&nbsp;<span class="op" id="7842479">!=</span>&nbsp;<span class="ident" id="7842482">nil</span>&nbsp;<span class="op" id="7842486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842491">t</span><span class="op" id="7842492">.</span><span class="ident" id="7842493">Errorf</span><span class="op" id="7842499">(</span><span class="string" id="7842500">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7842527">,</span>&nbsp;<span class="op" id="7842529">&amp;</span><span class="ident" id="7842530">tx</span><span class="op" id="7842532">,</span>&nbsp;<span class="ident" id="7842534">err</span><span class="op" id="7842537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7842541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842545">var</span>&nbsp;<span class="ident" id="7842549">rx</span>&nbsp;<span class="ident" id="7842552">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842558">if</span>&nbsp;<span class="ident" id="7842561">err</span>&nbsp;<span class="op" id="7842565">:=</span>&nbsp;<span class="ident" id="7842568">dec</span><span class="op" id="7842571">.</span><span class="ident" id="7842572">Decode</span><span class="op" id="7842578">(</span><span class="op" id="7842579">&amp;</span><span class="ident" id="7842580">rx</span><span class="op" id="7842582">)</span><span class="op" id="7842583">;</span>&nbsp;<span class="ident" id="7842585">err</span>&nbsp;<span class="op" id="7842589">!=</span>&nbsp;<span class="ident" id="7842592">nil</span>&nbsp;<span class="op" id="7842596">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842601">t</span><span class="op" id="7842602">.</span><span class="ident" id="7842603">Errorf</span><span class="op" id="7842609">(</span><span class="string" id="7842610">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7842637">,</span>&nbsp;<span class="op" id="7842639">&amp;</span><span class="ident" id="7842640">tx</span><span class="op" id="7842642">,</span>&nbsp;<span class="ident" id="7842644">err</span><span class="op" id="7842647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7842651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7842655">if</span>&nbsp;<span class="ident" id="7842658">rx</span><span class="op" id="7842660">.</span><span class="ident" id="7842661">Cmp</span><span class="op" id="7842664">(</span><span class="op" id="7842665">&amp;</span><span class="ident" id="7842666">tx</span><span class="op" id="7842668">)</span>&nbsp;<span class="op" id="7842670">!=</span>&nbsp;<span class="num" id="7842673">0</span>&nbsp;<span class="op" id="7842675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842680">t</span><span class="op" id="7842681">.</span><span class="ident" id="7842682">Errorf</span><span class="op" id="7842688">(</span><span class="string" id="7842689">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7842732">,</span>&nbsp;<span class="op" id="7842734">&amp;</span><span class="ident" id="7842735">tx</span><span class="op" id="7842737">,</span>&nbsp;<span class="op" id="7842739">&amp;</span><span class="ident" id="7842740">rx</span><span class="op" id="7842742">,</span>&nbsp;<span class="op" id="7842744">&amp;</span><span class="ident" id="7842745">tx</span><span class="op" id="7842747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7842751">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7842754">}</span><br>
<span class="lineno"></span><span class="op" id="7842756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7842759">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="7842854">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="7842879">func</span>&nbsp;<span class="ident" id="7842884">TestGobEncodingNilRatInSlice</span><span class="op" id="7842912">(</span><span class="ident" id="7842913">t</span>&nbsp;<span class="op" id="7842915">*</span><span class="ident" id="7842916">testing</span><span class="op" id="7842923">.</span><span class="ident" id="7842924">T</span><span class="op" id="7842925">)</span>&nbsp;<span class="op" id="7842927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842930">buf</span>&nbsp;<span class="op" id="7842934">:=</span>&nbsp;<span class="builtinfunc" id="7842937">new</span><span class="op" id="7842940">(</span><span class="ident" id="7842941">bytes</span><span class="op" id="7842946">.</span><span class="ident" id="7842947">Buffer</span><span class="op" id="7842953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842956">enc</span>&nbsp;<span class="op" id="7842960">:=</span>&nbsp;<span class="ident" id="7842963">gob</span><span class="op" id="7842966">.</span><span class="ident" id="7842967">NewEncoder</span><span class="op" id="7842977">(</span><span class="ident" id="7842978">buf</span><span class="op" id="7842981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7842984">dec</span>&nbsp;<span class="op" id="7842988">:=</span>&nbsp;<span class="ident" id="7842991">gob</span><span class="op" id="7842994">.</span><span class="ident" id="7842995">NewDecoder</span><span class="op" id="7843005">(</span><span class="ident" id="7843006">buf</span><span class="op" id="7843009">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843013">var</span>&nbsp;<span class="ident" id="7843017">in</span>&nbsp;<span class="op" id="7843020">=</span>&nbsp;<span class="builtinfunc" id="7843022">make</span><span class="op" id="7843026">(</span><span class="op" id="7843027">[</span><span class="op" id="7843028">]</span><span class="op" id="7843029">*</span><span class="ident" id="7843030">Rat</span><span class="op" id="7843033">,</span>&nbsp;<span class="num" id="7843035">1</span><span class="op" id="7843036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843039">err</span>&nbsp;<span class="op" id="7843043">:=</span>&nbsp;<span class="ident" id="7843046">enc</span><span class="op" id="7843049">.</span><span class="ident" id="7843050">Encode</span><span class="op" id="7843056">(</span><span class="op" id="7843057">&amp;</span><span class="ident" id="7843058">in</span><span class="op" id="7843060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843063">if</span>&nbsp;<span class="ident" id="7843066">err</span>&nbsp;<span class="op" id="7843070">!=</span>&nbsp;<span class="ident" id="7843073">nil</span>&nbsp;<span class="op" id="7843077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843081">t</span><span class="op" id="7843082">.</span><span class="ident" id="7843083">Errorf</span><span class="op" id="7843089">(</span><span class="string" id="7843090">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7843113">,</span>&nbsp;<span class="ident" id="7843115">err</span><span class="op" id="7843118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7843121">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843124">var</span>&nbsp;<span class="ident" id="7843128">out</span>&nbsp;<span class="op" id="7843132">[</span><span class="op" id="7843133">]</span><span class="op" id="7843134">*</span><span class="ident" id="7843135">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843140">err</span>&nbsp;<span class="op" id="7843144">=</span>&nbsp;<span class="ident" id="7843146">dec</span><span class="op" id="7843149">.</span><span class="ident" id="7843150">Decode</span><span class="op" id="7843156">(</span><span class="op" id="7843157">&amp;</span><span class="ident" id="7843158">out</span><span class="op" id="7843161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843164">if</span>&nbsp;<span class="ident" id="7843167">err</span>&nbsp;<span class="op" id="7843171">!=</span>&nbsp;<span class="ident" id="7843174">nil</span>&nbsp;<span class="op" id="7843178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843182">t</span><span class="op" id="7843183">.</span><span class="ident" id="7843184">Fatalf</span><span class="op" id="7843190">(</span><span class="string" id="7843191">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7843214">,</span>&nbsp;<span class="ident" id="7843216">err</span><span class="op" id="7843219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7843222">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843225">if</span>&nbsp;<span class="builtinfunc" id="7843228">len</span><span class="op" id="7843231">(</span><span class="ident" id="7843232">out</span><span class="op" id="7843235">)</span>&nbsp;<span class="op" id="7843237">!=</span>&nbsp;<span class="num" id="7843240">1</span>&nbsp;<span class="op" id="7843242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843246">t</span><span class="op" id="7843247">.</span><span class="ident" id="7843248">Fatalf</span><span class="op" id="7843254">(</span><span class="string" id="7843255">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7843281">,</span>&nbsp;<span class="builtinfunc" id="7843283">len</span><span class="op" id="7843286">(</span><span class="ident" id="7843287">out</span><span class="op" id="7843290">)</span><span class="op" id="7843291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7843294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843297">var</span>&nbsp;<span class="ident" id="7843301">zero</span>&nbsp;<span class="ident" id="7843306">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843311">if</span>&nbsp;<span class="ident" id="7843314">out</span><span class="op" id="7843317">[</span><span class="num" id="7843318">0</span><span class="op" id="7843319">]</span><span class="op" id="7843320">.</span><span class="ident" id="7843321">Cmp</span><span class="op" id="7843324">(</span><span class="op" id="7843325">&amp;</span><span class="ident" id="7843326">zero</span><span class="op" id="7843330">)</span>&nbsp;<span class="op" id="7843332">!=</span>&nbsp;<span class="num" id="7843335">0</span>&nbsp;<span class="op" id="7843337">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7843341">t</span><span class="op" id="7843342">.</span><span class="ident" id="7843343">Errorf</span><span class="op" id="7843349">(</span><span class="string" id="7843350">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="7843402">,</span>&nbsp;<span class="ident" id="7843404">out</span><span class="op" id="7843407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7843410">}</span><br>
<span class="lineno"></span><span class="op" id="7843412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7843415">var</span>&nbsp;<span class="ident" id="7843419">ratNums</span>&nbsp;<span class="op" id="7843427">=</span>&nbsp;<span class="op" id="7843429">[</span><span class="op" id="7843430">]</span><span class="builtintype" id="7843431">string</span><span class="op" id="7843437">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843440">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7843518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843521">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="7843564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843567">&#34;-141592653589793&#34;</span><span class="op" id="7843585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843588">&#34;-1&#34;</span><span class="op" id="7843592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843595">&#34;0&#34;</span><span class="op" id="7843598">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843601">&#34;1&#34;</span><span class="op" id="7843604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843607">&#34;141592653589793&#34;</span><span class="op" id="7843624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843627">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="7843669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843672">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7843749">,</span><br>
<span class="lineno"></span><span class="op" id="7843751">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7843754">var</span>&nbsp;<span class="ident" id="7843758">ratDenoms</span>&nbsp;<span class="op" id="7843768">=</span>&nbsp;<span class="op" id="7843770">[</span><span class="op" id="7843771">]</span><span class="builtintype" id="7843772">string</span><span class="op" id="7843778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843781">&#34;1&#34;</span><span class="op" id="7843784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843787">&#34;718281828459045&#34;</span><span class="op" id="7843804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843807">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="7843849">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7843852">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="7843929">,</span><br>
<span class="lineno"></span><span class="op" id="7843931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7843934">func</span>&nbsp;<span class="ident" id="7843939">TestRatJSONEncoding</span><span class="op" id="7843958">(</span><span class="ident" id="7843959">t</span>&nbsp;<span class="op" id="7843961">*</span><span class="ident" id="7843962">testing</span><span class="op" id="7843969">.</span><span class="ident" id="7843970">T</span><span class="op" id="7843971">)</span>&nbsp;<span class="op" id="7843973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7843976">for</span>&nbsp;<span class="ident" id="7843980">_</span><span class="op" id="7843981">,</span>&nbsp;<span class="ident" id="7843983">num</span>&nbsp;<span class="op" id="7843987">:=</span>&nbsp;<span class="keyword" id="7843990">range</span>&nbsp;<span class="ident" id="7843996">ratNums</span>&nbsp;<span class="op" id="7844004">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844008">for</span>&nbsp;<span class="ident" id="7844012">_</span><span class="op" id="7844013">,</span>&nbsp;<span class="ident" id="7844015">denom</span>&nbsp;<span class="op" id="7844021">:=</span>&nbsp;<span class="keyword" id="7844024">range</span>&nbsp;<span class="ident" id="7844030">ratDenoms</span>&nbsp;<span class="op" id="7844040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844045">var</span>&nbsp;<span class="ident" id="7844049">tx</span>&nbsp;<span class="ident" id="7844052">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844059">tx</span><span class="op" id="7844061">.</span><span class="ident" id="7844062">SetString</span><span class="op" id="7844071">(</span><span class="ident" id="7844072">num</span>&nbsp;<span class="op" id="7844076">+</span>&nbsp;<span class="string" id="7844078">&#34;/&#34;</span>&nbsp;<span class="op" id="7844082">+</span>&nbsp;<span class="ident" id="7844084">denom</span><span class="op" id="7844089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844094">b</span><span class="op" id="7844095">,</span>&nbsp;<span class="ident" id="7844097">err</span>&nbsp;<span class="op" id="7844101">:=</span>&nbsp;<span class="ident" id="7844104">json</span><span class="op" id="7844108">.</span><span class="ident" id="7844109">Marshal</span><span class="op" id="7844116">(</span><span class="op" id="7844117">&amp;</span><span class="ident" id="7844118">tx</span><span class="op" id="7844120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844125">if</span>&nbsp;<span class="ident" id="7844128">err</span>&nbsp;<span class="op" id="7844132">!=</span>&nbsp;<span class="ident" id="7844135">nil</span>&nbsp;<span class="op" id="7844139">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844145">t</span><span class="op" id="7844146">.</span><span class="ident" id="7844147">Errorf</span><span class="op" id="7844153">(</span><span class="string" id="7844154">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7844183">,</span>&nbsp;<span class="op" id="7844185">&amp;</span><span class="ident" id="7844186">tx</span><span class="op" id="7844188">,</span>&nbsp;<span class="ident" id="7844190">err</span><span class="op" id="7844193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844199">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844216">var</span>&nbsp;<span class="ident" id="7844220">rx</span>&nbsp;<span class="ident" id="7844223">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844230">if</span>&nbsp;<span class="ident" id="7844233">err</span>&nbsp;<span class="op" id="7844237">:=</span>&nbsp;<span class="ident" id="7844240">json</span><span class="op" id="7844244">.</span><span class="ident" id="7844245">Unmarshal</span><span class="op" id="7844254">(</span><span class="ident" id="7844255">b</span><span class="op" id="7844256">,</span>&nbsp;<span class="op" id="7844258">&amp;</span><span class="ident" id="7844259">rx</span><span class="op" id="7844261">)</span><span class="op" id="7844262">;</span>&nbsp;<span class="ident" id="7844264">err</span>&nbsp;<span class="op" id="7844268">!=</span>&nbsp;<span class="ident" id="7844271">nil</span>&nbsp;<span class="op" id="7844275">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844281">t</span><span class="op" id="7844282">.</span><span class="ident" id="7844283">Errorf</span><span class="op" id="7844289">(</span><span class="string" id="7844290">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7844321">,</span>&nbsp;<span class="op" id="7844323">&amp;</span><span class="ident" id="7844324">tx</span><span class="op" id="7844326">,</span>&nbsp;<span class="ident" id="7844328">err</span><span class="op" id="7844331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844337">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844354">if</span>&nbsp;<span class="ident" id="7844357">rx</span><span class="op" id="7844359">.</span><span class="ident" id="7844360">Cmp</span><span class="op" id="7844363">(</span><span class="op" id="7844364">&amp;</span><span class="ident" id="7844365">tx</span><span class="op" id="7844367">)</span>&nbsp;<span class="op" id="7844369">!=</span>&nbsp;<span class="num" id="7844372">0</span>&nbsp;<span class="op" id="7844374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844380">t</span><span class="op" id="7844381">.</span><span class="ident" id="7844382">Errorf</span><span class="op" id="7844388">(</span><span class="string" id="7844389">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7844433">,</span>&nbsp;<span class="op" id="7844435">&amp;</span><span class="ident" id="7844436">tx</span><span class="op" id="7844438">,</span>&nbsp;<span class="op" id="7844440">&amp;</span><span class="ident" id="7844441">rx</span><span class="op" id="7844443">,</span>&nbsp;<span class="op" id="7844445">&amp;</span><span class="ident" id="7844446">tx</span><span class="op" id="7844448">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844460">}</span><br>
<span class="lineno"></span><span class="op" id="7844462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="7844465">func</span>&nbsp;<span class="ident" id="7844470">TestRatXMLEncoding</span><span class="op" id="7844488">(</span><span class="ident" id="7844489">t</span>&nbsp;<span class="op" id="7844491">*</span><span class="ident" id="7844492">testing</span><span class="op" id="7844499">.</span><span class="ident" id="7844500">T</span><span class="op" id="7844501">)</span>&nbsp;<span class="op" id="7844503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844506">for</span>&nbsp;<span class="ident" id="7844510">_</span><span class="op" id="7844511">,</span>&nbsp;<span class="ident" id="7844513">num</span>&nbsp;<span class="op" id="7844517">:=</span>&nbsp;<span class="keyword" id="7844520">range</span>&nbsp;<span class="ident" id="7844526">ratNums</span>&nbsp;<span class="op" id="7844534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844538">for</span>&nbsp;<span class="ident" id="7844542">_</span><span class="op" id="7844543">,</span>&nbsp;<span class="ident" id="7844545">denom</span>&nbsp;<span class="op" id="7844551">:=</span>&nbsp;<span class="keyword" id="7844554">range</span>&nbsp;<span class="ident" id="7844560">ratDenoms</span>&nbsp;<span class="op" id="7844570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844575">var</span>&nbsp;<span class="ident" id="7844579">tx</span>&nbsp;<span class="ident" id="7844582">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844589">tx</span><span class="op" id="7844591">.</span><span class="ident" id="7844592">SetString</span><span class="op" id="7844601">(</span><span class="ident" id="7844602">num</span>&nbsp;<span class="op" id="7844606">+</span>&nbsp;<span class="string" id="7844608">&#34;/&#34;</span>&nbsp;<span class="op" id="7844612">+</span>&nbsp;<span class="ident" id="7844614">denom</span><span class="op" id="7844619">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844624">b</span><span class="op" id="7844625">,</span>&nbsp;<span class="ident" id="7844627">err</span>&nbsp;<span class="op" id="7844631">:=</span>&nbsp;<span class="ident" id="7844634">xml</span><span class="op" id="7844637">.</span><span class="ident" id="7844638">Marshal</span><span class="op" id="7844645">(</span><span class="op" id="7844646">&amp;</span><span class="ident" id="7844647">tx</span><span class="op" id="7844649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844654">if</span>&nbsp;<span class="ident" id="7844657">err</span>&nbsp;<span class="op" id="7844661">!=</span>&nbsp;<span class="ident" id="7844664">nil</span>&nbsp;<span class="op" id="7844668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844674">t</span><span class="op" id="7844675">.</span><span class="ident" id="7844676">Errorf</span><span class="op" id="7844682">(</span><span class="string" id="7844683">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7844712">,</span>&nbsp;<span class="op" id="7844714">&amp;</span><span class="ident" id="7844715">tx</span><span class="op" id="7844717">,</span>&nbsp;<span class="ident" id="7844719">err</span><span class="op" id="7844722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844728">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844740">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844745">var</span>&nbsp;<span class="ident" id="7844749">rx</span>&nbsp;<span class="ident" id="7844752">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844759">if</span>&nbsp;<span class="ident" id="7844762">err</span>&nbsp;<span class="op" id="7844766">:=</span>&nbsp;<span class="ident" id="7844769">xml</span><span class="op" id="7844772">.</span><span class="ident" id="7844773">Unmarshal</span><span class="op" id="7844782">(</span><span class="ident" id="7844783">b</span><span class="op" id="7844784">,</span>&nbsp;<span class="op" id="7844786">&amp;</span><span class="ident" id="7844787">rx</span><span class="op" id="7844789">)</span><span class="op" id="7844790">;</span>&nbsp;<span class="ident" id="7844792">err</span>&nbsp;<span class="op" id="7844796">!=</span>&nbsp;<span class="ident" id="7844799">nil</span>&nbsp;<span class="op" id="7844803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844809">t</span><span class="op" id="7844810">.</span><span class="ident" id="7844811">Errorf</span><span class="op" id="7844817">(</span><span class="string" id="7844818">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7844849">,</span>&nbsp;<span class="op" id="7844851">&amp;</span><span class="ident" id="7844852">tx</span><span class="op" id="7844854">,</span>&nbsp;<span class="ident" id="7844856">err</span><span class="op" id="7844859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844865">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844877">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844882">if</span>&nbsp;<span class="ident" id="7844885">rx</span><span class="op" id="7844887">.</span><span class="ident" id="7844888">Cmp</span><span class="op" id="7844891">(</span><span class="op" id="7844892">&amp;</span><span class="ident" id="7844893">tx</span><span class="op" id="7844895">)</span>&nbsp;<span class="op" id="7844897">!=</span>&nbsp;<span class="num" id="7844900">0</span>&nbsp;<span class="op" id="7844902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7844908">t</span><span class="op" id="7844909">.</span><span class="ident" id="7844910">Errorf</span><span class="op" id="7844916">(</span><span class="string" id="7844917">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7844960">,</span>&nbsp;<span class="op" id="7844962">&amp;</span><span class="ident" id="7844963">tx</span><span class="op" id="7844965">,</span>&nbsp;<span class="op" id="7844967">&amp;</span><span class="ident" id="7844968">rx</span><span class="op" id="7844970">,</span>&nbsp;<span class="op" id="7844972">&amp;</span><span class="ident" id="7844973">tx</span><span class="op" id="7844975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7844987">}</span><br>
<span class="lineno">500</span><span class="op" id="7844989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7844992">func</span>&nbsp;<span class="ident" id="7844997">TestIssue2379</span><span class="op" id="7845010">(</span><span class="ident" id="7845011">t</span>&nbsp;<span class="op" id="7845013">*</span><span class="ident" id="7845014">testing</span><span class="op" id="7845021">.</span><span class="ident" id="7845022">T</span><span class="op" id="7845023">)</span>&nbsp;<span class="op" id="7845025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845028">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845047">q</span>&nbsp;<span class="op" id="7845049">:=</span>&nbsp;<span class="ident" id="7845052">NewRat</span><span class="op" id="7845058">(</span><span class="num" id="7845059">3</span><span class="op" id="7845060">,</span>&nbsp;<span class="num" id="7845062">2</span><span class="op" id="7845063">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845066">x</span>&nbsp;<span class="op" id="7845068">:=</span>&nbsp;<span class="builtinfunc" id="7845071">new</span><span class="op" id="7845074">(</span><span class="ident" id="7845075">Rat</span><span class="op" id="7845078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845081">x</span><span class="op" id="7845082">.</span><span class="ident" id="7845083">SetFrac</span><span class="op" id="7845090">(</span><span class="ident" id="7845091">NewInt</span><span class="op" id="7845097">(</span><span class="num" id="7845098">3</span><span class="op" id="7845099">)</span><span class="op" id="7845100">,</span>&nbsp;<span class="ident" id="7845102">NewInt</span><span class="op" id="7845108">(</span><span class="num" id="7845109">2</span><span class="op" id="7845110">)</span><span class="op" id="7845111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845114">if</span>&nbsp;<span class="ident" id="7845117">x</span><span class="op" id="7845118">.</span><span class="ident" id="7845119">Cmp</span><span class="op" id="7845122">(</span><span class="ident" id="7845123">q</span><span class="op" id="7845124">)</span>&nbsp;<span class="op" id="7845126">!=</span>&nbsp;<span class="num" id="7845129">0</span>&nbsp;<span class="op" id="7845131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845135">t</span><span class="op" id="7845136">.</span><span class="ident" id="7845137">Errorf</span><span class="op" id="7845143">(</span><span class="string" id="7845144">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7845163">,</span>&nbsp;<span class="ident" id="7845165">x</span><span class="op" id="7845166">,</span>&nbsp;<span class="ident" id="7845168">q</span><span class="op" id="7845169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845172">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845176">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845205">x</span>&nbsp;<span class="op" id="7845207">=</span>&nbsp;<span class="ident" id="7845209">NewRat</span><span class="op" id="7845215">(</span><span class="num" id="7845216">2</span><span class="op" id="7845217">,</span>&nbsp;<span class="num" id="7845219">3</span><span class="op" id="7845220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845223">x</span><span class="op" id="7845224">.</span><span class="ident" id="7845225">SetFrac</span><span class="op" id="7845232">(</span><span class="ident" id="7845233">NewInt</span><span class="op" id="7845239">(</span><span class="num" id="7845240">3</span><span class="op" id="7845241">)</span><span class="op" id="7845242">,</span>&nbsp;<span class="ident" id="7845244">x</span><span class="op" id="7845245">.</span><span class="ident" id="7845246">Num</span><span class="op" id="7845249">(</span><span class="op" id="7845250">)</span><span class="op" id="7845251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845254">if</span>&nbsp;<span class="ident" id="7845257">x</span><span class="op" id="7845258">.</span><span class="ident" id="7845259">Cmp</span><span class="op" id="7845262">(</span><span class="ident" id="7845263">q</span><span class="op" id="7845264">)</span>&nbsp;<span class="op" id="7845266">!=</span>&nbsp;<span class="num" id="7845269">0</span>&nbsp;<span class="op" id="7845271">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845275">t</span><span class="op" id="7845276">.</span><span class="ident" id="7845277">Errorf</span><span class="op" id="7845283">(</span><span class="string" id="7845284">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7845303">,</span>&nbsp;<span class="ident" id="7845305">x</span><span class="op" id="7845306">,</span>&nbsp;<span class="ident" id="7845308">q</span><span class="op" id="7845309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845316">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845347">x</span>&nbsp;<span class="op" id="7845349">=</span>&nbsp;<span class="ident" id="7845351">NewRat</span><span class="op" id="7845357">(</span><span class="num" id="7845358">2</span><span class="op" id="7845359">,</span>&nbsp;<span class="num" id="7845361">3</span><span class="op" id="7845362">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845365">x</span><span class="op" id="7845366">.</span><span class="ident" id="7845367">SetFrac</span><span class="op" id="7845374">(</span><span class="ident" id="7845375">x</span><span class="op" id="7845376">.</span><span class="ident" id="7845377">Denom</span><span class="op" id="7845382">(</span><span class="op" id="7845383">)</span><span class="op" id="7845384">,</span>&nbsp;<span class="ident" id="7845386">NewInt</span><span class="op" id="7845392">(</span><span class="num" id="7845393">2</span><span class="op" id="7845394">)</span><span class="op" id="7845395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845398">if</span>&nbsp;<span class="ident" id="7845401">x</span><span class="op" id="7845402">.</span><span class="ident" id="7845403">Cmp</span><span class="op" id="7845406">(</span><span class="ident" id="7845407">q</span><span class="op" id="7845408">)</span>&nbsp;<span class="op" id="7845410">!=</span>&nbsp;<span class="num" id="7845413">0</span>&nbsp;<span class="op" id="7845415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845419">t</span><span class="op" id="7845420">.</span><span class="ident" id="7845421">Errorf</span><span class="op" id="7845427">(</span><span class="string" id="7845428">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7845447">,</span>&nbsp;<span class="ident" id="7845449">x</span><span class="op" id="7845450">,</span>&nbsp;<span class="ident" id="7845452">q</span><span class="op" id="7845453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845460">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845505">x</span>&nbsp;<span class="op" id="7845507">=</span>&nbsp;<span class="ident" id="7845509">NewRat</span><span class="op" id="7845515">(</span><span class="num" id="7845516">2</span><span class="op" id="7845517">,</span>&nbsp;<span class="num" id="7845519">3</span><span class="op" id="7845520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845523">x</span><span class="op" id="7845524">.</span><span class="ident" id="7845525">SetFrac</span><span class="op" id="7845532">(</span><span class="ident" id="7845533">x</span><span class="op" id="7845534">.</span><span class="ident" id="7845535">Denom</span><span class="op" id="7845540">(</span><span class="op" id="7845541">)</span><span class="op" id="7845542">,</span>&nbsp;<span class="ident" id="7845544">x</span><span class="op" id="7845545">.</span><span class="ident" id="7845546">Num</span><span class="op" id="7845549">(</span><span class="op" id="7845550">)</span><span class="op" id="7845551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845554">if</span>&nbsp;<span class="ident" id="7845557">x</span><span class="op" id="7845558">.</span><span class="ident" id="7845559">Cmp</span><span class="op" id="7845562">(</span><span class="ident" id="7845563">q</span><span class="op" id="7845564">)</span>&nbsp;<span class="op" id="7845566">!=</span>&nbsp;<span class="num" id="7845569">0</span>&nbsp;<span class="op" id="7845571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845575">t</span><span class="op" id="7845576">.</span><span class="ident" id="7845577">Errorf</span><span class="op" id="7845583">(</span><span class="string" id="7845584">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7845603">,</span>&nbsp;<span class="ident" id="7845605">x</span><span class="op" id="7845606">,</span>&nbsp;<span class="ident" id="7845608">q</span><span class="op" id="7845609">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845616">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845662">q</span>&nbsp;<span class="op" id="7845664">=</span>&nbsp;<span class="ident" id="7845666">NewRat</span><span class="op" id="7845672">(</span><span class="num" id="7845673">1</span><span class="op" id="7845674">,</span>&nbsp;<span class="num" id="7845676">1</span><span class="op" id="7845677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845680">x</span>&nbsp;<span class="op" id="7845682">=</span>&nbsp;<span class="builtinfunc" id="7845684">new</span><span class="op" id="7845687">(</span><span class="ident" id="7845688">Rat</span><span class="op" id="7845691">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845694">n</span>&nbsp;<span class="op" id="7845696">:=</span>&nbsp;<span class="ident" id="7845699">NewInt</span><span class="op" id="7845705">(</span><span class="num" id="7845706">7</span><span class="op" id="7845707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845710">x</span><span class="op" id="7845711">.</span><span class="ident" id="7845712">SetFrac</span><span class="op" id="7845719">(</span><span class="ident" id="7845720">n</span><span class="op" id="7845721">,</span>&nbsp;<span class="ident" id="7845723">n</span><span class="op" id="7845724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7845727">if</span>&nbsp;<span class="ident" id="7845730">x</span><span class="op" id="7845731">.</span><span class="ident" id="7845732">Cmp</span><span class="op" id="7845735">(</span><span class="ident" id="7845736">q</span><span class="op" id="7845737">)</span>&nbsp;<span class="op" id="7845739">!=</span>&nbsp;<span class="num" id="7845742">0</span>&nbsp;<span class="op" id="7845744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845748">t</span><span class="op" id="7845749">.</span><span class="ident" id="7845750">Errorf</span><span class="op" id="7845756">(</span><span class="string" id="7845757">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7845776">,</span>&nbsp;<span class="ident" id="7845778">x</span><span class="op" id="7845779">,</span>&nbsp;<span class="ident" id="7845781">q</span><span class="op" id="7845782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7845785">}</span><br>
<span class="lineno">540</span><span class="op" id="7845787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7845790">func</span>&nbsp;<span class="ident" id="7845795">TestIssue3521</span><span class="op" id="7845808">(</span><span class="ident" id="7845809">t</span>&nbsp;<span class="op" id="7845811">*</span><span class="ident" id="7845812">testing</span><span class="op" id="7845819">.</span><span class="ident" id="7845820">T</span><span class="op" id="7845821">)</span>&nbsp;<span class="op" id="7845823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845826">a</span>&nbsp;<span class="op" id="7845828">:=</span>&nbsp;<span class="builtinfunc" id="7845831">new</span><span class="op" id="7845834">(</span><span class="ident" id="7845835">Int</span><span class="op" id="7845838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845841">b</span>&nbsp;<span class="op" id="7845843">:=</span>&nbsp;<span class="builtinfunc" id="7845846">new</span><span class="op" id="7845849">(</span><span class="ident" id="7845850">Int</span><span class="op" id="7845853">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845856">a</span><span class="op" id="7845857">.</span><span class="ident" id="7845858">SetString</span><span class="op" id="7845867">(</span><span class="string" id="7845868">&#34;64375784358435883458348587&#34;</span><span class="op" id="7845896">,</span>&nbsp;<span class="num" id="7845898">0</span><span class="op" id="7845899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845902">b</span><span class="op" id="7845903">.</span><span class="ident" id="7845904">SetString</span><span class="op" id="7845913">(</span><span class="string" id="7845914">&#34;4789759874531&#34;</span><span class="op" id="7845929">,</span>&nbsp;<span class="num" id="7845931">0</span><span class="op" id="7845932">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7845936">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845981">zero</span>&nbsp;<span class="op" id="7845986">:=</span>&nbsp;<span class="builtinfunc" id="7845989">new</span><span class="op" id="7845992">(</span><span class="ident" id="7845993">Rat</span><span class="op" id="7845996">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7845999">one</span>&nbsp;<span class="op" id="7846003">:=</span>&nbsp;<span class="ident" id="7846006">NewInt</span><span class="op" id="7846012">(</span><span class="num" id="7846013">1</span><span class="op" id="7846014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846017">if</span>&nbsp;<span class="ident" id="7846020">zero</span><span class="op" id="7846024">.</span><span class="ident" id="7846025">Denom</span><span class="op" id="7846030">(</span><span class="op" id="7846031">)</span><span class="op" id="7846032">.</span><span class="ident" id="7846033">Cmp</span><span class="op" id="7846036">(</span><span class="ident" id="7846037">one</span><span class="op" id="7846040">)</span>&nbsp;<span class="op" id="7846042">!=</span>&nbsp;<span class="num" id="7846045">0</span>&nbsp;<span class="op" id="7846047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846051">t</span><span class="op" id="7846052">.</span><span class="ident" id="7846053">Errorf</span><span class="op" id="7846059">(</span><span class="string" id="7846060">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7846079">,</span>&nbsp;<span class="ident" id="7846081">zero</span><span class="op" id="7846085">.</span><span class="ident" id="7846086">Denom</span><span class="op" id="7846091">(</span><span class="op" id="7846092">)</span><span class="op" id="7846093">,</span>&nbsp;<span class="ident" id="7846095">one</span><span class="op" id="7846098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7846105">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846166">x</span>&nbsp;<span class="op" id="7846168">:=</span>&nbsp;<span class="builtinfunc" id="7846171">new</span><span class="op" id="7846174">(</span><span class="ident" id="7846175">Rat</span><span class="op" id="7846178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846181">x</span><span class="op" id="7846182">.</span><span class="ident" id="7846183">Denom</span><span class="op" id="7846188">(</span><span class="op" id="7846189">)</span><span class="op" id="7846190">.</span><span class="ident" id="7846191">Set</span><span class="op" id="7846194">(</span><span class="builtinfunc" id="7846195">new</span><span class="op" id="7846198">(</span><span class="ident" id="7846199">Int</span><span class="op" id="7846202">)</span><span class="op" id="7846203">.</span><span class="ident" id="7846204">Neg</span><span class="op" id="7846207">(</span><span class="ident" id="7846208">b</span><span class="op" id="7846209">)</span><span class="op" id="7846210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846213">if</span>&nbsp;<span class="ident" id="7846216">x</span><span class="op" id="7846217">.</span><span class="ident" id="7846218">Cmp</span><span class="op" id="7846221">(</span><span class="ident" id="7846222">zero</span><span class="op" id="7846226">)</span>&nbsp;<span class="op" id="7846228">!=</span>&nbsp;<span class="num" id="7846231">0</span>&nbsp;<span class="op" id="7846233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846237">t</span><span class="op" id="7846238">.</span><span class="ident" id="7846239">Errorf</span><span class="op" id="7846245">(</span><span class="string" id="7846246">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7846266">,</span>&nbsp;<span class="ident" id="7846268">x</span><span class="op" id="7846269">,</span>&nbsp;<span class="ident" id="7846271">zero</span><span class="op" id="7846275">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7846282">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846340">x</span><span class="op" id="7846341">.</span><span class="ident" id="7846342">Num</span><span class="op" id="7846345">(</span><span class="op" id="7846346">)</span><span class="op" id="7846347">.</span><span class="ident" id="7846348">Set</span><span class="op" id="7846351">(</span><span class="ident" id="7846352">a</span><span class="op" id="7846353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846356">qab</span>&nbsp;<span class="op" id="7846360">:=</span>&nbsp;<span class="builtinfunc" id="7846363">new</span><span class="op" id="7846366">(</span><span class="ident" id="7846367">Rat</span><span class="op" id="7846370">)</span><span class="op" id="7846371">.</span><span class="ident" id="7846372">SetFrac</span><span class="op" id="7846379">(</span><span class="ident" id="7846380">a</span><span class="op" id="7846381">,</span>&nbsp;<span class="ident" id="7846383">b</span><span class="op" id="7846384">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846387">if</span>&nbsp;<span class="ident" id="7846390">x</span><span class="op" id="7846391">.</span><span class="ident" id="7846392">Cmp</span><span class="op" id="7846395">(</span><span class="ident" id="7846396">qab</span><span class="op" id="7846399">)</span>&nbsp;<span class="op" id="7846401">!=</span>&nbsp;<span class="num" id="7846404">0</span>&nbsp;<span class="op" id="7846406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846410">t</span><span class="op" id="7846411">.</span><span class="ident" id="7846412">Errorf</span><span class="op" id="7846418">(</span><span class="string" id="7846419">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7846439">,</span>&nbsp;<span class="ident" id="7846441">x</span><span class="op" id="7846442">,</span>&nbsp;<span class="ident" id="7846444">qab</span><span class="op" id="7846447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7846454">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846524">x</span><span class="op" id="7846525">.</span><span class="ident" id="7846526">SetFrac64</span><span class="op" id="7846535">(</span><span class="num" id="7846536">10</span><span class="op" id="7846538">,</span>&nbsp;<span class="num" id="7846540">2</span><span class="op" id="7846541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846544">x</span><span class="op" id="7846545">.</span><span class="ident" id="7846546">Denom</span><span class="op" id="7846551">(</span><span class="op" id="7846552">)</span><span class="op" id="7846553">.</span><span class="ident" id="7846554">SetInt64</span><span class="op" id="7846562">(</span><span class="num" id="7846563">3</span><span class="op" id="7846564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846567">q53</span>&nbsp;<span class="op" id="7846571">:=</span>&nbsp;<span class="ident" id="7846574">NewRat</span><span class="op" id="7846580">(</span><span class="num" id="7846581">5</span><span class="op" id="7846582">,</span>&nbsp;<span class="num" id="7846584">3</span><span class="op" id="7846585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846588">if</span>&nbsp;<span class="ident" id="7846591">x</span><span class="op" id="7846592">.</span><span class="ident" id="7846593">Cmp</span><span class="op" id="7846596">(</span><span class="ident" id="7846597">q53</span><span class="op" id="7846600">)</span>&nbsp;<span class="op" id="7846602">!=</span>&nbsp;<span class="num" id="7846605">0</span>&nbsp;<span class="op" id="7846607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846611">t</span><span class="op" id="7846612">.</span><span class="ident" id="7846613">Errorf</span><span class="op" id="7846619">(</span><span class="string" id="7846620">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7846640">,</span>&nbsp;<span class="ident" id="7846642">x</span><span class="op" id="7846643">,</span>&nbsp;<span class="ident" id="7846645">q53</span><span class="op" id="7846648">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7846655">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846725">x</span>&nbsp;<span class="op" id="7846727">=</span>&nbsp;<span class="ident" id="7846729">NewRat</span><span class="op" id="7846735">(</span><span class="num" id="7846736">10</span><span class="op" id="7846738">,</span>&nbsp;<span class="num" id="7846740">2</span><span class="op" id="7846741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846744">x</span><span class="op" id="7846745">.</span><span class="ident" id="7846746">Denom</span><span class="op" id="7846751">(</span><span class="op" id="7846752">)</span><span class="op" id="7846753">.</span><span class="ident" id="7846754">SetInt64</span><span class="op" id="7846762">(</span><span class="num" id="7846763">3</span><span class="op" id="7846764">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846767">if</span>&nbsp;<span class="ident" id="7846770">x</span><span class="op" id="7846771">.</span><span class="ident" id="7846772">Cmp</span><span class="op" id="7846775">(</span><span class="ident" id="7846776">q53</span><span class="op" id="7846779">)</span>&nbsp;<span class="op" id="7846781">!=</span>&nbsp;<span class="num" id="7846784">0</span>&nbsp;<span class="op" id="7846786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846790">t</span><span class="op" id="7846791">.</span><span class="ident" id="7846792">Errorf</span><span class="op" id="7846798">(</span><span class="string" id="7846799">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7846819">,</span>&nbsp;<span class="ident" id="7846821">x</span><span class="op" id="7846822">,</span>&nbsp;<span class="ident" id="7846824">q53</span><span class="op" id="7846827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7846830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7846834">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846901">x</span><span class="op" id="7846902">.</span><span class="ident" id="7846903">SetFrac</span><span class="op" id="7846910">(</span><span class="ident" id="7846911">a</span><span class="op" id="7846912">,</span>&nbsp;<span class="ident" id="7846914">b</span><span class="op" id="7846915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846918">a</span>&nbsp;<span class="op" id="7846920">=</span>&nbsp;<span class="ident" id="7846922">x</span><span class="op" id="7846923">.</span><span class="ident" id="7846924">Num</span><span class="op" id="7846927">(</span><span class="op" id="7846928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846931">b</span>&nbsp;<span class="op" id="7846933">=</span>&nbsp;<span class="ident" id="7846935">x</span><span class="op" id="7846936">.</span><span class="ident" id="7846937">Denom</span><span class="op" id="7846942">(</span><span class="op" id="7846943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846946">a</span><span class="op" id="7846947">.</span><span class="ident" id="7846948">SetInt64</span><span class="op" id="7846956">(</span><span class="num" id="7846957">5</span><span class="op" id="7846958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846961">b</span><span class="op" id="7846962">.</span><span class="ident" id="7846963">SetInt64</span><span class="op" id="7846971">(</span><span class="num" id="7846972">3</span><span class="op" id="7846973">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7846976">if</span>&nbsp;<span class="ident" id="7846979">x</span><span class="op" id="7846980">.</span><span class="ident" id="7846981">Cmp</span><span class="op" id="7846984">(</span><span class="ident" id="7846985">q53</span><span class="op" id="7846988">)</span>&nbsp;<span class="op" id="7846990">!=</span>&nbsp;<span class="num" id="7846993">0</span>&nbsp;<span class="op" id="7846995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7846999">t</span><span class="op" id="7847000">.</span><span class="ident" id="7847001">Errorf</span><span class="op" id="7847007">(</span><span class="string" id="7847008">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7847027">,</span>&nbsp;<span class="ident" id="7847029">x</span><span class="op" id="7847030">,</span>&nbsp;<span class="ident" id="7847032">q53</span><span class="op" id="7847035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7847038">}</span><br>
<span class="lineno"></span><span class="op" id="7847040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="7847043">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="7847112">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="7847184">var</span>&nbsp;<span class="ident" id="7847188">float64inputs</span>&nbsp;<span class="op" id="7847202">=</span>&nbsp;<span class="op" id="7847204">[</span><span class="op" id="7847205">]</span><span class="builtintype" id="7847206">string</span><span class="op" id="7847212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847215">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847265">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847335">&#34;5e+125&#34;</span><span class="op" id="7847343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847346">&#34;69e+267&#34;</span><span class="op" id="7847355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847358">&#34;999e-026&#34;</span><span class="op" id="7847368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847371">&#34;7861e-034&#34;</span><span class="op" id="7847382">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847385">&#34;75569e-254&#34;</span><span class="op" id="7847397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847400">&#34;928609e-261&#34;</span><span class="op" id="7847413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847416">&#34;9210917e+080&#34;</span><span class="op" id="7847430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847433">&#34;84863171e+114&#34;</span><span class="op" id="7847448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847451">&#34;653777767e+273&#34;</span><span class="op" id="7847467">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847470">&#34;5232604057e-298&#34;</span><span class="op" id="7847487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847490">&#34;27235667517e-109&#34;</span><span class="op" id="7847508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847511">&#34;653532977297e-123&#34;</span><span class="op" id="7847530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847533">&#34;3142213164987e-294&#34;</span><span class="op" id="7847553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847556">&#34;46202199371337e-072&#34;</span><span class="op" id="7847577">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847580">&#34;231010996856685e-073&#34;</span><span class="op" id="7847602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847605">&#34;9324754620109615e+212&#34;</span><span class="op" id="7847628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847631">&#34;78459735791271921e+049&#34;</span><span class="op" id="7847655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847658">&#34;272104041512242479e+200&#34;</span><span class="op" id="7847683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847686">&#34;6802601037806061975e+198&#34;</span><span class="op" id="7847712">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847715">&#34;20505426358836677347e-221&#34;</span><span class="op" id="7847742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847745">&#34;836168422905420598437e-234&#34;</span><span class="op" id="7847773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847776">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="7847805">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7847809">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847879">&#34;9e-265&#34;</span><span class="op" id="7847887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847890">&#34;85e-037&#34;</span><span class="op" id="7847899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847902">&#34;623e+100&#34;</span><span class="op" id="7847912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847915">&#34;3571e+263&#34;</span><span class="op" id="7847926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847929">&#34;81661e+153&#34;</span><span class="op" id="7847941">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847944">&#34;920657e-023&#34;</span><span class="op" id="7847957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847960">&#34;4603285e-024&#34;</span><span class="op" id="7847974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847977">&#34;87575437e-309&#34;</span><span class="op" id="7847992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7847995">&#34;245540327e+122&#34;</span><span class="op" id="7848011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848014">&#34;6138508175e+120&#34;</span><span class="op" id="7848031">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848034">&#34;83356057653e+193&#34;</span><span class="op" id="7848052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848055">&#34;619534293513e+124&#34;</span><span class="op" id="7848074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848077">&#34;2335141086879e+218&#34;</span><span class="op" id="7848097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848100">&#34;36167929443327e-159&#34;</span><span class="op" id="7848121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848124">&#34;609610927149051e-255&#34;</span><span class="op" id="7848146">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848149">&#34;3743626360493413e-165&#34;</span><span class="op" id="7848172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848175">&#34;94080055902682397e-242&#34;</span><span class="op" id="7848199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848202">&#34;899810892172646163e+283&#34;</span><span class="op" id="7848227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848230">&#34;7120190517612959703e+120&#34;</span><span class="op" id="7848256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848259">&#34;25188282901709339043e-252&#34;</span><span class="op" id="7848286">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848289">&#34;308984926168550152811e-052&#34;</span><span class="op" id="7848317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848320">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="7848349">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848353">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848423">&#34;5e-20&#34;</span><span class="op" id="7848430">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848433">&#34;67e+14&#34;</span><span class="op" id="7848441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848444">&#34;985e+15&#34;</span><span class="op" id="7848453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848456">&#34;7693e-42&#34;</span><span class="op" id="7848466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848469">&#34;55895e-16&#34;</span><span class="op" id="7848480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848483">&#34;996622e-44&#34;</span><span class="op" id="7848495">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848498">&#34;7038531e-32&#34;</span><span class="op" id="7848511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848514">&#34;60419369e-46&#34;</span><span class="op" id="7848528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848531">&#34;702990899e-20&#34;</span><span class="op" id="7848546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848549">&#34;6930161142e-48&#34;</span><span class="op" id="7848565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848568">&#34;25933168707e+13&#34;</span><span class="op" id="7848585">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848588">&#34;596428896559e+20&#34;</span><span class="op" id="7848606">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848610">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848680">&#34;3e-23&#34;</span><span class="op" id="7848687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848690">&#34;57e+18&#34;</span><span class="op" id="7848698">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848701">&#34;789e-35&#34;</span><span class="op" id="7848710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848713">&#34;2539e-18&#34;</span><span class="op" id="7848723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848726">&#34;76173e+28&#34;</span><span class="op" id="7848737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848740">&#34;887745e-11&#34;</span><span class="op" id="7848752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848755">&#34;5382571e-37&#34;</span><span class="op" id="7848768">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848771">&#34;82381273e-35&#34;</span><span class="op" id="7848785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848788">&#34;750486563e-38&#34;</span><span class="op" id="7848803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848806">&#34;3752432815e-39&#34;</span><span class="op" id="7848822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848825">&#34;75224575729e-45&#34;</span><span class="op" id="7848842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848845">&#34;459926601011e+15&#34;</span><span class="op" id="7848863">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7848867">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848919">&#34;0&#34;</span><span class="op" id="7848922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848925">&#34;1&#34;</span><span class="op" id="7848928">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848931">&#34;+1&#34;</span><span class="op" id="7848935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848938">&#34;1e23&#34;</span><span class="op" id="7848944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848947">&#34;1E23&#34;</span><span class="op" id="7848953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848956">&#34;100000000000000000000000&#34;</span><span class="op" id="7848982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848985">&#34;1e-100&#34;</span><span class="op" id="7848993">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7848996">&#34;123456700&#34;</span><span class="op" id="7849007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849010">&#34;99999999999999974834176&#34;</span><span class="op" id="7849035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849038">&#34;100000000000000000000001&#34;</span><span class="op" id="7849064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849067">&#34;100000000000000008388608&#34;</span><span class="op" id="7849093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849096">&#34;100000000000000016777215&#34;</span><span class="op" id="7849122">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849125">&#34;100000000000000016777216&#34;</span><span class="op" id="7849151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849154">&#34;-1&#34;</span><span class="op" id="7849158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849161">&#34;-0.1&#34;</span><span class="op" id="7849167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849170">&#34;-0&#34;</span><span class="op" id="7849174">,</span>&nbsp;<span class="comment" id="7849176">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849214">&#34;1e-20&#34;</span><span class="op" id="7849221">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849224">&#34;625e-3&#34;</span><span class="op" id="7849232">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849236">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849256">&#34;1.7976931348623157e308&#34;</span><span class="op" id="7849280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849283">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="7849308">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849311">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849340">&#34;1.7976931348623159e308&#34;</span><span class="op" id="7849364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849367">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="7849392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849395">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849423">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849445">&#34;1.7976931348623158e308&#34;</span><span class="op" id="7849469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849472">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="7849497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849500">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849527">&#34;1.797693134862315808e308&#34;</span><span class="op" id="7849553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849556">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="7849583">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849587">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849610">&#34;1e308&#34;</span><span class="op" id="7849617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849620">&#34;2e308&#34;</span><span class="op" id="7849627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849630">&#34;1e309&#34;</span><span class="op" id="7849637">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849641">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849659">&#34;1e310&#34;</span><span class="op" id="7849666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849669">&#34;-1e310&#34;</span><span class="op" id="7849677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849680">&#34;1e400&#34;</span><span class="op" id="7849687">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849690">&#34;-1e400&#34;</span><span class="op" id="7849698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849701">&#34;long:1e400000&#34;</span><span class="op" id="7849716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849719">&#34;long:-1e400000&#34;</span><span class="op" id="7849735">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849739">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849756">&#34;1e-305&#34;</span><span class="op" id="7849764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849767">&#34;1e-306&#34;</span><span class="op" id="7849775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849778">&#34;1e-307&#34;</span><span class="op" id="7849786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849789">&#34;1e-308&#34;</span><span class="op" id="7849797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849800">&#34;1e-309&#34;</span><span class="op" id="7849808">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849811">&#34;1e-310&#34;</span><span class="op" id="7849819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849822">&#34;1e-322&#34;</span><span class="op" id="7849830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849833">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849855">&#34;5e-324&#34;</span><span class="op" id="7849863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849866">&#34;4e-324&#34;</span><span class="op" id="7849874">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849877">&#34;3e-324&#34;</span><span class="op" id="7849885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849888">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849902">&#34;2e-324&#34;</span><span class="op" id="7849910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849913">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849931">&#34;1e-350&#34;</span><span class="op" id="7849939">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849942">&#34;long:1e-400000&#34;</span><span class="op" id="7849958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7849961">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849989">&#34;-1e-350&#34;</span><span class="op" id="7849998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850001">&#34;long:-1e-400000&#34;</span><span class="op" id="7850018">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850022">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850051">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850110">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850131">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850152">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850183">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850215">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850302">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="7850327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850330">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850417">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="7850442">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850446">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850520">&#34;4.630813248087435e+307&#34;</span><span class="op" id="7850544">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850548">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850591">&#34;22.222222222222222&#34;</span><span class="op" id="7850611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850614">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="7850624">+</span>&nbsp;<span class="ident" id="7850626">strings</span><span class="op" id="7850633">.</span><span class="ident" id="7850634">Repeat</span><span class="op" id="7850640">(</span><span class="string" id="7850641">&#34;2&#34;</span><span class="op" id="7850644">,</span>&nbsp;<span class="num" id="7850646">4000</span><span class="op" id="7850650">)</span>&nbsp;<span class="op" id="7850652">+</span>&nbsp;<span class="string" id="7850654">&#34;e+1&#34;</span><span class="op" id="7850659">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850663">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850719">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850745">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="7850802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850805">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850843">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="7850900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850903">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7850934">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="7850991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7850994">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851060">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="7851123">+</span>&nbsp;<span class="ident" id="7851125">strings</span><span class="op" id="7851132">.</span><span class="ident" id="7851133">Repeat</span><span class="op" id="7851139">(</span><span class="string" id="7851140">&#34;0&#34;</span><span class="op" id="7851143">,</span>&nbsp;<span class="num" id="7851145">10000</span><span class="op" id="7851150">)</span>&nbsp;<span class="op" id="7851152">+</span>&nbsp;<span class="string" id="7851154">&#34;1&#34;</span><span class="op" id="7851157">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851161">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851197">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="7851245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851248">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851292">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="7851340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851343">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851402">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851447">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="7851495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851498">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7851566">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851611">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="7851659">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851663">&#34;1152921504606846975&#34;</span><span class="op" id="7851684">,</span>&nbsp;&nbsp;<span class="comment" id="7851687">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851703">&#34;-1152921504606846975&#34;</span><span class="op" id="7851725">,</span>&nbsp;<span class="comment" id="7851727">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851744">&#34;1152921504606846977&#34;</span><span class="op" id="7851765">,</span>&nbsp;&nbsp;<span class="comment" id="7851768">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851784">&#34;-1152921504606846977&#34;</span><span class="op" id="7851806">,</span>&nbsp;<span class="comment" id="7851808">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7851826">&#34;1/3&#34;</span><span class="op" id="7851831">,</span><br>
<span class="lineno"></span><span class="op" id="7851833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7851836">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="7851902">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="7851962">func</span>&nbsp;<span class="ident" id="7851967">isFinite</span><span class="op" id="7851975">(</span><span class="ident" id="7851976">f</span>&nbsp;<span class="builtintype" id="7851978">float64</span><span class="op" id="7851985">)</span>&nbsp;<span class="builtintype" id="7851987">bool</span>&nbsp;<span class="op" id="7851992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851995">return</span>&nbsp;<span class="ident" id="7852002">math</span><span class="op" id="7852006">.</span><span class="ident" id="7852007">Abs</span><span class="op" id="7852010">(</span><span class="ident" id="7852011">f</span><span class="op" id="7852012">)</span>&nbsp;<span class="op" id="7852014">&lt;=</span>&nbsp;<span class="ident" id="7852017">math</span><span class="op" id="7852021">.</span><span class="ident" id="7852022">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="7852033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7852036">func</span>&nbsp;<span class="ident" id="7852041">TestFloat32SpecialCases</span><span class="op" id="7852064">(</span><span class="ident" id="7852065">t</span>&nbsp;<span class="op" id="7852067">*</span><span class="ident" id="7852068">testing</span><span class="op" id="7852075">.</span><span class="ident" id="7852076">T</span><span class="op" id="7852077">)</span>&nbsp;<span class="op" id="7852079">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852082">for</span>&nbsp;<span class="ident" id="7852086">_</span><span class="op" id="7852087">,</span>&nbsp;<span class="ident" id="7852089">input</span>&nbsp;<span class="op" id="7852095">:=</span>&nbsp;<span class="keyword" id="7852098">range</span>&nbsp;<span class="ident" id="7852104">float64inputs</span>&nbsp;<span class="op" id="7852118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852122">if</span>&nbsp;<span class="ident" id="7852125">strings</span><span class="op" id="7852132">.</span><span class="ident" id="7852133">HasPrefix</span><span class="op" id="7852142">(</span><span class="ident" id="7852143">input</span><span class="op" id="7852148">,</span>&nbsp;<span class="string" id="7852150">&#34;long:&#34;</span><span class="op" id="7852157">)</span>&nbsp;<span class="op" id="7852159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852164">if</span>&nbsp;<span class="ident" id="7852167">testing</span><span class="op" id="7852174">.</span><span class="ident" id="7852175">Short</span><span class="op" id="7852180">(</span><span class="op" id="7852181">)</span>&nbsp;<span class="op" id="7852183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852189">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852201">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852206">input</span>&nbsp;<span class="op" id="7852212">=</span>&nbsp;<span class="ident" id="7852214">input</span><span class="op" id="7852219">[</span><span class="builtinfunc" id="7852220">len</span><span class="op" id="7852223">(</span><span class="string" id="7852224">&#34;long:&#34;</span><span class="op" id="7852231">)</span><span class="op" id="7852232">:</span><span class="op" id="7852233">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852242">r</span><span class="op" id="7852243">,</span>&nbsp;<span class="ident" id="7852245">ok</span>&nbsp;<span class="op" id="7852248">:=</span>&nbsp;<span class="builtinfunc" id="7852251">new</span><span class="op" id="7852254">(</span><span class="ident" id="7852255">Rat</span><span class="op" id="7852258">)</span><span class="op" id="7852259">.</span><span class="ident" id="7852260">SetString</span><span class="op" id="7852269">(</span><span class="ident" id="7852270">input</span><span class="op" id="7852275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852279">if</span>&nbsp;<span class="op" id="7852282">!</span><span class="ident" id="7852283">ok</span>&nbsp;<span class="op" id="7852286">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852291">t</span><span class="op" id="7852292">.</span><span class="ident" id="7852293">Errorf</span><span class="op" id="7852299">(</span><span class="string" id="7852300">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7852326">,</span>&nbsp;<span class="ident" id="7852328">input</span><span class="op" id="7852333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852338">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852353">f</span><span class="op" id="7852354">,</span>&nbsp;<span class="ident" id="7852356">exact</span>&nbsp;<span class="op" id="7852362">:=</span>&nbsp;<span class="ident" id="7852365">r</span><span class="op" id="7852366">.</span><span class="ident" id="7852367">Float32</span><span class="op" id="7852374">(</span><span class="op" id="7852375">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852380">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852435">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852476">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852538">if</span>&nbsp;<span class="op" id="7852541">!</span><span class="ident" id="7852542">strings</span><span class="op" id="7852549">.</span><span class="ident" id="7852550">Contains</span><span class="op" id="7852558">(</span><span class="ident" id="7852559">input</span><span class="op" id="7852564">,</span>&nbsp;<span class="string" id="7852566">&#34;/&#34;</span><span class="op" id="7852569">)</span>&nbsp;<span class="op" id="7852571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852576">e64</span><span class="op" id="7852579">,</span>&nbsp;<span class="ident" id="7852581">_</span>&nbsp;<span class="op" id="7852583">:=</span>&nbsp;<span class="ident" id="7852586">strconv</span><span class="op" id="7852593">.</span><span class="ident" id="7852594">ParseFloat</span><span class="op" id="7852604">(</span><span class="ident" id="7852605">input</span><span class="op" id="7852610">,</span>&nbsp;<span class="num" id="7852612">32</span><span class="op" id="7852614">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852619">e</span>&nbsp;<span class="op" id="7852621">:=</span>&nbsp;<span class="builtintype" id="7852624">float32</span><span class="op" id="7852631">(</span><span class="ident" id="7852632">e64</span><span class="op" id="7852635">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852641">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852684">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852734">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852780">switch</span>&nbsp;<span class="op" id="7852787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852792">case</span>&nbsp;<span class="ident" id="7852797">math</span><span class="op" id="7852801">.</span><span class="ident" id="7852802">Float32bits</span><span class="op" id="7852813">(</span><span class="ident" id="7852814">e</span><span class="op" id="7852815">)</span>&nbsp;<span class="op" id="7852817">==</span>&nbsp;<span class="ident" id="7852820">math</span><span class="op" id="7852824">.</span><span class="ident" id="7852825">Float32bits</span><span class="op" id="7852836">(</span><span class="ident" id="7852837">f</span><span class="op" id="7852838">)</span><span class="op" id="7852839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852845">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852870">case</span>&nbsp;<span class="ident" id="7852875">f</span>&nbsp;<span class="op" id="7852877">==</span>&nbsp;<span class="num" id="7852880">0</span>&nbsp;<span class="op" id="7852882">&amp;&amp;</span>&nbsp;<span class="ident" id="7852885">r</span><span class="op" id="7852886">.</span><span class="ident" id="7852887">Num</span><span class="op" id="7852890">(</span><span class="op" id="7852891">)</span><span class="op" id="7852892">.</span><span class="ident" id="7852893">BitLen</span><span class="op" id="7852899">(</span><span class="op" id="7852900">)</span>&nbsp;<span class="op" id="7852902">==</span>&nbsp;<span class="num" id="7852905">0</span><span class="op" id="7852906">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7852912">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852967">default</span><span class="op" id="7852974">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852980">t</span><span class="op" id="7852981">.</span><span class="ident" id="7852982">Errorf</span><span class="op" id="7852988">(</span><span class="string" id="7852989">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7853049">,</span>&nbsp;<span class="ident" id="7853051">input</span><span class="op" id="7853056">,</span>&nbsp;<span class="ident" id="7853058">e</span><span class="op" id="7853059">,</span>&nbsp;<span class="ident" id="7853061">e</span><span class="op" id="7853062">,</span>&nbsp;<span class="ident" id="7853064">f</span><span class="op" id="7853065">,</span>&nbsp;<span class="ident" id="7853067">f</span><span class="op" id="7853068">,</span>&nbsp;<span class="ident" id="7853070">f</span><span class="op" id="7853071">-</span><span class="ident" id="7853072">e</span><span class="op" id="7853073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853087">if</span>&nbsp;<span class="op" id="7853090">!</span><span class="ident" id="7853091">isFinite</span><span class="op" id="7853099">(</span><span class="builtintype" id="7853100">float64</span><span class="op" id="7853107">(</span><span class="ident" id="7853108">f</span><span class="op" id="7853109">)</span><span class="op" id="7853110">)</span>&nbsp;<span class="op" id="7853112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853117">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853133">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853177">if</span>&nbsp;<span class="op" id="7853180">!</span><span class="ident" id="7853181">checkIsBestApprox32</span><span class="op" id="7853200">(</span><span class="ident" id="7853201">t</span><span class="op" id="7853202">,</span>&nbsp;<span class="ident" id="7853204">f</span><span class="op" id="7853205">,</span>&nbsp;<span class="ident" id="7853207">r</span><span class="op" id="7853208">)</span>&nbsp;<span class="op" id="7853210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853215">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853249">t</span><span class="op" id="7853250">.</span><span class="ident" id="7853251">Errorf</span><span class="op" id="7853257">(</span><span class="string" id="7853258">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7853274">,</span>&nbsp;<span class="ident" id="7853276">input</span><span class="op" id="7853281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853290">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853336">checkNonLossyRoundtrip32</span><span class="op" id="7853360">(</span><span class="ident" id="7853361">t</span><span class="op" id="7853362">,</span>&nbsp;<span class="ident" id="7853364">f</span><span class="op" id="7853365">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853370">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853416">if</span>&nbsp;<span class="ident" id="7853419">wasExact</span>&nbsp;<span class="op" id="7853428">:=</span>&nbsp;<span class="builtinfunc" id="7853431">new</span><span class="op" id="7853434">(</span><span class="ident" id="7853435">Rat</span><span class="op" id="7853438">)</span><span class="op" id="7853439">.</span><span class="ident" id="7853440">SetFloat64</span><span class="op" id="7853450">(</span><span class="builtintype" id="7853451">float64</span><span class="op" id="7853458">(</span><span class="ident" id="7853459">f</span><span class="op" id="7853460">)</span><span class="op" id="7853461">)</span><span class="op" id="7853462">.</span><span class="ident" id="7853463">Cmp</span><span class="op" id="7853466">(</span><span class="ident" id="7853467">r</span><span class="op" id="7853468">)</span>&nbsp;<span class="op" id="7853470">==</span>&nbsp;<span class="num" id="7853473">0</span><span class="op" id="7853474">;</span>&nbsp;<span class="ident" id="7853476">wasExact</span>&nbsp;<span class="op" id="7853485">!=</span>&nbsp;<span class="ident" id="7853488">exact</span>&nbsp;<span class="op" id="7853494">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853499">t</span><span class="op" id="7853500">.</span><span class="ident" id="7853501">Errorf</span><span class="op" id="7853507">(</span><span class="string" id="7853508">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7853557">,</span>&nbsp;<span class="ident" id="7853559">input</span><span class="op" id="7853564">,</span>&nbsp;<span class="ident" id="7853566">exact</span><span class="op" id="7853571">,</span>&nbsp;<span class="ident" id="7853573">wasExact</span><span class="op" id="7853581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853588">}</span><br>
<span class="lineno"></span><span class="op" id="7853590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="7853593">func</span>&nbsp;<span class="ident" id="7853598">TestFloat64SpecialCases</span><span class="op" id="7853621">(</span><span class="ident" id="7853622">t</span>&nbsp;<span class="op" id="7853624">*</span><span class="ident" id="7853625">testing</span><span class="op" id="7853632">.</span><span class="ident" id="7853633">T</span><span class="op" id="7853634">)</span>&nbsp;<span class="op" id="7853636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853639">for</span>&nbsp;<span class="ident" id="7853643">_</span><span class="op" id="7853644">,</span>&nbsp;<span class="ident" id="7853646">input</span>&nbsp;<span class="op" id="7853652">:=</span>&nbsp;<span class="keyword" id="7853655">range</span>&nbsp;<span class="ident" id="7853661">float64inputs</span>&nbsp;<span class="op" id="7853675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853679">if</span>&nbsp;<span class="ident" id="7853682">strings</span><span class="op" id="7853689">.</span><span class="ident" id="7853690">HasPrefix</span><span class="op" id="7853699">(</span><span class="ident" id="7853700">input</span><span class="op" id="7853705">,</span>&nbsp;<span class="string" id="7853707">&#34;long:&#34;</span><span class="op" id="7853714">)</span>&nbsp;<span class="op" id="7853716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853721">if</span>&nbsp;<span class="ident" id="7853724">testing</span><span class="op" id="7853731">.</span><span class="ident" id="7853732">Short</span><span class="op" id="7853737">(</span><span class="op" id="7853738">)</span>&nbsp;<span class="op" id="7853740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853746">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853763">input</span>&nbsp;<span class="op" id="7853769">=</span>&nbsp;<span class="ident" id="7853771">input</span><span class="op" id="7853776">[</span><span class="builtinfunc" id="7853777">len</span><span class="op" id="7853780">(</span><span class="string" id="7853781">&#34;long:&#34;</span><span class="op" id="7853788">)</span><span class="op" id="7853789">:</span><span class="op" id="7853790">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853799">r</span><span class="op" id="7853800">,</span>&nbsp;<span class="ident" id="7853802">ok</span>&nbsp;<span class="op" id="7853805">:=</span>&nbsp;<span class="builtinfunc" id="7853808">new</span><span class="op" id="7853811">(</span><span class="ident" id="7853812">Rat</span><span class="op" id="7853815">)</span><span class="op" id="7853816">.</span><span class="ident" id="7853817">SetString</span><span class="op" id="7853826">(</span><span class="ident" id="7853827">input</span><span class="op" id="7853832">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853836">if</span>&nbsp;<span class="op" id="7853839">!</span><span class="ident" id="7853840">ok</span>&nbsp;<span class="op" id="7853843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853848">t</span><span class="op" id="7853849">.</span><span class="ident" id="7853850">Errorf</span><span class="op" id="7853856">(</span><span class="string" id="7853857">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7853883">,</span>&nbsp;<span class="ident" id="7853885">input</span><span class="op" id="7853890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853895">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853910">f</span><span class="op" id="7853911">,</span>&nbsp;<span class="ident" id="7853913">exact</span>&nbsp;<span class="op" id="7853919">:=</span>&nbsp;<span class="ident" id="7853922">r</span><span class="op" id="7853923">.</span><span class="ident" id="7853924">Float64</span><span class="op" id="7853931">(</span><span class="op" id="7853932">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853937">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853992">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854033">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854095">if</span>&nbsp;<span class="op" id="7854098">!</span><span class="ident" id="7854099">strings</span><span class="op" id="7854106">.</span><span class="ident" id="7854107">Contains</span><span class="op" id="7854115">(</span><span class="ident" id="7854116">input</span><span class="op" id="7854121">,</span>&nbsp;<span class="string" id="7854123">&#34;/&#34;</span><span class="op" id="7854126">)</span>&nbsp;<span class="op" id="7854128">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854133">e</span><span class="op" id="7854134">,</span>&nbsp;<span class="ident" id="7854136">_</span>&nbsp;<span class="op" id="7854138">:=</span>&nbsp;<span class="ident" id="7854141">strconv</span><span class="op" id="7854148">.</span><span class="ident" id="7854149">ParseFloat</span><span class="op" id="7854159">(</span><span class="ident" id="7854160">input</span><span class="op" id="7854165">,</span>&nbsp;<span class="num" id="7854167">64</span><span class="op" id="7854169">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854175">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854218">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854268">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854314">switch</span>&nbsp;<span class="op" id="7854321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854326">case</span>&nbsp;<span class="ident" id="7854331">math</span><span class="op" id="7854335">.</span><span class="ident" id="7854336">Float64bits</span><span class="op" id="7854347">(</span><span class="ident" id="7854348">e</span><span class="op" id="7854349">)</span>&nbsp;<span class="op" id="7854351">==</span>&nbsp;<span class="ident" id="7854354">math</span><span class="op" id="7854358">.</span><span class="ident" id="7854359">Float64bits</span><span class="op" id="7854370">(</span><span class="ident" id="7854371">f</span><span class="op" id="7854372">)</span><span class="op" id="7854373">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854379">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854404">case</span>&nbsp;<span class="ident" id="7854409">f</span>&nbsp;<span class="op" id="7854411">==</span>&nbsp;<span class="num" id="7854414">0</span>&nbsp;<span class="op" id="7854416">&amp;&amp;</span>&nbsp;<span class="ident" id="7854419">r</span><span class="op" id="7854420">.</span><span class="ident" id="7854421">Num</span><span class="op" id="7854424">(</span><span class="op" id="7854425">)</span><span class="op" id="7854426">.</span><span class="ident" id="7854427">BitLen</span><span class="op" id="7854433">(</span><span class="op" id="7854434">)</span>&nbsp;<span class="op" id="7854436">==</span>&nbsp;<span class="num" id="7854439">0</span><span class="op" id="7854440">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854446">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854501">default</span><span class="op" id="7854508">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854514">t</span><span class="op" id="7854515">.</span><span class="ident" id="7854516">Errorf</span><span class="op" id="7854522">(</span><span class="string" id="7854523">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7854583">,</span>&nbsp;<span class="ident" id="7854585">input</span><span class="op" id="7854590">,</span>&nbsp;<span class="ident" id="7854592">e</span><span class="op" id="7854593">,</span>&nbsp;<span class="ident" id="7854595">e</span><span class="op" id="7854596">,</span>&nbsp;<span class="ident" id="7854598">f</span><span class="op" id="7854599">,</span>&nbsp;<span class="ident" id="7854601">f</span><span class="op" id="7854602">,</span>&nbsp;<span class="ident" id="7854604">f</span><span class="op" id="7854605">-</span><span class="ident" id="7854606">e</span><span class="op" id="7854607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854621">if</span>&nbsp;<span class="op" id="7854624">!</span><span class="ident" id="7854625">isFinite</span><span class="op" id="7854633">(</span><span class="ident" id="7854634">f</span><span class="op" id="7854635">)</span>&nbsp;<span class="op" id="7854637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854642">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854658">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854702">if</span>&nbsp;<span class="op" id="7854705">!</span><span class="ident" id="7854706">checkIsBestApprox64</span><span class="op" id="7854725">(</span><span class="ident" id="7854726">t</span><span class="op" id="7854727">,</span>&nbsp;<span class="ident" id="7854729">f</span><span class="op" id="7854730">,</span>&nbsp;<span class="ident" id="7854732">r</span><span class="op" id="7854733">)</span>&nbsp;<span class="op" id="7854735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854740">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854774">t</span><span class="op" id="7854775">.</span><span class="ident" id="7854776">Errorf</span><span class="op" id="7854782">(</span><span class="string" id="7854783">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7854799">,</span>&nbsp;<span class="ident" id="7854801">input</span><span class="op" id="7854806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854815">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854861">checkNonLossyRoundtrip64</span><span class="op" id="7854885">(</span><span class="ident" id="7854886">t</span><span class="op" id="7854887">,</span>&nbsp;<span class="ident" id="7854889">f</span><span class="op" id="7854890">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854895">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854941">if</span>&nbsp;<span class="ident" id="7854944">wasExact</span>&nbsp;<span class="op" id="7854953">:=</span>&nbsp;<span class="builtinfunc" id="7854956">new</span><span class="op" id="7854959">(</span><span class="ident" id="7854960">Rat</span><span class="op" id="7854963">)</span><span class="op" id="7854964">.</span><span class="ident" id="7854965">SetFloat64</span><span class="op" id="7854975">(</span><span class="ident" id="7854976">f</span><span class="op" id="7854977">)</span><span class="op" id="7854978">.</span><span class="ident" id="7854979">Cmp</span><span class="op" id="7854982">(</span><span class="ident" id="7854983">r</span><span class="op" id="7854984">)</span>&nbsp;<span class="op" id="7854986">==</span>&nbsp;<span class="num" id="7854989">0</span><span class="op" id="7854990">;</span>&nbsp;<span class="ident" id="7854992">wasExact</span>&nbsp;<span class="op" id="7855001">!=</span>&nbsp;<span class="ident" id="7855004">exact</span>&nbsp;<span class="op" id="7855010">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855015">t</span><span class="op" id="7855016">.</span><span class="ident" id="7855017">Errorf</span><span class="op" id="7855023">(</span><span class="string" id="7855024">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7855073">,</span>&nbsp;<span class="ident" id="7855075">input</span><span class="op" id="7855080">,</span>&nbsp;<span class="ident" id="7855082">exact</span><span class="op" id="7855087">,</span>&nbsp;<span class="ident" id="7855089">wasExact</span><span class="op" id="7855097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855104">}</span><br>
<span class="lineno"></span><span class="op" id="7855106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7855109">func</span>&nbsp;<span class="ident" id="7855114">TestFloat32Distribution</span><span class="op" id="7855137">(</span><span class="ident" id="7855138">t</span>&nbsp;<span class="op" id="7855140">*</span><span class="ident" id="7855141">testing</span><span class="op" id="7855148">.</span><span class="ident" id="7855149">T</span><span class="op" id="7855150">)</span>&nbsp;<span class="op" id="7855152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7855155">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7855215">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7855275">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855327">var</span>&nbsp;<span class="ident" id="7855331">add</span>&nbsp;<span class="op" id="7855335">=</span>&nbsp;<span class="op" id="7855337">[</span><span class="op" id="7855338">]</span><span class="ident" id="7855339">int64</span><span class="op" id="7855344">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855348">0</span><span class="op" id="7855349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855353">1</span><span class="op" id="7855354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855358">3</span><span class="op" id="7855359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855363">5</span><span class="op" id="7855364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855368">7</span><span class="op" id="7855369">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855373">9</span><span class="op" id="7855374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7855378">11</span><span class="op" id="7855380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855386">var</span>&nbsp;<span class="ident" id="7855390">winc</span><span class="op" id="7855394">,</span>&nbsp;<span class="ident" id="7855396">einc</span>&nbsp;<span class="op" id="7855401">=</span>&nbsp;<span class="ident" id="7855403">uint64</span><span class="op" id="7855409">(</span><span class="num" id="7855410">1</span><span class="op" id="7855411">)</span><span class="op" id="7855412">,</span>&nbsp;<span class="num" id="7855414">1</span>&nbsp;<span class="comment" id="7855416">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855448">if</span>&nbsp;<span class="ident" id="7855451">testing</span><span class="op" id="7855458">.</span><span class="ident" id="7855459">Short</span><span class="op" id="7855464">(</span><span class="op" id="7855465">)</span>&nbsp;<span class="op" id="7855467">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855471">winc</span><span class="op" id="7855475">,</span>&nbsp;<span class="ident" id="7855477">einc</span>&nbsp;<span class="op" id="7855482">=</span>&nbsp;<span class="num" id="7855484">5</span><span class="op" id="7855485">,</span>&nbsp;<span class="num" id="7855487">15</span>&nbsp;<span class="comment" id="7855490">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855527">for</span>&nbsp;<span class="ident" id="7855531">_</span><span class="op" id="7855532">,</span>&nbsp;<span class="ident" id="7855534">sign</span>&nbsp;<span class="op" id="7855539">:=</span>&nbsp;<span class="keyword" id="7855542">range</span>&nbsp;<span class="string" id="7855548">&#34;+-&#34;</span>&nbsp;<span class="op" id="7855553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855557">for</span>&nbsp;<span class="ident" id="7855561">_</span><span class="op" id="7855562">,</span>&nbsp;<span class="ident" id="7855564">a</span>&nbsp;<span class="op" id="7855566">:=</span>&nbsp;<span class="keyword" id="7855569">range</span>&nbsp;<span class="ident" id="7855575">add</span>&nbsp;<span class="op" id="7855579">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855584">for</span>&nbsp;<span class="ident" id="7855588">wid</span>&nbsp;<span class="op" id="7855592">:=</span>&nbsp;<span class="ident" id="7855595">uint64</span><span class="op" id="7855601">(</span><span class="num" id="7855602">0</span><span class="op" id="7855603">)</span><span class="op" id="7855604">;</span>&nbsp;<span class="ident" id="7855606">wid</span>&nbsp;<span class="op" id="7855610">&lt;</span>&nbsp;<span class="num" id="7855612">30</span><span class="op" id="7855614">;</span>&nbsp;<span class="ident" id="7855616">wid</span>&nbsp;<span class="op" id="7855620">+=</span>&nbsp;<span class="ident" id="7855623">winc</span>&nbsp;<span class="op" id="7855628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855634">b</span>&nbsp;<span class="op" id="7855636">:=</span>&nbsp;<span class="num" id="7855639">1</span><span class="op" id="7855640">&lt;&lt;</span><span class="ident" id="7855642">wid</span>&nbsp;<span class="op" id="7855646">+</span>&nbsp;<span class="ident" id="7855648">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855654">if</span>&nbsp;<span class="ident" id="7855657">sign</span>&nbsp;<span class="op" id="7855662">==</span>&nbsp;<span class="string" id="7855665">&#39;-&#39;</span>&nbsp;<span class="op" id="7855669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855676">b</span>&nbsp;<span class="op" id="7855678">=</span>&nbsp;<span class="op" id="7855680">-</span><span class="ident" id="7855681">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855687">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855693">for</span>&nbsp;<span class="ident" id="7855697">exp</span>&nbsp;<span class="op" id="7855701">:=</span>&nbsp;<span class="op" id="7855704">-</span><span class="num" id="7855705">150</span><span class="op" id="7855708">;</span>&nbsp;<span class="ident" id="7855710">exp</span>&nbsp;<span class="op" id="7855714">&lt;</span>&nbsp;<span class="num" id="7855716">150</span><span class="op" id="7855719">;</span>&nbsp;<span class="ident" id="7855721">exp</span>&nbsp;<span class="op" id="7855725">+=</span>&nbsp;<span class="ident" id="7855728">einc</span>&nbsp;<span class="op" id="7855733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855740">num</span><span class="op" id="7855743">,</span>&nbsp;<span class="ident" id="7855745">den</span>&nbsp;<span class="op" id="7855749">:=</span>&nbsp;<span class="ident" id="7855752">NewInt</span><span class="op" id="7855758">(</span><span class="ident" id="7855759">b</span><span class="op" id="7855760">)</span><span class="op" id="7855761">,</span>&nbsp;<span class="ident" id="7855763">NewInt</span><span class="op" id="7855769">(</span><span class="num" id="7855770">1</span><span class="op" id="7855771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855778">if</span>&nbsp;<span class="ident" id="7855781">exp</span>&nbsp;<span class="op" id="7855785">&gt;</span>&nbsp;<span class="num" id="7855787">0</span>&nbsp;<span class="op" id="7855789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855797">num</span><span class="op" id="7855800">.</span><span class="ident" id="7855801">Lsh</span><span class="op" id="7855804">(</span><span class="ident" id="7855805">num</span><span class="op" id="7855808">,</span>&nbsp;<span class="builtintype" id="7855810">uint</span><span class="op" id="7855814">(</span><span class="ident" id="7855815">exp</span><span class="op" id="7855818">)</span><span class="op" id="7855819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855826">}</span>&nbsp;<span class="keyword" id="7855828">else</span>&nbsp;<span class="op" id="7855833">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855841">den</span><span class="op" id="7855844">.</span><span class="ident" id="7855845">Lsh</span><span class="op" id="7855848">(</span><span class="ident" id="7855849">den</span><span class="op" id="7855852">,</span>&nbsp;<span class="builtintype" id="7855854">uint</span><span class="op" id="7855858">(</span><span class="op" id="7855859">-</span><span class="ident" id="7855860">exp</span><span class="op" id="7855863">)</span><span class="op" id="7855864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7855871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855878">r</span>&nbsp;<span class="op" id="7855880">:=</span>&nbsp;<span class="builtinfunc" id="7855883">new</span><span class="op" id="7855886">(</span><span class="ident" id="7855887">Rat</span><span class="op" id="7855890">)</span><span class="op" id="7855891">.</span><span class="ident" id="7855892">SetFrac</span><span class="op" id="7855899">(</span><span class="ident" id="7855900">num</span><span class="op" id="7855903">,</span>&nbsp;<span class="ident" id="7855905">den</span><span class="op" id="7855908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7855915">f</span><span class="op" id="7855916">,</span>&nbsp;<span class="ident" id="7855918">_</span>&nbsp;<span class="op" id="7855920">:=</span>&nbsp;<span class="ident" id="7855923">r</span><span class="op" id="7855924">.</span><span class="ident" id="7855925">Float32</span><span class="op" id="7855932">(</span><span class="op" id="7855933">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7855941">if</span>&nbsp;<span class="op" id="7855944">!</span><span class="ident" id="7855945">checkIsBestApprox32</span><span class="op" id="7855964">(</span><span class="ident" id="7855965">t</span><span class="op" id="7855966">,</span>&nbsp;<span class="ident" id="7855968">f</span><span class="op" id="7855969">,</span>&nbsp;<span class="ident" id="7855971">r</span><span class="op" id="7855972">)</span>&nbsp;<span class="op" id="7855974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7855982">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856019">t</span><span class="op" id="7856020">.</span><span class="ident" id="7856021">Errorf</span><span class="op" id="7856027">(</span><span class="string" id="7856028">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7856091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856100">b</span><span class="op" id="7856101">,</span>&nbsp;<span class="ident" id="7856103">exp</span><span class="op" id="7856106">,</span>&nbsp;<span class="ident" id="7856108">f</span><span class="op" id="7856109">,</span>&nbsp;<span class="ident" id="7856111">f</span><span class="op" id="7856112">,</span>&nbsp;<span class="ident" id="7856114">math</span><span class="op" id="7856118">.</span><span class="ident" id="7856119">Ldexp</span><span class="op" id="7856124">(</span><span class="builtintype" id="7856125">float64</span><span class="op" id="7856132">(</span><span class="ident" id="7856133">b</span><span class="op" id="7856134">)</span><span class="op" id="7856135">,</span>&nbsp;<span class="ident" id="7856137">exp</span><span class="op" id="7856140">)</span><span class="op" id="7856141">,</span>&nbsp;<span class="ident" id="7856143">r</span><span class="op" id="7856144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856151">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856159">checkNonLossyRoundtrip32</span><span class="op" id="7856183">(</span><span class="ident" id="7856184">t</span><span class="op" id="7856185">,</span>&nbsp;<span class="ident" id="7856187">f</span><span class="op" id="7856188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856203">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856206">}</span><br>
<span class="lineno"></span><span class="op" id="7856208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7856211">func</span>&nbsp;<span class="ident" id="7856216">TestFloat64Distribution</span><span class="op" id="7856239">(</span><span class="ident" id="7856240">t</span>&nbsp;<span class="op" id="7856242">*</span><span class="ident" id="7856243">testing</span><span class="op" id="7856250">.</span><span class="ident" id="7856251">T</span><span class="op" id="7856252">)</span>&nbsp;<span class="op" id="7856254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7856257">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7856317">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7856377">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856429">var</span>&nbsp;<span class="ident" id="7856433">add</span>&nbsp;<span class="op" id="7856437">=</span>&nbsp;<span class="op" id="7856439">[</span><span class="op" id="7856440">]</span><span class="ident" id="7856441">int64</span><span class="op" id="7856446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7856450">0</span><span class="op" id="7856451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7856455">1</span><span class="op" id="7856456">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7856460">3</span><span class="op" id="7856461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7856465">5</span><span class="op" id="7856466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7856470">7</span><span class="op" id="7856471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7856475">9</span><span class="op" id="7856476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7856480">11</span><span class="op" id="7856482">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856488">var</span>&nbsp;<span class="ident" id="7856492">winc</span><span class="op" id="7856496">,</span>&nbsp;<span class="ident" id="7856498">einc</span>&nbsp;<span class="op" id="7856503">=</span>&nbsp;<span class="ident" id="7856505">uint64</span><span class="op" id="7856511">(</span><span class="num" id="7856512">1</span><span class="op" id="7856513">)</span><span class="op" id="7856514">,</span>&nbsp;<span class="num" id="7856516">1</span>&nbsp;<span class="comment" id="7856518">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856549">if</span>&nbsp;<span class="ident" id="7856552">testing</span><span class="op" id="7856559">.</span><span class="ident" id="7856560">Short</span><span class="op" id="7856565">(</span><span class="op" id="7856566">)</span>&nbsp;<span class="op" id="7856568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856572">winc</span><span class="op" id="7856576">,</span>&nbsp;<span class="ident" id="7856578">einc</span>&nbsp;<span class="op" id="7856583">=</span>&nbsp;<span class="num" id="7856585">10</span><span class="op" id="7856587">,</span>&nbsp;<span class="num" id="7856589">500</span>&nbsp;<span class="comment" id="7856593">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856626">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856630">for</span>&nbsp;<span class="ident" id="7856634">_</span><span class="op" id="7856635">,</span>&nbsp;<span class="ident" id="7856637">sign</span>&nbsp;<span class="op" id="7856642">:=</span>&nbsp;<span class="keyword" id="7856645">range</span>&nbsp;<span class="string" id="7856651">&#34;+-&#34;</span>&nbsp;<span class="op" id="7856656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856660">for</span>&nbsp;<span class="ident" id="7856664">_</span><span class="op" id="7856665">,</span>&nbsp;<span class="ident" id="7856667">a</span>&nbsp;<span class="op" id="7856669">:=</span>&nbsp;<span class="keyword" id="7856672">range</span>&nbsp;<span class="ident" id="7856678">add</span>&nbsp;<span class="op" id="7856682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856687">for</span>&nbsp;<span class="ident" id="7856691">wid</span>&nbsp;<span class="op" id="7856695">:=</span>&nbsp;<span class="ident" id="7856698">uint64</span><span class="op" id="7856704">(</span><span class="num" id="7856705">0</span><span class="op" id="7856706">)</span><span class="op" id="7856707">;</span>&nbsp;<span class="ident" id="7856709">wid</span>&nbsp;<span class="op" id="7856713">&lt;</span>&nbsp;<span class="num" id="7856715">60</span><span class="op" id="7856717">;</span>&nbsp;<span class="ident" id="7856719">wid</span>&nbsp;<span class="op" id="7856723">+=</span>&nbsp;<span class="ident" id="7856726">winc</span>&nbsp;<span class="op" id="7856731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856737">b</span>&nbsp;<span class="op" id="7856739">:=</span>&nbsp;<span class="num" id="7856742">1</span><span class="op" id="7856743">&lt;&lt;</span><span class="ident" id="7856745">wid</span>&nbsp;<span class="op" id="7856749">+</span>&nbsp;<span class="ident" id="7856751">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856757">if</span>&nbsp;<span class="ident" id="7856760">sign</span>&nbsp;<span class="op" id="7856765">==</span>&nbsp;<span class="string" id="7856768">&#39;-&#39;</span>&nbsp;<span class="op" id="7856772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856779">b</span>&nbsp;<span class="op" id="7856781">=</span>&nbsp;<span class="op" id="7856783">-</span><span class="ident" id="7856784">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856796">for</span>&nbsp;<span class="ident" id="7856800">exp</span>&nbsp;<span class="op" id="7856804">:=</span>&nbsp;<span class="op" id="7856807">-</span><span class="num" id="7856808">1100</span><span class="op" id="7856812">;</span>&nbsp;<span class="ident" id="7856814">exp</span>&nbsp;<span class="op" id="7856818">&lt;</span>&nbsp;<span class="num" id="7856820">1100</span><span class="op" id="7856824">;</span>&nbsp;<span class="ident" id="7856826">exp</span>&nbsp;<span class="op" id="7856830">+=</span>&nbsp;<span class="ident" id="7856833">einc</span>&nbsp;<span class="op" id="7856838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856845">num</span><span class="op" id="7856848">,</span>&nbsp;<span class="ident" id="7856850">den</span>&nbsp;<span class="op" id="7856854">:=</span>&nbsp;<span class="ident" id="7856857">NewInt</span><span class="op" id="7856863">(</span><span class="ident" id="7856864">b</span><span class="op" id="7856865">)</span><span class="op" id="7856866">,</span>&nbsp;<span class="ident" id="7856868">NewInt</span><span class="op" id="7856874">(</span><span class="num" id="7856875">1</span><span class="op" id="7856876">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7856883">if</span>&nbsp;<span class="ident" id="7856886">exp</span>&nbsp;<span class="op" id="7856890">&gt;</span>&nbsp;<span class="num" id="7856892">0</span>&nbsp;<span class="op" id="7856894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856902">num</span><span class="op" id="7856905">.</span><span class="ident" id="7856906">Lsh</span><span class="op" id="7856909">(</span><span class="ident" id="7856910">num</span><span class="op" id="7856913">,</span>&nbsp;<span class="builtintype" id="7856915">uint</span><span class="op" id="7856919">(</span><span class="ident" id="7856920">exp</span><span class="op" id="7856923">)</span><span class="op" id="7856924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856931">}</span>&nbsp;<span class="keyword" id="7856933">else</span>&nbsp;<span class="op" id="7856938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856946">den</span><span class="op" id="7856949">.</span><span class="ident" id="7856950">Lsh</span><span class="op" id="7856953">(</span><span class="ident" id="7856954">den</span><span class="op" id="7856957">,</span>&nbsp;<span class="builtintype" id="7856959">uint</span><span class="op" id="7856963">(</span><span class="op" id="7856964">-</span><span class="ident" id="7856965">exp</span><span class="op" id="7856968">)</span><span class="op" id="7856969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7856976">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7856983">r</span>&nbsp;<span class="op" id="7856985">:=</span>&nbsp;<span class="builtinfunc" id="7856988">new</span><span class="op" id="7856991">(</span><span class="ident" id="7856992">Rat</span><span class="op" id="7856995">)</span><span class="op" id="7856996">.</span><span class="ident" id="7856997">SetFrac</span><span class="op" id="7857004">(</span><span class="ident" id="7857005">num</span><span class="op" id="7857008">,</span>&nbsp;<span class="ident" id="7857010">den</span><span class="op" id="7857013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857020">f</span><span class="op" id="7857021">,</span>&nbsp;<span class="ident" id="7857023">_</span>&nbsp;<span class="op" id="7857025">:=</span>&nbsp;<span class="ident" id="7857028">r</span><span class="op" id="7857029">.</span><span class="ident" id="7857030">Float64</span><span class="op" id="7857037">(</span><span class="op" id="7857038">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857046">if</span>&nbsp;<span class="op" id="7857049">!</span><span class="ident" id="7857050">checkIsBestApprox64</span><span class="op" id="7857069">(</span><span class="ident" id="7857070">t</span><span class="op" id="7857071">,</span>&nbsp;<span class="ident" id="7857073">f</span><span class="op" id="7857074">,</span>&nbsp;<span class="ident" id="7857076">r</span><span class="op" id="7857077">)</span>&nbsp;<span class="op" id="7857079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7857087">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857124">t</span><span class="op" id="7857125">.</span><span class="ident" id="7857126">Errorf</span><span class="op" id="7857132">(</span><span class="string" id="7857133">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7857196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857205">b</span><span class="op" id="7857206">,</span>&nbsp;<span class="ident" id="7857208">exp</span><span class="op" id="7857211">,</span>&nbsp;<span class="ident" id="7857213">f</span><span class="op" id="7857214">,</span>&nbsp;<span class="ident" id="7857216">f</span><span class="op" id="7857217">,</span>&nbsp;<span class="ident" id="7857219">math</span><span class="op" id="7857223">.</span><span class="ident" id="7857224">Ldexp</span><span class="op" id="7857229">(</span><span class="builtintype" id="7857230">float64</span><span class="op" id="7857237">(</span><span class="ident" id="7857238">b</span><span class="op" id="7857239">)</span><span class="op" id="7857240">,</span>&nbsp;<span class="ident" id="7857242">exp</span><span class="op" id="7857245">)</span><span class="op" id="7857246">,</span>&nbsp;<span class="ident" id="7857248">r</span><span class="op" id="7857249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857264">checkNonLossyRoundtrip64</span><span class="op" id="7857288">(</span><span class="ident" id="7857289">t</span><span class="op" id="7857290">,</span>&nbsp;<span class="ident" id="7857292">f</span><span class="op" id="7857293">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857311">}</span><br>
<span class="lineno"></span><span class="op" id="7857313">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7857316">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7857388">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7857404">func</span>&nbsp;<span class="ident" id="7857409">TestSetFloat64NonFinite</span><span class="op" id="7857432">(</span><span class="ident" id="7857433">t</span>&nbsp;<span class="op" id="7857435">*</span><span class="ident" id="7857436">testing</span><span class="op" id="7857443">.</span><span class="ident" id="7857444">T</span><span class="op" id="7857445">)</span>&nbsp;<span class="op" id="7857447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857450">for</span>&nbsp;<span class="ident" id="7857454">_</span><span class="op" id="7857455">,</span>&nbsp;<span class="ident" id="7857457">f</span>&nbsp;<span class="op" id="7857459">:=</span>&nbsp;<span class="keyword" id="7857462">range</span>&nbsp;<span class="op" id="7857468">[</span><span class="op" id="7857469">]</span><span class="builtintype" id="7857470">float64</span><span class="op" id="7857477">{</span><span class="ident" id="7857478">math</span><span class="op" id="7857482">.</span><span class="ident" id="7857483">NaN</span><span class="op" id="7857486">(</span><span class="op" id="7857487">)</span><span class="op" id="7857488">,</span>&nbsp;<span class="ident" id="7857490">math</span><span class="op" id="7857494">.</span><span class="ident" id="7857495">Inf</span><span class="op" id="7857498">(</span><span class="op" id="7857499">+</span><span class="num" id="7857500">1</span><span class="op" id="7857501">)</span><span class="op" id="7857502">,</span>&nbsp;<span class="ident" id="7857504">math</span><span class="op" id="7857508">.</span><span class="ident" id="7857509">Inf</span><span class="op" id="7857512">(</span><span class="op" id="7857513">-</span><span class="num" id="7857514">1</span><span class="op" id="7857515">)</span><span class="op" id="7857516">}</span>&nbsp;<span class="op" id="7857518">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857522">var</span>&nbsp;<span class="ident" id="7857526">r</span>&nbsp;<span class="ident" id="7857528">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857534">if</span>&nbsp;<span class="ident" id="7857537">r2</span>&nbsp;<span class="op" id="7857540">:=</span>&nbsp;<span class="ident" id="7857543">r</span><span class="op" id="7857544">.</span><span class="ident" id="7857545">SetFloat64</span><span class="op" id="7857555">(</span><span class="ident" id="7857556">f</span><span class="op" id="7857557">)</span><span class="op" id="7857558">;</span>&nbsp;<span class="ident" id="7857560">r2</span>&nbsp;<span class="op" id="7857563">!=</span>&nbsp;<span class="ident" id="7857566">nil</span>&nbsp;<span class="op" id="7857570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857575">t</span><span class="op" id="7857576">.</span><span class="ident" id="7857577">Errorf</span><span class="op" id="7857583">(</span><span class="string" id="7857584">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7857617">,</span>&nbsp;<span class="ident" id="7857619">f</span><span class="op" id="7857620">,</span>&nbsp;<span class="ident" id="7857622">r2</span><span class="op" id="7857624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857631">}</span><br>
<span class="lineno">1015</span><span class="op" id="7857633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7857636">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7857709">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7857736">func</span>&nbsp;<span class="ident" id="7857741">checkNonLossyRoundtrip32</span><span class="op" id="7857765">(</span><span class="ident" id="7857766">t</span>&nbsp;<span class="op" id="7857768">*</span><span class="ident" id="7857769">testing</span><span class="op" id="7857776">.</span><span class="ident" id="7857777">T</span><span class="op" id="7857778">,</span>&nbsp;<span class="ident" id="7857780">f</span>&nbsp;<span class="builtintype" id="7857782">float32</span><span class="op" id="7857789">)</span>&nbsp;<span class="op" id="7857791">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857794">if</span>&nbsp;<span class="op" id="7857797">!</span><span class="ident" id="7857798">isFinite</span><span class="op" id="7857806">(</span><span class="builtintype" id="7857807">float64</span><span class="op" id="7857814">(</span><span class="ident" id="7857815">f</span><span class="op" id="7857816">)</span><span class="op" id="7857817">)</span>&nbsp;<span class="op" id="7857819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857823">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857834">r</span>&nbsp;<span class="op" id="7857836">:=</span>&nbsp;<span class="builtinfunc" id="7857839">new</span><span class="op" id="7857842">(</span><span class="ident" id="7857843">Rat</span><span class="op" id="7857846">)</span><span class="op" id="7857847">.</span><span class="ident" id="7857848">SetFloat64</span><span class="op" id="7857858">(</span><span class="builtintype" id="7857859">float64</span><span class="op" id="7857866">(</span><span class="ident" id="7857867">f</span><span class="op" id="7857868">)</span><span class="op" id="7857869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857872">if</span>&nbsp;<span class="ident" id="7857875">r</span>&nbsp;<span class="op" id="7857877">==</span>&nbsp;<span class="ident" id="7857880">nil</span>&nbsp;<span class="op" id="7857884">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857888">t</span><span class="op" id="7857889">.</span><span class="ident" id="7857890">Errorf</span><span class="op" id="7857896">(</span><span class="string" id="7857897">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7857938">,</span>&nbsp;<span class="ident" id="7857940">f</span><span class="op" id="7857941">,</span>&nbsp;<span class="ident" id="7857943">f</span><span class="op" id="7857944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857948">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7857956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7857959">f2</span><span class="op" id="7857961">,</span>&nbsp;<span class="ident" id="7857963">exact</span>&nbsp;<span class="op" id="7857969">:=</span>&nbsp;<span class="ident" id="7857972">r</span><span class="op" id="7857973">.</span><span class="ident" id="7857974">Float32</span><span class="op" id="7857981">(</span><span class="op" id="7857982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7857985">if</span>&nbsp;<span class="ident" id="7857988">f</span>&nbsp;<span class="op" id="7857990">!=</span>&nbsp;<span class="ident" id="7857993">f2</span>&nbsp;<span class="op" id="7857996">||</span>&nbsp;<span class="op" id="7857999">!</span><span class="ident" id="7858000">exact</span>&nbsp;<span class="op" id="7858006">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858010">t</span><span class="op" id="7858011">.</span><span class="ident" id="7858012">Errorf</span><span class="op" id="7858018">(</span><span class="string" id="7858019">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7858102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858107">f</span><span class="op" id="7858108">,</span>&nbsp;<span class="ident" id="7858110">f2</span><span class="op" id="7858112">,</span>&nbsp;<span class="ident" id="7858114">f2</span><span class="op" id="7858116">,</span>&nbsp;<span class="ident" id="7858118">exact</span><span class="op" id="7858123">,</span>&nbsp;<span class="ident" id="7858125">f</span><span class="op" id="7858126">,</span>&nbsp;<span class="ident" id="7858128">f</span><span class="op" id="7858129">,</span>&nbsp;<span class="builtintype" id="7858131">true</span><span class="op" id="7858135">,</span>&nbsp;<span class="ident" id="7858137">f2</span><span class="op" id="7858139">-</span><span class="ident" id="7858140">f</span><span class="op" id="7858141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7858144">}</span><br>
<span class="lineno"></span><span class="op" id="7858146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7858149">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7858222">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7858249">func</span>&nbsp;<span class="ident" id="7858254">checkNonLossyRoundtrip64</span><span class="op" id="7858278">(</span><span class="ident" id="7858279">t</span>&nbsp;<span class="op" id="7858281">*</span><span class="ident" id="7858282">testing</span><span class="op" id="7858289">.</span><span class="ident" id="7858290">T</span><span class="op" id="7858291">,</span>&nbsp;<span class="ident" id="7858293">f</span>&nbsp;<span class="builtintype" id="7858295">float64</span><span class="op" id="7858302">)</span>&nbsp;<span class="op" id="7858304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858307">if</span>&nbsp;<span class="op" id="7858310">!</span><span class="ident" id="7858311">isFinite</span><span class="op" id="7858319">(</span><span class="ident" id="7858320">f</span><span class="op" id="7858321">)</span>&nbsp;<span class="op" id="7858323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858327">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7858335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858338">r</span>&nbsp;<span class="op" id="7858340">:=</span>&nbsp;<span class="builtinfunc" id="7858343">new</span><span class="op" id="7858346">(</span><span class="ident" id="7858347">Rat</span><span class="op" id="7858350">)</span><span class="op" id="7858351">.</span><span class="ident" id="7858352">SetFloat64</span><span class="op" id="7858362">(</span><span class="ident" id="7858363">f</span><span class="op" id="7858364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858367">if</span>&nbsp;<span class="ident" id="7858370">r</span>&nbsp;<span class="op" id="7858372">==</span>&nbsp;<span class="ident" id="7858375">nil</span>&nbsp;<span class="op" id="7858379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858383">t</span><span class="op" id="7858384">.</span><span class="ident" id="7858385">Errorf</span><span class="op" id="7858391">(</span><span class="string" id="7858392">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7858424">,</span>&nbsp;<span class="ident" id="7858426">f</span><span class="op" id="7858427">,</span>&nbsp;<span class="ident" id="7858429">f</span><span class="op" id="7858430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858434">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7858442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858445">f2</span><span class="op" id="7858447">,</span>&nbsp;<span class="ident" id="7858449">exact</span>&nbsp;<span class="op" id="7858455">:=</span>&nbsp;<span class="ident" id="7858458">r</span><span class="op" id="7858459">.</span><span class="ident" id="7858460">Float64</span><span class="op" id="7858467">(</span><span class="op" id="7858468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858471">if</span>&nbsp;<span class="ident" id="7858474">f</span>&nbsp;<span class="op" id="7858476">!=</span>&nbsp;<span class="ident" id="7858479">f2</span>&nbsp;<span class="op" id="7858482">||</span>&nbsp;<span class="op" id="7858485">!</span><span class="ident" id="7858486">exact</span>&nbsp;<span class="op" id="7858492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858496">t</span><span class="op" id="7858497">.</span><span class="ident" id="7858498">Errorf</span><span class="op" id="7858504">(</span><span class="string" id="7858505">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7858579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858584">f</span><span class="op" id="7858585">,</span>&nbsp;<span class="ident" id="7858587">f2</span><span class="op" id="7858589">,</span>&nbsp;<span class="ident" id="7858591">f2</span><span class="op" id="7858593">,</span>&nbsp;<span class="ident" id="7858595">exact</span><span class="op" id="7858600">,</span>&nbsp;<span class="ident" id="7858602">f</span><span class="op" id="7858603">,</span>&nbsp;<span class="ident" id="7858605">f</span><span class="op" id="7858606">,</span>&nbsp;<span class="builtintype" id="7858608">true</span><span class="op" id="7858612">,</span>&nbsp;<span class="ident" id="7858614">f2</span><span class="op" id="7858616">-</span><span class="ident" id="7858617">f</span><span class="op" id="7858618">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7858621">}</span><br>
<span class="lineno"></span><span class="op" id="7858623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7858626">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7858684">func</span>&nbsp;<span class="ident" id="7858689">delta</span><span class="op" id="7858694">(</span><span class="ident" id="7858695">r</span>&nbsp;<span class="op" id="7858697">*</span><span class="ident" id="7858698">Rat</span><span class="op" id="7858701">,</span>&nbsp;<span class="ident" id="7858703">f</span>&nbsp;<span class="builtintype" id="7858705">float64</span><span class="op" id="7858712">)</span>&nbsp;<span class="op" id="7858714">*</span><span class="ident" id="7858715">Rat</span>&nbsp;<span class="op" id="7858719">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7858722">d</span>&nbsp;<span class="op" id="7858724">:=</span>&nbsp;<span class="builtinfunc" id="7858727">new</span><span class="op" id="7858730">(</span><span class="ident" id="7858731">Rat</span><span class="op" id="7858734">)</span><span class="op" id="7858735">.</span><span class="ident" id="7858736">Sub</span><span class="op" id="7858739">(</span><span class="ident" id="7858740">r</span><span class="op" id="7858741">,</span>&nbsp;<span class="builtinfunc" id="7858743">new</span><span class="op" id="7858746">(</span><span class="ident" id="7858747">Rat</span><span class="op" id="7858750">)</span><span class="op" id="7858751">.</span><span class="ident" id="7858752">SetFloat64</span><span class="op" id="7858762">(</span><span class="ident" id="7858763">f</span><span class="op" id="7858764">)</span><span class="op" id="7858765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858768">return</span>&nbsp;<span class="ident" id="7858775">d</span><span class="op" id="7858776">.</span><span class="ident" id="7858777">Abs</span><span class="op" id="7858780">(</span><span class="ident" id="7858781">d</span><span class="op" id="7858782">)</span><br>
<span class="lineno"></span><span class="op" id="7858784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7858787">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7858853">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7858876">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7858904">func</span>&nbsp;<span class="ident" id="7858909">checkIsBestApprox32</span><span class="op" id="7858928">(</span><span class="ident" id="7858929">t</span>&nbsp;<span class="op" id="7858931">*</span><span class="ident" id="7858932">testing</span><span class="op" id="7858939">.</span><span class="ident" id="7858940">T</span><span class="op" id="7858941">,</span>&nbsp;<span class="ident" id="7858943">f</span>&nbsp;<span class="builtintype" id="7858945">float32</span><span class="op" id="7858952">,</span>&nbsp;<span class="ident" id="7858954">r</span>&nbsp;<span class="op" id="7858956">*</span><span class="ident" id="7858957">Rat</span><span class="op" id="7858960">)</span>&nbsp;<span class="builtintype" id="7858962">bool</span>&nbsp;<span class="op" id="7858967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7858970">if</span>&nbsp;<span class="ident" id="7858973">math</span><span class="op" id="7858977">.</span><span class="ident" id="7858978">Abs</span><span class="op" id="7858981">(</span><span class="builtintype" id="7858982">float64</span><span class="op" id="7858989">(</span><span class="ident" id="7858990">f</span><span class="op" id="7858991">)</span><span class="op" id="7858992">)</span>&nbsp;<span class="op" id="7858994">&gt;=</span>&nbsp;<span class="ident" id="7858997">math</span><span class="op" id="7859001">.</span><span class="ident" id="7859002">MaxFloat32</span>&nbsp;<span class="op" id="7859013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7859017">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7859088">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859136">return</span>&nbsp;<span class="builtintype" id="7859143">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7859149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7859153">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859220">f0</span>&nbsp;<span class="op" id="7859223">:=</span>&nbsp;<span class="ident" id="7859226">math</span><span class="op" id="7859230">.</span><span class="ident" id="7859231">Nextafter32</span><span class="op" id="7859242">(</span><span class="ident" id="7859243">f</span><span class="op" id="7859244">,</span>&nbsp;<span class="builtintype" id="7859246">float32</span><span class="op" id="7859253">(</span><span class="ident" id="7859254">math</span><span class="op" id="7859258">.</span><span class="ident" id="7859259">Inf</span><span class="op" id="7859262">(</span><span class="op" id="7859263">-</span><span class="num" id="7859264">1</span><span class="op" id="7859265">)</span><span class="op" id="7859266">)</span><span class="op" id="7859267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859270">f1</span>&nbsp;<span class="op" id="7859273">:=</span>&nbsp;<span class="ident" id="7859276">math</span><span class="op" id="7859280">.</span><span class="ident" id="7859281">Nextafter32</span><span class="op" id="7859292">(</span><span class="ident" id="7859293">f</span><span class="op" id="7859294">,</span>&nbsp;<span class="builtintype" id="7859296">float32</span><span class="op" id="7859303">(</span><span class="ident" id="7859304">math</span><span class="op" id="7859308">.</span><span class="ident" id="7859309">Inf</span><span class="op" id="7859312">(</span><span class="op" id="7859313">+</span><span class="num" id="7859314">1</span><span class="op" id="7859315">)</span><span class="op" id="7859316">)</span><span class="op" id="7859317">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7859321">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859386">df</span>&nbsp;<span class="op" id="7859389">:=</span>&nbsp;<span class="ident" id="7859392">delta</span><span class="op" id="7859397">(</span><span class="ident" id="7859398">r</span><span class="op" id="7859399">,</span>&nbsp;<span class="builtintype" id="7859401">float64</span><span class="op" id="7859408">(</span><span class="ident" id="7859409">f</span><span class="op" id="7859410">)</span><span class="op" id="7859411">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859414">df0</span>&nbsp;<span class="op" id="7859418">:=</span>&nbsp;<span class="ident" id="7859421">delta</span><span class="op" id="7859426">(</span><span class="ident" id="7859427">r</span><span class="op" id="7859428">,</span>&nbsp;<span class="builtintype" id="7859430">float64</span><span class="op" id="7859437">(</span><span class="ident" id="7859438">f0</span><span class="op" id="7859440">)</span><span class="op" id="7859441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859444">df1</span>&nbsp;<span class="op" id="7859448">:=</span>&nbsp;<span class="ident" id="7859451">delta</span><span class="op" id="7859456">(</span><span class="ident" id="7859457">r</span><span class="op" id="7859458">,</span>&nbsp;<span class="builtintype" id="7859460">float64</span><span class="op" id="7859467">(</span><span class="ident" id="7859468">f1</span><span class="op" id="7859470">)</span><span class="op" id="7859471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859474">if</span>&nbsp;<span class="ident" id="7859477">df</span><span class="op" id="7859479">.</span><span class="ident" id="7859480">Cmp</span><span class="op" id="7859483">(</span><span class="ident" id="7859484">df0</span><span class="op" id="7859487">)</span>&nbsp;<span class="op" id="7859489">&gt;</span>&nbsp;<span class="num" id="7859491">0</span>&nbsp;<span class="op" id="7859493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859497">t</span><span class="op" id="7859498">.</span><span class="ident" id="7859499">Errorf</span><span class="op" id="7859505">(</span><span class="string" id="7859506">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7859575">,</span>&nbsp;<span class="ident" id="7859577">r</span><span class="op" id="7859578">,</span>&nbsp;<span class="ident" id="7859580">f</span><span class="op" id="7859581">,</span>&nbsp;<span class="ident" id="7859583">f</span><span class="op" id="7859584">,</span>&nbsp;<span class="ident" id="7859586">f0</span><span class="op" id="7859588">,</span>&nbsp;<span class="ident" id="7859590">f0</span><span class="op" id="7859592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859596">return</span>&nbsp;<span class="builtintype" id="7859603">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7859610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859613">if</span>&nbsp;<span class="ident" id="7859616">df</span><span class="op" id="7859618">.</span><span class="ident" id="7859619">Cmp</span><span class="op" id="7859622">(</span><span class="ident" id="7859623">df1</span><span class="op" id="7859626">)</span>&nbsp;<span class="op" id="7859628">&gt;</span>&nbsp;<span class="num" id="7859630">0</span>&nbsp;<span class="op" id="7859632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859636">t</span><span class="op" id="7859637">.</span><span class="ident" id="7859638">Errorf</span><span class="op" id="7859644">(</span><span class="string" id="7859645">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7859710">,</span>&nbsp;<span class="ident" id="7859712">r</span><span class="op" id="7859713">,</span>&nbsp;<span class="ident" id="7859715">f</span><span class="op" id="7859716">,</span>&nbsp;<span class="ident" id="7859718">f</span><span class="op" id="7859719">,</span>&nbsp;<span class="ident" id="7859721">f1</span><span class="op" id="7859723">,</span>&nbsp;<span class="ident" id="7859725">f1</span><span class="op" id="7859727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859731">return</span>&nbsp;<span class="builtintype" id="7859738">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7859745">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859748">if</span>&nbsp;<span class="ident" id="7859751">df</span><span class="op" id="7859753">.</span><span class="ident" id="7859754">Cmp</span><span class="op" id="7859757">(</span><span class="ident" id="7859758">df0</span><span class="op" id="7859761">)</span>&nbsp;<span class="op" id="7859763">==</span>&nbsp;<span class="num" id="7859766">0</span>&nbsp;<span class="op" id="7859768">&amp;&amp;</span>&nbsp;<span class="op" id="7859771">!</span><span class="ident" id="7859772">isEven32</span><span class="op" id="7859780">(</span><span class="ident" id="7859781">f</span><span class="op" id="7859782">)</span>&nbsp;<span class="op" id="7859784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859788">t</span><span class="op" id="7859789">.</span><span class="ident" id="7859790">Errorf</span><span class="op" id="7859796">(</span><span class="string" id="7859797">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7859874">,</span>&nbsp;<span class="ident" id="7859876">r</span><span class="op" id="7859877">,</span>&nbsp;<span class="ident" id="7859879">f</span><span class="op" id="7859880">,</span>&nbsp;<span class="ident" id="7859882">f</span><span class="op" id="7859883">,</span>&nbsp;<span class="ident" id="7859885">f0</span><span class="op" id="7859887">,</span>&nbsp;<span class="ident" id="7859889">f0</span><span class="op" id="7859891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859895">return</span>&nbsp;<span class="builtintype" id="7859902">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7859909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7859912">if</span>&nbsp;<span class="ident" id="7859915">df</span><span class="op" id="7859917">.</span><span class="ident" id="7859918">Cmp</span><span class="op" id="7859921">(</span><span class="ident" id="7859922">df1</span><span class="op" id="7859925">)</span>&nbsp;<span class="op" id="7859927">==</span>&nbsp;<span class="num" id="7859930">0</span>&nbsp;<span class="op" id="7859932">&amp;&amp;</span>&nbsp;<span class="op" id="7859935">!</span><span class="ident" id="7859936">isEven32</span><span class="op" id="7859944">(</span><span class="ident" id="7859945">f</span><span class="op" id="7859946">)</span>&nbsp;<span class="op" id="7859948">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7859952">t</span><span class="op" id="7859953">.</span><span class="ident" id="7859954">Errorf</span><span class="op" id="7859960">(</span><span class="string" id="7859961">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7860038">,</span>&nbsp;<span class="ident" id="7860040">r</span><span class="op" id="7860041">,</span>&nbsp;<span class="ident" id="7860043">f</span><span class="op" id="7860044">,</span>&nbsp;<span class="ident" id="7860046">f</span><span class="op" id="7860047">,</span>&nbsp;<span class="ident" id="7860049">f1</span><span class="op" id="7860051">,</span>&nbsp;<span class="ident" id="7860053">f1</span><span class="op" id="7860055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860059">return</span>&nbsp;<span class="builtintype" id="7860066">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860076">return</span>&nbsp;<span class="builtintype" id="7860083">true</span><br>
<span class="lineno"></span><span class="op" id="7860088">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7860091">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7860157">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7860180">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7860208">func</span>&nbsp;<span class="ident" id="7860213">checkIsBestApprox64</span><span class="op" id="7860232">(</span><span class="ident" id="7860233">t</span>&nbsp;<span class="op" id="7860235">*</span><span class="ident" id="7860236">testing</span><span class="op" id="7860243">.</span><span class="ident" id="7860244">T</span><span class="op" id="7860245">,</span>&nbsp;<span class="ident" id="7860247">f</span>&nbsp;<span class="builtintype" id="7860249">float64</span><span class="op" id="7860256">,</span>&nbsp;<span class="ident" id="7860258">r</span>&nbsp;<span class="op" id="7860260">*</span><span class="ident" id="7860261">Rat</span><span class="op" id="7860264">)</span>&nbsp;<span class="builtintype" id="7860266">bool</span>&nbsp;<span class="op" id="7860271">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860274">if</span>&nbsp;<span class="ident" id="7860277">math</span><span class="op" id="7860281">.</span><span class="ident" id="7860282">Abs</span><span class="op" id="7860285">(</span><span class="ident" id="7860286">f</span><span class="op" id="7860287">)</span>&nbsp;<span class="op" id="7860289">&gt;=</span>&nbsp;<span class="ident" id="7860292">math</span><span class="op" id="7860296">.</span><span class="ident" id="7860297">MaxFloat64</span>&nbsp;<span class="op" id="7860308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7860312">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7860383">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860431">return</span>&nbsp;<span class="builtintype" id="7860438">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860444">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7860448">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860515">f0</span>&nbsp;<span class="op" id="7860518">:=</span>&nbsp;<span class="ident" id="7860521">math</span><span class="op" id="7860525">.</span><span class="ident" id="7860526">Nextafter</span><span class="op" id="7860535">(</span><span class="ident" id="7860536">f</span><span class="op" id="7860537">,</span>&nbsp;<span class="ident" id="7860539">math</span><span class="op" id="7860543">.</span><span class="ident" id="7860544">Inf</span><span class="op" id="7860547">(</span><span class="op" id="7860548">-</span><span class="num" id="7860549">1</span><span class="op" id="7860550">)</span><span class="op" id="7860551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860554">f1</span>&nbsp;<span class="op" id="7860557">:=</span>&nbsp;<span class="ident" id="7860560">math</span><span class="op" id="7860564">.</span><span class="ident" id="7860565">Nextafter</span><span class="op" id="7860574">(</span><span class="ident" id="7860575">f</span><span class="op" id="7860576">,</span>&nbsp;<span class="ident" id="7860578">math</span><span class="op" id="7860582">.</span><span class="ident" id="7860583">Inf</span><span class="op" id="7860586">(</span><span class="op" id="7860587">+</span><span class="num" id="7860588">1</span><span class="op" id="7860589">)</span><span class="op" id="7860590">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7860594">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860659">df</span>&nbsp;<span class="op" id="7860662">:=</span>&nbsp;<span class="ident" id="7860665">delta</span><span class="op" id="7860670">(</span><span class="ident" id="7860671">r</span><span class="op" id="7860672">,</span>&nbsp;<span class="ident" id="7860674">f</span><span class="op" id="7860675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860678">df0</span>&nbsp;<span class="op" id="7860682">:=</span>&nbsp;<span class="ident" id="7860685">delta</span><span class="op" id="7860690">(</span><span class="ident" id="7860691">r</span><span class="op" id="7860692">,</span>&nbsp;<span class="ident" id="7860694">f0</span><span class="op" id="7860696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860699">df1</span>&nbsp;<span class="op" id="7860703">:=</span>&nbsp;<span class="ident" id="7860706">delta</span><span class="op" id="7860711">(</span><span class="ident" id="7860712">r</span><span class="op" id="7860713">,</span>&nbsp;<span class="ident" id="7860715">f1</span><span class="op" id="7860717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860720">if</span>&nbsp;<span class="ident" id="7860723">df</span><span class="op" id="7860725">.</span><span class="ident" id="7860726">Cmp</span><span class="op" id="7860729">(</span><span class="ident" id="7860730">df0</span><span class="op" id="7860733">)</span>&nbsp;<span class="op" id="7860735">&gt;</span>&nbsp;<span class="num" id="7860737">0</span>&nbsp;<span class="op" id="7860739">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860743">t</span><span class="op" id="7860744">.</span><span class="ident" id="7860745">Errorf</span><span class="op" id="7860751">(</span><span class="string" id="7860752">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7860821">,</span>&nbsp;<span class="ident" id="7860823">r</span><span class="op" id="7860824">,</span>&nbsp;<span class="ident" id="7860826">f</span><span class="op" id="7860827">,</span>&nbsp;<span class="ident" id="7860829">f</span><span class="op" id="7860830">,</span>&nbsp;<span class="ident" id="7860832">f0</span><span class="op" id="7860834">,</span>&nbsp;<span class="ident" id="7860836">f0</span><span class="op" id="7860838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860842">return</span>&nbsp;<span class="builtintype" id="7860849">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860859">if</span>&nbsp;<span class="ident" id="7860862">df</span><span class="op" id="7860864">.</span><span class="ident" id="7860865">Cmp</span><span class="op" id="7860868">(</span><span class="ident" id="7860869">df1</span><span class="op" id="7860872">)</span>&nbsp;<span class="op" id="7860874">&gt;</span>&nbsp;<span class="num" id="7860876">0</span>&nbsp;<span class="op" id="7860878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7860882">t</span><span class="op" id="7860883">.</span><span class="ident" id="7860884">Errorf</span><span class="op" id="7860890">(</span><span class="string" id="7860891">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7860956">,</span>&nbsp;<span class="ident" id="7860958">r</span><span class="op" id="7860959">,</span>&nbsp;<span class="ident" id="7860961">f</span><span class="op" id="7860962">,</span>&nbsp;<span class="ident" id="7860964">f</span><span class="op" id="7860965">,</span>&nbsp;<span class="ident" id="7860967">f1</span><span class="op" id="7860969">,</span>&nbsp;<span class="ident" id="7860971">f1</span><span class="op" id="7860973">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860977">return</span>&nbsp;<span class="builtintype" id="7860984">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7860991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7860994">if</span>&nbsp;<span class="ident" id="7860997">df</span><span class="op" id="7860999">.</span><span class="ident" id="7861000">Cmp</span><span class="op" id="7861003">(</span><span class="ident" id="7861004">df0</span><span class="op" id="7861007">)</span>&nbsp;<span class="op" id="7861009">==</span>&nbsp;<span class="num" id="7861012">0</span>&nbsp;<span class="op" id="7861014">&amp;&amp;</span>&nbsp;<span class="op" id="7861017">!</span><span class="ident" id="7861018">isEven64</span><span class="op" id="7861026">(</span><span class="ident" id="7861027">f</span><span class="op" id="7861028">)</span>&nbsp;<span class="op" id="7861030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861034">t</span><span class="op" id="7861035">.</span><span class="ident" id="7861036">Errorf</span><span class="op" id="7861042">(</span><span class="string" id="7861043">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7861120">,</span>&nbsp;<span class="ident" id="7861122">r</span><span class="op" id="7861123">,</span>&nbsp;<span class="ident" id="7861125">f</span><span class="op" id="7861126">,</span>&nbsp;<span class="ident" id="7861128">f</span><span class="op" id="7861129">,</span>&nbsp;<span class="ident" id="7861131">f0</span><span class="op" id="7861133">,</span>&nbsp;<span class="ident" id="7861135">f0</span><span class="op" id="7861137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7861141">return</span>&nbsp;<span class="builtintype" id="7861148">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7861158">if</span>&nbsp;<span class="ident" id="7861161">df</span><span class="op" id="7861163">.</span><span class="ident" id="7861164">Cmp</span><span class="op" id="7861167">(</span><span class="ident" id="7861168">df1</span><span class="op" id="7861171">)</span>&nbsp;<span class="op" id="7861173">==</span>&nbsp;<span class="num" id="7861176">0</span>&nbsp;<span class="op" id="7861178">&amp;&amp;</span>&nbsp;<span class="op" id="7861181">!</span><span class="ident" id="7861182">isEven64</span><span class="op" id="7861190">(</span><span class="ident" id="7861191">f</span><span class="op" id="7861192">)</span>&nbsp;<span class="op" id="7861194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861198">t</span><span class="op" id="7861199">.</span><span class="ident" id="7861200">Errorf</span><span class="op" id="7861206">(</span><span class="string" id="7861207">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7861284">,</span>&nbsp;<span class="ident" id="7861286">r</span><span class="op" id="7861287">,</span>&nbsp;<span class="ident" id="7861289">f</span><span class="op" id="7861290">,</span>&nbsp;<span class="ident" id="7861292">f</span><span class="op" id="7861293">,</span>&nbsp;<span class="ident" id="7861295">f1</span><span class="op" id="7861297">,</span>&nbsp;<span class="ident" id="7861299">f1</span><span class="op" id="7861301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7861305">return</span>&nbsp;<span class="builtintype" id="7861312">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861319">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7861322">return</span>&nbsp;<span class="builtintype" id="7861329">true</span><br>
<span class="lineno"></span><span class="op" id="7861334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7861337">func</span>&nbsp;<span class="ident" id="7861342">isEven32</span><span class="op" id="7861350">(</span><span class="ident" id="7861351">f</span>&nbsp;<span class="builtintype" id="7861353">float32</span><span class="op" id="7861360">)</span>&nbsp;<span class="builtintype" id="7861362">bool</span>&nbsp;<span class="op" id="7861367">{</span>&nbsp;<span class="keyword" id="7861369">return</span>&nbsp;<span class="ident" id="7861376">math</span><span class="op" id="7861380">.</span><span class="ident" id="7861381">Float32bits</span><span class="op" id="7861392">(</span><span class="ident" id="7861393">f</span><span class="op" id="7861394">)</span><span class="op" id="7861395">&amp;</span><span class="num" id="7861396">1</span>&nbsp;<span class="op" id="7861398">==</span>&nbsp;<span class="num" id="7861401">0</span>&nbsp;<span class="op" id="7861403">}</span><br>
<span class="lineno"></span><span class="keyword" id="7861405">func</span>&nbsp;<span class="ident" id="7861410">isEven64</span><span class="op" id="7861418">(</span><span class="ident" id="7861419">f</span>&nbsp;<span class="builtintype" id="7861421">float64</span><span class="op" id="7861428">)</span>&nbsp;<span class="builtintype" id="7861430">bool</span>&nbsp;<span class="op" id="7861435">{</span>&nbsp;<span class="keyword" id="7861437">return</span>&nbsp;<span class="ident" id="7861444">math</span><span class="op" id="7861448">.</span><span class="ident" id="7861449">Float64bits</span><span class="op" id="7861460">(</span><span class="ident" id="7861461">f</span><span class="op" id="7861462">)</span><span class="op" id="7861463">&amp;</span><span class="num" id="7861464">1</span>&nbsp;<span class="op" id="7861466">==</span>&nbsp;<span class="num" id="7861469">0</span>&nbsp;<span class="op" id="7861471">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7861474">func</span>&nbsp;<span class="ident" id="7861479">TestIsFinite</span><span class="op" id="7861491">(</span><span class="ident" id="7861492">t</span>&nbsp;<span class="op" id="7861494">*</span><span class="ident" id="7861495">testing</span><span class="op" id="7861502">.</span><span class="ident" id="7861503">T</span><span class="op" id="7861504">)</span>&nbsp;<span class="op" id="7861506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861509">finites</span>&nbsp;<span class="op" id="7861517">:=</span>&nbsp;<span class="op" id="7861520">[</span><span class="op" id="7861521">]</span><span class="builtintype" id="7861522">float64</span><span class="op" id="7861529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7861533">1.0</span>&nbsp;<span class="op" id="7861537">/</span>&nbsp;<span class="num" id="7861539">3</span><span class="op" id="7861540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7861544">4891559871276714924261e+222</span><span class="op" id="7861571">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861575">math</span><span class="op" id="7861579">.</span><span class="ident" id="7861580">MaxFloat64</span><span class="op" id="7861590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861594">math</span><span class="op" id="7861598">.</span><span class="ident" id="7861599">SmallestNonzeroFloat64</span><span class="op" id="7861621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861625">-</span><span class="ident" id="7861626">math</span><span class="op" id="7861630">.</span><span class="ident" id="7861631">MaxFloat64</span><span class="op" id="7861641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861645">-</span><span class="ident" id="7861646">math</span><span class="op" id="7861650">.</span><span class="ident" id="7861651">SmallestNonzeroFloat64</span><span class="op" id="7861673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861676">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7861679">for</span>&nbsp;<span class="ident" id="7861683">_</span><span class="op" id="7861684">,</span>&nbsp;<span class="ident" id="7861686">f</span>&nbsp;<span class="op" id="7861688">:=</span>&nbsp;<span class="keyword" id="7861691">range</span>&nbsp;<span class="ident" id="7861697">finites</span>&nbsp;<span class="op" id="7861705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7861709">if</span>&nbsp;<span class="op" id="7861712">!</span><span class="ident" id="7861713">isFinite</span><span class="op" id="7861721">(</span><span class="ident" id="7861722">f</span><span class="op" id="7861723">)</span>&nbsp;<span class="op" id="7861725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861730">t</span><span class="op" id="7861731">.</span><span class="ident" id="7861732">Errorf</span><span class="op" id="7861738">(</span><span class="string" id="7861739">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7861759">,</span>&nbsp;<span class="ident" id="7861761">f</span><span class="op" id="7861762">,</span>&nbsp;<span class="ident" id="7861764">f</span><span class="op" id="7861765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861772">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861775">nonfinites</span>&nbsp;<span class="op" id="7861786">:=</span>&nbsp;<span class="op" id="7861789">[</span><span class="op" id="7861790">]</span><span class="builtintype" id="7861791">float64</span><span class="op" id="7861798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861802">math</span><span class="op" id="7861806">.</span><span class="ident" id="7861807">NaN</span><span class="op" id="7861810">(</span><span class="op" id="7861811">)</span><span class="op" id="7861812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861816">math</span><span class="op" id="7861820">.</span><span class="ident" id="7861821">Inf</span><span class="op" id="7861824">(</span><span class="op" id="7861825">-</span><span class="num" id="7861826">1</span><span class="op" id="7861827">)</span><span class="op" id="7861828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861832">math</span><span class="op" id="7861836">.</span><span class="ident" id="7861837">Inf</span><span class="op" id="7861840">(</span><span class="op" id="7861841">+</span><span class="num" id="7861842">1</span><span class="op" id="7861843">)</span><span class="op" id="7861844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861847">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7861850">for</span>&nbsp;<span class="ident" id="7861854">_</span><span class="op" id="7861855">,</span>&nbsp;<span class="ident" id="7861857">f</span>&nbsp;<span class="op" id="7861859">:=</span>&nbsp;<span class="keyword" id="7861862">range</span>&nbsp;<span class="ident" id="7861868">nonfinites</span>&nbsp;<span class="op" id="7861879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7861883">if</span>&nbsp;<span class="ident" id="7861886">isFinite</span><span class="op" id="7861894">(</span><span class="ident" id="7861895">f</span><span class="op" id="7861896">)</span>&nbsp;<span class="op" id="7861898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7861903">t</span><span class="op" id="7861904">.</span><span class="ident" id="7861905">Errorf</span><span class="op" id="7861911">(</span><span class="string" id="7861912">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7861932">,</span>&nbsp;<span class="ident" id="7861934">f</span><span class="op" id="7861935">,</span>&nbsp;<span class="ident" id="7861937">f</span><span class="op" id="7861938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7861945">}</span><br>
<span class="lineno">1160</span><span class="op" id="7861947">}</span>
</div>
</body>
</html>
