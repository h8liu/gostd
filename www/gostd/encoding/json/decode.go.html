<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3234700">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3234755">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3234809">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3234860">//&nbsp;Represents&nbsp;JSON&nbsp;data&nbsp;structure&nbsp;using&nbsp;native&nbsp;Go&nbsp;types:&nbsp;booleans,&nbsp;floats,</span><br>
<span class="lineno"></span><span class="comment" id="3234935">//&nbsp;strings,&nbsp;arrays,&nbsp;and&nbsp;maps.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3234966">package</span>&nbsp;<span class="ident" id="3234974">json</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3234980">import</span>&nbsp;<span class="op" id="3234987">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3234990">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3234999">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3235011">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3235030">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3235040">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3235047">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3235058">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3235069">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3235080">&#34;unicode&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3235091">&#34;unicode/utf16&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3235108">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3235123">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3235126">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;JSON-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result</span><br>
<span class="lineno">25</span><span class="comment" id="3235190">//&nbsp;in&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3235223">//</span><br>
<span class="lineno"></span><span class="comment" id="3235226">//&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;encodings&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3235278">//&nbsp;Marshal&nbsp;uses,&nbsp;allocating&nbsp;maps,&nbsp;slices,&nbsp;and&nbsp;pointers&nbsp;as&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="3235347">//&nbsp;with&nbsp;the&nbsp;following&nbsp;additional&nbsp;rules:</span><br>
<span class="lineno">30</span><span class="comment" id="3235387">//</span><br>
<span class="lineno"></span><span class="comment" id="3235390">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;pointer,&nbsp;Unmarshal&nbsp;first&nbsp;handles&nbsp;the&nbsp;case&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3235463">//&nbsp;the&nbsp;JSON&nbsp;being&nbsp;the&nbsp;JSON&nbsp;literal&nbsp;null.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;Unmarshal&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="3235534">//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;nil.&nbsp;&nbsp;Otherwise,&nbsp;Unmarshal&nbsp;unmarshals&nbsp;the&nbsp;JSON&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="3235604">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;at&nbsp;by&nbsp;the&nbsp;pointer.&nbsp;&nbsp;If&nbsp;the&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;Unmarshal</span><br>
<span class="lineno">35</span><span class="comment" id="3235678">//&nbsp;allocates&nbsp;a&nbsp;new&nbsp;value&nbsp;for&nbsp;it&nbsp;to&nbsp;point&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="3235723">//</span><br>
<span class="lineno"></span><span class="comment" id="3235726">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;struct,&nbsp;Unmarshal&nbsp;matches&nbsp;incoming&nbsp;object</span><br>
<span class="lineno"></span><span class="comment" id="3235796">//&nbsp;keys&nbsp;to&nbsp;the&nbsp;keys&nbsp;used&nbsp;by&nbsp;Marshal&nbsp;(either&nbsp;the&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;its&nbsp;tag),</span><br>
<span class="lineno"></span><span class="comment" id="3235875">//&nbsp;preferring&nbsp;an&nbsp;exact&nbsp;match&nbsp;but&nbsp;also&nbsp;accepting&nbsp;a&nbsp;case-insensitive&nbsp;match.</span><br>
<span class="lineno">40</span><span class="comment" id="3235949">//</span><br>
<span class="lineno"></span><span class="comment" id="3235952">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;an&nbsp;interface&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="3235998">//&nbsp;Unmarshal&nbsp;stores&nbsp;one&nbsp;of&nbsp;these&nbsp;in&nbsp;the&nbsp;interface&nbsp;value:</span><br>
<span class="lineno"></span><span class="comment" id="3236055">//</span><br>
<span class="lineno"></span><span class="comment" id="3236058">//&nbsp;&nbsp;&nbsp;&nbspbool,&nbsp;for&nbsp;JSON&nbsp;booleans</span><br>
<span class="lineno">45</span><span class="comment" id="3236085">//&nbsp;&nbsp;&nbsp;&nbspfloat64,&nbsp;for&nbsp;JSON&nbsp;numbers</span><br>
<span class="lineno"></span><span class="comment" id="3236114">//&nbsp;&nbsp;&nbsp;&nbspstring,&nbsp;for&nbsp;JSON&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="3236142">//&nbsp;&nbsp;&nbsp;&nbsp[]interface{},&nbsp;for&nbsp;JSON&nbsp;arrays</span><br>
<span class="lineno"></span><span class="comment" id="3236176">//&nbsp;&nbsp;&nbsp;&nbspmap[string]interface{},&nbsp;for&nbsp;JSON&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="3236220">//&nbsp;&nbsp;&nbsp;&nbspnil&nbsp;for&nbsp;JSON&nbsp;null</span><br>
<span class="lineno">50</span><span class="comment" id="3236241">//</span><br>
<span class="lineno"></span><span class="comment" id="3236244">//&nbsp;If&nbsp;a&nbsp;JSON&nbsp;value&nbsp;is&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;given&nbsp;target&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="3236307">//&nbsp;or&nbsp;if&nbsp;a&nbsp;JSON&nbsp;number&nbsp;overflows&nbsp;the&nbsp;target&nbsp;type,&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="3236367">//&nbsp;skips&nbsp;that&nbsp;field&nbsp;and&nbsp;completes&nbsp;the&nbsp;unmarshalling&nbsp;as&nbsp;best&nbsp;it&nbsp;can.</span><br>
<span class="lineno"></span><span class="comment" id="3236435">//&nbsp;If&nbsp;no&nbsp;more&nbsp;serious&nbsp;errors&nbsp;are&nbsp;encountered,&nbsp;Unmarshal&nbsp;returns</span><br>
<span class="lineno">55</span><span class="comment" id="3236499">//&nbsp;an&nbsp;UnmarshalTypeError&nbsp;describing&nbsp;the&nbsp;earliest&nbsp;such&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3236560">//</span><br>
<span class="lineno"></span><span class="comment" id="3236563">//&nbsp;The&nbsp;JSON&nbsp;null&nbsp;value&nbsp;unmarshals&nbsp;into&nbsp;an&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="3236639">//&nbsp;by&nbsp;setting&nbsp;that&nbsp;Go&nbsp;value&nbsp;to&nbsp;nil.&nbsp;Because&nbsp;null&nbsp;is&nbsp;often&nbsp;used&nbsp;in&nbsp;JSON&nbsp;to&nbsp;mean</span><br>
<span class="lineno"></span><span class="comment" id="3236718">//&nbsp;``not&nbsp;present,&#39;&#39;&nbsp;unmarshaling&nbsp;a&nbsp;JSON&nbsp;null&nbsp;into&nbsp;any&nbsp;other&nbsp;Go&nbsp;type&nbsp;has&nbsp;no&nbsp;effect</span><br>
<span class="lineno">60</span><span class="comment" id="3236800">//&nbsp;on&nbsp;the&nbsp;value&nbsp;and&nbsp;produces&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3236839">//</span><br>
<span class="lineno"></span><span class="comment" id="3236842">//&nbsp;When&nbsp;unmarshaling&nbsp;quoted&nbsp;strings,&nbsp;invalid&nbsp;UTF-8&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3236896">//&nbsp;invalid&nbsp;UTF-16&nbsp;surrogate&nbsp;pairs&nbsp;are&nbsp;not&nbsp;treated&nbsp;as&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3236959">//&nbsp;Instead,&nbsp;they&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;Unicode&nbsp;replacement</span><br>
<span class="lineno">65</span><span class="comment" id="3237016">//&nbsp;character&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="comment" id="3237037">//</span><br>
<span class="lineno"></span><span class="keyword" id="3237040">func</span>&nbsp;<span class="ident" id="3237045">Unmarshal</span><span class="op" id="3237054">(</span><span class="ident" id="3237055">data</span>&nbsp;<span class="op" id="3237060">[</span><span class="op" id="3237061">]</span><span class="builtintype" id="3237062">byte</span><span class="op" id="3237066">,</span>&nbsp;<span class="ident" id="3237068">v</span>&nbsp;<span class="keyword" id="3237070">interface</span><span class="op" id="3237079">{</span><span class="op" id="3237080">}</span><span class="op" id="3237081">)</span>&nbsp;<span class="builtintype" id="3237083">error</span>&nbsp;<span class="op" id="3237089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3237092">//&nbsp;Check&nbsp;for&nbsp;well-formedness.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3237123">//&nbsp;Avoids&nbsp;filling&nbsp;out&nbsp;half&nbsp;a&nbsp;data&nbsp;structure</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3237168">//&nbsp;before&nbsp;discovering&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3237212">var</span>&nbsp;<span class="ident" id="3237216">d</span>&nbsp;<span class="ident" id="3237218">decodeState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237231">err</span>&nbsp;<span class="op" id="3237235">:=</span>&nbsp;<span class="ident" id="3237238">checkValid</span><span class="op" id="3237248">(</span><span class="ident" id="3237249">data</span><span class="op" id="3237253">,</span>&nbsp;<span class="op" id="3237255">&amp;</span><span class="ident" id="3237256">d</span><span class="op" id="3237257">.</span><span class="ident" id="3237258">scan</span><span class="op" id="3237262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3237265">if</span>&nbsp;<span class="ident" id="3237268">err</span>&nbsp;<span class="op" id="3237272">!=</span>&nbsp;<span class="ident" id="3237275">nil</span>&nbsp;<span class="op" id="3237279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3237283">return</span>&nbsp;<span class="ident" id="3237290">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3237295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237299">d</span><span class="op" id="3237300">.</span><span class="ident" id="3237301">init</span><span class="op" id="3237305">(</span><span class="ident" id="3237306">data</span><span class="op" id="3237310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3237313">return</span>&nbsp;<span class="ident" id="3237320">d</span><span class="op" id="3237321">.</span><span class="ident" id="3237322">unmarshal</span><span class="op" id="3237331">(</span><span class="ident" id="3237332">v</span><span class="op" id="3237333">)</span><br>
<span class="lineno"></span><span class="op" id="3237335">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="3237338">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="3237393">//&nbsp;that&nbsp;can&nbsp;unmarshal&nbsp;a&nbsp;JSON&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="3237449">//&nbsp;The&nbsp;input&nbsp;can&nbsp;be&nbsp;assumed&nbsp;to&nbsp;be&nbsp;a&nbsp;valid&nbsp;encoding&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3237503">//&nbsp;a&nbsp;JSON&nbsp;value.&nbsp;UnmarshalJSON&nbsp;must&nbsp;copy&nbsp;the&nbsp;JSON&nbsp;data</span><br>
<span class="lineno">85</span><span class="comment" id="3237558">//&nbsp;if&nbsp;it&nbsp;wishes&nbsp;to&nbsp;retain&nbsp;the&nbsp;data&nbsp;after&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="3237610">type</span>&nbsp;<span class="ident" id="3237615">Unmarshaler</span>&nbsp;<span class="keyword" id="3237627">interface</span>&nbsp;<span class="op" id="3237637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237640">UnmarshalJSON</span><span class="op" id="3237653">(</span><span class="op" id="3237654">[</span><span class="op" id="3237655">]</span><span class="builtintype" id="3237656">byte</span><span class="op" id="3237660">)</span>&nbsp;<span class="builtintype" id="3237662">error</span><br>
<span class="lineno"></span><span class="op" id="3237668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="3237671">//&nbsp;An&nbsp;UnmarshalTypeError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;that&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="3237728">//&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;value&nbsp;of&nbsp;a&nbsp;specific&nbsp;Go&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3237782">type</span>&nbsp;<span class="ident" id="3237787">UnmarshalTypeError</span>&nbsp;<span class="keyword" id="3237806">struct</span>&nbsp;<span class="op" id="3237813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237816">Value</span>&nbsp;<span class="builtintype" id="3237822">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3237835">//&nbsp;description&nbsp;of&nbsp;JSON&nbsp;value&nbsp;-&nbsp;&#34;bool&#34;,&nbsp;&#34;array&#34;,&nbsp;&#34;number&nbsp;-5&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3237896">Type</span>&nbsp;&nbsp;<span class="ident" id="3237902">reflect</span><span class="op" id="3237909">.</span><span class="ident" id="3237910">Type</span>&nbsp;<span class="comment" id="3237915">//&nbsp;type&nbsp;of&nbsp;Go&nbsp;value&nbsp;it&nbsp;could&nbsp;not&nbsp;be&nbsp;assigned&nbsp;to</span><br>
<span class="lineno">95</span><span class="op" id="3237963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3237966">func</span>&nbsp;<span class="op" id="3237971">(</span><span class="ident" id="3237972">e</span>&nbsp;<span class="op" id="3237974">*</span><span class="ident" id="3237975">UnmarshalTypeError</span><span class="op" id="3237993">)</span>&nbsp;<span class="ident" id="3237995">Error</span><span class="op" id="3238000">(</span><span class="op" id="3238001">)</span>&nbsp;<span class="builtintype" id="3238003">string</span>&nbsp;<span class="op" id="3238010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3238013">return</span>&nbsp;<span class="string" id="3238020">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;&#34;</span>&nbsp;<span class="op" id="3238046">+</span>&nbsp;<span class="ident" id="3238048">e</span><span class="op" id="3238049">.</span><span class="ident" id="3238050">Value</span>&nbsp;<span class="op" id="3238056">+</span>&nbsp;<span class="string" id="3238058">&#34;&nbsp;into&nbsp;Go&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="3238084">+</span>&nbsp;<span class="ident" id="3238086">e</span><span class="op" id="3238087">.</span><span class="ident" id="3238088">Type</span><span class="op" id="3238092">.</span><span class="ident" id="3238093">String</span><span class="op" id="3238099">(</span><span class="op" id="3238100">)</span><br>
<span class="lineno"></span><span class="op" id="3238102">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="3238105">//&nbsp;An&nbsp;UnmarshalFieldError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;object&nbsp;key&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3238164">//&nbsp;led&nbsp;to&nbsp;an&nbsp;unexported&nbsp;(and&nbsp;therefore&nbsp;unwritable)&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="3238229">//&nbsp;(No&nbsp;longer&nbsp;used;&nbsp;kept&nbsp;for&nbsp;compatibility.)</span><br>
<span class="lineno"></span><span class="keyword" id="3238274">type</span>&nbsp;<span class="ident" id="3238279">UnmarshalFieldError</span>&nbsp;<span class="keyword" id="3238299">struct</span>&nbsp;<span class="op" id="3238306">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238309">Key</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3238315">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238323">Type</span>&nbsp;&nbsp;<span class="ident" id="3238329">reflect</span><span class="op" id="3238336">.</span><span class="ident" id="3238337">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238343">Field</span>&nbsp;<span class="ident" id="3238349">reflect</span><span class="op" id="3238356">.</span><span class="ident" id="3238357">StructField</span><br>
<span class="lineno"></span><span class="op" id="3238369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="3238372">func</span>&nbsp;<span class="op" id="3238377">(</span><span class="ident" id="3238378">e</span>&nbsp;<span class="op" id="3238380">*</span><span class="ident" id="3238381">UnmarshalFieldError</span><span class="op" id="3238400">)</span>&nbsp;<span class="ident" id="3238402">Error</span><span class="op" id="3238407">(</span><span class="op" id="3238408">)</span>&nbsp;<span class="builtintype" id="3238410">string</span>&nbsp;<span class="op" id="3238417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3238420">return</span>&nbsp;<span class="string" id="3238427">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;object&nbsp;key&nbsp;&#34;</span>&nbsp;<span class="op" id="3238464">+</span>&nbsp;<span class="ident" id="3238466">strconv</span><span class="op" id="3238473">.</span><span class="ident" id="3238474">Quote</span><span class="op" id="3238479">(</span><span class="ident" id="3238480">e</span><span class="op" id="3238481">.</span><span class="ident" id="3238482">Key</span><span class="op" id="3238485">)</span>&nbsp;<span class="op" id="3238487">+</span>&nbsp;<span class="string" id="3238489">&#34;&nbsp;into&nbsp;unexported&nbsp;field&nbsp;&#34;</span>&nbsp;<span class="op" id="3238515">+</span>&nbsp;<span class="ident" id="3238517">e</span><span class="op" id="3238518">.</span><span class="ident" id="3238519">Field</span><span class="op" id="3238524">.</span><span class="ident" id="3238525">Name</span>&nbsp;<span class="op" id="3238530">+</span>&nbsp;<span class="string" id="3238532">&#34;&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="3238544">+</span>&nbsp;<span class="ident" id="3238546">e</span><span class="op" id="3238547">.</span><span class="ident" id="3238548">Type</span><span class="op" id="3238552">.</span><span class="ident" id="3238553">String</span><span class="op" id="3238559">(</span><span class="op" id="3238560">)</span><br>
<span class="lineno"></span><span class="op" id="3238562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3238565">//&nbsp;An&nbsp;InvalidUnmarshalError&nbsp;describes&nbsp;an&nbsp;invalid&nbsp;argument&nbsp;passed&nbsp;to&nbsp;Unmarshal.</span><br>
<span class="lineno">115</span><span class="comment" id="3238644">//&nbsp;(The&nbsp;argument&nbsp;to&nbsp;Unmarshal&nbsp;must&nbsp;be&nbsp;a&nbsp;non-nil&nbsp;pointer.)</span><br>
<span class="lineno"></span><span class="keyword" id="3238702">type</span>&nbsp;<span class="ident" id="3238707">InvalidUnmarshalError</span>&nbsp;<span class="keyword" id="3238729">struct</span>&nbsp;<span class="op" id="3238736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238739">Type</span>&nbsp;<span class="ident" id="3238744">reflect</span><span class="op" id="3238751">.</span><span class="ident" id="3238752">Type</span><br>
<span class="lineno"></span><span class="op" id="3238757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="3238760">func</span>&nbsp;<span class="op" id="3238765">(</span><span class="ident" id="3238766">e</span>&nbsp;<span class="op" id="3238768">*</span><span class="ident" id="3238769">InvalidUnmarshalError</span><span class="op" id="3238790">)</span>&nbsp;<span class="ident" id="3238792">Error</span><span class="op" id="3238797">(</span><span class="op" id="3238798">)</span>&nbsp;<span class="builtintype" id="3238800">string</span>&nbsp;<span class="op" id="3238807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3238810">if</span>&nbsp;<span class="ident" id="3238813">e</span><span class="op" id="3238814">.</span><span class="ident" id="3238815">Type</span>&nbsp;<span class="op" id="3238820">==</span>&nbsp;<span class="ident" id="3238823">nil</span>&nbsp;<span class="op" id="3238827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3238831">return</span>&nbsp;<span class="string" id="3238838">&#34;json:&nbsp;Unmarshal(nil)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3238862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3238866">if</span>&nbsp;<span class="ident" id="3238869">e</span><span class="op" id="3238870">.</span><span class="ident" id="3238871">Type</span><span class="op" id="3238875">.</span><span class="ident" id="3238876">Kind</span><span class="op" id="3238880">(</span><span class="op" id="3238881">)</span>&nbsp;<span class="op" id="3238883">!=</span>&nbsp;<span class="ident" id="3238886">reflect</span><span class="op" id="3238893">.</span><span class="ident" id="3238894">Ptr</span>&nbsp;<span class="op" id="3238898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3238902">return</span>&nbsp;<span class="string" id="3238909">&#34;json:&nbsp;Unmarshal(non-pointer&nbsp;&#34;</span>&nbsp;<span class="op" id="3238940">+</span>&nbsp;<span class="ident" id="3238942">e</span><span class="op" id="3238943">.</span><span class="ident" id="3238944">Type</span><span class="op" id="3238948">.</span><span class="ident" id="3238949">String</span><span class="op" id="3238955">(</span><span class="op" id="3238956">)</span>&nbsp;<span class="op" id="3238958">+</span>&nbsp;<span class="string" id="3238960">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3238965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3238968">return</span>&nbsp;<span class="string" id="3238975">&#34;json:&nbsp;Unmarshal(nil&nbsp;&#34;</span>&nbsp;<span class="op" id="3238998">+</span>&nbsp;<span class="ident" id="3239000">e</span><span class="op" id="3239001">.</span><span class="ident" id="3239002">Type</span><span class="op" id="3239006">.</span><span class="ident" id="3239007">String</span><span class="op" id="3239013">(</span><span class="op" id="3239014">)</span>&nbsp;<span class="op" id="3239016">+</span>&nbsp;<span class="string" id="3239018">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="3239022">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="3239025">func</span>&nbsp;<span class="op" id="3239030">(</span><span class="ident" id="3239031">d</span>&nbsp;<span class="op" id="3239033">*</span><span class="ident" id="3239034">decodeState</span><span class="op" id="3239045">)</span>&nbsp;<span class="ident" id="3239047">unmarshal</span><span class="op" id="3239056">(</span><span class="ident" id="3239057">v</span>&nbsp;<span class="keyword" id="3239059">interface</span><span class="op" id="3239068">{</span><span class="op" id="3239069">}</span><span class="op" id="3239070">)</span>&nbsp;<span class="op" id="3239072">(</span><span class="ident" id="3239073">err</span>&nbsp;<span class="builtintype" id="3239077">error</span><span class="op" id="3239082">)</span>&nbsp;<span class="op" id="3239084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239087">defer</span>&nbsp;<span class="keyword" id="3239093">func</span><span class="op" id="3239097">(</span><span class="op" id="3239098">)</span>&nbsp;<span class="op" id="3239100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239104">if</span>&nbsp;<span class="ident" id="3239107">r</span>&nbsp;<span class="op" id="3239109">:=</span>&nbsp;<span class="builtinfunc" id="3239112">recover</span><span class="op" id="3239119">(</span><span class="op" id="3239120">)</span><span class="op" id="3239121">;</span>&nbsp;<span class="ident" id="3239123">r</span>&nbsp;<span class="op" id="3239125">!=</span>&nbsp;<span class="ident" id="3239128">nil</span>&nbsp;<span class="op" id="3239132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239137">if</span>&nbsp;<span class="ident" id="3239140">_</span><span class="op" id="3239141">,</span>&nbsp;<span class="ident" id="3239143">ok</span>&nbsp;<span class="op" id="3239146">:=</span>&nbsp;<span class="ident" id="3239149">r</span><span class="op" id="3239150">.</span><span class="op" id="3239151">(</span><span class="ident" id="3239152">runtime</span><span class="op" id="3239159">.</span><span class="ident" id="3239160">Error</span><span class="op" id="3239165">)</span><span class="op" id="3239166">;</span>&nbsp;<span class="ident" id="3239168">ok</span>&nbsp;<span class="op" id="3239171">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3239177">panic</span><span class="op" id="3239182">(</span><span class="ident" id="3239183">r</span><span class="op" id="3239184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239194">err</span>&nbsp;<span class="op" id="3239198">=</span>&nbsp;<span class="ident" id="3239200">r</span><span class="op" id="3239201">.</span><span class="op" id="3239202">(</span><span class="builtintype" id="3239203">error</span><span class="op" id="3239208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239215">}</span><span class="op" id="3239216">(</span><span class="op" id="3239217">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239221">rv</span>&nbsp;<span class="op" id="3239224">:=</span>&nbsp;<span class="ident" id="3239227">reflect</span><span class="op" id="3239234">.</span><span class="ident" id="3239235">ValueOf</span><span class="op" id="3239242">(</span><span class="ident" id="3239243">v</span><span class="op" id="3239244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239247">if</span>&nbsp;<span class="ident" id="3239250">rv</span><span class="op" id="3239252">.</span><span class="ident" id="3239253">Kind</span><span class="op" id="3239257">(</span><span class="op" id="3239258">)</span>&nbsp;<span class="op" id="3239260">!=</span>&nbsp;<span class="ident" id="3239263">reflect</span><span class="op" id="3239270">.</span><span class="ident" id="3239271">Ptr</span>&nbsp;<span class="op" id="3239275">||</span>&nbsp;<span class="ident" id="3239278">rv</span><span class="op" id="3239280">.</span><span class="ident" id="3239281">IsNil</span><span class="op" id="3239286">(</span><span class="op" id="3239287">)</span>&nbsp;<span class="op" id="3239289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239293">return</span>&nbsp;<span class="op" id="3239300">&amp;</span><span class="ident" id="3239301">InvalidUnmarshalError</span><span class="op" id="3239322">{</span><span class="ident" id="3239323">reflect</span><span class="op" id="3239330">.</span><span class="ident" id="3239331">TypeOf</span><span class="op" id="3239337">(</span><span class="ident" id="3239338">v</span><span class="op" id="3239339">)</span><span class="op" id="3239340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3239343">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239347">d</span><span class="op" id="3239348">.</span><span class="ident" id="3239349">scan</span><span class="op" id="3239353">.</span><span class="ident" id="3239354">reset</span><span class="op" id="3239359">(</span><span class="op" id="3239360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3239363">//&nbsp;We&nbsp;decode&nbsp;rv&nbsp;not&nbsp;rv.Elem&nbsp;because&nbsp;the&nbsp;Unmarshaler&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3239426">//&nbsp;test&nbsp;must&nbsp;be&nbsp;applied&nbsp;at&nbsp;the&nbsp;top&nbsp;level&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239482">d</span><span class="op" id="3239483">.</span><span class="ident" id="3239484">value</span><span class="op" id="3239489">(</span><span class="ident" id="3239490">rv</span><span class="op" id="3239492">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239495">return</span>&nbsp;<span class="ident" id="3239502">d</span><span class="op" id="3239503">.</span><span class="ident" id="3239504">savedError</span><br>
<span class="lineno"></span><span class="op" id="3239515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3239518">//&nbsp;A&nbsp;Number&nbsp;represents&nbsp;a&nbsp;JSON&nbsp;number&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="3239564">type</span>&nbsp;<span class="ident" id="3239569">Number</span>&nbsp;<span class="builtintype" id="3239576">string</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="3239584">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;literal&nbsp;text&nbsp;of&nbsp;the&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="3239634">func</span>&nbsp;<span class="op" id="3239639">(</span><span class="ident" id="3239640">n</span>&nbsp;<span class="ident" id="3239642">Number</span><span class="op" id="3239648">)</span>&nbsp;<span class="ident" id="3239650">String</span><span class="op" id="3239656">(</span><span class="op" id="3239657">)</span>&nbsp;<span class="builtintype" id="3239659">string</span>&nbsp;<span class="op" id="3239666">{</span>&nbsp;<span class="keyword" id="3239668">return</span>&nbsp;<span class="builtintype" id="3239675">string</span><span class="op" id="3239681">(</span><span class="ident" id="3239682">n</span><span class="op" id="3239683">)</span>&nbsp;<span class="op" id="3239685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3239688">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno">160</span><span class="keyword" id="3239732">func</span>&nbsp;<span class="op" id="3239737">(</span><span class="ident" id="3239738">n</span>&nbsp;<span class="ident" id="3239740">Number</span><span class="op" id="3239746">)</span>&nbsp;<span class="ident" id="3239748">Float64</span><span class="op" id="3239755">(</span><span class="op" id="3239756">)</span>&nbsp;<span class="op" id="3239758">(</span><span class="builtintype" id="3239759">float64</span><span class="op" id="3239766">,</span>&nbsp;<span class="builtintype" id="3239768">error</span><span class="op" id="3239773">)</span>&nbsp;<span class="op" id="3239775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239778">return</span>&nbsp;<span class="ident" id="3239785">strconv</span><span class="op" id="3239792">.</span><span class="ident" id="3239793">ParseFloat</span><span class="op" id="3239803">(</span><span class="builtintype" id="3239804">string</span><span class="op" id="3239810">(</span><span class="ident" id="3239811">n</span><span class="op" id="3239812">)</span><span class="op" id="3239813">,</span>&nbsp;<span class="num" id="3239815">64</span><span class="op" id="3239817">)</span><br>
<span class="lineno"></span><span class="op" id="3239819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3239822">//&nbsp;Int64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno">165</span><span class="keyword" id="3239863">func</span>&nbsp;<span class="op" id="3239868">(</span><span class="ident" id="3239869">n</span>&nbsp;<span class="ident" id="3239871">Number</span><span class="op" id="3239877">)</span>&nbsp;<span class="ident" id="3239879">Int64</span><span class="op" id="3239884">(</span><span class="op" id="3239885">)</span>&nbsp;<span class="op" id="3239887">(</span><span class="ident" id="3239888">int64</span><span class="op" id="3239893">,</span>&nbsp;<span class="builtintype" id="3239895">error</span><span class="op" id="3239900">)</span>&nbsp;<span class="op" id="3239902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3239905">return</span>&nbsp;<span class="ident" id="3239912">strconv</span><span class="op" id="3239919">.</span><span class="ident" id="3239920">ParseInt</span><span class="op" id="3239928">(</span><span class="builtintype" id="3239929">string</span><span class="op" id="3239935">(</span><span class="ident" id="3239936">n</span><span class="op" id="3239937">)</span><span class="op" id="3239938">,</span>&nbsp;<span class="num" id="3239940">10</span><span class="op" id="3239942">,</span>&nbsp;<span class="num" id="3239944">64</span><span class="op" id="3239946">)</span><br>
<span class="lineno"></span><span class="op" id="3239948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3239951">//&nbsp;decodeState&nbsp;represents&nbsp;the&nbsp;state&nbsp;while&nbsp;decoding&nbsp;a&nbsp;JSON&nbsp;value.</span><br>
<span class="lineno">170</span><span class="keyword" id="3240016">type</span>&nbsp;<span class="ident" id="3240021">decodeState</span>&nbsp;<span class="keyword" id="3240033">struct</span>&nbsp;<span class="op" id="3240040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240043">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3240054">[</span><span class="op" id="3240055">]</span><span class="builtintype" id="3240056">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240062">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3240073">int</span>&nbsp;<span class="comment" id="3240077">//&nbsp;read&nbsp;offset&nbsp;in&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240101">scan</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3240112">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240121">nextscan</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3240132">scanner</span>&nbsp;<span class="comment" id="3240140">//&nbsp;for&nbsp;calls&nbsp;to&nbsp;nextValue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240167">savedError</span>&nbsp;<span class="builtintype" id="3240178">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240185">useNumber</span>&nbsp;&nbsp;<span class="builtintype" id="3240196">bool</span><br>
<span class="lineno"></span><span class="op" id="3240201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3240204">//&nbsp;errPhase&nbsp;is&nbsp;used&nbsp;for&nbsp;errors&nbsp;that&nbsp;should&nbsp;not&nbsp;happen&nbsp;unless</span><br>
<span class="lineno">180</span><span class="comment" id="3240265">//&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;JSON&nbsp;decoder&nbsp;or&nbsp;something&nbsp;is&nbsp;editing</span><br>
<span class="lineno"></span><span class="comment" id="3240327">//&nbsp;the&nbsp;data&nbsp;slice&nbsp;while&nbsp;the&nbsp;decoder&nbsp;executes.</span><br>
<span class="lineno"></span><span class="keyword" id="3240373">var</span>&nbsp;<span class="ident" id="3240377">errPhase</span>&nbsp;<span class="op" id="3240386">=</span>&nbsp;<span class="ident" id="3240388">errors</span><span class="op" id="3240394">.</span><span class="ident" id="3240395">New</span><span class="op" id="3240398">(</span><span class="string" id="3240399">&#34;JSON&nbsp;decoder&nbsp;out&nbsp;of&nbsp;sync&nbsp;-&nbsp;data&nbsp;changing&nbsp;underfoot?&#34;</span><span class="op" id="3240452">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3240455">func</span>&nbsp;<span class="op" id="3240460">(</span><span class="ident" id="3240461">d</span>&nbsp;<span class="op" id="3240463">*</span><span class="ident" id="3240464">decodeState</span><span class="op" id="3240475">)</span>&nbsp;<span class="ident" id="3240477">init</span><span class="op" id="3240481">(</span><span class="ident" id="3240482">data</span>&nbsp;<span class="op" id="3240487">[</span><span class="op" id="3240488">]</span><span class="builtintype" id="3240489">byte</span><span class="op" id="3240493">)</span>&nbsp;<span class="op" id="3240495">*</span><span class="ident" id="3240496">decodeState</span>&nbsp;<span class="op" id="3240508">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240511">d</span><span class="op" id="3240512">.</span><span class="ident" id="3240513">data</span>&nbsp;<span class="op" id="3240518">=</span>&nbsp;<span class="ident" id="3240520">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240526">d</span><span class="op" id="3240527">.</span><span class="ident" id="3240528">off</span>&nbsp;<span class="op" id="3240532">=</span>&nbsp;<span class="num" id="3240534">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240537">d</span><span class="op" id="3240538">.</span><span class="ident" id="3240539">savedError</span>&nbsp;<span class="op" id="3240550">=</span>&nbsp;<span class="ident" id="3240552">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240557">return</span>&nbsp;<span class="ident" id="3240564">d</span><br>
<span class="lineno"></span><span class="op" id="3240566">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="3240569">//&nbsp;error&nbsp;aborts&nbsp;the&nbsp;decoding&nbsp;by&nbsp;panicking&nbsp;with&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="3240621">func</span>&nbsp;<span class="op" id="3240626">(</span><span class="ident" id="3240627">d</span>&nbsp;<span class="op" id="3240629">*</span><span class="ident" id="3240630">decodeState</span><span class="op" id="3240641">)</span>&nbsp;<span class="builtintype" id="3240643">error</span><span class="op" id="3240648">(</span><span class="ident" id="3240649">err</span>&nbsp;<span class="builtintype" id="3240653">error</span><span class="op" id="3240658">)</span>&nbsp;<span class="op" id="3240660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3240663">panic</span><span class="op" id="3240668">(</span><span class="ident" id="3240669">err</span><span class="op" id="3240672">)</span><br>
<span class="lineno"></span><span class="op" id="3240674">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3240677">//&nbsp;saveError&nbsp;saves&nbsp;the&nbsp;first&nbsp;err&nbsp;it&nbsp;is&nbsp;called&nbsp;with,</span><br>
<span class="lineno"></span><span class="comment" id="3240729">//&nbsp;for&nbsp;reporting&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unmarshal.</span><br>
<span class="lineno"></span><span class="keyword" id="3240775">func</span>&nbsp;<span class="op" id="3240780">(</span><span class="ident" id="3240781">d</span>&nbsp;<span class="op" id="3240783">*</span><span class="ident" id="3240784">decodeState</span><span class="op" id="3240795">)</span>&nbsp;<span class="ident" id="3240797">saveError</span><span class="op" id="3240806">(</span><span class="ident" id="3240807">err</span>&nbsp;<span class="builtintype" id="3240811">error</span><span class="op" id="3240816">)</span>&nbsp;<span class="op" id="3240818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240821">if</span>&nbsp;<span class="ident" id="3240824">d</span><span class="op" id="3240825">.</span><span class="ident" id="3240826">savedError</span>&nbsp;<span class="op" id="3240837">==</span>&nbsp;<span class="ident" id="3240840">nil</span>&nbsp;<span class="op" id="3240844">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240848">d</span><span class="op" id="3240849">.</span><span class="ident" id="3240850">savedError</span>&nbsp;<span class="op" id="3240861">=</span>&nbsp;<span class="ident" id="3240863">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240868">}</span><br>
<span class="lineno"></span><span class="op" id="3240870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3240873">//&nbsp;next&nbsp;cuts&nbsp;off&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;full&nbsp;JSON&nbsp;value&nbsp;in&nbsp;d.data[d.off:].</span><br>
<span class="lineno">205</span><span class="comment" id="3240946">//&nbsp;The&nbsp;next&nbsp;value&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;an&nbsp;object&nbsp;or&nbsp;array,&nbsp;not&nbsp;a&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="3241014">func</span>&nbsp;<span class="op" id="3241019">(</span><span class="ident" id="3241020">d</span>&nbsp;<span class="op" id="3241022">*</span><span class="ident" id="3241023">decodeState</span><span class="op" id="3241034">)</span>&nbsp;<span class="ident" id="3241036">next</span><span class="op" id="3241040">(</span><span class="op" id="3241041">)</span>&nbsp;<span class="op" id="3241043">[</span><span class="op" id="3241044">]</span><span class="builtintype" id="3241045">byte</span>&nbsp;<span class="op" id="3241050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241053">c</span>&nbsp;<span class="op" id="3241055">:=</span>&nbsp;<span class="ident" id="3241058">d</span><span class="op" id="3241059">.</span><span class="ident" id="3241060">data</span><span class="op" id="3241064">[</span><span class="ident" id="3241065">d</span><span class="op" id="3241066">.</span><span class="ident" id="3241067">off</span><span class="op" id="3241070">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241073">item</span><span class="op" id="3241077">,</span>&nbsp;<span class="ident" id="3241079">rest</span><span class="op" id="3241083">,</span>&nbsp;<span class="ident" id="3241085">err</span>&nbsp;<span class="op" id="3241089">:=</span>&nbsp;<span class="ident" id="3241092">nextValue</span><span class="op" id="3241101">(</span><span class="ident" id="3241102">d</span><span class="op" id="3241103">.</span><span class="ident" id="3241104">data</span><span class="op" id="3241108">[</span><span class="ident" id="3241109">d</span><span class="op" id="3241110">.</span><span class="ident" id="3241111">off</span><span class="op" id="3241114">:</span><span class="op" id="3241115">]</span><span class="op" id="3241116">,</span>&nbsp;<span class="op" id="3241118">&amp;</span><span class="ident" id="3241119">d</span><span class="op" id="3241120">.</span><span class="ident" id="3241121">nextscan</span><span class="op" id="3241129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241132">if</span>&nbsp;<span class="ident" id="3241135">err</span>&nbsp;<span class="op" id="3241139">!=</span>&nbsp;<span class="ident" id="3241142">nil</span>&nbsp;<span class="op" id="3241146">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241150">d</span><span class="op" id="3241151">.</span><span class="builtintype" id="3241152">error</span><span class="op" id="3241157">(</span><span class="ident" id="3241158">err</span><span class="op" id="3241161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241167">d</span><span class="op" id="3241168">.</span><span class="ident" id="3241169">off</span>&nbsp;<span class="op" id="3241173">=</span>&nbsp;<span class="builtinfunc" id="3241175">len</span><span class="op" id="3241178">(</span><span class="ident" id="3241179">d</span><span class="op" id="3241180">.</span><span class="ident" id="3241181">data</span><span class="op" id="3241185">)</span>&nbsp;<span class="op" id="3241187">-</span>&nbsp;<span class="builtinfunc" id="3241189">len</span><span class="op" id="3241192">(</span><span class="ident" id="3241193">rest</span><span class="op" id="3241197">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3241201">//&nbsp;Our&nbsp;scanner&nbsp;has&nbsp;seen&nbsp;the&nbsp;opening&nbsp;brace/bracket</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3241252">//&nbsp;and&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;object.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3241308">//&nbsp;invent&nbsp;a&nbsp;closing&nbsp;brace/bracket&nbsp;to&nbsp;get&nbsp;it&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241358">if</span>&nbsp;<span class="ident" id="3241361">c</span>&nbsp;<span class="op" id="3241363">==</span>&nbsp;<span class="string" id="3241366">&#39;{&#39;</span>&nbsp;<span class="op" id="3241370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241374">d</span><span class="op" id="3241375">.</span><span class="ident" id="3241376">scan</span><span class="op" id="3241380">.</span><span class="ident" id="3241381">step</span><span class="op" id="3241385">(</span><span class="op" id="3241386">&amp;</span><span class="ident" id="3241387">d</span><span class="op" id="3241388">.</span><span class="ident" id="3241389">scan</span><span class="op" id="3241393">,</span>&nbsp;<span class="string" id="3241395">&#39;}&#39;</span><span class="op" id="3241398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241401">}</span>&nbsp;<span class="keyword" id="3241403">else</span>&nbsp;<span class="op" id="3241408">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241412">d</span><span class="op" id="3241413">.</span><span class="ident" id="3241414">scan</span><span class="op" id="3241418">.</span><span class="ident" id="3241419">step</span><span class="op" id="3241423">(</span><span class="op" id="3241424">&amp;</span><span class="ident" id="3241425">d</span><span class="op" id="3241426">.</span><span class="ident" id="3241427">scan</span><span class="op" id="3241431">,</span>&nbsp;<span class="string" id="3241433">&#39;]&#39;</span><span class="op" id="3241436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241443">return</span>&nbsp;<span class="ident" id="3241450">item</span><br>
<span class="lineno"></span><span class="op" id="3241455">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3241458">//&nbsp;scanWhile&nbsp;processes&nbsp;bytes&nbsp;in&nbsp;d.data[d.off:]&nbsp;until&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3241514">//&nbsp;receives&nbsp;a&nbsp;scan&nbsp;code&nbsp;not&nbsp;equal&nbsp;to&nbsp;op.</span><br>
<span class="lineno"></span><span class="comment" id="3241555">//&nbsp;It&nbsp;updates&nbsp;d.off&nbsp;and&nbsp;returns&nbsp;the&nbsp;new&nbsp;scan&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="3241606">func</span>&nbsp;<span class="op" id="3241611">(</span><span class="ident" id="3241612">d</span>&nbsp;<span class="op" id="3241614">*</span><span class="ident" id="3241615">decodeState</span><span class="op" id="3241626">)</span>&nbsp;<span class="ident" id="3241628">scanWhile</span><span class="op" id="3241637">(</span><span class="ident" id="3241638">op</span>&nbsp;<span class="builtintype" id="3241641">int</span><span class="op" id="3241644">)</span>&nbsp;<span class="builtintype" id="3241646">int</span>&nbsp;<span class="op" id="3241650">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241653">var</span>&nbsp;<span class="ident" id="3241657">newOp</span>&nbsp;<span class="builtintype" id="3241663">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241668">for</span>&nbsp;<span class="op" id="3241672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241676">if</span>&nbsp;<span class="ident" id="3241679">d</span><span class="op" id="3241680">.</span><span class="ident" id="3241681">off</span>&nbsp;<span class="op" id="3241685">&gt;=</span>&nbsp;<span class="builtinfunc" id="3241688">len</span><span class="op" id="3241691">(</span><span class="ident" id="3241692">d</span><span class="op" id="3241693">.</span><span class="ident" id="3241694">data</span><span class="op" id="3241698">)</span>&nbsp;<span class="op" id="3241700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241705">newOp</span>&nbsp;<span class="op" id="3241711">=</span>&nbsp;<span class="ident" id="3241713">d</span><span class="op" id="3241714">.</span><span class="ident" id="3241715">scan</span><span class="op" id="3241719">.</span><span class="ident" id="3241720">eof</span><span class="op" id="3241723">(</span><span class="op" id="3241724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241729">d</span><span class="op" id="3241730">.</span><span class="ident" id="3241731">off</span>&nbsp;<span class="op" id="3241735">=</span>&nbsp;<span class="builtinfunc" id="3241737">len</span><span class="op" id="3241740">(</span><span class="ident" id="3241741">d</span><span class="op" id="3241742">.</span><span class="ident" id="3241743">data</span><span class="op" id="3241747">)</span>&nbsp;<span class="op" id="3241749">+</span>&nbsp;<span class="num" id="3241751">1</span>&nbsp;<span class="comment" id="3241753">//&nbsp;mark&nbsp;processed&nbsp;EOF&nbsp;with&nbsp;len+1</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241788">}</span>&nbsp;<span class="keyword" id="3241790">else</span>&nbsp;<span class="op" id="3241795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241800">c</span>&nbsp;<span class="op" id="3241802">:=</span>&nbsp;<span class="builtintype" id="3241805">int</span><span class="op" id="3241808">(</span><span class="ident" id="3241809">d</span><span class="op" id="3241810">.</span><span class="ident" id="3241811">data</span><span class="op" id="3241815">[</span><span class="ident" id="3241816">d</span><span class="op" id="3241817">.</span><span class="ident" id="3241818">off</span><span class="op" id="3241821">]</span><span class="op" id="3241822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241827">d</span><span class="op" id="3241828">.</span><span class="ident" id="3241829">off</span><span class="op" id="3241832">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3241838">newOp</span>&nbsp;<span class="op" id="3241844">=</span>&nbsp;<span class="ident" id="3241846">d</span><span class="op" id="3241847">.</span><span class="ident" id="3241848">scan</span><span class="op" id="3241852">.</span><span class="ident" id="3241853">step</span><span class="op" id="3241857">(</span><span class="op" id="3241858">&amp;</span><span class="ident" id="3241859">d</span><span class="op" id="3241860">.</span><span class="ident" id="3241861">scan</span><span class="op" id="3241865">,</span>&nbsp;<span class="ident" id="3241867">c</span><span class="op" id="3241868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241872">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241876">if</span>&nbsp;<span class="ident" id="3241879">newOp</span>&nbsp;<span class="op" id="3241885">!=</span>&nbsp;<span class="ident" id="3241888">op</span>&nbsp;<span class="op" id="3241891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241896">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3241907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241910">return</span>&nbsp;<span class="ident" id="3241917">newOp</span><br>
<span class="lineno">245</span><span class="op" id="3241923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3241926">//&nbsp;value&nbsp;decodes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;from&nbsp;d.data[d.off:]&nbsp;into&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3241992">//&nbsp;it&nbsp;updates&nbsp;d.off&nbsp;to&nbsp;point&nbsp;past&nbsp;the&nbsp;decoded&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="3242045">func</span>&nbsp;<span class="op" id="3242050">(</span><span class="ident" id="3242051">d</span>&nbsp;<span class="op" id="3242053">*</span><span class="ident" id="3242054">decodeState</span><span class="op" id="3242065">)</span>&nbsp;<span class="ident" id="3242067">value</span><span class="op" id="3242072">(</span><span class="ident" id="3242073">v</span>&nbsp;<span class="ident" id="3242075">reflect</span><span class="op" id="3242082">.</span><span class="ident" id="3242083">Value</span><span class="op" id="3242088">)</span>&nbsp;<span class="op" id="3242090">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242093">if</span>&nbsp;<span class="op" id="3242096">!</span><span class="ident" id="3242097">v</span><span class="op" id="3242098">.</span><span class="ident" id="3242099">IsValid</span><span class="op" id="3242106">(</span><span class="op" id="3242107">)</span>&nbsp;<span class="op" id="3242109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242113">_</span><span class="op" id="3242114">,</span>&nbsp;<span class="ident" id="3242116">rest</span><span class="op" id="3242120">,</span>&nbsp;<span class="ident" id="3242122">err</span>&nbsp;<span class="op" id="3242126">:=</span>&nbsp;<span class="ident" id="3242129">nextValue</span><span class="op" id="3242138">(</span><span class="ident" id="3242139">d</span><span class="op" id="3242140">.</span><span class="ident" id="3242141">data</span><span class="op" id="3242145">[</span><span class="ident" id="3242146">d</span><span class="op" id="3242147">.</span><span class="ident" id="3242148">off</span><span class="op" id="3242151">:</span><span class="op" id="3242152">]</span><span class="op" id="3242153">,</span>&nbsp;<span class="op" id="3242155">&amp;</span><span class="ident" id="3242156">d</span><span class="op" id="3242157">.</span><span class="ident" id="3242158">nextscan</span><span class="op" id="3242166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242170">if</span>&nbsp;<span class="ident" id="3242173">err</span>&nbsp;<span class="op" id="3242177">!=</span>&nbsp;<span class="ident" id="3242180">nil</span>&nbsp;<span class="op" id="3242184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242189">d</span><span class="op" id="3242190">.</span><span class="builtintype" id="3242191">error</span><span class="op" id="3242196">(</span><span class="ident" id="3242197">err</span><span class="op" id="3242200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242204">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242208">d</span><span class="op" id="3242209">.</span><span class="ident" id="3242210">off</span>&nbsp;<span class="op" id="3242214">=</span>&nbsp;<span class="builtinfunc" id="3242216">len</span><span class="op" id="3242219">(</span><span class="ident" id="3242220">d</span><span class="op" id="3242221">.</span><span class="ident" id="3242222">data</span><span class="op" id="3242226">)</span>&nbsp;<span class="op" id="3242228">-</span>&nbsp;<span class="builtinfunc" id="3242230">len</span><span class="op" id="3242233">(</span><span class="ident" id="3242234">rest</span><span class="op" id="3242238">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242243">//&nbsp;d.scan&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242304">//&nbsp;Feed&nbsp;in&nbsp;an&nbsp;empty&nbsp;string&nbsp;-&nbsp;the&nbsp;shortest,&nbsp;simplest&nbsp;value&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242366">//&nbsp;so&nbsp;that&nbsp;it&nbsp;knows&nbsp;we&nbsp;got&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242420">if</span>&nbsp;<span class="ident" id="3242423">d</span><span class="op" id="3242424">.</span><span class="ident" id="3242425">scan</span><span class="op" id="3242429">.</span><span class="ident" id="3242430">redo</span>&nbsp;<span class="op" id="3242435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242440">//&nbsp;rewind.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242454">d</span><span class="op" id="3242455">.</span><span class="ident" id="3242456">scan</span><span class="op" id="3242460">.</span><span class="ident" id="3242461">redo</span>&nbsp;<span class="op" id="3242466">=</span>&nbsp;<span class="builtintype" id="3242468">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242477">d</span><span class="op" id="3242478">.</span><span class="ident" id="3242479">scan</span><span class="op" id="3242483">.</span><span class="ident" id="3242484">step</span>&nbsp;<span class="op" id="3242489">=</span>&nbsp;<span class="ident" id="3242491">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242509">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242513">d</span><span class="op" id="3242514">.</span><span class="ident" id="3242515">scan</span><span class="op" id="3242519">.</span><span class="ident" id="3242520">step</span><span class="op" id="3242524">(</span><span class="op" id="3242525">&amp;</span><span class="ident" id="3242526">d</span><span class="op" id="3242527">.</span><span class="ident" id="3242528">scan</span><span class="op" id="3242532">,</span>&nbsp;<span class="string" id="3242534">&#39;&#34;&#39;</span><span class="op" id="3242537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242541">d</span><span class="op" id="3242542">.</span><span class="ident" id="3242543">scan</span><span class="op" id="3242547">.</span><span class="ident" id="3242548">step</span><span class="op" id="3242552">(</span><span class="op" id="3242553">&amp;</span><span class="ident" id="3242554">d</span><span class="op" id="3242555">.</span><span class="ident" id="3242556">scan</span><span class="op" id="3242560">,</span>&nbsp;<span class="string" id="3242562">&#39;&#34;&#39;</span><span class="op" id="3242565">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242570">n</span>&nbsp;<span class="op" id="3242572">:=</span>&nbsp;<span class="builtinfunc" id="3242575">len</span><span class="op" id="3242578">(</span><span class="ident" id="3242579">d</span><span class="op" id="3242580">.</span><span class="ident" id="3242581">scan</span><span class="op" id="3242585">.</span><span class="ident" id="3242586">parseState</span><span class="op" id="3242596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242600">if</span>&nbsp;<span class="ident" id="3242603">n</span>&nbsp;<span class="op" id="3242605">&gt;</span>&nbsp;<span class="num" id="3242607">0</span>&nbsp;<span class="op" id="3242609">&amp;&amp;</span>&nbsp;<span class="ident" id="3242612">d</span><span class="op" id="3242613">.</span><span class="ident" id="3242614">scan</span><span class="op" id="3242618">.</span><span class="ident" id="3242619">parseState</span><span class="op" id="3242629">[</span><span class="ident" id="3242630">n</span><span class="op" id="3242631">-</span><span class="num" id="3242632">1</span><span class="op" id="3242633">]</span>&nbsp;<span class="op" id="3242635">==</span>&nbsp;<span class="ident" id="3242638">parseObjectKey</span>&nbsp;<span class="op" id="3242653">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242658">//&nbsp;d.scan&nbsp;thinks&nbsp;we&nbsp;just&nbsp;read&nbsp;an&nbsp;object&nbsp;key;&nbsp;finish&nbsp;the&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242724">d</span><span class="op" id="3242725">.</span><span class="ident" id="3242726">scan</span><span class="op" id="3242730">.</span><span class="ident" id="3242731">step</span><span class="op" id="3242735">(</span><span class="op" id="3242736">&amp;</span><span class="ident" id="3242737">d</span><span class="op" id="3242738">.</span><span class="ident" id="3242739">scan</span><span class="op" id="3242743">,</span>&nbsp;<span class="string" id="3242745">&#39;:&#39;</span><span class="op" id="3242748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242753">d</span><span class="op" id="3242754">.</span><span class="ident" id="3242755">scan</span><span class="op" id="3242759">.</span><span class="ident" id="3242760">step</span><span class="op" id="3242764">(</span><span class="op" id="3242765">&amp;</span><span class="ident" id="3242766">d</span><span class="op" id="3242767">.</span><span class="ident" id="3242768">scan</span><span class="op" id="3242772">,</span>&nbsp;<span class="string" id="3242774">&#39;&#34;&#39;</span><span class="op" id="3242777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242782">d</span><span class="op" id="3242783">.</span><span class="ident" id="3242784">scan</span><span class="op" id="3242788">.</span><span class="ident" id="3242789">step</span><span class="op" id="3242793">(</span><span class="op" id="3242794">&amp;</span><span class="ident" id="3242795">d</span><span class="op" id="3242796">.</span><span class="ident" id="3242797">scan</span><span class="op" id="3242801">,</span>&nbsp;<span class="string" id="3242803">&#39;&#34;&#39;</span><span class="op" id="3242806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242811">d</span><span class="op" id="3242812">.</span><span class="ident" id="3242813">scan</span><span class="op" id="3242817">.</span><span class="ident" id="3242818">step</span><span class="op" id="3242822">(</span><span class="op" id="3242823">&amp;</span><span class="ident" id="3242824">d</span><span class="op" id="3242825">.</span><span class="ident" id="3242826">scan</span><span class="op" id="3242830">,</span>&nbsp;<span class="string" id="3242832">&#39;}&#39;</span><span class="op" id="3242835">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242844">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242856">switch</span>&nbsp;<span class="ident" id="3242863">op</span>&nbsp;<span class="op" id="3242866">:=</span>&nbsp;<span class="ident" id="3242869">d</span><span class="op" id="3242870">.</span><span class="ident" id="3242871">scanWhile</span><span class="op" id="3242880">(</span><span class="ident" id="3242881">scanSkipSpace</span><span class="op" id="3242894">)</span><span class="op" id="3242895">;</span>&nbsp;<span class="ident" id="3242897">op</span>&nbsp;<span class="op" id="3242900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242903">default</span><span class="op" id="3242910">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242914">d</span><span class="op" id="3242915">.</span><span class="builtintype" id="3242916">error</span><span class="op" id="3242921">(</span><span class="ident" id="3242922">errPhase</span><span class="op" id="3242930">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242934">case</span>&nbsp;<span class="ident" id="3242939">scanBeginArray</span><span class="op" id="3242953">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242957">d</span><span class="op" id="3242958">.</span><span class="ident" id="3242959">array</span><span class="op" id="3242964">(</span><span class="ident" id="3242965">v</span><span class="op" id="3242966">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242970">case</span>&nbsp;<span class="ident" id="3242975">scanBeginObject</span><span class="op" id="3242990">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242994">d</span><span class="op" id="3242995">.</span><span class="ident" id="3242996">object</span><span class="op" id="3243002">(</span><span class="ident" id="3243003">v</span><span class="op" id="3243004">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243008">case</span>&nbsp;<span class="ident" id="3243013">scanBeginLiteral</span><span class="op" id="3243029">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243033">d</span><span class="op" id="3243034">.</span><span class="ident" id="3243035">literal</span><span class="op" id="3243042">(</span><span class="ident" id="3243043">v</span><span class="op" id="3243044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243047">}</span><br>
<span class="lineno"></span><span class="op" id="3243049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="3243052">type</span>&nbsp;<span class="ident" id="3243057">unquotedValue</span>&nbsp;<span class="keyword" id="3243071">struct</span><span class="op" id="3243077">{</span><span class="op" id="3243078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3243081">//&nbsp;valueQuoted&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;decodes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3243124">//&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;literal&nbsp;null&nbsp;into&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3243190">//&nbsp;If&nbsp;it&nbsp;finds&nbsp;anything&nbsp;other&nbsp;than&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;null,</span><br>
<span class="lineno">300</span><span class="comment" id="3243258">//&nbsp;valueQuoted&nbsp;returns&nbsp;unquotedValue{}.</span><br>
<span class="lineno"></span><span class="keyword" id="3243298">func</span>&nbsp;<span class="op" id="3243303">(</span><span class="ident" id="3243304">d</span>&nbsp;<span class="op" id="3243306">*</span><span class="ident" id="3243307">decodeState</span><span class="op" id="3243318">)</span>&nbsp;<span class="ident" id="3243320">valueQuoted</span><span class="op" id="3243331">(</span><span class="op" id="3243332">)</span>&nbsp;<span class="keyword" id="3243334">interface</span><span class="op" id="3243343">{</span><span class="op" id="3243344">}</span>&nbsp;<span class="op" id="3243346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243349">switch</span>&nbsp;<span class="ident" id="3243356">op</span>&nbsp;<span class="op" id="3243359">:=</span>&nbsp;<span class="ident" id="3243362">d</span><span class="op" id="3243363">.</span><span class="ident" id="3243364">scanWhile</span><span class="op" id="3243373">(</span><span class="ident" id="3243374">scanSkipSpace</span><span class="op" id="3243387">)</span><span class="op" id="3243388">;</span>&nbsp;<span class="ident" id="3243390">op</span>&nbsp;<span class="op" id="3243393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243396">default</span><span class="op" id="3243403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243407">d</span><span class="op" id="3243408">.</span><span class="builtintype" id="3243409">error</span><span class="op" id="3243414">(</span><span class="ident" id="3243415">errPhase</span><span class="op" id="3243423">)</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243427">case</span>&nbsp;<span class="ident" id="3243432">scanBeginArray</span><span class="op" id="3243446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243450">d</span><span class="op" id="3243451">.</span><span class="ident" id="3243452">array</span><span class="op" id="3243457">(</span><span class="ident" id="3243458">reflect</span><span class="op" id="3243465">.</span><span class="ident" id="3243466">Value</span><span class="op" id="3243471">{</span><span class="op" id="3243472">}</span><span class="op" id="3243473">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243477">case</span>&nbsp;<span class="ident" id="3243482">scanBeginObject</span><span class="op" id="3243497">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243501">d</span><span class="op" id="3243502">.</span><span class="ident" id="3243503">object</span><span class="op" id="3243509">(</span><span class="ident" id="3243510">reflect</span><span class="op" id="3243517">.</span><span class="ident" id="3243518">Value</span><span class="op" id="3243523">{</span><span class="op" id="3243524">}</span><span class="op" id="3243525">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243529">case</span>&nbsp;<span class="ident" id="3243534">scanBeginLiteral</span><span class="op" id="3243550">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243554">switch</span>&nbsp;<span class="ident" id="3243561">v</span>&nbsp;<span class="op" id="3243563">:=</span>&nbsp;<span class="ident" id="3243566">d</span><span class="op" id="3243567">.</span><span class="ident" id="3243568">literalInterface</span><span class="op" id="3243584">(</span><span class="op" id="3243585">)</span><span class="op" id="3243586">.</span><span class="op" id="3243587">(</span><span class="keyword" id="3243588">type</span><span class="op" id="3243592">)</span>&nbsp;<span class="op" id="3243594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243598">case</span>&nbsp;<span class="ident" id="3243603">nil</span><span class="op" id="3243606">,</span>&nbsp;<span class="builtintype" id="3243608">string</span><span class="op" id="3243614">:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243619">return</span>&nbsp;<span class="ident" id="3243626">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243636">return</span>&nbsp;<span class="ident" id="3243643">unquotedValue</span><span class="op" id="3243656">{</span><span class="op" id="3243657">}</span><br>
<span class="lineno"></span><span class="op" id="3243659">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="3243662">//&nbsp;indirect&nbsp;walks&nbsp;down&nbsp;v&nbsp;allocating&nbsp;pointers&nbsp;as&nbsp;needed,</span><br>
<span class="lineno"></span><span class="comment" id="3243718">//&nbsp;until&nbsp;it&nbsp;gets&nbsp;to&nbsp;a&nbsp;non-pointer.</span><br>
<span class="lineno"></span><span class="comment" id="3243753">//&nbsp;if&nbsp;it&nbsp;encounters&nbsp;an&nbsp;Unmarshaler,&nbsp;indirect&nbsp;stops&nbsp;and&nbsp;returns&nbsp;that.</span><br>
<span class="lineno"></span><span class="comment" id="3243822">//&nbsp;if&nbsp;decodingNull&nbsp;is&nbsp;true,&nbsp;indirect&nbsp;stops&nbsp;at&nbsp;the&nbsp;last&nbsp;pointer&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;nil.</span><br>
<span class="lineno">325</span><span class="keyword" id="3243910">func</span>&nbsp;<span class="op" id="3243915">(</span><span class="ident" id="3243916">d</span>&nbsp;<span class="op" id="3243918">*</span><span class="ident" id="3243919">decodeState</span><span class="op" id="3243930">)</span>&nbsp;<span class="ident" id="3243932">indirect</span><span class="op" id="3243940">(</span><span class="ident" id="3243941">v</span>&nbsp;<span class="ident" id="3243943">reflect</span><span class="op" id="3243950">.</span><span class="ident" id="3243951">Value</span><span class="op" id="3243956">,</span>&nbsp;<span class="ident" id="3243958">decodingNull</span>&nbsp;<span class="builtintype" id="3243971">bool</span><span class="op" id="3243975">)</span>&nbsp;<span class="op" id="3243977">(</span><span class="ident" id="3243978">Unmarshaler</span><span class="op" id="3243989">,</span>&nbsp;<span class="ident" id="3243991">encoding</span><span class="op" id="3243999">.</span><span class="ident" id="3244000">TextUnmarshaler</span><span class="op" id="3244015">,</span>&nbsp;<span class="ident" id="3244017">reflect</span><span class="op" id="3244024">.</span><span class="ident" id="3244025">Value</span><span class="op" id="3244030">)</span>&nbsp;<span class="op" id="3244032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3244035">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;named&nbsp;type&nbsp;and&nbsp;is&nbsp;addressable,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3244080">//&nbsp;start&nbsp;with&nbsp;its&nbsp;address,&nbsp;so&nbsp;that&nbsp;if&nbsp;the&nbsp;type&nbsp;has&nbsp;pointer&nbsp;methods,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3244149">//&nbsp;we&nbsp;find&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244167">if</span>&nbsp;<span class="ident" id="3244170">v</span><span class="op" id="3244171">.</span><span class="ident" id="3244172">Kind</span><span class="op" id="3244176">(</span><span class="op" id="3244177">)</span>&nbsp;<span class="op" id="3244179">!=</span>&nbsp;<span class="ident" id="3244182">reflect</span><span class="op" id="3244189">.</span><span class="ident" id="3244190">Ptr</span>&nbsp;<span class="op" id="3244194">&amp;&amp;</span>&nbsp;<span class="ident" id="3244197">v</span><span class="op" id="3244198">.</span><span class="ident" id="3244199">Type</span><span class="op" id="3244203">(</span><span class="op" id="3244204">)</span><span class="op" id="3244205">.</span><span class="ident" id="3244206">Name</span><span class="op" id="3244210">(</span><span class="op" id="3244211">)</span>&nbsp;<span class="op" id="3244213">!=</span>&nbsp;<span class="string" id="3244216">&#34;&#34;</span>&nbsp;<span class="op" id="3244219">&amp;&amp;</span>&nbsp;<span class="ident" id="3244222">v</span><span class="op" id="3244223">.</span><span class="ident" id="3244224">CanAddr</span><span class="op" id="3244231">(</span><span class="op" id="3244232">)</span>&nbsp;<span class="op" id="3244234">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3244238">v</span>&nbsp;<span class="op" id="3244240">=</span>&nbsp;<span class="ident" id="3244242">v</span><span class="op" id="3244243">.</span><span class="ident" id="3244244">Addr</span><span class="op" id="3244248">(</span><span class="op" id="3244249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244255">for</span>&nbsp;<span class="op" id="3244259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3244263">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3244326">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244353">if</span>&nbsp;<span class="ident" id="3244356">v</span><span class="op" id="3244357">.</span><span class="ident" id="3244358">Kind</span><span class="op" id="3244362">(</span><span class="op" id="3244363">)</span>&nbsp;<span class="op" id="3244365">==</span>&nbsp;<span class="ident" id="3244368">reflect</span><span class="op" id="3244375">.</span><span class="ident" id="3244376">Interface</span>&nbsp;<span class="op" id="3244386">&amp;&amp;</span>&nbsp;<span class="op" id="3244389">!</span><span class="ident" id="3244390">v</span><span class="op" id="3244391">.</span><span class="ident" id="3244392">IsNil</span><span class="op" id="3244397">(</span><span class="op" id="3244398">)</span>&nbsp;<span class="op" id="3244400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3244405">e</span>&nbsp;<span class="op" id="3244407">:=</span>&nbsp;<span class="ident" id="3244410">v</span><span class="op" id="3244411">.</span><span class="ident" id="3244412">Elem</span><span class="op" id="3244416">(</span><span class="op" id="3244417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244422">if</span>&nbsp;<span class="ident" id="3244425">e</span><span class="op" id="3244426">.</span><span class="ident" id="3244427">Kind</span><span class="op" id="3244431">(</span><span class="op" id="3244432">)</span>&nbsp;<span class="op" id="3244434">==</span>&nbsp;<span class="ident" id="3244437">reflect</span><span class="op" id="3244444">.</span><span class="ident" id="3244445">Ptr</span>&nbsp;<span class="op" id="3244449">&amp;&amp;</span>&nbsp;<span class="op" id="3244452">!</span><span class="ident" id="3244453">e</span><span class="op" id="3244454">.</span><span class="ident" id="3244455">IsNil</span><span class="op" id="3244460">(</span><span class="op" id="3244461">)</span>&nbsp;<span class="op" id="3244463">&amp;&amp;</span>&nbsp;<span class="op" id="3244466">(</span><span class="op" id="3244467">!</span><span class="ident" id="3244468">decodingNull</span>&nbsp;<span class="op" id="3244481">||</span>&nbsp;<span class="ident" id="3244484">e</span><span class="op" id="3244485">.</span><span class="ident" id="3244486">Elem</span><span class="op" id="3244490">(</span><span class="op" id="3244491">)</span><span class="op" id="3244492">.</span><span class="ident" id="3244493">Kind</span><span class="op" id="3244497">(</span><span class="op" id="3244498">)</span>&nbsp;<span class="op" id="3244500">==</span>&nbsp;<span class="ident" id="3244503">reflect</span><span class="op" id="3244510">.</span><span class="ident" id="3244511">Ptr</span><span class="op" id="3244514">)</span>&nbsp;<span class="op" id="3244516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3244522">v</span>&nbsp;<span class="op" id="3244524">=</span>&nbsp;<span class="ident" id="3244526">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244532">continue</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244553">if</span>&nbsp;<span class="ident" id="3244556">v</span><span class="op" id="3244557">.</span><span class="ident" id="3244558">Kind</span><span class="op" id="3244562">(</span><span class="op" id="3244563">)</span>&nbsp;<span class="op" id="3244565">!=</span>&nbsp;<span class="ident" id="3244568">reflect</span><span class="op" id="3244575">.</span><span class="ident" id="3244576">Ptr</span>&nbsp;<span class="op" id="3244580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244585">break</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244598">if</span>&nbsp;<span class="ident" id="3244601">v</span><span class="op" id="3244602">.</span><span class="ident" id="3244603">Elem</span><span class="op" id="3244607">(</span><span class="op" id="3244608">)</span><span class="op" id="3244609">.</span><span class="ident" id="3244610">Kind</span><span class="op" id="3244614">(</span><span class="op" id="3244615">)</span>&nbsp;<span class="op" id="3244617">!=</span>&nbsp;<span class="ident" id="3244620">reflect</span><span class="op" id="3244627">.</span><span class="ident" id="3244628">Ptr</span>&nbsp;<span class="op" id="3244632">&amp;&amp;</span>&nbsp;<span class="ident" id="3244635">decodingNull</span>&nbsp;<span class="op" id="3244648">&amp;&amp;</span>&nbsp;<span class="ident" id="3244651">v</span><span class="op" id="3244652">.</span><span class="ident" id="3244653">CanSet</span><span class="op" id="3244659">(</span><span class="op" id="3244660">)</span>&nbsp;<span class="op" id="3244662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244667">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244675">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244679">if</span>&nbsp;<span class="ident" id="3244682">v</span><span class="op" id="3244683">.</span><span class="ident" id="3244684">IsNil</span><span class="op" id="3244689">(</span><span class="op" id="3244690">)</span>&nbsp;<span class="op" id="3244692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3244697">v</span><span class="op" id="3244698">.</span><span class="ident" id="3244699">Set</span><span class="op" id="3244702">(</span><span class="ident" id="3244703">reflect</span><span class="op" id="3244710">.</span><span class="ident" id="3244711">New</span><span class="op" id="3244714">(</span><span class="ident" id="3244715">v</span><span class="op" id="3244716">.</span><span class="ident" id="3244717">Type</span><span class="op" id="3244721">(</span><span class="op" id="3244722">)</span><span class="op" id="3244723">.</span><span class="ident" id="3244724">Elem</span><span class="op" id="3244728">(</span><span class="op" id="3244729">)</span><span class="op" id="3244730">)</span><span class="op" id="3244731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244739">if</span>&nbsp;<span class="ident" id="3244742">v</span><span class="op" id="3244743">.</span><span class="ident" id="3244744">Type</span><span class="op" id="3244748">(</span><span class="op" id="3244749">)</span><span class="op" id="3244750">.</span><span class="ident" id="3244751">NumMethod</span><span class="op" id="3244760">(</span><span class="op" id="3244761">)</span>&nbsp;<span class="op" id="3244763">&gt;</span>&nbsp;<span class="num" id="3244765">0</span>&nbsp;<span class="op" id="3244767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244772">if</span>&nbsp;<span class="ident" id="3244775">u</span><span class="op" id="3244776">,</span>&nbsp;<span class="ident" id="3244778">ok</span>&nbsp;<span class="op" id="3244781">:=</span>&nbsp;<span class="ident" id="3244784">v</span><span class="op" id="3244785">.</span><span class="ident" id="3244786">Interface</span><span class="op" id="3244795">(</span><span class="op" id="3244796">)</span><span class="op" id="3244797">.</span><span class="op" id="3244798">(</span><span class="ident" id="3244799">Unmarshaler</span><span class="op" id="3244810">)</span><span class="op" id="3244811">;</span>&nbsp;<span class="ident" id="3244813">ok</span>&nbsp;<span class="op" id="3244816">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244822">return</span>&nbsp;<span class="ident" id="3244829">u</span><span class="op" id="3244830">,</span>&nbsp;<span class="ident" id="3244832">nil</span><span class="op" id="3244835">,</span>&nbsp;<span class="ident" id="3244837">reflect</span><span class="op" id="3244844">.</span><span class="ident" id="3244845">Value</span><span class="op" id="3244850">{</span><span class="op" id="3244851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244861">if</span>&nbsp;<span class="ident" id="3244864">u</span><span class="op" id="3244865">,</span>&nbsp;<span class="ident" id="3244867">ok</span>&nbsp;<span class="op" id="3244870">:=</span>&nbsp;<span class="ident" id="3244873">v</span><span class="op" id="3244874">.</span><span class="ident" id="3244875">Interface</span><span class="op" id="3244884">(</span><span class="op" id="3244885">)</span><span class="op" id="3244886">.</span><span class="op" id="3244887">(</span><span class="ident" id="3244888">encoding</span><span class="op" id="3244896">.</span><span class="ident" id="3244897">TextUnmarshaler</span><span class="op" id="3244912">)</span><span class="op" id="3244913">;</span>&nbsp;<span class="ident" id="3244915">ok</span>&nbsp;<span class="op" id="3244918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244924">return</span>&nbsp;<span class="ident" id="3244931">nil</span><span class="op" id="3244934">,</span>&nbsp;<span class="ident" id="3244936">u</span><span class="op" id="3244937">,</span>&nbsp;<span class="ident" id="3244939">reflect</span><span class="op" id="3244946">.</span><span class="ident" id="3244947">Value</span><span class="op" id="3244952">{</span><span class="op" id="3244953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244958">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3244966">v</span>&nbsp;<span class="op" id="3244968">=</span>&nbsp;<span class="ident" id="3244970">v</span><span class="op" id="3244971">.</span><span class="ident" id="3244972">Elem</span><span class="op" id="3244976">(</span><span class="op" id="3244977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244983">return</span>&nbsp;<span class="ident" id="3244990">nil</span><span class="op" id="3244993">,</span>&nbsp;<span class="ident" id="3244995">nil</span><span class="op" id="3244998">,</span>&nbsp;<span class="ident" id="3245000">v</span><br>
<span class="lineno"></span><span class="op" id="3245002">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="comment" id="3245005">//&nbsp;array&nbsp;consumes&nbsp;an&nbsp;array&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3245082">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;array&nbsp;(&#39;[&#39;)&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="3245142">func</span>&nbsp;<span class="op" id="3245147">(</span><span class="ident" id="3245148">d</span>&nbsp;<span class="op" id="3245150">*</span><span class="ident" id="3245151">decodeState</span><span class="op" id="3245162">)</span>&nbsp;<span class="ident" id="3245164">array</span><span class="op" id="3245169">(</span><span class="ident" id="3245170">v</span>&nbsp;<span class="ident" id="3245172">reflect</span><span class="op" id="3245179">.</span><span class="ident" id="3245180">Value</span><span class="op" id="3245185">)</span>&nbsp;<span class="op" id="3245187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245190">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245217">u</span><span class="op" id="3245218">,</span>&nbsp;<span class="ident" id="3245220">ut</span><span class="op" id="3245222">,</span>&nbsp;<span class="ident" id="3245224">pv</span>&nbsp;<span class="op" id="3245227">:=</span>&nbsp;<span class="ident" id="3245230">d</span><span class="op" id="3245231">.</span><span class="ident" id="3245232">indirect</span><span class="op" id="3245240">(</span><span class="ident" id="3245241">v</span><span class="op" id="3245242">,</span>&nbsp;<span class="builtintype" id="3245244">false</span><span class="op" id="3245249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245252">if</span>&nbsp;<span class="ident" id="3245255">u</span>&nbsp;<span class="op" id="3245257">!=</span>&nbsp;<span class="ident" id="3245260">nil</span>&nbsp;<span class="op" id="3245264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245268">d</span><span class="op" id="3245269">.</span><span class="ident" id="3245270">off</span><span class="op" id="3245273">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245278">err</span>&nbsp;<span class="op" id="3245282">:=</span>&nbsp;<span class="ident" id="3245285">u</span><span class="op" id="3245286">.</span><span class="ident" id="3245287">UnmarshalJSON</span><span class="op" id="3245300">(</span><span class="ident" id="3245301">d</span><span class="op" id="3245302">.</span><span class="ident" id="3245303">next</span><span class="op" id="3245307">(</span><span class="op" id="3245308">)</span><span class="op" id="3245309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245313">if</span>&nbsp;<span class="ident" id="3245316">err</span>&nbsp;<span class="op" id="3245320">!=</span>&nbsp;<span class="ident" id="3245323">nil</span>&nbsp;<span class="op" id="3245327">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245332">d</span><span class="op" id="3245333">.</span><span class="builtintype" id="3245334">error</span><span class="op" id="3245339">(</span><span class="ident" id="3245340">err</span><span class="op" id="3245343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245351">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245362">if</span>&nbsp;<span class="ident" id="3245365">ut</span>&nbsp;<span class="op" id="3245368">!=</span>&nbsp;<span class="ident" id="3245371">nil</span>&nbsp;<span class="op" id="3245375">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245379">d</span><span class="op" id="3245380">.</span><span class="ident" id="3245381">saveError</span><span class="op" id="3245390">(</span><span class="op" id="3245391">&amp;</span><span class="ident" id="3245392">UnmarshalTypeError</span><span class="op" id="3245410">{</span><span class="string" id="3245411">&#34;array&#34;</span><span class="op" id="3245418">,</span>&nbsp;<span class="ident" id="3245420">v</span><span class="op" id="3245421">.</span><span class="ident" id="3245422">Type</span><span class="op" id="3245426">(</span><span class="op" id="3245427">)</span><span class="op" id="3245428">}</span><span class="op" id="3245429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245433">d</span><span class="op" id="3245434">.</span><span class="ident" id="3245435">off</span><span class="op" id="3245438">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245443">d</span><span class="op" id="3245444">.</span><span class="ident" id="3245445">next</span><span class="op" id="3245449">(</span><span class="op" id="3245450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245454">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245462">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245466">v</span>&nbsp;<span class="op" id="3245468">=</span>&nbsp;<span class="ident" id="3245470">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245475">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245501">switch</span>&nbsp;<span class="ident" id="3245508">v</span><span class="op" id="3245509">.</span><span class="ident" id="3245510">Kind</span><span class="op" id="3245514">(</span><span class="op" id="3245515">)</span>&nbsp;<span class="op" id="3245517">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245520">case</span>&nbsp;<span class="ident" id="3245525">reflect</span><span class="op" id="3245532">.</span><span class="ident" id="3245533">Interface</span><span class="op" id="3245542">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245546">if</span>&nbsp;<span class="ident" id="3245549">v</span><span class="op" id="3245550">.</span><span class="ident" id="3245551">NumMethod</span><span class="op" id="3245560">(</span><span class="op" id="3245561">)</span>&nbsp;<span class="op" id="3245563">==</span>&nbsp;<span class="num" id="3245566">0</span>&nbsp;<span class="op" id="3245568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245573">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245637">v</span><span class="op" id="3245638">.</span><span class="ident" id="3245639">Set</span><span class="op" id="3245642">(</span><span class="ident" id="3245643">reflect</span><span class="op" id="3245650">.</span><span class="ident" id="3245651">ValueOf</span><span class="op" id="3245658">(</span><span class="ident" id="3245659">d</span><span class="op" id="3245660">.</span><span class="ident" id="3245661">arrayInterface</span><span class="op" id="3245675">(</span><span class="op" id="3245676">)</span><span class="op" id="3245677">)</span><span class="op" id="3245678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245683">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245696">//&nbsp;Otherwise&nbsp;it&#39;s&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245725">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245738">default</span><span class="op" id="3245745">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245749">d</span><span class="op" id="3245750">.</span><span class="ident" id="3245751">saveError</span><span class="op" id="3245760">(</span><span class="op" id="3245761">&amp;</span><span class="ident" id="3245762">UnmarshalTypeError</span><span class="op" id="3245780">{</span><span class="string" id="3245781">&#34;array&#34;</span><span class="op" id="3245788">,</span>&nbsp;<span class="ident" id="3245790">v</span><span class="op" id="3245791">.</span><span class="ident" id="3245792">Type</span><span class="op" id="3245796">(</span><span class="op" id="3245797">)</span><span class="op" id="3245798">}</span><span class="op" id="3245799">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245803">d</span><span class="op" id="3245804">.</span><span class="ident" id="3245805">off</span><span class="op" id="3245808">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245813">d</span><span class="op" id="3245814">.</span><span class="ident" id="3245815">next</span><span class="op" id="3245819">(</span><span class="op" id="3245820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245824">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245832">case</span>&nbsp;<span class="ident" id="3245837">reflect</span><span class="op" id="3245844">.</span><span class="ident" id="3245845">Array</span><span class="op" id="3245850">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245853">case</span>&nbsp;<span class="ident" id="3245858">reflect</span><span class="op" id="3245865">.</span><span class="ident" id="3245866">Slice</span><span class="op" id="3245871">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245875">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245886">i</span>&nbsp;<span class="op" id="3245888">:=</span>&nbsp;<span class="num" id="3245891">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245894">for</span>&nbsp;<span class="op" id="3245898">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245902">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245962">op</span>&nbsp;<span class="op" id="3245965">:=</span>&nbsp;<span class="ident" id="3245968">d</span><span class="op" id="3245969">.</span><span class="ident" id="3245970">scanWhile</span><span class="op" id="3245979">(</span><span class="ident" id="3245980">scanSkipSpace</span><span class="op" id="3245993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245997">if</span>&nbsp;<span class="ident" id="3246000">op</span>&nbsp;<span class="op" id="3246003">==</span>&nbsp;<span class="ident" id="3246006">scanEndArray</span>&nbsp;<span class="op" id="3246019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246024">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246032">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246037">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246093">d</span><span class="op" id="3246094">.</span><span class="ident" id="3246095">off</span><span class="op" id="3246098">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246103">d</span><span class="op" id="3246104">.</span><span class="ident" id="3246105">scan</span><span class="op" id="3246109">.</span><span class="ident" id="3246110">undo</span><span class="op" id="3246114">(</span><span class="ident" id="3246115">op</span><span class="op" id="3246117">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246122">//&nbsp;Get&nbsp;element&nbsp;of&nbsp;array,&nbsp;growing&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246171">if</span>&nbsp;<span class="ident" id="3246174">v</span><span class="op" id="3246175">.</span><span class="ident" id="3246176">Kind</span><span class="op" id="3246180">(</span><span class="op" id="3246181">)</span>&nbsp;<span class="op" id="3246183">==</span>&nbsp;<span class="ident" id="3246186">reflect</span><span class="op" id="3246193">.</span><span class="ident" id="3246194">Slice</span>&nbsp;<span class="op" id="3246200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246205">//&nbsp;Grow&nbsp;slice&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246235">if</span>&nbsp;<span class="ident" id="3246238">i</span>&nbsp;<span class="op" id="3246240">&gt;=</span>&nbsp;<span class="ident" id="3246243">v</span><span class="op" id="3246244">.</span><span class="ident" id="3246245">Cap</span><span class="op" id="3246248">(</span><span class="op" id="3246249">)</span>&nbsp;<span class="op" id="3246251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246257">newcap</span>&nbsp;<span class="op" id="3246264">:=</span>&nbsp;<span class="ident" id="3246267">v</span><span class="op" id="3246268">.</span><span class="ident" id="3246269">Cap</span><span class="op" id="3246272">(</span><span class="op" id="3246273">)</span>&nbsp;<span class="op" id="3246275">+</span>&nbsp;<span class="ident" id="3246277">v</span><span class="op" id="3246278">.</span><span class="ident" id="3246279">Cap</span><span class="op" id="3246282">(</span><span class="op" id="3246283">)</span><span class="op" id="3246284">/</span><span class="num" id="3246285">2</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246291">if</span>&nbsp;<span class="ident" id="3246294">newcap</span>&nbsp;<span class="op" id="3246301">&lt;</span>&nbsp;<span class="num" id="3246303">4</span>&nbsp;<span class="op" id="3246305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246312">newcap</span>&nbsp;<span class="op" id="3246319">=</span>&nbsp;<span class="num" id="3246321">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246333">newv</span>&nbsp;<span class="op" id="3246338">:=</span>&nbsp;<span class="ident" id="3246341">reflect</span><span class="op" id="3246348">.</span><span class="ident" id="3246349">MakeSlice</span><span class="op" id="3246358">(</span><span class="ident" id="3246359">v</span><span class="op" id="3246360">.</span><span class="ident" id="3246361">Type</span><span class="op" id="3246365">(</span><span class="op" id="3246366">)</span><span class="op" id="3246367">,</span>&nbsp;<span class="ident" id="3246369">v</span><span class="op" id="3246370">.</span><span class="ident" id="3246371">Len</span><span class="op" id="3246374">(</span><span class="op" id="3246375">)</span><span class="op" id="3246376">,</span>&nbsp;<span class="ident" id="3246378">newcap</span><span class="op" id="3246384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246390">reflect</span><span class="op" id="3246397">.</span><span class="ident" id="3246398">Copy</span><span class="op" id="3246402">(</span><span class="ident" id="3246403">newv</span><span class="op" id="3246407">,</span>&nbsp;<span class="ident" id="3246409">v</span><span class="op" id="3246410">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246416">v</span><span class="op" id="3246417">.</span><span class="ident" id="3246418">Set</span><span class="op" id="3246421">(</span><span class="ident" id="3246422">newv</span><span class="op" id="3246426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246436">if</span>&nbsp;<span class="ident" id="3246439">i</span>&nbsp;<span class="op" id="3246441">&gt;=</span>&nbsp;<span class="ident" id="3246444">v</span><span class="op" id="3246445">.</span><span class="ident" id="3246446">Len</span><span class="op" id="3246449">(</span><span class="op" id="3246450">)</span>&nbsp;<span class="op" id="3246452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246458">v</span><span class="op" id="3246459">.</span><span class="ident" id="3246460">SetLen</span><span class="op" id="3246466">(</span><span class="ident" id="3246467">i</span>&nbsp;<span class="op" id="3246469">+</span>&nbsp;<span class="num" id="3246471">1</span><span class="op" id="3246472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246477">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246486">if</span>&nbsp;<span class="ident" id="3246489">i</span>&nbsp;<span class="op" id="3246491">&lt;</span>&nbsp;<span class="ident" id="3246493">v</span><span class="op" id="3246494">.</span><span class="ident" id="3246495">Len</span><span class="op" id="3246498">(</span><span class="op" id="3246499">)</span>&nbsp;<span class="op" id="3246501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246506">//&nbsp;Decode&nbsp;into&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246533">d</span><span class="op" id="3246534">.</span><span class="ident" id="3246535">value</span><span class="op" id="3246540">(</span><span class="ident" id="3246541">v</span><span class="op" id="3246542">.</span><span class="ident" id="3246543">Index</span><span class="op" id="3246548">(</span><span class="ident" id="3246549">i</span><span class="op" id="3246550">)</span><span class="op" id="3246551">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246555">}</span>&nbsp;<span class="keyword" id="3246557">else</span>&nbsp;<span class="op" id="3246562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246567">//&nbsp;Ran&nbsp;out&nbsp;of&nbsp;fixed&nbsp;array:&nbsp;skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246603">d</span><span class="op" id="3246604">.</span><span class="ident" id="3246605">value</span><span class="op" id="3246610">(</span><span class="ident" id="3246611">reflect</span><span class="op" id="3246618">.</span><span class="ident" id="3246619">Value</span><span class="op" id="3246624">{</span><span class="op" id="3246625">}</span><span class="op" id="3246626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246634">i</span><span class="op" id="3246635">++</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246641">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246673">op</span>&nbsp;<span class="op" id="3246676">=</span>&nbsp;<span class="ident" id="3246678">d</span><span class="op" id="3246679">.</span><span class="ident" id="3246680">scanWhile</span><span class="op" id="3246689">(</span><span class="ident" id="3246690">scanSkipSpace</span><span class="op" id="3246703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246707">if</span>&nbsp;<span class="ident" id="3246710">op</span>&nbsp;<span class="op" id="3246713">==</span>&nbsp;<span class="ident" id="3246716">scanEndArray</span>&nbsp;<span class="op" id="3246729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246734">break</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246746">if</span>&nbsp;<span class="ident" id="3246749">op</span>&nbsp;<span class="op" id="3246752">!=</span>&nbsp;<span class="ident" id="3246755">scanArrayValue</span>&nbsp;<span class="op" id="3246770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246775">d</span><span class="op" id="3246776">.</span><span class="builtintype" id="3246777">error</span><span class="op" id="3246782">(</span><span class="ident" id="3246783">errPhase</span><span class="op" id="3246791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246798">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246802">if</span>&nbsp;<span class="ident" id="3246805">i</span>&nbsp;<span class="op" id="3246807">&lt;</span>&nbsp;<span class="ident" id="3246809">v</span><span class="op" id="3246810">.</span><span class="ident" id="3246811">Len</span><span class="op" id="3246814">(</span><span class="op" id="3246815">)</span>&nbsp;<span class="op" id="3246817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246821">if</span>&nbsp;<span class="ident" id="3246824">v</span><span class="op" id="3246825">.</span><span class="ident" id="3246826">Kind</span><span class="op" id="3246830">(</span><span class="op" id="3246831">)</span>&nbsp;<span class="op" id="3246833">==</span>&nbsp;<span class="ident" id="3246836">reflect</span><span class="op" id="3246843">.</span><span class="ident" id="3246844">Array</span>&nbsp;<span class="op" id="3246850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246855">//&nbsp;Array.&nbsp;&nbsp;Zero&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246884">z</span>&nbsp;<span class="op" id="3246886">:=</span>&nbsp;<span class="ident" id="3246889">reflect</span><span class="op" id="3246896">.</span><span class="ident" id="3246897">Zero</span><span class="op" id="3246901">(</span><span class="ident" id="3246902">v</span><span class="op" id="3246903">.</span><span class="ident" id="3246904">Type</span><span class="op" id="3246908">(</span><span class="op" id="3246909">)</span><span class="op" id="3246910">.</span><span class="ident" id="3246911">Elem</span><span class="op" id="3246915">(</span><span class="op" id="3246916">)</span><span class="op" id="3246917">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246922">for</span>&nbsp;<span class="op" id="3246926">;</span>&nbsp;<span class="ident" id="3246928">i</span>&nbsp;<span class="op" id="3246930">&lt;</span>&nbsp;<span class="ident" id="3246932">v</span><span class="op" id="3246933">.</span><span class="ident" id="3246934">Len</span><span class="op" id="3246937">(</span><span class="op" id="3246938">)</span><span class="op" id="3246939">;</span>&nbsp;<span class="ident" id="3246941">i</span><span class="op" id="3246942">++</span>&nbsp;<span class="op" id="3246945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246951">v</span><span class="op" id="3246952">.</span><span class="ident" id="3246953">Index</span><span class="op" id="3246958">(</span><span class="ident" id="3246959">i</span><span class="op" id="3246960">)</span><span class="op" id="3246961">.</span><span class="ident" id="3246962">Set</span><span class="op" id="3246965">(</span><span class="ident" id="3246966">z</span><span class="op" id="3246967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246976">}</span>&nbsp;<span class="keyword" id="3246978">else</span>&nbsp;<span class="op" id="3246983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3246988">v</span><span class="op" id="3246989">.</span><span class="ident" id="3246990">SetLen</span><span class="op" id="3246996">(</span><span class="ident" id="3246997">i</span><span class="op" id="3246998">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247008">if</span>&nbsp;<span class="ident" id="3247011">i</span>&nbsp;<span class="op" id="3247013">==</span>&nbsp;<span class="num" id="3247016">0</span>&nbsp;<span class="op" id="3247018">&amp;&amp;</span>&nbsp;<span class="ident" id="3247021">v</span><span class="op" id="3247022">.</span><span class="ident" id="3247023">Kind</span><span class="op" id="3247027">(</span><span class="op" id="3247028">)</span>&nbsp;<span class="op" id="3247030">==</span>&nbsp;<span class="ident" id="3247033">reflect</span><span class="op" id="3247040">.</span><span class="ident" id="3247041">Slice</span>&nbsp;<span class="op" id="3247047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247051">v</span><span class="op" id="3247052">.</span><span class="ident" id="3247053">Set</span><span class="op" id="3247056">(</span><span class="ident" id="3247057">reflect</span><span class="op" id="3247064">.</span><span class="ident" id="3247065">MakeSlice</span><span class="op" id="3247074">(</span><span class="ident" id="3247075">v</span><span class="op" id="3247076">.</span><span class="ident" id="3247077">Type</span><span class="op" id="3247081">(</span><span class="op" id="3247082">)</span><span class="op" id="3247083">,</span>&nbsp;<span class="num" id="3247085">0</span><span class="op" id="3247086">,</span>&nbsp;<span class="num" id="3247088">0</span><span class="op" id="3247089">)</span><span class="op" id="3247090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247093">}</span><br>
<span class="lineno">470</span><span class="op" id="3247095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3247098">var</span>&nbsp;<span class="ident" id="3247102">nullLiteral</span>&nbsp;<span class="op" id="3247114">=</span>&nbsp;<span class="op" id="3247116">[</span><span class="op" id="3247117">]</span><span class="builtintype" id="3247118">byte</span><span class="op" id="3247122">(</span><span class="string" id="3247123">&#34;null&#34;</span><span class="op" id="3247129">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3247132">//&nbsp;object&nbsp;consumes&nbsp;an&nbsp;object&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno">475</span><span class="comment" id="3247211">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;(&#39;{&#39;)&nbsp;of&nbsp;the&nbsp;object&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="3247272">func</span>&nbsp;<span class="op" id="3247277">(</span><span class="ident" id="3247278">d</span>&nbsp;<span class="op" id="3247280">*</span><span class="ident" id="3247281">decodeState</span><span class="op" id="3247292">)</span>&nbsp;<span class="ident" id="3247294">object</span><span class="op" id="3247300">(</span><span class="ident" id="3247301">v</span>&nbsp;<span class="ident" id="3247303">reflect</span><span class="op" id="3247310">.</span><span class="ident" id="3247311">Value</span><span class="op" id="3247316">)</span>&nbsp;<span class="op" id="3247318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3247321">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247348">u</span><span class="op" id="3247349">,</span>&nbsp;<span class="ident" id="3247351">ut</span><span class="op" id="3247353">,</span>&nbsp;<span class="ident" id="3247355">pv</span>&nbsp;<span class="op" id="3247358">:=</span>&nbsp;<span class="ident" id="3247361">d</span><span class="op" id="3247362">.</span><span class="ident" id="3247363">indirect</span><span class="op" id="3247371">(</span><span class="ident" id="3247372">v</span><span class="op" id="3247373">,</span>&nbsp;<span class="builtintype" id="3247375">false</span><span class="op" id="3247380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247383">if</span>&nbsp;<span class="ident" id="3247386">u</span>&nbsp;<span class="op" id="3247388">!=</span>&nbsp;<span class="ident" id="3247391">nil</span>&nbsp;<span class="op" id="3247395">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247399">d</span><span class="op" id="3247400">.</span><span class="ident" id="3247401">off</span><span class="op" id="3247404">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247409">err</span>&nbsp;<span class="op" id="3247413">:=</span>&nbsp;<span class="ident" id="3247416">u</span><span class="op" id="3247417">.</span><span class="ident" id="3247418">UnmarshalJSON</span><span class="op" id="3247431">(</span><span class="ident" id="3247432">d</span><span class="op" id="3247433">.</span><span class="ident" id="3247434">next</span><span class="op" id="3247438">(</span><span class="op" id="3247439">)</span><span class="op" id="3247440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247444">if</span>&nbsp;<span class="ident" id="3247447">err</span>&nbsp;<span class="op" id="3247451">!=</span>&nbsp;<span class="ident" id="3247454">nil</span>&nbsp;<span class="op" id="3247458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247463">d</span><span class="op" id="3247464">.</span><span class="builtintype" id="3247465">error</span><span class="op" id="3247470">(</span><span class="ident" id="3247471">err</span><span class="op" id="3247474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247478">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247482">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247493">if</span>&nbsp;<span class="ident" id="3247496">ut</span>&nbsp;<span class="op" id="3247499">!=</span>&nbsp;<span class="ident" id="3247502">nil</span>&nbsp;<span class="op" id="3247506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247510">d</span><span class="op" id="3247511">.</span><span class="ident" id="3247512">saveError</span><span class="op" id="3247521">(</span><span class="op" id="3247522">&amp;</span><span class="ident" id="3247523">UnmarshalTypeError</span><span class="op" id="3247541">{</span><span class="string" id="3247542">&#34;object&#34;</span><span class="op" id="3247550">,</span>&nbsp;<span class="ident" id="3247552">v</span><span class="op" id="3247553">.</span><span class="ident" id="3247554">Type</span><span class="op" id="3247558">(</span><span class="op" id="3247559">)</span><span class="op" id="3247560">}</span><span class="op" id="3247561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247565">d</span><span class="op" id="3247566">.</span><span class="ident" id="3247567">off</span><span class="op" id="3247570">--</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247575">d</span><span class="op" id="3247576">.</span><span class="ident" id="3247577">next</span><span class="op" id="3247581">(</span><span class="op" id="3247582">)</span>&nbsp;<span class="comment" id="3247584">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247612">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247623">v</span>&nbsp;<span class="op" id="3247625">=</span>&nbsp;<span class="ident" id="3247627">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3247632">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247694">if</span>&nbsp;<span class="ident" id="3247697">v</span><span class="op" id="3247698">.</span><span class="ident" id="3247699">Kind</span><span class="op" id="3247703">(</span><span class="op" id="3247704">)</span>&nbsp;<span class="op" id="3247706">==</span>&nbsp;<span class="ident" id="3247709">reflect</span><span class="op" id="3247716">.</span><span class="ident" id="3247717">Interface</span>&nbsp;<span class="op" id="3247727">&amp;&amp;</span>&nbsp;<span class="ident" id="3247730">v</span><span class="op" id="3247731">.</span><span class="ident" id="3247732">NumMethod</span><span class="op" id="3247741">(</span><span class="op" id="3247742">)</span>&nbsp;<span class="op" id="3247744">==</span>&nbsp;<span class="num" id="3247747">0</span>&nbsp;<span class="op" id="3247749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247753">v</span><span class="op" id="3247754">.</span><span class="ident" id="3247755">Set</span><span class="op" id="3247758">(</span><span class="ident" id="3247759">reflect</span><span class="op" id="3247766">.</span><span class="ident" id="3247767">ValueOf</span><span class="op" id="3247774">(</span><span class="ident" id="3247775">d</span><span class="op" id="3247776">.</span><span class="ident" id="3247777">objectInterface</span><span class="op" id="3247792">(</span><span class="op" id="3247793">)</span><span class="op" id="3247794">)</span><span class="op" id="3247795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247799">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247807">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3247811">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target:&nbsp;struct&nbsp;or&nbsp;map[string]T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247860">switch</span>&nbsp;<span class="ident" id="3247867">v</span><span class="op" id="3247868">.</span><span class="ident" id="3247869">Kind</span><span class="op" id="3247873">(</span><span class="op" id="3247874">)</span>&nbsp;<span class="op" id="3247876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247879">case</span>&nbsp;<span class="ident" id="3247884">reflect</span><span class="op" id="3247891">.</span><span class="ident" id="3247892">Map</span><span class="op" id="3247895">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3247899">//&nbsp;map&nbsp;must&nbsp;have&nbsp;string&nbsp;kind</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247930">t</span>&nbsp;<span class="op" id="3247932">:=</span>&nbsp;<span class="ident" id="3247935">v</span><span class="op" id="3247936">.</span><span class="ident" id="3247937">Type</span><span class="op" id="3247941">(</span><span class="op" id="3247942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247946">if</span>&nbsp;<span class="ident" id="3247949">t</span><span class="op" id="3247950">.</span><span class="ident" id="3247951">Key</span><span class="op" id="3247954">(</span><span class="op" id="3247955">)</span><span class="op" id="3247956">.</span><span class="ident" id="3247957">Kind</span><span class="op" id="3247961">(</span><span class="op" id="3247962">)</span>&nbsp;<span class="op" id="3247964">!=</span>&nbsp;<span class="ident" id="3247967">reflect</span><span class="op" id="3247974">.</span><span class="ident" id="3247975">String</span>&nbsp;<span class="op" id="3247982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3247987">d</span><span class="op" id="3247988">.</span><span class="ident" id="3247989">saveError</span><span class="op" id="3247998">(</span><span class="op" id="3247999">&amp;</span><span class="ident" id="3248000">UnmarshalTypeError</span><span class="op" id="3248018">{</span><span class="string" id="3248019">&#34;object&#34;</span><span class="op" id="3248027">,</span>&nbsp;<span class="ident" id="3248029">v</span><span class="op" id="3248030">.</span><span class="ident" id="3248031">Type</span><span class="op" id="3248035">(</span><span class="op" id="3248036">)</span><span class="op" id="3248037">}</span><span class="op" id="3248038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248043">d</span><span class="op" id="3248044">.</span><span class="ident" id="3248045">off</span><span class="op" id="3248048">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248054">d</span><span class="op" id="3248055">.</span><span class="ident" id="3248056">next</span><span class="op" id="3248060">(</span><span class="op" id="3248061">)</span>&nbsp;<span class="comment" id="3248063">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248092">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248105">if</span>&nbsp;<span class="ident" id="3248108">v</span><span class="op" id="3248109">.</span><span class="ident" id="3248110">IsNil</span><span class="op" id="3248115">(</span><span class="op" id="3248116">)</span>&nbsp;<span class="op" id="3248118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248123">v</span><span class="op" id="3248124">.</span><span class="ident" id="3248125">Set</span><span class="op" id="3248128">(</span><span class="ident" id="3248129">reflect</span><span class="op" id="3248136">.</span><span class="ident" id="3248137">MakeMap</span><span class="op" id="3248144">(</span><span class="ident" id="3248145">t</span><span class="op" id="3248146">)</span><span class="op" id="3248147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248151">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248154">case</span>&nbsp;<span class="ident" id="3248159">reflect</span><span class="op" id="3248166">.</span><span class="ident" id="3248167">Struct</span><span class="op" id="3248173">:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248177">default</span><span class="op" id="3248184">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248188">d</span><span class="op" id="3248189">.</span><span class="ident" id="3248190">saveError</span><span class="op" id="3248199">(</span><span class="op" id="3248200">&amp;</span><span class="ident" id="3248201">UnmarshalTypeError</span><span class="op" id="3248219">{</span><span class="string" id="3248220">&#34;object&#34;</span><span class="op" id="3248228">,</span>&nbsp;<span class="ident" id="3248230">v</span><span class="op" id="3248231">.</span><span class="ident" id="3248232">Type</span><span class="op" id="3248236">(</span><span class="op" id="3248237">)</span><span class="op" id="3248238">}</span><span class="op" id="3248239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248243">d</span><span class="op" id="3248244">.</span><span class="ident" id="3248245">off</span><span class="op" id="3248248">--</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248253">d</span><span class="op" id="3248254">.</span><span class="ident" id="3248255">next</span><span class="op" id="3248259">(</span><span class="op" id="3248260">)</span>&nbsp;<span class="comment" id="3248262">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248290">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248302">var</span>&nbsp;<span class="ident" id="3248306">mapElem</span>&nbsp;<span class="ident" id="3248314">reflect</span><span class="op" id="3248321">.</span><span class="ident" id="3248322">Value</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248330">for</span>&nbsp;<span class="op" id="3248334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3248338">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248386">op</span>&nbsp;<span class="op" id="3248389">:=</span>&nbsp;<span class="ident" id="3248392">d</span><span class="op" id="3248393">.</span><span class="ident" id="3248394">scanWhile</span><span class="op" id="3248403">(</span><span class="ident" id="3248404">scanSkipSpace</span><span class="op" id="3248417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248421">if</span>&nbsp;<span class="ident" id="3248424">op</span>&nbsp;<span class="op" id="3248427">==</span>&nbsp;<span class="ident" id="3248430">scanEndObject</span>&nbsp;<span class="op" id="3248444">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3248449">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248503">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248515">if</span>&nbsp;<span class="ident" id="3248518">op</span>&nbsp;<span class="op" id="3248521">!=</span>&nbsp;<span class="ident" id="3248524">scanBeginLiteral</span>&nbsp;<span class="op" id="3248541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248546">d</span><span class="op" id="3248547">.</span><span class="builtintype" id="3248548">error</span><span class="op" id="3248553">(</span><span class="ident" id="3248554">errPhase</span><span class="op" id="3248562">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3248571">//&nbsp;Read&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248586">start</span>&nbsp;<span class="op" id="3248592">:=</span>&nbsp;<span class="ident" id="3248595">d</span><span class="op" id="3248596">.</span><span class="ident" id="3248597">off</span>&nbsp;<span class="op" id="3248601">-</span>&nbsp;<span class="num" id="3248603">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248607">op</span>&nbsp;<span class="op" id="3248610">=</span>&nbsp;<span class="ident" id="3248612">d</span><span class="op" id="3248613">.</span><span class="ident" id="3248614">scanWhile</span><span class="op" id="3248623">(</span><span class="ident" id="3248624">scanContinue</span><span class="op" id="3248636">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248640">item</span>&nbsp;<span class="op" id="3248645">:=</span>&nbsp;<span class="ident" id="3248648">d</span><span class="op" id="3248649">.</span><span class="ident" id="3248650">data</span><span class="op" id="3248654">[</span><span class="ident" id="3248655">start</span>&nbsp;<span class="op" id="3248661">:</span>&nbsp;<span class="ident" id="3248663">d</span><span class="op" id="3248664">.</span><span class="ident" id="3248665">off</span><span class="op" id="3248668">-</span><span class="num" id="3248669">1</span><span class="op" id="3248670">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248674">key</span><span class="op" id="3248677">,</span>&nbsp;<span class="ident" id="3248679">ok</span>&nbsp;<span class="op" id="3248682">:=</span>&nbsp;<span class="ident" id="3248685">unquoteBytes</span><span class="op" id="3248697">(</span><span class="ident" id="3248698">item</span><span class="op" id="3248702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248706">if</span>&nbsp;<span class="op" id="3248709">!</span><span class="ident" id="3248710">ok</span>&nbsp;<span class="op" id="3248713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248718">d</span><span class="op" id="3248719">.</span><span class="builtintype" id="3248720">error</span><span class="op" id="3248725">(</span><span class="ident" id="3248726">errPhase</span><span class="op" id="3248734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248738">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3248743">//&nbsp;Figure&nbsp;out&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248787">var</span>&nbsp;<span class="ident" id="3248791">subv</span>&nbsp;<span class="ident" id="3248796">reflect</span><span class="op" id="3248803">.</span><span class="ident" id="3248804">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248812">destring</span>&nbsp;<span class="op" id="3248821">:=</span>&nbsp;<span class="builtintype" id="3248824">false</span>&nbsp;<span class="comment" id="3248830">//&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;wrapped&nbsp;in&nbsp;a&nbsp;string&nbsp;to&nbsp;be&nbsp;decoded&nbsp;first</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248897">if</span>&nbsp;<span class="ident" id="3248900">v</span><span class="op" id="3248901">.</span><span class="ident" id="3248902">Kind</span><span class="op" id="3248906">(</span><span class="op" id="3248907">)</span>&nbsp;<span class="op" id="3248909">==</span>&nbsp;<span class="ident" id="3248912">reflect</span><span class="op" id="3248919">.</span><span class="ident" id="3248920">Map</span>&nbsp;<span class="op" id="3248924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248929">elemType</span>&nbsp;<span class="op" id="3248938">:=</span>&nbsp;<span class="ident" id="3248941">v</span><span class="op" id="3248942">.</span><span class="ident" id="3248943">Type</span><span class="op" id="3248947">(</span><span class="op" id="3248948">)</span><span class="op" id="3248949">.</span><span class="ident" id="3248950">Elem</span><span class="op" id="3248954">(</span><span class="op" id="3248955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248960">if</span>&nbsp;<span class="op" id="3248963">!</span><span class="ident" id="3248964">mapElem</span><span class="op" id="3248971">.</span><span class="ident" id="3248972">IsValid</span><span class="op" id="3248979">(</span><span class="op" id="3248980">)</span>&nbsp;<span class="op" id="3248982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248988">mapElem</span>&nbsp;<span class="op" id="3248996">=</span>&nbsp;<span class="ident" id="3248998">reflect</span><span class="op" id="3249005">.</span><span class="ident" id="3249006">New</span><span class="op" id="3249009">(</span><span class="ident" id="3249010">elemType</span><span class="op" id="3249018">)</span><span class="op" id="3249019">.</span><span class="ident" id="3249020">Elem</span><span class="op" id="3249024">(</span><span class="op" id="3249025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249030">}</span>&nbsp;<span class="keyword" id="3249032">else</span>&nbsp;<span class="op" id="3249037">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249043">mapElem</span><span class="op" id="3249050">.</span><span class="ident" id="3249051">Set</span><span class="op" id="3249054">(</span><span class="ident" id="3249055">reflect</span><span class="op" id="3249062">.</span><span class="ident" id="3249063">Zero</span><span class="op" id="3249067">(</span><span class="ident" id="3249068">elemType</span><span class="op" id="3249076">)</span><span class="op" id="3249077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249087">subv</span>&nbsp;<span class="op" id="3249092">=</span>&nbsp;<span class="ident" id="3249094">mapElem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249104">}</span>&nbsp;<span class="keyword" id="3249106">else</span>&nbsp;<span class="op" id="3249111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249116">var</span>&nbsp;<span class="ident" id="3249120">f</span>&nbsp;<span class="op" id="3249122">*</span><span class="ident" id="3249123">field</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249132">fields</span>&nbsp;<span class="op" id="3249139">:=</span>&nbsp;<span class="ident" id="3249142">cachedTypeFields</span><span class="op" id="3249158">(</span><span class="ident" id="3249159">v</span><span class="op" id="3249160">.</span><span class="ident" id="3249161">Type</span><span class="op" id="3249165">(</span><span class="op" id="3249166">)</span><span class="op" id="3249167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249172">for</span>&nbsp;<span class="ident" id="3249176">i</span>&nbsp;<span class="op" id="3249178">:=</span>&nbsp;<span class="keyword" id="3249181">range</span>&nbsp;<span class="ident" id="3249187">fields</span>&nbsp;<span class="op" id="3249194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249200">ff</span>&nbsp;<span class="op" id="3249203">:=</span>&nbsp;<span class="op" id="3249206">&amp;</span><span class="ident" id="3249207">fields</span><span class="op" id="3249213">[</span><span class="ident" id="3249214">i</span><span class="op" id="3249215">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249221">if</span>&nbsp;<span class="ident" id="3249224">bytes</span><span class="op" id="3249229">.</span><span class="ident" id="3249230">Equal</span><span class="op" id="3249235">(</span><span class="ident" id="3249236">ff</span><span class="op" id="3249238">.</span><span class="ident" id="3249239">nameBytes</span><span class="op" id="3249248">,</span>&nbsp;<span class="ident" id="3249250">key</span><span class="op" id="3249253">)</span>&nbsp;<span class="op" id="3249255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249262">f</span>&nbsp;<span class="op" id="3249264">=</span>&nbsp;<span class="ident" id="3249266">ff</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249274">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249290">if</span>&nbsp;<span class="ident" id="3249293">f</span>&nbsp;<span class="op" id="3249295">==</span>&nbsp;<span class="ident" id="3249298">nil</span>&nbsp;<span class="op" id="3249302">&amp;&amp;</span>&nbsp;<span class="ident" id="3249305">ff</span><span class="op" id="3249307">.</span><span class="ident" id="3249308">equalFold</span><span class="op" id="3249317">(</span><span class="ident" id="3249318">ff</span><span class="op" id="3249320">.</span><span class="ident" id="3249321">nameBytes</span><span class="op" id="3249330">,</span>&nbsp;<span class="ident" id="3249332">key</span><span class="op" id="3249335">)</span>&nbsp;<span class="op" id="3249337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249344">f</span>&nbsp;<span class="op" id="3249346">=</span>&nbsp;<span class="ident" id="3249348">ff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249355">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249365">if</span>&nbsp;<span class="ident" id="3249368">f</span>&nbsp;<span class="op" id="3249370">!=</span>&nbsp;<span class="ident" id="3249373">nil</span>&nbsp;<span class="op" id="3249377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249383">subv</span>&nbsp;<span class="op" id="3249388">=</span>&nbsp;<span class="ident" id="3249390">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249396">destring</span>&nbsp;<span class="op" id="3249405">=</span>&nbsp;<span class="ident" id="3249407">f</span><span class="op" id="3249408">.</span><span class="ident" id="3249409">quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249420">for</span>&nbsp;<span class="ident" id="3249424">_</span><span class="op" id="3249425">,</span>&nbsp;<span class="ident" id="3249427">i</span>&nbsp;<span class="op" id="3249429">:=</span>&nbsp;<span class="keyword" id="3249432">range</span>&nbsp;<span class="ident" id="3249438">f</span><span class="op" id="3249439">.</span><span class="ident" id="3249440">index</span>&nbsp;<span class="op" id="3249446">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249453">if</span>&nbsp;<span class="ident" id="3249456">subv</span><span class="op" id="3249460">.</span><span class="ident" id="3249461">Kind</span><span class="op" id="3249465">(</span><span class="op" id="3249466">)</span>&nbsp;<span class="op" id="3249468">==</span>&nbsp;<span class="ident" id="3249471">reflect</span><span class="op" id="3249478">.</span><span class="ident" id="3249479">Ptr</span>&nbsp;<span class="op" id="3249483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249491">if</span>&nbsp;<span class="ident" id="3249494">subv</span><span class="op" id="3249498">.</span><span class="ident" id="3249499">IsNil</span><span class="op" id="3249504">(</span><span class="op" id="3249505">)</span>&nbsp;<span class="op" id="3249507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249516">subv</span><span class="op" id="3249520">.</span><span class="ident" id="3249521">Set</span><span class="op" id="3249524">(</span><span class="ident" id="3249525">reflect</span><span class="op" id="3249532">.</span><span class="ident" id="3249533">New</span><span class="op" id="3249536">(</span><span class="ident" id="3249537">subv</span><span class="op" id="3249541">.</span><span class="ident" id="3249542">Type</span><span class="op" id="3249546">(</span><span class="op" id="3249547">)</span><span class="op" id="3249548">.</span><span class="ident" id="3249549">Elem</span><span class="op" id="3249553">(</span><span class="op" id="3249554">)</span><span class="op" id="3249555">)</span><span class="op" id="3249556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249572">subv</span>&nbsp;<span class="op" id="3249577">=</span>&nbsp;<span class="ident" id="3249579">subv</span><span class="op" id="3249583">.</span><span class="ident" id="3249584">Elem</span><span class="op" id="3249588">(</span><span class="op" id="3249589">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249603">subv</span>&nbsp;<span class="op" id="3249608">=</span>&nbsp;<span class="ident" id="3249610">subv</span><span class="op" id="3249614">.</span><span class="ident" id="3249615">Field</span><span class="op" id="3249620">(</span><span class="ident" id="3249621">i</span><span class="op" id="3249622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249637">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3249642">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249668">if</span>&nbsp;<span class="ident" id="3249671">op</span>&nbsp;<span class="op" id="3249674">==</span>&nbsp;<span class="ident" id="3249677">scanSkipSpace</span>&nbsp;<span class="op" id="3249691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249696">op</span>&nbsp;<span class="op" id="3249699">=</span>&nbsp;<span class="ident" id="3249701">d</span><span class="op" id="3249702">.</span><span class="ident" id="3249703">scanWhile</span><span class="op" id="3249712">(</span><span class="ident" id="3249713">scanSkipSpace</span><span class="op" id="3249726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249730">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249734">if</span>&nbsp;<span class="ident" id="3249737">op</span>&nbsp;<span class="op" id="3249740">!=</span>&nbsp;<span class="ident" id="3249743">scanObjectKey</span>&nbsp;<span class="op" id="3249757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249762">d</span><span class="op" id="3249763">.</span><span class="builtintype" id="3249764">error</span><span class="op" id="3249769">(</span><span class="ident" id="3249770">errPhase</span><span class="op" id="3249778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3249782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3249787">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249804">if</span>&nbsp;<span class="ident" id="3249807">destring</span>&nbsp;<span class="op" id="3249816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249821">switch</span>&nbsp;<span class="ident" id="3249828">qv</span>&nbsp;<span class="op" id="3249831">:=</span>&nbsp;<span class="ident" id="3249834">d</span><span class="op" id="3249835">.</span><span class="ident" id="3249836">valueQuoted</span><span class="op" id="3249847">(</span><span class="op" id="3249848">)</span><span class="op" id="3249849">.</span><span class="op" id="3249850">(</span><span class="keyword" id="3249851">type</span><span class="op" id="3249855">)</span>&nbsp;<span class="op" id="3249857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249862">case</span>&nbsp;<span class="ident" id="3249867">nil</span><span class="op" id="3249870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249876">d</span><span class="op" id="3249877">.</span><span class="ident" id="3249878">literalStore</span><span class="op" id="3249890">(</span><span class="ident" id="3249891">nullLiteral</span><span class="op" id="3249902">,</span>&nbsp;<span class="ident" id="3249904">subv</span><span class="op" id="3249908">,</span>&nbsp;<span class="builtintype" id="3249910">false</span><span class="op" id="3249915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249920">case</span>&nbsp;<span class="builtintype" id="3249925">string</span><span class="op" id="3249931">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249937">d</span><span class="op" id="3249938">.</span><span class="ident" id="3249939">literalStore</span><span class="op" id="3249951">(</span><span class="op" id="3249952">[</span><span class="op" id="3249953">]</span><span class="builtintype" id="3249954">byte</span><span class="op" id="3249958">(</span><span class="ident" id="3249959">qv</span><span class="op" id="3249961">)</span><span class="op" id="3249962">,</span>&nbsp;<span class="ident" id="3249964">subv</span><span class="op" id="3249968">,</span>&nbsp;<span class="builtintype" id="3249970">true</span><span class="op" id="3249974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3249979">default</span><span class="op" id="3249986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249992">d</span><span class="op" id="3249993">.</span><span class="ident" id="3249994">saveError</span><span class="op" id="3250003">(</span><span class="ident" id="3250004">fmt</span><span class="op" id="3250007">.</span><span class="ident" id="3250008">Errorf</span><span class="op" id="3250014">(</span><span class="string" id="3250015">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;unquoted&nbsp;value&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3250100">,</span>&nbsp;<span class="ident" id="3250102">item</span><span class="op" id="3250106">,</span>&nbsp;<span class="ident" id="3250108">v</span><span class="op" id="3250109">.</span><span class="ident" id="3250110">Type</span><span class="op" id="3250114">(</span><span class="op" id="3250115">)</span><span class="op" id="3250116">)</span><span class="op" id="3250117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3250122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3250126">}</span>&nbsp;<span class="keyword" id="3250128">else</span>&nbsp;<span class="op" id="3250133">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250138">d</span><span class="op" id="3250139">.</span><span class="ident" id="3250140">value</span><span class="op" id="3250145">(</span><span class="ident" id="3250146">subv</span><span class="op" id="3250150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3250154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3250159">//&nbsp;Write&nbsp;value&nbsp;back&nbsp;to&nbsp;map;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3250189">//&nbsp;if&nbsp;using&nbsp;struct,&nbsp;subv&nbsp;points&nbsp;into&nbsp;struct&nbsp;already.</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3250244">if</span>&nbsp;<span class="ident" id="3250247">v</span><span class="op" id="3250248">.</span><span class="ident" id="3250249">Kind</span><span class="op" id="3250253">(</span><span class="op" id="3250254">)</span>&nbsp;<span class="op" id="3250256">==</span>&nbsp;<span class="ident" id="3250259">reflect</span><span class="op" id="3250266">.</span><span class="ident" id="3250267">Map</span>&nbsp;<span class="op" id="3250271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250276">kv</span>&nbsp;<span class="op" id="3250279">:=</span>&nbsp;<span class="ident" id="3250282">reflect</span><span class="op" id="3250289">.</span><span class="ident" id="3250290">ValueOf</span><span class="op" id="3250297">(</span><span class="ident" id="3250298">key</span><span class="op" id="3250301">)</span><span class="op" id="3250302">.</span><span class="ident" id="3250303">Convert</span><span class="op" id="3250310">(</span><span class="ident" id="3250311">v</span><span class="op" id="3250312">.</span><span class="ident" id="3250313">Type</span><span class="op" id="3250317">(</span><span class="op" id="3250318">)</span><span class="op" id="3250319">.</span><span class="ident" id="3250320">Key</span><span class="op" id="3250323">(</span><span class="op" id="3250324">)</span><span class="op" id="3250325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250330">v</span><span class="op" id="3250331">.</span><span class="ident" id="3250332">SetMapIndex</span><span class="op" id="3250343">(</span><span class="ident" id="3250344">kv</span><span class="op" id="3250346">,</span>&nbsp;<span class="ident" id="3250348">subv</span><span class="op" id="3250352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3250356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3250361">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250393">op</span>&nbsp;<span class="op" id="3250396">=</span>&nbsp;<span class="ident" id="3250398">d</span><span class="op" id="3250399">.</span><span class="ident" id="3250400">scanWhile</span><span class="op" id="3250409">(</span><span class="ident" id="3250410">scanSkipSpace</span><span class="op" id="3250423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3250427">if</span>&nbsp;<span class="ident" id="3250430">op</span>&nbsp;<span class="op" id="3250433">==</span>&nbsp;<span class="ident" id="3250436">scanEndObject</span>&nbsp;<span class="op" id="3250450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3250455">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3250463">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3250467">if</span>&nbsp;<span class="ident" id="3250470">op</span>&nbsp;<span class="op" id="3250473">!=</span>&nbsp;<span class="ident" id="3250476">scanObjectValue</span>&nbsp;<span class="op" id="3250492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250497">d</span><span class="op" id="3250498">.</span><span class="builtintype" id="3250499">error</span><span class="op" id="3250504">(</span><span class="ident" id="3250505">errPhase</span><span class="op" id="3250513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3250517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3250520">}</span><br>
<span class="lineno"></span><span class="op" id="3250522">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="comment" id="3250525">//&nbsp;literal&nbsp;consumes&nbsp;a&nbsp;literal&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3250605">//&nbsp;The&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;literal&nbsp;has&nbsp;been&nbsp;read&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="3250660">//&nbsp;(that&#39;s&nbsp;how&nbsp;the&nbsp;caller&nbsp;knows&nbsp;it&#39;s&nbsp;a&nbsp;literal).</span><br>
<span class="lineno"></span><span class="keyword" id="3250709">func</span>&nbsp;<span class="op" id="3250714">(</span><span class="ident" id="3250715">d</span>&nbsp;<span class="op" id="3250717">*</span><span class="ident" id="3250718">decodeState</span><span class="op" id="3250729">)</span>&nbsp;<span class="ident" id="3250731">literal</span><span class="op" id="3250738">(</span><span class="ident" id="3250739">v</span>&nbsp;<span class="ident" id="3250741">reflect</span><span class="op" id="3250748">.</span><span class="ident" id="3250749">Value</span><span class="op" id="3250754">)</span>&nbsp;<span class="op" id="3250756">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3250759">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250817">start</span>&nbsp;<span class="op" id="3250823">:=</span>&nbsp;<span class="ident" id="3250826">d</span><span class="op" id="3250827">.</span><span class="ident" id="3250828">off</span>&nbsp;<span class="op" id="3250832">-</span>&nbsp;<span class="num" id="3250834">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250837">op</span>&nbsp;<span class="op" id="3250840">:=</span>&nbsp;<span class="ident" id="3250843">d</span><span class="op" id="3250844">.</span><span class="ident" id="3250845">scanWhile</span><span class="op" id="3250854">(</span><span class="ident" id="3250855">scanContinue</span><span class="op" id="3250867">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3250871">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250912">d</span><span class="op" id="3250913">.</span><span class="ident" id="3250914">off</span><span class="op" id="3250917">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250921">d</span><span class="op" id="3250922">.</span><span class="ident" id="3250923">scan</span><span class="op" id="3250927">.</span><span class="ident" id="3250928">undo</span><span class="op" id="3250932">(</span><span class="ident" id="3250933">op</span><span class="op" id="3250935">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3250939">d</span><span class="op" id="3250940">.</span><span class="ident" id="3250941">literalStore</span><span class="op" id="3250953">(</span><span class="ident" id="3250954">d</span><span class="op" id="3250955">.</span><span class="ident" id="3250956">data</span><span class="op" id="3250960">[</span><span class="ident" id="3250961">start</span><span class="op" id="3250966">:</span><span class="ident" id="3250967">d</span><span class="op" id="3250968">.</span><span class="ident" id="3250969">off</span><span class="op" id="3250972">]</span><span class="op" id="3250973">,</span>&nbsp;<span class="ident" id="3250975">v</span><span class="op" id="3250976">,</span>&nbsp;<span class="builtintype" id="3250978">false</span><span class="op" id="3250983">)</span><br>
<span class="lineno"></span><span class="op" id="3250985">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="3250988">//&nbsp;convertNumber&nbsp;converts&nbsp;the&nbsp;number&nbsp;literal&nbsp;s&nbsp;to&nbsp;a&nbsp;float64&nbsp;or&nbsp;a&nbsp;Number</span><br>
<span class="lineno"></span><span class="comment" id="3251060">//&nbsp;depending&nbsp;on&nbsp;the&nbsp;setting&nbsp;of&nbsp;d.useNumber.</span><br>
<span class="lineno"></span><span class="keyword" id="3251104">func</span>&nbsp;<span class="op" id="3251109">(</span><span class="ident" id="3251110">d</span>&nbsp;<span class="op" id="3251112">*</span><span class="ident" id="3251113">decodeState</span><span class="op" id="3251124">)</span>&nbsp;<span class="ident" id="3251126">convertNumber</span><span class="op" id="3251139">(</span><span class="ident" id="3251140">s</span>&nbsp;<span class="builtintype" id="3251142">string</span><span class="op" id="3251148">)</span>&nbsp;<span class="op" id="3251150">(</span><span class="keyword" id="3251151">interface</span><span class="op" id="3251160">{</span><span class="op" id="3251161">}</span><span class="op" id="3251162">,</span>&nbsp;<span class="builtintype" id="3251164">error</span><span class="op" id="3251169">)</span>&nbsp;<span class="op" id="3251171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251174">if</span>&nbsp;<span class="ident" id="3251177">d</span><span class="op" id="3251178">.</span><span class="ident" id="3251179">useNumber</span>&nbsp;<span class="op" id="3251189">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251193">return</span>&nbsp;<span class="ident" id="3251200">Number</span><span class="op" id="3251206">(</span><span class="ident" id="3251207">s</span><span class="op" id="3251208">)</span><span class="op" id="3251209">,</span>&nbsp;<span class="ident" id="3251211">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3251216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251219">f</span><span class="op" id="3251220">,</span>&nbsp;<span class="ident" id="3251222">err</span>&nbsp;<span class="op" id="3251226">:=</span>&nbsp;<span class="ident" id="3251229">strconv</span><span class="op" id="3251236">.</span><span class="ident" id="3251237">ParseFloat</span><span class="op" id="3251247">(</span><span class="ident" id="3251248">s</span><span class="op" id="3251249">,</span>&nbsp;<span class="num" id="3251251">64</span><span class="op" id="3251253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251256">if</span>&nbsp;<span class="ident" id="3251259">err</span>&nbsp;<span class="op" id="3251263">!=</span>&nbsp;<span class="ident" id="3251266">nil</span>&nbsp;<span class="op" id="3251270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251274">return</span>&nbsp;<span class="ident" id="3251281">nil</span><span class="op" id="3251284">,</span>&nbsp;<span class="op" id="3251286">&amp;</span><span class="ident" id="3251287">UnmarshalTypeError</span><span class="op" id="3251305">{</span><span class="string" id="3251306">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3251316">+</span>&nbsp;<span class="ident" id="3251318">s</span><span class="op" id="3251319">,</span>&nbsp;<span class="ident" id="3251321">reflect</span><span class="op" id="3251328">.</span><span class="ident" id="3251329">TypeOf</span><span class="op" id="3251335">(</span><span class="num" id="3251336">0.0</span><span class="op" id="3251339">)</span><span class="op" id="3251340">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3251343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251346">return</span>&nbsp;<span class="ident" id="3251353">f</span><span class="op" id="3251354">,</span>&nbsp;<span class="ident" id="3251356">nil</span><br>
<span class="lineno"></span><span class="op" id="3251360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3251363">var</span>&nbsp;<span class="ident" id="3251367">numberType</span>&nbsp;<span class="op" id="3251378">=</span>&nbsp;<span class="ident" id="3251380">reflect</span><span class="op" id="3251387">.</span><span class="ident" id="3251388">TypeOf</span><span class="op" id="3251394">(</span><span class="ident" id="3251395">Number</span><span class="op" id="3251401">(</span><span class="string" id="3251402">&#34;&#34;</span><span class="op" id="3251404">)</span><span class="op" id="3251405">)</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span><span class="comment" id="3251408">//&nbsp;literalStore&nbsp;decodes&nbsp;a&nbsp;literal&nbsp;stored&nbsp;in&nbsp;item&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3251465">//</span><br>
<span class="lineno"></span><span class="comment" id="3251468">//&nbsp;fromQuoted&nbsp;indicates&nbsp;whether&nbsp;this&nbsp;literal&nbsp;came&nbsp;from&nbsp;unwrapping&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3251536">//&nbsp;string&nbsp;from&nbsp;the&nbsp;&#34;,string&#34;&nbsp;struct&nbsp;tag&nbsp;option.&nbsp;this&nbsp;is&nbsp;used&nbsp;only&nbsp;to</span><br>
<span class="lineno">660</span><span class="comment" id="3251605">//&nbsp;produce&nbsp;more&nbsp;helpful&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="3251645">func</span>&nbsp;<span class="op" id="3251650">(</span><span class="ident" id="3251651">d</span>&nbsp;<span class="op" id="3251653">*</span><span class="ident" id="3251654">decodeState</span><span class="op" id="3251665">)</span>&nbsp;<span class="ident" id="3251667">literalStore</span><span class="op" id="3251679">(</span><span class="ident" id="3251680">item</span>&nbsp;<span class="op" id="3251685">[</span><span class="op" id="3251686">]</span><span class="builtintype" id="3251687">byte</span><span class="op" id="3251691">,</span>&nbsp;<span class="ident" id="3251693">v</span>&nbsp;<span class="ident" id="3251695">reflect</span><span class="op" id="3251702">.</span><span class="ident" id="3251703">Value</span><span class="op" id="3251708">,</span>&nbsp;<span class="ident" id="3251710">fromQuoted</span>&nbsp;<span class="builtintype" id="3251721">bool</span><span class="op" id="3251725">)</span>&nbsp;<span class="op" id="3251727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3251730">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251757">if</span>&nbsp;<span class="builtinfunc" id="3251760">len</span><span class="op" id="3251763">(</span><span class="ident" id="3251764">item</span><span class="op" id="3251768">)</span>&nbsp;<span class="op" id="3251770">==</span>&nbsp;<span class="num" id="3251773">0</span>&nbsp;<span class="op" id="3251775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3251779">//Empty&nbsp;string&nbsp;given</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251802">d</span><span class="op" id="3251803">.</span><span class="ident" id="3251804">saveError</span><span class="op" id="3251813">(</span><span class="ident" id="3251814">fmt</span><span class="op" id="3251817">.</span><span class="ident" id="3251818">Errorf</span><span class="op" id="3251824">(</span><span class="string" id="3251825">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3251898">,</span>&nbsp;<span class="ident" id="3251900">item</span><span class="op" id="3251904">,</span>&nbsp;<span class="ident" id="3251906">v</span><span class="op" id="3251907">.</span><span class="ident" id="3251908">Type</span><span class="op" id="3251912">(</span><span class="op" id="3251913">)</span><span class="op" id="3251914">)</span><span class="op" id="3251915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251919">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3251927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251930">wantptr</span>&nbsp;<span class="op" id="3251938">:=</span>&nbsp;<span class="ident" id="3251941">item</span><span class="op" id="3251945">[</span><span class="num" id="3251946">0</span><span class="op" id="3251947">]</span>&nbsp;<span class="op" id="3251949">==</span>&nbsp;<span class="string" id="3251952">&#39;n&#39;</span>&nbsp;<span class="comment" id="3251956">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251965">u</span><span class="op" id="3251966">,</span>&nbsp;<span class="ident" id="3251968">ut</span><span class="op" id="3251970">,</span>&nbsp;<span class="ident" id="3251972">pv</span>&nbsp;<span class="op" id="3251975">:=</span>&nbsp;<span class="ident" id="3251978">d</span><span class="op" id="3251979">.</span><span class="ident" id="3251980">indirect</span><span class="op" id="3251988">(</span><span class="ident" id="3251989">v</span><span class="op" id="3251990">,</span>&nbsp;<span class="ident" id="3251992">wantptr</span><span class="op" id="3251999">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252002">if</span>&nbsp;<span class="ident" id="3252005">u</span>&nbsp;<span class="op" id="3252007">!=</span>&nbsp;<span class="ident" id="3252010">nil</span>&nbsp;<span class="op" id="3252014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252018">err</span>&nbsp;<span class="op" id="3252022">:=</span>&nbsp;<span class="ident" id="3252025">u</span><span class="op" id="3252026">.</span><span class="ident" id="3252027">UnmarshalJSON</span><span class="op" id="3252040">(</span><span class="ident" id="3252041">item</span><span class="op" id="3252045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252049">if</span>&nbsp;<span class="ident" id="3252052">err</span>&nbsp;<span class="op" id="3252056">!=</span>&nbsp;<span class="ident" id="3252059">nil</span>&nbsp;<span class="op" id="3252063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252068">d</span><span class="op" id="3252069">.</span><span class="builtintype" id="3252070">error</span><span class="op" id="3252075">(</span><span class="ident" id="3252076">err</span><span class="op" id="3252079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252083">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252087">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252098">if</span>&nbsp;<span class="ident" id="3252101">ut</span>&nbsp;<span class="op" id="3252104">!=</span>&nbsp;<span class="ident" id="3252107">nil</span>&nbsp;<span class="op" id="3252111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252115">if</span>&nbsp;<span class="ident" id="3252118">item</span><span class="op" id="3252122">[</span><span class="num" id="3252123">0</span><span class="op" id="3252124">]</span>&nbsp;<span class="op" id="3252126">!=</span>&nbsp;<span class="string" id="3252129">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3252133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252138">if</span>&nbsp;<span class="ident" id="3252141">fromQuoted</span>&nbsp;<span class="op" id="3252152">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252158">d</span><span class="op" id="3252159">.</span><span class="ident" id="3252160">saveError</span><span class="op" id="3252169">(</span><span class="ident" id="3252170">fmt</span><span class="op" id="3252173">.</span><span class="ident" id="3252174">Errorf</span><span class="op" id="3252180">(</span><span class="string" id="3252181">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3252254">,</span>&nbsp;<span class="ident" id="3252256">item</span><span class="op" id="3252260">,</span>&nbsp;<span class="ident" id="3252262">v</span><span class="op" id="3252263">.</span><span class="ident" id="3252264">Type</span><span class="op" id="3252268">(</span><span class="op" id="3252269">)</span><span class="op" id="3252270">)</span><span class="op" id="3252271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252276">}</span>&nbsp;<span class="keyword" id="3252278">else</span>&nbsp;<span class="op" id="3252283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252289">d</span><span class="op" id="3252290">.</span><span class="ident" id="3252291">saveError</span><span class="op" id="3252300">(</span><span class="op" id="3252301">&amp;</span><span class="ident" id="3252302">UnmarshalTypeError</span><span class="op" id="3252320">{</span><span class="string" id="3252321">&#34;string&#34;</span><span class="op" id="3252329">,</span>&nbsp;<span class="ident" id="3252331">v</span><span class="op" id="3252332">.</span><span class="ident" id="3252333">Type</span><span class="op" id="3252337">(</span><span class="op" id="3252338">)</span><span class="op" id="3252339">}</span><span class="op" id="3252340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252349">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252353">s</span><span class="op" id="3252354">,</span>&nbsp;<span class="ident" id="3252356">ok</span>&nbsp;<span class="op" id="3252359">:=</span>&nbsp;<span class="ident" id="3252362">unquoteBytes</span><span class="op" id="3252374">(</span><span class="ident" id="3252375">item</span><span class="op" id="3252379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252383">if</span>&nbsp;<span class="op" id="3252386">!</span><span class="ident" id="3252387">ok</span>&nbsp;<span class="op" id="3252390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252395">if</span>&nbsp;<span class="ident" id="3252398">fromQuoted</span>&nbsp;<span class="op" id="3252409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252415">d</span><span class="op" id="3252416">.</span><span class="builtintype" id="3252417">error</span><span class="op" id="3252422">(</span><span class="ident" id="3252423">fmt</span><span class="op" id="3252426">.</span><span class="ident" id="3252427">Errorf</span><span class="op" id="3252433">(</span><span class="string" id="3252434">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3252507">,</span>&nbsp;<span class="ident" id="3252509">item</span><span class="op" id="3252513">,</span>&nbsp;<span class="ident" id="3252515">v</span><span class="op" id="3252516">.</span><span class="ident" id="3252517">Type</span><span class="op" id="3252521">(</span><span class="op" id="3252522">)</span><span class="op" id="3252523">)</span><span class="op" id="3252524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252529">}</span>&nbsp;<span class="keyword" id="3252531">else</span>&nbsp;<span class="op" id="3252536">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252542">d</span><span class="op" id="3252543">.</span><span class="builtintype" id="3252544">error</span><span class="op" id="3252549">(</span><span class="ident" id="3252550">errPhase</span><span class="op" id="3252558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252571">err</span>&nbsp;<span class="op" id="3252575">:=</span>&nbsp;<span class="ident" id="3252578">ut</span><span class="op" id="3252580">.</span><span class="ident" id="3252581">UnmarshalText</span><span class="op" id="3252594">(</span><span class="ident" id="3252595">s</span><span class="op" id="3252596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252600">if</span>&nbsp;<span class="ident" id="3252603">err</span>&nbsp;<span class="op" id="3252607">!=</span>&nbsp;<span class="ident" id="3252610">nil</span>&nbsp;<span class="op" id="3252614">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252619">d</span><span class="op" id="3252620">.</span><span class="builtintype" id="3252621">error</span><span class="op" id="3252626">(</span><span class="ident" id="3252627">err</span><span class="op" id="3252630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252638">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252650">v</span>&nbsp;<span class="op" id="3252652">=</span>&nbsp;<span class="ident" id="3252654">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252659">switch</span>&nbsp;<span class="ident" id="3252666">c</span>&nbsp;<span class="op" id="3252668">:=</span>&nbsp;<span class="ident" id="3252671">item</span><span class="op" id="3252675">[</span><span class="num" id="3252676">0</span><span class="op" id="3252677">]</span><span class="op" id="3252678">;</span>&nbsp;<span class="ident" id="3252680">c</span>&nbsp;<span class="op" id="3252682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252685">case</span>&nbsp;<span class="string" id="3252690">&#39;n&#39;</span><span class="op" id="3252693">:</span>&nbsp;<span class="comment" id="3252695">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252705">switch</span>&nbsp;<span class="ident" id="3252712">v</span><span class="op" id="3252713">.</span><span class="ident" id="3252714">Kind</span><span class="op" id="3252718">(</span><span class="op" id="3252719">)</span>&nbsp;<span class="op" id="3252721">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252725">case</span>&nbsp;<span class="ident" id="3252730">reflect</span><span class="op" id="3252737">.</span><span class="ident" id="3252738">Interface</span><span class="op" id="3252747">,</span>&nbsp;<span class="ident" id="3252749">reflect</span><span class="op" id="3252756">.</span><span class="ident" id="3252757">Ptr</span><span class="op" id="3252760">,</span>&nbsp;<span class="ident" id="3252762">reflect</span><span class="op" id="3252769">.</span><span class="ident" id="3252770">Map</span><span class="op" id="3252773">,</span>&nbsp;<span class="ident" id="3252775">reflect</span><span class="op" id="3252782">.</span><span class="ident" id="3252783">Slice</span><span class="op" id="3252788">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252793">v</span><span class="op" id="3252794">.</span><span class="ident" id="3252795">Set</span><span class="op" id="3252798">(</span><span class="ident" id="3252799">reflect</span><span class="op" id="3252806">.</span><span class="ident" id="3252807">Zero</span><span class="op" id="3252811">(</span><span class="ident" id="3252812">v</span><span class="op" id="3252813">.</span><span class="ident" id="3252814">Type</span><span class="op" id="3252818">(</span><span class="op" id="3252819">)</span><span class="op" id="3252820">)</span><span class="op" id="3252821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3252826">//&nbsp;otherwise,&nbsp;ignore&nbsp;null&nbsp;for&nbsp;primitives/string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252879">case</span>&nbsp;<span class="string" id="3252884">&#39;t&#39;</span><span class="op" id="3252887">,</span>&nbsp;<span class="string" id="3252889">&#39;f&#39;</span><span class="op" id="3252892">:</span>&nbsp;<span class="comment" id="3252894">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252911">value</span>&nbsp;<span class="op" id="3252917">:=</span>&nbsp;<span class="ident" id="3252920">c</span>&nbsp;<span class="op" id="3252922">==</span>&nbsp;<span class="string" id="3252925">&#39;t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252931">switch</span>&nbsp;<span class="ident" id="3252938">v</span><span class="op" id="3252939">.</span><span class="ident" id="3252940">Kind</span><span class="op" id="3252944">(</span><span class="op" id="3252945">)</span>&nbsp;<span class="op" id="3252947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252951">default</span><span class="op" id="3252958">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252963">if</span>&nbsp;<span class="ident" id="3252966">fromQuoted</span>&nbsp;<span class="op" id="3252977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252983">d</span><span class="op" id="3252984">.</span><span class="ident" id="3252985">saveError</span><span class="op" id="3252994">(</span><span class="ident" id="3252995">fmt</span><span class="op" id="3252998">.</span><span class="ident" id="3252999">Errorf</span><span class="op" id="3253005">(</span><span class="string" id="3253006">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3253079">,</span>&nbsp;<span class="ident" id="3253081">item</span><span class="op" id="3253085">,</span>&nbsp;<span class="ident" id="3253087">v</span><span class="op" id="3253088">.</span><span class="ident" id="3253089">Type</span><span class="op" id="3253093">(</span><span class="op" id="3253094">)</span><span class="op" id="3253095">)</span><span class="op" id="3253096">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3253101">}</span>&nbsp;<span class="keyword" id="3253103">else</span>&nbsp;<span class="op" id="3253108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253114">d</span><span class="op" id="3253115">.</span><span class="ident" id="3253116">saveError</span><span class="op" id="3253125">(</span><span class="op" id="3253126">&amp;</span><span class="ident" id="3253127">UnmarshalTypeError</span><span class="op" id="3253145">{</span><span class="string" id="3253146">&#34;bool&#34;</span><span class="op" id="3253152">,</span>&nbsp;<span class="ident" id="3253154">v</span><span class="op" id="3253155">.</span><span class="ident" id="3253156">Type</span><span class="op" id="3253160">(</span><span class="op" id="3253161">)</span><span class="op" id="3253162">}</span><span class="op" id="3253163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3253168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253172">case</span>&nbsp;<span class="ident" id="3253177">reflect</span><span class="op" id="3253184">.</span><span class="ident" id="3253185">Bool</span><span class="op" id="3253189">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253194">v</span><span class="op" id="3253195">.</span><span class="ident" id="3253196">SetBool</span><span class="op" id="3253203">(</span><span class="ident" id="3253204">value</span><span class="op" id="3253209">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253213">case</span>&nbsp;<span class="ident" id="3253218">reflect</span><span class="op" id="3253225">.</span><span class="ident" id="3253226">Interface</span><span class="op" id="3253235">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253240">if</span>&nbsp;<span class="ident" id="3253243">v</span><span class="op" id="3253244">.</span><span class="ident" id="3253245">NumMethod</span><span class="op" id="3253254">(</span><span class="op" id="3253255">)</span>&nbsp;<span class="op" id="3253257">==</span>&nbsp;<span class="num" id="3253260">0</span>&nbsp;<span class="op" id="3253262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253268">v</span><span class="op" id="3253269">.</span><span class="ident" id="3253270">Set</span><span class="op" id="3253273">(</span><span class="ident" id="3253274">reflect</span><span class="op" id="3253281">.</span><span class="ident" id="3253282">ValueOf</span><span class="op" id="3253289">(</span><span class="ident" id="3253290">value</span><span class="op" id="3253295">)</span><span class="op" id="3253296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3253301">}</span>&nbsp;<span class="keyword" id="3253303">else</span>&nbsp;<span class="op" id="3253308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253314">d</span><span class="op" id="3253315">.</span><span class="ident" id="3253316">saveError</span><span class="op" id="3253325">(</span><span class="op" id="3253326">&amp;</span><span class="ident" id="3253327">UnmarshalTypeError</span><span class="op" id="3253345">{</span><span class="string" id="3253346">&#34;bool&#34;</span><span class="op" id="3253352">,</span>&nbsp;<span class="ident" id="3253354">v</span><span class="op" id="3253355">.</span><span class="ident" id="3253356">Type</span><span class="op" id="3253360">(</span><span class="op" id="3253361">)</span><span class="op" id="3253362">}</span><span class="op" id="3253363">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3253368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3253372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253376">case</span>&nbsp;<span class="string" id="3253381">&#39;&#34;&#39;</span><span class="op" id="3253384">:</span>&nbsp;<span class="comment" id="3253386">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253398">s</span><span class="op" id="3253399">,</span>&nbsp;<span class="ident" id="3253401">ok</span>&nbsp;<span class="op" id="3253404">:=</span>&nbsp;<span class="ident" id="3253407">unquoteBytes</span><span class="op" id="3253419">(</span><span class="ident" id="3253420">item</span><span class="op" id="3253424">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253428">if</span>&nbsp;<span class="op" id="3253431">!</span><span class="ident" id="3253432">ok</span>&nbsp;<span class="op" id="3253435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253440">if</span>&nbsp;<span class="ident" id="3253443">fromQuoted</span>&nbsp;<span class="op" id="3253454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253460">d</span><span class="op" id="3253461">.</span><span class="builtintype" id="3253462">error</span><span class="op" id="3253467">(</span><span class="ident" id="3253468">fmt</span><span class="op" id="3253471">.</span><span class="ident" id="3253472">Errorf</span><span class="op" id="3253478">(</span><span class="string" id="3253479">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3253552">,</span>&nbsp;<span class="ident" id="3253554">item</span><span class="op" id="3253558">,</span>&nbsp;<span class="ident" id="3253560">v</span><span class="op" id="3253561">.</span><span class="ident" id="3253562">Type</span><span class="op" id="3253566">(</span><span class="op" id="3253567">)</span><span class="op" id="3253568">)</span><span class="op" id="3253569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3253574">}</span>&nbsp;<span class="keyword" id="3253576">else</span>&nbsp;<span class="op" id="3253581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253587">d</span><span class="op" id="3253588">.</span><span class="builtintype" id="3253589">error</span><span class="op" id="3253594">(</span><span class="ident" id="3253595">errPhase</span><span class="op" id="3253603">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3253608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3253612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253616">switch</span>&nbsp;<span class="ident" id="3253623">v</span><span class="op" id="3253624">.</span><span class="ident" id="3253625">Kind</span><span class="op" id="3253629">(</span><span class="op" id="3253630">)</span>&nbsp;<span class="op" id="3253632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253636">default</span><span class="op" id="3253643">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253648">d</span><span class="op" id="3253649">.</span><span class="ident" id="3253650">saveError</span><span class="op" id="3253659">(</span><span class="op" id="3253660">&amp;</span><span class="ident" id="3253661">UnmarshalTypeError</span><span class="op" id="3253679">{</span><span class="string" id="3253680">&#34;string&#34;</span><span class="op" id="3253688">,</span>&nbsp;<span class="ident" id="3253690">v</span><span class="op" id="3253691">.</span><span class="ident" id="3253692">Type</span><span class="op" id="3253696">(</span><span class="op" id="3253697">)</span><span class="op" id="3253698">}</span><span class="op" id="3253699">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253703">case</span>&nbsp;<span class="ident" id="3253708">reflect</span><span class="op" id="3253715">.</span><span class="ident" id="3253716">Slice</span><span class="op" id="3253721">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253726">if</span>&nbsp;<span class="ident" id="3253729">v</span><span class="op" id="3253730">.</span><span class="ident" id="3253731">Type</span><span class="op" id="3253735">(</span><span class="op" id="3253736">)</span>&nbsp;<span class="op" id="3253738">!=</span>&nbsp;<span class="ident" id="3253741">byteSliceType</span>&nbsp;<span class="op" id="3253755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253761">d</span><span class="op" id="3253762">.</span><span class="ident" id="3253763">saveError</span><span class="op" id="3253772">(</span><span class="op" id="3253773">&amp;</span><span class="ident" id="3253774">UnmarshalTypeError</span><span class="op" id="3253792">{</span><span class="string" id="3253793">&#34;string&#34;</span><span class="op" id="3253801">,</span>&nbsp;<span class="ident" id="3253803">v</span><span class="op" id="3253804">.</span><span class="ident" id="3253805">Type</span><span class="op" id="3253809">(</span><span class="op" id="3253810">)</span><span class="op" id="3253811">}</span><span class="op" id="3253812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253818">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3253827">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253832">b</span>&nbsp;<span class="op" id="3253834">:=</span>&nbsp;<span class="builtinfunc" id="3253837">make</span><span class="op" id="3253841">(</span><span class="op" id="3253842">[</span><span class="op" id="3253843">]</span><span class="builtintype" id="3253844">byte</span><span class="op" id="3253848">,</span>&nbsp;<span class="ident" id="3253850">base64</span><span class="op" id="3253856">.</span><span class="ident" id="3253857">StdEncoding</span><span class="op" id="3253868">.</span><span class="ident" id="3253869">DecodedLen</span><span class="op" id="3253879">(</span><span class="builtinfunc" id="3253880">len</span><span class="op" id="3253883">(</span><span class="ident" id="3253884">s</span><span class="op" id="3253885">)</span><span class="op" id="3253886">)</span><span class="op" id="3253887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253892">n</span><span class="op" id="3253893">,</span>&nbsp;<span class="ident" id="3253895">err</span>&nbsp;<span class="op" id="3253899">:=</span>&nbsp;<span class="ident" id="3253902">base64</span><span class="op" id="3253908">.</span><span class="ident" id="3253909">StdEncoding</span><span class="op" id="3253920">.</span><span class="ident" id="3253921">Decode</span><span class="op" id="3253927">(</span><span class="ident" id="3253928">b</span><span class="op" id="3253929">,</span>&nbsp;<span class="ident" id="3253931">s</span><span class="op" id="3253932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253937">if</span>&nbsp;<span class="ident" id="3253940">err</span>&nbsp;<span class="op" id="3253944">!=</span>&nbsp;<span class="ident" id="3253947">nil</span>&nbsp;<span class="op" id="3253951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253957">d</span><span class="op" id="3253958">.</span><span class="ident" id="3253959">saveError</span><span class="op" id="3253968">(</span><span class="ident" id="3253969">err</span><span class="op" id="3253972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253978">break</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3253987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253992">v</span><span class="op" id="3253993">.</span><span class="ident" id="3253994">Set</span><span class="op" id="3253997">(</span><span class="ident" id="3253998">reflect</span><span class="op" id="3254005">.</span><span class="ident" id="3254006">ValueOf</span><span class="op" id="3254013">(</span><span class="ident" id="3254014">b</span><span class="op" id="3254015">[</span><span class="num" id="3254016">0</span><span class="op" id="3254017">:</span><span class="ident" id="3254018">n</span><span class="op" id="3254019">]</span><span class="op" id="3254020">)</span><span class="op" id="3254021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254025">case</span>&nbsp;<span class="ident" id="3254030">reflect</span><span class="op" id="3254037">.</span><span class="ident" id="3254038">String</span><span class="op" id="3254044">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254049">v</span><span class="op" id="3254050">.</span><span class="ident" id="3254051">SetString</span><span class="op" id="3254060">(</span><span class="builtintype" id="3254061">string</span><span class="op" id="3254067">(</span><span class="ident" id="3254068">s</span><span class="op" id="3254069">)</span><span class="op" id="3254070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254074">case</span>&nbsp;<span class="ident" id="3254079">reflect</span><span class="op" id="3254086">.</span><span class="ident" id="3254087">Interface</span><span class="op" id="3254096">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254101">if</span>&nbsp;<span class="ident" id="3254104">v</span><span class="op" id="3254105">.</span><span class="ident" id="3254106">NumMethod</span><span class="op" id="3254115">(</span><span class="op" id="3254116">)</span>&nbsp;<span class="op" id="3254118">==</span>&nbsp;<span class="num" id="3254121">0</span>&nbsp;<span class="op" id="3254123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254129">v</span><span class="op" id="3254130">.</span><span class="ident" id="3254131">Set</span><span class="op" id="3254134">(</span><span class="ident" id="3254135">reflect</span><span class="op" id="3254142">.</span><span class="ident" id="3254143">ValueOf</span><span class="op" id="3254150">(</span><span class="builtintype" id="3254151">string</span><span class="op" id="3254157">(</span><span class="ident" id="3254158">s</span><span class="op" id="3254159">)</span><span class="op" id="3254160">)</span><span class="op" id="3254161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254166">}</span>&nbsp;<span class="keyword" id="3254168">else</span>&nbsp;<span class="op" id="3254173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254179">d</span><span class="op" id="3254180">.</span><span class="ident" id="3254181">saveError</span><span class="op" id="3254190">(</span><span class="op" id="3254191">&amp;</span><span class="ident" id="3254192">UnmarshalTypeError</span><span class="op" id="3254210">{</span><span class="string" id="3254211">&#34;string&#34;</span><span class="op" id="3254219">,</span>&nbsp;<span class="ident" id="3254221">v</span><span class="op" id="3254222">.</span><span class="ident" id="3254223">Type</span><span class="op" id="3254227">(</span><span class="op" id="3254228">)</span><span class="op" id="3254229">}</span><span class="op" id="3254230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254235">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254243">default</span><span class="op" id="3254250">:</span>&nbsp;<span class="comment" id="3254252">//&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254264">if</span>&nbsp;<span class="ident" id="3254267">c</span>&nbsp;<span class="op" id="3254269">!=</span>&nbsp;<span class="string" id="3254272">&#39;-&#39;</span>&nbsp;<span class="op" id="3254276">&amp;&amp;</span>&nbsp;<span class="op" id="3254279">(</span><span class="ident" id="3254280">c</span>&nbsp;<span class="op" id="3254282">&lt;</span>&nbsp;<span class="string" id="3254284">&#39;0&#39;</span>&nbsp;<span class="op" id="3254288">||</span>&nbsp;<span class="ident" id="3254291">c</span>&nbsp;<span class="op" id="3254293">&gt;</span>&nbsp;<span class="string" id="3254295">&#39;9&#39;</span><span class="op" id="3254298">)</span>&nbsp;<span class="op" id="3254300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254305">if</span>&nbsp;<span class="ident" id="3254308">fromQuoted</span>&nbsp;<span class="op" id="3254319">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254325">d</span><span class="op" id="3254326">.</span><span class="builtintype" id="3254327">error</span><span class="op" id="3254332">(</span><span class="ident" id="3254333">fmt</span><span class="op" id="3254336">.</span><span class="ident" id="3254337">Errorf</span><span class="op" id="3254343">(</span><span class="string" id="3254344">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3254417">,</span>&nbsp;<span class="ident" id="3254419">item</span><span class="op" id="3254423">,</span>&nbsp;<span class="ident" id="3254425">v</span><span class="op" id="3254426">.</span><span class="ident" id="3254427">Type</span><span class="op" id="3254431">(</span><span class="op" id="3254432">)</span><span class="op" id="3254433">)</span><span class="op" id="3254434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254439">}</span>&nbsp;<span class="keyword" id="3254441">else</span>&nbsp;<span class="op" id="3254446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254452">d</span><span class="op" id="3254453">.</span><span class="builtintype" id="3254454">error</span><span class="op" id="3254459">(</span><span class="ident" id="3254460">errPhase</span><span class="op" id="3254468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254477">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254481">s</span>&nbsp;<span class="op" id="3254483">:=</span>&nbsp;<span class="builtintype" id="3254486">string</span><span class="op" id="3254492">(</span><span class="ident" id="3254493">item</span><span class="op" id="3254497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254501">switch</span>&nbsp;<span class="ident" id="3254508">v</span><span class="op" id="3254509">.</span><span class="ident" id="3254510">Kind</span><span class="op" id="3254514">(</span><span class="op" id="3254515">)</span>&nbsp;<span class="op" id="3254517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254521">default</span><span class="op" id="3254528">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254533">if</span>&nbsp;<span class="ident" id="3254536">v</span><span class="op" id="3254537">.</span><span class="ident" id="3254538">Kind</span><span class="op" id="3254542">(</span><span class="op" id="3254543">)</span>&nbsp;<span class="op" id="3254545">==</span>&nbsp;<span class="ident" id="3254548">reflect</span><span class="op" id="3254555">.</span><span class="ident" id="3254556">String</span>&nbsp;<span class="op" id="3254563">&amp;&amp;</span>&nbsp;<span class="ident" id="3254566">v</span><span class="op" id="3254567">.</span><span class="ident" id="3254568">Type</span><span class="op" id="3254572">(</span><span class="op" id="3254573">)</span>&nbsp;<span class="op" id="3254575">==</span>&nbsp;<span class="ident" id="3254578">numberType</span>&nbsp;<span class="op" id="3254589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254595">v</span><span class="op" id="3254596">.</span><span class="ident" id="3254597">SetString</span><span class="op" id="3254606">(</span><span class="ident" id="3254607">s</span><span class="op" id="3254608">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254614">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254628">if</span>&nbsp;<span class="ident" id="3254631">fromQuoted</span>&nbsp;<span class="op" id="3254642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254648">d</span><span class="op" id="3254649">.</span><span class="builtintype" id="3254650">error</span><span class="op" id="3254655">(</span><span class="ident" id="3254656">fmt</span><span class="op" id="3254659">.</span><span class="ident" id="3254660">Errorf</span><span class="op" id="3254666">(</span><span class="string" id="3254667">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3254740">,</span>&nbsp;<span class="ident" id="3254742">item</span><span class="op" id="3254746">,</span>&nbsp;<span class="ident" id="3254748">v</span><span class="op" id="3254749">.</span><span class="ident" id="3254750">Type</span><span class="op" id="3254754">(</span><span class="op" id="3254755">)</span><span class="op" id="3254756">)</span><span class="op" id="3254757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254762">}</span>&nbsp;<span class="keyword" id="3254764">else</span>&nbsp;<span class="op" id="3254769">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254775">d</span><span class="op" id="3254776">.</span><span class="builtintype" id="3254777">error</span><span class="op" id="3254782">(</span><span class="op" id="3254783">&amp;</span><span class="ident" id="3254784">UnmarshalTypeError</span><span class="op" id="3254802">{</span><span class="string" id="3254803">&#34;number&#34;</span><span class="op" id="3254811">,</span>&nbsp;<span class="ident" id="3254813">v</span><span class="op" id="3254814">.</span><span class="ident" id="3254815">Type</span><span class="op" id="3254819">(</span><span class="op" id="3254820">)</span><span class="op" id="3254821">}</span><span class="op" id="3254822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254831">case</span>&nbsp;<span class="ident" id="3254836">reflect</span><span class="op" id="3254843">.</span><span class="ident" id="3254844">Interface</span><span class="op" id="3254853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254858">n</span><span class="op" id="3254859">,</span>&nbsp;<span class="ident" id="3254861">err</span>&nbsp;<span class="op" id="3254865">:=</span>&nbsp;<span class="ident" id="3254868">d</span><span class="op" id="3254869">.</span><span class="ident" id="3254870">convertNumber</span><span class="op" id="3254883">(</span><span class="ident" id="3254884">s</span><span class="op" id="3254885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254890">if</span>&nbsp;<span class="ident" id="3254893">err</span>&nbsp;<span class="op" id="3254897">!=</span>&nbsp;<span class="ident" id="3254900">nil</span>&nbsp;<span class="op" id="3254904">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254910">d</span><span class="op" id="3254911">.</span><span class="ident" id="3254912">saveError</span><span class="op" id="3254921">(</span><span class="ident" id="3254922">err</span><span class="op" id="3254925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254931">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254945">if</span>&nbsp;<span class="ident" id="3254948">v</span><span class="op" id="3254949">.</span><span class="ident" id="3254950">NumMethod</span><span class="op" id="3254959">(</span><span class="op" id="3254960">)</span>&nbsp;<span class="op" id="3254962">!=</span>&nbsp;<span class="num" id="3254965">0</span>&nbsp;<span class="op" id="3254967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254973">d</span><span class="op" id="3254974">.</span><span class="ident" id="3254975">saveError</span><span class="op" id="3254984">(</span><span class="op" id="3254985">&amp;</span><span class="ident" id="3254986">UnmarshalTypeError</span><span class="op" id="3255004">{</span><span class="string" id="3255005">&#34;number&#34;</span><span class="op" id="3255013">,</span>&nbsp;<span class="ident" id="3255015">v</span><span class="op" id="3255016">.</span><span class="ident" id="3255017">Type</span><span class="op" id="3255021">(</span><span class="op" id="3255022">)</span><span class="op" id="3255023">}</span><span class="op" id="3255024">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255030">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255044">v</span><span class="op" id="3255045">.</span><span class="ident" id="3255046">Set</span><span class="op" id="3255049">(</span><span class="ident" id="3255050">reflect</span><span class="op" id="3255057">.</span><span class="ident" id="3255058">ValueOf</span><span class="op" id="3255065">(</span><span class="ident" id="3255066">n</span><span class="op" id="3255067">)</span><span class="op" id="3255068">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255073">case</span>&nbsp;<span class="ident" id="3255078">reflect</span><span class="op" id="3255085">.</span><span class="ident" id="3255086">Int</span><span class="op" id="3255089">,</span>&nbsp;<span class="ident" id="3255091">reflect</span><span class="op" id="3255098">.</span><span class="ident" id="3255099">Int8</span><span class="op" id="3255103">,</span>&nbsp;<span class="ident" id="3255105">reflect</span><span class="op" id="3255112">.</span><span class="ident" id="3255113">Int16</span><span class="op" id="3255118">,</span>&nbsp;<span class="ident" id="3255120">reflect</span><span class="op" id="3255127">.</span><span class="ident" id="3255128">Int32</span><span class="op" id="3255133">,</span>&nbsp;<span class="ident" id="3255135">reflect</span><span class="op" id="3255142">.</span><span class="ident" id="3255143">Int64</span><span class="op" id="3255148">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255153">n</span><span class="op" id="3255154">,</span>&nbsp;<span class="ident" id="3255156">err</span>&nbsp;<span class="op" id="3255160">:=</span>&nbsp;<span class="ident" id="3255163">strconv</span><span class="op" id="3255170">.</span><span class="ident" id="3255171">ParseInt</span><span class="op" id="3255179">(</span><span class="ident" id="3255180">s</span><span class="op" id="3255181">,</span>&nbsp;<span class="num" id="3255183">10</span><span class="op" id="3255185">,</span>&nbsp;<span class="num" id="3255187">64</span><span class="op" id="3255189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255194">if</span>&nbsp;<span class="ident" id="3255197">err</span>&nbsp;<span class="op" id="3255201">!=</span>&nbsp;<span class="ident" id="3255204">nil</span>&nbsp;<span class="op" id="3255208">||</span>&nbsp;<span class="ident" id="3255211">v</span><span class="op" id="3255212">.</span><span class="ident" id="3255213">OverflowInt</span><span class="op" id="3255224">(</span><span class="ident" id="3255225">n</span><span class="op" id="3255226">)</span>&nbsp;<span class="op" id="3255228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255234">d</span><span class="op" id="3255235">.</span><span class="ident" id="3255236">saveError</span><span class="op" id="3255245">(</span><span class="op" id="3255246">&amp;</span><span class="ident" id="3255247">UnmarshalTypeError</span><span class="op" id="3255265">{</span><span class="string" id="3255266">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3255276">+</span>&nbsp;<span class="ident" id="3255278">s</span><span class="op" id="3255279">,</span>&nbsp;<span class="ident" id="3255281">v</span><span class="op" id="3255282">.</span><span class="ident" id="3255283">Type</span><span class="op" id="3255287">(</span><span class="op" id="3255288">)</span><span class="op" id="3255289">}</span><span class="op" id="3255290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255296">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255305">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255310">v</span><span class="op" id="3255311">.</span><span class="ident" id="3255312">SetInt</span><span class="op" id="3255318">(</span><span class="ident" id="3255319">n</span><span class="op" id="3255320">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255325">case</span>&nbsp;<span class="ident" id="3255330">reflect</span><span class="op" id="3255337">.</span><span class="ident" id="3255338">Uint</span><span class="op" id="3255342">,</span>&nbsp;<span class="ident" id="3255344">reflect</span><span class="op" id="3255351">.</span><span class="ident" id="3255352">Uint8</span><span class="op" id="3255357">,</span>&nbsp;<span class="ident" id="3255359">reflect</span><span class="op" id="3255366">.</span><span class="ident" id="3255367">Uint16</span><span class="op" id="3255373">,</span>&nbsp;<span class="ident" id="3255375">reflect</span><span class="op" id="3255382">.</span><span class="ident" id="3255383">Uint32</span><span class="op" id="3255389">,</span>&nbsp;<span class="ident" id="3255391">reflect</span><span class="op" id="3255398">.</span><span class="ident" id="3255399">Uint64</span><span class="op" id="3255405">,</span>&nbsp;<span class="ident" id="3255407">reflect</span><span class="op" id="3255414">.</span><span class="ident" id="3255415">Uintptr</span><span class="op" id="3255422">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255427">n</span><span class="op" id="3255428">,</span>&nbsp;<span class="ident" id="3255430">err</span>&nbsp;<span class="op" id="3255434">:=</span>&nbsp;<span class="ident" id="3255437">strconv</span><span class="op" id="3255444">.</span><span class="ident" id="3255445">ParseUint</span><span class="op" id="3255454">(</span><span class="ident" id="3255455">s</span><span class="op" id="3255456">,</span>&nbsp;<span class="num" id="3255458">10</span><span class="op" id="3255460">,</span>&nbsp;<span class="num" id="3255462">64</span><span class="op" id="3255464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255469">if</span>&nbsp;<span class="ident" id="3255472">err</span>&nbsp;<span class="op" id="3255476">!=</span>&nbsp;<span class="ident" id="3255479">nil</span>&nbsp;<span class="op" id="3255483">||</span>&nbsp;<span class="ident" id="3255486">v</span><span class="op" id="3255487">.</span><span class="ident" id="3255488">OverflowUint</span><span class="op" id="3255500">(</span><span class="ident" id="3255501">n</span><span class="op" id="3255502">)</span>&nbsp;<span class="op" id="3255504">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255510">d</span><span class="op" id="3255511">.</span><span class="ident" id="3255512">saveError</span><span class="op" id="3255521">(</span><span class="op" id="3255522">&amp;</span><span class="ident" id="3255523">UnmarshalTypeError</span><span class="op" id="3255541">{</span><span class="string" id="3255542">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3255552">+</span>&nbsp;<span class="ident" id="3255554">s</span><span class="op" id="3255555">,</span>&nbsp;<span class="ident" id="3255557">v</span><span class="op" id="3255558">.</span><span class="ident" id="3255559">Type</span><span class="op" id="3255563">(</span><span class="op" id="3255564">)</span><span class="op" id="3255565">}</span><span class="op" id="3255566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255572">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255586">v</span><span class="op" id="3255587">.</span><span class="ident" id="3255588">SetUint</span><span class="op" id="3255595">(</span><span class="ident" id="3255596">n</span><span class="op" id="3255597">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255602">case</span>&nbsp;<span class="ident" id="3255607">reflect</span><span class="op" id="3255614">.</span><span class="ident" id="3255615">Float32</span><span class="op" id="3255622">,</span>&nbsp;<span class="ident" id="3255624">reflect</span><span class="op" id="3255631">.</span><span class="ident" id="3255632">Float64</span><span class="op" id="3255639">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255644">n</span><span class="op" id="3255645">,</span>&nbsp;<span class="ident" id="3255647">err</span>&nbsp;<span class="op" id="3255651">:=</span>&nbsp;<span class="ident" id="3255654">strconv</span><span class="op" id="3255661">.</span><span class="ident" id="3255662">ParseFloat</span><span class="op" id="3255672">(</span><span class="ident" id="3255673">s</span><span class="op" id="3255674">,</span>&nbsp;<span class="ident" id="3255676">v</span><span class="op" id="3255677">.</span><span class="ident" id="3255678">Type</span><span class="op" id="3255682">(</span><span class="op" id="3255683">)</span><span class="op" id="3255684">.</span><span class="ident" id="3255685">Bits</span><span class="op" id="3255689">(</span><span class="op" id="3255690">)</span><span class="op" id="3255691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255696">if</span>&nbsp;<span class="ident" id="3255699">err</span>&nbsp;<span class="op" id="3255703">!=</span>&nbsp;<span class="ident" id="3255706">nil</span>&nbsp;<span class="op" id="3255710">||</span>&nbsp;<span class="ident" id="3255713">v</span><span class="op" id="3255714">.</span><span class="ident" id="3255715">OverflowFloat</span><span class="op" id="3255728">(</span><span class="ident" id="3255729">n</span><span class="op" id="3255730">)</span>&nbsp;<span class="op" id="3255732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255738">d</span><span class="op" id="3255739">.</span><span class="ident" id="3255740">saveError</span><span class="op" id="3255749">(</span><span class="op" id="3255750">&amp;</span><span class="ident" id="3255751">UnmarshalTypeError</span><span class="op" id="3255769">{</span><span class="string" id="3255770">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3255780">+</span>&nbsp;<span class="ident" id="3255782">s</span><span class="op" id="3255783">,</span>&nbsp;<span class="ident" id="3255785">v</span><span class="op" id="3255786">.</span><span class="ident" id="3255787">Type</span><span class="op" id="3255791">(</span><span class="op" id="3255792">)</span><span class="op" id="3255793">}</span><span class="op" id="3255794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255800">break</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255814">v</span><span class="op" id="3255815">.</span><span class="ident" id="3255816">SetFloat</span><span class="op" id="3255824">(</span><span class="ident" id="3255825">n</span><span class="op" id="3255826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255833">}</span><br>
<span class="lineno"></span><span class="op" id="3255835">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="comment" id="3255838">//&nbsp;The&nbsp;xxxInterface&nbsp;routines&nbsp;build&nbsp;up&nbsp;a&nbsp;value&nbsp;to&nbsp;be&nbsp;stored</span><br>
<span class="lineno"></span><span class="comment" id="3255897">//&nbsp;in&nbsp;an&nbsp;empty&nbsp;interface.&nbsp;&nbsp;They&nbsp;are&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="3255957">//&nbsp;but&nbsp;they&nbsp;avoid&nbsp;the&nbsp;weight&nbsp;of&nbsp;reflection&nbsp;in&nbsp;this&nbsp;common&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="3256022">//&nbsp;valueInterface&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;returns&nbsp;interface{}</span><br>
<span class="lineno"></span><span class="keyword" id="3256078">func</span>&nbsp;<span class="op" id="3256083">(</span><span class="ident" id="3256084">d</span>&nbsp;<span class="op" id="3256086">*</span><span class="ident" id="3256087">decodeState</span><span class="op" id="3256098">)</span>&nbsp;<span class="ident" id="3256100">valueInterface</span><span class="op" id="3256114">(</span><span class="op" id="3256115">)</span>&nbsp;<span class="keyword" id="3256117">interface</span><span class="op" id="3256126">{</span><span class="op" id="3256127">}</span>&nbsp;<span class="op" id="3256129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256132">switch</span>&nbsp;<span class="ident" id="3256139">d</span><span class="op" id="3256140">.</span><span class="ident" id="3256141">scanWhile</span><span class="op" id="3256150">(</span><span class="ident" id="3256151">scanSkipSpace</span><span class="op" id="3256164">)</span>&nbsp;<span class="op" id="3256166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256169">default</span><span class="op" id="3256176">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256180">d</span><span class="op" id="3256181">.</span><span class="builtintype" id="3256182">error</span><span class="op" id="3256187">(</span><span class="ident" id="3256188">errPhase</span><span class="op" id="3256196">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3256200">panic</span><span class="op" id="3256205">(</span><span class="string" id="3256206">&#34;unreachable&#34;</span><span class="op" id="3256219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256222">case</span>&nbsp;<span class="ident" id="3256227">scanBeginArray</span><span class="op" id="3256241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256245">return</span>&nbsp;<span class="ident" id="3256252">d</span><span class="op" id="3256253">.</span><span class="ident" id="3256254">arrayInterface</span><span class="op" id="3256268">(</span><span class="op" id="3256269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256272">case</span>&nbsp;<span class="ident" id="3256277">scanBeginObject</span><span class="op" id="3256292">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256296">return</span>&nbsp;<span class="ident" id="3256303">d</span><span class="op" id="3256304">.</span><span class="ident" id="3256305">objectInterface</span><span class="op" id="3256320">(</span><span class="op" id="3256321">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256324">case</span>&nbsp;<span class="ident" id="3256329">scanBeginLiteral</span><span class="op" id="3256345">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256349">return</span>&nbsp;<span class="ident" id="3256356">d</span><span class="op" id="3256357">.</span><span class="ident" id="3256358">literalInterface</span><span class="op" id="3256374">(</span><span class="op" id="3256375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256378">}</span><br>
<span class="lineno"></span><span class="op" id="3256380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="3256383">//&nbsp;arrayInterface&nbsp;is&nbsp;like&nbsp;array&nbsp;but&nbsp;returns&nbsp;[]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="3256442">func</span>&nbsp;<span class="op" id="3256447">(</span><span class="ident" id="3256448">d</span>&nbsp;<span class="op" id="3256450">*</span><span class="ident" id="3256451">decodeState</span><span class="op" id="3256462">)</span>&nbsp;<span class="ident" id="3256464">arrayInterface</span><span class="op" id="3256478">(</span><span class="op" id="3256479">)</span>&nbsp;<span class="op" id="3256481">[</span><span class="op" id="3256482">]</span><span class="keyword" id="3256483">interface</span><span class="op" id="3256492">{</span><span class="op" id="3256493">}</span>&nbsp;<span class="op" id="3256495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256498">var</span>&nbsp;<span class="ident" id="3256502">v</span>&nbsp;<span class="op" id="3256504">=</span>&nbsp;<span class="builtinfunc" id="3256506">make</span><span class="op" id="3256510">(</span><span class="op" id="3256511">[</span><span class="op" id="3256512">]</span><span class="keyword" id="3256513">interface</span><span class="op" id="3256522">{</span><span class="op" id="3256523">}</span><span class="op" id="3256524">,</span>&nbsp;<span class="num" id="3256526">0</span><span class="op" id="3256527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256530">for</span>&nbsp;<span class="op" id="3256534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3256538">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256598">op</span>&nbsp;<span class="op" id="3256601">:=</span>&nbsp;<span class="ident" id="3256604">d</span><span class="op" id="3256605">.</span><span class="ident" id="3256606">scanWhile</span><span class="op" id="3256615">(</span><span class="ident" id="3256616">scanSkipSpace</span><span class="op" id="3256629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256633">if</span>&nbsp;<span class="ident" id="3256636">op</span>&nbsp;<span class="op" id="3256639">==</span>&nbsp;<span class="ident" id="3256642">scanEndArray</span>&nbsp;<span class="op" id="3256655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256660">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3256673">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256729">d</span><span class="op" id="3256730">.</span><span class="ident" id="3256731">off</span><span class="op" id="3256734">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256739">d</span><span class="op" id="3256740">.</span><span class="ident" id="3256741">scan</span><span class="op" id="3256745">.</span><span class="ident" id="3256746">undo</span><span class="op" id="3256750">(</span><span class="ident" id="3256751">op</span><span class="op" id="3256753">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256758">v</span>&nbsp;<span class="op" id="3256760">=</span>&nbsp;<span class="builtinfunc" id="3256762">append</span><span class="op" id="3256768">(</span><span class="ident" id="3256769">v</span><span class="op" id="3256770">,</span>&nbsp;<span class="ident" id="3256772">d</span><span class="op" id="3256773">.</span><span class="ident" id="3256774">valueInterface</span><span class="op" id="3256788">(</span><span class="op" id="3256789">)</span><span class="op" id="3256790">)</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3256795">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256827">op</span>&nbsp;<span class="op" id="3256830">=</span>&nbsp;<span class="ident" id="3256832">d</span><span class="op" id="3256833">.</span><span class="ident" id="3256834">scanWhile</span><span class="op" id="3256843">(</span><span class="ident" id="3256844">scanSkipSpace</span><span class="op" id="3256857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256861">if</span>&nbsp;<span class="ident" id="3256864">op</span>&nbsp;<span class="op" id="3256867">==</span>&nbsp;<span class="ident" id="3256870">scanEndArray</span>&nbsp;<span class="op" id="3256883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256888">break</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256900">if</span>&nbsp;<span class="ident" id="3256903">op</span>&nbsp;<span class="op" id="3256906">!=</span>&nbsp;<span class="ident" id="3256909">scanArrayValue</span>&nbsp;<span class="op" id="3256924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256929">d</span><span class="op" id="3256930">.</span><span class="builtintype" id="3256931">error</span><span class="op" id="3256936">(</span><span class="ident" id="3256937">errPhase</span><span class="op" id="3256945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256952">}</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256955">return</span>&nbsp;<span class="ident" id="3256962">v</span><br>
<span class="lineno"></span><span class="op" id="3256964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3256967">//&nbsp;objectInterface&nbsp;is&nbsp;like&nbsp;object&nbsp;but&nbsp;returns&nbsp;map[string]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="3257037">func</span>&nbsp;<span class="op" id="3257042">(</span><span class="ident" id="3257043">d</span>&nbsp;<span class="op" id="3257045">*</span><span class="ident" id="3257046">decodeState</span><span class="op" id="3257057">)</span>&nbsp;<span class="ident" id="3257059">objectInterface</span><span class="op" id="3257074">(</span><span class="op" id="3257075">)</span>&nbsp;<span class="keyword" id="3257077">map</span><span class="op" id="3257080">[</span><span class="builtintype" id="3257081">string</span><span class="op" id="3257087">]</span><span class="keyword" id="3257088">interface</span><span class="op" id="3257097">{</span><span class="op" id="3257098">}</span>&nbsp;<span class="op" id="3257100">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257103">m</span>&nbsp;<span class="op" id="3257105">:=</span>&nbsp;<span class="builtinfunc" id="3257108">make</span><span class="op" id="3257112">(</span><span class="keyword" id="3257113">map</span><span class="op" id="3257116">[</span><span class="builtintype" id="3257117">string</span><span class="op" id="3257123">]</span><span class="keyword" id="3257124">interface</span><span class="op" id="3257133">{</span><span class="op" id="3257134">}</span><span class="op" id="3257135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257138">for</span>&nbsp;<span class="op" id="3257142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3257146">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257194">op</span>&nbsp;<span class="op" id="3257197">:=</span>&nbsp;<span class="ident" id="3257200">d</span><span class="op" id="3257201">.</span><span class="ident" id="3257202">scanWhile</span><span class="op" id="3257211">(</span><span class="ident" id="3257212">scanSkipSpace</span><span class="op" id="3257225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257229">if</span>&nbsp;<span class="ident" id="3257232">op</span>&nbsp;<span class="op" id="3257235">==</span>&nbsp;<span class="ident" id="3257238">scanEndObject</span>&nbsp;<span class="op" id="3257252">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3257257">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257311">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257323">if</span>&nbsp;<span class="ident" id="3257326">op</span>&nbsp;<span class="op" id="3257329">!=</span>&nbsp;<span class="ident" id="3257332">scanBeginLiteral</span>&nbsp;<span class="op" id="3257349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257354">d</span><span class="op" id="3257355">.</span><span class="builtintype" id="3257356">error</span><span class="op" id="3257361">(</span><span class="ident" id="3257362">errPhase</span><span class="op" id="3257370">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3257379">//&nbsp;Read&nbsp;string&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257401">start</span>&nbsp;<span class="op" id="3257407">:=</span>&nbsp;<span class="ident" id="3257410">d</span><span class="op" id="3257411">.</span><span class="ident" id="3257412">off</span>&nbsp;<span class="op" id="3257416">-</span>&nbsp;<span class="num" id="3257418">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257422">op</span>&nbsp;<span class="op" id="3257425">=</span>&nbsp;<span class="ident" id="3257427">d</span><span class="op" id="3257428">.</span><span class="ident" id="3257429">scanWhile</span><span class="op" id="3257438">(</span><span class="ident" id="3257439">scanContinue</span><span class="op" id="3257451">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257455">item</span>&nbsp;<span class="op" id="3257460">:=</span>&nbsp;<span class="ident" id="3257463">d</span><span class="op" id="3257464">.</span><span class="ident" id="3257465">data</span><span class="op" id="3257469">[</span><span class="ident" id="3257470">start</span>&nbsp;<span class="op" id="3257476">:</span>&nbsp;<span class="ident" id="3257478">d</span><span class="op" id="3257479">.</span><span class="ident" id="3257480">off</span><span class="op" id="3257483">-</span><span class="num" id="3257484">1</span><span class="op" id="3257485">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257489">key</span><span class="op" id="3257492">,</span>&nbsp;<span class="ident" id="3257494">ok</span>&nbsp;<span class="op" id="3257497">:=</span>&nbsp;<span class="ident" id="3257500">unquote</span><span class="op" id="3257507">(</span><span class="ident" id="3257508">item</span><span class="op" id="3257512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257516">if</span>&nbsp;<span class="op" id="3257519">!</span><span class="ident" id="3257520">ok</span>&nbsp;<span class="op" id="3257523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257528">d</span><span class="op" id="3257529">.</span><span class="builtintype" id="3257530">error</span><span class="op" id="3257535">(</span><span class="ident" id="3257536">errPhase</span><span class="op" id="3257544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257548">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3257553">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257579">if</span>&nbsp;<span class="ident" id="3257582">op</span>&nbsp;<span class="op" id="3257585">==</span>&nbsp;<span class="ident" id="3257588">scanSkipSpace</span>&nbsp;<span class="op" id="3257602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257607">op</span>&nbsp;<span class="op" id="3257610">=</span>&nbsp;<span class="ident" id="3257612">d</span><span class="op" id="3257613">.</span><span class="ident" id="3257614">scanWhile</span><span class="op" id="3257623">(</span><span class="ident" id="3257624">scanSkipSpace</span><span class="op" id="3257637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257641">}</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257645">if</span>&nbsp;<span class="ident" id="3257648">op</span>&nbsp;<span class="op" id="3257651">!=</span>&nbsp;<span class="ident" id="3257654">scanObjectKey</span>&nbsp;<span class="op" id="3257668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257673">d</span><span class="op" id="3257674">.</span><span class="builtintype" id="3257675">error</span><span class="op" id="3257680">(</span><span class="ident" id="3257681">errPhase</span><span class="op" id="3257689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3257698">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257715">m</span><span class="op" id="3257716">[</span><span class="ident" id="3257717">key</span><span class="op" id="3257720">]</span>&nbsp;<span class="op" id="3257722">=</span>&nbsp;<span class="ident" id="3257724">d</span><span class="op" id="3257725">.</span><span class="ident" id="3257726">valueInterface</span><span class="op" id="3257740">(</span><span class="op" id="3257741">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3257746">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257778">op</span>&nbsp;<span class="op" id="3257781">=</span>&nbsp;<span class="ident" id="3257783">d</span><span class="op" id="3257784">.</span><span class="ident" id="3257785">scanWhile</span><span class="op" id="3257794">(</span><span class="ident" id="3257795">scanSkipSpace</span><span class="op" id="3257808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257812">if</span>&nbsp;<span class="ident" id="3257815">op</span>&nbsp;<span class="op" id="3257818">==</span>&nbsp;<span class="ident" id="3257821">scanEndObject</span>&nbsp;<span class="op" id="3257835">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257840">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257852">if</span>&nbsp;<span class="ident" id="3257855">op</span>&nbsp;<span class="op" id="3257858">!=</span>&nbsp;<span class="ident" id="3257861">scanObjectValue</span>&nbsp;<span class="op" id="3257877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257882">d</span><span class="op" id="3257883">.</span><span class="builtintype" id="3257884">error</span><span class="op" id="3257889">(</span><span class="ident" id="3257890">errPhase</span><span class="op" id="3257898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257902">}</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257908">return</span>&nbsp;<span class="ident" id="3257915">m</span><br>
<span class="lineno"></span><span class="op" id="3257917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3257920">//&nbsp;literalInterface&nbsp;is&nbsp;like&nbsp;literal&nbsp;but&nbsp;returns&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">915</span><span class="keyword" id="3257988">func</span>&nbsp;<span class="op" id="3257993">(</span><span class="ident" id="3257994">d</span>&nbsp;<span class="op" id="3257996">*</span><span class="ident" id="3257997">decodeState</span><span class="op" id="3258008">)</span>&nbsp;<span class="ident" id="3258010">literalInterface</span><span class="op" id="3258026">(</span><span class="op" id="3258027">)</span>&nbsp;<span class="keyword" id="3258029">interface</span><span class="op" id="3258038">{</span><span class="op" id="3258039">}</span>&nbsp;<span class="op" id="3258041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3258044">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258102">start</span>&nbsp;<span class="op" id="3258108">:=</span>&nbsp;<span class="ident" id="3258111">d</span><span class="op" id="3258112">.</span><span class="ident" id="3258113">off</span>&nbsp;<span class="op" id="3258117">-</span>&nbsp;<span class="num" id="3258119">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258122">op</span>&nbsp;<span class="op" id="3258125">:=</span>&nbsp;<span class="ident" id="3258128">d</span><span class="op" id="3258129">.</span><span class="ident" id="3258130">scanWhile</span><span class="op" id="3258139">(</span><span class="ident" id="3258140">scanContinue</span><span class="op" id="3258152">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3258156">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258197">d</span><span class="op" id="3258198">.</span><span class="ident" id="3258199">off</span><span class="op" id="3258202">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258206">d</span><span class="op" id="3258207">.</span><span class="ident" id="3258208">scan</span><span class="op" id="3258212">.</span><span class="ident" id="3258213">undo</span><span class="op" id="3258217">(</span><span class="ident" id="3258218">op</span><span class="op" id="3258220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258223">item</span>&nbsp;<span class="op" id="3258228">:=</span>&nbsp;<span class="ident" id="3258231">d</span><span class="op" id="3258232">.</span><span class="ident" id="3258233">data</span><span class="op" id="3258237">[</span><span class="ident" id="3258238">start</span><span class="op" id="3258243">:</span><span class="ident" id="3258244">d</span><span class="op" id="3258245">.</span><span class="ident" id="3258246">off</span><span class="op" id="3258249">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258253">switch</span>&nbsp;<span class="ident" id="3258260">c</span>&nbsp;<span class="op" id="3258262">:=</span>&nbsp;<span class="ident" id="3258265">item</span><span class="op" id="3258269">[</span><span class="num" id="3258270">0</span><span class="op" id="3258271">]</span><span class="op" id="3258272">;</span>&nbsp;<span class="ident" id="3258274">c</span>&nbsp;<span class="op" id="3258276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258279">case</span>&nbsp;<span class="string" id="3258284">&#39;n&#39;</span><span class="op" id="3258287">:</span>&nbsp;<span class="comment" id="3258289">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258299">return</span>&nbsp;<span class="ident" id="3258306">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258312">case</span>&nbsp;<span class="string" id="3258317">&#39;t&#39;</span><span class="op" id="3258320">,</span>&nbsp;<span class="string" id="3258322">&#39;f&#39;</span><span class="op" id="3258325">:</span>&nbsp;<span class="comment" id="3258327">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258344">return</span>&nbsp;<span class="ident" id="3258351">c</span>&nbsp;<span class="op" id="3258353">==</span>&nbsp;<span class="string" id="3258356">&#39;t&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258362">case</span>&nbsp;<span class="string" id="3258367">&#39;&#34;&#39;</span><span class="op" id="3258370">:</span>&nbsp;<span class="comment" id="3258372">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258384">s</span><span class="op" id="3258385">,</span>&nbsp;<span class="ident" id="3258387">ok</span>&nbsp;<span class="op" id="3258390">:=</span>&nbsp;<span class="ident" id="3258393">unquote</span><span class="op" id="3258400">(</span><span class="ident" id="3258401">item</span><span class="op" id="3258405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258409">if</span>&nbsp;<span class="op" id="3258412">!</span><span class="ident" id="3258413">ok</span>&nbsp;<span class="op" id="3258416">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258421">d</span><span class="op" id="3258422">.</span><span class="builtintype" id="3258423">error</span><span class="op" id="3258428">(</span><span class="ident" id="3258429">errPhase</span><span class="op" id="3258437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258445">return</span>&nbsp;<span class="ident" id="3258452">s</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258456">default</span><span class="op" id="3258463">:</span>&nbsp;<span class="comment" id="3258465">//&nbsp;number</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258477">if</span>&nbsp;<span class="ident" id="3258480">c</span>&nbsp;<span class="op" id="3258482">!=</span>&nbsp;<span class="string" id="3258485">&#39;-&#39;</span>&nbsp;<span class="op" id="3258489">&amp;&amp;</span>&nbsp;<span class="op" id="3258492">(</span><span class="ident" id="3258493">c</span>&nbsp;<span class="op" id="3258495">&lt;</span>&nbsp;<span class="string" id="3258497">&#39;0&#39;</span>&nbsp;<span class="op" id="3258501">||</span>&nbsp;<span class="ident" id="3258504">c</span>&nbsp;<span class="op" id="3258506">&gt;</span>&nbsp;<span class="string" id="3258508">&#39;9&#39;</span><span class="op" id="3258511">)</span>&nbsp;<span class="op" id="3258513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258518">d</span><span class="op" id="3258519">.</span><span class="builtintype" id="3258520">error</span><span class="op" id="3258525">(</span><span class="ident" id="3258526">errPhase</span><span class="op" id="3258534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258542">n</span><span class="op" id="3258543">,</span>&nbsp;<span class="ident" id="3258545">err</span>&nbsp;<span class="op" id="3258549">:=</span>&nbsp;<span class="ident" id="3258552">d</span><span class="op" id="3258553">.</span><span class="ident" id="3258554">convertNumber</span><span class="op" id="3258567">(</span><span class="builtintype" id="3258568">string</span><span class="op" id="3258574">(</span><span class="ident" id="3258575">item</span><span class="op" id="3258579">)</span><span class="op" id="3258580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258584">if</span>&nbsp;<span class="ident" id="3258587">err</span>&nbsp;<span class="op" id="3258591">!=</span>&nbsp;<span class="ident" id="3258594">nil</span>&nbsp;<span class="op" id="3258598">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258603">d</span><span class="op" id="3258604">.</span><span class="ident" id="3258605">saveError</span><span class="op" id="3258614">(</span><span class="ident" id="3258615">err</span><span class="op" id="3258618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258626">return</span>&nbsp;<span class="ident" id="3258633">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258636">}</span><br>
<span class="lineno"></span><span class="op" id="3258638">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span><span class="comment" id="3258641">//&nbsp;getu4&nbsp;decodes&nbsp;\uXXXX&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s,&nbsp;returning&nbsp;the&nbsp;hex&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="3258715">//&nbsp;or&nbsp;it&nbsp;returns&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="3258736">func</span>&nbsp;<span class="ident" id="3258741">getu4</span><span class="op" id="3258746">(</span><span class="ident" id="3258747">s</span>&nbsp;<span class="op" id="3258749">[</span><span class="op" id="3258750">]</span><span class="builtintype" id="3258751">byte</span><span class="op" id="3258755">)</span>&nbsp;<span class="builtintype" id="3258757">rune</span>&nbsp;<span class="op" id="3258762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258765">if</span>&nbsp;<span class="builtinfunc" id="3258768">len</span><span class="op" id="3258771">(</span><span class="ident" id="3258772">s</span><span class="op" id="3258773">)</span>&nbsp;<span class="op" id="3258775">&lt;</span>&nbsp;<span class="num" id="3258777">6</span>&nbsp;<span class="op" id="3258779">||</span>&nbsp;<span class="ident" id="3258782">s</span><span class="op" id="3258783">[</span><span class="num" id="3258784">0</span><span class="op" id="3258785">]</span>&nbsp;<span class="op" id="3258787">!=</span>&nbsp;<span class="string" id="3258790">&#39;\\&#39;</span>&nbsp;<span class="op" id="3258795">||</span>&nbsp;<span class="ident" id="3258798">s</span><span class="op" id="3258799">[</span><span class="num" id="3258800">1</span><span class="op" id="3258801">]</span>&nbsp;<span class="op" id="3258803">!=</span>&nbsp;<span class="string" id="3258806">&#39;u&#39;</span>&nbsp;<span class="op" id="3258810">{</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258814">return</span>&nbsp;<span class="op" id="3258821">-</span><span class="num" id="3258822">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258828">r</span><span class="op" id="3258829">,</span>&nbsp;<span class="ident" id="3258831">err</span>&nbsp;<span class="op" id="3258835">:=</span>&nbsp;<span class="ident" id="3258838">strconv</span><span class="op" id="3258845">.</span><span class="ident" id="3258846">ParseUint</span><span class="op" id="3258855">(</span><span class="builtintype" id="3258856">string</span><span class="op" id="3258862">(</span><span class="ident" id="3258863">s</span><span class="op" id="3258864">[</span><span class="num" id="3258865">2</span><span class="op" id="3258866">:</span><span class="num" id="3258867">6</span><span class="op" id="3258868">]</span><span class="op" id="3258869">)</span><span class="op" id="3258870">,</span>&nbsp;<span class="num" id="3258872">16</span><span class="op" id="3258874">,</span>&nbsp;<span class="num" id="3258876">64</span><span class="op" id="3258878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258881">if</span>&nbsp;<span class="ident" id="3258884">err</span>&nbsp;<span class="op" id="3258888">!=</span>&nbsp;<span class="ident" id="3258891">nil</span>&nbsp;<span class="op" id="3258895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258899">return</span>&nbsp;<span class="op" id="3258906">-</span><span class="num" id="3258907">1</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258913">return</span>&nbsp;<span class="builtintype" id="3258920">rune</span><span class="op" id="3258924">(</span><span class="ident" id="3258925">r</span><span class="op" id="3258926">)</span><br>
<span class="lineno"></span><span class="op" id="3258928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3258931">//&nbsp;unquote&nbsp;converts&nbsp;a&nbsp;quoted&nbsp;JSON&nbsp;string&nbsp;literal&nbsp;s&nbsp;into&nbsp;an&nbsp;actual&nbsp;string&nbsp;t.</span><br>
<span class="lineno">965</span><span class="comment" id="3259007">//&nbsp;The&nbsp;rules&nbsp;are&nbsp;different&nbsp;than&nbsp;for&nbsp;Go,&nbsp;so&nbsp;cannot&nbsp;use&nbsp;strconv.Unquote.</span><br>
<span class="lineno"></span><span class="keyword" id="3259078">func</span>&nbsp;<span class="ident" id="3259083">unquote</span><span class="op" id="3259090">(</span><span class="ident" id="3259091">s</span>&nbsp;<span class="op" id="3259093">[</span><span class="op" id="3259094">]</span><span class="builtintype" id="3259095">byte</span><span class="op" id="3259099">)</span>&nbsp;<span class="op" id="3259101">(</span><span class="ident" id="3259102">t</span>&nbsp;<span class="builtintype" id="3259104">string</span><span class="op" id="3259110">,</span>&nbsp;<span class="ident" id="3259112">ok</span>&nbsp;<span class="builtintype" id="3259115">bool</span><span class="op" id="3259119">)</span>&nbsp;<span class="op" id="3259121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259124">s</span><span class="op" id="3259125">,</span>&nbsp;<span class="ident" id="3259127">ok</span>&nbsp;<span class="op" id="3259130">=</span>&nbsp;<span class="ident" id="3259132">unquoteBytes</span><span class="op" id="3259144">(</span><span class="ident" id="3259145">s</span><span class="op" id="3259146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259149">t</span>&nbsp;<span class="op" id="3259151">=</span>&nbsp;<span class="builtintype" id="3259153">string</span><span class="op" id="3259159">(</span><span class="ident" id="3259160">s</span><span class="op" id="3259161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259164">return</span><br>
<span class="lineno">970</span><span class="op" id="3259171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3259174">func</span>&nbsp;<span class="ident" id="3259179">unquoteBytes</span><span class="op" id="3259191">(</span><span class="ident" id="3259192">s</span>&nbsp;<span class="op" id="3259194">[</span><span class="op" id="3259195">]</span><span class="builtintype" id="3259196">byte</span><span class="op" id="3259200">)</span>&nbsp;<span class="op" id="3259202">(</span><span class="ident" id="3259203">t</span>&nbsp;<span class="op" id="3259205">[</span><span class="op" id="3259206">]</span><span class="builtintype" id="3259207">byte</span><span class="op" id="3259211">,</span>&nbsp;<span class="ident" id="3259213">ok</span>&nbsp;<span class="builtintype" id="3259216">bool</span><span class="op" id="3259220">)</span>&nbsp;<span class="op" id="3259222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259225">if</span>&nbsp;<span class="builtinfunc" id="3259228">len</span><span class="op" id="3259231">(</span><span class="ident" id="3259232">s</span><span class="op" id="3259233">)</span>&nbsp;<span class="op" id="3259235">&lt;</span>&nbsp;<span class="num" id="3259237">2</span>&nbsp;<span class="op" id="3259239">||</span>&nbsp;<span class="ident" id="3259242">s</span><span class="op" id="3259243">[</span><span class="num" id="3259244">0</span><span class="op" id="3259245">]</span>&nbsp;<span class="op" id="3259247">!=</span>&nbsp;<span class="string" id="3259250">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3259254">||</span>&nbsp;<span class="ident" id="3259257">s</span><span class="op" id="3259258">[</span><span class="builtinfunc" id="3259259">len</span><span class="op" id="3259262">(</span><span class="ident" id="3259263">s</span><span class="op" id="3259264">)</span><span class="op" id="3259265">-</span><span class="num" id="3259266">1</span><span class="op" id="3259267">]</span>&nbsp;<span class="op" id="3259269">!=</span>&nbsp;<span class="string" id="3259272">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3259276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259280">return</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259291">s</span>&nbsp;<span class="op" id="3259293">=</span>&nbsp;<span class="ident" id="3259295">s</span><span class="op" id="3259296">[</span><span class="num" id="3259297">1</span>&nbsp;<span class="op" id="3259299">:</span>&nbsp;<span class="builtinfunc" id="3259301">len</span><span class="op" id="3259304">(</span><span class="ident" id="3259305">s</span><span class="op" id="3259306">)</span><span class="op" id="3259307">-</span><span class="num" id="3259308">1</span><span class="op" id="3259309">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259313">//&nbsp;Check&nbsp;for&nbsp;unusual&nbsp;characters.&nbsp;If&nbsp;there&nbsp;are&nbsp;none,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259366">//&nbsp;then&nbsp;no&nbsp;unquoting&nbsp;is&nbsp;needed,&nbsp;so&nbsp;return&nbsp;a&nbsp;slice&nbsp;of&nbsp;the</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259424">//&nbsp;original&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259444">r</span>&nbsp;<span class="op" id="3259446">:=</span>&nbsp;<span class="num" id="3259449">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259452">for</span>&nbsp;<span class="ident" id="3259456">r</span>&nbsp;<span class="op" id="3259458">&lt;</span>&nbsp;<span class="builtinfunc" id="3259460">len</span><span class="op" id="3259463">(</span><span class="ident" id="3259464">s</span><span class="op" id="3259465">)</span>&nbsp;<span class="op" id="3259467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259471">c</span>&nbsp;<span class="op" id="3259473">:=</span>&nbsp;<span class="ident" id="3259476">s</span><span class="op" id="3259477">[</span><span class="ident" id="3259478">r</span><span class="op" id="3259479">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259483">if</span>&nbsp;<span class="ident" id="3259486">c</span>&nbsp;<span class="op" id="3259488">==</span>&nbsp;<span class="string" id="3259491">&#39;\\&#39;</span>&nbsp;<span class="op" id="3259496">||</span>&nbsp;<span class="ident" id="3259499">c</span>&nbsp;<span class="op" id="3259501">==</span>&nbsp;<span class="string" id="3259504">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3259508">||</span>&nbsp;<span class="ident" id="3259511">c</span>&nbsp;<span class="op" id="3259513">&lt;</span>&nbsp;<span class="string" id="3259515">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3259519">{</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259524">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259536">if</span>&nbsp;<span class="ident" id="3259539">c</span>&nbsp;<span class="op" id="3259541">&lt;</span>&nbsp;<span class="ident" id="3259543">utf8</span><span class="op" id="3259547">.</span><span class="ident" id="3259548">RuneSelf</span>&nbsp;<span class="op" id="3259557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259562">r</span><span class="op" id="3259563">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259569">continue</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259584">rr</span><span class="op" id="3259586">,</span>&nbsp;<span class="ident" id="3259588">size</span>&nbsp;<span class="op" id="3259593">:=</span>&nbsp;<span class="ident" id="3259596">utf8</span><span class="op" id="3259600">.</span><span class="ident" id="3259601">DecodeRune</span><span class="op" id="3259611">(</span><span class="ident" id="3259612">s</span><span class="op" id="3259613">[</span><span class="ident" id="3259614">r</span><span class="op" id="3259615">:</span><span class="op" id="3259616">]</span><span class="op" id="3259617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259621">if</span>&nbsp;<span class="ident" id="3259624">rr</span>&nbsp;<span class="op" id="3259627">==</span>&nbsp;<span class="ident" id="3259630">utf8</span><span class="op" id="3259634">.</span><span class="ident" id="3259635">RuneError</span>&nbsp;<span class="op" id="3259645">&amp;&amp;</span>&nbsp;<span class="ident" id="3259648">size</span>&nbsp;<span class="op" id="3259653">==</span>&nbsp;<span class="num" id="3259656">1</span>&nbsp;<span class="op" id="3259658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259663">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259671">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259675">r</span>&nbsp;<span class="op" id="3259677">+=</span>&nbsp;<span class="ident" id="3259680">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259689">if</span>&nbsp;<span class="ident" id="3259692">r</span>&nbsp;<span class="op" id="3259694">==</span>&nbsp;<span class="builtinfunc" id="3259697">len</span><span class="op" id="3259700">(</span><span class="ident" id="3259701">s</span><span class="op" id="3259702">)</span>&nbsp;<span class="op" id="3259704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259708">return</span>&nbsp;<span class="ident" id="3259715">s</span><span class="op" id="3259716">,</span>&nbsp;<span class="builtintype" id="3259718">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259724">}</span><br>
<span class="lineno">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259728">b</span>&nbsp;<span class="op" id="3259730">:=</span>&nbsp;<span class="builtinfunc" id="3259733">make</span><span class="op" id="3259737">(</span><span class="op" id="3259738">[</span><span class="op" id="3259739">]</span><span class="builtintype" id="3259740">byte</span><span class="op" id="3259744">,</span>&nbsp;<span class="builtinfunc" id="3259746">len</span><span class="op" id="3259749">(</span><span class="ident" id="3259750">s</span><span class="op" id="3259751">)</span><span class="op" id="3259752">+</span><span class="num" id="3259753">2</span><span class="op" id="3259754">*</span><span class="ident" id="3259755">utf8</span><span class="op" id="3259759">.</span><span class="ident" id="3259760">UTFMax</span><span class="op" id="3259766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259769">w</span>&nbsp;<span class="op" id="3259771">:=</span>&nbsp;<span class="builtinfunc" id="3259774">copy</span><span class="op" id="3259778">(</span><span class="ident" id="3259779">b</span><span class="op" id="3259780">,</span>&nbsp;<span class="ident" id="3259782">s</span><span class="op" id="3259783">[</span><span class="num" id="3259784">0</span><span class="op" id="3259785">:</span><span class="ident" id="3259786">r</span><span class="op" id="3259787">]</span><span class="op" id="3259788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259791">for</span>&nbsp;<span class="ident" id="3259795">r</span>&nbsp;<span class="op" id="3259797">&lt;</span>&nbsp;<span class="builtinfunc" id="3259799">len</span><span class="op" id="3259802">(</span><span class="ident" id="3259803">s</span><span class="op" id="3259804">)</span>&nbsp;<span class="op" id="3259806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259810">//&nbsp;Out&nbsp;of&nbsp;room?&nbsp;&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;s&nbsp;is&nbsp;full&nbsp;of</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259861">//&nbsp;malformed&nbsp;UTF-8&nbsp;and&nbsp;we&#39;re&nbsp;replacing&nbsp;each</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259907">//&nbsp;byte&nbsp;with&nbsp;RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259933">if</span>&nbsp;<span class="ident" id="3259936">w</span>&nbsp;<span class="op" id="3259938">&gt;=</span>&nbsp;<span class="builtinfunc" id="3259941">len</span><span class="op" id="3259944">(</span><span class="ident" id="3259945">b</span><span class="op" id="3259946">)</span><span class="op" id="3259947">-</span><span class="num" id="3259948">2</span><span class="op" id="3259949">*</span><span class="ident" id="3259950">utf8</span><span class="op" id="3259954">.</span><span class="ident" id="3259955">UTFMax</span>&nbsp;<span class="op" id="3259962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259967">nb</span>&nbsp;<span class="op" id="3259970">:=</span>&nbsp;<span class="builtinfunc" id="3259973">make</span><span class="op" id="3259977">(</span><span class="op" id="3259978">[</span><span class="op" id="3259979">]</span><span class="builtintype" id="3259980">byte</span><span class="op" id="3259984">,</span>&nbsp;<span class="op" id="3259986">(</span><span class="builtinfunc" id="3259987">len</span><span class="op" id="3259990">(</span><span class="ident" id="3259991">b</span><span class="op" id="3259992">)</span><span class="op" id="3259993">+</span><span class="ident" id="3259994">utf8</span><span class="op" id="3259998">.</span><span class="ident" id="3259999">UTFMax</span><span class="op" id="3260005">)</span><span class="op" id="3260006">*</span><span class="num" id="3260007">2</span><span class="op" id="3260008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3260013">copy</span><span class="op" id="3260017">(</span><span class="ident" id="3260018">nb</span><span class="op" id="3260020">,</span>&nbsp;<span class="ident" id="3260022">b</span><span class="op" id="3260023">[</span><span class="num" id="3260024">0</span><span class="op" id="3260025">:</span><span class="ident" id="3260026">w</span><span class="op" id="3260027">]</span><span class="op" id="3260028">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260033">b</span>&nbsp;<span class="op" id="3260035">=</span>&nbsp;<span class="ident" id="3260037">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260046">switch</span>&nbsp;<span class="ident" id="3260053">c</span>&nbsp;<span class="op" id="3260055">:=</span>&nbsp;<span class="ident" id="3260058">s</span><span class="op" id="3260059">[</span><span class="ident" id="3260060">r</span><span class="op" id="3260061">]</span><span class="op" id="3260062">;</span>&nbsp;<span class="op" id="3260064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260068">case</span>&nbsp;<span class="ident" id="3260073">c</span>&nbsp;<span class="op" id="3260075">==</span>&nbsp;<span class="string" id="3260078">&#39;\\&#39;</span><span class="op" id="3260082">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260087">r</span><span class="op" id="3260088">++</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260094">if</span>&nbsp;<span class="ident" id="3260097">r</span>&nbsp;<span class="op" id="3260099">&gt;=</span>&nbsp;<span class="builtinfunc" id="3260102">len</span><span class="op" id="3260105">(</span><span class="ident" id="3260106">s</span><span class="op" id="3260107">)</span>&nbsp;<span class="op" id="3260109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260115">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260130">switch</span>&nbsp;<span class="ident" id="3260137">s</span><span class="op" id="3260138">[</span><span class="ident" id="3260139">r</span><span class="op" id="3260140">]</span>&nbsp;<span class="op" id="3260142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260147">default</span><span class="op" id="3260154">:</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260160">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260170">case</span>&nbsp;<span class="string" id="3260175">&#39;&#34;&#39;</span><span class="op" id="3260178">,</span>&nbsp;<span class="string" id="3260180">&#39;\\&#39;</span><span class="op" id="3260184">,</span>&nbsp;<span class="string" id="3260186">&#39;/&#39;</span><span class="op" id="3260189">,</span>&nbsp;<span class="string" id="3260191">&#39;\&#39;&#39;</span><span class="op" id="3260195">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260201">b</span><span class="op" id="3260202">[</span><span class="ident" id="3260203">w</span><span class="op" id="3260204">]</span>&nbsp;<span class="op" id="3260206">=</span>&nbsp;<span class="ident" id="3260208">s</span><span class="op" id="3260209">[</span><span class="ident" id="3260210">r</span><span class="op" id="3260211">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260217">r</span><span class="op" id="3260218">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260225">w</span><span class="op" id="3260226">++</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260232">case</span>&nbsp;<span class="string" id="3260237">&#39;b&#39;</span><span class="op" id="3260240">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260246">b</span><span class="op" id="3260247">[</span><span class="ident" id="3260248">w</span><span class="op" id="3260249">]</span>&nbsp;<span class="op" id="3260251">=</span>&nbsp;<span class="string" id="3260253">&#39;\b&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260262">r</span><span class="op" id="3260263">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260270">w</span><span class="op" id="3260271">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260277">case</span>&nbsp;<span class="string" id="3260282">&#39;f&#39;</span><span class="op" id="3260285">:</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260291">b</span><span class="op" id="3260292">[</span><span class="ident" id="3260293">w</span><span class="op" id="3260294">]</span>&nbsp;<span class="op" id="3260296">=</span>&nbsp;<span class="string" id="3260298">&#39;\f&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260307">r</span><span class="op" id="3260308">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260315">w</span><span class="op" id="3260316">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260322">case</span>&nbsp;<span class="string" id="3260327">&#39;n&#39;</span><span class="op" id="3260330">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260336">b</span><span class="op" id="3260337">[</span><span class="ident" id="3260338">w</span><span class="op" id="3260339">]</span>&nbsp;<span class="op" id="3260341">=</span>&nbsp;<span class="string" id="3260343">&#39;\n&#39;</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260352">r</span><span class="op" id="3260353">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260360">w</span><span class="op" id="3260361">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260367">case</span>&nbsp;<span class="string" id="3260372">&#39;r&#39;</span><span class="op" id="3260375">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260381">b</span><span class="op" id="3260382">[</span><span class="ident" id="3260383">w</span><span class="op" id="3260384">]</span>&nbsp;<span class="op" id="3260386">=</span>&nbsp;<span class="string" id="3260388">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260397">r</span><span class="op" id="3260398">++</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260405">w</span><span class="op" id="3260406">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260412">case</span>&nbsp;<span class="string" id="3260417">&#39;t&#39;</span><span class="op" id="3260420">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260426">b</span><span class="op" id="3260427">[</span><span class="ident" id="3260428">w</span><span class="op" id="3260429">]</span>&nbsp;<span class="op" id="3260431">=</span>&nbsp;<span class="string" id="3260433">&#39;\t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260442">r</span><span class="op" id="3260443">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260450">w</span><span class="op" id="3260451">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260457">case</span>&nbsp;<span class="string" id="3260462">&#39;u&#39;</span><span class="op" id="3260465">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260471">r</span><span class="op" id="3260472">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260479">rr</span>&nbsp;<span class="op" id="3260482">:=</span>&nbsp;<span class="ident" id="3260485">getu4</span><span class="op" id="3260490">(</span><span class="ident" id="3260491">s</span><span class="op" id="3260492">[</span><span class="ident" id="3260493">r</span><span class="op" id="3260494">:</span><span class="op" id="3260495">]</span><span class="op" id="3260496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260502">if</span>&nbsp;<span class="ident" id="3260505">rr</span>&nbsp;<span class="op" id="3260508">&lt;</span>&nbsp;<span class="num" id="3260510">0</span>&nbsp;<span class="op" id="3260512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260519">return</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260536">r</span>&nbsp;<span class="op" id="3260538">+=</span>&nbsp;<span class="num" id="3260541">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260547">if</span>&nbsp;<span class="ident" id="3260550">utf16</span><span class="op" id="3260555">.</span><span class="ident" id="3260556">IsSurrogate</span><span class="op" id="3260567">(</span><span class="ident" id="3260568">rr</span><span class="op" id="3260570">)</span>&nbsp;<span class="op" id="3260572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260579">rr1</span>&nbsp;<span class="op" id="3260583">:=</span>&nbsp;<span class="ident" id="3260586">getu4</span><span class="op" id="3260591">(</span><span class="ident" id="3260592">s</span><span class="op" id="3260593">[</span><span class="ident" id="3260594">r</span><span class="op" id="3260595">:</span><span class="op" id="3260596">]</span><span class="op" id="3260597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260604">if</span>&nbsp;<span class="ident" id="3260607">dec</span>&nbsp;<span class="op" id="3260611">:=</span>&nbsp;<span class="ident" id="3260614">utf16</span><span class="op" id="3260619">.</span><span class="ident" id="3260620">DecodeRune</span><span class="op" id="3260630">(</span><span class="ident" id="3260631">rr</span><span class="op" id="3260633">,</span>&nbsp;<span class="ident" id="3260635">rr1</span><span class="op" id="3260638">)</span><span class="op" id="3260639">;</span>&nbsp;<span class="ident" id="3260641">dec</span>&nbsp;<span class="op" id="3260645">!=</span>&nbsp;<span class="ident" id="3260648">unicode</span><span class="op" id="3260655">.</span><span class="ident" id="3260656">ReplacementChar</span>&nbsp;<span class="op" id="3260672">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260680">//&nbsp;A&nbsp;valid&nbsp;pair;&nbsp;consume.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260712">r</span>&nbsp;<span class="op" id="3260714">+=</span>&nbsp;<span class="num" id="3260717">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260725">w</span>&nbsp;<span class="op" id="3260727">+=</span>&nbsp;<span class="ident" id="3260730">utf8</span><span class="op" id="3260734">.</span><span class="ident" id="3260735">EncodeRune</span><span class="op" id="3260745">(</span><span class="ident" id="3260746">b</span><span class="op" id="3260747">[</span><span class="ident" id="3260748">w</span><span class="op" id="3260749">:</span><span class="op" id="3260750">]</span><span class="op" id="3260751">,</span>&nbsp;<span class="ident" id="3260753">dec</span><span class="op" id="3260756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260764">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260775">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260782">//&nbsp;Invalid&nbsp;surrogate;&nbsp;fall&nbsp;back&nbsp;to&nbsp;replacement&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260840">rr</span>&nbsp;<span class="op" id="3260843">=</span>&nbsp;<span class="ident" id="3260845">unicode</span><span class="op" id="3260852">.</span><span class="ident" id="3260853">ReplacementChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260879">w</span>&nbsp;<span class="op" id="3260881">+=</span>&nbsp;<span class="ident" id="3260884">utf8</span><span class="op" id="3260888">.</span><span class="ident" id="3260889">EncodeRune</span><span class="op" id="3260899">(</span><span class="ident" id="3260900">b</span><span class="op" id="3260901">[</span><span class="ident" id="3260902">w</span><span class="op" id="3260903">:</span><span class="op" id="3260904">]</span><span class="op" id="3260905">,</span>&nbsp;<span class="ident" id="3260907">rr</span><span class="op" id="3260909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260914">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260919">//&nbsp;Quote,&nbsp;control&nbsp;characters&nbsp;are&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260963">case</span>&nbsp;<span class="ident" id="3260968">c</span>&nbsp;<span class="op" id="3260970">==</span>&nbsp;<span class="string" id="3260973">&#39;&#34;&#39;</span><span class="op" id="3260976">,</span>&nbsp;<span class="ident" id="3260978">c</span>&nbsp;<span class="op" id="3260980">&lt;</span>&nbsp;<span class="string" id="3260982">&#39;&nbsp;&#39;</span><span class="op" id="3260985">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260990">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261000">//&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261011">case</span>&nbsp;<span class="ident" id="3261016">c</span>&nbsp;<span class="op" id="3261018">&lt;</span>&nbsp;<span class="ident" id="3261020">utf8</span><span class="op" id="3261024">.</span><span class="ident" id="3261025">RuneSelf</span><span class="op" id="3261033">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261038">b</span><span class="op" id="3261039">[</span><span class="ident" id="3261040">w</span><span class="op" id="3261041">]</span>&nbsp;<span class="op" id="3261043">=</span>&nbsp;<span class="ident" id="3261045">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261050">r</span><span class="op" id="3261051">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261057">w</span><span class="op" id="3261058">++</span><br>
<span class="lineno">1075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261064">//&nbsp;Coerce&nbsp;to&nbsp;well-formed&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261098">default</span><span class="op" id="3261105">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261110">rr</span><span class="op" id="3261112">,</span>&nbsp;<span class="ident" id="3261114">size</span>&nbsp;<span class="op" id="3261119">:=</span>&nbsp;<span class="ident" id="3261122">utf8</span><span class="op" id="3261126">.</span><span class="ident" id="3261127">DecodeRune</span><span class="op" id="3261137">(</span><span class="ident" id="3261138">s</span><span class="op" id="3261139">[</span><span class="ident" id="3261140">r</span><span class="op" id="3261141">:</span><span class="op" id="3261142">]</span><span class="op" id="3261143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261148">r</span>&nbsp;<span class="op" id="3261150">+=</span>&nbsp;<span class="ident" id="3261153">size</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261161">w</span>&nbsp;<span class="op" id="3261163">+=</span>&nbsp;<span class="ident" id="3261166">utf8</span><span class="op" id="3261170">.</span><span class="ident" id="3261171">EncodeRune</span><span class="op" id="3261181">(</span><span class="ident" id="3261182">b</span><span class="op" id="3261183">[</span><span class="ident" id="3261184">w</span><span class="op" id="3261185">:</span><span class="op" id="3261186">]</span><span class="op" id="3261187">,</span>&nbsp;<span class="ident" id="3261189">rr</span><span class="op" id="3261191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3261198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261201">return</span>&nbsp;<span class="ident" id="3261208">b</span><span class="op" id="3261209">[</span><span class="num" id="3261210">0</span><span class="op" id="3261211">:</span><span class="ident" id="3261212">w</span><span class="op" id="3261213">]</span><span class="op" id="3261214">,</span>&nbsp;<span class="builtintype" id="3261216">true</span><br>
<span class="lineno"></span><span class="op" id="3261221">}</span>
</div>
</body>
</html>
