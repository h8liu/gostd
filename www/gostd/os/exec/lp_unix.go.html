<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html" class="current">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5549486">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5549542">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5549596">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5549647">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5549717">package</span>&nbsp;<span class="ident" id="5549725">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5549731">import</span>&nbsp;<span class="op" id="5549738">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5549741">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5549751">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5549757">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5549767">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5549770">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5549860">var</span>&nbsp;<span class="ident" id="5549864">ErrNotFound</span>&nbsp;<span class="op" id="5549876">=</span>&nbsp;<span class="ident" id="5549878">errors</span><span class="op" id="5549884">.</span><span class="ident" id="5549885">New</span><span class="op" id="5549888">(</span><span class="string" id="5549889">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="5549925">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5549928">func</span>&nbsp;<span class="ident" id="5549933">findExecutable</span><span class="op" id="5549947">(</span><span class="ident" id="5549948">file</span>&nbsp;<span class="builtintype" id="5549953">string</span><span class="op" id="5549959">)</span>&nbsp;<span class="builtintype" id="5549961">error</span>&nbsp;<span class="op" id="5549967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5549970">d</span><span class="op" id="5549971">,</span>&nbsp;<span class="ident" id="5549973">err</span>&nbsp;<span class="op" id="5549977">:=</span>&nbsp;<span class="ident" id="5549980">os</span><span class="op" id="5549982">.</span><span class="ident" id="5549983">Stat</span><span class="op" id="5549987">(</span><span class="ident" id="5549988">file</span><span class="op" id="5549992">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5549995">if</span>&nbsp;<span class="ident" id="5549998">err</span>&nbsp;<span class="op" id="5550002">!=</span>&nbsp;<span class="ident" id="5550005">nil</span>&nbsp;<span class="op" id="5550009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550013">return</span>&nbsp;<span class="ident" id="5550020">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5550025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550028">if</span>&nbsp;<span class="ident" id="5550031">m</span>&nbsp;<span class="op" id="5550033">:=</span>&nbsp;<span class="ident" id="5550036">d</span><span class="op" id="5550037">.</span><span class="ident" id="5550038">Mode</span><span class="op" id="5550042">(</span><span class="op" id="5550043">)</span><span class="op" id="5550044">;</span>&nbsp;<span class="op" id="5550046">!</span><span class="ident" id="5550047">m</span><span class="op" id="5550048">.</span><span class="ident" id="5550049">IsDir</span><span class="op" id="5550054">(</span><span class="op" id="5550055">)</span>&nbsp;<span class="op" id="5550057">&amp;&amp;</span>&nbsp;<span class="ident" id="5550060">m</span><span class="op" id="5550061">&amp;</span><span class="num" id="5550062">0111</span>&nbsp;<span class="op" id="5550067">!=</span>&nbsp;<span class="num" id="5550070">0</span>&nbsp;<span class="op" id="5550072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550076">return</span>&nbsp;<span class="ident" id="5550083">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5550088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550091">return</span>&nbsp;<span class="ident" id="5550098">os</span><span class="op" id="5550100">.</span><span class="ident" id="5550101">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="5550115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5550118">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="5550175">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="5550237">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="5550318">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5550401">func</span>&nbsp;<span class="ident" id="5550406">LookPath</span><span class="op" id="5550414">(</span><span class="ident" id="5550415">file</span>&nbsp;<span class="builtintype" id="5550420">string</span><span class="op" id="5550426">)</span>&nbsp;<span class="op" id="5550428">(</span><span class="builtintype" id="5550429">string</span><span class="op" id="5550435">,</span>&nbsp;<span class="builtintype" id="5550437">error</span><span class="op" id="5550442">)</span>&nbsp;<span class="op" id="5550444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5550447">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5550507">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5550569">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550620">if</span>&nbsp;<span class="ident" id="5550623">strings</span><span class="op" id="5550630">.</span><span class="ident" id="5550631">Contains</span><span class="op" id="5550639">(</span><span class="ident" id="5550640">file</span><span class="op" id="5550644">,</span>&nbsp;<span class="string" id="5550646">&#34;/&#34;</span><span class="op" id="5550649">)</span>&nbsp;<span class="op" id="5550651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5550655">err</span>&nbsp;<span class="op" id="5550659">:=</span>&nbsp;<span class="ident" id="5550662">findExecutable</span><span class="op" id="5550676">(</span><span class="ident" id="5550677">file</span><span class="op" id="5550681">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550685">if</span>&nbsp;<span class="ident" id="5550688">err</span>&nbsp;<span class="op" id="5550692">==</span>&nbsp;<span class="ident" id="5550695">nil</span>&nbsp;<span class="op" id="5550699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550704">return</span>&nbsp;<span class="ident" id="5550711">file</span><span class="op" id="5550715">,</span>&nbsp;<span class="ident" id="5550717">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5550723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550727">return</span>&nbsp;<span class="string" id="5550734">&#34;&#34;</span><span class="op" id="5550736">,</span>&nbsp;<span class="op" id="5550738">&amp;</span><span class="ident" id="5550739">Error</span><span class="op" id="5550744">{</span><span class="ident" id="5550745">file</span><span class="op" id="5550749">,</span>&nbsp;<span class="ident" id="5550751">err</span><span class="op" id="5550754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5550757">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5550760">pathenv</span>&nbsp;<span class="op" id="5550768">:=</span>&nbsp;<span class="ident" id="5550771">os</span><span class="op" id="5550773">.</span><span class="ident" id="5550774">Getenv</span><span class="op" id="5550780">(</span><span class="string" id="5550781">&#34;PATH&#34;</span><span class="op" id="5550787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550790">if</span>&nbsp;<span class="ident" id="5550793">pathenv</span>&nbsp;<span class="op" id="5550801">==</span>&nbsp;<span class="string" id="5550804">&#34;&#34;</span>&nbsp;<span class="op" id="5550807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550811">return</span>&nbsp;<span class="string" id="5550818">&#34;&#34;</span><span class="op" id="5550820">,</span>&nbsp;<span class="op" id="5550822">&amp;</span><span class="ident" id="5550823">Error</span><span class="op" id="5550828">{</span><span class="ident" id="5550829">file</span><span class="op" id="5550833">,</span>&nbsp;<span class="ident" id="5550835">ErrNotFound</span><span class="op" id="5550846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5550849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550852">for</span>&nbsp;<span class="ident" id="5550856">_</span><span class="op" id="5550857">,</span>&nbsp;<span class="ident" id="5550859">dir</span>&nbsp;<span class="op" id="5550863">:=</span>&nbsp;<span class="keyword" id="5550866">range</span>&nbsp;<span class="ident" id="5550872">strings</span><span class="op" id="5550879">.</span><span class="ident" id="5550880">Split</span><span class="op" id="5550885">(</span><span class="ident" id="5550886">pathenv</span><span class="op" id="5550893">,</span>&nbsp;<span class="string" id="5550895">&#34;:&#34;</span><span class="op" id="5550898">)</span>&nbsp;<span class="op" id="5550900">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5550904">if</span>&nbsp;<span class="ident" id="5550907">dir</span>&nbsp;<span class="op" id="5550911">==</span>&nbsp;<span class="string" id="5550914">&#34;&#34;</span>&nbsp;<span class="op" id="5550917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5550922">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5550976">dir</span>&nbsp;<span class="op" id="5550980">=</span>&nbsp;<span class="string" id="5550982">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5550988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5550992">path</span>&nbsp;<span class="op" id="5550997">:=</span>&nbsp;<span class="ident" id="5551000">dir</span>&nbsp;<span class="op" id="5551004">+</span>&nbsp;<span class="string" id="5551006">&#34;/&#34;</span>&nbsp;<span class="op" id="5551010">+</span>&nbsp;<span class="ident" id="5551012">file</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5551019">if</span>&nbsp;<span class="ident" id="5551022">err</span>&nbsp;<span class="op" id="5551026">:=</span>&nbsp;<span class="ident" id="5551029">findExecutable</span><span class="op" id="5551043">(</span><span class="ident" id="5551044">path</span><span class="op" id="5551048">)</span><span class="op" id="5551049">;</span>&nbsp;<span class="ident" id="5551051">err</span>&nbsp;<span class="op" id="5551055">==</span>&nbsp;<span class="ident" id="5551058">nil</span>&nbsp;<span class="op" id="5551062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5551067">return</span>&nbsp;<span class="ident" id="5551074">path</span><span class="op" id="5551078">,</span>&nbsp;<span class="ident" id="5551080">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5551086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5551089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5551092">return</span>&nbsp;<span class="string" id="5551099">&#34;&#34;</span><span class="op" id="5551101">,</span>&nbsp;<span class="op" id="5551103">&amp;</span><span class="ident" id="5551104">Error</span><span class="op" id="5551109">{</span><span class="ident" id="5551110">file</span><span class="op" id="5551114">,</span>&nbsp;<span class="ident" id="5551116">ErrNotFound</span><span class="op" id="5551127">}</span><br>
<span class="lineno">60</span><span class="op" id="5551129">}</span>
</div>
</body>
</html>
