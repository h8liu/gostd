<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5615390">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5615445">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5615499">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5615550">//&nbsp;Support&nbsp;for&nbsp;test&nbsp;coverage.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5615581">package</span>&nbsp;<span class="ident" id="5615589">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5615598">import</span>&nbsp;<span class="op" id="5615605">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5615608">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5615615">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5615621">&#34;sync/atomic&#34;</span><br>
<span class="lineno"></span><span class="op" id="5615635">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5615638">//&nbsp;CoverBlock&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;for&nbsp;a&nbsp;single&nbsp;basic&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="5615704">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="5615783">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="5615848">type</span>&nbsp;<span class="ident" id="5615853">CoverBlock</span>&nbsp;<span class="keyword" id="5615864">struct</span>&nbsp;<span class="op" id="5615871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5615874">Line0</span>&nbsp;<span class="builtintype" id="5615880">uint32</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5615888">Col0</span>&nbsp;&nbsp;<span class="builtintype" id="5615894">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5615902">Line1</span>&nbsp;<span class="builtintype" id="5615908">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5615916">Col1</span>&nbsp;&nbsp;<span class="builtintype" id="5615922">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5615930">Stmts</span>&nbsp;<span class="builtintype" id="5615936">uint16</span><br>
<span class="lineno"></span><span class="op" id="5615943">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5615946">var</span>&nbsp;<span class="ident" id="5615950">cover</span>&nbsp;<span class="ident" id="5615956">Cover</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5615963">//&nbsp;Cover&nbsp;records&nbsp;information&nbsp;about&nbsp;test&nbsp;coverage&nbsp;checking.</span><br>
<span class="lineno"></span><span class="comment" id="5616022">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno">30</span><span class="comment" id="5616101">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="5616166">type</span>&nbsp;<span class="ident" id="5616171">Cover</span>&nbsp;<span class="keyword" id="5616177">struct</span>&nbsp;<span class="op" id="5616184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5616187">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5616203">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5616211">Counters</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616227">map</span><span class="op" id="5616230">[</span><span class="builtintype" id="5616231">string</span><span class="op" id="5616237">]</span><span class="op" id="5616238">[</span><span class="op" id="5616239">]</span><span class="builtintype" id="5616240">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5616248">Blocks</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616264">map</span><span class="op" id="5616267">[</span><span class="builtintype" id="5616268">string</span><span class="op" id="5616274">]</span><span class="op" id="5616275">[</span><span class="op" id="5616276">]</span><span class="ident" id="5616277">CoverBlock</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5616289">CoveredPackages</span>&nbsp;<span class="builtintype" id="5616305">string</span><br>
<span class="lineno"></span><span class="op" id="5616312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5616315">//&nbsp;Coverage&nbsp;reports&nbsp;the&nbsp;current&nbsp;code&nbsp;coverage&nbsp;as&nbsp;a&nbsp;fraction&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;1].</span><br>
<span class="lineno"></span><span class="comment" id="5616396">//&nbsp;If&nbsp;coverage&nbsp;is&nbsp;not&nbsp;enabled,&nbsp;Coverage&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="comment" id="5616447">//</span><br>
<span class="lineno"></span><span class="comment" id="5616450">//&nbsp;When&nbsp;running&nbsp;a&nbsp;large&nbsp;set&nbsp;of&nbsp;sequential&nbsp;test&nbsp;cases,&nbsp;checking&nbsp;Coverage&nbsp;after&nbsp;each&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5616537">//&nbsp;can&nbsp;be&nbsp;useful&nbsp;for&nbsp;identifying&nbsp;which&nbsp;test&nbsp;cases&nbsp;exercise&nbsp;new&nbsp;code&nbsp;paths.</span><br>
<span class="lineno"></span><span class="comment" id="5616612">//&nbsp;It&nbsp;is&nbsp;not&nbsp;a&nbsp;replacement&nbsp;for&nbsp;the&nbsp;reports&nbsp;generated&nbsp;by&nbsp;&#39;go&nbsp;test&nbsp;-cover&#39;&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5616689">//&nbsp;&#39;go&nbsp;tool&nbsp;cover&#39;.</span><br>
<span class="lineno">45</span><span class="keyword" id="5616709">func</span>&nbsp;<span class="ident" id="5616714">Coverage</span><span class="op" id="5616722">(</span><span class="op" id="5616723">)</span>&nbsp;<span class="builtintype" id="5616725">float64</span>&nbsp;<span class="op" id="5616733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5616736">var</span>&nbsp;<span class="ident" id="5616740">n</span><span class="op" id="5616741">,</span>&nbsp;<span class="ident" id="5616743">d</span>&nbsp;<span class="ident" id="5616745">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5616752">for</span>&nbsp;<span class="ident" id="5616756">_</span><span class="op" id="5616757">,</span>&nbsp;<span class="ident" id="5616759">counters</span>&nbsp;<span class="op" id="5616768">:=</span>&nbsp;<span class="keyword" id="5616771">range</span>&nbsp;<span class="ident" id="5616777">cover</span><span class="op" id="5616782">.</span><span class="ident" id="5616783">Counters</span>&nbsp;<span class="op" id="5616792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5616796">for</span>&nbsp;<span class="ident" id="5616800">i</span>&nbsp;<span class="op" id="5616802">:=</span>&nbsp;<span class="keyword" id="5616805">range</span>&nbsp;<span class="ident" id="5616811">counters</span>&nbsp;<span class="op" id="5616820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5616825">if</span>&nbsp;<span class="ident" id="5616828">atomic</span><span class="op" id="5616834">.</span><span class="ident" id="5616835">LoadUint32</span><span class="op" id="5616845">(</span><span class="op" id="5616846">&amp;</span><span class="ident" id="5616847">counters</span><span class="op" id="5616855">[</span><span class="ident" id="5616856">i</span><span class="op" id="5616857">]</span><span class="op" id="5616858">)</span>&nbsp;<span class="op" id="5616860">&gt;</span>&nbsp;<span class="num" id="5616862">0</span>&nbsp;<span class="op" id="5616864">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5616870">n</span><span class="op" id="5616871">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5616877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5616882">d</span><span class="op" id="5616883">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5616888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5616891">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5616894">if</span>&nbsp;<span class="ident" id="5616897">d</span>&nbsp;<span class="op" id="5616899">==</span>&nbsp;<span class="num" id="5616902">0</span>&nbsp;<span class="op" id="5616904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5616908">return</span>&nbsp;<span class="num" id="5616915">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5616918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5616921">return</span>&nbsp;<span class="builtintype" id="5616928">float64</span><span class="op" id="5616935">(</span><span class="ident" id="5616936">n</span><span class="op" id="5616937">)</span>&nbsp;<span class="op" id="5616939">/</span>&nbsp;<span class="builtintype" id="5616941">float64</span><span class="op" id="5616948">(</span><span class="ident" id="5616949">d</span><span class="op" id="5616950">)</span><br>
<span class="lineno"></span><span class="op" id="5616952">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="5616955">//&nbsp;RegisterCover&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;accumulators&nbsp;for&nbsp;the&nbsp;tests.</span><br>
<span class="lineno"></span><span class="comment" id="5617026">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="5617107">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="5617172">func</span>&nbsp;<span class="ident" id="5617177">RegisterCover</span><span class="op" id="5617190">(</span><span class="ident" id="5617191">c</span>&nbsp;<span class="ident" id="5617193">Cover</span><span class="op" id="5617198">)</span>&nbsp;<span class="op" id="5617200">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5617203">cover</span>&nbsp;<span class="op" id="5617209">=</span>&nbsp;<span class="ident" id="5617211">c</span><br>
<span class="lineno"></span><span class="op" id="5617213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5617216">//&nbsp;mustBeNil&nbsp;checks&nbsp;the&nbsp;error&nbsp;and,&nbsp;if&nbsp;present,&nbsp;reports&nbsp;it&nbsp;and&nbsp;exits.</span><br>
<span class="lineno"></span><span class="keyword" id="5617285">func</span>&nbsp;<span class="ident" id="5617290">mustBeNil</span><span class="op" id="5617299">(</span><span class="ident" id="5617300">err</span>&nbsp;<span class="builtintype" id="5617304">error</span><span class="op" id="5617309">)</span>&nbsp;<span class="op" id="5617311">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5617314">if</span>&nbsp;<span class="ident" id="5617317">err</span>&nbsp;<span class="op" id="5617321">!=</span>&nbsp;<span class="ident" id="5617324">nil</span>&nbsp;<span class="op" id="5617328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5617332">fmt</span><span class="op" id="5617335">.</span><span class="ident" id="5617336">Fprintf</span><span class="op" id="5617343">(</span><span class="ident" id="5617344">os</span><span class="op" id="5617346">.</span><span class="ident" id="5617347">Stderr</span><span class="op" id="5617353">,</span>&nbsp;<span class="string" id="5617355">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="5617370">,</span>&nbsp;<span class="ident" id="5617372">err</span><span class="op" id="5617375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5617379">os</span><span class="op" id="5617381">.</span><span class="ident" id="5617382">Exit</span><span class="op" id="5617386">(</span><span class="num" id="5617387">2</span><span class="op" id="5617388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5617391">}</span><br>
<span class="lineno"></span><span class="op" id="5617393">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="5617396">//&nbsp;coverReport&nbsp;reports&nbsp;the&nbsp;coverage&nbsp;percentage&nbsp;and&nbsp;writes&nbsp;a&nbsp;coverage&nbsp;profile&nbsp;if&nbsp;requested.</span><br>
<span class="lineno"></span><span class="keyword" id="5617487">func</span>&nbsp;<span class="ident" id="5617492">coverReport</span><span class="op" id="5617503">(</span><span class="op" id="5617504">)</span>&nbsp;<span class="op" id="5617506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5617509">var</span>&nbsp;<span class="ident" id="5617513">f</span>&nbsp;<span class="op" id="5617515">*</span><span class="ident" id="5617516">os</span><span class="op" id="5617518">.</span><span class="ident" id="5617519">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5617525">var</span>&nbsp;<span class="ident" id="5617529">err</span>&nbsp;<span class="builtintype" id="5617533">error</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5617540">if</span>&nbsp;<span class="op" id="5617543">*</span><span class="ident" id="5617544">coverProfile</span>&nbsp;<span class="op" id="5617557">!=</span>&nbsp;<span class="string" id="5617560">&#34;&#34;</span>&nbsp;<span class="op" id="5617563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5617567">f</span><span class="op" id="5617568">,</span>&nbsp;<span class="ident" id="5617570">err</span>&nbsp;<span class="op" id="5617574">=</span>&nbsp;<span class="ident" id="5617576">os</span><span class="op" id="5617578">.</span><span class="ident" id="5617579">Create</span><span class="op" id="5617585">(</span><span class="ident" id="5617586">toOutputDir</span><span class="op" id="5617597">(</span><span class="op" id="5617598">*</span><span class="ident" id="5617599">coverProfile</span><span class="op" id="5617611">)</span><span class="op" id="5617612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5617616">mustBeNil</span><span class="op" id="5617625">(</span><span class="ident" id="5617626">err</span><span class="op" id="5617629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5617633">fmt</span><span class="op" id="5617636">.</span><span class="ident" id="5617637">Fprintf</span><span class="op" id="5617644">(</span><span class="ident" id="5617645">f</span><span class="op" id="5617646">,</span>&nbsp;<span class="string" id="5617648">&#34;mode:&nbsp;%s\n&#34;</span><span class="op" id="5617660">,</span>&nbsp;<span class="ident" id="5617662">cover</span><span class="op" id="5617667">.</span><span class="ident" id="5617668">Mode</span><span class="op" id="5617672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5617676">defer</span>&nbsp;<span class="keyword" id="5617682">func</span><span class="op" id="5617686">(</span><span class="op" id="5617687">)</span>&nbsp;<span class="op" id="5617689">{</span>&nbsp;<span class="ident" id="5617691">mustBeNil</span><span class="op" id="5617700">(</span><span class="ident" id="5617701">f</span><span class="op" id="5617702">.</span><span class="ident" id="5617703">Close</span><span class="op" id="5617708">(</span><span class="op" id="5617709">)</span><span class="op" id="5617710">)</span>&nbsp;<span class="op" id="5617712">}</span><span class="op" id="5617713">(</span><span class="op" id="5617714">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5617717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5617721">var</span>&nbsp;<span class="ident" id="5617725">active</span><span class="op" id="5617731">,</span>&nbsp;<span class="ident" id="5617733">total</span>&nbsp;<span class="ident" id="5617739">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5617746">var</span>&nbsp;<span class="ident" id="5617750">count</span>&nbsp;<span class="builtintype" id="5617756">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5617764">for</span>&nbsp;<span class="ident" id="5617768">name</span><span class="op" id="5617772">,</span>&nbsp;<span class="ident" id="5617774">counts</span>&nbsp;<span class="op" id="5617781">:=</span>&nbsp;<span class="keyword" id="5617784">range</span>&nbsp;<span class="ident" id="5617790">cover</span><span class="op" id="5617795">.</span><span class="ident" id="5617796">Counters</span>&nbsp;<span class="op" id="5617805">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5617809">blocks</span>&nbsp;<span class="op" id="5617816">:=</span>&nbsp;<span class="ident" id="5617819">cover</span><span class="op" id="5617824">.</span><span class="ident" id="5617825">Blocks</span><span class="op" id="5617831">[</span><span class="ident" id="5617832">name</span><span class="op" id="5617836">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5617840">for</span>&nbsp;<span class="ident" id="5617844">i</span>&nbsp;<span class="op" id="5617846">:=</span>&nbsp;<span class="keyword" id="5617849">range</span>&nbsp;<span class="ident" id="5617855">counts</span>&nbsp;<span class="op" id="5617862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5617867">stmts</span>&nbsp;<span class="op" id="5617873">:=</span>&nbsp;<span class="ident" id="5617876">int64</span><span class="op" id="5617881">(</span><span class="ident" id="5617882">blocks</span><span class="op" id="5617888">[</span><span class="ident" id="5617889">i</span><span class="op" id="5617890">]</span><span class="op" id="5617891">.</span><span class="ident" id="5617892">Stmts</span><span class="op" id="5617897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5617902">total</span>&nbsp;<span class="op" id="5617908">+=</span>&nbsp;<span class="ident" id="5617911">stmts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5617920">count</span>&nbsp;<span class="op" id="5617926">=</span>&nbsp;<span class="ident" id="5617928">atomic</span><span class="op" id="5617934">.</span><span class="ident" id="5617935">LoadUint32</span><span class="op" id="5617945">(</span><span class="op" id="5617946">&amp;</span><span class="ident" id="5617947">counts</span><span class="op" id="5617953">[</span><span class="ident" id="5617954">i</span><span class="op" id="5617955">]</span><span class="op" id="5617956">)</span>&nbsp;<span class="comment" id="5617958">//&nbsp;For&nbsp;-mode=atomic.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5617982">if</span>&nbsp;<span class="ident" id="5617985">count</span>&nbsp;<span class="op" id="5617991">&gt;</span>&nbsp;<span class="num" id="5617993">0</span>&nbsp;<span class="op" id="5617995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5618001">active</span>&nbsp;<span class="op" id="5618008">+=</span>&nbsp;<span class="ident" id="5618011">stmts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5618020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5618025">if</span>&nbsp;<span class="ident" id="5618028">f</span>&nbsp;<span class="op" id="5618030">!=</span>&nbsp;<span class="ident" id="5618033">nil</span>&nbsp;<span class="op" id="5618037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5618043">_</span><span class="op" id="5618044">,</span>&nbsp;<span class="ident" id="5618046">err</span>&nbsp;<span class="op" id="5618050">:=</span>&nbsp;<span class="ident" id="5618053">fmt</span><span class="op" id="5618056">.</span><span class="ident" id="5618057">Fprintf</span><span class="op" id="5618064">(</span><span class="ident" id="5618065">f</span><span class="op" id="5618066">,</span>&nbsp;<span class="string" id="5618068">&#34;%s:%d.%d,%d.%d&nbsp;%d&nbsp;%d\n&#34;</span><span class="op" id="5618092">,</span>&nbsp;<span class="ident" id="5618094">name</span><span class="op" id="5618098">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5618105">blocks</span><span class="op" id="5618111">[</span><span class="ident" id="5618112">i</span><span class="op" id="5618113">]</span><span class="op" id="5618114">.</span><span class="ident" id="5618115">Line0</span><span class="op" id="5618120">,</span>&nbsp;<span class="ident" id="5618122">blocks</span><span class="op" id="5618128">[</span><span class="ident" id="5618129">i</span><span class="op" id="5618130">]</span><span class="op" id="5618131">.</span><span class="ident" id="5618132">Col0</span><span class="op" id="5618136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5618143">blocks</span><span class="op" id="5618149">[</span><span class="ident" id="5618150">i</span><span class="op" id="5618151">]</span><span class="op" id="5618152">.</span><span class="ident" id="5618153">Line1</span><span class="op" id="5618158">,</span>&nbsp;<span class="ident" id="5618160">blocks</span><span class="op" id="5618166">[</span><span class="ident" id="5618167">i</span><span class="op" id="5618168">]</span><span class="op" id="5618169">.</span><span class="ident" id="5618170">Col1</span><span class="op" id="5618174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5618181">stmts</span><span class="op" id="5618186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5618193">count</span><span class="op" id="5618198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5618204">mustBeNil</span><span class="op" id="5618213">(</span><span class="ident" id="5618214">err</span><span class="op" id="5618217">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5618222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5618226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5618229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5618232">if</span>&nbsp;<span class="ident" id="5618235">total</span>&nbsp;<span class="op" id="5618241">==</span>&nbsp;<span class="num" id="5618244">0</span>&nbsp;<span class="op" id="5618246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5618250">total</span>&nbsp;<span class="op" id="5618256">=</span>&nbsp;<span class="num" id="5618258">1</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5618261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5618264">fmt</span><span class="op" id="5618267">.</span><span class="ident" id="5618268">Printf</span><span class="op" id="5618274">(</span><span class="string" id="5618275">&#34;coverage:&nbsp;%.1f%%&nbsp;of&nbsp;statements%s\n&#34;</span><span class="op" id="5618311">,</span>&nbsp;<span class="num" id="5618313">100</span><span class="op" id="5618316">*</span><span class="builtintype" id="5618317">float64</span><span class="op" id="5618324">(</span><span class="ident" id="5618325">active</span><span class="op" id="5618331">)</span><span class="op" id="5618332">/</span><span class="builtintype" id="5618333">float64</span><span class="op" id="5618340">(</span><span class="ident" id="5618341">total</span><span class="op" id="5618346">)</span><span class="op" id="5618347">,</span>&nbsp;<span class="ident" id="5618349">cover</span><span class="op" id="5618354">.</span><span class="ident" id="5618355">CoveredPackages</span><span class="op" id="5618370">)</span><br>
<span class="lineno"></span><span class="op" id="5618372">}</span>
</div>
</body>
</html>
