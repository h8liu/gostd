<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html" class="current">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8298491">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8298546">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8298600">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8298651">package</span>&nbsp;<span class="ident" id="8298659">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8298666">import</span>&nbsp;<span class="op" id="8298673">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8298676">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8298686">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8298689">func</span>&nbsp;<span class="ident" id="8298694">delta</span><span class="op" id="8298699">(</span><span class="ident" id="8298700">x</span><span class="op" id="8298701">,</span>&nbsp;<span class="ident" id="8298703">y</span>&nbsp;<span class="builtintype" id="8298705">uint8</span><span class="op" id="8298710">)</span>&nbsp;<span class="builtintype" id="8298712">uint8</span>&nbsp;<span class="op" id="8298718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8298721">if</span>&nbsp;<span class="ident" id="8298724">x</span>&nbsp;<span class="op" id="8298726">&gt;=</span>&nbsp;<span class="ident" id="8298729">y</span>&nbsp;<span class="op" id="8298731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8298735">return</span>&nbsp;<span class="ident" id="8298742">x</span>&nbsp;<span class="op" id="8298744">-</span>&nbsp;<span class="ident" id="8298746">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8298749">}</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8298752">return</span>&nbsp;<span class="ident" id="8298759">y</span>&nbsp;<span class="op" id="8298761">-</span>&nbsp;<span class="ident" id="8298763">x</span><br>
<span class="lineno"></span><span class="op" id="8298765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8298768">//&nbsp;Test&nbsp;that&nbsp;a&nbsp;subset&nbsp;of&nbsp;RGB&nbsp;space&nbsp;can&nbsp;be&nbsp;converted&nbsp;to&nbsp;YCbCr&nbsp;and&nbsp;back&nbsp;to&nbsp;within</span><br>
<span class="lineno"></span><span class="comment" id="8298848">//&nbsp;1/256&nbsp;tolerance.</span><br>
<span class="lineno">20</span><span class="keyword" id="8298868">func</span>&nbsp;<span class="ident" id="8298873">TestRoundtrip</span><span class="op" id="8298886">(</span><span class="ident" id="8298887">t</span>&nbsp;<span class="op" id="8298889">*</span><span class="ident" id="8298890">testing</span><span class="op" id="8298897">.</span><span class="ident" id="8298898">T</span><span class="op" id="8298899">)</span>&nbsp;<span class="op" id="8298901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8298904">for</span>&nbsp;<span class="ident" id="8298908">r</span>&nbsp;<span class="op" id="8298910">:=</span>&nbsp;<span class="num" id="8298913">0</span><span class="op" id="8298914">;</span>&nbsp;<span class="ident" id="8298916">r</span>&nbsp;<span class="op" id="8298918">&lt;</span>&nbsp;<span class="num" id="8298920">255</span><span class="op" id="8298923">;</span>&nbsp;<span class="ident" id="8298925">r</span>&nbsp;<span class="op" id="8298927">+=</span>&nbsp;<span class="num" id="8298930">7</span>&nbsp;<span class="op" id="8298932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8298936">for</span>&nbsp;<span class="ident" id="8298940">g</span>&nbsp;<span class="op" id="8298942">:=</span>&nbsp;<span class="num" id="8298945">0</span><span class="op" id="8298946">;</span>&nbsp;<span class="ident" id="8298948">g</span>&nbsp;<span class="op" id="8298950">&lt;</span>&nbsp;<span class="num" id="8298952">255</span><span class="op" id="8298955">;</span>&nbsp;<span class="ident" id="8298957">g</span>&nbsp;<span class="op" id="8298959">+=</span>&nbsp;<span class="num" id="8298962">5</span>&nbsp;<span class="op" id="8298964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8298969">for</span>&nbsp;<span class="ident" id="8298973">b</span>&nbsp;<span class="op" id="8298975">:=</span>&nbsp;<span class="num" id="8298978">0</span><span class="op" id="8298979">;</span>&nbsp;<span class="ident" id="8298981">b</span>&nbsp;<span class="op" id="8298983">&lt;</span>&nbsp;<span class="num" id="8298985">255</span><span class="op" id="8298988">;</span>&nbsp;<span class="ident" id="8298990">b</span>&nbsp;<span class="op" id="8298992">+=</span>&nbsp;<span class="num" id="8298995">3</span>&nbsp;<span class="op" id="8298997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8299003">r0</span><span class="op" id="8299005">,</span>&nbsp;<span class="ident" id="8299007">g0</span><span class="op" id="8299009">,</span>&nbsp;<span class="ident" id="8299011">b0</span>&nbsp;<span class="op" id="8299014">:=</span>&nbsp;<span class="builtintype" id="8299017">uint8</span><span class="op" id="8299022">(</span><span class="ident" id="8299023">r</span><span class="op" id="8299024">)</span><span class="op" id="8299025">,</span>&nbsp;<span class="builtintype" id="8299027">uint8</span><span class="op" id="8299032">(</span><span class="ident" id="8299033">g</span><span class="op" id="8299034">)</span><span class="op" id="8299035">,</span>&nbsp;<span class="builtintype" id="8299037">uint8</span><span class="op" id="8299042">(</span><span class="ident" id="8299043">b</span><span class="op" id="8299044">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8299050">y</span><span class="op" id="8299051">,</span>&nbsp;<span class="ident" id="8299053">cb</span><span class="op" id="8299055">,</span>&nbsp;<span class="ident" id="8299057">cr</span>&nbsp;<span class="op" id="8299060">:=</span>&nbsp;<span class="ident" id="8299063">RGBToYCbCr</span><span class="op" id="8299073">(</span><span class="ident" id="8299074">r0</span><span class="op" id="8299076">,</span>&nbsp;<span class="ident" id="8299078">g0</span><span class="op" id="8299080">,</span>&nbsp;<span class="ident" id="8299082">b0</span><span class="op" id="8299084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8299090">r1</span><span class="op" id="8299092">,</span>&nbsp;<span class="ident" id="8299094">g1</span><span class="op" id="8299096">,</span>&nbsp;<span class="ident" id="8299098">b1</span>&nbsp;<span class="op" id="8299101">:=</span>&nbsp;<span class="ident" id="8299104">YCbCrToRGB</span><span class="op" id="8299114">(</span><span class="ident" id="8299115">y</span><span class="op" id="8299116">,</span>&nbsp;<span class="ident" id="8299118">cb</span><span class="op" id="8299120">,</span>&nbsp;<span class="ident" id="8299122">cr</span><span class="op" id="8299124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8299130">if</span>&nbsp;<span class="ident" id="8299133">delta</span><span class="op" id="8299138">(</span><span class="ident" id="8299139">r0</span><span class="op" id="8299141">,</span>&nbsp;<span class="ident" id="8299143">r1</span><span class="op" id="8299145">)</span>&nbsp;<span class="op" id="8299147">&gt;</span>&nbsp;<span class="num" id="8299149">1</span>&nbsp;<span class="op" id="8299151">||</span>&nbsp;<span class="ident" id="8299154">delta</span><span class="op" id="8299159">(</span><span class="ident" id="8299160">g0</span><span class="op" id="8299162">,</span>&nbsp;<span class="ident" id="8299164">g1</span><span class="op" id="8299166">)</span>&nbsp;<span class="op" id="8299168">&gt;</span>&nbsp;<span class="num" id="8299170">1</span>&nbsp;<span class="op" id="8299172">||</span>&nbsp;<span class="ident" id="8299175">delta</span><span class="op" id="8299180">(</span><span class="ident" id="8299181">b0</span><span class="op" id="8299183">,</span>&nbsp;<span class="ident" id="8299185">b1</span><span class="op" id="8299187">)</span>&nbsp;<span class="op" id="8299189">&gt;</span>&nbsp;<span class="num" id="8299191">1</span>&nbsp;<span class="op" id="8299193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8299200">t</span><span class="op" id="8299201">.</span><span class="ident" id="8299202">Fatalf</span><span class="op" id="8299208">(</span><span class="string" id="8299209">&#34;r0,&nbsp;g0,&nbsp;b0&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d&nbsp;&nbsp;&nbsp;r1,&nbsp;g1,&nbsp;b1&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d&#34;</span><span class="op" id="8299260">,</span>&nbsp;<span class="ident" id="8299262">r0</span><span class="op" id="8299264">,</span>&nbsp;<span class="ident" id="8299266">g0</span><span class="op" id="8299268">,</span>&nbsp;<span class="ident" id="8299270">b0</span><span class="op" id="8299272">,</span>&nbsp;<span class="ident" id="8299274">r1</span><span class="op" id="8299276">,</span>&nbsp;<span class="ident" id="8299278">g1</span><span class="op" id="8299280">,</span>&nbsp;<span class="ident" id="8299282">b1</span><span class="op" id="8299284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8299290">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8299295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8299299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8299302">}</span><br>
<span class="lineno"></span><span class="op" id="8299304">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
