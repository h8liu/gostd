<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html" class="current">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4708150">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4708205">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4708259">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4708310">package</span>&nbsp;<span class="ident" id="4708318">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4708323">import</span>&nbsp;<span class="op" id="4708330">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4708333">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4708345">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4708353">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="4708363">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4708366">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="4708443">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="4708528">func</span>&nbsp;<span class="ident" id="4708533">SortImports</span><span class="op" id="4708544">(</span><span class="ident" id="4708545">fset</span>&nbsp;<span class="op" id="4708550">*</span><span class="ident" id="4708551">token</span><span class="op" id="4708556">.</span><span class="ident" id="4708557">FileSet</span><span class="op" id="4708564">,</span>&nbsp;<span class="ident" id="4708566">f</span>&nbsp;<span class="op" id="4708568">*</span><span class="ident" id="4708569">File</span><span class="op" id="4708573">)</span>&nbsp;<span class="op" id="4708575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708578">for</span>&nbsp;<span class="ident" id="4708582">_</span><span class="op" id="4708583">,</span>&nbsp;<span class="ident" id="4708585">d</span>&nbsp;<span class="op" id="4708587">:=</span>&nbsp;<span class="keyword" id="4708590">range</span>&nbsp;<span class="ident" id="4708596">f</span><span class="op" id="4708597">.</span><span class="ident" id="4708598">Decls</span>&nbsp;<span class="op" id="4708604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708608">d</span><span class="op" id="4708609">,</span>&nbsp;<span class="ident" id="4708611">ok</span>&nbsp;<span class="op" id="4708614">:=</span>&nbsp;<span class="ident" id="4708617">d</span><span class="op" id="4708618">.</span><span class="op" id="4708619">(</span><span class="op" id="4708620">*</span><span class="ident" id="4708621">GenDecl</span><span class="op" id="4708628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708632">if</span>&nbsp;<span class="op" id="4708635">!</span><span class="ident" id="4708636">ok</span>&nbsp;<span class="op" id="4708639">||</span>&nbsp;<span class="ident" id="4708642">d</span><span class="op" id="4708643">.</span><span class="ident" id="4708644">Tok</span>&nbsp;<span class="op" id="4708648">!=</span>&nbsp;<span class="ident" id="4708651">token</span><span class="op" id="4708656">.</span><span class="ident" id="4708657">IMPORT</span>&nbsp;<span class="op" id="4708664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4708669">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4708717">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708749">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4708757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708762">if</span>&nbsp;<span class="op" id="4708765">!</span><span class="ident" id="4708766">d</span><span class="op" id="4708767">.</span><span class="ident" id="4708768">Lparen</span><span class="op" id="4708774">.</span><span class="ident" id="4708775">IsValid</span><span class="op" id="4708782">(</span><span class="op" id="4708783">)</span>&nbsp;<span class="op" id="4708785">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4708790">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708828">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4708839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4708844">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708902">i</span>&nbsp;<span class="op" id="4708904">:=</span>&nbsp;<span class="num" id="4708907">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4708911">specs</span>&nbsp;<span class="op" id="4708917">:=</span>&nbsp;<span class="ident" id="4708920">d</span><span class="op" id="4708921">.</span><span class="ident" id="4708922">Specs</span><span class="op" id="4708927">[</span><span class="op" id="4708928">:</span><span class="num" id="4708929">0</span><span class="op" id="4708930">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708934">for</span>&nbsp;<span class="ident" id="4708938">j</span><span class="op" id="4708939">,</span>&nbsp;<span class="ident" id="4708941">s</span>&nbsp;<span class="op" id="4708943">:=</span>&nbsp;<span class="keyword" id="4708946">range</span>&nbsp;<span class="ident" id="4708952">d</span><span class="op" id="4708953">.</span><span class="ident" id="4708954">Specs</span>&nbsp;<span class="op" id="4708960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4708965">if</span>&nbsp;<span class="ident" id="4708968">j</span>&nbsp;<span class="op" id="4708970">&gt;</span>&nbsp;<span class="ident" id="4708972">i</span>&nbsp;<span class="op" id="4708974">&amp;&amp;</span>&nbsp;<span class="ident" id="4708977">fset</span><span class="op" id="4708981">.</span><span class="ident" id="4708982">Position</span><span class="op" id="4708990">(</span><span class="ident" id="4708991">s</span><span class="op" id="4708992">.</span><span class="ident" id="4708993">Pos</span><span class="op" id="4708996">(</span><span class="op" id="4708997">)</span><span class="op" id="4708998">)</span><span class="op" id="4708999">.</span><span class="ident" id="4709000">Line</span>&nbsp;<span class="op" id="4709005">&gt;</span>&nbsp;<span class="num" id="4709007">1</span><span class="op" id="4709008">+</span><span class="ident" id="4709009">fset</span><span class="op" id="4709013">.</span><span class="ident" id="4709014">Position</span><span class="op" id="4709022">(</span><span class="ident" id="4709023">d</span><span class="op" id="4709024">.</span><span class="ident" id="4709025">Specs</span><span class="op" id="4709030">[</span><span class="ident" id="4709031">j</span><span class="op" id="4709032">-</span><span class="num" id="4709033">1</span><span class="op" id="4709034">]</span><span class="op" id="4709035">.</span><span class="ident" id="4709036">End</span><span class="op" id="4709039">(</span><span class="op" id="4709040">)</span><span class="op" id="4709041">)</span><span class="op" id="4709042">.</span><span class="ident" id="4709043">Line</span>&nbsp;<span class="op" id="4709048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4709054">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4709096">specs</span>&nbsp;<span class="op" id="4709102">=</span>&nbsp;<span class="builtinfunc" id="4709104">append</span><span class="op" id="4709110">(</span><span class="ident" id="4709111">specs</span><span class="op" id="4709116">,</span>&nbsp;<span class="ident" id="4709118">sortSpecs</span><span class="op" id="4709127">(</span><span class="ident" id="4709128">fset</span><span class="op" id="4709132">,</span>&nbsp;<span class="ident" id="4709134">f</span><span class="op" id="4709135">,</span>&nbsp;<span class="ident" id="4709137">d</span><span class="op" id="4709138">.</span><span class="ident" id="4709139">Specs</span><span class="op" id="4709144">[</span><span class="ident" id="4709145">i</span><span class="op" id="4709146">:</span><span class="ident" id="4709147">j</span><span class="op" id="4709148">]</span><span class="op" id="4709149">)</span><span class="op" id="4709150">...</span><span class="op" id="4709153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4709159">i</span>&nbsp;<span class="op" id="4709161">=</span>&nbsp;<span class="ident" id="4709163">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4709168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4709172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4709176">specs</span>&nbsp;<span class="op" id="4709182">=</span>&nbsp;<span class="builtinfunc" id="4709184">append</span><span class="op" id="4709190">(</span><span class="ident" id="4709191">specs</span><span class="op" id="4709196">,</span>&nbsp;<span class="ident" id="4709198">sortSpecs</span><span class="op" id="4709207">(</span><span class="ident" id="4709208">fset</span><span class="op" id="4709212">,</span>&nbsp;<span class="ident" id="4709214">f</span><span class="op" id="4709215">,</span>&nbsp;<span class="ident" id="4709217">d</span><span class="op" id="4709218">.</span><span class="ident" id="4709219">Specs</span><span class="op" id="4709224">[</span><span class="ident" id="4709225">i</span><span class="op" id="4709226">:</span><span class="op" id="4709227">]</span><span class="op" id="4709228">)</span><span class="op" id="4709229">...</span><span class="op" id="4709232">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4709236">d</span><span class="op" id="4709237">.</span><span class="ident" id="4709238">Specs</span>&nbsp;<span class="op" id="4709244">=</span>&nbsp;<span class="ident" id="4709246">specs</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4709255">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709326">if</span>&nbsp;<span class="builtinfunc" id="4709329">len</span><span class="op" id="4709332">(</span><span class="ident" id="4709333">d</span><span class="op" id="4709334">.</span><span class="ident" id="4709335">Specs</span><span class="op" id="4709340">)</span>&nbsp;<span class="op" id="4709342">&gt;</span>&nbsp;<span class="num" id="4709344">0</span>&nbsp;<span class="op" id="4709346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4709351">lastSpec</span>&nbsp;<span class="op" id="4709360">:=</span>&nbsp;<span class="ident" id="4709363">d</span><span class="op" id="4709364">.</span><span class="ident" id="4709365">Specs</span><span class="op" id="4709370">[</span><span class="builtinfunc" id="4709371">len</span><span class="op" id="4709374">(</span><span class="ident" id="4709375">d</span><span class="op" id="4709376">.</span><span class="ident" id="4709377">Specs</span><span class="op" id="4709382">)</span><span class="op" id="4709383">-</span><span class="num" id="4709384">1</span><span class="op" id="4709385">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4709390">lastLine</span>&nbsp;<span class="op" id="4709399">:=</span>&nbsp;<span class="ident" id="4709402">fset</span><span class="op" id="4709406">.</span><span class="ident" id="4709407">Position</span><span class="op" id="4709415">(</span><span class="ident" id="4709416">lastSpec</span><span class="op" id="4709424">.</span><span class="ident" id="4709425">Pos</span><span class="op" id="4709428">(</span><span class="op" id="4709429">)</span><span class="op" id="4709430">)</span><span class="op" id="4709431">.</span><span class="ident" id="4709432">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709440">if</span>&nbsp;<span class="ident" id="4709443">rParenLine</span>&nbsp;<span class="op" id="4709454">:=</span>&nbsp;<span class="ident" id="4709457">fset</span><span class="op" id="4709461">.</span><span class="ident" id="4709462">Position</span><span class="op" id="4709470">(</span><span class="ident" id="4709471">d</span><span class="op" id="4709472">.</span><span class="ident" id="4709473">Rparen</span><span class="op" id="4709479">)</span><span class="op" id="4709480">.</span><span class="ident" id="4709481">Line</span><span class="op" id="4709485">;</span>&nbsp;<span class="ident" id="4709487">rParenLine</span>&nbsp;<span class="op" id="4709498">&gt;</span>&nbsp;<span class="ident" id="4709500">lastLine</span><span class="op" id="4709508">+</span><span class="num" id="4709509">1</span>&nbsp;<span class="op" id="4709511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4709517">fset</span><span class="op" id="4709521">.</span><span class="ident" id="4709522">File</span><span class="op" id="4709526">(</span><span class="ident" id="4709527">d</span><span class="op" id="4709528">.</span><span class="ident" id="4709529">Rparen</span><span class="op" id="4709535">)</span><span class="op" id="4709536">.</span><span class="ident" id="4709537">MergeLine</span><span class="op" id="4709546">(</span><span class="ident" id="4709547">rParenLine</span>&nbsp;<span class="op" id="4709558">-</span>&nbsp;<span class="num" id="4709560">1</span><span class="op" id="4709561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4709566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4709570">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4709573">}</span><br>
<span class="lineno"></span><span class="op" id="4709575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4709578">func</span>&nbsp;<span class="ident" id="4709583">importPath</span><span class="op" id="4709593">(</span><span class="ident" id="4709594">s</span>&nbsp;<span class="ident" id="4709596">Spec</span><span class="op" id="4709600">)</span>&nbsp;<span class="builtintype" id="4709602">string</span>&nbsp;<span class="op" id="4709609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4709612">t</span><span class="op" id="4709613">,</span>&nbsp;<span class="ident" id="4709615">err</span>&nbsp;<span class="op" id="4709619">:=</span>&nbsp;<span class="ident" id="4709622">strconv</span><span class="op" id="4709629">.</span><span class="ident" id="4709630">Unquote</span><span class="op" id="4709637">(</span><span class="ident" id="4709638">s</span><span class="op" id="4709639">.</span><span class="op" id="4709640">(</span><span class="op" id="4709641">*</span><span class="ident" id="4709642">ImportSpec</span><span class="op" id="4709652">)</span><span class="op" id="4709653">.</span><span class="ident" id="4709654">Path</span><span class="op" id="4709658">.</span><span class="ident" id="4709659">Value</span><span class="op" id="4709664">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709667">if</span>&nbsp;<span class="ident" id="4709670">err</span>&nbsp;<span class="op" id="4709674">==</span>&nbsp;<span class="ident" id="4709677">nil</span>&nbsp;<span class="op" id="4709681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709685">return</span>&nbsp;<span class="ident" id="4709692">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4709695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709698">return</span>&nbsp;<span class="string" id="4709705">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4709708">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="4709711">func</span>&nbsp;<span class="ident" id="4709716">importName</span><span class="op" id="4709726">(</span><span class="ident" id="4709727">s</span>&nbsp;<span class="ident" id="4709729">Spec</span><span class="op" id="4709733">)</span>&nbsp;<span class="builtintype" id="4709735">string</span>&nbsp;<span class="op" id="4709742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4709745">n</span>&nbsp;<span class="op" id="4709747">:=</span>&nbsp;<span class="ident" id="4709750">s</span><span class="op" id="4709751">.</span><span class="op" id="4709752">(</span><span class="op" id="4709753">*</span><span class="ident" id="4709754">ImportSpec</span><span class="op" id="4709764">)</span><span class="op" id="4709765">.</span><span class="ident" id="4709766">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709772">if</span>&nbsp;<span class="ident" id="4709775">n</span>&nbsp;<span class="op" id="4709777">==</span>&nbsp;<span class="ident" id="4709780">nil</span>&nbsp;<span class="op" id="4709784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709788">return</span>&nbsp;<span class="string" id="4709795">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4709799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709802">return</span>&nbsp;<span class="ident" id="4709809">n</span><span class="op" id="4709810">.</span><span class="ident" id="4709811">Name</span><br>
<span class="lineno"></span><span class="op" id="4709816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4709819">func</span>&nbsp;<span class="ident" id="4709824">importComment</span><span class="op" id="4709837">(</span><span class="ident" id="4709838">s</span>&nbsp;<span class="ident" id="4709840">Spec</span><span class="op" id="4709844">)</span>&nbsp;<span class="builtintype" id="4709846">string</span>&nbsp;<span class="op" id="4709853">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4709856">c</span>&nbsp;<span class="op" id="4709858">:=</span>&nbsp;<span class="ident" id="4709861">s</span><span class="op" id="4709862">.</span><span class="op" id="4709863">(</span><span class="op" id="4709864">*</span><span class="ident" id="4709865">ImportSpec</span><span class="op" id="4709875">)</span><span class="op" id="4709876">.</span><span class="ident" id="4709877">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709886">if</span>&nbsp;<span class="ident" id="4709889">c</span>&nbsp;<span class="op" id="4709891">==</span>&nbsp;<span class="ident" id="4709894">nil</span>&nbsp;<span class="op" id="4709898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709902">return</span>&nbsp;<span class="string" id="4709909">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4709913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4709916">return</span>&nbsp;<span class="ident" id="4709923">c</span><span class="op" id="4709924">.</span><span class="ident" id="4709925">Text</span><span class="op" id="4709929">(</span><span class="op" id="4709930">)</span><br>
<span class="lineno">75</span><span class="op" id="4709932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4709935">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="4710005">func</span>&nbsp;<span class="ident" id="4710010">collapse</span><span class="op" id="4710018">(</span><span class="ident" id="4710019">prev</span><span class="op" id="4710023">,</span>&nbsp;<span class="ident" id="4710025">next</span>&nbsp;<span class="ident" id="4710030">Spec</span><span class="op" id="4710034">)</span>&nbsp;<span class="builtintype" id="4710036">bool</span>&nbsp;<span class="op" id="4710041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710044">if</span>&nbsp;<span class="ident" id="4710047">importPath</span><span class="op" id="4710057">(</span><span class="ident" id="4710058">next</span><span class="op" id="4710062">)</span>&nbsp;<span class="op" id="4710064">!=</span>&nbsp;<span class="ident" id="4710067">importPath</span><span class="op" id="4710077">(</span><span class="ident" id="4710078">prev</span><span class="op" id="4710082">)</span>&nbsp;<span class="op" id="4710084">||</span>&nbsp;<span class="ident" id="4710087">importName</span><span class="op" id="4710097">(</span><span class="ident" id="4710098">next</span><span class="op" id="4710102">)</span>&nbsp;<span class="op" id="4710104">!=</span>&nbsp;<span class="ident" id="4710107">importName</span><span class="op" id="4710117">(</span><span class="ident" id="4710118">prev</span><span class="op" id="4710122">)</span>&nbsp;<span class="op" id="4710124">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710128">return</span>&nbsp;<span class="builtintype" id="4710135">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4710142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710145">return</span>&nbsp;<span class="ident" id="4710152">prev</span><span class="op" id="4710156">.</span><span class="op" id="4710157">(</span><span class="op" id="4710158">*</span><span class="ident" id="4710159">ImportSpec</span><span class="op" id="4710169">)</span><span class="op" id="4710170">.</span><span class="ident" id="4710171">Comment</span>&nbsp;<span class="op" id="4710179">==</span>&nbsp;<span class="ident" id="4710182">nil</span><br>
<span class="lineno"></span><span class="op" id="4710186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="4710189">type</span>&nbsp;<span class="ident" id="4710194">posSpan</span>&nbsp;<span class="keyword" id="4710202">struct</span>&nbsp;<span class="op" id="4710209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710212">Start</span>&nbsp;<span class="ident" id="4710218">token</span><span class="op" id="4710223">.</span><span class="ident" id="4710224">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710229">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4710235">token</span><span class="op" id="4710240">.</span><span class="ident" id="4710241">Pos</span><br>
<span class="lineno"></span><span class="op" id="4710245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="4710248">func</span>&nbsp;<span class="ident" id="4710253">sortSpecs</span><span class="op" id="4710262">(</span><span class="ident" id="4710263">fset</span>&nbsp;<span class="op" id="4710268">*</span><span class="ident" id="4710269">token</span><span class="op" id="4710274">.</span><span class="ident" id="4710275">FileSet</span><span class="op" id="4710282">,</span>&nbsp;<span class="ident" id="4710284">f</span>&nbsp;<span class="op" id="4710286">*</span><span class="ident" id="4710287">File</span><span class="op" id="4710291">,</span>&nbsp;<span class="ident" id="4710293">specs</span>&nbsp;<span class="op" id="4710299">[</span><span class="op" id="4710300">]</span><span class="ident" id="4710301">Spec</span><span class="op" id="4710305">)</span>&nbsp;<span class="op" id="4710307">[</span><span class="op" id="4710308">]</span><span class="ident" id="4710309">Spec</span>&nbsp;<span class="op" id="4710314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4710317">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4710380">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4710425">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710476">if</span>&nbsp;<span class="builtinfunc" id="4710479">len</span><span class="op" id="4710482">(</span><span class="ident" id="4710483">specs</span><span class="op" id="4710488">)</span>&nbsp;<span class="op" id="4710490">&lt;=</span>&nbsp;<span class="num" id="4710493">1</span>&nbsp;<span class="op" id="4710495">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710499">return</span>&nbsp;<span class="ident" id="4710506">specs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4710513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4710517">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710549">pos</span>&nbsp;<span class="op" id="4710553">:=</span>&nbsp;<span class="builtinfunc" id="4710556">make</span><span class="op" id="4710560">(</span><span class="op" id="4710561">[</span><span class="op" id="4710562">]</span><span class="ident" id="4710563">posSpan</span><span class="op" id="4710570">,</span>&nbsp;<span class="builtinfunc" id="4710572">len</span><span class="op" id="4710575">(</span><span class="ident" id="4710576">specs</span><span class="op" id="4710581">)</span><span class="op" id="4710582">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710585">for</span>&nbsp;<span class="ident" id="4710589">i</span><span class="op" id="4710590">,</span>&nbsp;<span class="ident" id="4710592">s</span>&nbsp;<span class="op" id="4710594">:=</span>&nbsp;<span class="keyword" id="4710597">range</span>&nbsp;<span class="ident" id="4710603">specs</span>&nbsp;<span class="op" id="4710609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710613">pos</span><span class="op" id="4710616">[</span><span class="ident" id="4710617">i</span><span class="op" id="4710618">]</span>&nbsp;<span class="op" id="4710620">=</span>&nbsp;<span class="ident" id="4710622">posSpan</span><span class="op" id="4710629">{</span><span class="ident" id="4710630">s</span><span class="op" id="4710631">.</span><span class="ident" id="4710632">Pos</span><span class="op" id="4710635">(</span><span class="op" id="4710636">)</span><span class="op" id="4710637">,</span>&nbsp;<span class="ident" id="4710639">s</span><span class="op" id="4710640">.</span><span class="ident" id="4710641">End</span><span class="op" id="4710644">(</span><span class="op" id="4710645">)</span><span class="op" id="4710646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4710649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4710653">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4710690">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710750">lastLine</span>&nbsp;<span class="op" id="4710759">:=</span>&nbsp;<span class="ident" id="4710762">fset</span><span class="op" id="4710766">.</span><span class="ident" id="4710767">Position</span><span class="op" id="4710775">(</span><span class="ident" id="4710776">pos</span><span class="op" id="4710779">[</span><span class="builtinfunc" id="4710780">len</span><span class="op" id="4710783">(</span><span class="ident" id="4710784">pos</span><span class="op" id="4710787">)</span><span class="op" id="4710788">-</span><span class="num" id="4710789">1</span><span class="op" id="4710790">]</span><span class="op" id="4710791">.</span><span class="ident" id="4710792">End</span><span class="op" id="4710795">)</span><span class="op" id="4710796">.</span><span class="ident" id="4710797">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710803">cstart</span>&nbsp;<span class="op" id="4710810">:=</span>&nbsp;<span class="builtinfunc" id="4710813">len</span><span class="op" id="4710816">(</span><span class="ident" id="4710817">f</span><span class="op" id="4710818">.</span><span class="ident" id="4710819">Comments</span><span class="op" id="4710827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710830">cend</span>&nbsp;<span class="op" id="4710835">:=</span>&nbsp;<span class="builtinfunc" id="4710838">len</span><span class="op" id="4710841">(</span><span class="ident" id="4710842">f</span><span class="op" id="4710843">.</span><span class="ident" id="4710844">Comments</span><span class="op" id="4710852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710855">for</span>&nbsp;<span class="ident" id="4710859">i</span><span class="op" id="4710860">,</span>&nbsp;<span class="ident" id="4710862">g</span>&nbsp;<span class="op" id="4710864">:=</span>&nbsp;<span class="keyword" id="4710867">range</span>&nbsp;<span class="ident" id="4710873">f</span><span class="op" id="4710874">.</span><span class="ident" id="4710875">Comments</span>&nbsp;<span class="op" id="4710884">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710888">if</span>&nbsp;<span class="ident" id="4710891">g</span><span class="op" id="4710892">.</span><span class="ident" id="4710893">Pos</span><span class="op" id="4710896">(</span><span class="op" id="4710897">)</span>&nbsp;<span class="op" id="4710899">&lt;</span>&nbsp;<span class="ident" id="4710901">pos</span><span class="op" id="4710904">[</span><span class="num" id="4710905">0</span><span class="op" id="4710906">]</span><span class="op" id="4710907">.</span><span class="ident" id="4710908">Start</span>&nbsp;<span class="op" id="4710914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710919">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4710930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710934">if</span>&nbsp;<span class="ident" id="4710937">i</span>&nbsp;<span class="op" id="4710939">&lt;</span>&nbsp;<span class="ident" id="4710941">cstart</span>&nbsp;<span class="op" id="4710948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4710953">cstart</span>&nbsp;<span class="op" id="4710960">=</span>&nbsp;<span class="ident" id="4710962">i</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4710966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4710970">if</span>&nbsp;<span class="ident" id="4710973">fset</span><span class="op" id="4710977">.</span><span class="ident" id="4710978">Position</span><span class="op" id="4710986">(</span><span class="ident" id="4710987">g</span><span class="op" id="4710988">.</span><span class="ident" id="4710989">End</span><span class="op" id="4710992">(</span><span class="op" id="4710993">)</span><span class="op" id="4710994">)</span><span class="op" id="4710995">.</span><span class="ident" id="4710996">Line</span>&nbsp;<span class="op" id="4711001">&gt;</span>&nbsp;<span class="ident" id="4711003">lastLine</span>&nbsp;<span class="op" id="4711012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711017">cend</span>&nbsp;<span class="op" id="4711022">=</span>&nbsp;<span class="ident" id="4711024">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4711029">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4711037">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4711040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711043">comments</span>&nbsp;<span class="op" id="4711052">:=</span>&nbsp;<span class="ident" id="4711055">f</span><span class="op" id="4711056">.</span><span class="ident" id="4711057">Comments</span><span class="op" id="4711065">[</span><span class="ident" id="4711066">cstart</span><span class="op" id="4711072">:</span><span class="ident" id="4711073">cend</span><span class="op" id="4711077">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4711081">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711138">importComment</span>&nbsp;<span class="op" id="4711152">:=</span>&nbsp;<span class="keyword" id="4711155">map</span><span class="op" id="4711158">[</span><span class="op" id="4711159">*</span><span class="ident" id="4711160">ImportSpec</span><span class="op" id="4711170">]</span><span class="op" id="4711171">[</span><span class="op" id="4711172">]</span><span class="op" id="4711173">*</span><span class="ident" id="4711174">CommentGroup</span><span class="op" id="4711186">{</span><span class="op" id="4711187">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711190">specIndex</span>&nbsp;<span class="op" id="4711200">:=</span>&nbsp;<span class="num" id="4711203">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4711206">for</span>&nbsp;<span class="ident" id="4711210">_</span><span class="op" id="4711211">,</span>&nbsp;<span class="ident" id="4711213">g</span>&nbsp;<span class="op" id="4711215">:=</span>&nbsp;<span class="keyword" id="4711218">range</span>&nbsp;<span class="ident" id="4711224">comments</span>&nbsp;<span class="op" id="4711233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4711237">for</span>&nbsp;<span class="ident" id="4711241">specIndex</span><span class="op" id="4711250">+</span><span class="num" id="4711251">1</span>&nbsp;<span class="op" id="4711253">&lt;</span>&nbsp;<span class="builtinfunc" id="4711255">len</span><span class="op" id="4711258">(</span><span class="ident" id="4711259">specs</span><span class="op" id="4711264">)</span>&nbsp;<span class="op" id="4711266">&amp;&amp;</span>&nbsp;<span class="ident" id="4711269">pos</span><span class="op" id="4711272">[</span><span class="ident" id="4711273">specIndex</span><span class="op" id="4711282">+</span><span class="num" id="4711283">1</span><span class="op" id="4711284">]</span><span class="op" id="4711285">.</span><span class="ident" id="4711286">Start</span>&nbsp;<span class="op" id="4711292">&lt;=</span>&nbsp;<span class="ident" id="4711295">g</span><span class="op" id="4711296">.</span><span class="ident" id="4711297">Pos</span><span class="op" id="4711300">(</span><span class="op" id="4711301">)</span>&nbsp;<span class="op" id="4711303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711308">specIndex</span><span class="op" id="4711317">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4711322">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711326">s</span>&nbsp;<span class="op" id="4711328">:=</span>&nbsp;<span class="ident" id="4711331">specs</span><span class="op" id="4711336">[</span><span class="ident" id="4711337">specIndex</span><span class="op" id="4711346">]</span><span class="op" id="4711347">.</span><span class="op" id="4711348">(</span><span class="op" id="4711349">*</span><span class="ident" id="4711350">ImportSpec</span><span class="op" id="4711360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711364">importComment</span><span class="op" id="4711377">[</span><span class="ident" id="4711378">s</span><span class="op" id="4711379">]</span>&nbsp;<span class="op" id="4711381">=</span>&nbsp;<span class="builtinfunc" id="4711383">append</span><span class="op" id="4711389">(</span><span class="ident" id="4711390">importComment</span><span class="op" id="4711403">[</span><span class="ident" id="4711404">s</span><span class="op" id="4711405">]</span><span class="op" id="4711406">,</span>&nbsp;<span class="ident" id="4711408">g</span><span class="op" id="4711409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4711412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4711416">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4711458">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4711514">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4711580">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4711635">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711674">sort</span><span class="op" id="4711678">.</span><span class="ident" id="4711679">Sort</span><span class="op" id="4711683">(</span><span class="ident" id="4711684">byImportSpec</span><span class="op" id="4711696">(</span><span class="ident" id="4711697">specs</span><span class="op" id="4711702">)</span><span class="op" id="4711703">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4711707">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4711762">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711793">deduped</span>&nbsp;<span class="op" id="4711801">:=</span>&nbsp;<span class="ident" id="4711804">specs</span><span class="op" id="4711809">[</span><span class="op" id="4711810">:</span><span class="num" id="4711811">0</span><span class="op" id="4711812">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4711815">for</span>&nbsp;<span class="ident" id="4711819">i</span><span class="op" id="4711820">,</span>&nbsp;<span class="ident" id="4711822">s</span>&nbsp;<span class="op" id="4711824">:=</span>&nbsp;<span class="keyword" id="4711827">range</span>&nbsp;<span class="ident" id="4711833">specs</span>&nbsp;<span class="op" id="4711839">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4711843">if</span>&nbsp;<span class="ident" id="4711846">i</span>&nbsp;<span class="op" id="4711848">==</span>&nbsp;<span class="builtinfunc" id="4711851">len</span><span class="op" id="4711854">(</span><span class="ident" id="4711855">specs</span><span class="op" id="4711860">)</span><span class="op" id="4711861">-</span><span class="num" id="4711862">1</span>&nbsp;<span class="op" id="4711864">||</span>&nbsp;<span class="op" id="4711867">!</span><span class="ident" id="4711868">collapse</span><span class="op" id="4711876">(</span><span class="ident" id="4711877">s</span><span class="op" id="4711878">,</span>&nbsp;<span class="ident" id="4711880">specs</span><span class="op" id="4711885">[</span><span class="ident" id="4711886">i</span><span class="op" id="4711887">+</span><span class="num" id="4711888">1</span><span class="op" id="4711889">]</span><span class="op" id="4711890">)</span>&nbsp;<span class="op" id="4711892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711897">deduped</span>&nbsp;<span class="op" id="4711905">=</span>&nbsp;<span class="builtinfunc" id="4711907">append</span><span class="op" id="4711913">(</span><span class="ident" id="4711914">deduped</span><span class="op" id="4711921">,</span>&nbsp;<span class="ident" id="4711923">s</span><span class="op" id="4711924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4711928">}</span>&nbsp;<span class="keyword" id="4711930">else</span>&nbsp;<span class="op" id="4711935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711940">p</span>&nbsp;<span class="op" id="4711942">:=</span>&nbsp;<span class="ident" id="4711945">s</span><span class="op" id="4711946">.</span><span class="ident" id="4711947">Pos</span><span class="op" id="4711950">(</span><span class="op" id="4711951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4711956">fset</span><span class="op" id="4711960">.</span><span class="ident" id="4711961">File</span><span class="op" id="4711965">(</span><span class="ident" id="4711966">p</span><span class="op" id="4711967">)</span><span class="op" id="4711968">.</span><span class="ident" id="4711969">MergeLine</span><span class="op" id="4711978">(</span><span class="ident" id="4711979">fset</span><span class="op" id="4711983">.</span><span class="ident" id="4711984">Position</span><span class="op" id="4711992">(</span><span class="ident" id="4711993">p</span><span class="op" id="4711994">)</span><span class="op" id="4711995">.</span><span class="ident" id="4711996">Line</span><span class="op" id="4712000">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712010">specs</span>&nbsp;<span class="op" id="4712016">=</span>&nbsp;<span class="ident" id="4712018">deduped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4712028">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712057">for</span>&nbsp;<span class="ident" id="4712061">i</span><span class="op" id="4712062">,</span>&nbsp;<span class="ident" id="4712064">s</span>&nbsp;<span class="op" id="4712066">:=</span>&nbsp;<span class="keyword" id="4712069">range</span>&nbsp;<span class="ident" id="4712075">specs</span>&nbsp;<span class="op" id="4712081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712085">s</span>&nbsp;<span class="op" id="4712087">:=</span>&nbsp;<span class="ident" id="4712090">s</span><span class="op" id="4712091">.</span><span class="op" id="4712092">(</span><span class="op" id="4712093">*</span><span class="ident" id="4712094">ImportSpec</span><span class="op" id="4712104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712108">if</span>&nbsp;<span class="ident" id="4712111">s</span><span class="op" id="4712112">.</span><span class="ident" id="4712113">Name</span>&nbsp;<span class="op" id="4712118">!=</span>&nbsp;<span class="ident" id="4712121">nil</span>&nbsp;<span class="op" id="4712125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712130">s</span><span class="op" id="4712131">.</span><span class="ident" id="4712132">Name</span><span class="op" id="4712136">.</span><span class="ident" id="4712137">NamePos</span>&nbsp;<span class="op" id="4712145">=</span>&nbsp;<span class="ident" id="4712147">pos</span><span class="op" id="4712150">[</span><span class="ident" id="4712151">i</span><span class="op" id="4712152">]</span><span class="op" id="4712153">.</span><span class="ident" id="4712154">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712162">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712166">s</span><span class="op" id="4712167">.</span><span class="ident" id="4712168">Path</span><span class="op" id="4712172">.</span><span class="ident" id="4712173">ValuePos</span>&nbsp;<span class="op" id="4712182">=</span>&nbsp;<span class="ident" id="4712184">pos</span><span class="op" id="4712187">[</span><span class="ident" id="4712188">i</span><span class="op" id="4712189">]</span><span class="op" id="4712190">.</span><span class="ident" id="4712191">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712199">s</span><span class="op" id="4712200">.</span><span class="ident" id="4712201">EndPos</span>&nbsp;<span class="op" id="4712208">=</span>&nbsp;<span class="ident" id="4712210">pos</span><span class="op" id="4712213">[</span><span class="ident" id="4712214">i</span><span class="op" id="4712215">]</span><span class="op" id="4712216">.</span><span class="ident" id="4712217">End</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712223">for</span>&nbsp;<span class="ident" id="4712227">_</span><span class="op" id="4712228">,</span>&nbsp;<span class="ident" id="4712230">g</span>&nbsp;<span class="op" id="4712232">:=</span>&nbsp;<span class="keyword" id="4712235">range</span>&nbsp;<span class="ident" id="4712241">importComment</span><span class="op" id="4712254">[</span><span class="ident" id="4712255">s</span><span class="op" id="4712256">]</span>&nbsp;<span class="op" id="4712258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712263">for</span>&nbsp;<span class="ident" id="4712267">_</span><span class="op" id="4712268">,</span>&nbsp;<span class="ident" id="4712270">c</span>&nbsp;<span class="op" id="4712272">:=</span>&nbsp;<span class="keyword" id="4712275">range</span>&nbsp;<span class="ident" id="4712281">g</span><span class="op" id="4712282">.</span><span class="ident" id="4712283">List</span>&nbsp;<span class="op" id="4712288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712294">c</span><span class="op" id="4712295">.</span><span class="ident" id="4712296">Slash</span>&nbsp;<span class="op" id="4712302">=</span>&nbsp;<span class="ident" id="4712304">pos</span><span class="op" id="4712307">[</span><span class="ident" id="4712308">i</span><span class="op" id="4712309">]</span><span class="op" id="4712310">.</span><span class="ident" id="4712311">End</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712329">sort</span><span class="op" id="4712333">.</span><span class="ident" id="4712334">Sort</span><span class="op" id="4712338">(</span><span class="ident" id="4712339">byCommentPos</span><span class="op" id="4712351">(</span><span class="ident" id="4712352">comments</span><span class="op" id="4712360">)</span><span class="op" id="4712361">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712365">return</span>&nbsp;<span class="ident" id="4712372">specs</span><br>
<span class="lineno"></span><span class="op" id="4712378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4712381">type</span>&nbsp;<span class="ident" id="4712386">byImportSpec</span>&nbsp;<span class="op" id="4712399">[</span><span class="op" id="4712400">]</span><span class="ident" id="4712401">Spec</span>&nbsp;<span class="comment" id="4712406">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="4712431">func</span>&nbsp;<span class="op" id="4712436">(</span><span class="ident" id="4712437">x</span>&nbsp;<span class="ident" id="4712439">byImportSpec</span><span class="op" id="4712451">)</span>&nbsp;<span class="ident" id="4712453">Len</span><span class="op" id="4712456">(</span><span class="op" id="4712457">)</span>&nbsp;<span class="builtintype" id="4712459">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4712468">{</span>&nbsp;<span class="keyword" id="4712470">return</span>&nbsp;<span class="builtinfunc" id="4712477">len</span><span class="op" id="4712480">(</span><span class="ident" id="4712481">x</span><span class="op" id="4712482">)</span>&nbsp;<span class="op" id="4712484">}</span><br>
<span class="lineno"></span><span class="keyword" id="4712486">func</span>&nbsp;<span class="op" id="4712491">(</span><span class="ident" id="4712492">x</span>&nbsp;<span class="ident" id="4712494">byImportSpec</span><span class="op" id="4712506">)</span>&nbsp;<span class="ident" id="4712508">Swap</span><span class="op" id="4712512">(</span><span class="ident" id="4712513">i</span><span class="op" id="4712514">,</span>&nbsp;<span class="ident" id="4712516">j</span>&nbsp;<span class="builtintype" id="4712518">int</span><span class="op" id="4712521">)</span>&nbsp;<span class="op" id="4712523">{</span>&nbsp;<span class="ident" id="4712525">x</span><span class="op" id="4712526">[</span><span class="ident" id="4712527">i</span><span class="op" id="4712528">]</span><span class="op" id="4712529">,</span>&nbsp;<span class="ident" id="4712531">x</span><span class="op" id="4712532">[</span><span class="ident" id="4712533">j</span><span class="op" id="4712534">]</span>&nbsp;<span class="op" id="4712536">=</span>&nbsp;<span class="ident" id="4712538">x</span><span class="op" id="4712539">[</span><span class="ident" id="4712540">j</span><span class="op" id="4712541">]</span><span class="op" id="4712542">,</span>&nbsp;<span class="ident" id="4712544">x</span><span class="op" id="4712545">[</span><span class="ident" id="4712546">i</span><span class="op" id="4712547">]</span>&nbsp;<span class="op" id="4712549">}</span><br>
<span class="lineno"></span><span class="keyword" id="4712551">func</span>&nbsp;<span class="op" id="4712556">(</span><span class="ident" id="4712557">x</span>&nbsp;<span class="ident" id="4712559">byImportSpec</span><span class="op" id="4712571">)</span>&nbsp;<span class="ident" id="4712573">Less</span><span class="op" id="4712577">(</span><span class="ident" id="4712578">i</span><span class="op" id="4712579">,</span>&nbsp;<span class="ident" id="4712581">j</span>&nbsp;<span class="builtintype" id="4712583">int</span><span class="op" id="4712586">)</span>&nbsp;<span class="builtintype" id="4712588">bool</span>&nbsp;<span class="op" id="4712593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712596">ipath</span>&nbsp;<span class="op" id="4712602">:=</span>&nbsp;<span class="ident" id="4712605">importPath</span><span class="op" id="4712615">(</span><span class="ident" id="4712616">x</span><span class="op" id="4712617">[</span><span class="ident" id="4712618">i</span><span class="op" id="4712619">]</span><span class="op" id="4712620">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712623">jpath</span>&nbsp;<span class="op" id="4712629">:=</span>&nbsp;<span class="ident" id="4712632">importPath</span><span class="op" id="4712642">(</span><span class="ident" id="4712643">x</span><span class="op" id="4712644">[</span><span class="ident" id="4712645">j</span><span class="op" id="4712646">]</span><span class="op" id="4712647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712650">if</span>&nbsp;<span class="ident" id="4712653">ipath</span>&nbsp;<span class="op" id="4712659">!=</span>&nbsp;<span class="ident" id="4712662">jpath</span>&nbsp;<span class="op" id="4712668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712672">return</span>&nbsp;<span class="ident" id="4712679">ipath</span>&nbsp;<span class="op" id="4712685">&lt;</span>&nbsp;<span class="ident" id="4712687">jpath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712697">iname</span>&nbsp;<span class="op" id="4712703">:=</span>&nbsp;<span class="ident" id="4712706">importName</span><span class="op" id="4712716">(</span><span class="ident" id="4712717">x</span><span class="op" id="4712718">[</span><span class="ident" id="4712719">i</span><span class="op" id="4712720">]</span><span class="op" id="4712721">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4712724">jname</span>&nbsp;<span class="op" id="4712730">:=</span>&nbsp;<span class="ident" id="4712733">importName</span><span class="op" id="4712743">(</span><span class="ident" id="4712744">x</span><span class="op" id="4712745">[</span><span class="ident" id="4712746">j</span><span class="op" id="4712747">]</span><span class="op" id="4712748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712751">if</span>&nbsp;<span class="ident" id="4712754">iname</span>&nbsp;<span class="op" id="4712760">!=</span>&nbsp;<span class="ident" id="4712763">jname</span>&nbsp;<span class="op" id="4712769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712773">return</span>&nbsp;<span class="ident" id="4712780">iname</span>&nbsp;<span class="op" id="4712786">&lt;</span>&nbsp;<span class="ident" id="4712788">jname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4712795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4712798">return</span>&nbsp;<span class="ident" id="4712805">importComment</span><span class="op" id="4712818">(</span><span class="ident" id="4712819">x</span><span class="op" id="4712820">[</span><span class="ident" id="4712821">i</span><span class="op" id="4712822">]</span><span class="op" id="4712823">)</span>&nbsp;<span class="op" id="4712825">&lt;</span>&nbsp;<span class="ident" id="4712827">importComment</span><span class="op" id="4712840">(</span><span class="ident" id="4712841">x</span><span class="op" id="4712842">[</span><span class="ident" id="4712843">j</span><span class="op" id="4712844">]</span><span class="op" id="4712845">)</span><br>
<span class="lineno">190</span><span class="op" id="4712847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4712850">type</span>&nbsp;<span class="ident" id="4712855">byCommentPos</span>&nbsp;<span class="op" id="4712868">[</span><span class="op" id="4712869">]</span><span class="op" id="4712870">*</span><span class="ident" id="4712871">CommentGroup</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4712885">func</span>&nbsp;<span class="op" id="4712890">(</span><span class="ident" id="4712891">x</span>&nbsp;<span class="ident" id="4712893">byCommentPos</span><span class="op" id="4712905">)</span>&nbsp;<span class="ident" id="4712907">Len</span><span class="op" id="4712910">(</span><span class="op" id="4712911">)</span>&nbsp;<span class="builtintype" id="4712913">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4712927">{</span>&nbsp;<span class="keyword" id="4712929">return</span>&nbsp;<span class="builtinfunc" id="4712936">len</span><span class="op" id="4712939">(</span><span class="ident" id="4712940">x</span><span class="op" id="4712941">)</span>&nbsp;<span class="op" id="4712943">}</span><br>
<span class="lineno">195</span><span class="keyword" id="4712945">func</span>&nbsp;<span class="op" id="4712950">(</span><span class="ident" id="4712951">x</span>&nbsp;<span class="ident" id="4712953">byCommentPos</span><span class="op" id="4712965">)</span>&nbsp;<span class="ident" id="4712967">Swap</span><span class="op" id="4712971">(</span><span class="ident" id="4712972">i</span><span class="op" id="4712973">,</span>&nbsp;<span class="ident" id="4712975">j</span>&nbsp;<span class="builtintype" id="4712977">int</span><span class="op" id="4712980">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4712987">{</span>&nbsp;<span class="ident" id="4712989">x</span><span class="op" id="4712990">[</span><span class="ident" id="4712991">i</span><span class="op" id="4712992">]</span><span class="op" id="4712993">,</span>&nbsp;<span class="ident" id="4712995">x</span><span class="op" id="4712996">[</span><span class="ident" id="4712997">j</span><span class="op" id="4712998">]</span>&nbsp;<span class="op" id="4713000">=</span>&nbsp;<span class="ident" id="4713002">x</span><span class="op" id="4713003">[</span><span class="ident" id="4713004">j</span><span class="op" id="4713005">]</span><span class="op" id="4713006">,</span>&nbsp;<span class="ident" id="4713008">x</span><span class="op" id="4713009">[</span><span class="ident" id="4713010">i</span><span class="op" id="4713011">]</span>&nbsp;<span class="op" id="4713013">}</span><br>
<span class="lineno"></span><span class="keyword" id="4713015">func</span>&nbsp;<span class="op" id="4713020">(</span><span class="ident" id="4713021">x</span>&nbsp;<span class="ident" id="4713023">byCommentPos</span><span class="op" id="4713035">)</span>&nbsp;<span class="ident" id="4713037">Less</span><span class="op" id="4713041">(</span><span class="ident" id="4713042">i</span><span class="op" id="4713043">,</span>&nbsp;<span class="ident" id="4713045">j</span>&nbsp;<span class="builtintype" id="4713047">int</span><span class="op" id="4713050">)</span>&nbsp;<span class="builtintype" id="4713052">bool</span>&nbsp;<span class="op" id="4713057">{</span>&nbsp;<span class="keyword" id="4713059">return</span>&nbsp;<span class="ident" id="4713066">x</span><span class="op" id="4713067">[</span><span class="ident" id="4713068">i</span><span class="op" id="4713069">]</span><span class="op" id="4713070">.</span><span class="ident" id="4713071">Pos</span><span class="op" id="4713074">(</span><span class="op" id="4713075">)</span>&nbsp;<span class="op" id="4713077">&lt;</span>&nbsp;<span class="ident" id="4713079">x</span><span class="op" id="4713080">[</span><span class="ident" id="4713081">j</span><span class="op" id="4713082">]</span><span class="op" id="4713083">.</span><span class="ident" id="4713084">Pos</span><span class="op" id="4713087">(</span><span class="op" id="4713088">)</span>&nbsp;<span class="op" id="4713090">}</span>
</div>
</body>
</html>
