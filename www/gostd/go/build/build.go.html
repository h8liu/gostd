<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html" class="current">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5900221">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5900277">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5900331">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5900382">package</span>&nbsp;<span class="ident" id="5900390">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5900397">import</span>&nbsp;<span class="op" id="5900404">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900407">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900416">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900426">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900433">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900443">&#34;go/doc&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900453">&#34;go/parser&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900466">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900478">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900484">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900497">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900504">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5900510">pathpkg</span>&nbsp;<span class="string" id="5900518">&#34;path&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900526">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900543">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900554">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900562">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900573">&#34;strings&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900584">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5900595">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5900610">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5900613">//&nbsp;A&nbsp;Context&nbsp;specifies&nbsp;the&nbsp;supporting&nbsp;context&nbsp;for&nbsp;a&nbsp;build.</span><br>
<span class="lineno">30</span><span class="keyword" id="5900672">type</span>&nbsp;<span class="ident" id="5900677">Context</span>&nbsp;<span class="keyword" id="5900685">struct</span>&nbsp;<span class="op" id="5900692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5900695">GOARCH</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5900707">string</span>&nbsp;<span class="comment" id="5900714">//&nbsp;target&nbsp;architecture</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5900738">GOOS</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5900750">string</span>&nbsp;<span class="comment" id="5900757">//&nbsp;target&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5900785">GOROOT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5900797">string</span>&nbsp;<span class="comment" id="5900804">//&nbsp;Go&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5900816">GOPATH</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5900828">string</span>&nbsp;<span class="comment" id="5900835">//&nbsp;Go&nbsp;path</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5900847">CgoEnabled</span>&nbsp;&nbsp;<span class="builtintype" id="5900859">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5900866">//&nbsp;whether&nbsp;cgo&nbsp;can&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5900894">UseAllFiles</span>&nbsp;<span class="builtintype" id="5900906">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5900913">//&nbsp;use&nbsp;files&nbsp;regardless&nbsp;of&nbsp;+build&nbsp;lines,&nbsp;file&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5900966">Compiler</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5900978">string</span>&nbsp;<span class="comment" id="5900985">//&nbsp;compiler&nbsp;to&nbsp;assume&nbsp;when&nbsp;computing&nbsp;target&nbsp;paths</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901037">//&nbsp;The&nbsp;build&nbsp;and&nbsp;release&nbsp;tags&nbsp;specify&nbsp;build&nbsp;constraints</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901094">//&nbsp;that&nbsp;should&nbsp;be&nbsp;considered&nbsp;satisfied&nbsp;when&nbsp;processing&nbsp;+build&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901164">//&nbsp;Clients&nbsp;creating&nbsp;a&nbsp;new&nbsp;context&nbsp;may&nbsp;customize&nbsp;BuildTags,&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901230">//&nbsp;defaults&nbsp;to&nbsp;empty,&nbsp;but&nbsp;it&nbsp;is&nbsp;usually&nbsp;an&nbsp;error&nbsp;to&nbsp;customize&nbsp;ReleaseTags,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901306">//&nbsp;which&nbsp;defaults&nbsp;to&nbsp;the&nbsp;list&nbsp;of&nbsp;Go&nbsp;releases&nbsp;the&nbsp;current&nbsp;release&nbsp;is&nbsp;compatible&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901392">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;BuildTags&nbsp;and&nbsp;ReleaseTags,&nbsp;build&nbsp;constraints</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901460">//&nbsp;consider&nbsp;the&nbsp;values&nbsp;of&nbsp;GOARCH&nbsp;and&nbsp;GOOS&nbsp;as&nbsp;satisfied&nbsp;tags.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5901522">BuildTags</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5901534">[</span><span class="op" id="5901535">]</span><span class="builtintype" id="5901536">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5901544">ReleaseTags</span>&nbsp;<span class="op" id="5901556">[</span><span class="op" id="5901557">]</span><span class="builtintype" id="5901558">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901567">//&nbsp;The&nbsp;install&nbsp;suffix&nbsp;specifies&nbsp;a&nbsp;suffix&nbsp;to&nbsp;use&nbsp;in&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;installation</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901648">//&nbsp;directory.&nbsp;By&nbsp;default&nbsp;it&nbsp;is&nbsp;empty,&nbsp;but&nbsp;custom&nbsp;builds&nbsp;that&nbsp;need&nbsp;to&nbsp;keep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901723">//&nbsp;their&nbsp;outputs&nbsp;separate&nbsp;can&nbsp;set&nbsp;InstallSuffix&nbsp;to&nbsp;do&nbsp;so.&nbsp;For&nbsp;example,&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901800">//&nbsp;using&nbsp;the&nbsp;race&nbsp;detector,&nbsp;the&nbsp;go&nbsp;command&nbsp;uses&nbsp;InstallSuffix&nbsp;=&nbsp;&#34;race&#34;,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901876">//&nbsp;that&nbsp;on&nbsp;a&nbsp;Linux/386&nbsp;system,&nbsp;packages&nbsp;are&nbsp;written&nbsp;to&nbsp;a&nbsp;directory&nbsp;named</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5901950">//&nbsp;&#34;linux_386_race&#34;&nbsp;instead&nbsp;of&nbsp;the&nbsp;usual&nbsp;&#34;linux_386&#34;.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5902005">InstallSuffix</span>&nbsp;<span class="builtintype" id="5902019">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902028">//&nbsp;By&nbsp;default,&nbsp;Import&nbsp;uses&nbsp;the&nbsp;operating&nbsp;system&#39;s&nbsp;file&nbsp;system&nbsp;calls</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902097">//&nbsp;to&nbsp;read&nbsp;directories&nbsp;and&nbsp;files.&nbsp;&nbsp;To&nbsp;read&nbsp;from&nbsp;other&nbsp;sources,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902161">//&nbsp;callers&nbsp;can&nbsp;set&nbsp;the&nbsp;following&nbsp;functions.&nbsp;&nbsp;They&nbsp;all&nbsp;have&nbsp;default</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902229">//&nbsp;behaviors&nbsp;that&nbsp;use&nbsp;the&nbsp;local&nbsp;file&nbsp;system,&nbsp;so&nbsp;clients&nbsp;need&nbsp;only&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902300">//&nbsp;the&nbsp;functions&nbsp;whose&nbsp;behaviors&nbsp;they&nbsp;wish&nbsp;to&nbsp;change.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902356">//&nbsp;JoinPath&nbsp;joins&nbsp;the&nbsp;sequence&nbsp;of&nbsp;path&nbsp;fragments&nbsp;into&nbsp;a&nbsp;single&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902426">//&nbsp;If&nbsp;JoinPath&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.Join.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5902477">JoinPath</span>&nbsp;<span class="keyword" id="5902486">func</span><span class="op" id="5902490">(</span><span class="ident" id="5902491">elem</span>&nbsp;<span class="op" id="5902496">...</span><span class="builtintype" id="5902499">string</span><span class="op" id="5902505">)</span>&nbsp;<span class="builtintype" id="5902507">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902516">//&nbsp;SplitPathList&nbsp;splits&nbsp;the&nbsp;path&nbsp;list&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;individual&nbsp;paths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902589">//&nbsp;If&nbsp;SplitPathList&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.SplitList.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5902650">SplitPathList</span>&nbsp;<span class="keyword" id="5902664">func</span><span class="op" id="5902668">(</span><span class="ident" id="5902669">list</span>&nbsp;<span class="builtintype" id="5902674">string</span><span class="op" id="5902680">)</span>&nbsp;<span class="op" id="5902682">[</span><span class="op" id="5902683">]</span><span class="builtintype" id="5902684">string</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902693">//&nbsp;IsAbsPath&nbsp;reports&nbsp;whether&nbsp;path&nbsp;is&nbsp;an&nbsp;absolute&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902749">//&nbsp;If&nbsp;IsAbsPath&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.IsAbs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5902802">IsAbsPath</span>&nbsp;<span class="keyword" id="5902812">func</span><span class="op" id="5902816">(</span><span class="ident" id="5902817">path</span>&nbsp;<span class="builtintype" id="5902822">string</span><span class="op" id="5902828">)</span>&nbsp;<span class="builtintype" id="5902830">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902837">//&nbsp;IsDir&nbsp;reports&nbsp;whether&nbsp;the&nbsp;path&nbsp;names&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5902891">//&nbsp;If&nbsp;IsDir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;calls&nbsp;os.Stat&nbsp;and&nbsp;uses&nbsp;the&nbsp;result&#39;s&nbsp;IsDir&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5902969">IsDir</span>&nbsp;<span class="keyword" id="5902975">func</span><span class="op" id="5902979">(</span><span class="ident" id="5902980">path</span>&nbsp;<span class="builtintype" id="5902985">string</span><span class="op" id="5902991">)</span>&nbsp;<span class="builtintype" id="5902993">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903000">//&nbsp;HasSubdir&nbsp;reports&nbsp;whether&nbsp;dir&nbsp;is&nbsp;a&nbsp;subdirectory&nbsp;of</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903055">//&nbsp;(perhaps&nbsp;multiple&nbsp;levels&nbsp;below)&nbsp;root.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903097">//&nbsp;If&nbsp;so,&nbsp;HasSubdir&nbsp;sets&nbsp;rel&nbsp;to&nbsp;a&nbsp;slash-separated&nbsp;path&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903158">//&nbsp;can&nbsp;be&nbsp;joined&nbsp;to&nbsp;root&nbsp;to&nbsp;produce&nbsp;a&nbsp;path&nbsp;equivalent&nbsp;to&nbsp;dir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903221">//&nbsp;If&nbsp;HasSubdir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;an&nbsp;implementation&nbsp;built&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903285">//&nbsp;filepath.EvalSymlinks.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5903312">HasSubdir</span>&nbsp;<span class="keyword" id="5903322">func</span><span class="op" id="5903326">(</span><span class="ident" id="5903327">root</span><span class="op" id="5903331">,</span>&nbsp;<span class="ident" id="5903333">dir</span>&nbsp;<span class="builtintype" id="5903337">string</span><span class="op" id="5903343">)</span>&nbsp;<span class="op" id="5903345">(</span><span class="ident" id="5903346">rel</span>&nbsp;<span class="builtintype" id="5903350">string</span><span class="op" id="5903356">,</span>&nbsp;<span class="ident" id="5903358">ok</span>&nbsp;<span class="builtintype" id="5903361">bool</span><span class="op" id="5903365">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903369">//&nbsp;ReadDir&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;os.FileInfo,&nbsp;sorted&nbsp;by&nbsp;Name,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903429">//&nbsp;describing&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903480">//&nbsp;If&nbsp;ReadDir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;ioutil.ReadDir.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5903531">ReadDir</span>&nbsp;<span class="keyword" id="5903539">func</span><span class="op" id="5903543">(</span><span class="ident" id="5903544">dir</span>&nbsp;<span class="builtintype" id="5903548">string</span><span class="op" id="5903554">)</span>&nbsp;<span class="op" id="5903556">(</span><span class="ident" id="5903557">fi</span>&nbsp;<span class="op" id="5903560">[</span><span class="op" id="5903561">]</span><span class="ident" id="5903562"><a href="/gostd/go/build/build.go.html#5900504">os</a></span><span class="op" id="5903564">.</span><span class="ident" id="5903565"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="5903573">,</span>&nbsp;<span class="ident" id="5903575">err</span>&nbsp;<span class="builtintype" id="5903579">error</span><span class="op" id="5903584">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903588">//&nbsp;OpenFile&nbsp;opens&nbsp;a&nbsp;file&nbsp;(not&nbsp;a&nbsp;directory)&nbsp;for&nbsp;reading.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5903645">//&nbsp;If&nbsp;OpenFile&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;os.Open.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5903690">OpenFile</span>&nbsp;<span class="keyword" id="5903699">func</span><span class="op" id="5903703">(</span><span class="ident" id="5903704">path</span>&nbsp;<span class="builtintype" id="5903709">string</span><span class="op" id="5903715">)</span>&nbsp;<span class="op" id="5903717">(</span><span class="ident" id="5903718">r</span>&nbsp;<span class="ident" id="5903720"><a href="/gostd/go/build/build.go.html#5900478">io</a></span><span class="op" id="5903722">.</span><span class="ident" id="5903723"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><span class="op" id="5903733">,</span>&nbsp;<span class="ident" id="5903735">err</span>&nbsp;<span class="builtintype" id="5903739">error</span><span class="op" id="5903744">)</span><br>
<span class="lineno">95</span><span class="op" id="5903746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5903749">//&nbsp;joinPath&nbsp;calls&nbsp;ctxt.JoinPath&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.Join.</span><br>
<span class="lineno"></span><span class="keyword" id="5903817">func</span>&nbsp;<span class="op" id="5903822">(</span><span class="ident" id="5903823">ctxt</span>&nbsp;<span class="op" id="5903828">*</span><span class="ident" id="5903829"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5903836">)</span>&nbsp;<span class="ident" id="5903838">joinPath</span><span class="op" id="5903846">(</span><span class="ident" id="5903847">elem</span>&nbsp;<span class="op" id="5903852">...</span><span class="builtintype" id="5903855">string</span><span class="op" id="5903861">)</span>&nbsp;<span class="builtintype" id="5903863">string</span>&nbsp;<span class="op" id="5903870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5903873">if</span>&nbsp;<span class="ident" id="5903876">f</span>&nbsp;<span class="op" id="5903878">:=</span>&nbsp;<span class="ident" id="5903881"><a href="/gostd/go/build/build.go.html#5903823">ctxt</a></span><span class="op" id="5903885">.</span><span class="ident" id="5903886"><a href="/gostd/go/build/build.go.html#5902477">JoinPath</a></span><span class="op" id="5903894">;</span>&nbsp;<span class="ident" id="5903896"><a href="/gostd/go/build/build.go.html#5903876">f</a></span>&nbsp;<span class="op" id="5903898">!=</span>&nbsp;<span class="builtintype" id="5903901">nil</span>&nbsp;<span class="op" id="5903905">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5903909">return</span>&nbsp;<span class="ident" id="5903916"><a href="/gostd/go/build/build.go.html#5903876">f</a></span><span class="op" id="5903917">(</span><span class="ident" id="5903918"><a href="/gostd/go/build/build.go.html#5903847">elem</a></span><span class="op" id="5903922">...</span><span class="op" id="5903925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5903928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5903931">return</span>&nbsp;<span class="ident" id="5903938"><a href="/gostd/go/build/build.go.html#5900526">filepath</a></span><span class="op" id="5903946">.</span><span class="ident" id="5903947"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="5903951">(</span><span class="ident" id="5903952"><a href="/gostd/go/build/build.go.html#5903847">elem</a></span><span class="op" id="5903956">...</span><span class="op" id="5903959">)</span><br>
<span class="lineno"></span><span class="op" id="5903961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5903964">//&nbsp;splitPathList&nbsp;calls&nbsp;ctxt.SplitPathList&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.SplitList.</span><br>
<span class="lineno"></span><span class="keyword" id="5904047">func</span>&nbsp;<span class="op" id="5904052">(</span><span class="ident" id="5904053">ctxt</span>&nbsp;<span class="op" id="5904058">*</span><span class="ident" id="5904059"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5904066">)</span>&nbsp;<span class="ident" id="5904068">splitPathList</span><span class="op" id="5904081">(</span><span class="ident" id="5904082">s</span>&nbsp;<span class="builtintype" id="5904084">string</span><span class="op" id="5904090">)</span>&nbsp;<span class="op" id="5904092">[</span><span class="op" id="5904093">]</span><span class="builtintype" id="5904094">string</span>&nbsp;<span class="op" id="5904101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904104">if</span>&nbsp;<span class="ident" id="5904107">f</span>&nbsp;<span class="op" id="5904109">:=</span>&nbsp;<span class="ident" id="5904112"><a href="/gostd/go/build/build.go.html#5904053">ctxt</a></span><span class="op" id="5904116">.</span><span class="ident" id="5904117"><a href="/gostd/go/build/build.go.html#5902650">SplitPathList</a></span><span class="op" id="5904130">;</span>&nbsp;<span class="ident" id="5904132"><a href="/gostd/go/build/build.go.html#5904107">f</a></span>&nbsp;<span class="op" id="5904134">!=</span>&nbsp;<span class="builtintype" id="5904137">nil</span>&nbsp;<span class="op" id="5904141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904145">return</span>&nbsp;<span class="ident" id="5904152"><a href="/gostd/go/build/build.go.html#5904107">f</a></span><span class="op" id="5904153">(</span><span class="ident" id="5904154"><a href="/gostd/go/build/build.go.html#5904082">s</a></span><span class="op" id="5904155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5904158">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904161">return</span>&nbsp;<span class="ident" id="5904168"><a href="/gostd/go/build/build.go.html#5900526">filepath</a></span><span class="op" id="5904176">.</span><span class="ident" id="5904177"><a href="/gostd/path/filepath/path.go.html#3782901">SplitList</a></span><span class="op" id="5904186">(</span><span class="ident" id="5904187"><a href="/gostd/go/build/build.go.html#5904082">s</a></span><span class="op" id="5904188">)</span><br>
<span class="lineno"></span><span class="op" id="5904190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5904193">//&nbsp;isAbsPath&nbsp;calls&nbsp;ctxt.IsAbsSPath&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.IsAbs.</span><br>
<span class="lineno"></span><span class="keyword" id="5904265">func</span>&nbsp;<span class="op" id="5904270">(</span><span class="ident" id="5904271">ctxt</span>&nbsp;<span class="op" id="5904276">*</span><span class="ident" id="5904277"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5904284">)</span>&nbsp;<span class="ident" id="5904286">isAbsPath</span><span class="op" id="5904295">(</span><span class="ident" id="5904296">path</span>&nbsp;<span class="builtintype" id="5904301">string</span><span class="op" id="5904307">)</span>&nbsp;<span class="builtintype" id="5904309">bool</span>&nbsp;<span class="op" id="5904314">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904317">if</span>&nbsp;<span class="ident" id="5904320">f</span>&nbsp;<span class="op" id="5904322">:=</span>&nbsp;<span class="ident" id="5904325"><a href="/gostd/go/build/build.go.html#5904271">ctxt</a></span><span class="op" id="5904329">.</span><span class="ident" id="5904330"><a href="/gostd/go/build/build.go.html#5902802">IsAbsPath</a></span><span class="op" id="5904339">;</span>&nbsp;<span class="ident" id="5904341"><a href="/gostd/go/build/build.go.html#5904320">f</a></span>&nbsp;<span class="op" id="5904343">!=</span>&nbsp;<span class="builtintype" id="5904346">nil</span>&nbsp;<span class="op" id="5904350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904354">return</span>&nbsp;<span class="ident" id="5904361"><a href="/gostd/go/build/build.go.html#5904320">f</a></span><span class="op" id="5904362">(</span><span class="ident" id="5904363"><a href="/gostd/go/build/build.go.html#5904296">path</a></span><span class="op" id="5904367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5904370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904373">return</span>&nbsp;<span class="ident" id="5904380"><a href="/gostd/go/build/build.go.html#5900526">filepath</a></span><span class="op" id="5904388">.</span><span class="ident" id="5904389"><a href="/gostd/path/filepath/path_unix.go.html#3791616">IsAbs</a></span><span class="op" id="5904394">(</span><span class="ident" id="5904395"><a href="/gostd/go/build/build.go.html#5904296">path</a></span><span class="op" id="5904399">)</span><br>
<span class="lineno"></span><span class="op" id="5904401">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5904404">//&nbsp;isDir&nbsp;calls&nbsp;ctxt.IsDir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;uses&nbsp;os.Stat.</span><br>
<span class="lineno"></span><span class="keyword" id="5904465">func</span>&nbsp;<span class="op" id="5904470">(</span><span class="ident" id="5904471">ctxt</span>&nbsp;<span class="op" id="5904476">*</span><span class="ident" id="5904477"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5904484">)</span>&nbsp;<span class="ident" id="5904486">isDir</span><span class="op" id="5904491">(</span><span class="ident" id="5904492">path</span>&nbsp;<span class="builtintype" id="5904497">string</span><span class="op" id="5904503">)</span>&nbsp;<span class="builtintype" id="5904505">bool</span>&nbsp;<span class="op" id="5904510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904513">if</span>&nbsp;<span class="ident" id="5904516">f</span>&nbsp;<span class="op" id="5904518">:=</span>&nbsp;<span class="ident" id="5904521"><a href="/gostd/go/build/build.go.html#5904471">ctxt</a></span><span class="op" id="5904525">.</span><span class="ident" id="5904526"><a href="/gostd/go/build/build.go.html#5902969">IsDir</a></span><span class="op" id="5904531">;</span>&nbsp;<span class="ident" id="5904533"><a href="/gostd/go/build/build.go.html#5904516">f</a></span>&nbsp;<span class="op" id="5904535">!=</span>&nbsp;<span class="builtintype" id="5904538">nil</span>&nbsp;<span class="op" id="5904542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904546">return</span>&nbsp;<span class="ident" id="5904553"><a href="/gostd/go/build/build.go.html#5904516">f</a></span><span class="op" id="5904554">(</span><span class="ident" id="5904555"><a href="/gostd/go/build/build.go.html#5904492">path</a></span><span class="op" id="5904559">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5904562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5904565">fi</span><span class="op" id="5904567">,</span>&nbsp;<span class="ident" id="5904569">err</span>&nbsp;<span class="op" id="5904573">:=</span>&nbsp;<span class="ident" id="5904576"><a href="/gostd/go/build/build.go.html#5900504">os</a></span><span class="op" id="5904578">.</span><span class="ident" id="5904579"><a href="/gostd/os/file_unix.go.html#2455511">Stat</a></span><span class="op" id="5904583">(</span><span class="ident" id="5904584"><a href="/gostd/go/build/build.go.html#5904492">path</a></span><span class="op" id="5904588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904591">return</span>&nbsp;<span class="ident" id="5904598"><a href="/gostd/go/build/build.go.html#5904569">err</a></span>&nbsp;<span class="op" id="5904602">==</span>&nbsp;<span class="builtintype" id="5904605">nil</span>&nbsp;<span class="op" id="5904609">&amp;&amp;</span>&nbsp;<span class="ident" id="5904612"><a href="/gostd/go/build/build.go.html#5904565">fi</a></span><span class="op" id="5904614">.</span><span class="ident" id="5904615"><a href="/gostd/os/types.go.html#2472696">IsDir</a></span><span class="op" id="5904620">(</span><span class="op" id="5904621">)</span><br>
<span class="lineno"></span><span class="op" id="5904623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="5904626">//&nbsp;hasSubdir&nbsp;calls&nbsp;ctxt.HasSubdir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;uses</span><br>
<span class="lineno"></span><span class="comment" id="5904686">//&nbsp;the&nbsp;local&nbsp;file&nbsp;system&nbsp;to&nbsp;answer&nbsp;the&nbsp;question.</span><br>
<span class="lineno"></span><span class="keyword" id="5904735">func</span>&nbsp;<span class="op" id="5904740">(</span><span class="ident" id="5904741">ctxt</span>&nbsp;<span class="op" id="5904746">*</span><span class="ident" id="5904747"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5904754">)</span>&nbsp;<span class="ident" id="5904756">hasSubdir</span><span class="op" id="5904765">(</span><span class="ident" id="5904766">root</span><span class="op" id="5904770">,</span>&nbsp;<span class="ident" id="5904772">dir</span>&nbsp;<span class="builtintype" id="5904776">string</span><span class="op" id="5904782">)</span>&nbsp;<span class="op" id="5904784">(</span><span class="ident" id="5904785">rel</span>&nbsp;<span class="builtintype" id="5904789">string</span><span class="op" id="5904795">,</span>&nbsp;<span class="ident" id="5904797">ok</span>&nbsp;<span class="builtintype" id="5904800">bool</span><span class="op" id="5904804">)</span>&nbsp;<span class="op" id="5904806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904809">if</span>&nbsp;<span class="ident" id="5904812">f</span>&nbsp;<span class="op" id="5904814">:=</span>&nbsp;<span class="ident" id="5904817"><a href="/gostd/go/build/build.go.html#5904741">ctxt</a></span><span class="op" id="5904821">.</span><span class="ident" id="5904822"><a href="/gostd/go/build/build.go.html#5903312">HasSubdir</a></span><span class="op" id="5904831">;</span>&nbsp;<span class="ident" id="5904833"><a href="/gostd/go/build/build.go.html#5904812">f</a></span>&nbsp;<span class="op" id="5904835">!=</span>&nbsp;<span class="builtintype" id="5904838">nil</span>&nbsp;<span class="op" id="5904842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904846">return</span>&nbsp;<span class="ident" id="5904853"><a href="/gostd/go/build/build.go.html#5904812">f</a></span><span class="op" id="5904854">(</span><span class="ident" id="5904855"><a href="/gostd/go/build/build.go.html#5904766">root</a></span><span class="op" id="5904859">,</span>&nbsp;<span class="ident" id="5904861"><a href="/gostd/go/build/build.go.html#5904772">dir</a></span><span class="op" id="5904864">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5904867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5904871">//&nbsp;Try&nbsp;using&nbsp;paths&nbsp;we&nbsp;received.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904904">if</span>&nbsp;<span class="ident" id="5904907"><a href="/gostd/go/build/build.go.html#5904785">rel</a></span><span class="op" id="5904910">,</span>&nbsp;<span class="ident" id="5904912"><a href="/gostd/go/build/build.go.html#5904797">ok</a></span>&nbsp;<span class="op" id="5904915">=</span>&nbsp;<span class="ident" id="5904917"><a href="/gostd/go/build/build.go.html#5905305">hasSubdir</a></span><span class="op" id="5904926">(</span><span class="ident" id="5904927"><a href="/gostd/go/build/build.go.html#5904766">root</a></span><span class="op" id="5904931">,</span>&nbsp;<span class="ident" id="5904933"><a href="/gostd/go/build/build.go.html#5904772">dir</a></span><span class="op" id="5904936">)</span><span class="op" id="5904937">;</span>&nbsp;<span class="ident" id="5904939"><a href="/gostd/go/build/build.go.html#5904797">ok</a></span>&nbsp;<span class="op" id="5904942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5904946">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5904954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5904958">//&nbsp;Try&nbsp;expanding&nbsp;symlinks&nbsp;and&nbsp;comparing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5904999">//&nbsp;expanded&nbsp;against&nbsp;unexpanded&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5905035">//&nbsp;expanded&nbsp;against&nbsp;expanded.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5905066">rootSym</span><span class="op" id="5905073">,</span>&nbsp;<span class="ident" id="5905075">_</span>&nbsp;<span class="op" id="5905077">:=</span>&nbsp;<span class="ident" id="5905080"><a href="/gostd/go/build/build.go.html#5900526">filepath</a></span><span class="op" id="5905088">.</span><span class="ident" id="5905089"><a href="/gostd/path/filepath/path.go.html#3784320">EvalSymlinks</a></span><span class="op" id="5905101">(</span><span class="ident" id="5905102"><a href="/gostd/go/build/build.go.html#5904766">root</a></span><span class="op" id="5905106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5905109">dirSym</span><span class="op" id="5905115">,</span>&nbsp;<span class="ident" id="5905117">_</span>&nbsp;<span class="op" id="5905119">:=</span>&nbsp;<span class="ident" id="5905122"><a href="/gostd/go/build/build.go.html#5900526">filepath</a></span><span class="op" id="5905130">.</span><span class="ident" id="5905131"><a href="/gostd/path/filepath/path.go.html#3784320">EvalSymlinks</a></span><span class="op" id="5905143">(</span><span class="ident" id="5905144"><a href="/gostd/go/build/build.go.html#5904772">dir</a></span><span class="op" id="5905147">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905151">if</span>&nbsp;<span class="ident" id="5905154"><a href="/gostd/go/build/build.go.html#5904785">rel</a></span><span class="op" id="5905157">,</span>&nbsp;<span class="ident" id="5905159"><a href="/gostd/go/build/build.go.html#5904797">ok</a></span>&nbsp;<span class="op" id="5905162">=</span>&nbsp;<span class="ident" id="5905164"><a href="/gostd/go/build/build.go.html#5905305">hasSubdir</a></span><span class="op" id="5905173">(</span><span class="ident" id="5905174"><a href="/gostd/go/build/build.go.html#5905066">rootSym</a></span><span class="op" id="5905181">,</span>&nbsp;<span class="ident" id="5905183"><a href="/gostd/go/build/build.go.html#5904772">dir</a></span><span class="op" id="5905186">)</span><span class="op" id="5905187">;</span>&nbsp;<span class="ident" id="5905189"><a href="/gostd/go/build/build.go.html#5904797">ok</a></span>&nbsp;<span class="op" id="5905192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905196">return</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5905204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905207">if</span>&nbsp;<span class="ident" id="5905210"><a href="/gostd/go/build/build.go.html#5904785">rel</a></span><span class="op" id="5905213">,</span>&nbsp;<span class="ident" id="5905215"><a href="/gostd/go/build/build.go.html#5904797">ok</a></span>&nbsp;<span class="op" id="5905218">=</span>&nbsp;<span class="ident" id="5905220"><a href="/gostd/go/build/build.go.html#5905305">hasSubdir</a></span><span class="op" id="5905229">(</span><span class="ident" id="5905230"><a href="/gostd/go/build/build.go.html#5904766">root</a></span><span class="op" id="5905234">,</span>&nbsp;<span class="ident" id="5905236"><a href="/gostd/go/build/build.go.html#5905109">dirSym</a></span><span class="op" id="5905242">)</span><span class="op" id="5905243">;</span>&nbsp;<span class="ident" id="5905245"><a href="/gostd/go/build/build.go.html#5904797">ok</a></span>&nbsp;<span class="op" id="5905248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905252">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5905260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905263">return</span>&nbsp;<span class="ident" id="5905270"><a href="/gostd/go/build/build.go.html#5905305">hasSubdir</a></span><span class="op" id="5905279">(</span><span class="ident" id="5905280"><a href="/gostd/go/build/build.go.html#5905066">rootSym</a></span><span class="op" id="5905287">,</span>&nbsp;<span class="ident" id="5905289"><a href="/gostd/go/build/build.go.html#5905109">dirSym</a></span><span class="op" id="5905295">)</span><br>
<span class="lineno">155</span><span class="op" id="5905297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5905300">func</span>&nbsp;<span class="ident" id="5905305">hasSubdir</span><span class="op" id="5905314">(</span><span class="ident" id="5905315">root</span><span class="op" id="5905319">,</span>&nbsp;<span class="ident" id="5905321">dir</span>&nbsp;<span class="builtintype" id="5905325">string</span><span class="op" id="5905331">)</span>&nbsp;<span class="op" id="5905333">(</span><span class="ident" id="5905334">rel</span>&nbsp;<span class="builtintype" id="5905338">string</span><span class="op" id="5905344">,</span>&nbsp;<span class="ident" id="5905346">ok</span>&nbsp;<span class="builtintype" id="5905349">bool</span><span class="op" id="5905353">)</span>&nbsp;<span class="op" id="5905355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905358">const</span>&nbsp;<span class="ident" id="5905364">sep</span>&nbsp;<span class="op" id="5905368">=</span>&nbsp;<span class="builtintype" id="5905370">string</span><span class="op" id="5905376">(</span><span class="ident" id="5905377"><a href="/gostd/go/build/build.go.html#5900526">filepath</a></span><span class="op" id="5905385">.</span><span class="ident" id="5905386"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><span class="op" id="5905395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5905398"><a href="/gostd/go/build/build.go.html#5905315">root</a></span>&nbsp;<span class="op" id="5905403">=</span>&nbsp;<span class="ident" id="5905405"><a href="/gostd/go/build/build.go.html#5900526">filepath</a></span><span class="op" id="5905413">.</span><span class="ident" id="5905414"><a href="/gostd/path/filepath/path.go.html#3780312">Clean</a></span><span class="op" id="5905419">(</span><span class="ident" id="5905420"><a href="/gostd/go/build/build.go.html#5905315">root</a></span><span class="op" id="5905424">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905427">if</span>&nbsp;<span class="op" id="5905430">!</span><span class="ident" id="5905431"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5905438">.</span><span class="ident" id="5905439"><a href="/gostd/strings/strings.go.html#2975527">HasSuffix</a></span><span class="op" id="5905448">(</span><span class="ident" id="5905449"><a href="/gostd/go/build/build.go.html#5905315">root</a></span><span class="op" id="5905453">,</span>&nbsp;<span class="ident" id="5905455"><a href="/gostd/go/build/build.go.html#5905364">sep</a></span><span class="op" id="5905458">)</span>&nbsp;<span class="op" id="5905460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5905464"><a href="/gostd/go/build/build.go.html#5905315">root</a></span>&nbsp;<span class="op" id="5905469">+=</span>&nbsp;<span class="ident" id="5905472"><a href="/gostd/go/build/build.go.html#5905364">sep</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5905477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5905480"><a href="/gostd/go/build/build.go.html#5905321">dir</a></span>&nbsp;<span class="op" id="5905484">=</span>&nbsp;<span class="ident" id="5905486"><a href="/gostd/go/build/build.go.html#5900526">filepath</a></span><span class="op" id="5905494">.</span><span class="ident" id="5905495"><a href="/gostd/path/filepath/path.go.html#3780312">Clean</a></span><span class="op" id="5905500">(</span><span class="ident" id="5905501"><a href="/gostd/go/build/build.go.html#5905321">dir</a></span><span class="op" id="5905504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905507">if</span>&nbsp;<span class="op" id="5905510">!</span><span class="ident" id="5905511"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5905518">.</span><span class="ident" id="5905519"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5905528">(</span><span class="ident" id="5905529"><a href="/gostd/go/build/build.go.html#5905321">dir</a></span><span class="op" id="5905532">,</span>&nbsp;<span class="ident" id="5905534"><a href="/gostd/go/build/build.go.html#5905315">root</a></span><span class="op" id="5905538">)</span>&nbsp;<span class="op" id="5905540">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905544">return</span>&nbsp;<span class="string" id="5905551">&#34;&#34;</span><span class="op" id="5905553">,</span>&nbsp;<span class="builtintype" id="5905555">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5905562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905565">return</span>&nbsp;<span class="ident" id="5905572"><a href="/gostd/go/build/build.go.html#5900526">filepath</a></span><span class="op" id="5905580">.</span><span class="ident" id="5905581"><a href="/gostd/path/filepath/path.go.html#3782237">ToSlash</a></span><span class="op" id="5905588">(</span><span class="ident" id="5905589"><a href="/gostd/go/build/build.go.html#5905321">dir</a></span><span class="op" id="5905592">[</span><span class="builtinfunc" id="5905593">len</span><span class="op" id="5905596">(</span><span class="ident" id="5905597"><a href="/gostd/go/build/build.go.html#5905315">root</a></span><span class="op" id="5905601">)</span><span class="op" id="5905602">:</span><span class="op" id="5905603">]</span><span class="op" id="5905604">)</span><span class="op" id="5905605">,</span>&nbsp;<span class="builtintype" id="5905607">true</span><br>
<span class="lineno"></span><span class="op" id="5905612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="comment" id="5905615">//&nbsp;readDir&nbsp;calls&nbsp;ctxt.ReadDir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;ioutil.ReadDir.</span><br>
<span class="lineno"></span><span class="keyword" id="5905682">func</span>&nbsp;<span class="op" id="5905687">(</span><span class="ident" id="5905688">ctxt</span>&nbsp;<span class="op" id="5905693">*</span><span class="ident" id="5905694"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5905701">)</span>&nbsp;<span class="ident" id="5905703">readDir</span><span class="op" id="5905710">(</span><span class="ident" id="5905711">path</span>&nbsp;<span class="builtintype" id="5905716">string</span><span class="op" id="5905722">)</span>&nbsp;<span class="op" id="5905724">(</span><span class="op" id="5905725">[</span><span class="op" id="5905726">]</span><span class="ident" id="5905727"><a href="/gostd/go/build/build.go.html#5900504">os</a></span><span class="op" id="5905729">.</span><span class="ident" id="5905730"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="5905738">,</span>&nbsp;<span class="builtintype" id="5905740">error</span><span class="op" id="5905745">)</span>&nbsp;<span class="op" id="5905747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905750">if</span>&nbsp;<span class="ident" id="5905753">f</span>&nbsp;<span class="op" id="5905755">:=</span>&nbsp;<span class="ident" id="5905758"><a href="/gostd/go/build/build.go.html#5905688">ctxt</a></span><span class="op" id="5905762">.</span><span class="ident" id="5905763"><a href="/gostd/go/build/build.go.html#5903531">ReadDir</a></span><span class="op" id="5905770">;</span>&nbsp;<span class="ident" id="5905772"><a href="/gostd/go/build/build.go.html#5905753">f</a></span>&nbsp;<span class="op" id="5905774">!=</span>&nbsp;<span class="builtintype" id="5905777">nil</span>&nbsp;<span class="op" id="5905781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905785">return</span>&nbsp;<span class="ident" id="5905792"><a href="/gostd/go/build/build.go.html#5905753">f</a></span><span class="op" id="5905793">(</span><span class="ident" id="5905794"><a href="/gostd/go/build/build.go.html#5905711">path</a></span><span class="op" id="5905798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5905801">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905804">return</span>&nbsp;<span class="ident" id="5905811"><a href="/gostd/go/build/build.go.html#5900484">ioutil</a></span><span class="op" id="5905817">.</span><span class="ident" id="5905818"><a href="/gostd/io/ioutil/ioutil.go.html#3767178">ReadDir</a></span><span class="op" id="5905825">(</span><span class="ident" id="5905826"><a href="/gostd/go/build/build.go.html#5905711">path</a></span><span class="op" id="5905830">)</span><br>
<span class="lineno"></span><span class="op" id="5905832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5905835">//&nbsp;openFile&nbsp;calls&nbsp;ctxt.OpenFile&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;os.Open.</span><br>
<span class="lineno"></span><span class="keyword" id="5905897">func</span>&nbsp;<span class="op" id="5905902">(</span><span class="ident" id="5905903">ctxt</span>&nbsp;<span class="op" id="5905908">*</span><span class="ident" id="5905909"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5905916">)</span>&nbsp;<span class="ident" id="5905918">openFile</span><span class="op" id="5905926">(</span><span class="ident" id="5905927">path</span>&nbsp;<span class="builtintype" id="5905932">string</span><span class="op" id="5905938">)</span>&nbsp;<span class="op" id="5905940">(</span><span class="ident" id="5905941"><a href="/gostd/go/build/build.go.html#5900478">io</a></span><span class="op" id="5905943">.</span><span class="ident" id="5905944"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><span class="op" id="5905954">,</span>&nbsp;<span class="builtintype" id="5905956">error</span><span class="op" id="5905961">)</span>&nbsp;<span class="op" id="5905963">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5905966">if</span>&nbsp;<span class="ident" id="5905969">fn</span>&nbsp;<span class="op" id="5905972">:=</span>&nbsp;<span class="ident" id="5905975"><a href="/gostd/go/build/build.go.html#5905903">ctxt</a></span><span class="op" id="5905979">.</span><span class="ident" id="5905980"><a href="/gostd/go/build/build.go.html#5903690">OpenFile</a></span><span class="op" id="5905988">;</span>&nbsp;<span class="ident" id="5905990"><a href="/gostd/go/build/build.go.html#5905969">fn</a></span>&nbsp;<span class="op" id="5905993">!=</span>&nbsp;<span class="builtintype" id="5905996">nil</span>&nbsp;<span class="op" id="5906000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906004">return</span>&nbsp;<span class="ident" id="5906011"><a href="/gostd/go/build/build.go.html#5905969">fn</a></span><span class="op" id="5906013">(</span><span class="ident" id="5906014"><a href="/gostd/go/build/build.go.html#5905927">path</a></span><span class="op" id="5906018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5906021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5906025">f</span><span class="op" id="5906026">,</span>&nbsp;<span class="ident" id="5906028">err</span>&nbsp;<span class="op" id="5906032">:=</span>&nbsp;<span class="ident" id="5906035"><a href="/gostd/go/build/build.go.html#5900504">os</a></span><span class="op" id="5906037">.</span><span class="ident" id="5906038"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="5906042">(</span><span class="ident" id="5906043"><a href="/gostd/go/build/build.go.html#5905927">path</a></span><span class="op" id="5906047">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906050">if</span>&nbsp;<span class="ident" id="5906053"><a href="/gostd/go/build/build.go.html#5906028">err</a></span>&nbsp;<span class="op" id="5906057">!=</span>&nbsp;<span class="builtintype" id="5906060">nil</span>&nbsp;<span class="op" id="5906064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906068">return</span>&nbsp;<span class="builtintype" id="5906075">nil</span><span class="op" id="5906078">,</span>&nbsp;<span class="ident" id="5906080"><a href="/gostd/go/build/build.go.html#5906028">err</a></span>&nbsp;<span class="comment" id="5906084">//&nbsp;nil&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5906102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906105">return</span>&nbsp;<span class="ident" id="5906112"><a href="/gostd/go/build/build.go.html#5906025">f</a></span><span class="op" id="5906113">,</span>&nbsp;<span class="builtintype" id="5906115">nil</span><br>
<span class="lineno"></span><span class="op" id="5906119">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5906122">//&nbsp;isFile&nbsp;determines&nbsp;whether&nbsp;path&nbsp;is&nbsp;a&nbsp;file&nbsp;by&nbsp;trying&nbsp;to&nbsp;open&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="5906188">//&nbsp;It&nbsp;reuses&nbsp;openFile&nbsp;instead&nbsp;of&nbsp;adding&nbsp;another&nbsp;function&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5906252">//&nbsp;list&nbsp;in&nbsp;Context.</span><br>
<span class="lineno"></span><span class="keyword" id="5906272">func</span>&nbsp;<span class="op" id="5906277">(</span><span class="ident" id="5906278">ctxt</span>&nbsp;<span class="op" id="5906283">*</span><span class="ident" id="5906284"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5906291">)</span>&nbsp;<span class="ident" id="5906293">isFile</span><span class="op" id="5906299">(</span><span class="ident" id="5906300">path</span>&nbsp;<span class="builtintype" id="5906305">string</span><span class="op" id="5906311">)</span>&nbsp;<span class="builtintype" id="5906313">bool</span>&nbsp;<span class="op" id="5906318">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5906321">f</span><span class="op" id="5906322">,</span>&nbsp;<span class="ident" id="5906324">err</span>&nbsp;<span class="op" id="5906328">:=</span>&nbsp;<span class="ident" id="5906331"><a href="/gostd/go/build/build.go.html#5906278">ctxt</a></span><span class="op" id="5906335">.</span><span class="ident" id="5906336"><a href="/gostd/go/build/build.go.html#5905918">openFile</a></span><span class="op" id="5906344">(</span><span class="ident" id="5906345"><a href="/gostd/go/build/build.go.html#5906300">path</a></span><span class="op" id="5906349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906352">if</span>&nbsp;<span class="ident" id="5906355"><a href="/gostd/go/build/build.go.html#5906324">err</a></span>&nbsp;<span class="op" id="5906359">!=</span>&nbsp;<span class="builtintype" id="5906362">nil</span>&nbsp;<span class="op" id="5906366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906370">return</span>&nbsp;<span class="builtintype" id="5906377">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5906384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5906387"><a href="/gostd/go/build/build.go.html#5906321">f</a></span><span class="op" id="5906388">.</span><span class="ident" id="5906389"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="5906394">(</span><span class="op" id="5906395">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906398">return</span>&nbsp;<span class="builtintype" id="5906405">true</span><br>
<span class="lineno"></span><span class="op" id="5906410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5906413">//&nbsp;gopath&nbsp;returns&nbsp;the&nbsp;list&nbsp;of&nbsp;Go&nbsp;path&nbsp;directories.</span><br>
<span class="lineno"></span><span class="keyword" id="5906464">func</span>&nbsp;<span class="op" id="5906469">(</span><span class="ident" id="5906470">ctxt</span>&nbsp;<span class="op" id="5906475">*</span><span class="ident" id="5906476"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5906483">)</span>&nbsp;<span class="ident" id="5906485">gopath</span><span class="op" id="5906491">(</span><span class="op" id="5906492">)</span>&nbsp;<span class="op" id="5906494">[</span><span class="op" id="5906495">]</span><span class="builtintype" id="5906496">string</span>&nbsp;<span class="op" id="5906503">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906506">var</span>&nbsp;<span class="ident" id="5906510">all</span>&nbsp;<span class="op" id="5906514">[</span><span class="op" id="5906515">]</span><span class="builtintype" id="5906516">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906524">for</span>&nbsp;<span class="ident" id="5906528">_</span><span class="op" id="5906529">,</span>&nbsp;<span class="ident" id="5906531">p</span>&nbsp;<span class="op" id="5906533">:=</span>&nbsp;<span class="keyword" id="5906536">range</span>&nbsp;<span class="ident" id="5906542"><a href="/gostd/go/build/build.go.html#5906470">ctxt</a></span><span class="op" id="5906546">.</span><span class="ident" id="5906547"><a href="/gostd/go/build/build.go.html#5904068">splitPathList</a></span><span class="op" id="5906560">(</span><span class="ident" id="5906561"><a href="/gostd/go/build/build.go.html#5906470">ctxt</a></span><span class="op" id="5906565">.</span><span class="ident" id="5906566"><a href="/gostd/go/build/build.go.html#5900816">GOPATH</a></span><span class="op" id="5906572">)</span>&nbsp;<span class="op" id="5906574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906578">if</span>&nbsp;<span class="ident" id="5906581"><a href="/gostd/go/build/build.go.html#5906531">p</a></span>&nbsp;<span class="op" id="5906583">==</span>&nbsp;<span class="string" id="5906586">&#34;&#34;</span>&nbsp;<span class="op" id="5906589">||</span>&nbsp;<span class="ident" id="5906592"><a href="/gostd/go/build/build.go.html#5906531">p</a></span>&nbsp;<span class="op" id="5906594">==</span>&nbsp;<span class="ident" id="5906597"><a href="/gostd/go/build/build.go.html#5906470">ctxt</a></span><span class="op" id="5906601">.</span><span class="ident" id="5906602"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span>&nbsp;<span class="op" id="5906609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5906614">//&nbsp;Empty&nbsp;paths&nbsp;are&nbsp;uninteresting.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5906651">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;the&nbsp;GOROOT,&nbsp;ignore&nbsp;it.</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5906695">//&nbsp;People&nbsp;sometimes&nbsp;set&nbsp;GOPATH=$GOROOT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5906738">//&nbsp;Do&nbsp;not&nbsp;get&nbsp;confused&nbsp;by&nbsp;this&nbsp;common&nbsp;mistake.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906788">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5906799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5906803">if</span>&nbsp;<span class="ident" id="5906806"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5906813">.</span><span class="ident" id="5906814"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5906823">(</span><span class="ident" id="5906824"><a href="/gostd/go/build/build.go.html#5906531">p</a></span><span class="op" id="5906825">,</span>&nbsp;<span class="string" id="5906827">&#34;~&#34;</span><span class="op" id="5906830">)</span>&nbsp;<span class="op" id="5906832">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5906837">//&nbsp;Path&nbsp;segments&nbsp;starting&nbsp;with&nbsp;~&nbsp;on&nbsp;Unix&nbsp;are&nbsp;almost&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5906899">//&nbsp;users&nbsp;who&nbsp;have&nbsp;incorrectly&nbsp;quoted&nbsp;~&nbsp;while&nbsp;setting&nbsp;GOPATH,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5906963">//&nbsp;preventing&nbsp;it&nbsp;from&nbsp;expanding&nbsp;to&nbsp;$HOME.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5907008">//&nbsp;The&nbsp;situation&nbsp;is&nbsp;made&nbsp;more&nbsp;confusing&nbsp;by&nbsp;the&nbsp;fact&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5907068">//&nbsp;bash&nbsp;allows&nbsp;quoted&nbsp;~&nbsp;in&nbsp;$PATH&nbsp;(most&nbsp;shells&nbsp;do&nbsp;not).</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5907126">//&nbsp;Do&nbsp;not&nbsp;get&nbsp;confused&nbsp;by&nbsp;this,&nbsp;and&nbsp;do&nbsp;not&nbsp;try&nbsp;to&nbsp;use&nbsp;the&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5907193">//&nbsp;It&nbsp;does&nbsp;not&nbsp;exist,&nbsp;and&nbsp;printing&nbsp;errors&nbsp;about&nbsp;it&nbsp;confuses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5907256">//&nbsp;those&nbsp;users&nbsp;even&nbsp;more,&nbsp;because&nbsp;they&nbsp;think&nbsp;&#34;sure&nbsp;~&nbsp;exists!&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5907322">//&nbsp;The&nbsp;go&nbsp;command&nbsp;diagnoses&nbsp;this&nbsp;situation&nbsp;and&nbsp;prints&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5907381">//&nbsp;useful&nbsp;error.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5907401">//&nbsp;On&nbsp;Windows,&nbsp;~&nbsp;is&nbsp;used&nbsp;in&nbsp;short&nbsp;names,&nbsp;such&nbsp;as&nbsp;c:\progra~1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5907465">//&nbsp;for&nbsp;c:\program&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5907493">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5907504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5907508"><a href="/gostd/go/build/build.go.html#5906510">all</a></span>&nbsp;<span class="op" id="5907512">=</span>&nbsp;<span class="builtinfunc" id="5907514">append</span><span class="op" id="5907520">(</span><span class="ident" id="5907521"><a href="/gostd/go/build/build.go.html#5906510">all</a></span><span class="op" id="5907524">,</span>&nbsp;<span class="ident" id="5907526"><a href="/gostd/go/build/build.go.html#5906531">p</a></span><span class="op" id="5907527">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5907530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5907533">return</span>&nbsp;<span class="ident" id="5907540"><a href="/gostd/go/build/build.go.html#5906510">all</a></span><br>
<span class="lineno"></span><span class="op" id="5907544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5907547">//&nbsp;SrcDirs&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;package&nbsp;source&nbsp;root&nbsp;directories.</span><br>
<span class="lineno">235</span><span class="comment" id="5907609">//&nbsp;It&nbsp;draws&nbsp;from&nbsp;the&nbsp;current&nbsp;Go&nbsp;root&nbsp;and&nbsp;Go&nbsp;path&nbsp;but&nbsp;omits&nbsp;directories</span><br>
<span class="lineno"></span><span class="comment" id="5907680">//&nbsp;that&nbsp;do&nbsp;not&nbsp;exist.</span><br>
<span class="lineno"></span><span class="keyword" id="5907702">func</span>&nbsp;<span class="op" id="5907707">(</span><span class="ident" id="5907708">ctxt</span>&nbsp;<span class="op" id="5907713">*</span><span class="ident" id="5907714"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5907721">)</span>&nbsp;<span class="ident" id="5907723">SrcDirs</span><span class="op" id="5907730">(</span><span class="op" id="5907731">)</span>&nbsp;<span class="op" id="5907733">[</span><span class="op" id="5907734">]</span><span class="builtintype" id="5907735">string</span>&nbsp;<span class="op" id="5907742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5907745">var</span>&nbsp;<span class="ident" id="5907749">all</span>&nbsp;<span class="op" id="5907753">[</span><span class="op" id="5907754">]</span><span class="builtintype" id="5907755">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5907763">if</span>&nbsp;<span class="ident" id="5907766"><a href="/gostd/go/build/build.go.html#5907708">ctxt</a></span><span class="op" id="5907770">.</span><span class="ident" id="5907771"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span>&nbsp;<span class="op" id="5907778">!=</span>&nbsp;<span class="string" id="5907781">&#34;&#34;</span>&nbsp;<span class="op" id="5907784">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5907788">dir</span>&nbsp;<span class="op" id="5907792">:=</span>&nbsp;<span class="ident" id="5907795"><a href="/gostd/go/build/build.go.html#5907708">ctxt</a></span><span class="op" id="5907799">.</span><span class="ident" id="5907800"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5907808">(</span><span class="ident" id="5907809"><a href="/gostd/go/build/build.go.html#5907708">ctxt</a></span><span class="op" id="5907813">.</span><span class="ident" id="5907814"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span><span class="op" id="5907820">,</span>&nbsp;<span class="string" id="5907822">&#34;src&#34;</span><span class="op" id="5907827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5907831">if</span>&nbsp;<span class="ident" id="5907834"><a href="/gostd/go/build/build.go.html#5907708">ctxt</a></span><span class="op" id="5907838">.</span><span class="ident" id="5907839"><a href="/gostd/go/build/build.go.html#5904486">isDir</a></span><span class="op" id="5907844">(</span><span class="ident" id="5907845"><a href="/gostd/go/build/build.go.html#5907788">dir</a></span><span class="op" id="5907848">)</span>&nbsp;<span class="op" id="5907850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5907855"><a href="/gostd/go/build/build.go.html#5907749">all</a></span>&nbsp;<span class="op" id="5907859">=</span>&nbsp;<span class="builtinfunc" id="5907861">append</span><span class="op" id="5907867">(</span><span class="ident" id="5907868"><a href="/gostd/go/build/build.go.html#5907749">all</a></span><span class="op" id="5907871">,</span>&nbsp;<span class="ident" id="5907873"><a href="/gostd/go/build/build.go.html#5907788">dir</a></span><span class="op" id="5907876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5907880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5907883">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5907886">for</span>&nbsp;<span class="ident" id="5907890">_</span><span class="op" id="5907891">,</span>&nbsp;<span class="ident" id="5907893">p</span>&nbsp;<span class="op" id="5907895">:=</span>&nbsp;<span class="keyword" id="5907898">range</span>&nbsp;<span class="ident" id="5907904"><a href="/gostd/go/build/build.go.html#5907708">ctxt</a></span><span class="op" id="5907908">.</span><span class="ident" id="5907909"><a href="/gostd/go/build/build.go.html#5906485">gopath</a></span><span class="op" id="5907915">(</span><span class="op" id="5907916">)</span>&nbsp;<span class="op" id="5907918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5907922">dir</span>&nbsp;<span class="op" id="5907926">:=</span>&nbsp;<span class="ident" id="5907929"><a href="/gostd/go/build/build.go.html#5907708">ctxt</a></span><span class="op" id="5907933">.</span><span class="ident" id="5907934"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5907942">(</span><span class="ident" id="5907943"><a href="/gostd/go/build/build.go.html#5907893">p</a></span><span class="op" id="5907944">,</span>&nbsp;<span class="string" id="5907946">&#34;src&#34;</span><span class="op" id="5907951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5907955">if</span>&nbsp;<span class="ident" id="5907958"><a href="/gostd/go/build/build.go.html#5907708">ctxt</a></span><span class="op" id="5907962">.</span><span class="ident" id="5907963"><a href="/gostd/go/build/build.go.html#5904486">isDir</a></span><span class="op" id="5907968">(</span><span class="ident" id="5907969"><a href="/gostd/go/build/build.go.html#5907922">dir</a></span><span class="op" id="5907972">)</span>&nbsp;<span class="op" id="5907974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5907979"><a href="/gostd/go/build/build.go.html#5907749">all</a></span>&nbsp;<span class="op" id="5907983">=</span>&nbsp;<span class="builtinfunc" id="5907985">append</span><span class="op" id="5907991">(</span><span class="ident" id="5907992"><a href="/gostd/go/build/build.go.html#5907749">all</a></span><span class="op" id="5907995">,</span>&nbsp;<span class="ident" id="5907997"><a href="/gostd/go/build/build.go.html#5907922">dir</a></span><span class="op" id="5908000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5908004">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5908007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5908010">return</span>&nbsp;<span class="ident" id="5908017"><a href="/gostd/go/build/build.go.html#5907749">all</a></span><br>
<span class="lineno"></span><span class="op" id="5908021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5908024">//&nbsp;Default&nbsp;is&nbsp;the&nbsp;default&nbsp;Context&nbsp;for&nbsp;builds.</span><br>
<span class="lineno">255</span><span class="comment" id="5908070">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;GOARCH,&nbsp;GOOS,&nbsp;GOROOT,&nbsp;and&nbsp;GOPATH&nbsp;environment&nbsp;variables</span><br>
<span class="lineno"></span><span class="comment" id="5908140">//&nbsp;if&nbsp;set,&nbsp;or&nbsp;else&nbsp;the&nbsp;compiled&nbsp;code&#39;s&nbsp;GOARCH,&nbsp;GOOS,&nbsp;and&nbsp;GOROOT.</span><br>
<span class="lineno"></span><span class="keyword" id="5908205">var</span>&nbsp;<span class="ident" id="5908209">Default</span>&nbsp;<span class="ident" id="5908217"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span>&nbsp;<span class="op" id="5908225">=</span>&nbsp;<span class="ident" id="5908227"><a href="/gostd/go/build/build.go.html#5908807">defaultContext</a></span><span class="op" id="5908241">(</span><span class="op" id="5908242">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5908245">var</span>&nbsp;<span class="ident" id="5908249">cgoEnabled</span>&nbsp;<span class="op" id="5908260">=</span>&nbsp;<span class="keyword" id="5908262">map</span><span class="op" id="5908265">[</span><span class="builtintype" id="5908266">string</span><span class="op" id="5908272">]</span><span class="builtintype" id="5908273">bool</span><span class="op" id="5908277">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908280">&#34;darwin/386&#34;</span><span class="op" id="5908292">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908299">true</span><span class="op" id="5908303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908306">&#34;darwin/amd64&#34;</span><span class="op" id="5908320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908325">true</span><span class="op" id="5908329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908332">&#34;dragonfly/386&#34;</span><span class="op" id="5908347">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908351">true</span><span class="op" id="5908355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908358">&#34;dragonfly/amd64&#34;</span><span class="op" id="5908375">:</span>&nbsp;<span class="builtintype" id="5908377">true</span><span class="op" id="5908381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908384">&#34;freebsd/386&#34;</span><span class="op" id="5908397">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908403">true</span><span class="op" id="5908407">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908410">&#34;freebsd/amd64&#34;</span><span class="op" id="5908425">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908429">true</span><span class="op" id="5908433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908436">&#34;freebsd/arm&#34;</span><span class="op" id="5908449">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908455">true</span><span class="op" id="5908459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908462">&#34;linux/386&#34;</span><span class="op" id="5908473">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908481">true</span><span class="op" id="5908485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908488">&#34;linux/amd64&#34;</span><span class="op" id="5908501">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908507">true</span><span class="op" id="5908511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908514">&#34;linux/arm&#34;</span><span class="op" id="5908525">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908533">true</span><span class="op" id="5908537">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908540">&#34;android/386&#34;</span><span class="op" id="5908553">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908559">true</span><span class="op" id="5908563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908566">&#34;android/amd64&#34;</span><span class="op" id="5908581">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908585">true</span><span class="op" id="5908589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908592">&#34;android/arm&#34;</span><span class="op" id="5908605">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908611">true</span><span class="op" id="5908615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908618">&#34;netbsd/386&#34;</span><span class="op" id="5908630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908637">true</span><span class="op" id="5908641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908644">&#34;netbsd/amd64&#34;</span><span class="op" id="5908658">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908663">true</span><span class="op" id="5908667">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908670">&#34;netbsd/arm&#34;</span><span class="op" id="5908682">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908689">true</span><span class="op" id="5908693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908696">&#34;openbsd/386&#34;</span><span class="op" id="5908709">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908715">true</span><span class="op" id="5908719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908722">&#34;openbsd/amd64&#34;</span><span class="op" id="5908737">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908741">true</span><span class="op" id="5908745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908748">&#34;windows/386&#34;</span><span class="op" id="5908761">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908767">true</span><span class="op" id="5908771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5908774">&#34;windows/amd64&#34;</span><span class="op" id="5908789">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5908793">true</span><span class="op" id="5908797">,</span><br>
<span class="lineno">280</span><span class="op" id="5908799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5908802">func</span>&nbsp;<span class="ident" id="5908807">defaultContext</span><span class="op" id="5908821">(</span><span class="op" id="5908822">)</span>&nbsp;<span class="ident" id="5908824"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span>&nbsp;<span class="op" id="5908832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5908835">var</span>&nbsp;<span class="ident" id="5908839">c</span>&nbsp;<span class="ident" id="5908841"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5908851"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5908852">.</span><span class="ident" id="5908853"><a href="/gostd/go/build/build.go.html#5900695">GOARCH</a></span>&nbsp;<span class="op" id="5908860">=</span>&nbsp;<span class="ident" id="5908862"><a href="/gostd/go/build/build.go.html#5909933">envOr</a></span><span class="op" id="5908867">(</span><span class="string" id="5908868">&#34;GOARCH&#34;</span><span class="op" id="5908876">,</span>&nbsp;<span class="ident" id="5908878"><a href="/gostd/go/build/build.go.html#5900543">runtime</a></span><span class="op" id="5908885">.</span><span class="ident" id="5908886"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="5908892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5908895"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5908896">.</span><span class="ident" id="5908897"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span>&nbsp;<span class="op" id="5908902">=</span>&nbsp;<span class="ident" id="5908904"><a href="/gostd/go/build/build.go.html#5909933">envOr</a></span><span class="op" id="5908909">(</span><span class="string" id="5908910">&#34;GOOS&#34;</span><span class="op" id="5908916">,</span>&nbsp;<span class="ident" id="5908918"><a href="/gostd/go/build/build.go.html#5900543">runtime</a></span><span class="op" id="5908925">.</span><span class="ident" id="5908926"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="5908930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5908933"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5908934">.</span><span class="ident" id="5908935"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span>&nbsp;<span class="op" id="5908942">=</span>&nbsp;<span class="ident" id="5908944"><a href="/gostd/go/build/build.go.html#5900543">runtime</a></span><span class="op" id="5908951">.</span><span class="ident" id="5908952"><a href="/gostd/runtime/extern.go.html#1533257">GOROOT</a></span><span class="op" id="5908958">(</span><span class="op" id="5908959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5908962"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5908963">.</span><span class="ident" id="5908964"><a href="/gostd/go/build/build.go.html#5900816">GOPATH</a></span>&nbsp;<span class="op" id="5908971">=</span>&nbsp;<span class="ident" id="5908973"><a href="/gostd/go/build/build.go.html#5909933">envOr</a></span><span class="op" id="5908978">(</span><span class="string" id="5908979">&#34;GOPATH&#34;</span><span class="op" id="5908987">,</span>&nbsp;<span class="string" id="5908989">&#34;&#34;</span><span class="op" id="5908991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5908994"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5908995">.</span><span class="ident" id="5908996"><a href="/gostd/go/build/build.go.html#5900966">Compiler</a></span>&nbsp;<span class="op" id="5909005">=</span>&nbsp;<span class="ident" id="5909007"><a href="/gostd/go/build/build.go.html#5900543">runtime</a></span><span class="op" id="5909014">.</span><span class="ident" id="5909015"><a href="/gostd/runtime/compiler.go.html#1506834">Compiler</a></span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5909026">//&nbsp;Each&nbsp;major&nbsp;Go&nbsp;release&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.x&nbsp;series&nbsp;should&nbsp;add&nbsp;a&nbsp;tag&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5909096">//&nbsp;Old&nbsp;tags&nbsp;should&nbsp;not&nbsp;be&nbsp;removed.&nbsp;That&nbsp;is,&nbsp;the&nbsp;go1.x&nbsp;tag&nbsp;is&nbsp;present</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5909166">//&nbsp;in&nbsp;all&nbsp;releases&nbsp;&gt;=&nbsp;Go&nbsp;1.x.&nbsp;Code&nbsp;that&nbsp;requires&nbsp;Go&nbsp;1.x&nbsp;or&nbsp;later&nbsp;should</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5909239">//&nbsp;say&nbsp;&#34;+build&nbsp;go1.x&#34;,&nbsp;and&nbsp;code&nbsp;that&nbsp;should&nbsp;only&nbsp;be&nbsp;built&nbsp;before&nbsp;Go&nbsp;1.x</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5909312">//&nbsp;(perhaps&nbsp;it&nbsp;is&nbsp;the&nbsp;stub&nbsp;to&nbsp;use&nbsp;in&nbsp;that&nbsp;case)&nbsp;should&nbsp;say&nbsp;&#34;+build&nbsp;!go1.x&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5909389">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5909393">//&nbsp;When&nbsp;we&nbsp;reach&nbsp;Go&nbsp;1.5&nbsp;the&nbsp;line&nbsp;will&nbsp;read</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5909437">//&nbsp;&nbsp;&nbsp;&nbsp;c.ReleaseTags&nbsp;=&nbsp;[]string{&#34;go1.1&#34;,&nbsp;&#34;go1.2&#34;,&nbsp;&#34;go1.3&#34;,&nbsp;&#34;go1.4&#34;,&nbsp;&#34;go1.5&#34;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5909511">//&nbsp;and&nbsp;so&nbsp;on.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909526"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5909527">.</span><span class="ident" id="5909528"><a href="/gostd/go/build/build.go.html#5901544">ReleaseTags</a></span>&nbsp;<span class="op" id="5909540">=</span>&nbsp;<span class="op" id="5909542">[</span><span class="op" id="5909543">]</span><span class="builtintype" id="5909544">string</span><span class="op" id="5909550">{</span><span class="string" id="5909551">&#34;go1.1&#34;</span><span class="op" id="5909558">,</span>&nbsp;<span class="string" id="5909560">&#34;go1.2&#34;</span><span class="op" id="5909567">,</span>&nbsp;<span class="string" id="5909569">&#34;go1.3&#34;</span><span class="op" id="5909576">,</span>&nbsp;<span class="string" id="5909578">&#34;go1.4&#34;</span><span class="op" id="5909585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5909589">switch</span>&nbsp;<span class="ident" id="5909596"><a href="/gostd/go/build/build.go.html#5900504">os</a></span><span class="op" id="5909598">.</span><span class="ident" id="5909599"><a href="/gostd/os/env.go.html#2429715">Getenv</a></span><span class="op" id="5909605">(</span><span class="string" id="5909606">&#34;CGO_ENABLED&#34;</span><span class="op" id="5909619">)</span>&nbsp;<span class="op" id="5909621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5909624">case</span>&nbsp;<span class="string" id="5909629">&#34;1&#34;</span><span class="op" id="5909632">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909636"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5909637">.</span><span class="ident" id="5909638"><a href="/gostd/go/build/build.go.html#5900847">CgoEnabled</a></span>&nbsp;<span class="op" id="5909649">=</span>&nbsp;<span class="builtintype" id="5909651">true</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5909657">case</span>&nbsp;<span class="string" id="5909662">&#34;0&#34;</span><span class="op" id="5909665">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909669"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5909670">.</span><span class="ident" id="5909671"><a href="/gostd/go/build/build.go.html#5900847">CgoEnabled</a></span>&nbsp;<span class="op" id="5909682">=</span>&nbsp;<span class="builtintype" id="5909684">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5909691">default</span><span class="op" id="5909698">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5909702">//&nbsp;cgo&nbsp;must&nbsp;be&nbsp;explicitly&nbsp;enabled&nbsp;for&nbsp;cross&nbsp;compilation&nbsp;builds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5909767">if</span>&nbsp;<span class="ident" id="5909770"><a href="/gostd/go/build/build.go.html#5900543">runtime</a></span><span class="op" id="5909777">.</span><span class="ident" id="5909778"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span>&nbsp;<span class="op" id="5909785">==</span>&nbsp;<span class="ident" id="5909788"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5909789">.</span><span class="ident" id="5909790"><a href="/gostd/go/build/build.go.html#5900695">GOARCH</a></span>&nbsp;<span class="op" id="5909797">&amp;&amp;</span>&nbsp;<span class="ident" id="5909800"><a href="/gostd/go/build/build.go.html#5900543">runtime</a></span><span class="op" id="5909807">.</span><span class="ident" id="5909808"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="5909813">==</span>&nbsp;<span class="ident" id="5909816"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5909817">.</span><span class="ident" id="5909818"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span>&nbsp;<span class="op" id="5909823">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909828"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5909829">.</span><span class="ident" id="5909830"><a href="/gostd/go/build/build.go.html#5900847">CgoEnabled</a></span>&nbsp;<span class="op" id="5909841">=</span>&nbsp;<span class="ident" id="5909843"><a href="/gostd/go/build/build.go.html#5908249">cgoEnabled</a></span><span class="op" id="5909853">[</span><span class="ident" id="5909854"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5909855">.</span><span class="ident" id="5909856"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span><span class="op" id="5909860">+</span><span class="string" id="5909861">&#34;/&#34;</span><span class="op" id="5909864">+</span><span class="ident" id="5909865"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5909866">.</span><span class="ident" id="5909867"><a href="/gostd/go/build/build.go.html#5900695">GOARCH</a></span><span class="op" id="5909873">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5909878">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5909886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909890"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><span class="op" id="5909891">.</span><span class="ident" id="5909892"><a href="/gostd/go/build/build.go.html#5900847">CgoEnabled</a></span>&nbsp;<span class="op" id="5909903">=</span>&nbsp;<span class="builtintype" id="5909905">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5909912">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5909916">return</span>&nbsp;<span class="ident" id="5909923"><a href="/gostd/go/build/build.go.html#5908839">c</a></span><br>
<span class="lineno"></span><span class="op" id="5909925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5909928">func</span>&nbsp;<span class="ident" id="5909933">envOr</span><span class="op" id="5909938">(</span><span class="ident" id="5909939">name</span><span class="op" id="5909943">,</span>&nbsp;<span class="ident" id="5909945">def</span>&nbsp;<span class="builtintype" id="5909949">string</span><span class="op" id="5909955">)</span>&nbsp;<span class="builtintype" id="5909957">string</span>&nbsp;<span class="op" id="5909964">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909967">s</span>&nbsp;<span class="op" id="5909969">:=</span>&nbsp;<span class="ident" id="5909972"><a href="/gostd/go/build/build.go.html#5900504">os</a></span><span class="op" id="5909974">.</span><span class="ident" id="5909975"><a href="/gostd/os/env.go.html#2429715">Getenv</a></span><span class="op" id="5909981">(</span><span class="ident" id="5909982"><a href="/gostd/go/build/build.go.html#5909939">name</a></span><span class="op" id="5909986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5909989">if</span>&nbsp;<span class="ident" id="5909992"><a href="/gostd/go/build/build.go.html#5909967">s</a></span>&nbsp;<span class="op" id="5909994">==</span>&nbsp;<span class="string" id="5909997">&#34;&#34;</span>&nbsp;<span class="op" id="5910000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5910004">return</span>&nbsp;<span class="ident" id="5910011"><a href="/gostd/go/build/build.go.html#5909945">def</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5910016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5910019">return</span>&nbsp;<span class="ident" id="5910026"><a href="/gostd/go/build/build.go.html#5909967">s</a></span><br>
<span class="lineno">325</span><span class="op" id="5910028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5910031">//&nbsp;An&nbsp;ImportMode&nbsp;controls&nbsp;the&nbsp;behavior&nbsp;of&nbsp;the&nbsp;Import&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="5910092">type</span>&nbsp;<span class="ident" id="5910097">ImportMode</span>&nbsp;<span class="builtintype" id="5910108">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span><span class="keyword" id="5910114">const</span>&nbsp;<span class="op" id="5910120">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5910123">//&nbsp;If&nbsp;FindOnly&nbsp;is&nbsp;set,&nbsp;Import&nbsp;stops&nbsp;after&nbsp;locating&nbsp;the&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5910189">//&nbsp;that&nbsp;should&nbsp;contain&nbsp;the&nbsp;sources&nbsp;for&nbsp;a&nbsp;package.&nbsp;&nbsp;It&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5910253">//&nbsp;read&nbsp;any&nbsp;files&nbsp;in&nbsp;the&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5910290">FindOnly</span>&nbsp;<span class="ident" id="5910299"><a href="/gostd/go/build/build.go.html#5910097">ImportMode</a></span>&nbsp;<span class="op" id="5910310">=</span>&nbsp;<span class="num" id="5910312">1</span>&nbsp;<span class="op" id="5910314">&lt;&lt;</span>&nbsp;<span class="ident" id="5910317">iota</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5910324">//&nbsp;If&nbsp;AllowBinary&nbsp;is&nbsp;set,&nbsp;Import&nbsp;can&nbsp;be&nbsp;satisfied&nbsp;by&nbsp;a&nbsp;compiled</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5910389">//&nbsp;package&nbsp;object&nbsp;without&nbsp;corresponding&nbsp;sources.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5910439">AllowBinary</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5910453">//&nbsp;If&nbsp;ImportComment&nbsp;is&nbsp;set,&nbsp;parse&nbsp;import&nbsp;comments&nbsp;on&nbsp;package&nbsp;statements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5910527">//&nbsp;Import&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;finds&nbsp;a&nbsp;comment&nbsp;it&nbsp;cannot&nbsp;understand</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5910598">//&nbsp;or&nbsp;finds&nbsp;conflicting&nbsp;comments&nbsp;in&nbsp;multiple&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5910658">//&nbsp;See&nbsp;golang.org/s/go14customimport&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5910718">ImportComment</span><br>
<span class="lineno">345</span><span class="op" id="5910732">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5910735">//&nbsp;A&nbsp;Package&nbsp;describes&nbsp;the&nbsp;Go&nbsp;package&nbsp;found&nbsp;in&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5910795">type</span>&nbsp;<span class="ident" id="5910800">Package</span>&nbsp;<span class="keyword" id="5910808">struct</span>&nbsp;<span class="op" id="5910815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5910818">Dir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5910832">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5910841">//&nbsp;directory&nbsp;containing&nbsp;package&nbsp;sources</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5910882">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5910896">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5910905">//&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5910922">ImportComment</span>&nbsp;<span class="builtintype" id="5910936">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5910945">//&nbsp;path&nbsp;in&nbsp;import&nbsp;comment&nbsp;on&nbsp;package&nbsp;statement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5910993">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5911007">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5911016">//&nbsp;documentation&nbsp;synopsis</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911043">ImportPath</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5911057">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5911066">//&nbsp;import&nbsp;path&nbsp;of&nbsp;package&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911109">Root</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5911123">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5911132">//&nbsp;root&nbsp;of&nbsp;Go&nbsp;tree&nbsp;where&nbsp;this&nbsp;package&nbsp;lives</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911177">SrcRoot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5911191">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5911200">//&nbsp;package&nbsp;source&nbsp;root&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911250">PkgRoot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5911264">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5911273">//&nbsp;package&nbsp;install&nbsp;root&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911324">BinDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5911338">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5911347">//&nbsp;command&nbsp;install&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911393">Goroot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5911407">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5911416">//&nbsp;package&nbsp;found&nbsp;in&nbsp;Go&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911445">PkgObj</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5911459">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5911468">//&nbsp;installed&nbsp;.a&nbsp;file</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911490">AllTags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5911504">[</span><span class="op" id="5911505">]</span><span class="builtintype" id="5911506">string</span>&nbsp;<span class="comment" id="5911513">//&nbsp;tags&nbsp;that&nbsp;can&nbsp;influence&nbsp;file&nbsp;selection&nbsp;in&nbsp;this&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911574">ConflictDir</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5911588">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5911597">//&nbsp;this&nbsp;directory&nbsp;shadows&nbsp;Dir&nbsp;in&nbsp;$GOPATH</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5911640">//&nbsp;Source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911657">GoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5911672">[</span><span class="op" id="5911673">]</span><span class="builtintype" id="5911674">string</span>&nbsp;<span class="comment" id="5911681">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;(excluding&nbsp;CgoFiles,&nbsp;TestGoFiles,&nbsp;XTestGoFiles)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911750">CgoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5911765">[</span><span class="op" id="5911766">]</span><span class="builtintype" id="5911767">string</span>&nbsp;<span class="comment" id="5911774">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;that&nbsp;import&nbsp;&#34;C&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911811">IgnoredGoFiles</span>&nbsp;<span class="op" id="5911826">[</span><span class="op" id="5911827">]</span><span class="builtintype" id="5911828">string</span>&nbsp;<span class="comment" id="5911835">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;ignored&nbsp;for&nbsp;this&nbsp;build</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911879">CFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5911894">[</span><span class="op" id="5911895">]</span><span class="builtintype" id="5911896">string</span>&nbsp;<span class="comment" id="5911903">//&nbsp;.c&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911923">CXXFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5911938">[</span><span class="op" id="5911939">]</span><span class="builtintype" id="5911940">string</span>&nbsp;<span class="comment" id="5911947">//&nbsp;.cc,&nbsp;.cpp&nbsp;and&nbsp;.cxx&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5911983">MFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5911998">[</span><span class="op" id="5911999">]</span><span class="builtintype" id="5912000">string</span>&nbsp;<span class="comment" id="5912007">//&nbsp;.m&nbsp;(Objective-C)&nbsp;source&nbsp;files</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912041">HFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5912056">[</span><span class="op" id="5912057">]</span><span class="builtintype" id="5912058">string</span>&nbsp;<span class="comment" id="5912065">//&nbsp;.h,&nbsp;.hh,&nbsp;.hpp&nbsp;and&nbsp;.hxx&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912105">SFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5912120">[</span><span class="op" id="5912121">]</span><span class="builtintype" id="5912122">string</span>&nbsp;<span class="comment" id="5912129">//&nbsp;.s&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912149">SwigFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5912164">[</span><span class="op" id="5912165">]</span><span class="builtintype" id="5912166">string</span>&nbsp;<span class="comment" id="5912173">//&nbsp;.swig&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912189">SwigCXXFiles</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5912204">[</span><span class="op" id="5912205">]</span><span class="builtintype" id="5912206">string</span>&nbsp;<span class="comment" id="5912213">//&nbsp;.swigcxx&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912232">SysoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5912247">[</span><span class="op" id="5912248">]</span><span class="builtintype" id="5912249">string</span>&nbsp;<span class="comment" id="5912256">//&nbsp;.syso&nbsp;system&nbsp;object&nbsp;files&nbsp;to&nbsp;add&nbsp;to&nbsp;archive</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5912305">//&nbsp;Cgo&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912324">CgoCFLAGS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5912337">[</span><span class="op" id="5912338">]</span><span class="builtintype" id="5912339">string</span>&nbsp;<span class="comment" id="5912346">//&nbsp;Cgo&nbsp;CFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912372">CgoCPPFLAGS</span>&nbsp;&nbsp;<span class="op" id="5912385">[</span><span class="op" id="5912386">]</span><span class="builtintype" id="5912387">string</span>&nbsp;<span class="comment" id="5912394">//&nbsp;Cgo&nbsp;CPPFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912422">CgoCXXFLAGS</span>&nbsp;&nbsp;<span class="op" id="5912435">[</span><span class="op" id="5912436">]</span><span class="builtintype" id="5912437">string</span>&nbsp;<span class="comment" id="5912444">//&nbsp;Cgo&nbsp;CXXFLAGS&nbsp;directives</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912472">CgoLDFLAGS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5912485">[</span><span class="op" id="5912486">]</span><span class="builtintype" id="5912487">string</span>&nbsp;<span class="comment" id="5912494">//&nbsp;Cgo&nbsp;LDFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912521">CgoPkgConfig</span>&nbsp;<span class="op" id="5912534">[</span><span class="op" id="5912535">]</span><span class="builtintype" id="5912536">string</span>&nbsp;<span class="comment" id="5912543">//&nbsp;Cgo&nbsp;pkg-config&nbsp;directives</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5912574">//&nbsp;Dependency&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912601">Imports</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5912611">[</span><span class="op" id="5912612">]</span><span class="builtintype" id="5912613">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5912639">//&nbsp;imports&nbsp;from&nbsp;GoFiles,&nbsp;CgoFiles</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912674">ImportPos</span>&nbsp;<span class="keyword" id="5912684">map</span><span class="op" id="5912687">[</span><span class="builtintype" id="5912688">string</span><span class="op" id="5912694">]</span><span class="op" id="5912695">[</span><span class="op" id="5912696">]</span><span class="ident" id="5912697"><a href="/gostd/go/build/build.go.html#5900466">token</a></span><span class="op" id="5912702">.</span><span class="ident" id="5912703"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span>&nbsp;<span class="comment" id="5912712">//&nbsp;line&nbsp;information&nbsp;for&nbsp;Imports</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5912746">//&nbsp;Test&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912767">TestGoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5912782">[</span><span class="op" id="5912783">]</span><span class="builtintype" id="5912784">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5912810">//&nbsp;_test.go&nbsp;files&nbsp;in&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912840">TestImports</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5912855">[</span><span class="op" id="5912856">]</span><span class="builtintype" id="5912857">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5912883">//&nbsp;imports&nbsp;from&nbsp;TestGoFiles</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912912">TestImportPos</span>&nbsp;&nbsp;<span class="keyword" id="5912927">map</span><span class="op" id="5912930">[</span><span class="builtintype" id="5912931">string</span><span class="op" id="5912937">]</span><span class="op" id="5912938">[</span><span class="op" id="5912939">]</span><span class="ident" id="5912940"><a href="/gostd/go/build/build.go.html#5900466">token</a></span><span class="op" id="5912945">.</span><span class="ident" id="5912946"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span>&nbsp;<span class="comment" id="5912955">//&nbsp;line&nbsp;information&nbsp;for&nbsp;TestImports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5912992">XTestGoFiles</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5913007">[</span><span class="op" id="5913008">]</span><span class="builtintype" id="5913009">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5913035">//&nbsp;_test.go&nbsp;files&nbsp;outside&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5913070">XTestImports</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5913085">[</span><span class="op" id="5913086">]</span><span class="builtintype" id="5913087">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5913113">//&nbsp;imports&nbsp;from&nbsp;XTestGoFiles</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5913143">XTestImportPos</span>&nbsp;<span class="keyword" id="5913158">map</span><span class="op" id="5913161">[</span><span class="builtintype" id="5913162">string</span><span class="op" id="5913168">]</span><span class="op" id="5913169">[</span><span class="op" id="5913170">]</span><span class="ident" id="5913171"><a href="/gostd/go/build/build.go.html#5900466">token</a></span><span class="op" id="5913176">.</span><span class="ident" id="5913177"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span>&nbsp;<span class="comment" id="5913186">//&nbsp;line&nbsp;information&nbsp;for&nbsp;XTestImports</span><br>
<span class="lineno"></span><span class="op" id="5913223">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="comment" id="5913226">//&nbsp;IsCommand&nbsp;reports&nbsp;whether&nbsp;the&nbsp;package&nbsp;is&nbsp;considered&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5913283">//&nbsp;command&nbsp;to&nbsp;be&nbsp;installed&nbsp;(not&nbsp;just&nbsp;a&nbsp;library).</span><br>
<span class="lineno"></span><span class="comment" id="5913332">//&nbsp;Packages&nbsp;named&nbsp;&#34;main&#34;&nbsp;are&nbsp;treated&nbsp;as&nbsp;commands.</span><br>
<span class="lineno"></span><span class="keyword" id="5913382">func</span>&nbsp;<span class="op" id="5913387">(</span><span class="ident" id="5913388">p</span>&nbsp;<span class="op" id="5913390">*</span><span class="ident" id="5913391"><a href="/gostd/go/build/build.go.html#5910800">Package</a></span><span class="op" id="5913398">)</span>&nbsp;<span class="ident" id="5913400">IsCommand</span><span class="op" id="5913409">(</span><span class="op" id="5913410">)</span>&nbsp;<span class="builtintype" id="5913412">bool</span>&nbsp;<span class="op" id="5913417">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5913420">return</span>&nbsp;<span class="ident" id="5913427"><a href="/gostd/go/build/build.go.html#5913388">p</a></span><span class="op" id="5913428">.</span><span class="ident" id="5913429"><a href="/gostd/go/build/build.go.html#5910882">Name</a></span>&nbsp;<span class="op" id="5913434">==</span>&nbsp;<span class="string" id="5913437">&#34;main&#34;</span><br>
<span class="lineno"></span><span class="op" id="5913444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5913447">//&nbsp;ImportDir&nbsp;is&nbsp;like&nbsp;Import&nbsp;but&nbsp;processes&nbsp;the&nbsp;Go&nbsp;package&nbsp;found&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5913513">//&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno">405</span><span class="keyword" id="5913537">func</span>&nbsp;<span class="op" id="5913542">(</span><span class="ident" id="5913543">ctxt</span>&nbsp;<span class="op" id="5913548">*</span><span class="ident" id="5913549"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5913556">)</span>&nbsp;<span class="ident" id="5913558">ImportDir</span><span class="op" id="5913567">(</span><span class="ident" id="5913568">dir</span>&nbsp;<span class="builtintype" id="5913572">string</span><span class="op" id="5913578">,</span>&nbsp;<span class="ident" id="5913580">mode</span>&nbsp;<span class="ident" id="5913585"><a href="/gostd/go/build/build.go.html#5910097">ImportMode</a></span><span class="op" id="5913595">)</span>&nbsp;<span class="op" id="5913597">(</span><span class="op" id="5913598">*</span><span class="ident" id="5913599"><a href="/gostd/go/build/build.go.html#5910800">Package</a></span><span class="op" id="5913606">,</span>&nbsp;<span class="builtintype" id="5913608">error</span><span class="op" id="5913613">)</span>&nbsp;<span class="op" id="5913615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5913618">return</span>&nbsp;<span class="ident" id="5913625"><a href="/gostd/go/build/build.go.html#5913543">ctxt</a></span><span class="op" id="5913629">.</span><span class="ident" id="5913630"><a href="/gostd/go/build/build.go.html#5915395">Import</a></span><span class="op" id="5913636">(</span><span class="string" id="5913637">&#34;.&#34;</span><span class="op" id="5913640">,</span>&nbsp;<span class="ident" id="5913642"><a href="/gostd/go/build/build.go.html#5913568">dir</a></span><span class="op" id="5913645">,</span>&nbsp;<span class="ident" id="5913647"><a href="/gostd/go/build/build.go.html#5913580">mode</a></span><span class="op" id="5913651">)</span><br>
<span class="lineno"></span><span class="op" id="5913653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5913656">//&nbsp;NoGoError&nbsp;is&nbsp;the&nbsp;error&nbsp;used&nbsp;by&nbsp;Import&nbsp;to&nbsp;describe&nbsp;a&nbsp;directory</span><br>
<span class="lineno">410</span><span class="comment" id="5913721">//&nbsp;containing&nbsp;no&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files.&nbsp;(It&nbsp;may&nbsp;still&nbsp;contain</span><br>
<span class="lineno"></span><span class="comment" id="5913787">//&nbsp;test&nbsp;files,&nbsp;files&nbsp;hidden&nbsp;by&nbsp;build&nbsp;tags,&nbsp;and&nbsp;so&nbsp;on.)</span><br>
<span class="lineno"></span><span class="keyword" id="5913842">type</span>&nbsp;<span class="ident" id="5913847">NoGoError</span>&nbsp;<span class="keyword" id="5913857">struct</span>&nbsp;<span class="op" id="5913864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5913867">Dir</span>&nbsp;<span class="builtintype" id="5913871">string</span><br>
<span class="lineno"></span><span class="op" id="5913878">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="keyword" id="5913881">func</span>&nbsp;<span class="op" id="5913886">(</span><span class="ident" id="5913887">e</span>&nbsp;<span class="op" id="5913889">*</span><span class="ident" id="5913890"><a href="/gostd/go/build/build.go.html#5913847">NoGoError</a></span><span class="op" id="5913899">)</span>&nbsp;<span class="ident" id="5913901">Error</span><span class="op" id="5913906">(</span><span class="op" id="5913907">)</span>&nbsp;<span class="builtintype" id="5913909">string</span>&nbsp;<span class="op" id="5913916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5913919">return</span>&nbsp;<span class="string" id="5913926">&#34;no&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="5913961">+</span>&nbsp;<span class="ident" id="5913963"><a href="/gostd/go/build/build.go.html#5913887">e</a></span><span class="op" id="5913964">.</span><span class="ident" id="5913965"><a href="/gostd/go/build/build.go.html#5913867">Dir</a></span><br>
<span class="lineno"></span><span class="op" id="5913969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="5913972">//&nbsp;MultiplePackageError&nbsp;describes&nbsp;a&nbsp;directory&nbsp;containing</span><br>
<span class="lineno"></span><span class="comment" id="5914029">//&nbsp;multiple&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files&nbsp;for&nbsp;multiple&nbsp;packages.</span><br>
<span class="lineno"></span><span class="keyword" id="5914090">type</span>&nbsp;<span class="ident" id="5914095">MultiplePackageError</span>&nbsp;<span class="keyword" id="5914116">struct</span>&nbsp;<span class="op" id="5914123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5914126">Dir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5914135">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5914144">//&nbsp;directory&nbsp;containing&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5914175">Packages</span>&nbsp;<span class="op" id="5914184">[</span><span class="op" id="5914185">]</span><span class="builtintype" id="5914186">string</span>&nbsp;<span class="comment" id="5914193">//&nbsp;package&nbsp;names&nbsp;found</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5914217">Files</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5914226">[</span><span class="op" id="5914227">]</span><span class="builtintype" id="5914228">string</span>&nbsp;<span class="comment" id="5914235">//&nbsp;corresponding&nbsp;files:&nbsp;Files[i]&nbsp;declares&nbsp;package&nbsp;Packages[i]</span><br>
<span class="lineno"></span><span class="op" id="5914297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5914300">func</span>&nbsp;<span class="op" id="5914305">(</span><span class="ident" id="5914306">e</span>&nbsp;<span class="op" id="5914308">*</span><span class="ident" id="5914309"><a href="/gostd/go/build/build.go.html#5914095">MultiplePackageError</a></span><span class="op" id="5914329">)</span>&nbsp;<span class="ident" id="5914331">Error</span><span class="op" id="5914336">(</span><span class="op" id="5914337">)</span>&nbsp;<span class="builtintype" id="5914339">string</span>&nbsp;<span class="op" id="5914346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5914349">//&nbsp;Error&nbsp;string&nbsp;limited&nbsp;to&nbsp;two&nbsp;entries&nbsp;for&nbsp;compatibility.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5914408">return</span>&nbsp;<span class="ident" id="5914415"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5914418">.</span><span class="ident" id="5914419"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5914426">(</span><span class="string" id="5914427">&#34;found&nbsp;packages&nbsp;%s&nbsp;(%s)&nbsp;and&nbsp;%s&nbsp;(%s)&nbsp;in&nbsp;%s&#34;</span><span class="op" id="5914469">,</span>&nbsp;<span class="ident" id="5914471"><a href="/gostd/go/build/build.go.html#5914306">e</a></span><span class="op" id="5914472">.</span><span class="ident" id="5914473"><a href="/gostd/go/build/build.go.html#5914175">Packages</a></span><span class="op" id="5914481">[</span><span class="num" id="5914482">0</span><span class="op" id="5914483">]</span><span class="op" id="5914484">,</span>&nbsp;<span class="ident" id="5914486"><a href="/gostd/go/build/build.go.html#5914306">e</a></span><span class="op" id="5914487">.</span><span class="ident" id="5914488"><a href="/gostd/go/build/build.go.html#5914217">Files</a></span><span class="op" id="5914493">[</span><span class="num" id="5914494">0</span><span class="op" id="5914495">]</span><span class="op" id="5914496">,</span>&nbsp;<span class="ident" id="5914498"><a href="/gostd/go/build/build.go.html#5914306">e</a></span><span class="op" id="5914499">.</span><span class="ident" id="5914500"><a href="/gostd/go/build/build.go.html#5914175">Packages</a></span><span class="op" id="5914508">[</span><span class="num" id="5914509">1</span><span class="op" id="5914510">]</span><span class="op" id="5914511">,</span>&nbsp;<span class="ident" id="5914513"><a href="/gostd/go/build/build.go.html#5914306">e</a></span><span class="op" id="5914514">.</span><span class="ident" id="5914515"><a href="/gostd/go/build/build.go.html#5914217">Files</a></span><span class="op" id="5914520">[</span><span class="num" id="5914521">1</span><span class="op" id="5914522">]</span><span class="op" id="5914523">,</span>&nbsp;<span class="ident" id="5914525"><a href="/gostd/go/build/build.go.html#5914306">e</a></span><span class="op" id="5914526">.</span><span class="ident" id="5914527"><a href="/gostd/go/build/build.go.html#5914126">Dir</a></span><span class="op" id="5914530">)</span><br>
<span class="lineno"></span><span class="op" id="5914532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5914535">func</span>&nbsp;<span class="ident" id="5914540">nameExt</span><span class="op" id="5914547">(</span><span class="ident" id="5914548">name</span>&nbsp;<span class="builtintype" id="5914553">string</span><span class="op" id="5914559">)</span>&nbsp;<span class="builtintype" id="5914561">string</span>&nbsp;<span class="op" id="5914568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5914571">i</span>&nbsp;<span class="op" id="5914573">:=</span>&nbsp;<span class="ident" id="5914576"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5914583">.</span><span class="ident" id="5914584"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="5914593">(</span><span class="ident" id="5914594"><a href="/gostd/go/build/build.go.html#5914548">name</a></span><span class="op" id="5914598">,</span>&nbsp;<span class="string" id="5914600">&#34;.&#34;</span><span class="op" id="5914603">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5914606">if</span>&nbsp;<span class="ident" id="5914609"><a href="/gostd/go/build/build.go.html#5914571">i</a></span>&nbsp;<span class="op" id="5914611">&lt;</span>&nbsp;<span class="num" id="5914613">0</span>&nbsp;<span class="op" id="5914615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5914619">return</span>&nbsp;<span class="string" id="5914626">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5914630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5914633">return</span>&nbsp;<span class="ident" id="5914640"><a href="/gostd/go/build/build.go.html#5914548">name</a></span><span class="op" id="5914644">[</span><span class="ident" id="5914645"><a href="/gostd/go/build/build.go.html#5914571">i</a></span><span class="op" id="5914646">:</span><span class="op" id="5914647">]</span><br>
<span class="lineno"></span><span class="op" id="5914649">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="5914652">//&nbsp;Import&nbsp;returns&nbsp;details&nbsp;about&nbsp;the&nbsp;Go&nbsp;package&nbsp;named&nbsp;by&nbsp;the&nbsp;import&nbsp;path,</span><br>
<span class="lineno"></span><span class="comment" id="5914725">//&nbsp;interpreting&nbsp;local&nbsp;import&nbsp;paths&nbsp;relative&nbsp;to&nbsp;the&nbsp;srcDir&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="5914794">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;a&nbsp;local&nbsp;import&nbsp;path&nbsp;naming&nbsp;a&nbsp;package&nbsp;that&nbsp;can&nbsp;be&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="5914870">//&nbsp;using&nbsp;a&nbsp;standard&nbsp;import&nbsp;path,&nbsp;the&nbsp;returned&nbsp;package&nbsp;will&nbsp;set&nbsp;p.ImportPath</span><br>
<span class="lineno">445</span><span class="comment" id="5914946">//&nbsp;to&nbsp;that&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="5914963">//</span><br>
<span class="lineno"></span><span class="comment" id="5914966">//&nbsp;In&nbsp;the&nbsp;directory&nbsp;containing&nbsp;the&nbsp;package,&nbsp;.go,&nbsp;.c,&nbsp;.h,&nbsp;and&nbsp;.s&nbsp;files&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5915040">//&nbsp;considered&nbsp;part&nbsp;of&nbsp;the&nbsp;package&nbsp;except&nbsp;for:</span><br>
<span class="lineno"></span><span class="comment" id="5915086">//</span><br>
<span class="lineno">450</span><span class="comment" id="5915089">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;.go&nbsp;files&nbsp;in&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span><span class="comment" id="5915129">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;files&nbsp;starting&nbsp;with&nbsp;_&nbsp;or&nbsp;.&nbsp;(likely&nbsp;editor&nbsp;temporary&nbsp;files)</span><br>
<span class="lineno"></span><span class="comment" id="5915193">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;files&nbsp;with&nbsp;build&nbsp;constraints&nbsp;not&nbsp;satisfied&nbsp;by&nbsp;the&nbsp;context</span><br>
<span class="lineno"></span><span class="comment" id="5915256">//</span><br>
<span class="lineno"></span><span class="comment" id="5915259">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;Import&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;and&nbsp;a&nbsp;non-nil</span><br>
<span class="lineno">455</span><span class="comment" id="5915327">//&nbsp;*Package&nbsp;containing&nbsp;partial&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="5915371">//</span><br>
<span class="lineno"></span><span class="keyword" id="5915374">func</span>&nbsp;<span class="op" id="5915379">(</span><span class="ident" id="5915380">ctxt</span>&nbsp;<span class="op" id="5915385">*</span><span class="ident" id="5915386"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5915393">)</span>&nbsp;<span class="ident" id="5915395">Import</span><span class="op" id="5915401">(</span><span class="ident" id="5915402">path</span>&nbsp;<span class="builtintype" id="5915407">string</span><span class="op" id="5915413">,</span>&nbsp;<span class="ident" id="5915415">srcDir</span>&nbsp;<span class="builtintype" id="5915422">string</span><span class="op" id="5915428">,</span>&nbsp;<span class="ident" id="5915430">mode</span>&nbsp;<span class="ident" id="5915435"><a href="/gostd/go/build/build.go.html#5910097">ImportMode</a></span><span class="op" id="5915445">)</span>&nbsp;<span class="op" id="5915447">(</span><span class="op" id="5915448">*</span><span class="ident" id="5915449"><a href="/gostd/go/build/build.go.html#5910800">Package</a></span><span class="op" id="5915456">,</span>&nbsp;<span class="builtintype" id="5915458">error</span><span class="op" id="5915463">)</span>&nbsp;<span class="op" id="5915465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5915468">p</span>&nbsp;<span class="op" id="5915470">:=</span>&nbsp;<span class="op" id="5915473">&amp;</span><span class="ident" id="5915474"><a href="/gostd/go/build/build.go.html#5910800">Package</a></span><span class="op" id="5915481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5915485"><a href="/gostd/go/build/build.go.html#5911043">ImportPath</a></span><span class="op" id="5915495">:</span>&nbsp;<span class="ident" id="5915497"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5915501">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5915504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5915507">if</span>&nbsp;<span class="ident" id="5915510"><a href="/gostd/go/build/build.go.html#5915402">path</a></span>&nbsp;<span class="op" id="5915515">==</span>&nbsp;<span class="string" id="5915518">&#34;&#34;</span>&nbsp;<span class="op" id="5915521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5915525">return</span>&nbsp;<span class="ident" id="5915532"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5915533">,</span>&nbsp;<span class="ident" id="5915535"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5915538">.</span><span class="ident" id="5915539"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5915545">(</span><span class="string" id="5915546">&#34;import&nbsp;%q:&nbsp;invalid&nbsp;import&nbsp;path&#34;</span><span class="op" id="5915578">,</span>&nbsp;<span class="ident" id="5915580"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5915584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5915587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5915591">var</span>&nbsp;<span class="ident" id="5915595">pkga</span>&nbsp;<span class="builtintype" id="5915600">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5915608">var</span>&nbsp;<span class="ident" id="5915612">pkgerr</span>&nbsp;<span class="builtintype" id="5915619">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5915626">switch</span>&nbsp;<span class="ident" id="5915633"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5915637">.</span><span class="ident" id="5915638"><a href="/gostd/go/build/build.go.html#5900966">Compiler</a></span>&nbsp;<span class="op" id="5915647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5915650">case</span>&nbsp;<span class="string" id="5915655">&#34;gccgo&#34;</span><span class="op" id="5915662">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5915666">dir</span><span class="op" id="5915669">,</span>&nbsp;<span class="ident" id="5915671">elem</span>&nbsp;<span class="op" id="5915676">:=</span>&nbsp;<span class="ident" id="5915679"><a href="/gostd/go/build/build.go.html#5900510">pathpkg</a></span><span class="op" id="5915686">.</span><span class="ident" id="5915687"><a href="/gostd/path/path.go.html#3923666">Split</a></span><span class="op" id="5915692">(</span><span class="ident" id="5915693"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5915694">.</span><span class="ident" id="5915695"><a href="/gostd/go/build/build.go.html#5911043">ImportPath</a></span><span class="op" id="5915705">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5915709"><a href="/gostd/go/build/build.go.html#5915595">pkga</a></span>&nbsp;<span class="op" id="5915714">=</span>&nbsp;<span class="string" id="5915716">&#34;pkg/gccgo_&#34;</span>&nbsp;<span class="op" id="5915729">+</span>&nbsp;<span class="ident" id="5915731"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5915735">.</span><span class="ident" id="5915736"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span>&nbsp;<span class="op" id="5915741">+</span>&nbsp;<span class="string" id="5915743">&#34;_&#34;</span>&nbsp;<span class="op" id="5915747">+</span>&nbsp;<span class="ident" id="5915749"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5915753">.</span><span class="ident" id="5915754"><a href="/gostd/go/build/build.go.html#5900695">GOARCH</a></span>&nbsp;<span class="op" id="5915761">+</span>&nbsp;<span class="string" id="5915763">&#34;/&#34;</span>&nbsp;<span class="op" id="5915767">+</span>&nbsp;<span class="ident" id="5915769"><a href="/gostd/go/build/build.go.html#5915666">dir</a></span>&nbsp;<span class="op" id="5915773">+</span>&nbsp;<span class="string" id="5915775">&#34;lib&#34;</span>&nbsp;<span class="op" id="5915781">+</span>&nbsp;<span class="ident" id="5915783"><a href="/gostd/go/build/build.go.html#5915671">elem</a></span>&nbsp;<span class="op" id="5915788">+</span>&nbsp;<span class="string" id="5915790">&#34;.a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5915796">case</span>&nbsp;<span class="string" id="5915801">&#34;gc&#34;</span><span class="op" id="5915805">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5915809">suffix</span>&nbsp;<span class="op" id="5915816">:=</span>&nbsp;<span class="string" id="5915819">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5915824">if</span>&nbsp;<span class="ident" id="5915827"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5915831">.</span><span class="ident" id="5915832"><a href="/gostd/go/build/build.go.html#5902005">InstallSuffix</a></span>&nbsp;<span class="op" id="5915846">!=</span>&nbsp;<span class="string" id="5915849">&#34;&#34;</span>&nbsp;<span class="op" id="5915852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5915857"><a href="/gostd/go/build/build.go.html#5915809">suffix</a></span>&nbsp;<span class="op" id="5915864">=</span>&nbsp;<span class="string" id="5915866">&#34;_&#34;</span>&nbsp;<span class="op" id="5915870">+</span>&nbsp;<span class="ident" id="5915872"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5915876">.</span><span class="ident" id="5915877"><a href="/gostd/go/build/build.go.html#5902005">InstallSuffix</a></span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5915893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5915897"><a href="/gostd/go/build/build.go.html#5915595">pkga</a></span>&nbsp;<span class="op" id="5915902">=</span>&nbsp;<span class="string" id="5915904">&#34;pkg/&#34;</span>&nbsp;<span class="op" id="5915911">+</span>&nbsp;<span class="ident" id="5915913"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5915917">.</span><span class="ident" id="5915918"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span>&nbsp;<span class="op" id="5915923">+</span>&nbsp;<span class="string" id="5915925">&#34;_&#34;</span>&nbsp;<span class="op" id="5915929">+</span>&nbsp;<span class="ident" id="5915931"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5915935">.</span><span class="ident" id="5915936"><a href="/gostd/go/build/build.go.html#5900695">GOARCH</a></span>&nbsp;<span class="op" id="5915943">+</span>&nbsp;<span class="ident" id="5915945"><a href="/gostd/go/build/build.go.html#5915809">suffix</a></span>&nbsp;<span class="op" id="5915952">+</span>&nbsp;<span class="string" id="5915954">&#34;/&#34;</span>&nbsp;<span class="op" id="5915958">+</span>&nbsp;<span class="ident" id="5915960"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5915961">.</span><span class="ident" id="5915962"><a href="/gostd/go/build/build.go.html#5911043">ImportPath</a></span>&nbsp;<span class="op" id="5915973">+</span>&nbsp;<span class="string" id="5915975">&#34;.a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5915981">default</span><span class="op" id="5915988">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5915992">//&nbsp;Save&nbsp;error&nbsp;for&nbsp;end&nbsp;of&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5916029"><a href="/gostd/go/build/build.go.html#5915612">pkgerr</a></span>&nbsp;<span class="op" id="5916036">=</span>&nbsp;<span class="ident" id="5916038"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5916041">.</span><span class="ident" id="5916042"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5916048">(</span><span class="string" id="5916049">&#34;import&nbsp;%q:&nbsp;unknown&nbsp;compiler&nbsp;%q&#34;</span><span class="op" id="5916081">,</span>&nbsp;<span class="ident" id="5916083"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5916087">,</span>&nbsp;<span class="ident" id="5916089"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916093">.</span><span class="ident" id="5916094"><a href="/gostd/go/build/build.go.html#5900966">Compiler</a></span><span class="op" id="5916102">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5916105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5916109">binaryOnly</span>&nbsp;<span class="op" id="5916120">:=</span>&nbsp;<span class="builtintype" id="5916123">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916130">if</span>&nbsp;<span class="ident" id="5916133"><a href="/gostd/go/build/build.go.html#5938959">IsLocalImport</a></span><span class="op" id="5916146">(</span><span class="ident" id="5916147"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5916151">)</span>&nbsp;<span class="op" id="5916153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5916157"><a href="/gostd/go/build/build.go.html#5915595">pkga</a></span>&nbsp;<span class="op" id="5916162">=</span>&nbsp;<span class="string" id="5916164">&#34;&#34;</span>&nbsp;<span class="comment" id="5916167">//&nbsp;local&nbsp;imports&nbsp;have&nbsp;no&nbsp;installed&nbsp;path</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916209">if</span>&nbsp;<span class="ident" id="5916212"><a href="/gostd/go/build/build.go.html#5915415">srcDir</a></span>&nbsp;<span class="op" id="5916219">==</span>&nbsp;<span class="string" id="5916222">&#34;&#34;</span>&nbsp;<span class="op" id="5916225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916230">return</span>&nbsp;<span class="ident" id="5916237"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5916238">,</span>&nbsp;<span class="ident" id="5916240"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5916243">.</span><span class="ident" id="5916244"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5916250">(</span><span class="string" id="5916251">&#34;import&nbsp;%q:&nbsp;import&nbsp;relative&nbsp;to&nbsp;unknown&nbsp;directory&#34;</span><span class="op" id="5916300">,</span>&nbsp;<span class="ident" id="5916302"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5916306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5916310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916314">if</span>&nbsp;<span class="op" id="5916317">!</span><span class="ident" id="5916318"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916322">.</span><span class="ident" id="5916323"><a href="/gostd/go/build/build.go.html#5904286">isAbsPath</a></span><span class="op" id="5916332">(</span><span class="ident" id="5916333"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5916337">)</span>&nbsp;<span class="op" id="5916339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5916344"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5916345">.</span><span class="ident" id="5916346"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span>&nbsp;<span class="op" id="5916350">=</span>&nbsp;<span class="ident" id="5916352"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916356">.</span><span class="ident" id="5916357"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5916365">(</span><span class="ident" id="5916366"><a href="/gostd/go/build/build.go.html#5915415">srcDir</a></span><span class="op" id="5916372">,</span>&nbsp;<span class="ident" id="5916374"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5916378">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5916382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5916386">//&nbsp;Determine&nbsp;canonical&nbsp;import&nbsp;path,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916432">if</span>&nbsp;<span class="ident" id="5916435"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916439">.</span><span class="ident" id="5916440"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span>&nbsp;<span class="op" id="5916447">!=</span>&nbsp;<span class="string" id="5916450">&#34;&#34;</span>&nbsp;<span class="op" id="5916453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5916458">root</span>&nbsp;<span class="op" id="5916463">:=</span>&nbsp;<span class="ident" id="5916466"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916470">.</span><span class="ident" id="5916471"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5916479">(</span><span class="ident" id="5916480"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916484">.</span><span class="ident" id="5916485"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span><span class="op" id="5916491">,</span>&nbsp;<span class="string" id="5916493">&#34;src&#34;</span><span class="op" id="5916498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916503">if</span>&nbsp;<span class="ident" id="5916506">sub</span><span class="op" id="5916509">,</span>&nbsp;<span class="ident" id="5916511">ok</span>&nbsp;<span class="op" id="5916514">:=</span>&nbsp;<span class="ident" id="5916517"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916521">.</span><span class="ident" id="5916522"><a href="/gostd/go/build/build.go.html#5904756">hasSubdir</a></span><span class="op" id="5916531">(</span><span class="ident" id="5916532"><a href="/gostd/go/build/build.go.html#5916458">root</a></span><span class="op" id="5916536">,</span>&nbsp;<span class="ident" id="5916538"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5916539">.</span><span class="ident" id="5916540"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span><span class="op" id="5916543">)</span><span class="op" id="5916544">;</span>&nbsp;<span class="ident" id="5916546"><a href="/gostd/go/build/build.go.html#5916511">ok</a></span>&nbsp;<span class="op" id="5916549">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5916555"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5916556">.</span><span class="ident" id="5916557"><a href="/gostd/go/build/build.go.html#5911393">Goroot</a></span>&nbsp;<span class="op" id="5916564">=</span>&nbsp;<span class="builtintype" id="5916566">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5916575"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5916576">.</span><span class="ident" id="5916577"><a href="/gostd/go/build/build.go.html#5911043">ImportPath</a></span>&nbsp;<span class="op" id="5916588">=</span>&nbsp;<span class="ident" id="5916590"><a href="/gostd/go/build/build.go.html#5916506">sub</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5916598"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5916599">.</span><span class="ident" id="5916600"><a href="/gostd/go/build/build.go.html#5911109">Root</a></span>&nbsp;<span class="op" id="5916605">=</span>&nbsp;<span class="ident" id="5916607"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916611">.</span><span class="ident" id="5916612"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916623">goto</span>&nbsp;<span class="ident" id="5916628"><a href="/gostd/go/build/build.go.html#5919049">Found</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5916637">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5916641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5916645">all</span>&nbsp;<span class="op" id="5916649">:=</span>&nbsp;<span class="ident" id="5916652"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916656">.</span><span class="ident" id="5916657"><a href="/gostd/go/build/build.go.html#5906485">gopath</a></span><span class="op" id="5916663">(</span><span class="op" id="5916664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916668">for</span>&nbsp;<span class="ident" id="5916672">i</span><span class="op" id="5916673">,</span>&nbsp;<span class="ident" id="5916675">root</span>&nbsp;<span class="op" id="5916680">:=</span>&nbsp;<span class="keyword" id="5916683">range</span>&nbsp;<span class="ident" id="5916689"><a href="/gostd/go/build/build.go.html#5916645">all</a></span>&nbsp;<span class="op" id="5916693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5916698">rootsrc</span>&nbsp;<span class="op" id="5916706">:=</span>&nbsp;<span class="ident" id="5916709"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916713">.</span><span class="ident" id="5916714"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5916722">(</span><span class="ident" id="5916723"><a href="/gostd/go/build/build.go.html#5916675">root</a></span><span class="op" id="5916727">,</span>&nbsp;<span class="string" id="5916729">&#34;src&#34;</span><span class="op" id="5916734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916739">if</span>&nbsp;<span class="ident" id="5916742">sub</span><span class="op" id="5916745">,</span>&nbsp;<span class="ident" id="5916747">ok</span>&nbsp;<span class="op" id="5916750">:=</span>&nbsp;<span class="ident" id="5916753"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916757">.</span><span class="ident" id="5916758"><a href="/gostd/go/build/build.go.html#5904756">hasSubdir</a></span><span class="op" id="5916767">(</span><span class="ident" id="5916768"><a href="/gostd/go/build/build.go.html#5916698">rootsrc</a></span><span class="op" id="5916775">,</span>&nbsp;<span class="ident" id="5916777"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5916778">.</span><span class="ident" id="5916779"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span><span class="op" id="5916782">)</span><span class="op" id="5916783">;</span>&nbsp;<span class="ident" id="5916785"><a href="/gostd/go/build/build.go.html#5916747">ok</a></span>&nbsp;<span class="op" id="5916788">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5916794">//&nbsp;We&nbsp;found&nbsp;a&nbsp;potential&nbsp;import&nbsp;path&nbsp;for&nbsp;dir,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5916843">//&nbsp;but&nbsp;check&nbsp;that&nbsp;using&nbsp;it&nbsp;wouldn&#39;t&nbsp;find&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5916898">//&nbsp;else&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916917">if</span>&nbsp;<span class="ident" id="5916920"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916924">.</span><span class="ident" id="5916925"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span>&nbsp;<span class="op" id="5916932">!=</span>&nbsp;<span class="string" id="5916935">&#34;&#34;</span>&nbsp;<span class="op" id="5916938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5916945">if</span>&nbsp;<span class="ident" id="5916948">dir</span>&nbsp;<span class="op" id="5916952">:=</span>&nbsp;<span class="ident" id="5916955"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916959">.</span><span class="ident" id="5916960"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5916968">(</span><span class="ident" id="5916969"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916973">.</span><span class="ident" id="5916974"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span><span class="op" id="5916980">,</span>&nbsp;<span class="string" id="5916982">&#34;src&#34;</span><span class="op" id="5916987">,</span>&nbsp;<span class="ident" id="5916989"><a href="/gostd/go/build/build.go.html#5916742">sub</a></span><span class="op" id="5916992">)</span><span class="op" id="5916993">;</span>&nbsp;<span class="ident" id="5916995"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5916999">.</span><span class="ident" id="5917000"><a href="/gostd/go/build/build.go.html#5904486">isDir</a></span><span class="op" id="5917005">(</span><span class="ident" id="5917006"><a href="/gostd/go/build/build.go.html#5916948">dir</a></span><span class="op" id="5917009">)</span>&nbsp;<span class="op" id="5917011">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5917019"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5917020">.</span><span class="ident" id="5917021"><a href="/gostd/go/build/build.go.html#5911574">ConflictDir</a></span>&nbsp;<span class="op" id="5917033">=</span>&nbsp;<span class="ident" id="5917035"><a href="/gostd/go/build/build.go.html#5916948">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5917045">goto</span>&nbsp;<span class="ident" id="5917050"><a href="/gostd/go/build/build.go.html#5919049">Found</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5917061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5917067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5917073">for</span>&nbsp;<span class="ident" id="5917077">_</span><span class="op" id="5917078">,</span>&nbsp;<span class="ident" id="5917080">earlyRoot</span>&nbsp;<span class="op" id="5917090">:=</span>&nbsp;<span class="keyword" id="5917093">range</span>&nbsp;<span class="ident" id="5917099"><a href="/gostd/go/build/build.go.html#5916645">all</a></span><span class="op" id="5917102">[</span><span class="op" id="5917103">:</span><span class="ident" id="5917104"><a href="/gostd/go/build/build.go.html#5916672">i</a></span><span class="op" id="5917105">]</span>&nbsp;<span class="op" id="5917107">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5917114">if</span>&nbsp;<span class="ident" id="5917117">dir</span>&nbsp;<span class="op" id="5917121">:=</span>&nbsp;<span class="ident" id="5917124"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5917128">.</span><span class="ident" id="5917129"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5917137">(</span><span class="ident" id="5917138"><a href="/gostd/go/build/build.go.html#5917080">earlyRoot</a></span><span class="op" id="5917147">,</span>&nbsp;<span class="string" id="5917149">&#34;src&#34;</span><span class="op" id="5917154">,</span>&nbsp;<span class="ident" id="5917156"><a href="/gostd/go/build/build.go.html#5916742">sub</a></span><span class="op" id="5917159">)</span><span class="op" id="5917160">;</span>&nbsp;<span class="ident" id="5917162"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5917166">.</span><span class="ident" id="5917167"><a href="/gostd/go/build/build.go.html#5904486">isDir</a></span><span class="op" id="5917172">(</span><span class="ident" id="5917173"><a href="/gostd/go/build/build.go.html#5917117">dir</a></span><span class="op" id="5917176">)</span>&nbsp;<span class="op" id="5917178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5917186"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5917187">.</span><span class="ident" id="5917188"><a href="/gostd/go/build/build.go.html#5911574">ConflictDir</a></span>&nbsp;<span class="op" id="5917200">=</span>&nbsp;<span class="ident" id="5917202"><a href="/gostd/go/build/build.go.html#5917117">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5917212">goto</span>&nbsp;<span class="ident" id="5917217"><a href="/gostd/go/build/build.go.html#5919049">Found</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5917228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5917234">}</span><br>
<span class="lineno">520</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5917241">//&nbsp;sub&nbsp;would&nbsp;not&nbsp;name&nbsp;some&nbsp;other&nbsp;directory&nbsp;instead&nbsp;of&nbsp;this&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5917309">//&nbsp;Record&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5917327"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5917328">.</span><span class="ident" id="5917329"><a href="/gostd/go/build/build.go.html#5911043">ImportPath</a></span>&nbsp;<span class="op" id="5917340">=</span>&nbsp;<span class="ident" id="5917342"><a href="/gostd/go/build/build.go.html#5916742">sub</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5917350"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5917351">.</span><span class="ident" id="5917352"><a href="/gostd/go/build/build.go.html#5911109">Root</a></span>&nbsp;<span class="op" id="5917357">=</span>&nbsp;<span class="ident" id="5917359"><a href="/gostd/go/build/build.go.html#5916675">root</a></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5917368">goto</span>&nbsp;<span class="ident" id="5917373"><a href="/gostd/go/build/build.go.html#5919049">Found</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5917382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5917386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5917390">//&nbsp;It&#39;s&nbsp;okay&nbsp;that&nbsp;we&nbsp;didn&#39;t&nbsp;find&nbsp;a&nbsp;root&nbsp;containing&nbsp;dir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5917448">//&nbsp;Keep&nbsp;going&nbsp;with&nbsp;the&nbsp;information&nbsp;we&nbsp;have.</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5917493">}</span>&nbsp;<span class="keyword" id="5917495">else</span>&nbsp;<span class="op" id="5917500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5917504">if</span>&nbsp;<span class="ident" id="5917507"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5917514">.</span><span class="ident" id="5917515"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5917524">(</span><span class="ident" id="5917525"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5917529">,</span>&nbsp;<span class="string" id="5917531">&#34;/&#34;</span><span class="op" id="5917534">)</span>&nbsp;<span class="op" id="5917536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5917541">return</span>&nbsp;<span class="ident" id="5917548"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5917549">,</span>&nbsp;<span class="ident" id="5917551"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5917554">.</span><span class="ident" id="5917555"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5917561">(</span><span class="string" id="5917562">&#34;import&nbsp;%q:&nbsp;cannot&nbsp;import&nbsp;absolute&nbsp;path&#34;</span><span class="op" id="5917602">,</span>&nbsp;<span class="ident" id="5917604"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5917608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5917612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5917617">//&nbsp;tried&nbsp;records&nbsp;the&nbsp;location&nbsp;of&nbsp;unsuccessful&nbsp;package&nbsp;lookups</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5917681">var</span>&nbsp;<span class="ident" id="5917685">tried</span>&nbsp;<span class="keyword" id="5917691">struct</span>&nbsp;<span class="op" id="5917698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5917703">goroot</span>&nbsp;<span class="builtintype" id="5917710">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5917720">gopath</span>&nbsp;<span class="op" id="5917727">[</span><span class="op" id="5917728">]</span><span class="builtintype" id="5917729">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5917738">}</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5917743">//&nbsp;Determine&nbsp;directory&nbsp;from&nbsp;import&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5917786">if</span>&nbsp;<span class="ident" id="5917789"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5917793">.</span><span class="ident" id="5917794"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span>&nbsp;<span class="op" id="5917801">!=</span>&nbsp;<span class="string" id="5917804">&#34;&#34;</span>&nbsp;<span class="op" id="5917807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5917812">dir</span>&nbsp;<span class="op" id="5917816">:=</span>&nbsp;<span class="ident" id="5917819"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5917823">.</span><span class="ident" id="5917824"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5917832">(</span><span class="ident" id="5917833"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5917837">.</span><span class="ident" id="5917838"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span><span class="op" id="5917844">,</span>&nbsp;<span class="string" id="5917846">&#34;src&#34;</span><span class="op" id="5917851">,</span>&nbsp;<span class="ident" id="5917853"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5917857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5917862">isDir</span>&nbsp;<span class="op" id="5917868">:=</span>&nbsp;<span class="ident" id="5917871"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5917875">.</span><span class="ident" id="5917876"><a href="/gostd/go/build/build.go.html#5904486">isDir</a></span><span class="op" id="5917881">(</span><span class="ident" id="5917882"><a href="/gostd/go/build/build.go.html#5917812">dir</a></span><span class="op" id="5917885">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5917890"><a href="/gostd/go/build/build.go.html#5916109">binaryOnly</a></span>&nbsp;<span class="op" id="5917901">=</span>&nbsp;<span class="op" id="5917903">!</span><span class="ident" id="5917904"><a href="/gostd/go/build/build.go.html#5917862">isDir</a></span>&nbsp;<span class="op" id="5917910">&amp;&amp;</span>&nbsp;<span class="ident" id="5917913"><a href="/gostd/go/build/build.go.html#5915430">mode</a></span><span class="op" id="5917917">&amp;</span><span class="ident" id="5917918"><a href="/gostd/go/build/build.go.html#5910439">AllowBinary</a></span>&nbsp;<span class="op" id="5917930">!=</span>&nbsp;<span class="num" id="5917933">0</span>&nbsp;<span class="op" id="5917935">&amp;&amp;</span>&nbsp;<span class="ident" id="5917938"><a href="/gostd/go/build/build.go.html#5915595">pkga</a></span>&nbsp;<span class="op" id="5917943">!=</span>&nbsp;<span class="string" id="5917946">&#34;&#34;</span>&nbsp;<span class="op" id="5917949">&amp;&amp;</span>&nbsp;<span class="ident" id="5917952"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5917956">.</span><span class="ident" id="5917957"><a href="/gostd/go/build/build.go.html#5906293">isFile</a></span><span class="op" id="5917963">(</span><span class="ident" id="5917964"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5917968">.</span><span class="ident" id="5917969"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5917977">(</span><span class="ident" id="5917978"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5917982">.</span><span class="ident" id="5917983"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span><span class="op" id="5917989">,</span>&nbsp;<span class="ident" id="5917991"><a href="/gostd/go/build/build.go.html#5915595">pkga</a></span><span class="op" id="5917995">)</span><span class="op" id="5917996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918001">if</span>&nbsp;<span class="ident" id="5918004"><a href="/gostd/go/build/build.go.html#5917862">isDir</a></span>&nbsp;<span class="op" id="5918010">||</span>&nbsp;<span class="ident" id="5918013"><a href="/gostd/go/build/build.go.html#5916109">binaryOnly</a></span>&nbsp;<span class="op" id="5918024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918030"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5918031">.</span><span class="ident" id="5918032"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span>&nbsp;<span class="op" id="5918036">=</span>&nbsp;<span class="ident" id="5918038"><a href="/gostd/go/build/build.go.html#5917812">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918046"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5918047">.</span><span class="ident" id="5918048"><a href="/gostd/go/build/build.go.html#5911393">Goroot</a></span>&nbsp;<span class="op" id="5918055">=</span>&nbsp;<span class="builtintype" id="5918057">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918066"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5918067">.</span><span class="ident" id="5918068"><a href="/gostd/go/build/build.go.html#5911109">Root</a></span>&nbsp;<span class="op" id="5918073">=</span>&nbsp;<span class="ident" id="5918075"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5918079">.</span><span class="ident" id="5918080"><a href="/gostd/go/build/build.go.html#5900785">GOROOT</a></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918091">goto</span>&nbsp;<span class="ident" id="5918096"><a href="/gostd/go/build/build.go.html#5919049">Found</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5918105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918110"><a href="/gostd/go/build/build.go.html#5917685">tried</a></span><span class="op" id="5918115">.</span><span class="ident" id="5918116"><a href="/gostd/go/build/build.go.html#5917703">goroot</a></span>&nbsp;<span class="op" id="5918123">=</span>&nbsp;<span class="ident" id="5918125"><a href="/gostd/go/build/build.go.html#5917812">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5918131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918135">for</span>&nbsp;<span class="ident" id="5918139">_</span><span class="op" id="5918140">,</span>&nbsp;<span class="ident" id="5918142">root</span>&nbsp;<span class="op" id="5918147">:=</span>&nbsp;<span class="keyword" id="5918150">range</span>&nbsp;<span class="ident" id="5918156"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5918160">.</span><span class="ident" id="5918161"><a href="/gostd/go/build/build.go.html#5906485">gopath</a></span><span class="op" id="5918167">(</span><span class="op" id="5918168">)</span>&nbsp;<span class="op" id="5918170">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918175">dir</span>&nbsp;<span class="op" id="5918179">:=</span>&nbsp;<span class="ident" id="5918182"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5918186">.</span><span class="ident" id="5918187"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5918195">(</span><span class="ident" id="5918196"><a href="/gostd/go/build/build.go.html#5918142">root</a></span><span class="op" id="5918200">,</span>&nbsp;<span class="string" id="5918202">&#34;src&#34;</span><span class="op" id="5918207">,</span>&nbsp;<span class="ident" id="5918209"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5918213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918218">isDir</span>&nbsp;<span class="op" id="5918224">:=</span>&nbsp;<span class="ident" id="5918227"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5918231">.</span><span class="ident" id="5918232"><a href="/gostd/go/build/build.go.html#5904486">isDir</a></span><span class="op" id="5918237">(</span><span class="ident" id="5918238"><a href="/gostd/go/build/build.go.html#5918175">dir</a></span><span class="op" id="5918241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918246"><a href="/gostd/go/build/build.go.html#5916109">binaryOnly</a></span>&nbsp;<span class="op" id="5918257">=</span>&nbsp;<span class="op" id="5918259">!</span><span class="ident" id="5918260"><a href="/gostd/go/build/build.go.html#5918218">isDir</a></span>&nbsp;<span class="op" id="5918266">&amp;&amp;</span>&nbsp;<span class="ident" id="5918269"><a href="/gostd/go/build/build.go.html#5915430">mode</a></span><span class="op" id="5918273">&amp;</span><span class="ident" id="5918274"><a href="/gostd/go/build/build.go.html#5910439">AllowBinary</a></span>&nbsp;<span class="op" id="5918286">!=</span>&nbsp;<span class="num" id="5918289">0</span>&nbsp;<span class="op" id="5918291">&amp;&amp;</span>&nbsp;<span class="ident" id="5918294"><a href="/gostd/go/build/build.go.html#5915595">pkga</a></span>&nbsp;<span class="op" id="5918299">!=</span>&nbsp;<span class="string" id="5918302">&#34;&#34;</span>&nbsp;<span class="op" id="5918305">&amp;&amp;</span>&nbsp;<span class="ident" id="5918308"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5918312">.</span><span class="ident" id="5918313"><a href="/gostd/go/build/build.go.html#5906293">isFile</a></span><span class="op" id="5918319">(</span><span class="ident" id="5918320"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5918324">.</span><span class="ident" id="5918325"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5918333">(</span><span class="ident" id="5918334"><a href="/gostd/go/build/build.go.html#5918142">root</a></span><span class="op" id="5918338">,</span>&nbsp;<span class="ident" id="5918340"><a href="/gostd/go/build/build.go.html#5915595">pkga</a></span><span class="op" id="5918344">)</span><span class="op" id="5918345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918350">if</span>&nbsp;<span class="ident" id="5918353"><a href="/gostd/go/build/build.go.html#5918218">isDir</a></span>&nbsp;<span class="op" id="5918359">||</span>&nbsp;<span class="ident" id="5918362"><a href="/gostd/go/build/build.go.html#5916109">binaryOnly</a></span>&nbsp;<span class="op" id="5918373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918379"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5918380">.</span><span class="ident" id="5918381"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span>&nbsp;<span class="op" id="5918385">=</span>&nbsp;<span class="ident" id="5918387"><a href="/gostd/go/build/build.go.html#5918175">dir</a></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918395"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5918396">.</span><span class="ident" id="5918397"><a href="/gostd/go/build/build.go.html#5911109">Root</a></span>&nbsp;<span class="op" id="5918402">=</span>&nbsp;<span class="ident" id="5918404"><a href="/gostd/go/build/build.go.html#5918142">root</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918413">goto</span>&nbsp;<span class="ident" id="5918418"><a href="/gostd/go/build/build.go.html#5919049">Found</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5918427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918432"><a href="/gostd/go/build/build.go.html#5917685">tried</a></span><span class="op" id="5918437">.</span><span class="ident" id="5918438"><a href="/gostd/go/build/build.go.html#5917720">gopath</a></span>&nbsp;<span class="op" id="5918445">=</span>&nbsp;<span class="builtinfunc" id="5918447">append</span><span class="op" id="5918453">(</span><span class="ident" id="5918454"><a href="/gostd/go/build/build.go.html#5917685">tried</a></span><span class="op" id="5918459">.</span><span class="ident" id="5918460"><a href="/gostd/go/build/build.go.html#5917720">gopath</a></span><span class="op" id="5918466">,</span>&nbsp;<span class="ident" id="5918468"><a href="/gostd/go/build/build.go.html#5918175">dir</a></span><span class="op" id="5918471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5918475">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5918480">//&nbsp;package&nbsp;was&nbsp;not&nbsp;found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918507">var</span>&nbsp;<span class="ident" id="5918511">paths</span>&nbsp;<span class="op" id="5918517">[</span><span class="op" id="5918518">]</span><span class="builtintype" id="5918519">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918528">if</span>&nbsp;<span class="ident" id="5918531"><a href="/gostd/go/build/build.go.html#5917685">tried</a></span><span class="op" id="5918536">.</span><span class="ident" id="5918537"><a href="/gostd/go/build/build.go.html#5917703">goroot</a></span>&nbsp;<span class="op" id="5918544">!=</span>&nbsp;<span class="string" id="5918547">&#34;&#34;</span>&nbsp;<span class="op" id="5918550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918555"><a href="/gostd/go/build/build.go.html#5918511">paths</a></span>&nbsp;<span class="op" id="5918561">=</span>&nbsp;<span class="builtinfunc" id="5918563">append</span><span class="op" id="5918569">(</span><span class="ident" id="5918570"><a href="/gostd/go/build/build.go.html#5918511">paths</a></span><span class="op" id="5918575">,</span>&nbsp;<span class="ident" id="5918577"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5918580">.</span><span class="ident" id="5918581"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5918588">(</span><span class="string" id="5918589">&#34;\t%s&nbsp;(from&nbsp;$GOROOT)&#34;</span><span class="op" id="5918610">,</span>&nbsp;<span class="ident" id="5918612"><a href="/gostd/go/build/build.go.html#5917685">tried</a></span><span class="op" id="5918617">.</span><span class="ident" id="5918618"><a href="/gostd/go/build/build.go.html#5917703">goroot</a></span><span class="op" id="5918624">)</span><span class="op" id="5918625">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5918629">}</span>&nbsp;<span class="keyword" id="5918631">else</span>&nbsp;<span class="op" id="5918636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918641"><a href="/gostd/go/build/build.go.html#5918511">paths</a></span>&nbsp;<span class="op" id="5918647">=</span>&nbsp;<span class="builtinfunc" id="5918649">append</span><span class="op" id="5918655">(</span><span class="ident" id="5918656"><a href="/gostd/go/build/build.go.html#5918511">paths</a></span><span class="op" id="5918661">,</span>&nbsp;<span class="string" id="5918663">&#34;\t($GOROOT&nbsp;not&nbsp;set)&#34;</span><span class="op" id="5918684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5918688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918692">var</span>&nbsp;<span class="ident" id="5918696">i</span>&nbsp;<span class="builtintype" id="5918698">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918704">var</span>&nbsp;<span class="ident" id="5918708">format</span>&nbsp;<span class="op" id="5918715">=</span>&nbsp;<span class="string" id="5918717">&#34;\t%s&nbsp;(from&nbsp;$GOPATH)&#34;</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918741">for</span>&nbsp;<span class="op" id="5918745">;</span>&nbsp;<span class="ident" id="5918747"><a href="/gostd/go/build/build.go.html#5918696">i</a></span>&nbsp;<span class="op" id="5918749">&lt;</span>&nbsp;<span class="builtinfunc" id="5918751">len</span><span class="op" id="5918754">(</span><span class="ident" id="5918755"><a href="/gostd/go/build/build.go.html#5917685">tried</a></span><span class="op" id="5918760">.</span><span class="ident" id="5918761"><a href="/gostd/go/build/build.go.html#5917720">gopath</a></span><span class="op" id="5918767">)</span><span class="op" id="5918768">;</span>&nbsp;<span class="ident" id="5918770"><a href="/gostd/go/build/build.go.html#5918696">i</a></span><span class="op" id="5918771">++</span>&nbsp;<span class="op" id="5918774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918779">if</span>&nbsp;<span class="ident" id="5918782"><a href="/gostd/go/build/build.go.html#5918696">i</a></span>&nbsp;<span class="op" id="5918784">&gt;</span>&nbsp;<span class="num" id="5918786">0</span>&nbsp;<span class="op" id="5918788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918794"><a href="/gostd/go/build/build.go.html#5918708">format</a></span>&nbsp;<span class="op" id="5918801">=</span>&nbsp;<span class="string" id="5918803">&#34;\t%s&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5918813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918818"><a href="/gostd/go/build/build.go.html#5918511">paths</a></span>&nbsp;<span class="op" id="5918824">=</span>&nbsp;<span class="builtinfunc" id="5918826">append</span><span class="op" id="5918832">(</span><span class="ident" id="5918833"><a href="/gostd/go/build/build.go.html#5918511">paths</a></span><span class="op" id="5918838">,</span>&nbsp;<span class="ident" id="5918840"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5918843">.</span><span class="ident" id="5918844"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5918851">(</span><span class="ident" id="5918852"><a href="/gostd/go/build/build.go.html#5918708">format</a></span><span class="op" id="5918858">,</span>&nbsp;<span class="ident" id="5918860"><a href="/gostd/go/build/build.go.html#5917685">tried</a></span><span class="op" id="5918865">.</span><span class="ident" id="5918866"><a href="/gostd/go/build/build.go.html#5917720">gopath</a></span><span class="op" id="5918872">[</span><span class="ident" id="5918873"><a href="/gostd/go/build/build.go.html#5918696">i</a></span><span class="op" id="5918874">]</span><span class="op" id="5918875">)</span><span class="op" id="5918876">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5918880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918884">if</span>&nbsp;<span class="ident" id="5918887"><a href="/gostd/go/build/build.go.html#5918696">i</a></span>&nbsp;<span class="op" id="5918889">==</span>&nbsp;<span class="num" id="5918892">0</span>&nbsp;<span class="op" id="5918894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5918899"><a href="/gostd/go/build/build.go.html#5918511">paths</a></span>&nbsp;<span class="op" id="5918905">=</span>&nbsp;<span class="builtinfunc" id="5918907">append</span><span class="op" id="5918913">(</span><span class="ident" id="5918914"><a href="/gostd/go/build/build.go.html#5918511">paths</a></span><span class="op" id="5918919">,</span>&nbsp;<span class="string" id="5918921">&#34;\t($GOPATH&nbsp;not&nbsp;set)&#34;</span><span class="op" id="5918942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5918946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5918950">return</span>&nbsp;<span class="ident" id="5918957"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5918958">,</span>&nbsp;<span class="ident" id="5918960"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5918963">.</span><span class="ident" id="5918964"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5918970">(</span><span class="string" id="5918971">&#34;cannot&nbsp;find&nbsp;package&nbsp;%q&nbsp;in&nbsp;any&nbsp;of:\n%s&#34;</span><span class="op" id="5919010">,</span>&nbsp;<span class="ident" id="5919012"><a href="/gostd/go/build/build.go.html#5915402">path</a></span><span class="op" id="5919016">,</span>&nbsp;<span class="ident" id="5919018"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5919025">.</span><span class="ident" id="5919026"><a href="/gostd/strings/strings.go.html#2974969">Join</a></span><span class="op" id="5919030">(</span><span class="ident" id="5919031"><a href="/gostd/go/build/build.go.html#5918511">paths</a></span><span class="op" id="5919036">,</span>&nbsp;<span class="string" id="5919038">&#34;\n&#34;</span><span class="op" id="5919042">)</span><span class="op" id="5919043">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5919046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="5919049">Found</span><span class="op" id="5919054">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919057">if</span>&nbsp;<span class="ident" id="5919060"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919061">.</span><span class="ident" id="5919062"><a href="/gostd/go/build/build.go.html#5911109">Root</a></span>&nbsp;<span class="op" id="5919067">!=</span>&nbsp;<span class="string" id="5919070">&#34;&#34;</span>&nbsp;<span class="op" id="5919073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919077"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919078">.</span><span class="ident" id="5919079"><a href="/gostd/go/build/build.go.html#5911177">SrcRoot</a></span>&nbsp;<span class="op" id="5919087">=</span>&nbsp;<span class="ident" id="5919089"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5919093">.</span><span class="ident" id="5919094"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5919102">(</span><span class="ident" id="5919103"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919104">.</span><span class="ident" id="5919105"><a href="/gostd/go/build/build.go.html#5911109">Root</a></span><span class="op" id="5919109">,</span>&nbsp;<span class="string" id="5919111">&#34;src&#34;</span><span class="op" id="5919116">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919120"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919121">.</span><span class="ident" id="5919122"><a href="/gostd/go/build/build.go.html#5911250">PkgRoot</a></span>&nbsp;<span class="op" id="5919130">=</span>&nbsp;<span class="ident" id="5919132"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5919136">.</span><span class="ident" id="5919137"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5919145">(</span><span class="ident" id="5919146"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919147">.</span><span class="ident" id="5919148"><a href="/gostd/go/build/build.go.html#5911109">Root</a></span><span class="op" id="5919152">,</span>&nbsp;<span class="string" id="5919154">&#34;pkg&#34;</span><span class="op" id="5919159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919163"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919164">.</span><span class="ident" id="5919165"><a href="/gostd/go/build/build.go.html#5911324">BinDir</a></span>&nbsp;<span class="op" id="5919172">=</span>&nbsp;<span class="ident" id="5919174"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5919178">.</span><span class="ident" id="5919179"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5919187">(</span><span class="ident" id="5919188"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919189">.</span><span class="ident" id="5919190"><a href="/gostd/go/build/build.go.html#5911109">Root</a></span><span class="op" id="5919194">,</span>&nbsp;<span class="string" id="5919196">&#34;bin&#34;</span><span class="op" id="5919201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919205">if</span>&nbsp;<span class="ident" id="5919208"><a href="/gostd/go/build/build.go.html#5915595">pkga</a></span>&nbsp;<span class="op" id="5919213">!=</span>&nbsp;<span class="string" id="5919216">&#34;&#34;</span>&nbsp;<span class="op" id="5919219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919224"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919225">.</span><span class="ident" id="5919226"><a href="/gostd/go/build/build.go.html#5911445">PkgObj</a></span>&nbsp;<span class="op" id="5919233">=</span>&nbsp;<span class="ident" id="5919235"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5919239">.</span><span class="ident" id="5919240"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5919248">(</span><span class="ident" id="5919249"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919250">.</span><span class="ident" id="5919251"><a href="/gostd/go/build/build.go.html#5911109">Root</a></span><span class="op" id="5919255">,</span>&nbsp;<span class="ident" id="5919257"><a href="/gostd/go/build/build.go.html#5915595">pkga</a></span><span class="op" id="5919261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5919265">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5919268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919272">if</span>&nbsp;<span class="ident" id="5919275"><a href="/gostd/go/build/build.go.html#5915430">mode</a></span><span class="op" id="5919279">&amp;</span><span class="ident" id="5919280"><a href="/gostd/go/build/build.go.html#5910290">FindOnly</a></span>&nbsp;<span class="op" id="5919289">!=</span>&nbsp;<span class="num" id="5919292">0</span>&nbsp;<span class="op" id="5919294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919298">return</span>&nbsp;<span class="ident" id="5919305"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919306">,</span>&nbsp;<span class="ident" id="5919308"><a href="/gostd/go/build/build.go.html#5915612">pkgerr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5919316">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919319">if</span>&nbsp;<span class="ident" id="5919322"><a href="/gostd/go/build/build.go.html#5916109">binaryOnly</a></span>&nbsp;<span class="op" id="5919333">&amp;&amp;</span>&nbsp;<span class="op" id="5919336">(</span><span class="ident" id="5919337"><a href="/gostd/go/build/build.go.html#5915430">mode</a></span><span class="op" id="5919341">&amp;</span><span class="ident" id="5919342"><a href="/gostd/go/build/build.go.html#5910439">AllowBinary</a></span><span class="op" id="5919353">)</span>&nbsp;<span class="op" id="5919355">!=</span>&nbsp;<span class="num" id="5919358">0</span>&nbsp;<span class="op" id="5919360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919364">return</span>&nbsp;<span class="ident" id="5919371"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919372">,</span>&nbsp;<span class="ident" id="5919374"><a href="/gostd/go/build/build.go.html#5915612">pkgerr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5919382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919386">dirs</span><span class="op" id="5919390">,</span>&nbsp;<span class="ident" id="5919392">err</span>&nbsp;<span class="op" id="5919396">:=</span>&nbsp;<span class="ident" id="5919399"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5919403">.</span><span class="ident" id="5919404"><a href="/gostd/go/build/build.go.html#5905703">readDir</a></span><span class="op" id="5919411">(</span><span class="ident" id="5919412"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919413">.</span><span class="ident" id="5919414"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span><span class="op" id="5919417">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919420">if</span>&nbsp;<span class="ident" id="5919423"><a href="/gostd/go/build/build.go.html#5919392">err</a></span>&nbsp;<span class="op" id="5919427">!=</span>&nbsp;<span class="builtintype" id="5919430">nil</span>&nbsp;<span class="op" id="5919434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919438">return</span>&nbsp;<span class="ident" id="5919445"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919446">,</span>&nbsp;<span class="ident" id="5919448"><a href="/gostd/go/build/build.go.html#5919392">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5919453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919457">var</span>&nbsp;<span class="ident" id="5919461">Sfiles</span>&nbsp;<span class="op" id="5919468">[</span><span class="op" id="5919469">]</span><span class="builtintype" id="5919470">string</span>&nbsp;<span class="comment" id="5919477">//&nbsp;files&nbsp;with&nbsp;&#34;.S&#34;&nbsp;(capital&nbsp;S)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919509">var</span>&nbsp;<span class="ident" id="5919513">firstFile</span><span class="op" id="5919522">,</span>&nbsp;<span class="ident" id="5919524">firstCommentFile</span>&nbsp;<span class="builtintype" id="5919541">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919549">imported</span>&nbsp;<span class="op" id="5919558">:=</span>&nbsp;<span class="builtinfunc" id="5919561">make</span><span class="op" id="5919565">(</span><span class="keyword" id="5919566">map</span><span class="op" id="5919569">[</span><span class="builtintype" id="5919570">string</span><span class="op" id="5919576">]</span><span class="op" id="5919577">[</span><span class="op" id="5919578">]</span><span class="ident" id="5919579"><a href="/gostd/go/build/build.go.html#5900466">token</a></span><span class="op" id="5919584">.</span><span class="ident" id="5919585"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5919593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919596">testImported</span>&nbsp;<span class="op" id="5919609">:=</span>&nbsp;<span class="builtinfunc" id="5919612">make</span><span class="op" id="5919616">(</span><span class="keyword" id="5919617">map</span><span class="op" id="5919620">[</span><span class="builtintype" id="5919621">string</span><span class="op" id="5919627">]</span><span class="op" id="5919628">[</span><span class="op" id="5919629">]</span><span class="ident" id="5919630"><a href="/gostd/go/build/build.go.html#5900466">token</a></span><span class="op" id="5919635">.</span><span class="ident" id="5919636"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5919644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919647">xTestImported</span>&nbsp;<span class="op" id="5919661">:=</span>&nbsp;<span class="builtinfunc" id="5919664">make</span><span class="op" id="5919668">(</span><span class="keyword" id="5919669">map</span><span class="op" id="5919672">[</span><span class="builtintype" id="5919673">string</span><span class="op" id="5919679">]</span><span class="op" id="5919680">[</span><span class="op" id="5919681">]</span><span class="ident" id="5919682"><a href="/gostd/go/build/build.go.html#5900466">token</a></span><span class="op" id="5919687">.</span><span class="ident" id="5919688"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5919696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919699">allTags</span>&nbsp;<span class="op" id="5919707">:=</span>&nbsp;<span class="builtinfunc" id="5919710">make</span><span class="op" id="5919714">(</span><span class="keyword" id="5919715">map</span><span class="op" id="5919718">[</span><span class="builtintype" id="5919719">string</span><span class="op" id="5919725">]</span><span class="builtintype" id="5919726">bool</span><span class="op" id="5919730">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919733">fset</span>&nbsp;<span class="op" id="5919738">:=</span>&nbsp;<span class="ident" id="5919741"><a href="/gostd/go/build/build.go.html#5900466">token</a></span><span class="op" id="5919746">.</span><span class="ident" id="5919747"><a href="/gostd/go/token/position.go.html#3883646">NewFileSet</a></span><span class="op" id="5919757">(</span><span class="op" id="5919758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919761">for</span>&nbsp;<span class="ident" id="5919765">_</span><span class="op" id="5919766">,</span>&nbsp;<span class="ident" id="5919768">d</span>&nbsp;<span class="op" id="5919770">:=</span>&nbsp;<span class="keyword" id="5919773">range</span>&nbsp;<span class="ident" id="5919779"><a href="/gostd/go/build/build.go.html#5919386">dirs</a></span>&nbsp;<span class="op" id="5919784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919788">if</span>&nbsp;<span class="ident" id="5919791"><a href="/gostd/go/build/build.go.html#5919768">d</a></span><span class="op" id="5919792">.</span><span class="ident" id="5919793"><a href="/gostd/os/types.go.html#2472696">IsDir</a></span><span class="op" id="5919798">(</span><span class="op" id="5919799">)</span>&nbsp;<span class="op" id="5919801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919806">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5919817">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919822">name</span>&nbsp;<span class="op" id="5919827">:=</span>&nbsp;<span class="ident" id="5919830"><a href="/gostd/go/build/build.go.html#5919768">d</a></span><span class="op" id="5919831">.</span><span class="ident" id="5919832"><a href="/gostd/os/types.go.html#2472482">Name</a></span><span class="op" id="5919836">(</span><span class="op" id="5919837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919841">ext</span>&nbsp;<span class="op" id="5919845">:=</span>&nbsp;<span class="ident" id="5919848"><a href="/gostd/go/build/build.go.html#5914540">nameExt</a></span><span class="op" id="5919855">(</span><span class="ident" id="5919856"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5919860">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5919865">match</span><span class="op" id="5919870">,</span>&nbsp;<span class="ident" id="5919872">data</span><span class="op" id="5919876">,</span>&nbsp;<span class="ident" id="5919878">filename</span><span class="op" id="5919886">,</span>&nbsp;<span class="ident" id="5919888">err</span>&nbsp;<span class="op" id="5919892">:=</span>&nbsp;<span class="ident" id="5919895"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5919899">.</span><span class="ident" id="5919900"><a href="/gostd/go/build/build.go.html#5927585">matchFile</a></span><span class="op" id="5919909">(</span><span class="ident" id="5919910"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919911">.</span><span class="ident" id="5919912"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span><span class="op" id="5919915">,</span>&nbsp;<span class="ident" id="5919917"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5919921">,</span>&nbsp;<span class="builtintype" id="5919923">true</span><span class="op" id="5919927">,</span>&nbsp;<span class="ident" id="5919929"><a href="/gostd/go/build/build.go.html#5919699">allTags</a></span><span class="op" id="5919936">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919940">if</span>&nbsp;<span class="ident" id="5919943"><a href="/gostd/go/build/build.go.html#5919888">err</a></span>&nbsp;<span class="op" id="5919947">!=</span>&nbsp;<span class="builtintype" id="5919950">nil</span>&nbsp;<span class="op" id="5919954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919959">return</span>&nbsp;<span class="ident" id="5919966"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5919967">,</span>&nbsp;<span class="ident" id="5919969"><a href="/gostd/go/build/build.go.html#5919888">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5919975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919979">if</span>&nbsp;<span class="op" id="5919982">!</span><span class="ident" id="5919983"><a href="/gostd/go/build/build.go.html#5919865">match</a></span>&nbsp;<span class="op" id="5919989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5919994">if</span>&nbsp;<span class="ident" id="5919997"><a href="/gostd/go/build/build.go.html#5919841">ext</a></span>&nbsp;<span class="op" id="5920001">==</span>&nbsp;<span class="string" id="5920004">&#34;.go&#34;</span>&nbsp;<span class="op" id="5920010">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920016"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920017">.</span><span class="ident" id="5920018"><a href="/gostd/go/build/build.go.html#5911811">IgnoredGoFiles</a></span>&nbsp;<span class="op" id="5920033">=</span>&nbsp;<span class="builtinfunc" id="5920035">append</span><span class="op" id="5920041">(</span><span class="ident" id="5920042"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920043">.</span><span class="ident" id="5920044"><a href="/gostd/go/build/build.go.html#5911811">IgnoredGoFiles</a></span><span class="op" id="5920058">,</span>&nbsp;<span class="ident" id="5920060"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5920064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5920069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920074">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5920085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5920090">//&nbsp;Going&nbsp;to&nbsp;save&nbsp;the&nbsp;file.&nbsp;&nbsp;For&nbsp;non-Go&nbsp;files,&nbsp;can&nbsp;stop&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920153">switch</span>&nbsp;<span class="ident" id="5920160"><a href="/gostd/go/build/build.go.html#5919841">ext</a></span>&nbsp;<span class="op" id="5920164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920168">case</span>&nbsp;<span class="string" id="5920173">&#34;.c&#34;</span><span class="op" id="5920177">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920182"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920183">.</span><span class="ident" id="5920184"><a href="/gostd/go/build/build.go.html#5911879">CFiles</a></span>&nbsp;<span class="op" id="5920191">=</span>&nbsp;<span class="builtinfunc" id="5920193">append</span><span class="op" id="5920199">(</span><span class="ident" id="5920200"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920201">.</span><span class="ident" id="5920202"><a href="/gostd/go/build/build.go.html#5911879">CFiles</a></span><span class="op" id="5920208">,</span>&nbsp;<span class="ident" id="5920210"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5920214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920219">continue</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920230">case</span>&nbsp;<span class="string" id="5920235">&#34;.cc&#34;</span><span class="op" id="5920240">,</span>&nbsp;<span class="string" id="5920242">&#34;.cpp&#34;</span><span class="op" id="5920248">,</span>&nbsp;<span class="string" id="5920250">&#34;.cxx&#34;</span><span class="op" id="5920256">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920261"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920262">.</span><span class="ident" id="5920263"><a href="/gostd/go/build/build.go.html#5911923">CXXFiles</a></span>&nbsp;<span class="op" id="5920272">=</span>&nbsp;<span class="builtinfunc" id="5920274">append</span><span class="op" id="5920280">(</span><span class="ident" id="5920281"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920282">.</span><span class="ident" id="5920283"><a href="/gostd/go/build/build.go.html#5911923">CXXFiles</a></span><span class="op" id="5920291">,</span>&nbsp;<span class="ident" id="5920293"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5920297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920302">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920313">case</span>&nbsp;<span class="string" id="5920318">&#34;.m&#34;</span><span class="op" id="5920322">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920327"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920328">.</span><span class="ident" id="5920329"><a href="/gostd/go/build/build.go.html#5911983">MFiles</a></span>&nbsp;<span class="op" id="5920336">=</span>&nbsp;<span class="builtinfunc" id="5920338">append</span><span class="op" id="5920344">(</span><span class="ident" id="5920345"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920346">.</span><span class="ident" id="5920347"><a href="/gostd/go/build/build.go.html#5911983">MFiles</a></span><span class="op" id="5920353">,</span>&nbsp;<span class="ident" id="5920355"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5920359">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920364">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920375">case</span>&nbsp;<span class="string" id="5920380">&#34;.h&#34;</span><span class="op" id="5920384">,</span>&nbsp;<span class="string" id="5920386">&#34;.hh&#34;</span><span class="op" id="5920391">,</span>&nbsp;<span class="string" id="5920393">&#34;.hpp&#34;</span><span class="op" id="5920399">,</span>&nbsp;<span class="string" id="5920401">&#34;.hxx&#34;</span><span class="op" id="5920407">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920412"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920413">.</span><span class="ident" id="5920414"><a href="/gostd/go/build/build.go.html#5912041">HFiles</a></span>&nbsp;<span class="op" id="5920421">=</span>&nbsp;<span class="builtinfunc" id="5920423">append</span><span class="op" id="5920429">(</span><span class="ident" id="5920430"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920431">.</span><span class="ident" id="5920432"><a href="/gostd/go/build/build.go.html#5912041">HFiles</a></span><span class="op" id="5920438">,</span>&nbsp;<span class="ident" id="5920440"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5920444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920449">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920460">case</span>&nbsp;<span class="string" id="5920465">&#34;.s&#34;</span><span class="op" id="5920469">:</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920474"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920475">.</span><span class="ident" id="5920476"><a href="/gostd/go/build/build.go.html#5912105">SFiles</a></span>&nbsp;<span class="op" id="5920483">=</span>&nbsp;<span class="builtinfunc" id="5920485">append</span><span class="op" id="5920491">(</span><span class="ident" id="5920492"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920493">.</span><span class="ident" id="5920494"><a href="/gostd/go/build/build.go.html#5912105">SFiles</a></span><span class="op" id="5920500">,</span>&nbsp;<span class="ident" id="5920502"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5920506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920511">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920522">case</span>&nbsp;<span class="string" id="5920527">&#34;.S&#34;</span><span class="op" id="5920531">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920536"><a href="/gostd/go/build/build.go.html#5919461">Sfiles</a></span>&nbsp;<span class="op" id="5920543">=</span>&nbsp;<span class="builtinfunc" id="5920545">append</span><span class="op" id="5920551">(</span><span class="ident" id="5920552"><a href="/gostd/go/build/build.go.html#5919461">Sfiles</a></span><span class="op" id="5920558">,</span>&nbsp;<span class="ident" id="5920560"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5920564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920569">continue</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920580">case</span>&nbsp;<span class="string" id="5920585">&#34;.swig&#34;</span><span class="op" id="5920592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920597"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920598">.</span><span class="ident" id="5920599"><a href="/gostd/go/build/build.go.html#5912149">SwigFiles</a></span>&nbsp;<span class="op" id="5920609">=</span>&nbsp;<span class="builtinfunc" id="5920611">append</span><span class="op" id="5920617">(</span><span class="ident" id="5920618"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920619">.</span><span class="ident" id="5920620"><a href="/gostd/go/build/build.go.html#5912149">SwigFiles</a></span><span class="op" id="5920629">,</span>&nbsp;<span class="ident" id="5920631"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5920635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920640">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920651">case</span>&nbsp;<span class="string" id="5920656">&#34;.swigcxx&#34;</span><span class="op" id="5920666">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920671"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920672">.</span><span class="ident" id="5920673"><a href="/gostd/go/build/build.go.html#5912189">SwigCXXFiles</a></span>&nbsp;<span class="op" id="5920686">=</span>&nbsp;<span class="builtinfunc" id="5920688">append</span><span class="op" id="5920694">(</span><span class="ident" id="5920695"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920696">.</span><span class="ident" id="5920697"><a href="/gostd/go/build/build.go.html#5912189">SwigCXXFiles</a></span><span class="op" id="5920709">,</span>&nbsp;<span class="ident" id="5920711"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5920715">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920720">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920731">case</span>&nbsp;<span class="string" id="5920736">&#34;.syso&#34;</span><span class="op" id="5920743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5920748">//&nbsp;binary&nbsp;objects&nbsp;to&nbsp;add&nbsp;to&nbsp;package&nbsp;archive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5920795">//&nbsp;Likely&nbsp;of&nbsp;the&nbsp;form&nbsp;foo_windows.syso,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5920842">//&nbsp;the&nbsp;name&nbsp;was&nbsp;vetted&nbsp;above&nbsp;with&nbsp;goodOSArchFile.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920895"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920896">.</span><span class="ident" id="5920897"><a href="/gostd/go/build/build.go.html#5912232">SysoFiles</a></span>&nbsp;<span class="op" id="5920907">=</span>&nbsp;<span class="builtinfunc" id="5920909">append</span><span class="op" id="5920915">(</span><span class="ident" id="5920916"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5920917">.</span><span class="ident" id="5920918"><a href="/gostd/go/build/build.go.html#5912232">SysoFiles</a></span><span class="op" id="5920927">,</span>&nbsp;<span class="ident" id="5920929"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5920933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5920938">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5920949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5920954">pf</span><span class="op" id="5920956">,</span>&nbsp;<span class="ident" id="5920958"><a href="/gostd/go/build/build.go.html#5919888">err</a></span>&nbsp;<span class="op" id="5920962">:=</span>&nbsp;<span class="ident" id="5920965"><a href="/gostd/go/build/build.go.html#5900453">parser</a></span><span class="op" id="5920971">.</span><span class="ident" id="5920972"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="5920981">(</span><span class="ident" id="5920982"><a href="/gostd/go/build/build.go.html#5919733">fset</a></span><span class="op" id="5920986">,</span>&nbsp;<span class="ident" id="5920988"><a href="/gostd/go/build/build.go.html#5919878">filename</a></span><span class="op" id="5920996">,</span>&nbsp;<span class="ident" id="5920998"><a href="/gostd/go/build/build.go.html#5919872">data</a></span><span class="op" id="5921002">,</span>&nbsp;<span class="ident" id="5921004"><a href="/gostd/go/build/build.go.html#5900453">parser</a></span><span class="op" id="5921010">.</span><span class="ident" id="5921011"><a href="/gostd/go/parser/interface.go.html#5951640">ImportsOnly</a></span><span class="op" id="5921022">|</span><span class="ident" id="5921023"><a href="/gostd/go/build/build.go.html#5900453">parser</a></span><span class="op" id="5921029">.</span><span class="ident" id="5921030"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="5921043">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921047">if</span>&nbsp;<span class="ident" id="5921050"><a href="/gostd/go/build/build.go.html#5919888">err</a></span>&nbsp;<span class="op" id="5921054">!=</span>&nbsp;<span class="builtintype" id="5921057">nil</span>&nbsp;<span class="op" id="5921061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921066">return</span>&nbsp;<span class="ident" id="5921073"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921074">,</span>&nbsp;<span class="ident" id="5921076"><a href="/gostd/go/build/build.go.html#5919888">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5921082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921087">pkg</span>&nbsp;<span class="op" id="5921091">:=</span>&nbsp;<span class="ident" id="5921094"><a href="/gostd/go/build/build.go.html#5920954">pf</a></span><span class="op" id="5921096">.</span><span class="ident" id="5921097"><a href="/gostd/go/ast/ast.go.html#3824009">Name</a></span><span class="op" id="5921101">.</span><span class="ident" id="5921102"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921109">if</span>&nbsp;<span class="ident" id="5921112"><a href="/gostd/go/build/build.go.html#5921087">pkg</a></span>&nbsp;<span class="op" id="5921116">==</span>&nbsp;<span class="string" id="5921119">&#34;documentation&#34;</span>&nbsp;<span class="op" id="5921135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921140"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921141">.</span><span class="ident" id="5921142"><a href="/gostd/go/build/build.go.html#5911811">IgnoredGoFiles</a></span>&nbsp;<span class="op" id="5921157">=</span>&nbsp;<span class="builtinfunc" id="5921159">append</span><span class="op" id="5921165">(</span><span class="ident" id="5921166"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921167">.</span><span class="ident" id="5921168"><a href="/gostd/go/build/build.go.html#5911811">IgnoredGoFiles</a></span><span class="op" id="5921182">,</span>&nbsp;<span class="ident" id="5921184"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5921188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921193">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5921204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921209">isTest</span>&nbsp;<span class="op" id="5921216">:=</span>&nbsp;<span class="ident" id="5921219"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5921226">.</span><span class="ident" id="5921227"><a href="/gostd/strings/strings.go.html#2975527">HasSuffix</a></span><span class="op" id="5921236">(</span><span class="ident" id="5921237"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5921241">,</span>&nbsp;<span class="string" id="5921243">&#34;_test.go&#34;</span><span class="op" id="5921253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921257">isXTest</span>&nbsp;<span class="op" id="5921265">:=</span>&nbsp;<span class="builtintype" id="5921268">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921276">if</span>&nbsp;<span class="ident" id="5921279"><a href="/gostd/go/build/build.go.html#5921209">isTest</a></span>&nbsp;<span class="op" id="5921286">&amp;&amp;</span>&nbsp;<span class="ident" id="5921289"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5921296">.</span><span class="ident" id="5921297"><a href="/gostd/strings/strings.go.html#2975527">HasSuffix</a></span><span class="op" id="5921306">(</span><span class="ident" id="5921307"><a href="/gostd/go/build/build.go.html#5921087">pkg</a></span><span class="op" id="5921310">,</span>&nbsp;<span class="string" id="5921312">&#34;_test&#34;</span><span class="op" id="5921319">)</span>&nbsp;<span class="op" id="5921321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921326"><a href="/gostd/go/build/build.go.html#5921257">isXTest</a></span>&nbsp;<span class="op" id="5921334">=</span>&nbsp;<span class="builtintype" id="5921336">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921344"><a href="/gostd/go/build/build.go.html#5921087">pkg</a></span>&nbsp;<span class="op" id="5921348">=</span>&nbsp;<span class="ident" id="5921350"><a href="/gostd/go/build/build.go.html#5921087">pkg</a></span><span class="op" id="5921353">[</span><span class="op" id="5921354">:</span><span class="builtinfunc" id="5921355">len</span><span class="op" id="5921358">(</span><span class="ident" id="5921359"><a href="/gostd/go/build/build.go.html#5921087">pkg</a></span><span class="op" id="5921362">)</span><span class="op" id="5921363">-</span><span class="builtinfunc" id="5921364">len</span><span class="op" id="5921367">(</span><span class="string" id="5921368">&#34;_test&#34;</span><span class="op" id="5921375">)</span><span class="op" id="5921376">]</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5921380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921385">if</span>&nbsp;<span class="ident" id="5921388"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921389">.</span><span class="ident" id="5921390"><a href="/gostd/go/build/build.go.html#5910882">Name</a></span>&nbsp;<span class="op" id="5921395">==</span>&nbsp;<span class="string" id="5921398">&#34;&#34;</span>&nbsp;<span class="op" id="5921401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921406"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921407">.</span><span class="ident" id="5921408"><a href="/gostd/go/build/build.go.html#5910882">Name</a></span>&nbsp;<span class="op" id="5921413">=</span>&nbsp;<span class="ident" id="5921415"><a href="/gostd/go/build/build.go.html#5921087">pkg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921422"><a href="/gostd/go/build/build.go.html#5919513">firstFile</a></span>&nbsp;<span class="op" id="5921432">=</span>&nbsp;<span class="ident" id="5921434"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5921441">}</span>&nbsp;<span class="keyword" id="5921443">else</span>&nbsp;<span class="keyword" id="5921448">if</span>&nbsp;<span class="ident" id="5921451"><a href="/gostd/go/build/build.go.html#5921087">pkg</a></span>&nbsp;<span class="op" id="5921455">!=</span>&nbsp;<span class="ident" id="5921458"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921459">.</span><span class="ident" id="5921460"><a href="/gostd/go/build/build.go.html#5910882">Name</a></span>&nbsp;<span class="op" id="5921465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921470">return</span>&nbsp;<span class="ident" id="5921477"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921478">,</span>&nbsp;<span class="op" id="5921480">&amp;</span><span class="ident" id="5921481"><a href="/gostd/go/build/build.go.html#5914095">MultiplePackageError</a></span><span class="op" id="5921501">{</span><span class="ident" id="5921502"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921503">.</span><span class="ident" id="5921504"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span><span class="op" id="5921507">,</span>&nbsp;<span class="op" id="5921509">[</span><span class="op" id="5921510">]</span><span class="builtintype" id="5921511">string</span><span class="op" id="5921517">{</span><span class="ident" id="5921518"><a href="/gostd/go/build/build.go.html#5919513">firstFile</a></span><span class="op" id="5921527">,</span>&nbsp;<span class="ident" id="5921529"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5921533">}</span><span class="op" id="5921534">,</span>&nbsp;<span class="op" id="5921536">[</span><span class="op" id="5921537">]</span><span class="builtintype" id="5921538">string</span><span class="op" id="5921544">{</span><span class="ident" id="5921545"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921546">.</span><span class="ident" id="5921547"><a href="/gostd/go/build/build.go.html#5910882">Name</a></span><span class="op" id="5921551">,</span>&nbsp;<span class="ident" id="5921553"><a href="/gostd/go/build/build.go.html#5921087">pkg</a></span><span class="op" id="5921556">}</span><span class="op" id="5921557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5921561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921565">if</span>&nbsp;<span class="ident" id="5921568"><a href="/gostd/go/build/build.go.html#5920954">pf</a></span><span class="op" id="5921570">.</span><span class="ident" id="5921571"><a href="/gostd/go/ast/ast.go.html#3823884">Doc</a></span>&nbsp;<span class="op" id="5921575">!=</span>&nbsp;<span class="builtintype" id="5921578">nil</span>&nbsp;<span class="op" id="5921582">&amp;&amp;</span>&nbsp;<span class="ident" id="5921585"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921586">.</span><span class="ident" id="5921587"><a href="/gostd/go/build/build.go.html#5910993">Doc</a></span>&nbsp;<span class="op" id="5921591">==</span>&nbsp;<span class="string" id="5921594">&#34;&#34;</span>&nbsp;<span class="op" id="5921597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921602"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921603">.</span><span class="ident" id="5921604"><a href="/gostd/go/build/build.go.html#5910993">Doc</a></span>&nbsp;<span class="op" id="5921608">=</span>&nbsp;<span class="ident" id="5921610"><a href="/gostd/go/build/build.go.html#5900443">doc</a></span><span class="op" id="5921613">.</span><span class="ident" id="5921614"><a href="/gostd/go/doc/synopsis.go.html#3536352">Synopsis</a></span><span class="op" id="5921622">(</span><span class="ident" id="5921623"><a href="/gostd/go/build/build.go.html#5920954">pf</a></span><span class="op" id="5921625">.</span><span class="ident" id="5921626"><a href="/gostd/go/ast/ast.go.html#3823884">Doc</a></span><span class="op" id="5921629">.</span><span class="ident" id="5921630"><a href="/gostd/go/ast/ast.go.html#3796792">Text</a></span><span class="op" id="5921634">(</span><span class="op" id="5921635">)</span><span class="op" id="5921636">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5921640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921645">if</span>&nbsp;<span class="ident" id="5921648"><a href="/gostd/go/build/build.go.html#5915430">mode</a></span><span class="op" id="5921652">&amp;</span><span class="ident" id="5921653"><a href="/gostd/go/build/build.go.html#5910718">ImportComment</a></span>&nbsp;<span class="op" id="5921667">!=</span>&nbsp;<span class="num" id="5921670">0</span>&nbsp;<span class="op" id="5921672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921677">qcom</span><span class="op" id="5921681">,</span>&nbsp;<span class="ident" id="5921683">line</span>&nbsp;<span class="op" id="5921688">:=</span>&nbsp;<span class="ident" id="5921691"><a href="/gostd/go/build/build.go.html#5924256">findImportComment</a></span><span class="op" id="5921708">(</span><span class="ident" id="5921709"><a href="/gostd/go/build/build.go.html#5919872">data</a></span><span class="op" id="5921713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921718">if</span>&nbsp;<span class="ident" id="5921721"><a href="/gostd/go/build/build.go.html#5921683">line</a></span>&nbsp;<span class="op" id="5921726">!=</span>&nbsp;<span class="num" id="5921729">0</span>&nbsp;<span class="op" id="5921731">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921737">com</span><span class="op" id="5921740">,</span>&nbsp;<span class="ident" id="5921742">err</span>&nbsp;<span class="op" id="5921746">:=</span>&nbsp;<span class="ident" id="5921749"><a href="/gostd/go/build/build.go.html#5900562">strconv</a></span><span class="op" id="5921756">.</span><span class="ident" id="5921757"><a href="/gostd/strconv/quote.go.html#2417743">Unquote</a></span><span class="op" id="5921764">(</span><span class="ident" id="5921765"><a href="/gostd/go/build/build.go.html#5921677">qcom</a></span><span class="op" id="5921769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921775">if</span>&nbsp;<span class="ident" id="5921778"><a href="/gostd/go/build/build.go.html#5921742">err</a></span>&nbsp;<span class="op" id="5921782">!=</span>&nbsp;<span class="builtintype" id="5921785">nil</span>&nbsp;<span class="op" id="5921789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921796">return</span>&nbsp;<span class="ident" id="5921803"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921804">,</span>&nbsp;<span class="ident" id="5921806"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5921809">.</span><span class="ident" id="5921810"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5921816">(</span><span class="string" id="5921817">&#34;%s:%d:&nbsp;cannot&nbsp;parse&nbsp;import&nbsp;comment&#34;</span><span class="op" id="5921853">,</span>&nbsp;<span class="ident" id="5921855"><a href="/gostd/go/build/build.go.html#5919878">filename</a></span><span class="op" id="5921863">,</span>&nbsp;<span class="ident" id="5921865"><a href="/gostd/go/build/build.go.html#5921683">line</a></span><span class="op" id="5921869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5921875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5921881">if</span>&nbsp;<span class="ident" id="5921884"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921885">.</span><span class="ident" id="5921886"><a href="/gostd/go/build/build.go.html#5910922">ImportComment</a></span>&nbsp;<span class="op" id="5921900">==</span>&nbsp;<span class="string" id="5921903">&#34;&#34;</span>&nbsp;<span class="op" id="5921906">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921913"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921914">.</span><span class="ident" id="5921915"><a href="/gostd/go/build/build.go.html#5910922">ImportComment</a></span>&nbsp;<span class="op" id="5921929">=</span>&nbsp;<span class="ident" id="5921931"><a href="/gostd/go/build/build.go.html#5921737">com</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5921940"><a href="/gostd/go/build/build.go.html#5919524">firstCommentFile</a></span>&nbsp;<span class="op" id="5921957">=</span>&nbsp;<span class="ident" id="5921959"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5921968">}</span>&nbsp;<span class="keyword" id="5921970">else</span>&nbsp;<span class="keyword" id="5921975">if</span>&nbsp;<span class="ident" id="5921978"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5921979">.</span><span class="ident" id="5921980"><a href="/gostd/go/build/build.go.html#5910922">ImportComment</a></span>&nbsp;<span class="op" id="5921994">!=</span>&nbsp;<span class="ident" id="5921997"><a href="/gostd/go/build/build.go.html#5921737">com</a></span>&nbsp;<span class="op" id="5922001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922008">return</span>&nbsp;<span class="ident" id="5922015"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5922016">,</span>&nbsp;<span class="ident" id="5922018"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5922021">.</span><span class="ident" id="5922022"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5922028">(</span><span class="string" id="5922029">&#34;found&nbsp;import&nbsp;comments&nbsp;%q&nbsp;(%s)&nbsp;and&nbsp;%q&nbsp;(%s)&nbsp;in&nbsp;%s&#34;</span><span class="op" id="5922078">,</span>&nbsp;<span class="ident" id="5922080"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5922081">.</span><span class="ident" id="5922082"><a href="/gostd/go/build/build.go.html#5910922">ImportComment</a></span><span class="op" id="5922095">,</span>&nbsp;<span class="ident" id="5922097"><a href="/gostd/go/build/build.go.html#5919524">firstCommentFile</a></span><span class="op" id="5922113">,</span>&nbsp;<span class="ident" id="5922115"><a href="/gostd/go/build/build.go.html#5921737">com</a></span><span class="op" id="5922118">,</span>&nbsp;<span class="ident" id="5922120"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5922124">,</span>&nbsp;<span class="ident" id="5922126"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5922127">.</span><span class="ident" id="5922128"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span><span class="op" id="5922131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5922137">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5922142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5922146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5922151">//&nbsp;Record&nbsp;imports&nbsp;and&nbsp;information&nbsp;about&nbsp;cgo.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5922198">isCgo</span>&nbsp;<span class="op" id="5922204">:=</span>&nbsp;<span class="builtintype" id="5922207">false</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922215">for</span>&nbsp;<span class="ident" id="5922219">_</span><span class="op" id="5922220">,</span>&nbsp;<span class="ident" id="5922222">decl</span>&nbsp;<span class="op" id="5922227">:=</span>&nbsp;<span class="keyword" id="5922230">range</span>&nbsp;<span class="ident" id="5922236"><a href="/gostd/go/build/build.go.html#5920954">pf</a></span><span class="op" id="5922238">.</span><span class="ident" id="5922239"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span>&nbsp;<span class="op" id="5922245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5922250">d</span><span class="op" id="5922251">,</span>&nbsp;<span class="ident" id="5922253">ok</span>&nbsp;<span class="op" id="5922256">:=</span>&nbsp;<span class="ident" id="5922259"><a href="/gostd/go/build/build.go.html#5922222">decl</a></span><span class="op" id="5922263">.</span><span class="op" id="5922264">(</span><span class="op" id="5922265">*</span><span class="ident" id="5922266"><a href="/gostd/go/build/build.go.html#5900433">ast</a></span><span class="op" id="5922269">.</span><span class="ident" id="5922270"><a href="/gostd/go/ast/ast.go.html#3822162">GenDecl</a></span><span class="op" id="5922277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922282">if</span>&nbsp;<span class="op" id="5922285">!</span><span class="ident" id="5922286"><a href="/gostd/go/build/build.go.html#5922253">ok</a></span>&nbsp;<span class="op" id="5922289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922295">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5922307">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922312">for</span>&nbsp;<span class="ident" id="5922316">_</span><span class="op" id="5922317">,</span>&nbsp;<span class="ident" id="5922319">dspec</span>&nbsp;<span class="op" id="5922325">:=</span>&nbsp;<span class="keyword" id="5922328">range</span>&nbsp;<span class="ident" id="5922334"><a href="/gostd/go/build/build.go.html#5922250">d</a></span><span class="op" id="5922335">.</span><span class="ident" id="5922336"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span>&nbsp;<span class="op" id="5922342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5922348">spec</span><span class="op" id="5922352">,</span>&nbsp;<span class="ident" id="5922354">ok</span>&nbsp;<span class="op" id="5922357">:=</span>&nbsp;<span class="ident" id="5922360"><a href="/gostd/go/build/build.go.html#5922319">dspec</a></span><span class="op" id="5922365">.</span><span class="op" id="5922366">(</span><span class="op" id="5922367">*</span><span class="ident" id="5922368"><a href="/gostd/go/build/build.go.html#5900433">ast</a></span><span class="op" id="5922371">.</span><span class="ident" id="5922372"><a href="/gostd/go/ast/ast.go.html#3819609">ImportSpec</a></span><span class="op" id="5922382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922388">if</span>&nbsp;<span class="op" id="5922391">!</span><span class="ident" id="5922392"><a href="/gostd/go/build/build.go.html#5922354">ok</a></span>&nbsp;<span class="op" id="5922395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922402">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5922415">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5922421">quoted</span>&nbsp;<span class="op" id="5922428">:=</span>&nbsp;<span class="ident" id="5922431"><a href="/gostd/go/build/build.go.html#5922348">spec</a></span><span class="op" id="5922435">.</span><span class="ident" id="5922436"><a href="/gostd/go/ast/ast.go.html#3819761">Path</a></span><span class="op" id="5922440">.</span><span class="ident" id="5922441"><a href="/gostd/go/ast/ast.go.html#3800851">Value</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5922451">path</span><span class="op" id="5922455">,</span>&nbsp;<span class="ident" id="5922457">err</span>&nbsp;<span class="op" id="5922461">:=</span>&nbsp;<span class="ident" id="5922464"><a href="/gostd/go/build/build.go.html#5900562">strconv</a></span><span class="op" id="5922471">.</span><span class="ident" id="5922472"><a href="/gostd/strconv/quote.go.html#2417743">Unquote</a></span><span class="op" id="5922479">(</span><span class="ident" id="5922480"><a href="/gostd/go/build/build.go.html#5922421">quoted</a></span><span class="op" id="5922486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922492">if</span>&nbsp;<span class="ident" id="5922495"><a href="/gostd/go/build/build.go.html#5922457">err</a></span>&nbsp;<span class="op" id="5922499">!=</span>&nbsp;<span class="builtintype" id="5922502">nil</span>&nbsp;<span class="op" id="5922506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5922513"><a href="/gostd/go/build/build.go.html#5900497">log</a></span><span class="op" id="5922516">.</span><span class="ident" id="5922517"><a href="/gostd/log/log.go.html#4079632">Panicf</a></span><span class="op" id="5922523">(</span><span class="string" id="5922524">&#34;%s:&nbsp;parser&nbsp;returned&nbsp;invalid&nbsp;quoted&nbsp;string:&nbsp;&lt;%s&gt;&#34;</span><span class="op" id="5922573">,</span>&nbsp;<span class="ident" id="5922575"><a href="/gostd/go/build/build.go.html#5919878">filename</a></span><span class="op" id="5922583">,</span>&nbsp;<span class="ident" id="5922585"><a href="/gostd/go/build/build.go.html#5922421">quoted</a></span><span class="op" id="5922591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5922597">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922603">if</span>&nbsp;<span class="ident" id="5922606"><a href="/gostd/go/build/build.go.html#5921257">isXTest</a></span>&nbsp;<span class="op" id="5922614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5922621"><a href="/gostd/go/build/build.go.html#5919647">xTestImported</a></span><span class="op" id="5922634">[</span><span class="ident" id="5922635"><a href="/gostd/go/build/build.go.html#5922451">path</a></span><span class="op" id="5922639">]</span>&nbsp;<span class="op" id="5922641">=</span>&nbsp;<span class="builtinfunc" id="5922643">append</span><span class="op" id="5922649">(</span><span class="ident" id="5922650"><a href="/gostd/go/build/build.go.html#5919647">xTestImported</a></span><span class="op" id="5922663">[</span><span class="ident" id="5922664"><a href="/gostd/go/build/build.go.html#5922451">path</a></span><span class="op" id="5922668">]</span><span class="op" id="5922669">,</span>&nbsp;<span class="ident" id="5922671"><a href="/gostd/go/build/build.go.html#5919733">fset</a></span><span class="op" id="5922675">.</span><span class="ident" id="5922676"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="5922684">(</span><span class="ident" id="5922685"><a href="/gostd/go/build/build.go.html#5922348">spec</a></span><span class="op" id="5922689">.</span><span class="ident" id="5922690"><a href="/gostd/go/ast/ast.go.html#3820729">Pos</a></span><span class="op" id="5922693">(</span><span class="op" id="5922694">)</span><span class="op" id="5922695">)</span><span class="op" id="5922696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5922702">}</span>&nbsp;<span class="keyword" id="5922704">else</span>&nbsp;<span class="keyword" id="5922709">if</span>&nbsp;<span class="ident" id="5922712"><a href="/gostd/go/build/build.go.html#5921209">isTest</a></span>&nbsp;<span class="op" id="5922719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5922726"><a href="/gostd/go/build/build.go.html#5919596">testImported</a></span><span class="op" id="5922738">[</span><span class="ident" id="5922739"><a href="/gostd/go/build/build.go.html#5922451">path</a></span><span class="op" id="5922743">]</span>&nbsp;<span class="op" id="5922745">=</span>&nbsp;<span class="builtinfunc" id="5922747">append</span><span class="op" id="5922753">(</span><span class="ident" id="5922754"><a href="/gostd/go/build/build.go.html#5919596">testImported</a></span><span class="op" id="5922766">[</span><span class="ident" id="5922767"><a href="/gostd/go/build/build.go.html#5922451">path</a></span><span class="op" id="5922771">]</span><span class="op" id="5922772">,</span>&nbsp;<span class="ident" id="5922774"><a href="/gostd/go/build/build.go.html#5919733">fset</a></span><span class="op" id="5922778">.</span><span class="ident" id="5922779"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="5922787">(</span><span class="ident" id="5922788"><a href="/gostd/go/build/build.go.html#5922348">spec</a></span><span class="op" id="5922792">.</span><span class="ident" id="5922793"><a href="/gostd/go/ast/ast.go.html#3820729">Pos</a></span><span class="op" id="5922796">(</span><span class="op" id="5922797">)</span><span class="op" id="5922798">)</span><span class="op" id="5922799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5922805">}</span>&nbsp;<span class="keyword" id="5922807">else</span>&nbsp;<span class="op" id="5922812">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5922819"><a href="/gostd/go/build/build.go.html#5919549">imported</a></span><span class="op" id="5922827">[</span><span class="ident" id="5922828"><a href="/gostd/go/build/build.go.html#5922451">path</a></span><span class="op" id="5922832">]</span>&nbsp;<span class="op" id="5922834">=</span>&nbsp;<span class="builtinfunc" id="5922836">append</span><span class="op" id="5922842">(</span><span class="ident" id="5922843"><a href="/gostd/go/build/build.go.html#5919549">imported</a></span><span class="op" id="5922851">[</span><span class="ident" id="5922852"><a href="/gostd/go/build/build.go.html#5922451">path</a></span><span class="op" id="5922856">]</span><span class="op" id="5922857">,</span>&nbsp;<span class="ident" id="5922859"><a href="/gostd/go/build/build.go.html#5919733">fset</a></span><span class="op" id="5922863">.</span><span class="ident" id="5922864"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="5922872">(</span><span class="ident" id="5922873"><a href="/gostd/go/build/build.go.html#5922348">spec</a></span><span class="op" id="5922877">.</span><span class="ident" id="5922878"><a href="/gostd/go/ast/ast.go.html#3820729">Pos</a></span><span class="op" id="5922881">(</span><span class="op" id="5922882">)</span><span class="op" id="5922883">)</span><span class="op" id="5922884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5922890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922896">if</span>&nbsp;<span class="ident" id="5922899"><a href="/gostd/go/build/build.go.html#5922451">path</a></span>&nbsp;<span class="op" id="5922904">==</span>&nbsp;<span class="string" id="5922907">&#34;C&#34;</span>&nbsp;<span class="op" id="5922911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922918">if</span>&nbsp;<span class="ident" id="5922921"><a href="/gostd/go/build/build.go.html#5921209">isTest</a></span>&nbsp;<span class="op" id="5922928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5922936">return</span>&nbsp;<span class="ident" id="5922943"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5922944">,</span>&nbsp;<span class="ident" id="5922946"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5922949">.</span><span class="ident" id="5922950"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5922956">(</span><span class="string" id="5922957">&#34;use&nbsp;of&nbsp;cgo&nbsp;in&nbsp;test&nbsp;%s&nbsp;not&nbsp;supported&#34;</span><span class="op" id="5922994">,</span>&nbsp;<span class="ident" id="5922996"><a href="/gostd/go/build/build.go.html#5919878">filename</a></span><span class="op" id="5923004">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923018">cg</span>&nbsp;<span class="op" id="5923021">:=</span>&nbsp;<span class="ident" id="5923024"><a href="/gostd/go/build/build.go.html#5922348">spec</a></span><span class="op" id="5923028">.</span><span class="ident" id="5923029"><a href="/gostd/go/ast/ast.go.html#3819631">Doc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5923038">if</span>&nbsp;<span class="ident" id="5923041"><a href="/gostd/go/build/build.go.html#5923018">cg</a></span>&nbsp;<span class="op" id="5923044">==</span>&nbsp;<span class="builtintype" id="5923047">nil</span>&nbsp;<span class="op" id="5923051">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5923054">len</span><span class="op" id="5923057">(</span><span class="ident" id="5923058"><a href="/gostd/go/build/build.go.html#5922250">d</a></span><span class="op" id="5923059">.</span><span class="ident" id="5923060"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="5923065">)</span>&nbsp;<span class="op" id="5923067">==</span>&nbsp;<span class="num" id="5923070">1</span>&nbsp;<span class="op" id="5923072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923080"><a href="/gostd/go/build/build.go.html#5923018">cg</a></span>&nbsp;<span class="op" id="5923083">=</span>&nbsp;<span class="ident" id="5923085"><a href="/gostd/go/build/build.go.html#5922250">d</a></span><span class="op" id="5923086">.</span><span class="ident" id="5923087"><a href="/gostd/go/ast/ast.go.html#3822181">Doc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923096">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5923103">if</span>&nbsp;<span class="ident" id="5923106"><a href="/gostd/go/build/build.go.html#5923018">cg</a></span>&nbsp;<span class="op" id="5923109">!=</span>&nbsp;<span class="builtintype" id="5923112">nil</span>&nbsp;<span class="op" id="5923116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5923124">if</span>&nbsp;<span class="ident" id="5923127">err</span>&nbsp;<span class="op" id="5923131">:=</span>&nbsp;<span class="ident" id="5923134"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5923138">.</span><span class="ident" id="5923139"><a href="/gostd/go/build/build.go.html#5931318">saveCgo</a></span><span class="op" id="5923146">(</span><span class="ident" id="5923147"><a href="/gostd/go/build/build.go.html#5919878">filename</a></span><span class="op" id="5923155">,</span>&nbsp;<span class="ident" id="5923157"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923158">,</span>&nbsp;<span class="ident" id="5923160"><a href="/gostd/go/build/build.go.html#5923018">cg</a></span><span class="op" id="5923162">)</span><span class="op" id="5923163">;</span>&nbsp;<span class="ident" id="5923165"><a href="/gostd/go/build/build.go.html#5923127">err</a></span>&nbsp;<span class="op" id="5923169">!=</span>&nbsp;<span class="builtintype" id="5923172">nil</span>&nbsp;<span class="op" id="5923176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5923185">return</span>&nbsp;<span class="ident" id="5923192"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923193">,</span>&nbsp;<span class="ident" id="5923195"><a href="/gostd/go/build/build.go.html#5923127">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923212">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923219"><a href="/gostd/go/build/build.go.html#5922198">isCgo</a></span>&nbsp;<span class="op" id="5923225">=</span>&nbsp;<span class="builtintype" id="5923227">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5923249">if</span>&nbsp;<span class="ident" id="5923252"><a href="/gostd/go/build/build.go.html#5922198">isCgo</a></span>&nbsp;<span class="op" id="5923258">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923263"><a href="/gostd/go/build/build.go.html#5919699">allTags</a></span><span class="op" id="5923270">[</span><span class="string" id="5923271">&#34;cgo&#34;</span><span class="op" id="5923276">]</span>&nbsp;<span class="op" id="5923278">=</span>&nbsp;<span class="builtintype" id="5923280">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5923288">if</span>&nbsp;<span class="ident" id="5923291"><a href="/gostd/go/build/build.go.html#5915380">ctxt</a></span><span class="op" id="5923295">.</span><span class="ident" id="5923296"><a href="/gostd/go/build/build.go.html#5900847">CgoEnabled</a></span>&nbsp;<span class="op" id="5923307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923313"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923314">.</span><span class="ident" id="5923315"><a href="/gostd/go/build/build.go.html#5911750">CgoFiles</a></span>&nbsp;<span class="op" id="5923324">=</span>&nbsp;<span class="builtinfunc" id="5923326">append</span><span class="op" id="5923332">(</span><span class="ident" id="5923333"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923334">.</span><span class="ident" id="5923335"><a href="/gostd/go/build/build.go.html#5911750">CgoFiles</a></span><span class="op" id="5923343">,</span>&nbsp;<span class="ident" id="5923345"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5923349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923354">}</span>&nbsp;<span class="keyword" id="5923356">else</span>&nbsp;<span class="op" id="5923361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923367"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923368">.</span><span class="ident" id="5923369"><a href="/gostd/go/build/build.go.html#5911811">IgnoredGoFiles</a></span>&nbsp;<span class="op" id="5923384">=</span>&nbsp;<span class="builtinfunc" id="5923386">append</span><span class="op" id="5923392">(</span><span class="ident" id="5923393"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923394">.</span><span class="ident" id="5923395"><a href="/gostd/go/build/build.go.html#5911811">IgnoredGoFiles</a></span><span class="op" id="5923409">,</span>&nbsp;<span class="ident" id="5923411"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5923415">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923424">}</span>&nbsp;<span class="keyword" id="5923426">else</span>&nbsp;<span class="keyword" id="5923431">if</span>&nbsp;<span class="ident" id="5923434"><a href="/gostd/go/build/build.go.html#5921257">isXTest</a></span>&nbsp;<span class="op" id="5923442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923447"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923448">.</span><span class="ident" id="5923449"><a href="/gostd/go/build/build.go.html#5912992">XTestGoFiles</a></span>&nbsp;<span class="op" id="5923462">=</span>&nbsp;<span class="builtinfunc" id="5923464">append</span><span class="op" id="5923470">(</span><span class="ident" id="5923471"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923472">.</span><span class="ident" id="5923473"><a href="/gostd/go/build/build.go.html#5912992">XTestGoFiles</a></span><span class="op" id="5923485">,</span>&nbsp;<span class="ident" id="5923487"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5923491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923495">}</span>&nbsp;<span class="keyword" id="5923497">else</span>&nbsp;<span class="keyword" id="5923502">if</span>&nbsp;<span class="ident" id="5923505"><a href="/gostd/go/build/build.go.html#5921209">isTest</a></span>&nbsp;<span class="op" id="5923512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923517"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923518">.</span><span class="ident" id="5923519"><a href="/gostd/go/build/build.go.html#5912767">TestGoFiles</a></span>&nbsp;<span class="op" id="5923531">=</span>&nbsp;<span class="builtinfunc" id="5923533">append</span><span class="op" id="5923539">(</span><span class="ident" id="5923540"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923541">.</span><span class="ident" id="5923542"><a href="/gostd/go/build/build.go.html#5912767">TestGoFiles</a></span><span class="op" id="5923553">,</span>&nbsp;<span class="ident" id="5923555"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5923559">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923563">}</span>&nbsp;<span class="keyword" id="5923565">else</span>&nbsp;<span class="op" id="5923570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923575"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923576">.</span><span class="ident" id="5923577"><a href="/gostd/go/build/build.go.html#5911657">GoFiles</a></span>&nbsp;<span class="op" id="5923585">=</span>&nbsp;<span class="builtinfunc" id="5923587">append</span><span class="op" id="5923593">(</span><span class="ident" id="5923594"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923595">.</span><span class="ident" id="5923596"><a href="/gostd/go/build/build.go.html#5911657">GoFiles</a></span><span class="op" id="5923603">,</span>&nbsp;<span class="ident" id="5923605"><a href="/gostd/go/build/build.go.html#5919822">name</a></span><span class="op" id="5923609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5923619">if</span>&nbsp;<span class="builtinfunc" id="5923622">len</span><span class="op" id="5923625">(</span><span class="ident" id="5923626"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923627">.</span><span class="ident" id="5923628"><a href="/gostd/go/build/build.go.html#5911657">GoFiles</a></span><span class="op" id="5923635">)</span><span class="op" id="5923636">+</span><span class="builtinfunc" id="5923637">len</span><span class="op" id="5923640">(</span><span class="ident" id="5923641"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923642">.</span><span class="ident" id="5923643"><a href="/gostd/go/build/build.go.html#5911750">CgoFiles</a></span><span class="op" id="5923651">)</span><span class="op" id="5923652">+</span><span class="builtinfunc" id="5923653">len</span><span class="op" id="5923656">(</span><span class="ident" id="5923657"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923658">.</span><span class="ident" id="5923659"><a href="/gostd/go/build/build.go.html#5912767">TestGoFiles</a></span><span class="op" id="5923670">)</span><span class="op" id="5923671">+</span><span class="builtinfunc" id="5923672">len</span><span class="op" id="5923675">(</span><span class="ident" id="5923676"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923677">.</span><span class="ident" id="5923678"><a href="/gostd/go/build/build.go.html#5912992">XTestGoFiles</a></span><span class="op" id="5923690">)</span>&nbsp;<span class="op" id="5923692">==</span>&nbsp;<span class="num" id="5923695">0</span>&nbsp;<span class="op" id="5923697">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5923701">return</span>&nbsp;<span class="ident" id="5923708"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923709">,</span>&nbsp;<span class="op" id="5923711">&amp;</span><span class="ident" id="5923712"><a href="/gostd/go/build/build.go.html#5913847">NoGoError</a></span><span class="op" id="5923721">{</span><span class="ident" id="5923722"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923723">.</span><span class="ident" id="5923724"><a href="/gostd/go/build/build.go.html#5910818">Dir</a></span><span class="op" id="5923727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5923734">for</span>&nbsp;<span class="ident" id="5923738">tag</span>&nbsp;<span class="op" id="5923742">:=</span>&nbsp;<span class="keyword" id="5923745">range</span>&nbsp;<span class="ident" id="5923751"><a href="/gostd/go/build/build.go.html#5919699">allTags</a></span>&nbsp;<span class="op" id="5923759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923763"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923764">.</span><span class="ident" id="5923765"><a href="/gostd/go/build/build.go.html#5911490">AllTags</a></span>&nbsp;<span class="op" id="5923773">=</span>&nbsp;<span class="builtinfunc" id="5923775">append</span><span class="op" id="5923781">(</span><span class="ident" id="5923782"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923783">.</span><span class="ident" id="5923784"><a href="/gostd/go/build/build.go.html#5911490">AllTags</a></span><span class="op" id="5923791">,</span>&nbsp;<span class="ident" id="5923793"><a href="/gostd/go/build/build.go.html#5923738">tag</a></span><span class="op" id="5923796">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5923799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923802"><a href="/gostd/go/build/build.go.html#5900554">sort</a></span><span class="op" id="5923806">.</span><span class="ident" id="5923807"><a href="/gostd/sort/sort.go.html#2017831">Strings</a></span><span class="op" id="5923814">(</span><span class="ident" id="5923815"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923816">.</span><span class="ident" id="5923817"><a href="/gostd/go/build/build.go.html#5911490">AllTags</a></span><span class="op" id="5923824">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923828"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923829">.</span><span class="ident" id="5923830"><a href="/gostd/go/build/build.go.html#5912601">Imports</a></span><span class="op" id="5923837">,</span>&nbsp;<span class="ident" id="5923839"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923840">.</span><span class="ident" id="5923841"><a href="/gostd/go/build/build.go.html#5912674">ImportPos</a></span>&nbsp;<span class="op" id="5923851">=</span>&nbsp;<span class="ident" id="5923853"><a href="/gostd/go/build/build.go.html#5928692">cleanImports</a></span><span class="op" id="5923865">(</span><span class="ident" id="5923866"><a href="/gostd/go/build/build.go.html#5919549">imported</a></span><span class="op" id="5923874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923877"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923878">.</span><span class="ident" id="5923879"><a href="/gostd/go/build/build.go.html#5912840">TestImports</a></span><span class="op" id="5923890">,</span>&nbsp;<span class="ident" id="5923892"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923893">.</span><span class="ident" id="5923894"><a href="/gostd/go/build/build.go.html#5912912">TestImportPos</a></span>&nbsp;<span class="op" id="5923908">=</span>&nbsp;<span class="ident" id="5923910"><a href="/gostd/go/build/build.go.html#5928692">cleanImports</a></span><span class="op" id="5923922">(</span><span class="ident" id="5923923"><a href="/gostd/go/build/build.go.html#5919596">testImported</a></span><span class="op" id="5923935">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5923938"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923939">.</span><span class="ident" id="5923940"><a href="/gostd/go/build/build.go.html#5913070">XTestImports</a></span><span class="op" id="5923952">,</span>&nbsp;<span class="ident" id="5923954"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5923955">.</span><span class="ident" id="5923956"><a href="/gostd/go/build/build.go.html#5913143">XTestImportPos</a></span>&nbsp;<span class="op" id="5923971">=</span>&nbsp;<span class="ident" id="5923973"><a href="/gostd/go/build/build.go.html#5928692">cleanImports</a></span><span class="op" id="5923985">(</span><span class="ident" id="5923986"><a href="/gostd/go/build/build.go.html#5919647">xTestImported</a></span><span class="op" id="5923999">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5924003">//&nbsp;add&nbsp;the&nbsp;.S&nbsp;files&nbsp;only&nbsp;if&nbsp;we&nbsp;are&nbsp;using&nbsp;cgo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5924049">//&nbsp;(which&nbsp;means&nbsp;gcc&nbsp;will&nbsp;compile&nbsp;them).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5924090">//&nbsp;The&nbsp;standard&nbsp;assemblers&nbsp;expect&nbsp;.s&nbsp;files.</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924135">if</span>&nbsp;<span class="builtinfunc" id="5924138">len</span><span class="op" id="5924141">(</span><span class="ident" id="5924142"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5924143">.</span><span class="ident" id="5924144"><a href="/gostd/go/build/build.go.html#5911750">CgoFiles</a></span><span class="op" id="5924152">)</span>&nbsp;<span class="op" id="5924154">&gt;</span>&nbsp;<span class="num" id="5924156">0</span>&nbsp;<span class="op" id="5924158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924162"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5924163">.</span><span class="ident" id="5924164"><a href="/gostd/go/build/build.go.html#5912105">SFiles</a></span>&nbsp;<span class="op" id="5924171">=</span>&nbsp;<span class="builtinfunc" id="5924173">append</span><span class="op" id="5924179">(</span><span class="ident" id="5924180"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5924181">.</span><span class="ident" id="5924182"><a href="/gostd/go/build/build.go.html#5912105">SFiles</a></span><span class="op" id="5924188">,</span>&nbsp;<span class="ident" id="5924190"><a href="/gostd/go/build/build.go.html#5919461">Sfiles</a></span><span class="op" id="5924196">...</span><span class="op" id="5924199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924203"><a href="/gostd/go/build/build.go.html#5900554">sort</a></span><span class="op" id="5924207">.</span><span class="ident" id="5924208"><a href="/gostd/sort/sort.go.html#2017831">Strings</a></span><span class="op" id="5924215">(</span><span class="ident" id="5924216"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5924217">.</span><span class="ident" id="5924218"><a href="/gostd/go/build/build.go.html#5912105">SFiles</a></span><span class="op" id="5924224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5924227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924231">return</span>&nbsp;<span class="ident" id="5924238"><a href="/gostd/go/build/build.go.html#5915468">p</a></span><span class="op" id="5924239">,</span>&nbsp;<span class="ident" id="5924241"><a href="/gostd/go/build/build.go.html#5915612">pkgerr</a></span><br>
<span class="lineno"></span><span class="op" id="5924248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5924251">func</span>&nbsp;<span class="ident" id="5924256">findImportComment</span><span class="op" id="5924273">(</span><span class="ident" id="5924274">data</span>&nbsp;<span class="op" id="5924279">[</span><span class="op" id="5924280">]</span><span class="builtintype" id="5924281">byte</span><span class="op" id="5924285">)</span>&nbsp;<span class="op" id="5924287">(</span><span class="ident" id="5924288">s</span>&nbsp;<span class="builtintype" id="5924290">string</span><span class="op" id="5924296">,</span>&nbsp;<span class="ident" id="5924298">line</span>&nbsp;<span class="builtintype" id="5924303">int</span><span class="op" id="5924306">)</span>&nbsp;<span class="op" id="5924308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5924311">//&nbsp;expect&nbsp;keyword&nbsp;package</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924338">word</span><span class="op" id="5924342">,</span>&nbsp;<span class="ident" id="5924344"><a href="/gostd/go/build/build.go.html#5924274">data</a></span>&nbsp;<span class="op" id="5924349">:=</span>&nbsp;<span class="ident" id="5924352"><a href="/gostd/go/build/build.go.html#5926246">parseWord</a></span><span class="op" id="5924361">(</span><span class="ident" id="5924362"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924369">if</span>&nbsp;<span class="builtintype" id="5924372">string</span><span class="op" id="5924378">(</span><span class="ident" id="5924379"><a href="/gostd/go/build/build.go.html#5924338">word</a></span><span class="op" id="5924383">)</span>&nbsp;<span class="op" id="5924385">!=</span>&nbsp;<span class="string" id="5924388">&#34;package&#34;</span>&nbsp;<span class="op" id="5924398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924402">return</span>&nbsp;<span class="string" id="5924409">&#34;&#34;</span><span class="op" id="5924411">,</span>&nbsp;<span class="num" id="5924413">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5924416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5924420">//&nbsp;expect&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924444">_</span><span class="op" id="5924445">,</span>&nbsp;<span class="ident" id="5924447"><a href="/gostd/go/build/build.go.html#5924274">data</a></span>&nbsp;<span class="op" id="5924452">=</span>&nbsp;<span class="ident" id="5924454"><a href="/gostd/go/build/build.go.html#5926246">parseWord</a></span><span class="op" id="5924463">(</span><span class="ident" id="5924464"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924468">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5924472">//&nbsp;now&nbsp;ready&nbsp;for&nbsp;import&nbsp;comment,&nbsp;a&nbsp;//&nbsp;or&nbsp;/*&nbsp;*/&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5924528">//&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;on&nbsp;the&nbsp;current&nbsp;line.</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924574">for</span>&nbsp;<span class="builtinfunc" id="5924578">len</span><span class="op" id="5924581">(</span><span class="ident" id="5924582"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924586">)</span>&nbsp;<span class="op" id="5924588">&gt;</span>&nbsp;<span class="num" id="5924590">0</span>&nbsp;<span class="op" id="5924592">&amp;&amp;</span>&nbsp;<span class="op" id="5924595">(</span><span class="ident" id="5924596"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924600">[</span><span class="num" id="5924601">0</span><span class="op" id="5924602">]</span>&nbsp;<span class="op" id="5924604">==</span>&nbsp;<span class="string" id="5924607">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5924611">||</span>&nbsp;<span class="ident" id="5924614"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924618">[</span><span class="num" id="5924619">0</span><span class="op" id="5924620">]</span>&nbsp;<span class="op" id="5924622">==</span>&nbsp;<span class="string" id="5924625">&#39;\t&#39;</span>&nbsp;<span class="op" id="5924630">||</span>&nbsp;<span class="ident" id="5924633"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924637">[</span><span class="num" id="5924638">0</span><span class="op" id="5924639">]</span>&nbsp;<span class="op" id="5924641">==</span>&nbsp;<span class="string" id="5924644">&#39;\r&#39;</span><span class="op" id="5924648">)</span>&nbsp;<span class="op" id="5924650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924654"><a href="/gostd/go/build/build.go.html#5924274">data</a></span>&nbsp;<span class="op" id="5924659">=</span>&nbsp;<span class="ident" id="5924661"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924665">[</span><span class="num" id="5924666">1</span><span class="op" id="5924667">:</span><span class="op" id="5924668">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5924671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924675">var</span>&nbsp;<span class="ident" id="5924679">comment</span>&nbsp;<span class="op" id="5924687">[</span><span class="op" id="5924688">]</span><span class="builtintype" id="5924689">byte</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924695">switch</span>&nbsp;<span class="op" id="5924702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924705">case</span>&nbsp;<span class="ident" id="5924710"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5924715">.</span><span class="ident" id="5924716"><a href="/gostd/bytes/bytes.go.html#1403977">HasPrefix</a></span><span class="op" id="5924725">(</span><span class="ident" id="5924726"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924730">,</span>&nbsp;<span class="ident" id="5924732"><a href="/gostd/go/build/build.go.html#5925346">slashSlash</a></span><span class="op" id="5924742">)</span><span class="op" id="5924743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924747">i</span>&nbsp;<span class="op" id="5924749">:=</span>&nbsp;<span class="ident" id="5924752"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5924757">.</span><span class="ident" id="5924758"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="5924763">(</span><span class="ident" id="5924764"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924768">,</span>&nbsp;<span class="ident" id="5924770"><a href="/gostd/go/build/build.go.html#5925427">newline</a></span><span class="op" id="5924777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924781">if</span>&nbsp;<span class="ident" id="5924784"><a href="/gostd/go/build/build.go.html#5924747">i</a></span>&nbsp;<span class="op" id="5924786">&lt;</span>&nbsp;<span class="num" id="5924788">0</span>&nbsp;<span class="op" id="5924790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924795"><a href="/gostd/go/build/build.go.html#5924747">i</a></span>&nbsp;<span class="op" id="5924797">=</span>&nbsp;<span class="builtinfunc" id="5924799">len</span><span class="op" id="5924802">(</span><span class="ident" id="5924803"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924807">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5924811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924815"><a href="/gostd/go/build/build.go.html#5924679">comment</a></span>&nbsp;<span class="op" id="5924823">=</span>&nbsp;<span class="ident" id="5924825"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924829">[</span><span class="num" id="5924830">2</span><span class="op" id="5924831">:</span><span class="ident" id="5924832"><a href="/gostd/go/build/build.go.html#5924747">i</a></span><span class="op" id="5924833">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924836">case</span>&nbsp;<span class="ident" id="5924841"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5924846">.</span><span class="ident" id="5924847"><a href="/gostd/bytes/bytes.go.html#1403977">HasPrefix</a></span><span class="op" id="5924856">(</span><span class="ident" id="5924857"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924861">,</span>&nbsp;<span class="ident" id="5924863"><a href="/gostd/go/build/build.go.html#5925373">slashStar</a></span><span class="op" id="5924872">)</span><span class="op" id="5924873">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924877"><a href="/gostd/go/build/build.go.html#5924274">data</a></span>&nbsp;<span class="op" id="5924882">=</span>&nbsp;<span class="ident" id="5924884"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924888">[</span><span class="num" id="5924889">2</span><span class="op" id="5924890">:</span><span class="op" id="5924891">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924895">i</span>&nbsp;<span class="op" id="5924897">:=</span>&nbsp;<span class="ident" id="5924900"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5924905">.</span><span class="ident" id="5924906"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="5924911">(</span><span class="ident" id="5924912"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5924916">,</span>&nbsp;<span class="ident" id="5924918"><a href="/gostd/go/build/build.go.html#5925400">starSlash</a></span><span class="op" id="5924927">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924931">if</span>&nbsp;<span class="ident" id="5924934"><a href="/gostd/go/build/build.go.html#5924895">i</a></span>&nbsp;<span class="op" id="5924936">&lt;</span>&nbsp;<span class="num" id="5924938">0</span>&nbsp;<span class="op" id="5924940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5924945">//&nbsp;malformed&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924969">return</span>&nbsp;<span class="string" id="5924976">&#34;&#34;</span><span class="op" id="5924978">,</span>&nbsp;<span class="num" id="5924980">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5924984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924988"><a href="/gostd/go/build/build.go.html#5924679">comment</a></span>&nbsp;<span class="op" id="5924996">=</span>&nbsp;<span class="ident" id="5924998"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5925002">[</span><span class="op" id="5925003">:</span><span class="ident" id="5925004"><a href="/gostd/go/build/build.go.html#5924895">i</a></span><span class="op" id="5925005">]</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925009">if</span>&nbsp;<span class="ident" id="5925012"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5925017">.</span><span class="ident" id="5925018"><a href="/gostd/bytes/bytes.go.html#1397486">Contains</a></span><span class="op" id="5925026">(</span><span class="ident" id="5925027"><a href="/gostd/go/build/build.go.html#5924679">comment</a></span><span class="op" id="5925034">,</span>&nbsp;<span class="ident" id="5925036"><a href="/gostd/go/build/build.go.html#5925427">newline</a></span><span class="op" id="5925043">)</span>&nbsp;<span class="op" id="5925045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925050">return</span>&nbsp;<span class="string" id="5925057">&#34;&#34;</span><span class="op" id="5925059">,</span>&nbsp;<span class="num" id="5925061">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925071"><a href="/gostd/go/build/build.go.html#5924679">comment</a></span>&nbsp;<span class="op" id="5925079">=</span>&nbsp;<span class="ident" id="5925081"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5925086">.</span><span class="ident" id="5925087"><a href="/gostd/bytes/bytes.go.html#1411807">TrimSpace</a></span><span class="op" id="5925096">(</span><span class="ident" id="5925097"><a href="/gostd/go/build/build.go.html#5924679">comment</a></span><span class="op" id="5925104">)</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5925108">//&nbsp;split&nbsp;comment&nbsp;into&nbsp;`import`,&nbsp;`&#34;pkg&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925149"><a href="/gostd/go/build/build.go.html#5924338">word</a></span><span class="op" id="5925153">,</span>&nbsp;<span class="ident" id="5925155">arg</span>&nbsp;<span class="op" id="5925159">:=</span>&nbsp;<span class="ident" id="5925162"><a href="/gostd/go/build/build.go.html#5926246">parseWord</a></span><span class="op" id="5925171">(</span><span class="ident" id="5925172"><a href="/gostd/go/build/build.go.html#5924679">comment</a></span><span class="op" id="5925179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925182">if</span>&nbsp;<span class="builtintype" id="5925185">string</span><span class="op" id="5925191">(</span><span class="ident" id="5925192"><a href="/gostd/go/build/build.go.html#5924338">word</a></span><span class="op" id="5925196">)</span>&nbsp;<span class="op" id="5925198">!=</span>&nbsp;<span class="string" id="5925201">&#34;import&#34;</span>&nbsp;<span class="op" id="5925210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925214">return</span>&nbsp;<span class="string" id="5925221">&#34;&#34;</span><span class="op" id="5925223">,</span>&nbsp;<span class="num" id="5925225">0</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925232"><a href="/gostd/go/build/build.go.html#5924298">line</a></span>&nbsp;<span class="op" id="5925237">=</span>&nbsp;<span class="num" id="5925239">1</span>&nbsp;<span class="op" id="5925241">+</span>&nbsp;<span class="ident" id="5925243"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5925248">.</span><span class="ident" id="5925249"><a href="/gostd/bytes/bytes.go.html#1397050">Count</a></span><span class="op" id="5925254">(</span><span class="ident" id="5925255"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5925259">[</span><span class="op" id="5925260">:</span><span class="builtinfunc" id="5925261">cap</span><span class="op" id="5925264">(</span><span class="ident" id="5925265"><a href="/gostd/go/build/build.go.html#5924274">data</a></span><span class="op" id="5925269">)</span><span class="op" id="5925270">-</span><span class="builtinfunc" id="5925271">cap</span><span class="op" id="5925274">(</span><span class="ident" id="5925275"><a href="/gostd/go/build/build.go.html#5925155">arg</a></span><span class="op" id="5925278">)</span><span class="op" id="5925279">]</span><span class="op" id="5925280">,</span>&nbsp;<span class="ident" id="5925282"><a href="/gostd/go/build/build.go.html#5925427">newline</a></span><span class="op" id="5925289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925292">return</span>&nbsp;<span class="ident" id="5925299"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5925306">.</span><span class="ident" id="5925307"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="5925316">(</span><span class="builtintype" id="5925317">string</span><span class="op" id="5925323">(</span><span class="ident" id="5925324"><a href="/gostd/go/build/build.go.html#5925155">arg</a></span><span class="op" id="5925327">)</span><span class="op" id="5925328">)</span><span class="op" id="5925329">,</span>&nbsp;<span class="ident" id="5925331"><a href="/gostd/go/build/build.go.html#5924298">line</a></span><br>
<span class="lineno"></span><span class="op" id="5925336">}</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="keyword" id="5925339">var</span>&nbsp;<span class="op" id="5925343">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925346">slashSlash</span>&nbsp;<span class="op" id="5925357">=</span>&nbsp;<span class="op" id="5925359">[</span><span class="op" id="5925360">]</span><span class="builtintype" id="5925361">byte</span><span class="op" id="5925365">(</span><span class="string" id="5925366">&#34;//&#34;</span><span class="op" id="5925370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925373">slashStar</span>&nbsp;&nbsp;<span class="op" id="5925384">=</span>&nbsp;<span class="op" id="5925386">[</span><span class="op" id="5925387">]</span><span class="builtintype" id="5925388">byte</span><span class="op" id="5925392">(</span><span class="string" id="5925393">&#34;/*&#34;</span><span class="op" id="5925397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925400">starSlash</span>&nbsp;&nbsp;<span class="op" id="5925411">=</span>&nbsp;<span class="op" id="5925413">[</span><span class="op" id="5925414">]</span><span class="builtintype" id="5925415">byte</span><span class="op" id="5925419">(</span><span class="string" id="5925420">&#34;*/&#34;</span><span class="op" id="5925424">)</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925427">newline</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925438">=</span>&nbsp;<span class="op" id="5925440">[</span><span class="op" id="5925441">]</span><span class="builtintype" id="5925442">byte</span><span class="op" id="5925446">(</span><span class="string" id="5925447">&#34;\n&#34;</span><span class="op" id="5925451">)</span><br>
<span class="lineno"></span><span class="op" id="5925453">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5925456">//&nbsp;skipSpaceOrComment&nbsp;returns&nbsp;data&nbsp;with&nbsp;any&nbsp;leading&nbsp;spaces&nbsp;or&nbsp;comments&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="5925536">func</span>&nbsp;<span class="ident" id="5925541">skipSpaceOrComment</span><span class="op" id="5925559">(</span><span class="ident" id="5925560">data</span>&nbsp;<span class="op" id="5925565">[</span><span class="op" id="5925566">]</span><span class="builtintype" id="5925567">byte</span><span class="op" id="5925571">)</span>&nbsp;<span class="op" id="5925573">[</span><span class="op" id="5925574">]</span><span class="builtintype" id="5925575">byte</span>&nbsp;<span class="op" id="5925580">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925583">for</span>&nbsp;<span class="builtinfunc" id="5925587">len</span><span class="op" id="5925590">(</span><span class="ident" id="5925591"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><span class="op" id="5925595">)</span>&nbsp;<span class="op" id="5925597">&gt;</span>&nbsp;<span class="num" id="5925599">0</span>&nbsp;<span class="op" id="5925601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925605">switch</span>&nbsp;<span class="ident" id="5925612"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><span class="op" id="5925616">[</span><span class="num" id="5925617">0</span><span class="op" id="5925618">]</span>&nbsp;<span class="op" id="5925620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925624">case</span>&nbsp;<span class="string" id="5925629">&#39;&nbsp;&#39;</span><span class="op" id="5925632">,</span>&nbsp;<span class="string" id="5925634">&#39;\t&#39;</span><span class="op" id="5925638">,</span>&nbsp;<span class="string" id="5925640">&#39;\r&#39;</span><span class="op" id="5925644">,</span>&nbsp;<span class="string" id="5925646">&#39;\n&#39;</span><span class="op" id="5925650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925655"><a href="/gostd/go/build/build.go.html#5925560">data</a></span>&nbsp;<span class="op" id="5925660">=</span>&nbsp;<span class="ident" id="5925662"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><span class="op" id="5925666">[</span><span class="num" id="5925667">1</span><span class="op" id="5925668">:</span><span class="op" id="5925669">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925674">continue</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925685">case</span>&nbsp;<span class="string" id="5925690">&#39;/&#39;</span><span class="op" id="5925693">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925698">if</span>&nbsp;<span class="ident" id="5925701"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5925706">.</span><span class="ident" id="5925707"><a href="/gostd/bytes/bytes.go.html#1403977">HasPrefix</a></span><span class="op" id="5925716">(</span><span class="ident" id="5925717"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><span class="op" id="5925721">,</span>&nbsp;<span class="ident" id="5925723"><a href="/gostd/go/build/build.go.html#5925346">slashSlash</a></span><span class="op" id="5925733">)</span>&nbsp;<span class="op" id="5925735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925741">i</span>&nbsp;<span class="op" id="5925743">:=</span>&nbsp;<span class="ident" id="5925746"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5925751">.</span><span class="ident" id="5925752"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="5925757">(</span><span class="ident" id="5925758"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><span class="op" id="5925762">,</span>&nbsp;<span class="ident" id="5925764"><a href="/gostd/go/build/build.go.html#5925427">newline</a></span><span class="op" id="5925771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925777">if</span>&nbsp;<span class="ident" id="5925780"><a href="/gostd/go/build/build.go.html#5925741">i</a></span>&nbsp;<span class="op" id="5925782">&lt;</span>&nbsp;<span class="num" id="5925784">0</span>&nbsp;<span class="op" id="5925786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925793">return</span>&nbsp;<span class="builtintype" id="5925800">nil</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925814"><a href="/gostd/go/build/build.go.html#5925560">data</a></span>&nbsp;<span class="op" id="5925819">=</span>&nbsp;<span class="ident" id="5925821"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><span class="op" id="5925825">[</span><span class="ident" id="5925826"><a href="/gostd/go/build/build.go.html#5925741">i</a></span><span class="op" id="5925827">+</span><span class="num" id="5925828">1</span><span class="op" id="5925829">:</span><span class="op" id="5925830">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925836">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925853">if</span>&nbsp;<span class="ident" id="5925856"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5925861">.</span><span class="ident" id="5925862"><a href="/gostd/bytes/bytes.go.html#1403977">HasPrefix</a></span><span class="op" id="5925871">(</span><span class="ident" id="5925872"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><span class="op" id="5925876">,</span>&nbsp;<span class="ident" id="5925878"><a href="/gostd/go/build/build.go.html#5925373">slashStar</a></span><span class="op" id="5925887">)</span>&nbsp;<span class="op" id="5925889">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925895"><a href="/gostd/go/build/build.go.html#5925560">data</a></span>&nbsp;<span class="op" id="5925900">=</span>&nbsp;<span class="ident" id="5925902"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><span class="op" id="5925906">[</span><span class="num" id="5925907">2</span><span class="op" id="5925908">:</span><span class="op" id="5925909">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925915">i</span>&nbsp;<span class="op" id="5925917">:=</span>&nbsp;<span class="ident" id="5925920"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5925925">.</span><span class="ident" id="5925926"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="5925931">(</span><span class="ident" id="5925932"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><span class="op" id="5925936">,</span>&nbsp;<span class="ident" id="5925938"><a href="/gostd/go/build/build.go.html#5925400">starSlash</a></span><span class="op" id="5925947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925953">if</span>&nbsp;<span class="ident" id="5925956"><a href="/gostd/go/build/build.go.html#5925915">i</a></span>&nbsp;<span class="op" id="5925958">&lt;</span>&nbsp;<span class="num" id="5925960">0</span>&nbsp;<span class="op" id="5925962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925969">return</span>&nbsp;<span class="builtintype" id="5925976">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925984">}</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925990"><a href="/gostd/go/build/build.go.html#5925560">data</a></span>&nbsp;<span class="op" id="5925995">=</span>&nbsp;<span class="ident" id="5925997"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><span class="op" id="5926001">[</span><span class="ident" id="5926002"><a href="/gostd/go/build/build.go.html#5925915">i</a></span><span class="op" id="5926003">+</span><span class="num" id="5926004">2</span><span class="op" id="5926005">:</span><span class="op" id="5926006">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926012">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926032">break</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926042">return</span>&nbsp;<span class="ident" id="5926049"><a href="/gostd/go/build/build.go.html#5925560">data</a></span><br>
<span class="lineno"></span><span class="op" id="5926054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5926057">//&nbsp;parseWord&nbsp;skips&nbsp;any&nbsp;leading&nbsp;spaces&nbsp;or&nbsp;comments&nbsp;in&nbsp;data</span><br>
<span class="lineno">880</span><span class="comment" id="5926115">//&nbsp;and&nbsp;then&nbsp;parses&nbsp;the&nbsp;beginning&nbsp;of&nbsp;data&nbsp;as&nbsp;an&nbsp;identifier&nbsp;or&nbsp;keyword,</span><br>
<span class="lineno"></span><span class="comment" id="5926185">//&nbsp;returning&nbsp;that&nbsp;word&nbsp;and&nbsp;what&nbsp;remains&nbsp;after&nbsp;the&nbsp;word.</span><br>
<span class="lineno"></span><span class="keyword" id="5926241">func</span>&nbsp;<span class="ident" id="5926246">parseWord</span><span class="op" id="5926255">(</span><span class="ident" id="5926256">data</span>&nbsp;<span class="op" id="5926261">[</span><span class="op" id="5926262">]</span><span class="builtintype" id="5926263">byte</span><span class="op" id="5926267">)</span>&nbsp;<span class="op" id="5926269">(</span><span class="ident" id="5926270">word</span><span class="op" id="5926274">,</span>&nbsp;<span class="ident" id="5926276">rest</span>&nbsp;<span class="op" id="5926281">[</span><span class="op" id="5926282">]</span><span class="builtintype" id="5926283">byte</span><span class="op" id="5926287">)</span>&nbsp;<span class="op" id="5926289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926292"><a href="/gostd/go/build/build.go.html#5926256">data</a></span>&nbsp;<span class="op" id="5926297">=</span>&nbsp;<span class="ident" id="5926299"><a href="/gostd/go/build/build.go.html#5925541">skipSpaceOrComment</a></span><span class="op" id="5926317">(</span><span class="ident" id="5926318"><a href="/gostd/go/build/build.go.html#5926256">data</a></span><span class="op" id="5926322">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5926326">//&nbsp;Parse&nbsp;past&nbsp;leading&nbsp;word&nbsp;characters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926366"><a href="/gostd/go/build/build.go.html#5926276">rest</a></span>&nbsp;<span class="op" id="5926371">=</span>&nbsp;<span class="ident" id="5926373"><a href="/gostd/go/build/build.go.html#5926256">data</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926379">for</span>&nbsp;<span class="op" id="5926383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926387">r</span><span class="op" id="5926388">,</span>&nbsp;<span class="ident" id="5926390">size</span>&nbsp;<span class="op" id="5926395">:=</span>&nbsp;<span class="ident" id="5926398"><a href="/gostd/go/build/build.go.html#5900595">utf8</a></span><span class="op" id="5926402">.</span><span class="ident" id="5926403"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="5926413">(</span><span class="ident" id="5926414"><a href="/gostd/go/build/build.go.html#5926276">rest</a></span><span class="op" id="5926418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926422">if</span>&nbsp;<span class="ident" id="5926425"><a href="/gostd/go/build/build.go.html#5900584">unicode</a></span><span class="op" id="5926432">.</span><span class="ident" id="5926433"><a href="/gostd/unicode/graphic.go.html#1819623">IsLetter</a></span><span class="op" id="5926441">(</span><span class="ident" id="5926442"><a href="/gostd/go/build/build.go.html#5926387">r</a></span><span class="op" id="5926443">)</span>&nbsp;<span class="op" id="5926445">||</span>&nbsp;<span class="string" id="5926448">&#39;0&#39;</span>&nbsp;<span class="op" id="5926452">&lt;=</span>&nbsp;<span class="ident" id="5926455"><a href="/gostd/go/build/build.go.html#5926387">r</a></span>&nbsp;<span class="op" id="5926457">&amp;&amp;</span>&nbsp;<span class="ident" id="5926460"><a href="/gostd/go/build/build.go.html#5926387">r</a></span>&nbsp;<span class="op" id="5926462">&lt;=</span>&nbsp;<span class="string" id="5926465">&#39;9&#39;</span>&nbsp;<span class="op" id="5926469">||</span>&nbsp;<span class="ident" id="5926472"><a href="/gostd/go/build/build.go.html#5926387">r</a></span>&nbsp;<span class="op" id="5926474">==</span>&nbsp;<span class="string" id="5926477">&#39;_&#39;</span>&nbsp;<span class="op" id="5926481">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926486"><a href="/gostd/go/build/build.go.html#5926276">rest</a></span>&nbsp;<span class="op" id="5926491">=</span>&nbsp;<span class="ident" id="5926493"><a href="/gostd/go/build/build.go.html#5926276">rest</a></span><span class="op" id="5926497">[</span><span class="ident" id="5926498"><a href="/gostd/go/build/build.go.html#5926390">size</a></span><span class="op" id="5926502">:</span><span class="op" id="5926503">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926508">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926523">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926530">}</span><br>
<span class="lineno">895</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926534"><a href="/gostd/go/build/build.go.html#5926270">word</a></span>&nbsp;<span class="op" id="5926539">=</span>&nbsp;<span class="ident" id="5926541"><a href="/gostd/go/build/build.go.html#5926256">data</a></span><span class="op" id="5926545">[</span><span class="op" id="5926546">:</span><span class="builtinfunc" id="5926547">len</span><span class="op" id="5926550">(</span><span class="ident" id="5926551"><a href="/gostd/go/build/build.go.html#5926256">data</a></span><span class="op" id="5926555">)</span><span class="op" id="5926556">-</span><span class="builtinfunc" id="5926557">len</span><span class="op" id="5926560">(</span><span class="ident" id="5926561"><a href="/gostd/go/build/build.go.html#5926276">rest</a></span><span class="op" id="5926565">)</span><span class="op" id="5926566">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926569">if</span>&nbsp;<span class="builtinfunc" id="5926572">len</span><span class="op" id="5926575">(</span><span class="ident" id="5926576"><a href="/gostd/go/build/build.go.html#5926270">word</a></span><span class="op" id="5926580">)</span>&nbsp;<span class="op" id="5926582">==</span>&nbsp;<span class="num" id="5926585">0</span>&nbsp;<span class="op" id="5926587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926591">return</span>&nbsp;<span class="builtintype" id="5926598">nil</span><span class="op" id="5926601">,</span>&nbsp;<span class="builtintype" id="5926603">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926608">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926612">return</span>&nbsp;<span class="ident" id="5926619"><a href="/gostd/go/build/build.go.html#5926270">word</a></span><span class="op" id="5926623">,</span>&nbsp;<span class="ident" id="5926625"><a href="/gostd/go/build/build.go.html#5926276">rest</a></span><br>
<span class="lineno"></span><span class="op" id="5926630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5926633">//&nbsp;MatchFile&nbsp;reports&nbsp;whether&nbsp;the&nbsp;file&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;given&nbsp;directory</span><br>
<span class="lineno">905</span><span class="comment" id="5926714">//&nbsp;matches&nbsp;the&nbsp;context&nbsp;and&nbsp;would&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;Package&nbsp;created&nbsp;by&nbsp;ImportDir</span><br>
<span class="lineno"></span><span class="comment" id="5926793">//&nbsp;of&nbsp;that&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="5926815">//</span><br>
<span class="lineno"></span><span class="comment" id="5926818">//&nbsp;MatchFile&nbsp;considers&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;and&nbsp;may&nbsp;use&nbsp;ctxt.OpenFile&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5926891">//&nbsp;read&nbsp;some&nbsp;or&nbsp;all&nbsp;of&nbsp;the&nbsp;file&#39;s&nbsp;content.</span><br>
<span class="lineno">910</span><span class="keyword" id="5926934">func</span>&nbsp;<span class="op" id="5926939">(</span><span class="ident" id="5926940">ctxt</span>&nbsp;<span class="op" id="5926945">*</span><span class="ident" id="5926946"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5926953">)</span>&nbsp;<span class="ident" id="5926955">MatchFile</span><span class="op" id="5926964">(</span><span class="ident" id="5926965">dir</span><span class="op" id="5926968">,</span>&nbsp;<span class="ident" id="5926970">name</span>&nbsp;<span class="builtintype" id="5926975">string</span><span class="op" id="5926981">)</span>&nbsp;<span class="op" id="5926983">(</span><span class="ident" id="5926984">match</span>&nbsp;<span class="builtintype" id="5926990">bool</span><span class="op" id="5926994">,</span>&nbsp;<span class="ident" id="5926996">err</span>&nbsp;<span class="builtintype" id="5927000">error</span><span class="op" id="5927005">)</span>&nbsp;<span class="op" id="5927007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927010"><a href="/gostd/go/build/build.go.html#5926984">match</a></span><span class="op" id="5927015">,</span>&nbsp;<span class="ident" id="5927017">_</span><span class="op" id="5927018">,</span>&nbsp;<span class="ident" id="5927020">_</span><span class="op" id="5927021">,</span>&nbsp;<span class="ident" id="5927023"><a href="/gostd/go/build/build.go.html#5926996">err</a></span>&nbsp;<span class="op" id="5927027">=</span>&nbsp;<span class="ident" id="5927029"><a href="/gostd/go/build/build.go.html#5926940">ctxt</a></span><span class="op" id="5927033">.</span><span class="ident" id="5927034"><a href="/gostd/go/build/build.go.html#5927585">matchFile</a></span><span class="op" id="5927043">(</span><span class="ident" id="5927044"><a href="/gostd/go/build/build.go.html#5926965">dir</a></span><span class="op" id="5927047">,</span>&nbsp;<span class="ident" id="5927049"><a href="/gostd/go/build/build.go.html#5926970">name</a></span><span class="op" id="5927053">,</span>&nbsp;<span class="builtintype" id="5927055">false</span><span class="op" id="5927060">,</span>&nbsp;<span class="builtintype" id="5927062">nil</span><span class="op" id="5927065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927068">return</span><br>
<span class="lineno"></span><span class="op" id="5927075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">915</span><span class="comment" id="5927078">//&nbsp;matchFile&nbsp;determines&nbsp;whether&nbsp;the&nbsp;file&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;given&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="5927162">//&nbsp;should&nbsp;be&nbsp;included&nbsp;in&nbsp;the&nbsp;package&nbsp;being&nbsp;constructed.</span><br>
<span class="lineno"></span><span class="comment" id="5927218">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;from&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5927261">//&nbsp;If&nbsp;returnImports&nbsp;is&nbsp;true&nbsp;and&nbsp;name&nbsp;denotes&nbsp;a&nbsp;Go&nbsp;program,&nbsp;matchFile&nbsp;reads</span><br>
<span class="lineno"></span><span class="comment" id="5927336">//&nbsp;until&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;imports&nbsp;(and&nbsp;returns&nbsp;that&nbsp;data)&nbsp;even&nbsp;though&nbsp;it&nbsp;only</span><br>
<span class="lineno">920</span><span class="comment" id="5927412">//&nbsp;considers&nbsp;text&nbsp;until&nbsp;the&nbsp;first&nbsp;non-comment.</span><br>
<span class="lineno"></span><span class="comment" id="5927459">//&nbsp;If&nbsp;allTags&nbsp;is&nbsp;non-nil,&nbsp;matchFile&nbsp;records&nbsp;any&nbsp;encountered&nbsp;build&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="5927529">//&nbsp;by&nbsp;setting&nbsp;allTags[tag]&nbsp;=&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="5927564">func</span>&nbsp;<span class="op" id="5927569">(</span><span class="ident" id="5927570">ctxt</span>&nbsp;<span class="op" id="5927575">*</span><span class="ident" id="5927576"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5927583">)</span>&nbsp;<span class="ident" id="5927585">matchFile</span><span class="op" id="5927594">(</span><span class="ident" id="5927595">dir</span><span class="op" id="5927598">,</span>&nbsp;<span class="ident" id="5927600">name</span>&nbsp;<span class="builtintype" id="5927605">string</span><span class="op" id="5927611">,</span>&nbsp;<span class="ident" id="5927613">returnImports</span>&nbsp;<span class="builtintype" id="5927627">bool</span><span class="op" id="5927631">,</span>&nbsp;<span class="ident" id="5927633">allTags</span>&nbsp;<span class="keyword" id="5927641">map</span><span class="op" id="5927644">[</span><span class="builtintype" id="5927645">string</span><span class="op" id="5927651">]</span><span class="builtintype" id="5927652">bool</span><span class="op" id="5927656">)</span>&nbsp;<span class="op" id="5927658">(</span><span class="ident" id="5927659">match</span>&nbsp;<span class="builtintype" id="5927665">bool</span><span class="op" id="5927669">,</span>&nbsp;<span class="ident" id="5927671">data</span>&nbsp;<span class="op" id="5927676">[</span><span class="op" id="5927677">]</span><span class="builtintype" id="5927678">byte</span><span class="op" id="5927682">,</span>&nbsp;<span class="ident" id="5927684">filename</span>&nbsp;<span class="builtintype" id="5927693">string</span><span class="op" id="5927699">,</span>&nbsp;<span class="ident" id="5927701">err</span>&nbsp;<span class="builtintype" id="5927705">error</span><span class="op" id="5927710">)</span>&nbsp;<span class="op" id="5927712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927715">if</span>&nbsp;<span class="ident" id="5927718"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5927725">.</span><span class="ident" id="5927726"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5927735">(</span><span class="ident" id="5927736"><a href="/gostd/go/build/build.go.html#5927600">name</a></span><span class="op" id="5927740">,</span>&nbsp;<span class="string" id="5927742">&#34;_&#34;</span><span class="op" id="5927745">)</span>&nbsp;<span class="op" id="5927747">||</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927752"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5927759">.</span><span class="ident" id="5927760"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5927769">(</span><span class="ident" id="5927770"><a href="/gostd/go/build/build.go.html#5927600">name</a></span><span class="op" id="5927774">,</span>&nbsp;<span class="string" id="5927776">&#34;.&#34;</span><span class="op" id="5927779">)</span>&nbsp;<span class="op" id="5927781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927785">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927797">i</span>&nbsp;<span class="op" id="5927799">:=</span>&nbsp;<span class="ident" id="5927802"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5927809">.</span><span class="ident" id="5927810"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="5927819">(</span><span class="ident" id="5927820"><a href="/gostd/go/build/build.go.html#5927600">name</a></span><span class="op" id="5927824">,</span>&nbsp;<span class="string" id="5927826">&#34;.&#34;</span><span class="op" id="5927829">)</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927832">if</span>&nbsp;<span class="ident" id="5927835"><a href="/gostd/go/build/build.go.html#5927797">i</a></span>&nbsp;<span class="op" id="5927837">&lt;</span>&nbsp;<span class="num" id="5927839">0</span>&nbsp;<span class="op" id="5927841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927845"><a href="/gostd/go/build/build.go.html#5927797">i</a></span>&nbsp;<span class="op" id="5927847">=</span>&nbsp;<span class="builtinfunc" id="5927849">len</span><span class="op" id="5927852">(</span><span class="ident" id="5927853"><a href="/gostd/go/build/build.go.html#5927600">name</a></span><span class="op" id="5927857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927863">ext</span>&nbsp;<span class="op" id="5927867">:=</span>&nbsp;<span class="ident" id="5927870"><a href="/gostd/go/build/build.go.html#5927600">name</a></span><span class="op" id="5927874">[</span><span class="ident" id="5927875"><a href="/gostd/go/build/build.go.html#5927797">i</a></span><span class="op" id="5927876">:</span><span class="op" id="5927877">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927881">if</span>&nbsp;<span class="op" id="5927884">!</span><span class="ident" id="5927885"><a href="/gostd/go/build/build.go.html#5927570">ctxt</a></span><span class="op" id="5927889">.</span><span class="ident" id="5927890"><a href="/gostd/go/build/build.go.html#5937020">goodOSArchFile</a></span><span class="op" id="5927904">(</span><span class="ident" id="5927905"><a href="/gostd/go/build/build.go.html#5927600">name</a></span><span class="op" id="5927909">,</span>&nbsp;<span class="ident" id="5927911"><a href="/gostd/go/build/build.go.html#5927633">allTags</a></span><span class="op" id="5927918">)</span>&nbsp;<span class="op" id="5927920">&amp;&amp;</span>&nbsp;<span class="op" id="5927923">!</span><span class="ident" id="5927924"><a href="/gostd/go/build/build.go.html#5927570">ctxt</a></span><span class="op" id="5927928">.</span><span class="ident" id="5927929"><a href="/gostd/go/build/build.go.html#5900894">UseAllFiles</a></span>&nbsp;<span class="op" id="5927941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927945">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927957">switch</span>&nbsp;<span class="ident" id="5927964"><a href="/gostd/go/build/build.go.html#5927863">ext</a></span>&nbsp;<span class="op" id="5927968">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927971">case</span>&nbsp;<span class="string" id="5927976">&#34;.go&#34;</span><span class="op" id="5927981">,</span>&nbsp;<span class="string" id="5927983">&#34;.c&#34;</span><span class="op" id="5927987">,</span>&nbsp;<span class="string" id="5927989">&#34;.cc&#34;</span><span class="op" id="5927994">,</span>&nbsp;<span class="string" id="5927996">&#34;.cxx&#34;</span><span class="op" id="5928002">,</span>&nbsp;<span class="string" id="5928004">&#34;.cpp&#34;</span><span class="op" id="5928010">,</span>&nbsp;<span class="string" id="5928012">&#34;.m&#34;</span><span class="op" id="5928016">,</span>&nbsp;<span class="string" id="5928018">&#34;.s&#34;</span><span class="op" id="5928022">,</span>&nbsp;<span class="string" id="5928024">&#34;.h&#34;</span><span class="op" id="5928028">,</span>&nbsp;<span class="string" id="5928030">&#34;.hh&#34;</span><span class="op" id="5928035">,</span>&nbsp;<span class="string" id="5928037">&#34;.hpp&#34;</span><span class="op" id="5928043">,</span>&nbsp;<span class="string" id="5928045">&#34;.hxx&#34;</span><span class="op" id="5928051">,</span>&nbsp;<span class="string" id="5928053">&#34;.S&#34;</span><span class="op" id="5928057">,</span>&nbsp;<span class="string" id="5928059">&#34;.swig&#34;</span><span class="op" id="5928066">,</span>&nbsp;<span class="string" id="5928068">&#34;.swigcxx&#34;</span><span class="op" id="5928078">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5928082">//&nbsp;tentatively&nbsp;okay&nbsp;-&nbsp;read&nbsp;to&nbsp;make&nbsp;sure</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928123">case</span>&nbsp;<span class="string" id="5928128">&#34;.syso&#34;</span><span class="op" id="5928135">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5928139">//&nbsp;binary,&nbsp;no&nbsp;reading</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928163"><a href="/gostd/go/build/build.go.html#5927659">match</a></span>&nbsp;<span class="op" id="5928169">=</span>&nbsp;<span class="builtintype" id="5928171">true</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928178">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928186">default</span><span class="op" id="5928193">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5928197">//&nbsp;skip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928207">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5928215">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928219"><a href="/gostd/go/build/build.go.html#5927684">filename</a></span>&nbsp;<span class="op" id="5928228">=</span>&nbsp;<span class="ident" id="5928230"><a href="/gostd/go/build/build.go.html#5927570">ctxt</a></span><span class="op" id="5928234">.</span><span class="ident" id="5928235"><a href="/gostd/go/build/build.go.html#5903838">joinPath</a></span><span class="op" id="5928243">(</span><span class="ident" id="5928244"><a href="/gostd/go/build/build.go.html#5927595">dir</a></span><span class="op" id="5928247">,</span>&nbsp;<span class="ident" id="5928249"><a href="/gostd/go/build/build.go.html#5927600">name</a></span><span class="op" id="5928253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928256">f</span><span class="op" id="5928257">,</span>&nbsp;<span class="ident" id="5928259"><a href="/gostd/go/build/build.go.html#5927701">err</a></span>&nbsp;<span class="op" id="5928263">:=</span>&nbsp;<span class="ident" id="5928266"><a href="/gostd/go/build/build.go.html#5927570">ctxt</a></span><span class="op" id="5928270">.</span><span class="ident" id="5928271"><a href="/gostd/go/build/build.go.html#5905918">openFile</a></span><span class="op" id="5928279">(</span><span class="ident" id="5928280"><a href="/gostd/go/build/build.go.html#5927684">filename</a></span><span class="op" id="5928288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928291">if</span>&nbsp;<span class="ident" id="5928294"><a href="/gostd/go/build/build.go.html#5927701">err</a></span>&nbsp;<span class="op" id="5928298">!=</span>&nbsp;<span class="builtintype" id="5928301">nil</span>&nbsp;<span class="op" id="5928305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928309">return</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5928317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928321">if</span>&nbsp;<span class="ident" id="5928324"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5928331">.</span><span class="ident" id="5928332"><a href="/gostd/strings/strings.go.html#2975527">HasSuffix</a></span><span class="op" id="5928341">(</span><span class="ident" id="5928342"><a href="/gostd/go/build/build.go.html#5927684">filename</a></span><span class="op" id="5928350">,</span>&nbsp;<span class="string" id="5928352">&#34;.go&#34;</span><span class="op" id="5928357">)</span>&nbsp;<span class="op" id="5928359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928363"><a href="/gostd/go/build/build.go.html#5927671">data</a></span><span class="op" id="5928367">,</span>&nbsp;<span class="ident" id="5928369"><a href="/gostd/go/build/build.go.html#5927701">err</a></span>&nbsp;<span class="op" id="5928373">=</span>&nbsp;<span class="ident" id="5928375"><a href="/gostd/go/build/read.go.html#5949061">readImports</a></span><span class="op" id="5928386">(</span><span class="ident" id="5928387"><a href="/gostd/go/build/build.go.html#5928256">f</a></span><span class="op" id="5928388">,</span>&nbsp;<span class="builtintype" id="5928390">false</span><span class="op" id="5928395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5928398">}</span>&nbsp;<span class="keyword" id="5928400">else</span>&nbsp;<span class="op" id="5928405">{</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928409"><a href="/gostd/go/build/build.go.html#5927671">data</a></span><span class="op" id="5928413">,</span>&nbsp;<span class="ident" id="5928415"><a href="/gostd/go/build/build.go.html#5927701">err</a></span>&nbsp;<span class="op" id="5928419">=</span>&nbsp;<span class="ident" id="5928421"><a href="/gostd/go/build/read.go.html#5948648">readComments</a></span><span class="op" id="5928433">(</span><span class="ident" id="5928434"><a href="/gostd/go/build/build.go.html#5928256">f</a></span><span class="op" id="5928435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5928438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928441"><a href="/gostd/go/build/build.go.html#5928256">f</a></span><span class="op" id="5928442">.</span><span class="ident" id="5928443"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="5928448">(</span><span class="op" id="5928449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928452">if</span>&nbsp;<span class="ident" id="5928455"><a href="/gostd/go/build/build.go.html#5927701">err</a></span>&nbsp;<span class="op" id="5928459">!=</span>&nbsp;<span class="builtintype" id="5928462">nil</span>&nbsp;<span class="op" id="5928466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928470"><a href="/gostd/go/build/build.go.html#5927701">err</a></span>&nbsp;<span class="op" id="5928474">=</span>&nbsp;<span class="ident" id="5928476"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5928479">.</span><span class="ident" id="5928480"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5928486">(</span><span class="string" id="5928487">&#34;read&nbsp;%s:&nbsp;%v&#34;</span><span class="op" id="5928500">,</span>&nbsp;<span class="ident" id="5928502"><a href="/gostd/go/build/build.go.html#5927684">filename</a></span><span class="op" id="5928510">,</span>&nbsp;<span class="ident" id="5928512"><a href="/gostd/go/build/build.go.html#5927701">err</a></span><span class="op" id="5928515">)</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928519">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5928527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5928531">//&nbsp;Look&nbsp;for&nbsp;+build&nbsp;comments&nbsp;to&nbsp;accept&nbsp;or&nbsp;reject&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928590">if</span>&nbsp;<span class="op" id="5928593">!</span><span class="ident" id="5928594"><a href="/gostd/go/build/build.go.html#5927570">ctxt</a></span><span class="op" id="5928598">.</span><span class="ident" id="5928599"><a href="/gostd/go/build/build.go.html#5929766">shouldBuild</a></span><span class="op" id="5928610">(</span><span class="ident" id="5928611"><a href="/gostd/go/build/build.go.html#5927671">data</a></span><span class="op" id="5928615">,</span>&nbsp;<span class="ident" id="5928617"><a href="/gostd/go/build/build.go.html#5927633">allTags</a></span><span class="op" id="5928624">)</span>&nbsp;<span class="op" id="5928626">&amp;&amp;</span>&nbsp;<span class="op" id="5928629">!</span><span class="ident" id="5928630"><a href="/gostd/go/build/build.go.html#5927570">ctxt</a></span><span class="op" id="5928634">.</span><span class="ident" id="5928635"><a href="/gostd/go/build/build.go.html#5900894">UseAllFiles</a></span>&nbsp;<span class="op" id="5928647">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928651">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5928659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928663"><a href="/gostd/go/build/build.go.html#5927659">match</a></span>&nbsp;<span class="op" id="5928669">=</span>&nbsp;<span class="builtintype" id="5928671">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928677">return</span><br>
<span class="lineno">975</span><span class="op" id="5928684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5928687">func</span>&nbsp;<span class="ident" id="5928692">cleanImports</span><span class="op" id="5928704">(</span><span class="ident" id="5928705">m</span>&nbsp;<span class="keyword" id="5928707">map</span><span class="op" id="5928710">[</span><span class="builtintype" id="5928711">string</span><span class="op" id="5928717">]</span><span class="op" id="5928718">[</span><span class="op" id="5928719">]</span><span class="ident" id="5928720"><a href="/gostd/go/build/build.go.html#5900466">token</a></span><span class="op" id="5928725">.</span><span class="ident" id="5928726"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5928734">)</span>&nbsp;<span class="op" id="5928736">(</span><span class="op" id="5928737">[</span><span class="op" id="5928738">]</span><span class="builtintype" id="5928739">string</span><span class="op" id="5928745">,</span>&nbsp;<span class="keyword" id="5928747">map</span><span class="op" id="5928750">[</span><span class="builtintype" id="5928751">string</span><span class="op" id="5928757">]</span><span class="op" id="5928758">[</span><span class="op" id="5928759">]</span><span class="ident" id="5928760"><a href="/gostd/go/build/build.go.html#5900466">token</a></span><span class="op" id="5928765">.</span><span class="ident" id="5928766"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5928774">)</span>&nbsp;<span class="op" id="5928776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928779">all</span>&nbsp;<span class="op" id="5928783">:=</span>&nbsp;<span class="builtinfunc" id="5928786">make</span><span class="op" id="5928790">(</span><span class="op" id="5928791">[</span><span class="op" id="5928792">]</span><span class="builtintype" id="5928793">string</span><span class="op" id="5928799">,</span>&nbsp;<span class="num" id="5928801">0</span><span class="op" id="5928802">,</span>&nbsp;<span class="builtinfunc" id="5928804">len</span><span class="op" id="5928807">(</span><span class="ident" id="5928808"><a href="/gostd/go/build/build.go.html#5928705">m</a></span><span class="op" id="5928809">)</span><span class="op" id="5928810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928813">for</span>&nbsp;<span class="ident" id="5928817">path</span>&nbsp;<span class="op" id="5928822">:=</span>&nbsp;<span class="keyword" id="5928825">range</span>&nbsp;<span class="ident" id="5928831"><a href="/gostd/go/build/build.go.html#5928705">m</a></span>&nbsp;<span class="op" id="5928833">{</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928837"><a href="/gostd/go/build/build.go.html#5928779">all</a></span>&nbsp;<span class="op" id="5928841">=</span>&nbsp;<span class="builtinfunc" id="5928843">append</span><span class="op" id="5928849">(</span><span class="ident" id="5928850"><a href="/gostd/go/build/build.go.html#5928779">all</a></span><span class="op" id="5928853">,</span>&nbsp;<span class="ident" id="5928855"><a href="/gostd/go/build/build.go.html#5928817">path</a></span><span class="op" id="5928859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5928862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5928865"><a href="/gostd/go/build/build.go.html#5900554">sort</a></span><span class="op" id="5928869">.</span><span class="ident" id="5928870"><a href="/gostd/sort/sort.go.html#2017831">Strings</a></span><span class="op" id="5928877">(</span><span class="ident" id="5928878"><a href="/gostd/go/build/build.go.html#5928779">all</a></span><span class="op" id="5928881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5928884">return</span>&nbsp;<span class="ident" id="5928891"><a href="/gostd/go/build/build.go.html#5928779">all</a></span><span class="op" id="5928894">,</span>&nbsp;<span class="ident" id="5928896"><a href="/gostd/go/build/build.go.html#5928705">m</a></span><br>
<span class="lineno"></span><span class="op" id="5928898">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="5928901">//&nbsp;Import&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;Default.Import.</span><br>
<span class="lineno"></span><span class="keyword" id="5928944">func</span>&nbsp;<span class="ident" id="5928949">Import</span><span class="op" id="5928955">(</span><span class="ident" id="5928956">path</span><span class="op" id="5928960">,</span>&nbsp;<span class="ident" id="5928962">srcDir</span>&nbsp;<span class="builtintype" id="5928969">string</span><span class="op" id="5928975">,</span>&nbsp;<span class="ident" id="5928977">mode</span>&nbsp;<span class="ident" id="5928982"><a href="/gostd/go/build/build.go.html#5910097">ImportMode</a></span><span class="op" id="5928992">)</span>&nbsp;<span class="op" id="5928994">(</span><span class="op" id="5928995">*</span><span class="ident" id="5928996"><a href="/gostd/go/build/build.go.html#5910800">Package</a></span><span class="op" id="5929003">,</span>&nbsp;<span class="builtintype" id="5929005">error</span><span class="op" id="5929010">)</span>&nbsp;<span class="op" id="5929012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5929015">return</span>&nbsp;<span class="ident" id="5929022"><a href="/gostd/go/build/build.go.html#5908209">Default</a></span><span class="op" id="5929029">.</span><span class="ident" id="5929030"><a href="/gostd/go/build/build.go.html#5915395">Import</a></span><span class="op" id="5929036">(</span><span class="ident" id="5929037"><a href="/gostd/go/build/build.go.html#5928956">path</a></span><span class="op" id="5929041">,</span>&nbsp;<span class="ident" id="5929043"><a href="/gostd/go/build/build.go.html#5928962">srcDir</a></span><span class="op" id="5929049">,</span>&nbsp;<span class="ident" id="5929051"><a href="/gostd/go/build/build.go.html#5928977">mode</a></span><span class="op" id="5929055">)</span><br>
<span class="lineno"></span><span class="op" id="5929057">}</span><br>
<span class="lineno">990</span><br>
<span class="lineno"></span><span class="comment" id="5929060">//&nbsp;ImportDir&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;Default.ImportDir.</span><br>
<span class="lineno"></span><span class="keyword" id="5929109">func</span>&nbsp;<span class="ident" id="5929114">ImportDir</span><span class="op" id="5929123">(</span><span class="ident" id="5929124">dir</span>&nbsp;<span class="builtintype" id="5929128">string</span><span class="op" id="5929134">,</span>&nbsp;<span class="ident" id="5929136">mode</span>&nbsp;<span class="ident" id="5929141"><a href="/gostd/go/build/build.go.html#5910097">ImportMode</a></span><span class="op" id="5929151">)</span>&nbsp;<span class="op" id="5929153">(</span><span class="op" id="5929154">*</span><span class="ident" id="5929155"><a href="/gostd/go/build/build.go.html#5910800">Package</a></span><span class="op" id="5929162">,</span>&nbsp;<span class="builtintype" id="5929164">error</span><span class="op" id="5929169">)</span>&nbsp;<span class="op" id="5929171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5929174">return</span>&nbsp;<span class="ident" id="5929181"><a href="/gostd/go/build/build.go.html#5908209">Default</a></span><span class="op" id="5929188">.</span><span class="ident" id="5929189"><a href="/gostd/go/build/build.go.html#5913558">ImportDir</a></span><span class="op" id="5929198">(</span><span class="ident" id="5929199"><a href="/gostd/go/build/build.go.html#5929124">dir</a></span><span class="op" id="5929202">,</span>&nbsp;<span class="ident" id="5929204"><a href="/gostd/go/build/build.go.html#5929136">mode</a></span><span class="op" id="5929208">)</span><br>
<span class="lineno"></span><span class="op" id="5929210">}</span><br>
<span class="lineno">995</span><br>
<span class="lineno"></span><span class="keyword" id="5929213">var</span>&nbsp;<span class="ident" id="5929217">slashslash</span>&nbsp;<span class="op" id="5929228">=</span>&nbsp;<span class="op" id="5929230">[</span><span class="op" id="5929231">]</span><span class="builtintype" id="5929232">byte</span><span class="op" id="5929236">(</span><span class="string" id="5929237">&#34;//&#34;</span><span class="op" id="5929241">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5929244">//&nbsp;shouldBuild&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;okay&nbsp;to&nbsp;use&nbsp;this&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="5929304">//&nbsp;The&nbsp;rule&nbsp;is&nbsp;that&nbsp;in&nbsp;the&nbsp;file&#39;s&nbsp;leading&nbsp;run&nbsp;of&nbsp;//&nbsp;comments</span><br>
<span class="lineno">1000</span><span class="comment" id="5929365">//&nbsp;and&nbsp;blank&nbsp;lines,&nbsp;which&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="5929424">//&nbsp;(to&nbsp;avoid&nbsp;including&nbsp;a&nbsp;Go&nbsp;package&nbsp;clause&nbsp;doc&nbsp;comment),</span><br>
<span class="lineno"></span><span class="comment" id="5929481">//&nbsp;lines&nbsp;beginning&nbsp;with&nbsp;&#39;//&nbsp;+build&#39;&nbsp;are&nbsp;taken&nbsp;as&nbsp;build&nbsp;directives.</span><br>
<span class="lineno"></span><span class="comment" id="5929548">//</span><br>
<span class="lineno"></span><span class="comment" id="5929551">//&nbsp;The&nbsp;file&nbsp;is&nbsp;accepted&nbsp;only&nbsp;if&nbsp;each&nbsp;such&nbsp;line&nbsp;lists&nbsp;something</span><br>
<span class="lineno">1005</span><span class="comment" id="5929614">//&nbsp;matching&nbsp;the&nbsp;file.&nbsp;&nbsp;For&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="5929650">//</span><br>
<span class="lineno"></span><span class="comment" id="5929653">//&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;+build&nbsp;windows&nbsp;linux</span><br>
<span class="lineno"></span><span class="comment" id="5929680">//</span><br>
<span class="lineno"></span><span class="comment" id="5929683">//&nbsp;marks&nbsp;the&nbsp;file&nbsp;as&nbsp;applicable&nbsp;only&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Linux.</span><br>
<span class="lineno">1010</span><span class="comment" id="5929742">//</span><br>
<span class="lineno"></span><span class="keyword" id="5929745">func</span>&nbsp;<span class="op" id="5929750">(</span><span class="ident" id="5929751">ctxt</span>&nbsp;<span class="op" id="5929756">*</span><span class="ident" id="5929757"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5929764">)</span>&nbsp;<span class="ident" id="5929766">shouldBuild</span><span class="op" id="5929777">(</span><span class="ident" id="5929778">content</span>&nbsp;<span class="op" id="5929786">[</span><span class="op" id="5929787">]</span><span class="builtintype" id="5929788">byte</span><span class="op" id="5929792">,</span>&nbsp;<span class="ident" id="5929794">allTags</span>&nbsp;<span class="keyword" id="5929802">map</span><span class="op" id="5929805">[</span><span class="builtintype" id="5929806">string</span><span class="op" id="5929812">]</span><span class="builtintype" id="5929813">bool</span><span class="op" id="5929817">)</span>&nbsp;<span class="builtintype" id="5929819">bool</span>&nbsp;<span class="op" id="5929824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5929827">//&nbsp;Pass&nbsp;1.&nbsp;Identify&nbsp;leading&nbsp;run&nbsp;of&nbsp;//&nbsp;comments&nbsp;and&nbsp;blank&nbsp;lines,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5929892">//&nbsp;which&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5929936">end</span>&nbsp;<span class="op" id="5929940">:=</span>&nbsp;<span class="num" id="5929943">0</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5929946">p</span>&nbsp;<span class="op" id="5929948">:=</span>&nbsp;<span class="ident" id="5929951"><a href="/gostd/go/build/build.go.html#5929778">content</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5929960">for</span>&nbsp;<span class="builtinfunc" id="5929964">len</span><span class="op" id="5929967">(</span><span class="ident" id="5929968"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><span class="op" id="5929969">)</span>&nbsp;<span class="op" id="5929971">&gt;</span>&nbsp;<span class="num" id="5929973">0</span>&nbsp;<span class="op" id="5929975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5929979">line</span>&nbsp;<span class="op" id="5929984">:=</span>&nbsp;<span class="ident" id="5929987"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5929991">if</span>&nbsp;<span class="ident" id="5929994">i</span>&nbsp;<span class="op" id="5929996">:=</span>&nbsp;<span class="ident" id="5929999"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5930004">.</span><span class="ident" id="5930005"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="5930014">(</span><span class="ident" id="5930015"><a href="/gostd/go/build/build.go.html#5929979">line</a></span><span class="op" id="5930019">,</span>&nbsp;<span class="string" id="5930021">&#39;\n&#39;</span><span class="op" id="5930025">)</span><span class="op" id="5930026">;</span>&nbsp;<span class="ident" id="5930028"><a href="/gostd/go/build/build.go.html#5929994">i</a></span>&nbsp;<span class="op" id="5930030">&gt;=</span>&nbsp;<span class="num" id="5930033">0</span>&nbsp;<span class="op" id="5930035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930040"><a href="/gostd/go/build/build.go.html#5929979">line</a></span><span class="op" id="5930044">,</span>&nbsp;<span class="ident" id="5930046"><a href="/gostd/go/build/build.go.html#5929946">p</a></span>&nbsp;<span class="op" id="5930048">=</span>&nbsp;<span class="ident" id="5930050"><a href="/gostd/go/build/build.go.html#5929979">line</a></span><span class="op" id="5930054">[</span><span class="op" id="5930055">:</span><span class="ident" id="5930056"><a href="/gostd/go/build/build.go.html#5929994">i</a></span><span class="op" id="5930057">]</span><span class="op" id="5930058">,</span>&nbsp;<span class="ident" id="5930060"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><span class="op" id="5930061">[</span><span class="ident" id="5930062"><a href="/gostd/go/build/build.go.html#5929994">i</a></span><span class="op" id="5930063">+</span><span class="num" id="5930064">1</span><span class="op" id="5930065">:</span><span class="op" id="5930066">]</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930070">}</span>&nbsp;<span class="keyword" id="5930072">else</span>&nbsp;<span class="op" id="5930077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930082"><a href="/gostd/go/build/build.go.html#5929946">p</a></span>&nbsp;<span class="op" id="5930084">=</span>&nbsp;<span class="ident" id="5930086"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><span class="op" id="5930087">[</span><span class="builtinfunc" id="5930088">len</span><span class="op" id="5930091">(</span><span class="ident" id="5930092"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><span class="op" id="5930093">)</span><span class="op" id="5930094">:</span><span class="op" id="5930095">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930103"><a href="/gostd/go/build/build.go.html#5929979">line</a></span>&nbsp;<span class="op" id="5930108">=</span>&nbsp;<span class="ident" id="5930110"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5930115">.</span><span class="ident" id="5930116"><a href="/gostd/bytes/bytes.go.html#1411807">TrimSpace</a></span><span class="op" id="5930125">(</span><span class="ident" id="5930126"><a href="/gostd/go/build/build.go.html#5929979">line</a></span><span class="op" id="5930130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930134">if</span>&nbsp;<span class="builtinfunc" id="5930137">len</span><span class="op" id="5930140">(</span><span class="ident" id="5930141"><a href="/gostd/go/build/build.go.html#5929979">line</a></span><span class="op" id="5930145">)</span>&nbsp;<span class="op" id="5930147">==</span>&nbsp;<span class="num" id="5930150">0</span>&nbsp;<span class="op" id="5930152">{</span>&nbsp;<span class="comment" id="5930154">//&nbsp;Blank&nbsp;line</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930171"><a href="/gostd/go/build/build.go.html#5929936">end</a></span>&nbsp;<span class="op" id="5930175">=</span>&nbsp;<span class="builtinfunc" id="5930177">len</span><span class="op" id="5930180">(</span><span class="ident" id="5930181"><a href="/gostd/go/build/build.go.html#5929778">content</a></span><span class="op" id="5930188">)</span>&nbsp;<span class="op" id="5930190">-</span>&nbsp;<span class="builtinfunc" id="5930192">len</span><span class="op" id="5930195">(</span><span class="ident" id="5930196"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><span class="op" id="5930197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930202">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930217">if</span>&nbsp;<span class="op" id="5930220">!</span><span class="ident" id="5930221"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5930226">.</span><span class="ident" id="5930227"><a href="/gostd/bytes/bytes.go.html#1403977">HasPrefix</a></span><span class="op" id="5930236">(</span><span class="ident" id="5930237"><a href="/gostd/go/build/build.go.html#5929979">line</a></span><span class="op" id="5930241">,</span>&nbsp;<span class="ident" id="5930243"><a href="/gostd/go/build/build.go.html#5929217">slashslash</a></span><span class="op" id="5930253">)</span>&nbsp;<span class="op" id="5930255">{</span>&nbsp;<span class="comment" id="5930257">//&nbsp;Not&nbsp;comment&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930280">break</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930294"><a href="/gostd/go/build/build.go.html#5929778">content</a></span>&nbsp;<span class="op" id="5930302">=</span>&nbsp;<span class="ident" id="5930304"><a href="/gostd/go/build/build.go.html#5929778">content</a></span><span class="op" id="5930311">[</span><span class="op" id="5930312">:</span><span class="ident" id="5930313"><a href="/gostd/go/build/build.go.html#5929936">end</a></span><span class="op" id="5930316">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5930320">//&nbsp;Pass&nbsp;2.&nbsp;&nbsp;Process&nbsp;each&nbsp;line&nbsp;in&nbsp;the&nbsp;run.</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930363"><a href="/gostd/go/build/build.go.html#5929946">p</a></span>&nbsp;<span class="op" id="5930365">=</span>&nbsp;<span class="ident" id="5930367"><a href="/gostd/go/build/build.go.html#5929778">content</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930376">allok</span>&nbsp;<span class="op" id="5930382">:=</span>&nbsp;<span class="builtintype" id="5930385">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930391">for</span>&nbsp;<span class="builtinfunc" id="5930395">len</span><span class="op" id="5930398">(</span><span class="ident" id="5930399"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><span class="op" id="5930400">)</span>&nbsp;<span class="op" id="5930402">&gt;</span>&nbsp;<span class="num" id="5930404">0</span>&nbsp;<span class="op" id="5930406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930410">line</span>&nbsp;<span class="op" id="5930415">:=</span>&nbsp;<span class="ident" id="5930418"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930422">if</span>&nbsp;<span class="ident" id="5930425">i</span>&nbsp;<span class="op" id="5930427">:=</span>&nbsp;<span class="ident" id="5930430"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5930435">.</span><span class="ident" id="5930436"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="5930445">(</span><span class="ident" id="5930446"><a href="/gostd/go/build/build.go.html#5930410">line</a></span><span class="op" id="5930450">,</span>&nbsp;<span class="string" id="5930452">&#39;\n&#39;</span><span class="op" id="5930456">)</span><span class="op" id="5930457">;</span>&nbsp;<span class="ident" id="5930459"><a href="/gostd/go/build/build.go.html#5930425">i</a></span>&nbsp;<span class="op" id="5930461">&gt;=</span>&nbsp;<span class="num" id="5930464">0</span>&nbsp;<span class="op" id="5930466">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930471"><a href="/gostd/go/build/build.go.html#5930410">line</a></span><span class="op" id="5930475">,</span>&nbsp;<span class="ident" id="5930477"><a href="/gostd/go/build/build.go.html#5929946">p</a></span>&nbsp;<span class="op" id="5930479">=</span>&nbsp;<span class="ident" id="5930481"><a href="/gostd/go/build/build.go.html#5930410">line</a></span><span class="op" id="5930485">[</span><span class="op" id="5930486">:</span><span class="ident" id="5930487"><a href="/gostd/go/build/build.go.html#5930425">i</a></span><span class="op" id="5930488">]</span><span class="op" id="5930489">,</span>&nbsp;<span class="ident" id="5930491"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><span class="op" id="5930492">[</span><span class="ident" id="5930493"><a href="/gostd/go/build/build.go.html#5930425">i</a></span><span class="op" id="5930494">+</span><span class="num" id="5930495">1</span><span class="op" id="5930496">:</span><span class="op" id="5930497">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930501">}</span>&nbsp;<span class="keyword" id="5930503">else</span>&nbsp;<span class="op" id="5930508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930513"><a href="/gostd/go/build/build.go.html#5929946">p</a></span>&nbsp;<span class="op" id="5930515">=</span>&nbsp;<span class="ident" id="5930517"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><span class="op" id="5930518">[</span><span class="builtinfunc" id="5930519">len</span><span class="op" id="5930522">(</span><span class="ident" id="5930523"><a href="/gostd/go/build/build.go.html#5929946">p</a></span><span class="op" id="5930524">)</span><span class="op" id="5930525">:</span><span class="op" id="5930526">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930534"><a href="/gostd/go/build/build.go.html#5930410">line</a></span>&nbsp;<span class="op" id="5930539">=</span>&nbsp;<span class="ident" id="5930541"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5930546">.</span><span class="ident" id="5930547"><a href="/gostd/bytes/bytes.go.html#1411807">TrimSpace</a></span><span class="op" id="5930556">(</span><span class="ident" id="5930557"><a href="/gostd/go/build/build.go.html#5930410">line</a></span><span class="op" id="5930561">)</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930565">if</span>&nbsp;<span class="ident" id="5930568"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5930573">.</span><span class="ident" id="5930574"><a href="/gostd/bytes/bytes.go.html#1403977">HasPrefix</a></span><span class="op" id="5930583">(</span><span class="ident" id="5930584"><a href="/gostd/go/build/build.go.html#5930410">line</a></span><span class="op" id="5930588">,</span>&nbsp;<span class="ident" id="5930590"><a href="/gostd/go/build/build.go.html#5929217">slashslash</a></span><span class="op" id="5930600">)</span>&nbsp;<span class="op" id="5930602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930607"><a href="/gostd/go/build/build.go.html#5930410">line</a></span>&nbsp;<span class="op" id="5930612">=</span>&nbsp;<span class="ident" id="5930614"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5930619">.</span><span class="ident" id="5930620"><a href="/gostd/bytes/bytes.go.html#1411807">TrimSpace</a></span><span class="op" id="5930629">(</span><span class="ident" id="5930630"><a href="/gostd/go/build/build.go.html#5930410">line</a></span><span class="op" id="5930634">[</span><span class="builtinfunc" id="5930635">len</span><span class="op" id="5930638">(</span><span class="ident" id="5930639"><a href="/gostd/go/build/build.go.html#5929217">slashslash</a></span><span class="op" id="5930649">)</span><span class="op" id="5930650">:</span><span class="op" id="5930651">]</span><span class="op" id="5930652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930657">if</span>&nbsp;<span class="builtinfunc" id="5930660">len</span><span class="op" id="5930663">(</span><span class="ident" id="5930664"><a href="/gostd/go/build/build.go.html#5930410">line</a></span><span class="op" id="5930668">)</span>&nbsp;<span class="op" id="5930670">&gt;</span>&nbsp;<span class="num" id="5930672">0</span>&nbsp;<span class="op" id="5930674">&amp;&amp;</span>&nbsp;<span class="ident" id="5930677"><a href="/gostd/go/build/build.go.html#5930410">line</a></span><span class="op" id="5930681">[</span><span class="num" id="5930682">0</span><span class="op" id="5930683">]</span>&nbsp;<span class="op" id="5930685">==</span>&nbsp;<span class="string" id="5930688">&#39;+&#39;</span>&nbsp;<span class="op" id="5930692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5930698">//&nbsp;Looks&nbsp;like&nbsp;a&nbsp;comment&nbsp;+line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930733">f</span>&nbsp;<span class="op" id="5930735">:=</span>&nbsp;<span class="ident" id="5930738"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5930745">.</span><span class="ident" id="5930746"><a href="/gostd/strings/strings.go.html#2973751">Fields</a></span><span class="op" id="5930752">(</span><span class="builtintype" id="5930753">string</span><span class="op" id="5930759">(</span><span class="ident" id="5930760"><a href="/gostd/go/build/build.go.html#5930410">line</a></span><span class="op" id="5930764">)</span><span class="op" id="5930765">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930771">if</span>&nbsp;<span class="ident" id="5930774"><a href="/gostd/go/build/build.go.html#5930733">f</a></span><span class="op" id="5930775">[</span><span class="num" id="5930776">0</span><span class="op" id="5930777">]</span>&nbsp;<span class="op" id="5930779">==</span>&nbsp;<span class="string" id="5930782">&#34;+build&#34;</span>&nbsp;<span class="op" id="5930791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930798">ok</span>&nbsp;<span class="op" id="5930801">:=</span>&nbsp;<span class="builtintype" id="5930804">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930815">for</span>&nbsp;<span class="ident" id="5930819">_</span><span class="op" id="5930820">,</span>&nbsp;<span class="ident" id="5930822">tok</span>&nbsp;<span class="op" id="5930826">:=</span>&nbsp;<span class="keyword" id="5930829">range</span>&nbsp;<span class="ident" id="5930835"><a href="/gostd/go/build/build.go.html#5930733">f</a></span><span class="op" id="5930836">[</span><span class="num" id="5930837">1</span><span class="op" id="5930838">:</span><span class="op" id="5930839">]</span>&nbsp;<span class="op" id="5930841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930849">if</span>&nbsp;<span class="ident" id="5930852"><a href="/gostd/go/build/build.go.html#5929751">ctxt</a></span><span class="op" id="5930856">.</span><span class="ident" id="5930857"><a href="/gostd/go/build/build.go.html#5935370">match</a></span><span class="op" id="5930862">(</span><span class="ident" id="5930863"><a href="/gostd/go/build/build.go.html#5930822">tok</a></span><span class="op" id="5930866">,</span>&nbsp;<span class="ident" id="5930868"><a href="/gostd/go/build/build.go.html#5929794">allTags</a></span><span class="op" id="5930875">)</span>&nbsp;<span class="op" id="5930877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930886"><a href="/gostd/go/build/build.go.html#5930798">ok</a></span>&nbsp;<span class="op" id="5930889">=</span>&nbsp;<span class="builtintype" id="5930891">true</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930916">if</span>&nbsp;<span class="op" id="5930919">!</span><span class="ident" id="5930920"><a href="/gostd/go/build/build.go.html#5930798">ok</a></span>&nbsp;<span class="op" id="5930923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5930931"><a href="/gostd/go/build/build.go.html#5930376">allok</a></span>&nbsp;<span class="op" id="5930937">=</span>&nbsp;<span class="builtintype" id="5930939">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930950">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5930968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5930972">return</span>&nbsp;<span class="ident" id="5930979"><a href="/gostd/go/build/build.go.html#5930376">allok</a></span><br>
<span class="lineno"></span><span class="op" id="5930985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5930988">//&nbsp;saveCgo&nbsp;saves&nbsp;the&nbsp;information&nbsp;from&nbsp;the&nbsp;#cgo&nbsp;lines&nbsp;in&nbsp;the&nbsp;import&nbsp;&#34;C&#34;&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5931068">//&nbsp;These&nbsp;lines&nbsp;set&nbsp;CFLAGS,&nbsp;CPPFLAGS,&nbsp;CXXFLAGS&nbsp;and&nbsp;LDFLAGS&nbsp;and&nbsp;pkg-config&nbsp;directives</span><br>
<span class="lineno">1070</span><span class="comment" id="5931152">//&nbsp;that&nbsp;affect&nbsp;the&nbsp;way&nbsp;cgo&#39;s&nbsp;C&nbsp;code&nbsp;is&nbsp;built.</span><br>
<span class="lineno"></span><span class="comment" id="5931198">//</span><br>
<span class="lineno"></span><span class="comment" id="5931201">//&nbsp;TODO(rsc):&nbsp;This&nbsp;duplicates&nbsp;code&nbsp;in&nbsp;cgo.</span><br>
<span class="lineno"></span><span class="comment" id="5931244">//&nbsp;Once&nbsp;the&nbsp;dust&nbsp;settles,&nbsp;remove&nbsp;this&nbsp;code&nbsp;from&nbsp;cgo.</span><br>
<span class="lineno"></span><span class="keyword" id="5931297">func</span>&nbsp;<span class="op" id="5931302">(</span><span class="ident" id="5931303">ctxt</span>&nbsp;<span class="op" id="5931308">*</span><span class="ident" id="5931309"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5931316">)</span>&nbsp;<span class="ident" id="5931318">saveCgo</span><span class="op" id="5931325">(</span><span class="ident" id="5931326">filename</span>&nbsp;<span class="builtintype" id="5931335">string</span><span class="op" id="5931341">,</span>&nbsp;<span class="ident" id="5931343">di</span>&nbsp;<span class="op" id="5931346">*</span><span class="ident" id="5931347"><a href="/gostd/go/build/build.go.html#5910800">Package</a></span><span class="op" id="5931354">,</span>&nbsp;<span class="ident" id="5931356">cg</span>&nbsp;<span class="op" id="5931359">*</span><span class="ident" id="5931360"><a href="/gostd/go/build/build.go.html#5900433">ast</a></span><span class="op" id="5931363">.</span><span class="ident" id="5931364"><a href="/gostd/go/ast/ast.go.html#3796034">CommentGroup</a></span><span class="op" id="5931376">)</span>&nbsp;<span class="builtintype" id="5931378">error</span>&nbsp;<span class="op" id="5931384">{</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5931387">text</span>&nbsp;<span class="op" id="5931392">:=</span>&nbsp;<span class="ident" id="5931395"><a href="/gostd/go/build/build.go.html#5931356">cg</a></span><span class="op" id="5931397">.</span><span class="ident" id="5931398"><a href="/gostd/go/ast/ast.go.html#3796792">Text</a></span><span class="op" id="5931402">(</span><span class="op" id="5931403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5931406">for</span>&nbsp;<span class="ident" id="5931410">_</span><span class="op" id="5931411">,</span>&nbsp;<span class="ident" id="5931413">line</span>&nbsp;<span class="op" id="5931418">:=</span>&nbsp;<span class="keyword" id="5931421">range</span>&nbsp;<span class="ident" id="5931427"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5931434">.</span><span class="ident" id="5931435"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="5931440">(</span><span class="ident" id="5931441"><a href="/gostd/go/build/build.go.html#5931387">text</a></span><span class="op" id="5931445">,</span>&nbsp;<span class="string" id="5931447">&#34;\n&#34;</span><span class="op" id="5931451">)</span>&nbsp;<span class="op" id="5931453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5931457">orig</span>&nbsp;<span class="op" id="5931462">:=</span>&nbsp;<span class="ident" id="5931465"><a href="/gostd/go/build/build.go.html#5931413">line</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5931473">//&nbsp;Line&nbsp;is</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5931486">//&nbsp;&nbsp;&nbsp;&nbsp;#cgo&nbsp;[GOOS/GOARCH...]&nbsp;LDFLAGS:&nbsp;stuff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5931528">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5931533"><a href="/gostd/go/build/build.go.html#5931413">line</a></span>&nbsp;<span class="op" id="5931538">=</span>&nbsp;<span class="ident" id="5931540"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5931547">.</span><span class="ident" id="5931548"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="5931557">(</span><span class="ident" id="5931558"><a href="/gostd/go/build/build.go.html#5931413">line</a></span><span class="op" id="5931562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5931566">if</span>&nbsp;<span class="builtinfunc" id="5931569">len</span><span class="op" id="5931572">(</span><span class="ident" id="5931573"><a href="/gostd/go/build/build.go.html#5931413">line</a></span><span class="op" id="5931577">)</span>&nbsp;<span class="op" id="5931579">&lt;</span>&nbsp;<span class="num" id="5931581">5</span>&nbsp;<span class="op" id="5931583">||</span>&nbsp;<span class="ident" id="5931586"><a href="/gostd/go/build/build.go.html#5931413">line</a></span><span class="op" id="5931590">[</span><span class="op" id="5931591">:</span><span class="num" id="5931592">4</span><span class="op" id="5931593">]</span>&nbsp;<span class="op" id="5931595">!=</span>&nbsp;<span class="string" id="5931598">&#34;#cgo&#34;</span>&nbsp;<span class="op" id="5931605">||</span>&nbsp;<span class="op" id="5931608">(</span><span class="ident" id="5931609"><a href="/gostd/go/build/build.go.html#5931413">line</a></span><span class="op" id="5931613">[</span><span class="num" id="5931614">4</span><span class="op" id="5931615">]</span>&nbsp;<span class="op" id="5931617">!=</span>&nbsp;<span class="string" id="5931620">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5931624">&amp;&amp;</span>&nbsp;<span class="ident" id="5931627"><a href="/gostd/go/build/build.go.html#5931413">line</a></span><span class="op" id="5931631">[</span><span class="num" id="5931632">4</span><span class="op" id="5931633">]</span>&nbsp;<span class="op" id="5931635">!=</span>&nbsp;<span class="string" id="5931638">&#39;\t&#39;</span><span class="op" id="5931642">)</span>&nbsp;<span class="op" id="5931644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5931649">continue</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5931660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5931665">//&nbsp;Split&nbsp;at&nbsp;colon.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5931686"><a href="/gostd/go/build/build.go.html#5931413">line</a></span>&nbsp;<span class="op" id="5931691">=</span>&nbsp;<span class="ident" id="5931693"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5931700">.</span><span class="ident" id="5931701"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="5931710">(</span><span class="ident" id="5931711"><a href="/gostd/go/build/build.go.html#5931413">line</a></span><span class="op" id="5931715">[</span><span class="num" id="5931716">4</span><span class="op" id="5931717">:</span><span class="op" id="5931718">]</span><span class="op" id="5931719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5931723">i</span>&nbsp;<span class="op" id="5931725">:=</span>&nbsp;<span class="ident" id="5931728"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5931735">.</span><span class="ident" id="5931736"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="5931741">(</span><span class="ident" id="5931742"><a href="/gostd/go/build/build.go.html#5931413">line</a></span><span class="op" id="5931746">,</span>&nbsp;<span class="string" id="5931748">&#34;:&#34;</span><span class="op" id="5931751">)</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5931755">if</span>&nbsp;<span class="ident" id="5931758"><a href="/gostd/go/build/build.go.html#5931723">i</a></span>&nbsp;<span class="op" id="5931760">&lt;</span>&nbsp;<span class="num" id="5931762">0</span>&nbsp;<span class="op" id="5931764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5931769">return</span>&nbsp;<span class="ident" id="5931776"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5931779">.</span><span class="ident" id="5931780"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5931786">(</span><span class="string" id="5931787">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="5931814">,</span>&nbsp;<span class="ident" id="5931816"><a href="/gostd/go/build/build.go.html#5931326">filename</a></span><span class="op" id="5931824">,</span>&nbsp;<span class="ident" id="5931826"><a href="/gostd/go/build/build.go.html#5931457">orig</a></span><span class="op" id="5931830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5931834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5931838">line</span><span class="op" id="5931842">,</span>&nbsp;<span class="ident" id="5931844">argstr</span>&nbsp;<span class="op" id="5931851">:=</span>&nbsp;<span class="ident" id="5931854"><a href="/gostd/go/build/build.go.html#5931413">line</a></span><span class="op" id="5931858">[</span><span class="op" id="5931859">:</span><span class="ident" id="5931860"><a href="/gostd/go/build/build.go.html#5931723">i</a></span><span class="op" id="5931861">]</span><span class="op" id="5931862">,</span>&nbsp;<span class="ident" id="5931864"><a href="/gostd/go/build/build.go.html#5931413">line</a></span><span class="op" id="5931868">[</span><span class="ident" id="5931869"><a href="/gostd/go/build/build.go.html#5931723">i</a></span><span class="op" id="5931870">+</span><span class="num" id="5931871">1</span><span class="op" id="5931872">:</span><span class="op" id="5931873">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5931878">//&nbsp;Parse&nbsp;GOOS/GOARCH&nbsp;stuff.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5931908">f</span>&nbsp;<span class="op" id="5931910">:=</span>&nbsp;<span class="ident" id="5931913"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5931920">.</span><span class="ident" id="5931921"><a href="/gostd/strings/strings.go.html#2973751">Fields</a></span><span class="op" id="5931927">(</span><span class="ident" id="5931928"><a href="/gostd/go/build/build.go.html#5931838">line</a></span><span class="op" id="5931932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5931936">if</span>&nbsp;<span class="builtinfunc" id="5931939">len</span><span class="op" id="5931942">(</span><span class="ident" id="5931943"><a href="/gostd/go/build/build.go.html#5931908">f</a></span><span class="op" id="5931944">)</span>&nbsp;<span class="op" id="5931946">&lt;</span>&nbsp;<span class="num" id="5931948">1</span>&nbsp;<span class="op" id="5931950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5931955">return</span>&nbsp;<span class="ident" id="5931962"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5931965">.</span><span class="ident" id="5931966"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5931972">(</span><span class="string" id="5931973">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="5932000">,</span>&nbsp;<span class="ident" id="5932002"><a href="/gostd/go/build/build.go.html#5931326">filename</a></span><span class="op" id="5932010">,</span>&nbsp;<span class="ident" id="5932012"><a href="/gostd/go/build/build.go.html#5931457">orig</a></span><span class="op" id="5932016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5932020">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5932025">cond</span><span class="op" id="5932029">,</span>&nbsp;<span class="ident" id="5932031">verb</span>&nbsp;<span class="op" id="5932036">:=</span>&nbsp;<span class="ident" id="5932039"><a href="/gostd/go/build/build.go.html#5931908">f</a></span><span class="op" id="5932040">[</span><span class="op" id="5932041">:</span><span class="builtinfunc" id="5932042">len</span><span class="op" id="5932045">(</span><span class="ident" id="5932046"><a href="/gostd/go/build/build.go.html#5931908">f</a></span><span class="op" id="5932047">)</span><span class="op" id="5932048">-</span><span class="num" id="5932049">1</span><span class="op" id="5932050">]</span><span class="op" id="5932051">,</span>&nbsp;<span class="ident" id="5932053"><a href="/gostd/go/build/build.go.html#5931908">f</a></span><span class="op" id="5932054">[</span><span class="builtinfunc" id="5932055">len</span><span class="op" id="5932058">(</span><span class="ident" id="5932059"><a href="/gostd/go/build/build.go.html#5931908">f</a></span><span class="op" id="5932060">)</span><span class="op" id="5932061">-</span><span class="num" id="5932062">1</span><span class="op" id="5932063">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932067">if</span>&nbsp;<span class="builtinfunc" id="5932070">len</span><span class="op" id="5932073">(</span><span class="ident" id="5932074"><a href="/gostd/go/build/build.go.html#5932025">cond</a></span><span class="op" id="5932078">)</span>&nbsp;<span class="op" id="5932080">&gt;</span>&nbsp;<span class="num" id="5932082">0</span>&nbsp;<span class="op" id="5932084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5932089">ok</span>&nbsp;<span class="op" id="5932092">:=</span>&nbsp;<span class="builtintype" id="5932095">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932104">for</span>&nbsp;<span class="ident" id="5932108">_</span><span class="op" id="5932109">,</span>&nbsp;<span class="ident" id="5932111">c</span>&nbsp;<span class="op" id="5932113">:=</span>&nbsp;<span class="keyword" id="5932116">range</span>&nbsp;<span class="ident" id="5932122"><a href="/gostd/go/build/build.go.html#5932025">cond</a></span>&nbsp;<span class="op" id="5932127">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932133">if</span>&nbsp;<span class="ident" id="5932136"><a href="/gostd/go/build/build.go.html#5931303">ctxt</a></span><span class="op" id="5932140">.</span><span class="ident" id="5932141"><a href="/gostd/go/build/build.go.html#5935370">match</a></span><span class="op" id="5932146">(</span><span class="ident" id="5932147"><a href="/gostd/go/build/build.go.html#5932111">c</a></span><span class="op" id="5932148">,</span>&nbsp;<span class="builtintype" id="5932150">nil</span><span class="op" id="5932153">)</span>&nbsp;<span class="op" id="5932155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5932162"><a href="/gostd/go/build/build.go.html#5932089">ok</a></span>&nbsp;<span class="op" id="5932165">=</span>&nbsp;<span class="builtintype" id="5932167">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932177">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5932187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5932192">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932197">if</span>&nbsp;<span class="op" id="5932200">!</span><span class="ident" id="5932201"><a href="/gostd/go/build/build.go.html#5932089">ok</a></span>&nbsp;<span class="op" id="5932204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932210">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5932222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5932226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5932231">args</span><span class="op" id="5932235">,</span>&nbsp;<span class="ident" id="5932237">err</span>&nbsp;<span class="op" id="5932241">:=</span>&nbsp;<span class="ident" id="5932244"><a href="/gostd/go/build/build.go.html#5934194">splitQuoted</a></span><span class="op" id="5932255">(</span><span class="ident" id="5932256"><a href="/gostd/go/build/build.go.html#5931844">argstr</a></span><span class="op" id="5932262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932266">if</span>&nbsp;<span class="ident" id="5932269"><a href="/gostd/go/build/build.go.html#5932237">err</a></span>&nbsp;<span class="op" id="5932273">!=</span>&nbsp;<span class="builtintype" id="5932276">nil</span>&nbsp;<span class="op" id="5932280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932285">return</span>&nbsp;<span class="ident" id="5932292"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5932295">.</span><span class="ident" id="5932296"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5932302">(</span><span class="string" id="5932303">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="5932330">,</span>&nbsp;<span class="ident" id="5932332"><a href="/gostd/go/build/build.go.html#5931326">filename</a></span><span class="op" id="5932340">,</span>&nbsp;<span class="ident" id="5932342"><a href="/gostd/go/build/build.go.html#5931457">orig</a></span><span class="op" id="5932346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5932350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932354">for</span>&nbsp;<span class="ident" id="5932358">_</span><span class="op" id="5932359">,</span>&nbsp;<span class="ident" id="5932361">arg</span>&nbsp;<span class="op" id="5932365">:=</span>&nbsp;<span class="keyword" id="5932368">range</span>&nbsp;<span class="ident" id="5932374"><a href="/gostd/go/build/build.go.html#5932231">args</a></span>&nbsp;<span class="op" id="5932379">{</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932384">if</span>&nbsp;<span class="op" id="5932387">!</span><span class="ident" id="5932388"><a href="/gostd/go/build/build.go.html#5933303">safeCgoName</a></span><span class="op" id="5932399">(</span><span class="ident" id="5932400"><a href="/gostd/go/build/build.go.html#5932361">arg</a></span><span class="op" id="5932403">)</span>&nbsp;<span class="op" id="5932405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932411">return</span>&nbsp;<span class="ident" id="5932418"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5932421">.</span><span class="ident" id="5932422"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5932428">(</span><span class="string" id="5932429">&#34;%s:&nbsp;malformed&nbsp;#cgo&nbsp;argument:&nbsp;%s&#34;</span><span class="op" id="5932462">,</span>&nbsp;<span class="ident" id="5932464"><a href="/gostd/go/build/build.go.html#5931326">filename</a></span><span class="op" id="5932472">,</span>&nbsp;<span class="ident" id="5932474"><a href="/gostd/go/build/build.go.html#5932361">arg</a></span><span class="op" id="5932477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5932482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5932486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932491">switch</span>&nbsp;<span class="ident" id="5932498"><a href="/gostd/go/build/build.go.html#5932031">verb</a></span>&nbsp;<span class="op" id="5932503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932507">case</span>&nbsp;<span class="string" id="5932512">&#34;CFLAGS&#34;</span><span class="op" id="5932520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5932525"><a href="/gostd/go/build/build.go.html#5931343">di</a></span><span class="op" id="5932527">.</span><span class="ident" id="5932528"><a href="/gostd/go/build/build.go.html#5912324">CgoCFLAGS</a></span>&nbsp;<span class="op" id="5932538">=</span>&nbsp;<span class="builtinfunc" id="5932540">append</span><span class="op" id="5932546">(</span><span class="ident" id="5932547"><a href="/gostd/go/build/build.go.html#5931343">di</a></span><span class="op" id="5932549">.</span><span class="ident" id="5932550"><a href="/gostd/go/build/build.go.html#5912324">CgoCFLAGS</a></span><span class="op" id="5932559">,</span>&nbsp;<span class="ident" id="5932561"><a href="/gostd/go/build/build.go.html#5932231">args</a></span><span class="op" id="5932565">...</span><span class="op" id="5932568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932572">case</span>&nbsp;<span class="string" id="5932577">&#34;CPPFLAGS&#34;</span><span class="op" id="5932587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5932592"><a href="/gostd/go/build/build.go.html#5931343">di</a></span><span class="op" id="5932594">.</span><span class="ident" id="5932595"><a href="/gostd/go/build/build.go.html#5912372">CgoCPPFLAGS</a></span>&nbsp;<span class="op" id="5932607">=</span>&nbsp;<span class="builtinfunc" id="5932609">append</span><span class="op" id="5932615">(</span><span class="ident" id="5932616"><a href="/gostd/go/build/build.go.html#5931343">di</a></span><span class="op" id="5932618">.</span><span class="ident" id="5932619"><a href="/gostd/go/build/build.go.html#5912372">CgoCPPFLAGS</a></span><span class="op" id="5932630">,</span>&nbsp;<span class="ident" id="5932632"><a href="/gostd/go/build/build.go.html#5932231">args</a></span><span class="op" id="5932636">...</span><span class="op" id="5932639">)</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932643">case</span>&nbsp;<span class="string" id="5932648">&#34;CXXFLAGS&#34;</span><span class="op" id="5932658">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5932663"><a href="/gostd/go/build/build.go.html#5931343">di</a></span><span class="op" id="5932665">.</span><span class="ident" id="5932666"><a href="/gostd/go/build/build.go.html#5912422">CgoCXXFLAGS</a></span>&nbsp;<span class="op" id="5932678">=</span>&nbsp;<span class="builtinfunc" id="5932680">append</span><span class="op" id="5932686">(</span><span class="ident" id="5932687"><a href="/gostd/go/build/build.go.html#5931343">di</a></span><span class="op" id="5932689">.</span><span class="ident" id="5932690"><a href="/gostd/go/build/build.go.html#5912422">CgoCXXFLAGS</a></span><span class="op" id="5932701">,</span>&nbsp;<span class="ident" id="5932703"><a href="/gostd/go/build/build.go.html#5932231">args</a></span><span class="op" id="5932707">...</span><span class="op" id="5932710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932714">case</span>&nbsp;<span class="string" id="5932719">&#34;LDFLAGS&#34;</span><span class="op" id="5932728">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5932733"><a href="/gostd/go/build/build.go.html#5931343">di</a></span><span class="op" id="5932735">.</span><span class="ident" id="5932736"><a href="/gostd/go/build/build.go.html#5912472">CgoLDFLAGS</a></span>&nbsp;<span class="op" id="5932747">=</span>&nbsp;<span class="builtinfunc" id="5932749">append</span><span class="op" id="5932755">(</span><span class="ident" id="5932756"><a href="/gostd/go/build/build.go.html#5931343">di</a></span><span class="op" id="5932758">.</span><span class="ident" id="5932759"><a href="/gostd/go/build/build.go.html#5912472">CgoLDFLAGS</a></span><span class="op" id="5932769">,</span>&nbsp;<span class="ident" id="5932771"><a href="/gostd/go/build/build.go.html#5932231">args</a></span><span class="op" id="5932775">...</span><span class="op" id="5932778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932782">case</span>&nbsp;<span class="string" id="5932787">&#34;pkg-config&#34;</span><span class="op" id="5932799">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5932804"><a href="/gostd/go/build/build.go.html#5931343">di</a></span><span class="op" id="5932806">.</span><span class="ident" id="5932807"><a href="/gostd/go/build/build.go.html#5912521">CgoPkgConfig</a></span>&nbsp;<span class="op" id="5932820">=</span>&nbsp;<span class="builtinfunc" id="5932822">append</span><span class="op" id="5932828">(</span><span class="ident" id="5932829"><a href="/gostd/go/build/build.go.html#5931343">di</a></span><span class="op" id="5932831">.</span><span class="ident" id="5932832"><a href="/gostd/go/build/build.go.html#5912521">CgoPkgConfig</a></span><span class="op" id="5932844">,</span>&nbsp;<span class="ident" id="5932846"><a href="/gostd/go/build/build.go.html#5932231">args</a></span><span class="op" id="5932850">...</span><span class="op" id="5932853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932857">default</span><span class="op" id="5932864">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932869">return</span>&nbsp;<span class="ident" id="5932876"><a href="/gostd/go/build/build.go.html#5900426">fmt</a></span><span class="op" id="5932879">.</span><span class="ident" id="5932880"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5932886">(</span><span class="string" id="5932887">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;verb:&nbsp;%s&#34;</span><span class="op" id="5932914">,</span>&nbsp;<span class="ident" id="5932916"><a href="/gostd/go/build/build.go.html#5931326">filename</a></span><span class="op" id="5932924">,</span>&nbsp;<span class="ident" id="5932926"><a href="/gostd/go/build/build.go.html#5931457">orig</a></span><span class="op" id="5932930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5932934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5932937">}</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5932940">return</span>&nbsp;<span class="builtintype" id="5932947">nil</span><br>
<span class="lineno"></span><span class="op" id="5932951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5932954">//&nbsp;NOTE:&nbsp;$&nbsp;is&nbsp;not&nbsp;safe&nbsp;for&nbsp;the&nbsp;shell,&nbsp;but&nbsp;it&nbsp;is&nbsp;allowed&nbsp;here&nbsp;because&nbsp;of&nbsp;linker&nbsp;options&nbsp;like&nbsp;-Wl,$ORIGIN.</span><br>
<span class="lineno"></span><span class="comment" id="5933059">//&nbsp;We&nbsp;never&nbsp;pass&nbsp;these&nbsp;arguments&nbsp;to&nbsp;a&nbsp;shell&nbsp;(just&nbsp;to&nbsp;programs&nbsp;we&nbsp;construct&nbsp;argv&nbsp;for),&nbsp;so&nbsp;this&nbsp;should&nbsp;be&nbsp;okay.</span><br>
<span class="lineno">1145</span><span class="comment" id="5933169">//&nbsp;See&nbsp;golang.org/issue/6038.</span><br>
<span class="lineno"></span><span class="keyword" id="5933199">var</span>&nbsp;<span class="ident" id="5933203">safeBytes</span>&nbsp;<span class="op" id="5933213">=</span>&nbsp;<span class="op" id="5933215">[</span><span class="op" id="5933216">]</span><span class="builtintype" id="5933217">byte</span><span class="op" id="5933221">(</span><span class="string" id="5933222">&#34;+-.,/0123456789=ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz:$&#34;</span><span class="op" id="5933295">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5933298">func</span>&nbsp;<span class="ident" id="5933303">safeCgoName</span><span class="op" id="5933314">(</span><span class="ident" id="5933315">s</span>&nbsp;<span class="builtintype" id="5933317">string</span><span class="op" id="5933323">)</span>&nbsp;<span class="builtintype" id="5933325">bool</span>&nbsp;<span class="op" id="5933330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5933333">if</span>&nbsp;<span class="ident" id="5933336"><a href="/gostd/go/build/build.go.html#5933315">s</a></span>&nbsp;<span class="op" id="5933338">==</span>&nbsp;<span class="string" id="5933341">&#34;&#34;</span>&nbsp;<span class="op" id="5933344">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5933348">return</span>&nbsp;<span class="builtintype" id="5933355">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5933362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5933365">for</span>&nbsp;<span class="ident" id="5933369">i</span>&nbsp;<span class="op" id="5933371">:=</span>&nbsp;<span class="num" id="5933374">0</span><span class="op" id="5933375">;</span>&nbsp;<span class="ident" id="5933377"><a href="/gostd/go/build/build.go.html#5933369">i</a></span>&nbsp;<span class="op" id="5933379">&lt;</span>&nbsp;<span class="builtinfunc" id="5933381">len</span><span class="op" id="5933384">(</span><span class="ident" id="5933385"><a href="/gostd/go/build/build.go.html#5933315">s</a></span><span class="op" id="5933386">)</span><span class="op" id="5933387">;</span>&nbsp;<span class="ident" id="5933389"><a href="/gostd/go/build/build.go.html#5933369">i</a></span><span class="op" id="5933390">++</span>&nbsp;<span class="op" id="5933393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5933397">if</span>&nbsp;<span class="ident" id="5933400">c</span>&nbsp;<span class="op" id="5933402">:=</span>&nbsp;<span class="ident" id="5933405"><a href="/gostd/go/build/build.go.html#5933315">s</a></span><span class="op" id="5933406">[</span><span class="ident" id="5933407"><a href="/gostd/go/build/build.go.html#5933369">i</a></span><span class="op" id="5933408">]</span><span class="op" id="5933409">;</span>&nbsp;<span class="ident" id="5933411"><a href="/gostd/go/build/build.go.html#5933400">c</a></span>&nbsp;<span class="op" id="5933413">&lt;</span>&nbsp;<span class="num" id="5933415">0x80</span>&nbsp;<span class="op" id="5933420">&amp;&amp;</span>&nbsp;<span class="ident" id="5933423"><a href="/gostd/go/build/build.go.html#5900407">bytes</a></span><span class="op" id="5933428">.</span><span class="ident" id="5933429"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="5933438">(</span><span class="ident" id="5933439"><a href="/gostd/go/build/build.go.html#5933203">safeBytes</a></span><span class="op" id="5933448">,</span>&nbsp;<span class="ident" id="5933450"><a href="/gostd/go/build/build.go.html#5933400">c</a></span><span class="op" id="5933451">)</span>&nbsp;<span class="op" id="5933453">&lt;</span>&nbsp;<span class="num" id="5933455">0</span>&nbsp;<span class="op" id="5933457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5933462">return</span>&nbsp;<span class="builtintype" id="5933469">false</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5933477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5933480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5933483">return</span>&nbsp;<span class="builtintype" id="5933490">true</span><br>
<span class="lineno"></span><span class="op" id="5933495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1160</span><span class="comment" id="5933498">//&nbsp;splitQuoted&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;around&nbsp;each&nbsp;instance&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;consecutive</span><br>
<span class="lineno"></span><span class="comment" id="5933581">//&nbsp;white&nbsp;space&nbsp;characters&nbsp;while&nbsp;taking&nbsp;into&nbsp;account&nbsp;quotes&nbsp;and&nbsp;escaping,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5933658">//&nbsp;returns&nbsp;an&nbsp;array&nbsp;of&nbsp;substrings&nbsp;of&nbsp;s&nbsp;or&nbsp;an&nbsp;empty&nbsp;list&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space.</span><br>
<span class="lineno"></span><span class="comment" id="5933746">//&nbsp;Single&nbsp;quotes&nbsp;and&nbsp;double&nbsp;quotes&nbsp;are&nbsp;recognized&nbsp;to&nbsp;prevent&nbsp;splitting&nbsp;within&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5933828">//&nbsp;quoted&nbsp;region,&nbsp;and&nbsp;are&nbsp;removed&nbsp;from&nbsp;the&nbsp;resulting&nbsp;substrings.&nbsp;If&nbsp;a&nbsp;quote&nbsp;in&nbsp;s</span><br>
<span class="lineno">1165</span><span class="comment" id="5933909">//&nbsp;isn&#39;t&nbsp;closed&nbsp;err&nbsp;will&nbsp;be&nbsp;set&nbsp;and&nbsp;r&nbsp;will&nbsp;have&nbsp;the&nbsp;unclosed&nbsp;argument&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5933986">//&nbsp;last&nbsp;element.&nbsp;&nbsp;The&nbsp;backslash&nbsp;is&nbsp;used&nbsp;for&nbsp;escaping.</span><br>
<span class="lineno"></span><span class="comment" id="5934040">//</span><br>
<span class="lineno"></span><span class="comment" id="5934043">//&nbsp;For&nbsp;example,&nbsp;the&nbsp;following&nbsp;string:</span><br>
<span class="lineno"></span><span class="comment" id="5934081">//</span><br>
<span class="lineno">1170</span><span class="comment" id="5934084">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;b:&#34;c&nbsp;d&#34;&nbsp;&#39;e&#39;&#39;f&#39;&nbsp;&nbsp;&#34;g\&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5934115">//</span><br>
<span class="lineno"></span><span class="comment" id="5934118">//&nbsp;Would&nbsp;be&nbsp;parsed&nbsp;as:</span><br>
<span class="lineno"></span><span class="comment" id="5934141">//</span><br>
<span class="lineno"></span><span class="comment" id="5934144">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]string{&#34;a&#34;,&nbsp;&#34;b:c&nbsp;d&#34;,&nbsp;&#34;ef&#34;,&nbsp;`g&#34;`}</span><br>
<span class="lineno">1175</span><span class="comment" id="5934186">//</span><br>
<span class="lineno"></span><span class="keyword" id="5934189">func</span>&nbsp;<span class="ident" id="5934194">splitQuoted</span><span class="op" id="5934205">(</span><span class="ident" id="5934206">s</span>&nbsp;<span class="builtintype" id="5934208">string</span><span class="op" id="5934214">)</span>&nbsp;<span class="op" id="5934216">(</span><span class="ident" id="5934217">r</span>&nbsp;<span class="op" id="5934219">[</span><span class="op" id="5934220">]</span><span class="builtintype" id="5934221">string</span><span class="op" id="5934227">,</span>&nbsp;<span class="ident" id="5934229">err</span>&nbsp;<span class="builtintype" id="5934233">error</span><span class="op" id="5934238">)</span>&nbsp;<span class="op" id="5934240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934243">var</span>&nbsp;<span class="ident" id="5934247">args</span>&nbsp;<span class="op" id="5934252">[</span><span class="op" id="5934253">]</span><span class="builtintype" id="5934254">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934262">arg</span>&nbsp;<span class="op" id="5934266">:=</span>&nbsp;<span class="builtinfunc" id="5934269">make</span><span class="op" id="5934273">(</span><span class="op" id="5934274">[</span><span class="op" id="5934275">]</span><span class="builtintype" id="5934276">rune</span><span class="op" id="5934280">,</span>&nbsp;<span class="builtinfunc" id="5934282">len</span><span class="op" id="5934285">(</span><span class="ident" id="5934286"><a href="/gostd/go/build/build.go.html#5934206">s</a></span><span class="op" id="5934287">)</span><span class="op" id="5934288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934291">escaped</span>&nbsp;<span class="op" id="5934299">:=</span>&nbsp;<span class="builtintype" id="5934302">false</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934309">quoted</span>&nbsp;<span class="op" id="5934316">:=</span>&nbsp;<span class="builtintype" id="5934319">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934326">quote</span>&nbsp;<span class="op" id="5934332">:=</span>&nbsp;<span class="string" id="5934335">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934343">i</span>&nbsp;<span class="op" id="5934345">:=</span>&nbsp;<span class="num" id="5934348">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934351">for</span>&nbsp;<span class="ident" id="5934355">_</span><span class="op" id="5934356">,</span>&nbsp;<span class="builtintype" id="5934358">rune</span>&nbsp;<span class="op" id="5934363">:=</span>&nbsp;<span class="keyword" id="5934366">range</span>&nbsp;<span class="ident" id="5934372"><a href="/gostd/go/build/build.go.html#5934206">s</a></span>&nbsp;<span class="op" id="5934374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934378">switch</span>&nbsp;<span class="op" id="5934385">{</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934389">case</span>&nbsp;<span class="ident" id="5934394"><a href="/gostd/go/build/build.go.html#5934291">escaped</a></span><span class="op" id="5934401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934406"><a href="/gostd/go/build/build.go.html#5934291">escaped</a></span>&nbsp;<span class="op" id="5934414">=</span>&nbsp;<span class="builtintype" id="5934416">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934424">case</span>&nbsp;<span class="builtintype" id="5934429"><a href="/gostd/go/build/build.go.html#5934358">rune</a></span>&nbsp;<span class="op" id="5934434">==</span>&nbsp;<span class="string" id="5934437">&#39;\\&#39;</span><span class="op" id="5934441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934446"><a href="/gostd/go/build/build.go.html#5934291">escaped</a></span>&nbsp;<span class="op" id="5934454">=</span>&nbsp;<span class="builtintype" id="5934456">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934464">continue</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934475">case</span>&nbsp;<span class="ident" id="5934480"><a href="/gostd/go/build/build.go.html#5934326">quote</a></span>&nbsp;<span class="op" id="5934486">!=</span>&nbsp;<span class="string" id="5934489">&#39;\x00&#39;</span><span class="op" id="5934495">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934500">if</span>&nbsp;<span class="builtintype" id="5934503"><a href="/gostd/go/build/build.go.html#5934358">rune</a></span>&nbsp;<span class="op" id="5934508">==</span>&nbsp;<span class="ident" id="5934511"><a href="/gostd/go/build/build.go.html#5934326">quote</a></span>&nbsp;<span class="op" id="5934517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934523"><a href="/gostd/go/build/build.go.html#5934326">quote</a></span>&nbsp;<span class="op" id="5934529">=</span>&nbsp;<span class="string" id="5934531">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934542">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5934554">}</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934558">case</span>&nbsp;<span class="builtintype" id="5934563"><a href="/gostd/go/build/build.go.html#5934358">rune</a></span>&nbsp;<span class="op" id="5934568">==</span>&nbsp;<span class="string" id="5934571">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5934575">||</span>&nbsp;<span class="builtintype" id="5934578"><a href="/gostd/go/build/build.go.html#5934358">rune</a></span>&nbsp;<span class="op" id="5934583">==</span>&nbsp;<span class="string" id="5934586">&#39;\&#39;&#39;</span><span class="op" id="5934590">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934595"><a href="/gostd/go/build/build.go.html#5934309">quoted</a></span>&nbsp;<span class="op" id="5934602">=</span>&nbsp;<span class="builtintype" id="5934604">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934612"><a href="/gostd/go/build/build.go.html#5934326">quote</a></span>&nbsp;<span class="op" id="5934618">=</span>&nbsp;<span class="builtintype" id="5934620"><a href="/gostd/go/build/build.go.html#5934358">rune</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934628">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934639">case</span>&nbsp;<span class="ident" id="5934644"><a href="/gostd/go/build/build.go.html#5900584">unicode</a></span><span class="op" id="5934651">.</span><span class="ident" id="5934652"><a href="/gostd/unicode/graphic.go.html#1820663">IsSpace</a></span><span class="op" id="5934659">(</span><span class="builtintype" id="5934660"><a href="/gostd/go/build/build.go.html#5934358">rune</a></span><span class="op" id="5934664">)</span><span class="op" id="5934665">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934670">if</span>&nbsp;<span class="ident" id="5934673"><a href="/gostd/go/build/build.go.html#5934309">quoted</a></span>&nbsp;<span class="op" id="5934680">||</span>&nbsp;<span class="ident" id="5934683"><a href="/gostd/go/build/build.go.html#5934343">i</a></span>&nbsp;<span class="op" id="5934685">&gt;</span>&nbsp;<span class="num" id="5934687">0</span>&nbsp;<span class="op" id="5934689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934695"><a href="/gostd/go/build/build.go.html#5934309">quoted</a></span>&nbsp;<span class="op" id="5934702">=</span>&nbsp;<span class="builtintype" id="5934704">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934714"><a href="/gostd/go/build/build.go.html#5934247">args</a></span>&nbsp;<span class="op" id="5934719">=</span>&nbsp;<span class="builtinfunc" id="5934721">append</span><span class="op" id="5934727">(</span><span class="ident" id="5934728"><a href="/gostd/go/build/build.go.html#5934247">args</a></span><span class="op" id="5934732">,</span>&nbsp;<span class="builtintype" id="5934734">string</span><span class="op" id="5934740">(</span><span class="ident" id="5934741"><a href="/gostd/go/build/build.go.html#5934262">arg</a></span><span class="op" id="5934744">[</span><span class="op" id="5934745">:</span><span class="ident" id="5934746"><a href="/gostd/go/build/build.go.html#5934343">i</a></span><span class="op" id="5934747">]</span><span class="op" id="5934748">)</span><span class="op" id="5934749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934755"><a href="/gostd/go/build/build.go.html#5934343">i</a></span>&nbsp;<span class="op" id="5934757">=</span>&nbsp;<span class="num" id="5934759">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5934764">}</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934769">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5934780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934784"><a href="/gostd/go/build/build.go.html#5934262">arg</a></span><span class="op" id="5934787">[</span><span class="ident" id="5934788"><a href="/gostd/go/build/build.go.html#5934343">i</a></span><span class="op" id="5934789">]</span>&nbsp;<span class="op" id="5934791">=</span>&nbsp;<span class="builtintype" id="5934793"><a href="/gostd/go/build/build.go.html#5934358">rune</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934800"><a href="/gostd/go/build/build.go.html#5934343">i</a></span><span class="op" id="5934801">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5934805">}</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934808">if</span>&nbsp;<span class="ident" id="5934811"><a href="/gostd/go/build/build.go.html#5934309">quoted</a></span>&nbsp;<span class="op" id="5934818">||</span>&nbsp;<span class="ident" id="5934821"><a href="/gostd/go/build/build.go.html#5934343">i</a></span>&nbsp;<span class="op" id="5934823">&gt;</span>&nbsp;<span class="num" id="5934825">0</span>&nbsp;<span class="op" id="5934827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934831"><a href="/gostd/go/build/build.go.html#5934247">args</a></span>&nbsp;<span class="op" id="5934836">=</span>&nbsp;<span class="builtinfunc" id="5934838">append</span><span class="op" id="5934844">(</span><span class="ident" id="5934845"><a href="/gostd/go/build/build.go.html#5934247">args</a></span><span class="op" id="5934849">,</span>&nbsp;<span class="builtintype" id="5934851">string</span><span class="op" id="5934857">(</span><span class="ident" id="5934858"><a href="/gostd/go/build/build.go.html#5934262">arg</a></span><span class="op" id="5934861">[</span><span class="op" id="5934862">:</span><span class="ident" id="5934863"><a href="/gostd/go/build/build.go.html#5934343">i</a></span><span class="op" id="5934864">]</span><span class="op" id="5934865">)</span><span class="op" id="5934866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5934869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934872">if</span>&nbsp;<span class="ident" id="5934875"><a href="/gostd/go/build/build.go.html#5934326">quote</a></span>&nbsp;<span class="op" id="5934881">!=</span>&nbsp;<span class="num" id="5934884">0</span>&nbsp;<span class="op" id="5934886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934890"><a href="/gostd/go/build/build.go.html#5934229">err</a></span>&nbsp;<span class="op" id="5934894">=</span>&nbsp;<span class="ident" id="5934896"><a href="/gostd/go/build/build.go.html#5900416">errors</a></span><span class="op" id="5934902">.</span><span class="ident" id="5934903"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5934906">(</span><span class="string" id="5934907">&#34;unclosed&nbsp;quote&#34;</span><span class="op" id="5934923">)</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5934926">}</span>&nbsp;<span class="keyword" id="5934928">else</span>&nbsp;<span class="keyword" id="5934933">if</span>&nbsp;<span class="ident" id="5934936"><a href="/gostd/go/build/build.go.html#5934291">escaped</a></span>&nbsp;<span class="op" id="5934944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5934948"><a href="/gostd/go/build/build.go.html#5934229">err</a></span>&nbsp;<span class="op" id="5934952">=</span>&nbsp;<span class="ident" id="5934954"><a href="/gostd/go/build/build.go.html#5900416">errors</a></span><span class="op" id="5934960">.</span><span class="ident" id="5934961"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5934964">(</span><span class="string" id="5934965">&#34;unfinished&nbsp;escaping&#34;</span><span class="op" id="5934986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5934989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5934992">return</span>&nbsp;<span class="ident" id="5934999"><a href="/gostd/go/build/build.go.html#5934247">args</a></span><span class="op" id="5935003">,</span>&nbsp;<span class="ident" id="5935005"><a href="/gostd/go/build/build.go.html#5934229">err</a></span><br>
<span class="lineno"></span><span class="op" id="5935009">}</span><br>
<span class="lineno">1220</span><br>
<span class="lineno"></span><span class="comment" id="5935012">//&nbsp;match&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;name&nbsp;is&nbsp;one&nbsp;of:</span><br>
<span class="lineno"></span><span class="comment" id="5935057">//</span><br>
<span class="lineno"></span><span class="comment" id="5935060">//&nbsp;&nbsp;&nbsp;&nbsp;$GOOS</span><br>
<span class="lineno"></span><span class="comment" id="5935069">//&nbsp;&nbsp;&nbsp;&nbsp;$GOARCH</span><br>
<span class="lineno">1225</span><span class="comment" id="5935080">//&nbsp;&nbsp;&nbsp;&nbsp;cgo&nbsp;(if&nbsp;cgo&nbsp;is&nbsp;enabled)</span><br>
<span class="lineno"></span><span class="comment" id="5935107">//&nbsp;&nbsp;&nbsp;&nbsp;!cgo&nbsp;(if&nbsp;cgo&nbsp;is&nbsp;disabled)</span><br>
<span class="lineno"></span><span class="comment" id="5935136">//&nbsp;&nbsp;&nbsp;&nbsp;ctxt.Compiler</span><br>
<span class="lineno"></span><span class="comment" id="5935153">//&nbsp;&nbsp;&nbsp;&nbsp;!ctxt.Compiler</span><br>
<span class="lineno"></span><span class="comment" id="5935171">//&nbsp;&nbsp;&nbsp;&nbsp;tag&nbsp;(if&nbsp;tag&nbsp;is&nbsp;listed&nbsp;in&nbsp;ctxt.BuildTags&nbsp;or&nbsp;ctxt.ReleaseTags)</span><br>
<span class="lineno">1230</span><span class="comment" id="5935235">//&nbsp;&nbsp;&nbsp;&nbsp;!tag&nbsp;(if&nbsp;tag&nbsp;is&nbsp;not&nbsp;listed&nbsp;in&nbsp;ctxt.BuildTags&nbsp;or&nbsp;ctxt.ReleaseTags)</span><br>
<span class="lineno"></span><span class="comment" id="5935304">//&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;any&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5935346">//</span><br>
<span class="lineno"></span><span class="keyword" id="5935349">func</span>&nbsp;<span class="op" id="5935354">(</span><span class="ident" id="5935355">ctxt</span>&nbsp;<span class="op" id="5935360">*</span><span class="ident" id="5935361"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5935368">)</span>&nbsp;<span class="ident" id="5935370">match</span><span class="op" id="5935375">(</span><span class="ident" id="5935376">name</span>&nbsp;<span class="builtintype" id="5935381">string</span><span class="op" id="5935387">,</span>&nbsp;<span class="ident" id="5935389">allTags</span>&nbsp;<span class="keyword" id="5935397">map</span><span class="op" id="5935400">[</span><span class="builtintype" id="5935401">string</span><span class="op" id="5935407">]</span><span class="builtintype" id="5935408">bool</span><span class="op" id="5935412">)</span>&nbsp;<span class="builtintype" id="5935414">bool</span>&nbsp;<span class="op" id="5935419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5935422">if</span>&nbsp;<span class="ident" id="5935425"><a href="/gostd/go/build/build.go.html#5935376">name</a></span>&nbsp;<span class="op" id="5935430">==</span>&nbsp;<span class="string" id="5935433">&#34;&#34;</span>&nbsp;<span class="op" id="5935436">{</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5935440">if</span>&nbsp;<span class="ident" id="5935443"><a href="/gostd/go/build/build.go.html#5935389">allTags</a></span>&nbsp;<span class="op" id="5935451">!=</span>&nbsp;<span class="builtintype" id="5935454">nil</span>&nbsp;<span class="op" id="5935458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5935463"><a href="/gostd/go/build/build.go.html#5935389">allTags</a></span><span class="op" id="5935470">[</span><span class="ident" id="5935471"><a href="/gostd/go/build/build.go.html#5935376">name</a></span><span class="op" id="5935475">]</span>&nbsp;<span class="op" id="5935477">=</span>&nbsp;<span class="builtintype" id="5935479">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5935486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5935490">return</span>&nbsp;<span class="builtintype" id="5935497">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5935504">}</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5935507">if</span>&nbsp;<span class="ident" id="5935510">i</span>&nbsp;<span class="op" id="5935512">:=</span>&nbsp;<span class="ident" id="5935515"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5935522">.</span><span class="ident" id="5935523"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="5935528">(</span><span class="ident" id="5935529"><a href="/gostd/go/build/build.go.html#5935376">name</a></span><span class="op" id="5935533">,</span>&nbsp;<span class="string" id="5935535">&#34;,&#34;</span><span class="op" id="5935538">)</span><span class="op" id="5935539">;</span>&nbsp;<span class="ident" id="5935541"><a href="/gostd/go/build/build.go.html#5935510">i</a></span>&nbsp;<span class="op" id="5935543">&gt;=</span>&nbsp;<span class="num" id="5935546">0</span>&nbsp;<span class="op" id="5935548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5935552">//&nbsp;comma-separated&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5935578">ok1</span>&nbsp;<span class="op" id="5935582">:=</span>&nbsp;<span class="ident" id="5935585"><a href="/gostd/go/build/build.go.html#5935355">ctxt</a></span><span class="op" id="5935589">.</span><span class="ident" id="5935590"><a href="/gostd/go/build/build.go.html#5935370">match</a></span><span class="op" id="5935595">(</span><span class="ident" id="5935596"><a href="/gostd/go/build/build.go.html#5935376">name</a></span><span class="op" id="5935600">[</span><span class="op" id="5935601">:</span><span class="ident" id="5935602"><a href="/gostd/go/build/build.go.html#5935510">i</a></span><span class="op" id="5935603">]</span><span class="op" id="5935604">,</span>&nbsp;<span class="ident" id="5935606"><a href="/gostd/go/build/build.go.html#5935389">allTags</a></span><span class="op" id="5935613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5935617">ok2</span>&nbsp;<span class="op" id="5935621">:=</span>&nbsp;<span class="ident" id="5935624"><a href="/gostd/go/build/build.go.html#5935355">ctxt</a></span><span class="op" id="5935628">.</span><span class="ident" id="5935629"><a href="/gostd/go/build/build.go.html#5935370">match</a></span><span class="op" id="5935634">(</span><span class="ident" id="5935635"><a href="/gostd/go/build/build.go.html#5935376">name</a></span><span class="op" id="5935639">[</span><span class="ident" id="5935640"><a href="/gostd/go/build/build.go.html#5935510">i</a></span><span class="op" id="5935641">+</span><span class="num" id="5935642">1</span><span class="op" id="5935643">:</span><span class="op" id="5935644">]</span><span class="op" id="5935645">,</span>&nbsp;<span class="ident" id="5935647"><a href="/gostd/go/build/build.go.html#5935389">allTags</a></span><span class="op" id="5935654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5935658">return</span>&nbsp;<span class="ident" id="5935665"><a href="/gostd/go/build/build.go.html#5935578">ok1</a></span>&nbsp;<span class="op" id="5935669">&amp;&amp;</span>&nbsp;<span class="ident" id="5935672"><a href="/gostd/go/build/build.go.html#5935617">ok2</a></span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5935677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5935680">if</span>&nbsp;<span class="ident" id="5935683"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5935690">.</span><span class="ident" id="5935691"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5935700">(</span><span class="ident" id="5935701"><a href="/gostd/go/build/build.go.html#5935376">name</a></span><span class="op" id="5935705">,</span>&nbsp;<span class="string" id="5935707">&#34;!!&#34;</span><span class="op" id="5935711">)</span>&nbsp;<span class="op" id="5935713">{</span>&nbsp;<span class="comment" id="5935715">//&nbsp;bad&nbsp;syntax,&nbsp;reject&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5935746">return</span>&nbsp;<span class="builtintype" id="5935753">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5935760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5935763">if</span>&nbsp;<span class="ident" id="5935766"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5935773">.</span><span class="ident" id="5935774"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5935783">(</span><span class="ident" id="5935784"><a href="/gostd/go/build/build.go.html#5935376">name</a></span><span class="op" id="5935788">,</span>&nbsp;<span class="string" id="5935790">&#34;!&#34;</span><span class="op" id="5935793">)</span>&nbsp;<span class="op" id="5935795">{</span>&nbsp;<span class="comment" id="5935797">//&nbsp;negation</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5935811">return</span>&nbsp;<span class="builtinfunc" id="5935818">len</span><span class="op" id="5935821">(</span><span class="ident" id="5935822"><a href="/gostd/go/build/build.go.html#5935376">name</a></span><span class="op" id="5935826">)</span>&nbsp;<span class="op" id="5935828">&gt;</span>&nbsp;<span class="num" id="5935830">1</span>&nbsp;<span class="op" id="5935832">&amp;&amp;</span>&nbsp;<span class="op" id="5935835">!</span><span class="ident" id="5935836"><a href="/gostd/go/build/build.go.html#5935355">ctxt</a></span><span class="op" id="5935840">.</span><span class="ident" id="5935841"><a href="/gostd/go/build/build.go.html#5935370">match</a></span><span class="op" id="5935846">(</span><span class="ident" id="5935847"><a href="/gostd/go/build/build.go.html#5935376">name</a></span><span class="op" id="5935851">[</span><span class="num" id="5935852">1</span><span class="op" id="5935853">:</span><span class="op" id="5935854">]</span><span class="op" id="5935855">,</span>&nbsp;<span class="ident" id="5935857"><a href="/gostd/go/build/build.go.html#5935389">allTags</a></span><span class="op" id="5935864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5935867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5935871">if</span>&nbsp;<span class="ident" id="5935874"><a href="/gostd/go/build/build.go.html#5935389">allTags</a></span>&nbsp;<span class="op" id="5935882">!=</span>&nbsp;<span class="builtintype" id="5935885">nil</span>&nbsp;<span class="op" id="5935889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5935893"><a href="/gostd/go/build/build.go.html#5935389">allTags</a></span><span class="op" id="5935900">[</span><span class="ident" id="5935901"><a href="/gostd/go/build/build.go.html#5935376">name</a></span><span class="op" id="5935905">]</span>&nbsp;<span class="op" id="5935907">=</span>&nbsp;<span class="builtintype" id="5935909">true</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5935915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5935919">//&nbsp;Tags&nbsp;must&nbsp;be&nbsp;letters,&nbsp;digits,&nbsp;underscores&nbsp;or&nbsp;dots.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5935974">//&nbsp;Unlike&nbsp;in&nbsp;Go&nbsp;identifiers,&nbsp;all&nbsp;digits&nbsp;are&nbsp;fine&nbsp;(e.g.,&nbsp;&#34;386&#34;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936039">for</span>&nbsp;<span class="ident" id="5936043">_</span><span class="op" id="5936044">,</span>&nbsp;<span class="ident" id="5936046">c</span>&nbsp;<span class="op" id="5936048">:=</span>&nbsp;<span class="keyword" id="5936051">range</span>&nbsp;<span class="ident" id="5936057"><a href="/gostd/go/build/build.go.html#5935376">name</a></span>&nbsp;<span class="op" id="5936062">{</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936066">if</span>&nbsp;<span class="op" id="5936069">!</span><span class="ident" id="5936070"><a href="/gostd/go/build/build.go.html#5900584">unicode</a></span><span class="op" id="5936077">.</span><span class="ident" id="5936078"><a href="/gostd/unicode/graphic.go.html#1819623">IsLetter</a></span><span class="op" id="5936086">(</span><span class="ident" id="5936087"><a href="/gostd/go/build/build.go.html#5936046">c</a></span><span class="op" id="5936088">)</span>&nbsp;<span class="op" id="5936090">&amp;&amp;</span>&nbsp;<span class="op" id="5936093">!</span><span class="ident" id="5936094"><a href="/gostd/go/build/build.go.html#5900584">unicode</a></span><span class="op" id="5936101">.</span><span class="ident" id="5936102"><a href="/gostd/unicode/digit.go.html#1816545">IsDigit</a></span><span class="op" id="5936109">(</span><span class="ident" id="5936110"><a href="/gostd/go/build/build.go.html#5936046">c</a></span><span class="op" id="5936111">)</span>&nbsp;<span class="op" id="5936113">&amp;&amp;</span>&nbsp;<span class="ident" id="5936116"><a href="/gostd/go/build/build.go.html#5936046">c</a></span>&nbsp;<span class="op" id="5936118">!=</span>&nbsp;<span class="string" id="5936121">&#39;_&#39;</span>&nbsp;<span class="op" id="5936125">&amp;&amp;</span>&nbsp;<span class="ident" id="5936128"><a href="/gostd/go/build/build.go.html#5936046">c</a></span>&nbsp;<span class="op" id="5936130">!=</span>&nbsp;<span class="string" id="5936133">&#39;.&#39;</span>&nbsp;<span class="op" id="5936137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936142">return</span>&nbsp;<span class="builtintype" id="5936149">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5936164">//&nbsp;special&nbsp;tags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936181">if</span>&nbsp;<span class="ident" id="5936184"><a href="/gostd/go/build/build.go.html#5935355">ctxt</a></span><span class="op" id="5936188">.</span><span class="ident" id="5936189"><a href="/gostd/go/build/build.go.html#5900847">CgoEnabled</a></span>&nbsp;<span class="op" id="5936200">&amp;&amp;</span>&nbsp;<span class="ident" id="5936203"><a href="/gostd/go/build/build.go.html#5935376">name</a></span>&nbsp;<span class="op" id="5936208">==</span>&nbsp;<span class="string" id="5936211">&#34;cgo&#34;</span>&nbsp;<span class="op" id="5936217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936221">return</span>&nbsp;<span class="builtintype" id="5936228">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936237">if</span>&nbsp;<span class="ident" id="5936240"><a href="/gostd/go/build/build.go.html#5935376">name</a></span>&nbsp;<span class="op" id="5936245">==</span>&nbsp;<span class="ident" id="5936248"><a href="/gostd/go/build/build.go.html#5935355">ctxt</a></span><span class="op" id="5936252">.</span><span class="ident" id="5936253"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span>&nbsp;<span class="op" id="5936258">||</span>&nbsp;<span class="ident" id="5936261"><a href="/gostd/go/build/build.go.html#5935376">name</a></span>&nbsp;<span class="op" id="5936266">==</span>&nbsp;<span class="ident" id="5936269"><a href="/gostd/go/build/build.go.html#5935355">ctxt</a></span><span class="op" id="5936273">.</span><span class="ident" id="5936274"><a href="/gostd/go/build/build.go.html#5900695">GOARCH</a></span>&nbsp;<span class="op" id="5936281">||</span>&nbsp;<span class="ident" id="5936284"><a href="/gostd/go/build/build.go.html#5935376">name</a></span>&nbsp;<span class="op" id="5936289">==</span>&nbsp;<span class="ident" id="5936292"><a href="/gostd/go/build/build.go.html#5935355">ctxt</a></span><span class="op" id="5936296">.</span><span class="ident" id="5936297"><a href="/gostd/go/build/build.go.html#5900966">Compiler</a></span>&nbsp;<span class="op" id="5936306">{</span><br>
<span class="lineno">1270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936310">return</span>&nbsp;<span class="builtintype" id="5936317">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936326">if</span>&nbsp;<span class="ident" id="5936329"><a href="/gostd/go/build/build.go.html#5935355">ctxt</a></span><span class="op" id="5936333">.</span><span class="ident" id="5936334"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span>&nbsp;<span class="op" id="5936339">==</span>&nbsp;<span class="string" id="5936342">&#34;android&#34;</span>&nbsp;<span class="op" id="5936352">&amp;&amp;</span>&nbsp;<span class="ident" id="5936355"><a href="/gostd/go/build/build.go.html#5935376">name</a></span>&nbsp;<span class="op" id="5936360">==</span>&nbsp;<span class="string" id="5936363">&#34;linux&#34;</span>&nbsp;<span class="op" id="5936371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936375">return</span>&nbsp;<span class="builtintype" id="5936382">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936388">}</span><br>
<span class="lineno">1275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5936392">//&nbsp;other&nbsp;tags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936407">for</span>&nbsp;<span class="ident" id="5936411">_</span><span class="op" id="5936412">,</span>&nbsp;<span class="ident" id="5936414">tag</span>&nbsp;<span class="op" id="5936418">:=</span>&nbsp;<span class="keyword" id="5936421">range</span>&nbsp;<span class="ident" id="5936427"><a href="/gostd/go/build/build.go.html#5935355">ctxt</a></span><span class="op" id="5936431">.</span><span class="ident" id="5936432"><a href="/gostd/go/build/build.go.html#5901522">BuildTags</a></span>&nbsp;<span class="op" id="5936442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936446">if</span>&nbsp;<span class="ident" id="5936449"><a href="/gostd/go/build/build.go.html#5936414">tag</a></span>&nbsp;<span class="op" id="5936453">==</span>&nbsp;<span class="ident" id="5936456"><a href="/gostd/go/build/build.go.html#5935376">name</a></span>&nbsp;<span class="op" id="5936461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936466">return</span>&nbsp;<span class="builtintype" id="5936473">true</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936486">for</span>&nbsp;<span class="ident" id="5936490">_</span><span class="op" id="5936491">,</span>&nbsp;<span class="ident" id="5936493">tag</span>&nbsp;<span class="op" id="5936497">:=</span>&nbsp;<span class="keyword" id="5936500">range</span>&nbsp;<span class="ident" id="5936506"><a href="/gostd/go/build/build.go.html#5935355">ctxt</a></span><span class="op" id="5936510">.</span><span class="ident" id="5936511"><a href="/gostd/go/build/build.go.html#5901544">ReleaseTags</a></span>&nbsp;<span class="op" id="5936523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936527">if</span>&nbsp;<span class="ident" id="5936530"><a href="/gostd/go/build/build.go.html#5936493">tag</a></span>&nbsp;<span class="op" id="5936534">==</span>&nbsp;<span class="ident" id="5936537"><a href="/gostd/go/build/build.go.html#5935376">name</a></span>&nbsp;<span class="op" id="5936542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936547">return</span>&nbsp;<span class="builtintype" id="5936554">true</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5936564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5936568">return</span>&nbsp;<span class="builtintype" id="5936575">false</span><br>
<span class="lineno"></span><span class="op" id="5936581">}</span><br>
<span class="lineno">1290</span><br>
<span class="lineno"></span><span class="comment" id="5936584">//&nbsp;goodOSArchFile&nbsp;returns&nbsp;false&nbsp;if&nbsp;the&nbsp;name&nbsp;contains&nbsp;a&nbsp;$GOOS&nbsp;or&nbsp;$GOARCH</span><br>
<span class="lineno"></span><span class="comment" id="5936656">//&nbsp;suffix&nbsp;which&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;current&nbsp;system.</span><br>
<span class="lineno"></span><span class="comment" id="5936707">//&nbsp;The&nbsp;recognized&nbsp;name&nbsp;formats&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="5936743">//</span><br>
<span class="lineno">1295</span><span class="comment" id="5936746">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS).*</span><br>
<span class="lineno"></span><span class="comment" id="5936768">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOARCH).*</span><br>
<span class="lineno"></span><span class="comment" id="5936792">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_$(GOARCH).*</span><br>
<span class="lineno"></span><span class="comment" id="5936824">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_test.*</span><br>
<span class="lineno"></span><span class="comment" id="5936851">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOARCH)_test.*</span><br>
<span class="lineno">1300</span><span class="comment" id="5936880">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_$(GOARCH)_test.*</span><br>
<span class="lineno"></span><span class="comment" id="5936917">//</span><br>
<span class="lineno"></span><span class="comment" id="5936920">//&nbsp;An&nbsp;exception:&nbsp;if&nbsp;GOOS=android,&nbsp;then&nbsp;files&nbsp;with&nbsp;GOOS=linux&nbsp;are&nbsp;also&nbsp;matched.</span><br>
<span class="lineno"></span><span class="keyword" id="5936999">func</span>&nbsp;<span class="op" id="5937004">(</span><span class="ident" id="5937005">ctxt</span>&nbsp;<span class="op" id="5937010">*</span><span class="ident" id="5937011"><a href="/gostd/go/build/build.go.html#5900677">Context</a></span><span class="op" id="5937018">)</span>&nbsp;<span class="ident" id="5937020">goodOSArchFile</span><span class="op" id="5937034">(</span><span class="ident" id="5937035">name</span>&nbsp;<span class="builtintype" id="5937040">string</span><span class="op" id="5937046">,</span>&nbsp;<span class="ident" id="5937048">allTags</span>&nbsp;<span class="keyword" id="5937056">map</span><span class="op" id="5937059">[</span><span class="builtintype" id="5937060">string</span><span class="op" id="5937066">]</span><span class="builtintype" id="5937067">bool</span><span class="op" id="5937071">)</span>&nbsp;<span class="builtintype" id="5937073">bool</span>&nbsp;<span class="op" id="5937078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937081">if</span>&nbsp;<span class="ident" id="5937084">dot</span>&nbsp;<span class="op" id="5937088">:=</span>&nbsp;<span class="ident" id="5937091"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5937098">.</span><span class="ident" id="5937099"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="5937104">(</span><span class="ident" id="5937105"><a href="/gostd/go/build/build.go.html#5937035">name</a></span><span class="op" id="5937109">,</span>&nbsp;<span class="string" id="5937111">&#34;.&#34;</span><span class="op" id="5937114">)</span><span class="op" id="5937115">;</span>&nbsp;<span class="ident" id="5937117"><a href="/gostd/go/build/build.go.html#5937084">dot</a></span>&nbsp;<span class="op" id="5937121">!=</span>&nbsp;<span class="op" id="5937124">-</span><span class="num" id="5937125">1</span>&nbsp;<span class="op" id="5937127">{</span><br>
<span class="lineno">1305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937131"><a href="/gostd/go/build/build.go.html#5937035">name</a></span>&nbsp;<span class="op" id="5937136">=</span>&nbsp;<span class="ident" id="5937138"><a href="/gostd/go/build/build.go.html#5937035">name</a></span><span class="op" id="5937142">[</span><span class="op" id="5937143">:</span><span class="ident" id="5937144"><a href="/gostd/go/build/build.go.html#5937084">dot</a></span><span class="op" id="5937147">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5937150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5937154">//&nbsp;Before&nbsp;Go&nbsp;1.4,&nbsp;a&nbsp;file&nbsp;called&nbsp;&#34;linux.go&#34;&nbsp;would&nbsp;be&nbsp;equivalent&nbsp;to&nbsp;having&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5937230">//&nbsp;build&nbsp;tag&nbsp;&#34;linux&#34;&nbsp;in&nbsp;that&nbsp;file.&nbsp;For&nbsp;Go&nbsp;1.4&nbsp;and&nbsp;beyond,&nbsp;we&nbsp;require&nbsp;this</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5937305">//&nbsp;auto-tagging&nbsp;to&nbsp;apply&nbsp;only&nbsp;to&nbsp;files&nbsp;with&nbsp;a&nbsp;non-empty&nbsp;prefix,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5937373">//&nbsp;&#34;foo_linux.go&#34;&nbsp;is&nbsp;tagged&nbsp;but&nbsp;&#34;linux.go&#34;&nbsp;is&nbsp;not.&nbsp;This&nbsp;allows&nbsp;new&nbsp;operating</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5937451">//&nbsp;sytems,&nbsp;such&nbsp;as&nbsp;android,&nbsp;to&nbsp;arrive&nbsp;without&nbsp;breaking&nbsp;existing&nbsp;code&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5937526">//&nbsp;innocuous&nbsp;source&nbsp;code&nbsp;in&nbsp;&#34;android.go&#34;.&nbsp;The&nbsp;easiest&nbsp;fix:&nbsp;cut&nbsp;everything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5937601">//&nbsp;in&nbsp;the&nbsp;name&nbsp;before&nbsp;the&nbsp;initial&nbsp;_.</span><br>
<span class="lineno">1315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937639">i</span>&nbsp;<span class="op" id="5937641">:=</span>&nbsp;<span class="ident" id="5937644"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5937651">.</span><span class="ident" id="5937652"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="5937657">(</span><span class="ident" id="5937658"><a href="/gostd/go/build/build.go.html#5937035">name</a></span><span class="op" id="5937662">,</span>&nbsp;<span class="string" id="5937664">&#34;_&#34;</span><span class="op" id="5937667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937670">if</span>&nbsp;<span class="ident" id="5937673"><a href="/gostd/go/build/build.go.html#5937639">i</a></span>&nbsp;<span class="op" id="5937675">&lt;</span>&nbsp;<span class="num" id="5937677">0</span>&nbsp;<span class="op" id="5937679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937683">return</span>&nbsp;<span class="builtintype" id="5937690">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5937696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937699"><a href="/gostd/go/build/build.go.html#5937035">name</a></span>&nbsp;<span class="op" id="5937704">=</span>&nbsp;<span class="ident" id="5937706"><a href="/gostd/go/build/build.go.html#5937035">name</a></span><span class="op" id="5937710">[</span><span class="ident" id="5937711"><a href="/gostd/go/build/build.go.html#5937639">i</a></span><span class="op" id="5937712">:</span><span class="op" id="5937713">]</span>&nbsp;<span class="comment" id="5937715">//&nbsp;ignore&nbsp;everything&nbsp;before&nbsp;first&nbsp;_</span><br>
<span class="lineno">1320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937753">l</span>&nbsp;<span class="op" id="5937755">:=</span>&nbsp;<span class="ident" id="5937758"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5937765">.</span><span class="ident" id="5937766"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="5937771">(</span><span class="ident" id="5937772"><a href="/gostd/go/build/build.go.html#5937035">name</a></span><span class="op" id="5937776">,</span>&nbsp;<span class="string" id="5937778">&#34;_&#34;</span><span class="op" id="5937781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937784">if</span>&nbsp;<span class="ident" id="5937787">n</span>&nbsp;<span class="op" id="5937789">:=</span>&nbsp;<span class="builtinfunc" id="5937792">len</span><span class="op" id="5937795">(</span><span class="ident" id="5937796"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5937797">)</span><span class="op" id="5937798">;</span>&nbsp;<span class="ident" id="5937800"><a href="/gostd/go/build/build.go.html#5937787">n</a></span>&nbsp;<span class="op" id="5937802">&gt;</span>&nbsp;<span class="num" id="5937804">0</span>&nbsp;<span class="op" id="5937806">&amp;&amp;</span>&nbsp;<span class="ident" id="5937809"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5937810">[</span><span class="ident" id="5937811"><a href="/gostd/go/build/build.go.html#5937787">n</a></span><span class="op" id="5937812">-</span><span class="num" id="5937813">1</span><span class="op" id="5937814">]</span>&nbsp;<span class="op" id="5937816">==</span>&nbsp;<span class="string" id="5937819">&#34;test&#34;</span>&nbsp;<span class="op" id="5937826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937830"><a href="/gostd/go/build/build.go.html#5937753">l</a></span>&nbsp;<span class="op" id="5937832">=</span>&nbsp;<span class="ident" id="5937834"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5937835">[</span><span class="op" id="5937836">:</span><span class="ident" id="5937837"><a href="/gostd/go/build/build.go.html#5937787">n</a></span><span class="op" id="5937838">-</span><span class="num" id="5937839">1</span><span class="op" id="5937840">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5937843">}</span><br>
<span class="lineno">1325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937846">n</span>&nbsp;<span class="op" id="5937848">:=</span>&nbsp;<span class="builtinfunc" id="5937851">len</span><span class="op" id="5937854">(</span><span class="ident" id="5937855"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5937856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937859">if</span>&nbsp;<span class="ident" id="5937862"><a href="/gostd/go/build/build.go.html#5937846">n</a></span>&nbsp;<span class="op" id="5937864">&gt;=</span>&nbsp;<span class="num" id="5937867">2</span>&nbsp;<span class="op" id="5937869">&amp;&amp;</span>&nbsp;<span class="ident" id="5937872"><a href="/gostd/go/build/build.go.html#5938466">knownOS</a></span><span class="op" id="5937879">[</span><span class="ident" id="5937880"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5937881">[</span><span class="ident" id="5937882"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5937883">-</span><span class="num" id="5937884">2</span><span class="op" id="5937885">]</span><span class="op" id="5937886">]</span>&nbsp;<span class="op" id="5937888">&amp;&amp;</span>&nbsp;<span class="ident" id="5937891"><a href="/gostd/go/build/build.go.html#5938502">knownArch</a></span><span class="op" id="5937900">[</span><span class="ident" id="5937901"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5937902">[</span><span class="ident" id="5937903"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5937904">-</span><span class="num" id="5937905">1</span><span class="op" id="5937906">]</span><span class="op" id="5937907">]</span>&nbsp;<span class="op" id="5937909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937913">if</span>&nbsp;<span class="ident" id="5937916"><a href="/gostd/go/build/build.go.html#5937048">allTags</a></span>&nbsp;<span class="op" id="5937924">!=</span>&nbsp;<span class="builtintype" id="5937927">nil</span>&nbsp;<span class="op" id="5937931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937936"><a href="/gostd/go/build/build.go.html#5937048">allTags</a></span><span class="op" id="5937943">[</span><span class="ident" id="5937944"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5937945">[</span><span class="ident" id="5937946"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5937947">-</span><span class="num" id="5937948">2</span><span class="op" id="5937949">]</span><span class="op" id="5937950">]</span>&nbsp;<span class="op" id="5937952">=</span>&nbsp;<span class="builtintype" id="5937954">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937962"><a href="/gostd/go/build/build.go.html#5937048">allTags</a></span><span class="op" id="5937969">[</span><span class="ident" id="5937970"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5937971">[</span><span class="ident" id="5937972"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5937973">-</span><span class="num" id="5937974">1</span><span class="op" id="5937975">]</span><span class="op" id="5937976">]</span>&nbsp;<span class="op" id="5937978">=</span>&nbsp;<span class="builtintype" id="5937980">true</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5937987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5937991">if</span>&nbsp;<span class="ident" id="5937994"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5937995">[</span><span class="ident" id="5937996"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5937997">-</span><span class="num" id="5937998">1</span><span class="op" id="5937999">]</span>&nbsp;<span class="op" id="5938001">!=</span>&nbsp;<span class="ident" id="5938004"><a href="/gostd/go/build/build.go.html#5937005">ctxt</a></span><span class="op" id="5938008">.</span><span class="ident" id="5938009"><a href="/gostd/go/build/build.go.html#5900695">GOARCH</a></span>&nbsp;<span class="op" id="5938016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938021">return</span>&nbsp;<span class="builtintype" id="5938028">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938040">if</span>&nbsp;<span class="ident" id="5938043"><a href="/gostd/go/build/build.go.html#5937005">ctxt</a></span><span class="op" id="5938047">.</span><span class="ident" id="5938048"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span>&nbsp;<span class="op" id="5938053">==</span>&nbsp;<span class="string" id="5938056">&#34;android&#34;</span>&nbsp;<span class="op" id="5938066">&amp;&amp;</span>&nbsp;<span class="ident" id="5938069"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5938070">[</span><span class="ident" id="5938071"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5938072">-</span><span class="num" id="5938073">2</span><span class="op" id="5938074">]</span>&nbsp;<span class="op" id="5938076">==</span>&nbsp;<span class="string" id="5938079">&#34;linux&#34;</span>&nbsp;<span class="op" id="5938087">{</span><br>
<span class="lineno">1335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938092">return</span>&nbsp;<span class="builtintype" id="5938099">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938110">return</span>&nbsp;<span class="ident" id="5938117"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5938118">[</span><span class="ident" id="5938119"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5938120">-</span><span class="num" id="5938121">2</span><span class="op" id="5938122">]</span>&nbsp;<span class="op" id="5938124">==</span>&nbsp;<span class="ident" id="5938127"><a href="/gostd/go/build/build.go.html#5937005">ctxt</a></span><span class="op" id="5938131">.</span><span class="ident" id="5938132"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938141">if</span>&nbsp;<span class="ident" id="5938144"><a href="/gostd/go/build/build.go.html#5937846">n</a></span>&nbsp;<span class="op" id="5938146">&gt;=</span>&nbsp;<span class="num" id="5938149">1</span>&nbsp;<span class="op" id="5938151">&amp;&amp;</span>&nbsp;<span class="ident" id="5938154"><a href="/gostd/go/build/build.go.html#5938466">knownOS</a></span><span class="op" id="5938161">[</span><span class="ident" id="5938162"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5938163">[</span><span class="ident" id="5938164"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5938165">-</span><span class="num" id="5938166">1</span><span class="op" id="5938167">]</span><span class="op" id="5938168">]</span>&nbsp;<span class="op" id="5938170">{</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938174">if</span>&nbsp;<span class="ident" id="5938177"><a href="/gostd/go/build/build.go.html#5937048">allTags</a></span>&nbsp;<span class="op" id="5938185">!=</span>&nbsp;<span class="builtintype" id="5938188">nil</span>&nbsp;<span class="op" id="5938192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938197"><a href="/gostd/go/build/build.go.html#5937048">allTags</a></span><span class="op" id="5938204">[</span><span class="ident" id="5938205"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5938206">[</span><span class="ident" id="5938207"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5938208">-</span><span class="num" id="5938209">1</span><span class="op" id="5938210">]</span><span class="op" id="5938211">]</span>&nbsp;<span class="op" id="5938213">=</span>&nbsp;<span class="builtintype" id="5938215">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938226">if</span>&nbsp;<span class="ident" id="5938229"><a href="/gostd/go/build/build.go.html#5937005">ctxt</a></span><span class="op" id="5938233">.</span><span class="ident" id="5938234"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span>&nbsp;<span class="op" id="5938239">==</span>&nbsp;<span class="string" id="5938242">&#34;android&#34;</span>&nbsp;<span class="op" id="5938252">&amp;&amp;</span>&nbsp;<span class="ident" id="5938255"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5938256">[</span><span class="ident" id="5938257"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5938258">-</span><span class="num" id="5938259">1</span><span class="op" id="5938260">]</span>&nbsp;<span class="op" id="5938262">==</span>&nbsp;<span class="string" id="5938265">&#34;linux&#34;</span>&nbsp;<span class="op" id="5938273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938278">return</span>&nbsp;<span class="builtintype" id="5938285">true</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938296">return</span>&nbsp;<span class="ident" id="5938303"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5938304">[</span><span class="ident" id="5938305"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5938306">-</span><span class="num" id="5938307">1</span><span class="op" id="5938308">]</span>&nbsp;<span class="op" id="5938310">==</span>&nbsp;<span class="ident" id="5938313"><a href="/gostd/go/build/build.go.html#5937005">ctxt</a></span><span class="op" id="5938317">.</span><span class="ident" id="5938318"><a href="/gostd/go/build/build.go.html#5900738">GOOS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938327">if</span>&nbsp;<span class="ident" id="5938330"><a href="/gostd/go/build/build.go.html#5937846">n</a></span>&nbsp;<span class="op" id="5938332">&gt;=</span>&nbsp;<span class="num" id="5938335">1</span>&nbsp;<span class="op" id="5938337">&amp;&amp;</span>&nbsp;<span class="ident" id="5938340"><a href="/gostd/go/build/build.go.html#5938502">knownArch</a></span><span class="op" id="5938349">[</span><span class="ident" id="5938350"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5938351">[</span><span class="ident" id="5938352"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5938353">-</span><span class="num" id="5938354">1</span><span class="op" id="5938355">]</span><span class="op" id="5938356">]</span>&nbsp;<span class="op" id="5938358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938362">if</span>&nbsp;<span class="ident" id="5938365"><a href="/gostd/go/build/build.go.html#5937048">allTags</a></span>&nbsp;<span class="op" id="5938373">!=</span>&nbsp;<span class="builtintype" id="5938376">nil</span>&nbsp;<span class="op" id="5938380">{</span><br>
<span class="lineno">1350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938385"><a href="/gostd/go/build/build.go.html#5937048">allTags</a></span><span class="op" id="5938392">[</span><span class="ident" id="5938393"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5938394">[</span><span class="ident" id="5938395"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5938396">-</span><span class="num" id="5938397">1</span><span class="op" id="5938398">]</span><span class="op" id="5938399">]</span>&nbsp;<span class="op" id="5938401">=</span>&nbsp;<span class="builtintype" id="5938403">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938414">return</span>&nbsp;<span class="ident" id="5938421"><a href="/gostd/go/build/build.go.html#5937753">l</a></span><span class="op" id="5938422">[</span><span class="ident" id="5938423"><a href="/gostd/go/build/build.go.html#5937846">n</a></span><span class="op" id="5938424">-</span><span class="num" id="5938425">1</span><span class="op" id="5938426">]</span>&nbsp;<span class="op" id="5938428">==</span>&nbsp;<span class="ident" id="5938431"><a href="/gostd/go/build/build.go.html#5937005">ctxt</a></span><span class="op" id="5938435">.</span><span class="ident" id="5938436"><a href="/gostd/go/build/build.go.html#5900695">GOARCH</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938447">return</span>&nbsp;<span class="builtintype" id="5938454">true</span><br>
<span class="lineno">1355</span><span class="op" id="5938459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5938462">var</span>&nbsp;<span class="ident" id="5938466">knownOS</span>&nbsp;<span class="op" id="5938474">=</span>&nbsp;<span class="builtinfunc" id="5938476">make</span><span class="op" id="5938480">(</span><span class="keyword" id="5938481">map</span><span class="op" id="5938484">[</span><span class="builtintype" id="5938485">string</span><span class="op" id="5938491">]</span><span class="builtintype" id="5938492">bool</span><span class="op" id="5938496">)</span><br>
<span class="lineno"></span><span class="keyword" id="5938498">var</span>&nbsp;<span class="ident" id="5938502">knownArch</span>&nbsp;<span class="op" id="5938512">=</span>&nbsp;<span class="builtinfunc" id="5938514">make</span><span class="op" id="5938518">(</span><span class="keyword" id="5938519">map</span><span class="op" id="5938522">[</span><span class="builtintype" id="5938523">string</span><span class="op" id="5938529">]</span><span class="builtintype" id="5938530">bool</span><span class="op" id="5938534">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1360</span><span class="keyword" id="5938537">func</span>&nbsp;<span class="ident" id="5938542">init</span><span class="op" id="5938546">(</span><span class="op" id="5938547">)</span>&nbsp;<span class="op" id="5938549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938552">for</span>&nbsp;<span class="ident" id="5938556">_</span><span class="op" id="5938557">,</span>&nbsp;<span class="ident" id="5938559">v</span>&nbsp;<span class="op" id="5938561">:=</span>&nbsp;<span class="keyword" id="5938564">range</span>&nbsp;<span class="ident" id="5938570"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5938577">.</span><span class="ident" id="5938578"><a href="/gostd/strings/strings.go.html#2973751">Fields</a></span><span class="op" id="5938584">(</span><span class="ident" id="5938585"><a href="/gostd/go/build/syslist.go.html#5950154">goosList</a></span><span class="op" id="5938593">)</span>&nbsp;<span class="op" id="5938595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938599"><a href="/gostd/go/build/build.go.html#5938466">knownOS</a></span><span class="op" id="5938606">[</span><span class="ident" id="5938607"><a href="/gostd/go/build/build.go.html#5938559">v</a></span><span class="op" id="5938608">]</span>&nbsp;<span class="op" id="5938610">=</span>&nbsp;<span class="builtintype" id="5938612">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938621">for</span>&nbsp;<span class="ident" id="5938625">_</span><span class="op" id="5938626">,</span>&nbsp;<span class="ident" id="5938628">v</span>&nbsp;<span class="op" id="5938630">:=</span>&nbsp;<span class="keyword" id="5938633">range</span>&nbsp;<span class="ident" id="5938639"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5938646">.</span><span class="ident" id="5938647"><a href="/gostd/strings/strings.go.html#2973751">Fields</a></span><span class="op" id="5938653">(</span><span class="ident" id="5938654"><a href="/gostd/go/build/syslist.go.html#5950255">goarchList</a></span><span class="op" id="5938664">)</span>&nbsp;<span class="op" id="5938666">{</span><br>
<span class="lineno">1365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938670"><a href="/gostd/go/build/build.go.html#5938502">knownArch</a></span><span class="op" id="5938679">[</span><span class="ident" id="5938680"><a href="/gostd/go/build/build.go.html#5938628">v</a></span><span class="op" id="5938681">]</span>&nbsp;<span class="op" id="5938683">=</span>&nbsp;<span class="builtintype" id="5938685">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5938691">}</span><br>
<span class="lineno"></span><span class="op" id="5938693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5938696">//&nbsp;ToolDir&nbsp;is&nbsp;the&nbsp;directory&nbsp;containing&nbsp;build&nbsp;tools.</span><br>
<span class="lineno">1370</span><span class="keyword" id="5938748">var</span>&nbsp;<span class="ident" id="5938752">ToolDir</span>&nbsp;<span class="op" id="5938760">=</span>&nbsp;<span class="ident" id="5938762"><a href="/gostd/go/build/build.go.html#5900526">filepath</a></span><span class="op" id="5938770">.</span><span class="ident" id="5938771"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="5938775">(</span><span class="ident" id="5938776"><a href="/gostd/go/build/build.go.html#5900543">runtime</a></span><span class="op" id="5938783">.</span><span class="ident" id="5938784"><a href="/gostd/runtime/extern.go.html#1533257">GOROOT</a></span><span class="op" id="5938790">(</span><span class="op" id="5938791">)</span><span class="op" id="5938792">,</span>&nbsp;<span class="string" id="5938794">&#34;pkg/tool/&#34;</span><span class="op" id="5938805">+</span><span class="ident" id="5938806"><a href="/gostd/go/build/build.go.html#5900543">runtime</a></span><span class="op" id="5938813">.</span><span class="ident" id="5938814"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="5938818">+</span><span class="string" id="5938819">&#34;_&#34;</span><span class="op" id="5938822">+</span><span class="ident" id="5938823"><a href="/gostd/go/build/build.go.html#5900543">runtime</a></span><span class="op" id="5938830">.</span><span class="ident" id="5938831"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span><span class="op" id="5938837">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5938840">//&nbsp;IsLocalImport&nbsp;reports&nbsp;whether&nbsp;the&nbsp;import&nbsp;path&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5938892">//&nbsp;a&nbsp;local&nbsp;import&nbsp;path,&nbsp;like&nbsp;&#34;.&#34;,&nbsp;&#34;..&#34;,&nbsp;&#34;./foo&#34;,&nbsp;or&nbsp;&#34;../foo&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5938954">func</span>&nbsp;<span class="ident" id="5938959">IsLocalImport</span><span class="op" id="5938972">(</span><span class="ident" id="5938973">path</span>&nbsp;<span class="builtintype" id="5938978">string</span><span class="op" id="5938984">)</span>&nbsp;<span class="builtintype" id="5938986">bool</span>&nbsp;<span class="op" id="5938991">{</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5938994">return</span>&nbsp;<span class="ident" id="5939001"><a href="/gostd/go/build/build.go.html#5938973">path</a></span>&nbsp;<span class="op" id="5939006">==</span>&nbsp;<span class="string" id="5939009">&#34;.&#34;</span>&nbsp;<span class="op" id="5939013">||</span>&nbsp;<span class="ident" id="5939016"><a href="/gostd/go/build/build.go.html#5938973">path</a></span>&nbsp;<span class="op" id="5939021">==</span>&nbsp;<span class="string" id="5939024">&#34;..&#34;</span>&nbsp;<span class="op" id="5939029">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5939034"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5939041">.</span><span class="ident" id="5939042"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5939051">(</span><span class="ident" id="5939052"><a href="/gostd/go/build/build.go.html#5938973">path</a></span><span class="op" id="5939056">,</span>&nbsp;<span class="string" id="5939058">&#34;./&#34;</span><span class="op" id="5939062">)</span>&nbsp;<span class="op" id="5939064">||</span>&nbsp;<span class="ident" id="5939067"><a href="/gostd/go/build/build.go.html#5900573">strings</a></span><span class="op" id="5939074">.</span><span class="ident" id="5939075"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5939084">(</span><span class="ident" id="5939085"><a href="/gostd/go/build/build.go.html#5938973">path</a></span><span class="op" id="5939089">,</span>&nbsp;<span class="string" id="5939091">&#34;../&#34;</span><span class="op" id="5939096">)</span><br>
<span class="lineno"></span><span class="op" id="5939098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5939101">//&nbsp;ArchChar&nbsp;returns&nbsp;the&nbsp;architecture&nbsp;character&nbsp;for&nbsp;the&nbsp;given&nbsp;goarch.</span><br>
<span class="lineno">1380</span><span class="comment" id="5939170">//&nbsp;For&nbsp;example,&nbsp;ArchChar(&#34;amd64&#34;)&nbsp;returns&nbsp;&#34;6&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5939217">func</span>&nbsp;<span class="ident" id="5939222">ArchChar</span><span class="op" id="5939230">(</span><span class="ident" id="5939231">goarch</span>&nbsp;<span class="builtintype" id="5939238">string</span><span class="op" id="5939244">)</span>&nbsp;<span class="op" id="5939246">(</span><span class="builtintype" id="5939247">string</span><span class="op" id="5939253">,</span>&nbsp;<span class="builtintype" id="5939255">error</span><span class="op" id="5939260">)</span>&nbsp;<span class="op" id="5939262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5939265">switch</span>&nbsp;<span class="ident" id="5939272"><a href="/gostd/go/build/build.go.html#5939231">goarch</a></span>&nbsp;<span class="op" id="5939279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5939282">case</span>&nbsp;<span class="string" id="5939287">&#34;386&#34;</span><span class="op" id="5939292">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5939296">return</span>&nbsp;<span class="string" id="5939303">&#34;8&#34;</span><span class="op" id="5939306">,</span>&nbsp;<span class="builtintype" id="5939308">nil</span><br>
<span class="lineno">1385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5939313">case</span>&nbsp;<span class="string" id="5939318">&#34;amd64&#34;</span><span class="op" id="5939325">,</span>&nbsp;<span class="string" id="5939327">&#34;amd64p32&#34;</span><span class="op" id="5939337">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5939341">return</span>&nbsp;<span class="string" id="5939348">&#34;6&#34;</span><span class="op" id="5939351">,</span>&nbsp;<span class="builtintype" id="5939353">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5939358">case</span>&nbsp;<span class="string" id="5939363">&#34;arm&#34;</span><span class="op" id="5939368">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5939372">return</span>&nbsp;<span class="string" id="5939379">&#34;5&#34;</span><span class="op" id="5939382">,</span>&nbsp;<span class="builtintype" id="5939384">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5939389">}</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5939392">return</span>&nbsp;<span class="string" id="5939399">&#34;&#34;</span><span class="op" id="5939401">,</span>&nbsp;<span class="ident" id="5939403"><a href="/gostd/go/build/build.go.html#5900416">errors</a></span><span class="op" id="5939409">.</span><span class="ident" id="5939410"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5939413">(</span><span class="string" id="5939414">&#34;unsupported&nbsp;GOARCH&nbsp;&#34;</span>&nbsp;<span class="op" id="5939436">+</span>&nbsp;<span class="ident" id="5939438"><a href="/gostd/go/build/build.go.html#5939231">goarch</a></span><span class="op" id="5939444">)</span><br>
<span class="lineno"></span><span class="op" id="5939446">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
