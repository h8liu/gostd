<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html" class="current">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8045622">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8045677">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8045731">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8045782">package</span>&nbsp;<span class="ident" id="8045790">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8045797">import</span>&nbsp;<span class="op" id="8045804">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8045807">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8045817">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8045820">func</span>&nbsp;<span class="ident" id="8045825">delta</span><span class="op" id="8045830">(</span><span class="ident" id="8045831">x</span><span class="op" id="8045832">,</span>&nbsp;<span class="ident" id="8045834">y</span>&nbsp;<span class="builtintype" id="8045836">uint8</span><span class="op" id="8045841">)</span>&nbsp;<span class="builtintype" id="8045843">uint8</span>&nbsp;<span class="op" id="8045849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045852">if</span>&nbsp;<span class="ident" id="8045855">x</span>&nbsp;<span class="op" id="8045857">&gt;=</span>&nbsp;<span class="ident" id="8045860">y</span>&nbsp;<span class="op" id="8045862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045866">return</span>&nbsp;<span class="ident" id="8045873">x</span>&nbsp;<span class="op" id="8045875">-</span>&nbsp;<span class="ident" id="8045877">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8045880">}</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8045883">return</span>&nbsp;<span class="ident" id="8045890">y</span>&nbsp;<span class="op" id="8045892">-</span>&nbsp;<span class="ident" id="8045894">x</span><br>
<span class="lineno"></span><span class="op" id="8045896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8045899">//&nbsp;Test&nbsp;that&nbsp;a&nbsp;subset&nbsp;of&nbsp;RGB&nbsp;space&nbsp;can&nbsp;be&nbsp;converted&nbsp;to&nbsp;YCbCr&nbsp;and&nbsp;back&nbsp;to&nbsp;within</span><br>
<span class="lineno"></span><span class="comment" id="8045979">//&nbsp;1/256&nbsp;tolerance.</span><br>
<span class="lineno">20</span><span class="keyword" id="8045999">func</span>&nbsp;<span class="ident" id="8046004">TestRoundtrip</span><span class="op" id="8046017">(</span><span class="ident" id="8046018">t</span>&nbsp;<span class="op" id="8046020">*</span><span class="ident" id="8046021">testing</span><span class="op" id="8046028">.</span><span class="ident" id="8046029">T</span><span class="op" id="8046030">)</span>&nbsp;<span class="op" id="8046032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8046035">for</span>&nbsp;<span class="ident" id="8046039">r</span>&nbsp;<span class="op" id="8046041">:=</span>&nbsp;<span class="num" id="8046044">0</span><span class="op" id="8046045">;</span>&nbsp;<span class="ident" id="8046047">r</span>&nbsp;<span class="op" id="8046049">&lt;</span>&nbsp;<span class="num" id="8046051">255</span><span class="op" id="8046054">;</span>&nbsp;<span class="ident" id="8046056">r</span>&nbsp;<span class="op" id="8046058">+=</span>&nbsp;<span class="num" id="8046061">7</span>&nbsp;<span class="op" id="8046063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8046067">for</span>&nbsp;<span class="ident" id="8046071">g</span>&nbsp;<span class="op" id="8046073">:=</span>&nbsp;<span class="num" id="8046076">0</span><span class="op" id="8046077">;</span>&nbsp;<span class="ident" id="8046079">g</span>&nbsp;<span class="op" id="8046081">&lt;</span>&nbsp;<span class="num" id="8046083">255</span><span class="op" id="8046086">;</span>&nbsp;<span class="ident" id="8046088">g</span>&nbsp;<span class="op" id="8046090">+=</span>&nbsp;<span class="num" id="8046093">5</span>&nbsp;<span class="op" id="8046095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8046100">for</span>&nbsp;<span class="ident" id="8046104">b</span>&nbsp;<span class="op" id="8046106">:=</span>&nbsp;<span class="num" id="8046109">0</span><span class="op" id="8046110">;</span>&nbsp;<span class="ident" id="8046112">b</span>&nbsp;<span class="op" id="8046114">&lt;</span>&nbsp;<span class="num" id="8046116">255</span><span class="op" id="8046119">;</span>&nbsp;<span class="ident" id="8046121">b</span>&nbsp;<span class="op" id="8046123">+=</span>&nbsp;<span class="num" id="8046126">3</span>&nbsp;<span class="op" id="8046128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8046134">r0</span><span class="op" id="8046136">,</span>&nbsp;<span class="ident" id="8046138">g0</span><span class="op" id="8046140">,</span>&nbsp;<span class="ident" id="8046142">b0</span>&nbsp;<span class="op" id="8046145">:=</span>&nbsp;<span class="builtintype" id="8046148">uint8</span><span class="op" id="8046153">(</span><span class="ident" id="8046154">r</span><span class="op" id="8046155">)</span><span class="op" id="8046156">,</span>&nbsp;<span class="builtintype" id="8046158">uint8</span><span class="op" id="8046163">(</span><span class="ident" id="8046164">g</span><span class="op" id="8046165">)</span><span class="op" id="8046166">,</span>&nbsp;<span class="builtintype" id="8046168">uint8</span><span class="op" id="8046173">(</span><span class="ident" id="8046174">b</span><span class="op" id="8046175">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8046181">y</span><span class="op" id="8046182">,</span>&nbsp;<span class="ident" id="8046184">cb</span><span class="op" id="8046186">,</span>&nbsp;<span class="ident" id="8046188">cr</span>&nbsp;<span class="op" id="8046191">:=</span>&nbsp;<span class="ident" id="8046194">RGBToYCbCr</span><span class="op" id="8046204">(</span><span class="ident" id="8046205">r0</span><span class="op" id="8046207">,</span>&nbsp;<span class="ident" id="8046209">g0</span><span class="op" id="8046211">,</span>&nbsp;<span class="ident" id="8046213">b0</span><span class="op" id="8046215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8046221">r1</span><span class="op" id="8046223">,</span>&nbsp;<span class="ident" id="8046225">g1</span><span class="op" id="8046227">,</span>&nbsp;<span class="ident" id="8046229">b1</span>&nbsp;<span class="op" id="8046232">:=</span>&nbsp;<span class="ident" id="8046235">YCbCrToRGB</span><span class="op" id="8046245">(</span><span class="ident" id="8046246">y</span><span class="op" id="8046247">,</span>&nbsp;<span class="ident" id="8046249">cb</span><span class="op" id="8046251">,</span>&nbsp;<span class="ident" id="8046253">cr</span><span class="op" id="8046255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8046261">if</span>&nbsp;<span class="ident" id="8046264">delta</span><span class="op" id="8046269">(</span><span class="ident" id="8046270">r0</span><span class="op" id="8046272">,</span>&nbsp;<span class="ident" id="8046274">r1</span><span class="op" id="8046276">)</span>&nbsp;<span class="op" id="8046278">&gt;</span>&nbsp;<span class="num" id="8046280">1</span>&nbsp;<span class="op" id="8046282">||</span>&nbsp;<span class="ident" id="8046285">delta</span><span class="op" id="8046290">(</span><span class="ident" id="8046291">g0</span><span class="op" id="8046293">,</span>&nbsp;<span class="ident" id="8046295">g1</span><span class="op" id="8046297">)</span>&nbsp;<span class="op" id="8046299">&gt;</span>&nbsp;<span class="num" id="8046301">1</span>&nbsp;<span class="op" id="8046303">||</span>&nbsp;<span class="ident" id="8046306">delta</span><span class="op" id="8046311">(</span><span class="ident" id="8046312">b0</span><span class="op" id="8046314">,</span>&nbsp;<span class="ident" id="8046316">b1</span><span class="op" id="8046318">)</span>&nbsp;<span class="op" id="8046320">&gt;</span>&nbsp;<span class="num" id="8046322">1</span>&nbsp;<span class="op" id="8046324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8046331">t</span><span class="op" id="8046332">.</span><span class="ident" id="8046333">Fatalf</span><span class="op" id="8046339">(</span><span class="string" id="8046340">&#34;r0,&nbsp;g0,&nbsp;b0&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d&nbsp;&nbsp;&nbsp;r1,&nbsp;g1,&nbsp;b1&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d&#34;</span><span class="op" id="8046391">,</span>&nbsp;<span class="ident" id="8046393">r0</span><span class="op" id="8046395">,</span>&nbsp;<span class="ident" id="8046397">g0</span><span class="op" id="8046399">,</span>&nbsp;<span class="ident" id="8046401">b0</span><span class="op" id="8046403">,</span>&nbsp;<span class="ident" id="8046405">r1</span><span class="op" id="8046407">,</span>&nbsp;<span class="ident" id="8046409">g1</span><span class="op" id="8046411">,</span>&nbsp;<span class="ident" id="8046413">b1</span><span class="op" id="8046415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046421">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8046433">}</span><br>
<span class="lineno"></span><span class="op" id="8046435">}</span>
</div>
</body>
</html>
