<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7945280">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7945336">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7945390">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7945441">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="7945520">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7945529">package</span>&nbsp;<span class="ident" id="7945537">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="7945542">import</span>&nbsp;<span class="op" id="7945549">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7945552">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7945565">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7945571">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7945582">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7945593">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7945600">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7945603">//&nbsp;testUnixAddr&nbsp;uses&nbsp;ioutil.TempFile&nbsp;to&nbsp;get&nbsp;a&nbsp;name&nbsp;that&nbsp;is&nbsp;unique.&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="7945673">//&nbsp;also&nbsp;uses&nbsp;/tmp&nbsp;directory&nbsp;in&nbsp;case&nbsp;it&nbsp;is&nbsp;prohibited&nbsp;to&nbsp;create&nbsp;UNIX</span><br>
<span class="lineno">20</span><span class="comment" id="7945741">//&nbsp;sockets&nbsp;in&nbsp;TMPDIR.</span><br>
<span class="lineno"></span><span class="keyword" id="7945763">func</span>&nbsp;<span class="ident" id="7945768">testUnixAddr</span><span class="op" id="7945780">(</span><span class="op" id="7945781">)</span>&nbsp;<span class="builtintype" id="7945783">string</span>&nbsp;<span class="op" id="7945790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7945793">f</span><span class="op" id="7945794">,</span>&nbsp;<span class="ident" id="7945796">err</span>&nbsp;<span class="op" id="7945800">:=</span>&nbsp;<span class="ident" id="7945803"><a href="/net/protoconn_test.go.html#7945552">ioutil</a></span><span class="op" id="7945809">.</span><span class="ident" id="7945810">TempFile</span><span class="op" id="7945818">(</span><span class="string" id="7945819">&#34;&#34;</span><span class="op" id="7945821">,</span>&nbsp;<span class="string" id="7945823">&#34;nettest&#34;</span><span class="op" id="7945832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7945835">if</span>&nbsp;<span class="ident" id="7945838"><a href="/net/protoconn_test.go.html#7945796">err</a></span>&nbsp;<span class="op" id="7945842">!=</span>&nbsp;<span class="ident" id="7945845">nil</span>&nbsp;<span class="op" id="7945849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7945853">panic</span><span class="op" id="7945858">(</span><span class="ident" id="7945859"><a href="/net/protoconn_test.go.html#7945796">err</a></span><span class="op" id="7945862">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7945865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7945868">addr</span>&nbsp;<span class="op" id="7945873">:=</span>&nbsp;<span class="ident" id="7945876"><a href="/net/protoconn_test.go.html#7945793">f</a></span><span class="op" id="7945877">.</span><span class="ident" id="7945878">Name</span><span class="op" id="7945882">(</span><span class="op" id="7945883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7945886"><a href="/net/protoconn_test.go.html#7945793">f</a></span><span class="op" id="7945887">.</span><span class="ident" id="7945888">Close</span><span class="op" id="7945893">(</span><span class="op" id="7945894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7945897"><a href="/net/protoconn_test.go.html#7945565">os</a></span><span class="op" id="7945899">.</span><span class="ident" id="7945900">Remove</span><span class="op" id="7945906">(</span><span class="ident" id="7945907"><a href="/net/protoconn_test.go.html#7945868">addr</a></span><span class="op" id="7945911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7945914">return</span>&nbsp;<span class="ident" id="7945921"><a href="/net/protoconn_test.go.html#7945868">addr</a></span><br>
<span class="lineno">30</span><span class="op" id="7945926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7945929">var</span>&nbsp;<span class="ident" id="7945933">condFatalf</span>&nbsp;<span class="op" id="7945944">=</span>&nbsp;<span class="keyword" id="7945946">func</span><span class="op" id="7945950">(</span><span class="op" id="7945951">)</span>&nbsp;<span class="keyword" id="7945953">func</span><span class="op" id="7945957">(</span><span class="op" id="7945958">*</span><span class="ident" id="7945959"><a href="/net/protoconn_test.go.html#7945582">testing</a></span><span class="op" id="7945966">.</span><span class="ident" id="7945967">T</span><span class="op" id="7945968">,</span>&nbsp;<span class="builtintype" id="7945970">string</span><span class="op" id="7945976">,</span>&nbsp;<span class="op" id="7945978">...</span><span class="keyword" id="7945981">interface</span><span class="op" id="7945990">{</span><span class="op" id="7945991">}</span><span class="op" id="7945992">)</span>&nbsp;<span class="op" id="7945994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7945997">//&nbsp;A&nbsp;few&nbsp;APIs&nbsp;are&nbsp;not&nbsp;implemented&nbsp;yet&nbsp;on&nbsp;both&nbsp;Plan&nbsp;9&nbsp;and&nbsp;Windows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946064">switch</span>&nbsp;<span class="ident" id="7946071"><a href="/net/protoconn_test.go.html#7945571">runtime</a></span><span class="op" id="7946078">.</span><span class="ident" id="7946079">GOOS</span>&nbsp;<span class="op" id="7946084">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946087">case</span>&nbsp;<span class="string" id="7946092">&#34;plan9&#34;</span><span class="op" id="7946099">,</span>&nbsp;<span class="string" id="7946101">&#34;windows&#34;</span><span class="op" id="7946110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946114">return</span>&nbsp;<span class="op" id="7946121">(</span><span class="op" id="7946122">*</span><span class="ident" id="7946123"><a href="/net/protoconn_test.go.html#7945582">testing</a></span><span class="op" id="7946130">.</span><span class="ident" id="7946131">T</span><span class="op" id="7946132">)</span><span class="op" id="7946133">.</span><span class="ident" id="7946134">Logf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946143">return</span>&nbsp;<span class="op" id="7946150">(</span><span class="op" id="7946151">*</span><span class="ident" id="7946152"><a href="/net/protoconn_test.go.html#7945582">testing</a></span><span class="op" id="7946159">.</span><span class="ident" id="7946160">T</span><span class="op" id="7946161">)</span><span class="op" id="7946162">.</span><span class="ident" id="7946163">Fatalf</span><br>
<span class="lineno"></span><span class="op" id="7946170">}</span><span class="op" id="7946171">(</span><span class="op" id="7946172">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="7946175">func</span>&nbsp;<span class="ident" id="7946180">TestTCPListenerSpecificMethods</span><span class="op" id="7946210">(</span><span class="ident" id="7946211">t</span>&nbsp;<span class="op" id="7946213">*</span><span class="ident" id="7946214"><a href="/net/protoconn_test.go.html#7945582">testing</a></span><span class="op" id="7946221">.</span><span class="ident" id="7946222">T</span><span class="op" id="7946223">)</span>&nbsp;<span class="op" id="7946225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946228">switch</span>&nbsp;<span class="ident" id="7946235"><a href="/net/protoconn_test.go.html#7945571">runtime</a></span><span class="op" id="7946242">.</span><span class="ident" id="7946243">GOOS</span>&nbsp;<span class="op" id="7946248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946251">case</span>&nbsp;<span class="string" id="7946256">&#34;plan9&#34;</span><span class="op" id="7946263">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946267"><a href="/net/protoconn_test.go.html#7946211">t</a></span><span class="op" id="7946268">.</span><span class="ident" id="7946269">Skipf</span><span class="op" id="7946274">(</span><span class="string" id="7946275">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7946296">,</span>&nbsp;<span class="ident" id="7946298"><a href="/net/protoconn_test.go.html#7945571">runtime</a></span><span class="op" id="7946305">.</span><span class="ident" id="7946306">GOOS</span><span class="op" id="7946310">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946317">la</span><span class="op" id="7946319">,</span>&nbsp;<span class="ident" id="7946321">err</span>&nbsp;<span class="op" id="7946325">:=</span>&nbsp;<span class="ident" id="7946328"><a href="/net/tcpsock.go.html#1505235">ResolveTCPAddr</a></span><span class="op" id="7946342">(</span><span class="string" id="7946343">&#34;tcp4&#34;</span><span class="op" id="7946349">,</span>&nbsp;<span class="string" id="7946351">&#34;127.0.0.1:0&#34;</span><span class="op" id="7946364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946367">if</span>&nbsp;<span class="ident" id="7946370"><a href="/net/protoconn_test.go.html#7946321">err</a></span>&nbsp;<span class="op" id="7946374">!=</span>&nbsp;<span class="ident" id="7946377">nil</span>&nbsp;<span class="op" id="7946381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946385"><a href="/net/protoconn_test.go.html#7946211">t</a></span><span class="op" id="7946386">.</span><span class="ident" id="7946387">Fatalf</span><span class="op" id="7946393">(</span><span class="string" id="7946394">&#34;ResolveTCPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7946421">,</span>&nbsp;<span class="ident" id="7946423"><a href="/net/protoconn_test.go.html#7946321">err</a></span><span class="op" id="7946426">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946432">ln</span><span class="op" id="7946434">,</span>&nbsp;<span class="ident" id="7946436"><a href="/net/protoconn_test.go.html#7946321">err</a></span>&nbsp;<span class="op" id="7946440">:=</span>&nbsp;<span class="ident" id="7946443"><a href="/net/tcpsock_posix.go.html#1514734">ListenTCP</a></span><span class="op" id="7946452">(</span><span class="string" id="7946453">&#34;tcp4&#34;</span><span class="op" id="7946459">,</span>&nbsp;<span class="ident" id="7946461"><a href="/net/protoconn_test.go.html#7946317">la</a></span><span class="op" id="7946463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946466">if</span>&nbsp;<span class="ident" id="7946469"><a href="/net/protoconn_test.go.html#7946321">err</a></span>&nbsp;<span class="op" id="7946473">!=</span>&nbsp;<span class="ident" id="7946476">nil</span>&nbsp;<span class="op" id="7946480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946484"><a href="/net/protoconn_test.go.html#7946211">t</a></span><span class="op" id="7946485">.</span><span class="ident" id="7946486">Fatalf</span><span class="op" id="7946492">(</span><span class="string" id="7946493">&#34;ListenTCP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7946515">,</span>&nbsp;<span class="ident" id="7946517"><a href="/net/protoconn_test.go.html#7946321">err</a></span><span class="op" id="7946520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946523">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946526">defer</span>&nbsp;<span class="ident" id="7946532"><a href="/net/protoconn_test.go.html#7946432">ln</a></span><span class="op" id="7946534">.</span><span class="ident" id="7946535">Close</span><span class="op" id="7946540">(</span><span class="op" id="7946541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946544"><a href="/net/protoconn_test.go.html#7946432">ln</a></span><span class="op" id="7946546">.</span><span class="ident" id="7946547">Addr</span><span class="op" id="7946551">(</span><span class="op" id="7946552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946555"><a href="/net/protoconn_test.go.html#7946432">ln</a></span><span class="op" id="7946557">.</span><span class="ident" id="7946558">SetDeadline</span><span class="op" id="7946569">(</span><span class="ident" id="7946570"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7946574">.</span><span class="ident" id="7946575">Now</span><span class="op" id="7946578">(</span><span class="op" id="7946579">)</span><span class="op" id="7946580">.</span><span class="ident" id="7946581">Add</span><span class="op" id="7946584">(</span><span class="num" id="7946585">30</span>&nbsp;<span class="op" id="7946588">*</span>&nbsp;<span class="ident" id="7946590"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7946594">.</span><span class="ident" id="7946595">Nanosecond</span><span class="op" id="7946605">)</span><span class="op" id="7946606">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946610">if</span>&nbsp;<span class="ident" id="7946613">c</span><span class="op" id="7946614">,</span>&nbsp;<span class="ident" id="7946616">err</span>&nbsp;<span class="op" id="7946620">:=</span>&nbsp;<span class="ident" id="7946623"><a href="/net/protoconn_test.go.html#7946432">ln</a></span><span class="op" id="7946625">.</span><span class="ident" id="7946626">Accept</span><span class="op" id="7946632">(</span><span class="op" id="7946633">)</span><span class="op" id="7946634">;</span>&nbsp;<span class="ident" id="7946636"><a href="/net/protoconn_test.go.html#7946616">err</a></span>&nbsp;<span class="op" id="7946640">!=</span>&nbsp;<span class="ident" id="7946643">nil</span>&nbsp;<span class="op" id="7946647">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946651">if</span>&nbsp;<span class="op" id="7946654">!</span><span class="ident" id="7946655"><a href="/net/protoconn_test.go.html#7946616">err</a></span><span class="op" id="7946658">.</span><span class="op" id="7946659">(</span><span class="ident" id="7946660"><a href="/net/net.go.html#1469488">Error</a></span><span class="op" id="7946665">)</span><span class="op" id="7946666">.</span><span class="ident" id="7946667">Timeout</span><span class="op" id="7946674">(</span><span class="op" id="7946675">)</span>&nbsp;<span class="op" id="7946677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946682"><a href="/net/protoconn_test.go.html#7946211">t</a></span><span class="op" id="7946683">.</span><span class="ident" id="7946684">Fatalf</span><span class="op" id="7946690">(</span><span class="string" id="7946691">&#34;TCPListener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7946722">,</span>&nbsp;<span class="ident" id="7946724"><a href="/net/protoconn_test.go.html#7946616">err</a></span><span class="op" id="7946727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946734">}</span>&nbsp;<span class="keyword" id="7946736">else</span>&nbsp;<span class="op" id="7946741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946745"><a href="/net/protoconn_test.go.html#7946613">c</a></span><span class="op" id="7946746">.</span><span class="ident" id="7946747">Close</span><span class="op" id="7946752">(</span><span class="op" id="7946753">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946759">if</span>&nbsp;<span class="ident" id="7946762">c</span><span class="op" id="7946763">,</span>&nbsp;<span class="ident" id="7946765">err</span>&nbsp;<span class="op" id="7946769">:=</span>&nbsp;<span class="ident" id="7946772"><a href="/net/protoconn_test.go.html#7946432">ln</a></span><span class="op" id="7946774">.</span><span class="ident" id="7946775">AcceptTCP</span><span class="op" id="7946784">(</span><span class="op" id="7946785">)</span><span class="op" id="7946786">;</span>&nbsp;<span class="ident" id="7946788"><a href="/net/protoconn_test.go.html#7946765">err</a></span>&nbsp;<span class="op" id="7946792">!=</span>&nbsp;<span class="ident" id="7946795">nil</span>&nbsp;<span class="op" id="7946799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946803">if</span>&nbsp;<span class="op" id="7946806">!</span><span class="ident" id="7946807"><a href="/net/protoconn_test.go.html#7946765">err</a></span><span class="op" id="7946810">.</span><span class="op" id="7946811">(</span><span class="ident" id="7946812"><a href="/net/net.go.html#1469488">Error</a></span><span class="op" id="7946817">)</span><span class="op" id="7946818">.</span><span class="ident" id="7946819">Timeout</span><span class="op" id="7946826">(</span><span class="op" id="7946827">)</span>&nbsp;<span class="op" id="7946829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946834"><a href="/net/protoconn_test.go.html#7946211">t</a></span><span class="op" id="7946835">.</span><span class="ident" id="7946836">Fatalf</span><span class="op" id="7946842">(</span><span class="string" id="7946843">&#34;TCPListener.AcceptTCP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7946877">,</span>&nbsp;<span class="ident" id="7946879"><a href="/net/protoconn_test.go.html#7946765">err</a></span><span class="op" id="7946882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946886">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946889">}</span>&nbsp;<span class="keyword" id="7946891">else</span>&nbsp;<span class="op" id="7946896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946900"><a href="/net/protoconn_test.go.html#7946762">c</a></span><span class="op" id="7946901">.</span><span class="ident" id="7946902">Close</span><span class="op" id="7946907">(</span><span class="op" id="7946908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7946911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7946915">if</span>&nbsp;<span class="ident" id="7946918">f</span><span class="op" id="7946919">,</span>&nbsp;<span class="ident" id="7946921">err</span>&nbsp;<span class="op" id="7946925">:=</span>&nbsp;<span class="ident" id="7946928"><a href="/net/protoconn_test.go.html#7946432">ln</a></span><span class="op" id="7946930">.</span><span class="ident" id="7946931">File</span><span class="op" id="7946935">(</span><span class="op" id="7946936">)</span><span class="op" id="7946937">;</span>&nbsp;<span class="ident" id="7946939"><a href="/net/protoconn_test.go.html#7946921">err</a></span>&nbsp;<span class="op" id="7946943">!=</span>&nbsp;<span class="ident" id="7946946">nil</span>&nbsp;<span class="op" id="7946950">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7946954"><a href="/net/protoconn_test.go.html#7945933">condFatalf</a></span><span class="op" id="7946964">(</span><span class="ident" id="7946965"><a href="/net/protoconn_test.go.html#7946211">t</a></span><span class="op" id="7946966">,</span>&nbsp;<span class="string" id="7946968">&#34;TCPListener.File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7946997">,</span>&nbsp;<span class="ident" id="7946999"><a href="/net/protoconn_test.go.html#7946921">err</a></span><span class="op" id="7947002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7947005">}</span>&nbsp;<span class="keyword" id="7947007">else</span>&nbsp;<span class="op" id="7947012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947016"><a href="/net/protoconn_test.go.html#7946918">f</a></span><span class="op" id="7947017">.</span><span class="ident" id="7947018">Close</span><span class="op" id="7947023">(</span><span class="op" id="7947024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7947027">}</span><br>
<span class="lineno"></span><span class="op" id="7947029">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="7947032">func</span>&nbsp;<span class="ident" id="7947037">TestTCPConnSpecificMethods</span><span class="op" id="7947063">(</span><span class="ident" id="7947064">t</span>&nbsp;<span class="op" id="7947066">*</span><span class="ident" id="7947067"><a href="/net/protoconn_test.go.html#7945582">testing</a></span><span class="op" id="7947074">.</span><span class="ident" id="7947075">T</span><span class="op" id="7947076">)</span>&nbsp;<span class="op" id="7947078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947081">la</span><span class="op" id="7947083">,</span>&nbsp;<span class="ident" id="7947085">err</span>&nbsp;<span class="op" id="7947089">:=</span>&nbsp;<span class="ident" id="7947092"><a href="/net/tcpsock.go.html#1505235">ResolveTCPAddr</a></span><span class="op" id="7947106">(</span><span class="string" id="7947107">&#34;tcp4&#34;</span><span class="op" id="7947113">,</span>&nbsp;<span class="string" id="7947115">&#34;127.0.0.1:0&#34;</span><span class="op" id="7947128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947131">if</span>&nbsp;<span class="ident" id="7947134"><a href="/net/protoconn_test.go.html#7947085">err</a></span>&nbsp;<span class="op" id="7947138">!=</span>&nbsp;<span class="ident" id="7947141">nil</span>&nbsp;<span class="op" id="7947145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947149"><a href="/net/protoconn_test.go.html#7947064">t</a></span><span class="op" id="7947150">.</span><span class="ident" id="7947151">Fatalf</span><span class="op" id="7947157">(</span><span class="string" id="7947158">&#34;ResolveTCPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7947185">,</span>&nbsp;<span class="ident" id="7947187"><a href="/net/protoconn_test.go.html#7947085">err</a></span><span class="op" id="7947190">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7947193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947196">ln</span><span class="op" id="7947198">,</span>&nbsp;<span class="ident" id="7947200"><a href="/net/protoconn_test.go.html#7947085">err</a></span>&nbsp;<span class="op" id="7947204">:=</span>&nbsp;<span class="ident" id="7947207"><a href="/net/tcpsock_posix.go.html#1514734">ListenTCP</a></span><span class="op" id="7947216">(</span><span class="string" id="7947217">&#34;tcp4&#34;</span><span class="op" id="7947223">,</span>&nbsp;<span class="ident" id="7947225"><a href="/net/protoconn_test.go.html#7947081">la</a></span><span class="op" id="7947227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947230">if</span>&nbsp;<span class="ident" id="7947233"><a href="/net/protoconn_test.go.html#7947085">err</a></span>&nbsp;<span class="op" id="7947237">!=</span>&nbsp;<span class="ident" id="7947240">nil</span>&nbsp;<span class="op" id="7947244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947248"><a href="/net/protoconn_test.go.html#7947064">t</a></span><span class="op" id="7947249">.</span><span class="ident" id="7947250">Fatalf</span><span class="op" id="7947256">(</span><span class="string" id="7947257">&#34;ListenTCP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7947279">,</span>&nbsp;<span class="ident" id="7947281"><a href="/net/protoconn_test.go.html#7947085">err</a></span><span class="op" id="7947284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7947287">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947290">defer</span>&nbsp;<span class="ident" id="7947296"><a href="/net/protoconn_test.go.html#7947196">ln</a></span><span class="op" id="7947298">.</span><span class="ident" id="7947299">Close</span><span class="op" id="7947304">(</span><span class="op" id="7947305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947308"><a href="/net/protoconn_test.go.html#7947196">ln</a></span><span class="op" id="7947310">.</span><span class="ident" id="7947311">Addr</span><span class="op" id="7947315">(</span><span class="op" id="7947316">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947320">done</span>&nbsp;<span class="op" id="7947325">:=</span>&nbsp;<span class="builtinfunc" id="7947328">make</span><span class="op" id="7947332">(</span><span class="keyword" id="7947333">chan</span>&nbsp;<span class="builtintype" id="7947338">int</span><span class="op" id="7947341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947344">go</span>&nbsp;<span class="ident" id="7947347"><a href="/net/conn_test.go.html#7826187">transponder</a></span><span class="op" id="7947358">(</span><span class="ident" id="7947359"><a href="/net/protoconn_test.go.html#7947064">t</a></span><span class="op" id="7947360">,</span>&nbsp;<span class="ident" id="7947362"><a href="/net/protoconn_test.go.html#7947196">ln</a></span><span class="op" id="7947364">,</span>&nbsp;<span class="ident" id="7947366"><a href="/net/protoconn_test.go.html#7947320">done</a></span><span class="op" id="7947370">)</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947374">ra</span><span class="op" id="7947376">,</span>&nbsp;<span class="ident" id="7947378"><a href="/net/protoconn_test.go.html#7947085">err</a></span>&nbsp;<span class="op" id="7947382">:=</span>&nbsp;<span class="ident" id="7947385"><a href="/net/tcpsock.go.html#1505235">ResolveTCPAddr</a></span><span class="op" id="7947399">(</span><span class="string" id="7947400">&#34;tcp4&#34;</span><span class="op" id="7947406">,</span>&nbsp;<span class="ident" id="7947408"><a href="/net/protoconn_test.go.html#7947196">ln</a></span><span class="op" id="7947410">.</span><span class="ident" id="7947411">Addr</span><span class="op" id="7947415">(</span><span class="op" id="7947416">)</span><span class="op" id="7947417">.</span><span class="ident" id="7947418">String</span><span class="op" id="7947424">(</span><span class="op" id="7947425">)</span><span class="op" id="7947426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947429">if</span>&nbsp;<span class="ident" id="7947432"><a href="/net/protoconn_test.go.html#7947085">err</a></span>&nbsp;<span class="op" id="7947436">!=</span>&nbsp;<span class="ident" id="7947439">nil</span>&nbsp;<span class="op" id="7947443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947447"><a href="/net/protoconn_test.go.html#7947064">t</a></span><span class="op" id="7947448">.</span><span class="ident" id="7947449">Fatalf</span><span class="op" id="7947455">(</span><span class="string" id="7947456">&#34;ResolveTCPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7947483">,</span>&nbsp;<span class="ident" id="7947485"><a href="/net/protoconn_test.go.html#7947085">err</a></span><span class="op" id="7947488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7947491">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947494">c</span><span class="op" id="7947495">,</span>&nbsp;<span class="ident" id="7947497"><a href="/net/protoconn_test.go.html#7947085">err</a></span>&nbsp;<span class="op" id="7947501">:=</span>&nbsp;<span class="ident" id="7947504"><a href="/net/tcpsock_posix.go.html#1509390">DialTCP</a></span><span class="op" id="7947511">(</span><span class="string" id="7947512">&#34;tcp4&#34;</span><span class="op" id="7947518">,</span>&nbsp;<span class="ident" id="7947520">nil</span><span class="op" id="7947523">,</span>&nbsp;<span class="ident" id="7947525"><a href="/net/protoconn_test.go.html#7947374">ra</a></span><span class="op" id="7947527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947530">if</span>&nbsp;<span class="ident" id="7947533"><a href="/net/protoconn_test.go.html#7947085">err</a></span>&nbsp;<span class="op" id="7947537">!=</span>&nbsp;<span class="ident" id="7947540">nil</span>&nbsp;<span class="op" id="7947544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947548"><a href="/net/protoconn_test.go.html#7947064">t</a></span><span class="op" id="7947549">.</span><span class="ident" id="7947550">Fatalf</span><span class="op" id="7947556">(</span><span class="string" id="7947557">&#34;DialTCP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7947577">,</span>&nbsp;<span class="ident" id="7947579"><a href="/net/protoconn_test.go.html#7947085">err</a></span><span class="op" id="7947582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7947585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947588">defer</span>&nbsp;<span class="ident" id="7947594"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947595">.</span><span class="ident" id="7947596">Close</span><span class="op" id="7947601">(</span><span class="op" id="7947602">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947605"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947606">.</span><span class="ident" id="7947607">SetKeepAlive</span><span class="op" id="7947619">(</span><span class="builtintype" id="7947620">false</span><span class="op" id="7947625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947628"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947629">.</span><span class="ident" id="7947630">SetKeepAlivePeriod</span><span class="op" id="7947648">(</span><span class="num" id="7947649">3</span>&nbsp;<span class="op" id="7947651">*</span>&nbsp;<span class="ident" id="7947653"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7947657">.</span><span class="ident" id="7947658">Second</span><span class="op" id="7947664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947667"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947668">.</span><span class="ident" id="7947669">SetLinger</span><span class="op" id="7947678">(</span><span class="num" id="7947679">0</span><span class="op" id="7947680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947683"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947684">.</span><span class="ident" id="7947685">SetNoDelay</span><span class="op" id="7947695">(</span><span class="builtintype" id="7947696">false</span><span class="op" id="7947701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947704"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947705">.</span><span class="ident" id="7947706">LocalAddr</span><span class="op" id="7947715">(</span><span class="op" id="7947716">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947719"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947720">.</span><span class="ident" id="7947721">RemoteAddr</span><span class="op" id="7947731">(</span><span class="op" id="7947732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947735"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947736">.</span><span class="ident" id="7947737">SetDeadline</span><span class="op" id="7947748">(</span><span class="ident" id="7947749"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7947753">.</span><span class="ident" id="7947754">Now</span><span class="op" id="7947757">(</span><span class="op" id="7947758">)</span><span class="op" id="7947759">.</span><span class="ident" id="7947760">Add</span><span class="op" id="7947763">(</span><span class="ident" id="7947764"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7947775">)</span><span class="op" id="7947776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947779"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947780">.</span><span class="ident" id="7947781">SetReadDeadline</span><span class="op" id="7947796">(</span><span class="ident" id="7947797"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7947801">.</span><span class="ident" id="7947802">Now</span><span class="op" id="7947805">(</span><span class="op" id="7947806">)</span><span class="op" id="7947807">.</span><span class="ident" id="7947808">Add</span><span class="op" id="7947811">(</span><span class="ident" id="7947812"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7947823">)</span><span class="op" id="7947824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947827"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947828">.</span><span class="ident" id="7947829">SetWriteDeadline</span><span class="op" id="7947845">(</span><span class="ident" id="7947846"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7947850">.</span><span class="ident" id="7947851">Now</span><span class="op" id="7947854">(</span><span class="op" id="7947855">)</span><span class="op" id="7947856">.</span><span class="ident" id="7947857">Add</span><span class="op" id="7947860">(</span><span class="ident" id="7947861"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7947872">)</span><span class="op" id="7947873">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7947877">if</span>&nbsp;<span class="ident" id="7947880">_</span><span class="op" id="7947881">,</span>&nbsp;<span class="ident" id="7947883">err</span>&nbsp;<span class="op" id="7947887">:=</span>&nbsp;<span class="ident" id="7947890"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7947891">.</span><span class="ident" id="7947892">Write</span><span class="op" id="7947897">(</span><span class="op" id="7947898">[</span><span class="op" id="7947899">]</span><span class="builtintype" id="7947900">byte</span><span class="op" id="7947904">(</span><span class="string" id="7947905">&#34;TCPCONN&nbsp;TEST&#34;</span><span class="op" id="7947919">)</span><span class="op" id="7947920">)</span><span class="op" id="7947921">;</span>&nbsp;<span class="ident" id="7947923"><a href="/net/protoconn_test.go.html#7947883">err</a></span>&nbsp;<span class="op" id="7947927">!=</span>&nbsp;<span class="ident" id="7947930">nil</span>&nbsp;<span class="op" id="7947934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947938"><a href="/net/protoconn_test.go.html#7947064">t</a></span><span class="op" id="7947939">.</span><span class="ident" id="7947940">Fatalf</span><span class="op" id="7947946">(</span><span class="string" id="7947947">&#34;TCPConn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7947973">,</span>&nbsp;<span class="ident" id="7947975"><a href="/net/protoconn_test.go.html#7947883">err</a></span><span class="op" id="7947978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7947981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7947984">rb</span>&nbsp;<span class="op" id="7947987">:=</span>&nbsp;<span class="builtinfunc" id="7947990">make</span><span class="op" id="7947994">(</span><span class="op" id="7947995">[</span><span class="op" id="7947996">]</span><span class="builtintype" id="7947997">byte</span><span class="op" id="7948001">,</span>&nbsp;<span class="num" id="7948003">128</span><span class="op" id="7948006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948009">if</span>&nbsp;<span class="ident" id="7948012">_</span><span class="op" id="7948013">,</span>&nbsp;<span class="ident" id="7948015">err</span>&nbsp;<span class="op" id="7948019">:=</span>&nbsp;<span class="ident" id="7948022"><a href="/net/protoconn_test.go.html#7947494">c</a></span><span class="op" id="7948023">.</span><span class="ident" id="7948024">Read</span><span class="op" id="7948028">(</span><span class="ident" id="7948029"><a href="/net/protoconn_test.go.html#7947984">rb</a></span><span class="op" id="7948031">)</span><span class="op" id="7948032">;</span>&nbsp;<span class="ident" id="7948034"><a href="/net/protoconn_test.go.html#7948015">err</a></span>&nbsp;<span class="op" id="7948038">!=</span>&nbsp;<span class="ident" id="7948041">nil</span>&nbsp;<span class="op" id="7948045">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948049"><a href="/net/protoconn_test.go.html#7947064">t</a></span><span class="op" id="7948050">.</span><span class="ident" id="7948051">Fatalf</span><span class="op" id="7948057">(</span><span class="string" id="7948058">&#34;TCPConn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7948083">,</span>&nbsp;<span class="ident" id="7948085"><a href="/net/protoconn_test.go.html#7948015">err</a></span><span class="op" id="7948088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948095">&lt;-</span><span class="ident" id="7948097"><a href="/net/protoconn_test.go.html#7947320">done</a></span><br>
<span class="lineno"></span><span class="op" id="7948102">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="7948105">func</span>&nbsp;<span class="ident" id="7948110">TestUDPConnSpecificMethods</span><span class="op" id="7948136">(</span><span class="ident" id="7948137">t</span>&nbsp;<span class="op" id="7948139">*</span><span class="ident" id="7948140"><a href="/net/protoconn_test.go.html#7945582">testing</a></span><span class="op" id="7948147">.</span><span class="ident" id="7948148">T</span><span class="op" id="7948149">)</span>&nbsp;<span class="op" id="7948151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948154">la</span><span class="op" id="7948156">,</span>&nbsp;<span class="ident" id="7948158">err</span>&nbsp;<span class="op" id="7948162">:=</span>&nbsp;<span class="ident" id="7948165"><a href="/net/udpsock.go.html#1517608">ResolveUDPAddr</a></span><span class="op" id="7948179">(</span><span class="string" id="7948180">&#34;udp4&#34;</span><span class="op" id="7948186">,</span>&nbsp;<span class="string" id="7948188">&#34;127.0.0.1:0&#34;</span><span class="op" id="7948201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948204">if</span>&nbsp;<span class="ident" id="7948207"><a href="/net/protoconn_test.go.html#7948158">err</a></span>&nbsp;<span class="op" id="7948211">!=</span>&nbsp;<span class="ident" id="7948214">nil</span>&nbsp;<span class="op" id="7948218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948222"><a href="/net/protoconn_test.go.html#7948137">t</a></span><span class="op" id="7948223">.</span><span class="ident" id="7948224">Fatalf</span><span class="op" id="7948230">(</span><span class="string" id="7948231">&#34;ResolveUDPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7948258">,</span>&nbsp;<span class="ident" id="7948260"><a href="/net/protoconn_test.go.html#7948158">err</a></span><span class="op" id="7948263">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948269">c</span><span class="op" id="7948270">,</span>&nbsp;<span class="ident" id="7948272"><a href="/net/protoconn_test.go.html#7948158">err</a></span>&nbsp;<span class="op" id="7948276">:=</span>&nbsp;<span class="ident" id="7948279"><a href="/net/udpsock_posix.go.html#1523853">ListenUDP</a></span><span class="op" id="7948288">(</span><span class="string" id="7948289">&#34;udp4&#34;</span><span class="op" id="7948295">,</span>&nbsp;<span class="ident" id="7948297"><a href="/net/protoconn_test.go.html#7948154">la</a></span><span class="op" id="7948299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948302">if</span>&nbsp;<span class="ident" id="7948305"><a href="/net/protoconn_test.go.html#7948158">err</a></span>&nbsp;<span class="op" id="7948309">!=</span>&nbsp;<span class="ident" id="7948312">nil</span>&nbsp;<span class="op" id="7948316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948320"><a href="/net/protoconn_test.go.html#7948137">t</a></span><span class="op" id="7948321">.</span><span class="ident" id="7948322">Fatalf</span><span class="op" id="7948328">(</span><span class="string" id="7948329">&#34;ListenUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7948351">,</span>&nbsp;<span class="ident" id="7948353"><a href="/net/protoconn_test.go.html#7948158">err</a></span><span class="op" id="7948356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948359">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948362">defer</span>&nbsp;<span class="ident" id="7948368"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948369">.</span><span class="ident" id="7948370">Close</span><span class="op" id="7948375">(</span><span class="op" id="7948376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948379"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948380">.</span><span class="ident" id="7948381">LocalAddr</span><span class="op" id="7948390">(</span><span class="op" id="7948391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948394"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948395">.</span><span class="ident" id="7948396">RemoteAddr</span><span class="op" id="7948406">(</span><span class="op" id="7948407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948410"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948411">.</span><span class="ident" id="7948412">SetDeadline</span><span class="op" id="7948423">(</span><span class="ident" id="7948424"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7948428">.</span><span class="ident" id="7948429">Now</span><span class="op" id="7948432">(</span><span class="op" id="7948433">)</span><span class="op" id="7948434">.</span><span class="ident" id="7948435">Add</span><span class="op" id="7948438">(</span><span class="ident" id="7948439"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7948450">)</span><span class="op" id="7948451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948454"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948455">.</span><span class="ident" id="7948456">SetReadDeadline</span><span class="op" id="7948471">(</span><span class="ident" id="7948472"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7948476">.</span><span class="ident" id="7948477">Now</span><span class="op" id="7948480">(</span><span class="op" id="7948481">)</span><span class="op" id="7948482">.</span><span class="ident" id="7948483">Add</span><span class="op" id="7948486">(</span><span class="ident" id="7948487"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7948498">)</span><span class="op" id="7948499">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948502"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948503">.</span><span class="ident" id="7948504">SetWriteDeadline</span><span class="op" id="7948520">(</span><span class="ident" id="7948521"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7948525">.</span><span class="ident" id="7948526">Now</span><span class="op" id="7948529">(</span><span class="op" id="7948530">)</span><span class="op" id="7948531">.</span><span class="ident" id="7948532">Add</span><span class="op" id="7948535">(</span><span class="ident" id="7948536"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7948547">)</span><span class="op" id="7948548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948551"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948552">.</span><span class="ident" id="7948553">SetReadBuffer</span><span class="op" id="7948566">(</span><span class="num" id="7948567">2048</span><span class="op" id="7948571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948574"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948575">.</span><span class="ident" id="7948576">SetWriteBuffer</span><span class="op" id="7948590">(</span><span class="num" id="7948591">2048</span><span class="op" id="7948595">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948599">wb</span>&nbsp;<span class="op" id="7948602">:=</span>&nbsp;<span class="op" id="7948605">[</span><span class="op" id="7948606">]</span><span class="builtintype" id="7948607">byte</span><span class="op" id="7948611">(</span><span class="string" id="7948612">&#34;UDPCONN&nbsp;TEST&#34;</span><span class="op" id="7948626">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948629">rb</span>&nbsp;<span class="op" id="7948632">:=</span>&nbsp;<span class="builtinfunc" id="7948635">make</span><span class="op" id="7948639">(</span><span class="op" id="7948640">[</span><span class="op" id="7948641">]</span><span class="builtintype" id="7948642">byte</span><span class="op" id="7948646">,</span>&nbsp;<span class="num" id="7948648">128</span><span class="op" id="7948651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948654">if</span>&nbsp;<span class="ident" id="7948657">_</span><span class="op" id="7948658">,</span>&nbsp;<span class="ident" id="7948660">err</span>&nbsp;<span class="op" id="7948664">:=</span>&nbsp;<span class="ident" id="7948667"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948668">.</span><span class="ident" id="7948669">WriteToUDP</span><span class="op" id="7948679">(</span><span class="ident" id="7948680"><a href="/net/protoconn_test.go.html#7948599">wb</a></span><span class="op" id="7948682">,</span>&nbsp;<span class="ident" id="7948684"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948685">.</span><span class="ident" id="7948686">LocalAddr</span><span class="op" id="7948695">(</span><span class="op" id="7948696">)</span><span class="op" id="7948697">.</span><span class="op" id="7948698">(</span><span class="op" id="7948699">*</span><span class="ident" id="7948700"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="7948707">)</span><span class="op" id="7948708">)</span><span class="op" id="7948709">;</span>&nbsp;<span class="ident" id="7948711"><a href="/net/protoconn_test.go.html#7948660">err</a></span>&nbsp;<span class="op" id="7948715">!=</span>&nbsp;<span class="ident" id="7948718">nil</span>&nbsp;<span class="op" id="7948722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948726"><a href="/net/protoconn_test.go.html#7948137">t</a></span><span class="op" id="7948727">.</span><span class="ident" id="7948728">Fatalf</span><span class="op" id="7948734">(</span><span class="string" id="7948735">&#34;UDPConn.WriteToUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7948766">,</span>&nbsp;<span class="ident" id="7948768"><a href="/net/protoconn_test.go.html#7948660">err</a></span><span class="op" id="7948771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948777">if</span>&nbsp;<span class="ident" id="7948780">_</span><span class="op" id="7948781">,</span>&nbsp;<span class="ident" id="7948783">_</span><span class="op" id="7948784">,</span>&nbsp;<span class="ident" id="7948786">err</span>&nbsp;<span class="op" id="7948790">:=</span>&nbsp;<span class="ident" id="7948793"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948794">.</span><span class="ident" id="7948795">ReadFromUDP</span><span class="op" id="7948806">(</span><span class="ident" id="7948807"><a href="/net/protoconn_test.go.html#7948629">rb</a></span><span class="op" id="7948809">)</span><span class="op" id="7948810">;</span>&nbsp;<span class="ident" id="7948812"><a href="/net/protoconn_test.go.html#7948786">err</a></span>&nbsp;<span class="op" id="7948816">!=</span>&nbsp;<span class="ident" id="7948819">nil</span>&nbsp;<span class="op" id="7948823">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948827"><a href="/net/protoconn_test.go.html#7948137">t</a></span><span class="op" id="7948828">.</span><span class="ident" id="7948829">Fatalf</span><span class="op" id="7948835">(</span><span class="string" id="7948836">&#34;UDPConn.ReadFromUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7948868">,</span>&nbsp;<span class="ident" id="7948870"><a href="/net/protoconn_test.go.html#7948786">err</a></span><span class="op" id="7948873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7948876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7948879">if</span>&nbsp;<span class="ident" id="7948882">_</span><span class="op" id="7948883">,</span>&nbsp;<span class="ident" id="7948885">_</span><span class="op" id="7948886">,</span>&nbsp;<span class="ident" id="7948888">err</span>&nbsp;<span class="op" id="7948892">:=</span>&nbsp;<span class="ident" id="7948895"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948896">.</span><span class="ident" id="7948897">WriteMsgUDP</span><span class="op" id="7948908">(</span><span class="ident" id="7948909"><a href="/net/protoconn_test.go.html#7948599">wb</a></span><span class="op" id="7948911">,</span>&nbsp;<span class="ident" id="7948913">nil</span><span class="op" id="7948916">,</span>&nbsp;<span class="ident" id="7948918"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7948919">.</span><span class="ident" id="7948920">LocalAddr</span><span class="op" id="7948929">(</span><span class="op" id="7948930">)</span><span class="op" id="7948931">.</span><span class="op" id="7948932">(</span><span class="op" id="7948933">*</span><span class="ident" id="7948934"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="7948941">)</span><span class="op" id="7948942">)</span><span class="op" id="7948943">;</span>&nbsp;<span class="ident" id="7948945"><a href="/net/protoconn_test.go.html#7948888">err</a></span>&nbsp;<span class="op" id="7948949">!=</span>&nbsp;<span class="ident" id="7948952">nil</span>&nbsp;<span class="op" id="7948956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7948960"><a href="/net/protoconn_test.go.html#7945933">condFatalf</a></span><span class="op" id="7948970">(</span><span class="ident" id="7948971"><a href="/net/protoconn_test.go.html#7948137">t</a></span><span class="op" id="7948972">,</span>&nbsp;<span class="string" id="7948974">&#34;UDPConn.WriteMsgUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7949006">,</span>&nbsp;<span class="ident" id="7949008"><a href="/net/protoconn_test.go.html#7948888">err</a></span><span class="op" id="7949011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949014">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949017">if</span>&nbsp;<span class="ident" id="7949020">_</span><span class="op" id="7949021">,</span>&nbsp;<span class="ident" id="7949023">_</span><span class="op" id="7949024">,</span>&nbsp;<span class="ident" id="7949026">_</span><span class="op" id="7949027">,</span>&nbsp;<span class="ident" id="7949029">_</span><span class="op" id="7949030">,</span>&nbsp;<span class="ident" id="7949032">err</span>&nbsp;<span class="op" id="7949036">:=</span>&nbsp;<span class="ident" id="7949039"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7949040">.</span><span class="ident" id="7949041">ReadMsgUDP</span><span class="op" id="7949051">(</span><span class="ident" id="7949052"><a href="/net/protoconn_test.go.html#7948629">rb</a></span><span class="op" id="7949054">,</span>&nbsp;<span class="ident" id="7949056">nil</span><span class="op" id="7949059">)</span><span class="op" id="7949060">;</span>&nbsp;<span class="ident" id="7949062"><a href="/net/protoconn_test.go.html#7949032">err</a></span>&nbsp;<span class="op" id="7949066">!=</span>&nbsp;<span class="ident" id="7949069">nil</span>&nbsp;<span class="op" id="7949073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949077"><a href="/net/protoconn_test.go.html#7945933">condFatalf</a></span><span class="op" id="7949087">(</span><span class="ident" id="7949088"><a href="/net/protoconn_test.go.html#7948137">t</a></span><span class="op" id="7949089">,</span>&nbsp;<span class="string" id="7949091">&#34;UDPConn.ReadMsgUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7949122">,</span>&nbsp;<span class="ident" id="7949124"><a href="/net/protoconn_test.go.html#7949032">err</a></span><span class="op" id="7949127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949134">if</span>&nbsp;<span class="ident" id="7949137">f</span><span class="op" id="7949138">,</span>&nbsp;<span class="ident" id="7949140">err</span>&nbsp;<span class="op" id="7949144">:=</span>&nbsp;<span class="ident" id="7949147"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7949148">.</span><span class="ident" id="7949149">File</span><span class="op" id="7949153">(</span><span class="op" id="7949154">)</span><span class="op" id="7949155">;</span>&nbsp;<span class="ident" id="7949157"><a href="/net/protoconn_test.go.html#7949140">err</a></span>&nbsp;<span class="op" id="7949161">!=</span>&nbsp;<span class="ident" id="7949164">nil</span>&nbsp;<span class="op" id="7949168">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949172"><a href="/net/protoconn_test.go.html#7945933">condFatalf</a></span><span class="op" id="7949182">(</span><span class="ident" id="7949183"><a href="/net/protoconn_test.go.html#7948137">t</a></span><span class="op" id="7949184">,</span>&nbsp;<span class="string" id="7949186">&#34;UDPConn.File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7949211">,</span>&nbsp;<span class="ident" id="7949213"><a href="/net/protoconn_test.go.html#7949140">err</a></span><span class="op" id="7949216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949219">}</span>&nbsp;<span class="keyword" id="7949221">else</span>&nbsp;<span class="op" id="7949226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949230"><a href="/net/protoconn_test.go.html#7949137">f</a></span><span class="op" id="7949231">.</span><span class="ident" id="7949232">Close</span><span class="op" id="7949237">(</span><span class="op" id="7949238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949245">defer</span>&nbsp;<span class="keyword" id="7949251">func</span><span class="op" id="7949255">(</span><span class="op" id="7949256">)</span>&nbsp;<span class="op" id="7949258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949262">if</span>&nbsp;<span class="ident" id="7949265">p</span>&nbsp;<span class="op" id="7949267">:=</span>&nbsp;<span class="builtinfunc" id="7949270">recover</span><span class="op" id="7949277">(</span><span class="op" id="7949278">)</span><span class="op" id="7949279">;</span>&nbsp;<span class="ident" id="7949281"><a href="/net/protoconn_test.go.html#7949265">p</a></span>&nbsp;<span class="op" id="7949283">!=</span>&nbsp;<span class="ident" id="7949286">nil</span>&nbsp;<span class="op" id="7949290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949295"><a href="/net/protoconn_test.go.html#7948137">t</a></span><span class="op" id="7949296">.</span><span class="ident" id="7949297">Fatalf</span><span class="op" id="7949303">(</span><span class="string" id="7949304">&#34;UDPConn.WriteToUDP&nbsp;or&nbsp;WriteMsgUDP&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="7949352">,</span>&nbsp;<span class="ident" id="7949354"><a href="/net/protoconn_test.go.html#7949265">p</a></span><span class="op" id="7949355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949362">}</span><span class="op" id="7949363">(</span><span class="op" id="7949364">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949368"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7949369">.</span><span class="ident" id="7949370">WriteToUDP</span><span class="op" id="7949380">(</span><span class="ident" id="7949381"><a href="/net/protoconn_test.go.html#7948599">wb</a></span><span class="op" id="7949383">,</span>&nbsp;<span class="ident" id="7949385">nil</span><span class="op" id="7949388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949391"><a href="/net/protoconn_test.go.html#7948269">c</a></span><span class="op" id="7949392">.</span><span class="ident" id="7949393">WriteMsgUDP</span><span class="op" id="7949404">(</span><span class="ident" id="7949405"><a href="/net/protoconn_test.go.html#7948599">wb</a></span><span class="op" id="7949407">,</span>&nbsp;<span class="ident" id="7949409">nil</span><span class="op" id="7949412">,</span>&nbsp;<span class="ident" id="7949414">nil</span><span class="op" id="7949417">)</span><br>
<span class="lineno"></span><span class="op" id="7949419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="7949422">func</span>&nbsp;<span class="ident" id="7949427">TestIPConnSpecificMethods</span><span class="op" id="7949452">(</span><span class="ident" id="7949453">t</span>&nbsp;<span class="op" id="7949455">*</span><span class="ident" id="7949456"><a href="/net/protoconn_test.go.html#7945582">testing</a></span><span class="op" id="7949463">.</span><span class="ident" id="7949464">T</span><span class="op" id="7949465">)</span>&nbsp;<span class="op" id="7949467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949470">if</span>&nbsp;<span class="ident" id="7949473">skip</span><span class="op" id="7949477">,</span>&nbsp;<span class="ident" id="7949479">skipmsg</span>&nbsp;<span class="op" id="7949487">:=</span>&nbsp;<span class="ident" id="7949490"><a href="/net/ipraw_test.go.html#7904256">skipRawSocketTest</a></span><span class="op" id="7949507">(</span><span class="ident" id="7949508"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7949509">)</span><span class="op" id="7949510">;</span>&nbsp;<span class="ident" id="7949512"><a href="/net/protoconn_test.go.html#7949473">skip</a></span>&nbsp;<span class="op" id="7949517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949521"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7949522">.</span><span class="ident" id="7949523">Skip</span><span class="op" id="7949527">(</span><span class="ident" id="7949528"><a href="/net/protoconn_test.go.html#7949479">skipmsg</a></span><span class="op" id="7949535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949542">la</span><span class="op" id="7949544">,</span>&nbsp;<span class="ident" id="7949546">err</span>&nbsp;<span class="op" id="7949550">:=</span>&nbsp;<span class="ident" id="7949553"><a href="/net/iprawsock.go.html#1432625">ResolveIPAddr</a></span><span class="op" id="7949566">(</span><span class="string" id="7949567">&#34;ip4&#34;</span><span class="op" id="7949572">,</span>&nbsp;<span class="string" id="7949574">&#34;127.0.0.1&#34;</span><span class="op" id="7949585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949588">if</span>&nbsp;<span class="ident" id="7949591"><a href="/net/protoconn_test.go.html#7949546">err</a></span>&nbsp;<span class="op" id="7949595">!=</span>&nbsp;<span class="ident" id="7949598">nil</span>&nbsp;<span class="op" id="7949602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949606"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7949607">.</span><span class="ident" id="7949608">Fatalf</span><span class="op" id="7949614">(</span><span class="string" id="7949615">&#34;ResolveIPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7949641">,</span>&nbsp;<span class="ident" id="7949643"><a href="/net/protoconn_test.go.html#7949546">err</a></span><span class="op" id="7949646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949652">c</span><span class="op" id="7949653">,</span>&nbsp;<span class="ident" id="7949655"><a href="/net/protoconn_test.go.html#7949546">err</a></span>&nbsp;<span class="op" id="7949659">:=</span>&nbsp;<span class="ident" id="7949662"><a href="/net/iprawsock_posix.go.html#1439614">ListenIP</a></span><span class="op" id="7949670">(</span><span class="string" id="7949671">&#34;ip4:icmp&#34;</span><span class="op" id="7949681">,</span>&nbsp;<span class="ident" id="7949683"><a href="/net/protoconn_test.go.html#7949542">la</a></span><span class="op" id="7949685">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949688">if</span>&nbsp;<span class="ident" id="7949691"><a href="/net/protoconn_test.go.html#7949546">err</a></span>&nbsp;<span class="op" id="7949695">!=</span>&nbsp;<span class="ident" id="7949698">nil</span>&nbsp;<span class="op" id="7949702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949706"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7949707">.</span><span class="ident" id="7949708">Fatalf</span><span class="op" id="7949714">(</span><span class="string" id="7949715">&#34;ListenIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7949736">,</span>&nbsp;<span class="ident" id="7949738"><a href="/net/protoconn_test.go.html#7949546">err</a></span><span class="op" id="7949741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7949744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7949747">defer</span>&nbsp;<span class="ident" id="7949753"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7949754">.</span><span class="ident" id="7949755">Close</span><span class="op" id="7949760">(</span><span class="op" id="7949761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949764"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7949765">.</span><span class="ident" id="7949766">LocalAddr</span><span class="op" id="7949775">(</span><span class="op" id="7949776">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949779"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7949780">.</span><span class="ident" id="7949781">RemoteAddr</span><span class="op" id="7949791">(</span><span class="op" id="7949792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949795"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7949796">.</span><span class="ident" id="7949797">SetDeadline</span><span class="op" id="7949808">(</span><span class="ident" id="7949809"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7949813">.</span><span class="ident" id="7949814">Now</span><span class="op" id="7949817">(</span><span class="op" id="7949818">)</span><span class="op" id="7949819">.</span><span class="ident" id="7949820">Add</span><span class="op" id="7949823">(</span><span class="ident" id="7949824"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7949835">)</span><span class="op" id="7949836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949839"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7949840">.</span><span class="ident" id="7949841">SetReadDeadline</span><span class="op" id="7949856">(</span><span class="ident" id="7949857"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7949861">.</span><span class="ident" id="7949862">Now</span><span class="op" id="7949865">(</span><span class="op" id="7949866">)</span><span class="op" id="7949867">.</span><span class="ident" id="7949868">Add</span><span class="op" id="7949871">(</span><span class="ident" id="7949872"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7949883">)</span><span class="op" id="7949884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949887"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7949888">.</span><span class="ident" id="7949889">SetWriteDeadline</span><span class="op" id="7949905">(</span><span class="ident" id="7949906"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7949910">.</span><span class="ident" id="7949911">Now</span><span class="op" id="7949914">(</span><span class="op" id="7949915">)</span><span class="op" id="7949916">.</span><span class="ident" id="7949917">Add</span><span class="op" id="7949920">(</span><span class="ident" id="7949921"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7949932">)</span><span class="op" id="7949933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949936"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7949937">.</span><span class="ident" id="7949938">SetReadBuffer</span><span class="op" id="7949951">(</span><span class="num" id="7949952">2048</span><span class="op" id="7949956">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949959"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7949960">.</span><span class="ident" id="7949961">SetWriteBuffer</span><span class="op" id="7949975">(</span><span class="num" id="7949976">2048</span><span class="op" id="7949980">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7949984">wb</span><span class="op" id="7949986">,</span>&nbsp;<span class="ident" id="7949988"><a href="/net/protoconn_test.go.html#7949546">err</a></span>&nbsp;<span class="op" id="7949992">:=</span>&nbsp;<span class="op" id="7949995">(</span><span class="op" id="7949996">&amp;</span><span class="ident" id="7949997"><a href="/net/mockicmp_test.go.html#7921437">icmpMessage</a></span><span class="op" id="7950008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950012">Type</span><span class="op" id="7950016">:</span>&nbsp;<span class="ident" id="7950018"><a href="/net/mockicmp_test.go.html#7921291">icmpv4EchoRequest</a></span><span class="op" id="7950035">,</span>&nbsp;<span class="ident" id="7950037">Code</span><span class="op" id="7950041">:</span>&nbsp;<span class="num" id="7950043">0</span><span class="op" id="7950044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950048">Body</span><span class="op" id="7950052">:</span>&nbsp;<span class="op" id="7950054">&amp;</span><span class="ident" id="7950055"><a href="/net/mockicmp_test.go.html#7923095">icmpEcho</a></span><span class="op" id="7950063">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950068">ID</span><span class="op" id="7950070">:</span>&nbsp;<span class="ident" id="7950072"><a href="/net/protoconn_test.go.html#7945565">os</a></span><span class="op" id="7950074">.</span><span class="ident" id="7950075">Getpid</span><span class="op" id="7950081">(</span><span class="op" id="7950082">)</span>&nbsp;<span class="op" id="7950084">&amp;</span>&nbsp;<span class="num" id="7950086">0xffff</span><span class="op" id="7950092">,</span>&nbsp;<span class="ident" id="7950094">Seq</span><span class="op" id="7950097">:</span>&nbsp;<span class="num" id="7950099">1</span><span class="op" id="7950100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950105">Data</span><span class="op" id="7950109">:</span>&nbsp;<span class="op" id="7950111">[</span><span class="op" id="7950112">]</span><span class="builtintype" id="7950113">byte</span><span class="op" id="7950117">(</span><span class="string" id="7950118">&#34;IPCONN&nbsp;TEST&nbsp;&#34;</span><span class="op" id="7950132">)</span><span class="op" id="7950133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950137">}</span><span class="op" id="7950138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950141">}</span><span class="op" id="7950142">)</span><span class="op" id="7950143">.</span><span class="ident" id="7950144">Marshal</span><span class="op" id="7950151">(</span><span class="op" id="7950152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950155">if</span>&nbsp;<span class="ident" id="7950158"><a href="/net/protoconn_test.go.html#7949546">err</a></span>&nbsp;<span class="op" id="7950162">!=</span>&nbsp;<span class="ident" id="7950165">nil</span>&nbsp;<span class="op" id="7950169">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950173"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7950174">.</span><span class="ident" id="7950175">Fatalf</span><span class="op" id="7950181">(</span><span class="string" id="7950182">&#34;icmpMessage.Marshal&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7950214">,</span>&nbsp;<span class="ident" id="7950216"><a href="/net/protoconn_test.go.html#7949546">err</a></span><span class="op" id="7950219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950225">rb</span>&nbsp;<span class="op" id="7950228">:=</span>&nbsp;<span class="builtinfunc" id="7950231">make</span><span class="op" id="7950235">(</span><span class="op" id="7950236">[</span><span class="op" id="7950237">]</span><span class="builtintype" id="7950238">byte</span><span class="op" id="7950242">,</span>&nbsp;<span class="num" id="7950244">20</span><span class="op" id="7950246">+</span><span class="builtinfunc" id="7950247">len</span><span class="op" id="7950250">(</span><span class="ident" id="7950251"><a href="/net/protoconn_test.go.html#7949984">wb</a></span><span class="op" id="7950253">)</span><span class="op" id="7950254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950257">if</span>&nbsp;<span class="ident" id="7950260">_</span><span class="op" id="7950261">,</span>&nbsp;<span class="ident" id="7950263">err</span>&nbsp;<span class="op" id="7950267">:=</span>&nbsp;<span class="ident" id="7950270"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7950271">.</span><span class="ident" id="7950272">WriteToIP</span><span class="op" id="7950281">(</span><span class="ident" id="7950282"><a href="/net/protoconn_test.go.html#7949984">wb</a></span><span class="op" id="7950284">,</span>&nbsp;<span class="ident" id="7950286"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7950287">.</span><span class="ident" id="7950288">LocalAddr</span><span class="op" id="7950297">(</span><span class="op" id="7950298">)</span><span class="op" id="7950299">.</span><span class="op" id="7950300">(</span><span class="op" id="7950301">*</span><span class="ident" id="7950302"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="7950308">)</span><span class="op" id="7950309">)</span><span class="op" id="7950310">;</span>&nbsp;<span class="ident" id="7950312"><a href="/net/protoconn_test.go.html#7950263">err</a></span>&nbsp;<span class="op" id="7950316">!=</span>&nbsp;<span class="ident" id="7950319">nil</span>&nbsp;<span class="op" id="7950323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950327"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7950328">.</span><span class="ident" id="7950329">Fatalf</span><span class="op" id="7950335">(</span><span class="string" id="7950336">&#34;IPConn.WriteToIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7950365">,</span>&nbsp;<span class="ident" id="7950367"><a href="/net/protoconn_test.go.html#7950263">err</a></span><span class="op" id="7950370">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950376">if</span>&nbsp;<span class="ident" id="7950379">_</span><span class="op" id="7950380">,</span>&nbsp;<span class="ident" id="7950382">_</span><span class="op" id="7950383">,</span>&nbsp;<span class="ident" id="7950385">err</span>&nbsp;<span class="op" id="7950389">:=</span>&nbsp;<span class="ident" id="7950392"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7950393">.</span><span class="ident" id="7950394">ReadFromIP</span><span class="op" id="7950404">(</span><span class="ident" id="7950405"><a href="/net/protoconn_test.go.html#7950225">rb</a></span><span class="op" id="7950407">)</span><span class="op" id="7950408">;</span>&nbsp;<span class="ident" id="7950410"><a href="/net/protoconn_test.go.html#7950385">err</a></span>&nbsp;<span class="op" id="7950414">!=</span>&nbsp;<span class="ident" id="7950417">nil</span>&nbsp;<span class="op" id="7950421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950425"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7950426">.</span><span class="ident" id="7950427">Fatalf</span><span class="op" id="7950433">(</span><span class="string" id="7950434">&#34;IPConn.ReadFromIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7950464">,</span>&nbsp;<span class="ident" id="7950466"><a href="/net/protoconn_test.go.html#7950385">err</a></span><span class="op" id="7950469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950475">if</span>&nbsp;<span class="ident" id="7950478">_</span><span class="op" id="7950479">,</span>&nbsp;<span class="ident" id="7950481">_</span><span class="op" id="7950482">,</span>&nbsp;<span class="ident" id="7950484">err</span>&nbsp;<span class="op" id="7950488">:=</span>&nbsp;<span class="ident" id="7950491"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7950492">.</span><span class="ident" id="7950493">WriteMsgIP</span><span class="op" id="7950503">(</span><span class="ident" id="7950504"><a href="/net/protoconn_test.go.html#7949984">wb</a></span><span class="op" id="7950506">,</span>&nbsp;<span class="ident" id="7950508">nil</span><span class="op" id="7950511">,</span>&nbsp;<span class="ident" id="7950513"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7950514">.</span><span class="ident" id="7950515">LocalAddr</span><span class="op" id="7950524">(</span><span class="op" id="7950525">)</span><span class="op" id="7950526">.</span><span class="op" id="7950527">(</span><span class="op" id="7950528">*</span><span class="ident" id="7950529"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="7950535">)</span><span class="op" id="7950536">)</span><span class="op" id="7950537">;</span>&nbsp;<span class="ident" id="7950539"><a href="/net/protoconn_test.go.html#7950484">err</a></span>&nbsp;<span class="op" id="7950543">!=</span>&nbsp;<span class="ident" id="7950546">nil</span>&nbsp;<span class="op" id="7950550">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950554"><a href="/net/protoconn_test.go.html#7945933">condFatalf</a></span><span class="op" id="7950564">(</span><span class="ident" id="7950565"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7950566">,</span>&nbsp;<span class="string" id="7950568">&#34;IPConn.WriteMsgIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7950598">,</span>&nbsp;<span class="ident" id="7950600"><a href="/net/protoconn_test.go.html#7950484">err</a></span><span class="op" id="7950603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950609">if</span>&nbsp;<span class="ident" id="7950612">_</span><span class="op" id="7950613">,</span>&nbsp;<span class="ident" id="7950615">_</span><span class="op" id="7950616">,</span>&nbsp;<span class="ident" id="7950618">_</span><span class="op" id="7950619">,</span>&nbsp;<span class="ident" id="7950621">_</span><span class="op" id="7950622">,</span>&nbsp;<span class="ident" id="7950624">err</span>&nbsp;<span class="op" id="7950628">:=</span>&nbsp;<span class="ident" id="7950631"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7950632">.</span><span class="ident" id="7950633">ReadMsgIP</span><span class="op" id="7950642">(</span><span class="ident" id="7950643"><a href="/net/protoconn_test.go.html#7950225">rb</a></span><span class="op" id="7950645">,</span>&nbsp;<span class="ident" id="7950647">nil</span><span class="op" id="7950650">)</span><span class="op" id="7950651">;</span>&nbsp;<span class="ident" id="7950653"><a href="/net/protoconn_test.go.html#7950624">err</a></span>&nbsp;<span class="op" id="7950657">!=</span>&nbsp;<span class="ident" id="7950660">nil</span>&nbsp;<span class="op" id="7950664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950668"><a href="/net/protoconn_test.go.html#7945933">condFatalf</a></span><span class="op" id="7950678">(</span><span class="ident" id="7950679"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7950680">,</span>&nbsp;<span class="string" id="7950682">&#34;IPConn.ReadMsgIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7950711">,</span>&nbsp;<span class="ident" id="7950713"><a href="/net/protoconn_test.go.html#7950624">err</a></span><span class="op" id="7950716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950719">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950723">if</span>&nbsp;<span class="ident" id="7950726">f</span><span class="op" id="7950727">,</span>&nbsp;<span class="ident" id="7950729">err</span>&nbsp;<span class="op" id="7950733">:=</span>&nbsp;<span class="ident" id="7950736"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7950737">.</span><span class="ident" id="7950738">File</span><span class="op" id="7950742">(</span><span class="op" id="7950743">)</span><span class="op" id="7950744">;</span>&nbsp;<span class="ident" id="7950746"><a href="/net/protoconn_test.go.html#7950729">err</a></span>&nbsp;<span class="op" id="7950750">!=</span>&nbsp;<span class="ident" id="7950753">nil</span>&nbsp;<span class="op" id="7950757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950761"><a href="/net/protoconn_test.go.html#7945933">condFatalf</a></span><span class="op" id="7950771">(</span><span class="ident" id="7950772"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7950773">,</span>&nbsp;<span class="string" id="7950775">&#34;IPConn.File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7950799">,</span>&nbsp;<span class="ident" id="7950801"><a href="/net/protoconn_test.go.html#7950729">err</a></span><span class="op" id="7950804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950807">}</span>&nbsp;<span class="keyword" id="7950809">else</span>&nbsp;<span class="op" id="7950814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950818"><a href="/net/protoconn_test.go.html#7950726">f</a></span><span class="op" id="7950819">.</span><span class="ident" id="7950820">Close</span><span class="op" id="7950825">(</span><span class="op" id="7950826">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950833">defer</span>&nbsp;<span class="keyword" id="7950839">func</span><span class="op" id="7950843">(</span><span class="op" id="7950844">)</span>&nbsp;<span class="op" id="7950846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7950850">if</span>&nbsp;<span class="ident" id="7950853">p</span>&nbsp;<span class="op" id="7950855">:=</span>&nbsp;<span class="builtinfunc" id="7950858">recover</span><span class="op" id="7950865">(</span><span class="op" id="7950866">)</span><span class="op" id="7950867">;</span>&nbsp;<span class="ident" id="7950869"><a href="/net/protoconn_test.go.html#7950853">p</a></span>&nbsp;<span class="op" id="7950871">!=</span>&nbsp;<span class="ident" id="7950874">nil</span>&nbsp;<span class="op" id="7950878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950883"><a href="/net/protoconn_test.go.html#7949453">t</a></span><span class="op" id="7950884">.</span><span class="ident" id="7950885">Fatalf</span><span class="op" id="7950891">(</span><span class="string" id="7950892">&#34;IPConn.WriteToIP&nbsp;or&nbsp;WriteMsgIP&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="7950937">,</span>&nbsp;<span class="ident" id="7950939"><a href="/net/protoconn_test.go.html#7950853">p</a></span><span class="op" id="7950940">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7950947">}</span><span class="op" id="7950948">(</span><span class="op" id="7950949">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950953"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7950954">.</span><span class="ident" id="7950955">WriteToIP</span><span class="op" id="7950964">(</span><span class="ident" id="7950965"><a href="/net/protoconn_test.go.html#7949984">wb</a></span><span class="op" id="7950967">,</span>&nbsp;<span class="ident" id="7950969">nil</span><span class="op" id="7950972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7950975"><a href="/net/protoconn_test.go.html#7949652">c</a></span><span class="op" id="7950976">.</span><span class="ident" id="7950977">WriteMsgIP</span><span class="op" id="7950987">(</span><span class="ident" id="7950988"><a href="/net/protoconn_test.go.html#7949984">wb</a></span><span class="op" id="7950990">,</span>&nbsp;<span class="ident" id="7950992">nil</span><span class="op" id="7950995">,</span>&nbsp;<span class="ident" id="7950997">nil</span><span class="op" id="7951000">)</span><br>
<span class="lineno">235</span><span class="op" id="7951002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7951005">func</span>&nbsp;<span class="ident" id="7951010">TestUnixListenerSpecificMethods</span><span class="op" id="7951041">(</span><span class="ident" id="7951042">t</span>&nbsp;<span class="op" id="7951044">*</span><span class="ident" id="7951045"><a href="/net/protoconn_test.go.html#7945582">testing</a></span><span class="op" id="7951052">.</span><span class="ident" id="7951053">T</span><span class="op" id="7951054">)</span>&nbsp;<span class="op" id="7951056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951059">switch</span>&nbsp;<span class="ident" id="7951066"><a href="/net/protoconn_test.go.html#7945571">runtime</a></span><span class="op" id="7951073">.</span><span class="ident" id="7951074">GOOS</span>&nbsp;<span class="op" id="7951079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951082">case</span>&nbsp;<span class="string" id="7951087">&#34;nacl&#34;</span><span class="op" id="7951093">,</span>&nbsp;<span class="string" id="7951095">&#34;plan9&#34;</span><span class="op" id="7951102">,</span>&nbsp;<span class="string" id="7951104">&#34;windows&#34;</span><span class="op" id="7951113">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951117"><a href="/net/protoconn_test.go.html#7951042">t</a></span><span class="op" id="7951118">.</span><span class="ident" id="7951119">Skipf</span><span class="op" id="7951124">(</span><span class="string" id="7951125">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7951146">,</span>&nbsp;<span class="ident" id="7951148"><a href="/net/protoconn_test.go.html#7945571">runtime</a></span><span class="op" id="7951155">.</span><span class="ident" id="7951156">GOOS</span><span class="op" id="7951160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951167">addr</span>&nbsp;<span class="op" id="7951172">:=</span>&nbsp;<span class="ident" id="7951175"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7951187">(</span><span class="op" id="7951188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951191">la</span><span class="op" id="7951193">,</span>&nbsp;<span class="ident" id="7951195">err</span>&nbsp;<span class="op" id="7951199">:=</span>&nbsp;<span class="ident" id="7951202"><a href="/net/unixsock.go.html#1526926">ResolveUnixAddr</a></span><span class="op" id="7951217">(</span><span class="string" id="7951218">&#34;unix&#34;</span><span class="op" id="7951224">,</span>&nbsp;<span class="ident" id="7951226"><a href="/net/protoconn_test.go.html#7951167">addr</a></span><span class="op" id="7951230">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951233">if</span>&nbsp;<span class="ident" id="7951236"><a href="/net/protoconn_test.go.html#7951195">err</a></span>&nbsp;<span class="op" id="7951240">!=</span>&nbsp;<span class="ident" id="7951243">nil</span>&nbsp;<span class="op" id="7951247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951251"><a href="/net/protoconn_test.go.html#7951042">t</a></span><span class="op" id="7951252">.</span><span class="ident" id="7951253">Fatalf</span><span class="op" id="7951259">(</span><span class="string" id="7951260">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7951288">,</span>&nbsp;<span class="ident" id="7951290"><a href="/net/protoconn_test.go.html#7951195">err</a></span><span class="op" id="7951293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951299">ln</span><span class="op" id="7951301">,</span>&nbsp;<span class="ident" id="7951303"><a href="/net/protoconn_test.go.html#7951195">err</a></span>&nbsp;<span class="op" id="7951307">:=</span>&nbsp;<span class="ident" id="7951310"><a href="/net/unixsock_posix.go.html#1534323">ListenUnix</a></span><span class="op" id="7951320">(</span><span class="string" id="7951321">&#34;unix&#34;</span><span class="op" id="7951327">,</span>&nbsp;<span class="ident" id="7951329"><a href="/net/protoconn_test.go.html#7951191">la</a></span><span class="op" id="7951331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951334">if</span>&nbsp;<span class="ident" id="7951337"><a href="/net/protoconn_test.go.html#7951195">err</a></span>&nbsp;<span class="op" id="7951341">!=</span>&nbsp;<span class="ident" id="7951344">nil</span>&nbsp;<span class="op" id="7951348">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951352"><a href="/net/protoconn_test.go.html#7951042">t</a></span><span class="op" id="7951353">.</span><span class="ident" id="7951354">Fatalf</span><span class="op" id="7951360">(</span><span class="string" id="7951361">&#34;ListenUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7951384">,</span>&nbsp;<span class="ident" id="7951386"><a href="/net/protoconn_test.go.html#7951195">err</a></span><span class="op" id="7951389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951395">defer</span>&nbsp;<span class="ident" id="7951401"><a href="/net/protoconn_test.go.html#7951299">ln</a></span><span class="op" id="7951403">.</span><span class="ident" id="7951404">Close</span><span class="op" id="7951409">(</span><span class="op" id="7951410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951413">defer</span>&nbsp;<span class="ident" id="7951419"><a href="/net/protoconn_test.go.html#7945565">os</a></span><span class="op" id="7951421">.</span><span class="ident" id="7951422">Remove</span><span class="op" id="7951428">(</span><span class="ident" id="7951429"><a href="/net/protoconn_test.go.html#7951167">addr</a></span><span class="op" id="7951433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951436"><a href="/net/protoconn_test.go.html#7951299">ln</a></span><span class="op" id="7951438">.</span><span class="ident" id="7951439">Addr</span><span class="op" id="7951443">(</span><span class="op" id="7951444">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951447"><a href="/net/protoconn_test.go.html#7951299">ln</a></span><span class="op" id="7951449">.</span><span class="ident" id="7951450">SetDeadline</span><span class="op" id="7951461">(</span><span class="ident" id="7951462"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7951466">.</span><span class="ident" id="7951467">Now</span><span class="op" id="7951470">(</span><span class="op" id="7951471">)</span><span class="op" id="7951472">.</span><span class="ident" id="7951473">Add</span><span class="op" id="7951476">(</span><span class="num" id="7951477">30</span>&nbsp;<span class="op" id="7951480">*</span>&nbsp;<span class="ident" id="7951482"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7951486">.</span><span class="ident" id="7951487">Nanosecond</span><span class="op" id="7951497">)</span><span class="op" id="7951498">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951502">if</span>&nbsp;<span class="ident" id="7951505">c</span><span class="op" id="7951506">,</span>&nbsp;<span class="ident" id="7951508">err</span>&nbsp;<span class="op" id="7951512">:=</span>&nbsp;<span class="ident" id="7951515"><a href="/net/protoconn_test.go.html#7951299">ln</a></span><span class="op" id="7951517">.</span><span class="ident" id="7951518">Accept</span><span class="op" id="7951524">(</span><span class="op" id="7951525">)</span><span class="op" id="7951526">;</span>&nbsp;<span class="ident" id="7951528"><a href="/net/protoconn_test.go.html#7951508">err</a></span>&nbsp;<span class="op" id="7951532">!=</span>&nbsp;<span class="ident" id="7951535">nil</span>&nbsp;<span class="op" id="7951539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951543">if</span>&nbsp;<span class="op" id="7951546">!</span><span class="ident" id="7951547"><a href="/net/protoconn_test.go.html#7951508">err</a></span><span class="op" id="7951550">.</span><span class="op" id="7951551">(</span><span class="ident" id="7951552"><a href="/net/net.go.html#1469488">Error</a></span><span class="op" id="7951557">)</span><span class="op" id="7951558">.</span><span class="ident" id="7951559">Timeout</span><span class="op" id="7951566">(</span><span class="op" id="7951567">)</span>&nbsp;<span class="op" id="7951569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951574"><a href="/net/protoconn_test.go.html#7951042">t</a></span><span class="op" id="7951575">.</span><span class="ident" id="7951576">Fatalf</span><span class="op" id="7951582">(</span><span class="string" id="7951583">&#34;UnixListener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7951615">,</span>&nbsp;<span class="ident" id="7951617"><a href="/net/protoconn_test.go.html#7951508">err</a></span><span class="op" id="7951620">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951627">}</span>&nbsp;<span class="keyword" id="7951629">else</span>&nbsp;<span class="op" id="7951634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951638"><a href="/net/protoconn_test.go.html#7951505">c</a></span><span class="op" id="7951639">.</span><span class="ident" id="7951640">Close</span><span class="op" id="7951645">(</span><span class="op" id="7951646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951652">if</span>&nbsp;<span class="ident" id="7951655">c</span><span class="op" id="7951656">,</span>&nbsp;<span class="ident" id="7951658">err</span>&nbsp;<span class="op" id="7951662">:=</span>&nbsp;<span class="ident" id="7951665"><a href="/net/protoconn_test.go.html#7951299">ln</a></span><span class="op" id="7951667">.</span><span class="ident" id="7951668">AcceptUnix</span><span class="op" id="7951678">(</span><span class="op" id="7951679">)</span><span class="op" id="7951680">;</span>&nbsp;<span class="ident" id="7951682"><a href="/net/protoconn_test.go.html#7951658">err</a></span>&nbsp;<span class="op" id="7951686">!=</span>&nbsp;<span class="ident" id="7951689">nil</span>&nbsp;<span class="op" id="7951693">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951697">if</span>&nbsp;<span class="op" id="7951700">!</span><span class="ident" id="7951701"><a href="/net/protoconn_test.go.html#7951658">err</a></span><span class="op" id="7951704">.</span><span class="op" id="7951705">(</span><span class="ident" id="7951706"><a href="/net/net.go.html#1469488">Error</a></span><span class="op" id="7951711">)</span><span class="op" id="7951712">.</span><span class="ident" id="7951713">Timeout</span><span class="op" id="7951720">(</span><span class="op" id="7951721">)</span>&nbsp;<span class="op" id="7951723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951728"><a href="/net/protoconn_test.go.html#7951042">t</a></span><span class="op" id="7951729">.</span><span class="ident" id="7951730">Fatalf</span><span class="op" id="7951736">(</span><span class="string" id="7951737">&#34;UnixListener.AcceptUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7951773">,</span>&nbsp;<span class="ident" id="7951775"><a href="/net/protoconn_test.go.html#7951658">err</a></span><span class="op" id="7951778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951785">}</span>&nbsp;<span class="keyword" id="7951787">else</span>&nbsp;<span class="op" id="7951792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951796"><a href="/net/protoconn_test.go.html#7951655">c</a></span><span class="op" id="7951797">.</span><span class="ident" id="7951798">Close</span><span class="op" id="7951803">(</span><span class="op" id="7951804">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951811">if</span>&nbsp;<span class="ident" id="7951814">f</span><span class="op" id="7951815">,</span>&nbsp;<span class="ident" id="7951817">err</span>&nbsp;<span class="op" id="7951821">:=</span>&nbsp;<span class="ident" id="7951824"><a href="/net/protoconn_test.go.html#7951299">ln</a></span><span class="op" id="7951826">.</span><span class="ident" id="7951827">File</span><span class="op" id="7951831">(</span><span class="op" id="7951832">)</span><span class="op" id="7951833">;</span>&nbsp;<span class="ident" id="7951835"><a href="/net/protoconn_test.go.html#7951817">err</a></span>&nbsp;<span class="op" id="7951839">!=</span>&nbsp;<span class="ident" id="7951842">nil</span>&nbsp;<span class="op" id="7951846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951850"><a href="/net/protoconn_test.go.html#7951042">t</a></span><span class="op" id="7951851">.</span><span class="ident" id="7951852">Fatalf</span><span class="op" id="7951858">(</span><span class="string" id="7951859">&#34;UnixListener.File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7951889">,</span>&nbsp;<span class="ident" id="7951891"><a href="/net/protoconn_test.go.html#7951817">err</a></span><span class="op" id="7951894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951897">}</span>&nbsp;<span class="keyword" id="7951899">else</span>&nbsp;<span class="op" id="7951904">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7951908"><a href="/net/protoconn_test.go.html#7951814">f</a></span><span class="op" id="7951909">.</span><span class="ident" id="7951910">Close</span><span class="op" id="7951915">(</span><span class="op" id="7951916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951919">}</span><br>
<span class="lineno"></span><span class="op" id="7951921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7951924">func</span>&nbsp;<span class="ident" id="7951929">TestUnixConnSpecificMethods</span><span class="op" id="7951956">(</span><span class="ident" id="7951957">t</span>&nbsp;<span class="op" id="7951959">*</span><span class="ident" id="7951960"><a href="/net/protoconn_test.go.html#7945582">testing</a></span><span class="op" id="7951967">.</span><span class="ident" id="7951968">T</span><span class="op" id="7951969">)</span>&nbsp;<span class="op" id="7951971">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951974">switch</span>&nbsp;<span class="ident" id="7951981"><a href="/net/protoconn_test.go.html#7945571">runtime</a></span><span class="op" id="7951988">.</span><span class="ident" id="7951989">GOOS</span>&nbsp;<span class="op" id="7951994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951997">case</span>&nbsp;<span class="string" id="7952002">&#34;nacl&#34;</span><span class="op" id="7952008">,</span>&nbsp;<span class="string" id="7952010">&#34;plan9&#34;</span><span class="op" id="7952017">,</span>&nbsp;<span class="string" id="7952019">&#34;windows&#34;</span><span class="op" id="7952028">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952032"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7952033">.</span><span class="ident" id="7952034">Skipf</span><span class="op" id="7952039">(</span><span class="string" id="7952040">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7952061">,</span>&nbsp;<span class="ident" id="7952063"><a href="/net/protoconn_test.go.html#7945571">runtime</a></span><span class="op" id="7952070">.</span><span class="ident" id="7952071">GOOS</span><span class="op" id="7952075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952082">addr1</span><span class="op" id="7952087">,</span>&nbsp;<span class="ident" id="7952089">addr2</span><span class="op" id="7952094">,</span>&nbsp;<span class="ident" id="7952096">addr3</span>&nbsp;<span class="op" id="7952102">:=</span>&nbsp;<span class="ident" id="7952105"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7952117">(</span><span class="op" id="7952118">)</span><span class="op" id="7952119">,</span>&nbsp;<span class="ident" id="7952121"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7952133">(</span><span class="op" id="7952134">)</span><span class="op" id="7952135">,</span>&nbsp;<span class="ident" id="7952137"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7952149">(</span><span class="op" id="7952150">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952154">a1</span><span class="op" id="7952156">,</span>&nbsp;<span class="ident" id="7952158">err</span>&nbsp;<span class="op" id="7952162">:=</span>&nbsp;<span class="ident" id="7952165"><a href="/net/unixsock.go.html#1526926">ResolveUnixAddr</a></span><span class="op" id="7952180">(</span><span class="string" id="7952181">&#34;unixgram&#34;</span><span class="op" id="7952191">,</span>&nbsp;<span class="ident" id="7952193"><a href="/net/protoconn_test.go.html#7952082">addr1</a></span><span class="op" id="7952198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952201">if</span>&nbsp;<span class="ident" id="7952204"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7952208">!=</span>&nbsp;<span class="ident" id="7952211">nil</span>&nbsp;<span class="op" id="7952215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952219"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7952220">.</span><span class="ident" id="7952221">Fatalf</span><span class="op" id="7952227">(</span><span class="string" id="7952228">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7952256">,</span>&nbsp;<span class="ident" id="7952258"><a href="/net/protoconn_test.go.html#7952158">err</a></span><span class="op" id="7952261">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952267">c1</span><span class="op" id="7952269">,</span>&nbsp;<span class="ident" id="7952271"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7952275">:=</span>&nbsp;<span class="ident" id="7952278"><a href="/net/unixsock_posix.go.html#1533427">DialUnix</a></span><span class="op" id="7952286">(</span><span class="string" id="7952287">&#34;unixgram&#34;</span><span class="op" id="7952297">,</span>&nbsp;<span class="ident" id="7952299"><a href="/net/protoconn_test.go.html#7952154">a1</a></span><span class="op" id="7952301">,</span>&nbsp;<span class="ident" id="7952303">nil</span><span class="op" id="7952306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952309">if</span>&nbsp;<span class="ident" id="7952312"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7952316">!=</span>&nbsp;<span class="ident" id="7952319">nil</span>&nbsp;<span class="op" id="7952323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952327"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7952328">.</span><span class="ident" id="7952329">Fatalf</span><span class="op" id="7952335">(</span><span class="string" id="7952336">&#34;DialUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7952357">,</span>&nbsp;<span class="ident" id="7952359"><a href="/net/protoconn_test.go.html#7952158">err</a></span><span class="op" id="7952362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952365">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952368">defer</span>&nbsp;<span class="ident" id="7952374"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7952376">.</span><span class="ident" id="7952377">Close</span><span class="op" id="7952382">(</span><span class="op" id="7952383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952386">defer</span>&nbsp;<span class="ident" id="7952392"><a href="/net/protoconn_test.go.html#7945565">os</a></span><span class="op" id="7952394">.</span><span class="ident" id="7952395">Remove</span><span class="op" id="7952401">(</span><span class="ident" id="7952402"><a href="/net/protoconn_test.go.html#7952082">addr1</a></span><span class="op" id="7952407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952410"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7952412">.</span><span class="ident" id="7952413">LocalAddr</span><span class="op" id="7952422">(</span><span class="op" id="7952423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952426"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7952428">.</span><span class="ident" id="7952429">RemoteAddr</span><span class="op" id="7952439">(</span><span class="op" id="7952440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952443"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7952445">.</span><span class="ident" id="7952446">SetDeadline</span><span class="op" id="7952457">(</span><span class="ident" id="7952458"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7952462">.</span><span class="ident" id="7952463">Now</span><span class="op" id="7952466">(</span><span class="op" id="7952467">)</span><span class="op" id="7952468">.</span><span class="ident" id="7952469">Add</span><span class="op" id="7952472">(</span><span class="ident" id="7952473"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7952484">)</span><span class="op" id="7952485">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952488"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7952490">.</span><span class="ident" id="7952491">SetReadDeadline</span><span class="op" id="7952506">(</span><span class="ident" id="7952507"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7952511">.</span><span class="ident" id="7952512">Now</span><span class="op" id="7952515">(</span><span class="op" id="7952516">)</span><span class="op" id="7952517">.</span><span class="ident" id="7952518">Add</span><span class="op" id="7952521">(</span><span class="ident" id="7952522"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7952533">)</span><span class="op" id="7952534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952537"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7952539">.</span><span class="ident" id="7952540">SetWriteDeadline</span><span class="op" id="7952556">(</span><span class="ident" id="7952557"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7952561">.</span><span class="ident" id="7952562">Now</span><span class="op" id="7952565">(</span><span class="op" id="7952566">)</span><span class="op" id="7952567">.</span><span class="ident" id="7952568">Add</span><span class="op" id="7952571">(</span><span class="ident" id="7952572"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7952583">)</span><span class="op" id="7952584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952587"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7952589">.</span><span class="ident" id="7952590">SetReadBuffer</span><span class="op" id="7952603">(</span><span class="num" id="7952604">2048</span><span class="op" id="7952608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952611"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7952613">.</span><span class="ident" id="7952614">SetWriteBuffer</span><span class="op" id="7952628">(</span><span class="num" id="7952629">2048</span><span class="op" id="7952633">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952637">a2</span><span class="op" id="7952639">,</span>&nbsp;<span class="ident" id="7952641"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7952645">:=</span>&nbsp;<span class="ident" id="7952648"><a href="/net/unixsock.go.html#1526926">ResolveUnixAddr</a></span><span class="op" id="7952663">(</span><span class="string" id="7952664">&#34;unixgram&#34;</span><span class="op" id="7952674">,</span>&nbsp;<span class="ident" id="7952676"><a href="/net/protoconn_test.go.html#7952089">addr2</a></span><span class="op" id="7952681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952684">if</span>&nbsp;<span class="ident" id="7952687"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7952691">!=</span>&nbsp;<span class="ident" id="7952694">nil</span>&nbsp;<span class="op" id="7952698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952702"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7952703">.</span><span class="ident" id="7952704">Fatalf</span><span class="op" id="7952710">(</span><span class="string" id="7952711">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7952739">,</span>&nbsp;<span class="ident" id="7952741"><a href="/net/protoconn_test.go.html#7952158">err</a></span><span class="op" id="7952744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952750">c2</span><span class="op" id="7952752">,</span>&nbsp;<span class="ident" id="7952754"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7952758">:=</span>&nbsp;<span class="ident" id="7952761"><a href="/net/unixsock_posix.go.html#1533427">DialUnix</a></span><span class="op" id="7952769">(</span><span class="string" id="7952770">&#34;unixgram&#34;</span><span class="op" id="7952780">,</span>&nbsp;<span class="ident" id="7952782"><a href="/net/protoconn_test.go.html#7952637">a2</a></span><span class="op" id="7952784">,</span>&nbsp;<span class="ident" id="7952786">nil</span><span class="op" id="7952789">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952792">if</span>&nbsp;<span class="ident" id="7952795"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7952799">!=</span>&nbsp;<span class="ident" id="7952802">nil</span>&nbsp;<span class="op" id="7952806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952810"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7952811">.</span><span class="ident" id="7952812">Fatalf</span><span class="op" id="7952818">(</span><span class="string" id="7952819">&#34;DialUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7952840">,</span>&nbsp;<span class="ident" id="7952842"><a href="/net/protoconn_test.go.html#7952158">err</a></span><span class="op" id="7952845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952851">defer</span>&nbsp;<span class="ident" id="7952857"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7952859">.</span><span class="ident" id="7952860">Close</span><span class="op" id="7952865">(</span><span class="op" id="7952866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952869">defer</span>&nbsp;<span class="ident" id="7952875"><a href="/net/protoconn_test.go.html#7945565">os</a></span><span class="op" id="7952877">.</span><span class="ident" id="7952878">Remove</span><span class="op" id="7952884">(</span><span class="ident" id="7952885"><a href="/net/protoconn_test.go.html#7952089">addr2</a></span><span class="op" id="7952890">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952893"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7952895">.</span><span class="ident" id="7952896">LocalAddr</span><span class="op" id="7952905">(</span><span class="op" id="7952906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952909"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7952911">.</span><span class="ident" id="7952912">RemoteAddr</span><span class="op" id="7952922">(</span><span class="op" id="7952923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952926"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7952928">.</span><span class="ident" id="7952929">SetDeadline</span><span class="op" id="7952940">(</span><span class="ident" id="7952941"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7952945">.</span><span class="ident" id="7952946">Now</span><span class="op" id="7952949">(</span><span class="op" id="7952950">)</span><span class="op" id="7952951">.</span><span class="ident" id="7952952">Add</span><span class="op" id="7952955">(</span><span class="ident" id="7952956"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7952967">)</span><span class="op" id="7952968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952971"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7952973">.</span><span class="ident" id="7952974">SetReadDeadline</span><span class="op" id="7952989">(</span><span class="ident" id="7952990"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7952994">.</span><span class="ident" id="7952995">Now</span><span class="op" id="7952998">(</span><span class="op" id="7952999">)</span><span class="op" id="7953000">.</span><span class="ident" id="7953001">Add</span><span class="op" id="7953004">(</span><span class="ident" id="7953005"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7953016">)</span><span class="op" id="7953017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953020"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7953022">.</span><span class="ident" id="7953023">SetWriteDeadline</span><span class="op" id="7953039">(</span><span class="ident" id="7953040"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7953044">.</span><span class="ident" id="7953045">Now</span><span class="op" id="7953048">(</span><span class="op" id="7953049">)</span><span class="op" id="7953050">.</span><span class="ident" id="7953051">Add</span><span class="op" id="7953054">(</span><span class="ident" id="7953055"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7953066">)</span><span class="op" id="7953067">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953070"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7953072">.</span><span class="ident" id="7953073">SetReadBuffer</span><span class="op" id="7953086">(</span><span class="num" id="7953087">2048</span><span class="op" id="7953091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953094"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7953096">.</span><span class="ident" id="7953097">SetWriteBuffer</span><span class="op" id="7953111">(</span><span class="num" id="7953112">2048</span><span class="op" id="7953116">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953120">a3</span><span class="op" id="7953122">,</span>&nbsp;<span class="ident" id="7953124"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7953128">:=</span>&nbsp;<span class="ident" id="7953131"><a href="/net/unixsock.go.html#1526926">ResolveUnixAddr</a></span><span class="op" id="7953146">(</span><span class="string" id="7953147">&#34;unixgram&#34;</span><span class="op" id="7953157">,</span>&nbsp;<span class="ident" id="7953159"><a href="/net/protoconn_test.go.html#7952096">addr3</a></span><span class="op" id="7953164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953167">if</span>&nbsp;<span class="ident" id="7953170"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7953174">!=</span>&nbsp;<span class="ident" id="7953177">nil</span>&nbsp;<span class="op" id="7953181">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953185"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7953186">.</span><span class="ident" id="7953187">Fatalf</span><span class="op" id="7953193">(</span><span class="string" id="7953194">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7953222">,</span>&nbsp;<span class="ident" id="7953224"><a href="/net/protoconn_test.go.html#7952158">err</a></span><span class="op" id="7953227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953233">c3</span><span class="op" id="7953235">,</span>&nbsp;<span class="ident" id="7953237"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7953241">:=</span>&nbsp;<span class="ident" id="7953244"><a href="/net/unixsock_posix.go.html#1537208">ListenUnixgram</a></span><span class="op" id="7953258">(</span><span class="string" id="7953259">&#34;unixgram&#34;</span><span class="op" id="7953269">,</span>&nbsp;<span class="ident" id="7953271"><a href="/net/protoconn_test.go.html#7953120">a3</a></span><span class="op" id="7953273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953276">if</span>&nbsp;<span class="ident" id="7953279"><a href="/net/protoconn_test.go.html#7952158">err</a></span>&nbsp;<span class="op" id="7953283">!=</span>&nbsp;<span class="ident" id="7953286">nil</span>&nbsp;<span class="op" id="7953290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953294"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7953295">.</span><span class="ident" id="7953296">Fatalf</span><span class="op" id="7953302">(</span><span class="string" id="7953303">&#34;ListenUnixgram&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7953330">,</span>&nbsp;<span class="ident" id="7953332"><a href="/net/protoconn_test.go.html#7952158">err</a></span><span class="op" id="7953335">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953341">defer</span>&nbsp;<span class="ident" id="7953347"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7953349">.</span><span class="ident" id="7953350">Close</span><span class="op" id="7953355">(</span><span class="op" id="7953356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953359">defer</span>&nbsp;<span class="ident" id="7953365"><a href="/net/protoconn_test.go.html#7945565">os</a></span><span class="op" id="7953367">.</span><span class="ident" id="7953368">Remove</span><span class="op" id="7953374">(</span><span class="ident" id="7953375"><a href="/net/protoconn_test.go.html#7952096">addr3</a></span><span class="op" id="7953380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953383"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7953385">.</span><span class="ident" id="7953386">LocalAddr</span><span class="op" id="7953395">(</span><span class="op" id="7953396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953399"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7953401">.</span><span class="ident" id="7953402">RemoteAddr</span><span class="op" id="7953412">(</span><span class="op" id="7953413">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953416"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7953418">.</span><span class="ident" id="7953419">SetDeadline</span><span class="op" id="7953430">(</span><span class="ident" id="7953431"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7953435">.</span><span class="ident" id="7953436">Now</span><span class="op" id="7953439">(</span><span class="op" id="7953440">)</span><span class="op" id="7953441">.</span><span class="ident" id="7953442">Add</span><span class="op" id="7953445">(</span><span class="ident" id="7953446"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7953457">)</span><span class="op" id="7953458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953461"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7953463">.</span><span class="ident" id="7953464">SetReadDeadline</span><span class="op" id="7953479">(</span><span class="ident" id="7953480"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7953484">.</span><span class="ident" id="7953485">Now</span><span class="op" id="7953488">(</span><span class="op" id="7953489">)</span><span class="op" id="7953490">.</span><span class="ident" id="7953491">Add</span><span class="op" id="7953494">(</span><span class="ident" id="7953495"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7953506">)</span><span class="op" id="7953507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953510"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7953512">.</span><span class="ident" id="7953513">SetWriteDeadline</span><span class="op" id="7953529">(</span><span class="ident" id="7953530"><a href="/net/protoconn_test.go.html#7945593">time</a></span><span class="op" id="7953534">.</span><span class="ident" id="7953535">Now</span><span class="op" id="7953538">(</span><span class="op" id="7953539">)</span><span class="op" id="7953540">.</span><span class="ident" id="7953541">Add</span><span class="op" id="7953544">(</span><span class="ident" id="7953545"><a href="/net/conn_test.go.html#7824652">someTimeout</a></span><span class="op" id="7953556">)</span><span class="op" id="7953557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953560"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7953562">.</span><span class="ident" id="7953563">SetReadBuffer</span><span class="op" id="7953576">(</span><span class="num" id="7953577">2048</span><span class="op" id="7953581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953584"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7953586">.</span><span class="ident" id="7953587">SetWriteBuffer</span><span class="op" id="7953601">(</span><span class="num" id="7953602">2048</span><span class="op" id="7953606">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953610">wb</span>&nbsp;<span class="op" id="7953613">:=</span>&nbsp;<span class="op" id="7953616">[</span><span class="op" id="7953617">]</span><span class="builtintype" id="7953618">byte</span><span class="op" id="7953622">(</span><span class="string" id="7953623">&#34;UNIXCONN&nbsp;TEST&#34;</span><span class="op" id="7953638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953641">rb1</span>&nbsp;<span class="op" id="7953645">:=</span>&nbsp;<span class="builtinfunc" id="7953648">make</span><span class="op" id="7953652">(</span><span class="op" id="7953653">[</span><span class="op" id="7953654">]</span><span class="builtintype" id="7953655">byte</span><span class="op" id="7953659">,</span>&nbsp;<span class="num" id="7953661">128</span><span class="op" id="7953664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953667">rb2</span>&nbsp;<span class="op" id="7953671">:=</span>&nbsp;<span class="builtinfunc" id="7953674">make</span><span class="op" id="7953678">(</span><span class="op" id="7953679">[</span><span class="op" id="7953680">]</span><span class="builtintype" id="7953681">byte</span><span class="op" id="7953685">,</span>&nbsp;<span class="num" id="7953687">128</span><span class="op" id="7953690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953693">rb3</span>&nbsp;<span class="op" id="7953697">:=</span>&nbsp;<span class="builtinfunc" id="7953700">make</span><span class="op" id="7953704">(</span><span class="op" id="7953705">[</span><span class="op" id="7953706">]</span><span class="builtintype" id="7953707">byte</span><span class="op" id="7953711">,</span>&nbsp;<span class="num" id="7953713">128</span><span class="op" id="7953716">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953719">if</span>&nbsp;<span class="ident" id="7953722">_</span><span class="op" id="7953723">,</span>&nbsp;<span class="ident" id="7953725">_</span><span class="op" id="7953726">,</span>&nbsp;<span class="ident" id="7953728">err</span>&nbsp;<span class="op" id="7953732">:=</span>&nbsp;<span class="ident" id="7953735"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7953737">.</span><span class="ident" id="7953738">WriteMsgUnix</span><span class="op" id="7953750">(</span><span class="ident" id="7953751"><a href="/net/protoconn_test.go.html#7953610">wb</a></span><span class="op" id="7953753">,</span>&nbsp;<span class="ident" id="7953755">nil</span><span class="op" id="7953758">,</span>&nbsp;<span class="ident" id="7953760"><a href="/net/protoconn_test.go.html#7952637">a2</a></span><span class="op" id="7953762">)</span><span class="op" id="7953763">;</span>&nbsp;<span class="ident" id="7953765"><a href="/net/protoconn_test.go.html#7953728">err</a></span>&nbsp;<span class="op" id="7953769">!=</span>&nbsp;<span class="ident" id="7953772">nil</span>&nbsp;<span class="op" id="7953776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953780"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7953781">.</span><span class="ident" id="7953782">Fatalf</span><span class="op" id="7953788">(</span><span class="string" id="7953789">&#34;UnixConn.WriteMsgUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7953823">,</span>&nbsp;<span class="ident" id="7953825"><a href="/net/protoconn_test.go.html#7953728">err</a></span><span class="op" id="7953828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953834">if</span>&nbsp;<span class="ident" id="7953837">_</span><span class="op" id="7953838">,</span>&nbsp;<span class="ident" id="7953840">_</span><span class="op" id="7953841">,</span>&nbsp;<span class="ident" id="7953843">_</span><span class="op" id="7953844">,</span>&nbsp;<span class="ident" id="7953846">_</span><span class="op" id="7953847">,</span>&nbsp;<span class="ident" id="7953849">err</span>&nbsp;<span class="op" id="7953853">:=</span>&nbsp;<span class="ident" id="7953856"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7953858">.</span><span class="ident" id="7953859">ReadMsgUnix</span><span class="op" id="7953870">(</span><span class="ident" id="7953871"><a href="/net/protoconn_test.go.html#7953667">rb2</a></span><span class="op" id="7953874">,</span>&nbsp;<span class="ident" id="7953876">nil</span><span class="op" id="7953879">)</span><span class="op" id="7953880">;</span>&nbsp;<span class="ident" id="7953882"><a href="/net/protoconn_test.go.html#7953849">err</a></span>&nbsp;<span class="op" id="7953886">!=</span>&nbsp;<span class="ident" id="7953889">nil</span>&nbsp;<span class="op" id="7953893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953897"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7953898">.</span><span class="ident" id="7953899">Fatalf</span><span class="op" id="7953905">(</span><span class="string" id="7953906">&#34;UnixConn.ReadMsgUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7953939">,</span>&nbsp;<span class="ident" id="7953941"><a href="/net/protoconn_test.go.html#7953849">err</a></span><span class="op" id="7953944">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7953950">if</span>&nbsp;<span class="ident" id="7953953">_</span><span class="op" id="7953954">,</span>&nbsp;<span class="ident" id="7953956">err</span>&nbsp;<span class="op" id="7953960">:=</span>&nbsp;<span class="ident" id="7953963"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7953965">.</span><span class="ident" id="7953966">WriteToUnix</span><span class="op" id="7953977">(</span><span class="ident" id="7953978"><a href="/net/protoconn_test.go.html#7953610">wb</a></span><span class="op" id="7953980">,</span>&nbsp;<span class="ident" id="7953982"><a href="/net/protoconn_test.go.html#7952154">a1</a></span><span class="op" id="7953984">)</span><span class="op" id="7953985">;</span>&nbsp;<span class="ident" id="7953987"><a href="/net/protoconn_test.go.html#7953956">err</a></span>&nbsp;<span class="op" id="7953991">!=</span>&nbsp;<span class="ident" id="7953994">nil</span>&nbsp;<span class="op" id="7953998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954002"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7954003">.</span><span class="ident" id="7954004">Fatalf</span><span class="op" id="7954010">(</span><span class="string" id="7954011">&#34;UnixConn.WriteToUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7954044">,</span>&nbsp;<span class="ident" id="7954046"><a href="/net/protoconn_test.go.html#7953956">err</a></span><span class="op" id="7954049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954055">if</span>&nbsp;<span class="ident" id="7954058">_</span><span class="op" id="7954059">,</span>&nbsp;<span class="ident" id="7954061">_</span><span class="op" id="7954062">,</span>&nbsp;<span class="ident" id="7954064">err</span>&nbsp;<span class="op" id="7954068">:=</span>&nbsp;<span class="ident" id="7954071"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7954073">.</span><span class="ident" id="7954074">ReadFromUnix</span><span class="op" id="7954086">(</span><span class="ident" id="7954087"><a href="/net/protoconn_test.go.html#7953641">rb1</a></span><span class="op" id="7954090">)</span><span class="op" id="7954091">;</span>&nbsp;<span class="ident" id="7954093"><a href="/net/protoconn_test.go.html#7954064">err</a></span>&nbsp;<span class="op" id="7954097">!=</span>&nbsp;<span class="ident" id="7954100">nil</span>&nbsp;<span class="op" id="7954104">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954108"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7954109">.</span><span class="ident" id="7954110">Fatalf</span><span class="op" id="7954116">(</span><span class="string" id="7954117">&#34;UnixConn.ReadFromUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7954151">,</span>&nbsp;<span class="ident" id="7954153"><a href="/net/protoconn_test.go.html#7954064">err</a></span><span class="op" id="7954156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954162">if</span>&nbsp;<span class="ident" id="7954165">_</span><span class="op" id="7954166">,</span>&nbsp;<span class="ident" id="7954168">err</span>&nbsp;<span class="op" id="7954172">:=</span>&nbsp;<span class="ident" id="7954175"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7954177">.</span><span class="ident" id="7954178">WriteToUnix</span><span class="op" id="7954189">(</span><span class="ident" id="7954190"><a href="/net/protoconn_test.go.html#7953610">wb</a></span><span class="op" id="7954192">,</span>&nbsp;<span class="ident" id="7954194"><a href="/net/protoconn_test.go.html#7952154">a1</a></span><span class="op" id="7954196">)</span><span class="op" id="7954197">;</span>&nbsp;<span class="ident" id="7954199"><a href="/net/protoconn_test.go.html#7954168">err</a></span>&nbsp;<span class="op" id="7954203">!=</span>&nbsp;<span class="ident" id="7954206">nil</span>&nbsp;<span class="op" id="7954210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954214"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7954215">.</span><span class="ident" id="7954216">Fatalf</span><span class="op" id="7954222">(</span><span class="string" id="7954223">&#34;UnixConn.WriteToUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7954256">,</span>&nbsp;<span class="ident" id="7954258"><a href="/net/protoconn_test.go.html#7954168">err</a></span><span class="op" id="7954261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954264">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954267">if</span>&nbsp;<span class="ident" id="7954270">_</span><span class="op" id="7954271">,</span>&nbsp;<span class="ident" id="7954273">_</span><span class="op" id="7954274">,</span>&nbsp;<span class="ident" id="7954276">err</span>&nbsp;<span class="op" id="7954280">:=</span>&nbsp;<span class="ident" id="7954283"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7954285">.</span><span class="ident" id="7954286">ReadFromUnix</span><span class="op" id="7954298">(</span><span class="ident" id="7954299"><a href="/net/protoconn_test.go.html#7953641">rb1</a></span><span class="op" id="7954302">)</span><span class="op" id="7954303">;</span>&nbsp;<span class="ident" id="7954305"><a href="/net/protoconn_test.go.html#7954276">err</a></span>&nbsp;<span class="op" id="7954309">!=</span>&nbsp;<span class="ident" id="7954312">nil</span>&nbsp;<span class="op" id="7954316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954320"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7954321">.</span><span class="ident" id="7954322">Fatalf</span><span class="op" id="7954328">(</span><span class="string" id="7954329">&#34;UnixConn.ReadFromUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7954363">,</span>&nbsp;<span class="ident" id="7954365"><a href="/net/protoconn_test.go.html#7954276">err</a></span><span class="op" id="7954368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954374">if</span>&nbsp;<span class="ident" id="7954377">_</span><span class="op" id="7954378">,</span>&nbsp;<span class="ident" id="7954380">err</span>&nbsp;<span class="op" id="7954384">:=</span>&nbsp;<span class="ident" id="7954387"><a href="/net/protoconn_test.go.html#7952750">c2</a></span><span class="op" id="7954389">.</span><span class="ident" id="7954390">WriteToUnix</span><span class="op" id="7954401">(</span><span class="ident" id="7954402"><a href="/net/protoconn_test.go.html#7953610">wb</a></span><span class="op" id="7954404">,</span>&nbsp;<span class="ident" id="7954406"><a href="/net/protoconn_test.go.html#7953120">a3</a></span><span class="op" id="7954408">)</span><span class="op" id="7954409">;</span>&nbsp;<span class="ident" id="7954411"><a href="/net/protoconn_test.go.html#7954380">err</a></span>&nbsp;<span class="op" id="7954415">!=</span>&nbsp;<span class="ident" id="7954418">nil</span>&nbsp;<span class="op" id="7954422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954426"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7954427">.</span><span class="ident" id="7954428">Fatalf</span><span class="op" id="7954434">(</span><span class="string" id="7954435">&#34;UnixConn.WriteToUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7954468">,</span>&nbsp;<span class="ident" id="7954470"><a href="/net/protoconn_test.go.html#7954380">err</a></span><span class="op" id="7954473">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954479">if</span>&nbsp;<span class="ident" id="7954482">_</span><span class="op" id="7954483">,</span>&nbsp;<span class="ident" id="7954485">_</span><span class="op" id="7954486">,</span>&nbsp;<span class="ident" id="7954488">err</span>&nbsp;<span class="op" id="7954492">:=</span>&nbsp;<span class="ident" id="7954495"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7954497">.</span><span class="ident" id="7954498">ReadFromUnix</span><span class="op" id="7954510">(</span><span class="ident" id="7954511"><a href="/net/protoconn_test.go.html#7953693">rb3</a></span><span class="op" id="7954514">)</span><span class="op" id="7954515">;</span>&nbsp;<span class="ident" id="7954517"><a href="/net/protoconn_test.go.html#7954488">err</a></span>&nbsp;<span class="op" id="7954521">!=</span>&nbsp;<span class="ident" id="7954524">nil</span>&nbsp;<span class="op" id="7954528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954532"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7954533">.</span><span class="ident" id="7954534">Fatalf</span><span class="op" id="7954540">(</span><span class="string" id="7954541">&#34;UnixConn.ReadFromUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7954575">,</span>&nbsp;<span class="ident" id="7954577"><a href="/net/protoconn_test.go.html#7954488">err</a></span><span class="op" id="7954580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954587">if</span>&nbsp;<span class="ident" id="7954590">f</span><span class="op" id="7954591">,</span>&nbsp;<span class="ident" id="7954593">err</span>&nbsp;<span class="op" id="7954597">:=</span>&nbsp;<span class="ident" id="7954600"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7954602">.</span><span class="ident" id="7954603">File</span><span class="op" id="7954607">(</span><span class="op" id="7954608">)</span><span class="op" id="7954609">;</span>&nbsp;<span class="ident" id="7954611"><a href="/net/protoconn_test.go.html#7954593">err</a></span>&nbsp;<span class="op" id="7954615">!=</span>&nbsp;<span class="ident" id="7954618">nil</span>&nbsp;<span class="op" id="7954622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954626"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7954627">.</span><span class="ident" id="7954628">Fatalf</span><span class="op" id="7954634">(</span><span class="string" id="7954635">&#34;UnixConn.File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7954661">,</span>&nbsp;<span class="ident" id="7954663"><a href="/net/protoconn_test.go.html#7954593">err</a></span><span class="op" id="7954666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954669">}</span>&nbsp;<span class="keyword" id="7954671">else</span>&nbsp;<span class="op" id="7954676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954680"><a href="/net/protoconn_test.go.html#7954590">f</a></span><span class="op" id="7954681">.</span><span class="ident" id="7954682">Close</span><span class="op" id="7954687">(</span><span class="op" id="7954688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954691">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954695">defer</span>&nbsp;<span class="keyword" id="7954701">func</span><span class="op" id="7954705">(</span><span class="op" id="7954706">)</span>&nbsp;<span class="op" id="7954708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954712">if</span>&nbsp;<span class="ident" id="7954715">p</span>&nbsp;<span class="op" id="7954717">:=</span>&nbsp;<span class="builtinfunc" id="7954720">recover</span><span class="op" id="7954727">(</span><span class="op" id="7954728">)</span><span class="op" id="7954729">;</span>&nbsp;<span class="ident" id="7954731"><a href="/net/protoconn_test.go.html#7954715">p</a></span>&nbsp;<span class="op" id="7954733">!=</span>&nbsp;<span class="ident" id="7954736">nil</span>&nbsp;<span class="op" id="7954740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954745"><a href="/net/protoconn_test.go.html#7951957">t</a></span><span class="op" id="7954746">.</span><span class="ident" id="7954747">Fatalf</span><span class="op" id="7954753">(</span><span class="string" id="7954754">&#34;UnixConn.WriteToUnix&nbsp;or&nbsp;WriteMsgUnix&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="7954805">,</span>&nbsp;<span class="ident" id="7954807"><a href="/net/protoconn_test.go.html#7954715">p</a></span><span class="op" id="7954808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954812">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954815">}</span><span class="op" id="7954816">(</span><span class="op" id="7954817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954821"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7954823">.</span><span class="ident" id="7954824">WriteToUnix</span><span class="op" id="7954835">(</span><span class="ident" id="7954836"><a href="/net/protoconn_test.go.html#7953610">wb</a></span><span class="op" id="7954838">,</span>&nbsp;<span class="ident" id="7954840">nil</span><span class="op" id="7954843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954846"><a href="/net/protoconn_test.go.html#7952267">c1</a></span><span class="op" id="7954848">.</span><span class="ident" id="7954849">WriteMsgUnix</span><span class="op" id="7954861">(</span><span class="ident" id="7954862"><a href="/net/protoconn_test.go.html#7953610">wb</a></span><span class="op" id="7954864">,</span>&nbsp;<span class="ident" id="7954866">nil</span><span class="op" id="7954869">,</span>&nbsp;<span class="ident" id="7954871">nil</span><span class="op" id="7954874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954877"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7954879">.</span><span class="ident" id="7954880">WriteToUnix</span><span class="op" id="7954891">(</span><span class="ident" id="7954892"><a href="/net/protoconn_test.go.html#7953610">wb</a></span><span class="op" id="7954894">,</span>&nbsp;<span class="ident" id="7954896">nil</span><span class="op" id="7954899">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954902"><a href="/net/protoconn_test.go.html#7953233">c3</a></span><span class="op" id="7954904">.</span><span class="ident" id="7954905">WriteMsgUnix</span><span class="op" id="7954917">(</span><span class="ident" id="7954918"><a href="/net/protoconn_test.go.html#7953610">wb</a></span><span class="op" id="7954920">,</span>&nbsp;<span class="ident" id="7954922">nil</span><span class="op" id="7954925">,</span>&nbsp;<span class="ident" id="7954927">nil</span><span class="op" id="7954930">)</span><br>
<span class="lineno"></span><span class="op" id="7954932">}</span>
</div>
</body>
</html>
