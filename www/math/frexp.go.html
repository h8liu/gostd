<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2005533">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2005588">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2005642">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2005693">package</span>&nbsp;<span class="ident" id="2005701">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2005707">//&nbsp;Frexp&nbsp;breaks&nbsp;f&nbsp;into&nbsp;a&nbsp;normalized&nbsp;fraction</span><br>
<span class="lineno"></span><span class="comment" id="2005752">//&nbsp;and&nbsp;an&nbsp;integral&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="comment" id="2005785">//&nbsp;It&nbsp;returns&nbsp;frac&nbsp;and&nbsp;exp&nbsp;satisfying&nbsp;f&nbsp;==&nbsp;frac&nbsp;×&nbsp;2**exp,</span><br>
<span class="lineno">10</span><span class="comment" id="2005844">//&nbsp;with&nbsp;the&nbsp;absolute&nbsp;value&nbsp;of&nbsp;frac&nbsp;in&nbsp;the&nbsp;interval&nbsp;[½,&nbsp;1).</span><br>
<span class="lineno"></span><span class="comment" id="2005904">//</span><br>
<span class="lineno"></span><span class="comment" id="2005907">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="2005929">//&nbsp;&nbsp;&nbsp;&nbspFrexp(±0)&nbsp;=&nbsp;±0,&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2005952">//&nbsp;&nbsp;&nbsp;&nbspFrexp(±Inf)&nbsp;=&nbsp;±Inf,&nbsp;0</span><br>
<span class="lineno">15</span><span class="comment" id="2005979">//&nbsp;&nbsp;&nbsp;&nbspFrexp(NaN)&nbsp;=&nbsp;NaN,&nbsp;0</span><br>
<span class="lineno"></span><span class="keyword" id="2006002">func</span>&nbsp;<span class="ident" id="2006007">Frexp</span><span class="op" id="2006012">(</span><span class="ident" id="2006013">f</span>&nbsp;<span class="builtintype" id="2006015">float64</span><span class="op" id="2006022">)</span>&nbsp;<span class="op" id="2006024">(</span><span class="ident" id="2006025">frac</span>&nbsp;<span class="builtintype" id="2006030">float64</span><span class="op" id="2006037">,</span>&nbsp;<span class="ident" id="2006039">exp</span>&nbsp;<span class="builtintype" id="2006043">int</span><span class="op" id="2006046">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2006049">func</span>&nbsp;<span class="ident" id="2006054">frexp</span><span class="op" id="2006059">(</span><span class="ident" id="2006060">f</span>&nbsp;<span class="builtintype" id="2006062">float64</span><span class="op" id="2006069">)</span>&nbsp;<span class="op" id="2006071">(</span><span class="ident" id="2006072">frac</span>&nbsp;<span class="builtintype" id="2006077">float64</span><span class="op" id="2006084">,</span>&nbsp;<span class="ident" id="2006086">exp</span>&nbsp;<span class="builtintype" id="2006090">int</span><span class="op" id="2006093">)</span>&nbsp;<span class="op" id="2006095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2006098">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2006116">switch</span>&nbsp;<span class="op" id="2006123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2006126">case</span>&nbsp;<span class="ident" id="2006131">f</span>&nbsp;<span class="op" id="2006133">==</span>&nbsp;<span class="num" id="2006136">0</span><span class="op" id="2006137">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2006141">return</span>&nbsp;<span class="ident" id="2006148">f</span><span class="op" id="2006149">,</span>&nbsp;<span class="num" id="2006151">0</span>&nbsp;<span class="comment" id="2006153">//&nbsp;correctly&nbsp;return&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2006177">case</span>&nbsp;<span class="ident" id="2006182">IsInf</span><span class="op" id="2006187">(</span><span class="ident" id="2006188">f</span><span class="op" id="2006189">,</span>&nbsp;<span class="num" id="2006191">0</span><span class="op" id="2006192">)</span>&nbsp;<span class="op" id="2006194">||</span>&nbsp;<span class="ident" id="2006197">IsNaN</span><span class="op" id="2006202">(</span><span class="ident" id="2006203">f</span><span class="op" id="2006204">)</span><span class="op" id="2006205">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2006209">return</span>&nbsp;<span class="ident" id="2006216">f</span><span class="op" id="2006217">,</span>&nbsp;<span class="num" id="2006219">0</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2006222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2006225">f</span><span class="op" id="2006226">,</span>&nbsp;<span class="ident" id="2006228">exp</span>&nbsp;<span class="op" id="2006232">=</span>&nbsp;<span class="ident" id="2006234">normalize</span><span class="op" id="2006243">(</span><span class="ident" id="2006244">f</span><span class="op" id="2006245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2006248">x</span>&nbsp;<span class="op" id="2006250">:=</span>&nbsp;<span class="ident" id="2006253">Float64bits</span><span class="op" id="2006264">(</span><span class="ident" id="2006265">f</span><span class="op" id="2006266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2006269">exp</span>&nbsp;<span class="op" id="2006273">+=</span>&nbsp;<span class="builtintype" id="2006276">int</span><span class="op" id="2006279">(</span><span class="op" id="2006280">(</span><span class="ident" id="2006281">x</span><span class="op" id="2006282">&gt;&gt;</span><span class="ident" id="2006284">shift</span><span class="op" id="2006289">)</span><span class="op" id="2006290">&amp;</span><span class="ident" id="2006291">mask</span><span class="op" id="2006295">)</span>&nbsp;<span class="op" id="2006297">-</span>&nbsp;<span class="ident" id="2006299">bias</span>&nbsp;<span class="op" id="2006304">+</span>&nbsp;<span class="num" id="2006306">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2006309">x</span>&nbsp;<span class="op" id="2006311">&amp;^=</span>&nbsp;<span class="ident" id="2006315">mask</span>&nbsp;<span class="op" id="2006320">&lt;&lt;</span>&nbsp;<span class="ident" id="2006323">shift</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2006330">x</span>&nbsp;<span class="op" id="2006332">|=</span>&nbsp;<span class="op" id="2006335">(</span><span class="op" id="2006336">-</span><span class="num" id="2006337">1</span>&nbsp;<span class="op" id="2006339">+</span>&nbsp;<span class="ident" id="2006341">bias</span><span class="op" id="2006345">)</span>&nbsp;<span class="op" id="2006347">&lt;&lt;</span>&nbsp;<span class="ident" id="2006350">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2006357">frac</span>&nbsp;<span class="op" id="2006362">=</span>&nbsp;<span class="ident" id="2006364">Float64frombits</span><span class="op" id="2006379">(</span><span class="ident" id="2006380">x</span><span class="op" id="2006381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2006384">return</span><br>
<span class="lineno"></span><span class="op" id="2006391">}</span>
</div>
</body>
</html>
