<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html" class="current">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7285703">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7285758">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7285812">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7285863">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7285930">package</span>&nbsp;<span class="ident" id="7285938">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7285943">import</span>&nbsp;<span class="op" id="7285950">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7285953">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7285962">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7285972">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7285979">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7285985">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7285992">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7286003">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7286014">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7286021">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7286024">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7286084">type</span>&nbsp;<span class="ident" id="7286089">ByteStruct</span>&nbsp;<span class="keyword" id="7286100">struct</span>&nbsp;<span class="op" id="7286107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7286110">a</span>&nbsp;<span class="builtintype" id="7286112">byte</span>&nbsp;<span class="comment" id="7286117">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7286142">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7286145">type</span>&nbsp;<span class="ident" id="7286150">StringStruct</span>&nbsp;<span class="keyword" id="7286163">struct</span>&nbsp;<span class="op" id="7286170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7286173">s</span>&nbsp;<span class="builtintype" id="7286175">string</span>&nbsp;<span class="comment" id="7286182">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7286207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7286210">type</span>&nbsp;<span class="ident" id="7286215">ArrayStruct</span>&nbsp;<span class="keyword" id="7286227">struct</span>&nbsp;<span class="op" id="7286234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7286237">a</span>&nbsp;<span class="op" id="7286239">[</span><span class="num" id="7286240">8192</span><span class="op" id="7286244">]</span><span class="builtintype" id="7286245">byte</span>&nbsp;<span class="comment" id="7286250">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7286275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7286278">type</span>&nbsp;<span class="ident" id="7286283">Gobber</span>&nbsp;<span class="builtintype" id="7286290">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="7286295">type</span>&nbsp;<span class="ident" id="7286300">ValueGobber</span>&nbsp;<span class="builtintype" id="7286312">string</span>&nbsp;<span class="comment" id="7286319">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7286369">type</span>&nbsp;<span class="ident" id="7286374">BinaryGobber</span>&nbsp;<span class="builtintype" id="7286387">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7286392">type</span>&nbsp;<span class="ident" id="7286397">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="7286415">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7286423">type</span>&nbsp;<span class="ident" id="7286428">TextGobber</span>&nbsp;<span class="builtintype" id="7286439">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7286444">type</span>&nbsp;<span class="ident" id="7286449">TextValueGobber</span>&nbsp;<span class="builtintype" id="7286465">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="7286473">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7286498">func</span>&nbsp;<span class="op" id="7286503">(</span><span class="ident" id="7286504">g</span>&nbsp;<span class="op" id="7286506">*</span><span class="ident" id="7286507">ByteStruct</span><span class="op" id="7286517">)</span>&nbsp;<span class="ident" id="7286519">GobEncode</span><span class="op" id="7286528">(</span><span class="op" id="7286529">)</span>&nbsp;<span class="op" id="7286531">(</span><span class="op" id="7286532">[</span><span class="op" id="7286533">]</span><span class="builtintype" id="7286534">byte</span><span class="op" id="7286538">,</span>&nbsp;<span class="builtintype" id="7286540">error</span><span class="op" id="7286545">)</span>&nbsp;<span class="op" id="7286547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7286550">b</span>&nbsp;<span class="op" id="7286552">:=</span>&nbsp;<span class="builtinfunc" id="7286555">make</span><span class="op" id="7286559">(</span><span class="op" id="7286560">[</span><span class="op" id="7286561">]</span><span class="builtintype" id="7286562">byte</span><span class="op" id="7286566">,</span>&nbsp;<span class="num" id="7286568">3</span><span class="op" id="7286569">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7286572">b</span><span class="op" id="7286573">[</span><span class="num" id="7286574">0</span><span class="op" id="7286575">]</span>&nbsp;<span class="op" id="7286577">=</span>&nbsp;<span class="ident" id="7286579">g</span><span class="op" id="7286580">.</span><span class="ident" id="7286581">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7286584">b</span><span class="op" id="7286585">[</span><span class="num" id="7286586">1</span><span class="op" id="7286587">]</span>&nbsp;<span class="op" id="7286589">=</span>&nbsp;<span class="ident" id="7286591">g</span><span class="op" id="7286592">.</span><span class="ident" id="7286593">a</span>&nbsp;<span class="op" id="7286595">+</span>&nbsp;<span class="num" id="7286597">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7286600">b</span><span class="op" id="7286601">[</span><span class="num" id="7286602">2</span><span class="op" id="7286603">]</span>&nbsp;<span class="op" id="7286605">=</span>&nbsp;<span class="ident" id="7286607">g</span><span class="op" id="7286608">.</span><span class="ident" id="7286609">a</span>&nbsp;<span class="op" id="7286611">+</span>&nbsp;<span class="num" id="7286613">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7286616">return</span>&nbsp;<span class="ident" id="7286623">b</span><span class="op" id="7286624">,</span>&nbsp;<span class="builtintype" id="7286626">nil</span><br>
<span class="lineno"></span><span class="op" id="7286630">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7286633">func</span>&nbsp;<span class="op" id="7286638">(</span><span class="ident" id="7286639">g</span>&nbsp;<span class="op" id="7286641">*</span><span class="ident" id="7286642">ByteStruct</span><span class="op" id="7286652">)</span>&nbsp;<span class="ident" id="7286654">GobDecode</span><span class="op" id="7286663">(</span><span class="ident" id="7286664">data</span>&nbsp;<span class="op" id="7286669">[</span><span class="op" id="7286670">]</span><span class="builtintype" id="7286671">byte</span><span class="op" id="7286675">)</span>&nbsp;<span class="builtintype" id="7286677">error</span>&nbsp;<span class="op" id="7286683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7286686">if</span>&nbsp;<span class="ident" id="7286689">g</span>&nbsp;<span class="op" id="7286691">==</span>&nbsp;<span class="builtintype" id="7286694">nil</span>&nbsp;<span class="op" id="7286698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7286702">return</span>&nbsp;<span class="ident" id="7286709">errors</span><span class="op" id="7286715">.</span><span class="ident" id="7286716">New</span><span class="op" id="7286719">(</span><span class="string" id="7286720">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="7286734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7286737">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7286740">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7286778">if</span>&nbsp;<span class="builtinfunc" id="7286781">len</span><span class="op" id="7286784">(</span><span class="ident" id="7286785">data</span><span class="op" id="7286789">)</span>&nbsp;<span class="op" id="7286791">==</span>&nbsp;<span class="num" id="7286794">0</span>&nbsp;<span class="op" id="7286796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7286800">return</span>&nbsp;<span class="ident" id="7286807">io</span><span class="op" id="7286809">.</span><span class="ident" id="7286810">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7286815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7286818">g</span><span class="op" id="7286819">.</span><span class="ident" id="7286820">a</span>&nbsp;<span class="op" id="7286822">=</span>&nbsp;<span class="ident" id="7286824">data</span><span class="op" id="7286828">[</span><span class="num" id="7286829">0</span><span class="op" id="7286830">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7286833">for</span>&nbsp;<span class="ident" id="7286837">i</span><span class="op" id="7286838">,</span>&nbsp;<span class="ident" id="7286840">c</span>&nbsp;<span class="op" id="7286842">:=</span>&nbsp;<span class="keyword" id="7286845">range</span>&nbsp;<span class="ident" id="7286851">data</span>&nbsp;<span class="op" id="7286856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7286860">if</span>&nbsp;<span class="ident" id="7286863">c</span>&nbsp;<span class="op" id="7286865">!=</span>&nbsp;<span class="ident" id="7286868">g</span><span class="op" id="7286869">.</span><span class="ident" id="7286870">a</span><span class="op" id="7286871">+</span><span class="builtintype" id="7286872">byte</span><span class="op" id="7286876">(</span><span class="ident" id="7286877">i</span><span class="op" id="7286878">)</span>&nbsp;<span class="op" id="7286880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7286885">return</span>&nbsp;<span class="ident" id="7286892">errors</span><span class="op" id="7286898">.</span><span class="ident" id="7286899">New</span><span class="op" id="7286902">(</span><span class="string" id="7286903">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="7286926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7286930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7286933">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7286936">return</span>&nbsp;<span class="builtintype" id="7286943">nil</span><br>
<span class="lineno"></span><span class="op" id="7286947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7286950">func</span>&nbsp;<span class="op" id="7286955">(</span><span class="ident" id="7286956">g</span>&nbsp;<span class="op" id="7286958">*</span><span class="ident" id="7286959">StringStruct</span><span class="op" id="7286971">)</span>&nbsp;<span class="ident" id="7286973">GobEncode</span><span class="op" id="7286982">(</span><span class="op" id="7286983">)</span>&nbsp;<span class="op" id="7286985">(</span><span class="op" id="7286986">[</span><span class="op" id="7286987">]</span><span class="builtintype" id="7286988">byte</span><span class="op" id="7286992">,</span>&nbsp;<span class="builtintype" id="7286994">error</span><span class="op" id="7286999">)</span>&nbsp;<span class="op" id="7287001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287004">return</span>&nbsp;<span class="op" id="7287011">[</span><span class="op" id="7287012">]</span><span class="builtintype" id="7287013">byte</span><span class="op" id="7287017">(</span><span class="ident" id="7287018">g</span><span class="op" id="7287019">.</span><span class="ident" id="7287020">s</span><span class="op" id="7287021">)</span><span class="op" id="7287022">,</span>&nbsp;<span class="builtintype" id="7287024">nil</span><br>
<span class="lineno">75</span><span class="op" id="7287028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7287031">func</span>&nbsp;<span class="op" id="7287036">(</span><span class="ident" id="7287037">g</span>&nbsp;<span class="op" id="7287039">*</span><span class="ident" id="7287040">StringStruct</span><span class="op" id="7287052">)</span>&nbsp;<span class="ident" id="7287054">GobDecode</span><span class="op" id="7287063">(</span><span class="ident" id="7287064">data</span>&nbsp;<span class="op" id="7287069">[</span><span class="op" id="7287070">]</span><span class="builtintype" id="7287071">byte</span><span class="op" id="7287075">)</span>&nbsp;<span class="builtintype" id="7287077">error</span>&nbsp;<span class="op" id="7287083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7287086">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287124">if</span>&nbsp;<span class="builtinfunc" id="7287127">len</span><span class="op" id="7287130">(</span><span class="ident" id="7287131">data</span><span class="op" id="7287135">)</span>&nbsp;<span class="op" id="7287137">==</span>&nbsp;<span class="num" id="7287140">0</span>&nbsp;<span class="op" id="7287142">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287146">return</span>&nbsp;<span class="ident" id="7287153">io</span><span class="op" id="7287155">.</span><span class="ident" id="7287156">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7287161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7287164">a</span>&nbsp;<span class="op" id="7287166">:=</span>&nbsp;<span class="ident" id="7287169">data</span><span class="op" id="7287173">[</span><span class="num" id="7287174">0</span><span class="op" id="7287175">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287178">for</span>&nbsp;<span class="ident" id="7287182">i</span><span class="op" id="7287183">,</span>&nbsp;<span class="ident" id="7287185">c</span>&nbsp;<span class="op" id="7287187">:=</span>&nbsp;<span class="keyword" id="7287190">range</span>&nbsp;<span class="ident" id="7287196">data</span>&nbsp;<span class="op" id="7287201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287205">if</span>&nbsp;<span class="ident" id="7287208">c</span>&nbsp;<span class="op" id="7287210">!=</span>&nbsp;<span class="ident" id="7287213">a</span><span class="op" id="7287214">+</span><span class="builtintype" id="7287215">byte</span><span class="op" id="7287219">(</span><span class="ident" id="7287220">i</span><span class="op" id="7287221">)</span>&nbsp;<span class="op" id="7287223">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287228">return</span>&nbsp;<span class="ident" id="7287235">errors</span><span class="op" id="7287241">.</span><span class="ident" id="7287242">New</span><span class="op" id="7287245">(</span><span class="string" id="7287246">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="7287269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7287273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7287276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7287279">g</span><span class="op" id="7287280">.</span><span class="ident" id="7287281">s</span>&nbsp;<span class="op" id="7287283">=</span>&nbsp;<span class="builtintype" id="7287285">string</span><span class="op" id="7287291">(</span><span class="ident" id="7287292">data</span><span class="op" id="7287296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287299">return</span>&nbsp;<span class="builtintype" id="7287306">nil</span><br>
<span class="lineno">90</span><span class="op" id="7287310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7287313">func</span>&nbsp;<span class="op" id="7287318">(</span><span class="ident" id="7287319">a</span>&nbsp;<span class="op" id="7287321">*</span><span class="ident" id="7287322">ArrayStruct</span><span class="op" id="7287333">)</span>&nbsp;<span class="ident" id="7287335">GobEncode</span><span class="op" id="7287344">(</span><span class="op" id="7287345">)</span>&nbsp;<span class="op" id="7287347">(</span><span class="op" id="7287348">[</span><span class="op" id="7287349">]</span><span class="builtintype" id="7287350">byte</span><span class="op" id="7287354">,</span>&nbsp;<span class="builtintype" id="7287356">error</span><span class="op" id="7287361">)</span>&nbsp;<span class="op" id="7287363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287366">return</span>&nbsp;<span class="ident" id="7287373">a</span><span class="op" id="7287374">.</span><span class="ident" id="7287375">a</span><span class="op" id="7287376">[</span><span class="op" id="7287377">:</span><span class="op" id="7287378">]</span><span class="op" id="7287379">,</span>&nbsp;<span class="builtintype" id="7287381">nil</span><br>
<span class="lineno"></span><span class="op" id="7287385">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7287388">func</span>&nbsp;<span class="op" id="7287393">(</span><span class="ident" id="7287394">a</span>&nbsp;<span class="op" id="7287396">*</span><span class="ident" id="7287397">ArrayStruct</span><span class="op" id="7287408">)</span>&nbsp;<span class="ident" id="7287410">GobDecode</span><span class="op" id="7287419">(</span><span class="ident" id="7287420">data</span>&nbsp;<span class="op" id="7287425">[</span><span class="op" id="7287426">]</span><span class="builtintype" id="7287427">byte</span><span class="op" id="7287431">)</span>&nbsp;<span class="builtintype" id="7287433">error</span>&nbsp;<span class="op" id="7287439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287442">if</span>&nbsp;<span class="builtinfunc" id="7287445">len</span><span class="op" id="7287448">(</span><span class="ident" id="7287449">data</span><span class="op" id="7287453">)</span>&nbsp;<span class="op" id="7287455">!=</span>&nbsp;<span class="builtinfunc" id="7287458">len</span><span class="op" id="7287461">(</span><span class="ident" id="7287462">a</span><span class="op" id="7287463">.</span><span class="ident" id="7287464">a</span><span class="op" id="7287465">)</span>&nbsp;<span class="op" id="7287467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287471">return</span>&nbsp;<span class="ident" id="7287478">errors</span><span class="op" id="7287484">.</span><span class="ident" id="7287485">New</span><span class="op" id="7287488">(</span><span class="string" id="7287489">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="7287519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7287522">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7287525">copy</span><span class="op" id="7287529">(</span><span class="ident" id="7287530">a</span><span class="op" id="7287531">.</span><span class="ident" id="7287532">a</span><span class="op" id="7287533">[</span><span class="op" id="7287534">:</span><span class="op" id="7287535">]</span><span class="op" id="7287536">,</span>&nbsp;<span class="ident" id="7287538">data</span><span class="op" id="7287542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287545">return</span>&nbsp;<span class="builtintype" id="7287552">nil</span><br>
<span class="lineno"></span><span class="op" id="7287556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7287559">func</span>&nbsp;<span class="op" id="7287564">(</span><span class="ident" id="7287565">g</span>&nbsp;<span class="op" id="7287567">*</span><span class="ident" id="7287568">Gobber</span><span class="op" id="7287574">)</span>&nbsp;<span class="ident" id="7287576">GobEncode</span><span class="op" id="7287585">(</span><span class="op" id="7287586">)</span>&nbsp;<span class="op" id="7287588">(</span><span class="op" id="7287589">[</span><span class="op" id="7287590">]</span><span class="builtintype" id="7287591">byte</span><span class="op" id="7287595">,</span>&nbsp;<span class="builtintype" id="7287597">error</span><span class="op" id="7287602">)</span>&nbsp;<span class="op" id="7287604">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287607">return</span>&nbsp;<span class="op" id="7287614">[</span><span class="op" id="7287615">]</span><span class="builtintype" id="7287616">byte</span><span class="op" id="7287620">(</span><span class="ident" id="7287621">fmt</span><span class="op" id="7287624">.</span><span class="ident" id="7287625">Sprintf</span><span class="op" id="7287632">(</span><span class="string" id="7287633">&#34;VALUE=%d&#34;</span><span class="op" id="7287643">,</span>&nbsp;<span class="op" id="7287645">*</span><span class="ident" id="7287646">g</span><span class="op" id="7287647">)</span><span class="op" id="7287648">)</span><span class="op" id="7287649">,</span>&nbsp;<span class="builtintype" id="7287651">nil</span><br>
<span class="lineno"></span><span class="op" id="7287655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7287658">func</span>&nbsp;<span class="op" id="7287663">(</span><span class="ident" id="7287664">g</span>&nbsp;<span class="op" id="7287666">*</span><span class="ident" id="7287667">Gobber</span><span class="op" id="7287673">)</span>&nbsp;<span class="ident" id="7287675">GobDecode</span><span class="op" id="7287684">(</span><span class="ident" id="7287685">data</span>&nbsp;<span class="op" id="7287690">[</span><span class="op" id="7287691">]</span><span class="builtintype" id="7287692">byte</span><span class="op" id="7287696">)</span>&nbsp;<span class="builtintype" id="7287698">error</span>&nbsp;<span class="op" id="7287704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7287707">_</span><span class="op" id="7287708">,</span>&nbsp;<span class="ident" id="7287710">err</span>&nbsp;<span class="op" id="7287714">:=</span>&nbsp;<span class="ident" id="7287717">fmt</span><span class="op" id="7287720">.</span><span class="ident" id="7287721">Sscanf</span><span class="op" id="7287727">(</span><span class="builtintype" id="7287728">string</span><span class="op" id="7287734">(</span><span class="ident" id="7287735">data</span><span class="op" id="7287739">)</span><span class="op" id="7287740">,</span>&nbsp;<span class="string" id="7287742">&#34;VALUE=%d&#34;</span><span class="op" id="7287752">,</span>&nbsp;<span class="op" id="7287754">(</span><span class="op" id="7287755">*</span><span class="builtintype" id="7287756">int</span><span class="op" id="7287759">)</span><span class="op" id="7287760">(</span><span class="ident" id="7287761">g</span><span class="op" id="7287762">)</span><span class="op" id="7287763">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287766">return</span>&nbsp;<span class="ident" id="7287773">err</span><br>
<span class="lineno"></span><span class="op" id="7287777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7287780">func</span>&nbsp;<span class="op" id="7287785">(</span><span class="ident" id="7287786">g</span>&nbsp;<span class="op" id="7287788">*</span><span class="ident" id="7287789">BinaryGobber</span><span class="op" id="7287801">)</span>&nbsp;<span class="ident" id="7287803">MarshalBinary</span><span class="op" id="7287816">(</span><span class="op" id="7287817">)</span>&nbsp;<span class="op" id="7287819">(</span><span class="op" id="7287820">[</span><span class="op" id="7287821">]</span><span class="builtintype" id="7287822">byte</span><span class="op" id="7287826">,</span>&nbsp;<span class="builtintype" id="7287828">error</span><span class="op" id="7287833">)</span>&nbsp;<span class="op" id="7287835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7287838">return</span>&nbsp;<span class="op" id="7287845">[</span><span class="op" id="7287846">]</span><span class="builtintype" id="7287847">byte</span><span class="op" id="7287851">(</span><span class="ident" id="7287852">fmt</span><span class="op" id="7287855">.</span><span class="ident" id="7287856">Sprintf</span><span class="op" id="7287863">(</span><span class="string" id="7287864">&#34;VALUE=%d&#34;</span><span class="op" id="7287874">,</span>&nbsp;<span class="op" id="7287876">*</span><span class="ident" id="7287877">g</span><span class="op" id="7287878">)</span><span class="op" id="7287879">)</span><span class="op" id="7287880">,</span>&nbsp;<span class="builtintype" id="7287882">nil</span><br>
<span class="lineno">115</span><span class="op" id="7287886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7287889">func</span>&nbsp;<span class="op" id="7287894">(</span><span class="ident" id="7287895">g</span>&nbsp;<span class="op" id="7287897">*</span><span class="ident" id="7287898">BinaryGobber</span><span class="op" id="7287910">)</span>&nbsp;<span class="ident" id="7287912">UnmarshalBinary</span><span class="op" id="7287927">(</span><span class="ident" id="7287928">data</span>&nbsp;<span class="op" id="7287933">[</span><span class="op" id="7287934">]</span><span class="builtintype" id="7287935">byte</span><span class="op" id="7287939">)</span>&nbsp;<span class="builtintype" id="7287941">error</span>&nbsp;<span class="op" id="7287947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7287950">_</span><span class="op" id="7287951">,</span>&nbsp;<span class="ident" id="7287953">err</span>&nbsp;<span class="op" id="7287957">:=</span>&nbsp;<span class="ident" id="7287960">fmt</span><span class="op" id="7287963">.</span><span class="ident" id="7287964">Sscanf</span><span class="op" id="7287970">(</span><span class="builtintype" id="7287971">string</span><span class="op" id="7287977">(</span><span class="ident" id="7287978">data</span><span class="op" id="7287982">)</span><span class="op" id="7287983">,</span>&nbsp;<span class="string" id="7287985">&#34;VALUE=%d&#34;</span><span class="op" id="7287995">,</span>&nbsp;<span class="op" id="7287997">(</span><span class="op" id="7287998">*</span><span class="builtintype" id="7287999">int</span><span class="op" id="7288002">)</span><span class="op" id="7288003">(</span><span class="ident" id="7288004">g</span><span class="op" id="7288005">)</span><span class="op" id="7288006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288009">return</span>&nbsp;<span class="ident" id="7288016">err</span><br>
<span class="lineno">120</span><span class="op" id="7288020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7288023">func</span>&nbsp;<span class="op" id="7288028">(</span><span class="ident" id="7288029">g</span>&nbsp;<span class="op" id="7288031">*</span><span class="ident" id="7288032">TextGobber</span><span class="op" id="7288042">)</span>&nbsp;<span class="ident" id="7288044">MarshalText</span><span class="op" id="7288055">(</span><span class="op" id="7288056">)</span>&nbsp;<span class="op" id="7288058">(</span><span class="op" id="7288059">[</span><span class="op" id="7288060">]</span><span class="builtintype" id="7288061">byte</span><span class="op" id="7288065">,</span>&nbsp;<span class="builtintype" id="7288067">error</span><span class="op" id="7288072">)</span>&nbsp;<span class="op" id="7288074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288077">return</span>&nbsp;<span class="op" id="7288084">[</span><span class="op" id="7288085">]</span><span class="builtintype" id="7288086">byte</span><span class="op" id="7288090">(</span><span class="ident" id="7288091">fmt</span><span class="op" id="7288094">.</span><span class="ident" id="7288095">Sprintf</span><span class="op" id="7288102">(</span><span class="string" id="7288103">&#34;VALUE=%d&#34;</span><span class="op" id="7288113">,</span>&nbsp;<span class="op" id="7288115">*</span><span class="ident" id="7288116">g</span><span class="op" id="7288117">)</span><span class="op" id="7288118">)</span><span class="op" id="7288119">,</span>&nbsp;<span class="builtintype" id="7288121">nil</span><br>
<span class="lineno"></span><span class="op" id="7288125">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="7288128">func</span>&nbsp;<span class="op" id="7288133">(</span><span class="ident" id="7288134">g</span>&nbsp;<span class="op" id="7288136">*</span><span class="ident" id="7288137">TextGobber</span><span class="op" id="7288147">)</span>&nbsp;<span class="ident" id="7288149">UnmarshalText</span><span class="op" id="7288162">(</span><span class="ident" id="7288163">data</span>&nbsp;<span class="op" id="7288168">[</span><span class="op" id="7288169">]</span><span class="builtintype" id="7288170">byte</span><span class="op" id="7288174">)</span>&nbsp;<span class="builtintype" id="7288176">error</span>&nbsp;<span class="op" id="7288182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288185">_</span><span class="op" id="7288186">,</span>&nbsp;<span class="ident" id="7288188">err</span>&nbsp;<span class="op" id="7288192">:=</span>&nbsp;<span class="ident" id="7288195">fmt</span><span class="op" id="7288198">.</span><span class="ident" id="7288199">Sscanf</span><span class="op" id="7288205">(</span><span class="builtintype" id="7288206">string</span><span class="op" id="7288212">(</span><span class="ident" id="7288213">data</span><span class="op" id="7288217">)</span><span class="op" id="7288218">,</span>&nbsp;<span class="string" id="7288220">&#34;VALUE=%d&#34;</span><span class="op" id="7288230">,</span>&nbsp;<span class="op" id="7288232">(</span><span class="op" id="7288233">*</span><span class="builtintype" id="7288234">int</span><span class="op" id="7288237">)</span><span class="op" id="7288238">(</span><span class="ident" id="7288239">g</span><span class="op" id="7288240">)</span><span class="op" id="7288241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288244">return</span>&nbsp;<span class="ident" id="7288251">err</span><br>
<span class="lineno"></span><span class="op" id="7288255">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="7288258">func</span>&nbsp;<span class="op" id="7288263">(</span><span class="ident" id="7288264">v</span>&nbsp;<span class="ident" id="7288266">ValueGobber</span><span class="op" id="7288277">)</span>&nbsp;<span class="ident" id="7288279">GobEncode</span><span class="op" id="7288288">(</span><span class="op" id="7288289">)</span>&nbsp;<span class="op" id="7288291">(</span><span class="op" id="7288292">[</span><span class="op" id="7288293">]</span><span class="builtintype" id="7288294">byte</span><span class="op" id="7288298">,</span>&nbsp;<span class="builtintype" id="7288300">error</span><span class="op" id="7288305">)</span>&nbsp;<span class="op" id="7288307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288310">return</span>&nbsp;<span class="op" id="7288317">[</span><span class="op" id="7288318">]</span><span class="builtintype" id="7288319">byte</span><span class="op" id="7288323">(</span><span class="ident" id="7288324">fmt</span><span class="op" id="7288327">.</span><span class="ident" id="7288328">Sprintf</span><span class="op" id="7288335">(</span><span class="string" id="7288336">&#34;VALUE=%s&#34;</span><span class="op" id="7288346">,</span>&nbsp;<span class="ident" id="7288348">v</span><span class="op" id="7288349">)</span><span class="op" id="7288350">)</span><span class="op" id="7288351">,</span>&nbsp;<span class="builtintype" id="7288353">nil</span><br>
<span class="lineno"></span><span class="op" id="7288357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7288360">func</span>&nbsp;<span class="op" id="7288365">(</span><span class="ident" id="7288366">v</span>&nbsp;<span class="op" id="7288368">*</span><span class="ident" id="7288369">ValueGobber</span><span class="op" id="7288380">)</span>&nbsp;<span class="ident" id="7288382">GobDecode</span><span class="op" id="7288391">(</span><span class="ident" id="7288392">data</span>&nbsp;<span class="op" id="7288397">[</span><span class="op" id="7288398">]</span><span class="builtintype" id="7288399">byte</span><span class="op" id="7288403">)</span>&nbsp;<span class="builtintype" id="7288405">error</span>&nbsp;<span class="op" id="7288411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288414">_</span><span class="op" id="7288415">,</span>&nbsp;<span class="ident" id="7288417">err</span>&nbsp;<span class="op" id="7288421">:=</span>&nbsp;<span class="ident" id="7288424">fmt</span><span class="op" id="7288427">.</span><span class="ident" id="7288428">Sscanf</span><span class="op" id="7288434">(</span><span class="builtintype" id="7288435">string</span><span class="op" id="7288441">(</span><span class="ident" id="7288442">data</span><span class="op" id="7288446">)</span><span class="op" id="7288447">,</span>&nbsp;<span class="string" id="7288449">&#34;VALUE=%s&#34;</span><span class="op" id="7288459">,</span>&nbsp;<span class="op" id="7288461">(</span><span class="op" id="7288462">*</span><span class="builtintype" id="7288463">string</span><span class="op" id="7288469">)</span><span class="op" id="7288470">(</span><span class="ident" id="7288471">v</span><span class="op" id="7288472">)</span><span class="op" id="7288473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288476">return</span>&nbsp;<span class="ident" id="7288483">err</span><br>
<span class="lineno"></span><span class="op" id="7288487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7288490">func</span>&nbsp;<span class="op" id="7288495">(</span><span class="ident" id="7288496">v</span>&nbsp;<span class="ident" id="7288498">BinaryValueGobber</span><span class="op" id="7288515">)</span>&nbsp;<span class="ident" id="7288517">MarshalBinary</span><span class="op" id="7288530">(</span><span class="op" id="7288531">)</span>&nbsp;<span class="op" id="7288533">(</span><span class="op" id="7288534">[</span><span class="op" id="7288535">]</span><span class="builtintype" id="7288536">byte</span><span class="op" id="7288540">,</span>&nbsp;<span class="builtintype" id="7288542">error</span><span class="op" id="7288547">)</span>&nbsp;<span class="op" id="7288549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288552">return</span>&nbsp;<span class="op" id="7288559">[</span><span class="op" id="7288560">]</span><span class="builtintype" id="7288561">byte</span><span class="op" id="7288565">(</span><span class="ident" id="7288566">fmt</span><span class="op" id="7288569">.</span><span class="ident" id="7288570">Sprintf</span><span class="op" id="7288577">(</span><span class="string" id="7288578">&#34;VALUE=%s&#34;</span><span class="op" id="7288588">,</span>&nbsp;<span class="ident" id="7288590">v</span><span class="op" id="7288591">)</span><span class="op" id="7288592">)</span><span class="op" id="7288593">,</span>&nbsp;<span class="builtintype" id="7288595">nil</span><br>
<span class="lineno"></span><span class="op" id="7288599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7288602">func</span>&nbsp;<span class="op" id="7288607">(</span><span class="ident" id="7288608">v</span>&nbsp;<span class="op" id="7288610">*</span><span class="ident" id="7288611">BinaryValueGobber</span><span class="op" id="7288628">)</span>&nbsp;<span class="ident" id="7288630">UnmarshalBinary</span><span class="op" id="7288645">(</span><span class="ident" id="7288646">data</span>&nbsp;<span class="op" id="7288651">[</span><span class="op" id="7288652">]</span><span class="builtintype" id="7288653">byte</span><span class="op" id="7288657">)</span>&nbsp;<span class="builtintype" id="7288659">error</span>&nbsp;<span class="op" id="7288665">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288668">_</span><span class="op" id="7288669">,</span>&nbsp;<span class="ident" id="7288671">err</span>&nbsp;<span class="op" id="7288675">:=</span>&nbsp;<span class="ident" id="7288678">fmt</span><span class="op" id="7288681">.</span><span class="ident" id="7288682">Sscanf</span><span class="op" id="7288688">(</span><span class="builtintype" id="7288689">string</span><span class="op" id="7288695">(</span><span class="ident" id="7288696">data</span><span class="op" id="7288700">)</span><span class="op" id="7288701">,</span>&nbsp;<span class="string" id="7288703">&#34;VALUE=%s&#34;</span><span class="op" id="7288713">,</span>&nbsp;<span class="op" id="7288715">(</span><span class="op" id="7288716">*</span><span class="builtintype" id="7288717">string</span><span class="op" id="7288723">)</span><span class="op" id="7288724">(</span><span class="ident" id="7288725">v</span><span class="op" id="7288726">)</span><span class="op" id="7288727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288730">return</span>&nbsp;<span class="ident" id="7288737">err</span><br>
<span class="lineno"></span><span class="op" id="7288741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7288744">func</span>&nbsp;<span class="op" id="7288749">(</span><span class="ident" id="7288750">v</span>&nbsp;<span class="ident" id="7288752">TextValueGobber</span><span class="op" id="7288767">)</span>&nbsp;<span class="ident" id="7288769">MarshalText</span><span class="op" id="7288780">(</span><span class="op" id="7288781">)</span>&nbsp;<span class="op" id="7288783">(</span><span class="op" id="7288784">[</span><span class="op" id="7288785">]</span><span class="builtintype" id="7288786">byte</span><span class="op" id="7288790">,</span>&nbsp;<span class="builtintype" id="7288792">error</span><span class="op" id="7288797">)</span>&nbsp;<span class="op" id="7288799">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288802">return</span>&nbsp;<span class="op" id="7288809">[</span><span class="op" id="7288810">]</span><span class="builtintype" id="7288811">byte</span><span class="op" id="7288815">(</span><span class="ident" id="7288816">fmt</span><span class="op" id="7288819">.</span><span class="ident" id="7288820">Sprintf</span><span class="op" id="7288827">(</span><span class="string" id="7288828">&#34;VALUE=%s&#34;</span><span class="op" id="7288838">,</span>&nbsp;<span class="ident" id="7288840">v</span><span class="op" id="7288841">)</span><span class="op" id="7288842">)</span><span class="op" id="7288843">,</span>&nbsp;<span class="builtintype" id="7288845">nil</span><br>
<span class="lineno"></span><span class="op" id="7288849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7288852">func</span>&nbsp;<span class="op" id="7288857">(</span><span class="ident" id="7288858">v</span>&nbsp;<span class="op" id="7288860">*</span><span class="ident" id="7288861">TextValueGobber</span><span class="op" id="7288876">)</span>&nbsp;<span class="ident" id="7288878">UnmarshalText</span><span class="op" id="7288891">(</span><span class="ident" id="7288892">data</span>&nbsp;<span class="op" id="7288897">[</span><span class="op" id="7288898">]</span><span class="builtintype" id="7288899">byte</span><span class="op" id="7288903">)</span>&nbsp;<span class="builtintype" id="7288905">error</span>&nbsp;<span class="op" id="7288911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7288914">_</span><span class="op" id="7288915">,</span>&nbsp;<span class="ident" id="7288917">err</span>&nbsp;<span class="op" id="7288921">:=</span>&nbsp;<span class="ident" id="7288924">fmt</span><span class="op" id="7288927">.</span><span class="ident" id="7288928">Sscanf</span><span class="op" id="7288934">(</span><span class="builtintype" id="7288935">string</span><span class="op" id="7288941">(</span><span class="ident" id="7288942">data</span><span class="op" id="7288946">)</span><span class="op" id="7288947">,</span>&nbsp;<span class="string" id="7288949">&#34;VALUE=%s&#34;</span><span class="op" id="7288959">,</span>&nbsp;<span class="op" id="7288961">(</span><span class="op" id="7288962">*</span><span class="builtintype" id="7288963">string</span><span class="op" id="7288969">)</span><span class="op" id="7288970">(</span><span class="ident" id="7288971">v</span><span class="op" id="7288972">)</span><span class="op" id="7288973">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7288976">return</span>&nbsp;<span class="ident" id="7288983">err</span><br>
<span class="lineno"></span><span class="op" id="7288987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7288990">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7289036">type</span>&nbsp;<span class="ident" id="7289041">GobTest0</span>&nbsp;<span class="keyword" id="7289050">struct</span>&nbsp;<span class="op" id="7289057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289060">X</span>&nbsp;<span class="builtintype" id="7289062">int</span>&nbsp;<span class="comment" id="7289066">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289123">G</span>&nbsp;<span class="op" id="7289125">*</span><span class="ident" id="7289126">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="7289137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7289140">type</span>&nbsp;<span class="ident" id="7289145">GobTest1</span>&nbsp;<span class="keyword" id="7289154">struct</span>&nbsp;<span class="op" id="7289161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289164">X</span>&nbsp;<span class="builtintype" id="7289166">int</span>&nbsp;<span class="comment" id="7289170">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289227">G</span>&nbsp;<span class="op" id="7289229">*</span><span class="ident" id="7289230">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="7289243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7289246">type</span>&nbsp;<span class="ident" id="7289251">GobTest2</span>&nbsp;<span class="keyword" id="7289260">struct</span>&nbsp;<span class="op" id="7289267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289270">X</span>&nbsp;<span class="builtintype" id="7289272">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7289279">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289336">G</span>&nbsp;<span class="builtintype" id="7289338">string</span>&nbsp;<span class="comment" id="7289345">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="7289389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="7289392">type</span>&nbsp;<span class="ident" id="7289397">GobTest3</span>&nbsp;<span class="keyword" id="7289406">struct</span>&nbsp;<span class="op" id="7289413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289416">X</span>&nbsp;<span class="builtintype" id="7289418">int</span>&nbsp;<span class="comment" id="7289422">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289479">G</span>&nbsp;<span class="op" id="7289481">*</span><span class="ident" id="7289482">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289490">B</span>&nbsp;<span class="op" id="7289492">*</span><span class="ident" id="7289493">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289507">T</span>&nbsp;<span class="op" id="7289509">*</span><span class="ident" id="7289510">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="7289521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7289524">type</span>&nbsp;<span class="ident" id="7289529">GobTest4</span>&nbsp;<span class="keyword" id="7289538">struct</span>&nbsp;<span class="op" id="7289545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289548">X</span>&nbsp;&nbsp;<span class="builtintype" id="7289551">int</span>&nbsp;<span class="comment" id="7289555">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289612">V</span>&nbsp;&nbsp;<span class="ident" id="7289615">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289628">BV</span>&nbsp;<span class="ident" id="7289631">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289650">TV</span>&nbsp;<span class="ident" id="7289653">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7289669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7289672">type</span>&nbsp;<span class="ident" id="7289677">GobTest5</span>&nbsp;<span class="keyword" id="7289686">struct</span>&nbsp;<span class="op" id="7289693">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289696">X</span>&nbsp;&nbsp;<span class="builtintype" id="7289699">int</span>&nbsp;<span class="comment" id="7289703">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289760">V</span>&nbsp;&nbsp;<span class="op" id="7289763">*</span><span class="ident" id="7289764">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289777">BV</span>&nbsp;<span class="op" id="7289780">*</span><span class="ident" id="7289781">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289800">TV</span>&nbsp;<span class="op" id="7289803">*</span><span class="ident" id="7289804">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7289820">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7289823">type</span>&nbsp;<span class="ident" id="7289828">GobTest6</span>&nbsp;<span class="keyword" id="7289837">struct</span>&nbsp;<span class="op" id="7289844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289847">X</span>&nbsp;&nbsp;<span class="builtintype" id="7289850">int</span>&nbsp;<span class="comment" id="7289854">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289911">V</span>&nbsp;&nbsp;<span class="ident" id="7289914">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289927">W</span>&nbsp;&nbsp;<span class="op" id="7289930">*</span><span class="ident" id="7289931">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289944">BV</span>&nbsp;<span class="ident" id="7289947">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289966">BW</span>&nbsp;<span class="op" id="7289969">*</span><span class="ident" id="7289970">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7289989">TV</span>&nbsp;<span class="ident" id="7289992">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290009">TW</span>&nbsp;<span class="op" id="7290012">*</span><span class="ident" id="7290013">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7290029">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7290032">type</span>&nbsp;<span class="ident" id="7290037">GobTest7</span>&nbsp;<span class="keyword" id="7290046">struct</span>&nbsp;<span class="op" id="7290053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290056">X</span>&nbsp;&nbsp;<span class="builtintype" id="7290059">int</span>&nbsp;<span class="comment" id="7290063">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290120">V</span>&nbsp;&nbsp;<span class="op" id="7290123">*</span><span class="ident" id="7290124">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290137">W</span>&nbsp;&nbsp;<span class="ident" id="7290140">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290153">BV</span>&nbsp;<span class="op" id="7290156">*</span><span class="ident" id="7290157">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290176">BW</span>&nbsp;<span class="ident" id="7290179">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290198">TV</span>&nbsp;<span class="op" id="7290201">*</span><span class="ident" id="7290202">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290219">TW</span>&nbsp;<span class="ident" id="7290222">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7290238">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="7290241">type</span>&nbsp;<span class="ident" id="7290246">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="7290267">struct</span>&nbsp;<span class="op" id="7290274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290277">X</span>&nbsp;<span class="builtintype" id="7290279">int</span>&nbsp;<span class="comment" id="7290283">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="7290339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="7290342">type</span>&nbsp;<span class="ident" id="7290347">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="7290366">struct</span>&nbsp;<span class="op" id="7290373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290376">X</span>&nbsp;<span class="builtintype" id="7290378">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7290391">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290448">G</span>&nbsp;<span class="ident" id="7290450">StringStruct</span>&nbsp;<span class="comment" id="7290463">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="7290481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="7290484">type</span>&nbsp;<span class="ident" id="7290489">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="7290511">struct</span>&nbsp;<span class="op" id="7290518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290521">X</span>&nbsp;<span class="builtintype" id="7290523">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7290539">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290596">G</span>&nbsp;<span class="op" id="7290598">*</span><span class="op" id="7290599">*</span><span class="op" id="7290600">*</span><span class="ident" id="7290601">StringStruct</span>&nbsp;<span class="comment" id="7290614">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="7290647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="7290650">type</span>&nbsp;<span class="ident" id="7290655">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="7290674">struct</span>&nbsp;<span class="op" id="7290681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290684">X</span>&nbsp;<span class="builtintype" id="7290686">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7290698">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290755">A</span>&nbsp;<span class="ident" id="7290757">ArrayStruct</span>&nbsp;<span class="comment" id="7290769">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="7290787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="7290790">type</span>&nbsp;<span class="ident" id="7290795">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="7290822">struct</span>&nbsp;<span class="op" id="7290829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290832">X</span>&nbsp;<span class="builtintype" id="7290834">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7290849">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7290906">A</span>&nbsp;<span class="op" id="7290908">*</span><span class="op" id="7290909">*</span><span class="op" id="7290910">*</span><span class="ident" id="7290911">ArrayStruct</span>&nbsp;<span class="comment" id="7290923">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="7290960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7290963">func</span>&nbsp;<span class="ident" id="7290968">TestGobEncoderField</span><span class="op" id="7290987">(</span><span class="ident" id="7290988">t</span>&nbsp;<span class="op" id="7290990">*</span><span class="ident" id="7290991">testing</span><span class="op" id="7290998">.</span><span class="ident" id="7290999">T</span><span class="op" id="7291000">)</span>&nbsp;<span class="op" id="7291002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291005">b</span>&nbsp;<span class="op" id="7291007">:=</span>&nbsp;<span class="builtinfunc" id="7291010">new</span><span class="op" id="7291013">(</span><span class="ident" id="7291014">bytes</span><span class="op" id="7291019">.</span><span class="ident" id="7291020">Buffer</span><span class="op" id="7291026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7291029">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291067">enc</span>&nbsp;<span class="op" id="7291071">:=</span>&nbsp;<span class="ident" id="7291074">NewEncoder</span><span class="op" id="7291084">(</span><span class="ident" id="7291085">b</span><span class="op" id="7291086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291089">err</span>&nbsp;<span class="op" id="7291093">:=</span>&nbsp;<span class="ident" id="7291096">enc</span><span class="op" id="7291099">.</span><span class="ident" id="7291100">Encode</span><span class="op" id="7291106">(</span><span class="ident" id="7291107">GobTest0</span><span class="op" id="7291115">{</span><span class="num" id="7291116">17</span><span class="op" id="7291118">,</span>&nbsp;<span class="op" id="7291120">&amp;</span><span class="ident" id="7291121">ByteStruct</span><span class="op" id="7291131">{</span><span class="string" id="7291132">&#39;A&#39;</span><span class="op" id="7291135">}</span><span class="op" id="7291136">}</span><span class="op" id="7291137">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291140">if</span>&nbsp;<span class="ident" id="7291143">err</span>&nbsp;<span class="op" id="7291147">!=</span>&nbsp;<span class="builtintype" id="7291150">nil</span>&nbsp;<span class="op" id="7291154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291158">t</span><span class="op" id="7291159">.</span><span class="ident" id="7291160">Fatal</span><span class="op" id="7291165">(</span><span class="string" id="7291166">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7291181">,</span>&nbsp;<span class="ident" id="7291183">err</span><span class="op" id="7291186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291192">dec</span>&nbsp;<span class="op" id="7291196">:=</span>&nbsp;<span class="ident" id="7291199">NewDecoder</span><span class="op" id="7291209">(</span><span class="ident" id="7291210">b</span><span class="op" id="7291211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291214">x</span>&nbsp;<span class="op" id="7291216">:=</span>&nbsp;<span class="builtinfunc" id="7291219">new</span><span class="op" id="7291222">(</span><span class="ident" id="7291223">GobTest0</span><span class="op" id="7291231">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291234">err</span>&nbsp;<span class="op" id="7291238">=</span>&nbsp;<span class="ident" id="7291240">dec</span><span class="op" id="7291243">.</span><span class="ident" id="7291244">Decode</span><span class="op" id="7291250">(</span><span class="ident" id="7291251">x</span><span class="op" id="7291252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291255">if</span>&nbsp;<span class="ident" id="7291258">err</span>&nbsp;<span class="op" id="7291262">!=</span>&nbsp;<span class="builtintype" id="7291265">nil</span>&nbsp;<span class="op" id="7291269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291273">t</span><span class="op" id="7291274">.</span><span class="ident" id="7291275">Fatal</span><span class="op" id="7291280">(</span><span class="string" id="7291281">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7291296">,</span>&nbsp;<span class="ident" id="7291298">err</span><span class="op" id="7291301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291307">if</span>&nbsp;<span class="ident" id="7291310">x</span><span class="op" id="7291311">.</span><span class="ident" id="7291312">G</span><span class="op" id="7291313">.</span><span class="ident" id="7291314">a</span>&nbsp;<span class="op" id="7291316">!=</span>&nbsp;<span class="string" id="7291319">&#39;A&#39;</span>&nbsp;<span class="op" id="7291323">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291327">t</span><span class="op" id="7291328">.</span><span class="ident" id="7291329">Errorf</span><span class="op" id="7291335">(</span><span class="string" id="7291336">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7291357">,</span>&nbsp;<span class="ident" id="7291359">x</span><span class="op" id="7291360">.</span><span class="ident" id="7291361">G</span><span class="op" id="7291362">.</span><span class="ident" id="7291363">a</span><span class="op" id="7291364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7291370">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291410">b</span><span class="op" id="7291411">.</span><span class="ident" id="7291412">Reset</span><span class="op" id="7291417">(</span><span class="op" id="7291418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291421">gobber</span>&nbsp;<span class="op" id="7291428">:=</span>&nbsp;<span class="ident" id="7291431">Gobber</span><span class="op" id="7291437">(</span><span class="num" id="7291438">23</span><span class="op" id="7291440">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291443">bgobber</span>&nbsp;<span class="op" id="7291451">:=</span>&nbsp;<span class="ident" id="7291454">BinaryGobber</span><span class="op" id="7291466">(</span><span class="num" id="7291467">24</span><span class="op" id="7291469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291472">tgobber</span>&nbsp;<span class="op" id="7291480">:=</span>&nbsp;<span class="ident" id="7291483">TextGobber</span><span class="op" id="7291493">(</span><span class="num" id="7291494">25</span><span class="op" id="7291496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291499">err</span>&nbsp;<span class="op" id="7291503">=</span>&nbsp;<span class="ident" id="7291505">enc</span><span class="op" id="7291508">.</span><span class="ident" id="7291509">Encode</span><span class="op" id="7291515">(</span><span class="ident" id="7291516">GobTest3</span><span class="op" id="7291524">{</span><span class="num" id="7291525">17</span><span class="op" id="7291527">,</span>&nbsp;<span class="op" id="7291529">&amp;</span><span class="ident" id="7291530">gobber</span><span class="op" id="7291536">,</span>&nbsp;<span class="op" id="7291538">&amp;</span><span class="ident" id="7291539">bgobber</span><span class="op" id="7291546">,</span>&nbsp;<span class="op" id="7291548">&amp;</span><span class="ident" id="7291549">tgobber</span><span class="op" id="7291556">}</span><span class="op" id="7291557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291560">if</span>&nbsp;<span class="ident" id="7291563">err</span>&nbsp;<span class="op" id="7291567">!=</span>&nbsp;<span class="builtintype" id="7291570">nil</span>&nbsp;<span class="op" id="7291574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291578">t</span><span class="op" id="7291579">.</span><span class="ident" id="7291580">Fatal</span><span class="op" id="7291585">(</span><span class="string" id="7291586">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7291601">,</span>&nbsp;<span class="ident" id="7291603">err</span><span class="op" id="7291606">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291612">y</span>&nbsp;<span class="op" id="7291614">:=</span>&nbsp;<span class="builtinfunc" id="7291617">new</span><span class="op" id="7291620">(</span><span class="ident" id="7291621">GobTest3</span><span class="op" id="7291629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291632">err</span>&nbsp;<span class="op" id="7291636">=</span>&nbsp;<span class="ident" id="7291638">dec</span><span class="op" id="7291641">.</span><span class="ident" id="7291642">Decode</span><span class="op" id="7291648">(</span><span class="ident" id="7291649">y</span><span class="op" id="7291650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291653">if</span>&nbsp;<span class="ident" id="7291656">err</span>&nbsp;<span class="op" id="7291660">!=</span>&nbsp;<span class="builtintype" id="7291663">nil</span>&nbsp;<span class="op" id="7291667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291671">t</span><span class="op" id="7291672">.</span><span class="ident" id="7291673">Fatal</span><span class="op" id="7291678">(</span><span class="string" id="7291679">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7291694">,</span>&nbsp;<span class="ident" id="7291696">err</span><span class="op" id="7291699">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7291705">if</span>&nbsp;<span class="op" id="7291708">*</span><span class="ident" id="7291709">y</span><span class="op" id="7291710">.</span><span class="ident" id="7291711">G</span>&nbsp;<span class="op" id="7291713">!=</span>&nbsp;<span class="num" id="7291716">23</span>&nbsp;<span class="op" id="7291719">||</span>&nbsp;<span class="op" id="7291722">*</span><span class="ident" id="7291723">y</span><span class="op" id="7291724">.</span><span class="ident" id="7291725">B</span>&nbsp;<span class="op" id="7291727">!=</span>&nbsp;<span class="num" id="7291730">24</span>&nbsp;<span class="op" id="7291733">||</span>&nbsp;<span class="op" id="7291736">*</span><span class="ident" id="7291737">y</span><span class="op" id="7291738">.</span><span class="ident" id="7291739">T</span>&nbsp;<span class="op" id="7291741">!=</span>&nbsp;<span class="num" id="7291744">25</span>&nbsp;<span class="op" id="7291747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291751">t</span><span class="op" id="7291752">.</span><span class="ident" id="7291753">Errorf</span><span class="op" id="7291759">(</span><span class="string" id="7291760">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7291781">,</span>&nbsp;<span class="op" id="7291783">*</span><span class="ident" id="7291784">y</span><span class="op" id="7291785">.</span><span class="ident" id="7291786">G</span><span class="op" id="7291787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7291790">}</span><br>
<span class="lineno"></span><span class="op" id="7291792">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="7291795">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="7291862">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7291905">func</span>&nbsp;<span class="ident" id="7291910">TestGobEncoderValueField</span><span class="op" id="7291934">(</span><span class="ident" id="7291935">t</span>&nbsp;<span class="op" id="7291937">*</span><span class="ident" id="7291938">testing</span><span class="op" id="7291945">.</span><span class="ident" id="7291946">T</span><span class="op" id="7291947">)</span>&nbsp;<span class="op" id="7291949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7291952">b</span>&nbsp;<span class="op" id="7291954">:=</span>&nbsp;<span class="builtinfunc" id="7291957">new</span><span class="op" id="7291960">(</span><span class="ident" id="7291961">bytes</span><span class="op" id="7291966">.</span><span class="ident" id="7291967">Buffer</span><span class="op" id="7291973">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7291976">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292014">enc</span>&nbsp;<span class="op" id="7292018">:=</span>&nbsp;<span class="ident" id="7292021">NewEncoder</span><span class="op" id="7292031">(</span><span class="ident" id="7292032">b</span><span class="op" id="7292033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292036">err</span>&nbsp;<span class="op" id="7292040">:=</span>&nbsp;<span class="ident" id="7292043">enc</span><span class="op" id="7292046">.</span><span class="ident" id="7292047">Encode</span><span class="op" id="7292053">(</span><span class="op" id="7292054">&amp;</span><span class="ident" id="7292055">GobTestValueEncDec</span><span class="op" id="7292073">{</span><span class="num" id="7292074">17</span><span class="op" id="7292076">,</span>&nbsp;<span class="ident" id="7292078">StringStruct</span><span class="op" id="7292090">{</span><span class="string" id="7292091">&#34;HIJKL&#34;</span><span class="op" id="7292098">}</span><span class="op" id="7292099">}</span><span class="op" id="7292100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7292103">if</span>&nbsp;<span class="ident" id="7292106">err</span>&nbsp;<span class="op" id="7292110">!=</span>&nbsp;<span class="builtintype" id="7292113">nil</span>&nbsp;<span class="op" id="7292117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292121">t</span><span class="op" id="7292122">.</span><span class="ident" id="7292123">Fatal</span><span class="op" id="7292128">(</span><span class="string" id="7292129">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7292144">,</span>&nbsp;<span class="ident" id="7292146">err</span><span class="op" id="7292149">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7292152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292155">dec</span>&nbsp;<span class="op" id="7292159">:=</span>&nbsp;<span class="ident" id="7292162">NewDecoder</span><span class="op" id="7292172">(</span><span class="ident" id="7292173">b</span><span class="op" id="7292174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292177">x</span>&nbsp;<span class="op" id="7292179">:=</span>&nbsp;<span class="builtinfunc" id="7292182">new</span><span class="op" id="7292185">(</span><span class="ident" id="7292186">GobTestValueEncDec</span><span class="op" id="7292204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292207">err</span>&nbsp;<span class="op" id="7292211">=</span>&nbsp;<span class="ident" id="7292213">dec</span><span class="op" id="7292216">.</span><span class="ident" id="7292217">Decode</span><span class="op" id="7292223">(</span><span class="ident" id="7292224">x</span><span class="op" id="7292225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7292228">if</span>&nbsp;<span class="ident" id="7292231">err</span>&nbsp;<span class="op" id="7292235">!=</span>&nbsp;<span class="builtintype" id="7292238">nil</span>&nbsp;<span class="op" id="7292242">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292246">t</span><span class="op" id="7292247">.</span><span class="ident" id="7292248">Fatal</span><span class="op" id="7292253">(</span><span class="string" id="7292254">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7292269">,</span>&nbsp;<span class="ident" id="7292271">err</span><span class="op" id="7292274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7292277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7292280">if</span>&nbsp;<span class="ident" id="7292283">x</span><span class="op" id="7292284">.</span><span class="ident" id="7292285">G</span><span class="op" id="7292286">.</span><span class="ident" id="7292287">s</span>&nbsp;<span class="op" id="7292289">!=</span>&nbsp;<span class="string" id="7292292">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="7292300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292304">t</span><span class="op" id="7292305">.</span><span class="ident" id="7292306">Errorf</span><span class="op" id="7292312">(</span><span class="string" id="7292313">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7292338">,</span>&nbsp;<span class="ident" id="7292340">x</span><span class="op" id="7292341">.</span><span class="ident" id="7292342">G</span><span class="op" id="7292343">.</span><span class="ident" id="7292344">s</span><span class="op" id="7292345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7292348">}</span><br>
<span class="lineno">295</span><span class="op" id="7292350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7292353">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7292406">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="7292442">func</span>&nbsp;<span class="ident" id="7292447">TestGobEncoderIndirectField</span><span class="op" id="7292474">(</span><span class="ident" id="7292475">t</span>&nbsp;<span class="op" id="7292477">*</span><span class="ident" id="7292478">testing</span><span class="op" id="7292485">.</span><span class="ident" id="7292486">T</span><span class="op" id="7292487">)</span>&nbsp;<span class="op" id="7292489">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292492">b</span>&nbsp;<span class="op" id="7292494">:=</span>&nbsp;<span class="builtinfunc" id="7292497">new</span><span class="op" id="7292500">(</span><span class="ident" id="7292501">bytes</span><span class="op" id="7292506">.</span><span class="ident" id="7292507">Buffer</span><span class="op" id="7292513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7292516">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292554">enc</span>&nbsp;<span class="op" id="7292558">:=</span>&nbsp;<span class="ident" id="7292561">NewEncoder</span><span class="op" id="7292571">(</span><span class="ident" id="7292572">b</span><span class="op" id="7292573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292576">s</span>&nbsp;<span class="op" id="7292578">:=</span>&nbsp;<span class="op" id="7292581">&amp;</span><span class="ident" id="7292582">StringStruct</span><span class="op" id="7292594">{</span><span class="string" id="7292595">&#34;HIJKL&#34;</span><span class="op" id="7292602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292605">sp</span>&nbsp;<span class="op" id="7292608">:=</span>&nbsp;<span class="op" id="7292611">&amp;</span><span class="ident" id="7292612">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292615">err</span>&nbsp;<span class="op" id="7292619">:=</span>&nbsp;<span class="ident" id="7292622">enc</span><span class="op" id="7292625">.</span><span class="ident" id="7292626">Encode</span><span class="op" id="7292632">(</span><span class="ident" id="7292633">GobTestIndirectEncDec</span><span class="op" id="7292654">{</span><span class="num" id="7292655">17</span><span class="op" id="7292657">,</span>&nbsp;<span class="op" id="7292659">&amp;</span><span class="ident" id="7292660">sp</span><span class="op" id="7292662">}</span><span class="op" id="7292663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7292666">if</span>&nbsp;<span class="ident" id="7292669">err</span>&nbsp;<span class="op" id="7292673">!=</span>&nbsp;<span class="builtintype" id="7292676">nil</span>&nbsp;<span class="op" id="7292680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292684">t</span><span class="op" id="7292685">.</span><span class="ident" id="7292686">Fatal</span><span class="op" id="7292691">(</span><span class="string" id="7292692">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7292707">,</span>&nbsp;<span class="ident" id="7292709">err</span><span class="op" id="7292712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7292715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292718">dec</span>&nbsp;<span class="op" id="7292722">:=</span>&nbsp;<span class="ident" id="7292725">NewDecoder</span><span class="op" id="7292735">(</span><span class="ident" id="7292736">b</span><span class="op" id="7292737">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292740">x</span>&nbsp;<span class="op" id="7292742">:=</span>&nbsp;<span class="builtinfunc" id="7292745">new</span><span class="op" id="7292748">(</span><span class="ident" id="7292749">GobTestIndirectEncDec</span><span class="op" id="7292770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292773">err</span>&nbsp;<span class="op" id="7292777">=</span>&nbsp;<span class="ident" id="7292779">dec</span><span class="op" id="7292782">.</span><span class="ident" id="7292783">Decode</span><span class="op" id="7292789">(</span><span class="ident" id="7292790">x</span><span class="op" id="7292791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7292794">if</span>&nbsp;<span class="ident" id="7292797">err</span>&nbsp;<span class="op" id="7292801">!=</span>&nbsp;<span class="builtintype" id="7292804">nil</span>&nbsp;<span class="op" id="7292808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292812">t</span><span class="op" id="7292813">.</span><span class="ident" id="7292814">Fatal</span><span class="op" id="7292819">(</span><span class="string" id="7292820">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7292835">,</span>&nbsp;<span class="ident" id="7292837">err</span><span class="op" id="7292840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7292843">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7292846">if</span>&nbsp;<span class="op" id="7292849">(</span><span class="op" id="7292850">*</span><span class="op" id="7292851">*</span><span class="op" id="7292852">*</span><span class="ident" id="7292853">x</span><span class="op" id="7292854">.</span><span class="ident" id="7292855">G</span><span class="op" id="7292856">)</span><span class="op" id="7292857">.</span><span class="ident" id="7292858">s</span>&nbsp;<span class="op" id="7292860">!=</span>&nbsp;<span class="string" id="7292863">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="7292871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7292875">t</span><span class="op" id="7292876">.</span><span class="ident" id="7292877">Errorf</span><span class="op" id="7292883">(</span><span class="string" id="7292884">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7292909">,</span>&nbsp;<span class="op" id="7292911">(</span><span class="op" id="7292912">*</span><span class="op" id="7292913">*</span><span class="op" id="7292914">*</span><span class="ident" id="7292915">x</span><span class="op" id="7292916">.</span><span class="ident" id="7292917">G</span><span class="op" id="7292918">)</span><span class="op" id="7292919">.</span><span class="ident" id="7292920">s</span><span class="op" id="7292921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7292924">}</span><br>
<span class="lineno"></span><span class="op" id="7292926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="7292929">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7292970">func</span>&nbsp;<span class="ident" id="7292975">TestGobEncoderArrayField</span><span class="op" id="7292999">(</span><span class="ident" id="7293000">t</span>&nbsp;<span class="op" id="7293002">*</span><span class="ident" id="7293003">testing</span><span class="op" id="7293010">.</span><span class="ident" id="7293011">T</span><span class="op" id="7293012">)</span>&nbsp;<span class="op" id="7293014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293017">b</span>&nbsp;<span class="op" id="7293019">:=</span>&nbsp;<span class="builtinfunc" id="7293022">new</span><span class="op" id="7293025">(</span><span class="ident" id="7293026">bytes</span><span class="op" id="7293031">.</span><span class="ident" id="7293032">Buffer</span><span class="op" id="7293038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293041">enc</span>&nbsp;<span class="op" id="7293045">:=</span>&nbsp;<span class="ident" id="7293048">NewEncoder</span><span class="op" id="7293058">(</span><span class="ident" id="7293059">b</span><span class="op" id="7293060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293063">var</span>&nbsp;<span class="ident" id="7293067">a</span>&nbsp;<span class="ident" id="7293069">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293089">a</span><span class="op" id="7293090">.</span><span class="ident" id="7293091">X</span>&nbsp;<span class="op" id="7293093">=</span>&nbsp;<span class="num" id="7293095">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293099">for</span>&nbsp;<span class="ident" id="7293103">i</span>&nbsp;<span class="op" id="7293105">:=</span>&nbsp;<span class="keyword" id="7293108">range</span>&nbsp;<span class="ident" id="7293114">a</span><span class="op" id="7293115">.</span><span class="ident" id="7293116">A</span><span class="op" id="7293117">.</span><span class="ident" id="7293118">a</span>&nbsp;<span class="op" id="7293120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293124">a</span><span class="op" id="7293125">.</span><span class="ident" id="7293126">A</span><span class="op" id="7293127">.</span><span class="ident" id="7293128">a</span><span class="op" id="7293129">[</span><span class="ident" id="7293130">i</span><span class="op" id="7293131">]</span>&nbsp;<span class="op" id="7293133">=</span>&nbsp;<span class="builtintype" id="7293135">byte</span><span class="op" id="7293139">(</span><span class="ident" id="7293140">i</span><span class="op" id="7293141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7293144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293147">err</span>&nbsp;<span class="op" id="7293151">:=</span>&nbsp;<span class="ident" id="7293154">enc</span><span class="op" id="7293157">.</span><span class="ident" id="7293158">Encode</span><span class="op" id="7293164">(</span><span class="op" id="7293165">&amp;</span><span class="ident" id="7293166">a</span><span class="op" id="7293167">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293170">if</span>&nbsp;<span class="ident" id="7293173">err</span>&nbsp;<span class="op" id="7293177">!=</span>&nbsp;<span class="builtintype" id="7293180">nil</span>&nbsp;<span class="op" id="7293184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293188">t</span><span class="op" id="7293189">.</span><span class="ident" id="7293190">Fatal</span><span class="op" id="7293195">(</span><span class="string" id="7293196">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7293211">,</span>&nbsp;<span class="ident" id="7293213">err</span><span class="op" id="7293216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7293219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293222">dec</span>&nbsp;<span class="op" id="7293226">:=</span>&nbsp;<span class="ident" id="7293229">NewDecoder</span><span class="op" id="7293239">(</span><span class="ident" id="7293240">b</span><span class="op" id="7293241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293244">x</span>&nbsp;<span class="op" id="7293246">:=</span>&nbsp;<span class="builtinfunc" id="7293249">new</span><span class="op" id="7293252">(</span><span class="ident" id="7293253">GobTestArrayEncDec</span><span class="op" id="7293271">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293274">err</span>&nbsp;<span class="op" id="7293278">=</span>&nbsp;<span class="ident" id="7293280">dec</span><span class="op" id="7293283">.</span><span class="ident" id="7293284">Decode</span><span class="op" id="7293290">(</span><span class="ident" id="7293291">x</span><span class="op" id="7293292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293295">if</span>&nbsp;<span class="ident" id="7293298">err</span>&nbsp;<span class="op" id="7293302">!=</span>&nbsp;<span class="builtintype" id="7293305">nil</span>&nbsp;<span class="op" id="7293309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293313">t</span><span class="op" id="7293314">.</span><span class="ident" id="7293315">Fatal</span><span class="op" id="7293320">(</span><span class="string" id="7293321">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7293336">,</span>&nbsp;<span class="ident" id="7293338">err</span><span class="op" id="7293341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7293344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293347">for</span>&nbsp;<span class="ident" id="7293351">i</span><span class="op" id="7293352">,</span>&nbsp;<span class="ident" id="7293354">v</span>&nbsp;<span class="op" id="7293356">:=</span>&nbsp;<span class="keyword" id="7293359">range</span>&nbsp;<span class="ident" id="7293365">x</span><span class="op" id="7293366">.</span><span class="ident" id="7293367">A</span><span class="op" id="7293368">.</span><span class="ident" id="7293369">a</span>&nbsp;<span class="op" id="7293371">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293375">if</span>&nbsp;<span class="ident" id="7293378">v</span>&nbsp;<span class="op" id="7293380">!=</span>&nbsp;<span class="builtintype" id="7293383">byte</span><span class="op" id="7293387">(</span><span class="ident" id="7293388">i</span><span class="op" id="7293389">)</span>&nbsp;<span class="op" id="7293391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293396">t</span><span class="op" id="7293397">.</span><span class="ident" id="7293398">Errorf</span><span class="op" id="7293404">(</span><span class="string" id="7293405">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="7293425">,</span>&nbsp;<span class="builtintype" id="7293427">byte</span><span class="op" id="7293431">(</span><span class="ident" id="7293432">i</span><span class="op" id="7293433">)</span><span class="op" id="7293434">,</span>&nbsp;<span class="ident" id="7293436">v</span><span class="op" id="7293437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293442">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7293450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7293453">}</span><br>
<span class="lineno">345</span><span class="op" id="7293455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7293458">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7293512">func</span>&nbsp;<span class="ident" id="7293517">TestGobEncoderIndirectArrayField</span><span class="op" id="7293549">(</span><span class="ident" id="7293550">t</span>&nbsp;<span class="op" id="7293552">*</span><span class="ident" id="7293553">testing</span><span class="op" id="7293560">.</span><span class="ident" id="7293561">T</span><span class="op" id="7293562">)</span>&nbsp;<span class="op" id="7293564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293567">b</span>&nbsp;<span class="op" id="7293569">:=</span>&nbsp;<span class="builtinfunc" id="7293572">new</span><span class="op" id="7293575">(</span><span class="ident" id="7293576">bytes</span><span class="op" id="7293581">.</span><span class="ident" id="7293582">Buffer</span><span class="op" id="7293588">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293591">enc</span>&nbsp;<span class="op" id="7293595">:=</span>&nbsp;<span class="ident" id="7293598">NewEncoder</span><span class="op" id="7293608">(</span><span class="ident" id="7293609">b</span><span class="op" id="7293610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293613">var</span>&nbsp;<span class="ident" id="7293617">a</span>&nbsp;<span class="ident" id="7293619">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293647">a</span><span class="op" id="7293648">.</span><span class="ident" id="7293649">X</span>&nbsp;<span class="op" id="7293651">=</span>&nbsp;<span class="num" id="7293653">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293657">var</span>&nbsp;<span class="ident" id="7293661">array</span>&nbsp;<span class="ident" id="7293667">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293680">ap</span>&nbsp;<span class="op" id="7293683">:=</span>&nbsp;<span class="op" id="7293686">&amp;</span><span class="ident" id="7293687">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293694">app</span>&nbsp;<span class="op" id="7293698">:=</span>&nbsp;<span class="op" id="7293701">&amp;</span><span class="ident" id="7293702">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293706">a</span><span class="op" id="7293707">.</span><span class="ident" id="7293708">A</span>&nbsp;<span class="op" id="7293710">=</span>&nbsp;<span class="op" id="7293712">&amp;</span><span class="ident" id="7293713">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293718">for</span>&nbsp;<span class="ident" id="7293722">i</span>&nbsp;<span class="op" id="7293724">:=</span>&nbsp;<span class="keyword" id="7293727">range</span>&nbsp;<span class="ident" id="7293733">array</span><span class="op" id="7293738">.</span><span class="ident" id="7293739">a</span>&nbsp;<span class="op" id="7293741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293745">array</span><span class="op" id="7293750">.</span><span class="ident" id="7293751">a</span><span class="op" id="7293752">[</span><span class="ident" id="7293753">i</span><span class="op" id="7293754">]</span>&nbsp;<span class="op" id="7293756">=</span>&nbsp;<span class="builtintype" id="7293758">byte</span><span class="op" id="7293762">(</span><span class="ident" id="7293763">i</span><span class="op" id="7293764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7293767">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293770">err</span>&nbsp;<span class="op" id="7293774">:=</span>&nbsp;<span class="ident" id="7293777">enc</span><span class="op" id="7293780">.</span><span class="ident" id="7293781">Encode</span><span class="op" id="7293787">(</span><span class="ident" id="7293788">a</span><span class="op" id="7293789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293792">if</span>&nbsp;<span class="ident" id="7293795">err</span>&nbsp;<span class="op" id="7293799">!=</span>&nbsp;<span class="builtintype" id="7293802">nil</span>&nbsp;<span class="op" id="7293806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293810">t</span><span class="op" id="7293811">.</span><span class="ident" id="7293812">Fatal</span><span class="op" id="7293817">(</span><span class="string" id="7293818">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7293833">,</span>&nbsp;<span class="ident" id="7293835">err</span><span class="op" id="7293838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7293841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293844">dec</span>&nbsp;<span class="op" id="7293848">:=</span>&nbsp;<span class="ident" id="7293851">NewDecoder</span><span class="op" id="7293861">(</span><span class="ident" id="7293862">b</span><span class="op" id="7293863">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293866">x</span>&nbsp;<span class="op" id="7293868">:=</span>&nbsp;<span class="builtinfunc" id="7293871">new</span><span class="op" id="7293874">(</span><span class="ident" id="7293875">GobTestIndirectArrayEncDec</span><span class="op" id="7293901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293904">err</span>&nbsp;<span class="op" id="7293908">=</span>&nbsp;<span class="ident" id="7293910">dec</span><span class="op" id="7293913">.</span><span class="ident" id="7293914">Decode</span><span class="op" id="7293920">(</span><span class="ident" id="7293921">x</span><span class="op" id="7293922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293925">if</span>&nbsp;<span class="ident" id="7293928">err</span>&nbsp;<span class="op" id="7293932">!=</span>&nbsp;<span class="builtintype" id="7293935">nil</span>&nbsp;<span class="op" id="7293939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7293943">t</span><span class="op" id="7293944">.</span><span class="ident" id="7293945">Fatal</span><span class="op" id="7293950">(</span><span class="string" id="7293951">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7293966">,</span>&nbsp;<span class="ident" id="7293968">err</span><span class="op" id="7293971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7293974">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7293977">for</span>&nbsp;<span class="ident" id="7293981">i</span><span class="op" id="7293982">,</span>&nbsp;<span class="ident" id="7293984">v</span>&nbsp;<span class="op" id="7293986">:=</span>&nbsp;<span class="keyword" id="7293989">range</span>&nbsp;<span class="op" id="7293995">(</span><span class="op" id="7293996">*</span><span class="op" id="7293997">*</span><span class="op" id="7293998">*</span><span class="ident" id="7293999">x</span><span class="op" id="7294000">.</span><span class="ident" id="7294001">A</span><span class="op" id="7294002">)</span><span class="op" id="7294003">.</span><span class="ident" id="7294004">a</span>&nbsp;<span class="op" id="7294006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7294010">if</span>&nbsp;<span class="ident" id="7294013">v</span>&nbsp;<span class="op" id="7294015">!=</span>&nbsp;<span class="builtintype" id="7294018">byte</span><span class="op" id="7294022">(</span><span class="ident" id="7294023">i</span><span class="op" id="7294024">)</span>&nbsp;<span class="op" id="7294026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294031">t</span><span class="op" id="7294032">.</span><span class="ident" id="7294033">Errorf</span><span class="op" id="7294039">(</span><span class="string" id="7294040">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="7294060">,</span>&nbsp;<span class="builtintype" id="7294062">byte</span><span class="op" id="7294066">(</span><span class="ident" id="7294067">i</span><span class="op" id="7294068">)</span><span class="op" id="7294069">,</span>&nbsp;<span class="ident" id="7294071">v</span><span class="op" id="7294072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7294077">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7294085">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7294088">}</span><br>
<span class="lineno"></span><span class="op" id="7294090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7294093">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7294155">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="7294218">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="7294279">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="7294339">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="7294362">func</span>&nbsp;<span class="ident" id="7294367">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="7294402">(</span><span class="ident" id="7294403">t</span>&nbsp;<span class="op" id="7294405">*</span><span class="ident" id="7294406">testing</span><span class="op" id="7294413">.</span><span class="ident" id="7294414">T</span><span class="op" id="7294415">)</span>&nbsp;<span class="op" id="7294417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7294420">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294464">b</span>&nbsp;<span class="op" id="7294466">:=</span>&nbsp;<span class="builtinfunc" id="7294469">new</span><span class="op" id="7294472">(</span><span class="ident" id="7294473">bytes</span><span class="op" id="7294478">.</span><span class="ident" id="7294479">Buffer</span><span class="op" id="7294485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294488">enc</span>&nbsp;<span class="op" id="7294492">:=</span>&nbsp;<span class="ident" id="7294495">NewEncoder</span><span class="op" id="7294505">(</span><span class="ident" id="7294506">b</span><span class="op" id="7294507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294510">err</span>&nbsp;<span class="op" id="7294514">:=</span>&nbsp;<span class="ident" id="7294517">enc</span><span class="op" id="7294520">.</span><span class="ident" id="7294521">Encode</span><span class="op" id="7294527">(</span><span class="ident" id="7294528">GobTest1</span><span class="op" id="7294536">{</span><span class="num" id="7294537">17</span><span class="op" id="7294539">,</span>&nbsp;<span class="op" id="7294541">&amp;</span><span class="ident" id="7294542">StringStruct</span><span class="op" id="7294554">{</span><span class="string" id="7294555">&#34;ABC&#34;</span><span class="op" id="7294560">}</span><span class="op" id="7294561">}</span><span class="op" id="7294562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7294565">if</span>&nbsp;<span class="ident" id="7294568">err</span>&nbsp;<span class="op" id="7294572">!=</span>&nbsp;<span class="builtintype" id="7294575">nil</span>&nbsp;<span class="op" id="7294579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294583">t</span><span class="op" id="7294584">.</span><span class="ident" id="7294585">Fatal</span><span class="op" id="7294590">(</span><span class="string" id="7294591">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7294606">,</span>&nbsp;<span class="ident" id="7294608">err</span><span class="op" id="7294611">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7294614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294617">dec</span>&nbsp;<span class="op" id="7294621">:=</span>&nbsp;<span class="ident" id="7294624">NewDecoder</span><span class="op" id="7294634">(</span><span class="ident" id="7294635">b</span><span class="op" id="7294636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294639">x</span>&nbsp;<span class="op" id="7294641">:=</span>&nbsp;<span class="builtinfunc" id="7294644">new</span><span class="op" id="7294647">(</span><span class="ident" id="7294648">GobTest0</span><span class="op" id="7294656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294659">err</span>&nbsp;<span class="op" id="7294663">=</span>&nbsp;<span class="ident" id="7294665">dec</span><span class="op" id="7294668">.</span><span class="ident" id="7294669">Decode</span><span class="op" id="7294675">(</span><span class="ident" id="7294676">x</span><span class="op" id="7294677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7294680">if</span>&nbsp;<span class="ident" id="7294683">err</span>&nbsp;<span class="op" id="7294687">!=</span>&nbsp;<span class="builtintype" id="7294690">nil</span>&nbsp;<span class="op" id="7294694">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294698">t</span><span class="op" id="7294699">.</span><span class="ident" id="7294700">Fatal</span><span class="op" id="7294705">(</span><span class="string" id="7294706">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7294721">,</span>&nbsp;<span class="ident" id="7294723">err</span><span class="op" id="7294726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7294729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7294732">if</span>&nbsp;<span class="ident" id="7294735">x</span><span class="op" id="7294736">.</span><span class="ident" id="7294737">G</span><span class="op" id="7294738">.</span><span class="ident" id="7294739">a</span>&nbsp;<span class="op" id="7294741">!=</span>&nbsp;<span class="string" id="7294744">&#39;A&#39;</span>&nbsp;<span class="op" id="7294748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294752">t</span><span class="op" id="7294753">.</span><span class="ident" id="7294754">Errorf</span><span class="op" id="7294760">(</span><span class="string" id="7294761">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7294782">,</span>&nbsp;<span class="ident" id="7294784">x</span><span class="op" id="7294785">.</span><span class="ident" id="7294786">G</span><span class="op" id="7294787">.</span><span class="ident" id="7294788">a</span><span class="op" id="7294789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7294792">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7294795">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294857">b</span><span class="op" id="7294858">.</span><span class="ident" id="7294859">Reset</span><span class="op" id="7294864">(</span><span class="op" id="7294865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294868">err</span>&nbsp;<span class="op" id="7294872">=</span>&nbsp;<span class="ident" id="7294874">enc</span><span class="op" id="7294877">.</span><span class="ident" id="7294878">Encode</span><span class="op" id="7294884">(</span><span class="ident" id="7294885">GobTest0</span><span class="op" id="7294893">{</span><span class="num" id="7294894">17</span><span class="op" id="7294896">,</span>&nbsp;<span class="op" id="7294898">&amp;</span><span class="ident" id="7294899">ByteStruct</span><span class="op" id="7294909">{</span><span class="string" id="7294910">&#39;X&#39;</span><span class="op" id="7294913">}</span><span class="op" id="7294914">}</span><span class="op" id="7294915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7294918">if</span>&nbsp;<span class="ident" id="7294921">err</span>&nbsp;<span class="op" id="7294925">!=</span>&nbsp;<span class="builtintype" id="7294928">nil</span>&nbsp;<span class="op" id="7294932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294936">t</span><span class="op" id="7294937">.</span><span class="ident" id="7294938">Fatal</span><span class="op" id="7294943">(</span><span class="string" id="7294944">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7294959">,</span>&nbsp;<span class="ident" id="7294961">err</span><span class="op" id="7294964">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7294967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294970">y</span>&nbsp;<span class="op" id="7294972">:=</span>&nbsp;<span class="builtinfunc" id="7294975">new</span><span class="op" id="7294978">(</span><span class="ident" id="7294979">GobTest1</span><span class="op" id="7294987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7294990">err</span>&nbsp;<span class="op" id="7294994">=</span>&nbsp;<span class="ident" id="7294996">dec</span><span class="op" id="7294999">.</span><span class="ident" id="7295000">Decode</span><span class="op" id="7295006">(</span><span class="ident" id="7295007">y</span><span class="op" id="7295008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7295011">if</span>&nbsp;<span class="ident" id="7295014">err</span>&nbsp;<span class="op" id="7295018">!=</span>&nbsp;<span class="builtintype" id="7295021">nil</span>&nbsp;<span class="op" id="7295025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295029">t</span><span class="op" id="7295030">.</span><span class="ident" id="7295031">Fatal</span><span class="op" id="7295036">(</span><span class="string" id="7295037">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7295052">,</span>&nbsp;<span class="ident" id="7295054">err</span><span class="op" id="7295057">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7295060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7295063">if</span>&nbsp;<span class="ident" id="7295066">y</span><span class="op" id="7295067">.</span><span class="ident" id="7295068">G</span><span class="op" id="7295069">.</span><span class="ident" id="7295070">s</span>&nbsp;<span class="op" id="7295072">!=</span>&nbsp;<span class="string" id="7295075">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="7295081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295085">t</span><span class="op" id="7295086">.</span><span class="ident" id="7295087">Fatalf</span><span class="op" id="7295093">(</span><span class="string" id="7295094">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7295117">,</span>&nbsp;<span class="ident" id="7295119">y</span><span class="op" id="7295120">.</span><span class="ident" id="7295121">G</span><span class="op" id="7295122">.</span><span class="ident" id="7295123">s</span><span class="op" id="7295124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7295127">}</span><br>
<span class="lineno"></span><span class="op" id="7295129">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="7295132">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="7295194">func</span>&nbsp;<span class="ident" id="7295199">TestGobEncoderValueEncoder</span><span class="op" id="7295225">(</span><span class="ident" id="7295226">t</span>&nbsp;<span class="op" id="7295228">*</span><span class="ident" id="7295229">testing</span><span class="op" id="7295236">.</span><span class="ident" id="7295237">T</span><span class="op" id="7295238">)</span>&nbsp;<span class="op" id="7295240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7295243">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295287">b</span>&nbsp;<span class="op" id="7295289">:=</span>&nbsp;<span class="builtinfunc" id="7295292">new</span><span class="op" id="7295295">(</span><span class="ident" id="7295296">bytes</span><span class="op" id="7295301">.</span><span class="ident" id="7295302">Buffer</span><span class="op" id="7295308">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295311">enc</span>&nbsp;<span class="op" id="7295315">:=</span>&nbsp;<span class="ident" id="7295318">NewEncoder</span><span class="op" id="7295328">(</span><span class="ident" id="7295329">b</span><span class="op" id="7295330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295333">err</span>&nbsp;<span class="op" id="7295337">:=</span>&nbsp;<span class="ident" id="7295340">enc</span><span class="op" id="7295343">.</span><span class="ident" id="7295344">Encode</span><span class="op" id="7295350">(</span><span class="ident" id="7295351">GobTest4</span><span class="op" id="7295359">{</span><span class="num" id="7295360">17</span><span class="op" id="7295362">,</span>&nbsp;<span class="ident" id="7295364">ValueGobber</span><span class="op" id="7295375">(</span><span class="string" id="7295376">&#34;hello&#34;</span><span class="op" id="7295383">)</span><span class="op" id="7295384">,</span>&nbsp;<span class="ident" id="7295386">BinaryValueGobber</span><span class="op" id="7295403">(</span><span class="string" id="7295404">&#34;&#34;</span><span class="op" id="7295422">)</span><span class="op" id="7295423">,</span>&nbsp;<span class="ident" id="7295425">TextValueGobber</span><span class="op" id="7295440">(</span><span class="string" id="7295441">&#34;&#34;</span><span class="op" id="7295458">)</span><span class="op" id="7295459">}</span><span class="op" id="7295460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7295463">if</span>&nbsp;<span class="ident" id="7295466">err</span>&nbsp;<span class="op" id="7295470">!=</span>&nbsp;<span class="builtintype" id="7295473">nil</span>&nbsp;<span class="op" id="7295477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295481">t</span><span class="op" id="7295482">.</span><span class="ident" id="7295483">Fatal</span><span class="op" id="7295488">(</span><span class="string" id="7295489">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7295504">,</span>&nbsp;<span class="ident" id="7295506">err</span><span class="op" id="7295509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7295512">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295515">dec</span>&nbsp;<span class="op" id="7295519">:=</span>&nbsp;<span class="ident" id="7295522">NewDecoder</span><span class="op" id="7295532">(</span><span class="ident" id="7295533">b</span><span class="op" id="7295534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295537">x</span>&nbsp;<span class="op" id="7295539">:=</span>&nbsp;<span class="builtinfunc" id="7295542">new</span><span class="op" id="7295545">(</span><span class="ident" id="7295546">GobTest5</span><span class="op" id="7295554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295557">err</span>&nbsp;<span class="op" id="7295561">=</span>&nbsp;<span class="ident" id="7295563">dec</span><span class="op" id="7295566">.</span><span class="ident" id="7295567">Decode</span><span class="op" id="7295573">(</span><span class="ident" id="7295574">x</span><span class="op" id="7295575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7295578">if</span>&nbsp;<span class="ident" id="7295581">err</span>&nbsp;<span class="op" id="7295585">!=</span>&nbsp;<span class="builtintype" id="7295588">nil</span>&nbsp;<span class="op" id="7295592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295596">t</span><span class="op" id="7295597">.</span><span class="ident" id="7295598">Fatal</span><span class="op" id="7295603">(</span><span class="string" id="7295604">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7295619">,</span>&nbsp;<span class="ident" id="7295621">err</span><span class="op" id="7295624">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7295627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7295630">if</span>&nbsp;<span class="op" id="7295633">*</span><span class="ident" id="7295634">x</span><span class="op" id="7295635">.</span><span class="ident" id="7295636">V</span>&nbsp;<span class="op" id="7295638">!=</span>&nbsp;<span class="string" id="7295641">&#34;hello&#34;</span>&nbsp;<span class="op" id="7295649">||</span>&nbsp;<span class="op" id="7295652">*</span><span class="ident" id="7295653">x</span><span class="op" id="7295654">.</span><span class="ident" id="7295655">BV</span>&nbsp;<span class="op" id="7295658">!=</span>&nbsp;<span class="string" id="7295661">&#34;&#34;</span>&nbsp;<span class="op" id="7295680">||</span>&nbsp;<span class="op" id="7295683">*</span><span class="ident" id="7295684">x</span><span class="op" id="7295685">.</span><span class="ident" id="7295686">TV</span>&nbsp;<span class="op" id="7295689">!=</span>&nbsp;<span class="string" id="7295692">&#34;&#34;</span>&nbsp;<span class="op" id="7295710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295714">t</span><span class="op" id="7295715">.</span><span class="ident" id="7295716">Errorf</span><span class="op" id="7295722">(</span><span class="string" id="7295723">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7295748">,</span>&nbsp;<span class="op" id="7295750">*</span><span class="ident" id="7295751">x</span><span class="op" id="7295752">.</span><span class="ident" id="7295753">V</span><span class="op" id="7295754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7295757">}</span><br>
<span class="lineno"></span><span class="op" id="7295759">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="7295762">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="7295830">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="7295871">func</span>&nbsp;<span class="ident" id="7295876">TestGobEncoderValueThenPointer</span><span class="op" id="7295906">(</span><span class="ident" id="7295907">t</span>&nbsp;<span class="op" id="7295909">*</span><span class="ident" id="7295910">testing</span><span class="op" id="7295917">.</span><span class="ident" id="7295918">T</span><span class="op" id="7295919">)</span>&nbsp;<span class="op" id="7295921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295924">v</span>&nbsp;<span class="op" id="7295926">:=</span>&nbsp;<span class="ident" id="7295929">ValueGobber</span><span class="op" id="7295940">(</span><span class="string" id="7295941">&#34;forty-two&#34;</span><span class="op" id="7295952">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295955">w</span>&nbsp;<span class="op" id="7295957">:=</span>&nbsp;<span class="ident" id="7295960">ValueGobber</span><span class="op" id="7295971">(</span><span class="string" id="7295972">&#34;six-by-nine&#34;</span><span class="op" id="7295985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7295988">bv</span>&nbsp;<span class="op" id="7295991">:=</span>&nbsp;<span class="ident" id="7295994">BinaryValueGobber</span><span class="op" id="7296011">(</span><span class="string" id="7296012">&#34;1nanocentury&#34;</span><span class="op" id="7296026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296029">bw</span>&nbsp;<span class="op" id="7296032">:=</span>&nbsp;<span class="ident" id="7296035">BinaryValueGobber</span><span class="op" id="7296052">(</span><span class="string" id="7296053">&#34;seconds&#34;</span><span class="op" id="7296064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296067">tv</span>&nbsp;<span class="op" id="7296070">:=</span>&nbsp;<span class="ident" id="7296073">TextValueGobber</span><span class="op" id="7296088">(</span><span class="string" id="7296089">&#34;gravitationalacceleration&#34;</span><span class="op" id="7296116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296119">tw</span>&nbsp;<span class="op" id="7296122">:=</span>&nbsp;<span class="ident" id="7296125">TextValueGobber</span><span class="op" id="7296140">(</span><span class="string" id="7296141">&#34;ft/s&#34;</span><span class="op" id="7296153">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7296157">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7296228">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296292">b</span>&nbsp;<span class="op" id="7296294">:=</span>&nbsp;<span class="builtinfunc" id="7296297">new</span><span class="op" id="7296300">(</span><span class="ident" id="7296301">bytes</span><span class="op" id="7296306">.</span><span class="ident" id="7296307">Buffer</span><span class="op" id="7296313">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296316">enc</span>&nbsp;<span class="op" id="7296320">:=</span>&nbsp;<span class="ident" id="7296323">NewEncoder</span><span class="op" id="7296333">(</span><span class="ident" id="7296334">b</span><span class="op" id="7296335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7296338">if</span>&nbsp;<span class="ident" id="7296341">err</span>&nbsp;<span class="op" id="7296345">:=</span>&nbsp;<span class="ident" id="7296348">enc</span><span class="op" id="7296351">.</span><span class="ident" id="7296352">Encode</span><span class="op" id="7296358">(</span><span class="ident" id="7296359">GobTest6</span><span class="op" id="7296367">{</span><span class="num" id="7296368">42</span><span class="op" id="7296370">,</span>&nbsp;<span class="ident" id="7296372">v</span><span class="op" id="7296373">,</span>&nbsp;<span class="op" id="7296375">&amp;</span><span class="ident" id="7296376">w</span><span class="op" id="7296377">,</span>&nbsp;<span class="ident" id="7296379">bv</span><span class="op" id="7296381">,</span>&nbsp;<span class="op" id="7296383">&amp;</span><span class="ident" id="7296384">bw</span><span class="op" id="7296386">,</span>&nbsp;<span class="ident" id="7296388">tv</span><span class="op" id="7296390">,</span>&nbsp;<span class="op" id="7296392">&amp;</span><span class="ident" id="7296393">tw</span><span class="op" id="7296395">}</span><span class="op" id="7296396">)</span><span class="op" id="7296397">;</span>&nbsp;<span class="ident" id="7296399">err</span>&nbsp;<span class="op" id="7296403">!=</span>&nbsp;<span class="builtintype" id="7296406">nil</span>&nbsp;<span class="op" id="7296410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296414">t</span><span class="op" id="7296415">.</span><span class="ident" id="7296416">Fatal</span><span class="op" id="7296421">(</span><span class="string" id="7296422">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7296437">,</span>&nbsp;<span class="ident" id="7296439">err</span><span class="op" id="7296442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7296445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296448">dec</span>&nbsp;<span class="op" id="7296452">:=</span>&nbsp;<span class="ident" id="7296455">NewDecoder</span><span class="op" id="7296465">(</span><span class="ident" id="7296466">b</span><span class="op" id="7296467">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296470">x</span>&nbsp;<span class="op" id="7296472">:=</span>&nbsp;<span class="builtinfunc" id="7296475">new</span><span class="op" id="7296478">(</span><span class="ident" id="7296479">GobTest6</span><span class="op" id="7296487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7296490">if</span>&nbsp;<span class="ident" id="7296493">err</span>&nbsp;<span class="op" id="7296497">:=</span>&nbsp;<span class="ident" id="7296500">dec</span><span class="op" id="7296503">.</span><span class="ident" id="7296504">Decode</span><span class="op" id="7296510">(</span><span class="ident" id="7296511">x</span><span class="op" id="7296512">)</span><span class="op" id="7296513">;</span>&nbsp;<span class="ident" id="7296515">err</span>&nbsp;<span class="op" id="7296519">!=</span>&nbsp;<span class="builtintype" id="7296522">nil</span>&nbsp;<span class="op" id="7296526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296530">t</span><span class="op" id="7296531">.</span><span class="ident" id="7296532">Fatal</span><span class="op" id="7296537">(</span><span class="string" id="7296538">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7296553">,</span>&nbsp;<span class="ident" id="7296555">err</span><span class="op" id="7296558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7296561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7296565">if</span>&nbsp;<span class="ident" id="7296568">got</span><span class="op" id="7296571">,</span>&nbsp;<span class="ident" id="7296573">want</span>&nbsp;<span class="op" id="7296578">:=</span>&nbsp;<span class="ident" id="7296581">x</span><span class="op" id="7296582">.</span><span class="ident" id="7296583">V</span><span class="op" id="7296584">,</span>&nbsp;<span class="ident" id="7296586">v</span><span class="op" id="7296587">;</span>&nbsp;<span class="ident" id="7296589">got</span>&nbsp;<span class="op" id="7296593">!=</span>&nbsp;<span class="ident" id="7296596">want</span>&nbsp;<span class="op" id="7296601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296605">t</span><span class="op" id="7296606">.</span><span class="ident" id="7296607">Errorf</span><span class="op" id="7296613">(</span><span class="string" id="7296614">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7296631">,</span>&nbsp;<span class="ident" id="7296633">got</span><span class="op" id="7296636">,</span>&nbsp;<span class="ident" id="7296638">want</span><span class="op" id="7296642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7296645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7296648">if</span>&nbsp;<span class="ident" id="7296651">got</span><span class="op" id="7296654">,</span>&nbsp;<span class="ident" id="7296656">want</span>&nbsp;<span class="op" id="7296661">:=</span>&nbsp;<span class="ident" id="7296664">x</span><span class="op" id="7296665">.</span><span class="ident" id="7296666">W</span><span class="op" id="7296667">,</span>&nbsp;<span class="ident" id="7296669">w</span><span class="op" id="7296670">;</span>&nbsp;<span class="ident" id="7296672">got</span>&nbsp;<span class="op" id="7296676">==</span>&nbsp;<span class="builtintype" id="7296679">nil</span>&nbsp;<span class="op" id="7296683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296687">t</span><span class="op" id="7296688">.</span><span class="ident" id="7296689">Errorf</span><span class="op" id="7296695">(</span><span class="string" id="7296696">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7296714">,</span>&nbsp;<span class="ident" id="7296716">want</span><span class="op" id="7296720">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7296723">}</span>&nbsp;<span class="keyword" id="7296725">else</span>&nbsp;<span class="keyword" id="7296730">if</span>&nbsp;<span class="op" id="7296733">*</span><span class="ident" id="7296734">got</span>&nbsp;<span class="op" id="7296738">!=</span>&nbsp;<span class="ident" id="7296741">want</span>&nbsp;<span class="op" id="7296746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296750">t</span><span class="op" id="7296751">.</span><span class="ident" id="7296752">Errorf</span><span class="op" id="7296758">(</span><span class="string" id="7296759">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7296776">,</span>&nbsp;<span class="op" id="7296778">*</span><span class="ident" id="7296779">got</span><span class="op" id="7296782">,</span>&nbsp;<span class="ident" id="7296784">want</span><span class="op" id="7296788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7296791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7296795">if</span>&nbsp;<span class="ident" id="7296798">got</span><span class="op" id="7296801">,</span>&nbsp;<span class="ident" id="7296803">want</span>&nbsp;<span class="op" id="7296808">:=</span>&nbsp;<span class="ident" id="7296811">x</span><span class="op" id="7296812">.</span><span class="ident" id="7296813">BV</span><span class="op" id="7296815">,</span>&nbsp;<span class="ident" id="7296817">bv</span><span class="op" id="7296819">;</span>&nbsp;<span class="ident" id="7296821">got</span>&nbsp;<span class="op" id="7296825">!=</span>&nbsp;<span class="ident" id="7296828">want</span>&nbsp;<span class="op" id="7296833">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296837">t</span><span class="op" id="7296838">.</span><span class="ident" id="7296839">Errorf</span><span class="op" id="7296845">(</span><span class="string" id="7296846">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7296864">,</span>&nbsp;<span class="ident" id="7296866">got</span><span class="op" id="7296869">,</span>&nbsp;<span class="ident" id="7296871">want</span><span class="op" id="7296875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7296878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7296881">if</span>&nbsp;<span class="ident" id="7296884">got</span><span class="op" id="7296887">,</span>&nbsp;<span class="ident" id="7296889">want</span>&nbsp;<span class="op" id="7296894">:=</span>&nbsp;<span class="ident" id="7296897">x</span><span class="op" id="7296898">.</span><span class="ident" id="7296899">BW</span><span class="op" id="7296901">,</span>&nbsp;<span class="ident" id="7296903">bw</span><span class="op" id="7296905">;</span>&nbsp;<span class="ident" id="7296907">got</span>&nbsp;<span class="op" id="7296911">==</span>&nbsp;<span class="builtintype" id="7296914">nil</span>&nbsp;<span class="op" id="7296918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296922">t</span><span class="op" id="7296923">.</span><span class="ident" id="7296924">Errorf</span><span class="op" id="7296930">(</span><span class="string" id="7296931">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7296950">,</span>&nbsp;<span class="ident" id="7296952">want</span><span class="op" id="7296956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7296959">}</span>&nbsp;<span class="keyword" id="7296961">else</span>&nbsp;<span class="keyword" id="7296966">if</span>&nbsp;<span class="op" id="7296969">*</span><span class="ident" id="7296970">got</span>&nbsp;<span class="op" id="7296974">!=</span>&nbsp;<span class="ident" id="7296977">want</span>&nbsp;<span class="op" id="7296982">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296986">t</span><span class="op" id="7296987">.</span><span class="ident" id="7296988">Errorf</span><span class="op" id="7296994">(</span><span class="string" id="7296995">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7297013">,</span>&nbsp;<span class="op" id="7297015">*</span><span class="ident" id="7297016">got</span><span class="op" id="7297019">,</span>&nbsp;<span class="ident" id="7297021">want</span><span class="op" id="7297025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7297028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297032">if</span>&nbsp;<span class="ident" id="7297035">got</span><span class="op" id="7297038">,</span>&nbsp;<span class="ident" id="7297040">want</span>&nbsp;<span class="op" id="7297045">:=</span>&nbsp;<span class="ident" id="7297048">x</span><span class="op" id="7297049">.</span><span class="ident" id="7297050">TV</span><span class="op" id="7297052">,</span>&nbsp;<span class="ident" id="7297054">tv</span><span class="op" id="7297056">;</span>&nbsp;<span class="ident" id="7297058">got</span>&nbsp;<span class="op" id="7297062">!=</span>&nbsp;<span class="ident" id="7297065">want</span>&nbsp;<span class="op" id="7297070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297074">t</span><span class="op" id="7297075">.</span><span class="ident" id="7297076">Errorf</span><span class="op" id="7297082">(</span><span class="string" id="7297083">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7297101">,</span>&nbsp;<span class="ident" id="7297103">got</span><span class="op" id="7297106">,</span>&nbsp;<span class="ident" id="7297108">want</span><span class="op" id="7297112">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7297115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297118">if</span>&nbsp;<span class="ident" id="7297121">got</span><span class="op" id="7297124">,</span>&nbsp;<span class="ident" id="7297126">want</span>&nbsp;<span class="op" id="7297131">:=</span>&nbsp;<span class="ident" id="7297134">x</span><span class="op" id="7297135">.</span><span class="ident" id="7297136">TW</span><span class="op" id="7297138">,</span>&nbsp;<span class="ident" id="7297140">tw</span><span class="op" id="7297142">;</span>&nbsp;<span class="ident" id="7297144">got</span>&nbsp;<span class="op" id="7297148">==</span>&nbsp;<span class="builtintype" id="7297151">nil</span>&nbsp;<span class="op" id="7297155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297159">t</span><span class="op" id="7297160">.</span><span class="ident" id="7297161">Errorf</span><span class="op" id="7297167">(</span><span class="string" id="7297168">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7297187">,</span>&nbsp;<span class="ident" id="7297189">want</span><span class="op" id="7297193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7297196">}</span>&nbsp;<span class="keyword" id="7297198">else</span>&nbsp;<span class="keyword" id="7297203">if</span>&nbsp;<span class="op" id="7297206">*</span><span class="ident" id="7297207">got</span>&nbsp;<span class="op" id="7297211">!=</span>&nbsp;<span class="ident" id="7297214">want</span>&nbsp;<span class="op" id="7297219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297223">t</span><span class="op" id="7297224">.</span><span class="ident" id="7297225">Errorf</span><span class="op" id="7297231">(</span><span class="string" id="7297232">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7297250">,</span>&nbsp;<span class="op" id="7297252">*</span><span class="ident" id="7297253">got</span><span class="op" id="7297256">,</span>&nbsp;<span class="ident" id="7297258">want</span><span class="op" id="7297262">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7297265">}</span><br>
<span class="lineno"></span><span class="op" id="7297267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7297270">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="7297338">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="7297368">func</span>&nbsp;<span class="ident" id="7297373">TestGobEncoderPointerThenValue</span><span class="op" id="7297403">(</span><span class="ident" id="7297404">t</span>&nbsp;<span class="op" id="7297406">*</span><span class="ident" id="7297407">testing</span><span class="op" id="7297414">.</span><span class="ident" id="7297415">T</span><span class="op" id="7297416">)</span>&nbsp;<span class="op" id="7297418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297421">v</span>&nbsp;<span class="op" id="7297423">:=</span>&nbsp;<span class="ident" id="7297426">ValueGobber</span><span class="op" id="7297437">(</span><span class="string" id="7297438">&#34;forty-two&#34;</span><span class="op" id="7297449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297452">w</span>&nbsp;<span class="op" id="7297454">:=</span>&nbsp;<span class="ident" id="7297457">ValueGobber</span><span class="op" id="7297468">(</span><span class="string" id="7297469">&#34;six-by-nine&#34;</span><span class="op" id="7297482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297485">bv</span>&nbsp;<span class="op" id="7297488">:=</span>&nbsp;<span class="ident" id="7297491">BinaryValueGobber</span><span class="op" id="7297508">(</span><span class="string" id="7297509">&#34;1nanocentury&#34;</span><span class="op" id="7297523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297526">bw</span>&nbsp;<span class="op" id="7297529">:=</span>&nbsp;<span class="ident" id="7297532">BinaryValueGobber</span><span class="op" id="7297549">(</span><span class="string" id="7297550">&#34;seconds&#34;</span><span class="op" id="7297561">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297564">tv</span>&nbsp;<span class="op" id="7297567">:=</span>&nbsp;<span class="ident" id="7297570">TextValueGobber</span><span class="op" id="7297585">(</span><span class="string" id="7297586">&#34;gravitationalacceleration&#34;</span><span class="op" id="7297613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297616">tw</span>&nbsp;<span class="op" id="7297619">:=</span>&nbsp;<span class="ident" id="7297622">TextValueGobber</span><span class="op" id="7297637">(</span><span class="string" id="7297638">&#34;ft/s&#34;</span><span class="op" id="7297650">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297654">b</span>&nbsp;<span class="op" id="7297656">:=</span>&nbsp;<span class="builtinfunc" id="7297659">new</span><span class="op" id="7297662">(</span><span class="ident" id="7297663">bytes</span><span class="op" id="7297668">.</span><span class="ident" id="7297669">Buffer</span><span class="op" id="7297675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297678">enc</span>&nbsp;<span class="op" id="7297682">:=</span>&nbsp;<span class="ident" id="7297685">NewEncoder</span><span class="op" id="7297695">(</span><span class="ident" id="7297696">b</span><span class="op" id="7297697">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297700">if</span>&nbsp;<span class="ident" id="7297703">err</span>&nbsp;<span class="op" id="7297707">:=</span>&nbsp;<span class="ident" id="7297710">enc</span><span class="op" id="7297713">.</span><span class="ident" id="7297714">Encode</span><span class="op" id="7297720">(</span><span class="ident" id="7297721">GobTest7</span><span class="op" id="7297729">{</span><span class="num" id="7297730">42</span><span class="op" id="7297732">,</span>&nbsp;<span class="op" id="7297734">&amp;</span><span class="ident" id="7297735">v</span><span class="op" id="7297736">,</span>&nbsp;<span class="ident" id="7297738">w</span><span class="op" id="7297739">,</span>&nbsp;<span class="op" id="7297741">&amp;</span><span class="ident" id="7297742">bv</span><span class="op" id="7297744">,</span>&nbsp;<span class="ident" id="7297746">bw</span><span class="op" id="7297748">,</span>&nbsp;<span class="op" id="7297750">&amp;</span><span class="ident" id="7297751">tv</span><span class="op" id="7297753">,</span>&nbsp;<span class="ident" id="7297755">tw</span><span class="op" id="7297757">}</span><span class="op" id="7297758">)</span><span class="op" id="7297759">;</span>&nbsp;<span class="ident" id="7297761">err</span>&nbsp;<span class="op" id="7297765">!=</span>&nbsp;<span class="builtintype" id="7297768">nil</span>&nbsp;<span class="op" id="7297772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297776">t</span><span class="op" id="7297777">.</span><span class="ident" id="7297778">Fatal</span><span class="op" id="7297783">(</span><span class="string" id="7297784">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7297799">,</span>&nbsp;<span class="ident" id="7297801">err</span><span class="op" id="7297804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7297807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297810">dec</span>&nbsp;<span class="op" id="7297814">:=</span>&nbsp;<span class="ident" id="7297817">NewDecoder</span><span class="op" id="7297827">(</span><span class="ident" id="7297828">b</span><span class="op" id="7297829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297832">x</span>&nbsp;<span class="op" id="7297834">:=</span>&nbsp;<span class="builtinfunc" id="7297837">new</span><span class="op" id="7297840">(</span><span class="ident" id="7297841">GobTest7</span><span class="op" id="7297849">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297852">if</span>&nbsp;<span class="ident" id="7297855">err</span>&nbsp;<span class="op" id="7297859">:=</span>&nbsp;<span class="ident" id="7297862">dec</span><span class="op" id="7297865">.</span><span class="ident" id="7297866">Decode</span><span class="op" id="7297872">(</span><span class="ident" id="7297873">x</span><span class="op" id="7297874">)</span><span class="op" id="7297875">;</span>&nbsp;<span class="ident" id="7297877">err</span>&nbsp;<span class="op" id="7297881">!=</span>&nbsp;<span class="builtintype" id="7297884">nil</span>&nbsp;<span class="op" id="7297888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297892">t</span><span class="op" id="7297893">.</span><span class="ident" id="7297894">Fatal</span><span class="op" id="7297899">(</span><span class="string" id="7297900">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7297915">,</span>&nbsp;<span class="ident" id="7297917">err</span><span class="op" id="7297920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7297923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297927">if</span>&nbsp;<span class="ident" id="7297930">got</span><span class="op" id="7297933">,</span>&nbsp;<span class="ident" id="7297935">want</span>&nbsp;<span class="op" id="7297940">:=</span>&nbsp;<span class="ident" id="7297943">x</span><span class="op" id="7297944">.</span><span class="ident" id="7297945">V</span><span class="op" id="7297946">,</span>&nbsp;<span class="ident" id="7297948">v</span><span class="op" id="7297949">;</span>&nbsp;<span class="ident" id="7297951">got</span>&nbsp;<span class="op" id="7297955">==</span>&nbsp;<span class="builtintype" id="7297958">nil</span>&nbsp;<span class="op" id="7297962">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297966">t</span><span class="op" id="7297967">.</span><span class="ident" id="7297968">Errorf</span><span class="op" id="7297974">(</span><span class="string" id="7297975">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7297993">,</span>&nbsp;<span class="ident" id="7297995">want</span><span class="op" id="7297999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298002">}</span>&nbsp;<span class="keyword" id="7298004">else</span>&nbsp;<span class="keyword" id="7298009">if</span>&nbsp;<span class="op" id="7298012">*</span><span class="ident" id="7298013">got</span>&nbsp;<span class="op" id="7298017">!=</span>&nbsp;<span class="ident" id="7298020">want</span>&nbsp;<span class="op" id="7298025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298029">t</span><span class="op" id="7298030">.</span><span class="ident" id="7298031">Errorf</span><span class="op" id="7298037">(</span><span class="string" id="7298038">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7298055">,</span>&nbsp;<span class="op" id="7298057">*</span><span class="ident" id="7298058">got</span><span class="op" id="7298061">,</span>&nbsp;<span class="ident" id="7298063">want</span><span class="op" id="7298067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298073">if</span>&nbsp;<span class="ident" id="7298076">got</span><span class="op" id="7298079">,</span>&nbsp;<span class="ident" id="7298081">want</span>&nbsp;<span class="op" id="7298086">:=</span>&nbsp;<span class="ident" id="7298089">x</span><span class="op" id="7298090">.</span><span class="ident" id="7298091">W</span><span class="op" id="7298092">,</span>&nbsp;<span class="ident" id="7298094">w</span><span class="op" id="7298095">;</span>&nbsp;<span class="ident" id="7298097">got</span>&nbsp;<span class="op" id="7298101">!=</span>&nbsp;<span class="ident" id="7298104">want</span>&nbsp;<span class="op" id="7298109">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298113">t</span><span class="op" id="7298114">.</span><span class="ident" id="7298115">Errorf</span><span class="op" id="7298121">(</span><span class="string" id="7298122">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7298139">,</span>&nbsp;<span class="ident" id="7298141">got</span><span class="op" id="7298144">,</span>&nbsp;<span class="ident" id="7298146">want</span><span class="op" id="7298150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298157">if</span>&nbsp;<span class="ident" id="7298160">got</span><span class="op" id="7298163">,</span>&nbsp;<span class="ident" id="7298165">want</span>&nbsp;<span class="op" id="7298170">:=</span>&nbsp;<span class="ident" id="7298173">x</span><span class="op" id="7298174">.</span><span class="ident" id="7298175">BV</span><span class="op" id="7298177">,</span>&nbsp;<span class="ident" id="7298179">bv</span><span class="op" id="7298181">;</span>&nbsp;<span class="ident" id="7298183">got</span>&nbsp;<span class="op" id="7298187">==</span>&nbsp;<span class="builtintype" id="7298190">nil</span>&nbsp;<span class="op" id="7298194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298198">t</span><span class="op" id="7298199">.</span><span class="ident" id="7298200">Errorf</span><span class="op" id="7298206">(</span><span class="string" id="7298207">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7298226">,</span>&nbsp;<span class="ident" id="7298228">want</span><span class="op" id="7298232">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298235">}</span>&nbsp;<span class="keyword" id="7298237">else</span>&nbsp;<span class="keyword" id="7298242">if</span>&nbsp;<span class="op" id="7298245">*</span><span class="ident" id="7298246">got</span>&nbsp;<span class="op" id="7298250">!=</span>&nbsp;<span class="ident" id="7298253">want</span>&nbsp;<span class="op" id="7298258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298262">t</span><span class="op" id="7298263">.</span><span class="ident" id="7298264">Errorf</span><span class="op" id="7298270">(</span><span class="string" id="7298271">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7298289">,</span>&nbsp;<span class="op" id="7298291">*</span><span class="ident" id="7298292">got</span><span class="op" id="7298295">,</span>&nbsp;<span class="ident" id="7298297">want</span><span class="op" id="7298301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298307">if</span>&nbsp;<span class="ident" id="7298310">got</span><span class="op" id="7298313">,</span>&nbsp;<span class="ident" id="7298315">want</span>&nbsp;<span class="op" id="7298320">:=</span>&nbsp;<span class="ident" id="7298323">x</span><span class="op" id="7298324">.</span><span class="ident" id="7298325">BW</span><span class="op" id="7298327">,</span>&nbsp;<span class="ident" id="7298329">bw</span><span class="op" id="7298331">;</span>&nbsp;<span class="ident" id="7298333">got</span>&nbsp;<span class="op" id="7298337">!=</span>&nbsp;<span class="ident" id="7298340">want</span>&nbsp;<span class="op" id="7298345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298349">t</span><span class="op" id="7298350">.</span><span class="ident" id="7298351">Errorf</span><span class="op" id="7298357">(</span><span class="string" id="7298358">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7298376">,</span>&nbsp;<span class="ident" id="7298378">got</span><span class="op" id="7298381">,</span>&nbsp;<span class="ident" id="7298383">want</span><span class="op" id="7298387">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298394">if</span>&nbsp;<span class="ident" id="7298397">got</span><span class="op" id="7298400">,</span>&nbsp;<span class="ident" id="7298402">want</span>&nbsp;<span class="op" id="7298407">:=</span>&nbsp;<span class="ident" id="7298410">x</span><span class="op" id="7298411">.</span><span class="ident" id="7298412">TV</span><span class="op" id="7298414">,</span>&nbsp;<span class="ident" id="7298416">tv</span><span class="op" id="7298418">;</span>&nbsp;<span class="ident" id="7298420">got</span>&nbsp;<span class="op" id="7298424">==</span>&nbsp;<span class="builtintype" id="7298427">nil</span>&nbsp;<span class="op" id="7298431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298435">t</span><span class="op" id="7298436">.</span><span class="ident" id="7298437">Errorf</span><span class="op" id="7298443">(</span><span class="string" id="7298444">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7298463">,</span>&nbsp;<span class="ident" id="7298465">want</span><span class="op" id="7298469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298472">}</span>&nbsp;<span class="keyword" id="7298474">else</span>&nbsp;<span class="keyword" id="7298479">if</span>&nbsp;<span class="op" id="7298482">*</span><span class="ident" id="7298483">got</span>&nbsp;<span class="op" id="7298487">!=</span>&nbsp;<span class="ident" id="7298490">want</span>&nbsp;<span class="op" id="7298495">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298499">t</span><span class="op" id="7298500">.</span><span class="ident" id="7298501">Errorf</span><span class="op" id="7298507">(</span><span class="string" id="7298508">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7298526">,</span>&nbsp;<span class="op" id="7298528">*</span><span class="ident" id="7298529">got</span><span class="op" id="7298532">,</span>&nbsp;<span class="ident" id="7298534">want</span><span class="op" id="7298538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298544">if</span>&nbsp;<span class="ident" id="7298547">got</span><span class="op" id="7298550">,</span>&nbsp;<span class="ident" id="7298552">want</span>&nbsp;<span class="op" id="7298557">:=</span>&nbsp;<span class="ident" id="7298560">x</span><span class="op" id="7298561">.</span><span class="ident" id="7298562">TW</span><span class="op" id="7298564">,</span>&nbsp;<span class="ident" id="7298566">tw</span><span class="op" id="7298568">;</span>&nbsp;<span class="ident" id="7298570">got</span>&nbsp;<span class="op" id="7298574">!=</span>&nbsp;<span class="ident" id="7298577">want</span>&nbsp;<span class="op" id="7298582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298586">t</span><span class="op" id="7298587">.</span><span class="ident" id="7298588">Errorf</span><span class="op" id="7298594">(</span><span class="string" id="7298595">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7298613">,</span>&nbsp;<span class="ident" id="7298615">got</span><span class="op" id="7298618">,</span>&nbsp;<span class="ident" id="7298620">want</span><span class="op" id="7298624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298627">}</span><br>
<span class="lineno">535</span><span class="op" id="7298629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7298632">func</span>&nbsp;<span class="ident" id="7298637">TestGobEncoderFieldTypeError</span><span class="op" id="7298665">(</span><span class="ident" id="7298666">t</span>&nbsp;<span class="op" id="7298668">*</span><span class="ident" id="7298669">testing</span><span class="op" id="7298676">.</span><span class="ident" id="7298677">T</span><span class="op" id="7298678">)</span>&nbsp;<span class="op" id="7298680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7298683">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298720">b</span>&nbsp;<span class="op" id="7298722">:=</span>&nbsp;<span class="builtinfunc" id="7298725">new</span><span class="op" id="7298728">(</span><span class="ident" id="7298729">bytes</span><span class="op" id="7298734">.</span><span class="ident" id="7298735">Buffer</span><span class="op" id="7298741">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298744">enc</span>&nbsp;<span class="op" id="7298748">:=</span>&nbsp;<span class="ident" id="7298751">NewEncoder</span><span class="op" id="7298761">(</span><span class="ident" id="7298762">b</span><span class="op" id="7298763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298766">err</span>&nbsp;<span class="op" id="7298770">:=</span>&nbsp;<span class="ident" id="7298773">enc</span><span class="op" id="7298776">.</span><span class="ident" id="7298777">Encode</span><span class="op" id="7298783">(</span><span class="ident" id="7298784">GobTest1</span><span class="op" id="7298792">{</span><span class="num" id="7298793">17</span><span class="op" id="7298795">,</span>&nbsp;<span class="op" id="7298797">&amp;</span><span class="ident" id="7298798">StringStruct</span><span class="op" id="7298810">{</span><span class="string" id="7298811">&#34;ABC&#34;</span><span class="op" id="7298816">}</span><span class="op" id="7298817">}</span><span class="op" id="7298818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298821">if</span>&nbsp;<span class="ident" id="7298824">err</span>&nbsp;<span class="op" id="7298828">!=</span>&nbsp;<span class="builtintype" id="7298831">nil</span>&nbsp;<span class="op" id="7298835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298839">t</span><span class="op" id="7298840">.</span><span class="ident" id="7298841">Fatal</span><span class="op" id="7298846">(</span><span class="string" id="7298847">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7298862">,</span>&nbsp;<span class="ident" id="7298864">err</span><span class="op" id="7298867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298870">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298873">dec</span>&nbsp;<span class="op" id="7298877">:=</span>&nbsp;<span class="ident" id="7298880">NewDecoder</span><span class="op" id="7298890">(</span><span class="ident" id="7298891">b</span><span class="op" id="7298892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298895">x</span>&nbsp;<span class="op" id="7298897">:=</span>&nbsp;<span class="op" id="7298900">&amp;</span><span class="ident" id="7298901">GobTest2</span><span class="op" id="7298909">{</span><span class="op" id="7298910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298913">err</span>&nbsp;<span class="op" id="7298917">=</span>&nbsp;<span class="ident" id="7298919">dec</span><span class="op" id="7298922">.</span><span class="ident" id="7298923">Decode</span><span class="op" id="7298929">(</span><span class="ident" id="7298930">x</span><span class="op" id="7298931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298934">if</span>&nbsp;<span class="ident" id="7298937">err</span>&nbsp;<span class="op" id="7298941">==</span>&nbsp;<span class="builtintype" id="7298944">nil</span>&nbsp;<span class="op" id="7298948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298952">t</span><span class="op" id="7298953">.</span><span class="ident" id="7298954">Fatal</span><span class="op" id="7298959">(</span><span class="string" id="7298960">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="7299030">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7299036">if</span>&nbsp;<span class="ident" id="7299039">strings</span><span class="op" id="7299046">.</span><span class="ident" id="7299047">Index</span><span class="op" id="7299052">(</span><span class="ident" id="7299053">err</span><span class="op" id="7299056">.</span><span class="ident" id="7299057">Error</span><span class="op" id="7299062">(</span><span class="op" id="7299063">)</span><span class="op" id="7299064">,</span>&nbsp;<span class="string" id="7299066">&#34;type&#34;</span><span class="op" id="7299072">)</span>&nbsp;<span class="op" id="7299074">&lt;</span>&nbsp;<span class="num" id="7299076">0</span>&nbsp;<span class="op" id="7299078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299082">t</span><span class="op" id="7299083">.</span><span class="ident" id="7299084">Fatal</span><span class="op" id="7299089">(</span><span class="string" id="7299090">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="7299116">,</span>&nbsp;<span class="ident" id="7299118">err</span><span class="op" id="7299121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7299127">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299164">b</span><span class="op" id="7299165">.</span><span class="ident" id="7299166">Reset</span><span class="op" id="7299171">(</span><span class="op" id="7299172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299175">err</span>&nbsp;<span class="op" id="7299179">=</span>&nbsp;<span class="ident" id="7299181">enc</span><span class="op" id="7299184">.</span><span class="ident" id="7299185">Encode</span><span class="op" id="7299191">(</span><span class="ident" id="7299192">GobTest2</span><span class="op" id="7299200">{</span><span class="num" id="7299201">17</span><span class="op" id="7299203">,</span>&nbsp;<span class="string" id="7299205">&#34;ABC&#34;</span><span class="op" id="7299210">}</span><span class="op" id="7299211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7299214">if</span>&nbsp;<span class="ident" id="7299217">err</span>&nbsp;<span class="op" id="7299221">!=</span>&nbsp;<span class="builtintype" id="7299224">nil</span>&nbsp;<span class="op" id="7299228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299232">t</span><span class="op" id="7299233">.</span><span class="ident" id="7299234">Fatal</span><span class="op" id="7299239">(</span><span class="string" id="7299240">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7299255">,</span>&nbsp;<span class="ident" id="7299257">err</span><span class="op" id="7299260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299263">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299266">y</span>&nbsp;<span class="op" id="7299268">:=</span>&nbsp;<span class="op" id="7299271">&amp;</span><span class="ident" id="7299272">GobTest1</span><span class="op" id="7299280">{</span><span class="op" id="7299281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299284">err</span>&nbsp;<span class="op" id="7299288">=</span>&nbsp;<span class="ident" id="7299290">dec</span><span class="op" id="7299293">.</span><span class="ident" id="7299294">Decode</span><span class="op" id="7299300">(</span><span class="ident" id="7299301">y</span><span class="op" id="7299302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7299305">if</span>&nbsp;<span class="ident" id="7299308">err</span>&nbsp;<span class="op" id="7299312">==</span>&nbsp;<span class="builtintype" id="7299315">nil</span>&nbsp;<span class="op" id="7299319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299323">t</span><span class="op" id="7299324">.</span><span class="ident" id="7299325">Fatal</span><span class="op" id="7299330">(</span><span class="string" id="7299331">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="7299401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299404">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7299407">if</span>&nbsp;<span class="ident" id="7299410">strings</span><span class="op" id="7299417">.</span><span class="ident" id="7299418">Index</span><span class="op" id="7299423">(</span><span class="ident" id="7299424">err</span><span class="op" id="7299427">.</span><span class="ident" id="7299428">Error</span><span class="op" id="7299433">(</span><span class="op" id="7299434">)</span><span class="op" id="7299435">,</span>&nbsp;<span class="string" id="7299437">&#34;type&#34;</span><span class="op" id="7299443">)</span>&nbsp;<span class="op" id="7299445">&lt;</span>&nbsp;<span class="num" id="7299447">0</span>&nbsp;<span class="op" id="7299449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299453">t</span><span class="op" id="7299454">.</span><span class="ident" id="7299455">Fatal</span><span class="op" id="7299460">(</span><span class="string" id="7299461">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="7299487">,</span>&nbsp;<span class="ident" id="7299489">err</span><span class="op" id="7299492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299495">}</span><br>
<span class="lineno"></span><span class="op" id="7299497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="7299500">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="7299585">func</span>&nbsp;<span class="ident" id="7299590">TestGobEncoderStructSingleton</span><span class="op" id="7299619">(</span><span class="ident" id="7299620">t</span>&nbsp;<span class="op" id="7299622">*</span><span class="ident" id="7299623">testing</span><span class="op" id="7299630">.</span><span class="ident" id="7299631">T</span><span class="op" id="7299632">)</span>&nbsp;<span class="op" id="7299634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299637">b</span>&nbsp;<span class="op" id="7299639">:=</span>&nbsp;<span class="builtinfunc" id="7299642">new</span><span class="op" id="7299645">(</span><span class="ident" id="7299646">bytes</span><span class="op" id="7299651">.</span><span class="ident" id="7299652">Buffer</span><span class="op" id="7299658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299661">enc</span>&nbsp;<span class="op" id="7299665">:=</span>&nbsp;<span class="ident" id="7299668">NewEncoder</span><span class="op" id="7299678">(</span><span class="ident" id="7299679">b</span><span class="op" id="7299680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299683">err</span>&nbsp;<span class="op" id="7299687">:=</span>&nbsp;<span class="ident" id="7299690">enc</span><span class="op" id="7299693">.</span><span class="ident" id="7299694">Encode</span><span class="op" id="7299700">(</span><span class="op" id="7299701">&amp;</span><span class="ident" id="7299702">ByteStruct</span><span class="op" id="7299712">{</span><span class="string" id="7299713">&#39;A&#39;</span><span class="op" id="7299716">}</span><span class="op" id="7299717">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7299720">if</span>&nbsp;<span class="ident" id="7299723">err</span>&nbsp;<span class="op" id="7299727">!=</span>&nbsp;<span class="builtintype" id="7299730">nil</span>&nbsp;<span class="op" id="7299734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299738">t</span><span class="op" id="7299739">.</span><span class="ident" id="7299740">Fatal</span><span class="op" id="7299745">(</span><span class="string" id="7299746">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7299761">,</span>&nbsp;<span class="ident" id="7299763">err</span><span class="op" id="7299766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299772">dec</span>&nbsp;<span class="op" id="7299776">:=</span>&nbsp;<span class="ident" id="7299779">NewDecoder</span><span class="op" id="7299789">(</span><span class="ident" id="7299790">b</span><span class="op" id="7299791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299794">x</span>&nbsp;<span class="op" id="7299796">:=</span>&nbsp;<span class="builtinfunc" id="7299799">new</span><span class="op" id="7299802">(</span><span class="ident" id="7299803">ByteStruct</span><span class="op" id="7299813">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299816">err</span>&nbsp;<span class="op" id="7299820">=</span>&nbsp;<span class="ident" id="7299822">dec</span><span class="op" id="7299825">.</span><span class="ident" id="7299826">Decode</span><span class="op" id="7299832">(</span><span class="ident" id="7299833">x</span><span class="op" id="7299834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7299837">if</span>&nbsp;<span class="ident" id="7299840">err</span>&nbsp;<span class="op" id="7299844">!=</span>&nbsp;<span class="builtintype" id="7299847">nil</span>&nbsp;<span class="op" id="7299851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299855">t</span><span class="op" id="7299856">.</span><span class="ident" id="7299857">Fatal</span><span class="op" id="7299862">(</span><span class="string" id="7299863">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7299878">,</span>&nbsp;<span class="ident" id="7299880">err</span><span class="op" id="7299883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7299889">if</span>&nbsp;<span class="ident" id="7299892">x</span><span class="op" id="7299893">.</span><span class="ident" id="7299894">a</span>&nbsp;<span class="op" id="7299896">!=</span>&nbsp;<span class="string" id="7299899">&#39;A&#39;</span>&nbsp;<span class="op" id="7299903">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299907">t</span><span class="op" id="7299908">.</span><span class="ident" id="7299909">Errorf</span><span class="op" id="7299915">(</span><span class="string" id="7299916">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7299937">,</span>&nbsp;<span class="ident" id="7299939">x</span><span class="op" id="7299940">.</span><span class="ident" id="7299941">a</span><span class="op" id="7299942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299945">}</span><br>
<span class="lineno"></span><span class="op" id="7299947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7299950">func</span>&nbsp;<span class="ident" id="7299955">TestGobEncoderNonStructSingleton</span><span class="op" id="7299987">(</span><span class="ident" id="7299988">t</span>&nbsp;<span class="op" id="7299990">*</span><span class="ident" id="7299991">testing</span><span class="op" id="7299998">.</span><span class="ident" id="7299999">T</span><span class="op" id="7300000">)</span>&nbsp;<span class="op" id="7300002">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300005">b</span>&nbsp;<span class="op" id="7300007">:=</span>&nbsp;<span class="builtinfunc" id="7300010">new</span><span class="op" id="7300013">(</span><span class="ident" id="7300014">bytes</span><span class="op" id="7300019">.</span><span class="ident" id="7300020">Buffer</span><span class="op" id="7300026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300029">enc</span>&nbsp;<span class="op" id="7300033">:=</span>&nbsp;<span class="ident" id="7300036">NewEncoder</span><span class="op" id="7300046">(</span><span class="ident" id="7300047">b</span><span class="op" id="7300048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300051">var</span>&nbsp;<span class="ident" id="7300055">g</span>&nbsp;<span class="ident" id="7300057">Gobber</span>&nbsp;<span class="op" id="7300064">=</span>&nbsp;<span class="num" id="7300066">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300072">err</span>&nbsp;<span class="op" id="7300076">:=</span>&nbsp;<span class="ident" id="7300079">enc</span><span class="op" id="7300082">.</span><span class="ident" id="7300083">Encode</span><span class="op" id="7300089">(</span><span class="op" id="7300090">&amp;</span><span class="ident" id="7300091">g</span><span class="op" id="7300092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300095">if</span>&nbsp;<span class="ident" id="7300098">err</span>&nbsp;<span class="op" id="7300102">!=</span>&nbsp;<span class="builtintype" id="7300105">nil</span>&nbsp;<span class="op" id="7300109">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300113">t</span><span class="op" id="7300114">.</span><span class="ident" id="7300115">Fatal</span><span class="op" id="7300120">(</span><span class="string" id="7300121">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7300136">,</span>&nbsp;<span class="ident" id="7300138">err</span><span class="op" id="7300141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300147">dec</span>&nbsp;<span class="op" id="7300151">:=</span>&nbsp;<span class="ident" id="7300154">NewDecoder</span><span class="op" id="7300164">(</span><span class="ident" id="7300165">b</span><span class="op" id="7300166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300169">var</span>&nbsp;<span class="ident" id="7300173">x</span>&nbsp;<span class="ident" id="7300175">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300183">err</span>&nbsp;<span class="op" id="7300187">=</span>&nbsp;<span class="ident" id="7300189">dec</span><span class="op" id="7300192">.</span><span class="ident" id="7300193">Decode</span><span class="op" id="7300199">(</span><span class="op" id="7300200">&amp;</span><span class="ident" id="7300201">x</span><span class="op" id="7300202">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300205">if</span>&nbsp;<span class="ident" id="7300208">err</span>&nbsp;<span class="op" id="7300212">!=</span>&nbsp;<span class="builtintype" id="7300215">nil</span>&nbsp;<span class="op" id="7300219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300223">t</span><span class="op" id="7300224">.</span><span class="ident" id="7300225">Fatal</span><span class="op" id="7300230">(</span><span class="string" id="7300231">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7300246">,</span>&nbsp;<span class="ident" id="7300248">err</span><span class="op" id="7300251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300257">if</span>&nbsp;<span class="ident" id="7300260">x</span>&nbsp;<span class="op" id="7300262">!=</span>&nbsp;<span class="num" id="7300265">1234</span>&nbsp;<span class="op" id="7300270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300274">t</span><span class="op" id="7300275">.</span><span class="ident" id="7300276">Errorf</span><span class="op" id="7300282">(</span><span class="string" id="7300283">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7300305">,</span>&nbsp;<span class="ident" id="7300307">x</span><span class="op" id="7300308">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300311">}</span><br>
<span class="lineno"></span><span class="op" id="7300313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7300316">func</span>&nbsp;<span class="ident" id="7300321">TestGobEncoderIgnoreStructField</span><span class="op" id="7300352">(</span><span class="ident" id="7300353">t</span>&nbsp;<span class="op" id="7300355">*</span><span class="ident" id="7300356">testing</span><span class="op" id="7300363">.</span><span class="ident" id="7300364">T</span><span class="op" id="7300365">)</span>&nbsp;<span class="op" id="7300367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300370">b</span>&nbsp;<span class="op" id="7300372">:=</span>&nbsp;<span class="builtinfunc" id="7300375">new</span><span class="op" id="7300378">(</span><span class="ident" id="7300379">bytes</span><span class="op" id="7300384">.</span><span class="ident" id="7300385">Buffer</span><span class="op" id="7300391">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7300394">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300432">enc</span>&nbsp;<span class="op" id="7300436">:=</span>&nbsp;<span class="ident" id="7300439">NewEncoder</span><span class="op" id="7300449">(</span><span class="ident" id="7300450">b</span><span class="op" id="7300451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300454">err</span>&nbsp;<span class="op" id="7300458">:=</span>&nbsp;<span class="ident" id="7300461">enc</span><span class="op" id="7300464">.</span><span class="ident" id="7300465">Encode</span><span class="op" id="7300471">(</span><span class="ident" id="7300472">GobTest0</span><span class="op" id="7300480">{</span><span class="num" id="7300481">17</span><span class="op" id="7300483">,</span>&nbsp;<span class="op" id="7300485">&amp;</span><span class="ident" id="7300486">ByteStruct</span><span class="op" id="7300496">{</span><span class="string" id="7300497">&#39;A&#39;</span><span class="op" id="7300500">}</span><span class="op" id="7300501">}</span><span class="op" id="7300502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300505">if</span>&nbsp;<span class="ident" id="7300508">err</span>&nbsp;<span class="op" id="7300512">!=</span>&nbsp;<span class="builtintype" id="7300515">nil</span>&nbsp;<span class="op" id="7300519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300523">t</span><span class="op" id="7300524">.</span><span class="ident" id="7300525">Fatal</span><span class="op" id="7300530">(</span><span class="string" id="7300531">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7300546">,</span>&nbsp;<span class="ident" id="7300548">err</span><span class="op" id="7300551">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300557">dec</span>&nbsp;<span class="op" id="7300561">:=</span>&nbsp;<span class="ident" id="7300564">NewDecoder</span><span class="op" id="7300574">(</span><span class="ident" id="7300575">b</span><span class="op" id="7300576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300579">x</span>&nbsp;<span class="op" id="7300581">:=</span>&nbsp;<span class="builtinfunc" id="7300584">new</span><span class="op" id="7300587">(</span><span class="ident" id="7300588">GobTestIgnoreEncoder</span><span class="op" id="7300608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300611">err</span>&nbsp;<span class="op" id="7300615">=</span>&nbsp;<span class="ident" id="7300617">dec</span><span class="op" id="7300620">.</span><span class="ident" id="7300621">Decode</span><span class="op" id="7300627">(</span><span class="ident" id="7300628">x</span><span class="op" id="7300629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300632">if</span>&nbsp;<span class="ident" id="7300635">err</span>&nbsp;<span class="op" id="7300639">!=</span>&nbsp;<span class="builtintype" id="7300642">nil</span>&nbsp;<span class="op" id="7300646">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300650">t</span><span class="op" id="7300651">.</span><span class="ident" id="7300652">Fatal</span><span class="op" id="7300657">(</span><span class="string" id="7300658">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7300673">,</span>&nbsp;<span class="ident" id="7300675">err</span><span class="op" id="7300678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300684">if</span>&nbsp;<span class="ident" id="7300687">x</span><span class="op" id="7300688">.</span><span class="ident" id="7300689">X</span>&nbsp;<span class="op" id="7300691">!=</span>&nbsp;<span class="num" id="7300694">17</span>&nbsp;<span class="op" id="7300697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300701">t</span><span class="op" id="7300702">.</span><span class="ident" id="7300703">Errorf</span><span class="op" id="7300709">(</span><span class="string" id="7300710">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7300730">,</span>&nbsp;<span class="ident" id="7300732">x</span><span class="op" id="7300733">.</span><span class="ident" id="7300734">X</span><span class="op" id="7300735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300738">}</span><br>
<span class="lineno">625</span><span class="op" id="7300740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7300743">func</span>&nbsp;<span class="ident" id="7300748">TestGobEncoderIgnoreNonStructField</span><span class="op" id="7300782">(</span><span class="ident" id="7300783">t</span>&nbsp;<span class="op" id="7300785">*</span><span class="ident" id="7300786">testing</span><span class="op" id="7300793">.</span><span class="ident" id="7300794">T</span><span class="op" id="7300795">)</span>&nbsp;<span class="op" id="7300797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300800">b</span>&nbsp;<span class="op" id="7300802">:=</span>&nbsp;<span class="builtinfunc" id="7300805">new</span><span class="op" id="7300808">(</span><span class="ident" id="7300809">bytes</span><span class="op" id="7300814">.</span><span class="ident" id="7300815">Buffer</span><span class="op" id="7300821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7300824">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300862">enc</span>&nbsp;<span class="op" id="7300866">:=</span>&nbsp;<span class="ident" id="7300869">NewEncoder</span><span class="op" id="7300879">(</span><span class="ident" id="7300880">b</span><span class="op" id="7300881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300884">gobber</span>&nbsp;<span class="op" id="7300891">:=</span>&nbsp;<span class="ident" id="7300894">Gobber</span><span class="op" id="7300900">(</span><span class="num" id="7300901">23</span><span class="op" id="7300903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300906">bgobber</span>&nbsp;<span class="op" id="7300914">:=</span>&nbsp;<span class="ident" id="7300917">BinaryGobber</span><span class="op" id="7300929">(</span><span class="num" id="7300930">24</span><span class="op" id="7300932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300935">tgobber</span>&nbsp;<span class="op" id="7300943">:=</span>&nbsp;<span class="ident" id="7300946">TextGobber</span><span class="op" id="7300956">(</span><span class="num" id="7300957">25</span><span class="op" id="7300959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300962">err</span>&nbsp;<span class="op" id="7300966">:=</span>&nbsp;<span class="ident" id="7300969">enc</span><span class="op" id="7300972">.</span><span class="ident" id="7300973">Encode</span><span class="op" id="7300979">(</span><span class="ident" id="7300980">GobTest3</span><span class="op" id="7300988">{</span><span class="num" id="7300989">17</span><span class="op" id="7300991">,</span>&nbsp;<span class="op" id="7300993">&amp;</span><span class="ident" id="7300994">gobber</span><span class="op" id="7301000">,</span>&nbsp;<span class="op" id="7301002">&amp;</span><span class="ident" id="7301003">bgobber</span><span class="op" id="7301010">,</span>&nbsp;<span class="op" id="7301012">&amp;</span><span class="ident" id="7301013">tgobber</span><span class="op" id="7301020">}</span><span class="op" id="7301021">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301024">if</span>&nbsp;<span class="ident" id="7301027">err</span>&nbsp;<span class="op" id="7301031">!=</span>&nbsp;<span class="builtintype" id="7301034">nil</span>&nbsp;<span class="op" id="7301038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301042">t</span><span class="op" id="7301043">.</span><span class="ident" id="7301044">Fatal</span><span class="op" id="7301049">(</span><span class="string" id="7301050">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7301065">,</span>&nbsp;<span class="ident" id="7301067">err</span><span class="op" id="7301070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7301073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301076">dec</span>&nbsp;<span class="op" id="7301080">:=</span>&nbsp;<span class="ident" id="7301083">NewDecoder</span><span class="op" id="7301093">(</span><span class="ident" id="7301094">b</span><span class="op" id="7301095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301098">x</span>&nbsp;<span class="op" id="7301100">:=</span>&nbsp;<span class="builtinfunc" id="7301103">new</span><span class="op" id="7301106">(</span><span class="ident" id="7301107">GobTestIgnoreEncoder</span><span class="op" id="7301127">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301130">err</span>&nbsp;<span class="op" id="7301134">=</span>&nbsp;<span class="ident" id="7301136">dec</span><span class="op" id="7301139">.</span><span class="ident" id="7301140">Decode</span><span class="op" id="7301146">(</span><span class="ident" id="7301147">x</span><span class="op" id="7301148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301151">if</span>&nbsp;<span class="ident" id="7301154">err</span>&nbsp;<span class="op" id="7301158">!=</span>&nbsp;<span class="builtintype" id="7301161">nil</span>&nbsp;<span class="op" id="7301165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301169">t</span><span class="op" id="7301170">.</span><span class="ident" id="7301171">Fatal</span><span class="op" id="7301176">(</span><span class="string" id="7301177">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7301192">,</span>&nbsp;<span class="ident" id="7301194">err</span><span class="op" id="7301197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7301200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301203">if</span>&nbsp;<span class="ident" id="7301206">x</span><span class="op" id="7301207">.</span><span class="ident" id="7301208">X</span>&nbsp;<span class="op" id="7301210">!=</span>&nbsp;<span class="num" id="7301213">17</span>&nbsp;<span class="op" id="7301216">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301220">t</span><span class="op" id="7301221">.</span><span class="ident" id="7301222">Errorf</span><span class="op" id="7301228">(</span><span class="string" id="7301229">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7301249">,</span>&nbsp;<span class="ident" id="7301251">x</span><span class="op" id="7301252">.</span><span class="ident" id="7301253">X</span><span class="op" id="7301254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7301257">}</span><br>
<span class="lineno"></span><span class="op" id="7301259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7301262">func</span>&nbsp;<span class="ident" id="7301267">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="7301297">(</span><span class="ident" id="7301298">t</span>&nbsp;<span class="op" id="7301300">*</span><span class="ident" id="7301301">testing</span><span class="op" id="7301308">.</span><span class="ident" id="7301309">T</span><span class="op" id="7301310">)</span>&nbsp;<span class="op" id="7301312">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301315">b</span>&nbsp;<span class="op" id="7301317">:=</span>&nbsp;<span class="builtinfunc" id="7301320">new</span><span class="op" id="7301323">(</span><span class="ident" id="7301324">bytes</span><span class="op" id="7301329">.</span><span class="ident" id="7301330">Buffer</span><span class="op" id="7301336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7301339">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301377">enc</span>&nbsp;<span class="op" id="7301381">:=</span>&nbsp;<span class="ident" id="7301384">NewEncoder</span><span class="op" id="7301394">(</span><span class="ident" id="7301395">b</span><span class="op" id="7301396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301399">err</span>&nbsp;<span class="op" id="7301403">:=</span>&nbsp;<span class="ident" id="7301406">enc</span><span class="op" id="7301409">.</span><span class="ident" id="7301410">Encode</span><span class="op" id="7301416">(</span><span class="ident" id="7301417">GobTest0</span><span class="op" id="7301425">{</span><span class="ident" id="7301426">X</span><span class="op" id="7301427">:</span>&nbsp;<span class="num" id="7301429">18</span><span class="op" id="7301431">}</span><span class="op" id="7301432">)</span>&nbsp;<span class="comment" id="7301434">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301447">if</span>&nbsp;<span class="ident" id="7301450">err</span>&nbsp;<span class="op" id="7301454">!=</span>&nbsp;<span class="builtintype" id="7301457">nil</span>&nbsp;<span class="op" id="7301461">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301465">t</span><span class="op" id="7301466">.</span><span class="ident" id="7301467">Fatal</span><span class="op" id="7301472">(</span><span class="string" id="7301473">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7301488">,</span>&nbsp;<span class="ident" id="7301490">err</span><span class="op" id="7301493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7301496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301499">dec</span>&nbsp;<span class="op" id="7301503">:=</span>&nbsp;<span class="ident" id="7301506">NewDecoder</span><span class="op" id="7301516">(</span><span class="ident" id="7301517">b</span><span class="op" id="7301518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301521">x</span>&nbsp;<span class="op" id="7301523">:=</span>&nbsp;<span class="builtinfunc" id="7301526">new</span><span class="op" id="7301529">(</span><span class="ident" id="7301530">GobTest0</span><span class="op" id="7301538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301541">err</span>&nbsp;<span class="op" id="7301545">=</span>&nbsp;<span class="ident" id="7301547">dec</span><span class="op" id="7301550">.</span><span class="ident" id="7301551">Decode</span><span class="op" id="7301557">(</span><span class="ident" id="7301558">x</span><span class="op" id="7301559">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301562">if</span>&nbsp;<span class="ident" id="7301565">err</span>&nbsp;<span class="op" id="7301569">!=</span>&nbsp;<span class="builtintype" id="7301572">nil</span>&nbsp;<span class="op" id="7301576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301580">t</span><span class="op" id="7301581">.</span><span class="ident" id="7301582">Fatal</span><span class="op" id="7301587">(</span><span class="string" id="7301588">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7301603">,</span>&nbsp;<span class="ident" id="7301605">err</span><span class="op" id="7301608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7301611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301614">if</span>&nbsp;<span class="ident" id="7301617">x</span><span class="op" id="7301618">.</span><span class="ident" id="7301619">X</span>&nbsp;<span class="op" id="7301621">!=</span>&nbsp;<span class="num" id="7301624">18</span>&nbsp;<span class="op" id="7301627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301631">t</span><span class="op" id="7301632">.</span><span class="ident" id="7301633">Errorf</span><span class="op" id="7301639">(</span><span class="string" id="7301640">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7301667">,</span>&nbsp;<span class="ident" id="7301669">x</span><span class="op" id="7301670">.</span><span class="ident" id="7301671">X</span><span class="op" id="7301672">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7301675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301678">if</span>&nbsp;<span class="ident" id="7301681">x</span><span class="op" id="7301682">.</span><span class="ident" id="7301683">G</span>&nbsp;<span class="op" id="7301685">!=</span>&nbsp;<span class="builtintype" id="7301688">nil</span>&nbsp;<span class="op" id="7301692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301696">t</span><span class="op" id="7301697">.</span><span class="ident" id="7301698">Errorf</span><span class="op" id="7301704">(</span><span class="string" id="7301705">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7301733">,</span>&nbsp;<span class="ident" id="7301735">x</span><span class="op" id="7301736">.</span><span class="ident" id="7301737">G</span><span class="op" id="7301738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7301741">}</span><br>
<span class="lineno"></span><span class="op" id="7301743">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="7301746">type</span>&nbsp;<span class="ident" id="7301751">gobDecoderBug0</span>&nbsp;<span class="keyword" id="7301766">struct</span>&nbsp;<span class="op" id="7301773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301776">foo</span><span class="op" id="7301779">,</span>&nbsp;<span class="ident" id="7301781">bar</span>&nbsp;<span class="builtintype" id="7301785">string</span><br>
<span class="lineno"></span><span class="op" id="7301792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7301795">func</span>&nbsp;<span class="op" id="7301800">(</span><span class="ident" id="7301801">br</span>&nbsp;<span class="op" id="7301804">*</span><span class="ident" id="7301805">gobDecoderBug0</span><span class="op" id="7301819">)</span>&nbsp;<span class="ident" id="7301821">String</span><span class="op" id="7301827">(</span><span class="op" id="7301828">)</span>&nbsp;<span class="builtintype" id="7301830">string</span>&nbsp;<span class="op" id="7301837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301840">return</span>&nbsp;<span class="ident" id="7301847">br</span><span class="op" id="7301849">.</span><span class="ident" id="7301850">foo</span>&nbsp;<span class="op" id="7301854">+</span>&nbsp;<span class="string" id="7301856">&#34;-&#34;</span>&nbsp;<span class="op" id="7301860">+</span>&nbsp;<span class="ident" id="7301862">br</span><span class="op" id="7301864">.</span><span class="ident" id="7301865">bar</span><br>
<span class="lineno"></span><span class="op" id="7301869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7301872">func</span>&nbsp;<span class="op" id="7301877">(</span><span class="ident" id="7301878">br</span>&nbsp;<span class="op" id="7301881">*</span><span class="ident" id="7301882">gobDecoderBug0</span><span class="op" id="7301896">)</span>&nbsp;<span class="ident" id="7301898">GobEncode</span><span class="op" id="7301907">(</span><span class="op" id="7301908">)</span>&nbsp;<span class="op" id="7301910">(</span><span class="op" id="7301911">[</span><span class="op" id="7301912">]</span><span class="builtintype" id="7301913">byte</span><span class="op" id="7301917">,</span>&nbsp;<span class="builtintype" id="7301919">error</span><span class="op" id="7301924">)</span>&nbsp;<span class="op" id="7301926">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301929">return</span>&nbsp;<span class="op" id="7301936">[</span><span class="op" id="7301937">]</span><span class="builtintype" id="7301938">byte</span><span class="op" id="7301942">(</span><span class="ident" id="7301943">br</span><span class="op" id="7301945">.</span><span class="ident" id="7301946">String</span><span class="op" id="7301952">(</span><span class="op" id="7301953">)</span><span class="op" id="7301954">)</span><span class="op" id="7301955">,</span>&nbsp;<span class="builtintype" id="7301957">nil</span><br>
<span class="lineno"></span><span class="op" id="7301961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7301964">func</span>&nbsp;<span class="op" id="7301969">(</span><span class="ident" id="7301970">br</span>&nbsp;<span class="op" id="7301973">*</span><span class="ident" id="7301974">gobDecoderBug0</span><span class="op" id="7301988">)</span>&nbsp;<span class="ident" id="7301990">GobDecode</span><span class="op" id="7301999">(</span><span class="ident" id="7302000">b</span>&nbsp;<span class="op" id="7302002">[</span><span class="op" id="7302003">]</span><span class="builtintype" id="7302004">byte</span><span class="op" id="7302008">)</span>&nbsp;<span class="builtintype" id="7302010">error</span>&nbsp;<span class="op" id="7302016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302019">br</span><span class="op" id="7302021">.</span><span class="ident" id="7302022">foo</span>&nbsp;<span class="op" id="7302026">=</span>&nbsp;<span class="string" id="7302028">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302035">br</span><span class="op" id="7302037">.</span><span class="ident" id="7302038">bar</span>&nbsp;<span class="op" id="7302042">=</span>&nbsp;<span class="string" id="7302044">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302051">return</span>&nbsp;<span class="builtintype" id="7302058">nil</span><br>
<span class="lineno"></span><span class="op" id="7302062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7302065">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="7302131">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="7302153">func</span>&nbsp;<span class="ident" id="7302158">TestGobEncoderExtraIndirect</span><span class="op" id="7302185">(</span><span class="ident" id="7302186">t</span>&nbsp;<span class="op" id="7302188">*</span><span class="ident" id="7302189">testing</span><span class="op" id="7302196">.</span><span class="ident" id="7302197">T</span><span class="op" id="7302198">)</span>&nbsp;<span class="op" id="7302200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302203">gdb</span>&nbsp;<span class="op" id="7302207">:=</span>&nbsp;<span class="op" id="7302210">&amp;</span><span class="ident" id="7302211">gobDecoderBug0</span><span class="op" id="7302225">{</span><span class="string" id="7302226">&#34;foo&#34;</span><span class="op" id="7302231">,</span>&nbsp;<span class="string" id="7302233">&#34;bar&#34;</span><span class="op" id="7302238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302241">buf</span>&nbsp;<span class="op" id="7302245">:=</span>&nbsp;<span class="builtinfunc" id="7302248">new</span><span class="op" id="7302251">(</span><span class="ident" id="7302252">bytes</span><span class="op" id="7302257">.</span><span class="ident" id="7302258">Buffer</span><span class="op" id="7302264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302267">e</span>&nbsp;<span class="op" id="7302269">:=</span>&nbsp;<span class="ident" id="7302272">NewEncoder</span><span class="op" id="7302282">(</span><span class="ident" id="7302283">buf</span><span class="op" id="7302286">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302289">if</span>&nbsp;<span class="ident" id="7302292">err</span>&nbsp;<span class="op" id="7302296">:=</span>&nbsp;<span class="ident" id="7302299">e</span><span class="op" id="7302300">.</span><span class="ident" id="7302301">Encode</span><span class="op" id="7302307">(</span><span class="ident" id="7302308">gdb</span><span class="op" id="7302311">)</span><span class="op" id="7302312">;</span>&nbsp;<span class="ident" id="7302314">err</span>&nbsp;<span class="op" id="7302318">!=</span>&nbsp;<span class="builtintype" id="7302321">nil</span>&nbsp;<span class="op" id="7302325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302329">t</span><span class="op" id="7302330">.</span><span class="ident" id="7302331">Fatalf</span><span class="op" id="7302337">(</span><span class="string" id="7302338">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="7302350">,</span>&nbsp;<span class="ident" id="7302352">err</span><span class="op" id="7302355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7302358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302361">d</span>&nbsp;<span class="op" id="7302363">:=</span>&nbsp;<span class="ident" id="7302366">NewDecoder</span><span class="op" id="7302376">(</span><span class="ident" id="7302377">buf</span><span class="op" id="7302380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302383">var</span>&nbsp;<span class="ident" id="7302387">got</span>&nbsp;<span class="op" id="7302391">*</span><span class="ident" id="7302392">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302408">if</span>&nbsp;<span class="ident" id="7302411">err</span>&nbsp;<span class="op" id="7302415">:=</span>&nbsp;<span class="ident" id="7302418">d</span><span class="op" id="7302419">.</span><span class="ident" id="7302420">Decode</span><span class="op" id="7302426">(</span><span class="op" id="7302427">&amp;</span><span class="ident" id="7302428">got</span><span class="op" id="7302431">)</span><span class="op" id="7302432">;</span>&nbsp;<span class="ident" id="7302434">err</span>&nbsp;<span class="op" id="7302438">!=</span>&nbsp;<span class="builtintype" id="7302441">nil</span>&nbsp;<span class="op" id="7302445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302449">t</span><span class="op" id="7302450">.</span><span class="ident" id="7302451">Fatalf</span><span class="op" id="7302457">(</span><span class="string" id="7302458">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7302470">,</span>&nbsp;<span class="ident" id="7302472">err</span><span class="op" id="7302475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7302478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302481">if</span>&nbsp;<span class="ident" id="7302484">got</span><span class="op" id="7302487">.</span><span class="ident" id="7302488">foo</span>&nbsp;<span class="op" id="7302492">!=</span>&nbsp;<span class="ident" id="7302495">gdb</span><span class="op" id="7302498">.</span><span class="ident" id="7302499">foo</span>&nbsp;<span class="op" id="7302503">||</span>&nbsp;<span class="ident" id="7302506">got</span><span class="op" id="7302509">.</span><span class="ident" id="7302510">bar</span>&nbsp;<span class="op" id="7302514">!=</span>&nbsp;<span class="ident" id="7302517">gdb</span><span class="op" id="7302520">.</span><span class="ident" id="7302521">bar</span>&nbsp;<span class="op" id="7302525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302529">t</span><span class="op" id="7302530">.</span><span class="ident" id="7302531">Errorf</span><span class="op" id="7302537">(</span><span class="string" id="7302538">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7302557">,</span>&nbsp;<span class="ident" id="7302559">got</span><span class="op" id="7302562">,</span>&nbsp;<span class="ident" id="7302564">gdb</span><span class="op" id="7302567">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7302570">}</span><br>
<span class="lineno"></span><span class="op" id="7302572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7302575">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="7302639">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="7302708">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="7302770">type</span>&nbsp;<span class="ident" id="7302775">isZeroBug</span>&nbsp;<span class="keyword" id="7302785">struct</span>&nbsp;<span class="op" id="7302792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302795">T</span>&nbsp;<span class="ident" id="7302797">time</span><span class="op" id="7302801">.</span><span class="ident" id="7302802">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302808">S</span>&nbsp;<span class="builtintype" id="7302810">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302818">I</span>&nbsp;<span class="builtintype" id="7302820">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302825">A</span>&nbsp;<span class="ident" id="7302827">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302843">F</span>&nbsp;<span class="ident" id="7302845">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="7302864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7302867">type</span>&nbsp;<span class="ident" id="7302872">isZeroBugArray</span>&nbsp;<span class="op" id="7302887">[</span><span class="num" id="7302888">2</span><span class="op" id="7302889">]</span><span class="builtintype" id="7302890">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="7302897">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="7302957">func</span>&nbsp;<span class="op" id="7302962">(</span><span class="ident" id="7302963">a</span>&nbsp;<span class="ident" id="7302965">isZeroBugArray</span><span class="op" id="7302979">)</span>&nbsp;<span class="ident" id="7302981">GobEncode</span><span class="op" id="7302990">(</span><span class="op" id="7302991">)</span>&nbsp;<span class="op" id="7302993">(</span><span class="ident" id="7302994">b</span>&nbsp;<span class="op" id="7302996">[</span><span class="op" id="7302997">]</span><span class="builtintype" id="7302998">byte</span><span class="op" id="7303002">,</span>&nbsp;<span class="ident" id="7303004">e</span>&nbsp;<span class="builtintype" id="7303006">error</span><span class="op" id="7303011">)</span>&nbsp;<span class="op" id="7303013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303016">b</span>&nbsp;<span class="op" id="7303018">=</span>&nbsp;<span class="builtinfunc" id="7303020">append</span><span class="op" id="7303026">(</span><span class="ident" id="7303027">b</span><span class="op" id="7303028">,</span>&nbsp;<span class="ident" id="7303030">a</span><span class="op" id="7303031">[</span><span class="op" id="7303032">:</span><span class="op" id="7303033">]</span><span class="op" id="7303034">...</span><span class="op" id="7303037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303040">return</span>&nbsp;<span class="ident" id="7303047">b</span><span class="op" id="7303048">,</span>&nbsp;<span class="builtintype" id="7303050">nil</span><br>
<span class="lineno">725</span><span class="op" id="7303054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7303057">func</span>&nbsp;<span class="op" id="7303062">(</span><span class="ident" id="7303063">a</span>&nbsp;<span class="op" id="7303065">*</span><span class="ident" id="7303066">isZeroBugArray</span><span class="op" id="7303080">)</span>&nbsp;<span class="ident" id="7303082">GobDecode</span><span class="op" id="7303091">(</span><span class="ident" id="7303092">data</span>&nbsp;<span class="op" id="7303097">[</span><span class="op" id="7303098">]</span><span class="builtintype" id="7303099">byte</span><span class="op" id="7303103">)</span>&nbsp;<span class="builtintype" id="7303105">error</span>&nbsp;<span class="op" id="7303111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303114">if</span>&nbsp;<span class="builtinfunc" id="7303117">len</span><span class="op" id="7303120">(</span><span class="ident" id="7303121">data</span><span class="op" id="7303125">)</span>&nbsp;<span class="op" id="7303127">!=</span>&nbsp;<span class="builtinfunc" id="7303130">len</span><span class="op" id="7303133">(</span><span class="ident" id="7303134">a</span><span class="op" id="7303135">)</span>&nbsp;<span class="op" id="7303137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303141">return</span>&nbsp;<span class="ident" id="7303148">io</span><span class="op" id="7303150">.</span><span class="ident" id="7303151">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303159">a</span><span class="op" id="7303160">[</span><span class="num" id="7303161">0</span><span class="op" id="7303162">]</span>&nbsp;<span class="op" id="7303164">=</span>&nbsp;<span class="ident" id="7303166">data</span><span class="op" id="7303170">[</span><span class="num" id="7303171">0</span><span class="op" id="7303172">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303175">a</span><span class="op" id="7303176">[</span><span class="num" id="7303177">1</span><span class="op" id="7303178">]</span>&nbsp;<span class="op" id="7303180">=</span>&nbsp;<span class="ident" id="7303182">data</span><span class="op" id="7303186">[</span><span class="num" id="7303187">1</span><span class="op" id="7303188">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303191">return</span>&nbsp;<span class="builtintype" id="7303198">nil</span><br>
<span class="lineno"></span><span class="op" id="7303202">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="7303205">type</span>&nbsp;<span class="ident" id="7303210">isZeroBugInterface</span>&nbsp;<span class="keyword" id="7303229">struct</span>&nbsp;<span class="op" id="7303236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303239">I</span>&nbsp;<span class="keyword" id="7303241">interface</span><span class="op" id="7303250">{</span><span class="op" id="7303251">}</span><br>
<span class="lineno"></span><span class="op" id="7303253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="7303256">func</span>&nbsp;<span class="op" id="7303261">(</span><span class="ident" id="7303262">i</span>&nbsp;<span class="ident" id="7303264">isZeroBugInterface</span><span class="op" id="7303282">)</span>&nbsp;<span class="ident" id="7303284">GobEncode</span><span class="op" id="7303293">(</span><span class="op" id="7303294">)</span>&nbsp;<span class="op" id="7303296">(</span><span class="ident" id="7303297">b</span>&nbsp;<span class="op" id="7303299">[</span><span class="op" id="7303300">]</span><span class="builtintype" id="7303301">byte</span><span class="op" id="7303305">,</span>&nbsp;<span class="ident" id="7303307">e</span>&nbsp;<span class="builtintype" id="7303309">error</span><span class="op" id="7303314">)</span>&nbsp;<span class="op" id="7303316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303319">return</span>&nbsp;<span class="op" id="7303326">[</span><span class="op" id="7303327">]</span><span class="builtintype" id="7303328">byte</span><span class="op" id="7303332">{</span><span class="op" id="7303333">}</span><span class="op" id="7303334">,</span>&nbsp;<span class="builtintype" id="7303336">nil</span><br>
<span class="lineno"></span><span class="op" id="7303340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7303343">func</span>&nbsp;<span class="op" id="7303348">(</span><span class="ident" id="7303349">i</span>&nbsp;<span class="op" id="7303351">*</span><span class="ident" id="7303352">isZeroBugInterface</span><span class="op" id="7303370">)</span>&nbsp;<span class="ident" id="7303372">GobDecode</span><span class="op" id="7303381">(</span><span class="ident" id="7303382">data</span>&nbsp;<span class="op" id="7303387">[</span><span class="op" id="7303388">]</span><span class="builtintype" id="7303389">byte</span><span class="op" id="7303393">)</span>&nbsp;<span class="builtintype" id="7303395">error</span>&nbsp;<span class="op" id="7303401">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303404">return</span>&nbsp;<span class="builtintype" id="7303411">nil</span><br>
<span class="lineno"></span><span class="op" id="7303415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7303418">func</span>&nbsp;<span class="ident" id="7303423">TestGobEncodeIsZero</span><span class="op" id="7303442">(</span><span class="ident" id="7303443">t</span>&nbsp;<span class="op" id="7303445">*</span><span class="ident" id="7303446">testing</span><span class="op" id="7303453">.</span><span class="ident" id="7303454">T</span><span class="op" id="7303455">)</span>&nbsp;<span class="op" id="7303457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303460">x</span>&nbsp;<span class="op" id="7303462">:=</span>&nbsp;<span class="ident" id="7303465">isZeroBug</span><span class="op" id="7303474">{</span><span class="ident" id="7303475">time</span><span class="op" id="7303479">.</span><span class="ident" id="7303480">Now</span><span class="op" id="7303483">(</span><span class="op" id="7303484">)</span><span class="op" id="7303485">,</span>&nbsp;<span class="string" id="7303487">&#34;hello&#34;</span><span class="op" id="7303494">,</span>&nbsp;<span class="op" id="7303496">-</span><span class="num" id="7303497">55</span><span class="op" id="7303499">,</span>&nbsp;<span class="ident" id="7303501">isZeroBugArray</span><span class="op" id="7303515">{</span><span class="num" id="7303516">1</span><span class="op" id="7303517">,</span>&nbsp;<span class="num" id="7303519">2</span><span class="op" id="7303520">}</span><span class="op" id="7303521">,</span>&nbsp;<span class="ident" id="7303523">isZeroBugInterface</span><span class="op" id="7303541">{</span><span class="op" id="7303542">}</span><span class="op" id="7303543">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303546">b</span>&nbsp;<span class="op" id="7303548">:=</span>&nbsp;<span class="builtinfunc" id="7303551">new</span><span class="op" id="7303554">(</span><span class="ident" id="7303555">bytes</span><span class="op" id="7303560">.</span><span class="ident" id="7303561">Buffer</span><span class="op" id="7303567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303570">enc</span>&nbsp;<span class="op" id="7303574">:=</span>&nbsp;<span class="ident" id="7303577">NewEncoder</span><span class="op" id="7303587">(</span><span class="ident" id="7303588">b</span><span class="op" id="7303589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303592">err</span>&nbsp;<span class="op" id="7303596">:=</span>&nbsp;<span class="ident" id="7303599">enc</span><span class="op" id="7303602">.</span><span class="ident" id="7303603">Encode</span><span class="op" id="7303609">(</span><span class="ident" id="7303610">x</span><span class="op" id="7303611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303614">if</span>&nbsp;<span class="ident" id="7303617">err</span>&nbsp;<span class="op" id="7303621">!=</span>&nbsp;<span class="builtintype" id="7303624">nil</span>&nbsp;<span class="op" id="7303628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303632">t</span><span class="op" id="7303633">.</span><span class="ident" id="7303634">Fatal</span><span class="op" id="7303639">(</span><span class="string" id="7303640">&#34;encode:&#34;</span><span class="op" id="7303649">,</span>&nbsp;<span class="ident" id="7303651">err</span><span class="op" id="7303654">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303660">var</span>&nbsp;<span class="ident" id="7303664">y</span>&nbsp;<span class="ident" id="7303666">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303677">dec</span>&nbsp;<span class="op" id="7303681">:=</span>&nbsp;<span class="ident" id="7303684">NewDecoder</span><span class="op" id="7303694">(</span><span class="ident" id="7303695">b</span><span class="op" id="7303696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303699">err</span>&nbsp;<span class="op" id="7303703">=</span>&nbsp;<span class="ident" id="7303705">dec</span><span class="op" id="7303708">.</span><span class="ident" id="7303709">Decode</span><span class="op" id="7303715">(</span><span class="op" id="7303716">&amp;</span><span class="ident" id="7303717">y</span><span class="op" id="7303718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303721">if</span>&nbsp;<span class="ident" id="7303724">err</span>&nbsp;<span class="op" id="7303728">!=</span>&nbsp;<span class="builtintype" id="7303731">nil</span>&nbsp;<span class="op" id="7303735">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303739">t</span><span class="op" id="7303740">.</span><span class="ident" id="7303741">Fatal</span><span class="op" id="7303746">(</span><span class="string" id="7303747">&#34;decode:&#34;</span><span class="op" id="7303756">,</span>&nbsp;<span class="ident" id="7303758">err</span><span class="op" id="7303761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303767">if</span>&nbsp;<span class="ident" id="7303770">x</span>&nbsp;<span class="op" id="7303772">!=</span>&nbsp;<span class="ident" id="7303775">y</span>&nbsp;<span class="op" id="7303777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303781">t</span><span class="op" id="7303782">.</span><span class="ident" id="7303783">Fatalf</span><span class="op" id="7303789">(</span><span class="string" id="7303790">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7303800">,</span>&nbsp;<span class="ident" id="7303802">x</span><span class="op" id="7303803">,</span>&nbsp;<span class="ident" id="7303805">y</span><span class="op" id="7303806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303809">}</span><br>
<span class="lineno">765</span><span class="op" id="7303811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7303814">func</span>&nbsp;<span class="ident" id="7303819">TestGobEncodePtrError</span><span class="op" id="7303840">(</span><span class="ident" id="7303841">t</span>&nbsp;<span class="op" id="7303843">*</span><span class="ident" id="7303844">testing</span><span class="op" id="7303851">.</span><span class="ident" id="7303852">T</span><span class="op" id="7303853">)</span>&nbsp;<span class="op" id="7303855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303858">var</span>&nbsp;<span class="ident" id="7303862">err</span>&nbsp;<span class="builtintype" id="7303866">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303873">b</span>&nbsp;<span class="op" id="7303875">:=</span>&nbsp;<span class="builtinfunc" id="7303878">new</span><span class="op" id="7303881">(</span><span class="ident" id="7303882">bytes</span><span class="op" id="7303887">.</span><span class="ident" id="7303888">Buffer</span><span class="op" id="7303894">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303897">enc</span>&nbsp;<span class="op" id="7303901">:=</span>&nbsp;<span class="ident" id="7303904">NewEncoder</span><span class="op" id="7303914">(</span><span class="ident" id="7303915">b</span><span class="op" id="7303916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303919">err</span>&nbsp;<span class="op" id="7303923">=</span>&nbsp;<span class="ident" id="7303925">enc</span><span class="op" id="7303928">.</span><span class="ident" id="7303929">Encode</span><span class="op" id="7303935">(</span><span class="op" id="7303936">&amp;</span><span class="ident" id="7303937">err</span><span class="op" id="7303940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303943">if</span>&nbsp;<span class="ident" id="7303946">err</span>&nbsp;<span class="op" id="7303950">!=</span>&nbsp;<span class="builtintype" id="7303953">nil</span>&nbsp;<span class="op" id="7303957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303961">t</span><span class="op" id="7303962">.</span><span class="ident" id="7303963">Fatal</span><span class="op" id="7303968">(</span><span class="string" id="7303969">&#34;encode:&#34;</span><span class="op" id="7303978">,</span>&nbsp;<span class="ident" id="7303980">err</span><span class="op" id="7303983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303986">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303989">dec</span>&nbsp;<span class="op" id="7303993">:=</span>&nbsp;<span class="ident" id="7303996">NewDecoder</span><span class="op" id="7304006">(</span><span class="ident" id="7304007">b</span><span class="op" id="7304008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304011">err2</span>&nbsp;<span class="op" id="7304016">:=</span>&nbsp;<span class="ident" id="7304019">fmt</span><span class="op" id="7304022">.</span><span class="ident" id="7304023">Errorf</span><span class="op" id="7304029">(</span><span class="string" id="7304030">&#34;foo&#34;</span><span class="op" id="7304035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304038">err</span>&nbsp;<span class="op" id="7304042">=</span>&nbsp;<span class="ident" id="7304044">dec</span><span class="op" id="7304047">.</span><span class="ident" id="7304048">Decode</span><span class="op" id="7304054">(</span><span class="op" id="7304055">&amp;</span><span class="ident" id="7304056">err2</span><span class="op" id="7304060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304063">if</span>&nbsp;<span class="ident" id="7304066">err</span>&nbsp;<span class="op" id="7304070">!=</span>&nbsp;<span class="builtintype" id="7304073">nil</span>&nbsp;<span class="op" id="7304077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304081">t</span><span class="op" id="7304082">.</span><span class="ident" id="7304083">Fatal</span><span class="op" id="7304088">(</span><span class="string" id="7304089">&#34;decode:&#34;</span><span class="op" id="7304098">,</span>&nbsp;<span class="ident" id="7304100">err</span><span class="op" id="7304103">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304109">if</span>&nbsp;<span class="ident" id="7304112">err2</span>&nbsp;<span class="op" id="7304117">!=</span>&nbsp;<span class="builtintype" id="7304120">nil</span>&nbsp;<span class="op" id="7304124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304128">t</span><span class="op" id="7304129">.</span><span class="ident" id="7304130">Fatalf</span><span class="op" id="7304136">(</span><span class="string" id="7304137">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7304159">,</span>&nbsp;<span class="ident" id="7304161">err2</span><span class="op" id="7304165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304168">}</span><br>
<span class="lineno"></span><span class="op" id="7304170">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="7304173">func</span>&nbsp;<span class="ident" id="7304178">TestNetIP</span><span class="op" id="7304187">(</span><span class="ident" id="7304188">t</span>&nbsp;<span class="op" id="7304190">*</span><span class="ident" id="7304191">testing</span><span class="op" id="7304198">.</span><span class="ident" id="7304199">T</span><span class="op" id="7304200">)</span>&nbsp;<span class="op" id="7304202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7304205">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304248">enc</span>&nbsp;<span class="op" id="7304252">:=</span>&nbsp;<span class="op" id="7304255">[</span><span class="op" id="7304256">]</span><span class="builtintype" id="7304257">byte</span><span class="op" id="7304261">{</span><span class="num" id="7304262">0x07</span><span class="op" id="7304266">,</span>&nbsp;<span class="num" id="7304268">0x0a</span><span class="op" id="7304272">,</span>&nbsp;<span class="num" id="7304274">0x00</span><span class="op" id="7304278">,</span>&nbsp;<span class="num" id="7304280">0x04</span><span class="op" id="7304284">,</span>&nbsp;<span class="num" id="7304286">0x01</span><span class="op" id="7304290">,</span>&nbsp;<span class="num" id="7304292">0x02</span><span class="op" id="7304296">,</span>&nbsp;<span class="num" id="7304298">0x03</span><span class="op" id="7304302">,</span>&nbsp;<span class="num" id="7304304">0x04</span><span class="op" id="7304308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304312">var</span>&nbsp;<span class="ident" id="7304316">ip</span>&nbsp;<span class="ident" id="7304319">net</span><span class="op" id="7304322">.</span><span class="ident" id="7304323">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304327">err</span>&nbsp;<span class="op" id="7304331">:=</span>&nbsp;<span class="ident" id="7304334">NewDecoder</span><span class="op" id="7304344">(</span><span class="ident" id="7304345">bytes</span><span class="op" id="7304350">.</span><span class="ident" id="7304351">NewReader</span><span class="op" id="7304360">(</span><span class="ident" id="7304361">enc</span><span class="op" id="7304364">)</span><span class="op" id="7304365">)</span><span class="op" id="7304366">.</span><span class="ident" id="7304367">Decode</span><span class="op" id="7304373">(</span><span class="op" id="7304374">&amp;</span><span class="ident" id="7304375">ip</span><span class="op" id="7304377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304380">if</span>&nbsp;<span class="ident" id="7304383">err</span>&nbsp;<span class="op" id="7304387">!=</span>&nbsp;<span class="builtintype" id="7304390">nil</span>&nbsp;<span class="op" id="7304394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304398">t</span><span class="op" id="7304399">.</span><span class="ident" id="7304400">Fatalf</span><span class="op" id="7304406">(</span><span class="string" id="7304407">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7304419">,</span>&nbsp;<span class="ident" id="7304421">err</span><span class="op" id="7304424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304427">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304430">if</span>&nbsp;<span class="ident" id="7304433">ip</span><span class="op" id="7304435">.</span><span class="ident" id="7304436">String</span><span class="op" id="7304442">(</span><span class="op" id="7304443">)</span>&nbsp;<span class="op" id="7304445">!=</span>&nbsp;<span class="string" id="7304448">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="7304458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304462">t</span><span class="op" id="7304463">.</span><span class="ident" id="7304464">Errorf</span><span class="op" id="7304470">(</span><span class="string" id="7304471">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="7304500">,</span>&nbsp;<span class="ident" id="7304502">ip</span><span class="op" id="7304504">.</span><span class="ident" id="7304505">String</span><span class="op" id="7304511">(</span><span class="op" id="7304512">)</span><span class="op" id="7304513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304516">}</span><br>
<span class="lineno"></span><span class="op" id="7304518">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
