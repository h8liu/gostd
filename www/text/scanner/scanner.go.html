<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6339066">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6339121">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6339175">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6339226">//&nbsp;Package&nbsp;scanner&nbsp;provides&nbsp;a&nbsp;scanner&nbsp;and&nbsp;tokenizer&nbsp;for&nbsp;UTF-8-encoded&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="6339302">//&nbsp;It&nbsp;takes&nbsp;an&nbsp;io.Reader&nbsp;providing&nbsp;the&nbsp;source,&nbsp;which&nbsp;then&nbsp;can&nbsp;be&nbsp;tokenized</span><br>
<span class="lineno"></span><span class="comment" id="6339377">//&nbsp;through&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;the&nbsp;Scan&nbsp;function.&nbsp;&nbsp;For&nbsp;compatibility&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6339449">//&nbsp;existing&nbsp;tools,&nbsp;the&nbsp;NUL&nbsp;character&nbsp;is&nbsp;not&nbsp;allowed.&nbsp;If&nbsp;the&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="6339525">//&nbsp;in&nbsp;the&nbsp;source&nbsp;is&nbsp;a&nbsp;UTF-8&nbsp;encoded&nbsp;byte&nbsp;order&nbsp;mark&nbsp;(BOM),&nbsp;it&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno">10</span><span class="comment" id="6339601">//</span><br>
<span class="lineno"></span><span class="comment" id="6339604">//&nbsp;By&nbsp;default,&nbsp;a&nbsp;Scanner&nbsp;skips&nbsp;white&nbsp;space&nbsp;and&nbsp;Go&nbsp;comments&nbsp;and&nbsp;recognizes&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="6339682">//&nbsp;literals&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;Go&nbsp;language&nbsp;specification.&nbsp;&nbsp;It&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6339750">//&nbsp;customized&nbsp;to&nbsp;recognize&nbsp;only&nbsp;a&nbsp;subset&nbsp;of&nbsp;those&nbsp;literals&nbsp;and&nbsp;to&nbsp;recognize</span><br>
<span class="lineno"></span><span class="comment" id="6339826">//&nbsp;different&nbsp;identifier&nbsp;and&nbsp;white&nbsp;space&nbsp;characters.</span><br>
<span class="lineno">15</span><span class="comment" id="6339878">//</span><br>
<span class="lineno"></span><span class="comment" id="6339881">//&nbsp;Basic&nbsp;usage&nbsp;pattern:</span><br>
<span class="lineno"></span><span class="comment" id="6339905">//</span><br>
<span class="lineno"></span><span class="comment" id="6339908">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;s&nbsp;scanner.Scanner</span><br>
<span class="lineno"></span><span class="comment" id="6339933">//&nbsp;&nbsp;&nbsp;&nbsps.Init(src)</span><br>
<span class="lineno">20</span><span class="comment" id="6339948">//&nbsp;&nbsp;&nbsp;&nbsptok&nbsp;:=&nbsp;s.Scan()</span><br>
<span class="lineno"></span><span class="comment" id="6339967">//&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;tok&nbsp;!=&nbsp;scanner.EOF&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6339995">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;do&nbsp;something&nbsp;with&nbsp;tok</span><br>
<span class="lineno"></span><span class="comment" id="6340024">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsptok&nbsp;=&nbsp;s.Scan()</span><br>
<span class="lineno"></span><span class="comment" id="6340043">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">25</span><span class="comment" id="6340048">//</span><br>
<span class="lineno"></span><span class="keyword" id="6340051">package</span>&nbsp;<span class="ident" id="6340059">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6340068">import</span>&nbsp;<span class="op" id="6340075">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6340078">&#34;bytes&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6340087">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6340094">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6340100">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6340106">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6340117">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">35</span><span class="op" id="6340132">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6340135">//&nbsp;A&nbsp;source&nbsp;position&nbsp;is&nbsp;represented&nbsp;by&nbsp;a&nbsp;Position&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6340192">//&nbsp;A&nbsp;position&nbsp;is&nbsp;valid&nbsp;if&nbsp;Line&nbsp;&gt;&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="6340228">type</span>&nbsp;<span class="ident" id="6340233">Position</span>&nbsp;<span class="keyword" id="6340242">struct</span>&nbsp;<span class="op" id="6340249">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340252">Filename</span>&nbsp;<span class="builtintype" id="6340261">string</span>&nbsp;<span class="comment" id="6340268">//&nbsp;filename,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340289">Offset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6340298">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6340305">//&nbsp;byte&nbsp;offset,&nbsp;starting&nbsp;at&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340336">Line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6340345">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6340352">//&nbsp;line&nbsp;number,&nbsp;starting&nbsp;at&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340383">Column</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6340392">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6340399">//&nbsp;column&nbsp;number,&nbsp;starting&nbsp;at&nbsp;1&nbsp;(character&nbsp;count&nbsp;per&nbsp;line)</span><br>
<span class="lineno"></span><span class="op" id="6340458">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="6340461">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;position&nbsp;is&nbsp;valid.</span><br>
<span class="lineno"></span><span class="keyword" id="6340511">func</span>&nbsp;<span class="op" id="6340516">(</span><span class="ident" id="6340517">pos</span>&nbsp;<span class="op" id="6340521">*</span><span class="ident" id="6340522"><a href="/text/scanner/scanner.go.html#6340233">Position</a></span><span class="op" id="6340530">)</span>&nbsp;<span class="ident" id="6340532">IsValid</span><span class="op" id="6340539">(</span><span class="op" id="6340540">)</span>&nbsp;<span class="builtintype" id="6340542">bool</span>&nbsp;<span class="op" id="6340547">{</span>&nbsp;<span class="keyword" id="6340549">return</span>&nbsp;<span class="ident" id="6340556"><a href="/text/scanner/scanner.go.html#6340517">pos</a></span><span class="op" id="6340559">.</span><span class="ident" id="6340560">Line</span>&nbsp;<span class="op" id="6340565">&gt;</span>&nbsp;<span class="num" id="6340567">0</span>&nbsp;<span class="op" id="6340569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6340572">func</span>&nbsp;<span class="op" id="6340577">(</span><span class="ident" id="6340578">pos</span>&nbsp;<span class="ident" id="6340582"><a href="/text/scanner/scanner.go.html#6340233">Position</a></span><span class="op" id="6340590">)</span>&nbsp;<span class="ident" id="6340592">String</span><span class="op" id="6340598">(</span><span class="op" id="6340599">)</span>&nbsp;<span class="builtintype" id="6340601">string</span>&nbsp;<span class="op" id="6340608">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340611">s</span>&nbsp;<span class="op" id="6340613">:=</span>&nbsp;<span class="ident" id="6340616"><a href="/text/scanner/scanner.go.html#6340578">pos</a></span><span class="op" id="6340619">.</span><span class="ident" id="6340620">Filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340630">if</span>&nbsp;<span class="ident" id="6340633"><a href="/text/scanner/scanner.go.html#6340578">pos</a></span><span class="op" id="6340636">.</span><span class="ident" id="6340637">IsValid</span><span class="op" id="6340644">(</span><span class="op" id="6340645">)</span>&nbsp;<span class="op" id="6340647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340651">if</span>&nbsp;<span class="ident" id="6340654"><a href="/text/scanner/scanner.go.html#6340611">s</a></span>&nbsp;<span class="op" id="6340656">!=</span>&nbsp;<span class="string" id="6340659">&#34;&#34;</span>&nbsp;<span class="op" id="6340662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340667"><a href="/text/scanner/scanner.go.html#6340611">s</a></span>&nbsp;<span class="op" id="6340669">+=</span>&nbsp;<span class="string" id="6340672">&#34;:&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6340678">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340682"><a href="/text/scanner/scanner.go.html#6340611">s</a></span>&nbsp;<span class="op" id="6340684">+=</span>&nbsp;<span class="ident" id="6340687"><a href="/text/scanner/scanner.go.html#6340087">fmt</a></span><span class="op" id="6340690">.</span><span class="ident" id="6340691">Sprintf</span><span class="op" id="6340698">(</span><span class="string" id="6340699">&#34;%d:%d&#34;</span><span class="op" id="6340706">,</span>&nbsp;<span class="ident" id="6340708"><a href="/text/scanner/scanner.go.html#6340578">pos</a></span><span class="op" id="6340711">.</span><span class="ident" id="6340712">Line</span><span class="op" id="6340716">,</span>&nbsp;<span class="ident" id="6340718"><a href="/text/scanner/scanner.go.html#6340578">pos</a></span><span class="op" id="6340721">.</span><span class="ident" id="6340722">Column</span><span class="op" id="6340728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6340731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340734">if</span>&nbsp;<span class="ident" id="6340737"><a href="/text/scanner/scanner.go.html#6340611">s</a></span>&nbsp;<span class="op" id="6340739">==</span>&nbsp;<span class="string" id="6340742">&#34;&#34;</span>&nbsp;<span class="op" id="6340745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340749"><a href="/text/scanner/scanner.go.html#6340611">s</a></span>&nbsp;<span class="op" id="6340751">=</span>&nbsp;<span class="string" id="6340753">&#34;???&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6340760">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6340763">return</span>&nbsp;<span class="ident" id="6340770"><a href="/text/scanner/scanner.go.html#6340611">s</a></span><br>
<span class="lineno"></span><span class="op" id="6340772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6340775">//&nbsp;Predefined&nbsp;mode&nbsp;bits&nbsp;to&nbsp;control&nbsp;recognition&nbsp;of&nbsp;tokens.&nbsp;For&nbsp;instance,</span><br>
<span class="lineno"></span><span class="comment" id="6340847">//&nbsp;to&nbsp;configure&nbsp;a&nbsp;Scanner&nbsp;such&nbsp;that&nbsp;it&nbsp;only&nbsp;recognizes&nbsp;(Go)&nbsp;identifiers,</span><br>
<span class="lineno">65</span><span class="comment" id="6340920">//&nbsp;integers,&nbsp;and&nbsp;skips&nbsp;comments,&nbsp;set&nbsp;the&nbsp;Scanner&#39;s&nbsp;Mode&nbsp;field&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="6340986">//</span><br>
<span class="lineno"></span><span class="comment" id="6340989">//&nbsp;&nbsp;&nbsp;&nbspScanIdents&nbsp;|&nbsp;ScanInts&nbsp;|&nbsp;SkipComments</span><br>
<span class="lineno"></span><span class="comment" id="6341029">//</span><br>
<span class="lineno"></span><span class="comment" id="6341032">//&nbsp;With&nbsp;the&nbsp;exceptions&nbsp;of&nbsp;comments,&nbsp;which&nbsp;are&nbsp;skipped&nbsp;if&nbsp;SkipComments&nbsp;is</span><br>
<span class="lineno">70</span><span class="comment" id="6341105">//&nbsp;set,&nbsp;unrecognized&nbsp;tokens&nbsp;are&nbsp;not&nbsp;ignored.&nbsp;Instead,&nbsp;the&nbsp;scanner&nbsp;simply</span><br>
<span class="lineno"></span><span class="comment" id="6341178">//&nbsp;returns&nbsp;the&nbsp;respective&nbsp;individual&nbsp;characters&nbsp;(or&nbsp;possibly&nbsp;sub-tokens).</span><br>
<span class="lineno"></span><span class="comment" id="6341252">//&nbsp;For&nbsp;instance,&nbsp;if&nbsp;the&nbsp;mode&nbsp;is&nbsp;ScanIdents&nbsp;(not&nbsp;ScanStrings),&nbsp;the&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="6341325">//&nbsp;&#34;foo&#34;&nbsp;is&nbsp;scanned&nbsp;as&nbsp;the&nbsp;token&nbsp;sequence&nbsp;&#39;&#34;&#39;&nbsp;Ident&nbsp;&#39;&#34;&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6341382">//</span><br>
<span class="lineno">75</span><span class="keyword" id="6341385">const</span>&nbsp;<span class="op" id="6341391">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341394">ScanIdents</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6341409">=</span>&nbsp;<span class="num" id="6341411">1</span>&nbsp;<span class="op" id="6341413">&lt;&lt;</span>&nbsp;<span class="op" id="6341416">-</span><span class="ident" id="6341417"><a href="/text/scanner/scanner.go.html#6341940">Ident</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341424">ScanInts</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6341439">=</span>&nbsp;<span class="num" id="6341441">1</span>&nbsp;<span class="op" id="6341443">&lt;&lt;</span>&nbsp;<span class="op" id="6341446">-</span><span class="ident" id="6341447"><a href="/text/scanner/scanner.go.html#6341947">Int</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341452">ScanFloats</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6341467">=</span>&nbsp;<span class="num" id="6341469">1</span>&nbsp;<span class="op" id="6341471">&lt;&lt;</span>&nbsp;<span class="op" id="6341474">-</span><span class="ident" id="6341475"><a href="/text/scanner/scanner.go.html#6341952">Float</a></span>&nbsp;<span class="comment" id="6341481">//&nbsp;includes&nbsp;Ints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341499">ScanChars</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6341514">=</span>&nbsp;<span class="num" id="6341516">1</span>&nbsp;<span class="op" id="6341518">&lt;&lt;</span>&nbsp;<span class="op" id="6341521">-</span><span class="ident" id="6341522"><a href="/text/scanner/scanner.go.html#6341959">Char</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341528">ScanStrings</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6341543">=</span>&nbsp;<span class="num" id="6341545">1</span>&nbsp;<span class="op" id="6341547">&lt;&lt;</span>&nbsp;<span class="op" id="6341550">-</span><span class="ident" id="6341551"><a href="/text/scanner/scanner.go.html#6341965">String</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341559">ScanRawStrings</span>&nbsp;<span class="op" id="6341574">=</span>&nbsp;<span class="num" id="6341576">1</span>&nbsp;<span class="op" id="6341578">&lt;&lt;</span>&nbsp;<span class="op" id="6341581">-</span><span class="ident" id="6341582"><a href="/text/scanner/scanner.go.html#6341973">RawString</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341593">ScanComments</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6341608">=</span>&nbsp;<span class="num" id="6341610">1</span>&nbsp;<span class="op" id="6341612">&lt;&lt;</span>&nbsp;<span class="op" id="6341615">-</span><span class="ident" id="6341616"><a href="/text/scanner/scanner.go.html#6341984">Comment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341625">SkipComments</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6341640">=</span>&nbsp;<span class="num" id="6341642">1</span>&nbsp;<span class="op" id="6341644">&lt;&lt;</span>&nbsp;<span class="op" id="6341647">-</span><span class="ident" id="6341648"><a href="/text/scanner/scanner.go.html#6341993">skipComment</a></span>&nbsp;<span class="comment" id="6341660">//&nbsp;if&nbsp;set&nbsp;with&nbsp;ScanComments,&nbsp;comments&nbsp;become&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341718">GoTokens</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6341733">=</span>&nbsp;<span class="ident" id="6341735"><a href="/text/scanner/scanner.go.html#6341394">ScanIdents</a></span>&nbsp;<span class="op" id="6341746">|</span>&nbsp;<span class="ident" id="6341748"><a href="/text/scanner/scanner.go.html#6341452">ScanFloats</a></span>&nbsp;<span class="op" id="6341759">|</span>&nbsp;<span class="ident" id="6341761"><a href="/text/scanner/scanner.go.html#6341499">ScanChars</a></span>&nbsp;<span class="op" id="6341771">|</span>&nbsp;<span class="ident" id="6341773"><a href="/text/scanner/scanner.go.html#6341528">ScanStrings</a></span>&nbsp;<span class="op" id="6341785">|</span>&nbsp;<span class="ident" id="6341787"><a href="/text/scanner/scanner.go.html#6341559">ScanRawStrings</a></span>&nbsp;<span class="op" id="6341802">|</span>&nbsp;<span class="ident" id="6341804"><a href="/text/scanner/scanner.go.html#6341593">ScanComments</a></span>&nbsp;<span class="op" id="6341817">|</span>&nbsp;<span class="ident" id="6341819"><a href="/text/scanner/scanner.go.html#6341625">SkipComments</a></span><br>
<span class="lineno">85</span><span class="op" id="6341832">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6341835">//&nbsp;The&nbsp;result&nbsp;of&nbsp;Scan&nbsp;is&nbsp;one&nbsp;of&nbsp;the&nbsp;following&nbsp;tokens&nbsp;or&nbsp;a&nbsp;Unicode&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="6341912">const</span>&nbsp;<span class="op" id="6341918">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341921">EOF</span>&nbsp;<span class="op" id="6341925">=</span>&nbsp;<span class="op" id="6341927">-</span><span class="op" id="6341928">(</span><span class="ident" id="6341929">iota</span>&nbsp;<span class="op" id="6341934">+</span>&nbsp;<span class="num" id="6341936">1</span><span class="op" id="6341937">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341940">Ident</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341947">Int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341952">Float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341959">Char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341965">String</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341973">RawString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341984">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341993">skipComment</span><br>
<span class="lineno"></span><span class="op" id="6342005">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="6342008">var</span>&nbsp;<span class="ident" id="6342012">tokenString</span>&nbsp;<span class="op" id="6342024">=</span>&nbsp;<span class="keyword" id="6342026">map</span><span class="op" id="6342029">[</span><span class="builtintype" id="6342030">rune</span><span class="op" id="6342034">]</span><span class="builtintype" id="6342035">string</span><span class="op" id="6342041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342044"><a href="/text/scanner/scanner.go.html#6341921">EOF</a></span><span class="op" id="6342047">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6342055">&#34;EOF&#34;</span><span class="op" id="6342060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342063"><a href="/text/scanner/scanner.go.html#6341940">Ident</a></span><span class="op" id="6342068">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6342074">&#34;Ident&#34;</span><span class="op" id="6342081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342084"><a href="/text/scanner/scanner.go.html#6341947">Int</a></span><span class="op" id="6342087">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6342095">&#34;Int&#34;</span><span class="op" id="6342100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342103"><a href="/text/scanner/scanner.go.html#6341952">Float</a></span><span class="op" id="6342108">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6342114">&#34;Float&#34;</span><span class="op" id="6342121">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342124"><a href="/text/scanner/scanner.go.html#6341959">Char</a></span><span class="op" id="6342128">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6342135">&#34;Char&#34;</span><span class="op" id="6342141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342144"><a href="/text/scanner/scanner.go.html#6341965">String</a></span><span class="op" id="6342150">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6342155">&#34;String&#34;</span><span class="op" id="6342163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342166"><a href="/text/scanner/scanner.go.html#6341973">RawString</a></span><span class="op" id="6342175">:</span>&nbsp;<span class="string" id="6342177">&#34;RawString&#34;</span><span class="op" id="6342188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342191"><a href="/text/scanner/scanner.go.html#6341984">Comment</a></span><span class="op" id="6342198">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6342202">&#34;Comment&#34;</span><span class="op" id="6342211">,</span><br>
<span class="lineno"></span><span class="op" id="6342213">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="6342216">//&nbsp;TokenString&nbsp;returns&nbsp;a&nbsp;printable&nbsp;string&nbsp;for&nbsp;a&nbsp;token&nbsp;or&nbsp;Unicode&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="6342292">func</span>&nbsp;<span class="ident" id="6342297">TokenString</span><span class="op" id="6342308">(</span><span class="ident" id="6342309">tok</span>&nbsp;<span class="builtintype" id="6342313">rune</span><span class="op" id="6342317">)</span>&nbsp;<span class="builtintype" id="6342319">string</span>&nbsp;<span class="op" id="6342326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342329">if</span>&nbsp;<span class="ident" id="6342332">s</span><span class="op" id="6342333">,</span>&nbsp;<span class="ident" id="6342335">found</span>&nbsp;<span class="op" id="6342341">:=</span>&nbsp;<span class="ident" id="6342344"><a href="/text/scanner/scanner.go.html#6342012">tokenString</a></span><span class="op" id="6342355">[</span><span class="ident" id="6342356"><a href="/text/scanner/scanner.go.html#6342309">tok</a></span><span class="op" id="6342359">]</span><span class="op" id="6342360">;</span>&nbsp;<span class="ident" id="6342362"><a href="/text/scanner/scanner.go.html#6342335">found</a></span>&nbsp;<span class="op" id="6342368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342372">return</span>&nbsp;<span class="ident" id="6342379"><a href="/text/scanner/scanner.go.html#6342332">s</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6342382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6342385">return</span>&nbsp;<span class="ident" id="6342392"><a href="/text/scanner/scanner.go.html#6340087">fmt</a></span><span class="op" id="6342395">.</span><span class="ident" id="6342396">Sprintf</span><span class="op" id="6342403">(</span><span class="string" id="6342404">&#34;%q&#34;</span><span class="op" id="6342408">,</span>&nbsp;<span class="builtintype" id="6342410">string</span><span class="op" id="6342416">(</span><span class="ident" id="6342417"><a href="/text/scanner/scanner.go.html#6342309">tok</a></span><span class="op" id="6342420">)</span><span class="op" id="6342421">)</span><br>
<span class="lineno"></span><span class="op" id="6342423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6342426">//&nbsp;GoWhitespace&nbsp;is&nbsp;the&nbsp;default&nbsp;value&nbsp;for&nbsp;the&nbsp;Scanner&#39;s&nbsp;Whitespace&nbsp;field.</span><br>
<span class="lineno">120</span><span class="comment" id="6342499">//&nbsp;Its&nbsp;value&nbsp;selects&nbsp;Go&#39;s&nbsp;white&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span><span class="keyword" id="6342549">const</span>&nbsp;<span class="ident" id="6342555">GoWhitespace</span>&nbsp;<span class="op" id="6342568">=</span>&nbsp;<span class="num" id="6342570">1</span><span class="op" id="6342571">&lt;&lt;</span><span class="string" id="6342573">&#39;\t&#39;</span>&nbsp;<span class="op" id="6342578">|</span>&nbsp;<span class="num" id="6342580">1</span><span class="op" id="6342581">&lt;&lt;</span><span class="string" id="6342583">&#39;\n&#39;</span>&nbsp;<span class="op" id="6342588">|</span>&nbsp;<span class="num" id="6342590">1</span><span class="op" id="6342591">&lt;&lt;</span><span class="string" id="6342593">&#39;\r&#39;</span>&nbsp;<span class="op" id="6342598">|</span>&nbsp;<span class="num" id="6342600">1</span><span class="op" id="6342601">&lt;&lt;</span><span class="string" id="6342603">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6342608">const</span>&nbsp;<span class="ident" id="6342614">bufLen</span>&nbsp;<span class="op" id="6342621">=</span>&nbsp;<span class="num" id="6342623">1024</span>&nbsp;<span class="comment" id="6342628">//&nbsp;at&nbsp;least&nbsp;utf8.UTFMax</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="6342653">//&nbsp;A&nbsp;Scanner&nbsp;implements&nbsp;reading&nbsp;of&nbsp;Unicode&nbsp;characters&nbsp;and&nbsp;tokens&nbsp;from&nbsp;an&nbsp;io.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="6342737">type</span>&nbsp;<span class="ident" id="6342742">Scanner</span>&nbsp;<span class="keyword" id="6342750">struct</span>&nbsp;<span class="op" id="6342757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6342760">//&nbsp;Input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342770">src</span>&nbsp;<span class="ident" id="6342774"><a href="/text/scanner/scanner.go.html#6340094">io</a></span><span class="op" id="6342776">.</span><span class="ident" id="6342777">Reader</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6342786">//&nbsp;Source&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342804">srcBuf</span>&nbsp;<span class="op" id="6342811">[</span><span class="ident" id="6342812"><a href="/text/scanner/scanner.go.html#6342614">bufLen</a></span>&nbsp;<span class="op" id="6342819">+</span>&nbsp;<span class="num" id="6342821">1</span><span class="op" id="6342822">]</span><span class="builtintype" id="6342823">byte</span>&nbsp;<span class="comment" id="6342828">//&nbsp;+1&nbsp;for&nbsp;sentinel&nbsp;for&nbsp;common&nbsp;case&nbsp;of&nbsp;s.next()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342876">srcPos</span>&nbsp;<span class="builtintype" id="6342883">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6342900">//&nbsp;reading&nbsp;position&nbsp;(srcBuf&nbsp;index)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342936">srcEnd</span>&nbsp;<span class="builtintype" id="6342943">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6342960">//&nbsp;source&nbsp;end&nbsp;(srcBuf&nbsp;index)</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6342991">//&nbsp;Source&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343011">srcBufOffset</span>&nbsp;<span class="builtintype" id="6343024">int</span>&nbsp;<span class="comment" id="6343028">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;srcBuf[0]&nbsp;in&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343067">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6343080">int</span>&nbsp;<span class="comment" id="6343084">//&nbsp;line&nbsp;count</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343099">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6343112">int</span>&nbsp;<span class="comment" id="6343116">//&nbsp;character&nbsp;count</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343136">lastLineLen</span>&nbsp;&nbsp;<span class="builtintype" id="6343149">int</span>&nbsp;<span class="comment" id="6343153">//&nbsp;length&nbsp;of&nbsp;last&nbsp;line&nbsp;in&nbsp;characters&nbsp;(for&nbsp;correct&nbsp;column&nbsp;reporting)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343222">lastCharLen</span>&nbsp;&nbsp;<span class="builtintype" id="6343235">int</span>&nbsp;<span class="comment" id="6343239">//&nbsp;length&nbsp;of&nbsp;last&nbsp;character&nbsp;in&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6343278">//&nbsp;Token&nbsp;text&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6343300">//&nbsp;Typically,&nbsp;token&nbsp;text&nbsp;is&nbsp;stored&nbsp;completely&nbsp;in&nbsp;srcBuf,&nbsp;but&nbsp;in&nbsp;general</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6343373">//&nbsp;the&nbsp;token&nbsp;text&#39;s&nbsp;head&nbsp;may&nbsp;be&nbsp;buffered&nbsp;in&nbsp;tokBuf&nbsp;while&nbsp;the&nbsp;token&nbsp;text&#39;s</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6343448">//&nbsp;tail&nbsp;is&nbsp;stored&nbsp;in&nbsp;srcBuf.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343478">tokBuf</span>&nbsp;<span class="ident" id="6343485"><a href="/text/scanner/scanner.go.html#6340078">bytes</a></span><span class="op" id="6343490">.</span><span class="ident" id="6343491">Buffer</span>&nbsp;<span class="comment" id="6343498">//&nbsp;token&nbsp;text&nbsp;head&nbsp;that&nbsp;is&nbsp;not&nbsp;in&nbsp;srcBuf&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343548">tokPos</span>&nbsp;<span class="builtintype" id="6343555">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6343568">//&nbsp;token&nbsp;text&nbsp;tail&nbsp;position&nbsp;(srcBuf&nbsp;index);&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343627">tokEnd</span>&nbsp;<span class="builtintype" id="6343634">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6343647">//&nbsp;token&nbsp;text&nbsp;tail&nbsp;end&nbsp;(srcBuf&nbsp;index)</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6343687">//&nbsp;One&nbsp;character&nbsp;look-ahead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343716">ch</span>&nbsp;<span class="builtintype" id="6343719">rune</span>&nbsp;<span class="comment" id="6343724">//&nbsp;character&nbsp;before&nbsp;current&nbsp;srcPos</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6343761">//&nbsp;Error&nbsp;is&nbsp;called&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered.&nbsp;If&nbsp;no&nbsp;Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6343821">//&nbsp;function&nbsp;is&nbsp;set,&nbsp;the&nbsp;error&nbsp;is&nbsp;reported&nbsp;to&nbsp;os.Stderr.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343878">Error</span>&nbsp;<span class="keyword" id="6343884">func</span><span class="op" id="6343888">(</span><span class="ident" id="6343889">s</span>&nbsp;<span class="op" id="6343891">*</span><span class="ident" id="6343892"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6343899">,</span>&nbsp;<span class="ident" id="6343901">msg</span>&nbsp;<span class="builtintype" id="6343905">string</span><span class="op" id="6343911">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6343915">//&nbsp;ErrorCount&nbsp;is&nbsp;incremented&nbsp;by&nbsp;one&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6343980">ErrorCount</span>&nbsp;<span class="builtintype" id="6343991">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6343997">//&nbsp;The&nbsp;Mode&nbsp;field&nbsp;controls&nbsp;which&nbsp;tokens&nbsp;are&nbsp;recognized.&nbsp;For&nbsp;instance,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344068">//&nbsp;to&nbsp;recognize&nbsp;Ints,&nbsp;set&nbsp;the&nbsp;ScanInts&nbsp;bit&nbsp;in&nbsp;Mode.&nbsp;The&nbsp;field&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344138">//&nbsp;changed&nbsp;at&nbsp;any&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6344163">Mode</span>&nbsp;<span class="builtintype" id="6344168">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344175">//&nbsp;The&nbsp;Whitespace&nbsp;field&nbsp;controls&nbsp;which&nbsp;characters&nbsp;are&nbsp;recognized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344241">//&nbsp;as&nbsp;white&nbsp;space.&nbsp;To&nbsp;recognize&nbsp;a&nbsp;character&nbsp;ch&nbsp;&lt;=&nbsp;&#39;&nbsp;&#39;&nbsp;as&nbsp;white&nbsp;space,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344312">//&nbsp;set&nbsp;the&nbsp;ch&#39;th&nbsp;bit&nbsp;in&nbsp;Whitespace&nbsp;(the&nbsp;Scanner&#39;s&nbsp;behavior&nbsp;is&nbsp;undefined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344385">//&nbsp;for&nbsp;values&nbsp;ch&nbsp;&gt;&nbsp;&#39;&nbsp;&#39;).&nbsp;The&nbsp;field&nbsp;may&nbsp;be&nbsp;changed&nbsp;at&nbsp;any&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6344449">Whitespace</span>&nbsp;<span class="ident" id="6344460">uint64</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344469">//&nbsp;IsIdentRune&nbsp;is&nbsp;a&nbsp;predicate&nbsp;controlling&nbsp;the&nbsp;characters&nbsp;accepted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344536">//&nbsp;as&nbsp;the&nbsp;ith&nbsp;rune&nbsp;in&nbsp;an&nbsp;identifier.&nbsp;The&nbsp;set&nbsp;of&nbsp;valid&nbsp;characters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344602">//&nbsp;must&nbsp;not&nbsp;intersect&nbsp;with&nbsp;the&nbsp;set&nbsp;of&nbsp;white&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344665">//&nbsp;If&nbsp;no&nbsp;IsIdentRune&nbsp;function&nbsp;is&nbsp;set,&nbsp;regular&nbsp;Go&nbsp;identifiers&nbsp;are</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344731">//&nbsp;accepted&nbsp;instead.&nbsp;The&nbsp;field&nbsp;may&nbsp;be&nbsp;changed&nbsp;at&nbsp;any&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6344791">IsIdentRune</span>&nbsp;<span class="keyword" id="6344803">func</span><span class="op" id="6344807">(</span><span class="ident" id="6344808">ch</span>&nbsp;<span class="builtintype" id="6344811">rune</span><span class="op" id="6344815">,</span>&nbsp;<span class="ident" id="6344817">i</span>&nbsp;<span class="builtintype" id="6344819">int</span><span class="op" id="6344822">)</span>&nbsp;<span class="builtintype" id="6344824">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344831">//&nbsp;Start&nbsp;position&nbsp;of&nbsp;most&nbsp;recently&nbsp;scanned&nbsp;token;&nbsp;set&nbsp;by&nbsp;Scan.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344895">//&nbsp;Calling&nbsp;Init&nbsp;or&nbsp;Next&nbsp;invalidates&nbsp;the&nbsp;position&nbsp;(Line&nbsp;==&nbsp;0).</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6344958">//&nbsp;The&nbsp;Filename&nbsp;field&nbsp;is&nbsp;always&nbsp;left&nbsp;untouched&nbsp;by&nbsp;the&nbsp;Scanner.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6345022">//&nbsp;If&nbsp;an&nbsp;error&nbsp;is&nbsp;reported&nbsp;(via&nbsp;Error)&nbsp;and&nbsp;Position&nbsp;is&nbsp;invalid,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6345087">//&nbsp;the&nbsp;scanner&nbsp;is&nbsp;not&nbsp;inside&nbsp;a&nbsp;token.&nbsp;Call&nbsp;Pos&nbsp;to&nbsp;obtain&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6345154">//&nbsp;position&nbsp;in&nbsp;that&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345181"><a href="/text/scanner/scanner.go.html#6340233">Position</a></span><br>
<span class="lineno">185</span><span class="op" id="6345190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6345193">//&nbsp;Init&nbsp;initializes&nbsp;a&nbsp;Scanner&nbsp;with&nbsp;a&nbsp;new&nbsp;source&nbsp;and&nbsp;returns&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="6345256">//&nbsp;Error&nbsp;is&nbsp;set&nbsp;to&nbsp;nil,&nbsp;ErrorCount&nbsp;is&nbsp;set&nbsp;to&nbsp;0,&nbsp;Mode&nbsp;is&nbsp;set&nbsp;to&nbsp;GoTokens,</span><br>
<span class="lineno"></span><span class="comment" id="6345329">//&nbsp;and&nbsp;Whitespace&nbsp;is&nbsp;set&nbsp;to&nbsp;GoWhitespace.</span><br>
<span class="lineno">190</span><span class="keyword" id="6345371">func</span>&nbsp;<span class="op" id="6345376">(</span><span class="ident" id="6345377">s</span>&nbsp;<span class="op" id="6345379">*</span><span class="ident" id="6345380"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6345387">)</span>&nbsp;<span class="ident" id="6345389">Init</span><span class="op" id="6345393">(</span><span class="ident" id="6345394">src</span>&nbsp;<span class="ident" id="6345398"><a href="/text/scanner/scanner.go.html#6340094">io</a></span><span class="op" id="6345400">.</span><span class="ident" id="6345401">Reader</span><span class="op" id="6345407">)</span>&nbsp;<span class="op" id="6345409">*</span><span class="ident" id="6345410"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span>&nbsp;<span class="op" id="6345418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345421"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345422">.</span><span class="ident" id="6345423">src</span>&nbsp;<span class="op" id="6345427">=</span>&nbsp;<span class="ident" id="6345429"><a href="/text/scanner/scanner.go.html#6345394">src</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6345435">//&nbsp;initialize&nbsp;source&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6345464">//&nbsp;(the&nbsp;first&nbsp;call&nbsp;to&nbsp;next()&nbsp;will&nbsp;fill&nbsp;it&nbsp;by&nbsp;calling&nbsp;src.Read)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345528"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345529">.</span><span class="ident" id="6345530">srcBuf</span><span class="op" id="6345536">[</span><span class="num" id="6345537">0</span><span class="op" id="6345538">]</span>&nbsp;<span class="op" id="6345540">=</span>&nbsp;<span class="ident" id="6345542"><a href="/text/scanner/scanner.go.html#6340117">utf8</a></span><span class="op" id="6345546">.</span><span class="ident" id="6345547">RuneSelf</span>&nbsp;<span class="comment" id="6345556">//&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345569"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345570">.</span><span class="ident" id="6345571">srcPos</span>&nbsp;<span class="op" id="6345578">=</span>&nbsp;<span class="num" id="6345580">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345583"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345584">.</span><span class="ident" id="6345585">srcEnd</span>&nbsp;<span class="op" id="6345592">=</span>&nbsp;<span class="num" id="6345594">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6345598">//&nbsp;initialize&nbsp;source&nbsp;position</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345629"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345630">.</span><span class="ident" id="6345631">srcBufOffset</span>&nbsp;<span class="op" id="6345644">=</span>&nbsp;<span class="num" id="6345646">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345649"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345650">.</span><span class="ident" id="6345651">line</span>&nbsp;<span class="op" id="6345656">=</span>&nbsp;<span class="num" id="6345658">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345661"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345662">.</span><span class="ident" id="6345663">column</span>&nbsp;<span class="op" id="6345670">=</span>&nbsp;<span class="num" id="6345672">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345675"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345676">.</span><span class="ident" id="6345677">lastLineLen</span>&nbsp;<span class="op" id="6345689">=</span>&nbsp;<span class="num" id="6345691">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345694"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345695">.</span><span class="ident" id="6345696">lastCharLen</span>&nbsp;<span class="op" id="6345708">=</span>&nbsp;<span class="num" id="6345710">0</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6345714">//&nbsp;initialize&nbsp;token&nbsp;text&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6345747">//&nbsp;(required&nbsp;for&nbsp;first&nbsp;call&nbsp;to&nbsp;next()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345788"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345789">.</span><span class="ident" id="6345790">tokPos</span>&nbsp;<span class="op" id="6345797">=</span>&nbsp;<span class="op" id="6345799">-</span><span class="num" id="6345800">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6345804">//&nbsp;initialize&nbsp;one&nbsp;character&nbsp;look-ahead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345844"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345845">.</span><span class="ident" id="6345846">ch</span>&nbsp;<span class="op" id="6345849">=</span>&nbsp;<span class="op" id="6345851">-</span><span class="num" id="6345852">1</span>&nbsp;<span class="comment" id="6345854">//&nbsp;no&nbsp;char&nbsp;read&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6345876">//&nbsp;initialize&nbsp;public&nbsp;fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345905"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345906">.</span><span class="ident" id="6345907">Error</span>&nbsp;<span class="op" id="6345913">=</span>&nbsp;<span class="ident" id="6345915">nil</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345920"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345921">.</span><span class="ident" id="6345922">ErrorCount</span>&nbsp;<span class="op" id="6345933">=</span>&nbsp;<span class="num" id="6345935">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345938"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345939">.</span><span class="ident" id="6345940">Mode</span>&nbsp;<span class="op" id="6345945">=</span>&nbsp;<span class="ident" id="6345947"><a href="/text/scanner/scanner.go.html#6341718">GoTokens</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345957"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345958">.</span><span class="ident" id="6345959">Whitespace</span>&nbsp;<span class="op" id="6345970">=</span>&nbsp;<span class="ident" id="6345972"><a href="/text/scanner/scanner.go.html#6342555">GoWhitespace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6345986"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><span class="op" id="6345987">.</span><span class="ident" id="6345988">Line</span>&nbsp;<span class="op" id="6345993">=</span>&nbsp;<span class="num" id="6345995">0</span>&nbsp;<span class="comment" id="6345997">//&nbsp;invalidate&nbsp;token&nbsp;position</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6346028">return</span>&nbsp;<span class="ident" id="6346035"><a href="/text/scanner/scanner.go.html#6345377">s</a></span><br>
<span class="lineno"></span><span class="op" id="6346037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6346040">//&nbsp;next&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;character.&nbsp;It&nbsp;is&nbsp;designed&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6346114">//&nbsp;that&nbsp;only&nbsp;a&nbsp;minimal&nbsp;amount&nbsp;of&nbsp;work&nbsp;needs&nbsp;to&nbsp;be&nbsp;done&nbsp;in&nbsp;the&nbsp;common&nbsp;ASCII</span><br>
<span class="lineno">225</span><span class="comment" id="6346189">//&nbsp;case&nbsp;(one&nbsp;test&nbsp;to&nbsp;check&nbsp;for&nbsp;both&nbsp;ASCII&nbsp;and&nbsp;end-of-buffer,&nbsp;and&nbsp;one&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="6346263">//&nbsp;to&nbsp;check&nbsp;for&nbsp;newlines).</span><br>
<span class="lineno"></span><span class="keyword" id="6346290">func</span>&nbsp;<span class="op" id="6346295">(</span><span class="ident" id="6346296">s</span>&nbsp;<span class="op" id="6346298">*</span><span class="ident" id="6346299"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6346306">)</span>&nbsp;<span class="ident" id="6346308">next</span><span class="op" id="6346312">(</span><span class="op" id="6346313">)</span>&nbsp;<span class="builtintype" id="6346315">rune</span>&nbsp;<span class="op" id="6346320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6346323">ch</span><span class="op" id="6346325">,</span>&nbsp;<span class="ident" id="6346327">width</span>&nbsp;<span class="op" id="6346333">:=</span>&nbsp;<span class="builtintype" id="6346336">rune</span><span class="op" id="6346340">(</span><span class="ident" id="6346341"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346342">.</span><span class="ident" id="6346343">srcBuf</span><span class="op" id="6346349">[</span><span class="ident" id="6346350"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346351">.</span><span class="ident" id="6346352">srcPos</span><span class="op" id="6346358">]</span><span class="op" id="6346359">)</span><span class="op" id="6346360">,</span>&nbsp;<span class="num" id="6346362">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6346366">if</span>&nbsp;<span class="ident" id="6346369"><a href="/text/scanner/scanner.go.html#6346323">ch</a></span>&nbsp;<span class="op" id="6346372">&gt;=</span>&nbsp;<span class="ident" id="6346375"><a href="/text/scanner/scanner.go.html#6340117">utf8</a></span><span class="op" id="6346379">.</span><span class="ident" id="6346380">RuneSelf</span>&nbsp;<span class="op" id="6346389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6346393">//&nbsp;uncommon&nbsp;case:&nbsp;not&nbsp;ASCII&nbsp;or&nbsp;not&nbsp;enough&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6346443">for</span>&nbsp;<span class="ident" id="6346447"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346448">.</span><span class="ident" id="6346449">srcPos</span><span class="op" id="6346455">+</span><span class="ident" id="6346456"><a href="/text/scanner/scanner.go.html#6340117">utf8</a></span><span class="op" id="6346460">.</span><span class="ident" id="6346461">UTFMax</span>&nbsp;<span class="op" id="6346468">&gt;</span>&nbsp;<span class="ident" id="6346470"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346471">.</span><span class="ident" id="6346472">srcEnd</span>&nbsp;<span class="op" id="6346479">&amp;&amp;</span>&nbsp;<span class="op" id="6346482">!</span><span class="ident" id="6346483"><a href="/text/scanner/scanner.go.html#6340117">utf8</a></span><span class="op" id="6346487">.</span><span class="ident" id="6346488">FullRune</span><span class="op" id="6346496">(</span><span class="ident" id="6346497"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346498">.</span><span class="ident" id="6346499">srcBuf</span><span class="op" id="6346505">[</span><span class="ident" id="6346506"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346507">.</span><span class="ident" id="6346508">srcPos</span><span class="op" id="6346514">:</span><span class="ident" id="6346515"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346516">.</span><span class="ident" id="6346517">srcEnd</span><span class="op" id="6346523">]</span><span class="op" id="6346524">)</span>&nbsp;<span class="op" id="6346526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6346531">//&nbsp;not&nbsp;enough&nbsp;bytes:&nbsp;read&nbsp;some&nbsp;more,&nbsp;but&nbsp;first</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6346581">//&nbsp;save&nbsp;away&nbsp;token&nbsp;text&nbsp;if&nbsp;any</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6346615">if</span>&nbsp;<span class="ident" id="6346618"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346619">.</span><span class="ident" id="6346620">tokPos</span>&nbsp;<span class="op" id="6346627">&gt;=</span>&nbsp;<span class="num" id="6346630">0</span>&nbsp;<span class="op" id="6346632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6346638"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346639">.</span><span class="ident" id="6346640">tokBuf</span><span class="op" id="6346646">.</span><span class="ident" id="6346647">Write</span><span class="op" id="6346652">(</span><span class="ident" id="6346653"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346654">.</span><span class="ident" id="6346655">srcBuf</span><span class="op" id="6346661">[</span><span class="ident" id="6346662"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346663">.</span><span class="ident" id="6346664">tokPos</span><span class="op" id="6346670">:</span><span class="ident" id="6346671"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346672">.</span><span class="ident" id="6346673">srcPos</span><span class="op" id="6346679">]</span><span class="op" id="6346680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6346686"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346687">.</span><span class="ident" id="6346688">tokPos</span>&nbsp;<span class="op" id="6346695">=</span>&nbsp;<span class="num" id="6346697">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6346703">//&nbsp;s.tokEnd&nbsp;is&nbsp;set&nbsp;by&nbsp;Scan()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6346735">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6346740">//&nbsp;move&nbsp;unread&nbsp;bytes&nbsp;to&nbsp;beginning&nbsp;of&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6346787">copy</span><span class="op" id="6346791">(</span><span class="ident" id="6346792"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346793">.</span><span class="ident" id="6346794">srcBuf</span><span class="op" id="6346800">[</span><span class="num" id="6346801">0</span><span class="op" id="6346802">:</span><span class="op" id="6346803">]</span><span class="op" id="6346804">,</span>&nbsp;<span class="ident" id="6346806"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346807">.</span><span class="ident" id="6346808">srcBuf</span><span class="op" id="6346814">[</span><span class="ident" id="6346815"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346816">.</span><span class="ident" id="6346817">srcPos</span><span class="op" id="6346823">:</span><span class="ident" id="6346824"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346825">.</span><span class="ident" id="6346826">srcEnd</span><span class="op" id="6346832">]</span><span class="op" id="6346833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6346838"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346839">.</span><span class="ident" id="6346840">srcBufOffset</span>&nbsp;<span class="op" id="6346853">+=</span>&nbsp;<span class="ident" id="6346856"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6346857">.</span><span class="ident" id="6346858">srcPos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6346868">//&nbsp;read&nbsp;more&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6346890">//&nbsp;(an&nbsp;io.Reader&nbsp;must&nbsp;return&nbsp;io.EOF&nbsp;when&nbsp;it&nbsp;reaches</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6346945">//&nbsp;the&nbsp;end&nbsp;of&nbsp;what&nbsp;it&nbsp;is&nbsp;reading&nbsp;-&nbsp;simply&nbsp;returning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6347000">//&nbsp;n&nbsp;==&nbsp;0&nbsp;will&nbsp;make&nbsp;this&nbsp;loop&nbsp;retry&nbsp;forever;&nbsp;but&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6347056">//&nbsp;error&nbsp;is&nbsp;in&nbsp;the&nbsp;reader&nbsp;implementation&nbsp;in&nbsp;that&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347114">i</span>&nbsp;<span class="op" id="6347116">:=</span>&nbsp;<span class="ident" id="6347119"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347120">.</span><span class="ident" id="6347121">srcEnd</span>&nbsp;<span class="op" id="6347128">-</span>&nbsp;<span class="ident" id="6347130"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347131">.</span><span class="ident" id="6347132">srcPos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347142">n</span><span class="op" id="6347143">,</span>&nbsp;<span class="ident" id="6347145">err</span>&nbsp;<span class="op" id="6347149">:=</span>&nbsp;<span class="ident" id="6347152"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347153">.</span><span class="ident" id="6347154">src</span><span class="op" id="6347157">.</span><span class="ident" id="6347158">Read</span><span class="op" id="6347162">(</span><span class="ident" id="6347163"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347164">.</span><span class="ident" id="6347165">srcBuf</span><span class="op" id="6347171">[</span><span class="ident" id="6347172"><a href="/text/scanner/scanner.go.html#6347114">i</a></span><span class="op" id="6347173">:</span><span class="ident" id="6347174"><a href="/text/scanner/scanner.go.html#6342614">bufLen</a></span><span class="op" id="6347180">]</span><span class="op" id="6347181">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347186"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347187">.</span><span class="ident" id="6347188">srcPos</span>&nbsp;<span class="op" id="6347195">=</span>&nbsp;<span class="num" id="6347197">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347202"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347203">.</span><span class="ident" id="6347204">srcEnd</span>&nbsp;<span class="op" id="6347211">=</span>&nbsp;<span class="ident" id="6347213"><a href="/text/scanner/scanner.go.html#6347114">i</a></span>&nbsp;<span class="op" id="6347215">+</span>&nbsp;<span class="ident" id="6347217"><a href="/text/scanner/scanner.go.html#6347142">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347222"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347223">.</span><span class="ident" id="6347224">srcBuf</span><span class="op" id="6347230">[</span><span class="ident" id="6347231"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347232">.</span><span class="ident" id="6347233">srcEnd</span><span class="op" id="6347239">]</span>&nbsp;<span class="op" id="6347241">=</span>&nbsp;<span class="ident" id="6347243"><a href="/text/scanner/scanner.go.html#6340117">utf8</a></span><span class="op" id="6347247">.</span><span class="ident" id="6347248">RuneSelf</span>&nbsp;<span class="comment" id="6347257">//&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6347272">if</span>&nbsp;<span class="ident" id="6347275"><a href="/text/scanner/scanner.go.html#6347145">err</a></span>&nbsp;<span class="op" id="6347279">!=</span>&nbsp;<span class="ident" id="6347282">nil</span>&nbsp;<span class="op" id="6347286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6347292">if</span>&nbsp;<span class="ident" id="6347295"><a href="/text/scanner/scanner.go.html#6347145">err</a></span>&nbsp;<span class="op" id="6347299">!=</span>&nbsp;<span class="ident" id="6347302"><a href="/text/scanner/scanner.go.html#6340094">io</a></span><span class="op" id="6347304">.</span><span class="ident" id="6347305">EOF</span>&nbsp;<span class="op" id="6347309">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347316"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347317">.</span><span class="builtintype" id="6347318">error</span><span class="op" id="6347323">(</span><span class="ident" id="6347324"><a href="/text/scanner/scanner.go.html#6347145">err</a></span><span class="op" id="6347327">.</span><span class="ident" id="6347328">Error</span><span class="op" id="6347333">(</span><span class="op" id="6347334">)</span><span class="op" id="6347335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6347341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6347347">if</span>&nbsp;<span class="ident" id="6347350"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347351">.</span><span class="ident" id="6347352">srcEnd</span>&nbsp;<span class="op" id="6347359">==</span>&nbsp;<span class="num" id="6347362">0</span>&nbsp;<span class="op" id="6347364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6347371">if</span>&nbsp;<span class="ident" id="6347374"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347375">.</span><span class="ident" id="6347376">lastCharLen</span>&nbsp;<span class="op" id="6347388">&gt;</span>&nbsp;<span class="num" id="6347390">0</span>&nbsp;<span class="op" id="6347392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6347400">//&nbsp;previous&nbsp;character&nbsp;was&nbsp;not&nbsp;EOF</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347440"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347441">.</span><span class="ident" id="6347442">column</span><span class="op" id="6347448">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6347456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347463"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347464">.</span><span class="ident" id="6347465">lastCharLen</span>&nbsp;<span class="op" id="6347477">=</span>&nbsp;<span class="num" id="6347479">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6347486">return</span>&nbsp;<span class="ident" id="6347493"><a href="/text/scanner/scanner.go.html#6341921">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6347501">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6347507">//&nbsp;If&nbsp;err&nbsp;==&nbsp;EOF,&nbsp;we&nbsp;won&#39;t&nbsp;be&nbsp;getting&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6347554">//&nbsp;bytes;&nbsp;break&nbsp;to&nbsp;avoid&nbsp;infinite&nbsp;loop.&nbsp;If</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6347601">//&nbsp;err&nbsp;is&nbsp;something&nbsp;else,&nbsp;we&nbsp;don&#39;t&nbsp;know&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6347648">//&nbsp;we&nbsp;can&nbsp;get&nbsp;more&nbsp;bytes;&nbsp;thus&nbsp;also&nbsp;break.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6347695">break</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6347704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6347708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6347712">//&nbsp;at&nbsp;least&nbsp;one&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347735"><a href="/text/scanner/scanner.go.html#6346323">ch</a></span>&nbsp;<span class="op" id="6347738">=</span>&nbsp;<span class="builtintype" id="6347740">rune</span><span class="op" id="6347744">(</span><span class="ident" id="6347745"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347746">.</span><span class="ident" id="6347747">srcBuf</span><span class="op" id="6347753">[</span><span class="ident" id="6347754"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347755">.</span><span class="ident" id="6347756">srcPos</span><span class="op" id="6347762">]</span><span class="op" id="6347763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6347767">if</span>&nbsp;<span class="ident" id="6347770"><a href="/text/scanner/scanner.go.html#6346323">ch</a></span>&nbsp;<span class="op" id="6347773">&gt;=</span>&nbsp;<span class="ident" id="6347776"><a href="/text/scanner/scanner.go.html#6340117">utf8</a></span><span class="op" id="6347780">.</span><span class="ident" id="6347781">RuneSelf</span>&nbsp;<span class="op" id="6347790">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6347795">//&nbsp;uncommon&nbsp;case:&nbsp;not&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347826"><a href="/text/scanner/scanner.go.html#6346323">ch</a></span><span class="op" id="6347828">,</span>&nbsp;<span class="ident" id="6347830"><a href="/text/scanner/scanner.go.html#6346327">width</a></span>&nbsp;<span class="op" id="6347836">=</span>&nbsp;<span class="ident" id="6347838"><a href="/text/scanner/scanner.go.html#6340117">utf8</a></span><span class="op" id="6347842">.</span><span class="ident" id="6347843">DecodeRune</span><span class="op" id="6347853">(</span><span class="ident" id="6347854"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347855">.</span><span class="ident" id="6347856">srcBuf</span><span class="op" id="6347862">[</span><span class="ident" id="6347863"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347864">.</span><span class="ident" id="6347865">srcPos</span><span class="op" id="6347871">:</span><span class="ident" id="6347872"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347873">.</span><span class="ident" id="6347874">srcEnd</span><span class="op" id="6347880">]</span><span class="op" id="6347881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6347886">if</span>&nbsp;<span class="ident" id="6347889"><a href="/text/scanner/scanner.go.html#6346323">ch</a></span>&nbsp;<span class="op" id="6347892">==</span>&nbsp;<span class="ident" id="6347895"><a href="/text/scanner/scanner.go.html#6340117">utf8</a></span><span class="op" id="6347899">.</span><span class="ident" id="6347900">RuneError</span>&nbsp;<span class="op" id="6347910">&amp;&amp;</span>&nbsp;<span class="ident" id="6347913"><a href="/text/scanner/scanner.go.html#6346327">width</a></span>&nbsp;<span class="op" id="6347919">==</span>&nbsp;<span class="num" id="6347922">1</span>&nbsp;<span class="op" id="6347924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6347930">//&nbsp;advance&nbsp;for&nbsp;correct&nbsp;error&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347972"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347973">.</span><span class="ident" id="6347974">srcPos</span>&nbsp;<span class="op" id="6347981">+=</span>&nbsp;<span class="ident" id="6347984"><a href="/text/scanner/scanner.go.html#6346327">width</a></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6347994"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6347995">.</span><span class="ident" id="6347996">lastCharLen</span>&nbsp;<span class="op" id="6348008">=</span>&nbsp;<span class="ident" id="6348010"><a href="/text/scanner/scanner.go.html#6346327">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348020"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6348021">.</span><span class="ident" id="6348022">column</span><span class="op" id="6348028">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348035"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6348036">.</span><span class="builtintype" id="6348037">error</span><span class="op" id="6348042">(</span><span class="string" id="6348043">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op" id="6348067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6348073">return</span>&nbsp;<span class="ident" id="6348080"><a href="/text/scanner/scanner.go.html#6346323">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6348086">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6348090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6348093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6348097">//&nbsp;advance</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348109"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6348110">.</span><span class="ident" id="6348111">srcPos</span>&nbsp;<span class="op" id="6348118">+=</span>&nbsp;<span class="ident" id="6348121"><a href="/text/scanner/scanner.go.html#6346327">width</a></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348128"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6348129">.</span><span class="ident" id="6348130">lastCharLen</span>&nbsp;<span class="op" id="6348142">=</span>&nbsp;<span class="ident" id="6348144"><a href="/text/scanner/scanner.go.html#6346327">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348151"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6348152">.</span><span class="ident" id="6348153">column</span><span class="op" id="6348159">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6348164">//&nbsp;special&nbsp;situations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6348187">switch</span>&nbsp;<span class="ident" id="6348194"><a href="/text/scanner/scanner.go.html#6346323">ch</a></span>&nbsp;<span class="op" id="6348197">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6348200">case</span>&nbsp;<span class="num" id="6348205">0</span><span class="op" id="6348206">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6348210">//&nbsp;for&nbsp;compatibility&nbsp;with&nbsp;other&nbsp;tools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348250"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6348251">.</span><span class="builtintype" id="6348252">error</span><span class="op" id="6348257">(</span><span class="string" id="6348258">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op" id="6348281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6348284">case</span>&nbsp;<span class="string" id="6348289">&#39;\n&#39;</span><span class="op" id="6348293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348297"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6348298">.</span><span class="ident" id="6348299">line</span><span class="op" id="6348303">++</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348308"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6348309">.</span><span class="ident" id="6348310">lastLineLen</span>&nbsp;<span class="op" id="6348322">=</span>&nbsp;<span class="ident" id="6348324"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6348325">.</span><span class="ident" id="6348326">column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348335"><a href="/text/scanner/scanner.go.html#6346296">s</a></span><span class="op" id="6348336">.</span><span class="ident" id="6348337">column</span>&nbsp;<span class="op" id="6348344">=</span>&nbsp;<span class="num" id="6348346">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6348349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6348353">return</span>&nbsp;<span class="ident" id="6348360"><a href="/text/scanner/scanner.go.html#6346323">ch</a></span><br>
<span class="lineno">305</span><span class="op" id="6348363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6348366">//&nbsp;Next&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="6348420">//&nbsp;It&nbsp;returns&nbsp;EOF&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;source.&nbsp;It&nbsp;reports</span><br>
<span class="lineno"></span><span class="comment" id="6348475">//&nbsp;a&nbsp;read&nbsp;error&nbsp;by&nbsp;calling&nbsp;s.Error,&nbsp;if&nbsp;not&nbsp;nil;&nbsp;otherwise</span><br>
<span class="lineno">310</span><span class="comment" id="6348533">//&nbsp;it&nbsp;prints&nbsp;an&nbsp;error&nbsp;message&nbsp;to&nbsp;os.Stderr.&nbsp;Next&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="6348591">//&nbsp;update&nbsp;the&nbsp;Scanner&#39;s&nbsp;Position&nbsp;field;&nbsp;use&nbsp;Pos()&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6348644">//&nbsp;get&nbsp;the&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span><span class="keyword" id="6348673">func</span>&nbsp;<span class="op" id="6348678">(</span><span class="ident" id="6348679">s</span>&nbsp;<span class="op" id="6348681">*</span><span class="ident" id="6348682"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6348689">)</span>&nbsp;<span class="ident" id="6348691">Next</span><span class="op" id="6348695">(</span><span class="op" id="6348696">)</span>&nbsp;<span class="builtintype" id="6348698">rune</span>&nbsp;<span class="op" id="6348703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348706"><a href="/text/scanner/scanner.go.html#6348679">s</a></span><span class="op" id="6348707">.</span><span class="ident" id="6348708">tokPos</span>&nbsp;<span class="op" id="6348715">=</span>&nbsp;<span class="op" id="6348717">-</span><span class="num" id="6348718">1</span>&nbsp;<span class="comment" id="6348720">//&nbsp;don&#39;t&nbsp;collect&nbsp;token&nbsp;text</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348749"><a href="/text/scanner/scanner.go.html#6348679">s</a></span><span class="op" id="6348750">.</span><span class="ident" id="6348751">Line</span>&nbsp;<span class="op" id="6348756">=</span>&nbsp;<span class="num" id="6348758">0</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6348763">//&nbsp;invalidate&nbsp;token&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348793">ch</span>&nbsp;<span class="op" id="6348796">:=</span>&nbsp;<span class="ident" id="6348799"><a href="/text/scanner/scanner.go.html#6348679">s</a></span><span class="op" id="6348800">.</span><span class="ident" id="6348801">Peek</span><span class="op" id="6348805">(</span><span class="op" id="6348806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6348809"><a href="/text/scanner/scanner.go.html#6348679">s</a></span><span class="op" id="6348810">.</span><span class="ident" id="6348811">ch</span>&nbsp;<span class="op" id="6348814">=</span>&nbsp;<span class="ident" id="6348816"><a href="/text/scanner/scanner.go.html#6348679">s</a></span><span class="op" id="6348817">.</span><span class="ident" id="6348818">next</span><span class="op" id="6348822">(</span><span class="op" id="6348823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6348826">return</span>&nbsp;<span class="ident" id="6348833"><a href="/text/scanner/scanner.go.html#6348793">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6348836">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="6348839">//&nbsp;Peek&nbsp;returns&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;character&nbsp;in&nbsp;the&nbsp;source&nbsp;without&nbsp;advancing</span><br>
<span class="lineno"></span><span class="comment" id="6348914">//&nbsp;the&nbsp;scanner.&nbsp;It&nbsp;returns&nbsp;EOF&nbsp;if&nbsp;the&nbsp;scanner&#39;s&nbsp;position&nbsp;is&nbsp;at&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span><span class="comment" id="6348986">//&nbsp;character&nbsp;of&nbsp;the&nbsp;source.</span><br>
<span class="lineno"></span><span class="keyword" id="6349014">func</span>&nbsp;<span class="op" id="6349019">(</span><span class="ident" id="6349020">s</span>&nbsp;<span class="op" id="6349022">*</span><span class="ident" id="6349023"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6349030">)</span>&nbsp;<span class="ident" id="6349032">Peek</span><span class="op" id="6349036">(</span><span class="op" id="6349037">)</span>&nbsp;<span class="builtintype" id="6349039">rune</span>&nbsp;<span class="op" id="6349044">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349047">if</span>&nbsp;<span class="ident" id="6349050"><a href="/text/scanner/scanner.go.html#6349020">s</a></span><span class="op" id="6349051">.</span><span class="ident" id="6349052">ch</span>&nbsp;<span class="op" id="6349055">&lt;</span>&nbsp;<span class="num" id="6349057">0</span>&nbsp;<span class="op" id="6349059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6349063">//&nbsp;this&nbsp;code&nbsp;is&nbsp;only&nbsp;run&nbsp;for&nbsp;the&nbsp;very&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6349119"><a href="/text/scanner/scanner.go.html#6349020">s</a></span><span class="op" id="6349120">.</span><span class="ident" id="6349121">ch</span>&nbsp;<span class="op" id="6349124">=</span>&nbsp;<span class="ident" id="6349126"><a href="/text/scanner/scanner.go.html#6349020">s</a></span><span class="op" id="6349127">.</span><span class="ident" id="6349128">next</span><span class="op" id="6349132">(</span><span class="op" id="6349133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349137">if</span>&nbsp;<span class="ident" id="6349140"><a href="/text/scanner/scanner.go.html#6349020">s</a></span><span class="op" id="6349141">.</span><span class="ident" id="6349142">ch</span>&nbsp;<span class="op" id="6349145">==</span>&nbsp;<span class="string" id="6349148">&#39;\uFEFF&#39;</span>&nbsp;<span class="op" id="6349157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6349162"><a href="/text/scanner/scanner.go.html#6349020">s</a></span><span class="op" id="6349163">.</span><span class="ident" id="6349164">ch</span>&nbsp;<span class="op" id="6349167">=</span>&nbsp;<span class="ident" id="6349169"><a href="/text/scanner/scanner.go.html#6349020">s</a></span><span class="op" id="6349170">.</span><span class="ident" id="6349171">next</span><span class="op" id="6349175">(</span><span class="op" id="6349176">)</span>&nbsp;<span class="comment" id="6349178">//&nbsp;ignore&nbsp;BOM</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6349194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6349197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349200">return</span>&nbsp;<span class="ident" id="6349207"><a href="/text/scanner/scanner.go.html#6349020">s</a></span><span class="op" id="6349208">.</span><span class="ident" id="6349209">ch</span><br>
<span class="lineno"></span><span class="op" id="6349212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="6349215">func</span>&nbsp;<span class="op" id="6349220">(</span><span class="ident" id="6349221">s</span>&nbsp;<span class="op" id="6349223">*</span><span class="ident" id="6349224"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6349231">)</span>&nbsp;<span class="builtintype" id="6349233">error</span><span class="op" id="6349238">(</span><span class="ident" id="6349239">msg</span>&nbsp;<span class="builtintype" id="6349243">string</span><span class="op" id="6349249">)</span>&nbsp;<span class="op" id="6349251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6349254"><a href="/text/scanner/scanner.go.html#6349221">s</a></span><span class="op" id="6349255">.</span><span class="ident" id="6349256">ErrorCount</span><span class="op" id="6349266">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349270">if</span>&nbsp;<span class="ident" id="6349273"><a href="/text/scanner/scanner.go.html#6349221">s</a></span><span class="op" id="6349274">.</span><span class="ident" id="6349275">Error</span>&nbsp;<span class="op" id="6349281">!=</span>&nbsp;<span class="ident" id="6349284">nil</span>&nbsp;<span class="op" id="6349288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6349292"><a href="/text/scanner/scanner.go.html#6349221">s</a></span><span class="op" id="6349293">.</span><span class="ident" id="6349294">Error</span><span class="op" id="6349299">(</span><span class="ident" id="6349300"><a href="/text/scanner/scanner.go.html#6349221">s</a></span><span class="op" id="6349301">,</span>&nbsp;<span class="ident" id="6349303"><a href="/text/scanner/scanner.go.html#6349239">msg</a></span><span class="op" id="6349306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349310">return</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6349318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6349321">pos</span>&nbsp;<span class="op" id="6349325">:=</span>&nbsp;<span class="ident" id="6349328"><a href="/text/scanner/scanner.go.html#6349221">s</a></span><span class="op" id="6349329">.</span><span class="ident" id="6349330">Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349340">if</span>&nbsp;<span class="op" id="6349343">!</span><span class="ident" id="6349344"><a href="/text/scanner/scanner.go.html#6349321">pos</a></span><span class="op" id="6349347">.</span><span class="ident" id="6349348">IsValid</span><span class="op" id="6349355">(</span><span class="op" id="6349356">)</span>&nbsp;<span class="op" id="6349358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6349362"><a href="/text/scanner/scanner.go.html#6349321">pos</a></span>&nbsp;<span class="op" id="6349366">=</span>&nbsp;<span class="ident" id="6349368"><a href="/text/scanner/scanner.go.html#6349221">s</a></span><span class="op" id="6349369">.</span><span class="ident" id="6349370">Pos</span><span class="op" id="6349373">(</span><span class="op" id="6349374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6349377">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6349380"><a href="/text/scanner/scanner.go.html#6340087">fmt</a></span><span class="op" id="6349383">.</span><span class="ident" id="6349384">Fprintf</span><span class="op" id="6349391">(</span><span class="ident" id="6349392"><a href="/text/scanner/scanner.go.html#6340100">os</a></span><span class="op" id="6349394">.</span><span class="ident" id="6349395">Stderr</span><span class="op" id="6349401">,</span>&nbsp;<span class="string" id="6349403">&#34;%s:&nbsp;%s\n&#34;</span><span class="op" id="6349413">,</span>&nbsp;<span class="ident" id="6349415"><a href="/text/scanner/scanner.go.html#6349321">pos</a></span><span class="op" id="6349418">,</span>&nbsp;<span class="ident" id="6349420"><a href="/text/scanner/scanner.go.html#6349239">msg</a></span><span class="op" id="6349423">)</span><br>
<span class="lineno"></span><span class="op" id="6349425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6349428">func</span>&nbsp;<span class="op" id="6349433">(</span><span class="ident" id="6349434">s</span>&nbsp;<span class="op" id="6349436">*</span><span class="ident" id="6349437"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6349444">)</span>&nbsp;<span class="ident" id="6349446">isIdentRune</span><span class="op" id="6349457">(</span><span class="ident" id="6349458">ch</span>&nbsp;<span class="builtintype" id="6349461">rune</span><span class="op" id="6349465">,</span>&nbsp;<span class="ident" id="6349467">i</span>&nbsp;<span class="builtintype" id="6349469">int</span><span class="op" id="6349472">)</span>&nbsp;<span class="builtintype" id="6349474">bool</span>&nbsp;<span class="op" id="6349479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349482">if</span>&nbsp;<span class="ident" id="6349485"><a href="/text/scanner/scanner.go.html#6349434">s</a></span><span class="op" id="6349486">.</span><span class="ident" id="6349487">IsIdentRune</span>&nbsp;<span class="op" id="6349499">!=</span>&nbsp;<span class="ident" id="6349502">nil</span>&nbsp;<span class="op" id="6349506">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349510">return</span>&nbsp;<span class="ident" id="6349517"><a href="/text/scanner/scanner.go.html#6349434">s</a></span><span class="op" id="6349518">.</span><span class="ident" id="6349519">IsIdentRune</span><span class="op" id="6349530">(</span><span class="ident" id="6349531"><a href="/text/scanner/scanner.go.html#6349458">ch</a></span><span class="op" id="6349533">,</span>&nbsp;<span class="ident" id="6349535"><a href="/text/scanner/scanner.go.html#6349467">i</a></span><span class="op" id="6349536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6349539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349542">return</span>&nbsp;<span class="ident" id="6349549"><a href="/text/scanner/scanner.go.html#6349458">ch</a></span>&nbsp;<span class="op" id="6349552">==</span>&nbsp;<span class="string" id="6349555">&#39;_&#39;</span>&nbsp;<span class="op" id="6349559">||</span>&nbsp;<span class="ident" id="6349562"><a href="/text/scanner/scanner.go.html#6340106">unicode</a></span><span class="op" id="6349569">.</span><span class="ident" id="6349570">IsLetter</span><span class="op" id="6349578">(</span><span class="ident" id="6349579"><a href="/text/scanner/scanner.go.html#6349458">ch</a></span><span class="op" id="6349581">)</span>&nbsp;<span class="op" id="6349583">||</span>&nbsp;<span class="ident" id="6349586"><a href="/text/scanner/scanner.go.html#6340106">unicode</a></span><span class="op" id="6349593">.</span><span class="ident" id="6349594">IsDigit</span><span class="op" id="6349601">(</span><span class="ident" id="6349602"><a href="/text/scanner/scanner.go.html#6349458">ch</a></span><span class="op" id="6349604">)</span>&nbsp;<span class="op" id="6349606">&amp;&amp;</span>&nbsp;<span class="ident" id="6349609"><a href="/text/scanner/scanner.go.html#6349467">i</a></span>&nbsp;<span class="op" id="6349611">&gt;</span>&nbsp;<span class="num" id="6349613">0</span><br>
<span class="lineno"></span><span class="op" id="6349615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="keyword" id="6349618">func</span>&nbsp;<span class="op" id="6349623">(</span><span class="ident" id="6349624">s</span>&nbsp;<span class="op" id="6349626">*</span><span class="ident" id="6349627"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6349634">)</span>&nbsp;<span class="ident" id="6349636">scanIdentifier</span><span class="op" id="6349650">(</span><span class="op" id="6349651">)</span>&nbsp;<span class="builtintype" id="6349653">rune</span>&nbsp;<span class="op" id="6349658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6349661">//&nbsp;we&nbsp;know&nbsp;the&nbsp;zero&#39;th&nbsp;rune&nbsp;is&nbsp;OK;&nbsp;start&nbsp;scanning&nbsp;at&nbsp;the&nbsp;next&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6349728">ch</span>&nbsp;<span class="op" id="6349731">:=</span>&nbsp;<span class="ident" id="6349734"><a href="/text/scanner/scanner.go.html#6349624">s</a></span><span class="op" id="6349735">.</span><span class="ident" id="6349736">next</span><span class="op" id="6349740">(</span><span class="op" id="6349741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349744">for</span>&nbsp;<span class="ident" id="6349748">i</span>&nbsp;<span class="op" id="6349750">:=</span>&nbsp;<span class="num" id="6349753">1</span><span class="op" id="6349754">;</span>&nbsp;<span class="ident" id="6349756"><a href="/text/scanner/scanner.go.html#6349624">s</a></span><span class="op" id="6349757">.</span><span class="ident" id="6349758">isIdentRune</span><span class="op" id="6349769">(</span><span class="ident" id="6349770"><a href="/text/scanner/scanner.go.html#6349728">ch</a></span><span class="op" id="6349772">,</span>&nbsp;<span class="ident" id="6349774"><a href="/text/scanner/scanner.go.html#6349748">i</a></span><span class="op" id="6349775">)</span><span class="op" id="6349776">;</span>&nbsp;<span class="ident" id="6349778"><a href="/text/scanner/scanner.go.html#6349748">i</a></span><span class="op" id="6349779">++</span>&nbsp;<span class="op" id="6349782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6349786"><a href="/text/scanner/scanner.go.html#6349728">ch</a></span>&nbsp;<span class="op" id="6349789">=</span>&nbsp;<span class="ident" id="6349791"><a href="/text/scanner/scanner.go.html#6349624">s</a></span><span class="op" id="6349792">.</span><span class="ident" id="6349793">next</span><span class="op" id="6349797">(</span><span class="op" id="6349798">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6349801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349804">return</span>&nbsp;<span class="ident" id="6349811"><a href="/text/scanner/scanner.go.html#6349728">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6349814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6349817">func</span>&nbsp;<span class="ident" id="6349822">digitVal</span><span class="op" id="6349830">(</span><span class="ident" id="6349831">ch</span>&nbsp;<span class="builtintype" id="6349834">rune</span><span class="op" id="6349838">)</span>&nbsp;<span class="builtintype" id="6349840">int</span>&nbsp;<span class="op" id="6349844">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349847">switch</span>&nbsp;<span class="op" id="6349854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349857">case</span>&nbsp;<span class="string" id="6349862">&#39;0&#39;</span>&nbsp;<span class="op" id="6349866">&lt;=</span>&nbsp;<span class="ident" id="6349869"><a href="/text/scanner/scanner.go.html#6349831">ch</a></span>&nbsp;<span class="op" id="6349872">&amp;&amp;</span>&nbsp;<span class="ident" id="6349875"><a href="/text/scanner/scanner.go.html#6349831">ch</a></span>&nbsp;<span class="op" id="6349878">&lt;=</span>&nbsp;<span class="string" id="6349881">&#39;9&#39;</span><span class="op" id="6349884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349888">return</span>&nbsp;<span class="builtintype" id="6349895">int</span><span class="op" id="6349898">(</span><span class="ident" id="6349899"><a href="/text/scanner/scanner.go.html#6349831">ch</a></span>&nbsp;<span class="op" id="6349902">-</span>&nbsp;<span class="string" id="6349904">&#39;0&#39;</span><span class="op" id="6349907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349910">case</span>&nbsp;<span class="string" id="6349915">&#39;a&#39;</span>&nbsp;<span class="op" id="6349919">&lt;=</span>&nbsp;<span class="ident" id="6349922"><a href="/text/scanner/scanner.go.html#6349831">ch</a></span>&nbsp;<span class="op" id="6349925">&amp;&amp;</span>&nbsp;<span class="ident" id="6349928"><a href="/text/scanner/scanner.go.html#6349831">ch</a></span>&nbsp;<span class="op" id="6349931">&lt;=</span>&nbsp;<span class="string" id="6349934">&#39;f&#39;</span><span class="op" id="6349937">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349941">return</span>&nbsp;<span class="builtintype" id="6349948">int</span><span class="op" id="6349951">(</span><span class="ident" id="6349952"><a href="/text/scanner/scanner.go.html#6349831">ch</a></span>&nbsp;<span class="op" id="6349955">-</span>&nbsp;<span class="string" id="6349957">&#39;a&#39;</span>&nbsp;<span class="op" id="6349961">+</span>&nbsp;<span class="num" id="6349963">10</span><span class="op" id="6349965">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349968">case</span>&nbsp;<span class="string" id="6349973">&#39;A&#39;</span>&nbsp;<span class="op" id="6349977">&lt;=</span>&nbsp;<span class="ident" id="6349980"><a href="/text/scanner/scanner.go.html#6349831">ch</a></span>&nbsp;<span class="op" id="6349983">&amp;&amp;</span>&nbsp;<span class="ident" id="6349986"><a href="/text/scanner/scanner.go.html#6349831">ch</a></span>&nbsp;<span class="op" id="6349989">&lt;=</span>&nbsp;<span class="string" id="6349992">&#39;F&#39;</span><span class="op" id="6349995">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6349999">return</span>&nbsp;<span class="builtintype" id="6350006">int</span><span class="op" id="6350009">(</span><span class="ident" id="6350010"><a href="/text/scanner/scanner.go.html#6349831">ch</a></span>&nbsp;<span class="op" id="6350013">-</span>&nbsp;<span class="string" id="6350015">&#39;A&#39;</span>&nbsp;<span class="op" id="6350019">+</span>&nbsp;<span class="num" id="6350021">10</span><span class="op" id="6350023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6350026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350029">return</span>&nbsp;<span class="num" id="6350036">16</span>&nbsp;<span class="comment" id="6350039">//&nbsp;larger&nbsp;than&nbsp;any&nbsp;legal&nbsp;digit&nbsp;val</span><br>
<span class="lineno"></span><span class="op" id="6350074">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span><span class="keyword" id="6350077">func</span>&nbsp;<span class="ident" id="6350082">isDecimal</span><span class="op" id="6350091">(</span><span class="ident" id="6350092">ch</span>&nbsp;<span class="builtintype" id="6350095">rune</span><span class="op" id="6350099">)</span>&nbsp;<span class="builtintype" id="6350101">bool</span>&nbsp;<span class="op" id="6350106">{</span>&nbsp;<span class="keyword" id="6350108">return</span>&nbsp;<span class="string" id="6350115">&#39;0&#39;</span>&nbsp;<span class="op" id="6350119">&lt;=</span>&nbsp;<span class="ident" id="6350122"><a href="/text/scanner/scanner.go.html#6350092">ch</a></span>&nbsp;<span class="op" id="6350125">&amp;&amp;</span>&nbsp;<span class="ident" id="6350128"><a href="/text/scanner/scanner.go.html#6350092">ch</a></span>&nbsp;<span class="op" id="6350131">&lt;=</span>&nbsp;<span class="string" id="6350134">&#39;9&#39;</span>&nbsp;<span class="op" id="6350138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6350141">func</span>&nbsp;<span class="op" id="6350146">(</span><span class="ident" id="6350147">s</span>&nbsp;<span class="op" id="6350149">*</span><span class="ident" id="6350150"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6350157">)</span>&nbsp;<span class="ident" id="6350159">scanMantissa</span><span class="op" id="6350171">(</span><span class="ident" id="6350172">ch</span>&nbsp;<span class="builtintype" id="6350175">rune</span><span class="op" id="6350179">)</span>&nbsp;<span class="builtintype" id="6350181">rune</span>&nbsp;<span class="op" id="6350186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350189">for</span>&nbsp;<span class="ident" id="6350193"><a href="/text/scanner/scanner.go.html#6350082">isDecimal</a></span><span class="op" id="6350202">(</span><span class="ident" id="6350203"><a href="/text/scanner/scanner.go.html#6350172">ch</a></span><span class="op" id="6350205">)</span>&nbsp;<span class="op" id="6350207">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350211"><a href="/text/scanner/scanner.go.html#6350172">ch</a></span>&nbsp;<span class="op" id="6350214">=</span>&nbsp;<span class="ident" id="6350216"><a href="/text/scanner/scanner.go.html#6350147">s</a></span><span class="op" id="6350217">.</span><span class="ident" id="6350218">next</span><span class="op" id="6350222">(</span><span class="op" id="6350223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6350226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350229">return</span>&nbsp;<span class="ident" id="6350236"><a href="/text/scanner/scanner.go.html#6350172">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6350239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="6350242">func</span>&nbsp;<span class="op" id="6350247">(</span><span class="ident" id="6350248">s</span>&nbsp;<span class="op" id="6350250">*</span><span class="ident" id="6350251"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6350258">)</span>&nbsp;<span class="ident" id="6350260">scanFraction</span><span class="op" id="6350272">(</span><span class="ident" id="6350273">ch</span>&nbsp;<span class="builtintype" id="6350276">rune</span><span class="op" id="6350280">)</span>&nbsp;<span class="builtintype" id="6350282">rune</span>&nbsp;<span class="op" id="6350287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350290">if</span>&nbsp;<span class="ident" id="6350293"><a href="/text/scanner/scanner.go.html#6350273">ch</a></span>&nbsp;<span class="op" id="6350296">==</span>&nbsp;<span class="string" id="6350299">&#39;.&#39;</span>&nbsp;<span class="op" id="6350303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350307"><a href="/text/scanner/scanner.go.html#6350273">ch</a></span>&nbsp;<span class="op" id="6350310">=</span>&nbsp;<span class="ident" id="6350312"><a href="/text/scanner/scanner.go.html#6350248">s</a></span><span class="op" id="6350313">.</span><span class="ident" id="6350314">scanMantissa</span><span class="op" id="6350326">(</span><span class="ident" id="6350327"><a href="/text/scanner/scanner.go.html#6350248">s</a></span><span class="op" id="6350328">.</span><span class="ident" id="6350329">next</span><span class="op" id="6350333">(</span><span class="op" id="6350334">)</span><span class="op" id="6350335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6350338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350341">return</span>&nbsp;<span class="ident" id="6350348"><a href="/text/scanner/scanner.go.html#6350273">ch</a></span><br>
<span class="lineno">390</span><span class="op" id="6350351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6350354">func</span>&nbsp;<span class="op" id="6350359">(</span><span class="ident" id="6350360">s</span>&nbsp;<span class="op" id="6350362">*</span><span class="ident" id="6350363"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6350370">)</span>&nbsp;<span class="ident" id="6350372">scanExponent</span><span class="op" id="6350384">(</span><span class="ident" id="6350385">ch</span>&nbsp;<span class="builtintype" id="6350388">rune</span><span class="op" id="6350392">)</span>&nbsp;<span class="builtintype" id="6350394">rune</span>&nbsp;<span class="op" id="6350399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350402">if</span>&nbsp;<span class="ident" id="6350405"><a href="/text/scanner/scanner.go.html#6350385">ch</a></span>&nbsp;<span class="op" id="6350408">==</span>&nbsp;<span class="string" id="6350411">&#39;e&#39;</span>&nbsp;<span class="op" id="6350415">||</span>&nbsp;<span class="ident" id="6350418"><a href="/text/scanner/scanner.go.html#6350385">ch</a></span>&nbsp;<span class="op" id="6350421">==</span>&nbsp;<span class="string" id="6350424">&#39;E&#39;</span>&nbsp;<span class="op" id="6350428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350432"><a href="/text/scanner/scanner.go.html#6350385">ch</a></span>&nbsp;<span class="op" id="6350435">=</span>&nbsp;<span class="ident" id="6350437"><a href="/text/scanner/scanner.go.html#6350360">s</a></span><span class="op" id="6350438">.</span><span class="ident" id="6350439">next</span><span class="op" id="6350443">(</span><span class="op" id="6350444">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350448">if</span>&nbsp;<span class="ident" id="6350451"><a href="/text/scanner/scanner.go.html#6350385">ch</a></span>&nbsp;<span class="op" id="6350454">==</span>&nbsp;<span class="string" id="6350457">&#39;-&#39;</span>&nbsp;<span class="op" id="6350461">||</span>&nbsp;<span class="ident" id="6350464"><a href="/text/scanner/scanner.go.html#6350385">ch</a></span>&nbsp;<span class="op" id="6350467">==</span>&nbsp;<span class="string" id="6350470">&#39;+&#39;</span>&nbsp;<span class="op" id="6350474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350479"><a href="/text/scanner/scanner.go.html#6350385">ch</a></span>&nbsp;<span class="op" id="6350482">=</span>&nbsp;<span class="ident" id="6350484"><a href="/text/scanner/scanner.go.html#6350360">s</a></span><span class="op" id="6350485">.</span><span class="ident" id="6350486">next</span><span class="op" id="6350490">(</span><span class="op" id="6350491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6350495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350499"><a href="/text/scanner/scanner.go.html#6350385">ch</a></span>&nbsp;<span class="op" id="6350502">=</span>&nbsp;<span class="ident" id="6350504"><a href="/text/scanner/scanner.go.html#6350360">s</a></span><span class="op" id="6350505">.</span><span class="ident" id="6350506">scanMantissa</span><span class="op" id="6350518">(</span><span class="ident" id="6350519"><a href="/text/scanner/scanner.go.html#6350385">ch</a></span><span class="op" id="6350521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6350524">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350527">return</span>&nbsp;<span class="ident" id="6350534"><a href="/text/scanner/scanner.go.html#6350385">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6350537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6350540">func</span>&nbsp;<span class="op" id="6350545">(</span><span class="ident" id="6350546">s</span>&nbsp;<span class="op" id="6350548">*</span><span class="ident" id="6350549"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6350556">)</span>&nbsp;<span class="ident" id="6350558">scanNumber</span><span class="op" id="6350568">(</span><span class="ident" id="6350569">ch</span>&nbsp;<span class="builtintype" id="6350572">rune</span><span class="op" id="6350576">)</span>&nbsp;<span class="op" id="6350578">(</span><span class="builtintype" id="6350579">rune</span><span class="op" id="6350583">,</span>&nbsp;<span class="builtintype" id="6350585">rune</span><span class="op" id="6350589">)</span>&nbsp;<span class="op" id="6350591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6350594">//&nbsp;isDecimal(ch)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350612">if</span>&nbsp;<span class="ident" id="6350615"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6350618">==</span>&nbsp;<span class="string" id="6350621">&#39;0&#39;</span>&nbsp;<span class="op" id="6350625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6350629">//&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350647"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6350650">=</span>&nbsp;<span class="ident" id="6350652"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6350653">.</span><span class="ident" id="6350654">next</span><span class="op" id="6350658">(</span><span class="op" id="6350659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350663">if</span>&nbsp;<span class="ident" id="6350666"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6350669">==</span>&nbsp;<span class="string" id="6350672">&#39;x&#39;</span>&nbsp;<span class="op" id="6350676">||</span>&nbsp;<span class="ident" id="6350679"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6350682">==</span>&nbsp;<span class="string" id="6350685">&#39;X&#39;</span>&nbsp;<span class="op" id="6350689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6350694">//&nbsp;hexadecimal&nbsp;int</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350716"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6350719">=</span>&nbsp;<span class="ident" id="6350721"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6350722">.</span><span class="ident" id="6350723">next</span><span class="op" id="6350727">(</span><span class="op" id="6350728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350733">hasMantissa</span>&nbsp;<span class="op" id="6350745">:=</span>&nbsp;<span class="ident" id="6350748">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350757">for</span>&nbsp;<span class="ident" id="6350761"><a href="/text/scanner/scanner.go.html#6349822">digitVal</a></span><span class="op" id="6350769">(</span><span class="ident" id="6350770"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><span class="op" id="6350772">)</span>&nbsp;<span class="op" id="6350774">&lt;</span>&nbsp;<span class="num" id="6350776">16</span>&nbsp;<span class="op" id="6350779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350785"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6350788">=</span>&nbsp;<span class="ident" id="6350790"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6350791">.</span><span class="ident" id="6350792">next</span><span class="op" id="6350796">(</span><span class="op" id="6350797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350803"><a href="/text/scanner/scanner.go.html#6350733">hasMantissa</a></span>&nbsp;<span class="op" id="6350815">=</span>&nbsp;<span class="ident" id="6350817">true</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6350825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350830">if</span>&nbsp;<span class="op" id="6350833">!</span><span class="ident" id="6350834"><a href="/text/scanner/scanner.go.html#6350733">hasMantissa</a></span>&nbsp;<span class="op" id="6350846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350852"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6350853">.</span><span class="builtintype" id="6350854">error</span><span class="op" id="6350859">(</span><span class="string" id="6350860">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op" id="6350888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6350893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6350897">}</span>&nbsp;<span class="keyword" id="6350899">else</span>&nbsp;<span class="op" id="6350904">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6350909">//&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350934">has8or9</span>&nbsp;<span class="op" id="6350942">:=</span>&nbsp;<span class="ident" id="6350945">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350954">for</span>&nbsp;<span class="ident" id="6350958"><a href="/text/scanner/scanner.go.html#6350082">isDecimal</a></span><span class="op" id="6350967">(</span><span class="ident" id="6350968"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><span class="op" id="6350970">)</span>&nbsp;<span class="op" id="6350972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6350978">if</span>&nbsp;<span class="ident" id="6350981"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6350984">&gt;</span>&nbsp;<span class="string" id="6350986">&#39;7&#39;</span>&nbsp;<span class="op" id="6350990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6350997"><a href="/text/scanner/scanner.go.html#6350934">has8or9</a></span>&nbsp;<span class="op" id="6351005">=</span>&nbsp;<span class="ident" id="6351007">true</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6351016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351022"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351025">=</span>&nbsp;<span class="ident" id="6351027"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6351028">.</span><span class="ident" id="6351029">next</span><span class="op" id="6351033">(</span><span class="op" id="6351034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6351039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351044">if</span>&nbsp;<span class="ident" id="6351047"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6351048">.</span><span class="ident" id="6351049">Mode</span><span class="op" id="6351053">&amp;</span><span class="ident" id="6351054"><a href="/text/scanner/scanner.go.html#6341452">ScanFloats</a></span>&nbsp;<span class="op" id="6351065">!=</span>&nbsp;<span class="num" id="6351068">0</span>&nbsp;<span class="op" id="6351070">&amp;&amp;</span>&nbsp;<span class="op" id="6351073">(</span><span class="ident" id="6351074"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351077">==</span>&nbsp;<span class="string" id="6351080">&#39;.&#39;</span>&nbsp;<span class="op" id="6351084">||</span>&nbsp;<span class="ident" id="6351087"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351090">==</span>&nbsp;<span class="string" id="6351093">&#39;e&#39;</span>&nbsp;<span class="op" id="6351097">||</span>&nbsp;<span class="ident" id="6351100"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351103">==</span>&nbsp;<span class="string" id="6351106">&#39;E&#39;</span><span class="op" id="6351109">)</span>&nbsp;<span class="op" id="6351111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351117">//&nbsp;float</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351130"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351133">=</span>&nbsp;<span class="ident" id="6351135"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6351136">.</span><span class="ident" id="6351137">scanFraction</span><span class="op" id="6351149">(</span><span class="ident" id="6351150"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><span class="op" id="6351152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351158"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351161">=</span>&nbsp;<span class="ident" id="6351163"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6351164">.</span><span class="ident" id="6351165">scanExponent</span><span class="op" id="6351177">(</span><span class="ident" id="6351178"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><span class="op" id="6351180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351186">return</span>&nbsp;<span class="ident" id="6351193"><a href="/text/scanner/scanner.go.html#6341952">Float</a></span><span class="op" id="6351198">,</span>&nbsp;<span class="ident" id="6351200"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6351206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351211">//&nbsp;octal&nbsp;int</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351227">if</span>&nbsp;<span class="ident" id="6351230"><a href="/text/scanner/scanner.go.html#6350934">has8or9</a></span>&nbsp;<span class="op" id="6351238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351244"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6351245">.</span><span class="builtintype" id="6351246">error</span><span class="op" id="6351251">(</span><span class="string" id="6351252">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op" id="6351274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6351279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6351283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351287">return</span>&nbsp;<span class="ident" id="6351294"><a href="/text/scanner/scanner.go.html#6341947">Int</a></span><span class="op" id="6351297">,</span>&nbsp;<span class="ident" id="6351299"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6351303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351306">//&nbsp;decimal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351331"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351334">=</span>&nbsp;<span class="ident" id="6351336"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6351337">.</span><span class="ident" id="6351338">scanMantissa</span><span class="op" id="6351350">(</span><span class="ident" id="6351351"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><span class="op" id="6351353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351356">if</span>&nbsp;<span class="ident" id="6351359"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6351360">.</span><span class="ident" id="6351361">Mode</span><span class="op" id="6351365">&amp;</span><span class="ident" id="6351366"><a href="/text/scanner/scanner.go.html#6341452">ScanFloats</a></span>&nbsp;<span class="op" id="6351377">!=</span>&nbsp;<span class="num" id="6351380">0</span>&nbsp;<span class="op" id="6351382">&amp;&amp;</span>&nbsp;<span class="op" id="6351385">(</span><span class="ident" id="6351386"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351389">==</span>&nbsp;<span class="string" id="6351392">&#39;.&#39;</span>&nbsp;<span class="op" id="6351396">||</span>&nbsp;<span class="ident" id="6351399"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351402">==</span>&nbsp;<span class="string" id="6351405">&#39;e&#39;</span>&nbsp;<span class="op" id="6351409">||</span>&nbsp;<span class="ident" id="6351412"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351415">==</span>&nbsp;<span class="string" id="6351418">&#39;E&#39;</span><span class="op" id="6351421">)</span>&nbsp;<span class="op" id="6351423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351427">//&nbsp;float</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351438"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351441">=</span>&nbsp;<span class="ident" id="6351443"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6351444">.</span><span class="ident" id="6351445">scanFraction</span><span class="op" id="6351457">(</span><span class="ident" id="6351458"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><span class="op" id="6351460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351464"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span>&nbsp;<span class="op" id="6351467">=</span>&nbsp;<span class="ident" id="6351469"><a href="/text/scanner/scanner.go.html#6350546">s</a></span><span class="op" id="6351470">.</span><span class="ident" id="6351471">scanExponent</span><span class="op" id="6351483">(</span><span class="ident" id="6351484"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><span class="op" id="6351486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351490">return</span>&nbsp;<span class="ident" id="6351497"><a href="/text/scanner/scanner.go.html#6341952">Float</a></span><span class="op" id="6351502">,</span>&nbsp;<span class="ident" id="6351504"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6351508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351511">return</span>&nbsp;<span class="ident" id="6351518"><a href="/text/scanner/scanner.go.html#6341947">Int</a></span><span class="op" id="6351521">,</span>&nbsp;<span class="ident" id="6351523"><a href="/text/scanner/scanner.go.html#6350569">ch</a></span><br>
<span class="lineno">450</span><span class="op" id="6351526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6351529">func</span>&nbsp;<span class="op" id="6351534">(</span><span class="ident" id="6351535">s</span>&nbsp;<span class="op" id="6351537">*</span><span class="ident" id="6351538"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6351545">)</span>&nbsp;<span class="ident" id="6351547">scanDigits</span><span class="op" id="6351557">(</span><span class="ident" id="6351558">ch</span>&nbsp;<span class="builtintype" id="6351561">rune</span><span class="op" id="6351565">,</span>&nbsp;<span class="ident" id="6351567">base</span><span class="op" id="6351571">,</span>&nbsp;<span class="ident" id="6351573">n</span>&nbsp;<span class="builtintype" id="6351575">int</span><span class="op" id="6351578">)</span>&nbsp;<span class="builtintype" id="6351580">rune</span>&nbsp;<span class="op" id="6351585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351588">for</span>&nbsp;<span class="ident" id="6351592"><a href="/text/scanner/scanner.go.html#6351573">n</a></span>&nbsp;<span class="op" id="6351594">&gt;</span>&nbsp;<span class="num" id="6351596">0</span>&nbsp;<span class="op" id="6351598">&amp;&amp;</span>&nbsp;<span class="ident" id="6351601"><a href="/text/scanner/scanner.go.html#6349822">digitVal</a></span><span class="op" id="6351609">(</span><span class="ident" id="6351610"><a href="/text/scanner/scanner.go.html#6351558">ch</a></span><span class="op" id="6351612">)</span>&nbsp;<span class="op" id="6351614">&lt;</span>&nbsp;<span class="ident" id="6351616"><a href="/text/scanner/scanner.go.html#6351567">base</a></span>&nbsp;<span class="op" id="6351621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351625"><a href="/text/scanner/scanner.go.html#6351558">ch</a></span>&nbsp;<span class="op" id="6351628">=</span>&nbsp;<span class="ident" id="6351630"><a href="/text/scanner/scanner.go.html#6351535">s</a></span><span class="op" id="6351631">.</span><span class="ident" id="6351632">next</span><span class="op" id="6351636">(</span><span class="op" id="6351637">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351641"><a href="/text/scanner/scanner.go.html#6351573">n</a></span><span class="op" id="6351642">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6351646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351649">if</span>&nbsp;<span class="ident" id="6351652"><a href="/text/scanner/scanner.go.html#6351573">n</a></span>&nbsp;<span class="op" id="6351654">&gt;</span>&nbsp;<span class="num" id="6351656">0</span>&nbsp;<span class="op" id="6351658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351662"><a href="/text/scanner/scanner.go.html#6351535">s</a></span><span class="op" id="6351663">.</span><span class="builtintype" id="6351664">error</span><span class="op" id="6351669">(</span><span class="string" id="6351670">&#34;illegal&nbsp;char&nbsp;escape&#34;</span><span class="op" id="6351691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6351694">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351697">return</span>&nbsp;<span class="ident" id="6351704"><a href="/text/scanner/scanner.go.html#6351558">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6351707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6351710">func</span>&nbsp;<span class="op" id="6351715">(</span><span class="ident" id="6351716">s</span>&nbsp;<span class="op" id="6351718">*</span><span class="ident" id="6351719"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6351726">)</span>&nbsp;<span class="ident" id="6351728">scanEscape</span><span class="op" id="6351738">(</span><span class="ident" id="6351739">quote</span>&nbsp;<span class="builtintype" id="6351745">rune</span><span class="op" id="6351749">)</span>&nbsp;<span class="builtintype" id="6351751">rune</span>&nbsp;<span class="op" id="6351756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351759">ch</span>&nbsp;<span class="op" id="6351762">:=</span>&nbsp;<span class="ident" id="6351765"><a href="/text/scanner/scanner.go.html#6351716">s</a></span><span class="op" id="6351766">.</span><span class="ident" id="6351767">next</span><span class="op" id="6351771">(</span><span class="op" id="6351772">)</span>&nbsp;<span class="comment" id="6351774">//&nbsp;read&nbsp;character&nbsp;after&nbsp;&#39;/&#39;</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351803">switch</span>&nbsp;<span class="ident" id="6351810"><a href="/text/scanner/scanner.go.html#6351759">ch</a></span>&nbsp;<span class="op" id="6351813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351816">case</span>&nbsp;<span class="string" id="6351821">&#39;a&#39;</span><span class="op" id="6351824">,</span>&nbsp;<span class="string" id="6351826">&#39;b&#39;</span><span class="op" id="6351829">,</span>&nbsp;<span class="string" id="6351831">&#39;f&#39;</span><span class="op" id="6351834">,</span>&nbsp;<span class="string" id="6351836">&#39;n&#39;</span><span class="op" id="6351839">,</span>&nbsp;<span class="string" id="6351841">&#39;r&#39;</span><span class="op" id="6351844">,</span>&nbsp;<span class="string" id="6351846">&#39;t&#39;</span><span class="op" id="6351849">,</span>&nbsp;<span class="string" id="6351851">&#39;v&#39;</span><span class="op" id="6351854">,</span>&nbsp;<span class="string" id="6351856">&#39;\\&#39;</span><span class="op" id="6351860">,</span>&nbsp;<span class="ident" id="6351862"><a href="/text/scanner/scanner.go.html#6351739">quote</a></span><span class="op" id="6351867">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6351871">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351890"><a href="/text/scanner/scanner.go.html#6351759">ch</a></span>&nbsp;<span class="op" id="6351893">=</span>&nbsp;<span class="ident" id="6351895"><a href="/text/scanner/scanner.go.html#6351716">s</a></span><span class="op" id="6351896">.</span><span class="ident" id="6351897">next</span><span class="op" id="6351901">(</span><span class="op" id="6351902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351905">case</span>&nbsp;<span class="string" id="6351910">&#39;0&#39;</span><span class="op" id="6351913">,</span>&nbsp;<span class="string" id="6351915">&#39;1&#39;</span><span class="op" id="6351918">,</span>&nbsp;<span class="string" id="6351920">&#39;2&#39;</span><span class="op" id="6351923">,</span>&nbsp;<span class="string" id="6351925">&#39;3&#39;</span><span class="op" id="6351928">,</span>&nbsp;<span class="string" id="6351930">&#39;4&#39;</span><span class="op" id="6351933">,</span>&nbsp;<span class="string" id="6351935">&#39;5&#39;</span><span class="op" id="6351938">,</span>&nbsp;<span class="string" id="6351940">&#39;6&#39;</span><span class="op" id="6351943">,</span>&nbsp;<span class="string" id="6351945">&#39;7&#39;</span><span class="op" id="6351948">:</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351952"><a href="/text/scanner/scanner.go.html#6351759">ch</a></span>&nbsp;<span class="op" id="6351955">=</span>&nbsp;<span class="ident" id="6351957"><a href="/text/scanner/scanner.go.html#6351716">s</a></span><span class="op" id="6351958">.</span><span class="ident" id="6351959">scanDigits</span><span class="op" id="6351969">(</span><span class="ident" id="6351970"><a href="/text/scanner/scanner.go.html#6351759">ch</a></span><span class="op" id="6351972">,</span>&nbsp;<span class="num" id="6351974">8</span><span class="op" id="6351975">,</span>&nbsp;<span class="num" id="6351977">3</span><span class="op" id="6351978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6351981">case</span>&nbsp;<span class="string" id="6351986">&#39;x&#39;</span><span class="op" id="6351989">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6351993"><a href="/text/scanner/scanner.go.html#6351759">ch</a></span>&nbsp;<span class="op" id="6351996">=</span>&nbsp;<span class="ident" id="6351998"><a href="/text/scanner/scanner.go.html#6351716">s</a></span><span class="op" id="6351999">.</span><span class="ident" id="6352000">scanDigits</span><span class="op" id="6352010">(</span><span class="ident" id="6352011"><a href="/text/scanner/scanner.go.html#6351716">s</a></span><span class="op" id="6352012">.</span><span class="ident" id="6352013">next</span><span class="op" id="6352017">(</span><span class="op" id="6352018">)</span><span class="op" id="6352019">,</span>&nbsp;<span class="num" id="6352021">16</span><span class="op" id="6352023">,</span>&nbsp;<span class="num" id="6352025">2</span><span class="op" id="6352026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352029">case</span>&nbsp;<span class="string" id="6352034">&#39;u&#39;</span><span class="op" id="6352037">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352041"><a href="/text/scanner/scanner.go.html#6351759">ch</a></span>&nbsp;<span class="op" id="6352044">=</span>&nbsp;<span class="ident" id="6352046"><a href="/text/scanner/scanner.go.html#6351716">s</a></span><span class="op" id="6352047">.</span><span class="ident" id="6352048">scanDigits</span><span class="op" id="6352058">(</span><span class="ident" id="6352059"><a href="/text/scanner/scanner.go.html#6351716">s</a></span><span class="op" id="6352060">.</span><span class="ident" id="6352061">next</span><span class="op" id="6352065">(</span><span class="op" id="6352066">)</span><span class="op" id="6352067">,</span>&nbsp;<span class="num" id="6352069">16</span><span class="op" id="6352071">,</span>&nbsp;<span class="num" id="6352073">4</span><span class="op" id="6352074">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352077">case</span>&nbsp;<span class="string" id="6352082">&#39;U&#39;</span><span class="op" id="6352085">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352089"><a href="/text/scanner/scanner.go.html#6351759">ch</a></span>&nbsp;<span class="op" id="6352092">=</span>&nbsp;<span class="ident" id="6352094"><a href="/text/scanner/scanner.go.html#6351716">s</a></span><span class="op" id="6352095">.</span><span class="ident" id="6352096">scanDigits</span><span class="op" id="6352106">(</span><span class="ident" id="6352107"><a href="/text/scanner/scanner.go.html#6351716">s</a></span><span class="op" id="6352108">.</span><span class="ident" id="6352109">next</span><span class="op" id="6352113">(</span><span class="op" id="6352114">)</span><span class="op" id="6352115">,</span>&nbsp;<span class="num" id="6352117">16</span><span class="op" id="6352119">,</span>&nbsp;<span class="num" id="6352121">8</span><span class="op" id="6352122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352125">default</span><span class="op" id="6352132">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352136"><a href="/text/scanner/scanner.go.html#6351716">s</a></span><span class="op" id="6352137">.</span><span class="builtintype" id="6352138">error</span><span class="op" id="6352143">(</span><span class="string" id="6352144">&#34;illegal&nbsp;char&nbsp;escape&#34;</span><span class="op" id="6352165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352168">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352171">return</span>&nbsp;<span class="ident" id="6352178"><a href="/text/scanner/scanner.go.html#6351759">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6352181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6352184">func</span>&nbsp;<span class="op" id="6352189">(</span><span class="ident" id="6352190">s</span>&nbsp;<span class="op" id="6352192">*</span><span class="ident" id="6352193"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6352200">)</span>&nbsp;<span class="ident" id="6352202">scanString</span><span class="op" id="6352212">(</span><span class="ident" id="6352213">quote</span>&nbsp;<span class="builtintype" id="6352219">rune</span><span class="op" id="6352223">)</span>&nbsp;<span class="op" id="6352225">(</span><span class="ident" id="6352226">n</span>&nbsp;<span class="builtintype" id="6352228">int</span><span class="op" id="6352231">)</span>&nbsp;<span class="op" id="6352233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352236">ch</span>&nbsp;<span class="op" id="6352239">:=</span>&nbsp;<span class="ident" id="6352242"><a href="/text/scanner/scanner.go.html#6352190">s</a></span><span class="op" id="6352243">.</span><span class="ident" id="6352244">next</span><span class="op" id="6352248">(</span><span class="op" id="6352249">)</span>&nbsp;<span class="comment" id="6352251">//&nbsp;read&nbsp;character&nbsp;after&nbsp;quote</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352282">for</span>&nbsp;<span class="ident" id="6352286"><a href="/text/scanner/scanner.go.html#6352236">ch</a></span>&nbsp;<span class="op" id="6352289">!=</span>&nbsp;<span class="ident" id="6352292"><a href="/text/scanner/scanner.go.html#6352213">quote</a></span>&nbsp;<span class="op" id="6352298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352302">if</span>&nbsp;<span class="ident" id="6352305"><a href="/text/scanner/scanner.go.html#6352236">ch</a></span>&nbsp;<span class="op" id="6352308">==</span>&nbsp;<span class="string" id="6352311">&#39;\n&#39;</span>&nbsp;<span class="op" id="6352316">||</span>&nbsp;<span class="ident" id="6352319"><a href="/text/scanner/scanner.go.html#6352236">ch</a></span>&nbsp;<span class="op" id="6352322">&lt;</span>&nbsp;<span class="num" id="6352324">0</span>&nbsp;<span class="op" id="6352326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352331"><a href="/text/scanner/scanner.go.html#6352190">s</a></span><span class="op" id="6352332">.</span><span class="builtintype" id="6352333">error</span><span class="op" id="6352338">(</span><span class="string" id="6352339">&#34;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="6352363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352368">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352377">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352381">if</span>&nbsp;<span class="ident" id="6352384"><a href="/text/scanner/scanner.go.html#6352236">ch</a></span>&nbsp;<span class="op" id="6352387">==</span>&nbsp;<span class="string" id="6352390">&#39;\\&#39;</span>&nbsp;<span class="op" id="6352395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352400"><a href="/text/scanner/scanner.go.html#6352236">ch</a></span>&nbsp;<span class="op" id="6352403">=</span>&nbsp;<span class="ident" id="6352405"><a href="/text/scanner/scanner.go.html#6352190">s</a></span><span class="op" id="6352406">.</span><span class="ident" id="6352407">scanEscape</span><span class="op" id="6352417">(</span><span class="ident" id="6352418"><a href="/text/scanner/scanner.go.html#6352213">quote</a></span><span class="op" id="6352423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352427">}</span>&nbsp;<span class="keyword" id="6352429">else</span>&nbsp;<span class="op" id="6352434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352439"><a href="/text/scanner/scanner.go.html#6352236">ch</a></span>&nbsp;<span class="op" id="6352442">=</span>&nbsp;<span class="ident" id="6352444"><a href="/text/scanner/scanner.go.html#6352190">s</a></span><span class="op" id="6352445">.</span><span class="ident" id="6352446">next</span><span class="op" id="6352450">(</span><span class="op" id="6352451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352455">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352459"><a href="/text/scanner/scanner.go.html#6352226">n</a></span><span class="op" id="6352460">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352467">return</span><br>
<span class="lineno"></span><span class="op" id="6352474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="6352477">func</span>&nbsp;<span class="op" id="6352482">(</span><span class="ident" id="6352483">s</span>&nbsp;<span class="op" id="6352485">*</span><span class="ident" id="6352486"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6352493">)</span>&nbsp;<span class="ident" id="6352495">scanRawString</span><span class="op" id="6352508">(</span><span class="op" id="6352509">)</span>&nbsp;<span class="op" id="6352511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352514">ch</span>&nbsp;<span class="op" id="6352517">:=</span>&nbsp;<span class="ident" id="6352520"><a href="/text/scanner/scanner.go.html#6352483">s</a></span><span class="op" id="6352521">.</span><span class="ident" id="6352522">next</span><span class="op" id="6352526">(</span><span class="op" id="6352527">)</span>&nbsp;<span class="comment" id="6352529">//&nbsp;read&nbsp;character&nbsp;after&nbsp;&#39;`&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352558">for</span>&nbsp;<span class="ident" id="6352562"><a href="/text/scanner/scanner.go.html#6352514">ch</a></span>&nbsp;<span class="op" id="6352565">!=</span>&nbsp;<span class="string" id="6352568">&#39;`&#39;</span>&nbsp;<span class="op" id="6352572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352576">if</span>&nbsp;<span class="ident" id="6352579"><a href="/text/scanner/scanner.go.html#6352514">ch</a></span>&nbsp;<span class="op" id="6352582">&lt;</span>&nbsp;<span class="num" id="6352584">0</span>&nbsp;<span class="op" id="6352586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352591"><a href="/text/scanner/scanner.go.html#6352483">s</a></span><span class="op" id="6352592">.</span><span class="builtintype" id="6352593">error</span><span class="op" id="6352598">(</span><span class="string" id="6352599">&#34;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="6352623">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352628">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352641"><a href="/text/scanner/scanner.go.html#6352514">ch</a></span>&nbsp;<span class="op" id="6352644">=</span>&nbsp;<span class="ident" id="6352646"><a href="/text/scanner/scanner.go.html#6352483">s</a></span><span class="op" id="6352647">.</span><span class="ident" id="6352648">next</span><span class="op" id="6352652">(</span><span class="op" id="6352653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352656">}</span><br>
<span class="lineno"></span><span class="op" id="6352658">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span><span class="keyword" id="6352661">func</span>&nbsp;<span class="op" id="6352666">(</span><span class="ident" id="6352667">s</span>&nbsp;<span class="op" id="6352669">*</span><span class="ident" id="6352670"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6352677">)</span>&nbsp;<span class="ident" id="6352679">scanChar</span><span class="op" id="6352687">(</span><span class="op" id="6352688">)</span>&nbsp;<span class="op" id="6352690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352693">if</span>&nbsp;<span class="ident" id="6352696"><a href="/text/scanner/scanner.go.html#6352667">s</a></span><span class="op" id="6352697">.</span><span class="ident" id="6352698">scanString</span><span class="op" id="6352708">(</span><span class="string" id="6352709">&#39;\&#39;&#39;</span><span class="op" id="6352713">)</span>&nbsp;<span class="op" id="6352715">!=</span>&nbsp;<span class="num" id="6352718">1</span>&nbsp;<span class="op" id="6352720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352724"><a href="/text/scanner/scanner.go.html#6352667">s</a></span><span class="op" id="6352725">.</span><span class="builtintype" id="6352726">error</span><span class="op" id="6352731">(</span><span class="string" id="6352732">&#34;illegal&nbsp;char&nbsp;literal&#34;</span><span class="op" id="6352754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352757">}</span><br>
<span class="lineno">515</span><span class="op" id="6352759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6352762">func</span>&nbsp;<span class="op" id="6352767">(</span><span class="ident" id="6352768">s</span>&nbsp;<span class="op" id="6352770">*</span><span class="ident" id="6352771"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6352778">)</span>&nbsp;<span class="ident" id="6352780">scanComment</span><span class="op" id="6352791">(</span><span class="ident" id="6352792">ch</span>&nbsp;<span class="builtintype" id="6352795">rune</span><span class="op" id="6352799">)</span>&nbsp;<span class="builtintype" id="6352801">rune</span>&nbsp;<span class="op" id="6352806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6352809">//&nbsp;ch&nbsp;==&nbsp;&#39;/&#39;&nbsp;||&nbsp;ch&nbsp;==&nbsp;&#39;*&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352836">if</span>&nbsp;<span class="ident" id="6352839"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span>&nbsp;<span class="op" id="6352842">==</span>&nbsp;<span class="string" id="6352845">&#39;/&#39;</span>&nbsp;<span class="op" id="6352849">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6352853">//&nbsp;line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352871"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span>&nbsp;<span class="op" id="6352874">=</span>&nbsp;<span class="ident" id="6352876"><a href="/text/scanner/scanner.go.html#6352768">s</a></span><span class="op" id="6352877">.</span><span class="ident" id="6352878">next</span><span class="op" id="6352882">(</span><span class="op" id="6352883">)</span>&nbsp;<span class="comment" id="6352885">//&nbsp;read&nbsp;character&nbsp;after&nbsp;&#34;//&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352916">for</span>&nbsp;<span class="ident" id="6352920"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span>&nbsp;<span class="op" id="6352923">!=</span>&nbsp;<span class="string" id="6352926">&#39;\n&#39;</span>&nbsp;<span class="op" id="6352931">&amp;&amp;</span>&nbsp;<span class="ident" id="6352934"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span>&nbsp;<span class="op" id="6352937">&gt;=</span>&nbsp;<span class="num" id="6352940">0</span>&nbsp;<span class="op" id="6352942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6352947"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span>&nbsp;<span class="op" id="6352950">=</span>&nbsp;<span class="ident" id="6352952"><a href="/text/scanner/scanner.go.html#6352768">s</a></span><span class="op" id="6352953">.</span><span class="ident" id="6352954">next</span><span class="op" id="6352958">(</span><span class="op" id="6352959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352963">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6352967">return</span>&nbsp;<span class="ident" id="6352974"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6352978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6352982">//&nbsp;general&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353002"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span>&nbsp;<span class="op" id="6353005">=</span>&nbsp;<span class="ident" id="6353007"><a href="/text/scanner/scanner.go.html#6352768">s</a></span><span class="op" id="6353008">.</span><span class="ident" id="6353009">next</span><span class="op" id="6353013">(</span><span class="op" id="6353014">)</span>&nbsp;<span class="comment" id="6353016">//&nbsp;read&nbsp;character&nbsp;after&nbsp;&#34;/*&#34;</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353046">for</span>&nbsp;<span class="op" id="6353050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353054">if</span>&nbsp;<span class="ident" id="6353057"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span>&nbsp;<span class="op" id="6353060">&lt;</span>&nbsp;<span class="num" id="6353062">0</span>&nbsp;<span class="op" id="6353064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353069"><a href="/text/scanner/scanner.go.html#6352768">s</a></span><span class="op" id="6353070">.</span><span class="builtintype" id="6353071">error</span><span class="op" id="6353076">(</span><span class="string" id="6353077">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="6353101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353106">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6353114">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353118">ch0</span>&nbsp;<span class="op" id="6353122">:=</span>&nbsp;<span class="ident" id="6353125"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353130"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span>&nbsp;<span class="op" id="6353133">=</span>&nbsp;<span class="ident" id="6353135"><a href="/text/scanner/scanner.go.html#6352768">s</a></span><span class="op" id="6353136">.</span><span class="ident" id="6353137">next</span><span class="op" id="6353141">(</span><span class="op" id="6353142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353146">if</span>&nbsp;<span class="ident" id="6353149"><a href="/text/scanner/scanner.go.html#6353118">ch0</a></span>&nbsp;<span class="op" id="6353153">==</span>&nbsp;<span class="string" id="6353156">&#39;*&#39;</span>&nbsp;<span class="op" id="6353160">&amp;&amp;</span>&nbsp;<span class="ident" id="6353163"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span>&nbsp;<span class="op" id="6353166">==</span>&nbsp;<span class="string" id="6353169">&#39;/&#39;</span>&nbsp;<span class="op" id="6353173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353178"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span>&nbsp;<span class="op" id="6353181">=</span>&nbsp;<span class="ident" id="6353183"><a href="/text/scanner/scanner.go.html#6352768">s</a></span><span class="op" id="6353184">.</span><span class="ident" id="6353185">next</span><span class="op" id="6353189">(</span><span class="op" id="6353190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353195">break</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6353203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6353206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353209">return</span>&nbsp;<span class="ident" id="6353216"><a href="/text/scanner/scanner.go.html#6352792">ch</a></span><br>
<span class="lineno"></span><span class="op" id="6353219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span><span class="comment" id="6353222">//&nbsp;Scan&nbsp;reads&nbsp;the&nbsp;next&nbsp;token&nbsp;or&nbsp;Unicode&nbsp;character&nbsp;from&nbsp;source&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="6353300">//&nbsp;It&nbsp;only&nbsp;recognizes&nbsp;tokens&nbsp;t&nbsp;for&nbsp;which&nbsp;the&nbsp;respective&nbsp;Mode&nbsp;bit&nbsp;(1&lt;&lt;-t)&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="comment" id="6353381">//&nbsp;It&nbsp;returns&nbsp;EOF&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;source.&nbsp;It&nbsp;reports&nbsp;scanner&nbsp;errors&nbsp;(read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6353461">//&nbsp;token&nbsp;errors)&nbsp;by&nbsp;calling&nbsp;s.Error,&nbsp;if&nbsp;not&nbsp;nil;&nbsp;otherwise&nbsp;it&nbsp;prints&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="6353539">//&nbsp;message&nbsp;to&nbsp;os.Stderr.</span><br>
<span class="lineno">550</span><span class="keyword" id="6353564">func</span>&nbsp;<span class="op" id="6353569">(</span><span class="ident" id="6353570">s</span>&nbsp;<span class="op" id="6353572">*</span><span class="ident" id="6353573"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6353580">)</span>&nbsp;<span class="ident" id="6353582">Scan</span><span class="op" id="6353586">(</span><span class="op" id="6353587">)</span>&nbsp;<span class="builtintype" id="6353589">rune</span>&nbsp;<span class="op" id="6353594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353597">ch</span>&nbsp;<span class="op" id="6353600">:=</span>&nbsp;<span class="ident" id="6353603"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353604">.</span><span class="ident" id="6353605">Peek</span><span class="op" id="6353609">(</span><span class="op" id="6353610">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6353614">//&nbsp;reset&nbsp;token&nbsp;text&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353644"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353645">.</span><span class="ident" id="6353646">tokPos</span>&nbsp;<span class="op" id="6353653">=</span>&nbsp;<span class="op" id="6353655">-</span><span class="num" id="6353656">1</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353659"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353660">.</span><span class="ident" id="6353661">Line</span>&nbsp;<span class="op" id="6353666">=</span>&nbsp;<span class="num" id="6353668">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="6353671">redo</span><span class="op" id="6353675">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6353678">//&nbsp;skip&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353699">for</span>&nbsp;<span class="ident" id="6353703"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353704">.</span><span class="ident" id="6353705">Whitespace</span><span class="op" id="6353715">&amp;</span><span class="op" id="6353716">(</span><span class="num" id="6353717">1</span><span class="op" id="6353718">&lt;&lt;</span><span class="builtintype" id="6353720">uint</span><span class="op" id="6353724">(</span><span class="ident" id="6353725"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><span class="op" id="6353727">)</span><span class="op" id="6353728">)</span>&nbsp;<span class="op" id="6353730">!=</span>&nbsp;<span class="num" id="6353733">0</span>&nbsp;<span class="op" id="6353735">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353739"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6353742">=</span>&nbsp;<span class="ident" id="6353744"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353745">.</span><span class="ident" id="6353746">next</span><span class="op" id="6353750">(</span><span class="op" id="6353751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6353754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6353758">//&nbsp;start&nbsp;collecting&nbsp;token&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353790"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353791">.</span><span class="ident" id="6353792">tokBuf</span><span class="op" id="6353798">.</span><span class="ident" id="6353799">Reset</span><span class="op" id="6353804">(</span><span class="op" id="6353805">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353808"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353809">.</span><span class="ident" id="6353810">tokPos</span>&nbsp;<span class="op" id="6353817">=</span>&nbsp;<span class="ident" id="6353819"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353820">.</span><span class="ident" id="6353821">srcPos</span>&nbsp;<span class="op" id="6353828">-</span>&nbsp;<span class="ident" id="6353830"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353831">.</span><span class="ident" id="6353832">lastCharLen</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6353846">//&nbsp;set&nbsp;token&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6353869">//&nbsp;(this&nbsp;is&nbsp;a&nbsp;slightly&nbsp;optimized&nbsp;version&nbsp;of&nbsp;the&nbsp;code&nbsp;in&nbsp;Pos())</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6353933"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353934">.</span><span class="ident" id="6353935">Offset</span>&nbsp;<span class="op" id="6353942">=</span>&nbsp;<span class="ident" id="6353944"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353945">.</span><span class="ident" id="6353946">srcBufOffset</span>&nbsp;<span class="op" id="6353959">+</span>&nbsp;<span class="ident" id="6353961"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353962">.</span><span class="ident" id="6353963">tokPos</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6353971">if</span>&nbsp;<span class="ident" id="6353974"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6353975">.</span><span class="ident" id="6353976">column</span>&nbsp;<span class="op" id="6353983">&gt;</span>&nbsp;<span class="num" id="6353985">0</span>&nbsp;<span class="op" id="6353987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6353991">//&nbsp;common&nbsp;case:&nbsp;last&nbsp;character&nbsp;was&nbsp;not&nbsp;a&nbsp;&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354039"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354040">.</span><span class="ident" id="6354041">Line</span>&nbsp;<span class="op" id="6354046">=</span>&nbsp;<span class="ident" id="6354048"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354049">.</span><span class="ident" id="6354050">line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354057"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354058">.</span><span class="ident" id="6354059">Column</span>&nbsp;<span class="op" id="6354066">=</span>&nbsp;<span class="ident" id="6354068"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354069">.</span><span class="ident" id="6354070">column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354078">}</span>&nbsp;<span class="keyword" id="6354080">else</span>&nbsp;<span class="op" id="6354085">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6354089">//&nbsp;last&nbsp;character&nbsp;was&nbsp;a&nbsp;&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6354120">//&nbsp;(we&nbsp;cannot&nbsp;be&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6354170">//&nbsp;since&nbsp;we&nbsp;have&nbsp;called&nbsp;next()&nbsp;at&nbsp;least&nbsp;once)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354218"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354219">.</span><span class="ident" id="6354220">Line</span>&nbsp;<span class="op" id="6354225">=</span>&nbsp;<span class="ident" id="6354227"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354228">.</span><span class="ident" id="6354229">line</span>&nbsp;<span class="op" id="6354234">-</span>&nbsp;<span class="num" id="6354236">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354240"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354241">.</span><span class="ident" id="6354242">Column</span>&nbsp;<span class="op" id="6354249">=</span>&nbsp;<span class="ident" id="6354251"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354252">.</span><span class="ident" id="6354253">lastLineLen</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6354270">//&nbsp;determine&nbsp;token&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354296">tok</span>&nbsp;<span class="op" id="6354300">:=</span>&nbsp;<span class="ident" id="6354303"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354307">switch</span>&nbsp;<span class="op" id="6354314">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354317">case</span>&nbsp;<span class="ident" id="6354322"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354323">.</span><span class="ident" id="6354324">isIdentRune</span><span class="op" id="6354335">(</span><span class="ident" id="6354336"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><span class="op" id="6354338">,</span>&nbsp;<span class="num" id="6354340">0</span><span class="op" id="6354341">)</span><span class="op" id="6354342">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354346">if</span>&nbsp;<span class="ident" id="6354349"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354350">.</span><span class="ident" id="6354351">Mode</span><span class="op" id="6354355">&amp;</span><span class="ident" id="6354356"><a href="/text/scanner/scanner.go.html#6341394">ScanIdents</a></span>&nbsp;<span class="op" id="6354367">!=</span>&nbsp;<span class="num" id="6354370">0</span>&nbsp;<span class="op" id="6354372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354377"><a href="/text/scanner/scanner.go.html#6354296">tok</a></span>&nbsp;<span class="op" id="6354381">=</span>&nbsp;<span class="ident" id="6354383"><a href="/text/scanner/scanner.go.html#6341940">Ident</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354392"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354395">=</span>&nbsp;<span class="ident" id="6354397"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354398">.</span><span class="ident" id="6354399">scanIdentifier</span><span class="op" id="6354413">(</span><span class="op" id="6354414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354418">}</span>&nbsp;<span class="keyword" id="6354420">else</span>&nbsp;<span class="op" id="6354425">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354430"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354433">=</span>&nbsp;<span class="ident" id="6354435"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354436">.</span><span class="ident" id="6354437">next</span><span class="op" id="6354441">(</span><span class="op" id="6354442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354449">case</span>&nbsp;<span class="ident" id="6354454"><a href="/text/scanner/scanner.go.html#6350082">isDecimal</a></span><span class="op" id="6354463">(</span><span class="ident" id="6354464"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><span class="op" id="6354466">)</span><span class="op" id="6354467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354471">if</span>&nbsp;<span class="ident" id="6354474"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354475">.</span><span class="ident" id="6354476">Mode</span><span class="op" id="6354480">&amp;</span><span class="op" id="6354481">(</span><span class="ident" id="6354482"><a href="/text/scanner/scanner.go.html#6341424">ScanInts</a></span><span class="op" id="6354490">|</span><span class="ident" id="6354491"><a href="/text/scanner/scanner.go.html#6341452">ScanFloats</a></span><span class="op" id="6354501">)</span>&nbsp;<span class="op" id="6354503">!=</span>&nbsp;<span class="num" id="6354506">0</span>&nbsp;<span class="op" id="6354508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354513"><a href="/text/scanner/scanner.go.html#6354296">tok</a></span><span class="op" id="6354516">,</span>&nbsp;<span class="ident" id="6354518"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354521">=</span>&nbsp;<span class="ident" id="6354523"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354524">.</span><span class="ident" id="6354525">scanNumber</span><span class="op" id="6354535">(</span><span class="ident" id="6354536"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><span class="op" id="6354538">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354542">}</span>&nbsp;<span class="keyword" id="6354544">else</span>&nbsp;<span class="op" id="6354549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354554"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354557">=</span>&nbsp;<span class="ident" id="6354559"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354560">.</span><span class="ident" id="6354561">next</span><span class="op" id="6354565">(</span><span class="op" id="6354566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354573">default</span><span class="op" id="6354580">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354584">switch</span>&nbsp;<span class="ident" id="6354591"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354594">{</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354598">case</span>&nbsp;<span class="string" id="6354603">&#39;&#34;&#39;</span><span class="op" id="6354606">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354611">if</span>&nbsp;<span class="ident" id="6354614"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354615">.</span><span class="ident" id="6354616">Mode</span><span class="op" id="6354620">&amp;</span><span class="ident" id="6354621"><a href="/text/scanner/scanner.go.html#6341528">ScanStrings</a></span>&nbsp;<span class="op" id="6354633">!=</span>&nbsp;<span class="num" id="6354636">0</span>&nbsp;<span class="op" id="6354638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354644"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354645">.</span><span class="ident" id="6354646">scanString</span><span class="op" id="6354656">(</span><span class="string" id="6354657">&#39;&#34;&#39;</span><span class="op" id="6354660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354666"><a href="/text/scanner/scanner.go.html#6354296">tok</a></span>&nbsp;<span class="op" id="6354670">=</span>&nbsp;<span class="ident" id="6354672"><a href="/text/scanner/scanner.go.html#6341965">String</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354682">}</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354687"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354690">=</span>&nbsp;<span class="ident" id="6354692"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354693">.</span><span class="ident" id="6354694">next</span><span class="op" id="6354698">(</span><span class="op" id="6354699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354703">case</span>&nbsp;<span class="string" id="6354708">&#39;\&#39;&#39;</span><span class="op" id="6354712">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354717">if</span>&nbsp;<span class="ident" id="6354720"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354721">.</span><span class="ident" id="6354722">Mode</span><span class="op" id="6354726">&amp;</span><span class="ident" id="6354727"><a href="/text/scanner/scanner.go.html#6341499">ScanChars</a></span>&nbsp;<span class="op" id="6354737">!=</span>&nbsp;<span class="num" id="6354740">0</span>&nbsp;<span class="op" id="6354742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354748"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354749">.</span><span class="ident" id="6354750">scanChar</span><span class="op" id="6354758">(</span><span class="op" id="6354759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354765"><a href="/text/scanner/scanner.go.html#6354296">tok</a></span>&nbsp;<span class="op" id="6354769">=</span>&nbsp;<span class="ident" id="6354771"><a href="/text/scanner/scanner.go.html#6341959">Char</a></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354784"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354787">=</span>&nbsp;<span class="ident" id="6354789"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354790">.</span><span class="ident" id="6354791">next</span><span class="op" id="6354795">(</span><span class="op" id="6354796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354800">case</span>&nbsp;<span class="string" id="6354805">&#39;.&#39;</span><span class="op" id="6354808">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354813"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354816">=</span>&nbsp;<span class="ident" id="6354818"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354819">.</span><span class="ident" id="6354820">next</span><span class="op" id="6354824">(</span><span class="op" id="6354825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354830">if</span>&nbsp;<span class="ident" id="6354833"><a href="/text/scanner/scanner.go.html#6350082">isDecimal</a></span><span class="op" id="6354842">(</span><span class="ident" id="6354843"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><span class="op" id="6354845">)</span>&nbsp;<span class="op" id="6354847">&amp;&amp;</span>&nbsp;<span class="ident" id="6354850"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354851">.</span><span class="ident" id="6354852">Mode</span><span class="op" id="6354856">&amp;</span><span class="ident" id="6354857"><a href="/text/scanner/scanner.go.html#6341452">ScanFloats</a></span>&nbsp;<span class="op" id="6354868">!=</span>&nbsp;<span class="num" id="6354871">0</span>&nbsp;<span class="op" id="6354873">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354879"><a href="/text/scanner/scanner.go.html#6354296">tok</a></span>&nbsp;<span class="op" id="6354883">=</span>&nbsp;<span class="ident" id="6354885"><a href="/text/scanner/scanner.go.html#6341952">Float</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354895"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354898">=</span>&nbsp;<span class="ident" id="6354900"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354901">.</span><span class="ident" id="6354902">scanMantissa</span><span class="op" id="6354914">(</span><span class="ident" id="6354915"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><span class="op" id="6354917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354923"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354926">=</span>&nbsp;<span class="ident" id="6354928"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354929">.</span><span class="ident" id="6354930">scanExponent</span><span class="op" id="6354942">(</span><span class="ident" id="6354943"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><span class="op" id="6354945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6354950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354954">case</span>&nbsp;<span class="string" id="6354959">&#39;/&#39;</span><span class="op" id="6354962">:</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6354967"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354970">=</span>&nbsp;<span class="ident" id="6354972"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6354973">.</span><span class="ident" id="6354974">next</span><span class="op" id="6354978">(</span><span class="op" id="6354979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6354984">if</span>&nbsp;<span class="op" id="6354987">(</span><span class="ident" id="6354988"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6354991">==</span>&nbsp;<span class="string" id="6354994">&#39;/&#39;</span>&nbsp;<span class="op" id="6354998">||</span>&nbsp;<span class="ident" id="6355001"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6355004">==</span>&nbsp;<span class="string" id="6355007">&#39;*&#39;</span><span class="op" id="6355010">)</span>&nbsp;<span class="op" id="6355012">&amp;&amp;</span>&nbsp;<span class="ident" id="6355015"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355016">.</span><span class="ident" id="6355017">Mode</span><span class="op" id="6355021">&amp;</span><span class="ident" id="6355022"><a href="/text/scanner/scanner.go.html#6341593">ScanComments</a></span>&nbsp;<span class="op" id="6355035">!=</span>&nbsp;<span class="num" id="6355038">0</span>&nbsp;<span class="op" id="6355040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355046">if</span>&nbsp;<span class="ident" id="6355049"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355050">.</span><span class="ident" id="6355051">Mode</span><span class="op" id="6355055">&amp;</span><span class="ident" id="6355056"><a href="/text/scanner/scanner.go.html#6341625">SkipComments</a></span>&nbsp;<span class="op" id="6355069">!=</span>&nbsp;<span class="num" id="6355072">0</span>&nbsp;<span class="op" id="6355074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355081"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355082">.</span><span class="ident" id="6355083">tokPos</span>&nbsp;<span class="op" id="6355090">=</span>&nbsp;<span class="op" id="6355092">-</span><span class="num" id="6355093">1</span>&nbsp;<span class="comment" id="6355095">//&nbsp;don&#39;t&nbsp;collect&nbsp;token&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355128"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6355131">=</span>&nbsp;<span class="ident" id="6355133"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355134">.</span><span class="ident" id="6355135">scanComment</span><span class="op" id="6355146">(</span><span class="ident" id="6355147"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><span class="op" id="6355149">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355156">goto</span>&nbsp;<span class="ident" id="6355161">redo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6355170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355176"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6355179">=</span>&nbsp;<span class="ident" id="6355181"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355182">.</span><span class="ident" id="6355183">scanComment</span><span class="op" id="6355194">(</span><span class="ident" id="6355195"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><span class="op" id="6355197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355203"><a href="/text/scanner/scanner.go.html#6354296">tok</a></span>&nbsp;<span class="op" id="6355207">=</span>&nbsp;<span class="ident" id="6355209"><a href="/text/scanner/scanner.go.html#6341984">Comment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6355220">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355224">case</span>&nbsp;<span class="string" id="6355229">&#39;`&#39;</span><span class="op" id="6355232">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355237">if</span>&nbsp;<span class="ident" id="6355240"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355241">.</span><span class="ident" id="6355242">Mode</span><span class="op" id="6355246">&amp;</span><span class="ident" id="6355247"><a href="/text/scanner/scanner.go.html#6341559">ScanRawStrings</a></span>&nbsp;<span class="op" id="6355262">!=</span>&nbsp;<span class="num" id="6355265">0</span>&nbsp;<span class="op" id="6355267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355273"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355274">.</span><span class="ident" id="6355275">scanRawString</span><span class="op" id="6355288">(</span><span class="op" id="6355289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355295"><a href="/text/scanner/scanner.go.html#6354296">tok</a></span>&nbsp;<span class="op" id="6355299">=</span>&nbsp;<span class="ident" id="6355301"><a href="/text/scanner/scanner.go.html#6341965">String</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6355311">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355316"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6355319">=</span>&nbsp;<span class="ident" id="6355321"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355322">.</span><span class="ident" id="6355323">next</span><span class="op" id="6355327">(</span><span class="op" id="6355328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355332">default</span><span class="op" id="6355339">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355344"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span>&nbsp;<span class="op" id="6355347">=</span>&nbsp;<span class="ident" id="6355349"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355350">.</span><span class="ident" id="6355351">next</span><span class="op" id="6355355">(</span><span class="op" id="6355356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6355360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6355363">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6355367">//&nbsp;end&nbsp;of&nbsp;token&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355389"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355390">.</span><span class="ident" id="6355391">tokEnd</span>&nbsp;<span class="op" id="6355398">=</span>&nbsp;<span class="ident" id="6355400"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355401">.</span><span class="ident" id="6355402">srcPos</span>&nbsp;<span class="op" id="6355409">-</span>&nbsp;<span class="ident" id="6355411"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355412">.</span><span class="ident" id="6355413">lastCharLen</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355427"><a href="/text/scanner/scanner.go.html#6353570">s</a></span><span class="op" id="6355428">.</span><span class="ident" id="6355429">ch</span>&nbsp;<span class="op" id="6355432">=</span>&nbsp;<span class="ident" id="6355434"><a href="/text/scanner/scanner.go.html#6353597">ch</a></span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355438">return</span>&nbsp;<span class="ident" id="6355445"><a href="/text/scanner/scanner.go.html#6354296">tok</a></span><br>
<span class="lineno"></span><span class="op" id="6355449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6355452">//&nbsp;Pos&nbsp;returns&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;character&nbsp;immediately&nbsp;after</span><br>
<span class="lineno"></span><span class="comment" id="6355515">//&nbsp;the&nbsp;character&nbsp;or&nbsp;token&nbsp;returned&nbsp;by&nbsp;the&nbsp;last&nbsp;call&nbsp;to&nbsp;Next&nbsp;or&nbsp;Scan.</span><br>
<span class="lineno">650</span><span class="keyword" id="6355584">func</span>&nbsp;<span class="op" id="6355589">(</span><span class="ident" id="6355590">s</span>&nbsp;<span class="op" id="6355592">*</span><span class="ident" id="6355593"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6355600">)</span>&nbsp;<span class="ident" id="6355602">Pos</span><span class="op" id="6355605">(</span><span class="op" id="6355606">)</span>&nbsp;<span class="op" id="6355608">(</span><span class="ident" id="6355609">pos</span>&nbsp;<span class="ident" id="6355613"><a href="/text/scanner/scanner.go.html#6340233">Position</a></span><span class="op" id="6355621">)</span>&nbsp;<span class="op" id="6355623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355626"><a href="/text/scanner/scanner.go.html#6355609">pos</a></span><span class="op" id="6355629">.</span><span class="ident" id="6355630">Filename</span>&nbsp;<span class="op" id="6355639">=</span>&nbsp;<span class="ident" id="6355641"><a href="/text/scanner/scanner.go.html#6355590">s</a></span><span class="op" id="6355642">.</span><span class="ident" id="6355643">Filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355653"><a href="/text/scanner/scanner.go.html#6355609">pos</a></span><span class="op" id="6355656">.</span><span class="ident" id="6355657">Offset</span>&nbsp;<span class="op" id="6355664">=</span>&nbsp;<span class="ident" id="6355666"><a href="/text/scanner/scanner.go.html#6355590">s</a></span><span class="op" id="6355667">.</span><span class="ident" id="6355668">srcBufOffset</span>&nbsp;<span class="op" id="6355681">+</span>&nbsp;<span class="ident" id="6355683"><a href="/text/scanner/scanner.go.html#6355590">s</a></span><span class="op" id="6355684">.</span><span class="ident" id="6355685">srcPos</span>&nbsp;<span class="op" id="6355692">-</span>&nbsp;<span class="ident" id="6355694"><a href="/text/scanner/scanner.go.html#6355590">s</a></span><span class="op" id="6355695">.</span><span class="ident" id="6355696">lastCharLen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355709">switch</span>&nbsp;<span class="op" id="6355716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355719">case</span>&nbsp;<span class="ident" id="6355724"><a href="/text/scanner/scanner.go.html#6355590">s</a></span><span class="op" id="6355725">.</span><span class="ident" id="6355726">column</span>&nbsp;<span class="op" id="6355733">&gt;</span>&nbsp;<span class="num" id="6355735">0</span><span class="op" id="6355736">:</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6355740">//&nbsp;common&nbsp;case:&nbsp;last&nbsp;character&nbsp;was&nbsp;not&nbsp;a&nbsp;&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355788"><a href="/text/scanner/scanner.go.html#6355609">pos</a></span><span class="op" id="6355791">.</span><span class="ident" id="6355792">Line</span>&nbsp;<span class="op" id="6355797">=</span>&nbsp;<span class="ident" id="6355799"><a href="/text/scanner/scanner.go.html#6355590">s</a></span><span class="op" id="6355800">.</span><span class="ident" id="6355801">line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355808"><a href="/text/scanner/scanner.go.html#6355609">pos</a></span><span class="op" id="6355811">.</span><span class="ident" id="6355812">Column</span>&nbsp;<span class="op" id="6355819">=</span>&nbsp;<span class="ident" id="6355821"><a href="/text/scanner/scanner.go.html#6355590">s</a></span><span class="op" id="6355822">.</span><span class="ident" id="6355823">column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355831">case</span>&nbsp;<span class="ident" id="6355836"><a href="/text/scanner/scanner.go.html#6355590">s</a></span><span class="op" id="6355837">.</span><span class="ident" id="6355838">lastLineLen</span>&nbsp;<span class="op" id="6355850">&gt;</span>&nbsp;<span class="num" id="6355852">0</span><span class="op" id="6355853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6355857">//&nbsp;last&nbsp;character&nbsp;was&nbsp;a&nbsp;&#39;\n&#39;</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355888"><a href="/text/scanner/scanner.go.html#6355609">pos</a></span><span class="op" id="6355891">.</span><span class="ident" id="6355892">Line</span>&nbsp;<span class="op" id="6355897">=</span>&nbsp;<span class="ident" id="6355899"><a href="/text/scanner/scanner.go.html#6355590">s</a></span><span class="op" id="6355900">.</span><span class="ident" id="6355901">line</span>&nbsp;<span class="op" id="6355906">-</span>&nbsp;<span class="num" id="6355908">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355912"><a href="/text/scanner/scanner.go.html#6355609">pos</a></span><span class="op" id="6355915">.</span><span class="ident" id="6355916">Column</span>&nbsp;<span class="op" id="6355923">=</span>&nbsp;<span class="ident" id="6355925"><a href="/text/scanner/scanner.go.html#6355590">s</a></span><span class="op" id="6355926">.</span><span class="ident" id="6355927">lastLineLen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6355940">default</span><span class="op" id="6355947">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6355951">//&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6355987"><a href="/text/scanner/scanner.go.html#6355609">pos</a></span><span class="op" id="6355990">.</span><span class="ident" id="6355991">Line</span>&nbsp;<span class="op" id="6355996">=</span>&nbsp;<span class="num" id="6355998">1</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356002"><a href="/text/scanner/scanner.go.html#6355609">pos</a></span><span class="op" id="6356005">.</span><span class="ident" id="6356006">Column</span>&nbsp;<span class="op" id="6356013">=</span>&nbsp;<span class="num" id="6356015">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6356018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356021">return</span><br>
<span class="lineno"></span><span class="op" id="6356028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">670</span><span class="comment" id="6356031">//&nbsp;TokenText&nbsp;returns&nbsp;the&nbsp;string&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;most&nbsp;recently&nbsp;scanned&nbsp;token.</span><br>
<span class="lineno"></span><span class="comment" id="6356113">//&nbsp;Valid&nbsp;after&nbsp;calling&nbsp;Scan().</span><br>
<span class="lineno"></span><span class="keyword" id="6356144">func</span>&nbsp;<span class="op" id="6356149">(</span><span class="ident" id="6356150">s</span>&nbsp;<span class="op" id="6356152">*</span><span class="ident" id="6356153"><a href="/text/scanner/scanner.go.html#6342742">Scanner</a></span><span class="op" id="6356160">)</span>&nbsp;<span class="ident" id="6356162">TokenText</span><span class="op" id="6356171">(</span><span class="op" id="6356172">)</span>&nbsp;<span class="builtintype" id="6356174">string</span>&nbsp;<span class="op" id="6356181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356184">if</span>&nbsp;<span class="ident" id="6356187"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356188">.</span><span class="ident" id="6356189">tokPos</span>&nbsp;<span class="op" id="6356196">&lt;</span>&nbsp;<span class="num" id="6356198">0</span>&nbsp;<span class="op" id="6356200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6356204">//&nbsp;no&nbsp;token&nbsp;text</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356223">return</span>&nbsp;<span class="string" id="6356230">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6356234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356238">if</span>&nbsp;<span class="ident" id="6356241"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356242">.</span><span class="ident" id="6356243">tokEnd</span>&nbsp;<span class="op" id="6356250">&lt;</span>&nbsp;<span class="num" id="6356252">0</span>&nbsp;<span class="op" id="6356254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6356258">//&nbsp;if&nbsp;EOF&nbsp;was&nbsp;reached,&nbsp;s.tokEnd&nbsp;is&nbsp;set&nbsp;to&nbsp;-1&nbsp;(s.srcPos&nbsp;==&nbsp;0)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356321"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356322">.</span><span class="ident" id="6356323">tokEnd</span>&nbsp;<span class="op" id="6356330">=</span>&nbsp;<span class="ident" id="6356332"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356333">.</span><span class="ident" id="6356334">tokPos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6356342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356346">if</span>&nbsp;<span class="ident" id="6356349"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356350">.</span><span class="ident" id="6356351">tokBuf</span><span class="op" id="6356357">.</span><span class="ident" id="6356358">Len</span><span class="op" id="6356361">(</span><span class="op" id="6356362">)</span>&nbsp;<span class="op" id="6356364">==</span>&nbsp;<span class="num" id="6356367">0</span>&nbsp;<span class="op" id="6356369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6356373">//&nbsp;common&nbsp;case:&nbsp;the&nbsp;entire&nbsp;token&nbsp;text&nbsp;is&nbsp;still&nbsp;in&nbsp;srcBuf</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356432">return</span>&nbsp;<span class="builtintype" id="6356439">string</span><span class="op" id="6356445">(</span><span class="ident" id="6356446"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356447">.</span><span class="ident" id="6356448">srcBuf</span><span class="op" id="6356454">[</span><span class="ident" id="6356455"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356456">.</span><span class="ident" id="6356457">tokPos</span><span class="op" id="6356463">:</span><span class="ident" id="6356464"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356465">.</span><span class="ident" id="6356466">tokEnd</span><span class="op" id="6356472">]</span><span class="op" id="6356473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6356476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6356480">//&nbsp;part&nbsp;of&nbsp;the&nbsp;token&nbsp;text&nbsp;was&nbsp;saved&nbsp;in&nbsp;tokBuf:&nbsp;save&nbsp;the&nbsp;rest&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6356545">//&nbsp;tokBuf&nbsp;as&nbsp;well&nbsp;and&nbsp;return&nbsp;its&nbsp;content</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356587"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356588">.</span><span class="ident" id="6356589">tokBuf</span><span class="op" id="6356595">.</span><span class="ident" id="6356596">Write</span><span class="op" id="6356601">(</span><span class="ident" id="6356602"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356603">.</span><span class="ident" id="6356604">srcBuf</span><span class="op" id="6356610">[</span><span class="ident" id="6356611"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356612">.</span><span class="ident" id="6356613">tokPos</span><span class="op" id="6356619">:</span><span class="ident" id="6356620"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356621">.</span><span class="ident" id="6356622">tokEnd</span><span class="op" id="6356628">]</span><span class="op" id="6356629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6356632"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356633">.</span><span class="ident" id="6356634">tokPos</span>&nbsp;<span class="op" id="6356641">=</span>&nbsp;<span class="ident" id="6356643"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356644">.</span><span class="ident" id="6356645">tokEnd</span>&nbsp;<span class="comment" id="6356652">//&nbsp;ensure&nbsp;idempotency&nbsp;of&nbsp;TokenText()&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6356695">return</span>&nbsp;<span class="ident" id="6356702"><a href="/text/scanner/scanner.go.html#6356150">s</a></span><span class="op" id="6356703">.</span><span class="ident" id="6356704">tokBuf</span><span class="op" id="6356710">.</span><span class="ident" id="6356711">String</span><span class="op" id="6356717">(</span><span class="op" id="6356718">)</span><br>
<span class="lineno"></span><span class="op" id="6356720">}</span>
</div>
</body>
</html>
