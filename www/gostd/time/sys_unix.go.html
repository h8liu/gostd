<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2748393">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2748448">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2748502">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2748553">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2748623">package</span>&nbsp;<span class="ident" id="2748631">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2748637">import</span>&nbsp;<span class="op" id="2748644">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2748647">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2748657">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2748667">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2748670">//&nbsp;for&nbsp;testing:&nbsp;whatever&nbsp;interrupts&nbsp;a&nbsp;sleep</span><br>
<span class="lineno">15</span><span class="keyword" id="2748714">func</span>&nbsp;<span class="ident" id="2748719">interrupt</span><span class="op" id="2748728">(</span><span class="op" id="2748729">)</span>&nbsp;<span class="op" id="2748731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748734">syscall</span><span class="op" id="2748741">.</span><span class="ident" id="2748742">Kill</span><span class="op" id="2748746">(</span><span class="ident" id="2748747">syscall</span><span class="op" id="2748754">.</span><span class="ident" id="2748755">Getpid</span><span class="op" id="2748761">(</span><span class="op" id="2748762">)</span><span class="op" id="2748763">,</span>&nbsp;<span class="ident" id="2748765">syscall</span><span class="op" id="2748772">.</span><span class="ident" id="2748773">SIGCHLD</span><span class="op" id="2748780">)</span><br>
<span class="lineno"></span><span class="op" id="2748782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2748785">//&nbsp;readFile&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;file.</span><br>
<span class="lineno">20</span><span class="comment" id="2748846">//&nbsp;It&nbsp;is&nbsp;a&nbsp;trivial&nbsp;implementation&nbsp;of&nbsp;ioutil.ReadFile,&nbsp;reimplemented</span><br>
<span class="lineno"></span><span class="comment" id="2748914">//&nbsp;here&nbsp;to&nbsp;avoid&nbsp;depending&nbsp;on&nbsp;io/ioutil&nbsp;or&nbsp;os.</span><br>
<span class="lineno"></span><span class="keyword" id="2748961">func</span>&nbsp;<span class="ident" id="2748966">readFile</span><span class="op" id="2748974">(</span><span class="ident" id="2748975">name</span>&nbsp;<span class="builtintype" id="2748980">string</span><span class="op" id="2748986">)</span>&nbsp;<span class="op" id="2748988">(</span><span class="op" id="2748989">[</span><span class="op" id="2748990">]</span><span class="builtintype" id="2748991">byte</span><span class="op" id="2748995">,</span>&nbsp;<span class="builtintype" id="2748997">error</span><span class="op" id="2749002">)</span>&nbsp;<span class="op" id="2749004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749007">f</span><span class="op" id="2749008">,</span>&nbsp;<span class="ident" id="2749010">err</span>&nbsp;<span class="op" id="2749014">:=</span>&nbsp;<span class="ident" id="2749017">syscall</span><span class="op" id="2749024">.</span><span class="ident" id="2749025">Open</span><span class="op" id="2749029">(</span><span class="ident" id="2749030">name</span><span class="op" id="2749034">,</span>&nbsp;<span class="ident" id="2749036">syscall</span><span class="op" id="2749043">.</span><span class="ident" id="2749044">O_RDONLY</span><span class="op" id="2749052">,</span>&nbsp;<span class="num" id="2749054">0</span><span class="op" id="2749055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749058">if</span>&nbsp;<span class="ident" id="2749061">err</span>&nbsp;<span class="op" id="2749065">!=</span>&nbsp;<span class="ident" id="2749068">nil</span>&nbsp;<span class="op" id="2749072">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749076">return</span>&nbsp;<span class="ident" id="2749083">nil</span><span class="op" id="2749086">,</span>&nbsp;<span class="ident" id="2749088">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749096">defer</span>&nbsp;<span class="ident" id="2749102">syscall</span><span class="op" id="2749109">.</span><span class="ident" id="2749110">Close</span><span class="op" id="2749115">(</span><span class="ident" id="2749116">f</span><span class="op" id="2749117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749120">var</span>&nbsp;<span class="op" id="2749124">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749128">buf</span>&nbsp;<span class="op" id="2749132">[</span><span class="num" id="2749133">4096</span><span class="op" id="2749137">]</span><span class="builtintype" id="2749138">byte</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749145">ret</span>&nbsp;<span class="op" id="2749149">[</span><span class="op" id="2749150">]</span><span class="builtintype" id="2749151">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749158">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2749162">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749170">for</span>&nbsp;<span class="op" id="2749174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749178">n</span><span class="op" id="2749179">,</span>&nbsp;<span class="ident" id="2749181">err</span>&nbsp;<span class="op" id="2749185">=</span>&nbsp;<span class="ident" id="2749187">syscall</span><span class="op" id="2749194">.</span><span class="ident" id="2749195">Read</span><span class="op" id="2749199">(</span><span class="ident" id="2749200">f</span><span class="op" id="2749201">,</span>&nbsp;<span class="ident" id="2749203">buf</span><span class="op" id="2749206">[</span><span class="op" id="2749207">:</span><span class="op" id="2749208">]</span><span class="op" id="2749209">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749213">if</span>&nbsp;<span class="ident" id="2749216">n</span>&nbsp;<span class="op" id="2749218">&gt;</span>&nbsp;<span class="num" id="2749220">0</span>&nbsp;<span class="op" id="2749222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749227">ret</span>&nbsp;<span class="op" id="2749231">=</span>&nbsp;<span class="builtinfunc" id="2749233">append</span><span class="op" id="2749239">(</span><span class="ident" id="2749240">ret</span><span class="op" id="2749243">,</span>&nbsp;<span class="ident" id="2749245">buf</span><span class="op" id="2749248">[</span><span class="op" id="2749249">:</span><span class="ident" id="2749250">n</span><span class="op" id="2749251">]</span><span class="op" id="2749252">...</span><span class="op" id="2749255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749263">if</span>&nbsp;<span class="ident" id="2749266">n</span>&nbsp;<span class="op" id="2749268">==</span>&nbsp;<span class="num" id="2749271">0</span>&nbsp;<span class="op" id="2749273">||</span>&nbsp;<span class="ident" id="2749276">err</span>&nbsp;<span class="op" id="2749280">!=</span>&nbsp;<span class="ident" id="2749283">nil</span>&nbsp;<span class="op" id="2749287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749292">break</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749306">return</span>&nbsp;<span class="ident" id="2749313">ret</span><span class="op" id="2749316">,</span>&nbsp;<span class="ident" id="2749318">err</span><br>
<span class="lineno"></span><span class="op" id="2749322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="2749325">func</span>&nbsp;<span class="ident" id="2749330">open</span><span class="op" id="2749334">(</span><span class="ident" id="2749335">name</span>&nbsp;<span class="builtintype" id="2749340">string</span><span class="op" id="2749346">)</span>&nbsp;<span class="op" id="2749348">(</span><span class="builtintype" id="2749349">uintptr</span><span class="op" id="2749356">,</span>&nbsp;<span class="builtintype" id="2749358">error</span><span class="op" id="2749363">)</span>&nbsp;<span class="op" id="2749365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749368">fd</span><span class="op" id="2749370">,</span>&nbsp;<span class="ident" id="2749372">err</span>&nbsp;<span class="op" id="2749376">:=</span>&nbsp;<span class="ident" id="2749379">syscall</span><span class="op" id="2749386">.</span><span class="ident" id="2749387">Open</span><span class="op" id="2749391">(</span><span class="ident" id="2749392">name</span><span class="op" id="2749396">,</span>&nbsp;<span class="ident" id="2749398">syscall</span><span class="op" id="2749405">.</span><span class="ident" id="2749406">O_RDONLY</span><span class="op" id="2749414">,</span>&nbsp;<span class="num" id="2749416">0</span><span class="op" id="2749417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749420">if</span>&nbsp;<span class="ident" id="2749423">err</span>&nbsp;<span class="op" id="2749427">!=</span>&nbsp;<span class="ident" id="2749430">nil</span>&nbsp;<span class="op" id="2749434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749438">return</span>&nbsp;<span class="num" id="2749445">0</span><span class="op" id="2749446">,</span>&nbsp;<span class="ident" id="2749448">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749453">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749456">return</span>&nbsp;<span class="builtintype" id="2749463">uintptr</span><span class="op" id="2749470">(</span><span class="ident" id="2749471">fd</span><span class="op" id="2749473">)</span><span class="op" id="2749474">,</span>&nbsp;<span class="ident" id="2749476">nil</span><br>
<span class="lineno"></span><span class="op" id="2749480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2749483">func</span>&nbsp;<span class="ident" id="2749488">closefd</span><span class="op" id="2749495">(</span><span class="ident" id="2749496">fd</span>&nbsp;<span class="builtintype" id="2749499">uintptr</span><span class="op" id="2749506">)</span>&nbsp;<span class="op" id="2749508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749511">syscall</span><span class="op" id="2749518">.</span><span class="ident" id="2749519">Close</span><span class="op" id="2749524">(</span><span class="builtintype" id="2749525">int</span><span class="op" id="2749528">(</span><span class="ident" id="2749529">fd</span><span class="op" id="2749531">)</span><span class="op" id="2749532">)</span><br>
<span class="lineno">55</span><span class="op" id="2749534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2749537">func</span>&nbsp;<span class="ident" id="2749542">preadn</span><span class="op" id="2749548">(</span><span class="ident" id="2749549">fd</span>&nbsp;<span class="builtintype" id="2749552">uintptr</span><span class="op" id="2749559">,</span>&nbsp;<span class="ident" id="2749561">buf</span>&nbsp;<span class="op" id="2749565">[</span><span class="op" id="2749566">]</span><span class="builtintype" id="2749567">byte</span><span class="op" id="2749571">,</span>&nbsp;<span class="ident" id="2749573">off</span>&nbsp;<span class="builtintype" id="2749577">int</span><span class="op" id="2749580">)</span>&nbsp;<span class="builtintype" id="2749582">error</span>&nbsp;<span class="op" id="2749588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749591">whence</span>&nbsp;<span class="op" id="2749598">:=</span>&nbsp;<span class="num" id="2749601">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749604">if</span>&nbsp;<span class="ident" id="2749607">off</span>&nbsp;<span class="op" id="2749611">&lt;</span>&nbsp;<span class="num" id="2749613">0</span>&nbsp;<span class="op" id="2749615">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749619">whence</span>&nbsp;<span class="op" id="2749626">=</span>&nbsp;<span class="num" id="2749628">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749634">if</span>&nbsp;<span class="ident" id="2749637">_</span><span class="op" id="2749638">,</span>&nbsp;<span class="ident" id="2749640">err</span>&nbsp;<span class="op" id="2749644">:=</span>&nbsp;<span class="ident" id="2749647">syscall</span><span class="op" id="2749654">.</span><span class="ident" id="2749655">Seek</span><span class="op" id="2749659">(</span><span class="builtintype" id="2749660">int</span><span class="op" id="2749663">(</span><span class="ident" id="2749664">fd</span><span class="op" id="2749666">)</span><span class="op" id="2749667">,</span>&nbsp;<span class="ident" id="2749669">int64</span><span class="op" id="2749674">(</span><span class="ident" id="2749675">off</span><span class="op" id="2749678">)</span><span class="op" id="2749679">,</span>&nbsp;<span class="ident" id="2749681">whence</span><span class="op" id="2749687">)</span><span class="op" id="2749688">;</span>&nbsp;<span class="ident" id="2749690">err</span>&nbsp;<span class="op" id="2749694">!=</span>&nbsp;<span class="ident" id="2749697">nil</span>&nbsp;<span class="op" id="2749701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749705">return</span>&nbsp;<span class="ident" id="2749712">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749717">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749720">for</span>&nbsp;<span class="builtinfunc" id="2749724">len</span><span class="op" id="2749727">(</span><span class="ident" id="2749728">buf</span><span class="op" id="2749731">)</span>&nbsp;<span class="op" id="2749733">&gt;</span>&nbsp;<span class="num" id="2749735">0</span>&nbsp;<span class="op" id="2749737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749741">m</span><span class="op" id="2749742">,</span>&nbsp;<span class="ident" id="2749744">err</span>&nbsp;<span class="op" id="2749748">:=</span>&nbsp;<span class="ident" id="2749751">syscall</span><span class="op" id="2749758">.</span><span class="ident" id="2749759">Read</span><span class="op" id="2749763">(</span><span class="builtintype" id="2749764">int</span><span class="op" id="2749767">(</span><span class="ident" id="2749768">fd</span><span class="op" id="2749770">)</span><span class="op" id="2749771">,</span>&nbsp;<span class="ident" id="2749773">buf</span><span class="op" id="2749776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749780">if</span>&nbsp;<span class="ident" id="2749783">m</span>&nbsp;<span class="op" id="2749785">&lt;=</span>&nbsp;<span class="num" id="2749788">0</span>&nbsp;<span class="op" id="2749790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749795">if</span>&nbsp;<span class="ident" id="2749798">err</span>&nbsp;<span class="op" id="2749802">==</span>&nbsp;<span class="ident" id="2749805">nil</span>&nbsp;<span class="op" id="2749809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749815">return</span>&nbsp;<span class="ident" id="2749822">errors</span><span class="op" id="2749828">.</span><span class="ident" id="2749829">New</span><span class="op" id="2749832">(</span><span class="string" id="2749833">&#34;short&nbsp;read&#34;</span><span class="op" id="2749845">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749855">return</span>&nbsp;<span class="ident" id="2749862">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749872">buf</span>&nbsp;<span class="op" id="2749876">=</span>&nbsp;<span class="ident" id="2749878">buf</span><span class="op" id="2749881">[</span><span class="ident" id="2749882">m</span><span class="op" id="2749883">:</span><span class="op" id="2749884">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749887">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749890">return</span>&nbsp;<span class="ident" id="2749897">nil</span><br>
<span class="lineno"></span><span class="op" id="2749901">}</span>
</div>
</body>
</html>
