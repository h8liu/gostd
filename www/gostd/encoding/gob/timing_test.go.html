<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7926969">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7927024">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7927078">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7927129">package</span>&nbsp;<span class="ident" id="7927137">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7927142">import</span>&nbsp;<span class="op" id="7927149">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7927152">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7927161">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7927167">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7927173">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7927184">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7927194">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7927197">type</span>&nbsp;<span class="ident" id="7927202">Bench</span>&nbsp;<span class="keyword" id="7927208">struct</span>&nbsp;<span class="op" id="7927215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927218">A</span>&nbsp;<span class="builtintype" id="7927220">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927225">B</span>&nbsp;<span class="builtintype" id="7927227">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927236">C</span>&nbsp;<span class="builtintype" id="7927238">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927246">D</span>&nbsp;<span class="op" id="7927248">[</span><span class="op" id="7927249">]</span><span class="builtintype" id="7927250">byte</span><br>
<span class="lineno">20</span><span class="op" id="7927255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7927258">func</span>&nbsp;<span class="ident" id="7927263">benchmarkEndToEnd</span><span class="op" id="7927280">(</span><span class="ident" id="7927281">b</span>&nbsp;<span class="op" id="7927283">*</span><span class="ident" id="7927284">testing</span><span class="op" id="7927291">.</span><span class="ident" id="7927292">B</span><span class="op" id="7927293">,</span>&nbsp;<span class="ident" id="7927295">ctor</span>&nbsp;<span class="keyword" id="7927300">func</span><span class="op" id="7927304">(</span><span class="op" id="7927305">)</span>&nbsp;<span class="keyword" id="7927307">interface</span><span class="op" id="7927316">{</span><span class="op" id="7927317">}</span><span class="op" id="7927318">,</span>&nbsp;<span class="ident" id="7927320">pipe</span>&nbsp;<span class="keyword" id="7927325">func</span><span class="op" id="7927329">(</span><span class="op" id="7927330">)</span>&nbsp;<span class="op" id="7927332">(</span><span class="ident" id="7927333">r</span>&nbsp;<span class="ident" id="7927335">io</span><span class="op" id="7927337">.</span><span class="ident" id="7927338">Reader</span><span class="op" id="7927344">,</span>&nbsp;<span class="ident" id="7927346">w</span>&nbsp;<span class="ident" id="7927348">io</span><span class="op" id="7927350">.</span><span class="ident" id="7927351">Writer</span><span class="op" id="7927357">,</span>&nbsp;<span class="ident" id="7927359">err</span>&nbsp;<span class="builtintype" id="7927363">error</span><span class="op" id="7927368">)</span><span class="op" id="7927369">)</span>&nbsp;<span class="op" id="7927371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927374">b</span><span class="op" id="7927375">.</span><span class="ident" id="7927376">RunParallel</span><span class="op" id="7927387">(</span><span class="keyword" id="7927388">func</span><span class="op" id="7927392">(</span><span class="ident" id="7927393">pb</span>&nbsp;<span class="op" id="7927396">*</span><span class="ident" id="7927397">testing</span><span class="op" id="7927404">.</span><span class="ident" id="7927405">PB</span><span class="op" id="7927407">)</span>&nbsp;<span class="op" id="7927409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927413">r</span><span class="op" id="7927414">,</span>&nbsp;<span class="ident" id="7927416">w</span><span class="op" id="7927417">,</span>&nbsp;<span class="ident" id="7927419">err</span>&nbsp;<span class="op" id="7927423">:=</span>&nbsp;<span class="ident" id="7927426">pipe</span><span class="op" id="7927430">(</span><span class="op" id="7927431">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927435">if</span>&nbsp;<span class="ident" id="7927438">err</span>&nbsp;<span class="op" id="7927442">!=</span>&nbsp;<span class="ident" id="7927445">nil</span>&nbsp;<span class="op" id="7927449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927454">b</span><span class="op" id="7927455">.</span><span class="ident" id="7927456">Fatal</span><span class="op" id="7927461">(</span><span class="string" id="7927462">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="7927479">,</span>&nbsp;<span class="ident" id="7927481">err</span><span class="op" id="7927484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927492">v</span>&nbsp;<span class="op" id="7927494">:=</span>&nbsp;<span class="ident" id="7927497">ctor</span><span class="op" id="7927501">(</span><span class="op" id="7927502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927506">enc</span>&nbsp;<span class="op" id="7927510">:=</span>&nbsp;<span class="ident" id="7927513">NewEncoder</span><span class="op" id="7927523">(</span><span class="ident" id="7927524">w</span><span class="op" id="7927525">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927529">dec</span>&nbsp;<span class="op" id="7927533">:=</span>&nbsp;<span class="ident" id="7927536">NewDecoder</span><span class="op" id="7927546">(</span><span class="ident" id="7927547">r</span><span class="op" id="7927548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927552">for</span>&nbsp;<span class="ident" id="7927556">pb</span><span class="op" id="7927558">.</span><span class="ident" id="7927559">Next</span><span class="op" id="7927563">(</span><span class="op" id="7927564">)</span>&nbsp;<span class="op" id="7927566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927571">if</span>&nbsp;<span class="ident" id="7927574">err</span>&nbsp;<span class="op" id="7927578">:=</span>&nbsp;<span class="ident" id="7927581">enc</span><span class="op" id="7927584">.</span><span class="ident" id="7927585">Encode</span><span class="op" id="7927591">(</span><span class="ident" id="7927592">v</span><span class="op" id="7927593">)</span><span class="op" id="7927594">;</span>&nbsp;<span class="ident" id="7927596">err</span>&nbsp;<span class="op" id="7927600">!=</span>&nbsp;<span class="ident" id="7927603">nil</span>&nbsp;<span class="op" id="7927607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927613">b</span><span class="op" id="7927614">.</span><span class="ident" id="7927615">Fatal</span><span class="op" id="7927620">(</span><span class="string" id="7927621">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7927636">,</span>&nbsp;<span class="ident" id="7927638">err</span><span class="op" id="7927641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927646">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927651">if</span>&nbsp;<span class="ident" id="7927654">err</span>&nbsp;<span class="op" id="7927658">:=</span>&nbsp;<span class="ident" id="7927661">dec</span><span class="op" id="7927664">.</span><span class="ident" id="7927665">Decode</span><span class="op" id="7927671">(</span><span class="ident" id="7927672">v</span><span class="op" id="7927673">)</span><span class="op" id="7927674">;</span>&nbsp;<span class="ident" id="7927676">err</span>&nbsp;<span class="op" id="7927680">!=</span>&nbsp;<span class="ident" id="7927683">nil</span>&nbsp;<span class="op" id="7927687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927693">b</span><span class="op" id="7927694">.</span><span class="ident" id="7927695">Fatal</span><span class="op" id="7927700">(</span><span class="string" id="7927701">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7927716">,</span>&nbsp;<span class="ident" id="7927718">err</span><span class="op" id="7927721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927733">}</span><span class="op" id="7927734">)</span><br>
<span class="lineno">40</span><span class="op" id="7927736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7927739">func</span>&nbsp;<span class="ident" id="7927744">BenchmarkEndToEndPipe</span><span class="op" id="7927765">(</span><span class="ident" id="7927766">b</span>&nbsp;<span class="op" id="7927768">*</span><span class="ident" id="7927769">testing</span><span class="op" id="7927776">.</span><span class="ident" id="7927777">B</span><span class="op" id="7927778">)</span>&nbsp;<span class="op" id="7927780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927783">benchmarkEndToEnd</span><span class="op" id="7927800">(</span><span class="ident" id="7927801">b</span><span class="op" id="7927802">,</span>&nbsp;<span class="keyword" id="7927804">func</span><span class="op" id="7927808">(</span><span class="op" id="7927809">)</span>&nbsp;<span class="keyword" id="7927811">interface</span><span class="op" id="7927820">{</span><span class="op" id="7927821">}</span>&nbsp;<span class="op" id="7927823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927827">return</span>&nbsp;<span class="op" id="7927834">&amp;</span><span class="ident" id="7927835">Bench</span><span class="op" id="7927840">{</span><span class="num" id="7927841">7</span><span class="op" id="7927842">,</span>&nbsp;<span class="num" id="7927844">3.2</span><span class="op" id="7927847">,</span>&nbsp;<span class="string" id="7927849">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7927866">,</span>&nbsp;<span class="ident" id="7927868">bytes</span><span class="op" id="7927873">.</span><span class="ident" id="7927874">Repeat</span><span class="op" id="7927880">(</span><span class="op" id="7927881">[</span><span class="op" id="7927882">]</span><span class="builtintype" id="7927883">byte</span><span class="op" id="7927887">(</span><span class="string" id="7927888">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7927906">)</span><span class="op" id="7927907">,</span>&nbsp;<span class="num" id="7927909">100</span><span class="op" id="7927912">)</span><span class="op" id="7927913">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7927916">}</span><span class="op" id="7927917">,</span>&nbsp;<span class="keyword" id="7927919">func</span><span class="op" id="7927923">(</span><span class="op" id="7927924">)</span>&nbsp;<span class="op" id="7927926">(</span><span class="ident" id="7927927">r</span>&nbsp;<span class="ident" id="7927929">io</span><span class="op" id="7927931">.</span><span class="ident" id="7927932">Reader</span><span class="op" id="7927938">,</span>&nbsp;<span class="ident" id="7927940">w</span>&nbsp;<span class="ident" id="7927942">io</span><span class="op" id="7927944">.</span><span class="ident" id="7927945">Writer</span><span class="op" id="7927951">,</span>&nbsp;<span class="ident" id="7927953">err</span>&nbsp;<span class="builtintype" id="7927957">error</span><span class="op" id="7927962">)</span>&nbsp;<span class="op" id="7927964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7927968">r</span><span class="op" id="7927969">,</span>&nbsp;<span class="ident" id="7927971">w</span><span class="op" id="7927972">,</span>&nbsp;<span class="ident" id="7927974">err</span>&nbsp;<span class="op" id="7927978">=</span>&nbsp;<span class="ident" id="7927980">os</span><span class="op" id="7927982">.</span><span class="ident" id="7927983">Pipe</span><span class="op" id="7927987">(</span><span class="op" id="7927988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7927992">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928000">}</span><span class="op" id="7928001">)</span><br>
<span class="lineno"></span><span class="op" id="7928003">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="7928006">func</span>&nbsp;<span class="ident" id="7928011">BenchmarkEndToEndByteBuffer</span><span class="op" id="7928038">(</span><span class="ident" id="7928039">b</span>&nbsp;<span class="op" id="7928041">*</span><span class="ident" id="7928042">testing</span><span class="op" id="7928049">.</span><span class="ident" id="7928050">B</span><span class="op" id="7928051">)</span>&nbsp;<span class="op" id="7928053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928056">benchmarkEndToEnd</span><span class="op" id="7928073">(</span><span class="ident" id="7928074">b</span><span class="op" id="7928075">,</span>&nbsp;<span class="keyword" id="7928077">func</span><span class="op" id="7928081">(</span><span class="op" id="7928082">)</span>&nbsp;<span class="keyword" id="7928084">interface</span><span class="op" id="7928093">{</span><span class="op" id="7928094">}</span>&nbsp;<span class="op" id="7928096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928100">return</span>&nbsp;<span class="op" id="7928107">&amp;</span><span class="ident" id="7928108">Bench</span><span class="op" id="7928113">{</span><span class="num" id="7928114">7</span><span class="op" id="7928115">,</span>&nbsp;<span class="num" id="7928117">3.2</span><span class="op" id="7928120">,</span>&nbsp;<span class="string" id="7928122">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7928139">,</span>&nbsp;<span class="ident" id="7928141">bytes</span><span class="op" id="7928146">.</span><span class="ident" id="7928147">Repeat</span><span class="op" id="7928153">(</span><span class="op" id="7928154">[</span><span class="op" id="7928155">]</span><span class="builtintype" id="7928156">byte</span><span class="op" id="7928160">(</span><span class="string" id="7928161">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7928179">)</span><span class="op" id="7928180">,</span>&nbsp;<span class="num" id="7928182">100</span><span class="op" id="7928185">)</span><span class="op" id="7928186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928189">}</span><span class="op" id="7928190">,</span>&nbsp;<span class="keyword" id="7928192">func</span><span class="op" id="7928196">(</span><span class="op" id="7928197">)</span>&nbsp;<span class="op" id="7928199">(</span><span class="ident" id="7928200">r</span>&nbsp;<span class="ident" id="7928202">io</span><span class="op" id="7928204">.</span><span class="ident" id="7928205">Reader</span><span class="op" id="7928211">,</span>&nbsp;<span class="ident" id="7928213">w</span>&nbsp;<span class="ident" id="7928215">io</span><span class="op" id="7928217">.</span><span class="ident" id="7928218">Writer</span><span class="op" id="7928224">,</span>&nbsp;<span class="ident" id="7928226">err</span>&nbsp;<span class="builtintype" id="7928230">error</span><span class="op" id="7928235">)</span>&nbsp;<span class="op" id="7928237">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928241">var</span>&nbsp;<span class="ident" id="7928245">buf</span>&nbsp;<span class="ident" id="7928249">bytes</span><span class="op" id="7928254">.</span><span class="ident" id="7928255">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928264">return</span>&nbsp;<span class="op" id="7928271">&amp;</span><span class="ident" id="7928272">buf</span><span class="op" id="7928275">,</span>&nbsp;<span class="op" id="7928277">&amp;</span><span class="ident" id="7928278">buf</span><span class="op" id="7928281">,</span>&nbsp;<span class="ident" id="7928283">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928288">}</span><span class="op" id="7928289">)</span><br>
<span class="lineno"></span><span class="op" id="7928291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7928294">func</span>&nbsp;<span class="ident" id="7928299">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="7928331">(</span><span class="ident" id="7928332">b</span>&nbsp;<span class="op" id="7928334">*</span><span class="ident" id="7928335">testing</span><span class="op" id="7928342">.</span><span class="ident" id="7928343">B</span><span class="op" id="7928344">)</span>&nbsp;<span class="op" id="7928346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928349">benchmarkEndToEnd</span><span class="op" id="7928366">(</span><span class="ident" id="7928367">b</span><span class="op" id="7928368">,</span>&nbsp;<span class="keyword" id="7928370">func</span><span class="op" id="7928374">(</span><span class="op" id="7928375">)</span>&nbsp;<span class="keyword" id="7928377">interface</span><span class="op" id="7928386">{</span><span class="op" id="7928387">}</span>&nbsp;<span class="op" id="7928389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928393">v</span>&nbsp;<span class="op" id="7928395">:=</span>&nbsp;<span class="op" id="7928398">&amp;</span><span class="ident" id="7928399">Bench</span><span class="op" id="7928404">{</span><span class="num" id="7928405">7</span><span class="op" id="7928406">,</span>&nbsp;<span class="num" id="7928408">3.2</span><span class="op" id="7928411">,</span>&nbsp;<span class="string" id="7928413">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7928430">,</span>&nbsp;<span class="ident" id="7928432">nil</span><span class="op" id="7928435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928439">Register</span><span class="op" id="7928447">(</span><span class="ident" id="7928448">v</span><span class="op" id="7928449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928453">arr</span>&nbsp;<span class="op" id="7928457">:=</span>&nbsp;<span class="builtinfunc" id="7928460">make</span><span class="op" id="7928464">(</span><span class="op" id="7928465">[</span><span class="op" id="7928466">]</span><span class="keyword" id="7928467">interface</span><span class="op" id="7928476">{</span><span class="op" id="7928477">}</span><span class="op" id="7928478">,</span>&nbsp;<span class="num" id="7928480">100</span><span class="op" id="7928483">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928487">for</span>&nbsp;<span class="ident" id="7928491">i</span>&nbsp;<span class="op" id="7928493">:=</span>&nbsp;<span class="keyword" id="7928496">range</span>&nbsp;<span class="ident" id="7928502">arr</span>&nbsp;<span class="op" id="7928506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928511">arr</span><span class="op" id="7928514">[</span><span class="ident" id="7928515">i</span><span class="op" id="7928516">]</span>&nbsp;<span class="op" id="7928518">=</span>&nbsp;<span class="ident" id="7928520">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928528">return</span>&nbsp;<span class="op" id="7928535">&amp;</span><span class="ident" id="7928536">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928541">}</span><span class="op" id="7928542">,</span>&nbsp;<span class="keyword" id="7928544">func</span><span class="op" id="7928548">(</span><span class="op" id="7928549">)</span>&nbsp;<span class="op" id="7928551">(</span><span class="ident" id="7928552">r</span>&nbsp;<span class="ident" id="7928554">io</span><span class="op" id="7928556">.</span><span class="ident" id="7928557">Reader</span><span class="op" id="7928563">,</span>&nbsp;<span class="ident" id="7928565">w</span>&nbsp;<span class="ident" id="7928567">io</span><span class="op" id="7928569">.</span><span class="ident" id="7928570">Writer</span><span class="op" id="7928576">,</span>&nbsp;<span class="ident" id="7928578">err</span>&nbsp;<span class="builtintype" id="7928582">error</span><span class="op" id="7928587">)</span>&nbsp;<span class="op" id="7928589">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928593">var</span>&nbsp;<span class="ident" id="7928597">buf</span>&nbsp;<span class="ident" id="7928601">bytes</span><span class="op" id="7928606">.</span><span class="ident" id="7928607">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928616">return</span>&nbsp;<span class="op" id="7928623">&amp;</span><span class="ident" id="7928624">buf</span><span class="op" id="7928627">,</span>&nbsp;<span class="op" id="7928629">&amp;</span><span class="ident" id="7928630">buf</span><span class="op" id="7928633">,</span>&nbsp;<span class="ident" id="7928635">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928640">}</span><span class="op" id="7928641">)</span><br>
<span class="lineno"></span><span class="op" id="7928643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7928646">func</span>&nbsp;<span class="ident" id="7928651">TestCountEncodeMallocs</span><span class="op" id="7928673">(</span><span class="ident" id="7928674">t</span>&nbsp;<span class="op" id="7928676">*</span><span class="ident" id="7928677">testing</span><span class="op" id="7928684">.</span><span class="ident" id="7928685">T</span><span class="op" id="7928686">)</span>&nbsp;<span class="op" id="7928688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928691">if</span>&nbsp;<span class="ident" id="7928694">testing</span><span class="op" id="7928701">.</span><span class="ident" id="7928702">Short</span><span class="op" id="7928707">(</span><span class="op" id="7928708">)</span>&nbsp;<span class="op" id="7928710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928714">t</span><span class="op" id="7928715">.</span><span class="ident" id="7928716">Skip</span><span class="op" id="7928720">(</span><span class="string" id="7928721">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7928758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928764">if</span>&nbsp;<span class="ident" id="7928767">runtime</span><span class="op" id="7928774">.</span><span class="ident" id="7928775">GOMAXPROCS</span><span class="op" id="7928785">(</span><span class="num" id="7928786">0</span><span class="op" id="7928787">)</span>&nbsp;<span class="op" id="7928789">&gt;</span>&nbsp;<span class="num" id="7928791">1</span>&nbsp;<span class="op" id="7928793">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928797">t</span><span class="op" id="7928798">.</span><span class="ident" id="7928799">Skip</span><span class="op" id="7928803">(</span><span class="string" id="7928804">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7928828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7928831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928835">const</span>&nbsp;<span class="ident" id="7928841">N</span>&nbsp;<span class="op" id="7928843">=</span>&nbsp;<span class="num" id="7928845">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7928852">var</span>&nbsp;<span class="ident" id="7928856">buf</span>&nbsp;<span class="ident" id="7928860">bytes</span><span class="op" id="7928865">.</span><span class="ident" id="7928866">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928874">enc</span>&nbsp;<span class="op" id="7928878">:=</span>&nbsp;<span class="ident" id="7928881">NewEncoder</span><span class="op" id="7928891">(</span><span class="op" id="7928892">&amp;</span><span class="ident" id="7928893">buf</span><span class="op" id="7928896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928899">bench</span>&nbsp;<span class="op" id="7928905">:=</span>&nbsp;<span class="op" id="7928908">&amp;</span><span class="ident" id="7928909">Bench</span><span class="op" id="7928914">{</span><span class="num" id="7928915">7</span><span class="op" id="7928916">,</span>&nbsp;<span class="num" id="7928918">3.2</span><span class="op" id="7928921">,</span>&nbsp;<span class="string" id="7928923">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7928940">,</span>&nbsp;<span class="op" id="7928942">[</span><span class="op" id="7928943">]</span><span class="builtintype" id="7928944">byte</span><span class="op" id="7928948">(</span><span class="string" id="7928949">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7928967">)</span><span class="op" id="7928968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7928972">allocs</span>&nbsp;<span class="op" id="7928979">:=</span>&nbsp;<span class="ident" id="7928982">testing</span><span class="op" id="7928989">.</span><span class="ident" id="7928990">AllocsPerRun</span><span class="op" id="7929002">(</span><span class="ident" id="7929003">N</span><span class="op" id="7929004">,</span>&nbsp;<span class="keyword" id="7929006">func</span><span class="op" id="7929010">(</span><span class="op" id="7929011">)</span>&nbsp;<span class="op" id="7929013">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929017">err</span>&nbsp;<span class="op" id="7929021">:=</span>&nbsp;<span class="ident" id="7929024">enc</span><span class="op" id="7929027">.</span><span class="ident" id="7929028">Encode</span><span class="op" id="7929034">(</span><span class="ident" id="7929035">bench</span><span class="op" id="7929040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929044">if</span>&nbsp;<span class="ident" id="7929047">err</span>&nbsp;<span class="op" id="7929051">!=</span>&nbsp;<span class="ident" id="7929054">nil</span>&nbsp;<span class="op" id="7929058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929063">t</span><span class="op" id="7929064">.</span><span class="ident" id="7929065">Fatal</span><span class="op" id="7929070">(</span><span class="string" id="7929071">&#34;encode:&#34;</span><span class="op" id="7929080">,</span>&nbsp;<span class="ident" id="7929082">err</span><span class="op" id="7929085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929092">}</span><span class="op" id="7929093">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929096">if</span>&nbsp;<span class="ident" id="7929099">allocs</span>&nbsp;<span class="op" id="7929106">!=</span>&nbsp;<span class="num" id="7929109">0</span>&nbsp;<span class="op" id="7929111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929115">t</span><span class="op" id="7929116">.</span><span class="ident" id="7929117">Fatalf</span><span class="op" id="7929123">(</span><span class="string" id="7929124">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="7929174">,</span>&nbsp;<span class="ident" id="7929176">allocs</span><span class="op" id="7929182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929185">}</span><br>
<span class="lineno"></span><span class="op" id="7929187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="7929190">func</span>&nbsp;<span class="ident" id="7929195">TestCountDecodeMallocs</span><span class="op" id="7929217">(</span><span class="ident" id="7929218">t</span>&nbsp;<span class="op" id="7929220">*</span><span class="ident" id="7929221">testing</span><span class="op" id="7929228">.</span><span class="ident" id="7929229">T</span><span class="op" id="7929230">)</span>&nbsp;<span class="op" id="7929232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929235">if</span>&nbsp;<span class="ident" id="7929238">testing</span><span class="op" id="7929245">.</span><span class="ident" id="7929246">Short</span><span class="op" id="7929251">(</span><span class="op" id="7929252">)</span>&nbsp;<span class="op" id="7929254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929258">t</span><span class="op" id="7929259">.</span><span class="ident" id="7929260">Skip</span><span class="op" id="7929264">(</span><span class="string" id="7929265">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7929302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929308">if</span>&nbsp;<span class="ident" id="7929311">runtime</span><span class="op" id="7929318">.</span><span class="ident" id="7929319">GOMAXPROCS</span><span class="op" id="7929329">(</span><span class="num" id="7929330">0</span><span class="op" id="7929331">)</span>&nbsp;<span class="op" id="7929333">&gt;</span>&nbsp;<span class="num" id="7929335">1</span>&nbsp;<span class="op" id="7929337">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929341">t</span><span class="op" id="7929342">.</span><span class="ident" id="7929343">Skip</span><span class="op" id="7929347">(</span><span class="string" id="7929348">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7929372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929379">const</span>&nbsp;<span class="ident" id="7929385">N</span>&nbsp;<span class="op" id="7929387">=</span>&nbsp;<span class="num" id="7929389">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929396">var</span>&nbsp;<span class="ident" id="7929400">buf</span>&nbsp;<span class="ident" id="7929404">bytes</span><span class="op" id="7929409">.</span><span class="ident" id="7929410">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929418">enc</span>&nbsp;<span class="op" id="7929422">:=</span>&nbsp;<span class="ident" id="7929425">NewEncoder</span><span class="op" id="7929435">(</span><span class="op" id="7929436">&amp;</span><span class="ident" id="7929437">buf</span><span class="op" id="7929440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929443">bench</span>&nbsp;<span class="op" id="7929449">:=</span>&nbsp;<span class="op" id="7929452">&amp;</span><span class="ident" id="7929453">Bench</span><span class="op" id="7929458">{</span><span class="num" id="7929459">7</span><span class="op" id="7929460">,</span>&nbsp;<span class="num" id="7929462">3.2</span><span class="op" id="7929465">,</span>&nbsp;<span class="string" id="7929467">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7929484">,</span>&nbsp;<span class="op" id="7929486">[</span><span class="op" id="7929487">]</span><span class="builtintype" id="7929488">byte</span><span class="op" id="7929492">(</span><span class="string" id="7929493">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7929511">)</span><span class="op" id="7929512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7929516">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929558">testing</span><span class="op" id="7929565">.</span><span class="ident" id="7929566">AllocsPerRun</span><span class="op" id="7929578">(</span><span class="ident" id="7929579">N</span><span class="op" id="7929580">,</span>&nbsp;<span class="keyword" id="7929582">func</span><span class="op" id="7929586">(</span><span class="op" id="7929587">)</span>&nbsp;<span class="op" id="7929589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929593">err</span>&nbsp;<span class="op" id="7929597">:=</span>&nbsp;<span class="ident" id="7929600">enc</span><span class="op" id="7929603">.</span><span class="ident" id="7929604">Encode</span><span class="op" id="7929610">(</span><span class="ident" id="7929611">bench</span><span class="op" id="7929616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929620">if</span>&nbsp;<span class="ident" id="7929623">err</span>&nbsp;<span class="op" id="7929627">!=</span>&nbsp;<span class="ident" id="7929630">nil</span>&nbsp;<span class="op" id="7929634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929639">t</span><span class="op" id="7929640">.</span><span class="ident" id="7929641">Fatal</span><span class="op" id="7929646">(</span><span class="string" id="7929647">&#34;encode:&#34;</span><span class="op" id="7929656">,</span>&nbsp;<span class="ident" id="7929658">err</span><span class="op" id="7929661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929665">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929668">}</span><span class="op" id="7929669">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929673">dec</span>&nbsp;<span class="op" id="7929677">:=</span>&nbsp;<span class="ident" id="7929680">NewDecoder</span><span class="op" id="7929690">(</span><span class="op" id="7929691">&amp;</span><span class="ident" id="7929692">buf</span><span class="op" id="7929695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929698">allocs</span>&nbsp;<span class="op" id="7929705">:=</span>&nbsp;<span class="ident" id="7929708">testing</span><span class="op" id="7929715">.</span><span class="ident" id="7929716">AllocsPerRun</span><span class="op" id="7929728">(</span><span class="ident" id="7929729">N</span><span class="op" id="7929730">,</span>&nbsp;<span class="keyword" id="7929732">func</span><span class="op" id="7929736">(</span><span class="op" id="7929737">)</span>&nbsp;<span class="op" id="7929739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929743">*</span><span class="ident" id="7929744">bench</span>&nbsp;<span class="op" id="7929750">=</span>&nbsp;<span class="ident" id="7929752">Bench</span><span class="op" id="7929757">{</span><span class="op" id="7929758">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929762">err</span>&nbsp;<span class="op" id="7929766">:=</span>&nbsp;<span class="ident" id="7929769">dec</span><span class="op" id="7929772">.</span><span class="ident" id="7929773">Decode</span><span class="op" id="7929779">(</span><span class="op" id="7929780">&amp;</span><span class="ident" id="7929781">bench</span><span class="op" id="7929786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929790">if</span>&nbsp;<span class="ident" id="7929793">err</span>&nbsp;<span class="op" id="7929797">!=</span>&nbsp;<span class="ident" id="7929800">nil</span>&nbsp;<span class="op" id="7929804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929809">t</span><span class="op" id="7929810">.</span><span class="ident" id="7929811">Fatal</span><span class="op" id="7929816">(</span><span class="string" id="7929817">&#34;decode:&#34;</span><span class="op" id="7929826">,</span>&nbsp;<span class="ident" id="7929828">err</span><span class="op" id="7929831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929838">}</span><span class="op" id="7929839">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929842">if</span>&nbsp;<span class="ident" id="7929845">allocs</span>&nbsp;<span class="op" id="7929852">!=</span>&nbsp;<span class="num" id="7929855">4</span>&nbsp;<span class="op" id="7929857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7929861">t</span><span class="op" id="7929862">.</span><span class="ident" id="7929863">Fatalf</span><span class="op" id="7929869">(</span><span class="string" id="7929870">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="7929920">,</span>&nbsp;<span class="ident" id="7929922">allocs</span><span class="op" id="7929928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7929931">}</span><br>
<span class="lineno"></span><span class="op" id="7929933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7929936">func</span>&nbsp;<span class="ident" id="7929941">BenchmarkEncodeComplex128Slice</span><span class="op" id="7929971">(</span><span class="ident" id="7929972">b</span>&nbsp;<span class="op" id="7929974">*</span><span class="ident" id="7929975">testing</span><span class="op" id="7929982">.</span><span class="ident" id="7929983">B</span><span class="op" id="7929984">)</span>&nbsp;<span class="op" id="7929986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7929989">var</span>&nbsp;<span class="ident" id="7929993">buf</span>&nbsp;<span class="ident" id="7929997">bytes</span><span class="op" id="7930002">.</span><span class="ident" id="7930003">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930011">enc</span>&nbsp;<span class="op" id="7930015">:=</span>&nbsp;<span class="ident" id="7930018">NewEncoder</span><span class="op" id="7930028">(</span><span class="op" id="7930029">&amp;</span><span class="ident" id="7930030">buf</span><span class="op" id="7930033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930036">a</span>&nbsp;<span class="op" id="7930038">:=</span>&nbsp;<span class="builtinfunc" id="7930041">make</span><span class="op" id="7930045">(</span><span class="op" id="7930046">[</span><span class="op" id="7930047">]</span><span class="builtintype" id="7930048">complex128</span><span class="op" id="7930058">,</span>&nbsp;<span class="num" id="7930060">1000</span><span class="op" id="7930064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930067">for</span>&nbsp;<span class="ident" id="7930071">i</span>&nbsp;<span class="op" id="7930073">:=</span>&nbsp;<span class="keyword" id="7930076">range</span>&nbsp;<span class="ident" id="7930082">a</span>&nbsp;<span class="op" id="7930084">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930088">a</span><span class="op" id="7930089">[</span><span class="ident" id="7930090">i</span><span class="op" id="7930091">]</span>&nbsp;<span class="op" id="7930093">=</span>&nbsp;<span class="num" id="7930095">1.2</span>&nbsp;<span class="op" id="7930099">+</span>&nbsp;<span class="num" id="7930101">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930110">b</span><span class="op" id="7930111">.</span><span class="ident" id="7930112">ResetTimer</span><span class="op" id="7930122">(</span><span class="op" id="7930123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930126">for</span>&nbsp;<span class="ident" id="7930130">i</span>&nbsp;<span class="op" id="7930132">:=</span>&nbsp;<span class="num" id="7930135">0</span><span class="op" id="7930136">;</span>&nbsp;<span class="ident" id="7930138">i</span>&nbsp;<span class="op" id="7930140">&lt;</span>&nbsp;<span class="ident" id="7930142">b</span><span class="op" id="7930143">.</span><span class="ident" id="7930144">N</span><span class="op" id="7930145">;</span>&nbsp;<span class="ident" id="7930147">i</span><span class="op" id="7930148">++</span>&nbsp;<span class="op" id="7930151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930155">buf</span><span class="op" id="7930158">.</span><span class="ident" id="7930159">Reset</span><span class="op" id="7930164">(</span><span class="op" id="7930165">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930169">err</span>&nbsp;<span class="op" id="7930173">:=</span>&nbsp;<span class="ident" id="7930176">enc</span><span class="op" id="7930179">.</span><span class="ident" id="7930180">Encode</span><span class="op" id="7930186">(</span><span class="ident" id="7930187">a</span><span class="op" id="7930188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930192">if</span>&nbsp;<span class="ident" id="7930195">err</span>&nbsp;<span class="op" id="7930199">!=</span>&nbsp;<span class="ident" id="7930202">nil</span>&nbsp;<span class="op" id="7930206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930211">b</span><span class="op" id="7930212">.</span><span class="ident" id="7930213">Fatal</span><span class="op" id="7930218">(</span><span class="ident" id="7930219">err</span><span class="op" id="7930222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930229">}</span><br>
<span class="lineno">150</span><span class="op" id="7930231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7930234">func</span>&nbsp;<span class="ident" id="7930239">BenchmarkEncodeFloat64Slice</span><span class="op" id="7930266">(</span><span class="ident" id="7930267">b</span>&nbsp;<span class="op" id="7930269">*</span><span class="ident" id="7930270">testing</span><span class="op" id="7930277">.</span><span class="ident" id="7930278">B</span><span class="op" id="7930279">)</span>&nbsp;<span class="op" id="7930281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930284">var</span>&nbsp;<span class="ident" id="7930288">buf</span>&nbsp;<span class="ident" id="7930292">bytes</span><span class="op" id="7930297">.</span><span class="ident" id="7930298">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930306">enc</span>&nbsp;<span class="op" id="7930310">:=</span>&nbsp;<span class="ident" id="7930313">NewEncoder</span><span class="op" id="7930323">(</span><span class="op" id="7930324">&amp;</span><span class="ident" id="7930325">buf</span><span class="op" id="7930328">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930331">a</span>&nbsp;<span class="op" id="7930333">:=</span>&nbsp;<span class="builtinfunc" id="7930336">make</span><span class="op" id="7930340">(</span><span class="op" id="7930341">[</span><span class="op" id="7930342">]</span><span class="builtintype" id="7930343">float64</span><span class="op" id="7930350">,</span>&nbsp;<span class="num" id="7930352">1000</span><span class="op" id="7930356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930359">for</span>&nbsp;<span class="ident" id="7930363">i</span>&nbsp;<span class="op" id="7930365">:=</span>&nbsp;<span class="keyword" id="7930368">range</span>&nbsp;<span class="ident" id="7930374">a</span>&nbsp;<span class="op" id="7930376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930380">a</span><span class="op" id="7930381">[</span><span class="ident" id="7930382">i</span><span class="op" id="7930383">]</span>&nbsp;<span class="op" id="7930385">=</span>&nbsp;<span class="num" id="7930387">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930398">b</span><span class="op" id="7930399">.</span><span class="ident" id="7930400">ResetTimer</span><span class="op" id="7930410">(</span><span class="op" id="7930411">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930414">for</span>&nbsp;<span class="ident" id="7930418">i</span>&nbsp;<span class="op" id="7930420">:=</span>&nbsp;<span class="num" id="7930423">0</span><span class="op" id="7930424">;</span>&nbsp;<span class="ident" id="7930426">i</span>&nbsp;<span class="op" id="7930428">&lt;</span>&nbsp;<span class="ident" id="7930430">b</span><span class="op" id="7930431">.</span><span class="ident" id="7930432">N</span><span class="op" id="7930433">;</span>&nbsp;<span class="ident" id="7930435">i</span><span class="op" id="7930436">++</span>&nbsp;<span class="op" id="7930439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930443">buf</span><span class="op" id="7930446">.</span><span class="ident" id="7930447">Reset</span><span class="op" id="7930452">(</span><span class="op" id="7930453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930457">err</span>&nbsp;<span class="op" id="7930461">:=</span>&nbsp;<span class="ident" id="7930464">enc</span><span class="op" id="7930467">.</span><span class="ident" id="7930468">Encode</span><span class="op" id="7930474">(</span><span class="ident" id="7930475">a</span><span class="op" id="7930476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930480">if</span>&nbsp;<span class="ident" id="7930483">err</span>&nbsp;<span class="op" id="7930487">!=</span>&nbsp;<span class="ident" id="7930490">nil</span>&nbsp;<span class="op" id="7930494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930499">b</span><span class="op" id="7930500">.</span><span class="ident" id="7930501">Fatal</span><span class="op" id="7930506">(</span><span class="ident" id="7930507">err</span><span class="op" id="7930510">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930517">}</span><br>
<span class="lineno"></span><span class="op" id="7930519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7930522">func</span>&nbsp;<span class="ident" id="7930527">BenchmarkEncodeInt32Slice</span><span class="op" id="7930552">(</span><span class="ident" id="7930553">b</span>&nbsp;<span class="op" id="7930555">*</span><span class="ident" id="7930556">testing</span><span class="op" id="7930563">.</span><span class="ident" id="7930564">B</span><span class="op" id="7930565">)</span>&nbsp;<span class="op" id="7930567">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930570">var</span>&nbsp;<span class="ident" id="7930574">buf</span>&nbsp;<span class="ident" id="7930578">bytes</span><span class="op" id="7930583">.</span><span class="ident" id="7930584">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930592">enc</span>&nbsp;<span class="op" id="7930596">:=</span>&nbsp;<span class="ident" id="7930599">NewEncoder</span><span class="op" id="7930609">(</span><span class="op" id="7930610">&amp;</span><span class="ident" id="7930611">buf</span><span class="op" id="7930614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930617">a</span>&nbsp;<span class="op" id="7930619">:=</span>&nbsp;<span class="builtinfunc" id="7930622">make</span><span class="op" id="7930626">(</span><span class="op" id="7930627">[</span><span class="op" id="7930628">]</span><span class="builtintype" id="7930629">int32</span><span class="op" id="7930634">,</span>&nbsp;<span class="num" id="7930636">1000</span><span class="op" id="7930640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930643">for</span>&nbsp;<span class="ident" id="7930647">i</span>&nbsp;<span class="op" id="7930649">:=</span>&nbsp;<span class="keyword" id="7930652">range</span>&nbsp;<span class="ident" id="7930658">a</span>&nbsp;<span class="op" id="7930660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930664">a</span><span class="op" id="7930665">[</span><span class="ident" id="7930666">i</span><span class="op" id="7930667">]</span>&nbsp;<span class="op" id="7930669">=</span>&nbsp;<span class="num" id="7930671">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930680">b</span><span class="op" id="7930681">.</span><span class="ident" id="7930682">ResetTimer</span><span class="op" id="7930692">(</span><span class="op" id="7930693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930696">for</span>&nbsp;<span class="ident" id="7930700">i</span>&nbsp;<span class="op" id="7930702">:=</span>&nbsp;<span class="num" id="7930705">0</span><span class="op" id="7930706">;</span>&nbsp;<span class="ident" id="7930708">i</span>&nbsp;<span class="op" id="7930710">&lt;</span>&nbsp;<span class="ident" id="7930712">b</span><span class="op" id="7930713">.</span><span class="ident" id="7930714">N</span><span class="op" id="7930715">;</span>&nbsp;<span class="ident" id="7930717">i</span><span class="op" id="7930718">++</span>&nbsp;<span class="op" id="7930721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930725">buf</span><span class="op" id="7930728">.</span><span class="ident" id="7930729">Reset</span><span class="op" id="7930734">(</span><span class="op" id="7930735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930739">err</span>&nbsp;<span class="op" id="7930743">:=</span>&nbsp;<span class="ident" id="7930746">enc</span><span class="op" id="7930749">.</span><span class="ident" id="7930750">Encode</span><span class="op" id="7930756">(</span><span class="ident" id="7930757">a</span><span class="op" id="7930758">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930762">if</span>&nbsp;<span class="ident" id="7930765">err</span>&nbsp;<span class="op" id="7930769">!=</span>&nbsp;<span class="ident" id="7930772">nil</span>&nbsp;<span class="op" id="7930776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930781">b</span><span class="op" id="7930782">.</span><span class="ident" id="7930783">Fatal</span><span class="op" id="7930788">(</span><span class="ident" id="7930789">err</span><span class="op" id="7930792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930799">}</span><br>
<span class="lineno"></span><span class="op" id="7930801">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="7930804">func</span>&nbsp;<span class="ident" id="7930809">BenchmarkEncodeStringSlice</span><span class="op" id="7930835">(</span><span class="ident" id="7930836">b</span>&nbsp;<span class="op" id="7930838">*</span><span class="ident" id="7930839">testing</span><span class="op" id="7930846">.</span><span class="ident" id="7930847">B</span><span class="op" id="7930848">)</span>&nbsp;<span class="op" id="7930850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930853">var</span>&nbsp;<span class="ident" id="7930857">buf</span>&nbsp;<span class="ident" id="7930861">bytes</span><span class="op" id="7930866">.</span><span class="ident" id="7930867">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930875">enc</span>&nbsp;<span class="op" id="7930879">:=</span>&nbsp;<span class="ident" id="7930882">NewEncoder</span><span class="op" id="7930892">(</span><span class="op" id="7930893">&amp;</span><span class="ident" id="7930894">buf</span><span class="op" id="7930897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930900">a</span>&nbsp;<span class="op" id="7930902">:=</span>&nbsp;<span class="builtinfunc" id="7930905">make</span><span class="op" id="7930909">(</span><span class="op" id="7930910">[</span><span class="op" id="7930911">]</span><span class="builtintype" id="7930912">string</span><span class="op" id="7930918">,</span>&nbsp;<span class="num" id="7930920">1000</span><span class="op" id="7930924">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930927">for</span>&nbsp;<span class="ident" id="7930931">i</span>&nbsp;<span class="op" id="7930933">:=</span>&nbsp;<span class="keyword" id="7930936">range</span>&nbsp;<span class="ident" id="7930942">a</span>&nbsp;<span class="op" id="7930944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930948">a</span><span class="op" id="7930949">[</span><span class="ident" id="7930950">i</span><span class="op" id="7930951">]</span>&nbsp;<span class="op" id="7930953">=</span>&nbsp;<span class="string" id="7930955">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7930974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7930977">b</span><span class="op" id="7930978">.</span><span class="ident" id="7930979">ResetTimer</span><span class="op" id="7930989">(</span><span class="op" id="7930990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7930993">for</span>&nbsp;<span class="ident" id="7930997">i</span>&nbsp;<span class="op" id="7930999">:=</span>&nbsp;<span class="num" id="7931002">0</span><span class="op" id="7931003">;</span>&nbsp;<span class="ident" id="7931005">i</span>&nbsp;<span class="op" id="7931007">&lt;</span>&nbsp;<span class="ident" id="7931009">b</span><span class="op" id="7931010">.</span><span class="ident" id="7931011">N</span><span class="op" id="7931012">;</span>&nbsp;<span class="ident" id="7931014">i</span><span class="op" id="7931015">++</span>&nbsp;<span class="op" id="7931018">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931022">buf</span><span class="op" id="7931025">.</span><span class="ident" id="7931026">Reset</span><span class="op" id="7931031">(</span><span class="op" id="7931032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931036">err</span>&nbsp;<span class="op" id="7931040">:=</span>&nbsp;<span class="ident" id="7931043">enc</span><span class="op" id="7931046">.</span><span class="ident" id="7931047">Encode</span><span class="op" id="7931053">(</span><span class="ident" id="7931054">a</span><span class="op" id="7931055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931059">if</span>&nbsp;<span class="ident" id="7931062">err</span>&nbsp;<span class="op" id="7931066">!=</span>&nbsp;<span class="ident" id="7931069">nil</span>&nbsp;<span class="op" id="7931073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931078">b</span><span class="op" id="7931079">.</span><span class="ident" id="7931080">Fatal</span><span class="op" id="7931085">(</span><span class="ident" id="7931086">err</span><span class="op" id="7931089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7931093">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7931096">}</span><br>
<span class="lineno"></span><span class="op" id="7931098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7931101">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="7931147">type</span>&nbsp;<span class="ident" id="7931152">benchmarkBuf</span>&nbsp;<span class="keyword" id="7931165">struct</span>&nbsp;<span class="op" id="7931172">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931175">offset</span>&nbsp;<span class="builtintype" id="7931182">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931187">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7931194">[</span><span class="op" id="7931195">]</span><span class="builtintype" id="7931196">byte</span><br>
<span class="lineno"></span><span class="op" id="7931201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7931204">func</span>&nbsp;<span class="op" id="7931209">(</span><span class="ident" id="7931210">b</span>&nbsp;<span class="op" id="7931212">*</span><span class="ident" id="7931213">benchmarkBuf</span><span class="op" id="7931225">)</span>&nbsp;<span class="ident" id="7931227">Read</span><span class="op" id="7931231">(</span><span class="ident" id="7931232">p</span>&nbsp;<span class="op" id="7931234">[</span><span class="op" id="7931235">]</span><span class="builtintype" id="7931236">byte</span><span class="op" id="7931240">)</span>&nbsp;<span class="op" id="7931242">(</span><span class="ident" id="7931243">n</span>&nbsp;<span class="builtintype" id="7931245">int</span><span class="op" id="7931248">,</span>&nbsp;<span class="ident" id="7931250">err</span>&nbsp;<span class="builtintype" id="7931254">error</span><span class="op" id="7931259">)</span>&nbsp;<span class="op" id="7931261">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931264">n</span>&nbsp;<span class="op" id="7931266">=</span>&nbsp;<span class="builtinfunc" id="7931268">copy</span><span class="op" id="7931272">(</span><span class="ident" id="7931273">p</span><span class="op" id="7931274">,</span>&nbsp;<span class="ident" id="7931276">b</span><span class="op" id="7931277">.</span><span class="ident" id="7931278">data</span><span class="op" id="7931282">[</span><span class="ident" id="7931283">b</span><span class="op" id="7931284">.</span><span class="ident" id="7931285">offset</span><span class="op" id="7931291">:</span><span class="op" id="7931292">]</span><span class="op" id="7931293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931296">if</span>&nbsp;<span class="ident" id="7931299">n</span>&nbsp;<span class="op" id="7931301">==</span>&nbsp;<span class="num" id="7931304">0</span>&nbsp;<span class="op" id="7931306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931310">return</span>&nbsp;<span class="num" id="7931317">0</span><span class="op" id="7931318">,</span>&nbsp;<span class="ident" id="7931320">io</span><span class="op" id="7931322">.</span><span class="ident" id="7931323">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7931328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931331">b</span><span class="op" id="7931332">.</span><span class="ident" id="7931333">offset</span>&nbsp;<span class="op" id="7931340">+=</span>&nbsp;<span class="ident" id="7931343">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931346">return</span><br>
<span class="lineno"></span><span class="op" id="7931353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7931356">func</span>&nbsp;<span class="op" id="7931361">(</span><span class="ident" id="7931362">b</span>&nbsp;<span class="op" id="7931364">*</span><span class="ident" id="7931365">benchmarkBuf</span><span class="op" id="7931377">)</span>&nbsp;<span class="ident" id="7931379">ReadByte</span><span class="op" id="7931387">(</span><span class="op" id="7931388">)</span>&nbsp;<span class="op" id="7931390">(</span><span class="ident" id="7931391">c</span>&nbsp;<span class="builtintype" id="7931393">byte</span><span class="op" id="7931397">,</span>&nbsp;<span class="ident" id="7931399">err</span>&nbsp;<span class="builtintype" id="7931403">error</span><span class="op" id="7931408">)</span>&nbsp;<span class="op" id="7931410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931413">if</span>&nbsp;<span class="ident" id="7931416">b</span><span class="op" id="7931417">.</span><span class="ident" id="7931418">offset</span>&nbsp;<span class="op" id="7931425">&gt;=</span>&nbsp;<span class="builtinfunc" id="7931428">len</span><span class="op" id="7931431">(</span><span class="ident" id="7931432">b</span><span class="op" id="7931433">.</span><span class="ident" id="7931434">data</span><span class="op" id="7931438">)</span>&nbsp;<span class="op" id="7931440">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931444">return</span>&nbsp;<span class="num" id="7931451">0</span><span class="op" id="7931452">,</span>&nbsp;<span class="ident" id="7931454">io</span><span class="op" id="7931456">.</span><span class="ident" id="7931457">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7931462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931465">c</span>&nbsp;<span class="op" id="7931467">=</span>&nbsp;<span class="ident" id="7931469">b</span><span class="op" id="7931470">.</span><span class="ident" id="7931471">data</span><span class="op" id="7931475">[</span><span class="ident" id="7931476">b</span><span class="op" id="7931477">.</span><span class="ident" id="7931478">offset</span><span class="op" id="7931484">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931487">b</span><span class="op" id="7931488">.</span><span class="ident" id="7931489">offset</span><span class="op" id="7931495">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931499">return</span><br>
<span class="lineno">225</span><span class="op" id="7931506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7931509">func</span>&nbsp;<span class="op" id="7931514">(</span><span class="ident" id="7931515">b</span>&nbsp;<span class="op" id="7931517">*</span><span class="ident" id="7931518">benchmarkBuf</span><span class="op" id="7931530">)</span>&nbsp;<span class="ident" id="7931532">reset</span><span class="op" id="7931537">(</span><span class="op" id="7931538">)</span>&nbsp;<span class="op" id="7931540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931543">b</span><span class="op" id="7931544">.</span><span class="ident" id="7931545">offset</span>&nbsp;<span class="op" id="7931552">=</span>&nbsp;<span class="num" id="7931554">0</span><br>
<span class="lineno"></span><span class="op" id="7931556">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7931559">func</span>&nbsp;<span class="ident" id="7931564">BenchmarkDecodeComplex128Slice</span><span class="op" id="7931594">(</span><span class="ident" id="7931595">b</span>&nbsp;<span class="op" id="7931597">*</span><span class="ident" id="7931598">testing</span><span class="op" id="7931605">.</span><span class="ident" id="7931606">B</span><span class="op" id="7931607">)</span>&nbsp;<span class="op" id="7931609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931612">var</span>&nbsp;<span class="ident" id="7931616">buf</span>&nbsp;<span class="ident" id="7931620">bytes</span><span class="op" id="7931625">.</span><span class="ident" id="7931626">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931634">enc</span>&nbsp;<span class="op" id="7931638">:=</span>&nbsp;<span class="ident" id="7931641">NewEncoder</span><span class="op" id="7931651">(</span><span class="op" id="7931652">&amp;</span><span class="ident" id="7931653">buf</span><span class="op" id="7931656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931659">a</span>&nbsp;<span class="op" id="7931661">:=</span>&nbsp;<span class="builtinfunc" id="7931664">make</span><span class="op" id="7931668">(</span><span class="op" id="7931669">[</span><span class="op" id="7931670">]</span><span class="builtintype" id="7931671">complex128</span><span class="op" id="7931681">,</span>&nbsp;<span class="num" id="7931683">1000</span><span class="op" id="7931687">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931690">for</span>&nbsp;<span class="ident" id="7931694">i</span>&nbsp;<span class="op" id="7931696">:=</span>&nbsp;<span class="keyword" id="7931699">range</span>&nbsp;<span class="ident" id="7931705">a</span>&nbsp;<span class="op" id="7931707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931711">a</span><span class="op" id="7931712">[</span><span class="ident" id="7931713">i</span><span class="op" id="7931714">]</span>&nbsp;<span class="op" id="7931716">=</span>&nbsp;<span class="num" id="7931718">1.2</span>&nbsp;<span class="op" id="7931722">+</span>&nbsp;<span class="num" id="7931724">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7931730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931733">err</span>&nbsp;<span class="op" id="7931737">:=</span>&nbsp;<span class="ident" id="7931740">enc</span><span class="op" id="7931743">.</span><span class="ident" id="7931744">Encode</span><span class="op" id="7931750">(</span><span class="ident" id="7931751">a</span><span class="op" id="7931752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931755">if</span>&nbsp;<span class="ident" id="7931758">err</span>&nbsp;<span class="op" id="7931762">!=</span>&nbsp;<span class="ident" id="7931765">nil</span>&nbsp;<span class="op" id="7931769">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931773">b</span><span class="op" id="7931774">.</span><span class="ident" id="7931775">Fatal</span><span class="op" id="7931780">(</span><span class="ident" id="7931781">err</span><span class="op" id="7931784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7931787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931790">x</span>&nbsp;<span class="op" id="7931792">:=</span>&nbsp;<span class="builtinfunc" id="7931795">make</span><span class="op" id="7931799">(</span><span class="op" id="7931800">[</span><span class="op" id="7931801">]</span><span class="builtintype" id="7931802">complex128</span><span class="op" id="7931812">,</span>&nbsp;<span class="num" id="7931814">1000</span><span class="op" id="7931818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931821">bbuf</span>&nbsp;<span class="op" id="7931826">:=</span>&nbsp;<span class="ident" id="7931829">benchmarkBuf</span><span class="op" id="7931841">{</span><span class="ident" id="7931842">data</span><span class="op" id="7931846">:</span>&nbsp;<span class="ident" id="7931848">buf</span><span class="op" id="7931851">.</span><span class="ident" id="7931852">Bytes</span><span class="op" id="7931857">(</span><span class="op" id="7931858">)</span><span class="op" id="7931859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931862">b</span><span class="op" id="7931863">.</span><span class="ident" id="7931864">ResetTimer</span><span class="op" id="7931874">(</span><span class="op" id="7931875">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931878">for</span>&nbsp;<span class="ident" id="7931882">i</span>&nbsp;<span class="op" id="7931884">:=</span>&nbsp;<span class="num" id="7931887">0</span><span class="op" id="7931888">;</span>&nbsp;<span class="ident" id="7931890">i</span>&nbsp;<span class="op" id="7931892">&lt;</span>&nbsp;<span class="ident" id="7931894">b</span><span class="op" id="7931895">.</span><span class="ident" id="7931896">N</span><span class="op" id="7931897">;</span>&nbsp;<span class="ident" id="7931899">i</span><span class="op" id="7931900">++</span>&nbsp;<span class="op" id="7931903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931907">bbuf</span><span class="op" id="7931911">.</span><span class="ident" id="7931912">reset</span><span class="op" id="7931917">(</span><span class="op" id="7931918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931922">dec</span>&nbsp;<span class="op" id="7931926">:=</span>&nbsp;<span class="ident" id="7931929">NewDecoder</span><span class="op" id="7931939">(</span><span class="op" id="7931940">&amp;</span><span class="ident" id="7931941">bbuf</span><span class="op" id="7931945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931949">err</span>&nbsp;<span class="op" id="7931953">:=</span>&nbsp;<span class="ident" id="7931956">dec</span><span class="op" id="7931959">.</span><span class="ident" id="7931960">Decode</span><span class="op" id="7931966">(</span><span class="op" id="7931967">&amp;</span><span class="ident" id="7931968">x</span><span class="op" id="7931969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7931973">if</span>&nbsp;<span class="ident" id="7931976">err</span>&nbsp;<span class="op" id="7931980">!=</span>&nbsp;<span class="ident" id="7931983">nil</span>&nbsp;<span class="op" id="7931987">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7931992">b</span><span class="op" id="7931993">.</span><span class="ident" id="7931994">Fatal</span><span class="op" id="7931999">(</span><span class="ident" id="7932000">i</span><span class="op" id="7932001">,</span>&nbsp;<span class="ident" id="7932003">err</span><span class="op" id="7932006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7932010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7932013">}</span><br>
<span class="lineno"></span><span class="op" id="7932015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7932018">func</span>&nbsp;<span class="ident" id="7932023">BenchmarkDecodeFloat64Slice</span><span class="op" id="7932050">(</span><span class="ident" id="7932051">b</span>&nbsp;<span class="op" id="7932053">*</span><span class="ident" id="7932054">testing</span><span class="op" id="7932061">.</span><span class="ident" id="7932062">B</span><span class="op" id="7932063">)</span>&nbsp;<span class="op" id="7932065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932068">var</span>&nbsp;<span class="ident" id="7932072">buf</span>&nbsp;<span class="ident" id="7932076">bytes</span><span class="op" id="7932081">.</span><span class="ident" id="7932082">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932090">enc</span>&nbsp;<span class="op" id="7932094">:=</span>&nbsp;<span class="ident" id="7932097">NewEncoder</span><span class="op" id="7932107">(</span><span class="op" id="7932108">&amp;</span><span class="ident" id="7932109">buf</span><span class="op" id="7932112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932115">a</span>&nbsp;<span class="op" id="7932117">:=</span>&nbsp;<span class="builtinfunc" id="7932120">make</span><span class="op" id="7932124">(</span><span class="op" id="7932125">[</span><span class="op" id="7932126">]</span><span class="builtintype" id="7932127">float64</span><span class="op" id="7932134">,</span>&nbsp;<span class="num" id="7932136">1000</span><span class="op" id="7932140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932143">for</span>&nbsp;<span class="ident" id="7932147">i</span>&nbsp;<span class="op" id="7932149">:=</span>&nbsp;<span class="keyword" id="7932152">range</span>&nbsp;<span class="ident" id="7932158">a</span>&nbsp;<span class="op" id="7932160">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932164">a</span><span class="op" id="7932165">[</span><span class="ident" id="7932166">i</span><span class="op" id="7932167">]</span>&nbsp;<span class="op" id="7932169">=</span>&nbsp;<span class="num" id="7932171">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7932179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932182">err</span>&nbsp;<span class="op" id="7932186">:=</span>&nbsp;<span class="ident" id="7932189">enc</span><span class="op" id="7932192">.</span><span class="ident" id="7932193">Encode</span><span class="op" id="7932199">(</span><span class="ident" id="7932200">a</span><span class="op" id="7932201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932204">if</span>&nbsp;<span class="ident" id="7932207">err</span>&nbsp;<span class="op" id="7932211">!=</span>&nbsp;<span class="ident" id="7932214">nil</span>&nbsp;<span class="op" id="7932218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932222">b</span><span class="op" id="7932223">.</span><span class="ident" id="7932224">Fatal</span><span class="op" id="7932229">(</span><span class="ident" id="7932230">err</span><span class="op" id="7932233">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7932236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932239">x</span>&nbsp;<span class="op" id="7932241">:=</span>&nbsp;<span class="builtinfunc" id="7932244">make</span><span class="op" id="7932248">(</span><span class="op" id="7932249">[</span><span class="op" id="7932250">]</span><span class="builtintype" id="7932251">float64</span><span class="op" id="7932258">,</span>&nbsp;<span class="num" id="7932260">1000</span><span class="op" id="7932264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932267">bbuf</span>&nbsp;<span class="op" id="7932272">:=</span>&nbsp;<span class="ident" id="7932275">benchmarkBuf</span><span class="op" id="7932287">{</span><span class="ident" id="7932288">data</span><span class="op" id="7932292">:</span>&nbsp;<span class="ident" id="7932294">buf</span><span class="op" id="7932297">.</span><span class="ident" id="7932298">Bytes</span><span class="op" id="7932303">(</span><span class="op" id="7932304">)</span><span class="op" id="7932305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932308">b</span><span class="op" id="7932309">.</span><span class="ident" id="7932310">ResetTimer</span><span class="op" id="7932320">(</span><span class="op" id="7932321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932324">for</span>&nbsp;<span class="ident" id="7932328">i</span>&nbsp;<span class="op" id="7932330">:=</span>&nbsp;<span class="num" id="7932333">0</span><span class="op" id="7932334">;</span>&nbsp;<span class="ident" id="7932336">i</span>&nbsp;<span class="op" id="7932338">&lt;</span>&nbsp;<span class="ident" id="7932340">b</span><span class="op" id="7932341">.</span><span class="ident" id="7932342">N</span><span class="op" id="7932343">;</span>&nbsp;<span class="ident" id="7932345">i</span><span class="op" id="7932346">++</span>&nbsp;<span class="op" id="7932349">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932353">bbuf</span><span class="op" id="7932357">.</span><span class="ident" id="7932358">reset</span><span class="op" id="7932363">(</span><span class="op" id="7932364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932368">dec</span>&nbsp;<span class="op" id="7932372">:=</span>&nbsp;<span class="ident" id="7932375">NewDecoder</span><span class="op" id="7932385">(</span><span class="op" id="7932386">&amp;</span><span class="ident" id="7932387">bbuf</span><span class="op" id="7932391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932395">err</span>&nbsp;<span class="op" id="7932399">:=</span>&nbsp;<span class="ident" id="7932402">dec</span><span class="op" id="7932405">.</span><span class="ident" id="7932406">Decode</span><span class="op" id="7932412">(</span><span class="op" id="7932413">&amp;</span><span class="ident" id="7932414">x</span><span class="op" id="7932415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932419">if</span>&nbsp;<span class="ident" id="7932422">err</span>&nbsp;<span class="op" id="7932426">!=</span>&nbsp;<span class="ident" id="7932429">nil</span>&nbsp;<span class="op" id="7932433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932438">b</span><span class="op" id="7932439">.</span><span class="ident" id="7932440">Fatal</span><span class="op" id="7932445">(</span><span class="ident" id="7932446">i</span><span class="op" id="7932447">,</span>&nbsp;<span class="ident" id="7932449">err</span><span class="op" id="7932452">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7932456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7932459">}</span><br>
<span class="lineno"></span><span class="op" id="7932461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7932464">func</span>&nbsp;<span class="ident" id="7932469">BenchmarkDecodeInt32Slice</span><span class="op" id="7932494">(</span><span class="ident" id="7932495">b</span>&nbsp;<span class="op" id="7932497">*</span><span class="ident" id="7932498">testing</span><span class="op" id="7932505">.</span><span class="ident" id="7932506">B</span><span class="op" id="7932507">)</span>&nbsp;<span class="op" id="7932509">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932512">var</span>&nbsp;<span class="ident" id="7932516">buf</span>&nbsp;<span class="ident" id="7932520">bytes</span><span class="op" id="7932525">.</span><span class="ident" id="7932526">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932534">enc</span>&nbsp;<span class="op" id="7932538">:=</span>&nbsp;<span class="ident" id="7932541">NewEncoder</span><span class="op" id="7932551">(</span><span class="op" id="7932552">&amp;</span><span class="ident" id="7932553">buf</span><span class="op" id="7932556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932559">a</span>&nbsp;<span class="op" id="7932561">:=</span>&nbsp;<span class="builtinfunc" id="7932564">make</span><span class="op" id="7932568">(</span><span class="op" id="7932569">[</span><span class="op" id="7932570">]</span><span class="builtintype" id="7932571">int32</span><span class="op" id="7932576">,</span>&nbsp;<span class="num" id="7932578">1000</span><span class="op" id="7932582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932585">for</span>&nbsp;<span class="ident" id="7932589">i</span>&nbsp;<span class="op" id="7932591">:=</span>&nbsp;<span class="keyword" id="7932594">range</span>&nbsp;<span class="ident" id="7932600">a</span>&nbsp;<span class="op" id="7932602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932606">a</span><span class="op" id="7932607">[</span><span class="ident" id="7932608">i</span><span class="op" id="7932609">]</span>&nbsp;<span class="op" id="7932611">=</span>&nbsp;<span class="num" id="7932613">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7932619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932622">err</span>&nbsp;<span class="op" id="7932626">:=</span>&nbsp;<span class="ident" id="7932629">enc</span><span class="op" id="7932632">.</span><span class="ident" id="7932633">Encode</span><span class="op" id="7932639">(</span><span class="ident" id="7932640">a</span><span class="op" id="7932641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932644">if</span>&nbsp;<span class="ident" id="7932647">err</span>&nbsp;<span class="op" id="7932651">!=</span>&nbsp;<span class="ident" id="7932654">nil</span>&nbsp;<span class="op" id="7932658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932662">b</span><span class="op" id="7932663">.</span><span class="ident" id="7932664">Fatal</span><span class="op" id="7932669">(</span><span class="ident" id="7932670">err</span><span class="op" id="7932673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7932676">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932679">x</span>&nbsp;<span class="op" id="7932681">:=</span>&nbsp;<span class="builtinfunc" id="7932684">make</span><span class="op" id="7932688">(</span><span class="op" id="7932689">[</span><span class="op" id="7932690">]</span><span class="builtintype" id="7932691">int32</span><span class="op" id="7932696">,</span>&nbsp;<span class="num" id="7932698">1000</span><span class="op" id="7932702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932705">bbuf</span>&nbsp;<span class="op" id="7932710">:=</span>&nbsp;<span class="ident" id="7932713">benchmarkBuf</span><span class="op" id="7932725">{</span><span class="ident" id="7932726">data</span><span class="op" id="7932730">:</span>&nbsp;<span class="ident" id="7932732">buf</span><span class="op" id="7932735">.</span><span class="ident" id="7932736">Bytes</span><span class="op" id="7932741">(</span><span class="op" id="7932742">)</span><span class="op" id="7932743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932746">b</span><span class="op" id="7932747">.</span><span class="ident" id="7932748">ResetTimer</span><span class="op" id="7932758">(</span><span class="op" id="7932759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932762">for</span>&nbsp;<span class="ident" id="7932766">i</span>&nbsp;<span class="op" id="7932768">:=</span>&nbsp;<span class="num" id="7932771">0</span><span class="op" id="7932772">;</span>&nbsp;<span class="ident" id="7932774">i</span>&nbsp;<span class="op" id="7932776">&lt;</span>&nbsp;<span class="ident" id="7932778">b</span><span class="op" id="7932779">.</span><span class="ident" id="7932780">N</span><span class="op" id="7932781">;</span>&nbsp;<span class="ident" id="7932783">i</span><span class="op" id="7932784">++</span>&nbsp;<span class="op" id="7932787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932791">bbuf</span><span class="op" id="7932795">.</span><span class="ident" id="7932796">reset</span><span class="op" id="7932801">(</span><span class="op" id="7932802">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932806">dec</span>&nbsp;<span class="op" id="7932810">:=</span>&nbsp;<span class="ident" id="7932813">NewDecoder</span><span class="op" id="7932823">(</span><span class="op" id="7932824">&amp;</span><span class="ident" id="7932825">bbuf</span><span class="op" id="7932829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932833">err</span>&nbsp;<span class="op" id="7932837">:=</span>&nbsp;<span class="ident" id="7932840">dec</span><span class="op" id="7932843">.</span><span class="ident" id="7932844">Decode</span><span class="op" id="7932850">(</span><span class="op" id="7932851">&amp;</span><span class="ident" id="7932852">x</span><span class="op" id="7932853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932857">if</span>&nbsp;<span class="ident" id="7932860">err</span>&nbsp;<span class="op" id="7932864">!=</span>&nbsp;<span class="ident" id="7932867">nil</span>&nbsp;<span class="op" id="7932871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932876">b</span><span class="op" id="7932877">.</span><span class="ident" id="7932878">Fatal</span><span class="op" id="7932883">(</span><span class="ident" id="7932884">i</span><span class="op" id="7932885">,</span>&nbsp;<span class="ident" id="7932887">err</span><span class="op" id="7932890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7932894">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7932897">}</span><br>
<span class="lineno"></span><span class="op" id="7932899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7932902">func</span>&nbsp;<span class="ident" id="7932907">BenchmarkDecodeStringSlice</span><span class="op" id="7932933">(</span><span class="ident" id="7932934">b</span>&nbsp;<span class="op" id="7932936">*</span><span class="ident" id="7932937">testing</span><span class="op" id="7932944">.</span><span class="ident" id="7932945">B</span><span class="op" id="7932946">)</span>&nbsp;<span class="op" id="7932948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7932951">var</span>&nbsp;<span class="ident" id="7932955">buf</span>&nbsp;<span class="ident" id="7932959">bytes</span><span class="op" id="7932964">.</span><span class="ident" id="7932965">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932973">enc</span>&nbsp;<span class="op" id="7932977">:=</span>&nbsp;<span class="ident" id="7932980">NewEncoder</span><span class="op" id="7932990">(</span><span class="op" id="7932991">&amp;</span><span class="ident" id="7932992">buf</span><span class="op" id="7932995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7932998">a</span>&nbsp;<span class="op" id="7933000">:=</span>&nbsp;<span class="builtinfunc" id="7933003">make</span><span class="op" id="7933007">(</span><span class="op" id="7933008">[</span><span class="op" id="7933009">]</span><span class="builtintype" id="7933010">string</span><span class="op" id="7933016">,</span>&nbsp;<span class="num" id="7933018">1000</span><span class="op" id="7933022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7933025">for</span>&nbsp;<span class="ident" id="7933029">i</span>&nbsp;<span class="op" id="7933031">:=</span>&nbsp;<span class="keyword" id="7933034">range</span>&nbsp;<span class="ident" id="7933040">a</span>&nbsp;<span class="op" id="7933042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7933046">a</span><span class="op" id="7933047">[</span><span class="ident" id="7933048">i</span><span class="op" id="7933049">]</span>&nbsp;<span class="op" id="7933051">=</span>&nbsp;<span class="string" id="7933053">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7933072">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7933075">err</span>&nbsp;<span class="op" id="7933079">:=</span>&nbsp;<span class="ident" id="7933082">enc</span><span class="op" id="7933085">.</span><span class="ident" id="7933086">Encode</span><span class="op" id="7933092">(</span><span class="ident" id="7933093">a</span><span class="op" id="7933094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7933097">if</span>&nbsp;<span class="ident" id="7933100">err</span>&nbsp;<span class="op" id="7933104">!=</span>&nbsp;<span class="ident" id="7933107">nil</span>&nbsp;<span class="op" id="7933111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7933115">b</span><span class="op" id="7933116">.</span><span class="ident" id="7933117">Fatal</span><span class="op" id="7933122">(</span><span class="ident" id="7933123">err</span><span class="op" id="7933126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7933129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7933132">x</span>&nbsp;<span class="op" id="7933134">:=</span>&nbsp;<span class="builtinfunc" id="7933137">make</span><span class="op" id="7933141">(</span><span class="op" id="7933142">[</span><span class="op" id="7933143">]</span><span class="builtintype" id="7933144">string</span><span class="op" id="7933150">,</span>&nbsp;<span class="num" id="7933152">1000</span><span class="op" id="7933156">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7933159">bbuf</span>&nbsp;<span class="op" id="7933164">:=</span>&nbsp;<span class="ident" id="7933167">benchmarkBuf</span><span class="op" id="7933179">{</span><span class="ident" id="7933180">data</span><span class="op" id="7933184">:</span>&nbsp;<span class="ident" id="7933186">buf</span><span class="op" id="7933189">.</span><span class="ident" id="7933190">Bytes</span><span class="op" id="7933195">(</span><span class="op" id="7933196">)</span><span class="op" id="7933197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7933200">b</span><span class="op" id="7933201">.</span><span class="ident" id="7933202">ResetTimer</span><span class="op" id="7933212">(</span><span class="op" id="7933213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7933216">for</span>&nbsp;<span class="ident" id="7933220">i</span>&nbsp;<span class="op" id="7933222">:=</span>&nbsp;<span class="num" id="7933225">0</span><span class="op" id="7933226">;</span>&nbsp;<span class="ident" id="7933228">i</span>&nbsp;<span class="op" id="7933230">&lt;</span>&nbsp;<span class="ident" id="7933232">b</span><span class="op" id="7933233">.</span><span class="ident" id="7933234">N</span><span class="op" id="7933235">;</span>&nbsp;<span class="ident" id="7933237">i</span><span class="op" id="7933238">++</span>&nbsp;<span class="op" id="7933241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7933245">bbuf</span><span class="op" id="7933249">.</span><span class="ident" id="7933250">reset</span><span class="op" id="7933255">(</span><span class="op" id="7933256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7933260">dec</span>&nbsp;<span class="op" id="7933264">:=</span>&nbsp;<span class="ident" id="7933267">NewDecoder</span><span class="op" id="7933277">(</span><span class="op" id="7933278">&amp;</span><span class="ident" id="7933279">bbuf</span><span class="op" id="7933283">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7933287">err</span>&nbsp;<span class="op" id="7933291">:=</span>&nbsp;<span class="ident" id="7933294">dec</span><span class="op" id="7933297">.</span><span class="ident" id="7933298">Decode</span><span class="op" id="7933304">(</span><span class="op" id="7933305">&amp;</span><span class="ident" id="7933306">x</span><span class="op" id="7933307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7933311">if</span>&nbsp;<span class="ident" id="7933314">err</span>&nbsp;<span class="op" id="7933318">!=</span>&nbsp;<span class="ident" id="7933321">nil</span>&nbsp;<span class="op" id="7933325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7933330">b</span><span class="op" id="7933331">.</span><span class="ident" id="7933332">Fatal</span><span class="op" id="7933337">(</span><span class="ident" id="7933338">i</span><span class="op" id="7933339">,</span>&nbsp;<span class="ident" id="7933341">err</span><span class="op" id="7933344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7933348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7933351">}</span><br>
<span class="lineno">325</span><span class="op" id="7933353">}</span>
</div>
</body>
</html>
