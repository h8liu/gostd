<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html" class="current">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2418156">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2418212">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2418266">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2418317">//&nbsp;General&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2418352">package</span>&nbsp;<span class="ident" id="2418360">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2418364">import</span>&nbsp;<span class="string" id="2418371">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2418382">//&nbsp;Expand&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;based&nbsp;on&nbsp;the&nbsp;mapping&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2418461">//&nbsp;For&nbsp;example,&nbsp;os.ExpandEnv(s)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;os.Expand(s,&nbsp;os.Getenv).</span><br>
<span class="lineno"></span><span class="keyword" id="2418535">func</span>&nbsp;<span class="ident" id="2418540">Expand</span><span class="op" id="2418546">(</span><span class="ident" id="2418547">s</span>&nbsp;<span class="builtintype" id="2418549">string</span><span class="op" id="2418555">,</span>&nbsp;<span class="ident" id="2418557">mapping</span>&nbsp;<span class="keyword" id="2418565">func</span><span class="op" id="2418569">(</span><span class="builtintype" id="2418570">string</span><span class="op" id="2418576">)</span>&nbsp;<span class="builtintype" id="2418578">string</span><span class="op" id="2418584">)</span>&nbsp;<span class="builtintype" id="2418586">string</span>&nbsp;<span class="op" id="2418593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2418596">buf</span>&nbsp;<span class="op" id="2418600">:=</span>&nbsp;<span class="builtinfunc" id="2418603">make</span><span class="op" id="2418607">(</span><span class="op" id="2418608">[</span><span class="op" id="2418609">]</span><span class="builtintype" id="2418610">byte</span><span class="op" id="2418614">,</span>&nbsp;<span class="num" id="2418616">0</span><span class="op" id="2418617">,</span>&nbsp;<span class="num" id="2418619">2</span><span class="op" id="2418620">*</span><span class="builtinfunc" id="2418621">len</span><span class="op" id="2418624">(</span><span class="ident" id="2418625">s</span><span class="op" id="2418626">)</span><span class="op" id="2418627">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2418630">//&nbsp;${}&nbsp;is&nbsp;all&nbsp;ASCII,&nbsp;so&nbsp;bytes&nbsp;are&nbsp;fine&nbsp;for&nbsp;this&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2418690">i</span>&nbsp;<span class="op" id="2418692">:=</span>&nbsp;<span class="num" id="2418695">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2418698">for</span>&nbsp;<span class="ident" id="2418702">j</span>&nbsp;<span class="op" id="2418704">:=</span>&nbsp;<span class="num" id="2418707">0</span><span class="op" id="2418708">;</span>&nbsp;<span class="ident" id="2418710">j</span>&nbsp;<span class="op" id="2418712">&lt;</span>&nbsp;<span class="builtinfunc" id="2418714">len</span><span class="op" id="2418717">(</span><span class="ident" id="2418718">s</span><span class="op" id="2418719">)</span><span class="op" id="2418720">;</span>&nbsp;<span class="ident" id="2418722">j</span><span class="op" id="2418723">++</span>&nbsp;<span class="op" id="2418726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2418730">if</span>&nbsp;<span class="ident" id="2418733">s</span><span class="op" id="2418734">[</span><span class="ident" id="2418735">j</span><span class="op" id="2418736">]</span>&nbsp;<span class="op" id="2418738">==</span>&nbsp;<span class="string" id="2418741">&#39;$&#39;</span>&nbsp;<span class="op" id="2418745">&amp;&amp;</span>&nbsp;<span class="ident" id="2418748">j</span><span class="op" id="2418749">+</span><span class="num" id="2418750">1</span>&nbsp;<span class="op" id="2418752">&lt;</span>&nbsp;<span class="builtinfunc" id="2418754">len</span><span class="op" id="2418757">(</span><span class="ident" id="2418758">s</span><span class="op" id="2418759">)</span>&nbsp;<span class="op" id="2418761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2418766">buf</span>&nbsp;<span class="op" id="2418770">=</span>&nbsp;<span class="builtinfunc" id="2418772">append</span><span class="op" id="2418778">(</span><span class="ident" id="2418779">buf</span><span class="op" id="2418782">,</span>&nbsp;<span class="ident" id="2418784">s</span><span class="op" id="2418785">[</span><span class="ident" id="2418786">i</span><span class="op" id="2418787">:</span><span class="ident" id="2418788">j</span><span class="op" id="2418789">]</span><span class="op" id="2418790">...</span><span class="op" id="2418793">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2418798">name</span><span class="op" id="2418802">,</span>&nbsp;<span class="ident" id="2418804">w</span>&nbsp;<span class="op" id="2418806">:=</span>&nbsp;<span class="ident" id="2418809">getShellName</span><span class="op" id="2418821">(</span><span class="ident" id="2418822">s</span><span class="op" id="2418823">[</span><span class="ident" id="2418824">j</span><span class="op" id="2418825">+</span><span class="num" id="2418826">1</span><span class="op" id="2418827">:</span><span class="op" id="2418828">]</span><span class="op" id="2418829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2418834">buf</span>&nbsp;<span class="op" id="2418838">=</span>&nbsp;<span class="builtinfunc" id="2418840">append</span><span class="op" id="2418846">(</span><span class="ident" id="2418847">buf</span><span class="op" id="2418850">,</span>&nbsp;<span class="ident" id="2418852">mapping</span><span class="op" id="2418859">(</span><span class="ident" id="2418860">name</span><span class="op" id="2418864">)</span><span class="op" id="2418865">...</span><span class="op" id="2418868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2418873">j</span>&nbsp;<span class="op" id="2418875">+=</span>&nbsp;<span class="ident" id="2418878">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2418883">i</span>&nbsp;<span class="op" id="2418885">=</span>&nbsp;<span class="ident" id="2418887">j</span>&nbsp;<span class="op" id="2418889">+</span>&nbsp;<span class="num" id="2418891">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2418895">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2418898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2418901">return</span>&nbsp;<span class="builtintype" id="2418908">string</span><span class="op" id="2418914">(</span><span class="ident" id="2418915">buf</span><span class="op" id="2418918">)</span>&nbsp;<span class="op" id="2418920">+</span>&nbsp;<span class="ident" id="2418922">s</span><span class="op" id="2418923">[</span><span class="ident" id="2418924">i</span><span class="op" id="2418925">:</span><span class="op" id="2418926">]</span><br>
<span class="lineno"></span><span class="op" id="2418928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2418931">//&nbsp;ExpandEnv&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;according&nbsp;to&nbsp;the&nbsp;values</span><br>
<span class="lineno">30</span><span class="comment" id="2419006">//&nbsp;of&nbsp;the&nbsp;current&nbsp;environment&nbsp;variables.&nbsp;&nbsp;References&nbsp;to&nbsp;undefined</span><br>
<span class="lineno"></span><span class="comment" id="2419072">//&nbsp;variables&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2419119">func</span>&nbsp;<span class="ident" id="2419124">ExpandEnv</span><span class="op" id="2419133">(</span><span class="ident" id="2419134">s</span>&nbsp;<span class="builtintype" id="2419136">string</span><span class="op" id="2419142">)</span>&nbsp;<span class="builtintype" id="2419144">string</span>&nbsp;<span class="op" id="2419151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2419154">return</span>&nbsp;<span class="ident" id="2419161">Expand</span><span class="op" id="2419167">(</span><span class="ident" id="2419168">s</span><span class="op" id="2419169">,</span>&nbsp;<span class="ident" id="2419171">Getenv</span><span class="op" id="2419177">)</span><br>
<span class="lineno"></span><span class="op" id="2419179">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2419182">//&nbsp;isSpellSpecialVar&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;identifies&nbsp;a&nbsp;special</span><br>
<span class="lineno"></span><span class="comment" id="2419254">//&nbsp;shell&nbsp;variable&nbsp;such&nbsp;as&nbsp;$*.</span><br>
<span class="lineno"></span><span class="keyword" id="2419284">func</span>&nbsp;<span class="ident" id="2419289">isShellSpecialVar</span><span class="op" id="2419306">(</span><span class="ident" id="2419307">c</span>&nbsp;<span class="builtintype" id="2419309">uint8</span><span class="op" id="2419314">)</span>&nbsp;<span class="builtintype" id="2419316">bool</span>&nbsp;<span class="op" id="2419321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2419324">switch</span>&nbsp;<span class="ident" id="2419331">c</span>&nbsp;<span class="op" id="2419333">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2419336">case</span>&nbsp;<span class="string" id="2419341">&#39;*&#39;</span><span class="op" id="2419344">,</span>&nbsp;<span class="string" id="2419346">&#39;#&#39;</span><span class="op" id="2419349">,</span>&nbsp;<span class="string" id="2419351">&#39;$&#39;</span><span class="op" id="2419354">,</span>&nbsp;<span class="string" id="2419356">&#39;@&#39;</span><span class="op" id="2419359">,</span>&nbsp;<span class="string" id="2419361">&#39;!&#39;</span><span class="op" id="2419364">,</span>&nbsp;<span class="string" id="2419366">&#39;?&#39;</span><span class="op" id="2419369">,</span>&nbsp;<span class="string" id="2419371">&#39;0&#39;</span><span class="op" id="2419374">,</span>&nbsp;<span class="string" id="2419376">&#39;1&#39;</span><span class="op" id="2419379">,</span>&nbsp;<span class="string" id="2419381">&#39;2&#39;</span><span class="op" id="2419384">,</span>&nbsp;<span class="string" id="2419386">&#39;3&#39;</span><span class="op" id="2419389">,</span>&nbsp;<span class="string" id="2419391">&#39;4&#39;</span><span class="op" id="2419394">,</span>&nbsp;<span class="string" id="2419396">&#39;5&#39;</span><span class="op" id="2419399">,</span>&nbsp;<span class="string" id="2419401">&#39;6&#39;</span><span class="op" id="2419404">,</span>&nbsp;<span class="string" id="2419406">&#39;7&#39;</span><span class="op" id="2419409">,</span>&nbsp;<span class="string" id="2419411">&#39;8&#39;</span><span class="op" id="2419414">,</span>&nbsp;<span class="string" id="2419416">&#39;9&#39;</span><span class="op" id="2419419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2419423">return</span>&nbsp;<span class="builtintype" id="2419430">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2419436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2419439">return</span>&nbsp;<span class="builtintype" id="2419446">false</span><br>
<span class="lineno"></span><span class="op" id="2419452">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2419455">//&nbsp;isAlphaNum&nbsp;reports&nbsp;whether&nbsp;the&nbsp;byte&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter,&nbsp;number,&nbsp;or&nbsp;underscore</span><br>
<span class="lineno"></span><span class="keyword" id="2419536">func</span>&nbsp;<span class="ident" id="2419541">isAlphaNum</span><span class="op" id="2419551">(</span><span class="ident" id="2419552">c</span>&nbsp;<span class="builtintype" id="2419554">uint8</span><span class="op" id="2419559">)</span>&nbsp;<span class="builtintype" id="2419561">bool</span>&nbsp;<span class="op" id="2419566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2419569">return</span>&nbsp;<span class="ident" id="2419576">c</span>&nbsp;<span class="op" id="2419578">==</span>&nbsp;<span class="string" id="2419581">&#39;_&#39;</span>&nbsp;<span class="op" id="2419585">||</span>&nbsp;<span class="string" id="2419588">&#39;0&#39;</span>&nbsp;<span class="op" id="2419592">&lt;=</span>&nbsp;<span class="ident" id="2419595">c</span>&nbsp;<span class="op" id="2419597">&amp;&amp;</span>&nbsp;<span class="ident" id="2419600">c</span>&nbsp;<span class="op" id="2419602">&lt;=</span>&nbsp;<span class="string" id="2419605">&#39;9&#39;</span>&nbsp;<span class="op" id="2419609">||</span>&nbsp;<span class="string" id="2419612">&#39;a&#39;</span>&nbsp;<span class="op" id="2419616">&lt;=</span>&nbsp;<span class="ident" id="2419619">c</span>&nbsp;<span class="op" id="2419621">&amp;&amp;</span>&nbsp;<span class="ident" id="2419624">c</span>&nbsp;<span class="op" id="2419626">&lt;=</span>&nbsp;<span class="string" id="2419629">&#39;z&#39;</span>&nbsp;<span class="op" id="2419633">||</span>&nbsp;<span class="string" id="2419636">&#39;A&#39;</span>&nbsp;<span class="op" id="2419640">&lt;=</span>&nbsp;<span class="ident" id="2419643">c</span>&nbsp;<span class="op" id="2419645">&amp;&amp;</span>&nbsp;<span class="ident" id="2419648">c</span>&nbsp;<span class="op" id="2419650">&lt;=</span>&nbsp;<span class="string" id="2419653">&#39;Z&#39;</span><br>
<span class="lineno"></span><span class="op" id="2419657">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="2419660">//&nbsp;getName&nbsp;returns&nbsp;the&nbsp;name&nbsp;that&nbsp;begins&nbsp;the&nbsp;string&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="2419735">//&nbsp;consumed&nbsp;to&nbsp;extract&nbsp;it.&nbsp;&nbsp;If&nbsp;the&nbsp;name&nbsp;is&nbsp;enclosed&nbsp;in&nbsp;{},&nbsp;it&#39;s&nbsp;part&nbsp;of&nbsp;a&nbsp;${}</span><br>
<span class="lineno"></span><span class="comment" id="2419813">//&nbsp;expansion&nbsp;and&nbsp;two&nbsp;more&nbsp;bytes&nbsp;are&nbsp;needed&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="2419885">func</span>&nbsp;<span class="ident" id="2419890">getShellName</span><span class="op" id="2419902">(</span><span class="ident" id="2419903">s</span>&nbsp;<span class="builtintype" id="2419905">string</span><span class="op" id="2419911">)</span>&nbsp;<span class="op" id="2419913">(</span><span class="builtintype" id="2419914">string</span><span class="op" id="2419920">,</span>&nbsp;<span class="builtintype" id="2419922">int</span><span class="op" id="2419925">)</span>&nbsp;<span class="op" id="2419927">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2419930">switch</span>&nbsp;<span class="op" id="2419937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2419940">case</span>&nbsp;<span class="ident" id="2419945">s</span><span class="op" id="2419946">[</span><span class="num" id="2419947">0</span><span class="op" id="2419948">]</span>&nbsp;<span class="op" id="2419950">==</span>&nbsp;<span class="string" id="2419953">&#39;{&#39;</span><span class="op" id="2419956">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2419960">if</span>&nbsp;<span class="builtinfunc" id="2419963">len</span><span class="op" id="2419966">(</span><span class="ident" id="2419967">s</span><span class="op" id="2419968">)</span>&nbsp;<span class="op" id="2419970">&gt;</span>&nbsp;<span class="num" id="2419972">2</span>&nbsp;<span class="op" id="2419974">&amp;&amp;</span>&nbsp;<span class="ident" id="2419977">isShellSpecialVar</span><span class="op" id="2419994">(</span><span class="ident" id="2419995">s</span><span class="op" id="2419996">[</span><span class="num" id="2419997">1</span><span class="op" id="2419998">]</span><span class="op" id="2419999">)</span>&nbsp;<span class="op" id="2420001">&amp;&amp;</span>&nbsp;<span class="ident" id="2420004">s</span><span class="op" id="2420005">[</span><span class="num" id="2420006">2</span><span class="op" id="2420007">]</span>&nbsp;<span class="op" id="2420009">==</span>&nbsp;<span class="string" id="2420012">&#39;}&#39;</span>&nbsp;<span class="op" id="2420016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420021">return</span>&nbsp;<span class="ident" id="2420028">s</span><span class="op" id="2420029">[</span><span class="num" id="2420030">1</span><span class="op" id="2420031">:</span><span class="num" id="2420032">2</span><span class="op" id="2420033">]</span><span class="op" id="2420034">,</span>&nbsp;<span class="num" id="2420036">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2420040">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2420044">//&nbsp;Scan&nbsp;to&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420071">for</span>&nbsp;<span class="ident" id="2420075">i</span>&nbsp;<span class="op" id="2420077">:=</span>&nbsp;<span class="num" id="2420080">1</span><span class="op" id="2420081">;</span>&nbsp;<span class="ident" id="2420083">i</span>&nbsp;<span class="op" id="2420085">&lt;</span>&nbsp;<span class="builtinfunc" id="2420087">len</span><span class="op" id="2420090">(</span><span class="ident" id="2420091">s</span><span class="op" id="2420092">)</span><span class="op" id="2420093">;</span>&nbsp;<span class="ident" id="2420095">i</span><span class="op" id="2420096">++</span>&nbsp;<span class="op" id="2420099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420104">if</span>&nbsp;<span class="ident" id="2420107">s</span><span class="op" id="2420108">[</span><span class="ident" id="2420109">i</span><span class="op" id="2420110">]</span>&nbsp;<span class="op" id="2420112">==</span>&nbsp;<span class="string" id="2420115">&#39;}&#39;</span>&nbsp;<span class="op" id="2420119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420125">return</span>&nbsp;<span class="ident" id="2420132">s</span><span class="op" id="2420133">[</span><span class="num" id="2420134">1</span><span class="op" id="2420135">:</span><span class="ident" id="2420136">i</span><span class="op" id="2420137">]</span><span class="op" id="2420138">,</span>&nbsp;<span class="ident" id="2420140">i</span>&nbsp;<span class="op" id="2420142">+</span>&nbsp;<span class="num" id="2420144">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2420149">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2420153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420157">return</span>&nbsp;<span class="string" id="2420164">&#34;&#34;</span><span class="op" id="2420166">,</span>&nbsp;<span class="num" id="2420168">1</span>&nbsp;<span class="comment" id="2420170">//&nbsp;Bad&nbsp;syntax;&nbsp;just&nbsp;eat&nbsp;the&nbsp;brace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420206">case</span>&nbsp;<span class="ident" id="2420211">isShellSpecialVar</span><span class="op" id="2420228">(</span><span class="ident" id="2420229">s</span><span class="op" id="2420230">[</span><span class="num" id="2420231">0</span><span class="op" id="2420232">]</span><span class="op" id="2420233">)</span><span class="op" id="2420234">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420238">return</span>&nbsp;<span class="ident" id="2420245">s</span><span class="op" id="2420246">[</span><span class="num" id="2420247">0</span><span class="op" id="2420248">:</span><span class="num" id="2420249">1</span><span class="op" id="2420250">]</span><span class="op" id="2420251">,</span>&nbsp;<span class="num" id="2420253">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2420256">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2420259">//&nbsp;Scan&nbsp;alphanumerics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420283">var</span>&nbsp;<span class="ident" id="2420287">i</span>&nbsp;<span class="builtintype" id="2420289">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420294">for</span>&nbsp;<span class="ident" id="2420298">i</span>&nbsp;<span class="op" id="2420300">=</span>&nbsp;<span class="num" id="2420302">0</span><span class="op" id="2420303">;</span>&nbsp;<span class="ident" id="2420305">i</span>&nbsp;<span class="op" id="2420307">&lt;</span>&nbsp;<span class="builtinfunc" id="2420309">len</span><span class="op" id="2420312">(</span><span class="ident" id="2420313">s</span><span class="op" id="2420314">)</span>&nbsp;<span class="op" id="2420316">&amp;&amp;</span>&nbsp;<span class="ident" id="2420319">isAlphaNum</span><span class="op" id="2420329">(</span><span class="ident" id="2420330">s</span><span class="op" id="2420331">[</span><span class="ident" id="2420332">i</span><span class="op" id="2420333">]</span><span class="op" id="2420334">)</span><span class="op" id="2420335">;</span>&nbsp;<span class="ident" id="2420337">i</span><span class="op" id="2420338">++</span>&nbsp;<span class="op" id="2420341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2420344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420347">return</span>&nbsp;<span class="ident" id="2420354">s</span><span class="op" id="2420355">[</span><span class="op" id="2420356">:</span><span class="ident" id="2420357">i</span><span class="op" id="2420358">]</span><span class="op" id="2420359">,</span>&nbsp;<span class="ident" id="2420361">i</span><br>
<span class="lineno">75</span><span class="op" id="2420363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2420366">//&nbsp;Getenv&nbsp;retrieves&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="2420442">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;value,&nbsp;which&nbsp;will&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;variable&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2420519">func</span>&nbsp;<span class="ident" id="2420524">Getenv</span><span class="op" id="2420530">(</span><span class="ident" id="2420531">key</span>&nbsp;<span class="builtintype" id="2420535">string</span><span class="op" id="2420541">)</span>&nbsp;<span class="builtintype" id="2420543">string</span>&nbsp;<span class="op" id="2420550">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2420553">v</span><span class="op" id="2420554">,</span>&nbsp;<span class="ident" id="2420556">_</span>&nbsp;<span class="op" id="2420558">:=</span>&nbsp;<span class="ident" id="2420561">syscall</span><span class="op" id="2420568">.</span><span class="ident" id="2420569">Getenv</span><span class="op" id="2420575">(</span><span class="ident" id="2420576">key</span><span class="op" id="2420579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420582">return</span>&nbsp;<span class="ident" id="2420589">v</span><br>
<span class="lineno"></span><span class="op" id="2420591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2420594">//&nbsp;Setenv&nbsp;sets&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno">85</span><span class="comment" id="2420665">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2420697">func</span>&nbsp;<span class="ident" id="2420702">Setenv</span><span class="op" id="2420708">(</span><span class="ident" id="2420709">key</span><span class="op" id="2420712">,</span>&nbsp;<span class="ident" id="2420714">value</span>&nbsp;<span class="builtintype" id="2420720">string</span><span class="op" id="2420726">)</span>&nbsp;<span class="builtintype" id="2420728">error</span>&nbsp;<span class="op" id="2420734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2420737">err</span>&nbsp;<span class="op" id="2420741">:=</span>&nbsp;<span class="ident" id="2420744">syscall</span><span class="op" id="2420751">.</span><span class="ident" id="2420752">Setenv</span><span class="op" id="2420758">(</span><span class="ident" id="2420759">key</span><span class="op" id="2420762">,</span>&nbsp;<span class="ident" id="2420764">value</span><span class="op" id="2420769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420772">if</span>&nbsp;<span class="ident" id="2420775">err</span>&nbsp;<span class="op" id="2420779">!=</span>&nbsp;<span class="builtintype" id="2420782">nil</span>&nbsp;<span class="op" id="2420786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420790">return</span>&nbsp;<span class="ident" id="2420797">NewSyscallError</span><span class="op" id="2420812">(</span><span class="string" id="2420813">&#34;setenv&#34;</span><span class="op" id="2420821">,</span>&nbsp;<span class="ident" id="2420823">err</span><span class="op" id="2420826">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2420829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420832">return</span>&nbsp;<span class="builtintype" id="2420839">nil</span><br>
<span class="lineno"></span><span class="op" id="2420843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2420846">//&nbsp;Unsetenv&nbsp;unsets&nbsp;a&nbsp;single&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno">95</span><span class="keyword" id="2420896">func</span>&nbsp;<span class="ident" id="2420901">Unsetenv</span><span class="op" id="2420909">(</span><span class="ident" id="2420910">key</span>&nbsp;<span class="builtintype" id="2420914">string</span><span class="op" id="2420920">)</span>&nbsp;<span class="builtintype" id="2420922">error</span>&nbsp;<span class="op" id="2420928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2420931">return</span>&nbsp;<span class="ident" id="2420938">syscall</span><span class="op" id="2420945">.</span><span class="ident" id="2420946">Unsetenv</span><span class="op" id="2420954">(</span><span class="ident" id="2420955">key</span><span class="op" id="2420958">)</span><br>
<span class="lineno"></span><span class="op" id="2420960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2420963">//&nbsp;Clearenv&nbsp;deletes&nbsp;all&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno">100</span><span class="keyword" id="2421010">func</span>&nbsp;<span class="ident" id="2421015">Clearenv</span><span class="op" id="2421023">(</span><span class="op" id="2421024">)</span>&nbsp;<span class="op" id="2421026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2421029">syscall</span><span class="op" id="2421036">.</span><span class="ident" id="2421037">Clearenv</span><span class="op" id="2421045">(</span><span class="op" id="2421046">)</span><br>
<span class="lineno"></span><span class="op" id="2421048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2421051">//&nbsp;Environ&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;strings&nbsp;representing&nbsp;the&nbsp;environment,</span><br>
<span class="lineno">105</span><span class="comment" id="2421118">//&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;key=value&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2421146">func</span>&nbsp;<span class="ident" id="2421151">Environ</span><span class="op" id="2421158">(</span><span class="op" id="2421159">)</span>&nbsp;<span class="op" id="2421161">[</span><span class="op" id="2421162">]</span><span class="builtintype" id="2421163">string</span>&nbsp;<span class="op" id="2421170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2421173">return</span>&nbsp;<span class="ident" id="2421180">syscall</span><span class="op" id="2421187">.</span><span class="ident" id="2421188">Environ</span><span class="op" id="2421195">(</span><span class="op" id="2421196">)</span><br>
<span class="lineno"></span><span class="op" id="2421198">}</span>
</div>
</body>
</html>
