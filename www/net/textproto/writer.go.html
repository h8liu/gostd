<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4008159">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4008215">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4008269">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4008320">package</span>&nbsp;<span class="ident" id="4008328">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4008339">import</span>&nbsp;<span class="op" id="4008346">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4008349">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4008358">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4008365">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4008370">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4008373">//&nbsp;A&nbsp;Writer&nbsp;implements&nbsp;convenience&nbsp;methods&nbsp;for&nbsp;writing</span><br>
<span class="lineno"></span><span class="comment" id="4008428">//&nbsp;requests&nbsp;or&nbsp;responses&nbsp;to&nbsp;a&nbsp;text&nbsp;protocol&nbsp;network&nbsp;connection.</span><br>
<span class="lineno">15</span><span class="keyword" id="4008492">type</span>&nbsp;<span class="ident" id="4008497">Writer</span>&nbsp;<span class="keyword" id="4008504">struct</span>&nbsp;<span class="op" id="4008511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4008514">W</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4008518">*</span><span class="ident" id="4008519"><a href="/net/textproto/writer.go.html#4008349">bufio</a></span><span class="op" id="4008524">.</span><span class="ident" id="4008525">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4008533">dot</span>&nbsp;<span class="op" id="4008537">*</span><span class="ident" id="4008538"><a href="/net/textproto/writer.go.html#4009568">dotWriter</a></span><br>
<span class="lineno"></span><span class="op" id="4008548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="4008551">//&nbsp;NewWriter&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer&nbsp;writing&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="4008599">func</span>&nbsp;<span class="ident" id="4008604">NewWriter</span><span class="op" id="4008613">(</span><span class="ident" id="4008614">w</span>&nbsp;<span class="op" id="4008616">*</span><span class="ident" id="4008617"><a href="/net/textproto/writer.go.html#4008349">bufio</a></span><span class="op" id="4008622">.</span><span class="ident" id="4008623">Writer</span><span class="op" id="4008629">)</span>&nbsp;<span class="op" id="4008631">*</span><span class="ident" id="4008632"><a href="/net/textproto/writer.go.html#4008497">Writer</a></span>&nbsp;<span class="op" id="4008639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4008642">return</span>&nbsp;<span class="op" id="4008649">&amp;</span><span class="ident" id="4008650"><a href="/net/textproto/writer.go.html#4008497">Writer</a></span><span class="op" id="4008656">{</span><span class="ident" id="4008657">W</span><span class="op" id="4008658">:</span>&nbsp;<span class="ident" id="4008660"><a href="/net/textproto/writer.go.html#4008614">w</a></span><span class="op" id="4008661">}</span><br>
<span class="lineno"></span><span class="op" id="4008663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="4008666">var</span>&nbsp;<span class="ident" id="4008670">crnl</span>&nbsp;<span class="op" id="4008675">=</span>&nbsp;<span class="op" id="4008677">[</span><span class="op" id="4008678">]</span><span class="builtintype" id="4008679">byte</span><span class="op" id="4008683">{</span><span class="string" id="4008684">&#39;\r&#39;</span><span class="op" id="4008688">,</span>&nbsp;<span class="string" id="4008690">&#39;\n&#39;</span><span class="op" id="4008694">}</span><br>
<span class="lineno"></span><span class="keyword" id="4008696">var</span>&nbsp;<span class="ident" id="4008700">dotcrnl</span>&nbsp;<span class="op" id="4008708">=</span>&nbsp;<span class="op" id="4008710">[</span><span class="op" id="4008711">]</span><span class="builtintype" id="4008712">byte</span><span class="op" id="4008716">{</span><span class="string" id="4008717">&#39;.&#39;</span><span class="op" id="4008720">,</span>&nbsp;<span class="string" id="4008722">&#39;\r&#39;</span><span class="op" id="4008726">,</span>&nbsp;<span class="string" id="4008728">&#39;\n&#39;</span><span class="op" id="4008732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4008735">//&nbsp;PrintfLine&nbsp;writes&nbsp;the&nbsp;formatted&nbsp;output&nbsp;followed&nbsp;by&nbsp;\r\n.</span><br>
<span class="lineno"></span><span class="keyword" id="4008795">func</span>&nbsp;<span class="op" id="4008800">(</span><span class="ident" id="4008801">w</span>&nbsp;<span class="op" id="4008803">*</span><span class="ident" id="4008804"><a href="/net/textproto/writer.go.html#4008497">Writer</a></span><span class="op" id="4008810">)</span>&nbsp;<span class="ident" id="4008812">PrintfLine</span><span class="op" id="4008822">(</span><span class="ident" id="4008823">format</span>&nbsp;<span class="builtintype" id="4008830">string</span><span class="op" id="4008836">,</span>&nbsp;<span class="ident" id="4008838">args</span>&nbsp;<span class="op" id="4008843">...</span><span class="keyword" id="4008846">interface</span><span class="op" id="4008855">{</span><span class="op" id="4008856">}</span><span class="op" id="4008857">)</span>&nbsp;<span class="builtintype" id="4008859">error</span>&nbsp;<span class="op" id="4008865">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4008868"><a href="/net/textproto/writer.go.html#4008801">w</a></span><span class="op" id="4008869">.</span><span class="ident" id="4008870">closeDot</span><span class="op" id="4008878">(</span><span class="op" id="4008879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4008882"><a href="/net/textproto/writer.go.html#4008358">fmt</a></span><span class="op" id="4008885">.</span><span class="ident" id="4008886">Fprintf</span><span class="op" id="4008893">(</span><span class="ident" id="4008894"><a href="/net/textproto/writer.go.html#4008801">w</a></span><span class="op" id="4008895">.</span><span class="ident" id="4008896">W</span><span class="op" id="4008897">,</span>&nbsp;<span class="ident" id="4008899"><a href="/net/textproto/writer.go.html#4008823">format</a></span><span class="op" id="4008905">,</span>&nbsp;<span class="ident" id="4008907"><a href="/net/textproto/writer.go.html#4008838">args</a></span><span class="op" id="4008911">...</span><span class="op" id="4008914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4008917"><a href="/net/textproto/writer.go.html#4008801">w</a></span><span class="op" id="4008918">.</span><span class="ident" id="4008919">W</span><span class="op" id="4008920">.</span><span class="ident" id="4008921">Write</span><span class="op" id="4008926">(</span><span class="ident" id="4008927"><a href="/net/textproto/writer.go.html#4008670">crnl</a></span><span class="op" id="4008931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4008934">return</span>&nbsp;<span class="ident" id="4008941"><a href="/net/textproto/writer.go.html#4008801">w</a></span><span class="op" id="4008942">.</span><span class="ident" id="4008943">W</span><span class="op" id="4008944">.</span><span class="ident" id="4008945">Flush</span><span class="op" id="4008950">(</span><span class="op" id="4008951">)</span><br>
<span class="lineno"></span><span class="op" id="4008953">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="4008956">//&nbsp;DotWriter&nbsp;returns&nbsp;a&nbsp;writer&nbsp;that&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;write&nbsp;a&nbsp;dot-encoding&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="comment" id="4009033">//&nbsp;It&nbsp;takes&nbsp;care&nbsp;of&nbsp;inserting&nbsp;leading&nbsp;dots&nbsp;when&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="4009092">//&nbsp;translating&nbsp;line-ending&nbsp;\n&nbsp;into&nbsp;\r\n,&nbsp;and&nbsp;adding&nbsp;the&nbsp;final&nbsp;.\r\n&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="4009165">//&nbsp;when&nbsp;the&nbsp;DotWriter&nbsp;is&nbsp;closed.&nbsp;&nbsp;The&nbsp;caller&nbsp;should&nbsp;close&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="4009227">//&nbsp;DotWriter&nbsp;before&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;a&nbsp;method&nbsp;on&nbsp;w.</span><br>
<span class="lineno"></span><span class="comment" id="4009279">//</span><br>
<span class="lineno"></span><span class="comment" id="4009282">//&nbsp;See&nbsp;the&nbsp;documentation&nbsp;for&nbsp;Reader&#39;s&nbsp;DotReader&nbsp;method&nbsp;for&nbsp;details&nbsp;about&nbsp;dot-encoding.</span><br>
<span class="lineno"></span><span class="keyword" id="4009369">func</span>&nbsp;<span class="op" id="4009374">(</span><span class="ident" id="4009375">w</span>&nbsp;<span class="op" id="4009377">*</span><span class="ident" id="4009378"><a href="/net/textproto/writer.go.html#4008497">Writer</a></span><span class="op" id="4009384">)</span>&nbsp;<span class="ident" id="4009386">DotWriter</span><span class="op" id="4009395">(</span><span class="op" id="4009396">)</span>&nbsp;<span class="ident" id="4009398"><a href="/net/textproto/writer.go.html#4008365">io</a></span><span class="op" id="4009400">.</span><span class="ident" id="4009401">WriteCloser</span>&nbsp;<span class="op" id="4009413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009416"><a href="/net/textproto/writer.go.html#4009375">w</a></span><span class="op" id="4009417">.</span><span class="ident" id="4009418">closeDot</span><span class="op" id="4009426">(</span><span class="op" id="4009427">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009430"><a href="/net/textproto/writer.go.html#4009375">w</a></span><span class="op" id="4009431">.</span><span class="ident" id="4009432">dot</span>&nbsp;<span class="op" id="4009436">=</span>&nbsp;<span class="op" id="4009438">&amp;</span><span class="ident" id="4009439"><a href="/net/textproto/writer.go.html#4009568">dotWriter</a></span><span class="op" id="4009448">{</span><span class="ident" id="4009449">w</span><span class="op" id="4009450">:</span>&nbsp;<span class="ident" id="4009452"><a href="/net/textproto/writer.go.html#4009375">w</a></span><span class="op" id="4009453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4009456">return</span>&nbsp;<span class="ident" id="4009463"><a href="/net/textproto/writer.go.html#4009375">w</a></span><span class="op" id="4009464">.</span><span class="ident" id="4009465">dot</span><br>
<span class="lineno"></span><span class="op" id="4009469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4009472">func</span>&nbsp;<span class="op" id="4009477">(</span><span class="ident" id="4009478">w</span>&nbsp;<span class="op" id="4009480">*</span><span class="ident" id="4009481"><a href="/net/textproto/writer.go.html#4008497">Writer</a></span><span class="op" id="4009487">)</span>&nbsp;<span class="ident" id="4009489">closeDot</span><span class="op" id="4009497">(</span><span class="op" id="4009498">)</span>&nbsp;<span class="op" id="4009500">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4009503">if</span>&nbsp;<span class="ident" id="4009506"><a href="/net/textproto/writer.go.html#4009478">w</a></span><span class="op" id="4009507">.</span><span class="ident" id="4009508">dot</span>&nbsp;<span class="op" id="4009512">!=</span>&nbsp;<span class="ident" id="4009515">nil</span>&nbsp;<span class="op" id="4009519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009523"><a href="/net/textproto/writer.go.html#4009478">w</a></span><span class="op" id="4009524">.</span><span class="ident" id="4009525">dot</span><span class="op" id="4009528">.</span><span class="ident" id="4009529">Close</span><span class="op" id="4009534">(</span><span class="op" id="4009535">)</span>&nbsp;<span class="comment" id="4009537">//&nbsp;sets&nbsp;w.dot&nbsp;=&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4009558">}</span><br>
<span class="lineno"></span><span class="op" id="4009560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="4009563">type</span>&nbsp;<span class="ident" id="4009568">dotWriter</span>&nbsp;<span class="keyword" id="4009578">struct</span>&nbsp;<span class="op" id="4009585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009588">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4009594">*</span><span class="ident" id="4009595"><a href="/net/textproto/writer.go.html#4008497">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009603">state</span>&nbsp;<span class="builtintype" id="4009609">int</span><br>
<span class="lineno"></span><span class="op" id="4009613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="4009616">const</span>&nbsp;<span class="op" id="4009622">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009625">wstateBeginLine</span>&nbsp;<span class="op" id="4009641">=</span>&nbsp;<span class="ident" id="4009643">iota</span>&nbsp;<span class="comment" id="4009648">//&nbsp;beginning&nbsp;of&nbsp;line;&nbsp;initial&nbsp;state;&nbsp;must&nbsp;be&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009699">wstateCR</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4009722">//&nbsp;wrote&nbsp;\r&nbsp;(possibly&nbsp;at&nbsp;end&nbsp;of&nbsp;line)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009761">wstateData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4009784">//&nbsp;writing&nbsp;data&nbsp;in&nbsp;middle&nbsp;of&nbsp;line</span><br>
<span class="lineno"></span><span class="op" id="4009818">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="4009821">func</span>&nbsp;<span class="op" id="4009826">(</span><span class="ident" id="4009827">d</span>&nbsp;<span class="op" id="4009829">*</span><span class="ident" id="4009830"><a href="/net/textproto/writer.go.html#4009568">dotWriter</a></span><span class="op" id="4009839">)</span>&nbsp;<span class="ident" id="4009841">Write</span><span class="op" id="4009846">(</span><span class="ident" id="4009847">b</span>&nbsp;<span class="op" id="4009849">[</span><span class="op" id="4009850">]</span><span class="builtintype" id="4009851">byte</span><span class="op" id="4009855">)</span>&nbsp;<span class="op" id="4009857">(</span><span class="ident" id="4009858">n</span>&nbsp;<span class="builtintype" id="4009860">int</span><span class="op" id="4009863">,</span>&nbsp;<span class="ident" id="4009865">err</span>&nbsp;<span class="builtintype" id="4009869">error</span><span class="op" id="4009874">)</span>&nbsp;<span class="op" id="4009876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009879">bw</span>&nbsp;<span class="op" id="4009882">:=</span>&nbsp;<span class="ident" id="4009885"><a href="/net/textproto/writer.go.html#4009827">d</a></span><span class="op" id="4009886">.</span><span class="ident" id="4009887">w</span><span class="op" id="4009888">.</span><span class="ident" id="4009889">W</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4009892">for</span>&nbsp;<span class="ident" id="4009896"><a href="/net/textproto/writer.go.html#4009858">n</a></span>&nbsp;<span class="op" id="4009898">&lt;</span>&nbsp;<span class="builtinfunc" id="4009900">len</span><span class="op" id="4009903">(</span><span class="ident" id="4009904"><a href="/net/textproto/writer.go.html#4009847">b</a></span><span class="op" id="4009905">)</span>&nbsp;<span class="op" id="4009907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009911">c</span>&nbsp;<span class="op" id="4009913">:=</span>&nbsp;<span class="ident" id="4009916"><a href="/net/textproto/writer.go.html#4009847">b</a></span><span class="op" id="4009917">[</span><span class="ident" id="4009918"><a href="/net/textproto/writer.go.html#4009858">n</a></span><span class="op" id="4009919">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4009923">switch</span>&nbsp;<span class="ident" id="4009930"><a href="/net/textproto/writer.go.html#4009827">d</a></span><span class="op" id="4009931">.</span><span class="ident" id="4009932">state</span>&nbsp;<span class="op" id="4009938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4009942">case</span>&nbsp;<span class="ident" id="4009947"><a href="/net/textproto/writer.go.html#4009625">wstateBeginLine</a></span><span class="op" id="4009962">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4009967"><a href="/net/textproto/writer.go.html#4009827">d</a></span><span class="op" id="4009968">.</span><span class="ident" id="4009969">state</span>&nbsp;<span class="op" id="4009975">=</span>&nbsp;<span class="ident" id="4009977"><a href="/net/textproto/writer.go.html#4009761">wstateData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4009991">if</span>&nbsp;<span class="ident" id="4009994"><a href="/net/textproto/writer.go.html#4009911">c</a></span>&nbsp;<span class="op" id="4009996">==</span>&nbsp;<span class="string" id="4009999">&#39;.&#39;</span>&nbsp;<span class="op" id="4010003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4010009">//&nbsp;escape&nbsp;leading&nbsp;dot</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010035"><a href="/net/textproto/writer.go.html#4009879">bw</a></span><span class="op" id="4010037">.</span><span class="ident" id="4010038">WriteByte</span><span class="op" id="4010047">(</span><span class="string" id="4010048">&#39;.&#39;</span><span class="op" id="4010051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4010056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010061">fallthrough</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010076">case</span>&nbsp;<span class="ident" id="4010081"><a href="/net/textproto/writer.go.html#4009761">wstateData</a></span><span class="op" id="4010091">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010096">if</span>&nbsp;<span class="ident" id="4010099"><a href="/net/textproto/writer.go.html#4009911">c</a></span>&nbsp;<span class="op" id="4010101">==</span>&nbsp;<span class="string" id="4010104">&#39;\r&#39;</span>&nbsp;<span class="op" id="4010109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010115"><a href="/net/textproto/writer.go.html#4009827">d</a></span><span class="op" id="4010116">.</span><span class="ident" id="4010117">state</span>&nbsp;<span class="op" id="4010123">=</span>&nbsp;<span class="ident" id="4010125"><a href="/net/textproto/writer.go.html#4009699">wstateCR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4010137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010142">if</span>&nbsp;<span class="ident" id="4010145"><a href="/net/textproto/writer.go.html#4009911">c</a></span>&nbsp;<span class="op" id="4010147">==</span>&nbsp;<span class="string" id="4010150">&#39;\n&#39;</span>&nbsp;<span class="op" id="4010155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010161"><a href="/net/textproto/writer.go.html#4009879">bw</a></span><span class="op" id="4010163">.</span><span class="ident" id="4010164">WriteByte</span><span class="op" id="4010173">(</span><span class="string" id="4010174">&#39;\r&#39;</span><span class="op" id="4010178">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010184"><a href="/net/textproto/writer.go.html#4009827">d</a></span><span class="op" id="4010185">.</span><span class="ident" id="4010186">state</span>&nbsp;<span class="op" id="4010192">=</span>&nbsp;<span class="ident" id="4010194"><a href="/net/textproto/writer.go.html#4009625">wstateBeginLine</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4010213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010218">case</span>&nbsp;<span class="ident" id="4010223"><a href="/net/textproto/writer.go.html#4009699">wstateCR</a></span><span class="op" id="4010231">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010236"><a href="/net/textproto/writer.go.html#4009827">d</a></span><span class="op" id="4010237">.</span><span class="ident" id="4010238">state</span>&nbsp;<span class="op" id="4010244">=</span>&nbsp;<span class="ident" id="4010246"><a href="/net/textproto/writer.go.html#4009761">wstateData</a></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010260">if</span>&nbsp;<span class="ident" id="4010263"><a href="/net/textproto/writer.go.html#4009911">c</a></span>&nbsp;<span class="op" id="4010265">==</span>&nbsp;<span class="string" id="4010268">&#39;\n&#39;</span>&nbsp;<span class="op" id="4010273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010279"><a href="/net/textproto/writer.go.html#4009827">d</a></span><span class="op" id="4010280">.</span><span class="ident" id="4010281">state</span>&nbsp;<span class="op" id="4010287">=</span>&nbsp;<span class="ident" id="4010289"><a href="/net/textproto/writer.go.html#4009625">wstateBeginLine</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4010308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4010312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010316">if</span>&nbsp;<span class="ident" id="4010319"><a href="/net/textproto/writer.go.html#4009865">err</a></span>&nbsp;<span class="op" id="4010323">=</span>&nbsp;<span class="ident" id="4010325"><a href="/net/textproto/writer.go.html#4009879">bw</a></span><span class="op" id="4010327">.</span><span class="ident" id="4010328">WriteByte</span><span class="op" id="4010337">(</span><span class="ident" id="4010338"><a href="/net/textproto/writer.go.html#4009911">c</a></span><span class="op" id="4010339">)</span><span class="op" id="4010340">;</span>&nbsp;<span class="ident" id="4010342"><a href="/net/textproto/writer.go.html#4009865">err</a></span>&nbsp;<span class="op" id="4010346">!=</span>&nbsp;<span class="ident" id="4010349">nil</span>&nbsp;<span class="op" id="4010353">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010358">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4010366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010370"><a href="/net/textproto/writer.go.html#4009858">n</a></span><span class="op" id="4010371">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4010375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010378">return</span><br>
<span class="lineno">100</span><span class="op" id="4010385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4010388">func</span>&nbsp;<span class="op" id="4010393">(</span><span class="ident" id="4010394">d</span>&nbsp;<span class="op" id="4010396">*</span><span class="ident" id="4010397"><a href="/net/textproto/writer.go.html#4009568">dotWriter</a></span><span class="op" id="4010406">)</span>&nbsp;<span class="ident" id="4010408">Close</span><span class="op" id="4010413">(</span><span class="op" id="4010414">)</span>&nbsp;<span class="builtintype" id="4010416">error</span>&nbsp;<span class="op" id="4010422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010425">if</span>&nbsp;<span class="ident" id="4010428"><a href="/net/textproto/writer.go.html#4010394">d</a></span><span class="op" id="4010429">.</span><span class="ident" id="4010430">w</span><span class="op" id="4010431">.</span><span class="ident" id="4010432">dot</span>&nbsp;<span class="op" id="4010436">==</span>&nbsp;<span class="ident" id="4010439"><a href="/net/textproto/writer.go.html#4010394">d</a></span>&nbsp;<span class="op" id="4010441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010445"><a href="/net/textproto/writer.go.html#4010394">d</a></span><span class="op" id="4010446">.</span><span class="ident" id="4010447">w</span><span class="op" id="4010448">.</span><span class="ident" id="4010449">dot</span>&nbsp;<span class="op" id="4010453">=</span>&nbsp;<span class="ident" id="4010455">nil</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4010460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010463">bw</span>&nbsp;<span class="op" id="4010466">:=</span>&nbsp;<span class="ident" id="4010469"><a href="/net/textproto/writer.go.html#4010394">d</a></span><span class="op" id="4010470">.</span><span class="ident" id="4010471">w</span><span class="op" id="4010472">.</span><span class="ident" id="4010473">W</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010476">switch</span>&nbsp;<span class="ident" id="4010483"><a href="/net/textproto/writer.go.html#4010394">d</a></span><span class="op" id="4010484">.</span><span class="ident" id="4010485">state</span>&nbsp;<span class="op" id="4010491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010494">default</span><span class="op" id="4010501">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010505"><a href="/net/textproto/writer.go.html#4010463">bw</a></span><span class="op" id="4010507">.</span><span class="ident" id="4010508">WriteByte</span><span class="op" id="4010517">(</span><span class="string" id="4010518">&#39;\r&#39;</span><span class="op" id="4010522">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010526">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010539">case</span>&nbsp;<span class="ident" id="4010544"><a href="/net/textproto/writer.go.html#4009699">wstateCR</a></span><span class="op" id="4010552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010556"><a href="/net/textproto/writer.go.html#4010463">bw</a></span><span class="op" id="4010558">.</span><span class="ident" id="4010559">WriteByte</span><span class="op" id="4010568">(</span><span class="string" id="4010569">&#39;\n&#39;</span><span class="op" id="4010573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010577">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010590">case</span>&nbsp;<span class="ident" id="4010595"><a href="/net/textproto/writer.go.html#4009625">wstateBeginLine</a></span><span class="op" id="4010610">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4010614"><a href="/net/textproto/writer.go.html#4010463">bw</a></span><span class="op" id="4010616">.</span><span class="ident" id="4010617">Write</span><span class="op" id="4010622">(</span><span class="ident" id="4010623"><a href="/net/textproto/writer.go.html#4008700">dotcrnl</a></span><span class="op" id="4010630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4010633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4010636">return</span>&nbsp;<span class="ident" id="4010643"><a href="/net/textproto/writer.go.html#4010463">bw</a></span><span class="op" id="4010645">.</span><span class="ident" id="4010646">Flush</span><span class="op" id="4010651">(</span><span class="op" id="4010652">)</span><br>
<span class="lineno"></span><span class="op" id="4010654">}</span>
</div>
</body>
</html>
