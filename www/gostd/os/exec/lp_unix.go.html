<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html" class="current">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4691502">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4691558">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4691612">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4691663">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4691733">package</span>&nbsp;<span class="ident" id="4691741">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4691747">import</span>&nbsp;<span class="op" id="4691754">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4691757">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4691767">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4691773">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4691783">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4691786">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="4691876">var</span>&nbsp;<span class="ident" id="4691880">ErrNotFound</span>&nbsp;<span class="op" id="4691892">=</span>&nbsp;<span class="ident" id="4691894">errors</span><span class="op" id="4691900">.</span><span class="ident" id="4691901">New</span><span class="op" id="4691904">(</span><span class="string" id="4691905">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="4691941">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4691944">func</span>&nbsp;<span class="ident" id="4691949">findExecutable</span><span class="op" id="4691963">(</span><span class="ident" id="4691964">file</span>&nbsp;<span class="builtintype" id="4691969">string</span><span class="op" id="4691975">)</span>&nbsp;<span class="builtintype" id="4691977">error</span>&nbsp;<span class="op" id="4691983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4691986">d</span><span class="op" id="4691987">,</span>&nbsp;<span class="ident" id="4691989">err</span>&nbsp;<span class="op" id="4691993">:=</span>&nbsp;<span class="ident" id="4691996">os</span><span class="op" id="4691998">.</span><span class="ident" id="4691999">Stat</span><span class="op" id="4692003">(</span><span class="ident" id="4692004">file</span><span class="op" id="4692008">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692011">if</span>&nbsp;<span class="ident" id="4692014">err</span>&nbsp;<span class="op" id="4692018">!=</span>&nbsp;<span class="builtintype" id="4692021">nil</span>&nbsp;<span class="op" id="4692025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692029">return</span>&nbsp;<span class="ident" id="4692036">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4692041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692044">if</span>&nbsp;<span class="ident" id="4692047">m</span>&nbsp;<span class="op" id="4692049">:=</span>&nbsp;<span class="ident" id="4692052">d</span><span class="op" id="4692053">.</span><span class="ident" id="4692054">Mode</span><span class="op" id="4692058">(</span><span class="op" id="4692059">)</span><span class="op" id="4692060">;</span>&nbsp;<span class="op" id="4692062">!</span><span class="ident" id="4692063">m</span><span class="op" id="4692064">.</span><span class="ident" id="4692065">IsDir</span><span class="op" id="4692070">(</span><span class="op" id="4692071">)</span>&nbsp;<span class="op" id="4692073">&amp;&amp;</span>&nbsp;<span class="ident" id="4692076">m</span><span class="op" id="4692077">&amp;</span><span class="num" id="4692078">0111</span>&nbsp;<span class="op" id="4692083">!=</span>&nbsp;<span class="num" id="4692086">0</span>&nbsp;<span class="op" id="4692088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692092">return</span>&nbsp;<span class="builtintype" id="4692099">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4692104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692107">return</span>&nbsp;<span class="ident" id="4692114">os</span><span class="op" id="4692116">.</span><span class="ident" id="4692117">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="4692131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4692134">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="4692191">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="4692253">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="4692334">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="4692417">func</span>&nbsp;<span class="ident" id="4692422">LookPath</span><span class="op" id="4692430">(</span><span class="ident" id="4692431">file</span>&nbsp;<span class="builtintype" id="4692436">string</span><span class="op" id="4692442">)</span>&nbsp;<span class="op" id="4692444">(</span><span class="builtintype" id="4692445">string</span><span class="op" id="4692451">,</span>&nbsp;<span class="builtintype" id="4692453">error</span><span class="op" id="4692458">)</span>&nbsp;<span class="op" id="4692460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4692463">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4692523">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4692585">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692636">if</span>&nbsp;<span class="ident" id="4692639">strings</span><span class="op" id="4692646">.</span><span class="ident" id="4692647">Contains</span><span class="op" id="4692655">(</span><span class="ident" id="4692656">file</span><span class="op" id="4692660">,</span>&nbsp;<span class="string" id="4692662">&#34;/&#34;</span><span class="op" id="4692665">)</span>&nbsp;<span class="op" id="4692667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4692671">err</span>&nbsp;<span class="op" id="4692675">:=</span>&nbsp;<span class="ident" id="4692678">findExecutable</span><span class="op" id="4692692">(</span><span class="ident" id="4692693">file</span><span class="op" id="4692697">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692701">if</span>&nbsp;<span class="ident" id="4692704">err</span>&nbsp;<span class="op" id="4692708">==</span>&nbsp;<span class="builtintype" id="4692711">nil</span>&nbsp;<span class="op" id="4692715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692720">return</span>&nbsp;<span class="ident" id="4692727">file</span><span class="op" id="4692731">,</span>&nbsp;<span class="builtintype" id="4692733">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4692739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692743">return</span>&nbsp;<span class="string" id="4692750">&#34;&#34;</span><span class="op" id="4692752">,</span>&nbsp;<span class="op" id="4692754">&amp;</span><span class="ident" id="4692755">Error</span><span class="op" id="4692760">{</span><span class="ident" id="4692761">file</span><span class="op" id="4692765">,</span>&nbsp;<span class="ident" id="4692767">err</span><span class="op" id="4692770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4692773">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4692776">pathenv</span>&nbsp;<span class="op" id="4692784">:=</span>&nbsp;<span class="ident" id="4692787">os</span><span class="op" id="4692789">.</span><span class="ident" id="4692790">Getenv</span><span class="op" id="4692796">(</span><span class="string" id="4692797">&#34;PATH&#34;</span><span class="op" id="4692803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692806">if</span>&nbsp;<span class="ident" id="4692809">pathenv</span>&nbsp;<span class="op" id="4692817">==</span>&nbsp;<span class="string" id="4692820">&#34;&#34;</span>&nbsp;<span class="op" id="4692823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692827">return</span>&nbsp;<span class="string" id="4692834">&#34;&#34;</span><span class="op" id="4692836">,</span>&nbsp;<span class="op" id="4692838">&amp;</span><span class="ident" id="4692839">Error</span><span class="op" id="4692844">{</span><span class="ident" id="4692845">file</span><span class="op" id="4692849">,</span>&nbsp;<span class="ident" id="4692851">ErrNotFound</span><span class="op" id="4692862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4692865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692868">for</span>&nbsp;<span class="ident" id="4692872">_</span><span class="op" id="4692873">,</span>&nbsp;<span class="ident" id="4692875">dir</span>&nbsp;<span class="op" id="4692879">:=</span>&nbsp;<span class="keyword" id="4692882">range</span>&nbsp;<span class="ident" id="4692888">strings</span><span class="op" id="4692895">.</span><span class="ident" id="4692896">Split</span><span class="op" id="4692901">(</span><span class="ident" id="4692902">pathenv</span><span class="op" id="4692909">,</span>&nbsp;<span class="string" id="4692911">&#34;:&#34;</span><span class="op" id="4692914">)</span>&nbsp;<span class="op" id="4692916">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692920">if</span>&nbsp;<span class="ident" id="4692923">dir</span>&nbsp;<span class="op" id="4692927">==</span>&nbsp;<span class="string" id="4692930">&#34;&#34;</span>&nbsp;<span class="op" id="4692933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4692938">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4692992">dir</span>&nbsp;<span class="op" id="4692996">=</span>&nbsp;<span class="string" id="4692998">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4693004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4693008">path</span>&nbsp;<span class="op" id="4693013">:=</span>&nbsp;<span class="ident" id="4693016">dir</span>&nbsp;<span class="op" id="4693020">+</span>&nbsp;<span class="string" id="4693022">&#34;/&#34;</span>&nbsp;<span class="op" id="4693026">+</span>&nbsp;<span class="ident" id="4693028">file</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4693035">if</span>&nbsp;<span class="ident" id="4693038">err</span>&nbsp;<span class="op" id="4693042">:=</span>&nbsp;<span class="ident" id="4693045">findExecutable</span><span class="op" id="4693059">(</span><span class="ident" id="4693060">path</span><span class="op" id="4693064">)</span><span class="op" id="4693065">;</span>&nbsp;<span class="ident" id="4693067">err</span>&nbsp;<span class="op" id="4693071">==</span>&nbsp;<span class="builtintype" id="4693074">nil</span>&nbsp;<span class="op" id="4693078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4693083">return</span>&nbsp;<span class="ident" id="4693090">path</span><span class="op" id="4693094">,</span>&nbsp;<span class="builtintype" id="4693096">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4693102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4693105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4693108">return</span>&nbsp;<span class="string" id="4693115">&#34;&#34;</span><span class="op" id="4693117">,</span>&nbsp;<span class="op" id="4693119">&amp;</span><span class="ident" id="4693120">Error</span><span class="op" id="4693125">{</span><span class="ident" id="4693126">file</span><span class="op" id="4693130">,</span>&nbsp;<span class="ident" id="4693132">ErrNotFound</span><span class="op" id="4693143">}</span><br>
<span class="lineno">60</span><span class="op" id="4693145">}</span>
</div>
</body>
</html>
