<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1562900">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1562955">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1563009">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1563060">package</span>&nbsp;<span class="ident" id="1563068">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1563074">//&nbsp;Frexp&nbsp;breaks&nbsp;f&nbsp;into&nbsp;a&nbsp;normalized&nbsp;fraction</span><br>
<span class="lineno"></span><span class="comment" id="1563119">//&nbsp;and&nbsp;an&nbsp;integral&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="comment" id="1563152">//&nbsp;It&nbsp;returns&nbsp;frac&nbsp;and&nbsp;exp&nbsp;satisfying&nbsp;f&nbsp;==&nbsp;frac&nbsp;×&nbsp;2**exp,</span><br>
<span class="lineno">10</span><span class="comment" id="1563211">//&nbsp;with&nbsp;the&nbsp;absolute&nbsp;value&nbsp;of&nbsp;frac&nbsp;in&nbsp;the&nbsp;interval&nbsp;[½,&nbsp;1).</span><br>
<span class="lineno"></span><span class="comment" id="1563271">//</span><br>
<span class="lineno"></span><span class="comment" id="1563274">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="1563296">//&nbsp;&nbsp;&nbsp;&nbspFrexp(±0)&nbsp;=&nbsp;±0,&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1563319">//&nbsp;&nbsp;&nbsp;&nbspFrexp(±Inf)&nbsp;=&nbsp;±Inf,&nbsp;0</span><br>
<span class="lineno">15</span><span class="comment" id="1563346">//&nbsp;&nbsp;&nbsp;&nbspFrexp(NaN)&nbsp;=&nbsp;NaN,&nbsp;0</span><br>
<span class="lineno"></span><span class="keyword" id="1563369">func</span>&nbsp;<span class="ident" id="1563374">Frexp</span><span class="op" id="1563379">(</span><span class="ident" id="1563380">f</span>&nbsp;<span class="builtintype" id="1563382">float64</span><span class="op" id="1563389">)</span>&nbsp;<span class="op" id="1563391">(</span><span class="ident" id="1563392">frac</span>&nbsp;<span class="builtintype" id="1563397">float64</span><span class="op" id="1563404">,</span>&nbsp;<span class="ident" id="1563406">exp</span>&nbsp;<span class="builtintype" id="1563410">int</span><span class="op" id="1563413">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1563416">func</span>&nbsp;<span class="ident" id="1563421">frexp</span><span class="op" id="1563426">(</span><span class="ident" id="1563427">f</span>&nbsp;<span class="builtintype" id="1563429">float64</span><span class="op" id="1563436">)</span>&nbsp;<span class="op" id="1563438">(</span><span class="ident" id="1563439">frac</span>&nbsp;<span class="builtintype" id="1563444">float64</span><span class="op" id="1563451">,</span>&nbsp;<span class="ident" id="1563453">exp</span>&nbsp;<span class="builtintype" id="1563457">int</span><span class="op" id="1563460">)</span>&nbsp;<span class="op" id="1563462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1563465">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563483">switch</span>&nbsp;<span class="op" id="1563490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563493">case</span>&nbsp;<span class="ident" id="1563498">f</span>&nbsp;<span class="op" id="1563500">==</span>&nbsp;<span class="num" id="1563503">0</span><span class="op" id="1563504">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563508">return</span>&nbsp;<span class="ident" id="1563515">f</span><span class="op" id="1563516">,</span>&nbsp;<span class="num" id="1563518">0</span>&nbsp;<span class="comment" id="1563520">//&nbsp;correctly&nbsp;return&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563544">case</span>&nbsp;<span class="ident" id="1563549">IsInf</span><span class="op" id="1563554">(</span><span class="ident" id="1563555">f</span><span class="op" id="1563556">,</span>&nbsp;<span class="num" id="1563558">0</span><span class="op" id="1563559">)</span>&nbsp;<span class="op" id="1563561">||</span>&nbsp;<span class="ident" id="1563564">IsNaN</span><span class="op" id="1563569">(</span><span class="ident" id="1563570">f</span><span class="op" id="1563571">)</span><span class="op" id="1563572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563576">return</span>&nbsp;<span class="ident" id="1563583">f</span><span class="op" id="1563584">,</span>&nbsp;<span class="num" id="1563586">0</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1563589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563592">f</span><span class="op" id="1563593">,</span>&nbsp;<span class="ident" id="1563595">exp</span>&nbsp;<span class="op" id="1563599">=</span>&nbsp;<span class="ident" id="1563601">normalize</span><span class="op" id="1563610">(</span><span class="ident" id="1563611">f</span><span class="op" id="1563612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563615">x</span>&nbsp;<span class="op" id="1563617">:=</span>&nbsp;<span class="ident" id="1563620">Float64bits</span><span class="op" id="1563631">(</span><span class="ident" id="1563632">f</span><span class="op" id="1563633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563636">exp</span>&nbsp;<span class="op" id="1563640">+=</span>&nbsp;<span class="builtintype" id="1563643">int</span><span class="op" id="1563646">(</span><span class="op" id="1563647">(</span><span class="ident" id="1563648">x</span><span class="op" id="1563649">&gt;&gt;</span><span class="ident" id="1563651">shift</span><span class="op" id="1563656">)</span><span class="op" id="1563657">&amp;</span><span class="ident" id="1563658">mask</span><span class="op" id="1563662">)</span>&nbsp;<span class="op" id="1563664">-</span>&nbsp;<span class="ident" id="1563666">bias</span>&nbsp;<span class="op" id="1563671">+</span>&nbsp;<span class="num" id="1563673">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563676">x</span>&nbsp;<span class="op" id="1563678">&amp;^=</span>&nbsp;<span class="ident" id="1563682">mask</span>&nbsp;<span class="op" id="1563687">&lt;&lt;</span>&nbsp;<span class="ident" id="1563690">shift</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563697">x</span>&nbsp;<span class="op" id="1563699">|=</span>&nbsp;<span class="op" id="1563702">(</span><span class="op" id="1563703">-</span><span class="num" id="1563704">1</span>&nbsp;<span class="op" id="1563706">+</span>&nbsp;<span class="ident" id="1563708">bias</span><span class="op" id="1563712">)</span>&nbsp;<span class="op" id="1563714">&lt;&lt;</span>&nbsp;<span class="ident" id="1563717">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1563724">frac</span>&nbsp;<span class="op" id="1563729">=</span>&nbsp;<span class="ident" id="1563731">Float64frombits</span><span class="op" id="1563746">(</span><span class="ident" id="1563747">x</span><span class="op" id="1563748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1563751">return</span><br>
<span class="lineno"></span><span class="op" id="1563758">}</span>
</div>
</body>
</html>
