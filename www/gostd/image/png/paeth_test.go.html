<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/png</h2>
<ul>
<li><a href="/gostd/image/png/paeth.go.html">paeth.go</a></li>
<li><a href="/gostd/image/png/paeth_test.go.html">paeth_test.go</a></li>
<li><a href="/gostd/image/png/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/png/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/png/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/png/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7043182">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7043237">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7043291">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7043342">package</span>&nbsp;<span class="ident" id="7043350">png</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7043355">import</span>&nbsp;<span class="op" id="7043362">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043365">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043374">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7043387">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7043397">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7043400">func</span>&nbsp;<span class="ident" id="7043405">slowAbs</span><span class="op" id="7043412">(</span><span class="ident" id="7043413">x</span>&nbsp;<span class="builtintype" id="7043415">int</span><span class="op" id="7043418">)</span>&nbsp;<span class="builtintype" id="7043420">int</span>&nbsp;<span class="op" id="7043424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043427">if</span>&nbsp;<span class="ident" id="7043430">x</span>&nbsp;<span class="op" id="7043432">&lt;</span>&nbsp;<span class="num" id="7043434">0</span>&nbsp;<span class="op" id="7043436">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043440">return</span>&nbsp;<span class="op" id="7043447">-</span><span class="ident" id="7043448">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043454">return</span>&nbsp;<span class="ident" id="7043461">x</span><br>
<span class="lineno"></span><span class="op" id="7043463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7043466">//&nbsp;slowPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Paeth&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="7043538">//&nbsp;It&nbsp;is&nbsp;a&nbsp;straight&nbsp;port&nbsp;of&nbsp;the&nbsp;sample&nbsp;code&nbsp;in&nbsp;the&nbsp;PNG&nbsp;spec,&nbsp;section&nbsp;9.4.</span><br>
<span class="lineno"></span><span class="keyword" id="7043612">func</span>&nbsp;<span class="ident" id="7043617">slowPaeth</span><span class="op" id="7043626">(</span><span class="ident" id="7043627">a</span><span class="op" id="7043628">,</span>&nbsp;<span class="ident" id="7043630">b</span><span class="op" id="7043631">,</span>&nbsp;<span class="ident" id="7043633">c</span>&nbsp;<span class="builtintype" id="7043635">uint8</span><span class="op" id="7043640">)</span>&nbsp;<span class="builtintype" id="7043642">uint8</span>&nbsp;<span class="op" id="7043648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043651">p</span>&nbsp;<span class="op" id="7043653">:=</span>&nbsp;<span class="builtintype" id="7043656">int</span><span class="op" id="7043659">(</span><span class="ident" id="7043660">a</span><span class="op" id="7043661">)</span>&nbsp;<span class="op" id="7043663">+</span>&nbsp;<span class="builtintype" id="7043665">int</span><span class="op" id="7043668">(</span><span class="ident" id="7043669">b</span><span class="op" id="7043670">)</span>&nbsp;<span class="op" id="7043672">-</span>&nbsp;<span class="builtintype" id="7043674">int</span><span class="op" id="7043677">(</span><span class="ident" id="7043678">c</span><span class="op" id="7043679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043682">pa</span>&nbsp;<span class="op" id="7043685">:=</span>&nbsp;<span class="ident" id="7043688">slowAbs</span><span class="op" id="7043695">(</span><span class="ident" id="7043696">p</span>&nbsp;<span class="op" id="7043698">-</span>&nbsp;<span class="builtintype" id="7043700">int</span><span class="op" id="7043703">(</span><span class="ident" id="7043704">a</span><span class="op" id="7043705">)</span><span class="op" id="7043706">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043709">pb</span>&nbsp;<span class="op" id="7043712">:=</span>&nbsp;<span class="ident" id="7043715">slowAbs</span><span class="op" id="7043722">(</span><span class="ident" id="7043723">p</span>&nbsp;<span class="op" id="7043725">-</span>&nbsp;<span class="builtintype" id="7043727">int</span><span class="op" id="7043730">(</span><span class="ident" id="7043731">b</span><span class="op" id="7043732">)</span><span class="op" id="7043733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043736">pc</span>&nbsp;<span class="op" id="7043739">:=</span>&nbsp;<span class="ident" id="7043742">slowAbs</span><span class="op" id="7043749">(</span><span class="ident" id="7043750">p</span>&nbsp;<span class="op" id="7043752">-</span>&nbsp;<span class="builtintype" id="7043754">int</span><span class="op" id="7043757">(</span><span class="ident" id="7043758">c</span><span class="op" id="7043759">)</span><span class="op" id="7043760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043763">if</span>&nbsp;<span class="ident" id="7043766">pa</span>&nbsp;<span class="op" id="7043769">&lt;=</span>&nbsp;<span class="ident" id="7043772">pb</span>&nbsp;<span class="op" id="7043775">&amp;&amp;</span>&nbsp;<span class="ident" id="7043778">pa</span>&nbsp;<span class="op" id="7043781">&lt;=</span>&nbsp;<span class="ident" id="7043784">pc</span>&nbsp;<span class="op" id="7043787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043791">return</span>&nbsp;<span class="ident" id="7043798">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043801">}</span>&nbsp;<span class="keyword" id="7043803">else</span>&nbsp;<span class="keyword" id="7043808">if</span>&nbsp;<span class="ident" id="7043811">pb</span>&nbsp;<span class="op" id="7043814">&lt;=</span>&nbsp;<span class="ident" id="7043817">pc</span>&nbsp;<span class="op" id="7043820">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043824">return</span>&nbsp;<span class="ident" id="7043831">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043837">return</span>&nbsp;<span class="ident" id="7043844">c</span><br>
<span class="lineno"></span><span class="op" id="7043846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="7043849">//&nbsp;slowFilterPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;func&nbsp;filterPaeth.</span><br>
<span class="lineno"></span><span class="keyword" id="7043925">func</span>&nbsp;<span class="ident" id="7043930">slowFilterPaeth</span><span class="op" id="7043945">(</span><span class="ident" id="7043946">cdat</span><span class="op" id="7043950">,</span>&nbsp;<span class="ident" id="7043952">pdat</span>&nbsp;<span class="op" id="7043957">[</span><span class="op" id="7043958">]</span><span class="builtintype" id="7043959">byte</span><span class="op" id="7043963">,</span>&nbsp;<span class="ident" id="7043965">bytesPerPixel</span>&nbsp;<span class="builtintype" id="7043979">int</span><span class="op" id="7043982">)</span>&nbsp;<span class="op" id="7043984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043987">for</span>&nbsp;<span class="ident" id="7043991">i</span>&nbsp;<span class="op" id="7043993">:=</span>&nbsp;<span class="num" id="7043996">0</span><span class="op" id="7043997">;</span>&nbsp;<span class="ident" id="7043999">i</span>&nbsp;<span class="op" id="7044001">&lt;</span>&nbsp;<span class="ident" id="7044003">bytesPerPixel</span><span class="op" id="7044016">;</span>&nbsp;<span class="ident" id="7044018">i</span><span class="op" id="7044019">++</span>&nbsp;<span class="op" id="7044022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044026">cdat</span><span class="op" id="7044030">[</span><span class="ident" id="7044031">i</span><span class="op" id="7044032">]</span>&nbsp;<span class="op" id="7044034">+=</span>&nbsp;<span class="ident" id="7044037">paeth</span><span class="op" id="7044042">(</span><span class="num" id="7044043">0</span><span class="op" id="7044044">,</span>&nbsp;<span class="ident" id="7044046">pdat</span><span class="op" id="7044050">[</span><span class="ident" id="7044051">i</span><span class="op" id="7044052">]</span><span class="op" id="7044053">,</span>&nbsp;<span class="num" id="7044055">0</span><span class="op" id="7044056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044059">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044062">for</span>&nbsp;<span class="ident" id="7044066">i</span>&nbsp;<span class="op" id="7044068">:=</span>&nbsp;<span class="ident" id="7044071">bytesPerPixel</span><span class="op" id="7044084">;</span>&nbsp;<span class="ident" id="7044086">i</span>&nbsp;<span class="op" id="7044088">&lt;</span>&nbsp;<span class="builtinfunc" id="7044090">len</span><span class="op" id="7044093">(</span><span class="ident" id="7044094">cdat</span><span class="op" id="7044098">)</span><span class="op" id="7044099">;</span>&nbsp;<span class="ident" id="7044101">i</span><span class="op" id="7044102">++</span>&nbsp;<span class="op" id="7044105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044109">cdat</span><span class="op" id="7044113">[</span><span class="ident" id="7044114">i</span><span class="op" id="7044115">]</span>&nbsp;<span class="op" id="7044117">+=</span>&nbsp;<span class="ident" id="7044120">paeth</span><span class="op" id="7044125">(</span><span class="ident" id="7044126">cdat</span><span class="op" id="7044130">[</span><span class="ident" id="7044131">i</span><span class="op" id="7044132">-</span><span class="ident" id="7044133">bytesPerPixel</span><span class="op" id="7044146">]</span><span class="op" id="7044147">,</span>&nbsp;<span class="ident" id="7044149">pdat</span><span class="op" id="7044153">[</span><span class="ident" id="7044154">i</span><span class="op" id="7044155">]</span><span class="op" id="7044156">,</span>&nbsp;<span class="ident" id="7044158">pdat</span><span class="op" id="7044162">[</span><span class="ident" id="7044163">i</span><span class="op" id="7044164">-</span><span class="ident" id="7044165">bytesPerPixel</span><span class="op" id="7044178">]</span><span class="op" id="7044179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044182">}</span><br>
<span class="lineno"></span><span class="op" id="7044184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="7044187">func</span>&nbsp;<span class="ident" id="7044192">TestPaeth</span><span class="op" id="7044201">(</span><span class="ident" id="7044202">t</span>&nbsp;<span class="op" id="7044204">*</span><span class="ident" id="7044205">testing</span><span class="op" id="7044212">.</span><span class="ident" id="7044213">T</span><span class="op" id="7044214">)</span>&nbsp;<span class="op" id="7044216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044219">for</span>&nbsp;<span class="ident" id="7044223">a</span>&nbsp;<span class="op" id="7044225">:=</span>&nbsp;<span class="num" id="7044228">0</span><span class="op" id="7044229">;</span>&nbsp;<span class="ident" id="7044231">a</span>&nbsp;<span class="op" id="7044233">&lt;</span>&nbsp;<span class="num" id="7044235">256</span><span class="op" id="7044238">;</span>&nbsp;<span class="ident" id="7044240">a</span>&nbsp;<span class="op" id="7044242">+=</span>&nbsp;<span class="num" id="7044245">15</span>&nbsp;<span class="op" id="7044248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044252">for</span>&nbsp;<span class="ident" id="7044256">b</span>&nbsp;<span class="op" id="7044258">:=</span>&nbsp;<span class="num" id="7044261">0</span><span class="op" id="7044262">;</span>&nbsp;<span class="ident" id="7044264">b</span>&nbsp;<span class="op" id="7044266">&lt;</span>&nbsp;<span class="num" id="7044268">256</span><span class="op" id="7044271">;</span>&nbsp;<span class="ident" id="7044273">b</span>&nbsp;<span class="op" id="7044275">+=</span>&nbsp;<span class="num" id="7044278">15</span>&nbsp;<span class="op" id="7044281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044286">for</span>&nbsp;<span class="ident" id="7044290">c</span>&nbsp;<span class="op" id="7044292">:=</span>&nbsp;<span class="num" id="7044295">0</span><span class="op" id="7044296">;</span>&nbsp;<span class="ident" id="7044298">c</span>&nbsp;<span class="op" id="7044300">&lt;</span>&nbsp;<span class="num" id="7044302">256</span><span class="op" id="7044305">;</span>&nbsp;<span class="ident" id="7044307">c</span>&nbsp;<span class="op" id="7044309">+=</span>&nbsp;<span class="num" id="7044312">15</span>&nbsp;<span class="op" id="7044315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044321">got</span>&nbsp;<span class="op" id="7044325">:=</span>&nbsp;<span class="ident" id="7044328">paeth</span><span class="op" id="7044333">(</span><span class="builtintype" id="7044334">uint8</span><span class="op" id="7044339">(</span><span class="ident" id="7044340">a</span><span class="op" id="7044341">)</span><span class="op" id="7044342">,</span>&nbsp;<span class="builtintype" id="7044344">uint8</span><span class="op" id="7044349">(</span><span class="ident" id="7044350">b</span><span class="op" id="7044351">)</span><span class="op" id="7044352">,</span>&nbsp;<span class="builtintype" id="7044354">uint8</span><span class="op" id="7044359">(</span><span class="ident" id="7044360">c</span><span class="op" id="7044361">)</span><span class="op" id="7044362">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044368">want</span>&nbsp;<span class="op" id="7044373">:=</span>&nbsp;<span class="ident" id="7044376">slowPaeth</span><span class="op" id="7044385">(</span><span class="builtintype" id="7044386">uint8</span><span class="op" id="7044391">(</span><span class="ident" id="7044392">a</span><span class="op" id="7044393">)</span><span class="op" id="7044394">,</span>&nbsp;<span class="builtintype" id="7044396">uint8</span><span class="op" id="7044401">(</span><span class="ident" id="7044402">b</span><span class="op" id="7044403">)</span><span class="op" id="7044404">,</span>&nbsp;<span class="builtintype" id="7044406">uint8</span><span class="op" id="7044411">(</span><span class="ident" id="7044412">c</span><span class="op" id="7044413">)</span><span class="op" id="7044414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044420">if</span>&nbsp;<span class="ident" id="7044423">got</span>&nbsp;<span class="op" id="7044427">!=</span>&nbsp;<span class="ident" id="7044430">want</span>&nbsp;<span class="op" id="7044435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044442">t</span><span class="op" id="7044443">.</span><span class="ident" id="7044444">Errorf</span><span class="op" id="7044450">(</span><span class="string" id="7044451">&#34;a,&nbsp;b,&nbsp;c&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7044490">,</span>&nbsp;<span class="ident" id="7044492">a</span><span class="op" id="7044493">,</span>&nbsp;<span class="ident" id="7044495">b</span><span class="op" id="7044496">,</span>&nbsp;<span class="ident" id="7044498">c</span><span class="op" id="7044499">,</span>&nbsp;<span class="ident" id="7044501">got</span><span class="op" id="7044504">,</span>&nbsp;<span class="ident" id="7044506">want</span><span class="op" id="7044510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044521">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044528">}</span><br>
<span class="lineno"></span><span class="op" id="7044530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7044533">func</span>&nbsp;<span class="ident" id="7044538">BenchmarkPaeth</span><span class="op" id="7044552">(</span><span class="ident" id="7044553">b</span>&nbsp;<span class="op" id="7044555">*</span><span class="ident" id="7044556">testing</span><span class="op" id="7044563">.</span><span class="ident" id="7044564">B</span><span class="op" id="7044565">)</span>&nbsp;<span class="op" id="7044567">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044570">for</span>&nbsp;<span class="ident" id="7044574">i</span>&nbsp;<span class="op" id="7044576">:=</span>&nbsp;<span class="num" id="7044579">0</span><span class="op" id="7044580">;</span>&nbsp;<span class="ident" id="7044582">i</span>&nbsp;<span class="op" id="7044584">&lt;</span>&nbsp;<span class="ident" id="7044586">b</span><span class="op" id="7044587">.</span><span class="ident" id="7044588">N</span><span class="op" id="7044589">;</span>&nbsp;<span class="ident" id="7044591">i</span><span class="op" id="7044592">++</span>&nbsp;<span class="op" id="7044595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044599">paeth</span><span class="op" id="7044604">(</span><span class="builtintype" id="7044605">uint8</span><span class="op" id="7044610">(</span><span class="ident" id="7044611">i</span><span class="op" id="7044612">&gt;&gt;</span><span class="num" id="7044614">16</span><span class="op" id="7044616">)</span><span class="op" id="7044617">,</span>&nbsp;<span class="builtintype" id="7044619">uint8</span><span class="op" id="7044624">(</span><span class="ident" id="7044625">i</span><span class="op" id="7044626">&gt;&gt;</span><span class="num" id="7044628">8</span><span class="op" id="7044629">)</span><span class="op" id="7044630">,</span>&nbsp;<span class="builtintype" id="7044632">uint8</span><span class="op" id="7044637">(</span><span class="ident" id="7044638">i</span><span class="op" id="7044639">)</span><span class="op" id="7044640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044643">}</span><br>
<span class="lineno"></span><span class="op" id="7044645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7044648">func</span>&nbsp;<span class="ident" id="7044653">TestPaethDecode</span><span class="op" id="7044668">(</span><span class="ident" id="7044669">t</span>&nbsp;<span class="op" id="7044671">*</span><span class="ident" id="7044672">testing</span><span class="op" id="7044679">.</span><span class="ident" id="7044680">T</span><span class="op" id="7044681">)</span>&nbsp;<span class="op" id="7044683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044686">pdat0</span>&nbsp;<span class="op" id="7044692">:=</span>&nbsp;<span class="builtinfunc" id="7044695">make</span><span class="op" id="7044699">(</span><span class="op" id="7044700">[</span><span class="op" id="7044701">]</span><span class="builtintype" id="7044702">byte</span><span class="op" id="7044706">,</span>&nbsp;<span class="num" id="7044708">32</span><span class="op" id="7044710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044713">pdat1</span>&nbsp;<span class="op" id="7044719">:=</span>&nbsp;<span class="builtinfunc" id="7044722">make</span><span class="op" id="7044726">(</span><span class="op" id="7044727">[</span><span class="op" id="7044728">]</span><span class="builtintype" id="7044729">byte</span><span class="op" id="7044733">,</span>&nbsp;<span class="num" id="7044735">32</span><span class="op" id="7044737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044740">pdat2</span>&nbsp;<span class="op" id="7044746">:=</span>&nbsp;<span class="builtinfunc" id="7044749">make</span><span class="op" id="7044753">(</span><span class="op" id="7044754">[</span><span class="op" id="7044755">]</span><span class="builtintype" id="7044756">byte</span><span class="op" id="7044760">,</span>&nbsp;<span class="num" id="7044762">32</span><span class="op" id="7044764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044767">cdat0</span>&nbsp;<span class="op" id="7044773">:=</span>&nbsp;<span class="builtinfunc" id="7044776">make</span><span class="op" id="7044780">(</span><span class="op" id="7044781">[</span><span class="op" id="7044782">]</span><span class="builtintype" id="7044783">byte</span><span class="op" id="7044787">,</span>&nbsp;<span class="num" id="7044789">32</span><span class="op" id="7044791">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044794">cdat1</span>&nbsp;<span class="op" id="7044800">:=</span>&nbsp;<span class="builtinfunc" id="7044803">make</span><span class="op" id="7044807">(</span><span class="op" id="7044808">[</span><span class="op" id="7044809">]</span><span class="builtintype" id="7044810">byte</span><span class="op" id="7044814">,</span>&nbsp;<span class="num" id="7044816">32</span><span class="op" id="7044818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044821">cdat2</span>&nbsp;<span class="op" id="7044827">:=</span>&nbsp;<span class="builtinfunc" id="7044830">make</span><span class="op" id="7044834">(</span><span class="op" id="7044835">[</span><span class="op" id="7044836">]</span><span class="builtintype" id="7044837">byte</span><span class="op" id="7044841">,</span>&nbsp;<span class="num" id="7044843">32</span><span class="op" id="7044845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044848">r</span>&nbsp;<span class="op" id="7044850">:=</span>&nbsp;<span class="ident" id="7044853">rand</span><span class="op" id="7044857">.</span><span class="ident" id="7044858">New</span><span class="op" id="7044861">(</span><span class="ident" id="7044862">rand</span><span class="op" id="7044866">.</span><span class="ident" id="7044867">NewSource</span><span class="op" id="7044876">(</span><span class="num" id="7044877">1</span><span class="op" id="7044878">)</span><span class="op" id="7044879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044882">for</span>&nbsp;<span class="ident" id="7044886">bytesPerPixel</span>&nbsp;<span class="op" id="7044900">:=</span>&nbsp;<span class="num" id="7044903">1</span><span class="op" id="7044904">;</span>&nbsp;<span class="ident" id="7044906">bytesPerPixel</span>&nbsp;<span class="op" id="7044920">&lt;=</span>&nbsp;<span class="num" id="7044923">8</span><span class="op" id="7044924">;</span>&nbsp;<span class="ident" id="7044926">bytesPerPixel</span><span class="op" id="7044939">++</span>&nbsp;<span class="op" id="7044942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044946">for</span>&nbsp;<span class="ident" id="7044950">i</span>&nbsp;<span class="op" id="7044952">:=</span>&nbsp;<span class="num" id="7044955">0</span><span class="op" id="7044956">;</span>&nbsp;<span class="ident" id="7044958">i</span>&nbsp;<span class="op" id="7044960">&lt;</span>&nbsp;<span class="num" id="7044962">100</span><span class="op" id="7044965">;</span>&nbsp;<span class="ident" id="7044967">i</span><span class="op" id="7044968">++</span>&nbsp;<span class="op" id="7044971">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044976">for</span>&nbsp;<span class="ident" id="7044980">j</span>&nbsp;<span class="op" id="7044982">:=</span>&nbsp;<span class="keyword" id="7044985">range</span>&nbsp;<span class="ident" id="7044991">pdat0</span>&nbsp;<span class="op" id="7044997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045003">pdat0</span><span class="op" id="7045008">[</span><span class="ident" id="7045009">j</span><span class="op" id="7045010">]</span>&nbsp;<span class="op" id="7045012">=</span>&nbsp;<span class="builtintype" id="7045014">uint8</span><span class="op" id="7045019">(</span><span class="ident" id="7045020">r</span><span class="op" id="7045021">.</span><span class="ident" id="7045022">Uint32</span><span class="op" id="7045028">(</span><span class="op" id="7045029">)</span><span class="op" id="7045030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045036">cdat0</span><span class="op" id="7045041">[</span><span class="ident" id="7045042">j</span><span class="op" id="7045043">]</span>&nbsp;<span class="op" id="7045045">=</span>&nbsp;<span class="builtintype" id="7045047">uint8</span><span class="op" id="7045052">(</span><span class="ident" id="7045053">r</span><span class="op" id="7045054">.</span><span class="ident" id="7045055">Uint32</span><span class="op" id="7045061">(</span><span class="op" id="7045062">)</span><span class="op" id="7045063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7045073">copy</span><span class="op" id="7045077">(</span><span class="ident" id="7045078">pdat1</span><span class="op" id="7045083">,</span>&nbsp;<span class="ident" id="7045085">pdat0</span><span class="op" id="7045090">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7045095">copy</span><span class="op" id="7045099">(</span><span class="ident" id="7045100">pdat2</span><span class="op" id="7045105">,</span>&nbsp;<span class="ident" id="7045107">pdat0</span><span class="op" id="7045112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7045117">copy</span><span class="op" id="7045121">(</span><span class="ident" id="7045122">cdat1</span><span class="op" id="7045127">,</span>&nbsp;<span class="ident" id="7045129">cdat0</span><span class="op" id="7045134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7045139">copy</span><span class="op" id="7045143">(</span><span class="ident" id="7045144">cdat2</span><span class="op" id="7045149">,</span>&nbsp;<span class="ident" id="7045151">cdat0</span><span class="op" id="7045156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045161">filterPaeth</span><span class="op" id="7045172">(</span><span class="ident" id="7045173">cdat1</span><span class="op" id="7045178">,</span>&nbsp;<span class="ident" id="7045180">pdat1</span><span class="op" id="7045185">,</span>&nbsp;<span class="ident" id="7045187">bytesPerPixel</span><span class="op" id="7045200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045205">slowFilterPaeth</span><span class="op" id="7045220">(</span><span class="ident" id="7045221">cdat2</span><span class="op" id="7045226">,</span>&nbsp;<span class="ident" id="7045228">pdat2</span><span class="op" id="7045233">,</span>&nbsp;<span class="ident" id="7045235">bytesPerPixel</span><span class="op" id="7045248">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045253">if</span>&nbsp;<span class="op" id="7045256">!</span><span class="ident" id="7045257">bytes</span><span class="op" id="7045262">.</span><span class="ident" id="7045263">Equal</span><span class="op" id="7045268">(</span><span class="ident" id="7045269">cdat1</span><span class="op" id="7045274">,</span>&nbsp;<span class="ident" id="7045276">cdat2</span><span class="op" id="7045281">)</span>&nbsp;<span class="op" id="7045283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045289">t</span><span class="op" id="7045290">.</span><span class="ident" id="7045291">Errorf</span><span class="op" id="7045297">(</span><span class="string" id="7045298">&#34;bytesPerPixel:&nbsp;%d\npdat0:&nbsp;%&nbsp;x\ncdat0:&nbsp;%&nbsp;x\ngot:&nbsp;&nbsp;&nbsp;%&nbsp;x\nwant:&nbsp;&nbsp;%&nbsp;x&#34;</span><span class="op" id="7045365">,</span>&nbsp;<span class="ident" id="7045367">bytesPerPixel</span><span class="op" id="7045380">,</span>&nbsp;<span class="ident" id="7045382">pdat0</span><span class="op" id="7045387">,</span>&nbsp;<span class="ident" id="7045389">cdat0</span><span class="op" id="7045394">,</span>&nbsp;<span class="ident" id="7045396">cdat1</span><span class="op" id="7045401">,</span>&nbsp;<span class="ident" id="7045403">cdat2</span><span class="op" id="7045408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045414">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045427">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045430">}</span><br>
<span class="lineno"></span><span class="op" id="7045432">}</span>
</div>
</body>
</html>
