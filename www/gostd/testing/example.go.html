<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html" class="current">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5465333">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5465388">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5465442">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5465493">package</span>&nbsp;<span class="ident" id="5465501">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5465510">import</span>&nbsp;<span class="op" id="5465517">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5465520">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5465529">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5465536">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5465542">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5465548">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5465559">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5465566">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="5465569">type</span>&nbsp;<span class="ident" id="5465574">InternalExample</span>&nbsp;<span class="keyword" id="5465590">struct</span>&nbsp;<span class="op" id="5465597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465600">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5465607">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465615">F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465622">func</span><span class="op" id="5465626">(</span><span class="op" id="5465627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465630">Output</span>&nbsp;<span class="builtintype" id="5465637">string</span><br>
<span class="lineno">20</span><span class="op" id="5465644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5465647">func</span>&nbsp;<span class="ident" id="5465652">RunExamples</span><span class="op" id="5465663">(</span><span class="ident" id="5465664">matchString</span>&nbsp;<span class="keyword" id="5465676">func</span><span class="op" id="5465680">(</span><span class="ident" id="5465681">pat</span><span class="op" id="5465684">,</span>&nbsp;<span class="ident" id="5465686">str</span>&nbsp;<span class="builtintype" id="5465690">string</span><span class="op" id="5465696">)</span>&nbsp;<span class="op" id="5465698">(</span><span class="builtintype" id="5465699">bool</span><span class="op" id="5465703">,</span>&nbsp;<span class="builtintype" id="5465705">error</span><span class="op" id="5465710">)</span><span class="op" id="5465711">,</span>&nbsp;<span class="ident" id="5465713">examples</span>&nbsp;<span class="op" id="5465722">[</span><span class="op" id="5465723">]</span><span class="ident" id="5465724"><a href="/gostd/testing/example.go.html#5465574">InternalExample</a></span><span class="op" id="5465739">)</span>&nbsp;<span class="op" id="5465741">(</span><span class="ident" id="5465742">ok</span>&nbsp;<span class="builtintype" id="5465745">bool</span><span class="op" id="5465749">)</span>&nbsp;<span class="op" id="5465751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465754"><a href="/gostd/testing/example.go.html#5465742">ok</a></span>&nbsp;<span class="op" id="5465757">=</span>&nbsp;<span class="builtintype" id="5465759">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465766">var</span>&nbsp;<span class="ident" id="5465770">eg</span>&nbsp;<span class="ident" id="5465773"><a href="/gostd/testing/example.go.html#5465574">InternalExample</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465791">for</span>&nbsp;<span class="ident" id="5465795">_</span><span class="op" id="5465796">,</span>&nbsp;<span class="ident" id="5465798"><a href="/gostd/testing/example.go.html#5465770">eg</a></span>&nbsp;<span class="op" id="5465801">=</span>&nbsp;<span class="keyword" id="5465803">range</span>&nbsp;<span class="ident" id="5465809"><a href="/gostd/testing/example.go.html#5465713">examples</a></span>&nbsp;<span class="op" id="5465818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465822">matched</span><span class="op" id="5465829">,</span>&nbsp;<span class="ident" id="5465831">err</span>&nbsp;<span class="op" id="5465835">:=</span>&nbsp;<span class="ident" id="5465838"><a href="/gostd/testing/example.go.html#5465664">matchString</a></span><span class="op" id="5465849">(</span><span class="op" id="5465850">*</span><span class="ident" id="5465851"><a href="/gostd/testing/testing.go.html#5473681">match</a></span><span class="op" id="5465856">,</span>&nbsp;<span class="ident" id="5465858"><a href="/gostd/testing/example.go.html#5465770">eg</a></span><span class="op" id="5465860">.</span><span class="ident" id="5465861"><a href="/gostd/testing/example.go.html#5465600">Name</a></span><span class="op" id="5465865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465869">if</span>&nbsp;<span class="ident" id="5465872"><a href="/gostd/testing/example.go.html#5465831">err</a></span>&nbsp;<span class="op" id="5465876">!=</span>&nbsp;<span class="builtintype" id="5465879">nil</span>&nbsp;<span class="op" id="5465883">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465888"><a href="/gostd/testing/example.go.html#5465529">fmt</a></span><span class="op" id="5465891">.</span><span class="ident" id="5465892"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5465899">(</span><span class="ident" id="5465900"><a href="/gostd/testing/example.go.html#5465542">os</a></span><span class="op" id="5465902">.</span><span class="ident" id="5465903"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5465909">,</span>&nbsp;<span class="string" id="5465911">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="5465956">,</span>&nbsp;<span class="ident" id="5465958"><a href="/gostd/testing/example.go.html#5465831">err</a></span><span class="op" id="5465961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465966"><a href="/gostd/testing/example.go.html#5465542">os</a></span><span class="op" id="5465968">.</span><span class="ident" id="5465969"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5465973">(</span><span class="num" id="5465974">1</span><span class="op" id="5465975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5465979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465983">if</span>&nbsp;<span class="op" id="5465986">!</span><span class="ident" id="5465987"><a href="/gostd/testing/example.go.html#5465822">matched</a></span>&nbsp;<span class="op" id="5465995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466000">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466015">if</span>&nbsp;<span class="op" id="5466018">!</span><span class="ident" id="5466019"><a href="/gostd/testing/example.go.html#5466074">runExample</a></span><span class="op" id="5466029">(</span><span class="ident" id="5466030"><a href="/gostd/testing/example.go.html#5465770">eg</a></span><span class="op" id="5466032">)</span>&nbsp;<span class="op" id="5466034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466039"><a href="/gostd/testing/example.go.html#5465742">ok</a></span>&nbsp;<span class="op" id="5466042">=</span>&nbsp;<span class="builtintype" id="5466044">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466055">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466059">return</span><br>
<span class="lineno"></span><span class="op" id="5466066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5466069">func</span>&nbsp;<span class="ident" id="5466074">runExample</span><span class="op" id="5466084">(</span><span class="ident" id="5466085">eg</span>&nbsp;<span class="ident" id="5466088"><a href="/gostd/testing/example.go.html#5465574">InternalExample</a></span><span class="op" id="5466103">)</span>&nbsp;<span class="op" id="5466105">(</span><span class="ident" id="5466106">ok</span>&nbsp;<span class="builtintype" id="5466109">bool</span><span class="op" id="5466113">)</span>&nbsp;<span class="op" id="5466115">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466118">if</span>&nbsp;<span class="op" id="5466121">*</span><span class="ident" id="5466122"><a href="/gostd/testing/testing.go.html#5473479">chatty</a></span>&nbsp;<span class="op" id="5466129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466133"><a href="/gostd/testing/example.go.html#5465529">fmt</a></span><span class="op" id="5466136">.</span><span class="ident" id="5466137"><a href="/gostd/fmt/print.go.html#2143442">Printf</a></span><span class="op" id="5466143">(</span><span class="string" id="5466144">&#34;===&nbsp;RUN:&nbsp;%s\n&#34;</span><span class="op" id="5466159">,</span>&nbsp;<span class="ident" id="5466161"><a href="/gostd/testing/example.go.html#5466085">eg</a></span><span class="op" id="5466163">.</span><span class="ident" id="5466164"><a href="/gostd/testing/example.go.html#5465600">Name</a></span><span class="op" id="5466168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5466175">//&nbsp;Capture&nbsp;stdout.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466195">stdout</span>&nbsp;<span class="op" id="5466202">:=</span>&nbsp;<span class="ident" id="5466205"><a href="/gostd/testing/example.go.html#5465542">os</a></span><span class="op" id="5466207">.</span><span class="ident" id="5466208"><a href="/gostd/os/file.go.html#2441814">Stdout</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466216">r</span><span class="op" id="5466217">,</span>&nbsp;<span class="ident" id="5466219">w</span><span class="op" id="5466220">,</span>&nbsp;<span class="ident" id="5466222">err</span>&nbsp;<span class="op" id="5466226">:=</span>&nbsp;<span class="ident" id="5466229"><a href="/gostd/testing/example.go.html#5465542">os</a></span><span class="op" id="5466231">.</span><span class="ident" id="5466232"><a href="/gostd/os/pipe_linux.go.html#2467766">Pipe</a></span><span class="op" id="5466236">(</span><span class="op" id="5466237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466240">if</span>&nbsp;<span class="ident" id="5466243"><a href="/gostd/testing/example.go.html#5466222">err</a></span>&nbsp;<span class="op" id="5466247">!=</span>&nbsp;<span class="builtintype" id="5466250">nil</span>&nbsp;<span class="op" id="5466254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466258"><a href="/gostd/testing/example.go.html#5465529">fmt</a></span><span class="op" id="5466261">.</span><span class="ident" id="5466262"><a href="/gostd/fmt/print.go.html#2145376">Fprintln</a></span><span class="op" id="5466270">(</span><span class="ident" id="5466271"><a href="/gostd/testing/example.go.html#5465542">os</a></span><span class="op" id="5466273">.</span><span class="ident" id="5466274"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5466280">,</span>&nbsp;<span class="ident" id="5466282"><a href="/gostd/testing/example.go.html#5466222">err</a></span><span class="op" id="5466285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466289"><a href="/gostd/testing/example.go.html#5465542">os</a></span><span class="op" id="5466291">.</span><span class="ident" id="5466292"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5466296">(</span><span class="num" id="5466297">1</span><span class="op" id="5466298">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466304"><a href="/gostd/testing/example.go.html#5465542">os</a></span><span class="op" id="5466306">.</span><span class="ident" id="5466307"><a href="/gostd/os/file.go.html#2441814">Stdout</a></span>&nbsp;<span class="op" id="5466314">=</span>&nbsp;<span class="ident" id="5466316"><a href="/gostd/testing/example.go.html#5466219">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466319">outC</span>&nbsp;<span class="op" id="5466324">:=</span>&nbsp;<span class="builtinfunc" id="5466327">make</span><span class="op" id="5466331">(</span><span class="keyword" id="5466332">chan</span>&nbsp;<span class="builtintype" id="5466337">string</span><span class="op" id="5466343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466346">go</span>&nbsp;<span class="keyword" id="5466349">func</span><span class="op" id="5466353">(</span><span class="op" id="5466354">)</span>&nbsp;<span class="op" id="5466356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466360">buf</span>&nbsp;<span class="op" id="5466364">:=</span>&nbsp;<span class="builtinfunc" id="5466367">new</span><span class="op" id="5466370">(</span><span class="ident" id="5466371"><a href="/gostd/testing/example.go.html#5465520">bytes</a></span><span class="op" id="5466376">.</span><span class="ident" id="5466377"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="5466383">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466387">_</span><span class="op" id="5466388">,</span>&nbsp;<span class="ident" id="5466390">err</span>&nbsp;<span class="op" id="5466394">:=</span>&nbsp;<span class="ident" id="5466397"><a href="/gostd/testing/example.go.html#5465536">io</a></span><span class="op" id="5466399">.</span><span class="ident" id="5466400"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="5466404">(</span><span class="ident" id="5466405"><a href="/gostd/testing/example.go.html#5466360">buf</a></span><span class="op" id="5466408">,</span>&nbsp;<span class="ident" id="5466410"><a href="/gostd/testing/example.go.html#5466216">r</a></span><span class="op" id="5466411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466415"><a href="/gostd/testing/example.go.html#5466216">r</a></span><span class="op" id="5466416">.</span><span class="ident" id="5466417"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="5466422">(</span><span class="op" id="5466423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466427">if</span>&nbsp;<span class="ident" id="5466430"><a href="/gostd/testing/example.go.html#5466390">err</a></span>&nbsp;<span class="op" id="5466434">!=</span>&nbsp;<span class="builtintype" id="5466437">nil</span>&nbsp;<span class="op" id="5466441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466446"><a href="/gostd/testing/example.go.html#5465529">fmt</a></span><span class="op" id="5466449">.</span><span class="ident" id="5466450"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5466457">(</span><span class="ident" id="5466458"><a href="/gostd/testing/example.go.html#5465542">os</a></span><span class="op" id="5466460">.</span><span class="ident" id="5466461"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5466467">,</span>&nbsp;<span class="string" id="5466469">&#34;testing:&nbsp;copying&nbsp;pipe:&nbsp;%v\n&#34;</span><span class="op" id="5466498">,</span>&nbsp;<span class="ident" id="5466500"><a href="/gostd/testing/example.go.html#5466390">err</a></span><span class="op" id="5466503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466508"><a href="/gostd/testing/example.go.html#5465542">os</a></span><span class="op" id="5466510">.</span><span class="ident" id="5466511"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5466515">(</span><span class="num" id="5466516">1</span><span class="op" id="5466517">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466525"><a href="/gostd/testing/example.go.html#5466319">outC</a></span>&nbsp;<span class="op" id="5466530">&lt;-</span>&nbsp;<span class="ident" id="5466533"><a href="/gostd/testing/example.go.html#5466360">buf</a></span><span class="op" id="5466536">.</span><span class="ident" id="5466537"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="5466543">(</span><span class="op" id="5466544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466547">}</span><span class="op" id="5466548">(</span><span class="op" id="5466549">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466553">start</span>&nbsp;<span class="op" id="5466559">:=</span>&nbsp;<span class="ident" id="5466562"><a href="/gostd/testing/example.go.html#5465559">time</a></span><span class="op" id="5466566">.</span><span class="ident" id="5466567"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="5466570">(</span><span class="op" id="5466571">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466574"><a href="/gostd/testing/example.go.html#5466106">ok</a></span>&nbsp;<span class="op" id="5466577">=</span>&nbsp;<span class="builtintype" id="5466579">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5466586">//&nbsp;Clean&nbsp;up&nbsp;in&nbsp;a&nbsp;deferred&nbsp;call&nbsp;so&nbsp;we&nbsp;can&nbsp;recover&nbsp;if&nbsp;the&nbsp;example&nbsp;panics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466659">defer</span>&nbsp;<span class="keyword" id="5466665">func</span><span class="op" id="5466669">(</span><span class="op" id="5466670">)</span>&nbsp;<span class="op" id="5466672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466676">dstr</span>&nbsp;<span class="op" id="5466681">:=</span>&nbsp;<span class="ident" id="5466684"><a href="/gostd/testing/testing.go.html#5476546">fmtDuration</a></span><span class="op" id="5466695">(</span><span class="ident" id="5466696"><a href="/gostd/testing/example.go.html#5465559">time</a></span><span class="op" id="5466700">.</span><span class="ident" id="5466701"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="5466704">(</span><span class="op" id="5466705">)</span><span class="op" id="5466706">.</span><span class="ident" id="5466707"><a href="/gostd/time/time.go.html#2739063">Sub</a></span><span class="op" id="5466710">(</span><span class="ident" id="5466711"><a href="/gostd/testing/example.go.html#5466553">start</a></span><span class="op" id="5466716">)</span><span class="op" id="5466717">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5466722">//&nbsp;Close&nbsp;pipe,&nbsp;restore&nbsp;stdout,&nbsp;get&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466767"><a href="/gostd/testing/example.go.html#5466219">w</a></span><span class="op" id="5466768">.</span><span class="ident" id="5466769"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="5466774">(</span><span class="op" id="5466775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466779"><a href="/gostd/testing/example.go.html#5465542">os</a></span><span class="op" id="5466781">.</span><span class="ident" id="5466782"><a href="/gostd/os/file.go.html#2441814">Stdout</a></span>&nbsp;<span class="op" id="5466789">=</span>&nbsp;<span class="ident" id="5466791"><a href="/gostd/testing/example.go.html#5466195">stdout</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466800">out</span>&nbsp;<span class="op" id="5466804">:=</span>&nbsp;<span class="op" id="5466807">&lt;-</span><span class="ident" id="5466809"><a href="/gostd/testing/example.go.html#5466319">outC</a></span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466817">var</span>&nbsp;<span class="ident" id="5466821">fail</span>&nbsp;<span class="builtintype" id="5466826">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466835">err</span>&nbsp;<span class="op" id="5466839">:=</span>&nbsp;<span class="builtinfunc" id="5466842">recover</span><span class="op" id="5466849">(</span><span class="op" id="5466850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466854">if</span>&nbsp;<span class="ident" id="5466857">g</span><span class="op" id="5466858">,</span>&nbsp;<span class="ident" id="5466860">e</span>&nbsp;<span class="op" id="5466862">:=</span>&nbsp;<span class="ident" id="5466865"><a href="/gostd/testing/example.go.html#5465548">strings</a></span><span class="op" id="5466872">.</span><span class="ident" id="5466873"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="5466882">(</span><span class="ident" id="5466883"><a href="/gostd/testing/example.go.html#5466800">out</a></span><span class="op" id="5466886">)</span><span class="op" id="5466887">,</span>&nbsp;<span class="ident" id="5466889"><a href="/gostd/testing/example.go.html#5465548">strings</a></span><span class="op" id="5466896">.</span><span class="ident" id="5466897"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="5466906">(</span><span class="ident" id="5466907"><a href="/gostd/testing/example.go.html#5466085">eg</a></span><span class="op" id="5466909">.</span><span class="ident" id="5466910"><a href="/gostd/testing/example.go.html#5465630">Output</a></span><span class="op" id="5466916">)</span><span class="op" id="5466917">;</span>&nbsp;<span class="ident" id="5466919"><a href="/gostd/testing/example.go.html#5466857">g</a></span>&nbsp;<span class="op" id="5466921">!=</span>&nbsp;<span class="ident" id="5466924"><a href="/gostd/testing/example.go.html#5466860">e</a></span>&nbsp;<span class="op" id="5466926">&amp;&amp;</span>&nbsp;<span class="ident" id="5466929"><a href="/gostd/testing/example.go.html#5466835">err</a></span>&nbsp;<span class="op" id="5466933">==</span>&nbsp;<span class="builtintype" id="5466936">nil</span>&nbsp;<span class="op" id="5466940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466945"><a href="/gostd/testing/example.go.html#5466821">fail</a></span>&nbsp;<span class="op" id="5466950">=</span>&nbsp;<span class="ident" id="5466952"><a href="/gostd/testing/example.go.html#5465529">fmt</a></span><span class="op" id="5466955">.</span><span class="ident" id="5466956"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5466963">(</span><span class="string" id="5466964">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="5466987">,</span>&nbsp;<span class="ident" id="5466989"><a href="/gostd/testing/example.go.html#5466857">g</a></span><span class="op" id="5466990">,</span>&nbsp;<span class="ident" id="5466992"><a href="/gostd/testing/example.go.html#5466860">e</a></span><span class="op" id="5466993">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467001">if</span>&nbsp;<span class="ident" id="5467004"><a href="/gostd/testing/example.go.html#5466821">fail</a></span>&nbsp;<span class="op" id="5467009">!=</span>&nbsp;<span class="string" id="5467012">&#34;&#34;</span>&nbsp;<span class="op" id="5467015">||</span>&nbsp;<span class="ident" id="5467018"><a href="/gostd/testing/example.go.html#5466835">err</a></span>&nbsp;<span class="op" id="5467022">!=</span>&nbsp;<span class="builtintype" id="5467025">nil</span>&nbsp;<span class="op" id="5467029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467034"><a href="/gostd/testing/example.go.html#5465529">fmt</a></span><span class="op" id="5467037">.</span><span class="ident" id="5467038"><a href="/gostd/fmt/print.go.html#2143442">Printf</a></span><span class="op" id="5467044">(</span><span class="string" id="5467045">&#34;---&nbsp;FAIL:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><span class="op" id="5467068">,</span>&nbsp;<span class="ident" id="5467070"><a href="/gostd/testing/example.go.html#5466085">eg</a></span><span class="op" id="5467072">.</span><span class="ident" id="5467073"><a href="/gostd/testing/example.go.html#5465600">Name</a></span><span class="op" id="5467077">,</span>&nbsp;<span class="ident" id="5467079"><a href="/gostd/testing/example.go.html#5466676">dstr</a></span><span class="op" id="5467083">,</span>&nbsp;<span class="ident" id="5467085"><a href="/gostd/testing/example.go.html#5466821">fail</a></span><span class="op" id="5467089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467094"><a href="/gostd/testing/example.go.html#5466106">ok</a></span>&nbsp;<span class="op" id="5467097">=</span>&nbsp;<span class="builtintype" id="5467099">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467107">}</span>&nbsp;<span class="keyword" id="5467109">else</span>&nbsp;<span class="keyword" id="5467114">if</span>&nbsp;<span class="op" id="5467117">*</span><span class="ident" id="5467118"><a href="/gostd/testing/testing.go.html#5473479">chatty</a></span>&nbsp;<span class="op" id="5467125">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467130"><a href="/gostd/testing/example.go.html#5465529">fmt</a></span><span class="op" id="5467133">.</span><span class="ident" id="5467134"><a href="/gostd/fmt/print.go.html#2143442">Printf</a></span><span class="op" id="5467140">(</span><span class="string" id="5467141">&#34;---&nbsp;PASS:&nbsp;%s&nbsp;(%s)\n&#34;</span><span class="op" id="5467162">,</span>&nbsp;<span class="ident" id="5467164"><a href="/gostd/testing/example.go.html#5466085">eg</a></span><span class="op" id="5467166">.</span><span class="ident" id="5467167"><a href="/gostd/testing/example.go.html#5465600">Name</a></span><span class="op" id="5467171">,</span>&nbsp;<span class="ident" id="5467173"><a href="/gostd/testing/example.go.html#5466676">dstr</a></span><span class="op" id="5467177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467185">if</span>&nbsp;<span class="ident" id="5467188"><a href="/gostd/testing/example.go.html#5466835">err</a></span>&nbsp;<span class="op" id="5467192">!=</span>&nbsp;<span class="builtintype" id="5467195">nil</span>&nbsp;<span class="op" id="5467199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5467204">panic</span><span class="op" id="5467209">(</span><span class="ident" id="5467210"><a href="/gostd/testing/example.go.html#5466835">err</a></span><span class="op" id="5467213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467217">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467220">}</span><span class="op" id="5467221">(</span><span class="op" id="5467222">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5467226">//&nbsp;Run&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467243"><a href="/gostd/testing/example.go.html#5466085">eg</a></span><span class="op" id="5467245">.</span><span class="ident" id="5467246"><a href="/gostd/testing/example.go.html#5465615">F</a></span><span class="op" id="5467247">(</span><span class="op" id="5467248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467251">return</span><br>
<span class="lineno">100</span><span class="op" id="5467258">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
