<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html" class="current">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4174603">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4174659">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4174713">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4174764">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4174829">package</span>&nbsp;<span class="ident" id="4174837">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4174842">import</span>&nbsp;<span class="op" id="4174849">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4174852">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4174858">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="4174868">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4174871">func</span>&nbsp;<span class="ident" id="4174876">joinIPv4Group</span><span class="op" id="4174889">(</span><span class="ident" id="4174890">fd</span>&nbsp;<span class="op" id="4174893">*</span><span class="ident" id="4174894">netFD</span><span class="op" id="4174899">,</span>&nbsp;<span class="ident" id="4174901">ifi</span>&nbsp;<span class="op" id="4174905">*</span><span class="ident" id="4174906">Interface</span><span class="op" id="4174915">,</span>&nbsp;<span class="ident" id="4174917">ip</span>&nbsp;<span class="ident" id="4174920">IP</span><span class="op" id="4174922">)</span>&nbsp;<span class="builtintype" id="4174924">error</span>&nbsp;<span class="op" id="4174930">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4174933">mreq</span>&nbsp;<span class="op" id="4174938">:=</span>&nbsp;<span class="op" id="4174941">&amp;</span><span class="ident" id="4174942">syscall</span><span class="op" id="4174949">.</span><span class="ident" id="4174950">IPMreq</span><span class="op" id="4174956">{</span><span class="ident" id="4174957">Multiaddr</span><span class="op" id="4174966">:</span>&nbsp;<span class="op" id="4174968">[</span><span class="num" id="4174969">4</span><span class="op" id="4174970">]</span><span class="builtintype" id="4174971">byte</span><span class="op" id="4174975">{</span><span class="ident" id="4174976">ip</span><span class="op" id="4174978">[</span><span class="num" id="4174979">0</span><span class="op" id="4174980">]</span><span class="op" id="4174981">,</span>&nbsp;<span class="ident" id="4174983">ip</span><span class="op" id="4174985">[</span><span class="num" id="4174986">1</span><span class="op" id="4174987">]</span><span class="op" id="4174988">,</span>&nbsp;<span class="ident" id="4174990">ip</span><span class="op" id="4174992">[</span><span class="num" id="4174993">2</span><span class="op" id="4174994">]</span><span class="op" id="4174995">,</span>&nbsp;<span class="ident" id="4174997">ip</span><span class="op" id="4174999">[</span><span class="num" id="4175000">3</span><span class="op" id="4175001">]</span><span class="op" id="4175002">}</span><span class="op" id="4175003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175006">if</span>&nbsp;<span class="ident" id="4175009">err</span>&nbsp;<span class="op" id="4175013">:=</span>&nbsp;<span class="ident" id="4175016">setIPv4MreqToInterface</span><span class="op" id="4175038">(</span><span class="ident" id="4175039">mreq</span><span class="op" id="4175043">,</span>&nbsp;<span class="ident" id="4175045">ifi</span><span class="op" id="4175048">)</span><span class="op" id="4175049">;</span>&nbsp;<span class="ident" id="4175051">err</span>&nbsp;<span class="op" id="4175055">!=</span>&nbsp;<span class="ident" id="4175058">nil</span>&nbsp;<span class="op" id="4175062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175066">return</span>&nbsp;<span class="ident" id="4175073">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4175078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175081">if</span>&nbsp;<span class="ident" id="4175084">err</span>&nbsp;<span class="op" id="4175088">:=</span>&nbsp;<span class="ident" id="4175091">fd</span><span class="op" id="4175093">.</span><span class="ident" id="4175094">incref</span><span class="op" id="4175100">(</span><span class="op" id="4175101">)</span><span class="op" id="4175102">;</span>&nbsp;<span class="ident" id="4175104">err</span>&nbsp;<span class="op" id="4175108">!=</span>&nbsp;<span class="ident" id="4175111">nil</span>&nbsp;<span class="op" id="4175115">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175119">return</span>&nbsp;<span class="ident" id="4175126">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4175131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175134">defer</span>&nbsp;<span class="ident" id="4175140">fd</span><span class="op" id="4175142">.</span><span class="ident" id="4175143">decref</span><span class="op" id="4175149">(</span><span class="op" id="4175150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175153">return</span>&nbsp;<span class="ident" id="4175160">os</span><span class="op" id="4175162">.</span><span class="ident" id="4175163">NewSyscallError</span><span class="op" id="4175178">(</span><span class="string" id="4175179">&#34;setsockopt&#34;</span><span class="op" id="4175191">,</span>&nbsp;<span class="ident" id="4175193">syscall</span><span class="op" id="4175200">.</span><span class="ident" id="4175201">SetsockoptIPMreq</span><span class="op" id="4175217">(</span><span class="ident" id="4175218">fd</span><span class="op" id="4175220">.</span><span class="ident" id="4175221">sysfd</span><span class="op" id="4175226">,</span>&nbsp;<span class="ident" id="4175228">syscall</span><span class="op" id="4175235">.</span><span class="ident" id="4175236">IPPROTO_IP</span><span class="op" id="4175246">,</span>&nbsp;<span class="ident" id="4175248">syscall</span><span class="op" id="4175255">.</span><span class="ident" id="4175256">IP_ADD_MEMBERSHIP</span><span class="op" id="4175273">,</span>&nbsp;<span class="ident" id="4175275">mreq</span><span class="op" id="4175279">)</span><span class="op" id="4175280">)</span><br>
<span class="lineno"></span><span class="op" id="4175282">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="4175285">func</span>&nbsp;<span class="ident" id="4175290">setIPv6MulticastInterface</span><span class="op" id="4175315">(</span><span class="ident" id="4175316">fd</span>&nbsp;<span class="op" id="4175319">*</span><span class="ident" id="4175320">netFD</span><span class="op" id="4175325">,</span>&nbsp;<span class="ident" id="4175327">ifi</span>&nbsp;<span class="op" id="4175331">*</span><span class="ident" id="4175332">Interface</span><span class="op" id="4175341">)</span>&nbsp;<span class="builtintype" id="4175343">error</span>&nbsp;<span class="op" id="4175349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175352">var</span>&nbsp;<span class="ident" id="4175356">v</span>&nbsp;<span class="builtintype" id="4175358">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175363">if</span>&nbsp;<span class="ident" id="4175366">ifi</span>&nbsp;<span class="op" id="4175370">!=</span>&nbsp;<span class="ident" id="4175373">nil</span>&nbsp;<span class="op" id="4175377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4175381">v</span>&nbsp;<span class="op" id="4175383">=</span>&nbsp;<span class="ident" id="4175385">ifi</span><span class="op" id="4175388">.</span><span class="ident" id="4175389">Index</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4175396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175399">if</span>&nbsp;<span class="ident" id="4175402">err</span>&nbsp;<span class="op" id="4175406">:=</span>&nbsp;<span class="ident" id="4175409">fd</span><span class="op" id="4175411">.</span><span class="ident" id="4175412">incref</span><span class="op" id="4175418">(</span><span class="op" id="4175419">)</span><span class="op" id="4175420">;</span>&nbsp;<span class="ident" id="4175422">err</span>&nbsp;<span class="op" id="4175426">!=</span>&nbsp;<span class="ident" id="4175429">nil</span>&nbsp;<span class="op" id="4175433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175437">return</span>&nbsp;<span class="ident" id="4175444">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4175449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175452">defer</span>&nbsp;<span class="ident" id="4175458">fd</span><span class="op" id="4175460">.</span><span class="ident" id="4175461">decref</span><span class="op" id="4175467">(</span><span class="op" id="4175468">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175471">return</span>&nbsp;<span class="ident" id="4175478">os</span><span class="op" id="4175480">.</span><span class="ident" id="4175481">NewSyscallError</span><span class="op" id="4175496">(</span><span class="string" id="4175497">&#34;setsockopt&#34;</span><span class="op" id="4175509">,</span>&nbsp;<span class="ident" id="4175511">syscall</span><span class="op" id="4175518">.</span><span class="ident" id="4175519">SetsockoptInt</span><span class="op" id="4175532">(</span><span class="ident" id="4175533">fd</span><span class="op" id="4175535">.</span><span class="ident" id="4175536">sysfd</span><span class="op" id="4175541">,</span>&nbsp;<span class="ident" id="4175543">syscall</span><span class="op" id="4175550">.</span><span class="ident" id="4175551">IPPROTO_IPV6</span><span class="op" id="4175563">,</span>&nbsp;<span class="ident" id="4175565">syscall</span><span class="op" id="4175572">.</span><span class="ident" id="4175573">IPV6_MULTICAST_IF</span><span class="op" id="4175590">,</span>&nbsp;<span class="ident" id="4175592">v</span><span class="op" id="4175593">)</span><span class="op" id="4175594">)</span><br>
<span class="lineno"></span><span class="op" id="4175596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4175599">func</span>&nbsp;<span class="ident" id="4175604">setIPv6MulticastLoopback</span><span class="op" id="4175628">(</span><span class="ident" id="4175629">fd</span>&nbsp;<span class="op" id="4175632">*</span><span class="ident" id="4175633">netFD</span><span class="op" id="4175638">,</span>&nbsp;<span class="ident" id="4175640">v</span>&nbsp;<span class="builtintype" id="4175642">bool</span><span class="op" id="4175646">)</span>&nbsp;<span class="builtintype" id="4175648">error</span>&nbsp;<span class="op" id="4175654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175657">if</span>&nbsp;<span class="ident" id="4175660">err</span>&nbsp;<span class="op" id="4175664">:=</span>&nbsp;<span class="ident" id="4175667">fd</span><span class="op" id="4175669">.</span><span class="ident" id="4175670">incref</span><span class="op" id="4175676">(</span><span class="op" id="4175677">)</span><span class="op" id="4175678">;</span>&nbsp;<span class="ident" id="4175680">err</span>&nbsp;<span class="op" id="4175684">!=</span>&nbsp;<span class="ident" id="4175687">nil</span>&nbsp;<span class="op" id="4175691">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175695">return</span>&nbsp;<span class="ident" id="4175702">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4175707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175710">defer</span>&nbsp;<span class="ident" id="4175716">fd</span><span class="op" id="4175718">.</span><span class="ident" id="4175719">decref</span><span class="op" id="4175725">(</span><span class="op" id="4175726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175729">return</span>&nbsp;<span class="ident" id="4175736">os</span><span class="op" id="4175738">.</span><span class="ident" id="4175739">NewSyscallError</span><span class="op" id="4175754">(</span><span class="string" id="4175755">&#34;setsockopt&#34;</span><span class="op" id="4175767">,</span>&nbsp;<span class="ident" id="4175769">syscall</span><span class="op" id="4175776">.</span><span class="ident" id="4175777">SetsockoptInt</span><span class="op" id="4175790">(</span><span class="ident" id="4175791">fd</span><span class="op" id="4175793">.</span><span class="ident" id="4175794">sysfd</span><span class="op" id="4175799">,</span>&nbsp;<span class="ident" id="4175801">syscall</span><span class="op" id="4175808">.</span><span class="ident" id="4175809">IPPROTO_IPV6</span><span class="op" id="4175821">,</span>&nbsp;<span class="ident" id="4175823">syscall</span><span class="op" id="4175830">.</span><span class="ident" id="4175831">IPV6_MULTICAST_LOOP</span><span class="op" id="4175850">,</span>&nbsp;<span class="ident" id="4175852">boolint</span><span class="op" id="4175859">(</span><span class="ident" id="4175860">v</span><span class="op" id="4175861">)</span><span class="op" id="4175862">)</span><span class="op" id="4175863">)</span><br>
<span class="lineno"></span><span class="op" id="4175865">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="4175868">func</span>&nbsp;<span class="ident" id="4175873">joinIPv6Group</span><span class="op" id="4175886">(</span><span class="ident" id="4175887">fd</span>&nbsp;<span class="op" id="4175890">*</span><span class="ident" id="4175891">netFD</span><span class="op" id="4175896">,</span>&nbsp;<span class="ident" id="4175898">ifi</span>&nbsp;<span class="op" id="4175902">*</span><span class="ident" id="4175903">Interface</span><span class="op" id="4175912">,</span>&nbsp;<span class="ident" id="4175914">ip</span>&nbsp;<span class="ident" id="4175917">IP</span><span class="op" id="4175919">)</span>&nbsp;<span class="builtintype" id="4175921">error</span>&nbsp;<span class="op" id="4175927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4175930">mreq</span>&nbsp;<span class="op" id="4175935">:=</span>&nbsp;<span class="op" id="4175938">&amp;</span><span class="ident" id="4175939">syscall</span><span class="op" id="4175946">.</span><span class="ident" id="4175947">IPv6Mreq</span><span class="op" id="4175955">{</span><span class="op" id="4175956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4175959">copy</span><span class="op" id="4175963">(</span><span class="ident" id="4175964">mreq</span><span class="op" id="4175968">.</span><span class="ident" id="4175969">Multiaddr</span><span class="op" id="4175978">[</span><span class="op" id="4175979">:</span><span class="op" id="4175980">]</span><span class="op" id="4175981">,</span>&nbsp;<span class="ident" id="4175983">ip</span><span class="op" id="4175985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4175988">if</span>&nbsp;<span class="ident" id="4175991">ifi</span>&nbsp;<span class="op" id="4175995">!=</span>&nbsp;<span class="ident" id="4175998">nil</span>&nbsp;<span class="op" id="4176002">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4176006">mreq</span><span class="op" id="4176010">.</span><span class="ident" id="4176011">Interface</span>&nbsp;<span class="op" id="4176021">=</span>&nbsp;<span class="builtintype" id="4176023">uint32</span><span class="op" id="4176029">(</span><span class="ident" id="4176030">ifi</span><span class="op" id="4176033">.</span><span class="ident" id="4176034">Index</span><span class="op" id="4176039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4176042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4176045">if</span>&nbsp;<span class="ident" id="4176048">err</span>&nbsp;<span class="op" id="4176052">:=</span>&nbsp;<span class="ident" id="4176055">fd</span><span class="op" id="4176057">.</span><span class="ident" id="4176058">incref</span><span class="op" id="4176064">(</span><span class="op" id="4176065">)</span><span class="op" id="4176066">;</span>&nbsp;<span class="ident" id="4176068">err</span>&nbsp;<span class="op" id="4176072">!=</span>&nbsp;<span class="ident" id="4176075">nil</span>&nbsp;<span class="op" id="4176079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4176083">return</span>&nbsp;<span class="ident" id="4176090">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4176095">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4176098">defer</span>&nbsp;<span class="ident" id="4176104">fd</span><span class="op" id="4176106">.</span><span class="ident" id="4176107">decref</span><span class="op" id="4176113">(</span><span class="op" id="4176114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4176117">return</span>&nbsp;<span class="ident" id="4176124">os</span><span class="op" id="4176126">.</span><span class="ident" id="4176127">NewSyscallError</span><span class="op" id="4176142">(</span><span class="string" id="4176143">&#34;setsockopt&#34;</span><span class="op" id="4176155">,</span>&nbsp;<span class="ident" id="4176157">syscall</span><span class="op" id="4176164">.</span><span class="ident" id="4176165">SetsockoptIPv6Mreq</span><span class="op" id="4176183">(</span><span class="ident" id="4176184">fd</span><span class="op" id="4176186">.</span><span class="ident" id="4176187">sysfd</span><span class="op" id="4176192">,</span>&nbsp;<span class="ident" id="4176194">syscall</span><span class="op" id="4176201">.</span><span class="ident" id="4176202">IPPROTO_IPV6</span><span class="op" id="4176214">,</span>&nbsp;<span class="ident" id="4176216">syscall</span><span class="op" id="4176223">.</span><span class="ident" id="4176224">IPV6_JOIN_GROUP</span><span class="op" id="4176239">,</span>&nbsp;<span class="ident" id="4176241">mreq</span><span class="op" id="4176245">)</span><span class="op" id="4176246">)</span><br>
<span class="lineno"></span><span class="op" id="4176248">}</span>
</div>
</body>
</html>
