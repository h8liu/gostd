<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5992224">package</span>&nbsp;<span class="ident" id="5992232">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5992239">//&nbsp;VirtMemory&nbsp;defines&nbsp;an&nbsp;address&nbsp;space&nbsp;which&nbsp;page&nbsp;mapping</span><br>
<span class="lineno"></span><span class="comment" id="5992297">//&nbsp;is&nbsp;defined&nbsp;by&nbsp;a&nbsp;page&nbsp;table.</span><br>
<span class="lineno">5</span><span class="comment" id="5992328">//&nbsp;If&nbsp;no&nbsp;page&nbsp;table&nbsp;is&nbsp;defined,&nbsp;direct&nbsp;mapping&nbsp;is&nbsp;used</span><br>
<span class="lineno"></span><span class="keyword" id="5992383">type</span>&nbsp;<span class="ident" id="5992388">virtMemory</span>&nbsp;<span class="keyword" id="5992399">struct</span>&nbsp;<span class="op" id="5992406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5992409">phyMem</span>&nbsp;<span class="op" id="5992416">*</span><span class="ident" id="5992417"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5984438">phyMemory</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5992428">ptable</span>&nbsp;<span class="op" id="5992435">*</span><span class="ident" id="5992436"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5981356">pageTable</a></span><br>
<span class="lineno"></span><span class="op" id="5992446">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="5992449">//&nbsp;NewVirtMemory&nbsp;creates&nbsp;a&nbsp;new&nbsp;virtual&nbsp;address&nbsp;space&nbsp;with&nbsp;no&nbsp;page&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5992522">func</span>&nbsp;<span class="ident" id="5992527">newVirtMemory</span><span class="op" id="5992540">(</span><span class="ident" id="5992541">phy</span>&nbsp;<span class="op" id="5992545">*</span><span class="ident" id="5992546"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5984438">phyMemory</a></span><span class="op" id="5992555">)</span>&nbsp;<span class="op" id="5992557">*</span><span class="ident" id="5992558"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992388">virtMemory</a></span>&nbsp;<span class="op" id="5992569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5992572">ret</span>&nbsp;<span class="op" id="5992576">:=</span>&nbsp;<span class="builtinfunc" id="5992579">new</span><span class="op" id="5992582">(</span><span class="ident" id="5992583"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992388">virtMemory</a></span><span class="op" id="5992593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5992596"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992572">ret</a></span><span class="op" id="5992599">.</span><span class="ident" id="5992600">phyMem</span>&nbsp;<span class="op" id="5992607">=</span>&nbsp;<span class="ident" id="5992609"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992541">phy</a></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5992614">return</span>&nbsp;<span class="ident" id="5992621"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992572">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5992625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5992628">//&nbsp;SetTable&nbsp;applies&nbsp;a&nbsp;particular&nbsp;pagetable&nbsp;at&nbsp;a&nbsp;physical&nbsp;memory&nbsp;position.</span><br>
<span class="lineno"></span><span class="comment" id="5992702">//&nbsp;If&nbsp;the&nbsp;address&nbsp;is&nbsp;not&nbsp;page&nbsp;size&nbsp;aligned,&nbsp;it&nbsp;will&nbsp;be&nbsp;aligned&nbsp;down.</span><br>
<span class="lineno">20</span><span class="comment" id="5992771">//&nbsp;If&nbsp;the&nbsp;address&nbsp;is&nbsp;0,&nbsp;it&nbsp;will&nbsp;use&nbsp;direct&nbsp;mapping.</span><br>
<span class="lineno"></span><span class="keyword" id="5992823">func</span>&nbsp;<span class="op" id="5992828">(</span><span class="ident" id="5992829">vm</span>&nbsp;<span class="op" id="5992832">*</span><span class="ident" id="5992833"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992388">virtMemory</a></span><span class="op" id="5992843">)</span>&nbsp;<span class="ident" id="5992845">SetTable</span><span class="op" id="5992853">(</span><span class="ident" id="5992854">root</span>&nbsp;<span class="builtintype" id="5992859">uint32</span><span class="op" id="5992865">)</span>&nbsp;<span class="op" id="5992867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5992870">if</span>&nbsp;<span class="ident" id="5992873"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992854">root</a></span>&nbsp;<span class="op" id="5992878">==</span>&nbsp;<span class="num" id="5992881">0</span>&nbsp;<span class="op" id="5992883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5992887"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992829">vm</a></span><span class="op" id="5992889">.</span><span class="ident" id="5992890">ptable</span>&nbsp;<span class="op" id="5992897">=</span>&nbsp;<span class="ident" id="5992899">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5992904">}</span>&nbsp;<span class="keyword" id="5992906">else</span>&nbsp;<span class="op" id="5992911">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5992915"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992829">vm</a></span><span class="op" id="5992917">.</span><span class="ident" id="5992918">ptable</span>&nbsp;<span class="op" id="5992925">=</span>&nbsp;<span class="ident" id="5992927"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5981691">newPageTable</a></span><span class="op" id="5992939">(</span><span class="ident" id="5992940"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992829">vm</a></span><span class="op" id="5992942">.</span><span class="ident" id="5992943">phyMem</span><span class="op" id="5992949">,</span>&nbsp;<span class="ident" id="5992951"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992854">root</a></span><span class="op" id="5992955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5992958">}</span><br>
<span class="lineno"></span><span class="op" id="5992960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5992963">func</span>&nbsp;<span class="op" id="5992968">(</span><span class="ident" id="5992969">vm</span>&nbsp;<span class="op" id="5992972">*</span><span class="ident" id="5992973"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992388">virtMemory</a></span><span class="op" id="5992983">)</span>&nbsp;<span class="ident" id="5992985">transRead</span><span class="op" id="5992994">(</span><span class="ident" id="5992995">addr</span>&nbsp;<span class="builtintype" id="5993000">uint32</span><span class="op" id="5993006">,</span>&nbsp;<span class="ident" id="5993008">ring</span>&nbsp;<span class="builtintype" id="5993013">byte</span><span class="op" id="5993017">)</span>&nbsp;<span class="op" id="5993019">(</span><span class="builtintype" id="5993020">uint32</span><span class="op" id="5993026">,</span>&nbsp;<span class="op" id="5993028">*</span><span class="ident" id="5993029"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5965541">Excep</a></span><span class="op" id="5993034">)</span>&nbsp;<span class="op" id="5993036">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993039">if</span>&nbsp;<span class="ident" id="5993042"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992969">vm</a></span><span class="op" id="5993044">.</span><span class="ident" id="5993045">ptable</span>&nbsp;<span class="op" id="5993052">==</span>&nbsp;<span class="ident" id="5993055">nil</span>&nbsp;<span class="op" id="5993059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993063">return</span>&nbsp;<span class="ident" id="5993070"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992995">addr</a></span><span class="op" id="5993074">,</span>&nbsp;<span class="ident" id="5993076">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993084">return</span>&nbsp;<span class="ident" id="5993091"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992969">vm</a></span><span class="op" id="5993093">.</span><span class="ident" id="5993094">ptable</span><span class="op" id="5993100">.</span><span class="ident" id="5993101">TranslateRead</span><span class="op" id="5993114">(</span><span class="ident" id="5993115"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992995">addr</a></span><span class="op" id="5993119">,</span>&nbsp;<span class="ident" id="5993121"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993008">ring</a></span><span class="op" id="5993125">)</span><br>
<span class="lineno"></span><span class="op" id="5993127">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="5993130">func</span>&nbsp;<span class="op" id="5993135">(</span><span class="ident" id="5993136">vm</span>&nbsp;<span class="op" id="5993139">*</span><span class="ident" id="5993140"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992388">virtMemory</a></span><span class="op" id="5993150">)</span>&nbsp;<span class="ident" id="5993152">transWrite</span><span class="op" id="5993162">(</span><span class="ident" id="5993163">addr</span>&nbsp;<span class="builtintype" id="5993168">uint32</span><span class="op" id="5993174">,</span>&nbsp;<span class="ident" id="5993176">ring</span>&nbsp;<span class="builtintype" id="5993181">byte</span><span class="op" id="5993185">)</span>&nbsp;<span class="op" id="5993187">(</span><span class="builtintype" id="5993188">uint32</span><span class="op" id="5993194">,</span>&nbsp;<span class="op" id="5993196">*</span><span class="ident" id="5993197"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5965541">Excep</a></span><span class="op" id="5993202">)</span>&nbsp;<span class="op" id="5993204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993207">if</span>&nbsp;<span class="ident" id="5993210"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993136">vm</a></span><span class="op" id="5993212">.</span><span class="ident" id="5993213">ptable</span>&nbsp;<span class="op" id="5993220">==</span>&nbsp;<span class="ident" id="5993223">nil</span>&nbsp;<span class="op" id="5993227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993231">return</span>&nbsp;<span class="ident" id="5993238"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993163">addr</a></span><span class="op" id="5993242">,</span>&nbsp;<span class="ident" id="5993244">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993249">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993252">return</span>&nbsp;<span class="ident" id="5993259"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993136">vm</a></span><span class="op" id="5993261">.</span><span class="ident" id="5993262">ptable</span><span class="op" id="5993268">.</span><span class="ident" id="5993269">TranslateWrite</span><span class="op" id="5993283">(</span><span class="ident" id="5993284"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993163">addr</a></span><span class="op" id="5993288">,</span>&nbsp;<span class="ident" id="5993290"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993176">ring</a></span><span class="op" id="5993294">)</span><br>
<span class="lineno"></span><span class="op" id="5993296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5993299">//&nbsp;ReadWord&nbsp;reads&nbsp;the&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;virtual&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="5993356">func</span>&nbsp;<span class="op" id="5993361">(</span><span class="ident" id="5993362">vm</span>&nbsp;<span class="op" id="5993365">*</span><span class="ident" id="5993366"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992388">virtMemory</a></span><span class="op" id="5993376">)</span>&nbsp;<span class="ident" id="5993378">ReadWord</span><span class="op" id="5993386">(</span><span class="ident" id="5993387">addr</span>&nbsp;<span class="builtintype" id="5993392">uint32</span><span class="op" id="5993398">,</span>&nbsp;<span class="ident" id="5993400">ring</span>&nbsp;<span class="builtintype" id="5993405">byte</span><span class="op" id="5993409">)</span>&nbsp;<span class="op" id="5993411">(</span><span class="builtintype" id="5993412">uint32</span><span class="op" id="5993418">,</span>&nbsp;<span class="op" id="5993420">*</span><span class="ident" id="5993421"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5965541">Excep</a></span><span class="op" id="5993426">)</span>&nbsp;<span class="op" id="5993428">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993431"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993387">addr</a></span><span class="op" id="5993435">,</span>&nbsp;<span class="ident" id="5993437">e</span>&nbsp;<span class="op" id="5993439">:=</span>&nbsp;<span class="ident" id="5993442"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993362">vm</a></span><span class="op" id="5993444">.</span><span class="ident" id="5993445">transRead</span><span class="op" id="5993454">(</span><span class="ident" id="5993455"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993387">addr</a></span><span class="op" id="5993459">,</span>&nbsp;<span class="ident" id="5993461"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993400">ring</a></span><span class="op" id="5993465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993468">if</span>&nbsp;<span class="ident" id="5993471"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993437">e</a></span>&nbsp;<span class="op" id="5993473">!=</span>&nbsp;<span class="ident" id="5993476">nil</span>&nbsp;<span class="op" id="5993480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993484">return</span>&nbsp;<span class="num" id="5993491">0</span><span class="op" id="5993492">,</span>&nbsp;<span class="ident" id="5993494"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993437">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993500">return</span>&nbsp;<span class="ident" id="5993507"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993362">vm</a></span><span class="op" id="5993509">.</span><span class="ident" id="5993510">phyMem</span><span class="op" id="5993516">.</span><span class="ident" id="5993517">ReadWord</span><span class="op" id="5993525">(</span><span class="ident" id="5993526"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993387">addr</a></span><span class="op" id="5993530">)</span><br>
<span class="lineno">50</span><span class="op" id="5993532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5993535">//&nbsp;WriteWord&nbsp;writes&nbsp;the&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;virtual&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="5993594">func</span>&nbsp;<span class="op" id="5993599">(</span><span class="ident" id="5993600">vm</span>&nbsp;<span class="op" id="5993603">*</span><span class="ident" id="5993604"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992388">virtMemory</a></span><span class="op" id="5993614">)</span>&nbsp;<span class="ident" id="5993616">WriteWord</span><span class="op" id="5993625">(</span><span class="ident" id="5993626">addr</span>&nbsp;<span class="builtintype" id="5993631">uint32</span><span class="op" id="5993637">,</span>&nbsp;<span class="ident" id="5993639">ring</span>&nbsp;<span class="builtintype" id="5993644">byte</span><span class="op" id="5993648">,</span>&nbsp;<span class="ident" id="5993650">v</span>&nbsp;<span class="builtintype" id="5993652">uint32</span><span class="op" id="5993658">)</span>&nbsp;<span class="op" id="5993660">*</span><span class="ident" id="5993661"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5965541">Excep</a></span>&nbsp;<span class="op" id="5993667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993670"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993626">addr</a></span><span class="op" id="5993674">,</span>&nbsp;<span class="ident" id="5993676">e</span>&nbsp;<span class="op" id="5993678">:=</span>&nbsp;<span class="ident" id="5993681"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993600">vm</a></span><span class="op" id="5993683">.</span><span class="ident" id="5993684">transWrite</span><span class="op" id="5993694">(</span><span class="ident" id="5993695"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993626">addr</a></span><span class="op" id="5993699">,</span>&nbsp;<span class="ident" id="5993701"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993639">ring</a></span><span class="op" id="5993705">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993708">if</span>&nbsp;<span class="ident" id="5993711"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993676">e</a></span>&nbsp;<span class="op" id="5993713">!=</span>&nbsp;<span class="ident" id="5993716">nil</span>&nbsp;<span class="op" id="5993720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993724">return</span>&nbsp;<span class="ident" id="5993731"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993676">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993737">return</span>&nbsp;<span class="ident" id="5993744"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993600">vm</a></span><span class="op" id="5993746">.</span><span class="ident" id="5993747">phyMem</span><span class="op" id="5993753">.</span><span class="ident" id="5993754">WriteWord</span><span class="op" id="5993763">(</span><span class="ident" id="5993764"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993626">addr</a></span><span class="op" id="5993768">,</span>&nbsp;<span class="ident" id="5993770"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993650">v</a></span><span class="op" id="5993771">)</span><br>
<span class="lineno"></span><span class="op" id="5993773">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="5993776">//&nbsp;ReadByte&nbsp;reads&nbsp;the&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;virtual&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="5993833">func</span>&nbsp;<span class="op" id="5993838">(</span><span class="ident" id="5993839">vm</span>&nbsp;<span class="op" id="5993842">*</span><span class="ident" id="5993843"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992388">virtMemory</a></span><span class="op" id="5993853">)</span>&nbsp;<span class="ident" id="5993855">ReadByte</span><span class="op" id="5993863">(</span><span class="ident" id="5993864">addr</span>&nbsp;<span class="builtintype" id="5993869">uint32</span><span class="op" id="5993875">,</span>&nbsp;<span class="ident" id="5993877">ring</span>&nbsp;<span class="builtintype" id="5993882">byte</span><span class="op" id="5993886">)</span>&nbsp;<span class="op" id="5993888">(</span><span class="builtintype" id="5993889">byte</span><span class="op" id="5993893">,</span>&nbsp;<span class="op" id="5993895">*</span><span class="ident" id="5993896"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5965541">Excep</a></span><span class="op" id="5993901">)</span>&nbsp;<span class="op" id="5993903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993906"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993864">addr</a></span><span class="op" id="5993910">,</span>&nbsp;<span class="ident" id="5993912">e</span>&nbsp;<span class="op" id="5993914">:=</span>&nbsp;<span class="ident" id="5993917"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993839">vm</a></span><span class="op" id="5993919">.</span><span class="ident" id="5993920">transRead</span><span class="op" id="5993929">(</span><span class="ident" id="5993930"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993864">addr</a></span><span class="op" id="5993934">,</span>&nbsp;<span class="ident" id="5993936"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993877">ring</a></span><span class="op" id="5993940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993943">if</span>&nbsp;<span class="ident" id="5993946"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993912">e</a></span>&nbsp;<span class="op" id="5993948">!=</span>&nbsp;<span class="ident" id="5993951">nil</span>&nbsp;<span class="op" id="5993955">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993959">return</span>&nbsp;<span class="num" id="5993966">0</span><span class="op" id="5993967">,</span>&nbsp;<span class="ident" id="5993969"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993912">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993975">return</span>&nbsp;<span class="ident" id="5993982"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993839">vm</a></span><span class="op" id="5993984">.</span><span class="ident" id="5993985">phyMem</span><span class="op" id="5993991">.</span><span class="ident" id="5993992">ReadByte</span><span class="op" id="5994000">(</span><span class="ident" id="5994001"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5993864">addr</a></span><span class="op" id="5994005">)</span><br>
<span class="lineno"></span><span class="op" id="5994007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="comment" id="5994010">//&nbsp;WriteByte&nbsp;writes&nbsp;a&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;virtual&nbsp;address&nbsp;under</span><br>
<span class="lineno"></span><span class="comment" id="5994072">//&nbsp;a&nbsp;certain&nbsp;ring.</span><br>
<span class="lineno"></span><span class="keyword" id="5994091">func</span>&nbsp;<span class="op" id="5994096">(</span><span class="ident" id="5994097">vm</span>&nbsp;<span class="op" id="5994100">*</span><span class="ident" id="5994101"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5992388">virtMemory</a></span><span class="op" id="5994111">)</span>&nbsp;<span class="ident" id="5994113">WriteByte</span><span class="op" id="5994122">(</span><span class="ident" id="5994123">addr</span>&nbsp;<span class="builtintype" id="5994128">uint32</span><span class="op" id="5994134">,</span>&nbsp;<span class="ident" id="5994136">ring</span>&nbsp;<span class="builtintype" id="5994141">byte</span><span class="op" id="5994145">,</span>&nbsp;<span class="ident" id="5994147">v</span>&nbsp;<span class="builtintype" id="5994149">byte</span><span class="op" id="5994153">)</span>&nbsp;<span class="op" id="5994155">*</span><span class="ident" id="5994156"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5965541">Excep</a></span>&nbsp;<span class="op" id="5994162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5994165"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5994123">addr</a></span><span class="op" id="5994169">,</span>&nbsp;<span class="ident" id="5994171">e</span>&nbsp;<span class="op" id="5994173">:=</span>&nbsp;<span class="ident" id="5994176"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5994097">vm</a></span><span class="op" id="5994178">.</span><span class="ident" id="5994179">transWrite</span><span class="op" id="5994189">(</span><span class="ident" id="5994190"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5994123">addr</a></span><span class="op" id="5994194">,</span>&nbsp;<span class="ident" id="5994196"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5994136">ring</a></span><span class="op" id="5994200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994203">if</span>&nbsp;<span class="ident" id="5994206"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5994171">e</a></span>&nbsp;<span class="op" id="5994208">!=</span>&nbsp;<span class="ident" id="5994211">nil</span>&nbsp;<span class="op" id="5994215">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994219">return</span>&nbsp;<span class="ident" id="5994226"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5994171">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5994229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994232">return</span>&nbsp;<span class="ident" id="5994239"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5994097">vm</a></span><span class="op" id="5994241">.</span><span class="ident" id="5994242">phyMem</span><span class="op" id="5994248">.</span><span class="ident" id="5994249">WriteByte</span><span class="op" id="5994258">(</span><span class="ident" id="5994259"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5994123">addr</a></span><span class="op" id="5994263">,</span>&nbsp;<span class="ident" id="5994265"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5994147">v</a></span><span class="op" id="5994266">)</span><br>
<span class="lineno"></span><span class="op" id="5994268">}</span>
</div>
</body>
</html>
