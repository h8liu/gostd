<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/rpc</h2>
<ul>
<li><a href="/gostd/net/rpc/client.go.html">client.go</a></li>
<li><a href="/gostd/net/rpc/client_test.go.html" class="current">client_test.go</a></li>
<li><a href="/gostd/net/rpc/debug.go.html">debug.go</a></li>
<li><a href="/gostd/net/rpc/server.go.html">server.go</a></li>
<li><a href="/gostd/net/rpc/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7230626">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7230681">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7230735">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7230786">package</span>&nbsp;<span class="ident" id="7230794">rpc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7230799">import</span>&nbsp;<span class="op" id="7230806">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7230809">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7230819">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7230826">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7230833">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7230844">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7230855">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7230865">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7230868">type</span>&nbsp;<span class="ident" id="7230873">shutdownCodec</span>&nbsp;<span class="keyword" id="7230887">struct</span>&nbsp;<span class="op" id="7230894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7230897">responded</span>&nbsp;<span class="keyword" id="7230907">chan</span>&nbsp;<span class="builtintype" id="7230912">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7230917">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7230927">bool</span><br>
<span class="lineno"></span><span class="op" id="7230932">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7230935">func</span>&nbsp;<span class="op" id="7230940">(</span><span class="ident" id="7230941">c</span>&nbsp;<span class="op" id="7230943">*</span><span class="ident" id="7230944"><a href="/gostd/net/rpc/client_test.go.html#7230873">shutdownCodec</a></span><span class="op" id="7230957">)</span>&nbsp;<span class="ident" id="7230959">WriteRequest</span><span class="op" id="7230971">(</span><span class="op" id="7230972">*</span><span class="ident" id="7230973"><a href="/gostd/net/rpc/server.go.html#5277366">Request</a></span><span class="op" id="7230980">,</span>&nbsp;<span class="keyword" id="7230982">interface</span><span class="op" id="7230991">{</span><span class="op" id="7230992">}</span><span class="op" id="7230993">)</span>&nbsp;<span class="builtintype" id="7230995">error</span>&nbsp;<span class="op" id="7231001">{</span>&nbsp;<span class="keyword" id="7231003">return</span>&nbsp;<span class="builtintype" id="7231010">nil</span>&nbsp;<span class="op" id="7231014">}</span><br>
<span class="lineno"></span><span class="keyword" id="7231016">func</span>&nbsp;<span class="op" id="7231021">(</span><span class="ident" id="7231022">c</span>&nbsp;<span class="op" id="7231024">*</span><span class="ident" id="7231025"><a href="/gostd/net/rpc/client_test.go.html#7230873">shutdownCodec</a></span><span class="op" id="7231038">)</span>&nbsp;<span class="ident" id="7231040">ReadResponseBody</span><span class="op" id="7231056">(</span><span class="keyword" id="7231057">interface</span><span class="op" id="7231066">{</span><span class="op" id="7231067">}</span><span class="op" id="7231068">)</span>&nbsp;<span class="builtintype" id="7231070">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7231082">{</span>&nbsp;<span class="keyword" id="7231084">return</span>&nbsp;<span class="builtintype" id="7231091">nil</span>&nbsp;<span class="op" id="7231095">}</span><br>
<span class="lineno"></span><span class="keyword" id="7231097">func</span>&nbsp;<span class="op" id="7231102">(</span><span class="ident" id="7231103">c</span>&nbsp;<span class="op" id="7231105">*</span><span class="ident" id="7231106"><a href="/gostd/net/rpc/client_test.go.html#7230873">shutdownCodec</a></span><span class="op" id="7231119">)</span>&nbsp;<span class="ident" id="7231121">ReadResponseHeader</span><span class="op" id="7231139">(</span><span class="op" id="7231140">*</span><span class="ident" id="7231141"><a href="/gostd/net/rpc/server.go.html#5277724">Response</a></span><span class="op" id="7231149">)</span>&nbsp;<span class="builtintype" id="7231151">error</span>&nbsp;<span class="op" id="7231157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7231160"><a href="/gostd/net/rpc/client_test.go.html#7231103">c</a></span><span class="op" id="7231161">.</span><span class="ident" id="7231162"><a href="/gostd/net/rpc/client_test.go.html#7230897">responded</a></span>&nbsp;<span class="op" id="7231172">&lt;-</span>&nbsp;<span class="num" id="7231175">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7231178">return</span>&nbsp;<span class="ident" id="7231185"><a href="/gostd/net/rpc/client_test.go.html#7230809">errors</a></span><span class="op" id="7231191">.</span><span class="ident" id="7231192"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="7231195">(</span><span class="string" id="7231196">&#34;shutdownCodec&nbsp;ReadResponseHeader&#34;</span><span class="op" id="7231230">)</span><br>
<span class="lineno"></span><span class="op" id="7231232">}</span><br>
<span class="lineno"></span><span class="keyword" id="7231234">func</span>&nbsp;<span class="op" id="7231239">(</span><span class="ident" id="7231240">c</span>&nbsp;<span class="op" id="7231242">*</span><span class="ident" id="7231243"><a href="/gostd/net/rpc/client_test.go.html#7230873">shutdownCodec</a></span><span class="op" id="7231256">)</span>&nbsp;<span class="ident" id="7231258">Close</span><span class="op" id="7231263">(</span><span class="op" id="7231264">)</span>&nbsp;<span class="builtintype" id="7231266">error</span>&nbsp;<span class="op" id="7231272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7231275"><a href="/gostd/net/rpc/client_test.go.html#7231240">c</a></span><span class="op" id="7231276">.</span><span class="ident" id="7231277"><a href="/gostd/net/rpc/client_test.go.html#7230917">closed</a></span>&nbsp;<span class="op" id="7231284">=</span>&nbsp;<span class="builtintype" id="7231286">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7231292">return</span>&nbsp;<span class="builtintype" id="7231299">nil</span><br>
<span class="lineno">30</span><span class="op" id="7231303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7231306">func</span>&nbsp;<span class="ident" id="7231311">TestCloseCodec</span><span class="op" id="7231325">(</span><span class="ident" id="7231326">t</span>&nbsp;<span class="op" id="7231328">*</span><span class="ident" id="7231329"><a href="/gostd/net/rpc/client_test.go.html#7230855">testing</a></span><span class="op" id="7231336">.</span><span class="ident" id="7231337"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7231338">)</span>&nbsp;<span class="op" id="7231340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7231343">codec</span>&nbsp;<span class="op" id="7231349">:=</span>&nbsp;<span class="op" id="7231352">&amp;</span><span class="ident" id="7231353"><a href="/gostd/net/rpc/client_test.go.html#7230873">shutdownCodec</a></span><span class="op" id="7231366">{</span><span class="ident" id="7231367"><a href="/gostd/net/rpc/client_test.go.html#7230897">responded</a></span><span class="op" id="7231376">:</span>&nbsp;<span class="builtinfunc" id="7231378">make</span><span class="op" id="7231382">(</span><span class="keyword" id="7231383">chan</span>&nbsp;<span class="builtintype" id="7231388">int</span><span class="op" id="7231391">)</span><span class="op" id="7231392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7231395">client</span>&nbsp;<span class="op" id="7231402">:=</span>&nbsp;<span class="ident" id="7231405"><a href="/gostd/net/rpc/client.go.html#5266672">NewClientWithCodec</a></span><span class="op" id="7231423">(</span><span class="ident" id="7231424"><a href="/gostd/net/rpc/client_test.go.html#7231343">codec</a></span><span class="op" id="7231429">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7231432">&lt;-</span><span class="ident" id="7231434"><a href="/gostd/net/rpc/client_test.go.html#7231343">codec</a></span><span class="op" id="7231439">.</span><span class="ident" id="7231440"><a href="/gostd/net/rpc/client_test.go.html#7230897">responded</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7231451"><a href="/gostd/net/rpc/client_test.go.html#7231395">client</a></span><span class="op" id="7231457">.</span><span class="ident" id="7231458"><a href="/gostd/net/rpc/client.go.html#5268682">Close</a></span><span class="op" id="7231463">(</span><span class="op" id="7231464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7231467">if</span>&nbsp;<span class="op" id="7231470">!</span><span class="ident" id="7231471"><a href="/gostd/net/rpc/client_test.go.html#7231343">codec</a></span><span class="op" id="7231476">.</span><span class="ident" id="7231477"><a href="/gostd/net/rpc/client_test.go.html#7230917">closed</a></span>&nbsp;<span class="op" id="7231484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7231488"><a href="/gostd/net/rpc/client_test.go.html#7231326">t</a></span><span class="op" id="7231489">.</span><span class="ident" id="7231490"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7231495">(</span><span class="string" id="7231496">&#34;client.Close&nbsp;did&nbsp;not&nbsp;close&nbsp;codec&#34;</span><span class="op" id="7231530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7231533">}</span><br>
<span class="lineno">40</span><span class="op" id="7231535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7231538">//&nbsp;Test&nbsp;that&nbsp;errors&nbsp;in&nbsp;gob&nbsp;shut&nbsp;down&nbsp;the&nbsp;connection.&nbsp;Issue&nbsp;7689.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7231604">type</span>&nbsp;<span class="ident" id="7231609">R</span>&nbsp;<span class="keyword" id="7231611">struct</span>&nbsp;<span class="op" id="7231618">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7231621">msg</span>&nbsp;<span class="op" id="7231625">[</span><span class="op" id="7231626">]</span><span class="builtintype" id="7231627">byte</span>&nbsp;<span class="comment" id="7231632">//&nbsp;Not&nbsp;exported,&nbsp;so&nbsp;R&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;gob.</span><br>
<span class="lineno"></span><span class="op" id="7231678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7231681">type</span>&nbsp;<span class="ident" id="7231686">S</span>&nbsp;<span class="keyword" id="7231688">struct</span><span class="op" id="7231694">{</span><span class="op" id="7231695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="7231698">func</span>&nbsp;<span class="op" id="7231703">(</span><span class="ident" id="7231704">s</span>&nbsp;<span class="op" id="7231706">*</span><span class="ident" id="7231707"><a href="/gostd/net/rpc/client_test.go.html#7231686">S</a></span><span class="op" id="7231708">)</span>&nbsp;<span class="ident" id="7231710">Recv</span><span class="op" id="7231714">(</span><span class="ident" id="7231715">nul</span>&nbsp;<span class="op" id="7231719">*</span><span class="keyword" id="7231720">struct</span><span class="op" id="7231726">{</span><span class="op" id="7231727">}</span><span class="op" id="7231728">,</span>&nbsp;<span class="ident" id="7231730">reply</span>&nbsp;<span class="op" id="7231736">*</span><span class="ident" id="7231737"><a href="/gostd/net/rpc/client_test.go.html#7231609">R</a></span><span class="op" id="7231738">)</span>&nbsp;<span class="builtintype" id="7231740">error</span>&nbsp;<span class="op" id="7231746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7231749">*</span><span class="ident" id="7231750"><a href="/gostd/net/rpc/client_test.go.html#7231730">reply</a></span>&nbsp;<span class="op" id="7231756">=</span>&nbsp;<span class="ident" id="7231758"><a href="/gostd/net/rpc/client_test.go.html#7231609">R</a></span><span class="op" id="7231759">{</span><span class="op" id="7231760">[</span><span class="op" id="7231761">]</span><span class="builtintype" id="7231762">byte</span><span class="op" id="7231766">(</span><span class="string" id="7231767">&#34;foo&#34;</span><span class="op" id="7231772">)</span><span class="op" id="7231773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7231776">return</span>&nbsp;<span class="builtintype" id="7231783">nil</span><br>
<span class="lineno"></span><span class="op" id="7231787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="7231790">func</span>&nbsp;<span class="ident" id="7231795">TestGobError</span><span class="op" id="7231807">(</span><span class="ident" id="7231808">t</span>&nbsp;<span class="op" id="7231810">*</span><span class="ident" id="7231811"><a href="/gostd/net/rpc/client_test.go.html#7230855">testing</a></span><span class="op" id="7231818">.</span><span class="ident" id="7231819"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7231820">)</span>&nbsp;<span class="op" id="7231822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7231825">if</span>&nbsp;<span class="ident" id="7231828"><a href="/gostd/net/rpc/client_test.go.html#7230833">runtime</a></span><span class="op" id="7231835">.</span><span class="ident" id="7231836"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="7231841">==</span>&nbsp;<span class="string" id="7231844">&#34;plan9&#34;</span>&nbsp;<span class="op" id="7231852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7231856"><a href="/gostd/net/rpc/client_test.go.html#7231808">t</a></span><span class="op" id="7231857">.</span><span class="ident" id="7231858"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="7231862">(</span><span class="string" id="7231863">&#34;skipping&nbsp;test;&nbsp;see&nbsp;http://golang.org/issue/8908&#34;</span><span class="op" id="7231912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7231915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7231918">defer</span>&nbsp;<span class="keyword" id="7231924">func</span><span class="op" id="7231928">(</span><span class="op" id="7231929">)</span>&nbsp;<span class="op" id="7231931">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7231935">err</span>&nbsp;<span class="op" id="7231939">:=</span>&nbsp;<span class="builtinfunc" id="7231942">recover</span><span class="op" id="7231949">(</span><span class="op" id="7231950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7231954">if</span>&nbsp;<span class="ident" id="7231957"><a href="/gostd/net/rpc/client_test.go.html#7231935">err</a></span>&nbsp;<span class="op" id="7231961">==</span>&nbsp;<span class="builtintype" id="7231964">nil</span>&nbsp;<span class="op" id="7231968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7231973"><a href="/gostd/net/rpc/client_test.go.html#7231808">t</a></span><span class="op" id="7231974">.</span><span class="ident" id="7231975"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7231980">(</span><span class="string" id="7231981">&#34;no&nbsp;error&#34;</span><span class="op" id="7231991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7231995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7231999">if</span>&nbsp;<span class="op" id="7232002">!</span><span class="ident" id="7232003"><a href="/gostd/net/rpc/client_test.go.html#7230844">strings</a></span><span class="op" id="7232010">.</span><span class="ident" id="7232011"><a href="/gostd/strings/strings.go.html#2968416">Contains</a></span><span class="op" id="7232019">(</span><span class="string" id="7232020">&#34;reading&nbsp;body&nbsp;EOF&#34;</span><span class="op" id="7232038">,</span>&nbsp;<span class="ident" id="7232040"><a href="/gostd/net/rpc/client_test.go.html#7231935">err</a></span><span class="op" id="7232043">.</span><span class="op" id="7232044">(</span><span class="builtintype" id="7232045">error</span><span class="op" id="7232050">)</span><span class="op" id="7232051">.</span><span class="ident" id="7232052">Error</span><span class="op" id="7232057">(</span><span class="op" id="7232058">)</span><span class="op" id="7232059">)</span>&nbsp;<span class="op" id="7232061">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7232066"><a href="/gostd/net/rpc/client_test.go.html#7231808">t</a></span><span class="op" id="7232067">.</span><span class="ident" id="7232068"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7232073">(</span><span class="string" id="7232074">&#34;expected&nbsp;`reading&nbsp;body&nbsp;EOF&#39;,&nbsp;got&#34;</span><span class="op" id="7232108">,</span>&nbsp;<span class="ident" id="7232110"><a href="/gostd/net/rpc/client_test.go.html#7231935">err</a></span><span class="op" id="7232113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7232117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7232120">}</span><span class="op" id="7232121">(</span><span class="op" id="7232122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7232125"><a href="/gostd/net/rpc/server.go.html#5290520">Register</a></span><span class="op" id="7232133">(</span><span class="builtinfunc" id="7232134">new</span><span class="op" id="7232137">(</span><span class="ident" id="7232138"><a href="/gostd/net/rpc/client_test.go.html#7231686">S</a></span><span class="op" id="7232139">)</span><span class="op" id="7232140">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7232144">listen</span><span class="op" id="7232150">,</span>&nbsp;<span class="ident" id="7232152">err</span>&nbsp;<span class="op" id="7232156">:=</span>&nbsp;<span class="ident" id="7232159"><a href="/gostd/net/rpc/client_test.go.html#7230826">net</a></span><span class="op" id="7232162">.</span><span class="ident" id="7232163"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="7232169">(</span><span class="string" id="7232170">&#34;tcp&#34;</span><span class="op" id="7232175">,</span>&nbsp;<span class="string" id="7232177">&#34;127.0.0.1:0&#34;</span><span class="op" id="7232190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7232193">if</span>&nbsp;<span class="ident" id="7232196"><a href="/gostd/net/rpc/client_test.go.html#7232152">err</a></span>&nbsp;<span class="op" id="7232200">!=</span>&nbsp;<span class="builtintype" id="7232203">nil</span>&nbsp;<span class="op" id="7232207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7232211">panic</span><span class="op" id="7232216">(</span><span class="ident" id="7232217"><a href="/gostd/net/rpc/client_test.go.html#7232152">err</a></span><span class="op" id="7232220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7232223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7232226">go</span>&nbsp;<span class="ident" id="7232229"><a href="/gostd/net/rpc/server.go.html#5292491">Accept</a></span><span class="op" id="7232235">(</span><span class="ident" id="7232236"><a href="/gostd/net/rpc/client_test.go.html#7232144">listen</a></span><span class="op" id="7232242">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7232246">client</span><span class="op" id="7232252">,</span>&nbsp;<span class="ident" id="7232254"><a href="/gostd/net/rpc/client_test.go.html#7232152">err</a></span>&nbsp;<span class="op" id="7232258">:=</span>&nbsp;<span class="ident" id="7232261"><a href="/gostd/net/rpc/client.go.html#5268500">Dial</a></span><span class="op" id="7232265">(</span><span class="string" id="7232266">&#34;tcp&#34;</span><span class="op" id="7232271">,</span>&nbsp;<span class="ident" id="7232273"><a href="/gostd/net/rpc/client_test.go.html#7232144">listen</a></span><span class="op" id="7232279">.</span><span class="ident" id="7232280"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="7232284">(</span><span class="op" id="7232285">)</span><span class="op" id="7232286">.</span><span class="ident" id="7232287"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="7232293">(</span><span class="op" id="7232294">)</span><span class="op" id="7232295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7232298">if</span>&nbsp;<span class="ident" id="7232301"><a href="/gostd/net/rpc/client_test.go.html#7232152">err</a></span>&nbsp;<span class="op" id="7232305">!=</span>&nbsp;<span class="builtintype" id="7232308">nil</span>&nbsp;<span class="op" id="7232312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7232316">panic</span><span class="op" id="7232321">(</span><span class="ident" id="7232322"><a href="/gostd/net/rpc/client_test.go.html#7232152">err</a></span><span class="op" id="7232325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7232328">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7232332">var</span>&nbsp;<span class="ident" id="7232336">reply</span>&nbsp;<span class="ident" id="7232342"><a href="/gostd/net/rpc/server_test.go.html#7233022">Reply</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7232349"><a href="/gostd/net/rpc/client_test.go.html#7232152">err</a></span>&nbsp;<span class="op" id="7232353">=</span>&nbsp;<span class="ident" id="7232355"><a href="/gostd/net/rpc/client_test.go.html#7232246">client</a></span><span class="op" id="7232361">.</span><span class="ident" id="7232362"><a href="/gostd/net/rpc/client.go.html#5269931">Call</a></span><span class="op" id="7232366">(</span><span class="string" id="7232367">&#34;S.Recv&#34;</span><span class="op" id="7232375">,</span>&nbsp;<span class="op" id="7232377">&amp;</span><span class="keyword" id="7232378">struct</span><span class="op" id="7232384">{</span><span class="op" id="7232385">}</span><span class="op" id="7232386">{</span><span class="op" id="7232387">}</span><span class="op" id="7232388">,</span>&nbsp;<span class="op" id="7232390">&amp;</span><span class="ident" id="7232391"><a href="/gostd/net/rpc/client_test.go.html#7232336">reply</a></span><span class="op" id="7232396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7232399">if</span>&nbsp;<span class="ident" id="7232402"><a href="/gostd/net/rpc/client_test.go.html#7232152">err</a></span>&nbsp;<span class="op" id="7232406">!=</span>&nbsp;<span class="builtintype" id="7232409">nil</span>&nbsp;<span class="op" id="7232413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7232417">panic</span><span class="op" id="7232422">(</span><span class="ident" id="7232423"><a href="/gostd/net/rpc/client_test.go.html#7232152">err</a></span><span class="op" id="7232426">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7232429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7232433"><a href="/gostd/net/rpc/client_test.go.html#7230819">fmt</a></span><span class="op" id="7232436">.</span><span class="ident" id="7232437"><a href="/gostd/fmt/print.go.html#2143442">Printf</a></span><span class="op" id="7232443">(</span><span class="string" id="7232444">&#34;%#v\n&#34;</span><span class="op" id="7232451">,</span>&nbsp;<span class="ident" id="7232453"><a href="/gostd/net/rpc/client_test.go.html#7232336">reply</a></span><span class="op" id="7232458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7232461"><a href="/gostd/net/rpc/client_test.go.html#7232246">client</a></span><span class="op" id="7232467">.</span><span class="ident" id="7232468"><a href="/gostd/net/rpc/client.go.html#5268682">Close</a></span><span class="op" id="7232473">(</span><span class="op" id="7232474">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7232478"><a href="/gostd/net/rpc/client_test.go.html#7232144">listen</a></span><span class="op" id="7232484">.</span><span class="ident" id="7232485"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="7232490">(</span><span class="op" id="7232491">)</span><br>
<span class="lineno"></span><span class="op" id="7232493">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
