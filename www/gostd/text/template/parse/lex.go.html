<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template/parse</h2>
<ul>
<li><a href="/gostd/text/template/parse/lex.go.html">lex.go</a></li>
<li><a href="/gostd/text/template/parse/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/text/template/parse/node.go.html">node.go</a></li>
<li><a href="/gostd/text/template/parse/parse.go.html">parse.go</a></li>
<li><a href="/gostd/text/template/parse/parse_test.go.html">parse_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2943394">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2943449">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2943503">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2943554">package</span>&nbsp;<span class="ident" id="2943562">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2943569">import</span>&nbsp;<span class="op" id="2943576">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2943579">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2943586">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2943597">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2943608">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2943623">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943626">//&nbsp;item&nbsp;represents&nbsp;a&nbsp;token&nbsp;or&nbsp;text&nbsp;string&nbsp;returned&nbsp;from&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">15</span><span class="keyword" id="2943695">type</span>&nbsp;<span class="ident" id="2943700">item</span>&nbsp;<span class="keyword" id="2943705">struct</span>&nbsp;<span class="op" id="2943712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943715">typ</span>&nbsp;<span class="ident" id="2943719">itemType</span>&nbsp;<span class="comment" id="2943728">//&nbsp;The&nbsp;type&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943755">pos</span>&nbsp;<span class="ident" id="2943759">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2943768">//&nbsp;The&nbsp;starting&nbsp;position,&nbsp;in&nbsp;bytes,&nbsp;of&nbsp;this&nbsp;item&nbsp;in&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943839">val</span>&nbsp;<span class="builtintype" id="2943843">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2943852">//&nbsp;The&nbsp;value&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span><span class="op" id="2943879">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="2943882">func</span>&nbsp;<span class="op" id="2943887">(</span><span class="ident" id="2943888">i</span>&nbsp;<span class="ident" id="2943890">item</span><span class="op" id="2943894">)</span>&nbsp;<span class="ident" id="2943896">String</span><span class="op" id="2943902">(</span><span class="op" id="2943903">)</span>&nbsp;<span class="builtintype" id="2943905">string</span>&nbsp;<span class="op" id="2943912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943915">switch</span>&nbsp;<span class="op" id="2943922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943925">case</span>&nbsp;<span class="ident" id="2943930">i</span><span class="op" id="2943931">.</span><span class="ident" id="2943932">typ</span>&nbsp;<span class="op" id="2943936">==</span>&nbsp;<span class="ident" id="2943939">itemEOF</span><span class="op" id="2943946">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943950">return</span>&nbsp;<span class="string" id="2943957">&#34;EOF&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943964">case</span>&nbsp;<span class="ident" id="2943969">i</span><span class="op" id="2943970">.</span><span class="ident" id="2943971">typ</span>&nbsp;<span class="op" id="2943975">==</span>&nbsp;<span class="ident" id="2943978">itemError</span><span class="op" id="2943987">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943991">return</span>&nbsp;<span class="ident" id="2943998">i</span><span class="op" id="2943999">.</span><span class="ident" id="2944000">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944005">case</span>&nbsp;<span class="ident" id="2944010">i</span><span class="op" id="2944011">.</span><span class="ident" id="2944012">typ</span>&nbsp;<span class="op" id="2944016">&gt;</span>&nbsp;<span class="ident" id="2944018">itemKeyword</span><span class="op" id="2944029">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944033">return</span>&nbsp;<span class="ident" id="2944040">fmt</span><span class="op" id="2944043">.</span><span class="ident" id="2944044">Sprintf</span><span class="op" id="2944051">(</span><span class="string" id="2944052">&#34;&lt;%s&gt;&#34;</span><span class="op" id="2944058">,</span>&nbsp;<span class="ident" id="2944060">i</span><span class="op" id="2944061">.</span><span class="ident" id="2944062">val</span><span class="op" id="2944065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944068">case</span>&nbsp;<span class="builtinfunc" id="2944073">len</span><span class="op" id="2944076">(</span><span class="ident" id="2944077">i</span><span class="op" id="2944078">.</span><span class="ident" id="2944079">val</span><span class="op" id="2944082">)</span>&nbsp;<span class="op" id="2944084">&gt;</span>&nbsp;<span class="num" id="2944086">10</span><span class="op" id="2944088">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944092">return</span>&nbsp;<span class="ident" id="2944099">fmt</span><span class="op" id="2944102">.</span><span class="ident" id="2944103">Sprintf</span><span class="op" id="2944110">(</span><span class="string" id="2944111">&#34;%.10q...&#34;</span><span class="op" id="2944121">,</span>&nbsp;<span class="ident" id="2944123">i</span><span class="op" id="2944124">.</span><span class="ident" id="2944125">val</span><span class="op" id="2944128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2944131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944134">return</span>&nbsp;<span class="ident" id="2944141">fmt</span><span class="op" id="2944144">.</span><span class="ident" id="2944145">Sprintf</span><span class="op" id="2944152">(</span><span class="string" id="2944153">&#34;%q&#34;</span><span class="op" id="2944157">,</span>&nbsp;<span class="ident" id="2944159">i</span><span class="op" id="2944160">.</span><span class="ident" id="2944161">val</span><span class="op" id="2944164">)</span><br>
<span class="lineno"></span><span class="op" id="2944166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2944169">//&nbsp;itemType&nbsp;identifies&nbsp;the&nbsp;type&nbsp;of&nbsp;lex&nbsp;items.</span><br>
<span class="lineno"></span><span class="keyword" id="2944215">type</span>&nbsp;<span class="ident" id="2944220">itemType</span>&nbsp;<span class="builtintype" id="2944229">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2944234">const</span>&nbsp;<span class="op" id="2944240">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944243">itemError</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944260">itemType</span>&nbsp;<span class="op" id="2944269">=</span>&nbsp;<span class="ident" id="2944271">iota</span>&nbsp;<span class="comment" id="2944276">//&nbsp;error&nbsp;occurred;&nbsp;value&nbsp;is&nbsp;text&nbsp;of&nbsp;error</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944319">itemBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944352">//&nbsp;boolean&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944373">itemChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944406">//&nbsp;printable&nbsp;ASCII&nbsp;character;&nbsp;grab&nbsp;bag&nbsp;for&nbsp;comma&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944461">itemCharConstant</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944494">//&nbsp;character&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944517">itemComplex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944550">//&nbsp;complex&nbsp;constant&nbsp;(1+2i);&nbsp;imaginary&nbsp;is&nbsp;just&nbsp;a&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944606">itemColonEquals</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944639">//&nbsp;colon-equals&nbsp;(&#39;:=&#39;)&nbsp;introducing&nbsp;a&nbsp;declaration</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944689">itemEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944698">itemField</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944713">//&nbsp;alphanumeric&nbsp;identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944759">itemIdentifier</span>&nbsp;<span class="comment" id="2944774">//&nbsp;alphanumeric&nbsp;identifier&nbsp;not&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944824">itemLeftDelim</span>&nbsp;&nbsp;<span class="comment" id="2944839">//&nbsp;left&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944865">itemLeftParen</span>&nbsp;&nbsp;<span class="comment" id="2944880">//&nbsp;&#39;(&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944902">itemNumber</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944917">//&nbsp;simple&nbsp;number,&nbsp;including&nbsp;imaginary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944956">itemPipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944971">//&nbsp;pipe&nbsp;symbol</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2944987">itemRawString</span>&nbsp;&nbsp;<span class="comment" id="2945002">//&nbsp;raw&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945042">itemRightDelim</span>&nbsp;<span class="comment" id="2945057">//&nbsp;right&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945084">itemRightParen</span>&nbsp;<span class="comment" id="2945099">//&nbsp;&#39;)&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945121">itemSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945136">//&nbsp;run&nbsp;of&nbsp;spaces&nbsp;separating&nbsp;arguments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945175">itemString</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945190">//&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945226">itemText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945241">//&nbsp;plain&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945256">itemVariable</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2945271">//&nbsp;variable&nbsp;starting&nbsp;with&nbsp;&#39;$&#39;,&nbsp;such&nbsp;as&nbsp;&#39;$&#39;&nbsp;or&nbsp;&nbsp;&#39;$1&#39;&nbsp;or&nbsp;&#39;$hello&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2945336">//&nbsp;Keywords&nbsp;appear&nbsp;after&nbsp;all&nbsp;the&nbsp;rest.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945376">itemKeyword</span>&nbsp;&nbsp;<span class="comment" id="2945389">//&nbsp;used&nbsp;only&nbsp;to&nbsp;delimit&nbsp;the&nbsp;keywords</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945427">itemDot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945440">//&nbsp;the&nbsp;cursor,&nbsp;spelled&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945468">itemDefine</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2945481">//&nbsp;define&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945500">itemElse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945513">//&nbsp;else&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945530">itemEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945543">//&nbsp;end&nbsp;keyword</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945559">itemIf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945572">//&nbsp;if&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945587">itemNil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945600">//&nbsp;the&nbsp;untyped&nbsp;nil&nbsp;constant,&nbsp;easiest&nbsp;to&nbsp;treat&nbsp;as&nbsp;a&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945660">itemRange</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945673">//&nbsp;range&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945691">itemTemplate</span>&nbsp;<span class="comment" id="2945704">//&nbsp;template&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945725">itemWith</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945738">//&nbsp;with&nbsp;keyword</span><br>
<span class="lineno">70</span><span class="op" id="2945754">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2945757">var</span>&nbsp;<span class="ident" id="2945761">key</span>&nbsp;<span class="op" id="2945765">=</span>&nbsp;<span class="keyword" id="2945767">map</span><span class="op" id="2945770">[</span><span class="builtintype" id="2945771">string</span><span class="op" id="2945777">]</span><span class="ident" id="2945778">itemType</span><span class="op" id="2945786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2945789">&#34;.&#34;</span><span class="op" id="2945792">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945801">itemDot</span><span class="op" id="2945808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2945811">&#34;define&#34;</span><span class="op" id="2945819">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2945823">itemDefine</span><span class="op" id="2945833">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2945836">&#34;else&#34;</span><span class="op" id="2945842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945848">itemElse</span><span class="op" id="2945856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2945859">&#34;end&#34;</span><span class="op" id="2945864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945871">itemEnd</span><span class="op" id="2945878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2945881">&#34;if&#34;</span><span class="op" id="2945885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945893">itemIf</span><span class="op" id="2945899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2945902">&#34;range&#34;</span><span class="op" id="2945909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945914">itemRange</span><span class="op" id="2945923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2945926">&#34;nil&#34;</span><span class="op" id="2945931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945938">itemNil</span><span class="op" id="2945945">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2945948">&#34;template&#34;</span><span class="op" id="2945958">:</span>&nbsp;<span class="ident" id="2945960">itemTemplate</span><span class="op" id="2945972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2945975">&#34;with&#34;</span><span class="op" id="2945981">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945987">itemWith</span><span class="op" id="2945995">,</span><br>
<span class="lineno"></span><span class="op" id="2945997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2946000">const</span>&nbsp;<span class="ident" id="2946006">eof</span>&nbsp;<span class="op" id="2946010">=</span>&nbsp;<span class="op" id="2946012">-</span><span class="num" id="2946013">1</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="2946016">//&nbsp;stateFn&nbsp;represents&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner&nbsp;as&nbsp;a&nbsp;function&nbsp;that&nbsp;returns&nbsp;the&nbsp;next&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="2946106">type</span>&nbsp;<span class="ident" id="2946111">stateFn</span>&nbsp;<span class="keyword" id="2946119">func</span><span class="op" id="2946123">(</span><span class="op" id="2946124">*</span><span class="ident" id="2946125">lexer</span><span class="op" id="2946130">)</span>&nbsp;<span class="ident" id="2946132">stateFn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2946141">//&nbsp;lexer&nbsp;holds&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">90</span><span class="keyword" id="2946182">type</span>&nbsp;<span class="ident" id="2946187">lexer</span>&nbsp;<span class="keyword" id="2946193">struct</span>&nbsp;<span class="op" id="2946200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946203">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2946214">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946224">//&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;input;&nbsp;used&nbsp;only&nbsp;for&nbsp;error&nbsp;reports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946279">input</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2946290">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946300">//&nbsp;the&nbsp;string&nbsp;being&nbsp;scanned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946329">leftDelim</span>&nbsp;&nbsp;<span class="builtintype" id="2946340">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946350">//&nbsp;start&nbsp;of&nbsp;action</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946370">rightDelim</span>&nbsp;<span class="builtintype" id="2946381">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946391">//&nbsp;end&nbsp;of&nbsp;action</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946409">state</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946420">stateFn</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2946430">//&nbsp;the&nbsp;next&nbsp;lexing&nbsp;function&nbsp;to&nbsp;enter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946468">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946479">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946489">//&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946523">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946534">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946544">//&nbsp;start&nbsp;position&nbsp;of&nbsp;this&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946576">width</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946587">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946597">//&nbsp;width&nbsp;of&nbsp;last&nbsp;rune&nbsp;read&nbsp;from&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946636">lastPos</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946647">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946657">//&nbsp;position&nbsp;of&nbsp;most&nbsp;recent&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946711">items</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946722">chan</span>&nbsp;<span class="ident" id="2946727">item</span>&nbsp;<span class="comment" id="2946732">//&nbsp;channel&nbsp;of&nbsp;scanned&nbsp;items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946761">parenDepth</span>&nbsp;<span class="builtintype" id="2946772">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946782">//&nbsp;nesting&nbsp;depth&nbsp;of&nbsp;(&nbsp;)&nbsp;exprs</span><br>
<span class="lineno"></span><span class="op" id="2946812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2946815">//&nbsp;next&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">105</span><span class="keyword" id="2946859">func</span>&nbsp;<span class="op" id="2946864">(</span><span class="ident" id="2946865">l</span>&nbsp;<span class="op" id="2946867">*</span><span class="ident" id="2946868">lexer</span><span class="op" id="2946873">)</span>&nbsp;<span class="ident" id="2946875">next</span><span class="op" id="2946879">(</span><span class="op" id="2946880">)</span>&nbsp;<span class="builtintype" id="2946882">rune</span>&nbsp;<span class="op" id="2946887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946890">if</span>&nbsp;<span class="builtintype" id="2946893">int</span><span class="op" id="2946896">(</span><span class="ident" id="2946897">l</span><span class="op" id="2946898">.</span><span class="ident" id="2946899">pos</span><span class="op" id="2946902">)</span>&nbsp;<span class="op" id="2946904">&gt;=</span>&nbsp;<span class="builtinfunc" id="2946907">len</span><span class="op" id="2946910">(</span><span class="ident" id="2946911">l</span><span class="op" id="2946912">.</span><span class="ident" id="2946913">input</span><span class="op" id="2946918">)</span>&nbsp;<span class="op" id="2946920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946924">l</span><span class="op" id="2946925">.</span><span class="ident" id="2946926">width</span>&nbsp;<span class="op" id="2946932">=</span>&nbsp;<span class="num" id="2946934">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946938">return</span>&nbsp;<span class="ident" id="2946945">eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946950">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946953">r</span><span class="op" id="2946954">,</span>&nbsp;<span class="ident" id="2946956">w</span>&nbsp;<span class="op" id="2946958">:=</span>&nbsp;<span class="ident" id="2946961">utf8</span><span class="op" id="2946965">.</span><span class="ident" id="2946966">DecodeRuneInString</span><span class="op" id="2946984">(</span><span class="ident" id="2946985">l</span><span class="op" id="2946986">.</span><span class="ident" id="2946987">input</span><span class="op" id="2946992">[</span><span class="ident" id="2946993">l</span><span class="op" id="2946994">.</span><span class="ident" id="2946995">pos</span><span class="op" id="2946998">:</span><span class="op" id="2946999">]</span><span class="op" id="2947000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947003">l</span><span class="op" id="2947004">.</span><span class="ident" id="2947005">width</span>&nbsp;<span class="op" id="2947011">=</span>&nbsp;<span class="ident" id="2947013">Pos</span><span class="op" id="2947016">(</span><span class="ident" id="2947017">w</span><span class="op" id="2947018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947021">l</span><span class="op" id="2947022">.</span><span class="ident" id="2947023">pos</span>&nbsp;<span class="op" id="2947027">+=</span>&nbsp;<span class="ident" id="2947030">l</span><span class="op" id="2947031">.</span><span class="ident" id="2947032">width</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947039">return</span>&nbsp;<span class="ident" id="2947046">r</span><br>
<span class="lineno"></span><span class="op" id="2947048">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="2947051">//&nbsp;peek&nbsp;returns&nbsp;but&nbsp;does&nbsp;not&nbsp;consume&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="2947116">func</span>&nbsp;<span class="op" id="2947121">(</span><span class="ident" id="2947122">l</span>&nbsp;<span class="op" id="2947124">*</span><span class="ident" id="2947125">lexer</span><span class="op" id="2947130">)</span>&nbsp;<span class="ident" id="2947132">peek</span><span class="op" id="2947136">(</span><span class="op" id="2947137">)</span>&nbsp;<span class="builtintype" id="2947139">rune</span>&nbsp;<span class="op" id="2947144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947147">r</span>&nbsp;<span class="op" id="2947149">:=</span>&nbsp;<span class="ident" id="2947152">l</span><span class="op" id="2947153">.</span><span class="ident" id="2947154">next</span><span class="op" id="2947158">(</span><span class="op" id="2947159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947162">l</span><span class="op" id="2947163">.</span><span class="ident" id="2947164">backup</span><span class="op" id="2947170">(</span><span class="op" id="2947171">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947174">return</span>&nbsp;<span class="ident" id="2947181">r</span><br>
<span class="lineno"></span><span class="op" id="2947183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947186">//&nbsp;backup&nbsp;steps&nbsp;back&nbsp;one&nbsp;rune.&nbsp;Can&nbsp;only&nbsp;be&nbsp;called&nbsp;once&nbsp;per&nbsp;call&nbsp;of&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="2947259">func</span>&nbsp;<span class="op" id="2947264">(</span><span class="ident" id="2947265">l</span>&nbsp;<span class="op" id="2947267">*</span><span class="ident" id="2947268">lexer</span><span class="op" id="2947273">)</span>&nbsp;<span class="ident" id="2947275">backup</span><span class="op" id="2947281">(</span><span class="op" id="2947282">)</span>&nbsp;<span class="op" id="2947284">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947287">l</span><span class="op" id="2947288">.</span><span class="ident" id="2947289">pos</span>&nbsp;<span class="op" id="2947293">-=</span>&nbsp;<span class="ident" id="2947296">l</span><span class="op" id="2947297">.</span><span class="ident" id="2947298">width</span><br>
<span class="lineno"></span><span class="op" id="2947304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947307">//&nbsp;emit&nbsp;passes&nbsp;an&nbsp;item&nbsp;back&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="keyword" id="2947350">func</span>&nbsp;<span class="op" id="2947355">(</span><span class="ident" id="2947356">l</span>&nbsp;<span class="op" id="2947358">*</span><span class="ident" id="2947359">lexer</span><span class="op" id="2947364">)</span>&nbsp;<span class="ident" id="2947366">emit</span><span class="op" id="2947370">(</span><span class="ident" id="2947371">t</span>&nbsp;<span class="ident" id="2947373">itemType</span><span class="op" id="2947381">)</span>&nbsp;<span class="op" id="2947383">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947386">l</span><span class="op" id="2947387">.</span><span class="ident" id="2947388">items</span>&nbsp;<span class="op" id="2947394">&lt;-</span>&nbsp;<span class="ident" id="2947397">item</span><span class="op" id="2947401">{</span><span class="ident" id="2947402">t</span><span class="op" id="2947403">,</span>&nbsp;<span class="ident" id="2947405">l</span><span class="op" id="2947406">.</span><span class="ident" id="2947407">start</span><span class="op" id="2947412">,</span>&nbsp;<span class="ident" id="2947414">l</span><span class="op" id="2947415">.</span><span class="ident" id="2947416">input</span><span class="op" id="2947421">[</span><span class="ident" id="2947422">l</span><span class="op" id="2947423">.</span><span class="ident" id="2947424">start</span><span class="op" id="2947429">:</span><span class="ident" id="2947430">l</span><span class="op" id="2947431">.</span><span class="ident" id="2947432">pos</span><span class="op" id="2947435">]</span><span class="op" id="2947436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947439">l</span><span class="op" id="2947440">.</span><span class="ident" id="2947441">start</span>&nbsp;<span class="op" id="2947447">=</span>&nbsp;<span class="ident" id="2947449">l</span><span class="op" id="2947450">.</span><span class="ident" id="2947451">pos</span><br>
<span class="lineno"></span><span class="op" id="2947455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947458">//&nbsp;ignore&nbsp;skips&nbsp;over&nbsp;the&nbsp;pending&nbsp;input&nbsp;before&nbsp;this&nbsp;point.</span><br>
<span class="lineno">135</span><span class="keyword" id="2947516">func</span>&nbsp;<span class="op" id="2947521">(</span><span class="ident" id="2947522">l</span>&nbsp;<span class="op" id="2947524">*</span><span class="ident" id="2947525">lexer</span><span class="op" id="2947530">)</span>&nbsp;<span class="ident" id="2947532">ignore</span><span class="op" id="2947538">(</span><span class="op" id="2947539">)</span>&nbsp;<span class="op" id="2947541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947544">l</span><span class="op" id="2947545">.</span><span class="ident" id="2947546">start</span>&nbsp;<span class="op" id="2947552">=</span>&nbsp;<span class="ident" id="2947554">l</span><span class="op" id="2947555">.</span><span class="ident" id="2947556">pos</span><br>
<span class="lineno"></span><span class="op" id="2947560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947563">//&nbsp;accept&nbsp;consumes&nbsp;the&nbsp;next&nbsp;rune&nbsp;if&nbsp;it&#39;s&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno">140</span><span class="keyword" id="2947624">func</span>&nbsp;<span class="op" id="2947629">(</span><span class="ident" id="2947630">l</span>&nbsp;<span class="op" id="2947632">*</span><span class="ident" id="2947633">lexer</span><span class="op" id="2947638">)</span>&nbsp;<span class="ident" id="2947640">accept</span><span class="op" id="2947646">(</span><span class="ident" id="2947647">valid</span>&nbsp;<span class="builtintype" id="2947653">string</span><span class="op" id="2947659">)</span>&nbsp;<span class="builtintype" id="2947661">bool</span>&nbsp;<span class="op" id="2947666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947669">if</span>&nbsp;<span class="ident" id="2947672">strings</span><span class="op" id="2947679">.</span><span class="ident" id="2947680">IndexRune</span><span class="op" id="2947689">(</span><span class="ident" id="2947690">valid</span><span class="op" id="2947695">,</span>&nbsp;<span class="ident" id="2947697">l</span><span class="op" id="2947698">.</span><span class="ident" id="2947699">next</span><span class="op" id="2947703">(</span><span class="op" id="2947704">)</span><span class="op" id="2947705">)</span>&nbsp;<span class="op" id="2947707">&gt;=</span>&nbsp;<span class="num" id="2947710">0</span>&nbsp;<span class="op" id="2947712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947716">return</span>&nbsp;<span class="builtintype" id="2947723">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947732">l</span><span class="op" id="2947733">.</span><span class="ident" id="2947734">backup</span><span class="op" id="2947740">(</span><span class="op" id="2947741">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947744">return</span>&nbsp;<span class="builtintype" id="2947751">false</span><br>
<span class="lineno"></span><span class="op" id="2947757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947760">//&nbsp;acceptRun&nbsp;consumes&nbsp;a&nbsp;run&nbsp;of&nbsp;runes&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="2947817">func</span>&nbsp;<span class="op" id="2947822">(</span><span class="ident" id="2947823">l</span>&nbsp;<span class="op" id="2947825">*</span><span class="ident" id="2947826">lexer</span><span class="op" id="2947831">)</span>&nbsp;<span class="ident" id="2947833">acceptRun</span><span class="op" id="2947842">(</span><span class="ident" id="2947843">valid</span>&nbsp;<span class="builtintype" id="2947849">string</span><span class="op" id="2947855">)</span>&nbsp;<span class="op" id="2947857">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947860">for</span>&nbsp;<span class="ident" id="2947864">strings</span><span class="op" id="2947871">.</span><span class="ident" id="2947872">IndexRune</span><span class="op" id="2947881">(</span><span class="ident" id="2947882">valid</span><span class="op" id="2947887">,</span>&nbsp;<span class="ident" id="2947889">l</span><span class="op" id="2947890">.</span><span class="ident" id="2947891">next</span><span class="op" id="2947895">(</span><span class="op" id="2947896">)</span><span class="op" id="2947897">)</span>&nbsp;<span class="op" id="2947899">&gt;=</span>&nbsp;<span class="num" id="2947902">0</span>&nbsp;<span class="op" id="2947904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947910">l</span><span class="op" id="2947911">.</span><span class="ident" id="2947912">backup</span><span class="op" id="2947918">(</span><span class="op" id="2947919">)</span><br>
<span class="lineno"></span><span class="op" id="2947921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2947924">//&nbsp;lineNumber&nbsp;reports&nbsp;which&nbsp;line&nbsp;we&#39;re&nbsp;on,&nbsp;based&nbsp;on&nbsp;the&nbsp;position&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2947992">//&nbsp;the&nbsp;previous&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem.&nbsp;Doing&nbsp;it&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="2948053">//&nbsp;means&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;worry&nbsp;about&nbsp;peek&nbsp;double&nbsp;counting.</span><br>
<span class="lineno"></span><span class="keyword" id="2948113">func</span>&nbsp;<span class="op" id="2948118">(</span><span class="ident" id="2948119">l</span>&nbsp;<span class="op" id="2948121">*</span><span class="ident" id="2948122">lexer</span><span class="op" id="2948127">)</span>&nbsp;<span class="ident" id="2948129">lineNumber</span><span class="op" id="2948139">(</span><span class="op" id="2948140">)</span>&nbsp;<span class="builtintype" id="2948142">int</span>&nbsp;<span class="op" id="2948146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948149">return</span>&nbsp;<span class="num" id="2948156">1</span>&nbsp;<span class="op" id="2948158">+</span>&nbsp;<span class="ident" id="2948160">strings</span><span class="op" id="2948167">.</span><span class="ident" id="2948168">Count</span><span class="op" id="2948173">(</span><span class="ident" id="2948174">l</span><span class="op" id="2948175">.</span><span class="ident" id="2948176">input</span><span class="op" id="2948181">[</span><span class="op" id="2948182">:</span><span class="ident" id="2948183">l</span><span class="op" id="2948184">.</span><span class="ident" id="2948185">lastPos</span><span class="op" id="2948192">]</span><span class="op" id="2948193">,</span>&nbsp;<span class="string" id="2948195">&#34;\n&#34;</span><span class="op" id="2948199">)</span><br>
<span class="lineno">160</span><span class="op" id="2948201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2948204">//&nbsp;errorf&nbsp;returns&nbsp;an&nbsp;error&nbsp;token&nbsp;and&nbsp;terminates&nbsp;the&nbsp;scan&nbsp;by&nbsp;passing</span><br>
<span class="lineno"></span><span class="comment" id="2948272">//&nbsp;back&nbsp;a&nbsp;nil&nbsp;pointer&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;next&nbsp;state,&nbsp;terminating&nbsp;l.nextItem.</span><br>
<span class="lineno"></span><span class="keyword" id="2948347">func</span>&nbsp;<span class="op" id="2948352">(</span><span class="ident" id="2948353">l</span>&nbsp;<span class="op" id="2948355">*</span><span class="ident" id="2948356">lexer</span><span class="op" id="2948361">)</span>&nbsp;<span class="ident" id="2948363">errorf</span><span class="op" id="2948369">(</span><span class="ident" id="2948370">format</span>&nbsp;<span class="builtintype" id="2948377">string</span><span class="op" id="2948383">,</span>&nbsp;<span class="ident" id="2948385">args</span>&nbsp;<span class="op" id="2948390">...</span><span class="keyword" id="2948393">interface</span><span class="op" id="2948402">{</span><span class="op" id="2948403">}</span><span class="op" id="2948404">)</span>&nbsp;<span class="ident" id="2948406">stateFn</span>&nbsp;<span class="op" id="2948414">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948417">l</span><span class="op" id="2948418">.</span><span class="ident" id="2948419">items</span>&nbsp;<span class="op" id="2948425">&lt;-</span>&nbsp;<span class="ident" id="2948428">item</span><span class="op" id="2948432">{</span><span class="ident" id="2948433">itemError</span><span class="op" id="2948442">,</span>&nbsp;<span class="ident" id="2948444">l</span><span class="op" id="2948445">.</span><span class="ident" id="2948446">start</span><span class="op" id="2948451">,</span>&nbsp;<span class="ident" id="2948453">fmt</span><span class="op" id="2948456">.</span><span class="ident" id="2948457">Sprintf</span><span class="op" id="2948464">(</span><span class="ident" id="2948465">format</span><span class="op" id="2948471">,</span>&nbsp;<span class="ident" id="2948473">args</span><span class="op" id="2948477">...</span><span class="op" id="2948480">)</span><span class="op" id="2948481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948484">return</span>&nbsp;<span class="ident" id="2948491">nil</span><br>
<span class="lineno"></span><span class="op" id="2948495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2948498">//&nbsp;nextItem&nbsp;returns&nbsp;the&nbsp;next&nbsp;item&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">170</span><span class="keyword" id="2948548">func</span>&nbsp;<span class="op" id="2948553">(</span><span class="ident" id="2948554">l</span>&nbsp;<span class="op" id="2948556">*</span><span class="ident" id="2948557">lexer</span><span class="op" id="2948562">)</span>&nbsp;<span class="ident" id="2948564">nextItem</span><span class="op" id="2948572">(</span><span class="op" id="2948573">)</span>&nbsp;<span class="ident" id="2948575">item</span>&nbsp;<span class="op" id="2948580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948583">item</span>&nbsp;<span class="op" id="2948588">:=</span>&nbsp;<span class="op" id="2948591">&lt;-</span><span class="ident" id="2948593">l</span><span class="op" id="2948594">.</span><span class="ident" id="2948595">items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948602">l</span><span class="op" id="2948603">.</span><span class="ident" id="2948604">lastPos</span>&nbsp;<span class="op" id="2948612">=</span>&nbsp;<span class="ident" id="2948614">item</span><span class="op" id="2948618">.</span><span class="ident" id="2948619">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948624">return</span>&nbsp;<span class="ident" id="2948631">item</span><br>
<span class="lineno"></span><span class="op" id="2948636">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="2948639">//&nbsp;lex&nbsp;creates&nbsp;a&nbsp;new&nbsp;scanner&nbsp;for&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2948690">func</span>&nbsp;<span class="ident" id="2948695">lex</span><span class="op" id="2948698">(</span><span class="ident" id="2948699">name</span><span class="op" id="2948703">,</span>&nbsp;<span class="ident" id="2948705">input</span><span class="op" id="2948710">,</span>&nbsp;<span class="ident" id="2948712">left</span><span class="op" id="2948716">,</span>&nbsp;<span class="ident" id="2948718">right</span>&nbsp;<span class="builtintype" id="2948724">string</span><span class="op" id="2948730">)</span>&nbsp;<span class="op" id="2948732">*</span><span class="ident" id="2948733">lexer</span>&nbsp;<span class="op" id="2948739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948742">if</span>&nbsp;<span class="ident" id="2948745">left</span>&nbsp;<span class="op" id="2948750">==</span>&nbsp;<span class="string" id="2948753">&#34;&#34;</span>&nbsp;<span class="op" id="2948756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948760">left</span>&nbsp;<span class="op" id="2948765">=</span>&nbsp;<span class="ident" id="2948767">leftDelim</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948781">if</span>&nbsp;<span class="ident" id="2948784">right</span>&nbsp;<span class="op" id="2948790">==</span>&nbsp;<span class="string" id="2948793">&#34;&#34;</span>&nbsp;<span class="op" id="2948796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948800">right</span>&nbsp;<span class="op" id="2948806">=</span>&nbsp;<span class="ident" id="2948808">rightDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948823">l</span>&nbsp;<span class="op" id="2948825">:=</span>&nbsp;<span class="op" id="2948828">&amp;</span><span class="ident" id="2948829">lexer</span><span class="op" id="2948834">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948838">name</span><span class="op" id="2948842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2948850">name</span><span class="op" id="2948854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948858">input</span><span class="op" id="2948863">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2948870">input</span><span class="op" id="2948875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948879">leftDelim</span><span class="op" id="2948888">:</span>&nbsp;&nbsp;<span class="ident" id="2948891">left</span><span class="op" id="2948895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948899">rightDelim</span><span class="op" id="2948909">:</span>&nbsp;<span class="ident" id="2948911">right</span><span class="op" id="2948916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948920">items</span><span class="op" id="2948925">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2948932">make</span><span class="op" id="2948936">(</span><span class="keyword" id="2948937">chan</span>&nbsp;<span class="ident" id="2948942">item</span><span class="op" id="2948946">)</span><span class="op" id="2948947">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948953">go</span>&nbsp;<span class="ident" id="2948956">l</span><span class="op" id="2948957">.</span><span class="ident" id="2948958">run</span><span class="op" id="2948961">(</span><span class="op" id="2948962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948965">return</span>&nbsp;<span class="ident" id="2948972">l</span><br>
<span class="lineno"></span><span class="op" id="2948974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="2948977">//&nbsp;run&nbsp;runs&nbsp;the&nbsp;state&nbsp;machine&nbsp;for&nbsp;the&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="2949022">func</span>&nbsp;<span class="op" id="2949027">(</span><span class="ident" id="2949028">l</span>&nbsp;<span class="op" id="2949030">*</span><span class="ident" id="2949031">lexer</span><span class="op" id="2949036">)</span>&nbsp;<span class="ident" id="2949038">run</span><span class="op" id="2949041">(</span><span class="op" id="2949042">)</span>&nbsp;<span class="op" id="2949044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949047">for</span>&nbsp;<span class="ident" id="2949051">l</span><span class="op" id="2949052">.</span><span class="ident" id="2949053">state</span>&nbsp;<span class="op" id="2949059">=</span>&nbsp;<span class="ident" id="2949061">lexText</span><span class="op" id="2949068">;</span>&nbsp;<span class="ident" id="2949070">l</span><span class="op" id="2949071">.</span><span class="ident" id="2949072">state</span>&nbsp;<span class="op" id="2949078">!=</span>&nbsp;<span class="ident" id="2949081">nil</span><span class="op" id="2949084">;</span>&nbsp;<span class="op" id="2949086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949090">l</span><span class="op" id="2949091">.</span><span class="ident" id="2949092">state</span>&nbsp;<span class="op" id="2949098">=</span>&nbsp;<span class="ident" id="2949100">l</span><span class="op" id="2949101">.</span><span class="ident" id="2949102">state</span><span class="op" id="2949107">(</span><span class="ident" id="2949108">l</span><span class="op" id="2949109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949112">}</span><br>
<span class="lineno">200</span><span class="op" id="2949114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949117">//&nbsp;state&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2949137">const</span>&nbsp;<span class="op" id="2949143">(</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949146">leftDelim</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949159">=</span>&nbsp;<span class="string" id="2949161">&#34;{{&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949167">rightDelim</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2949180">=</span>&nbsp;<span class="string" id="2949182">&#34;}}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949188">leftComment</span>&nbsp;&nbsp;<span class="op" id="2949201">=</span>&nbsp;<span class="string" id="2949203">&#34;/*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949209">rightComment</span>&nbsp;<span class="op" id="2949222">=</span>&nbsp;<span class="string" id="2949224">&#34;*/&#34;</span><br>
<span class="lineno"></span><span class="op" id="2949229">)</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="comment" id="2949232">//&nbsp;lexText&nbsp;scans&nbsp;until&nbsp;an&nbsp;opening&nbsp;action&nbsp;delimiter,&nbsp;&#34;{{&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2949290">func</span>&nbsp;<span class="ident" id="2949295">lexText</span><span class="op" id="2949302">(</span><span class="ident" id="2949303">l</span>&nbsp;<span class="op" id="2949305">*</span><span class="ident" id="2949306">lexer</span><span class="op" id="2949311">)</span>&nbsp;<span class="ident" id="2949313">stateFn</span>&nbsp;<span class="op" id="2949321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949324">for</span>&nbsp;<span class="op" id="2949328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949332">if</span>&nbsp;<span class="ident" id="2949335">strings</span><span class="op" id="2949342">.</span><span class="ident" id="2949343">HasPrefix</span><span class="op" id="2949352">(</span><span class="ident" id="2949353">l</span><span class="op" id="2949354">.</span><span class="ident" id="2949355">input</span><span class="op" id="2949360">[</span><span class="ident" id="2949361">l</span><span class="op" id="2949362">.</span><span class="ident" id="2949363">pos</span><span class="op" id="2949366">:</span><span class="op" id="2949367">]</span><span class="op" id="2949368">,</span>&nbsp;<span class="ident" id="2949370">l</span><span class="op" id="2949371">.</span><span class="ident" id="2949372">leftDelim</span><span class="op" id="2949381">)</span>&nbsp;<span class="op" id="2949383">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949388">if</span>&nbsp;<span class="ident" id="2949391">l</span><span class="op" id="2949392">.</span><span class="ident" id="2949393">pos</span>&nbsp;<span class="op" id="2949397">&gt;</span>&nbsp;<span class="ident" id="2949399">l</span><span class="op" id="2949400">.</span><span class="ident" id="2949401">start</span>&nbsp;<span class="op" id="2949407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949413">l</span><span class="op" id="2949414">.</span><span class="ident" id="2949415">emit</span><span class="op" id="2949419">(</span><span class="ident" id="2949420">itemText</span><span class="op" id="2949428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949438">return</span>&nbsp;<span class="ident" id="2949445">lexLeftDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949460">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949464">if</span>&nbsp;<span class="ident" id="2949467">l</span><span class="op" id="2949468">.</span><span class="ident" id="2949469">next</span><span class="op" id="2949473">(</span><span class="op" id="2949474">)</span>&nbsp;<span class="op" id="2949476">==</span>&nbsp;<span class="ident" id="2949479">eof</span>&nbsp;<span class="op" id="2949483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949488">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2949502">//&nbsp;Correctly&nbsp;reached&nbsp;EOF.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949529">if</span>&nbsp;<span class="ident" id="2949532">l</span><span class="op" id="2949533">.</span><span class="ident" id="2949534">pos</span>&nbsp;<span class="op" id="2949538">&gt;</span>&nbsp;<span class="ident" id="2949540">l</span><span class="op" id="2949541">.</span><span class="ident" id="2949542">start</span>&nbsp;<span class="op" id="2949548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949552">l</span><span class="op" id="2949553">.</span><span class="ident" id="2949554">emit</span><span class="op" id="2949558">(</span><span class="ident" id="2949559">itemText</span><span class="op" id="2949567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949573">l</span><span class="op" id="2949574">.</span><span class="ident" id="2949575">emit</span><span class="op" id="2949579">(</span><span class="ident" id="2949580">itemEOF</span><span class="op" id="2949587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949590">return</span>&nbsp;<span class="ident" id="2949597">nil</span><br>
<span class="lineno">230</span><span class="op" id="2949601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949604">//&nbsp;lexLeftDelim&nbsp;scans&nbsp;the&nbsp;left&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2949676">func</span>&nbsp;<span class="ident" id="2949681">lexLeftDelim</span><span class="op" id="2949693">(</span><span class="ident" id="2949694">l</span>&nbsp;<span class="op" id="2949696">*</span><span class="ident" id="2949697">lexer</span><span class="op" id="2949702">)</span>&nbsp;<span class="ident" id="2949704">stateFn</span>&nbsp;<span class="op" id="2949712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949715">l</span><span class="op" id="2949716">.</span><span class="ident" id="2949717">pos</span>&nbsp;<span class="op" id="2949721">+=</span>&nbsp;<span class="ident" id="2949724">Pos</span><span class="op" id="2949727">(</span><span class="builtinfunc" id="2949728">len</span><span class="op" id="2949731">(</span><span class="ident" id="2949732">l</span><span class="op" id="2949733">.</span><span class="ident" id="2949734">leftDelim</span><span class="op" id="2949743">)</span><span class="op" id="2949744">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949747">if</span>&nbsp;<span class="ident" id="2949750">strings</span><span class="op" id="2949757">.</span><span class="ident" id="2949758">HasPrefix</span><span class="op" id="2949767">(</span><span class="ident" id="2949768">l</span><span class="op" id="2949769">.</span><span class="ident" id="2949770">input</span><span class="op" id="2949775">[</span><span class="ident" id="2949776">l</span><span class="op" id="2949777">.</span><span class="ident" id="2949778">pos</span><span class="op" id="2949781">:</span><span class="op" id="2949782">]</span><span class="op" id="2949783">,</span>&nbsp;<span class="ident" id="2949785">leftComment</span><span class="op" id="2949796">)</span>&nbsp;<span class="op" id="2949798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949802">return</span>&nbsp;<span class="ident" id="2949809">lexComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2949821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949824">l</span><span class="op" id="2949825">.</span><span class="ident" id="2949826">emit</span><span class="op" id="2949830">(</span><span class="ident" id="2949831">itemLeftDelim</span><span class="op" id="2949844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949847">l</span><span class="op" id="2949848">.</span><span class="ident" id="2949849">parenDepth</span>&nbsp;<span class="op" id="2949860">=</span>&nbsp;<span class="num" id="2949862">0</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949865">return</span>&nbsp;<span class="ident" id="2949872">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="2949888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949891">//&nbsp;lexComment&nbsp;scans&nbsp;a&nbsp;comment.&nbsp;The&nbsp;left&nbsp;comment&nbsp;marker&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2949970">func</span>&nbsp;<span class="ident" id="2949975">lexComment</span><span class="op" id="2949985">(</span><span class="ident" id="2949986">l</span>&nbsp;<span class="op" id="2949988">*</span><span class="ident" id="2949989">lexer</span><span class="op" id="2949994">)</span>&nbsp;<span class="ident" id="2949996">stateFn</span>&nbsp;<span class="op" id="2950004">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950007">l</span><span class="op" id="2950008">.</span><span class="ident" id="2950009">pos</span>&nbsp;<span class="op" id="2950013">+=</span>&nbsp;<span class="ident" id="2950016">Pos</span><span class="op" id="2950019">(</span><span class="builtinfunc" id="2950020">len</span><span class="op" id="2950023">(</span><span class="ident" id="2950024">leftComment</span><span class="op" id="2950035">)</span><span class="op" id="2950036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950039">i</span>&nbsp;<span class="op" id="2950041">:=</span>&nbsp;<span class="ident" id="2950044">strings</span><span class="op" id="2950051">.</span><span class="ident" id="2950052">Index</span><span class="op" id="2950057">(</span><span class="ident" id="2950058">l</span><span class="op" id="2950059">.</span><span class="ident" id="2950060">input</span><span class="op" id="2950065">[</span><span class="ident" id="2950066">l</span><span class="op" id="2950067">.</span><span class="ident" id="2950068">pos</span><span class="op" id="2950071">:</span><span class="op" id="2950072">]</span><span class="op" id="2950073">,</span>&nbsp;<span class="ident" id="2950075">rightComment</span><span class="op" id="2950087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950090">if</span>&nbsp;<span class="ident" id="2950093">i</span>&nbsp;<span class="op" id="2950095">&lt;</span>&nbsp;<span class="num" id="2950097">0</span>&nbsp;<span class="op" id="2950099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950103">return</span>&nbsp;<span class="ident" id="2950110">l</span><span class="op" id="2950111">.</span><span class="ident" id="2950112">errorf</span><span class="op" id="2950118">(</span><span class="string" id="2950119">&#34;unclosed&nbsp;comment&#34;</span><span class="op" id="2950137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950140">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950143">l</span><span class="op" id="2950144">.</span><span class="ident" id="2950145">pos</span>&nbsp;<span class="op" id="2950149">+=</span>&nbsp;<span class="ident" id="2950152">Pos</span><span class="op" id="2950155">(</span><span class="ident" id="2950156">i</span>&nbsp;<span class="op" id="2950158">+</span>&nbsp;<span class="builtinfunc" id="2950160">len</span><span class="op" id="2950163">(</span><span class="ident" id="2950164">rightComment</span><span class="op" id="2950176">)</span><span class="op" id="2950177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950180">if</span>&nbsp;<span class="op" id="2950183">!</span><span class="ident" id="2950184">strings</span><span class="op" id="2950191">.</span><span class="ident" id="2950192">HasPrefix</span><span class="op" id="2950201">(</span><span class="ident" id="2950202">l</span><span class="op" id="2950203">.</span><span class="ident" id="2950204">input</span><span class="op" id="2950209">[</span><span class="ident" id="2950210">l</span><span class="op" id="2950211">.</span><span class="ident" id="2950212">pos</span><span class="op" id="2950215">:</span><span class="op" id="2950216">]</span><span class="op" id="2950217">,</span>&nbsp;<span class="ident" id="2950219">l</span><span class="op" id="2950220">.</span><span class="ident" id="2950221">rightDelim</span><span class="op" id="2950231">)</span>&nbsp;<span class="op" id="2950233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950237">return</span>&nbsp;<span class="ident" id="2950244">l</span><span class="op" id="2950245">.</span><span class="ident" id="2950246">errorf</span><span class="op" id="2950252">(</span><span class="string" id="2950253">&#34;comment&nbsp;ends&nbsp;before&nbsp;closing&nbsp;delimiter&#34;</span><span class="op" id="2950292">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950296">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950299">l</span><span class="op" id="2950300">.</span><span class="ident" id="2950301">pos</span>&nbsp;<span class="op" id="2950305">+=</span>&nbsp;<span class="ident" id="2950308">Pos</span><span class="op" id="2950311">(</span><span class="builtinfunc" id="2950312">len</span><span class="op" id="2950315">(</span><span class="ident" id="2950316">l</span><span class="op" id="2950317">.</span><span class="ident" id="2950318">rightDelim</span><span class="op" id="2950328">)</span><span class="op" id="2950329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950332">l</span><span class="op" id="2950333">.</span><span class="ident" id="2950334">ignore</span><span class="op" id="2950340">(</span><span class="op" id="2950341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950344">return</span>&nbsp;<span class="ident" id="2950351">lexText</span><br>
<span class="lineno"></span><span class="op" id="2950359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="2950362">//&nbsp;lexRightDelim&nbsp;scans&nbsp;the&nbsp;right&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2950436">func</span>&nbsp;<span class="ident" id="2950441">lexRightDelim</span><span class="op" id="2950454">(</span><span class="ident" id="2950455">l</span>&nbsp;<span class="op" id="2950457">*</span><span class="ident" id="2950458">lexer</span><span class="op" id="2950463">)</span>&nbsp;<span class="ident" id="2950465">stateFn</span>&nbsp;<span class="op" id="2950473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950476">l</span><span class="op" id="2950477">.</span><span class="ident" id="2950478">pos</span>&nbsp;<span class="op" id="2950482">+=</span>&nbsp;<span class="ident" id="2950485">Pos</span><span class="op" id="2950488">(</span><span class="builtinfunc" id="2950489">len</span><span class="op" id="2950492">(</span><span class="ident" id="2950493">l</span><span class="op" id="2950494">.</span><span class="ident" id="2950495">rightDelim</span><span class="op" id="2950505">)</span><span class="op" id="2950506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950509">l</span><span class="op" id="2950510">.</span><span class="ident" id="2950511">emit</span><span class="op" id="2950515">(</span><span class="ident" id="2950516">itemRightDelim</span><span class="op" id="2950530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950533">return</span>&nbsp;<span class="ident" id="2950540">lexText</span><br>
<span class="lineno">265</span><span class="op" id="2950548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2950551">//&nbsp;lexInsideAction&nbsp;scans&nbsp;the&nbsp;elements&nbsp;inside&nbsp;action&nbsp;delimiters.</span><br>
<span class="lineno"></span><span class="keyword" id="2950615">func</span>&nbsp;<span class="ident" id="2950620">lexInsideAction</span><span class="op" id="2950635">(</span><span class="ident" id="2950636">l</span>&nbsp;<span class="op" id="2950638">*</span><span class="ident" id="2950639">lexer</span><span class="op" id="2950644">)</span>&nbsp;<span class="ident" id="2950646">stateFn</span>&nbsp;<span class="op" id="2950654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950657">//&nbsp;Either&nbsp;number,&nbsp;quoted&nbsp;string,&nbsp;or&nbsp;identifier.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950706">//&nbsp;Spaces&nbsp;separate&nbsp;arguments;&nbsp;runs&nbsp;of&nbsp;spaces&nbsp;turn&nbsp;into&nbsp;itemSpace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950773">//&nbsp;Pipe&nbsp;symbols&nbsp;separate&nbsp;and&nbsp;are&nbsp;emitted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950816">if</span>&nbsp;<span class="ident" id="2950819">strings</span><span class="op" id="2950826">.</span><span class="ident" id="2950827">HasPrefix</span><span class="op" id="2950836">(</span><span class="ident" id="2950837">l</span><span class="op" id="2950838">.</span><span class="ident" id="2950839">input</span><span class="op" id="2950844">[</span><span class="ident" id="2950845">l</span><span class="op" id="2950846">.</span><span class="ident" id="2950847">pos</span><span class="op" id="2950850">:</span><span class="op" id="2950851">]</span><span class="op" id="2950852">,</span>&nbsp;<span class="ident" id="2950854">l</span><span class="op" id="2950855">.</span><span class="ident" id="2950856">rightDelim</span><span class="op" id="2950866">)</span>&nbsp;<span class="op" id="2950868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950872">if</span>&nbsp;<span class="ident" id="2950875">l</span><span class="op" id="2950876">.</span><span class="ident" id="2950877">parenDepth</span>&nbsp;<span class="op" id="2950888">==</span>&nbsp;<span class="num" id="2950891">0</span>&nbsp;<span class="op" id="2950893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950898">return</span>&nbsp;<span class="ident" id="2950905">lexRightDelim</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950925">return</span>&nbsp;<span class="ident" id="2950932">l</span><span class="op" id="2950933">.</span><span class="ident" id="2950934">errorf</span><span class="op" id="2950940">(</span><span class="string" id="2950941">&#34;unclosed&nbsp;left&nbsp;paren&#34;</span><span class="op" id="2950962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950968">switch</span>&nbsp;<span class="ident" id="2950975">r</span>&nbsp;<span class="op" id="2950977">:=</span>&nbsp;<span class="ident" id="2950980">l</span><span class="op" id="2950981">.</span><span class="ident" id="2950982">next</span><span class="op" id="2950986">(</span><span class="op" id="2950987">)</span><span class="op" id="2950988">;</span>&nbsp;<span class="op" id="2950990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950993">case</span>&nbsp;<span class="ident" id="2950998">r</span>&nbsp;<span class="op" id="2951000">==</span>&nbsp;<span class="ident" id="2951003">eof</span>&nbsp;<span class="op" id="2951007">||</span>&nbsp;<span class="ident" id="2951010">isEndOfLine</span><span class="op" id="2951021">(</span><span class="ident" id="2951022">r</span><span class="op" id="2951023">)</span><span class="op" id="2951024">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951028">return</span>&nbsp;<span class="ident" id="2951035">l</span><span class="op" id="2951036">.</span><span class="ident" id="2951037">errorf</span><span class="op" id="2951043">(</span><span class="string" id="2951044">&#34;unclosed&nbsp;action&#34;</span><span class="op" id="2951061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951064">case</span>&nbsp;<span class="ident" id="2951069">isSpace</span><span class="op" id="2951076">(</span><span class="ident" id="2951077">r</span><span class="op" id="2951078">)</span><span class="op" id="2951079">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951083">return</span>&nbsp;<span class="ident" id="2951090">lexSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951100">case</span>&nbsp;<span class="ident" id="2951105">r</span>&nbsp;<span class="op" id="2951107">==</span>&nbsp;<span class="string" id="2951110">&#39;:&#39;</span><span class="op" id="2951113">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951117">if</span>&nbsp;<span class="ident" id="2951120">l</span><span class="op" id="2951121">.</span><span class="ident" id="2951122">next</span><span class="op" id="2951126">(</span><span class="op" id="2951127">)</span>&nbsp;<span class="op" id="2951129">!=</span>&nbsp;<span class="string" id="2951132">&#39;=&#39;</span>&nbsp;<span class="op" id="2951136">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951141">return</span>&nbsp;<span class="ident" id="2951148">l</span><span class="op" id="2951149">.</span><span class="ident" id="2951150">errorf</span><span class="op" id="2951156">(</span><span class="string" id="2951157">&#34;expected&nbsp;:=&#34;</span><span class="op" id="2951170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951178">l</span><span class="op" id="2951179">.</span><span class="ident" id="2951180">emit</span><span class="op" id="2951184">(</span><span class="ident" id="2951185">itemColonEquals</span><span class="op" id="2951200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951203">case</span>&nbsp;<span class="ident" id="2951208">r</span>&nbsp;<span class="op" id="2951210">==</span>&nbsp;<span class="string" id="2951213">&#39;|&#39;</span><span class="op" id="2951216">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951220">l</span><span class="op" id="2951221">.</span><span class="ident" id="2951222">emit</span><span class="op" id="2951226">(</span><span class="ident" id="2951227">itemPipe</span><span class="op" id="2951235">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951238">case</span>&nbsp;<span class="ident" id="2951243">r</span>&nbsp;<span class="op" id="2951245">==</span>&nbsp;<span class="string" id="2951248">&#39;&#34;&#39;</span><span class="op" id="2951251">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951255">return</span>&nbsp;<span class="ident" id="2951262">lexQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951272">case</span>&nbsp;<span class="ident" id="2951277">r</span>&nbsp;<span class="op" id="2951279">==</span>&nbsp;<span class="string" id="2951282">&#39;`&#39;</span><span class="op" id="2951285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951289">return</span>&nbsp;<span class="ident" id="2951296">lexRawQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951309">case</span>&nbsp;<span class="ident" id="2951314">r</span>&nbsp;<span class="op" id="2951316">==</span>&nbsp;<span class="string" id="2951319">&#39;$&#39;</span><span class="op" id="2951322">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951326">return</span>&nbsp;<span class="ident" id="2951333">lexVariable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951346">case</span>&nbsp;<span class="ident" id="2951351">r</span>&nbsp;<span class="op" id="2951353">==</span>&nbsp;<span class="string" id="2951356">&#39;\&#39;&#39;</span><span class="op" id="2951360">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951364">return</span>&nbsp;<span class="ident" id="2951371">lexChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951380">case</span>&nbsp;<span class="ident" id="2951385">r</span>&nbsp;<span class="op" id="2951387">==</span>&nbsp;<span class="string" id="2951390">&#39;.&#39;</span><span class="op" id="2951393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951397">//&nbsp;special&nbsp;look-ahead&nbsp;for&nbsp;&#34;.field&#34;&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;break&nbsp;l.backup().</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951464">if</span>&nbsp;<span class="ident" id="2951467">l</span><span class="op" id="2951468">.</span><span class="ident" id="2951469">pos</span>&nbsp;<span class="op" id="2951473">&lt;</span>&nbsp;<span class="ident" id="2951475">Pos</span><span class="op" id="2951478">(</span><span class="builtinfunc" id="2951479">len</span><span class="op" id="2951482">(</span><span class="ident" id="2951483">l</span><span class="op" id="2951484">.</span><span class="ident" id="2951485">input</span><span class="op" id="2951490">)</span><span class="op" id="2951491">)</span>&nbsp;<span class="op" id="2951493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951498">r</span>&nbsp;<span class="op" id="2951500">:=</span>&nbsp;<span class="ident" id="2951503">l</span><span class="op" id="2951504">.</span><span class="ident" id="2951505">input</span><span class="op" id="2951510">[</span><span class="ident" id="2951511">l</span><span class="op" id="2951512">.</span><span class="ident" id="2951513">pos</span><span class="op" id="2951516">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951521">if</span>&nbsp;<span class="ident" id="2951524">r</span>&nbsp;<span class="op" id="2951526">&lt;</span>&nbsp;<span class="string" id="2951528">&#39;0&#39;</span>&nbsp;<span class="op" id="2951532">||</span>&nbsp;<span class="string" id="2951535">&#39;9&#39;</span>&nbsp;<span class="op" id="2951539">&lt;</span>&nbsp;<span class="ident" id="2951541">r</span>&nbsp;<span class="op" id="2951543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951549">return</span>&nbsp;<span class="ident" id="2951556">lexField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951568">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951576">fallthrough</span>&nbsp;<span class="comment" id="2951588">//&nbsp;&#39;.&#39;&nbsp;can&nbsp;start&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951616">case</span>&nbsp;<span class="ident" id="2951621">r</span>&nbsp;<span class="op" id="2951623">==</span>&nbsp;<span class="string" id="2951626">&#39;+&#39;</span>&nbsp;<span class="op" id="2951630">||</span>&nbsp;<span class="ident" id="2951633">r</span>&nbsp;<span class="op" id="2951635">==</span>&nbsp;<span class="string" id="2951638">&#39;-&#39;</span>&nbsp;<span class="op" id="2951642">||</span>&nbsp;<span class="op" id="2951645">(</span><span class="string" id="2951646">&#39;0&#39;</span>&nbsp;<span class="op" id="2951650">&lt;=</span>&nbsp;<span class="ident" id="2951653">r</span>&nbsp;<span class="op" id="2951655">&amp;&amp;</span>&nbsp;<span class="ident" id="2951658">r</span>&nbsp;<span class="op" id="2951660">&lt;=</span>&nbsp;<span class="string" id="2951663">&#39;9&#39;</span><span class="op" id="2951666">)</span><span class="op" id="2951667">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951671">l</span><span class="op" id="2951672">.</span><span class="ident" id="2951673">backup</span><span class="op" id="2951679">(</span><span class="op" id="2951680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951684">return</span>&nbsp;<span class="ident" id="2951691">lexNumber</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951702">case</span>&nbsp;<span class="ident" id="2951707">isAlphaNumeric</span><span class="op" id="2951721">(</span><span class="ident" id="2951722">r</span><span class="op" id="2951723">)</span><span class="op" id="2951724">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951728">l</span><span class="op" id="2951729">.</span><span class="ident" id="2951730">backup</span><span class="op" id="2951736">(</span><span class="op" id="2951737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951741">return</span>&nbsp;<span class="ident" id="2951748">lexIdentifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951763">case</span>&nbsp;<span class="ident" id="2951768">r</span>&nbsp;<span class="op" id="2951770">==</span>&nbsp;<span class="string" id="2951773">&#39;(&#39;</span><span class="op" id="2951776">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951780">l</span><span class="op" id="2951781">.</span><span class="ident" id="2951782">emit</span><span class="op" id="2951786">(</span><span class="ident" id="2951787">itemLeftParen</span><span class="op" id="2951800">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951804">l</span><span class="op" id="2951805">.</span><span class="ident" id="2951806">parenDepth</span><span class="op" id="2951816">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951821">return</span>&nbsp;<span class="ident" id="2951828">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951845">case</span>&nbsp;<span class="ident" id="2951850">r</span>&nbsp;<span class="op" id="2951852">==</span>&nbsp;<span class="string" id="2951855">&#39;)&#39;</span><span class="op" id="2951858">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951862">l</span><span class="op" id="2951863">.</span><span class="ident" id="2951864">emit</span><span class="op" id="2951868">(</span><span class="ident" id="2951869">itemRightParen</span><span class="op" id="2951883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951887">l</span><span class="op" id="2951888">.</span><span class="ident" id="2951889">parenDepth</span><span class="op" id="2951899">--</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951904">if</span>&nbsp;<span class="ident" id="2951907">l</span><span class="op" id="2951908">.</span><span class="ident" id="2951909">parenDepth</span>&nbsp;<span class="op" id="2951920">&lt;</span>&nbsp;<span class="num" id="2951922">0</span>&nbsp;<span class="op" id="2951924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951929">return</span>&nbsp;<span class="ident" id="2951936">l</span><span class="op" id="2951937">.</span><span class="ident" id="2951938">errorf</span><span class="op" id="2951944">(</span><span class="string" id="2951945">&#34;unexpected&nbsp;right&nbsp;paren&nbsp;%#U&#34;</span><span class="op" id="2951973">,</span>&nbsp;<span class="ident" id="2951975">r</span><span class="op" id="2951976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951984">return</span>&nbsp;<span class="ident" id="2951991">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952008">case</span>&nbsp;<span class="ident" id="2952013">r</span>&nbsp;<span class="op" id="2952015">&lt;=</span>&nbsp;<span class="ident" id="2952018">unicode</span><span class="op" id="2952025">.</span><span class="ident" id="2952026">MaxASCII</span>&nbsp;<span class="op" id="2952035">&amp;&amp;</span>&nbsp;<span class="ident" id="2952038">unicode</span><span class="op" id="2952045">.</span><span class="ident" id="2952046">IsPrint</span><span class="op" id="2952053">(</span><span class="ident" id="2952054">r</span><span class="op" id="2952055">)</span><span class="op" id="2952056">:</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952060">l</span><span class="op" id="2952061">.</span><span class="ident" id="2952062">emit</span><span class="op" id="2952066">(</span><span class="ident" id="2952067">itemChar</span><span class="op" id="2952075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952079">return</span>&nbsp;<span class="ident" id="2952086">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952103">default</span><span class="op" id="2952110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952114">return</span>&nbsp;<span class="ident" id="2952121">l</span><span class="op" id="2952122">.</span><span class="ident" id="2952123">errorf</span><span class="op" id="2952129">(</span><span class="string" id="2952130">&#34;unrecognized&nbsp;character&nbsp;in&nbsp;action:&nbsp;%#U&#34;</span><span class="op" id="2952169">,</span>&nbsp;<span class="ident" id="2952171">r</span><span class="op" id="2952172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952175">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952178">return</span>&nbsp;<span class="ident" id="2952185">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="2952201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2952204">//&nbsp;lexSpace&nbsp;scans&nbsp;a&nbsp;run&nbsp;of&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="2952249">//&nbsp;One&nbsp;space&nbsp;has&nbsp;already&nbsp;been&nbsp;seen.</span><br>
<span class="lineno">335</span><span class="keyword" id="2952285">func</span>&nbsp;<span class="ident" id="2952290">lexSpace</span><span class="op" id="2952298">(</span><span class="ident" id="2952299">l</span>&nbsp;<span class="op" id="2952301">*</span><span class="ident" id="2952302">lexer</span><span class="op" id="2952307">)</span>&nbsp;<span class="ident" id="2952309">stateFn</span>&nbsp;<span class="op" id="2952317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952320">for</span>&nbsp;<span class="ident" id="2952324">isSpace</span><span class="op" id="2952331">(</span><span class="ident" id="2952332">l</span><span class="op" id="2952333">.</span><span class="ident" id="2952334">peek</span><span class="op" id="2952338">(</span><span class="op" id="2952339">)</span><span class="op" id="2952340">)</span>&nbsp;<span class="op" id="2952342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952346">l</span><span class="op" id="2952347">.</span><span class="ident" id="2952348">next</span><span class="op" id="2952352">(</span><span class="op" id="2952353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952359">l</span><span class="op" id="2952360">.</span><span class="ident" id="2952361">emit</span><span class="op" id="2952365">(</span><span class="ident" id="2952366">itemSpace</span><span class="op" id="2952375">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952378">return</span>&nbsp;<span class="ident" id="2952385">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="2952401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2952404">//&nbsp;lexIdentifier&nbsp;scans&nbsp;an&nbsp;alphanumeric.</span><br>
<span class="lineno"></span><span class="keyword" id="2952444">func</span>&nbsp;<span class="ident" id="2952449">lexIdentifier</span><span class="op" id="2952462">(</span><span class="ident" id="2952463">l</span>&nbsp;<span class="op" id="2952465">*</span><span class="ident" id="2952466">lexer</span><span class="op" id="2952471">)</span>&nbsp;<span class="ident" id="2952473">stateFn</span>&nbsp;<span class="op" id="2952481">{</span><br>
<span class="lineno">345</span><span class="ident" id="2952483">Loop</span><span class="op" id="2952487">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952490">for</span>&nbsp;<span class="op" id="2952494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952498">switch</span>&nbsp;<span class="ident" id="2952505">r</span>&nbsp;<span class="op" id="2952507">:=</span>&nbsp;<span class="ident" id="2952510">l</span><span class="op" id="2952511">.</span><span class="ident" id="2952512">next</span><span class="op" id="2952516">(</span><span class="op" id="2952517">)</span><span class="op" id="2952518">;</span>&nbsp;<span class="op" id="2952520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952524">case</span>&nbsp;<span class="ident" id="2952529">isAlphaNumeric</span><span class="op" id="2952543">(</span><span class="ident" id="2952544">r</span><span class="op" id="2952545">)</span><span class="op" id="2952546">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2952551">//&nbsp;absorb.</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952564">default</span><span class="op" id="2952571">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952576">l</span><span class="op" id="2952577">.</span><span class="ident" id="2952578">backup</span><span class="op" id="2952584">(</span><span class="op" id="2952585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952590">word</span>&nbsp;<span class="op" id="2952595">:=</span>&nbsp;<span class="ident" id="2952598">l</span><span class="op" id="2952599">.</span><span class="ident" id="2952600">input</span><span class="op" id="2952605">[</span><span class="ident" id="2952606">l</span><span class="op" id="2952607">.</span><span class="ident" id="2952608">start</span><span class="op" id="2952613">:</span><span class="ident" id="2952614">l</span><span class="op" id="2952615">.</span><span class="ident" id="2952616">pos</span><span class="op" id="2952619">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952624">if</span>&nbsp;<span class="op" id="2952627">!</span><span class="ident" id="2952628">l</span><span class="op" id="2952629">.</span><span class="ident" id="2952630">atTerminator</span><span class="op" id="2952642">(</span><span class="op" id="2952643">)</span>&nbsp;<span class="op" id="2952645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952651">return</span>&nbsp;<span class="ident" id="2952658">l</span><span class="op" id="2952659">.</span><span class="ident" id="2952660">errorf</span><span class="op" id="2952666">(</span><span class="string" id="2952667">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="2952686">,</span>&nbsp;<span class="ident" id="2952688">r</span><span class="op" id="2952689">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952699">switch</span>&nbsp;<span class="op" id="2952706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952711">case</span>&nbsp;<span class="ident" id="2952716">key</span><span class="op" id="2952719">[</span><span class="ident" id="2952720">word</span><span class="op" id="2952724">]</span>&nbsp;<span class="op" id="2952726">&gt;</span>&nbsp;<span class="ident" id="2952728">itemKeyword</span><span class="op" id="2952739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952745">l</span><span class="op" id="2952746">.</span><span class="ident" id="2952747">emit</span><span class="op" id="2952751">(</span><span class="ident" id="2952752">key</span><span class="op" id="2952755">[</span><span class="ident" id="2952756">word</span><span class="op" id="2952760">]</span><span class="op" id="2952761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952766">case</span>&nbsp;<span class="ident" id="2952771">word</span><span class="op" id="2952775">[</span><span class="num" id="2952776">0</span><span class="op" id="2952777">]</span>&nbsp;<span class="op" id="2952779">==</span>&nbsp;<span class="string" id="2952782">&#39;.&#39;</span><span class="op" id="2952785">:</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952791">l</span><span class="op" id="2952792">.</span><span class="ident" id="2952793">emit</span><span class="op" id="2952797">(</span><span class="ident" id="2952798">itemField</span><span class="op" id="2952807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952812">case</span>&nbsp;<span class="ident" id="2952817">word</span>&nbsp;<span class="op" id="2952822">==</span>&nbsp;<span class="string" id="2952825">&#34;true&#34;</span><span class="op" id="2952831">,</span>&nbsp;<span class="ident" id="2952833">word</span>&nbsp;<span class="op" id="2952838">==</span>&nbsp;<span class="string" id="2952841">&#34;false&#34;</span><span class="op" id="2952848">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952854">l</span><span class="op" id="2952855">.</span><span class="ident" id="2952856">emit</span><span class="op" id="2952860">(</span><span class="ident" id="2952861">itemBool</span><span class="op" id="2952869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952874">default</span><span class="op" id="2952881">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952887">l</span><span class="op" id="2952888">.</span><span class="ident" id="2952889">emit</span><span class="op" id="2952893">(</span><span class="ident" id="2952894">itemIdentifier</span><span class="op" id="2952908">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952918">break</span>&nbsp;<span class="ident" id="2952924">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952937">return</span>&nbsp;<span class="ident" id="2952944">lexInsideAction</span><br>
<span class="lineno">370</span><span class="op" id="2952960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2952963">//&nbsp;lexField&nbsp;scans&nbsp;a&nbsp;field:&nbsp;.Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="2953005">//&nbsp;The&nbsp;.&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="2953032">func</span>&nbsp;<span class="ident" id="2953037">lexField</span><span class="op" id="2953045">(</span><span class="ident" id="2953046">l</span>&nbsp;<span class="op" id="2953048">*</span><span class="ident" id="2953049">lexer</span><span class="op" id="2953054">)</span>&nbsp;<span class="ident" id="2953056">stateFn</span>&nbsp;<span class="op" id="2953064">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953067">return</span>&nbsp;<span class="ident" id="2953074">lexFieldOrVariable</span><span class="op" id="2953092">(</span><span class="ident" id="2953093">l</span><span class="op" id="2953094">,</span>&nbsp;<span class="ident" id="2953096">itemField</span><span class="op" id="2953105">)</span><br>
<span class="lineno"></span><span class="op" id="2953107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2953110">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;Variable:&nbsp;$Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="2953158">//&nbsp;The&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">380</span><span class="keyword" id="2953185">func</span>&nbsp;<span class="ident" id="2953190">lexVariable</span><span class="op" id="2953201">(</span><span class="ident" id="2953202">l</span>&nbsp;<span class="op" id="2953204">*</span><span class="ident" id="2953205">lexer</span><span class="op" id="2953210">)</span>&nbsp;<span class="ident" id="2953212">stateFn</span>&nbsp;<span class="op" id="2953220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953223">if</span>&nbsp;<span class="ident" id="2953226">l</span><span class="op" id="2953227">.</span><span class="ident" id="2953228">atTerminator</span><span class="op" id="2953240">(</span><span class="op" id="2953241">)</span>&nbsp;<span class="op" id="2953243">{</span>&nbsp;<span class="comment" id="2953245">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953286">l</span><span class="op" id="2953287">.</span><span class="ident" id="2953288">emit</span><span class="op" id="2953292">(</span><span class="ident" id="2953293">itemVariable</span><span class="op" id="2953305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953309">return</span>&nbsp;<span class="ident" id="2953316">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953333">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953336">return</span>&nbsp;<span class="ident" id="2953343">lexFieldOrVariable</span><span class="op" id="2953361">(</span><span class="ident" id="2953362">l</span><span class="op" id="2953363">,</span>&nbsp;<span class="ident" id="2953365">itemVariable</span><span class="op" id="2953377">)</span><br>
<span class="lineno"></span><span class="op" id="2953379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2953382">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;field&nbsp;or&nbsp;variable:&nbsp;[.$]Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="2953442">//&nbsp;The&nbsp;.&nbsp;or&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">390</span><span class="keyword" id="2953474">func</span>&nbsp;<span class="ident" id="2953479">lexFieldOrVariable</span><span class="op" id="2953497">(</span><span class="ident" id="2953498">l</span>&nbsp;<span class="op" id="2953500">*</span><span class="ident" id="2953501">lexer</span><span class="op" id="2953506">,</span>&nbsp;<span class="ident" id="2953508">typ</span>&nbsp;<span class="ident" id="2953512">itemType</span><span class="op" id="2953520">)</span>&nbsp;<span class="ident" id="2953522">stateFn</span>&nbsp;<span class="op" id="2953530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953533">if</span>&nbsp;<span class="ident" id="2953536">l</span><span class="op" id="2953537">.</span><span class="ident" id="2953538">atTerminator</span><span class="op" id="2953550">(</span><span class="op" id="2953551">)</span>&nbsp;<span class="op" id="2953553">{</span>&nbsp;<span class="comment" id="2953555">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;.&#34;&nbsp;or&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953603">if</span>&nbsp;<span class="ident" id="2953606">typ</span>&nbsp;<span class="op" id="2953610">==</span>&nbsp;<span class="ident" id="2953613">itemVariable</span>&nbsp;<span class="op" id="2953626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953631">l</span><span class="op" id="2953632">.</span><span class="ident" id="2953633">emit</span><span class="op" id="2953637">(</span><span class="ident" id="2953638">itemVariable</span><span class="op" id="2953650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953654">}</span>&nbsp;<span class="keyword" id="2953656">else</span>&nbsp;<span class="op" id="2953661">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953666">l</span><span class="op" id="2953667">.</span><span class="ident" id="2953668">emit</span><span class="op" id="2953672">(</span><span class="ident" id="2953673">itemDot</span><span class="op" id="2953680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953688">return</span>&nbsp;<span class="ident" id="2953695">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953715">var</span>&nbsp;<span class="ident" id="2953719">r</span>&nbsp;<span class="builtintype" id="2953721">rune</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953727">for</span>&nbsp;<span class="op" id="2953731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953735">r</span>&nbsp;<span class="op" id="2953737">=</span>&nbsp;<span class="ident" id="2953739">l</span><span class="op" id="2953740">.</span><span class="ident" id="2953741">next</span><span class="op" id="2953745">(</span><span class="op" id="2953746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953750">if</span>&nbsp;<span class="op" id="2953753">!</span><span class="ident" id="2953754">isAlphaNumeric</span><span class="op" id="2953768">(</span><span class="ident" id="2953769">r</span><span class="op" id="2953770">)</span>&nbsp;<span class="op" id="2953772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953777">l</span><span class="op" id="2953778">.</span><span class="ident" id="2953779">backup</span><span class="op" id="2953785">(</span><span class="op" id="2953786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953791">break</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953805">if</span>&nbsp;<span class="op" id="2953808">!</span><span class="ident" id="2953809">l</span><span class="op" id="2953810">.</span><span class="ident" id="2953811">atTerminator</span><span class="op" id="2953823">(</span><span class="op" id="2953824">)</span>&nbsp;<span class="op" id="2953826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953830">return</span>&nbsp;<span class="ident" id="2953837">l</span><span class="op" id="2953838">.</span><span class="ident" id="2953839">errorf</span><span class="op" id="2953845">(</span><span class="string" id="2953846">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="2953865">,</span>&nbsp;<span class="ident" id="2953867">r</span><span class="op" id="2953868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953871">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953874">l</span><span class="op" id="2953875">.</span><span class="ident" id="2953876">emit</span><span class="op" id="2953880">(</span><span class="ident" id="2953881">typ</span><span class="op" id="2953884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953887">return</span>&nbsp;<span class="ident" id="2953894">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="2953910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2953913">//&nbsp;atTerminator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;valid&nbsp;termination&nbsp;character&nbsp;to</span><br>
<span class="lineno">415</span><span class="comment" id="2953992">//&nbsp;appear&nbsp;after&nbsp;an&nbsp;identifier.&nbsp;Breaks&nbsp;.X.Y&nbsp;into&nbsp;two&nbsp;pieces.&nbsp;Also&nbsp;catches&nbsp;cases</span><br>
<span class="lineno"></span><span class="comment" id="2954071">//&nbsp;like&nbsp;&#34;$x+2&#34;&nbsp;not&nbsp;being&nbsp;acceptable&nbsp;without&nbsp;a&nbsp;space,&nbsp;in&nbsp;case&nbsp;we&nbsp;decide&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="2954146">//&nbsp;day&nbsp;to&nbsp;implement&nbsp;arithmetic.</span><br>
<span class="lineno"></span><span class="keyword" id="2954178">func</span>&nbsp;<span class="op" id="2954183">(</span><span class="ident" id="2954184">l</span>&nbsp;<span class="op" id="2954186">*</span><span class="ident" id="2954187">lexer</span><span class="op" id="2954192">)</span>&nbsp;<span class="ident" id="2954194">atTerminator</span><span class="op" id="2954206">(</span><span class="op" id="2954207">)</span>&nbsp;<span class="builtintype" id="2954209">bool</span>&nbsp;<span class="op" id="2954214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954217">r</span>&nbsp;<span class="op" id="2954219">:=</span>&nbsp;<span class="ident" id="2954222">l</span><span class="op" id="2954223">.</span><span class="ident" id="2954224">peek</span><span class="op" id="2954228">(</span><span class="op" id="2954229">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954232">if</span>&nbsp;<span class="ident" id="2954235">isSpace</span><span class="op" id="2954242">(</span><span class="ident" id="2954243">r</span><span class="op" id="2954244">)</span>&nbsp;<span class="op" id="2954246">||</span>&nbsp;<span class="ident" id="2954249">isEndOfLine</span><span class="op" id="2954260">(</span><span class="ident" id="2954261">r</span><span class="op" id="2954262">)</span>&nbsp;<span class="op" id="2954264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954268">return</span>&nbsp;<span class="builtintype" id="2954275">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954284">switch</span>&nbsp;<span class="ident" id="2954291">r</span>&nbsp;<span class="op" id="2954293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954296">case</span>&nbsp;<span class="ident" id="2954301">eof</span><span class="op" id="2954304">,</span>&nbsp;<span class="string" id="2954306">&#39;.&#39;</span><span class="op" id="2954309">,</span>&nbsp;<span class="string" id="2954311">&#39;,&#39;</span><span class="op" id="2954314">,</span>&nbsp;<span class="string" id="2954316">&#39;|&#39;</span><span class="op" id="2954319">,</span>&nbsp;<span class="string" id="2954321">&#39;:&#39;</span><span class="op" id="2954324">,</span>&nbsp;<span class="string" id="2954326">&#39;)&#39;</span><span class="op" id="2954329">,</span>&nbsp;<span class="string" id="2954331">&#39;(&#39;</span><span class="op" id="2954334">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954338">return</span>&nbsp;<span class="builtintype" id="2954345">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954354">//&nbsp;Does&nbsp;r&nbsp;start&nbsp;the&nbsp;delimiter?&nbsp;This&nbsp;can&nbsp;be&nbsp;ambiguous&nbsp;(with&nbsp;delim==&#34;//&#34;,&nbsp;$x/2&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954437">//&nbsp;succeed&nbsp;but&nbsp;should&nbsp;fail)&nbsp;but&nbsp;only&nbsp;in&nbsp;extremely&nbsp;rare&nbsp;cases&nbsp;caused&nbsp;by&nbsp;willfully</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954519">//&nbsp;bad&nbsp;choice&nbsp;of&nbsp;delimiter.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954548">if</span>&nbsp;<span class="ident" id="2954551">rd</span><span class="op" id="2954553">,</span>&nbsp;<span class="ident" id="2954555">_</span>&nbsp;<span class="op" id="2954557">:=</span>&nbsp;<span class="ident" id="2954560">utf8</span><span class="op" id="2954564">.</span><span class="ident" id="2954565">DecodeRuneInString</span><span class="op" id="2954583">(</span><span class="ident" id="2954584">l</span><span class="op" id="2954585">.</span><span class="ident" id="2954586">rightDelim</span><span class="op" id="2954596">)</span><span class="op" id="2954597">;</span>&nbsp;<span class="ident" id="2954599">rd</span>&nbsp;<span class="op" id="2954602">==</span>&nbsp;<span class="ident" id="2954605">r</span>&nbsp;<span class="op" id="2954607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954611">return</span>&nbsp;<span class="builtintype" id="2954618">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954627">return</span>&nbsp;<span class="builtintype" id="2954634">false</span><br>
<span class="lineno"></span><span class="op" id="2954640">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="2954643">//&nbsp;lexChar&nbsp;scans&nbsp;a&nbsp;character&nbsp;constant.&nbsp;The&nbsp;initial&nbsp;quote&nbsp;is&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="2954711">//&nbsp;scanned.&nbsp;Syntax&nbsp;checking&nbsp;is&nbsp;done&nbsp;by&nbsp;the&nbsp;parser.</span><br>
<span class="lineno"></span><span class="keyword" id="2954762">func</span>&nbsp;<span class="ident" id="2954767">lexChar</span><span class="op" id="2954774">(</span><span class="ident" id="2954775">l</span>&nbsp;<span class="op" id="2954777">*</span><span class="ident" id="2954778">lexer</span><span class="op" id="2954783">)</span>&nbsp;<span class="ident" id="2954785">stateFn</span>&nbsp;<span class="op" id="2954793">{</span><br>
<span class="lineno"></span><span class="ident" id="2954795">Loop</span><span class="op" id="2954799">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954802">for</span>&nbsp;<span class="op" id="2954806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954810">switch</span>&nbsp;<span class="ident" id="2954817">l</span><span class="op" id="2954818">.</span><span class="ident" id="2954819">next</span><span class="op" id="2954823">(</span><span class="op" id="2954824">)</span>&nbsp;<span class="op" id="2954826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954830">case</span>&nbsp;<span class="string" id="2954835">&#39;\\&#39;</span><span class="op" id="2954839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954844">if</span>&nbsp;<span class="ident" id="2954847">r</span>&nbsp;<span class="op" id="2954849">:=</span>&nbsp;<span class="ident" id="2954852">l</span><span class="op" id="2954853">.</span><span class="ident" id="2954854">next</span><span class="op" id="2954858">(</span><span class="op" id="2954859">)</span><span class="op" id="2954860">;</span>&nbsp;<span class="ident" id="2954862">r</span>&nbsp;<span class="op" id="2954864">!=</span>&nbsp;<span class="ident" id="2954867">eof</span>&nbsp;<span class="op" id="2954871">&amp;&amp;</span>&nbsp;<span class="ident" id="2954874">r</span>&nbsp;<span class="op" id="2954876">!=</span>&nbsp;<span class="string" id="2954879">&#39;\n&#39;</span>&nbsp;<span class="op" id="2954884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954890">break</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954904">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954918">case</span>&nbsp;<span class="ident" id="2954923">eof</span><span class="op" id="2954926">,</span>&nbsp;<span class="string" id="2954928">&#39;\n&#39;</span><span class="op" id="2954932">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954937">return</span>&nbsp;<span class="ident" id="2954944">l</span><span class="op" id="2954945">.</span><span class="ident" id="2954946">errorf</span><span class="op" id="2954952">(</span><span class="string" id="2954953">&#34;unterminated&nbsp;character&nbsp;constant&#34;</span><span class="op" id="2954986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954990">case</span>&nbsp;<span class="string" id="2954995">&#39;\&#39;&#39;</span><span class="op" id="2954999">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955004">break</span>&nbsp;<span class="ident" id="2955010">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955023">l</span><span class="op" id="2955024">.</span><span class="ident" id="2955025">emit</span><span class="op" id="2955029">(</span><span class="ident" id="2955030">itemCharConstant</span><span class="op" id="2955046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955049">return</span>&nbsp;<span class="ident" id="2955056">lexInsideAction</span><br>
<span class="lineno">455</span><span class="op" id="2955072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2955075">//&nbsp;lexNumber&nbsp;scans&nbsp;a&nbsp;number:&nbsp;decimal,&nbsp;octal,&nbsp;hex,&nbsp;float,&nbsp;or&nbsp;imaginary.&nbsp;This</span><br>
<span class="lineno"></span><span class="comment" id="2955151">//&nbsp;isn&#39;t&nbsp;a&nbsp;perfect&nbsp;number&nbsp;scanner&nbsp;-&nbsp;for&nbsp;instance&nbsp;it&nbsp;accepts&nbsp;&#34;.&#34;&nbsp;and&nbsp;&#34;0x0.2&#34;</span><br>
<span class="lineno"></span><span class="comment" id="2955227">//&nbsp;and&nbsp;&#34;089&#34;&nbsp;-&nbsp;but&nbsp;when&nbsp;it&#39;s&nbsp;wrong&nbsp;the&nbsp;input&nbsp;is&nbsp;invalid&nbsp;and&nbsp;the&nbsp;parser&nbsp;(via</span><br>
<span class="lineno">460</span><span class="comment" id="2955303">//&nbsp;strconv)&nbsp;will&nbsp;notice.</span><br>
<span class="lineno"></span><span class="keyword" id="2955328">func</span>&nbsp;<span class="ident" id="2955333">lexNumber</span><span class="op" id="2955342">(</span><span class="ident" id="2955343">l</span>&nbsp;<span class="op" id="2955345">*</span><span class="ident" id="2955346">lexer</span><span class="op" id="2955351">)</span>&nbsp;<span class="ident" id="2955353">stateFn</span>&nbsp;<span class="op" id="2955361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955364">if</span>&nbsp;<span class="op" id="2955367">!</span><span class="ident" id="2955368">l</span><span class="op" id="2955369">.</span><span class="ident" id="2955370">scanNumber</span><span class="op" id="2955380">(</span><span class="op" id="2955381">)</span>&nbsp;<span class="op" id="2955383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955387">return</span>&nbsp;<span class="ident" id="2955394">l</span><span class="op" id="2955395">.</span><span class="ident" id="2955396">errorf</span><span class="op" id="2955402">(</span><span class="string" id="2955403">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="2955426">,</span>&nbsp;<span class="ident" id="2955428">l</span><span class="op" id="2955429">.</span><span class="ident" id="2955430">input</span><span class="op" id="2955435">[</span><span class="ident" id="2955436">l</span><span class="op" id="2955437">.</span><span class="ident" id="2955438">start</span><span class="op" id="2955443">:</span><span class="ident" id="2955444">l</span><span class="op" id="2955445">.</span><span class="ident" id="2955446">pos</span><span class="op" id="2955449">]</span><span class="op" id="2955450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955453">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955456">if</span>&nbsp;<span class="ident" id="2955459">sign</span>&nbsp;<span class="op" id="2955464">:=</span>&nbsp;<span class="ident" id="2955467">l</span><span class="op" id="2955468">.</span><span class="ident" id="2955469">peek</span><span class="op" id="2955473">(</span><span class="op" id="2955474">)</span><span class="op" id="2955475">;</span>&nbsp;<span class="ident" id="2955477">sign</span>&nbsp;<span class="op" id="2955482">==</span>&nbsp;<span class="string" id="2955485">&#39;+&#39;</span>&nbsp;<span class="op" id="2955489">||</span>&nbsp;<span class="ident" id="2955492">sign</span>&nbsp;<span class="op" id="2955497">==</span>&nbsp;<span class="string" id="2955500">&#39;-&#39;</span>&nbsp;<span class="op" id="2955504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955508">//&nbsp;Complex:&nbsp;1+2i.&nbsp;No&nbsp;spaces,&nbsp;must&nbsp;end&nbsp;in&nbsp;&#39;i&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955556">if</span>&nbsp;<span class="op" id="2955559">!</span><span class="ident" id="2955560">l</span><span class="op" id="2955561">.</span><span class="ident" id="2955562">scanNumber</span><span class="op" id="2955572">(</span><span class="op" id="2955573">)</span>&nbsp;<span class="op" id="2955575">||</span>&nbsp;<span class="ident" id="2955578">l</span><span class="op" id="2955579">.</span><span class="ident" id="2955580">input</span><span class="op" id="2955585">[</span><span class="ident" id="2955586">l</span><span class="op" id="2955587">.</span><span class="ident" id="2955588">pos</span><span class="op" id="2955591">-</span><span class="num" id="2955592">1</span><span class="op" id="2955593">]</span>&nbsp;<span class="op" id="2955595">!=</span>&nbsp;<span class="string" id="2955598">&#39;i&#39;</span>&nbsp;<span class="op" id="2955602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955607">return</span>&nbsp;<span class="ident" id="2955614">l</span><span class="op" id="2955615">.</span><span class="ident" id="2955616">errorf</span><span class="op" id="2955622">(</span><span class="string" id="2955623">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="2955646">,</span>&nbsp;<span class="ident" id="2955648">l</span><span class="op" id="2955649">.</span><span class="ident" id="2955650">input</span><span class="op" id="2955655">[</span><span class="ident" id="2955656">l</span><span class="op" id="2955657">.</span><span class="ident" id="2955658">start</span><span class="op" id="2955663">:</span><span class="ident" id="2955664">l</span><span class="op" id="2955665">.</span><span class="ident" id="2955666">pos</span><span class="op" id="2955669">]</span><span class="op" id="2955670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955674">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955678">l</span><span class="op" id="2955679">.</span><span class="ident" id="2955680">emit</span><span class="op" id="2955684">(</span><span class="ident" id="2955685">itemComplex</span><span class="op" id="2955696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955699">}</span>&nbsp;<span class="keyword" id="2955701">else</span>&nbsp;<span class="op" id="2955706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955710">l</span><span class="op" id="2955711">.</span><span class="ident" id="2955712">emit</span><span class="op" id="2955716">(</span><span class="ident" id="2955717">itemNumber</span><span class="op" id="2955727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955733">return</span>&nbsp;<span class="ident" id="2955740">lexInsideAction</span><br>
<span class="lineno">475</span><span class="op" id="2955756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2955759">func</span>&nbsp;<span class="op" id="2955764">(</span><span class="ident" id="2955765">l</span>&nbsp;<span class="op" id="2955767">*</span><span class="ident" id="2955768">lexer</span><span class="op" id="2955773">)</span>&nbsp;<span class="ident" id="2955775">scanNumber</span><span class="op" id="2955785">(</span><span class="op" id="2955786">)</span>&nbsp;<span class="builtintype" id="2955788">bool</span>&nbsp;<span class="op" id="2955793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955796">//&nbsp;Optional&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955823">l</span><span class="op" id="2955824">.</span><span class="ident" id="2955825">accept</span><span class="op" id="2955831">(</span><span class="string" id="2955832">&#34;+-&#34;</span><span class="op" id="2955836">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955839">//&nbsp;Is&nbsp;it&nbsp;hex?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955854">digits</span>&nbsp;<span class="op" id="2955861">:=</span>&nbsp;<span class="string" id="2955864">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955878">if</span>&nbsp;<span class="ident" id="2955881">l</span><span class="op" id="2955882">.</span><span class="ident" id="2955883">accept</span><span class="op" id="2955889">(</span><span class="string" id="2955890">&#34;0&#34;</span><span class="op" id="2955893">)</span>&nbsp;<span class="op" id="2955895">&amp;&amp;</span>&nbsp;<span class="ident" id="2955898">l</span><span class="op" id="2955899">.</span><span class="ident" id="2955900">accept</span><span class="op" id="2955906">(</span><span class="string" id="2955907">&#34;xX&#34;</span><span class="op" id="2955911">)</span>&nbsp;<span class="op" id="2955913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955917">digits</span>&nbsp;<span class="op" id="2955924">=</span>&nbsp;<span class="string" id="2955926">&#34;0123456789abcdefABCDEF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955952">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955955">l</span><span class="op" id="2955956">.</span><span class="ident" id="2955957">acceptRun</span><span class="op" id="2955966">(</span><span class="ident" id="2955967">digits</span><span class="op" id="2955973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955976">if</span>&nbsp;<span class="ident" id="2955979">l</span><span class="op" id="2955980">.</span><span class="ident" id="2955981">accept</span><span class="op" id="2955987">(</span><span class="string" id="2955988">&#34;.&#34;</span><span class="op" id="2955991">)</span>&nbsp;<span class="op" id="2955993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955997">l</span><span class="op" id="2955998">.</span><span class="ident" id="2955999">acceptRun</span><span class="op" id="2956008">(</span><span class="ident" id="2956009">digits</span><span class="op" id="2956015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956021">if</span>&nbsp;<span class="ident" id="2956024">l</span><span class="op" id="2956025">.</span><span class="ident" id="2956026">accept</span><span class="op" id="2956032">(</span><span class="string" id="2956033">&#34;eE&#34;</span><span class="op" id="2956037">)</span>&nbsp;<span class="op" id="2956039">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956043">l</span><span class="op" id="2956044">.</span><span class="ident" id="2956045">accept</span><span class="op" id="2956051">(</span><span class="string" id="2956052">&#34;+-&#34;</span><span class="op" id="2956056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956060">l</span><span class="op" id="2956061">.</span><span class="ident" id="2956062">acceptRun</span><span class="op" id="2956071">(</span><span class="string" id="2956072">&#34;0123456789&#34;</span><span class="op" id="2956084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956090">//&nbsp;Is&nbsp;it&nbsp;imaginary?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956111">l</span><span class="op" id="2956112">.</span><span class="ident" id="2956113">accept</span><span class="op" id="2956119">(</span><span class="string" id="2956120">&#34;i&#34;</span><span class="op" id="2956123">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956126">//&nbsp;Next&nbsp;thing&nbsp;mustn&#39;t&nbsp;be&nbsp;alphanumeric.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956166">if</span>&nbsp;<span class="ident" id="2956169">isAlphaNumeric</span><span class="op" id="2956183">(</span><span class="ident" id="2956184">l</span><span class="op" id="2956185">.</span><span class="ident" id="2956186">peek</span><span class="op" id="2956190">(</span><span class="op" id="2956191">)</span><span class="op" id="2956192">)</span>&nbsp;<span class="op" id="2956194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956198">l</span><span class="op" id="2956199">.</span><span class="ident" id="2956200">next</span><span class="op" id="2956204">(</span><span class="op" id="2956205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956209">return</span>&nbsp;<span class="builtintype" id="2956216">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956223">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956226">return</span>&nbsp;<span class="builtintype" id="2956233">true</span><br>
<span class="lineno"></span><span class="op" id="2956238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2956241">//&nbsp;lexQuote&nbsp;scans&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2956276">func</span>&nbsp;<span class="ident" id="2956281">lexQuote</span><span class="op" id="2956289">(</span><span class="ident" id="2956290">l</span>&nbsp;<span class="op" id="2956292">*</span><span class="ident" id="2956293">lexer</span><span class="op" id="2956298">)</span>&nbsp;<span class="ident" id="2956300">stateFn</span>&nbsp;<span class="op" id="2956308">{</span><br>
<span class="lineno">505</span><span class="ident" id="2956310">Loop</span><span class="op" id="2956314">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956317">for</span>&nbsp;<span class="op" id="2956321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956325">switch</span>&nbsp;<span class="ident" id="2956332">l</span><span class="op" id="2956333">.</span><span class="ident" id="2956334">next</span><span class="op" id="2956338">(</span><span class="op" id="2956339">)</span>&nbsp;<span class="op" id="2956341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956345">case</span>&nbsp;<span class="string" id="2956350">&#39;\\&#39;</span><span class="op" id="2956354">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956359">if</span>&nbsp;<span class="ident" id="2956362">r</span>&nbsp;<span class="op" id="2956364">:=</span>&nbsp;<span class="ident" id="2956367">l</span><span class="op" id="2956368">.</span><span class="ident" id="2956369">next</span><span class="op" id="2956373">(</span><span class="op" id="2956374">)</span><span class="op" id="2956375">;</span>&nbsp;<span class="ident" id="2956377">r</span>&nbsp;<span class="op" id="2956379">!=</span>&nbsp;<span class="ident" id="2956382">eof</span>&nbsp;<span class="op" id="2956386">&amp;&amp;</span>&nbsp;<span class="ident" id="2956389">r</span>&nbsp;<span class="op" id="2956391">!=</span>&nbsp;<span class="string" id="2956394">&#39;\n&#39;</span>&nbsp;<span class="op" id="2956399">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956405">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956419">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956433">case</span>&nbsp;<span class="ident" id="2956438">eof</span><span class="op" id="2956441">,</span>&nbsp;<span class="string" id="2956443">&#39;\n&#39;</span><span class="op" id="2956447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956452">return</span>&nbsp;<span class="ident" id="2956459">l</span><span class="op" id="2956460">.</span><span class="ident" id="2956461">errorf</span><span class="op" id="2956467">(</span><span class="string" id="2956468">&#34;unterminated&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="2956496">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956500">case</span>&nbsp;<span class="string" id="2956505">&#39;&#34;&#39;</span><span class="op" id="2956508">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956513">break</span>&nbsp;<span class="ident" id="2956519">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956532">l</span><span class="op" id="2956533">.</span><span class="ident" id="2956534">emit</span><span class="op" id="2956538">(</span><span class="ident" id="2956539">itemString</span><span class="op" id="2956549">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956552">return</span>&nbsp;<span class="ident" id="2956559">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="2956575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2956578">//&nbsp;lexRawQuote&nbsp;scans&nbsp;a&nbsp;raw&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2956620">func</span>&nbsp;<span class="ident" id="2956625">lexRawQuote</span><span class="op" id="2956636">(</span><span class="ident" id="2956637">l</span>&nbsp;<span class="op" id="2956639">*</span><span class="ident" id="2956640">lexer</span><span class="op" id="2956645">)</span>&nbsp;<span class="ident" id="2956647">stateFn</span>&nbsp;<span class="op" id="2956655">{</span><br>
<span class="lineno">525</span><span class="ident" id="2956657">Loop</span><span class="op" id="2956661">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956664">for</span>&nbsp;<span class="op" id="2956668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956672">switch</span>&nbsp;<span class="ident" id="2956679">l</span><span class="op" id="2956680">.</span><span class="ident" id="2956681">next</span><span class="op" id="2956685">(</span><span class="op" id="2956686">)</span>&nbsp;<span class="op" id="2956688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956692">case</span>&nbsp;<span class="ident" id="2956697">eof</span><span class="op" id="2956700">,</span>&nbsp;<span class="string" id="2956702">&#39;\n&#39;</span><span class="op" id="2956706">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956711">return</span>&nbsp;<span class="ident" id="2956718">l</span><span class="op" id="2956719">.</span><span class="ident" id="2956720">errorf</span><span class="op" id="2956726">(</span><span class="string" id="2956727">&#34;unterminated&nbsp;raw&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="2956759">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956763">case</span>&nbsp;<span class="string" id="2956768">&#39;`&#39;</span><span class="op" id="2956771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956776">break</span>&nbsp;<span class="ident" id="2956782">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956795">l</span><span class="op" id="2956796">.</span><span class="ident" id="2956797">emit</span><span class="op" id="2956801">(</span><span class="ident" id="2956802">itemRawString</span><span class="op" id="2956815">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956818">return</span>&nbsp;<span class="ident" id="2956825">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="2956841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2956844">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;a&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="2956895">func</span>&nbsp;<span class="ident" id="2956900">isSpace</span><span class="op" id="2956907">(</span><span class="ident" id="2956908">r</span>&nbsp;<span class="builtintype" id="2956910">rune</span><span class="op" id="2956914">)</span>&nbsp;<span class="builtintype" id="2956916">bool</span>&nbsp;<span class="op" id="2956921">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956924">return</span>&nbsp;<span class="ident" id="2956931">r</span>&nbsp;<span class="op" id="2956933">==</span>&nbsp;<span class="string" id="2956936">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="2956940">||</span>&nbsp;<span class="ident" id="2956943">r</span>&nbsp;<span class="op" id="2956945">==</span>&nbsp;<span class="string" id="2956948">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="2956953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2956956">//&nbsp;isEndOfLine&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;end-of-line&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="2957018">func</span>&nbsp;<span class="ident" id="2957023">isEndOfLine</span><span class="op" id="2957034">(</span><span class="ident" id="2957035">r</span>&nbsp;<span class="builtintype" id="2957037">rune</span><span class="op" id="2957041">)</span>&nbsp;<span class="builtintype" id="2957043">bool</span>&nbsp;<span class="op" id="2957048">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957051">return</span>&nbsp;<span class="ident" id="2957058">r</span>&nbsp;<span class="op" id="2957060">==</span>&nbsp;<span class="string" id="2957063">&#39;\r&#39;</span>&nbsp;<span class="op" id="2957068">||</span>&nbsp;<span class="ident" id="2957071">r</span>&nbsp;<span class="op" id="2957073">==</span>&nbsp;<span class="string" id="2957076">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="2957081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2957084">//&nbsp;isAlphaNumeric&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;alphabetic,&nbsp;digit,&nbsp;or&nbsp;underscore.</span><br>
<span class="lineno"></span><span class="keyword" id="2957160">func</span>&nbsp;<span class="ident" id="2957165">isAlphaNumeric</span><span class="op" id="2957179">(</span><span class="ident" id="2957180">r</span>&nbsp;<span class="builtintype" id="2957182">rune</span><span class="op" id="2957186">)</span>&nbsp;<span class="builtintype" id="2957188">bool</span>&nbsp;<span class="op" id="2957193">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957196">return</span>&nbsp;<span class="ident" id="2957203">r</span>&nbsp;<span class="op" id="2957205">==</span>&nbsp;<span class="string" id="2957208">&#39;_&#39;</span>&nbsp;<span class="op" id="2957212">||</span>&nbsp;<span class="ident" id="2957215">unicode</span><span class="op" id="2957222">.</span><span class="ident" id="2957223">IsLetter</span><span class="op" id="2957231">(</span><span class="ident" id="2957232">r</span><span class="op" id="2957233">)</span>&nbsp;<span class="op" id="2957235">||</span>&nbsp;<span class="ident" id="2957238">unicode</span><span class="op" id="2957245">.</span><span class="ident" id="2957246">IsDigit</span><span class="op" id="2957253">(</span><span class="ident" id="2957254">r</span><span class="op" id="2957255">)</span><br>
<span class="lineno"></span><span class="op" id="2957257">}</span>
</div>
</body>
</html>
