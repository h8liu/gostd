<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html" class="current">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6787994">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6788049">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6788103">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6788154">package</span>&nbsp;<span class="ident" id="6788162">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6788168">import</span>&nbsp;<span class="op" id="6788175">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6788178">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6788187">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6788202">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6788215">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6788221">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6788231">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6788234">func</span>&nbsp;<span class="ident" id="6788239">eq</span><span class="op" id="6788241">(</span><span class="ident" id="6788242">c0</span><span class="op" id="6788244">,</span>&nbsp;<span class="ident" id="6788246">c1</span>&nbsp;<span class="ident" id="6788249">color</span><span class="op" id="6788254">.</span><span class="ident" id="6788255">Color</span><span class="op" id="6788260">)</span>&nbsp;<span class="builtintype" id="6788262">bool</span>&nbsp;<span class="op" id="6788267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788270">r0</span><span class="op" id="6788272">,</span>&nbsp;<span class="ident" id="6788274">g0</span><span class="op" id="6788276">,</span>&nbsp;<span class="ident" id="6788278">b0</span><span class="op" id="6788280">,</span>&nbsp;<span class="ident" id="6788282">a0</span>&nbsp;<span class="op" id="6788285">:=</span>&nbsp;<span class="ident" id="6788288">c0</span><span class="op" id="6788290">.</span><span class="ident" id="6788291">RGBA</span><span class="op" id="6788295">(</span><span class="op" id="6788296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788299">r1</span><span class="op" id="6788301">,</span>&nbsp;<span class="ident" id="6788303">g1</span><span class="op" id="6788305">,</span>&nbsp;<span class="ident" id="6788307">b1</span><span class="op" id="6788309">,</span>&nbsp;<span class="ident" id="6788311">a1</span>&nbsp;<span class="op" id="6788314">:=</span>&nbsp;<span class="ident" id="6788317">c1</span><span class="op" id="6788319">.</span><span class="ident" id="6788320">RGBA</span><span class="op" id="6788324">(</span><span class="op" id="6788325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788328">return</span>&nbsp;<span class="ident" id="6788335">r0</span>&nbsp;<span class="op" id="6788338">==</span>&nbsp;<span class="ident" id="6788341">r1</span>&nbsp;<span class="op" id="6788344">&amp;&amp;</span>&nbsp;<span class="ident" id="6788347">g0</span>&nbsp;<span class="op" id="6788350">==</span>&nbsp;<span class="ident" id="6788353">g1</span>&nbsp;<span class="op" id="6788356">&amp;&amp;</span>&nbsp;<span class="ident" id="6788359">b0</span>&nbsp;<span class="op" id="6788362">==</span>&nbsp;<span class="ident" id="6788365">b1</span>&nbsp;<span class="op" id="6788368">&amp;&amp;</span>&nbsp;<span class="ident" id="6788371">a0</span>&nbsp;<span class="op" id="6788374">==</span>&nbsp;<span class="ident" id="6788377">a1</span><br>
<span class="lineno"></span><span class="op" id="6788380">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6788383">func</span>&nbsp;<span class="ident" id="6788388">fillBlue</span><span class="op" id="6788396">(</span><span class="ident" id="6788397">alpha</span>&nbsp;<span class="builtintype" id="6788403">int</span><span class="op" id="6788406">)</span>&nbsp;<span class="ident" id="6788408">image</span><span class="op" id="6788413">.</span><span class="ident" id="6788414">Image</span>&nbsp;<span class="op" id="6788420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788423">return</span>&nbsp;<span class="ident" id="6788430">image</span><span class="op" id="6788435">.</span><span class="ident" id="6788436">NewUniform</span><span class="op" id="6788446">(</span><span class="ident" id="6788447">color</span><span class="op" id="6788452">.</span><span class="ident" id="6788453">RGBA</span><span class="op" id="6788457">{</span><span class="num" id="6788458">0</span><span class="op" id="6788459">,</span>&nbsp;<span class="num" id="6788461">0</span><span class="op" id="6788462">,</span>&nbsp;<span class="builtintype" id="6788464">uint8</span><span class="op" id="6788469">(</span><span class="ident" id="6788470">alpha</span><span class="op" id="6788475">)</span><span class="op" id="6788476">,</span>&nbsp;<span class="builtintype" id="6788478">uint8</span><span class="op" id="6788483">(</span><span class="ident" id="6788484">alpha</span><span class="op" id="6788489">)</span><span class="op" id="6788490">}</span><span class="op" id="6788491">)</span><br>
<span class="lineno"></span><span class="op" id="6788493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6788496">func</span>&nbsp;<span class="ident" id="6788501">fillAlpha</span><span class="op" id="6788510">(</span><span class="ident" id="6788511">alpha</span>&nbsp;<span class="builtintype" id="6788517">int</span><span class="op" id="6788520">)</span>&nbsp;<span class="ident" id="6788522">image</span><span class="op" id="6788527">.</span><span class="ident" id="6788528">Image</span>&nbsp;<span class="op" id="6788534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788537">return</span>&nbsp;<span class="ident" id="6788544">image</span><span class="op" id="6788549">.</span><span class="ident" id="6788550">NewUniform</span><span class="op" id="6788560">(</span><span class="ident" id="6788561">color</span><span class="op" id="6788566">.</span><span class="ident" id="6788567">Alpha</span><span class="op" id="6788572">{</span><span class="builtintype" id="6788573">uint8</span><span class="op" id="6788578">(</span><span class="ident" id="6788579">alpha</span><span class="op" id="6788584">)</span><span class="op" id="6788585">}</span><span class="op" id="6788586">)</span><br>
<span class="lineno"></span><span class="op" id="6788588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6788591">func</span>&nbsp;<span class="ident" id="6788596">vgradGreen</span><span class="op" id="6788606">(</span><span class="ident" id="6788607">alpha</span>&nbsp;<span class="builtintype" id="6788613">int</span><span class="op" id="6788616">)</span>&nbsp;<span class="ident" id="6788618">image</span><span class="op" id="6788623">.</span><span class="ident" id="6788624">Image</span>&nbsp;<span class="op" id="6788630">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788633">m</span>&nbsp;<span class="op" id="6788635">:=</span>&nbsp;<span class="ident" id="6788638">image</span><span class="op" id="6788643">.</span><span class="ident" id="6788644">NewRGBA</span><span class="op" id="6788651">(</span><span class="ident" id="6788652">image</span><span class="op" id="6788657">.</span><span class="ident" id="6788658">Rect</span><span class="op" id="6788662">(</span><span class="num" id="6788663">0</span><span class="op" id="6788664">,</span>&nbsp;<span class="num" id="6788666">0</span><span class="op" id="6788667">,</span>&nbsp;<span class="num" id="6788669">16</span><span class="op" id="6788671">,</span>&nbsp;<span class="num" id="6788673">16</span><span class="op" id="6788675">)</span><span class="op" id="6788676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788679">for</span>&nbsp;<span class="ident" id="6788683">y</span>&nbsp;<span class="op" id="6788685">:=</span>&nbsp;<span class="num" id="6788688">0</span><span class="op" id="6788689">;</span>&nbsp;<span class="ident" id="6788691">y</span>&nbsp;<span class="op" id="6788693">&lt;</span>&nbsp;<span class="num" id="6788695">16</span><span class="op" id="6788697">;</span>&nbsp;<span class="ident" id="6788699">y</span><span class="op" id="6788700">++</span>&nbsp;<span class="op" id="6788703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788707">for</span>&nbsp;<span class="ident" id="6788711">x</span>&nbsp;<span class="op" id="6788713">:=</span>&nbsp;<span class="num" id="6788716">0</span><span class="op" id="6788717">;</span>&nbsp;<span class="ident" id="6788719">x</span>&nbsp;<span class="op" id="6788721">&lt;</span>&nbsp;<span class="num" id="6788723">16</span><span class="op" id="6788725">;</span>&nbsp;<span class="ident" id="6788727">x</span><span class="op" id="6788728">++</span>&nbsp;<span class="op" id="6788731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788736">m</span><span class="op" id="6788737">.</span><span class="ident" id="6788738">Set</span><span class="op" id="6788741">(</span><span class="ident" id="6788742">x</span><span class="op" id="6788743">,</span>&nbsp;<span class="ident" id="6788745">y</span><span class="op" id="6788746">,</span>&nbsp;<span class="ident" id="6788748">color</span><span class="op" id="6788753">.</span><span class="ident" id="6788754">RGBA</span><span class="op" id="6788758">{</span><span class="num" id="6788759">0</span><span class="op" id="6788760">,</span>&nbsp;<span class="builtintype" id="6788762">uint8</span><span class="op" id="6788767">(</span><span class="ident" id="6788768">y</span>&nbsp;<span class="op" id="6788770">*</span>&nbsp;<span class="ident" id="6788772">alpha</span>&nbsp;<span class="op" id="6788778">/</span>&nbsp;<span class="num" id="6788780">15</span><span class="op" id="6788782">)</span><span class="op" id="6788783">,</span>&nbsp;<span class="num" id="6788785">0</span><span class="op" id="6788786">,</span>&nbsp;<span class="builtintype" id="6788788">uint8</span><span class="op" id="6788793">(</span><span class="ident" id="6788794">alpha</span><span class="op" id="6788799">)</span><span class="op" id="6788800">}</span><span class="op" id="6788801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788805">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788811">return</span>&nbsp;<span class="ident" id="6788818">m</span><br>
<span class="lineno"></span><span class="op" id="6788820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6788823">func</span>&nbsp;<span class="ident" id="6788828">vgradAlpha</span><span class="op" id="6788838">(</span><span class="ident" id="6788839">alpha</span>&nbsp;<span class="builtintype" id="6788845">int</span><span class="op" id="6788848">)</span>&nbsp;<span class="ident" id="6788850">image</span><span class="op" id="6788855">.</span><span class="ident" id="6788856">Image</span>&nbsp;<span class="op" id="6788862">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788865">m</span>&nbsp;<span class="op" id="6788867">:=</span>&nbsp;<span class="ident" id="6788870">image</span><span class="op" id="6788875">.</span><span class="ident" id="6788876">NewAlpha</span><span class="op" id="6788884">(</span><span class="ident" id="6788885">image</span><span class="op" id="6788890">.</span><span class="ident" id="6788891">Rect</span><span class="op" id="6788895">(</span><span class="num" id="6788896">0</span><span class="op" id="6788897">,</span>&nbsp;<span class="num" id="6788899">0</span><span class="op" id="6788900">,</span>&nbsp;<span class="num" id="6788902">16</span><span class="op" id="6788904">,</span>&nbsp;<span class="num" id="6788906">16</span><span class="op" id="6788908">)</span><span class="op" id="6788909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788912">for</span>&nbsp;<span class="ident" id="6788916">y</span>&nbsp;<span class="op" id="6788918">:=</span>&nbsp;<span class="num" id="6788921">0</span><span class="op" id="6788922">;</span>&nbsp;<span class="ident" id="6788924">y</span>&nbsp;<span class="op" id="6788926">&lt;</span>&nbsp;<span class="num" id="6788928">16</span><span class="op" id="6788930">;</span>&nbsp;<span class="ident" id="6788932">y</span><span class="op" id="6788933">++</span>&nbsp;<span class="op" id="6788936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788940">for</span>&nbsp;<span class="ident" id="6788944">x</span>&nbsp;<span class="op" id="6788946">:=</span>&nbsp;<span class="num" id="6788949">0</span><span class="op" id="6788950">;</span>&nbsp;<span class="ident" id="6788952">x</span>&nbsp;<span class="op" id="6788954">&lt;</span>&nbsp;<span class="num" id="6788956">16</span><span class="op" id="6788958">;</span>&nbsp;<span class="ident" id="6788960">x</span><span class="op" id="6788961">++</span>&nbsp;<span class="op" id="6788964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788969">m</span><span class="op" id="6788970">.</span><span class="ident" id="6788971">Set</span><span class="op" id="6788974">(</span><span class="ident" id="6788975">x</span><span class="op" id="6788976">,</span>&nbsp;<span class="ident" id="6788978">y</span><span class="op" id="6788979">,</span>&nbsp;<span class="ident" id="6788981">color</span><span class="op" id="6788986">.</span><span class="ident" id="6788987">Alpha</span><span class="op" id="6788992">{</span><span class="builtintype" id="6788993">uint8</span><span class="op" id="6788998">(</span><span class="ident" id="6788999">y</span>&nbsp;<span class="op" id="6789001">*</span>&nbsp;<span class="ident" id="6789003">alpha</span>&nbsp;<span class="op" id="6789009">/</span>&nbsp;<span class="num" id="6789011">15</span><span class="op" id="6789013">)</span><span class="op" id="6789014">}</span><span class="op" id="6789015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789019">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789025">return</span>&nbsp;<span class="ident" id="6789032">m</span><br>
<span class="lineno"></span><span class="op" id="6789034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6789037">func</span>&nbsp;<span class="ident" id="6789042">vgradGreenNRGBA</span><span class="op" id="6789057">(</span><span class="ident" id="6789058">alpha</span>&nbsp;<span class="builtintype" id="6789064">int</span><span class="op" id="6789067">)</span>&nbsp;<span class="ident" id="6789069">image</span><span class="op" id="6789074">.</span><span class="ident" id="6789075">Image</span>&nbsp;<span class="op" id="6789081">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789084">m</span>&nbsp;<span class="op" id="6789086">:=</span>&nbsp;<span class="ident" id="6789089">image</span><span class="op" id="6789094">.</span><span class="ident" id="6789095">NewNRGBA</span><span class="op" id="6789103">(</span><span class="ident" id="6789104">image</span><span class="op" id="6789109">.</span><span class="ident" id="6789110">Rect</span><span class="op" id="6789114">(</span><span class="num" id="6789115">0</span><span class="op" id="6789116">,</span>&nbsp;<span class="num" id="6789118">0</span><span class="op" id="6789119">,</span>&nbsp;<span class="num" id="6789121">16</span><span class="op" id="6789123">,</span>&nbsp;<span class="num" id="6789125">16</span><span class="op" id="6789127">)</span><span class="op" id="6789128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789131">for</span>&nbsp;<span class="ident" id="6789135">y</span>&nbsp;<span class="op" id="6789137">:=</span>&nbsp;<span class="num" id="6789140">0</span><span class="op" id="6789141">;</span>&nbsp;<span class="ident" id="6789143">y</span>&nbsp;<span class="op" id="6789145">&lt;</span>&nbsp;<span class="num" id="6789147">16</span><span class="op" id="6789149">;</span>&nbsp;<span class="ident" id="6789151">y</span><span class="op" id="6789152">++</span>&nbsp;<span class="op" id="6789155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789159">for</span>&nbsp;<span class="ident" id="6789163">x</span>&nbsp;<span class="op" id="6789165">:=</span>&nbsp;<span class="num" id="6789168">0</span><span class="op" id="6789169">;</span>&nbsp;<span class="ident" id="6789171">x</span>&nbsp;<span class="op" id="6789173">&lt;</span>&nbsp;<span class="num" id="6789175">16</span><span class="op" id="6789177">;</span>&nbsp;<span class="ident" id="6789179">x</span><span class="op" id="6789180">++</span>&nbsp;<span class="op" id="6789183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789188">m</span><span class="op" id="6789189">.</span><span class="ident" id="6789190">Set</span><span class="op" id="6789193">(</span><span class="ident" id="6789194">x</span><span class="op" id="6789195">,</span>&nbsp;<span class="ident" id="6789197">y</span><span class="op" id="6789198">,</span>&nbsp;<span class="ident" id="6789200">color</span><span class="op" id="6789205">.</span><span class="ident" id="6789206">RGBA</span><span class="op" id="6789210">{</span><span class="num" id="6789211">0</span><span class="op" id="6789212">,</span>&nbsp;<span class="builtintype" id="6789214">uint8</span><span class="op" id="6789219">(</span><span class="ident" id="6789220">y</span>&nbsp;<span class="op" id="6789222">*</span>&nbsp;<span class="num" id="6789224">0x11</span><span class="op" id="6789228">)</span><span class="op" id="6789229">,</span>&nbsp;<span class="num" id="6789231">0</span><span class="op" id="6789232">,</span>&nbsp;<span class="builtintype" id="6789234">uint8</span><span class="op" id="6789239">(</span><span class="ident" id="6789240">alpha</span><span class="op" id="6789245">)</span><span class="op" id="6789246">}</span><span class="op" id="6789247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789251">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789257">return</span>&nbsp;<span class="ident" id="6789264">m</span><br>
<span class="lineno"></span><span class="op" id="6789266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6789269">func</span>&nbsp;<span class="ident" id="6789274">vgradCr</span><span class="op" id="6789281">(</span><span class="op" id="6789282">)</span>&nbsp;<span class="ident" id="6789284">image</span><span class="op" id="6789289">.</span><span class="ident" id="6789290">Image</span>&nbsp;<span class="op" id="6789296">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789299">m</span>&nbsp;<span class="op" id="6789301">:=</span>&nbsp;<span class="op" id="6789304">&amp;</span><span class="ident" id="6789305">image</span><span class="op" id="6789310">.</span><span class="ident" id="6789311">YCbCr</span><span class="op" id="6789316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789320">Y</span><span class="op" id="6789321">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6789336">make</span><span class="op" id="6789340">(</span><span class="op" id="6789341">[</span><span class="op" id="6789342">]</span><span class="builtintype" id="6789343">byte</span><span class="op" id="6789347">,</span>&nbsp;<span class="num" id="6789349">16</span><span class="op" id="6789351">*</span><span class="num" id="6789352">16</span><span class="op" id="6789354">)</span><span class="op" id="6789355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789359">Cb</span><span class="op" id="6789361">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6789375">make</span><span class="op" id="6789379">(</span><span class="op" id="6789380">[</span><span class="op" id="6789381">]</span><span class="builtintype" id="6789382">byte</span><span class="op" id="6789386">,</span>&nbsp;<span class="num" id="6789388">16</span><span class="op" id="6789390">*</span><span class="num" id="6789391">16</span><span class="op" id="6789393">)</span><span class="op" id="6789394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789398">Cr</span><span class="op" id="6789400">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6789414">make</span><span class="op" id="6789418">(</span><span class="op" id="6789419">[</span><span class="op" id="6789420">]</span><span class="builtintype" id="6789421">byte</span><span class="op" id="6789425">,</span>&nbsp;<span class="num" id="6789427">16</span><span class="op" id="6789429">*</span><span class="num" id="6789430">16</span><span class="op" id="6789432">)</span><span class="op" id="6789433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789437">YStride</span><span class="op" id="6789444">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6789453">16</span><span class="op" id="6789455">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789459">CStride</span><span class="op" id="6789466">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6789475">16</span><span class="op" id="6789477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789481">SubsampleRatio</span><span class="op" id="6789495">:</span>&nbsp;<span class="ident" id="6789497">image</span><span class="op" id="6789502">.</span><span class="ident" id="6789503">YCbCrSubsampleRatio444</span><span class="op" id="6789525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789529">Rect</span><span class="op" id="6789533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6789545">image</span><span class="op" id="6789550">.</span><span class="ident" id="6789551">Rect</span><span class="op" id="6789555">(</span><span class="num" id="6789556">0</span><span class="op" id="6789557">,</span>&nbsp;<span class="num" id="6789559">0</span><span class="op" id="6789560">,</span>&nbsp;<span class="num" id="6789562">16</span><span class="op" id="6789564">,</span>&nbsp;<span class="num" id="6789566">16</span><span class="op" id="6789568">)</span><span class="op" id="6789569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789575">for</span>&nbsp;<span class="ident" id="6789579">y</span>&nbsp;<span class="op" id="6789581">:=</span>&nbsp;<span class="num" id="6789584">0</span><span class="op" id="6789585">;</span>&nbsp;<span class="ident" id="6789587">y</span>&nbsp;<span class="op" id="6789589">&lt;</span>&nbsp;<span class="num" id="6789591">16</span><span class="op" id="6789593">;</span>&nbsp;<span class="ident" id="6789595">y</span><span class="op" id="6789596">++</span>&nbsp;<span class="op" id="6789599">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789603">for</span>&nbsp;<span class="ident" id="6789607">x</span>&nbsp;<span class="op" id="6789609">:=</span>&nbsp;<span class="num" id="6789612">0</span><span class="op" id="6789613">;</span>&nbsp;<span class="ident" id="6789615">x</span>&nbsp;<span class="op" id="6789617">&lt;</span>&nbsp;<span class="num" id="6789619">16</span><span class="op" id="6789621">;</span>&nbsp;<span class="ident" id="6789623">x</span><span class="op" id="6789624">++</span>&nbsp;<span class="op" id="6789627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789632">m</span><span class="op" id="6789633">.</span><span class="ident" id="6789634">Cr</span><span class="op" id="6789636">[</span><span class="ident" id="6789637">y</span><span class="op" id="6789638">*</span><span class="ident" id="6789639">m</span><span class="op" id="6789640">.</span><span class="ident" id="6789641">CStride</span><span class="op" id="6789648">+</span><span class="ident" id="6789649">x</span><span class="op" id="6789650">]</span>&nbsp;<span class="op" id="6789652">=</span>&nbsp;<span class="builtintype" id="6789654">uint8</span><span class="op" id="6789659">(</span><span class="ident" id="6789660">y</span>&nbsp;<span class="op" id="6789662">*</span>&nbsp;<span class="num" id="6789664">0x11</span><span class="op" id="6789668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789678">return</span>&nbsp;<span class="ident" id="6789685">m</span><br>
<span class="lineno">75</span><span class="op" id="6789687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6789690">func</span>&nbsp;<span class="ident" id="6789695">hgradRed</span><span class="op" id="6789703">(</span><span class="ident" id="6789704">alpha</span>&nbsp;<span class="builtintype" id="6789710">int</span><span class="op" id="6789713">)</span>&nbsp;<span class="ident" id="6789715">Image</span>&nbsp;<span class="op" id="6789721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789724">m</span>&nbsp;<span class="op" id="6789726">:=</span>&nbsp;<span class="ident" id="6789729">image</span><span class="op" id="6789734">.</span><span class="ident" id="6789735">NewRGBA</span><span class="op" id="6789742">(</span><span class="ident" id="6789743">image</span><span class="op" id="6789748">.</span><span class="ident" id="6789749">Rect</span><span class="op" id="6789753">(</span><span class="num" id="6789754">0</span><span class="op" id="6789755">,</span>&nbsp;<span class="num" id="6789757">0</span><span class="op" id="6789758">,</span>&nbsp;<span class="num" id="6789760">16</span><span class="op" id="6789762">,</span>&nbsp;<span class="num" id="6789764">16</span><span class="op" id="6789766">)</span><span class="op" id="6789767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789770">for</span>&nbsp;<span class="ident" id="6789774">y</span>&nbsp;<span class="op" id="6789776">:=</span>&nbsp;<span class="num" id="6789779">0</span><span class="op" id="6789780">;</span>&nbsp;<span class="ident" id="6789782">y</span>&nbsp;<span class="op" id="6789784">&lt;</span>&nbsp;<span class="num" id="6789786">16</span><span class="op" id="6789788">;</span>&nbsp;<span class="ident" id="6789790">y</span><span class="op" id="6789791">++</span>&nbsp;<span class="op" id="6789794">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789798">for</span>&nbsp;<span class="ident" id="6789802">x</span>&nbsp;<span class="op" id="6789804">:=</span>&nbsp;<span class="num" id="6789807">0</span><span class="op" id="6789808">;</span>&nbsp;<span class="ident" id="6789810">x</span>&nbsp;<span class="op" id="6789812">&lt;</span>&nbsp;<span class="num" id="6789814">16</span><span class="op" id="6789816">;</span>&nbsp;<span class="ident" id="6789818">x</span><span class="op" id="6789819">++</span>&nbsp;<span class="op" id="6789822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789827">m</span><span class="op" id="6789828">.</span><span class="ident" id="6789829">Set</span><span class="op" id="6789832">(</span><span class="ident" id="6789833">x</span><span class="op" id="6789834">,</span>&nbsp;<span class="ident" id="6789836">y</span><span class="op" id="6789837">,</span>&nbsp;<span class="ident" id="6789839">color</span><span class="op" id="6789844">.</span><span class="ident" id="6789845">RGBA</span><span class="op" id="6789849">{</span><span class="builtintype" id="6789850">uint8</span><span class="op" id="6789855">(</span><span class="ident" id="6789856">x</span>&nbsp;<span class="op" id="6789858">*</span>&nbsp;<span class="ident" id="6789860">alpha</span>&nbsp;<span class="op" id="6789866">/</span>&nbsp;<span class="num" id="6789868">15</span><span class="op" id="6789870">)</span><span class="op" id="6789871">,</span>&nbsp;<span class="num" id="6789873">0</span><span class="op" id="6789874">,</span>&nbsp;<span class="num" id="6789876">0</span><span class="op" id="6789877">,</span>&nbsp;<span class="builtintype" id="6789879">uint8</span><span class="op" id="6789884">(</span><span class="ident" id="6789885">alpha</span><span class="op" id="6789890">)</span><span class="op" id="6789891">}</span><span class="op" id="6789892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789902">return</span>&nbsp;<span class="ident" id="6789909">m</span><br>
<span class="lineno">85</span><span class="op" id="6789911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6789914">func</span>&nbsp;<span class="ident" id="6789919">gradYellow</span><span class="op" id="6789929">(</span><span class="ident" id="6789930">alpha</span>&nbsp;<span class="builtintype" id="6789936">int</span><span class="op" id="6789939">)</span>&nbsp;<span class="ident" id="6789941">Image</span>&nbsp;<span class="op" id="6789947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789950">m</span>&nbsp;<span class="op" id="6789952">:=</span>&nbsp;<span class="ident" id="6789955">image</span><span class="op" id="6789960">.</span><span class="ident" id="6789961">NewRGBA</span><span class="op" id="6789968">(</span><span class="ident" id="6789969">image</span><span class="op" id="6789974">.</span><span class="ident" id="6789975">Rect</span><span class="op" id="6789979">(</span><span class="num" id="6789980">0</span><span class="op" id="6789981">,</span>&nbsp;<span class="num" id="6789983">0</span><span class="op" id="6789984">,</span>&nbsp;<span class="num" id="6789986">16</span><span class="op" id="6789988">,</span>&nbsp;<span class="num" id="6789990">16</span><span class="op" id="6789992">)</span><span class="op" id="6789993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789996">for</span>&nbsp;<span class="ident" id="6790000">y</span>&nbsp;<span class="op" id="6790002">:=</span>&nbsp;<span class="num" id="6790005">0</span><span class="op" id="6790006">;</span>&nbsp;<span class="ident" id="6790008">y</span>&nbsp;<span class="op" id="6790010">&lt;</span>&nbsp;<span class="num" id="6790012">16</span><span class="op" id="6790014">;</span>&nbsp;<span class="ident" id="6790016">y</span><span class="op" id="6790017">++</span>&nbsp;<span class="op" id="6790020">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6790024">for</span>&nbsp;<span class="ident" id="6790028">x</span>&nbsp;<span class="op" id="6790030">:=</span>&nbsp;<span class="num" id="6790033">0</span><span class="op" id="6790034">;</span>&nbsp;<span class="ident" id="6790036">x</span>&nbsp;<span class="op" id="6790038">&lt;</span>&nbsp;<span class="num" id="6790040">16</span><span class="op" id="6790042">;</span>&nbsp;<span class="ident" id="6790044">x</span><span class="op" id="6790045">++</span>&nbsp;<span class="op" id="6790048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790053">m</span><span class="op" id="6790054">.</span><span class="ident" id="6790055">Set</span><span class="op" id="6790058">(</span><span class="ident" id="6790059">x</span><span class="op" id="6790060">,</span>&nbsp;<span class="ident" id="6790062">y</span><span class="op" id="6790063">,</span>&nbsp;<span class="ident" id="6790065">color</span><span class="op" id="6790070">.</span><span class="ident" id="6790071">RGBA</span><span class="op" id="6790075">{</span><span class="builtintype" id="6790076">uint8</span><span class="op" id="6790081">(</span><span class="ident" id="6790082">x</span>&nbsp;<span class="op" id="6790084">*</span>&nbsp;<span class="ident" id="6790086">alpha</span>&nbsp;<span class="op" id="6790092">/</span>&nbsp;<span class="num" id="6790094">15</span><span class="op" id="6790096">)</span><span class="op" id="6790097">,</span>&nbsp;<span class="builtintype" id="6790099">uint8</span><span class="op" id="6790104">(</span><span class="ident" id="6790105">y</span>&nbsp;<span class="op" id="6790107">*</span>&nbsp;<span class="ident" id="6790109">alpha</span>&nbsp;<span class="op" id="6790115">/</span>&nbsp;<span class="num" id="6790117">15</span><span class="op" id="6790119">)</span><span class="op" id="6790120">,</span>&nbsp;<span class="num" id="6790122">0</span><span class="op" id="6790123">,</span>&nbsp;<span class="builtintype" id="6790125">uint8</span><span class="op" id="6790130">(</span><span class="ident" id="6790131">alpha</span><span class="op" id="6790136">)</span><span class="op" id="6790137">}</span><span class="op" id="6790138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6790148">return</span>&nbsp;<span class="ident" id="6790155">m</span><br>
<span class="lineno">95</span><span class="op" id="6790157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6790160">type</span>&nbsp;<span class="ident" id="6790165">drawTest</span>&nbsp;<span class="keyword" id="6790174">struct</span>&nbsp;<span class="op" id="6790181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790184">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6790193">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790201">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790210">image</span><span class="op" id="6790215">.</span><span class="ident" id="6790216">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790223">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790232">image</span><span class="op" id="6790237">.</span><span class="ident" id="6790238">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790245">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6790254">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790258">expected</span>&nbsp;<span class="ident" id="6790267">color</span><span class="op" id="6790272">.</span><span class="ident" id="6790273">Color</span><br>
<span class="lineno"></span><span class="op" id="6790279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6790282">var</span>&nbsp;<span class="ident" id="6790286">drawTests</span>&nbsp;<span class="op" id="6790296">=</span>&nbsp;<span class="op" id="6790298">[</span><span class="op" id="6790299">]</span><span class="ident" id="6790300">drawTest</span><span class="op" id="6790308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6790311">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790341">{</span><span class="string" id="6790342">&#34;nop&#34;</span><span class="op" id="6790347">,</span>&nbsp;<span class="ident" id="6790349">vgradGreen</span><span class="op" id="6790359">(</span><span class="num" id="6790360">255</span><span class="op" id="6790363">)</span><span class="op" id="6790364">,</span>&nbsp;<span class="ident" id="6790366">fillAlpha</span><span class="op" id="6790375">(</span><span class="num" id="6790376">0</span><span class="op" id="6790377">)</span><span class="op" id="6790378">,</span>&nbsp;<span class="ident" id="6790380">Over</span><span class="op" id="6790384">,</span>&nbsp;<span class="ident" id="6790386">color</span><span class="op" id="6790391">.</span><span class="ident" id="6790392">RGBA</span><span class="op" id="6790396">{</span><span class="num" id="6790397">136</span><span class="op" id="6790400">,</span>&nbsp;<span class="num" id="6790402">0</span><span class="op" id="6790403">,</span>&nbsp;<span class="num" id="6790405">0</span><span class="op" id="6790406">,</span>&nbsp;<span class="num" id="6790408">255</span><span class="op" id="6790411">}</span><span class="op" id="6790412">}</span><span class="op" id="6790413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790416">{</span><span class="string" id="6790417">&#34;clear&#34;</span><span class="op" id="6790424">,</span>&nbsp;<span class="ident" id="6790426">vgradGreen</span><span class="op" id="6790436">(</span><span class="num" id="6790437">255</span><span class="op" id="6790440">)</span><span class="op" id="6790441">,</span>&nbsp;<span class="ident" id="6790443">fillAlpha</span><span class="op" id="6790452">(</span><span class="num" id="6790453">0</span><span class="op" id="6790454">)</span><span class="op" id="6790455">,</span>&nbsp;<span class="ident" id="6790457">Src</span><span class="op" id="6790460">,</span>&nbsp;<span class="ident" id="6790462">color</span><span class="op" id="6790467">.</span><span class="ident" id="6790468">RGBA</span><span class="op" id="6790472">{</span><span class="num" id="6790473">0</span><span class="op" id="6790474">,</span>&nbsp;<span class="num" id="6790476">0</span><span class="op" id="6790477">,</span>&nbsp;<span class="num" id="6790479">0</span><span class="op" id="6790480">,</span>&nbsp;<span class="num" id="6790482">0</span><span class="op" id="6790483">}</span><span class="op" id="6790484">}</span><span class="op" id="6790485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6790488">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6790542">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6790567">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6790614">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790654">{</span><span class="string" id="6790655">&#34;fill&#34;</span><span class="op" id="6790661">,</span>&nbsp;<span class="ident" id="6790663">fillBlue</span><span class="op" id="6790671">(</span><span class="num" id="6790672">90</span><span class="op" id="6790674">)</span><span class="op" id="6790675">,</span>&nbsp;<span class="ident" id="6790677">fillAlpha</span><span class="op" id="6790686">(</span><span class="num" id="6790687">255</span><span class="op" id="6790690">)</span><span class="op" id="6790691">,</span>&nbsp;<span class="ident" id="6790693">Over</span><span class="op" id="6790697">,</span>&nbsp;<span class="ident" id="6790699">color</span><span class="op" id="6790704">.</span><span class="ident" id="6790705">RGBA</span><span class="op" id="6790709">{</span><span class="num" id="6790710">88</span><span class="op" id="6790712">,</span>&nbsp;<span class="num" id="6790714">0</span><span class="op" id="6790715">,</span>&nbsp;<span class="num" id="6790717">90</span><span class="op" id="6790719">,</span>&nbsp;<span class="num" id="6790721">255</span><span class="op" id="6790724">}</span><span class="op" id="6790725">}</span><span class="op" id="6790726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790729">{</span><span class="string" id="6790730">&#34;fillSrc&#34;</span><span class="op" id="6790739">,</span>&nbsp;<span class="ident" id="6790741">fillBlue</span><span class="op" id="6790749">(</span><span class="num" id="6790750">90</span><span class="op" id="6790752">)</span><span class="op" id="6790753">,</span>&nbsp;<span class="ident" id="6790755">fillAlpha</span><span class="op" id="6790764">(</span><span class="num" id="6790765">255</span><span class="op" id="6790768">)</span><span class="op" id="6790769">,</span>&nbsp;<span class="ident" id="6790771">Src</span><span class="op" id="6790774">,</span>&nbsp;<span class="ident" id="6790776">color</span><span class="op" id="6790781">.</span><span class="ident" id="6790782">RGBA</span><span class="op" id="6790786">{</span><span class="num" id="6790787">0</span><span class="op" id="6790788">,</span>&nbsp;<span class="num" id="6790790">0</span><span class="op" id="6790791">,</span>&nbsp;<span class="num" id="6790793">90</span><span class="op" id="6790795">,</span>&nbsp;<span class="num" id="6790797">90</span><span class="op" id="6790799">}</span><span class="op" id="6790800">}</span><span class="op" id="6790801">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790804">{</span><span class="string" id="6790805">&#34;fillAlpha&#34;</span><span class="op" id="6790816">,</span>&nbsp;<span class="ident" id="6790818">fillBlue</span><span class="op" id="6790826">(</span><span class="num" id="6790827">90</span><span class="op" id="6790829">)</span><span class="op" id="6790830">,</span>&nbsp;<span class="ident" id="6790832">fillAlpha</span><span class="op" id="6790841">(</span><span class="num" id="6790842">192</span><span class="op" id="6790845">)</span><span class="op" id="6790846">,</span>&nbsp;<span class="ident" id="6790848">Over</span><span class="op" id="6790852">,</span>&nbsp;<span class="ident" id="6790854">color</span><span class="op" id="6790859">.</span><span class="ident" id="6790860">RGBA</span><span class="op" id="6790864">{</span><span class="num" id="6790865">100</span><span class="op" id="6790868">,</span>&nbsp;<span class="num" id="6790870">0</span><span class="op" id="6790871">,</span>&nbsp;<span class="num" id="6790873">68</span><span class="op" id="6790875">,</span>&nbsp;<span class="num" id="6790877">255</span><span class="op" id="6790880">}</span><span class="op" id="6790881">}</span><span class="op" id="6790882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790885">{</span><span class="string" id="6790886">&#34;fillAlphaSrc&#34;</span><span class="op" id="6790900">,</span>&nbsp;<span class="ident" id="6790902">fillBlue</span><span class="op" id="6790910">(</span><span class="num" id="6790911">90</span><span class="op" id="6790913">)</span><span class="op" id="6790914">,</span>&nbsp;<span class="ident" id="6790916">fillAlpha</span><span class="op" id="6790925">(</span><span class="num" id="6790926">192</span><span class="op" id="6790929">)</span><span class="op" id="6790930">,</span>&nbsp;<span class="ident" id="6790932">Src</span><span class="op" id="6790935">,</span>&nbsp;<span class="ident" id="6790937">color</span><span class="op" id="6790942">.</span><span class="ident" id="6790943">RGBA</span><span class="op" id="6790947">{</span><span class="num" id="6790948">0</span><span class="op" id="6790949">,</span>&nbsp;<span class="num" id="6790951">0</span><span class="op" id="6790952">,</span>&nbsp;<span class="num" id="6790954">68</span><span class="op" id="6790956">,</span>&nbsp;<span class="num" id="6790958">68</span><span class="op" id="6790960">}</span><span class="op" id="6790961">}</span><span class="op" id="6790962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790965">{</span><span class="string" id="6790966">&#34;fillNil&#34;</span><span class="op" id="6790975">,</span>&nbsp;<span class="ident" id="6790977">fillBlue</span><span class="op" id="6790985">(</span><span class="num" id="6790986">90</span><span class="op" id="6790988">)</span><span class="op" id="6790989">,</span>&nbsp;<span class="ident" id="6790991">nil</span><span class="op" id="6790994">,</span>&nbsp;<span class="ident" id="6790996">Over</span><span class="op" id="6791000">,</span>&nbsp;<span class="ident" id="6791002">color</span><span class="op" id="6791007">.</span><span class="ident" id="6791008">RGBA</span><span class="op" id="6791012">{</span><span class="num" id="6791013">88</span><span class="op" id="6791015">,</span>&nbsp;<span class="num" id="6791017">0</span><span class="op" id="6791018">,</span>&nbsp;<span class="num" id="6791020">90</span><span class="op" id="6791022">,</span>&nbsp;<span class="num" id="6791024">255</span><span class="op" id="6791027">}</span><span class="op" id="6791028">}</span><span class="op" id="6791029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6791032">{</span><span class="string" id="6791033">&#34;fillNilSrc&#34;</span><span class="op" id="6791045">,</span>&nbsp;<span class="ident" id="6791047">fillBlue</span><span class="op" id="6791055">(</span><span class="num" id="6791056">90</span><span class="op" id="6791058">)</span><span class="op" id="6791059">,</span>&nbsp;<span class="ident" id="6791061">nil</span><span class="op" id="6791064">,</span>&nbsp;<span class="ident" id="6791066">Src</span><span class="op" id="6791069">,</span>&nbsp;<span class="ident" id="6791071">color</span><span class="op" id="6791076">.</span><span class="ident" id="6791077">RGBA</span><span class="op" id="6791081">{</span><span class="num" id="6791082">0</span><span class="op" id="6791083">,</span>&nbsp;<span class="num" id="6791085">0</span><span class="op" id="6791086">,</span>&nbsp;<span class="num" id="6791088">90</span><span class="op" id="6791090">,</span>&nbsp;<span class="num" id="6791092">90</span><span class="op" id="6791094">}</span><span class="op" id="6791095">}</span><span class="op" id="6791096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6791099">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6791154">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6791179">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6791226">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6791266">{</span><span class="string" id="6791267">&#34;copy&#34;</span><span class="op" id="6791273">,</span>&nbsp;<span class="ident" id="6791275">vgradGreen</span><span class="op" id="6791285">(</span><span class="num" id="6791286">90</span><span class="op" id="6791288">)</span><span class="op" id="6791289">,</span>&nbsp;<span class="ident" id="6791291">fillAlpha</span><span class="op" id="6791300">(</span><span class="num" id="6791301">255</span><span class="op" id="6791304">)</span><span class="op" id="6791305">,</span>&nbsp;<span class="ident" id="6791307">Over</span><span class="op" id="6791311">,</span>&nbsp;<span class="ident" id="6791313">color</span><span class="op" id="6791318">.</span><span class="ident" id="6791319">RGBA</span><span class="op" id="6791323">{</span><span class="num" id="6791324">88</span><span class="op" id="6791326">,</span>&nbsp;<span class="num" id="6791328">48</span><span class="op" id="6791330">,</span>&nbsp;<span class="num" id="6791332">0</span><span class="op" id="6791333">,</span>&nbsp;<span class="num" id="6791335">255</span><span class="op" id="6791338">}</span><span class="op" id="6791339">}</span><span class="op" id="6791340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6791343">{</span><span class="string" id="6791344">&#34;copySrc&#34;</span><span class="op" id="6791353">,</span>&nbsp;<span class="ident" id="6791355">vgradGreen</span><span class="op" id="6791365">(</span><span class="num" id="6791366">90</span><span class="op" id="6791368">)</span><span class="op" id="6791369">,</span>&nbsp;<span class="ident" id="6791371">fillAlpha</span><span class="op" id="6791380">(</span><span class="num" id="6791381">255</span><span class="op" id="6791384">)</span><span class="op" id="6791385">,</span>&nbsp;<span class="ident" id="6791387">Src</span><span class="op" id="6791390">,</span>&nbsp;<span class="ident" id="6791392">color</span><span class="op" id="6791397">.</span><span class="ident" id="6791398">RGBA</span><span class="op" id="6791402">{</span><span class="num" id="6791403">0</span><span class="op" id="6791404">,</span>&nbsp;<span class="num" id="6791406">48</span><span class="op" id="6791408">,</span>&nbsp;<span class="num" id="6791410">0</span><span class="op" id="6791411">,</span>&nbsp;<span class="num" id="6791413">90</span><span class="op" id="6791415">}</span><span class="op" id="6791416">}</span><span class="op" id="6791417">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6791420">{</span><span class="string" id="6791421">&#34;copyAlpha&#34;</span><span class="op" id="6791432">,</span>&nbsp;<span class="ident" id="6791434">vgradGreen</span><span class="op" id="6791444">(</span><span class="num" id="6791445">90</span><span class="op" id="6791447">)</span><span class="op" id="6791448">,</span>&nbsp;<span class="ident" id="6791450">fillAlpha</span><span class="op" id="6791459">(</span><span class="num" id="6791460">192</span><span class="op" id="6791463">)</span><span class="op" id="6791464">,</span>&nbsp;<span class="ident" id="6791466">Over</span><span class="op" id="6791470">,</span>&nbsp;<span class="ident" id="6791472">color</span><span class="op" id="6791477">.</span><span class="ident" id="6791478">RGBA</span><span class="op" id="6791482">{</span><span class="num" id="6791483">100</span><span class="op" id="6791486">,</span>&nbsp;<span class="num" id="6791488">36</span><span class="op" id="6791490">,</span>&nbsp;<span class="num" id="6791492">0</span><span class="op" id="6791493">,</span>&nbsp;<span class="num" id="6791495">255</span><span class="op" id="6791498">}</span><span class="op" id="6791499">}</span><span class="op" id="6791500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6791503">{</span><span class="string" id="6791504">&#34;copyAlphaSrc&#34;</span><span class="op" id="6791518">,</span>&nbsp;<span class="ident" id="6791520">vgradGreen</span><span class="op" id="6791530">(</span><span class="num" id="6791531">90</span><span class="op" id="6791533">)</span><span class="op" id="6791534">,</span>&nbsp;<span class="ident" id="6791536">fillAlpha</span><span class="op" id="6791545">(</span><span class="num" id="6791546">192</span><span class="op" id="6791549">)</span><span class="op" id="6791550">,</span>&nbsp;<span class="ident" id="6791552">Src</span><span class="op" id="6791555">,</span>&nbsp;<span class="ident" id="6791557">color</span><span class="op" id="6791562">.</span><span class="ident" id="6791563">RGBA</span><span class="op" id="6791567">{</span><span class="num" id="6791568">0</span><span class="op" id="6791569">,</span>&nbsp;<span class="num" id="6791571">36</span><span class="op" id="6791573">,</span>&nbsp;<span class="num" id="6791575">0</span><span class="op" id="6791576">,</span>&nbsp;<span class="num" id="6791578">68</span><span class="op" id="6791580">}</span><span class="op" id="6791581">}</span><span class="op" id="6791582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6791585">{</span><span class="string" id="6791586">&#34;copyNil&#34;</span><span class="op" id="6791595">,</span>&nbsp;<span class="ident" id="6791597">vgradGreen</span><span class="op" id="6791607">(</span><span class="num" id="6791608">90</span><span class="op" id="6791610">)</span><span class="op" id="6791611">,</span>&nbsp;<span class="ident" id="6791613">nil</span><span class="op" id="6791616">,</span>&nbsp;<span class="ident" id="6791618">Over</span><span class="op" id="6791622">,</span>&nbsp;<span class="ident" id="6791624">color</span><span class="op" id="6791629">.</span><span class="ident" id="6791630">RGBA</span><span class="op" id="6791634">{</span><span class="num" id="6791635">88</span><span class="op" id="6791637">,</span>&nbsp;<span class="num" id="6791639">48</span><span class="op" id="6791641">,</span>&nbsp;<span class="num" id="6791643">0</span><span class="op" id="6791644">,</span>&nbsp;<span class="num" id="6791646">255</span><span class="op" id="6791649">}</span><span class="op" id="6791650">}</span><span class="op" id="6791651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6791654">{</span><span class="string" id="6791655">&#34;copyNilSrc&#34;</span><span class="op" id="6791667">,</span>&nbsp;<span class="ident" id="6791669">vgradGreen</span><span class="op" id="6791679">(</span><span class="num" id="6791680">90</span><span class="op" id="6791682">)</span><span class="op" id="6791683">,</span>&nbsp;<span class="ident" id="6791685">nil</span><span class="op" id="6791688">,</span>&nbsp;<span class="ident" id="6791690">Src</span><span class="op" id="6791693">,</span>&nbsp;<span class="ident" id="6791695">color</span><span class="op" id="6791700">.</span><span class="ident" id="6791701">RGBA</span><span class="op" id="6791705">{</span><span class="num" id="6791706">0</span><span class="op" id="6791707">,</span>&nbsp;<span class="num" id="6791709">48</span><span class="op" id="6791711">,</span>&nbsp;<span class="num" id="6791713">0</span><span class="op" id="6791714">,</span>&nbsp;<span class="num" id="6791716">90</span><span class="op" id="6791718">}</span><span class="op" id="6791719">}</span><span class="op" id="6791720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6791723">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6791784">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6791809">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6791856">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6791951">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6792044">{</span><span class="string" id="6792045">&#34;nrgba&#34;</span><span class="op" id="6792052">,</span>&nbsp;<span class="ident" id="6792054">vgradGreenNRGBA</span><span class="op" id="6792069">(</span><span class="num" id="6792070">90</span><span class="op" id="6792072">)</span><span class="op" id="6792073">,</span>&nbsp;<span class="ident" id="6792075">fillAlpha</span><span class="op" id="6792084">(</span><span class="num" id="6792085">255</span><span class="op" id="6792088">)</span><span class="op" id="6792089">,</span>&nbsp;<span class="ident" id="6792091">Over</span><span class="op" id="6792095">,</span>&nbsp;<span class="ident" id="6792097">color</span><span class="op" id="6792102">.</span><span class="ident" id="6792103">RGBA</span><span class="op" id="6792107">{</span><span class="num" id="6792108">88</span><span class="op" id="6792110">,</span>&nbsp;<span class="num" id="6792112">46</span><span class="op" id="6792114">,</span>&nbsp;<span class="num" id="6792116">0</span><span class="op" id="6792117">,</span>&nbsp;<span class="num" id="6792119">255</span><span class="op" id="6792122">}</span><span class="op" id="6792123">}</span><span class="op" id="6792124">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6792127">{</span><span class="string" id="6792128">&#34;nrgbaSrc&#34;</span><span class="op" id="6792138">,</span>&nbsp;<span class="ident" id="6792140">vgradGreenNRGBA</span><span class="op" id="6792155">(</span><span class="num" id="6792156">90</span><span class="op" id="6792158">)</span><span class="op" id="6792159">,</span>&nbsp;<span class="ident" id="6792161">fillAlpha</span><span class="op" id="6792170">(</span><span class="num" id="6792171">255</span><span class="op" id="6792174">)</span><span class="op" id="6792175">,</span>&nbsp;<span class="ident" id="6792177">Src</span><span class="op" id="6792180">,</span>&nbsp;<span class="ident" id="6792182">color</span><span class="op" id="6792187">.</span><span class="ident" id="6792188">RGBA</span><span class="op" id="6792192">{</span><span class="num" id="6792193">0</span><span class="op" id="6792194">,</span>&nbsp;<span class="num" id="6792196">46</span><span class="op" id="6792198">,</span>&nbsp;<span class="num" id="6792200">0</span><span class="op" id="6792201">,</span>&nbsp;<span class="num" id="6792203">90</span><span class="op" id="6792205">}</span><span class="op" id="6792206">}</span><span class="op" id="6792207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6792210">{</span><span class="string" id="6792211">&#34;nrgbaAlpha&#34;</span><span class="op" id="6792223">,</span>&nbsp;<span class="ident" id="6792225">vgradGreenNRGBA</span><span class="op" id="6792240">(</span><span class="num" id="6792241">90</span><span class="op" id="6792243">)</span><span class="op" id="6792244">,</span>&nbsp;<span class="ident" id="6792246">fillAlpha</span><span class="op" id="6792255">(</span><span class="num" id="6792256">192</span><span class="op" id="6792259">)</span><span class="op" id="6792260">,</span>&nbsp;<span class="ident" id="6792262">Over</span><span class="op" id="6792266">,</span>&nbsp;<span class="ident" id="6792268">color</span><span class="op" id="6792273">.</span><span class="ident" id="6792274">RGBA</span><span class="op" id="6792278">{</span><span class="num" id="6792279">100</span><span class="op" id="6792282">,</span>&nbsp;<span class="num" id="6792284">34</span><span class="op" id="6792286">,</span>&nbsp;<span class="num" id="6792288">0</span><span class="op" id="6792289">,</span>&nbsp;<span class="num" id="6792291">255</span><span class="op" id="6792294">}</span><span class="op" id="6792295">}</span><span class="op" id="6792296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6792299">{</span><span class="string" id="6792300">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="6792315">,</span>&nbsp;<span class="ident" id="6792317">vgradGreenNRGBA</span><span class="op" id="6792332">(</span><span class="num" id="6792333">90</span><span class="op" id="6792335">)</span><span class="op" id="6792336">,</span>&nbsp;<span class="ident" id="6792338">fillAlpha</span><span class="op" id="6792347">(</span><span class="num" id="6792348">192</span><span class="op" id="6792351">)</span><span class="op" id="6792352">,</span>&nbsp;<span class="ident" id="6792354">Src</span><span class="op" id="6792357">,</span>&nbsp;<span class="ident" id="6792359">color</span><span class="op" id="6792364">.</span><span class="ident" id="6792365">RGBA</span><span class="op" id="6792369">{</span><span class="num" id="6792370">0</span><span class="op" id="6792371">,</span>&nbsp;<span class="num" id="6792373">34</span><span class="op" id="6792375">,</span>&nbsp;<span class="num" id="6792377">0</span><span class="op" id="6792378">,</span>&nbsp;<span class="num" id="6792380">68</span><span class="op" id="6792382">}</span><span class="op" id="6792383">}</span><span class="op" id="6792384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6792387">{</span><span class="string" id="6792388">&#34;nrgbaNil&#34;</span><span class="op" id="6792398">,</span>&nbsp;<span class="ident" id="6792400">vgradGreenNRGBA</span><span class="op" id="6792415">(</span><span class="num" id="6792416">90</span><span class="op" id="6792418">)</span><span class="op" id="6792419">,</span>&nbsp;<span class="ident" id="6792421">nil</span><span class="op" id="6792424">,</span>&nbsp;<span class="ident" id="6792426">Over</span><span class="op" id="6792430">,</span>&nbsp;<span class="ident" id="6792432">color</span><span class="op" id="6792437">.</span><span class="ident" id="6792438">RGBA</span><span class="op" id="6792442">{</span><span class="num" id="6792443">88</span><span class="op" id="6792445">,</span>&nbsp;<span class="num" id="6792447">46</span><span class="op" id="6792449">,</span>&nbsp;<span class="num" id="6792451">0</span><span class="op" id="6792452">,</span>&nbsp;<span class="num" id="6792454">255</span><span class="op" id="6792457">}</span><span class="op" id="6792458">}</span><span class="op" id="6792459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6792462">{</span><span class="string" id="6792463">&#34;nrgbaNilSrc&#34;</span><span class="op" id="6792476">,</span>&nbsp;<span class="ident" id="6792478">vgradGreenNRGBA</span><span class="op" id="6792493">(</span><span class="num" id="6792494">90</span><span class="op" id="6792496">)</span><span class="op" id="6792497">,</span>&nbsp;<span class="ident" id="6792499">nil</span><span class="op" id="6792502">,</span>&nbsp;<span class="ident" id="6792504">Src</span><span class="op" id="6792507">,</span>&nbsp;<span class="ident" id="6792509">color</span><span class="op" id="6792514">.</span><span class="ident" id="6792515">RGBA</span><span class="op" id="6792519">{</span><span class="num" id="6792520">0</span><span class="op" id="6792521">,</span>&nbsp;<span class="num" id="6792523">46</span><span class="op" id="6792525">,</span>&nbsp;<span class="num" id="6792527">0</span><span class="op" id="6792528">,</span>&nbsp;<span class="num" id="6792530">90</span><span class="op" id="6792532">}</span><span class="op" id="6792533">}</span><span class="op" id="6792534">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6792537">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6792598">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6792623">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6792670">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6792762">{</span><span class="string" id="6792763">&#34;ycbcr&#34;</span><span class="op" id="6792770">,</span>&nbsp;<span class="ident" id="6792772">vgradCr</span><span class="op" id="6792779">(</span><span class="op" id="6792780">)</span><span class="op" id="6792781">,</span>&nbsp;<span class="ident" id="6792783">fillAlpha</span><span class="op" id="6792792">(</span><span class="num" id="6792793">255</span><span class="op" id="6792796">)</span><span class="op" id="6792797">,</span>&nbsp;<span class="ident" id="6792799">Over</span><span class="op" id="6792803">,</span>&nbsp;<span class="ident" id="6792805">color</span><span class="op" id="6792810">.</span><span class="ident" id="6792811">RGBA</span><span class="op" id="6792815">{</span><span class="num" id="6792816">11</span><span class="op" id="6792818">,</span>&nbsp;<span class="num" id="6792820">38</span><span class="op" id="6792822">,</span>&nbsp;<span class="num" id="6792824">0</span><span class="op" id="6792825">,</span>&nbsp;<span class="num" id="6792827">255</span><span class="op" id="6792830">}</span><span class="op" id="6792831">}</span><span class="op" id="6792832">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6792835">{</span><span class="string" id="6792836">&#34;ycbcrSrc&#34;</span><span class="op" id="6792846">,</span>&nbsp;<span class="ident" id="6792848">vgradCr</span><span class="op" id="6792855">(</span><span class="op" id="6792856">)</span><span class="op" id="6792857">,</span>&nbsp;<span class="ident" id="6792859">fillAlpha</span><span class="op" id="6792868">(</span><span class="num" id="6792869">255</span><span class="op" id="6792872">)</span><span class="op" id="6792873">,</span>&nbsp;<span class="ident" id="6792875">Src</span><span class="op" id="6792878">,</span>&nbsp;<span class="ident" id="6792880">color</span><span class="op" id="6792885">.</span><span class="ident" id="6792886">RGBA</span><span class="op" id="6792890">{</span><span class="num" id="6792891">11</span><span class="op" id="6792893">,</span>&nbsp;<span class="num" id="6792895">38</span><span class="op" id="6792897">,</span>&nbsp;<span class="num" id="6792899">0</span><span class="op" id="6792900">,</span>&nbsp;<span class="num" id="6792902">255</span><span class="op" id="6792905">}</span><span class="op" id="6792906">}</span><span class="op" id="6792907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6792910">{</span><span class="string" id="6792911">&#34;ycbcrAlpha&#34;</span><span class="op" id="6792923">,</span>&nbsp;<span class="ident" id="6792925">vgradCr</span><span class="op" id="6792932">(</span><span class="op" id="6792933">)</span><span class="op" id="6792934">,</span>&nbsp;<span class="ident" id="6792936">fillAlpha</span><span class="op" id="6792945">(</span><span class="num" id="6792946">192</span><span class="op" id="6792949">)</span><span class="op" id="6792950">,</span>&nbsp;<span class="ident" id="6792952">Over</span><span class="op" id="6792956">,</span>&nbsp;<span class="ident" id="6792958">color</span><span class="op" id="6792963">.</span><span class="ident" id="6792964">RGBA</span><span class="op" id="6792968">{</span><span class="num" id="6792969">42</span><span class="op" id="6792971">,</span>&nbsp;<span class="num" id="6792973">28</span><span class="op" id="6792975">,</span>&nbsp;<span class="num" id="6792977">0</span><span class="op" id="6792978">,</span>&nbsp;<span class="num" id="6792980">255</span><span class="op" id="6792983">}</span><span class="op" id="6792984">}</span><span class="op" id="6792985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6792988">{</span><span class="string" id="6792989">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="6793004">,</span>&nbsp;<span class="ident" id="6793006">vgradCr</span><span class="op" id="6793013">(</span><span class="op" id="6793014">)</span><span class="op" id="6793015">,</span>&nbsp;<span class="ident" id="6793017">fillAlpha</span><span class="op" id="6793026">(</span><span class="num" id="6793027">192</span><span class="op" id="6793030">)</span><span class="op" id="6793031">,</span>&nbsp;<span class="ident" id="6793033">Src</span><span class="op" id="6793036">,</span>&nbsp;<span class="ident" id="6793038">color</span><span class="op" id="6793043">.</span><span class="ident" id="6793044">RGBA</span><span class="op" id="6793048">{</span><span class="num" id="6793049">8</span><span class="op" id="6793050">,</span>&nbsp;<span class="num" id="6793052">28</span><span class="op" id="6793054">,</span>&nbsp;<span class="num" id="6793056">0</span><span class="op" id="6793057">,</span>&nbsp;<span class="num" id="6793059">192</span><span class="op" id="6793062">}</span><span class="op" id="6793063">}</span><span class="op" id="6793064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6793067">{</span><span class="string" id="6793068">&#34;ycbcrNil&#34;</span><span class="op" id="6793078">,</span>&nbsp;<span class="ident" id="6793080">vgradCr</span><span class="op" id="6793087">(</span><span class="op" id="6793088">)</span><span class="op" id="6793089">,</span>&nbsp;<span class="ident" id="6793091">nil</span><span class="op" id="6793094">,</span>&nbsp;<span class="ident" id="6793096">Over</span><span class="op" id="6793100">,</span>&nbsp;<span class="ident" id="6793102">color</span><span class="op" id="6793107">.</span><span class="ident" id="6793108">RGBA</span><span class="op" id="6793112">{</span><span class="num" id="6793113">11</span><span class="op" id="6793115">,</span>&nbsp;<span class="num" id="6793117">38</span><span class="op" id="6793119">,</span>&nbsp;<span class="num" id="6793121">0</span><span class="op" id="6793122">,</span>&nbsp;<span class="num" id="6793124">255</span><span class="op" id="6793127">}</span><span class="op" id="6793128">}</span><span class="op" id="6793129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6793132">{</span><span class="string" id="6793133">&#34;ycbcrNilSrc&#34;</span><span class="op" id="6793146">,</span>&nbsp;<span class="ident" id="6793148">vgradCr</span><span class="op" id="6793155">(</span><span class="op" id="6793156">)</span><span class="op" id="6793157">,</span>&nbsp;<span class="ident" id="6793159">nil</span><span class="op" id="6793162">,</span>&nbsp;<span class="ident" id="6793164">Src</span><span class="op" id="6793167">,</span>&nbsp;<span class="ident" id="6793169">color</span><span class="op" id="6793174">.</span><span class="ident" id="6793175">RGBA</span><span class="op" id="6793179">{</span><span class="num" id="6793180">11</span><span class="op" id="6793182">,</span>&nbsp;<span class="num" id="6793184">38</span><span class="op" id="6793186">,</span>&nbsp;<span class="num" id="6793188">0</span><span class="op" id="6793189">,</span>&nbsp;<span class="num" id="6793191">255</span><span class="op" id="6793194">}</span><span class="op" id="6793195">}</span><span class="op" id="6793196">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6793199">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6793238">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6793263">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6793310">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6793352">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6793395">{</span><span class="string" id="6793396">&#34;generic&#34;</span><span class="op" id="6793405">,</span>&nbsp;<span class="ident" id="6793407">fillBlue</span><span class="op" id="6793415">(</span><span class="num" id="6793416">255</span><span class="op" id="6793419">)</span><span class="op" id="6793420">,</span>&nbsp;<span class="ident" id="6793422">vgradAlpha</span><span class="op" id="6793432">(</span><span class="num" id="6793433">192</span><span class="op" id="6793436">)</span><span class="op" id="6793437">,</span>&nbsp;<span class="ident" id="6793439">Over</span><span class="op" id="6793443">,</span>&nbsp;<span class="ident" id="6793445">color</span><span class="op" id="6793450">.</span><span class="ident" id="6793451">RGBA</span><span class="op" id="6793455">{</span><span class="num" id="6793456">81</span><span class="op" id="6793458">,</span>&nbsp;<span class="num" id="6793460">0</span><span class="op" id="6793461">,</span>&nbsp;<span class="num" id="6793463">102</span><span class="op" id="6793466">,</span>&nbsp;<span class="num" id="6793468">255</span><span class="op" id="6793471">}</span><span class="op" id="6793472">}</span><span class="op" id="6793473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6793476">{</span><span class="string" id="6793477">&#34;genericSrc&#34;</span><span class="op" id="6793489">,</span>&nbsp;<span class="ident" id="6793491">fillBlue</span><span class="op" id="6793499">(</span><span class="num" id="6793500">255</span><span class="op" id="6793503">)</span><span class="op" id="6793504">,</span>&nbsp;<span class="ident" id="6793506">vgradAlpha</span><span class="op" id="6793516">(</span><span class="num" id="6793517">192</span><span class="op" id="6793520">)</span><span class="op" id="6793521">,</span>&nbsp;<span class="ident" id="6793523">Src</span><span class="op" id="6793526">,</span>&nbsp;<span class="ident" id="6793528">color</span><span class="op" id="6793533">.</span><span class="ident" id="6793534">RGBA</span><span class="op" id="6793538">{</span><span class="num" id="6793539">0</span><span class="op" id="6793540">,</span>&nbsp;<span class="num" id="6793542">0</span><span class="op" id="6793543">,</span>&nbsp;<span class="num" id="6793545">102</span><span class="op" id="6793548">,</span>&nbsp;<span class="num" id="6793550">102</span><span class="op" id="6793553">}</span><span class="op" id="6793554">}</span><span class="op" id="6793555">,</span><br>
<span class="lineno"></span><span class="op" id="6793557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6793560">func</span>&nbsp;<span class="ident" id="6793565">makeGolden</span><span class="op" id="6793575">(</span><span class="ident" id="6793576">dst</span>&nbsp;<span class="ident" id="6793580">image</span><span class="op" id="6793585">.</span><span class="ident" id="6793586">Image</span><span class="op" id="6793591">,</span>&nbsp;<span class="ident" id="6793593">r</span>&nbsp;<span class="ident" id="6793595">image</span><span class="op" id="6793600">.</span><span class="ident" id="6793601">Rectangle</span><span class="op" id="6793610">,</span>&nbsp;<span class="ident" id="6793612">src</span>&nbsp;<span class="ident" id="6793616">image</span><span class="op" id="6793621">.</span><span class="ident" id="6793622">Image</span><span class="op" id="6793627">,</span>&nbsp;<span class="ident" id="6793629">sp</span>&nbsp;<span class="ident" id="6793632">image</span><span class="op" id="6793637">.</span><span class="ident" id="6793638">Point</span><span class="op" id="6793643">,</span>&nbsp;<span class="ident" id="6793645">mask</span>&nbsp;<span class="ident" id="6793650">image</span><span class="op" id="6793655">.</span><span class="ident" id="6793656">Image</span><span class="op" id="6793661">,</span>&nbsp;<span class="ident" id="6793663">mp</span>&nbsp;<span class="ident" id="6793666">image</span><span class="op" id="6793671">.</span><span class="ident" id="6793672">Point</span><span class="op" id="6793677">,</span>&nbsp;<span class="ident" id="6793679">op</span>&nbsp;<span class="ident" id="6793682">Op</span><span class="op" id="6793684">)</span>&nbsp;<span class="ident" id="6793686">image</span><span class="op" id="6793691">.</span><span class="ident" id="6793692">Image</span>&nbsp;<span class="op" id="6793698">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6793701">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6793776">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6793846">b</span>&nbsp;<span class="op" id="6793848">:=</span>&nbsp;<span class="ident" id="6793851">dst</span><span class="op" id="6793854">.</span><span class="ident" id="6793855">Bounds</span><span class="op" id="6793861">(</span><span class="op" id="6793862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6793865">sb</span>&nbsp;<span class="op" id="6793868">:=</span>&nbsp;<span class="ident" id="6793871">src</span><span class="op" id="6793874">.</span><span class="ident" id="6793875">Bounds</span><span class="op" id="6793881">(</span><span class="op" id="6793882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6793885">mb</span>&nbsp;<span class="op" id="6793888">:=</span>&nbsp;<span class="ident" id="6793891">image</span><span class="op" id="6793896">.</span><span class="ident" id="6793897">Rect</span><span class="op" id="6793901">(</span><span class="op" id="6793902">-</span><span class="num" id="6793903">1e9</span><span class="op" id="6793906">,</span>&nbsp;<span class="op" id="6793908">-</span><span class="num" id="6793909">1e9</span><span class="op" id="6793912">,</span>&nbsp;<span class="num" id="6793914">1e9</span><span class="op" id="6793917">,</span>&nbsp;<span class="num" id="6793919">1e9</span><span class="op" id="6793922">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6793925">if</span>&nbsp;<span class="ident" id="6793928">mask</span>&nbsp;<span class="op" id="6793933">!=</span>&nbsp;<span class="ident" id="6793936">nil</span>&nbsp;<span class="op" id="6793940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6793944">mb</span>&nbsp;<span class="op" id="6793947">=</span>&nbsp;<span class="ident" id="6793949">mask</span><span class="op" id="6793953">.</span><span class="ident" id="6793954">Bounds</span><span class="op" id="6793960">(</span><span class="op" id="6793961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6793964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6793967">golden</span>&nbsp;<span class="op" id="6793974">:=</span>&nbsp;<span class="ident" id="6793977">image</span><span class="op" id="6793982">.</span><span class="ident" id="6793983">NewRGBA</span><span class="op" id="6793990">(</span><span class="ident" id="6793991">image</span><span class="op" id="6793996">.</span><span class="ident" id="6793997">Rect</span><span class="op" id="6794001">(</span><span class="num" id="6794002">0</span><span class="op" id="6794003">,</span>&nbsp;<span class="num" id="6794005">0</span><span class="op" id="6794006">,</span>&nbsp;<span class="ident" id="6794008">b</span><span class="op" id="6794009">.</span><span class="ident" id="6794010">Max</span><span class="op" id="6794013">.</span><span class="ident" id="6794014">X</span><span class="op" id="6794015">,</span>&nbsp;<span class="ident" id="6794017">b</span><span class="op" id="6794018">.</span><span class="ident" id="6794019">Max</span><span class="op" id="6794022">.</span><span class="ident" id="6794023">Y</span><span class="op" id="6794024">)</span><span class="op" id="6794025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794028">for</span>&nbsp;<span class="ident" id="6794032">y</span>&nbsp;<span class="op" id="6794034">:=</span>&nbsp;<span class="ident" id="6794037">r</span><span class="op" id="6794038">.</span><span class="ident" id="6794039">Min</span><span class="op" id="6794042">.</span><span class="ident" id="6794043">Y</span><span class="op" id="6794044">;</span>&nbsp;<span class="ident" id="6794046">y</span>&nbsp;<span class="op" id="6794048">&lt;</span>&nbsp;<span class="ident" id="6794050">r</span><span class="op" id="6794051">.</span><span class="ident" id="6794052">Max</span><span class="op" id="6794055">.</span><span class="ident" id="6794056">Y</span><span class="op" id="6794057">;</span>&nbsp;<span class="ident" id="6794059">y</span><span class="op" id="6794060">++</span>&nbsp;<span class="op" id="6794063">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794067">sy</span>&nbsp;<span class="op" id="6794070">:=</span>&nbsp;<span class="ident" id="6794073">y</span>&nbsp;<span class="op" id="6794075">+</span>&nbsp;<span class="ident" id="6794077">sp</span><span class="op" id="6794079">.</span><span class="ident" id="6794080">Y</span>&nbsp;<span class="op" id="6794082">-</span>&nbsp;<span class="ident" id="6794084">r</span><span class="op" id="6794085">.</span><span class="ident" id="6794086">Min</span><span class="op" id="6794089">.</span><span class="ident" id="6794090">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794094">my</span>&nbsp;<span class="op" id="6794097">:=</span>&nbsp;<span class="ident" id="6794100">y</span>&nbsp;<span class="op" id="6794102">+</span>&nbsp;<span class="ident" id="6794104">mp</span><span class="op" id="6794106">.</span><span class="ident" id="6794107">Y</span>&nbsp;<span class="op" id="6794109">-</span>&nbsp;<span class="ident" id="6794111">r</span><span class="op" id="6794112">.</span><span class="ident" id="6794113">Min</span><span class="op" id="6794116">.</span><span class="ident" id="6794117">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794121">for</span>&nbsp;<span class="ident" id="6794125">x</span>&nbsp;<span class="op" id="6794127">:=</span>&nbsp;<span class="ident" id="6794130">r</span><span class="op" id="6794131">.</span><span class="ident" id="6794132">Min</span><span class="op" id="6794135">.</span><span class="ident" id="6794136">X</span><span class="op" id="6794137">;</span>&nbsp;<span class="ident" id="6794139">x</span>&nbsp;<span class="op" id="6794141">&lt;</span>&nbsp;<span class="ident" id="6794143">r</span><span class="op" id="6794144">.</span><span class="ident" id="6794145">Max</span><span class="op" id="6794148">.</span><span class="ident" id="6794149">X</span><span class="op" id="6794150">;</span>&nbsp;<span class="ident" id="6794152">x</span><span class="op" id="6794153">++</span>&nbsp;<span class="op" id="6794156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794161">if</span>&nbsp;<span class="op" id="6794164">!</span><span class="op" id="6794165">(</span><span class="ident" id="6794166">image</span><span class="op" id="6794171">.</span><span class="ident" id="6794172">Pt</span><span class="op" id="6794174">(</span><span class="ident" id="6794175">x</span><span class="op" id="6794176">,</span>&nbsp;<span class="ident" id="6794178">y</span><span class="op" id="6794179">)</span><span class="op" id="6794180">.</span><span class="ident" id="6794181">In</span><span class="op" id="6794183">(</span><span class="ident" id="6794184">b</span><span class="op" id="6794185">)</span><span class="op" id="6794186">)</span>&nbsp;<span class="op" id="6794188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794194">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6794206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794211">sx</span>&nbsp;<span class="op" id="6794214">:=</span>&nbsp;<span class="ident" id="6794217">x</span>&nbsp;<span class="op" id="6794219">+</span>&nbsp;<span class="ident" id="6794221">sp</span><span class="op" id="6794223">.</span><span class="ident" id="6794224">X</span>&nbsp;<span class="op" id="6794226">-</span>&nbsp;<span class="ident" id="6794228">r</span><span class="op" id="6794229">.</span><span class="ident" id="6794230">Min</span><span class="op" id="6794233">.</span><span class="ident" id="6794234">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794239">if</span>&nbsp;<span class="op" id="6794242">!</span><span class="op" id="6794243">(</span><span class="ident" id="6794244">image</span><span class="op" id="6794249">.</span><span class="ident" id="6794250">Pt</span><span class="op" id="6794252">(</span><span class="ident" id="6794253">sx</span><span class="op" id="6794255">,</span>&nbsp;<span class="ident" id="6794257">sy</span><span class="op" id="6794259">)</span><span class="op" id="6794260">.</span><span class="ident" id="6794261">In</span><span class="op" id="6794263">(</span><span class="ident" id="6794264">sb</span><span class="op" id="6794266">)</span><span class="op" id="6794267">)</span>&nbsp;<span class="op" id="6794269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794275">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6794287">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794292">mx</span>&nbsp;<span class="op" id="6794295">:=</span>&nbsp;<span class="ident" id="6794298">x</span>&nbsp;<span class="op" id="6794300">+</span>&nbsp;<span class="ident" id="6794302">mp</span><span class="op" id="6794304">.</span><span class="ident" id="6794305">X</span>&nbsp;<span class="op" id="6794307">-</span>&nbsp;<span class="ident" id="6794309">r</span><span class="op" id="6794310">.</span><span class="ident" id="6794311">Min</span><span class="op" id="6794314">.</span><span class="ident" id="6794315">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794320">if</span>&nbsp;<span class="op" id="6794323">!</span><span class="op" id="6794324">(</span><span class="ident" id="6794325">image</span><span class="op" id="6794330">.</span><span class="ident" id="6794331">Pt</span><span class="op" id="6794333">(</span><span class="ident" id="6794334">mx</span><span class="op" id="6794336">,</span>&nbsp;<span class="ident" id="6794338">my</span><span class="op" id="6794340">)</span><span class="op" id="6794341">.</span><span class="ident" id="6794342">In</span><span class="op" id="6794344">(</span><span class="ident" id="6794345">mb</span><span class="op" id="6794347">)</span><span class="op" id="6794348">)</span>&nbsp;<span class="op" id="6794350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794356">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6794368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794374">const</span>&nbsp;<span class="ident" id="6794380">M</span>&nbsp;<span class="op" id="6794382">=</span>&nbsp;<span class="num" id="6794384">1</span><span class="op" id="6794385">&lt;&lt;</span><span class="num" id="6794387">16</span>&nbsp;<span class="op" id="6794390">-</span>&nbsp;<span class="num" id="6794392">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794397">var</span>&nbsp;<span class="ident" id="6794401">dr</span><span class="op" id="6794403">,</span>&nbsp;<span class="ident" id="6794405">dg</span><span class="op" id="6794407">,</span>&nbsp;<span class="ident" id="6794409">db</span><span class="op" id="6794411">,</span>&nbsp;<span class="ident" id="6794413">da</span>&nbsp;<span class="builtintype" id="6794416">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794426">if</span>&nbsp;<span class="ident" id="6794429">op</span>&nbsp;<span class="op" id="6794432">==</span>&nbsp;<span class="ident" id="6794435">Over</span>&nbsp;<span class="op" id="6794440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794446">dr</span><span class="op" id="6794448">,</span>&nbsp;<span class="ident" id="6794450">dg</span><span class="op" id="6794452">,</span>&nbsp;<span class="ident" id="6794454">db</span><span class="op" id="6794456">,</span>&nbsp;<span class="ident" id="6794458">da</span>&nbsp;<span class="op" id="6794461">=</span>&nbsp;<span class="ident" id="6794463">dst</span><span class="op" id="6794466">.</span><span class="ident" id="6794467">At</span><span class="op" id="6794469">(</span><span class="ident" id="6794470">x</span><span class="op" id="6794471">,</span>&nbsp;<span class="ident" id="6794473">y</span><span class="op" id="6794474">)</span><span class="op" id="6794475">.</span><span class="ident" id="6794476">RGBA</span><span class="op" id="6794480">(</span><span class="op" id="6794481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6794486">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794491">sr</span><span class="op" id="6794493">,</span>&nbsp;<span class="ident" id="6794495">sg</span><span class="op" id="6794497">,</span>&nbsp;<span class="ident" id="6794499">sb</span><span class="op" id="6794501">,</span>&nbsp;<span class="ident" id="6794503">sa</span>&nbsp;<span class="op" id="6794506">:=</span>&nbsp;<span class="ident" id="6794509">src</span><span class="op" id="6794512">.</span><span class="ident" id="6794513">At</span><span class="op" id="6794515">(</span><span class="ident" id="6794516">sx</span><span class="op" id="6794518">,</span>&nbsp;<span class="ident" id="6794520">sy</span><span class="op" id="6794522">)</span><span class="op" id="6794523">.</span><span class="ident" id="6794524">RGBA</span><span class="op" id="6794528">(</span><span class="op" id="6794529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794534">ma</span>&nbsp;<span class="op" id="6794537">:=</span>&nbsp;<span class="builtintype" id="6794540">uint32</span><span class="op" id="6794546">(</span><span class="ident" id="6794547">M</span><span class="op" id="6794548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794553">if</span>&nbsp;<span class="ident" id="6794556">mask</span>&nbsp;<span class="op" id="6794561">!=</span>&nbsp;<span class="ident" id="6794564">nil</span>&nbsp;<span class="op" id="6794568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794574">_</span><span class="op" id="6794575">,</span>&nbsp;<span class="ident" id="6794577">_</span><span class="op" id="6794578">,</span>&nbsp;<span class="ident" id="6794580">_</span><span class="op" id="6794581">,</span>&nbsp;<span class="ident" id="6794583">ma</span>&nbsp;<span class="op" id="6794586">=</span>&nbsp;<span class="ident" id="6794588">mask</span><span class="op" id="6794592">.</span><span class="ident" id="6794593">At</span><span class="op" id="6794595">(</span><span class="ident" id="6794596">mx</span><span class="op" id="6794598">,</span>&nbsp;<span class="ident" id="6794600">my</span><span class="op" id="6794602">)</span><span class="op" id="6794603">.</span><span class="ident" id="6794604">RGBA</span><span class="op" id="6794608">(</span><span class="op" id="6794609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6794614">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794619">a</span>&nbsp;<span class="op" id="6794621">:=</span>&nbsp;<span class="ident" id="6794624">M</span>&nbsp;<span class="op" id="6794626">-</span>&nbsp;<span class="op" id="6794628">(</span><span class="ident" id="6794629">sa</span>&nbsp;<span class="op" id="6794632">*</span>&nbsp;<span class="ident" id="6794634">ma</span>&nbsp;<span class="op" id="6794637">/</span>&nbsp;<span class="ident" id="6794639">M</span><span class="op" id="6794640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794645">golden</span><span class="op" id="6794651">.</span><span class="ident" id="6794652">Set</span><span class="op" id="6794655">(</span><span class="ident" id="6794656">x</span><span class="op" id="6794657">,</span>&nbsp;<span class="ident" id="6794659">y</span><span class="op" id="6794660">,</span>&nbsp;<span class="ident" id="6794662">color</span><span class="op" id="6794667">.</span><span class="ident" id="6794668">RGBA64</span><span class="op" id="6794674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6794680">uint16</span><span class="op" id="6794686">(</span><span class="op" id="6794687">(</span><span class="ident" id="6794688">dr</span><span class="op" id="6794690">*</span><span class="ident" id="6794691">a</span>&nbsp;<span class="op" id="6794693">+</span>&nbsp;<span class="ident" id="6794695">sr</span><span class="op" id="6794697">*</span><span class="ident" id="6794698">ma</span><span class="op" id="6794700">)</span>&nbsp;<span class="op" id="6794702">/</span>&nbsp;<span class="ident" id="6794704">M</span><span class="op" id="6794705">)</span><span class="op" id="6794706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6794712">uint16</span><span class="op" id="6794718">(</span><span class="op" id="6794719">(</span><span class="ident" id="6794720">dg</span><span class="op" id="6794722">*</span><span class="ident" id="6794723">a</span>&nbsp;<span class="op" id="6794725">+</span>&nbsp;<span class="ident" id="6794727">sg</span><span class="op" id="6794729">*</span><span class="ident" id="6794730">ma</span><span class="op" id="6794732">)</span>&nbsp;<span class="op" id="6794734">/</span>&nbsp;<span class="ident" id="6794736">M</span><span class="op" id="6794737">)</span><span class="op" id="6794738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6794744">uint16</span><span class="op" id="6794750">(</span><span class="op" id="6794751">(</span><span class="ident" id="6794752">db</span><span class="op" id="6794754">*</span><span class="ident" id="6794755">a</span>&nbsp;<span class="op" id="6794757">+</span>&nbsp;<span class="ident" id="6794759">sb</span><span class="op" id="6794761">*</span><span class="ident" id="6794762">ma</span><span class="op" id="6794764">)</span>&nbsp;<span class="op" id="6794766">/</span>&nbsp;<span class="ident" id="6794768">M</span><span class="op" id="6794769">)</span><span class="op" id="6794770">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6794776">uint16</span><span class="op" id="6794782">(</span><span class="op" id="6794783">(</span><span class="ident" id="6794784">da</span><span class="op" id="6794786">*</span><span class="ident" id="6794787">a</span>&nbsp;<span class="op" id="6794789">+</span>&nbsp;<span class="ident" id="6794791">sa</span><span class="op" id="6794793">*</span><span class="ident" id="6794794">ma</span><span class="op" id="6794796">)</span>&nbsp;<span class="op" id="6794798">/</span>&nbsp;<span class="ident" id="6794800">M</span><span class="op" id="6794801">)</span><span class="op" id="6794802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6794807">}</span><span class="op" id="6794808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6794812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6794815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6794818">return</span>&nbsp;<span class="ident" id="6794825">golden</span><span class="op" id="6794831">.</span><span class="ident" id="6794832">SubImage</span><span class="op" id="6794840">(</span><span class="ident" id="6794841">b</span><span class="op" id="6794842">)</span><br>
<span class="lineno">205</span><span class="op" id="6794844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6794847">func</span>&nbsp;<span class="ident" id="6794852">TestDraw</span><span class="op" id="6794860">(</span><span class="ident" id="6794861">t</span>&nbsp;<span class="op" id="6794863">*</span><span class="ident" id="6794864">testing</span><span class="op" id="6794871">.</span><span class="ident" id="6794872">T</span><span class="op" id="6794873">)</span>&nbsp;<span class="op" id="6794875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794878">rr</span>&nbsp;<span class="op" id="6794881">:=</span>&nbsp;<span class="op" id="6794884">[</span><span class="op" id="6794885">]</span><span class="ident" id="6794886">image</span><span class="op" id="6794891">.</span><span class="ident" id="6794892">Rectangle</span><span class="op" id="6794901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794905">image</span><span class="op" id="6794910">.</span><span class="ident" id="6794911">Rect</span><span class="op" id="6794915">(</span><span class="num" id="6794916">0</span><span class="op" id="6794917">,</span>&nbsp;<span class="num" id="6794919">0</span><span class="op" id="6794920">,</span>&nbsp;<span class="num" id="6794922">0</span><span class="op" id="6794923">,</span>&nbsp;<span class="num" id="6794925">0</span><span class="op" id="6794926">)</span><span class="op" id="6794927">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794931">image</span><span class="op" id="6794936">.</span><span class="ident" id="6794937">Rect</span><span class="op" id="6794941">(</span><span class="num" id="6794942">0</span><span class="op" id="6794943">,</span>&nbsp;<span class="num" id="6794945">0</span><span class="op" id="6794946">,</span>&nbsp;<span class="num" id="6794948">16</span><span class="op" id="6794950">,</span>&nbsp;<span class="num" id="6794952">16</span><span class="op" id="6794954">)</span><span class="op" id="6794955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794959">image</span><span class="op" id="6794964">.</span><span class="ident" id="6794965">Rect</span><span class="op" id="6794969">(</span><span class="num" id="6794970">3</span><span class="op" id="6794971">,</span>&nbsp;<span class="num" id="6794973">5</span><span class="op" id="6794974">,</span>&nbsp;<span class="num" id="6794976">12</span><span class="op" id="6794978">,</span>&nbsp;<span class="num" id="6794980">10</span><span class="op" id="6794982">)</span><span class="op" id="6794983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6794987">image</span><span class="op" id="6794992">.</span><span class="ident" id="6794993">Rect</span><span class="op" id="6794997">(</span><span class="num" id="6794998">0</span><span class="op" id="6794999">,</span>&nbsp;<span class="num" id="6795001">0</span><span class="op" id="6795002">,</span>&nbsp;<span class="num" id="6795004">9</span><span class="op" id="6795005">,</span>&nbsp;<span class="num" id="6795007">9</span><span class="op" id="6795008">)</span><span class="op" id="6795009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795013">image</span><span class="op" id="6795018">.</span><span class="ident" id="6795019">Rect</span><span class="op" id="6795023">(</span><span class="num" id="6795024">8</span><span class="op" id="6795025">,</span>&nbsp;<span class="num" id="6795027">8</span><span class="op" id="6795028">,</span>&nbsp;<span class="num" id="6795030">16</span><span class="op" id="6795032">,</span>&nbsp;<span class="num" id="6795034">16</span><span class="op" id="6795036">)</span><span class="op" id="6795037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795041">image</span><span class="op" id="6795046">.</span><span class="ident" id="6795047">Rect</span><span class="op" id="6795051">(</span><span class="num" id="6795052">8</span><span class="op" id="6795053">,</span>&nbsp;<span class="num" id="6795055">0</span><span class="op" id="6795056">,</span>&nbsp;<span class="num" id="6795058">9</span><span class="op" id="6795059">,</span>&nbsp;<span class="num" id="6795061">16</span><span class="op" id="6795063">)</span><span class="op" id="6795064">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795068">image</span><span class="op" id="6795073">.</span><span class="ident" id="6795074">Rect</span><span class="op" id="6795078">(</span><span class="num" id="6795079">0</span><span class="op" id="6795080">,</span>&nbsp;<span class="num" id="6795082">8</span><span class="op" id="6795083">,</span>&nbsp;<span class="num" id="6795085">16</span><span class="op" id="6795087">,</span>&nbsp;<span class="num" id="6795089">9</span><span class="op" id="6795090">)</span><span class="op" id="6795091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795095">image</span><span class="op" id="6795100">.</span><span class="ident" id="6795101">Rect</span><span class="op" id="6795105">(</span><span class="num" id="6795106">8</span><span class="op" id="6795107">,</span>&nbsp;<span class="num" id="6795109">8</span><span class="op" id="6795110">,</span>&nbsp;<span class="num" id="6795112">9</span><span class="op" id="6795113">,</span>&nbsp;<span class="num" id="6795115">9</span><span class="op" id="6795116">)</span><span class="op" id="6795117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795121">image</span><span class="op" id="6795126">.</span><span class="ident" id="6795127">Rect</span><span class="op" id="6795131">(</span><span class="num" id="6795132">8</span><span class="op" id="6795133">,</span>&nbsp;<span class="num" id="6795135">8</span><span class="op" id="6795136">,</span>&nbsp;<span class="num" id="6795138">8</span><span class="op" id="6795139">,</span>&nbsp;<span class="num" id="6795141">8</span><span class="op" id="6795142">)</span><span class="op" id="6795143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6795146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6795149">for</span>&nbsp;<span class="ident" id="6795153">_</span><span class="op" id="6795154">,</span>&nbsp;<span class="ident" id="6795156">r</span>&nbsp;<span class="op" id="6795158">:=</span>&nbsp;<span class="keyword" id="6795161">range</span>&nbsp;<span class="ident" id="6795167">rr</span>&nbsp;<span class="op" id="6795170">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795173">loop</span><span class="op" id="6795177">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6795181">for</span>&nbsp;<span class="ident" id="6795185">_</span><span class="op" id="6795186">,</span>&nbsp;<span class="ident" id="6795188">test</span>&nbsp;<span class="op" id="6795193">:=</span>&nbsp;<span class="keyword" id="6795196">range</span>&nbsp;<span class="ident" id="6795202">drawTests</span>&nbsp;<span class="op" id="6795212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795217">dst</span>&nbsp;<span class="op" id="6795221">:=</span>&nbsp;<span class="ident" id="6795224">hgradRed</span><span class="op" id="6795232">(</span><span class="num" id="6795233">255</span><span class="op" id="6795236">)</span><span class="op" id="6795237">.</span><span class="op" id="6795238">(</span><span class="op" id="6795239">*</span><span class="ident" id="6795240">image</span><span class="op" id="6795245">.</span><span class="ident" id="6795246">RGBA</span><span class="op" id="6795250">)</span><span class="op" id="6795251">.</span><span class="ident" id="6795252">SubImage</span><span class="op" id="6795260">(</span><span class="ident" id="6795261">r</span><span class="op" id="6795262">)</span><span class="op" id="6795263">.</span><span class="op" id="6795264">(</span><span class="ident" id="6795265">Image</span><span class="op" id="6795270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6795275">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795376">golden</span>&nbsp;<span class="op" id="6795383">:=</span>&nbsp;<span class="ident" id="6795386">makeGolden</span><span class="op" id="6795396">(</span><span class="ident" id="6795397">dst</span><span class="op" id="6795400">,</span>&nbsp;<span class="ident" id="6795402">image</span><span class="op" id="6795407">.</span><span class="ident" id="6795408">Rect</span><span class="op" id="6795412">(</span><span class="num" id="6795413">0</span><span class="op" id="6795414">,</span>&nbsp;<span class="num" id="6795416">0</span><span class="op" id="6795417">,</span>&nbsp;<span class="num" id="6795419">16</span><span class="op" id="6795421">,</span>&nbsp;<span class="num" id="6795423">16</span><span class="op" id="6795425">)</span><span class="op" id="6795426">,</span>&nbsp;<span class="ident" id="6795428">test</span><span class="op" id="6795432">.</span><span class="ident" id="6795433">src</span><span class="op" id="6795436">,</span>&nbsp;<span class="ident" id="6795438">image</span><span class="op" id="6795443">.</span><span class="ident" id="6795444">ZP</span><span class="op" id="6795446">,</span>&nbsp;<span class="ident" id="6795448">test</span><span class="op" id="6795452">.</span><span class="ident" id="6795453">mask</span><span class="op" id="6795457">,</span>&nbsp;<span class="ident" id="6795459">image</span><span class="op" id="6795464">.</span><span class="ident" id="6795465">ZP</span><span class="op" id="6795467">,</span>&nbsp;<span class="ident" id="6795469">test</span><span class="op" id="6795473">.</span><span class="ident" id="6795474">op</span><span class="op" id="6795476">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795481">b</span>&nbsp;<span class="op" id="6795483">:=</span>&nbsp;<span class="ident" id="6795486">dst</span><span class="op" id="6795489">.</span><span class="ident" id="6795490">Bounds</span><span class="op" id="6795496">(</span><span class="op" id="6795497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6795502">if</span>&nbsp;<span class="op" id="6795505">!</span><span class="ident" id="6795506">b</span><span class="op" id="6795507">.</span><span class="ident" id="6795508">Eq</span><span class="op" id="6795510">(</span><span class="ident" id="6795511">golden</span><span class="op" id="6795517">.</span><span class="ident" id="6795518">Bounds</span><span class="op" id="6795524">(</span><span class="op" id="6795525">)</span><span class="op" id="6795526">)</span>&nbsp;<span class="op" id="6795528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795534">t</span><span class="op" id="6795535">.</span><span class="ident" id="6795536">Errorf</span><span class="op" id="6795542">(</span><span class="string" id="6795543">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6795576">,</span>&nbsp;<span class="ident" id="6795578">r</span><span class="op" id="6795579">,</span>&nbsp;<span class="ident" id="6795581">test</span><span class="op" id="6795585">.</span><span class="ident" id="6795586">desc</span><span class="op" id="6795590">,</span>&nbsp;<span class="ident" id="6795592">dst</span><span class="op" id="6795595">.</span><span class="ident" id="6795596">Bounds</span><span class="op" id="6795602">(</span><span class="op" id="6795603">)</span><span class="op" id="6795604">,</span>&nbsp;<span class="ident" id="6795606">golden</span><span class="op" id="6795612">.</span><span class="ident" id="6795613">Bounds</span><span class="op" id="6795619">(</span><span class="op" id="6795620">)</span><span class="op" id="6795621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6795627">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6795639">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6795644">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6795741">DrawMask</span><span class="op" id="6795749">(</span><span class="ident" id="6795750">dst</span><span class="op" id="6795753">,</span>&nbsp;<span class="ident" id="6795755">image</span><span class="op" id="6795760">.</span><span class="ident" id="6795761">Rect</span><span class="op" id="6795765">(</span><span class="num" id="6795766">0</span><span class="op" id="6795767">,</span>&nbsp;<span class="num" id="6795769">0</span><span class="op" id="6795770">,</span>&nbsp;<span class="num" id="6795772">16</span><span class="op" id="6795774">,</span>&nbsp;<span class="num" id="6795776">16</span><span class="op" id="6795778">)</span><span class="op" id="6795779">,</span>&nbsp;<span class="ident" id="6795781">test</span><span class="op" id="6795785">.</span><span class="ident" id="6795786">src</span><span class="op" id="6795789">,</span>&nbsp;<span class="ident" id="6795791">image</span><span class="op" id="6795796">.</span><span class="ident" id="6795797">ZP</span><span class="op" id="6795799">,</span>&nbsp;<span class="ident" id="6795801">test</span><span class="op" id="6795805">.</span><span class="ident" id="6795806">mask</span><span class="op" id="6795810">,</span>&nbsp;<span class="ident" id="6795812">image</span><span class="op" id="6795817">.</span><span class="ident" id="6795818">ZP</span><span class="op" id="6795820">,</span>&nbsp;<span class="ident" id="6795822">test</span><span class="op" id="6795826">.</span><span class="ident" id="6795827">op</span><span class="op" id="6795829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6795834">if</span>&nbsp;<span class="ident" id="6795837">image</span><span class="op" id="6795842">.</span><span class="ident" id="6795843">Pt</span><span class="op" id="6795845">(</span><span class="num" id="6795846">8</span><span class="op" id="6795847">,</span>&nbsp;<span class="num" id="6795849">8</span><span class="op" id="6795850">)</span><span class="op" id="6795851">.</span><span class="ident" id="6795852">In</span><span class="op" id="6795854">(</span><span class="ident" id="6795855">r</span><span class="op" id="6795856">)</span>&nbsp;<span class="op" id="6795858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6795864">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6795935">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6795988">if</span>&nbsp;<span class="op" id="6795991">!</span><span class="ident" id="6795992">eq</span><span class="op" id="6795994">(</span><span class="ident" id="6795995">dst</span><span class="op" id="6795998">.</span><span class="ident" id="6795999">At</span><span class="op" id="6796001">(</span><span class="num" id="6796002">8</span><span class="op" id="6796003">,</span>&nbsp;<span class="num" id="6796005">8</span><span class="op" id="6796006">)</span><span class="op" id="6796007">,</span>&nbsp;<span class="ident" id="6796009">test</span><span class="op" id="6796013">.</span><span class="ident" id="6796014">expected</span><span class="op" id="6796022">)</span>&nbsp;<span class="op" id="6796024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6796031">t</span><span class="op" id="6796032">.</span><span class="ident" id="6796033">Errorf</span><span class="op" id="6796039">(</span><span class="string" id="6796040">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6796076">,</span>&nbsp;<span class="ident" id="6796078">r</span><span class="op" id="6796079">,</span>&nbsp;<span class="ident" id="6796081">test</span><span class="op" id="6796085">.</span><span class="ident" id="6796086">desc</span><span class="op" id="6796090">,</span>&nbsp;<span class="ident" id="6796092">dst</span><span class="op" id="6796095">.</span><span class="ident" id="6796096">At</span><span class="op" id="6796098">(</span><span class="num" id="6796099">8</span><span class="op" id="6796100">,</span>&nbsp;<span class="num" id="6796102">8</span><span class="op" id="6796103">)</span><span class="op" id="6796104">,</span>&nbsp;<span class="ident" id="6796106">test</span><span class="op" id="6796110">.</span><span class="ident" id="6796111">expected</span><span class="op" id="6796119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6796126">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6796139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6796144">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6796149">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6796217">for</span>&nbsp;<span class="ident" id="6796221">y</span>&nbsp;<span class="op" id="6796223">:=</span>&nbsp;<span class="ident" id="6796226">b</span><span class="op" id="6796227">.</span><span class="ident" id="6796228">Min</span><span class="op" id="6796231">.</span><span class="ident" id="6796232">Y</span><span class="op" id="6796233">;</span>&nbsp;<span class="ident" id="6796235">y</span>&nbsp;<span class="op" id="6796237">&lt;</span>&nbsp;<span class="ident" id="6796239">b</span><span class="op" id="6796240">.</span><span class="ident" id="6796241">Max</span><span class="op" id="6796244">.</span><span class="ident" id="6796245">Y</span><span class="op" id="6796246">;</span>&nbsp;<span class="ident" id="6796248">y</span><span class="op" id="6796249">++</span>&nbsp;<span class="op" id="6796252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6796258">for</span>&nbsp;<span class="ident" id="6796262">x</span>&nbsp;<span class="op" id="6796264">:=</span>&nbsp;<span class="ident" id="6796267">b</span><span class="op" id="6796268">.</span><span class="ident" id="6796269">Min</span><span class="op" id="6796272">.</span><span class="ident" id="6796273">X</span><span class="op" id="6796274">;</span>&nbsp;<span class="ident" id="6796276">x</span>&nbsp;<span class="op" id="6796278">&lt;</span>&nbsp;<span class="ident" id="6796280">b</span><span class="op" id="6796281">.</span><span class="ident" id="6796282">Max</span><span class="op" id="6796285">.</span><span class="ident" id="6796286">X</span><span class="op" id="6796287">;</span>&nbsp;<span class="ident" id="6796289">x</span><span class="op" id="6796290">++</span>&nbsp;<span class="op" id="6796293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6796300">if</span>&nbsp;<span class="op" id="6796303">!</span><span class="ident" id="6796304">eq</span><span class="op" id="6796306">(</span><span class="ident" id="6796307">dst</span><span class="op" id="6796310">.</span><span class="ident" id="6796311">At</span><span class="op" id="6796313">(</span><span class="ident" id="6796314">x</span><span class="op" id="6796315">,</span>&nbsp;<span class="ident" id="6796317">y</span><span class="op" id="6796318">)</span><span class="op" id="6796319">,</span>&nbsp;<span class="ident" id="6796321">golden</span><span class="op" id="6796327">.</span><span class="ident" id="6796328">At</span><span class="op" id="6796330">(</span><span class="ident" id="6796331">x</span><span class="op" id="6796332">,</span>&nbsp;<span class="ident" id="6796334">y</span><span class="op" id="6796335">)</span><span class="op" id="6796336">)</span>&nbsp;<span class="op" id="6796338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6796346">t</span><span class="op" id="6796347">.</span><span class="ident" id="6796348">Errorf</span><span class="op" id="6796354">(</span><span class="string" id="6796355">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6796401">,</span>&nbsp;<span class="ident" id="6796403">r</span><span class="op" id="6796404">,</span>&nbsp;<span class="ident" id="6796406">test</span><span class="op" id="6796410">.</span><span class="ident" id="6796411">desc</span><span class="op" id="6796415">,</span>&nbsp;<span class="ident" id="6796417">x</span><span class="op" id="6796418">,</span>&nbsp;<span class="ident" id="6796420">y</span><span class="op" id="6796421">,</span>&nbsp;<span class="ident" id="6796423">dst</span><span class="op" id="6796426">.</span><span class="ident" id="6796427">At</span><span class="op" id="6796429">(</span><span class="ident" id="6796430">x</span><span class="op" id="6796431">,</span>&nbsp;<span class="ident" id="6796433">y</span><span class="op" id="6796434">)</span><span class="op" id="6796435">,</span>&nbsp;<span class="ident" id="6796437">golden</span><span class="op" id="6796443">.</span><span class="ident" id="6796444">At</span><span class="op" id="6796446">(</span><span class="ident" id="6796447">x</span><span class="op" id="6796448">,</span>&nbsp;<span class="ident" id="6796450">y</span><span class="op" id="6796451">)</span><span class="op" id="6796452">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6796460">continue</span>&nbsp;<span class="ident" id="6796469">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6796479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6796485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6796490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6796494">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6796497">}</span><br>
<span class="lineno"></span><span class="op" id="6796499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6796502">func</span>&nbsp;<span class="ident" id="6796507">TestDrawOverlap</span><span class="op" id="6796522">(</span><span class="ident" id="6796523">t</span>&nbsp;<span class="op" id="6796525">*</span><span class="ident" id="6796526">testing</span><span class="op" id="6796533">.</span><span class="ident" id="6796534">T</span><span class="op" id="6796535">)</span>&nbsp;<span class="op" id="6796537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6796540">for</span>&nbsp;<span class="ident" id="6796544">_</span><span class="op" id="6796545">,</span>&nbsp;<span class="ident" id="6796547">op</span>&nbsp;<span class="op" id="6796550">:=</span>&nbsp;<span class="keyword" id="6796553">range</span>&nbsp;<span class="op" id="6796559">[</span><span class="op" id="6796560">]</span><span class="ident" id="6796561">Op</span><span class="op" id="6796563">{</span><span class="ident" id="6796564">Over</span><span class="op" id="6796568">,</span>&nbsp;<span class="ident" id="6796570">Src</span><span class="op" id="6796573">}</span>&nbsp;<span class="op" id="6796575">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6796579">for</span>&nbsp;<span class="ident" id="6796583">yoff</span>&nbsp;<span class="op" id="6796588">:=</span>&nbsp;<span class="op" id="6796591">-</span><span class="num" id="6796592">2</span><span class="op" id="6796593">;</span>&nbsp;<span class="ident" id="6796595">yoff</span>&nbsp;<span class="op" id="6796600">&lt;=</span>&nbsp;<span class="num" id="6796603">2</span><span class="op" id="6796604">;</span>&nbsp;<span class="ident" id="6796606">yoff</span><span class="op" id="6796610">++</span>&nbsp;<span class="op" id="6796613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6796617">loop</span><span class="op" id="6796621">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6796626">for</span>&nbsp;<span class="ident" id="6796630">xoff</span>&nbsp;<span class="op" id="6796635">:=</span>&nbsp;<span class="op" id="6796638">-</span><span class="num" id="6796639">2</span><span class="op" id="6796640">;</span>&nbsp;<span class="ident" id="6796642">xoff</span>&nbsp;<span class="op" id="6796647">&lt;=</span>&nbsp;<span class="num" id="6796650">2</span><span class="op" id="6796651">;</span>&nbsp;<span class="ident" id="6796653">xoff</span><span class="op" id="6796657">++</span>&nbsp;<span class="op" id="6796660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6796666">m</span>&nbsp;<span class="op" id="6796668">:=</span>&nbsp;<span class="ident" id="6796671">gradYellow</span><span class="op" id="6796681">(</span><span class="num" id="6796682">127</span><span class="op" id="6796685">)</span><span class="op" id="6796686">.</span><span class="op" id="6796687">(</span><span class="op" id="6796688">*</span><span class="ident" id="6796689">image</span><span class="op" id="6796694">.</span><span class="ident" id="6796695">RGBA</span><span class="op" id="6796699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6796705">dst</span>&nbsp;<span class="op" id="6796709">:=</span>&nbsp;<span class="ident" id="6796712">m</span><span class="op" id="6796713">.</span><span class="ident" id="6796714">SubImage</span><span class="op" id="6796722">(</span><span class="ident" id="6796723">image</span><span class="op" id="6796728">.</span><span class="ident" id="6796729">Rect</span><span class="op" id="6796733">(</span><span class="num" id="6796734">5</span><span class="op" id="6796735">,</span>&nbsp;<span class="num" id="6796737">5</span><span class="op" id="6796738">,</span>&nbsp;<span class="num" id="6796740">10</span><span class="op" id="6796742">,</span>&nbsp;<span class="num" id="6796744">10</span><span class="op" id="6796746">)</span><span class="op" id="6796747">)</span><span class="op" id="6796748">.</span><span class="op" id="6796749">(</span><span class="op" id="6796750">*</span><span class="ident" id="6796751">image</span><span class="op" id="6796756">.</span><span class="ident" id="6796757">RGBA</span><span class="op" id="6796761">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6796767">src</span>&nbsp;<span class="op" id="6796771">:=</span>&nbsp;<span class="ident" id="6796774">m</span><span class="op" id="6796775">.</span><span class="ident" id="6796776">SubImage</span><span class="op" id="6796784">(</span><span class="ident" id="6796785">image</span><span class="op" id="6796790">.</span><span class="ident" id="6796791">Rect</span><span class="op" id="6796795">(</span><span class="num" id="6796796">5</span><span class="op" id="6796797">+</span><span class="ident" id="6796798">xoff</span><span class="op" id="6796802">,</span>&nbsp;<span class="num" id="6796804">5</span><span class="op" id="6796805">+</span><span class="ident" id="6796806">yoff</span><span class="op" id="6796810">,</span>&nbsp;<span class="num" id="6796812">10</span><span class="op" id="6796814">+</span><span class="ident" id="6796815">xoff</span><span class="op" id="6796819">,</span>&nbsp;<span class="num" id="6796821">10</span><span class="op" id="6796823">+</span><span class="ident" id="6796824">yoff</span><span class="op" id="6796828">)</span><span class="op" id="6796829">)</span><span class="op" id="6796830">.</span><span class="op" id="6796831">(</span><span class="op" id="6796832">*</span><span class="ident" id="6796833">image</span><span class="op" id="6796838">.</span><span class="ident" id="6796839">RGBA</span><span class="op" id="6796843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6796849">b</span>&nbsp;<span class="op" id="6796851">:=</span>&nbsp;<span class="ident" id="6796854">dst</span><span class="op" id="6796857">.</span><span class="ident" id="6796858">Bounds</span><span class="op" id="6796864">(</span><span class="op" id="6796865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6796871">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6796973">golden</span>&nbsp;<span class="op" id="6796980">:=</span>&nbsp;<span class="ident" id="6796983">makeGolden</span><span class="op" id="6796993">(</span><span class="ident" id="6796994">dst</span><span class="op" id="6796997">,</span>&nbsp;<span class="ident" id="6796999">b</span><span class="op" id="6797000">,</span>&nbsp;<span class="ident" id="6797002">src</span><span class="op" id="6797005">,</span>&nbsp;<span class="ident" id="6797007">src</span><span class="op" id="6797010">.</span><span class="ident" id="6797011">Bounds</span><span class="op" id="6797017">(</span><span class="op" id="6797018">)</span><span class="op" id="6797019">.</span><span class="ident" id="6797020">Min</span><span class="op" id="6797023">,</span>&nbsp;<span class="ident" id="6797025">nil</span><span class="op" id="6797028">,</span>&nbsp;<span class="ident" id="6797030">image</span><span class="op" id="6797035">.</span><span class="ident" id="6797036">ZP</span><span class="op" id="6797038">,</span>&nbsp;<span class="ident" id="6797040">op</span><span class="op" id="6797042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6797048">if</span>&nbsp;<span class="op" id="6797051">!</span><span class="ident" id="6797052">b</span><span class="op" id="6797053">.</span><span class="ident" id="6797054">Eq</span><span class="op" id="6797056">(</span><span class="ident" id="6797057">golden</span><span class="op" id="6797063">.</span><span class="ident" id="6797064">Bounds</span><span class="op" id="6797070">(</span><span class="op" id="6797071">)</span><span class="op" id="6797072">)</span>&nbsp;<span class="op" id="6797074">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797081">t</span><span class="op" id="6797082">.</span><span class="ident" id="6797083">Errorf</span><span class="op" id="6797089">(</span><span class="string" id="6797090">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6797140">,</span>&nbsp;<span class="ident" id="6797142">xoff</span><span class="op" id="6797146">,</span>&nbsp;<span class="ident" id="6797148">yoff</span><span class="op" id="6797152">,</span>&nbsp;<span class="ident" id="6797154">dst</span><span class="op" id="6797157">.</span><span class="ident" id="6797158">Bounds</span><span class="op" id="6797164">(</span><span class="op" id="6797165">)</span><span class="op" id="6797166">,</span>&nbsp;<span class="ident" id="6797168">golden</span><span class="op" id="6797174">.</span><span class="ident" id="6797175">Bounds</span><span class="op" id="6797181">(</span><span class="op" id="6797182">)</span><span class="op" id="6797183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6797190">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6797209">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797307">DrawMask</span><span class="op" id="6797315">(</span><span class="ident" id="6797316">dst</span><span class="op" id="6797319">,</span>&nbsp;<span class="ident" id="6797321">b</span><span class="op" id="6797322">,</span>&nbsp;<span class="ident" id="6797324">src</span><span class="op" id="6797327">,</span>&nbsp;<span class="ident" id="6797329">src</span><span class="op" id="6797332">.</span><span class="ident" id="6797333">Bounds</span><span class="op" id="6797339">(</span><span class="op" id="6797340">)</span><span class="op" id="6797341">.</span><span class="ident" id="6797342">Min</span><span class="op" id="6797345">,</span>&nbsp;<span class="ident" id="6797347">nil</span><span class="op" id="6797350">,</span>&nbsp;<span class="ident" id="6797352">image</span><span class="op" id="6797357">.</span><span class="ident" id="6797358">ZP</span><span class="op" id="6797360">,</span>&nbsp;<span class="ident" id="6797362">op</span><span class="op" id="6797364">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6797370">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6797439">for</span>&nbsp;<span class="ident" id="6797443">y</span>&nbsp;<span class="op" id="6797445">:=</span>&nbsp;<span class="ident" id="6797448">b</span><span class="op" id="6797449">.</span><span class="ident" id="6797450">Min</span><span class="op" id="6797453">.</span><span class="ident" id="6797454">Y</span><span class="op" id="6797455">;</span>&nbsp;<span class="ident" id="6797457">y</span>&nbsp;<span class="op" id="6797459">&lt;</span>&nbsp;<span class="ident" id="6797461">b</span><span class="op" id="6797462">.</span><span class="ident" id="6797463">Max</span><span class="op" id="6797466">.</span><span class="ident" id="6797467">Y</span><span class="op" id="6797468">;</span>&nbsp;<span class="ident" id="6797470">y</span><span class="op" id="6797471">++</span>&nbsp;<span class="op" id="6797474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6797481">for</span>&nbsp;<span class="ident" id="6797485">x</span>&nbsp;<span class="op" id="6797487">:=</span>&nbsp;<span class="ident" id="6797490">b</span><span class="op" id="6797491">.</span><span class="ident" id="6797492">Min</span><span class="op" id="6797495">.</span><span class="ident" id="6797496">X</span><span class="op" id="6797497">;</span>&nbsp;<span class="ident" id="6797499">x</span>&nbsp;<span class="op" id="6797501">&lt;</span>&nbsp;<span class="ident" id="6797503">b</span><span class="op" id="6797504">.</span><span class="ident" id="6797505">Max</span><span class="op" id="6797508">.</span><span class="ident" id="6797509">X</span><span class="op" id="6797510">;</span>&nbsp;<span class="ident" id="6797512">x</span><span class="op" id="6797513">++</span>&nbsp;<span class="op" id="6797516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6797524">if</span>&nbsp;<span class="op" id="6797527">!</span><span class="ident" id="6797528">eq</span><span class="op" id="6797530">(</span><span class="ident" id="6797531">dst</span><span class="op" id="6797534">.</span><span class="ident" id="6797535">At</span><span class="op" id="6797537">(</span><span class="ident" id="6797538">x</span><span class="op" id="6797539">,</span>&nbsp;<span class="ident" id="6797541">y</span><span class="op" id="6797542">)</span><span class="op" id="6797543">,</span>&nbsp;<span class="ident" id="6797545">golden</span><span class="op" id="6797551">.</span><span class="ident" id="6797552">At</span><span class="op" id="6797554">(</span><span class="ident" id="6797555">x</span><span class="op" id="6797556">,</span>&nbsp;<span class="ident" id="6797558">y</span><span class="op" id="6797559">)</span><span class="op" id="6797560">)</span>&nbsp;<span class="op" id="6797562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797571">t</span><span class="op" id="6797572">.</span><span class="ident" id="6797573">Errorf</span><span class="op" id="6797579">(</span><span class="string" id="6797580">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6797643">,</span>&nbsp;<span class="ident" id="6797645">xoff</span><span class="op" id="6797649">,</span>&nbsp;<span class="ident" id="6797651">yoff</span><span class="op" id="6797655">,</span>&nbsp;<span class="ident" id="6797657">x</span><span class="op" id="6797658">,</span>&nbsp;<span class="ident" id="6797660">y</span><span class="op" id="6797661">,</span>&nbsp;<span class="ident" id="6797663">dst</span><span class="op" id="6797666">.</span><span class="ident" id="6797667">At</span><span class="op" id="6797669">(</span><span class="ident" id="6797670">x</span><span class="op" id="6797671">,</span>&nbsp;<span class="ident" id="6797673">y</span><span class="op" id="6797674">)</span><span class="op" id="6797675">,</span>&nbsp;<span class="ident" id="6797677">golden</span><span class="op" id="6797683">.</span><span class="ident" id="6797684">At</span><span class="op" id="6797686">(</span><span class="ident" id="6797687">x</span><span class="op" id="6797688">,</span>&nbsp;<span class="ident" id="6797690">y</span><span class="op" id="6797691">)</span><span class="op" id="6797692">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6797701">continue</span>&nbsp;<span class="ident" id="6797710">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797739">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797746">}</span><br>
<span class="lineno"></span><span class="op" id="6797748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6797751">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="6797823">func</span>&nbsp;<span class="ident" id="6797828">TestNonZeroSrcPt</span><span class="op" id="6797844">(</span><span class="ident" id="6797845">t</span>&nbsp;<span class="op" id="6797847">*</span><span class="ident" id="6797848">testing</span><span class="op" id="6797855">.</span><span class="ident" id="6797856">T</span><span class="op" id="6797857">)</span>&nbsp;<span class="op" id="6797859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797862">a</span>&nbsp;<span class="op" id="6797864">:=</span>&nbsp;<span class="ident" id="6797867">image</span><span class="op" id="6797872">.</span><span class="ident" id="6797873">NewRGBA</span><span class="op" id="6797880">(</span><span class="ident" id="6797881">image</span><span class="op" id="6797886">.</span><span class="ident" id="6797887">Rect</span><span class="op" id="6797891">(</span><span class="num" id="6797892">0</span><span class="op" id="6797893">,</span>&nbsp;<span class="num" id="6797895">0</span><span class="op" id="6797896">,</span>&nbsp;<span class="num" id="6797898">1</span><span class="op" id="6797899">,</span>&nbsp;<span class="num" id="6797901">1</span><span class="op" id="6797902">)</span><span class="op" id="6797903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797906">b</span>&nbsp;<span class="op" id="6797908">:=</span>&nbsp;<span class="ident" id="6797911">image</span><span class="op" id="6797916">.</span><span class="ident" id="6797917">NewRGBA</span><span class="op" id="6797924">(</span><span class="ident" id="6797925">image</span><span class="op" id="6797930">.</span><span class="ident" id="6797931">Rect</span><span class="op" id="6797935">(</span><span class="num" id="6797936">0</span><span class="op" id="6797937">,</span>&nbsp;<span class="num" id="6797939">0</span><span class="op" id="6797940">,</span>&nbsp;<span class="num" id="6797942">2</span><span class="op" id="6797943">,</span>&nbsp;<span class="num" id="6797945">2</span><span class="op" id="6797946">)</span><span class="op" id="6797947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797950">b</span><span class="op" id="6797951">.</span><span class="ident" id="6797952">Set</span><span class="op" id="6797955">(</span><span class="num" id="6797956">0</span><span class="op" id="6797957">,</span>&nbsp;<span class="num" id="6797959">0</span><span class="op" id="6797960">,</span>&nbsp;<span class="ident" id="6797962">color</span><span class="op" id="6797967">.</span><span class="ident" id="6797968">RGBA</span><span class="op" id="6797972">{</span><span class="num" id="6797973">0</span><span class="op" id="6797974">,</span>&nbsp;<span class="num" id="6797976">0</span><span class="op" id="6797977">,</span>&nbsp;<span class="num" id="6797979">0</span><span class="op" id="6797980">,</span>&nbsp;<span class="num" id="6797982">5</span><span class="op" id="6797983">}</span><span class="op" id="6797984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797987">b</span><span class="op" id="6797988">.</span><span class="ident" id="6797989">Set</span><span class="op" id="6797992">(</span><span class="num" id="6797993">1</span><span class="op" id="6797994">,</span>&nbsp;<span class="num" id="6797996">0</span><span class="op" id="6797997">,</span>&nbsp;<span class="ident" id="6797999">color</span><span class="op" id="6798004">.</span><span class="ident" id="6798005">RGBA</span><span class="op" id="6798009">{</span><span class="num" id="6798010">0</span><span class="op" id="6798011">,</span>&nbsp;<span class="num" id="6798013">0</span><span class="op" id="6798014">,</span>&nbsp;<span class="num" id="6798016">5</span><span class="op" id="6798017">,</span>&nbsp;<span class="num" id="6798019">5</span><span class="op" id="6798020">}</span><span class="op" id="6798021">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798024">b</span><span class="op" id="6798025">.</span><span class="ident" id="6798026">Set</span><span class="op" id="6798029">(</span><span class="num" id="6798030">0</span><span class="op" id="6798031">,</span>&nbsp;<span class="num" id="6798033">1</span><span class="op" id="6798034">,</span>&nbsp;<span class="ident" id="6798036">color</span><span class="op" id="6798041">.</span><span class="ident" id="6798042">RGBA</span><span class="op" id="6798046">{</span><span class="num" id="6798047">0</span><span class="op" id="6798048">,</span>&nbsp;<span class="num" id="6798050">5</span><span class="op" id="6798051">,</span>&nbsp;<span class="num" id="6798053">0</span><span class="op" id="6798054">,</span>&nbsp;<span class="num" id="6798056">5</span><span class="op" id="6798057">}</span><span class="op" id="6798058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798061">b</span><span class="op" id="6798062">.</span><span class="ident" id="6798063">Set</span><span class="op" id="6798066">(</span><span class="num" id="6798067">1</span><span class="op" id="6798068">,</span>&nbsp;<span class="num" id="6798070">1</span><span class="op" id="6798071">,</span>&nbsp;<span class="ident" id="6798073">color</span><span class="op" id="6798078">.</span><span class="ident" id="6798079">RGBA</span><span class="op" id="6798083">{</span><span class="num" id="6798084">5</span><span class="op" id="6798085">,</span>&nbsp;<span class="num" id="6798087">0</span><span class="op" id="6798088">,</span>&nbsp;<span class="num" id="6798090">0</span><span class="op" id="6798091">,</span>&nbsp;<span class="num" id="6798093">5</span><span class="op" id="6798094">}</span><span class="op" id="6798095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798098">Draw</span><span class="op" id="6798102">(</span><span class="ident" id="6798103">a</span><span class="op" id="6798104">,</span>&nbsp;<span class="ident" id="6798106">image</span><span class="op" id="6798111">.</span><span class="ident" id="6798112">Rect</span><span class="op" id="6798116">(</span><span class="num" id="6798117">0</span><span class="op" id="6798118">,</span>&nbsp;<span class="num" id="6798120">0</span><span class="op" id="6798121">,</span>&nbsp;<span class="num" id="6798123">1</span><span class="op" id="6798124">,</span>&nbsp;<span class="num" id="6798126">1</span><span class="op" id="6798127">)</span><span class="op" id="6798128">,</span>&nbsp;<span class="ident" id="6798130">b</span><span class="op" id="6798131">,</span>&nbsp;<span class="ident" id="6798133">image</span><span class="op" id="6798138">.</span><span class="ident" id="6798139">Pt</span><span class="op" id="6798141">(</span><span class="num" id="6798142">1</span><span class="op" id="6798143">,</span>&nbsp;<span class="num" id="6798145">1</span><span class="op" id="6798146">)</span><span class="op" id="6798147">,</span>&nbsp;<span class="ident" id="6798149">Over</span><span class="op" id="6798153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6798156">if</span>&nbsp;<span class="op" id="6798159">!</span><span class="ident" id="6798160">eq</span><span class="op" id="6798162">(</span><span class="ident" id="6798163">color</span><span class="op" id="6798168">.</span><span class="ident" id="6798169">RGBA</span><span class="op" id="6798173">{</span><span class="num" id="6798174">5</span><span class="op" id="6798175">,</span>&nbsp;<span class="num" id="6798177">0</span><span class="op" id="6798178">,</span>&nbsp;<span class="num" id="6798180">0</span><span class="op" id="6798181">,</span>&nbsp;<span class="num" id="6798183">5</span><span class="op" id="6798184">}</span><span class="op" id="6798185">,</span>&nbsp;<span class="ident" id="6798187">a</span><span class="op" id="6798188">.</span><span class="ident" id="6798189">At</span><span class="op" id="6798191">(</span><span class="num" id="6798192">0</span><span class="op" id="6798193">,</span>&nbsp;<span class="num" id="6798195">0</span><span class="op" id="6798196">)</span><span class="op" id="6798197">)</span>&nbsp;<span class="op" id="6798199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798203">t</span><span class="op" id="6798204">.</span><span class="ident" id="6798205">Errorf</span><span class="op" id="6798211">(</span><span class="string" id="6798212">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6798245">,</span>&nbsp;<span class="ident" id="6798247">color</span><span class="op" id="6798252">.</span><span class="ident" id="6798253">RGBA</span><span class="op" id="6798257">{</span><span class="num" id="6798258">5</span><span class="op" id="6798259">,</span>&nbsp;<span class="num" id="6798261">0</span><span class="op" id="6798262">,</span>&nbsp;<span class="num" id="6798264">0</span><span class="op" id="6798265">,</span>&nbsp;<span class="num" id="6798267">5</span><span class="op" id="6798268">}</span><span class="op" id="6798269">,</span>&nbsp;<span class="ident" id="6798271">a</span><span class="op" id="6798272">.</span><span class="ident" id="6798273">At</span><span class="op" id="6798275">(</span><span class="num" id="6798276">0</span><span class="op" id="6798277">,</span>&nbsp;<span class="num" id="6798279">0</span><span class="op" id="6798280">)</span><span class="op" id="6798281">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6798284">}</span><br>
<span class="lineno"></span><span class="op" id="6798286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6798289">func</span>&nbsp;<span class="ident" id="6798294">TestFill</span><span class="op" id="6798302">(</span><span class="ident" id="6798303">t</span>&nbsp;<span class="op" id="6798305">*</span><span class="ident" id="6798306">testing</span><span class="op" id="6798313">.</span><span class="ident" id="6798314">T</span><span class="op" id="6798315">)</span>&nbsp;<span class="op" id="6798317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798320">rr</span>&nbsp;<span class="op" id="6798323">:=</span>&nbsp;<span class="op" id="6798326">[</span><span class="op" id="6798327">]</span><span class="ident" id="6798328">image</span><span class="op" id="6798333">.</span><span class="ident" id="6798334">Rectangle</span><span class="op" id="6798343">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798347">image</span><span class="op" id="6798352">.</span><span class="ident" id="6798353">Rect</span><span class="op" id="6798357">(</span><span class="num" id="6798358">0</span><span class="op" id="6798359">,</span>&nbsp;<span class="num" id="6798361">0</span><span class="op" id="6798362">,</span>&nbsp;<span class="num" id="6798364">0</span><span class="op" id="6798365">,</span>&nbsp;<span class="num" id="6798367">0</span><span class="op" id="6798368">)</span><span class="op" id="6798369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798373">image</span><span class="op" id="6798378">.</span><span class="ident" id="6798379">Rect</span><span class="op" id="6798383">(</span><span class="num" id="6798384">0</span><span class="op" id="6798385">,</span>&nbsp;<span class="num" id="6798387">0</span><span class="op" id="6798388">,</span>&nbsp;<span class="num" id="6798390">40</span><span class="op" id="6798392">,</span>&nbsp;<span class="num" id="6798394">30</span><span class="op" id="6798396">)</span><span class="op" id="6798397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798401">image</span><span class="op" id="6798406">.</span><span class="ident" id="6798407">Rect</span><span class="op" id="6798411">(</span><span class="num" id="6798412">10</span><span class="op" id="6798414">,</span>&nbsp;<span class="num" id="6798416">0</span><span class="op" id="6798417">,</span>&nbsp;<span class="num" id="6798419">40</span><span class="op" id="6798421">,</span>&nbsp;<span class="num" id="6798423">30</span><span class="op" id="6798425">)</span><span class="op" id="6798426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798430">image</span><span class="op" id="6798435">.</span><span class="ident" id="6798436">Rect</span><span class="op" id="6798440">(</span><span class="num" id="6798441">0</span><span class="op" id="6798442">,</span>&nbsp;<span class="num" id="6798444">20</span><span class="op" id="6798446">,</span>&nbsp;<span class="num" id="6798448">40</span><span class="op" id="6798450">,</span>&nbsp;<span class="num" id="6798452">30</span><span class="op" id="6798454">)</span><span class="op" id="6798455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798459">image</span><span class="op" id="6798464">.</span><span class="ident" id="6798465">Rect</span><span class="op" id="6798469">(</span><span class="num" id="6798470">10</span><span class="op" id="6798472">,</span>&nbsp;<span class="num" id="6798474">20</span><span class="op" id="6798476">,</span>&nbsp;<span class="num" id="6798478">40</span><span class="op" id="6798480">,</span>&nbsp;<span class="num" id="6798482">30</span><span class="op" id="6798484">)</span><span class="op" id="6798485">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798489">image</span><span class="op" id="6798494">.</span><span class="ident" id="6798495">Rect</span><span class="op" id="6798499">(</span><span class="num" id="6798500">10</span><span class="op" id="6798502">,</span>&nbsp;<span class="num" id="6798504">20</span><span class="op" id="6798506">,</span>&nbsp;<span class="num" id="6798508">15</span><span class="op" id="6798510">,</span>&nbsp;<span class="num" id="6798512">25</span><span class="op" id="6798514">)</span><span class="op" id="6798515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798519">image</span><span class="op" id="6798524">.</span><span class="ident" id="6798525">Rect</span><span class="op" id="6798529">(</span><span class="num" id="6798530">10</span><span class="op" id="6798532">,</span>&nbsp;<span class="num" id="6798534">0</span><span class="op" id="6798535">,</span>&nbsp;<span class="num" id="6798537">35</span><span class="op" id="6798539">,</span>&nbsp;<span class="num" id="6798541">30</span><span class="op" id="6798543">)</span><span class="op" id="6798544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798548">image</span><span class="op" id="6798553">.</span><span class="ident" id="6798554">Rect</span><span class="op" id="6798558">(</span><span class="num" id="6798559">0</span><span class="op" id="6798560">,</span>&nbsp;<span class="num" id="6798562">15</span><span class="op" id="6798564">,</span>&nbsp;<span class="num" id="6798566">40</span><span class="op" id="6798568">,</span>&nbsp;<span class="num" id="6798570">16</span><span class="op" id="6798572">)</span><span class="op" id="6798573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798577">image</span><span class="op" id="6798582">.</span><span class="ident" id="6798583">Rect</span><span class="op" id="6798587">(</span><span class="num" id="6798588">24</span><span class="op" id="6798590">,</span>&nbsp;<span class="num" id="6798592">24</span><span class="op" id="6798594">,</span>&nbsp;<span class="num" id="6798596">25</span><span class="op" id="6798598">,</span>&nbsp;<span class="num" id="6798600">25</span><span class="op" id="6798602">)</span><span class="op" id="6798603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798607">image</span><span class="op" id="6798612">.</span><span class="ident" id="6798613">Rect</span><span class="op" id="6798617">(</span><span class="num" id="6798618">23</span><span class="op" id="6798620">,</span>&nbsp;<span class="num" id="6798622">23</span><span class="op" id="6798624">,</span>&nbsp;<span class="num" id="6798626">26</span><span class="op" id="6798628">,</span>&nbsp;<span class="num" id="6798630">26</span><span class="op" id="6798632">)</span><span class="op" id="6798633">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798637">image</span><span class="op" id="6798642">.</span><span class="ident" id="6798643">Rect</span><span class="op" id="6798647">(</span><span class="num" id="6798648">22</span><span class="op" id="6798650">,</span>&nbsp;<span class="num" id="6798652">22</span><span class="op" id="6798654">,</span>&nbsp;<span class="num" id="6798656">27</span><span class="op" id="6798658">,</span>&nbsp;<span class="num" id="6798660">27</span><span class="op" id="6798662">)</span><span class="op" id="6798663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798667">image</span><span class="op" id="6798672">.</span><span class="ident" id="6798673">Rect</span><span class="op" id="6798677">(</span><span class="num" id="6798678">21</span><span class="op" id="6798680">,</span>&nbsp;<span class="num" id="6798682">21</span><span class="op" id="6798684">,</span>&nbsp;<span class="num" id="6798686">28</span><span class="op" id="6798688">,</span>&nbsp;<span class="num" id="6798690">28</span><span class="op" id="6798692">)</span><span class="op" id="6798693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798697">image</span><span class="op" id="6798702">.</span><span class="ident" id="6798703">Rect</span><span class="op" id="6798707">(</span><span class="num" id="6798708">20</span><span class="op" id="6798710">,</span>&nbsp;<span class="num" id="6798712">20</span><span class="op" id="6798714">,</span>&nbsp;<span class="num" id="6798716">29</span><span class="op" id="6798718">,</span>&nbsp;<span class="num" id="6798720">29</span><span class="op" id="6798722">)</span><span class="op" id="6798723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6798726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6798729">for</span>&nbsp;<span class="ident" id="6798733">_</span><span class="op" id="6798734">,</span>&nbsp;<span class="ident" id="6798736">r</span>&nbsp;<span class="op" id="6798738">:=</span>&nbsp;<span class="keyword" id="6798741">range</span>&nbsp;<span class="ident" id="6798747">rr</span>&nbsp;<span class="op" id="6798750">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798754">m</span>&nbsp;<span class="op" id="6798756">:=</span>&nbsp;<span class="ident" id="6798759">image</span><span class="op" id="6798764">.</span><span class="ident" id="6798765">NewRGBA</span><span class="op" id="6798772">(</span><span class="ident" id="6798773">image</span><span class="op" id="6798778">.</span><span class="ident" id="6798779">Rect</span><span class="op" id="6798783">(</span><span class="num" id="6798784">0</span><span class="op" id="6798785">,</span>&nbsp;<span class="num" id="6798787">0</span><span class="op" id="6798788">,</span>&nbsp;<span class="num" id="6798790">40</span><span class="op" id="6798792">,</span>&nbsp;<span class="num" id="6798794">30</span><span class="op" id="6798796">)</span><span class="op" id="6798797">)</span><span class="op" id="6798798">.</span><span class="ident" id="6798799">SubImage</span><span class="op" id="6798807">(</span><span class="ident" id="6798808">r</span><span class="op" id="6798809">)</span><span class="op" id="6798810">.</span><span class="op" id="6798811">(</span><span class="op" id="6798812">*</span><span class="ident" id="6798813">image</span><span class="op" id="6798818">.</span><span class="ident" id="6798819">RGBA</span><span class="op" id="6798823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798827">b</span>&nbsp;<span class="op" id="6798829">:=</span>&nbsp;<span class="ident" id="6798832">m</span><span class="op" id="6798833">.</span><span class="ident" id="6798834">Bounds</span><span class="op" id="6798840">(</span><span class="op" id="6798841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798845">c</span>&nbsp;<span class="op" id="6798847">:=</span>&nbsp;<span class="ident" id="6798850">color</span><span class="op" id="6798855">.</span><span class="ident" id="6798856">RGBA</span><span class="op" id="6798860">{</span><span class="num" id="6798861">11</span><span class="op" id="6798863">,</span>&nbsp;<span class="num" id="6798865">0</span><span class="op" id="6798866">,</span>&nbsp;<span class="num" id="6798868">0</span><span class="op" id="6798869">,</span>&nbsp;<span class="num" id="6798871">255</span><span class="op" id="6798874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798878">src</span>&nbsp;<span class="op" id="6798882">:=</span>&nbsp;<span class="op" id="6798885">&amp;</span><span class="ident" id="6798886">image</span><span class="op" id="6798891">.</span><span class="ident" id="6798892">Uniform</span><span class="op" id="6798899">{</span><span class="ident" id="6798900">C</span><span class="op" id="6798901">:</span>&nbsp;<span class="ident" id="6798903">c</span><span class="op" id="6798904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798908">check</span>&nbsp;<span class="op" id="6798914">:=</span>&nbsp;<span class="keyword" id="6798917">func</span><span class="op" id="6798921">(</span><span class="ident" id="6798922">desc</span>&nbsp;<span class="builtintype" id="6798927">string</span><span class="op" id="6798933">)</span>&nbsp;<span class="op" id="6798935">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6798940">for</span>&nbsp;<span class="ident" id="6798944">y</span>&nbsp;<span class="op" id="6798946">:=</span>&nbsp;<span class="ident" id="6798949">b</span><span class="op" id="6798950">.</span><span class="ident" id="6798951">Min</span><span class="op" id="6798954">.</span><span class="ident" id="6798955">Y</span><span class="op" id="6798956">;</span>&nbsp;<span class="ident" id="6798958">y</span>&nbsp;<span class="op" id="6798960">&lt;</span>&nbsp;<span class="ident" id="6798962">b</span><span class="op" id="6798963">.</span><span class="ident" id="6798964">Max</span><span class="op" id="6798967">.</span><span class="ident" id="6798968">Y</span><span class="op" id="6798969">;</span>&nbsp;<span class="ident" id="6798971">y</span><span class="op" id="6798972">++</span>&nbsp;<span class="op" id="6798975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6798981">for</span>&nbsp;<span class="ident" id="6798985">x</span>&nbsp;<span class="op" id="6798987">:=</span>&nbsp;<span class="ident" id="6798990">b</span><span class="op" id="6798991">.</span><span class="ident" id="6798992">Min</span><span class="op" id="6798995">.</span><span class="ident" id="6798996">X</span><span class="op" id="6798997">;</span>&nbsp;<span class="ident" id="6798999">x</span>&nbsp;<span class="op" id="6799001">&lt;</span>&nbsp;<span class="ident" id="6799003">b</span><span class="op" id="6799004">.</span><span class="ident" id="6799005">Max</span><span class="op" id="6799008">.</span><span class="ident" id="6799009">X</span><span class="op" id="6799010">;</span>&nbsp;<span class="ident" id="6799012">x</span><span class="op" id="6799013">++</span>&nbsp;<span class="op" id="6799016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799023">if</span>&nbsp;<span class="op" id="6799026">!</span><span class="ident" id="6799027">eq</span><span class="op" id="6799029">(</span><span class="ident" id="6799030">c</span><span class="op" id="6799031">,</span>&nbsp;<span class="ident" id="6799033">m</span><span class="op" id="6799034">.</span><span class="ident" id="6799035">At</span><span class="op" id="6799037">(</span><span class="ident" id="6799038">x</span><span class="op" id="6799039">,</span>&nbsp;<span class="ident" id="6799041">y</span><span class="op" id="6799042">)</span><span class="op" id="6799043">)</span>&nbsp;<span class="op" id="6799045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799053">t</span><span class="op" id="6799054">.</span><span class="ident" id="6799055">Errorf</span><span class="op" id="6799061">(</span><span class="string" id="6799062">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6799121">,</span>&nbsp;<span class="ident" id="6799123">desc</span><span class="op" id="6799127">,</span>&nbsp;<span class="ident" id="6799129">x</span><span class="op" id="6799130">,</span>&nbsp;<span class="ident" id="6799132">y</span><span class="op" id="6799133">,</span>&nbsp;<span class="ident" id="6799135">r</span><span class="op" id="6799136">,</span>&nbsp;<span class="ident" id="6799138">c</span><span class="op" id="6799139">,</span>&nbsp;<span class="ident" id="6799141">m</span><span class="op" id="6799142">.</span><span class="ident" id="6799143">At</span><span class="op" id="6799145">(</span><span class="ident" id="6799146">x</span><span class="op" id="6799147">,</span>&nbsp;<span class="ident" id="6799149">y</span><span class="op" id="6799150">)</span><span class="op" id="6799151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799159">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6799190">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799219">for</span>&nbsp;<span class="ident" id="6799223">y</span>&nbsp;<span class="op" id="6799225">:=</span>&nbsp;<span class="ident" id="6799228">b</span><span class="op" id="6799229">.</span><span class="ident" id="6799230">Min</span><span class="op" id="6799233">.</span><span class="ident" id="6799234">Y</span><span class="op" id="6799235">;</span>&nbsp;<span class="ident" id="6799237">y</span>&nbsp;<span class="op" id="6799239">&lt;</span>&nbsp;<span class="ident" id="6799241">b</span><span class="op" id="6799242">.</span><span class="ident" id="6799243">Max</span><span class="op" id="6799246">.</span><span class="ident" id="6799247">Y</span><span class="op" id="6799248">;</span>&nbsp;<span class="ident" id="6799250">y</span><span class="op" id="6799251">++</span>&nbsp;<span class="op" id="6799254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799259">for</span>&nbsp;<span class="ident" id="6799263">x</span>&nbsp;<span class="op" id="6799265">:=</span>&nbsp;<span class="ident" id="6799268">b</span><span class="op" id="6799269">.</span><span class="ident" id="6799270">Min</span><span class="op" id="6799273">.</span><span class="ident" id="6799274">X</span><span class="op" id="6799275">;</span>&nbsp;<span class="ident" id="6799277">x</span>&nbsp;<span class="op" id="6799279">&lt;</span>&nbsp;<span class="ident" id="6799281">b</span><span class="op" id="6799282">.</span><span class="ident" id="6799283">Max</span><span class="op" id="6799286">.</span><span class="ident" id="6799287">X</span><span class="op" id="6799288">;</span>&nbsp;<span class="ident" id="6799290">x</span><span class="op" id="6799291">++</span>&nbsp;<span class="op" id="6799294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799300">DrawMask</span><span class="op" id="6799308">(</span><span class="ident" id="6799309">m</span><span class="op" id="6799310">,</span>&nbsp;<span class="ident" id="6799312">image</span><span class="op" id="6799317">.</span><span class="ident" id="6799318">Rect</span><span class="op" id="6799322">(</span><span class="ident" id="6799323">x</span><span class="op" id="6799324">,</span>&nbsp;<span class="ident" id="6799326">y</span><span class="op" id="6799327">,</span>&nbsp;<span class="ident" id="6799329">x</span><span class="op" id="6799330">+</span><span class="num" id="6799331">1</span><span class="op" id="6799332">,</span>&nbsp;<span class="ident" id="6799334">y</span><span class="op" id="6799335">+</span><span class="num" id="6799336">1</span><span class="op" id="6799337">)</span><span class="op" id="6799338">,</span>&nbsp;<span class="ident" id="6799340">src</span><span class="op" id="6799343">,</span>&nbsp;<span class="ident" id="6799345">image</span><span class="op" id="6799350">.</span><span class="ident" id="6799351">ZP</span><span class="op" id="6799353">,</span>&nbsp;<span class="ident" id="6799355">nil</span><span class="op" id="6799358">,</span>&nbsp;<span class="ident" id="6799360">image</span><span class="op" id="6799365">.</span><span class="ident" id="6799366">ZP</span><span class="op" id="6799368">,</span>&nbsp;<span class="ident" id="6799370">Src</span><span class="op" id="6799373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799382">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799386">check</span><span class="op" id="6799391">(</span><span class="string" id="6799392">&#34;pixel&#34;</span><span class="op" id="6799399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6799403">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799430">c</span>&nbsp;<span class="op" id="6799432">=</span>&nbsp;<span class="ident" id="6799434">color</span><span class="op" id="6799439">.</span><span class="ident" id="6799440">RGBA</span><span class="op" id="6799444">{</span><span class="num" id="6799445">0</span><span class="op" id="6799446">,</span>&nbsp;<span class="num" id="6799448">22</span><span class="op" id="6799450">,</span>&nbsp;<span class="num" id="6799452">0</span><span class="op" id="6799453">,</span>&nbsp;<span class="num" id="6799455">255</span><span class="op" id="6799458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799462">src</span>&nbsp;<span class="op" id="6799466">=</span>&nbsp;<span class="op" id="6799468">&amp;</span><span class="ident" id="6799469">image</span><span class="op" id="6799474">.</span><span class="ident" id="6799475">Uniform</span><span class="op" id="6799482">{</span><span class="ident" id="6799483">C</span><span class="op" id="6799484">:</span>&nbsp;<span class="ident" id="6799486">c</span><span class="op" id="6799487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799491">for</span>&nbsp;<span class="ident" id="6799495">y</span>&nbsp;<span class="op" id="6799497">:=</span>&nbsp;<span class="ident" id="6799500">b</span><span class="op" id="6799501">.</span><span class="ident" id="6799502">Min</span><span class="op" id="6799505">.</span><span class="ident" id="6799506">Y</span><span class="op" id="6799507">;</span>&nbsp;<span class="ident" id="6799509">y</span>&nbsp;<span class="op" id="6799511">&lt;</span>&nbsp;<span class="ident" id="6799513">b</span><span class="op" id="6799514">.</span><span class="ident" id="6799515">Max</span><span class="op" id="6799518">.</span><span class="ident" id="6799519">Y</span><span class="op" id="6799520">;</span>&nbsp;<span class="ident" id="6799522">y</span><span class="op" id="6799523">++</span>&nbsp;<span class="op" id="6799526">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799531">DrawMask</span><span class="op" id="6799539">(</span><span class="ident" id="6799540">m</span><span class="op" id="6799541">,</span>&nbsp;<span class="ident" id="6799543">image</span><span class="op" id="6799548">.</span><span class="ident" id="6799549">Rect</span><span class="op" id="6799553">(</span><span class="ident" id="6799554">b</span><span class="op" id="6799555">.</span><span class="ident" id="6799556">Min</span><span class="op" id="6799559">.</span><span class="ident" id="6799560">X</span><span class="op" id="6799561">,</span>&nbsp;<span class="ident" id="6799563">y</span><span class="op" id="6799564">,</span>&nbsp;<span class="ident" id="6799566">b</span><span class="op" id="6799567">.</span><span class="ident" id="6799568">Max</span><span class="op" id="6799571">.</span><span class="ident" id="6799572">X</span><span class="op" id="6799573">,</span>&nbsp;<span class="ident" id="6799575">y</span><span class="op" id="6799576">+</span><span class="num" id="6799577">1</span><span class="op" id="6799578">)</span><span class="op" id="6799579">,</span>&nbsp;<span class="ident" id="6799581">src</span><span class="op" id="6799584">,</span>&nbsp;<span class="ident" id="6799586">image</span><span class="op" id="6799591">.</span><span class="ident" id="6799592">ZP</span><span class="op" id="6799594">,</span>&nbsp;<span class="ident" id="6799596">nil</span><span class="op" id="6799599">,</span>&nbsp;<span class="ident" id="6799601">image</span><span class="op" id="6799606">.</span><span class="ident" id="6799607">ZP</span><span class="op" id="6799609">,</span>&nbsp;<span class="ident" id="6799611">Src</span><span class="op" id="6799614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799622">check</span><span class="op" id="6799627">(</span><span class="string" id="6799628">&#34;row&#34;</span><span class="op" id="6799633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6799637">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799667">c</span>&nbsp;<span class="op" id="6799669">=</span>&nbsp;<span class="ident" id="6799671">color</span><span class="op" id="6799676">.</span><span class="ident" id="6799677">RGBA</span><span class="op" id="6799681">{</span><span class="num" id="6799682">0</span><span class="op" id="6799683">,</span>&nbsp;<span class="num" id="6799685">0</span><span class="op" id="6799686">,</span>&nbsp;<span class="num" id="6799688">33</span><span class="op" id="6799690">,</span>&nbsp;<span class="num" id="6799692">255</span><span class="op" id="6799695">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799699">src</span>&nbsp;<span class="op" id="6799703">=</span>&nbsp;<span class="op" id="6799705">&amp;</span><span class="ident" id="6799706">image</span><span class="op" id="6799711">.</span><span class="ident" id="6799712">Uniform</span><span class="op" id="6799719">{</span><span class="ident" id="6799720">C</span><span class="op" id="6799721">:</span>&nbsp;<span class="ident" id="6799723">c</span><span class="op" id="6799724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799728">for</span>&nbsp;<span class="ident" id="6799732">x</span>&nbsp;<span class="op" id="6799734">:=</span>&nbsp;<span class="ident" id="6799737">b</span><span class="op" id="6799738">.</span><span class="ident" id="6799739">Min</span><span class="op" id="6799742">.</span><span class="ident" id="6799743">X</span><span class="op" id="6799744">;</span>&nbsp;<span class="ident" id="6799746">x</span>&nbsp;<span class="op" id="6799748">&lt;</span>&nbsp;<span class="ident" id="6799750">b</span><span class="op" id="6799751">.</span><span class="ident" id="6799752">Max</span><span class="op" id="6799755">.</span><span class="ident" id="6799756">X</span><span class="op" id="6799757">;</span>&nbsp;<span class="ident" id="6799759">x</span><span class="op" id="6799760">++</span>&nbsp;<span class="op" id="6799763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799768">DrawMask</span><span class="op" id="6799776">(</span><span class="ident" id="6799777">m</span><span class="op" id="6799778">,</span>&nbsp;<span class="ident" id="6799780">image</span><span class="op" id="6799785">.</span><span class="ident" id="6799786">Rect</span><span class="op" id="6799790">(</span><span class="ident" id="6799791">x</span><span class="op" id="6799792">,</span>&nbsp;<span class="ident" id="6799794">b</span><span class="op" id="6799795">.</span><span class="ident" id="6799796">Min</span><span class="op" id="6799799">.</span><span class="ident" id="6799800">Y</span><span class="op" id="6799801">,</span>&nbsp;<span class="ident" id="6799803">x</span><span class="op" id="6799804">+</span><span class="num" id="6799805">1</span><span class="op" id="6799806">,</span>&nbsp;<span class="ident" id="6799808">b</span><span class="op" id="6799809">.</span><span class="ident" id="6799810">Max</span><span class="op" id="6799813">.</span><span class="ident" id="6799814">Y</span><span class="op" id="6799815">)</span><span class="op" id="6799816">,</span>&nbsp;<span class="ident" id="6799818">src</span><span class="op" id="6799821">,</span>&nbsp;<span class="ident" id="6799823">image</span><span class="op" id="6799828">.</span><span class="ident" id="6799829">ZP</span><span class="op" id="6799831">,</span>&nbsp;<span class="ident" id="6799833">nil</span><span class="op" id="6799836">,</span>&nbsp;<span class="ident" id="6799838">image</span><span class="op" id="6799843">.</span><span class="ident" id="6799844">ZP</span><span class="op" id="6799846">,</span>&nbsp;<span class="ident" id="6799848">Src</span><span class="op" id="6799851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799859">check</span><span class="op" id="6799864">(</span><span class="string" id="6799865">&#34;column&#34;</span><span class="op" id="6799873">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6799877">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799912">c</span>&nbsp;<span class="op" id="6799914">=</span>&nbsp;<span class="ident" id="6799916">color</span><span class="op" id="6799921">.</span><span class="ident" id="6799922">RGBA</span><span class="op" id="6799926">{</span><span class="num" id="6799927">44</span><span class="op" id="6799929">,</span>&nbsp;<span class="num" id="6799931">55</span><span class="op" id="6799933">,</span>&nbsp;<span class="num" id="6799935">66</span><span class="op" id="6799937">,</span>&nbsp;<span class="num" id="6799939">77</span><span class="op" id="6799941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799945">src</span>&nbsp;<span class="op" id="6799949">=</span>&nbsp;<span class="op" id="6799951">&amp;</span><span class="ident" id="6799952">image</span><span class="op" id="6799957">.</span><span class="ident" id="6799958">Uniform</span><span class="op" id="6799965">{</span><span class="ident" id="6799966">C</span><span class="op" id="6799967">:</span>&nbsp;<span class="ident" id="6799969">c</span><span class="op" id="6799970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799974">DrawMask</span><span class="op" id="6799982">(</span><span class="ident" id="6799983">m</span><span class="op" id="6799984">,</span>&nbsp;<span class="ident" id="6799986">b</span><span class="op" id="6799987">,</span>&nbsp;<span class="ident" id="6799989">src</span><span class="op" id="6799992">,</span>&nbsp;<span class="ident" id="6799994">image</span><span class="op" id="6799999">.</span><span class="ident" id="6800000">ZP</span><span class="op" id="6800002">,</span>&nbsp;<span class="ident" id="6800004">nil</span><span class="op" id="6800007">,</span>&nbsp;<span class="ident" id="6800009">image</span><span class="op" id="6800014">.</span><span class="ident" id="6800015">ZP</span><span class="op" id="6800017">,</span>&nbsp;<span class="ident" id="6800019">Src</span><span class="op" id="6800022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6800026">check</span><span class="op" id="6800031">(</span><span class="string" id="6800032">&#34;whole&#34;</span><span class="op" id="6800039">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6800042">}</span><br>
<span class="lineno"></span><span class="op" id="6800044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6800047">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="6800122">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="6800199">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="6800237">func</span>&nbsp;<span class="ident" id="6800242">TestFloydSteinbergCheckerboard</span><span class="op" id="6800272">(</span><span class="ident" id="6800273">t</span>&nbsp;<span class="op" id="6800275">*</span><span class="ident" id="6800276">testing</span><span class="op" id="6800283">.</span><span class="ident" id="6800284">T</span><span class="op" id="6800285">)</span>&nbsp;<span class="op" id="6800287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6800290">b</span>&nbsp;<span class="op" id="6800292">:=</span>&nbsp;<span class="ident" id="6800295">image</span><span class="op" id="6800300">.</span><span class="ident" id="6800301">Rect</span><span class="op" id="6800305">(</span><span class="num" id="6800306">0</span><span class="op" id="6800307">,</span>&nbsp;<span class="num" id="6800309">0</span><span class="op" id="6800310">,</span>&nbsp;<span class="num" id="6800312">640</span><span class="op" id="6800315">,</span>&nbsp;<span class="num" id="6800317">480</span><span class="op" id="6800320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6800323">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6800396">src</span>&nbsp;<span class="op" id="6800400">:=</span>&nbsp;<span class="op" id="6800403">&amp;</span><span class="ident" id="6800404">image</span><span class="op" id="6800409">.</span><span class="ident" id="6800410">Uniform</span><span class="op" id="6800417">{</span><span class="ident" id="6800418">color</span><span class="op" id="6800423">.</span><span class="ident" id="6800424">Gray16</span><span class="op" id="6800430">{</span><span class="num" id="6800431">0x7fff</span><span class="op" id="6800437">}</span><span class="op" id="6800438">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6800441">dst</span>&nbsp;<span class="op" id="6800445">:=</span>&nbsp;<span class="ident" id="6800448">image</span><span class="op" id="6800453">.</span><span class="ident" id="6800454">NewPaletted</span><span class="op" id="6800465">(</span><span class="ident" id="6800466">b</span><span class="op" id="6800467">,</span>&nbsp;<span class="ident" id="6800469">color</span><span class="op" id="6800474">.</span><span class="ident" id="6800475">Palette</span><span class="op" id="6800482">{</span><span class="ident" id="6800483">color</span><span class="op" id="6800488">.</span><span class="ident" id="6800489">Black</span><span class="op" id="6800494">,</span>&nbsp;<span class="ident" id="6800496">color</span><span class="op" id="6800501">.</span><span class="ident" id="6800502">White</span><span class="op" id="6800507">}</span><span class="op" id="6800508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6800511">FloydSteinberg</span><span class="op" id="6800525">.</span><span class="ident" id="6800526">Draw</span><span class="op" id="6800530">(</span><span class="ident" id="6800531">dst</span><span class="op" id="6800534">,</span>&nbsp;<span class="ident" id="6800536">b</span><span class="op" id="6800537">,</span>&nbsp;<span class="ident" id="6800539">src</span><span class="op" id="6800542">,</span>&nbsp;<span class="ident" id="6800544">image</span><span class="op" id="6800549">.</span><span class="ident" id="6800550">Point</span><span class="op" id="6800555">{</span><span class="op" id="6800556">}</span><span class="op" id="6800557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6800560">nErr</span>&nbsp;<span class="op" id="6800565">:=</span>&nbsp;<span class="num" id="6800568">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6800571">for</span>&nbsp;<span class="ident" id="6800575">y</span>&nbsp;<span class="op" id="6800577">:=</span>&nbsp;<span class="ident" id="6800580">b</span><span class="op" id="6800581">.</span><span class="ident" id="6800582">Min</span><span class="op" id="6800585">.</span><span class="ident" id="6800586">Y</span><span class="op" id="6800587">;</span>&nbsp;<span class="ident" id="6800589">y</span>&nbsp;<span class="op" id="6800591">&lt;</span>&nbsp;<span class="ident" id="6800593">b</span><span class="op" id="6800594">.</span><span class="ident" id="6800595">Max</span><span class="op" id="6800598">.</span><span class="ident" id="6800599">Y</span><span class="op" id="6800600">;</span>&nbsp;<span class="ident" id="6800602">y</span><span class="op" id="6800603">++</span>&nbsp;<span class="op" id="6800606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6800610">for</span>&nbsp;<span class="ident" id="6800614">x</span>&nbsp;<span class="op" id="6800616">:=</span>&nbsp;<span class="ident" id="6800619">b</span><span class="op" id="6800620">.</span><span class="ident" id="6800621">Min</span><span class="op" id="6800624">.</span><span class="ident" id="6800625">X</span><span class="op" id="6800626">;</span>&nbsp;<span class="ident" id="6800628">x</span>&nbsp;<span class="op" id="6800630">&lt;</span>&nbsp;<span class="ident" id="6800632">b</span><span class="op" id="6800633">.</span><span class="ident" id="6800634">Max</span><span class="op" id="6800637">.</span><span class="ident" id="6800638">X</span><span class="op" id="6800639">;</span>&nbsp;<span class="ident" id="6800641">x</span><span class="op" id="6800642">++</span>&nbsp;<span class="op" id="6800645">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6800650">got</span>&nbsp;<span class="op" id="6800654">:=</span>&nbsp;<span class="ident" id="6800657">dst</span><span class="op" id="6800660">.</span><span class="ident" id="6800661">Pix</span><span class="op" id="6800664">[</span><span class="ident" id="6800665">dst</span><span class="op" id="6800668">.</span><span class="ident" id="6800669">PixOffset</span><span class="op" id="6800678">(</span><span class="ident" id="6800679">x</span><span class="op" id="6800680">,</span>&nbsp;<span class="ident" id="6800682">y</span><span class="op" id="6800683">)</span><span class="op" id="6800684">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6800689">want</span>&nbsp;<span class="op" id="6800694">:=</span>&nbsp;<span class="builtintype" id="6800697">uint8</span><span class="op" id="6800702">(</span><span class="ident" id="6800703">x</span><span class="op" id="6800704">+</span><span class="ident" id="6800705">y</span><span class="op" id="6800706">)</span>&nbsp;<span class="op" id="6800708">%</span>&nbsp;<span class="num" id="6800710">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6800715">if</span>&nbsp;<span class="ident" id="6800718">got</span>&nbsp;<span class="op" id="6800722">!=</span>&nbsp;<span class="ident" id="6800725">want</span>&nbsp;<span class="op" id="6800730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6800736">t</span><span class="op" id="6800737">.</span><span class="ident" id="6800738">Errorf</span><span class="op" id="6800744">(</span><span class="string" id="6800745">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6800775">,</span>&nbsp;<span class="ident" id="6800777">x</span><span class="op" id="6800778">,</span>&nbsp;<span class="ident" id="6800780">y</span><span class="op" id="6800781">,</span>&nbsp;<span class="ident" id="6800783">got</span><span class="op" id="6800786">,</span>&nbsp;<span class="ident" id="6800788">want</span><span class="op" id="6800792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6800798">if</span>&nbsp;<span class="ident" id="6800801">nErr</span><span class="op" id="6800805">++</span><span class="op" id="6800807">;</span>&nbsp;<span class="ident" id="6800809">nErr</span>&nbsp;<span class="op" id="6800814">==</span>&nbsp;<span class="num" id="6800817">10</span>&nbsp;<span class="op" id="6800820">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6800827">t</span><span class="op" id="6800828">.</span><span class="ident" id="6800829">Fatal</span><span class="op" id="6800834">(</span><span class="string" id="6800835">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="6800861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6800867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6800872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6800876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6800879">}</span><br>
<span class="lineno">380</span><span class="op" id="6800881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6800884">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="6800963">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="6800995">type</span>&nbsp;<span class="ident" id="6801000">embeddedPaletted</span>&nbsp;<span class="keyword" id="6801017">struct</span>&nbsp;<span class="op" id="6801024">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6801027">*</span><span class="ident" id="6801028">image</span><span class="op" id="6801033">.</span><span class="ident" id="6801034">Paletted</span><br>
<span class="lineno"></span><span class="op" id="6801043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6801046">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="6801116">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="6801168">func</span>&nbsp;<span class="ident" id="6801173">TestPaletted</span><span class="op" id="6801185">(</span><span class="ident" id="6801186">t</span>&nbsp;<span class="op" id="6801188">*</span><span class="ident" id="6801189">testing</span><span class="op" id="6801196">.</span><span class="ident" id="6801197">T</span><span class="op" id="6801198">)</span>&nbsp;<span class="op" id="6801200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801203">f</span><span class="op" id="6801204">,</span>&nbsp;<span class="ident" id="6801206">err</span>&nbsp;<span class="op" id="6801210">:=</span>&nbsp;<span class="ident" id="6801213">os</span><span class="op" id="6801215">.</span><span class="ident" id="6801216">Open</span><span class="op" id="6801220">(</span><span class="string" id="6801221">&#34;../testdata/video-001.png&#34;</span><span class="op" id="6801248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6801251">if</span>&nbsp;<span class="ident" id="6801254">err</span>&nbsp;<span class="op" id="6801258">!=</span>&nbsp;<span class="ident" id="6801261">nil</span>&nbsp;<span class="op" id="6801265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801269">t</span><span class="op" id="6801270">.</span><span class="ident" id="6801271">Fatalf</span><span class="op" id="6801277">(</span><span class="string" id="6801278">&#34;open:&nbsp;%v&#34;</span><span class="op" id="6801288">,</span>&nbsp;<span class="ident" id="6801290">err</span><span class="op" id="6801293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6801296">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6801299">defer</span>&nbsp;<span class="ident" id="6801305">f</span><span class="op" id="6801306">.</span><span class="ident" id="6801307">Close</span><span class="op" id="6801312">(</span><span class="op" id="6801313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801316">src</span><span class="op" id="6801319">,</span>&nbsp;<span class="ident" id="6801321">err</span>&nbsp;<span class="op" id="6801325">:=</span>&nbsp;<span class="ident" id="6801328">png</span><span class="op" id="6801331">.</span><span class="ident" id="6801332">Decode</span><span class="op" id="6801338">(</span><span class="ident" id="6801339">f</span><span class="op" id="6801340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6801343">if</span>&nbsp;<span class="ident" id="6801346">err</span>&nbsp;<span class="op" id="6801350">!=</span>&nbsp;<span class="ident" id="6801353">nil</span>&nbsp;<span class="op" id="6801357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801361">t</span><span class="op" id="6801362">.</span><span class="ident" id="6801363">Fatalf</span><span class="op" id="6801369">(</span><span class="string" id="6801370">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6801382">,</span>&nbsp;<span class="ident" id="6801384">err</span><span class="op" id="6801387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6801390">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801393">b</span>&nbsp;<span class="op" id="6801395">:=</span>&nbsp;<span class="ident" id="6801398">src</span><span class="op" id="6801401">.</span><span class="ident" id="6801402">Bounds</span><span class="op" id="6801408">(</span><span class="op" id="6801409">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801413">cgaPalette</span>&nbsp;<span class="op" id="6801424">:=</span>&nbsp;<span class="ident" id="6801427">color</span><span class="op" id="6801432">.</span><span class="ident" id="6801433">Palette</span><span class="op" id="6801440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801444">color</span><span class="op" id="6801449">.</span><span class="ident" id="6801450">RGBA</span><span class="op" id="6801454">{</span><span class="num" id="6801455">0x00</span><span class="op" id="6801459">,</span>&nbsp;<span class="num" id="6801461">0x00</span><span class="op" id="6801465">,</span>&nbsp;<span class="num" id="6801467">0x00</span><span class="op" id="6801471">,</span>&nbsp;<span class="num" id="6801473">0xff</span><span class="op" id="6801477">}</span><span class="op" id="6801478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801482">color</span><span class="op" id="6801487">.</span><span class="ident" id="6801488">RGBA</span><span class="op" id="6801492">{</span><span class="num" id="6801493">0x55</span><span class="op" id="6801497">,</span>&nbsp;<span class="num" id="6801499">0xff</span><span class="op" id="6801503">,</span>&nbsp;<span class="num" id="6801505">0xff</span><span class="op" id="6801509">,</span>&nbsp;<span class="num" id="6801511">0xff</span><span class="op" id="6801515">}</span><span class="op" id="6801516">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801520">color</span><span class="op" id="6801525">.</span><span class="ident" id="6801526">RGBA</span><span class="op" id="6801530">{</span><span class="num" id="6801531">0xff</span><span class="op" id="6801535">,</span>&nbsp;<span class="num" id="6801537">0x55</span><span class="op" id="6801541">,</span>&nbsp;<span class="num" id="6801543">0xff</span><span class="op" id="6801547">,</span>&nbsp;<span class="num" id="6801549">0xff</span><span class="op" id="6801553">}</span><span class="op" id="6801554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801558">color</span><span class="op" id="6801563">.</span><span class="ident" id="6801564">RGBA</span><span class="op" id="6801568">{</span><span class="num" id="6801569">0xff</span><span class="op" id="6801573">,</span>&nbsp;<span class="num" id="6801575">0xff</span><span class="op" id="6801579">,</span>&nbsp;<span class="num" id="6801581">0xff</span><span class="op" id="6801585">,</span>&nbsp;<span class="num" id="6801587">0xff</span><span class="op" id="6801591">}</span><span class="op" id="6801592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6801595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801598">drawers</span>&nbsp;<span class="op" id="6801606">:=</span>&nbsp;<span class="keyword" id="6801609">map</span><span class="op" id="6801612">[</span><span class="builtintype" id="6801613">string</span><span class="op" id="6801619">]</span><span class="ident" id="6801620">Drawer</span><span class="op" id="6801626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6801630">&#34;src&#34;</span><span class="op" id="6801635">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6801649">Src</span><span class="op" id="6801652">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6801656">&#34;floyd-steinberg&#34;</span><span class="op" id="6801673">:</span>&nbsp;<span class="ident" id="6801675">FloydSteinberg</span><span class="op" id="6801689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6801692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="6801695">loop</span><span class="op" id="6801699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6801702">for</span>&nbsp;<span class="ident" id="6801706">dName</span><span class="op" id="6801711">,</span>&nbsp;<span class="ident" id="6801713">d</span>&nbsp;<span class="op" id="6801715">:=</span>&nbsp;<span class="keyword" id="6801718">range</span>&nbsp;<span class="ident" id="6801724">drawers</span>&nbsp;<span class="op" id="6801732">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801736">dst0</span>&nbsp;<span class="op" id="6801741">:=</span>&nbsp;<span class="ident" id="6801744">image</span><span class="op" id="6801749">.</span><span class="ident" id="6801750">NewPaletted</span><span class="op" id="6801761">(</span><span class="ident" id="6801762">b</span><span class="op" id="6801763">,</span>&nbsp;<span class="ident" id="6801765">cgaPalette</span><span class="op" id="6801775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801779">dst1</span>&nbsp;<span class="op" id="6801784">:=</span>&nbsp;<span class="ident" id="6801787">image</span><span class="op" id="6801792">.</span><span class="ident" id="6801793">NewPaletted</span><span class="op" id="6801804">(</span><span class="ident" id="6801805">b</span><span class="op" id="6801806">,</span>&nbsp;<span class="ident" id="6801808">cgaPalette</span><span class="op" id="6801818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801822">d</span><span class="op" id="6801823">.</span><span class="ident" id="6801824">Draw</span><span class="op" id="6801828">(</span><span class="ident" id="6801829">dst0</span><span class="op" id="6801833">,</span>&nbsp;<span class="ident" id="6801835">b</span><span class="op" id="6801836">,</span>&nbsp;<span class="ident" id="6801838">src</span><span class="op" id="6801841">,</span>&nbsp;<span class="ident" id="6801843">image</span><span class="op" id="6801848">.</span><span class="ident" id="6801849">Point</span><span class="op" id="6801854">{</span><span class="op" id="6801855">}</span><span class="op" id="6801856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6801860">d</span><span class="op" id="6801861">.</span><span class="ident" id="6801862">Draw</span><span class="op" id="6801866">(</span><span class="ident" id="6801867">embeddedPaletted</span><span class="op" id="6801883">{</span><span class="ident" id="6801884">dst1</span><span class="op" id="6801888">}</span><span class="op" id="6801889">,</span>&nbsp;<span class="ident" id="6801891">b</span><span class="op" id="6801892">,</span>&nbsp;<span class="ident" id="6801894">src</span><span class="op" id="6801897">,</span>&nbsp;<span class="ident" id="6801899">image</span><span class="op" id="6801904">.</span><span class="ident" id="6801905">Point</span><span class="op" id="6801910">{</span><span class="op" id="6801911">}</span><span class="op" id="6801912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6801916">for</span>&nbsp;<span class="ident" id="6801920">y</span>&nbsp;<span class="op" id="6801922">:=</span>&nbsp;<span class="ident" id="6801925">b</span><span class="op" id="6801926">.</span><span class="ident" id="6801927">Min</span><span class="op" id="6801930">.</span><span class="ident" id="6801931">Y</span><span class="op" id="6801932">;</span>&nbsp;<span class="ident" id="6801934">y</span>&nbsp;<span class="op" id="6801936">&lt;</span>&nbsp;<span class="ident" id="6801938">b</span><span class="op" id="6801939">.</span><span class="ident" id="6801940">Max</span><span class="op" id="6801943">.</span><span class="ident" id="6801944">Y</span><span class="op" id="6801945">;</span>&nbsp;<span class="ident" id="6801947">y</span><span class="op" id="6801948">++</span>&nbsp;<span class="op" id="6801951">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6801956">for</span>&nbsp;<span class="ident" id="6801960">x</span>&nbsp;<span class="op" id="6801962">:=</span>&nbsp;<span class="ident" id="6801965">b</span><span class="op" id="6801966">.</span><span class="ident" id="6801967">Min</span><span class="op" id="6801970">.</span><span class="ident" id="6801971">X</span><span class="op" id="6801972">;</span>&nbsp;<span class="ident" id="6801974">x</span>&nbsp;<span class="op" id="6801976">&lt;</span>&nbsp;<span class="ident" id="6801978">b</span><span class="op" id="6801979">.</span><span class="ident" id="6801980">Max</span><span class="op" id="6801983">.</span><span class="ident" id="6801984">X</span><span class="op" id="6801985">;</span>&nbsp;<span class="ident" id="6801987">x</span><span class="op" id="6801988">++</span>&nbsp;<span class="op" id="6801991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6801997">if</span>&nbsp;<span class="op" id="6802000">!</span><span class="ident" id="6802001">eq</span><span class="op" id="6802003">(</span><span class="ident" id="6802004">dst0</span><span class="op" id="6802008">.</span><span class="ident" id="6802009">At</span><span class="op" id="6802011">(</span><span class="ident" id="6802012">x</span><span class="op" id="6802013">,</span>&nbsp;<span class="ident" id="6802015">y</span><span class="op" id="6802016">)</span><span class="op" id="6802017">,</span>&nbsp;<span class="ident" id="6802019">dst1</span><span class="op" id="6802023">.</span><span class="ident" id="6802024">At</span><span class="op" id="6802026">(</span><span class="ident" id="6802027">x</span><span class="op" id="6802028">,</span>&nbsp;<span class="ident" id="6802030">y</span><span class="op" id="6802031">)</span><span class="op" id="6802032">)</span>&nbsp;<span class="op" id="6802034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6802041">t</span><span class="op" id="6802042">.</span><span class="ident" id="6802043">Errorf</span><span class="op" id="6802049">(</span><span class="string" id="6802050">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6802081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6802089">dName</span><span class="op" id="6802094">,</span>&nbsp;<span class="ident" id="6802096">x</span><span class="op" id="6802097">,</span>&nbsp;<span class="ident" id="6802099">y</span><span class="op" id="6802100">,</span>&nbsp;<span class="ident" id="6802102">dst0</span><span class="op" id="6802106">.</span><span class="ident" id="6802107">At</span><span class="op" id="6802109">(</span><span class="ident" id="6802110">x</span><span class="op" id="6802111">,</span>&nbsp;<span class="ident" id="6802113">y</span><span class="op" id="6802114">)</span><span class="op" id="6802115">,</span>&nbsp;<span class="ident" id="6802117">dst1</span><span class="op" id="6802121">.</span><span class="ident" id="6802122">At</span><span class="op" id="6802124">(</span><span class="ident" id="6802125">x</span><span class="op" id="6802126">,</span>&nbsp;<span class="ident" id="6802128">y</span><span class="op" id="6802129">)</span><span class="op" id="6802130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6802137">continue</span>&nbsp;<span class="ident" id="6802146">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6802155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6802160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6802164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6802167">}</span><br>
<span class="lineno"></span><span class="op" id="6802169">}</span>
</div>
</body>
</html>
