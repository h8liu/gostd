<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/list</h2>
<ul>
<li><a href="/gostd/container/list/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/container/list/list.go.html">list.go</a></li>
<li><a href="/gostd/container/list/list_test.go.html">list_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4212408">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4212463">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4212517">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4212568">//&nbsp;Package&nbsp;list&nbsp;implements&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4212617">//</span><br>
<span class="lineno"></span><span class="comment" id="4212620">//&nbsp;To&nbsp;iterate&nbsp;over&nbsp;a&nbsp;list&nbsp;(where&nbsp;l&nbsp;is&nbsp;a&nbsp;*List):</span><br>
<span class="lineno"></span><span class="comment" id="4212668">//&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;e&nbsp;:=&nbsp;l.Front();&nbsp;e&nbsp;!=&nbsp;nil;&nbsp;e&nbsp;=&nbsp;e.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4212716">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;do&nbsp;something&nbsp;with&nbsp;e.Value</span><br>
<span class="lineno">10</span><span class="comment" id="4212749">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="4212754">//</span><br>
<span class="lineno"></span><span class="keyword" id="4212757">package</span>&nbsp;<span class="ident" id="4212765">list</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4212771">//&nbsp;Element&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;linked&nbsp;list.</span><br>
<span class="lineno">15</span><span class="keyword" id="4212814">type</span>&nbsp;<span class="ident" id="4212819">Element</span>&nbsp;<span class="keyword" id="4212827">struct</span>&nbsp;<span class="op" id="4212834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4212837">//&nbsp;Next&nbsp;and&nbsp;previous&nbsp;pointers&nbsp;in&nbsp;the&nbsp;doubly-linked&nbsp;list&nbsp;of&nbsp;elements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4212907">//&nbsp;To&nbsp;simplify&nbsp;the&nbsp;implementation,&nbsp;internally&nbsp;a&nbsp;list&nbsp;l&nbsp;is&nbsp;implemented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4212978">//&nbsp;as&nbsp;a&nbsp;ring,&nbsp;such&nbsp;that&nbsp;&amp;l.root&nbsp;is&nbsp;both&nbsp;the&nbsp;next&nbsp;element&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4213048">//&nbsp;list&nbsp;element&nbsp;(l.Back())&nbsp;and&nbsp;the&nbsp;previous&nbsp;element&nbsp;of&nbsp;the&nbsp;first&nbsp;list</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4213119">//&nbsp;element&nbsp;(l.Front()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4213144">next</span><span class="op" id="4213148">,</span>&nbsp;<span class="ident" id="4213150">prev</span>&nbsp;<span class="op" id="4213155">*</span><span class="ident" id="4213156">Element</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4213166">//&nbsp;The&nbsp;list&nbsp;to&nbsp;which&nbsp;this&nbsp;element&nbsp;belongs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4213210">list</span>&nbsp;<span class="op" id="4213215">*</span><span class="ident" id="4213216">List</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4213223">//&nbsp;The&nbsp;value&nbsp;stored&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4213263">Value</span>&nbsp;<span class="keyword" id="4213269">interface</span><span class="op" id="4213278">{</span><span class="op" id="4213279">}</span><br>
<span class="lineno"></span><span class="op" id="4213281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="4213284">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4213330">func</span>&nbsp;<span class="op" id="4213335">(</span><span class="ident" id="4213336">e</span>&nbsp;<span class="op" id="4213338">*</span><span class="ident" id="4213339">Element</span><span class="op" id="4213346">)</span>&nbsp;<span class="ident" id="4213348">Next</span><span class="op" id="4213352">(</span><span class="op" id="4213353">)</span>&nbsp;<span class="op" id="4213355">*</span><span class="ident" id="4213356">Element</span>&nbsp;<span class="op" id="4213364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4213367">if</span>&nbsp;<span class="ident" id="4213370">p</span>&nbsp;<span class="op" id="4213372">:=</span>&nbsp;<span class="ident" id="4213375">e</span><span class="op" id="4213376">.</span><span class="ident" id="4213377">next</span><span class="op" id="4213381">;</span>&nbsp;<span class="ident" id="4213383">e</span><span class="op" id="4213384">.</span><span class="ident" id="4213385">list</span>&nbsp;<span class="op" id="4213390">!=</span>&nbsp;<span class="ident" id="4213393">nil</span>&nbsp;<span class="op" id="4213397">&amp;&amp;</span>&nbsp;<span class="ident" id="4213400">p</span>&nbsp;<span class="op" id="4213402">!=</span>&nbsp;<span class="op" id="4213405">&amp;</span><span class="ident" id="4213406">e</span><span class="op" id="4213407">.</span><span class="ident" id="4213408">list</span><span class="op" id="4213412">.</span><span class="ident" id="4213413">root</span>&nbsp;<span class="op" id="4213418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4213422">return</span>&nbsp;<span class="ident" id="4213429">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4213432">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4213435">return</span>&nbsp;<span class="ident" id="4213442">nil</span><br>
<span class="lineno"></span><span class="op" id="4213446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4213449">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4213499">func</span>&nbsp;<span class="op" id="4213504">(</span><span class="ident" id="4213505">e</span>&nbsp;<span class="op" id="4213507">*</span><span class="ident" id="4213508">Element</span><span class="op" id="4213515">)</span>&nbsp;<span class="ident" id="4213517">Prev</span><span class="op" id="4213521">(</span><span class="op" id="4213522">)</span>&nbsp;<span class="op" id="4213524">*</span><span class="ident" id="4213525">Element</span>&nbsp;<span class="op" id="4213533">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4213536">if</span>&nbsp;<span class="ident" id="4213539">p</span>&nbsp;<span class="op" id="4213541">:=</span>&nbsp;<span class="ident" id="4213544">e</span><span class="op" id="4213545">.</span><span class="ident" id="4213546">prev</span><span class="op" id="4213550">;</span>&nbsp;<span class="ident" id="4213552">e</span><span class="op" id="4213553">.</span><span class="ident" id="4213554">list</span>&nbsp;<span class="op" id="4213559">!=</span>&nbsp;<span class="ident" id="4213562">nil</span>&nbsp;<span class="op" id="4213566">&amp;&amp;</span>&nbsp;<span class="ident" id="4213569">p</span>&nbsp;<span class="op" id="4213571">!=</span>&nbsp;<span class="op" id="4213574">&amp;</span><span class="ident" id="4213575">e</span><span class="op" id="4213576">.</span><span class="ident" id="4213577">list</span><span class="op" id="4213581">.</span><span class="ident" id="4213582">root</span>&nbsp;<span class="op" id="4213587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4213591">return</span>&nbsp;<span class="ident" id="4213598">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4213601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4213604">return</span>&nbsp;<span class="ident" id="4213611">nil</span><br>
<span class="lineno"></span><span class="op" id="4213615">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4213618">//&nbsp;List&nbsp;represents&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4213659">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;List&nbsp;is&nbsp;an&nbsp;empty&nbsp;list&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="4213717">type</span>&nbsp;<span class="ident" id="4213722">List</span>&nbsp;<span class="keyword" id="4213727">struct</span>&nbsp;<span class="op" id="4213734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4213737">root</span>&nbsp;<span class="ident" id="4213742">Element</span>&nbsp;<span class="comment" id="4213750">//&nbsp;sentinel&nbsp;list&nbsp;element,&nbsp;only&nbsp;&amp;root,&nbsp;root.prev,&nbsp;and&nbsp;root.next&nbsp;are&nbsp;used</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4213823">len</span>&nbsp;&nbsp;<span class="builtintype" id="4213828">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4213836">//&nbsp;current&nbsp;list&nbsp;length&nbsp;excluding&nbsp;(this)&nbsp;sentinel&nbsp;element</span><br>
<span class="lineno"></span><span class="op" id="4213893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4213896">//&nbsp;Init&nbsp;initializes&nbsp;or&nbsp;clears&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="keyword" id="4213934">func</span>&nbsp;<span class="op" id="4213939">(</span><span class="ident" id="4213940">l</span>&nbsp;<span class="op" id="4213942">*</span><span class="ident" id="4213943">List</span><span class="op" id="4213947">)</span>&nbsp;<span class="ident" id="4213949">Init</span><span class="op" id="4213953">(</span><span class="op" id="4213954">)</span>&nbsp;<span class="op" id="4213956">*</span><span class="ident" id="4213957">List</span>&nbsp;<span class="op" id="4213962">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4213965">l</span><span class="op" id="4213966">.</span><span class="ident" id="4213967">root</span><span class="op" id="4213971">.</span><span class="ident" id="4213972">next</span>&nbsp;<span class="op" id="4213977">=</span>&nbsp;<span class="op" id="4213979">&amp;</span><span class="ident" id="4213980">l</span><span class="op" id="4213981">.</span><span class="ident" id="4213982">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4213988">l</span><span class="op" id="4213989">.</span><span class="ident" id="4213990">root</span><span class="op" id="4213994">.</span><span class="ident" id="4213995">prev</span>&nbsp;<span class="op" id="4214000">=</span>&nbsp;<span class="op" id="4214002">&amp;</span><span class="ident" id="4214003">l</span><span class="op" id="4214004">.</span><span class="ident" id="4214005">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4214011">l</span><span class="op" id="4214012">.</span><span class="builtinfunc" id="4214013">len</span>&nbsp;<span class="op" id="4214017">=</span>&nbsp;<span class="num" id="4214019">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4214022">return</span>&nbsp;<span class="ident" id="4214029">l</span><br>
<span class="lineno"></span><span class="op" id="4214031">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="4214034">//&nbsp;New&nbsp;returns&nbsp;an&nbsp;initialized&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="4214070">func</span>&nbsp;<span class="ident" id="4214075">New</span><span class="op" id="4214078">(</span><span class="op" id="4214079">)</span>&nbsp;<span class="op" id="4214081">*</span><span class="ident" id="4214082">List</span>&nbsp;<span class="op" id="4214087">{</span>&nbsp;<span class="keyword" id="4214089">return</span>&nbsp;<span class="builtinfunc" id="4214096">new</span><span class="op" id="4214099">(</span><span class="ident" id="4214100">List</span><span class="op" id="4214104">)</span><span class="op" id="4214105">.</span><span class="ident" id="4214106">Init</span><span class="op" id="4214110">(</span><span class="op" id="4214111">)</span>&nbsp;<span class="op" id="4214113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4214116">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">65</span><span class="comment" id="4214165">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(1).</span><br>
<span class="lineno"></span><span class="keyword" id="4214192">func</span>&nbsp;<span class="op" id="4214197">(</span><span class="ident" id="4214198">l</span>&nbsp;<span class="op" id="4214200">*</span><span class="ident" id="4214201">List</span><span class="op" id="4214205">)</span>&nbsp;<span class="ident" id="4214207">Len</span><span class="op" id="4214210">(</span><span class="op" id="4214211">)</span>&nbsp;<span class="builtintype" id="4214213">int</span>&nbsp;<span class="op" id="4214217">{</span>&nbsp;<span class="keyword" id="4214219">return</span>&nbsp;<span class="ident" id="4214226">l</span><span class="op" id="4214227">.</span><span class="builtinfunc" id="4214228">len</span>&nbsp;<span class="op" id="4214232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4214235">//&nbsp;Front&nbsp;returns&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4214288">func</span>&nbsp;<span class="op" id="4214293">(</span><span class="ident" id="4214294">l</span>&nbsp;<span class="op" id="4214296">*</span><span class="ident" id="4214297">List</span><span class="op" id="4214301">)</span>&nbsp;<span class="ident" id="4214303">Front</span><span class="op" id="4214308">(</span><span class="op" id="4214309">)</span>&nbsp;<span class="op" id="4214311">*</span><span class="ident" id="4214312">Element</span>&nbsp;<span class="op" id="4214320">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4214323">if</span>&nbsp;<span class="ident" id="4214326">l</span><span class="op" id="4214327">.</span><span class="builtinfunc" id="4214328">len</span>&nbsp;<span class="op" id="4214332">==</span>&nbsp;<span class="num" id="4214335">0</span>&nbsp;<span class="op" id="4214337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4214341">return</span>&nbsp;<span class="ident" id="4214348">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4214353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4214356">return</span>&nbsp;<span class="ident" id="4214363">l</span><span class="op" id="4214364">.</span><span class="ident" id="4214365">root</span><span class="op" id="4214369">.</span><span class="ident" id="4214370">next</span><br>
<span class="lineno"></span><span class="op" id="4214375">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4214378">//&nbsp;Back&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4214429">func</span>&nbsp;<span class="op" id="4214434">(</span><span class="ident" id="4214435">l</span>&nbsp;<span class="op" id="4214437">*</span><span class="ident" id="4214438">List</span><span class="op" id="4214442">)</span>&nbsp;<span class="ident" id="4214444">Back</span><span class="op" id="4214448">(</span><span class="op" id="4214449">)</span>&nbsp;<span class="op" id="4214451">*</span><span class="ident" id="4214452">Element</span>&nbsp;<span class="op" id="4214460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4214463">if</span>&nbsp;<span class="ident" id="4214466">l</span><span class="op" id="4214467">.</span><span class="builtinfunc" id="4214468">len</span>&nbsp;<span class="op" id="4214472">==</span>&nbsp;<span class="num" id="4214475">0</span>&nbsp;<span class="op" id="4214477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4214481">return</span>&nbsp;<span class="ident" id="4214488">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4214493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4214496">return</span>&nbsp;<span class="ident" id="4214503">l</span><span class="op" id="4214504">.</span><span class="ident" id="4214505">root</span><span class="op" id="4214509">.</span><span class="ident" id="4214510">prev</span><br>
<span class="lineno"></span><span class="op" id="4214515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4214518">//&nbsp;lazyInit&nbsp;lazily&nbsp;initializes&nbsp;a&nbsp;zero&nbsp;List&nbsp;value.</span><br>
<span class="lineno">85</span><span class="keyword" id="4214568">func</span>&nbsp;<span class="op" id="4214573">(</span><span class="ident" id="4214574">l</span>&nbsp;<span class="op" id="4214576">*</span><span class="ident" id="4214577">List</span><span class="op" id="4214581">)</span>&nbsp;<span class="ident" id="4214583">lazyInit</span><span class="op" id="4214591">(</span><span class="op" id="4214592">)</span>&nbsp;<span class="op" id="4214594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4214597">if</span>&nbsp;<span class="ident" id="4214600">l</span><span class="op" id="4214601">.</span><span class="ident" id="4214602">root</span><span class="op" id="4214606">.</span><span class="ident" id="4214607">next</span>&nbsp;<span class="op" id="4214612">==</span>&nbsp;<span class="ident" id="4214615">nil</span>&nbsp;<span class="op" id="4214619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4214623">l</span><span class="op" id="4214624">.</span><span class="ident" id="4214625">Init</span><span class="op" id="4214629">(</span><span class="op" id="4214630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4214633">}</span><br>
<span class="lineno"></span><span class="op" id="4214635">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4214638">//&nbsp;insert&nbsp;inserts&nbsp;e&nbsp;after&nbsp;at,&nbsp;increments&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4214701">func</span>&nbsp;<span class="op" id="4214706">(</span><span class="ident" id="4214707">l</span>&nbsp;<span class="op" id="4214709">*</span><span class="ident" id="4214710">List</span><span class="op" id="4214714">)</span>&nbsp;<span class="ident" id="4214716">insert</span><span class="op" id="4214722">(</span><span class="ident" id="4214723">e</span><span class="op" id="4214724">,</span>&nbsp;<span class="ident" id="4214726">at</span>&nbsp;<span class="op" id="4214729">*</span><span class="ident" id="4214730">Element</span><span class="op" id="4214737">)</span>&nbsp;<span class="op" id="4214739">*</span><span class="ident" id="4214740">Element</span>&nbsp;<span class="op" id="4214748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4214751">n</span>&nbsp;<span class="op" id="4214753">:=</span>&nbsp;<span class="ident" id="4214756">at</span><span class="op" id="4214758">.</span><span class="ident" id="4214759">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4214765">at</span><span class="op" id="4214767">.</span><span class="ident" id="4214768">next</span>&nbsp;<span class="op" id="4214773">=</span>&nbsp;<span class="ident" id="4214775">e</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4214778">e</span><span class="op" id="4214779">.</span><span class="ident" id="4214780">prev</span>&nbsp;<span class="op" id="4214785">=</span>&nbsp;<span class="ident" id="4214787">at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4214791">e</span><span class="op" id="4214792">.</span><span class="ident" id="4214793">next</span>&nbsp;<span class="op" id="4214798">=</span>&nbsp;<span class="ident" id="4214800">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4214803">n</span><span class="op" id="4214804">.</span><span class="ident" id="4214805">prev</span>&nbsp;<span class="op" id="4214810">=</span>&nbsp;<span class="ident" id="4214812">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4214815">e</span><span class="op" id="4214816">.</span><span class="ident" id="4214817">list</span>&nbsp;<span class="op" id="4214822">=</span>&nbsp;<span class="ident" id="4214824">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4214827">l</span><span class="op" id="4214828">.</span><span class="builtinfunc" id="4214829">len</span><span class="op" id="4214832">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4214836">return</span>&nbsp;<span class="ident" id="4214843">e</span><br>
<span class="lineno"></span><span class="op" id="4214845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4214848">//&nbsp;insertValue&nbsp;is&nbsp;a&nbsp;convenience&nbsp;wrapper&nbsp;for&nbsp;insert(&amp;Element{Value:&nbsp;v},&nbsp;at).</span><br>
<span class="lineno"></span><span class="keyword" id="4214924">func</span>&nbsp;<span class="op" id="4214929">(</span><span class="ident" id="4214930">l</span>&nbsp;<span class="op" id="4214932">*</span><span class="ident" id="4214933">List</span><span class="op" id="4214937">)</span>&nbsp;<span class="ident" id="4214939">insertValue</span><span class="op" id="4214950">(</span><span class="ident" id="4214951">v</span>&nbsp;<span class="keyword" id="4214953">interface</span><span class="op" id="4214962">{</span><span class="op" id="4214963">}</span><span class="op" id="4214964">,</span>&nbsp;<span class="ident" id="4214966">at</span>&nbsp;<span class="op" id="4214969">*</span><span class="ident" id="4214970">Element</span><span class="op" id="4214977">)</span>&nbsp;<span class="op" id="4214979">*</span><span class="ident" id="4214980">Element</span>&nbsp;<span class="op" id="4214988">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4214991">return</span>&nbsp;<span class="ident" id="4214998">l</span><span class="op" id="4214999">.</span><span class="ident" id="4215000">insert</span><span class="op" id="4215006">(</span><span class="op" id="4215007">&amp;</span><span class="ident" id="4215008">Element</span><span class="op" id="4215015">{</span><span class="ident" id="4215016">Value</span><span class="op" id="4215021">:</span>&nbsp;<span class="ident" id="4215023">v</span><span class="op" id="4215024">}</span><span class="op" id="4215025">,</span>&nbsp;<span class="ident" id="4215027">at</span><span class="op" id="4215029">)</span><br>
<span class="lineno"></span><span class="op" id="4215031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4215034">//&nbsp;remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;its&nbsp;list,&nbsp;decrements&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4215102">func</span>&nbsp;<span class="op" id="4215107">(</span><span class="ident" id="4215108">l</span>&nbsp;<span class="op" id="4215110">*</span><span class="ident" id="4215111">List</span><span class="op" id="4215115">)</span>&nbsp;<span class="ident" id="4215117">remove</span><span class="op" id="4215123">(</span><span class="ident" id="4215124">e</span>&nbsp;<span class="op" id="4215126">*</span><span class="ident" id="4215127">Element</span><span class="op" id="4215134">)</span>&nbsp;<span class="op" id="4215136">*</span><span class="ident" id="4215137">Element</span>&nbsp;<span class="op" id="4215145">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4215148">e</span><span class="op" id="4215149">.</span><span class="ident" id="4215150">prev</span><span class="op" id="4215154">.</span><span class="ident" id="4215155">next</span>&nbsp;<span class="op" id="4215160">=</span>&nbsp;<span class="ident" id="4215162">e</span><span class="op" id="4215163">.</span><span class="ident" id="4215164">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4215170">e</span><span class="op" id="4215171">.</span><span class="ident" id="4215172">next</span><span class="op" id="4215176">.</span><span class="ident" id="4215177">prev</span>&nbsp;<span class="op" id="4215182">=</span>&nbsp;<span class="ident" id="4215184">e</span><span class="op" id="4215185">.</span><span class="ident" id="4215186">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4215192">e</span><span class="op" id="4215193">.</span><span class="ident" id="4215194">next</span>&nbsp;<span class="op" id="4215199">=</span>&nbsp;<span class="ident" id="4215201">nil</span>&nbsp;<span class="comment" id="4215205">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4215228">e</span><span class="op" id="4215229">.</span><span class="ident" id="4215230">prev</span>&nbsp;<span class="op" id="4215235">=</span>&nbsp;<span class="ident" id="4215237">nil</span>&nbsp;<span class="comment" id="4215241">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4215264">e</span><span class="op" id="4215265">.</span><span class="ident" id="4215266">list</span>&nbsp;<span class="op" id="4215271">=</span>&nbsp;<span class="ident" id="4215273">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4215278">l</span><span class="op" id="4215279">.</span><span class="builtinfunc" id="4215280">len</span><span class="op" id="4215283">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4215287">return</span>&nbsp;<span class="ident" id="4215294">e</span><br>
<span class="lineno"></span><span class="op" id="4215296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4215299">//&nbsp;Remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;l&nbsp;if&nbsp;e&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">120</span><span class="comment" id="4215356">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;element&nbsp;value&nbsp;e.Value.</span><br>
<span class="lineno"></span><span class="keyword" id="4215397">func</span>&nbsp;<span class="op" id="4215402">(</span><span class="ident" id="4215403">l</span>&nbsp;<span class="op" id="4215405">*</span><span class="ident" id="4215406">List</span><span class="op" id="4215410">)</span>&nbsp;<span class="ident" id="4215412">Remove</span><span class="op" id="4215418">(</span><span class="ident" id="4215419">e</span>&nbsp;<span class="op" id="4215421">*</span><span class="ident" id="4215422">Element</span><span class="op" id="4215429">)</span>&nbsp;<span class="keyword" id="4215431">interface</span><span class="op" id="4215440">{</span><span class="op" id="4215441">}</span>&nbsp;<span class="op" id="4215443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4215446">if</span>&nbsp;<span class="ident" id="4215449">e</span><span class="op" id="4215450">.</span><span class="ident" id="4215451">list</span>&nbsp;<span class="op" id="4215456">==</span>&nbsp;<span class="ident" id="4215459">l</span>&nbsp;<span class="op" id="4215461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4215465">//&nbsp;if&nbsp;e.list&nbsp;==&nbsp;l,&nbsp;l&nbsp;must&nbsp;have&nbsp;been&nbsp;initialized&nbsp;when&nbsp;e&nbsp;was&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4215535">//&nbsp;in&nbsp;l&nbsp;or&nbsp;l&nbsp;==&nbsp;nil&nbsp;(e&nbsp;is&nbsp;a&nbsp;zero&nbsp;Element)&nbsp;and&nbsp;l.remove&nbsp;will&nbsp;crash</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4215603">l</span><span class="op" id="4215604">.</span><span class="ident" id="4215605">remove</span><span class="op" id="4215611">(</span><span class="ident" id="4215612">e</span><span class="op" id="4215613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4215616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4215619">return</span>&nbsp;<span class="ident" id="4215626">e</span><span class="op" id="4215627">.</span><span class="ident" id="4215628">Value</span><br>
<span class="lineno"></span><span class="op" id="4215634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4215637">//&nbsp;PushFront&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4215725">func</span>&nbsp;<span class="op" id="4215730">(</span><span class="ident" id="4215731">l</span>&nbsp;<span class="op" id="4215733">*</span><span class="ident" id="4215734">List</span><span class="op" id="4215738">)</span>&nbsp;<span class="ident" id="4215740">PushFront</span><span class="op" id="4215749">(</span><span class="ident" id="4215750">v</span>&nbsp;<span class="keyword" id="4215752">interface</span><span class="op" id="4215761">{</span><span class="op" id="4215762">}</span><span class="op" id="4215763">)</span>&nbsp;<span class="op" id="4215765">*</span><span class="ident" id="4215766">Element</span>&nbsp;<span class="op" id="4215774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4215777">l</span><span class="op" id="4215778">.</span><span class="ident" id="4215779">lazyInit</span><span class="op" id="4215787">(</span><span class="op" id="4215788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4215791">return</span>&nbsp;<span class="ident" id="4215798">l</span><span class="op" id="4215799">.</span><span class="ident" id="4215800">insertValue</span><span class="op" id="4215811">(</span><span class="ident" id="4215812">v</span><span class="op" id="4215813">,</span>&nbsp;<span class="op" id="4215815">&amp;</span><span class="ident" id="4215816">l</span><span class="op" id="4215817">.</span><span class="ident" id="4215818">root</span><span class="op" id="4215822">)</span><br>
<span class="lineno"></span><span class="op" id="4215824">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4215827">//&nbsp;PushBack&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4215913">func</span>&nbsp;<span class="op" id="4215918">(</span><span class="ident" id="4215919">l</span>&nbsp;<span class="op" id="4215921">*</span><span class="ident" id="4215922">List</span><span class="op" id="4215926">)</span>&nbsp;<span class="ident" id="4215928">PushBack</span><span class="op" id="4215936">(</span><span class="ident" id="4215937">v</span>&nbsp;<span class="keyword" id="4215939">interface</span><span class="op" id="4215948">{</span><span class="op" id="4215949">}</span><span class="op" id="4215950">)</span>&nbsp;<span class="op" id="4215952">*</span><span class="ident" id="4215953">Element</span>&nbsp;<span class="op" id="4215961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4215964">l</span><span class="op" id="4215965">.</span><span class="ident" id="4215966">lazyInit</span><span class="op" id="4215974">(</span><span class="op" id="4215975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4215978">return</span>&nbsp;<span class="ident" id="4215985">l</span><span class="op" id="4215986">.</span><span class="ident" id="4215987">insertValue</span><span class="op" id="4215998">(</span><span class="ident" id="4215999">v</span><span class="op" id="4216000">,</span>&nbsp;<span class="ident" id="4216002">l</span><span class="op" id="4216003">.</span><span class="ident" id="4216004">root</span><span class="op" id="4216008">.</span><span class="ident" id="4216009">prev</span><span class="op" id="4216013">)</span><br>
<span class="lineno">140</span><span class="op" id="4216015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4216018">//&nbsp;InsertBefore&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;before&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4216110">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4216171">func</span>&nbsp;<span class="op" id="4216176">(</span><span class="ident" id="4216177">l</span>&nbsp;<span class="op" id="4216179">*</span><span class="ident" id="4216180">List</span><span class="op" id="4216184">)</span>&nbsp;<span class="ident" id="4216186">InsertBefore</span><span class="op" id="4216198">(</span><span class="ident" id="4216199">v</span>&nbsp;<span class="keyword" id="4216201">interface</span><span class="op" id="4216210">{</span><span class="op" id="4216211">}</span><span class="op" id="4216212">,</span>&nbsp;<span class="ident" id="4216214">mark</span>&nbsp;<span class="op" id="4216219">*</span><span class="ident" id="4216220">Element</span><span class="op" id="4216227">)</span>&nbsp;<span class="op" id="4216229">*</span><span class="ident" id="4216230">Element</span>&nbsp;<span class="op" id="4216238">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4216241">if</span>&nbsp;<span class="ident" id="4216244">mark</span><span class="op" id="4216248">.</span><span class="ident" id="4216249">list</span>&nbsp;<span class="op" id="4216254">!=</span>&nbsp;<span class="ident" id="4216257">l</span>&nbsp;<span class="op" id="4216259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4216263">return</span>&nbsp;<span class="ident" id="4216270">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4216275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4216278">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4216335">return</span>&nbsp;<span class="ident" id="4216342">l</span><span class="op" id="4216343">.</span><span class="ident" id="4216344">insertValue</span><span class="op" id="4216355">(</span><span class="ident" id="4216356">v</span><span class="op" id="4216357">,</span>&nbsp;<span class="ident" id="4216359">mark</span><span class="op" id="4216363">.</span><span class="ident" id="4216364">prev</span><span class="op" id="4216368">)</span><br>
<span class="lineno">150</span><span class="op" id="4216370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4216373">//&nbsp;InsertAfter&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;after&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4216463">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4216524">func</span>&nbsp;<span class="op" id="4216529">(</span><span class="ident" id="4216530">l</span>&nbsp;<span class="op" id="4216532">*</span><span class="ident" id="4216533">List</span><span class="op" id="4216537">)</span>&nbsp;<span class="ident" id="4216539">InsertAfter</span><span class="op" id="4216550">(</span><span class="ident" id="4216551">v</span>&nbsp;<span class="keyword" id="4216553">interface</span><span class="op" id="4216562">{</span><span class="op" id="4216563">}</span><span class="op" id="4216564">,</span>&nbsp;<span class="ident" id="4216566">mark</span>&nbsp;<span class="op" id="4216571">*</span><span class="ident" id="4216572">Element</span><span class="op" id="4216579">)</span>&nbsp;<span class="op" id="4216581">*</span><span class="ident" id="4216582">Element</span>&nbsp;<span class="op" id="4216590">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4216593">if</span>&nbsp;<span class="ident" id="4216596">mark</span><span class="op" id="4216600">.</span><span class="ident" id="4216601">list</span>&nbsp;<span class="op" id="4216606">!=</span>&nbsp;<span class="ident" id="4216609">l</span>&nbsp;<span class="op" id="4216611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4216615">return</span>&nbsp;<span class="ident" id="4216622">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4216627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4216630">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4216687">return</span>&nbsp;<span class="ident" id="4216694">l</span><span class="op" id="4216695">.</span><span class="ident" id="4216696">insertValue</span><span class="op" id="4216707">(</span><span class="ident" id="4216708">v</span><span class="op" id="4216709">,</span>&nbsp;<span class="ident" id="4216711">mark</span><span class="op" id="4216715">)</span><br>
<span class="lineno">160</span><span class="op" id="4216717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4216720">//&nbsp;MoveToFront&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4216775">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4216833">func</span>&nbsp;<span class="op" id="4216838">(</span><span class="ident" id="4216839">l</span>&nbsp;<span class="op" id="4216841">*</span><span class="ident" id="4216842">List</span><span class="op" id="4216846">)</span>&nbsp;<span class="ident" id="4216848">MoveToFront</span><span class="op" id="4216859">(</span><span class="ident" id="4216860">e</span>&nbsp;<span class="op" id="4216862">*</span><span class="ident" id="4216863">Element</span><span class="op" id="4216870">)</span>&nbsp;<span class="op" id="4216872">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4216875">if</span>&nbsp;<span class="ident" id="4216878">e</span><span class="op" id="4216879">.</span><span class="ident" id="4216880">list</span>&nbsp;<span class="op" id="4216885">!=</span>&nbsp;<span class="ident" id="4216888">l</span>&nbsp;<span class="op" id="4216890">||</span>&nbsp;<span class="ident" id="4216893">l</span><span class="op" id="4216894">.</span><span class="ident" id="4216895">root</span><span class="op" id="4216899">.</span><span class="ident" id="4216900">next</span>&nbsp;<span class="op" id="4216905">==</span>&nbsp;<span class="ident" id="4216908">e</span>&nbsp;<span class="op" id="4216910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4216914">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4216922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4216925">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4216982">l</span><span class="op" id="4216983">.</span><span class="ident" id="4216984">insert</span><span class="op" id="4216990">(</span><span class="ident" id="4216991">l</span><span class="op" id="4216992">.</span><span class="ident" id="4216993">remove</span><span class="op" id="4216999">(</span><span class="ident" id="4217000">e</span><span class="op" id="4217001">)</span><span class="op" id="4217002">,</span>&nbsp;<span class="op" id="4217004">&amp;</span><span class="ident" id="4217005">l</span><span class="op" id="4217006">.</span><span class="ident" id="4217007">root</span><span class="op" id="4217011">)</span><br>
<span class="lineno">170</span><span class="op" id="4217013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4217016">//&nbsp;MoveToBack&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4217069">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4217127">func</span>&nbsp;<span class="op" id="4217132">(</span><span class="ident" id="4217133">l</span>&nbsp;<span class="op" id="4217135">*</span><span class="ident" id="4217136">List</span><span class="op" id="4217140">)</span>&nbsp;<span class="ident" id="4217142">MoveToBack</span><span class="op" id="4217152">(</span><span class="ident" id="4217153">e</span>&nbsp;<span class="op" id="4217155">*</span><span class="ident" id="4217156">Element</span><span class="op" id="4217163">)</span>&nbsp;<span class="op" id="4217165">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4217168">if</span>&nbsp;<span class="ident" id="4217171">e</span><span class="op" id="4217172">.</span><span class="ident" id="4217173">list</span>&nbsp;<span class="op" id="4217178">!=</span>&nbsp;<span class="ident" id="4217181">l</span>&nbsp;<span class="op" id="4217183">||</span>&nbsp;<span class="ident" id="4217186">l</span><span class="op" id="4217187">.</span><span class="ident" id="4217188">root</span><span class="op" id="4217192">.</span><span class="ident" id="4217193">prev</span>&nbsp;<span class="op" id="4217198">==</span>&nbsp;<span class="ident" id="4217201">e</span>&nbsp;<span class="op" id="4217203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4217207">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4217215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4217218">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4217275">l</span><span class="op" id="4217276">.</span><span class="ident" id="4217277">insert</span><span class="op" id="4217283">(</span><span class="ident" id="4217284">l</span><span class="op" id="4217285">.</span><span class="ident" id="4217286">remove</span><span class="op" id="4217292">(</span><span class="ident" id="4217293">e</span><span class="op" id="4217294">)</span><span class="op" id="4217295">,</span>&nbsp;<span class="ident" id="4217297">l</span><span class="op" id="4217298">.</span><span class="ident" id="4217299">root</span><span class="op" id="4217303">.</span><span class="ident" id="4217304">prev</span><span class="op" id="4217308">)</span><br>
<span class="lineno">180</span><span class="op" id="4217310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4217313">//&nbsp;MoveBefore&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;before&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4217376">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4217456">func</span>&nbsp;<span class="op" id="4217461">(</span><span class="ident" id="4217462">l</span>&nbsp;<span class="op" id="4217464">*</span><span class="ident" id="4217465">List</span><span class="op" id="4217469">)</span>&nbsp;<span class="ident" id="4217471">MoveBefore</span><span class="op" id="4217481">(</span><span class="ident" id="4217482">e</span><span class="op" id="4217483">,</span>&nbsp;<span class="ident" id="4217485">mark</span>&nbsp;<span class="op" id="4217490">*</span><span class="ident" id="4217491">Element</span><span class="op" id="4217498">)</span>&nbsp;<span class="op" id="4217500">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4217503">if</span>&nbsp;<span class="ident" id="4217506">e</span><span class="op" id="4217507">.</span><span class="ident" id="4217508">list</span>&nbsp;<span class="op" id="4217513">!=</span>&nbsp;<span class="ident" id="4217516">l</span>&nbsp;<span class="op" id="4217518">||</span>&nbsp;<span class="ident" id="4217521">e</span>&nbsp;<span class="op" id="4217523">==</span>&nbsp;<span class="ident" id="4217526">mark</span>&nbsp;<span class="op" id="4217531">||</span>&nbsp;<span class="ident" id="4217534">mark</span><span class="op" id="4217538">.</span><span class="ident" id="4217539">list</span>&nbsp;<span class="op" id="4217544">!=</span>&nbsp;<span class="ident" id="4217547">l</span>&nbsp;<span class="op" id="4217549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4217553">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4217561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4217564">l</span><span class="op" id="4217565">.</span><span class="ident" id="4217566">insert</span><span class="op" id="4217572">(</span><span class="ident" id="4217573">l</span><span class="op" id="4217574">.</span><span class="ident" id="4217575">remove</span><span class="op" id="4217581">(</span><span class="ident" id="4217582">e</span><span class="op" id="4217583">)</span><span class="op" id="4217584">,</span>&nbsp;<span class="ident" id="4217586">mark</span><span class="op" id="4217590">.</span><span class="ident" id="4217591">prev</span><span class="op" id="4217595">)</span><br>
<span class="lineno"></span><span class="op" id="4217597">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4217600">//&nbsp;MoveAfter&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;after&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4217661">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4217741">func</span>&nbsp;<span class="op" id="4217746">(</span><span class="ident" id="4217747">l</span>&nbsp;<span class="op" id="4217749">*</span><span class="ident" id="4217750">List</span><span class="op" id="4217754">)</span>&nbsp;<span class="ident" id="4217756">MoveAfter</span><span class="op" id="4217765">(</span><span class="ident" id="4217766">e</span><span class="op" id="4217767">,</span>&nbsp;<span class="ident" id="4217769">mark</span>&nbsp;<span class="op" id="4217774">*</span><span class="ident" id="4217775">Element</span><span class="op" id="4217782">)</span>&nbsp;<span class="op" id="4217784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4217787">if</span>&nbsp;<span class="ident" id="4217790">e</span><span class="op" id="4217791">.</span><span class="ident" id="4217792">list</span>&nbsp;<span class="op" id="4217797">!=</span>&nbsp;<span class="ident" id="4217800">l</span>&nbsp;<span class="op" id="4217802">||</span>&nbsp;<span class="ident" id="4217805">e</span>&nbsp;<span class="op" id="4217807">==</span>&nbsp;<span class="ident" id="4217810">mark</span>&nbsp;<span class="op" id="4217815">||</span>&nbsp;<span class="ident" id="4217818">mark</span><span class="op" id="4217822">.</span><span class="ident" id="4217823">list</span>&nbsp;<span class="op" id="4217828">!=</span>&nbsp;<span class="ident" id="4217831">l</span>&nbsp;<span class="op" id="4217833">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4217837">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4217845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4217848">l</span><span class="op" id="4217849">.</span><span class="ident" id="4217850">insert</span><span class="op" id="4217856">(</span><span class="ident" id="4217857">l</span><span class="op" id="4217858">.</span><span class="ident" id="4217859">remove</span><span class="op" id="4217865">(</span><span class="ident" id="4217866">e</span><span class="op" id="4217867">)</span><span class="op" id="4217868">,</span>&nbsp;<span class="ident" id="4217870">mark</span><span class="op" id="4217874">)</span><br>
<span class="lineno"></span><span class="op" id="4217876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4217879">//&nbsp;PushBackList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4217950">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4217992">func</span>&nbsp;<span class="op" id="4217997">(</span><span class="ident" id="4217998">l</span>&nbsp;<span class="op" id="4218000">*</span><span class="ident" id="4218001">List</span><span class="op" id="4218005">)</span>&nbsp;<span class="ident" id="4218007">PushBackList</span><span class="op" id="4218019">(</span><span class="ident" id="4218020">other</span>&nbsp;<span class="op" id="4218026">*</span><span class="ident" id="4218027">List</span><span class="op" id="4218031">)</span>&nbsp;<span class="op" id="4218033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4218036">l</span><span class="op" id="4218037">.</span><span class="ident" id="4218038">lazyInit</span><span class="op" id="4218046">(</span><span class="op" id="4218047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4218050">for</span>&nbsp;<span class="ident" id="4218054">i</span><span class="op" id="4218055">,</span>&nbsp;<span class="ident" id="4218057">e</span>&nbsp;<span class="op" id="4218059">:=</span>&nbsp;<span class="ident" id="4218062">other</span><span class="op" id="4218067">.</span><span class="ident" id="4218068">Len</span><span class="op" id="4218071">(</span><span class="op" id="4218072">)</span><span class="op" id="4218073">,</span>&nbsp;<span class="ident" id="4218075">other</span><span class="op" id="4218080">.</span><span class="ident" id="4218081">Front</span><span class="op" id="4218086">(</span><span class="op" id="4218087">)</span><span class="op" id="4218088">;</span>&nbsp;<span class="ident" id="4218090">i</span>&nbsp;<span class="op" id="4218092">&gt;</span>&nbsp;<span class="num" id="4218094">0</span><span class="op" id="4218095">;</span>&nbsp;<span class="ident" id="4218097">i</span><span class="op" id="4218098">,</span>&nbsp;<span class="ident" id="4218100">e</span>&nbsp;<span class="op" id="4218102">=</span>&nbsp;<span class="ident" id="4218104">i</span><span class="op" id="4218105">-</span><span class="num" id="4218106">1</span><span class="op" id="4218107">,</span>&nbsp;<span class="ident" id="4218109">e</span><span class="op" id="4218110">.</span><span class="ident" id="4218111">Next</span><span class="op" id="4218115">(</span><span class="op" id="4218116">)</span>&nbsp;<span class="op" id="4218118">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4218122">l</span><span class="op" id="4218123">.</span><span class="ident" id="4218124">insertValue</span><span class="op" id="4218135">(</span><span class="ident" id="4218136">e</span><span class="op" id="4218137">.</span><span class="ident" id="4218138">Value</span><span class="op" id="4218143">,</span>&nbsp;<span class="ident" id="4218145">l</span><span class="op" id="4218146">.</span><span class="ident" id="4218147">root</span><span class="op" id="4218151">.</span><span class="ident" id="4218152">prev</span><span class="op" id="4218156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4218159">}</span><br>
<span class="lineno"></span><span class="op" id="4218161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4218164">//&nbsp;PushFrontList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">210</span><span class="comment" id="4218237">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4218279">func</span>&nbsp;<span class="op" id="4218284">(</span><span class="ident" id="4218285">l</span>&nbsp;<span class="op" id="4218287">*</span><span class="ident" id="4218288">List</span><span class="op" id="4218292">)</span>&nbsp;<span class="ident" id="4218294">PushFrontList</span><span class="op" id="4218307">(</span><span class="ident" id="4218308">other</span>&nbsp;<span class="op" id="4218314">*</span><span class="ident" id="4218315">List</span><span class="op" id="4218319">)</span>&nbsp;<span class="op" id="4218321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4218324">l</span><span class="op" id="4218325">.</span><span class="ident" id="4218326">lazyInit</span><span class="op" id="4218334">(</span><span class="op" id="4218335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4218338">for</span>&nbsp;<span class="ident" id="4218342">i</span><span class="op" id="4218343">,</span>&nbsp;<span class="ident" id="4218345">e</span>&nbsp;<span class="op" id="4218347">:=</span>&nbsp;<span class="ident" id="4218350">other</span><span class="op" id="4218355">.</span><span class="ident" id="4218356">Len</span><span class="op" id="4218359">(</span><span class="op" id="4218360">)</span><span class="op" id="4218361">,</span>&nbsp;<span class="ident" id="4218363">other</span><span class="op" id="4218368">.</span><span class="ident" id="4218369">Back</span><span class="op" id="4218373">(</span><span class="op" id="4218374">)</span><span class="op" id="4218375">;</span>&nbsp;<span class="ident" id="4218377">i</span>&nbsp;<span class="op" id="4218379">&gt;</span>&nbsp;<span class="num" id="4218381">0</span><span class="op" id="4218382">;</span>&nbsp;<span class="ident" id="4218384">i</span><span class="op" id="4218385">,</span>&nbsp;<span class="ident" id="4218387">e</span>&nbsp;<span class="op" id="4218389">=</span>&nbsp;<span class="ident" id="4218391">i</span><span class="op" id="4218392">-</span><span class="num" id="4218393">1</span><span class="op" id="4218394">,</span>&nbsp;<span class="ident" id="4218396">e</span><span class="op" id="4218397">.</span><span class="ident" id="4218398">Prev</span><span class="op" id="4218402">(</span><span class="op" id="4218403">)</span>&nbsp;<span class="op" id="4218405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4218409">l</span><span class="op" id="4218410">.</span><span class="ident" id="4218411">insertValue</span><span class="op" id="4218422">(</span><span class="ident" id="4218423">e</span><span class="op" id="4218424">.</span><span class="ident" id="4218425">Value</span><span class="op" id="4218430">,</span>&nbsp;<span class="op" id="4218432">&amp;</span><span class="ident" id="4218433">l</span><span class="op" id="4218434">.</span><span class="ident" id="4218435">root</span><span class="op" id="4218439">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4218442">}</span><br>
<span class="lineno"></span><span class="op" id="4218444">}</span>
</div>
</body>
</html>
