<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4731036">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4731091">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4731145">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4731196">package</span>&nbsp;<span class="ident" id="4731204">syntax</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4731212">import</span>&nbsp;<span class="string" id="4731219">&#34;unicode&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4731230">//&nbsp;A&nbsp;patchList&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;instruction&nbsp;pointers&nbsp;that&nbsp;need&nbsp;to&nbsp;be&nbsp;filled&nbsp;in&nbsp;(patched).</span><br>
<span class="lineno">10</span><span class="comment" id="4731316">//&nbsp;Because&nbsp;the&nbsp;pointers&nbsp;haven&#39;t&nbsp;been&nbsp;filled&nbsp;in&nbsp;yet,&nbsp;we&nbsp;can&nbsp;reuse&nbsp;their&nbsp;storage</span><br>
<span class="lineno"></span><span class="comment" id="4731395">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;list.&nbsp;&nbsp;It&#39;s&nbsp;kind&nbsp;of&nbsp;sleazy,&nbsp;but&nbsp;works&nbsp;well&nbsp;in&nbsp;practice.</span><br>
<span class="lineno"></span><span class="comment" id="4731466">//&nbsp;See&nbsp;http://swtch.com/~rsc/regexp/regexp1.html&nbsp;for&nbsp;inspiration.</span><br>
<span class="lineno"></span><span class="comment" id="4731532">//</span><br>
<span class="lineno"></span><span class="comment" id="4731535">//&nbsp;These&nbsp;aren&#39;t&nbsp;really&nbsp;pointers:&nbsp;they&#39;re&nbsp;integers,&nbsp;so&nbsp;we&nbsp;can&nbsp;reinterpret&nbsp;them</span><br>
<span class="lineno">15</span><span class="comment" id="4731613">//&nbsp;this&nbsp;way&nbsp;without&nbsp;using&nbsp;package&nbsp;unsafe.&nbsp;&nbsp;A&nbsp;value&nbsp;l&nbsp;denotes</span><br>
<span class="lineno"></span><span class="comment" id="4731674">//&nbsp;p.inst[l&gt;&gt;1].Out&nbsp;(l&amp;1==0)&nbsp;or&nbsp;.Arg&nbsp;(l&amp;1==1).</span><br>
<span class="lineno"></span><span class="comment" id="4731721">//&nbsp;l&nbsp;==&nbsp;0&nbsp;denotes&nbsp;the&nbsp;empty&nbsp;list,&nbsp;okay&nbsp;because&nbsp;we&nbsp;start&nbsp;every&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="4731791">//&nbsp;with&nbsp;a&nbsp;fail&nbsp;instruction,&nbsp;so&nbsp;we&#39;ll&nbsp;never&nbsp;want&nbsp;to&nbsp;point&nbsp;at&nbsp;its&nbsp;output&nbsp;link.</span><br>
<span class="lineno"></span><span class="keyword" id="4731868">type</span>&nbsp;<span class="ident" id="4731873">patchList</span>&nbsp;<span class="builtintype" id="4731883">uint32</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4731891">func</span>&nbsp;<span class="op" id="4731896">(</span><span class="ident" id="4731897">l</span>&nbsp;<span class="ident" id="4731899"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4731908">)</span>&nbsp;<span class="ident" id="4731910">next</span><span class="op" id="4731914">(</span><span class="ident" id="4731915">p</span>&nbsp;<span class="op" id="4731917">*</span><span class="ident" id="4731918"><a href="/regexp/syntax/prog.go.html#4792273">Prog</a></span><span class="op" id="4731922">)</span>&nbsp;<span class="ident" id="4731924"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span>&nbsp;<span class="op" id="4731934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4731937">i</span>&nbsp;<span class="op" id="4731939">:=</span>&nbsp;<span class="op" id="4731942">&amp;</span><span class="ident" id="4731943"><a href="/regexp/syntax/compile.go.html#4731915">p</a></span><span class="op" id="4731944">.</span><span class="ident" id="4731945">Inst</span><span class="op" id="4731949">[</span><span class="ident" id="4731950"><a href="/regexp/syntax/compile.go.html#4731897">l</a></span><span class="op" id="4731951">&gt;&gt;</span><span class="num" id="4731953">1</span><span class="op" id="4731954">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4731957">if</span>&nbsp;<span class="ident" id="4731960"><a href="/regexp/syntax/compile.go.html#4731897">l</a></span><span class="op" id="4731961">&amp;</span><span class="num" id="4731962">1</span>&nbsp;<span class="op" id="4731964">==</span>&nbsp;<span class="num" id="4731967">0</span>&nbsp;<span class="op" id="4731969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4731973">return</span>&nbsp;<span class="ident" id="4731980"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4731989">(</span><span class="ident" id="4731990"><a href="/regexp/syntax/compile.go.html#4731937">i</a></span><span class="op" id="4731991">.</span><span class="ident" id="4731992">Out</span><span class="op" id="4731995">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4731998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732001">return</span>&nbsp;<span class="ident" id="4732008"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4732017">(</span><span class="ident" id="4732018"><a href="/regexp/syntax/compile.go.html#4731937">i</a></span><span class="op" id="4732019">.</span><span class="ident" id="4732020">Arg</span><span class="op" id="4732023">)</span><br>
<span class="lineno"></span><span class="op" id="4732025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4732028">func</span>&nbsp;<span class="op" id="4732033">(</span><span class="ident" id="4732034">l</span>&nbsp;<span class="ident" id="4732036"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4732045">)</span>&nbsp;<span class="ident" id="4732047">patch</span><span class="op" id="4732052">(</span><span class="ident" id="4732053">p</span>&nbsp;<span class="op" id="4732055">*</span><span class="ident" id="4732056"><a href="/regexp/syntax/prog.go.html#4792273">Prog</a></span><span class="op" id="4732060">,</span>&nbsp;<span class="ident" id="4732062">val</span>&nbsp;<span class="builtintype" id="4732066">uint32</span><span class="op" id="4732072">)</span>&nbsp;<span class="op" id="4732074">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732077">for</span>&nbsp;<span class="ident" id="4732081"><a href="/regexp/syntax/compile.go.html#4732034">l</a></span>&nbsp;<span class="op" id="4732083">!=</span>&nbsp;<span class="num" id="4732086">0</span>&nbsp;<span class="op" id="4732088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732092">i</span>&nbsp;<span class="op" id="4732094">:=</span>&nbsp;<span class="op" id="4732097">&amp;</span><span class="ident" id="4732098"><a href="/regexp/syntax/compile.go.html#4732053">p</a></span><span class="op" id="4732099">.</span><span class="ident" id="4732100">Inst</span><span class="op" id="4732104">[</span><span class="ident" id="4732105"><a href="/regexp/syntax/compile.go.html#4732034">l</a></span><span class="op" id="4732106">&gt;&gt;</span><span class="num" id="4732108">1</span><span class="op" id="4732109">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732113">if</span>&nbsp;<span class="ident" id="4732116"><a href="/regexp/syntax/compile.go.html#4732034">l</a></span><span class="op" id="4732117">&amp;</span><span class="num" id="4732118">1</span>&nbsp;<span class="op" id="4732120">==</span>&nbsp;<span class="num" id="4732123">0</span>&nbsp;<span class="op" id="4732125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732130"><a href="/regexp/syntax/compile.go.html#4732034">l</a></span>&nbsp;<span class="op" id="4732132">=</span>&nbsp;<span class="ident" id="4732134"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4732143">(</span><span class="ident" id="4732144"><a href="/regexp/syntax/compile.go.html#4732092">i</a></span><span class="op" id="4732145">.</span><span class="ident" id="4732146">Out</span><span class="op" id="4732149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732154"><a href="/regexp/syntax/compile.go.html#4732092">i</a></span><span class="op" id="4732155">.</span><span class="ident" id="4732156">Out</span>&nbsp;<span class="op" id="4732160">=</span>&nbsp;<span class="ident" id="4732162"><a href="/regexp/syntax/compile.go.html#4732062">val</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4732168">}</span>&nbsp;<span class="keyword" id="4732170">else</span>&nbsp;<span class="op" id="4732175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732180"><a href="/regexp/syntax/compile.go.html#4732034">l</a></span>&nbsp;<span class="op" id="4732182">=</span>&nbsp;<span class="ident" id="4732184"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4732193">(</span><span class="ident" id="4732194"><a href="/regexp/syntax/compile.go.html#4732092">i</a></span><span class="op" id="4732195">.</span><span class="ident" id="4732196">Arg</span><span class="op" id="4732199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732204"><a href="/regexp/syntax/compile.go.html#4732092">i</a></span><span class="op" id="4732205">.</span><span class="ident" id="4732206">Arg</span>&nbsp;<span class="op" id="4732210">=</span>&nbsp;<span class="ident" id="4732212"><a href="/regexp/syntax/compile.go.html#4732062">val</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4732218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4732221">}</span><br>
<span class="lineno">40</span><span class="op" id="4732223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4732226">func</span>&nbsp;<span class="op" id="4732231">(</span><span class="ident" id="4732232">l1</span>&nbsp;<span class="ident" id="4732235"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4732244">)</span>&nbsp;<span class="builtinfunc" id="4732246">append</span><span class="op" id="4732252">(</span><span class="ident" id="4732253">p</span>&nbsp;<span class="op" id="4732255">*</span><span class="ident" id="4732256"><a href="/regexp/syntax/prog.go.html#4792273">Prog</a></span><span class="op" id="4732260">,</span>&nbsp;<span class="ident" id="4732262">l2</span>&nbsp;<span class="ident" id="4732265"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4732274">)</span>&nbsp;<span class="ident" id="4732276"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span>&nbsp;<span class="op" id="4732286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732289">if</span>&nbsp;<span class="ident" id="4732292"><a href="/regexp/syntax/compile.go.html#4732232">l1</a></span>&nbsp;<span class="op" id="4732295">==</span>&nbsp;<span class="num" id="4732298">0</span>&nbsp;<span class="op" id="4732300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732304">return</span>&nbsp;<span class="ident" id="4732311"><a href="/regexp/syntax/compile.go.html#4732262">l2</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4732315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732318">if</span>&nbsp;<span class="ident" id="4732321"><a href="/regexp/syntax/compile.go.html#4732262">l2</a></span>&nbsp;<span class="op" id="4732324">==</span>&nbsp;<span class="num" id="4732327">0</span>&nbsp;<span class="op" id="4732329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732333">return</span>&nbsp;<span class="ident" id="4732340"><a href="/regexp/syntax/compile.go.html#4732232">l1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4732344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732348">last</span>&nbsp;<span class="op" id="4732353">:=</span>&nbsp;<span class="ident" id="4732356"><a href="/regexp/syntax/compile.go.html#4732232">l1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732360">for</span>&nbsp;<span class="op" id="4732364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732368">next</span>&nbsp;<span class="op" id="4732373">:=</span>&nbsp;<span class="ident" id="4732376"><a href="/regexp/syntax/compile.go.html#4732348">last</a></span><span class="op" id="4732380">.</span><span class="ident" id="4732381">next</span><span class="op" id="4732385">(</span><span class="ident" id="4732386"><a href="/regexp/syntax/compile.go.html#4732253">p</a></span><span class="op" id="4732387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732391">if</span>&nbsp;<span class="ident" id="4732394"><a href="/regexp/syntax/compile.go.html#4732368">next</a></span>&nbsp;<span class="op" id="4732399">==</span>&nbsp;<span class="num" id="4732402">0</span>&nbsp;<span class="op" id="4732404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732409">break</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4732417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732421"><a href="/regexp/syntax/compile.go.html#4732348">last</a></span>&nbsp;<span class="op" id="4732426">=</span>&nbsp;<span class="ident" id="4732428"><a href="/regexp/syntax/compile.go.html#4732368">next</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4732434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732438">i</span>&nbsp;<span class="op" id="4732440">:=</span>&nbsp;<span class="op" id="4732443">&amp;</span><span class="ident" id="4732444"><a href="/regexp/syntax/compile.go.html#4732253">p</a></span><span class="op" id="4732445">.</span><span class="ident" id="4732446">Inst</span><span class="op" id="4732450">[</span><span class="ident" id="4732451"><a href="/regexp/syntax/compile.go.html#4732348">last</a></span><span class="op" id="4732455">&gt;&gt;</span><span class="num" id="4732457">1</span><span class="op" id="4732458">]</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732461">if</span>&nbsp;<span class="ident" id="4732464"><a href="/regexp/syntax/compile.go.html#4732348">last</a></span><span class="op" id="4732468">&amp;</span><span class="num" id="4732469">1</span>&nbsp;<span class="op" id="4732471">==</span>&nbsp;<span class="num" id="4732474">0</span>&nbsp;<span class="op" id="4732476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732480"><a href="/regexp/syntax/compile.go.html#4732438">i</a></span><span class="op" id="4732481">.</span><span class="ident" id="4732482">Out</span>&nbsp;<span class="op" id="4732486">=</span>&nbsp;<span class="builtintype" id="4732488">uint32</span><span class="op" id="4732494">(</span><span class="ident" id="4732495"><a href="/regexp/syntax/compile.go.html#4732262">l2</a></span><span class="op" id="4732497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4732500">}</span>&nbsp;<span class="keyword" id="4732502">else</span>&nbsp;<span class="op" id="4732507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732511"><a href="/regexp/syntax/compile.go.html#4732438">i</a></span><span class="op" id="4732512">.</span><span class="ident" id="4732513">Arg</span>&nbsp;<span class="op" id="4732517">=</span>&nbsp;<span class="builtintype" id="4732519">uint32</span><span class="op" id="4732525">(</span><span class="ident" id="4732526"><a href="/regexp/syntax/compile.go.html#4732262">l2</a></span><span class="op" id="4732528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4732531">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732534">return</span>&nbsp;<span class="ident" id="4732541"><a href="/regexp/syntax/compile.go.html#4732232">l1</a></span><br>
<span class="lineno"></span><span class="op" id="4732544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4732547">//&nbsp;A&nbsp;frag&nbsp;represents&nbsp;a&nbsp;compiled&nbsp;program&nbsp;fragment.</span><br>
<span class="lineno"></span><span class="keyword" id="4732597">type</span>&nbsp;<span class="ident" id="4732602">frag</span>&nbsp;<span class="keyword" id="4732607">struct</span>&nbsp;<span class="op" id="4732614">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732617">i</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4732621">uint32</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4732631">//&nbsp;index&nbsp;of&nbsp;first&nbsp;instruction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732662">out</span>&nbsp;<span class="ident" id="4732666"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span>&nbsp;<span class="comment" id="4732676">//&nbsp;where&nbsp;to&nbsp;record&nbsp;end&nbsp;instruction</span><br>
<span class="lineno"></span><span class="op" id="4732711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4732714">type</span>&nbsp;<span class="ident" id="4732719">compiler</span>&nbsp;<span class="keyword" id="4732728">struct</span>&nbsp;<span class="op" id="4732735">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732738">p</span>&nbsp;<span class="op" id="4732740">*</span><span class="ident" id="4732741"><a href="/regexp/syntax/prog.go.html#4792273">Prog</a></span><br>
<span class="lineno"></span><span class="op" id="4732746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4732749">//&nbsp;Compile&nbsp;compiles&nbsp;the&nbsp;regexp&nbsp;into&nbsp;a&nbsp;program&nbsp;to&nbsp;be&nbsp;executed.</span><br>
<span class="lineno"></span><span class="comment" id="4732811">//&nbsp;The&nbsp;regexp&nbsp;should&nbsp;have&nbsp;been&nbsp;simplified&nbsp;already&nbsp;(returned&nbsp;from&nbsp;re.Simplify).</span><br>
<span class="lineno">80</span><span class="keyword" id="4732890">func</span>&nbsp;<span class="ident" id="4732895">Compile</span><span class="op" id="4732902">(</span><span class="ident" id="4732903">re</span>&nbsp;<span class="op" id="4732906">*</span><span class="ident" id="4732907"><a href="/regexp/syntax/regexp.go.html#4800134">Regexp</a></span><span class="op" id="4732913">)</span>&nbsp;<span class="op" id="4732915">(</span><span class="op" id="4732916">*</span><span class="ident" id="4732917"><a href="/regexp/syntax/prog.go.html#4792273">Prog</a></span><span class="op" id="4732921">,</span>&nbsp;<span class="builtintype" id="4732923">error</span><span class="op" id="4732928">)</span>&nbsp;<span class="op" id="4732930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4732933">var</span>&nbsp;<span class="ident" id="4732937">c</span>&nbsp;<span class="ident" id="4732939"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732949"><a href="/regexp/syntax/compile.go.html#4732937">c</a></span><span class="op" id="4732950">.</span><span class="ident" id="4732951">init</span><span class="op" id="4732955">(</span><span class="op" id="4732956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732959">f</span>&nbsp;<span class="op" id="4732961">:=</span>&nbsp;<span class="ident" id="4732964"><a href="/regexp/syntax/compile.go.html#4732937">c</a></span><span class="op" id="4732965">.</span><span class="ident" id="4732966">compile</span><span class="op" id="4732973">(</span><span class="ident" id="4732974"><a href="/regexp/syntax/compile.go.html#4732903">re</a></span><span class="op" id="4732976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4732979"><a href="/regexp/syntax/compile.go.html#4732959">f</a></span><span class="op" id="4732980">.</span><span class="ident" id="4732981">out</span><span class="op" id="4732984">.</span><span class="ident" id="4732985">patch</span><span class="op" id="4732990">(</span><span class="ident" id="4732991"><a href="/regexp/syntax/compile.go.html#4732937">c</a></span><span class="op" id="4732992">.</span><span class="ident" id="4732993">p</span><span class="op" id="4732994">,</span>&nbsp;<span class="ident" id="4732996"><a href="/regexp/syntax/compile.go.html#4732937">c</a></span><span class="op" id="4732997">.</span><span class="ident" id="4732998">inst</span><span class="op" id="4733002">(</span><span class="ident" id="4733003"><a href="/regexp/syntax/prog.go.html#4792529">InstMatch</a></span><span class="op" id="4733012">)</span><span class="op" id="4733013">.</span><span class="ident" id="4733014">i</span><span class="op" id="4733015">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4733018"><a href="/regexp/syntax/compile.go.html#4732937">c</a></span><span class="op" id="4733019">.</span><span class="ident" id="4733020">p</span><span class="op" id="4733021">.</span><span class="ident" id="4733022">Start</span>&nbsp;<span class="op" id="4733028">=</span>&nbsp;<span class="builtintype" id="4733030">int</span><span class="op" id="4733033">(</span><span class="ident" id="4733034"><a href="/regexp/syntax/compile.go.html#4732959">f</a></span><span class="op" id="4733035">.</span><span class="ident" id="4733036">i</span><span class="op" id="4733037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733040">return</span>&nbsp;<span class="ident" id="4733047"><a href="/regexp/syntax/compile.go.html#4732937">c</a></span><span class="op" id="4733048">.</span><span class="ident" id="4733049">p</span><span class="op" id="4733050">,</span>&nbsp;<span class="ident" id="4733052">nil</span><br>
<span class="lineno"></span><span class="op" id="4733056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4733059">func</span>&nbsp;<span class="op" id="4733064">(</span><span class="ident" id="4733065">c</span>&nbsp;<span class="op" id="4733067">*</span><span class="ident" id="4733068"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4733076">)</span>&nbsp;<span class="ident" id="4733078">init</span><span class="op" id="4733082">(</span><span class="op" id="4733083">)</span>&nbsp;<span class="op" id="4733085">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4733088"><a href="/regexp/syntax/compile.go.html#4733065">c</a></span><span class="op" id="4733089">.</span><span class="ident" id="4733090">p</span>&nbsp;<span class="op" id="4733092">=</span>&nbsp;<span class="builtinfunc" id="4733094">new</span><span class="op" id="4733097">(</span><span class="ident" id="4733098"><a href="/regexp/syntax/prog.go.html#4792273">Prog</a></span><span class="op" id="4733102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4733105"><a href="/regexp/syntax/compile.go.html#4733065">c</a></span><span class="op" id="4733106">.</span><span class="ident" id="4733107">p</span><span class="op" id="4733108">.</span><span class="ident" id="4733109">NumCap</span>&nbsp;<span class="op" id="4733116">=</span>&nbsp;<span class="num" id="4733118">2</span>&nbsp;<span class="comment" id="4733120">//&nbsp;implicit&nbsp;(&nbsp;and&nbsp;)&nbsp;for&nbsp;whole&nbsp;match&nbsp;$0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4733160"><a href="/regexp/syntax/compile.go.html#4733065">c</a></span><span class="op" id="4733161">.</span><span class="ident" id="4733162">inst</span><span class="op" id="4733166">(</span><span class="ident" id="4733167"><a href="/regexp/syntax/prog.go.html#4792540">InstFail</a></span><span class="op" id="4733175">)</span><br>
<span class="lineno"></span><span class="op" id="4733177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="4733180">var</span>&nbsp;<span class="ident" id="4733184">anyRuneNotNL</span>&nbsp;<span class="op" id="4733197">=</span>&nbsp;<span class="op" id="4733199">[</span><span class="op" id="4733200">]</span><span class="builtintype" id="4733201">rune</span><span class="op" id="4733205">{</span><span class="num" id="4733206">0</span><span class="op" id="4733207">,</span>&nbsp;<span class="string" id="4733209">&#39;\n&#39;</span>&nbsp;<span class="op" id="4733214">-</span>&nbsp;<span class="num" id="4733216">1</span><span class="op" id="4733217">,</span>&nbsp;<span class="string" id="4733219">&#39;\n&#39;</span>&nbsp;<span class="op" id="4733224">+</span>&nbsp;<span class="num" id="4733226">1</span><span class="op" id="4733227">,</span>&nbsp;<span class="ident" id="4733229"><a href="/regexp/syntax/compile.go.html#4731219">unicode</a></span><span class="op" id="4733236">.</span><span class="ident" id="4733237">MaxRune</span><span class="op" id="4733244">}</span><br>
<span class="lineno"></span><span class="keyword" id="4733246">var</span>&nbsp;<span class="ident" id="4733250">anyRune</span>&nbsp;<span class="op" id="4733258">=</span>&nbsp;<span class="op" id="4733260">[</span><span class="op" id="4733261">]</span><span class="builtintype" id="4733262">rune</span><span class="op" id="4733266">{</span><span class="num" id="4733267">0</span><span class="op" id="4733268">,</span>&nbsp;<span class="ident" id="4733270"><a href="/regexp/syntax/compile.go.html#4731219">unicode</a></span><span class="op" id="4733277">.</span><span class="ident" id="4733278">MaxRune</span><span class="op" id="4733285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4733288">func</span>&nbsp;<span class="op" id="4733293">(</span><span class="ident" id="4733294">c</span>&nbsp;<span class="op" id="4733296">*</span><span class="ident" id="4733297"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4733305">)</span>&nbsp;<span class="ident" id="4733307">compile</span><span class="op" id="4733314">(</span><span class="ident" id="4733315">re</span>&nbsp;<span class="op" id="4733318">*</span><span class="ident" id="4733319"><a href="/regexp/syntax/regexp.go.html#4800134">Regexp</a></span><span class="op" id="4733325">)</span>&nbsp;<span class="ident" id="4733327"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4733332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733335">switch</span>&nbsp;<span class="ident" id="4733342"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4733344">.</span><span class="ident" id="4733345">Op</span>&nbsp;<span class="op" id="4733348">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733351">case</span>&nbsp;<span class="ident" id="4733356"><a href="/regexp/syntax/regexp.go.html#4800825">OpNoMatch</a></span><span class="op" id="4733365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733369">return</span>&nbsp;<span class="ident" id="4733376"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733377">.</span><span class="ident" id="4733378">fail</span><span class="op" id="4733382">(</span><span class="op" id="4733383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733386">case</span>&nbsp;<span class="ident" id="4733391"><a href="/regexp/syntax/regexp.go.html#4800879">OpEmptyMatch</a></span><span class="op" id="4733403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733407">return</span>&nbsp;<span class="ident" id="4733414"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733415">.</span><span class="ident" id="4733416">nop</span><span class="op" id="4733419">(</span><span class="op" id="4733420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733423">case</span>&nbsp;<span class="ident" id="4733428"><a href="/regexp/syntax/regexp.go.html#4800935">OpLiteral</a></span><span class="op" id="4733437">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733441">if</span>&nbsp;<span class="builtinfunc" id="4733444">len</span><span class="op" id="4733447">(</span><span class="ident" id="4733448"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4733450">.</span><span class="ident" id="4733451">Rune</span><span class="op" id="4733455">)</span>&nbsp;<span class="op" id="4733457">==</span>&nbsp;<span class="num" id="4733460">0</span>&nbsp;<span class="op" id="4733462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733467">return</span>&nbsp;<span class="ident" id="4733474"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733475">.</span><span class="ident" id="4733476">nop</span><span class="op" id="4733479">(</span><span class="op" id="4733480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4733484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733488">var</span>&nbsp;<span class="ident" id="4733492">f</span>&nbsp;<span class="ident" id="4733494"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733501">for</span>&nbsp;<span class="ident" id="4733505">j</span>&nbsp;<span class="op" id="4733507">:=</span>&nbsp;<span class="keyword" id="4733510">range</span>&nbsp;<span class="ident" id="4733516"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4733518">.</span><span class="ident" id="4733519">Rune</span>&nbsp;<span class="op" id="4733524">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4733529">f1</span>&nbsp;<span class="op" id="4733532">:=</span>&nbsp;<span class="ident" id="4733535"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733536">.</span><span class="builtintype" id="4733537">rune</span><span class="op" id="4733541">(</span><span class="ident" id="4733542"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4733544">.</span><span class="ident" id="4733545">Rune</span><span class="op" id="4733549">[</span><span class="ident" id="4733550"><a href="/regexp/syntax/compile.go.html#4733505">j</a></span><span class="op" id="4733551">:</span><span class="ident" id="4733552"><a href="/regexp/syntax/compile.go.html#4733505">j</a></span><span class="op" id="4733553">+</span><span class="num" id="4733554">1</span><span class="op" id="4733555">]</span><span class="op" id="4733556">,</span>&nbsp;<span class="ident" id="4733558"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4733560">.</span><span class="ident" id="4733561">Flags</span><span class="op" id="4733566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733571">if</span>&nbsp;<span class="ident" id="4733574"><a href="/regexp/syntax/compile.go.html#4733505">j</a></span>&nbsp;<span class="op" id="4733576">==</span>&nbsp;<span class="num" id="4733579">0</span>&nbsp;<span class="op" id="4733581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4733587"><a href="/regexp/syntax/compile.go.html#4733492">f</a></span>&nbsp;<span class="op" id="4733589">=</span>&nbsp;<span class="ident" id="4733591"><a href="/regexp/syntax/compile.go.html#4733529">f1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4733597">}</span>&nbsp;<span class="keyword" id="4733599">else</span>&nbsp;<span class="op" id="4733604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4733610"><a href="/regexp/syntax/compile.go.html#4733492">f</a></span>&nbsp;<span class="op" id="4733612">=</span>&nbsp;<span class="ident" id="4733614"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733615">.</span><span class="ident" id="4733616">cat</span><span class="op" id="4733619">(</span><span class="ident" id="4733620"><a href="/regexp/syntax/compile.go.html#4733492">f</a></span><span class="op" id="4733621">,</span>&nbsp;<span class="ident" id="4733623"><a href="/regexp/syntax/compile.go.html#4733529">f1</a></span><span class="op" id="4733625">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4733630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4733634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733638">return</span>&nbsp;<span class="ident" id="4733645"><a href="/regexp/syntax/compile.go.html#4733492">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733648">case</span>&nbsp;<span class="ident" id="4733653"><a href="/regexp/syntax/regexp.go.html#4800993">OpCharClass</a></span><span class="op" id="4733664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733668">return</span>&nbsp;<span class="ident" id="4733675"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733676">.</span><span class="builtintype" id="4733677">rune</span><span class="op" id="4733681">(</span><span class="ident" id="4733682"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4733684">.</span><span class="ident" id="4733685">Rune</span><span class="op" id="4733689">,</span>&nbsp;<span class="ident" id="4733691"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4733693">.</span><span class="ident" id="4733694">Flags</span><span class="op" id="4733699">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733702">case</span>&nbsp;<span class="ident" id="4733707"><a href="/regexp/syntax/regexp.go.html#4801073">OpAnyCharNotNL</a></span><span class="op" id="4733721">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733725">return</span>&nbsp;<span class="ident" id="4733732"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733733">.</span><span class="builtintype" id="4733734">rune</span><span class="op" id="4733738">(</span><span class="ident" id="4733739"><a href="/regexp/syntax/compile.go.html#4733184">anyRuneNotNL</a></span><span class="op" id="4733751">,</span>&nbsp;<span class="num" id="4733753">0</span><span class="op" id="4733754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733757">case</span>&nbsp;<span class="ident" id="4733762"><a href="/regexp/syntax/regexp.go.html#4801145">OpAnyChar</a></span><span class="op" id="4733771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733775">return</span>&nbsp;<span class="ident" id="4733782"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733783">.</span><span class="builtintype" id="4733784">rune</span><span class="op" id="4733788">(</span><span class="ident" id="4733789"><a href="/regexp/syntax/compile.go.html#4733250">anyRune</a></span><span class="op" id="4733796">,</span>&nbsp;<span class="num" id="4733798">0</span><span class="op" id="4733799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733802">case</span>&nbsp;<span class="ident" id="4733807"><a href="/regexp/syntax/regexp.go.html#4801202">OpBeginLine</a></span><span class="op" id="4733818">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733822">return</span>&nbsp;<span class="ident" id="4733829"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733830">.</span><span class="ident" id="4733831">empty</span><span class="op" id="4733836">(</span><span class="ident" id="4733837"><a href="/regexp/syntax/prog.go.html#4793023">EmptyBeginLine</a></span><span class="op" id="4733851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733854">case</span>&nbsp;<span class="ident" id="4733859"><a href="/regexp/syntax/regexp.go.html#4801279">OpEndLine</a></span><span class="op" id="4733868">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733872">return</span>&nbsp;<span class="ident" id="4733879"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733880">.</span><span class="ident" id="4733881">empty</span><span class="op" id="4733886">(</span><span class="ident" id="4733887"><a href="/regexp/syntax/prog.go.html#4793059">EmptyEndLine</a></span><span class="op" id="4733899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733902">case</span>&nbsp;<span class="ident" id="4733907"><a href="/regexp/syntax/regexp.go.html#4801350">OpBeginText</a></span><span class="op" id="4733918">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733922">return</span>&nbsp;<span class="ident" id="4733929"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733930">.</span><span class="ident" id="4733931">empty</span><span class="op" id="4733936">(</span><span class="ident" id="4733937"><a href="/regexp/syntax/prog.go.html#4793073">EmptyBeginText</a></span><span class="op" id="4733951">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733954">case</span>&nbsp;<span class="ident" id="4733959"><a href="/regexp/syntax/regexp.go.html#4801427">OpEndText</a></span><span class="op" id="4733968">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4733972">return</span>&nbsp;<span class="ident" id="4733979"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4733980">.</span><span class="ident" id="4733981">empty</span><span class="op" id="4733986">(</span><span class="ident" id="4733987"><a href="/regexp/syntax/prog.go.html#4793089">EmptyEndText</a></span><span class="op" id="4733999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734002">case</span>&nbsp;<span class="ident" id="4734007"><a href="/regexp/syntax/regexp.go.html#4801498">OpWordBoundary</a></span><span class="op" id="4734021">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734025">return</span>&nbsp;<span class="ident" id="4734032"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734033">.</span><span class="ident" id="4734034">empty</span><span class="op" id="4734039">(</span><span class="ident" id="4734040"><a href="/regexp/syntax/prog.go.html#4793103">EmptyWordBoundary</a></span><span class="op" id="4734057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734060">case</span>&nbsp;<span class="ident" id="4734065"><a href="/regexp/syntax/regexp.go.html#4801560">OpNoWordBoundary</a></span><span class="op" id="4734081">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734085">return</span>&nbsp;<span class="ident" id="4734092"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734093">.</span><span class="ident" id="4734094">empty</span><span class="op" id="4734099">(</span><span class="ident" id="4734100"><a href="/regexp/syntax/prog.go.html#4793122">EmptyNoWordBoundary</a></span><span class="op" id="4734119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734122">case</span>&nbsp;<span class="ident" id="4734127"><a href="/regexp/syntax/regexp.go.html#4801626">OpCapture</a></span><span class="op" id="4734136">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4734140">bra</span>&nbsp;<span class="op" id="4734144">:=</span>&nbsp;<span class="ident" id="4734147"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734148">.</span><span class="builtinfunc" id="4734149">cap</span><span class="op" id="4734152">(</span><span class="builtintype" id="4734153">uint32</span><span class="op" id="4734159">(</span><span class="ident" id="4734160"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734162">.</span><span class="ident" id="4734163">Cap</span>&nbsp;<span class="op" id="4734167">&lt;&lt;</span>&nbsp;<span class="num" id="4734170">1</span><span class="op" id="4734171">)</span><span class="op" id="4734172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4734176">sub</span>&nbsp;<span class="op" id="4734180">:=</span>&nbsp;<span class="ident" id="4734183"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734184">.</span><span class="ident" id="4734185">compile</span><span class="op" id="4734192">(</span><span class="ident" id="4734193"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734195">.</span><span class="ident" id="4734196">Sub</span><span class="op" id="4734199">[</span><span class="num" id="4734200">0</span><span class="op" id="4734201">]</span><span class="op" id="4734202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4734206">ket</span>&nbsp;<span class="op" id="4734210">:=</span>&nbsp;<span class="ident" id="4734213"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734214">.</span><span class="builtinfunc" id="4734215">cap</span><span class="op" id="4734218">(</span><span class="builtintype" id="4734219">uint32</span><span class="op" id="4734225">(</span><span class="ident" id="4734226"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734228">.</span><span class="ident" id="4734229">Cap</span><span class="op" id="4734232">&lt;&lt;</span><span class="num" id="4734234">1</span>&nbsp;<span class="op" id="4734236">|</span>&nbsp;<span class="num" id="4734238">1</span><span class="op" id="4734239">)</span><span class="op" id="4734240">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734244">return</span>&nbsp;<span class="ident" id="4734251"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734252">.</span><span class="ident" id="4734253">cat</span><span class="op" id="4734256">(</span><span class="ident" id="4734257"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734258">.</span><span class="ident" id="4734259">cat</span><span class="op" id="4734262">(</span><span class="ident" id="4734263"><a href="/regexp/syntax/compile.go.html#4734140">bra</a></span><span class="op" id="4734266">,</span>&nbsp;<span class="ident" id="4734268"><a href="/regexp/syntax/compile.go.html#4734176">sub</a></span><span class="op" id="4734271">)</span><span class="op" id="4734272">,</span>&nbsp;<span class="ident" id="4734274"><a href="/regexp/syntax/compile.go.html#4734206">ket</a></span><span class="op" id="4734277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734280">case</span>&nbsp;<span class="ident" id="4734285"><a href="/regexp/syntax/regexp.go.html#4801720">OpStar</a></span><span class="op" id="4734291">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734295">return</span>&nbsp;<span class="ident" id="4734302"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734303">.</span><span class="ident" id="4734304">star</span><span class="op" id="4734308">(</span><span class="ident" id="4734309"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734310">.</span><span class="ident" id="4734311">compile</span><span class="op" id="4734318">(</span><span class="ident" id="4734319"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734321">.</span><span class="ident" id="4734322">Sub</span><span class="op" id="4734325">[</span><span class="num" id="4734326">0</span><span class="op" id="4734327">]</span><span class="op" id="4734328">)</span><span class="op" id="4734329">,</span>&nbsp;<span class="ident" id="4734331"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734333">.</span><span class="ident" id="4734334">Flags</span><span class="op" id="4734339">&amp;</span><span class="ident" id="4734340"><a href="/regexp/syntax/parse.go.html#4744824">NonGreedy</a></span>&nbsp;<span class="op" id="4734350">!=</span>&nbsp;<span class="num" id="4734353">0</span><span class="op" id="4734354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734357">case</span>&nbsp;<span class="ident" id="4734362"><a href="/regexp/syntax/regexp.go.html#4801789">OpPlus</a></span><span class="op" id="4734368">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734372">return</span>&nbsp;<span class="ident" id="4734379"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734380">.</span><span class="ident" id="4734381">plus</span><span class="op" id="4734385">(</span><span class="ident" id="4734386"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734387">.</span><span class="ident" id="4734388">compile</span><span class="op" id="4734395">(</span><span class="ident" id="4734396"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734398">.</span><span class="ident" id="4734399">Sub</span><span class="op" id="4734402">[</span><span class="num" id="4734403">0</span><span class="op" id="4734404">]</span><span class="op" id="4734405">)</span><span class="op" id="4734406">,</span>&nbsp;<span class="ident" id="4734408"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734410">.</span><span class="ident" id="4734411">Flags</span><span class="op" id="4734416">&amp;</span><span class="ident" id="4734417"><a href="/regexp/syntax/parse.go.html#4744824">NonGreedy</a></span>&nbsp;<span class="op" id="4734427">!=</span>&nbsp;<span class="num" id="4734430">0</span><span class="op" id="4734431">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734434">case</span>&nbsp;<span class="ident" id="4734439"><a href="/regexp/syntax/regexp.go.html#4801857">OpQuest</a></span><span class="op" id="4734446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734450">return</span>&nbsp;<span class="ident" id="4734457"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734458">.</span><span class="ident" id="4734459">quest</span><span class="op" id="4734464">(</span><span class="ident" id="4734465"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734466">.</span><span class="ident" id="4734467">compile</span><span class="op" id="4734474">(</span><span class="ident" id="4734475"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734477">.</span><span class="ident" id="4734478">Sub</span><span class="op" id="4734481">[</span><span class="num" id="4734482">0</span><span class="op" id="4734483">]</span><span class="op" id="4734484">)</span><span class="op" id="4734485">,</span>&nbsp;<span class="ident" id="4734487"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734489">.</span><span class="ident" id="4734490">Flags</span><span class="op" id="4734495">&amp;</span><span class="ident" id="4734496"><a href="/regexp/syntax/parse.go.html#4744824">NonGreedy</a></span>&nbsp;<span class="op" id="4734506">!=</span>&nbsp;<span class="num" id="4734509">0</span><span class="op" id="4734510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734513">case</span>&nbsp;<span class="ident" id="4734518"><a href="/regexp/syntax/regexp.go.html#4802031">OpConcat</a></span><span class="op" id="4734526">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734530">if</span>&nbsp;<span class="builtinfunc" id="4734533">len</span><span class="op" id="4734536">(</span><span class="ident" id="4734537"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734539">.</span><span class="ident" id="4734540">Sub</span><span class="op" id="4734543">)</span>&nbsp;<span class="op" id="4734545">==</span>&nbsp;<span class="num" id="4734548">0</span>&nbsp;<span class="op" id="4734550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734555">return</span>&nbsp;<span class="ident" id="4734562"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734563">.</span><span class="ident" id="4734564">nop</span><span class="op" id="4734567">(</span><span class="op" id="4734568">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4734572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734576">var</span>&nbsp;<span class="ident" id="4734580">f</span>&nbsp;<span class="ident" id="4734582"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734589">for</span>&nbsp;<span class="ident" id="4734593">i</span><span class="op" id="4734594">,</span>&nbsp;<span class="ident" id="4734596">sub</span>&nbsp;<span class="op" id="4734600">:=</span>&nbsp;<span class="keyword" id="4734603">range</span>&nbsp;<span class="ident" id="4734609"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734611">.</span><span class="ident" id="4734612">Sub</span>&nbsp;<span class="op" id="4734616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734621">if</span>&nbsp;<span class="ident" id="4734624"><a href="/regexp/syntax/compile.go.html#4734593">i</a></span>&nbsp;<span class="op" id="4734626">==</span>&nbsp;<span class="num" id="4734629">0</span>&nbsp;<span class="op" id="4734631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4734637"><a href="/regexp/syntax/compile.go.html#4734580">f</a></span>&nbsp;<span class="op" id="4734639">=</span>&nbsp;<span class="ident" id="4734641"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734642">.</span><span class="ident" id="4734643">compile</span><span class="op" id="4734650">(</span><span class="ident" id="4734651"><a href="/regexp/syntax/compile.go.html#4734596">sub</a></span><span class="op" id="4734654">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4734659">}</span>&nbsp;<span class="keyword" id="4734661">else</span>&nbsp;<span class="op" id="4734666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4734672"><a href="/regexp/syntax/compile.go.html#4734580">f</a></span>&nbsp;<span class="op" id="4734674">=</span>&nbsp;<span class="ident" id="4734676"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734677">.</span><span class="ident" id="4734678">cat</span><span class="op" id="4734681">(</span><span class="ident" id="4734682"><a href="/regexp/syntax/compile.go.html#4734580">f</a></span><span class="op" id="4734683">,</span>&nbsp;<span class="ident" id="4734685"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734686">.</span><span class="ident" id="4734687">compile</span><span class="op" id="4734694">(</span><span class="ident" id="4734695"><a href="/regexp/syntax/compile.go.html#4734596">sub</a></span><span class="op" id="4734698">)</span><span class="op" id="4734699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4734704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4734708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734712">return</span>&nbsp;<span class="ident" id="4734719"><a href="/regexp/syntax/compile.go.html#4734580">f</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734722">case</span>&nbsp;<span class="ident" id="4734727"><a href="/regexp/syntax/regexp.go.html#4802096">OpAlternate</a></span><span class="op" id="4734738">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734742">var</span>&nbsp;<span class="ident" id="4734746">f</span>&nbsp;<span class="ident" id="4734748"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734755">for</span>&nbsp;<span class="ident" id="4734759">_</span><span class="op" id="4734760">,</span>&nbsp;<span class="ident" id="4734762">sub</span>&nbsp;<span class="op" id="4734766">:=</span>&nbsp;<span class="keyword" id="4734769">range</span>&nbsp;<span class="ident" id="4734775"><a href="/regexp/syntax/compile.go.html#4733315">re</a></span><span class="op" id="4734777">.</span><span class="ident" id="4734778">Sub</span>&nbsp;<span class="op" id="4734782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4734787"><a href="/regexp/syntax/compile.go.html#4734746">f</a></span>&nbsp;<span class="op" id="4734789">=</span>&nbsp;<span class="ident" id="4734791"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734792">.</span><span class="ident" id="4734793">alt</span><span class="op" id="4734796">(</span><span class="ident" id="4734797"><a href="/regexp/syntax/compile.go.html#4734746">f</a></span><span class="op" id="4734798">,</span>&nbsp;<span class="ident" id="4734800"><a href="/regexp/syntax/compile.go.html#4733294">c</a></span><span class="op" id="4734801">.</span><span class="ident" id="4734802">compile</span><span class="op" id="4734809">(</span><span class="ident" id="4734810"><a href="/regexp/syntax/compile.go.html#4734762">sub</a></span><span class="op" id="4734813">)</span><span class="op" id="4734814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4734818">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4734822">return</span>&nbsp;<span class="ident" id="4734829"><a href="/regexp/syntax/compile.go.html#4734746">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4734832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4734835">panic</span><span class="op" id="4734840">(</span><span class="string" id="4734841">&#34;regexp:&nbsp;unhandled&nbsp;case&nbsp;in&nbsp;compile&#34;</span><span class="op" id="4734876">)</span><br>
<span class="lineno"></span><span class="op" id="4734878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="4734881">func</span>&nbsp;<span class="op" id="4734886">(</span><span class="ident" id="4734887">c</span>&nbsp;<span class="op" id="4734889">*</span><span class="ident" id="4734890"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4734898">)</span>&nbsp;<span class="ident" id="4734900">inst</span><span class="op" id="4734904">(</span><span class="ident" id="4734905">op</span>&nbsp;<span class="ident" id="4734908"><a href="/regexp/syntax/prog.go.html#4792440">InstOp</a></span><span class="op" id="4734914">)</span>&nbsp;<span class="ident" id="4734916"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4734921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4734924">//&nbsp;TODO:&nbsp;impose&nbsp;length&nbsp;limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4734954">f</span>&nbsp;<span class="op" id="4734956">:=</span>&nbsp;<span class="ident" id="4734959"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><span class="op" id="4734963">{</span><span class="ident" id="4734964">i</span><span class="op" id="4734965">:</span>&nbsp;<span class="builtintype" id="4734967">uint32</span><span class="op" id="4734973">(</span><span class="builtinfunc" id="4734974">len</span><span class="op" id="4734977">(</span><span class="ident" id="4734978"><a href="/regexp/syntax/compile.go.html#4734887">c</a></span><span class="op" id="4734979">.</span><span class="ident" id="4734980">p</span><span class="op" id="4734981">.</span><span class="ident" id="4734982">Inst</span><span class="op" id="4734986">)</span><span class="op" id="4734987">)</span><span class="op" id="4734988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4734991"><a href="/regexp/syntax/compile.go.html#4734887">c</a></span><span class="op" id="4734992">.</span><span class="ident" id="4734993">p</span><span class="op" id="4734994">.</span><span class="ident" id="4734995">Inst</span>&nbsp;<span class="op" id="4735000">=</span>&nbsp;<span class="builtinfunc" id="4735002">append</span><span class="op" id="4735008">(</span><span class="ident" id="4735009"><a href="/regexp/syntax/compile.go.html#4734887">c</a></span><span class="op" id="4735010">.</span><span class="ident" id="4735011">p</span><span class="op" id="4735012">.</span><span class="ident" id="4735013">Inst</span><span class="op" id="4735017">,</span>&nbsp;<span class="ident" id="4735019"><a href="/regexp/syntax/prog.go.html#4794325">Inst</a></span><span class="op" id="4735023">{</span><span class="ident" id="4735024">Op</span><span class="op" id="4735026">:</span>&nbsp;<span class="ident" id="4735028"><a href="/regexp/syntax/compile.go.html#4734905">op</a></span><span class="op" id="4735030">}</span><span class="op" id="4735031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735034">return</span>&nbsp;<span class="ident" id="4735041"><a href="/regexp/syntax/compile.go.html#4734954">f</a></span><br>
<span class="lineno">175</span><span class="op" id="4735043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4735046">func</span>&nbsp;<span class="op" id="4735051">(</span><span class="ident" id="4735052">c</span>&nbsp;<span class="op" id="4735054">*</span><span class="ident" id="4735055"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4735063">)</span>&nbsp;<span class="ident" id="4735065">nop</span><span class="op" id="4735068">(</span><span class="op" id="4735069">)</span>&nbsp;<span class="ident" id="4735071"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4735076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735079">f</span>&nbsp;<span class="op" id="4735081">:=</span>&nbsp;<span class="ident" id="4735084"><a href="/regexp/syntax/compile.go.html#4735052">c</a></span><span class="op" id="4735085">.</span><span class="ident" id="4735086">inst</span><span class="op" id="4735090">(</span><span class="ident" id="4735091"><a href="/regexp/syntax/prog.go.html#4792550">InstNop</a></span><span class="op" id="4735098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735101"><a href="/regexp/syntax/compile.go.html#4735079">f</a></span><span class="op" id="4735102">.</span><span class="ident" id="4735103">out</span>&nbsp;<span class="op" id="4735107">=</span>&nbsp;<span class="ident" id="4735109"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4735118">(</span><span class="ident" id="4735119"><a href="/regexp/syntax/compile.go.html#4735079">f</a></span><span class="op" id="4735120">.</span><span class="ident" id="4735121">i</span>&nbsp;<span class="op" id="4735123">&lt;&lt;</span>&nbsp;<span class="num" id="4735126">1</span><span class="op" id="4735127">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735130">return</span>&nbsp;<span class="ident" id="4735137"><a href="/regexp/syntax/compile.go.html#4735079">f</a></span><br>
<span class="lineno"></span><span class="op" id="4735139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4735142">func</span>&nbsp;<span class="op" id="4735147">(</span><span class="ident" id="4735148">c</span>&nbsp;<span class="op" id="4735150">*</span><span class="ident" id="4735151"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4735159">)</span>&nbsp;<span class="ident" id="4735161">fail</span><span class="op" id="4735165">(</span><span class="op" id="4735166">)</span>&nbsp;<span class="ident" id="4735168"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4735173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735176">return</span>&nbsp;<span class="ident" id="4735183"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><span class="op" id="4735187">{</span><span class="op" id="4735188">}</span><br>
<span class="lineno">185</span><span class="op" id="4735190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4735193">func</span>&nbsp;<span class="op" id="4735198">(</span><span class="ident" id="4735199">c</span>&nbsp;<span class="op" id="4735201">*</span><span class="ident" id="4735202"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4735210">)</span>&nbsp;<span class="builtinfunc" id="4735212">cap</span><span class="op" id="4735215">(</span><span class="ident" id="4735216">arg</span>&nbsp;<span class="builtintype" id="4735220">uint32</span><span class="op" id="4735226">)</span>&nbsp;<span class="ident" id="4735228"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4735233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735236">f</span>&nbsp;<span class="op" id="4735238">:=</span>&nbsp;<span class="ident" id="4735241"><a href="/regexp/syntax/compile.go.html#4735199">c</a></span><span class="op" id="4735242">.</span><span class="ident" id="4735243">inst</span><span class="op" id="4735247">(</span><span class="ident" id="4735248"><a href="/regexp/syntax/prog.go.html#4792500">InstCapture</a></span><span class="op" id="4735259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735262"><a href="/regexp/syntax/compile.go.html#4735236">f</a></span><span class="op" id="4735263">.</span><span class="ident" id="4735264">out</span>&nbsp;<span class="op" id="4735268">=</span>&nbsp;<span class="ident" id="4735270"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4735279">(</span><span class="ident" id="4735280"><a href="/regexp/syntax/compile.go.html#4735236">f</a></span><span class="op" id="4735281">.</span><span class="ident" id="4735282">i</span>&nbsp;<span class="op" id="4735284">&lt;&lt;</span>&nbsp;<span class="num" id="4735287">1</span><span class="op" id="4735288">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735291"><a href="/regexp/syntax/compile.go.html#4735199">c</a></span><span class="op" id="4735292">.</span><span class="ident" id="4735293">p</span><span class="op" id="4735294">.</span><span class="ident" id="4735295">Inst</span><span class="op" id="4735299">[</span><span class="ident" id="4735300"><a href="/regexp/syntax/compile.go.html#4735236">f</a></span><span class="op" id="4735301">.</span><span class="ident" id="4735302">i</span><span class="op" id="4735303">]</span><span class="op" id="4735304">.</span><span class="ident" id="4735305">Arg</span>&nbsp;<span class="op" id="4735309">=</span>&nbsp;<span class="ident" id="4735311"><a href="/regexp/syntax/compile.go.html#4735216">arg</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735317">if</span>&nbsp;<span class="ident" id="4735320"><a href="/regexp/syntax/compile.go.html#4735199">c</a></span><span class="op" id="4735321">.</span><span class="ident" id="4735322">p</span><span class="op" id="4735323">.</span><span class="ident" id="4735324">NumCap</span>&nbsp;<span class="op" id="4735331">&lt;</span>&nbsp;<span class="builtintype" id="4735333">int</span><span class="op" id="4735336">(</span><span class="ident" id="4735337"><a href="/regexp/syntax/compile.go.html#4735216">arg</a></span><span class="op" id="4735340">)</span><span class="op" id="4735341">+</span><span class="num" id="4735342">1</span>&nbsp;<span class="op" id="4735344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735348"><a href="/regexp/syntax/compile.go.html#4735199">c</a></span><span class="op" id="4735349">.</span><span class="ident" id="4735350">p</span><span class="op" id="4735351">.</span><span class="ident" id="4735352">NumCap</span>&nbsp;<span class="op" id="4735359">=</span>&nbsp;<span class="builtintype" id="4735361">int</span><span class="op" id="4735364">(</span><span class="ident" id="4735365"><a href="/regexp/syntax/compile.go.html#4735216">arg</a></span><span class="op" id="4735368">)</span>&nbsp;<span class="op" id="4735370">+</span>&nbsp;<span class="num" id="4735372">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4735375">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735378">return</span>&nbsp;<span class="ident" id="4735385"><a href="/regexp/syntax/compile.go.html#4735236">f</a></span><br>
<span class="lineno"></span><span class="op" id="4735387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4735390">func</span>&nbsp;<span class="op" id="4735395">(</span><span class="ident" id="4735396">c</span>&nbsp;<span class="op" id="4735398">*</span><span class="ident" id="4735399"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4735407">)</span>&nbsp;<span class="ident" id="4735409">cat</span><span class="op" id="4735412">(</span><span class="ident" id="4735413">f1</span><span class="op" id="4735415">,</span>&nbsp;<span class="ident" id="4735417">f2</span>&nbsp;<span class="ident" id="4735420"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><span class="op" id="4735424">)</span>&nbsp;<span class="ident" id="4735426"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4735431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4735434">//&nbsp;concat&nbsp;of&nbsp;failure&nbsp;is&nbsp;failure</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735467">if</span>&nbsp;<span class="ident" id="4735470"><a href="/regexp/syntax/compile.go.html#4735413">f1</a></span><span class="op" id="4735472">.</span><span class="ident" id="4735473">i</span>&nbsp;<span class="op" id="4735475">==</span>&nbsp;<span class="num" id="4735478">0</span>&nbsp;<span class="op" id="4735480">||</span>&nbsp;<span class="ident" id="4735483"><a href="/regexp/syntax/compile.go.html#4735417">f2</a></span><span class="op" id="4735485">.</span><span class="ident" id="4735486">i</span>&nbsp;<span class="op" id="4735488">==</span>&nbsp;<span class="num" id="4735491">0</span>&nbsp;<span class="op" id="4735493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735497">return</span>&nbsp;<span class="ident" id="4735504"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><span class="op" id="4735508">{</span><span class="op" id="4735509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4735512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4735516">//&nbsp;TODO:&nbsp;elide&nbsp;nop</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735537"><a href="/regexp/syntax/compile.go.html#4735413">f1</a></span><span class="op" id="4735539">.</span><span class="ident" id="4735540">out</span><span class="op" id="4735543">.</span><span class="ident" id="4735544">patch</span><span class="op" id="4735549">(</span><span class="ident" id="4735550"><a href="/regexp/syntax/compile.go.html#4735396">c</a></span><span class="op" id="4735551">.</span><span class="ident" id="4735552">p</span><span class="op" id="4735553">,</span>&nbsp;<span class="ident" id="4735555"><a href="/regexp/syntax/compile.go.html#4735417">f2</a></span><span class="op" id="4735557">.</span><span class="ident" id="4735558">i</span><span class="op" id="4735559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735562">return</span>&nbsp;<span class="ident" id="4735569"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><span class="op" id="4735573">{</span><span class="ident" id="4735574"><a href="/regexp/syntax/compile.go.html#4735413">f1</a></span><span class="op" id="4735576">.</span><span class="ident" id="4735577">i</span><span class="op" id="4735578">,</span>&nbsp;<span class="ident" id="4735580"><a href="/regexp/syntax/compile.go.html#4735417">f2</a></span><span class="op" id="4735582">.</span><span class="ident" id="4735583">out</span><span class="op" id="4735586">}</span><br>
<span class="lineno"></span><span class="op" id="4735588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="4735591">func</span>&nbsp;<span class="op" id="4735596">(</span><span class="ident" id="4735597">c</span>&nbsp;<span class="op" id="4735599">*</span><span class="ident" id="4735600"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4735608">)</span>&nbsp;<span class="ident" id="4735610">alt</span><span class="op" id="4735613">(</span><span class="ident" id="4735614">f1</span><span class="op" id="4735616">,</span>&nbsp;<span class="ident" id="4735618">f2</span>&nbsp;<span class="ident" id="4735621"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><span class="op" id="4735625">)</span>&nbsp;<span class="ident" id="4735627"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4735632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4735635">//&nbsp;alt&nbsp;of&nbsp;failure&nbsp;is&nbsp;other</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735663">if</span>&nbsp;<span class="ident" id="4735666"><a href="/regexp/syntax/compile.go.html#4735614">f1</a></span><span class="op" id="4735668">.</span><span class="ident" id="4735669">i</span>&nbsp;<span class="op" id="4735671">==</span>&nbsp;<span class="num" id="4735674">0</span>&nbsp;<span class="op" id="4735676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735680">return</span>&nbsp;<span class="ident" id="4735687"><a href="/regexp/syntax/compile.go.html#4735618">f2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4735691">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735694">if</span>&nbsp;<span class="ident" id="4735697"><a href="/regexp/syntax/compile.go.html#4735618">f2</a></span><span class="op" id="4735699">.</span><span class="ident" id="4735700">i</span>&nbsp;<span class="op" id="4735702">==</span>&nbsp;<span class="num" id="4735705">0</span>&nbsp;<span class="op" id="4735707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735711">return</span>&nbsp;<span class="ident" id="4735718"><a href="/regexp/syntax/compile.go.html#4735614">f1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4735722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735726">f</span>&nbsp;<span class="op" id="4735728">:=</span>&nbsp;<span class="ident" id="4735731"><a href="/regexp/syntax/compile.go.html#4735597">c</a></span><span class="op" id="4735732">.</span><span class="ident" id="4735733">inst</span><span class="op" id="4735737">(</span><span class="ident" id="4735738"><a href="/regexp/syntax/prog.go.html#4792463">InstAlt</a></span><span class="op" id="4735745">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735748">i</span>&nbsp;<span class="op" id="4735750">:=</span>&nbsp;<span class="op" id="4735753">&amp;</span><span class="ident" id="4735754"><a href="/regexp/syntax/compile.go.html#4735597">c</a></span><span class="op" id="4735755">.</span><span class="ident" id="4735756">p</span><span class="op" id="4735757">.</span><span class="ident" id="4735758">Inst</span><span class="op" id="4735762">[</span><span class="ident" id="4735763"><a href="/regexp/syntax/compile.go.html#4735726">f</a></span><span class="op" id="4735764">.</span><span class="ident" id="4735765">i</span><span class="op" id="4735766">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735769"><a href="/regexp/syntax/compile.go.html#4735748">i</a></span><span class="op" id="4735770">.</span><span class="ident" id="4735771">Out</span>&nbsp;<span class="op" id="4735775">=</span>&nbsp;<span class="ident" id="4735777"><a href="/regexp/syntax/compile.go.html#4735614">f1</a></span><span class="op" id="4735779">.</span><span class="ident" id="4735780">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735783"><a href="/regexp/syntax/compile.go.html#4735748">i</a></span><span class="op" id="4735784">.</span><span class="ident" id="4735785">Arg</span>&nbsp;<span class="op" id="4735789">=</span>&nbsp;<span class="ident" id="4735791"><a href="/regexp/syntax/compile.go.html#4735618">f2</a></span><span class="op" id="4735793">.</span><span class="ident" id="4735794">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735797"><a href="/regexp/syntax/compile.go.html#4735726">f</a></span><span class="op" id="4735798">.</span><span class="ident" id="4735799">out</span>&nbsp;<span class="op" id="4735803">=</span>&nbsp;<span class="ident" id="4735805"><a href="/regexp/syntax/compile.go.html#4735614">f1</a></span><span class="op" id="4735807">.</span><span class="ident" id="4735808">out</span><span class="op" id="4735811">.</span><span class="builtinfunc" id="4735812">append</span><span class="op" id="4735818">(</span><span class="ident" id="4735819"><a href="/regexp/syntax/compile.go.html#4735597">c</a></span><span class="op" id="4735820">.</span><span class="ident" id="4735821">p</span><span class="op" id="4735822">,</span>&nbsp;<span class="ident" id="4735824"><a href="/regexp/syntax/compile.go.html#4735618">f2</a></span><span class="op" id="4735826">.</span><span class="ident" id="4735827">out</span><span class="op" id="4735830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735833">return</span>&nbsp;<span class="ident" id="4735840"><a href="/regexp/syntax/compile.go.html#4735726">f</a></span><br>
<span class="lineno">225</span><span class="op" id="4735842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4735845">func</span>&nbsp;<span class="op" id="4735850">(</span><span class="ident" id="4735851">c</span>&nbsp;<span class="op" id="4735853">*</span><span class="ident" id="4735854"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4735862">)</span>&nbsp;<span class="ident" id="4735864">quest</span><span class="op" id="4735869">(</span><span class="ident" id="4735870">f1</span>&nbsp;<span class="ident" id="4735873"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><span class="op" id="4735877">,</span>&nbsp;<span class="ident" id="4735879">nongreedy</span>&nbsp;<span class="builtintype" id="4735889">bool</span><span class="op" id="4735893">)</span>&nbsp;<span class="ident" id="4735895"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4735900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735903">f</span>&nbsp;<span class="op" id="4735905">:=</span>&nbsp;<span class="ident" id="4735908"><a href="/regexp/syntax/compile.go.html#4735851">c</a></span><span class="op" id="4735909">.</span><span class="ident" id="4735910">inst</span><span class="op" id="4735914">(</span><span class="ident" id="4735915"><a href="/regexp/syntax/prog.go.html#4792463">InstAlt</a></span><span class="op" id="4735922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735925">i</span>&nbsp;<span class="op" id="4735927">:=</span>&nbsp;<span class="op" id="4735930">&amp;</span><span class="ident" id="4735931"><a href="/regexp/syntax/compile.go.html#4735851">c</a></span><span class="op" id="4735932">.</span><span class="ident" id="4735933">p</span><span class="op" id="4735934">.</span><span class="ident" id="4735935">Inst</span><span class="op" id="4735939">[</span><span class="ident" id="4735940"><a href="/regexp/syntax/compile.go.html#4735903">f</a></span><span class="op" id="4735941">.</span><span class="ident" id="4735942">i</span><span class="op" id="4735943">]</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4735946">if</span>&nbsp;<span class="ident" id="4735949"><a href="/regexp/syntax/compile.go.html#4735879">nongreedy</a></span>&nbsp;<span class="op" id="4735959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735963"><a href="/regexp/syntax/compile.go.html#4735925">i</a></span><span class="op" id="4735964">.</span><span class="ident" id="4735965">Arg</span>&nbsp;<span class="op" id="4735969">=</span>&nbsp;<span class="ident" id="4735971"><a href="/regexp/syntax/compile.go.html#4735870">f1</a></span><span class="op" id="4735973">.</span><span class="ident" id="4735974">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4735978"><a href="/regexp/syntax/compile.go.html#4735903">f</a></span><span class="op" id="4735979">.</span><span class="ident" id="4735980">out</span>&nbsp;<span class="op" id="4735984">=</span>&nbsp;<span class="ident" id="4735986"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4735995">(</span><span class="ident" id="4735996"><a href="/regexp/syntax/compile.go.html#4735903">f</a></span><span class="op" id="4735997">.</span><span class="ident" id="4735998">i</span>&nbsp;<span class="op" id="4736000">&lt;&lt;</span>&nbsp;<span class="num" id="4736003">1</span><span class="op" id="4736004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4736007">}</span>&nbsp;<span class="keyword" id="4736009">else</span>&nbsp;<span class="op" id="4736014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736018"><a href="/regexp/syntax/compile.go.html#4735925">i</a></span><span class="op" id="4736019">.</span><span class="ident" id="4736020">Out</span>&nbsp;<span class="op" id="4736024">=</span>&nbsp;<span class="ident" id="4736026"><a href="/regexp/syntax/compile.go.html#4735870">f1</a></span><span class="op" id="4736028">.</span><span class="ident" id="4736029">i</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736033"><a href="/regexp/syntax/compile.go.html#4735903">f</a></span><span class="op" id="4736034">.</span><span class="ident" id="4736035">out</span>&nbsp;<span class="op" id="4736039">=</span>&nbsp;<span class="ident" id="4736041"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4736050">(</span><span class="ident" id="4736051"><a href="/regexp/syntax/compile.go.html#4735903">f</a></span><span class="op" id="4736052">.</span><span class="ident" id="4736053">i</span><span class="op" id="4736054">&lt;&lt;</span><span class="num" id="4736056">1</span>&nbsp;<span class="op" id="4736058">|</span>&nbsp;<span class="num" id="4736060">1</span><span class="op" id="4736061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4736064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736067"><a href="/regexp/syntax/compile.go.html#4735903">f</a></span><span class="op" id="4736068">.</span><span class="ident" id="4736069">out</span>&nbsp;<span class="op" id="4736073">=</span>&nbsp;<span class="ident" id="4736075"><a href="/regexp/syntax/compile.go.html#4735903">f</a></span><span class="op" id="4736076">.</span><span class="ident" id="4736077">out</span><span class="op" id="4736080">.</span><span class="builtinfunc" id="4736081">append</span><span class="op" id="4736087">(</span><span class="ident" id="4736088"><a href="/regexp/syntax/compile.go.html#4735851">c</a></span><span class="op" id="4736089">.</span><span class="ident" id="4736090">p</span><span class="op" id="4736091">,</span>&nbsp;<span class="ident" id="4736093"><a href="/regexp/syntax/compile.go.html#4735870">f1</a></span><span class="op" id="4736095">.</span><span class="ident" id="4736096">out</span><span class="op" id="4736099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736102">return</span>&nbsp;<span class="ident" id="4736109"><a href="/regexp/syntax/compile.go.html#4735903">f</a></span><br>
<span class="lineno"></span><span class="op" id="4736111">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="keyword" id="4736114">func</span>&nbsp;<span class="op" id="4736119">(</span><span class="ident" id="4736120">c</span>&nbsp;<span class="op" id="4736122">*</span><span class="ident" id="4736123"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4736131">)</span>&nbsp;<span class="ident" id="4736133">star</span><span class="op" id="4736137">(</span><span class="ident" id="4736138">f1</span>&nbsp;<span class="ident" id="4736141"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><span class="op" id="4736145">,</span>&nbsp;<span class="ident" id="4736147">nongreedy</span>&nbsp;<span class="builtintype" id="4736157">bool</span><span class="op" id="4736161">)</span>&nbsp;<span class="ident" id="4736163"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4736168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736171">f</span>&nbsp;<span class="op" id="4736173">:=</span>&nbsp;<span class="ident" id="4736176"><a href="/regexp/syntax/compile.go.html#4736120">c</a></span><span class="op" id="4736177">.</span><span class="ident" id="4736178">inst</span><span class="op" id="4736182">(</span><span class="ident" id="4736183"><a href="/regexp/syntax/prog.go.html#4792463">InstAlt</a></span><span class="op" id="4736190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736193">i</span>&nbsp;<span class="op" id="4736195">:=</span>&nbsp;<span class="op" id="4736198">&amp;</span><span class="ident" id="4736199"><a href="/regexp/syntax/compile.go.html#4736120">c</a></span><span class="op" id="4736200">.</span><span class="ident" id="4736201">p</span><span class="op" id="4736202">.</span><span class="ident" id="4736203">Inst</span><span class="op" id="4736207">[</span><span class="ident" id="4736208"><a href="/regexp/syntax/compile.go.html#4736171">f</a></span><span class="op" id="4736209">.</span><span class="ident" id="4736210">i</span><span class="op" id="4736211">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736214">if</span>&nbsp;<span class="ident" id="4736217"><a href="/regexp/syntax/compile.go.html#4736147">nongreedy</a></span>&nbsp;<span class="op" id="4736227">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736231"><a href="/regexp/syntax/compile.go.html#4736193">i</a></span><span class="op" id="4736232">.</span><span class="ident" id="4736233">Arg</span>&nbsp;<span class="op" id="4736237">=</span>&nbsp;<span class="ident" id="4736239"><a href="/regexp/syntax/compile.go.html#4736138">f1</a></span><span class="op" id="4736241">.</span><span class="ident" id="4736242">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736246"><a href="/regexp/syntax/compile.go.html#4736171">f</a></span><span class="op" id="4736247">.</span><span class="ident" id="4736248">out</span>&nbsp;<span class="op" id="4736252">=</span>&nbsp;<span class="ident" id="4736254"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4736263">(</span><span class="ident" id="4736264"><a href="/regexp/syntax/compile.go.html#4736171">f</a></span><span class="op" id="4736265">.</span><span class="ident" id="4736266">i</span>&nbsp;<span class="op" id="4736268">&lt;&lt;</span>&nbsp;<span class="num" id="4736271">1</span><span class="op" id="4736272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4736275">}</span>&nbsp;<span class="keyword" id="4736277">else</span>&nbsp;<span class="op" id="4736282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736286"><a href="/regexp/syntax/compile.go.html#4736193">i</a></span><span class="op" id="4736287">.</span><span class="ident" id="4736288">Out</span>&nbsp;<span class="op" id="4736292">=</span>&nbsp;<span class="ident" id="4736294"><a href="/regexp/syntax/compile.go.html#4736138">f1</a></span><span class="op" id="4736296">.</span><span class="ident" id="4736297">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736301"><a href="/regexp/syntax/compile.go.html#4736171">f</a></span><span class="op" id="4736302">.</span><span class="ident" id="4736303">out</span>&nbsp;<span class="op" id="4736307">=</span>&nbsp;<span class="ident" id="4736309"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4736318">(</span><span class="ident" id="4736319"><a href="/regexp/syntax/compile.go.html#4736171">f</a></span><span class="op" id="4736320">.</span><span class="ident" id="4736321">i</span><span class="op" id="4736322">&lt;&lt;</span><span class="num" id="4736324">1</span>&nbsp;<span class="op" id="4736326">|</span>&nbsp;<span class="num" id="4736328">1</span><span class="op" id="4736329">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4736332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736335"><a href="/regexp/syntax/compile.go.html#4736138">f1</a></span><span class="op" id="4736337">.</span><span class="ident" id="4736338">out</span><span class="op" id="4736341">.</span><span class="ident" id="4736342">patch</span><span class="op" id="4736347">(</span><span class="ident" id="4736348"><a href="/regexp/syntax/compile.go.html#4736120">c</a></span><span class="op" id="4736349">.</span><span class="ident" id="4736350">p</span><span class="op" id="4736351">,</span>&nbsp;<span class="ident" id="4736353"><a href="/regexp/syntax/compile.go.html#4736171">f</a></span><span class="op" id="4736354">.</span><span class="ident" id="4736355">i</span><span class="op" id="4736356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736359">return</span>&nbsp;<span class="ident" id="4736366"><a href="/regexp/syntax/compile.go.html#4736171">f</a></span><br>
<span class="lineno"></span><span class="op" id="4736368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="4736371">func</span>&nbsp;<span class="op" id="4736376">(</span><span class="ident" id="4736377">c</span>&nbsp;<span class="op" id="4736379">*</span><span class="ident" id="4736380"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4736388">)</span>&nbsp;<span class="ident" id="4736390">plus</span><span class="op" id="4736394">(</span><span class="ident" id="4736395">f1</span>&nbsp;<span class="ident" id="4736398"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><span class="op" id="4736402">,</span>&nbsp;<span class="ident" id="4736404">nongreedy</span>&nbsp;<span class="builtintype" id="4736414">bool</span><span class="op" id="4736418">)</span>&nbsp;<span class="ident" id="4736420"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4736425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736428">return</span>&nbsp;<span class="ident" id="4736435"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span><span class="op" id="4736439">{</span><span class="ident" id="4736440"><a href="/regexp/syntax/compile.go.html#4736395">f1</a></span><span class="op" id="4736442">.</span><span class="ident" id="4736443">i</span><span class="op" id="4736444">,</span>&nbsp;<span class="ident" id="4736446"><a href="/regexp/syntax/compile.go.html#4736377">c</a></span><span class="op" id="4736447">.</span><span class="ident" id="4736448">star</span><span class="op" id="4736452">(</span><span class="ident" id="4736453"><a href="/regexp/syntax/compile.go.html#4736395">f1</a></span><span class="op" id="4736455">,</span>&nbsp;<span class="ident" id="4736457"><a href="/regexp/syntax/compile.go.html#4736404">nongreedy</a></span><span class="op" id="4736466">)</span><span class="op" id="4736467">.</span><span class="ident" id="4736468">out</span><span class="op" id="4736471">}</span><br>
<span class="lineno"></span><span class="op" id="4736473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4736476">func</span>&nbsp;<span class="op" id="4736481">(</span><span class="ident" id="4736482">c</span>&nbsp;<span class="op" id="4736484">*</span><span class="ident" id="4736485"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4736493">)</span>&nbsp;<span class="ident" id="4736495">empty</span><span class="op" id="4736500">(</span><span class="ident" id="4736501">op</span>&nbsp;<span class="ident" id="4736504"><a href="/regexp/syntax/prog.go.html#4792999">EmptyOp</a></span><span class="op" id="4736511">)</span>&nbsp;<span class="ident" id="4736513"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4736518">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736521">f</span>&nbsp;<span class="op" id="4736523">:=</span>&nbsp;<span class="ident" id="4736526"><a href="/regexp/syntax/compile.go.html#4736482">c</a></span><span class="op" id="4736527">.</span><span class="ident" id="4736528">inst</span><span class="op" id="4736532">(</span><span class="ident" id="4736533"><a href="/regexp/syntax/prog.go.html#4792513">InstEmptyWidth</a></span><span class="op" id="4736547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736550"><a href="/regexp/syntax/compile.go.html#4736482">c</a></span><span class="op" id="4736551">.</span><span class="ident" id="4736552">p</span><span class="op" id="4736553">.</span><span class="ident" id="4736554">Inst</span><span class="op" id="4736558">[</span><span class="ident" id="4736559"><a href="/regexp/syntax/compile.go.html#4736521">f</a></span><span class="op" id="4736560">.</span><span class="ident" id="4736561">i</span><span class="op" id="4736562">]</span><span class="op" id="4736563">.</span><span class="ident" id="4736564">Arg</span>&nbsp;<span class="op" id="4736568">=</span>&nbsp;<span class="builtintype" id="4736570">uint32</span><span class="op" id="4736576">(</span><span class="ident" id="4736577"><a href="/regexp/syntax/compile.go.html#4736501">op</a></span><span class="op" id="4736579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736582"><a href="/regexp/syntax/compile.go.html#4736521">f</a></span><span class="op" id="4736583">.</span><span class="ident" id="4736584">out</span>&nbsp;<span class="op" id="4736588">=</span>&nbsp;<span class="ident" id="4736590"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4736599">(</span><span class="ident" id="4736600"><a href="/regexp/syntax/compile.go.html#4736521">f</a></span><span class="op" id="4736601">.</span><span class="ident" id="4736602">i</span>&nbsp;<span class="op" id="4736604">&lt;&lt;</span>&nbsp;<span class="num" id="4736607">1</span><span class="op" id="4736608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736611">return</span>&nbsp;<span class="ident" id="4736618"><a href="/regexp/syntax/compile.go.html#4736521">f</a></span><br>
<span class="lineno"></span><span class="op" id="4736620">}</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span><span class="keyword" id="4736623">func</span>&nbsp;<span class="op" id="4736628">(</span><span class="ident" id="4736629">c</span>&nbsp;<span class="op" id="4736631">*</span><span class="ident" id="4736632"><a href="/regexp/syntax/compile.go.html#4732719">compiler</a></span><span class="op" id="4736640">)</span>&nbsp;<span class="builtintype" id="4736642">rune</span><span class="op" id="4736646">(</span><span class="ident" id="4736647">r</span>&nbsp;<span class="op" id="4736649">[</span><span class="op" id="4736650">]</span><span class="builtintype" id="4736651">rune</span><span class="op" id="4736655">,</span>&nbsp;<span class="ident" id="4736657">flags</span>&nbsp;<span class="ident" id="4736663"><a href="/regexp/syntax/parse.go.html#4744412">Flags</a></span><span class="op" id="4736668">)</span>&nbsp;<span class="ident" id="4736670"><a href="/regexp/syntax/compile.go.html#4732602">frag</a></span>&nbsp;<span class="op" id="4736675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736678">f</span>&nbsp;<span class="op" id="4736680">:=</span>&nbsp;<span class="ident" id="4736683"><a href="/regexp/syntax/compile.go.html#4736629">c</a></span><span class="op" id="4736684">.</span><span class="ident" id="4736685">inst</span><span class="op" id="4736689">(</span><span class="ident" id="4736690"><a href="/regexp/syntax/prog.go.html#4792559">InstRune</a></span><span class="op" id="4736698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736701">i</span>&nbsp;<span class="op" id="4736703">:=</span>&nbsp;<span class="op" id="4736706">&amp;</span><span class="ident" id="4736707"><a href="/regexp/syntax/compile.go.html#4736629">c</a></span><span class="op" id="4736708">.</span><span class="ident" id="4736709">p</span><span class="op" id="4736710">.</span><span class="ident" id="4736711">Inst</span><span class="op" id="4736715">[</span><span class="ident" id="4736716"><a href="/regexp/syntax/compile.go.html#4736678">f</a></span><span class="op" id="4736717">.</span><span class="ident" id="4736718">i</span><span class="op" id="4736719">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736722"><a href="/regexp/syntax/compile.go.html#4736701">i</a></span><span class="op" id="4736723">.</span><span class="ident" id="4736724">Rune</span>&nbsp;<span class="op" id="4736729">=</span>&nbsp;<span class="ident" id="4736731"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736734"><a href="/regexp/syntax/compile.go.html#4736657">flags</a></span>&nbsp;<span class="op" id="4736740">&amp;=</span>&nbsp;<span class="ident" id="4736743"><a href="/regexp/syntax/parse.go.html#4744435">FoldCase</a></span>&nbsp;<span class="comment" id="4736752">//&nbsp;only&nbsp;relevant&nbsp;flag&nbsp;is&nbsp;FoldCase</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736787">if</span>&nbsp;<span class="builtinfunc" id="4736790">len</span><span class="op" id="4736793">(</span><span class="ident" id="4736794"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4736795">)</span>&nbsp;<span class="op" id="4736797">!=</span>&nbsp;<span class="num" id="4736800">1</span>&nbsp;<span class="op" id="4736802">||</span>&nbsp;<span class="ident" id="4736805"><a href="/regexp/syntax/compile.go.html#4731219">unicode</a></span><span class="op" id="4736812">.</span><span class="ident" id="4736813">SimpleFold</span><span class="op" id="4736823">(</span><span class="ident" id="4736824"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4736825">[</span><span class="num" id="4736826">0</span><span class="op" id="4736827">]</span><span class="op" id="4736828">)</span>&nbsp;<span class="op" id="4736830">==</span>&nbsp;<span class="ident" id="4736833"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4736834">[</span><span class="num" id="4736835">0</span><span class="op" id="4736836">]</span>&nbsp;<span class="op" id="4736838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4736842">//&nbsp;and&nbsp;sometimes&nbsp;not&nbsp;even&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736875"><a href="/regexp/syntax/compile.go.html#4736657">flags</a></span>&nbsp;<span class="op" id="4736881">&amp;^=</span>&nbsp;<span class="ident" id="4736885"><a href="/regexp/syntax/parse.go.html#4744435">FoldCase</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4736895">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736898"><a href="/regexp/syntax/compile.go.html#4736701">i</a></span><span class="op" id="4736899">.</span><span class="ident" id="4736900">Arg</span>&nbsp;<span class="op" id="4736904">=</span>&nbsp;<span class="builtintype" id="4736906">uint32</span><span class="op" id="4736912">(</span><span class="ident" id="4736913"><a href="/regexp/syntax/compile.go.html#4736657">flags</a></span><span class="op" id="4736918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4736921"><a href="/regexp/syntax/compile.go.html#4736678">f</a></span><span class="op" id="4736922">.</span><span class="ident" id="4736923">out</span>&nbsp;<span class="op" id="4736927">=</span>&nbsp;<span class="ident" id="4736929"><a href="/regexp/syntax/compile.go.html#4731873">patchList</a></span><span class="op" id="4736938">(</span><span class="ident" id="4736939"><a href="/regexp/syntax/compile.go.html#4736678">f</a></span><span class="op" id="4736940">.</span><span class="ident" id="4736941">i</span>&nbsp;<span class="op" id="4736943">&lt;&lt;</span>&nbsp;<span class="num" id="4736946">1</span><span class="op" id="4736947">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4736951">//&nbsp;Special&nbsp;cases&nbsp;for&nbsp;exec&nbsp;machine.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736987">switch</span>&nbsp;<span class="op" id="4736994">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4736997">case</span>&nbsp;<span class="ident" id="4737002"><a href="/regexp/syntax/compile.go.html#4736657">flags</a></span><span class="op" id="4737007">&amp;</span><span class="ident" id="4737008"><a href="/regexp/syntax/parse.go.html#4744435">FoldCase</a></span>&nbsp;<span class="op" id="4737017">==</span>&nbsp;<span class="num" id="4737020">0</span>&nbsp;<span class="op" id="4737022">&amp;&amp;</span>&nbsp;<span class="op" id="4737025">(</span><span class="builtinfunc" id="4737026">len</span><span class="op" id="4737029">(</span><span class="ident" id="4737030"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737031">)</span>&nbsp;<span class="op" id="4737033">==</span>&nbsp;<span class="num" id="4737036">1</span>&nbsp;<span class="op" id="4737038">||</span>&nbsp;<span class="builtinfunc" id="4737041">len</span><span class="op" id="4737044">(</span><span class="ident" id="4737045"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737046">)</span>&nbsp;<span class="op" id="4737048">==</span>&nbsp;<span class="num" id="4737051">2</span>&nbsp;<span class="op" id="4737053">&amp;&amp;</span>&nbsp;<span class="ident" id="4737056"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737057">[</span><span class="num" id="4737058">0</span><span class="op" id="4737059">]</span>&nbsp;<span class="op" id="4737061">==</span>&nbsp;<span class="ident" id="4737064"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737065">[</span><span class="num" id="4737066">1</span><span class="op" id="4737067">]</span><span class="op" id="4737068">)</span><span class="op" id="4737069">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4737073"><a href="/regexp/syntax/compile.go.html#4736701">i</a></span><span class="op" id="4737074">.</span><span class="ident" id="4737075">Op</span>&nbsp;<span class="op" id="4737078">=</span>&nbsp;<span class="ident" id="4737080"><a href="/regexp/syntax/prog.go.html#4792569">InstRune1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4737091">case</span>&nbsp;<span class="builtinfunc" id="4737096">len</span><span class="op" id="4737099">(</span><span class="ident" id="4737100"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737101">)</span>&nbsp;<span class="op" id="4737103">==</span>&nbsp;<span class="num" id="4737106">2</span>&nbsp;<span class="op" id="4737108">&amp;&amp;</span>&nbsp;<span class="ident" id="4737111"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737112">[</span><span class="num" id="4737113">0</span><span class="op" id="4737114">]</span>&nbsp;<span class="op" id="4737116">==</span>&nbsp;<span class="num" id="4737119">0</span>&nbsp;<span class="op" id="4737121">&amp;&amp;</span>&nbsp;<span class="ident" id="4737124"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737125">[</span><span class="num" id="4737126">1</span><span class="op" id="4737127">]</span>&nbsp;<span class="op" id="4737129">==</span>&nbsp;<span class="ident" id="4737132"><a href="/regexp/syntax/compile.go.html#4731219">unicode</a></span><span class="op" id="4737139">.</span><span class="ident" id="4737140">MaxRune</span><span class="op" id="4737147">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4737151"><a href="/regexp/syntax/compile.go.html#4736701">i</a></span><span class="op" id="4737152">.</span><span class="ident" id="4737153">Op</span>&nbsp;<span class="op" id="4737156">=</span>&nbsp;<span class="ident" id="4737158"><a href="/regexp/syntax/prog.go.html#4792580">InstRuneAny</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4737171">case</span>&nbsp;<span class="builtinfunc" id="4737176">len</span><span class="op" id="4737179">(</span><span class="ident" id="4737180"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737181">)</span>&nbsp;<span class="op" id="4737183">==</span>&nbsp;<span class="num" id="4737186">4</span>&nbsp;<span class="op" id="4737188">&amp;&amp;</span>&nbsp;<span class="ident" id="4737191"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737192">[</span><span class="num" id="4737193">0</span><span class="op" id="4737194">]</span>&nbsp;<span class="op" id="4737196">==</span>&nbsp;<span class="num" id="4737199">0</span>&nbsp;<span class="op" id="4737201">&amp;&amp;</span>&nbsp;<span class="ident" id="4737204"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737205">[</span><span class="num" id="4737206">1</span><span class="op" id="4737207">]</span>&nbsp;<span class="op" id="4737209">==</span>&nbsp;<span class="string" id="4737212">&#39;\n&#39;</span><span class="op" id="4737216">-</span><span class="num" id="4737217">1</span>&nbsp;<span class="op" id="4737219">&amp;&amp;</span>&nbsp;<span class="ident" id="4737222"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737223">[</span><span class="num" id="4737224">2</span><span class="op" id="4737225">]</span>&nbsp;<span class="op" id="4737227">==</span>&nbsp;<span class="string" id="4737230">&#39;\n&#39;</span><span class="op" id="4737234">+</span><span class="num" id="4737235">1</span>&nbsp;<span class="op" id="4737237">&amp;&amp;</span>&nbsp;<span class="ident" id="4737240"><a href="/regexp/syntax/compile.go.html#4736647">r</a></span><span class="op" id="4737241">[</span><span class="num" id="4737242">3</span><span class="op" id="4737243">]</span>&nbsp;<span class="op" id="4737245">==</span>&nbsp;<span class="ident" id="4737248"><a href="/regexp/syntax/compile.go.html#4731219">unicode</a></span><span class="op" id="4737255">.</span><span class="ident" id="4737256">MaxRune</span><span class="op" id="4737263">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4737267"><a href="/regexp/syntax/compile.go.html#4736701">i</a></span><span class="op" id="4737268">.</span><span class="ident" id="4737269">Op</span>&nbsp;<span class="op" id="4737272">=</span>&nbsp;<span class="ident" id="4737274"><a href="/regexp/syntax/prog.go.html#4792593">InstRuneAnyNotNL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4737292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4737296">return</span>&nbsp;<span class="ident" id="4737303"><a href="/regexp/syntax/compile.go.html#4736678">f</a></span><br>
<span class="lineno"></span><span class="op" id="4737305">}</span>
</div>
</body>
</html>
