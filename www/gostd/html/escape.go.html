<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html</h2>
<ul>
<li><a href="/gostd/html/entity.go.html">entity.go</a></li>
<li><a href="/gostd/html/entity_test.go.html">entity_test.go</a></li>
<li><a href="/gostd/html/escape.go.html" class="current">escape.go</a></li>
<li><a href="/gostd/html/escape_test.go.html">escape_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5076637">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5076692">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5076746">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5076797">//&nbsp;Package&nbsp;html&nbsp;provides&nbsp;functions&nbsp;for&nbsp;escaping&nbsp;and&nbsp;unescaping&nbsp;HTML&nbsp;text.</span><br>
<span class="lineno"></span><span class="keyword" id="5076871">package</span>&nbsp;<span class="ident" id="5076879">html</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5076885">import</span>&nbsp;<span class="op" id="5076892">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5076895">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5076904">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5076915">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5076930">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5076933">type</span>&nbsp;<span class="ident" id="5076938">writer</span>&nbsp;<span class="keyword" id="5076945">interface</span>&nbsp;<span class="op" id="5076955">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5076958">WriteString</span><span class="op" id="5076969">(</span><span class="builtintype" id="5076970">string</span><span class="op" id="5076976">)</span>&nbsp;<span class="op" id="5076978">(</span><span class="builtintype" id="5076979">int</span><span class="op" id="5076982">,</span>&nbsp;<span class="builtintype" id="5076984">error</span><span class="op" id="5076989">)</span><br>
<span class="lineno"></span><span class="op" id="5076991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5076994">//&nbsp;These&nbsp;replacements&nbsp;permit&nbsp;compatibility&nbsp;with&nbsp;old&nbsp;numeric&nbsp;entities&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5077068">//&nbsp;assumed&nbsp;Windows-1252&nbsp;encoding.</span><br>
<span class="lineno">20</span><span class="comment" id="5077102">//&nbsp;http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html#consume-a-character-reference</span><br>
<span class="lineno"></span><span class="keyword" id="5077213">var</span>&nbsp;<span class="ident" id="5077217">replacementTable</span>&nbsp;<span class="op" id="5077234">=</span>&nbsp;<span class="op" id="5077236">[</span><span class="op" id="5077237">...</span><span class="op" id="5077240">]</span><span class="builtintype" id="5077241">rune</span><span class="op" id="5077245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077248">&#39;\u20AC&#39;</span><span class="op" id="5077256">,</span>&nbsp;<span class="comment" id="5077258">//&nbsp;First&nbsp;entry&nbsp;is&nbsp;what&nbsp;0x80&nbsp;should&nbsp;be&nbsp;replaced&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077312">&#39;\u0081&#39;</span><span class="op" id="5077320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077323">&#39;\u201A&#39;</span><span class="op" id="5077331">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077334">&#39;\u0192&#39;</span><span class="op" id="5077342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077345">&#39;\u201E&#39;</span><span class="op" id="5077353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077356">&#39;\u2026&#39;</span><span class="op" id="5077364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077367">&#39;\u2020&#39;</span><span class="op" id="5077375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077378">&#39;\u2021&#39;</span><span class="op" id="5077386">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077389">&#39;\u02C6&#39;</span><span class="op" id="5077397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077400">&#39;\u2030&#39;</span><span class="op" id="5077408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077411">&#39;\u0160&#39;</span><span class="op" id="5077419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077422">&#39;\u2039&#39;</span><span class="op" id="5077430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077433">&#39;\u0152&#39;</span><span class="op" id="5077441">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077444">&#39;\u008D&#39;</span><span class="op" id="5077452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077455">&#39;\u017D&#39;</span><span class="op" id="5077463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077466">&#39;\u008F&#39;</span><span class="op" id="5077474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077477">&#39;\u0090&#39;</span><span class="op" id="5077485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077488">&#39;\u2018&#39;</span><span class="op" id="5077496">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077499">&#39;\u2019&#39;</span><span class="op" id="5077507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077510">&#39;\u201C&#39;</span><span class="op" id="5077518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077521">&#39;\u201D&#39;</span><span class="op" id="5077529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077532">&#39;\u2022&#39;</span><span class="op" id="5077540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077543">&#39;\u2013&#39;</span><span class="op" id="5077551">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077554">&#39;\u2014&#39;</span><span class="op" id="5077562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077565">&#39;\u02DC&#39;</span><span class="op" id="5077573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077576">&#39;\u2122&#39;</span><span class="op" id="5077584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077587">&#39;\u0161&#39;</span><span class="op" id="5077595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077598">&#39;\u203A&#39;</span><span class="op" id="5077606">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077609">&#39;\u0153&#39;</span><span class="op" id="5077617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077620">&#39;\u009D&#39;</span><span class="op" id="5077628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077631">&#39;\u017E&#39;</span><span class="op" id="5077639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5077642">&#39;\u0178&#39;</span><span class="op" id="5077650">,</span>&nbsp;<span class="comment" id="5077652">//&nbsp;Last&nbsp;entry&nbsp;is&nbsp;0x9F.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5077676">//&nbsp;0x00-&gt;&#39;\uFFFD&#39;&nbsp;is&nbsp;handled&nbsp;programmatically.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5077724">//&nbsp;0x0D-&gt;&#39;\u000D&#39;&nbsp;is&nbsp;a&nbsp;no-op.</span><br>
<span class="lineno"></span><span class="op" id="5077754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5077757">//&nbsp;unescapeEntity&nbsp;reads&nbsp;an&nbsp;entity&nbsp;like&nbsp;&#34;&amp;lt;&#34;&nbsp;from&nbsp;b[src:]&nbsp;and&nbsp;writes&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5077831">//&nbsp;corresponding&nbsp;&#34;&lt;&#34;&nbsp;to&nbsp;b[dst:],&nbsp;returning&nbsp;the&nbsp;incremented&nbsp;dst&nbsp;and&nbsp;src&nbsp;cursors.</span><br>
<span class="lineno">60</span><span class="comment" id="5077911">//&nbsp;Precondition:&nbsp;b[src]&nbsp;==&nbsp;&#39;&amp;&#39;&nbsp;&amp;&amp;&nbsp;dst&nbsp;&lt;=&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="5077957">//&nbsp;attribute&nbsp;should&nbsp;be&nbsp;true&nbsp;if&nbsp;parsing&nbsp;an&nbsp;attribute&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5078016">func</span>&nbsp;<span class="ident" id="5078021">unescapeEntity</span><span class="op" id="5078035">(</span><span class="ident" id="5078036">b</span>&nbsp;<span class="op" id="5078038">[</span><span class="op" id="5078039">]</span><span class="builtintype" id="5078040">byte</span><span class="op" id="5078044">,</span>&nbsp;<span class="ident" id="5078046">dst</span><span class="op" id="5078049">,</span>&nbsp;<span class="ident" id="5078051">src</span>&nbsp;<span class="builtintype" id="5078055">int</span><span class="op" id="5078058">,</span>&nbsp;<span class="ident" id="5078060">attribute</span>&nbsp;<span class="builtintype" id="5078070">bool</span><span class="op" id="5078074">)</span>&nbsp;<span class="op" id="5078076">(</span><span class="ident" id="5078077">dst1</span><span class="op" id="5078081">,</span>&nbsp;<span class="ident" id="5078083">src1</span>&nbsp;<span class="builtintype" id="5078088">int</span><span class="op" id="5078091">)</span>&nbsp;<span class="op" id="5078093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5078096">//&nbsp;http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html#consume-a-character-reference</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5078209">//&nbsp;i&nbsp;starts&nbsp;at&nbsp;1&nbsp;because&nbsp;we&nbsp;already&nbsp;know&nbsp;that&nbsp;s[0]&nbsp;==&nbsp;&#39;&amp;&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078269">i</span><span class="op" id="5078270">,</span>&nbsp;<span class="ident" id="5078272">s</span>&nbsp;<span class="op" id="5078274">:=</span>&nbsp;<span class="num" id="5078277">1</span><span class="op" id="5078278">,</span>&nbsp;<span class="ident" id="5078280"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5078281">[</span><span class="ident" id="5078282"><a href="/gostd/html/escape.go.html#5078051">src</a></span><span class="op" id="5078285">:</span><span class="op" id="5078286">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078290">if</span>&nbsp;<span class="builtinfunc" id="5078293">len</span><span class="op" id="5078296">(</span><span class="ident" id="5078297"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5078298">)</span>&nbsp;<span class="op" id="5078300">&lt;=</span>&nbsp;<span class="num" id="5078303">1</span>&nbsp;<span class="op" id="5078305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078309"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5078310">[</span><span class="ident" id="5078311"><a href="/gostd/html/escape.go.html#5078046">dst</a></span><span class="op" id="5078314">]</span>&nbsp;<span class="op" id="5078316">=</span>&nbsp;<span class="ident" id="5078318"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5078319">[</span><span class="ident" id="5078320"><a href="/gostd/html/escape.go.html#5078051">src</a></span><span class="op" id="5078323">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078327">return</span>&nbsp;<span class="ident" id="5078334"><a href="/gostd/html/escape.go.html#5078046">dst</a></span>&nbsp;<span class="op" id="5078338">+</span>&nbsp;<span class="num" id="5078340">1</span><span class="op" id="5078341">,</span>&nbsp;<span class="ident" id="5078343"><a href="/gostd/html/escape.go.html#5078051">src</a></span>&nbsp;<span class="op" id="5078347">+</span>&nbsp;<span class="num" id="5078349">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5078352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078356">if</span>&nbsp;<span class="ident" id="5078359"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5078360">[</span><span class="ident" id="5078361"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5078362">]</span>&nbsp;<span class="op" id="5078364">==</span>&nbsp;<span class="string" id="5078367">&#39;#&#39;</span>&nbsp;<span class="op" id="5078371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078375">if</span>&nbsp;<span class="builtinfunc" id="5078378">len</span><span class="op" id="5078381">(</span><span class="ident" id="5078382"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5078383">)</span>&nbsp;<span class="op" id="5078385">&lt;=</span>&nbsp;<span class="num" id="5078388">3</span>&nbsp;<span class="op" id="5078390">{</span>&nbsp;<span class="comment" id="5078392">//&nbsp;We&nbsp;need&nbsp;to&nbsp;have&nbsp;at&nbsp;least&nbsp;&#34;&amp;#.&#34;.</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078430"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5078431">[</span><span class="ident" id="5078432"><a href="/gostd/html/escape.go.html#5078046">dst</a></span><span class="op" id="5078435">]</span>&nbsp;<span class="op" id="5078437">=</span>&nbsp;<span class="ident" id="5078439"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5078440">[</span><span class="ident" id="5078441"><a href="/gostd/html/escape.go.html#5078051">src</a></span><span class="op" id="5078444">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078449">return</span>&nbsp;<span class="ident" id="5078456"><a href="/gostd/html/escape.go.html#5078046">dst</a></span>&nbsp;<span class="op" id="5078460">+</span>&nbsp;<span class="num" id="5078462">1</span><span class="op" id="5078463">,</span>&nbsp;<span class="ident" id="5078465"><a href="/gostd/html/escape.go.html#5078051">src</a></span>&nbsp;<span class="op" id="5078469">+</span>&nbsp;<span class="num" id="5078471">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5078475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078479"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5078480">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078485">c</span>&nbsp;<span class="op" id="5078487">:=</span>&nbsp;<span class="ident" id="5078490"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5078491">[</span><span class="ident" id="5078492"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5078493">]</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078497">hex</span>&nbsp;<span class="op" id="5078501">:=</span>&nbsp;<span class="builtintype" id="5078504">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078512">if</span>&nbsp;<span class="ident" id="5078515"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078517">==</span>&nbsp;<span class="string" id="5078520">&#39;x&#39;</span>&nbsp;<span class="op" id="5078524">||</span>&nbsp;<span class="ident" id="5078527"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078529">==</span>&nbsp;<span class="string" id="5078532">&#39;X&#39;</span>&nbsp;<span class="op" id="5078536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078541"><a href="/gostd/html/escape.go.html#5078497">hex</a></span>&nbsp;<span class="op" id="5078545">=</span>&nbsp;<span class="builtintype" id="5078547">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078555"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5078556">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5078561">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078566">x</span>&nbsp;<span class="op" id="5078568">:=</span>&nbsp;<span class="string" id="5078571">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078580">for</span>&nbsp;<span class="ident" id="5078584"><a href="/gostd/html/escape.go.html#5078269">i</a></span>&nbsp;<span class="op" id="5078586">&lt;</span>&nbsp;<span class="builtinfunc" id="5078588">len</span><span class="op" id="5078591">(</span><span class="ident" id="5078592"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5078593">)</span>&nbsp;<span class="op" id="5078595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078600"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078602">=</span>&nbsp;<span class="ident" id="5078604"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5078605">[</span><span class="ident" id="5078606"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5078607">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078612"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5078613">++</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078619">if</span>&nbsp;<span class="ident" id="5078622"><a href="/gostd/html/escape.go.html#5078497">hex</a></span>&nbsp;<span class="op" id="5078626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078632">if</span>&nbsp;<span class="string" id="5078635">&#39;0&#39;</span>&nbsp;<span class="op" id="5078639">&lt;=</span>&nbsp;<span class="ident" id="5078642"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078644">&amp;&amp;</span>&nbsp;<span class="ident" id="5078647"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078649">&lt;=</span>&nbsp;<span class="string" id="5078652">&#39;9&#39;</span>&nbsp;<span class="op" id="5078656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078663"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5078665">=</span>&nbsp;<span class="num" id="5078667">16</span><span class="op" id="5078669">*</span><span class="ident" id="5078670"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5078672">+</span>&nbsp;<span class="builtintype" id="5078674">rune</span><span class="op" id="5078678">(</span><span class="ident" id="5078679"><a href="/gostd/html/escape.go.html#5078485">c</a></span><span class="op" id="5078680">)</span>&nbsp;<span class="op" id="5078682">-</span>&nbsp;<span class="string" id="5078684">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078693">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5078706">}</span>&nbsp;<span class="keyword" id="5078708">else</span>&nbsp;<span class="keyword" id="5078713">if</span>&nbsp;<span class="string" id="5078716">&#39;a&#39;</span>&nbsp;<span class="op" id="5078720">&lt;=</span>&nbsp;<span class="ident" id="5078723"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078725">&amp;&amp;</span>&nbsp;<span class="ident" id="5078728"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078730">&lt;=</span>&nbsp;<span class="string" id="5078733">&#39;f&#39;</span>&nbsp;<span class="op" id="5078737">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078744"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5078746">=</span>&nbsp;<span class="num" id="5078748">16</span><span class="op" id="5078750">*</span><span class="ident" id="5078751"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5078753">+</span>&nbsp;<span class="builtintype" id="5078755">rune</span><span class="op" id="5078759">(</span><span class="ident" id="5078760"><a href="/gostd/html/escape.go.html#5078485">c</a></span><span class="op" id="5078761">)</span>&nbsp;<span class="op" id="5078763">-</span>&nbsp;<span class="string" id="5078765">&#39;a&#39;</span>&nbsp;<span class="op" id="5078769">+</span>&nbsp;<span class="num" id="5078771">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078779">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5078792">}</span>&nbsp;<span class="keyword" id="5078794">else</span>&nbsp;<span class="keyword" id="5078799">if</span>&nbsp;<span class="string" id="5078802">&#39;A&#39;</span>&nbsp;<span class="op" id="5078806">&lt;=</span>&nbsp;<span class="ident" id="5078809"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078811">&amp;&amp;</span>&nbsp;<span class="ident" id="5078814"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078816">&lt;=</span>&nbsp;<span class="string" id="5078819">&#39;F&#39;</span>&nbsp;<span class="op" id="5078823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078830"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5078832">=</span>&nbsp;<span class="num" id="5078834">16</span><span class="op" id="5078836">*</span><span class="ident" id="5078837"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5078839">+</span>&nbsp;<span class="builtintype" id="5078841">rune</span><span class="op" id="5078845">(</span><span class="ident" id="5078846"><a href="/gostd/html/escape.go.html#5078485">c</a></span><span class="op" id="5078847">)</span>&nbsp;<span class="op" id="5078849">-</span>&nbsp;<span class="string" id="5078851">&#39;A&#39;</span>&nbsp;<span class="op" id="5078855">+</span>&nbsp;<span class="num" id="5078857">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078865">continue</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5078878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5078883">}</span>&nbsp;<span class="keyword" id="5078885">else</span>&nbsp;<span class="keyword" id="5078890">if</span>&nbsp;<span class="string" id="5078893">&#39;0&#39;</span>&nbsp;<span class="op" id="5078897">&lt;=</span>&nbsp;<span class="ident" id="5078900"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078902">&amp;&amp;</span>&nbsp;<span class="ident" id="5078905"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078907">&lt;=</span>&nbsp;<span class="string" id="5078910">&#39;9&#39;</span>&nbsp;<span class="op" id="5078914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078920"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5078922">=</span>&nbsp;<span class="num" id="5078924">10</span><span class="op" id="5078926">*</span><span class="ident" id="5078927"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5078929">+</span>&nbsp;<span class="builtintype" id="5078931">rune</span><span class="op" id="5078935">(</span><span class="ident" id="5078936"><a href="/gostd/html/escape.go.html#5078485">c</a></span><span class="op" id="5078937">)</span>&nbsp;<span class="op" id="5078939">-</span>&nbsp;<span class="string" id="5078941">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078949">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5078961">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078966">if</span>&nbsp;<span class="ident" id="5078969"><a href="/gostd/html/escape.go.html#5078485">c</a></span>&nbsp;<span class="op" id="5078971">!=</span>&nbsp;<span class="string" id="5078974">&#39;;&#39;</span>&nbsp;<span class="op" id="5078978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5078984"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5078985">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5078991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5078996">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5079004">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5079009">if</span>&nbsp;<span class="ident" id="5079012"><a href="/gostd/html/escape.go.html#5078269">i</a></span>&nbsp;<span class="op" id="5079014">&lt;=</span>&nbsp;<span class="num" id="5079017">3</span>&nbsp;<span class="op" id="5079019">{</span>&nbsp;<span class="comment" id="5079021">//&nbsp;No&nbsp;characters&nbsp;matched.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5079050"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5079051">[</span><span class="ident" id="5079052"><a href="/gostd/html/escape.go.html#5078046">dst</a></span><span class="op" id="5079055">]</span>&nbsp;<span class="op" id="5079057">=</span>&nbsp;<span class="ident" id="5079059"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5079060">[</span><span class="ident" id="5079061"><a href="/gostd/html/escape.go.html#5078051">src</a></span><span class="op" id="5079064">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5079069">return</span>&nbsp;<span class="ident" id="5079076"><a href="/gostd/html/escape.go.html#5078046">dst</a></span>&nbsp;<span class="op" id="5079080">+</span>&nbsp;<span class="num" id="5079082">1</span><span class="op" id="5079083">,</span>&nbsp;<span class="ident" id="5079085"><a href="/gostd/html/escape.go.html#5078051">src</a></span>&nbsp;<span class="op" id="5079089">+</span>&nbsp;<span class="num" id="5079091">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5079095">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5079100">if</span>&nbsp;<span class="num" id="5079103">0x80</span>&nbsp;<span class="op" id="5079108">&lt;=</span>&nbsp;<span class="ident" id="5079111"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5079113">&amp;&amp;</span>&nbsp;<span class="ident" id="5079116"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5079118">&lt;=</span>&nbsp;<span class="num" id="5079121">0x9F</span>&nbsp;<span class="op" id="5079126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5079131">//&nbsp;Replace&nbsp;characters&nbsp;from&nbsp;Windows-1252&nbsp;with&nbsp;UTF-8&nbsp;equivalents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5079198"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5079200">=</span>&nbsp;<span class="ident" id="5079202"><a href="/gostd/html/escape.go.html#5077217">replacementTable</a></span><span class="op" id="5079218">[</span><span class="ident" id="5079219"><a href="/gostd/html/escape.go.html#5078566">x</a></span><span class="op" id="5079220">-</span><span class="num" id="5079221">0x80</span><span class="op" id="5079225">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5079229">}</span>&nbsp;<span class="keyword" id="5079231">else</span>&nbsp;<span class="keyword" id="5079236">if</span>&nbsp;<span class="ident" id="5079239"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5079241">==</span>&nbsp;<span class="num" id="5079244">0</span>&nbsp;<span class="op" id="5079246">||</span>&nbsp;<span class="op" id="5079249">(</span><span class="num" id="5079250">0xD800</span>&nbsp;<span class="op" id="5079257">&lt;=</span>&nbsp;<span class="ident" id="5079260"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5079262">&amp;&amp;</span>&nbsp;<span class="ident" id="5079265"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5079267">&lt;=</span>&nbsp;<span class="num" id="5079270">0xDFFF</span><span class="op" id="5079276">)</span>&nbsp;<span class="op" id="5079278">||</span>&nbsp;<span class="ident" id="5079281"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5079283">&gt;</span>&nbsp;<span class="num" id="5079285">0x10FFFF</span>&nbsp;<span class="op" id="5079294">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5079299">//&nbsp;Replace&nbsp;invalid&nbsp;characters&nbsp;with&nbsp;the&nbsp;replacement&nbsp;character.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5079364"><a href="/gostd/html/escape.go.html#5078566">x</a></span>&nbsp;<span class="op" id="5079366">=</span>&nbsp;<span class="string" id="5079368">&#39;\uFFFD&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5079379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5079384">return</span>&nbsp;<span class="ident" id="5079391"><a href="/gostd/html/escape.go.html#5078046">dst</a></span>&nbsp;<span class="op" id="5079395">+</span>&nbsp;<span class="ident" id="5079397"><a href="/gostd/html/escape.go.html#5076915">utf8</a></span><span class="op" id="5079401">.</span><span class="ident" id="5079402"><a href="/gostd/unicode/utf8/utf8.go.html#1813107">EncodeRune</a></span><span class="op" id="5079412">(</span><span class="ident" id="5079413"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5079414">[</span><span class="ident" id="5079415"><a href="/gostd/html/escape.go.html#5078046">dst</a></span><span class="op" id="5079418">:</span><span class="op" id="5079419">]</span><span class="op" id="5079420">,</span>&nbsp;<span class="ident" id="5079422"><a href="/gostd/html/escape.go.html#5078566">x</a></span><span class="op" id="5079423">)</span><span class="op" id="5079424">,</span>&nbsp;<span class="ident" id="5079426"><a href="/gostd/html/escape.go.html#5078051">src</a></span>&nbsp;<span class="op" id="5079430">+</span>&nbsp;<span class="ident" id="5079432"><a href="/gostd/html/escape.go.html#5078269">i</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5079435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5079439">//&nbsp;Consume&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;characters&nbsp;possible,&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5079503">//&nbsp;consumed&nbsp;characters&nbsp;matching&nbsp;one&nbsp;of&nbsp;the&nbsp;named&nbsp;references.</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5079566">for</span>&nbsp;<span class="ident" id="5079570"><a href="/gostd/html/escape.go.html#5078269">i</a></span>&nbsp;<span class="op" id="5079572">&lt;</span>&nbsp;<span class="builtinfunc" id="5079574">len</span><span class="op" id="5079577">(</span><span class="ident" id="5079578"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5079579">)</span>&nbsp;<span class="op" id="5079581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5079585">c</span>&nbsp;<span class="op" id="5079587">:=</span>&nbsp;<span class="ident" id="5079590"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5079591">[</span><span class="ident" id="5079592"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5079593">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5079597"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5079598">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5079603">//&nbsp;Lower-cased&nbsp;characters&nbsp;are&nbsp;more&nbsp;common&nbsp;in&nbsp;entities,&nbsp;so&nbsp;we&nbsp;check&nbsp;for&nbsp;them&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5079688">if</span>&nbsp;<span class="string" id="5079691">&#39;a&#39;</span>&nbsp;<span class="op" id="5079695">&lt;=</span>&nbsp;<span class="ident" id="5079698"><a href="/gostd/html/escape.go.html#5079585">c</a></span>&nbsp;<span class="op" id="5079700">&amp;&amp;</span>&nbsp;<span class="ident" id="5079703"><a href="/gostd/html/escape.go.html#5079585">c</a></span>&nbsp;<span class="op" id="5079705">&lt;=</span>&nbsp;<span class="string" id="5079708">&#39;z&#39;</span>&nbsp;<span class="op" id="5079712">||</span>&nbsp;<span class="string" id="5079715">&#39;A&#39;</span>&nbsp;<span class="op" id="5079719">&lt;=</span>&nbsp;<span class="ident" id="5079722"><a href="/gostd/html/escape.go.html#5079585">c</a></span>&nbsp;<span class="op" id="5079724">&amp;&amp;</span>&nbsp;<span class="ident" id="5079727"><a href="/gostd/html/escape.go.html#5079585">c</a></span>&nbsp;<span class="op" id="5079729">&lt;=</span>&nbsp;<span class="string" id="5079732">&#39;Z&#39;</span>&nbsp;<span class="op" id="5079736">||</span>&nbsp;<span class="string" id="5079739">&#39;0&#39;</span>&nbsp;<span class="op" id="5079743">&lt;=</span>&nbsp;<span class="ident" id="5079746"><a href="/gostd/html/escape.go.html#5079585">c</a></span>&nbsp;<span class="op" id="5079748">&amp;&amp;</span>&nbsp;<span class="ident" id="5079751"><a href="/gostd/html/escape.go.html#5079585">c</a></span>&nbsp;<span class="op" id="5079753">&lt;=</span>&nbsp;<span class="string" id="5079756">&#39;9&#39;</span>&nbsp;<span class="op" id="5079760">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5079765">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5079776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5079780">if</span>&nbsp;<span class="ident" id="5079783"><a href="/gostd/html/escape.go.html#5079585">c</a></span>&nbsp;<span class="op" id="5079785">!=</span>&nbsp;<span class="string" id="5079788">&#39;;&#39;</span>&nbsp;<span class="op" id="5079792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5079797"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5079798">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5079803">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5079807">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5079814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5079818">entityName</span>&nbsp;<span class="op" id="5079829">:=</span>&nbsp;<span class="builtintype" id="5079832">string</span><span class="op" id="5079838">(</span><span class="ident" id="5079839"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5079840">[</span><span class="num" id="5079841">1</span><span class="op" id="5079842">:</span><span class="ident" id="5079843"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5079844">]</span><span class="op" id="5079845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5079848">if</span>&nbsp;<span class="ident" id="5079851"><a href="/gostd/html/escape.go.html#5079818">entityName</a></span>&nbsp;<span class="op" id="5079862">==</span>&nbsp;<span class="string" id="5079865">&#34;&#34;</span>&nbsp;<span class="op" id="5079868">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5079872">//&nbsp;No-op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5079883">}</span>&nbsp;<span class="keyword" id="5079885">else</span>&nbsp;<span class="keyword" id="5079890">if</span>&nbsp;<span class="ident" id="5079893"><a href="/gostd/html/escape.go.html#5078060">attribute</a></span>&nbsp;<span class="op" id="5079903">&amp;&amp;</span>&nbsp;<span class="ident" id="5079906"><a href="/gostd/html/escape.go.html#5079818">entityName</a></span><span class="op" id="5079916">[</span><span class="builtinfunc" id="5079917">len</span><span class="op" id="5079920">(</span><span class="ident" id="5079921"><a href="/gostd/html/escape.go.html#5079818">entityName</a></span><span class="op" id="5079931">)</span><span class="op" id="5079932">-</span><span class="num" id="5079933">1</span><span class="op" id="5079934">]</span>&nbsp;<span class="op" id="5079936">!=</span>&nbsp;<span class="string" id="5079939">&#39;;&#39;</span>&nbsp;<span class="op" id="5079943">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5079946">len</span><span class="op" id="5079949">(</span><span class="ident" id="5079950"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5079951">)</span>&nbsp;<span class="op" id="5079953">&gt;</span>&nbsp;<span class="ident" id="5079955"><a href="/gostd/html/escape.go.html#5078269">i</a></span>&nbsp;<span class="op" id="5079957">&amp;&amp;</span>&nbsp;<span class="ident" id="5079960"><a href="/gostd/html/escape.go.html#5078272">s</a></span><span class="op" id="5079961">[</span><span class="ident" id="5079962"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5079963">]</span>&nbsp;<span class="op" id="5079965">==</span>&nbsp;<span class="string" id="5079968">&#39;=&#39;</span>&nbsp;<span class="op" id="5079972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5079976">//&nbsp;No-op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5079987">}</span>&nbsp;<span class="keyword" id="5079989">else</span>&nbsp;<span class="keyword" id="5079994">if</span>&nbsp;<span class="ident" id="5079997">x</span>&nbsp;<span class="op" id="5079999">:=</span>&nbsp;<span class="ident" id="5080002"><a href="/gostd/html/entity.go.html#4977200">entity</a></span><span class="op" id="5080008">[</span><span class="ident" id="5080009"><a href="/gostd/html/escape.go.html#5079818">entityName</a></span><span class="op" id="5080019">]</span><span class="op" id="5080020">;</span>&nbsp;<span class="ident" id="5080022"><a href="/gostd/html/escape.go.html#5079997">x</a></span>&nbsp;<span class="op" id="5080024">!=</span>&nbsp;<span class="num" id="5080027">0</span>&nbsp;<span class="op" id="5080029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080033">return</span>&nbsp;<span class="ident" id="5080040"><a href="/gostd/html/escape.go.html#5078046">dst</a></span>&nbsp;<span class="op" id="5080044">+</span>&nbsp;<span class="ident" id="5080046"><a href="/gostd/html/escape.go.html#5076915">utf8</a></span><span class="op" id="5080050">.</span><span class="ident" id="5080051"><a href="/gostd/unicode/utf8/utf8.go.html#1813107">EncodeRune</a></span><span class="op" id="5080061">(</span><span class="ident" id="5080062"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5080063">[</span><span class="ident" id="5080064"><a href="/gostd/html/escape.go.html#5078046">dst</a></span><span class="op" id="5080067">:</span><span class="op" id="5080068">]</span><span class="op" id="5080069">,</span>&nbsp;<span class="ident" id="5080071"><a href="/gostd/html/escape.go.html#5079997">x</a></span><span class="op" id="5080072">)</span><span class="op" id="5080073">,</span>&nbsp;<span class="ident" id="5080075"><a href="/gostd/html/escape.go.html#5078051">src</a></span>&nbsp;<span class="op" id="5080079">+</span>&nbsp;<span class="ident" id="5080081"><a href="/gostd/html/escape.go.html#5078269">i</a></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5080084">}</span>&nbsp;<span class="keyword" id="5080086">else</span>&nbsp;<span class="keyword" id="5080091">if</span>&nbsp;<span class="ident" id="5080094">x</span>&nbsp;<span class="op" id="5080096">:=</span>&nbsp;<span class="ident" id="5080099"><a href="/gostd/html/entity.go.html#5071782">entity2</a></span><span class="op" id="5080106">[</span><span class="ident" id="5080107"><a href="/gostd/html/escape.go.html#5079818">entityName</a></span><span class="op" id="5080117">]</span><span class="op" id="5080118">;</span>&nbsp;<span class="ident" id="5080120"><a href="/gostd/html/escape.go.html#5080094">x</a></span><span class="op" id="5080121">[</span><span class="num" id="5080122">0</span><span class="op" id="5080123">]</span>&nbsp;<span class="op" id="5080125">!=</span>&nbsp;<span class="num" id="5080128">0</span>&nbsp;<span class="op" id="5080130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5080134">dst1</span>&nbsp;<span class="op" id="5080139">:=</span>&nbsp;<span class="ident" id="5080142"><a href="/gostd/html/escape.go.html#5078046">dst</a></span>&nbsp;<span class="op" id="5080146">+</span>&nbsp;<span class="ident" id="5080148"><a href="/gostd/html/escape.go.html#5076915">utf8</a></span><span class="op" id="5080152">.</span><span class="ident" id="5080153"><a href="/gostd/unicode/utf8/utf8.go.html#1813107">EncodeRune</a></span><span class="op" id="5080163">(</span><span class="ident" id="5080164"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5080165">[</span><span class="ident" id="5080166"><a href="/gostd/html/escape.go.html#5078046">dst</a></span><span class="op" id="5080169">:</span><span class="op" id="5080170">]</span><span class="op" id="5080171">,</span>&nbsp;<span class="ident" id="5080173"><a href="/gostd/html/escape.go.html#5080094">x</a></span><span class="op" id="5080174">[</span><span class="num" id="5080175">0</span><span class="op" id="5080176">]</span><span class="op" id="5080177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080181">return</span>&nbsp;<span class="ident" id="5080188"><a href="/gostd/html/escape.go.html#5080134">dst1</a></span>&nbsp;<span class="op" id="5080193">+</span>&nbsp;<span class="ident" id="5080195"><a href="/gostd/html/escape.go.html#5076915">utf8</a></span><span class="op" id="5080199">.</span><span class="ident" id="5080200"><a href="/gostd/unicode/utf8/utf8.go.html#1813107">EncodeRune</a></span><span class="op" id="5080210">(</span><span class="ident" id="5080211"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5080212">[</span><span class="ident" id="5080213"><a href="/gostd/html/escape.go.html#5080134">dst1</a></span><span class="op" id="5080217">:</span><span class="op" id="5080218">]</span><span class="op" id="5080219">,</span>&nbsp;<span class="ident" id="5080221"><a href="/gostd/html/escape.go.html#5080094">x</a></span><span class="op" id="5080222">[</span><span class="num" id="5080223">1</span><span class="op" id="5080224">]</span><span class="op" id="5080225">)</span><span class="op" id="5080226">,</span>&nbsp;<span class="ident" id="5080228"><a href="/gostd/html/escape.go.html#5078051">src</a></span>&nbsp;<span class="op" id="5080232">+</span>&nbsp;<span class="ident" id="5080234"><a href="/gostd/html/escape.go.html#5078269">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5080237">}</span>&nbsp;<span class="keyword" id="5080239">else</span>&nbsp;<span class="keyword" id="5080244">if</span>&nbsp;<span class="op" id="5080247">!</span><span class="ident" id="5080248"><a href="/gostd/html/escape.go.html#5078060">attribute</a></span>&nbsp;<span class="op" id="5080258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5080262">maxLen</span>&nbsp;<span class="op" id="5080269">:=</span>&nbsp;<span class="builtinfunc" id="5080272">len</span><span class="op" id="5080275">(</span><span class="ident" id="5080276"><a href="/gostd/html/escape.go.html#5079818">entityName</a></span><span class="op" id="5080286">)</span>&nbsp;<span class="op" id="5080288">-</span>&nbsp;<span class="num" id="5080290">1</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080294">if</span>&nbsp;<span class="ident" id="5080297"><a href="/gostd/html/escape.go.html#5080262">maxLen</a></span>&nbsp;<span class="op" id="5080304">&gt;</span>&nbsp;<span class="ident" id="5080306"><a href="/gostd/html/entity.go.html#4976815">longestEntityWithoutSemicolon</a></span>&nbsp;<span class="op" id="5080336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5080341"><a href="/gostd/html/escape.go.html#5080262">maxLen</a></span>&nbsp;<span class="op" id="5080348">=</span>&nbsp;<span class="ident" id="5080350"><a href="/gostd/html/entity.go.html#4976815">longestEntityWithoutSemicolon</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5080382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080386">for</span>&nbsp;<span class="ident" id="5080390">j</span>&nbsp;<span class="op" id="5080392">:=</span>&nbsp;<span class="ident" id="5080395"><a href="/gostd/html/escape.go.html#5080262">maxLen</a></span><span class="op" id="5080401">;</span>&nbsp;<span class="ident" id="5080403"><a href="/gostd/html/escape.go.html#5080390">j</a></span>&nbsp;<span class="op" id="5080405">&gt;</span>&nbsp;<span class="num" id="5080407">1</span><span class="op" id="5080408">;</span>&nbsp;<span class="ident" id="5080410"><a href="/gostd/html/escape.go.html#5080390">j</a></span><span class="op" id="5080411">--</span>&nbsp;<span class="op" id="5080414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080419">if</span>&nbsp;<span class="ident" id="5080422">x</span>&nbsp;<span class="op" id="5080424">:=</span>&nbsp;<span class="ident" id="5080427"><a href="/gostd/html/entity.go.html#4977200">entity</a></span><span class="op" id="5080433">[</span><span class="ident" id="5080434"><a href="/gostd/html/escape.go.html#5079818">entityName</a></span><span class="op" id="5080444">[</span><span class="op" id="5080445">:</span><span class="ident" id="5080446"><a href="/gostd/html/escape.go.html#5080390">j</a></span><span class="op" id="5080447">]</span><span class="op" id="5080448">]</span><span class="op" id="5080449">;</span>&nbsp;<span class="ident" id="5080451"><a href="/gostd/html/escape.go.html#5080422">x</a></span>&nbsp;<span class="op" id="5080453">!=</span>&nbsp;<span class="num" id="5080456">0</span>&nbsp;<span class="op" id="5080458">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080464">return</span>&nbsp;<span class="ident" id="5080471"><a href="/gostd/html/escape.go.html#5078046">dst</a></span>&nbsp;<span class="op" id="5080475">+</span>&nbsp;<span class="ident" id="5080477"><a href="/gostd/html/escape.go.html#5076915">utf8</a></span><span class="op" id="5080481">.</span><span class="ident" id="5080482"><a href="/gostd/unicode/utf8/utf8.go.html#1813107">EncodeRune</a></span><span class="op" id="5080492">(</span><span class="ident" id="5080493"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5080494">[</span><span class="ident" id="5080495"><a href="/gostd/html/escape.go.html#5078046">dst</a></span><span class="op" id="5080498">:</span><span class="op" id="5080499">]</span><span class="op" id="5080500">,</span>&nbsp;<span class="ident" id="5080502"><a href="/gostd/html/escape.go.html#5080422">x</a></span><span class="op" id="5080503">)</span><span class="op" id="5080504">,</span>&nbsp;<span class="ident" id="5080506"><a href="/gostd/html/escape.go.html#5078051">src</a></span>&nbsp;<span class="op" id="5080510">+</span>&nbsp;<span class="ident" id="5080512"><a href="/gostd/html/escape.go.html#5080390">j</a></span>&nbsp;<span class="op" id="5080514">+</span>&nbsp;<span class="num" id="5080516">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5080521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5080525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5080528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5080532"><a href="/gostd/html/escape.go.html#5078077">dst1</a></span><span class="op" id="5080536">,</span>&nbsp;<span class="ident" id="5080538"><a href="/gostd/html/escape.go.html#5078083">src1</a></span>&nbsp;<span class="op" id="5080543">=</span>&nbsp;<span class="ident" id="5080545"><a href="/gostd/html/escape.go.html#5078046">dst</a></span><span class="op" id="5080548">+</span><span class="ident" id="5080549"><a href="/gostd/html/escape.go.html#5078269">i</a></span><span class="op" id="5080550">,</span>&nbsp;<span class="ident" id="5080552"><a href="/gostd/html/escape.go.html#5078051">src</a></span><span class="op" id="5080555">+</span><span class="ident" id="5080556"><a href="/gostd/html/escape.go.html#5078269">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5080559">copy</span><span class="op" id="5080563">(</span><span class="ident" id="5080564"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5080565">[</span><span class="ident" id="5080566"><a href="/gostd/html/escape.go.html#5078046">dst</a></span><span class="op" id="5080569">:</span><span class="ident" id="5080570"><a href="/gostd/html/escape.go.html#5078077">dst1</a></span><span class="op" id="5080574">]</span><span class="op" id="5080575">,</span>&nbsp;<span class="ident" id="5080577"><a href="/gostd/html/escape.go.html#5078036">b</a></span><span class="op" id="5080578">[</span><span class="ident" id="5080579"><a href="/gostd/html/escape.go.html#5078051">src</a></span><span class="op" id="5080582">:</span><span class="ident" id="5080583"><a href="/gostd/html/escape.go.html#5078083">src1</a></span><span class="op" id="5080587">]</span><span class="op" id="5080588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080591">return</span>&nbsp;<span class="ident" id="5080598"><a href="/gostd/html/escape.go.html#5078077">dst1</a></span><span class="op" id="5080602">,</span>&nbsp;<span class="ident" id="5080604"><a href="/gostd/html/escape.go.html#5078083">src1</a></span><br>
<span class="lineno"></span><span class="op" id="5080609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="comment" id="5080612">//&nbsp;unescape&nbsp;unescapes&nbsp;b&#39;s&nbsp;entities&nbsp;in-place,&nbsp;so&nbsp;that&nbsp;&#34;a&amp;lt;b&#34;&nbsp;becomes&nbsp;&#34;a&lt;b&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5080689">func</span>&nbsp;<span class="ident" id="5080694">unescape</span><span class="op" id="5080702">(</span><span class="ident" id="5080703">b</span>&nbsp;<span class="op" id="5080705">[</span><span class="op" id="5080706">]</span><span class="builtintype" id="5080707">byte</span><span class="op" id="5080711">)</span>&nbsp;<span class="op" id="5080713">[</span><span class="op" id="5080714">]</span><span class="builtintype" id="5080715">byte</span>&nbsp;<span class="op" id="5080720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080723">for</span>&nbsp;<span class="ident" id="5080727">i</span><span class="op" id="5080728">,</span>&nbsp;<span class="ident" id="5080730">c</span>&nbsp;<span class="op" id="5080732">:=</span>&nbsp;<span class="keyword" id="5080735">range</span>&nbsp;<span class="ident" id="5080741"><a href="/gostd/html/escape.go.html#5080703">b</a></span>&nbsp;<span class="op" id="5080743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080747">if</span>&nbsp;<span class="ident" id="5080750"><a href="/gostd/html/escape.go.html#5080730">c</a></span>&nbsp;<span class="op" id="5080752">==</span>&nbsp;<span class="string" id="5080755">&#39;&amp;&#39;</span>&nbsp;<span class="op" id="5080759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5080764">dst</span><span class="op" id="5080767">,</span>&nbsp;<span class="ident" id="5080769">src</span>&nbsp;<span class="op" id="5080773">:=</span>&nbsp;<span class="ident" id="5080776"><a href="/gostd/html/escape.go.html#5078021">unescapeEntity</a></span><span class="op" id="5080790">(</span><span class="ident" id="5080791"><a href="/gostd/html/escape.go.html#5080703">b</a></span><span class="op" id="5080792">,</span>&nbsp;<span class="ident" id="5080794"><a href="/gostd/html/escape.go.html#5080727">i</a></span><span class="op" id="5080795">,</span>&nbsp;<span class="ident" id="5080797"><a href="/gostd/html/escape.go.html#5080727">i</a></span><span class="op" id="5080798">,</span>&nbsp;<span class="builtintype" id="5080800">false</span><span class="op" id="5080805">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080810">for</span>&nbsp;<span class="ident" id="5080814"><a href="/gostd/html/escape.go.html#5080769">src</a></span>&nbsp;<span class="op" id="5080818">&lt;</span>&nbsp;<span class="builtinfunc" id="5080820">len</span><span class="op" id="5080823">(</span><span class="ident" id="5080824"><a href="/gostd/html/escape.go.html#5080703">b</a></span><span class="op" id="5080825">)</span>&nbsp;<span class="op" id="5080827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5080833">c</span>&nbsp;<span class="op" id="5080835">:=</span>&nbsp;<span class="ident" id="5080838"><a href="/gostd/html/escape.go.html#5080703">b</a></span><span class="op" id="5080839">[</span><span class="ident" id="5080840"><a href="/gostd/html/escape.go.html#5080769">src</a></span><span class="op" id="5080843">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080849">if</span>&nbsp;<span class="ident" id="5080852"><a href="/gostd/html/escape.go.html#5080833">c</a></span>&nbsp;<span class="op" id="5080854">==</span>&nbsp;<span class="string" id="5080857">&#39;&amp;&#39;</span>&nbsp;<span class="op" id="5080861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5080868"><a href="/gostd/html/escape.go.html#5080764">dst</a></span><span class="op" id="5080871">,</span>&nbsp;<span class="ident" id="5080873"><a href="/gostd/html/escape.go.html#5080769">src</a></span>&nbsp;<span class="op" id="5080877">=</span>&nbsp;<span class="ident" id="5080879"><a href="/gostd/html/escape.go.html#5078021">unescapeEntity</a></span><span class="op" id="5080893">(</span><span class="ident" id="5080894"><a href="/gostd/html/escape.go.html#5080703">b</a></span><span class="op" id="5080895">,</span>&nbsp;<span class="ident" id="5080897"><a href="/gostd/html/escape.go.html#5080764">dst</a></span><span class="op" id="5080900">,</span>&nbsp;<span class="ident" id="5080902"><a href="/gostd/html/escape.go.html#5080769">src</a></span><span class="op" id="5080905">,</span>&nbsp;<span class="builtintype" id="5080907">false</span><span class="op" id="5080912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5080918">}</span>&nbsp;<span class="keyword" id="5080920">else</span>&nbsp;<span class="op" id="5080925">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5080932"><a href="/gostd/html/escape.go.html#5080703">b</a></span><span class="op" id="5080933">[</span><span class="ident" id="5080934"><a href="/gostd/html/escape.go.html#5080764">dst</a></span><span class="op" id="5080937">]</span>&nbsp;<span class="op" id="5080939">=</span>&nbsp;<span class="ident" id="5080941"><a href="/gostd/html/escape.go.html#5080833">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5080948"><a href="/gostd/html/escape.go.html#5080764">dst</a></span><span class="op" id="5080951">,</span>&nbsp;<span class="ident" id="5080953"><a href="/gostd/html/escape.go.html#5080769">src</a></span>&nbsp;<span class="op" id="5080957">=</span>&nbsp;<span class="ident" id="5080959"><a href="/gostd/html/escape.go.html#5080764">dst</a></span><span class="op" id="5080962">+</span><span class="num" id="5080963">1</span><span class="op" id="5080964">,</span>&nbsp;<span class="ident" id="5080966"><a href="/gostd/html/escape.go.html#5080769">src</a></span><span class="op" id="5080969">+</span><span class="num" id="5080970">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5080976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5080981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5080986">return</span>&nbsp;<span class="ident" id="5080993"><a href="/gostd/html/escape.go.html#5080703">b</a></span><span class="op" id="5080994">[</span><span class="num" id="5080995">0</span><span class="op" id="5080996">:</span><span class="ident" id="5080997"><a href="/gostd/html/escape.go.html#5080764">dst</a></span><span class="op" id="5081000">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5081004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5081007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081010">return</span>&nbsp;<span class="ident" id="5081017"><a href="/gostd/html/escape.go.html#5080703">b</a></span><br>
<span class="lineno"></span><span class="op" id="5081019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="5081022">const</span>&nbsp;<span class="ident" id="5081028">escapedChars</span>&nbsp;<span class="op" id="5081041">=</span>&nbsp;<span class="string" id="5081043">`&amp;&#39;&lt;&gt;&#34;`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5081052">func</span>&nbsp;<span class="ident" id="5081057">escape</span><span class="op" id="5081063">(</span><span class="ident" id="5081064">w</span>&nbsp;<span class="ident" id="5081066"><a href="/gostd/html/escape.go.html#5076938">writer</a></span><span class="op" id="5081072">,</span>&nbsp;<span class="ident" id="5081074">s</span>&nbsp;<span class="builtintype" id="5081076">string</span><span class="op" id="5081082">)</span>&nbsp;<span class="builtintype" id="5081084">error</span>&nbsp;<span class="op" id="5081090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5081093">i</span>&nbsp;<span class="op" id="5081095">:=</span>&nbsp;<span class="ident" id="5081098"><a href="/gostd/html/escape.go.html#5076904">strings</a></span><span class="op" id="5081105">.</span><span class="ident" id="5081106"><a href="/gostd/strings/strings.go.html#2970774">IndexAny</a></span><span class="op" id="5081114">(</span><span class="ident" id="5081115"><a href="/gostd/html/escape.go.html#5081074">s</a></span><span class="op" id="5081116">,</span>&nbsp;<span class="ident" id="5081118"><a href="/gostd/html/escape.go.html#5081028">escapedChars</a></span><span class="op" id="5081130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081133">for</span>&nbsp;<span class="ident" id="5081137"><a href="/gostd/html/escape.go.html#5081093">i</a></span>&nbsp;<span class="op" id="5081139">!=</span>&nbsp;<span class="op" id="5081142">-</span><span class="num" id="5081143">1</span>&nbsp;<span class="op" id="5081145">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081149">if</span>&nbsp;<span class="ident" id="5081152">_</span><span class="op" id="5081153">,</span>&nbsp;<span class="ident" id="5081155">err</span>&nbsp;<span class="op" id="5081159">:=</span>&nbsp;<span class="ident" id="5081162"><a href="/gostd/html/escape.go.html#5081064">w</a></span><span class="op" id="5081163">.</span><span class="ident" id="5081164"><a href="/gostd/html/escape.go.html#5076958">WriteString</a></span><span class="op" id="5081175">(</span><span class="ident" id="5081176"><a href="/gostd/html/escape.go.html#5081074">s</a></span><span class="op" id="5081177">[</span><span class="op" id="5081178">:</span><span class="ident" id="5081179"><a href="/gostd/html/escape.go.html#5081093">i</a></span><span class="op" id="5081180">]</span><span class="op" id="5081181">)</span><span class="op" id="5081182">;</span>&nbsp;<span class="ident" id="5081184"><a href="/gostd/html/escape.go.html#5081155">err</a></span>&nbsp;<span class="op" id="5081188">!=</span>&nbsp;<span class="builtintype" id="5081191">nil</span>&nbsp;<span class="op" id="5081195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081200">return</span>&nbsp;<span class="ident" id="5081207"><a href="/gostd/html/escape.go.html#5081155">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5081213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081217">var</span>&nbsp;<span class="ident" id="5081221">esc</span>&nbsp;<span class="builtintype" id="5081225">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081234">switch</span>&nbsp;<span class="ident" id="5081241"><a href="/gostd/html/escape.go.html#5081074">s</a></span><span class="op" id="5081242">[</span><span class="ident" id="5081243"><a href="/gostd/html/escape.go.html#5081093">i</a></span><span class="op" id="5081244">]</span>&nbsp;<span class="op" id="5081246">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081250">case</span>&nbsp;<span class="string" id="5081255">&#39;&amp;&#39;</span><span class="op" id="5081258">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5081263"><a href="/gostd/html/escape.go.html#5081221">esc</a></span>&nbsp;<span class="op" id="5081267">=</span>&nbsp;<span class="string" id="5081269">&#34;&amp;amp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081279">case</span>&nbsp;<span class="string" id="5081284">&#39;\&#39;&#39;</span><span class="op" id="5081288">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5081293">//&nbsp;&#34;&amp;#39;&#34;&nbsp;is&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;apos;&#34;&nbsp;and&nbsp;apos&nbsp;was&nbsp;not&nbsp;in&nbsp;HTML&nbsp;until&nbsp;HTML5.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5081370"><a href="/gostd/html/escape.go.html#5081221">esc</a></span>&nbsp;<span class="op" id="5081374">=</span>&nbsp;<span class="string" id="5081376">&#34;&amp;#39;&#34;</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081386">case</span>&nbsp;<span class="string" id="5081391">&#39;&lt;&#39;</span><span class="op" id="5081394">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5081399"><a href="/gostd/html/escape.go.html#5081221">esc</a></span>&nbsp;<span class="op" id="5081403">=</span>&nbsp;<span class="string" id="5081405">&#34;&amp;lt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081414">case</span>&nbsp;<span class="string" id="5081419">&#39;&gt;&#39;</span><span class="op" id="5081422">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5081427"><a href="/gostd/html/escape.go.html#5081221">esc</a></span>&nbsp;<span class="op" id="5081431">=</span>&nbsp;<span class="string" id="5081433">&#34;&amp;gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081442">case</span>&nbsp;<span class="string" id="5081447">&#39;&#34;&#39;</span><span class="op" id="5081450">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5081455">//&nbsp;&#34;&amp;#34;&#34;&nbsp;is&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;quot;&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5081495"><a href="/gostd/html/escape.go.html#5081221">esc</a></span>&nbsp;<span class="op" id="5081499">=</span>&nbsp;<span class="string" id="5081501">&#34;&amp;#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081511">default</span><span class="op" id="5081518">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5081523">panic</span><span class="op" id="5081528">(</span><span class="string" id="5081529">&#34;unrecognized&nbsp;escape&nbsp;character&#34;</span><span class="op" id="5081560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5081564">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5081568"><a href="/gostd/html/escape.go.html#5081074">s</a></span>&nbsp;<span class="op" id="5081570">=</span>&nbsp;<span class="ident" id="5081572"><a href="/gostd/html/escape.go.html#5081074">s</a></span><span class="op" id="5081573">[</span><span class="ident" id="5081574"><a href="/gostd/html/escape.go.html#5081093">i</a></span><span class="op" id="5081575">+</span><span class="num" id="5081576">1</span><span class="op" id="5081577">:</span><span class="op" id="5081578">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081582">if</span>&nbsp;<span class="ident" id="5081585">_</span><span class="op" id="5081586">,</span>&nbsp;<span class="ident" id="5081588">err</span>&nbsp;<span class="op" id="5081592">:=</span>&nbsp;<span class="ident" id="5081595"><a href="/gostd/html/escape.go.html#5081064">w</a></span><span class="op" id="5081596">.</span><span class="ident" id="5081597"><a href="/gostd/html/escape.go.html#5076958">WriteString</a></span><span class="op" id="5081608">(</span><span class="ident" id="5081609"><a href="/gostd/html/escape.go.html#5081221">esc</a></span><span class="op" id="5081612">)</span><span class="op" id="5081613">;</span>&nbsp;<span class="ident" id="5081615"><a href="/gostd/html/escape.go.html#5081588">err</a></span>&nbsp;<span class="op" id="5081619">!=</span>&nbsp;<span class="builtintype" id="5081622">nil</span>&nbsp;<span class="op" id="5081626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081631">return</span>&nbsp;<span class="ident" id="5081638"><a href="/gostd/html/escape.go.html#5081588">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5081644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5081648"><a href="/gostd/html/escape.go.html#5081093">i</a></span>&nbsp;<span class="op" id="5081650">=</span>&nbsp;<span class="ident" id="5081652"><a href="/gostd/html/escape.go.html#5076904">strings</a></span><span class="op" id="5081659">.</span><span class="ident" id="5081660"><a href="/gostd/strings/strings.go.html#2970774">IndexAny</a></span><span class="op" id="5081668">(</span><span class="ident" id="5081669"><a href="/gostd/html/escape.go.html#5081074">s</a></span><span class="op" id="5081670">,</span>&nbsp;<span class="ident" id="5081672"><a href="/gostd/html/escape.go.html#5081028">escapedChars</a></span><span class="op" id="5081684">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5081687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5081690">_</span><span class="op" id="5081691">,</span>&nbsp;<span class="ident" id="5081693">err</span>&nbsp;<span class="op" id="5081697">:=</span>&nbsp;<span class="ident" id="5081700"><a href="/gostd/html/escape.go.html#5081064">w</a></span><span class="op" id="5081701">.</span><span class="ident" id="5081702"><a href="/gostd/html/escape.go.html#5076958">WriteString</a></span><span class="op" id="5081713">(</span><span class="ident" id="5081714"><a href="/gostd/html/escape.go.html#5081074">s</a></span><span class="op" id="5081715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081718">return</span>&nbsp;<span class="ident" id="5081725"><a href="/gostd/html/escape.go.html#5081693">err</a></span><br>
<span class="lineno"></span><span class="op" id="5081729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="comment" id="5081732">//&nbsp;EscapeString&nbsp;escapes&nbsp;special&nbsp;characters&nbsp;like&nbsp;&#34;&lt;&#34;&nbsp;to&nbsp;become&nbsp;&#34;&amp;lt;&#34;.&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="5081805">//&nbsp;escapes&nbsp;only&nbsp;five&nbsp;such&nbsp;characters:&nbsp;&lt;,&nbsp;&gt;,&nbsp;&amp;,&nbsp;&#39;&nbsp;and&nbsp;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5081861">//&nbsp;UnescapeString(EscapeString(s))&nbsp;==&nbsp;s&nbsp;always&nbsp;holds,&nbsp;but&nbsp;the&nbsp;converse&nbsp;isn&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="5081938">//&nbsp;always&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="5081954">func</span>&nbsp;<span class="ident" id="5081959">EscapeString</span><span class="op" id="5081971">(</span><span class="ident" id="5081972">s</span>&nbsp;<span class="builtintype" id="5081974">string</span><span class="op" id="5081980">)</span>&nbsp;<span class="builtintype" id="5081982">string</span>&nbsp;<span class="op" id="5081989">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5081992">if</span>&nbsp;<span class="ident" id="5081995"><a href="/gostd/html/escape.go.html#5076904">strings</a></span><span class="op" id="5082002">.</span><span class="ident" id="5082003"><a href="/gostd/strings/strings.go.html#2970774">IndexAny</a></span><span class="op" id="5082011">(</span><span class="ident" id="5082012"><a href="/gostd/html/escape.go.html#5081972">s</a></span><span class="op" id="5082013">,</span>&nbsp;<span class="ident" id="5082015"><a href="/gostd/html/escape.go.html#5081028">escapedChars</a></span><span class="op" id="5082027">)</span>&nbsp;<span class="op" id="5082029">==</span>&nbsp;<span class="op" id="5082032">-</span><span class="num" id="5082033">1</span>&nbsp;<span class="op" id="5082035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5082039">return</span>&nbsp;<span class="ident" id="5082046"><a href="/gostd/html/escape.go.html#5081972">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5082049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5082052">var</span>&nbsp;<span class="ident" id="5082056">buf</span>&nbsp;<span class="ident" id="5082060"><a href="/gostd/html/escape.go.html#5076895">bytes</a></span><span class="op" id="5082065">.</span><span class="ident" id="5082066"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5082074"><a href="/gostd/html/escape.go.html#5081057">escape</a></span><span class="op" id="5082080">(</span><span class="op" id="5082081">&amp;</span><span class="ident" id="5082082"><a href="/gostd/html/escape.go.html#5082056">buf</a></span><span class="op" id="5082085">,</span>&nbsp;<span class="ident" id="5082087"><a href="/gostd/html/escape.go.html#5081972">s</a></span><span class="op" id="5082088">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5082091">return</span>&nbsp;<span class="ident" id="5082098"><a href="/gostd/html/escape.go.html#5082056">buf</a></span><span class="op" id="5082101">.</span><span class="ident" id="5082102"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="5082108">(</span><span class="op" id="5082109">)</span><br>
<span class="lineno"></span><span class="op" id="5082111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5082114">//&nbsp;UnescapeString&nbsp;unescapes&nbsp;entities&nbsp;like&nbsp;&#34;&amp;lt;&#34;&nbsp;to&nbsp;become&nbsp;&#34;&lt;&#34;.&nbsp;It&nbsp;unescapes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5082193">//&nbsp;larger&nbsp;range&nbsp;of&nbsp;entities&nbsp;than&nbsp;EscapeString&nbsp;escapes.&nbsp;For&nbsp;example,&nbsp;&#34;&amp;aacute;&#34;</span><br>
<span class="lineno">240</span><span class="comment" id="5082272">//&nbsp;unescapes&nbsp;to&nbsp;&#34;&#34;,&nbsp;as&nbsp;does&nbsp;&#34;&amp;#225;&#34;&nbsp;and&nbsp;&#34;&amp;xE1;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5082324">//&nbsp;UnescapeString(EscapeString(s))&nbsp;==&nbsp;s&nbsp;always&nbsp;holds,&nbsp;but&nbsp;the&nbsp;converse&nbsp;isn&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="5082401">//&nbsp;always&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="5082417">func</span>&nbsp;<span class="ident" id="5082422">UnescapeString</span><span class="op" id="5082436">(</span><span class="ident" id="5082437">s</span>&nbsp;<span class="builtintype" id="5082439">string</span><span class="op" id="5082445">)</span>&nbsp;<span class="builtintype" id="5082447">string</span>&nbsp;<span class="op" id="5082454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5082457">for</span>&nbsp;<span class="ident" id="5082461">_</span><span class="op" id="5082462">,</span>&nbsp;<span class="ident" id="5082464">c</span>&nbsp;<span class="op" id="5082466">:=</span>&nbsp;<span class="keyword" id="5082469">range</span>&nbsp;<span class="ident" id="5082475"><a href="/gostd/html/escape.go.html#5082437">s</a></span>&nbsp;<span class="op" id="5082477">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5082481">if</span>&nbsp;<span class="ident" id="5082484"><a href="/gostd/html/escape.go.html#5082464">c</a></span>&nbsp;<span class="op" id="5082486">==</span>&nbsp;<span class="string" id="5082489">&#39;&amp;&#39;</span>&nbsp;<span class="op" id="5082493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5082498">return</span>&nbsp;<span class="builtintype" id="5082505">string</span><span class="op" id="5082511">(</span><span class="ident" id="5082512"><a href="/gostd/html/escape.go.html#5080694">unescape</a></span><span class="op" id="5082520">(</span><span class="op" id="5082521">[</span><span class="op" id="5082522">]</span><span class="builtintype" id="5082523">byte</span><span class="op" id="5082527">(</span><span class="ident" id="5082528"><a href="/gostd/html/escape.go.html#5082437">s</a></span><span class="op" id="5082529">)</span><span class="op" id="5082530">)</span><span class="op" id="5082531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5082535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5082538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5082541">return</span>&nbsp;<span class="ident" id="5082548"><a href="/gostd/html/escape.go.html#5082437">s</a></span><br>
<span class="lineno">250</span><span class="op" id="5082550">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
