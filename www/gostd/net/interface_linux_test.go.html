<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html" class="current">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8010125">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8010181">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8010235">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8010286">package</span>&nbsp;<span class="ident" id="8010294">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8010299">import</span>&nbsp;<span class="op" id="8010306">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8010309">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8010316">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8010327">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8010337">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8010340">func</span>&nbsp;<span class="op" id="8010345">(</span><span class="ident" id="8010346">ti</span>&nbsp;<span class="op" id="8010349">*</span><span class="ident" id="8010350">testInterface</span><span class="op" id="8010363">)</span>&nbsp;<span class="ident" id="8010365">setBroadcast</span><span class="op" id="8010377">(</span><span class="ident" id="8010378">suffix</span>&nbsp;<span class="builtintype" id="8010385">int</span><span class="op" id="8010388">)</span>&nbsp;<span class="builtintype" id="8010390">error</span>&nbsp;<span class="op" id="8010396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010399">ti</span><span class="op" id="8010401">.</span><span class="ident" id="8010402">name</span>&nbsp;<span class="op" id="8010407">=</span>&nbsp;<span class="ident" id="8010409">fmt</span><span class="op" id="8010412">.</span><span class="ident" id="8010413">Sprintf</span><span class="op" id="8010420">(</span><span class="string" id="8010421">&#34;gotest%d&#34;</span><span class="op" id="8010431">,</span>&nbsp;<span class="ident" id="8010433">suffix</span><span class="op" id="8010439">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010442">xname</span><span class="op" id="8010447">,</span>&nbsp;<span class="ident" id="8010449">err</span>&nbsp;<span class="op" id="8010453">:=</span>&nbsp;<span class="ident" id="8010456">exec</span><span class="op" id="8010460">.</span><span class="ident" id="8010461">LookPath</span><span class="op" id="8010469">(</span><span class="string" id="8010470">&#34;ip&#34;</span><span class="op" id="8010474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8010477">if</span>&nbsp;<span class="ident" id="8010480">err</span>&nbsp;<span class="op" id="8010484">!=</span>&nbsp;<span class="ident" id="8010487">nil</span>&nbsp;<span class="op" id="8010491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8010495">return</span>&nbsp;<span class="ident" id="8010502">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8010507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010510">ti</span><span class="op" id="8010512">.</span><span class="ident" id="8010513">setupCmds</span>&nbsp;<span class="op" id="8010523">=</span>&nbsp;<span class="builtinfunc" id="8010525">append</span><span class="op" id="8010531">(</span><span class="ident" id="8010532">ti</span><span class="op" id="8010534">.</span><span class="ident" id="8010535">setupCmds</span><span class="op" id="8010544">,</span>&nbsp;<span class="op" id="8010546">&amp;</span><span class="ident" id="8010547">exec</span><span class="op" id="8010551">.</span><span class="ident" id="8010552">Cmd</span><span class="op" id="8010555">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010559">Path</span><span class="op" id="8010563">:</span>&nbsp;<span class="ident" id="8010565">xname</span><span class="op" id="8010570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010574">Args</span><span class="op" id="8010578">:</span>&nbsp;<span class="op" id="8010580">[</span><span class="op" id="8010581">]</span><span class="builtintype" id="8010582">string</span><span class="op" id="8010588">{</span><span class="string" id="8010589">&#34;ip&#34;</span><span class="op" id="8010593">,</span>&nbsp;<span class="string" id="8010595">&#34;link&#34;</span><span class="op" id="8010601">,</span>&nbsp;<span class="string" id="8010603">&#34;add&#34;</span><span class="op" id="8010608">,</span>&nbsp;<span class="ident" id="8010610">ti</span><span class="op" id="8010612">.</span><span class="ident" id="8010613">name</span><span class="op" id="8010617">,</span>&nbsp;<span class="string" id="8010619">&#34;type&#34;</span><span class="op" id="8010625">,</span>&nbsp;<span class="string" id="8010627">&#34;dummy&#34;</span><span class="op" id="8010634">}</span><span class="op" id="8010635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8010638">}</span><span class="op" id="8010639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010642">ti</span><span class="op" id="8010644">.</span><span class="ident" id="8010645">teardownCmds</span>&nbsp;<span class="op" id="8010658">=</span>&nbsp;<span class="builtinfunc" id="8010660">append</span><span class="op" id="8010666">(</span><span class="ident" id="8010667">ti</span><span class="op" id="8010669">.</span><span class="ident" id="8010670">teardownCmds</span><span class="op" id="8010682">,</span>&nbsp;<span class="op" id="8010684">&amp;</span><span class="ident" id="8010685">exec</span><span class="op" id="8010689">.</span><span class="ident" id="8010690">Cmd</span><span class="op" id="8010693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010697">Path</span><span class="op" id="8010701">:</span>&nbsp;<span class="ident" id="8010703">xname</span><span class="op" id="8010708">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010712">Args</span><span class="op" id="8010716">:</span>&nbsp;<span class="op" id="8010718">[</span><span class="op" id="8010719">]</span><span class="builtintype" id="8010720">string</span><span class="op" id="8010726">{</span><span class="string" id="8010727">&#34;ip&#34;</span><span class="op" id="8010731">,</span>&nbsp;<span class="string" id="8010733">&#34;link&#34;</span><span class="op" id="8010739">,</span>&nbsp;<span class="string" id="8010741">&#34;delete&#34;</span><span class="op" id="8010749">,</span>&nbsp;<span class="ident" id="8010751">ti</span><span class="op" id="8010753">.</span><span class="ident" id="8010754">name</span><span class="op" id="8010758">,</span>&nbsp;<span class="string" id="8010760">&#34;type&#34;</span><span class="op" id="8010766">,</span>&nbsp;<span class="string" id="8010768">&#34;dummy&#34;</span><span class="op" id="8010775">}</span><span class="op" id="8010776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8010779">}</span><span class="op" id="8010780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8010783">return</span>&nbsp;<span class="ident" id="8010790">nil</span><br>
<span class="lineno"></span><span class="op" id="8010794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8010797">func</span>&nbsp;<span class="op" id="8010802">(</span><span class="ident" id="8010803">ti</span>&nbsp;<span class="op" id="8010806">*</span><span class="ident" id="8010807">testInterface</span><span class="op" id="8010820">)</span>&nbsp;<span class="ident" id="8010822">setPointToPoint</span><span class="op" id="8010837">(</span><span class="ident" id="8010838">suffix</span>&nbsp;<span class="builtintype" id="8010845">int</span><span class="op" id="8010848">,</span>&nbsp;<span class="ident" id="8010850">local</span><span class="op" id="8010855">,</span>&nbsp;<span class="ident" id="8010857">remote</span>&nbsp;<span class="builtintype" id="8010864">string</span><span class="op" id="8010870">)</span>&nbsp;<span class="builtintype" id="8010872">error</span>&nbsp;<span class="op" id="8010878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010881">ti</span><span class="op" id="8010883">.</span><span class="ident" id="8010884">name</span>&nbsp;<span class="op" id="8010889">=</span>&nbsp;<span class="ident" id="8010891">fmt</span><span class="op" id="8010894">.</span><span class="ident" id="8010895">Sprintf</span><span class="op" id="8010902">(</span><span class="string" id="8010903">&#34;gotest%d&#34;</span><span class="op" id="8010913">,</span>&nbsp;<span class="ident" id="8010915">suffix</span><span class="op" id="8010921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010924">ti</span><span class="op" id="8010926">.</span><span class="ident" id="8010927">local</span>&nbsp;<span class="op" id="8010933">=</span>&nbsp;<span class="ident" id="8010935">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010942">ti</span><span class="op" id="8010944">.</span><span class="ident" id="8010945">remote</span>&nbsp;<span class="op" id="8010952">=</span>&nbsp;<span class="ident" id="8010954">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8010962">xname</span><span class="op" id="8010967">,</span>&nbsp;<span class="ident" id="8010969">err</span>&nbsp;<span class="op" id="8010973">:=</span>&nbsp;<span class="ident" id="8010976">exec</span><span class="op" id="8010980">.</span><span class="ident" id="8010981">LookPath</span><span class="op" id="8010989">(</span><span class="string" id="8010990">&#34;ip&#34;</span><span class="op" id="8010994">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8010997">if</span>&nbsp;<span class="ident" id="8011000">err</span>&nbsp;<span class="op" id="8011004">!=</span>&nbsp;<span class="ident" id="8011007">nil</span>&nbsp;<span class="op" id="8011011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8011015">return</span>&nbsp;<span class="ident" id="8011022">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011030">ti</span><span class="op" id="8011032">.</span><span class="ident" id="8011033">setupCmds</span>&nbsp;<span class="op" id="8011043">=</span>&nbsp;<span class="builtinfunc" id="8011045">append</span><span class="op" id="8011051">(</span><span class="ident" id="8011052">ti</span><span class="op" id="8011054">.</span><span class="ident" id="8011055">setupCmds</span><span class="op" id="8011064">,</span>&nbsp;<span class="op" id="8011066">&amp;</span><span class="ident" id="8011067">exec</span><span class="op" id="8011071">.</span><span class="ident" id="8011072">Cmd</span><span class="op" id="8011075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011079">Path</span><span class="op" id="8011083">:</span>&nbsp;<span class="ident" id="8011085">xname</span><span class="op" id="8011090">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011094">Args</span><span class="op" id="8011098">:</span>&nbsp;<span class="op" id="8011100">[</span><span class="op" id="8011101">]</span><span class="builtintype" id="8011102">string</span><span class="op" id="8011108">{</span><span class="string" id="8011109">&#34;ip&#34;</span><span class="op" id="8011113">,</span>&nbsp;<span class="string" id="8011115">&#34;tunnel&#34;</span><span class="op" id="8011123">,</span>&nbsp;<span class="string" id="8011125">&#34;add&#34;</span><span class="op" id="8011130">,</span>&nbsp;<span class="ident" id="8011132">ti</span><span class="op" id="8011134">.</span><span class="ident" id="8011135">name</span><span class="op" id="8011139">,</span>&nbsp;<span class="string" id="8011141">&#34;mode&#34;</span><span class="op" id="8011147">,</span>&nbsp;<span class="string" id="8011149">&#34;gre&#34;</span><span class="op" id="8011154">,</span>&nbsp;<span class="string" id="8011156">&#34;local&#34;</span><span class="op" id="8011163">,</span>&nbsp;<span class="ident" id="8011165">local</span><span class="op" id="8011170">,</span>&nbsp;<span class="string" id="8011172">&#34;remote&#34;</span><span class="op" id="8011180">,</span>&nbsp;<span class="ident" id="8011182">remote</span><span class="op" id="8011188">}</span><span class="op" id="8011189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011192">}</span><span class="op" id="8011193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011196">ti</span><span class="op" id="8011198">.</span><span class="ident" id="8011199">teardownCmds</span>&nbsp;<span class="op" id="8011212">=</span>&nbsp;<span class="builtinfunc" id="8011214">append</span><span class="op" id="8011220">(</span><span class="ident" id="8011221">ti</span><span class="op" id="8011223">.</span><span class="ident" id="8011224">teardownCmds</span><span class="op" id="8011236">,</span>&nbsp;<span class="op" id="8011238">&amp;</span><span class="ident" id="8011239">exec</span><span class="op" id="8011243">.</span><span class="ident" id="8011244">Cmd</span><span class="op" id="8011247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011251">Path</span><span class="op" id="8011255">:</span>&nbsp;<span class="ident" id="8011257">xname</span><span class="op" id="8011262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011266">Args</span><span class="op" id="8011270">:</span>&nbsp;<span class="op" id="8011272">[</span><span class="op" id="8011273">]</span><span class="builtintype" id="8011274">string</span><span class="op" id="8011280">{</span><span class="string" id="8011281">&#34;ip&#34;</span><span class="op" id="8011285">,</span>&nbsp;<span class="string" id="8011287">&#34;tunnel&#34;</span><span class="op" id="8011295">,</span>&nbsp;<span class="string" id="8011297">&#34;del&#34;</span><span class="op" id="8011302">,</span>&nbsp;<span class="ident" id="8011304">ti</span><span class="op" id="8011306">.</span><span class="ident" id="8011307">name</span><span class="op" id="8011311">,</span>&nbsp;<span class="string" id="8011313">&#34;mode&#34;</span><span class="op" id="8011319">,</span>&nbsp;<span class="string" id="8011321">&#34;gre&#34;</span><span class="op" id="8011326">,</span>&nbsp;<span class="string" id="8011328">&#34;local&#34;</span><span class="op" id="8011335">,</span>&nbsp;<span class="ident" id="8011337">local</span><span class="op" id="8011342">,</span>&nbsp;<span class="string" id="8011344">&#34;remote&#34;</span><span class="op" id="8011352">,</span>&nbsp;<span class="ident" id="8011354">remote</span><span class="op" id="8011360">}</span><span class="op" id="8011361">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011364">}</span><span class="op" id="8011365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011368">xname</span><span class="op" id="8011373">,</span>&nbsp;<span class="ident" id="8011375">err</span>&nbsp;<span class="op" id="8011379">=</span>&nbsp;<span class="ident" id="8011381">exec</span><span class="op" id="8011385">.</span><span class="ident" id="8011386">LookPath</span><span class="op" id="8011394">(</span><span class="string" id="8011395">&#34;ifconfig&#34;</span><span class="op" id="8011405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8011408">if</span>&nbsp;<span class="ident" id="8011411">err</span>&nbsp;<span class="op" id="8011415">!=</span>&nbsp;<span class="ident" id="8011418">nil</span>&nbsp;<span class="op" id="8011422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8011426">return</span>&nbsp;<span class="ident" id="8011433">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011438">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011441">ti</span><span class="op" id="8011443">.</span><span class="ident" id="8011444">setupCmds</span>&nbsp;<span class="op" id="8011454">=</span>&nbsp;<span class="builtinfunc" id="8011456">append</span><span class="op" id="8011462">(</span><span class="ident" id="8011463">ti</span><span class="op" id="8011465">.</span><span class="ident" id="8011466">setupCmds</span><span class="op" id="8011475">,</span>&nbsp;<span class="op" id="8011477">&amp;</span><span class="ident" id="8011478">exec</span><span class="op" id="8011482">.</span><span class="ident" id="8011483">Cmd</span><span class="op" id="8011486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011490">Path</span><span class="op" id="8011494">:</span>&nbsp;<span class="ident" id="8011496">xname</span><span class="op" id="8011501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011505">Args</span><span class="op" id="8011509">:</span>&nbsp;<span class="op" id="8011511">[</span><span class="op" id="8011512">]</span><span class="builtintype" id="8011513">string</span><span class="op" id="8011519">{</span><span class="string" id="8011520">&#34;ifconfig&#34;</span><span class="op" id="8011530">,</span>&nbsp;<span class="ident" id="8011532">ti</span><span class="op" id="8011534">.</span><span class="ident" id="8011535">name</span><span class="op" id="8011539">,</span>&nbsp;<span class="string" id="8011541">&#34;inet&#34;</span><span class="op" id="8011547">,</span>&nbsp;<span class="ident" id="8011549">local</span><span class="op" id="8011554">,</span>&nbsp;<span class="string" id="8011556">&#34;dstaddr&#34;</span><span class="op" id="8011565">,</span>&nbsp;<span class="ident" id="8011567">remote</span><span class="op" id="8011573">}</span><span class="op" id="8011574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011577">}</span><span class="op" id="8011578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8011581">return</span>&nbsp;<span class="ident" id="8011588">nil</span><br>
<span class="lineno">55</span><span class="op" id="8011592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8011595">const</span>&nbsp;<span class="op" id="8011601">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011604">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="8011625">=</span>&nbsp;<span class="num" id="8011627">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011631">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="8011652">=</span>&nbsp;<span class="num" id="8011654">18</span><br>
<span class="lineno">60</span><span class="op" id="8011657">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8011660">var</span>&nbsp;<span class="op" id="8011664">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011667">igmpInterfaceTable</span>&nbsp;<span class="op" id="8011686">=</span>&nbsp;<span class="op" id="8011688">[</span><span class="op" id="8011689">]</span><span class="ident" id="8011690">Interface</span><span class="op" id="8011699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011703">{</span><span class="ident" id="8011704">Name</span><span class="op" id="8011708">:</span>&nbsp;<span class="string" id="8011710">&#34;lo&#34;</span><span class="op" id="8011714">}</span><span class="op" id="8011715">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011719">{</span><span class="ident" id="8011720">Name</span><span class="op" id="8011724">:</span>&nbsp;<span class="string" id="8011726">&#34;eth0&#34;</span><span class="op" id="8011732">}</span><span class="op" id="8011733">,</span>&nbsp;<span class="op" id="8011735">{</span><span class="ident" id="8011736">Name</span><span class="op" id="8011740">:</span>&nbsp;<span class="string" id="8011742">&#34;eth1&#34;</span><span class="op" id="8011748">}</span><span class="op" id="8011749">,</span>&nbsp;<span class="op" id="8011751">{</span><span class="ident" id="8011752">Name</span><span class="op" id="8011756">:</span>&nbsp;<span class="string" id="8011758">&#34;eth2&#34;</span><span class="op" id="8011764">}</span><span class="op" id="8011765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011769">{</span><span class="ident" id="8011770">Name</span><span class="op" id="8011774">:</span>&nbsp;<span class="string" id="8011776">&#34;eth0.100&#34;</span><span class="op" id="8011786">}</span><span class="op" id="8011787">,</span>&nbsp;<span class="op" id="8011789">{</span><span class="ident" id="8011790">Name</span><span class="op" id="8011794">:</span>&nbsp;<span class="string" id="8011796">&#34;eth0.101&#34;</span><span class="op" id="8011806">}</span><span class="op" id="8011807">,</span>&nbsp;<span class="op" id="8011809">{</span><span class="ident" id="8011810">Name</span><span class="op" id="8011814">:</span>&nbsp;<span class="string" id="8011816">&#34;eth0.102&#34;</span><span class="op" id="8011826">}</span><span class="op" id="8011827">,</span>&nbsp;<span class="op" id="8011829">{</span><span class="ident" id="8011830">Name</span><span class="op" id="8011834">:</span>&nbsp;<span class="string" id="8011836">&#34;eth0.103&#34;</span><span class="op" id="8011846">}</span><span class="op" id="8011847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011851">{</span><span class="ident" id="8011852">Name</span><span class="op" id="8011856">:</span>&nbsp;<span class="string" id="8011858">&#34;device1tap2&#34;</span><span class="op" id="8011871">}</span><span class="op" id="8011872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8011878">igmp6InterfaceTable</span>&nbsp;<span class="op" id="8011898">=</span>&nbsp;<span class="op" id="8011900">[</span><span class="op" id="8011901">]</span><span class="ident" id="8011902">Interface</span><span class="op" id="8011911">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011915">{</span><span class="ident" id="8011916">Name</span><span class="op" id="8011920">:</span>&nbsp;<span class="string" id="8011922">&#34;lo&#34;</span><span class="op" id="8011926">}</span><span class="op" id="8011927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011931">{</span><span class="ident" id="8011932">Name</span><span class="op" id="8011936">:</span>&nbsp;<span class="string" id="8011938">&#34;eth0&#34;</span><span class="op" id="8011944">}</span><span class="op" id="8011945">,</span>&nbsp;<span class="op" id="8011947">{</span><span class="ident" id="8011948">Name</span><span class="op" id="8011952">:</span>&nbsp;<span class="string" id="8011954">&#34;eth1&#34;</span><span class="op" id="8011960">}</span><span class="op" id="8011961">,</span>&nbsp;<span class="op" id="8011963">{</span><span class="ident" id="8011964">Name</span><span class="op" id="8011968">:</span>&nbsp;<span class="string" id="8011970">&#34;eth2&#34;</span><span class="op" id="8011976">}</span><span class="op" id="8011977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8011981">{</span><span class="ident" id="8011982">Name</span><span class="op" id="8011986">:</span>&nbsp;<span class="string" id="8011988">&#34;eth0.100&#34;</span><span class="op" id="8011998">}</span><span class="op" id="8011999">,</span>&nbsp;<span class="op" id="8012001">{</span><span class="ident" id="8012002">Name</span><span class="op" id="8012006">:</span>&nbsp;<span class="string" id="8012008">&#34;eth0.101&#34;</span><span class="op" id="8012018">}</span><span class="op" id="8012019">,</span>&nbsp;<span class="op" id="8012021">{</span><span class="ident" id="8012022">Name</span><span class="op" id="8012026">:</span>&nbsp;<span class="string" id="8012028">&#34;eth0.102&#34;</span><span class="op" id="8012038">}</span><span class="op" id="8012039">,</span>&nbsp;<span class="op" id="8012041">{</span><span class="ident" id="8012042">Name</span><span class="op" id="8012046">:</span>&nbsp;<span class="string" id="8012048">&#34;eth0.103&#34;</span><span class="op" id="8012058">}</span><span class="op" id="8012059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8012063">{</span><span class="ident" id="8012064">Name</span><span class="op" id="8012068">:</span>&nbsp;<span class="string" id="8012070">&#34;device1tap2&#34;</span><span class="op" id="8012083">}</span><span class="op" id="8012084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8012088">{</span><span class="ident" id="8012089">Name</span><span class="op" id="8012093">:</span>&nbsp;<span class="string" id="8012095">&#34;pan0&#34;</span><span class="op" id="8012101">}</span><span class="op" id="8012102">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8012105">}</span><br>
<span class="lineno"></span><span class="op" id="8012107">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8012110">func</span>&nbsp;<span class="ident" id="8012115">TestParseProcNet</span><span class="op" id="8012131">(</span><span class="ident" id="8012132">t</span>&nbsp;<span class="op" id="8012134">*</span><span class="ident" id="8012135">testing</span><span class="op" id="8012142">.</span><span class="ident" id="8012143">T</span><span class="op" id="8012144">)</span>&nbsp;<span class="op" id="8012146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8012149">defer</span>&nbsp;<span class="keyword" id="8012155">func</span><span class="op" id="8012159">(</span><span class="op" id="8012160">)</span>&nbsp;<span class="op" id="8012162">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8012166">if</span>&nbsp;<span class="ident" id="8012169">p</span>&nbsp;<span class="op" id="8012171">:=</span>&nbsp;<span class="builtinfunc" id="8012174">recover</span><span class="op" id="8012181">(</span><span class="op" id="8012182">)</span><span class="op" id="8012183">;</span>&nbsp;<span class="ident" id="8012185">p</span>&nbsp;<span class="op" id="8012187">!=</span>&nbsp;<span class="ident" id="8012190">nil</span>&nbsp;<span class="op" id="8012194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8012199">t</span><span class="op" id="8012200">.</span><span class="ident" id="8012201">Fatalf</span><span class="op" id="8012207">(</span><span class="string" id="8012208">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="8012260">,</span>&nbsp;<span class="ident" id="8012262">p</span><span class="op" id="8012263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8012267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8012270">}</span><span class="op" id="8012271">(</span><span class="op" id="8012272">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8012276">var</span>&nbsp;<span class="ident" id="8012280">ifmat4</span>&nbsp;<span class="op" id="8012287">[</span><span class="op" id="8012288">]</span><span class="ident" id="8012289">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8012295">for</span>&nbsp;<span class="ident" id="8012299">_</span><span class="op" id="8012300">,</span>&nbsp;<span class="ident" id="8012302">ifi</span>&nbsp;<span class="op" id="8012306">:=</span>&nbsp;<span class="keyword" id="8012309">range</span>&nbsp;<span class="ident" id="8012315">igmpInterfaceTable</span>&nbsp;<span class="op" id="8012334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8012338">ifmat</span>&nbsp;<span class="op" id="8012344">:=</span>&nbsp;<span class="ident" id="8012347">parseProcNetIGMP</span><span class="op" id="8012363">(</span><span class="string" id="8012364">&#34;testdata/igmp&#34;</span><span class="op" id="8012379">,</span>&nbsp;<span class="op" id="8012381">&amp;</span><span class="ident" id="8012382">ifi</span><span class="op" id="8012385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8012389">ifmat4</span>&nbsp;<span class="op" id="8012396">=</span>&nbsp;<span class="builtinfunc" id="8012398">append</span><span class="op" id="8012404">(</span><span class="ident" id="8012405">ifmat4</span><span class="op" id="8012411">,</span>&nbsp;<span class="ident" id="8012413">ifmat</span><span class="op" id="8012418">...</span><span class="op" id="8012421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8012424">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8012427">if</span>&nbsp;<span class="builtinfunc" id="8012430">len</span><span class="op" id="8012433">(</span><span class="ident" id="8012434">ifmat4</span><span class="op" id="8012440">)</span>&nbsp;<span class="op" id="8012442">!=</span>&nbsp;<span class="ident" id="8012445">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="8012466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8012470">t</span><span class="op" id="8012471">.</span><span class="ident" id="8012472">Fatalf</span><span class="op" id="8012478">(</span><span class="string" id="8012479">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8012531">,</span>&nbsp;<span class="builtinfunc" id="8012533">len</span><span class="op" id="8012536">(</span><span class="ident" id="8012537">ifmat4</span><span class="op" id="8012543">)</span><span class="op" id="8012544">,</span>&nbsp;<span class="ident" id="8012546">numOfTestIPv4MCAddrs</span><span class="op" id="8012566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8012569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8012573">var</span>&nbsp;<span class="ident" id="8012577">ifmat6</span>&nbsp;<span class="op" id="8012584">[</span><span class="op" id="8012585">]</span><span class="ident" id="8012586">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8012592">for</span>&nbsp;<span class="ident" id="8012596">_</span><span class="op" id="8012597">,</span>&nbsp;<span class="ident" id="8012599">ifi</span>&nbsp;<span class="op" id="8012603">:=</span>&nbsp;<span class="keyword" id="8012606">range</span>&nbsp;<span class="ident" id="8012612">igmp6InterfaceTable</span>&nbsp;<span class="op" id="8012632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8012636">ifmat</span>&nbsp;<span class="op" id="8012642">:=</span>&nbsp;<span class="ident" id="8012645">parseProcNetIGMP6</span><span class="op" id="8012662">(</span><span class="string" id="8012663">&#34;testdata/igmp6&#34;</span><span class="op" id="8012679">,</span>&nbsp;<span class="op" id="8012681">&amp;</span><span class="ident" id="8012682">ifi</span><span class="op" id="8012685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8012689">ifmat6</span>&nbsp;<span class="op" id="8012696">=</span>&nbsp;<span class="builtinfunc" id="8012698">append</span><span class="op" id="8012704">(</span><span class="ident" id="8012705">ifmat6</span><span class="op" id="8012711">,</span>&nbsp;<span class="ident" id="8012713">ifmat</span><span class="op" id="8012718">...</span><span class="op" id="8012721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8012724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8012727">if</span>&nbsp;<span class="builtinfunc" id="8012730">len</span><span class="op" id="8012733">(</span><span class="ident" id="8012734">ifmat6</span><span class="op" id="8012740">)</span>&nbsp;<span class="op" id="8012742">!=</span>&nbsp;<span class="ident" id="8012745">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="8012766">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8012770">t</span><span class="op" id="8012771">.</span><span class="ident" id="8012772">Fatalf</span><span class="op" id="8012778">(</span><span class="string" id="8012779">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8012832">,</span>&nbsp;<span class="builtinfunc" id="8012834">len</span><span class="op" id="8012837">(</span><span class="ident" id="8012838">ifmat6</span><span class="op" id="8012844">)</span><span class="op" id="8012845">,</span>&nbsp;<span class="ident" id="8012847">numOfTestIPv6MCAddrs</span><span class="op" id="8012867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8012870">}</span><br>
<span class="lineno"></span><span class="op" id="8012872">}</span>
</div>
</body>
</html>
