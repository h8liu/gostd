<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8537808">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8537863">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8537917">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8537968">package</span>&nbsp;<span class="ident" id="8537976">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8537981">import</span>&nbsp;<span class="op" id="8537988">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8537991">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8538000">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8538016">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8538033">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8538049">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8538056">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8538064">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8538075">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8538086">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8538096">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8538099">func</span>&nbsp;<span class="ident" id="8538104">TestZeroRat</span><span class="op" id="8538115">(</span><span class="ident" id="8538116">t</span>&nbsp;<span class="op" id="8538118">*</span><span class="ident" id="8538119">testing</span><span class="op" id="8538126">.</span><span class="ident" id="8538127">T</span><span class="op" id="8538128">)</span>&nbsp;<span class="op" id="8538130">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8538133">var</span>&nbsp;<span class="ident" id="8538137">x</span><span class="op" id="8538138">,</span>&nbsp;<span class="ident" id="8538140">y</span><span class="op" id="8538141">,</span>&nbsp;<span class="ident" id="8538143">z</span>&nbsp;<span class="ident" id="8538145">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538150">y</span><span class="op" id="8538151">.</span><span class="ident" id="8538152">SetFrac64</span><span class="op" id="8538161">(</span><span class="num" id="8538162">0</span><span class="op" id="8538163">,</span>&nbsp;<span class="num" id="8538165">42</span><span class="op" id="8538167">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8538171">if</span>&nbsp;<span class="ident" id="8538174">x</span><span class="op" id="8538175">.</span><span class="ident" id="8538176">Cmp</span><span class="op" id="8538179">(</span><span class="op" id="8538180">&amp;</span><span class="ident" id="8538181">y</span><span class="op" id="8538182">)</span>&nbsp;<span class="op" id="8538184">!=</span>&nbsp;<span class="num" id="8538187">0</span>&nbsp;<span class="op" id="8538189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538193">t</span><span class="op" id="8538194">.</span><span class="ident" id="8538195">Errorf</span><span class="op" id="8538201">(</span><span class="string" id="8538202">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="8538241">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8538248">if</span>&nbsp;<span class="ident" id="8538251">s</span>&nbsp;<span class="op" id="8538253">:=</span>&nbsp;<span class="ident" id="8538256">x</span><span class="op" id="8538257">.</span><span class="ident" id="8538258">String</span><span class="op" id="8538264">(</span><span class="op" id="8538265">)</span><span class="op" id="8538266">;</span>&nbsp;<span class="ident" id="8538268">s</span>&nbsp;<span class="op" id="8538270">!=</span>&nbsp;<span class="string" id="8538273">&#34;0/1&#34;</span>&nbsp;<span class="op" id="8538279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538283">t</span><span class="op" id="8538284">.</span><span class="ident" id="8538285">Errorf</span><span class="op" id="8538291">(</span><span class="string" id="8538292">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="8538314">,</span>&nbsp;<span class="ident" id="8538316">s</span><span class="op" id="8538317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538320">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8538324">if</span>&nbsp;<span class="ident" id="8538327">s</span>&nbsp;<span class="op" id="8538329">:=</span>&nbsp;<span class="ident" id="8538332">x</span><span class="op" id="8538333">.</span><span class="ident" id="8538334">RatString</span><span class="op" id="8538343">(</span><span class="op" id="8538344">)</span><span class="op" id="8538345">;</span>&nbsp;<span class="ident" id="8538347">s</span>&nbsp;<span class="op" id="8538349">!=</span>&nbsp;<span class="string" id="8538352">&#34;0&#34;</span>&nbsp;<span class="op" id="8538356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538360">t</span><span class="op" id="8538361">.</span><span class="ident" id="8538362">Errorf</span><span class="op" id="8538368">(</span><span class="string" id="8538369">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="8538389">,</span>&nbsp;<span class="ident" id="8538391">s</span><span class="op" id="8538392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538399">z</span><span class="op" id="8538400">.</span><span class="ident" id="8538401">Add</span><span class="op" id="8538404">(</span><span class="op" id="8538405">&amp;</span><span class="ident" id="8538406">x</span><span class="op" id="8538407">,</span>&nbsp;<span class="op" id="8538409">&amp;</span><span class="ident" id="8538410">y</span><span class="op" id="8538411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8538414">if</span>&nbsp;<span class="ident" id="8538417">s</span>&nbsp;<span class="op" id="8538419">:=</span>&nbsp;<span class="ident" id="8538422">z</span><span class="op" id="8538423">.</span><span class="ident" id="8538424">RatString</span><span class="op" id="8538433">(</span><span class="op" id="8538434">)</span><span class="op" id="8538435">;</span>&nbsp;<span class="ident" id="8538437">s</span>&nbsp;<span class="op" id="8538439">!=</span>&nbsp;<span class="string" id="8538442">&#34;0&#34;</span>&nbsp;<span class="op" id="8538446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538450">t</span><span class="op" id="8538451">.</span><span class="ident" id="8538452">Errorf</span><span class="op" id="8538458">(</span><span class="string" id="8538459">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="8538481">,</span>&nbsp;<span class="ident" id="8538483">s</span><span class="op" id="8538484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538491">z</span><span class="op" id="8538492">.</span><span class="ident" id="8538493">Sub</span><span class="op" id="8538496">(</span><span class="op" id="8538497">&amp;</span><span class="ident" id="8538498">x</span><span class="op" id="8538499">,</span>&nbsp;<span class="op" id="8538501">&amp;</span><span class="ident" id="8538502">y</span><span class="op" id="8538503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8538506">if</span>&nbsp;<span class="ident" id="8538509">s</span>&nbsp;<span class="op" id="8538511">:=</span>&nbsp;<span class="ident" id="8538514">z</span><span class="op" id="8538515">.</span><span class="ident" id="8538516">RatString</span><span class="op" id="8538525">(</span><span class="op" id="8538526">)</span><span class="op" id="8538527">;</span>&nbsp;<span class="ident" id="8538529">s</span>&nbsp;<span class="op" id="8538531">!=</span>&nbsp;<span class="string" id="8538534">&#34;0&#34;</span>&nbsp;<span class="op" id="8538538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538542">t</span><span class="op" id="8538543">.</span><span class="ident" id="8538544">Errorf</span><span class="op" id="8538550">(</span><span class="string" id="8538551">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="8538573">,</span>&nbsp;<span class="ident" id="8538575">s</span><span class="op" id="8538576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538583">z</span><span class="op" id="8538584">.</span><span class="ident" id="8538585">Mul</span><span class="op" id="8538588">(</span><span class="op" id="8538589">&amp;</span><span class="ident" id="8538590">x</span><span class="op" id="8538591">,</span>&nbsp;<span class="op" id="8538593">&amp;</span><span class="ident" id="8538594">y</span><span class="op" id="8538595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8538598">if</span>&nbsp;<span class="ident" id="8538601">s</span>&nbsp;<span class="op" id="8538603">:=</span>&nbsp;<span class="ident" id="8538606">z</span><span class="op" id="8538607">.</span><span class="ident" id="8538608">RatString</span><span class="op" id="8538617">(</span><span class="op" id="8538618">)</span><span class="op" id="8538619">;</span>&nbsp;<span class="ident" id="8538621">s</span>&nbsp;<span class="op" id="8538623">!=</span>&nbsp;<span class="string" id="8538626">&#34;0&#34;</span>&nbsp;<span class="op" id="8538630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538634">t</span><span class="op" id="8538635">.</span><span class="ident" id="8538636">Errorf</span><span class="op" id="8538642">(</span><span class="string" id="8538643">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="8538665">,</span>&nbsp;<span class="ident" id="8538667">s</span><span class="op" id="8538668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8538675">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8538706">defer</span>&nbsp;<span class="keyword" id="8538712">func</span><span class="op" id="8538716">(</span><span class="op" id="8538717">)</span>&nbsp;<span class="op" id="8538719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8538723">if</span>&nbsp;<span class="ident" id="8538726">s</span>&nbsp;<span class="op" id="8538728">:=</span>&nbsp;<span class="builtinfunc" id="8538731">recover</span><span class="op" id="8538738">(</span><span class="op" id="8538739">)</span><span class="op" id="8538740">;</span>&nbsp;<span class="ident" id="8538742">s</span>&nbsp;<span class="op" id="8538744">==</span>&nbsp;<span class="ident" id="8538747">nil</span>&nbsp;<span class="op" id="8538751">||</span>&nbsp;<span class="ident" id="8538754">s</span><span class="op" id="8538755">.</span><span class="op" id="8538756">(</span><span class="builtintype" id="8538757">string</span><span class="op" id="8538763">)</span>&nbsp;<span class="op" id="8538765">!=</span>&nbsp;<span class="string" id="8538768">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="8538787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8538792">panic</span><span class="op" id="8538797">(</span><span class="ident" id="8538798">s</span><span class="op" id="8538799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538803">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538806">}</span><span class="op" id="8538807">(</span><span class="op" id="8538808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538811">z</span><span class="op" id="8538812">.</span><span class="ident" id="8538813">Quo</span><span class="op" id="8538816">(</span><span class="op" id="8538817">&amp;</span><span class="ident" id="8538818">x</span><span class="op" id="8538819">,</span>&nbsp;<span class="op" id="8538821">&amp;</span><span class="ident" id="8538822">y</span><span class="op" id="8538823">)</span><br>
<span class="lineno"></span><span class="op" id="8538825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8538828">var</span>&nbsp;<span class="ident" id="8538832">setStringTests</span>&nbsp;<span class="op" id="8538847">=</span>&nbsp;<span class="op" id="8538849">[</span><span class="op" id="8538850">]</span><span class="keyword" id="8538851">struct</span>&nbsp;<span class="op" id="8538858">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538861">in</span><span class="op" id="8538863">,</span>&nbsp;<span class="ident" id="8538865">out</span>&nbsp;<span class="builtintype" id="8538869">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8538877">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8538885">bool</span><br>
<span class="lineno"></span><span class="op" id="8538890">}</span><span class="op" id="8538891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538894">{</span><span class="string" id="8538895">&#34;0&#34;</span><span class="op" id="8538898">,</span>&nbsp;<span class="string" id="8538900">&#34;0&#34;</span><span class="op" id="8538903">,</span>&nbsp;<span class="ident" id="8538905">true</span><span class="op" id="8538909">}</span><span class="op" id="8538910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538913">{</span><span class="string" id="8538914">&#34;-0&#34;</span><span class="op" id="8538918">,</span>&nbsp;<span class="string" id="8538920">&#34;0&#34;</span><span class="op" id="8538923">,</span>&nbsp;<span class="ident" id="8538925">true</span><span class="op" id="8538929">}</span><span class="op" id="8538930">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538933">{</span><span class="string" id="8538934">&#34;1&#34;</span><span class="op" id="8538937">,</span>&nbsp;<span class="string" id="8538939">&#34;1&#34;</span><span class="op" id="8538942">,</span>&nbsp;<span class="ident" id="8538944">true</span><span class="op" id="8538948">}</span><span class="op" id="8538949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538952">{</span><span class="string" id="8538953">&#34;-1&#34;</span><span class="op" id="8538957">,</span>&nbsp;<span class="string" id="8538959">&#34;-1&#34;</span><span class="op" id="8538963">,</span>&nbsp;<span class="ident" id="8538965">true</span><span class="op" id="8538969">}</span><span class="op" id="8538970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538973">{</span><span class="string" id="8538974">&#34;1.&#34;</span><span class="op" id="8538978">,</span>&nbsp;<span class="string" id="8538980">&#34;1&#34;</span><span class="op" id="8538983">,</span>&nbsp;<span class="ident" id="8538985">true</span><span class="op" id="8538989">}</span><span class="op" id="8538990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8538993">{</span><span class="string" id="8538994">&#34;1e0&#34;</span><span class="op" id="8538999">,</span>&nbsp;<span class="string" id="8539001">&#34;1&#34;</span><span class="op" id="8539004">,</span>&nbsp;<span class="ident" id="8539006">true</span><span class="op" id="8539010">}</span><span class="op" id="8539011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539014">{</span><span class="string" id="8539015">&#34;1.e1&#34;</span><span class="op" id="8539021">,</span>&nbsp;<span class="string" id="8539023">&#34;10&#34;</span><span class="op" id="8539027">,</span>&nbsp;<span class="ident" id="8539029">true</span><span class="op" id="8539033">}</span><span class="op" id="8539034">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539037">{</span><span class="ident" id="8539038">in</span><span class="op" id="8539040">:</span>&nbsp;<span class="string" id="8539042">&#34;1e&#34;</span><span class="op" id="8539046">,</span>&nbsp;<span class="ident" id="8539048">ok</span><span class="op" id="8539050">:</span>&nbsp;<span class="ident" id="8539052">false</span><span class="op" id="8539057">}</span><span class="op" id="8539058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539061">{</span><span class="ident" id="8539062">in</span><span class="op" id="8539064">:</span>&nbsp;<span class="string" id="8539066">&#34;1.e&#34;</span><span class="op" id="8539071">,</span>&nbsp;<span class="ident" id="8539073">ok</span><span class="op" id="8539075">:</span>&nbsp;<span class="ident" id="8539077">false</span><span class="op" id="8539082">}</span><span class="op" id="8539083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539086">{</span><span class="ident" id="8539087">in</span><span class="op" id="8539089">:</span>&nbsp;<span class="string" id="8539091">&#34;1e+14e-5&#34;</span><span class="op" id="8539101">,</span>&nbsp;<span class="ident" id="8539103">ok</span><span class="op" id="8539105">:</span>&nbsp;<span class="ident" id="8539107">false</span><span class="op" id="8539112">}</span><span class="op" id="8539113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539116">{</span><span class="ident" id="8539117">in</span><span class="op" id="8539119">:</span>&nbsp;<span class="string" id="8539121">&#34;1e4.5&#34;</span><span class="op" id="8539128">,</span>&nbsp;<span class="ident" id="8539130">ok</span><span class="op" id="8539132">:</span>&nbsp;<span class="ident" id="8539134">false</span><span class="op" id="8539139">}</span><span class="op" id="8539140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539143">{</span><span class="ident" id="8539144">in</span><span class="op" id="8539146">:</span>&nbsp;<span class="string" id="8539148">&#34;r&#34;</span><span class="op" id="8539151">,</span>&nbsp;<span class="ident" id="8539153">ok</span><span class="op" id="8539155">:</span>&nbsp;<span class="ident" id="8539157">false</span><span class="op" id="8539162">}</span><span class="op" id="8539163">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539166">{</span><span class="ident" id="8539167">in</span><span class="op" id="8539169">:</span>&nbsp;<span class="string" id="8539171">&#34;a/b&#34;</span><span class="op" id="8539176">,</span>&nbsp;<span class="ident" id="8539178">ok</span><span class="op" id="8539180">:</span>&nbsp;<span class="ident" id="8539182">false</span><span class="op" id="8539187">}</span><span class="op" id="8539188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539191">{</span><span class="ident" id="8539192">in</span><span class="op" id="8539194">:</span>&nbsp;<span class="string" id="8539196">&#34;a.b&#34;</span><span class="op" id="8539201">,</span>&nbsp;<span class="ident" id="8539203">ok</span><span class="op" id="8539205">:</span>&nbsp;<span class="ident" id="8539207">false</span><span class="op" id="8539212">}</span><span class="op" id="8539213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539216">{</span><span class="string" id="8539217">&#34;-0.1&#34;</span><span class="op" id="8539223">,</span>&nbsp;<span class="string" id="8539225">&#34;-1/10&#34;</span><span class="op" id="8539232">,</span>&nbsp;<span class="ident" id="8539234">true</span><span class="op" id="8539238">}</span><span class="op" id="8539239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539242">{</span><span class="string" id="8539243">&#34;-.1&#34;</span><span class="op" id="8539248">,</span>&nbsp;<span class="string" id="8539250">&#34;-1/10&#34;</span><span class="op" id="8539257">,</span>&nbsp;<span class="ident" id="8539259">true</span><span class="op" id="8539263">}</span><span class="op" id="8539264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539267">{</span><span class="string" id="8539268">&#34;2/4&#34;</span><span class="op" id="8539273">,</span>&nbsp;<span class="string" id="8539275">&#34;1/2&#34;</span><span class="op" id="8539280">,</span>&nbsp;<span class="ident" id="8539282">true</span><span class="op" id="8539286">}</span><span class="op" id="8539287">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539290">{</span><span class="string" id="8539291">&#34;.25&#34;</span><span class="op" id="8539296">,</span>&nbsp;<span class="string" id="8539298">&#34;1/4&#34;</span><span class="op" id="8539303">,</span>&nbsp;<span class="ident" id="8539305">true</span><span class="op" id="8539309">}</span><span class="op" id="8539310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539313">{</span><span class="string" id="8539314">&#34;-1/5&#34;</span><span class="op" id="8539320">,</span>&nbsp;<span class="string" id="8539322">&#34;-1/5&#34;</span><span class="op" id="8539328">,</span>&nbsp;<span class="ident" id="8539330">true</span><span class="op" id="8539334">}</span><span class="op" id="8539335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539338">{</span><span class="string" id="8539339">&#34;8129567.7690E14&#34;</span><span class="op" id="8539356">,</span>&nbsp;<span class="string" id="8539358">&#34;812956776900000000000&#34;</span><span class="op" id="8539381">,</span>&nbsp;<span class="ident" id="8539383">true</span><span class="op" id="8539387">}</span><span class="op" id="8539388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539391">{</span><span class="string" id="8539392">&#34;78189e+4&#34;</span><span class="op" id="8539402">,</span>&nbsp;<span class="string" id="8539404">&#34;781890000&#34;</span><span class="op" id="8539415">,</span>&nbsp;<span class="ident" id="8539417">true</span><span class="op" id="8539421">}</span><span class="op" id="8539422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539425">{</span><span class="string" id="8539426">&#34;553019.8935e+8&#34;</span><span class="op" id="8539442">,</span>&nbsp;<span class="string" id="8539444">&#34;55301989350000&#34;</span><span class="op" id="8539460">,</span>&nbsp;<span class="ident" id="8539462">true</span><span class="op" id="8539466">}</span><span class="op" id="8539467">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539470">{</span><span class="string" id="8539471">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="8539506">,</span>&nbsp;<span class="string" id="8539508">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="8539551">,</span>&nbsp;<span class="ident" id="8539553">true</span><span class="op" id="8539557">}</span><span class="op" id="8539558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539561">{</span><span class="string" id="8539562">&#34;9877861857500000E-7&#34;</span><span class="op" id="8539583">,</span>&nbsp;<span class="string" id="8539585">&#34;3951144743/4&#34;</span><span class="op" id="8539599">,</span>&nbsp;<span class="ident" id="8539601">true</span><span class="op" id="8539605">}</span><span class="op" id="8539606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539609">{</span><span class="string" id="8539610">&#34;2169378.417e-3&#34;</span><span class="op" id="8539626">,</span>&nbsp;<span class="string" id="8539628">&#34;2169378417/1000000&#34;</span><span class="op" id="8539648">,</span>&nbsp;<span class="ident" id="8539650">true</span><span class="op" id="8539654">}</span><span class="op" id="8539655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539658">{</span><span class="string" id="8539659">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="8539697">,</span>&nbsp;<span class="string" id="8539699">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="8539737">,</span>&nbsp;<span class="ident" id="8539739">true</span><span class="op" id="8539743">}</span><span class="op" id="8539744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539747">{</span><span class="string" id="8539748">&#34;53/70893980658822810696&#34;</span><span class="op" id="8539773">,</span>&nbsp;<span class="string" id="8539775">&#34;53/70893980658822810696&#34;</span><span class="op" id="8539800">,</span>&nbsp;<span class="ident" id="8539802">true</span><span class="op" id="8539806">}</span><span class="op" id="8539807">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539810">{</span><span class="string" id="8539811">&#34;106/141787961317645621392&#34;</span><span class="op" id="8539838">,</span>&nbsp;<span class="string" id="8539840">&#34;53/70893980658822810696&#34;</span><span class="op" id="8539865">,</span>&nbsp;<span class="ident" id="8539867">true</span><span class="op" id="8539871">}</span><span class="op" id="8539872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539875">{</span><span class="string" id="8539876">&#34;204211327800791583.81095&#34;</span><span class="op" id="8539902">,</span>&nbsp;<span class="string" id="8539904">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="8539934">,</span>&nbsp;<span class="ident" id="8539936">true</span><span class="op" id="8539940">}</span><span class="op" id="8539941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8539944">{</span><span class="ident" id="8539945">in</span><span class="op" id="8539947">:</span>&nbsp;<span class="string" id="8539949">&#34;1/0&#34;</span><span class="op" id="8539954">,</span>&nbsp;<span class="ident" id="8539956">ok</span><span class="op" id="8539958">:</span>&nbsp;<span class="ident" id="8539960">false</span><span class="op" id="8539965">}</span><span class="op" id="8539966">,</span><br>
<span class="lineno"></span><span class="op" id="8539968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="8539971">func</span>&nbsp;<span class="ident" id="8539976">TestRatSetString</span><span class="op" id="8539992">(</span><span class="ident" id="8539993">t</span>&nbsp;<span class="op" id="8539995">*</span><span class="ident" id="8539996">testing</span><span class="op" id="8540003">.</span><span class="ident" id="8540004">T</span><span class="op" id="8540005">)</span>&nbsp;<span class="op" id="8540007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8540010">for</span>&nbsp;<span class="ident" id="8540014">i</span><span class="op" id="8540015">,</span>&nbsp;<span class="ident" id="8540017">test</span>&nbsp;<span class="op" id="8540022">:=</span>&nbsp;<span class="keyword" id="8540025">range</span>&nbsp;<span class="ident" id="8540031">setStringTests</span>&nbsp;<span class="op" id="8540046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540050">x</span><span class="op" id="8540051">,</span>&nbsp;<span class="ident" id="8540053">ok</span>&nbsp;<span class="op" id="8540056">:=</span>&nbsp;<span class="builtinfunc" id="8540059">new</span><span class="op" id="8540062">(</span><span class="ident" id="8540063">Rat</span><span class="op" id="8540066">)</span><span class="op" id="8540067">.</span><span class="ident" id="8540068">SetString</span><span class="op" id="8540077">(</span><span class="ident" id="8540078">test</span><span class="op" id="8540082">.</span><span class="ident" id="8540083">in</span><span class="op" id="8540085">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8540090">if</span>&nbsp;<span class="ident" id="8540093">ok</span>&nbsp;<span class="op" id="8540096">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8540101">if</span>&nbsp;<span class="op" id="8540104">!</span><span class="ident" id="8540105">test</span><span class="op" id="8540109">.</span><span class="ident" id="8540110">ok</span>&nbsp;<span class="op" id="8540113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540119">t</span><span class="op" id="8540120">.</span><span class="ident" id="8540121">Errorf</span><span class="op" id="8540127">(</span><span class="string" id="8540128">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="8540164">,</span>&nbsp;<span class="ident" id="8540166">i</span><span class="op" id="8540167">,</span>&nbsp;<span class="ident" id="8540169">test</span><span class="op" id="8540173">.</span><span class="ident" id="8540174">in</span><span class="op" id="8540176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540181">}</span>&nbsp;<span class="keyword" id="8540183">else</span>&nbsp;<span class="keyword" id="8540188">if</span>&nbsp;<span class="ident" id="8540191">x</span><span class="op" id="8540192">.</span><span class="ident" id="8540193">RatString</span><span class="op" id="8540202">(</span><span class="op" id="8540203">)</span>&nbsp;<span class="op" id="8540205">!=</span>&nbsp;<span class="ident" id="8540208">test</span><span class="op" id="8540212">.</span><span class="ident" id="8540213">out</span>&nbsp;<span class="op" id="8540217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540223">t</span><span class="op" id="8540224">.</span><span class="ident" id="8540225">Errorf</span><span class="op" id="8540231">(</span><span class="string" id="8540232">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8540266">,</span>&nbsp;<span class="ident" id="8540268">i</span><span class="op" id="8540269">,</span>&nbsp;<span class="ident" id="8540271">test</span><span class="op" id="8540275">.</span><span class="ident" id="8540276">in</span><span class="op" id="8540278">,</span>&nbsp;<span class="ident" id="8540280">x</span><span class="op" id="8540281">.</span><span class="ident" id="8540282">RatString</span><span class="op" id="8540291">(</span><span class="op" id="8540292">)</span><span class="op" id="8540293">,</span>&nbsp;<span class="ident" id="8540295">test</span><span class="op" id="8540299">.</span><span class="ident" id="8540300">out</span><span class="op" id="8540303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540308">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540312">}</span>&nbsp;<span class="keyword" id="8540314">else</span>&nbsp;<span class="keyword" id="8540319">if</span>&nbsp;<span class="ident" id="8540322">x</span>&nbsp;<span class="op" id="8540324">!=</span>&nbsp;<span class="ident" id="8540327">nil</span>&nbsp;<span class="op" id="8540331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540336">t</span><span class="op" id="8540337">.</span><span class="ident" id="8540338">Errorf</span><span class="op" id="8540344">(</span><span class="string" id="8540345">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="8540380">,</span>&nbsp;<span class="ident" id="8540382">i</span><span class="op" id="8540383">,</span>&nbsp;<span class="ident" id="8540385">test</span><span class="op" id="8540389">.</span><span class="ident" id="8540390">in</span><span class="op" id="8540392">,</span>&nbsp;<span class="ident" id="8540394">x</span><span class="op" id="8540395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540402">}</span><br>
<span class="lineno"></span><span class="op" id="8540404">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="8540407">func</span>&nbsp;<span class="ident" id="8540412">TestRatScan</span><span class="op" id="8540423">(</span><span class="ident" id="8540424">t</span>&nbsp;<span class="op" id="8540426">*</span><span class="ident" id="8540427">testing</span><span class="op" id="8540434">.</span><span class="ident" id="8540435">T</span><span class="op" id="8540436">)</span>&nbsp;<span class="op" id="8540438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8540441">var</span>&nbsp;<span class="ident" id="8540445">buf</span>&nbsp;<span class="ident" id="8540449">bytes</span><span class="op" id="8540454">.</span><span class="ident" id="8540455">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8540463">for</span>&nbsp;<span class="ident" id="8540467">i</span><span class="op" id="8540468">,</span>&nbsp;<span class="ident" id="8540470">test</span>&nbsp;<span class="op" id="8540475">:=</span>&nbsp;<span class="keyword" id="8540478">range</span>&nbsp;<span class="ident" id="8540484">setStringTests</span>&nbsp;<span class="op" id="8540499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540503">x</span>&nbsp;<span class="op" id="8540505">:=</span>&nbsp;<span class="builtinfunc" id="8540508">new</span><span class="op" id="8540511">(</span><span class="ident" id="8540512">Rat</span><span class="op" id="8540515">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540519">buf</span><span class="op" id="8540522">.</span><span class="ident" id="8540523">Reset</span><span class="op" id="8540528">(</span><span class="op" id="8540529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540533">buf</span><span class="op" id="8540536">.</span><span class="ident" id="8540537">WriteString</span><span class="op" id="8540548">(</span><span class="ident" id="8540549">test</span><span class="op" id="8540553">.</span><span class="ident" id="8540554">in</span><span class="op" id="8540556">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540561">_</span><span class="op" id="8540562">,</span>&nbsp;<span class="ident" id="8540564">err</span>&nbsp;<span class="op" id="8540568">:=</span>&nbsp;<span class="ident" id="8540571">fmt</span><span class="op" id="8540574">.</span><span class="ident" id="8540575">Fscanf</span><span class="op" id="8540581">(</span><span class="op" id="8540582">&amp;</span><span class="ident" id="8540583">buf</span><span class="op" id="8540586">,</span>&nbsp;<span class="string" id="8540588">&#34;%v&#34;</span><span class="op" id="8540592">,</span>&nbsp;<span class="ident" id="8540594">x</span><span class="op" id="8540595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8540599">if</span>&nbsp;<span class="ident" id="8540602">err</span>&nbsp;<span class="op" id="8540606">==</span>&nbsp;<span class="ident" id="8540609">nil</span>&nbsp;<span class="op" id="8540613">!=</span>&nbsp;<span class="ident" id="8540616">test</span><span class="op" id="8540620">.</span><span class="ident" id="8540621">ok</span>&nbsp;<span class="op" id="8540624">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8540629">if</span>&nbsp;<span class="ident" id="8540632">test</span><span class="op" id="8540636">.</span><span class="ident" id="8540637">ok</span>&nbsp;<span class="op" id="8540640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540646">t</span><span class="op" id="8540647">.</span><span class="ident" id="8540648">Errorf</span><span class="op" id="8540654">(</span><span class="string" id="8540655">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8540670">,</span>&nbsp;<span class="ident" id="8540672">i</span><span class="op" id="8540673">,</span>&nbsp;<span class="ident" id="8540675">err</span><span class="op" id="8540678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540683">}</span>&nbsp;<span class="keyword" id="8540685">else</span>&nbsp;<span class="op" id="8540690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540696">t</span><span class="op" id="8540697">.</span><span class="ident" id="8540698">Errorf</span><span class="op" id="8540704">(</span><span class="string" id="8540705">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="8540725">,</span>&nbsp;<span class="ident" id="8540727">i</span><span class="op" id="8540728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540733">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8540738">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8540753">if</span>&nbsp;<span class="ident" id="8540756">err</span>&nbsp;<span class="op" id="8540760">==</span>&nbsp;<span class="ident" id="8540763">nil</span>&nbsp;<span class="op" id="8540767">&amp;&amp;</span>&nbsp;<span class="ident" id="8540770">x</span><span class="op" id="8540771">.</span><span class="ident" id="8540772">RatString</span><span class="op" id="8540781">(</span><span class="op" id="8540782">)</span>&nbsp;<span class="op" id="8540784">!=</span>&nbsp;<span class="ident" id="8540787">test</span><span class="op" id="8540791">.</span><span class="ident" id="8540792">out</span>&nbsp;<span class="op" id="8540796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540801">t</span><span class="op" id="8540802">.</span><span class="ident" id="8540803">Errorf</span><span class="op" id="8540809">(</span><span class="string" id="8540810">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8540830">,</span>&nbsp;<span class="ident" id="8540832">i</span><span class="op" id="8540833">,</span>&nbsp;<span class="ident" id="8540835">x</span><span class="op" id="8540836">.</span><span class="ident" id="8540837">RatString</span><span class="op" id="8540846">(</span><span class="op" id="8540847">)</span><span class="op" id="8540848">,</span>&nbsp;<span class="ident" id="8540850">test</span><span class="op" id="8540854">.</span><span class="ident" id="8540855">out</span><span class="op" id="8540858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540862">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540865">}</span><br>
<span class="lineno"></span><span class="op" id="8540867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8540870">var</span>&nbsp;<span class="ident" id="8540874">floatStringTests</span>&nbsp;<span class="op" id="8540891">=</span>&nbsp;<span class="op" id="8540893">[</span><span class="op" id="8540894">]</span><span class="keyword" id="8540895">struct</span>&nbsp;<span class="op" id="8540902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540905">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8540910">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540918">prec</span>&nbsp;<span class="builtintype" id="8540923">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8540928">out</span>&nbsp;&nbsp;<span class="builtintype" id="8540933">string</span><br>
<span class="lineno"></span><span class="op" id="8540940">}</span><span class="op" id="8540941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540944">{</span><span class="string" id="8540945">&#34;0&#34;</span><span class="op" id="8540948">,</span>&nbsp;<span class="num" id="8540950">0</span><span class="op" id="8540951">,</span>&nbsp;<span class="string" id="8540953">&#34;0&#34;</span><span class="op" id="8540956">}</span><span class="op" id="8540957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540960">{</span><span class="string" id="8540961">&#34;0&#34;</span><span class="op" id="8540964">,</span>&nbsp;<span class="num" id="8540966">4</span><span class="op" id="8540967">,</span>&nbsp;<span class="string" id="8540969">&#34;0.0000&#34;</span><span class="op" id="8540977">}</span><span class="op" id="8540978">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540981">{</span><span class="string" id="8540982">&#34;1&#34;</span><span class="op" id="8540985">,</span>&nbsp;<span class="num" id="8540987">0</span><span class="op" id="8540988">,</span>&nbsp;<span class="string" id="8540990">&#34;1&#34;</span><span class="op" id="8540993">}</span><span class="op" id="8540994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8540997">{</span><span class="string" id="8540998">&#34;1&#34;</span><span class="op" id="8541001">,</span>&nbsp;<span class="num" id="8541003">2</span><span class="op" id="8541004">,</span>&nbsp;<span class="string" id="8541006">&#34;1.00&#34;</span><span class="op" id="8541012">}</span><span class="op" id="8541013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541016">{</span><span class="string" id="8541017">&#34;-1&#34;</span><span class="op" id="8541021">,</span>&nbsp;<span class="num" id="8541023">0</span><span class="op" id="8541024">,</span>&nbsp;<span class="string" id="8541026">&#34;-1&#34;</span><span class="op" id="8541030">}</span><span class="op" id="8541031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541034">{</span><span class="string" id="8541035">&#34;.25&#34;</span><span class="op" id="8541040">,</span>&nbsp;<span class="num" id="8541042">2</span><span class="op" id="8541043">,</span>&nbsp;<span class="string" id="8541045">&#34;0.25&#34;</span><span class="op" id="8541051">}</span><span class="op" id="8541052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541055">{</span><span class="string" id="8541056">&#34;.25&#34;</span><span class="op" id="8541061">,</span>&nbsp;<span class="num" id="8541063">1</span><span class="op" id="8541064">,</span>&nbsp;<span class="string" id="8541066">&#34;0.3&#34;</span><span class="op" id="8541071">}</span><span class="op" id="8541072">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541075">{</span><span class="string" id="8541076">&#34;.25&#34;</span><span class="op" id="8541081">,</span>&nbsp;<span class="num" id="8541083">3</span><span class="op" id="8541084">,</span>&nbsp;<span class="string" id="8541086">&#34;0.250&#34;</span><span class="op" id="8541093">}</span><span class="op" id="8541094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541097">{</span><span class="string" id="8541098">&#34;-1/3&#34;</span><span class="op" id="8541104">,</span>&nbsp;<span class="num" id="8541106">3</span><span class="op" id="8541107">,</span>&nbsp;<span class="string" id="8541109">&#34;-0.333&#34;</span><span class="op" id="8541117">}</span><span class="op" id="8541118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541121">{</span><span class="string" id="8541122">&#34;-2/3&#34;</span><span class="op" id="8541128">,</span>&nbsp;<span class="num" id="8541130">4</span><span class="op" id="8541131">,</span>&nbsp;<span class="string" id="8541133">&#34;-0.6667&#34;</span><span class="op" id="8541142">}</span><span class="op" id="8541143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541146">{</span><span class="string" id="8541147">&#34;0.96&#34;</span><span class="op" id="8541153">,</span>&nbsp;<span class="num" id="8541155">1</span><span class="op" id="8541156">,</span>&nbsp;<span class="string" id="8541158">&#34;1.0&#34;</span><span class="op" id="8541163">}</span><span class="op" id="8541164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541167">{</span><span class="string" id="8541168">&#34;0.999&#34;</span><span class="op" id="8541175">,</span>&nbsp;<span class="num" id="8541177">2</span><span class="op" id="8541178">,</span>&nbsp;<span class="string" id="8541180">&#34;1.00&#34;</span><span class="op" id="8541186">}</span><span class="op" id="8541187">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541190">{</span><span class="string" id="8541191">&#34;0.9&#34;</span><span class="op" id="8541196">,</span>&nbsp;<span class="num" id="8541198">0</span><span class="op" id="8541199">,</span>&nbsp;<span class="string" id="8541201">&#34;1&#34;</span><span class="op" id="8541204">}</span><span class="op" id="8541205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541208">{</span><span class="string" id="8541209">&#34;.25&#34;</span><span class="op" id="8541214">,</span>&nbsp;<span class="op" id="8541216">-</span><span class="num" id="8541217">1</span><span class="op" id="8541218">,</span>&nbsp;<span class="string" id="8541220">&#34;0&#34;</span><span class="op" id="8541223">}</span><span class="op" id="8541224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541227">{</span><span class="string" id="8541228">&#34;.55&#34;</span><span class="op" id="8541233">,</span>&nbsp;<span class="op" id="8541235">-</span><span class="num" id="8541236">1</span><span class="op" id="8541237">,</span>&nbsp;<span class="string" id="8541239">&#34;1&#34;</span><span class="op" id="8541242">}</span><span class="op" id="8541243">,</span><br>
<span class="lineno"></span><span class="op" id="8541245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="8541248">func</span>&nbsp;<span class="ident" id="8541253">TestFloatString</span><span class="op" id="8541268">(</span><span class="ident" id="8541269">t</span>&nbsp;<span class="op" id="8541271">*</span><span class="ident" id="8541272">testing</span><span class="op" id="8541279">.</span><span class="ident" id="8541280">T</span><span class="op" id="8541281">)</span>&nbsp;<span class="op" id="8541283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8541286">for</span>&nbsp;<span class="ident" id="8541290">i</span><span class="op" id="8541291">,</span>&nbsp;<span class="ident" id="8541293">test</span>&nbsp;<span class="op" id="8541298">:=</span>&nbsp;<span class="keyword" id="8541301">range</span>&nbsp;<span class="ident" id="8541307">floatStringTests</span>&nbsp;<span class="op" id="8541324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8541328">x</span><span class="op" id="8541329">,</span>&nbsp;<span class="ident" id="8541331">_</span>&nbsp;<span class="op" id="8541333">:=</span>&nbsp;<span class="builtinfunc" id="8541336">new</span><span class="op" id="8541339">(</span><span class="ident" id="8541340">Rat</span><span class="op" id="8541343">)</span><span class="op" id="8541344">.</span><span class="ident" id="8541345">SetString</span><span class="op" id="8541354">(</span><span class="ident" id="8541355">test</span><span class="op" id="8541359">.</span><span class="ident" id="8541360">in</span><span class="op" id="8541362">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8541367">if</span>&nbsp;<span class="ident" id="8541370">x</span><span class="op" id="8541371">.</span><span class="ident" id="8541372">FloatString</span><span class="op" id="8541383">(</span><span class="ident" id="8541384">test</span><span class="op" id="8541388">.</span><span class="ident" id="8541389">prec</span><span class="op" id="8541393">)</span>&nbsp;<span class="op" id="8541395">!=</span>&nbsp;<span class="ident" id="8541398">test</span><span class="op" id="8541402">.</span><span class="ident" id="8541403">out</span>&nbsp;<span class="op" id="8541407">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8541412">t</span><span class="op" id="8541413">.</span><span class="ident" id="8541414">Errorf</span><span class="op" id="8541420">(</span><span class="string" id="8541421">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8541441">,</span>&nbsp;<span class="ident" id="8541443">i</span><span class="op" id="8541444">,</span>&nbsp;<span class="ident" id="8541446">x</span><span class="op" id="8541447">.</span><span class="ident" id="8541448">FloatString</span><span class="op" id="8541459">(</span><span class="ident" id="8541460">test</span><span class="op" id="8541464">.</span><span class="ident" id="8541465">prec</span><span class="op" id="8541469">)</span><span class="op" id="8541470">,</span>&nbsp;<span class="ident" id="8541472">test</span><span class="op" id="8541476">.</span><span class="ident" id="8541477">out</span><span class="op" id="8541480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541487">}</span><br>
<span class="lineno"></span><span class="op" id="8541489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="8541492">func</span>&nbsp;<span class="ident" id="8541497">TestRatSign</span><span class="op" id="8541508">(</span><span class="ident" id="8541509">t</span>&nbsp;<span class="op" id="8541511">*</span><span class="ident" id="8541512">testing</span><span class="op" id="8541519">.</span><span class="ident" id="8541520">T</span><span class="op" id="8541521">)</span>&nbsp;<span class="op" id="8541523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8541526">zero</span>&nbsp;<span class="op" id="8541531">:=</span>&nbsp;<span class="ident" id="8541534">NewRat</span><span class="op" id="8541540">(</span><span class="num" id="8541541">0</span><span class="op" id="8541542">,</span>&nbsp;<span class="num" id="8541544">1</span><span class="op" id="8541545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8541548">for</span>&nbsp;<span class="ident" id="8541552">_</span><span class="op" id="8541553">,</span>&nbsp;<span class="ident" id="8541555">a</span>&nbsp;<span class="op" id="8541557">:=</span>&nbsp;<span class="keyword" id="8541560">range</span>&nbsp;<span class="ident" id="8541566">setStringTests</span>&nbsp;<span class="op" id="8541581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8541585">x</span><span class="op" id="8541586">,</span>&nbsp;<span class="ident" id="8541588">ok</span>&nbsp;<span class="op" id="8541591">:=</span>&nbsp;<span class="builtinfunc" id="8541594">new</span><span class="op" id="8541597">(</span><span class="ident" id="8541598">Rat</span><span class="op" id="8541601">)</span><span class="op" id="8541602">.</span><span class="ident" id="8541603">SetString</span><span class="op" id="8541612">(</span><span class="ident" id="8541613">a</span><span class="op" id="8541614">.</span><span class="ident" id="8541615">in</span><span class="op" id="8541617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8541621">if</span>&nbsp;<span class="op" id="8541624">!</span><span class="ident" id="8541625">ok</span>&nbsp;<span class="op" id="8541628">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8541633">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8541648">s</span>&nbsp;<span class="op" id="8541650">:=</span>&nbsp;<span class="ident" id="8541653">x</span><span class="op" id="8541654">.</span><span class="ident" id="8541655">Sign</span><span class="op" id="8541659">(</span><span class="op" id="8541660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8541664">e</span>&nbsp;<span class="op" id="8541666">:=</span>&nbsp;<span class="ident" id="8541669">x</span><span class="op" id="8541670">.</span><span class="ident" id="8541671">Cmp</span><span class="op" id="8541674">(</span><span class="ident" id="8541675">zero</span><span class="op" id="8541679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8541683">if</span>&nbsp;<span class="ident" id="8541686">s</span>&nbsp;<span class="op" id="8541688">!=</span>&nbsp;<span class="ident" id="8541691">e</span>&nbsp;<span class="op" id="8541693">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8541698">t</span><span class="op" id="8541699">.</span><span class="ident" id="8541700">Errorf</span><span class="op" id="8541706">(</span><span class="string" id="8541707">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="8541735">,</span>&nbsp;<span class="ident" id="8541737">s</span><span class="op" id="8541738">,</span>&nbsp;<span class="ident" id="8541740">e</span><span class="op" id="8541741">,</span>&nbsp;<span class="op" id="8541743">&amp;</span><span class="ident" id="8541744">x</span><span class="op" id="8541745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541752">}</span><br>
<span class="lineno"></span><span class="op" id="8541754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="8541757">var</span>&nbsp;<span class="ident" id="8541761">ratCmpTests</span>&nbsp;<span class="op" id="8541773">=</span>&nbsp;<span class="op" id="8541775">[</span><span class="op" id="8541776">]</span><span class="keyword" id="8541777">struct</span>&nbsp;<span class="op" id="8541784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8541787">rat1</span><span class="op" id="8541791">,</span>&nbsp;<span class="ident" id="8541793">rat2</span>&nbsp;<span class="builtintype" id="8541798">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8541806">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8541817">int</span><br>
<span class="lineno"></span><span class="op" id="8541821">}</span><span class="op" id="8541822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541825">{</span><span class="string" id="8541826">&#34;0&#34;</span><span class="op" id="8541829">,</span>&nbsp;<span class="string" id="8541831">&#34;0/1&#34;</span><span class="op" id="8541836">,</span>&nbsp;<span class="num" id="8541838">0</span><span class="op" id="8541839">}</span><span class="op" id="8541840">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541843">{</span><span class="string" id="8541844">&#34;1/1&#34;</span><span class="op" id="8541849">,</span>&nbsp;<span class="string" id="8541851">&#34;1&#34;</span><span class="op" id="8541854">,</span>&nbsp;<span class="num" id="8541856">0</span><span class="op" id="8541857">}</span><span class="op" id="8541858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541861">{</span><span class="string" id="8541862">&#34;-1&#34;</span><span class="op" id="8541866">,</span>&nbsp;<span class="string" id="8541868">&#34;-2/2&#34;</span><span class="op" id="8541874">,</span>&nbsp;<span class="num" id="8541876">0</span><span class="op" id="8541877">}</span><span class="op" id="8541878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541881">{</span><span class="string" id="8541882">&#34;1&#34;</span><span class="op" id="8541885">,</span>&nbsp;<span class="string" id="8541887">&#34;0&#34;</span><span class="op" id="8541890">,</span>&nbsp;<span class="num" id="8541892">1</span><span class="op" id="8541893">}</span><span class="op" id="8541894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541897">{</span><span class="string" id="8541898">&#34;0/1&#34;</span><span class="op" id="8541903">,</span>&nbsp;<span class="string" id="8541905">&#34;1/1&#34;</span><span class="op" id="8541910">,</span>&nbsp;<span class="op" id="8541912">-</span><span class="num" id="8541913">1</span><span class="op" id="8541914">}</span><span class="op" id="8541915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541918">{</span><span class="string" id="8541919">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="8541946">,</span>&nbsp;<span class="string" id="8541948">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="8541975">,</span>&nbsp;<span class="op" id="8541977">-</span><span class="num" id="8541978">1</span><span class="op" id="8541979">}</span><span class="op" id="8541980">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8541983">{</span><span class="string" id="8541984">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="8542017">,</span>&nbsp;<span class="string" id="8542019">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="8542052">,</span>&nbsp;<span class="op" id="8542054">-</span><span class="num" id="8542055">1</span><span class="op" id="8542056">}</span><span class="op" id="8542057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542060">{</span><span class="string" id="8542061">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="8542098">,</span>&nbsp;<span class="string" id="8542100">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="8542136">,</span>&nbsp;<span class="op" id="8542138">-</span><span class="num" id="8542139">1</span><span class="op" id="8542140">}</span><span class="op" id="8542141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542144">{</span><span class="string" id="8542145">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="8542181">,</span>&nbsp;<span class="string" id="8542183">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="8542220">,</span>&nbsp;<span class="num" id="8542222">0</span><span class="op" id="8542223">}</span><span class="op" id="8542224">,</span><br>
<span class="lineno"></span><span class="op" id="8542226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="8542229">func</span>&nbsp;<span class="ident" id="8542234">TestRatCmp</span><span class="op" id="8542244">(</span><span class="ident" id="8542245">t</span>&nbsp;<span class="op" id="8542247">*</span><span class="ident" id="8542248">testing</span><span class="op" id="8542255">.</span><span class="ident" id="8542256">T</span><span class="op" id="8542257">)</span>&nbsp;<span class="op" id="8542259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542262">for</span>&nbsp;<span class="ident" id="8542266">i</span><span class="op" id="8542267">,</span>&nbsp;<span class="ident" id="8542269">test</span>&nbsp;<span class="op" id="8542274">:=</span>&nbsp;<span class="keyword" id="8542277">range</span>&nbsp;<span class="ident" id="8542283">ratCmpTests</span>&nbsp;<span class="op" id="8542295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542299">x</span><span class="op" id="8542300">,</span>&nbsp;<span class="ident" id="8542302">_</span>&nbsp;<span class="op" id="8542304">:=</span>&nbsp;<span class="builtinfunc" id="8542307">new</span><span class="op" id="8542310">(</span><span class="ident" id="8542311">Rat</span><span class="op" id="8542314">)</span><span class="op" id="8542315">.</span><span class="ident" id="8542316">SetString</span><span class="op" id="8542325">(</span><span class="ident" id="8542326">test</span><span class="op" id="8542330">.</span><span class="ident" id="8542331">rat1</span><span class="op" id="8542335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542339">y</span><span class="op" id="8542340">,</span>&nbsp;<span class="ident" id="8542342">_</span>&nbsp;<span class="op" id="8542344">:=</span>&nbsp;<span class="builtinfunc" id="8542347">new</span><span class="op" id="8542350">(</span><span class="ident" id="8542351">Rat</span><span class="op" id="8542354">)</span><span class="op" id="8542355">.</span><span class="ident" id="8542356">SetString</span><span class="op" id="8542365">(</span><span class="ident" id="8542366">test</span><span class="op" id="8542370">.</span><span class="ident" id="8542371">rat2</span><span class="op" id="8542375">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542380">out</span>&nbsp;<span class="op" id="8542384">:=</span>&nbsp;<span class="ident" id="8542387">x</span><span class="op" id="8542388">.</span><span class="ident" id="8542389">Cmp</span><span class="op" id="8542392">(</span><span class="ident" id="8542393">y</span><span class="op" id="8542394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542398">if</span>&nbsp;<span class="ident" id="8542401">out</span>&nbsp;<span class="op" id="8542405">!=</span>&nbsp;<span class="ident" id="8542408">test</span><span class="op" id="8542412">.</span><span class="ident" id="8542413">out</span>&nbsp;<span class="op" id="8542417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542422">t</span><span class="op" id="8542423">.</span><span class="ident" id="8542424">Errorf</span><span class="op" id="8542430">(</span><span class="string" id="8542431">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8542458">,</span>&nbsp;<span class="ident" id="8542460">i</span><span class="op" id="8542461">,</span>&nbsp;<span class="ident" id="8542463">out</span><span class="op" id="8542466">,</span>&nbsp;<span class="ident" id="8542468">test</span><span class="op" id="8542472">.</span><span class="ident" id="8542473">out</span><span class="op" id="8542476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542483">}</span><br>
<span class="lineno">205</span><span class="op" id="8542485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8542488">func</span>&nbsp;<span class="ident" id="8542493">TestIsInt</span><span class="op" id="8542502">(</span><span class="ident" id="8542503">t</span>&nbsp;<span class="op" id="8542505">*</span><span class="ident" id="8542506">testing</span><span class="op" id="8542513">.</span><span class="ident" id="8542514">T</span><span class="op" id="8542515">)</span>&nbsp;<span class="op" id="8542517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542520">one</span>&nbsp;<span class="op" id="8542524">:=</span>&nbsp;<span class="ident" id="8542527">NewInt</span><span class="op" id="8542533">(</span><span class="num" id="8542534">1</span><span class="op" id="8542535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542538">for</span>&nbsp;<span class="ident" id="8542542">_</span><span class="op" id="8542543">,</span>&nbsp;<span class="ident" id="8542545">a</span>&nbsp;<span class="op" id="8542547">:=</span>&nbsp;<span class="keyword" id="8542550">range</span>&nbsp;<span class="ident" id="8542556">setStringTests</span>&nbsp;<span class="op" id="8542571">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542575">x</span><span class="op" id="8542576">,</span>&nbsp;<span class="ident" id="8542578">ok</span>&nbsp;<span class="op" id="8542581">:=</span>&nbsp;<span class="builtinfunc" id="8542584">new</span><span class="op" id="8542587">(</span><span class="ident" id="8542588">Rat</span><span class="op" id="8542591">)</span><span class="op" id="8542592">.</span><span class="ident" id="8542593">SetString</span><span class="op" id="8542602">(</span><span class="ident" id="8542603">a</span><span class="op" id="8542604">.</span><span class="ident" id="8542605">in</span><span class="op" id="8542607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542611">if</span>&nbsp;<span class="op" id="8542614">!</span><span class="ident" id="8542615">ok</span>&nbsp;<span class="op" id="8542618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542623">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542638">i</span>&nbsp;<span class="op" id="8542640">:=</span>&nbsp;<span class="ident" id="8542643">x</span><span class="op" id="8542644">.</span><span class="ident" id="8542645">IsInt</span><span class="op" id="8542650">(</span><span class="op" id="8542651">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542655">e</span>&nbsp;<span class="op" id="8542657">:=</span>&nbsp;<span class="ident" id="8542660">x</span><span class="op" id="8542661">.</span><span class="ident" id="8542662">Denom</span><span class="op" id="8542667">(</span><span class="op" id="8542668">)</span><span class="op" id="8542669">.</span><span class="ident" id="8542670">Cmp</span><span class="op" id="8542673">(</span><span class="ident" id="8542674">one</span><span class="op" id="8542677">)</span>&nbsp;<span class="op" id="8542679">==</span>&nbsp;<span class="num" id="8542682">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542686">if</span>&nbsp;<span class="ident" id="8542689">i</span>&nbsp;<span class="op" id="8542691">!=</span>&nbsp;<span class="ident" id="8542694">e</span>&nbsp;<span class="op" id="8542696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542701">t</span><span class="op" id="8542702">.</span><span class="ident" id="8542703">Errorf</span><span class="op" id="8542709">(</span><span class="string" id="8542710">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8542740">,</span>&nbsp;<span class="ident" id="8542742">x</span><span class="op" id="8542743">,</span>&nbsp;<span class="ident" id="8542745">i</span><span class="op" id="8542746">,</span>&nbsp;<span class="ident" id="8542748">e</span><span class="op" id="8542749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542756">}</span><br>
<span class="lineno">220</span><span class="op" id="8542758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8542761">func</span>&nbsp;<span class="ident" id="8542766">TestRatAbs</span><span class="op" id="8542776">(</span><span class="ident" id="8542777">t</span>&nbsp;<span class="op" id="8542779">*</span><span class="ident" id="8542780">testing</span><span class="op" id="8542787">.</span><span class="ident" id="8542788">T</span><span class="op" id="8542789">)</span>&nbsp;<span class="op" id="8542791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542794">zero</span>&nbsp;<span class="op" id="8542799">:=</span>&nbsp;<span class="builtinfunc" id="8542802">new</span><span class="op" id="8542805">(</span><span class="ident" id="8542806">Rat</span><span class="op" id="8542809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542812">for</span>&nbsp;<span class="ident" id="8542816">_</span><span class="op" id="8542817">,</span>&nbsp;<span class="ident" id="8542819">a</span>&nbsp;<span class="op" id="8542821">:=</span>&nbsp;<span class="keyword" id="8542824">range</span>&nbsp;<span class="ident" id="8542830">setStringTests</span>&nbsp;<span class="op" id="8542845">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542849">x</span><span class="op" id="8542850">,</span>&nbsp;<span class="ident" id="8542852">ok</span>&nbsp;<span class="op" id="8542855">:=</span>&nbsp;<span class="builtinfunc" id="8542858">new</span><span class="op" id="8542861">(</span><span class="ident" id="8542862">Rat</span><span class="op" id="8542865">)</span><span class="op" id="8542866">.</span><span class="ident" id="8542867">SetString</span><span class="op" id="8542876">(</span><span class="ident" id="8542877">a</span><span class="op" id="8542878">.</span><span class="ident" id="8542879">in</span><span class="op" id="8542881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542885">if</span>&nbsp;<span class="op" id="8542888">!</span><span class="ident" id="8542889">ok</span>&nbsp;<span class="op" id="8542892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542897">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542912">e</span>&nbsp;<span class="op" id="8542914">:=</span>&nbsp;<span class="builtinfunc" id="8542917">new</span><span class="op" id="8542920">(</span><span class="ident" id="8542921">Rat</span><span class="op" id="8542924">)</span><span class="op" id="8542925">.</span><span class="ident" id="8542926">Set</span><span class="op" id="8542929">(</span><span class="ident" id="8542930">x</span><span class="op" id="8542931">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8542935">if</span>&nbsp;<span class="ident" id="8542938">e</span><span class="op" id="8542939">.</span><span class="ident" id="8542940">Cmp</span><span class="op" id="8542943">(</span><span class="ident" id="8542944">zero</span><span class="op" id="8542948">)</span>&nbsp;<span class="op" id="8542950">&lt;</span>&nbsp;<span class="num" id="8542952">0</span>&nbsp;<span class="op" id="8542954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542959">e</span><span class="op" id="8542960">.</span><span class="ident" id="8542961">Sub</span><span class="op" id="8542964">(</span><span class="ident" id="8542965">zero</span><span class="op" id="8542969">,</span>&nbsp;<span class="ident" id="8542971">e</span><span class="op" id="8542972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8542976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8542980">z</span>&nbsp;<span class="op" id="8542982">:=</span>&nbsp;<span class="builtinfunc" id="8542985">new</span><span class="op" id="8542988">(</span><span class="ident" id="8542989">Rat</span><span class="op" id="8542992">)</span><span class="op" id="8542993">.</span><span class="ident" id="8542994">Abs</span><span class="op" id="8542997">(</span><span class="ident" id="8542998">x</span><span class="op" id="8542999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543003">if</span>&nbsp;<span class="ident" id="8543006">z</span><span class="op" id="8543007">.</span><span class="ident" id="8543008">Cmp</span><span class="op" id="8543011">(</span><span class="ident" id="8543012">e</span><span class="op" id="8543013">)</span>&nbsp;<span class="op" id="8543015">!=</span>&nbsp;<span class="num" id="8543018">0</span>&nbsp;<span class="op" id="8543020">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543025">t</span><span class="op" id="8543026">.</span><span class="ident" id="8543027">Errorf</span><span class="op" id="8543033">(</span><span class="string" id="8543034">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8543061">,</span>&nbsp;<span class="ident" id="8543063">x</span><span class="op" id="8543064">,</span>&nbsp;<span class="ident" id="8543066">z</span><span class="op" id="8543067">,</span>&nbsp;<span class="ident" id="8543069">e</span><span class="op" id="8543070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8543074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8543077">}</span><br>
<span class="lineno"></span><span class="op" id="8543079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8543082">func</span>&nbsp;<span class="ident" id="8543087">TestRatNeg</span><span class="op" id="8543097">(</span><span class="ident" id="8543098">t</span>&nbsp;<span class="op" id="8543100">*</span><span class="ident" id="8543101">testing</span><span class="op" id="8543108">.</span><span class="ident" id="8543109">T</span><span class="op" id="8543110">)</span>&nbsp;<span class="op" id="8543112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543115">zero</span>&nbsp;<span class="op" id="8543120">:=</span>&nbsp;<span class="builtinfunc" id="8543123">new</span><span class="op" id="8543126">(</span><span class="ident" id="8543127">Rat</span><span class="op" id="8543130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543133">for</span>&nbsp;<span class="ident" id="8543137">_</span><span class="op" id="8543138">,</span>&nbsp;<span class="ident" id="8543140">a</span>&nbsp;<span class="op" id="8543142">:=</span>&nbsp;<span class="keyword" id="8543145">range</span>&nbsp;<span class="ident" id="8543151">setStringTests</span>&nbsp;<span class="op" id="8543166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543170">x</span><span class="op" id="8543171">,</span>&nbsp;<span class="ident" id="8543173">ok</span>&nbsp;<span class="op" id="8543176">:=</span>&nbsp;<span class="builtinfunc" id="8543179">new</span><span class="op" id="8543182">(</span><span class="ident" id="8543183">Rat</span><span class="op" id="8543186">)</span><span class="op" id="8543187">.</span><span class="ident" id="8543188">SetString</span><span class="op" id="8543197">(</span><span class="ident" id="8543198">a</span><span class="op" id="8543199">.</span><span class="ident" id="8543200">in</span><span class="op" id="8543202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543206">if</span>&nbsp;<span class="op" id="8543209">!</span><span class="ident" id="8543210">ok</span>&nbsp;<span class="op" id="8543213">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543218">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8543229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543233">e</span>&nbsp;<span class="op" id="8543235">:=</span>&nbsp;<span class="builtinfunc" id="8543238">new</span><span class="op" id="8543241">(</span><span class="ident" id="8543242">Rat</span><span class="op" id="8543245">)</span><span class="op" id="8543246">.</span><span class="ident" id="8543247">Sub</span><span class="op" id="8543250">(</span><span class="ident" id="8543251">zero</span><span class="op" id="8543255">,</span>&nbsp;<span class="ident" id="8543257">x</span><span class="op" id="8543258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543262">z</span>&nbsp;<span class="op" id="8543264">:=</span>&nbsp;<span class="builtinfunc" id="8543267">new</span><span class="op" id="8543270">(</span><span class="ident" id="8543271">Rat</span><span class="op" id="8543274">)</span><span class="op" id="8543275">.</span><span class="ident" id="8543276">Neg</span><span class="op" id="8543279">(</span><span class="ident" id="8543280">x</span><span class="op" id="8543281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543285">if</span>&nbsp;<span class="ident" id="8543288">z</span><span class="op" id="8543289">.</span><span class="ident" id="8543290">Cmp</span><span class="op" id="8543293">(</span><span class="ident" id="8543294">e</span><span class="op" id="8543295">)</span>&nbsp;<span class="op" id="8543297">!=</span>&nbsp;<span class="num" id="8543300">0</span>&nbsp;<span class="op" id="8543302">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543307">t</span><span class="op" id="8543308">.</span><span class="ident" id="8543309">Errorf</span><span class="op" id="8543315">(</span><span class="string" id="8543316">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8543343">,</span>&nbsp;<span class="ident" id="8543345">x</span><span class="op" id="8543346">,</span>&nbsp;<span class="ident" id="8543348">z</span><span class="op" id="8543349">,</span>&nbsp;<span class="ident" id="8543351">e</span><span class="op" id="8543352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8543356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8543359">}</span><br>
<span class="lineno"></span><span class="op" id="8543361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="8543364">func</span>&nbsp;<span class="ident" id="8543369">TestRatInv</span><span class="op" id="8543379">(</span><span class="ident" id="8543380">t</span>&nbsp;<span class="op" id="8543382">*</span><span class="ident" id="8543383">testing</span><span class="op" id="8543390">.</span><span class="ident" id="8543391">T</span><span class="op" id="8543392">)</span>&nbsp;<span class="op" id="8543394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543397">zero</span>&nbsp;<span class="op" id="8543402">:=</span>&nbsp;<span class="builtinfunc" id="8543405">new</span><span class="op" id="8543408">(</span><span class="ident" id="8543409">Rat</span><span class="op" id="8543412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543415">for</span>&nbsp;<span class="ident" id="8543419">_</span><span class="op" id="8543420">,</span>&nbsp;<span class="ident" id="8543422">a</span>&nbsp;<span class="op" id="8543424">:=</span>&nbsp;<span class="keyword" id="8543427">range</span>&nbsp;<span class="ident" id="8543433">setStringTests</span>&nbsp;<span class="op" id="8543448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543452">x</span><span class="op" id="8543453">,</span>&nbsp;<span class="ident" id="8543455">ok</span>&nbsp;<span class="op" id="8543458">:=</span>&nbsp;<span class="builtinfunc" id="8543461">new</span><span class="op" id="8543464">(</span><span class="ident" id="8543465">Rat</span><span class="op" id="8543468">)</span><span class="op" id="8543469">.</span><span class="ident" id="8543470">SetString</span><span class="op" id="8543479">(</span><span class="ident" id="8543480">a</span><span class="op" id="8543481">.</span><span class="ident" id="8543482">in</span><span class="op" id="8543484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543488">if</span>&nbsp;<span class="op" id="8543491">!</span><span class="ident" id="8543492">ok</span>&nbsp;<span class="op" id="8543495">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543500">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8543511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543515">if</span>&nbsp;<span class="ident" id="8543518">x</span><span class="op" id="8543519">.</span><span class="ident" id="8543520">Cmp</span><span class="op" id="8543523">(</span><span class="ident" id="8543524">zero</span><span class="op" id="8543528">)</span>&nbsp;<span class="op" id="8543530">==</span>&nbsp;<span class="num" id="8543533">0</span>&nbsp;<span class="op" id="8543535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543540">continue</span>&nbsp;<span class="comment" id="8543549">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8543577">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543581">e</span>&nbsp;<span class="op" id="8543583">:=</span>&nbsp;<span class="builtinfunc" id="8543586">new</span><span class="op" id="8543589">(</span><span class="ident" id="8543590">Rat</span><span class="op" id="8543593">)</span><span class="op" id="8543594">.</span><span class="ident" id="8543595">SetFrac</span><span class="op" id="8543602">(</span><span class="ident" id="8543603">x</span><span class="op" id="8543604">.</span><span class="ident" id="8543605">Denom</span><span class="op" id="8543610">(</span><span class="op" id="8543611">)</span><span class="op" id="8543612">,</span>&nbsp;<span class="ident" id="8543614">x</span><span class="op" id="8543615">.</span><span class="ident" id="8543616">Num</span><span class="op" id="8543619">(</span><span class="op" id="8543620">)</span><span class="op" id="8543621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543625">z</span>&nbsp;<span class="op" id="8543627">:=</span>&nbsp;<span class="builtinfunc" id="8543630">new</span><span class="op" id="8543633">(</span><span class="ident" id="8543634">Rat</span><span class="op" id="8543637">)</span><span class="op" id="8543638">.</span><span class="ident" id="8543639">Inv</span><span class="op" id="8543642">(</span><span class="ident" id="8543643">x</span><span class="op" id="8543644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8543648">if</span>&nbsp;<span class="ident" id="8543651">z</span><span class="op" id="8543652">.</span><span class="ident" id="8543653">Cmp</span><span class="op" id="8543656">(</span><span class="ident" id="8543657">e</span><span class="op" id="8543658">)</span>&nbsp;<span class="op" id="8543660">!=</span>&nbsp;<span class="num" id="8543663">0</span>&nbsp;<span class="op" id="8543665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543670">t</span><span class="op" id="8543671">.</span><span class="ident" id="8543672">Errorf</span><span class="op" id="8543678">(</span><span class="string" id="8543679">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8543706">,</span>&nbsp;<span class="ident" id="8543708">x</span><span class="op" id="8543709">,</span>&nbsp;<span class="ident" id="8543711">z</span><span class="op" id="8543712">,</span>&nbsp;<span class="ident" id="8543714">e</span><span class="op" id="8543715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8543719">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8543722">}</span><br>
<span class="lineno"></span><span class="op" id="8543724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8543727">type</span>&nbsp;<span class="ident" id="8543732">ratBinFun</span>&nbsp;<span class="keyword" id="8543742">func</span><span class="op" id="8543746">(</span><span class="ident" id="8543747">z</span><span class="op" id="8543748">,</span>&nbsp;<span class="ident" id="8543750">x</span><span class="op" id="8543751">,</span>&nbsp;<span class="ident" id="8543753">y</span>&nbsp;<span class="op" id="8543755">*</span><span class="ident" id="8543756">Rat</span><span class="op" id="8543759">)</span>&nbsp;<span class="op" id="8543761">*</span><span class="ident" id="8543762">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="8543766">type</span>&nbsp;<span class="ident" id="8543771">ratBinArg</span>&nbsp;<span class="keyword" id="8543781">struct</span>&nbsp;<span class="op" id="8543788">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543791">x</span><span class="op" id="8543792">,</span>&nbsp;<span class="ident" id="8543794">y</span><span class="op" id="8543795">,</span>&nbsp;<span class="ident" id="8543797">z</span>&nbsp;<span class="builtintype" id="8543799">string</span><br>
<span class="lineno"></span><span class="op" id="8543806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8543809">func</span>&nbsp;<span class="ident" id="8543814">testRatBin</span><span class="op" id="8543824">(</span><span class="ident" id="8543825">t</span>&nbsp;<span class="op" id="8543827">*</span><span class="ident" id="8543828">testing</span><span class="op" id="8543835">.</span><span class="ident" id="8543836">T</span><span class="op" id="8543837">,</span>&nbsp;<span class="ident" id="8543839">i</span>&nbsp;<span class="builtintype" id="8543841">int</span><span class="op" id="8543844">,</span>&nbsp;<span class="ident" id="8543846">name</span>&nbsp;<span class="builtintype" id="8543851">string</span><span class="op" id="8543857">,</span>&nbsp;<span class="ident" id="8543859">f</span>&nbsp;<span class="ident" id="8543861">ratBinFun</span><span class="op" id="8543870">,</span>&nbsp;<span class="ident" id="8543872">a</span>&nbsp;<span class="ident" id="8543874">ratBinArg</span><span class="op" id="8543883">)</span>&nbsp;<span class="op" id="8543885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543888">x</span><span class="op" id="8543889">,</span>&nbsp;<span class="ident" id="8543891">_</span>&nbsp;<span class="op" id="8543893">:=</span>&nbsp;<span class="builtinfunc" id="8543896">new</span><span class="op" id="8543899">(</span><span class="ident" id="8543900">Rat</span><span class="op" id="8543903">)</span><span class="op" id="8543904">.</span><span class="ident" id="8543905">SetString</span><span class="op" id="8543914">(</span><span class="ident" id="8543915">a</span><span class="op" id="8543916">.</span><span class="ident" id="8543917">x</span><span class="op" id="8543918">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543921">y</span><span class="op" id="8543922">,</span>&nbsp;<span class="ident" id="8543924">_</span>&nbsp;<span class="op" id="8543926">:=</span>&nbsp;<span class="builtinfunc" id="8543929">new</span><span class="op" id="8543932">(</span><span class="ident" id="8543933">Rat</span><span class="op" id="8543936">)</span><span class="op" id="8543937">.</span><span class="ident" id="8543938">SetString</span><span class="op" id="8543947">(</span><span class="ident" id="8543948">a</span><span class="op" id="8543949">.</span><span class="ident" id="8543950">y</span><span class="op" id="8543951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543954">z</span><span class="op" id="8543955">,</span>&nbsp;<span class="ident" id="8543957">_</span>&nbsp;<span class="op" id="8543959">:=</span>&nbsp;<span class="builtinfunc" id="8543962">new</span><span class="op" id="8543965">(</span><span class="ident" id="8543966">Rat</span><span class="op" id="8543969">)</span><span class="op" id="8543970">.</span><span class="ident" id="8543971">SetString</span><span class="op" id="8543980">(</span><span class="ident" id="8543981">a</span><span class="op" id="8543982">.</span><span class="ident" id="8543983">z</span><span class="op" id="8543984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8543987">out</span>&nbsp;<span class="op" id="8543991">:=</span>&nbsp;<span class="ident" id="8543994">f</span><span class="op" id="8543995">(</span><span class="builtinfunc" id="8543996">new</span><span class="op" id="8543999">(</span><span class="ident" id="8544000">Rat</span><span class="op" id="8544003">)</span><span class="op" id="8544004">,</span>&nbsp;<span class="ident" id="8544006">x</span><span class="op" id="8544007">,</span>&nbsp;<span class="ident" id="8544009">y</span><span class="op" id="8544010">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8544014">if</span>&nbsp;<span class="ident" id="8544017">out</span><span class="op" id="8544020">.</span><span class="ident" id="8544021">Cmp</span><span class="op" id="8544024">(</span><span class="ident" id="8544025">z</span><span class="op" id="8544026">)</span>&nbsp;<span class="op" id="8544028">!=</span>&nbsp;<span class="num" id="8544031">0</span>&nbsp;<span class="op" id="8544033">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8544037">t</span><span class="op" id="8544038">.</span><span class="ident" id="8544039">Errorf</span><span class="op" id="8544045">(</span><span class="string" id="8544046">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8544069">,</span>&nbsp;<span class="ident" id="8544071">name</span><span class="op" id="8544075">,</span>&nbsp;<span class="ident" id="8544077">i</span><span class="op" id="8544078">,</span>&nbsp;<span class="ident" id="8544080">out</span><span class="op" id="8544083">,</span>&nbsp;<span class="ident" id="8544085">z</span><span class="op" id="8544086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544089">}</span><br>
<span class="lineno"></span><span class="op" id="8544091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8544094">var</span>&nbsp;<span class="ident" id="8544098">ratBinTests</span>&nbsp;<span class="op" id="8544110">=</span>&nbsp;<span class="op" id="8544112">[</span><span class="op" id="8544113">]</span><span class="keyword" id="8544114">struct</span>&nbsp;<span class="op" id="8544121">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8544124">x</span><span class="op" id="8544125">,</span>&nbsp;<span class="ident" id="8544127">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8544134">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8544142">sum</span><span class="op" id="8544145">,</span>&nbsp;<span class="ident" id="8544147">prod</span>&nbsp;<span class="builtintype" id="8544152">string</span><br>
<span class="lineno"></span><span class="op" id="8544159">}</span><span class="op" id="8544160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544163">{</span><span class="string" id="8544164">&#34;0&#34;</span><span class="op" id="8544167">,</span>&nbsp;<span class="string" id="8544169">&#34;0&#34;</span><span class="op" id="8544172">,</span>&nbsp;<span class="string" id="8544174">&#34;0&#34;</span><span class="op" id="8544177">,</span>&nbsp;<span class="string" id="8544179">&#34;0&#34;</span><span class="op" id="8544182">}</span><span class="op" id="8544183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544186">{</span><span class="string" id="8544187">&#34;0&#34;</span><span class="op" id="8544190">,</span>&nbsp;<span class="string" id="8544192">&#34;1&#34;</span><span class="op" id="8544195">,</span>&nbsp;<span class="string" id="8544197">&#34;1&#34;</span><span class="op" id="8544200">,</span>&nbsp;<span class="string" id="8544202">&#34;0&#34;</span><span class="op" id="8544205">}</span><span class="op" id="8544206">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544209">{</span><span class="string" id="8544210">&#34;-1&#34;</span><span class="op" id="8544214">,</span>&nbsp;<span class="string" id="8544216">&#34;0&#34;</span><span class="op" id="8544219">,</span>&nbsp;<span class="string" id="8544221">&#34;-1&#34;</span><span class="op" id="8544225">,</span>&nbsp;<span class="string" id="8544227">&#34;0&#34;</span><span class="op" id="8544230">}</span><span class="op" id="8544231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544234">{</span><span class="string" id="8544235">&#34;-1&#34;</span><span class="op" id="8544239">,</span>&nbsp;<span class="string" id="8544241">&#34;1&#34;</span><span class="op" id="8544244">,</span>&nbsp;<span class="string" id="8544246">&#34;0&#34;</span><span class="op" id="8544249">,</span>&nbsp;<span class="string" id="8544251">&#34;-1&#34;</span><span class="op" id="8544255">}</span><span class="op" id="8544256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544259">{</span><span class="string" id="8544260">&#34;1&#34;</span><span class="op" id="8544263">,</span>&nbsp;<span class="string" id="8544265">&#34;1&#34;</span><span class="op" id="8544268">,</span>&nbsp;<span class="string" id="8544270">&#34;2&#34;</span><span class="op" id="8544273">,</span>&nbsp;<span class="string" id="8544275">&#34;1&#34;</span><span class="op" id="8544278">}</span><span class="op" id="8544279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544282">{</span><span class="string" id="8544283">&#34;1/2&#34;</span><span class="op" id="8544288">,</span>&nbsp;<span class="string" id="8544290">&#34;1/2&#34;</span><span class="op" id="8544295">,</span>&nbsp;<span class="string" id="8544297">&#34;1&#34;</span><span class="op" id="8544300">,</span>&nbsp;<span class="string" id="8544302">&#34;1/4&#34;</span><span class="op" id="8544307">}</span><span class="op" id="8544308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544311">{</span><span class="string" id="8544312">&#34;1/4&#34;</span><span class="op" id="8544317">,</span>&nbsp;<span class="string" id="8544319">&#34;1/3&#34;</span><span class="op" id="8544324">,</span>&nbsp;<span class="string" id="8544326">&#34;7/12&#34;</span><span class="op" id="8544332">,</span>&nbsp;<span class="string" id="8544334">&#34;1/12&#34;</span><span class="op" id="8544340">}</span><span class="op" id="8544341">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544344">{</span><span class="string" id="8544345">&#34;2/5&#34;</span><span class="op" id="8544350">,</span>&nbsp;<span class="string" id="8544352">&#34;-14/3&#34;</span><span class="op" id="8544359">,</span>&nbsp;<span class="string" id="8544361">&#34;-64/15&#34;</span><span class="op" id="8544369">,</span>&nbsp;<span class="string" id="8544371">&#34;-28/15&#34;</span><span class="op" id="8544379">}</span><span class="op" id="8544380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544383">{</span><span class="string" id="8544384">&#34;4707/49292519774798173060&#34;</span><span class="op" id="8544411">,</span>&nbsp;<span class="string" id="8544413">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="8544441">,</span>&nbsp;<span class="string" id="8544443">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="8544509">,</span>&nbsp;<span class="string" id="8544511">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="8544561">}</span><span class="op" id="8544562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544565">{</span><span class="string" id="8544566">&#34;-61204110018146728334/3&#34;</span><span class="op" id="8544591">,</span>&nbsp;<span class="string" id="8544593">&#34;-31052192278051565633/2&#34;</span><span class="op" id="8544618">,</span>&nbsp;<span class="string" id="8544620">&#34;-215564796870448153567/6&#34;</span><span class="op" id="8544646">,</span>&nbsp;<span class="string" id="8544648">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="8544691">}</span><span class="op" id="8544692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544695">{</span><span class="string" id="8544696">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="8544758">,</span>&nbsp;<span class="string" id="8544760">&#34;-18/31750379913563777419&#34;</span><span class="op" id="8544786">,</span>&nbsp;<span class="string" id="8544788">&#34;-27/133467566250814981&#34;</span><span class="op" id="8544812">,</span>&nbsp;<span class="string" id="8544814">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="8544897">}</span><span class="op" id="8544898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8544901">{</span><span class="string" id="8544902">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="8544961">,</span>&nbsp;<span class="string" id="8544963">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="8544996">,</span>&nbsp;<span class="string" id="8544998">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="8545032">,</span>&nbsp;<span class="string" id="8545034">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="8545121">}</span><span class="op" id="8545122">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545125">{</span><span class="string" id="8545126">&#34;-3/26206484091896184128&#34;</span><span class="op" id="8545151">,</span>&nbsp;<span class="string" id="8545153">&#34;5/2848423294177090248&#34;</span><span class="op" id="8545176">,</span>&nbsp;<span class="string" id="8545178">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="8545238">,</span>&nbsp;<span class="string" id="8545240">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="8545283">}</span><span class="op" id="8545284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545287">{</span><span class="string" id="8545288">&#34;26946729/330400702820&#34;</span><span class="op" id="8545311">,</span>&nbsp;<span class="string" id="8545313">&#34;41563965/225583428284&#34;</span><span class="op" id="8545336">,</span>&nbsp;<span class="string" id="8545338">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="8545382">,</span>&nbsp;<span class="string" id="8545384">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="8545425">}</span><span class="op" id="8545426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545429">{</span><span class="string" id="8545430">&#34;-8259900599013409474/7&#34;</span><span class="op" id="8545454">,</span>&nbsp;<span class="string" id="8545456">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="8545500">,</span>&nbsp;<span class="string" id="8545502">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="8545566">,</span>&nbsp;<span class="string" id="8545568">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="8545631">}</span><span class="op" id="8545632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545635">{</span><span class="string" id="8545636">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="8545676">,</span>&nbsp;<span class="string" id="8545678">&#34;29/712593081308&#34;</span><span class="op" id="8545695">,</span>&nbsp;<span class="string" id="8545697">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="8545760">,</span>&nbsp;<span class="string" id="8545762">&#34;808/45524274987585732633&#34;</span><span class="op" id="8545788">}</span><span class="op" id="8545789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545792">{</span><span class="string" id="8545793">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="8545834">,</span>&nbsp;<span class="string" id="8545836">&#34;6269770/1992362624741777&#34;</span><span class="op" id="8545862">,</span>&nbsp;<span class="string" id="8545864">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="8545935">,</span>&nbsp;<span class="string" id="8545937">&#34;8967230/3296219033&#34;</span><span class="op" id="8545957">}</span><span class="op" id="8545958">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545961">{</span><span class="string" id="8545962">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="8546009">,</span>&nbsp;<span class="string" id="8546011">&#34;9381566963714/9633539&#34;</span><span class="op" id="8546034">,</span>&nbsp;<span class="string" id="8546036">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="8546105">,</span>&nbsp;<span class="string" id="8546107">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="8546134">}</span><span class="op" id="8546135">,</span><br>
<span class="lineno"></span><span class="op" id="8546137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8546140">func</span>&nbsp;<span class="ident" id="8546145">TestRatBin</span><span class="op" id="8546155">(</span><span class="ident" id="8546156">t</span>&nbsp;<span class="op" id="8546158">*</span><span class="ident" id="8546159">testing</span><span class="op" id="8546166">.</span><span class="ident" id="8546167">T</span><span class="op" id="8546168">)</span>&nbsp;<span class="op" id="8546170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8546173">for</span>&nbsp;<span class="ident" id="8546177">i</span><span class="op" id="8546178">,</span>&nbsp;<span class="ident" id="8546180">test</span>&nbsp;<span class="op" id="8546185">:=</span>&nbsp;<span class="keyword" id="8546188">range</span>&nbsp;<span class="ident" id="8546194">ratBinTests</span>&nbsp;<span class="op" id="8546206">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546210">arg</span>&nbsp;<span class="op" id="8546214">:=</span>&nbsp;<span class="ident" id="8546217">ratBinArg</span><span class="op" id="8546226">{</span><span class="ident" id="8546227">test</span><span class="op" id="8546231">.</span><span class="ident" id="8546232">x</span><span class="op" id="8546233">,</span>&nbsp;<span class="ident" id="8546235">test</span><span class="op" id="8546239">.</span><span class="ident" id="8546240">y</span><span class="op" id="8546241">,</span>&nbsp;<span class="ident" id="8546243">test</span><span class="op" id="8546247">.</span><span class="ident" id="8546248">sum</span><span class="op" id="8546251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546255">testRatBin</span><span class="op" id="8546265">(</span><span class="ident" id="8546266">t</span><span class="op" id="8546267">,</span>&nbsp;<span class="ident" id="8546269">i</span><span class="op" id="8546270">,</span>&nbsp;<span class="string" id="8546272">&#34;Add&#34;</span><span class="op" id="8546277">,</span>&nbsp;<span class="op" id="8546279">(</span><span class="op" id="8546280">*</span><span class="ident" id="8546281">Rat</span><span class="op" id="8546284">)</span><span class="op" id="8546285">.</span><span class="ident" id="8546286">Add</span><span class="op" id="8546289">,</span>&nbsp;<span class="ident" id="8546291">arg</span><span class="op" id="8546294">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546299">arg</span>&nbsp;<span class="op" id="8546303">=</span>&nbsp;<span class="ident" id="8546305">ratBinArg</span><span class="op" id="8546314">{</span><span class="ident" id="8546315">test</span><span class="op" id="8546319">.</span><span class="ident" id="8546320">y</span><span class="op" id="8546321">,</span>&nbsp;<span class="ident" id="8546323">test</span><span class="op" id="8546327">.</span><span class="ident" id="8546328">x</span><span class="op" id="8546329">,</span>&nbsp;<span class="ident" id="8546331">test</span><span class="op" id="8546335">.</span><span class="ident" id="8546336">sum</span><span class="op" id="8546339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546343">testRatBin</span><span class="op" id="8546353">(</span><span class="ident" id="8546354">t</span><span class="op" id="8546355">,</span>&nbsp;<span class="ident" id="8546357">i</span><span class="op" id="8546358">,</span>&nbsp;<span class="string" id="8546360">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="8546375">,</span>&nbsp;<span class="op" id="8546377">(</span><span class="op" id="8546378">*</span><span class="ident" id="8546379">Rat</span><span class="op" id="8546382">)</span><span class="op" id="8546383">.</span><span class="ident" id="8546384">Add</span><span class="op" id="8546387">,</span>&nbsp;<span class="ident" id="8546389">arg</span><span class="op" id="8546392">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546397">arg</span>&nbsp;<span class="op" id="8546401">=</span>&nbsp;<span class="ident" id="8546403">ratBinArg</span><span class="op" id="8546412">{</span><span class="ident" id="8546413">test</span><span class="op" id="8546417">.</span><span class="ident" id="8546418">sum</span><span class="op" id="8546421">,</span>&nbsp;<span class="ident" id="8546423">test</span><span class="op" id="8546427">.</span><span class="ident" id="8546428">x</span><span class="op" id="8546429">,</span>&nbsp;<span class="ident" id="8546431">test</span><span class="op" id="8546435">.</span><span class="ident" id="8546436">y</span><span class="op" id="8546437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546441">testRatBin</span><span class="op" id="8546451">(</span><span class="ident" id="8546452">t</span><span class="op" id="8546453">,</span>&nbsp;<span class="ident" id="8546455">i</span><span class="op" id="8546456">,</span>&nbsp;<span class="string" id="8546458">&#34;Sub&#34;</span><span class="op" id="8546463">,</span>&nbsp;<span class="op" id="8546465">(</span><span class="op" id="8546466">*</span><span class="ident" id="8546467">Rat</span><span class="op" id="8546470">)</span><span class="op" id="8546471">.</span><span class="ident" id="8546472">Sub</span><span class="op" id="8546475">,</span>&nbsp;<span class="ident" id="8546477">arg</span><span class="op" id="8546480">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546485">arg</span>&nbsp;<span class="op" id="8546489">=</span>&nbsp;<span class="ident" id="8546491">ratBinArg</span><span class="op" id="8546500">{</span><span class="ident" id="8546501">test</span><span class="op" id="8546505">.</span><span class="ident" id="8546506">sum</span><span class="op" id="8546509">,</span>&nbsp;<span class="ident" id="8546511">test</span><span class="op" id="8546515">.</span><span class="ident" id="8546516">y</span><span class="op" id="8546517">,</span>&nbsp;<span class="ident" id="8546519">test</span><span class="op" id="8546523">.</span><span class="ident" id="8546524">x</span><span class="op" id="8546525">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546529">testRatBin</span><span class="op" id="8546539">(</span><span class="ident" id="8546540">t</span><span class="op" id="8546541">,</span>&nbsp;<span class="ident" id="8546543">i</span><span class="op" id="8546544">,</span>&nbsp;<span class="string" id="8546546">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="8546561">,</span>&nbsp;<span class="op" id="8546563">(</span><span class="op" id="8546564">*</span><span class="ident" id="8546565">Rat</span><span class="op" id="8546568">)</span><span class="op" id="8546569">.</span><span class="ident" id="8546570">Sub</span><span class="op" id="8546573">,</span>&nbsp;<span class="ident" id="8546575">arg</span><span class="op" id="8546578">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546583">arg</span>&nbsp;<span class="op" id="8546587">=</span>&nbsp;<span class="ident" id="8546589">ratBinArg</span><span class="op" id="8546598">{</span><span class="ident" id="8546599">test</span><span class="op" id="8546603">.</span><span class="ident" id="8546604">x</span><span class="op" id="8546605">,</span>&nbsp;<span class="ident" id="8546607">test</span><span class="op" id="8546611">.</span><span class="ident" id="8546612">y</span><span class="op" id="8546613">,</span>&nbsp;<span class="ident" id="8546615">test</span><span class="op" id="8546619">.</span><span class="ident" id="8546620">prod</span><span class="op" id="8546624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546628">testRatBin</span><span class="op" id="8546638">(</span><span class="ident" id="8546639">t</span><span class="op" id="8546640">,</span>&nbsp;<span class="ident" id="8546642">i</span><span class="op" id="8546643">,</span>&nbsp;<span class="string" id="8546645">&#34;Mul&#34;</span><span class="op" id="8546650">,</span>&nbsp;<span class="op" id="8546652">(</span><span class="op" id="8546653">*</span><span class="ident" id="8546654">Rat</span><span class="op" id="8546657">)</span><span class="op" id="8546658">.</span><span class="ident" id="8546659">Mul</span><span class="op" id="8546662">,</span>&nbsp;<span class="ident" id="8546664">arg</span><span class="op" id="8546667">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546672">arg</span>&nbsp;<span class="op" id="8546676">=</span>&nbsp;<span class="ident" id="8546678">ratBinArg</span><span class="op" id="8546687">{</span><span class="ident" id="8546688">test</span><span class="op" id="8546692">.</span><span class="ident" id="8546693">y</span><span class="op" id="8546694">,</span>&nbsp;<span class="ident" id="8546696">test</span><span class="op" id="8546700">.</span><span class="ident" id="8546701">x</span><span class="op" id="8546702">,</span>&nbsp;<span class="ident" id="8546704">test</span><span class="op" id="8546708">.</span><span class="ident" id="8546709">prod</span><span class="op" id="8546713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546717">testRatBin</span><span class="op" id="8546727">(</span><span class="ident" id="8546728">t</span><span class="op" id="8546729">,</span>&nbsp;<span class="ident" id="8546731">i</span><span class="op" id="8546732">,</span>&nbsp;<span class="string" id="8546734">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="8546749">,</span>&nbsp;<span class="op" id="8546751">(</span><span class="op" id="8546752">*</span><span class="ident" id="8546753">Rat</span><span class="op" id="8546756">)</span><span class="op" id="8546757">.</span><span class="ident" id="8546758">Mul</span><span class="op" id="8546761">,</span>&nbsp;<span class="ident" id="8546763">arg</span><span class="op" id="8546766">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8546771">if</span>&nbsp;<span class="ident" id="8546774">test</span><span class="op" id="8546778">.</span><span class="ident" id="8546779">x</span>&nbsp;<span class="op" id="8546781">!=</span>&nbsp;<span class="string" id="8546784">&#34;0&#34;</span>&nbsp;<span class="op" id="8546788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546793">arg</span>&nbsp;<span class="op" id="8546797">=</span>&nbsp;<span class="ident" id="8546799">ratBinArg</span><span class="op" id="8546808">{</span><span class="ident" id="8546809">test</span><span class="op" id="8546813">.</span><span class="ident" id="8546814">prod</span><span class="op" id="8546818">,</span>&nbsp;<span class="ident" id="8546820">test</span><span class="op" id="8546824">.</span><span class="ident" id="8546825">x</span><span class="op" id="8546826">,</span>&nbsp;<span class="ident" id="8546828">test</span><span class="op" id="8546832">.</span><span class="ident" id="8546833">y</span><span class="op" id="8546834">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546839">testRatBin</span><span class="op" id="8546849">(</span><span class="ident" id="8546850">t</span><span class="op" id="8546851">,</span>&nbsp;<span class="ident" id="8546853">i</span><span class="op" id="8546854">,</span>&nbsp;<span class="string" id="8546856">&#34;Quo&#34;</span><span class="op" id="8546861">,</span>&nbsp;<span class="op" id="8546863">(</span><span class="op" id="8546864">*</span><span class="ident" id="8546865">Rat</span><span class="op" id="8546868">)</span><span class="op" id="8546869">.</span><span class="ident" id="8546870">Quo</span><span class="op" id="8546873">,</span>&nbsp;<span class="ident" id="8546875">arg</span><span class="op" id="8546878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8546882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8546887">if</span>&nbsp;<span class="ident" id="8546890">test</span><span class="op" id="8546894">.</span><span class="ident" id="8546895">y</span>&nbsp;<span class="op" id="8546897">!=</span>&nbsp;<span class="string" id="8546900">&#34;0&#34;</span>&nbsp;<span class="op" id="8546904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546909">arg</span>&nbsp;<span class="op" id="8546913">=</span>&nbsp;<span class="ident" id="8546915">ratBinArg</span><span class="op" id="8546924">{</span><span class="ident" id="8546925">test</span><span class="op" id="8546929">.</span><span class="ident" id="8546930">prod</span><span class="op" id="8546934">,</span>&nbsp;<span class="ident" id="8546936">test</span><span class="op" id="8546940">.</span><span class="ident" id="8546941">y</span><span class="op" id="8546942">,</span>&nbsp;<span class="ident" id="8546944">test</span><span class="op" id="8546948">.</span><span class="ident" id="8546949">x</span><span class="op" id="8546950">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546955">testRatBin</span><span class="op" id="8546965">(</span><span class="ident" id="8546966">t</span><span class="op" id="8546967">,</span>&nbsp;<span class="ident" id="8546969">i</span><span class="op" id="8546970">,</span>&nbsp;<span class="string" id="8546972">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="8546987">,</span>&nbsp;<span class="op" id="8546989">(</span><span class="op" id="8546990">*</span><span class="ident" id="8546991">Rat</span><span class="op" id="8546994">)</span><span class="op" id="8546995">.</span><span class="ident" id="8546996">Quo</span><span class="op" id="8546999">,</span>&nbsp;<span class="ident" id="8547001">arg</span><span class="op" id="8547004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547011">}</span><br>
<span class="lineno"></span><span class="op" id="8547013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="8547016">func</span>&nbsp;<span class="ident" id="8547021">TestIssue820</span><span class="op" id="8547033">(</span><span class="ident" id="8547034">t</span>&nbsp;<span class="op" id="8547036">*</span><span class="ident" id="8547037">testing</span><span class="op" id="8547044">.</span><span class="ident" id="8547045">T</span><span class="op" id="8547046">)</span>&nbsp;<span class="op" id="8547048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547051">x</span>&nbsp;<span class="op" id="8547053">:=</span>&nbsp;<span class="ident" id="8547056">NewRat</span><span class="op" id="8547062">(</span><span class="num" id="8547063">3</span><span class="op" id="8547064">,</span>&nbsp;<span class="num" id="8547066">1</span><span class="op" id="8547067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547070">y</span>&nbsp;<span class="op" id="8547072">:=</span>&nbsp;<span class="ident" id="8547075">NewRat</span><span class="op" id="8547081">(</span><span class="num" id="8547082">2</span><span class="op" id="8547083">,</span>&nbsp;<span class="num" id="8547085">1</span><span class="op" id="8547086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547089">z</span>&nbsp;<span class="op" id="8547091">:=</span>&nbsp;<span class="ident" id="8547094">y</span><span class="op" id="8547095">.</span><span class="ident" id="8547096">Quo</span><span class="op" id="8547099">(</span><span class="ident" id="8547100">x</span><span class="op" id="8547101">,</span>&nbsp;<span class="ident" id="8547103">y</span><span class="op" id="8547104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547107">q</span>&nbsp;<span class="op" id="8547109">:=</span>&nbsp;<span class="ident" id="8547112">NewRat</span><span class="op" id="8547118">(</span><span class="num" id="8547119">3</span><span class="op" id="8547120">,</span>&nbsp;<span class="num" id="8547122">2</span><span class="op" id="8547123">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547126">if</span>&nbsp;<span class="ident" id="8547129">z</span><span class="op" id="8547130">.</span><span class="ident" id="8547131">Cmp</span><span class="op" id="8547134">(</span><span class="ident" id="8547135">q</span><span class="op" id="8547136">)</span>&nbsp;<span class="op" id="8547138">!=</span>&nbsp;<span class="num" id="8547141">0</span>&nbsp;<span class="op" id="8547143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547147">t</span><span class="op" id="8547148">.</span><span class="ident" id="8547149">Errorf</span><span class="op" id="8547155">(</span><span class="string" id="8547156">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8547172">,</span>&nbsp;<span class="ident" id="8547174">z</span><span class="op" id="8547175">,</span>&nbsp;<span class="ident" id="8547177">q</span><span class="op" id="8547178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547185">y</span>&nbsp;<span class="op" id="8547187">=</span>&nbsp;<span class="ident" id="8547189">NewRat</span><span class="op" id="8547195">(</span><span class="num" id="8547196">3</span><span class="op" id="8547197">,</span>&nbsp;<span class="num" id="8547199">1</span><span class="op" id="8547200">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547203">x</span>&nbsp;<span class="op" id="8547205">=</span>&nbsp;<span class="ident" id="8547207">NewRat</span><span class="op" id="8547213">(</span><span class="num" id="8547214">2</span><span class="op" id="8547215">,</span>&nbsp;<span class="num" id="8547217">1</span><span class="op" id="8547218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547221">z</span>&nbsp;<span class="op" id="8547223">=</span>&nbsp;<span class="ident" id="8547225">y</span><span class="op" id="8547226">.</span><span class="ident" id="8547227">Quo</span><span class="op" id="8547230">(</span><span class="ident" id="8547231">x</span><span class="op" id="8547232">,</span>&nbsp;<span class="ident" id="8547234">y</span><span class="op" id="8547235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547238">q</span>&nbsp;<span class="op" id="8547240">=</span>&nbsp;<span class="ident" id="8547242">NewRat</span><span class="op" id="8547248">(</span><span class="num" id="8547249">2</span><span class="op" id="8547250">,</span>&nbsp;<span class="num" id="8547252">3</span><span class="op" id="8547253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547256">if</span>&nbsp;<span class="ident" id="8547259">z</span><span class="op" id="8547260">.</span><span class="ident" id="8547261">Cmp</span><span class="op" id="8547264">(</span><span class="ident" id="8547265">q</span><span class="op" id="8547266">)</span>&nbsp;<span class="op" id="8547268">!=</span>&nbsp;<span class="num" id="8547271">0</span>&nbsp;<span class="op" id="8547273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547277">t</span><span class="op" id="8547278">.</span><span class="ident" id="8547279">Errorf</span><span class="op" id="8547285">(</span><span class="string" id="8547286">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8547302">,</span>&nbsp;<span class="ident" id="8547304">z</span><span class="op" id="8547305">,</span>&nbsp;<span class="ident" id="8547307">q</span><span class="op" id="8547308">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547315">x</span>&nbsp;<span class="op" id="8547317">=</span>&nbsp;<span class="ident" id="8547319">NewRat</span><span class="op" id="8547325">(</span><span class="num" id="8547326">3</span><span class="op" id="8547327">,</span>&nbsp;<span class="num" id="8547329">1</span><span class="op" id="8547330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547333">z</span>&nbsp;<span class="op" id="8547335">=</span>&nbsp;<span class="ident" id="8547337">x</span><span class="op" id="8547338">.</span><span class="ident" id="8547339">Quo</span><span class="op" id="8547342">(</span><span class="ident" id="8547343">x</span><span class="op" id="8547344">,</span>&nbsp;<span class="ident" id="8547346">x</span><span class="op" id="8547347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547350">q</span>&nbsp;<span class="op" id="8547352">=</span>&nbsp;<span class="ident" id="8547354">NewRat</span><span class="op" id="8547360">(</span><span class="num" id="8547361">3</span><span class="op" id="8547362">,</span>&nbsp;<span class="num" id="8547364">3</span><span class="op" id="8547365">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547368">if</span>&nbsp;<span class="ident" id="8547371">z</span><span class="op" id="8547372">.</span><span class="ident" id="8547373">Cmp</span><span class="op" id="8547376">(</span><span class="ident" id="8547377">q</span><span class="op" id="8547378">)</span>&nbsp;<span class="op" id="8547380">!=</span>&nbsp;<span class="num" id="8547383">0</span>&nbsp;<span class="op" id="8547385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547389">t</span><span class="op" id="8547390">.</span><span class="ident" id="8547391">Errorf</span><span class="op" id="8547397">(</span><span class="string" id="8547398">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8547414">,</span>&nbsp;<span class="ident" id="8547416">z</span><span class="op" id="8547417">,</span>&nbsp;<span class="ident" id="8547419">q</span><span class="op" id="8547420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547423">}</span><br>
<span class="lineno"></span><span class="op" id="8547425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="8547428">var</span>&nbsp;<span class="ident" id="8547432">setFrac64Tests</span>&nbsp;<span class="op" id="8547447">=</span>&nbsp;<span class="op" id="8547449">[</span><span class="op" id="8547450">]</span><span class="keyword" id="8547451">struct</span>&nbsp;<span class="op" id="8547458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547461">a</span><span class="op" id="8547462">,</span>&nbsp;<span class="ident" id="8547464">b</span>&nbsp;<span class="ident" id="8547466">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547473">out</span>&nbsp;&nbsp;<span class="builtintype" id="8547478">string</span><br>
<span class="lineno"></span><span class="op" id="8547485">}</span><span class="op" id="8547486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547489">{</span><span class="num" id="8547490">0</span><span class="op" id="8547491">,</span>&nbsp;<span class="num" id="8547493">1</span><span class="op" id="8547494">,</span>&nbsp;<span class="string" id="8547496">&#34;0&#34;</span><span class="op" id="8547499">}</span><span class="op" id="8547500">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547503">{</span><span class="num" id="8547504">0</span><span class="op" id="8547505">,</span>&nbsp;<span class="op" id="8547507">-</span><span class="num" id="8547508">1</span><span class="op" id="8547509">,</span>&nbsp;<span class="string" id="8547511">&#34;0&#34;</span><span class="op" id="8547514">}</span><span class="op" id="8547515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547518">{</span><span class="num" id="8547519">1</span><span class="op" id="8547520">,</span>&nbsp;<span class="num" id="8547522">1</span><span class="op" id="8547523">,</span>&nbsp;<span class="string" id="8547525">&#34;1&#34;</span><span class="op" id="8547528">}</span><span class="op" id="8547529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547532">{</span><span class="op" id="8547533">-</span><span class="num" id="8547534">1</span><span class="op" id="8547535">,</span>&nbsp;<span class="num" id="8547537">1</span><span class="op" id="8547538">,</span>&nbsp;<span class="string" id="8547540">&#34;-1&#34;</span><span class="op" id="8547544">}</span><span class="op" id="8547545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547548">{</span><span class="num" id="8547549">1</span><span class="op" id="8547550">,</span>&nbsp;<span class="op" id="8547552">-</span><span class="num" id="8547553">1</span><span class="op" id="8547554">,</span>&nbsp;<span class="string" id="8547556">&#34;-1&#34;</span><span class="op" id="8547560">}</span><span class="op" id="8547561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547564">{</span><span class="op" id="8547565">-</span><span class="num" id="8547566">1</span><span class="op" id="8547567">,</span>&nbsp;<span class="op" id="8547569">-</span><span class="num" id="8547570">1</span><span class="op" id="8547571">,</span>&nbsp;<span class="string" id="8547573">&#34;1&#34;</span><span class="op" id="8547576">}</span><span class="op" id="8547577">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547580">{</span><span class="op" id="8547581">-</span><span class="num" id="8547582">9223372036854775808</span><span class="op" id="8547601">,</span>&nbsp;<span class="op" id="8547603">-</span><span class="num" id="8547604">9223372036854775808</span><span class="op" id="8547623">,</span>&nbsp;<span class="string" id="8547625">&#34;1&#34;</span><span class="op" id="8547628">}</span><span class="op" id="8547629">,</span><br>
<span class="lineno"></span><span class="op" id="8547631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8547634">func</span>&nbsp;<span class="ident" id="8547639">TestRatSetFrac64Rat</span><span class="op" id="8547658">(</span><span class="ident" id="8547659">t</span>&nbsp;<span class="op" id="8547661">*</span><span class="ident" id="8547662">testing</span><span class="op" id="8547669">.</span><span class="ident" id="8547670">T</span><span class="op" id="8547671">)</span>&nbsp;<span class="op" id="8547673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547676">for</span>&nbsp;<span class="ident" id="8547680">i</span><span class="op" id="8547681">,</span>&nbsp;<span class="ident" id="8547683">test</span>&nbsp;<span class="op" id="8547688">:=</span>&nbsp;<span class="keyword" id="8547691">range</span>&nbsp;<span class="ident" id="8547697">setFrac64Tests</span>&nbsp;<span class="op" id="8547712">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547716">x</span>&nbsp;<span class="op" id="8547718">:=</span>&nbsp;<span class="builtinfunc" id="8547721">new</span><span class="op" id="8547724">(</span><span class="ident" id="8547725">Rat</span><span class="op" id="8547728">)</span><span class="op" id="8547729">.</span><span class="ident" id="8547730">SetFrac64</span><span class="op" id="8547739">(</span><span class="ident" id="8547740">test</span><span class="op" id="8547744">.</span><span class="ident" id="8547745">a</span><span class="op" id="8547746">,</span>&nbsp;<span class="ident" id="8547748">test</span><span class="op" id="8547752">.</span><span class="ident" id="8547753">b</span><span class="op" id="8547754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547758">if</span>&nbsp;<span class="ident" id="8547761">x</span><span class="op" id="8547762">.</span><span class="ident" id="8547763">RatString</span><span class="op" id="8547772">(</span><span class="op" id="8547773">)</span>&nbsp;<span class="op" id="8547775">!=</span>&nbsp;<span class="ident" id="8547778">test</span><span class="op" id="8547782">.</span><span class="ident" id="8547783">out</span>&nbsp;<span class="op" id="8547787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547792">t</span><span class="op" id="8547793">.</span><span class="ident" id="8547794">Errorf</span><span class="op" id="8547800">(</span><span class="string" id="8547801">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8547821">,</span>&nbsp;<span class="ident" id="8547823">i</span><span class="op" id="8547824">,</span>&nbsp;<span class="ident" id="8547826">x</span><span class="op" id="8547827">.</span><span class="ident" id="8547828">RatString</span><span class="op" id="8547837">(</span><span class="op" id="8547838">)</span><span class="op" id="8547839">,</span>&nbsp;<span class="ident" id="8547841">test</span><span class="op" id="8547845">.</span><span class="ident" id="8547846">out</span><span class="op" id="8547849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547856">}</span><br>
<span class="lineno">390</span><span class="op" id="8547858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8547861">func</span>&nbsp;<span class="ident" id="8547866">TestRatGobEncoding</span><span class="op" id="8547884">(</span><span class="ident" id="8547885">t</span>&nbsp;<span class="op" id="8547887">*</span><span class="ident" id="8547888">testing</span><span class="op" id="8547895">.</span><span class="ident" id="8547896">T</span><span class="op" id="8547897">)</span>&nbsp;<span class="op" id="8547899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547902">var</span>&nbsp;<span class="ident" id="8547906">medium</span>&nbsp;<span class="ident" id="8547913">bytes</span><span class="op" id="8547918">.</span><span class="ident" id="8547919">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547927">enc</span>&nbsp;<span class="op" id="8547931">:=</span>&nbsp;<span class="ident" id="8547934">gob</span><span class="op" id="8547937">.</span><span class="ident" id="8547938">NewEncoder</span><span class="op" id="8547948">(</span><span class="op" id="8547949">&amp;</span><span class="ident" id="8547950">medium</span><span class="op" id="8547956">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547959">dec</span>&nbsp;<span class="op" id="8547963">:=</span>&nbsp;<span class="ident" id="8547966">gob</span><span class="op" id="8547969">.</span><span class="ident" id="8547970">NewDecoder</span><span class="op" id="8547980">(</span><span class="op" id="8547981">&amp;</span><span class="ident" id="8547982">medium</span><span class="op" id="8547988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547991">for</span>&nbsp;<span class="ident" id="8547995">_</span><span class="op" id="8547996">,</span>&nbsp;<span class="ident" id="8547998">test</span>&nbsp;<span class="op" id="8548003">:=</span>&nbsp;<span class="keyword" id="8548006">range</span>&nbsp;<span class="ident" id="8548012">encodingTests</span>&nbsp;<span class="op" id="8548026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548030">medium</span><span class="op" id="8548036">.</span><span class="ident" id="8548037">Reset</span><span class="op" id="8548042">(</span><span class="op" id="8548043">)</span>&nbsp;<span class="comment" id="8548045">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548104">var</span>&nbsp;<span class="ident" id="8548108">tx</span>&nbsp;<span class="ident" id="8548111">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548117">tx</span><span class="op" id="8548119">.</span><span class="ident" id="8548120">SetString</span><span class="op" id="8548129">(</span><span class="ident" id="8548130">test</span>&nbsp;<span class="op" id="8548135">+</span>&nbsp;<span class="string" id="8548137">&#34;.14159265&#34;</span><span class="op" id="8548148">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548152">if</span>&nbsp;<span class="ident" id="8548155">err</span>&nbsp;<span class="op" id="8548159">:=</span>&nbsp;<span class="ident" id="8548162">enc</span><span class="op" id="8548165">.</span><span class="ident" id="8548166">Encode</span><span class="op" id="8548172">(</span><span class="op" id="8548173">&amp;</span><span class="ident" id="8548174">tx</span><span class="op" id="8548176">)</span><span class="op" id="8548177">;</span>&nbsp;<span class="ident" id="8548179">err</span>&nbsp;<span class="op" id="8548183">!=</span>&nbsp;<span class="ident" id="8548186">nil</span>&nbsp;<span class="op" id="8548190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548195">t</span><span class="op" id="8548196">.</span><span class="ident" id="8548197">Errorf</span><span class="op" id="8548203">(</span><span class="string" id="8548204">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="8548231">,</span>&nbsp;<span class="op" id="8548233">&amp;</span><span class="ident" id="8548234">tx</span><span class="op" id="8548236">,</span>&nbsp;<span class="ident" id="8548238">err</span><span class="op" id="8548241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548249">var</span>&nbsp;<span class="ident" id="8548253">rx</span>&nbsp;<span class="ident" id="8548256">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548262">if</span>&nbsp;<span class="ident" id="8548265">err</span>&nbsp;<span class="op" id="8548269">:=</span>&nbsp;<span class="ident" id="8548272">dec</span><span class="op" id="8548275">.</span><span class="ident" id="8548276">Decode</span><span class="op" id="8548282">(</span><span class="op" id="8548283">&amp;</span><span class="ident" id="8548284">rx</span><span class="op" id="8548286">)</span><span class="op" id="8548287">;</span>&nbsp;<span class="ident" id="8548289">err</span>&nbsp;<span class="op" id="8548293">!=</span>&nbsp;<span class="ident" id="8548296">nil</span>&nbsp;<span class="op" id="8548300">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548305">t</span><span class="op" id="8548306">.</span><span class="ident" id="8548307">Errorf</span><span class="op" id="8548313">(</span><span class="string" id="8548314">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="8548341">,</span>&nbsp;<span class="op" id="8548343">&amp;</span><span class="ident" id="8548344">tx</span><span class="op" id="8548346">,</span>&nbsp;<span class="ident" id="8548348">err</span><span class="op" id="8548351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548359">if</span>&nbsp;<span class="ident" id="8548362">rx</span><span class="op" id="8548364">.</span><span class="ident" id="8548365">Cmp</span><span class="op" id="8548368">(</span><span class="op" id="8548369">&amp;</span><span class="ident" id="8548370">tx</span><span class="op" id="8548372">)</span>&nbsp;<span class="op" id="8548374">!=</span>&nbsp;<span class="num" id="8548377">0</span>&nbsp;<span class="op" id="8548379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548384">t</span><span class="op" id="8548385">.</span><span class="ident" id="8548386">Errorf</span><span class="op" id="8548392">(</span><span class="string" id="8548393">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8548436">,</span>&nbsp;<span class="op" id="8548438">&amp;</span><span class="ident" id="8548439">tx</span><span class="op" id="8548441">,</span>&nbsp;<span class="op" id="8548443">&amp;</span><span class="ident" id="8548444">rx</span><span class="op" id="8548446">,</span>&nbsp;<span class="op" id="8548448">&amp;</span><span class="ident" id="8548449">tx</span><span class="op" id="8548451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548455">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548458">}</span><br>
<span class="lineno"></span><span class="op" id="8548460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8548463">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="8548558">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="8548583">func</span>&nbsp;<span class="ident" id="8548588">TestGobEncodingNilRatInSlice</span><span class="op" id="8548616">(</span><span class="ident" id="8548617">t</span>&nbsp;<span class="op" id="8548619">*</span><span class="ident" id="8548620">testing</span><span class="op" id="8548627">.</span><span class="ident" id="8548628">T</span><span class="op" id="8548629">)</span>&nbsp;<span class="op" id="8548631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548634">buf</span>&nbsp;<span class="op" id="8548638">:=</span>&nbsp;<span class="builtinfunc" id="8548641">new</span><span class="op" id="8548644">(</span><span class="ident" id="8548645">bytes</span><span class="op" id="8548650">.</span><span class="ident" id="8548651">Buffer</span><span class="op" id="8548657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548660">enc</span>&nbsp;<span class="op" id="8548664">:=</span>&nbsp;<span class="ident" id="8548667">gob</span><span class="op" id="8548670">.</span><span class="ident" id="8548671">NewEncoder</span><span class="op" id="8548681">(</span><span class="ident" id="8548682">buf</span><span class="op" id="8548685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548688">dec</span>&nbsp;<span class="op" id="8548692">:=</span>&nbsp;<span class="ident" id="8548695">gob</span><span class="op" id="8548698">.</span><span class="ident" id="8548699">NewDecoder</span><span class="op" id="8548709">(</span><span class="ident" id="8548710">buf</span><span class="op" id="8548713">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548717">var</span>&nbsp;<span class="ident" id="8548721">in</span>&nbsp;<span class="op" id="8548724">=</span>&nbsp;<span class="builtinfunc" id="8548726">make</span><span class="op" id="8548730">(</span><span class="op" id="8548731">[</span><span class="op" id="8548732">]</span><span class="op" id="8548733">*</span><span class="ident" id="8548734">Rat</span><span class="op" id="8548737">,</span>&nbsp;<span class="num" id="8548739">1</span><span class="op" id="8548740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548743">err</span>&nbsp;<span class="op" id="8548747">:=</span>&nbsp;<span class="ident" id="8548750">enc</span><span class="op" id="8548753">.</span><span class="ident" id="8548754">Encode</span><span class="op" id="8548760">(</span><span class="op" id="8548761">&amp;</span><span class="ident" id="8548762">in</span><span class="op" id="8548764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548767">if</span>&nbsp;<span class="ident" id="8548770">err</span>&nbsp;<span class="op" id="8548774">!=</span>&nbsp;<span class="ident" id="8548777">nil</span>&nbsp;<span class="op" id="8548781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548785">t</span><span class="op" id="8548786">.</span><span class="ident" id="8548787">Errorf</span><span class="op" id="8548793">(</span><span class="string" id="8548794">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="8548817">,</span>&nbsp;<span class="ident" id="8548819">err</span><span class="op" id="8548822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548825">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548828">var</span>&nbsp;<span class="ident" id="8548832">out</span>&nbsp;<span class="op" id="8548836">[</span><span class="op" id="8548837">]</span><span class="op" id="8548838">*</span><span class="ident" id="8548839">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548844">err</span>&nbsp;<span class="op" id="8548848">=</span>&nbsp;<span class="ident" id="8548850">dec</span><span class="op" id="8548853">.</span><span class="ident" id="8548854">Decode</span><span class="op" id="8548860">(</span><span class="op" id="8548861">&amp;</span><span class="ident" id="8548862">out</span><span class="op" id="8548865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548868">if</span>&nbsp;<span class="ident" id="8548871">err</span>&nbsp;<span class="op" id="8548875">!=</span>&nbsp;<span class="ident" id="8548878">nil</span>&nbsp;<span class="op" id="8548882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548886">t</span><span class="op" id="8548887">.</span><span class="ident" id="8548888">Fatalf</span><span class="op" id="8548894">(</span><span class="string" id="8548895">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="8548918">,</span>&nbsp;<span class="ident" id="8548920">err</span><span class="op" id="8548923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548926">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548929">if</span>&nbsp;<span class="builtinfunc" id="8548932">len</span><span class="op" id="8548935">(</span><span class="ident" id="8548936">out</span><span class="op" id="8548939">)</span>&nbsp;<span class="op" id="8548941">!=</span>&nbsp;<span class="num" id="8548944">1</span>&nbsp;<span class="op" id="8548946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548950">t</span><span class="op" id="8548951">.</span><span class="ident" id="8548952">Fatalf</span><span class="op" id="8548958">(</span><span class="string" id="8548959">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8548985">,</span>&nbsp;<span class="builtinfunc" id="8548987">len</span><span class="op" id="8548990">(</span><span class="ident" id="8548991">out</span><span class="op" id="8548994">)</span><span class="op" id="8548995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549001">var</span>&nbsp;<span class="ident" id="8549005">zero</span>&nbsp;<span class="ident" id="8549010">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549015">if</span>&nbsp;<span class="ident" id="8549018">out</span><span class="op" id="8549021">[</span><span class="num" id="8549022">0</span><span class="op" id="8549023">]</span><span class="op" id="8549024">.</span><span class="ident" id="8549025">Cmp</span><span class="op" id="8549028">(</span><span class="op" id="8549029">&amp;</span><span class="ident" id="8549030">zero</span><span class="op" id="8549034">)</span>&nbsp;<span class="op" id="8549036">!=</span>&nbsp;<span class="num" id="8549039">0</span>&nbsp;<span class="op" id="8549041">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549045">t</span><span class="op" id="8549046">.</span><span class="ident" id="8549047">Errorf</span><span class="op" id="8549053">(</span><span class="string" id="8549054">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="8549106">,</span>&nbsp;<span class="ident" id="8549108">out</span><span class="op" id="8549111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8549114">}</span><br>
<span class="lineno"></span><span class="op" id="8549116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8549119">var</span>&nbsp;<span class="ident" id="8549123">ratNums</span>&nbsp;<span class="op" id="8549131">=</span>&nbsp;<span class="op" id="8549133">[</span><span class="op" id="8549134">]</span><span class="builtintype" id="8549135">string</span><span class="op" id="8549141">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549144">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="8549222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549225">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="8549268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549271">&#34;-141592653589793&#34;</span><span class="op" id="8549289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549292">&#34;-1&#34;</span><span class="op" id="8549296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549299">&#34;0&#34;</span><span class="op" id="8549302">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549305">&#34;1&#34;</span><span class="op" id="8549308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549311">&#34;141592653589793&#34;</span><span class="op" id="8549328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549331">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="8549373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549376">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="8549453">,</span><br>
<span class="lineno"></span><span class="op" id="8549455">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="8549458">var</span>&nbsp;<span class="ident" id="8549462">ratDenoms</span>&nbsp;<span class="op" id="8549472">=</span>&nbsp;<span class="op" id="8549474">[</span><span class="op" id="8549475">]</span><span class="builtintype" id="8549476">string</span><span class="op" id="8549482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549485">&#34;1&#34;</span><span class="op" id="8549488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549491">&#34;718281828459045&#34;</span><span class="op" id="8549508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549511">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="8549553">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8549556">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="8549633">,</span><br>
<span class="lineno"></span><span class="op" id="8549635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8549638">func</span>&nbsp;<span class="ident" id="8549643">TestRatJSONEncoding</span><span class="op" id="8549662">(</span><span class="ident" id="8549663">t</span>&nbsp;<span class="op" id="8549665">*</span><span class="ident" id="8549666">testing</span><span class="op" id="8549673">.</span><span class="ident" id="8549674">T</span><span class="op" id="8549675">)</span>&nbsp;<span class="op" id="8549677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549680">for</span>&nbsp;<span class="ident" id="8549684">_</span><span class="op" id="8549685">,</span>&nbsp;<span class="ident" id="8549687">num</span>&nbsp;<span class="op" id="8549691">:=</span>&nbsp;<span class="keyword" id="8549694">range</span>&nbsp;<span class="ident" id="8549700">ratNums</span>&nbsp;<span class="op" id="8549708">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549712">for</span>&nbsp;<span class="ident" id="8549716">_</span><span class="op" id="8549717">,</span>&nbsp;<span class="ident" id="8549719">denom</span>&nbsp;<span class="op" id="8549725">:=</span>&nbsp;<span class="keyword" id="8549728">range</span>&nbsp;<span class="ident" id="8549734">ratDenoms</span>&nbsp;<span class="op" id="8549744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549749">var</span>&nbsp;<span class="ident" id="8549753">tx</span>&nbsp;<span class="ident" id="8549756">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549763">tx</span><span class="op" id="8549765">.</span><span class="ident" id="8549766">SetString</span><span class="op" id="8549775">(</span><span class="ident" id="8549776">num</span>&nbsp;<span class="op" id="8549780">+</span>&nbsp;<span class="string" id="8549782">&#34;/&#34;</span>&nbsp;<span class="op" id="8549786">+</span>&nbsp;<span class="ident" id="8549788">denom</span><span class="op" id="8549793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549798">b</span><span class="op" id="8549799">,</span>&nbsp;<span class="ident" id="8549801">err</span>&nbsp;<span class="op" id="8549805">:=</span>&nbsp;<span class="ident" id="8549808">json</span><span class="op" id="8549812">.</span><span class="ident" id="8549813">Marshal</span><span class="op" id="8549820">(</span><span class="op" id="8549821">&amp;</span><span class="ident" id="8549822">tx</span><span class="op" id="8549824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549829">if</span>&nbsp;<span class="ident" id="8549832">err</span>&nbsp;<span class="op" id="8549836">!=</span>&nbsp;<span class="ident" id="8549839">nil</span>&nbsp;<span class="op" id="8549843">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549849">t</span><span class="op" id="8549850">.</span><span class="ident" id="8549851">Errorf</span><span class="op" id="8549857">(</span><span class="string" id="8549858">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="8549887">,</span>&nbsp;<span class="op" id="8549889">&amp;</span><span class="ident" id="8549890">tx</span><span class="op" id="8549892">,</span>&nbsp;<span class="ident" id="8549894">err</span><span class="op" id="8549897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549903">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8549915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549920">var</span>&nbsp;<span class="ident" id="8549924">rx</span>&nbsp;<span class="ident" id="8549927">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549934">if</span>&nbsp;<span class="ident" id="8549937">err</span>&nbsp;<span class="op" id="8549941">:=</span>&nbsp;<span class="ident" id="8549944">json</span><span class="op" id="8549948">.</span><span class="ident" id="8549949">Unmarshal</span><span class="op" id="8549958">(</span><span class="ident" id="8549959">b</span><span class="op" id="8549960">,</span>&nbsp;<span class="op" id="8549962">&amp;</span><span class="ident" id="8549963">rx</span><span class="op" id="8549965">)</span><span class="op" id="8549966">;</span>&nbsp;<span class="ident" id="8549968">err</span>&nbsp;<span class="op" id="8549972">!=</span>&nbsp;<span class="ident" id="8549975">nil</span>&nbsp;<span class="op" id="8549979">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549985">t</span><span class="op" id="8549986">.</span><span class="ident" id="8549987">Errorf</span><span class="op" id="8549993">(</span><span class="string" id="8549994">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="8550025">,</span>&nbsp;<span class="op" id="8550027">&amp;</span><span class="ident" id="8550028">tx</span><span class="op" id="8550030">,</span>&nbsp;<span class="ident" id="8550032">err</span><span class="op" id="8550035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550041">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550058">if</span>&nbsp;<span class="ident" id="8550061">rx</span><span class="op" id="8550063">.</span><span class="ident" id="8550064">Cmp</span><span class="op" id="8550067">(</span><span class="op" id="8550068">&amp;</span><span class="ident" id="8550069">tx</span><span class="op" id="8550071">)</span>&nbsp;<span class="op" id="8550073">!=</span>&nbsp;<span class="num" id="8550076">0</span>&nbsp;<span class="op" id="8550078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550084">t</span><span class="op" id="8550085">.</span><span class="ident" id="8550086">Errorf</span><span class="op" id="8550092">(</span><span class="string" id="8550093">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8550137">,</span>&nbsp;<span class="op" id="8550139">&amp;</span><span class="ident" id="8550140">tx</span><span class="op" id="8550142">,</span>&nbsp;<span class="op" id="8550144">&amp;</span><span class="ident" id="8550145">rx</span><span class="op" id="8550147">,</span>&nbsp;<span class="op" id="8550149">&amp;</span><span class="ident" id="8550150">tx</span><span class="op" id="8550152">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550164">}</span><br>
<span class="lineno"></span><span class="op" id="8550166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="8550169">func</span>&nbsp;<span class="ident" id="8550174">TestRatXMLEncoding</span><span class="op" id="8550192">(</span><span class="ident" id="8550193">t</span>&nbsp;<span class="op" id="8550195">*</span><span class="ident" id="8550196">testing</span><span class="op" id="8550203">.</span><span class="ident" id="8550204">T</span><span class="op" id="8550205">)</span>&nbsp;<span class="op" id="8550207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550210">for</span>&nbsp;<span class="ident" id="8550214">_</span><span class="op" id="8550215">,</span>&nbsp;<span class="ident" id="8550217">num</span>&nbsp;<span class="op" id="8550221">:=</span>&nbsp;<span class="keyword" id="8550224">range</span>&nbsp;<span class="ident" id="8550230">ratNums</span>&nbsp;<span class="op" id="8550238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550242">for</span>&nbsp;<span class="ident" id="8550246">_</span><span class="op" id="8550247">,</span>&nbsp;<span class="ident" id="8550249">denom</span>&nbsp;<span class="op" id="8550255">:=</span>&nbsp;<span class="keyword" id="8550258">range</span>&nbsp;<span class="ident" id="8550264">ratDenoms</span>&nbsp;<span class="op" id="8550274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550279">var</span>&nbsp;<span class="ident" id="8550283">tx</span>&nbsp;<span class="ident" id="8550286">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550293">tx</span><span class="op" id="8550295">.</span><span class="ident" id="8550296">SetString</span><span class="op" id="8550305">(</span><span class="ident" id="8550306">num</span>&nbsp;<span class="op" id="8550310">+</span>&nbsp;<span class="string" id="8550312">&#34;/&#34;</span>&nbsp;<span class="op" id="8550316">+</span>&nbsp;<span class="ident" id="8550318">denom</span><span class="op" id="8550323">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550328">b</span><span class="op" id="8550329">,</span>&nbsp;<span class="ident" id="8550331">err</span>&nbsp;<span class="op" id="8550335">:=</span>&nbsp;<span class="ident" id="8550338">xml</span><span class="op" id="8550341">.</span><span class="ident" id="8550342">Marshal</span><span class="op" id="8550349">(</span><span class="op" id="8550350">&amp;</span><span class="ident" id="8550351">tx</span><span class="op" id="8550353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550358">if</span>&nbsp;<span class="ident" id="8550361">err</span>&nbsp;<span class="op" id="8550365">!=</span>&nbsp;<span class="ident" id="8550368">nil</span>&nbsp;<span class="op" id="8550372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550378">t</span><span class="op" id="8550379">.</span><span class="ident" id="8550380">Errorf</span><span class="op" id="8550386">(</span><span class="string" id="8550387">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="8550416">,</span>&nbsp;<span class="op" id="8550418">&amp;</span><span class="ident" id="8550419">tx</span><span class="op" id="8550421">,</span>&nbsp;<span class="ident" id="8550423">err</span><span class="op" id="8550426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550432">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550444">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550449">var</span>&nbsp;<span class="ident" id="8550453">rx</span>&nbsp;<span class="ident" id="8550456">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550463">if</span>&nbsp;<span class="ident" id="8550466">err</span>&nbsp;<span class="op" id="8550470">:=</span>&nbsp;<span class="ident" id="8550473">xml</span><span class="op" id="8550476">.</span><span class="ident" id="8550477">Unmarshal</span><span class="op" id="8550486">(</span><span class="ident" id="8550487">b</span><span class="op" id="8550488">,</span>&nbsp;<span class="op" id="8550490">&amp;</span><span class="ident" id="8550491">rx</span><span class="op" id="8550493">)</span><span class="op" id="8550494">;</span>&nbsp;<span class="ident" id="8550496">err</span>&nbsp;<span class="op" id="8550500">!=</span>&nbsp;<span class="ident" id="8550503">nil</span>&nbsp;<span class="op" id="8550507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550513">t</span><span class="op" id="8550514">.</span><span class="ident" id="8550515">Errorf</span><span class="op" id="8550521">(</span><span class="string" id="8550522">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="8550553">,</span>&nbsp;<span class="op" id="8550555">&amp;</span><span class="ident" id="8550556">tx</span><span class="op" id="8550558">,</span>&nbsp;<span class="ident" id="8550560">err</span><span class="op" id="8550563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550569">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550581">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550586">if</span>&nbsp;<span class="ident" id="8550589">rx</span><span class="op" id="8550591">.</span><span class="ident" id="8550592">Cmp</span><span class="op" id="8550595">(</span><span class="op" id="8550596">&amp;</span><span class="ident" id="8550597">tx</span><span class="op" id="8550599">)</span>&nbsp;<span class="op" id="8550601">!=</span>&nbsp;<span class="num" id="8550604">0</span>&nbsp;<span class="op" id="8550606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550612">t</span><span class="op" id="8550613">.</span><span class="ident" id="8550614">Errorf</span><span class="op" id="8550620">(</span><span class="string" id="8550621">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8550664">,</span>&nbsp;<span class="op" id="8550666">&amp;</span><span class="ident" id="8550667">tx</span><span class="op" id="8550669">,</span>&nbsp;<span class="op" id="8550671">&amp;</span><span class="ident" id="8550672">rx</span><span class="op" id="8550674">,</span>&nbsp;<span class="op" id="8550676">&amp;</span><span class="ident" id="8550677">tx</span><span class="op" id="8550679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550691">}</span><br>
<span class="lineno">500</span><span class="op" id="8550693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8550696">func</span>&nbsp;<span class="ident" id="8550701">TestIssue2379</span><span class="op" id="8550714">(</span><span class="ident" id="8550715">t</span>&nbsp;<span class="op" id="8550717">*</span><span class="ident" id="8550718">testing</span><span class="op" id="8550725">.</span><span class="ident" id="8550726">T</span><span class="op" id="8550727">)</span>&nbsp;<span class="op" id="8550729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8550732">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550751">q</span>&nbsp;<span class="op" id="8550753">:=</span>&nbsp;<span class="ident" id="8550756">NewRat</span><span class="op" id="8550762">(</span><span class="num" id="8550763">3</span><span class="op" id="8550764">,</span>&nbsp;<span class="num" id="8550766">2</span><span class="op" id="8550767">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550770">x</span>&nbsp;<span class="op" id="8550772">:=</span>&nbsp;<span class="builtinfunc" id="8550775">new</span><span class="op" id="8550778">(</span><span class="ident" id="8550779">Rat</span><span class="op" id="8550782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550785">x</span><span class="op" id="8550786">.</span><span class="ident" id="8550787">SetFrac</span><span class="op" id="8550794">(</span><span class="ident" id="8550795">NewInt</span><span class="op" id="8550801">(</span><span class="num" id="8550802">3</span><span class="op" id="8550803">)</span><span class="op" id="8550804">,</span>&nbsp;<span class="ident" id="8550806">NewInt</span><span class="op" id="8550812">(</span><span class="num" id="8550813">2</span><span class="op" id="8550814">)</span><span class="op" id="8550815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550818">if</span>&nbsp;<span class="ident" id="8550821">x</span><span class="op" id="8550822">.</span><span class="ident" id="8550823">Cmp</span><span class="op" id="8550826">(</span><span class="ident" id="8550827">q</span><span class="op" id="8550828">)</span>&nbsp;<span class="op" id="8550830">!=</span>&nbsp;<span class="num" id="8550833">0</span>&nbsp;<span class="op" id="8550835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550839">t</span><span class="op" id="8550840">.</span><span class="ident" id="8550841">Errorf</span><span class="op" id="8550847">(</span><span class="string" id="8550848">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8550867">,</span>&nbsp;<span class="ident" id="8550869">x</span><span class="op" id="8550870">,</span>&nbsp;<span class="ident" id="8550872">q</span><span class="op" id="8550873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550876">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8550880">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550909">x</span>&nbsp;<span class="op" id="8550911">=</span>&nbsp;<span class="ident" id="8550913">NewRat</span><span class="op" id="8550919">(</span><span class="num" id="8550920">2</span><span class="op" id="8550921">,</span>&nbsp;<span class="num" id="8550923">3</span><span class="op" id="8550924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550927">x</span><span class="op" id="8550928">.</span><span class="ident" id="8550929">SetFrac</span><span class="op" id="8550936">(</span><span class="ident" id="8550937">NewInt</span><span class="op" id="8550943">(</span><span class="num" id="8550944">3</span><span class="op" id="8550945">)</span><span class="op" id="8550946">,</span>&nbsp;<span class="ident" id="8550948">x</span><span class="op" id="8550949">.</span><span class="ident" id="8550950">Num</span><span class="op" id="8550953">(</span><span class="op" id="8550954">)</span><span class="op" id="8550955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550958">if</span>&nbsp;<span class="ident" id="8550961">x</span><span class="op" id="8550962">.</span><span class="ident" id="8550963">Cmp</span><span class="op" id="8550966">(</span><span class="ident" id="8550967">q</span><span class="op" id="8550968">)</span>&nbsp;<span class="op" id="8550970">!=</span>&nbsp;<span class="num" id="8550973">0</span>&nbsp;<span class="op" id="8550975">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550979">t</span><span class="op" id="8550980">.</span><span class="ident" id="8550981">Errorf</span><span class="op" id="8550987">(</span><span class="string" id="8550988">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8551007">,</span>&nbsp;<span class="ident" id="8551009">x</span><span class="op" id="8551010">,</span>&nbsp;<span class="ident" id="8551012">q</span><span class="op" id="8551013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8551020">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551051">x</span>&nbsp;<span class="op" id="8551053">=</span>&nbsp;<span class="ident" id="8551055">NewRat</span><span class="op" id="8551061">(</span><span class="num" id="8551062">2</span><span class="op" id="8551063">,</span>&nbsp;<span class="num" id="8551065">3</span><span class="op" id="8551066">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551069">x</span><span class="op" id="8551070">.</span><span class="ident" id="8551071">SetFrac</span><span class="op" id="8551078">(</span><span class="ident" id="8551079">x</span><span class="op" id="8551080">.</span><span class="ident" id="8551081">Denom</span><span class="op" id="8551086">(</span><span class="op" id="8551087">)</span><span class="op" id="8551088">,</span>&nbsp;<span class="ident" id="8551090">NewInt</span><span class="op" id="8551096">(</span><span class="num" id="8551097">2</span><span class="op" id="8551098">)</span><span class="op" id="8551099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551102">if</span>&nbsp;<span class="ident" id="8551105">x</span><span class="op" id="8551106">.</span><span class="ident" id="8551107">Cmp</span><span class="op" id="8551110">(</span><span class="ident" id="8551111">q</span><span class="op" id="8551112">)</span>&nbsp;<span class="op" id="8551114">!=</span>&nbsp;<span class="num" id="8551117">0</span>&nbsp;<span class="op" id="8551119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551123">t</span><span class="op" id="8551124">.</span><span class="ident" id="8551125">Errorf</span><span class="op" id="8551131">(</span><span class="string" id="8551132">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8551151">,</span>&nbsp;<span class="ident" id="8551153">x</span><span class="op" id="8551154">,</span>&nbsp;<span class="ident" id="8551156">q</span><span class="op" id="8551157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8551164">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551209">x</span>&nbsp;<span class="op" id="8551211">=</span>&nbsp;<span class="ident" id="8551213">NewRat</span><span class="op" id="8551219">(</span><span class="num" id="8551220">2</span><span class="op" id="8551221">,</span>&nbsp;<span class="num" id="8551223">3</span><span class="op" id="8551224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551227">x</span><span class="op" id="8551228">.</span><span class="ident" id="8551229">SetFrac</span><span class="op" id="8551236">(</span><span class="ident" id="8551237">x</span><span class="op" id="8551238">.</span><span class="ident" id="8551239">Denom</span><span class="op" id="8551244">(</span><span class="op" id="8551245">)</span><span class="op" id="8551246">,</span>&nbsp;<span class="ident" id="8551248">x</span><span class="op" id="8551249">.</span><span class="ident" id="8551250">Num</span><span class="op" id="8551253">(</span><span class="op" id="8551254">)</span><span class="op" id="8551255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551258">if</span>&nbsp;<span class="ident" id="8551261">x</span><span class="op" id="8551262">.</span><span class="ident" id="8551263">Cmp</span><span class="op" id="8551266">(</span><span class="ident" id="8551267">q</span><span class="op" id="8551268">)</span>&nbsp;<span class="op" id="8551270">!=</span>&nbsp;<span class="num" id="8551273">0</span>&nbsp;<span class="op" id="8551275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551279">t</span><span class="op" id="8551280">.</span><span class="ident" id="8551281">Errorf</span><span class="op" id="8551287">(</span><span class="string" id="8551288">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8551307">,</span>&nbsp;<span class="ident" id="8551309">x</span><span class="op" id="8551310">,</span>&nbsp;<span class="ident" id="8551312">q</span><span class="op" id="8551313">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8551320">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551366">q</span>&nbsp;<span class="op" id="8551368">=</span>&nbsp;<span class="ident" id="8551370">NewRat</span><span class="op" id="8551376">(</span><span class="num" id="8551377">1</span><span class="op" id="8551378">,</span>&nbsp;<span class="num" id="8551380">1</span><span class="op" id="8551381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551384">x</span>&nbsp;<span class="op" id="8551386">=</span>&nbsp;<span class="builtinfunc" id="8551388">new</span><span class="op" id="8551391">(</span><span class="ident" id="8551392">Rat</span><span class="op" id="8551395">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551398">n</span>&nbsp;<span class="op" id="8551400">:=</span>&nbsp;<span class="ident" id="8551403">NewInt</span><span class="op" id="8551409">(</span><span class="num" id="8551410">7</span><span class="op" id="8551411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551414">x</span><span class="op" id="8551415">.</span><span class="ident" id="8551416">SetFrac</span><span class="op" id="8551423">(</span><span class="ident" id="8551424">n</span><span class="op" id="8551425">,</span>&nbsp;<span class="ident" id="8551427">n</span><span class="op" id="8551428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551431">if</span>&nbsp;<span class="ident" id="8551434">x</span><span class="op" id="8551435">.</span><span class="ident" id="8551436">Cmp</span><span class="op" id="8551439">(</span><span class="ident" id="8551440">q</span><span class="op" id="8551441">)</span>&nbsp;<span class="op" id="8551443">!=</span>&nbsp;<span class="num" id="8551446">0</span>&nbsp;<span class="op" id="8551448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551452">t</span><span class="op" id="8551453">.</span><span class="ident" id="8551454">Errorf</span><span class="op" id="8551460">(</span><span class="string" id="8551461">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8551480">,</span>&nbsp;<span class="ident" id="8551482">x</span><span class="op" id="8551483">,</span>&nbsp;<span class="ident" id="8551485">q</span><span class="op" id="8551486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551489">}</span><br>
<span class="lineno">540</span><span class="op" id="8551491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8551494">func</span>&nbsp;<span class="ident" id="8551499">TestIssue3521</span><span class="op" id="8551512">(</span><span class="ident" id="8551513">t</span>&nbsp;<span class="op" id="8551515">*</span><span class="ident" id="8551516">testing</span><span class="op" id="8551523">.</span><span class="ident" id="8551524">T</span><span class="op" id="8551525">)</span>&nbsp;<span class="op" id="8551527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551530">a</span>&nbsp;<span class="op" id="8551532">:=</span>&nbsp;<span class="builtinfunc" id="8551535">new</span><span class="op" id="8551538">(</span><span class="ident" id="8551539">Int</span><span class="op" id="8551542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551545">b</span>&nbsp;<span class="op" id="8551547">:=</span>&nbsp;<span class="builtinfunc" id="8551550">new</span><span class="op" id="8551553">(</span><span class="ident" id="8551554">Int</span><span class="op" id="8551557">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551560">a</span><span class="op" id="8551561">.</span><span class="ident" id="8551562">SetString</span><span class="op" id="8551571">(</span><span class="string" id="8551572">&#34;64375784358435883458348587&#34;</span><span class="op" id="8551600">,</span>&nbsp;<span class="num" id="8551602">0</span><span class="op" id="8551603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551606">b</span><span class="op" id="8551607">.</span><span class="ident" id="8551608">SetString</span><span class="op" id="8551617">(</span><span class="string" id="8551618">&#34;4789759874531&#34;</span><span class="op" id="8551633">,</span>&nbsp;<span class="num" id="8551635">0</span><span class="op" id="8551636">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8551640">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551685">zero</span>&nbsp;<span class="op" id="8551690">:=</span>&nbsp;<span class="builtinfunc" id="8551693">new</span><span class="op" id="8551696">(</span><span class="ident" id="8551697">Rat</span><span class="op" id="8551700">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551703">one</span>&nbsp;<span class="op" id="8551707">:=</span>&nbsp;<span class="ident" id="8551710">NewInt</span><span class="op" id="8551716">(</span><span class="num" id="8551717">1</span><span class="op" id="8551718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551721">if</span>&nbsp;<span class="ident" id="8551724">zero</span><span class="op" id="8551728">.</span><span class="ident" id="8551729">Denom</span><span class="op" id="8551734">(</span><span class="op" id="8551735">)</span><span class="op" id="8551736">.</span><span class="ident" id="8551737">Cmp</span><span class="op" id="8551740">(</span><span class="ident" id="8551741">one</span><span class="op" id="8551744">)</span>&nbsp;<span class="op" id="8551746">!=</span>&nbsp;<span class="num" id="8551749">0</span>&nbsp;<span class="op" id="8551751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551755">t</span><span class="op" id="8551756">.</span><span class="ident" id="8551757">Errorf</span><span class="op" id="8551763">(</span><span class="string" id="8551764">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8551783">,</span>&nbsp;<span class="ident" id="8551785">zero</span><span class="op" id="8551789">.</span><span class="ident" id="8551790">Denom</span><span class="op" id="8551795">(</span><span class="op" id="8551796">)</span><span class="op" id="8551797">,</span>&nbsp;<span class="ident" id="8551799">one</span><span class="op" id="8551802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8551809">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551870">x</span>&nbsp;<span class="op" id="8551872">:=</span>&nbsp;<span class="builtinfunc" id="8551875">new</span><span class="op" id="8551878">(</span><span class="ident" id="8551879">Rat</span><span class="op" id="8551882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551885">x</span><span class="op" id="8551886">.</span><span class="ident" id="8551887">Denom</span><span class="op" id="8551892">(</span><span class="op" id="8551893">)</span><span class="op" id="8551894">.</span><span class="ident" id="8551895">Set</span><span class="op" id="8551898">(</span><span class="builtinfunc" id="8551899">new</span><span class="op" id="8551902">(</span><span class="ident" id="8551903">Int</span><span class="op" id="8551906">)</span><span class="op" id="8551907">.</span><span class="ident" id="8551908">Neg</span><span class="op" id="8551911">(</span><span class="ident" id="8551912">b</span><span class="op" id="8551913">)</span><span class="op" id="8551914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551917">if</span>&nbsp;<span class="ident" id="8551920">x</span><span class="op" id="8551921">.</span><span class="ident" id="8551922">Cmp</span><span class="op" id="8551925">(</span><span class="ident" id="8551926">zero</span><span class="op" id="8551930">)</span>&nbsp;<span class="op" id="8551932">!=</span>&nbsp;<span class="num" id="8551935">0</span>&nbsp;<span class="op" id="8551937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551941">t</span><span class="op" id="8551942">.</span><span class="ident" id="8551943">Errorf</span><span class="op" id="8551949">(</span><span class="string" id="8551950">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8551970">,</span>&nbsp;<span class="ident" id="8551972">x</span><span class="op" id="8551973">,</span>&nbsp;<span class="ident" id="8551975">zero</span><span class="op" id="8551979">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8551986">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552044">x</span><span class="op" id="8552045">.</span><span class="ident" id="8552046">Num</span><span class="op" id="8552049">(</span><span class="op" id="8552050">)</span><span class="op" id="8552051">.</span><span class="ident" id="8552052">Set</span><span class="op" id="8552055">(</span><span class="ident" id="8552056">a</span><span class="op" id="8552057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552060">qab</span>&nbsp;<span class="op" id="8552064">:=</span>&nbsp;<span class="builtinfunc" id="8552067">new</span><span class="op" id="8552070">(</span><span class="ident" id="8552071">Rat</span><span class="op" id="8552074">)</span><span class="op" id="8552075">.</span><span class="ident" id="8552076">SetFrac</span><span class="op" id="8552083">(</span><span class="ident" id="8552084">a</span><span class="op" id="8552085">,</span>&nbsp;<span class="ident" id="8552087">b</span><span class="op" id="8552088">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8552091">if</span>&nbsp;<span class="ident" id="8552094">x</span><span class="op" id="8552095">.</span><span class="ident" id="8552096">Cmp</span><span class="op" id="8552099">(</span><span class="ident" id="8552100">qab</span><span class="op" id="8552103">)</span>&nbsp;<span class="op" id="8552105">!=</span>&nbsp;<span class="num" id="8552108">0</span>&nbsp;<span class="op" id="8552110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552114">t</span><span class="op" id="8552115">.</span><span class="ident" id="8552116">Errorf</span><span class="op" id="8552122">(</span><span class="string" id="8552123">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8552143">,</span>&nbsp;<span class="ident" id="8552145">x</span><span class="op" id="8552146">,</span>&nbsp;<span class="ident" id="8552148">qab</span><span class="op" id="8552151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8552154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8552158">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552228">x</span><span class="op" id="8552229">.</span><span class="ident" id="8552230">SetFrac64</span><span class="op" id="8552239">(</span><span class="num" id="8552240">10</span><span class="op" id="8552242">,</span>&nbsp;<span class="num" id="8552244">2</span><span class="op" id="8552245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552248">x</span><span class="op" id="8552249">.</span><span class="ident" id="8552250">Denom</span><span class="op" id="8552255">(</span><span class="op" id="8552256">)</span><span class="op" id="8552257">.</span><span class="ident" id="8552258">SetInt64</span><span class="op" id="8552266">(</span><span class="num" id="8552267">3</span><span class="op" id="8552268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552271">q53</span>&nbsp;<span class="op" id="8552275">:=</span>&nbsp;<span class="ident" id="8552278">NewRat</span><span class="op" id="8552284">(</span><span class="num" id="8552285">5</span><span class="op" id="8552286">,</span>&nbsp;<span class="num" id="8552288">3</span><span class="op" id="8552289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8552292">if</span>&nbsp;<span class="ident" id="8552295">x</span><span class="op" id="8552296">.</span><span class="ident" id="8552297">Cmp</span><span class="op" id="8552300">(</span><span class="ident" id="8552301">q53</span><span class="op" id="8552304">)</span>&nbsp;<span class="op" id="8552306">!=</span>&nbsp;<span class="num" id="8552309">0</span>&nbsp;<span class="op" id="8552311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552315">t</span><span class="op" id="8552316">.</span><span class="ident" id="8552317">Errorf</span><span class="op" id="8552323">(</span><span class="string" id="8552324">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8552344">,</span>&nbsp;<span class="ident" id="8552346">x</span><span class="op" id="8552347">,</span>&nbsp;<span class="ident" id="8552349">q53</span><span class="op" id="8552352">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8552355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8552359">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552429">x</span>&nbsp;<span class="op" id="8552431">=</span>&nbsp;<span class="ident" id="8552433">NewRat</span><span class="op" id="8552439">(</span><span class="num" id="8552440">10</span><span class="op" id="8552442">,</span>&nbsp;<span class="num" id="8552444">2</span><span class="op" id="8552445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552448">x</span><span class="op" id="8552449">.</span><span class="ident" id="8552450">Denom</span><span class="op" id="8552455">(</span><span class="op" id="8552456">)</span><span class="op" id="8552457">.</span><span class="ident" id="8552458">SetInt64</span><span class="op" id="8552466">(</span><span class="num" id="8552467">3</span><span class="op" id="8552468">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8552471">if</span>&nbsp;<span class="ident" id="8552474">x</span><span class="op" id="8552475">.</span><span class="ident" id="8552476">Cmp</span><span class="op" id="8552479">(</span><span class="ident" id="8552480">q53</span><span class="op" id="8552483">)</span>&nbsp;<span class="op" id="8552485">!=</span>&nbsp;<span class="num" id="8552488">0</span>&nbsp;<span class="op" id="8552490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552494">t</span><span class="op" id="8552495">.</span><span class="ident" id="8552496">Errorf</span><span class="op" id="8552502">(</span><span class="string" id="8552503">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8552523">,</span>&nbsp;<span class="ident" id="8552525">x</span><span class="op" id="8552526">,</span>&nbsp;<span class="ident" id="8552528">q53</span><span class="op" id="8552531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8552534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8552538">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552605">x</span><span class="op" id="8552606">.</span><span class="ident" id="8552607">SetFrac</span><span class="op" id="8552614">(</span><span class="ident" id="8552615">a</span><span class="op" id="8552616">,</span>&nbsp;<span class="ident" id="8552618">b</span><span class="op" id="8552619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552622">a</span>&nbsp;<span class="op" id="8552624">=</span>&nbsp;<span class="ident" id="8552626">x</span><span class="op" id="8552627">.</span><span class="ident" id="8552628">Num</span><span class="op" id="8552631">(</span><span class="op" id="8552632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552635">b</span>&nbsp;<span class="op" id="8552637">=</span>&nbsp;<span class="ident" id="8552639">x</span><span class="op" id="8552640">.</span><span class="ident" id="8552641">Denom</span><span class="op" id="8552646">(</span><span class="op" id="8552647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552650">a</span><span class="op" id="8552651">.</span><span class="ident" id="8552652">SetInt64</span><span class="op" id="8552660">(</span><span class="num" id="8552661">5</span><span class="op" id="8552662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552665">b</span><span class="op" id="8552666">.</span><span class="ident" id="8552667">SetInt64</span><span class="op" id="8552675">(</span><span class="num" id="8552676">3</span><span class="op" id="8552677">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8552680">if</span>&nbsp;<span class="ident" id="8552683">x</span><span class="op" id="8552684">.</span><span class="ident" id="8552685">Cmp</span><span class="op" id="8552688">(</span><span class="ident" id="8552689">q53</span><span class="op" id="8552692">)</span>&nbsp;<span class="op" id="8552694">!=</span>&nbsp;<span class="num" id="8552697">0</span>&nbsp;<span class="op" id="8552699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8552703">t</span><span class="op" id="8552704">.</span><span class="ident" id="8552705">Errorf</span><span class="op" id="8552711">(</span><span class="string" id="8552712">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8552731">,</span>&nbsp;<span class="ident" id="8552733">x</span><span class="op" id="8552734">,</span>&nbsp;<span class="ident" id="8552736">q53</span><span class="op" id="8552739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8552742">}</span><br>
<span class="lineno"></span><span class="op" id="8552744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="8552747">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="8552816">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="8552888">var</span>&nbsp;<span class="ident" id="8552892">float64inputs</span>&nbsp;<span class="op" id="8552906">=</span>&nbsp;<span class="op" id="8552908">[</span><span class="op" id="8552909">]</span><span class="builtintype" id="8552910">string</span><span class="op" id="8552916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8552919">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8552969">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553039">&#34;5e+125&#34;</span><span class="op" id="8553047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553050">&#34;69e+267&#34;</span><span class="op" id="8553059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553062">&#34;999e-026&#34;</span><span class="op" id="8553072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553075">&#34;7861e-034&#34;</span><span class="op" id="8553086">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553089">&#34;75569e-254&#34;</span><span class="op" id="8553101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553104">&#34;928609e-261&#34;</span><span class="op" id="8553117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553120">&#34;9210917e+080&#34;</span><span class="op" id="8553134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553137">&#34;84863171e+114&#34;</span><span class="op" id="8553152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553155">&#34;653777767e+273&#34;</span><span class="op" id="8553171">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553174">&#34;5232604057e-298&#34;</span><span class="op" id="8553191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553194">&#34;27235667517e-109&#34;</span><span class="op" id="8553212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553215">&#34;653532977297e-123&#34;</span><span class="op" id="8553234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553237">&#34;3142213164987e-294&#34;</span><span class="op" id="8553257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553260">&#34;46202199371337e-072&#34;</span><span class="op" id="8553281">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553284">&#34;231010996856685e-073&#34;</span><span class="op" id="8553306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553309">&#34;9324754620109615e+212&#34;</span><span class="op" id="8553332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553335">&#34;78459735791271921e+049&#34;</span><span class="op" id="8553359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553362">&#34;272104041512242479e+200&#34;</span><span class="op" id="8553387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553390">&#34;6802601037806061975e+198&#34;</span><span class="op" id="8553416">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553419">&#34;20505426358836677347e-221&#34;</span><span class="op" id="8553446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553449">&#34;836168422905420598437e-234&#34;</span><span class="op" id="8553477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553480">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="8553509">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8553513">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553583">&#34;9e-265&#34;</span><span class="op" id="8553591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553594">&#34;85e-037&#34;</span><span class="op" id="8553603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553606">&#34;623e+100&#34;</span><span class="op" id="8553616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553619">&#34;3571e+263&#34;</span><span class="op" id="8553630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553633">&#34;81661e+153&#34;</span><span class="op" id="8553645">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553648">&#34;920657e-023&#34;</span><span class="op" id="8553661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553664">&#34;4603285e-024&#34;</span><span class="op" id="8553678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553681">&#34;87575437e-309&#34;</span><span class="op" id="8553696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553699">&#34;245540327e+122&#34;</span><span class="op" id="8553715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553718">&#34;6138508175e+120&#34;</span><span class="op" id="8553735">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553738">&#34;83356057653e+193&#34;</span><span class="op" id="8553756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553759">&#34;619534293513e+124&#34;</span><span class="op" id="8553778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553781">&#34;2335141086879e+218&#34;</span><span class="op" id="8553801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553804">&#34;36167929443327e-159&#34;</span><span class="op" id="8553825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553828">&#34;609610927149051e-255&#34;</span><span class="op" id="8553850">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553853">&#34;3743626360493413e-165&#34;</span><span class="op" id="8553876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553879">&#34;94080055902682397e-242&#34;</span><span class="op" id="8553903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553906">&#34;899810892172646163e+283&#34;</span><span class="op" id="8553931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553934">&#34;7120190517612959703e+120&#34;</span><span class="op" id="8553960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553963">&#34;25188282901709339043e-252&#34;</span><span class="op" id="8553990">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553993">&#34;308984926168550152811e-052&#34;</span><span class="op" id="8554021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554024">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="8554053">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8554057">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554127">&#34;5e-20&#34;</span><span class="op" id="8554134">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554137">&#34;67e+14&#34;</span><span class="op" id="8554145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554148">&#34;985e+15&#34;</span><span class="op" id="8554157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554160">&#34;7693e-42&#34;</span><span class="op" id="8554170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554173">&#34;55895e-16&#34;</span><span class="op" id="8554184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554187">&#34;996622e-44&#34;</span><span class="op" id="8554199">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554202">&#34;7038531e-32&#34;</span><span class="op" id="8554215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554218">&#34;60419369e-46&#34;</span><span class="op" id="8554232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554235">&#34;702990899e-20&#34;</span><span class="op" id="8554250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554253">&#34;6930161142e-48&#34;</span><span class="op" id="8554269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554272">&#34;25933168707e+13&#34;</span><span class="op" id="8554289">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554292">&#34;596428896559e+20&#34;</span><span class="op" id="8554310">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8554314">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554384">&#34;3e-23&#34;</span><span class="op" id="8554391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554394">&#34;57e+18&#34;</span><span class="op" id="8554402">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554405">&#34;789e-35&#34;</span><span class="op" id="8554414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554417">&#34;2539e-18&#34;</span><span class="op" id="8554427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554430">&#34;76173e+28&#34;</span><span class="op" id="8554441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554444">&#34;887745e-11&#34;</span><span class="op" id="8554456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554459">&#34;5382571e-37&#34;</span><span class="op" id="8554472">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554475">&#34;82381273e-35&#34;</span><span class="op" id="8554489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554492">&#34;750486563e-38&#34;</span><span class="op" id="8554507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554510">&#34;3752432815e-39&#34;</span><span class="op" id="8554526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554529">&#34;75224575729e-45&#34;</span><span class="op" id="8554546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554549">&#34;459926601011e+15&#34;</span><span class="op" id="8554567">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8554571">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554623">&#34;0&#34;</span><span class="op" id="8554626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554629">&#34;1&#34;</span><span class="op" id="8554632">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554635">&#34;+1&#34;</span><span class="op" id="8554639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554642">&#34;1e23&#34;</span><span class="op" id="8554648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554651">&#34;1E23&#34;</span><span class="op" id="8554657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554660">&#34;100000000000000000000000&#34;</span><span class="op" id="8554686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554689">&#34;1e-100&#34;</span><span class="op" id="8554697">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554700">&#34;123456700&#34;</span><span class="op" id="8554711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554714">&#34;99999999999999974834176&#34;</span><span class="op" id="8554739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554742">&#34;100000000000000000000001&#34;</span><span class="op" id="8554768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554771">&#34;100000000000000008388608&#34;</span><span class="op" id="8554797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554800">&#34;100000000000000016777215&#34;</span><span class="op" id="8554826">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554829">&#34;100000000000000016777216&#34;</span><span class="op" id="8554855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554858">&#34;-1&#34;</span><span class="op" id="8554862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554865">&#34;-0.1&#34;</span><span class="op" id="8554871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554874">&#34;-0&#34;</span><span class="op" id="8554878">,</span>&nbsp;<span class="comment" id="8554880">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554918">&#34;1e-20&#34;</span><span class="op" id="8554925">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554928">&#34;625e-3&#34;</span><span class="op" id="8554936">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8554940">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554960">&#34;1.7976931348623157e308&#34;</span><span class="op" id="8554984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554987">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="8555012">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555015">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555044">&#34;1.7976931348623159e308&#34;</span><span class="op" id="8555068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555071">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="8555096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555099">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555127">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555149">&#34;1.7976931348623158e308&#34;</span><span class="op" id="8555173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555176">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="8555201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555204">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555231">&#34;1.797693134862315808e308&#34;</span><span class="op" id="8555257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555260">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="8555287">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555291">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555314">&#34;1e308&#34;</span><span class="op" id="8555321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555324">&#34;2e308&#34;</span><span class="op" id="8555331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555334">&#34;1e309&#34;</span><span class="op" id="8555341">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555345">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555363">&#34;1e310&#34;</span><span class="op" id="8555370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555373">&#34;-1e310&#34;</span><span class="op" id="8555381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555384">&#34;1e400&#34;</span><span class="op" id="8555391">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555394">&#34;-1e400&#34;</span><span class="op" id="8555402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555405">&#34;long:1e400000&#34;</span><span class="op" id="8555420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555423">&#34;long:-1e400000&#34;</span><span class="op" id="8555439">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555443">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555460">&#34;1e-305&#34;</span><span class="op" id="8555468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555471">&#34;1e-306&#34;</span><span class="op" id="8555479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555482">&#34;1e-307&#34;</span><span class="op" id="8555490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555493">&#34;1e-308&#34;</span><span class="op" id="8555501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555504">&#34;1e-309&#34;</span><span class="op" id="8555512">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555515">&#34;1e-310&#34;</span><span class="op" id="8555523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555526">&#34;1e-322&#34;</span><span class="op" id="8555534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555537">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555559">&#34;5e-324&#34;</span><span class="op" id="8555567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555570">&#34;4e-324&#34;</span><span class="op" id="8555578">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555581">&#34;3e-324&#34;</span><span class="op" id="8555589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555592">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555606">&#34;2e-324&#34;</span><span class="op" id="8555614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555617">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555635">&#34;1e-350&#34;</span><span class="op" id="8555643">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555646">&#34;long:1e-400000&#34;</span><span class="op" id="8555662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555665">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555693">&#34;-1e-350&#34;</span><span class="op" id="8555702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8555705">&#34;long:-1e-400000&#34;</span><span class="op" id="8555722">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555726">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555755">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555814">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555835">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555856">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555887">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8555919">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556006">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="8556031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8556034">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556121">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="8556146">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8556150">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556224">&#34;4.630813248087435e+307&#34;</span><span class="op" id="8556248">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8556252">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556295">&#34;22.222222222222222&#34;</span><span class="op" id="8556315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556318">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="8556328">+</span>&nbsp;<span class="ident" id="8556330">strings</span><span class="op" id="8556337">.</span><span class="ident" id="8556338">Repeat</span><span class="op" id="8556344">(</span><span class="string" id="8556345">&#34;2&#34;</span><span class="op" id="8556348">,</span>&nbsp;<span class="num" id="8556350">4000</span><span class="op" id="8556354">)</span>&nbsp;<span class="op" id="8556356">+</span>&nbsp;<span class="string" id="8556358">&#34;e+1&#34;</span><span class="op" id="8556363">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8556367">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8556423">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556449">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="8556506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8556509">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556547">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="8556604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8556607">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556638">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="8556695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8556698">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556764">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="8556827">+</span>&nbsp;<span class="ident" id="8556829">strings</span><span class="op" id="8556836">.</span><span class="ident" id="8556837">Repeat</span><span class="op" id="8556843">(</span><span class="string" id="8556844">&#34;0&#34;</span><span class="op" id="8556847">,</span>&nbsp;<span class="num" id="8556849">10000</span><span class="op" id="8556854">)</span>&nbsp;<span class="op" id="8556856">+</span>&nbsp;<span class="string" id="8556858">&#34;1&#34;</span><span class="op" id="8556861">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8556865">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556901">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="8556949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8556952">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8556996">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="8557044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8557047">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8557106">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8557151">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="8557199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8557202">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8557270">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8557315">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="8557363">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8557367">&#34;1152921504606846975&#34;</span><span class="op" id="8557388">,</span>&nbsp;&nbsp;<span class="comment" id="8557391">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8557407">&#34;-1152921504606846975&#34;</span><span class="op" id="8557429">,</span>&nbsp;<span class="comment" id="8557431">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8557448">&#34;1152921504606846977&#34;</span><span class="op" id="8557469">,</span>&nbsp;&nbsp;<span class="comment" id="8557472">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8557488">&#34;-1152921504606846977&#34;</span><span class="op" id="8557510">,</span>&nbsp;<span class="comment" id="8557512">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8557530">&#34;1/3&#34;</span><span class="op" id="8557535">,</span><br>
<span class="lineno"></span><span class="op" id="8557537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8557540">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="8557606">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="8557666">func</span>&nbsp;<span class="ident" id="8557671">isFinite</span><span class="op" id="8557679">(</span><span class="ident" id="8557680">f</span>&nbsp;<span class="builtintype" id="8557682">float64</span><span class="op" id="8557689">)</span>&nbsp;<span class="builtintype" id="8557691">bool</span>&nbsp;<span class="op" id="8557696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8557699">return</span>&nbsp;<span class="ident" id="8557706">math</span><span class="op" id="8557710">.</span><span class="ident" id="8557711">Abs</span><span class="op" id="8557714">(</span><span class="ident" id="8557715">f</span><span class="op" id="8557716">)</span>&nbsp;<span class="op" id="8557718">&lt;=</span>&nbsp;<span class="ident" id="8557721">math</span><span class="op" id="8557725">.</span><span class="ident" id="8557726">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="8557737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8557740">func</span>&nbsp;<span class="ident" id="8557745">TestFloat32SpecialCases</span><span class="op" id="8557768">(</span><span class="ident" id="8557769">t</span>&nbsp;<span class="op" id="8557771">*</span><span class="ident" id="8557772">testing</span><span class="op" id="8557779">.</span><span class="ident" id="8557780">T</span><span class="op" id="8557781">)</span>&nbsp;<span class="op" id="8557783">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8557786">for</span>&nbsp;<span class="ident" id="8557790">_</span><span class="op" id="8557791">,</span>&nbsp;<span class="ident" id="8557793">input</span>&nbsp;<span class="op" id="8557799">:=</span>&nbsp;<span class="keyword" id="8557802">range</span>&nbsp;<span class="ident" id="8557808">float64inputs</span>&nbsp;<span class="op" id="8557822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8557826">if</span>&nbsp;<span class="ident" id="8557829">strings</span><span class="op" id="8557836">.</span><span class="ident" id="8557837">HasPrefix</span><span class="op" id="8557846">(</span><span class="ident" id="8557847">input</span><span class="op" id="8557852">,</span>&nbsp;<span class="string" id="8557854">&#34;long:&#34;</span><span class="op" id="8557861">)</span>&nbsp;<span class="op" id="8557863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8557868">if</span>&nbsp;<span class="ident" id="8557871">testing</span><span class="op" id="8557878">.</span><span class="ident" id="8557879">Short</span><span class="op" id="8557884">(</span><span class="op" id="8557885">)</span>&nbsp;<span class="op" id="8557887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8557893">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8557905">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8557910">input</span>&nbsp;<span class="op" id="8557916">=</span>&nbsp;<span class="ident" id="8557918">input</span><span class="op" id="8557923">[</span><span class="builtinfunc" id="8557924">len</span><span class="op" id="8557927">(</span><span class="string" id="8557928">&#34;long:&#34;</span><span class="op" id="8557935">)</span><span class="op" id="8557936">:</span><span class="op" id="8557937">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8557941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8557946">r</span><span class="op" id="8557947">,</span>&nbsp;<span class="ident" id="8557949">ok</span>&nbsp;<span class="op" id="8557952">:=</span>&nbsp;<span class="builtinfunc" id="8557955">new</span><span class="op" id="8557958">(</span><span class="ident" id="8557959">Rat</span><span class="op" id="8557962">)</span><span class="op" id="8557963">.</span><span class="ident" id="8557964">SetString</span><span class="op" id="8557973">(</span><span class="ident" id="8557974">input</span><span class="op" id="8557979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8557983">if</span>&nbsp;<span class="op" id="8557986">!</span><span class="ident" id="8557987">ok</span>&nbsp;<span class="op" id="8557990">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8557995">t</span><span class="op" id="8557996">.</span><span class="ident" id="8557997">Errorf</span><span class="op" id="8558003">(</span><span class="string" id="8558004">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="8558030">,</span>&nbsp;<span class="ident" id="8558032">input</span><span class="op" id="8558037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8558042">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8558053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8558057">f</span><span class="op" id="8558058">,</span>&nbsp;<span class="ident" id="8558060">exact</span>&nbsp;<span class="op" id="8558066">:=</span>&nbsp;<span class="ident" id="8558069">r</span><span class="op" id="8558070">.</span><span class="ident" id="8558071">Float32</span><span class="op" id="8558078">(</span><span class="op" id="8558079">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558084">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558139">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558180">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8558242">if</span>&nbsp;<span class="op" id="8558245">!</span><span class="ident" id="8558246">strings</span><span class="op" id="8558253">.</span><span class="ident" id="8558254">Contains</span><span class="op" id="8558262">(</span><span class="ident" id="8558263">input</span><span class="op" id="8558268">,</span>&nbsp;<span class="string" id="8558270">&#34;/&#34;</span><span class="op" id="8558273">)</span>&nbsp;<span class="op" id="8558275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8558280">e64</span><span class="op" id="8558283">,</span>&nbsp;<span class="ident" id="8558285">_</span>&nbsp;<span class="op" id="8558287">:=</span>&nbsp;<span class="ident" id="8558290">strconv</span><span class="op" id="8558297">.</span><span class="ident" id="8558298">ParseFloat</span><span class="op" id="8558308">(</span><span class="ident" id="8558309">input</span><span class="op" id="8558314">,</span>&nbsp;<span class="num" id="8558316">32</span><span class="op" id="8558318">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8558323">e</span>&nbsp;<span class="op" id="8558325">:=</span>&nbsp;<span class="builtintype" id="8558328">float32</span><span class="op" id="8558335">(</span><span class="ident" id="8558336">e64</span><span class="op" id="8558339">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558345">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558388">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558438">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8558484">switch</span>&nbsp;<span class="op" id="8558491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8558496">case</span>&nbsp;<span class="ident" id="8558501">math</span><span class="op" id="8558505">.</span><span class="ident" id="8558506">Float32bits</span><span class="op" id="8558517">(</span><span class="ident" id="8558518">e</span><span class="op" id="8558519">)</span>&nbsp;<span class="op" id="8558521">==</span>&nbsp;<span class="ident" id="8558524">math</span><span class="op" id="8558528">.</span><span class="ident" id="8558529">Float32bits</span><span class="op" id="8558540">(</span><span class="ident" id="8558541">f</span><span class="op" id="8558542">)</span><span class="op" id="8558543">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558549">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8558574">case</span>&nbsp;<span class="ident" id="8558579">f</span>&nbsp;<span class="op" id="8558581">==</span>&nbsp;<span class="num" id="8558584">0</span>&nbsp;<span class="op" id="8558586">&amp;&amp;</span>&nbsp;<span class="ident" id="8558589">r</span><span class="op" id="8558590">.</span><span class="ident" id="8558591">Num</span><span class="op" id="8558594">(</span><span class="op" id="8558595">)</span><span class="op" id="8558596">.</span><span class="ident" id="8558597">BitLen</span><span class="op" id="8558603">(</span><span class="op" id="8558604">)</span>&nbsp;<span class="op" id="8558606">==</span>&nbsp;<span class="num" id="8558609">0</span><span class="op" id="8558610">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558616">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8558671">default</span><span class="op" id="8558678">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8558684">t</span><span class="op" id="8558685">.</span><span class="ident" id="8558686">Errorf</span><span class="op" id="8558692">(</span><span class="string" id="8558693">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="8558753">,</span>&nbsp;<span class="ident" id="8558755">input</span><span class="op" id="8558760">,</span>&nbsp;<span class="ident" id="8558762">e</span><span class="op" id="8558763">,</span>&nbsp;<span class="ident" id="8558765">e</span><span class="op" id="8558766">,</span>&nbsp;<span class="ident" id="8558768">f</span><span class="op" id="8558769">,</span>&nbsp;<span class="ident" id="8558771">f</span><span class="op" id="8558772">,</span>&nbsp;<span class="ident" id="8558774">f</span><span class="op" id="8558775">-</span><span class="ident" id="8558776">e</span><span class="op" id="8558777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8558782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8558786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8558791">if</span>&nbsp;<span class="op" id="8558794">!</span><span class="ident" id="8558795">isFinite</span><span class="op" id="8558803">(</span><span class="builtintype" id="8558804">float64</span><span class="op" id="8558811">(</span><span class="ident" id="8558812">f</span><span class="op" id="8558813">)</span><span class="op" id="8558814">)</span>&nbsp;<span class="op" id="8558816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8558821">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8558832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558837">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8558881">if</span>&nbsp;<span class="op" id="8558884">!</span><span class="ident" id="8558885">checkIsBestApprox32</span><span class="op" id="8558904">(</span><span class="ident" id="8558905">t</span><span class="op" id="8558906">,</span>&nbsp;<span class="ident" id="8558908">f</span><span class="op" id="8558909">,</span>&nbsp;<span class="ident" id="8558911">r</span><span class="op" id="8558912">)</span>&nbsp;<span class="op" id="8558914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558919">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8558953">t</span><span class="op" id="8558954">.</span><span class="ident" id="8558955">Errorf</span><span class="op" id="8558961">(</span><span class="string" id="8558962">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="8558978">,</span>&nbsp;<span class="ident" id="8558980">input</span><span class="op" id="8558985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8558989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8558994">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8559040">checkNonLossyRoundtrip32</span><span class="op" id="8559064">(</span><span class="ident" id="8559065">t</span><span class="op" id="8559066">,</span>&nbsp;<span class="ident" id="8559068">f</span><span class="op" id="8559069">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8559074">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8559120">if</span>&nbsp;<span class="ident" id="8559123">wasExact</span>&nbsp;<span class="op" id="8559132">:=</span>&nbsp;<span class="builtinfunc" id="8559135">new</span><span class="op" id="8559138">(</span><span class="ident" id="8559139">Rat</span><span class="op" id="8559142">)</span><span class="op" id="8559143">.</span><span class="ident" id="8559144">SetFloat64</span><span class="op" id="8559154">(</span><span class="builtintype" id="8559155">float64</span><span class="op" id="8559162">(</span><span class="ident" id="8559163">f</span><span class="op" id="8559164">)</span><span class="op" id="8559165">)</span><span class="op" id="8559166">.</span><span class="ident" id="8559167">Cmp</span><span class="op" id="8559170">(</span><span class="ident" id="8559171">r</span><span class="op" id="8559172">)</span>&nbsp;<span class="op" id="8559174">==</span>&nbsp;<span class="num" id="8559177">0</span><span class="op" id="8559178">;</span>&nbsp;<span class="ident" id="8559180">wasExact</span>&nbsp;<span class="op" id="8559189">!=</span>&nbsp;<span class="ident" id="8559192">exact</span>&nbsp;<span class="op" id="8559198">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8559203">t</span><span class="op" id="8559204">.</span><span class="ident" id="8559205">Errorf</span><span class="op" id="8559211">(</span><span class="string" id="8559212">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="8559261">,</span>&nbsp;<span class="ident" id="8559263">input</span><span class="op" id="8559268">,</span>&nbsp;<span class="ident" id="8559270">exact</span><span class="op" id="8559275">,</span>&nbsp;<span class="ident" id="8559277">wasExact</span><span class="op" id="8559285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8559289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8559292">}</span><br>
<span class="lineno"></span><span class="op" id="8559294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="8559297">func</span>&nbsp;<span class="ident" id="8559302">TestFloat64SpecialCases</span><span class="op" id="8559325">(</span><span class="ident" id="8559326">t</span>&nbsp;<span class="op" id="8559328">*</span><span class="ident" id="8559329">testing</span><span class="op" id="8559336">.</span><span class="ident" id="8559337">T</span><span class="op" id="8559338">)</span>&nbsp;<span class="op" id="8559340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8559343">for</span>&nbsp;<span class="ident" id="8559347">_</span><span class="op" id="8559348">,</span>&nbsp;<span class="ident" id="8559350">input</span>&nbsp;<span class="op" id="8559356">:=</span>&nbsp;<span class="keyword" id="8559359">range</span>&nbsp;<span class="ident" id="8559365">float64inputs</span>&nbsp;<span class="op" id="8559379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8559383">if</span>&nbsp;<span class="ident" id="8559386">strings</span><span class="op" id="8559393">.</span><span class="ident" id="8559394">HasPrefix</span><span class="op" id="8559403">(</span><span class="ident" id="8559404">input</span><span class="op" id="8559409">,</span>&nbsp;<span class="string" id="8559411">&#34;long:&#34;</span><span class="op" id="8559418">)</span>&nbsp;<span class="op" id="8559420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8559425">if</span>&nbsp;<span class="ident" id="8559428">testing</span><span class="op" id="8559435">.</span><span class="ident" id="8559436">Short</span><span class="op" id="8559441">(</span><span class="op" id="8559442">)</span>&nbsp;<span class="op" id="8559444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8559450">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8559462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8559467">input</span>&nbsp;<span class="op" id="8559473">=</span>&nbsp;<span class="ident" id="8559475">input</span><span class="op" id="8559480">[</span><span class="builtinfunc" id="8559481">len</span><span class="op" id="8559484">(</span><span class="string" id="8559485">&#34;long:&#34;</span><span class="op" id="8559492">)</span><span class="op" id="8559493">:</span><span class="op" id="8559494">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8559498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8559503">r</span><span class="op" id="8559504">,</span>&nbsp;<span class="ident" id="8559506">ok</span>&nbsp;<span class="op" id="8559509">:=</span>&nbsp;<span class="builtinfunc" id="8559512">new</span><span class="op" id="8559515">(</span><span class="ident" id="8559516">Rat</span><span class="op" id="8559519">)</span><span class="op" id="8559520">.</span><span class="ident" id="8559521">SetString</span><span class="op" id="8559530">(</span><span class="ident" id="8559531">input</span><span class="op" id="8559536">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8559540">if</span>&nbsp;<span class="op" id="8559543">!</span><span class="ident" id="8559544">ok</span>&nbsp;<span class="op" id="8559547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8559552">t</span><span class="op" id="8559553">.</span><span class="ident" id="8559554">Errorf</span><span class="op" id="8559560">(</span><span class="string" id="8559561">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="8559587">,</span>&nbsp;<span class="ident" id="8559589">input</span><span class="op" id="8559594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8559599">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8559610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8559614">f</span><span class="op" id="8559615">,</span>&nbsp;<span class="ident" id="8559617">exact</span>&nbsp;<span class="op" id="8559623">:=</span>&nbsp;<span class="ident" id="8559626">r</span><span class="op" id="8559627">.</span><span class="ident" id="8559628">Float64</span><span class="op" id="8559635">(</span><span class="op" id="8559636">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8559641">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8559696">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8559737">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8559799">if</span>&nbsp;<span class="op" id="8559802">!</span><span class="ident" id="8559803">strings</span><span class="op" id="8559810">.</span><span class="ident" id="8559811">Contains</span><span class="op" id="8559819">(</span><span class="ident" id="8559820">input</span><span class="op" id="8559825">,</span>&nbsp;<span class="string" id="8559827">&#34;/&#34;</span><span class="op" id="8559830">)</span>&nbsp;<span class="op" id="8559832">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8559837">e</span><span class="op" id="8559838">,</span>&nbsp;<span class="ident" id="8559840">_</span>&nbsp;<span class="op" id="8559842">:=</span>&nbsp;<span class="ident" id="8559845">strconv</span><span class="op" id="8559852">.</span><span class="ident" id="8559853">ParseFloat</span><span class="op" id="8559863">(</span><span class="ident" id="8559864">input</span><span class="op" id="8559869">,</span>&nbsp;<span class="num" id="8559871">64</span><span class="op" id="8559873">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8559879">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8559922">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8559972">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8560018">switch</span>&nbsp;<span class="op" id="8560025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8560030">case</span>&nbsp;<span class="ident" id="8560035">math</span><span class="op" id="8560039">.</span><span class="ident" id="8560040">Float64bits</span><span class="op" id="8560051">(</span><span class="ident" id="8560052">e</span><span class="op" id="8560053">)</span>&nbsp;<span class="op" id="8560055">==</span>&nbsp;<span class="ident" id="8560058">math</span><span class="op" id="8560062">.</span><span class="ident" id="8560063">Float64bits</span><span class="op" id="8560074">(</span><span class="ident" id="8560075">f</span><span class="op" id="8560076">)</span><span class="op" id="8560077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8560083">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8560108">case</span>&nbsp;<span class="ident" id="8560113">f</span>&nbsp;<span class="op" id="8560115">==</span>&nbsp;<span class="num" id="8560118">0</span>&nbsp;<span class="op" id="8560120">&amp;&amp;</span>&nbsp;<span class="ident" id="8560123">r</span><span class="op" id="8560124">.</span><span class="ident" id="8560125">Num</span><span class="op" id="8560128">(</span><span class="op" id="8560129">)</span><span class="op" id="8560130">.</span><span class="ident" id="8560131">BitLen</span><span class="op" id="8560137">(</span><span class="op" id="8560138">)</span>&nbsp;<span class="op" id="8560140">==</span>&nbsp;<span class="num" id="8560143">0</span><span class="op" id="8560144">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8560150">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8560205">default</span><span class="op" id="8560212">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8560218">t</span><span class="op" id="8560219">.</span><span class="ident" id="8560220">Errorf</span><span class="op" id="8560226">(</span><span class="string" id="8560227">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="8560287">,</span>&nbsp;<span class="ident" id="8560289">input</span><span class="op" id="8560294">,</span>&nbsp;<span class="ident" id="8560296">e</span><span class="op" id="8560297">,</span>&nbsp;<span class="ident" id="8560299">e</span><span class="op" id="8560300">,</span>&nbsp;<span class="ident" id="8560302">f</span><span class="op" id="8560303">,</span>&nbsp;<span class="ident" id="8560305">f</span><span class="op" id="8560306">,</span>&nbsp;<span class="ident" id="8560308">f</span><span class="op" id="8560309">-</span><span class="ident" id="8560310">e</span><span class="op" id="8560311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8560316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8560320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8560325">if</span>&nbsp;<span class="op" id="8560328">!</span><span class="ident" id="8560329">isFinite</span><span class="op" id="8560337">(</span><span class="ident" id="8560338">f</span><span class="op" id="8560339">)</span>&nbsp;<span class="op" id="8560341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8560346">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8560357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8560362">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8560406">if</span>&nbsp;<span class="op" id="8560409">!</span><span class="ident" id="8560410">checkIsBestApprox64</span><span class="op" id="8560429">(</span><span class="ident" id="8560430">t</span><span class="op" id="8560431">,</span>&nbsp;<span class="ident" id="8560433">f</span><span class="op" id="8560434">,</span>&nbsp;<span class="ident" id="8560436">r</span><span class="op" id="8560437">)</span>&nbsp;<span class="op" id="8560439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8560444">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8560478">t</span><span class="op" id="8560479">.</span><span class="ident" id="8560480">Errorf</span><span class="op" id="8560486">(</span><span class="string" id="8560487">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="8560503">,</span>&nbsp;<span class="ident" id="8560505">input</span><span class="op" id="8560510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8560514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8560519">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8560565">checkNonLossyRoundtrip64</span><span class="op" id="8560589">(</span><span class="ident" id="8560590">t</span><span class="op" id="8560591">,</span>&nbsp;<span class="ident" id="8560593">f</span><span class="op" id="8560594">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8560599">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8560645">if</span>&nbsp;<span class="ident" id="8560648">wasExact</span>&nbsp;<span class="op" id="8560657">:=</span>&nbsp;<span class="builtinfunc" id="8560660">new</span><span class="op" id="8560663">(</span><span class="ident" id="8560664">Rat</span><span class="op" id="8560667">)</span><span class="op" id="8560668">.</span><span class="ident" id="8560669">SetFloat64</span><span class="op" id="8560679">(</span><span class="ident" id="8560680">f</span><span class="op" id="8560681">)</span><span class="op" id="8560682">.</span><span class="ident" id="8560683">Cmp</span><span class="op" id="8560686">(</span><span class="ident" id="8560687">r</span><span class="op" id="8560688">)</span>&nbsp;<span class="op" id="8560690">==</span>&nbsp;<span class="num" id="8560693">0</span><span class="op" id="8560694">;</span>&nbsp;<span class="ident" id="8560696">wasExact</span>&nbsp;<span class="op" id="8560705">!=</span>&nbsp;<span class="ident" id="8560708">exact</span>&nbsp;<span class="op" id="8560714">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8560719">t</span><span class="op" id="8560720">.</span><span class="ident" id="8560721">Errorf</span><span class="op" id="8560727">(</span><span class="string" id="8560728">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="8560777">,</span>&nbsp;<span class="ident" id="8560779">input</span><span class="op" id="8560784">,</span>&nbsp;<span class="ident" id="8560786">exact</span><span class="op" id="8560791">,</span>&nbsp;<span class="ident" id="8560793">wasExact</span><span class="op" id="8560801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8560805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8560808">}</span><br>
<span class="lineno"></span><span class="op" id="8560810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="8560813">func</span>&nbsp;<span class="ident" id="8560818">TestFloat32Distribution</span><span class="op" id="8560841">(</span><span class="ident" id="8560842">t</span>&nbsp;<span class="op" id="8560844">*</span><span class="ident" id="8560845">testing</span><span class="op" id="8560852">.</span><span class="ident" id="8560853">T</span><span class="op" id="8560854">)</span>&nbsp;<span class="op" id="8560856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8560859">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8560919">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8560979">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8561031">var</span>&nbsp;<span class="ident" id="8561035">add</span>&nbsp;<span class="op" id="8561039">=</span>&nbsp;<span class="op" id="8561041">[</span><span class="op" id="8561042">]</span><span class="ident" id="8561043">int64</span><span class="op" id="8561048">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8561052">0</span><span class="op" id="8561053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8561057">1</span><span class="op" id="8561058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8561062">3</span><span class="op" id="8561063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8561067">5</span><span class="op" id="8561068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8561072">7</span><span class="op" id="8561073">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8561077">9</span><span class="op" id="8561078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8561082">11</span><span class="op" id="8561084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8561087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8561090">var</span>&nbsp;<span class="ident" id="8561094">winc</span><span class="op" id="8561098">,</span>&nbsp;<span class="ident" id="8561100">einc</span>&nbsp;<span class="op" id="8561105">=</span>&nbsp;<span class="ident" id="8561107">uint64</span><span class="op" id="8561113">(</span><span class="num" id="8561114">1</span><span class="op" id="8561115">)</span><span class="op" id="8561116">,</span>&nbsp;<span class="num" id="8561118">1</span>&nbsp;<span class="comment" id="8561120">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8561152">if</span>&nbsp;<span class="ident" id="8561155">testing</span><span class="op" id="8561162">.</span><span class="ident" id="8561163">Short</span><span class="op" id="8561168">(</span><span class="op" id="8561169">)</span>&nbsp;<span class="op" id="8561171">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561175">winc</span><span class="op" id="8561179">,</span>&nbsp;<span class="ident" id="8561181">einc</span>&nbsp;<span class="op" id="8561186">=</span>&nbsp;<span class="num" id="8561188">5</span><span class="op" id="8561189">,</span>&nbsp;<span class="num" id="8561191">15</span>&nbsp;<span class="comment" id="8561194">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8561227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8561231">for</span>&nbsp;<span class="ident" id="8561235">_</span><span class="op" id="8561236">,</span>&nbsp;<span class="ident" id="8561238">sign</span>&nbsp;<span class="op" id="8561243">:=</span>&nbsp;<span class="keyword" id="8561246">range</span>&nbsp;<span class="string" id="8561252">&#34;+-&#34;</span>&nbsp;<span class="op" id="8561257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8561261">for</span>&nbsp;<span class="ident" id="8561265">_</span><span class="op" id="8561266">,</span>&nbsp;<span class="ident" id="8561268">a</span>&nbsp;<span class="op" id="8561270">:=</span>&nbsp;<span class="keyword" id="8561273">range</span>&nbsp;<span class="ident" id="8561279">add</span>&nbsp;<span class="op" id="8561283">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8561288">for</span>&nbsp;<span class="ident" id="8561292">wid</span>&nbsp;<span class="op" id="8561296">:=</span>&nbsp;<span class="ident" id="8561299">uint64</span><span class="op" id="8561305">(</span><span class="num" id="8561306">0</span><span class="op" id="8561307">)</span><span class="op" id="8561308">;</span>&nbsp;<span class="ident" id="8561310">wid</span>&nbsp;<span class="op" id="8561314">&lt;</span>&nbsp;<span class="num" id="8561316">30</span><span class="op" id="8561318">;</span>&nbsp;<span class="ident" id="8561320">wid</span>&nbsp;<span class="op" id="8561324">+=</span>&nbsp;<span class="ident" id="8561327">winc</span>&nbsp;<span class="op" id="8561332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561338">b</span>&nbsp;<span class="op" id="8561340">:=</span>&nbsp;<span class="num" id="8561343">1</span><span class="op" id="8561344">&lt;&lt;</span><span class="ident" id="8561346">wid</span>&nbsp;<span class="op" id="8561350">+</span>&nbsp;<span class="ident" id="8561352">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8561358">if</span>&nbsp;<span class="ident" id="8561361">sign</span>&nbsp;<span class="op" id="8561366">==</span>&nbsp;<span class="string" id="8561369">&#39;-&#39;</span>&nbsp;<span class="op" id="8561373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561380">b</span>&nbsp;<span class="op" id="8561382">=</span>&nbsp;<span class="op" id="8561384">-</span><span class="ident" id="8561385">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8561391">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8561397">for</span>&nbsp;<span class="ident" id="8561401">exp</span>&nbsp;<span class="op" id="8561405">:=</span>&nbsp;<span class="op" id="8561408">-</span><span class="num" id="8561409">150</span><span class="op" id="8561412">;</span>&nbsp;<span class="ident" id="8561414">exp</span>&nbsp;<span class="op" id="8561418">&lt;</span>&nbsp;<span class="num" id="8561420">150</span><span class="op" id="8561423">;</span>&nbsp;<span class="ident" id="8561425">exp</span>&nbsp;<span class="op" id="8561429">+=</span>&nbsp;<span class="ident" id="8561432">einc</span>&nbsp;<span class="op" id="8561437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561444">num</span><span class="op" id="8561447">,</span>&nbsp;<span class="ident" id="8561449">den</span>&nbsp;<span class="op" id="8561453">:=</span>&nbsp;<span class="ident" id="8561456">NewInt</span><span class="op" id="8561462">(</span><span class="ident" id="8561463">b</span><span class="op" id="8561464">)</span><span class="op" id="8561465">,</span>&nbsp;<span class="ident" id="8561467">NewInt</span><span class="op" id="8561473">(</span><span class="num" id="8561474">1</span><span class="op" id="8561475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8561482">if</span>&nbsp;<span class="ident" id="8561485">exp</span>&nbsp;<span class="op" id="8561489">&gt;</span>&nbsp;<span class="num" id="8561491">0</span>&nbsp;<span class="op" id="8561493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561501">num</span><span class="op" id="8561504">.</span><span class="ident" id="8561505">Lsh</span><span class="op" id="8561508">(</span><span class="ident" id="8561509">num</span><span class="op" id="8561512">,</span>&nbsp;<span class="builtintype" id="8561514">uint</span><span class="op" id="8561518">(</span><span class="ident" id="8561519">exp</span><span class="op" id="8561522">)</span><span class="op" id="8561523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8561530">}</span>&nbsp;<span class="keyword" id="8561532">else</span>&nbsp;<span class="op" id="8561537">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561545">den</span><span class="op" id="8561548">.</span><span class="ident" id="8561549">Lsh</span><span class="op" id="8561552">(</span><span class="ident" id="8561553">den</span><span class="op" id="8561556">,</span>&nbsp;<span class="builtintype" id="8561558">uint</span><span class="op" id="8561562">(</span><span class="op" id="8561563">-</span><span class="ident" id="8561564">exp</span><span class="op" id="8561567">)</span><span class="op" id="8561568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8561575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561582">r</span>&nbsp;<span class="op" id="8561584">:=</span>&nbsp;<span class="builtinfunc" id="8561587">new</span><span class="op" id="8561590">(</span><span class="ident" id="8561591">Rat</span><span class="op" id="8561594">)</span><span class="op" id="8561595">.</span><span class="ident" id="8561596">SetFrac</span><span class="op" id="8561603">(</span><span class="ident" id="8561604">num</span><span class="op" id="8561607">,</span>&nbsp;<span class="ident" id="8561609">den</span><span class="op" id="8561612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561619">f</span><span class="op" id="8561620">,</span>&nbsp;<span class="ident" id="8561622">_</span>&nbsp;<span class="op" id="8561624">:=</span>&nbsp;<span class="ident" id="8561627">r</span><span class="op" id="8561628">.</span><span class="ident" id="8561629">Float32</span><span class="op" id="8561636">(</span><span class="op" id="8561637">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8561645">if</span>&nbsp;<span class="op" id="8561648">!</span><span class="ident" id="8561649">checkIsBestApprox32</span><span class="op" id="8561668">(</span><span class="ident" id="8561669">t</span><span class="op" id="8561670">,</span>&nbsp;<span class="ident" id="8561672">f</span><span class="op" id="8561673">,</span>&nbsp;<span class="ident" id="8561675">r</span><span class="op" id="8561676">)</span>&nbsp;<span class="op" id="8561678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8561686">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561723">t</span><span class="op" id="8561724">.</span><span class="ident" id="8561725">Errorf</span><span class="op" id="8561731">(</span><span class="string" id="8561732">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="8561795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561804">b</span><span class="op" id="8561805">,</span>&nbsp;<span class="ident" id="8561807">exp</span><span class="op" id="8561810">,</span>&nbsp;<span class="ident" id="8561812">f</span><span class="op" id="8561813">,</span>&nbsp;<span class="ident" id="8561815">f</span><span class="op" id="8561816">,</span>&nbsp;<span class="ident" id="8561818">math</span><span class="op" id="8561822">.</span><span class="ident" id="8561823">Ldexp</span><span class="op" id="8561828">(</span><span class="builtintype" id="8561829">float64</span><span class="op" id="8561836">(</span><span class="ident" id="8561837">b</span><span class="op" id="8561838">)</span><span class="op" id="8561839">,</span>&nbsp;<span class="ident" id="8561841">exp</span><span class="op" id="8561844">)</span><span class="op" id="8561845">,</span>&nbsp;<span class="ident" id="8561847">r</span><span class="op" id="8561848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8561855">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8561863">checkNonLossyRoundtrip32</span><span class="op" id="8561887">(</span><span class="ident" id="8561888">t</span><span class="op" id="8561889">,</span>&nbsp;<span class="ident" id="8561891">f</span><span class="op" id="8561892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8561898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8561903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8561907">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8561910">}</span><br>
<span class="lineno"></span><span class="op" id="8561912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8561915">func</span>&nbsp;<span class="ident" id="8561920">TestFloat64Distribution</span><span class="op" id="8561943">(</span><span class="ident" id="8561944">t</span>&nbsp;<span class="op" id="8561946">*</span><span class="ident" id="8561947">testing</span><span class="op" id="8561954">.</span><span class="ident" id="8561955">T</span><span class="op" id="8561956">)</span>&nbsp;<span class="op" id="8561958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8561961">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8562021">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8562081">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8562133">var</span>&nbsp;<span class="ident" id="8562137">add</span>&nbsp;<span class="op" id="8562141">=</span>&nbsp;<span class="op" id="8562143">[</span><span class="op" id="8562144">]</span><span class="ident" id="8562145">int64</span><span class="op" id="8562150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8562154">0</span><span class="op" id="8562155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8562159">1</span><span class="op" id="8562160">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8562164">3</span><span class="op" id="8562165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8562169">5</span><span class="op" id="8562170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8562174">7</span><span class="op" id="8562175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8562179">9</span><span class="op" id="8562180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8562184">11</span><span class="op" id="8562186">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8562189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8562192">var</span>&nbsp;<span class="ident" id="8562196">winc</span><span class="op" id="8562200">,</span>&nbsp;<span class="ident" id="8562202">einc</span>&nbsp;<span class="op" id="8562207">=</span>&nbsp;<span class="ident" id="8562209">uint64</span><span class="op" id="8562215">(</span><span class="num" id="8562216">1</span><span class="op" id="8562217">)</span><span class="op" id="8562218">,</span>&nbsp;<span class="num" id="8562220">1</span>&nbsp;<span class="comment" id="8562222">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8562253">if</span>&nbsp;<span class="ident" id="8562256">testing</span><span class="op" id="8562263">.</span><span class="ident" id="8562264">Short</span><span class="op" id="8562269">(</span><span class="op" id="8562270">)</span>&nbsp;<span class="op" id="8562272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562276">winc</span><span class="op" id="8562280">,</span>&nbsp;<span class="ident" id="8562282">einc</span>&nbsp;<span class="op" id="8562287">=</span>&nbsp;<span class="num" id="8562289">10</span><span class="op" id="8562291">,</span>&nbsp;<span class="num" id="8562293">500</span>&nbsp;<span class="comment" id="8562297">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8562330">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8562334">for</span>&nbsp;<span class="ident" id="8562338">_</span><span class="op" id="8562339">,</span>&nbsp;<span class="ident" id="8562341">sign</span>&nbsp;<span class="op" id="8562346">:=</span>&nbsp;<span class="keyword" id="8562349">range</span>&nbsp;<span class="string" id="8562355">&#34;+-&#34;</span>&nbsp;<span class="op" id="8562360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8562364">for</span>&nbsp;<span class="ident" id="8562368">_</span><span class="op" id="8562369">,</span>&nbsp;<span class="ident" id="8562371">a</span>&nbsp;<span class="op" id="8562373">:=</span>&nbsp;<span class="keyword" id="8562376">range</span>&nbsp;<span class="ident" id="8562382">add</span>&nbsp;<span class="op" id="8562386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8562391">for</span>&nbsp;<span class="ident" id="8562395">wid</span>&nbsp;<span class="op" id="8562399">:=</span>&nbsp;<span class="ident" id="8562402">uint64</span><span class="op" id="8562408">(</span><span class="num" id="8562409">0</span><span class="op" id="8562410">)</span><span class="op" id="8562411">;</span>&nbsp;<span class="ident" id="8562413">wid</span>&nbsp;<span class="op" id="8562417">&lt;</span>&nbsp;<span class="num" id="8562419">60</span><span class="op" id="8562421">;</span>&nbsp;<span class="ident" id="8562423">wid</span>&nbsp;<span class="op" id="8562427">+=</span>&nbsp;<span class="ident" id="8562430">winc</span>&nbsp;<span class="op" id="8562435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562441">b</span>&nbsp;<span class="op" id="8562443">:=</span>&nbsp;<span class="num" id="8562446">1</span><span class="op" id="8562447">&lt;&lt;</span><span class="ident" id="8562449">wid</span>&nbsp;<span class="op" id="8562453">+</span>&nbsp;<span class="ident" id="8562455">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8562461">if</span>&nbsp;<span class="ident" id="8562464">sign</span>&nbsp;<span class="op" id="8562469">==</span>&nbsp;<span class="string" id="8562472">&#39;-&#39;</span>&nbsp;<span class="op" id="8562476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562483">b</span>&nbsp;<span class="op" id="8562485">=</span>&nbsp;<span class="op" id="8562487">-</span><span class="ident" id="8562488">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8562494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8562500">for</span>&nbsp;<span class="ident" id="8562504">exp</span>&nbsp;<span class="op" id="8562508">:=</span>&nbsp;<span class="op" id="8562511">-</span><span class="num" id="8562512">1100</span><span class="op" id="8562516">;</span>&nbsp;<span class="ident" id="8562518">exp</span>&nbsp;<span class="op" id="8562522">&lt;</span>&nbsp;<span class="num" id="8562524">1100</span><span class="op" id="8562528">;</span>&nbsp;<span class="ident" id="8562530">exp</span>&nbsp;<span class="op" id="8562534">+=</span>&nbsp;<span class="ident" id="8562537">einc</span>&nbsp;<span class="op" id="8562542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562549">num</span><span class="op" id="8562552">,</span>&nbsp;<span class="ident" id="8562554">den</span>&nbsp;<span class="op" id="8562558">:=</span>&nbsp;<span class="ident" id="8562561">NewInt</span><span class="op" id="8562567">(</span><span class="ident" id="8562568">b</span><span class="op" id="8562569">)</span><span class="op" id="8562570">,</span>&nbsp;<span class="ident" id="8562572">NewInt</span><span class="op" id="8562578">(</span><span class="num" id="8562579">1</span><span class="op" id="8562580">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8562587">if</span>&nbsp;<span class="ident" id="8562590">exp</span>&nbsp;<span class="op" id="8562594">&gt;</span>&nbsp;<span class="num" id="8562596">0</span>&nbsp;<span class="op" id="8562598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562606">num</span><span class="op" id="8562609">.</span><span class="ident" id="8562610">Lsh</span><span class="op" id="8562613">(</span><span class="ident" id="8562614">num</span><span class="op" id="8562617">,</span>&nbsp;<span class="builtintype" id="8562619">uint</span><span class="op" id="8562623">(</span><span class="ident" id="8562624">exp</span><span class="op" id="8562627">)</span><span class="op" id="8562628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8562635">}</span>&nbsp;<span class="keyword" id="8562637">else</span>&nbsp;<span class="op" id="8562642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562650">den</span><span class="op" id="8562653">.</span><span class="ident" id="8562654">Lsh</span><span class="op" id="8562657">(</span><span class="ident" id="8562658">den</span><span class="op" id="8562661">,</span>&nbsp;<span class="builtintype" id="8562663">uint</span><span class="op" id="8562667">(</span><span class="op" id="8562668">-</span><span class="ident" id="8562669">exp</span><span class="op" id="8562672">)</span><span class="op" id="8562673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8562680">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562687">r</span>&nbsp;<span class="op" id="8562689">:=</span>&nbsp;<span class="builtinfunc" id="8562692">new</span><span class="op" id="8562695">(</span><span class="ident" id="8562696">Rat</span><span class="op" id="8562699">)</span><span class="op" id="8562700">.</span><span class="ident" id="8562701">SetFrac</span><span class="op" id="8562708">(</span><span class="ident" id="8562709">num</span><span class="op" id="8562712">,</span>&nbsp;<span class="ident" id="8562714">den</span><span class="op" id="8562717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562724">f</span><span class="op" id="8562725">,</span>&nbsp;<span class="ident" id="8562727">_</span>&nbsp;<span class="op" id="8562729">:=</span>&nbsp;<span class="ident" id="8562732">r</span><span class="op" id="8562733">.</span><span class="ident" id="8562734">Float64</span><span class="op" id="8562741">(</span><span class="op" id="8562742">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8562750">if</span>&nbsp;<span class="op" id="8562753">!</span><span class="ident" id="8562754">checkIsBestApprox64</span><span class="op" id="8562773">(</span><span class="ident" id="8562774">t</span><span class="op" id="8562775">,</span>&nbsp;<span class="ident" id="8562777">f</span><span class="op" id="8562778">,</span>&nbsp;<span class="ident" id="8562780">r</span><span class="op" id="8562781">)</span>&nbsp;<span class="op" id="8562783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8562791">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562828">t</span><span class="op" id="8562829">.</span><span class="ident" id="8562830">Errorf</span><span class="op" id="8562836">(</span><span class="string" id="8562837">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="8562900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562909">b</span><span class="op" id="8562910">,</span>&nbsp;<span class="ident" id="8562912">exp</span><span class="op" id="8562915">,</span>&nbsp;<span class="ident" id="8562917">f</span><span class="op" id="8562918">,</span>&nbsp;<span class="ident" id="8562920">f</span><span class="op" id="8562921">,</span>&nbsp;<span class="ident" id="8562923">math</span><span class="op" id="8562927">.</span><span class="ident" id="8562928">Ldexp</span><span class="op" id="8562933">(</span><span class="builtintype" id="8562934">float64</span><span class="op" id="8562941">(</span><span class="ident" id="8562942">b</span><span class="op" id="8562943">)</span><span class="op" id="8562944">,</span>&nbsp;<span class="ident" id="8562946">exp</span><span class="op" id="8562949">)</span><span class="op" id="8562950">,</span>&nbsp;<span class="ident" id="8562952">r</span><span class="op" id="8562953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8562960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8562968">checkNonLossyRoundtrip64</span><span class="op" id="8562992">(</span><span class="ident" id="8562993">t</span><span class="op" id="8562994">,</span>&nbsp;<span class="ident" id="8562996">f</span><span class="op" id="8562997">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8563003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8563008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8563012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8563015">}</span><br>
<span class="lineno"></span><span class="op" id="8563017">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="8563020">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="8563092">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="8563108">func</span>&nbsp;<span class="ident" id="8563113">TestSetFloat64NonFinite</span><span class="op" id="8563136">(</span><span class="ident" id="8563137">t</span>&nbsp;<span class="op" id="8563139">*</span><span class="ident" id="8563140">testing</span><span class="op" id="8563147">.</span><span class="ident" id="8563148">T</span><span class="op" id="8563149">)</span>&nbsp;<span class="op" id="8563151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8563154">for</span>&nbsp;<span class="ident" id="8563158">_</span><span class="op" id="8563159">,</span>&nbsp;<span class="ident" id="8563161">f</span>&nbsp;<span class="op" id="8563163">:=</span>&nbsp;<span class="keyword" id="8563166">range</span>&nbsp;<span class="op" id="8563172">[</span><span class="op" id="8563173">]</span><span class="builtintype" id="8563174">float64</span><span class="op" id="8563181">{</span><span class="ident" id="8563182">math</span><span class="op" id="8563186">.</span><span class="ident" id="8563187">NaN</span><span class="op" id="8563190">(</span><span class="op" id="8563191">)</span><span class="op" id="8563192">,</span>&nbsp;<span class="ident" id="8563194">math</span><span class="op" id="8563198">.</span><span class="ident" id="8563199">Inf</span><span class="op" id="8563202">(</span><span class="op" id="8563203">+</span><span class="num" id="8563204">1</span><span class="op" id="8563205">)</span><span class="op" id="8563206">,</span>&nbsp;<span class="ident" id="8563208">math</span><span class="op" id="8563212">.</span><span class="ident" id="8563213">Inf</span><span class="op" id="8563216">(</span><span class="op" id="8563217">-</span><span class="num" id="8563218">1</span><span class="op" id="8563219">)</span><span class="op" id="8563220">}</span>&nbsp;<span class="op" id="8563222">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8563226">var</span>&nbsp;<span class="ident" id="8563230">r</span>&nbsp;<span class="ident" id="8563232">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8563238">if</span>&nbsp;<span class="ident" id="8563241">r2</span>&nbsp;<span class="op" id="8563244">:=</span>&nbsp;<span class="ident" id="8563247">r</span><span class="op" id="8563248">.</span><span class="ident" id="8563249">SetFloat64</span><span class="op" id="8563259">(</span><span class="ident" id="8563260">f</span><span class="op" id="8563261">)</span><span class="op" id="8563262">;</span>&nbsp;<span class="ident" id="8563264">r2</span>&nbsp;<span class="op" id="8563267">!=</span>&nbsp;<span class="ident" id="8563270">nil</span>&nbsp;<span class="op" id="8563274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8563279">t</span><span class="op" id="8563280">.</span><span class="ident" id="8563281">Errorf</span><span class="op" id="8563287">(</span><span class="string" id="8563288">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="8563321">,</span>&nbsp;<span class="ident" id="8563323">f</span><span class="op" id="8563324">,</span>&nbsp;<span class="ident" id="8563326">r2</span><span class="op" id="8563328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8563332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8563335">}</span><br>
<span class="lineno">1015</span><span class="op" id="8563337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8563340">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="8563413">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="8563440">func</span>&nbsp;<span class="ident" id="8563445">checkNonLossyRoundtrip32</span><span class="op" id="8563469">(</span><span class="ident" id="8563470">t</span>&nbsp;<span class="op" id="8563472">*</span><span class="ident" id="8563473">testing</span><span class="op" id="8563480">.</span><span class="ident" id="8563481">T</span><span class="op" id="8563482">,</span>&nbsp;<span class="ident" id="8563484">f</span>&nbsp;<span class="builtintype" id="8563486">float32</span><span class="op" id="8563493">)</span>&nbsp;<span class="op" id="8563495">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8563498">if</span>&nbsp;<span class="op" id="8563501">!</span><span class="ident" id="8563502">isFinite</span><span class="op" id="8563510">(</span><span class="builtintype" id="8563511">float64</span><span class="op" id="8563518">(</span><span class="ident" id="8563519">f</span><span class="op" id="8563520">)</span><span class="op" id="8563521">)</span>&nbsp;<span class="op" id="8563523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8563527">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8563535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8563538">r</span>&nbsp;<span class="op" id="8563540">:=</span>&nbsp;<span class="builtinfunc" id="8563543">new</span><span class="op" id="8563546">(</span><span class="ident" id="8563547">Rat</span><span class="op" id="8563550">)</span><span class="op" id="8563551">.</span><span class="ident" id="8563552">SetFloat64</span><span class="op" id="8563562">(</span><span class="builtintype" id="8563563">float64</span><span class="op" id="8563570">(</span><span class="ident" id="8563571">f</span><span class="op" id="8563572">)</span><span class="op" id="8563573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8563576">if</span>&nbsp;<span class="ident" id="8563579">r</span>&nbsp;<span class="op" id="8563581">==</span>&nbsp;<span class="ident" id="8563584">nil</span>&nbsp;<span class="op" id="8563588">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8563592">t</span><span class="op" id="8563593">.</span><span class="ident" id="8563594">Errorf</span><span class="op" id="8563600">(</span><span class="string" id="8563601">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="8563642">,</span>&nbsp;<span class="ident" id="8563644">f</span><span class="op" id="8563645">,</span>&nbsp;<span class="ident" id="8563647">f</span><span class="op" id="8563648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8563652">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8563660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8563663">f2</span><span class="op" id="8563665">,</span>&nbsp;<span class="ident" id="8563667">exact</span>&nbsp;<span class="op" id="8563673">:=</span>&nbsp;<span class="ident" id="8563676">r</span><span class="op" id="8563677">.</span><span class="ident" id="8563678">Float32</span><span class="op" id="8563685">(</span><span class="op" id="8563686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8563689">if</span>&nbsp;<span class="ident" id="8563692">f</span>&nbsp;<span class="op" id="8563694">!=</span>&nbsp;<span class="ident" id="8563697">f2</span>&nbsp;<span class="op" id="8563700">||</span>&nbsp;<span class="op" id="8563703">!</span><span class="ident" id="8563704">exact</span>&nbsp;<span class="op" id="8563710">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8563714">t</span><span class="op" id="8563715">.</span><span class="ident" id="8563716">Errorf</span><span class="op" id="8563722">(</span><span class="string" id="8563723">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="8563806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8563811">f</span><span class="op" id="8563812">,</span>&nbsp;<span class="ident" id="8563814">f2</span><span class="op" id="8563816">,</span>&nbsp;<span class="ident" id="8563818">f2</span><span class="op" id="8563820">,</span>&nbsp;<span class="ident" id="8563822">exact</span><span class="op" id="8563827">,</span>&nbsp;<span class="ident" id="8563829">f</span><span class="op" id="8563830">,</span>&nbsp;<span class="ident" id="8563832">f</span><span class="op" id="8563833">,</span>&nbsp;<span class="ident" id="8563835">true</span><span class="op" id="8563839">,</span>&nbsp;<span class="ident" id="8563841">f2</span><span class="op" id="8563843">-</span><span class="ident" id="8563844">f</span><span class="op" id="8563845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8563848">}</span><br>
<span class="lineno"></span><span class="op" id="8563850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="8563853">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="8563926">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="8563953">func</span>&nbsp;<span class="ident" id="8563958">checkNonLossyRoundtrip64</span><span class="op" id="8563982">(</span><span class="ident" id="8563983">t</span>&nbsp;<span class="op" id="8563985">*</span><span class="ident" id="8563986">testing</span><span class="op" id="8563993">.</span><span class="ident" id="8563994">T</span><span class="op" id="8563995">,</span>&nbsp;<span class="ident" id="8563997">f</span>&nbsp;<span class="builtintype" id="8563999">float64</span><span class="op" id="8564006">)</span>&nbsp;<span class="op" id="8564008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8564011">if</span>&nbsp;<span class="op" id="8564014">!</span><span class="ident" id="8564015">isFinite</span><span class="op" id="8564023">(</span><span class="ident" id="8564024">f</span><span class="op" id="8564025">)</span>&nbsp;<span class="op" id="8564027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8564031">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8564039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8564042">r</span>&nbsp;<span class="op" id="8564044">:=</span>&nbsp;<span class="builtinfunc" id="8564047">new</span><span class="op" id="8564050">(</span><span class="ident" id="8564051">Rat</span><span class="op" id="8564054">)</span><span class="op" id="8564055">.</span><span class="ident" id="8564056">SetFloat64</span><span class="op" id="8564066">(</span><span class="ident" id="8564067">f</span><span class="op" id="8564068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8564071">if</span>&nbsp;<span class="ident" id="8564074">r</span>&nbsp;<span class="op" id="8564076">==</span>&nbsp;<span class="ident" id="8564079">nil</span>&nbsp;<span class="op" id="8564083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8564087">t</span><span class="op" id="8564088">.</span><span class="ident" id="8564089">Errorf</span><span class="op" id="8564095">(</span><span class="string" id="8564096">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="8564128">,</span>&nbsp;<span class="ident" id="8564130">f</span><span class="op" id="8564131">,</span>&nbsp;<span class="ident" id="8564133">f</span><span class="op" id="8564134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8564138">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8564146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8564149">f2</span><span class="op" id="8564151">,</span>&nbsp;<span class="ident" id="8564153">exact</span>&nbsp;<span class="op" id="8564159">:=</span>&nbsp;<span class="ident" id="8564162">r</span><span class="op" id="8564163">.</span><span class="ident" id="8564164">Float64</span><span class="op" id="8564171">(</span><span class="op" id="8564172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8564175">if</span>&nbsp;<span class="ident" id="8564178">f</span>&nbsp;<span class="op" id="8564180">!=</span>&nbsp;<span class="ident" id="8564183">f2</span>&nbsp;<span class="op" id="8564186">||</span>&nbsp;<span class="op" id="8564189">!</span><span class="ident" id="8564190">exact</span>&nbsp;<span class="op" id="8564196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8564200">t</span><span class="op" id="8564201">.</span><span class="ident" id="8564202">Errorf</span><span class="op" id="8564208">(</span><span class="string" id="8564209">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="8564283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8564288">f</span><span class="op" id="8564289">,</span>&nbsp;<span class="ident" id="8564291">f2</span><span class="op" id="8564293">,</span>&nbsp;<span class="ident" id="8564295">f2</span><span class="op" id="8564297">,</span>&nbsp;<span class="ident" id="8564299">exact</span><span class="op" id="8564304">,</span>&nbsp;<span class="ident" id="8564306">f</span><span class="op" id="8564307">,</span>&nbsp;<span class="ident" id="8564309">f</span><span class="op" id="8564310">,</span>&nbsp;<span class="ident" id="8564312">true</span><span class="op" id="8564316">,</span>&nbsp;<span class="ident" id="8564318">f2</span><span class="op" id="8564320">-</span><span class="ident" id="8564321">f</span><span class="op" id="8564322">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8564325">}</span><br>
<span class="lineno"></span><span class="op" id="8564327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8564330">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="8564388">func</span>&nbsp;<span class="ident" id="8564393">delta</span><span class="op" id="8564398">(</span><span class="ident" id="8564399">r</span>&nbsp;<span class="op" id="8564401">*</span><span class="ident" id="8564402">Rat</span><span class="op" id="8564405">,</span>&nbsp;<span class="ident" id="8564407">f</span>&nbsp;<span class="builtintype" id="8564409">float64</span><span class="op" id="8564416">)</span>&nbsp;<span class="op" id="8564418">*</span><span class="ident" id="8564419">Rat</span>&nbsp;<span class="op" id="8564423">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8564426">d</span>&nbsp;<span class="op" id="8564428">:=</span>&nbsp;<span class="builtinfunc" id="8564431">new</span><span class="op" id="8564434">(</span><span class="ident" id="8564435">Rat</span><span class="op" id="8564438">)</span><span class="op" id="8564439">.</span><span class="ident" id="8564440">Sub</span><span class="op" id="8564443">(</span><span class="ident" id="8564444">r</span><span class="op" id="8564445">,</span>&nbsp;<span class="builtinfunc" id="8564447">new</span><span class="op" id="8564450">(</span><span class="ident" id="8564451">Rat</span><span class="op" id="8564454">)</span><span class="op" id="8564455">.</span><span class="ident" id="8564456">SetFloat64</span><span class="op" id="8564466">(</span><span class="ident" id="8564467">f</span><span class="op" id="8564468">)</span><span class="op" id="8564469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8564472">return</span>&nbsp;<span class="ident" id="8564479">d</span><span class="op" id="8564480">.</span><span class="ident" id="8564481">Abs</span><span class="op" id="8564484">(</span><span class="ident" id="8564485">d</span><span class="op" id="8564486">)</span><br>
<span class="lineno"></span><span class="op" id="8564488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8564491">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="8564557">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="8564580">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="8564608">func</span>&nbsp;<span class="ident" id="8564613">checkIsBestApprox32</span><span class="op" id="8564632">(</span><span class="ident" id="8564633">t</span>&nbsp;<span class="op" id="8564635">*</span><span class="ident" id="8564636">testing</span><span class="op" id="8564643">.</span><span class="ident" id="8564644">T</span><span class="op" id="8564645">,</span>&nbsp;<span class="ident" id="8564647">f</span>&nbsp;<span class="builtintype" id="8564649">float32</span><span class="op" id="8564656">,</span>&nbsp;<span class="ident" id="8564658">r</span>&nbsp;<span class="op" id="8564660">*</span><span class="ident" id="8564661">Rat</span><span class="op" id="8564664">)</span>&nbsp;<span class="builtintype" id="8564666">bool</span>&nbsp;<span class="op" id="8564671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8564674">if</span>&nbsp;<span class="ident" id="8564677">math</span><span class="op" id="8564681">.</span><span class="ident" id="8564682">Abs</span><span class="op" id="8564685">(</span><span class="builtintype" id="8564686">float64</span><span class="op" id="8564693">(</span><span class="ident" id="8564694">f</span><span class="op" id="8564695">)</span><span class="op" id="8564696">)</span>&nbsp;<span class="op" id="8564698">&gt;=</span>&nbsp;<span class="ident" id="8564701">math</span><span class="op" id="8564705">.</span><span class="ident" id="8564706">MaxFloat32</span>&nbsp;<span class="op" id="8564717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8564721">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8564792">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8564840">return</span>&nbsp;<span class="ident" id="8564847">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8564853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8564857">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8564924">f0</span>&nbsp;<span class="op" id="8564927">:=</span>&nbsp;<span class="ident" id="8564930">math</span><span class="op" id="8564934">.</span><span class="ident" id="8564935">Nextafter32</span><span class="op" id="8564946">(</span><span class="ident" id="8564947">f</span><span class="op" id="8564948">,</span>&nbsp;<span class="builtintype" id="8564950">float32</span><span class="op" id="8564957">(</span><span class="ident" id="8564958">math</span><span class="op" id="8564962">.</span><span class="ident" id="8564963">Inf</span><span class="op" id="8564966">(</span><span class="op" id="8564967">-</span><span class="num" id="8564968">1</span><span class="op" id="8564969">)</span><span class="op" id="8564970">)</span><span class="op" id="8564971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8564974">f1</span>&nbsp;<span class="op" id="8564977">:=</span>&nbsp;<span class="ident" id="8564980">math</span><span class="op" id="8564984">.</span><span class="ident" id="8564985">Nextafter32</span><span class="op" id="8564996">(</span><span class="ident" id="8564997">f</span><span class="op" id="8564998">,</span>&nbsp;<span class="builtintype" id="8565000">float32</span><span class="op" id="8565007">(</span><span class="ident" id="8565008">math</span><span class="op" id="8565012">.</span><span class="ident" id="8565013">Inf</span><span class="op" id="8565016">(</span><span class="op" id="8565017">+</span><span class="num" id="8565018">1</span><span class="op" id="8565019">)</span><span class="op" id="8565020">)</span><span class="op" id="8565021">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8565025">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8565090">df</span>&nbsp;<span class="op" id="8565093">:=</span>&nbsp;<span class="ident" id="8565096">delta</span><span class="op" id="8565101">(</span><span class="ident" id="8565102">r</span><span class="op" id="8565103">,</span>&nbsp;<span class="builtintype" id="8565105">float64</span><span class="op" id="8565112">(</span><span class="ident" id="8565113">f</span><span class="op" id="8565114">)</span><span class="op" id="8565115">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8565118">df0</span>&nbsp;<span class="op" id="8565122">:=</span>&nbsp;<span class="ident" id="8565125">delta</span><span class="op" id="8565130">(</span><span class="ident" id="8565131">r</span><span class="op" id="8565132">,</span>&nbsp;<span class="builtintype" id="8565134">float64</span><span class="op" id="8565141">(</span><span class="ident" id="8565142">f0</span><span class="op" id="8565144">)</span><span class="op" id="8565145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8565148">df1</span>&nbsp;<span class="op" id="8565152">:=</span>&nbsp;<span class="ident" id="8565155">delta</span><span class="op" id="8565160">(</span><span class="ident" id="8565161">r</span><span class="op" id="8565162">,</span>&nbsp;<span class="builtintype" id="8565164">float64</span><span class="op" id="8565171">(</span><span class="ident" id="8565172">f1</span><span class="op" id="8565174">)</span><span class="op" id="8565175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8565178">if</span>&nbsp;<span class="ident" id="8565181">df</span><span class="op" id="8565183">.</span><span class="ident" id="8565184">Cmp</span><span class="op" id="8565187">(</span><span class="ident" id="8565188">df0</span><span class="op" id="8565191">)</span>&nbsp;<span class="op" id="8565193">&gt;</span>&nbsp;<span class="num" id="8565195">0</span>&nbsp;<span class="op" id="8565197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8565201">t</span><span class="op" id="8565202">.</span><span class="ident" id="8565203">Errorf</span><span class="op" id="8565209">(</span><span class="string" id="8565210">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="8565279">,</span>&nbsp;<span class="ident" id="8565281">r</span><span class="op" id="8565282">,</span>&nbsp;<span class="ident" id="8565284">f</span><span class="op" id="8565285">,</span>&nbsp;<span class="ident" id="8565287">f</span><span class="op" id="8565288">,</span>&nbsp;<span class="ident" id="8565290">f0</span><span class="op" id="8565292">,</span>&nbsp;<span class="ident" id="8565294">f0</span><span class="op" id="8565296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8565300">return</span>&nbsp;<span class="ident" id="8565307">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8565314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8565317">if</span>&nbsp;<span class="ident" id="8565320">df</span><span class="op" id="8565322">.</span><span class="ident" id="8565323">Cmp</span><span class="op" id="8565326">(</span><span class="ident" id="8565327">df1</span><span class="op" id="8565330">)</span>&nbsp;<span class="op" id="8565332">&gt;</span>&nbsp;<span class="num" id="8565334">0</span>&nbsp;<span class="op" id="8565336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8565340">t</span><span class="op" id="8565341">.</span><span class="ident" id="8565342">Errorf</span><span class="op" id="8565348">(</span><span class="string" id="8565349">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="8565414">,</span>&nbsp;<span class="ident" id="8565416">r</span><span class="op" id="8565417">,</span>&nbsp;<span class="ident" id="8565419">f</span><span class="op" id="8565420">,</span>&nbsp;<span class="ident" id="8565422">f</span><span class="op" id="8565423">,</span>&nbsp;<span class="ident" id="8565425">f1</span><span class="op" id="8565427">,</span>&nbsp;<span class="ident" id="8565429">f1</span><span class="op" id="8565431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8565435">return</span>&nbsp;<span class="ident" id="8565442">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8565449">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8565452">if</span>&nbsp;<span class="ident" id="8565455">df</span><span class="op" id="8565457">.</span><span class="ident" id="8565458">Cmp</span><span class="op" id="8565461">(</span><span class="ident" id="8565462">df0</span><span class="op" id="8565465">)</span>&nbsp;<span class="op" id="8565467">==</span>&nbsp;<span class="num" id="8565470">0</span>&nbsp;<span class="op" id="8565472">&amp;&amp;</span>&nbsp;<span class="op" id="8565475">!</span><span class="ident" id="8565476">isEven32</span><span class="op" id="8565484">(</span><span class="ident" id="8565485">f</span><span class="op" id="8565486">)</span>&nbsp;<span class="op" id="8565488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8565492">t</span><span class="op" id="8565493">.</span><span class="ident" id="8565494">Errorf</span><span class="op" id="8565500">(</span><span class="string" id="8565501">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="8565578">,</span>&nbsp;<span class="ident" id="8565580">r</span><span class="op" id="8565581">,</span>&nbsp;<span class="ident" id="8565583">f</span><span class="op" id="8565584">,</span>&nbsp;<span class="ident" id="8565586">f</span><span class="op" id="8565587">,</span>&nbsp;<span class="ident" id="8565589">f0</span><span class="op" id="8565591">,</span>&nbsp;<span class="ident" id="8565593">f0</span><span class="op" id="8565595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8565599">return</span>&nbsp;<span class="ident" id="8565606">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8565613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8565616">if</span>&nbsp;<span class="ident" id="8565619">df</span><span class="op" id="8565621">.</span><span class="ident" id="8565622">Cmp</span><span class="op" id="8565625">(</span><span class="ident" id="8565626">df1</span><span class="op" id="8565629">)</span>&nbsp;<span class="op" id="8565631">==</span>&nbsp;<span class="num" id="8565634">0</span>&nbsp;<span class="op" id="8565636">&amp;&amp;</span>&nbsp;<span class="op" id="8565639">!</span><span class="ident" id="8565640">isEven32</span><span class="op" id="8565648">(</span><span class="ident" id="8565649">f</span><span class="op" id="8565650">)</span>&nbsp;<span class="op" id="8565652">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8565656">t</span><span class="op" id="8565657">.</span><span class="ident" id="8565658">Errorf</span><span class="op" id="8565664">(</span><span class="string" id="8565665">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="8565742">,</span>&nbsp;<span class="ident" id="8565744">r</span><span class="op" id="8565745">,</span>&nbsp;<span class="ident" id="8565747">f</span><span class="op" id="8565748">,</span>&nbsp;<span class="ident" id="8565750">f</span><span class="op" id="8565751">,</span>&nbsp;<span class="ident" id="8565753">f1</span><span class="op" id="8565755">,</span>&nbsp;<span class="ident" id="8565757">f1</span><span class="op" id="8565759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8565763">return</span>&nbsp;<span class="ident" id="8565770">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8565777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8565780">return</span>&nbsp;<span class="ident" id="8565787">true</span><br>
<span class="lineno"></span><span class="op" id="8565792">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="8565795">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="8565861">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="8565884">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="8565912">func</span>&nbsp;<span class="ident" id="8565917">checkIsBestApprox64</span><span class="op" id="8565936">(</span><span class="ident" id="8565937">t</span>&nbsp;<span class="op" id="8565939">*</span><span class="ident" id="8565940">testing</span><span class="op" id="8565947">.</span><span class="ident" id="8565948">T</span><span class="op" id="8565949">,</span>&nbsp;<span class="ident" id="8565951">f</span>&nbsp;<span class="builtintype" id="8565953">float64</span><span class="op" id="8565960">,</span>&nbsp;<span class="ident" id="8565962">r</span>&nbsp;<span class="op" id="8565964">*</span><span class="ident" id="8565965">Rat</span><span class="op" id="8565968">)</span>&nbsp;<span class="builtintype" id="8565970">bool</span>&nbsp;<span class="op" id="8565975">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8565978">if</span>&nbsp;<span class="ident" id="8565981">math</span><span class="op" id="8565985">.</span><span class="ident" id="8565986">Abs</span><span class="op" id="8565989">(</span><span class="ident" id="8565990">f</span><span class="op" id="8565991">)</span>&nbsp;<span class="op" id="8565993">&gt;=</span>&nbsp;<span class="ident" id="8565996">math</span><span class="op" id="8566000">.</span><span class="ident" id="8566001">MaxFloat64</span>&nbsp;<span class="op" id="8566012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8566016">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8566087">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566135">return</span>&nbsp;<span class="ident" id="8566142">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8566148">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8566152">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566219">f0</span>&nbsp;<span class="op" id="8566222">:=</span>&nbsp;<span class="ident" id="8566225">math</span><span class="op" id="8566229">.</span><span class="ident" id="8566230">Nextafter</span><span class="op" id="8566239">(</span><span class="ident" id="8566240">f</span><span class="op" id="8566241">,</span>&nbsp;<span class="ident" id="8566243">math</span><span class="op" id="8566247">.</span><span class="ident" id="8566248">Inf</span><span class="op" id="8566251">(</span><span class="op" id="8566252">-</span><span class="num" id="8566253">1</span><span class="op" id="8566254">)</span><span class="op" id="8566255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566258">f1</span>&nbsp;<span class="op" id="8566261">:=</span>&nbsp;<span class="ident" id="8566264">math</span><span class="op" id="8566268">.</span><span class="ident" id="8566269">Nextafter</span><span class="op" id="8566278">(</span><span class="ident" id="8566279">f</span><span class="op" id="8566280">,</span>&nbsp;<span class="ident" id="8566282">math</span><span class="op" id="8566286">.</span><span class="ident" id="8566287">Inf</span><span class="op" id="8566290">(</span><span class="op" id="8566291">+</span><span class="num" id="8566292">1</span><span class="op" id="8566293">)</span><span class="op" id="8566294">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8566298">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566363">df</span>&nbsp;<span class="op" id="8566366">:=</span>&nbsp;<span class="ident" id="8566369">delta</span><span class="op" id="8566374">(</span><span class="ident" id="8566375">r</span><span class="op" id="8566376">,</span>&nbsp;<span class="ident" id="8566378">f</span><span class="op" id="8566379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566382">df0</span>&nbsp;<span class="op" id="8566386">:=</span>&nbsp;<span class="ident" id="8566389">delta</span><span class="op" id="8566394">(</span><span class="ident" id="8566395">r</span><span class="op" id="8566396">,</span>&nbsp;<span class="ident" id="8566398">f0</span><span class="op" id="8566400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566403">df1</span>&nbsp;<span class="op" id="8566407">:=</span>&nbsp;<span class="ident" id="8566410">delta</span><span class="op" id="8566415">(</span><span class="ident" id="8566416">r</span><span class="op" id="8566417">,</span>&nbsp;<span class="ident" id="8566419">f1</span><span class="op" id="8566421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566424">if</span>&nbsp;<span class="ident" id="8566427">df</span><span class="op" id="8566429">.</span><span class="ident" id="8566430">Cmp</span><span class="op" id="8566433">(</span><span class="ident" id="8566434">df0</span><span class="op" id="8566437">)</span>&nbsp;<span class="op" id="8566439">&gt;</span>&nbsp;<span class="num" id="8566441">0</span>&nbsp;<span class="op" id="8566443">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566447">t</span><span class="op" id="8566448">.</span><span class="ident" id="8566449">Errorf</span><span class="op" id="8566455">(</span><span class="string" id="8566456">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="8566525">,</span>&nbsp;<span class="ident" id="8566527">r</span><span class="op" id="8566528">,</span>&nbsp;<span class="ident" id="8566530">f</span><span class="op" id="8566531">,</span>&nbsp;<span class="ident" id="8566533">f</span><span class="op" id="8566534">,</span>&nbsp;<span class="ident" id="8566536">f0</span><span class="op" id="8566538">,</span>&nbsp;<span class="ident" id="8566540">f0</span><span class="op" id="8566542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566546">return</span>&nbsp;<span class="ident" id="8566553">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8566560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566563">if</span>&nbsp;<span class="ident" id="8566566">df</span><span class="op" id="8566568">.</span><span class="ident" id="8566569">Cmp</span><span class="op" id="8566572">(</span><span class="ident" id="8566573">df1</span><span class="op" id="8566576">)</span>&nbsp;<span class="op" id="8566578">&gt;</span>&nbsp;<span class="num" id="8566580">0</span>&nbsp;<span class="op" id="8566582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566586">t</span><span class="op" id="8566587">.</span><span class="ident" id="8566588">Errorf</span><span class="op" id="8566594">(</span><span class="string" id="8566595">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="8566660">,</span>&nbsp;<span class="ident" id="8566662">r</span><span class="op" id="8566663">,</span>&nbsp;<span class="ident" id="8566665">f</span><span class="op" id="8566666">,</span>&nbsp;<span class="ident" id="8566668">f</span><span class="op" id="8566669">,</span>&nbsp;<span class="ident" id="8566671">f1</span><span class="op" id="8566673">,</span>&nbsp;<span class="ident" id="8566675">f1</span><span class="op" id="8566677">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566681">return</span>&nbsp;<span class="ident" id="8566688">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8566695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566698">if</span>&nbsp;<span class="ident" id="8566701">df</span><span class="op" id="8566703">.</span><span class="ident" id="8566704">Cmp</span><span class="op" id="8566707">(</span><span class="ident" id="8566708">df0</span><span class="op" id="8566711">)</span>&nbsp;<span class="op" id="8566713">==</span>&nbsp;<span class="num" id="8566716">0</span>&nbsp;<span class="op" id="8566718">&amp;&amp;</span>&nbsp;<span class="op" id="8566721">!</span><span class="ident" id="8566722">isEven64</span><span class="op" id="8566730">(</span><span class="ident" id="8566731">f</span><span class="op" id="8566732">)</span>&nbsp;<span class="op" id="8566734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566738">t</span><span class="op" id="8566739">.</span><span class="ident" id="8566740">Errorf</span><span class="op" id="8566746">(</span><span class="string" id="8566747">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="8566824">,</span>&nbsp;<span class="ident" id="8566826">r</span><span class="op" id="8566827">,</span>&nbsp;<span class="ident" id="8566829">f</span><span class="op" id="8566830">,</span>&nbsp;<span class="ident" id="8566832">f</span><span class="op" id="8566833">,</span>&nbsp;<span class="ident" id="8566835">f0</span><span class="op" id="8566837">,</span>&nbsp;<span class="ident" id="8566839">f0</span><span class="op" id="8566841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566845">return</span>&nbsp;<span class="ident" id="8566852">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8566859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566862">if</span>&nbsp;<span class="ident" id="8566865">df</span><span class="op" id="8566867">.</span><span class="ident" id="8566868">Cmp</span><span class="op" id="8566871">(</span><span class="ident" id="8566872">df1</span><span class="op" id="8566875">)</span>&nbsp;<span class="op" id="8566877">==</span>&nbsp;<span class="num" id="8566880">0</span>&nbsp;<span class="op" id="8566882">&amp;&amp;</span>&nbsp;<span class="op" id="8566885">!</span><span class="ident" id="8566886">isEven64</span><span class="op" id="8566894">(</span><span class="ident" id="8566895">f</span><span class="op" id="8566896">)</span>&nbsp;<span class="op" id="8566898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566902">t</span><span class="op" id="8566903">.</span><span class="ident" id="8566904">Errorf</span><span class="op" id="8566910">(</span><span class="string" id="8566911">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="8566988">,</span>&nbsp;<span class="ident" id="8566990">r</span><span class="op" id="8566991">,</span>&nbsp;<span class="ident" id="8566993">f</span><span class="op" id="8566994">,</span>&nbsp;<span class="ident" id="8566996">f</span><span class="op" id="8566997">,</span>&nbsp;<span class="ident" id="8566999">f1</span><span class="op" id="8567001">,</span>&nbsp;<span class="ident" id="8567003">f1</span><span class="op" id="8567005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567009">return</span>&nbsp;<span class="ident" id="8567016">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567023">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567026">return</span>&nbsp;<span class="ident" id="8567033">true</span><br>
<span class="lineno"></span><span class="op" id="8567038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8567041">func</span>&nbsp;<span class="ident" id="8567046">isEven32</span><span class="op" id="8567054">(</span><span class="ident" id="8567055">f</span>&nbsp;<span class="builtintype" id="8567057">float32</span><span class="op" id="8567064">)</span>&nbsp;<span class="builtintype" id="8567066">bool</span>&nbsp;<span class="op" id="8567071">{</span>&nbsp;<span class="keyword" id="8567073">return</span>&nbsp;<span class="ident" id="8567080">math</span><span class="op" id="8567084">.</span><span class="ident" id="8567085">Float32bits</span><span class="op" id="8567096">(</span><span class="ident" id="8567097">f</span><span class="op" id="8567098">)</span><span class="op" id="8567099">&amp;</span><span class="num" id="8567100">1</span>&nbsp;<span class="op" id="8567102">==</span>&nbsp;<span class="num" id="8567105">0</span>&nbsp;<span class="op" id="8567107">}</span><br>
<span class="lineno"></span><span class="keyword" id="8567109">func</span>&nbsp;<span class="ident" id="8567114">isEven64</span><span class="op" id="8567122">(</span><span class="ident" id="8567123">f</span>&nbsp;<span class="builtintype" id="8567125">float64</span><span class="op" id="8567132">)</span>&nbsp;<span class="builtintype" id="8567134">bool</span>&nbsp;<span class="op" id="8567139">{</span>&nbsp;<span class="keyword" id="8567141">return</span>&nbsp;<span class="ident" id="8567148">math</span><span class="op" id="8567152">.</span><span class="ident" id="8567153">Float64bits</span><span class="op" id="8567164">(</span><span class="ident" id="8567165">f</span><span class="op" id="8567166">)</span><span class="op" id="8567167">&amp;</span><span class="num" id="8567168">1</span>&nbsp;<span class="op" id="8567170">==</span>&nbsp;<span class="num" id="8567173">0</span>&nbsp;<span class="op" id="8567175">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="8567178">func</span>&nbsp;<span class="ident" id="8567183">TestIsFinite</span><span class="op" id="8567195">(</span><span class="ident" id="8567196">t</span>&nbsp;<span class="op" id="8567198">*</span><span class="ident" id="8567199">testing</span><span class="op" id="8567206">.</span><span class="ident" id="8567207">T</span><span class="op" id="8567208">)</span>&nbsp;<span class="op" id="8567210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567213">finites</span>&nbsp;<span class="op" id="8567221">:=</span>&nbsp;<span class="op" id="8567224">[</span><span class="op" id="8567225">]</span><span class="builtintype" id="8567226">float64</span><span class="op" id="8567233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8567237">1.0</span>&nbsp;<span class="op" id="8567241">/</span>&nbsp;<span class="num" id="8567243">3</span><span class="op" id="8567244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8567248">4891559871276714924261e+222</span><span class="op" id="8567275">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567279">math</span><span class="op" id="8567283">.</span><span class="ident" id="8567284">MaxFloat64</span><span class="op" id="8567294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567298">math</span><span class="op" id="8567302">.</span><span class="ident" id="8567303">SmallestNonzeroFloat64</span><span class="op" id="8567325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567329">-</span><span class="ident" id="8567330">math</span><span class="op" id="8567334">.</span><span class="ident" id="8567335">MaxFloat64</span><span class="op" id="8567345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567349">-</span><span class="ident" id="8567350">math</span><span class="op" id="8567354">.</span><span class="ident" id="8567355">SmallestNonzeroFloat64</span><span class="op" id="8567377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567380">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567383">for</span>&nbsp;<span class="ident" id="8567387">_</span><span class="op" id="8567388">,</span>&nbsp;<span class="ident" id="8567390">f</span>&nbsp;<span class="op" id="8567392">:=</span>&nbsp;<span class="keyword" id="8567395">range</span>&nbsp;<span class="ident" id="8567401">finites</span>&nbsp;<span class="op" id="8567409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567413">if</span>&nbsp;<span class="op" id="8567416">!</span><span class="ident" id="8567417">isFinite</span><span class="op" id="8567425">(</span><span class="ident" id="8567426">f</span><span class="op" id="8567427">)</span>&nbsp;<span class="op" id="8567429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567434">t</span><span class="op" id="8567435">.</span><span class="ident" id="8567436">Errorf</span><span class="op" id="8567442">(</span><span class="string" id="8567443">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="8567463">,</span>&nbsp;<span class="ident" id="8567465">f</span><span class="op" id="8567466">,</span>&nbsp;<span class="ident" id="8567468">f</span><span class="op" id="8567469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567476">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567479">nonfinites</span>&nbsp;<span class="op" id="8567490">:=</span>&nbsp;<span class="op" id="8567493">[</span><span class="op" id="8567494">]</span><span class="builtintype" id="8567495">float64</span><span class="op" id="8567502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567506">math</span><span class="op" id="8567510">.</span><span class="ident" id="8567511">NaN</span><span class="op" id="8567514">(</span><span class="op" id="8567515">)</span><span class="op" id="8567516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567520">math</span><span class="op" id="8567524">.</span><span class="ident" id="8567525">Inf</span><span class="op" id="8567528">(</span><span class="op" id="8567529">-</span><span class="num" id="8567530">1</span><span class="op" id="8567531">)</span><span class="op" id="8567532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567536">math</span><span class="op" id="8567540">.</span><span class="ident" id="8567541">Inf</span><span class="op" id="8567544">(</span><span class="op" id="8567545">+</span><span class="num" id="8567546">1</span><span class="op" id="8567547">)</span><span class="op" id="8567548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567551">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567554">for</span>&nbsp;<span class="ident" id="8567558">_</span><span class="op" id="8567559">,</span>&nbsp;<span class="ident" id="8567561">f</span>&nbsp;<span class="op" id="8567563">:=</span>&nbsp;<span class="keyword" id="8567566">range</span>&nbsp;<span class="ident" id="8567572">nonfinites</span>&nbsp;<span class="op" id="8567583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567587">if</span>&nbsp;<span class="ident" id="8567590">isFinite</span><span class="op" id="8567598">(</span><span class="ident" id="8567599">f</span><span class="op" id="8567600">)</span>&nbsp;<span class="op" id="8567602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567607">t</span><span class="op" id="8567608">.</span><span class="ident" id="8567609">Errorf</span><span class="op" id="8567615">(</span><span class="string" id="8567616">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="8567636">,</span>&nbsp;<span class="ident" id="8567638">f</span><span class="op" id="8567639">,</span>&nbsp;<span class="ident" id="8567641">f</span><span class="op" id="8567642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567649">}</span><br>
<span class="lineno">1160</span><span class="op" id="8567651">}</span>
</div>
</body>
</html>
