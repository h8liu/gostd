<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html" class="current">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2242552">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2242607">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2242661">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2242712">package</span>&nbsp;<span class="ident" id="2242720">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2242729">import</span>&nbsp;<span class="string" id="2242736">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2242746">//&nbsp;ErrRange&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno">10</span><span class="keyword" id="2242818">var</span>&nbsp;<span class="ident" id="2242822">ErrRange</span>&nbsp;<span class="op" id="2242831">=</span>&nbsp;<span class="ident" id="2242833">errors</span><span class="op" id="2242839">.</span><span class="ident" id="2242840">New</span><span class="op" id="2242843">(</span><span class="string" id="2242844">&#34;value&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2242864">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2242867">//&nbsp;ErrSyntax&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;right&nbsp;syntax&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2242955">var</span>&nbsp;<span class="ident" id="2242959">ErrSyntax</span>&nbsp;<span class="op" id="2242969">=</span>&nbsp;<span class="ident" id="2242971">errors</span><span class="op" id="2242977">.</span><span class="ident" id="2242978">New</span><span class="op" id="2242981">(</span><span class="string" id="2242982">&#34;invalid&nbsp;syntax&#34;</span><span class="op" id="2242998">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2243001">//&nbsp;A&nbsp;NumError&nbsp;records&nbsp;a&nbsp;failed&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="2243044">type</span>&nbsp;<span class="ident" id="2243049">NumError</span>&nbsp;<span class="keyword" id="2243058">struct</span>&nbsp;<span class="op" id="2243065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2243068">Func</span>&nbsp;<span class="builtintype" id="2243073">string</span>&nbsp;<span class="comment" id="2243080">//&nbsp;the&nbsp;failing&nbsp;function&nbsp;(ParseBool,&nbsp;ParseInt,&nbsp;ParseUint,&nbsp;ParseFloat)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2243150">Num</span>&nbsp;&nbsp;<span class="builtintype" id="2243155">string</span>&nbsp;<span class="comment" id="2243162">//&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2243176">Err</span>&nbsp;&nbsp;<span class="builtintype" id="2243181">error</span>&nbsp;&nbsp;<span class="comment" id="2243188">//&nbsp;the&nbsp;reason&nbsp;the&nbsp;conversion&nbsp;failed&nbsp;(ErrRange,&nbsp;ErrSyntax)</span><br>
<span class="lineno">20</span><span class="op" id="2243246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2243249">func</span>&nbsp;<span class="op" id="2243254">(</span><span class="ident" id="2243255">e</span>&nbsp;<span class="op" id="2243257">*</span><span class="ident" id="2243258">NumError</span><span class="op" id="2243266">)</span>&nbsp;<span class="ident" id="2243268">Error</span><span class="op" id="2243273">(</span><span class="op" id="2243274">)</span>&nbsp;<span class="builtintype" id="2243276">string</span>&nbsp;<span class="op" id="2243283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243286">return</span>&nbsp;<span class="string" id="2243293">&#34;strconv.&#34;</span>&nbsp;<span class="op" id="2243304">+</span>&nbsp;<span class="ident" id="2243306">e</span><span class="op" id="2243307">.</span><span class="ident" id="2243308">Func</span>&nbsp;<span class="op" id="2243313">+</span>&nbsp;<span class="string" id="2243315">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2243320">+</span>&nbsp;<span class="string" id="2243322">&#34;parsing&nbsp;&#34;</span>&nbsp;<span class="op" id="2243333">+</span>&nbsp;<span class="ident" id="2243335">Quote</span><span class="op" id="2243340">(</span><span class="ident" id="2243341">e</span><span class="op" id="2243342">.</span><span class="ident" id="2243343">Num</span><span class="op" id="2243346">)</span>&nbsp;<span class="op" id="2243348">+</span>&nbsp;<span class="string" id="2243350">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2243355">+</span>&nbsp;<span class="ident" id="2243357">e</span><span class="op" id="2243358">.</span><span class="ident" id="2243359">Err</span><span class="op" id="2243362">.</span><span class="ident" id="2243363">Error</span><span class="op" id="2243368">(</span><span class="op" id="2243369">)</span><br>
<span class="lineno"></span><span class="op" id="2243371">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="2243374">func</span>&nbsp;<span class="ident" id="2243379">syntaxError</span><span class="op" id="2243390">(</span><span class="ident" id="2243391">fn</span><span class="op" id="2243393">,</span>&nbsp;<span class="ident" id="2243395">str</span>&nbsp;<span class="builtintype" id="2243399">string</span><span class="op" id="2243405">)</span>&nbsp;<span class="op" id="2243407">*</span><span class="ident" id="2243408">NumError</span>&nbsp;<span class="op" id="2243417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243420">return</span>&nbsp;<span class="op" id="2243427">&amp;</span><span class="ident" id="2243428">NumError</span><span class="op" id="2243436">{</span><span class="ident" id="2243437">fn</span><span class="op" id="2243439">,</span>&nbsp;<span class="ident" id="2243441">str</span><span class="op" id="2243444">,</span>&nbsp;<span class="ident" id="2243446">ErrSyntax</span><span class="op" id="2243455">}</span><br>
<span class="lineno"></span><span class="op" id="2243457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="2243460">func</span>&nbsp;<span class="ident" id="2243465">rangeError</span><span class="op" id="2243475">(</span><span class="ident" id="2243476">fn</span><span class="op" id="2243478">,</span>&nbsp;<span class="ident" id="2243480">str</span>&nbsp;<span class="builtintype" id="2243484">string</span><span class="op" id="2243490">)</span>&nbsp;<span class="op" id="2243492">*</span><span class="ident" id="2243493">NumError</span>&nbsp;<span class="op" id="2243502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243505">return</span>&nbsp;<span class="op" id="2243512">&amp;</span><span class="ident" id="2243513">NumError</span><span class="op" id="2243521">{</span><span class="ident" id="2243522">fn</span><span class="op" id="2243524">,</span>&nbsp;<span class="ident" id="2243526">str</span><span class="op" id="2243529">,</span>&nbsp;<span class="ident" id="2243531">ErrRange</span><span class="op" id="2243539">}</span><br>
<span class="lineno"></span><span class="op" id="2243541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2243544">const</span>&nbsp;<span class="ident" id="2243550">intSize</span>&nbsp;<span class="op" id="2243558">=</span>&nbsp;<span class="num" id="2243560">32</span>&nbsp;<span class="op" id="2243563">&lt;&lt;</span>&nbsp;<span class="op" id="2243566">(</span><span class="op" id="2243567">^</span><span class="builtintype" id="2243568">uint</span><span class="op" id="2243572">(</span><span class="num" id="2243573">0</span><span class="op" id="2243574">)</span>&nbsp;<span class="op" id="2243576">&gt;&gt;</span>&nbsp;<span class="num" id="2243579">63</span><span class="op" id="2243581">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2243584">//&nbsp;IntSize&nbsp;is&nbsp;the&nbsp;size&nbsp;in&nbsp;bits&nbsp;of&nbsp;an&nbsp;int&nbsp;or&nbsp;uint&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2243640">const</span>&nbsp;<span class="ident" id="2243646">IntSize</span>&nbsp;<span class="op" id="2243654">=</span>&nbsp;<span class="ident" id="2243656">intSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2243665">//&nbsp;Return&nbsp;the&nbsp;first&nbsp;number&nbsp;n&nbsp;such&nbsp;that&nbsp;n*base&nbsp;&gt;=&nbsp;1&lt;&lt;64.</span><br>
<span class="lineno">40</span><span class="keyword" id="2243721">func</span>&nbsp;<span class="ident" id="2243726">cutoff64</span><span class="op" id="2243734">(</span><span class="ident" id="2243735">base</span>&nbsp;<span class="builtintype" id="2243740">int</span><span class="op" id="2243743">)</span>&nbsp;<span class="ident" id="2243745">uint64</span>&nbsp;<span class="op" id="2243752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243755">if</span>&nbsp;<span class="ident" id="2243758">base</span>&nbsp;<span class="op" id="2243763">&lt;</span>&nbsp;<span class="num" id="2243765">2</span>&nbsp;<span class="op" id="2243767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243771">return</span>&nbsp;<span class="num" id="2243778">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2243781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243784">return</span>&nbsp;<span class="op" id="2243791">(</span><span class="num" id="2243792">1</span><span class="op" id="2243793">&lt;&lt;</span><span class="num" id="2243795">64</span><span class="op" id="2243797">-</span><span class="num" id="2243798">1</span><span class="op" id="2243799">)</span><span class="op" id="2243800">/</span><span class="ident" id="2243801">uint64</span><span class="op" id="2243807">(</span><span class="ident" id="2243808">base</span><span class="op" id="2243812">)</span>&nbsp;<span class="op" id="2243814">+</span>&nbsp;<span class="num" id="2243816">1</span><br>
<span class="lineno">45</span><span class="op" id="2243818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2243821">//&nbsp;ParseUint&nbsp;is&nbsp;like&nbsp;ParseInt&nbsp;but&nbsp;for&nbsp;unsigned&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="keyword" id="2243877">func</span>&nbsp;<span class="ident" id="2243882">ParseUint</span><span class="op" id="2243891">(</span><span class="ident" id="2243892">s</span>&nbsp;<span class="builtintype" id="2243894">string</span><span class="op" id="2243900">,</span>&nbsp;<span class="ident" id="2243902">base</span>&nbsp;<span class="builtintype" id="2243907">int</span><span class="op" id="2243910">,</span>&nbsp;<span class="ident" id="2243912">bitSize</span>&nbsp;<span class="builtintype" id="2243920">int</span><span class="op" id="2243923">)</span>&nbsp;<span class="op" id="2243925">(</span><span class="ident" id="2243926">n</span>&nbsp;<span class="ident" id="2243928">uint64</span><span class="op" id="2243934">,</span>&nbsp;<span class="ident" id="2243936">err</span>&nbsp;<span class="builtintype" id="2243940">error</span><span class="op" id="2243945">)</span>&nbsp;<span class="op" id="2243947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243950">var</span>&nbsp;<span class="ident" id="2243954">cutoff</span><span class="op" id="2243960">,</span>&nbsp;<span class="ident" id="2243962">maxVal</span>&nbsp;<span class="ident" id="2243969">uint64</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2243978">if</span>&nbsp;<span class="ident" id="2243981">bitSize</span>&nbsp;<span class="op" id="2243989">==</span>&nbsp;<span class="num" id="2243992">0</span>&nbsp;<span class="op" id="2243994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2243998">bitSize</span>&nbsp;<span class="op" id="2244006">=</span>&nbsp;<span class="builtintype" id="2244008">int</span><span class="op" id="2244011">(</span><span class="ident" id="2244012">IntSize</span><span class="op" id="2244019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2244022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244026">s0</span>&nbsp;<span class="op" id="2244029">:=</span>&nbsp;<span class="ident" id="2244032">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244035">switch</span>&nbsp;<span class="op" id="2244042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244045">case</span>&nbsp;<span class="builtinfunc" id="2244050">len</span><span class="op" id="2244053">(</span><span class="ident" id="2244054">s</span><span class="op" id="2244055">)</span>&nbsp;<span class="op" id="2244057">&lt;</span>&nbsp;<span class="num" id="2244059">1</span><span class="op" id="2244060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244064">err</span>&nbsp;<span class="op" id="2244068">=</span>&nbsp;<span class="ident" id="2244070">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244082">goto</span>&nbsp;<span class="ident" id="2244087">Error</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244095">case</span>&nbsp;<span class="num" id="2244100">2</span>&nbsp;<span class="op" id="2244102">&lt;=</span>&nbsp;<span class="ident" id="2244105">base</span>&nbsp;<span class="op" id="2244110">&amp;&amp;</span>&nbsp;<span class="ident" id="2244113">base</span>&nbsp;<span class="op" id="2244118">&lt;=</span>&nbsp;<span class="num" id="2244121">36</span><span class="op" id="2244123">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2244127">//&nbsp;valid&nbsp;base;&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244158">case</span>&nbsp;<span class="ident" id="2244163">base</span>&nbsp;<span class="op" id="2244168">==</span>&nbsp;<span class="num" id="2244171">0</span><span class="op" id="2244172">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2244176">//&nbsp;Look&nbsp;for&nbsp;octal,&nbsp;hex&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244209">switch</span>&nbsp;<span class="op" id="2244216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244220">case</span>&nbsp;<span class="ident" id="2244225">s</span><span class="op" id="2244226">[</span><span class="num" id="2244227">0</span><span class="op" id="2244228">]</span>&nbsp;<span class="op" id="2244230">==</span>&nbsp;<span class="string" id="2244233">&#39;0&#39;</span>&nbsp;<span class="op" id="2244237">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2244240">len</span><span class="op" id="2244243">(</span><span class="ident" id="2244244">s</span><span class="op" id="2244245">)</span>&nbsp;<span class="op" id="2244247">&gt;</span>&nbsp;<span class="num" id="2244249">1</span>&nbsp;<span class="op" id="2244251">&amp;&amp;</span>&nbsp;<span class="op" id="2244254">(</span><span class="ident" id="2244255">s</span><span class="op" id="2244256">[</span><span class="num" id="2244257">1</span><span class="op" id="2244258">]</span>&nbsp;<span class="op" id="2244260">==</span>&nbsp;<span class="string" id="2244263">&#39;x&#39;</span>&nbsp;<span class="op" id="2244267">||</span>&nbsp;<span class="ident" id="2244270">s</span><span class="op" id="2244271">[</span><span class="num" id="2244272">1</span><span class="op" id="2244273">]</span>&nbsp;<span class="op" id="2244275">==</span>&nbsp;<span class="string" id="2244278">&#39;X&#39;</span><span class="op" id="2244281">)</span><span class="op" id="2244282">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244287">base</span>&nbsp;<span class="op" id="2244292">=</span>&nbsp;<span class="num" id="2244294">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244300">s</span>&nbsp;<span class="op" id="2244302">=</span>&nbsp;<span class="ident" id="2244304">s</span><span class="op" id="2244305">[</span><span class="num" id="2244306">2</span><span class="op" id="2244307">:</span><span class="op" id="2244308">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244313">if</span>&nbsp;<span class="builtinfunc" id="2244316">len</span><span class="op" id="2244319">(</span><span class="ident" id="2244320">s</span><span class="op" id="2244321">)</span>&nbsp;<span class="op" id="2244323">&lt;</span>&nbsp;<span class="num" id="2244325">1</span>&nbsp;<span class="op" id="2244327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244333">err</span>&nbsp;<span class="op" id="2244337">=</span>&nbsp;<span class="ident" id="2244339">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244353">goto</span>&nbsp;<span class="ident" id="2244358">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2244367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244371">case</span>&nbsp;<span class="ident" id="2244376">s</span><span class="op" id="2244377">[</span><span class="num" id="2244378">0</span><span class="op" id="2244379">]</span>&nbsp;<span class="op" id="2244381">==</span>&nbsp;<span class="string" id="2244384">&#39;0&#39;</span><span class="op" id="2244387">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244392">base</span>&nbsp;<span class="op" id="2244397">=</span>&nbsp;<span class="num" id="2244399">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244403">default</span><span class="op" id="2244410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244415">base</span>&nbsp;<span class="op" id="2244420">=</span>&nbsp;<span class="num" id="2244422">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2244427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244431">default</span><span class="op" id="2244438">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244442">err</span>&nbsp;<span class="op" id="2244446">=</span>&nbsp;<span class="ident" id="2244448">errors</span><span class="op" id="2244454">.</span><span class="ident" id="2244455">New</span><span class="op" id="2244458">(</span><span class="string" id="2244459">&#34;invalid&nbsp;base&nbsp;&#34;</span>&nbsp;<span class="op" id="2244475">+</span>&nbsp;<span class="ident" id="2244477">Itoa</span><span class="op" id="2244481">(</span><span class="ident" id="2244482">base</span><span class="op" id="2244486">)</span><span class="op" id="2244487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244491">goto</span>&nbsp;<span class="ident" id="2244496">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2244503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244507">n</span>&nbsp;<span class="op" id="2244509">=</span>&nbsp;<span class="num" id="2244511">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244514">cutoff</span>&nbsp;<span class="op" id="2244521">=</span>&nbsp;<span class="ident" id="2244523">cutoff64</span><span class="op" id="2244531">(</span><span class="ident" id="2244532">base</span><span class="op" id="2244536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244539">maxVal</span>&nbsp;<span class="op" id="2244546">=</span>&nbsp;<span class="num" id="2244548">1</span><span class="op" id="2244549">&lt;&lt;</span><span class="builtintype" id="2244551">uint</span><span class="op" id="2244555">(</span><span class="ident" id="2244556">bitSize</span><span class="op" id="2244563">)</span>&nbsp;<span class="op" id="2244565">-</span>&nbsp;<span class="num" id="2244567">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244571">for</span>&nbsp;<span class="ident" id="2244575">i</span>&nbsp;<span class="op" id="2244577">:=</span>&nbsp;<span class="num" id="2244580">0</span><span class="op" id="2244581">;</span>&nbsp;<span class="ident" id="2244583">i</span>&nbsp;<span class="op" id="2244585">&lt;</span>&nbsp;<span class="builtinfunc" id="2244587">len</span><span class="op" id="2244590">(</span><span class="ident" id="2244591">s</span><span class="op" id="2244592">)</span><span class="op" id="2244593">;</span>&nbsp;<span class="ident" id="2244595">i</span><span class="op" id="2244596">++</span>&nbsp;<span class="op" id="2244599">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244603">var</span>&nbsp;<span class="ident" id="2244607">v</span>&nbsp;<span class="builtintype" id="2244609">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244616">d</span>&nbsp;<span class="op" id="2244618">:=</span>&nbsp;<span class="ident" id="2244621">s</span><span class="op" id="2244622">[</span><span class="ident" id="2244623">i</span><span class="op" id="2244624">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244628">switch</span>&nbsp;<span class="op" id="2244635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244639">case</span>&nbsp;<span class="string" id="2244644">&#39;0&#39;</span>&nbsp;<span class="op" id="2244648">&lt;=</span>&nbsp;<span class="ident" id="2244651">d</span>&nbsp;<span class="op" id="2244653">&amp;&amp;</span>&nbsp;<span class="ident" id="2244656">d</span>&nbsp;<span class="op" id="2244658">&lt;=</span>&nbsp;<span class="string" id="2244661">&#39;9&#39;</span><span class="op" id="2244664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244669">v</span>&nbsp;<span class="op" id="2244671">=</span>&nbsp;<span class="ident" id="2244673">d</span>&nbsp;<span class="op" id="2244675">-</span>&nbsp;<span class="string" id="2244677">&#39;0&#39;</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244683">case</span>&nbsp;<span class="string" id="2244688">&#39;a&#39;</span>&nbsp;<span class="op" id="2244692">&lt;=</span>&nbsp;<span class="ident" id="2244695">d</span>&nbsp;<span class="op" id="2244697">&amp;&amp;</span>&nbsp;<span class="ident" id="2244700">d</span>&nbsp;<span class="op" id="2244702">&lt;=</span>&nbsp;<span class="string" id="2244705">&#39;z&#39;</span><span class="op" id="2244708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244713">v</span>&nbsp;<span class="op" id="2244715">=</span>&nbsp;<span class="ident" id="2244717">d</span>&nbsp;<span class="op" id="2244719">-</span>&nbsp;<span class="string" id="2244721">&#39;a&#39;</span>&nbsp;<span class="op" id="2244725">+</span>&nbsp;<span class="num" id="2244727">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244732">case</span>&nbsp;<span class="string" id="2244737">&#39;A&#39;</span>&nbsp;<span class="op" id="2244741">&lt;=</span>&nbsp;<span class="ident" id="2244744">d</span>&nbsp;<span class="op" id="2244746">&amp;&amp;</span>&nbsp;<span class="ident" id="2244749">d</span>&nbsp;<span class="op" id="2244751">&lt;=</span>&nbsp;<span class="string" id="2244754">&#39;Z&#39;</span><span class="op" id="2244757">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244762">v</span>&nbsp;<span class="op" id="2244764">=</span>&nbsp;<span class="ident" id="2244766">d</span>&nbsp;<span class="op" id="2244768">-</span>&nbsp;<span class="string" id="2244770">&#39;A&#39;</span>&nbsp;<span class="op" id="2244774">+</span>&nbsp;<span class="num" id="2244776">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244781">default</span><span class="op" id="2244788">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244793">n</span>&nbsp;<span class="op" id="2244795">=</span>&nbsp;<span class="num" id="2244797">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244802">err</span>&nbsp;<span class="op" id="2244806">=</span>&nbsp;<span class="ident" id="2244808">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244821">goto</span>&nbsp;<span class="ident" id="2244826">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2244834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244838">if</span>&nbsp;<span class="builtintype" id="2244841">int</span><span class="op" id="2244844">(</span><span class="ident" id="2244845">v</span><span class="op" id="2244846">)</span>&nbsp;<span class="op" id="2244848">&gt;=</span>&nbsp;<span class="ident" id="2244851">base</span>&nbsp;<span class="op" id="2244856">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244861">n</span>&nbsp;<span class="op" id="2244863">=</span>&nbsp;<span class="num" id="2244865">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244870">err</span>&nbsp;<span class="op" id="2244874">=</span>&nbsp;<span class="ident" id="2244876">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244889">goto</span>&nbsp;<span class="ident" id="2244894">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2244902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244907">if</span>&nbsp;<span class="ident" id="2244910">n</span>&nbsp;<span class="op" id="2244912">&gt;=</span>&nbsp;<span class="ident" id="2244915">cutoff</span>&nbsp;<span class="op" id="2244922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2244927">//&nbsp;n*base&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244950">n</span>&nbsp;<span class="op" id="2244952">=</span>&nbsp;<span class="num" id="2244954">1</span><span class="op" id="2244955">&lt;&lt;</span><span class="num" id="2244957">64</span>&nbsp;<span class="op" id="2244960">-</span>&nbsp;<span class="num" id="2244962">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2244967">err</span>&nbsp;<span class="op" id="2244971">=</span>&nbsp;<span class="ident" id="2244973">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2244985">goto</span>&nbsp;<span class="ident" id="2244990">Error</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2244998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245002">n</span>&nbsp;<span class="op" id="2245004">*=</span>&nbsp;<span class="ident" id="2245007">uint64</span><span class="op" id="2245013">(</span><span class="ident" id="2245014">base</span><span class="op" id="2245018">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245023">n1</span>&nbsp;<span class="op" id="2245026">:=</span>&nbsp;<span class="ident" id="2245029">n</span>&nbsp;<span class="op" id="2245031">+</span>&nbsp;<span class="ident" id="2245033">uint64</span><span class="op" id="2245039">(</span><span class="ident" id="2245040">v</span><span class="op" id="2245041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245045">if</span>&nbsp;<span class="ident" id="2245048">n1</span>&nbsp;<span class="op" id="2245051">&lt;</span>&nbsp;<span class="ident" id="2245053">n</span>&nbsp;<span class="op" id="2245055">||</span>&nbsp;<span class="ident" id="2245058">n1</span>&nbsp;<span class="op" id="2245061">&gt;</span>&nbsp;<span class="ident" id="2245063">maxVal</span>&nbsp;<span class="op" id="2245070">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2245075">//&nbsp;n+v&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245095">n</span>&nbsp;<span class="op" id="2245097">=</span>&nbsp;<span class="num" id="2245099">1</span><span class="op" id="2245100">&lt;&lt;</span><span class="num" id="2245102">64</span>&nbsp;<span class="op" id="2245105">-</span>&nbsp;<span class="num" id="2245107">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245112">err</span>&nbsp;<span class="op" id="2245116">=</span>&nbsp;<span class="ident" id="2245118">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245130">goto</span>&nbsp;<span class="ident" id="2245135">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245143">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2245147">n</span>&nbsp;<span class="op" id="2245149">=</span>&nbsp;<span class="ident" id="2245151">n1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2245155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245159">return</span>&nbsp;<span class="ident" id="2245166">n</span><span class="op" id="2245167">,</span>&nbsp;<span class="ident" id="2245169">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="ident" id="2245174">Error</span><span class="op" id="2245179">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2245182">return</span>&nbsp;<span class="ident" id="2245189">n</span><span class="op" id="2245190">,</span>&nbsp;<span class="op" id="2245192">&amp;</span><span class="ident" id="2245193">NumError</span><span class="op" id="2245201">{</span><span class="string" id="2245202">&#34;ParseUint&#34;</span><span class="op" id="2245213">,</span>&nbsp;<span class="ident" id="2245215">s0</span><span class="op" id="2245217">,</span>&nbsp;<span class="ident" id="2245219">err</span><span class="op" id="2245222">}</span><br>
<span class="lineno"></span><span class="op" id="2245224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2245227">//&nbsp;ParseInt&nbsp;interprets&nbsp;a&nbsp;string&nbsp;s&nbsp;in&nbsp;the&nbsp;given&nbsp;base&nbsp;(2&nbsp;to&nbsp;36)&nbsp;and</span><br>
<span class="lineno">135</span><span class="comment" id="2245293">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;value&nbsp;i.&nbsp;&nbsp;If&nbsp;base&nbsp;==&nbsp;0,&nbsp;the&nbsp;base&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2245358">//&nbsp;implied&nbsp;by&nbsp;the&nbsp;string&#39;s&nbsp;prefix:&nbsp;base&nbsp;16&nbsp;for&nbsp;&#34;0x&#34;,&nbsp;base&nbsp;8&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2245422">//&nbsp;&#34;0&#34;,&nbsp;and&nbsp;base&nbsp;10&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2245453">//</span><br>
<span class="lineno"></span><span class="comment" id="2245456">//&nbsp;The&nbsp;bitSize&nbsp;argument&nbsp;specifies&nbsp;the&nbsp;integer&nbsp;type</span><br>
<span class="lineno">140</span><span class="comment" id="2245507">//&nbsp;that&nbsp;the&nbsp;result&nbsp;must&nbsp;fit&nbsp;into.&nbsp;&nbsp;Bit&nbsp;sizes&nbsp;0,&nbsp;8,&nbsp;16,&nbsp;32,&nbsp;and&nbsp;64</span><br>
<span class="lineno"></span><span class="comment" id="2245573">//&nbsp;correspond&nbsp;to&nbsp;int,&nbsp;int8,&nbsp;int16,&nbsp;int32,&nbsp;and&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2245626">//</span><br>
<span class="lineno"></span><span class="comment" id="2245629">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseInt&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="2245694">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.&nbsp;&nbsp;If&nbsp;s&nbsp;is&nbsp;empty&nbsp;or&nbsp;contains&nbsp;invalid</span><br>
<span class="lineno">145</span><span class="comment" id="2245757">//&nbsp;digits,&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax&nbsp;and&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;0;</span><br>
<span class="lineno"></span><span class="comment" id="2245817">//&nbsp;if&nbsp;the&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;s&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2245879">//&nbsp;signed&nbsp;integer&nbsp;of&nbsp;the&nbsp;given&nbsp;size,&nbsp;err.Err&nbsp;=&nbsp;ErrRange&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2245943">//&nbsp;returned&nbsp;value&nbsp;is&nbsp;the&nbsp;maximum&nbsp;magnitude&nbsp;integer&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2246001">//&nbsp;appropriate&nbsp;bitSize&nbsp;and&nbsp;sign.</span><br>
<span class="lineno">150</span><span class="keyword" id="2246034">func</span>&nbsp;<span class="ident" id="2246039">ParseInt</span><span class="op" id="2246047">(</span><span class="ident" id="2246048">s</span>&nbsp;<span class="builtintype" id="2246050">string</span><span class="op" id="2246056">,</span>&nbsp;<span class="ident" id="2246058">base</span>&nbsp;<span class="builtintype" id="2246063">int</span><span class="op" id="2246066">,</span>&nbsp;<span class="ident" id="2246068">bitSize</span>&nbsp;<span class="builtintype" id="2246076">int</span><span class="op" id="2246079">)</span>&nbsp;<span class="op" id="2246081">(</span><span class="ident" id="2246082">i</span>&nbsp;<span class="ident" id="2246084">int64</span><span class="op" id="2246089">,</span>&nbsp;<span class="ident" id="2246091">err</span>&nbsp;<span class="builtintype" id="2246095">error</span><span class="op" id="2246100">)</span>&nbsp;<span class="op" id="2246102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246105">const</span>&nbsp;<span class="ident" id="2246111">fnParseInt</span>&nbsp;<span class="op" id="2246122">=</span>&nbsp;<span class="string" id="2246124">&#34;ParseInt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246137">if</span>&nbsp;<span class="ident" id="2246140">bitSize</span>&nbsp;<span class="op" id="2246148">==</span>&nbsp;<span class="num" id="2246151">0</span>&nbsp;<span class="op" id="2246153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246157">bitSize</span>&nbsp;<span class="op" id="2246165">=</span>&nbsp;<span class="builtintype" id="2246167">int</span><span class="op" id="2246170">(</span><span class="ident" id="2246171">IntSize</span><span class="op" id="2246178">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2246181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2246185">//&nbsp;Empty&nbsp;string&nbsp;bad.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246207">if</span>&nbsp;<span class="builtinfunc" id="2246210">len</span><span class="op" id="2246213">(</span><span class="ident" id="2246214">s</span><span class="op" id="2246215">)</span>&nbsp;<span class="op" id="2246217">==</span>&nbsp;<span class="num" id="2246220">0</span>&nbsp;<span class="op" id="2246222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246226">return</span>&nbsp;<span class="num" id="2246233">0</span><span class="op" id="2246234">,</span>&nbsp;<span class="ident" id="2246236">syntaxError</span><span class="op" id="2246247">(</span><span class="ident" id="2246248">fnParseInt</span><span class="op" id="2246258">,</span>&nbsp;<span class="ident" id="2246260">s</span><span class="op" id="2246261">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2246264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2246268">//&nbsp;Pick&nbsp;off&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246295">s0</span>&nbsp;<span class="op" id="2246298">:=</span>&nbsp;<span class="ident" id="2246301">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246304">neg</span>&nbsp;<span class="op" id="2246308">:=</span>&nbsp;<span class="builtintype" id="2246311">false</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246318">if</span>&nbsp;<span class="ident" id="2246321">s</span><span class="op" id="2246322">[</span><span class="num" id="2246323">0</span><span class="op" id="2246324">]</span>&nbsp;<span class="op" id="2246326">==</span>&nbsp;<span class="string" id="2246329">&#39;+&#39;</span>&nbsp;<span class="op" id="2246333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246337">s</span>&nbsp;<span class="op" id="2246339">=</span>&nbsp;<span class="ident" id="2246341">s</span><span class="op" id="2246342">[</span><span class="num" id="2246343">1</span><span class="op" id="2246344">:</span><span class="op" id="2246345">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2246348">}</span>&nbsp;<span class="keyword" id="2246350">else</span>&nbsp;<span class="keyword" id="2246355">if</span>&nbsp;<span class="ident" id="2246358">s</span><span class="op" id="2246359">[</span><span class="num" id="2246360">0</span><span class="op" id="2246361">]</span>&nbsp;<span class="op" id="2246363">==</span>&nbsp;<span class="string" id="2246366">&#39;-&#39;</span>&nbsp;<span class="op" id="2246370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246374">neg</span>&nbsp;<span class="op" id="2246378">=</span>&nbsp;<span class="builtintype" id="2246380">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246387">s</span>&nbsp;<span class="op" id="2246389">=</span>&nbsp;<span class="ident" id="2246391">s</span><span class="op" id="2246392">[</span><span class="num" id="2246393">1</span><span class="op" id="2246394">:</span><span class="op" id="2246395">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2246398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2246402">//&nbsp;Convert&nbsp;unsigned&nbsp;and&nbsp;check&nbsp;range.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246440">var</span>&nbsp;<span class="ident" id="2246444">un</span>&nbsp;<span class="ident" id="2246447">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246455">un</span><span class="op" id="2246457">,</span>&nbsp;<span class="ident" id="2246459">err</span>&nbsp;<span class="op" id="2246463">=</span>&nbsp;<span class="ident" id="2246465">ParseUint</span><span class="op" id="2246474">(</span><span class="ident" id="2246475">s</span><span class="op" id="2246476">,</span>&nbsp;<span class="ident" id="2246478">base</span><span class="op" id="2246482">,</span>&nbsp;<span class="ident" id="2246484">bitSize</span><span class="op" id="2246491">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246494">if</span>&nbsp;<span class="ident" id="2246497">err</span>&nbsp;<span class="op" id="2246501">!=</span>&nbsp;<span class="ident" id="2246504">nil</span>&nbsp;<span class="op" id="2246508">&amp;&amp;</span>&nbsp;<span class="ident" id="2246511">err</span><span class="op" id="2246514">.</span><span class="op" id="2246515">(</span><span class="op" id="2246516">*</span><span class="ident" id="2246517">NumError</span><span class="op" id="2246525">)</span><span class="op" id="2246526">.</span><span class="ident" id="2246527">Err</span>&nbsp;<span class="op" id="2246531">!=</span>&nbsp;<span class="ident" id="2246534">ErrRange</span>&nbsp;<span class="op" id="2246543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246547">err</span><span class="op" id="2246550">.</span><span class="op" id="2246551">(</span><span class="op" id="2246552">*</span><span class="ident" id="2246553">NumError</span><span class="op" id="2246561">)</span><span class="op" id="2246562">.</span><span class="ident" id="2246563">Func</span>&nbsp;<span class="op" id="2246568">=</span>&nbsp;<span class="ident" id="2246570">fnParseInt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246583">err</span><span class="op" id="2246586">.</span><span class="op" id="2246587">(</span><span class="op" id="2246588">*</span><span class="ident" id="2246589">NumError</span><span class="op" id="2246597">)</span><span class="op" id="2246598">.</span><span class="ident" id="2246599">Num</span>&nbsp;<span class="op" id="2246603">=</span>&nbsp;<span class="ident" id="2246605">s0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246610">return</span>&nbsp;<span class="num" id="2246617">0</span><span class="op" id="2246618">,</span>&nbsp;<span class="ident" id="2246620">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2246625">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246628">cutoff</span>&nbsp;<span class="op" id="2246635">:=</span>&nbsp;<span class="ident" id="2246638">uint64</span><span class="op" id="2246644">(</span><span class="num" id="2246645">1</span>&nbsp;<span class="op" id="2246647">&lt;&lt;</span>&nbsp;<span class="builtintype" id="2246650">uint</span><span class="op" id="2246654">(</span><span class="ident" id="2246655">bitSize</span><span class="op" id="2246662">-</span><span class="num" id="2246663">1</span><span class="op" id="2246664">)</span><span class="op" id="2246665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246668">if</span>&nbsp;<span class="op" id="2246671">!</span><span class="ident" id="2246672">neg</span>&nbsp;<span class="op" id="2246676">&amp;&amp;</span>&nbsp;<span class="ident" id="2246679">un</span>&nbsp;<span class="op" id="2246682">&gt;=</span>&nbsp;<span class="ident" id="2246685">cutoff</span>&nbsp;<span class="op" id="2246692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246696">return</span>&nbsp;<span class="ident" id="2246703">int64</span><span class="op" id="2246708">(</span><span class="ident" id="2246709">cutoff</span>&nbsp;<span class="op" id="2246716">-</span>&nbsp;<span class="num" id="2246718">1</span><span class="op" id="2246719">)</span><span class="op" id="2246720">,</span>&nbsp;<span class="ident" id="2246722">rangeError</span><span class="op" id="2246732">(</span><span class="ident" id="2246733">fnParseInt</span><span class="op" id="2246743">,</span>&nbsp;<span class="ident" id="2246745">s0</span><span class="op" id="2246747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2246750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246753">if</span>&nbsp;<span class="ident" id="2246756">neg</span>&nbsp;<span class="op" id="2246760">&amp;&amp;</span>&nbsp;<span class="ident" id="2246763">un</span>&nbsp;<span class="op" id="2246766">&gt;</span>&nbsp;<span class="ident" id="2246768">cutoff</span>&nbsp;<span class="op" id="2246775">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246779">return</span>&nbsp;<span class="op" id="2246786">-</span><span class="ident" id="2246787">int64</span><span class="op" id="2246792">(</span><span class="ident" id="2246793">cutoff</span><span class="op" id="2246799">)</span><span class="op" id="2246800">,</span>&nbsp;<span class="ident" id="2246802">rangeError</span><span class="op" id="2246812">(</span><span class="ident" id="2246813">fnParseInt</span><span class="op" id="2246823">,</span>&nbsp;<span class="ident" id="2246825">s0</span><span class="op" id="2246827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2246830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246833">n</span>&nbsp;<span class="op" id="2246835">:=</span>&nbsp;<span class="ident" id="2246838">int64</span><span class="op" id="2246843">(</span><span class="ident" id="2246844">un</span><span class="op" id="2246846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246849">if</span>&nbsp;<span class="ident" id="2246852">neg</span>&nbsp;<span class="op" id="2246856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246860">n</span>&nbsp;<span class="op" id="2246862">=</span>&nbsp;<span class="op" id="2246864">-</span><span class="ident" id="2246865">n</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2246868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2246871">return</span>&nbsp;<span class="ident" id="2246878">n</span><span class="op" id="2246879">,</span>&nbsp;<span class="ident" id="2246881">nil</span><br>
<span class="lineno"></span><span class="op" id="2246885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2246888">//&nbsp;Atoi&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;ParseInt(s,&nbsp;10,&nbsp;0).</span><br>
<span class="lineno">195</span><span class="keyword" id="2246933">func</span>&nbsp;<span class="ident" id="2246938">Atoi</span><span class="op" id="2246942">(</span><span class="ident" id="2246943">s</span>&nbsp;<span class="builtintype" id="2246945">string</span><span class="op" id="2246951">)</span>&nbsp;<span class="op" id="2246953">(</span><span class="ident" id="2246954">i</span>&nbsp;<span class="builtintype" id="2246956">int</span><span class="op" id="2246959">,</span>&nbsp;<span class="ident" id="2246961">err</span>&nbsp;<span class="builtintype" id="2246965">error</span><span class="op" id="2246970">)</span>&nbsp;<span class="op" id="2246972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2246975">i64</span><span class="op" id="2246978">,</span>&nbsp;<span class="ident" id="2246980">err</span>&nbsp;<span class="op" id="2246984">:=</span>&nbsp;<span class="ident" id="2246987">ParseInt</span><span class="op" id="2246995">(</span><span class="ident" id="2246996">s</span><span class="op" id="2246997">,</span>&nbsp;<span class="num" id="2246999">10</span><span class="op" id="2247001">,</span>&nbsp;<span class="num" id="2247003">0</span><span class="op" id="2247004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2247007">return</span>&nbsp;<span class="builtintype" id="2247014">int</span><span class="op" id="2247017">(</span><span class="ident" id="2247018">i64</span><span class="op" id="2247021">)</span><span class="op" id="2247022">,</span>&nbsp;<span class="ident" id="2247024">err</span><br>
<span class="lineno"></span><span class="op" id="2247028">}</span>
</div>
</body>
</html>
