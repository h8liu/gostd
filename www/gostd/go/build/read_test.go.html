<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8299729">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8299785">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8299839">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8299890">package</span>&nbsp;<span class="ident" id="8299898">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8299905">import</span>&nbsp;<span class="op" id="8299912">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8299915">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8299921">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8299932">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8299942">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8299945">const</span>&nbsp;<span class="ident" id="8299951">quote</span>&nbsp;<span class="op" id="8299957">=</span>&nbsp;<span class="string" id="8299959">&#34;`&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8299964">type</span>&nbsp;<span class="ident" id="8299969">readTest</span>&nbsp;<span class="keyword" id="8299978">struct</span>&nbsp;<span class="op" id="8299985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8299988">//&nbsp;Test&nbsp;input&nbsp;contains&nbsp;ℙ&nbsp;where&nbsp;readImports&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300047">in</span>&nbsp;&nbsp;<span class="builtintype" id="8300051">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300059">err</span>&nbsp;<span class="builtintype" id="8300063">string</span><br>
<span class="lineno"></span><span class="op" id="8300070">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8300073">var</span>&nbsp;<span class="ident" id="8300077">readImportsTests</span>&nbsp;<span class="op" id="8300094">=</span>&nbsp;<span class="op" id="8300096">[</span><span class="op" id="8300097">]</span><span class="ident" id="8300098">readTest</span><span class="op" id="8300106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300113">`package&nbsp;p`</span><span class="op" id="8300124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300128">&#34;&#34;</span><span class="op" id="8300130">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300133">}</span><span class="op" id="8300134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300141">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="8300164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300168">&#34;&#34;</span><span class="op" id="8300170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300173">}</span><span class="op" id="8300174">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300181">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="8300206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300210">&#34;&#34;</span><span class="op" id="8300212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300215">}</span><span class="op" id="8300216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300219">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300223">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;;ℙvar&nbsp;x&nbsp;=&nbsp;1`</span><span class="op" id="8300259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300263">&#34;&#34;</span><span class="op" id="8300265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300268">}</span><span class="op" id="8300269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300276">`package&nbsp;p<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;a&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;&#34;x&#34;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span>&nbsp;<span class="op" id="8300437">+</span>&nbsp;<span class="ident" id="8300439">quote</span>&nbsp;<span class="op" id="8300445">+</span>&nbsp;<span class="string" id="8300447">`x`</span>&nbsp;<span class="op" id="8300451">+</span>&nbsp;<span class="ident" id="8300453">quote</span>&nbsp;<span class="op" id="8300459">+</span>&nbsp;<span class="string" id="8300461">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;/*comment*/&nbsp;`</span>&nbsp;<span class="op" id="8300482">+</span>&nbsp;<span class="ident" id="8300484">quote</span>&nbsp;<span class="op" id="8300490">+</span>&nbsp;<span class="string" id="8300492">`x`</span>&nbsp;<span class="op" id="8300496">+</span>&nbsp;<span class="ident" id="8300498">quote</span>&nbsp;<span class="op" id="8300504">+</span>&nbsp;<span class="string" id="8300506">`<br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;`</span>&nbsp;<span class="op" id="8300515">+</span>&nbsp;<span class="ident" id="8300517">quote</span>&nbsp;<span class="op" id="8300523">+</span>&nbsp;<span class="string" id="8300525">`x`</span>&nbsp;<span class="op" id="8300529">+</span>&nbsp;<span class="ident" id="8300531">quote</span>&nbsp;<span class="op" id="8300537">+</span>&nbsp;<span class="string" id="8300539">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;()<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport()import()import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport();import();import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙvar&nbsp;x&nbsp;=&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span><span class="op" id="8300649">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300653">&#34;&#34;</span><span class="op" id="8300655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300658">}</span><span class="op" id="8300659">,</span><br>
<span class="lineno"></span><span class="op" id="8300661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8300664">var</span>&nbsp;<span class="ident" id="8300668">readCommentsTests</span>&nbsp;<span class="op" id="8300686">=</span>&nbsp;<span class="op" id="8300688">[</span><span class="op" id="8300689">]</span><span class="ident" id="8300690">readTest</span><span class="op" id="8300698">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300705">`ℙpackage&nbsp;p`</span><span class="op" id="8300719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300723">&#34;&#34;</span><span class="op" id="8300725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300728">}</span><span class="op" id="8300729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300732">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300736">`ℙpackage&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="8300762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300766">&#34;&#34;</span><span class="op" id="8300768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300771">}</span><span class="op" id="8300772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300779">`ℙpackage&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="8300807">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300811">&#34;&#34;</span><span class="op" id="8300813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300816">}</span><span class="op" id="8300817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300824">`//&nbsp;foo<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;bar&nbsp;*/<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;quux&nbsp;*/&nbsp;//&nbsp;baz<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*/&nbsp;zot&nbsp;*/<br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;asdf<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙHello,&nbsp;world`</span><span class="op" id="8300911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300915">&#34;&#34;</span><span class="op" id="8300917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300920">}</span><span class="op" id="8300921">,</span><br>
<span class="lineno">95</span><span class="op" id="8300923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8300926">func</span>&nbsp;<span class="ident" id="8300931">testRead</span><span class="op" id="8300939">(</span><span class="ident" id="8300940">t</span>&nbsp;<span class="op" id="8300942">*</span><span class="ident" id="8300943">testing</span><span class="op" id="8300950">.</span><span class="ident" id="8300951">T</span><span class="op" id="8300952">,</span>&nbsp;<span class="ident" id="8300954">tests</span>&nbsp;<span class="op" id="8300960">[</span><span class="op" id="8300961">]</span><span class="ident" id="8300962">readTest</span><span class="op" id="8300970">,</span>&nbsp;<span class="ident" id="8300972">read</span>&nbsp;<span class="keyword" id="8300977">func</span><span class="op" id="8300981">(</span><span class="ident" id="8300982">io</span><span class="op" id="8300984">.</span><span class="ident" id="8300985">Reader</span><span class="op" id="8300991">)</span>&nbsp;<span class="op" id="8300993">(</span><span class="op" id="8300994">[</span><span class="op" id="8300995">]</span><span class="builtintype" id="8300996">byte</span><span class="op" id="8301000">,</span>&nbsp;<span class="builtintype" id="8301002">error</span><span class="op" id="8301007">)</span><span class="op" id="8301008">)</span>&nbsp;<span class="op" id="8301010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301013">for</span>&nbsp;<span class="ident" id="8301017">i</span><span class="op" id="8301018">,</span>&nbsp;<span class="ident" id="8301020">tt</span>&nbsp;<span class="op" id="8301023">:=</span>&nbsp;<span class="keyword" id="8301026">range</span>&nbsp;<span class="ident" id="8301032">tests</span>&nbsp;<span class="op" id="8301038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301042">var</span>&nbsp;<span class="ident" id="8301046">in</span><span class="op" id="8301048">,</span>&nbsp;<span class="ident" id="8301050">testOut</span>&nbsp;<span class="builtintype" id="8301058">string</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301067">j</span>&nbsp;<span class="op" id="8301069">:=</span>&nbsp;<span class="ident" id="8301072">strings</span><span class="op" id="8301079">.</span><span class="ident" id="8301080">Index</span><span class="op" id="8301085">(</span><span class="ident" id="8301086">tt</span><span class="op" id="8301088">.</span><span class="ident" id="8301089">in</span><span class="op" id="8301091">,</span>&nbsp;<span class="string" id="8301093">&#34;ℙ&#34;</span><span class="op" id="8301098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301102">if</span>&nbsp;<span class="ident" id="8301105">j</span>&nbsp;<span class="op" id="8301107">&lt;</span>&nbsp;<span class="num" id="8301109">0</span>&nbsp;<span class="op" id="8301111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301116">in</span>&nbsp;<span class="op" id="8301119">=</span>&nbsp;<span class="ident" id="8301121">tt</span><span class="op" id="8301123">.</span><span class="ident" id="8301124">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301130">testOut</span>&nbsp;<span class="op" id="8301138">=</span>&nbsp;<span class="ident" id="8301140">tt</span><span class="op" id="8301142">.</span><span class="ident" id="8301143">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301148">}</span>&nbsp;<span class="keyword" id="8301150">else</span>&nbsp;<span class="op" id="8301155">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301160">in</span>&nbsp;<span class="op" id="8301163">=</span>&nbsp;<span class="ident" id="8301165">tt</span><span class="op" id="8301167">.</span><span class="ident" id="8301168">in</span><span class="op" id="8301170">[</span><span class="op" id="8301171">:</span><span class="ident" id="8301172">j</span><span class="op" id="8301173">]</span>&nbsp;<span class="op" id="8301175">+</span>&nbsp;<span class="ident" id="8301177">tt</span><span class="op" id="8301179">.</span><span class="ident" id="8301180">in</span><span class="op" id="8301182">[</span><span class="ident" id="8301183">j</span><span class="op" id="8301184">+</span><span class="builtinfunc" id="8301185">len</span><span class="op" id="8301188">(</span><span class="string" id="8301189">&#34;ℙ&#34;</span><span class="op" id="8301194">)</span><span class="op" id="8301195">:</span><span class="op" id="8301196">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301201">testOut</span>&nbsp;<span class="op" id="8301209">=</span>&nbsp;<span class="ident" id="8301211">tt</span><span class="op" id="8301213">.</span><span class="ident" id="8301214">in</span><span class="op" id="8301216">[</span><span class="op" id="8301217">:</span><span class="ident" id="8301218">j</span><span class="op" id="8301219">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301227">r</span>&nbsp;<span class="op" id="8301229">:=</span>&nbsp;<span class="ident" id="8301232">strings</span><span class="op" id="8301239">.</span><span class="ident" id="8301240">NewReader</span><span class="op" id="8301249">(</span><span class="ident" id="8301250">in</span><span class="op" id="8301252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301256">buf</span><span class="op" id="8301259">,</span>&nbsp;<span class="ident" id="8301261">err</span>&nbsp;<span class="op" id="8301265">:=</span>&nbsp;<span class="ident" id="8301268">read</span><span class="op" id="8301272">(</span><span class="ident" id="8301273">r</span><span class="op" id="8301274">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301278">if</span>&nbsp;<span class="ident" id="8301281">err</span>&nbsp;<span class="op" id="8301285">!=</span>&nbsp;<span class="ident" id="8301288">nil</span>&nbsp;<span class="op" id="8301292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301297">if</span>&nbsp;<span class="ident" id="8301300">tt</span><span class="op" id="8301302">.</span><span class="ident" id="8301303">err</span>&nbsp;<span class="op" id="8301307">==</span>&nbsp;<span class="string" id="8301310">&#34;&#34;</span>&nbsp;<span class="op" id="8301313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301319">t</span><span class="op" id="8301320">.</span><span class="ident" id="8301321">Errorf</span><span class="op" id="8301327">(</span><span class="string" id="8301328">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;success&nbsp;(%q)&#34;</span><span class="op" id="8301364">,</span>&nbsp;<span class="ident" id="8301366">i</span><span class="op" id="8301367">,</span>&nbsp;<span class="ident" id="8301369">err</span><span class="op" id="8301372">,</span>&nbsp;<span class="builtintype" id="8301374">string</span><span class="op" id="8301380">(</span><span class="ident" id="8301381">buf</span><span class="op" id="8301384">)</span><span class="op" id="8301385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301391">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301403">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301408">if</span>&nbsp;<span class="op" id="8301411">!</span><span class="ident" id="8301412">strings</span><span class="op" id="8301419">.</span><span class="ident" id="8301420">Contains</span><span class="op" id="8301428">(</span><span class="ident" id="8301429">err</span><span class="op" id="8301432">.</span><span class="ident" id="8301433">Error</span><span class="op" id="8301438">(</span><span class="op" id="8301439">)</span><span class="op" id="8301440">,</span>&nbsp;<span class="ident" id="8301442">tt</span><span class="op" id="8301444">.</span><span class="ident" id="8301445">err</span><span class="op" id="8301448">)</span>&nbsp;<span class="op" id="8301450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301456">t</span><span class="op" id="8301457">.</span><span class="ident" id="8301458">Errorf</span><span class="op" id="8301464">(</span><span class="string" id="8301465">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8301491">,</span>&nbsp;<span class="ident" id="8301493">i</span><span class="op" id="8301494">,</span>&nbsp;<span class="ident" id="8301496">err</span><span class="op" id="8301499">,</span>&nbsp;<span class="ident" id="8301501">tt</span><span class="op" id="8301503">.</span><span class="ident" id="8301504">err</span><span class="op" id="8301507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301513">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301530">continue</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301545">if</span>&nbsp;<span class="ident" id="8301548">err</span>&nbsp;<span class="op" id="8301552">==</span>&nbsp;<span class="ident" id="8301555">nil</span>&nbsp;<span class="op" id="8301559">&amp;&amp;</span>&nbsp;<span class="ident" id="8301562">tt</span><span class="op" id="8301564">.</span><span class="ident" id="8301565">err</span>&nbsp;<span class="op" id="8301569">!=</span>&nbsp;<span class="string" id="8301572">&#34;&#34;</span>&nbsp;<span class="op" id="8301575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301580">t</span><span class="op" id="8301581">.</span><span class="ident" id="8301582">Errorf</span><span class="op" id="8301588">(</span><span class="string" id="8301589">&#34;#%d:&nbsp;success,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8301616">,</span>&nbsp;<span class="ident" id="8301618">i</span><span class="op" id="8301619">,</span>&nbsp;<span class="ident" id="8301621">tt</span><span class="op" id="8301623">.</span><span class="ident" id="8301624">err</span><span class="op" id="8301627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301632">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301643">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301648">out</span>&nbsp;<span class="op" id="8301652">:=</span>&nbsp;<span class="builtintype" id="8301655">string</span><span class="op" id="8301661">(</span><span class="ident" id="8301662">buf</span><span class="op" id="8301665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301669">if</span>&nbsp;<span class="ident" id="8301672">out</span>&nbsp;<span class="op" id="8301676">!=</span>&nbsp;<span class="ident" id="8301679">testOut</span>&nbsp;<span class="op" id="8301687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301692">t</span><span class="op" id="8301693">.</span><span class="ident" id="8301694">Errorf</span><span class="op" id="8301700">(</span><span class="string" id="8301701">&#34;#%d:&nbsp;wrong&nbsp;output:\nhave&nbsp;%q\nwant&nbsp;%q\n&#34;</span><span class="op" id="8301741">,</span>&nbsp;<span class="ident" id="8301743">i</span><span class="op" id="8301744">,</span>&nbsp;<span class="ident" id="8301746">out</span><span class="op" id="8301749">,</span>&nbsp;<span class="ident" id="8301751">testOut</span><span class="op" id="8301758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301762">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301765">}</span><br>
<span class="lineno"></span><span class="op" id="8301767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8301770">func</span>&nbsp;<span class="ident" id="8301775">TestReadImports</span><span class="op" id="8301790">(</span><span class="ident" id="8301791">t</span>&nbsp;<span class="op" id="8301793">*</span><span class="ident" id="8301794">testing</span><span class="op" id="8301801">.</span><span class="ident" id="8301802">T</span><span class="op" id="8301803">)</span>&nbsp;<span class="op" id="8301805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301808">testRead</span><span class="op" id="8301816">(</span><span class="ident" id="8301817">t</span><span class="op" id="8301818">,</span>&nbsp;<span class="ident" id="8301820">readImportsTests</span><span class="op" id="8301836">,</span>&nbsp;<span class="keyword" id="8301838">func</span><span class="op" id="8301842">(</span><span class="ident" id="8301843">r</span>&nbsp;<span class="ident" id="8301845">io</span><span class="op" id="8301847">.</span><span class="ident" id="8301848">Reader</span><span class="op" id="8301854">)</span>&nbsp;<span class="op" id="8301856">(</span><span class="op" id="8301857">[</span><span class="op" id="8301858">]</span><span class="builtintype" id="8301859">byte</span><span class="op" id="8301863">,</span>&nbsp;<span class="builtintype" id="8301865">error</span><span class="op" id="8301870">)</span>&nbsp;<span class="op" id="8301872">{</span>&nbsp;<span class="keyword" id="8301874">return</span>&nbsp;<span class="ident" id="8301881">readImports</span><span class="op" id="8301892">(</span><span class="ident" id="8301893">r</span><span class="op" id="8301894">,</span>&nbsp;<span class="builtintype" id="8301896">true</span><span class="op" id="8301900">)</span>&nbsp;<span class="op" id="8301902">}</span><span class="op" id="8301903">)</span><br>
<span class="lineno">135</span><span class="op" id="8301905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8301908">func</span>&nbsp;<span class="ident" id="8301913">TestReadComments</span><span class="op" id="8301929">(</span><span class="ident" id="8301930">t</span>&nbsp;<span class="op" id="8301932">*</span><span class="ident" id="8301933">testing</span><span class="op" id="8301940">.</span><span class="ident" id="8301941">T</span><span class="op" id="8301942">)</span>&nbsp;<span class="op" id="8301944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301947">testRead</span><span class="op" id="8301955">(</span><span class="ident" id="8301956">t</span><span class="op" id="8301957">,</span>&nbsp;<span class="ident" id="8301959">readCommentsTests</span><span class="op" id="8301976">,</span>&nbsp;<span class="ident" id="8301978">readComments</span><span class="op" id="8301990">)</span><br>
<span class="lineno"></span><span class="op" id="8301992">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8301995">var</span>&nbsp;<span class="ident" id="8301999">readFailuresTests</span>&nbsp;<span class="op" id="8302017">=</span>&nbsp;<span class="op" id="8302019">[</span><span class="op" id="8302020">]</span><span class="ident" id="8302021">readTest</span><span class="op" id="8302029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302036">`package`</span><span class="op" id="8302045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302049">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302063">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302066">}</span><span class="op" id="8302067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302074">&#34;package&nbsp;p\n\x00\nimport&nbsp;`math`\n&#34;</span><span class="op" id="8302108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302112">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="8302137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302140">}</span><span class="op" id="8302141">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302148">`package&nbsp;p;&nbsp;import`</span><span class="op" id="8302167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302171">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302188">}</span><span class="op" id="8302189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302192">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302196">`package&nbsp;p;&nbsp;import&nbsp;&#34;`</span><span class="op" id="8302217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302221">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302238">}</span><span class="op" id="8302239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302246">&#34;package&nbsp;p;&nbsp;import&nbsp;`&nbsp;\n\n&#34;</span><span class="op" id="8302272">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302276">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302293">}</span><span class="op" id="8302294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302301">`package&nbsp;p;&nbsp;import&nbsp;&#34;x`</span><span class="op" id="8302323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302327">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302341">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302344">}</span><span class="op" id="8302345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302352">`package&nbsp;p;&nbsp;import&nbsp;_`</span><span class="op" id="8302373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302377">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302394">}</span><span class="op" id="8302395">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302402">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;`</span><span class="op" id="8302425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302429">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302446">}</span><span class="op" id="8302447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302450">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302454">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;x`</span><span class="op" id="8302478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302482">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302499">}</span><span class="op" id="8302500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302507">`package&nbsp;p;&nbsp;import&nbsp;.`</span><span class="op" id="8302528">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302532">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302549">}</span><span class="op" id="8302550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302557">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;`</span><span class="op" id="8302580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302584">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302598">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302601">}</span><span class="op" id="8302602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302609">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x`</span><span class="op" id="8302633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302637">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302654">}</span><span class="op" id="8302655">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302662">`package&nbsp;p;&nbsp;import&nbsp;(`</span><span class="op" id="8302683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302687">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302704">}</span><span class="op" id="8302705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302708">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302712">`package&nbsp;p;&nbsp;import&nbsp;(&#34;`</span><span class="op" id="8302734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302738">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302755">}</span><span class="op" id="8302756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302763">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x`</span><span class="op" id="8302786">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302790">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302807">}</span><span class="op" id="8302808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302815">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x&#34;`</span><span class="op" id="8302839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302843">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8302857">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302860">}</span><span class="op" id="8302861">,</span><br>
<span class="lineno"></span><span class="op" id="8302863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8302866">func</span>&nbsp;<span class="ident" id="8302871">TestReadFailures</span><span class="op" id="8302887">(</span><span class="ident" id="8302888">t</span>&nbsp;<span class="op" id="8302890">*</span><span class="ident" id="8302891">testing</span><span class="op" id="8302898">.</span><span class="ident" id="8302899">T</span><span class="op" id="8302900">)</span>&nbsp;<span class="op" id="8302902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8302905">//&nbsp;Errors&nbsp;should&nbsp;be&nbsp;reported&nbsp;(true&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302962">testRead</span><span class="op" id="8302970">(</span><span class="ident" id="8302971">t</span><span class="op" id="8302972">,</span>&nbsp;<span class="ident" id="8302974">readFailuresTests</span><span class="op" id="8302991">,</span>&nbsp;<span class="keyword" id="8302993">func</span><span class="op" id="8302997">(</span><span class="ident" id="8302998">r</span>&nbsp;<span class="ident" id="8303000">io</span><span class="op" id="8303002">.</span><span class="ident" id="8303003">Reader</span><span class="op" id="8303009">)</span>&nbsp;<span class="op" id="8303011">(</span><span class="op" id="8303012">[</span><span class="op" id="8303013">]</span><span class="builtintype" id="8303014">byte</span><span class="op" id="8303018">,</span>&nbsp;<span class="builtintype" id="8303020">error</span><span class="op" id="8303025">)</span>&nbsp;<span class="op" id="8303027">{</span>&nbsp;<span class="keyword" id="8303029">return</span>&nbsp;<span class="ident" id="8303036">readImports</span><span class="op" id="8303047">(</span><span class="ident" id="8303048">r</span><span class="op" id="8303049">,</span>&nbsp;<span class="builtintype" id="8303051">true</span><span class="op" id="8303055">)</span>&nbsp;<span class="op" id="8303057">}</span><span class="op" id="8303058">)</span><br>
<span class="lineno"></span><span class="op" id="8303060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8303063">func</span>&nbsp;<span class="ident" id="8303068">TestReadFailuresIgnored</span><span class="op" id="8303091">(</span><span class="ident" id="8303092">t</span>&nbsp;<span class="op" id="8303094">*</span><span class="ident" id="8303095">testing</span><span class="op" id="8303102">.</span><span class="ident" id="8303103">T</span><span class="op" id="8303104">)</span>&nbsp;<span class="op" id="8303106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8303109">//&nbsp;Syntax&nbsp;errors&nbsp;should&nbsp;not&nbsp;be&nbsp;reported&nbsp;(false&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8303178">//&nbsp;Instead,&nbsp;entire&nbsp;file&nbsp;should&nbsp;be&nbsp;the&nbsp;output&nbsp;and&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8303238">//&nbsp;Convert&nbsp;tests&nbsp;not&nbsp;to&nbsp;return&nbsp;syntax&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303285">tests</span>&nbsp;<span class="op" id="8303291">:=</span>&nbsp;<span class="builtinfunc" id="8303294">make</span><span class="op" id="8303298">(</span><span class="op" id="8303299">[</span><span class="op" id="8303300">]</span><span class="ident" id="8303301">readTest</span><span class="op" id="8303309">,</span>&nbsp;<span class="builtinfunc" id="8303311">len</span><span class="op" id="8303314">(</span><span class="ident" id="8303315">readFailuresTests</span><span class="op" id="8303332">)</span><span class="op" id="8303333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8303336">copy</span><span class="op" id="8303340">(</span><span class="ident" id="8303341">tests</span><span class="op" id="8303346">,</span>&nbsp;<span class="ident" id="8303348">readFailuresTests</span><span class="op" id="8303365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303368">for</span>&nbsp;<span class="ident" id="8303372">i</span>&nbsp;<span class="op" id="8303374">:=</span>&nbsp;<span class="keyword" id="8303377">range</span>&nbsp;<span class="ident" id="8303383">tests</span>&nbsp;<span class="op" id="8303389">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303393">tt</span>&nbsp;<span class="op" id="8303396">:=</span>&nbsp;<span class="op" id="8303399">&amp;</span><span class="ident" id="8303400">tests</span><span class="op" id="8303405">[</span><span class="ident" id="8303406">i</span><span class="op" id="8303407">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303411">if</span>&nbsp;<span class="op" id="8303414">!</span><span class="ident" id="8303415">strings</span><span class="op" id="8303422">.</span><span class="ident" id="8303423">Contains</span><span class="op" id="8303431">(</span><span class="ident" id="8303432">tt</span><span class="op" id="8303434">.</span><span class="ident" id="8303435">err</span><span class="op" id="8303438">,</span>&nbsp;<span class="string" id="8303440">&#34;NUL&#34;</span><span class="op" id="8303445">)</span>&nbsp;<span class="op" id="8303447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303452">tt</span><span class="op" id="8303454">.</span><span class="ident" id="8303455">err</span>&nbsp;<span class="op" id="8303459">=</span>&nbsp;<span class="string" id="8303461">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303469">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303472">testRead</span><span class="op" id="8303480">(</span><span class="ident" id="8303481">t</span><span class="op" id="8303482">,</span>&nbsp;<span class="ident" id="8303484">tests</span><span class="op" id="8303489">,</span>&nbsp;<span class="keyword" id="8303491">func</span><span class="op" id="8303495">(</span><span class="ident" id="8303496">r</span>&nbsp;<span class="ident" id="8303498">io</span><span class="op" id="8303500">.</span><span class="ident" id="8303501">Reader</span><span class="op" id="8303507">)</span>&nbsp;<span class="op" id="8303509">(</span><span class="op" id="8303510">[</span><span class="op" id="8303511">]</span><span class="builtintype" id="8303512">byte</span><span class="op" id="8303516">,</span>&nbsp;<span class="builtintype" id="8303518">error</span><span class="op" id="8303523">)</span>&nbsp;<span class="op" id="8303525">{</span>&nbsp;<span class="keyword" id="8303527">return</span>&nbsp;<span class="ident" id="8303534">readImports</span><span class="op" id="8303545">(</span><span class="ident" id="8303546">r</span><span class="op" id="8303547">,</span>&nbsp;<span class="builtintype" id="8303549">false</span><span class="op" id="8303554">)</span>&nbsp;<span class="op" id="8303556">}</span><span class="op" id="8303557">)</span><br>
<span class="lineno"></span><span class="op" id="8303559">}</span>
</div>
</body>
</html>
