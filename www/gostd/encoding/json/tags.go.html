<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html" class="current">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5411135">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5411190">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5411244">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5411295">package</span>&nbsp;<span class="ident" id="5411303">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5411309">import</span>&nbsp;<span class="op" id="5411316">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5411319">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5411329">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="5411332">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5411405">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="5411473">type</span>&nbsp;<span class="ident" id="5411478">tagOptions</span>&nbsp;<span class="builtintype" id="5411489">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5411497">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5411560">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="5411588">func</span>&nbsp;<span class="ident" id="5411593">parseTag</span><span class="op" id="5411601">(</span><span class="ident" id="5411602">tag</span>&nbsp;<span class="builtintype" id="5411606">string</span><span class="op" id="5411612">)</span>&nbsp;<span class="op" id="5411614">(</span><span class="builtintype" id="5411615">string</span><span class="op" id="5411621">,</span>&nbsp;<span class="ident" id="5411623">tagOptions</span><span class="op" id="5411633">)</span>&nbsp;<span class="op" id="5411635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5411638">if</span>&nbsp;<span class="ident" id="5411641">idx</span>&nbsp;<span class="op" id="5411645">:=</span>&nbsp;<span class="ident" id="5411648">strings</span><span class="op" id="5411655">.</span><span class="ident" id="5411656">Index</span><span class="op" id="5411661">(</span><span class="ident" id="5411662">tag</span><span class="op" id="5411665">,</span>&nbsp;<span class="string" id="5411667">&#34;,&#34;</span><span class="op" id="5411670">)</span><span class="op" id="5411671">;</span>&nbsp;<span class="ident" id="5411673">idx</span>&nbsp;<span class="op" id="5411677">!=</span>&nbsp;<span class="op" id="5411680">-</span><span class="num" id="5411681">1</span>&nbsp;<span class="op" id="5411683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5411687">return</span>&nbsp;<span class="ident" id="5411694">tag</span><span class="op" id="5411697">[</span><span class="op" id="5411698">:</span><span class="ident" id="5411699">idx</span><span class="op" id="5411702">]</span><span class="op" id="5411703">,</span>&nbsp;<span class="ident" id="5411705">tagOptions</span><span class="op" id="5411715">(</span><span class="ident" id="5411716">tag</span><span class="op" id="5411719">[</span><span class="ident" id="5411720">idx</span><span class="op" id="5411723">+</span><span class="num" id="5411724">1</span><span class="op" id="5411725">:</span><span class="op" id="5411726">]</span><span class="op" id="5411727">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5411730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5411733">return</span>&nbsp;<span class="ident" id="5411740">tag</span><span class="op" id="5411743">,</span>&nbsp;<span class="ident" id="5411745">tagOptions</span><span class="op" id="5411755">(</span><span class="string" id="5411756">&#34;&#34;</span><span class="op" id="5411758">)</span><br>
<span class="lineno"></span><span class="op" id="5411760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5411763">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="5411825">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5411894">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="5411924">func</span>&nbsp;<span class="op" id="5411929">(</span><span class="ident" id="5411930">o</span>&nbsp;<span class="ident" id="5411932">tagOptions</span><span class="op" id="5411942">)</span>&nbsp;<span class="ident" id="5411944">Contains</span><span class="op" id="5411952">(</span><span class="ident" id="5411953">optionName</span>&nbsp;<span class="builtintype" id="5411964">string</span><span class="op" id="5411970">)</span>&nbsp;<span class="builtintype" id="5411972">bool</span>&nbsp;<span class="op" id="5411977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5411980">if</span>&nbsp;<span class="builtinfunc" id="5411983">len</span><span class="op" id="5411986">(</span><span class="ident" id="5411987">o</span><span class="op" id="5411988">)</span>&nbsp;<span class="op" id="5411990">==</span>&nbsp;<span class="num" id="5411993">0</span>&nbsp;<span class="op" id="5411995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5411999">return</span>&nbsp;<span class="builtintype" id="5412006">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5412016">s</span>&nbsp;<span class="op" id="5412018">:=</span>&nbsp;<span class="builtintype" id="5412021">string</span><span class="op" id="5412027">(</span><span class="ident" id="5412028">o</span><span class="op" id="5412029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412032">for</span>&nbsp;<span class="ident" id="5412036">s</span>&nbsp;<span class="op" id="5412038">!=</span>&nbsp;<span class="string" id="5412041">&#34;&#34;</span>&nbsp;<span class="op" id="5412044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412048">var</span>&nbsp;<span class="ident" id="5412052">next</span>&nbsp;<span class="builtintype" id="5412057">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5412066">i</span>&nbsp;<span class="op" id="5412068">:=</span>&nbsp;<span class="ident" id="5412071">strings</span><span class="op" id="5412078">.</span><span class="ident" id="5412079">Index</span><span class="op" id="5412084">(</span><span class="ident" id="5412085">s</span><span class="op" id="5412086">,</span>&nbsp;<span class="string" id="5412088">&#34;,&#34;</span><span class="op" id="5412091">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412095">if</span>&nbsp;<span class="ident" id="5412098">i</span>&nbsp;<span class="op" id="5412100">&gt;=</span>&nbsp;<span class="num" id="5412103">0</span>&nbsp;<span class="op" id="5412105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5412110">s</span><span class="op" id="5412111">,</span>&nbsp;<span class="ident" id="5412113">next</span>&nbsp;<span class="op" id="5412118">=</span>&nbsp;<span class="ident" id="5412120">s</span><span class="op" id="5412121">[</span><span class="op" id="5412122">:</span><span class="ident" id="5412123">i</span><span class="op" id="5412124">]</span><span class="op" id="5412125">,</span>&nbsp;<span class="ident" id="5412127">s</span><span class="op" id="5412128">[</span><span class="ident" id="5412129">i</span><span class="op" id="5412130">+</span><span class="num" id="5412131">1</span><span class="op" id="5412132">:</span><span class="op" id="5412133">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412141">if</span>&nbsp;<span class="ident" id="5412144">s</span>&nbsp;<span class="op" id="5412146">==</span>&nbsp;<span class="ident" id="5412149">optionName</span>&nbsp;<span class="op" id="5412160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412165">return</span>&nbsp;<span class="builtintype" id="5412172">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5412183">s</span>&nbsp;<span class="op" id="5412185">=</span>&nbsp;<span class="ident" id="5412187">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412196">return</span>&nbsp;<span class="builtintype" id="5412203">false</span><br>
<span class="lineno"></span><span class="op" id="5412209">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
