<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html" class="current">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4754365">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4754421">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4754475">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4754526">package</span>&nbsp;<span class="ident" id="4754534">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4754541">import</span>&nbsp;<span class="op" id="4754548">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4754551">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4754558">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4754568">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4754571">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="4754642">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="4754710">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4754776">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="4754844">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="4754884">type</span>&nbsp;<span class="ident" id="4754889">typeUnit</span>&nbsp;<span class="keyword" id="4754898">struct</span>&nbsp;<span class="op" id="4754905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4754908">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4754914">toff</span>&nbsp;&nbsp;<span class="ident" id="4754920">Offset</span>&nbsp;<span class="comment" id="4754927">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4754969">name</span>&nbsp;&nbsp;<span class="builtintype" id="4754975">string</span>&nbsp;<span class="comment" id="4754982">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755015">cache</span>&nbsp;<span class="ident" id="4755021">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4755028">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="4755061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="4755064">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="4755097">func</span>&nbsp;<span class="op" id="4755102">(</span><span class="ident" id="4755103">d</span>&nbsp;<span class="op" id="4755105">*</span><span class="ident" id="4755106">Data</span><span class="op" id="4755110">)</span>&nbsp;<span class="ident" id="4755112">parseTypes</span><span class="op" id="4755122">(</span><span class="ident" id="4755123">name</span>&nbsp;<span class="builtintype" id="4755128">string</span><span class="op" id="4755134">,</span>&nbsp;<span class="ident" id="4755136">types</span>&nbsp;<span class="op" id="4755142">[</span><span class="op" id="4755143">]</span><span class="builtintype" id="4755144">byte</span><span class="op" id="4755148">)</span>&nbsp;<span class="builtintype" id="4755150">error</span>&nbsp;<span class="op" id="4755156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755159">b</span>&nbsp;<span class="op" id="4755161">:=</span>&nbsp;<span class="ident" id="4755164">makeBuf</span><span class="op" id="4755171">(</span><span class="ident" id="4755172">d</span><span class="op" id="4755173">,</span>&nbsp;<span class="ident" id="4755175">unknownFormat</span><span class="op" id="4755188">{</span><span class="op" id="4755189">}</span><span class="op" id="4755190">,</span>&nbsp;<span class="ident" id="4755192">name</span><span class="op" id="4755196">,</span>&nbsp;<span class="num" id="4755198">0</span><span class="op" id="4755199">,</span>&nbsp;<span class="ident" id="4755201">types</span><span class="op" id="4755206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755209">for</span>&nbsp;<span class="builtinfunc" id="4755213">len</span><span class="op" id="4755216">(</span><span class="ident" id="4755217">b</span><span class="op" id="4755218">.</span><span class="ident" id="4755219">data</span><span class="op" id="4755223">)</span>&nbsp;<span class="op" id="4755225">&gt;</span>&nbsp;<span class="num" id="4755227">0</span>&nbsp;<span class="op" id="4755229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755233">base</span>&nbsp;<span class="op" id="4755238">:=</span>&nbsp;<span class="ident" id="4755241">b</span><span class="op" id="4755242">.</span><span class="ident" id="4755243">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755249">dwarf64</span>&nbsp;<span class="op" id="4755257">:=</span>&nbsp;<span class="builtintype" id="4755260">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755268">n</span>&nbsp;<span class="op" id="4755270">:=</span>&nbsp;<span class="ident" id="4755273">b</span><span class="op" id="4755274">.</span><span class="builtintype" id="4755275">uint32</span><span class="op" id="4755281">(</span><span class="op" id="4755282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755286">if</span>&nbsp;<span class="ident" id="4755289">n</span>&nbsp;<span class="op" id="4755291">==</span>&nbsp;<span class="num" id="4755294">0xffffffff</span>&nbsp;<span class="op" id="4755305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755310">n64</span>&nbsp;<span class="op" id="4755314">:=</span>&nbsp;<span class="ident" id="4755317">b</span><span class="op" id="4755318">.</span><span class="ident" id="4755319">uint64</span><span class="op" id="4755325">(</span><span class="op" id="4755326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755331">if</span>&nbsp;<span class="ident" id="4755334">n64</span>&nbsp;<span class="op" id="4755338">!=</span>&nbsp;<span class="ident" id="4755341">uint64</span><span class="op" id="4755347">(</span><span class="builtintype" id="4755348">uint32</span><span class="op" id="4755354">(</span><span class="ident" id="4755355">n64</span><span class="op" id="4755358">)</span><span class="op" id="4755359">)</span>&nbsp;<span class="op" id="4755361">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755367">b</span><span class="op" id="4755368">.</span><span class="builtintype" id="4755369">error</span><span class="op" id="4755374">(</span><span class="string" id="4755375">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="4755402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755408">return</span>&nbsp;<span class="ident" id="4755415">b</span><span class="op" id="4755416">.</span><span class="ident" id="4755417">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4755424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755429">n</span>&nbsp;<span class="op" id="4755431">=</span>&nbsp;<span class="builtintype" id="4755433">uint32</span><span class="op" id="4755439">(</span><span class="ident" id="4755440">n64</span><span class="op" id="4755443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755448">dwarf64</span>&nbsp;<span class="op" id="4755456">=</span>&nbsp;<span class="builtintype" id="4755458">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4755465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755469">hdroff</span>&nbsp;<span class="op" id="4755476">:=</span>&nbsp;<span class="ident" id="4755479">b</span><span class="op" id="4755480">.</span><span class="ident" id="4755481">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755487">vers</span>&nbsp;<span class="op" id="4755492">:=</span>&nbsp;<span class="ident" id="4755495">b</span><span class="op" id="4755496">.</span><span class="builtintype" id="4755497">uint16</span><span class="op" id="4755503">(</span><span class="op" id="4755504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755508">if</span>&nbsp;<span class="ident" id="4755511">vers</span>&nbsp;<span class="op" id="4755516">!=</span>&nbsp;<span class="num" id="4755519">4</span>&nbsp;<span class="op" id="4755521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755526">b</span><span class="op" id="4755527">.</span><span class="builtintype" id="4755528">error</span><span class="op" id="4755533">(</span><span class="string" id="4755534">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="4755563">+</span>&nbsp;<span class="ident" id="4755565">strconv</span><span class="op" id="4755572">.</span><span class="ident" id="4755573">Itoa</span><span class="op" id="4755577">(</span><span class="builtintype" id="4755578">int</span><span class="op" id="4755581">(</span><span class="ident" id="4755582">vers</span><span class="op" id="4755586">)</span><span class="op" id="4755587">)</span><span class="op" id="4755588">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755593">return</span>&nbsp;<span class="ident" id="4755600">b</span><span class="op" id="4755601">.</span><span class="ident" id="4755602">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4755608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755612">var</span>&nbsp;<span class="ident" id="4755616">ao</span>&nbsp;<span class="builtintype" id="4755619">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755628">if</span>&nbsp;<span class="op" id="4755631">!</span><span class="ident" id="4755632">dwarf64</span>&nbsp;<span class="op" id="4755640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755645">ao</span>&nbsp;<span class="op" id="4755648">=</span>&nbsp;<span class="ident" id="4755650">b</span><span class="op" id="4755651">.</span><span class="builtintype" id="4755652">uint32</span><span class="op" id="4755658">(</span><span class="op" id="4755659">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4755663">}</span>&nbsp;<span class="keyword" id="4755665">else</span>&nbsp;<span class="op" id="4755670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755675">ao64</span>&nbsp;<span class="op" id="4755680">:=</span>&nbsp;<span class="ident" id="4755683">b</span><span class="op" id="4755684">.</span><span class="ident" id="4755685">uint64</span><span class="op" id="4755691">(</span><span class="op" id="4755692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755697">if</span>&nbsp;<span class="ident" id="4755700">ao64</span>&nbsp;<span class="op" id="4755705">!=</span>&nbsp;<span class="ident" id="4755708">uint64</span><span class="op" id="4755714">(</span><span class="builtintype" id="4755715">uint32</span><span class="op" id="4755721">(</span><span class="ident" id="4755722">ao64</span><span class="op" id="4755726">)</span><span class="op" id="4755727">)</span>&nbsp;<span class="op" id="4755729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755735">b</span><span class="op" id="4755736">.</span><span class="builtintype" id="4755737">error</span><span class="op" id="4755742">(</span><span class="string" id="4755743">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="4755777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755783">return</span>&nbsp;<span class="ident" id="4755790">b</span><span class="op" id="4755791">.</span><span class="ident" id="4755792">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4755799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755804">ao</span>&nbsp;<span class="op" id="4755807">=</span>&nbsp;<span class="builtintype" id="4755809">uint32</span><span class="op" id="4755815">(</span><span class="ident" id="4755816">ao64</span><span class="op" id="4755820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4755824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755828">atable</span><span class="op" id="4755834">,</span>&nbsp;<span class="ident" id="4755836">err</span>&nbsp;<span class="op" id="4755840">:=</span>&nbsp;<span class="ident" id="4755843">d</span><span class="op" id="4755844">.</span><span class="ident" id="4755845">parseAbbrev</span><span class="op" id="4755856">(</span><span class="ident" id="4755857">ao</span><span class="op" id="4755859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755863">if</span>&nbsp;<span class="ident" id="4755866">err</span>&nbsp;<span class="op" id="4755870">!=</span>&nbsp;<span class="builtintype" id="4755873">nil</span>&nbsp;<span class="op" id="4755877">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755882">return</span>&nbsp;<span class="ident" id="4755889">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4755895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755899">asize</span>&nbsp;<span class="op" id="4755905">:=</span>&nbsp;<span class="ident" id="4755908">b</span><span class="op" id="4755909">.</span><span class="builtintype" id="4755910">uint8</span><span class="op" id="4755915">(</span><span class="op" id="4755916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755920">sig</span>&nbsp;<span class="op" id="4755924">:=</span>&nbsp;<span class="ident" id="4755927">b</span><span class="op" id="4755928">.</span><span class="ident" id="4755929">uint64</span><span class="op" id="4755935">(</span><span class="op" id="4755936">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755941">var</span>&nbsp;<span class="ident" id="4755945">toff</span>&nbsp;<span class="builtintype" id="4755950">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4755959">if</span>&nbsp;<span class="op" id="4755962">!</span><span class="ident" id="4755963">dwarf64</span>&nbsp;<span class="op" id="4755971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4755976">toff</span>&nbsp;<span class="op" id="4755981">=</span>&nbsp;<span class="ident" id="4755983">b</span><span class="op" id="4755984">.</span><span class="builtintype" id="4755985">uint32</span><span class="op" id="4755991">(</span><span class="op" id="4755992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4755996">}</span>&nbsp;<span class="keyword" id="4755998">else</span>&nbsp;<span class="op" id="4756003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756008">to64</span>&nbsp;<span class="op" id="4756013">:=</span>&nbsp;<span class="ident" id="4756016">b</span><span class="op" id="4756017">.</span><span class="ident" id="4756018">uint64</span><span class="op" id="4756024">(</span><span class="op" id="4756025">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756030">if</span>&nbsp;<span class="ident" id="4756033">to64</span>&nbsp;<span class="op" id="4756038">!=</span>&nbsp;<span class="ident" id="4756041">uint64</span><span class="op" id="4756047">(</span><span class="builtintype" id="4756048">uint32</span><span class="op" id="4756054">(</span><span class="ident" id="4756055">to64</span><span class="op" id="4756059">)</span><span class="op" id="4756060">)</span>&nbsp;<span class="op" id="4756062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756068">b</span><span class="op" id="4756069">.</span><span class="builtintype" id="4756070">error</span><span class="op" id="4756075">(</span><span class="string" id="4756076">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="4756108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756114">return</span>&nbsp;<span class="ident" id="4756121">b</span><span class="op" id="4756122">.</span><span class="ident" id="4756123">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4756130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756135">toff</span>&nbsp;<span class="op" id="4756140">=</span>&nbsp;<span class="builtintype" id="4756142">uint32</span><span class="op" id="4756148">(</span><span class="ident" id="4756149">to64</span><span class="op" id="4756153">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4756157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756162">boff</span>&nbsp;<span class="op" id="4756167">:=</span>&nbsp;<span class="ident" id="4756170">b</span><span class="op" id="4756171">.</span><span class="ident" id="4756172">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756178">d</span><span class="op" id="4756179">.</span><span class="ident" id="4756180">typeSigs</span><span class="op" id="4756188">[</span><span class="ident" id="4756189">sig</span><span class="op" id="4756192">]</span>&nbsp;<span class="op" id="4756194">=</span>&nbsp;<span class="op" id="4756196">&amp;</span><span class="ident" id="4756197">typeUnit</span><span class="op" id="4756205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756210">unit</span><span class="op" id="4756214">:</span>&nbsp;<span class="ident" id="4756216">unit</span><span class="op" id="4756220">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756226">base</span><span class="op" id="4756230">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4756234">base</span><span class="op" id="4756238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756244">off</span><span class="op" id="4756247">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756252">boff</span><span class="op" id="4756256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756262">data</span><span class="op" id="4756266">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4756270">b</span><span class="op" id="4756271">.</span><span class="ident" id="4756272">bytes</span><span class="op" id="4756277">(</span><span class="builtintype" id="4756278">int</span><span class="op" id="4756281">(</span><span class="ident" id="4756282">Offset</span><span class="op" id="4756288">(</span><span class="ident" id="4756289">n</span><span class="op" id="4756290">)</span>&nbsp;<span class="op" id="4756292">-</span>&nbsp;<span class="op" id="4756294">(</span><span class="ident" id="4756295">b</span><span class="op" id="4756296">.</span><span class="ident" id="4756297">off</span>&nbsp;<span class="op" id="4756301">-</span>&nbsp;<span class="ident" id="4756303">hdroff</span><span class="op" id="4756309">)</span><span class="op" id="4756310">)</span><span class="op" id="4756311">)</span><span class="op" id="4756312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756318">atable</span><span class="op" id="4756324">:</span>&nbsp;<span class="ident" id="4756326">atable</span><span class="op" id="4756332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756338">asize</span><span class="op" id="4756343">:</span>&nbsp;&nbsp;<span class="builtintype" id="4756346">int</span><span class="op" id="4756349">(</span><span class="ident" id="4756350">asize</span><span class="op" id="4756355">)</span><span class="op" id="4756356">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756362">vers</span><span class="op" id="4756366">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4756370">int</span><span class="op" id="4756373">(</span><span class="ident" id="4756374">vers</span><span class="op" id="4756378">)</span><span class="op" id="4756379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756385">is64</span><span class="op" id="4756389">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4756393">dwarf64</span><span class="op" id="4756400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4756405">}</span><span class="op" id="4756406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756411">toff</span><span class="op" id="4756415">:</span>&nbsp;<span class="ident" id="4756417">Offset</span><span class="op" id="4756423">(</span><span class="ident" id="4756424">toff</span><span class="op" id="4756428">)</span><span class="op" id="4756429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756434">name</span><span class="op" id="4756438">:</span>&nbsp;<span class="ident" id="4756440">name</span><span class="op" id="4756444">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4756448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756452">if</span>&nbsp;<span class="ident" id="4756455">b</span><span class="op" id="4756456">.</span><span class="ident" id="4756457">err</span>&nbsp;<span class="op" id="4756461">!=</span>&nbsp;<span class="builtintype" id="4756464">nil</span>&nbsp;<span class="op" id="4756468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756473">return</span>&nbsp;<span class="ident" id="4756480">b</span><span class="op" id="4756481">.</span><span class="ident" id="4756482">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4756488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4756491">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756494">return</span>&nbsp;<span class="builtintype" id="4756501">nil</span><br>
<span class="lineno"></span><span class="op" id="4756505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4756508">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="4756549">func</span>&nbsp;<span class="op" id="4756554">(</span><span class="ident" id="4756555">d</span>&nbsp;<span class="op" id="4756557">*</span><span class="ident" id="4756558">Data</span><span class="op" id="4756562">)</span>&nbsp;<span class="ident" id="4756564">sigToType</span><span class="op" id="4756573">(</span><span class="ident" id="4756574">sig</span>&nbsp;<span class="ident" id="4756578">uint64</span><span class="op" id="4756584">)</span>&nbsp;<span class="op" id="4756586">(</span><span class="ident" id="4756587">Type</span><span class="op" id="4756591">,</span>&nbsp;<span class="builtintype" id="4756593">error</span><span class="op" id="4756598">)</span>&nbsp;<span class="op" id="4756600">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756603">tu</span>&nbsp;<span class="op" id="4756606">:=</span>&nbsp;<span class="ident" id="4756609">d</span><span class="op" id="4756610">.</span><span class="ident" id="4756611">typeSigs</span><span class="op" id="4756619">[</span><span class="ident" id="4756620">sig</span><span class="op" id="4756623">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756626">if</span>&nbsp;<span class="ident" id="4756629">tu</span>&nbsp;<span class="op" id="4756632">==</span>&nbsp;<span class="builtintype" id="4756635">nil</span>&nbsp;<span class="op" id="4756639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756643">return</span>&nbsp;<span class="builtintype" id="4756650">nil</span><span class="op" id="4756653">,</span>&nbsp;<span class="ident" id="4756655">fmt</span><span class="op" id="4756658">.</span><span class="ident" id="4756659">Errorf</span><span class="op" id="4756665">(</span><span class="string" id="4756666">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="4756698">,</span>&nbsp;<span class="ident" id="4756700">sig</span><span class="op" id="4756703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4756706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756709">if</span>&nbsp;<span class="ident" id="4756712">tu</span><span class="op" id="4756714">.</span><span class="ident" id="4756715">cache</span>&nbsp;<span class="op" id="4756721">!=</span>&nbsp;<span class="builtintype" id="4756724">nil</span>&nbsp;<span class="op" id="4756728">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756732">return</span>&nbsp;<span class="ident" id="4756739">tu</span><span class="op" id="4756741">.</span><span class="ident" id="4756742">cache</span><span class="op" id="4756747">,</span>&nbsp;<span class="builtintype" id="4756749">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4756754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756758">b</span>&nbsp;<span class="op" id="4756760">:=</span>&nbsp;<span class="ident" id="4756763">makeBuf</span><span class="op" id="4756770">(</span><span class="ident" id="4756771">d</span><span class="op" id="4756772">,</span>&nbsp;<span class="ident" id="4756774">tu</span><span class="op" id="4756776">,</span>&nbsp;<span class="ident" id="4756778">tu</span><span class="op" id="4756780">.</span><span class="ident" id="4756781">name</span><span class="op" id="4756785">,</span>&nbsp;<span class="ident" id="4756787">tu</span><span class="op" id="4756789">.</span><span class="ident" id="4756790">off</span><span class="op" id="4756793">,</span>&nbsp;<span class="ident" id="4756795">tu</span><span class="op" id="4756797">.</span><span class="ident" id="4756798">data</span><span class="op" id="4756802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756805">r</span>&nbsp;<span class="op" id="4756807">:=</span>&nbsp;<span class="op" id="4756810">&amp;</span><span class="ident" id="4756811">typeUnitReader</span><span class="op" id="4756825">{</span><span class="ident" id="4756826">d</span><span class="op" id="4756827">:</span>&nbsp;<span class="ident" id="4756829">d</span><span class="op" id="4756830">,</span>&nbsp;<span class="ident" id="4756832">tu</span><span class="op" id="4756834">:</span>&nbsp;<span class="ident" id="4756836">tu</span><span class="op" id="4756838">,</span>&nbsp;<span class="ident" id="4756840">b</span><span class="op" id="4756841">:</span>&nbsp;<span class="ident" id="4756843">b</span><span class="op" id="4756844">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756847">t</span><span class="op" id="4756848">,</span>&nbsp;<span class="ident" id="4756850">err</span>&nbsp;<span class="op" id="4756854">:=</span>&nbsp;<span class="ident" id="4756857">d</span><span class="op" id="4756858">.</span><span class="ident" id="4756859">readType</span><span class="op" id="4756867">(</span><span class="ident" id="4756868">tu</span><span class="op" id="4756870">.</span><span class="ident" id="4756871">name</span><span class="op" id="4756875">,</span>&nbsp;<span class="ident" id="4756877">r</span><span class="op" id="4756878">,</span>&nbsp;<span class="ident" id="4756880">Offset</span><span class="op" id="4756886">(</span><span class="ident" id="4756887">tu</span><span class="op" id="4756889">.</span><span class="ident" id="4756890">toff</span><span class="op" id="4756894">)</span><span class="op" id="4756895">,</span>&nbsp;<span class="builtinfunc" id="4756897">make</span><span class="op" id="4756901">(</span><span class="keyword" id="4756902">map</span><span class="op" id="4756905">[</span><span class="ident" id="4756906">Offset</span><span class="op" id="4756912">]</span><span class="ident" id="4756913">Type</span><span class="op" id="4756917">)</span><span class="op" id="4756918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756921">if</span>&nbsp;<span class="ident" id="4756924">err</span>&nbsp;<span class="op" id="4756928">!=</span>&nbsp;<span class="builtintype" id="4756931">nil</span>&nbsp;<span class="op" id="4756935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756939">return</span>&nbsp;<span class="builtintype" id="4756946">nil</span><span class="op" id="4756949">,</span>&nbsp;<span class="ident" id="4756951">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4756956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4756960">tu</span><span class="op" id="4756962">.</span><span class="ident" id="4756963">cache</span>&nbsp;<span class="op" id="4756969">=</span>&nbsp;<span class="ident" id="4756971">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4756974">return</span>&nbsp;<span class="ident" id="4756981">t</span><span class="op" id="4756982">,</span>&nbsp;<span class="builtintype" id="4756984">nil</span><br>
<span class="lineno"></span><span class="op" id="4756988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4756991">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="4757044">type</span>&nbsp;<span class="ident" id="4757049">typeUnitReader</span>&nbsp;<span class="keyword" id="4757064">struct</span>&nbsp;<span class="op" id="4757071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757074">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4757078">*</span><span class="ident" id="4757079">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757085">tu</span>&nbsp;&nbsp;<span class="op" id="4757089">*</span><span class="ident" id="4757090">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757100">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4757104">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757109">err</span>&nbsp;<span class="builtintype" id="4757113">error</span><br>
<span class="lineno">125</span><span class="op" id="4757119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4757122">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="4757166">func</span>&nbsp;<span class="op" id="4757171">(</span><span class="ident" id="4757172">tur</span>&nbsp;<span class="op" id="4757176">*</span><span class="ident" id="4757177">typeUnitReader</span><span class="op" id="4757191">)</span>&nbsp;<span class="ident" id="4757193">Seek</span><span class="op" id="4757197">(</span><span class="ident" id="4757198">off</span>&nbsp;<span class="ident" id="4757202">Offset</span><span class="op" id="4757208">)</span>&nbsp;<span class="op" id="4757210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757213">tur</span><span class="op" id="4757216">.</span><span class="ident" id="4757217">err</span>&nbsp;<span class="op" id="4757221">=</span>&nbsp;<span class="builtintype" id="4757223">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757228">doff</span>&nbsp;<span class="op" id="4757233">:=</span>&nbsp;<span class="ident" id="4757236">off</span>&nbsp;<span class="op" id="4757240">-</span>&nbsp;<span class="ident" id="4757242">tur</span><span class="op" id="4757245">.</span><span class="ident" id="4757246">tu</span><span class="op" id="4757248">.</span><span class="ident" id="4757249">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4757254">if</span>&nbsp;<span class="ident" id="4757257">doff</span>&nbsp;<span class="op" id="4757262">&lt;</span>&nbsp;<span class="num" id="4757264">0</span>&nbsp;<span class="op" id="4757266">||</span>&nbsp;<span class="ident" id="4757269">doff</span>&nbsp;<span class="op" id="4757274">&gt;=</span>&nbsp;<span class="ident" id="4757277">Offset</span><span class="op" id="4757283">(</span><span class="builtinfunc" id="4757284">len</span><span class="op" id="4757287">(</span><span class="ident" id="4757288">tur</span><span class="op" id="4757291">.</span><span class="ident" id="4757292">tu</span><span class="op" id="4757294">.</span><span class="ident" id="4757295">data</span><span class="op" id="4757299">)</span><span class="op" id="4757300">)</span>&nbsp;<span class="op" id="4757302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757306">tur</span><span class="op" id="4757309">.</span><span class="ident" id="4757310">err</span>&nbsp;<span class="op" id="4757314">=</span>&nbsp;<span class="ident" id="4757316">fmt</span><span class="op" id="4757319">.</span><span class="ident" id="4757320">Errorf</span><span class="op" id="4757326">(</span><span class="string" id="4757327">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="4757363">,</span>&nbsp;<span class="ident" id="4757365">tur</span><span class="op" id="4757368">.</span><span class="ident" id="4757369">tu</span><span class="op" id="4757371">.</span><span class="ident" id="4757372">name</span><span class="op" id="4757376">,</span>&nbsp;<span class="ident" id="4757378">doff</span><span class="op" id="4757382">,</span>&nbsp;<span class="builtinfunc" id="4757384">len</span><span class="op" id="4757387">(</span><span class="ident" id="4757388">tur</span><span class="op" id="4757391">.</span><span class="ident" id="4757392">tu</span><span class="op" id="4757394">.</span><span class="ident" id="4757395">data</span><span class="op" id="4757399">)</span><span class="op" id="4757400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4757404">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4757412">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757415">tur</span><span class="op" id="4757418">.</span><span class="ident" id="4757419">b</span>&nbsp;<span class="op" id="4757421">=</span>&nbsp;<span class="ident" id="4757423">makeBuf</span><span class="op" id="4757430">(</span><span class="ident" id="4757431">tur</span><span class="op" id="4757434">.</span><span class="ident" id="4757435">d</span><span class="op" id="4757436">,</span>&nbsp;<span class="ident" id="4757438">tur</span><span class="op" id="4757441">.</span><span class="ident" id="4757442">tu</span><span class="op" id="4757444">,</span>&nbsp;<span class="ident" id="4757446">tur</span><span class="op" id="4757449">.</span><span class="ident" id="4757450">tu</span><span class="op" id="4757452">.</span><span class="ident" id="4757453">name</span><span class="op" id="4757457">,</span>&nbsp;<span class="ident" id="4757459">off</span><span class="op" id="4757462">,</span>&nbsp;<span class="ident" id="4757464">tur</span><span class="op" id="4757467">.</span><span class="ident" id="4757468">tu</span><span class="op" id="4757470">.</span><span class="ident" id="4757471">data</span><span class="op" id="4757475">[</span><span class="ident" id="4757476">doff</span><span class="op" id="4757480">:</span><span class="op" id="4757481">]</span><span class="op" id="4757482">)</span><br>
<span class="lineno"></span><span class="op" id="4757484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4757487">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="4757536">func</span>&nbsp;<span class="op" id="4757541">(</span><span class="ident" id="4757542">tur</span>&nbsp;<span class="op" id="4757546">*</span><span class="ident" id="4757547">typeUnitReader</span><span class="op" id="4757561">)</span>&nbsp;<span class="ident" id="4757563">Next</span><span class="op" id="4757567">(</span><span class="op" id="4757568">)</span>&nbsp;<span class="op" id="4757570">(</span><span class="op" id="4757571">*</span><span class="ident" id="4757572">Entry</span><span class="op" id="4757577">,</span>&nbsp;<span class="builtintype" id="4757579">error</span><span class="op" id="4757584">)</span>&nbsp;<span class="op" id="4757586">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4757589">if</span>&nbsp;<span class="ident" id="4757592">tur</span><span class="op" id="4757595">.</span><span class="ident" id="4757596">err</span>&nbsp;<span class="op" id="4757600">!=</span>&nbsp;<span class="builtintype" id="4757603">nil</span>&nbsp;<span class="op" id="4757607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4757611">return</span>&nbsp;<span class="builtintype" id="4757618">nil</span><span class="op" id="4757621">,</span>&nbsp;<span class="ident" id="4757623">tur</span><span class="op" id="4757626">.</span><span class="ident" id="4757627">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4757632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4757635">if</span>&nbsp;<span class="builtinfunc" id="4757638">len</span><span class="op" id="4757641">(</span><span class="ident" id="4757642">tur</span><span class="op" id="4757645">.</span><span class="ident" id="4757646">tu</span><span class="op" id="4757648">.</span><span class="ident" id="4757649">data</span><span class="op" id="4757653">)</span>&nbsp;<span class="op" id="4757655">==</span>&nbsp;<span class="num" id="4757658">0</span>&nbsp;<span class="op" id="4757660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4757664">return</span>&nbsp;<span class="builtintype" id="4757671">nil</span><span class="op" id="4757674">,</span>&nbsp;<span class="builtintype" id="4757676">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4757681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757684">e</span>&nbsp;<span class="op" id="4757686">:=</span>&nbsp;<span class="ident" id="4757689">tur</span><span class="op" id="4757692">.</span><span class="ident" id="4757693">b</span><span class="op" id="4757694">.</span><span class="ident" id="4757695">entry</span><span class="op" id="4757700">(</span><span class="ident" id="4757701">tur</span><span class="op" id="4757704">.</span><span class="ident" id="4757705">tu</span><span class="op" id="4757707">.</span><span class="ident" id="4757708">atable</span><span class="op" id="4757714">,</span>&nbsp;<span class="ident" id="4757716">tur</span><span class="op" id="4757719">.</span><span class="ident" id="4757720">tu</span><span class="op" id="4757722">.</span><span class="ident" id="4757723">base</span><span class="op" id="4757727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4757730">if</span>&nbsp;<span class="ident" id="4757733">tur</span><span class="op" id="4757736">.</span><span class="ident" id="4757737">b</span><span class="op" id="4757738">.</span><span class="ident" id="4757739">err</span>&nbsp;<span class="op" id="4757743">!=</span>&nbsp;<span class="builtintype" id="4757746">nil</span>&nbsp;<span class="op" id="4757750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757754">tur</span><span class="op" id="4757757">.</span><span class="ident" id="4757758">err</span>&nbsp;<span class="op" id="4757762">=</span>&nbsp;<span class="ident" id="4757764">tur</span><span class="op" id="4757767">.</span><span class="ident" id="4757768">b</span><span class="op" id="4757769">.</span><span class="ident" id="4757770">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4757776">return</span>&nbsp;<span class="builtintype" id="4757783">nil</span><span class="op" id="4757786">,</span>&nbsp;<span class="ident" id="4757788">tur</span><span class="op" id="4757791">.</span><span class="ident" id="4757792">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4757797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4757800">return</span>&nbsp;<span class="ident" id="4757807">e</span><span class="op" id="4757808">,</span>&nbsp;<span class="builtintype" id="4757810">nil</span><br>
<span class="lineno"></span><span class="op" id="4757814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4757817">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="4757866">func</span>&nbsp;<span class="op" id="4757871">(</span><span class="ident" id="4757872">tur</span>&nbsp;<span class="op" id="4757876">*</span><span class="ident" id="4757877">typeUnitReader</span><span class="op" id="4757891">)</span>&nbsp;<span class="ident" id="4757893">clone</span><span class="op" id="4757898">(</span><span class="op" id="4757899">)</span>&nbsp;<span class="ident" id="4757901">typeReader</span>&nbsp;<span class="op" id="4757912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4757915">return</span>&nbsp;<span class="op" id="4757922">&amp;</span><span class="ident" id="4757923">typeUnitReader</span><span class="op" id="4757937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757941">d</span><span class="op" id="4757942">:</span>&nbsp;&nbsp;<span class="ident" id="4757945">tur</span><span class="op" id="4757948">.</span><span class="ident" id="4757949">d</span><span class="op" id="4757950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757954">tu</span><span class="op" id="4757956">:</span>&nbsp;<span class="ident" id="4757958">tur</span><span class="op" id="4757961">.</span><span class="ident" id="4757962">tu</span><span class="op" id="4757964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4757968">b</span><span class="op" id="4757969">:</span>&nbsp;&nbsp;<span class="ident" id="4757972">makeBuf</span><span class="op" id="4757979">(</span><span class="ident" id="4757980">tur</span><span class="op" id="4757983">.</span><span class="ident" id="4757984">d</span><span class="op" id="4757985">,</span>&nbsp;<span class="ident" id="4757987">tur</span><span class="op" id="4757990">.</span><span class="ident" id="4757991">tu</span><span class="op" id="4757993">,</span>&nbsp;<span class="ident" id="4757995">tur</span><span class="op" id="4757998">.</span><span class="ident" id="4757999">tu</span><span class="op" id="4758001">.</span><span class="ident" id="4758002">name</span><span class="op" id="4758006">,</span>&nbsp;<span class="ident" id="4758008">tur</span><span class="op" id="4758011">.</span><span class="ident" id="4758012">tu</span><span class="op" id="4758014">.</span><span class="ident" id="4758015">off</span><span class="op" id="4758018">,</span>&nbsp;<span class="ident" id="4758020">tur</span><span class="op" id="4758023">.</span><span class="ident" id="4758024">tu</span><span class="op" id="4758026">.</span><span class="ident" id="4758027">data</span><span class="op" id="4758031">)</span><span class="op" id="4758032">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4758035">}</span><br>
<span class="lineno"></span><span class="op" id="4758037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4758040">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="4758078">func</span>&nbsp;<span class="op" id="4758083">(</span><span class="ident" id="4758084">tur</span>&nbsp;<span class="op" id="4758088">*</span><span class="ident" id="4758089">typeUnitReader</span><span class="op" id="4758103">)</span>&nbsp;<span class="ident" id="4758105">offset</span><span class="op" id="4758111">(</span><span class="op" id="4758112">)</span>&nbsp;<span class="ident" id="4758114">Offset</span>&nbsp;<span class="op" id="4758121">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4758124">return</span>&nbsp;<span class="ident" id="4758131">tur</span><span class="op" id="4758134">.</span><span class="ident" id="4758135">b</span><span class="op" id="4758136">.</span><span class="ident" id="4758137">off</span><br>
<span class="lineno"></span><span class="op" id="4758141">}</span>
</div>
</body>
</html>
