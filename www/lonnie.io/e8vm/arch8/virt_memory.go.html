<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5317007">package</span>&nbsp;<span class="ident" id="5317015">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5317022">//&nbsp;VirtMemory&nbsp;defines&nbsp;an&nbsp;address&nbsp;space&nbsp;which&nbsp;page&nbsp;mapping</span><br>
<span class="lineno"></span><span class="comment" id="5317080">//&nbsp;is&nbsp;defined&nbsp;by&nbsp;a&nbsp;page&nbsp;table.</span><br>
<span class="lineno">5</span><span class="comment" id="5317111">//&nbsp;If&nbsp;no&nbsp;page&nbsp;table&nbsp;is&nbsp;defined,&nbsp;direct&nbsp;mapping&nbsp;is&nbsp;used</span><br>
<span class="lineno"></span><span class="keyword" id="5317166">type</span>&nbsp;<span class="ident" id="5317171">virtMemory</span>&nbsp;<span class="keyword" id="5317182">struct</span>&nbsp;<span class="op" id="5317189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5317192">phyMem</span>&nbsp;<span class="op" id="5317199">*</span><span class="ident" id="5317200"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5317211">ptable</span>&nbsp;<span class="op" id="5317218">*</span><span class="ident" id="5317219"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5306139">pageTable</a></span><br>
<span class="lineno"></span><span class="op" id="5317229">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="5317232">//&nbsp;NewVirtMemory&nbsp;creates&nbsp;a&nbsp;new&nbsp;virtual&nbsp;address&nbsp;space&nbsp;with&nbsp;no&nbsp;page&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5317305">func</span>&nbsp;<span class="ident" id="5317310">newVirtMemory</span><span class="op" id="5317323">(</span><span class="ident" id="5317324">phy</span>&nbsp;<span class="op" id="5317328">*</span><span class="ident" id="5317329"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><span class="op" id="5317338">)</span>&nbsp;<span class="op" id="5317340">*</span><span class="ident" id="5317341"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317171">virtMemory</a></span>&nbsp;<span class="op" id="5317352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5317355">ret</span>&nbsp;<span class="op" id="5317359">:=</span>&nbsp;<span class="builtinfunc" id="5317362">new</span><span class="op" id="5317365">(</span><span class="ident" id="5317366"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317171">virtMemory</a></span><span class="op" id="5317376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5317379"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317355">ret</a></span><span class="op" id="5317382">.</span><span class="ident" id="5317383">phyMem</span>&nbsp;<span class="op" id="5317390">=</span>&nbsp;<span class="ident" id="5317392"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317324">phy</a></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5317397">return</span>&nbsp;<span class="ident" id="5317404"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317355">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5317408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5317411">//&nbsp;SetTable&nbsp;applies&nbsp;a&nbsp;particular&nbsp;pagetable&nbsp;at&nbsp;a&nbsp;physical&nbsp;memory&nbsp;position.</span><br>
<span class="lineno"></span><span class="comment" id="5317485">//&nbsp;If&nbsp;the&nbsp;address&nbsp;is&nbsp;not&nbsp;page&nbsp;size&nbsp;aligned,&nbsp;it&nbsp;will&nbsp;be&nbsp;aligned&nbsp;down.</span><br>
<span class="lineno">20</span><span class="comment" id="5317554">//&nbsp;If&nbsp;the&nbsp;address&nbsp;is&nbsp;0,&nbsp;it&nbsp;will&nbsp;use&nbsp;direct&nbsp;mapping.</span><br>
<span class="lineno"></span><span class="keyword" id="5317606">func</span>&nbsp;<span class="op" id="5317611">(</span><span class="ident" id="5317612">vm</span>&nbsp;<span class="op" id="5317615">*</span><span class="ident" id="5317616"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317171">virtMemory</a></span><span class="op" id="5317626">)</span>&nbsp;<span class="ident" id="5317628">SetTable</span><span class="op" id="5317636">(</span><span class="ident" id="5317637">root</span>&nbsp;<span class="builtintype" id="5317642">uint32</span><span class="op" id="5317648">)</span>&nbsp;<span class="op" id="5317650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5317653">if</span>&nbsp;<span class="ident" id="5317656"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317637">root</a></span>&nbsp;<span class="op" id="5317661">==</span>&nbsp;<span class="num" id="5317664">0</span>&nbsp;<span class="op" id="5317666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5317670"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317612">vm</a></span><span class="op" id="5317672">.</span><span class="ident" id="5317673">ptable</span>&nbsp;<span class="op" id="5317680">=</span>&nbsp;<span class="ident" id="5317682">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5317687">}</span>&nbsp;<span class="keyword" id="5317689">else</span>&nbsp;<span class="op" id="5317694">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5317698"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317612">vm</a></span><span class="op" id="5317700">.</span><span class="ident" id="5317701">ptable</span>&nbsp;<span class="op" id="5317708">=</span>&nbsp;<span class="ident" id="5317710"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5306474">newPageTable</a></span><span class="op" id="5317722">(</span><span class="ident" id="5317723"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317612">vm</a></span><span class="op" id="5317725">.</span><span class="ident" id="5317726">phyMem</span><span class="op" id="5317732">,</span>&nbsp;<span class="ident" id="5317734"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317637">root</a></span><span class="op" id="5317738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5317741">}</span><br>
<span class="lineno"></span><span class="op" id="5317743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5317746">func</span>&nbsp;<span class="op" id="5317751">(</span><span class="ident" id="5317752">vm</span>&nbsp;<span class="op" id="5317755">*</span><span class="ident" id="5317756"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317171">virtMemory</a></span><span class="op" id="5317766">)</span>&nbsp;<span class="ident" id="5317768">transRead</span><span class="op" id="5317777">(</span><span class="ident" id="5317778">addr</span>&nbsp;<span class="builtintype" id="5317783">uint32</span><span class="op" id="5317789">,</span>&nbsp;<span class="ident" id="5317791">ring</span>&nbsp;<span class="builtintype" id="5317796">byte</span><span class="op" id="5317800">)</span>&nbsp;<span class="op" id="5317802">(</span><span class="builtintype" id="5317803">uint32</span><span class="op" id="5317809">,</span>&nbsp;<span class="op" id="5317811">*</span><span class="ident" id="5317812"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span><span class="op" id="5317817">)</span>&nbsp;<span class="op" id="5317819">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5317822">if</span>&nbsp;<span class="ident" id="5317825"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317752">vm</a></span><span class="op" id="5317827">.</span><span class="ident" id="5317828">ptable</span>&nbsp;<span class="op" id="5317835">==</span>&nbsp;<span class="ident" id="5317838">nil</span>&nbsp;<span class="op" id="5317842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5317846">return</span>&nbsp;<span class="ident" id="5317853"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317778">addr</a></span><span class="op" id="5317857">,</span>&nbsp;<span class="ident" id="5317859">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5317864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5317867">return</span>&nbsp;<span class="ident" id="5317874"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317752">vm</a></span><span class="op" id="5317876">.</span><span class="ident" id="5317877">ptable</span><span class="op" id="5317883">.</span><span class="ident" id="5317884">TranslateRead</span><span class="op" id="5317897">(</span><span class="ident" id="5317898"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317778">addr</a></span><span class="op" id="5317902">,</span>&nbsp;<span class="ident" id="5317904"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317791">ring</a></span><span class="op" id="5317908">)</span><br>
<span class="lineno"></span><span class="op" id="5317910">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="5317913">func</span>&nbsp;<span class="op" id="5317918">(</span><span class="ident" id="5317919">vm</span>&nbsp;<span class="op" id="5317922">*</span><span class="ident" id="5317923"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317171">virtMemory</a></span><span class="op" id="5317933">)</span>&nbsp;<span class="ident" id="5317935">transWrite</span><span class="op" id="5317945">(</span><span class="ident" id="5317946">addr</span>&nbsp;<span class="builtintype" id="5317951">uint32</span><span class="op" id="5317957">,</span>&nbsp;<span class="ident" id="5317959">ring</span>&nbsp;<span class="builtintype" id="5317964">byte</span><span class="op" id="5317968">)</span>&nbsp;<span class="op" id="5317970">(</span><span class="builtintype" id="5317971">uint32</span><span class="op" id="5317977">,</span>&nbsp;<span class="op" id="5317979">*</span><span class="ident" id="5317980"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span><span class="op" id="5317985">)</span>&nbsp;<span class="op" id="5317987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5317990">if</span>&nbsp;<span class="ident" id="5317993"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317919">vm</a></span><span class="op" id="5317995">.</span><span class="ident" id="5317996">ptable</span>&nbsp;<span class="op" id="5318003">==</span>&nbsp;<span class="ident" id="5318006">nil</span>&nbsp;<span class="op" id="5318010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318014">return</span>&nbsp;<span class="ident" id="5318021"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317946">addr</a></span><span class="op" id="5318025">,</span>&nbsp;<span class="ident" id="5318027">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5318032">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318035">return</span>&nbsp;<span class="ident" id="5318042"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317919">vm</a></span><span class="op" id="5318044">.</span><span class="ident" id="5318045">ptable</span><span class="op" id="5318051">.</span><span class="ident" id="5318052">TranslateWrite</span><span class="op" id="5318066">(</span><span class="ident" id="5318067"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317946">addr</a></span><span class="op" id="5318071">,</span>&nbsp;<span class="ident" id="5318073"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317959">ring</a></span><span class="op" id="5318077">)</span><br>
<span class="lineno"></span><span class="op" id="5318079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5318082">//&nbsp;ReadWord&nbsp;reads&nbsp;the&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;virtual&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="5318139">func</span>&nbsp;<span class="op" id="5318144">(</span><span class="ident" id="5318145">vm</span>&nbsp;<span class="op" id="5318148">*</span><span class="ident" id="5318149"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317171">virtMemory</a></span><span class="op" id="5318159">)</span>&nbsp;<span class="ident" id="5318161">ReadWord</span><span class="op" id="5318169">(</span><span class="ident" id="5318170">addr</span>&nbsp;<span class="builtintype" id="5318175">uint32</span><span class="op" id="5318181">,</span>&nbsp;<span class="ident" id="5318183">ring</span>&nbsp;<span class="builtintype" id="5318188">byte</span><span class="op" id="5318192">)</span>&nbsp;<span class="op" id="5318194">(</span><span class="builtintype" id="5318195">uint32</span><span class="op" id="5318201">,</span>&nbsp;<span class="op" id="5318203">*</span><span class="ident" id="5318204"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span><span class="op" id="5318209">)</span>&nbsp;<span class="op" id="5318211">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318214"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318170">addr</a></span><span class="op" id="5318218">,</span>&nbsp;<span class="ident" id="5318220">e</span>&nbsp;<span class="op" id="5318222">:=</span>&nbsp;<span class="ident" id="5318225"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318145">vm</a></span><span class="op" id="5318227">.</span><span class="ident" id="5318228">transRead</span><span class="op" id="5318237">(</span><span class="ident" id="5318238"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318170">addr</a></span><span class="op" id="5318242">,</span>&nbsp;<span class="ident" id="5318244"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318183">ring</a></span><span class="op" id="5318248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318251">if</span>&nbsp;<span class="ident" id="5318254"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318220">e</a></span>&nbsp;<span class="op" id="5318256">!=</span>&nbsp;<span class="ident" id="5318259">nil</span>&nbsp;<span class="op" id="5318263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318267">return</span>&nbsp;<span class="num" id="5318274">0</span><span class="op" id="5318275">,</span>&nbsp;<span class="ident" id="5318277"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318220">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5318280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318283">return</span>&nbsp;<span class="ident" id="5318290"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318145">vm</a></span><span class="op" id="5318292">.</span><span class="ident" id="5318293">phyMem</span><span class="op" id="5318299">.</span><span class="ident" id="5318300">ReadWord</span><span class="op" id="5318308">(</span><span class="ident" id="5318309"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318170">addr</a></span><span class="op" id="5318313">)</span><br>
<span class="lineno">50</span><span class="op" id="5318315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5318318">//&nbsp;WriteWord&nbsp;writes&nbsp;the&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;virtual&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="5318377">func</span>&nbsp;<span class="op" id="5318382">(</span><span class="ident" id="5318383">vm</span>&nbsp;<span class="op" id="5318386">*</span><span class="ident" id="5318387"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317171">virtMemory</a></span><span class="op" id="5318397">)</span>&nbsp;<span class="ident" id="5318399">WriteWord</span><span class="op" id="5318408">(</span><span class="ident" id="5318409">addr</span>&nbsp;<span class="builtintype" id="5318414">uint32</span><span class="op" id="5318420">,</span>&nbsp;<span class="ident" id="5318422">ring</span>&nbsp;<span class="builtintype" id="5318427">byte</span><span class="op" id="5318431">,</span>&nbsp;<span class="ident" id="5318433">v</span>&nbsp;<span class="builtintype" id="5318435">uint32</span><span class="op" id="5318441">)</span>&nbsp;<span class="op" id="5318443">*</span><span class="ident" id="5318444"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span>&nbsp;<span class="op" id="5318450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318453"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318409">addr</a></span><span class="op" id="5318457">,</span>&nbsp;<span class="ident" id="5318459">e</span>&nbsp;<span class="op" id="5318461">:=</span>&nbsp;<span class="ident" id="5318464"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318383">vm</a></span><span class="op" id="5318466">.</span><span class="ident" id="5318467">transWrite</span><span class="op" id="5318477">(</span><span class="ident" id="5318478"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318409">addr</a></span><span class="op" id="5318482">,</span>&nbsp;<span class="ident" id="5318484"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318422">ring</a></span><span class="op" id="5318488">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318491">if</span>&nbsp;<span class="ident" id="5318494"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318459">e</a></span>&nbsp;<span class="op" id="5318496">!=</span>&nbsp;<span class="ident" id="5318499">nil</span>&nbsp;<span class="op" id="5318503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318507">return</span>&nbsp;<span class="ident" id="5318514"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318459">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5318517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318520">return</span>&nbsp;<span class="ident" id="5318527"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318383">vm</a></span><span class="op" id="5318529">.</span><span class="ident" id="5318530">phyMem</span><span class="op" id="5318536">.</span><span class="ident" id="5318537">WriteWord</span><span class="op" id="5318546">(</span><span class="ident" id="5318547"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318409">addr</a></span><span class="op" id="5318551">,</span>&nbsp;<span class="ident" id="5318553"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318433">v</a></span><span class="op" id="5318554">)</span><br>
<span class="lineno"></span><span class="op" id="5318556">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="5318559">//&nbsp;ReadByte&nbsp;reads&nbsp;the&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;virtual&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="5318616">func</span>&nbsp;<span class="op" id="5318621">(</span><span class="ident" id="5318622">vm</span>&nbsp;<span class="op" id="5318625">*</span><span class="ident" id="5318626"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317171">virtMemory</a></span><span class="op" id="5318636">)</span>&nbsp;<span class="ident" id="5318638">ReadByte</span><span class="op" id="5318646">(</span><span class="ident" id="5318647">addr</span>&nbsp;<span class="builtintype" id="5318652">uint32</span><span class="op" id="5318658">,</span>&nbsp;<span class="ident" id="5318660">ring</span>&nbsp;<span class="builtintype" id="5318665">byte</span><span class="op" id="5318669">)</span>&nbsp;<span class="op" id="5318671">(</span><span class="builtintype" id="5318672">byte</span><span class="op" id="5318676">,</span>&nbsp;<span class="op" id="5318678">*</span><span class="ident" id="5318679"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span><span class="op" id="5318684">)</span>&nbsp;<span class="op" id="5318686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318689"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318647">addr</a></span><span class="op" id="5318693">,</span>&nbsp;<span class="ident" id="5318695">e</span>&nbsp;<span class="op" id="5318697">:=</span>&nbsp;<span class="ident" id="5318700"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318622">vm</a></span><span class="op" id="5318702">.</span><span class="ident" id="5318703">transRead</span><span class="op" id="5318712">(</span><span class="ident" id="5318713"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318647">addr</a></span><span class="op" id="5318717">,</span>&nbsp;<span class="ident" id="5318719"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318660">ring</a></span><span class="op" id="5318723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318726">if</span>&nbsp;<span class="ident" id="5318729"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318695">e</a></span>&nbsp;<span class="op" id="5318731">!=</span>&nbsp;<span class="ident" id="5318734">nil</span>&nbsp;<span class="op" id="5318738">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318742">return</span>&nbsp;<span class="num" id="5318749">0</span><span class="op" id="5318750">,</span>&nbsp;<span class="ident" id="5318752"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318695">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5318755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318758">return</span>&nbsp;<span class="ident" id="5318765"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318622">vm</a></span><span class="op" id="5318767">.</span><span class="ident" id="5318768">phyMem</span><span class="op" id="5318774">.</span><span class="ident" id="5318775">ReadByte</span><span class="op" id="5318783">(</span><span class="ident" id="5318784"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318647">addr</a></span><span class="op" id="5318788">)</span><br>
<span class="lineno"></span><span class="op" id="5318790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="comment" id="5318793">//&nbsp;WriteByte&nbsp;writes&nbsp;a&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;virtual&nbsp;address&nbsp;under</span><br>
<span class="lineno"></span><span class="comment" id="5318855">//&nbsp;a&nbsp;certain&nbsp;ring.</span><br>
<span class="lineno"></span><span class="keyword" id="5318874">func</span>&nbsp;<span class="op" id="5318879">(</span><span class="ident" id="5318880">vm</span>&nbsp;<span class="op" id="5318883">*</span><span class="ident" id="5318884"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317171">virtMemory</a></span><span class="op" id="5318894">)</span>&nbsp;<span class="ident" id="5318896">WriteByte</span><span class="op" id="5318905">(</span><span class="ident" id="5318906">addr</span>&nbsp;<span class="builtintype" id="5318911">uint32</span><span class="op" id="5318917">,</span>&nbsp;<span class="ident" id="5318919">ring</span>&nbsp;<span class="builtintype" id="5318924">byte</span><span class="op" id="5318928">,</span>&nbsp;<span class="ident" id="5318930">v</span>&nbsp;<span class="builtintype" id="5318932">byte</span><span class="op" id="5318936">)</span>&nbsp;<span class="op" id="5318938">*</span><span class="ident" id="5318939"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span>&nbsp;<span class="op" id="5318945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5318948"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318906">addr</a></span><span class="op" id="5318952">,</span>&nbsp;<span class="ident" id="5318954">e</span>&nbsp;<span class="op" id="5318956">:=</span>&nbsp;<span class="ident" id="5318959"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318880">vm</a></span><span class="op" id="5318961">.</span><span class="ident" id="5318962">transWrite</span><span class="op" id="5318972">(</span><span class="ident" id="5318973"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318906">addr</a></span><span class="op" id="5318977">,</span>&nbsp;<span class="ident" id="5318979"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318919">ring</a></span><span class="op" id="5318983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5318986">if</span>&nbsp;<span class="ident" id="5318989"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318954">e</a></span>&nbsp;<span class="op" id="5318991">!=</span>&nbsp;<span class="ident" id="5318994">nil</span>&nbsp;<span class="op" id="5318998">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319002">return</span>&nbsp;<span class="ident" id="5319009"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318954">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5319012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5319015">return</span>&nbsp;<span class="ident" id="5319022"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318880">vm</a></span><span class="op" id="5319024">.</span><span class="ident" id="5319025">phyMem</span><span class="op" id="5319031">.</span><span class="ident" id="5319032">WriteByte</span><span class="op" id="5319041">(</span><span class="ident" id="5319042"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318906">addr</a></span><span class="op" id="5319046">,</span>&nbsp;<span class="ident" id="5319048"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5318930">v</a></span><span class="op" id="5319049">)</span><br>
<span class="lineno"></span><span class="op" id="5319051">}</span>
</div>
</body>
</html>
