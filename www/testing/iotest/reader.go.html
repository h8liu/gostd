<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6271057">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6271112">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6271166">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6271217">//&nbsp;Package&nbsp;iotest&nbsp;implements&nbsp;Readers&nbsp;and&nbsp;Writers&nbsp;useful&nbsp;mainly&nbsp;for&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="6271293">package</span>&nbsp;<span class="ident" id="6271301">iotest</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6271309">import</span>&nbsp;<span class="op" id="6271316">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6271319">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6271329">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6271334">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6271337">//&nbsp;OneByteReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&nbsp;implements</span><br>
<span class="lineno"></span><span class="comment" id="6271387">//&nbsp;each&nbsp;non-empty&nbsp;Read&nbsp;by&nbsp;reading&nbsp;one&nbsp;byte&nbsp;from&nbsp;r.</span><br>
<span class="lineno">15</span><span class="keyword" id="6271438">func</span>&nbsp;<span class="ident" id="6271443">OneByteReader</span><span class="op" id="6271456">(</span><span class="ident" id="6271457">r</span>&nbsp;<span class="ident" id="6271459">io</span><span class="op" id="6271461">.</span><span class="ident" id="6271462">Reader</span><span class="op" id="6271468">)</span>&nbsp;<span class="ident" id="6271470">io</span><span class="op" id="6271472">.</span><span class="ident" id="6271473">Reader</span>&nbsp;<span class="op" id="6271480">{</span>&nbsp;<span class="keyword" id="6271482">return</span>&nbsp;<span class="op" id="6271489">&amp;</span><span class="ident" id="6271490">oneByteReader</span><span class="op" id="6271503">{</span><span class="ident" id="6271504">r</span><span class="op" id="6271505">}</span>&nbsp;<span class="op" id="6271507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6271510">type</span>&nbsp;<span class="ident" id="6271515">oneByteReader</span>&nbsp;<span class="keyword" id="6271529">struct</span>&nbsp;<span class="op" id="6271536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271539">r</span>&nbsp;<span class="ident" id="6271541">io</span><span class="op" id="6271543">.</span><span class="ident" id="6271544">Reader</span><br>
<span class="lineno"></span><span class="op" id="6271551">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6271554">func</span>&nbsp;<span class="op" id="6271559">(</span><span class="ident" id="6271560">r</span>&nbsp;<span class="op" id="6271562">*</span><span class="ident" id="6271563">oneByteReader</span><span class="op" id="6271576">)</span>&nbsp;<span class="ident" id="6271578">Read</span><span class="op" id="6271582">(</span><span class="ident" id="6271583">p</span>&nbsp;<span class="op" id="6271585">[</span><span class="op" id="6271586">]</span><span class="builtintype" id="6271587">byte</span><span class="op" id="6271591">)</span>&nbsp;<span class="op" id="6271593">(</span><span class="builtintype" id="6271594">int</span><span class="op" id="6271597">,</span>&nbsp;<span class="builtintype" id="6271599">error</span><span class="op" id="6271604">)</span>&nbsp;<span class="op" id="6271606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271609">if</span>&nbsp;<span class="builtinfunc" id="6271612">len</span><span class="op" id="6271615">(</span><span class="ident" id="6271616">p</span><span class="op" id="6271617">)</span>&nbsp;<span class="op" id="6271619">==</span>&nbsp;<span class="num" id="6271622">0</span>&nbsp;<span class="op" id="6271624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271628">return</span>&nbsp;<span class="num" id="6271635">0</span><span class="op" id="6271636">,</span>&nbsp;<span class="ident" id="6271638">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271643">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271646">return</span>&nbsp;<span class="ident" id="6271653">r</span><span class="op" id="6271654">.</span><span class="ident" id="6271655">r</span><span class="op" id="6271656">.</span><span class="ident" id="6271657">Read</span><span class="op" id="6271661">(</span><span class="ident" id="6271662">p</span><span class="op" id="6271663">[</span><span class="num" id="6271664">0</span><span class="op" id="6271665">:</span><span class="num" id="6271666">1</span><span class="op" id="6271667">]</span><span class="op" id="6271668">)</span><br>
<span class="lineno"></span><span class="op" id="6271670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6271673">//&nbsp;HalfReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&nbsp;implements&nbsp;Read</span><br>
<span class="lineno"></span><span class="comment" id="6271725">//&nbsp;by&nbsp;reading&nbsp;half&nbsp;as&nbsp;many&nbsp;requested&nbsp;bytes&nbsp;from&nbsp;r.</span><br>
<span class="lineno">30</span><span class="keyword" id="6271776">func</span>&nbsp;<span class="ident" id="6271781">HalfReader</span><span class="op" id="6271791">(</span><span class="ident" id="6271792">r</span>&nbsp;<span class="ident" id="6271794">io</span><span class="op" id="6271796">.</span><span class="ident" id="6271797">Reader</span><span class="op" id="6271803">)</span>&nbsp;<span class="ident" id="6271805">io</span><span class="op" id="6271807">.</span><span class="ident" id="6271808">Reader</span>&nbsp;<span class="op" id="6271815">{</span>&nbsp;<span class="keyword" id="6271817">return</span>&nbsp;<span class="op" id="6271824">&amp;</span><span class="ident" id="6271825">halfReader</span><span class="op" id="6271835">{</span><span class="ident" id="6271836">r</span><span class="op" id="6271837">}</span>&nbsp;<span class="op" id="6271839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6271842">type</span>&nbsp;<span class="ident" id="6271847">halfReader</span>&nbsp;<span class="keyword" id="6271858">struct</span>&nbsp;<span class="op" id="6271865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271868">r</span>&nbsp;<span class="ident" id="6271870">io</span><span class="op" id="6271872">.</span><span class="ident" id="6271873">Reader</span><br>
<span class="lineno"></span><span class="op" id="6271880">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="6271883">func</span>&nbsp;<span class="op" id="6271888">(</span><span class="ident" id="6271889">r</span>&nbsp;<span class="op" id="6271891">*</span><span class="ident" id="6271892">halfReader</span><span class="op" id="6271902">)</span>&nbsp;<span class="ident" id="6271904">Read</span><span class="op" id="6271908">(</span><span class="ident" id="6271909">p</span>&nbsp;<span class="op" id="6271911">[</span><span class="op" id="6271912">]</span><span class="builtintype" id="6271913">byte</span><span class="op" id="6271917">)</span>&nbsp;<span class="op" id="6271919">(</span><span class="builtintype" id="6271920">int</span><span class="op" id="6271923">,</span>&nbsp;<span class="builtintype" id="6271925">error</span><span class="op" id="6271930">)</span>&nbsp;<span class="op" id="6271932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271935">return</span>&nbsp;<span class="ident" id="6271942">r</span><span class="op" id="6271943">.</span><span class="ident" id="6271944">r</span><span class="op" id="6271945">.</span><span class="ident" id="6271946">Read</span><span class="op" id="6271950">(</span><span class="ident" id="6271951">p</span><span class="op" id="6271952">[</span><span class="num" id="6271953">0</span>&nbsp;<span class="op" id="6271955">:</span>&nbsp;<span class="op" id="6271957">(</span><span class="builtinfunc" id="6271958">len</span><span class="op" id="6271961">(</span><span class="ident" id="6271962">p</span><span class="op" id="6271963">)</span><span class="op" id="6271964">+</span><span class="num" id="6271965">1</span><span class="op" id="6271966">)</span><span class="op" id="6271967">/</span><span class="num" id="6271968">2</span><span class="op" id="6271969">]</span><span class="op" id="6271970">)</span><br>
<span class="lineno"></span><span class="op" id="6271972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="6271975">//&nbsp;DataErrReader&nbsp;changes&nbsp;the&nbsp;way&nbsp;errors&nbsp;are&nbsp;handled&nbsp;by&nbsp;a&nbsp;Reader.&nbsp;Normally,&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6272052">//&nbsp;Reader&nbsp;returns&nbsp;an&nbsp;error&nbsp;(typically&nbsp;EOF)&nbsp;from&nbsp;the&nbsp;first&nbsp;Read&nbsp;call&nbsp;after&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6272130">//&nbsp;last&nbsp;piece&nbsp;of&nbsp;data&nbsp;is&nbsp;read.&nbsp;DataErrReader&nbsp;wraps&nbsp;a&nbsp;Reader&nbsp;and&nbsp;changes&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="6272206">//&nbsp;behavior&nbsp;so&nbsp;the&nbsp;final&nbsp;error&nbsp;is&nbsp;returned&nbsp;along&nbsp;with&nbsp;the&nbsp;final&nbsp;data,&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="6272284">//&nbsp;of&nbsp;in&nbsp;the&nbsp;first&nbsp;call&nbsp;after&nbsp;the&nbsp;final&nbsp;data.</span><br>
<span class="lineno">45</span><span class="keyword" id="6272330">func</span>&nbsp;<span class="ident" id="6272335">DataErrReader</span><span class="op" id="6272348">(</span><span class="ident" id="6272349">r</span>&nbsp;<span class="ident" id="6272351">io</span><span class="op" id="6272353">.</span><span class="ident" id="6272354">Reader</span><span class="op" id="6272360">)</span>&nbsp;<span class="ident" id="6272362">io</span><span class="op" id="6272364">.</span><span class="ident" id="6272365">Reader</span>&nbsp;<span class="op" id="6272372">{</span>&nbsp;<span class="keyword" id="6272374">return</span>&nbsp;<span class="op" id="6272381">&amp;</span><span class="ident" id="6272382">dataErrReader</span><span class="op" id="6272395">{</span><span class="ident" id="6272396">r</span><span class="op" id="6272397">,</span>&nbsp;<span class="ident" id="6272399">nil</span><span class="op" id="6272402">,</span>&nbsp;<span class="builtinfunc" id="6272404">make</span><span class="op" id="6272408">(</span><span class="op" id="6272409">[</span><span class="op" id="6272410">]</span><span class="builtintype" id="6272411">byte</span><span class="op" id="6272415">,</span>&nbsp;<span class="num" id="6272417">1024</span><span class="op" id="6272421">)</span><span class="op" id="6272422">}</span>&nbsp;<span class="op" id="6272424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6272427">type</span>&nbsp;<span class="ident" id="6272432">dataErrReader</span>&nbsp;<span class="keyword" id="6272446">struct</span>&nbsp;<span class="op" id="6272453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272456">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6272463">io</span><span class="op" id="6272465">.</span><span class="ident" id="6272466">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272474">unread</span>&nbsp;<span class="op" id="6272481">[</span><span class="op" id="6272482">]</span><span class="builtintype" id="6272483">byte</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272489">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6272496">[</span><span class="op" id="6272497">]</span><span class="builtintype" id="6272498">byte</span><br>
<span class="lineno"></span><span class="op" id="6272503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6272506">func</span>&nbsp;<span class="op" id="6272511">(</span><span class="ident" id="6272512">r</span>&nbsp;<span class="op" id="6272514">*</span><span class="ident" id="6272515">dataErrReader</span><span class="op" id="6272528">)</span>&nbsp;<span class="ident" id="6272530">Read</span><span class="op" id="6272534">(</span><span class="ident" id="6272535">p</span>&nbsp;<span class="op" id="6272537">[</span><span class="op" id="6272538">]</span><span class="builtintype" id="6272539">byte</span><span class="op" id="6272543">)</span>&nbsp;<span class="op" id="6272545">(</span><span class="ident" id="6272546">n</span>&nbsp;<span class="builtintype" id="6272548">int</span><span class="op" id="6272551">,</span>&nbsp;<span class="ident" id="6272553">err</span>&nbsp;<span class="builtintype" id="6272557">error</span><span class="op" id="6272562">)</span>&nbsp;<span class="op" id="6272564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6272567">//&nbsp;loop&nbsp;because&nbsp;first&nbsp;call&nbsp;needs&nbsp;two&nbsp;reads:</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6272612">//&nbsp;one&nbsp;to&nbsp;get&nbsp;data&nbsp;and&nbsp;a&nbsp;second&nbsp;to&nbsp;look&nbsp;for&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272667">for</span>&nbsp;<span class="op" id="6272671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272675">if</span>&nbsp;<span class="builtinfunc" id="6272678">len</span><span class="op" id="6272681">(</span><span class="ident" id="6272682">r</span><span class="op" id="6272683">.</span><span class="ident" id="6272684">unread</span><span class="op" id="6272690">)</span>&nbsp;<span class="op" id="6272692">==</span>&nbsp;<span class="num" id="6272695">0</span>&nbsp;<span class="op" id="6272697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272702">n1</span><span class="op" id="6272704">,</span>&nbsp;<span class="ident" id="6272706">err1</span>&nbsp;<span class="op" id="6272711">:=</span>&nbsp;<span class="ident" id="6272714">r</span><span class="op" id="6272715">.</span><span class="ident" id="6272716">r</span><span class="op" id="6272717">.</span><span class="ident" id="6272718">Read</span><span class="op" id="6272722">(</span><span class="ident" id="6272723">r</span><span class="op" id="6272724">.</span><span class="ident" id="6272725">data</span><span class="op" id="6272729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272734">r</span><span class="op" id="6272735">.</span><span class="ident" id="6272736">unread</span>&nbsp;<span class="op" id="6272743">=</span>&nbsp;<span class="ident" id="6272745">r</span><span class="op" id="6272746">.</span><span class="ident" id="6272747">data</span><span class="op" id="6272751">[</span><span class="num" id="6272752">0</span><span class="op" id="6272753">:</span><span class="ident" id="6272754">n1</span><span class="op" id="6272756">]</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272761">err</span>&nbsp;<span class="op" id="6272765">=</span>&nbsp;<span class="ident" id="6272767">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272778">if</span>&nbsp;<span class="ident" id="6272781">n</span>&nbsp;<span class="op" id="6272783">&gt;</span>&nbsp;<span class="num" id="6272785">0</span>&nbsp;<span class="op" id="6272787">||</span>&nbsp;<span class="ident" id="6272790">err</span>&nbsp;<span class="op" id="6272794">!=</span>&nbsp;<span class="ident" id="6272797">nil</span>&nbsp;<span class="op" id="6272801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272806">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272814">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272818">n</span>&nbsp;<span class="op" id="6272820">=</span>&nbsp;<span class="builtinfunc" id="6272822">copy</span><span class="op" id="6272826">(</span><span class="ident" id="6272827">p</span><span class="op" id="6272828">,</span>&nbsp;<span class="ident" id="6272830">r</span><span class="op" id="6272831">.</span><span class="ident" id="6272832">unread</span><span class="op" id="6272838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272842">r</span><span class="op" id="6272843">.</span><span class="ident" id="6272844">unread</span>&nbsp;<span class="op" id="6272851">=</span>&nbsp;<span class="ident" id="6272853">r</span><span class="op" id="6272854">.</span><span class="ident" id="6272855">unread</span><span class="op" id="6272861">[</span><span class="ident" id="6272862">n</span><span class="op" id="6272863">:</span><span class="op" id="6272864">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272870">return</span><br>
<span class="lineno"></span><span class="op" id="6272877">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="6272880">var</span>&nbsp;<span class="ident" id="6272884">ErrTimeout</span>&nbsp;<span class="op" id="6272895">=</span>&nbsp;<span class="ident" id="6272897">errors</span><span class="op" id="6272903">.</span><span class="ident" id="6272904">New</span><span class="op" id="6272907">(</span><span class="string" id="6272908">&#34;timeout&#34;</span><span class="op" id="6272917">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6272920">//&nbsp;TimeoutReader&nbsp;returns&nbsp;ErrTimeout&nbsp;on&nbsp;the&nbsp;second&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="6272975">//&nbsp;with&nbsp;no&nbsp;data.&nbsp;&nbsp;Subsequent&nbsp;calls&nbsp;to&nbsp;read&nbsp;succeed.</span><br>
<span class="lineno">75</span><span class="keyword" id="6273027">func</span>&nbsp;<span class="ident" id="6273032">TimeoutReader</span><span class="op" id="6273045">(</span><span class="ident" id="6273046">r</span>&nbsp;<span class="ident" id="6273048">io</span><span class="op" id="6273050">.</span><span class="ident" id="6273051">Reader</span><span class="op" id="6273057">)</span>&nbsp;<span class="ident" id="6273059">io</span><span class="op" id="6273061">.</span><span class="ident" id="6273062">Reader</span>&nbsp;<span class="op" id="6273069">{</span>&nbsp;<span class="keyword" id="6273071">return</span>&nbsp;<span class="op" id="6273078">&amp;</span><span class="ident" id="6273079">timeoutReader</span><span class="op" id="6273092">{</span><span class="ident" id="6273093">r</span><span class="op" id="6273094">,</span>&nbsp;<span class="num" id="6273096">0</span><span class="op" id="6273097">}</span>&nbsp;<span class="op" id="6273099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6273102">type</span>&nbsp;<span class="ident" id="6273107">timeoutReader</span>&nbsp;<span class="keyword" id="6273121">struct</span>&nbsp;<span class="op" id="6273128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273131">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6273137">io</span><span class="op" id="6273139">.</span><span class="ident" id="6273140">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273148">count</span>&nbsp;<span class="builtintype" id="6273154">int</span><br>
<span class="lineno">80</span><span class="op" id="6273158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6273161">func</span>&nbsp;<span class="op" id="6273166">(</span><span class="ident" id="6273167">r</span>&nbsp;<span class="op" id="6273169">*</span><span class="ident" id="6273170">timeoutReader</span><span class="op" id="6273183">)</span>&nbsp;<span class="ident" id="6273185">Read</span><span class="op" id="6273189">(</span><span class="ident" id="6273190">p</span>&nbsp;<span class="op" id="6273192">[</span><span class="op" id="6273193">]</span><span class="builtintype" id="6273194">byte</span><span class="op" id="6273198">)</span>&nbsp;<span class="op" id="6273200">(</span><span class="builtintype" id="6273201">int</span><span class="op" id="6273204">,</span>&nbsp;<span class="builtintype" id="6273206">error</span><span class="op" id="6273211">)</span>&nbsp;<span class="op" id="6273213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273216">r</span><span class="op" id="6273217">.</span><span class="ident" id="6273218">count</span><span class="op" id="6273223">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273227">if</span>&nbsp;<span class="ident" id="6273230">r</span><span class="op" id="6273231">.</span><span class="ident" id="6273232">count</span>&nbsp;<span class="op" id="6273238">==</span>&nbsp;<span class="num" id="6273241">2</span>&nbsp;<span class="op" id="6273243">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273247">return</span>&nbsp;<span class="num" id="6273254">0</span><span class="op" id="6273255">,</span>&nbsp;<span class="ident" id="6273257">ErrTimeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273272">return</span>&nbsp;<span class="ident" id="6273279">r</span><span class="op" id="6273280">.</span><span class="ident" id="6273281">r</span><span class="op" id="6273282">.</span><span class="ident" id="6273283">Read</span><span class="op" id="6273287">(</span><span class="ident" id="6273288">p</span><span class="op" id="6273289">)</span><br>
<span class="lineno"></span><span class="op" id="6273291">}</span>
</div>
</body>
</html>
