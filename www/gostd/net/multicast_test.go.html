<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8439605">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8439660">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8439714">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8439765">package</span>&nbsp;<span class="ident" id="8439773">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8439778">import</span>&nbsp;<span class="op" id="8439785">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8439788">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8439795">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8439801">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8439812">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8439822">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8439825">var</span>&nbsp;<span class="ident" id="8439829">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="8439856">=</span>&nbsp;<span class="op" id="8439858">[</span><span class="op" id="8439859">]</span><span class="keyword" id="8439860">struct</span>&nbsp;<span class="op" id="8439867">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8439870">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8439876">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8439884">gaddr</span>&nbsp;<span class="op" id="8439890">*</span><span class="ident" id="8439891">UDPAddr</span>&nbsp;<span class="comment" id="8439899">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="8439915">}</span><span class="op" id="8439916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8439919">{</span><span class="string" id="8439920">&#34;udp&#34;</span><span class="op" id="8439925">,</span>&nbsp;<span class="op" id="8439927">&amp;</span><span class="ident" id="8439928">UDPAddr</span><span class="op" id="8439935">{</span><span class="ident" id="8439936">IP</span><span class="op" id="8439938">:</span>&nbsp;<span class="ident" id="8439940">IPv4</span><span class="op" id="8439944">(</span><span class="num" id="8439945">224</span><span class="op" id="8439948">,</span>&nbsp;<span class="num" id="8439950">0</span><span class="op" id="8439951">,</span>&nbsp;<span class="num" id="8439953">0</span><span class="op" id="8439954">,</span>&nbsp;<span class="num" id="8439956">254</span><span class="op" id="8439959">)</span><span class="op" id="8439960">,</span>&nbsp;<span class="ident" id="8439962">Port</span><span class="op" id="8439966">:</span>&nbsp;<span class="num" id="8439968">12345</span><span class="op" id="8439973">}</span><span class="op" id="8439974">}</span><span class="op" id="8439975">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8439979">{</span><span class="string" id="8439980">&#34;udp4&#34;</span><span class="op" id="8439986">,</span>&nbsp;<span class="op" id="8439988">&amp;</span><span class="ident" id="8439989">UDPAddr</span><span class="op" id="8439996">{</span><span class="ident" id="8439997">IP</span><span class="op" id="8439999">:</span>&nbsp;<span class="ident" id="8440001">IPv4</span><span class="op" id="8440005">(</span><span class="num" id="8440006">224</span><span class="op" id="8440009">,</span>&nbsp;<span class="num" id="8440011">0</span><span class="op" id="8440012">,</span>&nbsp;<span class="num" id="8440014">0</span><span class="op" id="8440015">,</span>&nbsp;<span class="num" id="8440017">254</span><span class="op" id="8440020">)</span><span class="op" id="8440021">,</span>&nbsp;<span class="ident" id="8440023">Port</span><span class="op" id="8440027">:</span>&nbsp;<span class="num" id="8440029">12345</span><span class="op" id="8440034">}</span><span class="op" id="8440035">}</span><span class="op" id="8440036">,</span><br>
<span class="lineno"></span><span class="op" id="8440038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8440041">//&nbsp;TestIPv4MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="8440111">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">25</span><span class="comment" id="8440182">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="8440191">func</span>&nbsp;<span class="ident" id="8440196">TestIPv4MulticastListener</span><span class="op" id="8440221">(</span><span class="ident" id="8440222">t</span>&nbsp;<span class="op" id="8440224">*</span><span class="ident" id="8440225">testing</span><span class="op" id="8440232">.</span><span class="ident" id="8440233">T</span><span class="op" id="8440234">)</span>&nbsp;<span class="op" id="8440236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440239">switch</span>&nbsp;<span class="ident" id="8440246">runtime</span><span class="op" id="8440253">.</span><span class="ident" id="8440254">GOOS</span>&nbsp;<span class="op" id="8440259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440262">case</span>&nbsp;<span class="string" id="8440267">&#34;android&#34;</span><span class="op" id="8440276">,</span>&nbsp;<span class="string" id="8440278">&#34;nacl&#34;</span><span class="op" id="8440284">,</span>&nbsp;<span class="string" id="8440286">&#34;plan9&#34;</span><span class="op" id="8440293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8440297">t</span><span class="op" id="8440298">.</span><span class="ident" id="8440299">Skipf</span><span class="op" id="8440304">(</span><span class="string" id="8440305">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8440326">,</span>&nbsp;<span class="ident" id="8440328">runtime</span><span class="op" id="8440335">.</span><span class="ident" id="8440336">GOOS</span><span class="op" id="8440340">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440343">case</span>&nbsp;<span class="string" id="8440348">&#34;solaris&#34;</span><span class="op" id="8440357">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8440361">t</span><span class="op" id="8440362">.</span><span class="ident" id="8440363">Skipf</span><span class="op" id="8440368">(</span><span class="string" id="8440369">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="8440411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8440414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8440418">closer</span>&nbsp;<span class="op" id="8440425">:=</span>&nbsp;<span class="keyword" id="8440428">func</span><span class="op" id="8440432">(</span><span class="ident" id="8440433">cs</span>&nbsp;<span class="op" id="8440436">[</span><span class="op" id="8440437">]</span><span class="op" id="8440438">*</span><span class="ident" id="8440439">UDPConn</span><span class="op" id="8440446">)</span>&nbsp;<span class="op" id="8440448">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440452">for</span>&nbsp;<span class="ident" id="8440456">_</span><span class="op" id="8440457">,</span>&nbsp;<span class="ident" id="8440459">c</span>&nbsp;<span class="op" id="8440461">:=</span>&nbsp;<span class="keyword" id="8440464">range</span>&nbsp;<span class="ident" id="8440470">cs</span>&nbsp;<span class="op" id="8440473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440478">if</span>&nbsp;<span class="ident" id="8440481">c</span>&nbsp;<span class="op" id="8440483">!=</span>&nbsp;<span class="ident" id="8440486">nil</span>&nbsp;<span class="op" id="8440490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8440496">c</span><span class="op" id="8440497">.</span><span class="ident" id="8440498">Close</span><span class="op" id="8440503">(</span><span class="op" id="8440504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8440509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8440513">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8440516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440520">for</span>&nbsp;<span class="ident" id="8440524">_</span><span class="op" id="8440525">,</span>&nbsp;<span class="ident" id="8440527">ifi</span>&nbsp;<span class="op" id="8440531">:=</span>&nbsp;<span class="keyword" id="8440534">range</span>&nbsp;<span class="op" id="8440540">[</span><span class="op" id="8440541">]</span><span class="op" id="8440542">*</span><span class="ident" id="8440543">Interface</span><span class="op" id="8440552">{</span><span class="ident" id="8440553">loopbackInterface</span><span class="op" id="8440570">(</span><span class="op" id="8440571">)</span><span class="op" id="8440572">,</span>&nbsp;<span class="ident" id="8440574">nil</span><span class="op" id="8440577">}</span>&nbsp;<span class="op" id="8440579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8440583">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8440639">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8440692">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8440742">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8440794">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440812">if</span>&nbsp;<span class="ident" id="8440815">ifi</span>&nbsp;<span class="op" id="8440819">==</span>&nbsp;<span class="ident" id="8440822">nil</span>&nbsp;<span class="op" id="8440826">&amp;&amp;</span>&nbsp;<span class="op" id="8440829">!</span><span class="op" id="8440830">*</span><span class="ident" id="8440831">testExternal</span>&nbsp;<span class="op" id="8440844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440849">continue</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8440860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440864">for</span>&nbsp;<span class="ident" id="8440868">_</span><span class="op" id="8440869">,</span>&nbsp;<span class="ident" id="8440871">tt</span>&nbsp;<span class="op" id="8440874">:=</span>&nbsp;<span class="keyword" id="8440877">range</span>&nbsp;<span class="ident" id="8440883">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="8440910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440915">var</span>&nbsp;<span class="ident" id="8440919">err</span>&nbsp;<span class="builtintype" id="8440923">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8440932">cs</span>&nbsp;<span class="op" id="8440935">:=</span>&nbsp;<span class="builtinfunc" id="8440938">make</span><span class="op" id="8440942">(</span><span class="op" id="8440943">[</span><span class="op" id="8440944">]</span><span class="op" id="8440945">*</span><span class="ident" id="8440946">UDPConn</span><span class="op" id="8440953">,</span>&nbsp;<span class="num" id="8440955">2</span><span class="op" id="8440956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8440961">if</span>&nbsp;<span class="ident" id="8440964">cs</span><span class="op" id="8440966">[</span><span class="num" id="8440967">0</span><span class="op" id="8440968">]</span><span class="op" id="8440969">,</span>&nbsp;<span class="ident" id="8440971">err</span>&nbsp;<span class="op" id="8440975">=</span>&nbsp;<span class="ident" id="8440977">ListenMulticastUDP</span><span class="op" id="8440995">(</span><span class="ident" id="8440996">tt</span><span class="op" id="8440998">.</span><span class="ident" id="8440999">net</span><span class="op" id="8441002">,</span>&nbsp;<span class="ident" id="8441004">ifi</span><span class="op" id="8441007">,</span>&nbsp;<span class="ident" id="8441009">tt</span><span class="op" id="8441011">.</span><span class="ident" id="8441012">gaddr</span><span class="op" id="8441017">)</span><span class="op" id="8441018">;</span>&nbsp;<span class="ident" id="8441020">err</span>&nbsp;<span class="op" id="8441024">!=</span>&nbsp;<span class="ident" id="8441027">nil</span>&nbsp;<span class="op" id="8441031">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8441037">t</span><span class="op" id="8441038">.</span><span class="ident" id="8441039">Fatalf</span><span class="op" id="8441045">(</span><span class="string" id="8441046">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8441089">,</span>&nbsp;<span class="ident" id="8441091">ifi</span><span class="op" id="8441094">,</span>&nbsp;<span class="ident" id="8441096">err</span><span class="op" id="8441099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8441109">if</span>&nbsp;<span class="ident" id="8441112">err</span>&nbsp;<span class="op" id="8441116">:=</span>&nbsp;<span class="ident" id="8441119">checkMulticastListener</span><span class="op" id="8441141">(</span><span class="ident" id="8441142">cs</span><span class="op" id="8441144">[</span><span class="num" id="8441145">0</span><span class="op" id="8441146">]</span><span class="op" id="8441147">,</span>&nbsp;<span class="ident" id="8441149">tt</span><span class="op" id="8441151">.</span><span class="ident" id="8441152">gaddr</span><span class="op" id="8441157">.</span><span class="ident" id="8441158">IP</span><span class="op" id="8441160">)</span><span class="op" id="8441161">;</span>&nbsp;<span class="ident" id="8441163">err</span>&nbsp;<span class="op" id="8441167">!=</span>&nbsp;<span class="ident" id="8441170">nil</span>&nbsp;<span class="op" id="8441174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8441180">closer</span><span class="op" id="8441186">(</span><span class="ident" id="8441187">cs</span><span class="op" id="8441189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8441195">t</span><span class="op" id="8441196">.</span><span class="ident" id="8441197">Fatal</span><span class="op" id="8441202">(</span><span class="ident" id="8441203">err</span><span class="op" id="8441206">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8441216">if</span>&nbsp;<span class="ident" id="8441219">cs</span><span class="op" id="8441221">[</span><span class="num" id="8441222">1</span><span class="op" id="8441223">]</span><span class="op" id="8441224">,</span>&nbsp;<span class="ident" id="8441226">err</span>&nbsp;<span class="op" id="8441230">=</span>&nbsp;<span class="ident" id="8441232">ListenMulticastUDP</span><span class="op" id="8441250">(</span><span class="ident" id="8441251">tt</span><span class="op" id="8441253">.</span><span class="ident" id="8441254">net</span><span class="op" id="8441257">,</span>&nbsp;<span class="ident" id="8441259">ifi</span><span class="op" id="8441262">,</span>&nbsp;<span class="ident" id="8441264">tt</span><span class="op" id="8441266">.</span><span class="ident" id="8441267">gaddr</span><span class="op" id="8441272">)</span><span class="op" id="8441273">;</span>&nbsp;<span class="ident" id="8441275">err</span>&nbsp;<span class="op" id="8441279">!=</span>&nbsp;<span class="ident" id="8441282">nil</span>&nbsp;<span class="op" id="8441286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8441292">closer</span><span class="op" id="8441298">(</span><span class="ident" id="8441299">cs</span><span class="op" id="8441301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8441307">t</span><span class="op" id="8441308">.</span><span class="ident" id="8441309">Fatalf</span><span class="op" id="8441315">(</span><span class="string" id="8441316">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8441360">,</span>&nbsp;<span class="ident" id="8441362">ifi</span><span class="op" id="8441365">,</span>&nbsp;<span class="ident" id="8441367">err</span><span class="op" id="8441370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441375">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8441380">if</span>&nbsp;<span class="ident" id="8441383">err</span>&nbsp;<span class="op" id="8441387">:=</span>&nbsp;<span class="ident" id="8441390">checkMulticastListener</span><span class="op" id="8441412">(</span><span class="ident" id="8441413">cs</span><span class="op" id="8441415">[</span><span class="num" id="8441416">1</span><span class="op" id="8441417">]</span><span class="op" id="8441418">,</span>&nbsp;<span class="ident" id="8441420">tt</span><span class="op" id="8441422">.</span><span class="ident" id="8441423">gaddr</span><span class="op" id="8441428">.</span><span class="ident" id="8441429">IP</span><span class="op" id="8441431">)</span><span class="op" id="8441432">;</span>&nbsp;<span class="ident" id="8441434">err</span>&nbsp;<span class="op" id="8441438">!=</span>&nbsp;<span class="ident" id="8441441">nil</span>&nbsp;<span class="op" id="8441445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8441451">closer</span><span class="op" id="8441457">(</span><span class="ident" id="8441458">cs</span><span class="op" id="8441460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8441466">t</span><span class="op" id="8441467">.</span><span class="ident" id="8441468">Fatal</span><span class="op" id="8441473">(</span><span class="ident" id="8441474">err</span><span class="op" id="8441477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8441487">closer</span><span class="op" id="8441493">(</span><span class="ident" id="8441494">cs</span><span class="op" id="8441496">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441503">}</span><br>
<span class="lineno"></span><span class="op" id="8441505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8441508">var</span>&nbsp;<span class="ident" id="8441512">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="8441539">=</span>&nbsp;<span class="op" id="8441541">[</span><span class="op" id="8441542">]</span><span class="keyword" id="8441543">struct</span>&nbsp;<span class="op" id="8441550">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8441553">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8441559">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8441567">gaddr</span>&nbsp;<span class="op" id="8441573">*</span><span class="ident" id="8441574">UDPAddr</span>&nbsp;<span class="comment" id="8441582">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="8441598">}</span><span class="op" id="8441599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441602">{</span><span class="string" id="8441603">&#34;udp&#34;</span><span class="op" id="8441608">,</span>&nbsp;<span class="op" id="8441610">&amp;</span><span class="ident" id="8441611">UDPAddr</span><span class="op" id="8441618">{</span><span class="ident" id="8441619">IP</span><span class="op" id="8441621">:</span>&nbsp;<span class="ident" id="8441623">ParseIP</span><span class="op" id="8441630">(</span><span class="string" id="8441631">&#34;ff01::114&#34;</span><span class="op" id="8441642">)</span><span class="op" id="8441643">,</span>&nbsp;<span class="ident" id="8441645">Port</span><span class="op" id="8441649">:</span>&nbsp;<span class="num" id="8441651">12345</span><span class="op" id="8441656">}</span><span class="op" id="8441657">}</span><span class="op" id="8441658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441661">{</span><span class="string" id="8441662">&#34;udp&#34;</span><span class="op" id="8441667">,</span>&nbsp;<span class="op" id="8441669">&amp;</span><span class="ident" id="8441670">UDPAddr</span><span class="op" id="8441677">{</span><span class="ident" id="8441678">IP</span><span class="op" id="8441680">:</span>&nbsp;<span class="ident" id="8441682">ParseIP</span><span class="op" id="8441689">(</span><span class="string" id="8441690">&#34;ff02::114&#34;</span><span class="op" id="8441701">)</span><span class="op" id="8441702">,</span>&nbsp;<span class="ident" id="8441704">Port</span><span class="op" id="8441708">:</span>&nbsp;<span class="num" id="8441710">12345</span><span class="op" id="8441715">}</span><span class="op" id="8441716">}</span><span class="op" id="8441717">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441720">{</span><span class="string" id="8441721">&#34;udp&#34;</span><span class="op" id="8441726">,</span>&nbsp;<span class="op" id="8441728">&amp;</span><span class="ident" id="8441729">UDPAddr</span><span class="op" id="8441736">{</span><span class="ident" id="8441737">IP</span><span class="op" id="8441739">:</span>&nbsp;<span class="ident" id="8441741">ParseIP</span><span class="op" id="8441748">(</span><span class="string" id="8441749">&#34;ff04::114&#34;</span><span class="op" id="8441760">)</span><span class="op" id="8441761">,</span>&nbsp;<span class="ident" id="8441763">Port</span><span class="op" id="8441767">:</span>&nbsp;<span class="num" id="8441769">12345</span><span class="op" id="8441774">}</span><span class="op" id="8441775">}</span><span class="op" id="8441776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441779">{</span><span class="string" id="8441780">&#34;udp&#34;</span><span class="op" id="8441785">,</span>&nbsp;<span class="op" id="8441787">&amp;</span><span class="ident" id="8441788">UDPAddr</span><span class="op" id="8441795">{</span><span class="ident" id="8441796">IP</span><span class="op" id="8441798">:</span>&nbsp;<span class="ident" id="8441800">ParseIP</span><span class="op" id="8441807">(</span><span class="string" id="8441808">&#34;ff05::114&#34;</span><span class="op" id="8441819">)</span><span class="op" id="8441820">,</span>&nbsp;<span class="ident" id="8441822">Port</span><span class="op" id="8441826">:</span>&nbsp;<span class="num" id="8441828">12345</span><span class="op" id="8441833">}</span><span class="op" id="8441834">}</span><span class="op" id="8441835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441838">{</span><span class="string" id="8441839">&#34;udp&#34;</span><span class="op" id="8441844">,</span>&nbsp;<span class="op" id="8441846">&amp;</span><span class="ident" id="8441847">UDPAddr</span><span class="op" id="8441854">{</span><span class="ident" id="8441855">IP</span><span class="op" id="8441857">:</span>&nbsp;<span class="ident" id="8441859">ParseIP</span><span class="op" id="8441866">(</span><span class="string" id="8441867">&#34;ff08::114&#34;</span><span class="op" id="8441878">)</span><span class="op" id="8441879">,</span>&nbsp;<span class="ident" id="8441881">Port</span><span class="op" id="8441885">:</span>&nbsp;<span class="num" id="8441887">12345</span><span class="op" id="8441892">}</span><span class="op" id="8441893">}</span><span class="op" id="8441894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441897">{</span><span class="string" id="8441898">&#34;udp&#34;</span><span class="op" id="8441903">,</span>&nbsp;<span class="op" id="8441905">&amp;</span><span class="ident" id="8441906">UDPAddr</span><span class="op" id="8441913">{</span><span class="ident" id="8441914">IP</span><span class="op" id="8441916">:</span>&nbsp;<span class="ident" id="8441918">ParseIP</span><span class="op" id="8441925">(</span><span class="string" id="8441926">&#34;ff0e::114&#34;</span><span class="op" id="8441937">)</span><span class="op" id="8441938">,</span>&nbsp;<span class="ident" id="8441940">Port</span><span class="op" id="8441944">:</span>&nbsp;<span class="num" id="8441946">12345</span><span class="op" id="8441951">}</span><span class="op" id="8441952">}</span><span class="op" id="8441953">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8441957">{</span><span class="string" id="8441958">&#34;udp6&#34;</span><span class="op" id="8441964">,</span>&nbsp;<span class="op" id="8441966">&amp;</span><span class="ident" id="8441967">UDPAddr</span><span class="op" id="8441974">{</span><span class="ident" id="8441975">IP</span><span class="op" id="8441977">:</span>&nbsp;<span class="ident" id="8441979">ParseIP</span><span class="op" id="8441986">(</span><span class="string" id="8441987">&#34;ff01::114&#34;</span><span class="op" id="8441998">)</span><span class="op" id="8441999">,</span>&nbsp;<span class="ident" id="8442001">Port</span><span class="op" id="8442005">:</span>&nbsp;<span class="num" id="8442007">12345</span><span class="op" id="8442012">}</span><span class="op" id="8442013">}</span><span class="op" id="8442014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442017">{</span><span class="string" id="8442018">&#34;udp6&#34;</span><span class="op" id="8442024">,</span>&nbsp;<span class="op" id="8442026">&amp;</span><span class="ident" id="8442027">UDPAddr</span><span class="op" id="8442034">{</span><span class="ident" id="8442035">IP</span><span class="op" id="8442037">:</span>&nbsp;<span class="ident" id="8442039">ParseIP</span><span class="op" id="8442046">(</span><span class="string" id="8442047">&#34;ff02::114&#34;</span><span class="op" id="8442058">)</span><span class="op" id="8442059">,</span>&nbsp;<span class="ident" id="8442061">Port</span><span class="op" id="8442065">:</span>&nbsp;<span class="num" id="8442067">12345</span><span class="op" id="8442072">}</span><span class="op" id="8442073">}</span><span class="op" id="8442074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442077">{</span><span class="string" id="8442078">&#34;udp6&#34;</span><span class="op" id="8442084">,</span>&nbsp;<span class="op" id="8442086">&amp;</span><span class="ident" id="8442087">UDPAddr</span><span class="op" id="8442094">{</span><span class="ident" id="8442095">IP</span><span class="op" id="8442097">:</span>&nbsp;<span class="ident" id="8442099">ParseIP</span><span class="op" id="8442106">(</span><span class="string" id="8442107">&#34;ff04::114&#34;</span><span class="op" id="8442118">)</span><span class="op" id="8442119">,</span>&nbsp;<span class="ident" id="8442121">Port</span><span class="op" id="8442125">:</span>&nbsp;<span class="num" id="8442127">12345</span><span class="op" id="8442132">}</span><span class="op" id="8442133">}</span><span class="op" id="8442134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442137">{</span><span class="string" id="8442138">&#34;udp6&#34;</span><span class="op" id="8442144">,</span>&nbsp;<span class="op" id="8442146">&amp;</span><span class="ident" id="8442147">UDPAddr</span><span class="op" id="8442154">{</span><span class="ident" id="8442155">IP</span><span class="op" id="8442157">:</span>&nbsp;<span class="ident" id="8442159">ParseIP</span><span class="op" id="8442166">(</span><span class="string" id="8442167">&#34;ff05::114&#34;</span><span class="op" id="8442178">)</span><span class="op" id="8442179">,</span>&nbsp;<span class="ident" id="8442181">Port</span><span class="op" id="8442185">:</span>&nbsp;<span class="num" id="8442187">12345</span><span class="op" id="8442192">}</span><span class="op" id="8442193">}</span><span class="op" id="8442194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442197">{</span><span class="string" id="8442198">&#34;udp6&#34;</span><span class="op" id="8442204">,</span>&nbsp;<span class="op" id="8442206">&amp;</span><span class="ident" id="8442207">UDPAddr</span><span class="op" id="8442214">{</span><span class="ident" id="8442215">IP</span><span class="op" id="8442217">:</span>&nbsp;<span class="ident" id="8442219">ParseIP</span><span class="op" id="8442226">(</span><span class="string" id="8442227">&#34;ff08::114&#34;</span><span class="op" id="8442238">)</span><span class="op" id="8442239">,</span>&nbsp;<span class="ident" id="8442241">Port</span><span class="op" id="8442245">:</span>&nbsp;<span class="num" id="8442247">12345</span><span class="op" id="8442252">}</span><span class="op" id="8442253">}</span><span class="op" id="8442254">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442257">{</span><span class="string" id="8442258">&#34;udp6&#34;</span><span class="op" id="8442264">,</span>&nbsp;<span class="op" id="8442266">&amp;</span><span class="ident" id="8442267">UDPAddr</span><span class="op" id="8442274">{</span><span class="ident" id="8442275">IP</span><span class="op" id="8442277">:</span>&nbsp;<span class="ident" id="8442279">ParseIP</span><span class="op" id="8442286">(</span><span class="string" id="8442287">&#34;ff0e::114&#34;</span><span class="op" id="8442298">)</span><span class="op" id="8442299">,</span>&nbsp;<span class="ident" id="8442301">Port</span><span class="op" id="8442305">:</span>&nbsp;<span class="num" id="8442307">12345</span><span class="op" id="8442312">}</span><span class="op" id="8442313">}</span><span class="op" id="8442314">,</span><br>
<span class="lineno"></span><span class="op" id="8442316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8442319">//&nbsp;TestIPv6MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="8442389">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">95</span><span class="comment" id="8442460">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="8442469">func</span>&nbsp;<span class="ident" id="8442474">TestIPv6MulticastListener</span><span class="op" id="8442499">(</span><span class="ident" id="8442500">t</span>&nbsp;<span class="op" id="8442502">*</span><span class="ident" id="8442503">testing</span><span class="op" id="8442510">.</span><span class="ident" id="8442511">T</span><span class="op" id="8442512">)</span>&nbsp;<span class="op" id="8442514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8442517">switch</span>&nbsp;<span class="ident" id="8442524">runtime</span><span class="op" id="8442531">.</span><span class="ident" id="8442532">GOOS</span>&nbsp;<span class="op" id="8442537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8442540">case</span>&nbsp;<span class="string" id="8442545">&#34;plan9&#34;</span><span class="op" id="8442552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8442556">t</span><span class="op" id="8442557">.</span><span class="ident" id="8442558">Skipf</span><span class="op" id="8442563">(</span><span class="string" id="8442564">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8442585">,</span>&nbsp;<span class="ident" id="8442587">runtime</span><span class="op" id="8442594">.</span><span class="ident" id="8442595">GOOS</span><span class="op" id="8442599">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8442602">case</span>&nbsp;<span class="string" id="8442607">&#34;solaris&#34;</span><span class="op" id="8442616">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8442620">t</span><span class="op" id="8442621">.</span><span class="ident" id="8442622">Skipf</span><span class="op" id="8442627">(</span><span class="string" id="8442628">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="8442670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8442676">if</span>&nbsp;<span class="op" id="8442679">!</span><span class="ident" id="8442680">supportsIPv6</span>&nbsp;<span class="op" id="8442693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8442697">t</span><span class="op" id="8442698">.</span><span class="ident" id="8442699">Skip</span><span class="op" id="8442703">(</span><span class="string" id="8442704">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="8442727">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8442733">if</span>&nbsp;<span class="ident" id="8442736">os</span><span class="op" id="8442738">.</span><span class="ident" id="8442739">Getuid</span><span class="op" id="8442745">(</span><span class="op" id="8442746">)</span>&nbsp;<span class="op" id="8442748">!=</span>&nbsp;<span class="num" id="8442751">0</span>&nbsp;<span class="op" id="8442753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8442757">t</span><span class="op" id="8442758">.</span><span class="ident" id="8442759">Skip</span><span class="op" id="8442763">(</span><span class="string" id="8442764">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="8442793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8442800">closer</span>&nbsp;<span class="op" id="8442807">:=</span>&nbsp;<span class="keyword" id="8442810">func</span><span class="op" id="8442814">(</span><span class="ident" id="8442815">cs</span>&nbsp;<span class="op" id="8442818">[</span><span class="op" id="8442819">]</span><span class="op" id="8442820">*</span><span class="ident" id="8442821">UDPConn</span><span class="op" id="8442828">)</span>&nbsp;<span class="op" id="8442830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8442834">for</span>&nbsp;<span class="ident" id="8442838">_</span><span class="op" id="8442839">,</span>&nbsp;<span class="ident" id="8442841">c</span>&nbsp;<span class="op" id="8442843">:=</span>&nbsp;<span class="keyword" id="8442846">range</span>&nbsp;<span class="ident" id="8442852">cs</span>&nbsp;<span class="op" id="8442855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8442860">if</span>&nbsp;<span class="ident" id="8442863">c</span>&nbsp;<span class="op" id="8442865">!=</span>&nbsp;<span class="ident" id="8442868">nil</span>&nbsp;<span class="op" id="8442872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8442878">c</span><span class="op" id="8442879">.</span><span class="ident" id="8442880">Close</span><span class="op" id="8442885">(</span><span class="op" id="8442886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442891">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8442898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8442902">for</span>&nbsp;<span class="ident" id="8442906">_</span><span class="op" id="8442907">,</span>&nbsp;<span class="ident" id="8442909">ifi</span>&nbsp;<span class="op" id="8442913">:=</span>&nbsp;<span class="keyword" id="8442916">range</span>&nbsp;<span class="op" id="8442922">[</span><span class="op" id="8442923">]</span><span class="op" id="8442924">*</span><span class="ident" id="8442925">Interface</span><span class="op" id="8442934">{</span><span class="ident" id="8442935">loopbackInterface</span><span class="op" id="8442952">(</span><span class="op" id="8442953">)</span><span class="op" id="8442954">,</span>&nbsp;<span class="ident" id="8442956">nil</span><span class="op" id="8442959">}</span>&nbsp;<span class="op" id="8442961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8442965">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8443021">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8443074">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8443124">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8443176">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8443194">if</span>&nbsp;<span class="ident" id="8443197">ifi</span>&nbsp;<span class="op" id="8443201">==</span>&nbsp;<span class="ident" id="8443204">nil</span>&nbsp;<span class="op" id="8443208">&amp;&amp;</span>&nbsp;<span class="op" id="8443211">(</span><span class="op" id="8443212">!</span><span class="op" id="8443213">*</span><span class="ident" id="8443214">testExternal</span>&nbsp;<span class="op" id="8443227">||</span>&nbsp;<span class="op" id="8443230">!</span><span class="op" id="8443231">*</span><span class="ident" id="8443232">testIPv6</span><span class="op" id="8443240">)</span>&nbsp;<span class="op" id="8443242">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8443247">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8443258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8443262">for</span>&nbsp;<span class="ident" id="8443266">_</span><span class="op" id="8443267">,</span>&nbsp;<span class="ident" id="8443269">tt</span>&nbsp;<span class="op" id="8443272">:=</span>&nbsp;<span class="keyword" id="8443275">range</span>&nbsp;<span class="ident" id="8443281">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="8443308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8443313">var</span>&nbsp;<span class="ident" id="8443317">err</span>&nbsp;<span class="builtintype" id="8443321">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8443330">cs</span>&nbsp;<span class="op" id="8443333">:=</span>&nbsp;<span class="builtinfunc" id="8443336">make</span><span class="op" id="8443340">(</span><span class="op" id="8443341">[</span><span class="op" id="8443342">]</span><span class="op" id="8443343">*</span><span class="ident" id="8443344">UDPConn</span><span class="op" id="8443351">,</span>&nbsp;<span class="num" id="8443353">2</span><span class="op" id="8443354">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8443359">if</span>&nbsp;<span class="ident" id="8443362">cs</span><span class="op" id="8443364">[</span><span class="num" id="8443365">0</span><span class="op" id="8443366">]</span><span class="op" id="8443367">,</span>&nbsp;<span class="ident" id="8443369">err</span>&nbsp;<span class="op" id="8443373">=</span>&nbsp;<span class="ident" id="8443375">ListenMulticastUDP</span><span class="op" id="8443393">(</span><span class="ident" id="8443394">tt</span><span class="op" id="8443396">.</span><span class="ident" id="8443397">net</span><span class="op" id="8443400">,</span>&nbsp;<span class="ident" id="8443402">ifi</span><span class="op" id="8443405">,</span>&nbsp;<span class="ident" id="8443407">tt</span><span class="op" id="8443409">.</span><span class="ident" id="8443410">gaddr</span><span class="op" id="8443415">)</span><span class="op" id="8443416">;</span>&nbsp;<span class="ident" id="8443418">err</span>&nbsp;<span class="op" id="8443422">!=</span>&nbsp;<span class="ident" id="8443425">nil</span>&nbsp;<span class="op" id="8443429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8443435">t</span><span class="op" id="8443436">.</span><span class="ident" id="8443437">Fatalf</span><span class="op" id="8443443">(</span><span class="string" id="8443444">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8443487">,</span>&nbsp;<span class="ident" id="8443489">ifi</span><span class="op" id="8443492">,</span>&nbsp;<span class="ident" id="8443494">err</span><span class="op" id="8443497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8443502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8443507">if</span>&nbsp;<span class="ident" id="8443510">err</span>&nbsp;<span class="op" id="8443514">:=</span>&nbsp;<span class="ident" id="8443517">checkMulticastListener</span><span class="op" id="8443539">(</span><span class="ident" id="8443540">cs</span><span class="op" id="8443542">[</span><span class="num" id="8443543">0</span><span class="op" id="8443544">]</span><span class="op" id="8443545">,</span>&nbsp;<span class="ident" id="8443547">tt</span><span class="op" id="8443549">.</span><span class="ident" id="8443550">gaddr</span><span class="op" id="8443555">.</span><span class="ident" id="8443556">IP</span><span class="op" id="8443558">)</span><span class="op" id="8443559">;</span>&nbsp;<span class="ident" id="8443561">err</span>&nbsp;<span class="op" id="8443565">!=</span>&nbsp;<span class="ident" id="8443568">nil</span>&nbsp;<span class="op" id="8443572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8443578">closer</span><span class="op" id="8443584">(</span><span class="ident" id="8443585">cs</span><span class="op" id="8443587">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8443593">t</span><span class="op" id="8443594">.</span><span class="ident" id="8443595">Fatal</span><span class="op" id="8443600">(</span><span class="ident" id="8443601">err</span><span class="op" id="8443604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8443609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8443614">if</span>&nbsp;<span class="ident" id="8443617">cs</span><span class="op" id="8443619">[</span><span class="num" id="8443620">1</span><span class="op" id="8443621">]</span><span class="op" id="8443622">,</span>&nbsp;<span class="ident" id="8443624">err</span>&nbsp;<span class="op" id="8443628">=</span>&nbsp;<span class="ident" id="8443630">ListenMulticastUDP</span><span class="op" id="8443648">(</span><span class="ident" id="8443649">tt</span><span class="op" id="8443651">.</span><span class="ident" id="8443652">net</span><span class="op" id="8443655">,</span>&nbsp;<span class="ident" id="8443657">ifi</span><span class="op" id="8443660">,</span>&nbsp;<span class="ident" id="8443662">tt</span><span class="op" id="8443664">.</span><span class="ident" id="8443665">gaddr</span><span class="op" id="8443670">)</span><span class="op" id="8443671">;</span>&nbsp;<span class="ident" id="8443673">err</span>&nbsp;<span class="op" id="8443677">!=</span>&nbsp;<span class="ident" id="8443680">nil</span>&nbsp;<span class="op" id="8443684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8443690">closer</span><span class="op" id="8443696">(</span><span class="ident" id="8443697">cs</span><span class="op" id="8443699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8443705">t</span><span class="op" id="8443706">.</span><span class="ident" id="8443707">Fatalf</span><span class="op" id="8443713">(</span><span class="string" id="8443714">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8443758">,</span>&nbsp;<span class="ident" id="8443760">ifi</span><span class="op" id="8443763">,</span>&nbsp;<span class="ident" id="8443765">err</span><span class="op" id="8443768">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8443773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8443778">if</span>&nbsp;<span class="ident" id="8443781">err</span>&nbsp;<span class="op" id="8443785">:=</span>&nbsp;<span class="ident" id="8443788">checkMulticastListener</span><span class="op" id="8443810">(</span><span class="ident" id="8443811">cs</span><span class="op" id="8443813">[</span><span class="num" id="8443814">1</span><span class="op" id="8443815">]</span><span class="op" id="8443816">,</span>&nbsp;<span class="ident" id="8443818">tt</span><span class="op" id="8443820">.</span><span class="ident" id="8443821">gaddr</span><span class="op" id="8443826">.</span><span class="ident" id="8443827">IP</span><span class="op" id="8443829">)</span><span class="op" id="8443830">;</span>&nbsp;<span class="ident" id="8443832">err</span>&nbsp;<span class="op" id="8443836">!=</span>&nbsp;<span class="ident" id="8443839">nil</span>&nbsp;<span class="op" id="8443843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8443849">closer</span><span class="op" id="8443855">(</span><span class="ident" id="8443856">cs</span><span class="op" id="8443858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8443864">t</span><span class="op" id="8443865">.</span><span class="ident" id="8443866">Fatal</span><span class="op" id="8443871">(</span><span class="ident" id="8443872">err</span><span class="op" id="8443875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8443880">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8443885">closer</span><span class="op" id="8443891">(</span><span class="ident" id="8443892">cs</span><span class="op" id="8443894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8443898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8443901">}</span><br>
<span class="lineno"></span><span class="op" id="8443903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="8443906">func</span>&nbsp;<span class="ident" id="8443911">checkMulticastListener</span><span class="op" id="8443933">(</span><span class="ident" id="8443934">c</span>&nbsp;<span class="op" id="8443936">*</span><span class="ident" id="8443937">UDPConn</span><span class="op" id="8443944">,</span>&nbsp;<span class="ident" id="8443946">ip</span>&nbsp;<span class="ident" id="8443949">IP</span><span class="op" id="8443951">)</span>&nbsp;<span class="builtintype" id="8443953">error</span>&nbsp;<span class="op" id="8443959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8443962">if</span>&nbsp;<span class="ident" id="8443965">ok</span><span class="op" id="8443967">,</span>&nbsp;<span class="ident" id="8443969">err</span>&nbsp;<span class="op" id="8443973">:=</span>&nbsp;<span class="ident" id="8443976">multicastRIBContains</span><span class="op" id="8443996">(</span><span class="ident" id="8443997">ip</span><span class="op" id="8443999">)</span><span class="op" id="8444000">;</span>&nbsp;<span class="ident" id="8444002">err</span>&nbsp;<span class="op" id="8444006">!=</span>&nbsp;<span class="ident" id="8444009">nil</span>&nbsp;<span class="op" id="8444013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444017">return</span>&nbsp;<span class="ident" id="8444024">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8444029">}</span>&nbsp;<span class="keyword" id="8444031">else</span>&nbsp;<span class="keyword" id="8444036">if</span>&nbsp;<span class="op" id="8444039">!</span><span class="ident" id="8444040">ok</span>&nbsp;<span class="op" id="8444043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444047">return</span>&nbsp;<span class="ident" id="8444054">fmt</span><span class="op" id="8444057">.</span><span class="ident" id="8444058">Errorf</span><span class="op" id="8444064">(</span><span class="string" id="8444065">&#34;%q&nbsp;not&nbsp;found&nbsp;in&nbsp;multicast&nbsp;RIB&#34;</span><span class="op" id="8444096">,</span>&nbsp;<span class="ident" id="8444098">ip</span><span class="op" id="8444100">.</span><span class="ident" id="8444101">String</span><span class="op" id="8444107">(</span><span class="op" id="8444108">)</span><span class="op" id="8444109">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8444112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8444115">la</span>&nbsp;<span class="op" id="8444118">:=</span>&nbsp;<span class="ident" id="8444121">c</span><span class="op" id="8444122">.</span><span class="ident" id="8444123">LocalAddr</span><span class="op" id="8444132">(</span><span class="op" id="8444133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444136">if</span>&nbsp;<span class="ident" id="8444139">la</span><span class="op" id="8444141">,</span>&nbsp;<span class="ident" id="8444143">ok</span>&nbsp;<span class="op" id="8444146">:=</span>&nbsp;<span class="ident" id="8444149">la</span><span class="op" id="8444151">.</span><span class="op" id="8444152">(</span><span class="op" id="8444153">*</span><span class="ident" id="8444154">UDPAddr</span><span class="op" id="8444161">)</span><span class="op" id="8444162">;</span>&nbsp;<span class="op" id="8444164">!</span><span class="ident" id="8444165">ok</span>&nbsp;<span class="op" id="8444168">||</span>&nbsp;<span class="ident" id="8444171">la</span><span class="op" id="8444173">.</span><span class="ident" id="8444174">Port</span>&nbsp;<span class="op" id="8444179">==</span>&nbsp;<span class="num" id="8444182">0</span>&nbsp;<span class="op" id="8444184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444188">return</span>&nbsp;<span class="ident" id="8444195">fmt</span><span class="op" id="8444198">.</span><span class="ident" id="8444199">Errorf</span><span class="op" id="8444205">(</span><span class="string" id="8444206">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;non-zero&nbsp;port&nbsp;number&#34;</span><span class="op" id="8444267">,</span>&nbsp;<span class="ident" id="8444269">la</span><span class="op" id="8444271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8444274">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444277">return</span>&nbsp;<span class="ident" id="8444284">nil</span><br>
<span class="lineno"></span><span class="op" id="8444288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8444291">func</span>&nbsp;<span class="ident" id="8444296">multicastRIBContains</span><span class="op" id="8444316">(</span><span class="ident" id="8444317">ip</span>&nbsp;<span class="ident" id="8444320">IP</span><span class="op" id="8444322">)</span>&nbsp;<span class="op" id="8444324">(</span><span class="builtintype" id="8444325">bool</span><span class="op" id="8444329">,</span>&nbsp;<span class="builtintype" id="8444331">error</span><span class="op" id="8444336">)</span>&nbsp;<span class="op" id="8444338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444341">switch</span>&nbsp;<span class="ident" id="8444348">runtime</span><span class="op" id="8444355">.</span><span class="ident" id="8444356">GOOS</span>&nbsp;<span class="op" id="8444361">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444364">case</span>&nbsp;<span class="string" id="8444369">&#34;dragonfly&#34;</span><span class="op" id="8444380">,</span>&nbsp;<span class="string" id="8444382">&#34;netbsd&#34;</span><span class="op" id="8444390">,</span>&nbsp;<span class="string" id="8444392">&#34;openbsd&#34;</span><span class="op" id="8444401">,</span>&nbsp;<span class="string" id="8444403">&#34;plan9&#34;</span><span class="op" id="8444410">,</span>&nbsp;<span class="string" id="8444412">&#34;solaris&#34;</span><span class="op" id="8444421">,</span>&nbsp;<span class="string" id="8444423">&#34;windows&#34;</span><span class="op" id="8444432">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444436">return</span>&nbsp;<span class="builtintype" id="8444443">true</span><span class="op" id="8444447">,</span>&nbsp;<span class="ident" id="8444449">nil</span>&nbsp;<span class="comment" id="8444453">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444477">case</span>&nbsp;<span class="string" id="8444482">&#34;linux&#34;</span><span class="op" id="8444489">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444493">if</span>&nbsp;<span class="ident" id="8444496">runtime</span><span class="op" id="8444503">.</span><span class="ident" id="8444504">GOARCH</span>&nbsp;<span class="op" id="8444511">==</span>&nbsp;<span class="string" id="8444514">&#34;arm&#34;</span>&nbsp;<span class="op" id="8444520">||</span>&nbsp;<span class="ident" id="8444523">runtime</span><span class="op" id="8444530">.</span><span class="ident" id="8444531">GOARCH</span>&nbsp;<span class="op" id="8444538">==</span>&nbsp;<span class="string" id="8444541">&#34;alpha&#34;</span>&nbsp;<span class="op" id="8444549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444554">return</span>&nbsp;<span class="builtintype" id="8444561">true</span><span class="op" id="8444565">,</span>&nbsp;<span class="ident" id="8444567">nil</span>&nbsp;<span class="comment" id="8444571">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8444596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8444599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8444602">ift</span><span class="op" id="8444605">,</span>&nbsp;<span class="ident" id="8444607">err</span>&nbsp;<span class="op" id="8444611">:=</span>&nbsp;<span class="ident" id="8444614">Interfaces</span><span class="op" id="8444624">(</span><span class="op" id="8444625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444628">if</span>&nbsp;<span class="ident" id="8444631">err</span>&nbsp;<span class="op" id="8444635">!=</span>&nbsp;<span class="ident" id="8444638">nil</span>&nbsp;<span class="op" id="8444642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444646">return</span>&nbsp;<span class="builtintype" id="8444653">false</span><span class="op" id="8444658">,</span>&nbsp;<span class="ident" id="8444660">err</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8444665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444668">for</span>&nbsp;<span class="ident" id="8444672">_</span><span class="op" id="8444673">,</span>&nbsp;<span class="ident" id="8444675">ifi</span>&nbsp;<span class="op" id="8444679">:=</span>&nbsp;<span class="keyword" id="8444682">range</span>&nbsp;<span class="ident" id="8444688">ift</span>&nbsp;<span class="op" id="8444692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8444696">ifmat</span><span class="op" id="8444701">,</span>&nbsp;<span class="ident" id="8444703">err</span>&nbsp;<span class="op" id="8444707">:=</span>&nbsp;<span class="ident" id="8444710">ifi</span><span class="op" id="8444713">.</span><span class="ident" id="8444714">MulticastAddrs</span><span class="op" id="8444728">(</span><span class="op" id="8444729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444733">if</span>&nbsp;<span class="ident" id="8444736">err</span>&nbsp;<span class="op" id="8444740">!=</span>&nbsp;<span class="ident" id="8444743">nil</span>&nbsp;<span class="op" id="8444747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444752">return</span>&nbsp;<span class="builtintype" id="8444759">false</span><span class="op" id="8444764">,</span>&nbsp;<span class="ident" id="8444766">err</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8444772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444776">for</span>&nbsp;<span class="ident" id="8444780">_</span><span class="op" id="8444781">,</span>&nbsp;<span class="ident" id="8444783">ifma</span>&nbsp;<span class="op" id="8444788">:=</span>&nbsp;<span class="keyword" id="8444791">range</span>&nbsp;<span class="ident" id="8444797">ifmat</span>&nbsp;<span class="op" id="8444803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444808">if</span>&nbsp;<span class="ident" id="8444811">ifma</span><span class="op" id="8444815">.</span><span class="op" id="8444816">(</span><span class="op" id="8444817">*</span><span class="ident" id="8444818">IPAddr</span><span class="op" id="8444824">)</span><span class="op" id="8444825">.</span><span class="ident" id="8444826">IP</span><span class="op" id="8444828">.</span><span class="ident" id="8444829">Equal</span><span class="op" id="8444834">(</span><span class="ident" id="8444835">ip</span><span class="op" id="8444837">)</span>&nbsp;<span class="op" id="8444839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444845">return</span>&nbsp;<span class="builtintype" id="8444852">true</span><span class="op" id="8444856">,</span>&nbsp;<span class="ident" id="8444858">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8444865">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8444869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8444872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8444875">return</span>&nbsp;<span class="builtintype" id="8444882">false</span><span class="op" id="8444887">,</span>&nbsp;<span class="ident" id="8444889">nil</span><br>
<span class="lineno"></span><span class="op" id="8444893">}</span>
</div>
</body>
</html>
