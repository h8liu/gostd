<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html" class="current">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8306047">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8306102">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8306156">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8306207">package</span>&nbsp;<span class="ident" id="8306215">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8306223">import</span>&nbsp;<span class="op" id="8306230">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8306233">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8306245">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8306258">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8306268">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8306271">var</span>&nbsp;<span class="ident" id="8306275">src</span>&nbsp;<span class="op" id="8306279">=</span>&nbsp;<span class="ident" id="8306281">readFile</span><span class="op" id="8306289">(</span><span class="string" id="8306290">&#34;parser.go&#34;</span><span class="op" id="8306301">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8306304">func</span>&nbsp;<span class="ident" id="8306309">readFile</span><span class="op" id="8306317">(</span><span class="ident" id="8306318">filename</span>&nbsp;<span class="builtintype" id="8306327">string</span><span class="op" id="8306333">)</span>&nbsp;<span class="op" id="8306335">[</span><span class="op" id="8306336">]</span><span class="builtintype" id="8306337">byte</span>&nbsp;<span class="op" id="8306342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306345">data</span><span class="op" id="8306349">,</span>&nbsp;<span class="ident" id="8306351">err</span>&nbsp;<span class="op" id="8306355">:=</span>&nbsp;<span class="ident" id="8306358">ioutil</span><span class="op" id="8306364">.</span><span class="ident" id="8306365">ReadFile</span><span class="op" id="8306373">(</span><span class="ident" id="8306374">filename</span><span class="op" id="8306382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8306385">if</span>&nbsp;<span class="ident" id="8306388">err</span>&nbsp;<span class="op" id="8306392">!=</span>&nbsp;<span class="ident" id="8306395">nil</span>&nbsp;<span class="op" id="8306399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8306403">panic</span><span class="op" id="8306408">(</span><span class="ident" id="8306409">err</span><span class="op" id="8306412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8306415">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8306418">return</span>&nbsp;<span class="ident" id="8306425">data</span><br>
<span class="lineno"></span><span class="op" id="8306430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8306433">func</span>&nbsp;<span class="ident" id="8306438">BenchmarkParse</span><span class="op" id="8306452">(</span><span class="ident" id="8306453">b</span>&nbsp;<span class="op" id="8306455">*</span><span class="ident" id="8306456">testing</span><span class="op" id="8306463">.</span><span class="ident" id="8306464">B</span><span class="op" id="8306465">)</span>&nbsp;<span class="op" id="8306467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306470">b</span><span class="op" id="8306471">.</span><span class="ident" id="8306472">SetBytes</span><span class="op" id="8306480">(</span><span class="ident" id="8306481">int64</span><span class="op" id="8306486">(</span><span class="builtinfunc" id="8306487">len</span><span class="op" id="8306490">(</span><span class="ident" id="8306491">src</span><span class="op" id="8306494">)</span><span class="op" id="8306495">)</span><span class="op" id="8306496">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8306499">for</span>&nbsp;<span class="ident" id="8306503">i</span>&nbsp;<span class="op" id="8306505">:=</span>&nbsp;<span class="num" id="8306508">0</span><span class="op" id="8306509">;</span>&nbsp;<span class="ident" id="8306511">i</span>&nbsp;<span class="op" id="8306513">&lt;</span>&nbsp;<span class="ident" id="8306515">b</span><span class="op" id="8306516">.</span><span class="ident" id="8306517">N</span><span class="op" id="8306518">;</span>&nbsp;<span class="ident" id="8306520">i</span><span class="op" id="8306521">++</span>&nbsp;<span class="op" id="8306524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8306528">if</span>&nbsp;<span class="ident" id="8306531">_</span><span class="op" id="8306532">,</span>&nbsp;<span class="ident" id="8306534">err</span>&nbsp;<span class="op" id="8306538">:=</span>&nbsp;<span class="ident" id="8306541">ParseFile</span><span class="op" id="8306550">(</span><span class="ident" id="8306551">token</span><span class="op" id="8306556">.</span><span class="ident" id="8306557">NewFileSet</span><span class="op" id="8306567">(</span><span class="op" id="8306568">)</span><span class="op" id="8306569">,</span>&nbsp;<span class="string" id="8306571">&#34;&#34;</span><span class="op" id="8306573">,</span>&nbsp;<span class="ident" id="8306575">src</span><span class="op" id="8306578">,</span>&nbsp;<span class="ident" id="8306580">ParseComments</span><span class="op" id="8306593">)</span><span class="op" id="8306594">;</span>&nbsp;<span class="ident" id="8306596">err</span>&nbsp;<span class="op" id="8306600">!=</span>&nbsp;<span class="ident" id="8306603">nil</span>&nbsp;<span class="op" id="8306607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306612">b</span><span class="op" id="8306613">.</span><span class="ident" id="8306614">Fatalf</span><span class="op" id="8306620">(</span><span class="string" id="8306621">&#34;benchmark&nbsp;failed&nbsp;due&nbsp;to&nbsp;parse&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8306662">,</span>&nbsp;<span class="ident" id="8306664">err</span><span class="op" id="8306667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8306671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8306674">}</span><br>
<span class="lineno">30</span><span class="op" id="8306676">}</span>
</div>
</body>
</html>
