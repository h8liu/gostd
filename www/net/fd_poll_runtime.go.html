<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1384923">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1384978">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1385032">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1385083">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1385156">package</span>&nbsp;<span class="ident" id="1385164">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1385169">import</span>&nbsp;<span class="op" id="1385176">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1385179">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1385187">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1385198">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="1385205">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1385208">//&nbsp;runtimeNano&nbsp;returns&nbsp;the&nbsp;current&nbsp;value&nbsp;of&nbsp;the&nbsp;runtime&nbsp;clock&nbsp;in&nbsp;nanoseconds.</span><br>
<span class="lineno"></span><span class="keyword" id="1385286">func</span>&nbsp;<span class="ident" id="1385291">runtimeNano</span><span class="op" id="1385302">(</span><span class="op" id="1385303">)</span>&nbsp;<span class="ident" id="1385305">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1385312">func</span>&nbsp;<span class="ident" id="1385317">runtime_pollServerInit</span><span class="op" id="1385339">(</span><span class="op" id="1385340">)</span><br>
<span class="lineno"></span><span class="keyword" id="1385342">func</span>&nbsp;<span class="ident" id="1385347">runtime_pollOpen</span><span class="op" id="1385363">(</span><span class="ident" id="1385364">fd</span>&nbsp;<span class="builtintype" id="1385367">uintptr</span><span class="op" id="1385374">)</span>&nbsp;<span class="op" id="1385376">(</span><span class="builtintype" id="1385377">uintptr</span><span class="op" id="1385384">,</span>&nbsp;<span class="builtintype" id="1385386">int</span><span class="op" id="1385389">)</span><br>
<span class="lineno">20</span><span class="keyword" id="1385391">func</span>&nbsp;<span class="ident" id="1385396">runtime_pollClose</span><span class="op" id="1385413">(</span><span class="ident" id="1385414">ctx</span>&nbsp;<span class="builtintype" id="1385418">uintptr</span><span class="op" id="1385425">)</span><br>
<span class="lineno"></span><span class="keyword" id="1385427">func</span>&nbsp;<span class="ident" id="1385432">runtime_pollWait</span><span class="op" id="1385448">(</span><span class="ident" id="1385449">ctx</span>&nbsp;<span class="builtintype" id="1385453">uintptr</span><span class="op" id="1385460">,</span>&nbsp;<span class="ident" id="1385462">mode</span>&nbsp;<span class="builtintype" id="1385467">int</span><span class="op" id="1385470">)</span>&nbsp;<span class="builtintype" id="1385472">int</span><br>
<span class="lineno"></span><span class="keyword" id="1385476">func</span>&nbsp;<span class="ident" id="1385481">runtime_pollWaitCanceled</span><span class="op" id="1385505">(</span><span class="ident" id="1385506">ctx</span>&nbsp;<span class="builtintype" id="1385510">uintptr</span><span class="op" id="1385517">,</span>&nbsp;<span class="ident" id="1385519">mode</span>&nbsp;<span class="builtintype" id="1385524">int</span><span class="op" id="1385527">)</span>&nbsp;<span class="builtintype" id="1385529">int</span><br>
<span class="lineno"></span><span class="keyword" id="1385533">func</span>&nbsp;<span class="ident" id="1385538">runtime_pollReset</span><span class="op" id="1385555">(</span><span class="ident" id="1385556">ctx</span>&nbsp;<span class="builtintype" id="1385560">uintptr</span><span class="op" id="1385567">,</span>&nbsp;<span class="ident" id="1385569">mode</span>&nbsp;<span class="builtintype" id="1385574">int</span><span class="op" id="1385577">)</span>&nbsp;<span class="builtintype" id="1385579">int</span><br>
<span class="lineno"></span><span class="keyword" id="1385583">func</span>&nbsp;<span class="ident" id="1385588">runtime_pollSetDeadline</span><span class="op" id="1385611">(</span><span class="ident" id="1385612">ctx</span>&nbsp;<span class="builtintype" id="1385616">uintptr</span><span class="op" id="1385623">,</span>&nbsp;<span class="ident" id="1385625">d</span>&nbsp;<span class="ident" id="1385627">int64</span><span class="op" id="1385632">,</span>&nbsp;<span class="ident" id="1385634">mode</span>&nbsp;<span class="builtintype" id="1385639">int</span><span class="op" id="1385642">)</span><br>
<span class="lineno">25</span><span class="keyword" id="1385644">func</span>&nbsp;<span class="ident" id="1385649">runtime_pollUnblock</span><span class="op" id="1385668">(</span><span class="ident" id="1385669">ctx</span>&nbsp;<span class="builtintype" id="1385673">uintptr</span><span class="op" id="1385680">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1385683">type</span>&nbsp;<span class="ident" id="1385688">pollDesc</span>&nbsp;<span class="keyword" id="1385697">struct</span>&nbsp;<span class="op" id="1385704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1385707">runtimeCtx</span>&nbsp;<span class="builtintype" id="1385718">uintptr</span><br>
<span class="lineno"></span><span class="op" id="1385726">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="1385729">var</span>&nbsp;<span class="ident" id="1385733">serverInit</span>&nbsp;<span class="ident" id="1385744"><a href="/net/fd_poll_runtime.go.html#1385179">sync</a></span><span class="op" id="1385748">.</span><span class="ident" id="1385749">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1385755">func</span>&nbsp;<span class="op" id="1385760">(</span><span class="ident" id="1385761">pd</span>&nbsp;<span class="op" id="1385764">*</span><span class="ident" id="1385765"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1385773">)</span>&nbsp;<span class="ident" id="1385775">Init</span><span class="op" id="1385779">(</span><span class="ident" id="1385780">fd</span>&nbsp;<span class="op" id="1385783">*</span><span class="ident" id="1385784"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1385789">)</span>&nbsp;<span class="builtintype" id="1385791">error</span>&nbsp;<span class="op" id="1385797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1385800"><a href="/net/fd_poll_runtime.go.html#1385733">serverInit</a></span><span class="op" id="1385810">.</span><span class="ident" id="1385811">Do</span><span class="op" id="1385813">(</span><span class="ident" id="1385814"><a href="/net/fd_poll_runtime.go.html#1385317">runtime_pollServerInit</a></span><span class="op" id="1385836">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1385839">ctx</span><span class="op" id="1385842">,</span>&nbsp;<span class="ident" id="1385844">errno</span>&nbsp;<span class="op" id="1385850">:=</span>&nbsp;<span class="ident" id="1385853"><a href="/net/fd_poll_runtime.go.html#1385347">runtime_pollOpen</a></span><span class="op" id="1385869">(</span><span class="builtintype" id="1385870">uintptr</span><span class="op" id="1385877">(</span><span class="ident" id="1385878"><a href="/net/fd_poll_runtime.go.html#1385780">fd</a></span><span class="op" id="1385880">.</span><span class="ident" id="1385881">sysfd</span><span class="op" id="1385886">)</span><span class="op" id="1385887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1385890">if</span>&nbsp;<span class="ident" id="1385893"><a href="/net/fd_poll_runtime.go.html#1385844">errno</a></span>&nbsp;<span class="op" id="1385899">!=</span>&nbsp;<span class="num" id="1385902">0</span>&nbsp;<span class="op" id="1385904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1385908">return</span>&nbsp;<span class="ident" id="1385915"><a href="/net/fd_poll_runtime.go.html#1385187">syscall</a></span><span class="op" id="1385922">.</span><span class="ident" id="1385923">Errno</span><span class="op" id="1385928">(</span><span class="ident" id="1385929"><a href="/net/fd_poll_runtime.go.html#1385844">errno</a></span><span class="op" id="1385934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1385937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1385940"><a href="/net/fd_poll_runtime.go.html#1385761">pd</a></span><span class="op" id="1385942">.</span><span class="ident" id="1385943">runtimeCtx</span>&nbsp;<span class="op" id="1385954">=</span>&nbsp;<span class="ident" id="1385956"><a href="/net/fd_poll_runtime.go.html#1385839">ctx</a></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1385961">return</span>&nbsp;<span class="ident" id="1385968">nil</span><br>
<span class="lineno"></span><span class="op" id="1385972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1385975">func</span>&nbsp;<span class="op" id="1385980">(</span><span class="ident" id="1385981">pd</span>&nbsp;<span class="op" id="1385984">*</span><span class="ident" id="1385985"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1385993">)</span>&nbsp;<span class="ident" id="1385995">Close</span><span class="op" id="1386000">(</span><span class="op" id="1386001">)</span>&nbsp;<span class="op" id="1386003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386006">if</span>&nbsp;<span class="ident" id="1386009"><a href="/net/fd_poll_runtime.go.html#1385981">pd</a></span><span class="op" id="1386011">.</span><span class="ident" id="1386012">runtimeCtx</span>&nbsp;<span class="op" id="1386023">==</span>&nbsp;<span class="num" id="1386026">0</span>&nbsp;<span class="op" id="1386028">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386032">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1386040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1386043"><a href="/net/fd_poll_runtime.go.html#1385396">runtime_pollClose</a></span><span class="op" id="1386060">(</span><span class="ident" id="1386061"><a href="/net/fd_poll_runtime.go.html#1385981">pd</a></span><span class="op" id="1386063">.</span><span class="ident" id="1386064">runtimeCtx</span><span class="op" id="1386074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1386077"><a href="/net/fd_poll_runtime.go.html#1385981">pd</a></span><span class="op" id="1386079">.</span><span class="ident" id="1386080">runtimeCtx</span>&nbsp;<span class="op" id="1386091">=</span>&nbsp;<span class="num" id="1386093">0</span><br>
<span class="lineno"></span><span class="op" id="1386095">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="1386098">func</span>&nbsp;<span class="op" id="1386103">(</span><span class="ident" id="1386104">pd</span>&nbsp;<span class="op" id="1386107">*</span><span class="ident" id="1386108"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386116">)</span>&nbsp;<span class="ident" id="1386118">Lock</span><span class="op" id="1386122">(</span><span class="op" id="1386123">)</span>&nbsp;<span class="op" id="1386125">{</span><br>
<span class="lineno"></span><span class="op" id="1386127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1386130">func</span>&nbsp;<span class="op" id="1386135">(</span><span class="ident" id="1386136">pd</span>&nbsp;<span class="op" id="1386139">*</span><span class="ident" id="1386140"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386148">)</span>&nbsp;<span class="ident" id="1386150">Unlock</span><span class="op" id="1386156">(</span><span class="op" id="1386157">)</span>&nbsp;<span class="op" id="1386159">{</span><br>
<span class="lineno">55</span><span class="op" id="1386161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1386164">func</span>&nbsp;<span class="op" id="1386169">(</span><span class="ident" id="1386170">pd</span>&nbsp;<span class="op" id="1386173">*</span><span class="ident" id="1386174"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386182">)</span>&nbsp;<span class="ident" id="1386184">Wakeup</span><span class="op" id="1386190">(</span><span class="op" id="1386191">)</span>&nbsp;<span class="op" id="1386193">{</span><br>
<span class="lineno"></span><span class="op" id="1386195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="1386198">//&nbsp;Evict&nbsp;evicts&nbsp;fd&nbsp;from&nbsp;the&nbsp;pending&nbsp;list,&nbsp;unblocking&nbsp;any&nbsp;I/O&nbsp;running&nbsp;on&nbsp;fd.</span><br>
<span class="lineno"></span><span class="comment" id="1386274">//&nbsp;Return&nbsp;value&nbsp;is&nbsp;whether&nbsp;the&nbsp;pollServer&nbsp;should&nbsp;be&nbsp;woken&nbsp;up.</span><br>
<span class="lineno"></span><span class="keyword" id="1386336">func</span>&nbsp;<span class="op" id="1386341">(</span><span class="ident" id="1386342">pd</span>&nbsp;<span class="op" id="1386345">*</span><span class="ident" id="1386346"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386354">)</span>&nbsp;<span class="ident" id="1386356">Evict</span><span class="op" id="1386361">(</span><span class="op" id="1386362">)</span>&nbsp;<span class="builtintype" id="1386364">bool</span>&nbsp;<span class="op" id="1386369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386372">if</span>&nbsp;<span class="ident" id="1386375"><a href="/net/fd_poll_runtime.go.html#1386342">pd</a></span><span class="op" id="1386377">.</span><span class="ident" id="1386378">runtimeCtx</span>&nbsp;<span class="op" id="1386389">==</span>&nbsp;<span class="num" id="1386392">0</span>&nbsp;<span class="op" id="1386394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386398">return</span>&nbsp;<span class="builtintype" id="1386405">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1386412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1386415"><a href="/net/fd_poll_runtime.go.html#1385649">runtime_pollUnblock</a></span><span class="op" id="1386434">(</span><span class="ident" id="1386435"><a href="/net/fd_poll_runtime.go.html#1386342">pd</a></span><span class="op" id="1386437">.</span><span class="ident" id="1386438">runtimeCtx</span><span class="op" id="1386448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386451">return</span>&nbsp;<span class="builtintype" id="1386458">false</span><br>
<span class="lineno"></span><span class="op" id="1386464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="1386467">func</span>&nbsp;<span class="op" id="1386472">(</span><span class="ident" id="1386473">pd</span>&nbsp;<span class="op" id="1386476">*</span><span class="ident" id="1386477"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386485">)</span>&nbsp;<span class="ident" id="1386487">Prepare</span><span class="op" id="1386494">(</span><span class="ident" id="1386495">mode</span>&nbsp;<span class="builtintype" id="1386500">int</span><span class="op" id="1386503">)</span>&nbsp;<span class="builtintype" id="1386505">error</span>&nbsp;<span class="op" id="1386511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1386514">res</span>&nbsp;<span class="op" id="1386518">:=</span>&nbsp;<span class="ident" id="1386521"><a href="/net/fd_poll_runtime.go.html#1385538">runtime_pollReset</a></span><span class="op" id="1386538">(</span><span class="ident" id="1386539"><a href="/net/fd_poll_runtime.go.html#1386473">pd</a></span><span class="op" id="1386541">.</span><span class="ident" id="1386542">runtimeCtx</span><span class="op" id="1386552">,</span>&nbsp;<span class="ident" id="1386554"><a href="/net/fd_poll_runtime.go.html#1386495">mode</a></span><span class="op" id="1386558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386561">return</span>&nbsp;<span class="ident" id="1386568"><a href="/net/fd_poll_runtime.go.html#1387202">convertErr</a></span><span class="op" id="1386578">(</span><span class="ident" id="1386579"><a href="/net/fd_poll_runtime.go.html#1386514">res</a></span><span class="op" id="1386582">)</span><br>
<span class="lineno"></span><span class="op" id="1386584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="1386587">func</span>&nbsp;<span class="op" id="1386592">(</span><span class="ident" id="1386593">pd</span>&nbsp;<span class="op" id="1386596">*</span><span class="ident" id="1386597"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386605">)</span>&nbsp;<span class="ident" id="1386607">PrepareRead</span><span class="op" id="1386618">(</span><span class="op" id="1386619">)</span>&nbsp;<span class="builtintype" id="1386621">error</span>&nbsp;<span class="op" id="1386627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386630">return</span>&nbsp;<span class="ident" id="1386637"><a href="/net/fd_poll_runtime.go.html#1386593">pd</a></span><span class="op" id="1386639">.</span><span class="ident" id="1386640">Prepare</span><span class="op" id="1386647">(</span><span class="string" id="1386648">&#39;r&#39;</span><span class="op" id="1386651">)</span><br>
<span class="lineno"></span><span class="op" id="1386653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1386656">func</span>&nbsp;<span class="op" id="1386661">(</span><span class="ident" id="1386662">pd</span>&nbsp;<span class="op" id="1386665">*</span><span class="ident" id="1386666"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386674">)</span>&nbsp;<span class="ident" id="1386676">PrepareWrite</span><span class="op" id="1386688">(</span><span class="op" id="1386689">)</span>&nbsp;<span class="builtintype" id="1386691">error</span>&nbsp;<span class="op" id="1386697">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386700">return</span>&nbsp;<span class="ident" id="1386707"><a href="/net/fd_poll_runtime.go.html#1386662">pd</a></span><span class="op" id="1386709">.</span><span class="ident" id="1386710">Prepare</span><span class="op" id="1386717">(</span><span class="string" id="1386718">&#39;w&#39;</span><span class="op" id="1386721">)</span><br>
<span class="lineno"></span><span class="op" id="1386723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1386726">func</span>&nbsp;<span class="op" id="1386731">(</span><span class="ident" id="1386732">pd</span>&nbsp;<span class="op" id="1386735">*</span><span class="ident" id="1386736"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386744">)</span>&nbsp;<span class="ident" id="1386746">Wait</span><span class="op" id="1386750">(</span><span class="ident" id="1386751">mode</span>&nbsp;<span class="builtintype" id="1386756">int</span><span class="op" id="1386759">)</span>&nbsp;<span class="builtintype" id="1386761">error</span>&nbsp;<span class="op" id="1386767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1386770">res</span>&nbsp;<span class="op" id="1386774">:=</span>&nbsp;<span class="ident" id="1386777"><a href="/net/fd_poll_runtime.go.html#1385432">runtime_pollWait</a></span><span class="op" id="1386793">(</span><span class="ident" id="1386794"><a href="/net/fd_poll_runtime.go.html#1386732">pd</a></span><span class="op" id="1386796">.</span><span class="ident" id="1386797">runtimeCtx</span><span class="op" id="1386807">,</span>&nbsp;<span class="ident" id="1386809"><a href="/net/fd_poll_runtime.go.html#1386751">mode</a></span><span class="op" id="1386813">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386816">return</span>&nbsp;<span class="ident" id="1386823"><a href="/net/fd_poll_runtime.go.html#1387202">convertErr</a></span><span class="op" id="1386833">(</span><span class="ident" id="1386834"><a href="/net/fd_poll_runtime.go.html#1386770">res</a></span><span class="op" id="1386837">)</span><br>
<span class="lineno"></span><span class="op" id="1386839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1386842">func</span>&nbsp;<span class="op" id="1386847">(</span><span class="ident" id="1386848">pd</span>&nbsp;<span class="op" id="1386851">*</span><span class="ident" id="1386852"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386860">)</span>&nbsp;<span class="ident" id="1386862">WaitRead</span><span class="op" id="1386870">(</span><span class="op" id="1386871">)</span>&nbsp;<span class="builtintype" id="1386873">error</span>&nbsp;<span class="op" id="1386879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386882">return</span>&nbsp;<span class="ident" id="1386889"><a href="/net/fd_poll_runtime.go.html#1386848">pd</a></span><span class="op" id="1386891">.</span><span class="ident" id="1386892">Wait</span><span class="op" id="1386896">(</span><span class="string" id="1386897">&#39;r&#39;</span><span class="op" id="1386900">)</span><br>
<span class="lineno">90</span><span class="op" id="1386902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1386905">func</span>&nbsp;<span class="op" id="1386910">(</span><span class="ident" id="1386911">pd</span>&nbsp;<span class="op" id="1386914">*</span><span class="ident" id="1386915"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386923">)</span>&nbsp;<span class="ident" id="1386925">WaitWrite</span><span class="op" id="1386934">(</span><span class="op" id="1386935">)</span>&nbsp;<span class="builtintype" id="1386937">error</span>&nbsp;<span class="op" id="1386943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1386946">return</span>&nbsp;<span class="ident" id="1386953"><a href="/net/fd_poll_runtime.go.html#1386911">pd</a></span><span class="op" id="1386955">.</span><span class="ident" id="1386956">Wait</span><span class="op" id="1386960">(</span><span class="string" id="1386961">&#39;w&#39;</span><span class="op" id="1386964">)</span><br>
<span class="lineno"></span><span class="op" id="1386966">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="1386969">func</span>&nbsp;<span class="op" id="1386974">(</span><span class="ident" id="1386975">pd</span>&nbsp;<span class="op" id="1386978">*</span><span class="ident" id="1386979"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1386987">)</span>&nbsp;<span class="ident" id="1386989">WaitCanceled</span><span class="op" id="1387001">(</span><span class="ident" id="1387002">mode</span>&nbsp;<span class="builtintype" id="1387007">int</span><span class="op" id="1387010">)</span>&nbsp;<span class="op" id="1387012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1387015"><a href="/net/fd_poll_runtime.go.html#1385481">runtime_pollWaitCanceled</a></span><span class="op" id="1387039">(</span><span class="ident" id="1387040"><a href="/net/fd_poll_runtime.go.html#1386975">pd</a></span><span class="op" id="1387042">.</span><span class="ident" id="1387043">runtimeCtx</span><span class="op" id="1387053">,</span>&nbsp;<span class="ident" id="1387055"><a href="/net/fd_poll_runtime.go.html#1387002">mode</a></span><span class="op" id="1387059">)</span><br>
<span class="lineno"></span><span class="op" id="1387061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="1387064">func</span>&nbsp;<span class="op" id="1387069">(</span><span class="ident" id="1387070">pd</span>&nbsp;<span class="op" id="1387073">*</span><span class="ident" id="1387074"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1387082">)</span>&nbsp;<span class="ident" id="1387084">WaitCanceledRead</span><span class="op" id="1387100">(</span><span class="op" id="1387101">)</span>&nbsp;<span class="op" id="1387103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1387106"><a href="/net/fd_poll_runtime.go.html#1387070">pd</a></span><span class="op" id="1387108">.</span><span class="ident" id="1387109">WaitCanceled</span><span class="op" id="1387121">(</span><span class="string" id="1387122">&#39;r&#39;</span><span class="op" id="1387125">)</span><br>
<span class="lineno"></span><span class="op" id="1387127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1387130">func</span>&nbsp;<span class="op" id="1387135">(</span><span class="ident" id="1387136">pd</span>&nbsp;<span class="op" id="1387139">*</span><span class="ident" id="1387140"><a href="/net/fd_poll_runtime.go.html#1385688">pollDesc</a></span><span class="op" id="1387148">)</span>&nbsp;<span class="ident" id="1387150">WaitCanceledWrite</span><span class="op" id="1387167">(</span><span class="op" id="1387168">)</span>&nbsp;<span class="op" id="1387170">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1387173"><a href="/net/fd_poll_runtime.go.html#1387136">pd</a></span><span class="op" id="1387175">.</span><span class="ident" id="1387176">WaitCanceled</span><span class="op" id="1387188">(</span><span class="string" id="1387189">&#39;w&#39;</span><span class="op" id="1387192">)</span><br>
<span class="lineno"></span><span class="op" id="1387194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1387197">func</span>&nbsp;<span class="ident" id="1387202">convertErr</span><span class="op" id="1387212">(</span><span class="ident" id="1387213">res</span>&nbsp;<span class="builtintype" id="1387217">int</span><span class="op" id="1387220">)</span>&nbsp;<span class="builtintype" id="1387222">error</span>&nbsp;<span class="op" id="1387228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387231">switch</span>&nbsp;<span class="ident" id="1387238"><a href="/net/fd_poll_runtime.go.html#1387213">res</a></span>&nbsp;<span class="op" id="1387242">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387245">case</span>&nbsp;<span class="num" id="1387250">0</span><span class="op" id="1387251">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387255">return</span>&nbsp;<span class="ident" id="1387262">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387267">case</span>&nbsp;<span class="num" id="1387272">1</span><span class="op" id="1387273">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387277">return</span>&nbsp;<span class="ident" id="1387284"><a href="/net/net.go.html#1472157">errClosing</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387296">case</span>&nbsp;<span class="num" id="1387301">2</span><span class="op" id="1387302">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387306">return</span>&nbsp;<span class="ident" id="1387313"><a href="/net/net.go.html#1472112">errTimeout</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1387325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1387328">println</span><span class="op" id="1387335">(</span><span class="string" id="1387336">&#34;unreachable:&nbsp;&#34;</span><span class="op" id="1387351">,</span>&nbsp;<span class="ident" id="1387353"><a href="/net/fd_poll_runtime.go.html#1387213">res</a></span><span class="op" id="1387356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1387359">panic</span><span class="op" id="1387364">(</span><span class="string" id="1387365">&#34;unreachable&#34;</span><span class="op" id="1387378">)</span><br>
<span class="lineno"></span><span class="op" id="1387380">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="1387383">func</span>&nbsp;<span class="op" id="1387388">(</span><span class="ident" id="1387389">fd</span>&nbsp;<span class="op" id="1387392">*</span><span class="ident" id="1387393"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1387398">)</span>&nbsp;<span class="ident" id="1387400">setDeadline</span><span class="op" id="1387411">(</span><span class="ident" id="1387412">t</span>&nbsp;<span class="ident" id="1387414"><a href="/net/fd_poll_runtime.go.html#1385198">time</a></span><span class="op" id="1387418">.</span><span class="ident" id="1387419">Time</span><span class="op" id="1387423">)</span>&nbsp;<span class="builtintype" id="1387425">error</span>&nbsp;<span class="op" id="1387431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387434">return</span>&nbsp;<span class="ident" id="1387441"><a href="/net/fd_poll_runtime.go.html#1387668">setDeadlineImpl</a></span><span class="op" id="1387456">(</span><span class="ident" id="1387457"><a href="/net/fd_poll_runtime.go.html#1387389">fd</a></span><span class="op" id="1387459">,</span>&nbsp;<span class="ident" id="1387461"><a href="/net/fd_poll_runtime.go.html#1387412">t</a></span><span class="op" id="1387462">,</span>&nbsp;<span class="string" id="1387464">&#39;r&#39;</span><span class="op" id="1387467">+</span><span class="string" id="1387468">&#39;w&#39;</span><span class="op" id="1387471">)</span><br>
<span class="lineno"></span><span class="op" id="1387473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="1387476">func</span>&nbsp;<span class="op" id="1387481">(</span><span class="ident" id="1387482">fd</span>&nbsp;<span class="op" id="1387485">*</span><span class="ident" id="1387486"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1387491">)</span>&nbsp;<span class="ident" id="1387493">setReadDeadline</span><span class="op" id="1387508">(</span><span class="ident" id="1387509">t</span>&nbsp;<span class="ident" id="1387511"><a href="/net/fd_poll_runtime.go.html#1385198">time</a></span><span class="op" id="1387515">.</span><span class="ident" id="1387516">Time</span><span class="op" id="1387520">)</span>&nbsp;<span class="builtintype" id="1387522">error</span>&nbsp;<span class="op" id="1387528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387531">return</span>&nbsp;<span class="ident" id="1387538"><a href="/net/fd_poll_runtime.go.html#1387668">setDeadlineImpl</a></span><span class="op" id="1387553">(</span><span class="ident" id="1387554"><a href="/net/fd_poll_runtime.go.html#1387482">fd</a></span><span class="op" id="1387556">,</span>&nbsp;<span class="ident" id="1387558"><a href="/net/fd_poll_runtime.go.html#1387509">t</a></span><span class="op" id="1387559">,</span>&nbsp;<span class="string" id="1387561">&#39;r&#39;</span><span class="op" id="1387564">)</span><br>
<span class="lineno"></span><span class="op" id="1387566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1387569">func</span>&nbsp;<span class="op" id="1387574">(</span><span class="ident" id="1387575">fd</span>&nbsp;<span class="op" id="1387578">*</span><span class="ident" id="1387579"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1387584">)</span>&nbsp;<span class="ident" id="1387586">setWriteDeadline</span><span class="op" id="1387602">(</span><span class="ident" id="1387603">t</span>&nbsp;<span class="ident" id="1387605"><a href="/net/fd_poll_runtime.go.html#1385198">time</a></span><span class="op" id="1387609">.</span><span class="ident" id="1387610">Time</span><span class="op" id="1387614">)</span>&nbsp;<span class="builtintype" id="1387616">error</span>&nbsp;<span class="op" id="1387622">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387625">return</span>&nbsp;<span class="ident" id="1387632"><a href="/net/fd_poll_runtime.go.html#1387668">setDeadlineImpl</a></span><span class="op" id="1387647">(</span><span class="ident" id="1387648"><a href="/net/fd_poll_runtime.go.html#1387575">fd</a></span><span class="op" id="1387650">,</span>&nbsp;<span class="ident" id="1387652"><a href="/net/fd_poll_runtime.go.html#1387603">t</a></span><span class="op" id="1387653">,</span>&nbsp;<span class="string" id="1387655">&#39;w&#39;</span><span class="op" id="1387658">)</span><br>
<span class="lineno"></span><span class="op" id="1387660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1387663">func</span>&nbsp;<span class="ident" id="1387668">setDeadlineImpl</span><span class="op" id="1387683">(</span><span class="ident" id="1387684">fd</span>&nbsp;<span class="op" id="1387687">*</span><span class="ident" id="1387688"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1387693">,</span>&nbsp;<span class="ident" id="1387695">t</span>&nbsp;<span class="ident" id="1387697"><a href="/net/fd_poll_runtime.go.html#1385198">time</a></span><span class="op" id="1387701">.</span><span class="ident" id="1387702">Time</span><span class="op" id="1387706">,</span>&nbsp;<span class="ident" id="1387708">mode</span>&nbsp;<span class="builtintype" id="1387713">int</span><span class="op" id="1387716">)</span>&nbsp;<span class="builtintype" id="1387718">error</span>&nbsp;<span class="op" id="1387724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1387727">d</span>&nbsp;<span class="op" id="1387729">:=</span>&nbsp;<span class="ident" id="1387732"><a href="/net/fd_poll_runtime.go.html#1385291">runtimeNano</a></span><span class="op" id="1387743">(</span><span class="op" id="1387744">)</span>&nbsp;<span class="op" id="1387746">+</span>&nbsp;<span class="ident" id="1387748">int64</span><span class="op" id="1387753">(</span><span class="ident" id="1387754"><a href="/net/fd_poll_runtime.go.html#1387695">t</a></span><span class="op" id="1387755">.</span><span class="ident" id="1387756">Sub</span><span class="op" id="1387759">(</span><span class="ident" id="1387760"><a href="/net/fd_poll_runtime.go.html#1385198">time</a></span><span class="op" id="1387764">.</span><span class="ident" id="1387765">Now</span><span class="op" id="1387768">(</span><span class="op" id="1387769">)</span><span class="op" id="1387770">)</span><span class="op" id="1387771">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387774">if</span>&nbsp;<span class="ident" id="1387777"><a href="/net/fd_poll_runtime.go.html#1387695">t</a></span><span class="op" id="1387778">.</span><span class="ident" id="1387779">IsZero</span><span class="op" id="1387785">(</span><span class="op" id="1387786">)</span>&nbsp;<span class="op" id="1387788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1387792"><a href="/net/fd_poll_runtime.go.html#1387727">d</a></span>&nbsp;<span class="op" id="1387794">=</span>&nbsp;<span class="num" id="1387796">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1387799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387802">if</span>&nbsp;<span class="ident" id="1387805">err</span>&nbsp;<span class="op" id="1387809">:=</span>&nbsp;<span class="ident" id="1387812"><a href="/net/fd_poll_runtime.go.html#1387684">fd</a></span><span class="op" id="1387814">.</span><span class="ident" id="1387815">incref</span><span class="op" id="1387821">(</span><span class="op" id="1387822">)</span><span class="op" id="1387823">;</span>&nbsp;<span class="ident" id="1387825"><a href="/net/fd_poll_runtime.go.html#1387805">err</a></span>&nbsp;<span class="op" id="1387829">!=</span>&nbsp;<span class="ident" id="1387832">nil</span>&nbsp;<span class="op" id="1387836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387840">return</span>&nbsp;<span class="ident" id="1387847"><a href="/net/fd_poll_runtime.go.html#1387805">err</a></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1387852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1387855"><a href="/net/fd_poll_runtime.go.html#1385588">runtime_pollSetDeadline</a></span><span class="op" id="1387878">(</span><span class="ident" id="1387879"><a href="/net/fd_poll_runtime.go.html#1387684">fd</a></span><span class="op" id="1387881">.</span><span class="ident" id="1387882">pd</span><span class="op" id="1387884">.</span><span class="ident" id="1387885">runtimeCtx</span><span class="op" id="1387895">,</span>&nbsp;<span class="ident" id="1387897"><a href="/net/fd_poll_runtime.go.html#1387727">d</a></span><span class="op" id="1387898">,</span>&nbsp;<span class="ident" id="1387900"><a href="/net/fd_poll_runtime.go.html#1387708">mode</a></span><span class="op" id="1387904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1387907"><a href="/net/fd_poll_runtime.go.html#1387684">fd</a></span><span class="op" id="1387909">.</span><span class="ident" id="1387910">decref</span><span class="op" id="1387916">(</span><span class="op" id="1387917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1387920">return</span>&nbsp;<span class="ident" id="1387927">nil</span><br>
<span class="lineno"></span><span class="op" id="1387931">}</span>
</div>
</body>
</html>
