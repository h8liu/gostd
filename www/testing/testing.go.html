<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6477039">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6477094">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6477148">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6477199">//&nbsp;Package&nbsp;testing&nbsp;provides&nbsp;support&nbsp;for&nbsp;automated&nbsp;testing&nbsp;of&nbsp;Go&nbsp;packages.</span><br>
<span class="lineno"></span><span class="comment" id="6477273">//&nbsp;It&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;used&nbsp;in&nbsp;concert&nbsp;with&nbsp;the&nbsp;``go&nbsp;test&#39;&#39;&nbsp;command,&nbsp;which&nbsp;automates</span><br>
<span class="lineno"></span><span class="comment" id="6477359">//&nbsp;execution&nbsp;of&nbsp;any&nbsp;function&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="6477400">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;TestXxx(*testing.T)</span><br>
<span class="lineno"></span><span class="comment" id="6477432">//&nbsp;where&nbsp;Xxx&nbsp;can&nbsp;be&nbsp;any&nbsp;alphanumeric&nbsp;string&nbsp;(but&nbsp;the&nbsp;first&nbsp;letter&nbsp;must&nbsp;not&nbsp;be&nbsp;in</span><br>
<span class="lineno">10</span><span class="comment" id="6477513">//&nbsp;[a-z])&nbsp;and&nbsp;serves&nbsp;to&nbsp;identify&nbsp;the&nbsp;test&nbsp;routine.</span><br>
<span class="lineno"></span><span class="comment" id="6477564">//</span><br>
<span class="lineno"></span><span class="comment" id="6477567">//&nbsp;Within&nbsp;these&nbsp;functions,&nbsp;use&nbsp;the&nbsp;Error,&nbsp;Fail&nbsp;or&nbsp;related&nbsp;methods&nbsp;to&nbsp;signal&nbsp;failure.</span><br>
<span class="lineno"></span><span class="comment" id="6477652">//</span><br>
<span class="lineno"></span><span class="comment" id="6477655">//&nbsp;To&nbsp;write&nbsp;a&nbsp;new&nbsp;test&nbsp;suite,&nbsp;create&nbsp;a&nbsp;file&nbsp;whose&nbsp;name&nbsp;ends&nbsp;_test.go&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="6477729">//&nbsp;contains&nbsp;the&nbsp;TestXxx&nbsp;functions&nbsp;as&nbsp;described&nbsp;here.&nbsp;Put&nbsp;the&nbsp;file&nbsp;in&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="6477807">//&nbsp;package&nbsp;as&nbsp;the&nbsp;one&nbsp;being&nbsp;tested.&nbsp;The&nbsp;file&nbsp;will&nbsp;be&nbsp;excluded&nbsp;from&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="6477882">//&nbsp;package&nbsp;builds&nbsp;but&nbsp;will&nbsp;be&nbsp;included&nbsp;when&nbsp;the&nbsp;``go&nbsp;test&#39;&#39;&nbsp;command&nbsp;is&nbsp;run.</span><br>
<span class="lineno"></span><span class="comment" id="6477958">//&nbsp;For&nbsp;more&nbsp;detail,&nbsp;run&nbsp;``go&nbsp;help&nbsp;test&#39;&#39;&nbsp;and&nbsp;``go&nbsp;help&nbsp;testflag&#39;&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6478025">//</span><br>
<span class="lineno">20</span><span class="comment" id="6478028">//&nbsp;Tests&nbsp;and&nbsp;benchmarks&nbsp;may&nbsp;be&nbsp;skipped&nbsp;if&nbsp;not&nbsp;applicable&nbsp;with&nbsp;a&nbsp;call&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6478100">//&nbsp;the&nbsp;Skip&nbsp;method&nbsp;of&nbsp;*T&nbsp;and&nbsp;*B:</span><br>
<span class="lineno"></span><span class="comment" id="6478133">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;TestTimeConsuming(t&nbsp;*testing.T)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6478179">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;testing.Short()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6478211">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.Skip(&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode.&#34;)</span><br>
<span class="lineno">25</span><span class="comment" id="6478265">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6478278">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br>
<span class="lineno"></span><span class="comment" id="6478293">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6478302">//</span><br>
<span class="lineno"></span><span class="comment" id="6478305">//&nbsp;Benchmarks</span><br>
<span class="lineno">30</span><span class="comment" id="6478319">//</span><br>
<span class="lineno"></span><span class="comment" id="6478322">//&nbsp;Functions&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="6478347">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkXxx(*testing.B)</span><br>
<span class="lineno"></span><span class="comment" id="6478384">//&nbsp;are&nbsp;considered&nbsp;benchmarks,&nbsp;and&nbsp;are&nbsp;executed&nbsp;by&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="6478461">//&nbsp;its&nbsp;-bench&nbsp;flag&nbsp;is&nbsp;provided.&nbsp;Benchmarks&nbsp;are&nbsp;run&nbsp;sequentially.</span><br>
<span class="lineno">35</span><span class="comment" id="6478526">//</span><br>
<span class="lineno"></span><span class="comment" id="6478529">//&nbsp;For&nbsp;a&nbsp;description&nbsp;of&nbsp;the&nbsp;testing&nbsp;flags,&nbsp;see</span><br>
<span class="lineno"></span><span class="comment" id="6478576">//&nbsp;http://golang.org/cmd/go/#hdr-Description_of_testing_flags.</span><br>
<span class="lineno"></span><span class="comment" id="6478639">//</span><br>
<span class="lineno"></span><span class="comment" id="6478642">//&nbsp;A&nbsp;sample&nbsp;benchmark&nbsp;function&nbsp;looks&nbsp;like&nbsp;this:</span><br>
<span class="lineno">40</span><span class="comment" id="6478690">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkHello(b&nbsp;*testing.B)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6478733">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;b.N;&nbsp;i++&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6478771">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Sprintf(&#34;hello&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="6478807">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6478820">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno">45</span><span class="comment" id="6478829">//</span><br>
<span class="lineno"></span><span class="comment" id="6478832">//&nbsp;The&nbsp;benchmark&nbsp;function&nbsp;must&nbsp;run&nbsp;the&nbsp;target&nbsp;code&nbsp;b.N&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="6478894">//&nbsp;During&nbsp;benchark&nbsp;execution,&nbsp;b.N&nbsp;is&nbsp;adjusted&nbsp;until&nbsp;the&nbsp;benchmark&nbsp;function&nbsp;lasts</span><br>
<span class="lineno"></span><span class="comment" id="6478975">//&nbsp;long&nbsp;enough&nbsp;to&nbsp;be&nbsp;timed&nbsp;reliably.&nbsp;&nbsp;The&nbsp;output</span><br>
<span class="lineno"></span><span class="comment" id="6479024">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BenchmarkHello&nbsp;&nbsp;&nbsp;&nbsp;10000000&nbsp;&nbsp;&nbsp;&nbsp;282&nbsp;ns/op</span><br>
<span class="lineno">50</span><span class="comment" id="6479071">//&nbsp;means&nbsp;that&nbsp;the&nbsp;loop&nbsp;ran&nbsp;10000000&nbsp;times&nbsp;at&nbsp;a&nbsp;speed&nbsp;of&nbsp;282&nbsp;ns&nbsp;per&nbsp;loop.</span><br>
<span class="lineno"></span><span class="comment" id="6479144">//</span><br>
<span class="lineno"></span><span class="comment" id="6479147">//&nbsp;If&nbsp;a&nbsp;benchmark&nbsp;needs&nbsp;some&nbsp;expensive&nbsp;setup&nbsp;before&nbsp;running,&nbsp;the&nbsp;timer</span><br>
<span class="lineno"></span><span class="comment" id="6479218">//&nbsp;may&nbsp;be&nbsp;reset:</span><br>
<span class="lineno"></span><span class="comment" id="6479235">//</span><br>
<span class="lineno">55</span><span class="comment" id="6479238">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkBigLen(b&nbsp;*testing.B)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6479282">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;big&nbsp;:=&nbsp;NewBig()</span><br>
<span class="lineno"></span><span class="comment" id="6479309">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.ResetTimer()</span><br>
<span class="lineno"></span><span class="comment" id="6479335">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;b.N;&nbsp;i++&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6479373">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;big.Len()</span><br>
<span class="lineno">60</span><span class="comment" id="6479398">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6479411">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6479420">//</span><br>
<span class="lineno"></span><span class="comment" id="6479423">//&nbsp;If&nbsp;a&nbsp;benchmark&nbsp;needs&nbsp;to&nbsp;test&nbsp;performance&nbsp;in&nbsp;a&nbsp;parallel&nbsp;setting,&nbsp;it&nbsp;may&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="6479501">//&nbsp;the&nbsp;RunParallel&nbsp;helper&nbsp;function;&nbsp;such&nbsp;benchmarks&nbsp;are&nbsp;intended&nbsp;to&nbsp;be&nbsp;used&nbsp;with</span><br>
<span class="lineno">65</span><span class="comment" id="6479582">//&nbsp;the&nbsp;go&nbsp;test&nbsp;-cpu&nbsp;flag:</span><br>
<span class="lineno"></span><span class="comment" id="6479608">//</span><br>
<span class="lineno"></span><span class="comment" id="6479611">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkTemplateParallel(b&nbsp;*testing.B)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6479665">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;templ&nbsp;:=&nbsp;template.Must(template.New(&#34;test&#34;).Parse(&#34;Hello,&nbsp;{{.}}!&#34;))</span><br>
<span class="lineno"></span><span class="comment" id="6479744">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.RunParallel(func(pb&nbsp;*testing.PB)&nbsp;{</span><br>
<span class="lineno">70</span><span class="comment" id="6479792">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;buf&nbsp;bytes.Buffer</span><br>
<span class="lineno"></span><span class="comment" id="6479828">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pb.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6479859">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buf.Reset()</span><br>
<span class="lineno"></span><span class="comment" id="6479890">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;templ.Execute(&amp;buf,&nbsp;&#34;World&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="6479938">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno">75</span><span class="comment" id="6479955">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span><br>
<span class="lineno"></span><span class="comment" id="6479969">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6479978">//</span><br>
<span class="lineno"></span><span class="comment" id="6479981">//&nbsp;Examples</span><br>
<span class="lineno"></span><span class="comment" id="6479993">//</span><br>
<span class="lineno">80</span><span class="comment" id="6479996">//&nbsp;The&nbsp;package&nbsp;also&nbsp;runs&nbsp;and&nbsp;verifies&nbsp;example&nbsp;code.&nbsp;Example&nbsp;functions&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="6480070">//&nbsp;include&nbsp;a&nbsp;concluding&nbsp;line&nbsp;comment&nbsp;that&nbsp;begins&nbsp;with&nbsp;&#34;Output:&#34;&nbsp;and&nbsp;is&nbsp;compared&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6480155">//&nbsp;the&nbsp;standard&nbsp;output&nbsp;of&nbsp;the&nbsp;function&nbsp;when&nbsp;the&nbsp;tests&nbsp;are&nbsp;run.&nbsp;(The&nbsp;comparison</span><br>
<span class="lineno"></span><span class="comment" id="6480234">//&nbsp;ignores&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space.)&nbsp;These&nbsp;are&nbsp;examples&nbsp;of&nbsp;an&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="6480308">//</span><br>
<span class="lineno">85</span><span class="comment" id="6480311">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleHello()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6480340">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&#34;hello&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="6480376">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Output:&nbsp;hello</span><br>
<span class="lineno"></span><span class="comment" id="6480408">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6480417">//</span><br>
<span class="lineno">90</span><span class="comment" id="6480420">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleSalutations()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="6480455">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&#34;hello,&nbsp;and&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="6480496">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&#34;goodbye&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="6480534">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Output:</span><br>
<span class="lineno"></span><span class="comment" id="6480560">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;hello,&nbsp;and</span><br>
<span class="lineno">95</span><span class="comment" id="6480589">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;goodbye</span><br>
<span class="lineno"></span><span class="comment" id="6480615">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6480624">//</span><br>
<span class="lineno"></span><span class="comment" id="6480627">//&nbsp;Example&nbsp;functions&nbsp;without&nbsp;output&nbsp;comments&nbsp;are&nbsp;compiled&nbsp;but&nbsp;not&nbsp;executed.</span><br>
<span class="lineno"></span><span class="comment" id="6480703">//</span><br>
<span class="lineno">100</span><span class="comment" id="6480706">//&nbsp;The&nbsp;naming&nbsp;convention&nbsp;to&nbsp;declare&nbsp;examples&nbsp;for&nbsp;the&nbsp;package,&nbsp;a&nbsp;function&nbsp;F,&nbsp;a&nbsp;type&nbsp;T&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6480795">//&nbsp;method&nbsp;M&nbsp;on&nbsp;type&nbsp;T&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="6480822">//</span><br>
<span class="lineno"></span><span class="comment" id="6480825">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;Example()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6480855">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleF()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno">105</span><span class="comment" id="6480886">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6480917">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT_M()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6480950">//</span><br>
<span class="lineno"></span><span class="comment" id="6480953">//&nbsp;Multiple&nbsp;example&nbsp;functions&nbsp;for&nbsp;a&nbsp;package/type/function/method&nbsp;may&nbsp;be&nbsp;provided&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="6481037">//&nbsp;appending&nbsp;a&nbsp;distinct&nbsp;suffix&nbsp;to&nbsp;the&nbsp;name.&nbsp;The&nbsp;suffix&nbsp;must&nbsp;start&nbsp;with&nbsp;a</span><br>
<span class="lineno">110</span><span class="comment" id="6481110">//&nbsp;lower-case&nbsp;letter.</span><br>
<span class="lineno"></span><span class="comment" id="6481132">//</span><br>
<span class="lineno"></span><span class="comment" id="6481135">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;Example_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6481172">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleF_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6481210">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno">115</span><span class="comment" id="6481248">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT_M_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6481288">//</span><br>
<span class="lineno"></span><span class="comment" id="6481291">//&nbsp;The&nbsp;entire&nbsp;test&nbsp;file&nbsp;is&nbsp;presented&nbsp;as&nbsp;the&nbsp;example&nbsp;when&nbsp;it&nbsp;contains&nbsp;a&nbsp;single</span><br>
<span class="lineno"></span><span class="comment" id="6481369">//&nbsp;example&nbsp;function,&nbsp;at&nbsp;least&nbsp;one&nbsp;other&nbsp;function,&nbsp;type,&nbsp;variable,&nbsp;or&nbsp;constant</span><br>
<span class="lineno"></span><span class="comment" id="6481447">//&nbsp;declaration,&nbsp;and&nbsp;no&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;functions.</span><br>
<span class="lineno">120</span><span class="comment" id="6481499">//</span><br>
<span class="lineno"></span><span class="comment" id="6481502">//&nbsp;Main</span><br>
<span class="lineno"></span><span class="comment" id="6481510">//</span><br>
<span class="lineno"></span><span class="comment" id="6481513">//&nbsp;It&nbsp;is&nbsp;sometimes&nbsp;necessary&nbsp;for&nbsp;a&nbsp;test&nbsp;program&nbsp;to&nbsp;do&nbsp;extra&nbsp;setup&nbsp;or&nbsp;teardown</span><br>
<span class="lineno"></span><span class="comment" id="6481591">//&nbsp;before&nbsp;or&nbsp;after&nbsp;testing.&nbsp;It&nbsp;is&nbsp;also&nbsp;sometimes&nbsp;necessary&nbsp;for&nbsp;a&nbsp;test&nbsp;to&nbsp;control</span><br>
<span class="lineno">125</span><span class="comment" id="6481672">//&nbsp;which&nbsp;code&nbsp;runs&nbsp;on&nbsp;the&nbsp;main&nbsp;thread.&nbsp;To&nbsp;support&nbsp;these&nbsp;and&nbsp;other&nbsp;cases,</span><br>
<span class="lineno"></span><span class="comment" id="6481745">//&nbsp;if&nbsp;a&nbsp;test&nbsp;file&nbsp;contains&nbsp;a&nbsp;function:</span><br>
<span class="lineno"></span><span class="comment" id="6481784">//</span><br>
<span class="lineno"></span><span class="comment" id="6481787">//&nbsp;&nbsp;&nbsp;&nbspfunc&nbsp;TestMain(m&nbsp;*testing.M)</span><br>
<span class="lineno"></span><span class="comment" id="6481818">//</span><br>
<span class="lineno">130</span><span class="comment" id="6481821">//&nbsp;then&nbsp;the&nbsp;generated&nbsp;test&nbsp;will&nbsp;call&nbsp;TestMain(m)&nbsp;instead&nbsp;of&nbsp;running&nbsp;the&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="6481899">//&nbsp;directly.&nbsp;TestMain&nbsp;runs&nbsp;in&nbsp;the&nbsp;main&nbsp;goroutine&nbsp;and&nbsp;can&nbsp;do&nbsp;whatever&nbsp;setup</span><br>
<span class="lineno"></span><span class="comment" id="6481974">//&nbsp;and&nbsp;teardown&nbsp;is&nbsp;necessary&nbsp;around&nbsp;a&nbsp;call&nbsp;to&nbsp;m.Run.&nbsp;It&nbsp;should&nbsp;then&nbsp;call</span><br>
<span class="lineno"></span><span class="comment" id="6482047">//&nbsp;os.Exit&nbsp;with&nbsp;the&nbsp;result&nbsp;of&nbsp;m.Run.</span><br>
<span class="lineno"></span><span class="comment" id="6482084">//</span><br>
<span class="lineno">135</span><span class="comment" id="6482087">//&nbsp;The&nbsp;minimal&nbsp;implementation&nbsp;of&nbsp;TestMain&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="6482133">//</span><br>
<span class="lineno"></span><span class="comment" id="6482136">//&nbsp;&nbsp;&nbsp;&nbspfunc&nbsp;TestMain(m&nbsp;*testing.M)&nbsp;{&nbsp;os.Exit(m.Run())&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="6482188">//</span><br>
<span class="lineno"></span><span class="comment" id="6482191">//&nbsp;In&nbsp;effect,&nbsp;that&nbsp;is&nbsp;the&nbsp;implementation&nbsp;used&nbsp;when&nbsp;no&nbsp;TestMain&nbsp;is&nbsp;explicitly&nbsp;defined.</span><br>
<span class="lineno">140</span><span class="keyword" id="6482277">package</span>&nbsp;<span class="ident" id="6482285">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6482294">import</span>&nbsp;<span class="op" id="6482301">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6482304">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6482313">&#34;flag&#34;</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6482321">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6482328">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6482334">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6482345">&#34;runtime/pprof&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6482362">&#34;strconv&#34;</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6482373">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6482384">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6482392">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6482399">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="6482402">var</span>&nbsp;<span class="op" id="6482406">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6482409">//&nbsp;The&nbsp;short&nbsp;flag&nbsp;requests&nbsp;that&nbsp;tests&nbsp;run&nbsp;more&nbsp;quickly,&nbsp;but&nbsp;its&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6482488">//&nbsp;is&nbsp;provided&nbsp;by&nbsp;test&nbsp;writers&nbsp;themselves.&nbsp;&nbsp;The&nbsp;testing&nbsp;package&nbsp;is&nbsp;just&nbsp;its</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6482565">//&nbsp;home.&nbsp;&nbsp;The&nbsp;all.bash&nbsp;installation&nbsp;script&nbsp;sets&nbsp;it&nbsp;to&nbsp;make&nbsp;installation&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6482643">//&nbsp;efficient,&nbsp;but&nbsp;by&nbsp;default&nbsp;the&nbsp;flag&nbsp;is&nbsp;off&nbsp;so&nbsp;a&nbsp;plain&nbsp;&#34;go&nbsp;test&#34;&nbsp;will&nbsp;do&nbsp;a</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6482720">//&nbsp;full&nbsp;test&nbsp;of&nbsp;the&nbsp;package.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482750">short</span>&nbsp;<span class="op" id="6482756">=</span>&nbsp;<span class="ident" id="6482758"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6482762">.</span><span class="ident" id="6482763">Bool</span><span class="op" id="6482767">(</span><span class="string" id="6482768">&#34;test.short&#34;</span><span class="op" id="6482780">,</span>&nbsp;<span class="ident" id="6482782">false</span><span class="op" id="6482787">,</span>&nbsp;<span class="string" id="6482789">&#34;run&nbsp;smaller&nbsp;test&nbsp;suite&nbsp;to&nbsp;save&nbsp;time&#34;</span><span class="op" id="6482826">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6482830">//&nbsp;The&nbsp;directory&nbsp;in&nbsp;which&nbsp;to&nbsp;create&nbsp;profile&nbsp;files&nbsp;and&nbsp;the&nbsp;like.&nbsp;When&nbsp;run&nbsp;from</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6482909">//&nbsp;&#34;go&nbsp;test&#34;,&nbsp;the&nbsp;binary&nbsp;always&nbsp;runs&nbsp;in&nbsp;the&nbsp;source&nbsp;directory&nbsp;for&nbsp;the&nbsp;package;</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6482988">//&nbsp;this&nbsp;flag&nbsp;lets&nbsp;&#34;go&nbsp;test&#34;&nbsp;tell&nbsp;the&nbsp;binary&nbsp;to&nbsp;write&nbsp;the&nbsp;files&nbsp;in&nbsp;the&nbsp;directory&nbsp;where</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6483075">//&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command&nbsp;is&nbsp;run.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483109">outputDir</span>&nbsp;<span class="op" id="6483119">=</span>&nbsp;<span class="ident" id="6483121"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6483125">.</span><span class="ident" id="6483126">String</span><span class="op" id="6483132">(</span><span class="string" id="6483133">&#34;test.outputdir&#34;</span><span class="op" id="6483149">,</span>&nbsp;<span class="string" id="6483151">&#34;&#34;</span><span class="op" id="6483153">,</span>&nbsp;<span class="string" id="6483155">&#34;directory&nbsp;in&nbsp;which&nbsp;to&nbsp;write&nbsp;profiles&#34;</span><span class="op" id="6483193">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6483197">//&nbsp;Report&nbsp;as&nbsp;tests&nbsp;are&nbsp;run;&nbsp;default&nbsp;is&nbsp;silent&nbsp;for&nbsp;success.</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483257">chatty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6483274">=</span>&nbsp;<span class="ident" id="6483276"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6483280">.</span><span class="ident" id="6483281">Bool</span><span class="op" id="6483285">(</span><span class="string" id="6483286">&#34;test.v&#34;</span><span class="op" id="6483294">,</span>&nbsp;<span class="ident" id="6483296">false</span><span class="op" id="6483301">,</span>&nbsp;<span class="string" id="6483303">&#34;verbose:&nbsp;print&nbsp;additional&nbsp;output&#34;</span><span class="op" id="6483337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483340">coverProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6483357">=</span>&nbsp;<span class="ident" id="6483359"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6483363">.</span><span class="ident" id="6483364">String</span><span class="op" id="6483370">(</span><span class="string" id="6483371">&#34;test.coverprofile&#34;</span><span class="op" id="6483390">,</span>&nbsp;<span class="string" id="6483392">&#34;&#34;</span><span class="op" id="6483394">,</span>&nbsp;<span class="string" id="6483396">&#34;write&nbsp;a&nbsp;coverage&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;after&nbsp;execution&#34;</span><span class="op" id="6483456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483459">match</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6483476">=</span>&nbsp;<span class="ident" id="6483478"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6483482">.</span><span class="ident" id="6483483">String</span><span class="op" id="6483489">(</span><span class="string" id="6483490">&#34;test.run&#34;</span><span class="op" id="6483500">,</span>&nbsp;<span class="string" id="6483502">&#34;&#34;</span><span class="op" id="6483504">,</span>&nbsp;<span class="string" id="6483506">&#34;regular&nbsp;expression&nbsp;to&nbsp;select&nbsp;tests&nbsp;and&nbsp;examples&nbsp;to&nbsp;run&#34;</span><span class="op" id="6483562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483565">memProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6483582">=</span>&nbsp;<span class="ident" id="6483584"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6483588">.</span><span class="ident" id="6483589">String</span><span class="op" id="6483595">(</span><span class="string" id="6483596">&#34;test.memprofile&#34;</span><span class="op" id="6483613">,</span>&nbsp;<span class="string" id="6483615">&#34;&#34;</span><span class="op" id="6483617">,</span>&nbsp;<span class="string" id="6483619">&#34;write&nbsp;a&nbsp;memory&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;after&nbsp;execution&#34;</span><span class="op" id="6483677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483680">memProfileRate</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6483697">=</span>&nbsp;<span class="ident" id="6483699"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6483703">.</span><span class="ident" id="6483704">Int</span><span class="op" id="6483707">(</span><span class="string" id="6483708">&#34;test.memprofilerate&#34;</span><span class="op" id="6483729">,</span>&nbsp;<span class="num" id="6483731">0</span><span class="op" id="6483732">,</span>&nbsp;<span class="string" id="6483734">&#34;if&nbsp;&gt;=0,&nbsp;sets&nbsp;runtime.MemProfileRate&#34;</span><span class="op" id="6483771">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483774">cpuProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6483791">=</span>&nbsp;<span class="ident" id="6483793"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6483797">.</span><span class="ident" id="6483798">String</span><span class="op" id="6483804">(</span><span class="string" id="6483805">&#34;test.cpuprofile&#34;</span><span class="op" id="6483822">,</span>&nbsp;<span class="string" id="6483824">&#34;&#34;</span><span class="op" id="6483826">,</span>&nbsp;<span class="string" id="6483828">&#34;write&nbsp;a&nbsp;cpu&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;during&nbsp;execution&#34;</span><span class="op" id="6483884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483887">blockProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6483904">=</span>&nbsp;<span class="ident" id="6483906"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6483910">.</span><span class="ident" id="6483911">String</span><span class="op" id="6483917">(</span><span class="string" id="6483918">&#34;test.blockprofile&#34;</span><span class="op" id="6483937">,</span>&nbsp;<span class="string" id="6483939">&#34;&#34;</span><span class="op" id="6483941">,</span>&nbsp;<span class="string" id="6483943">&#34;write&nbsp;a&nbsp;goroutine&nbsp;blocking&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;after&nbsp;execution&#34;</span><span class="op" id="6484013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484016">blockProfileRate</span>&nbsp;<span class="op" id="6484033">=</span>&nbsp;<span class="ident" id="6484035"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6484039">.</span><span class="ident" id="6484040">Int</span><span class="op" id="6484043">(</span><span class="string" id="6484044">&#34;test.blockprofilerate&#34;</span><span class="op" id="6484067">,</span>&nbsp;<span class="num" id="6484069">1</span><span class="op" id="6484070">,</span>&nbsp;<span class="string" id="6484072">&#34;if&nbsp;&gt;=&nbsp;0,&nbsp;calls&nbsp;runtime.SetBlockProfileRate()&#34;</span><span class="op" id="6484118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484121">timeout</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6484138">=</span>&nbsp;<span class="ident" id="6484140"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6484144">.</span><span class="ident" id="6484145">Duration</span><span class="op" id="6484153">(</span><span class="string" id="6484154">&#34;test.timeout&#34;</span><span class="op" id="6484168">,</span>&nbsp;<span class="num" id="6484170">0</span><span class="op" id="6484171">,</span>&nbsp;<span class="string" id="6484173">&#34;if&nbsp;positive,&nbsp;sets&nbsp;an&nbsp;aggregate&nbsp;time&nbsp;limit&nbsp;for&nbsp;all&nbsp;tests&#34;</span><span class="op" id="6484230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484233">cpuListStr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6484250">=</span>&nbsp;<span class="ident" id="6484252"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6484256">.</span><span class="ident" id="6484257">String</span><span class="op" id="6484263">(</span><span class="string" id="6484264">&#34;test.cpu&#34;</span><span class="op" id="6484274">,</span>&nbsp;<span class="string" id="6484276">&#34;&#34;</span><span class="op" id="6484278">,</span>&nbsp;<span class="string" id="6484280">&#34;comma-separated&nbsp;list&nbsp;of&nbsp;number&nbsp;of&nbsp;CPUs&nbsp;to&nbsp;use&nbsp;for&nbsp;each&nbsp;test&#34;</span><span class="op" id="6484341">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484344">parallel</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6484361">=</span>&nbsp;<span class="ident" id="6484363"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6484367">.</span><span class="ident" id="6484368">Int</span><span class="op" id="6484371">(</span><span class="string" id="6484372">&#34;test.parallel&#34;</span><span class="op" id="6484387">,</span>&nbsp;<span class="ident" id="6484389"><a href="/testing/testing.go.html#6482334">runtime</a></span><span class="op" id="6484396">.</span><span class="ident" id="6484397">GOMAXPROCS</span><span class="op" id="6484407">(</span><span class="num" id="6484408">0</span><span class="op" id="6484409">)</span><span class="op" id="6484410">,</span>&nbsp;<span class="string" id="6484412">&#34;maximum&nbsp;test&nbsp;parallelism&#34;</span><span class="op" id="6484438">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484442">haveExamples</span>&nbsp;<span class="builtintype" id="6484455">bool</span>&nbsp;<span class="comment" id="6484460">//&nbsp;are&nbsp;there&nbsp;examples?</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484485">cpuList</span>&nbsp;<span class="op" id="6484493">[</span><span class="op" id="6484494">]</span><span class="builtintype" id="6484495">int</span><br>
<span class="lineno">185</span><span class="op" id="6484499">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6484502">//&nbsp;common&nbsp;holds&nbsp;the&nbsp;elements&nbsp;common&nbsp;between&nbsp;T&nbsp;and&nbsp;B&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6484558">//&nbsp;captures&nbsp;common&nbsp;methods&nbsp;such&nbsp;as&nbsp;Errorf.</span><br>
<span class="lineno"></span><span class="keyword" id="6484601">type</span>&nbsp;<span class="ident" id="6484606">common</span>&nbsp;<span class="keyword" id="6484613">struct</span>&nbsp;<span class="op" id="6484620">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484623">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6484632"><a href="/testing/testing.go.html#6482384">sync</a></span><span class="op" id="6484636">.</span><span class="ident" id="6484637">RWMutex</span>&nbsp;<span class="comment" id="6484645">//&nbsp;guards&nbsp;output&nbsp;and&nbsp;failed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484674">output</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6484683">[</span><span class="op" id="6484684">]</span><span class="builtintype" id="6484685">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6484696">//&nbsp;Output&nbsp;generated&nbsp;by&nbsp;test&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484739">failed</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6484748">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6484761">//&nbsp;Test&nbsp;or&nbsp;benchmark&nbsp;has&nbsp;failed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484795">skipped</span>&nbsp;&nbsp;<span class="builtintype" id="6484804">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6484817">//&nbsp;Test&nbsp;of&nbsp;benchmark&nbsp;has&nbsp;been&nbsp;skipped.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484857">finished</span>&nbsp;<span class="builtintype" id="6484866">bool</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484873">start</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6484882"><a href="/testing/testing.go.html#6482392">time</a></span><span class="op" id="6484886">.</span><span class="ident" id="6484887">Time</span>&nbsp;<span class="comment" id="6484892">//&nbsp;Time&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;started</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484927">duration</span>&nbsp;<span class="ident" id="6484936"><a href="/testing/testing.go.html#6482392">time</a></span><span class="op" id="6484940">.</span><span class="ident" id="6484941">Duration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484951">self</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6484960">interface</span><span class="op" id="6484969">{</span><span class="op" id="6484970">}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6484977">//&nbsp;To&nbsp;be&nbsp;sent&nbsp;on&nbsp;signal&nbsp;channel&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485021">signal</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6485030">chan</span>&nbsp;<span class="keyword" id="6485035">interface</span><span class="op" id="6485044">{</span><span class="op" id="6485045">}</span>&nbsp;<span class="comment" id="6485047">//&nbsp;Output&nbsp;for&nbsp;serial&nbsp;tests.</span><br>
<span class="lineno">200</span><span class="op" id="6485075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6485078">//&nbsp;Short&nbsp;reports&nbsp;whether&nbsp;the&nbsp;-test.short&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="6485132">func</span>&nbsp;<span class="ident" id="6485137">Short</span><span class="op" id="6485142">(</span><span class="op" id="6485143">)</span>&nbsp;<span class="builtintype" id="6485145">bool</span>&nbsp;<span class="op" id="6485150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6485153">return</span>&nbsp;<span class="op" id="6485160">*</span><span class="ident" id="6485161"><a href="/testing/testing.go.html#6482750">short</a></span><br>
<span class="lineno">205</span><span class="op" id="6485167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6485170">//&nbsp;Verbose&nbsp;reports&nbsp;whether&nbsp;the&nbsp;-test.v&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="6485222">func</span>&nbsp;<span class="ident" id="6485227">Verbose</span><span class="op" id="6485234">(</span><span class="op" id="6485235">)</span>&nbsp;<span class="builtintype" id="6485237">bool</span>&nbsp;<span class="op" id="6485242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6485245">return</span>&nbsp;<span class="op" id="6485252">*</span><span class="ident" id="6485253"><a href="/testing/testing.go.html#6483257">chatty</a></span><br>
<span class="lineno">210</span><span class="op" id="6485260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6485263">//&nbsp;decorate&nbsp;prefixes&nbsp;the&nbsp;string&nbsp;with&nbsp;the&nbsp;file&nbsp;and&nbsp;line&nbsp;of&nbsp;the&nbsp;call&nbsp;site</span><br>
<span class="lineno"></span><span class="comment" id="6485335">//&nbsp;and&nbsp;inserts&nbsp;the&nbsp;final&nbsp;newline&nbsp;if&nbsp;needed&nbsp;and&nbsp;indentation&nbsp;tabs&nbsp;for&nbsp;formatting.</span><br>
<span class="lineno"></span><span class="keyword" id="6485415">func</span>&nbsp;<span class="ident" id="6485420">decorate</span><span class="op" id="6485428">(</span><span class="ident" id="6485429">s</span>&nbsp;<span class="builtintype" id="6485431">string</span><span class="op" id="6485437">)</span>&nbsp;<span class="builtintype" id="6485439">string</span>&nbsp;<span class="op" id="6485446">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485449">_</span><span class="op" id="6485450">,</span>&nbsp;<span class="ident" id="6485452">file</span><span class="op" id="6485456">,</span>&nbsp;<span class="ident" id="6485458">line</span><span class="op" id="6485462">,</span>&nbsp;<span class="ident" id="6485464">ok</span>&nbsp;<span class="op" id="6485467">:=</span>&nbsp;<span class="ident" id="6485470"><a href="/testing/testing.go.html#6482334">runtime</a></span><span class="op" id="6485477">.</span><span class="ident" id="6485478">Caller</span><span class="op" id="6485484">(</span><span class="num" id="6485485">3</span><span class="op" id="6485486">)</span>&nbsp;<span class="comment" id="6485488">//&nbsp;decorate&nbsp;+&nbsp;log&nbsp;+&nbsp;public&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6485526">if</span>&nbsp;<span class="ident" id="6485529"><a href="/testing/testing.go.html#6485464">ok</a></span>&nbsp;<span class="op" id="6485532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6485536">//&nbsp;Truncate&nbsp;file&nbsp;name&nbsp;at&nbsp;last&nbsp;file&nbsp;name&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6485589">if</span>&nbsp;<span class="ident" id="6485592">index</span>&nbsp;<span class="op" id="6485598">:=</span>&nbsp;<span class="ident" id="6485601"><a href="/testing/testing.go.html#6482373">strings</a></span><span class="op" id="6485608">.</span><span class="ident" id="6485609">LastIndex</span><span class="op" id="6485618">(</span><span class="ident" id="6485619"><a href="/testing/testing.go.html#6485452">file</a></span><span class="op" id="6485623">,</span>&nbsp;<span class="string" id="6485625">&#34;/&#34;</span><span class="op" id="6485628">)</span><span class="op" id="6485629">;</span>&nbsp;<span class="ident" id="6485631"><a href="/testing/testing.go.html#6485592">index</a></span>&nbsp;<span class="op" id="6485637">&gt;=</span>&nbsp;<span class="num" id="6485640">0</span>&nbsp;<span class="op" id="6485642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485647"><a href="/testing/testing.go.html#6485452">file</a></span>&nbsp;<span class="op" id="6485652">=</span>&nbsp;<span class="ident" id="6485654"><a href="/testing/testing.go.html#6485452">file</a></span><span class="op" id="6485658">[</span><span class="ident" id="6485659"><a href="/testing/testing.go.html#6485592">index</a></span><span class="op" id="6485664">+</span><span class="num" id="6485665">1</span><span class="op" id="6485666">:</span><span class="op" id="6485667">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485671">}</span>&nbsp;<span class="keyword" id="6485673">else</span>&nbsp;<span class="keyword" id="6485678">if</span>&nbsp;<span class="ident" id="6485681"><a href="/testing/testing.go.html#6485592">index</a></span>&nbsp;<span class="op" id="6485687">=</span>&nbsp;<span class="ident" id="6485689"><a href="/testing/testing.go.html#6482373">strings</a></span><span class="op" id="6485696">.</span><span class="ident" id="6485697">LastIndex</span><span class="op" id="6485706">(</span><span class="ident" id="6485707"><a href="/testing/testing.go.html#6485452">file</a></span><span class="op" id="6485711">,</span>&nbsp;<span class="string" id="6485713">&#34;\\&#34;</span><span class="op" id="6485717">)</span><span class="op" id="6485718">;</span>&nbsp;<span class="ident" id="6485720"><a href="/testing/testing.go.html#6485592">index</a></span>&nbsp;<span class="op" id="6485726">&gt;=</span>&nbsp;<span class="num" id="6485729">0</span>&nbsp;<span class="op" id="6485731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485736"><a href="/testing/testing.go.html#6485452">file</a></span>&nbsp;<span class="op" id="6485741">=</span>&nbsp;<span class="ident" id="6485743"><a href="/testing/testing.go.html#6485452">file</a></span><span class="op" id="6485747">[</span><span class="ident" id="6485748"><a href="/testing/testing.go.html#6485592">index</a></span><span class="op" id="6485753">+</span><span class="num" id="6485754">1</span><span class="op" id="6485755">:</span><span class="op" id="6485756">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485763">}</span>&nbsp;<span class="keyword" id="6485765">else</span>&nbsp;<span class="op" id="6485770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485774"><a href="/testing/testing.go.html#6485452">file</a></span>&nbsp;<span class="op" id="6485779">=</span>&nbsp;<span class="string" id="6485781">&#34;???&#34;</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485789"><a href="/testing/testing.go.html#6485458">line</a></span>&nbsp;<span class="op" id="6485794">=</span>&nbsp;<span class="num" id="6485796">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6485799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485802">buf</span>&nbsp;<span class="op" id="6485806">:=</span>&nbsp;<span class="builtinfunc" id="6485809">new</span><span class="op" id="6485812">(</span><span class="ident" id="6485813"><a href="/testing/testing.go.html#6482304">bytes</a></span><span class="op" id="6485818">.</span><span class="ident" id="6485819">Buffer</span><span class="op" id="6485825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6485828">//&nbsp;Every&nbsp;line&nbsp;is&nbsp;indented&nbsp;at&nbsp;least&nbsp;one&nbsp;tab.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485873"><a href="/testing/testing.go.html#6485802">buf</a></span><span class="op" id="6485876">.</span><span class="ident" id="6485877">WriteByte</span><span class="op" id="6485886">(</span><span class="string" id="6485887">&#39;\t&#39;</span><span class="op" id="6485891">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485894"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6485897">.</span><span class="ident" id="6485898">Fprintf</span><span class="op" id="6485905">(</span><span class="ident" id="6485906"><a href="/testing/testing.go.html#6485802">buf</a></span><span class="op" id="6485909">,</span>&nbsp;<span class="string" id="6485911">&#34;%s:%d:&nbsp;&#34;</span><span class="op" id="6485920">,</span>&nbsp;<span class="ident" id="6485922"><a href="/testing/testing.go.html#6485452">file</a></span><span class="op" id="6485926">,</span>&nbsp;<span class="ident" id="6485928"><a href="/testing/testing.go.html#6485458">line</a></span><span class="op" id="6485932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485935">lines</span>&nbsp;<span class="op" id="6485941">:=</span>&nbsp;<span class="ident" id="6485944"><a href="/testing/testing.go.html#6482373">strings</a></span><span class="op" id="6485951">.</span><span class="ident" id="6485952">Split</span><span class="op" id="6485957">(</span><span class="ident" id="6485958"><a href="/testing/testing.go.html#6485429">s</a></span><span class="op" id="6485959">,</span>&nbsp;<span class="string" id="6485961">&#34;\n&#34;</span><span class="op" id="6485965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6485968">if</span>&nbsp;<span class="ident" id="6485971">l</span>&nbsp;<span class="op" id="6485973">:=</span>&nbsp;<span class="builtinfunc" id="6485976">len</span><span class="op" id="6485979">(</span><span class="ident" id="6485980"><a href="/testing/testing.go.html#6485935">lines</a></span><span class="op" id="6485985">)</span><span class="op" id="6485986">;</span>&nbsp;<span class="ident" id="6485988"><a href="/testing/testing.go.html#6485971">l</a></span>&nbsp;<span class="op" id="6485990">&gt;</span>&nbsp;<span class="num" id="6485992">1</span>&nbsp;<span class="op" id="6485994">&amp;&amp;</span>&nbsp;<span class="ident" id="6485997"><a href="/testing/testing.go.html#6485935">lines</a></span><span class="op" id="6486002">[</span><span class="ident" id="6486003"><a href="/testing/testing.go.html#6485971">l</a></span><span class="op" id="6486004">-</span><span class="num" id="6486005">1</span><span class="op" id="6486006">]</span>&nbsp;<span class="op" id="6486008">==</span>&nbsp;<span class="string" id="6486011">&#34;&#34;</span>&nbsp;<span class="op" id="6486014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486018"><a href="/testing/testing.go.html#6485935">lines</a></span>&nbsp;<span class="op" id="6486024">=</span>&nbsp;<span class="ident" id="6486026"><a href="/testing/testing.go.html#6485935">lines</a></span><span class="op" id="6486031">[</span><span class="op" id="6486032">:</span><span class="ident" id="6486033"><a href="/testing/testing.go.html#6485971">l</a></span><span class="op" id="6486034">-</span><span class="num" id="6486035">1</span><span class="op" id="6486036">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486039">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486042">for</span>&nbsp;<span class="ident" id="6486046">i</span><span class="op" id="6486047">,</span>&nbsp;<span class="ident" id="6486049">line</span>&nbsp;<span class="op" id="6486054">:=</span>&nbsp;<span class="keyword" id="6486057">range</span>&nbsp;<span class="ident" id="6486063"><a href="/testing/testing.go.html#6485935">lines</a></span>&nbsp;<span class="op" id="6486069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486073">if</span>&nbsp;<span class="ident" id="6486076"><a href="/testing/testing.go.html#6486046">i</a></span>&nbsp;<span class="op" id="6486078">&gt;</span>&nbsp;<span class="num" id="6486080">0</span>&nbsp;<span class="op" id="6486082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6486087">//&nbsp;Second&nbsp;and&nbsp;subsequent&nbsp;lines&nbsp;are&nbsp;indented&nbsp;an&nbsp;extra&nbsp;tab.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486148"><a href="/testing/testing.go.html#6485802">buf</a></span><span class="op" id="6486151">.</span><span class="ident" id="6486152">WriteString</span><span class="op" id="6486163">(</span><span class="string" id="6486164">&#34;\n\t\t&#34;</span><span class="op" id="6486172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486176">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486180"><a href="/testing/testing.go.html#6485802">buf</a></span><span class="op" id="6486183">.</span><span class="ident" id="6486184">WriteString</span><span class="op" id="6486195">(</span><span class="ident" id="6486196"><a href="/testing/testing.go.html#6486049">line</a></span><span class="op" id="6486200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486206"><a href="/testing/testing.go.html#6485802">buf</a></span><span class="op" id="6486209">.</span><span class="ident" id="6486210">WriteByte</span><span class="op" id="6486219">(</span><span class="string" id="6486220">&#39;\n&#39;</span><span class="op" id="6486224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486227">return</span>&nbsp;<span class="ident" id="6486234"><a href="/testing/testing.go.html#6485802">buf</a></span><span class="op" id="6486237">.</span><span class="ident" id="6486238">String</span><span class="op" id="6486244">(</span><span class="op" id="6486245">)</span><br>
<span class="lineno"></span><span class="op" id="6486247">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="6486250">//&nbsp;fmtDuration&nbsp;returns&nbsp;a&nbsp;string&nbsp;representing&nbsp;d&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;87.00s&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="6486319">func</span>&nbsp;<span class="ident" id="6486324">fmtDuration</span><span class="op" id="6486335">(</span><span class="ident" id="6486336">d</span>&nbsp;<span class="ident" id="6486338"><a href="/testing/testing.go.html#6482392">time</a></span><span class="op" id="6486342">.</span><span class="ident" id="6486343">Duration</span><span class="op" id="6486351">)</span>&nbsp;<span class="builtintype" id="6486353">string</span>&nbsp;<span class="op" id="6486360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6486363">return</span>&nbsp;<span class="ident" id="6486370"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6486373">.</span><span class="ident" id="6486374">Sprintf</span><span class="op" id="6486381">(</span><span class="string" id="6486382">&#34;%.2fs&#34;</span><span class="op" id="6486389">,</span>&nbsp;<span class="ident" id="6486391"><a href="/testing/testing.go.html#6486336">d</a></span><span class="op" id="6486392">.</span><span class="ident" id="6486393">Seconds</span><span class="op" id="6486400">(</span><span class="op" id="6486401">)</span><span class="op" id="6486402">)</span><br>
<span class="lineno"></span><span class="op" id="6486404">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="6486407">//&nbsp;TB&nbsp;is&nbsp;the&nbsp;interface&nbsp;common&nbsp;to&nbsp;T&nbsp;and&nbsp;B.</span><br>
<span class="lineno"></span><span class="keyword" id="6486449">type</span>&nbsp;<span class="ident" id="6486454">TB</span>&nbsp;<span class="keyword" id="6486457">interface</span>&nbsp;<span class="op" id="6486467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486470">Error</span><span class="op" id="6486475">(</span><span class="ident" id="6486476">args</span>&nbsp;<span class="op" id="6486481">...</span><span class="keyword" id="6486484">interface</span><span class="op" id="6486493">{</span><span class="op" id="6486494">}</span><span class="op" id="6486495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486498">Errorf</span><span class="op" id="6486504">(</span><span class="ident" id="6486505">format</span>&nbsp;<span class="builtintype" id="6486512">string</span><span class="op" id="6486518">,</span>&nbsp;<span class="ident" id="6486520">args</span>&nbsp;<span class="op" id="6486525">...</span><span class="keyword" id="6486528">interface</span><span class="op" id="6486537">{</span><span class="op" id="6486538">}</span><span class="op" id="6486539">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486542">Fail</span><span class="op" id="6486546">(</span><span class="op" id="6486547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486550">FailNow</span><span class="op" id="6486557">(</span><span class="op" id="6486558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486561">Failed</span><span class="op" id="6486567">(</span><span class="op" id="6486568">)</span>&nbsp;<span class="builtintype" id="6486570">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486576">Fatal</span><span class="op" id="6486581">(</span><span class="ident" id="6486582">args</span>&nbsp;<span class="op" id="6486587">...</span><span class="keyword" id="6486590">interface</span><span class="op" id="6486599">{</span><span class="op" id="6486600">}</span><span class="op" id="6486601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486604">Fatalf</span><span class="op" id="6486610">(</span><span class="ident" id="6486611">format</span>&nbsp;<span class="builtintype" id="6486618">string</span><span class="op" id="6486624">,</span>&nbsp;<span class="ident" id="6486626">args</span>&nbsp;<span class="op" id="6486631">...</span><span class="keyword" id="6486634">interface</span><span class="op" id="6486643">{</span><span class="op" id="6486644">}</span><span class="op" id="6486645">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486648">Log</span><span class="op" id="6486651">(</span><span class="ident" id="6486652">args</span>&nbsp;<span class="op" id="6486657">...</span><span class="keyword" id="6486660">interface</span><span class="op" id="6486669">{</span><span class="op" id="6486670">}</span><span class="op" id="6486671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486674">Logf</span><span class="op" id="6486678">(</span><span class="ident" id="6486679">format</span>&nbsp;<span class="builtintype" id="6486686">string</span><span class="op" id="6486692">,</span>&nbsp;<span class="ident" id="6486694">args</span>&nbsp;<span class="op" id="6486699">...</span><span class="keyword" id="6486702">interface</span><span class="op" id="6486711">{</span><span class="op" id="6486712">}</span><span class="op" id="6486713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486716">Skip</span><span class="op" id="6486720">(</span><span class="ident" id="6486721">args</span>&nbsp;<span class="op" id="6486726">...</span><span class="keyword" id="6486729">interface</span><span class="op" id="6486738">{</span><span class="op" id="6486739">}</span><span class="op" id="6486740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486743">SkipNow</span><span class="op" id="6486750">(</span><span class="op" id="6486751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486754">Skipf</span><span class="op" id="6486759">(</span><span class="ident" id="6486760">format</span>&nbsp;<span class="builtintype" id="6486767">string</span><span class="op" id="6486773">,</span>&nbsp;<span class="ident" id="6486775">args</span>&nbsp;<span class="op" id="6486780">...</span><span class="keyword" id="6486783">interface</span><span class="op" id="6486792">{</span><span class="op" id="6486793">}</span><span class="op" id="6486794">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486797">Skipped</span><span class="op" id="6486804">(</span><span class="op" id="6486805">)</span>&nbsp;<span class="builtintype" id="6486807">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6486814">//&nbsp;A&nbsp;private&nbsp;method&nbsp;to&nbsp;prevent&nbsp;users&nbsp;implementing&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6486869">//&nbsp;interface&nbsp;and&nbsp;so&nbsp;future&nbsp;additions&nbsp;to&nbsp;it&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6486922">//&nbsp;violate&nbsp;Go&nbsp;1&nbsp;compatibility.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486954">private</span><span class="op" id="6486961">(</span><span class="op" id="6486962">)</span><br>
<span class="lineno"></span><span class="op" id="6486964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6486967">var</span>&nbsp;<span class="ident" id="6486971">_</span>&nbsp;<span class="ident" id="6486973"><a href="/testing/testing.go.html#6486454">TB</a></span>&nbsp;<span class="op" id="6486976">=</span>&nbsp;<span class="op" id="6486978">(</span><span class="op" id="6486979">*</span><span class="ident" id="6486980"><a href="/testing/testing.go.html#6487190">T</a></span><span class="op" id="6486981">)</span><span class="op" id="6486982">(</span><span class="ident" id="6486983">nil</span><span class="op" id="6486986">)</span><br>
<span class="lineno"></span><span class="keyword" id="6486988">var</span>&nbsp;<span class="ident" id="6486992">_</span>&nbsp;<span class="ident" id="6486994"><a href="/testing/testing.go.html#6486454">TB</a></span>&nbsp;<span class="op" id="6486997">=</span>&nbsp;<span class="op" id="6486999">(</span><span class="op" id="6487000">*</span><span class="ident" id="6487001"><a href="/testing/benchmark.go.html#6460741">B</a></span><span class="op" id="6487002">)</span><span class="op" id="6487003">(</span><span class="ident" id="6487004">nil</span><span class="op" id="6487007">)</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="6487010">//&nbsp;T&nbsp;is&nbsp;a&nbsp;type&nbsp;passed&nbsp;to&nbsp;Test&nbsp;functions&nbsp;to&nbsp;manage&nbsp;test&nbsp;state&nbsp;and&nbsp;support&nbsp;formatted&nbsp;test&nbsp;logs.</span><br>
<span class="lineno"></span><span class="comment" id="6487104">//&nbsp;Logs&nbsp;are&nbsp;accumulated&nbsp;during&nbsp;execution&nbsp;and&nbsp;dumped&nbsp;to&nbsp;standard&nbsp;error&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="keyword" id="6487185">type</span>&nbsp;<span class="ident" id="6487190">T</span>&nbsp;<span class="keyword" id="6487192">struct</span>&nbsp;<span class="op" id="6487199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487202"><a href="/testing/testing.go.html#6484606">common</a></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487210">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6487224">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6487234">//&nbsp;Name&nbsp;of&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487252">startParallel</span>&nbsp;<span class="keyword" id="6487266">chan</span>&nbsp;<span class="builtintype" id="6487271">bool</span>&nbsp;<span class="comment" id="6487276">//&nbsp;Parallel&nbsp;tests&nbsp;will&nbsp;wait&nbsp;on&nbsp;this.</span><br>
<span class="lineno"></span><span class="op" id="6487313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6487316">func</span>&nbsp;<span class="op" id="6487321">(</span><span class="ident" id="6487322">c</span>&nbsp;<span class="op" id="6487324">*</span><span class="ident" id="6487325"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6487331">)</span>&nbsp;<span class="ident" id="6487333">private</span><span class="op" id="6487340">(</span><span class="op" id="6487341">)</span>&nbsp;<span class="op" id="6487343">{</span><span class="op" id="6487344">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span><span class="comment" id="6487347">//&nbsp;Fail&nbsp;marks&nbsp;the&nbsp;function&nbsp;as&nbsp;having&nbsp;failed&nbsp;but&nbsp;continues&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="6487416">func</span>&nbsp;<span class="op" id="6487421">(</span><span class="ident" id="6487422">c</span>&nbsp;<span class="op" id="6487424">*</span><span class="ident" id="6487425"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6487431">)</span>&nbsp;<span class="ident" id="6487433">Fail</span><span class="op" id="6487437">(</span><span class="op" id="6487438">)</span>&nbsp;<span class="op" id="6487440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487443"><a href="/testing/testing.go.html#6487422">c</a></span><span class="op" id="6487444">.</span><span class="ident" id="6487445">mu</span><span class="op" id="6487447">.</span><span class="ident" id="6487448">Lock</span><span class="op" id="6487452">(</span><span class="op" id="6487453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6487456">defer</span>&nbsp;<span class="ident" id="6487462"><a href="/testing/testing.go.html#6487422">c</a></span><span class="op" id="6487463">.</span><span class="ident" id="6487464">mu</span><span class="op" id="6487466">.</span><span class="ident" id="6487467">Unlock</span><span class="op" id="6487473">(</span><span class="op" id="6487474">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487477"><a href="/testing/testing.go.html#6487422">c</a></span><span class="op" id="6487478">.</span><span class="ident" id="6487479">failed</span>&nbsp;<span class="op" id="6487486">=</span>&nbsp;<span class="ident" id="6487488">true</span><br>
<span class="lineno"></span><span class="op" id="6487493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6487496">//&nbsp;Failed&nbsp;reports&nbsp;whether&nbsp;the&nbsp;function&nbsp;has&nbsp;failed.</span><br>
<span class="lineno"></span><span class="keyword" id="6487547">func</span>&nbsp;<span class="op" id="6487552">(</span><span class="ident" id="6487553">c</span>&nbsp;<span class="op" id="6487555">*</span><span class="ident" id="6487556"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6487562">)</span>&nbsp;<span class="ident" id="6487564">Failed</span><span class="op" id="6487570">(</span><span class="op" id="6487571">)</span>&nbsp;<span class="builtintype" id="6487573">bool</span>&nbsp;<span class="op" id="6487578">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487581"><a href="/testing/testing.go.html#6487553">c</a></span><span class="op" id="6487582">.</span><span class="ident" id="6487583">mu</span><span class="op" id="6487585">.</span><span class="ident" id="6487586">RLock</span><span class="op" id="6487591">(</span><span class="op" id="6487592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6487595">defer</span>&nbsp;<span class="ident" id="6487601"><a href="/testing/testing.go.html#6487553">c</a></span><span class="op" id="6487602">.</span><span class="ident" id="6487603">mu</span><span class="op" id="6487605">.</span><span class="ident" id="6487606">RUnlock</span><span class="op" id="6487613">(</span><span class="op" id="6487614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6487617">return</span>&nbsp;<span class="ident" id="6487624"><a href="/testing/testing.go.html#6487553">c</a></span><span class="op" id="6487625">.</span><span class="ident" id="6487626">failed</span><br>
<span class="lineno"></span><span class="op" id="6487633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span><span class="comment" id="6487636">//&nbsp;FailNow&nbsp;marks&nbsp;the&nbsp;function&nbsp;as&nbsp;having&nbsp;failed&nbsp;and&nbsp;stops&nbsp;its&nbsp;execution.</span><br>
<span class="lineno"></span><span class="comment" id="6487708">//&nbsp;Execution&nbsp;will&nbsp;continue&nbsp;at&nbsp;the&nbsp;next&nbsp;test&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="6487766">//&nbsp;FailNow&nbsp;must&nbsp;be&nbsp;called&nbsp;from&nbsp;the&nbsp;goroutine&nbsp;running&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6487823">//&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;function,&nbsp;not&nbsp;from&nbsp;other&nbsp;goroutines</span><br>
<span class="lineno"></span><span class="comment" id="6487880">//&nbsp;created&nbsp;during&nbsp;the&nbsp;test.&nbsp;Calling&nbsp;FailNow&nbsp;does&nbsp;not&nbsp;stop</span><br>
<span class="lineno">305</span><span class="comment" id="6487938">//&nbsp;those&nbsp;other&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="keyword" id="6487965">func</span>&nbsp;<span class="op" id="6487970">(</span><span class="ident" id="6487971">c</span>&nbsp;<span class="op" id="6487973">*</span><span class="ident" id="6487974"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6487980">)</span>&nbsp;<span class="ident" id="6487982">FailNow</span><span class="op" id="6487989">(</span><span class="op" id="6487990">)</span>&nbsp;<span class="op" id="6487992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487995"><a href="/testing/testing.go.html#6487971">c</a></span><span class="op" id="6487996">.</span><span class="ident" id="6487997">Fail</span><span class="op" id="6488001">(</span><span class="op" id="6488002">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488006">//&nbsp;Calling&nbsp;runtime.Goexit&nbsp;will&nbsp;exit&nbsp;the&nbsp;goroutine,&nbsp;which</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488064">//&nbsp;will&nbsp;run&nbsp;the&nbsp;deferred&nbsp;functions&nbsp;in&nbsp;this&nbsp;goroutine,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488119">//&nbsp;which&nbsp;will&nbsp;eventually&nbsp;run&nbsp;the&nbsp;deferred&nbsp;lines&nbsp;in&nbsp;tRunner,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488180">//&nbsp;which&nbsp;will&nbsp;signal&nbsp;to&nbsp;the&nbsp;test&nbsp;loop&nbsp;that&nbsp;this&nbsp;test&nbsp;is&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488243">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488247">//&nbsp;A&nbsp;previous&nbsp;version&nbsp;of&nbsp;this&nbsp;code&nbsp;said:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488289">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488293">//&nbsp;&nbsp;&nbsp;&nbspc.duration&nbsp;=&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488314">//&nbsp;&nbsp;&nbsp;&nbspc.signal&nbsp;&lt;-&nbsp;c.self</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488337">//&nbsp;&nbsp;&nbsp;&nbspruntime.Goexit()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488358">//</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488362">//&nbsp;This&nbsp;previous&nbsp;version&nbsp;duplicated&nbsp;code&nbsp;(those&nbsp;lines&nbsp;are&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488424">//&nbsp;tRunner&nbsp;no&nbsp;matter&nbsp;what),&nbsp;but&nbsp;worse&nbsp;the&nbsp;goroutine&nbsp;teardown</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488486">//&nbsp;implicit&nbsp;in&nbsp;runtime.Goexit&nbsp;was&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;complete</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488548">//&nbsp;before&nbsp;the&nbsp;test&nbsp;exited.&nbsp;&nbsp;If&nbsp;a&nbsp;test&nbsp;deferred&nbsp;an&nbsp;important&nbsp;cleanup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488617">//&nbsp;function&nbsp;(like&nbsp;removing&nbsp;temporary&nbsp;files),&nbsp;there&nbsp;was&nbsp;no&nbsp;guarantee</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488686">//&nbsp;it&nbsp;would&nbsp;run&nbsp;on&nbsp;a&nbsp;test&nbsp;failure.&nbsp;&nbsp;Because&nbsp;we&nbsp;send&nbsp;on&nbsp;c.signal&nbsp;during</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488758">//&nbsp;a&nbsp;top-of-stack&nbsp;deferred&nbsp;function&nbsp;now,&nbsp;we&nbsp;know&nbsp;that&nbsp;the&nbsp;send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488822">//&nbsp;only&nbsp;happens&nbsp;after&nbsp;any&nbsp;other&nbsp;stacked&nbsp;defers&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488886"><a href="/testing/testing.go.html#6487971">c</a></span><span class="op" id="6488887">.</span><span class="ident" id="6488888">finished</span>&nbsp;<span class="op" id="6488897">=</span>&nbsp;<span class="ident" id="6488899">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488905"><a href="/testing/testing.go.html#6482334">runtime</a></span><span class="op" id="6488912">.</span><span class="ident" id="6488913">Goexit</span><span class="op" id="6488919">(</span><span class="op" id="6488920">)</span><br>
<span class="lineno">330</span><span class="op" id="6488922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6488925">//&nbsp;log&nbsp;generates&nbsp;the&nbsp;output.&nbsp;It&#39;s&nbsp;always&nbsp;at&nbsp;the&nbsp;same&nbsp;stack&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="6488991">func</span>&nbsp;<span class="op" id="6488996">(</span><span class="ident" id="6488997">c</span>&nbsp;<span class="op" id="6488999">*</span><span class="ident" id="6489000"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6489006">)</span>&nbsp;<span class="ident" id="6489008">log</span><span class="op" id="6489011">(</span><span class="ident" id="6489012">s</span>&nbsp;<span class="builtintype" id="6489014">string</span><span class="op" id="6489020">)</span>&nbsp;<span class="op" id="6489022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489025"><a href="/testing/testing.go.html#6488997">c</a></span><span class="op" id="6489026">.</span><span class="ident" id="6489027">mu</span><span class="op" id="6489029">.</span><span class="ident" id="6489030">Lock</span><span class="op" id="6489034">(</span><span class="op" id="6489035">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6489038">defer</span>&nbsp;<span class="ident" id="6489044"><a href="/testing/testing.go.html#6488997">c</a></span><span class="op" id="6489045">.</span><span class="ident" id="6489046">mu</span><span class="op" id="6489048">.</span><span class="ident" id="6489049">Unlock</span><span class="op" id="6489055">(</span><span class="op" id="6489056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489059"><a href="/testing/testing.go.html#6488997">c</a></span><span class="op" id="6489060">.</span><span class="ident" id="6489061">output</span>&nbsp;<span class="op" id="6489068">=</span>&nbsp;<span class="builtinfunc" id="6489070">append</span><span class="op" id="6489076">(</span><span class="ident" id="6489077"><a href="/testing/testing.go.html#6488997">c</a></span><span class="op" id="6489078">.</span><span class="ident" id="6489079">output</span><span class="op" id="6489085">,</span>&nbsp;<span class="ident" id="6489087"><a href="/testing/testing.go.html#6485420">decorate</a></span><span class="op" id="6489095">(</span><span class="ident" id="6489096"><a href="/testing/testing.go.html#6489012">s</a></span><span class="op" id="6489097">)</span><span class="op" id="6489098">...</span><span class="op" id="6489101">)</span><br>
<span class="lineno"></span><span class="op" id="6489103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6489106">//&nbsp;Log&nbsp;formats&nbsp;its&nbsp;arguments&nbsp;using&nbsp;default&nbsp;formatting,&nbsp;analogous&nbsp;to&nbsp;Println,</span><br>
<span class="lineno">340</span><span class="comment" id="6489183">//&nbsp;and&nbsp;records&nbsp;the&nbsp;text&nbsp;in&nbsp;the&nbsp;error&nbsp;log.&nbsp;The&nbsp;text&nbsp;will&nbsp;be&nbsp;printed&nbsp;only&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="6489258">//&nbsp;the&nbsp;test&nbsp;fails&nbsp;or&nbsp;the&nbsp;-test.v&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="6489304">func</span>&nbsp;<span class="op" id="6489309">(</span><span class="ident" id="6489310">c</span>&nbsp;<span class="op" id="6489312">*</span><span class="ident" id="6489313"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6489319">)</span>&nbsp;<span class="ident" id="6489321">Log</span><span class="op" id="6489324">(</span><span class="ident" id="6489325">args</span>&nbsp;<span class="op" id="6489330">...</span><span class="keyword" id="6489333">interface</span><span class="op" id="6489342">{</span><span class="op" id="6489343">}</span><span class="op" id="6489344">)</span>&nbsp;<span class="op" id="6489346">{</span>&nbsp;<span class="ident" id="6489348"><a href="/testing/testing.go.html#6489310">c</a></span><span class="op" id="6489349">.</span><span class="ident" id="6489350">log</span><span class="op" id="6489353">(</span><span class="ident" id="6489354"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6489357">.</span><span class="ident" id="6489358">Sprintln</span><span class="op" id="6489366">(</span><span class="ident" id="6489367"><a href="/testing/testing.go.html#6489325">args</a></span><span class="op" id="6489371">...</span><span class="op" id="6489374">)</span><span class="op" id="6489375">)</span>&nbsp;<span class="op" id="6489377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6489380">//&nbsp;Logf&nbsp;formats&nbsp;its&nbsp;arguments&nbsp;according&nbsp;to&nbsp;the&nbsp;format,&nbsp;analogous&nbsp;to&nbsp;Printf,</span><br>
<span class="lineno">345</span><span class="comment" id="6489456">//&nbsp;and&nbsp;records&nbsp;the&nbsp;text&nbsp;in&nbsp;the&nbsp;error&nbsp;log.&nbsp;The&nbsp;text&nbsp;will&nbsp;be&nbsp;printed&nbsp;only&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="6489531">//&nbsp;the&nbsp;test&nbsp;fails&nbsp;or&nbsp;the&nbsp;-test.v&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="6489577">func</span>&nbsp;<span class="op" id="6489582">(</span><span class="ident" id="6489583">c</span>&nbsp;<span class="op" id="6489585">*</span><span class="ident" id="6489586"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6489592">)</span>&nbsp;<span class="ident" id="6489594">Logf</span><span class="op" id="6489598">(</span><span class="ident" id="6489599">format</span>&nbsp;<span class="builtintype" id="6489606">string</span><span class="op" id="6489612">,</span>&nbsp;<span class="ident" id="6489614">args</span>&nbsp;<span class="op" id="6489619">...</span><span class="keyword" id="6489622">interface</span><span class="op" id="6489631">{</span><span class="op" id="6489632">}</span><span class="op" id="6489633">)</span>&nbsp;<span class="op" id="6489635">{</span>&nbsp;<span class="ident" id="6489637"><a href="/testing/testing.go.html#6489583">c</a></span><span class="op" id="6489638">.</span><span class="ident" id="6489639">log</span><span class="op" id="6489642">(</span><span class="ident" id="6489643"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6489646">.</span><span class="ident" id="6489647">Sprintf</span><span class="op" id="6489654">(</span><span class="ident" id="6489655"><a href="/testing/testing.go.html#6489599">format</a></span><span class="op" id="6489661">,</span>&nbsp;<span class="ident" id="6489663"><a href="/testing/testing.go.html#6489614">args</a></span><span class="op" id="6489667">...</span><span class="op" id="6489670">)</span><span class="op" id="6489671">)</span>&nbsp;<span class="op" id="6489673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6489676">//&nbsp;Error&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Log&nbsp;followed&nbsp;by&nbsp;Fail.</span><br>
<span class="lineno">350</span><span class="keyword" id="6489724">func</span>&nbsp;<span class="op" id="6489729">(</span><span class="ident" id="6489730">c</span>&nbsp;<span class="op" id="6489732">*</span><span class="ident" id="6489733"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6489739">)</span>&nbsp;<span class="ident" id="6489741">Error</span><span class="op" id="6489746">(</span><span class="ident" id="6489747">args</span>&nbsp;<span class="op" id="6489752">...</span><span class="keyword" id="6489755">interface</span><span class="op" id="6489764">{</span><span class="op" id="6489765">}</span><span class="op" id="6489766">)</span>&nbsp;<span class="op" id="6489768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489771"><a href="/testing/testing.go.html#6489730">c</a></span><span class="op" id="6489772">.</span><span class="ident" id="6489773">log</span><span class="op" id="6489776">(</span><span class="ident" id="6489777"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6489780">.</span><span class="ident" id="6489781">Sprintln</span><span class="op" id="6489789">(</span><span class="ident" id="6489790"><a href="/testing/testing.go.html#6489747">args</a></span><span class="op" id="6489794">...</span><span class="op" id="6489797">)</span><span class="op" id="6489798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489801"><a href="/testing/testing.go.html#6489730">c</a></span><span class="op" id="6489802">.</span><span class="ident" id="6489803">Fail</span><span class="op" id="6489807">(</span><span class="op" id="6489808">)</span><br>
<span class="lineno"></span><span class="op" id="6489810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="6489813">//&nbsp;Errorf&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Logf&nbsp;followed&nbsp;by&nbsp;Fail.</span><br>
<span class="lineno"></span><span class="keyword" id="6489863">func</span>&nbsp;<span class="op" id="6489868">(</span><span class="ident" id="6489869">c</span>&nbsp;<span class="op" id="6489871">*</span><span class="ident" id="6489872"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6489878">)</span>&nbsp;<span class="ident" id="6489880">Errorf</span><span class="op" id="6489886">(</span><span class="ident" id="6489887">format</span>&nbsp;<span class="builtintype" id="6489894">string</span><span class="op" id="6489900">,</span>&nbsp;<span class="ident" id="6489902">args</span>&nbsp;<span class="op" id="6489907">...</span><span class="keyword" id="6489910">interface</span><span class="op" id="6489919">{</span><span class="op" id="6489920">}</span><span class="op" id="6489921">)</span>&nbsp;<span class="op" id="6489923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489926"><a href="/testing/testing.go.html#6489869">c</a></span><span class="op" id="6489927">.</span><span class="ident" id="6489928">log</span><span class="op" id="6489931">(</span><span class="ident" id="6489932"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6489935">.</span><span class="ident" id="6489936">Sprintf</span><span class="op" id="6489943">(</span><span class="ident" id="6489944"><a href="/testing/testing.go.html#6489887">format</a></span><span class="op" id="6489950">,</span>&nbsp;<span class="ident" id="6489952"><a href="/testing/testing.go.html#6489902">args</a></span><span class="op" id="6489956">...</span><span class="op" id="6489959">)</span><span class="op" id="6489960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489963"><a href="/testing/testing.go.html#6489869">c</a></span><span class="op" id="6489964">.</span><span class="ident" id="6489965">Fail</span><span class="op" id="6489969">(</span><span class="op" id="6489970">)</span><br>
<span class="lineno"></span><span class="op" id="6489972">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="comment" id="6489975">//&nbsp;Fatal&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Log&nbsp;followed&nbsp;by&nbsp;FailNow.</span><br>
<span class="lineno"></span><span class="keyword" id="6490026">func</span>&nbsp;<span class="op" id="6490031">(</span><span class="ident" id="6490032">c</span>&nbsp;<span class="op" id="6490034">*</span><span class="ident" id="6490035"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6490041">)</span>&nbsp;<span class="ident" id="6490043">Fatal</span><span class="op" id="6490048">(</span><span class="ident" id="6490049">args</span>&nbsp;<span class="op" id="6490054">...</span><span class="keyword" id="6490057">interface</span><span class="op" id="6490066">{</span><span class="op" id="6490067">}</span><span class="op" id="6490068">)</span>&nbsp;<span class="op" id="6490070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490073"><a href="/testing/testing.go.html#6490032">c</a></span><span class="op" id="6490074">.</span><span class="ident" id="6490075">log</span><span class="op" id="6490078">(</span><span class="ident" id="6490079"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6490082">.</span><span class="ident" id="6490083">Sprintln</span><span class="op" id="6490091">(</span><span class="ident" id="6490092"><a href="/testing/testing.go.html#6490049">args</a></span><span class="op" id="6490096">...</span><span class="op" id="6490099">)</span><span class="op" id="6490100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490103"><a href="/testing/testing.go.html#6490032">c</a></span><span class="op" id="6490104">.</span><span class="ident" id="6490105">FailNow</span><span class="op" id="6490112">(</span><span class="op" id="6490113">)</span><br>
<span class="lineno">365</span><span class="op" id="6490115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6490118">//&nbsp;Fatalf&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Logf&nbsp;followed&nbsp;by&nbsp;FailNow.</span><br>
<span class="lineno"></span><span class="keyword" id="6490171">func</span>&nbsp;<span class="op" id="6490176">(</span><span class="ident" id="6490177">c</span>&nbsp;<span class="op" id="6490179">*</span><span class="ident" id="6490180"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6490186">)</span>&nbsp;<span class="ident" id="6490188">Fatalf</span><span class="op" id="6490194">(</span><span class="ident" id="6490195">format</span>&nbsp;<span class="builtintype" id="6490202">string</span><span class="op" id="6490208">,</span>&nbsp;<span class="ident" id="6490210">args</span>&nbsp;<span class="op" id="6490215">...</span><span class="keyword" id="6490218">interface</span><span class="op" id="6490227">{</span><span class="op" id="6490228">}</span><span class="op" id="6490229">)</span>&nbsp;<span class="op" id="6490231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490234"><a href="/testing/testing.go.html#6490177">c</a></span><span class="op" id="6490235">.</span><span class="ident" id="6490236">log</span><span class="op" id="6490239">(</span><span class="ident" id="6490240"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6490243">.</span><span class="ident" id="6490244">Sprintf</span><span class="op" id="6490251">(</span><span class="ident" id="6490252"><a href="/testing/testing.go.html#6490195">format</a></span><span class="op" id="6490258">,</span>&nbsp;<span class="ident" id="6490260"><a href="/testing/testing.go.html#6490210">args</a></span><span class="op" id="6490264">...</span><span class="op" id="6490267">)</span><span class="op" id="6490268">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490271"><a href="/testing/testing.go.html#6490177">c</a></span><span class="op" id="6490272">.</span><span class="ident" id="6490273">FailNow</span><span class="op" id="6490280">(</span><span class="op" id="6490281">)</span><br>
<span class="lineno"></span><span class="op" id="6490283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6490286">//&nbsp;Skip&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Log&nbsp;followed&nbsp;by&nbsp;SkipNow.</span><br>
<span class="lineno"></span><span class="keyword" id="6490336">func</span>&nbsp;<span class="op" id="6490341">(</span><span class="ident" id="6490342">c</span>&nbsp;<span class="op" id="6490344">*</span><span class="ident" id="6490345"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6490351">)</span>&nbsp;<span class="ident" id="6490353">Skip</span><span class="op" id="6490357">(</span><span class="ident" id="6490358">args</span>&nbsp;<span class="op" id="6490363">...</span><span class="keyword" id="6490366">interface</span><span class="op" id="6490375">{</span><span class="op" id="6490376">}</span><span class="op" id="6490377">)</span>&nbsp;<span class="op" id="6490379">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490382"><a href="/testing/testing.go.html#6490342">c</a></span><span class="op" id="6490383">.</span><span class="ident" id="6490384">log</span><span class="op" id="6490387">(</span><span class="ident" id="6490388"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6490391">.</span><span class="ident" id="6490392">Sprintln</span><span class="op" id="6490400">(</span><span class="ident" id="6490401"><a href="/testing/testing.go.html#6490358">args</a></span><span class="op" id="6490405">...</span><span class="op" id="6490408">)</span><span class="op" id="6490409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490412"><a href="/testing/testing.go.html#6490342">c</a></span><span class="op" id="6490413">.</span><span class="ident" id="6490414">SkipNow</span><span class="op" id="6490421">(</span><span class="op" id="6490422">)</span><br>
<span class="lineno"></span><span class="op" id="6490424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6490427">//&nbsp;Skipf&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Logf&nbsp;followed&nbsp;by&nbsp;SkipNow.</span><br>
<span class="lineno">380</span><span class="keyword" id="6490479">func</span>&nbsp;<span class="op" id="6490484">(</span><span class="ident" id="6490485">c</span>&nbsp;<span class="op" id="6490487">*</span><span class="ident" id="6490488"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6490494">)</span>&nbsp;<span class="ident" id="6490496">Skipf</span><span class="op" id="6490501">(</span><span class="ident" id="6490502">format</span>&nbsp;<span class="builtintype" id="6490509">string</span><span class="op" id="6490515">,</span>&nbsp;<span class="ident" id="6490517">args</span>&nbsp;<span class="op" id="6490522">...</span><span class="keyword" id="6490525">interface</span><span class="op" id="6490534">{</span><span class="op" id="6490535">}</span><span class="op" id="6490536">)</span>&nbsp;<span class="op" id="6490538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490541"><a href="/testing/testing.go.html#6490485">c</a></span><span class="op" id="6490542">.</span><span class="ident" id="6490543">log</span><span class="op" id="6490546">(</span><span class="ident" id="6490547"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6490550">.</span><span class="ident" id="6490551">Sprintf</span><span class="op" id="6490558">(</span><span class="ident" id="6490559"><a href="/testing/testing.go.html#6490502">format</a></span><span class="op" id="6490565">,</span>&nbsp;<span class="ident" id="6490567"><a href="/testing/testing.go.html#6490517">args</a></span><span class="op" id="6490571">...</span><span class="op" id="6490574">)</span><span class="op" id="6490575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490578"><a href="/testing/testing.go.html#6490485">c</a></span><span class="op" id="6490579">.</span><span class="ident" id="6490580">SkipNow</span><span class="op" id="6490587">(</span><span class="op" id="6490588">)</span><br>
<span class="lineno"></span><span class="op" id="6490590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="comment" id="6490593">//&nbsp;SkipNow&nbsp;marks&nbsp;the&nbsp;test&nbsp;as&nbsp;having&nbsp;been&nbsp;skipped&nbsp;and&nbsp;stops&nbsp;its&nbsp;execution.</span><br>
<span class="lineno"></span><span class="comment" id="6490667">//&nbsp;Execution&nbsp;will&nbsp;continue&nbsp;at&nbsp;the&nbsp;next&nbsp;test&nbsp;or&nbsp;benchmark.&nbsp;See&nbsp;also&nbsp;FailNow.</span><br>
<span class="lineno"></span><span class="comment" id="6490743">//&nbsp;SkipNow&nbsp;must&nbsp;be&nbsp;called&nbsp;from&nbsp;the&nbsp;goroutine&nbsp;running&nbsp;the&nbsp;test,&nbsp;not&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="6490815">//&nbsp;other&nbsp;goroutines&nbsp;created&nbsp;during&nbsp;the&nbsp;test.&nbsp;Calling&nbsp;SkipNow&nbsp;does&nbsp;not&nbsp;stop</span><br>
<span class="lineno"></span><span class="comment" id="6490890">//&nbsp;those&nbsp;other&nbsp;goroutines.</span><br>
<span class="lineno">390</span><span class="keyword" id="6490917">func</span>&nbsp;<span class="op" id="6490922">(</span><span class="ident" id="6490923">c</span>&nbsp;<span class="op" id="6490925">*</span><span class="ident" id="6490926"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6490932">)</span>&nbsp;<span class="ident" id="6490934">SkipNow</span><span class="op" id="6490941">(</span><span class="op" id="6490942">)</span>&nbsp;<span class="op" id="6490944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490947"><a href="/testing/testing.go.html#6490923">c</a></span><span class="op" id="6490948">.</span><span class="ident" id="6490949">skip</span><span class="op" id="6490953">(</span><span class="op" id="6490954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490957"><a href="/testing/testing.go.html#6490923">c</a></span><span class="op" id="6490958">.</span><span class="ident" id="6490959">finished</span>&nbsp;<span class="op" id="6490968">=</span>&nbsp;<span class="ident" id="6490970">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490976"><a href="/testing/testing.go.html#6482334">runtime</a></span><span class="op" id="6490983">.</span><span class="ident" id="6490984">Goexit</span><span class="op" id="6490990">(</span><span class="op" id="6490991">)</span><br>
<span class="lineno"></span><span class="op" id="6490993">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="keyword" id="6490996">func</span>&nbsp;<span class="op" id="6491001">(</span><span class="ident" id="6491002">c</span>&nbsp;<span class="op" id="6491004">*</span><span class="ident" id="6491005"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6491011">)</span>&nbsp;<span class="ident" id="6491013">skip</span><span class="op" id="6491017">(</span><span class="op" id="6491018">)</span>&nbsp;<span class="op" id="6491020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491023"><a href="/testing/testing.go.html#6491002">c</a></span><span class="op" id="6491024">.</span><span class="ident" id="6491025">mu</span><span class="op" id="6491027">.</span><span class="ident" id="6491028">Lock</span><span class="op" id="6491032">(</span><span class="op" id="6491033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491036">defer</span>&nbsp;<span class="ident" id="6491042"><a href="/testing/testing.go.html#6491002">c</a></span><span class="op" id="6491043">.</span><span class="ident" id="6491044">mu</span><span class="op" id="6491046">.</span><span class="ident" id="6491047">Unlock</span><span class="op" id="6491053">(</span><span class="op" id="6491054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491057"><a href="/testing/testing.go.html#6491002">c</a></span><span class="op" id="6491058">.</span><span class="ident" id="6491059">skipped</span>&nbsp;<span class="op" id="6491067">=</span>&nbsp;<span class="ident" id="6491069">true</span><br>
<span class="lineno">400</span><span class="op" id="6491074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6491077">//&nbsp;Skipped&nbsp;reports&nbsp;whether&nbsp;the&nbsp;test&nbsp;was&nbsp;skipped.</span><br>
<span class="lineno"></span><span class="keyword" id="6491126">func</span>&nbsp;<span class="op" id="6491131">(</span><span class="ident" id="6491132">c</span>&nbsp;<span class="op" id="6491134">*</span><span class="ident" id="6491135"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6491141">)</span>&nbsp;<span class="ident" id="6491143">Skipped</span><span class="op" id="6491150">(</span><span class="op" id="6491151">)</span>&nbsp;<span class="builtintype" id="6491153">bool</span>&nbsp;<span class="op" id="6491158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491161"><a href="/testing/testing.go.html#6491132">c</a></span><span class="op" id="6491162">.</span><span class="ident" id="6491163">mu</span><span class="op" id="6491165">.</span><span class="ident" id="6491166">RLock</span><span class="op" id="6491171">(</span><span class="op" id="6491172">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491175">defer</span>&nbsp;<span class="ident" id="6491181"><a href="/testing/testing.go.html#6491132">c</a></span><span class="op" id="6491182">.</span><span class="ident" id="6491183">mu</span><span class="op" id="6491185">.</span><span class="ident" id="6491186">RUnlock</span><span class="op" id="6491193">(</span><span class="op" id="6491194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491197">return</span>&nbsp;<span class="ident" id="6491204"><a href="/testing/testing.go.html#6491132">c</a></span><span class="op" id="6491205">.</span><span class="ident" id="6491206">skipped</span><br>
<span class="lineno"></span><span class="op" id="6491214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6491217">//&nbsp;Parallel&nbsp;signals&nbsp;that&nbsp;this&nbsp;test&nbsp;is&nbsp;to&nbsp;be&nbsp;run&nbsp;in&nbsp;parallel&nbsp;with&nbsp;(and&nbsp;only&nbsp;with)</span><br>
<span class="lineno">410</span><span class="comment" id="6491298">//&nbsp;other&nbsp;parallel&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="6491323">func</span>&nbsp;<span class="op" id="6491328">(</span><span class="ident" id="6491329">t</span>&nbsp;<span class="op" id="6491331">*</span><span class="ident" id="6491332"><a href="/testing/testing.go.html#6487190">T</a></span><span class="op" id="6491333">)</span>&nbsp;<span class="ident" id="6491335">Parallel</span><span class="op" id="6491343">(</span><span class="op" id="6491344">)</span>&nbsp;<span class="op" id="6491346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491349"><a href="/testing/testing.go.html#6491329">t</a></span><span class="op" id="6491350">.</span><span class="ident" id="6491351">signal</span>&nbsp;<span class="op" id="6491358">&lt;-</span>&nbsp;<span class="op" id="6491361">(</span><span class="op" id="6491362">*</span><span class="ident" id="6491363"><a href="/testing/testing.go.html#6487190">T</a></span><span class="op" id="6491364">)</span><span class="op" id="6491365">(</span><span class="ident" id="6491366">nil</span><span class="op" id="6491369">)</span>&nbsp;<span class="comment" id="6491371">//&nbsp;Release&nbsp;main&nbsp;testing&nbsp;loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491401">&lt;-</span><span class="ident" id="6491403"><a href="/testing/testing.go.html#6491329">t</a></span><span class="op" id="6491404">.</span><span class="ident" id="6491405">startParallel</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6491423">//&nbsp;Wait&nbsp;for&nbsp;serial&nbsp;tests&nbsp;to&nbsp;finish</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491459">//&nbsp;Assuming&nbsp;Parallel&nbsp;is&nbsp;the&nbsp;first&nbsp;thing&nbsp;a&nbsp;test&nbsp;does,&nbsp;which&nbsp;is&nbsp;reasonable,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491534">//&nbsp;reinitialize&nbsp;the&nbsp;test&#39;s&nbsp;start&nbsp;time&nbsp;because&nbsp;it&#39;s&nbsp;actually&nbsp;starting&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491609"><a href="/testing/testing.go.html#6491329">t</a></span><span class="op" id="6491610">.</span><span class="ident" id="6491611">start</span>&nbsp;<span class="op" id="6491617">=</span>&nbsp;<span class="ident" id="6491619"><a href="/testing/testing.go.html#6482392">time</a></span><span class="op" id="6491623">.</span><span class="ident" id="6491624">Now</span><span class="op" id="6491627">(</span><span class="op" id="6491628">)</span><br>
<span class="lineno"></span><span class="op" id="6491630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6491633">//&nbsp;An&nbsp;internal&nbsp;type&nbsp;but&nbsp;exported&nbsp;because&nbsp;it&nbsp;is&nbsp;cross-package;&nbsp;part&nbsp;of&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">420</span><span class="comment" id="6491722">//&nbsp;of&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6491751">type</span>&nbsp;<span class="ident" id="6491756">InternalTest</span>&nbsp;<span class="keyword" id="6491769">struct</span>&nbsp;<span class="op" id="6491776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491779">Name</span>&nbsp;<span class="builtintype" id="6491784">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491792">F</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6491797">func</span><span class="op" id="6491801">(</span><span class="op" id="6491802">*</span><span class="ident" id="6491803"><a href="/testing/testing.go.html#6487190">T</a></span><span class="op" id="6491804">)</span><br>
<span class="lineno"></span><span class="op" id="6491806">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span><span class="keyword" id="6491809">func</span>&nbsp;<span class="ident" id="6491814">tRunner</span><span class="op" id="6491821">(</span><span class="ident" id="6491822">t</span>&nbsp;<span class="op" id="6491824">*</span><span class="ident" id="6491825"><a href="/testing/testing.go.html#6487190">T</a></span><span class="op" id="6491826">,</span>&nbsp;<span class="ident" id="6491828">test</span>&nbsp;<span class="op" id="6491833">*</span><span class="ident" id="6491834"><a href="/testing/testing.go.html#6491756">InternalTest</a></span><span class="op" id="6491846">)</span>&nbsp;<span class="op" id="6491848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491851">//&nbsp;When&nbsp;this&nbsp;goroutine&nbsp;is&nbsp;done,&nbsp;either&nbsp;because&nbsp;test.F(t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491909">//&nbsp;returned&nbsp;normally&nbsp;or&nbsp;because&nbsp;a&nbsp;test&nbsp;failure&nbsp;triggered</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491967">//&nbsp;a&nbsp;call&nbsp;to&nbsp;runtime.Goexit,&nbsp;record&nbsp;the&nbsp;duration&nbsp;and&nbsp;send</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6492026">//&nbsp;a&nbsp;signal&nbsp;saying&nbsp;that&nbsp;the&nbsp;test&nbsp;is&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492069">defer</span>&nbsp;<span class="keyword" id="6492075">func</span><span class="op" id="6492079">(</span><span class="op" id="6492080">)</span>&nbsp;<span class="op" id="6492082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492086"><a href="/testing/testing.go.html#6491822">t</a></span><span class="op" id="6492087">.</span><span class="ident" id="6492088">duration</span>&nbsp;<span class="op" id="6492097">=</span>&nbsp;<span class="ident" id="6492099"><a href="/testing/testing.go.html#6482392">time</a></span><span class="op" id="6492103">.</span><span class="ident" id="6492104">Now</span><span class="op" id="6492107">(</span><span class="op" id="6492108">)</span><span class="op" id="6492109">.</span><span class="ident" id="6492110">Sub</span><span class="op" id="6492113">(</span><span class="ident" id="6492114"><a href="/testing/testing.go.html#6491822">t</a></span><span class="op" id="6492115">.</span><span class="ident" id="6492116">start</span><span class="op" id="6492121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6492125">//&nbsp;If&nbsp;the&nbsp;test&nbsp;panicked,&nbsp;print&nbsp;any&nbsp;test&nbsp;output&nbsp;before&nbsp;dying.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492188">err</span>&nbsp;<span class="op" id="6492192">:=</span>&nbsp;<span class="builtinfunc" id="6492195">recover</span><span class="op" id="6492202">(</span><span class="op" id="6492203">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492207">if</span>&nbsp;<span class="op" id="6492210">!</span><span class="ident" id="6492211"><a href="/testing/testing.go.html#6491822">t</a></span><span class="op" id="6492212">.</span><span class="ident" id="6492213">finished</span>&nbsp;<span class="op" id="6492222">&amp;&amp;</span>&nbsp;<span class="ident" id="6492225"><a href="/testing/testing.go.html#6492188">err</a></span>&nbsp;<span class="op" id="6492229">==</span>&nbsp;<span class="ident" id="6492232">nil</span>&nbsp;<span class="op" id="6492236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492241"><a href="/testing/testing.go.html#6492188">err</a></span>&nbsp;<span class="op" id="6492245">=</span>&nbsp;<span class="ident" id="6492247"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6492250">.</span><span class="ident" id="6492251">Errorf</span><span class="op" id="6492257">(</span><span class="string" id="6492258">&#34;test&nbsp;executed&nbsp;panic(nil)&nbsp;or&nbsp;runtime.Goexit&#34;</span><span class="op" id="6492302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492310">if</span>&nbsp;<span class="ident" id="6492313"><a href="/testing/testing.go.html#6492188">err</a></span>&nbsp;<span class="op" id="6492317">!=</span>&nbsp;<span class="ident" id="6492320">nil</span>&nbsp;<span class="op" id="6492324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492329"><a href="/testing/testing.go.html#6491822">t</a></span><span class="op" id="6492330">.</span><span class="ident" id="6492331">Fail</span><span class="op" id="6492335">(</span><span class="op" id="6492336">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492341"><a href="/testing/testing.go.html#6491822">t</a></span><span class="op" id="6492342">.</span><span class="ident" id="6492343">report</span><span class="op" id="6492349">(</span><span class="op" id="6492350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6492355">panic</span><span class="op" id="6492360">(</span><span class="ident" id="6492361"><a href="/testing/testing.go.html#6492188">err</a></span><span class="op" id="6492364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492372"><a href="/testing/testing.go.html#6491822">t</a></span><span class="op" id="6492373">.</span><span class="ident" id="6492374">signal</span>&nbsp;<span class="op" id="6492381">&lt;-</span>&nbsp;<span class="ident" id="6492384"><a href="/testing/testing.go.html#6491822">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492387">}</span><span class="op" id="6492388">(</span><span class="op" id="6492389">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492393"><a href="/testing/testing.go.html#6491822">t</a></span><span class="op" id="6492394">.</span><span class="ident" id="6492395">start</span>&nbsp;<span class="op" id="6492401">=</span>&nbsp;<span class="ident" id="6492403"><a href="/testing/testing.go.html#6482392">time</a></span><span class="op" id="6492407">.</span><span class="ident" id="6492408">Now</span><span class="op" id="6492411">(</span><span class="op" id="6492412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492415"><a href="/testing/testing.go.html#6491828">test</a></span><span class="op" id="6492419">.</span><span class="ident" id="6492420">F</span><span class="op" id="6492421">(</span><span class="ident" id="6492422"><a href="/testing/testing.go.html#6491822">t</a></span><span class="op" id="6492423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492426"><a href="/testing/testing.go.html#6491822">t</a></span><span class="op" id="6492427">.</span><span class="ident" id="6492428">finished</span>&nbsp;<span class="op" id="6492437">=</span>&nbsp;<span class="ident" id="6492439">true</span><br>
<span class="lineno"></span><span class="op" id="6492444">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="6492447">//&nbsp;An&nbsp;internal&nbsp;function&nbsp;but&nbsp;exported&nbsp;because&nbsp;it&nbsp;is&nbsp;cross-package;&nbsp;part&nbsp;of&nbsp;the&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="6492540">//&nbsp;of&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6492569">func</span>&nbsp;<span class="ident" id="6492574">Main</span><span class="op" id="6492578">(</span><span class="ident" id="6492579">matchString</span>&nbsp;<span class="keyword" id="6492591">func</span><span class="op" id="6492595">(</span><span class="ident" id="6492596">pat</span><span class="op" id="6492599">,</span>&nbsp;<span class="ident" id="6492601">str</span>&nbsp;<span class="builtintype" id="6492605">string</span><span class="op" id="6492611">)</span>&nbsp;<span class="op" id="6492613">(</span><span class="builtintype" id="6492614">bool</span><span class="op" id="6492618">,</span>&nbsp;<span class="builtintype" id="6492620">error</span><span class="op" id="6492625">)</span><span class="op" id="6492626">,</span>&nbsp;<span class="ident" id="6492628">tests</span>&nbsp;<span class="op" id="6492634">[</span><span class="op" id="6492635">]</span><span class="ident" id="6492636"><a href="/testing/testing.go.html#6491756">InternalTest</a></span><span class="op" id="6492648">,</span>&nbsp;<span class="ident" id="6492650">benchmarks</span>&nbsp;<span class="op" id="6492661">[</span><span class="op" id="6492662">]</span><span class="ident" id="6492663"><a href="/testing/benchmark.go.html#6460553">InternalBenchmark</a></span><span class="op" id="6492680">,</span>&nbsp;<span class="ident" id="6492682">examples</span>&nbsp;<span class="op" id="6492691">[</span><span class="op" id="6492692">]</span><span class="ident" id="6492693"><a href="/testing/example.go.html#6475352">InternalExample</a></span><span class="op" id="6492708">)</span>&nbsp;<span class="op" id="6492710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492713"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6492715">.</span><span class="ident" id="6492716">Exit</span><span class="op" id="6492720">(</span><span class="ident" id="6492721"><a href="/testing/testing.go.html#6493229">MainStart</a></span><span class="op" id="6492730">(</span><span class="ident" id="6492731"><a href="/testing/testing.go.html#6492579">matchString</a></span><span class="op" id="6492742">,</span>&nbsp;<span class="ident" id="6492744"><a href="/testing/testing.go.html#6492628">tests</a></span><span class="op" id="6492749">,</span>&nbsp;<span class="ident" id="6492751"><a href="/testing/testing.go.html#6492650">benchmarks</a></span><span class="op" id="6492761">,</span>&nbsp;<span class="ident" id="6492763"><a href="/testing/testing.go.html#6492682">examples</a></span><span class="op" id="6492771">)</span><span class="op" id="6492772">.</span><span class="ident" id="6492773">Run</span><span class="op" id="6492776">(</span><span class="op" id="6492777">)</span><span class="op" id="6492778">)</span><br>
<span class="lineno">455</span><span class="op" id="6492780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6492783">//&nbsp;M&nbsp;is&nbsp;a&nbsp;type&nbsp;passed&nbsp;to&nbsp;a&nbsp;TestMain&nbsp;function&nbsp;to&nbsp;run&nbsp;the&nbsp;actual&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="6492853">type</span>&nbsp;<span class="ident" id="6492858">M</span>&nbsp;<span class="keyword" id="6492860">struct</span>&nbsp;<span class="op" id="6492867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492870">matchString</span>&nbsp;<span class="keyword" id="6492882">func</span><span class="op" id="6492886">(</span><span class="ident" id="6492887">pat</span><span class="op" id="6492890">,</span>&nbsp;<span class="ident" id="6492892">str</span>&nbsp;<span class="builtintype" id="6492896">string</span><span class="op" id="6492902">)</span>&nbsp;<span class="op" id="6492904">(</span><span class="builtintype" id="6492905">bool</span><span class="op" id="6492909">,</span>&nbsp;<span class="builtintype" id="6492911">error</span><span class="op" id="6492916">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492919">tests</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6492931">[</span><span class="op" id="6492932">]</span><span class="ident" id="6492933"><a href="/testing/testing.go.html#6491756">InternalTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492947">benchmarks</span>&nbsp;&nbsp;<span class="op" id="6492959">[</span><span class="op" id="6492960">]</span><span class="ident" id="6492961"><a href="/testing/benchmark.go.html#6460553">InternalBenchmark</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492980">examples</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6492992">[</span><span class="op" id="6492993">]</span><span class="ident" id="6492994"><a href="/testing/example.go.html#6475352">InternalExample</a></span><br>
<span class="lineno"></span><span class="op" id="6493010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span><span class="comment" id="6493013">//&nbsp;MainStart&nbsp;is&nbsp;meant&nbsp;for&nbsp;use&nbsp;by&nbsp;tests&nbsp;generated&nbsp;by&nbsp;&#39;go&nbsp;test&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6493076">//&nbsp;It&nbsp;is&nbsp;not&nbsp;meant&nbsp;to&nbsp;be&nbsp;called&nbsp;directly&nbsp;and&nbsp;is&nbsp;not&nbsp;subject&nbsp;to&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;document.</span><br>
<span class="lineno"></span><span class="comment" id="6493172">//&nbsp;It&nbsp;may&nbsp;change&nbsp;signature&nbsp;from&nbsp;release&nbsp;to&nbsp;release.</span><br>
<span class="lineno"></span><span class="keyword" id="6493224">func</span>&nbsp;<span class="ident" id="6493229">MainStart</span><span class="op" id="6493238">(</span><span class="ident" id="6493239">matchString</span>&nbsp;<span class="keyword" id="6493251">func</span><span class="op" id="6493255">(</span><span class="ident" id="6493256">pat</span><span class="op" id="6493259">,</span>&nbsp;<span class="ident" id="6493261">str</span>&nbsp;<span class="builtintype" id="6493265">string</span><span class="op" id="6493271">)</span>&nbsp;<span class="op" id="6493273">(</span><span class="builtintype" id="6493274">bool</span><span class="op" id="6493278">,</span>&nbsp;<span class="builtintype" id="6493280">error</span><span class="op" id="6493285">)</span><span class="op" id="6493286">,</span>&nbsp;<span class="ident" id="6493288">tests</span>&nbsp;<span class="op" id="6493294">[</span><span class="op" id="6493295">]</span><span class="ident" id="6493296"><a href="/testing/testing.go.html#6491756">InternalTest</a></span><span class="op" id="6493308">,</span>&nbsp;<span class="ident" id="6493310">benchmarks</span>&nbsp;<span class="op" id="6493321">[</span><span class="op" id="6493322">]</span><span class="ident" id="6493323"><a href="/testing/benchmark.go.html#6460553">InternalBenchmark</a></span><span class="op" id="6493340">,</span>&nbsp;<span class="ident" id="6493342">examples</span>&nbsp;<span class="op" id="6493351">[</span><span class="op" id="6493352">]</span><span class="ident" id="6493353"><a href="/testing/example.go.html#6475352">InternalExample</a></span><span class="op" id="6493368">)</span>&nbsp;<span class="op" id="6493370">*</span><span class="ident" id="6493371"><a href="/testing/testing.go.html#6492858">M</a></span>&nbsp;<span class="op" id="6493373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493376">return</span>&nbsp;<span class="op" id="6493383">&amp;</span><span class="ident" id="6493384"><a href="/testing/testing.go.html#6492858">M</a></span><span class="op" id="6493385">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493389">matchString</span><span class="op" id="6493400">:</span>&nbsp;<span class="ident" id="6493402"><a href="/testing/testing.go.html#6493239">matchString</a></span><span class="op" id="6493413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493417">tests</span><span class="op" id="6493422">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493430"><a href="/testing/testing.go.html#6493288">tests</a></span><span class="op" id="6493435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493439">benchmarks</span><span class="op" id="6493449">:</span>&nbsp;&nbsp;<span class="ident" id="6493452"><a href="/testing/testing.go.html#6493310">benchmarks</a></span><span class="op" id="6493462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493466">examples</span><span class="op" id="6493474">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493479"><a href="/testing/testing.go.html#6493342">examples</a></span><span class="op" id="6493487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493490">}</span><br>
<span class="lineno">475</span><span class="op" id="6493492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6493495">//&nbsp;Run&nbsp;runs&nbsp;the&nbsp;tests.&nbsp;It&nbsp;returns&nbsp;an&nbsp;exit&nbsp;code&nbsp;to&nbsp;pass&nbsp;to&nbsp;os.Exit.</span><br>
<span class="lineno"></span><span class="keyword" id="6493562">func</span>&nbsp;<span class="op" id="6493567">(</span><span class="ident" id="6493568">m</span>&nbsp;<span class="op" id="6493570">*</span><span class="ident" id="6493571"><a href="/testing/testing.go.html#6492858">M</a></span><span class="op" id="6493572">)</span>&nbsp;<span class="ident" id="6493574">Run</span><span class="op" id="6493577">(</span><span class="op" id="6493578">)</span>&nbsp;<span class="builtintype" id="6493580">int</span>&nbsp;<span class="op" id="6493584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493587"><a href="/testing/testing.go.html#6482313">flag</a></span><span class="op" id="6493591">.</span><span class="ident" id="6493592">Parse</span><span class="op" id="6493597">(</span><span class="op" id="6493598">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493601"><a href="/testing/testing.go.html#6499104">parseCpuList</a></span><span class="op" id="6493613">(</span><span class="op" id="6493614">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493618"><a href="/testing/testing.go.html#6496098">before</a></span><span class="op" id="6493624">(</span><span class="op" id="6493625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493628"><a href="/testing/testing.go.html#6498858">startAlarm</a></span><span class="op" id="6493638">(</span><span class="op" id="6493639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493642"><a href="/testing/testing.go.html#6484442">haveExamples</a></span>&nbsp;<span class="op" id="6493655">=</span>&nbsp;<span class="builtinfunc" id="6493657">len</span><span class="op" id="6493660">(</span><span class="ident" id="6493661"><a href="/testing/testing.go.html#6493568">m</a></span><span class="op" id="6493662">.</span><span class="ident" id="6493663">examples</span><span class="op" id="6493671">)</span>&nbsp;<span class="op" id="6493673">&gt;</span>&nbsp;<span class="num" id="6493675">0</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493678">testOk</span>&nbsp;<span class="op" id="6493685">:=</span>&nbsp;<span class="ident" id="6493688"><a href="/testing/testing.go.html#6494281">RunTests</a></span><span class="op" id="6493696">(</span><span class="ident" id="6493697"><a href="/testing/testing.go.html#6493568">m</a></span><span class="op" id="6493698">.</span><span class="ident" id="6493699">matchString</span><span class="op" id="6493710">,</span>&nbsp;<span class="ident" id="6493712"><a href="/testing/testing.go.html#6493568">m</a></span><span class="op" id="6493713">.</span><span class="ident" id="6493714">tests</span><span class="op" id="6493719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493722">exampleOk</span>&nbsp;<span class="op" id="6493732">:=</span>&nbsp;<span class="ident" id="6493735"><a href="/testing/example.go.html#6475430">RunExamples</a></span><span class="op" id="6493746">(</span><span class="ident" id="6493747"><a href="/testing/testing.go.html#6493568">m</a></span><span class="op" id="6493748">.</span><span class="ident" id="6493749">matchString</span><span class="op" id="6493760">,</span>&nbsp;<span class="ident" id="6493762"><a href="/testing/testing.go.html#6493568">m</a></span><span class="op" id="6493763">.</span><span class="ident" id="6493764">examples</span><span class="op" id="6493772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493775"><a href="/testing/testing.go.html#6499045">stopAlarm</a></span><span class="op" id="6493784">(</span><span class="op" id="6493785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493788">if</span>&nbsp;<span class="op" id="6493791">!</span><span class="ident" id="6493792"><a href="/testing/testing.go.html#6493678">testOk</a></span>&nbsp;<span class="op" id="6493799">||</span>&nbsp;<span class="op" id="6493802">!</span><span class="ident" id="6493803"><a href="/testing/testing.go.html#6493722">exampleOk</a></span>&nbsp;<span class="op" id="6493813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493817"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6493820">.</span><span class="ident" id="6493821">Println</span><span class="op" id="6493828">(</span><span class="string" id="6493829">&#34;FAIL&#34;</span><span class="op" id="6493835">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493839"><a href="/testing/testing.go.html#6496882">after</a></span><span class="op" id="6493844">(</span><span class="op" id="6493845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493849">return</span>&nbsp;<span class="num" id="6493856">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493862"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6493865">.</span><span class="ident" id="6493866">Println</span><span class="op" id="6493873">(</span><span class="string" id="6493874">&#34;PASS&#34;</span><span class="op" id="6493880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493883"><a href="/testing/benchmark.go.html#6467179">RunBenchmarks</a></span><span class="op" id="6493896">(</span><span class="ident" id="6493897"><a href="/testing/testing.go.html#6493568">m</a></span><span class="op" id="6493898">.</span><span class="ident" id="6493899">matchString</span><span class="op" id="6493910">,</span>&nbsp;<span class="ident" id="6493912"><a href="/testing/testing.go.html#6493568">m</a></span><span class="op" id="6493913">.</span><span class="ident" id="6493914">benchmarks</span><span class="op" id="6493924">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493927"><a href="/testing/testing.go.html#6496882">after</a></span><span class="op" id="6493932">(</span><span class="op" id="6493933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493936">return</span>&nbsp;<span class="num" id="6493943">0</span><br>
<span class="lineno"></span><span class="op" id="6493945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6493948">func</span>&nbsp;<span class="op" id="6493953">(</span><span class="ident" id="6493954">t</span>&nbsp;<span class="op" id="6493956">*</span><span class="ident" id="6493957"><a href="/testing/testing.go.html#6487190">T</a></span><span class="op" id="6493958">)</span>&nbsp;<span class="ident" id="6493960">report</span><span class="op" id="6493966">(</span><span class="op" id="6493967">)</span>&nbsp;<span class="op" id="6493969">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493972">dstr</span>&nbsp;<span class="op" id="6493977">:=</span>&nbsp;<span class="ident" id="6493980"><a href="/testing/testing.go.html#6486324">fmtDuration</a></span><span class="op" id="6493991">(</span><span class="ident" id="6493992"><a href="/testing/testing.go.html#6493954">t</a></span><span class="op" id="6493993">.</span><span class="ident" id="6493994">duration</span><span class="op" id="6494002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494005">format</span>&nbsp;<span class="op" id="6494012">:=</span>&nbsp;<span class="string" id="6494015">&#34;---&nbsp;%s:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494038">if</span>&nbsp;<span class="ident" id="6494041"><a href="/testing/testing.go.html#6493954">t</a></span><span class="op" id="6494042">.</span><span class="ident" id="6494043">Failed</span><span class="op" id="6494049">(</span><span class="op" id="6494050">)</span>&nbsp;<span class="op" id="6494052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494056"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6494059">.</span><span class="ident" id="6494060">Printf</span><span class="op" id="6494066">(</span><span class="ident" id="6494067"><a href="/testing/testing.go.html#6494005">format</a></span><span class="op" id="6494073">,</span>&nbsp;<span class="string" id="6494075">&#34;FAIL&#34;</span><span class="op" id="6494081">,</span>&nbsp;<span class="ident" id="6494083"><a href="/testing/testing.go.html#6493954">t</a></span><span class="op" id="6494084">.</span><span class="ident" id="6494085">name</span><span class="op" id="6494089">,</span>&nbsp;<span class="ident" id="6494091"><a href="/testing/testing.go.html#6493972">dstr</a></span><span class="op" id="6494095">,</span>&nbsp;<span class="ident" id="6494097"><a href="/testing/testing.go.html#6493954">t</a></span><span class="op" id="6494098">.</span><span class="ident" id="6494099">output</span><span class="op" id="6494105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6494108">}</span>&nbsp;<span class="keyword" id="6494110">else</span>&nbsp;<span class="keyword" id="6494115">if</span>&nbsp;<span class="op" id="6494118">*</span><span class="ident" id="6494119"><a href="/testing/testing.go.html#6483257">chatty</a></span>&nbsp;<span class="op" id="6494126">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494130">if</span>&nbsp;<span class="ident" id="6494133"><a href="/testing/testing.go.html#6493954">t</a></span><span class="op" id="6494134">.</span><span class="ident" id="6494135">Skipped</span><span class="op" id="6494142">(</span><span class="op" id="6494143">)</span>&nbsp;<span class="op" id="6494145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494150"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6494153">.</span><span class="ident" id="6494154">Printf</span><span class="op" id="6494160">(</span><span class="ident" id="6494161"><a href="/testing/testing.go.html#6494005">format</a></span><span class="op" id="6494167">,</span>&nbsp;<span class="string" id="6494169">&#34;SKIP&#34;</span><span class="op" id="6494175">,</span>&nbsp;<span class="ident" id="6494177"><a href="/testing/testing.go.html#6493954">t</a></span><span class="op" id="6494178">.</span><span class="ident" id="6494179">name</span><span class="op" id="6494183">,</span>&nbsp;<span class="ident" id="6494185"><a href="/testing/testing.go.html#6493972">dstr</a></span><span class="op" id="6494189">,</span>&nbsp;<span class="ident" id="6494191"><a href="/testing/testing.go.html#6493954">t</a></span><span class="op" id="6494192">.</span><span class="ident" id="6494193">output</span><span class="op" id="6494199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6494203">}</span>&nbsp;<span class="keyword" id="6494205">else</span>&nbsp;<span class="op" id="6494210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494215"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6494218">.</span><span class="ident" id="6494219">Printf</span><span class="op" id="6494225">(</span><span class="ident" id="6494226"><a href="/testing/testing.go.html#6494005">format</a></span><span class="op" id="6494232">,</span>&nbsp;<span class="string" id="6494234">&#34;PASS&#34;</span><span class="op" id="6494240">,</span>&nbsp;<span class="ident" id="6494242"><a href="/testing/testing.go.html#6493954">t</a></span><span class="op" id="6494243">.</span><span class="ident" id="6494244">name</span><span class="op" id="6494248">,</span>&nbsp;<span class="ident" id="6494250"><a href="/testing/testing.go.html#6493972">dstr</a></span><span class="op" id="6494254">,</span>&nbsp;<span class="ident" id="6494256"><a href="/testing/testing.go.html#6493954">t</a></span><span class="op" id="6494257">.</span><span class="ident" id="6494258">output</span><span class="op" id="6494264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6494268">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6494271">}</span><br>
<span class="lineno"></span><span class="op" id="6494273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6494276">func</span>&nbsp;<span class="ident" id="6494281">RunTests</span><span class="op" id="6494289">(</span><span class="ident" id="6494290">matchString</span>&nbsp;<span class="keyword" id="6494302">func</span><span class="op" id="6494306">(</span><span class="ident" id="6494307">pat</span><span class="op" id="6494310">,</span>&nbsp;<span class="ident" id="6494312">str</span>&nbsp;<span class="builtintype" id="6494316">string</span><span class="op" id="6494322">)</span>&nbsp;<span class="op" id="6494324">(</span><span class="builtintype" id="6494325">bool</span><span class="op" id="6494329">,</span>&nbsp;<span class="builtintype" id="6494331">error</span><span class="op" id="6494336">)</span><span class="op" id="6494337">,</span>&nbsp;<span class="ident" id="6494339">tests</span>&nbsp;<span class="op" id="6494345">[</span><span class="op" id="6494346">]</span><span class="ident" id="6494347"><a href="/testing/testing.go.html#6491756">InternalTest</a></span><span class="op" id="6494359">)</span>&nbsp;<span class="op" id="6494361">(</span><span class="ident" id="6494362">ok</span>&nbsp;<span class="builtintype" id="6494365">bool</span><span class="op" id="6494369">)</span>&nbsp;<span class="op" id="6494371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494374"><a href="/testing/testing.go.html#6494362">ok</a></span>&nbsp;<span class="op" id="6494377">=</span>&nbsp;<span class="ident" id="6494379">true</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494385">if</span>&nbsp;<span class="builtinfunc" id="6494388">len</span><span class="op" id="6494391">(</span><span class="ident" id="6494392"><a href="/testing/testing.go.html#6494339">tests</a></span><span class="op" id="6494397">)</span>&nbsp;<span class="op" id="6494399">==</span>&nbsp;<span class="num" id="6494402">0</span>&nbsp;<span class="op" id="6494404">&amp;&amp;</span>&nbsp;<span class="op" id="6494407">!</span><span class="ident" id="6494408"><a href="/testing/testing.go.html#6484442">haveExamples</a></span>&nbsp;<span class="op" id="6494421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494425"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6494428">.</span><span class="ident" id="6494429">Fprintln</span><span class="op" id="6494437">(</span><span class="ident" id="6494438"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6494440">.</span><span class="ident" id="6494441">Stderr</span><span class="op" id="6494447">,</span>&nbsp;<span class="string" id="6494449">&#34;testing:&nbsp;warning:&nbsp;no&nbsp;tests&nbsp;to&nbsp;run&#34;</span><span class="op" id="6494484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494488">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6494496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494499">for</span>&nbsp;<span class="ident" id="6494503">_</span><span class="op" id="6494504">,</span>&nbsp;<span class="ident" id="6494506">procs</span>&nbsp;<span class="op" id="6494512">:=</span>&nbsp;<span class="keyword" id="6494515">range</span>&nbsp;<span class="ident" id="6494521"><a href="/testing/testing.go.html#6484485">cpuList</a></span>&nbsp;<span class="op" id="6494529">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494533"><a href="/testing/testing.go.html#6482334">runtime</a></span><span class="op" id="6494540">.</span><span class="ident" id="6494541">GOMAXPROCS</span><span class="op" id="6494551">(</span><span class="ident" id="6494552"><a href="/testing/testing.go.html#6494506">procs</a></span><span class="op" id="6494557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6494561">//&nbsp;We&nbsp;build&nbsp;a&nbsp;new&nbsp;channel&nbsp;tree&nbsp;for&nbsp;each&nbsp;run&nbsp;of&nbsp;the&nbsp;loop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6494620">//&nbsp;collector&nbsp;merges&nbsp;in&nbsp;one&nbsp;channel&nbsp;all&nbsp;the&nbsp;upstream&nbsp;signals&nbsp;from&nbsp;parallel&nbsp;tests.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6494703">//&nbsp;If&nbsp;all&nbsp;tests&nbsp;pump&nbsp;to&nbsp;the&nbsp;same&nbsp;channel,&nbsp;a&nbsp;bug&nbsp;can&nbsp;occur&nbsp;where&nbsp;a&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6494776">//&nbsp;kicks&nbsp;off&nbsp;a&nbsp;goroutine&nbsp;that&nbsp;Fails,&nbsp;yet&nbsp;the&nbsp;test&nbsp;still&nbsp;delivers&nbsp;a&nbsp;completion&nbsp;signal,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6494864">//&nbsp;which&nbsp;skews&nbsp;the&nbsp;counting.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494895">var</span>&nbsp;<span class="ident" id="6494899">collector</span>&nbsp;<span class="op" id="6494909">=</span>&nbsp;<span class="builtinfunc" id="6494911">make</span><span class="op" id="6494915">(</span><span class="keyword" id="6494916">chan</span>&nbsp;<span class="keyword" id="6494921">interface</span><span class="op" id="6494930">{</span><span class="op" id="6494931">}</span><span class="op" id="6494932">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494937">numParallel</span>&nbsp;<span class="op" id="6494949">:=</span>&nbsp;<span class="num" id="6494952">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494956">startParallel</span>&nbsp;<span class="op" id="6494970">:=</span>&nbsp;<span class="builtinfunc" id="6494973">make</span><span class="op" id="6494977">(</span><span class="keyword" id="6494978">chan</span>&nbsp;<span class="builtintype" id="6494983">bool</span><span class="op" id="6494987">)</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494992">for</span>&nbsp;<span class="ident" id="6494996">i</span>&nbsp;<span class="op" id="6494998">:=</span>&nbsp;<span class="num" id="6495001">0</span><span class="op" id="6495002">;</span>&nbsp;<span class="ident" id="6495004"><a href="/testing/testing.go.html#6494996">i</a></span>&nbsp;<span class="op" id="6495006">&lt;</span>&nbsp;<span class="builtinfunc" id="6495008">len</span><span class="op" id="6495011">(</span><span class="ident" id="6495012"><a href="/testing/testing.go.html#6494339">tests</a></span><span class="op" id="6495017">)</span><span class="op" id="6495018">;</span>&nbsp;<span class="ident" id="6495020"><a href="/testing/testing.go.html#6494996">i</a></span><span class="op" id="6495021">++</span>&nbsp;<span class="op" id="6495024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495029">matched</span><span class="op" id="6495036">,</span>&nbsp;<span class="ident" id="6495038">err</span>&nbsp;<span class="op" id="6495042">:=</span>&nbsp;<span class="ident" id="6495045"><a href="/testing/testing.go.html#6494290">matchString</a></span><span class="op" id="6495056">(</span><span class="op" id="6495057">*</span><span class="ident" id="6495058"><a href="/testing/testing.go.html#6483459">match</a></span><span class="op" id="6495063">,</span>&nbsp;<span class="ident" id="6495065"><a href="/testing/testing.go.html#6494339">tests</a></span><span class="op" id="6495070">[</span><span class="ident" id="6495071"><a href="/testing/testing.go.html#6494996">i</a></span><span class="op" id="6495072">]</span><span class="op" id="6495073">.</span><span class="ident" id="6495074">Name</span><span class="op" id="6495078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495083">if</span>&nbsp;<span class="ident" id="6495086"><a href="/testing/testing.go.html#6495038">err</a></span>&nbsp;<span class="op" id="6495090">!=</span>&nbsp;<span class="ident" id="6495093">nil</span>&nbsp;<span class="op" id="6495097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495103"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6495106">.</span><span class="ident" id="6495107">Fprintf</span><span class="op" id="6495114">(</span><span class="ident" id="6495115"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6495117">.</span><span class="ident" id="6495118">Stderr</span><span class="op" id="6495124">,</span>&nbsp;<span class="string" id="6495126">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="6495171">,</span>&nbsp;<span class="ident" id="6495173"><a href="/testing/testing.go.html#6495038">err</a></span><span class="op" id="6495176">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495182"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6495184">.</span><span class="ident" id="6495185">Exit</span><span class="op" id="6495189">(</span><span class="num" id="6495190">1</span><span class="op" id="6495191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495201">if</span>&nbsp;<span class="op" id="6495204">!</span><span class="ident" id="6495205"><a href="/testing/testing.go.html#6495029">matched</a></span>&nbsp;<span class="op" id="6495213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495219">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495231">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495236">testName</span>&nbsp;<span class="op" id="6495245">:=</span>&nbsp;<span class="ident" id="6495248"><a href="/testing/testing.go.html#6494339">tests</a></span><span class="op" id="6495253">[</span><span class="ident" id="6495254"><a href="/testing/testing.go.html#6494996">i</a></span><span class="op" id="6495255">]</span><span class="op" id="6495256">.</span><span class="ident" id="6495257">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495265">if</span>&nbsp;<span class="ident" id="6495268"><a href="/testing/testing.go.html#6494506">procs</a></span>&nbsp;<span class="op" id="6495274">!=</span>&nbsp;<span class="num" id="6495277">1</span>&nbsp;<span class="op" id="6495279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495285"><a href="/testing/testing.go.html#6495236">testName</a></span>&nbsp;<span class="op" id="6495294">=</span>&nbsp;<span class="ident" id="6495296"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6495299">.</span><span class="ident" id="6495300">Sprintf</span><span class="op" id="6495307">(</span><span class="string" id="6495308">&#34;%s-%d&#34;</span><span class="op" id="6495315">,</span>&nbsp;<span class="ident" id="6495317"><a href="/testing/testing.go.html#6494339">tests</a></span><span class="op" id="6495322">[</span><span class="ident" id="6495323"><a href="/testing/testing.go.html#6494996">i</a></span><span class="op" id="6495324">]</span><span class="op" id="6495325">.</span><span class="ident" id="6495326">Name</span><span class="op" id="6495330">,</span>&nbsp;<span class="ident" id="6495332"><a href="/testing/testing.go.html#6494506">procs</a></span><span class="op" id="6495337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495347">t</span>&nbsp;<span class="op" id="6495349">:=</span>&nbsp;<span class="op" id="6495352">&amp;</span><span class="ident" id="6495353"><a href="/testing/testing.go.html#6487190">T</a></span><span class="op" id="6495354">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495360">common</span><span class="op" id="6495366">:</span>&nbsp;<span class="ident" id="6495368"><a href="/testing/testing.go.html#6484606">common</a></span><span class="op" id="6495374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495381">signal</span><span class="op" id="6495387">:</span>&nbsp;<span class="builtinfunc" id="6495389">make</span><span class="op" id="6495393">(</span><span class="keyword" id="6495394">chan</span>&nbsp;<span class="keyword" id="6495399">interface</span><span class="op" id="6495408">{</span><span class="op" id="6495409">}</span><span class="op" id="6495410">)</span><span class="op" id="6495411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495417">}</span><span class="op" id="6495418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495424">name</span><span class="op" id="6495428">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495439"><a href="/testing/testing.go.html#6495236">testName</a></span><span class="op" id="6495447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495453">startParallel</span><span class="op" id="6495466">:</span>&nbsp;<span class="ident" id="6495468"><a href="/testing/testing.go.html#6494956">startParallel</a></span><span class="op" id="6495481">,</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495491"><a href="/testing/testing.go.html#6495347">t</a></span><span class="op" id="6495492">.</span><span class="ident" id="6495493">self</span>&nbsp;<span class="op" id="6495498">=</span>&nbsp;<span class="ident" id="6495500"><a href="/testing/testing.go.html#6495347">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495505">if</span>&nbsp;<span class="op" id="6495508">*</span><span class="ident" id="6495509"><a href="/testing/testing.go.html#6483257">chatty</a></span>&nbsp;<span class="op" id="6495516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495522"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6495525">.</span><span class="ident" id="6495526">Printf</span><span class="op" id="6495532">(</span><span class="string" id="6495533">&#34;===&nbsp;RUN&nbsp;%s\n&#34;</span><span class="op" id="6495547">,</span>&nbsp;<span class="ident" id="6495549"><a href="/testing/testing.go.html#6495347">t</a></span><span class="op" id="6495550">.</span><span class="ident" id="6495551">name</span><span class="op" id="6495555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495560">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495565">go</span>&nbsp;<span class="ident" id="6495568"><a href="/testing/testing.go.html#6491814">tRunner</a></span><span class="op" id="6495575">(</span><span class="ident" id="6495576"><a href="/testing/testing.go.html#6495347">t</a></span><span class="op" id="6495577">,</span>&nbsp;<span class="op" id="6495579">&amp;</span><span class="ident" id="6495580"><a href="/testing/testing.go.html#6494339">tests</a></span><span class="op" id="6495585">[</span><span class="ident" id="6495586"><a href="/testing/testing.go.html#6494996">i</a></span><span class="op" id="6495587">]</span><span class="op" id="6495588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495593">out</span>&nbsp;<span class="op" id="6495597">:=</span>&nbsp;<span class="op" id="6495600">(</span><span class="op" id="6495601">&lt;-</span><span class="ident" id="6495603"><a href="/testing/testing.go.html#6495347">t</a></span><span class="op" id="6495604">.</span><span class="ident" id="6495605">signal</span><span class="op" id="6495611">)</span><span class="op" id="6495612">.</span><span class="op" id="6495613">(</span><span class="op" id="6495614">*</span><span class="ident" id="6495615"><a href="/testing/testing.go.html#6487190">T</a></span><span class="op" id="6495616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495621">if</span>&nbsp;<span class="ident" id="6495624"><a href="/testing/testing.go.html#6495593">out</a></span>&nbsp;<span class="op" id="6495628">==</span>&nbsp;<span class="ident" id="6495631">nil</span>&nbsp;<span class="op" id="6495635">{</span>&nbsp;<span class="comment" id="6495637">//&nbsp;Parallel&nbsp;run.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495658">go</span>&nbsp;<span class="keyword" id="6495661">func</span><span class="op" id="6495665">(</span><span class="op" id="6495666">)</span>&nbsp;<span class="op" id="6495668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495675"><a href="/testing/testing.go.html#6494899">collector</a></span>&nbsp;<span class="op" id="6495685">&lt;-</span>&nbsp;<span class="op" id="6495688">&lt;-</span><span class="ident" id="6495690"><a href="/testing/testing.go.html#6495347">t</a></span><span class="op" id="6495691">.</span><span class="ident" id="6495692">signal</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495703">}</span><span class="op" id="6495704">(</span><span class="op" id="6495705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495711"><a href="/testing/testing.go.html#6494937">numParallel</a></span><span class="op" id="6495722">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495729">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495746"><a href="/testing/testing.go.html#6495347">t</a></span><span class="op" id="6495747">.</span><span class="ident" id="6495748">report</span><span class="op" id="6495754">(</span><span class="op" id="6495755">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495760"><a href="/testing/testing.go.html#6494362">ok</a></span>&nbsp;<span class="op" id="6495763">=</span>&nbsp;<span class="ident" id="6495765"><a href="/testing/testing.go.html#6494362">ok</a></span>&nbsp;<span class="op" id="6495768">&amp;&amp;</span>&nbsp;<span class="op" id="6495771">!</span><span class="ident" id="6495772"><a href="/testing/testing.go.html#6495593">out</a></span><span class="op" id="6495775">.</span><span class="ident" id="6495776">Failed</span><span class="op" id="6495782">(</span><span class="op" id="6495783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495792">running</span>&nbsp;<span class="op" id="6495800">:=</span>&nbsp;<span class="num" id="6495803">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495807">for</span>&nbsp;<span class="ident" id="6495811"><a href="/testing/testing.go.html#6494937">numParallel</a></span><span class="op" id="6495822">+</span><span class="ident" id="6495823"><a href="/testing/testing.go.html#6495792">running</a></span>&nbsp;<span class="op" id="6495831">&gt;</span>&nbsp;<span class="num" id="6495833">0</span>&nbsp;<span class="op" id="6495835">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495840">if</span>&nbsp;<span class="ident" id="6495843"><a href="/testing/testing.go.html#6495792">running</a></span>&nbsp;<span class="op" id="6495851">&lt;</span>&nbsp;<span class="op" id="6495853">*</span><span class="ident" id="6495854"><a href="/testing/testing.go.html#6484344">parallel</a></span>&nbsp;<span class="op" id="6495863">&amp;&amp;</span>&nbsp;<span class="ident" id="6495866"><a href="/testing/testing.go.html#6494937">numParallel</a></span>&nbsp;<span class="op" id="6495878">&gt;</span>&nbsp;<span class="num" id="6495880">0</span>&nbsp;<span class="op" id="6495882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495888"><a href="/testing/testing.go.html#6494956">startParallel</a></span>&nbsp;<span class="op" id="6495902">&lt;-</span>&nbsp;<span class="ident" id="6495905">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495914"><a href="/testing/testing.go.html#6495792">running</a></span><span class="op" id="6495921">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495928"><a href="/testing/testing.go.html#6494937">numParallel</a></span><span class="op" id="6495939">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6495946">continue</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495963">t</span>&nbsp;<span class="op" id="6495965">:=</span>&nbsp;<span class="op" id="6495968">(</span><span class="op" id="6495969">&lt;-</span><span class="ident" id="6495971"><a href="/testing/testing.go.html#6494899">collector</a></span><span class="op" id="6495980">)</span><span class="op" id="6495981">.</span><span class="op" id="6495982">(</span><span class="op" id="6495983">*</span><span class="ident" id="6495984"><a href="/testing/testing.go.html#6487190">T</a></span><span class="op" id="6495985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495990"><a href="/testing/testing.go.html#6495963">t</a></span><span class="op" id="6495991">.</span><span class="ident" id="6495992">report</span><span class="op" id="6495998">(</span><span class="op" id="6495999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496004"><a href="/testing/testing.go.html#6494362">ok</a></span>&nbsp;<span class="op" id="6496007">=</span>&nbsp;<span class="ident" id="6496009"><a href="/testing/testing.go.html#6494362">ok</a></span>&nbsp;<span class="op" id="6496012">&amp;&amp;</span>&nbsp;<span class="op" id="6496015">!</span><span class="ident" id="6496016"><a href="/testing/testing.go.html#6495963">t</a></span><span class="op" id="6496017">.</span><span class="ident" id="6496018">Failed</span><span class="op" id="6496024">(</span><span class="op" id="6496025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496030"><a href="/testing/testing.go.html#6495792">running</a></span><span class="op" id="6496037">--</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6496042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6496045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496048">return</span><br>
<span class="lineno"></span><span class="op" id="6496055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="comment" id="6496058">//&nbsp;before&nbsp;runs&nbsp;before&nbsp;all&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="6496093">func</span>&nbsp;<span class="ident" id="6496098">before</span><span class="op" id="6496104">(</span><span class="op" id="6496105">)</span>&nbsp;<span class="op" id="6496107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496110">if</span>&nbsp;<span class="op" id="6496113">*</span><span class="ident" id="6496114"><a href="/testing/testing.go.html#6483680">memProfileRate</a></span>&nbsp;<span class="op" id="6496129">&gt;</span>&nbsp;<span class="num" id="6496131">0</span>&nbsp;<span class="op" id="6496133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496137"><a href="/testing/testing.go.html#6482334">runtime</a></span><span class="op" id="6496144">.</span><span class="ident" id="6496145">MemProfileRate</span>&nbsp;<span class="op" id="6496160">=</span>&nbsp;<span class="op" id="6496162">*</span><span class="ident" id="6496163"><a href="/testing/testing.go.html#6483680">memProfileRate</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6496179">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496182">if</span>&nbsp;<span class="op" id="6496185">*</span><span class="ident" id="6496186"><a href="/testing/testing.go.html#6483774">cpuProfile</a></span>&nbsp;<span class="op" id="6496197">!=</span>&nbsp;<span class="string" id="6496200">&#34;&#34;</span>&nbsp;<span class="op" id="6496203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496207">f</span><span class="op" id="6496208">,</span>&nbsp;<span class="ident" id="6496210">err</span>&nbsp;<span class="op" id="6496214">:=</span>&nbsp;<span class="ident" id="6496217"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6496219">.</span><span class="ident" id="6496220">Create</span><span class="op" id="6496226">(</span><span class="ident" id="6496227"><a href="/testing/testing.go.html#6497877">toOutputDir</a></span><span class="op" id="6496238">(</span><span class="op" id="6496239">*</span><span class="ident" id="6496240"><a href="/testing/testing.go.html#6483774">cpuProfile</a></span><span class="op" id="6496250">)</span><span class="op" id="6496251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496255">if</span>&nbsp;<span class="ident" id="6496258"><a href="/testing/testing.go.html#6496210">err</a></span>&nbsp;<span class="op" id="6496262">!=</span>&nbsp;<span class="ident" id="6496265">nil</span>&nbsp;<span class="op" id="6496269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496274"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6496277">.</span><span class="ident" id="6496278">Fprintf</span><span class="op" id="6496285">(</span><span class="ident" id="6496286"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6496288">.</span><span class="ident" id="6496289">Stderr</span><span class="op" id="6496295">,</span>&nbsp;<span class="string" id="6496297">&#34;testing:&nbsp;%s&#34;</span><span class="op" id="6496310">,</span>&nbsp;<span class="ident" id="6496312"><a href="/testing/testing.go.html#6496210">err</a></span><span class="op" id="6496315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496320">return</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6496329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496333">if</span>&nbsp;<span class="ident" id="6496336">err</span>&nbsp;<span class="op" id="6496340">:=</span>&nbsp;<span class="ident" id="6496343"><a href="/testing/testing.go.html#6482345">pprof</a></span><span class="op" id="6496348">.</span><span class="ident" id="6496349">StartCPUProfile</span><span class="op" id="6496364">(</span><span class="ident" id="6496365"><a href="/testing/testing.go.html#6496207">f</a></span><span class="op" id="6496366">)</span><span class="op" id="6496367">;</span>&nbsp;<span class="ident" id="6496369"><a href="/testing/testing.go.html#6496336">err</a></span>&nbsp;<span class="op" id="6496373">!=</span>&nbsp;<span class="ident" id="6496376">nil</span>&nbsp;<span class="op" id="6496380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496385"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6496388">.</span><span class="ident" id="6496389">Fprintf</span><span class="op" id="6496396">(</span><span class="ident" id="6496397"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6496399">.</span><span class="ident" id="6496400">Stderr</span><span class="op" id="6496406">,</span>&nbsp;<span class="string" id="6496408">&#34;testing:&nbsp;can&#39;t&nbsp;start&nbsp;cpu&nbsp;profile:&nbsp;%s&#34;</span><span class="op" id="6496446">,</span>&nbsp;<span class="ident" id="6496448"><a href="/testing/testing.go.html#6496336">err</a></span><span class="op" id="6496451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496456"><a href="/testing/testing.go.html#6496207">f</a></span><span class="op" id="6496457">.</span><span class="ident" id="6496458">Close</span><span class="op" id="6496463">(</span><span class="op" id="6496464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496469">return</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6496478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6496482">//&nbsp;Could&nbsp;save&nbsp;f&nbsp;so&nbsp;after&nbsp;can&nbsp;call&nbsp;f.Close;&nbsp;not&nbsp;worth&nbsp;the&nbsp;effort.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6496548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496551">if</span>&nbsp;<span class="op" id="6496554">*</span><span class="ident" id="6496555"><a href="/testing/testing.go.html#6483887">blockProfile</a></span>&nbsp;<span class="op" id="6496568">!=</span>&nbsp;<span class="string" id="6496571">&#34;&#34;</span>&nbsp;<span class="op" id="6496574">&amp;&amp;</span>&nbsp;<span class="op" id="6496577">*</span><span class="ident" id="6496578"><a href="/testing/testing.go.html#6484016">blockProfileRate</a></span>&nbsp;<span class="op" id="6496595">&gt;=</span>&nbsp;<span class="num" id="6496598">0</span>&nbsp;<span class="op" id="6496600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496604"><a href="/testing/testing.go.html#6482334">runtime</a></span><span class="op" id="6496611">.</span><span class="ident" id="6496612">SetBlockProfileRate</span><span class="op" id="6496631">(</span><span class="op" id="6496632">*</span><span class="ident" id="6496633"><a href="/testing/testing.go.html#6484016">blockProfileRate</a></span><span class="op" id="6496649">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6496652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496655">if</span>&nbsp;<span class="op" id="6496658">*</span><span class="ident" id="6496659"><a href="/testing/testing.go.html#6483340">coverProfile</a></span>&nbsp;<span class="op" id="6496672">!=</span>&nbsp;<span class="string" id="6496675">&#34;&#34;</span>&nbsp;<span class="op" id="6496678">&amp;&amp;</span>&nbsp;<span class="ident" id="6496681"><a href="/testing/cover.go.html#6472686">cover</a></span><span class="op" id="6496686">.</span><span class="ident" id="6496687">Mode</span>&nbsp;<span class="op" id="6496692">==</span>&nbsp;<span class="string" id="6496695">&#34;&#34;</span>&nbsp;<span class="op" id="6496698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496702"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6496705">.</span><span class="ident" id="6496706">Fprintf</span><span class="op" id="6496713">(</span><span class="ident" id="6496714"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6496716">.</span><span class="ident" id="6496717">Stderr</span><span class="op" id="6496723">,</span>&nbsp;<span class="string" id="6496725">&#34;testing:&nbsp;cannot&nbsp;use&nbsp;-test.coverprofile&nbsp;because&nbsp;test&nbsp;binary&nbsp;was&nbsp;not&nbsp;built&nbsp;with&nbsp;coverage&nbsp;enabled\n&#34;</span><span class="op" id="6496823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496827"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6496829">.</span><span class="ident" id="6496830">Exit</span><span class="op" id="6496834">(</span><span class="num" id="6496835">2</span><span class="op" id="6496836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6496839">}</span><br>
<span class="lineno">610</span><span class="op" id="6496841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6496844">//&nbsp;after&nbsp;runs&nbsp;after&nbsp;all&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="6496877">func</span>&nbsp;<span class="ident" id="6496882">after</span><span class="op" id="6496887">(</span><span class="op" id="6496888">)</span>&nbsp;<span class="op" id="6496890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496893">if</span>&nbsp;<span class="op" id="6496896">*</span><span class="ident" id="6496897"><a href="/testing/testing.go.html#6483774">cpuProfile</a></span>&nbsp;<span class="op" id="6496908">!=</span>&nbsp;<span class="string" id="6496911">&#34;&#34;</span>&nbsp;<span class="op" id="6496914">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496918"><a href="/testing/testing.go.html#6482345">pprof</a></span><span class="op" id="6496923">.</span><span class="ident" id="6496924">StopCPUProfile</span><span class="op" id="6496938">(</span><span class="op" id="6496939">)</span>&nbsp;<span class="comment" id="6496941">//&nbsp;flushes&nbsp;profile&nbsp;to&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6496969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6496972">if</span>&nbsp;<span class="op" id="6496975">*</span><span class="ident" id="6496976"><a href="/testing/testing.go.html#6483565">memProfile</a></span>&nbsp;<span class="op" id="6496987">!=</span>&nbsp;<span class="string" id="6496990">&#34;&#34;</span>&nbsp;<span class="op" id="6496993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6496997">f</span><span class="op" id="6496998">,</span>&nbsp;<span class="ident" id="6497000">err</span>&nbsp;<span class="op" id="6497004">:=</span>&nbsp;<span class="ident" id="6497007"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6497009">.</span><span class="ident" id="6497010">Create</span><span class="op" id="6497016">(</span><span class="ident" id="6497017"><a href="/testing/testing.go.html#6497877">toOutputDir</a></span><span class="op" id="6497028">(</span><span class="op" id="6497029">*</span><span class="ident" id="6497030"><a href="/testing/testing.go.html#6483565">memProfile</a></span><span class="op" id="6497040">)</span><span class="op" id="6497041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497045">if</span>&nbsp;<span class="ident" id="6497048"><a href="/testing/testing.go.html#6497000">err</a></span>&nbsp;<span class="op" id="6497052">!=</span>&nbsp;<span class="ident" id="6497055">nil</span>&nbsp;<span class="op" id="6497059">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497064"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6497067">.</span><span class="ident" id="6497068">Fprintf</span><span class="op" id="6497075">(</span><span class="ident" id="6497076"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6497078">.</span><span class="ident" id="6497079">Stderr</span><span class="op" id="6497085">,</span>&nbsp;<span class="string" id="6497087">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="6497102">,</span>&nbsp;<span class="ident" id="6497104"><a href="/testing/testing.go.html#6497000">err</a></span><span class="op" id="6497107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497112"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6497114">.</span><span class="ident" id="6497115">Exit</span><span class="op" id="6497119">(</span><span class="num" id="6497120">2</span><span class="op" id="6497121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6497125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497129"><a href="/testing/testing.go.html#6482334">runtime</a></span><span class="op" id="6497136">.</span><span class="ident" id="6497137">GC</span><span class="op" id="6497139">(</span><span class="op" id="6497140">)</span>&nbsp;<span class="comment" id="6497142">//&nbsp;materialize&nbsp;all&nbsp;statistics</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497174">if</span>&nbsp;<span class="ident" id="6497177"><a href="/testing/testing.go.html#6497000">err</a></span>&nbsp;<span class="op" id="6497181">=</span>&nbsp;<span class="ident" id="6497183"><a href="/testing/testing.go.html#6482345">pprof</a></span><span class="op" id="6497188">.</span><span class="ident" id="6497189">WriteHeapProfile</span><span class="op" id="6497205">(</span><span class="ident" id="6497206"><a href="/testing/testing.go.html#6496997">f</a></span><span class="op" id="6497207">)</span><span class="op" id="6497208">;</span>&nbsp;<span class="ident" id="6497210"><a href="/testing/testing.go.html#6497000">err</a></span>&nbsp;<span class="op" id="6497214">!=</span>&nbsp;<span class="ident" id="6497217">nil</span>&nbsp;<span class="op" id="6497221">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497226"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6497229">.</span><span class="ident" id="6497230">Fprintf</span><span class="op" id="6497237">(</span><span class="ident" id="6497238"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6497240">.</span><span class="ident" id="6497241">Stderr</span><span class="op" id="6497247">,</span>&nbsp;<span class="string" id="6497249">&#34;testing:&nbsp;can&#39;t&nbsp;write&nbsp;%s:&nbsp;%s\n&#34;</span><span class="op" id="6497280">,</span>&nbsp;<span class="op" id="6497282">*</span><span class="ident" id="6497283"><a href="/testing/testing.go.html#6483565">memProfile</a></span><span class="op" id="6497293">,</span>&nbsp;<span class="ident" id="6497295"><a href="/testing/testing.go.html#6497000">err</a></span><span class="op" id="6497298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497303"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6497305">.</span><span class="ident" id="6497306">Exit</span><span class="op" id="6497310">(</span><span class="num" id="6497311">2</span><span class="op" id="6497312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6497316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497320"><a href="/testing/testing.go.html#6496997">f</a></span><span class="op" id="6497321">.</span><span class="ident" id="6497322">Close</span><span class="op" id="6497327">(</span><span class="op" id="6497328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6497331">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497334">if</span>&nbsp;<span class="op" id="6497337">*</span><span class="ident" id="6497338"><a href="/testing/testing.go.html#6483887">blockProfile</a></span>&nbsp;<span class="op" id="6497351">!=</span>&nbsp;<span class="string" id="6497354">&#34;&#34;</span>&nbsp;<span class="op" id="6497357">&amp;&amp;</span>&nbsp;<span class="op" id="6497360">*</span><span class="ident" id="6497361"><a href="/testing/testing.go.html#6484016">blockProfileRate</a></span>&nbsp;<span class="op" id="6497378">&gt;=</span>&nbsp;<span class="num" id="6497381">0</span>&nbsp;<span class="op" id="6497383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497387">f</span><span class="op" id="6497388">,</span>&nbsp;<span class="ident" id="6497390">err</span>&nbsp;<span class="op" id="6497394">:=</span>&nbsp;<span class="ident" id="6497397"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6497399">.</span><span class="ident" id="6497400">Create</span><span class="op" id="6497406">(</span><span class="ident" id="6497407"><a href="/testing/testing.go.html#6497877">toOutputDir</a></span><span class="op" id="6497418">(</span><span class="op" id="6497419">*</span><span class="ident" id="6497420"><a href="/testing/testing.go.html#6483887">blockProfile</a></span><span class="op" id="6497432">)</span><span class="op" id="6497433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497437">if</span>&nbsp;<span class="ident" id="6497440"><a href="/testing/testing.go.html#6497390">err</a></span>&nbsp;<span class="op" id="6497444">!=</span>&nbsp;<span class="ident" id="6497447">nil</span>&nbsp;<span class="op" id="6497451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497456"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6497459">.</span><span class="ident" id="6497460">Fprintf</span><span class="op" id="6497467">(</span><span class="ident" id="6497468"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6497470">.</span><span class="ident" id="6497471">Stderr</span><span class="op" id="6497477">,</span>&nbsp;<span class="string" id="6497479">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="6497494">,</span>&nbsp;<span class="ident" id="6497496"><a href="/testing/testing.go.html#6497390">err</a></span><span class="op" id="6497499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497504"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6497506">.</span><span class="ident" id="6497507">Exit</span><span class="op" id="6497511">(</span><span class="num" id="6497512">2</span><span class="op" id="6497513">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6497517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497521">if</span>&nbsp;<span class="ident" id="6497524"><a href="/testing/testing.go.html#6497390">err</a></span>&nbsp;<span class="op" id="6497528">=</span>&nbsp;<span class="ident" id="6497530"><a href="/testing/testing.go.html#6482345">pprof</a></span><span class="op" id="6497535">.</span><span class="ident" id="6497536">Lookup</span><span class="op" id="6497542">(</span><span class="string" id="6497543">&#34;block&#34;</span><span class="op" id="6497550">)</span><span class="op" id="6497551">.</span><span class="ident" id="6497552">WriteTo</span><span class="op" id="6497559">(</span><span class="ident" id="6497560"><a href="/testing/testing.go.html#6497387">f</a></span><span class="op" id="6497561">,</span>&nbsp;<span class="num" id="6497563">0</span><span class="op" id="6497564">)</span><span class="op" id="6497565">;</span>&nbsp;<span class="ident" id="6497567"><a href="/testing/testing.go.html#6497390">err</a></span>&nbsp;<span class="op" id="6497571">!=</span>&nbsp;<span class="ident" id="6497574">nil</span>&nbsp;<span class="op" id="6497578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497583"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6497586">.</span><span class="ident" id="6497587">Fprintf</span><span class="op" id="6497594">(</span><span class="ident" id="6497595"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6497597">.</span><span class="ident" id="6497598">Stderr</span><span class="op" id="6497604">,</span>&nbsp;<span class="string" id="6497606">&#34;testing:&nbsp;can&#39;t&nbsp;write&nbsp;%s:&nbsp;%s\n&#34;</span><span class="op" id="6497637">,</span>&nbsp;<span class="op" id="6497639">*</span><span class="ident" id="6497640"><a href="/testing/testing.go.html#6483887">blockProfile</a></span><span class="op" id="6497652">,</span>&nbsp;<span class="ident" id="6497654"><a href="/testing/testing.go.html#6497390">err</a></span><span class="op" id="6497657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497662"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6497664">.</span><span class="ident" id="6497665">Exit</span><span class="op" id="6497669">(</span><span class="num" id="6497670">2</span><span class="op" id="6497671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6497675">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497679"><a href="/testing/testing.go.html#6497387">f</a></span><span class="op" id="6497680">.</span><span class="ident" id="6497681">Close</span><span class="op" id="6497686">(</span><span class="op" id="6497687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6497690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497693">if</span>&nbsp;<span class="ident" id="6497696"><a href="/testing/cover.go.html#6472686">cover</a></span><span class="op" id="6497701">.</span><span class="ident" id="6497702">Mode</span>&nbsp;<span class="op" id="6497707">!=</span>&nbsp;<span class="string" id="6497710">&#34;&#34;</span>&nbsp;<span class="op" id="6497713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497717"><a href="/testing/cover.go.html#6474228">coverReport</a></span><span class="op" id="6497728">(</span><span class="op" id="6497729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6497732">}</span><br>
<span class="lineno">645</span><span class="op" id="6497734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6497737">//&nbsp;toOutputDir&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;relocated,&nbsp;if&nbsp;required,&nbsp;to&nbsp;outputDir.</span><br>
<span class="lineno"></span><span class="comment" id="6497812">//&nbsp;Simple&nbsp;implementation&nbsp;to&nbsp;avoid&nbsp;pulling&nbsp;in&nbsp;path/filepath.</span><br>
<span class="lineno"></span><span class="keyword" id="6497872">func</span>&nbsp;<span class="ident" id="6497877">toOutputDir</span><span class="op" id="6497888">(</span><span class="ident" id="6497889">path</span>&nbsp;<span class="builtintype" id="6497894">string</span><span class="op" id="6497900">)</span>&nbsp;<span class="builtintype" id="6497902">string</span>&nbsp;<span class="op" id="6497909">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497912">if</span>&nbsp;<span class="op" id="6497915">*</span><span class="ident" id="6497916"><a href="/testing/testing.go.html#6483109">outputDir</a></span>&nbsp;<span class="op" id="6497926">==</span>&nbsp;<span class="string" id="6497929">&#34;&#34;</span>&nbsp;<span class="op" id="6497932">||</span>&nbsp;<span class="ident" id="6497935"><a href="/testing/testing.go.html#6497889">path</a></span>&nbsp;<span class="op" id="6497940">==</span>&nbsp;<span class="string" id="6497943">&#34;&#34;</span>&nbsp;<span class="op" id="6497946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497950">return</span>&nbsp;<span class="ident" id="6497957"><a href="/testing/testing.go.html#6497889">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6497963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497966">if</span>&nbsp;<span class="ident" id="6497969"><a href="/testing/testing.go.html#6482334">runtime</a></span><span class="op" id="6497976">.</span><span class="ident" id="6497977">GOOS</span>&nbsp;<span class="op" id="6497982">==</span>&nbsp;<span class="string" id="6497985">&#34;windows&#34;</span>&nbsp;<span class="op" id="6497995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6497999">//&nbsp;On&nbsp;Windows,&nbsp;it&#39;s&nbsp;clumsy,&nbsp;but&nbsp;we&nbsp;can&nbsp;be&nbsp;almost&nbsp;always&nbsp;correct</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6498065">//&nbsp;by&nbsp;just&nbsp;looking&nbsp;for&nbsp;a&nbsp;drive&nbsp;letter&nbsp;and&nbsp;a&nbsp;colon.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6498118">//&nbsp;Absolute&nbsp;paths&nbsp;always&nbsp;have&nbsp;a&nbsp;drive&nbsp;letter&nbsp;(ignoring&nbsp;UNC).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6498181">//&nbsp;Problem:&nbsp;if&nbsp;path&nbsp;==&nbsp;&#34;C:A&#34;&nbsp;and&nbsp;outputdir&nbsp;==&nbsp;&#34;C:\Go&#34;&nbsp;it&#39;s&nbsp;unclear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6498250">//&nbsp;what&nbsp;to&nbsp;do,&nbsp;but&nbsp;even&nbsp;then&nbsp;path/filepath&nbsp;doesn&#39;t&nbsp;help.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6498309">//&nbsp;TODO:&nbsp;Worth&nbsp;doing&nbsp;better?&nbsp;Probably&nbsp;not,&nbsp;because&nbsp;we&#39;re&nbsp;here&nbsp;only</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6498378">//&nbsp;under&nbsp;the&nbsp;management&nbsp;of&nbsp;go&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6498416">if</span>&nbsp;<span class="builtinfunc" id="6498419">len</span><span class="op" id="6498422">(</span><span class="ident" id="6498423"><a href="/testing/testing.go.html#6497889">path</a></span><span class="op" id="6498427">)</span>&nbsp;<span class="op" id="6498429">&gt;=</span>&nbsp;<span class="num" id="6498432">2</span>&nbsp;<span class="op" id="6498434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6498439">letter</span><span class="op" id="6498445">,</span>&nbsp;<span class="ident" id="6498447">colon</span>&nbsp;<span class="op" id="6498453">:=</span>&nbsp;<span class="ident" id="6498456"><a href="/testing/testing.go.html#6497889">path</a></span><span class="op" id="6498460">[</span><span class="num" id="6498461">0</span><span class="op" id="6498462">]</span><span class="op" id="6498463">,</span>&nbsp;<span class="ident" id="6498465"><a href="/testing/testing.go.html#6497889">path</a></span><span class="op" id="6498469">[</span><span class="num" id="6498470">1</span><span class="op" id="6498471">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6498476">if</span>&nbsp;<span class="op" id="6498479">(</span><span class="string" id="6498480">&#39;a&#39;</span>&nbsp;<span class="op" id="6498484">&lt;=</span>&nbsp;<span class="ident" id="6498487"><a href="/testing/testing.go.html#6498439">letter</a></span>&nbsp;<span class="op" id="6498494">&amp;&amp;</span>&nbsp;<span class="ident" id="6498497"><a href="/testing/testing.go.html#6498439">letter</a></span>&nbsp;<span class="op" id="6498504">&lt;=</span>&nbsp;<span class="string" id="6498507">&#39;z&#39;</span>&nbsp;<span class="op" id="6498511">||</span>&nbsp;<span class="string" id="6498514">&#39;A&#39;</span>&nbsp;<span class="op" id="6498518">&lt;=</span>&nbsp;<span class="ident" id="6498521"><a href="/testing/testing.go.html#6498439">letter</a></span>&nbsp;<span class="op" id="6498528">&amp;&amp;</span>&nbsp;<span class="ident" id="6498531"><a href="/testing/testing.go.html#6498439">letter</a></span>&nbsp;<span class="op" id="6498538">&lt;=</span>&nbsp;<span class="string" id="6498541">&#39;Z&#39;</span><span class="op" id="6498544">)</span>&nbsp;<span class="op" id="6498546">&amp;&amp;</span>&nbsp;<span class="ident" id="6498549"><a href="/testing/testing.go.html#6498447">colon</a></span>&nbsp;<span class="op" id="6498555">==</span>&nbsp;<span class="string" id="6498558">&#39;:&#39;</span>&nbsp;<span class="op" id="6498562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6498568">//&nbsp;If&nbsp;path&nbsp;starts&nbsp;with&nbsp;a&nbsp;drive&nbsp;letter&nbsp;we&#39;re&nbsp;stuck&nbsp;with&nbsp;it&nbsp;regardless.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6498642">return</span>&nbsp;<span class="ident" id="6498649"><a href="/testing/testing.go.html#6497889">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6498657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6498661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6498664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6498667">if</span>&nbsp;<span class="ident" id="6498670"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6498672">.</span><span class="ident" id="6498673">IsPathSeparator</span><span class="op" id="6498688">(</span><span class="ident" id="6498689"><a href="/testing/testing.go.html#6497889">path</a></span><span class="op" id="6498693">[</span><span class="num" id="6498694">0</span><span class="op" id="6498695">]</span><span class="op" id="6498696">)</span>&nbsp;<span class="op" id="6498698">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6498702">return</span>&nbsp;<span class="ident" id="6498709"><a href="/testing/testing.go.html#6497889">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6498715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6498718">return</span>&nbsp;<span class="ident" id="6498725"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6498728">.</span><span class="ident" id="6498729">Sprintf</span><span class="op" id="6498736">(</span><span class="string" id="6498737">&#34;%s%c%s&#34;</span><span class="op" id="6498745">,</span>&nbsp;<span class="op" id="6498747">*</span><span class="ident" id="6498748"><a href="/testing/testing.go.html#6483109">outputDir</a></span><span class="op" id="6498757">,</span>&nbsp;<span class="ident" id="6498759"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6498761">.</span><span class="ident" id="6498762">PathSeparator</span><span class="op" id="6498775">,</span>&nbsp;<span class="ident" id="6498777"><a href="/testing/testing.go.html#6497889">path</a></span><span class="op" id="6498781">)</span><br>
<span class="lineno"></span><span class="op" id="6498783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6498786">var</span>&nbsp;<span class="ident" id="6498790">timer</span>&nbsp;<span class="op" id="6498796">*</span><span class="ident" id="6498797"><a href="/testing/testing.go.html#6482392">time</a></span><span class="op" id="6498801">.</span><span class="ident" id="6498802">Timer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6498809">//&nbsp;startAlarm&nbsp;starts&nbsp;an&nbsp;alarm&nbsp;if&nbsp;requested.</span><br>
<span class="lineno"></span><span class="keyword" id="6498853">func</span>&nbsp;<span class="ident" id="6498858">startAlarm</span><span class="op" id="6498868">(</span><span class="op" id="6498869">)</span>&nbsp;<span class="op" id="6498871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6498874">if</span>&nbsp;<span class="op" id="6498877">*</span><span class="ident" id="6498878"><a href="/testing/testing.go.html#6484121">timeout</a></span>&nbsp;<span class="op" id="6498886">&gt;</span>&nbsp;<span class="num" id="6498888">0</span>&nbsp;<span class="op" id="6498890">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6498894"><a href="/testing/testing.go.html#6498790">timer</a></span>&nbsp;<span class="op" id="6498900">=</span>&nbsp;<span class="ident" id="6498902"><a href="/testing/testing.go.html#6482392">time</a></span><span class="op" id="6498906">.</span><span class="ident" id="6498907">AfterFunc</span><span class="op" id="6498916">(</span><span class="op" id="6498917">*</span><span class="ident" id="6498918"><a href="/testing/testing.go.html#6484121">timeout</a></span><span class="op" id="6498925">,</span>&nbsp;<span class="keyword" id="6498927">func</span><span class="op" id="6498931">(</span><span class="op" id="6498932">)</span>&nbsp;<span class="op" id="6498934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6498939">panic</span><span class="op" id="6498944">(</span><span class="ident" id="6498945"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6498948">.</span><span class="ident" id="6498949">Sprintf</span><span class="op" id="6498956">(</span><span class="string" id="6498957">&#34;test&nbsp;timed&nbsp;out&nbsp;after&nbsp;%v&#34;</span><span class="op" id="6498982">,</span>&nbsp;<span class="op" id="6498984">*</span><span class="ident" id="6498985"><a href="/testing/testing.go.html#6484121">timeout</a></span><span class="op" id="6498992">)</span><span class="op" id="6498993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6498997">}</span><span class="op" id="6498998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6499001">}</span><br>
<span class="lineno"></span><span class="op" id="6499003">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="comment" id="6499006">//&nbsp;stopAlarm&nbsp;turns&nbsp;off&nbsp;the&nbsp;alarm.</span><br>
<span class="lineno"></span><span class="keyword" id="6499040">func</span>&nbsp;<span class="ident" id="6499045">stopAlarm</span><span class="op" id="6499054">(</span><span class="op" id="6499055">)</span>&nbsp;<span class="op" id="6499057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6499060">if</span>&nbsp;<span class="op" id="6499063">*</span><span class="ident" id="6499064"><a href="/testing/testing.go.html#6484121">timeout</a></span>&nbsp;<span class="op" id="6499072">&gt;</span>&nbsp;<span class="num" id="6499074">0</span>&nbsp;<span class="op" id="6499076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6499080"><a href="/testing/testing.go.html#6498790">timer</a></span><span class="op" id="6499085">.</span><span class="ident" id="6499086">Stop</span><span class="op" id="6499090">(</span><span class="op" id="6499091">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6499094">}</span><br>
<span class="lineno"></span><span class="op" id="6499096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6499099">func</span>&nbsp;<span class="ident" id="6499104">parseCpuList</span><span class="op" id="6499116">(</span><span class="op" id="6499117">)</span>&nbsp;<span class="op" id="6499119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6499122">for</span>&nbsp;<span class="ident" id="6499126">_</span><span class="op" id="6499127">,</span>&nbsp;<span class="ident" id="6499129">val</span>&nbsp;<span class="op" id="6499133">:=</span>&nbsp;<span class="keyword" id="6499136">range</span>&nbsp;<span class="ident" id="6499142"><a href="/testing/testing.go.html#6482373">strings</a></span><span class="op" id="6499149">.</span><span class="ident" id="6499150">Split</span><span class="op" id="6499155">(</span><span class="op" id="6499156">*</span><span class="ident" id="6499157"><a href="/testing/testing.go.html#6484233">cpuListStr</a></span><span class="op" id="6499167">,</span>&nbsp;<span class="string" id="6499169">&#34;,&#34;</span><span class="op" id="6499172">)</span>&nbsp;<span class="op" id="6499174">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6499178"><a href="/testing/testing.go.html#6499129">val</a></span>&nbsp;<span class="op" id="6499182">=</span>&nbsp;<span class="ident" id="6499184"><a href="/testing/testing.go.html#6482373">strings</a></span><span class="op" id="6499191">.</span><span class="ident" id="6499192">TrimSpace</span><span class="op" id="6499201">(</span><span class="ident" id="6499202"><a href="/testing/testing.go.html#6499129">val</a></span><span class="op" id="6499205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6499209">if</span>&nbsp;<span class="ident" id="6499212"><a href="/testing/testing.go.html#6499129">val</a></span>&nbsp;<span class="op" id="6499216">==</span>&nbsp;<span class="string" id="6499219">&#34;&#34;</span>&nbsp;<span class="op" id="6499222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6499227">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6499238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6499242">cpu</span><span class="op" id="6499245">,</span>&nbsp;<span class="ident" id="6499247">err</span>&nbsp;<span class="op" id="6499251">:=</span>&nbsp;<span class="ident" id="6499254"><a href="/testing/testing.go.html#6482362">strconv</a></span><span class="op" id="6499261">.</span><span class="ident" id="6499262">Atoi</span><span class="op" id="6499266">(</span><span class="ident" id="6499267"><a href="/testing/testing.go.html#6499129">val</a></span><span class="op" id="6499270">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6499274">if</span>&nbsp;<span class="ident" id="6499277"><a href="/testing/testing.go.html#6499247">err</a></span>&nbsp;<span class="op" id="6499281">!=</span>&nbsp;<span class="ident" id="6499284">nil</span>&nbsp;<span class="op" id="6499288">||</span>&nbsp;<span class="ident" id="6499291"><a href="/testing/testing.go.html#6499242">cpu</a></span>&nbsp;<span class="op" id="6499295">&lt;=</span>&nbsp;<span class="num" id="6499298">0</span>&nbsp;<span class="op" id="6499300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6499305"><a href="/testing/testing.go.html#6482321">fmt</a></span><span class="op" id="6499308">.</span><span class="ident" id="6499309">Fprintf</span><span class="op" id="6499316">(</span><span class="ident" id="6499317"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6499319">.</span><span class="ident" id="6499320">Stderr</span><span class="op" id="6499326">,</span>&nbsp;<span class="string" id="6499328">&#34;testing:&nbsp;invalid&nbsp;value&nbsp;%q&nbsp;for&nbsp;-test.cpu\n&#34;</span><span class="op" id="6499371">,</span>&nbsp;<span class="ident" id="6499373"><a href="/testing/testing.go.html#6499129">val</a></span><span class="op" id="6499376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6499381"><a href="/testing/testing.go.html#6482328">os</a></span><span class="op" id="6499383">.</span><span class="ident" id="6499384">Exit</span><span class="op" id="6499388">(</span><span class="num" id="6499389">1</span><span class="op" id="6499390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6499394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6499398"><a href="/testing/testing.go.html#6484485">cpuList</a></span>&nbsp;<span class="op" id="6499406">=</span>&nbsp;<span class="builtinfunc" id="6499408">append</span><span class="op" id="6499414">(</span><span class="ident" id="6499415"><a href="/testing/testing.go.html#6484485">cpuList</a></span><span class="op" id="6499422">,</span>&nbsp;<span class="ident" id="6499424"><a href="/testing/testing.go.html#6499242">cpu</a></span><span class="op" id="6499427">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6499430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6499433">if</span>&nbsp;<span class="ident" id="6499436"><a href="/testing/testing.go.html#6484485">cpuList</a></span>&nbsp;<span class="op" id="6499444">==</span>&nbsp;<span class="ident" id="6499447">nil</span>&nbsp;<span class="op" id="6499451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6499455"><a href="/testing/testing.go.html#6484485">cpuList</a></span>&nbsp;<span class="op" id="6499463">=</span>&nbsp;<span class="builtinfunc" id="6499465">append</span><span class="op" id="6499471">(</span><span class="ident" id="6499472"><a href="/testing/testing.go.html#6484485">cpuList</a></span><span class="op" id="6499479">,</span>&nbsp;<span class="ident" id="6499481"><a href="/testing/testing.go.html#6482334">runtime</a></span><span class="op" id="6499488">.</span><span class="ident" id="6499489">GOMAXPROCS</span><span class="op" id="6499499">(</span><span class="op" id="6499500">-</span><span class="num" id="6499501">1</span><span class="op" id="6499502">)</span><span class="op" id="6499503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6499506">}</span><br>
<span class="lineno"></span><span class="op" id="6499508">}</span>
</div>
</body>
</html>
