<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7913122">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7913177">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7913231">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7913282">//&nbsp;TODO&nbsp;It&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;use&nbsp;a&nbsp;mock&nbsp;DNS&nbsp;server,&nbsp;to&nbsp;eliminate</span><br>
<span class="lineno"></span><span class="comment" id="7913346">//&nbsp;external&nbsp;dependencies.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7913373">package</span>&nbsp;<span class="ident" id="7913381">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="7913386">import</span>&nbsp;<span class="op" id="7913393">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7913396">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7913404">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7913415">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7913425">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7913428">var</span>&nbsp;<span class="ident" id="7913432">testExternal</span>&nbsp;<span class="op" id="7913445">=</span>&nbsp;<span class="ident" id="7913447"><a href="/net/lookup_test.go.html#7913396">flag</a></span><span class="op" id="7913451">.</span><span class="ident" id="7913452">Bool</span><span class="op" id="7913456">(</span><span class="string" id="7913457">&#34;external&#34;</span><span class="op" id="7913467">,</span>&nbsp;<span class="builtintype" id="7913469">true</span><span class="op" id="7913473">,</span>&nbsp;<span class="string" id="7913475">&#34;allow&nbsp;use&nbsp;of&nbsp;external&nbsp;networks&nbsp;during&nbsp;long&nbsp;test&#34;</span><span class="op" id="7913524">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7913527">var</span>&nbsp;<span class="ident" id="7913531">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="7913552">=</span>&nbsp;<span class="op" id="7913554">[</span><span class="op" id="7913555">]</span><span class="keyword" id="7913556">struct</span>&nbsp;<span class="op" id="7913563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913566">service</span><span class="op" id="7913573">,</span>&nbsp;<span class="ident" id="7913575">proto</span><span class="op" id="7913580">,</span>&nbsp;<span class="ident" id="7913582">name</span>&nbsp;<span class="builtintype" id="7913587">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913595">cname</span><span class="op" id="7913600">,</span>&nbsp;<span class="ident" id="7913602">target</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7913616">string</span><br>
<span class="lineno"></span><span class="op" id="7913623">}</span><span class="op" id="7913624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7913631">&#34;xmpp-server&#34;</span><span class="op" id="7913644">,</span>&nbsp;<span class="string" id="7913646">&#34;tcp&#34;</span><span class="op" id="7913651">,</span>&nbsp;<span class="string" id="7913653">&#34;google.com&#34;</span><span class="op" id="7913665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7913669">&#34;.google.com&#34;</span><span class="op" id="7913682">,</span>&nbsp;<span class="string" id="7913684">&#34;.google.com&#34;</span><span class="op" id="7913697">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913700">}</span><span class="op" id="7913701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7913708">&#34;&#34;</span><span class="op" id="7913710">,</span>&nbsp;<span class="string" id="7913712">&#34;&#34;</span><span class="op" id="7913714">,</span>&nbsp;<span class="string" id="7913716">&#34;_xmpp-server._tcp.google.com&#34;</span><span class="op" id="7913746">,</span>&nbsp;<span class="comment" id="7913748">//&nbsp;non-standard&nbsp;back&nbsp;door</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7913776">&#34;.google.com&#34;</span><span class="op" id="7913789">,</span>&nbsp;<span class="string" id="7913791">&#34;.google.com&#34;</span><span class="op" id="7913804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913807">}</span><span class="op" id="7913808">,</span><br>
<span class="lineno">30</span><span class="op" id="7913810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7913813">func</span>&nbsp;<span class="ident" id="7913818">TestLookupGoogleSRV</span><span class="op" id="7913837">(</span><span class="ident" id="7913838">t</span>&nbsp;<span class="op" id="7913840">*</span><span class="ident" id="7913841"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7913848">.</span><span class="ident" id="7913849">T</span><span class="op" id="7913850">)</span>&nbsp;<span class="op" id="7913852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913855">if</span>&nbsp;<span class="ident" id="7913858"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7913865">.</span><span class="ident" id="7913866">Short</span><span class="op" id="7913871">(</span><span class="op" id="7913872">)</span>&nbsp;<span class="op" id="7913874">||</span>&nbsp;<span class="op" id="7913877">!</span><span class="op" id="7913878">*</span><span class="ident" id="7913879"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="7913892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913896"><a href="/net/lookup_test.go.html#7913838">t</a></span><span class="op" id="7913897">.</span><span class="ident" id="7913898">Skip</span><span class="op" id="7913902">(</span><span class="string" id="7913903">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7913944">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913951">for</span>&nbsp;<span class="ident" id="7913955">_</span><span class="op" id="7913956">,</span>&nbsp;<span class="ident" id="7913958">tt</span>&nbsp;<span class="op" id="7913961">:=</span>&nbsp;<span class="keyword" id="7913964">range</span>&nbsp;<span class="ident" id="7913970"><a href="/net/lookup_test.go.html#7913531">lookupGoogleSRVTests</a></span>&nbsp;<span class="op" id="7913991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913995">cname</span><span class="op" id="7914000">,</span>&nbsp;<span class="ident" id="7914002">srvs</span><span class="op" id="7914006">,</span>&nbsp;<span class="ident" id="7914008">err</span>&nbsp;<span class="op" id="7914012">:=</span>&nbsp;<span class="ident" id="7914015"><a href="/net/lookup.go.html#1457717">LookupSRV</a></span><span class="op" id="7914024">(</span><span class="ident" id="7914025"><a href="/net/lookup_test.go.html#7913958">tt</a></span><span class="op" id="7914027">.</span><span class="ident" id="7914028">service</span><span class="op" id="7914035">,</span>&nbsp;<span class="ident" id="7914037"><a href="/net/lookup_test.go.html#7913958">tt</a></span><span class="op" id="7914039">.</span><span class="ident" id="7914040">proto</span><span class="op" id="7914045">,</span>&nbsp;<span class="ident" id="7914047"><a href="/net/lookup_test.go.html#7913958">tt</a></span><span class="op" id="7914049">.</span><span class="ident" id="7914050">name</span><span class="op" id="7914054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914058">if</span>&nbsp;<span class="ident" id="7914061"><a href="/net/lookup_test.go.html#7914008">err</a></span>&nbsp;<span class="op" id="7914065">!=</span>&nbsp;<span class="ident" id="7914068">nil</span>&nbsp;<span class="op" id="7914072">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914077"><a href="/net/lookup_test.go.html#7913838">t</a></span><span class="op" id="7914078">.</span><span class="ident" id="7914079">Fatal</span><span class="op" id="7914084">(</span><span class="ident" id="7914085"><a href="/net/lookup_test.go.html#7914008">err</a></span><span class="op" id="7914088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914096">if</span>&nbsp;<span class="builtinfunc" id="7914099">len</span><span class="op" id="7914102">(</span><span class="ident" id="7914103"><a href="/net/lookup_test.go.html#7914002">srvs</a></span><span class="op" id="7914107">)</span>&nbsp;<span class="op" id="7914109">==</span>&nbsp;<span class="num" id="7914112">0</span>&nbsp;<span class="op" id="7914114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914119"><a href="/net/lookup_test.go.html#7913838">t</a></span><span class="op" id="7914120">.</span><span class="ident" id="7914121">Error</span><span class="op" id="7914126">(</span><span class="string" id="7914127">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7914142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914146">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914150">if</span>&nbsp;<span class="op" id="7914153">!</span><span class="ident" id="7914154"><a href="/net/lookup_test.go.html#7913404">strings</a></span><span class="op" id="7914161">.</span><span class="ident" id="7914162">Contains</span><span class="op" id="7914170">(</span><span class="ident" id="7914171"><a href="/net/lookup_test.go.html#7913995">cname</a></span><span class="op" id="7914176">,</span>&nbsp;<span class="ident" id="7914178"><a href="/net/lookup_test.go.html#7913958">tt</a></span><span class="op" id="7914180">.</span><span class="ident" id="7914181">cname</span><span class="op" id="7914186">)</span>&nbsp;<span class="op" id="7914188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914193"><a href="/net/lookup_test.go.html#7913838">t</a></span><span class="op" id="7914194">.</span><span class="ident" id="7914195">Errorf</span><span class="op" id="7914201">(</span><span class="string" id="7914202">&#34;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7914219">,</span>&nbsp;<span class="ident" id="7914221"><a href="/net/lookup_test.go.html#7913995">cname</a></span><span class="op" id="7914226">,</span>&nbsp;<span class="ident" id="7914228"><a href="/net/lookup_test.go.html#7913958">tt</a></span><span class="op" id="7914230">.</span><span class="ident" id="7914231">cname</span><span class="op" id="7914236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914244">for</span>&nbsp;<span class="ident" id="7914248">_</span><span class="op" id="7914249">,</span>&nbsp;<span class="ident" id="7914251">srv</span>&nbsp;<span class="op" id="7914255">:=</span>&nbsp;<span class="keyword" id="7914258">range</span>&nbsp;<span class="ident" id="7914264"><a href="/net/lookup_test.go.html#7914002">srvs</a></span>&nbsp;<span class="op" id="7914269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914274">if</span>&nbsp;<span class="op" id="7914277">!</span><span class="ident" id="7914278"><a href="/net/lookup_test.go.html#7913404">strings</a></span><span class="op" id="7914285">.</span><span class="ident" id="7914286">Contains</span><span class="op" id="7914294">(</span><span class="ident" id="7914295"><a href="/net/lookup_test.go.html#7914251">srv</a></span><span class="op" id="7914298">.</span><span class="ident" id="7914299">Target</span><span class="op" id="7914305">,</span>&nbsp;<span class="ident" id="7914307"><a href="/net/lookup_test.go.html#7913958">tt</a></span><span class="op" id="7914309">.</span><span class="ident" id="7914310">target</span><span class="op" id="7914316">)</span>&nbsp;<span class="op" id="7914318">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914324"><a href="/net/lookup_test.go.html#7913838">t</a></span><span class="op" id="7914325">.</span><span class="ident" id="7914326">Errorf</span><span class="op" id="7914332">(</span><span class="string" id="7914333">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="7914370">,</span>&nbsp;<span class="ident" id="7914372"><a href="/net/lookup_test.go.html#7914251">srv</a></span><span class="op" id="7914375">,</span>&nbsp;<span class="ident" id="7914377"><a href="/net/lookup_test.go.html#7913958">tt</a></span><span class="op" id="7914379">.</span><span class="ident" id="7914380">target</span><span class="op" id="7914386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914398">}</span><br>
<span class="lineno"></span><span class="op" id="7914400">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7914403">func</span>&nbsp;<span class="ident" id="7914408">TestLookupGmailMX</span><span class="op" id="7914425">(</span><span class="ident" id="7914426">t</span>&nbsp;<span class="op" id="7914428">*</span><span class="ident" id="7914429"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7914436">.</span><span class="ident" id="7914437">T</span><span class="op" id="7914438">)</span>&nbsp;<span class="op" id="7914440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914443">if</span>&nbsp;<span class="ident" id="7914446"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7914453">.</span><span class="ident" id="7914454">Short</span><span class="op" id="7914459">(</span><span class="op" id="7914460">)</span>&nbsp;<span class="op" id="7914462">||</span>&nbsp;<span class="op" id="7914465">!</span><span class="op" id="7914466">*</span><span class="ident" id="7914467"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="7914480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914484"><a href="/net/lookup_test.go.html#7914426">t</a></span><span class="op" id="7914485">.</span><span class="ident" id="7914486">Skip</span><span class="op" id="7914490">(</span><span class="string" id="7914491">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7914532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914535">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914539">mxs</span><span class="op" id="7914542">,</span>&nbsp;<span class="ident" id="7914544">err</span>&nbsp;<span class="op" id="7914548">:=</span>&nbsp;<span class="ident" id="7914551"><a href="/net/lookup.go.html#1457933">LookupMX</a></span><span class="op" id="7914559">(</span><span class="string" id="7914560">&#34;gmail.com&#34;</span><span class="op" id="7914571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914574">if</span>&nbsp;<span class="ident" id="7914577"><a href="/net/lookup_test.go.html#7914544">err</a></span>&nbsp;<span class="op" id="7914581">!=</span>&nbsp;<span class="ident" id="7914584">nil</span>&nbsp;<span class="op" id="7914588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914592"><a href="/net/lookup_test.go.html#7914426">t</a></span><span class="op" id="7914593">.</span><span class="ident" id="7914594">Fatal</span><span class="op" id="7914599">(</span><span class="ident" id="7914600"><a href="/net/lookup_test.go.html#7914544">err</a></span><span class="op" id="7914603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914606">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914609">if</span>&nbsp;<span class="builtinfunc" id="7914612">len</span><span class="op" id="7914615">(</span><span class="ident" id="7914616"><a href="/net/lookup_test.go.html#7914539">mxs</a></span><span class="op" id="7914619">)</span>&nbsp;<span class="op" id="7914621">==</span>&nbsp;<span class="num" id="7914624">0</span>&nbsp;<span class="op" id="7914626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914630"><a href="/net/lookup_test.go.html#7914426">t</a></span><span class="op" id="7914631">.</span><span class="ident" id="7914632">Error</span><span class="op" id="7914637">(</span><span class="string" id="7914638">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7914653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914659">for</span>&nbsp;<span class="ident" id="7914663">_</span><span class="op" id="7914664">,</span>&nbsp;<span class="ident" id="7914666">mx</span>&nbsp;<span class="op" id="7914669">:=</span>&nbsp;<span class="keyword" id="7914672">range</span>&nbsp;<span class="ident" id="7914678"><a href="/net/lookup_test.go.html#7914539">mxs</a></span>&nbsp;<span class="op" id="7914682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914686">if</span>&nbsp;<span class="op" id="7914689">!</span><span class="ident" id="7914690"><a href="/net/lookup_test.go.html#7913404">strings</a></span><span class="op" id="7914697">.</span><span class="ident" id="7914698">Contains</span><span class="op" id="7914706">(</span><span class="ident" id="7914707"><a href="/net/lookup_test.go.html#7914666">mx</a></span><span class="op" id="7914709">.</span><span class="ident" id="7914710">Host</span><span class="op" id="7914714">,</span>&nbsp;<span class="string" id="7914716">&#34;.google.com&#34;</span><span class="op" id="7914729">)</span>&nbsp;<span class="op" id="7914731">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914736"><a href="/net/lookup_test.go.html#7914426">t</a></span><span class="op" id="7914737">.</span><span class="ident" id="7914738">Errorf</span><span class="op" id="7914744">(</span><span class="string" id="7914745">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="7914792">,</span>&nbsp;<span class="ident" id="7914794"><a href="/net/lookup_test.go.html#7914666">mx</a></span><span class="op" id="7914796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914803">}</span><br>
<span class="lineno"></span><span class="op" id="7914805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7914808">func</span>&nbsp;<span class="ident" id="7914813">TestLookupGmailNS</span><span class="op" id="7914830">(</span><span class="ident" id="7914831">t</span>&nbsp;<span class="op" id="7914833">*</span><span class="ident" id="7914834"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7914841">.</span><span class="ident" id="7914842">T</span><span class="op" id="7914843">)</span>&nbsp;<span class="op" id="7914845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914848">if</span>&nbsp;<span class="ident" id="7914851"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7914858">.</span><span class="ident" id="7914859">Short</span><span class="op" id="7914864">(</span><span class="op" id="7914865">)</span>&nbsp;<span class="op" id="7914867">||</span>&nbsp;<span class="op" id="7914870">!</span><span class="op" id="7914871">*</span><span class="ident" id="7914872"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="7914885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914889"><a href="/net/lookup_test.go.html#7914831">t</a></span><span class="op" id="7914890">.</span><span class="ident" id="7914891">Skip</span><span class="op" id="7914895">(</span><span class="string" id="7914896">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7914937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914944">nss</span><span class="op" id="7914947">,</span>&nbsp;<span class="ident" id="7914949">err</span>&nbsp;<span class="op" id="7914953">:=</span>&nbsp;<span class="ident" id="7914956"><a href="/net/lookup.go.html#1458076">LookupNS</a></span><span class="op" id="7914964">(</span><span class="string" id="7914965">&#34;gmail.com&#34;</span><span class="op" id="7914976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914979">if</span>&nbsp;<span class="ident" id="7914982"><a href="/net/lookup_test.go.html#7914949">err</a></span>&nbsp;<span class="op" id="7914986">!=</span>&nbsp;<span class="ident" id="7914989">nil</span>&nbsp;<span class="op" id="7914993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914997"><a href="/net/lookup_test.go.html#7914831">t</a></span><span class="op" id="7914998">.</span><span class="ident" id="7914999">Fatal</span><span class="op" id="7915004">(</span><span class="ident" id="7915005"><a href="/net/lookup_test.go.html#7914949">err</a></span><span class="op" id="7915008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915014">if</span>&nbsp;<span class="builtinfunc" id="7915017">len</span><span class="op" id="7915020">(</span><span class="ident" id="7915021"><a href="/net/lookup_test.go.html#7914944">nss</a></span><span class="op" id="7915024">)</span>&nbsp;<span class="op" id="7915026">==</span>&nbsp;<span class="num" id="7915029">0</span>&nbsp;<span class="op" id="7915031">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915035"><a href="/net/lookup_test.go.html#7914831">t</a></span><span class="op" id="7915036">.</span><span class="ident" id="7915037">Error</span><span class="op" id="7915042">(</span><span class="string" id="7915043">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7915058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915064">for</span>&nbsp;<span class="ident" id="7915068">_</span><span class="op" id="7915069">,</span>&nbsp;<span class="ident" id="7915071">ns</span>&nbsp;<span class="op" id="7915074">:=</span>&nbsp;<span class="keyword" id="7915077">range</span>&nbsp;<span class="ident" id="7915083"><a href="/net/lookup_test.go.html#7914944">nss</a></span>&nbsp;<span class="op" id="7915087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915091">if</span>&nbsp;<span class="op" id="7915094">!</span><span class="ident" id="7915095"><a href="/net/lookup_test.go.html#7913404">strings</a></span><span class="op" id="7915102">.</span><span class="ident" id="7915103">Contains</span><span class="op" id="7915111">(</span><span class="ident" id="7915112"><a href="/net/lookup_test.go.html#7915071">ns</a></span><span class="op" id="7915114">.</span><span class="ident" id="7915115">Host</span><span class="op" id="7915119">,</span>&nbsp;<span class="string" id="7915121">&#34;.google.com&#34;</span><span class="op" id="7915134">)</span>&nbsp;<span class="op" id="7915136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915141"><a href="/net/lookup_test.go.html#7914831">t</a></span><span class="op" id="7915142">.</span><span class="ident" id="7915143">Errorf</span><span class="op" id="7915149">(</span><span class="string" id="7915150">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="7915197">,</span>&nbsp;<span class="ident" id="7915199"><a href="/net/lookup_test.go.html#7915071">ns</a></span><span class="op" id="7915201">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915208">}</span><br>
<span class="lineno"></span><span class="op" id="7915210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7915213">func</span>&nbsp;<span class="ident" id="7915218">TestLookupGmailTXT</span><span class="op" id="7915236">(</span><span class="ident" id="7915237">t</span>&nbsp;<span class="op" id="7915239">*</span><span class="ident" id="7915240"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7915247">.</span><span class="ident" id="7915248">T</span><span class="op" id="7915249">)</span>&nbsp;<span class="op" id="7915251">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915254">if</span>&nbsp;<span class="ident" id="7915257"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7915264">.</span><span class="ident" id="7915265">Short</span><span class="op" id="7915270">(</span><span class="op" id="7915271">)</span>&nbsp;<span class="op" id="7915273">||</span>&nbsp;<span class="op" id="7915276">!</span><span class="op" id="7915277">*</span><span class="ident" id="7915278"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="7915291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915295"><a href="/net/lookup_test.go.html#7915237">t</a></span><span class="op" id="7915296">.</span><span class="ident" id="7915297">Skip</span><span class="op" id="7915301">(</span><span class="string" id="7915302">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7915343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915350">txts</span><span class="op" id="7915354">,</span>&nbsp;<span class="ident" id="7915356">err</span>&nbsp;<span class="op" id="7915360">:=</span>&nbsp;<span class="ident" id="7915363"><a href="/net/lookup.go.html#1458221">LookupTXT</a></span><span class="op" id="7915372">(</span><span class="string" id="7915373">&#34;gmail.com&#34;</span><span class="op" id="7915384">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915387">if</span>&nbsp;<span class="ident" id="7915390"><a href="/net/lookup_test.go.html#7915356">err</a></span>&nbsp;<span class="op" id="7915394">!=</span>&nbsp;<span class="ident" id="7915397">nil</span>&nbsp;<span class="op" id="7915401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915405"><a href="/net/lookup_test.go.html#7915237">t</a></span><span class="op" id="7915406">.</span><span class="ident" id="7915407">Fatal</span><span class="op" id="7915412">(</span><span class="ident" id="7915413"><a href="/net/lookup_test.go.html#7915356">err</a></span><span class="op" id="7915416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915422">if</span>&nbsp;<span class="builtinfunc" id="7915425">len</span><span class="op" id="7915428">(</span><span class="ident" id="7915429"><a href="/net/lookup_test.go.html#7915350">txts</a></span><span class="op" id="7915433">)</span>&nbsp;<span class="op" id="7915435">==</span>&nbsp;<span class="num" id="7915438">0</span>&nbsp;<span class="op" id="7915440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915444"><a href="/net/lookup_test.go.html#7915237">t</a></span><span class="op" id="7915445">.</span><span class="ident" id="7915446">Error</span><span class="op" id="7915451">(</span><span class="string" id="7915452">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7915467">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915473">for</span>&nbsp;<span class="ident" id="7915477">_</span><span class="op" id="7915478">,</span>&nbsp;<span class="ident" id="7915480">txt</span>&nbsp;<span class="op" id="7915484">:=</span>&nbsp;<span class="keyword" id="7915487">range</span>&nbsp;<span class="ident" id="7915493"><a href="/net/lookup_test.go.html#7915350">txts</a></span>&nbsp;<span class="op" id="7915498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915502">if</span>&nbsp;<span class="op" id="7915505">!</span><span class="ident" id="7915506"><a href="/net/lookup_test.go.html#7913404">strings</a></span><span class="op" id="7915513">.</span><span class="ident" id="7915514">Contains</span><span class="op" id="7915522">(</span><span class="ident" id="7915523"><a href="/net/lookup_test.go.html#7915480">txt</a></span><span class="op" id="7915526">,</span>&nbsp;<span class="string" id="7915528">&#34;spf&#34;</span><span class="op" id="7915533">)</span>&nbsp;<span class="op" id="7915535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915540"><a href="/net/lookup_test.go.html#7915237">t</a></span><span class="op" id="7915541">.</span><span class="ident" id="7915542">Errorf</span><span class="op" id="7915548">(</span><span class="string" id="7915549">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;spf&nbsp;record&#34;</span><span class="op" id="7915576">,</span>&nbsp;<span class="ident" id="7915578"><a href="/net/lookup_test.go.html#7915480">txt</a></span><span class="op" id="7915581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915585">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915588">}</span><br>
<span class="lineno"></span><span class="op" id="7915590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7915593">var</span>&nbsp;<span class="ident" id="7915597">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="7915624">=</span>&nbsp;<span class="op" id="7915626">[</span><span class="op" id="7915627">]</span><span class="keyword" id="7915628">struct</span>&nbsp;<span class="op" id="7915635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915638">addr</span>&nbsp;<span class="builtintype" id="7915643">string</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915651">name</span>&nbsp;<span class="builtintype" id="7915656">string</span><br>
<span class="lineno"></span><span class="op" id="7915663">}</span><span class="op" id="7915664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915667">{</span><span class="string" id="7915668">&#34;8.8.8.8&#34;</span><span class="op" id="7915677">,</span>&nbsp;<span class="string" id="7915679">&#34;.google.com.&#34;</span><span class="op" id="7915693">}</span><span class="op" id="7915694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915697">{</span><span class="string" id="7915698">&#34;8.8.4.4&#34;</span><span class="op" id="7915707">,</span>&nbsp;<span class="string" id="7915709">&#34;.google.com.&#34;</span><span class="op" id="7915723">}</span><span class="op" id="7915724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915727">{</span><span class="string" id="7915728">&#34;2001:4860:4860::8888&#34;</span><span class="op" id="7915750">,</span>&nbsp;<span class="string" id="7915752">&#34;.google.com.&#34;</span><span class="op" id="7915766">}</span><span class="op" id="7915767">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915770">{</span><span class="string" id="7915771">&#34;2001:4860:4860::8844&#34;</span><span class="op" id="7915793">,</span>&nbsp;<span class="string" id="7915795">&#34;.google.com.&#34;</span><span class="op" id="7915809">}</span><span class="op" id="7915810">,</span><br>
<span class="lineno"></span><span class="op" id="7915812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7915815">func</span>&nbsp;<span class="ident" id="7915820">TestLookupGooglePublicDNSAddr</span><span class="op" id="7915849">(</span><span class="ident" id="7915850">t</span>&nbsp;<span class="op" id="7915852">*</span><span class="ident" id="7915853"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7915860">.</span><span class="ident" id="7915861">T</span><span class="op" id="7915862">)</span>&nbsp;<span class="op" id="7915864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915867">if</span>&nbsp;<span class="ident" id="7915870"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7915877">.</span><span class="ident" id="7915878">Short</span><span class="op" id="7915883">(</span><span class="op" id="7915884">)</span>&nbsp;<span class="op" id="7915886">||</span>&nbsp;<span class="op" id="7915889">!</span><span class="op" id="7915890">*</span><span class="ident" id="7915891"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="7915904">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915908"><a href="/net/lookup_test.go.html#7915850">t</a></span><span class="op" id="7915909">.</span><span class="ident" id="7915910">Skip</span><span class="op" id="7915914">(</span><span class="string" id="7915915">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7915956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915963">for</span>&nbsp;<span class="ident" id="7915967">_</span><span class="op" id="7915968">,</span>&nbsp;<span class="ident" id="7915970">tt</span>&nbsp;<span class="op" id="7915973">:=</span>&nbsp;<span class="keyword" id="7915976">range</span>&nbsp;<span class="ident" id="7915982"><a href="/net/lookup_test.go.html#7915597">lookupGooglePublicDNSAddrs</a></span>&nbsp;<span class="op" id="7916009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916013">names</span><span class="op" id="7916018">,</span>&nbsp;<span class="ident" id="7916020">err</span>&nbsp;<span class="op" id="7916024">:=</span>&nbsp;<span class="ident" id="7916027"><a href="/net/lookup.go.html#1458421">LookupAddr</a></span><span class="op" id="7916037">(</span><span class="ident" id="7916038"><a href="/net/lookup_test.go.html#7915970">tt</a></span><span class="op" id="7916040">.</span><span class="ident" id="7916041">addr</span><span class="op" id="7916045">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916049">if</span>&nbsp;<span class="ident" id="7916052"><a href="/net/lookup_test.go.html#7916020">err</a></span>&nbsp;<span class="op" id="7916056">!=</span>&nbsp;<span class="ident" id="7916059">nil</span>&nbsp;<span class="op" id="7916063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916068"><a href="/net/lookup_test.go.html#7915850">t</a></span><span class="op" id="7916069">.</span><span class="ident" id="7916070">Fatal</span><span class="op" id="7916075">(</span><span class="ident" id="7916076"><a href="/net/lookup_test.go.html#7916020">err</a></span><span class="op" id="7916079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916087">if</span>&nbsp;<span class="builtinfunc" id="7916090">len</span><span class="op" id="7916093">(</span><span class="ident" id="7916094"><a href="/net/lookup_test.go.html#7916013">names</a></span><span class="op" id="7916099">)</span>&nbsp;<span class="op" id="7916101">==</span>&nbsp;<span class="num" id="7916104">0</span>&nbsp;<span class="op" id="7916106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916111"><a href="/net/lookup_test.go.html#7915850">t</a></span><span class="op" id="7916112">.</span><span class="ident" id="7916113">Error</span><span class="op" id="7916118">(</span><span class="string" id="7916119">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7916134">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916142">for</span>&nbsp;<span class="ident" id="7916146">_</span><span class="op" id="7916147">,</span>&nbsp;<span class="ident" id="7916149">name</span>&nbsp;<span class="op" id="7916154">:=</span>&nbsp;<span class="keyword" id="7916157">range</span>&nbsp;<span class="ident" id="7916163"><a href="/net/lookup_test.go.html#7916013">names</a></span>&nbsp;<span class="op" id="7916169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916174">if</span>&nbsp;<span class="op" id="7916177">!</span><span class="ident" id="7916178"><a href="/net/lookup_test.go.html#7913404">strings</a></span><span class="op" id="7916185">.</span><span class="ident" id="7916186">HasSuffix</span><span class="op" id="7916195">(</span><span class="ident" id="7916196"><a href="/net/lookup_test.go.html#7916149">name</a></span><span class="op" id="7916200">,</span>&nbsp;<span class="ident" id="7916202"><a href="/net/lookup_test.go.html#7915970">tt</a></span><span class="op" id="7916204">.</span><span class="ident" id="7916205">name</span><span class="op" id="7916209">)</span>&nbsp;<span class="op" id="7916211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916217"><a href="/net/lookup_test.go.html#7915850">t</a></span><span class="op" id="7916218">.</span><span class="ident" id="7916219">Errorf</span><span class="op" id="7916225">(</span><span class="string" id="7916226">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="7916263">,</span>&nbsp;<span class="ident" id="7916265"><a href="/net/lookup_test.go.html#7916149">name</a></span><span class="op" id="7916269">,</span>&nbsp;<span class="ident" id="7916271"><a href="/net/lookup_test.go.html#7915970">tt</a></span><span class="op" id="7916273">.</span><span class="ident" id="7916274">name</span><span class="op" id="7916278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916283">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916290">}</span><br>
<span class="lineno"></span><span class="op" id="7916292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7916295">func</span>&nbsp;<span class="ident" id="7916300">TestLookupIANACNAME</span><span class="op" id="7916319">(</span><span class="ident" id="7916320">t</span>&nbsp;<span class="op" id="7916322">*</span><span class="ident" id="7916323"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7916330">.</span><span class="ident" id="7916331">T</span><span class="op" id="7916332">)</span>&nbsp;<span class="op" id="7916334">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916337">if</span>&nbsp;<span class="ident" id="7916340"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7916347">.</span><span class="ident" id="7916348">Short</span><span class="op" id="7916353">(</span><span class="op" id="7916354">)</span>&nbsp;<span class="op" id="7916356">||</span>&nbsp;<span class="op" id="7916359">!</span><span class="op" id="7916360">*</span><span class="ident" id="7916361"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="7916374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916378"><a href="/net/lookup_test.go.html#7916320">t</a></span><span class="op" id="7916379">.</span><span class="ident" id="7916380">Skip</span><span class="op" id="7916384">(</span><span class="string" id="7916385">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7916426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916433">cname</span><span class="op" id="7916438">,</span>&nbsp;<span class="ident" id="7916440">err</span>&nbsp;<span class="op" id="7916444">:=</span>&nbsp;<span class="ident" id="7916447"><a href="/net/lookup.go.html#1457135">LookupCNAME</a></span><span class="op" id="7916458">(</span><span class="string" id="7916459">&#34;www.iana.org&#34;</span><span class="op" id="7916473">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916476">if</span>&nbsp;<span class="ident" id="7916479"><a href="/net/lookup_test.go.html#7916440">err</a></span>&nbsp;<span class="op" id="7916483">!=</span>&nbsp;<span class="ident" id="7916486">nil</span>&nbsp;<span class="op" id="7916490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916494"><a href="/net/lookup_test.go.html#7916320">t</a></span><span class="op" id="7916495">.</span><span class="ident" id="7916496">Fatal</span><span class="op" id="7916501">(</span><span class="ident" id="7916502"><a href="/net/lookup_test.go.html#7916440">err</a></span><span class="op" id="7916505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916511">if</span>&nbsp;<span class="op" id="7916514">!</span><span class="ident" id="7916515"><a href="/net/lookup_test.go.html#7913404">strings</a></span><span class="op" id="7916522">.</span><span class="ident" id="7916523">HasSuffix</span><span class="op" id="7916532">(</span><span class="ident" id="7916533"><a href="/net/lookup_test.go.html#7916433">cname</a></span><span class="op" id="7916538">,</span>&nbsp;<span class="string" id="7916540">&#34;.icann.org.&#34;</span><span class="op" id="7916553">)</span>&nbsp;<span class="op" id="7916555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916559"><a href="/net/lookup_test.go.html#7916320">t</a></span><span class="op" id="7916560">.</span><span class="ident" id="7916561">Errorf</span><span class="op" id="7916567">(</span><span class="string" id="7916568">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.icann.org.&#34;</span><span class="op" id="7916614">,</span>&nbsp;<span class="ident" id="7916616"><a href="/net/lookup_test.go.html#7916433">cname</a></span><span class="op" id="7916621">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916624">}</span><br>
<span class="lineno"></span><span class="op" id="7916626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7916629">func</span>&nbsp;<span class="ident" id="7916634">TestLookupGoogleHost</span><span class="op" id="7916654">(</span><span class="ident" id="7916655">t</span>&nbsp;<span class="op" id="7916657">*</span><span class="ident" id="7916658"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7916665">.</span><span class="ident" id="7916666">T</span><span class="op" id="7916667">)</span>&nbsp;<span class="op" id="7916669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916672">if</span>&nbsp;<span class="ident" id="7916675"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7916682">.</span><span class="ident" id="7916683">Short</span><span class="op" id="7916688">(</span><span class="op" id="7916689">)</span>&nbsp;<span class="op" id="7916691">||</span>&nbsp;<span class="op" id="7916694">!</span><span class="op" id="7916695">*</span><span class="ident" id="7916696"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="7916709">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916713"><a href="/net/lookup_test.go.html#7916655">t</a></span><span class="op" id="7916714">.</span><span class="ident" id="7916715">Skip</span><span class="op" id="7916719">(</span><span class="string" id="7916720">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7916761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916768">addrs</span><span class="op" id="7916773">,</span>&nbsp;<span class="ident" id="7916775">err</span>&nbsp;<span class="op" id="7916779">:=</span>&nbsp;<span class="ident" id="7916782"><a href="/net/lookup.go.html#1454757">LookupHost</a></span><span class="op" id="7916792">(</span><span class="string" id="7916793">&#34;google.com&#34;</span><span class="op" id="7916805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916808">if</span>&nbsp;<span class="ident" id="7916811"><a href="/net/lookup_test.go.html#7916775">err</a></span>&nbsp;<span class="op" id="7916815">!=</span>&nbsp;<span class="ident" id="7916818">nil</span>&nbsp;<span class="op" id="7916822">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916826"><a href="/net/lookup_test.go.html#7916655">t</a></span><span class="op" id="7916827">.</span><span class="ident" id="7916828">Fatal</span><span class="op" id="7916833">(</span><span class="ident" id="7916834"><a href="/net/lookup_test.go.html#7916775">err</a></span><span class="op" id="7916837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916843">if</span>&nbsp;<span class="builtinfunc" id="7916846">len</span><span class="op" id="7916849">(</span><span class="ident" id="7916850"><a href="/net/lookup_test.go.html#7916768">addrs</a></span><span class="op" id="7916855">)</span>&nbsp;<span class="op" id="7916857">==</span>&nbsp;<span class="num" id="7916860">0</span>&nbsp;<span class="op" id="7916862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916866"><a href="/net/lookup_test.go.html#7916655">t</a></span><span class="op" id="7916867">.</span><span class="ident" id="7916868">Error</span><span class="op" id="7916873">(</span><span class="string" id="7916874">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7916889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916892">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916895">for</span>&nbsp;<span class="ident" id="7916899">_</span><span class="op" id="7916900">,</span>&nbsp;<span class="ident" id="7916902">addr</span>&nbsp;<span class="op" id="7916907">:=</span>&nbsp;<span class="keyword" id="7916910">range</span>&nbsp;<span class="ident" id="7916916"><a href="/net/lookup_test.go.html#7916768">addrs</a></span>&nbsp;<span class="op" id="7916922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916926">if</span>&nbsp;<span class="ident" id="7916929"><a href="/net/ip.go.html#1430775">ParseIP</a></span><span class="op" id="7916936">(</span><span class="ident" id="7916937"><a href="/net/lookup_test.go.html#7916902">addr</a></span><span class="op" id="7916941">)</span>&nbsp;<span class="op" id="7916943">==</span>&nbsp;<span class="ident" id="7916946">nil</span>&nbsp;<span class="op" id="7916950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916955"><a href="/net/lookup_test.go.html#7916655">t</a></span><span class="op" id="7916956">.</span><span class="ident" id="7916957">Errorf</span><span class="op" id="7916963">(</span><span class="string" id="7916964">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;literal&nbsp;ip&nbsp;address&#34;</span><span class="op" id="7916999">,</span>&nbsp;<span class="ident" id="7917001"><a href="/net/lookup_test.go.html#7916902">addr</a></span><span class="op" id="7917005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917012">}</span><br>
<span class="lineno">175</span><span class="op" id="7917014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7917017">func</span>&nbsp;<span class="ident" id="7917022">TestLookupGoogleIP</span><span class="op" id="7917040">(</span><span class="ident" id="7917041">t</span>&nbsp;<span class="op" id="7917043">*</span><span class="ident" id="7917044"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7917051">.</span><span class="ident" id="7917052">T</span><span class="op" id="7917053">)</span>&nbsp;<span class="op" id="7917055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917058">if</span>&nbsp;<span class="ident" id="7917061"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7917068">.</span><span class="ident" id="7917069">Short</span><span class="op" id="7917074">(</span><span class="op" id="7917075">)</span>&nbsp;<span class="op" id="7917077">||</span>&nbsp;<span class="op" id="7917080">!</span><span class="op" id="7917081">*</span><span class="ident" id="7917082"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="7917095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917099"><a href="/net/lookup_test.go.html#7917041">t</a></span><span class="op" id="7917100">.</span><span class="ident" id="7917101">Skip</span><span class="op" id="7917105">(</span><span class="string" id="7917106">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7917147">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917154">ips</span><span class="op" id="7917157">,</span>&nbsp;<span class="ident" id="7917159">err</span>&nbsp;<span class="op" id="7917163">:=</span>&nbsp;<span class="ident" id="7917166"><a href="/net/lookup.go.html#1454959">LookupIP</a></span><span class="op" id="7917174">(</span><span class="string" id="7917175">&#34;google.com&#34;</span><span class="op" id="7917187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917190">if</span>&nbsp;<span class="ident" id="7917193"><a href="/net/lookup_test.go.html#7917159">err</a></span>&nbsp;<span class="op" id="7917197">!=</span>&nbsp;<span class="ident" id="7917200">nil</span>&nbsp;<span class="op" id="7917204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917208"><a href="/net/lookup_test.go.html#7917041">t</a></span><span class="op" id="7917209">.</span><span class="ident" id="7917210">Fatal</span><span class="op" id="7917215">(</span><span class="ident" id="7917216"><a href="/net/lookup_test.go.html#7917159">err</a></span><span class="op" id="7917219">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917225">if</span>&nbsp;<span class="builtinfunc" id="7917228">len</span><span class="op" id="7917231">(</span><span class="ident" id="7917232"><a href="/net/lookup_test.go.html#7917154">ips</a></span><span class="op" id="7917235">)</span>&nbsp;<span class="op" id="7917237">==</span>&nbsp;<span class="num" id="7917240">0</span>&nbsp;<span class="op" id="7917242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917246"><a href="/net/lookup_test.go.html#7917041">t</a></span><span class="op" id="7917247">.</span><span class="ident" id="7917248">Error</span><span class="op" id="7917253">(</span><span class="string" id="7917254">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7917269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917275">for</span>&nbsp;<span class="ident" id="7917279">_</span><span class="op" id="7917280">,</span>&nbsp;<span class="ident" id="7917282">ip</span>&nbsp;<span class="op" id="7917285">:=</span>&nbsp;<span class="keyword" id="7917288">range</span>&nbsp;<span class="ident" id="7917294"><a href="/net/lookup_test.go.html#7917154">ips</a></span>&nbsp;<span class="op" id="7917298">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917302">if</span>&nbsp;<span class="ident" id="7917305"><a href="/net/lookup_test.go.html#7917282">ip</a></span><span class="op" id="7917307">.</span><span class="ident" id="7917308">To4</span><span class="op" id="7917311">(</span><span class="op" id="7917312">)</span>&nbsp;<span class="op" id="7917314">==</span>&nbsp;<span class="ident" id="7917317">nil</span>&nbsp;<span class="op" id="7917321">&amp;&amp;</span>&nbsp;<span class="ident" id="7917324"><a href="/net/lookup_test.go.html#7917282">ip</a></span><span class="op" id="7917326">.</span><span class="ident" id="7917327">To16</span><span class="op" id="7917331">(</span><span class="op" id="7917332">)</span>&nbsp;<span class="op" id="7917334">==</span>&nbsp;<span class="ident" id="7917337">nil</span>&nbsp;<span class="op" id="7917341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917346"><a href="/net/lookup_test.go.html#7917041">t</a></span><span class="op" id="7917347">.</span><span class="ident" id="7917348">Errorf</span><span class="op" id="7917354">(</span><span class="string" id="7917355">&#34;got&nbsp;%v;&nbsp;want&nbsp;an&nbsp;ip&nbsp;address&#34;</span><span class="op" id="7917383">,</span>&nbsp;<span class="ident" id="7917385"><a href="/net/lookup_test.go.html#7917282">ip</a></span><span class="op" id="7917387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917394">}</span><br>
<span class="lineno"></span><span class="op" id="7917396">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7917399">var</span>&nbsp;<span class="ident" id="7917403">revAddrTests</span>&nbsp;<span class="op" id="7917416">=</span>&nbsp;<span class="op" id="7917418">[</span><span class="op" id="7917419">]</span><span class="keyword" id="7917420">struct</span>&nbsp;<span class="op" id="7917427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917430">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7917440">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917448">Reverse</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7917458">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917466">ErrPrefix</span>&nbsp;<span class="builtintype" id="7917476">string</span><br>
<span class="lineno">200</span><span class="op" id="7917483">}</span><span class="op" id="7917484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917487">{</span><span class="string" id="7917488">&#34;1.2.3.4&#34;</span><span class="op" id="7917497">,</span>&nbsp;<span class="string" id="7917499">&#34;4.3.2.1.in-addr.arpa.&#34;</span><span class="op" id="7917522">,</span>&nbsp;<span class="string" id="7917524">&#34;&#34;</span><span class="op" id="7917526">}</span><span class="op" id="7917527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917530">{</span><span class="string" id="7917531">&#34;245.110.36.114&#34;</span><span class="op" id="7917547">,</span>&nbsp;<span class="string" id="7917549">&#34;114.36.110.245.in-addr.arpa.&#34;</span><span class="op" id="7917579">,</span>&nbsp;<span class="string" id="7917581">&#34;&#34;</span><span class="op" id="7917583">}</span><span class="op" id="7917584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917587">{</span><span class="string" id="7917588">&#34;::ffff:12.34.56.78&#34;</span><span class="op" id="7917608">,</span>&nbsp;<span class="string" id="7917610">&#34;78.56.34.12.in-addr.arpa.&#34;</span><span class="op" id="7917637">,</span>&nbsp;<span class="string" id="7917639">&#34;&#34;</span><span class="op" id="7917641">}</span><span class="op" id="7917642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917645">{</span><span class="string" id="7917646">&#34;::1&#34;</span><span class="op" id="7917651">,</span>&nbsp;<span class="string" id="7917653">&#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.&#34;</span><span class="op" id="7917728">,</span>&nbsp;<span class="string" id="7917730">&#34;&#34;</span><span class="op" id="7917732">}</span><span class="op" id="7917733">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917736">{</span><span class="string" id="7917737">&#34;1::&#34;</span><span class="op" id="7917742">,</span>&nbsp;<span class="string" id="7917744">&#34;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.ip6.arpa.&#34;</span><span class="op" id="7917819">,</span>&nbsp;<span class="string" id="7917821">&#34;&#34;</span><span class="op" id="7917823">}</span><span class="op" id="7917824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917827">{</span><span class="string" id="7917828">&#34;1234:567::89a:bcde&#34;</span><span class="op" id="7917848">,</span>&nbsp;<span class="string" id="7917850">&#34;e.d.c.b.a.9.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="7917925">,</span>&nbsp;<span class="string" id="7917927">&#34;&#34;</span><span class="op" id="7917929">}</span><span class="op" id="7917930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917933">{</span><span class="string" id="7917934">&#34;1234:567:fefe:bcbc:adad:9e4a:89a:bcde&#34;</span><span class="op" id="7917973">,</span>&nbsp;<span class="string" id="7917975">&#34;e.d.c.b.a.9.8.0.a.4.e.9.d.a.d.a.c.b.c.b.e.f.e.f.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="7918050">,</span>&nbsp;<span class="string" id="7918052">&#34;&#34;</span><span class="op" id="7918054">}</span><span class="op" id="7918055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918058">{</span><span class="string" id="7918059">&#34;1.2.3&#34;</span><span class="op" id="7918066">,</span>&nbsp;<span class="string" id="7918068">&#34;&#34;</span><span class="op" id="7918070">,</span>&nbsp;<span class="string" id="7918072">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7918094">}</span><span class="op" id="7918095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918098">{</span><span class="string" id="7918099">&#34;1.2.3.4.5&#34;</span><span class="op" id="7918110">,</span>&nbsp;<span class="string" id="7918112">&#34;&#34;</span><span class="op" id="7918114">,</span>&nbsp;<span class="string" id="7918116">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7918138">}</span><span class="op" id="7918139">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918142">{</span><span class="string" id="7918143">&#34;1234:567:bcbca::89a:bcde&#34;</span><span class="op" id="7918169">,</span>&nbsp;<span class="string" id="7918171">&#34;&#34;</span><span class="op" id="7918173">,</span>&nbsp;<span class="string" id="7918175">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7918197">}</span><span class="op" id="7918198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918201">{</span><span class="string" id="7918202">&#34;1234:567::bcbc:adad::89a:bcde&#34;</span><span class="op" id="7918233">,</span>&nbsp;<span class="string" id="7918235">&#34;&#34;</span><span class="op" id="7918237">,</span>&nbsp;<span class="string" id="7918239">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7918261">}</span><span class="op" id="7918262">,</span><br>
<span class="lineno"></span><span class="op" id="7918264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7918267">func</span>&nbsp;<span class="ident" id="7918272">TestReverseAddress</span><span class="op" id="7918290">(</span><span class="ident" id="7918291">t</span>&nbsp;<span class="op" id="7918293">*</span><span class="ident" id="7918294"><a href="/net/lookup_test.go.html#7913415">testing</a></span><span class="op" id="7918301">.</span><span class="ident" id="7918302">T</span><span class="op" id="7918303">)</span>&nbsp;<span class="op" id="7918305">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7918308">for</span>&nbsp;<span class="ident" id="7918312">i</span><span class="op" id="7918313">,</span>&nbsp;<span class="ident" id="7918315">tt</span>&nbsp;<span class="op" id="7918318">:=</span>&nbsp;<span class="keyword" id="7918321">range</span>&nbsp;<span class="ident" id="7918327"><a href="/net/lookup_test.go.html#7917403">revAddrTests</a></span>&nbsp;<span class="op" id="7918340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918344">a</span><span class="op" id="7918345">,</span>&nbsp;<span class="ident" id="7918347">err</span>&nbsp;<span class="op" id="7918351">:=</span>&nbsp;<span class="ident" id="7918354"><a href="/net/dnsclient.go.html#1340381">reverseaddr</a></span><span class="op" id="7918365">(</span><span class="ident" id="7918366"><a href="/net/lookup_test.go.html#7918315">tt</a></span><span class="op" id="7918368">.</span><span class="ident" id="7918369">Addr</span><span class="op" id="7918373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7918377">if</span>&nbsp;<span class="builtinfunc" id="7918380">len</span><span class="op" id="7918383">(</span><span class="ident" id="7918384"><a href="/net/lookup_test.go.html#7918315">tt</a></span><span class="op" id="7918386">.</span><span class="ident" id="7918387">ErrPrefix</span><span class="op" id="7918396">)</span>&nbsp;<span class="op" id="7918398">&gt;</span>&nbsp;<span class="num" id="7918400">0</span>&nbsp;<span class="op" id="7918402">&amp;&amp;</span>&nbsp;<span class="ident" id="7918405"><a href="/net/lookup_test.go.html#7918347">err</a></span>&nbsp;<span class="op" id="7918409">==</span>&nbsp;<span class="ident" id="7918412">nil</span>&nbsp;<span class="op" id="7918416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918421"><a href="/net/lookup_test.go.html#7918291">t</a></span><span class="op" id="7918422">.</span><span class="ident" id="7918423">Errorf</span><span class="op" id="7918429">(</span><span class="string" id="7918430">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;&lt;nil&gt;&nbsp;(error)&#34;</span><span class="op" id="7918467">,</span>&nbsp;<span class="ident" id="7918469"><a href="/net/lookup_test.go.html#7918312">i</a></span><span class="op" id="7918470">,</span>&nbsp;<span class="ident" id="7918472"><a href="/net/lookup_test.go.html#7918315">tt</a></span><span class="op" id="7918474">.</span><span class="ident" id="7918475">ErrPrefix</span><span class="op" id="7918484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7918489">continue</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7918504">if</span>&nbsp;<span class="builtinfunc" id="7918507">len</span><span class="op" id="7918510">(</span><span class="ident" id="7918511"><a href="/net/lookup_test.go.html#7918315">tt</a></span><span class="op" id="7918513">.</span><span class="ident" id="7918514">ErrPrefix</span><span class="op" id="7918523">)</span>&nbsp;<span class="op" id="7918525">==</span>&nbsp;<span class="num" id="7918528">0</span>&nbsp;<span class="op" id="7918530">&amp;&amp;</span>&nbsp;<span class="ident" id="7918533"><a href="/net/lookup_test.go.html#7918347">err</a></span>&nbsp;<span class="op" id="7918537">!=</span>&nbsp;<span class="ident" id="7918540">nil</span>&nbsp;<span class="op" id="7918544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918549"><a href="/net/lookup_test.go.html#7918291">t</a></span><span class="op" id="7918550">.</span><span class="ident" id="7918551">Errorf</span><span class="op" id="7918557">(</span><span class="string" id="7918558">&#34;#%d:&nbsp;expected&nbsp;&lt;nil&gt;,&nbsp;got&nbsp;%q&nbsp;(error)&#34;</span><span class="op" id="7918595">,</span>&nbsp;<span class="ident" id="7918597"><a href="/net/lookup_test.go.html#7918312">i</a></span><span class="op" id="7918598">,</span>&nbsp;<span class="ident" id="7918600"><a href="/net/lookup_test.go.html#7918347">err</a></span><span class="op" id="7918603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7918611">if</span>&nbsp;<span class="ident" id="7918614"><a href="/net/lookup_test.go.html#7918347">err</a></span>&nbsp;<span class="op" id="7918618">!=</span>&nbsp;<span class="ident" id="7918621">nil</span>&nbsp;<span class="op" id="7918625">&amp;&amp;</span>&nbsp;<span class="ident" id="7918628"><a href="/net/lookup_test.go.html#7918347">err</a></span><span class="op" id="7918631">.</span><span class="op" id="7918632">(</span><span class="op" id="7918633">*</span><span class="ident" id="7918634"><a href="/net/dnsclient.go.html#1339713">DNSError</a></span><span class="op" id="7918642">)</span><span class="op" id="7918643">.</span><span class="ident" id="7918644">Err</span>&nbsp;<span class="op" id="7918648">!=</span>&nbsp;<span class="ident" id="7918651"><a href="/net/lookup_test.go.html#7918315">tt</a></span><span class="op" id="7918653">.</span><span class="ident" id="7918654">ErrPrefix</span>&nbsp;<span class="op" id="7918664">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918669"><a href="/net/lookup_test.go.html#7918291">t</a></span><span class="op" id="7918670">.</span><span class="ident" id="7918671">Errorf</span><span class="op" id="7918677">(</span><span class="string" id="7918678">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(mismatched&nbsp;error)&#34;</span><span class="op" id="7918723">,</span>&nbsp;<span class="ident" id="7918725"><a href="/net/lookup_test.go.html#7918312">i</a></span><span class="op" id="7918726">,</span>&nbsp;<span class="ident" id="7918728"><a href="/net/lookup_test.go.html#7918315">tt</a></span><span class="op" id="7918730">.</span><span class="ident" id="7918731">ErrPrefix</span><span class="op" id="7918740">,</span>&nbsp;<span class="ident" id="7918742"><a href="/net/lookup_test.go.html#7918347">err</a></span><span class="op" id="7918745">.</span><span class="op" id="7918746">(</span><span class="op" id="7918747">*</span><span class="ident" id="7918748"><a href="/net/dnsclient.go.html#1339713">DNSError</a></span><span class="op" id="7918756">)</span><span class="op" id="7918757">.</span><span class="ident" id="7918758">Err</span><span class="op" id="7918761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7918769">if</span>&nbsp;<span class="ident" id="7918772"><a href="/net/lookup_test.go.html#7918344">a</a></span>&nbsp;<span class="op" id="7918774">!=</span>&nbsp;<span class="ident" id="7918777"><a href="/net/lookup_test.go.html#7918315">tt</a></span><span class="op" id="7918779">.</span><span class="ident" id="7918780">Reverse</span>&nbsp;<span class="op" id="7918788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918793"><a href="/net/lookup_test.go.html#7918291">t</a></span><span class="op" id="7918794">.</span><span class="ident" id="7918795">Errorf</span><span class="op" id="7918801">(</span><span class="string" id="7918802">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(reverse&nbsp;address)&#34;</span><span class="op" id="7918846">,</span>&nbsp;<span class="ident" id="7918848"><a href="/net/lookup_test.go.html#7918312">i</a></span><span class="op" id="7918849">,</span>&nbsp;<span class="ident" id="7918851"><a href="/net/lookup_test.go.html#7918315">tt</a></span><span class="op" id="7918853">.</span><span class="ident" id="7918854">Reverse</span><span class="op" id="7918861">,</span>&nbsp;<span class="ident" id="7918863"><a href="/net/lookup_test.go.html#7918344">a</a></span><span class="op" id="7918864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918868">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918871">}</span><br>
<span class="lineno"></span><span class="op" id="7918873">}</span>
</div>
</body>
</html>
