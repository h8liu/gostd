<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html" class="current">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7304521">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7304576">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7304630">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7304681">package</span>&nbsp;<span class="ident" id="7304689">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7304694">import</span>&nbsp;<span class="op" id="7304701">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7304704">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7304713">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7304719">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7304725">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7304736">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7304746">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7304749">type</span>&nbsp;<span class="ident" id="7304754">Bench</span>&nbsp;<span class="keyword" id="7304760">struct</span>&nbsp;<span class="op" id="7304767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304770">A</span>&nbsp;<span class="builtintype" id="7304772">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304777">B</span>&nbsp;<span class="builtintype" id="7304779">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304788">C</span>&nbsp;<span class="builtintype" id="7304790">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304798">D</span>&nbsp;<span class="op" id="7304800">[</span><span class="op" id="7304801">]</span><span class="builtintype" id="7304802">byte</span><br>
<span class="lineno">20</span><span class="op" id="7304807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7304810">func</span>&nbsp;<span class="ident" id="7304815">benchmarkEndToEnd</span><span class="op" id="7304832">(</span><span class="ident" id="7304833">b</span>&nbsp;<span class="op" id="7304835">*</span><span class="ident" id="7304836">testing</span><span class="op" id="7304843">.</span><span class="ident" id="7304844">B</span><span class="op" id="7304845">,</span>&nbsp;<span class="ident" id="7304847">ctor</span>&nbsp;<span class="keyword" id="7304852">func</span><span class="op" id="7304856">(</span><span class="op" id="7304857">)</span>&nbsp;<span class="keyword" id="7304859">interface</span><span class="op" id="7304868">{</span><span class="op" id="7304869">}</span><span class="op" id="7304870">,</span>&nbsp;<span class="ident" id="7304872">pipe</span>&nbsp;<span class="keyword" id="7304877">func</span><span class="op" id="7304881">(</span><span class="op" id="7304882">)</span>&nbsp;<span class="op" id="7304884">(</span><span class="ident" id="7304885">r</span>&nbsp;<span class="ident" id="7304887">io</span><span class="op" id="7304889">.</span><span class="ident" id="7304890">Reader</span><span class="op" id="7304896">,</span>&nbsp;<span class="ident" id="7304898">w</span>&nbsp;<span class="ident" id="7304900">io</span><span class="op" id="7304902">.</span><span class="ident" id="7304903">Writer</span><span class="op" id="7304909">,</span>&nbsp;<span class="ident" id="7304911">err</span>&nbsp;<span class="builtintype" id="7304915">error</span><span class="op" id="7304920">)</span><span class="op" id="7304921">)</span>&nbsp;<span class="op" id="7304923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304926">b</span><span class="op" id="7304927">.</span><span class="ident" id="7304928">RunParallel</span><span class="op" id="7304939">(</span><span class="keyword" id="7304940">func</span><span class="op" id="7304944">(</span><span class="ident" id="7304945">pb</span>&nbsp;<span class="op" id="7304948">*</span><span class="ident" id="7304949">testing</span><span class="op" id="7304956">.</span><span class="ident" id="7304957">PB</span><span class="op" id="7304959">)</span>&nbsp;<span class="op" id="7304961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304965">r</span><span class="op" id="7304966">,</span>&nbsp;<span class="ident" id="7304968">w</span><span class="op" id="7304969">,</span>&nbsp;<span class="ident" id="7304971">err</span>&nbsp;<span class="op" id="7304975">:=</span>&nbsp;<span class="ident" id="7304978">pipe</span><span class="op" id="7304982">(</span><span class="op" id="7304983">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304987">if</span>&nbsp;<span class="ident" id="7304990">err</span>&nbsp;<span class="op" id="7304994">!=</span>&nbsp;<span class="builtintype" id="7304997">nil</span>&nbsp;<span class="op" id="7305001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305006">b</span><span class="op" id="7305007">.</span><span class="ident" id="7305008">Fatal</span><span class="op" id="7305013">(</span><span class="string" id="7305014">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="7305031">,</span>&nbsp;<span class="ident" id="7305033">err</span><span class="op" id="7305036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305044">v</span>&nbsp;<span class="op" id="7305046">:=</span>&nbsp;<span class="ident" id="7305049">ctor</span><span class="op" id="7305053">(</span><span class="op" id="7305054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305058">enc</span>&nbsp;<span class="op" id="7305062">:=</span>&nbsp;<span class="ident" id="7305065">NewEncoder</span><span class="op" id="7305075">(</span><span class="ident" id="7305076">w</span><span class="op" id="7305077">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305081">dec</span>&nbsp;<span class="op" id="7305085">:=</span>&nbsp;<span class="ident" id="7305088">NewDecoder</span><span class="op" id="7305098">(</span><span class="ident" id="7305099">r</span><span class="op" id="7305100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305104">for</span>&nbsp;<span class="ident" id="7305108">pb</span><span class="op" id="7305110">.</span><span class="ident" id="7305111">Next</span><span class="op" id="7305115">(</span><span class="op" id="7305116">)</span>&nbsp;<span class="op" id="7305118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305123">if</span>&nbsp;<span class="ident" id="7305126">err</span>&nbsp;<span class="op" id="7305130">:=</span>&nbsp;<span class="ident" id="7305133">enc</span><span class="op" id="7305136">.</span><span class="ident" id="7305137">Encode</span><span class="op" id="7305143">(</span><span class="ident" id="7305144">v</span><span class="op" id="7305145">)</span><span class="op" id="7305146">;</span>&nbsp;<span class="ident" id="7305148">err</span>&nbsp;<span class="op" id="7305152">!=</span>&nbsp;<span class="builtintype" id="7305155">nil</span>&nbsp;<span class="op" id="7305159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305165">b</span><span class="op" id="7305166">.</span><span class="ident" id="7305167">Fatal</span><span class="op" id="7305172">(</span><span class="string" id="7305173">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7305188">,</span>&nbsp;<span class="ident" id="7305190">err</span><span class="op" id="7305193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305198">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305203">if</span>&nbsp;<span class="ident" id="7305206">err</span>&nbsp;<span class="op" id="7305210">:=</span>&nbsp;<span class="ident" id="7305213">dec</span><span class="op" id="7305216">.</span><span class="ident" id="7305217">Decode</span><span class="op" id="7305223">(</span><span class="ident" id="7305224">v</span><span class="op" id="7305225">)</span><span class="op" id="7305226">;</span>&nbsp;<span class="ident" id="7305228">err</span>&nbsp;<span class="op" id="7305232">!=</span>&nbsp;<span class="builtintype" id="7305235">nil</span>&nbsp;<span class="op" id="7305239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305245">b</span><span class="op" id="7305246">.</span><span class="ident" id="7305247">Fatal</span><span class="op" id="7305252">(</span><span class="string" id="7305253">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7305268">,</span>&nbsp;<span class="ident" id="7305270">err</span><span class="op" id="7305273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305285">}</span><span class="op" id="7305286">)</span><br>
<span class="lineno">40</span><span class="op" id="7305288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7305291">func</span>&nbsp;<span class="ident" id="7305296">BenchmarkEndToEndPipe</span><span class="op" id="7305317">(</span><span class="ident" id="7305318">b</span>&nbsp;<span class="op" id="7305320">*</span><span class="ident" id="7305321">testing</span><span class="op" id="7305328">.</span><span class="ident" id="7305329">B</span><span class="op" id="7305330">)</span>&nbsp;<span class="op" id="7305332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305335">benchmarkEndToEnd</span><span class="op" id="7305352">(</span><span class="ident" id="7305353">b</span><span class="op" id="7305354">,</span>&nbsp;<span class="keyword" id="7305356">func</span><span class="op" id="7305360">(</span><span class="op" id="7305361">)</span>&nbsp;<span class="keyword" id="7305363">interface</span><span class="op" id="7305372">{</span><span class="op" id="7305373">}</span>&nbsp;<span class="op" id="7305375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305379">return</span>&nbsp;<span class="op" id="7305386">&amp;</span><span class="ident" id="7305387">Bench</span><span class="op" id="7305392">{</span><span class="num" id="7305393">7</span><span class="op" id="7305394">,</span>&nbsp;<span class="num" id="7305396">3.2</span><span class="op" id="7305399">,</span>&nbsp;<span class="string" id="7305401">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7305418">,</span>&nbsp;<span class="ident" id="7305420">bytes</span><span class="op" id="7305425">.</span><span class="ident" id="7305426">Repeat</span><span class="op" id="7305432">(</span><span class="op" id="7305433">[</span><span class="op" id="7305434">]</span><span class="builtintype" id="7305435">byte</span><span class="op" id="7305439">(</span><span class="string" id="7305440">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7305458">)</span><span class="op" id="7305459">,</span>&nbsp;<span class="num" id="7305461">100</span><span class="op" id="7305464">)</span><span class="op" id="7305465">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305468">}</span><span class="op" id="7305469">,</span>&nbsp;<span class="keyword" id="7305471">func</span><span class="op" id="7305475">(</span><span class="op" id="7305476">)</span>&nbsp;<span class="op" id="7305478">(</span><span class="ident" id="7305479">r</span>&nbsp;<span class="ident" id="7305481">io</span><span class="op" id="7305483">.</span><span class="ident" id="7305484">Reader</span><span class="op" id="7305490">,</span>&nbsp;<span class="ident" id="7305492">w</span>&nbsp;<span class="ident" id="7305494">io</span><span class="op" id="7305496">.</span><span class="ident" id="7305497">Writer</span><span class="op" id="7305503">,</span>&nbsp;<span class="ident" id="7305505">err</span>&nbsp;<span class="builtintype" id="7305509">error</span><span class="op" id="7305514">)</span>&nbsp;<span class="op" id="7305516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305520">r</span><span class="op" id="7305521">,</span>&nbsp;<span class="ident" id="7305523">w</span><span class="op" id="7305524">,</span>&nbsp;<span class="ident" id="7305526">err</span>&nbsp;<span class="op" id="7305530">=</span>&nbsp;<span class="ident" id="7305532">os</span><span class="op" id="7305534">.</span><span class="ident" id="7305535">Pipe</span><span class="op" id="7305539">(</span><span class="op" id="7305540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305544">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305552">}</span><span class="op" id="7305553">)</span><br>
<span class="lineno"></span><span class="op" id="7305555">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="7305558">func</span>&nbsp;<span class="ident" id="7305563">BenchmarkEndToEndByteBuffer</span><span class="op" id="7305590">(</span><span class="ident" id="7305591">b</span>&nbsp;<span class="op" id="7305593">*</span><span class="ident" id="7305594">testing</span><span class="op" id="7305601">.</span><span class="ident" id="7305602">B</span><span class="op" id="7305603">)</span>&nbsp;<span class="op" id="7305605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305608">benchmarkEndToEnd</span><span class="op" id="7305625">(</span><span class="ident" id="7305626">b</span><span class="op" id="7305627">,</span>&nbsp;<span class="keyword" id="7305629">func</span><span class="op" id="7305633">(</span><span class="op" id="7305634">)</span>&nbsp;<span class="keyword" id="7305636">interface</span><span class="op" id="7305645">{</span><span class="op" id="7305646">}</span>&nbsp;<span class="op" id="7305648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305652">return</span>&nbsp;<span class="op" id="7305659">&amp;</span><span class="ident" id="7305660">Bench</span><span class="op" id="7305665">{</span><span class="num" id="7305666">7</span><span class="op" id="7305667">,</span>&nbsp;<span class="num" id="7305669">3.2</span><span class="op" id="7305672">,</span>&nbsp;<span class="string" id="7305674">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7305691">,</span>&nbsp;<span class="ident" id="7305693">bytes</span><span class="op" id="7305698">.</span><span class="ident" id="7305699">Repeat</span><span class="op" id="7305705">(</span><span class="op" id="7305706">[</span><span class="op" id="7305707">]</span><span class="builtintype" id="7305708">byte</span><span class="op" id="7305712">(</span><span class="string" id="7305713">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7305731">)</span><span class="op" id="7305732">,</span>&nbsp;<span class="num" id="7305734">100</span><span class="op" id="7305737">)</span><span class="op" id="7305738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305741">}</span><span class="op" id="7305742">,</span>&nbsp;<span class="keyword" id="7305744">func</span><span class="op" id="7305748">(</span><span class="op" id="7305749">)</span>&nbsp;<span class="op" id="7305751">(</span><span class="ident" id="7305752">r</span>&nbsp;<span class="ident" id="7305754">io</span><span class="op" id="7305756">.</span><span class="ident" id="7305757">Reader</span><span class="op" id="7305763">,</span>&nbsp;<span class="ident" id="7305765">w</span>&nbsp;<span class="ident" id="7305767">io</span><span class="op" id="7305769">.</span><span class="ident" id="7305770">Writer</span><span class="op" id="7305776">,</span>&nbsp;<span class="ident" id="7305778">err</span>&nbsp;<span class="builtintype" id="7305782">error</span><span class="op" id="7305787">)</span>&nbsp;<span class="op" id="7305789">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305793">var</span>&nbsp;<span class="ident" id="7305797">buf</span>&nbsp;<span class="ident" id="7305801">bytes</span><span class="op" id="7305806">.</span><span class="ident" id="7305807">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305816">return</span>&nbsp;<span class="op" id="7305823">&amp;</span><span class="ident" id="7305824">buf</span><span class="op" id="7305827">,</span>&nbsp;<span class="op" id="7305829">&amp;</span><span class="ident" id="7305830">buf</span><span class="op" id="7305833">,</span>&nbsp;<span class="builtintype" id="7305835">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305840">}</span><span class="op" id="7305841">)</span><br>
<span class="lineno"></span><span class="op" id="7305843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7305846">func</span>&nbsp;<span class="ident" id="7305851">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="7305883">(</span><span class="ident" id="7305884">b</span>&nbsp;<span class="op" id="7305886">*</span><span class="ident" id="7305887">testing</span><span class="op" id="7305894">.</span><span class="ident" id="7305895">B</span><span class="op" id="7305896">)</span>&nbsp;<span class="op" id="7305898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305901">benchmarkEndToEnd</span><span class="op" id="7305918">(</span><span class="ident" id="7305919">b</span><span class="op" id="7305920">,</span>&nbsp;<span class="keyword" id="7305922">func</span><span class="op" id="7305926">(</span><span class="op" id="7305927">)</span>&nbsp;<span class="keyword" id="7305929">interface</span><span class="op" id="7305938">{</span><span class="op" id="7305939">}</span>&nbsp;<span class="op" id="7305941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305945">v</span>&nbsp;<span class="op" id="7305947">:=</span>&nbsp;<span class="op" id="7305950">&amp;</span><span class="ident" id="7305951">Bench</span><span class="op" id="7305956">{</span><span class="num" id="7305957">7</span><span class="op" id="7305958">,</span>&nbsp;<span class="num" id="7305960">3.2</span><span class="op" id="7305963">,</span>&nbsp;<span class="string" id="7305965">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7305982">,</span>&nbsp;<span class="builtintype" id="7305984">nil</span><span class="op" id="7305987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305991">Register</span><span class="op" id="7305999">(</span><span class="ident" id="7306000">v</span><span class="op" id="7306001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306005">arr</span>&nbsp;<span class="op" id="7306009">:=</span>&nbsp;<span class="builtinfunc" id="7306012">make</span><span class="op" id="7306016">(</span><span class="op" id="7306017">[</span><span class="op" id="7306018">]</span><span class="keyword" id="7306019">interface</span><span class="op" id="7306028">{</span><span class="op" id="7306029">}</span><span class="op" id="7306030">,</span>&nbsp;<span class="num" id="7306032">100</span><span class="op" id="7306035">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306039">for</span>&nbsp;<span class="ident" id="7306043">i</span>&nbsp;<span class="op" id="7306045">:=</span>&nbsp;<span class="keyword" id="7306048">range</span>&nbsp;<span class="ident" id="7306054">arr</span>&nbsp;<span class="op" id="7306058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306063">arr</span><span class="op" id="7306066">[</span><span class="ident" id="7306067">i</span><span class="op" id="7306068">]</span>&nbsp;<span class="op" id="7306070">=</span>&nbsp;<span class="ident" id="7306072">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306080">return</span>&nbsp;<span class="op" id="7306087">&amp;</span><span class="ident" id="7306088">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306093">}</span><span class="op" id="7306094">,</span>&nbsp;<span class="keyword" id="7306096">func</span><span class="op" id="7306100">(</span><span class="op" id="7306101">)</span>&nbsp;<span class="op" id="7306103">(</span><span class="ident" id="7306104">r</span>&nbsp;<span class="ident" id="7306106">io</span><span class="op" id="7306108">.</span><span class="ident" id="7306109">Reader</span><span class="op" id="7306115">,</span>&nbsp;<span class="ident" id="7306117">w</span>&nbsp;<span class="ident" id="7306119">io</span><span class="op" id="7306121">.</span><span class="ident" id="7306122">Writer</span><span class="op" id="7306128">,</span>&nbsp;<span class="ident" id="7306130">err</span>&nbsp;<span class="builtintype" id="7306134">error</span><span class="op" id="7306139">)</span>&nbsp;<span class="op" id="7306141">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306145">var</span>&nbsp;<span class="ident" id="7306149">buf</span>&nbsp;<span class="ident" id="7306153">bytes</span><span class="op" id="7306158">.</span><span class="ident" id="7306159">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306168">return</span>&nbsp;<span class="op" id="7306175">&amp;</span><span class="ident" id="7306176">buf</span><span class="op" id="7306179">,</span>&nbsp;<span class="op" id="7306181">&amp;</span><span class="ident" id="7306182">buf</span><span class="op" id="7306185">,</span>&nbsp;<span class="builtintype" id="7306187">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306192">}</span><span class="op" id="7306193">)</span><br>
<span class="lineno"></span><span class="op" id="7306195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7306198">func</span>&nbsp;<span class="ident" id="7306203">TestCountEncodeMallocs</span><span class="op" id="7306225">(</span><span class="ident" id="7306226">t</span>&nbsp;<span class="op" id="7306228">*</span><span class="ident" id="7306229">testing</span><span class="op" id="7306236">.</span><span class="ident" id="7306237">T</span><span class="op" id="7306238">)</span>&nbsp;<span class="op" id="7306240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306243">if</span>&nbsp;<span class="ident" id="7306246">testing</span><span class="op" id="7306253">.</span><span class="ident" id="7306254">Short</span><span class="op" id="7306259">(</span><span class="op" id="7306260">)</span>&nbsp;<span class="op" id="7306262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306266">t</span><span class="op" id="7306267">.</span><span class="ident" id="7306268">Skip</span><span class="op" id="7306272">(</span><span class="string" id="7306273">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7306310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306316">if</span>&nbsp;<span class="ident" id="7306319">runtime</span><span class="op" id="7306326">.</span><span class="ident" id="7306327">GOMAXPROCS</span><span class="op" id="7306337">(</span><span class="num" id="7306338">0</span><span class="op" id="7306339">)</span>&nbsp;<span class="op" id="7306341">&gt;</span>&nbsp;<span class="num" id="7306343">1</span>&nbsp;<span class="op" id="7306345">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306349">t</span><span class="op" id="7306350">.</span><span class="ident" id="7306351">Skip</span><span class="op" id="7306355">(</span><span class="string" id="7306356">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7306380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306387">const</span>&nbsp;<span class="ident" id="7306393">N</span>&nbsp;<span class="op" id="7306395">=</span>&nbsp;<span class="num" id="7306397">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306404">var</span>&nbsp;<span class="ident" id="7306408">buf</span>&nbsp;<span class="ident" id="7306412">bytes</span><span class="op" id="7306417">.</span><span class="ident" id="7306418">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306426">enc</span>&nbsp;<span class="op" id="7306430">:=</span>&nbsp;<span class="ident" id="7306433">NewEncoder</span><span class="op" id="7306443">(</span><span class="op" id="7306444">&amp;</span><span class="ident" id="7306445">buf</span><span class="op" id="7306448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306451">bench</span>&nbsp;<span class="op" id="7306457">:=</span>&nbsp;<span class="op" id="7306460">&amp;</span><span class="ident" id="7306461">Bench</span><span class="op" id="7306466">{</span><span class="num" id="7306467">7</span><span class="op" id="7306468">,</span>&nbsp;<span class="num" id="7306470">3.2</span><span class="op" id="7306473">,</span>&nbsp;<span class="string" id="7306475">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7306492">,</span>&nbsp;<span class="op" id="7306494">[</span><span class="op" id="7306495">]</span><span class="builtintype" id="7306496">byte</span><span class="op" id="7306500">(</span><span class="string" id="7306501">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7306519">)</span><span class="op" id="7306520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306524">allocs</span>&nbsp;<span class="op" id="7306531">:=</span>&nbsp;<span class="ident" id="7306534">testing</span><span class="op" id="7306541">.</span><span class="ident" id="7306542">AllocsPerRun</span><span class="op" id="7306554">(</span><span class="ident" id="7306555">N</span><span class="op" id="7306556">,</span>&nbsp;<span class="keyword" id="7306558">func</span><span class="op" id="7306562">(</span><span class="op" id="7306563">)</span>&nbsp;<span class="op" id="7306565">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306569">err</span>&nbsp;<span class="op" id="7306573">:=</span>&nbsp;<span class="ident" id="7306576">enc</span><span class="op" id="7306579">.</span><span class="ident" id="7306580">Encode</span><span class="op" id="7306586">(</span><span class="ident" id="7306587">bench</span><span class="op" id="7306592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306596">if</span>&nbsp;<span class="ident" id="7306599">err</span>&nbsp;<span class="op" id="7306603">!=</span>&nbsp;<span class="builtintype" id="7306606">nil</span>&nbsp;<span class="op" id="7306610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306615">t</span><span class="op" id="7306616">.</span><span class="ident" id="7306617">Fatal</span><span class="op" id="7306622">(</span><span class="string" id="7306623">&#34;encode:&#34;</span><span class="op" id="7306632">,</span>&nbsp;<span class="ident" id="7306634">err</span><span class="op" id="7306637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306644">}</span><span class="op" id="7306645">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306648">if</span>&nbsp;<span class="ident" id="7306651">allocs</span>&nbsp;<span class="op" id="7306658">!=</span>&nbsp;<span class="num" id="7306661">0</span>&nbsp;<span class="op" id="7306663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306667">t</span><span class="op" id="7306668">.</span><span class="ident" id="7306669">Fatalf</span><span class="op" id="7306675">(</span><span class="string" id="7306676">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="7306726">,</span>&nbsp;<span class="ident" id="7306728">allocs</span><span class="op" id="7306734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306737">}</span><br>
<span class="lineno"></span><span class="op" id="7306739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="7306742">func</span>&nbsp;<span class="ident" id="7306747">TestCountDecodeMallocs</span><span class="op" id="7306769">(</span><span class="ident" id="7306770">t</span>&nbsp;<span class="op" id="7306772">*</span><span class="ident" id="7306773">testing</span><span class="op" id="7306780">.</span><span class="ident" id="7306781">T</span><span class="op" id="7306782">)</span>&nbsp;<span class="op" id="7306784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306787">if</span>&nbsp;<span class="ident" id="7306790">testing</span><span class="op" id="7306797">.</span><span class="ident" id="7306798">Short</span><span class="op" id="7306803">(</span><span class="op" id="7306804">)</span>&nbsp;<span class="op" id="7306806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306810">t</span><span class="op" id="7306811">.</span><span class="ident" id="7306812">Skip</span><span class="op" id="7306816">(</span><span class="string" id="7306817">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7306854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306860">if</span>&nbsp;<span class="ident" id="7306863">runtime</span><span class="op" id="7306870">.</span><span class="ident" id="7306871">GOMAXPROCS</span><span class="op" id="7306881">(</span><span class="num" id="7306882">0</span><span class="op" id="7306883">)</span>&nbsp;<span class="op" id="7306885">&gt;</span>&nbsp;<span class="num" id="7306887">1</span>&nbsp;<span class="op" id="7306889">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306893">t</span><span class="op" id="7306894">.</span><span class="ident" id="7306895">Skip</span><span class="op" id="7306899">(</span><span class="string" id="7306900">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7306924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306931">const</span>&nbsp;<span class="ident" id="7306937">N</span>&nbsp;<span class="op" id="7306939">=</span>&nbsp;<span class="num" id="7306941">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306948">var</span>&nbsp;<span class="ident" id="7306952">buf</span>&nbsp;<span class="ident" id="7306956">bytes</span><span class="op" id="7306961">.</span><span class="ident" id="7306962">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306970">enc</span>&nbsp;<span class="op" id="7306974">:=</span>&nbsp;<span class="ident" id="7306977">NewEncoder</span><span class="op" id="7306987">(</span><span class="op" id="7306988">&amp;</span><span class="ident" id="7306989">buf</span><span class="op" id="7306992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306995">bench</span>&nbsp;<span class="op" id="7307001">:=</span>&nbsp;<span class="op" id="7307004">&amp;</span><span class="ident" id="7307005">Bench</span><span class="op" id="7307010">{</span><span class="num" id="7307011">7</span><span class="op" id="7307012">,</span>&nbsp;<span class="num" id="7307014">3.2</span><span class="op" id="7307017">,</span>&nbsp;<span class="string" id="7307019">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7307036">,</span>&nbsp;<span class="op" id="7307038">[</span><span class="op" id="7307039">]</span><span class="builtintype" id="7307040">byte</span><span class="op" id="7307044">(</span><span class="string" id="7307045">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7307063">)</span><span class="op" id="7307064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7307068">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307110">testing</span><span class="op" id="7307117">.</span><span class="ident" id="7307118">AllocsPerRun</span><span class="op" id="7307130">(</span><span class="ident" id="7307131">N</span><span class="op" id="7307132">,</span>&nbsp;<span class="keyword" id="7307134">func</span><span class="op" id="7307138">(</span><span class="op" id="7307139">)</span>&nbsp;<span class="op" id="7307141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307145">err</span>&nbsp;<span class="op" id="7307149">:=</span>&nbsp;<span class="ident" id="7307152">enc</span><span class="op" id="7307155">.</span><span class="ident" id="7307156">Encode</span><span class="op" id="7307162">(</span><span class="ident" id="7307163">bench</span><span class="op" id="7307168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7307172">if</span>&nbsp;<span class="ident" id="7307175">err</span>&nbsp;<span class="op" id="7307179">!=</span>&nbsp;<span class="builtintype" id="7307182">nil</span>&nbsp;<span class="op" id="7307186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307191">t</span><span class="op" id="7307192">.</span><span class="ident" id="7307193">Fatal</span><span class="op" id="7307198">(</span><span class="string" id="7307199">&#34;encode:&#34;</span><span class="op" id="7307208">,</span>&nbsp;<span class="ident" id="7307210">err</span><span class="op" id="7307213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7307217">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7307220">}</span><span class="op" id="7307221">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307225">dec</span>&nbsp;<span class="op" id="7307229">:=</span>&nbsp;<span class="ident" id="7307232">NewDecoder</span><span class="op" id="7307242">(</span><span class="op" id="7307243">&amp;</span><span class="ident" id="7307244">buf</span><span class="op" id="7307247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307250">allocs</span>&nbsp;<span class="op" id="7307257">:=</span>&nbsp;<span class="ident" id="7307260">testing</span><span class="op" id="7307267">.</span><span class="ident" id="7307268">AllocsPerRun</span><span class="op" id="7307280">(</span><span class="ident" id="7307281">N</span><span class="op" id="7307282">,</span>&nbsp;<span class="keyword" id="7307284">func</span><span class="op" id="7307288">(</span><span class="op" id="7307289">)</span>&nbsp;<span class="op" id="7307291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7307295">*</span><span class="ident" id="7307296">bench</span>&nbsp;<span class="op" id="7307302">=</span>&nbsp;<span class="ident" id="7307304">Bench</span><span class="op" id="7307309">{</span><span class="op" id="7307310">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307314">err</span>&nbsp;<span class="op" id="7307318">:=</span>&nbsp;<span class="ident" id="7307321">dec</span><span class="op" id="7307324">.</span><span class="ident" id="7307325">Decode</span><span class="op" id="7307331">(</span><span class="op" id="7307332">&amp;</span><span class="ident" id="7307333">bench</span><span class="op" id="7307338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7307342">if</span>&nbsp;<span class="ident" id="7307345">err</span>&nbsp;<span class="op" id="7307349">!=</span>&nbsp;<span class="builtintype" id="7307352">nil</span>&nbsp;<span class="op" id="7307356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307361">t</span><span class="op" id="7307362">.</span><span class="ident" id="7307363">Fatal</span><span class="op" id="7307368">(</span><span class="string" id="7307369">&#34;decode:&#34;</span><span class="op" id="7307378">,</span>&nbsp;<span class="ident" id="7307380">err</span><span class="op" id="7307383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7307387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7307390">}</span><span class="op" id="7307391">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7307394">if</span>&nbsp;<span class="ident" id="7307397">allocs</span>&nbsp;<span class="op" id="7307404">!=</span>&nbsp;<span class="num" id="7307407">4</span>&nbsp;<span class="op" id="7307409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307413">t</span><span class="op" id="7307414">.</span><span class="ident" id="7307415">Fatalf</span><span class="op" id="7307421">(</span><span class="string" id="7307422">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="7307472">,</span>&nbsp;<span class="ident" id="7307474">allocs</span><span class="op" id="7307480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7307483">}</span><br>
<span class="lineno"></span><span class="op" id="7307485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7307488">func</span>&nbsp;<span class="ident" id="7307493">BenchmarkEncodeComplex128Slice</span><span class="op" id="7307523">(</span><span class="ident" id="7307524">b</span>&nbsp;<span class="op" id="7307526">*</span><span class="ident" id="7307527">testing</span><span class="op" id="7307534">.</span><span class="ident" id="7307535">B</span><span class="op" id="7307536">)</span>&nbsp;<span class="op" id="7307538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7307541">var</span>&nbsp;<span class="ident" id="7307545">buf</span>&nbsp;<span class="ident" id="7307549">bytes</span><span class="op" id="7307554">.</span><span class="ident" id="7307555">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307563">enc</span>&nbsp;<span class="op" id="7307567">:=</span>&nbsp;<span class="ident" id="7307570">NewEncoder</span><span class="op" id="7307580">(</span><span class="op" id="7307581">&amp;</span><span class="ident" id="7307582">buf</span><span class="op" id="7307585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307588">a</span>&nbsp;<span class="op" id="7307590">:=</span>&nbsp;<span class="builtinfunc" id="7307593">make</span><span class="op" id="7307597">(</span><span class="op" id="7307598">[</span><span class="op" id="7307599">]</span><span class="builtintype" id="7307600">complex128</span><span class="op" id="7307610">,</span>&nbsp;<span class="num" id="7307612">1000</span><span class="op" id="7307616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7307619">for</span>&nbsp;<span class="ident" id="7307623">i</span>&nbsp;<span class="op" id="7307625">:=</span>&nbsp;<span class="keyword" id="7307628">range</span>&nbsp;<span class="ident" id="7307634">a</span>&nbsp;<span class="op" id="7307636">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307640">a</span><span class="op" id="7307641">[</span><span class="ident" id="7307642">i</span><span class="op" id="7307643">]</span>&nbsp;<span class="op" id="7307645">=</span>&nbsp;<span class="num" id="7307647">1.2</span>&nbsp;<span class="op" id="7307651">+</span>&nbsp;<span class="num" id="7307653">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7307659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307662">b</span><span class="op" id="7307663">.</span><span class="ident" id="7307664">ResetTimer</span><span class="op" id="7307674">(</span><span class="op" id="7307675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7307678">for</span>&nbsp;<span class="ident" id="7307682">i</span>&nbsp;<span class="op" id="7307684">:=</span>&nbsp;<span class="num" id="7307687">0</span><span class="op" id="7307688">;</span>&nbsp;<span class="ident" id="7307690">i</span>&nbsp;<span class="op" id="7307692">&lt;</span>&nbsp;<span class="ident" id="7307694">b</span><span class="op" id="7307695">.</span><span class="ident" id="7307696">N</span><span class="op" id="7307697">;</span>&nbsp;<span class="ident" id="7307699">i</span><span class="op" id="7307700">++</span>&nbsp;<span class="op" id="7307703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307707">buf</span><span class="op" id="7307710">.</span><span class="ident" id="7307711">Reset</span><span class="op" id="7307716">(</span><span class="op" id="7307717">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307721">err</span>&nbsp;<span class="op" id="7307725">:=</span>&nbsp;<span class="ident" id="7307728">enc</span><span class="op" id="7307731">.</span><span class="ident" id="7307732">Encode</span><span class="op" id="7307738">(</span><span class="ident" id="7307739">a</span><span class="op" id="7307740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7307744">if</span>&nbsp;<span class="ident" id="7307747">err</span>&nbsp;<span class="op" id="7307751">!=</span>&nbsp;<span class="builtintype" id="7307754">nil</span>&nbsp;<span class="op" id="7307758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307763">b</span><span class="op" id="7307764">.</span><span class="ident" id="7307765">Fatal</span><span class="op" id="7307770">(</span><span class="ident" id="7307771">err</span><span class="op" id="7307774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7307778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7307781">}</span><br>
<span class="lineno">150</span><span class="op" id="7307783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7307786">func</span>&nbsp;<span class="ident" id="7307791">BenchmarkEncodeFloat64Slice</span><span class="op" id="7307818">(</span><span class="ident" id="7307819">b</span>&nbsp;<span class="op" id="7307821">*</span><span class="ident" id="7307822">testing</span><span class="op" id="7307829">.</span><span class="ident" id="7307830">B</span><span class="op" id="7307831">)</span>&nbsp;<span class="op" id="7307833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7307836">var</span>&nbsp;<span class="ident" id="7307840">buf</span>&nbsp;<span class="ident" id="7307844">bytes</span><span class="op" id="7307849">.</span><span class="ident" id="7307850">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307858">enc</span>&nbsp;<span class="op" id="7307862">:=</span>&nbsp;<span class="ident" id="7307865">NewEncoder</span><span class="op" id="7307875">(</span><span class="op" id="7307876">&amp;</span><span class="ident" id="7307877">buf</span><span class="op" id="7307880">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307883">a</span>&nbsp;<span class="op" id="7307885">:=</span>&nbsp;<span class="builtinfunc" id="7307888">make</span><span class="op" id="7307892">(</span><span class="op" id="7307893">[</span><span class="op" id="7307894">]</span><span class="builtintype" id="7307895">float64</span><span class="op" id="7307902">,</span>&nbsp;<span class="num" id="7307904">1000</span><span class="op" id="7307908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7307911">for</span>&nbsp;<span class="ident" id="7307915">i</span>&nbsp;<span class="op" id="7307917">:=</span>&nbsp;<span class="keyword" id="7307920">range</span>&nbsp;<span class="ident" id="7307926">a</span>&nbsp;<span class="op" id="7307928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307932">a</span><span class="op" id="7307933">[</span><span class="ident" id="7307934">i</span><span class="op" id="7307935">]</span>&nbsp;<span class="op" id="7307937">=</span>&nbsp;<span class="num" id="7307939">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7307947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307950">b</span><span class="op" id="7307951">.</span><span class="ident" id="7307952">ResetTimer</span><span class="op" id="7307962">(</span><span class="op" id="7307963">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7307966">for</span>&nbsp;<span class="ident" id="7307970">i</span>&nbsp;<span class="op" id="7307972">:=</span>&nbsp;<span class="num" id="7307975">0</span><span class="op" id="7307976">;</span>&nbsp;<span class="ident" id="7307978">i</span>&nbsp;<span class="op" id="7307980">&lt;</span>&nbsp;<span class="ident" id="7307982">b</span><span class="op" id="7307983">.</span><span class="ident" id="7307984">N</span><span class="op" id="7307985">;</span>&nbsp;<span class="ident" id="7307987">i</span><span class="op" id="7307988">++</span>&nbsp;<span class="op" id="7307991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7307995">buf</span><span class="op" id="7307998">.</span><span class="ident" id="7307999">Reset</span><span class="op" id="7308004">(</span><span class="op" id="7308005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308009">err</span>&nbsp;<span class="op" id="7308013">:=</span>&nbsp;<span class="ident" id="7308016">enc</span><span class="op" id="7308019">.</span><span class="ident" id="7308020">Encode</span><span class="op" id="7308026">(</span><span class="ident" id="7308027">a</span><span class="op" id="7308028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308032">if</span>&nbsp;<span class="ident" id="7308035">err</span>&nbsp;<span class="op" id="7308039">!=</span>&nbsp;<span class="builtintype" id="7308042">nil</span>&nbsp;<span class="op" id="7308046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308051">b</span><span class="op" id="7308052">.</span><span class="ident" id="7308053">Fatal</span><span class="op" id="7308058">(</span><span class="ident" id="7308059">err</span><span class="op" id="7308062">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308069">}</span><br>
<span class="lineno"></span><span class="op" id="7308071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7308074">func</span>&nbsp;<span class="ident" id="7308079">BenchmarkEncodeInt32Slice</span><span class="op" id="7308104">(</span><span class="ident" id="7308105">b</span>&nbsp;<span class="op" id="7308107">*</span><span class="ident" id="7308108">testing</span><span class="op" id="7308115">.</span><span class="ident" id="7308116">B</span><span class="op" id="7308117">)</span>&nbsp;<span class="op" id="7308119">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308122">var</span>&nbsp;<span class="ident" id="7308126">buf</span>&nbsp;<span class="ident" id="7308130">bytes</span><span class="op" id="7308135">.</span><span class="ident" id="7308136">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308144">enc</span>&nbsp;<span class="op" id="7308148">:=</span>&nbsp;<span class="ident" id="7308151">NewEncoder</span><span class="op" id="7308161">(</span><span class="op" id="7308162">&amp;</span><span class="ident" id="7308163">buf</span><span class="op" id="7308166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308169">a</span>&nbsp;<span class="op" id="7308171">:=</span>&nbsp;<span class="builtinfunc" id="7308174">make</span><span class="op" id="7308178">(</span><span class="op" id="7308179">[</span><span class="op" id="7308180">]</span><span class="builtintype" id="7308181">int32</span><span class="op" id="7308186">,</span>&nbsp;<span class="num" id="7308188">1000</span><span class="op" id="7308192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308195">for</span>&nbsp;<span class="ident" id="7308199">i</span>&nbsp;<span class="op" id="7308201">:=</span>&nbsp;<span class="keyword" id="7308204">range</span>&nbsp;<span class="ident" id="7308210">a</span>&nbsp;<span class="op" id="7308212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308216">a</span><span class="op" id="7308217">[</span><span class="ident" id="7308218">i</span><span class="op" id="7308219">]</span>&nbsp;<span class="op" id="7308221">=</span>&nbsp;<span class="num" id="7308223">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308232">b</span><span class="op" id="7308233">.</span><span class="ident" id="7308234">ResetTimer</span><span class="op" id="7308244">(</span><span class="op" id="7308245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308248">for</span>&nbsp;<span class="ident" id="7308252">i</span>&nbsp;<span class="op" id="7308254">:=</span>&nbsp;<span class="num" id="7308257">0</span><span class="op" id="7308258">;</span>&nbsp;<span class="ident" id="7308260">i</span>&nbsp;<span class="op" id="7308262">&lt;</span>&nbsp;<span class="ident" id="7308264">b</span><span class="op" id="7308265">.</span><span class="ident" id="7308266">N</span><span class="op" id="7308267">;</span>&nbsp;<span class="ident" id="7308269">i</span><span class="op" id="7308270">++</span>&nbsp;<span class="op" id="7308273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308277">buf</span><span class="op" id="7308280">.</span><span class="ident" id="7308281">Reset</span><span class="op" id="7308286">(</span><span class="op" id="7308287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308291">err</span>&nbsp;<span class="op" id="7308295">:=</span>&nbsp;<span class="ident" id="7308298">enc</span><span class="op" id="7308301">.</span><span class="ident" id="7308302">Encode</span><span class="op" id="7308308">(</span><span class="ident" id="7308309">a</span><span class="op" id="7308310">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308314">if</span>&nbsp;<span class="ident" id="7308317">err</span>&nbsp;<span class="op" id="7308321">!=</span>&nbsp;<span class="builtintype" id="7308324">nil</span>&nbsp;<span class="op" id="7308328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308333">b</span><span class="op" id="7308334">.</span><span class="ident" id="7308335">Fatal</span><span class="op" id="7308340">(</span><span class="ident" id="7308341">err</span><span class="op" id="7308344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308351">}</span><br>
<span class="lineno"></span><span class="op" id="7308353">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="7308356">func</span>&nbsp;<span class="ident" id="7308361">BenchmarkEncodeStringSlice</span><span class="op" id="7308387">(</span><span class="ident" id="7308388">b</span>&nbsp;<span class="op" id="7308390">*</span><span class="ident" id="7308391">testing</span><span class="op" id="7308398">.</span><span class="ident" id="7308399">B</span><span class="op" id="7308400">)</span>&nbsp;<span class="op" id="7308402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308405">var</span>&nbsp;<span class="ident" id="7308409">buf</span>&nbsp;<span class="ident" id="7308413">bytes</span><span class="op" id="7308418">.</span><span class="ident" id="7308419">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308427">enc</span>&nbsp;<span class="op" id="7308431">:=</span>&nbsp;<span class="ident" id="7308434">NewEncoder</span><span class="op" id="7308444">(</span><span class="op" id="7308445">&amp;</span><span class="ident" id="7308446">buf</span><span class="op" id="7308449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308452">a</span>&nbsp;<span class="op" id="7308454">:=</span>&nbsp;<span class="builtinfunc" id="7308457">make</span><span class="op" id="7308461">(</span><span class="op" id="7308462">[</span><span class="op" id="7308463">]</span><span class="builtintype" id="7308464">string</span><span class="op" id="7308470">,</span>&nbsp;<span class="num" id="7308472">1000</span><span class="op" id="7308476">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308479">for</span>&nbsp;<span class="ident" id="7308483">i</span>&nbsp;<span class="op" id="7308485">:=</span>&nbsp;<span class="keyword" id="7308488">range</span>&nbsp;<span class="ident" id="7308494">a</span>&nbsp;<span class="op" id="7308496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308500">a</span><span class="op" id="7308501">[</span><span class="ident" id="7308502">i</span><span class="op" id="7308503">]</span>&nbsp;<span class="op" id="7308505">=</span>&nbsp;<span class="string" id="7308507">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308529">b</span><span class="op" id="7308530">.</span><span class="ident" id="7308531">ResetTimer</span><span class="op" id="7308541">(</span><span class="op" id="7308542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308545">for</span>&nbsp;<span class="ident" id="7308549">i</span>&nbsp;<span class="op" id="7308551">:=</span>&nbsp;<span class="num" id="7308554">0</span><span class="op" id="7308555">;</span>&nbsp;<span class="ident" id="7308557">i</span>&nbsp;<span class="op" id="7308559">&lt;</span>&nbsp;<span class="ident" id="7308561">b</span><span class="op" id="7308562">.</span><span class="ident" id="7308563">N</span><span class="op" id="7308564">;</span>&nbsp;<span class="ident" id="7308566">i</span><span class="op" id="7308567">++</span>&nbsp;<span class="op" id="7308570">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308574">buf</span><span class="op" id="7308577">.</span><span class="ident" id="7308578">Reset</span><span class="op" id="7308583">(</span><span class="op" id="7308584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308588">err</span>&nbsp;<span class="op" id="7308592">:=</span>&nbsp;<span class="ident" id="7308595">enc</span><span class="op" id="7308598">.</span><span class="ident" id="7308599">Encode</span><span class="op" id="7308605">(</span><span class="ident" id="7308606">a</span><span class="op" id="7308607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308611">if</span>&nbsp;<span class="ident" id="7308614">err</span>&nbsp;<span class="op" id="7308618">!=</span>&nbsp;<span class="builtintype" id="7308621">nil</span>&nbsp;<span class="op" id="7308625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308630">b</span><span class="op" id="7308631">.</span><span class="ident" id="7308632">Fatal</span><span class="op" id="7308637">(</span><span class="ident" id="7308638">err</span><span class="op" id="7308641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308645">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308648">}</span><br>
<span class="lineno"></span><span class="op" id="7308650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7308653">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="7308699">type</span>&nbsp;<span class="ident" id="7308704">benchmarkBuf</span>&nbsp;<span class="keyword" id="7308717">struct</span>&nbsp;<span class="op" id="7308724">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308727">offset</span>&nbsp;<span class="builtintype" id="7308734">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308739">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7308746">[</span><span class="op" id="7308747">]</span><span class="builtintype" id="7308748">byte</span><br>
<span class="lineno"></span><span class="op" id="7308753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7308756">func</span>&nbsp;<span class="op" id="7308761">(</span><span class="ident" id="7308762">b</span>&nbsp;<span class="op" id="7308764">*</span><span class="ident" id="7308765">benchmarkBuf</span><span class="op" id="7308777">)</span>&nbsp;<span class="ident" id="7308779">Read</span><span class="op" id="7308783">(</span><span class="ident" id="7308784">p</span>&nbsp;<span class="op" id="7308786">[</span><span class="op" id="7308787">]</span><span class="builtintype" id="7308788">byte</span><span class="op" id="7308792">)</span>&nbsp;<span class="op" id="7308794">(</span><span class="ident" id="7308795">n</span>&nbsp;<span class="builtintype" id="7308797">int</span><span class="op" id="7308800">,</span>&nbsp;<span class="ident" id="7308802">err</span>&nbsp;<span class="builtintype" id="7308806">error</span><span class="op" id="7308811">)</span>&nbsp;<span class="op" id="7308813">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308816">n</span>&nbsp;<span class="op" id="7308818">=</span>&nbsp;<span class="builtinfunc" id="7308820">copy</span><span class="op" id="7308824">(</span><span class="ident" id="7308825">p</span><span class="op" id="7308826">,</span>&nbsp;<span class="ident" id="7308828">b</span><span class="op" id="7308829">.</span><span class="ident" id="7308830">data</span><span class="op" id="7308834">[</span><span class="ident" id="7308835">b</span><span class="op" id="7308836">.</span><span class="ident" id="7308837">offset</span><span class="op" id="7308843">:</span><span class="op" id="7308844">]</span><span class="op" id="7308845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308848">if</span>&nbsp;<span class="ident" id="7308851">n</span>&nbsp;<span class="op" id="7308853">==</span>&nbsp;<span class="num" id="7308856">0</span>&nbsp;<span class="op" id="7308858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308862">return</span>&nbsp;<span class="num" id="7308869">0</span><span class="op" id="7308870">,</span>&nbsp;<span class="ident" id="7308872">io</span><span class="op" id="7308874">.</span><span class="ident" id="7308875">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7308880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7308883">b</span><span class="op" id="7308884">.</span><span class="ident" id="7308885">offset</span>&nbsp;<span class="op" id="7308892">+=</span>&nbsp;<span class="ident" id="7308895">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308898">return</span><br>
<span class="lineno"></span><span class="op" id="7308905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7308908">func</span>&nbsp;<span class="op" id="7308913">(</span><span class="ident" id="7308914">b</span>&nbsp;<span class="op" id="7308916">*</span><span class="ident" id="7308917">benchmarkBuf</span><span class="op" id="7308929">)</span>&nbsp;<span class="ident" id="7308931">ReadByte</span><span class="op" id="7308939">(</span><span class="op" id="7308940">)</span>&nbsp;<span class="op" id="7308942">(</span><span class="ident" id="7308943">c</span>&nbsp;<span class="builtintype" id="7308945">byte</span><span class="op" id="7308949">,</span>&nbsp;<span class="ident" id="7308951">err</span>&nbsp;<span class="builtintype" id="7308955">error</span><span class="op" id="7308960">)</span>&nbsp;<span class="op" id="7308962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308965">if</span>&nbsp;<span class="ident" id="7308968">b</span><span class="op" id="7308969">.</span><span class="ident" id="7308970">offset</span>&nbsp;<span class="op" id="7308977">&gt;=</span>&nbsp;<span class="builtinfunc" id="7308980">len</span><span class="op" id="7308983">(</span><span class="ident" id="7308984">b</span><span class="op" id="7308985">.</span><span class="ident" id="7308986">data</span><span class="op" id="7308990">)</span>&nbsp;<span class="op" id="7308992">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7308996">return</span>&nbsp;<span class="num" id="7309003">0</span><span class="op" id="7309004">,</span>&nbsp;<span class="ident" id="7309006">io</span><span class="op" id="7309008">.</span><span class="ident" id="7309009">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7309014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309017">c</span>&nbsp;<span class="op" id="7309019">=</span>&nbsp;<span class="ident" id="7309021">b</span><span class="op" id="7309022">.</span><span class="ident" id="7309023">data</span><span class="op" id="7309027">[</span><span class="ident" id="7309028">b</span><span class="op" id="7309029">.</span><span class="ident" id="7309030">offset</span><span class="op" id="7309036">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309039">b</span><span class="op" id="7309040">.</span><span class="ident" id="7309041">offset</span><span class="op" id="7309047">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309051">return</span><br>
<span class="lineno">225</span><span class="op" id="7309058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7309061">func</span>&nbsp;<span class="op" id="7309066">(</span><span class="ident" id="7309067">b</span>&nbsp;<span class="op" id="7309069">*</span><span class="ident" id="7309070">benchmarkBuf</span><span class="op" id="7309082">)</span>&nbsp;<span class="ident" id="7309084">reset</span><span class="op" id="7309089">(</span><span class="op" id="7309090">)</span>&nbsp;<span class="op" id="7309092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309095">b</span><span class="op" id="7309096">.</span><span class="ident" id="7309097">offset</span>&nbsp;<span class="op" id="7309104">=</span>&nbsp;<span class="num" id="7309106">0</span><br>
<span class="lineno"></span><span class="op" id="7309108">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7309111">func</span>&nbsp;<span class="ident" id="7309116">BenchmarkDecodeComplex128Slice</span><span class="op" id="7309146">(</span><span class="ident" id="7309147">b</span>&nbsp;<span class="op" id="7309149">*</span><span class="ident" id="7309150">testing</span><span class="op" id="7309157">.</span><span class="ident" id="7309158">B</span><span class="op" id="7309159">)</span>&nbsp;<span class="op" id="7309161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309164">var</span>&nbsp;<span class="ident" id="7309168">buf</span>&nbsp;<span class="ident" id="7309172">bytes</span><span class="op" id="7309177">.</span><span class="ident" id="7309178">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309186">enc</span>&nbsp;<span class="op" id="7309190">:=</span>&nbsp;<span class="ident" id="7309193">NewEncoder</span><span class="op" id="7309203">(</span><span class="op" id="7309204">&amp;</span><span class="ident" id="7309205">buf</span><span class="op" id="7309208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309211">a</span>&nbsp;<span class="op" id="7309213">:=</span>&nbsp;<span class="builtinfunc" id="7309216">make</span><span class="op" id="7309220">(</span><span class="op" id="7309221">[</span><span class="op" id="7309222">]</span><span class="builtintype" id="7309223">complex128</span><span class="op" id="7309233">,</span>&nbsp;<span class="num" id="7309235">1000</span><span class="op" id="7309239">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309242">for</span>&nbsp;<span class="ident" id="7309246">i</span>&nbsp;<span class="op" id="7309248">:=</span>&nbsp;<span class="keyword" id="7309251">range</span>&nbsp;<span class="ident" id="7309257">a</span>&nbsp;<span class="op" id="7309259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309263">a</span><span class="op" id="7309264">[</span><span class="ident" id="7309265">i</span><span class="op" id="7309266">]</span>&nbsp;<span class="op" id="7309268">=</span>&nbsp;<span class="num" id="7309270">1.2</span>&nbsp;<span class="op" id="7309274">+</span>&nbsp;<span class="num" id="7309276">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7309282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309285">err</span>&nbsp;<span class="op" id="7309289">:=</span>&nbsp;<span class="ident" id="7309292">enc</span><span class="op" id="7309295">.</span><span class="ident" id="7309296">Encode</span><span class="op" id="7309302">(</span><span class="ident" id="7309303">a</span><span class="op" id="7309304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309307">if</span>&nbsp;<span class="ident" id="7309310">err</span>&nbsp;<span class="op" id="7309314">!=</span>&nbsp;<span class="builtintype" id="7309317">nil</span>&nbsp;<span class="op" id="7309321">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309325">b</span><span class="op" id="7309326">.</span><span class="ident" id="7309327">Fatal</span><span class="op" id="7309332">(</span><span class="ident" id="7309333">err</span><span class="op" id="7309336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7309339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309342">x</span>&nbsp;<span class="op" id="7309344">:=</span>&nbsp;<span class="builtinfunc" id="7309347">make</span><span class="op" id="7309351">(</span><span class="op" id="7309352">[</span><span class="op" id="7309353">]</span><span class="builtintype" id="7309354">complex128</span><span class="op" id="7309364">,</span>&nbsp;<span class="num" id="7309366">1000</span><span class="op" id="7309370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309373">bbuf</span>&nbsp;<span class="op" id="7309378">:=</span>&nbsp;<span class="ident" id="7309381">benchmarkBuf</span><span class="op" id="7309393">{</span><span class="ident" id="7309394">data</span><span class="op" id="7309398">:</span>&nbsp;<span class="ident" id="7309400">buf</span><span class="op" id="7309403">.</span><span class="ident" id="7309404">Bytes</span><span class="op" id="7309409">(</span><span class="op" id="7309410">)</span><span class="op" id="7309411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309414">b</span><span class="op" id="7309415">.</span><span class="ident" id="7309416">ResetTimer</span><span class="op" id="7309426">(</span><span class="op" id="7309427">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309430">for</span>&nbsp;<span class="ident" id="7309434">i</span>&nbsp;<span class="op" id="7309436">:=</span>&nbsp;<span class="num" id="7309439">0</span><span class="op" id="7309440">;</span>&nbsp;<span class="ident" id="7309442">i</span>&nbsp;<span class="op" id="7309444">&lt;</span>&nbsp;<span class="ident" id="7309446">b</span><span class="op" id="7309447">.</span><span class="ident" id="7309448">N</span><span class="op" id="7309449">;</span>&nbsp;<span class="ident" id="7309451">i</span><span class="op" id="7309452">++</span>&nbsp;<span class="op" id="7309455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309459">bbuf</span><span class="op" id="7309463">.</span><span class="ident" id="7309464">reset</span><span class="op" id="7309469">(</span><span class="op" id="7309470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309474">dec</span>&nbsp;<span class="op" id="7309478">:=</span>&nbsp;<span class="ident" id="7309481">NewDecoder</span><span class="op" id="7309491">(</span><span class="op" id="7309492">&amp;</span><span class="ident" id="7309493">bbuf</span><span class="op" id="7309497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309501">err</span>&nbsp;<span class="op" id="7309505">:=</span>&nbsp;<span class="ident" id="7309508">dec</span><span class="op" id="7309511">.</span><span class="ident" id="7309512">Decode</span><span class="op" id="7309518">(</span><span class="op" id="7309519">&amp;</span><span class="ident" id="7309520">x</span><span class="op" id="7309521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309525">if</span>&nbsp;<span class="ident" id="7309528">err</span>&nbsp;<span class="op" id="7309532">!=</span>&nbsp;<span class="builtintype" id="7309535">nil</span>&nbsp;<span class="op" id="7309539">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309544">b</span><span class="op" id="7309545">.</span><span class="ident" id="7309546">Fatal</span><span class="op" id="7309551">(</span><span class="ident" id="7309552">i</span><span class="op" id="7309553">,</span>&nbsp;<span class="ident" id="7309555">err</span><span class="op" id="7309558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7309562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7309565">}</span><br>
<span class="lineno"></span><span class="op" id="7309567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7309570">func</span>&nbsp;<span class="ident" id="7309575">BenchmarkDecodeFloat64Slice</span><span class="op" id="7309602">(</span><span class="ident" id="7309603">b</span>&nbsp;<span class="op" id="7309605">*</span><span class="ident" id="7309606">testing</span><span class="op" id="7309613">.</span><span class="ident" id="7309614">B</span><span class="op" id="7309615">)</span>&nbsp;<span class="op" id="7309617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309620">var</span>&nbsp;<span class="ident" id="7309624">buf</span>&nbsp;<span class="ident" id="7309628">bytes</span><span class="op" id="7309633">.</span><span class="ident" id="7309634">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309642">enc</span>&nbsp;<span class="op" id="7309646">:=</span>&nbsp;<span class="ident" id="7309649">NewEncoder</span><span class="op" id="7309659">(</span><span class="op" id="7309660">&amp;</span><span class="ident" id="7309661">buf</span><span class="op" id="7309664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309667">a</span>&nbsp;<span class="op" id="7309669">:=</span>&nbsp;<span class="builtinfunc" id="7309672">make</span><span class="op" id="7309676">(</span><span class="op" id="7309677">[</span><span class="op" id="7309678">]</span><span class="builtintype" id="7309679">float64</span><span class="op" id="7309686">,</span>&nbsp;<span class="num" id="7309688">1000</span><span class="op" id="7309692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309695">for</span>&nbsp;<span class="ident" id="7309699">i</span>&nbsp;<span class="op" id="7309701">:=</span>&nbsp;<span class="keyword" id="7309704">range</span>&nbsp;<span class="ident" id="7309710">a</span>&nbsp;<span class="op" id="7309712">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309716">a</span><span class="op" id="7309717">[</span><span class="ident" id="7309718">i</span><span class="op" id="7309719">]</span>&nbsp;<span class="op" id="7309721">=</span>&nbsp;<span class="num" id="7309723">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7309731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309734">err</span>&nbsp;<span class="op" id="7309738">:=</span>&nbsp;<span class="ident" id="7309741">enc</span><span class="op" id="7309744">.</span><span class="ident" id="7309745">Encode</span><span class="op" id="7309751">(</span><span class="ident" id="7309752">a</span><span class="op" id="7309753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309756">if</span>&nbsp;<span class="ident" id="7309759">err</span>&nbsp;<span class="op" id="7309763">!=</span>&nbsp;<span class="builtintype" id="7309766">nil</span>&nbsp;<span class="op" id="7309770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309774">b</span><span class="op" id="7309775">.</span><span class="ident" id="7309776">Fatal</span><span class="op" id="7309781">(</span><span class="ident" id="7309782">err</span><span class="op" id="7309785">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7309788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309791">x</span>&nbsp;<span class="op" id="7309793">:=</span>&nbsp;<span class="builtinfunc" id="7309796">make</span><span class="op" id="7309800">(</span><span class="op" id="7309801">[</span><span class="op" id="7309802">]</span><span class="builtintype" id="7309803">float64</span><span class="op" id="7309810">,</span>&nbsp;<span class="num" id="7309812">1000</span><span class="op" id="7309816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309819">bbuf</span>&nbsp;<span class="op" id="7309824">:=</span>&nbsp;<span class="ident" id="7309827">benchmarkBuf</span><span class="op" id="7309839">{</span><span class="ident" id="7309840">data</span><span class="op" id="7309844">:</span>&nbsp;<span class="ident" id="7309846">buf</span><span class="op" id="7309849">.</span><span class="ident" id="7309850">Bytes</span><span class="op" id="7309855">(</span><span class="op" id="7309856">)</span><span class="op" id="7309857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309860">b</span><span class="op" id="7309861">.</span><span class="ident" id="7309862">ResetTimer</span><span class="op" id="7309872">(</span><span class="op" id="7309873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309876">for</span>&nbsp;<span class="ident" id="7309880">i</span>&nbsp;<span class="op" id="7309882">:=</span>&nbsp;<span class="num" id="7309885">0</span><span class="op" id="7309886">;</span>&nbsp;<span class="ident" id="7309888">i</span>&nbsp;<span class="op" id="7309890">&lt;</span>&nbsp;<span class="ident" id="7309892">b</span><span class="op" id="7309893">.</span><span class="ident" id="7309894">N</span><span class="op" id="7309895">;</span>&nbsp;<span class="ident" id="7309897">i</span><span class="op" id="7309898">++</span>&nbsp;<span class="op" id="7309901">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309905">bbuf</span><span class="op" id="7309909">.</span><span class="ident" id="7309910">reset</span><span class="op" id="7309915">(</span><span class="op" id="7309916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309920">dec</span>&nbsp;<span class="op" id="7309924">:=</span>&nbsp;<span class="ident" id="7309927">NewDecoder</span><span class="op" id="7309937">(</span><span class="op" id="7309938">&amp;</span><span class="ident" id="7309939">bbuf</span><span class="op" id="7309943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309947">err</span>&nbsp;<span class="op" id="7309951">:=</span>&nbsp;<span class="ident" id="7309954">dec</span><span class="op" id="7309957">.</span><span class="ident" id="7309958">Decode</span><span class="op" id="7309964">(</span><span class="op" id="7309965">&amp;</span><span class="ident" id="7309966">x</span><span class="op" id="7309967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7309971">if</span>&nbsp;<span class="ident" id="7309974">err</span>&nbsp;<span class="op" id="7309978">!=</span>&nbsp;<span class="builtintype" id="7309981">nil</span>&nbsp;<span class="op" id="7309985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7309990">b</span><span class="op" id="7309991">.</span><span class="ident" id="7309992">Fatal</span><span class="op" id="7309997">(</span><span class="ident" id="7309998">i</span><span class="op" id="7309999">,</span>&nbsp;<span class="ident" id="7310001">err</span><span class="op" id="7310004">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7310008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7310011">}</span><br>
<span class="lineno"></span><span class="op" id="7310013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7310016">func</span>&nbsp;<span class="ident" id="7310021">BenchmarkDecodeInt32Slice</span><span class="op" id="7310046">(</span><span class="ident" id="7310047">b</span>&nbsp;<span class="op" id="7310049">*</span><span class="ident" id="7310050">testing</span><span class="op" id="7310057">.</span><span class="ident" id="7310058">B</span><span class="op" id="7310059">)</span>&nbsp;<span class="op" id="7310061">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7310064">var</span>&nbsp;<span class="ident" id="7310068">buf</span>&nbsp;<span class="ident" id="7310072">bytes</span><span class="op" id="7310077">.</span><span class="ident" id="7310078">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310086">enc</span>&nbsp;<span class="op" id="7310090">:=</span>&nbsp;<span class="ident" id="7310093">NewEncoder</span><span class="op" id="7310103">(</span><span class="op" id="7310104">&amp;</span><span class="ident" id="7310105">buf</span><span class="op" id="7310108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310111">a</span>&nbsp;<span class="op" id="7310113">:=</span>&nbsp;<span class="builtinfunc" id="7310116">make</span><span class="op" id="7310120">(</span><span class="op" id="7310121">[</span><span class="op" id="7310122">]</span><span class="builtintype" id="7310123">int32</span><span class="op" id="7310128">,</span>&nbsp;<span class="num" id="7310130">1000</span><span class="op" id="7310134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7310137">for</span>&nbsp;<span class="ident" id="7310141">i</span>&nbsp;<span class="op" id="7310143">:=</span>&nbsp;<span class="keyword" id="7310146">range</span>&nbsp;<span class="ident" id="7310152">a</span>&nbsp;<span class="op" id="7310154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310158">a</span><span class="op" id="7310159">[</span><span class="ident" id="7310160">i</span><span class="op" id="7310161">]</span>&nbsp;<span class="op" id="7310163">=</span>&nbsp;<span class="num" id="7310165">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7310171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310174">err</span>&nbsp;<span class="op" id="7310178">:=</span>&nbsp;<span class="ident" id="7310181">enc</span><span class="op" id="7310184">.</span><span class="ident" id="7310185">Encode</span><span class="op" id="7310191">(</span><span class="ident" id="7310192">a</span><span class="op" id="7310193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7310196">if</span>&nbsp;<span class="ident" id="7310199">err</span>&nbsp;<span class="op" id="7310203">!=</span>&nbsp;<span class="builtintype" id="7310206">nil</span>&nbsp;<span class="op" id="7310210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310214">b</span><span class="op" id="7310215">.</span><span class="ident" id="7310216">Fatal</span><span class="op" id="7310221">(</span><span class="ident" id="7310222">err</span><span class="op" id="7310225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7310228">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310231">x</span>&nbsp;<span class="op" id="7310233">:=</span>&nbsp;<span class="builtinfunc" id="7310236">make</span><span class="op" id="7310240">(</span><span class="op" id="7310241">[</span><span class="op" id="7310242">]</span><span class="builtintype" id="7310243">int32</span><span class="op" id="7310248">,</span>&nbsp;<span class="num" id="7310250">1000</span><span class="op" id="7310254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310257">bbuf</span>&nbsp;<span class="op" id="7310262">:=</span>&nbsp;<span class="ident" id="7310265">benchmarkBuf</span><span class="op" id="7310277">{</span><span class="ident" id="7310278">data</span><span class="op" id="7310282">:</span>&nbsp;<span class="ident" id="7310284">buf</span><span class="op" id="7310287">.</span><span class="ident" id="7310288">Bytes</span><span class="op" id="7310293">(</span><span class="op" id="7310294">)</span><span class="op" id="7310295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310298">b</span><span class="op" id="7310299">.</span><span class="ident" id="7310300">ResetTimer</span><span class="op" id="7310310">(</span><span class="op" id="7310311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7310314">for</span>&nbsp;<span class="ident" id="7310318">i</span>&nbsp;<span class="op" id="7310320">:=</span>&nbsp;<span class="num" id="7310323">0</span><span class="op" id="7310324">;</span>&nbsp;<span class="ident" id="7310326">i</span>&nbsp;<span class="op" id="7310328">&lt;</span>&nbsp;<span class="ident" id="7310330">b</span><span class="op" id="7310331">.</span><span class="ident" id="7310332">N</span><span class="op" id="7310333">;</span>&nbsp;<span class="ident" id="7310335">i</span><span class="op" id="7310336">++</span>&nbsp;<span class="op" id="7310339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310343">bbuf</span><span class="op" id="7310347">.</span><span class="ident" id="7310348">reset</span><span class="op" id="7310353">(</span><span class="op" id="7310354">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310358">dec</span>&nbsp;<span class="op" id="7310362">:=</span>&nbsp;<span class="ident" id="7310365">NewDecoder</span><span class="op" id="7310375">(</span><span class="op" id="7310376">&amp;</span><span class="ident" id="7310377">bbuf</span><span class="op" id="7310381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310385">err</span>&nbsp;<span class="op" id="7310389">:=</span>&nbsp;<span class="ident" id="7310392">dec</span><span class="op" id="7310395">.</span><span class="ident" id="7310396">Decode</span><span class="op" id="7310402">(</span><span class="op" id="7310403">&amp;</span><span class="ident" id="7310404">x</span><span class="op" id="7310405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7310409">if</span>&nbsp;<span class="ident" id="7310412">err</span>&nbsp;<span class="op" id="7310416">!=</span>&nbsp;<span class="builtintype" id="7310419">nil</span>&nbsp;<span class="op" id="7310423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310428">b</span><span class="op" id="7310429">.</span><span class="ident" id="7310430">Fatal</span><span class="op" id="7310435">(</span><span class="ident" id="7310436">i</span><span class="op" id="7310437">,</span>&nbsp;<span class="ident" id="7310439">err</span><span class="op" id="7310442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7310446">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7310449">}</span><br>
<span class="lineno"></span><span class="op" id="7310451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7310454">func</span>&nbsp;<span class="ident" id="7310459">BenchmarkDecodeStringSlice</span><span class="op" id="7310485">(</span><span class="ident" id="7310486">b</span>&nbsp;<span class="op" id="7310488">*</span><span class="ident" id="7310489">testing</span><span class="op" id="7310496">.</span><span class="ident" id="7310497">B</span><span class="op" id="7310498">)</span>&nbsp;<span class="op" id="7310500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7310503">var</span>&nbsp;<span class="ident" id="7310507">buf</span>&nbsp;<span class="ident" id="7310511">bytes</span><span class="op" id="7310516">.</span><span class="ident" id="7310517">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310525">enc</span>&nbsp;<span class="op" id="7310529">:=</span>&nbsp;<span class="ident" id="7310532">NewEncoder</span><span class="op" id="7310542">(</span><span class="op" id="7310543">&amp;</span><span class="ident" id="7310544">buf</span><span class="op" id="7310547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310550">a</span>&nbsp;<span class="op" id="7310552">:=</span>&nbsp;<span class="builtinfunc" id="7310555">make</span><span class="op" id="7310559">(</span><span class="op" id="7310560">[</span><span class="op" id="7310561">]</span><span class="builtintype" id="7310562">string</span><span class="op" id="7310568">,</span>&nbsp;<span class="num" id="7310570">1000</span><span class="op" id="7310574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7310577">for</span>&nbsp;<span class="ident" id="7310581">i</span>&nbsp;<span class="op" id="7310583">:=</span>&nbsp;<span class="keyword" id="7310586">range</span>&nbsp;<span class="ident" id="7310592">a</span>&nbsp;<span class="op" id="7310594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310598">a</span><span class="op" id="7310599">[</span><span class="ident" id="7310600">i</span><span class="op" id="7310601">]</span>&nbsp;<span class="op" id="7310603">=</span>&nbsp;<span class="string" id="7310605">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7310624">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310627">err</span>&nbsp;<span class="op" id="7310631">:=</span>&nbsp;<span class="ident" id="7310634">enc</span><span class="op" id="7310637">.</span><span class="ident" id="7310638">Encode</span><span class="op" id="7310644">(</span><span class="ident" id="7310645">a</span><span class="op" id="7310646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7310649">if</span>&nbsp;<span class="ident" id="7310652">err</span>&nbsp;<span class="op" id="7310656">!=</span>&nbsp;<span class="builtintype" id="7310659">nil</span>&nbsp;<span class="op" id="7310663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310667">b</span><span class="op" id="7310668">.</span><span class="ident" id="7310669">Fatal</span><span class="op" id="7310674">(</span><span class="ident" id="7310675">err</span><span class="op" id="7310678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7310681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310684">x</span>&nbsp;<span class="op" id="7310686">:=</span>&nbsp;<span class="builtinfunc" id="7310689">make</span><span class="op" id="7310693">(</span><span class="op" id="7310694">[</span><span class="op" id="7310695">]</span><span class="builtintype" id="7310696">string</span><span class="op" id="7310702">,</span>&nbsp;<span class="num" id="7310704">1000</span><span class="op" id="7310708">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310711">bbuf</span>&nbsp;<span class="op" id="7310716">:=</span>&nbsp;<span class="ident" id="7310719">benchmarkBuf</span><span class="op" id="7310731">{</span><span class="ident" id="7310732">data</span><span class="op" id="7310736">:</span>&nbsp;<span class="ident" id="7310738">buf</span><span class="op" id="7310741">.</span><span class="ident" id="7310742">Bytes</span><span class="op" id="7310747">(</span><span class="op" id="7310748">)</span><span class="op" id="7310749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310752">b</span><span class="op" id="7310753">.</span><span class="ident" id="7310754">ResetTimer</span><span class="op" id="7310764">(</span><span class="op" id="7310765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7310768">for</span>&nbsp;<span class="ident" id="7310772">i</span>&nbsp;<span class="op" id="7310774">:=</span>&nbsp;<span class="num" id="7310777">0</span><span class="op" id="7310778">;</span>&nbsp;<span class="ident" id="7310780">i</span>&nbsp;<span class="op" id="7310782">&lt;</span>&nbsp;<span class="ident" id="7310784">b</span><span class="op" id="7310785">.</span><span class="ident" id="7310786">N</span><span class="op" id="7310787">;</span>&nbsp;<span class="ident" id="7310789">i</span><span class="op" id="7310790">++</span>&nbsp;<span class="op" id="7310793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310797">bbuf</span><span class="op" id="7310801">.</span><span class="ident" id="7310802">reset</span><span class="op" id="7310807">(</span><span class="op" id="7310808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310812">dec</span>&nbsp;<span class="op" id="7310816">:=</span>&nbsp;<span class="ident" id="7310819">NewDecoder</span><span class="op" id="7310829">(</span><span class="op" id="7310830">&amp;</span><span class="ident" id="7310831">bbuf</span><span class="op" id="7310835">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310839">err</span>&nbsp;<span class="op" id="7310843">:=</span>&nbsp;<span class="ident" id="7310846">dec</span><span class="op" id="7310849">.</span><span class="ident" id="7310850">Decode</span><span class="op" id="7310856">(</span><span class="op" id="7310857">&amp;</span><span class="ident" id="7310858">x</span><span class="op" id="7310859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7310863">if</span>&nbsp;<span class="ident" id="7310866">err</span>&nbsp;<span class="op" id="7310870">!=</span>&nbsp;<span class="builtintype" id="7310873">nil</span>&nbsp;<span class="op" id="7310877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7310882">b</span><span class="op" id="7310883">.</span><span class="ident" id="7310884">Fatal</span><span class="op" id="7310889">(</span><span class="ident" id="7310890">i</span><span class="op" id="7310891">,</span>&nbsp;<span class="ident" id="7310893">err</span><span class="op" id="7310896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7310900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7310903">}</span><br>
<span class="lineno">325</span><span class="op" id="7310905">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
