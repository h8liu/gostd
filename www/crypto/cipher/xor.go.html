<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3723430">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3723485">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3723539">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3723590">package</span>&nbsp;<span class="ident" id="3723598">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3723606">import</span>&nbsp;<span class="op" id="3723613">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3723616">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3723627">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3723636">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3723639">const</span>&nbsp;<span class="ident" id="3723645">wordSize</span>&nbsp;<span class="op" id="3723654">=</span>&nbsp;<span class="builtintype" id="3723656">int</span><span class="op" id="3723659">(</span><span class="ident" id="3723660"><a href="/crypto/cipher/xor.go.html#3723627">unsafe</a></span><span class="op" id="3723666">.</span><span class="ident" id="3723667">Sizeof</span><span class="op" id="3723673">(</span><span class="builtintype" id="3723674">uintptr</span><span class="op" id="3723681">(</span><span class="num" id="3723682">0</span><span class="op" id="3723683">)</span><span class="op" id="3723684">)</span><span class="op" id="3723685">)</span><br>
<span class="lineno"></span><span class="keyword" id="3723687">const</span>&nbsp;<span class="ident" id="3723693">supportsUnaligned</span>&nbsp;<span class="op" id="3723711">=</span>&nbsp;<span class="ident" id="3723713"><a href="/crypto/cipher/xor.go.html#3723616">runtime</a></span><span class="op" id="3723720">.</span><span class="ident" id="3723721">GOARCH</span>&nbsp;<span class="op" id="3723728">==</span>&nbsp;<span class="string" id="3723731">&#34;386&#34;</span>&nbsp;<span class="op" id="3723737">||</span>&nbsp;<span class="ident" id="3723740"><a href="/crypto/cipher/xor.go.html#3723616">runtime</a></span><span class="op" id="3723747">.</span><span class="ident" id="3723748">GOARCH</span>&nbsp;<span class="op" id="3723755">==</span>&nbsp;<span class="string" id="3723758">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3723767">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3723833">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="3723867">func</span>&nbsp;<span class="ident" id="3723872">fastXORBytes</span><span class="op" id="3723884">(</span><span class="ident" id="3723885">dst</span><span class="op" id="3723888">,</span>&nbsp;<span class="ident" id="3723890">a</span><span class="op" id="3723891">,</span>&nbsp;<span class="ident" id="3723893">b</span>&nbsp;<span class="op" id="3723895">[</span><span class="op" id="3723896">]</span><span class="builtintype" id="3723897">byte</span><span class="op" id="3723901">)</span>&nbsp;<span class="builtintype" id="3723903">int</span>&nbsp;<span class="op" id="3723907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3723910">n</span>&nbsp;<span class="op" id="3723912">:=</span>&nbsp;<span class="builtinfunc" id="3723915">len</span><span class="op" id="3723918">(</span><span class="ident" id="3723919"><a href="/crypto/cipher/xor.go.html#3723890">a</a></span><span class="op" id="3723920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3723923">if</span>&nbsp;<span class="builtinfunc" id="3723926">len</span><span class="op" id="3723929">(</span><span class="ident" id="3723930"><a href="/crypto/cipher/xor.go.html#3723893">b</a></span><span class="op" id="3723931">)</span>&nbsp;<span class="op" id="3723933">&lt;</span>&nbsp;<span class="ident" id="3723935"><a href="/crypto/cipher/xor.go.html#3723910">n</a></span>&nbsp;<span class="op" id="3723937">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3723941"><a href="/crypto/cipher/xor.go.html#3723910">n</a></span>&nbsp;<span class="op" id="3723943">=</span>&nbsp;<span class="builtinfunc" id="3723945">len</span><span class="op" id="3723948">(</span><span class="ident" id="3723949"><a href="/crypto/cipher/xor.go.html#3723893">b</a></span><span class="op" id="3723950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3723953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3723957">w</span>&nbsp;<span class="op" id="3723959">:=</span>&nbsp;<span class="ident" id="3723962"><a href="/crypto/cipher/xor.go.html#3723910">n</a></span>&nbsp;<span class="op" id="3723964">/</span>&nbsp;<span class="ident" id="3723966"><a href="/crypto/cipher/xor.go.html#3723645">wordSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3723976">if</span>&nbsp;<span class="ident" id="3723979"><a href="/crypto/cipher/xor.go.html#3723957">w</a></span>&nbsp;<span class="op" id="3723981">&gt;</span>&nbsp;<span class="num" id="3723983">0</span>&nbsp;<span class="op" id="3723985">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3723989">dw</span>&nbsp;<span class="op" id="3723992">:=</span>&nbsp;<span class="op" id="3723995">*</span><span class="op" id="3723996">(</span><span class="op" id="3723997">*</span><span class="op" id="3723998">[</span><span class="op" id="3723999">]</span><span class="builtintype" id="3724000">uintptr</span><span class="op" id="3724007">)</span><span class="op" id="3724008">(</span><span class="ident" id="3724009"><a href="/crypto/cipher/xor.go.html#3723627">unsafe</a></span><span class="op" id="3724015">.</span><span class="ident" id="3724016">Pointer</span><span class="op" id="3724023">(</span><span class="op" id="3724024">&amp;</span><span class="ident" id="3724025"><a href="/crypto/cipher/xor.go.html#3723885">dst</a></span><span class="op" id="3724028">)</span><span class="op" id="3724029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3724033">aw</span>&nbsp;<span class="op" id="3724036">:=</span>&nbsp;<span class="op" id="3724039">*</span><span class="op" id="3724040">(</span><span class="op" id="3724041">*</span><span class="op" id="3724042">[</span><span class="op" id="3724043">]</span><span class="builtintype" id="3724044">uintptr</span><span class="op" id="3724051">)</span><span class="op" id="3724052">(</span><span class="ident" id="3724053"><a href="/crypto/cipher/xor.go.html#3723627">unsafe</a></span><span class="op" id="3724059">.</span><span class="ident" id="3724060">Pointer</span><span class="op" id="3724067">(</span><span class="op" id="3724068">&amp;</span><span class="ident" id="3724069"><a href="/crypto/cipher/xor.go.html#3723890">a</a></span><span class="op" id="3724070">)</span><span class="op" id="3724071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3724075">bw</span>&nbsp;<span class="op" id="3724078">:=</span>&nbsp;<span class="op" id="3724081">*</span><span class="op" id="3724082">(</span><span class="op" id="3724083">*</span><span class="op" id="3724084">[</span><span class="op" id="3724085">]</span><span class="builtintype" id="3724086">uintptr</span><span class="op" id="3724093">)</span><span class="op" id="3724094">(</span><span class="ident" id="3724095"><a href="/crypto/cipher/xor.go.html#3723627">unsafe</a></span><span class="op" id="3724101">.</span><span class="ident" id="3724102">Pointer</span><span class="op" id="3724109">(</span><span class="op" id="3724110">&amp;</span><span class="ident" id="3724111"><a href="/crypto/cipher/xor.go.html#3723893">b</a></span><span class="op" id="3724112">)</span><span class="op" id="3724113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3724117">for</span>&nbsp;<span class="ident" id="3724121">i</span>&nbsp;<span class="op" id="3724123">:=</span>&nbsp;<span class="num" id="3724126">0</span><span class="op" id="3724127">;</span>&nbsp;<span class="ident" id="3724129"><a href="/crypto/cipher/xor.go.html#3724121">i</a></span>&nbsp;<span class="op" id="3724131">&lt;</span>&nbsp;<span class="ident" id="3724133"><a href="/crypto/cipher/xor.go.html#3723957">w</a></span><span class="op" id="3724134">;</span>&nbsp;<span class="ident" id="3724136"><a href="/crypto/cipher/xor.go.html#3724121">i</a></span><span class="op" id="3724137">++</span>&nbsp;<span class="op" id="3724140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3724145"><a href="/crypto/cipher/xor.go.html#3723989">dw</a></span><span class="op" id="3724147">[</span><span class="ident" id="3724148"><a href="/crypto/cipher/xor.go.html#3724121">i</a></span><span class="op" id="3724149">]</span>&nbsp;<span class="op" id="3724151">=</span>&nbsp;<span class="ident" id="3724153"><a href="/crypto/cipher/xor.go.html#3724033">aw</a></span><span class="op" id="3724155">[</span><span class="ident" id="3724156"><a href="/crypto/cipher/xor.go.html#3724121">i</a></span><span class="op" id="3724157">]</span>&nbsp;<span class="op" id="3724159">^</span>&nbsp;<span class="ident" id="3724161"><a href="/crypto/cipher/xor.go.html#3724075">bw</a></span><span class="op" id="3724163">[</span><span class="ident" id="3724164"><a href="/crypto/cipher/xor.go.html#3724121">i</a></span><span class="op" id="3724165">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3724169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3724172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3724176">for</span>&nbsp;<span class="ident" id="3724180">i</span>&nbsp;<span class="op" id="3724182">:=</span>&nbsp;<span class="op" id="3724185">(</span><span class="ident" id="3724186"><a href="/crypto/cipher/xor.go.html#3723910">n</a></span>&nbsp;<span class="op" id="3724188">-</span>&nbsp;<span class="ident" id="3724190"><a href="/crypto/cipher/xor.go.html#3723910">n</a></span><span class="op" id="3724191">%</span><span class="ident" id="3724192"><a href="/crypto/cipher/xor.go.html#3723645">wordSize</a></span><span class="op" id="3724200">)</span><span class="op" id="3724201">;</span>&nbsp;<span class="ident" id="3724203"><a href="/crypto/cipher/xor.go.html#3724180">i</a></span>&nbsp;<span class="op" id="3724205">&lt;</span>&nbsp;<span class="ident" id="3724207"><a href="/crypto/cipher/xor.go.html#3723910">n</a></span><span class="op" id="3724208">;</span>&nbsp;<span class="ident" id="3724210"><a href="/crypto/cipher/xor.go.html#3724180">i</a></span><span class="op" id="3724211">++</span>&nbsp;<span class="op" id="3724214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3724218"><a href="/crypto/cipher/xor.go.html#3723885">dst</a></span><span class="op" id="3724221">[</span><span class="ident" id="3724222"><a href="/crypto/cipher/xor.go.html#3724180">i</a></span><span class="op" id="3724223">]</span>&nbsp;<span class="op" id="3724225">=</span>&nbsp;<span class="ident" id="3724227"><a href="/crypto/cipher/xor.go.html#3723890">a</a></span><span class="op" id="3724228">[</span><span class="ident" id="3724229"><a href="/crypto/cipher/xor.go.html#3724180">i</a></span><span class="op" id="3724230">]</span>&nbsp;<span class="op" id="3724232">^</span>&nbsp;<span class="ident" id="3724234"><a href="/crypto/cipher/xor.go.html#3723893">b</a></span><span class="op" id="3724235">[</span><span class="ident" id="3724236"><a href="/crypto/cipher/xor.go.html#3724180">i</a></span><span class="op" id="3724237">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3724240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3724244">return</span>&nbsp;<span class="ident" id="3724251"><a href="/crypto/cipher/xor.go.html#3723910">n</a></span><br>
<span class="lineno"></span><span class="op" id="3724253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3724256">func</span>&nbsp;<span class="ident" id="3724261">safeXORBytes</span><span class="op" id="3724273">(</span><span class="ident" id="3724274">dst</span><span class="op" id="3724277">,</span>&nbsp;<span class="ident" id="3724279">a</span><span class="op" id="3724280">,</span>&nbsp;<span class="ident" id="3724282">b</span>&nbsp;<span class="op" id="3724284">[</span><span class="op" id="3724285">]</span><span class="builtintype" id="3724286">byte</span><span class="op" id="3724290">)</span>&nbsp;<span class="builtintype" id="3724292">int</span>&nbsp;<span class="op" id="3724296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3724299">n</span>&nbsp;<span class="op" id="3724301">:=</span>&nbsp;<span class="builtinfunc" id="3724304">len</span><span class="op" id="3724307">(</span><span class="ident" id="3724308"><a href="/crypto/cipher/xor.go.html#3724279">a</a></span><span class="op" id="3724309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3724312">if</span>&nbsp;<span class="builtinfunc" id="3724315">len</span><span class="op" id="3724318">(</span><span class="ident" id="3724319"><a href="/crypto/cipher/xor.go.html#3724282">b</a></span><span class="op" id="3724320">)</span>&nbsp;<span class="op" id="3724322">&lt;</span>&nbsp;<span class="ident" id="3724324"><a href="/crypto/cipher/xor.go.html#3724299">n</a></span>&nbsp;<span class="op" id="3724326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3724330"><a href="/crypto/cipher/xor.go.html#3724299">n</a></span>&nbsp;<span class="op" id="3724332">=</span>&nbsp;<span class="builtinfunc" id="3724334">len</span><span class="op" id="3724337">(</span><span class="ident" id="3724338"><a href="/crypto/cipher/xor.go.html#3724282">b</a></span><span class="op" id="3724339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3724342">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3724345">for</span>&nbsp;<span class="ident" id="3724349">i</span>&nbsp;<span class="op" id="3724351">:=</span>&nbsp;<span class="num" id="3724354">0</span><span class="op" id="3724355">;</span>&nbsp;<span class="ident" id="3724357"><a href="/crypto/cipher/xor.go.html#3724349">i</a></span>&nbsp;<span class="op" id="3724359">&lt;</span>&nbsp;<span class="ident" id="3724361"><a href="/crypto/cipher/xor.go.html#3724299">n</a></span><span class="op" id="3724362">;</span>&nbsp;<span class="ident" id="3724364"><a href="/crypto/cipher/xor.go.html#3724349">i</a></span><span class="op" id="3724365">++</span>&nbsp;<span class="op" id="3724368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3724372"><a href="/crypto/cipher/xor.go.html#3724274">dst</a></span><span class="op" id="3724375">[</span><span class="ident" id="3724376"><a href="/crypto/cipher/xor.go.html#3724349">i</a></span><span class="op" id="3724377">]</span>&nbsp;<span class="op" id="3724379">=</span>&nbsp;<span class="ident" id="3724381"><a href="/crypto/cipher/xor.go.html#3724279">a</a></span><span class="op" id="3724382">[</span><span class="ident" id="3724383"><a href="/crypto/cipher/xor.go.html#3724349">i</a></span><span class="op" id="3724384">]</span>&nbsp;<span class="op" id="3724386">^</span>&nbsp;<span class="ident" id="3724388"><a href="/crypto/cipher/xor.go.html#3724282">b</a></span><span class="op" id="3724389">[</span><span class="ident" id="3724390"><a href="/crypto/cipher/xor.go.html#3724349">i</a></span><span class="op" id="3724391">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3724394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3724397">return</span>&nbsp;<span class="ident" id="3724404"><a href="/crypto/cipher/xor.go.html#3724299">n</a></span><br>
<span class="lineno"></span><span class="op" id="3724406">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3724409">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3724490">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="3724535">func</span>&nbsp;<span class="ident" id="3724540">xorBytes</span><span class="op" id="3724548">(</span><span class="ident" id="3724549">dst</span><span class="op" id="3724552">,</span>&nbsp;<span class="ident" id="3724554">a</span><span class="op" id="3724555">,</span>&nbsp;<span class="ident" id="3724557">b</span>&nbsp;<span class="op" id="3724559">[</span><span class="op" id="3724560">]</span><span class="builtintype" id="3724561">byte</span><span class="op" id="3724565">)</span>&nbsp;<span class="builtintype" id="3724567">int</span>&nbsp;<span class="op" id="3724571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3724574">if</span>&nbsp;<span class="ident" id="3724577"><a href="/crypto/cipher/xor.go.html#3723693">supportsUnaligned</a></span>&nbsp;<span class="op" id="3724595">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3724599">return</span>&nbsp;<span class="ident" id="3724606"><a href="/crypto/cipher/xor.go.html#3723872">fastXORBytes</a></span><span class="op" id="3724618">(</span><span class="ident" id="3724619"><a href="/crypto/cipher/xor.go.html#3724549">dst</a></span><span class="op" id="3724622">,</span>&nbsp;<span class="ident" id="3724624"><a href="/crypto/cipher/xor.go.html#3724554">a</a></span><span class="op" id="3724625">,</span>&nbsp;<span class="ident" id="3724627"><a href="/crypto/cipher/xor.go.html#3724557">b</a></span><span class="op" id="3724628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3724631">}</span>&nbsp;<span class="keyword" id="3724633">else</span>&nbsp;<span class="op" id="3724638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3724642">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3724698">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3724752">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3724807">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3724852">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3724870">return</span>&nbsp;<span class="ident" id="3724877"><a href="/crypto/cipher/xor.go.html#3724261">safeXORBytes</a></span><span class="op" id="3724889">(</span><span class="ident" id="3724890"><a href="/crypto/cipher/xor.go.html#3724549">dst</a></span><span class="op" id="3724893">,</span>&nbsp;<span class="ident" id="3724895"><a href="/crypto/cipher/xor.go.html#3724554">a</a></span><span class="op" id="3724896">,</span>&nbsp;<span class="ident" id="3724898"><a href="/crypto/cipher/xor.go.html#3724557">b</a></span><span class="op" id="3724899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3724902">}</span><br>
<span class="lineno"></span><span class="op" id="3724904">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3724907">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="3724983">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="3725035">func</span>&nbsp;<span class="ident" id="3725040">fastXORWords</span><span class="op" id="3725052">(</span><span class="ident" id="3725053">dst</span><span class="op" id="3725056">,</span>&nbsp;<span class="ident" id="3725058">a</span><span class="op" id="3725059">,</span>&nbsp;<span class="ident" id="3725061">b</span>&nbsp;<span class="op" id="3725063">[</span><span class="op" id="3725064">]</span><span class="builtintype" id="3725065">byte</span><span class="op" id="3725069">)</span>&nbsp;<span class="op" id="3725071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3725074">dw</span>&nbsp;<span class="op" id="3725077">:=</span>&nbsp;<span class="op" id="3725080">*</span><span class="op" id="3725081">(</span><span class="op" id="3725082">*</span><span class="op" id="3725083">[</span><span class="op" id="3725084">]</span><span class="builtintype" id="3725085">uintptr</span><span class="op" id="3725092">)</span><span class="op" id="3725093">(</span><span class="ident" id="3725094"><a href="/crypto/cipher/xor.go.html#3723627">unsafe</a></span><span class="op" id="3725100">.</span><span class="ident" id="3725101">Pointer</span><span class="op" id="3725108">(</span><span class="op" id="3725109">&amp;</span><span class="ident" id="3725110"><a href="/crypto/cipher/xor.go.html#3725053">dst</a></span><span class="op" id="3725113">)</span><span class="op" id="3725114">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3725117">aw</span>&nbsp;<span class="op" id="3725120">:=</span>&nbsp;<span class="op" id="3725123">*</span><span class="op" id="3725124">(</span><span class="op" id="3725125">*</span><span class="op" id="3725126">[</span><span class="op" id="3725127">]</span><span class="builtintype" id="3725128">uintptr</span><span class="op" id="3725135">)</span><span class="op" id="3725136">(</span><span class="ident" id="3725137"><a href="/crypto/cipher/xor.go.html#3723627">unsafe</a></span><span class="op" id="3725143">.</span><span class="ident" id="3725144">Pointer</span><span class="op" id="3725151">(</span><span class="op" id="3725152">&amp;</span><span class="ident" id="3725153"><a href="/crypto/cipher/xor.go.html#3725058">a</a></span><span class="op" id="3725154">)</span><span class="op" id="3725155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3725158">bw</span>&nbsp;<span class="op" id="3725161">:=</span>&nbsp;<span class="op" id="3725164">*</span><span class="op" id="3725165">(</span><span class="op" id="3725166">*</span><span class="op" id="3725167">[</span><span class="op" id="3725168">]</span><span class="builtintype" id="3725169">uintptr</span><span class="op" id="3725176">)</span><span class="op" id="3725177">(</span><span class="ident" id="3725178"><a href="/crypto/cipher/xor.go.html#3723627">unsafe</a></span><span class="op" id="3725184">.</span><span class="ident" id="3725185">Pointer</span><span class="op" id="3725192">(</span><span class="op" id="3725193">&amp;</span><span class="ident" id="3725194"><a href="/crypto/cipher/xor.go.html#3725061">b</a></span><span class="op" id="3725195">)</span><span class="op" id="3725196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3725199">n</span>&nbsp;<span class="op" id="3725201">:=</span>&nbsp;<span class="builtinfunc" id="3725204">len</span><span class="op" id="3725207">(</span><span class="ident" id="3725208"><a href="/crypto/cipher/xor.go.html#3725061">b</a></span><span class="op" id="3725209">)</span>&nbsp;<span class="op" id="3725211">/</span>&nbsp;<span class="ident" id="3725213"><a href="/crypto/cipher/xor.go.html#3723645">wordSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3725223">for</span>&nbsp;<span class="ident" id="3725227">i</span>&nbsp;<span class="op" id="3725229">:=</span>&nbsp;<span class="num" id="3725232">0</span><span class="op" id="3725233">;</span>&nbsp;<span class="ident" id="3725235"><a href="/crypto/cipher/xor.go.html#3725227">i</a></span>&nbsp;<span class="op" id="3725237">&lt;</span>&nbsp;<span class="ident" id="3725239"><a href="/crypto/cipher/xor.go.html#3725199">n</a></span><span class="op" id="3725240">;</span>&nbsp;<span class="ident" id="3725242"><a href="/crypto/cipher/xor.go.html#3725227">i</a></span><span class="op" id="3725243">++</span>&nbsp;<span class="op" id="3725246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3725250"><a href="/crypto/cipher/xor.go.html#3725074">dw</a></span><span class="op" id="3725252">[</span><span class="ident" id="3725253"><a href="/crypto/cipher/xor.go.html#3725227">i</a></span><span class="op" id="3725254">]</span>&nbsp;<span class="op" id="3725256">=</span>&nbsp;<span class="ident" id="3725258"><a href="/crypto/cipher/xor.go.html#3725117">aw</a></span><span class="op" id="3725260">[</span><span class="ident" id="3725261"><a href="/crypto/cipher/xor.go.html#3725227">i</a></span><span class="op" id="3725262">]</span>&nbsp;<span class="op" id="3725264">^</span>&nbsp;<span class="ident" id="3725266"><a href="/crypto/cipher/xor.go.html#3725158">bw</a></span><span class="op" id="3725268">[</span><span class="ident" id="3725269"><a href="/crypto/cipher/xor.go.html#3725227">i</a></span><span class="op" id="3725270">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3725273">}</span><br>
<span class="lineno"></span><span class="op" id="3725275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3725278">func</span>&nbsp;<span class="ident" id="3725283">xorWords</span><span class="op" id="3725291">(</span><span class="ident" id="3725292">dst</span><span class="op" id="3725295">,</span>&nbsp;<span class="ident" id="3725297">a</span><span class="op" id="3725298">,</span>&nbsp;<span class="ident" id="3725300">b</span>&nbsp;<span class="op" id="3725302">[</span><span class="op" id="3725303">]</span><span class="builtintype" id="3725304">byte</span><span class="op" id="3725308">)</span>&nbsp;<span class="op" id="3725310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3725313">if</span>&nbsp;<span class="ident" id="3725316"><a href="/crypto/cipher/xor.go.html#3723693">supportsUnaligned</a></span>&nbsp;<span class="op" id="3725334">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3725338"><a href="/crypto/cipher/xor.go.html#3725040">fastXORWords</a></span><span class="op" id="3725350">(</span><span class="ident" id="3725351"><a href="/crypto/cipher/xor.go.html#3725292">dst</a></span><span class="op" id="3725354">,</span>&nbsp;<span class="ident" id="3725356"><a href="/crypto/cipher/xor.go.html#3725297">a</a></span><span class="op" id="3725357">,</span>&nbsp;<span class="ident" id="3725359"><a href="/crypto/cipher/xor.go.html#3725300">b</a></span><span class="op" id="3725360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3725363">}</span>&nbsp;<span class="keyword" id="3725365">else</span>&nbsp;<span class="op" id="3725370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3725374"><a href="/crypto/cipher/xor.go.html#3724261">safeXORBytes</a></span><span class="op" id="3725386">(</span><span class="ident" id="3725387"><a href="/crypto/cipher/xor.go.html#3725292">dst</a></span><span class="op" id="3725390">,</span>&nbsp;<span class="ident" id="3725392"><a href="/crypto/cipher/xor.go.html#3725297">a</a></span><span class="op" id="3725393">,</span>&nbsp;<span class="ident" id="3725395"><a href="/crypto/cipher/xor.go.html#3725300">b</a></span><span class="op" id="3725396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3725399">}</span><br>
<span class="lineno"></span><span class="op" id="3725401">}</span>
</div>
</body>
</html>
