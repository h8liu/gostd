<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html" class="current">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4905797">//&nbsp;Created&nbsp;by&nbsp;encgen&nbsp;--output&nbsp;enc_helpers.go;&nbsp;DO&nbsp;NOT&nbsp;EDIT</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4905856">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4905911">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno">5</span><span class="comment" id="4905965">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4906016">package</span>&nbsp;<span class="ident" id="4906024">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4906029">import</span>&nbsp;<span class="op" id="4906036">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4906039">&#34;reflect&#34;</span><br>
<span class="lineno"></span><span class="op" id="4906049">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4906052">var</span>&nbsp;<span class="ident" id="4906056">encArrayHelper</span>&nbsp;<span class="op" id="4906071">=</span>&nbsp;<span class="keyword" id="4906073">map</span><span class="op" id="4906076">[</span><span class="ident" id="4906077">reflect</span><span class="op" id="4906084">.</span><span class="ident" id="4906085">Kind</span><span class="op" id="4906089">]</span><span class="ident" id="4906090">encHelper</span><span class="op" id="4906099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906102">reflect</span><span class="op" id="4906109">.</span><span class="ident" id="4906110">Bool</span><span class="op" id="4906114">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906122">encBoolArray</span><span class="op" id="4906134">,</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906137">reflect</span><span class="op" id="4906144">.</span><span class="ident" id="4906145">Complex64</span><span class="op" id="4906154">:</span>&nbsp;&nbsp;<span class="ident" id="4906157">encComplex64Array</span><span class="op" id="4906174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906177">reflect</span><span class="op" id="4906184">.</span><span class="ident" id="4906185">Complex128</span><span class="op" id="4906195">:</span>&nbsp;<span class="ident" id="4906197">encComplex128Array</span><span class="op" id="4906215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906218">reflect</span><span class="op" id="4906225">.</span><span class="ident" id="4906226">Float32</span><span class="op" id="4906233">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906238">encFloat32Array</span><span class="op" id="4906253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906256">reflect</span><span class="op" id="4906263">.</span><span class="ident" id="4906264">Float64</span><span class="op" id="4906271">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906276">encFloat64Array</span><span class="op" id="4906291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906294">reflect</span><span class="op" id="4906301">.</span><span class="ident" id="4906302">Int</span><span class="op" id="4906305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906314">encIntArray</span><span class="op" id="4906325">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906328">reflect</span><span class="op" id="4906335">.</span><span class="ident" id="4906336">Int16</span><span class="op" id="4906341">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906348">encInt16Array</span><span class="op" id="4906361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906364">reflect</span><span class="op" id="4906371">.</span><span class="ident" id="4906372">Int32</span><span class="op" id="4906377">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906384">encInt32Array</span><span class="op" id="4906397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906400">reflect</span><span class="op" id="4906407">.</span><span class="ident" id="4906408">Int64</span><span class="op" id="4906413">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906420">encInt64Array</span><span class="op" id="4906433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906436">reflect</span><span class="op" id="4906443">.</span><span class="ident" id="4906444">Int8</span><span class="op" id="4906448">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906456">encInt8Array</span><span class="op" id="4906468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906471">reflect</span><span class="op" id="4906478">.</span><span class="ident" id="4906479">String</span><span class="op" id="4906485">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906491">encStringArray</span><span class="op" id="4906505">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906508">reflect</span><span class="op" id="4906515">.</span><span class="ident" id="4906516">Uint</span><span class="op" id="4906520">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906528">encUintArray</span><span class="op" id="4906540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906543">reflect</span><span class="op" id="4906550">.</span><span class="ident" id="4906551">Uint16</span><span class="op" id="4906557">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906563">encUint16Array</span><span class="op" id="4906577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906580">reflect</span><span class="op" id="4906587">.</span><span class="ident" id="4906588">Uint32</span><span class="op" id="4906594">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906600">encUint32Array</span><span class="op" id="4906614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906617">reflect</span><span class="op" id="4906624">.</span><span class="ident" id="4906625">Uint64</span><span class="op" id="4906631">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906637">encUint64Array</span><span class="op" id="4906651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906654">reflect</span><span class="op" id="4906661">.</span><span class="ident" id="4906662">Uintptr</span><span class="op" id="4906669">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906674">encUintptrArray</span><span class="op" id="4906689">,</span><br>
<span class="lineno">30</span><span class="op" id="4906691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4906694">var</span>&nbsp;<span class="ident" id="4906698">encSliceHelper</span>&nbsp;<span class="op" id="4906713">=</span>&nbsp;<span class="keyword" id="4906715">map</span><span class="op" id="4906718">[</span><span class="ident" id="4906719">reflect</span><span class="op" id="4906726">.</span><span class="ident" id="4906727">Kind</span><span class="op" id="4906731">]</span><span class="ident" id="4906732">encHelper</span><span class="op" id="4906741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906744">reflect</span><span class="op" id="4906751">.</span><span class="ident" id="4906752">Bool</span><span class="op" id="4906756">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906764">encBoolSlice</span><span class="op" id="4906776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906779">reflect</span><span class="op" id="4906786">.</span><span class="ident" id="4906787">Complex64</span><span class="op" id="4906796">:</span>&nbsp;&nbsp;<span class="ident" id="4906799">encComplex64Slice</span><span class="op" id="4906816">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906819">reflect</span><span class="op" id="4906826">.</span><span class="ident" id="4906827">Complex128</span><span class="op" id="4906837">:</span>&nbsp;<span class="ident" id="4906839">encComplex128Slice</span><span class="op" id="4906857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906860">reflect</span><span class="op" id="4906867">.</span><span class="ident" id="4906868">Float32</span><span class="op" id="4906875">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906880">encFloat32Slice</span><span class="op" id="4906895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906898">reflect</span><span class="op" id="4906905">.</span><span class="ident" id="4906906">Float64</span><span class="op" id="4906913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906918">encFloat64Slice</span><span class="op" id="4906933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906936">reflect</span><span class="op" id="4906943">.</span><span class="ident" id="4906944">Int</span><span class="op" id="4906947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906956">encIntSlice</span><span class="op" id="4906967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4906970">reflect</span><span class="op" id="4906977">.</span><span class="ident" id="4906978">Int16</span><span class="op" id="4906983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4906990">encInt16Slice</span><span class="op" id="4907003">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907006">reflect</span><span class="op" id="4907013">.</span><span class="ident" id="4907014">Int32</span><span class="op" id="4907019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4907026">encInt32Slice</span><span class="op" id="4907039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907042">reflect</span><span class="op" id="4907049">.</span><span class="ident" id="4907050">Int64</span><span class="op" id="4907055">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4907062">encInt64Slice</span><span class="op" id="4907075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907078">reflect</span><span class="op" id="4907085">.</span><span class="ident" id="4907086">Int8</span><span class="op" id="4907090">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4907098">encInt8Slice</span><span class="op" id="4907110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907113">reflect</span><span class="op" id="4907120">.</span><span class="ident" id="4907121">String</span><span class="op" id="4907127">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4907133">encStringSlice</span><span class="op" id="4907147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907150">reflect</span><span class="op" id="4907157">.</span><span class="ident" id="4907158">Uint</span><span class="op" id="4907162">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4907170">encUintSlice</span><span class="op" id="4907182">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907185">reflect</span><span class="op" id="4907192">.</span><span class="ident" id="4907193">Uint16</span><span class="op" id="4907199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4907205">encUint16Slice</span><span class="op" id="4907219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907222">reflect</span><span class="op" id="4907229">.</span><span class="ident" id="4907230">Uint32</span><span class="op" id="4907236">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4907242">encUint32Slice</span><span class="op" id="4907256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907259">reflect</span><span class="op" id="4907266">.</span><span class="ident" id="4907267">Uint64</span><span class="op" id="4907273">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4907279">encUint64Slice</span><span class="op" id="4907293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907296">reflect</span><span class="op" id="4907303">.</span><span class="ident" id="4907304">Uintptr</span><span class="op" id="4907311">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4907316">encUintptrSlice</span><span class="op" id="4907331">,</span><br>
<span class="lineno"></span><span class="op" id="4907333">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4907336">func</span>&nbsp;<span class="ident" id="4907341">encBoolArray</span><span class="op" id="4907353">(</span><span class="ident" id="4907354">state</span>&nbsp;<span class="op" id="4907360">*</span><span class="ident" id="4907361">encoderState</span><span class="op" id="4907373">,</span>&nbsp;<span class="ident" id="4907375">v</span>&nbsp;<span class="ident" id="4907377">reflect</span><span class="op" id="4907384">.</span><span class="ident" id="4907385">Value</span><span class="op" id="4907390">)</span>&nbsp;<span class="builtintype" id="4907392">bool</span>&nbsp;<span class="op" id="4907397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4907400">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4907441">if</span>&nbsp;<span class="op" id="4907444">!</span><span class="ident" id="4907445">v</span><span class="op" id="4907446">.</span><span class="ident" id="4907447">CanAddr</span><span class="op" id="4907454">(</span><span class="op" id="4907455">)</span>&nbsp;<span class="op" id="4907457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4907461">return</span>&nbsp;<span class="builtintype" id="4907468">false</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4907475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4907478">return</span>&nbsp;<span class="ident" id="4907485">encBoolSlice</span><span class="op" id="4907497">(</span><span class="ident" id="4907498">state</span><span class="op" id="4907503">,</span>&nbsp;<span class="ident" id="4907505">v</span><span class="op" id="4907506">.</span><span class="ident" id="4907507">Slice</span><span class="op" id="4907512">(</span><span class="num" id="4907513">0</span><span class="op" id="4907514">,</span>&nbsp;<span class="ident" id="4907516">v</span><span class="op" id="4907517">.</span><span class="ident" id="4907518">Len</span><span class="op" id="4907521">(</span><span class="op" id="4907522">)</span><span class="op" id="4907523">)</span><span class="op" id="4907524">)</span><br>
<span class="lineno"></span><span class="op" id="4907526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4907529">func</span>&nbsp;<span class="ident" id="4907534">encBoolSlice</span><span class="op" id="4907546">(</span><span class="ident" id="4907547">state</span>&nbsp;<span class="op" id="4907553">*</span><span class="ident" id="4907554">encoderState</span><span class="op" id="4907566">,</span>&nbsp;<span class="ident" id="4907568">v</span>&nbsp;<span class="ident" id="4907570">reflect</span><span class="op" id="4907577">.</span><span class="ident" id="4907578">Value</span><span class="op" id="4907583">)</span>&nbsp;<span class="builtintype" id="4907585">bool</span>&nbsp;<span class="op" id="4907590">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907593">slice</span><span class="op" id="4907598">,</span>&nbsp;<span class="ident" id="4907600">ok</span>&nbsp;<span class="op" id="4907603">:=</span>&nbsp;<span class="ident" id="4907606">v</span><span class="op" id="4907607">.</span><span class="ident" id="4907608">Interface</span><span class="op" id="4907617">(</span><span class="op" id="4907618">)</span><span class="op" id="4907619">.</span><span class="op" id="4907620">(</span><span class="op" id="4907621">[</span><span class="op" id="4907622">]</span><span class="builtintype" id="4907623">bool</span><span class="op" id="4907627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4907630">if</span>&nbsp;<span class="op" id="4907633">!</span><span class="ident" id="4907634">ok</span>&nbsp;<span class="op" id="4907637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4907641">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;bool&nbsp;but&nbsp;not&nbsp;type&nbsp;bool.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4907716">return</span>&nbsp;<span class="builtintype" id="4907723">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4907730">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4907733">for</span>&nbsp;<span class="ident" id="4907737">_</span><span class="op" id="4907738">,</span>&nbsp;<span class="ident" id="4907740">x</span>&nbsp;<span class="op" id="4907742">:=</span>&nbsp;<span class="keyword" id="4907745">range</span>&nbsp;<span class="ident" id="4907751">slice</span>&nbsp;<span class="op" id="4907757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4907761">if</span>&nbsp;<span class="ident" id="4907764">x</span>&nbsp;<span class="op" id="4907766">!=</span>&nbsp;<span class="builtintype" id="4907769">false</span>&nbsp;<span class="op" id="4907775">||</span>&nbsp;<span class="ident" id="4907778">state</span><span class="op" id="4907783">.</span><span class="ident" id="4907784">sendZero</span>&nbsp;<span class="op" id="4907793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4907798">if</span>&nbsp;<span class="ident" id="4907801">x</span>&nbsp;<span class="op" id="4907803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907809">state</span><span class="op" id="4907814">.</span><span class="ident" id="4907815">encodeUint</span><span class="op" id="4907825">(</span><span class="num" id="4907826">1</span><span class="op" id="4907827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4907832">}</span>&nbsp;<span class="keyword" id="4907834">else</span>&nbsp;<span class="op" id="4907839">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4907845">state</span><span class="op" id="4907850">.</span><span class="ident" id="4907851">encodeUint</span><span class="op" id="4907861">(</span><span class="num" id="4907862">0</span><span class="op" id="4907863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4907868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4907872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4907875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4907878">return</span>&nbsp;<span class="builtintype" id="4907885">true</span><br>
<span class="lineno">75</span><span class="op" id="4907890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4907893">func</span>&nbsp;<span class="ident" id="4907898">encComplex64Array</span><span class="op" id="4907915">(</span><span class="ident" id="4907916">state</span>&nbsp;<span class="op" id="4907922">*</span><span class="ident" id="4907923">encoderState</span><span class="op" id="4907935">,</span>&nbsp;<span class="ident" id="4907937">v</span>&nbsp;<span class="ident" id="4907939">reflect</span><span class="op" id="4907946">.</span><span class="ident" id="4907947">Value</span><span class="op" id="4907952">)</span>&nbsp;<span class="builtintype" id="4907954">bool</span>&nbsp;<span class="op" id="4907959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4907962">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908003">if</span>&nbsp;<span class="op" id="4908006">!</span><span class="ident" id="4908007">v</span><span class="op" id="4908008">.</span><span class="ident" id="4908009">CanAddr</span><span class="op" id="4908016">(</span><span class="op" id="4908017">)</span>&nbsp;<span class="op" id="4908019">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908023">return</span>&nbsp;<span class="builtintype" id="4908030">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4908037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908040">return</span>&nbsp;<span class="ident" id="4908047">encComplex64Slice</span><span class="op" id="4908064">(</span><span class="ident" id="4908065">state</span><span class="op" id="4908070">,</span>&nbsp;<span class="ident" id="4908072">v</span><span class="op" id="4908073">.</span><span class="ident" id="4908074">Slice</span><span class="op" id="4908079">(</span><span class="num" id="4908080">0</span><span class="op" id="4908081">,</span>&nbsp;<span class="ident" id="4908083">v</span><span class="op" id="4908084">.</span><span class="ident" id="4908085">Len</span><span class="op" id="4908088">(</span><span class="op" id="4908089">)</span><span class="op" id="4908090">)</span><span class="op" id="4908091">)</span><br>
<span class="lineno"></span><span class="op" id="4908093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="4908096">func</span>&nbsp;<span class="ident" id="4908101">encComplex64Slice</span><span class="op" id="4908118">(</span><span class="ident" id="4908119">state</span>&nbsp;<span class="op" id="4908125">*</span><span class="ident" id="4908126">encoderState</span><span class="op" id="4908138">,</span>&nbsp;<span class="ident" id="4908140">v</span>&nbsp;<span class="ident" id="4908142">reflect</span><span class="op" id="4908149">.</span><span class="ident" id="4908150">Value</span><span class="op" id="4908155">)</span>&nbsp;<span class="builtintype" id="4908157">bool</span>&nbsp;<span class="op" id="4908162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4908165">slice</span><span class="op" id="4908170">,</span>&nbsp;<span class="ident" id="4908172">ok</span>&nbsp;<span class="op" id="4908175">:=</span>&nbsp;<span class="ident" id="4908178">v</span><span class="op" id="4908179">.</span><span class="ident" id="4908180">Interface</span><span class="op" id="4908189">(</span><span class="op" id="4908190">)</span><span class="op" id="4908191">.</span><span class="op" id="4908192">(</span><span class="op" id="4908193">[</span><span class="op" id="4908194">]</span><span class="builtintype" id="4908195">complex64</span><span class="op" id="4908204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908207">if</span>&nbsp;<span class="op" id="4908210">!</span><span class="ident" id="4908211">ok</span>&nbsp;<span class="op" id="4908214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4908218">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;complex64&nbsp;but&nbsp;not&nbsp;type&nbsp;complex64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908303">return</span>&nbsp;<span class="builtintype" id="4908310">false</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4908317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908320">for</span>&nbsp;<span class="ident" id="4908324">_</span><span class="op" id="4908325">,</span>&nbsp;<span class="ident" id="4908327">x</span>&nbsp;<span class="op" id="4908329">:=</span>&nbsp;<span class="keyword" id="4908332">range</span>&nbsp;<span class="ident" id="4908338">slice</span>&nbsp;<span class="op" id="4908344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908348">if</span>&nbsp;<span class="ident" id="4908351">x</span>&nbsp;<span class="op" id="4908353">!=</span>&nbsp;<span class="num" id="4908356">0</span><span class="op" id="4908357">+</span><span class="num" id="4908358">0i</span>&nbsp;<span class="op" id="4908361">||</span>&nbsp;<span class="ident" id="4908364">state</span><span class="op" id="4908369">.</span><span class="ident" id="4908370">sendZero</span>&nbsp;<span class="op" id="4908379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4908384">rpart</span>&nbsp;<span class="op" id="4908390">:=</span>&nbsp;<span class="ident" id="4908393">floatBits</span><span class="op" id="4908402">(</span><span class="builtintype" id="4908403">float64</span><span class="op" id="4908410">(</span><span class="builtinfunc" id="4908411">real</span><span class="op" id="4908415">(</span><span class="ident" id="4908416">x</span><span class="op" id="4908417">)</span><span class="op" id="4908418">)</span><span class="op" id="4908419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4908424">ipart</span>&nbsp;<span class="op" id="4908430">:=</span>&nbsp;<span class="ident" id="4908433">floatBits</span><span class="op" id="4908442">(</span><span class="builtintype" id="4908443">float64</span><span class="op" id="4908450">(</span><span class="builtinfunc" id="4908451">imag</span><span class="op" id="4908455">(</span><span class="ident" id="4908456">x</span><span class="op" id="4908457">)</span><span class="op" id="4908458">)</span><span class="op" id="4908459">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4908464">state</span><span class="op" id="4908469">.</span><span class="ident" id="4908470">encodeUint</span><span class="op" id="4908480">(</span><span class="ident" id="4908481">rpart</span><span class="op" id="4908486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4908491">state</span><span class="op" id="4908496">.</span><span class="ident" id="4908497">encodeUint</span><span class="op" id="4908507">(</span><span class="ident" id="4908508">ipart</span><span class="op" id="4908513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4908517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4908520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908523">return</span>&nbsp;<span class="builtintype" id="4908530">true</span><br>
<span class="lineno">100</span><span class="op" id="4908535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4908538">func</span>&nbsp;<span class="ident" id="4908543">encComplex128Array</span><span class="op" id="4908561">(</span><span class="ident" id="4908562">state</span>&nbsp;<span class="op" id="4908568">*</span><span class="ident" id="4908569">encoderState</span><span class="op" id="4908581">,</span>&nbsp;<span class="ident" id="4908583">v</span>&nbsp;<span class="ident" id="4908585">reflect</span><span class="op" id="4908592">.</span><span class="ident" id="4908593">Value</span><span class="op" id="4908598">)</span>&nbsp;<span class="builtintype" id="4908600">bool</span>&nbsp;<span class="op" id="4908605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4908608">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908649">if</span>&nbsp;<span class="op" id="4908652">!</span><span class="ident" id="4908653">v</span><span class="op" id="4908654">.</span><span class="ident" id="4908655">CanAddr</span><span class="op" id="4908662">(</span><span class="op" id="4908663">)</span>&nbsp;<span class="op" id="4908665">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908669">return</span>&nbsp;<span class="builtintype" id="4908676">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4908683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908686">return</span>&nbsp;<span class="ident" id="4908693">encComplex128Slice</span><span class="op" id="4908711">(</span><span class="ident" id="4908712">state</span><span class="op" id="4908717">,</span>&nbsp;<span class="ident" id="4908719">v</span><span class="op" id="4908720">.</span><span class="ident" id="4908721">Slice</span><span class="op" id="4908726">(</span><span class="num" id="4908727">0</span><span class="op" id="4908728">,</span>&nbsp;<span class="ident" id="4908730">v</span><span class="op" id="4908731">.</span><span class="ident" id="4908732">Len</span><span class="op" id="4908735">(</span><span class="op" id="4908736">)</span><span class="op" id="4908737">)</span><span class="op" id="4908738">)</span><br>
<span class="lineno"></span><span class="op" id="4908740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="4908743">func</span>&nbsp;<span class="ident" id="4908748">encComplex128Slice</span><span class="op" id="4908766">(</span><span class="ident" id="4908767">state</span>&nbsp;<span class="op" id="4908773">*</span><span class="ident" id="4908774">encoderState</span><span class="op" id="4908786">,</span>&nbsp;<span class="ident" id="4908788">v</span>&nbsp;<span class="ident" id="4908790">reflect</span><span class="op" id="4908797">.</span><span class="ident" id="4908798">Value</span><span class="op" id="4908803">)</span>&nbsp;<span class="builtintype" id="4908805">bool</span>&nbsp;<span class="op" id="4908810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4908813">slice</span><span class="op" id="4908818">,</span>&nbsp;<span class="ident" id="4908820">ok</span>&nbsp;<span class="op" id="4908823">:=</span>&nbsp;<span class="ident" id="4908826">v</span><span class="op" id="4908827">.</span><span class="ident" id="4908828">Interface</span><span class="op" id="4908837">(</span><span class="op" id="4908838">)</span><span class="op" id="4908839">.</span><span class="op" id="4908840">(</span><span class="op" id="4908841">[</span><span class="op" id="4908842">]</span><span class="builtintype" id="4908843">complex128</span><span class="op" id="4908853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908856">if</span>&nbsp;<span class="op" id="4908859">!</span><span class="ident" id="4908860">ok</span>&nbsp;<span class="op" id="4908863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4908867">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;complex128&nbsp;but&nbsp;not&nbsp;type&nbsp;complex128.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908954">return</span>&nbsp;<span class="builtintype" id="4908961">false</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4908968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908971">for</span>&nbsp;<span class="ident" id="4908975">_</span><span class="op" id="4908976">,</span>&nbsp;<span class="ident" id="4908978">x</span>&nbsp;<span class="op" id="4908980">:=</span>&nbsp;<span class="keyword" id="4908983">range</span>&nbsp;<span class="ident" id="4908989">slice</span>&nbsp;<span class="op" id="4908995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4908999">if</span>&nbsp;<span class="ident" id="4909002">x</span>&nbsp;<span class="op" id="4909004">!=</span>&nbsp;<span class="num" id="4909007">0</span><span class="op" id="4909008">+</span><span class="num" id="4909009">0i</span>&nbsp;<span class="op" id="4909012">||</span>&nbsp;<span class="ident" id="4909015">state</span><span class="op" id="4909020">.</span><span class="ident" id="4909021">sendZero</span>&nbsp;<span class="op" id="4909030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4909035">rpart</span>&nbsp;<span class="op" id="4909041">:=</span>&nbsp;<span class="ident" id="4909044">floatBits</span><span class="op" id="4909053">(</span><span class="builtinfunc" id="4909054">real</span><span class="op" id="4909058">(</span><span class="ident" id="4909059">x</span><span class="op" id="4909060">)</span><span class="op" id="4909061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4909066">ipart</span>&nbsp;<span class="op" id="4909072">:=</span>&nbsp;<span class="ident" id="4909075">floatBits</span><span class="op" id="4909084">(</span><span class="builtinfunc" id="4909085">imag</span><span class="op" id="4909089">(</span><span class="ident" id="4909090">x</span><span class="op" id="4909091">)</span><span class="op" id="4909092">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4909097">state</span><span class="op" id="4909102">.</span><span class="ident" id="4909103">encodeUint</span><span class="op" id="4909113">(</span><span class="ident" id="4909114">rpart</span><span class="op" id="4909119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4909124">state</span><span class="op" id="4909129">.</span><span class="ident" id="4909130">encodeUint</span><span class="op" id="4909140">(</span><span class="ident" id="4909141">ipart</span><span class="op" id="4909146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4909150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4909153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909156">return</span>&nbsp;<span class="builtintype" id="4909163">true</span><br>
<span class="lineno">125</span><span class="op" id="4909168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4909171">func</span>&nbsp;<span class="ident" id="4909176">encFloat32Array</span><span class="op" id="4909191">(</span><span class="ident" id="4909192">state</span>&nbsp;<span class="op" id="4909198">*</span><span class="ident" id="4909199">encoderState</span><span class="op" id="4909211">,</span>&nbsp;<span class="ident" id="4909213">v</span>&nbsp;<span class="ident" id="4909215">reflect</span><span class="op" id="4909222">.</span><span class="ident" id="4909223">Value</span><span class="op" id="4909228">)</span>&nbsp;<span class="builtintype" id="4909230">bool</span>&nbsp;<span class="op" id="4909235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4909238">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909279">if</span>&nbsp;<span class="op" id="4909282">!</span><span class="ident" id="4909283">v</span><span class="op" id="4909284">.</span><span class="ident" id="4909285">CanAddr</span><span class="op" id="4909292">(</span><span class="op" id="4909293">)</span>&nbsp;<span class="op" id="4909295">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909299">return</span>&nbsp;<span class="builtintype" id="4909306">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4909313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909316">return</span>&nbsp;<span class="ident" id="4909323">encFloat32Slice</span><span class="op" id="4909338">(</span><span class="ident" id="4909339">state</span><span class="op" id="4909344">,</span>&nbsp;<span class="ident" id="4909346">v</span><span class="op" id="4909347">.</span><span class="ident" id="4909348">Slice</span><span class="op" id="4909353">(</span><span class="num" id="4909354">0</span><span class="op" id="4909355">,</span>&nbsp;<span class="ident" id="4909357">v</span><span class="op" id="4909358">.</span><span class="ident" id="4909359">Len</span><span class="op" id="4909362">(</span><span class="op" id="4909363">)</span><span class="op" id="4909364">)</span><span class="op" id="4909365">)</span><br>
<span class="lineno"></span><span class="op" id="4909367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="4909370">func</span>&nbsp;<span class="ident" id="4909375">encFloat32Slice</span><span class="op" id="4909390">(</span><span class="ident" id="4909391">state</span>&nbsp;<span class="op" id="4909397">*</span><span class="ident" id="4909398">encoderState</span><span class="op" id="4909410">,</span>&nbsp;<span class="ident" id="4909412">v</span>&nbsp;<span class="ident" id="4909414">reflect</span><span class="op" id="4909421">.</span><span class="ident" id="4909422">Value</span><span class="op" id="4909427">)</span>&nbsp;<span class="builtintype" id="4909429">bool</span>&nbsp;<span class="op" id="4909434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4909437">slice</span><span class="op" id="4909442">,</span>&nbsp;<span class="ident" id="4909444">ok</span>&nbsp;<span class="op" id="4909447">:=</span>&nbsp;<span class="ident" id="4909450">v</span><span class="op" id="4909451">.</span><span class="ident" id="4909452">Interface</span><span class="op" id="4909461">(</span><span class="op" id="4909462">)</span><span class="op" id="4909463">.</span><span class="op" id="4909464">(</span><span class="op" id="4909465">[</span><span class="op" id="4909466">]</span><span class="builtintype" id="4909467">float32</span><span class="op" id="4909474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909477">if</span>&nbsp;<span class="op" id="4909480">!</span><span class="ident" id="4909481">ok</span>&nbsp;<span class="op" id="4909484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4909488">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;float32&nbsp;but&nbsp;not&nbsp;type&nbsp;float32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909569">return</span>&nbsp;<span class="builtintype" id="4909576">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4909583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909586">for</span>&nbsp;<span class="ident" id="4909590">_</span><span class="op" id="4909591">,</span>&nbsp;<span class="ident" id="4909593">x</span>&nbsp;<span class="op" id="4909595">:=</span>&nbsp;<span class="keyword" id="4909598">range</span>&nbsp;<span class="ident" id="4909604">slice</span>&nbsp;<span class="op" id="4909610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909614">if</span>&nbsp;<span class="ident" id="4909617">x</span>&nbsp;<span class="op" id="4909619">!=</span>&nbsp;<span class="num" id="4909622">0</span>&nbsp;<span class="op" id="4909624">||</span>&nbsp;<span class="ident" id="4909627">state</span><span class="op" id="4909632">.</span><span class="ident" id="4909633">sendZero</span>&nbsp;<span class="op" id="4909642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4909647">bits</span>&nbsp;<span class="op" id="4909652">:=</span>&nbsp;<span class="ident" id="4909655">floatBits</span><span class="op" id="4909664">(</span><span class="builtintype" id="4909665">float64</span><span class="op" id="4909672">(</span><span class="ident" id="4909673">x</span><span class="op" id="4909674">)</span><span class="op" id="4909675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4909680">state</span><span class="op" id="4909685">.</span><span class="ident" id="4909686">encodeUint</span><span class="op" id="4909696">(</span><span class="ident" id="4909697">bits</span><span class="op" id="4909701">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4909705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4909708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909711">return</span>&nbsp;<span class="builtintype" id="4909718">true</span><br>
<span class="lineno"></span><span class="op" id="4909723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="4909726">func</span>&nbsp;<span class="ident" id="4909731">encFloat64Array</span><span class="op" id="4909746">(</span><span class="ident" id="4909747">state</span>&nbsp;<span class="op" id="4909753">*</span><span class="ident" id="4909754">encoderState</span><span class="op" id="4909766">,</span>&nbsp;<span class="ident" id="4909768">v</span>&nbsp;<span class="ident" id="4909770">reflect</span><span class="op" id="4909777">.</span><span class="ident" id="4909778">Value</span><span class="op" id="4909783">)</span>&nbsp;<span class="builtintype" id="4909785">bool</span>&nbsp;<span class="op" id="4909790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4909793">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909834">if</span>&nbsp;<span class="op" id="4909837">!</span><span class="ident" id="4909838">v</span><span class="op" id="4909839">.</span><span class="ident" id="4909840">CanAddr</span><span class="op" id="4909847">(</span><span class="op" id="4909848">)</span>&nbsp;<span class="op" id="4909850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909854">return</span>&nbsp;<span class="builtintype" id="4909861">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4909868">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4909871">return</span>&nbsp;<span class="ident" id="4909878">encFloat64Slice</span><span class="op" id="4909893">(</span><span class="ident" id="4909894">state</span><span class="op" id="4909899">,</span>&nbsp;<span class="ident" id="4909901">v</span><span class="op" id="4909902">.</span><span class="ident" id="4909903">Slice</span><span class="op" id="4909908">(</span><span class="num" id="4909909">0</span><span class="op" id="4909910">,</span>&nbsp;<span class="ident" id="4909912">v</span><span class="op" id="4909913">.</span><span class="ident" id="4909914">Len</span><span class="op" id="4909917">(</span><span class="op" id="4909918">)</span><span class="op" id="4909919">)</span><span class="op" id="4909920">)</span><br>
<span class="lineno"></span><span class="op" id="4909922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4909925">func</span>&nbsp;<span class="ident" id="4909930">encFloat64Slice</span><span class="op" id="4909945">(</span><span class="ident" id="4909946">state</span>&nbsp;<span class="op" id="4909952">*</span><span class="ident" id="4909953">encoderState</span><span class="op" id="4909965">,</span>&nbsp;<span class="ident" id="4909967">v</span>&nbsp;<span class="ident" id="4909969">reflect</span><span class="op" id="4909976">.</span><span class="ident" id="4909977">Value</span><span class="op" id="4909982">)</span>&nbsp;<span class="builtintype" id="4909984">bool</span>&nbsp;<span class="op" id="4909989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4909992">slice</span><span class="op" id="4909997">,</span>&nbsp;<span class="ident" id="4909999">ok</span>&nbsp;<span class="op" id="4910002">:=</span>&nbsp;<span class="ident" id="4910005">v</span><span class="op" id="4910006">.</span><span class="ident" id="4910007">Interface</span><span class="op" id="4910016">(</span><span class="op" id="4910017">)</span><span class="op" id="4910018">.</span><span class="op" id="4910019">(</span><span class="op" id="4910020">[</span><span class="op" id="4910021">]</span><span class="builtintype" id="4910022">float64</span><span class="op" id="4910029">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910032">if</span>&nbsp;<span class="op" id="4910035">!</span><span class="ident" id="4910036">ok</span>&nbsp;<span class="op" id="4910039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4910043">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;float64&nbsp;but&nbsp;not&nbsp;type&nbsp;float64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910124">return</span>&nbsp;<span class="builtintype" id="4910131">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4910138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910141">for</span>&nbsp;<span class="ident" id="4910145">_</span><span class="op" id="4910146">,</span>&nbsp;<span class="ident" id="4910148">x</span>&nbsp;<span class="op" id="4910150">:=</span>&nbsp;<span class="keyword" id="4910153">range</span>&nbsp;<span class="ident" id="4910159">slice</span>&nbsp;<span class="op" id="4910165">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910169">if</span>&nbsp;<span class="ident" id="4910172">x</span>&nbsp;<span class="op" id="4910174">!=</span>&nbsp;<span class="num" id="4910177">0</span>&nbsp;<span class="op" id="4910179">||</span>&nbsp;<span class="ident" id="4910182">state</span><span class="op" id="4910187">.</span><span class="ident" id="4910188">sendZero</span>&nbsp;<span class="op" id="4910197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4910202">bits</span>&nbsp;<span class="op" id="4910207">:=</span>&nbsp;<span class="ident" id="4910210">floatBits</span><span class="op" id="4910219">(</span><span class="ident" id="4910220">x</span><span class="op" id="4910221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4910226">state</span><span class="op" id="4910231">.</span><span class="ident" id="4910232">encodeUint</span><span class="op" id="4910242">(</span><span class="ident" id="4910243">bits</span><span class="op" id="4910247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4910251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4910254">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910257">return</span>&nbsp;<span class="builtintype" id="4910264">true</span><br>
<span class="lineno"></span><span class="op" id="4910269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4910272">func</span>&nbsp;<span class="ident" id="4910277">encIntArray</span><span class="op" id="4910288">(</span><span class="ident" id="4910289">state</span>&nbsp;<span class="op" id="4910295">*</span><span class="ident" id="4910296">encoderState</span><span class="op" id="4910308">,</span>&nbsp;<span class="ident" id="4910310">v</span>&nbsp;<span class="ident" id="4910312">reflect</span><span class="op" id="4910319">.</span><span class="ident" id="4910320">Value</span><span class="op" id="4910325">)</span>&nbsp;<span class="builtintype" id="4910327">bool</span>&nbsp;<span class="op" id="4910332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4910335">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910376">if</span>&nbsp;<span class="op" id="4910379">!</span><span class="ident" id="4910380">v</span><span class="op" id="4910381">.</span><span class="ident" id="4910382">CanAddr</span><span class="op" id="4910389">(</span><span class="op" id="4910390">)</span>&nbsp;<span class="op" id="4910392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910396">return</span>&nbsp;<span class="builtintype" id="4910403">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4910410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910413">return</span>&nbsp;<span class="ident" id="4910420">encIntSlice</span><span class="op" id="4910431">(</span><span class="ident" id="4910432">state</span><span class="op" id="4910437">,</span>&nbsp;<span class="ident" id="4910439">v</span><span class="op" id="4910440">.</span><span class="ident" id="4910441">Slice</span><span class="op" id="4910446">(</span><span class="num" id="4910447">0</span><span class="op" id="4910448">,</span>&nbsp;<span class="ident" id="4910450">v</span><span class="op" id="4910451">.</span><span class="ident" id="4910452">Len</span><span class="op" id="4910455">(</span><span class="op" id="4910456">)</span><span class="op" id="4910457">)</span><span class="op" id="4910458">)</span><br>
<span class="lineno"></span><span class="op" id="4910460">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="4910463">func</span>&nbsp;<span class="ident" id="4910468">encIntSlice</span><span class="op" id="4910479">(</span><span class="ident" id="4910480">state</span>&nbsp;<span class="op" id="4910486">*</span><span class="ident" id="4910487">encoderState</span><span class="op" id="4910499">,</span>&nbsp;<span class="ident" id="4910501">v</span>&nbsp;<span class="ident" id="4910503">reflect</span><span class="op" id="4910510">.</span><span class="ident" id="4910511">Value</span><span class="op" id="4910516">)</span>&nbsp;<span class="builtintype" id="4910518">bool</span>&nbsp;<span class="op" id="4910523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4910526">slice</span><span class="op" id="4910531">,</span>&nbsp;<span class="ident" id="4910533">ok</span>&nbsp;<span class="op" id="4910536">:=</span>&nbsp;<span class="ident" id="4910539">v</span><span class="op" id="4910540">.</span><span class="ident" id="4910541">Interface</span><span class="op" id="4910550">(</span><span class="op" id="4910551">)</span><span class="op" id="4910552">.</span><span class="op" id="4910553">(</span><span class="op" id="4910554">[</span><span class="op" id="4910555">]</span><span class="builtintype" id="4910556">int</span><span class="op" id="4910559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910562">if</span>&nbsp;<span class="op" id="4910565">!</span><span class="ident" id="4910566">ok</span>&nbsp;<span class="op" id="4910569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4910573">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int&nbsp;but&nbsp;not&nbsp;type&nbsp;int.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910646">return</span>&nbsp;<span class="builtintype" id="4910653">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4910660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910663">for</span>&nbsp;<span class="ident" id="4910667">_</span><span class="op" id="4910668">,</span>&nbsp;<span class="ident" id="4910670">x</span>&nbsp;<span class="op" id="4910672">:=</span>&nbsp;<span class="keyword" id="4910675">range</span>&nbsp;<span class="ident" id="4910681">slice</span>&nbsp;<span class="op" id="4910687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910691">if</span>&nbsp;<span class="ident" id="4910694">x</span>&nbsp;<span class="op" id="4910696">!=</span>&nbsp;<span class="num" id="4910699">0</span>&nbsp;<span class="op" id="4910701">||</span>&nbsp;<span class="ident" id="4910704">state</span><span class="op" id="4910709">.</span><span class="ident" id="4910710">sendZero</span>&nbsp;<span class="op" id="4910719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4910724">state</span><span class="op" id="4910729">.</span><span class="ident" id="4910730">encodeInt</span><span class="op" id="4910739">(</span><span class="ident" id="4910740">int64</span><span class="op" id="4910745">(</span><span class="ident" id="4910746">x</span><span class="op" id="4910747">)</span><span class="op" id="4910748">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4910752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4910755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910758">return</span>&nbsp;<span class="builtintype" id="4910765">true</span><br>
<span class="lineno"></span><span class="op" id="4910770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="4910773">func</span>&nbsp;<span class="ident" id="4910778">encInt16Array</span><span class="op" id="4910791">(</span><span class="ident" id="4910792">state</span>&nbsp;<span class="op" id="4910798">*</span><span class="ident" id="4910799">encoderState</span><span class="op" id="4910811">,</span>&nbsp;<span class="ident" id="4910813">v</span>&nbsp;<span class="ident" id="4910815">reflect</span><span class="op" id="4910822">.</span><span class="ident" id="4910823">Value</span><span class="op" id="4910828">)</span>&nbsp;<span class="builtintype" id="4910830">bool</span>&nbsp;<span class="op" id="4910835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4910838">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910879">if</span>&nbsp;<span class="op" id="4910882">!</span><span class="ident" id="4910883">v</span><span class="op" id="4910884">.</span><span class="ident" id="4910885">CanAddr</span><span class="op" id="4910892">(</span><span class="op" id="4910893">)</span>&nbsp;<span class="op" id="4910895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910899">return</span>&nbsp;<span class="builtintype" id="4910906">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4910913">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4910916">return</span>&nbsp;<span class="ident" id="4910923">encInt16Slice</span><span class="op" id="4910936">(</span><span class="ident" id="4910937">state</span><span class="op" id="4910942">,</span>&nbsp;<span class="ident" id="4910944">v</span><span class="op" id="4910945">.</span><span class="ident" id="4910946">Slice</span><span class="op" id="4910951">(</span><span class="num" id="4910952">0</span><span class="op" id="4910953">,</span>&nbsp;<span class="ident" id="4910955">v</span><span class="op" id="4910956">.</span><span class="ident" id="4910957">Len</span><span class="op" id="4910960">(</span><span class="op" id="4910961">)</span><span class="op" id="4910962">)</span><span class="op" id="4910963">)</span><br>
<span class="lineno"></span><span class="op" id="4910965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4910968">func</span>&nbsp;<span class="ident" id="4910973">encInt16Slice</span><span class="op" id="4910986">(</span><span class="ident" id="4910987">state</span>&nbsp;<span class="op" id="4910993">*</span><span class="ident" id="4910994">encoderState</span><span class="op" id="4911006">,</span>&nbsp;<span class="ident" id="4911008">v</span>&nbsp;<span class="ident" id="4911010">reflect</span><span class="op" id="4911017">.</span><span class="ident" id="4911018">Value</span><span class="op" id="4911023">)</span>&nbsp;<span class="builtintype" id="4911025">bool</span>&nbsp;<span class="op" id="4911030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4911033">slice</span><span class="op" id="4911038">,</span>&nbsp;<span class="ident" id="4911040">ok</span>&nbsp;<span class="op" id="4911043">:=</span>&nbsp;<span class="ident" id="4911046">v</span><span class="op" id="4911047">.</span><span class="ident" id="4911048">Interface</span><span class="op" id="4911057">(</span><span class="op" id="4911058">)</span><span class="op" id="4911059">.</span><span class="op" id="4911060">(</span><span class="op" id="4911061">[</span><span class="op" id="4911062">]</span><span class="builtintype" id="4911063">int16</span><span class="op" id="4911068">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911071">if</span>&nbsp;<span class="op" id="4911074">!</span><span class="ident" id="4911075">ok</span>&nbsp;<span class="op" id="4911078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4911082">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int16&nbsp;but&nbsp;not&nbsp;type&nbsp;int16.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911159">return</span>&nbsp;<span class="builtintype" id="4911166">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4911173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911176">for</span>&nbsp;<span class="ident" id="4911180">_</span><span class="op" id="4911181">,</span>&nbsp;<span class="ident" id="4911183">x</span>&nbsp;<span class="op" id="4911185">:=</span>&nbsp;<span class="keyword" id="4911188">range</span>&nbsp;<span class="ident" id="4911194">slice</span>&nbsp;<span class="op" id="4911200">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911204">if</span>&nbsp;<span class="ident" id="4911207">x</span>&nbsp;<span class="op" id="4911209">!=</span>&nbsp;<span class="num" id="4911212">0</span>&nbsp;<span class="op" id="4911214">||</span>&nbsp;<span class="ident" id="4911217">state</span><span class="op" id="4911222">.</span><span class="ident" id="4911223">sendZero</span>&nbsp;<span class="op" id="4911232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4911237">state</span><span class="op" id="4911242">.</span><span class="ident" id="4911243">encodeInt</span><span class="op" id="4911252">(</span><span class="ident" id="4911253">int64</span><span class="op" id="4911258">(</span><span class="ident" id="4911259">x</span><span class="op" id="4911260">)</span><span class="op" id="4911261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4911265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4911268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911271">return</span>&nbsp;<span class="builtintype" id="4911278">true</span><br>
<span class="lineno">215</span><span class="op" id="4911283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4911286">func</span>&nbsp;<span class="ident" id="4911291">encInt32Array</span><span class="op" id="4911304">(</span><span class="ident" id="4911305">state</span>&nbsp;<span class="op" id="4911311">*</span><span class="ident" id="4911312">encoderState</span><span class="op" id="4911324">,</span>&nbsp;<span class="ident" id="4911326">v</span>&nbsp;<span class="ident" id="4911328">reflect</span><span class="op" id="4911335">.</span><span class="ident" id="4911336">Value</span><span class="op" id="4911341">)</span>&nbsp;<span class="builtintype" id="4911343">bool</span>&nbsp;<span class="op" id="4911348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4911351">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911392">if</span>&nbsp;<span class="op" id="4911395">!</span><span class="ident" id="4911396">v</span><span class="op" id="4911397">.</span><span class="ident" id="4911398">CanAddr</span><span class="op" id="4911405">(</span><span class="op" id="4911406">)</span>&nbsp;<span class="op" id="4911408">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911412">return</span>&nbsp;<span class="builtintype" id="4911419">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4911426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911429">return</span>&nbsp;<span class="ident" id="4911436">encInt32Slice</span><span class="op" id="4911449">(</span><span class="ident" id="4911450">state</span><span class="op" id="4911455">,</span>&nbsp;<span class="ident" id="4911457">v</span><span class="op" id="4911458">.</span><span class="ident" id="4911459">Slice</span><span class="op" id="4911464">(</span><span class="num" id="4911465">0</span><span class="op" id="4911466">,</span>&nbsp;<span class="ident" id="4911468">v</span><span class="op" id="4911469">.</span><span class="ident" id="4911470">Len</span><span class="op" id="4911473">(</span><span class="op" id="4911474">)</span><span class="op" id="4911475">)</span><span class="op" id="4911476">)</span><br>
<span class="lineno"></span><span class="op" id="4911478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="4911481">func</span>&nbsp;<span class="ident" id="4911486">encInt32Slice</span><span class="op" id="4911499">(</span><span class="ident" id="4911500">state</span>&nbsp;<span class="op" id="4911506">*</span><span class="ident" id="4911507">encoderState</span><span class="op" id="4911519">,</span>&nbsp;<span class="ident" id="4911521">v</span>&nbsp;<span class="ident" id="4911523">reflect</span><span class="op" id="4911530">.</span><span class="ident" id="4911531">Value</span><span class="op" id="4911536">)</span>&nbsp;<span class="builtintype" id="4911538">bool</span>&nbsp;<span class="op" id="4911543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4911546">slice</span><span class="op" id="4911551">,</span>&nbsp;<span class="ident" id="4911553">ok</span>&nbsp;<span class="op" id="4911556">:=</span>&nbsp;<span class="ident" id="4911559">v</span><span class="op" id="4911560">.</span><span class="ident" id="4911561">Interface</span><span class="op" id="4911570">(</span><span class="op" id="4911571">)</span><span class="op" id="4911572">.</span><span class="op" id="4911573">(</span><span class="op" id="4911574">[</span><span class="op" id="4911575">]</span><span class="builtintype" id="4911576">int32</span><span class="op" id="4911581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911584">if</span>&nbsp;<span class="op" id="4911587">!</span><span class="ident" id="4911588">ok</span>&nbsp;<span class="op" id="4911591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4911595">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int32&nbsp;but&nbsp;not&nbsp;type&nbsp;int32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911672">return</span>&nbsp;<span class="builtintype" id="4911679">false</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4911686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911689">for</span>&nbsp;<span class="ident" id="4911693">_</span><span class="op" id="4911694">,</span>&nbsp;<span class="ident" id="4911696">x</span>&nbsp;<span class="op" id="4911698">:=</span>&nbsp;<span class="keyword" id="4911701">range</span>&nbsp;<span class="ident" id="4911707">slice</span>&nbsp;<span class="op" id="4911713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911717">if</span>&nbsp;<span class="ident" id="4911720">x</span>&nbsp;<span class="op" id="4911722">!=</span>&nbsp;<span class="num" id="4911725">0</span>&nbsp;<span class="op" id="4911727">||</span>&nbsp;<span class="ident" id="4911730">state</span><span class="op" id="4911735">.</span><span class="ident" id="4911736">sendZero</span>&nbsp;<span class="op" id="4911745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4911750">state</span><span class="op" id="4911755">.</span><span class="ident" id="4911756">encodeInt</span><span class="op" id="4911765">(</span><span class="ident" id="4911766">int64</span><span class="op" id="4911771">(</span><span class="ident" id="4911772">x</span><span class="op" id="4911773">)</span><span class="op" id="4911774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4911778">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4911781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911784">return</span>&nbsp;<span class="builtintype" id="4911791">true</span><br>
<span class="lineno"></span><span class="op" id="4911796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4911799">func</span>&nbsp;<span class="ident" id="4911804">encInt64Array</span><span class="op" id="4911817">(</span><span class="ident" id="4911818">state</span>&nbsp;<span class="op" id="4911824">*</span><span class="ident" id="4911825">encoderState</span><span class="op" id="4911837">,</span>&nbsp;<span class="ident" id="4911839">v</span>&nbsp;<span class="ident" id="4911841">reflect</span><span class="op" id="4911848">.</span><span class="ident" id="4911849">Value</span><span class="op" id="4911854">)</span>&nbsp;<span class="builtintype" id="4911856">bool</span>&nbsp;<span class="op" id="4911861">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4911864">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911905">if</span>&nbsp;<span class="op" id="4911908">!</span><span class="ident" id="4911909">v</span><span class="op" id="4911910">.</span><span class="ident" id="4911911">CanAddr</span><span class="op" id="4911918">(</span><span class="op" id="4911919">)</span>&nbsp;<span class="op" id="4911921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911925">return</span>&nbsp;<span class="builtintype" id="4911932">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4911939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4911942">return</span>&nbsp;<span class="ident" id="4911949">encInt64Slice</span><span class="op" id="4911962">(</span><span class="ident" id="4911963">state</span><span class="op" id="4911968">,</span>&nbsp;<span class="ident" id="4911970">v</span><span class="op" id="4911971">.</span><span class="ident" id="4911972">Slice</span><span class="op" id="4911977">(</span><span class="num" id="4911978">0</span><span class="op" id="4911979">,</span>&nbsp;<span class="ident" id="4911981">v</span><span class="op" id="4911982">.</span><span class="ident" id="4911983">Len</span><span class="op" id="4911986">(</span><span class="op" id="4911987">)</span><span class="op" id="4911988">)</span><span class="op" id="4911989">)</span><br>
<span class="lineno">245</span><span class="op" id="4911991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4911994">func</span>&nbsp;<span class="ident" id="4911999">encInt64Slice</span><span class="op" id="4912012">(</span><span class="ident" id="4912013">state</span>&nbsp;<span class="op" id="4912019">*</span><span class="ident" id="4912020">encoderState</span><span class="op" id="4912032">,</span>&nbsp;<span class="ident" id="4912034">v</span>&nbsp;<span class="ident" id="4912036">reflect</span><span class="op" id="4912043">.</span><span class="ident" id="4912044">Value</span><span class="op" id="4912049">)</span>&nbsp;<span class="builtintype" id="4912051">bool</span>&nbsp;<span class="op" id="4912056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4912059">slice</span><span class="op" id="4912064">,</span>&nbsp;<span class="ident" id="4912066">ok</span>&nbsp;<span class="op" id="4912069">:=</span>&nbsp;<span class="ident" id="4912072">v</span><span class="op" id="4912073">.</span><span class="ident" id="4912074">Interface</span><span class="op" id="4912083">(</span><span class="op" id="4912084">)</span><span class="op" id="4912085">.</span><span class="op" id="4912086">(</span><span class="op" id="4912087">[</span><span class="op" id="4912088">]</span><span class="ident" id="4912089">int64</span><span class="op" id="4912094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912097">if</span>&nbsp;<span class="op" id="4912100">!</span><span class="ident" id="4912101">ok</span>&nbsp;<span class="op" id="4912104">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4912108">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int64&nbsp;but&nbsp;not&nbsp;type&nbsp;int64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912185">return</span>&nbsp;<span class="builtintype" id="4912192">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4912199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912202">for</span>&nbsp;<span class="ident" id="4912206">_</span><span class="op" id="4912207">,</span>&nbsp;<span class="ident" id="4912209">x</span>&nbsp;<span class="op" id="4912211">:=</span>&nbsp;<span class="keyword" id="4912214">range</span>&nbsp;<span class="ident" id="4912220">slice</span>&nbsp;<span class="op" id="4912226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912230">if</span>&nbsp;<span class="ident" id="4912233">x</span>&nbsp;<span class="op" id="4912235">!=</span>&nbsp;<span class="num" id="4912238">0</span>&nbsp;<span class="op" id="4912240">||</span>&nbsp;<span class="ident" id="4912243">state</span><span class="op" id="4912248">.</span><span class="ident" id="4912249">sendZero</span>&nbsp;<span class="op" id="4912258">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4912263">state</span><span class="op" id="4912268">.</span><span class="ident" id="4912269">encodeInt</span><span class="op" id="4912278">(</span><span class="ident" id="4912279">x</span><span class="op" id="4912280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4912284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4912287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912290">return</span>&nbsp;<span class="builtintype" id="4912297">true</span><br>
<span class="lineno"></span><span class="op" id="4912302">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4912305">func</span>&nbsp;<span class="ident" id="4912310">encInt8Array</span><span class="op" id="4912322">(</span><span class="ident" id="4912323">state</span>&nbsp;<span class="op" id="4912329">*</span><span class="ident" id="4912330">encoderState</span><span class="op" id="4912342">,</span>&nbsp;<span class="ident" id="4912344">v</span>&nbsp;<span class="ident" id="4912346">reflect</span><span class="op" id="4912353">.</span><span class="ident" id="4912354">Value</span><span class="op" id="4912359">)</span>&nbsp;<span class="builtintype" id="4912361">bool</span>&nbsp;<span class="op" id="4912366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4912369">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912410">if</span>&nbsp;<span class="op" id="4912413">!</span><span class="ident" id="4912414">v</span><span class="op" id="4912415">.</span><span class="ident" id="4912416">CanAddr</span><span class="op" id="4912423">(</span><span class="op" id="4912424">)</span>&nbsp;<span class="op" id="4912426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912430">return</span>&nbsp;<span class="builtintype" id="4912437">false</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4912444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912447">return</span>&nbsp;<span class="ident" id="4912454">encInt8Slice</span><span class="op" id="4912466">(</span><span class="ident" id="4912467">state</span><span class="op" id="4912472">,</span>&nbsp;<span class="ident" id="4912474">v</span><span class="op" id="4912475">.</span><span class="ident" id="4912476">Slice</span><span class="op" id="4912481">(</span><span class="num" id="4912482">0</span><span class="op" id="4912483">,</span>&nbsp;<span class="ident" id="4912485">v</span><span class="op" id="4912486">.</span><span class="ident" id="4912487">Len</span><span class="op" id="4912490">(</span><span class="op" id="4912491">)</span><span class="op" id="4912492">)</span><span class="op" id="4912493">)</span><br>
<span class="lineno"></span><span class="op" id="4912495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4912498">func</span>&nbsp;<span class="ident" id="4912503">encInt8Slice</span><span class="op" id="4912515">(</span><span class="ident" id="4912516">state</span>&nbsp;<span class="op" id="4912522">*</span><span class="ident" id="4912523">encoderState</span><span class="op" id="4912535">,</span>&nbsp;<span class="ident" id="4912537">v</span>&nbsp;<span class="ident" id="4912539">reflect</span><span class="op" id="4912546">.</span><span class="ident" id="4912547">Value</span><span class="op" id="4912552">)</span>&nbsp;<span class="builtintype" id="4912554">bool</span>&nbsp;<span class="op" id="4912559">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4912562">slice</span><span class="op" id="4912567">,</span>&nbsp;<span class="ident" id="4912569">ok</span>&nbsp;<span class="op" id="4912572">:=</span>&nbsp;<span class="ident" id="4912575">v</span><span class="op" id="4912576">.</span><span class="ident" id="4912577">Interface</span><span class="op" id="4912586">(</span><span class="op" id="4912587">)</span><span class="op" id="4912588">.</span><span class="op" id="4912589">(</span><span class="op" id="4912590">[</span><span class="op" id="4912591">]</span><span class="builtintype" id="4912592">int8</span><span class="op" id="4912596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912599">if</span>&nbsp;<span class="op" id="4912602">!</span><span class="ident" id="4912603">ok</span>&nbsp;<span class="op" id="4912606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4912610">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int8&nbsp;but&nbsp;not&nbsp;type&nbsp;int8.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912685">return</span>&nbsp;<span class="builtintype" id="4912692">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4912699">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912702">for</span>&nbsp;<span class="ident" id="4912706">_</span><span class="op" id="4912707">,</span>&nbsp;<span class="ident" id="4912709">x</span>&nbsp;<span class="op" id="4912711">:=</span>&nbsp;<span class="keyword" id="4912714">range</span>&nbsp;<span class="ident" id="4912720">slice</span>&nbsp;<span class="op" id="4912726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912730">if</span>&nbsp;<span class="ident" id="4912733">x</span>&nbsp;<span class="op" id="4912735">!=</span>&nbsp;<span class="num" id="4912738">0</span>&nbsp;<span class="op" id="4912740">||</span>&nbsp;<span class="ident" id="4912743">state</span><span class="op" id="4912748">.</span><span class="ident" id="4912749">sendZero</span>&nbsp;<span class="op" id="4912758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4912763">state</span><span class="op" id="4912768">.</span><span class="ident" id="4912769">encodeInt</span><span class="op" id="4912778">(</span><span class="ident" id="4912779">int64</span><span class="op" id="4912784">(</span><span class="ident" id="4912785">x</span><span class="op" id="4912786">)</span><span class="op" id="4912787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4912791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4912794">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912797">return</span>&nbsp;<span class="builtintype" id="4912804">true</span><br>
<span class="lineno"></span><span class="op" id="4912809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4912812">func</span>&nbsp;<span class="ident" id="4912817">encStringArray</span><span class="op" id="4912831">(</span><span class="ident" id="4912832">state</span>&nbsp;<span class="op" id="4912838">*</span><span class="ident" id="4912839">encoderState</span><span class="op" id="4912851">,</span>&nbsp;<span class="ident" id="4912853">v</span>&nbsp;<span class="ident" id="4912855">reflect</span><span class="op" id="4912862">.</span><span class="ident" id="4912863">Value</span><span class="op" id="4912868">)</span>&nbsp;<span class="builtintype" id="4912870">bool</span>&nbsp;<span class="op" id="4912875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4912878">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912919">if</span>&nbsp;<span class="op" id="4912922">!</span><span class="ident" id="4912923">v</span><span class="op" id="4912924">.</span><span class="ident" id="4912925">CanAddr</span><span class="op" id="4912932">(</span><span class="op" id="4912933">)</span>&nbsp;<span class="op" id="4912935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912939">return</span>&nbsp;<span class="builtintype" id="4912946">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4912953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4912956">return</span>&nbsp;<span class="ident" id="4912963">encStringSlice</span><span class="op" id="4912977">(</span><span class="ident" id="4912978">state</span><span class="op" id="4912983">,</span>&nbsp;<span class="ident" id="4912985">v</span><span class="op" id="4912986">.</span><span class="ident" id="4912987">Slice</span><span class="op" id="4912992">(</span><span class="num" id="4912993">0</span><span class="op" id="4912994">,</span>&nbsp;<span class="ident" id="4912996">v</span><span class="op" id="4912997">.</span><span class="ident" id="4912998">Len</span><span class="op" id="4913001">(</span><span class="op" id="4913002">)</span><span class="op" id="4913003">)</span><span class="op" id="4913004">)</span><br>
<span class="lineno"></span><span class="op" id="4913006">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="4913009">func</span>&nbsp;<span class="ident" id="4913014">encStringSlice</span><span class="op" id="4913028">(</span><span class="ident" id="4913029">state</span>&nbsp;<span class="op" id="4913035">*</span><span class="ident" id="4913036">encoderState</span><span class="op" id="4913048">,</span>&nbsp;<span class="ident" id="4913050">v</span>&nbsp;<span class="ident" id="4913052">reflect</span><span class="op" id="4913059">.</span><span class="ident" id="4913060">Value</span><span class="op" id="4913065">)</span>&nbsp;<span class="builtintype" id="4913067">bool</span>&nbsp;<span class="op" id="4913072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4913075">slice</span><span class="op" id="4913080">,</span>&nbsp;<span class="ident" id="4913082">ok</span>&nbsp;<span class="op" id="4913085">:=</span>&nbsp;<span class="ident" id="4913088">v</span><span class="op" id="4913089">.</span><span class="ident" id="4913090">Interface</span><span class="op" id="4913099">(</span><span class="op" id="4913100">)</span><span class="op" id="4913101">.</span><span class="op" id="4913102">(</span><span class="op" id="4913103">[</span><span class="op" id="4913104">]</span><span class="builtintype" id="4913105">string</span><span class="op" id="4913111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913114">if</span>&nbsp;<span class="op" id="4913117">!</span><span class="ident" id="4913118">ok</span>&nbsp;<span class="op" id="4913121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4913125">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;string&nbsp;but&nbsp;not&nbsp;type&nbsp;string.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913204">return</span>&nbsp;<span class="builtintype" id="4913211">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4913218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913221">for</span>&nbsp;<span class="ident" id="4913225">_</span><span class="op" id="4913226">,</span>&nbsp;<span class="ident" id="4913228">x</span>&nbsp;<span class="op" id="4913230">:=</span>&nbsp;<span class="keyword" id="4913233">range</span>&nbsp;<span class="ident" id="4913239">slice</span>&nbsp;<span class="op" id="4913245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913249">if</span>&nbsp;<span class="ident" id="4913252">x</span>&nbsp;<span class="op" id="4913254">!=</span>&nbsp;<span class="string" id="4913257">&#34;&#34;</span>&nbsp;<span class="op" id="4913260">||</span>&nbsp;<span class="ident" id="4913263">state</span><span class="op" id="4913268">.</span><span class="ident" id="4913269">sendZero</span>&nbsp;<span class="op" id="4913278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4913283">state</span><span class="op" id="4913288">.</span><span class="ident" id="4913289">encodeUint</span><span class="op" id="4913299">(</span><span class="ident" id="4913300">uint64</span><span class="op" id="4913306">(</span><span class="builtinfunc" id="4913307">len</span><span class="op" id="4913310">(</span><span class="ident" id="4913311">x</span><span class="op" id="4913312">)</span><span class="op" id="4913313">)</span><span class="op" id="4913314">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4913319">state</span><span class="op" id="4913324">.</span><span class="ident" id="4913325">b</span><span class="op" id="4913326">.</span><span class="ident" id="4913327">WriteString</span><span class="op" id="4913338">(</span><span class="ident" id="4913339">x</span><span class="op" id="4913340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4913344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4913347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913350">return</span>&nbsp;<span class="builtintype" id="4913357">true</span><br>
<span class="lineno"></span><span class="op" id="4913362">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="4913365">func</span>&nbsp;<span class="ident" id="4913370">encUintArray</span><span class="op" id="4913382">(</span><span class="ident" id="4913383">state</span>&nbsp;<span class="op" id="4913389">*</span><span class="ident" id="4913390">encoderState</span><span class="op" id="4913402">,</span>&nbsp;<span class="ident" id="4913404">v</span>&nbsp;<span class="ident" id="4913406">reflect</span><span class="op" id="4913413">.</span><span class="ident" id="4913414">Value</span><span class="op" id="4913419">)</span>&nbsp;<span class="builtintype" id="4913421">bool</span>&nbsp;<span class="op" id="4913426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4913429">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913470">if</span>&nbsp;<span class="op" id="4913473">!</span><span class="ident" id="4913474">v</span><span class="op" id="4913475">.</span><span class="ident" id="4913476">CanAddr</span><span class="op" id="4913483">(</span><span class="op" id="4913484">)</span>&nbsp;<span class="op" id="4913486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913490">return</span>&nbsp;<span class="builtintype" id="4913497">false</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4913504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913507">return</span>&nbsp;<span class="ident" id="4913514">encUintSlice</span><span class="op" id="4913526">(</span><span class="ident" id="4913527">state</span><span class="op" id="4913532">,</span>&nbsp;<span class="ident" id="4913534">v</span><span class="op" id="4913535">.</span><span class="ident" id="4913536">Slice</span><span class="op" id="4913541">(</span><span class="num" id="4913542">0</span><span class="op" id="4913543">,</span>&nbsp;<span class="ident" id="4913545">v</span><span class="op" id="4913546">.</span><span class="ident" id="4913547">Len</span><span class="op" id="4913550">(</span><span class="op" id="4913551">)</span><span class="op" id="4913552">)</span><span class="op" id="4913553">)</span><br>
<span class="lineno"></span><span class="op" id="4913555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4913558">func</span>&nbsp;<span class="ident" id="4913563">encUintSlice</span><span class="op" id="4913575">(</span><span class="ident" id="4913576">state</span>&nbsp;<span class="op" id="4913582">*</span><span class="ident" id="4913583">encoderState</span><span class="op" id="4913595">,</span>&nbsp;<span class="ident" id="4913597">v</span>&nbsp;<span class="ident" id="4913599">reflect</span><span class="op" id="4913606">.</span><span class="ident" id="4913607">Value</span><span class="op" id="4913612">)</span>&nbsp;<span class="builtintype" id="4913614">bool</span>&nbsp;<span class="op" id="4913619">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4913622">slice</span><span class="op" id="4913627">,</span>&nbsp;<span class="ident" id="4913629">ok</span>&nbsp;<span class="op" id="4913632">:=</span>&nbsp;<span class="ident" id="4913635">v</span><span class="op" id="4913636">.</span><span class="ident" id="4913637">Interface</span><span class="op" id="4913646">(</span><span class="op" id="4913647">)</span><span class="op" id="4913648">.</span><span class="op" id="4913649">(</span><span class="op" id="4913650">[</span><span class="op" id="4913651">]</span><span class="builtintype" id="4913652">uint</span><span class="op" id="4913656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913659">if</span>&nbsp;<span class="op" id="4913662">!</span><span class="ident" id="4913663">ok</span>&nbsp;<span class="op" id="4913666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4913670">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint&nbsp;but&nbsp;not&nbsp;type&nbsp;uint.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913745">return</span>&nbsp;<span class="builtintype" id="4913752">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4913759">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913762">for</span>&nbsp;<span class="ident" id="4913766">_</span><span class="op" id="4913767">,</span>&nbsp;<span class="ident" id="4913769">x</span>&nbsp;<span class="op" id="4913771">:=</span>&nbsp;<span class="keyword" id="4913774">range</span>&nbsp;<span class="ident" id="4913780">slice</span>&nbsp;<span class="op" id="4913786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913790">if</span>&nbsp;<span class="ident" id="4913793">x</span>&nbsp;<span class="op" id="4913795">!=</span>&nbsp;<span class="num" id="4913798">0</span>&nbsp;<span class="op" id="4913800">||</span>&nbsp;<span class="ident" id="4913803">state</span><span class="op" id="4913808">.</span><span class="ident" id="4913809">sendZero</span>&nbsp;<span class="op" id="4913818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4913823">state</span><span class="op" id="4913828">.</span><span class="ident" id="4913829">encodeUint</span><span class="op" id="4913839">(</span><span class="ident" id="4913840">uint64</span><span class="op" id="4913846">(</span><span class="ident" id="4913847">x</span><span class="op" id="4913848">)</span><span class="op" id="4913849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4913853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4913856">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913859">return</span>&nbsp;<span class="builtintype" id="4913866">true</span><br>
<span class="lineno"></span><span class="op" id="4913871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4913874">func</span>&nbsp;<span class="ident" id="4913879">encUint16Array</span><span class="op" id="4913893">(</span><span class="ident" id="4913894">state</span>&nbsp;<span class="op" id="4913900">*</span><span class="ident" id="4913901">encoderState</span><span class="op" id="4913913">,</span>&nbsp;<span class="ident" id="4913915">v</span>&nbsp;<span class="ident" id="4913917">reflect</span><span class="op" id="4913924">.</span><span class="ident" id="4913925">Value</span><span class="op" id="4913930">)</span>&nbsp;<span class="builtintype" id="4913932">bool</span>&nbsp;<span class="op" id="4913937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4913940">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4913981">if</span>&nbsp;<span class="op" id="4913984">!</span><span class="ident" id="4913985">v</span><span class="op" id="4913986">.</span><span class="ident" id="4913987">CanAddr</span><span class="op" id="4913994">(</span><span class="op" id="4913995">)</span>&nbsp;<span class="op" id="4913997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914001">return</span>&nbsp;<span class="builtintype" id="4914008">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4914015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914018">return</span>&nbsp;<span class="ident" id="4914025">encUint16Slice</span><span class="op" id="4914039">(</span><span class="ident" id="4914040">state</span><span class="op" id="4914045">,</span>&nbsp;<span class="ident" id="4914047">v</span><span class="op" id="4914048">.</span><span class="ident" id="4914049">Slice</span><span class="op" id="4914054">(</span><span class="num" id="4914055">0</span><span class="op" id="4914056">,</span>&nbsp;<span class="ident" id="4914058">v</span><span class="op" id="4914059">.</span><span class="ident" id="4914060">Len</span><span class="op" id="4914063">(</span><span class="op" id="4914064">)</span><span class="op" id="4914065">)</span><span class="op" id="4914066">)</span><br>
<span class="lineno"></span><span class="op" id="4914068">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="keyword" id="4914071">func</span>&nbsp;<span class="ident" id="4914076">encUint16Slice</span><span class="op" id="4914090">(</span><span class="ident" id="4914091">state</span>&nbsp;<span class="op" id="4914097">*</span><span class="ident" id="4914098">encoderState</span><span class="op" id="4914110">,</span>&nbsp;<span class="ident" id="4914112">v</span>&nbsp;<span class="ident" id="4914114">reflect</span><span class="op" id="4914121">.</span><span class="ident" id="4914122">Value</span><span class="op" id="4914127">)</span>&nbsp;<span class="builtintype" id="4914129">bool</span>&nbsp;<span class="op" id="4914134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4914137">slice</span><span class="op" id="4914142">,</span>&nbsp;<span class="ident" id="4914144">ok</span>&nbsp;<span class="op" id="4914147">:=</span>&nbsp;<span class="ident" id="4914150">v</span><span class="op" id="4914151">.</span><span class="ident" id="4914152">Interface</span><span class="op" id="4914161">(</span><span class="op" id="4914162">)</span><span class="op" id="4914163">.</span><span class="op" id="4914164">(</span><span class="op" id="4914165">[</span><span class="op" id="4914166">]</span><span class="builtintype" id="4914167">uint16</span><span class="op" id="4914173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914176">if</span>&nbsp;<span class="op" id="4914179">!</span><span class="ident" id="4914180">ok</span>&nbsp;<span class="op" id="4914183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4914187">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint16&nbsp;but&nbsp;not&nbsp;type&nbsp;uint16.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914266">return</span>&nbsp;<span class="builtintype" id="4914273">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4914280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914283">for</span>&nbsp;<span class="ident" id="4914287">_</span><span class="op" id="4914288">,</span>&nbsp;<span class="ident" id="4914290">x</span>&nbsp;<span class="op" id="4914292">:=</span>&nbsp;<span class="keyword" id="4914295">range</span>&nbsp;<span class="ident" id="4914301">slice</span>&nbsp;<span class="op" id="4914307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914311">if</span>&nbsp;<span class="ident" id="4914314">x</span>&nbsp;<span class="op" id="4914316">!=</span>&nbsp;<span class="num" id="4914319">0</span>&nbsp;<span class="op" id="4914321">||</span>&nbsp;<span class="ident" id="4914324">state</span><span class="op" id="4914329">.</span><span class="ident" id="4914330">sendZero</span>&nbsp;<span class="op" id="4914339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4914344">state</span><span class="op" id="4914349">.</span><span class="ident" id="4914350">encodeUint</span><span class="op" id="4914360">(</span><span class="ident" id="4914361">uint64</span><span class="op" id="4914367">(</span><span class="ident" id="4914368">x</span><span class="op" id="4914369">)</span><span class="op" id="4914370">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4914374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4914377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914380">return</span>&nbsp;<span class="builtintype" id="4914387">true</span><br>
<span class="lineno"></span><span class="op" id="4914392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="keyword" id="4914395">func</span>&nbsp;<span class="ident" id="4914400">encUint32Array</span><span class="op" id="4914414">(</span><span class="ident" id="4914415">state</span>&nbsp;<span class="op" id="4914421">*</span><span class="ident" id="4914422">encoderState</span><span class="op" id="4914434">,</span>&nbsp;<span class="ident" id="4914436">v</span>&nbsp;<span class="ident" id="4914438">reflect</span><span class="op" id="4914445">.</span><span class="ident" id="4914446">Value</span><span class="op" id="4914451">)</span>&nbsp;<span class="builtintype" id="4914453">bool</span>&nbsp;<span class="op" id="4914458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4914461">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914502">if</span>&nbsp;<span class="op" id="4914505">!</span><span class="ident" id="4914506">v</span><span class="op" id="4914507">.</span><span class="ident" id="4914508">CanAddr</span><span class="op" id="4914515">(</span><span class="op" id="4914516">)</span>&nbsp;<span class="op" id="4914518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914522">return</span>&nbsp;<span class="builtintype" id="4914529">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4914536">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914539">return</span>&nbsp;<span class="ident" id="4914546">encUint32Slice</span><span class="op" id="4914560">(</span><span class="ident" id="4914561">state</span><span class="op" id="4914566">,</span>&nbsp;<span class="ident" id="4914568">v</span><span class="op" id="4914569">.</span><span class="ident" id="4914570">Slice</span><span class="op" id="4914575">(</span><span class="num" id="4914576">0</span><span class="op" id="4914577">,</span>&nbsp;<span class="ident" id="4914579">v</span><span class="op" id="4914580">.</span><span class="ident" id="4914581">Len</span><span class="op" id="4914584">(</span><span class="op" id="4914585">)</span><span class="op" id="4914586">)</span><span class="op" id="4914587">)</span><br>
<span class="lineno"></span><span class="op" id="4914589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4914592">func</span>&nbsp;<span class="ident" id="4914597">encUint32Slice</span><span class="op" id="4914611">(</span><span class="ident" id="4914612">state</span>&nbsp;<span class="op" id="4914618">*</span><span class="ident" id="4914619">encoderState</span><span class="op" id="4914631">,</span>&nbsp;<span class="ident" id="4914633">v</span>&nbsp;<span class="ident" id="4914635">reflect</span><span class="op" id="4914642">.</span><span class="ident" id="4914643">Value</span><span class="op" id="4914648">)</span>&nbsp;<span class="builtintype" id="4914650">bool</span>&nbsp;<span class="op" id="4914655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4914658">slice</span><span class="op" id="4914663">,</span>&nbsp;<span class="ident" id="4914665">ok</span>&nbsp;<span class="op" id="4914668">:=</span>&nbsp;<span class="ident" id="4914671">v</span><span class="op" id="4914672">.</span><span class="ident" id="4914673">Interface</span><span class="op" id="4914682">(</span><span class="op" id="4914683">)</span><span class="op" id="4914684">.</span><span class="op" id="4914685">(</span><span class="op" id="4914686">[</span><span class="op" id="4914687">]</span><span class="builtintype" id="4914688">uint32</span><span class="op" id="4914694">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914697">if</span>&nbsp;<span class="op" id="4914700">!</span><span class="ident" id="4914701">ok</span>&nbsp;<span class="op" id="4914704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4914708">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint32&nbsp;but&nbsp;not&nbsp;type&nbsp;uint32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914787">return</span>&nbsp;<span class="builtintype" id="4914794">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4914801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914804">for</span>&nbsp;<span class="ident" id="4914808">_</span><span class="op" id="4914809">,</span>&nbsp;<span class="ident" id="4914811">x</span>&nbsp;<span class="op" id="4914813">:=</span>&nbsp;<span class="keyword" id="4914816">range</span>&nbsp;<span class="ident" id="4914822">slice</span>&nbsp;<span class="op" id="4914828">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914832">if</span>&nbsp;<span class="ident" id="4914835">x</span>&nbsp;<span class="op" id="4914837">!=</span>&nbsp;<span class="num" id="4914840">0</span>&nbsp;<span class="op" id="4914842">||</span>&nbsp;<span class="ident" id="4914845">state</span><span class="op" id="4914850">.</span><span class="ident" id="4914851">sendZero</span>&nbsp;<span class="op" id="4914860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4914865">state</span><span class="op" id="4914870">.</span><span class="ident" id="4914871">encodeUint</span><span class="op" id="4914881">(</span><span class="ident" id="4914882">uint64</span><span class="op" id="4914888">(</span><span class="ident" id="4914889">x</span><span class="op" id="4914890">)</span><span class="op" id="4914891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4914895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4914898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914901">return</span>&nbsp;<span class="builtintype" id="4914908">true</span><br>
<span class="lineno">370</span><span class="op" id="4914913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4914916">func</span>&nbsp;<span class="ident" id="4914921">encUint64Array</span><span class="op" id="4914935">(</span><span class="ident" id="4914936">state</span>&nbsp;<span class="op" id="4914942">*</span><span class="ident" id="4914943">encoderState</span><span class="op" id="4914955">,</span>&nbsp;<span class="ident" id="4914957">v</span>&nbsp;<span class="ident" id="4914959">reflect</span><span class="op" id="4914966">.</span><span class="ident" id="4914967">Value</span><span class="op" id="4914972">)</span>&nbsp;<span class="builtintype" id="4914974">bool</span>&nbsp;<span class="op" id="4914979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4914982">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915023">if</span>&nbsp;<span class="op" id="4915026">!</span><span class="ident" id="4915027">v</span><span class="op" id="4915028">.</span><span class="ident" id="4915029">CanAddr</span><span class="op" id="4915036">(</span><span class="op" id="4915037">)</span>&nbsp;<span class="op" id="4915039">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915043">return</span>&nbsp;<span class="builtintype" id="4915050">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4915057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915060">return</span>&nbsp;<span class="ident" id="4915067">encUint64Slice</span><span class="op" id="4915081">(</span><span class="ident" id="4915082">state</span><span class="op" id="4915087">,</span>&nbsp;<span class="ident" id="4915089">v</span><span class="op" id="4915090">.</span><span class="ident" id="4915091">Slice</span><span class="op" id="4915096">(</span><span class="num" id="4915097">0</span><span class="op" id="4915098">,</span>&nbsp;<span class="ident" id="4915100">v</span><span class="op" id="4915101">.</span><span class="ident" id="4915102">Len</span><span class="op" id="4915105">(</span><span class="op" id="4915106">)</span><span class="op" id="4915107">)</span><span class="op" id="4915108">)</span><br>
<span class="lineno"></span><span class="op" id="4915110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="4915113">func</span>&nbsp;<span class="ident" id="4915118">encUint64Slice</span><span class="op" id="4915132">(</span><span class="ident" id="4915133">state</span>&nbsp;<span class="op" id="4915139">*</span><span class="ident" id="4915140">encoderState</span><span class="op" id="4915152">,</span>&nbsp;<span class="ident" id="4915154">v</span>&nbsp;<span class="ident" id="4915156">reflect</span><span class="op" id="4915163">.</span><span class="ident" id="4915164">Value</span><span class="op" id="4915169">)</span>&nbsp;<span class="builtintype" id="4915171">bool</span>&nbsp;<span class="op" id="4915176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4915179">slice</span><span class="op" id="4915184">,</span>&nbsp;<span class="ident" id="4915186">ok</span>&nbsp;<span class="op" id="4915189">:=</span>&nbsp;<span class="ident" id="4915192">v</span><span class="op" id="4915193">.</span><span class="ident" id="4915194">Interface</span><span class="op" id="4915203">(</span><span class="op" id="4915204">)</span><span class="op" id="4915205">.</span><span class="op" id="4915206">(</span><span class="op" id="4915207">[</span><span class="op" id="4915208">]</span><span class="ident" id="4915209">uint64</span><span class="op" id="4915215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915218">if</span>&nbsp;<span class="op" id="4915221">!</span><span class="ident" id="4915222">ok</span>&nbsp;<span class="op" id="4915225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4915229">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint64&nbsp;but&nbsp;not&nbsp;type&nbsp;uint64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915308">return</span>&nbsp;<span class="builtintype" id="4915315">false</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4915322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915325">for</span>&nbsp;<span class="ident" id="4915329">_</span><span class="op" id="4915330">,</span>&nbsp;<span class="ident" id="4915332">x</span>&nbsp;<span class="op" id="4915334">:=</span>&nbsp;<span class="keyword" id="4915337">range</span>&nbsp;<span class="ident" id="4915343">slice</span>&nbsp;<span class="op" id="4915349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915353">if</span>&nbsp;<span class="ident" id="4915356">x</span>&nbsp;<span class="op" id="4915358">!=</span>&nbsp;<span class="num" id="4915361">0</span>&nbsp;<span class="op" id="4915363">||</span>&nbsp;<span class="ident" id="4915366">state</span><span class="op" id="4915371">.</span><span class="ident" id="4915372">sendZero</span>&nbsp;<span class="op" id="4915381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4915386">state</span><span class="op" id="4915391">.</span><span class="ident" id="4915392">encodeUint</span><span class="op" id="4915402">(</span><span class="ident" id="4915403">x</span><span class="op" id="4915404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4915408">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4915411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915414">return</span>&nbsp;<span class="builtintype" id="4915421">true</span><br>
<span class="lineno"></span><span class="op" id="4915426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4915429">func</span>&nbsp;<span class="ident" id="4915434">encUintptrArray</span><span class="op" id="4915449">(</span><span class="ident" id="4915450">state</span>&nbsp;<span class="op" id="4915456">*</span><span class="ident" id="4915457">encoderState</span><span class="op" id="4915469">,</span>&nbsp;<span class="ident" id="4915471">v</span>&nbsp;<span class="ident" id="4915473">reflect</span><span class="op" id="4915480">.</span><span class="ident" id="4915481">Value</span><span class="op" id="4915486">)</span>&nbsp;<span class="builtintype" id="4915488">bool</span>&nbsp;<span class="op" id="4915493">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4915496">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915537">if</span>&nbsp;<span class="op" id="4915540">!</span><span class="ident" id="4915541">v</span><span class="op" id="4915542">.</span><span class="ident" id="4915543">CanAddr</span><span class="op" id="4915550">(</span><span class="op" id="4915551">)</span>&nbsp;<span class="op" id="4915553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915557">return</span>&nbsp;<span class="builtintype" id="4915564">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4915571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915574">return</span>&nbsp;<span class="ident" id="4915581">encUintptrSlice</span><span class="op" id="4915596">(</span><span class="ident" id="4915597">state</span><span class="op" id="4915602">,</span>&nbsp;<span class="ident" id="4915604">v</span><span class="op" id="4915605">.</span><span class="ident" id="4915606">Slice</span><span class="op" id="4915611">(</span><span class="num" id="4915612">0</span><span class="op" id="4915613">,</span>&nbsp;<span class="ident" id="4915615">v</span><span class="op" id="4915616">.</span><span class="ident" id="4915617">Len</span><span class="op" id="4915620">(</span><span class="op" id="4915621">)</span><span class="op" id="4915622">)</span><span class="op" id="4915623">)</span><br>
<span class="lineno">400</span><span class="op" id="4915625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4915628">func</span>&nbsp;<span class="ident" id="4915633">encUintptrSlice</span><span class="op" id="4915648">(</span><span class="ident" id="4915649">state</span>&nbsp;<span class="op" id="4915655">*</span><span class="ident" id="4915656">encoderState</span><span class="op" id="4915668">,</span>&nbsp;<span class="ident" id="4915670">v</span>&nbsp;<span class="ident" id="4915672">reflect</span><span class="op" id="4915679">.</span><span class="ident" id="4915680">Value</span><span class="op" id="4915685">)</span>&nbsp;<span class="builtintype" id="4915687">bool</span>&nbsp;<span class="op" id="4915692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4915695">slice</span><span class="op" id="4915700">,</span>&nbsp;<span class="ident" id="4915702">ok</span>&nbsp;<span class="op" id="4915705">:=</span>&nbsp;<span class="ident" id="4915708">v</span><span class="op" id="4915709">.</span><span class="ident" id="4915710">Interface</span><span class="op" id="4915719">(</span><span class="op" id="4915720">)</span><span class="op" id="4915721">.</span><span class="op" id="4915722">(</span><span class="op" id="4915723">[</span><span class="op" id="4915724">]</span><span class="builtintype" id="4915725">uintptr</span><span class="op" id="4915732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915735">if</span>&nbsp;<span class="op" id="4915738">!</span><span class="ident" id="4915739">ok</span>&nbsp;<span class="op" id="4915742">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4915746">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uintptr&nbsp;but&nbsp;not&nbsp;type&nbsp;uintptr.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915827">return</span>&nbsp;<span class="builtintype" id="4915834">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4915841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915844">for</span>&nbsp;<span class="ident" id="4915848">_</span><span class="op" id="4915849">,</span>&nbsp;<span class="ident" id="4915851">x</span>&nbsp;<span class="op" id="4915853">:=</span>&nbsp;<span class="keyword" id="4915856">range</span>&nbsp;<span class="ident" id="4915862">slice</span>&nbsp;<span class="op" id="4915868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915872">if</span>&nbsp;<span class="ident" id="4915875">x</span>&nbsp;<span class="op" id="4915877">!=</span>&nbsp;<span class="num" id="4915880">0</span>&nbsp;<span class="op" id="4915882">||</span>&nbsp;<span class="ident" id="4915885">state</span><span class="op" id="4915890">.</span><span class="ident" id="4915891">sendZero</span>&nbsp;<span class="op" id="4915900">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4915905">state</span><span class="op" id="4915910">.</span><span class="ident" id="4915911">encodeUint</span><span class="op" id="4915921">(</span><span class="ident" id="4915922">uint64</span><span class="op" id="4915928">(</span><span class="ident" id="4915929">x</span><span class="op" id="4915930">)</span><span class="op" id="4915931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4915935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4915938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4915941">return</span>&nbsp;<span class="builtintype" id="4915948">true</span><br>
<span class="lineno"></span><span class="op" id="4915953">}</span>
</div>
</body>
</html>
