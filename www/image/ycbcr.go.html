<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5482639">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5482694">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5482748">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5482799">package</span>&nbsp;<span class="ident" id="5482807">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5482814">import</span>&nbsp;<span class="op" id="5482821">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5482824">&#34;image/color&#34;</span><br>
<span class="lineno"></span><span class="op" id="5482838">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="5482841">//&nbsp;YCbCrSubsampleRatio&nbsp;is&nbsp;the&nbsp;chroma&nbsp;subsample&nbsp;ratio&nbsp;used&nbsp;in&nbsp;a&nbsp;YCbCr&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5482917">type</span>&nbsp;<span class="ident" id="5482922">YCbCrSubsampleRatio</span>&nbsp;<span class="builtintype" id="5482942">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5482947">const</span>&nbsp;<span class="op" id="5482953">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5482956">YCbCrSubsampleRatio444</span>&nbsp;<span class="ident" id="5482979"><a href="/image/ycbcr.go.html#5482922">YCbCrSubsampleRatio</a></span>&nbsp;<span class="op" id="5482999">=</span>&nbsp;<span class="ident" id="5483001">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5483007">YCbCrSubsampleRatio422</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5483031">YCbCrSubsampleRatio420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5483055">YCbCrSubsampleRatio440</span><br>
<span class="lineno"></span><span class="op" id="5483078">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="5483081">func</span>&nbsp;<span class="op" id="5483086">(</span><span class="ident" id="5483087">s</span>&nbsp;<span class="ident" id="5483089"><a href="/image/ycbcr.go.html#5482922">YCbCrSubsampleRatio</a></span><span class="op" id="5483108">)</span>&nbsp;<span class="ident" id="5483110">String</span><span class="op" id="5483116">(</span><span class="op" id="5483117">)</span>&nbsp;<span class="builtintype" id="5483119">string</span>&nbsp;<span class="op" id="5483126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5483129">switch</span>&nbsp;<span class="ident" id="5483136"><a href="/image/ycbcr.go.html#5483087">s</a></span>&nbsp;<span class="op" id="5483138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5483141">case</span>&nbsp;<span class="ident" id="5483146"><a href="/image/ycbcr.go.html#5482956">YCbCrSubsampleRatio444</a></span><span class="op" id="5483168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5483172">return</span>&nbsp;<span class="string" id="5483179">&#34;YCbCrSubsampleRatio444&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5483205">case</span>&nbsp;<span class="ident" id="5483210"><a href="/image/ycbcr.go.html#5483007">YCbCrSubsampleRatio422</a></span><span class="op" id="5483232">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5483236">return</span>&nbsp;<span class="string" id="5483243">&#34;YCbCrSubsampleRatio422&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5483269">case</span>&nbsp;<span class="ident" id="5483274"><a href="/image/ycbcr.go.html#5483031">YCbCrSubsampleRatio420</a></span><span class="op" id="5483296">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5483300">return</span>&nbsp;<span class="string" id="5483307">&#34;YCbCrSubsampleRatio420&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5483333">case</span>&nbsp;<span class="ident" id="5483338"><a href="/image/ycbcr.go.html#5483055">YCbCrSubsampleRatio440</a></span><span class="op" id="5483360">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5483364">return</span>&nbsp;<span class="string" id="5483371">&#34;YCbCrSubsampleRatio440&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5483397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5483400">return</span>&nbsp;<span class="string" id="5483407">&#34;YCbCrSubsampleRatioUnknown&#34;</span><br>
<span class="lineno"></span><span class="op" id="5483436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5483439">//&nbsp;YCbCr&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;of&nbsp;Y&#39;CbCr&nbsp;colors.&nbsp;There&nbsp;is&nbsp;one&nbsp;Y&nbsp;sample&nbsp;per</span><br>
<span class="lineno"></span><span class="comment" id="5483514">//&nbsp;pixel,&nbsp;but&nbsp;each&nbsp;Cb&nbsp;and&nbsp;Cr&nbsp;sample&nbsp;can&nbsp;span&nbsp;one&nbsp;or&nbsp;more&nbsp;pixels.</span><br>
<span class="lineno"></span><span class="comment" id="5483579">//&nbsp;YStride&nbsp;is&nbsp;the&nbsp;Y&nbsp;slice&nbsp;index&nbsp;delta&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span><span class="comment" id="5483653">//&nbsp;CStride&nbsp;is&nbsp;the&nbsp;Cb&nbsp;and&nbsp;Cr&nbsp;slice&nbsp;index&nbsp;delta&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels</span><br>
<span class="lineno"></span><span class="comment" id="5483734">//&nbsp;that&nbsp;map&nbsp;to&nbsp;separate&nbsp;chroma&nbsp;samples.</span><br>
<span class="lineno">40</span><span class="comment" id="5483774">//&nbsp;It&nbsp;is&nbsp;not&nbsp;an&nbsp;absolute&nbsp;requirement,&nbsp;but&nbsp;YStride&nbsp;and&nbsp;len(Y)&nbsp;are&nbsp;typically</span><br>
<span class="lineno"></span><span class="comment" id="5483849">//&nbsp;multiples&nbsp;of&nbsp;8,&nbsp;and:</span><br>
<span class="lineno"></span><span class="comment" id="5483873">//&nbsp;&nbsp;&nbsp;&nbspFor&nbsp;4:4:4,&nbsp;CStride&nbsp;==&nbsp;YStride/1&nbsp;&amp;&amp;&nbsp;len(Cb)&nbsp;==&nbsp;len(Cr)&nbsp;==&nbsp;len(Y)/1.</span><br>
<span class="lineno"></span><span class="comment" id="5483943">//&nbsp;&nbsp;&nbsp;&nbspFor&nbsp;4:2:2,&nbsp;CStride&nbsp;==&nbsp;YStride/2&nbsp;&amp;&amp;&nbsp;len(Cb)&nbsp;==&nbsp;len(Cr)&nbsp;==&nbsp;len(Y)/2.</span><br>
<span class="lineno"></span><span class="comment" id="5484013">//&nbsp;&nbsp;&nbsp;&nbspFor&nbsp;4:2:0,&nbsp;CStride&nbsp;==&nbsp;YStride/2&nbsp;&amp;&amp;&nbsp;len(Cb)&nbsp;==&nbsp;len(Cr)&nbsp;==&nbsp;len(Y)/4.</span><br>
<span class="lineno">45</span><span class="comment" id="5484083">//&nbsp;&nbsp;&nbsp;&nbspFor&nbsp;4:4:0,&nbsp;CStride&nbsp;==&nbsp;YStride/1&nbsp;&amp;&amp;&nbsp;len(Cb)&nbsp;==&nbsp;len(Cr)&nbsp;==&nbsp;len(Y)/2.</span><br>
<span class="lineno"></span><span class="keyword" id="5484153">type</span>&nbsp;<span class="ident" id="5484158">YCbCr</span>&nbsp;<span class="keyword" id="5484164">struct</span>&nbsp;<span class="op" id="5484171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484174">Y</span><span class="op" id="5484175">,</span>&nbsp;<span class="ident" id="5484177">Cb</span><span class="op" id="5484179">,</span>&nbsp;<span class="ident" id="5484181">Cr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5484189">[</span><span class="op" id="5484190">]</span><span class="builtintype" id="5484191">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484198">YStride</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5484213">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484218">CStride</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5484233">int</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484238">SubsampleRatio</span>&nbsp;<span class="ident" id="5484253"><a href="/image/ycbcr.go.html#5482922">YCbCrSubsampleRatio</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484274">Rect</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484289"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="5484299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5484302">func</span>&nbsp;<span class="op" id="5484307">(</span><span class="ident" id="5484308">p</span>&nbsp;<span class="op" id="5484310">*</span><span class="ident" id="5484311"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5484316">)</span>&nbsp;<span class="ident" id="5484318">ColorModel</span><span class="op" id="5484328">(</span><span class="op" id="5484329">)</span>&nbsp;<span class="ident" id="5484331"><a href="/image/ycbcr.go.html#5482824">color</a></span><span class="op" id="5484336">.</span><span class="ident" id="5484337">Model</span>&nbsp;<span class="op" id="5484343">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5484346">return</span>&nbsp;<span class="ident" id="5484353"><a href="/image/ycbcr.go.html#5482824">color</a></span><span class="op" id="5484358">.</span><span class="ident" id="5484359">YCbCrModel</span><br>
<span class="lineno"></span><span class="op" id="5484370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5484373">func</span>&nbsp;<span class="op" id="5484378">(</span><span class="ident" id="5484379">p</span>&nbsp;<span class="op" id="5484381">*</span><span class="ident" id="5484382"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5484387">)</span>&nbsp;<span class="ident" id="5484389">Bounds</span><span class="op" id="5484395">(</span><span class="op" id="5484396">)</span>&nbsp;<span class="ident" id="5484398"><a href="/image/geom.go.html#5452241">Rectangle</a></span>&nbsp;<span class="op" id="5484408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5484411">return</span>&nbsp;<span class="ident" id="5484418"><a href="/image/ycbcr.go.html#5484379">p</a></span><span class="op" id="5484419">.</span><span class="ident" id="5484420">Rect</span><br>
<span class="lineno">60</span><span class="op" id="5484425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5484428">func</span>&nbsp;<span class="op" id="5484433">(</span><span class="ident" id="5484434">p</span>&nbsp;<span class="op" id="5484436">*</span><span class="ident" id="5484437"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5484442">)</span>&nbsp;<span class="ident" id="5484444">At</span><span class="op" id="5484446">(</span><span class="ident" id="5484447">x</span><span class="op" id="5484448">,</span>&nbsp;<span class="ident" id="5484450">y</span>&nbsp;<span class="builtintype" id="5484452">int</span><span class="op" id="5484455">)</span>&nbsp;<span class="ident" id="5484457"><a href="/image/ycbcr.go.html#5482824">color</a></span><span class="op" id="5484462">.</span><span class="ident" id="5484463">Color</span>&nbsp;<span class="op" id="5484469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5484472">return</span>&nbsp;<span class="ident" id="5484479"><a href="/image/ycbcr.go.html#5484434">p</a></span><span class="op" id="5484480">.</span><span class="ident" id="5484481">YCbCrAt</span><span class="op" id="5484488">(</span><span class="ident" id="5484489"><a href="/image/ycbcr.go.html#5484447">x</a></span><span class="op" id="5484490">,</span>&nbsp;<span class="ident" id="5484492"><a href="/image/ycbcr.go.html#5484450">y</a></span><span class="op" id="5484493">)</span><br>
<span class="lineno"></span><span class="op" id="5484495">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="5484498">func</span>&nbsp;<span class="op" id="5484503">(</span><span class="ident" id="5484504">p</span>&nbsp;<span class="op" id="5484506">*</span><span class="ident" id="5484507"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5484512">)</span>&nbsp;<span class="ident" id="5484514">YCbCrAt</span><span class="op" id="5484521">(</span><span class="ident" id="5484522">x</span><span class="op" id="5484523">,</span>&nbsp;<span class="ident" id="5484525">y</span>&nbsp;<span class="builtintype" id="5484527">int</span><span class="op" id="5484530">)</span>&nbsp;<span class="ident" id="5484532"><a href="/image/ycbcr.go.html#5482824">color</a></span><span class="op" id="5484537">.</span><span class="ident" id="5484538">YCbCr</span>&nbsp;<span class="op" id="5484544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5484547">if</span>&nbsp;<span class="op" id="5484550">!</span><span class="op" id="5484551">(</span><span class="ident" id="5484552"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5484557">{</span><span class="ident" id="5484558"><a href="/image/ycbcr.go.html#5484522">x</a></span><span class="op" id="5484559">,</span>&nbsp;<span class="ident" id="5484561"><a href="/image/ycbcr.go.html#5484525">y</a></span><span class="op" id="5484562">}</span><span class="op" id="5484563">.</span><span class="ident" id="5484564">In</span><span class="op" id="5484566">(</span><span class="ident" id="5484567"><a href="/image/ycbcr.go.html#5484504">p</a></span><span class="op" id="5484568">.</span><span class="ident" id="5484569">Rect</span><span class="op" id="5484573">)</span><span class="op" id="5484574">)</span>&nbsp;<span class="op" id="5484576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5484580">return</span>&nbsp;<span class="ident" id="5484587"><a href="/image/ycbcr.go.html#5482824">color</a></span><span class="op" id="5484592">.</span><span class="ident" id="5484593">YCbCr</span><span class="op" id="5484598">{</span><span class="op" id="5484599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5484602">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484605">yi</span>&nbsp;<span class="op" id="5484608">:=</span>&nbsp;<span class="ident" id="5484611"><a href="/image/ycbcr.go.html#5484504">p</a></span><span class="op" id="5484612">.</span><span class="ident" id="5484613">YOffset</span><span class="op" id="5484620">(</span><span class="ident" id="5484621"><a href="/image/ycbcr.go.html#5484522">x</a></span><span class="op" id="5484622">,</span>&nbsp;<span class="ident" id="5484624"><a href="/image/ycbcr.go.html#5484525">y</a></span><span class="op" id="5484625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484628">ci</span>&nbsp;<span class="op" id="5484631">:=</span>&nbsp;<span class="ident" id="5484634"><a href="/image/ycbcr.go.html#5484504">p</a></span><span class="op" id="5484635">.</span><span class="ident" id="5484636">COffset</span><span class="op" id="5484643">(</span><span class="ident" id="5484644"><a href="/image/ycbcr.go.html#5484522">x</a></span><span class="op" id="5484645">,</span>&nbsp;<span class="ident" id="5484647"><a href="/image/ycbcr.go.html#5484525">y</a></span><span class="op" id="5484648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5484651">return</span>&nbsp;<span class="ident" id="5484658"><a href="/image/ycbcr.go.html#5482824">color</a></span><span class="op" id="5484663">.</span><span class="ident" id="5484664">YCbCr</span><span class="op" id="5484669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484673"><a href="/image/ycbcr.go.html#5484504">p</a></span><span class="op" id="5484674">.</span><span class="ident" id="5484675">Y</span><span class="op" id="5484676">[</span><span class="ident" id="5484677"><a href="/image/ycbcr.go.html#5484605">yi</a></span><span class="op" id="5484679">]</span><span class="op" id="5484680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484684"><a href="/image/ycbcr.go.html#5484504">p</a></span><span class="op" id="5484685">.</span><span class="ident" id="5484686">Cb</span><span class="op" id="5484688">[</span><span class="ident" id="5484689"><a href="/image/ycbcr.go.html#5484628">ci</a></span><span class="op" id="5484691">]</span><span class="op" id="5484692">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484696"><a href="/image/ycbcr.go.html#5484504">p</a></span><span class="op" id="5484697">.</span><span class="ident" id="5484698">Cr</span><span class="op" id="5484700">[</span><span class="ident" id="5484701"><a href="/image/ycbcr.go.html#5484628">ci</a></span><span class="op" id="5484703">]</span><span class="op" id="5484704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5484707">}</span><br>
<span class="lineno"></span><span class="op" id="5484709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5484712">//&nbsp;YOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Y&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno">80</span><span class="comment" id="5484787">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="5484811">func</span>&nbsp;<span class="op" id="5484816">(</span><span class="ident" id="5484817">p</span>&nbsp;<span class="op" id="5484819">*</span><span class="ident" id="5484820"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5484825">)</span>&nbsp;<span class="ident" id="5484827">YOffset</span><span class="op" id="5484834">(</span><span class="ident" id="5484835">x</span><span class="op" id="5484836">,</span>&nbsp;<span class="ident" id="5484838">y</span>&nbsp;<span class="builtintype" id="5484840">int</span><span class="op" id="5484843">)</span>&nbsp;<span class="builtintype" id="5484845">int</span>&nbsp;<span class="op" id="5484849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5484852">return</span>&nbsp;<span class="op" id="5484859">(</span><span class="ident" id="5484860"><a href="/image/ycbcr.go.html#5484838">y</a></span><span class="op" id="5484861">-</span><span class="ident" id="5484862"><a href="/image/ycbcr.go.html#5484817">p</a></span><span class="op" id="5484863">.</span><span class="ident" id="5484864">Rect</span><span class="op" id="5484868">.</span><span class="ident" id="5484869">Min</span><span class="op" id="5484872">.</span><span class="ident" id="5484873">Y</span><span class="op" id="5484874">)</span><span class="op" id="5484875">*</span><span class="ident" id="5484876"><a href="/image/ycbcr.go.html#5484817">p</a></span><span class="op" id="5484877">.</span><span class="ident" id="5484878">YStride</span>&nbsp;<span class="op" id="5484886">+</span>&nbsp;<span class="op" id="5484888">(</span><span class="ident" id="5484889"><a href="/image/ycbcr.go.html#5484835">x</a></span>&nbsp;<span class="op" id="5484891">-</span>&nbsp;<span class="ident" id="5484893"><a href="/image/ycbcr.go.html#5484817">p</a></span><span class="op" id="5484894">.</span><span class="ident" id="5484895">Rect</span><span class="op" id="5484899">.</span><span class="ident" id="5484900">Min</span><span class="op" id="5484903">.</span><span class="ident" id="5484904">X</span><span class="op" id="5484905">)</span><br>
<span class="lineno"></span><span class="op" id="5484907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="5484910">//&nbsp;COffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Cb&nbsp;or&nbsp;Cr&nbsp;that&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="5484989">//&nbsp;to&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="5485016">func</span>&nbsp;<span class="op" id="5485021">(</span><span class="ident" id="5485022">p</span>&nbsp;<span class="op" id="5485024">*</span><span class="ident" id="5485025"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5485030">)</span>&nbsp;<span class="ident" id="5485032">COffset</span><span class="op" id="5485039">(</span><span class="ident" id="5485040">x</span><span class="op" id="5485041">,</span>&nbsp;<span class="ident" id="5485043">y</span>&nbsp;<span class="builtintype" id="5485045">int</span><span class="op" id="5485048">)</span>&nbsp;<span class="builtintype" id="5485050">int</span>&nbsp;<span class="op" id="5485054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485057">switch</span>&nbsp;<span class="ident" id="5485064"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485065">.</span><span class="ident" id="5485066">SubsampleRatio</span>&nbsp;<span class="op" id="5485081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485084">case</span>&nbsp;<span class="ident" id="5485089"><a href="/image/ycbcr.go.html#5483007">YCbCrSubsampleRatio422</a></span><span class="op" id="5485111">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485115">return</span>&nbsp;<span class="op" id="5485122">(</span><span class="ident" id="5485123"><a href="/image/ycbcr.go.html#5485043">y</a></span><span class="op" id="5485124">-</span><span class="ident" id="5485125"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485126">.</span><span class="ident" id="5485127">Rect</span><span class="op" id="5485131">.</span><span class="ident" id="5485132">Min</span><span class="op" id="5485135">.</span><span class="ident" id="5485136">Y</span><span class="op" id="5485137">)</span><span class="op" id="5485138">*</span><span class="ident" id="5485139"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485140">.</span><span class="ident" id="5485141">CStride</span>&nbsp;<span class="op" id="5485149">+</span>&nbsp;<span class="op" id="5485151">(</span><span class="ident" id="5485152"><a href="/image/ycbcr.go.html#5485040">x</a></span><span class="op" id="5485153">/</span><span class="num" id="5485154">2</span>&nbsp;<span class="op" id="5485156">-</span>&nbsp;<span class="ident" id="5485158"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485159">.</span><span class="ident" id="5485160">Rect</span><span class="op" id="5485164">.</span><span class="ident" id="5485165">Min</span><span class="op" id="5485168">.</span><span class="ident" id="5485169">X</span><span class="op" id="5485170">/</span><span class="num" id="5485171">2</span><span class="op" id="5485172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485175">case</span>&nbsp;<span class="ident" id="5485180"><a href="/image/ycbcr.go.html#5483031">YCbCrSubsampleRatio420</a></span><span class="op" id="5485202">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485206">return</span>&nbsp;<span class="op" id="5485213">(</span><span class="ident" id="5485214"><a href="/image/ycbcr.go.html#5485043">y</a></span><span class="op" id="5485215">/</span><span class="num" id="5485216">2</span><span class="op" id="5485217">-</span><span class="ident" id="5485218"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485219">.</span><span class="ident" id="5485220">Rect</span><span class="op" id="5485224">.</span><span class="ident" id="5485225">Min</span><span class="op" id="5485228">.</span><span class="ident" id="5485229">Y</span><span class="op" id="5485230">/</span><span class="num" id="5485231">2</span><span class="op" id="5485232">)</span><span class="op" id="5485233">*</span><span class="ident" id="5485234"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485235">.</span><span class="ident" id="5485236">CStride</span>&nbsp;<span class="op" id="5485244">+</span>&nbsp;<span class="op" id="5485246">(</span><span class="ident" id="5485247"><a href="/image/ycbcr.go.html#5485040">x</a></span><span class="op" id="5485248">/</span><span class="num" id="5485249">2</span>&nbsp;<span class="op" id="5485251">-</span>&nbsp;<span class="ident" id="5485253"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485254">.</span><span class="ident" id="5485255">Rect</span><span class="op" id="5485259">.</span><span class="ident" id="5485260">Min</span><span class="op" id="5485263">.</span><span class="ident" id="5485264">X</span><span class="op" id="5485265">/</span><span class="num" id="5485266">2</span><span class="op" id="5485267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485270">case</span>&nbsp;<span class="ident" id="5485275"><a href="/image/ycbcr.go.html#5483055">YCbCrSubsampleRatio440</a></span><span class="op" id="5485297">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485301">return</span>&nbsp;<span class="op" id="5485308">(</span><span class="ident" id="5485309"><a href="/image/ycbcr.go.html#5485043">y</a></span><span class="op" id="5485310">/</span><span class="num" id="5485311">2</span><span class="op" id="5485312">-</span><span class="ident" id="5485313"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485314">.</span><span class="ident" id="5485315">Rect</span><span class="op" id="5485319">.</span><span class="ident" id="5485320">Min</span><span class="op" id="5485323">.</span><span class="ident" id="5485324">Y</span><span class="op" id="5485325">/</span><span class="num" id="5485326">2</span><span class="op" id="5485327">)</span><span class="op" id="5485328">*</span><span class="ident" id="5485329"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485330">.</span><span class="ident" id="5485331">CStride</span>&nbsp;<span class="op" id="5485339">+</span>&nbsp;<span class="op" id="5485341">(</span><span class="ident" id="5485342"><a href="/image/ycbcr.go.html#5485040">x</a></span>&nbsp;<span class="op" id="5485344">-</span>&nbsp;<span class="ident" id="5485346"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485347">.</span><span class="ident" id="5485348">Rect</span><span class="op" id="5485352">.</span><span class="ident" id="5485353">Min</span><span class="op" id="5485356">.</span><span class="ident" id="5485357">X</span><span class="op" id="5485358">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5485361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5485364">//&nbsp;Default&nbsp;to&nbsp;4:4:4&nbsp;subsampling.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485398">return</span>&nbsp;<span class="op" id="5485405">(</span><span class="ident" id="5485406"><a href="/image/ycbcr.go.html#5485043">y</a></span><span class="op" id="5485407">-</span><span class="ident" id="5485408"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485409">.</span><span class="ident" id="5485410">Rect</span><span class="op" id="5485414">.</span><span class="ident" id="5485415">Min</span><span class="op" id="5485418">.</span><span class="ident" id="5485419">Y</span><span class="op" id="5485420">)</span><span class="op" id="5485421">*</span><span class="ident" id="5485422"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485423">.</span><span class="ident" id="5485424">CStride</span>&nbsp;<span class="op" id="5485432">+</span>&nbsp;<span class="op" id="5485434">(</span><span class="ident" id="5485435"><a href="/image/ycbcr.go.html#5485040">x</a></span>&nbsp;<span class="op" id="5485437">-</span>&nbsp;<span class="ident" id="5485439"><a href="/image/ycbcr.go.html#5485022">p</a></span><span class="op" id="5485440">.</span><span class="ident" id="5485441">Rect</span><span class="op" id="5485445">.</span><span class="ident" id="5485446">Min</span><span class="op" id="5485449">.</span><span class="ident" id="5485450">X</span><span class="op" id="5485451">)</span><br>
<span class="lineno"></span><span class="op" id="5485453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="5485456">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="5485533">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5485605">func</span>&nbsp;<span class="op" id="5485610">(</span><span class="ident" id="5485611">p</span>&nbsp;<span class="op" id="5485613">*</span><span class="ident" id="5485614"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5485619">)</span>&nbsp;<span class="ident" id="5485621">SubImage</span><span class="op" id="5485629">(</span><span class="ident" id="5485630">r</span>&nbsp;<span class="ident" id="5485632"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5485641">)</span>&nbsp;<span class="ident" id="5485643"><a href="/image/image.go.html#5457152">Image</a></span>&nbsp;<span class="op" id="5485649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5485652"><a href="/image/ycbcr.go.html#5485630">r</a></span>&nbsp;<span class="op" id="5485654">=</span>&nbsp;<span class="ident" id="5485656"><a href="/image/ycbcr.go.html#5485630">r</a></span><span class="op" id="5485657">.</span><span class="ident" id="5485658">Intersect</span><span class="op" id="5485667">(</span><span class="ident" id="5485668"><a href="/image/ycbcr.go.html#5485611">p</a></span><span class="op" id="5485669">.</span><span class="ident" id="5485670">Rect</span><span class="op" id="5485674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5485677">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5485758">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5485840">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485890">if</span>&nbsp;<span class="ident" id="5485893"><a href="/image/ycbcr.go.html#5485630">r</a></span><span class="op" id="5485894">.</span><span class="ident" id="5485895">Empty</span><span class="op" id="5485900">(</span><span class="op" id="5485901">)</span>&nbsp;<span class="op" id="5485903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485907">return</span>&nbsp;<span class="op" id="5485914">&amp;</span><span class="ident" id="5485915"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5485920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5485925">SubsampleRatio</span><span class="op" id="5485939">:</span>&nbsp;<span class="ident" id="5485941"><a href="/image/ycbcr.go.html#5485611">p</a></span><span class="op" id="5485942">.</span><span class="ident" id="5485943">SubsampleRatio</span><span class="op" id="5485957">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5485961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5485964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5485967">yi</span>&nbsp;<span class="op" id="5485970">:=</span>&nbsp;<span class="ident" id="5485973"><a href="/image/ycbcr.go.html#5485611">p</a></span><span class="op" id="5485974">.</span><span class="ident" id="5485975">YOffset</span><span class="op" id="5485982">(</span><span class="ident" id="5485983"><a href="/image/ycbcr.go.html#5485630">r</a></span><span class="op" id="5485984">.</span><span class="ident" id="5485985">Min</span><span class="op" id="5485988">.</span><span class="ident" id="5485989">X</span><span class="op" id="5485990">,</span>&nbsp;<span class="ident" id="5485992"><a href="/image/ycbcr.go.html#5485630">r</a></span><span class="op" id="5485993">.</span><span class="ident" id="5485994">Min</span><span class="op" id="5485997">.</span><span class="ident" id="5485998">Y</span><span class="op" id="5485999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486002">ci</span>&nbsp;<span class="op" id="5486005">:=</span>&nbsp;<span class="ident" id="5486008"><a href="/image/ycbcr.go.html#5485611">p</a></span><span class="op" id="5486009">.</span><span class="ident" id="5486010">COffset</span><span class="op" id="5486017">(</span><span class="ident" id="5486018"><a href="/image/ycbcr.go.html#5485630">r</a></span><span class="op" id="5486019">.</span><span class="ident" id="5486020">Min</span><span class="op" id="5486023">.</span><span class="ident" id="5486024">X</span><span class="op" id="5486025">,</span>&nbsp;<span class="ident" id="5486027"><a href="/image/ycbcr.go.html#5485630">r</a></span><span class="op" id="5486028">.</span><span class="ident" id="5486029">Min</span><span class="op" id="5486032">.</span><span class="ident" id="5486033">Y</span><span class="op" id="5486034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486037">return</span>&nbsp;<span class="op" id="5486044">&amp;</span><span class="ident" id="5486045"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5486050">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486054">Y</span><span class="op" id="5486055">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486070"><a href="/image/ycbcr.go.html#5485611">p</a></span><span class="op" id="5486071">.</span><span class="ident" id="5486072">Y</span><span class="op" id="5486073">[</span><span class="ident" id="5486074"><a href="/image/ycbcr.go.html#5485967">yi</a></span><span class="op" id="5486076">:</span><span class="op" id="5486077">]</span><span class="op" id="5486078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486082">Cb</span><span class="op" id="5486084">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486098"><a href="/image/ycbcr.go.html#5485611">p</a></span><span class="op" id="5486099">.</span><span class="ident" id="5486100">Cb</span><span class="op" id="5486102">[</span><span class="ident" id="5486103"><a href="/image/ycbcr.go.html#5486002">ci</a></span><span class="op" id="5486105">:</span><span class="op" id="5486106">]</span><span class="op" id="5486107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486111">Cr</span><span class="op" id="5486113">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486127"><a href="/image/ycbcr.go.html#5485611">p</a></span><span class="op" id="5486128">.</span><span class="ident" id="5486129">Cr</span><span class="op" id="5486131">[</span><span class="ident" id="5486132"><a href="/image/ycbcr.go.html#5486002">ci</a></span><span class="op" id="5486134">:</span><span class="op" id="5486135">]</span><span class="op" id="5486136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486140">SubsampleRatio</span><span class="op" id="5486154">:</span>&nbsp;<span class="ident" id="5486156"><a href="/image/ycbcr.go.html#5485611">p</a></span><span class="op" id="5486157">.</span><span class="ident" id="5486158">SubsampleRatio</span><span class="op" id="5486172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486176">YStride</span><span class="op" id="5486183">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486192"><a href="/image/ycbcr.go.html#5485611">p</a></span><span class="op" id="5486193">.</span><span class="ident" id="5486194">YStride</span><span class="op" id="5486201">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486205">CStride</span><span class="op" id="5486212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486221"><a href="/image/ycbcr.go.html#5485611">p</a></span><span class="op" id="5486222">.</span><span class="ident" id="5486223">CStride</span><span class="op" id="5486230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486234">Rect</span><span class="op" id="5486238">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486250"><a href="/image/ycbcr.go.html#5485630">r</a></span><span class="op" id="5486251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5486254">}</span><br>
<span class="lineno"></span><span class="op" id="5486256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5486259">func</span>&nbsp;<span class="op" id="5486264">(</span><span class="ident" id="5486265">p</span>&nbsp;<span class="op" id="5486267">*</span><span class="ident" id="5486268"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5486273">)</span>&nbsp;<span class="ident" id="5486275">Opaque</span><span class="op" id="5486281">(</span><span class="op" id="5486282">)</span>&nbsp;<span class="builtintype" id="5486284">bool</span>&nbsp;<span class="op" id="5486289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486292">return</span>&nbsp;<span class="ident" id="5486299">true</span><br>
<span class="lineno"></span><span class="op" id="5486304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5486307">//&nbsp;NewYCbCr&nbsp;returns&nbsp;a&nbsp;new&nbsp;YCbCr&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds&nbsp;and&nbsp;subsample&nbsp;ratio.</span><br>
<span class="lineno">130</span><span class="keyword" id="5486382">func</span>&nbsp;<span class="ident" id="5486387">NewYCbCr</span><span class="op" id="5486395">(</span><span class="ident" id="5486396">r</span>&nbsp;<span class="ident" id="5486398"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5486407">,</span>&nbsp;<span class="ident" id="5486409">subsampleRatio</span>&nbsp;<span class="ident" id="5486424"><a href="/image/ycbcr.go.html#5482922">YCbCrSubsampleRatio</a></span><span class="op" id="5486443">)</span>&nbsp;<span class="op" id="5486445">*</span><span class="ident" id="5486446"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span>&nbsp;<span class="op" id="5486452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486455">w</span><span class="op" id="5486456">,</span>&nbsp;<span class="ident" id="5486458">h</span><span class="op" id="5486459">,</span>&nbsp;<span class="ident" id="5486461">cw</span><span class="op" id="5486463">,</span>&nbsp;<span class="ident" id="5486465">ch</span>&nbsp;<span class="op" id="5486468">:=</span>&nbsp;<span class="ident" id="5486471"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5486472">.</span><span class="ident" id="5486473">Dx</span><span class="op" id="5486475">(</span><span class="op" id="5486476">)</span><span class="op" id="5486477">,</span>&nbsp;<span class="ident" id="5486479"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5486480">.</span><span class="ident" id="5486481">Dy</span><span class="op" id="5486483">(</span><span class="op" id="5486484">)</span><span class="op" id="5486485">,</span>&nbsp;<span class="num" id="5486487">0</span><span class="op" id="5486488">,</span>&nbsp;<span class="num" id="5486490">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486493">switch</span>&nbsp;<span class="ident" id="5486500"><a href="/image/ycbcr.go.html#5486409">subsampleRatio</a></span>&nbsp;<span class="op" id="5486515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486518">case</span>&nbsp;<span class="ident" id="5486523"><a href="/image/ycbcr.go.html#5483007">YCbCrSubsampleRatio422</a></span><span class="op" id="5486545">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486549"><a href="/image/ycbcr.go.html#5486461">cw</a></span>&nbsp;<span class="op" id="5486552">=</span>&nbsp;<span class="op" id="5486554">(</span><span class="ident" id="5486555"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5486556">.</span><span class="ident" id="5486557">Max</span><span class="op" id="5486560">.</span><span class="ident" id="5486561">X</span><span class="op" id="5486562">+</span><span class="num" id="5486563">1</span><span class="op" id="5486564">)</span><span class="op" id="5486565">/</span><span class="num" id="5486566">2</span>&nbsp;<span class="op" id="5486568">-</span>&nbsp;<span class="ident" id="5486570"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5486571">.</span><span class="ident" id="5486572">Min</span><span class="op" id="5486575">.</span><span class="ident" id="5486576">X</span><span class="op" id="5486577">/</span><span class="num" id="5486578">2</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486582"><a href="/image/ycbcr.go.html#5486465">ch</a></span>&nbsp;<span class="op" id="5486585">=</span>&nbsp;<span class="ident" id="5486587"><a href="/image/ycbcr.go.html#5486458">h</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486590">case</span>&nbsp;<span class="ident" id="5486595"><a href="/image/ycbcr.go.html#5483031">YCbCrSubsampleRatio420</a></span><span class="op" id="5486617">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486621"><a href="/image/ycbcr.go.html#5486461">cw</a></span>&nbsp;<span class="op" id="5486624">=</span>&nbsp;<span class="op" id="5486626">(</span><span class="ident" id="5486627"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5486628">.</span><span class="ident" id="5486629">Max</span><span class="op" id="5486632">.</span><span class="ident" id="5486633">X</span><span class="op" id="5486634">+</span><span class="num" id="5486635">1</span><span class="op" id="5486636">)</span><span class="op" id="5486637">/</span><span class="num" id="5486638">2</span>&nbsp;<span class="op" id="5486640">-</span>&nbsp;<span class="ident" id="5486642"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5486643">.</span><span class="ident" id="5486644">Min</span><span class="op" id="5486647">.</span><span class="ident" id="5486648">X</span><span class="op" id="5486649">/</span><span class="num" id="5486650">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486654"><a href="/image/ycbcr.go.html#5486465">ch</a></span>&nbsp;<span class="op" id="5486657">=</span>&nbsp;<span class="op" id="5486659">(</span><span class="ident" id="5486660"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5486661">.</span><span class="ident" id="5486662">Max</span><span class="op" id="5486665">.</span><span class="ident" id="5486666">Y</span><span class="op" id="5486667">+</span><span class="num" id="5486668">1</span><span class="op" id="5486669">)</span><span class="op" id="5486670">/</span><span class="num" id="5486671">2</span>&nbsp;<span class="op" id="5486673">-</span>&nbsp;<span class="ident" id="5486675"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5486676">.</span><span class="ident" id="5486677">Min</span><span class="op" id="5486680">.</span><span class="ident" id="5486681">Y</span><span class="op" id="5486682">/</span><span class="num" id="5486683">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486686">case</span>&nbsp;<span class="ident" id="5486691"><a href="/image/ycbcr.go.html#5483055">YCbCrSubsampleRatio440</a></span><span class="op" id="5486713">:</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486717"><a href="/image/ycbcr.go.html#5486461">cw</a></span>&nbsp;<span class="op" id="5486720">=</span>&nbsp;<span class="ident" id="5486722"><a href="/image/ycbcr.go.html#5486455">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486726"><a href="/image/ycbcr.go.html#5486465">ch</a></span>&nbsp;<span class="op" id="5486729">=</span>&nbsp;<span class="op" id="5486731">(</span><span class="ident" id="5486732"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5486733">.</span><span class="ident" id="5486734">Max</span><span class="op" id="5486737">.</span><span class="ident" id="5486738">Y</span><span class="op" id="5486739">+</span><span class="num" id="5486740">1</span><span class="op" id="5486741">)</span><span class="op" id="5486742">/</span><span class="num" id="5486743">2</span>&nbsp;<span class="op" id="5486745">-</span>&nbsp;<span class="ident" id="5486747"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5486748">.</span><span class="ident" id="5486749">Min</span><span class="op" id="5486752">.</span><span class="ident" id="5486753">Y</span><span class="op" id="5486754">/</span><span class="num" id="5486755">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486758">default</span><span class="op" id="5486765">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5486769">//&nbsp;Default&nbsp;to&nbsp;4:4:4&nbsp;subsampling.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486804"><a href="/image/ycbcr.go.html#5486461">cw</a></span>&nbsp;<span class="op" id="5486807">=</span>&nbsp;<span class="ident" id="5486809"><a href="/image/ycbcr.go.html#5486455">w</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486813"><a href="/image/ycbcr.go.html#5486465">ch</a></span>&nbsp;<span class="op" id="5486816">=</span>&nbsp;<span class="ident" id="5486818"><a href="/image/ycbcr.go.html#5486458">h</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5486821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486824">b</span>&nbsp;<span class="op" id="5486826">:=</span>&nbsp;<span class="builtinfunc" id="5486829">make</span><span class="op" id="5486833">(</span><span class="op" id="5486834">[</span><span class="op" id="5486835">]</span><span class="builtintype" id="5486836">byte</span><span class="op" id="5486840">,</span>&nbsp;<span class="ident" id="5486842"><a href="/image/ycbcr.go.html#5486455">w</a></span><span class="op" id="5486843">*</span><span class="ident" id="5486844"><a href="/image/ycbcr.go.html#5486458">h</a></span><span class="op" id="5486845">+</span><span class="num" id="5486846">2</span><span class="op" id="5486847">*</span><span class="ident" id="5486848"><a href="/image/ycbcr.go.html#5486461">cw</a></span><span class="op" id="5486850">*</span><span class="ident" id="5486851"><a href="/image/ycbcr.go.html#5486465">ch</a></span><span class="op" id="5486853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486856">return</span>&nbsp;<span class="op" id="5486863">&amp;</span><span class="ident" id="5486864"><a href="/image/ycbcr.go.html#5484158">YCbCr</a></span><span class="op" id="5486869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486873">Y</span><span class="op" id="5486874">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486889"><a href="/image/ycbcr.go.html#5486824">b</a></span><span class="op" id="5486890">[</span><span class="op" id="5486891">:</span><span class="ident" id="5486892"><a href="/image/ycbcr.go.html#5486455">w</a></span><span class="op" id="5486893">*</span><span class="ident" id="5486894"><a href="/image/ycbcr.go.html#5486458">h</a></span><span class="op" id="5486895">]</span><span class="op" id="5486896">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486900">Cb</span><span class="op" id="5486902">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486916"><a href="/image/ycbcr.go.html#5486824">b</a></span><span class="op" id="5486917">[</span><span class="ident" id="5486918"><a href="/image/ycbcr.go.html#5486455">w</a></span><span class="op" id="5486919">*</span><span class="ident" id="5486920"><a href="/image/ycbcr.go.html#5486458">h</a></span><span class="op" id="5486921">+</span><span class="num" id="5486922">0</span><span class="op" id="5486923">*</span><span class="ident" id="5486924"><a href="/image/ycbcr.go.html#5486461">cw</a></span><span class="op" id="5486926">*</span><span class="ident" id="5486927"><a href="/image/ycbcr.go.html#5486465">ch</a></span>&nbsp;<span class="op" id="5486930">:</span>&nbsp;<span class="ident" id="5486932"><a href="/image/ycbcr.go.html#5486455">w</a></span><span class="op" id="5486933">*</span><span class="ident" id="5486934"><a href="/image/ycbcr.go.html#5486458">h</a></span><span class="op" id="5486935">+</span><span class="num" id="5486936">1</span><span class="op" id="5486937">*</span><span class="ident" id="5486938"><a href="/image/ycbcr.go.html#5486461">cw</a></span><span class="op" id="5486940">*</span><span class="ident" id="5486941"><a href="/image/ycbcr.go.html#5486465">ch</a></span><span class="op" id="5486943">]</span><span class="op" id="5486944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486948">Cr</span><span class="op" id="5486950">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486964"><a href="/image/ycbcr.go.html#5486824">b</a></span><span class="op" id="5486965">[</span><span class="ident" id="5486966"><a href="/image/ycbcr.go.html#5486455">w</a></span><span class="op" id="5486967">*</span><span class="ident" id="5486968"><a href="/image/ycbcr.go.html#5486458">h</a></span><span class="op" id="5486969">+</span><span class="num" id="5486970">1</span><span class="op" id="5486971">*</span><span class="ident" id="5486972"><a href="/image/ycbcr.go.html#5486461">cw</a></span><span class="op" id="5486974">*</span><span class="ident" id="5486975"><a href="/image/ycbcr.go.html#5486465">ch</a></span>&nbsp;<span class="op" id="5486978">:</span>&nbsp;<span class="ident" id="5486980"><a href="/image/ycbcr.go.html#5486455">w</a></span><span class="op" id="5486981">*</span><span class="ident" id="5486982"><a href="/image/ycbcr.go.html#5486458">h</a></span><span class="op" id="5486983">+</span><span class="num" id="5486984">2</span><span class="op" id="5486985">*</span><span class="ident" id="5486986"><a href="/image/ycbcr.go.html#5486461">cw</a></span><span class="op" id="5486988">*</span><span class="ident" id="5486989"><a href="/image/ycbcr.go.html#5486465">ch</a></span><span class="op" id="5486991">]</span><span class="op" id="5486992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486996">SubsampleRatio</span><span class="op" id="5487010">:</span>&nbsp;<span class="ident" id="5487012"><a href="/image/ycbcr.go.html#5486409">subsampleRatio</a></span><span class="op" id="5487026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5487030">YStride</span><span class="op" id="5487037">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487046"><a href="/image/ycbcr.go.html#5486455">w</a></span><span class="op" id="5487047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5487051">CStride</span><span class="op" id="5487058">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487067"><a href="/image/ycbcr.go.html#5486461">cw</a></span><span class="op" id="5487069">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5487073">Rect</span><span class="op" id="5487077">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487089"><a href="/image/ycbcr.go.html#5486396">r</a></span><span class="op" id="5487090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5487093">}</span><br>
<span class="lineno"></span><span class="op" id="5487095">}</span>
</div>
</body>
</html>
