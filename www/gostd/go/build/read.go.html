<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html" class="current">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5741823">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5741879">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5741933">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5741984">package</span>&nbsp;<span class="ident" id="5741992">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5741999">import</span>&nbsp;<span class="op" id="5742006">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5742009">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5742018">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5742028">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5742033">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5742036">type</span>&nbsp;<span class="ident" id="5742041">importReader</span>&nbsp;<span class="keyword" id="5742054">struct</span>&nbsp;<span class="op" id="5742061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742064">b</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742069">*</span><span class="ident" id="5742070">bufio</span><span class="op" id="5742075">.</span><span class="ident" id="5742076">Reader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742084">buf</span>&nbsp;&nbsp;<span class="op" id="5742089">[</span><span class="op" id="5742090">]</span><span class="builtintype" id="5742091">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742097">peek</span>&nbsp;<span class="builtintype" id="5742102">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742108">err</span>&nbsp;&nbsp;<span class="builtintype" id="5742113">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742120">eof</span>&nbsp;&nbsp;<span class="builtintype" id="5742125">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742131">nerr</span>&nbsp;<span class="builtintype" id="5742136">int</span><br>
<span class="lineno">20</span><span class="op" id="5742140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5742143">func</span>&nbsp;<span class="ident" id="5742148">isIdent</span><span class="op" id="5742155">(</span><span class="ident" id="5742156">c</span>&nbsp;<span class="builtintype" id="5742158">byte</span><span class="op" id="5742162">)</span>&nbsp;<span class="builtintype" id="5742164">bool</span>&nbsp;<span class="op" id="5742169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742172">return</span>&nbsp;<span class="string" id="5742179">&#39;A&#39;</span>&nbsp;<span class="op" id="5742183">&lt;=</span>&nbsp;<span class="ident" id="5742186">c</span>&nbsp;<span class="op" id="5742188">&amp;&amp;</span>&nbsp;<span class="ident" id="5742191">c</span>&nbsp;<span class="op" id="5742193">&lt;=</span>&nbsp;<span class="string" id="5742196">&#39;Z&#39;</span>&nbsp;<span class="op" id="5742200">||</span>&nbsp;<span class="string" id="5742203">&#39;a&#39;</span>&nbsp;<span class="op" id="5742207">&lt;=</span>&nbsp;<span class="ident" id="5742210">c</span>&nbsp;<span class="op" id="5742212">&amp;&amp;</span>&nbsp;<span class="ident" id="5742215">c</span>&nbsp;<span class="op" id="5742217">&lt;=</span>&nbsp;<span class="string" id="5742220">&#39;z&#39;</span>&nbsp;<span class="op" id="5742224">||</span>&nbsp;<span class="string" id="5742227">&#39;0&#39;</span>&nbsp;<span class="op" id="5742231">&lt;=</span>&nbsp;<span class="ident" id="5742234">c</span>&nbsp;<span class="op" id="5742236">&amp;&amp;</span>&nbsp;<span class="ident" id="5742239">c</span>&nbsp;<span class="op" id="5742241">&lt;=</span>&nbsp;<span class="string" id="5742244">&#39;9&#39;</span>&nbsp;<span class="op" id="5742248">||</span>&nbsp;<span class="ident" id="5742251">c</span>&nbsp;<span class="op" id="5742253">==</span>&nbsp;<span class="string" id="5742256">&#39;_&#39;</span>&nbsp;<span class="op" id="5742260">||</span>&nbsp;<span class="ident" id="5742263">c</span>&nbsp;<span class="op" id="5742265">&gt;=</span>&nbsp;<span class="num" id="5742268">0x80</span><br>
<span class="lineno"></span><span class="op" id="5742273">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5742276">var</span>&nbsp;<span class="op" id="5742280">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742283">errSyntax</span>&nbsp;<span class="op" id="5742293">=</span>&nbsp;<span class="ident" id="5742295">errors</span><span class="op" id="5742301">.</span><span class="ident" id="5742302">New</span><span class="op" id="5742305">(</span><span class="string" id="5742306">&#34;syntax&nbsp;error&#34;</span><span class="op" id="5742320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742323">errNUL</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742333">=</span>&nbsp;<span class="ident" id="5742335">errors</span><span class="op" id="5742341">.</span><span class="ident" id="5742342">New</span><span class="op" id="5742345">(</span><span class="string" id="5742346">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="5742371">)</span><br>
<span class="lineno"></span><span class="op" id="5742373">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="5742376">//&nbsp;syntaxError&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;but&nbsp;only&nbsp;if&nbsp;an&nbsp;I/O&nbsp;error&nbsp;has&nbsp;not&nbsp;already&nbsp;been&nbsp;recorded.</span><br>
<span class="lineno"></span><span class="keyword" id="5742471">func</span>&nbsp;<span class="op" id="5742476">(</span><span class="ident" id="5742477">r</span>&nbsp;<span class="op" id="5742479">*</span><span class="ident" id="5742480">importReader</span><span class="op" id="5742492">)</span>&nbsp;<span class="ident" id="5742494">syntaxError</span><span class="op" id="5742505">(</span><span class="op" id="5742506">)</span>&nbsp;<span class="op" id="5742508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742511">if</span>&nbsp;<span class="ident" id="5742514">r</span><span class="op" id="5742515">.</span><span class="ident" id="5742516">err</span>&nbsp;<span class="op" id="5742520">==</span>&nbsp;<span class="builtintype" id="5742523">nil</span>&nbsp;<span class="op" id="5742527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742531">r</span><span class="op" id="5742532">.</span><span class="ident" id="5742533">err</span>&nbsp;<span class="op" id="5742537">=</span>&nbsp;<span class="ident" id="5742539">errSyntax</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742550">}</span><br>
<span class="lineno"></span><span class="op" id="5742552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5742555">//&nbsp;readByte&nbsp;reads&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;saves&nbsp;it&nbsp;in&nbsp;buf,&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="5742636">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;readByte&nbsp;records&nbsp;the&nbsp;error&nbsp;in&nbsp;r.err&nbsp;and&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="keyword" id="5742710">func</span>&nbsp;<span class="op" id="5742715">(</span><span class="ident" id="5742716">r</span>&nbsp;<span class="op" id="5742718">*</span><span class="ident" id="5742719">importReader</span><span class="op" id="5742731">)</span>&nbsp;<span class="ident" id="5742733">readByte</span><span class="op" id="5742741">(</span><span class="op" id="5742742">)</span>&nbsp;<span class="builtintype" id="5742744">byte</span>&nbsp;<span class="op" id="5742749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742752">c</span><span class="op" id="5742753">,</span>&nbsp;<span class="ident" id="5742755">err</span>&nbsp;<span class="op" id="5742759">:=</span>&nbsp;<span class="ident" id="5742762">r</span><span class="op" id="5742763">.</span><span class="ident" id="5742764">b</span><span class="op" id="5742765">.</span><span class="ident" id="5742766">ReadByte</span><span class="op" id="5742774">(</span><span class="op" id="5742775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742778">if</span>&nbsp;<span class="ident" id="5742781">err</span>&nbsp;<span class="op" id="5742785">==</span>&nbsp;<span class="builtintype" id="5742788">nil</span>&nbsp;<span class="op" id="5742792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742796">r</span><span class="op" id="5742797">.</span><span class="ident" id="5742798">buf</span>&nbsp;<span class="op" id="5742802">=</span>&nbsp;<span class="builtinfunc" id="5742804">append</span><span class="op" id="5742810">(</span><span class="ident" id="5742811">r</span><span class="op" id="5742812">.</span><span class="ident" id="5742813">buf</span><span class="op" id="5742816">,</span>&nbsp;<span class="ident" id="5742818">c</span><span class="op" id="5742819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742823">if</span>&nbsp;<span class="ident" id="5742826">c</span>&nbsp;<span class="op" id="5742828">==</span>&nbsp;<span class="num" id="5742831">0</span>&nbsp;<span class="op" id="5742833">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742838">err</span>&nbsp;<span class="op" id="5742842">=</span>&nbsp;<span class="ident" id="5742844">errNUL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742859">if</span>&nbsp;<span class="ident" id="5742862">err</span>&nbsp;<span class="op" id="5742866">!=</span>&nbsp;<span class="builtintype" id="5742869">nil</span>&nbsp;<span class="op" id="5742873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742877">if</span>&nbsp;<span class="ident" id="5742880">err</span>&nbsp;<span class="op" id="5742884">==</span>&nbsp;<span class="ident" id="5742887">io</span><span class="op" id="5742889">.</span><span class="ident" id="5742890">EOF</span>&nbsp;<span class="op" id="5742894">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742899">r</span><span class="op" id="5742900">.</span><span class="ident" id="5742901">eof</span>&nbsp;<span class="op" id="5742905">=</span>&nbsp;<span class="builtintype" id="5742907">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742914">}</span>&nbsp;<span class="keyword" id="5742916">else</span>&nbsp;<span class="keyword" id="5742921">if</span>&nbsp;<span class="ident" id="5742924">r</span><span class="op" id="5742925">.</span><span class="ident" id="5742926">err</span>&nbsp;<span class="op" id="5742930">==</span>&nbsp;<span class="builtintype" id="5742933">nil</span>&nbsp;<span class="op" id="5742937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742942">r</span><span class="op" id="5742943">.</span><span class="ident" id="5742944">err</span>&nbsp;<span class="op" id="5742948">=</span>&nbsp;<span class="ident" id="5742950">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742960">c</span>&nbsp;<span class="op" id="5742962">=</span>&nbsp;<span class="num" id="5742964">0</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742970">return</span>&nbsp;<span class="ident" id="5742977">c</span><br>
<span class="lineno"></span><span class="op" id="5742979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5742982">//&nbsp;peekByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input&nbsp;reader&nbsp;but&nbsp;does&nbsp;not&nbsp;advance&nbsp;beyond&nbsp;it.</span><br>
<span class="lineno">60</span><span class="comment" id="5743070">//&nbsp;If&nbsp;skipSpace&nbsp;is&nbsp;set,&nbsp;peekByte&nbsp;skips&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;comments.</span><br>
<span class="lineno"></span><span class="keyword" id="5743138">func</span>&nbsp;<span class="op" id="5743143">(</span><span class="ident" id="5743144">r</span>&nbsp;<span class="op" id="5743146">*</span><span class="ident" id="5743147">importReader</span><span class="op" id="5743159">)</span>&nbsp;<span class="ident" id="5743161">peekByte</span><span class="op" id="5743169">(</span><span class="ident" id="5743170">skipSpace</span>&nbsp;<span class="builtintype" id="5743180">bool</span><span class="op" id="5743184">)</span>&nbsp;<span class="builtintype" id="5743186">byte</span>&nbsp;<span class="op" id="5743191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743194">if</span>&nbsp;<span class="ident" id="5743197">r</span><span class="op" id="5743198">.</span><span class="ident" id="5743199">err</span>&nbsp;<span class="op" id="5743203">!=</span>&nbsp;<span class="builtintype" id="5743206">nil</span>&nbsp;<span class="op" id="5743210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743214">if</span>&nbsp;<span class="ident" id="5743217">r</span><span class="op" id="5743218">.</span><span class="ident" id="5743219">nerr</span><span class="op" id="5743223">++</span><span class="op" id="5743225">;</span>&nbsp;<span class="ident" id="5743227">r</span><span class="op" id="5743228">.</span><span class="ident" id="5743229">nerr</span>&nbsp;<span class="op" id="5743234">&gt;</span>&nbsp;<span class="num" id="5743236">10000</span>&nbsp;<span class="op" id="5743242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5743247">panic</span><span class="op" id="5743252">(</span><span class="string" id="5743253">&#34;go/build:&nbsp;import&nbsp;reader&nbsp;looping&#34;</span><span class="op" id="5743286">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743294">return</span>&nbsp;<span class="num" id="5743301">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5743308">//&nbsp;Use&nbsp;r.peek&nbsp;as&nbsp;first&nbsp;input&nbsp;byte.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5743344">//&nbsp;Don&#39;t&nbsp;just&nbsp;return&nbsp;r.peek&nbsp;here:&nbsp;it&nbsp;might&nbsp;have&nbsp;been&nbsp;left&nbsp;by&nbsp;peekByte(false)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5743422">//&nbsp;and&nbsp;this&nbsp;might&nbsp;be&nbsp;peekByte(true).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743460">c</span>&nbsp;<span class="op" id="5743462">:=</span>&nbsp;<span class="ident" id="5743465">r</span><span class="op" id="5743466">.</span><span class="ident" id="5743467">peek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743473">if</span>&nbsp;<span class="ident" id="5743476">c</span>&nbsp;<span class="op" id="5743478">==</span>&nbsp;<span class="num" id="5743481">0</span>&nbsp;<span class="op" id="5743483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743487">c</span>&nbsp;<span class="op" id="5743489">=</span>&nbsp;<span class="ident" id="5743491">r</span><span class="op" id="5743492">.</span><span class="ident" id="5743493">readByte</span><span class="op" id="5743501">(</span><span class="op" id="5743502">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743508">for</span>&nbsp;<span class="ident" id="5743512">r</span><span class="op" id="5743513">.</span><span class="ident" id="5743514">err</span>&nbsp;<span class="op" id="5743518">==</span>&nbsp;<span class="builtintype" id="5743521">nil</span>&nbsp;<span class="op" id="5743525">&amp;&amp;</span>&nbsp;<span class="op" id="5743528">!</span><span class="ident" id="5743529">r</span><span class="op" id="5743530">.</span><span class="ident" id="5743531">eof</span>&nbsp;<span class="op" id="5743535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743539">if</span>&nbsp;<span class="ident" id="5743542">skipSpace</span>&nbsp;<span class="op" id="5743552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5743557">//&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;reader,&nbsp;semicolons&nbsp;are&nbsp;never&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5743630">//&nbsp;understand&nbsp;the&nbsp;input&nbsp;and&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743684">switch</span>&nbsp;<span class="ident" id="5743691">c</span>&nbsp;<span class="op" id="5743693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743698">case</span>&nbsp;<span class="string" id="5743703">&#39;&nbsp;&#39;</span><span class="op" id="5743706">,</span>&nbsp;<span class="string" id="5743708">&#39;\f&#39;</span><span class="op" id="5743712">,</span>&nbsp;<span class="string" id="5743714">&#39;\t&#39;</span><span class="op" id="5743718">,</span>&nbsp;<span class="string" id="5743720">&#39;\r&#39;</span><span class="op" id="5743724">,</span>&nbsp;<span class="string" id="5743726">&#39;\n&#39;</span><span class="op" id="5743730">,</span>&nbsp;<span class="string" id="5743732">&#39;;&#39;</span><span class="op" id="5743735">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743741">c</span>&nbsp;<span class="op" id="5743743">=</span>&nbsp;<span class="ident" id="5743745">r</span><span class="op" id="5743746">.</span><span class="ident" id="5743747">readByte</span><span class="op" id="5743755">(</span><span class="op" id="5743756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743762">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743775">case</span>&nbsp;<span class="string" id="5743780">&#39;/&#39;</span><span class="op" id="5743783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743789">c</span>&nbsp;<span class="op" id="5743791">=</span>&nbsp;<span class="ident" id="5743793">r</span><span class="op" id="5743794">.</span><span class="ident" id="5743795">readByte</span><span class="op" id="5743803">(</span><span class="op" id="5743804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743810">if</span>&nbsp;<span class="ident" id="5743813">c</span>&nbsp;<span class="op" id="5743815">==</span>&nbsp;<span class="string" id="5743818">&#39;/&#39;</span>&nbsp;<span class="op" id="5743822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743829">for</span>&nbsp;<span class="ident" id="5743833">c</span>&nbsp;<span class="op" id="5743835">!=</span>&nbsp;<span class="string" id="5743838">&#39;\n&#39;</span>&nbsp;<span class="op" id="5743843">&amp;&amp;</span>&nbsp;<span class="ident" id="5743846">r</span><span class="op" id="5743847">.</span><span class="ident" id="5743848">err</span>&nbsp;<span class="op" id="5743852">==</span>&nbsp;<span class="builtintype" id="5743855">nil</span>&nbsp;<span class="op" id="5743859">&amp;&amp;</span>&nbsp;<span class="op" id="5743862">!</span><span class="ident" id="5743863">r</span><span class="op" id="5743864">.</span><span class="ident" id="5743865">eof</span>&nbsp;<span class="op" id="5743869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743877">c</span>&nbsp;<span class="op" id="5743879">=</span>&nbsp;<span class="ident" id="5743881">r</span><span class="op" id="5743882">.</span><span class="ident" id="5743883">readByte</span><span class="op" id="5743891">(</span><span class="op" id="5743892">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743905">}</span>&nbsp;<span class="keyword" id="5743907">else</span>&nbsp;<span class="keyword" id="5743912">if</span>&nbsp;<span class="ident" id="5743915">c</span>&nbsp;<span class="op" id="5743917">==</span>&nbsp;<span class="string" id="5743920">&#39;*&#39;</span>&nbsp;<span class="op" id="5743924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743931">var</span>&nbsp;<span class="ident" id="5743935">c1</span>&nbsp;<span class="builtintype" id="5743938">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743948">for</span>&nbsp;<span class="op" id="5743952">(</span><span class="ident" id="5743953">c</span>&nbsp;<span class="op" id="5743955">!=</span>&nbsp;<span class="string" id="5743958">&#39;*&#39;</span>&nbsp;<span class="op" id="5743962">||</span>&nbsp;<span class="ident" id="5743965">c1</span>&nbsp;<span class="op" id="5743968">!=</span>&nbsp;<span class="string" id="5743971">&#39;/&#39;</span><span class="op" id="5743974">)</span>&nbsp;<span class="op" id="5743976">&amp;&amp;</span>&nbsp;<span class="ident" id="5743979">r</span><span class="op" id="5743980">.</span><span class="ident" id="5743981">err</span>&nbsp;<span class="op" id="5743985">==</span>&nbsp;<span class="builtintype" id="5743988">nil</span>&nbsp;<span class="op" id="5743992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744000">if</span>&nbsp;<span class="ident" id="5744003">r</span><span class="op" id="5744004">.</span><span class="ident" id="5744005">eof</span>&nbsp;<span class="op" id="5744009">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744018">r</span><span class="op" id="5744019">.</span><span class="ident" id="5744020">syntaxError</span><span class="op" id="5744031">(</span><span class="op" id="5744032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744048">c</span><span class="op" id="5744049">,</span>&nbsp;<span class="ident" id="5744051">c1</span>&nbsp;<span class="op" id="5744054">=</span>&nbsp;<span class="ident" id="5744056">c1</span><span class="op" id="5744058">,</span>&nbsp;<span class="ident" id="5744060">r</span><span class="op" id="5744061">.</span><span class="ident" id="5744062">readByte</span><span class="op" id="5744070">(</span><span class="op" id="5744071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744084">}</span>&nbsp;<span class="keyword" id="5744086">else</span>&nbsp;<span class="op" id="5744091">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744098">r</span><span class="op" id="5744099">.</span><span class="ident" id="5744100">syntaxError</span><span class="op" id="5744111">(</span><span class="op" id="5744112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744124">c</span>&nbsp;<span class="op" id="5744126">=</span>&nbsp;<span class="ident" id="5744128">r</span><span class="op" id="5744129">.</span><span class="ident" id="5744130">readByte</span><span class="op" id="5744138">(</span><span class="op" id="5744139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744145">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744157">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744165">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744175">r</span><span class="op" id="5744176">.</span><span class="ident" id="5744177">peek</span>&nbsp;<span class="op" id="5744182">=</span>&nbsp;<span class="ident" id="5744184">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744187">return</span>&nbsp;<span class="ident" id="5744194">r</span><span class="op" id="5744195">.</span><span class="ident" id="5744196">peek</span><br>
<span class="lineno">110</span><span class="op" id="5744201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5744204">//&nbsp;nextByte&nbsp;is&nbsp;like&nbsp;peekByte&nbsp;but&nbsp;advances&nbsp;beyond&nbsp;the&nbsp;returned&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="5744272">func</span>&nbsp;<span class="op" id="5744277">(</span><span class="ident" id="5744278">r</span>&nbsp;<span class="op" id="5744280">*</span><span class="ident" id="5744281">importReader</span><span class="op" id="5744293">)</span>&nbsp;<span class="ident" id="5744295">nextByte</span><span class="op" id="5744303">(</span><span class="ident" id="5744304">skipSpace</span>&nbsp;<span class="builtintype" id="5744314">bool</span><span class="op" id="5744318">)</span>&nbsp;<span class="builtintype" id="5744320">byte</span>&nbsp;<span class="op" id="5744325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744328">c</span>&nbsp;<span class="op" id="5744330">:=</span>&nbsp;<span class="ident" id="5744333">r</span><span class="op" id="5744334">.</span><span class="ident" id="5744335">peekByte</span><span class="op" id="5744343">(</span><span class="ident" id="5744344">skipSpace</span><span class="op" id="5744353">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744356">r</span><span class="op" id="5744357">.</span><span class="ident" id="5744358">peek</span>&nbsp;<span class="op" id="5744363">=</span>&nbsp;<span class="num" id="5744365">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744368">return</span>&nbsp;<span class="ident" id="5744375">c</span><br>
<span class="lineno"></span><span class="op" id="5744377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5744380">//&nbsp;readKeyword&nbsp;reads&nbsp;the&nbsp;given&nbsp;keyword&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">120</span><span class="comment" id="5744435">//&nbsp;If&nbsp;the&nbsp;keyword&nbsp;is&nbsp;not&nbsp;present,&nbsp;readKeyword&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5744505">func</span>&nbsp;<span class="op" id="5744510">(</span><span class="ident" id="5744511">r</span>&nbsp;<span class="op" id="5744513">*</span><span class="ident" id="5744514">importReader</span><span class="op" id="5744526">)</span>&nbsp;<span class="ident" id="5744528">readKeyword</span><span class="op" id="5744539">(</span><span class="ident" id="5744540">kw</span>&nbsp;<span class="builtintype" id="5744543">string</span><span class="op" id="5744549">)</span>&nbsp;<span class="op" id="5744551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744554">r</span><span class="op" id="5744555">.</span><span class="ident" id="5744556">peekByte</span><span class="op" id="5744564">(</span><span class="builtintype" id="5744565">true</span><span class="op" id="5744569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744572">for</span>&nbsp;<span class="ident" id="5744576">i</span>&nbsp;<span class="op" id="5744578">:=</span>&nbsp;<span class="num" id="5744581">0</span><span class="op" id="5744582">;</span>&nbsp;<span class="ident" id="5744584">i</span>&nbsp;<span class="op" id="5744586">&lt;</span>&nbsp;<span class="builtinfunc" id="5744588">len</span><span class="op" id="5744591">(</span><span class="ident" id="5744592">kw</span><span class="op" id="5744594">)</span><span class="op" id="5744595">;</span>&nbsp;<span class="ident" id="5744597">i</span><span class="op" id="5744598">++</span>&nbsp;<span class="op" id="5744601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744605">if</span>&nbsp;<span class="ident" id="5744608">r</span><span class="op" id="5744609">.</span><span class="ident" id="5744610">nextByte</span><span class="op" id="5744618">(</span><span class="builtintype" id="5744619">false</span><span class="op" id="5744624">)</span>&nbsp;<span class="op" id="5744626">!=</span>&nbsp;<span class="ident" id="5744629">kw</span><span class="op" id="5744631">[</span><span class="ident" id="5744632">i</span><span class="op" id="5744633">]</span>&nbsp;<span class="op" id="5744635">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744640">r</span><span class="op" id="5744641">.</span><span class="ident" id="5744642">syntaxError</span><span class="op" id="5744653">(</span><span class="op" id="5744654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744659">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744674">if</span>&nbsp;<span class="ident" id="5744677">isIdent</span><span class="op" id="5744684">(</span><span class="ident" id="5744685">r</span><span class="op" id="5744686">.</span><span class="ident" id="5744687">peekByte</span><span class="op" id="5744695">(</span><span class="builtintype" id="5744696">false</span><span class="op" id="5744701">)</span><span class="op" id="5744702">)</span>&nbsp;<span class="op" id="5744704">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744708">r</span><span class="op" id="5744709">.</span><span class="ident" id="5744710">syntaxError</span><span class="op" id="5744721">(</span><span class="op" id="5744722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744725">}</span><br>
<span class="lineno"></span><span class="op" id="5744727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5744730">//&nbsp;readIdent&nbsp;reads&nbsp;an&nbsp;identifier&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">135</span><span class="comment" id="5744779">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readIdent&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5744849">func</span>&nbsp;<span class="op" id="5744854">(</span><span class="ident" id="5744855">r</span>&nbsp;<span class="op" id="5744857">*</span><span class="ident" id="5744858">importReader</span><span class="op" id="5744870">)</span>&nbsp;<span class="ident" id="5744872">readIdent</span><span class="op" id="5744881">(</span><span class="op" id="5744882">)</span>&nbsp;<span class="op" id="5744884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744887">c</span>&nbsp;<span class="op" id="5744889">:=</span>&nbsp;<span class="ident" id="5744892">r</span><span class="op" id="5744893">.</span><span class="ident" id="5744894">peekByte</span><span class="op" id="5744902">(</span><span class="builtintype" id="5744903">true</span><span class="op" id="5744907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744910">if</span>&nbsp;<span class="op" id="5744913">!</span><span class="ident" id="5744914">isIdent</span><span class="op" id="5744921">(</span><span class="ident" id="5744922">c</span><span class="op" id="5744923">)</span>&nbsp;<span class="op" id="5744925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744929">r</span><span class="op" id="5744930">.</span><span class="ident" id="5744931">syntaxError</span><span class="op" id="5744942">(</span><span class="op" id="5744943">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744947">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744958">for</span>&nbsp;<span class="ident" id="5744962">isIdent</span><span class="op" id="5744969">(</span><span class="ident" id="5744970">r</span><span class="op" id="5744971">.</span><span class="ident" id="5744972">peekByte</span><span class="op" id="5744980">(</span><span class="builtintype" id="5744981">false</span><span class="op" id="5744986">)</span><span class="op" id="5744987">)</span>&nbsp;<span class="op" id="5744989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744993">r</span><span class="op" id="5744994">.</span><span class="ident" id="5744995">peek</span>&nbsp;<span class="op" id="5745000">=</span>&nbsp;<span class="num" id="5745002">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745005">}</span><br>
<span class="lineno">145</span><span class="op" id="5745007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5745010">//&nbsp;readString&nbsp;reads&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="5745070">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readString&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5745141">func</span>&nbsp;<span class="op" id="5745146">(</span><span class="ident" id="5745147">r</span>&nbsp;<span class="op" id="5745149">*</span><span class="ident" id="5745150">importReader</span><span class="op" id="5745162">)</span>&nbsp;<span class="ident" id="5745164">readString</span><span class="op" id="5745174">(</span><span class="op" id="5745175">)</span>&nbsp;<span class="op" id="5745177">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745180">switch</span>&nbsp;<span class="ident" id="5745187">r</span><span class="op" id="5745188">.</span><span class="ident" id="5745189">nextByte</span><span class="op" id="5745197">(</span><span class="builtintype" id="5745198">true</span><span class="op" id="5745202">)</span>&nbsp;<span class="op" id="5745204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745207">case</span>&nbsp;<span class="string" id="5745212">&#39;`&#39;</span><span class="op" id="5745215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745219">for</span>&nbsp;<span class="ident" id="5745223">r</span><span class="op" id="5745224">.</span><span class="ident" id="5745225">err</span>&nbsp;<span class="op" id="5745229">==</span>&nbsp;<span class="builtintype" id="5745232">nil</span>&nbsp;<span class="op" id="5745236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745241">if</span>&nbsp;<span class="ident" id="5745244">r</span><span class="op" id="5745245">.</span><span class="ident" id="5745246">nextByte</span><span class="op" id="5745254">(</span><span class="builtintype" id="5745255">false</span><span class="op" id="5745260">)</span>&nbsp;<span class="op" id="5745262">==</span>&nbsp;<span class="string" id="5745265">&#39;`&#39;</span>&nbsp;<span class="op" id="5745269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745275">break</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745289">if</span>&nbsp;<span class="ident" id="5745292">r</span><span class="op" id="5745293">.</span><span class="ident" id="5745294">eof</span>&nbsp;<span class="op" id="5745298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745304">r</span><span class="op" id="5745305">.</span><span class="ident" id="5745306">syntaxError</span><span class="op" id="5745317">(</span><span class="op" id="5745318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745327">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745330">case</span>&nbsp;<span class="string" id="5745335">&#39;&#34;&#39;</span><span class="op" id="5745338">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745342">for</span>&nbsp;<span class="ident" id="5745346">r</span><span class="op" id="5745347">.</span><span class="ident" id="5745348">err</span>&nbsp;<span class="op" id="5745352">==</span>&nbsp;<span class="builtintype" id="5745355">nil</span>&nbsp;<span class="op" id="5745359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745364">c</span>&nbsp;<span class="op" id="5745366">:=</span>&nbsp;<span class="ident" id="5745369">r</span><span class="op" id="5745370">.</span><span class="ident" id="5745371">nextByte</span><span class="op" id="5745379">(</span><span class="builtintype" id="5745380">false</span><span class="op" id="5745385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745390">if</span>&nbsp;<span class="ident" id="5745393">c</span>&nbsp;<span class="op" id="5745395">==</span>&nbsp;<span class="string" id="5745398">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5745402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745408">break</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745422">if</span>&nbsp;<span class="ident" id="5745425">r</span><span class="op" id="5745426">.</span><span class="ident" id="5745427">eof</span>&nbsp;<span class="op" id="5745431">||</span>&nbsp;<span class="ident" id="5745434">c</span>&nbsp;<span class="op" id="5745436">==</span>&nbsp;<span class="string" id="5745439">&#39;\n&#39;</span>&nbsp;<span class="op" id="5745444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745450">r</span><span class="op" id="5745451">.</span><span class="ident" id="5745452">syntaxError</span><span class="op" id="5745463">(</span><span class="op" id="5745464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745474">if</span>&nbsp;<span class="ident" id="5745477">c</span>&nbsp;<span class="op" id="5745479">==</span>&nbsp;<span class="string" id="5745482">&#39;\\&#39;</span>&nbsp;<span class="op" id="5745487">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745493">r</span><span class="op" id="5745494">.</span><span class="ident" id="5745495">nextByte</span><span class="op" id="5745503">(</span><span class="builtintype" id="5745504">false</span><span class="op" id="5745509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745521">default</span><span class="op" id="5745528">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745532">r</span><span class="op" id="5745533">.</span><span class="ident" id="5745534">syntaxError</span><span class="op" id="5745545">(</span><span class="op" id="5745546">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745549">}</span><br>
<span class="lineno"></span><span class="op" id="5745551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5745554">//&nbsp;readImport&nbsp;reads&nbsp;an&nbsp;import&nbsp;clause&nbsp;-&nbsp;optional&nbsp;identifier&nbsp;followed&nbsp;by&nbsp;quoted&nbsp;string&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="5745641">//&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">180</span><span class="keyword" id="5745660">func</span>&nbsp;<span class="op" id="5745665">(</span><span class="ident" id="5745666">r</span>&nbsp;<span class="op" id="5745668">*</span><span class="ident" id="5745669">importReader</span><span class="op" id="5745681">)</span>&nbsp;<span class="ident" id="5745683">readImport</span><span class="op" id="5745693">(</span><span class="op" id="5745694">)</span>&nbsp;<span class="op" id="5745696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745699">c</span>&nbsp;<span class="op" id="5745701">:=</span>&nbsp;<span class="ident" id="5745704">r</span><span class="op" id="5745705">.</span><span class="ident" id="5745706">peekByte</span><span class="op" id="5745714">(</span><span class="builtintype" id="5745715">true</span><span class="op" id="5745719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745722">if</span>&nbsp;<span class="ident" id="5745725">c</span>&nbsp;<span class="op" id="5745727">==</span>&nbsp;<span class="string" id="5745730">&#39;.&#39;</span>&nbsp;<span class="op" id="5745734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745738">r</span><span class="op" id="5745739">.</span><span class="ident" id="5745740">peek</span>&nbsp;<span class="op" id="5745745">=</span>&nbsp;<span class="num" id="5745747">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745750">}</span>&nbsp;<span class="keyword" id="5745752">else</span>&nbsp;<span class="keyword" id="5745757">if</span>&nbsp;<span class="ident" id="5745760">isIdent</span><span class="op" id="5745767">(</span><span class="ident" id="5745768">c</span><span class="op" id="5745769">)</span>&nbsp;<span class="op" id="5745771">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745775">r</span><span class="op" id="5745776">.</span><span class="ident" id="5745777">readIdent</span><span class="op" id="5745786">(</span><span class="op" id="5745787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745793">r</span><span class="op" id="5745794">.</span><span class="ident" id="5745795">readString</span><span class="op" id="5745805">(</span><span class="op" id="5745806">)</span><br>
<span class="lineno"></span><span class="op" id="5745808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="5745811">//&nbsp;readComments&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;only&nbsp;reads&nbsp;the&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="5745889">//&nbsp;block&nbsp;of&nbsp;comments&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5745923">func</span>&nbsp;<span class="ident" id="5745928">readComments</span><span class="op" id="5745940">(</span><span class="ident" id="5745941">f</span>&nbsp;<span class="ident" id="5745943">io</span><span class="op" id="5745945">.</span><span class="ident" id="5745946">Reader</span><span class="op" id="5745952">)</span>&nbsp;<span class="op" id="5745954">(</span><span class="op" id="5745955">[</span><span class="op" id="5745956">]</span><span class="builtintype" id="5745957">byte</span><span class="op" id="5745961">,</span>&nbsp;<span class="builtintype" id="5745963">error</span><span class="op" id="5745968">)</span>&nbsp;<span class="op" id="5745970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745973">r</span>&nbsp;<span class="op" id="5745975">:=</span>&nbsp;<span class="op" id="5745978">&amp;</span><span class="ident" id="5745979">importReader</span><span class="op" id="5745991">{</span><span class="ident" id="5745992">b</span><span class="op" id="5745993">:</span>&nbsp;<span class="ident" id="5745995">bufio</span><span class="op" id="5746000">.</span><span class="ident" id="5746001">NewReader</span><span class="op" id="5746010">(</span><span class="ident" id="5746011">f</span><span class="op" id="5746012">)</span><span class="op" id="5746013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746016">r</span><span class="op" id="5746017">.</span><span class="ident" id="5746018">peekByte</span><span class="op" id="5746026">(</span><span class="builtintype" id="5746027">true</span><span class="op" id="5746031">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746034">if</span>&nbsp;<span class="ident" id="5746037">r</span><span class="op" id="5746038">.</span><span class="ident" id="5746039">err</span>&nbsp;<span class="op" id="5746043">==</span>&nbsp;<span class="builtintype" id="5746046">nil</span>&nbsp;<span class="op" id="5746050">&amp;&amp;</span>&nbsp;<span class="op" id="5746053">!</span><span class="ident" id="5746054">r</span><span class="op" id="5746055">.</span><span class="ident" id="5746056">eof</span>&nbsp;<span class="op" id="5746060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5746064">//&nbsp;Didn&#39;t&nbsp;reach&nbsp;EOF,&nbsp;so&nbsp;must&nbsp;have&nbsp;found&nbsp;a&nbsp;non-space&nbsp;byte.&nbsp;Remove&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746135">r</span><span class="op" id="5746136">.</span><span class="ident" id="5746137">buf</span>&nbsp;<span class="op" id="5746141">=</span>&nbsp;<span class="ident" id="5746143">r</span><span class="op" id="5746144">.</span><span class="ident" id="5746145">buf</span><span class="op" id="5746148">[</span><span class="op" id="5746149">:</span><span class="builtinfunc" id="5746150">len</span><span class="op" id="5746153">(</span><span class="ident" id="5746154">r</span><span class="op" id="5746155">.</span><span class="ident" id="5746156">buf</span><span class="op" id="5746159">)</span><span class="op" id="5746160">-</span><span class="num" id="5746161">1</span><span class="op" id="5746162">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746168">return</span>&nbsp;<span class="ident" id="5746175">r</span><span class="op" id="5746176">.</span><span class="ident" id="5746177">buf</span><span class="op" id="5746180">,</span>&nbsp;<span class="ident" id="5746182">r</span><span class="op" id="5746183">.</span><span class="ident" id="5746184">err</span><br>
<span class="lineno">200</span><span class="op" id="5746188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5746191">//&nbsp;readImports&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;expects&nbsp;a&nbsp;Go&nbsp;file&nbsp;as&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="5746272">//&nbsp;and&nbsp;stops&nbsp;reading&nbsp;the&nbsp;input&nbsp;once&nbsp;the&nbsp;imports&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span><span class="keyword" id="5746336">func</span>&nbsp;<span class="ident" id="5746341">readImports</span><span class="op" id="5746352">(</span><span class="ident" id="5746353">f</span>&nbsp;<span class="ident" id="5746355">io</span><span class="op" id="5746357">.</span><span class="ident" id="5746358">Reader</span><span class="op" id="5746364">,</span>&nbsp;<span class="ident" id="5746366">reportSyntaxError</span>&nbsp;<span class="builtintype" id="5746384">bool</span><span class="op" id="5746388">)</span>&nbsp;<span class="op" id="5746390">(</span><span class="op" id="5746391">[</span><span class="op" id="5746392">]</span><span class="builtintype" id="5746393">byte</span><span class="op" id="5746397">,</span>&nbsp;<span class="builtintype" id="5746399">error</span><span class="op" id="5746404">)</span>&nbsp;<span class="op" id="5746406">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746409">r</span>&nbsp;<span class="op" id="5746411">:=</span>&nbsp;<span class="op" id="5746414">&amp;</span><span class="ident" id="5746415">importReader</span><span class="op" id="5746427">{</span><span class="ident" id="5746428">b</span><span class="op" id="5746429">:</span>&nbsp;<span class="ident" id="5746431">bufio</span><span class="op" id="5746436">.</span><span class="ident" id="5746437">NewReader</span><span class="op" id="5746446">(</span><span class="ident" id="5746447">f</span><span class="op" id="5746448">)</span><span class="op" id="5746449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746453">r</span><span class="op" id="5746454">.</span><span class="ident" id="5746455">readKeyword</span><span class="op" id="5746466">(</span><span class="string" id="5746467">&#34;package&#34;</span><span class="op" id="5746476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746479">r</span><span class="op" id="5746480">.</span><span class="ident" id="5746481">readIdent</span><span class="op" id="5746490">(</span><span class="op" id="5746491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746494">for</span>&nbsp;<span class="ident" id="5746498">r</span><span class="op" id="5746499">.</span><span class="ident" id="5746500">peekByte</span><span class="op" id="5746508">(</span><span class="builtintype" id="5746509">true</span><span class="op" id="5746513">)</span>&nbsp;<span class="op" id="5746515">==</span>&nbsp;<span class="string" id="5746518">&#39;i&#39;</span>&nbsp;<span class="op" id="5746522">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746526">r</span><span class="op" id="5746527">.</span><span class="ident" id="5746528">readKeyword</span><span class="op" id="5746539">(</span><span class="string" id="5746540">&#34;import&#34;</span><span class="op" id="5746548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746552">if</span>&nbsp;<span class="ident" id="5746555">r</span><span class="op" id="5746556">.</span><span class="ident" id="5746557">peekByte</span><span class="op" id="5746565">(</span><span class="builtintype" id="5746566">true</span><span class="op" id="5746570">)</span>&nbsp;<span class="op" id="5746572">==</span>&nbsp;<span class="string" id="5746575">&#39;(&#39;</span>&nbsp;<span class="op" id="5746579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746584">r</span><span class="op" id="5746585">.</span><span class="ident" id="5746586">nextByte</span><span class="op" id="5746594">(</span><span class="builtintype" id="5746595">false</span><span class="op" id="5746600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746605">for</span>&nbsp;<span class="ident" id="5746609">r</span><span class="op" id="5746610">.</span><span class="ident" id="5746611">peekByte</span><span class="op" id="5746619">(</span><span class="builtintype" id="5746620">true</span><span class="op" id="5746624">)</span>&nbsp;<span class="op" id="5746626">!=</span>&nbsp;<span class="string" id="5746629">&#39;)&#39;</span>&nbsp;<span class="op" id="5746633">&amp;&amp;</span>&nbsp;<span class="ident" id="5746636">r</span><span class="op" id="5746637">.</span><span class="ident" id="5746638">err</span>&nbsp;<span class="op" id="5746642">==</span>&nbsp;<span class="builtintype" id="5746645">nil</span>&nbsp;<span class="op" id="5746649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746655">r</span><span class="op" id="5746656">.</span><span class="ident" id="5746657">readImport</span><span class="op" id="5746667">(</span><span class="op" id="5746668">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746678">r</span><span class="op" id="5746679">.</span><span class="ident" id="5746680">nextByte</span><span class="op" id="5746688">(</span><span class="builtintype" id="5746689">false</span><span class="op" id="5746694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746698">}</span>&nbsp;<span class="keyword" id="5746700">else</span>&nbsp;<span class="op" id="5746705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746710">r</span><span class="op" id="5746711">.</span><span class="ident" id="5746712">readImport</span><span class="op" id="5746722">(</span><span class="op" id="5746723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746727">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5746734">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;successfully&nbsp;before&nbsp;EOF,&nbsp;we&nbsp;read&nbsp;a&nbsp;byte&nbsp;that&nbsp;told&nbsp;us&nbsp;we&nbsp;were&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5746819">//&nbsp;Return&nbsp;all&nbsp;but&nbsp;that&nbsp;last&nbsp;byte,&nbsp;which&nbsp;would&nbsp;cause&nbsp;a&nbsp;syntax&nbsp;error&nbsp;if&nbsp;we&nbsp;let&nbsp;it&nbsp;through.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746909">if</span>&nbsp;<span class="ident" id="5746912">r</span><span class="op" id="5746913">.</span><span class="ident" id="5746914">err</span>&nbsp;<span class="op" id="5746918">==</span>&nbsp;<span class="builtintype" id="5746921">nil</span>&nbsp;<span class="op" id="5746925">&amp;&amp;</span>&nbsp;<span class="op" id="5746928">!</span><span class="ident" id="5746929">r</span><span class="op" id="5746930">.</span><span class="ident" id="5746931">eof</span>&nbsp;<span class="op" id="5746935">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746939">return</span>&nbsp;<span class="ident" id="5746946">r</span><span class="op" id="5746947">.</span><span class="ident" id="5746948">buf</span><span class="op" id="5746951">[</span><span class="op" id="5746952">:</span><span class="builtinfunc" id="5746953">len</span><span class="op" id="5746956">(</span><span class="ident" id="5746957">r</span><span class="op" id="5746958">.</span><span class="ident" id="5746959">buf</span><span class="op" id="5746962">)</span><span class="op" id="5746963">-</span><span class="num" id="5746964">1</span><span class="op" id="5746965">]</span><span class="op" id="5746966">,</span>&nbsp;<span class="builtintype" id="5746968">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5746977">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;for&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;consume&nbsp;the&nbsp;whole&nbsp;file&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5747046">//&nbsp;we&nbsp;are&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;the&nbsp;errors&nbsp;that&nbsp;go/parser&nbsp;returns.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5747113">if</span>&nbsp;<span class="ident" id="5747116">r</span><span class="op" id="5747117">.</span><span class="ident" id="5747118">err</span>&nbsp;<span class="op" id="5747122">==</span>&nbsp;<span class="ident" id="5747125">errSyntax</span>&nbsp;<span class="op" id="5747135">&amp;&amp;</span>&nbsp;<span class="op" id="5747138">!</span><span class="ident" id="5747139">reportSyntaxError</span>&nbsp;<span class="op" id="5747157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747161">r</span><span class="op" id="5747162">.</span><span class="ident" id="5747163">err</span>&nbsp;<span class="op" id="5747167">=</span>&nbsp;<span class="builtintype" id="5747169">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5747175">for</span>&nbsp;<span class="ident" id="5747179">r</span><span class="op" id="5747180">.</span><span class="ident" id="5747181">err</span>&nbsp;<span class="op" id="5747185">==</span>&nbsp;<span class="builtintype" id="5747188">nil</span>&nbsp;<span class="op" id="5747192">&amp;&amp;</span>&nbsp;<span class="op" id="5747195">!</span><span class="ident" id="5747196">r</span><span class="op" id="5747197">.</span><span class="ident" id="5747198">eof</span>&nbsp;<span class="op" id="5747202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747207">r</span><span class="op" id="5747208">.</span><span class="ident" id="5747209">readByte</span><span class="op" id="5747217">(</span><span class="op" id="5747218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5747222">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5747225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5747229">return</span>&nbsp;<span class="ident" id="5747236">r</span><span class="op" id="5747237">.</span><span class="ident" id="5747238">buf</span><span class="op" id="5747241">,</span>&nbsp;<span class="ident" id="5747243">r</span><span class="op" id="5747244">.</span><span class="ident" id="5747245">err</span><br>
<span class="lineno"></span><span class="op" id="5747249">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
