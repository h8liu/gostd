<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3217214">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3217269">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3217323">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3217374">//&nbsp;Package&nbsp;bufio&nbsp;implements&nbsp;buffered&nbsp;I/O.&nbsp;&nbsp;It&nbsp;wraps&nbsp;an&nbsp;io.Reader&nbsp;or&nbsp;io.Writer</span><br>
<span class="lineno"></span><span class="comment" id="3217452">//&nbsp;object,&nbsp;creating&nbsp;another&nbsp;object&nbsp;(Reader&nbsp;or&nbsp;Writer)&nbsp;that&nbsp;also&nbsp;implements</span><br>
<span class="lineno"></span><span class="comment" id="3217527">//&nbsp;the&nbsp;interface&nbsp;but&nbsp;provides&nbsp;buffering&nbsp;and&nbsp;some&nbsp;help&nbsp;for&nbsp;textual&nbsp;I/O.</span><br>
<span class="lineno"></span><span class="keyword" id="3217598">package</span>&nbsp;<span class="ident" id="3217606">bufio</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3217613">import</span>&nbsp;<span class="op" id="3217620">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3217623">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3217632">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3217642">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3217648">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">15</span><span class="op" id="3217663">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3217666">const</span>&nbsp;<span class="op" id="3217672">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217675">defaultBufSize</span>&nbsp;<span class="op" id="3217690">=</span>&nbsp;<span class="num" id="3217692">4096</span><br>
<span class="lineno"></span><span class="op" id="3217697">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3217700">var</span>&nbsp;<span class="op" id="3217704">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217707">ErrInvalidUnreadByte</span>&nbsp;<span class="op" id="3217728">=</span>&nbsp;<span class="ident" id="3217730"><a href="/bufio/bufio.go.html#3217632">errors</a></span><span class="op" id="3217736">.</span><span class="ident" id="3217737">New</span><span class="op" id="3217740">(</span><span class="string" id="3217741">&#34;bufio:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;UnreadByte&#34;</span><span class="op" id="3217775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217778">ErrInvalidUnreadRune</span>&nbsp;<span class="op" id="3217799">=</span>&nbsp;<span class="ident" id="3217801"><a href="/bufio/bufio.go.html#3217632">errors</a></span><span class="op" id="3217807">.</span><span class="ident" id="3217808">New</span><span class="op" id="3217811">(</span><span class="string" id="3217812">&#34;bufio:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;UnreadRune&#34;</span><span class="op" id="3217846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217849">ErrBufferFull</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3217870">=</span>&nbsp;<span class="ident" id="3217872"><a href="/bufio/bufio.go.html#3217632">errors</a></span><span class="op" id="3217878">.</span><span class="ident" id="3217879">New</span><span class="op" id="3217882">(</span><span class="string" id="3217883">&#34;bufio:&nbsp;buffer&nbsp;full&#34;</span><span class="op" id="3217903">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217906">ErrNegativeCount</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3217927">=</span>&nbsp;<span class="ident" id="3217929"><a href="/bufio/bufio.go.html#3217632">errors</a></span><span class="op" id="3217935">.</span><span class="ident" id="3217936">New</span><span class="op" id="3217939">(</span><span class="string" id="3217940">&#34;bufio:&nbsp;negative&nbsp;count&#34;</span><span class="op" id="3217963">)</span><br>
<span class="lineno"></span><span class="op" id="3217965">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3217968">//&nbsp;Buffered&nbsp;input.</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="3217988">//&nbsp;Reader&nbsp;implements&nbsp;buffering&nbsp;for&nbsp;an&nbsp;io.Reader&nbsp;object.</span><br>
<span class="lineno"></span><span class="keyword" id="3218044">type</span>&nbsp;<span class="ident" id="3218049">Reader</span>&nbsp;<span class="keyword" id="3218056">struct</span>&nbsp;<span class="op" id="3218063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218066">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3218079">[</span><span class="op" id="3218080">]</span><span class="builtintype" id="3218081">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218087">rd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3218100"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3218102">.</span><span class="ident" id="3218103">Reader</span>&nbsp;<span class="comment" id="3218110">//&nbsp;reader&nbsp;provided&nbsp;by&nbsp;the&nbsp;client</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218144">r</span><span class="op" id="3218145">,</span>&nbsp;<span class="ident" id="3218147">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3218157">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3218167">//&nbsp;buf&nbsp;read&nbsp;and&nbsp;write&nbsp;positions</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218200">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3218213">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218220">lastByte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3218233">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218238">lastRuneSize</span>&nbsp;<span class="builtintype" id="3218251">int</span><br>
<span class="lineno"></span><span class="op" id="3218255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3218258">const</span>&nbsp;<span class="ident" id="3218264">minReadBufferSize</span>&nbsp;<span class="op" id="3218282">=</span>&nbsp;<span class="num" id="3218284">16</span><br>
<span class="lineno"></span><span class="keyword" id="3218287">const</span>&nbsp;<span class="ident" id="3218293">maxConsecutiveEmptyReads</span>&nbsp;<span class="op" id="3218318">=</span>&nbsp;<span class="num" id="3218320">100</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3218325">//&nbsp;NewReaderSize&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;at&nbsp;least&nbsp;the&nbsp;specified</span><br>
<span class="lineno"></span><span class="comment" id="3218403">//&nbsp;size.&nbsp;If&nbsp;the&nbsp;argument&nbsp;io.Reader&nbsp;is&nbsp;already&nbsp;a&nbsp;Reader&nbsp;with&nbsp;large&nbsp;enough</span><br>
<span class="lineno">45</span><span class="comment" id="3218476">//&nbsp;size,&nbsp;it&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="3218519">func</span>&nbsp;<span class="ident" id="3218524">NewReaderSize</span><span class="op" id="3218537">(</span><span class="ident" id="3218538">rd</span>&nbsp;<span class="ident" id="3218541"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3218543">.</span><span class="ident" id="3218544">Reader</span><span class="op" id="3218550">,</span>&nbsp;<span class="ident" id="3218552">size</span>&nbsp;<span class="builtintype" id="3218557">int</span><span class="op" id="3218560">)</span>&nbsp;<span class="op" id="3218562">*</span><span class="ident" id="3218563"><a href="/bufio/bufio.go.html#3218049">Reader</a></span>&nbsp;<span class="op" id="3218570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3218573">//&nbsp;Is&nbsp;it&nbsp;already&nbsp;a&nbsp;Reader?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218601">b</span><span class="op" id="3218602">,</span>&nbsp;<span class="ident" id="3218604">ok</span>&nbsp;<span class="op" id="3218607">:=</span>&nbsp;<span class="ident" id="3218610"><a href="/bufio/bufio.go.html#3218538">rd</a></span><span class="op" id="3218612">.</span><span class="op" id="3218613">(</span><span class="op" id="3218614">*</span><span class="ident" id="3218615"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3218621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218624">if</span>&nbsp;<span class="ident" id="3218627"><a href="/bufio/bufio.go.html#3218604">ok</a></span>&nbsp;<span class="op" id="3218630">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3218633">len</span><span class="op" id="3218636">(</span><span class="ident" id="3218637"><a href="/bufio/bufio.go.html#3218601">b</a></span><span class="op" id="3218638">.</span><span class="ident" id="3218639">buf</span><span class="op" id="3218642">)</span>&nbsp;<span class="op" id="3218644">&gt;=</span>&nbsp;<span class="ident" id="3218647"><a href="/bufio/bufio.go.html#3218552">size</a></span>&nbsp;<span class="op" id="3218652">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218656">return</span>&nbsp;<span class="ident" id="3218663"><a href="/bufio/bufio.go.html#3218601">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218669">if</span>&nbsp;<span class="ident" id="3218672"><a href="/bufio/bufio.go.html#3218552">size</a></span>&nbsp;<span class="op" id="3218677">&lt;</span>&nbsp;<span class="ident" id="3218679"><a href="/bufio/bufio.go.html#3218264">minReadBufferSize</a></span>&nbsp;<span class="op" id="3218697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218701"><a href="/bufio/bufio.go.html#3218552">size</a></span>&nbsp;<span class="op" id="3218706">=</span>&nbsp;<span class="ident" id="3218708"><a href="/bufio/bufio.go.html#3218264">minReadBufferSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218727">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218730">r</span>&nbsp;<span class="op" id="3218732">:=</span>&nbsp;<span class="builtinfunc" id="3218735">new</span><span class="op" id="3218738">(</span><span class="ident" id="3218739"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3218745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218748"><a href="/bufio/bufio.go.html#3218730">r</a></span><span class="op" id="3218749">.</span><span class="ident" id="3218750">reset</span><span class="op" id="3218755">(</span><span class="builtinfunc" id="3218756">make</span><span class="op" id="3218760">(</span><span class="op" id="3218761">[</span><span class="op" id="3218762">]</span><span class="builtintype" id="3218763">byte</span><span class="op" id="3218767">,</span>&nbsp;<span class="ident" id="3218769"><a href="/bufio/bufio.go.html#3218552">size</a></span><span class="op" id="3218773">)</span><span class="op" id="3218774">,</span>&nbsp;<span class="ident" id="3218776"><a href="/bufio/bufio.go.html#3218538">rd</a></span><span class="op" id="3218778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218781">return</span>&nbsp;<span class="ident" id="3218788"><a href="/bufio/bufio.go.html#3218730">r</a></span><br>
<span class="lineno"></span><span class="op" id="3218790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="3218793">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;the&nbsp;default&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="3218862">func</span>&nbsp;<span class="ident" id="3218867">NewReader</span><span class="op" id="3218876">(</span><span class="ident" id="3218877">rd</span>&nbsp;<span class="ident" id="3218880"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3218882">.</span><span class="ident" id="3218883">Reader</span><span class="op" id="3218889">)</span>&nbsp;<span class="op" id="3218891">*</span><span class="ident" id="3218892"><a href="/bufio/bufio.go.html#3218049">Reader</a></span>&nbsp;<span class="op" id="3218899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218902">return</span>&nbsp;<span class="ident" id="3218909"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="3218922">(</span><span class="ident" id="3218923"><a href="/bufio/bufio.go.html#3218877">rd</a></span><span class="op" id="3218925">,</span>&nbsp;<span class="ident" id="3218927"><a href="/bufio/bufio.go.html#3217675">defaultBufSize</a></span><span class="op" id="3218941">)</span><br>
<span class="lineno"></span><span class="op" id="3218943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="3218946">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data,&nbsp;resets&nbsp;all&nbsp;state,&nbsp;and&nbsp;switches</span><br>
<span class="lineno"></span><span class="comment" id="3219014">//&nbsp;the&nbsp;buffered&nbsp;reader&nbsp;to&nbsp;read&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="3219053">func</span>&nbsp;<span class="op" id="3219058">(</span><span class="ident" id="3219059">b</span>&nbsp;<span class="op" id="3219061">*</span><span class="ident" id="3219062"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3219068">)</span>&nbsp;<span class="ident" id="3219070">Reset</span><span class="op" id="3219075">(</span><span class="ident" id="3219076">r</span>&nbsp;<span class="ident" id="3219078"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3219080">.</span><span class="ident" id="3219081">Reader</span><span class="op" id="3219087">)</span>&nbsp;<span class="op" id="3219089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219092"><a href="/bufio/bufio.go.html#3219059">b</a></span><span class="op" id="3219093">.</span><span class="ident" id="3219094">reset</span><span class="op" id="3219099">(</span><span class="ident" id="3219100"><a href="/bufio/bufio.go.html#3219059">b</a></span><span class="op" id="3219101">.</span><span class="ident" id="3219102">buf</span><span class="op" id="3219105">,</span>&nbsp;<span class="ident" id="3219107"><a href="/bufio/bufio.go.html#3219076">r</a></span><span class="op" id="3219108">)</span><br>
<span class="lineno"></span><span class="op" id="3219110">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="3219113">func</span>&nbsp;<span class="op" id="3219118">(</span><span class="ident" id="3219119">b</span>&nbsp;<span class="op" id="3219121">*</span><span class="ident" id="3219122"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3219128">)</span>&nbsp;<span class="ident" id="3219130">reset</span><span class="op" id="3219135">(</span><span class="ident" id="3219136">buf</span>&nbsp;<span class="op" id="3219140">[</span><span class="op" id="3219141">]</span><span class="builtintype" id="3219142">byte</span><span class="op" id="3219146">,</span>&nbsp;<span class="ident" id="3219148">r</span>&nbsp;<span class="ident" id="3219150"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3219152">.</span><span class="ident" id="3219153">Reader</span><span class="op" id="3219159">)</span>&nbsp;<span class="op" id="3219161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3219164">*</span><span class="ident" id="3219165"><a href="/bufio/bufio.go.html#3219119">b</a></span>&nbsp;<span class="op" id="3219167">=</span>&nbsp;<span class="ident" id="3219169"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3219175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219179">buf</span><span class="op" id="3219182">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219193"><a href="/bufio/bufio.go.html#3219136">buf</a></span><span class="op" id="3219196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219200">rd</span><span class="op" id="3219202">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219214"><a href="/bufio/bufio.go.html#3219148">r</a></span><span class="op" id="3219215">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219219">lastByte</span><span class="op" id="3219227">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3219233">-</span><span class="num" id="3219234">1</span><span class="op" id="3219235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219239">lastRuneSize</span><span class="op" id="3219251">:</span>&nbsp;<span class="op" id="3219253">-</span><span class="num" id="3219254">1</span><span class="op" id="3219255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3219258">}</span><br>
<span class="lineno"></span><span class="op" id="3219260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="3219263">var</span>&nbsp;<span class="ident" id="3219267">errNegativeRead</span>&nbsp;<span class="op" id="3219283">=</span>&nbsp;<span class="ident" id="3219285"><a href="/bufio/bufio.go.html#3217632">errors</a></span><span class="op" id="3219291">.</span><span class="ident" id="3219292">New</span><span class="op" id="3219295">(</span><span class="string" id="3219296">&#34;bufio:&nbsp;reader&nbsp;returned&nbsp;negative&nbsp;count&nbsp;from&nbsp;Read&#34;</span><span class="op" id="3219345">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3219348">//&nbsp;fill&nbsp;reads&nbsp;a&nbsp;new&nbsp;chunk&nbsp;into&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3219391">func</span>&nbsp;<span class="op" id="3219396">(</span><span class="ident" id="3219397">b</span>&nbsp;<span class="op" id="3219399">*</span><span class="ident" id="3219400"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3219406">)</span>&nbsp;<span class="ident" id="3219408">fill</span><span class="op" id="3219412">(</span><span class="op" id="3219413">)</span>&nbsp;<span class="op" id="3219415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3219418">//&nbsp;Slide&nbsp;existing&nbsp;data&nbsp;to&nbsp;beginning.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219456">if</span>&nbsp;<span class="ident" id="3219459"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219460">.</span><span class="ident" id="3219461">r</span>&nbsp;<span class="op" id="3219463">&gt;</span>&nbsp;<span class="num" id="3219465">0</span>&nbsp;<span class="op" id="3219467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3219471">copy</span><span class="op" id="3219475">(</span><span class="ident" id="3219476"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219477">.</span><span class="ident" id="3219478">buf</span><span class="op" id="3219481">,</span>&nbsp;<span class="ident" id="3219483"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219484">.</span><span class="ident" id="3219485">buf</span><span class="op" id="3219488">[</span><span class="ident" id="3219489"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219490">.</span><span class="ident" id="3219491">r</span><span class="op" id="3219492">:</span><span class="ident" id="3219493"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219494">.</span><span class="ident" id="3219495">w</span><span class="op" id="3219496">]</span><span class="op" id="3219497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219501"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219502">.</span><span class="ident" id="3219503">w</span>&nbsp;<span class="op" id="3219505">-=</span>&nbsp;<span class="ident" id="3219508"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219509">.</span><span class="ident" id="3219510">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219514"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219515">.</span><span class="ident" id="3219516">r</span>&nbsp;<span class="op" id="3219518">=</span>&nbsp;<span class="num" id="3219520">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3219523">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219527">if</span>&nbsp;<span class="ident" id="3219530"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219531">.</span><span class="ident" id="3219532">w</span>&nbsp;<span class="op" id="3219534">&gt;=</span>&nbsp;<span class="builtinfunc" id="3219537">len</span><span class="op" id="3219540">(</span><span class="ident" id="3219541"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219542">.</span><span class="ident" id="3219543">buf</span><span class="op" id="3219546">)</span>&nbsp;<span class="op" id="3219548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3219552">panic</span><span class="op" id="3219557">(</span><span class="string" id="3219558">&#34;bufio:&nbsp;tried&nbsp;to&nbsp;fill&nbsp;full&nbsp;buffer&#34;</span><span class="op" id="3219592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3219595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3219599">//&nbsp;Read&nbsp;new&nbsp;data:&nbsp;try&nbsp;a&nbsp;limited&nbsp;number&nbsp;of&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219649">for</span>&nbsp;<span class="ident" id="3219653">i</span>&nbsp;<span class="op" id="3219655">:=</span>&nbsp;<span class="ident" id="3219658"><a href="/bufio/bufio.go.html#3218293">maxConsecutiveEmptyReads</a></span><span class="op" id="3219682">;</span>&nbsp;<span class="ident" id="3219684"><a href="/bufio/bufio.go.html#3219653">i</a></span>&nbsp;<span class="op" id="3219686">&gt;</span>&nbsp;<span class="num" id="3219688">0</span><span class="op" id="3219689">;</span>&nbsp;<span class="ident" id="3219691"><a href="/bufio/bufio.go.html#3219653">i</a></span><span class="op" id="3219692">--</span>&nbsp;<span class="op" id="3219695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219699">n</span><span class="op" id="3219700">,</span>&nbsp;<span class="ident" id="3219702">err</span>&nbsp;<span class="op" id="3219706">:=</span>&nbsp;<span class="ident" id="3219709"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219710">.</span><span class="ident" id="3219711">rd</span><span class="op" id="3219713">.</span><span class="ident" id="3219714">Read</span><span class="op" id="3219718">(</span><span class="ident" id="3219719"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219720">.</span><span class="ident" id="3219721">buf</span><span class="op" id="3219724">[</span><span class="ident" id="3219725"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219726">.</span><span class="ident" id="3219727">w</span><span class="op" id="3219728">:</span><span class="op" id="3219729">]</span><span class="op" id="3219730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219734">if</span>&nbsp;<span class="ident" id="3219737"><a href="/bufio/bufio.go.html#3219699">n</a></span>&nbsp;<span class="op" id="3219739">&lt;</span>&nbsp;<span class="num" id="3219741">0</span>&nbsp;<span class="op" id="3219743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3219748">panic</span><span class="op" id="3219753">(</span><span class="ident" id="3219754"><a href="/bufio/bufio.go.html#3219267">errNegativeRead</a></span><span class="op" id="3219769">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3219773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219777"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219778">.</span><span class="ident" id="3219779">w</span>&nbsp;<span class="op" id="3219781">+=</span>&nbsp;<span class="ident" id="3219784"><a href="/bufio/bufio.go.html#3219699">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219788">if</span>&nbsp;<span class="ident" id="3219791"><a href="/bufio/bufio.go.html#3219702">err</a></span>&nbsp;<span class="op" id="3219795">!=</span>&nbsp;<span class="ident" id="3219798">nil</span>&nbsp;<span class="op" id="3219802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219807"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219808">.</span><span class="ident" id="3219809">err</span>&nbsp;<span class="op" id="3219813">=</span>&nbsp;<span class="ident" id="3219815"><a href="/bufio/bufio.go.html#3219702">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219822">return</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3219831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219835">if</span>&nbsp;<span class="ident" id="3219838"><a href="/bufio/bufio.go.html#3219699">n</a></span>&nbsp;<span class="op" id="3219840">&gt;</span>&nbsp;<span class="num" id="3219842">0</span>&nbsp;<span class="op" id="3219844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219849">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3219858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3219861">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219864"><a href="/bufio/bufio.go.html#3219397">b</a></span><span class="op" id="3219865">.</span><span class="ident" id="3219866">err</span>&nbsp;<span class="op" id="3219870">=</span>&nbsp;<span class="ident" id="3219872"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3219874">.</span><span class="ident" id="3219875">ErrNoProgress</span><br>
<span class="lineno"></span><span class="op" id="3219889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3219892">func</span>&nbsp;<span class="op" id="3219897">(</span><span class="ident" id="3219898">b</span>&nbsp;<span class="op" id="3219900">*</span><span class="ident" id="3219901"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3219907">)</span>&nbsp;<span class="ident" id="3219909">readErr</span><span class="op" id="3219916">(</span><span class="op" id="3219917">)</span>&nbsp;<span class="builtintype" id="3219919">error</span>&nbsp;<span class="op" id="3219925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219928">err</span>&nbsp;<span class="op" id="3219932">:=</span>&nbsp;<span class="ident" id="3219935"><a href="/bufio/bufio.go.html#3219898">b</a></span><span class="op" id="3219936">.</span><span class="ident" id="3219937">err</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219942"><a href="/bufio/bufio.go.html#3219898">b</a></span><span class="op" id="3219943">.</span><span class="ident" id="3219944">err</span>&nbsp;<span class="op" id="3219948">=</span>&nbsp;<span class="ident" id="3219950">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219955">return</span>&nbsp;<span class="ident" id="3219962"><a href="/bufio/bufio.go.html#3219928">err</a></span><br>
<span class="lineno"></span><span class="op" id="3219966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3219969">//&nbsp;Peek&nbsp;returns&nbsp;the&nbsp;next&nbsp;n&nbsp;bytes&nbsp;without&nbsp;advancing&nbsp;the&nbsp;reader.&nbsp;The&nbsp;bytes&nbsp;stop</span><br>
<span class="lineno">120</span><span class="comment" id="3220047">//&nbsp;being&nbsp;valid&nbsp;at&nbsp;the&nbsp;next&nbsp;read&nbsp;call.&nbsp;If&nbsp;Peek&nbsp;returns&nbsp;fewer&nbsp;than&nbsp;n&nbsp;bytes,&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3220124">//&nbsp;also&nbsp;returns&nbsp;an&nbsp;error&nbsp;explaining&nbsp;why&nbsp;the&nbsp;read&nbsp;is&nbsp;short.&nbsp;The&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3220196">//&nbsp;ErrBufferFull&nbsp;if&nbsp;n&nbsp;is&nbsp;larger&nbsp;than&nbsp;b&#39;s&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="3220250">func</span>&nbsp;<span class="op" id="3220255">(</span><span class="ident" id="3220256">b</span>&nbsp;<span class="op" id="3220258">*</span><span class="ident" id="3220259"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3220265">)</span>&nbsp;<span class="ident" id="3220267">Peek</span><span class="op" id="3220271">(</span><span class="ident" id="3220272">n</span>&nbsp;<span class="builtintype" id="3220274">int</span><span class="op" id="3220277">)</span>&nbsp;<span class="op" id="3220279">(</span><span class="op" id="3220280">[</span><span class="op" id="3220281">]</span><span class="builtintype" id="3220282">byte</span><span class="op" id="3220286">,</span>&nbsp;<span class="builtintype" id="3220288">error</span><span class="op" id="3220293">)</span>&nbsp;<span class="op" id="3220295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3220298">if</span>&nbsp;<span class="ident" id="3220301"><a href="/bufio/bufio.go.html#3220272">n</a></span>&nbsp;<span class="op" id="3220303">&lt;</span>&nbsp;<span class="num" id="3220305">0</span>&nbsp;<span class="op" id="3220307">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3220311">return</span>&nbsp;<span class="ident" id="3220318">nil</span><span class="op" id="3220321">,</span>&nbsp;<span class="ident" id="3220323"><a href="/bufio/bufio.go.html#3217906">ErrNegativeCount</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3220341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3220344">if</span>&nbsp;<span class="ident" id="3220347"><a href="/bufio/bufio.go.html#3220272">n</a></span>&nbsp;<span class="op" id="3220349">&gt;</span>&nbsp;<span class="builtinfunc" id="3220351">len</span><span class="op" id="3220354">(</span><span class="ident" id="3220355"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220356">.</span><span class="ident" id="3220357">buf</span><span class="op" id="3220360">)</span>&nbsp;<span class="op" id="3220362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3220366">return</span>&nbsp;<span class="ident" id="3220373">nil</span><span class="op" id="3220376">,</span>&nbsp;<span class="ident" id="3220378"><a href="/bufio/bufio.go.html#3217849">ErrBufferFull</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3220393">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3220396">//&nbsp;0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(b.buf)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3220421">for</span>&nbsp;<span class="ident" id="3220425"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220426">.</span><span class="ident" id="3220427">w</span><span class="op" id="3220428">-</span><span class="ident" id="3220429"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220430">.</span><span class="ident" id="3220431">r</span>&nbsp;<span class="op" id="3220433">&lt;</span>&nbsp;<span class="ident" id="3220435"><a href="/bufio/bufio.go.html#3220272">n</a></span>&nbsp;<span class="op" id="3220437">&amp;&amp;</span>&nbsp;<span class="ident" id="3220440"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220441">.</span><span class="ident" id="3220442">err</span>&nbsp;<span class="op" id="3220446">==</span>&nbsp;<span class="ident" id="3220449">nil</span>&nbsp;<span class="op" id="3220453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220457"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220458">.</span><span class="ident" id="3220459">fill</span><span class="op" id="3220463">(</span><span class="op" id="3220464">)</span>&nbsp;<span class="comment" id="3220466">//&nbsp;b.w-b.r&nbsp;&lt;&nbsp;len(b.buf)&nbsp;=&gt;&nbsp;buffer&nbsp;is&nbsp;not&nbsp;full</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3220513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3220517">var</span>&nbsp;<span class="ident" id="3220521">err</span>&nbsp;<span class="builtintype" id="3220525">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3220532">if</span>&nbsp;<span class="ident" id="3220535">avail</span>&nbsp;<span class="op" id="3220541">:=</span>&nbsp;<span class="ident" id="3220544"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220545">.</span><span class="ident" id="3220546">w</span>&nbsp;<span class="op" id="3220548">-</span>&nbsp;<span class="ident" id="3220550"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220551">.</span><span class="ident" id="3220552">r</span><span class="op" id="3220553">;</span>&nbsp;<span class="ident" id="3220555"><a href="/bufio/bufio.go.html#3220535">avail</a></span>&nbsp;<span class="op" id="3220561">&lt;</span>&nbsp;<span class="ident" id="3220563"><a href="/bufio/bufio.go.html#3220272">n</a></span>&nbsp;<span class="op" id="3220565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3220569">//&nbsp;not&nbsp;enough&nbsp;data&nbsp;in&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220600"><a href="/bufio/bufio.go.html#3220272">n</a></span>&nbsp;<span class="op" id="3220602">=</span>&nbsp;<span class="ident" id="3220604"><a href="/bufio/bufio.go.html#3220535">avail</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220612"><a href="/bufio/bufio.go.html#3220521">err</a></span>&nbsp;<span class="op" id="3220616">=</span>&nbsp;<span class="ident" id="3220618"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220619">.</span><span class="ident" id="3220620">readErr</span><span class="op" id="3220627">(</span><span class="op" id="3220628">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3220632">if</span>&nbsp;<span class="ident" id="3220635"><a href="/bufio/bufio.go.html#3220521">err</a></span>&nbsp;<span class="op" id="3220639">==</span>&nbsp;<span class="ident" id="3220642">nil</span>&nbsp;<span class="op" id="3220646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220651"><a href="/bufio/bufio.go.html#3220521">err</a></span>&nbsp;<span class="op" id="3220655">=</span>&nbsp;<span class="ident" id="3220657"><a href="/bufio/bufio.go.html#3217849">ErrBufferFull</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3220673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3220676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3220679">return</span>&nbsp;<span class="ident" id="3220686"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220687">.</span><span class="ident" id="3220688">buf</span><span class="op" id="3220691">[</span><span class="ident" id="3220692"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220693">.</span><span class="ident" id="3220694">r</span>&nbsp;<span class="op" id="3220696">:</span>&nbsp;<span class="ident" id="3220698"><a href="/bufio/bufio.go.html#3220256">b</a></span><span class="op" id="3220699">.</span><span class="ident" id="3220700">r</span><span class="op" id="3220701">+</span><span class="ident" id="3220702"><a href="/bufio/bufio.go.html#3220272">n</a></span><span class="op" id="3220703">]</span><span class="op" id="3220704">,</span>&nbsp;<span class="ident" id="3220706"><a href="/bufio/bufio.go.html#3220521">err</a></span><br>
<span class="lineno">145</span><span class="op" id="3220710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3220713">//&nbsp;Read&nbsp;reads&nbsp;data&nbsp;into&nbsp;p.</span><br>
<span class="lineno"></span><span class="comment" id="3220740">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;into&nbsp;p.</span><br>
<span class="lineno"></span><span class="comment" id="3220787">//&nbsp;It&nbsp;calls&nbsp;Read&nbsp;at&nbsp;most&nbsp;once&nbsp;on&nbsp;the&nbsp;underlying&nbsp;Reader,</span><br>
<span class="lineno">150</span><span class="comment" id="3220843">//&nbsp;hence&nbsp;n&nbsp;may&nbsp;be&nbsp;less&nbsp;than&nbsp;len(p).</span><br>
<span class="lineno"></span><span class="comment" id="3220879">//&nbsp;At&nbsp;EOF,&nbsp;the&nbsp;count&nbsp;will&nbsp;be&nbsp;zero&nbsp;and&nbsp;err&nbsp;will&nbsp;be&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="3220937">func</span>&nbsp;<span class="op" id="3220942">(</span><span class="ident" id="3220943">b</span>&nbsp;<span class="op" id="3220945">*</span><span class="ident" id="3220946"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3220952">)</span>&nbsp;<span class="ident" id="3220954">Read</span><span class="op" id="3220958">(</span><span class="ident" id="3220959">p</span>&nbsp;<span class="op" id="3220961">[</span><span class="op" id="3220962">]</span><span class="builtintype" id="3220963">byte</span><span class="op" id="3220967">)</span>&nbsp;<span class="op" id="3220969">(</span><span class="ident" id="3220970">n</span>&nbsp;<span class="builtintype" id="3220972">int</span><span class="op" id="3220975">,</span>&nbsp;<span class="ident" id="3220977">err</span>&nbsp;<span class="builtintype" id="3220981">error</span><span class="op" id="3220986">)</span>&nbsp;<span class="op" id="3220988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220991"><a href="/bufio/bufio.go.html#3220970">n</a></span>&nbsp;<span class="op" id="3220993">=</span>&nbsp;<span class="builtinfunc" id="3220995">len</span><span class="op" id="3220998">(</span><span class="ident" id="3220999"><a href="/bufio/bufio.go.html#3220959">p</a></span><span class="op" id="3221000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221003">if</span>&nbsp;<span class="ident" id="3221006"><a href="/bufio/bufio.go.html#3220970">n</a></span>&nbsp;<span class="op" id="3221008">==</span>&nbsp;<span class="num" id="3221011">0</span>&nbsp;<span class="op" id="3221013">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221017">return</span>&nbsp;<span class="num" id="3221024">0</span><span class="op" id="3221025">,</span>&nbsp;<span class="ident" id="3221027"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221028">.</span><span class="ident" id="3221029">readErr</span><span class="op" id="3221036">(</span><span class="op" id="3221037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221043">if</span>&nbsp;<span class="ident" id="3221046"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221047">.</span><span class="ident" id="3221048">r</span>&nbsp;<span class="op" id="3221050">==</span>&nbsp;<span class="ident" id="3221053"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221054">.</span><span class="ident" id="3221055">w</span>&nbsp;<span class="op" id="3221057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221061">if</span>&nbsp;<span class="ident" id="3221064"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221065">.</span><span class="ident" id="3221066">err</span>&nbsp;<span class="op" id="3221070">!=</span>&nbsp;<span class="ident" id="3221073">nil</span>&nbsp;<span class="op" id="3221077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221082">return</span>&nbsp;<span class="num" id="3221089">0</span><span class="op" id="3221090">,</span>&nbsp;<span class="ident" id="3221092"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221093">.</span><span class="ident" id="3221094">readErr</span><span class="op" id="3221101">(</span><span class="op" id="3221102">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221110">if</span>&nbsp;<span class="builtinfunc" id="3221113">len</span><span class="op" id="3221116">(</span><span class="ident" id="3221117"><a href="/bufio/bufio.go.html#3220959">p</a></span><span class="op" id="3221118">)</span>&nbsp;<span class="op" id="3221120">&gt;=</span>&nbsp;<span class="builtinfunc" id="3221123">len</span><span class="op" id="3221126">(</span><span class="ident" id="3221127"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221128">.</span><span class="ident" id="3221129">buf</span><span class="op" id="3221132">)</span>&nbsp;<span class="op" id="3221134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3221139">//&nbsp;Large&nbsp;read,&nbsp;empty&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3221171">//&nbsp;Read&nbsp;directly&nbsp;into&nbsp;p&nbsp;to&nbsp;avoid&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221213"><a href="/bufio/bufio.go.html#3220970">n</a></span><span class="op" id="3221214">,</span>&nbsp;<span class="ident" id="3221216"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221217">.</span><span class="ident" id="3221218">err</span>&nbsp;<span class="op" id="3221222">=</span>&nbsp;<span class="ident" id="3221224"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221225">.</span><span class="ident" id="3221226">rd</span><span class="op" id="3221228">.</span><span class="ident" id="3221229">Read</span><span class="op" id="3221233">(</span><span class="ident" id="3221234"><a href="/bufio/bufio.go.html#3220959">p</a></span><span class="op" id="3221235">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221240">if</span>&nbsp;<span class="ident" id="3221243"><a href="/bufio/bufio.go.html#3220970">n</a></span>&nbsp;<span class="op" id="3221245">&lt;</span>&nbsp;<span class="num" id="3221247">0</span>&nbsp;<span class="op" id="3221249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3221255">panic</span><span class="op" id="3221260">(</span><span class="ident" id="3221261"><a href="/bufio/bufio.go.html#3219267">errNegativeRead</a></span><span class="op" id="3221276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221286">if</span>&nbsp;<span class="ident" id="3221289"><a href="/bufio/bufio.go.html#3220970">n</a></span>&nbsp;<span class="op" id="3221291">&gt;</span>&nbsp;<span class="num" id="3221293">0</span>&nbsp;<span class="op" id="3221295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221301"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221302">.</span><span class="ident" id="3221303">lastByte</span>&nbsp;<span class="op" id="3221312">=</span>&nbsp;<span class="builtintype" id="3221314">int</span><span class="op" id="3221317">(</span><span class="ident" id="3221318"><a href="/bufio/bufio.go.html#3220959">p</a></span><span class="op" id="3221319">[</span><span class="ident" id="3221320"><a href="/bufio/bufio.go.html#3220970">n</a></span><span class="op" id="3221321">-</span><span class="num" id="3221322">1</span><span class="op" id="3221323">]</span><span class="op" id="3221324">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221330"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221331">.</span><span class="ident" id="3221332">lastRuneSize</span>&nbsp;<span class="op" id="3221345">=</span>&nbsp;<span class="op" id="3221347">-</span><span class="num" id="3221348">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221358">return</span>&nbsp;<span class="ident" id="3221365"><a href="/bufio/bufio.go.html#3220970">n</a></span><span class="op" id="3221366">,</span>&nbsp;<span class="ident" id="3221368"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221369">.</span><span class="ident" id="3221370">readErr</span><span class="op" id="3221377">(</span><span class="op" id="3221378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221386"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221387">.</span><span class="ident" id="3221388">fill</span><span class="op" id="3221392">(</span><span class="op" id="3221393">)</span>&nbsp;<span class="comment" id="3221395">//&nbsp;buffer&nbsp;is&nbsp;empty</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221416">if</span>&nbsp;<span class="ident" id="3221419"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221420">.</span><span class="ident" id="3221421">r</span>&nbsp;<span class="op" id="3221423">==</span>&nbsp;<span class="ident" id="3221426"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221427">.</span><span class="ident" id="3221428">w</span>&nbsp;<span class="op" id="3221430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221435">return</span>&nbsp;<span class="num" id="3221442">0</span><span class="op" id="3221443">,</span>&nbsp;<span class="ident" id="3221445"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221446">.</span><span class="ident" id="3221447">readErr</span><span class="op" id="3221454">(</span><span class="op" id="3221455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3221466">//&nbsp;copy&nbsp;as&nbsp;much&nbsp;as&nbsp;we&nbsp;can</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221493"><a href="/bufio/bufio.go.html#3220970">n</a></span>&nbsp;<span class="op" id="3221495">=</span>&nbsp;<span class="builtinfunc" id="3221497">copy</span><span class="op" id="3221501">(</span><span class="ident" id="3221502"><a href="/bufio/bufio.go.html#3220959">p</a></span><span class="op" id="3221503">,</span>&nbsp;<span class="ident" id="3221505"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221506">.</span><span class="ident" id="3221507">buf</span><span class="op" id="3221510">[</span><span class="ident" id="3221511"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221512">.</span><span class="ident" id="3221513">r</span><span class="op" id="3221514">:</span><span class="ident" id="3221515"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221516">.</span><span class="ident" id="3221517">w</span><span class="op" id="3221518">]</span><span class="op" id="3221519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221522"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221523">.</span><span class="ident" id="3221524">r</span>&nbsp;<span class="op" id="3221526">+=</span>&nbsp;<span class="ident" id="3221529"><a href="/bufio/bufio.go.html#3220970">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221532"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221533">.</span><span class="ident" id="3221534">lastByte</span>&nbsp;<span class="op" id="3221543">=</span>&nbsp;<span class="builtintype" id="3221545">int</span><span class="op" id="3221548">(</span><span class="ident" id="3221549"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221550">.</span><span class="ident" id="3221551">buf</span><span class="op" id="3221554">[</span><span class="ident" id="3221555"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221556">.</span><span class="ident" id="3221557">r</span><span class="op" id="3221558">-</span><span class="num" id="3221559">1</span><span class="op" id="3221560">]</span><span class="op" id="3221561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221564"><a href="/bufio/bufio.go.html#3220943">b</a></span><span class="op" id="3221565">.</span><span class="ident" id="3221566">lastRuneSize</span>&nbsp;<span class="op" id="3221579">=</span>&nbsp;<span class="op" id="3221581">-</span><span class="num" id="3221582">1</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221585">return</span>&nbsp;<span class="ident" id="3221592"><a href="/bufio/bufio.go.html#3220970">n</a></span><span class="op" id="3221593">,</span>&nbsp;<span class="ident" id="3221595">nil</span><br>
<span class="lineno"></span><span class="op" id="3221599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3221602">//&nbsp;ReadByte&nbsp;reads&nbsp;and&nbsp;returns&nbsp;a&nbsp;single&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="3221647">//&nbsp;If&nbsp;no&nbsp;byte&nbsp;is&nbsp;available,&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno">190</span><span class="keyword" id="3221693">func</span>&nbsp;<span class="op" id="3221698">(</span><span class="ident" id="3221699">b</span>&nbsp;<span class="op" id="3221701">*</span><span class="ident" id="3221702"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3221708">)</span>&nbsp;<span class="ident" id="3221710">ReadByte</span><span class="op" id="3221718">(</span><span class="op" id="3221719">)</span>&nbsp;<span class="op" id="3221721">(</span><span class="ident" id="3221722">c</span>&nbsp;<span class="builtintype" id="3221724">byte</span><span class="op" id="3221728">,</span>&nbsp;<span class="ident" id="3221730">err</span>&nbsp;<span class="builtintype" id="3221734">error</span><span class="op" id="3221739">)</span>&nbsp;<span class="op" id="3221741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221744"><a href="/bufio/bufio.go.html#3221699">b</a></span><span class="op" id="3221745">.</span><span class="ident" id="3221746">lastRuneSize</span>&nbsp;<span class="op" id="3221759">=</span>&nbsp;<span class="op" id="3221761">-</span><span class="num" id="3221762">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221765">for</span>&nbsp;<span class="ident" id="3221769"><a href="/bufio/bufio.go.html#3221699">b</a></span><span class="op" id="3221770">.</span><span class="ident" id="3221771">r</span>&nbsp;<span class="op" id="3221773">==</span>&nbsp;<span class="ident" id="3221776"><a href="/bufio/bufio.go.html#3221699">b</a></span><span class="op" id="3221777">.</span><span class="ident" id="3221778">w</span>&nbsp;<span class="op" id="3221780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221784">if</span>&nbsp;<span class="ident" id="3221787"><a href="/bufio/bufio.go.html#3221699">b</a></span><span class="op" id="3221788">.</span><span class="ident" id="3221789">err</span>&nbsp;<span class="op" id="3221793">!=</span>&nbsp;<span class="ident" id="3221796">nil</span>&nbsp;<span class="op" id="3221800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221805">return</span>&nbsp;<span class="num" id="3221812">0</span><span class="op" id="3221813">,</span>&nbsp;<span class="ident" id="3221815"><a href="/bufio/bufio.go.html#3221699">b</a></span><span class="op" id="3221816">.</span><span class="ident" id="3221817">readErr</span><span class="op" id="3221824">(</span><span class="op" id="3221825">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221833"><a href="/bufio/bufio.go.html#3221699">b</a></span><span class="op" id="3221834">.</span><span class="ident" id="3221835">fill</span><span class="op" id="3221839">(</span><span class="op" id="3221840">)</span>&nbsp;<span class="comment" id="3221842">//&nbsp;buffer&nbsp;is&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3221862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221865"><a href="/bufio/bufio.go.html#3221722">c</a></span>&nbsp;<span class="op" id="3221867">=</span>&nbsp;<span class="ident" id="3221869"><a href="/bufio/bufio.go.html#3221699">b</a></span><span class="op" id="3221870">.</span><span class="ident" id="3221871">buf</span><span class="op" id="3221874">[</span><span class="ident" id="3221875"><a href="/bufio/bufio.go.html#3221699">b</a></span><span class="op" id="3221876">.</span><span class="ident" id="3221877">r</span><span class="op" id="3221878">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221881"><a href="/bufio/bufio.go.html#3221699">b</a></span><span class="op" id="3221882">.</span><span class="ident" id="3221883">r</span><span class="op" id="3221884">++</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3221888"><a href="/bufio/bufio.go.html#3221699">b</a></span><span class="op" id="3221889">.</span><span class="ident" id="3221890">lastByte</span>&nbsp;<span class="op" id="3221899">=</span>&nbsp;<span class="builtintype" id="3221901">int</span><span class="op" id="3221904">(</span><span class="ident" id="3221905"><a href="/bufio/bufio.go.html#3221722">c</a></span><span class="op" id="3221906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3221909">return</span>&nbsp;<span class="ident" id="3221916"><a href="/bufio/bufio.go.html#3221722">c</a></span><span class="op" id="3221917">,</span>&nbsp;<span class="ident" id="3221919">nil</span><br>
<span class="lineno"></span><span class="op" id="3221923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3221926">//&nbsp;UnreadByte&nbsp;unreads&nbsp;the&nbsp;last&nbsp;byte.&nbsp;&nbsp;Only&nbsp;the&nbsp;most&nbsp;recently&nbsp;read&nbsp;byte&nbsp;can&nbsp;be&nbsp;unread.</span><br>
<span class="lineno">205</span><span class="keyword" id="3222012">func</span>&nbsp;<span class="op" id="3222017">(</span><span class="ident" id="3222018">b</span>&nbsp;<span class="op" id="3222020">*</span><span class="ident" id="3222021"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3222027">)</span>&nbsp;<span class="ident" id="3222029">UnreadByte</span><span class="op" id="3222039">(</span><span class="op" id="3222040">)</span>&nbsp;<span class="builtintype" id="3222042">error</span>&nbsp;<span class="op" id="3222048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222051">if</span>&nbsp;<span class="ident" id="3222054"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222055">.</span><span class="ident" id="3222056">lastByte</span>&nbsp;<span class="op" id="3222065">&lt;</span>&nbsp;<span class="num" id="3222067">0</span>&nbsp;<span class="op" id="3222069">||</span>&nbsp;<span class="ident" id="3222072"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222073">.</span><span class="ident" id="3222074">r</span>&nbsp;<span class="op" id="3222076">==</span>&nbsp;<span class="num" id="3222079">0</span>&nbsp;<span class="op" id="3222081">&amp;&amp;</span>&nbsp;<span class="ident" id="3222084"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222085">.</span><span class="ident" id="3222086">w</span>&nbsp;<span class="op" id="3222088">&gt;</span>&nbsp;<span class="num" id="3222090">0</span>&nbsp;<span class="op" id="3222092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222096">return</span>&nbsp;<span class="ident" id="3222103"><a href="/bufio/bufio.go.html#3217707">ErrInvalidUnreadByte</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3222128">//&nbsp;b.r&nbsp;&gt;&nbsp;0&nbsp;||&nbsp;b.w&nbsp;==&nbsp;0</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222152">if</span>&nbsp;<span class="ident" id="3222155"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222156">.</span><span class="ident" id="3222157">r</span>&nbsp;<span class="op" id="3222159">&gt;</span>&nbsp;<span class="num" id="3222161">0</span>&nbsp;<span class="op" id="3222163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222167"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222168">.</span><span class="ident" id="3222169">r</span><span class="op" id="3222170">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222174">}</span>&nbsp;<span class="keyword" id="3222176">else</span>&nbsp;<span class="op" id="3222181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3222185">//&nbsp;b.r&nbsp;==&nbsp;0&nbsp;&amp;&amp;&nbsp;b.w&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222211"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222212">.</span><span class="ident" id="3222213">w</span>&nbsp;<span class="op" id="3222215">=</span>&nbsp;<span class="num" id="3222217">1</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222223"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222224">.</span><span class="ident" id="3222225">buf</span><span class="op" id="3222228">[</span><span class="ident" id="3222229"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222230">.</span><span class="ident" id="3222231">r</span><span class="op" id="3222232">]</span>&nbsp;<span class="op" id="3222234">=</span>&nbsp;<span class="builtintype" id="3222236">byte</span><span class="op" id="3222240">(</span><span class="ident" id="3222241"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222242">.</span><span class="ident" id="3222243">lastByte</span><span class="op" id="3222251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222254"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222255">.</span><span class="ident" id="3222256">lastByte</span>&nbsp;<span class="op" id="3222265">=</span>&nbsp;<span class="op" id="3222267">-</span><span class="num" id="3222268">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222271"><a href="/bufio/bufio.go.html#3222018">b</a></span><span class="op" id="3222272">.</span><span class="ident" id="3222273">lastRuneSize</span>&nbsp;<span class="op" id="3222286">=</span>&nbsp;<span class="op" id="3222288">-</span><span class="num" id="3222289">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222292">return</span>&nbsp;<span class="ident" id="3222299">nil</span><br>
<span class="lineno">220</span><span class="op" id="3222303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3222306">//&nbsp;ReadRune&nbsp;reads&nbsp;a&nbsp;single&nbsp;UTF-8&nbsp;encoded&nbsp;Unicode&nbsp;character&nbsp;and&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3222381">//&nbsp;rune&nbsp;and&nbsp;its&nbsp;size&nbsp;in&nbsp;bytes.&nbsp;If&nbsp;the&nbsp;encoded&nbsp;rune&nbsp;is&nbsp;invalid,&nbsp;it&nbsp;consumes&nbsp;one&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="3222465">//&nbsp;and&nbsp;returns&nbsp;unicode.ReplacementChar&nbsp;(U+FFFD)&nbsp;with&nbsp;a&nbsp;size&nbsp;of&nbsp;1.</span><br>
<span class="lineno">225</span><span class="keyword" id="3222531">func</span>&nbsp;<span class="op" id="3222536">(</span><span class="ident" id="3222537">b</span>&nbsp;<span class="op" id="3222539">*</span><span class="ident" id="3222540"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3222546">)</span>&nbsp;<span class="ident" id="3222548">ReadRune</span><span class="op" id="3222556">(</span><span class="op" id="3222557">)</span>&nbsp;<span class="op" id="3222559">(</span><span class="ident" id="3222560">r</span>&nbsp;<span class="builtintype" id="3222562">rune</span><span class="op" id="3222566">,</span>&nbsp;<span class="ident" id="3222568">size</span>&nbsp;<span class="builtintype" id="3222573">int</span><span class="op" id="3222576">,</span>&nbsp;<span class="ident" id="3222578">err</span>&nbsp;<span class="builtintype" id="3222582">error</span><span class="op" id="3222587">)</span>&nbsp;<span class="op" id="3222589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222592">for</span>&nbsp;<span class="ident" id="3222596"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222597">.</span><span class="ident" id="3222598">r</span><span class="op" id="3222599">+</span><span class="ident" id="3222600"><a href="/bufio/bufio.go.html#3217648">utf8</a></span><span class="op" id="3222604">.</span><span class="ident" id="3222605">UTFMax</span>&nbsp;<span class="op" id="3222612">&gt;</span>&nbsp;<span class="ident" id="3222614"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222615">.</span><span class="ident" id="3222616">w</span>&nbsp;<span class="op" id="3222618">&amp;&amp;</span>&nbsp;<span class="op" id="3222621">!</span><span class="ident" id="3222622"><a href="/bufio/bufio.go.html#3217648">utf8</a></span><span class="op" id="3222626">.</span><span class="ident" id="3222627">FullRune</span><span class="op" id="3222635">(</span><span class="ident" id="3222636"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222637">.</span><span class="ident" id="3222638">buf</span><span class="op" id="3222641">[</span><span class="ident" id="3222642"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222643">.</span><span class="ident" id="3222644">r</span><span class="op" id="3222645">:</span><span class="ident" id="3222646"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222647">.</span><span class="ident" id="3222648">w</span><span class="op" id="3222649">]</span><span class="op" id="3222650">)</span>&nbsp;<span class="op" id="3222652">&amp;&amp;</span>&nbsp;<span class="ident" id="3222655"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222656">.</span><span class="ident" id="3222657">err</span>&nbsp;<span class="op" id="3222661">==</span>&nbsp;<span class="ident" id="3222664">nil</span>&nbsp;<span class="op" id="3222668">&amp;&amp;</span>&nbsp;<span class="ident" id="3222671"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222672">.</span><span class="ident" id="3222673">w</span><span class="op" id="3222674">-</span><span class="ident" id="3222675"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222676">.</span><span class="ident" id="3222677">r</span>&nbsp;<span class="op" id="3222679">&lt;</span>&nbsp;<span class="builtinfunc" id="3222681">len</span><span class="op" id="3222684">(</span><span class="ident" id="3222685"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222686">.</span><span class="ident" id="3222687">buf</span><span class="op" id="3222690">)</span>&nbsp;<span class="op" id="3222692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222696"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222697">.</span><span class="ident" id="3222698">fill</span><span class="op" id="3222702">(</span><span class="op" id="3222703">)</span>&nbsp;<span class="comment" id="3222705">//&nbsp;b.w-b.r&nbsp;&lt;&nbsp;len(buf)&nbsp;=&gt;&nbsp;buffer&nbsp;is&nbsp;not&nbsp;full</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222753"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222754">.</span><span class="ident" id="3222755">lastRuneSize</span>&nbsp;<span class="op" id="3222768">=</span>&nbsp;<span class="op" id="3222770">-</span><span class="num" id="3222771">1</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222774">if</span>&nbsp;<span class="ident" id="3222777"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222778">.</span><span class="ident" id="3222779">r</span>&nbsp;<span class="op" id="3222781">==</span>&nbsp;<span class="ident" id="3222784"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222785">.</span><span class="ident" id="3222786">w</span>&nbsp;<span class="op" id="3222788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222792">return</span>&nbsp;<span class="num" id="3222799">0</span><span class="op" id="3222800">,</span>&nbsp;<span class="num" id="3222802">0</span><span class="op" id="3222803">,</span>&nbsp;<span class="ident" id="3222805"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222806">.</span><span class="ident" id="3222807">readErr</span><span class="op" id="3222814">(</span><span class="op" id="3222815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222821"><a href="/bufio/bufio.go.html#3222560">r</a></span><span class="op" id="3222822">,</span>&nbsp;<span class="ident" id="3222824"><a href="/bufio/bufio.go.html#3222568">size</a></span>&nbsp;<span class="op" id="3222829">=</span>&nbsp;<span class="builtintype" id="3222831">rune</span><span class="op" id="3222835">(</span><span class="ident" id="3222836"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222837">.</span><span class="ident" id="3222838">buf</span><span class="op" id="3222841">[</span><span class="ident" id="3222842"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222843">.</span><span class="ident" id="3222844">r</span><span class="op" id="3222845">]</span><span class="op" id="3222846">)</span><span class="op" id="3222847">,</span>&nbsp;<span class="num" id="3222849">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222852">if</span>&nbsp;<span class="ident" id="3222855"><a href="/bufio/bufio.go.html#3222560">r</a></span>&nbsp;<span class="op" id="3222857">&gt;=</span>&nbsp;<span class="num" id="3222860">0x80</span>&nbsp;<span class="op" id="3222865">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222869"><a href="/bufio/bufio.go.html#3222560">r</a></span><span class="op" id="3222870">,</span>&nbsp;<span class="ident" id="3222872"><a href="/bufio/bufio.go.html#3222568">size</a></span>&nbsp;<span class="op" id="3222877">=</span>&nbsp;<span class="ident" id="3222879"><a href="/bufio/bufio.go.html#3217648">utf8</a></span><span class="op" id="3222883">.</span><span class="ident" id="3222884">DecodeRune</span><span class="op" id="3222894">(</span><span class="ident" id="3222895"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222896">.</span><span class="ident" id="3222897">buf</span><span class="op" id="3222900">[</span><span class="ident" id="3222901"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222902">.</span><span class="ident" id="3222903">r</span><span class="op" id="3222904">:</span><span class="ident" id="3222905"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222906">.</span><span class="ident" id="3222907">w</span><span class="op" id="3222908">]</span><span class="op" id="3222909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3222912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222915"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222916">.</span><span class="ident" id="3222917">r</span>&nbsp;<span class="op" id="3222919">+=</span>&nbsp;<span class="ident" id="3222922"><a href="/bufio/bufio.go.html#3222568">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222928"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222929">.</span><span class="ident" id="3222930">lastByte</span>&nbsp;<span class="op" id="3222939">=</span>&nbsp;<span class="builtintype" id="3222941">int</span><span class="op" id="3222944">(</span><span class="ident" id="3222945"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222946">.</span><span class="ident" id="3222947">buf</span><span class="op" id="3222950">[</span><span class="ident" id="3222951"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222952">.</span><span class="ident" id="3222953">r</span><span class="op" id="3222954">-</span><span class="num" id="3222955">1</span><span class="op" id="3222956">]</span><span class="op" id="3222957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3222960"><a href="/bufio/bufio.go.html#3222537">b</a></span><span class="op" id="3222961">.</span><span class="ident" id="3222962">lastRuneSize</span>&nbsp;<span class="op" id="3222975">=</span>&nbsp;<span class="ident" id="3222977"><a href="/bufio/bufio.go.html#3222568">size</a></span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3222983">return</span>&nbsp;<span class="ident" id="3222990"><a href="/bufio/bufio.go.html#3222560">r</a></span><span class="op" id="3222991">,</span>&nbsp;<span class="ident" id="3222993"><a href="/bufio/bufio.go.html#3222568">size</a></span><span class="op" id="3222997">,</span>&nbsp;<span class="ident" id="3222999">nil</span><br>
<span class="lineno"></span><span class="op" id="3223003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3223006">//&nbsp;UnreadRune&nbsp;unreads&nbsp;the&nbsp;last&nbsp;rune.&nbsp;&nbsp;If&nbsp;the&nbsp;most&nbsp;recent&nbsp;read&nbsp;operation&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="3223081">//&nbsp;the&nbsp;buffer&nbsp;was&nbsp;not&nbsp;a&nbsp;ReadRune,&nbsp;UnreadRune&nbsp;returns&nbsp;an&nbsp;error.&nbsp;&nbsp;(In&nbsp;this</span><br>
<span class="lineno">245</span><span class="comment" id="3223154">//&nbsp;regard&nbsp;it&nbsp;is&nbsp;stricter&nbsp;than&nbsp;UnreadByte,&nbsp;which&nbsp;will&nbsp;unread&nbsp;the&nbsp;last&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="3223228">//&nbsp;from&nbsp;any&nbsp;read&nbsp;operation.)</span><br>
<span class="lineno"></span><span class="keyword" id="3223257">func</span>&nbsp;<span class="op" id="3223262">(</span><span class="ident" id="3223263">b</span>&nbsp;<span class="op" id="3223265">*</span><span class="ident" id="3223266"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3223272">)</span>&nbsp;<span class="ident" id="3223274">UnreadRune</span><span class="op" id="3223284">(</span><span class="op" id="3223285">)</span>&nbsp;<span class="builtintype" id="3223287">error</span>&nbsp;<span class="op" id="3223293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223296">if</span>&nbsp;<span class="ident" id="3223299"><a href="/bufio/bufio.go.html#3223263">b</a></span><span class="op" id="3223300">.</span><span class="ident" id="3223301">lastRuneSize</span>&nbsp;<span class="op" id="3223314">&lt;</span>&nbsp;<span class="num" id="3223316">0</span>&nbsp;<span class="op" id="3223318">||</span>&nbsp;<span class="ident" id="3223321"><a href="/bufio/bufio.go.html#3223263">b</a></span><span class="op" id="3223322">.</span><span class="ident" id="3223323">r</span>&nbsp;<span class="op" id="3223325">&lt;</span>&nbsp;<span class="ident" id="3223327"><a href="/bufio/bufio.go.html#3223263">b</a></span><span class="op" id="3223328">.</span><span class="ident" id="3223329">lastRuneSize</span>&nbsp;<span class="op" id="3223342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223346">return</span>&nbsp;<span class="ident" id="3223353"><a href="/bufio/bufio.go.html#3217778">ErrInvalidUnreadRune</a></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3223375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3223378"><a href="/bufio/bufio.go.html#3223263">b</a></span><span class="op" id="3223379">.</span><span class="ident" id="3223380">r</span>&nbsp;<span class="op" id="3223382">-=</span>&nbsp;<span class="ident" id="3223385"><a href="/bufio/bufio.go.html#3223263">b</a></span><span class="op" id="3223386">.</span><span class="ident" id="3223387">lastRuneSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3223401"><a href="/bufio/bufio.go.html#3223263">b</a></span><span class="op" id="3223402">.</span><span class="ident" id="3223403">lastByte</span>&nbsp;<span class="op" id="3223412">=</span>&nbsp;<span class="op" id="3223414">-</span><span class="num" id="3223415">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3223418"><a href="/bufio/bufio.go.html#3223263">b</a></span><span class="op" id="3223419">.</span><span class="ident" id="3223420">lastRuneSize</span>&nbsp;<span class="op" id="3223433">=</span>&nbsp;<span class="op" id="3223435">-</span><span class="num" id="3223436">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3223439">return</span>&nbsp;<span class="ident" id="3223446">nil</span><br>
<span class="lineno">255</span><span class="op" id="3223450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3223453">//&nbsp;Buffered&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;that&nbsp;can&nbsp;be&nbsp;read&nbsp;from&nbsp;the&nbsp;current&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3223535">func</span>&nbsp;<span class="op" id="3223540">(</span><span class="ident" id="3223541">b</span>&nbsp;<span class="op" id="3223543">*</span><span class="ident" id="3223544"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3223550">)</span>&nbsp;<span class="ident" id="3223552">Buffered</span><span class="op" id="3223560">(</span><span class="op" id="3223561">)</span>&nbsp;<span class="builtintype" id="3223563">int</span>&nbsp;<span class="op" id="3223567">{</span>&nbsp;<span class="keyword" id="3223569">return</span>&nbsp;<span class="ident" id="3223576"><a href="/bufio/bufio.go.html#3223541">b</a></span><span class="op" id="3223577">.</span><span class="ident" id="3223578">w</span>&nbsp;<span class="op" id="3223580">-</span>&nbsp;<span class="ident" id="3223582"><a href="/bufio/bufio.go.html#3223541">b</a></span><span class="op" id="3223583">.</span><span class="ident" id="3223584">r</span>&nbsp;<span class="op" id="3223586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="3223589">//&nbsp;ReadSlice&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="3223658">//&nbsp;returning&nbsp;a&nbsp;slice&nbsp;pointing&nbsp;at&nbsp;the&nbsp;bytes&nbsp;in&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3223716">//&nbsp;The&nbsp;bytes&nbsp;stop&nbsp;being&nbsp;valid&nbsp;at&nbsp;the&nbsp;next&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="3223764">//&nbsp;If&nbsp;ReadSlice&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="3223828">//&nbsp;it&nbsp;returns&nbsp;all&nbsp;the&nbsp;data&nbsp;in&nbsp;the&nbsp;buffer&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno">265</span><span class="comment" id="3223906">//&nbsp;ReadSlice&nbsp;fails&nbsp;with&nbsp;error&nbsp;ErrBufferFull&nbsp;if&nbsp;the&nbsp;buffer&nbsp;fills&nbsp;without&nbsp;a&nbsp;delim.</span><br>
<span class="lineno"></span><span class="comment" id="3223987">//&nbsp;Because&nbsp;the&nbsp;data&nbsp;returned&nbsp;from&nbsp;ReadSlice&nbsp;will&nbsp;be&nbsp;overwritten</span><br>
<span class="lineno"></span><span class="comment" id="3224051">//&nbsp;by&nbsp;the&nbsp;next&nbsp;I/O&nbsp;operation,&nbsp;most&nbsp;clients&nbsp;should&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="3224105">//&nbsp;ReadBytes&nbsp;or&nbsp;ReadString&nbsp;instead.</span><br>
<span class="lineno"></span><span class="comment" id="3224141">//&nbsp;ReadSlice&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;line&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;delim.</span><br>
<span class="lineno">270</span><span class="keyword" id="3224216">func</span>&nbsp;<span class="op" id="3224221">(</span><span class="ident" id="3224222">b</span>&nbsp;<span class="op" id="3224224">*</span><span class="ident" id="3224225"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3224231">)</span>&nbsp;<span class="ident" id="3224233">ReadSlice</span><span class="op" id="3224242">(</span><span class="ident" id="3224243">delim</span>&nbsp;<span class="builtintype" id="3224249">byte</span><span class="op" id="3224253">)</span>&nbsp;<span class="op" id="3224255">(</span><span class="ident" id="3224256">line</span>&nbsp;<span class="op" id="3224261">[</span><span class="op" id="3224262">]</span><span class="builtintype" id="3224263">byte</span><span class="op" id="3224267">,</span>&nbsp;<span class="ident" id="3224269">err</span>&nbsp;<span class="builtintype" id="3224273">error</span><span class="op" id="3224278">)</span>&nbsp;<span class="op" id="3224280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224283">for</span>&nbsp;<span class="op" id="3224287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3224291">//&nbsp;Search&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224311">if</span>&nbsp;<span class="ident" id="3224314">i</span>&nbsp;<span class="op" id="3224316">:=</span>&nbsp;<span class="ident" id="3224319"><a href="/bufio/bufio.go.html#3217623">bytes</a></span><span class="op" id="3224324">.</span><span class="ident" id="3224325">IndexByte</span><span class="op" id="3224334">(</span><span class="ident" id="3224335"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224336">.</span><span class="ident" id="3224337">buf</span><span class="op" id="3224340">[</span><span class="ident" id="3224341"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224342">.</span><span class="ident" id="3224343">r</span><span class="op" id="3224344">:</span><span class="ident" id="3224345"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224346">.</span><span class="ident" id="3224347">w</span><span class="op" id="3224348">]</span><span class="op" id="3224349">,</span>&nbsp;<span class="ident" id="3224351"><a href="/bufio/bufio.go.html#3224243">delim</a></span><span class="op" id="3224356">)</span><span class="op" id="3224357">;</span>&nbsp;<span class="ident" id="3224359"><a href="/bufio/bufio.go.html#3224314">i</a></span>&nbsp;<span class="op" id="3224361">&gt;=</span>&nbsp;<span class="num" id="3224364">0</span>&nbsp;<span class="op" id="3224366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224371"><a href="/bufio/bufio.go.html#3224256">line</a></span>&nbsp;<span class="op" id="3224376">=</span>&nbsp;<span class="ident" id="3224378"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224379">.</span><span class="ident" id="3224380">buf</span><span class="op" id="3224383">[</span><span class="ident" id="3224384"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224385">.</span><span class="ident" id="3224386">r</span>&nbsp;<span class="op" id="3224388">:</span>&nbsp;<span class="ident" id="3224390"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224391">.</span><span class="ident" id="3224392">r</span><span class="op" id="3224393">+</span><span class="ident" id="3224394"><a href="/bufio/bufio.go.html#3224314">i</a></span><span class="op" id="3224395">+</span><span class="num" id="3224396">1</span><span class="op" id="3224397">]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224402"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224403">.</span><span class="ident" id="3224404">r</span>&nbsp;<span class="op" id="3224406">+=</span>&nbsp;<span class="ident" id="3224409"><a href="/bufio/bufio.go.html#3224314">i</a></span>&nbsp;<span class="op" id="3224411">+</span>&nbsp;<span class="num" id="3224413">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224418">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3224431">//&nbsp;Pending&nbsp;error?</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224451">if</span>&nbsp;<span class="ident" id="3224454"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224455">.</span><span class="ident" id="3224456">err</span>&nbsp;<span class="op" id="3224460">!=</span>&nbsp;<span class="ident" id="3224463">nil</span>&nbsp;<span class="op" id="3224467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224472"><a href="/bufio/bufio.go.html#3224256">line</a></span>&nbsp;<span class="op" id="3224477">=</span>&nbsp;<span class="ident" id="3224479"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224480">.</span><span class="ident" id="3224481">buf</span><span class="op" id="3224484">[</span><span class="ident" id="3224485"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224486">.</span><span class="ident" id="3224487">r</span><span class="op" id="3224488">:</span><span class="ident" id="3224489"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224490">.</span><span class="ident" id="3224491">w</span><span class="op" id="3224492">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224497"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224498">.</span><span class="ident" id="3224499">r</span>&nbsp;<span class="op" id="3224501">=</span>&nbsp;<span class="ident" id="3224503"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224504">.</span><span class="ident" id="3224505">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224510"><a href="/bufio/bufio.go.html#3224269">err</a></span>&nbsp;<span class="op" id="3224514">=</span>&nbsp;<span class="ident" id="3224516"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224517">.</span><span class="ident" id="3224518">readErr</span><span class="op" id="3224525">(</span><span class="op" id="3224526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224531">break</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3224544">//&nbsp;Buffer&nbsp;full?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224562">if</span>&nbsp;<span class="ident" id="3224565"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224566">.</span><span class="ident" id="3224567">Buffered</span><span class="op" id="3224575">(</span><span class="op" id="3224576">)</span>&nbsp;<span class="op" id="3224578">&gt;=</span>&nbsp;<span class="builtinfunc" id="3224581">len</span><span class="op" id="3224584">(</span><span class="ident" id="3224585"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224586">.</span><span class="ident" id="3224587">buf</span><span class="op" id="3224590">)</span>&nbsp;<span class="op" id="3224592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224597"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224598">.</span><span class="ident" id="3224599">r</span>&nbsp;<span class="op" id="3224601">=</span>&nbsp;<span class="ident" id="3224603"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224604">.</span><span class="ident" id="3224605">w</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224610"><a href="/bufio/bufio.go.html#3224256">line</a></span>&nbsp;<span class="op" id="3224615">=</span>&nbsp;<span class="ident" id="3224617"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224618">.</span><span class="ident" id="3224619">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224626"><a href="/bufio/bufio.go.html#3224269">err</a></span>&nbsp;<span class="op" id="3224630">=</span>&nbsp;<span class="ident" id="3224632"><a href="/bufio/bufio.go.html#3217849">ErrBufferFull</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224649">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224662"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224663">.</span><span class="ident" id="3224664">fill</span><span class="op" id="3224668">(</span><span class="op" id="3224669">)</span>&nbsp;<span class="comment" id="3224671">//&nbsp;buffer&nbsp;is&nbsp;not&nbsp;full</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3224698">//&nbsp;Handle&nbsp;last&nbsp;byte,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224728">if</span>&nbsp;<span class="ident" id="3224731">i</span>&nbsp;<span class="op" id="3224733">:=</span>&nbsp;<span class="builtinfunc" id="3224736">len</span><span class="op" id="3224739">(</span><span class="ident" id="3224740"><a href="/bufio/bufio.go.html#3224256">line</a></span><span class="op" id="3224744">)</span>&nbsp;<span class="op" id="3224746">-</span>&nbsp;<span class="num" id="3224748">1</span><span class="op" id="3224749">;</span>&nbsp;<span class="ident" id="3224751"><a href="/bufio/bufio.go.html#3224731">i</a></span>&nbsp;<span class="op" id="3224753">&gt;=</span>&nbsp;<span class="num" id="3224756">0</span>&nbsp;<span class="op" id="3224758">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224762"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224763">.</span><span class="ident" id="3224764">lastByte</span>&nbsp;<span class="op" id="3224773">=</span>&nbsp;<span class="builtintype" id="3224775">int</span><span class="op" id="3224778">(</span><span class="ident" id="3224779"><a href="/bufio/bufio.go.html#3224256">line</a></span><span class="op" id="3224783">[</span><span class="ident" id="3224784"><a href="/bufio/bufio.go.html#3224731">i</a></span><span class="op" id="3224785">]</span><span class="op" id="3224786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3224790"><a href="/bufio/bufio.go.html#3224222">b</a></span><span class="op" id="3224791">.</span><span class="ident" id="3224792">lastRuneSize</span>&nbsp;<span class="op" id="3224805">=</span>&nbsp;<span class="op" id="3224807">-</span><span class="num" id="3224808">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3224811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3224815">return</span><br>
<span class="lineno">305</span><span class="op" id="3224822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3224825">//&nbsp;ReadLine&nbsp;is&nbsp;a&nbsp;low-level&nbsp;line-reading&nbsp;primitive.&nbsp;Most&nbsp;callers&nbsp;should&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="3224900">//&nbsp;ReadBytes(&#39;\n&#39;)&nbsp;or&nbsp;ReadString(&#39;\n&#39;)&nbsp;instead&nbsp;or&nbsp;use&nbsp;a&nbsp;Scanner.</span><br>
<span class="lineno"></span><span class="comment" id="3224965">//</span><br>
<span class="lineno">310</span><span class="comment" id="3224968">//&nbsp;ReadLine&nbsp;tries&nbsp;to&nbsp;return&nbsp;a&nbsp;single&nbsp;line,&nbsp;not&nbsp;including&nbsp;the&nbsp;end-of-line&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="3225048">//&nbsp;If&nbsp;the&nbsp;line&nbsp;was&nbsp;too&nbsp;long&nbsp;for&nbsp;the&nbsp;buffer&nbsp;then&nbsp;isPrefix&nbsp;is&nbsp;set&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3225120">//&nbsp;beginning&nbsp;of&nbsp;the&nbsp;line&nbsp;is&nbsp;returned.&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;line&nbsp;will&nbsp;be&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="3225196">//&nbsp;from&nbsp;future&nbsp;calls.&nbsp;isPrefix&nbsp;will&nbsp;be&nbsp;false&nbsp;when&nbsp;returning&nbsp;the&nbsp;last&nbsp;fragment</span><br>
<span class="lineno"></span><span class="comment" id="3225274">//&nbsp;of&nbsp;the&nbsp;line.&nbsp;The&nbsp;returned&nbsp;buffer&nbsp;is&nbsp;only&nbsp;valid&nbsp;until&nbsp;the&nbsp;next&nbsp;call&nbsp;to</span><br>
<span class="lineno">315</span><span class="comment" id="3225347">//&nbsp;ReadLine.&nbsp;ReadLine&nbsp;either&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;line&nbsp;or&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="3225423">//&nbsp;never&nbsp;both.</span><br>
<span class="lineno"></span><span class="comment" id="3225438">//</span><br>
<span class="lineno"></span><span class="comment" id="3225441">//&nbsp;The&nbsp;text&nbsp;returned&nbsp;from&nbsp;ReadLine&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;line&nbsp;end&nbsp;(&#34;\r\n&#34;&nbsp;or&nbsp;&#34;\n&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="3225524">//&nbsp;No&nbsp;indication&nbsp;or&nbsp;error&nbsp;is&nbsp;given&nbsp;if&nbsp;the&nbsp;input&nbsp;ends&nbsp;without&nbsp;a&nbsp;final&nbsp;line&nbsp;end.</span><br>
<span class="lineno">320</span><span class="comment" id="3225603">//&nbsp;Calling&nbsp;UnreadByte&nbsp;after&nbsp;ReadLine&nbsp;will&nbsp;always&nbsp;unread&nbsp;the&nbsp;last&nbsp;byte&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="3225678">//&nbsp;(possibly&nbsp;a&nbsp;character&nbsp;belonging&nbsp;to&nbsp;the&nbsp;line&nbsp;end)&nbsp;even&nbsp;if&nbsp;that&nbsp;byte&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3225755">//&nbsp;part&nbsp;of&nbsp;the&nbsp;line&nbsp;returned&nbsp;by&nbsp;ReadLine.</span><br>
<span class="lineno"></span><span class="keyword" id="3225797">func</span>&nbsp;<span class="op" id="3225802">(</span><span class="ident" id="3225803">b</span>&nbsp;<span class="op" id="3225805">*</span><span class="ident" id="3225806"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3225812">)</span>&nbsp;<span class="ident" id="3225814">ReadLine</span><span class="op" id="3225822">(</span><span class="op" id="3225823">)</span>&nbsp;<span class="op" id="3225825">(</span><span class="ident" id="3225826">line</span>&nbsp;<span class="op" id="3225831">[</span><span class="op" id="3225832">]</span><span class="builtintype" id="3225833">byte</span><span class="op" id="3225837">,</span>&nbsp;<span class="ident" id="3225839">isPrefix</span>&nbsp;<span class="builtintype" id="3225848">bool</span><span class="op" id="3225852">,</span>&nbsp;<span class="ident" id="3225854">err</span>&nbsp;<span class="builtintype" id="3225858">error</span><span class="op" id="3225863">)</span>&nbsp;<span class="op" id="3225865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3225868"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3225872">,</span>&nbsp;<span class="ident" id="3225874"><a href="/bufio/bufio.go.html#3225854">err</a></span>&nbsp;<span class="op" id="3225878">=</span>&nbsp;<span class="ident" id="3225880"><a href="/bufio/bufio.go.html#3225803">b</a></span><span class="op" id="3225881">.</span><span class="ident" id="3225882">ReadSlice</span><span class="op" id="3225891">(</span><span class="string" id="3225892">&#39;\n&#39;</span><span class="op" id="3225896">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3225899">if</span>&nbsp;<span class="ident" id="3225902"><a href="/bufio/bufio.go.html#3225854">err</a></span>&nbsp;<span class="op" id="3225906">==</span>&nbsp;<span class="ident" id="3225909"><a href="/bufio/bufio.go.html#3217849">ErrBufferFull</a></span>&nbsp;<span class="op" id="3225923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3225927">//&nbsp;Handle&nbsp;the&nbsp;case&nbsp;where&nbsp;&#34;\r\n&#34;&nbsp;straddles&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3225983">if</span>&nbsp;<span class="builtinfunc" id="3225986">len</span><span class="op" id="3225989">(</span><span class="ident" id="3225990"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3225994">)</span>&nbsp;<span class="op" id="3225996">&gt;</span>&nbsp;<span class="num" id="3225998">0</span>&nbsp;<span class="op" id="3226000">&amp;&amp;</span>&nbsp;<span class="ident" id="3226003"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226007">[</span><span class="builtinfunc" id="3226008">len</span><span class="op" id="3226011">(</span><span class="ident" id="3226012"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226016">)</span><span class="op" id="3226017">-</span><span class="num" id="3226018">1</span><span class="op" id="3226019">]</span>&nbsp;<span class="op" id="3226021">==</span>&nbsp;<span class="string" id="3226024">&#39;\r&#39;</span>&nbsp;<span class="op" id="3226029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3226034">//&nbsp;Put&nbsp;the&nbsp;&#39;\r&#39;&nbsp;back&nbsp;on&nbsp;buf&nbsp;and&nbsp;drop&nbsp;it&nbsp;from&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3226088">//&nbsp;Let&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadLine&nbsp;check&nbsp;for&nbsp;&#34;\r\n&#34;.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226142">if</span>&nbsp;<span class="ident" id="3226145"><a href="/bufio/bufio.go.html#3225803">b</a></span><span class="op" id="3226146">.</span><span class="ident" id="3226147">r</span>&nbsp;<span class="op" id="3226149">==</span>&nbsp;<span class="num" id="3226152">0</span>&nbsp;<span class="op" id="3226154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3226160">//&nbsp;should&nbsp;be&nbsp;unreachable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3226189">panic</span><span class="op" id="3226194">(</span><span class="string" id="3226195">&#34;bufio:&nbsp;tried&nbsp;to&nbsp;rewind&nbsp;past&nbsp;start&nbsp;of&nbsp;buffer&#34;</span><span class="op" id="3226240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3226245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3226250"><a href="/bufio/bufio.go.html#3225803">b</a></span><span class="op" id="3226251">.</span><span class="ident" id="3226252">r</span><span class="op" id="3226253">--</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3226259"><a href="/bufio/bufio.go.html#3225826">line</a></span>&nbsp;<span class="op" id="3226264">=</span>&nbsp;<span class="ident" id="3226266"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226270">[</span><span class="op" id="3226271">:</span><span class="builtinfunc" id="3226272">len</span><span class="op" id="3226275">(</span><span class="ident" id="3226276"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226280">)</span><span class="op" id="3226281">-</span><span class="num" id="3226282">1</span><span class="op" id="3226283">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3226287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226291">return</span>&nbsp;<span class="ident" id="3226298"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226302">,</span>&nbsp;<span class="ident" id="3226304">true</span><span class="op" id="3226308">,</span>&nbsp;<span class="ident" id="3226310">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3226315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226319">if</span>&nbsp;<span class="builtinfunc" id="3226322">len</span><span class="op" id="3226325">(</span><span class="ident" id="3226326"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226330">)</span>&nbsp;<span class="op" id="3226332">==</span>&nbsp;<span class="num" id="3226335">0</span>&nbsp;<span class="op" id="3226337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226341">if</span>&nbsp;<span class="ident" id="3226344"><a href="/bufio/bufio.go.html#3225854">err</a></span>&nbsp;<span class="op" id="3226348">!=</span>&nbsp;<span class="ident" id="3226351">nil</span>&nbsp;<span class="op" id="3226355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3226360"><a href="/bufio/bufio.go.html#3225826">line</a></span>&nbsp;<span class="op" id="3226365">=</span>&nbsp;<span class="ident" id="3226367">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3226373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226377">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3226385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3226388"><a href="/bufio/bufio.go.html#3225854">err</a></span>&nbsp;<span class="op" id="3226392">=</span>&nbsp;<span class="ident" id="3226394">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226400">if</span>&nbsp;<span class="ident" id="3226403"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226407">[</span><span class="builtinfunc" id="3226408">len</span><span class="op" id="3226411">(</span><span class="ident" id="3226412"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226416">)</span><span class="op" id="3226417">-</span><span class="num" id="3226418">1</span><span class="op" id="3226419">]</span>&nbsp;<span class="op" id="3226421">==</span>&nbsp;<span class="string" id="3226424">&#39;\n&#39;</span>&nbsp;<span class="op" id="3226429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3226433">drop</span>&nbsp;<span class="op" id="3226438">:=</span>&nbsp;<span class="num" id="3226441">1</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226445">if</span>&nbsp;<span class="builtinfunc" id="3226448">len</span><span class="op" id="3226451">(</span><span class="ident" id="3226452"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226456">)</span>&nbsp;<span class="op" id="3226458">&gt;</span>&nbsp;<span class="num" id="3226460">1</span>&nbsp;<span class="op" id="3226462">&amp;&amp;</span>&nbsp;<span class="ident" id="3226465"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226469">[</span><span class="builtinfunc" id="3226470">len</span><span class="op" id="3226473">(</span><span class="ident" id="3226474"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226478">)</span><span class="op" id="3226479">-</span><span class="num" id="3226480">2</span><span class="op" id="3226481">]</span>&nbsp;<span class="op" id="3226483">==</span>&nbsp;<span class="string" id="3226486">&#39;\r&#39;</span>&nbsp;<span class="op" id="3226491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3226496"><a href="/bufio/bufio.go.html#3226433">drop</a></span>&nbsp;<span class="op" id="3226501">=</span>&nbsp;<span class="num" id="3226503">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3226507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3226511"><a href="/bufio/bufio.go.html#3225826">line</a></span>&nbsp;<span class="op" id="3226516">=</span>&nbsp;<span class="ident" id="3226518"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226522">[</span><span class="op" id="3226523">:</span><span class="builtinfunc" id="3226524">len</span><span class="op" id="3226527">(</span><span class="ident" id="3226528"><a href="/bufio/bufio.go.html#3225826">line</a></span><span class="op" id="3226532">)</span><span class="op" id="3226533">-</span><span class="ident" id="3226534"><a href="/bufio/bufio.go.html#3226433">drop</a></span><span class="op" id="3226538">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3226541">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3226544">return</span><br>
<span class="lineno"></span><span class="op" id="3226551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3226554">//&nbsp;ReadBytes&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="3226623">//&nbsp;returning&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno">360</span><span class="comment" id="3226699">//&nbsp;If&nbsp;ReadBytes&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="3226763">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno"></span><span class="comment" id="3226845">//&nbsp;ReadBytes&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3226926">//&nbsp;delim.</span><br>
<span class="lineno"></span><span class="comment" id="3226936">//&nbsp;For&nbsp;simple&nbsp;uses,&nbsp;a&nbsp;Scanner&nbsp;may&nbsp;be&nbsp;more&nbsp;convenient.</span><br>
<span class="lineno">365</span><span class="keyword" id="3226990">func</span>&nbsp;<span class="op" id="3226995">(</span><span class="ident" id="3226996">b</span>&nbsp;<span class="op" id="3226998">*</span><span class="ident" id="3226999"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3227005">)</span>&nbsp;<span class="ident" id="3227007">ReadBytes</span><span class="op" id="3227016">(</span><span class="ident" id="3227017">delim</span>&nbsp;<span class="builtintype" id="3227023">byte</span><span class="op" id="3227027">)</span>&nbsp;<span class="op" id="3227029">(</span><span class="ident" id="3227030">line</span>&nbsp;<span class="op" id="3227035">[</span><span class="op" id="3227036">]</span><span class="builtintype" id="3227037">byte</span><span class="op" id="3227041">,</span>&nbsp;<span class="ident" id="3227043">err</span>&nbsp;<span class="builtintype" id="3227047">error</span><span class="op" id="3227052">)</span>&nbsp;<span class="op" id="3227054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3227057">//&nbsp;Use&nbsp;ReadSlice&nbsp;to&nbsp;look&nbsp;for&nbsp;array,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3227094">//&nbsp;accumulating&nbsp;full&nbsp;buffers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227125">var</span>&nbsp;<span class="ident" id="3227129">frag</span>&nbsp;<span class="op" id="3227134">[</span><span class="op" id="3227135">]</span><span class="builtintype" id="3227136">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227142">var</span>&nbsp;<span class="ident" id="3227146">full</span>&nbsp;<span class="op" id="3227151">[</span><span class="op" id="3227152">]</span><span class="op" id="3227153">[</span><span class="op" id="3227154">]</span><span class="builtintype" id="3227155">byte</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227161"><a href="/bufio/bufio.go.html#3227043">err</a></span>&nbsp;<span class="op" id="3227165">=</span>&nbsp;<span class="ident" id="3227167">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227173">for</span>&nbsp;<span class="op" id="3227177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227181">var</span>&nbsp;<span class="ident" id="3227185">e</span>&nbsp;<span class="builtintype" id="3227187">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227195"><a href="/bufio/bufio.go.html#3227129">frag</a></span><span class="op" id="3227199">,</span>&nbsp;<span class="ident" id="3227201"><a href="/bufio/bufio.go.html#3227185">e</a></span>&nbsp;<span class="op" id="3227203">=</span>&nbsp;<span class="ident" id="3227205"><a href="/bufio/bufio.go.html#3226996">b</a></span><span class="op" id="3227206">.</span><span class="ident" id="3227207">ReadSlice</span><span class="op" id="3227216">(</span><span class="ident" id="3227217"><a href="/bufio/bufio.go.html#3227017">delim</a></span><span class="op" id="3227222">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227226">if</span>&nbsp;<span class="ident" id="3227229"><a href="/bufio/bufio.go.html#3227185">e</a></span>&nbsp;<span class="op" id="3227231">==</span>&nbsp;<span class="ident" id="3227234">nil</span>&nbsp;<span class="op" id="3227238">{</span>&nbsp;<span class="comment" id="3227240">//&nbsp;got&nbsp;final&nbsp;fragment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227265">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3227273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227277">if</span>&nbsp;<span class="ident" id="3227280"><a href="/bufio/bufio.go.html#3227185">e</a></span>&nbsp;<span class="op" id="3227282">!=</span>&nbsp;<span class="ident" id="3227285"><a href="/bufio/bufio.go.html#3217849">ErrBufferFull</a></span>&nbsp;<span class="op" id="3227299">{</span>&nbsp;<span class="comment" id="3227301">//&nbsp;unexpected&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227324"><a href="/bufio/bufio.go.html#3227043">err</a></span>&nbsp;<span class="op" id="3227328">=</span>&nbsp;<span class="ident" id="3227330"><a href="/bufio/bufio.go.html#3227185">e</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227335">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3227343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3227348">//&nbsp;Make&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227380">buf</span>&nbsp;<span class="op" id="3227384">:=</span>&nbsp;<span class="builtinfunc" id="3227387">make</span><span class="op" id="3227391">(</span><span class="op" id="3227392">[</span><span class="op" id="3227393">]</span><span class="builtintype" id="3227394">byte</span><span class="op" id="3227398">,</span>&nbsp;<span class="builtinfunc" id="3227400">len</span><span class="op" id="3227403">(</span><span class="ident" id="3227404"><a href="/bufio/bufio.go.html#3227129">frag</a></span><span class="op" id="3227408">)</span><span class="op" id="3227409">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3227413">copy</span><span class="op" id="3227417">(</span><span class="ident" id="3227418"><a href="/bufio/bufio.go.html#3227380">buf</a></span><span class="op" id="3227421">,</span>&nbsp;<span class="ident" id="3227423"><a href="/bufio/bufio.go.html#3227129">frag</a></span><span class="op" id="3227427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227431"><a href="/bufio/bufio.go.html#3227146">full</a></span>&nbsp;<span class="op" id="3227436">=</span>&nbsp;<span class="builtinfunc" id="3227438">append</span><span class="op" id="3227444">(</span><span class="ident" id="3227445"><a href="/bufio/bufio.go.html#3227146">full</a></span><span class="op" id="3227449">,</span>&nbsp;<span class="ident" id="3227451"><a href="/bufio/bufio.go.html#3227380">buf</a></span><span class="op" id="3227454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3227457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3227461">//&nbsp;Allocate&nbsp;new&nbsp;buffer&nbsp;to&nbsp;hold&nbsp;the&nbsp;full&nbsp;pieces&nbsp;and&nbsp;the&nbsp;fragment.</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227527">n</span>&nbsp;<span class="op" id="3227529">:=</span>&nbsp;<span class="num" id="3227532">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227535">for</span>&nbsp;<span class="ident" id="3227539">i</span>&nbsp;<span class="op" id="3227541">:=</span>&nbsp;<span class="keyword" id="3227544">range</span>&nbsp;<span class="ident" id="3227550"><a href="/bufio/bufio.go.html#3227146">full</a></span>&nbsp;<span class="op" id="3227555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227559"><a href="/bufio/bufio.go.html#3227527">n</a></span>&nbsp;<span class="op" id="3227561">+=</span>&nbsp;<span class="builtinfunc" id="3227564">len</span><span class="op" id="3227567">(</span><span class="ident" id="3227568"><a href="/bufio/bufio.go.html#3227146">full</a></span><span class="op" id="3227572">[</span><span class="ident" id="3227573"><a href="/bufio/bufio.go.html#3227539">i</a></span><span class="op" id="3227574">]</span><span class="op" id="3227575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3227578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227581"><a href="/bufio/bufio.go.html#3227527">n</a></span>&nbsp;<span class="op" id="3227583">+=</span>&nbsp;<span class="builtinfunc" id="3227586">len</span><span class="op" id="3227589">(</span><span class="ident" id="3227590"><a href="/bufio/bufio.go.html#3227129">frag</a></span><span class="op" id="3227594">)</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3227598">//&nbsp;Copy&nbsp;full&nbsp;pieces&nbsp;and&nbsp;fragment&nbsp;in.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227636">buf</span>&nbsp;<span class="op" id="3227640">:=</span>&nbsp;<span class="builtinfunc" id="3227643">make</span><span class="op" id="3227647">(</span><span class="op" id="3227648">[</span><span class="op" id="3227649">]</span><span class="builtintype" id="3227650">byte</span><span class="op" id="3227654">,</span>&nbsp;<span class="ident" id="3227656"><a href="/bufio/bufio.go.html#3227527">n</a></span><span class="op" id="3227657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227660"><a href="/bufio/bufio.go.html#3227527">n</a></span>&nbsp;<span class="op" id="3227662">=</span>&nbsp;<span class="num" id="3227664">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227667">for</span>&nbsp;<span class="ident" id="3227671">i</span>&nbsp;<span class="op" id="3227673">:=</span>&nbsp;<span class="keyword" id="3227676">range</span>&nbsp;<span class="ident" id="3227682"><a href="/bufio/bufio.go.html#3227146">full</a></span>&nbsp;<span class="op" id="3227687">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3227691"><a href="/bufio/bufio.go.html#3227527">n</a></span>&nbsp;<span class="op" id="3227693">+=</span>&nbsp;<span class="builtinfunc" id="3227696">copy</span><span class="op" id="3227700">(</span><span class="ident" id="3227701"><a href="/bufio/bufio.go.html#3227636">buf</a></span><span class="op" id="3227704">[</span><span class="ident" id="3227705"><a href="/bufio/bufio.go.html#3227527">n</a></span><span class="op" id="3227706">:</span><span class="op" id="3227707">]</span><span class="op" id="3227708">,</span>&nbsp;<span class="ident" id="3227710"><a href="/bufio/bufio.go.html#3227146">full</a></span><span class="op" id="3227714">[</span><span class="ident" id="3227715"><a href="/bufio/bufio.go.html#3227671">i</a></span><span class="op" id="3227716">]</span><span class="op" id="3227717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3227720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3227723">copy</span><span class="op" id="3227727">(</span><span class="ident" id="3227728"><a href="/bufio/bufio.go.html#3227636">buf</a></span><span class="op" id="3227731">[</span><span class="ident" id="3227732"><a href="/bufio/bufio.go.html#3227527">n</a></span><span class="op" id="3227733">:</span><span class="op" id="3227734">]</span><span class="op" id="3227735">,</span>&nbsp;<span class="ident" id="3227737"><a href="/bufio/bufio.go.html#3227129">frag</a></span><span class="op" id="3227741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3227744">return</span>&nbsp;<span class="ident" id="3227751"><a href="/bufio/bufio.go.html#3227636">buf</a></span><span class="op" id="3227754">,</span>&nbsp;<span class="ident" id="3227756"><a href="/bufio/bufio.go.html#3227043">err</a></span><br>
<span class="lineno"></span><span class="op" id="3227760">}</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span><span class="comment" id="3227763">//&nbsp;ReadString&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="3227833">//&nbsp;returning&nbsp;a&nbsp;string&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno"></span><span class="comment" id="3227910">//&nbsp;If&nbsp;ReadString&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="3227975">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno">410</span><span class="comment" id="3228057">//&nbsp;ReadString&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3228139">//&nbsp;delim.</span><br>
<span class="lineno"></span><span class="comment" id="3228149">//&nbsp;For&nbsp;simple&nbsp;uses,&nbsp;a&nbsp;Scanner&nbsp;may&nbsp;be&nbsp;more&nbsp;convenient.</span><br>
<span class="lineno"></span><span class="keyword" id="3228203">func</span>&nbsp;<span class="op" id="3228208">(</span><span class="ident" id="3228209">b</span>&nbsp;<span class="op" id="3228211">*</span><span class="ident" id="3228212"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3228218">)</span>&nbsp;<span class="ident" id="3228220">ReadString</span><span class="op" id="3228230">(</span><span class="ident" id="3228231">delim</span>&nbsp;<span class="builtintype" id="3228237">byte</span><span class="op" id="3228241">)</span>&nbsp;<span class="op" id="3228243">(</span><span class="ident" id="3228244">line</span>&nbsp;<span class="builtintype" id="3228249">string</span><span class="op" id="3228255">,</span>&nbsp;<span class="ident" id="3228257">err</span>&nbsp;<span class="builtintype" id="3228261">error</span><span class="op" id="3228266">)</span>&nbsp;<span class="op" id="3228268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228271">bytes</span><span class="op" id="3228276">,</span>&nbsp;<span class="ident" id="3228278"><a href="/bufio/bufio.go.html#3228257">err</a></span>&nbsp;<span class="op" id="3228282">:=</span>&nbsp;<span class="ident" id="3228285"><a href="/bufio/bufio.go.html#3228209">b</a></span><span class="op" id="3228286">.</span><span class="ident" id="3228287">ReadBytes</span><span class="op" id="3228296">(</span><span class="ident" id="3228297"><a href="/bufio/bufio.go.html#3228231">delim</a></span><span class="op" id="3228302">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228305"><a href="/bufio/bufio.go.html#3228244">line</a></span>&nbsp;<span class="op" id="3228310">=</span>&nbsp;<span class="builtintype" id="3228312">string</span><span class="op" id="3228318">(</span><span class="ident" id="3228319"><a href="/bufio/bufio.go.html#3228271">bytes</a></span><span class="op" id="3228324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228327">return</span>&nbsp;<span class="ident" id="3228334"><a href="/bufio/bufio.go.html#3228244">line</a></span><span class="op" id="3228338">,</span>&nbsp;<span class="ident" id="3228340"><a href="/bufio/bufio.go.html#3228257">err</a></span><br>
<span class="lineno"></span><span class="op" id="3228344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3228347">//&nbsp;WriteTo&nbsp;implements&nbsp;io.WriterTo.</span><br>
<span class="lineno">420</span><span class="keyword" id="3228382">func</span>&nbsp;<span class="op" id="3228387">(</span><span class="ident" id="3228388">b</span>&nbsp;<span class="op" id="3228390">*</span><span class="ident" id="3228391"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3228397">)</span>&nbsp;<span class="ident" id="3228399">WriteTo</span><span class="op" id="3228406">(</span><span class="ident" id="3228407">w</span>&nbsp;<span class="ident" id="3228409"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3228411">.</span><span class="ident" id="3228412">Writer</span><span class="op" id="3228418">)</span>&nbsp;<span class="op" id="3228420">(</span><span class="ident" id="3228421">n</span>&nbsp;<span class="ident" id="3228423">int64</span><span class="op" id="3228428">,</span>&nbsp;<span class="ident" id="3228430">err</span>&nbsp;<span class="builtintype" id="3228434">error</span><span class="op" id="3228439">)</span>&nbsp;<span class="op" id="3228441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228444"><a href="/bufio/bufio.go.html#3228421">n</a></span><span class="op" id="3228445">,</span>&nbsp;<span class="ident" id="3228447"><a href="/bufio/bufio.go.html#3228430">err</a></span>&nbsp;<span class="op" id="3228451">=</span>&nbsp;<span class="ident" id="3228453"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228454">.</span><span class="ident" id="3228455">writeBuf</span><span class="op" id="3228463">(</span><span class="ident" id="3228464"><a href="/bufio/bufio.go.html#3228407">w</a></span><span class="op" id="3228465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228468">if</span>&nbsp;<span class="ident" id="3228471"><a href="/bufio/bufio.go.html#3228430">err</a></span>&nbsp;<span class="op" id="3228475">!=</span>&nbsp;<span class="ident" id="3228478">nil</span>&nbsp;<span class="op" id="3228482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228486">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228494">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228498">if</span>&nbsp;<span class="ident" id="3228501">r</span><span class="op" id="3228502">,</span>&nbsp;<span class="ident" id="3228504">ok</span>&nbsp;<span class="op" id="3228507">:=</span>&nbsp;<span class="ident" id="3228510"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228511">.</span><span class="ident" id="3228512">rd</span><span class="op" id="3228514">.</span><span class="op" id="3228515">(</span><span class="ident" id="3228516"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3228518">.</span><span class="ident" id="3228519">WriterTo</span><span class="op" id="3228527">)</span><span class="op" id="3228528">;</span>&nbsp;<span class="ident" id="3228530"><a href="/bufio/bufio.go.html#3228504">ok</a></span>&nbsp;<span class="op" id="3228533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228537">m</span><span class="op" id="3228538">,</span>&nbsp;<span class="ident" id="3228540">err</span>&nbsp;<span class="op" id="3228544">:=</span>&nbsp;<span class="ident" id="3228547"><a href="/bufio/bufio.go.html#3228501">r</a></span><span class="op" id="3228548">.</span><span class="ident" id="3228549">WriteTo</span><span class="op" id="3228556">(</span><span class="ident" id="3228557"><a href="/bufio/bufio.go.html#3228407">w</a></span><span class="op" id="3228558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228562"><a href="/bufio/bufio.go.html#3228421">n</a></span>&nbsp;<span class="op" id="3228564">+=</span>&nbsp;<span class="ident" id="3228567"><a href="/bufio/bufio.go.html#3228537">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228571">return</span>&nbsp;<span class="ident" id="3228578"><a href="/bufio/bufio.go.html#3228421">n</a></span><span class="op" id="3228579">,</span>&nbsp;<span class="ident" id="3228581"><a href="/bufio/bufio.go.html#3228540">err</a></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228590">if</span>&nbsp;<span class="ident" id="3228593">w</span><span class="op" id="3228594">,</span>&nbsp;<span class="ident" id="3228596">ok</span>&nbsp;<span class="op" id="3228599">:=</span>&nbsp;<span class="ident" id="3228602"><a href="/bufio/bufio.go.html#3228407">w</a></span><span class="op" id="3228603">.</span><span class="op" id="3228604">(</span><span class="ident" id="3228605"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3228607">.</span><span class="ident" id="3228608">ReaderFrom</span><span class="op" id="3228618">)</span><span class="op" id="3228619">;</span>&nbsp;<span class="ident" id="3228621"><a href="/bufio/bufio.go.html#3228596">ok</a></span>&nbsp;<span class="op" id="3228624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228628">m</span><span class="op" id="3228629">,</span>&nbsp;<span class="ident" id="3228631">err</span>&nbsp;<span class="op" id="3228635">:=</span>&nbsp;<span class="ident" id="3228638"><a href="/bufio/bufio.go.html#3228593">w</a></span><span class="op" id="3228639">.</span><span class="ident" id="3228640">ReadFrom</span><span class="op" id="3228648">(</span><span class="ident" id="3228649"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228650">.</span><span class="ident" id="3228651">rd</span><span class="op" id="3228653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228657"><a href="/bufio/bufio.go.html#3228421">n</a></span>&nbsp;<span class="op" id="3228659">+=</span>&nbsp;<span class="ident" id="3228662"><a href="/bufio/bufio.go.html#3228628">m</a></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228666">return</span>&nbsp;<span class="ident" id="3228673"><a href="/bufio/bufio.go.html#3228421">n</a></span><span class="op" id="3228674">,</span>&nbsp;<span class="ident" id="3228676"><a href="/bufio/bufio.go.html#3228631">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228685">if</span>&nbsp;<span class="ident" id="3228688"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228689">.</span><span class="ident" id="3228690">w</span><span class="op" id="3228691">-</span><span class="ident" id="3228692"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228693">.</span><span class="ident" id="3228694">r</span>&nbsp;<span class="op" id="3228696">&lt;</span>&nbsp;<span class="builtinfunc" id="3228698">len</span><span class="op" id="3228701">(</span><span class="ident" id="3228702"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228703">.</span><span class="ident" id="3228704">buf</span><span class="op" id="3228707">)</span>&nbsp;<span class="op" id="3228709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228713"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228714">.</span><span class="ident" id="3228715">fill</span><span class="op" id="3228719">(</span><span class="op" id="3228720">)</span>&nbsp;<span class="comment" id="3228722">//&nbsp;buffer&nbsp;not&nbsp;full</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228746">for</span>&nbsp;<span class="ident" id="3228750"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228751">.</span><span class="ident" id="3228752">r</span>&nbsp;<span class="op" id="3228754">&lt;</span>&nbsp;<span class="ident" id="3228756"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228757">.</span><span class="ident" id="3228758">w</span>&nbsp;<span class="op" id="3228760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3228764">//&nbsp;b.r&nbsp;&lt;&nbsp;b.w&nbsp;=&gt;&nbsp;buffer&nbsp;is&nbsp;not&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228802">m</span><span class="op" id="3228803">,</span>&nbsp;<span class="ident" id="3228805">err</span>&nbsp;<span class="op" id="3228809">:=</span>&nbsp;<span class="ident" id="3228812"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228813">.</span><span class="ident" id="3228814">writeBuf</span><span class="op" id="3228822">(</span><span class="ident" id="3228823"><a href="/bufio/bufio.go.html#3228407">w</a></span><span class="op" id="3228824">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228828"><a href="/bufio/bufio.go.html#3228421">n</a></span>&nbsp;<span class="op" id="3228830">+=</span>&nbsp;<span class="ident" id="3228833"><a href="/bufio/bufio.go.html#3228802">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228837">if</span>&nbsp;<span class="ident" id="3228840"><a href="/bufio/bufio.go.html#3228805">err</a></span>&nbsp;<span class="op" id="3228844">!=</span>&nbsp;<span class="ident" id="3228847">nil</span>&nbsp;<span class="op" id="3228851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228856">return</span>&nbsp;<span class="ident" id="3228863"><a href="/bufio/bufio.go.html#3228421">n</a></span><span class="op" id="3228864">,</span>&nbsp;<span class="ident" id="3228866"><a href="/bufio/bufio.go.html#3228805">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228876"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228877">.</span><span class="ident" id="3228878">fill</span><span class="op" id="3228882">(</span><span class="op" id="3228883">)</span>&nbsp;<span class="comment" id="3228885">//&nbsp;buffer&nbsp;is&nbsp;empty</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228909">if</span>&nbsp;<span class="ident" id="3228912"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228913">.</span><span class="ident" id="3228914">err</span>&nbsp;<span class="op" id="3228918">==</span>&nbsp;<span class="ident" id="3228921"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3228923">.</span><span class="ident" id="3228924">EOF</span>&nbsp;<span class="op" id="3228928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228932"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228933">.</span><span class="ident" id="3228934">err</span>&nbsp;<span class="op" id="3228938">=</span>&nbsp;<span class="ident" id="3228940">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228945">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228949">return</span>&nbsp;<span class="ident" id="3228956"><a href="/bufio/bufio.go.html#3228421">n</a></span><span class="op" id="3228957">,</span>&nbsp;<span class="ident" id="3228959"><a href="/bufio/bufio.go.html#3228388">b</a></span><span class="op" id="3228960">.</span><span class="ident" id="3228961">readErr</span><span class="op" id="3228968">(</span><span class="op" id="3228969">)</span><br>
<span class="lineno"></span><span class="op" id="3228971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3228974">var</span>&nbsp;<span class="ident" id="3228978">errNegativeWrite</span>&nbsp;<span class="op" id="3228995">=</span>&nbsp;<span class="ident" id="3228997"><a href="/bufio/bufio.go.html#3217632">errors</a></span><span class="op" id="3229003">.</span><span class="ident" id="3229004">New</span><span class="op" id="3229007">(</span><span class="string" id="3229008">&#34;bufio:&nbsp;writer&nbsp;returned&nbsp;negative&nbsp;count&nbsp;from&nbsp;Write&#34;</span><span class="op" id="3229058">)</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="3229061">//&nbsp;writeBuf&nbsp;writes&nbsp;the&nbsp;Reader&#39;s&nbsp;buffer&nbsp;to&nbsp;the&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="3229115">func</span>&nbsp;<span class="op" id="3229120">(</span><span class="ident" id="3229121">b</span>&nbsp;<span class="op" id="3229123">*</span><span class="ident" id="3229124"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3229130">)</span>&nbsp;<span class="ident" id="3229132">writeBuf</span><span class="op" id="3229140">(</span><span class="ident" id="3229141">w</span>&nbsp;<span class="ident" id="3229143"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3229145">.</span><span class="ident" id="3229146">Writer</span><span class="op" id="3229152">)</span>&nbsp;<span class="op" id="3229154">(</span><span class="ident" id="3229155">int64</span><span class="op" id="3229160">,</span>&nbsp;<span class="builtintype" id="3229162">error</span><span class="op" id="3229167">)</span>&nbsp;<span class="op" id="3229169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229172">n</span><span class="op" id="3229173">,</span>&nbsp;<span class="ident" id="3229175">err</span>&nbsp;<span class="op" id="3229179">:=</span>&nbsp;<span class="ident" id="3229182"><a href="/bufio/bufio.go.html#3229141">w</a></span><span class="op" id="3229183">.</span><span class="ident" id="3229184">Write</span><span class="op" id="3229189">(</span><span class="ident" id="3229190"><a href="/bufio/bufio.go.html#3229121">b</a></span><span class="op" id="3229191">.</span><span class="ident" id="3229192">buf</span><span class="op" id="3229195">[</span><span class="ident" id="3229196"><a href="/bufio/bufio.go.html#3229121">b</a></span><span class="op" id="3229197">.</span><span class="ident" id="3229198">r</span><span class="op" id="3229199">:</span><span class="ident" id="3229200"><a href="/bufio/bufio.go.html#3229121">b</a></span><span class="op" id="3229201">.</span><span class="ident" id="3229202">w</span><span class="op" id="3229203">]</span><span class="op" id="3229204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229207">if</span>&nbsp;<span class="ident" id="3229210"><a href="/bufio/bufio.go.html#3229172">n</a></span>&nbsp;<span class="op" id="3229212">&lt;</span>&nbsp;<span class="num" id="3229214">0</span>&nbsp;<span class="op" id="3229216">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3229220">panic</span><span class="op" id="3229225">(</span><span class="ident" id="3229226"><a href="/bufio/bufio.go.html#3228978">errNegativeWrite</a></span><span class="op" id="3229242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229248"><a href="/bufio/bufio.go.html#3229121">b</a></span><span class="op" id="3229249">.</span><span class="ident" id="3229250">r</span>&nbsp;<span class="op" id="3229252">+=</span>&nbsp;<span class="ident" id="3229255"><a href="/bufio/bufio.go.html#3229172">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229258">return</span>&nbsp;<span class="ident" id="3229265">int64</span><span class="op" id="3229270">(</span><span class="ident" id="3229271"><a href="/bufio/bufio.go.html#3229172">n</a></span><span class="op" id="3229272">)</span><span class="op" id="3229273">,</span>&nbsp;<span class="ident" id="3229275"><a href="/bufio/bufio.go.html#3229175">err</a></span><br>
<span class="lineno"></span><span class="op" id="3229279">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="comment" id="3229282">//&nbsp;buffered&nbsp;output</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3229302">//&nbsp;Writer&nbsp;implements&nbsp;buffering&nbsp;for&nbsp;an&nbsp;io.Writer&nbsp;object.</span><br>
<span class="lineno"></span><span class="comment" id="3229358">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;writing&nbsp;to&nbsp;a&nbsp;Writer,&nbsp;no&nbsp;more&nbsp;data&nbsp;will&nbsp;be</span><br>
<span class="lineno">475</span><span class="comment" id="3229422">//&nbsp;accepted&nbsp;and&nbsp;all&nbsp;subsequent&nbsp;writes&nbsp;will&nbsp;return&nbsp;the&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3229483">//&nbsp;After&nbsp;all&nbsp;data&nbsp;has&nbsp;been&nbsp;written,&nbsp;the&nbsp;client&nbsp;should&nbsp;call&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3229546">//&nbsp;Flush&nbsp;method&nbsp;to&nbsp;guarantee&nbsp;all&nbsp;data&nbsp;has&nbsp;been&nbsp;forwarded&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3229606">//&nbsp;the&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="3229635">type</span>&nbsp;<span class="ident" id="3229640">Writer</span>&nbsp;<span class="keyword" id="3229647">struct</span>&nbsp;<span class="op" id="3229654">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229657">err</span>&nbsp;<span class="builtintype" id="3229661">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229668">buf</span>&nbsp;<span class="op" id="3229672">[</span><span class="op" id="3229673">]</span><span class="builtintype" id="3229674">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229680">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3229684">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229689">wr</span>&nbsp;&nbsp;<span class="ident" id="3229693"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3229695">.</span><span class="ident" id="3229696">Writer</span><br>
<span class="lineno"></span><span class="op" id="3229703">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="comment" id="3229706">//&nbsp;NewWriterSize&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;at&nbsp;least&nbsp;the&nbsp;specified</span><br>
<span class="lineno"></span><span class="comment" id="3229784">//&nbsp;size.&nbsp;If&nbsp;the&nbsp;argument&nbsp;io.Writer&nbsp;is&nbsp;already&nbsp;a&nbsp;Writer&nbsp;with&nbsp;large&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3229857">//&nbsp;size,&nbsp;it&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="3229900">func</span>&nbsp;<span class="ident" id="3229905">NewWriterSize</span><span class="op" id="3229918">(</span><span class="ident" id="3229919">w</span>&nbsp;<span class="ident" id="3229921"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3229923">.</span><span class="ident" id="3229924">Writer</span><span class="op" id="3229930">,</span>&nbsp;<span class="ident" id="3229932">size</span>&nbsp;<span class="builtintype" id="3229937">int</span><span class="op" id="3229940">)</span>&nbsp;<span class="op" id="3229942">*</span><span class="ident" id="3229943"><a href="/bufio/bufio.go.html#3229640">Writer</a></span>&nbsp;<span class="op" id="3229950">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3229953">//&nbsp;Is&nbsp;it&nbsp;already&nbsp;a&nbsp;Writer?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229981">b</span><span class="op" id="3229982">,</span>&nbsp;<span class="ident" id="3229984">ok</span>&nbsp;<span class="op" id="3229987">:=</span>&nbsp;<span class="ident" id="3229990"><a href="/bufio/bufio.go.html#3229919">w</a></span><span class="op" id="3229991">.</span><span class="op" id="3229992">(</span><span class="op" id="3229993">*</span><span class="ident" id="3229994"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3230000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230003">if</span>&nbsp;<span class="ident" id="3230006"><a href="/bufio/bufio.go.html#3229984">ok</a></span>&nbsp;<span class="op" id="3230009">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3230012">len</span><span class="op" id="3230015">(</span><span class="ident" id="3230016"><a href="/bufio/bufio.go.html#3229981">b</a></span><span class="op" id="3230017">.</span><span class="ident" id="3230018">buf</span><span class="op" id="3230021">)</span>&nbsp;<span class="op" id="3230023">&gt;=</span>&nbsp;<span class="ident" id="3230026"><a href="/bufio/bufio.go.html#3229932">size</a></span>&nbsp;<span class="op" id="3230031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230035">return</span>&nbsp;<span class="ident" id="3230042"><a href="/bufio/bufio.go.html#3229981">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230045">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230048">if</span>&nbsp;<span class="ident" id="3230051"><a href="/bufio/bufio.go.html#3229932">size</a></span>&nbsp;<span class="op" id="3230056">&lt;=</span>&nbsp;<span class="num" id="3230059">0</span>&nbsp;<span class="op" id="3230061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230065"><a href="/bufio/bufio.go.html#3229932">size</a></span>&nbsp;<span class="op" id="3230070">=</span>&nbsp;<span class="ident" id="3230072"><a href="/bufio/bufio.go.html#3217675">defaultBufSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230091">return</span>&nbsp;<span class="op" id="3230098">&amp;</span><span class="ident" id="3230099"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3230105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230109">buf</span><span class="op" id="3230112">:</span>&nbsp;<span class="builtinfunc" id="3230114">make</span><span class="op" id="3230118">(</span><span class="op" id="3230119">[</span><span class="op" id="3230120">]</span><span class="builtintype" id="3230121">byte</span><span class="op" id="3230125">,</span>&nbsp;<span class="ident" id="3230127"><a href="/bufio/bufio.go.html#3229932">size</a></span><span class="op" id="3230131">)</span><span class="op" id="3230132">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230136">wr</span><span class="op" id="3230138">:</span>&nbsp;&nbsp;<span class="ident" id="3230141"><a href="/bufio/bufio.go.html#3229919">w</a></span><span class="op" id="3230142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230145">}</span><br>
<span class="lineno"></span><span class="op" id="3230147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3230150">//&nbsp;NewWriter&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;the&nbsp;default&nbsp;size.</span><br>
<span class="lineno">505</span><span class="keyword" id="3230219">func</span>&nbsp;<span class="ident" id="3230224">NewWriter</span><span class="op" id="3230233">(</span><span class="ident" id="3230234">w</span>&nbsp;<span class="ident" id="3230236"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3230238">.</span><span class="ident" id="3230239">Writer</span><span class="op" id="3230245">)</span>&nbsp;<span class="op" id="3230247">*</span><span class="ident" id="3230248"><a href="/bufio/bufio.go.html#3229640">Writer</a></span>&nbsp;<span class="op" id="3230255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230258">return</span>&nbsp;<span class="ident" id="3230265"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="3230278">(</span><span class="ident" id="3230279"><a href="/bufio/bufio.go.html#3230234">w</a></span><span class="op" id="3230280">,</span>&nbsp;<span class="ident" id="3230282"><a href="/bufio/bufio.go.html#3217675">defaultBufSize</a></span><span class="op" id="3230296">)</span><br>
<span class="lineno"></span><span class="op" id="3230298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3230301">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;unflushed&nbsp;buffered&nbsp;data,&nbsp;clears&nbsp;any&nbsp;error,&nbsp;and</span><br>
<span class="lineno">510</span><span class="comment" id="3230370">//&nbsp;resets&nbsp;b&nbsp;to&nbsp;write&nbsp;its&nbsp;output&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="3230408">func</span>&nbsp;<span class="op" id="3230413">(</span><span class="ident" id="3230414">b</span>&nbsp;<span class="op" id="3230416">*</span><span class="ident" id="3230417"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3230423">)</span>&nbsp;<span class="ident" id="3230425">Reset</span><span class="op" id="3230430">(</span><span class="ident" id="3230431">w</span>&nbsp;<span class="ident" id="3230433"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3230435">.</span><span class="ident" id="3230436">Writer</span><span class="op" id="3230442">)</span>&nbsp;<span class="op" id="3230444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230447"><a href="/bufio/bufio.go.html#3230414">b</a></span><span class="op" id="3230448">.</span><span class="ident" id="3230449">err</span>&nbsp;<span class="op" id="3230453">=</span>&nbsp;<span class="ident" id="3230455">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230460"><a href="/bufio/bufio.go.html#3230414">b</a></span><span class="op" id="3230461">.</span><span class="ident" id="3230462">n</span>&nbsp;<span class="op" id="3230464">=</span>&nbsp;<span class="num" id="3230466">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230469"><a href="/bufio/bufio.go.html#3230414">b</a></span><span class="op" id="3230470">.</span><span class="ident" id="3230471">wr</span>&nbsp;<span class="op" id="3230474">=</span>&nbsp;<span class="ident" id="3230476"><a href="/bufio/bufio.go.html#3230431">w</a></span><br>
<span class="lineno">515</span><span class="op" id="3230478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3230481">//&nbsp;Flush&nbsp;writes&nbsp;any&nbsp;buffered&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="3230544">func</span>&nbsp;<span class="op" id="3230549">(</span><span class="ident" id="3230550">b</span>&nbsp;<span class="op" id="3230552">*</span><span class="ident" id="3230553"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3230559">)</span>&nbsp;<span class="ident" id="3230561">Flush</span><span class="op" id="3230566">(</span><span class="op" id="3230567">)</span>&nbsp;<span class="builtintype" id="3230569">error</span>&nbsp;<span class="op" id="3230575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230578">err</span>&nbsp;<span class="op" id="3230582">:=</span>&nbsp;<span class="ident" id="3230585"><a href="/bufio/bufio.go.html#3230550">b</a></span><span class="op" id="3230586">.</span><span class="ident" id="3230587">flush</span><span class="op" id="3230592">(</span><span class="op" id="3230593">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230596">return</span>&nbsp;<span class="ident" id="3230603"><a href="/bufio/bufio.go.html#3230578">err</a></span><br>
<span class="lineno"></span><span class="op" id="3230607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3230610">func</span>&nbsp;<span class="op" id="3230615">(</span><span class="ident" id="3230616">b</span>&nbsp;<span class="op" id="3230618">*</span><span class="ident" id="3230619"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3230625">)</span>&nbsp;<span class="ident" id="3230627">flush</span><span class="op" id="3230632">(</span><span class="op" id="3230633">)</span>&nbsp;<span class="builtintype" id="3230635">error</span>&nbsp;<span class="op" id="3230641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230644">if</span>&nbsp;<span class="ident" id="3230647"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230648">.</span><span class="ident" id="3230649">err</span>&nbsp;<span class="op" id="3230653">!=</span>&nbsp;<span class="ident" id="3230656">nil</span>&nbsp;<span class="op" id="3230660">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230664">return</span>&nbsp;<span class="ident" id="3230671"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230672">.</span><span class="ident" id="3230673">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230681">if</span>&nbsp;<span class="ident" id="3230684"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230685">.</span><span class="ident" id="3230686">n</span>&nbsp;<span class="op" id="3230688">==</span>&nbsp;<span class="num" id="3230691">0</span>&nbsp;<span class="op" id="3230693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230697">return</span>&nbsp;<span class="ident" id="3230704">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230709">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230712">n</span><span class="op" id="3230713">,</span>&nbsp;<span class="ident" id="3230715">err</span>&nbsp;<span class="op" id="3230719">:=</span>&nbsp;<span class="ident" id="3230722"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230723">.</span><span class="ident" id="3230724">wr</span><span class="op" id="3230726">.</span><span class="ident" id="3230727">Write</span><span class="op" id="3230732">(</span><span class="ident" id="3230733"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230734">.</span><span class="ident" id="3230735">buf</span><span class="op" id="3230738">[</span><span class="num" id="3230739">0</span><span class="op" id="3230740">:</span><span class="ident" id="3230741"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230742">.</span><span class="ident" id="3230743">n</span><span class="op" id="3230744">]</span><span class="op" id="3230745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230748">if</span>&nbsp;<span class="ident" id="3230751"><a href="/bufio/bufio.go.html#3230712">n</a></span>&nbsp;<span class="op" id="3230753">&lt;</span>&nbsp;<span class="ident" id="3230755"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230756">.</span><span class="ident" id="3230757">n</span>&nbsp;<span class="op" id="3230759">&amp;&amp;</span>&nbsp;<span class="ident" id="3230762"><a href="/bufio/bufio.go.html#3230715">err</a></span>&nbsp;<span class="op" id="3230766">==</span>&nbsp;<span class="ident" id="3230769">nil</span>&nbsp;<span class="op" id="3230773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230777"><a href="/bufio/bufio.go.html#3230715">err</a></span>&nbsp;<span class="op" id="3230781">=</span>&nbsp;<span class="ident" id="3230783"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3230785">.</span><span class="ident" id="3230786">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230804">if</span>&nbsp;<span class="ident" id="3230807"><a href="/bufio/bufio.go.html#3230715">err</a></span>&nbsp;<span class="op" id="3230811">!=</span>&nbsp;<span class="ident" id="3230814">nil</span>&nbsp;<span class="op" id="3230818">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230822">if</span>&nbsp;<span class="ident" id="3230825"><a href="/bufio/bufio.go.html#3230712">n</a></span>&nbsp;<span class="op" id="3230827">&gt;</span>&nbsp;<span class="num" id="3230829">0</span>&nbsp;<span class="op" id="3230831">&amp;&amp;</span>&nbsp;<span class="ident" id="3230834"><a href="/bufio/bufio.go.html#3230712">n</a></span>&nbsp;<span class="op" id="3230836">&lt;</span>&nbsp;<span class="ident" id="3230838"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230839">.</span><span class="ident" id="3230840">n</span>&nbsp;<span class="op" id="3230842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3230847">copy</span><span class="op" id="3230851">(</span><span class="ident" id="3230852"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230853">.</span><span class="ident" id="3230854">buf</span><span class="op" id="3230857">[</span><span class="num" id="3230858">0</span><span class="op" id="3230859">:</span><span class="ident" id="3230860"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230861">.</span><span class="ident" id="3230862">n</span><span class="op" id="3230863">-</span><span class="ident" id="3230864"><a href="/bufio/bufio.go.html#3230712">n</a></span><span class="op" id="3230865">]</span><span class="op" id="3230866">,</span>&nbsp;<span class="ident" id="3230868"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230869">.</span><span class="ident" id="3230870">buf</span><span class="op" id="3230873">[</span><span class="ident" id="3230874"><a href="/bufio/bufio.go.html#3230712">n</a></span><span class="op" id="3230875">:</span><span class="ident" id="3230876"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230877">.</span><span class="ident" id="3230878">n</span><span class="op" id="3230879">]</span><span class="op" id="3230880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230888"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230889">.</span><span class="ident" id="3230890">n</span>&nbsp;<span class="op" id="3230892">-=</span>&nbsp;<span class="ident" id="3230895"><a href="/bufio/bufio.go.html#3230712">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230899"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230900">.</span><span class="ident" id="3230901">err</span>&nbsp;<span class="op" id="3230905">=</span>&nbsp;<span class="ident" id="3230907"><a href="/bufio/bufio.go.html#3230715">err</a></span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230913">return</span>&nbsp;<span class="ident" id="3230920"><a href="/bufio/bufio.go.html#3230715">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230928"><a href="/bufio/bufio.go.html#3230616">b</a></span><span class="op" id="3230929">.</span><span class="ident" id="3230930">n</span>&nbsp;<span class="op" id="3230932">=</span>&nbsp;<span class="num" id="3230934">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230937">return</span>&nbsp;<span class="ident" id="3230944">nil</span><br>
<span class="lineno"></span><span class="op" id="3230948">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span><span class="comment" id="3230951">//&nbsp;Available&nbsp;returns&nbsp;how&nbsp;many&nbsp;bytes&nbsp;are&nbsp;unused&nbsp;in&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3231013">func</span>&nbsp;<span class="op" id="3231018">(</span><span class="ident" id="3231019">b</span>&nbsp;<span class="op" id="3231021">*</span><span class="ident" id="3231022"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3231028">)</span>&nbsp;<span class="ident" id="3231030">Available</span><span class="op" id="3231039">(</span><span class="op" id="3231040">)</span>&nbsp;<span class="builtintype" id="3231042">int</span>&nbsp;<span class="op" id="3231046">{</span>&nbsp;<span class="keyword" id="3231048">return</span>&nbsp;<span class="builtinfunc" id="3231055">len</span><span class="op" id="3231058">(</span><span class="ident" id="3231059"><a href="/bufio/bufio.go.html#3231019">b</a></span><span class="op" id="3231060">.</span><span class="ident" id="3231061">buf</span><span class="op" id="3231064">)</span>&nbsp;<span class="op" id="3231066">-</span>&nbsp;<span class="ident" id="3231068"><a href="/bufio/bufio.go.html#3231019">b</a></span><span class="op" id="3231069">.</span><span class="ident" id="3231070">n</span>&nbsp;<span class="op" id="3231072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3231075">//&nbsp;Buffered&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;that&nbsp;have&nbsp;been&nbsp;written&nbsp;into&nbsp;the&nbsp;current&nbsp;buffer.</span><br>
<span class="lineno">550</span><span class="keyword" id="3231163">func</span>&nbsp;<span class="op" id="3231168">(</span><span class="ident" id="3231169">b</span>&nbsp;<span class="op" id="3231171">*</span><span class="ident" id="3231172"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3231178">)</span>&nbsp;<span class="ident" id="3231180">Buffered</span><span class="op" id="3231188">(</span><span class="op" id="3231189">)</span>&nbsp;<span class="builtintype" id="3231191">int</span>&nbsp;<span class="op" id="3231195">{</span>&nbsp;<span class="keyword" id="3231197">return</span>&nbsp;<span class="ident" id="3231204"><a href="/bufio/bufio.go.html#3231169">b</a></span><span class="op" id="3231205">.</span><span class="ident" id="3231206">n</span>&nbsp;<span class="op" id="3231208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3231211">//&nbsp;Write&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;p&nbsp;into&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3231262">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="3231305">//&nbsp;If&nbsp;nn&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;also&nbsp;returns&nbsp;an&nbsp;error&nbsp;explaining</span><br>
<span class="lineno">555</span><span class="comment" id="3231360">//&nbsp;why&nbsp;the&nbsp;write&nbsp;is&nbsp;short.</span><br>
<span class="lineno"></span><span class="keyword" id="3231387">func</span>&nbsp;<span class="op" id="3231392">(</span><span class="ident" id="3231393">b</span>&nbsp;<span class="op" id="3231395">*</span><span class="ident" id="3231396"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3231402">)</span>&nbsp;<span class="ident" id="3231404">Write</span><span class="op" id="3231409">(</span><span class="ident" id="3231410">p</span>&nbsp;<span class="op" id="3231412">[</span><span class="op" id="3231413">]</span><span class="builtintype" id="3231414">byte</span><span class="op" id="3231418">)</span>&nbsp;<span class="op" id="3231420">(</span><span class="ident" id="3231421">nn</span>&nbsp;<span class="builtintype" id="3231424">int</span><span class="op" id="3231427">,</span>&nbsp;<span class="ident" id="3231429">err</span>&nbsp;<span class="builtintype" id="3231433">error</span><span class="op" id="3231438">)</span>&nbsp;<span class="op" id="3231440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231443">for</span>&nbsp;<span class="builtinfunc" id="3231447">len</span><span class="op" id="3231450">(</span><span class="ident" id="3231451"><a href="/bufio/bufio.go.html#3231410">p</a></span><span class="op" id="3231452">)</span>&nbsp;<span class="op" id="3231454">&gt;</span>&nbsp;<span class="ident" id="3231456"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231457">.</span><span class="ident" id="3231458">Available</span><span class="op" id="3231467">(</span><span class="op" id="3231468">)</span>&nbsp;<span class="op" id="3231470">&amp;&amp;</span>&nbsp;<span class="ident" id="3231473"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231474">.</span><span class="ident" id="3231475">err</span>&nbsp;<span class="op" id="3231479">==</span>&nbsp;<span class="ident" id="3231482">nil</span>&nbsp;<span class="op" id="3231486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231490">var</span>&nbsp;<span class="ident" id="3231494">n</span>&nbsp;<span class="builtintype" id="3231496">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231502">if</span>&nbsp;<span class="ident" id="3231505"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231506">.</span><span class="ident" id="3231507">Buffered</span><span class="op" id="3231515">(</span><span class="op" id="3231516">)</span>&nbsp;<span class="op" id="3231518">==</span>&nbsp;<span class="num" id="3231521">0</span>&nbsp;<span class="op" id="3231523">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3231528">//&nbsp;Large&nbsp;write,&nbsp;empty&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3231561">//&nbsp;Write&nbsp;directly&nbsp;from&nbsp;p&nbsp;to&nbsp;avoid&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231604"><a href="/bufio/bufio.go.html#3231494">n</a></span><span class="op" id="3231605">,</span>&nbsp;<span class="ident" id="3231607"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231608">.</span><span class="ident" id="3231609">err</span>&nbsp;<span class="op" id="3231613">=</span>&nbsp;<span class="ident" id="3231615"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231616">.</span><span class="ident" id="3231617">wr</span><span class="op" id="3231619">.</span><span class="ident" id="3231620">Write</span><span class="op" id="3231625">(</span><span class="ident" id="3231626"><a href="/bufio/bufio.go.html#3231410">p</a></span><span class="op" id="3231627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231631">}</span>&nbsp;<span class="keyword" id="3231633">else</span>&nbsp;<span class="op" id="3231638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231643"><a href="/bufio/bufio.go.html#3231494">n</a></span>&nbsp;<span class="op" id="3231645">=</span>&nbsp;<span class="builtinfunc" id="3231647">copy</span><span class="op" id="3231651">(</span><span class="ident" id="3231652"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231653">.</span><span class="ident" id="3231654">buf</span><span class="op" id="3231657">[</span><span class="ident" id="3231658"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231659">.</span><span class="ident" id="3231660">n</span><span class="op" id="3231661">:</span><span class="op" id="3231662">]</span><span class="op" id="3231663">,</span>&nbsp;<span class="ident" id="3231665"><a href="/bufio/bufio.go.html#3231410">p</a></span><span class="op" id="3231666">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231671"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231672">.</span><span class="ident" id="3231673">n</span>&nbsp;<span class="op" id="3231675">+=</span>&nbsp;<span class="ident" id="3231678"><a href="/bufio/bufio.go.html#3231494">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231683"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231684">.</span><span class="ident" id="3231685">flush</span><span class="op" id="3231690">(</span><span class="op" id="3231691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231699"><a href="/bufio/bufio.go.html#3231421">nn</a></span>&nbsp;<span class="op" id="3231702">+=</span>&nbsp;<span class="ident" id="3231705"><a href="/bufio/bufio.go.html#3231494">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231709"><a href="/bufio/bufio.go.html#3231410">p</a></span>&nbsp;<span class="op" id="3231711">=</span>&nbsp;<span class="ident" id="3231713"><a href="/bufio/bufio.go.html#3231410">p</a></span><span class="op" id="3231714">[</span><span class="ident" id="3231715"><a href="/bufio/bufio.go.html#3231494">n</a></span><span class="op" id="3231716">:</span><span class="op" id="3231717">]</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231723">if</span>&nbsp;<span class="ident" id="3231726"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231727">.</span><span class="ident" id="3231728">err</span>&nbsp;<span class="op" id="3231732">!=</span>&nbsp;<span class="ident" id="3231735">nil</span>&nbsp;<span class="op" id="3231739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231743">return</span>&nbsp;<span class="ident" id="3231750"><a href="/bufio/bufio.go.html#3231421">nn</a></span><span class="op" id="3231752">,</span>&nbsp;<span class="ident" id="3231754"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231755">.</span><span class="ident" id="3231756">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231764">n</span>&nbsp;<span class="op" id="3231766">:=</span>&nbsp;<span class="builtinfunc" id="3231769">copy</span><span class="op" id="3231773">(</span><span class="ident" id="3231774"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231775">.</span><span class="ident" id="3231776">buf</span><span class="op" id="3231779">[</span><span class="ident" id="3231780"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231781">.</span><span class="ident" id="3231782">n</span><span class="op" id="3231783">:</span><span class="op" id="3231784">]</span><span class="op" id="3231785">,</span>&nbsp;<span class="ident" id="3231787"><a href="/bufio/bufio.go.html#3231410">p</a></span><span class="op" id="3231788">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231791"><a href="/bufio/bufio.go.html#3231393">b</a></span><span class="op" id="3231792">.</span><span class="ident" id="3231793">n</span>&nbsp;<span class="op" id="3231795">+=</span>&nbsp;<span class="ident" id="3231798"><a href="/bufio/bufio.go.html#3231764">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231801"><a href="/bufio/bufio.go.html#3231421">nn</a></span>&nbsp;<span class="op" id="3231804">+=</span>&nbsp;<span class="ident" id="3231807"><a href="/bufio/bufio.go.html#3231764">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231810">return</span>&nbsp;<span class="ident" id="3231817"><a href="/bufio/bufio.go.html#3231421">nn</a></span><span class="op" id="3231819">,</span>&nbsp;<span class="ident" id="3231821">nil</span><br>
<span class="lineno"></span><span class="op" id="3231825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span><span class="comment" id="3231828">//&nbsp;WriteByte&nbsp;writes&nbsp;a&nbsp;single&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="3231863">func</span>&nbsp;<span class="op" id="3231868">(</span><span class="ident" id="3231869">b</span>&nbsp;<span class="op" id="3231871">*</span><span class="ident" id="3231872"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3231878">)</span>&nbsp;<span class="ident" id="3231880">WriteByte</span><span class="op" id="3231889">(</span><span class="ident" id="3231890">c</span>&nbsp;<span class="builtintype" id="3231892">byte</span><span class="op" id="3231896">)</span>&nbsp;<span class="builtintype" id="3231898">error</span>&nbsp;<span class="op" id="3231904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231907">if</span>&nbsp;<span class="ident" id="3231910"><a href="/bufio/bufio.go.html#3231869">b</a></span><span class="op" id="3231911">.</span><span class="ident" id="3231912">err</span>&nbsp;<span class="op" id="3231916">!=</span>&nbsp;<span class="ident" id="3231919">nil</span>&nbsp;<span class="op" id="3231923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231927">return</span>&nbsp;<span class="ident" id="3231934"><a href="/bufio/bufio.go.html#3231869">b</a></span><span class="op" id="3231935">.</span><span class="ident" id="3231936">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231941">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231944">if</span>&nbsp;<span class="ident" id="3231947"><a href="/bufio/bufio.go.html#3231869">b</a></span><span class="op" id="3231948">.</span><span class="ident" id="3231949">Available</span><span class="op" id="3231958">(</span><span class="op" id="3231959">)</span>&nbsp;<span class="op" id="3231961">&lt;=</span>&nbsp;<span class="num" id="3231964">0</span>&nbsp;<span class="op" id="3231966">&amp;&amp;</span>&nbsp;<span class="ident" id="3231969"><a href="/bufio/bufio.go.html#3231869">b</a></span><span class="op" id="3231970">.</span><span class="ident" id="3231971">flush</span><span class="op" id="3231976">(</span><span class="op" id="3231977">)</span>&nbsp;<span class="op" id="3231979">!=</span>&nbsp;<span class="ident" id="3231982">nil</span>&nbsp;<span class="op" id="3231986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231990">return</span>&nbsp;<span class="ident" id="3231997"><a href="/bufio/bufio.go.html#3231869">b</a></span><span class="op" id="3231998">.</span><span class="ident" id="3231999">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232007"><a href="/bufio/bufio.go.html#3231869">b</a></span><span class="op" id="3232008">.</span><span class="ident" id="3232009">buf</span><span class="op" id="3232012">[</span><span class="ident" id="3232013"><a href="/bufio/bufio.go.html#3231869">b</a></span><span class="op" id="3232014">.</span><span class="ident" id="3232015">n</span><span class="op" id="3232016">]</span>&nbsp;<span class="op" id="3232018">=</span>&nbsp;<span class="ident" id="3232020"><a href="/bufio/bufio.go.html#3231890">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232023"><a href="/bufio/bufio.go.html#3231869">b</a></span><span class="op" id="3232024">.</span><span class="ident" id="3232025">n</span><span class="op" id="3232026">++</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232030">return</span>&nbsp;<span class="ident" id="3232037">nil</span><br>
<span class="lineno"></span><span class="op" id="3232041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3232044">//&nbsp;WriteRune&nbsp;writes&nbsp;a&nbsp;single&nbsp;Unicode&nbsp;code&nbsp;point,&nbsp;returning</span><br>
<span class="lineno"></span><span class="comment" id="3232103">//&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;any&nbsp;error.</span><br>
<span class="lineno">595</span><span class="keyword" id="3232149">func</span>&nbsp;<span class="op" id="3232154">(</span><span class="ident" id="3232155">b</span>&nbsp;<span class="op" id="3232157">*</span><span class="ident" id="3232158"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3232164">)</span>&nbsp;<span class="ident" id="3232166">WriteRune</span><span class="op" id="3232175">(</span><span class="ident" id="3232176">r</span>&nbsp;<span class="builtintype" id="3232178">rune</span><span class="op" id="3232182">)</span>&nbsp;<span class="op" id="3232184">(</span><span class="ident" id="3232185">size</span>&nbsp;<span class="builtintype" id="3232190">int</span><span class="op" id="3232193">,</span>&nbsp;<span class="ident" id="3232195">err</span>&nbsp;<span class="builtintype" id="3232199">error</span><span class="op" id="3232204">)</span>&nbsp;<span class="op" id="3232206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232209">if</span>&nbsp;<span class="ident" id="3232212"><a href="/bufio/bufio.go.html#3232176">r</a></span>&nbsp;<span class="op" id="3232214">&lt;</span>&nbsp;<span class="ident" id="3232216"><a href="/bufio/bufio.go.html#3217648">utf8</a></span><span class="op" id="3232220">.</span><span class="ident" id="3232221">RuneSelf</span>&nbsp;<span class="op" id="3232230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232234"><a href="/bufio/bufio.go.html#3232195">err</a></span>&nbsp;<span class="op" id="3232238">=</span>&nbsp;<span class="ident" id="3232240"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232241">.</span><span class="ident" id="3232242">WriteByte</span><span class="op" id="3232251">(</span><span class="builtintype" id="3232252">byte</span><span class="op" id="3232256">(</span><span class="ident" id="3232257"><a href="/bufio/bufio.go.html#3232176">r</a></span><span class="op" id="3232258">)</span><span class="op" id="3232259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232263">if</span>&nbsp;<span class="ident" id="3232266"><a href="/bufio/bufio.go.html#3232195">err</a></span>&nbsp;<span class="op" id="3232270">!=</span>&nbsp;<span class="ident" id="3232273">nil</span>&nbsp;<span class="op" id="3232277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232282">return</span>&nbsp;<span class="num" id="3232289">0</span><span class="op" id="3232290">,</span>&nbsp;<span class="ident" id="3232292"><a href="/bufio/bufio.go.html#3232195">err</a></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232302">return</span>&nbsp;<span class="num" id="3232309">1</span><span class="op" id="3232310">,</span>&nbsp;<span class="ident" id="3232312">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232320">if</span>&nbsp;<span class="ident" id="3232323"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232324">.</span><span class="ident" id="3232325">err</span>&nbsp;<span class="op" id="3232329">!=</span>&nbsp;<span class="ident" id="3232332">nil</span>&nbsp;<span class="op" id="3232336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232340">return</span>&nbsp;<span class="num" id="3232347">0</span><span class="op" id="3232348">,</span>&nbsp;<span class="ident" id="3232350"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232351">.</span><span class="ident" id="3232352">err</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232360">n</span>&nbsp;<span class="op" id="3232362">:=</span>&nbsp;<span class="ident" id="3232365"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232366">.</span><span class="ident" id="3232367">Available</span><span class="op" id="3232376">(</span><span class="op" id="3232377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232380">if</span>&nbsp;<span class="ident" id="3232383"><a href="/bufio/bufio.go.html#3232360">n</a></span>&nbsp;<span class="op" id="3232385">&lt;</span>&nbsp;<span class="ident" id="3232387"><a href="/bufio/bufio.go.html#3217648">utf8</a></span><span class="op" id="3232391">.</span><span class="ident" id="3232392">UTFMax</span>&nbsp;<span class="op" id="3232399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232403">if</span>&nbsp;<span class="ident" id="3232406"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232407">.</span><span class="ident" id="3232408">flush</span><span class="op" id="3232413">(</span><span class="op" id="3232414">)</span><span class="op" id="3232415">;</span>&nbsp;<span class="ident" id="3232417"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232418">.</span><span class="ident" id="3232419">err</span>&nbsp;<span class="op" id="3232423">!=</span>&nbsp;<span class="ident" id="3232426">nil</span>&nbsp;<span class="op" id="3232430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232435">return</span>&nbsp;<span class="num" id="3232442">0</span><span class="op" id="3232443">,</span>&nbsp;<span class="ident" id="3232445"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232446">.</span><span class="ident" id="3232447">err</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232457"><a href="/bufio/bufio.go.html#3232360">n</a></span>&nbsp;<span class="op" id="3232459">=</span>&nbsp;<span class="ident" id="3232461"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232462">.</span><span class="ident" id="3232463">Available</span><span class="op" id="3232472">(</span><span class="op" id="3232473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232477">if</span>&nbsp;<span class="ident" id="3232480"><a href="/bufio/bufio.go.html#3232360">n</a></span>&nbsp;<span class="op" id="3232482">&lt;</span>&nbsp;<span class="ident" id="3232484"><a href="/bufio/bufio.go.html#3217648">utf8</a></span><span class="op" id="3232488">.</span><span class="ident" id="3232489">UTFMax</span>&nbsp;<span class="op" id="3232496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3232501">//&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;buffer&nbsp;is&nbsp;silly&nbsp;small.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232549">return</span>&nbsp;<span class="ident" id="3232556"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232557">.</span><span class="ident" id="3232558">WriteString</span><span class="op" id="3232569">(</span><span class="builtintype" id="3232570">string</span><span class="op" id="3232576">(</span><span class="ident" id="3232577"><a href="/bufio/bufio.go.html#3232176">r</a></span><span class="op" id="3232578">)</span><span class="op" id="3232579">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232589"><a href="/bufio/bufio.go.html#3232185">size</a></span>&nbsp;<span class="op" id="3232594">=</span>&nbsp;<span class="ident" id="3232596"><a href="/bufio/bufio.go.html#3217648">utf8</a></span><span class="op" id="3232600">.</span><span class="ident" id="3232601">EncodeRune</span><span class="op" id="3232611">(</span><span class="ident" id="3232612"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232613">.</span><span class="ident" id="3232614">buf</span><span class="op" id="3232617">[</span><span class="ident" id="3232618"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232619">.</span><span class="ident" id="3232620">n</span><span class="op" id="3232621">:</span><span class="op" id="3232622">]</span><span class="op" id="3232623">,</span>&nbsp;<span class="ident" id="3232625"><a href="/bufio/bufio.go.html#3232176">r</a></span><span class="op" id="3232626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232629"><a href="/bufio/bufio.go.html#3232155">b</a></span><span class="op" id="3232630">.</span><span class="ident" id="3232631">n</span>&nbsp;<span class="op" id="3232633">+=</span>&nbsp;<span class="ident" id="3232636"><a href="/bufio/bufio.go.html#3232185">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232642">return</span>&nbsp;<span class="ident" id="3232649"><a href="/bufio/bufio.go.html#3232185">size</a></span><span class="op" id="3232653">,</span>&nbsp;<span class="ident" id="3232655">nil</span><br>
<span class="lineno">620</span><span class="op" id="3232659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3232662">//&nbsp;WriteString&nbsp;writes&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3232694">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="3232737">//&nbsp;If&nbsp;the&nbsp;count&nbsp;is&nbsp;less&nbsp;than&nbsp;len(s),&nbsp;it&nbsp;also&nbsp;returns&nbsp;an&nbsp;error&nbsp;explaining</span><br>
<span class="lineno">625</span><span class="comment" id="3232810">//&nbsp;why&nbsp;the&nbsp;write&nbsp;is&nbsp;short.</span><br>
<span class="lineno"></span><span class="keyword" id="3232837">func</span>&nbsp;<span class="op" id="3232842">(</span><span class="ident" id="3232843">b</span>&nbsp;<span class="op" id="3232845">*</span><span class="ident" id="3232846"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3232852">)</span>&nbsp;<span class="ident" id="3232854">WriteString</span><span class="op" id="3232865">(</span><span class="ident" id="3232866">s</span>&nbsp;<span class="builtintype" id="3232868">string</span><span class="op" id="3232874">)</span>&nbsp;<span class="op" id="3232876">(</span><span class="builtintype" id="3232877">int</span><span class="op" id="3232880">,</span>&nbsp;<span class="builtintype" id="3232882">error</span><span class="op" id="3232887">)</span>&nbsp;<span class="op" id="3232889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232892">nn</span>&nbsp;<span class="op" id="3232895">:=</span>&nbsp;<span class="num" id="3232898">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232901">for</span>&nbsp;<span class="builtinfunc" id="3232905">len</span><span class="op" id="3232908">(</span><span class="ident" id="3232909"><a href="/bufio/bufio.go.html#3232866">s</a></span><span class="op" id="3232910">)</span>&nbsp;<span class="op" id="3232912">&gt;</span>&nbsp;<span class="ident" id="3232914"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3232915">.</span><span class="ident" id="3232916">Available</span><span class="op" id="3232925">(</span><span class="op" id="3232926">)</span>&nbsp;<span class="op" id="3232928">&amp;&amp;</span>&nbsp;<span class="ident" id="3232931"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3232932">.</span><span class="ident" id="3232933">err</span>&nbsp;<span class="op" id="3232937">==</span>&nbsp;<span class="ident" id="3232940">nil</span>&nbsp;<span class="op" id="3232944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232948">n</span>&nbsp;<span class="op" id="3232950">:=</span>&nbsp;<span class="builtinfunc" id="3232953">copy</span><span class="op" id="3232957">(</span><span class="ident" id="3232958"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3232959">.</span><span class="ident" id="3232960">buf</span><span class="op" id="3232963">[</span><span class="ident" id="3232964"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3232965">.</span><span class="ident" id="3232966">n</span><span class="op" id="3232967">:</span><span class="op" id="3232968">]</span><span class="op" id="3232969">,</span>&nbsp;<span class="ident" id="3232971"><a href="/bufio/bufio.go.html#3232866">s</a></span><span class="op" id="3232972">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232976"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3232977">.</span><span class="ident" id="3232978">n</span>&nbsp;<span class="op" id="3232980">+=</span>&nbsp;<span class="ident" id="3232983"><a href="/bufio/bufio.go.html#3232948">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232987"><a href="/bufio/bufio.go.html#3232892">nn</a></span>&nbsp;<span class="op" id="3232990">+=</span>&nbsp;<span class="ident" id="3232993"><a href="/bufio/bufio.go.html#3232948">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232997"><a href="/bufio/bufio.go.html#3232866">s</a></span>&nbsp;<span class="op" id="3232999">=</span>&nbsp;<span class="ident" id="3233001"><a href="/bufio/bufio.go.html#3232866">s</a></span><span class="op" id="3233002">[</span><span class="ident" id="3233003"><a href="/bufio/bufio.go.html#3232948">n</a></span><span class="op" id="3233004">:</span><span class="op" id="3233005">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233009"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3233010">.</span><span class="ident" id="3233011">flush</span><span class="op" id="3233016">(</span><span class="op" id="3233017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233020">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233023">if</span>&nbsp;<span class="ident" id="3233026"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3233027">.</span><span class="ident" id="3233028">err</span>&nbsp;<span class="op" id="3233032">!=</span>&nbsp;<span class="ident" id="3233035">nil</span>&nbsp;<span class="op" id="3233039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233043">return</span>&nbsp;<span class="ident" id="3233050"><a href="/bufio/bufio.go.html#3232892">nn</a></span><span class="op" id="3233052">,</span>&nbsp;<span class="ident" id="3233054"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3233055">.</span><span class="ident" id="3233056">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233064">n</span>&nbsp;<span class="op" id="3233066">:=</span>&nbsp;<span class="builtinfunc" id="3233069">copy</span><span class="op" id="3233073">(</span><span class="ident" id="3233074"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3233075">.</span><span class="ident" id="3233076">buf</span><span class="op" id="3233079">[</span><span class="ident" id="3233080"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3233081">.</span><span class="ident" id="3233082">n</span><span class="op" id="3233083">:</span><span class="op" id="3233084">]</span><span class="op" id="3233085">,</span>&nbsp;<span class="ident" id="3233087"><a href="/bufio/bufio.go.html#3232866">s</a></span><span class="op" id="3233088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233091"><a href="/bufio/bufio.go.html#3232843">b</a></span><span class="op" id="3233092">.</span><span class="ident" id="3233093">n</span>&nbsp;<span class="op" id="3233095">+=</span>&nbsp;<span class="ident" id="3233098"><a href="/bufio/bufio.go.html#3233064">n</a></span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233101"><a href="/bufio/bufio.go.html#3232892">nn</a></span>&nbsp;<span class="op" id="3233104">+=</span>&nbsp;<span class="ident" id="3233107"><a href="/bufio/bufio.go.html#3233064">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233110">return</span>&nbsp;<span class="ident" id="3233117"><a href="/bufio/bufio.go.html#3232892">nn</a></span><span class="op" id="3233119">,</span>&nbsp;<span class="ident" id="3233121">nil</span><br>
<span class="lineno"></span><span class="op" id="3233125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3233128">//&nbsp;ReadFrom&nbsp;implements&nbsp;io.ReaderFrom.</span><br>
<span class="lineno">645</span><span class="keyword" id="3233166">func</span>&nbsp;<span class="op" id="3233171">(</span><span class="ident" id="3233172">b</span>&nbsp;<span class="op" id="3233174">*</span><span class="ident" id="3233175"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3233181">)</span>&nbsp;<span class="ident" id="3233183">ReadFrom</span><span class="op" id="3233191">(</span><span class="ident" id="3233192">r</span>&nbsp;<span class="ident" id="3233194"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3233196">.</span><span class="ident" id="3233197">Reader</span><span class="op" id="3233203">)</span>&nbsp;<span class="op" id="3233205">(</span><span class="ident" id="3233206">n</span>&nbsp;<span class="ident" id="3233208">int64</span><span class="op" id="3233213">,</span>&nbsp;<span class="ident" id="3233215">err</span>&nbsp;<span class="builtintype" id="3233219">error</span><span class="op" id="3233224">)</span>&nbsp;<span class="op" id="3233226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233229">if</span>&nbsp;<span class="ident" id="3233232"><a href="/bufio/bufio.go.html#3233172">b</a></span><span class="op" id="3233233">.</span><span class="ident" id="3233234">Buffered</span><span class="op" id="3233242">(</span><span class="op" id="3233243">)</span>&nbsp;<span class="op" id="3233245">==</span>&nbsp;<span class="num" id="3233248">0</span>&nbsp;<span class="op" id="3233250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233254">if</span>&nbsp;<span class="ident" id="3233257">w</span><span class="op" id="3233258">,</span>&nbsp;<span class="ident" id="3233260">ok</span>&nbsp;<span class="op" id="3233263">:=</span>&nbsp;<span class="ident" id="3233266"><a href="/bufio/bufio.go.html#3233172">b</a></span><span class="op" id="3233267">.</span><span class="ident" id="3233268">wr</span><span class="op" id="3233270">.</span><span class="op" id="3233271">(</span><span class="ident" id="3233272"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3233274">.</span><span class="ident" id="3233275">ReaderFrom</span><span class="op" id="3233285">)</span><span class="op" id="3233286">;</span>&nbsp;<span class="ident" id="3233288"><a href="/bufio/bufio.go.html#3233260">ok</a></span>&nbsp;<span class="op" id="3233291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233296">return</span>&nbsp;<span class="ident" id="3233303"><a href="/bufio/bufio.go.html#3233257">w</a></span><span class="op" id="3233304">.</span><span class="ident" id="3233305">ReadFrom</span><span class="op" id="3233313">(</span><span class="ident" id="3233314"><a href="/bufio/bufio.go.html#3233192">r</a></span><span class="op" id="3233315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233319">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233325">var</span>&nbsp;<span class="ident" id="3233329">m</span>&nbsp;<span class="builtintype" id="3233331">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233336">for</span>&nbsp;<span class="op" id="3233340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233344">if</span>&nbsp;<span class="ident" id="3233347"><a href="/bufio/bufio.go.html#3233172">b</a></span><span class="op" id="3233348">.</span><span class="ident" id="3233349">Available</span><span class="op" id="3233358">(</span><span class="op" id="3233359">)</span>&nbsp;<span class="op" id="3233361">==</span>&nbsp;<span class="num" id="3233364">0</span>&nbsp;<span class="op" id="3233366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233371">if</span>&nbsp;<span class="ident" id="3233374">err1</span>&nbsp;<span class="op" id="3233379">:=</span>&nbsp;<span class="ident" id="3233382"><a href="/bufio/bufio.go.html#3233172">b</a></span><span class="op" id="3233383">.</span><span class="ident" id="3233384">flush</span><span class="op" id="3233389">(</span><span class="op" id="3233390">)</span><span class="op" id="3233391">;</span>&nbsp;<span class="ident" id="3233393"><a href="/bufio/bufio.go.html#3233374">err1</a></span>&nbsp;<span class="op" id="3233398">!=</span>&nbsp;<span class="ident" id="3233401">nil</span>&nbsp;<span class="op" id="3233405">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233411">return</span>&nbsp;<span class="ident" id="3233418"><a href="/bufio/bufio.go.html#3233206">n</a></span><span class="op" id="3233419">,</span>&nbsp;<span class="ident" id="3233421"><a href="/bufio/bufio.go.html#3233374">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233437">nr</span>&nbsp;<span class="op" id="3233440">:=</span>&nbsp;<span class="num" id="3233443">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233447">for</span>&nbsp;<span class="ident" id="3233451"><a href="/bufio/bufio.go.html#3233437">nr</a></span>&nbsp;<span class="op" id="3233454">&lt;</span>&nbsp;<span class="ident" id="3233456"><a href="/bufio/bufio.go.html#3218293">maxConsecutiveEmptyReads</a></span>&nbsp;<span class="op" id="3233481">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233486"><a href="/bufio/bufio.go.html#3233329">m</a></span><span class="op" id="3233487">,</span>&nbsp;<span class="ident" id="3233489"><a href="/bufio/bufio.go.html#3233215">err</a></span>&nbsp;<span class="op" id="3233493">=</span>&nbsp;<span class="ident" id="3233495"><a href="/bufio/bufio.go.html#3233192">r</a></span><span class="op" id="3233496">.</span><span class="ident" id="3233497">Read</span><span class="op" id="3233501">(</span><span class="ident" id="3233502"><a href="/bufio/bufio.go.html#3233172">b</a></span><span class="op" id="3233503">.</span><span class="ident" id="3233504">buf</span><span class="op" id="3233507">[</span><span class="ident" id="3233508"><a href="/bufio/bufio.go.html#3233172">b</a></span><span class="op" id="3233509">.</span><span class="ident" id="3233510">n</span><span class="op" id="3233511">:</span><span class="op" id="3233512">]</span><span class="op" id="3233513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233518">if</span>&nbsp;<span class="ident" id="3233521"><a href="/bufio/bufio.go.html#3233329">m</a></span>&nbsp;<span class="op" id="3233523">!=</span>&nbsp;<span class="num" id="3233526">0</span>&nbsp;<span class="op" id="3233528">||</span>&nbsp;<span class="ident" id="3233531"><a href="/bufio/bufio.go.html#3233215">err</a></span>&nbsp;<span class="op" id="3233535">!=</span>&nbsp;<span class="ident" id="3233538">nil</span>&nbsp;<span class="op" id="3233542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233548">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233562"><a href="/bufio/bufio.go.html#3233437">nr</a></span><span class="op" id="3233564">++</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233573">if</span>&nbsp;<span class="ident" id="3233576"><a href="/bufio/bufio.go.html#3233437">nr</a></span>&nbsp;<span class="op" id="3233579">==</span>&nbsp;<span class="ident" id="3233582"><a href="/bufio/bufio.go.html#3218293">maxConsecutiveEmptyReads</a></span>&nbsp;<span class="op" id="3233607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233612">return</span>&nbsp;<span class="ident" id="3233619"><a href="/bufio/bufio.go.html#3233206">n</a></span><span class="op" id="3233620">,</span>&nbsp;<span class="ident" id="3233622"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3233624">.</span><span class="ident" id="3233625">ErrNoProgress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233645"><a href="/bufio/bufio.go.html#3233172">b</a></span><span class="op" id="3233646">.</span><span class="ident" id="3233647">n</span>&nbsp;<span class="op" id="3233649">+=</span>&nbsp;<span class="ident" id="3233652"><a href="/bufio/bufio.go.html#3233329">m</a></span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233656"><a href="/bufio/bufio.go.html#3233206">n</a></span>&nbsp;<span class="op" id="3233658">+=</span>&nbsp;<span class="ident" id="3233661">int64</span><span class="op" id="3233666">(</span><span class="ident" id="3233667"><a href="/bufio/bufio.go.html#3233329">m</a></span><span class="op" id="3233668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233672">if</span>&nbsp;<span class="ident" id="3233675"><a href="/bufio/bufio.go.html#3233215">err</a></span>&nbsp;<span class="op" id="3233679">!=</span>&nbsp;<span class="ident" id="3233682">nil</span>&nbsp;<span class="op" id="3233686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233691">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233702">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233705">if</span>&nbsp;<span class="ident" id="3233708"><a href="/bufio/bufio.go.html#3233215">err</a></span>&nbsp;<span class="op" id="3233712">==</span>&nbsp;<span class="ident" id="3233715"><a href="/bufio/bufio.go.html#3217642">io</a></span><span class="op" id="3233717">.</span><span class="ident" id="3233718">EOF</span>&nbsp;<span class="op" id="3233722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3233726">//&nbsp;If&nbsp;we&nbsp;filled&nbsp;the&nbsp;buffer&nbsp;exactly,&nbsp;flush&nbsp;pre-emptively.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233785">if</span>&nbsp;<span class="ident" id="3233788"><a href="/bufio/bufio.go.html#3233172">b</a></span><span class="op" id="3233789">.</span><span class="ident" id="3233790">Available</span><span class="op" id="3233799">(</span><span class="op" id="3233800">)</span>&nbsp;<span class="op" id="3233802">==</span>&nbsp;<span class="num" id="3233805">0</span>&nbsp;<span class="op" id="3233807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233812"><a href="/bufio/bufio.go.html#3233215">err</a></span>&nbsp;<span class="op" id="3233816">=</span>&nbsp;<span class="ident" id="3233818"><a href="/bufio/bufio.go.html#3233172">b</a></span><span class="op" id="3233819">.</span><span class="ident" id="3233820">flush</span><span class="op" id="3233825">(</span><span class="op" id="3233826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233830">}</span>&nbsp;<span class="keyword" id="3233832">else</span>&nbsp;<span class="op" id="3233837">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3233842"><a href="/bufio/bufio.go.html#3233215">err</a></span>&nbsp;<span class="op" id="3233846">=</span>&nbsp;<span class="ident" id="3233848">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3233857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3233860">return</span>&nbsp;<span class="ident" id="3233867"><a href="/bufio/bufio.go.html#3233206">n</a></span><span class="op" id="3233868">,</span>&nbsp;<span class="ident" id="3233870"><a href="/bufio/bufio.go.html#3233215">err</a></span><br>
<span class="lineno"></span><span class="op" id="3233874">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="comment" id="3233877">//&nbsp;buffered&nbsp;input&nbsp;and&nbsp;output</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3233907">//&nbsp;ReadWriter&nbsp;stores&nbsp;pointers&nbsp;to&nbsp;a&nbsp;Reader&nbsp;and&nbsp;a&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="comment" id="3233963">//&nbsp;It&nbsp;implements&nbsp;io.ReadWriter.</span><br>
<span class="lineno">690</span><span class="keyword" id="3233995">type</span>&nbsp;<span class="ident" id="3234000">ReadWriter</span>&nbsp;<span class="keyword" id="3234011">struct</span>&nbsp;<span class="op" id="3234018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3234021">*</span><span class="ident" id="3234022"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3234030">*</span><span class="ident" id="3234031"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><br>
<span class="lineno"></span><span class="op" id="3234038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">695</span><span class="comment" id="3234041">//&nbsp;NewReadWriter&nbsp;allocates&nbsp;a&nbsp;new&nbsp;ReadWriter&nbsp;that&nbsp;dispatches&nbsp;to&nbsp;r&nbsp;and&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="3234113">func</span>&nbsp;<span class="ident" id="3234118">NewReadWriter</span><span class="op" id="3234131">(</span><span class="ident" id="3234132">r</span>&nbsp;<span class="op" id="3234134">*</span><span class="ident" id="3234135"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="3234141">,</span>&nbsp;<span class="ident" id="3234143">w</span>&nbsp;<span class="op" id="3234145">*</span><span class="ident" id="3234146"><a href="/bufio/bufio.go.html#3229640">Writer</a></span><span class="op" id="3234152">)</span>&nbsp;<span class="op" id="3234154">*</span><span class="ident" id="3234155"><a href="/bufio/bufio.go.html#3234000">ReadWriter</a></span>&nbsp;<span class="op" id="3234166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3234169">return</span>&nbsp;<span class="op" id="3234176">&amp;</span><span class="ident" id="3234177"><a href="/bufio/bufio.go.html#3234000">ReadWriter</a></span><span class="op" id="3234187">{</span><span class="ident" id="3234188"><a href="/bufio/bufio.go.html#3234132">r</a></span><span class="op" id="3234189">,</span>&nbsp;<span class="ident" id="3234191"><a href="/bufio/bufio.go.html#3234143">w</a></span><span class="op" id="3234192">}</span><br>
<span class="lineno"></span><span class="op" id="3234194">}</span>
</div>
</body>
</html>
