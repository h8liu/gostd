<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html" class="current">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7702509">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7702564">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7702618">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7702669">package</span>&nbsp;<span class="ident" id="7702677">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7702682">import</span>&nbsp;<span class="op" id="7702689">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702692">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702701">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702717">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702734">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702750">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702757">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702765">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702776">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702787">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7702797">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7702800">func</span>&nbsp;<span class="ident" id="7702805">TestZeroRat</span><span class="op" id="7702816">(</span><span class="ident" id="7702817">t</span>&nbsp;<span class="op" id="7702819">*</span><span class="ident" id="7702820">testing</span><span class="op" id="7702827">.</span><span class="ident" id="7702828">T</span><span class="op" id="7702829">)</span>&nbsp;<span class="op" id="7702831">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7702834">var</span>&nbsp;<span class="ident" id="7702838">x</span><span class="op" id="7702839">,</span>&nbsp;<span class="ident" id="7702841">y</span><span class="op" id="7702842">,</span>&nbsp;<span class="ident" id="7702844">z</span>&nbsp;<span class="ident" id="7702846">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702851">y</span><span class="op" id="7702852">.</span><span class="ident" id="7702853">SetFrac64</span><span class="op" id="7702862">(</span><span class="num" id="7702863">0</span><span class="op" id="7702864">,</span>&nbsp;<span class="num" id="7702866">42</span><span class="op" id="7702868">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7702872">if</span>&nbsp;<span class="ident" id="7702875">x</span><span class="op" id="7702876">.</span><span class="ident" id="7702877">Cmp</span><span class="op" id="7702880">(</span><span class="op" id="7702881">&amp;</span><span class="ident" id="7702882">y</span><span class="op" id="7702883">)</span>&nbsp;<span class="op" id="7702885">!=</span>&nbsp;<span class="num" id="7702888">0</span>&nbsp;<span class="op" id="7702890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702894">t</span><span class="op" id="7702895">.</span><span class="ident" id="7702896">Errorf</span><span class="op" id="7702902">(</span><span class="string" id="7702903">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="7702942">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7702949">if</span>&nbsp;<span class="ident" id="7702952">s</span>&nbsp;<span class="op" id="7702954">:=</span>&nbsp;<span class="ident" id="7702957">x</span><span class="op" id="7702958">.</span><span class="ident" id="7702959">String</span><span class="op" id="7702965">(</span><span class="op" id="7702966">)</span><span class="op" id="7702967">;</span>&nbsp;<span class="ident" id="7702969">s</span>&nbsp;<span class="op" id="7702971">!=</span>&nbsp;<span class="string" id="7702974">&#34;0/1&#34;</span>&nbsp;<span class="op" id="7702980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702984">t</span><span class="op" id="7702985">.</span><span class="ident" id="7702986">Errorf</span><span class="op" id="7702992">(</span><span class="string" id="7702993">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="7703015">,</span>&nbsp;<span class="ident" id="7703017">s</span><span class="op" id="7703018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703021">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703025">if</span>&nbsp;<span class="ident" id="7703028">s</span>&nbsp;<span class="op" id="7703030">:=</span>&nbsp;<span class="ident" id="7703033">x</span><span class="op" id="7703034">.</span><span class="ident" id="7703035">RatString</span><span class="op" id="7703044">(</span><span class="op" id="7703045">)</span><span class="op" id="7703046">;</span>&nbsp;<span class="ident" id="7703048">s</span>&nbsp;<span class="op" id="7703050">!=</span>&nbsp;<span class="string" id="7703053">&#34;0&#34;</span>&nbsp;<span class="op" id="7703057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703061">t</span><span class="op" id="7703062">.</span><span class="ident" id="7703063">Errorf</span><span class="op" id="7703069">(</span><span class="string" id="7703070">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7703090">,</span>&nbsp;<span class="ident" id="7703092">s</span><span class="op" id="7703093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703100">z</span><span class="op" id="7703101">.</span><span class="ident" id="7703102">Add</span><span class="op" id="7703105">(</span><span class="op" id="7703106">&amp;</span><span class="ident" id="7703107">x</span><span class="op" id="7703108">,</span>&nbsp;<span class="op" id="7703110">&amp;</span><span class="ident" id="7703111">y</span><span class="op" id="7703112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703115">if</span>&nbsp;<span class="ident" id="7703118">s</span>&nbsp;<span class="op" id="7703120">:=</span>&nbsp;<span class="ident" id="7703123">z</span><span class="op" id="7703124">.</span><span class="ident" id="7703125">RatString</span><span class="op" id="7703134">(</span><span class="op" id="7703135">)</span><span class="op" id="7703136">;</span>&nbsp;<span class="ident" id="7703138">s</span>&nbsp;<span class="op" id="7703140">!=</span>&nbsp;<span class="string" id="7703143">&#34;0&#34;</span>&nbsp;<span class="op" id="7703147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703151">t</span><span class="op" id="7703152">.</span><span class="ident" id="7703153">Errorf</span><span class="op" id="7703159">(</span><span class="string" id="7703160">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7703182">,</span>&nbsp;<span class="ident" id="7703184">s</span><span class="op" id="7703185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703192">z</span><span class="op" id="7703193">.</span><span class="ident" id="7703194">Sub</span><span class="op" id="7703197">(</span><span class="op" id="7703198">&amp;</span><span class="ident" id="7703199">x</span><span class="op" id="7703200">,</span>&nbsp;<span class="op" id="7703202">&amp;</span><span class="ident" id="7703203">y</span><span class="op" id="7703204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703207">if</span>&nbsp;<span class="ident" id="7703210">s</span>&nbsp;<span class="op" id="7703212">:=</span>&nbsp;<span class="ident" id="7703215">z</span><span class="op" id="7703216">.</span><span class="ident" id="7703217">RatString</span><span class="op" id="7703226">(</span><span class="op" id="7703227">)</span><span class="op" id="7703228">;</span>&nbsp;<span class="ident" id="7703230">s</span>&nbsp;<span class="op" id="7703232">!=</span>&nbsp;<span class="string" id="7703235">&#34;0&#34;</span>&nbsp;<span class="op" id="7703239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703243">t</span><span class="op" id="7703244">.</span><span class="ident" id="7703245">Errorf</span><span class="op" id="7703251">(</span><span class="string" id="7703252">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7703274">,</span>&nbsp;<span class="ident" id="7703276">s</span><span class="op" id="7703277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703284">z</span><span class="op" id="7703285">.</span><span class="ident" id="7703286">Mul</span><span class="op" id="7703289">(</span><span class="op" id="7703290">&amp;</span><span class="ident" id="7703291">x</span><span class="op" id="7703292">,</span>&nbsp;<span class="op" id="7703294">&amp;</span><span class="ident" id="7703295">y</span><span class="op" id="7703296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703299">if</span>&nbsp;<span class="ident" id="7703302">s</span>&nbsp;<span class="op" id="7703304">:=</span>&nbsp;<span class="ident" id="7703307">z</span><span class="op" id="7703308">.</span><span class="ident" id="7703309">RatString</span><span class="op" id="7703318">(</span><span class="op" id="7703319">)</span><span class="op" id="7703320">;</span>&nbsp;<span class="ident" id="7703322">s</span>&nbsp;<span class="op" id="7703324">!=</span>&nbsp;<span class="string" id="7703327">&#34;0&#34;</span>&nbsp;<span class="op" id="7703331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703335">t</span><span class="op" id="7703336">.</span><span class="ident" id="7703337">Errorf</span><span class="op" id="7703343">(</span><span class="string" id="7703344">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7703366">,</span>&nbsp;<span class="ident" id="7703368">s</span><span class="op" id="7703369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7703376">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703407">defer</span>&nbsp;<span class="keyword" id="7703413">func</span><span class="op" id="7703417">(</span><span class="op" id="7703418">)</span>&nbsp;<span class="op" id="7703420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7703424">if</span>&nbsp;<span class="ident" id="7703427">s</span>&nbsp;<span class="op" id="7703429">:=</span>&nbsp;<span class="builtinfunc" id="7703432">recover</span><span class="op" id="7703439">(</span><span class="op" id="7703440">)</span><span class="op" id="7703441">;</span>&nbsp;<span class="ident" id="7703443">s</span>&nbsp;<span class="op" id="7703445">==</span>&nbsp;<span class="ident" id="7703448">nil</span>&nbsp;<span class="op" id="7703452">||</span>&nbsp;<span class="ident" id="7703455">s</span><span class="op" id="7703456">.</span><span class="op" id="7703457">(</span><span class="builtintype" id="7703458">string</span><span class="op" id="7703464">)</span>&nbsp;<span class="op" id="7703466">!=</span>&nbsp;<span class="string" id="7703469">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="7703488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7703493">panic</span><span class="op" id="7703498">(</span><span class="ident" id="7703499">s</span><span class="op" id="7703500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703504">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703507">}</span><span class="op" id="7703508">(</span><span class="op" id="7703509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703512">z</span><span class="op" id="7703513">.</span><span class="ident" id="7703514">Quo</span><span class="op" id="7703517">(</span><span class="op" id="7703518">&amp;</span><span class="ident" id="7703519">x</span><span class="op" id="7703520">,</span>&nbsp;<span class="op" id="7703522">&amp;</span><span class="ident" id="7703523">y</span><span class="op" id="7703524">)</span><br>
<span class="lineno"></span><span class="op" id="7703526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7703529">var</span>&nbsp;<span class="ident" id="7703533">setStringTests</span>&nbsp;<span class="op" id="7703548">=</span>&nbsp;<span class="op" id="7703550">[</span><span class="op" id="7703551">]</span><span class="keyword" id="7703552">struct</span>&nbsp;<span class="op" id="7703559">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703562">in</span><span class="op" id="7703564">,</span>&nbsp;<span class="ident" id="7703566">out</span>&nbsp;<span class="builtintype" id="7703570">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703578">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7703586">bool</span><br>
<span class="lineno"></span><span class="op" id="7703591">}</span><span class="op" id="7703592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703595">{</span><span class="string" id="7703596">&#34;0&#34;</span><span class="op" id="7703599">,</span>&nbsp;<span class="string" id="7703601">&#34;0&#34;</span><span class="op" id="7703604">,</span>&nbsp;<span class="builtintype" id="7703606">true</span><span class="op" id="7703610">}</span><span class="op" id="7703611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703614">{</span><span class="string" id="7703615">&#34;-0&#34;</span><span class="op" id="7703619">,</span>&nbsp;<span class="string" id="7703621">&#34;0&#34;</span><span class="op" id="7703624">,</span>&nbsp;<span class="builtintype" id="7703626">true</span><span class="op" id="7703630">}</span><span class="op" id="7703631">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703634">{</span><span class="string" id="7703635">&#34;1&#34;</span><span class="op" id="7703638">,</span>&nbsp;<span class="string" id="7703640">&#34;1&#34;</span><span class="op" id="7703643">,</span>&nbsp;<span class="builtintype" id="7703645">true</span><span class="op" id="7703649">}</span><span class="op" id="7703650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703653">{</span><span class="string" id="7703654">&#34;-1&#34;</span><span class="op" id="7703658">,</span>&nbsp;<span class="string" id="7703660">&#34;-1&#34;</span><span class="op" id="7703664">,</span>&nbsp;<span class="builtintype" id="7703666">true</span><span class="op" id="7703670">}</span><span class="op" id="7703671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703674">{</span><span class="string" id="7703675">&#34;1.&#34;</span><span class="op" id="7703679">,</span>&nbsp;<span class="string" id="7703681">&#34;1&#34;</span><span class="op" id="7703684">,</span>&nbsp;<span class="builtintype" id="7703686">true</span><span class="op" id="7703690">}</span><span class="op" id="7703691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703694">{</span><span class="string" id="7703695">&#34;1e0&#34;</span><span class="op" id="7703700">,</span>&nbsp;<span class="string" id="7703702">&#34;1&#34;</span><span class="op" id="7703705">,</span>&nbsp;<span class="builtintype" id="7703707">true</span><span class="op" id="7703711">}</span><span class="op" id="7703712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703715">{</span><span class="string" id="7703716">&#34;1.e1&#34;</span><span class="op" id="7703722">,</span>&nbsp;<span class="string" id="7703724">&#34;10&#34;</span><span class="op" id="7703728">,</span>&nbsp;<span class="builtintype" id="7703730">true</span><span class="op" id="7703734">}</span><span class="op" id="7703735">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703738">{</span><span class="ident" id="7703739">in</span><span class="op" id="7703741">:</span>&nbsp;<span class="string" id="7703743">&#34;1e&#34;</span><span class="op" id="7703747">,</span>&nbsp;<span class="ident" id="7703749">ok</span><span class="op" id="7703751">:</span>&nbsp;<span class="builtintype" id="7703753">false</span><span class="op" id="7703758">}</span><span class="op" id="7703759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703762">{</span><span class="ident" id="7703763">in</span><span class="op" id="7703765">:</span>&nbsp;<span class="string" id="7703767">&#34;1.e&#34;</span><span class="op" id="7703772">,</span>&nbsp;<span class="ident" id="7703774">ok</span><span class="op" id="7703776">:</span>&nbsp;<span class="builtintype" id="7703778">false</span><span class="op" id="7703783">}</span><span class="op" id="7703784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703787">{</span><span class="ident" id="7703788">in</span><span class="op" id="7703790">:</span>&nbsp;<span class="string" id="7703792">&#34;1e+14e-5&#34;</span><span class="op" id="7703802">,</span>&nbsp;<span class="ident" id="7703804">ok</span><span class="op" id="7703806">:</span>&nbsp;<span class="builtintype" id="7703808">false</span><span class="op" id="7703813">}</span><span class="op" id="7703814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703817">{</span><span class="ident" id="7703818">in</span><span class="op" id="7703820">:</span>&nbsp;<span class="string" id="7703822">&#34;1e4.5&#34;</span><span class="op" id="7703829">,</span>&nbsp;<span class="ident" id="7703831">ok</span><span class="op" id="7703833">:</span>&nbsp;<span class="builtintype" id="7703835">false</span><span class="op" id="7703840">}</span><span class="op" id="7703841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703844">{</span><span class="ident" id="7703845">in</span><span class="op" id="7703847">:</span>&nbsp;<span class="string" id="7703849">&#34;r&#34;</span><span class="op" id="7703852">,</span>&nbsp;<span class="ident" id="7703854">ok</span><span class="op" id="7703856">:</span>&nbsp;<span class="builtintype" id="7703858">false</span><span class="op" id="7703863">}</span><span class="op" id="7703864">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703867">{</span><span class="ident" id="7703868">in</span><span class="op" id="7703870">:</span>&nbsp;<span class="string" id="7703872">&#34;a/b&#34;</span><span class="op" id="7703877">,</span>&nbsp;<span class="ident" id="7703879">ok</span><span class="op" id="7703881">:</span>&nbsp;<span class="builtintype" id="7703883">false</span><span class="op" id="7703888">}</span><span class="op" id="7703889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703892">{</span><span class="ident" id="7703893">in</span><span class="op" id="7703895">:</span>&nbsp;<span class="string" id="7703897">&#34;a.b&#34;</span><span class="op" id="7703902">,</span>&nbsp;<span class="ident" id="7703904">ok</span><span class="op" id="7703906">:</span>&nbsp;<span class="builtintype" id="7703908">false</span><span class="op" id="7703913">}</span><span class="op" id="7703914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703917">{</span><span class="string" id="7703918">&#34;-0.1&#34;</span><span class="op" id="7703924">,</span>&nbsp;<span class="string" id="7703926">&#34;-1/10&#34;</span><span class="op" id="7703933">,</span>&nbsp;<span class="builtintype" id="7703935">true</span><span class="op" id="7703939">}</span><span class="op" id="7703940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703943">{</span><span class="string" id="7703944">&#34;-.1&#34;</span><span class="op" id="7703949">,</span>&nbsp;<span class="string" id="7703951">&#34;-1/10&#34;</span><span class="op" id="7703958">,</span>&nbsp;<span class="builtintype" id="7703960">true</span><span class="op" id="7703964">}</span><span class="op" id="7703965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703968">{</span><span class="string" id="7703969">&#34;2/4&#34;</span><span class="op" id="7703974">,</span>&nbsp;<span class="string" id="7703976">&#34;1/2&#34;</span><span class="op" id="7703981">,</span>&nbsp;<span class="builtintype" id="7703983">true</span><span class="op" id="7703987">}</span><span class="op" id="7703988">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703991">{</span><span class="string" id="7703992">&#34;.25&#34;</span><span class="op" id="7703997">,</span>&nbsp;<span class="string" id="7703999">&#34;1/4&#34;</span><span class="op" id="7704004">,</span>&nbsp;<span class="builtintype" id="7704006">true</span><span class="op" id="7704010">}</span><span class="op" id="7704011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704014">{</span><span class="string" id="7704015">&#34;-1/5&#34;</span><span class="op" id="7704021">,</span>&nbsp;<span class="string" id="7704023">&#34;-1/5&#34;</span><span class="op" id="7704029">,</span>&nbsp;<span class="builtintype" id="7704031">true</span><span class="op" id="7704035">}</span><span class="op" id="7704036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704039">{</span><span class="string" id="7704040">&#34;8129567.7690E14&#34;</span><span class="op" id="7704057">,</span>&nbsp;<span class="string" id="7704059">&#34;812956776900000000000&#34;</span><span class="op" id="7704082">,</span>&nbsp;<span class="builtintype" id="7704084">true</span><span class="op" id="7704088">}</span><span class="op" id="7704089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704092">{</span><span class="string" id="7704093">&#34;78189e+4&#34;</span><span class="op" id="7704103">,</span>&nbsp;<span class="string" id="7704105">&#34;781890000&#34;</span><span class="op" id="7704116">,</span>&nbsp;<span class="builtintype" id="7704118">true</span><span class="op" id="7704122">}</span><span class="op" id="7704123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704126">{</span><span class="string" id="7704127">&#34;553019.8935e+8&#34;</span><span class="op" id="7704143">,</span>&nbsp;<span class="string" id="7704145">&#34;55301989350000&#34;</span><span class="op" id="7704161">,</span>&nbsp;<span class="builtintype" id="7704163">true</span><span class="op" id="7704167">}</span><span class="op" id="7704168">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704171">{</span><span class="string" id="7704172">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="7704207">,</span>&nbsp;<span class="string" id="7704209">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="7704252">,</span>&nbsp;<span class="builtintype" id="7704254">true</span><span class="op" id="7704258">}</span><span class="op" id="7704259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704262">{</span><span class="string" id="7704263">&#34;9877861857500000E-7&#34;</span><span class="op" id="7704284">,</span>&nbsp;<span class="string" id="7704286">&#34;3951144743/4&#34;</span><span class="op" id="7704300">,</span>&nbsp;<span class="builtintype" id="7704302">true</span><span class="op" id="7704306">}</span><span class="op" id="7704307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704310">{</span><span class="string" id="7704311">&#34;2169378.417e-3&#34;</span><span class="op" id="7704327">,</span>&nbsp;<span class="string" id="7704329">&#34;2169378417/1000000&#34;</span><span class="op" id="7704349">,</span>&nbsp;<span class="builtintype" id="7704351">true</span><span class="op" id="7704355">}</span><span class="op" id="7704356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704359">{</span><span class="string" id="7704360">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7704398">,</span>&nbsp;<span class="string" id="7704400">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7704438">,</span>&nbsp;<span class="builtintype" id="7704440">true</span><span class="op" id="7704444">}</span><span class="op" id="7704445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704448">{</span><span class="string" id="7704449">&#34;53/70893980658822810696&#34;</span><span class="op" id="7704474">,</span>&nbsp;<span class="string" id="7704476">&#34;53/70893980658822810696&#34;</span><span class="op" id="7704501">,</span>&nbsp;<span class="builtintype" id="7704503">true</span><span class="op" id="7704507">}</span><span class="op" id="7704508">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704511">{</span><span class="string" id="7704512">&#34;106/141787961317645621392&#34;</span><span class="op" id="7704539">,</span>&nbsp;<span class="string" id="7704541">&#34;53/70893980658822810696&#34;</span><span class="op" id="7704566">,</span>&nbsp;<span class="builtintype" id="7704568">true</span><span class="op" id="7704572">}</span><span class="op" id="7704573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704576">{</span><span class="string" id="7704577">&#34;204211327800791583.81095&#34;</span><span class="op" id="7704603">,</span>&nbsp;<span class="string" id="7704605">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="7704635">,</span>&nbsp;<span class="builtintype" id="7704637">true</span><span class="op" id="7704641">}</span><span class="op" id="7704642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704645">{</span><span class="ident" id="7704646">in</span><span class="op" id="7704648">:</span>&nbsp;<span class="string" id="7704650">&#34;1/0&#34;</span><span class="op" id="7704655">,</span>&nbsp;<span class="ident" id="7704657">ok</span><span class="op" id="7704659">:</span>&nbsp;<span class="builtintype" id="7704661">false</span><span class="op" id="7704666">}</span><span class="op" id="7704667">,</span><br>
<span class="lineno"></span><span class="op" id="7704669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7704672">func</span>&nbsp;<span class="ident" id="7704677">TestRatSetString</span><span class="op" id="7704693">(</span><span class="ident" id="7704694">t</span>&nbsp;<span class="op" id="7704696">*</span><span class="ident" id="7704697">testing</span><span class="op" id="7704704">.</span><span class="ident" id="7704705">T</span><span class="op" id="7704706">)</span>&nbsp;<span class="op" id="7704708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704711">for</span>&nbsp;<span class="ident" id="7704715">i</span><span class="op" id="7704716">,</span>&nbsp;<span class="ident" id="7704718">test</span>&nbsp;<span class="op" id="7704723">:=</span>&nbsp;<span class="keyword" id="7704726">range</span>&nbsp;<span class="ident" id="7704732">setStringTests</span>&nbsp;<span class="op" id="7704747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704751">x</span><span class="op" id="7704752">,</span>&nbsp;<span class="ident" id="7704754">ok</span>&nbsp;<span class="op" id="7704757">:=</span>&nbsp;<span class="builtinfunc" id="7704760">new</span><span class="op" id="7704763">(</span><span class="ident" id="7704764">Rat</span><span class="op" id="7704767">)</span><span class="op" id="7704768">.</span><span class="ident" id="7704769">SetString</span><span class="op" id="7704778">(</span><span class="ident" id="7704779">test</span><span class="op" id="7704783">.</span><span class="ident" id="7704784">in</span><span class="op" id="7704786">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704791">if</span>&nbsp;<span class="ident" id="7704794">ok</span>&nbsp;<span class="op" id="7704797">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7704802">if</span>&nbsp;<span class="op" id="7704805">!</span><span class="ident" id="7704806">test</span><span class="op" id="7704810">.</span><span class="ident" id="7704811">ok</span>&nbsp;<span class="op" id="7704814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704820">t</span><span class="op" id="7704821">.</span><span class="ident" id="7704822">Errorf</span><span class="op" id="7704828">(</span><span class="string" id="7704829">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="7704865">,</span>&nbsp;<span class="ident" id="7704867">i</span><span class="op" id="7704868">,</span>&nbsp;<span class="ident" id="7704870">test</span><span class="op" id="7704874">.</span><span class="ident" id="7704875">in</span><span class="op" id="7704877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704882">}</span>&nbsp;<span class="keyword" id="7704884">else</span>&nbsp;<span class="keyword" id="7704889">if</span>&nbsp;<span class="ident" id="7704892">x</span><span class="op" id="7704893">.</span><span class="ident" id="7704894">RatString</span><span class="op" id="7704903">(</span><span class="op" id="7704904">)</span>&nbsp;<span class="op" id="7704906">!=</span>&nbsp;<span class="ident" id="7704909">test</span><span class="op" id="7704913">.</span><span class="ident" id="7704914">out</span>&nbsp;<span class="op" id="7704918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704924">t</span><span class="op" id="7704925">.</span><span class="ident" id="7704926">Errorf</span><span class="op" id="7704932">(</span><span class="string" id="7704933">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7704967">,</span>&nbsp;<span class="ident" id="7704969">i</span><span class="op" id="7704970">,</span>&nbsp;<span class="ident" id="7704972">test</span><span class="op" id="7704976">.</span><span class="ident" id="7704977">in</span><span class="op" id="7704979">,</span>&nbsp;<span class="ident" id="7704981">x</span><span class="op" id="7704982">.</span><span class="ident" id="7704983">RatString</span><span class="op" id="7704992">(</span><span class="op" id="7704993">)</span><span class="op" id="7704994">,</span>&nbsp;<span class="ident" id="7704996">test</span><span class="op" id="7705000">.</span><span class="ident" id="7705001">out</span><span class="op" id="7705004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705009">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705013">}</span>&nbsp;<span class="keyword" id="7705015">else</span>&nbsp;<span class="keyword" id="7705020">if</span>&nbsp;<span class="ident" id="7705023">x</span>&nbsp;<span class="op" id="7705025">!=</span>&nbsp;<span class="ident" id="7705028">nil</span>&nbsp;<span class="op" id="7705032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705037">t</span><span class="op" id="7705038">.</span><span class="ident" id="7705039">Errorf</span><span class="op" id="7705045">(</span><span class="string" id="7705046">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7705081">,</span>&nbsp;<span class="ident" id="7705083">i</span><span class="op" id="7705084">,</span>&nbsp;<span class="ident" id="7705086">test</span><span class="op" id="7705090">.</span><span class="ident" id="7705091">in</span><span class="op" id="7705093">,</span>&nbsp;<span class="ident" id="7705095">x</span><span class="op" id="7705096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705103">}</span><br>
<span class="lineno"></span><span class="op" id="7705105">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="7705108">func</span>&nbsp;<span class="ident" id="7705113">TestRatScan</span><span class="op" id="7705124">(</span><span class="ident" id="7705125">t</span>&nbsp;<span class="op" id="7705127">*</span><span class="ident" id="7705128">testing</span><span class="op" id="7705135">.</span><span class="ident" id="7705136">T</span><span class="op" id="7705137">)</span>&nbsp;<span class="op" id="7705139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705142">var</span>&nbsp;<span class="ident" id="7705146">buf</span>&nbsp;<span class="ident" id="7705150">bytes</span><span class="op" id="7705155">.</span><span class="ident" id="7705156">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705164">for</span>&nbsp;<span class="ident" id="7705168">i</span><span class="op" id="7705169">,</span>&nbsp;<span class="ident" id="7705171">test</span>&nbsp;<span class="op" id="7705176">:=</span>&nbsp;<span class="keyword" id="7705179">range</span>&nbsp;<span class="ident" id="7705185">setStringTests</span>&nbsp;<span class="op" id="7705200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705204">x</span>&nbsp;<span class="op" id="7705206">:=</span>&nbsp;<span class="builtinfunc" id="7705209">new</span><span class="op" id="7705212">(</span><span class="ident" id="7705213">Rat</span><span class="op" id="7705216">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705220">buf</span><span class="op" id="7705223">.</span><span class="ident" id="7705224">Reset</span><span class="op" id="7705229">(</span><span class="op" id="7705230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705234">buf</span><span class="op" id="7705237">.</span><span class="ident" id="7705238">WriteString</span><span class="op" id="7705249">(</span><span class="ident" id="7705250">test</span><span class="op" id="7705254">.</span><span class="ident" id="7705255">in</span><span class="op" id="7705257">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705262">_</span><span class="op" id="7705263">,</span>&nbsp;<span class="ident" id="7705265">err</span>&nbsp;<span class="op" id="7705269">:=</span>&nbsp;<span class="ident" id="7705272">fmt</span><span class="op" id="7705275">.</span><span class="ident" id="7705276">Fscanf</span><span class="op" id="7705282">(</span><span class="op" id="7705283">&amp;</span><span class="ident" id="7705284">buf</span><span class="op" id="7705287">,</span>&nbsp;<span class="string" id="7705289">&#34;%v&#34;</span><span class="op" id="7705293">,</span>&nbsp;<span class="ident" id="7705295">x</span><span class="op" id="7705296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705300">if</span>&nbsp;<span class="ident" id="7705303">err</span>&nbsp;<span class="op" id="7705307">==</span>&nbsp;<span class="ident" id="7705310">nil</span>&nbsp;<span class="op" id="7705314">!=</span>&nbsp;<span class="ident" id="7705317">test</span><span class="op" id="7705321">.</span><span class="ident" id="7705322">ok</span>&nbsp;<span class="op" id="7705325">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705330">if</span>&nbsp;<span class="ident" id="7705333">test</span><span class="op" id="7705337">.</span><span class="ident" id="7705338">ok</span>&nbsp;<span class="op" id="7705341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705347">t</span><span class="op" id="7705348">.</span><span class="ident" id="7705349">Errorf</span><span class="op" id="7705355">(</span><span class="string" id="7705356">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7705371">,</span>&nbsp;<span class="ident" id="7705373">i</span><span class="op" id="7705374">,</span>&nbsp;<span class="ident" id="7705376">err</span><span class="op" id="7705379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705384">}</span>&nbsp;<span class="keyword" id="7705386">else</span>&nbsp;<span class="op" id="7705391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705397">t</span><span class="op" id="7705398">.</span><span class="ident" id="7705399">Errorf</span><span class="op" id="7705405">(</span><span class="string" id="7705406">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="7705426">,</span>&nbsp;<span class="ident" id="7705428">i</span><span class="op" id="7705429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705434">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705439">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705454">if</span>&nbsp;<span class="ident" id="7705457">err</span>&nbsp;<span class="op" id="7705461">==</span>&nbsp;<span class="ident" id="7705464">nil</span>&nbsp;<span class="op" id="7705468">&amp;&amp;</span>&nbsp;<span class="ident" id="7705471">x</span><span class="op" id="7705472">.</span><span class="ident" id="7705473">RatString</span><span class="op" id="7705482">(</span><span class="op" id="7705483">)</span>&nbsp;<span class="op" id="7705485">!=</span>&nbsp;<span class="ident" id="7705488">test</span><span class="op" id="7705492">.</span><span class="ident" id="7705493">out</span>&nbsp;<span class="op" id="7705497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705502">t</span><span class="op" id="7705503">.</span><span class="ident" id="7705504">Errorf</span><span class="op" id="7705510">(</span><span class="string" id="7705511">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7705531">,</span>&nbsp;<span class="ident" id="7705533">i</span><span class="op" id="7705534">,</span>&nbsp;<span class="ident" id="7705536">x</span><span class="op" id="7705537">.</span><span class="ident" id="7705538">RatString</span><span class="op" id="7705547">(</span><span class="op" id="7705548">)</span><span class="op" id="7705549">,</span>&nbsp;<span class="ident" id="7705551">test</span><span class="op" id="7705555">.</span><span class="ident" id="7705556">out</span><span class="op" id="7705559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705563">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705566">}</span><br>
<span class="lineno"></span><span class="op" id="7705568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7705571">var</span>&nbsp;<span class="ident" id="7705575">floatStringTests</span>&nbsp;<span class="op" id="7705592">=</span>&nbsp;<span class="op" id="7705594">[</span><span class="op" id="7705595">]</span><span class="keyword" id="7705596">struct</span>&nbsp;<span class="op" id="7705603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705606">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7705611">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705619">prec</span>&nbsp;<span class="builtintype" id="7705624">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705629">out</span>&nbsp;&nbsp;<span class="builtintype" id="7705634">string</span><br>
<span class="lineno"></span><span class="op" id="7705641">}</span><span class="op" id="7705642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705645">{</span><span class="string" id="7705646">&#34;0&#34;</span><span class="op" id="7705649">,</span>&nbsp;<span class="num" id="7705651">0</span><span class="op" id="7705652">,</span>&nbsp;<span class="string" id="7705654">&#34;0&#34;</span><span class="op" id="7705657">}</span><span class="op" id="7705658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705661">{</span><span class="string" id="7705662">&#34;0&#34;</span><span class="op" id="7705665">,</span>&nbsp;<span class="num" id="7705667">4</span><span class="op" id="7705668">,</span>&nbsp;<span class="string" id="7705670">&#34;0.0000&#34;</span><span class="op" id="7705678">}</span><span class="op" id="7705679">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705682">{</span><span class="string" id="7705683">&#34;1&#34;</span><span class="op" id="7705686">,</span>&nbsp;<span class="num" id="7705688">0</span><span class="op" id="7705689">,</span>&nbsp;<span class="string" id="7705691">&#34;1&#34;</span><span class="op" id="7705694">}</span><span class="op" id="7705695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705698">{</span><span class="string" id="7705699">&#34;1&#34;</span><span class="op" id="7705702">,</span>&nbsp;<span class="num" id="7705704">2</span><span class="op" id="7705705">,</span>&nbsp;<span class="string" id="7705707">&#34;1.00&#34;</span><span class="op" id="7705713">}</span><span class="op" id="7705714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705717">{</span><span class="string" id="7705718">&#34;-1&#34;</span><span class="op" id="7705722">,</span>&nbsp;<span class="num" id="7705724">0</span><span class="op" id="7705725">,</span>&nbsp;<span class="string" id="7705727">&#34;-1&#34;</span><span class="op" id="7705731">}</span><span class="op" id="7705732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705735">{</span><span class="string" id="7705736">&#34;.25&#34;</span><span class="op" id="7705741">,</span>&nbsp;<span class="num" id="7705743">2</span><span class="op" id="7705744">,</span>&nbsp;<span class="string" id="7705746">&#34;0.25&#34;</span><span class="op" id="7705752">}</span><span class="op" id="7705753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705756">{</span><span class="string" id="7705757">&#34;.25&#34;</span><span class="op" id="7705762">,</span>&nbsp;<span class="num" id="7705764">1</span><span class="op" id="7705765">,</span>&nbsp;<span class="string" id="7705767">&#34;0.3&#34;</span><span class="op" id="7705772">}</span><span class="op" id="7705773">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705776">{</span><span class="string" id="7705777">&#34;.25&#34;</span><span class="op" id="7705782">,</span>&nbsp;<span class="num" id="7705784">3</span><span class="op" id="7705785">,</span>&nbsp;<span class="string" id="7705787">&#34;0.250&#34;</span><span class="op" id="7705794">}</span><span class="op" id="7705795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705798">{</span><span class="string" id="7705799">&#34;-1/3&#34;</span><span class="op" id="7705805">,</span>&nbsp;<span class="num" id="7705807">3</span><span class="op" id="7705808">,</span>&nbsp;<span class="string" id="7705810">&#34;-0.333&#34;</span><span class="op" id="7705818">}</span><span class="op" id="7705819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705822">{</span><span class="string" id="7705823">&#34;-2/3&#34;</span><span class="op" id="7705829">,</span>&nbsp;<span class="num" id="7705831">4</span><span class="op" id="7705832">,</span>&nbsp;<span class="string" id="7705834">&#34;-0.6667&#34;</span><span class="op" id="7705843">}</span><span class="op" id="7705844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705847">{</span><span class="string" id="7705848">&#34;0.96&#34;</span><span class="op" id="7705854">,</span>&nbsp;<span class="num" id="7705856">1</span><span class="op" id="7705857">,</span>&nbsp;<span class="string" id="7705859">&#34;1.0&#34;</span><span class="op" id="7705864">}</span><span class="op" id="7705865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705868">{</span><span class="string" id="7705869">&#34;0.999&#34;</span><span class="op" id="7705876">,</span>&nbsp;<span class="num" id="7705878">2</span><span class="op" id="7705879">,</span>&nbsp;<span class="string" id="7705881">&#34;1.00&#34;</span><span class="op" id="7705887">}</span><span class="op" id="7705888">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705891">{</span><span class="string" id="7705892">&#34;0.9&#34;</span><span class="op" id="7705897">,</span>&nbsp;<span class="num" id="7705899">0</span><span class="op" id="7705900">,</span>&nbsp;<span class="string" id="7705902">&#34;1&#34;</span><span class="op" id="7705905">}</span><span class="op" id="7705906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705909">{</span><span class="string" id="7705910">&#34;.25&#34;</span><span class="op" id="7705915">,</span>&nbsp;<span class="op" id="7705917">-</span><span class="num" id="7705918">1</span><span class="op" id="7705919">,</span>&nbsp;<span class="string" id="7705921">&#34;0&#34;</span><span class="op" id="7705924">}</span><span class="op" id="7705925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705928">{</span><span class="string" id="7705929">&#34;.55&#34;</span><span class="op" id="7705934">,</span>&nbsp;<span class="op" id="7705936">-</span><span class="num" id="7705937">1</span><span class="op" id="7705938">,</span>&nbsp;<span class="string" id="7705940">&#34;1&#34;</span><span class="op" id="7705943">}</span><span class="op" id="7705944">,</span><br>
<span class="lineno"></span><span class="op" id="7705946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7705949">func</span>&nbsp;<span class="ident" id="7705954">TestFloatString</span><span class="op" id="7705969">(</span><span class="ident" id="7705970">t</span>&nbsp;<span class="op" id="7705972">*</span><span class="ident" id="7705973">testing</span><span class="op" id="7705980">.</span><span class="ident" id="7705981">T</span><span class="op" id="7705982">)</span>&nbsp;<span class="op" id="7705984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705987">for</span>&nbsp;<span class="ident" id="7705991">i</span><span class="op" id="7705992">,</span>&nbsp;<span class="ident" id="7705994">test</span>&nbsp;<span class="op" id="7705999">:=</span>&nbsp;<span class="keyword" id="7706002">range</span>&nbsp;<span class="ident" id="7706008">floatStringTests</span>&nbsp;<span class="op" id="7706025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706029">x</span><span class="op" id="7706030">,</span>&nbsp;<span class="ident" id="7706032">_</span>&nbsp;<span class="op" id="7706034">:=</span>&nbsp;<span class="builtinfunc" id="7706037">new</span><span class="op" id="7706040">(</span><span class="ident" id="7706041">Rat</span><span class="op" id="7706044">)</span><span class="op" id="7706045">.</span><span class="ident" id="7706046">SetString</span><span class="op" id="7706055">(</span><span class="ident" id="7706056">test</span><span class="op" id="7706060">.</span><span class="ident" id="7706061">in</span><span class="op" id="7706063">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706068">if</span>&nbsp;<span class="ident" id="7706071">x</span><span class="op" id="7706072">.</span><span class="ident" id="7706073">FloatString</span><span class="op" id="7706084">(</span><span class="ident" id="7706085">test</span><span class="op" id="7706089">.</span><span class="ident" id="7706090">prec</span><span class="op" id="7706094">)</span>&nbsp;<span class="op" id="7706096">!=</span>&nbsp;<span class="ident" id="7706099">test</span><span class="op" id="7706103">.</span><span class="ident" id="7706104">out</span>&nbsp;<span class="op" id="7706108">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706113">t</span><span class="op" id="7706114">.</span><span class="ident" id="7706115">Errorf</span><span class="op" id="7706121">(</span><span class="string" id="7706122">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7706142">,</span>&nbsp;<span class="ident" id="7706144">i</span><span class="op" id="7706145">,</span>&nbsp;<span class="ident" id="7706147">x</span><span class="op" id="7706148">.</span><span class="ident" id="7706149">FloatString</span><span class="op" id="7706160">(</span><span class="ident" id="7706161">test</span><span class="op" id="7706165">.</span><span class="ident" id="7706166">prec</span><span class="op" id="7706170">)</span><span class="op" id="7706171">,</span>&nbsp;<span class="ident" id="7706173">test</span><span class="op" id="7706177">.</span><span class="ident" id="7706178">out</span><span class="op" id="7706181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706188">}</span><br>
<span class="lineno"></span><span class="op" id="7706190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7706193">func</span>&nbsp;<span class="ident" id="7706198">TestRatSign</span><span class="op" id="7706209">(</span><span class="ident" id="7706210">t</span>&nbsp;<span class="op" id="7706212">*</span><span class="ident" id="7706213">testing</span><span class="op" id="7706220">.</span><span class="ident" id="7706221">T</span><span class="op" id="7706222">)</span>&nbsp;<span class="op" id="7706224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706227">zero</span>&nbsp;<span class="op" id="7706232">:=</span>&nbsp;<span class="ident" id="7706235">NewRat</span><span class="op" id="7706241">(</span><span class="num" id="7706242">0</span><span class="op" id="7706243">,</span>&nbsp;<span class="num" id="7706245">1</span><span class="op" id="7706246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706249">for</span>&nbsp;<span class="ident" id="7706253">_</span><span class="op" id="7706254">,</span>&nbsp;<span class="ident" id="7706256">a</span>&nbsp;<span class="op" id="7706258">:=</span>&nbsp;<span class="keyword" id="7706261">range</span>&nbsp;<span class="ident" id="7706267">setStringTests</span>&nbsp;<span class="op" id="7706282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706286">x</span><span class="op" id="7706287">,</span>&nbsp;<span class="ident" id="7706289">ok</span>&nbsp;<span class="op" id="7706292">:=</span>&nbsp;<span class="builtinfunc" id="7706295">new</span><span class="op" id="7706298">(</span><span class="ident" id="7706299">Rat</span><span class="op" id="7706302">)</span><span class="op" id="7706303">.</span><span class="ident" id="7706304">SetString</span><span class="op" id="7706313">(</span><span class="ident" id="7706314">a</span><span class="op" id="7706315">.</span><span class="ident" id="7706316">in</span><span class="op" id="7706318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706322">if</span>&nbsp;<span class="op" id="7706325">!</span><span class="ident" id="7706326">ok</span>&nbsp;<span class="op" id="7706329">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706334">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706349">s</span>&nbsp;<span class="op" id="7706351">:=</span>&nbsp;<span class="ident" id="7706354">x</span><span class="op" id="7706355">.</span><span class="ident" id="7706356">Sign</span><span class="op" id="7706360">(</span><span class="op" id="7706361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706365">e</span>&nbsp;<span class="op" id="7706367">:=</span>&nbsp;<span class="ident" id="7706370">x</span><span class="op" id="7706371">.</span><span class="ident" id="7706372">Cmp</span><span class="op" id="7706375">(</span><span class="ident" id="7706376">zero</span><span class="op" id="7706380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706384">if</span>&nbsp;<span class="ident" id="7706387">s</span>&nbsp;<span class="op" id="7706389">!=</span>&nbsp;<span class="ident" id="7706392">e</span>&nbsp;<span class="op" id="7706394">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706399">t</span><span class="op" id="7706400">.</span><span class="ident" id="7706401">Errorf</span><span class="op" id="7706407">(</span><span class="string" id="7706408">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7706436">,</span>&nbsp;<span class="ident" id="7706438">s</span><span class="op" id="7706439">,</span>&nbsp;<span class="ident" id="7706441">e</span><span class="op" id="7706442">,</span>&nbsp;<span class="op" id="7706444">&amp;</span><span class="ident" id="7706445">x</span><span class="op" id="7706446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706453">}</span><br>
<span class="lineno"></span><span class="op" id="7706455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7706458">var</span>&nbsp;<span class="ident" id="7706462">ratCmpTests</span>&nbsp;<span class="op" id="7706474">=</span>&nbsp;<span class="op" id="7706476">[</span><span class="op" id="7706477">]</span><span class="keyword" id="7706478">struct</span>&nbsp;<span class="op" id="7706485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706488">rat1</span><span class="op" id="7706492">,</span>&nbsp;<span class="ident" id="7706494">rat2</span>&nbsp;<span class="builtintype" id="7706499">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706507">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7706518">int</span><br>
<span class="lineno"></span><span class="op" id="7706522">}</span><span class="op" id="7706523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706526">{</span><span class="string" id="7706527">&#34;0&#34;</span><span class="op" id="7706530">,</span>&nbsp;<span class="string" id="7706532">&#34;0/1&#34;</span><span class="op" id="7706537">,</span>&nbsp;<span class="num" id="7706539">0</span><span class="op" id="7706540">}</span><span class="op" id="7706541">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706544">{</span><span class="string" id="7706545">&#34;1/1&#34;</span><span class="op" id="7706550">,</span>&nbsp;<span class="string" id="7706552">&#34;1&#34;</span><span class="op" id="7706555">,</span>&nbsp;<span class="num" id="7706557">0</span><span class="op" id="7706558">}</span><span class="op" id="7706559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706562">{</span><span class="string" id="7706563">&#34;-1&#34;</span><span class="op" id="7706567">,</span>&nbsp;<span class="string" id="7706569">&#34;-2/2&#34;</span><span class="op" id="7706575">,</span>&nbsp;<span class="num" id="7706577">0</span><span class="op" id="7706578">}</span><span class="op" id="7706579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706582">{</span><span class="string" id="7706583">&#34;1&#34;</span><span class="op" id="7706586">,</span>&nbsp;<span class="string" id="7706588">&#34;0&#34;</span><span class="op" id="7706591">,</span>&nbsp;<span class="num" id="7706593">1</span><span class="op" id="7706594">}</span><span class="op" id="7706595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706598">{</span><span class="string" id="7706599">&#34;0/1&#34;</span><span class="op" id="7706604">,</span>&nbsp;<span class="string" id="7706606">&#34;1/1&#34;</span><span class="op" id="7706611">,</span>&nbsp;<span class="op" id="7706613">-</span><span class="num" id="7706614">1</span><span class="op" id="7706615">}</span><span class="op" id="7706616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706619">{</span><span class="string" id="7706620">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="7706647">,</span>&nbsp;<span class="string" id="7706649">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="7706676">,</span>&nbsp;<span class="op" id="7706678">-</span><span class="num" id="7706679">1</span><span class="op" id="7706680">}</span><span class="op" id="7706681">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706684">{</span><span class="string" id="7706685">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="7706718">,</span>&nbsp;<span class="string" id="7706720">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="7706753">,</span>&nbsp;<span class="op" id="7706755">-</span><span class="num" id="7706756">1</span><span class="op" id="7706757">}</span><span class="op" id="7706758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706761">{</span><span class="string" id="7706762">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="7706799">,</span>&nbsp;<span class="string" id="7706801">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7706837">,</span>&nbsp;<span class="op" id="7706839">-</span><span class="num" id="7706840">1</span><span class="op" id="7706841">}</span><span class="op" id="7706842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706845">{</span><span class="string" id="7706846">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7706882">,</span>&nbsp;<span class="string" id="7706884">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="7706921">,</span>&nbsp;<span class="num" id="7706923">0</span><span class="op" id="7706924">}</span><span class="op" id="7706925">,</span><br>
<span class="lineno"></span><span class="op" id="7706927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7706930">func</span>&nbsp;<span class="ident" id="7706935">TestRatCmp</span><span class="op" id="7706945">(</span><span class="ident" id="7706946">t</span>&nbsp;<span class="op" id="7706948">*</span><span class="ident" id="7706949">testing</span><span class="op" id="7706956">.</span><span class="ident" id="7706957">T</span><span class="op" id="7706958">)</span>&nbsp;<span class="op" id="7706960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706963">for</span>&nbsp;<span class="ident" id="7706967">i</span><span class="op" id="7706968">,</span>&nbsp;<span class="ident" id="7706970">test</span>&nbsp;<span class="op" id="7706975">:=</span>&nbsp;<span class="keyword" id="7706978">range</span>&nbsp;<span class="ident" id="7706984">ratCmpTests</span>&nbsp;<span class="op" id="7706996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707000">x</span><span class="op" id="7707001">,</span>&nbsp;<span class="ident" id="7707003">_</span>&nbsp;<span class="op" id="7707005">:=</span>&nbsp;<span class="builtinfunc" id="7707008">new</span><span class="op" id="7707011">(</span><span class="ident" id="7707012">Rat</span><span class="op" id="7707015">)</span><span class="op" id="7707016">.</span><span class="ident" id="7707017">SetString</span><span class="op" id="7707026">(</span><span class="ident" id="7707027">test</span><span class="op" id="7707031">.</span><span class="ident" id="7707032">rat1</span><span class="op" id="7707036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707040">y</span><span class="op" id="7707041">,</span>&nbsp;<span class="ident" id="7707043">_</span>&nbsp;<span class="op" id="7707045">:=</span>&nbsp;<span class="builtinfunc" id="7707048">new</span><span class="op" id="7707051">(</span><span class="ident" id="7707052">Rat</span><span class="op" id="7707055">)</span><span class="op" id="7707056">.</span><span class="ident" id="7707057">SetString</span><span class="op" id="7707066">(</span><span class="ident" id="7707067">test</span><span class="op" id="7707071">.</span><span class="ident" id="7707072">rat2</span><span class="op" id="7707076">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707081">out</span>&nbsp;<span class="op" id="7707085">:=</span>&nbsp;<span class="ident" id="7707088">x</span><span class="op" id="7707089">.</span><span class="ident" id="7707090">Cmp</span><span class="op" id="7707093">(</span><span class="ident" id="7707094">y</span><span class="op" id="7707095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707099">if</span>&nbsp;<span class="ident" id="7707102">out</span>&nbsp;<span class="op" id="7707106">!=</span>&nbsp;<span class="ident" id="7707109">test</span><span class="op" id="7707113">.</span><span class="ident" id="7707114">out</span>&nbsp;<span class="op" id="7707118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707123">t</span><span class="op" id="7707124">.</span><span class="ident" id="7707125">Errorf</span><span class="op" id="7707131">(</span><span class="string" id="7707132">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7707159">,</span>&nbsp;<span class="ident" id="7707161">i</span><span class="op" id="7707162">,</span>&nbsp;<span class="ident" id="7707164">out</span><span class="op" id="7707167">,</span>&nbsp;<span class="ident" id="7707169">test</span><span class="op" id="7707173">.</span><span class="ident" id="7707174">out</span><span class="op" id="7707177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707184">}</span><br>
<span class="lineno">205</span><span class="op" id="7707186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7707189">func</span>&nbsp;<span class="ident" id="7707194">TestIsInt</span><span class="op" id="7707203">(</span><span class="ident" id="7707204">t</span>&nbsp;<span class="op" id="7707206">*</span><span class="ident" id="7707207">testing</span><span class="op" id="7707214">.</span><span class="ident" id="7707215">T</span><span class="op" id="7707216">)</span>&nbsp;<span class="op" id="7707218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707221">one</span>&nbsp;<span class="op" id="7707225">:=</span>&nbsp;<span class="ident" id="7707228">NewInt</span><span class="op" id="7707234">(</span><span class="num" id="7707235">1</span><span class="op" id="7707236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707239">for</span>&nbsp;<span class="ident" id="7707243">_</span><span class="op" id="7707244">,</span>&nbsp;<span class="ident" id="7707246">a</span>&nbsp;<span class="op" id="7707248">:=</span>&nbsp;<span class="keyword" id="7707251">range</span>&nbsp;<span class="ident" id="7707257">setStringTests</span>&nbsp;<span class="op" id="7707272">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707276">x</span><span class="op" id="7707277">,</span>&nbsp;<span class="ident" id="7707279">ok</span>&nbsp;<span class="op" id="7707282">:=</span>&nbsp;<span class="builtinfunc" id="7707285">new</span><span class="op" id="7707288">(</span><span class="ident" id="7707289">Rat</span><span class="op" id="7707292">)</span><span class="op" id="7707293">.</span><span class="ident" id="7707294">SetString</span><span class="op" id="7707303">(</span><span class="ident" id="7707304">a</span><span class="op" id="7707305">.</span><span class="ident" id="7707306">in</span><span class="op" id="7707308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707312">if</span>&nbsp;<span class="op" id="7707315">!</span><span class="ident" id="7707316">ok</span>&nbsp;<span class="op" id="7707319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707324">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707339">i</span>&nbsp;<span class="op" id="7707341">:=</span>&nbsp;<span class="ident" id="7707344">x</span><span class="op" id="7707345">.</span><span class="ident" id="7707346">IsInt</span><span class="op" id="7707351">(</span><span class="op" id="7707352">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707356">e</span>&nbsp;<span class="op" id="7707358">:=</span>&nbsp;<span class="ident" id="7707361">x</span><span class="op" id="7707362">.</span><span class="ident" id="7707363">Denom</span><span class="op" id="7707368">(</span><span class="op" id="7707369">)</span><span class="op" id="7707370">.</span><span class="ident" id="7707371">Cmp</span><span class="op" id="7707374">(</span><span class="ident" id="7707375">one</span><span class="op" id="7707378">)</span>&nbsp;<span class="op" id="7707380">==</span>&nbsp;<span class="num" id="7707383">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707387">if</span>&nbsp;<span class="ident" id="7707390">i</span>&nbsp;<span class="op" id="7707392">!=</span>&nbsp;<span class="ident" id="7707395">e</span>&nbsp;<span class="op" id="7707397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707402">t</span><span class="op" id="7707403">.</span><span class="ident" id="7707404">Errorf</span><span class="op" id="7707410">(</span><span class="string" id="7707411">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7707441">,</span>&nbsp;<span class="ident" id="7707443">x</span><span class="op" id="7707444">,</span>&nbsp;<span class="ident" id="7707446">i</span><span class="op" id="7707447">,</span>&nbsp;<span class="ident" id="7707449">e</span><span class="op" id="7707450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707457">}</span><br>
<span class="lineno">220</span><span class="op" id="7707459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7707462">func</span>&nbsp;<span class="ident" id="7707467">TestRatAbs</span><span class="op" id="7707477">(</span><span class="ident" id="7707478">t</span>&nbsp;<span class="op" id="7707480">*</span><span class="ident" id="7707481">testing</span><span class="op" id="7707488">.</span><span class="ident" id="7707489">T</span><span class="op" id="7707490">)</span>&nbsp;<span class="op" id="7707492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707495">zero</span>&nbsp;<span class="op" id="7707500">:=</span>&nbsp;<span class="builtinfunc" id="7707503">new</span><span class="op" id="7707506">(</span><span class="ident" id="7707507">Rat</span><span class="op" id="7707510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707513">for</span>&nbsp;<span class="ident" id="7707517">_</span><span class="op" id="7707518">,</span>&nbsp;<span class="ident" id="7707520">a</span>&nbsp;<span class="op" id="7707522">:=</span>&nbsp;<span class="keyword" id="7707525">range</span>&nbsp;<span class="ident" id="7707531">setStringTests</span>&nbsp;<span class="op" id="7707546">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707550">x</span><span class="op" id="7707551">,</span>&nbsp;<span class="ident" id="7707553">ok</span>&nbsp;<span class="op" id="7707556">:=</span>&nbsp;<span class="builtinfunc" id="7707559">new</span><span class="op" id="7707562">(</span><span class="ident" id="7707563">Rat</span><span class="op" id="7707566">)</span><span class="op" id="7707567">.</span><span class="ident" id="7707568">SetString</span><span class="op" id="7707577">(</span><span class="ident" id="7707578">a</span><span class="op" id="7707579">.</span><span class="ident" id="7707580">in</span><span class="op" id="7707582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707586">if</span>&nbsp;<span class="op" id="7707589">!</span><span class="ident" id="7707590">ok</span>&nbsp;<span class="op" id="7707593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707598">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707613">e</span>&nbsp;<span class="op" id="7707615">:=</span>&nbsp;<span class="builtinfunc" id="7707618">new</span><span class="op" id="7707621">(</span><span class="ident" id="7707622">Rat</span><span class="op" id="7707625">)</span><span class="op" id="7707626">.</span><span class="ident" id="7707627">Set</span><span class="op" id="7707630">(</span><span class="ident" id="7707631">x</span><span class="op" id="7707632">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707636">if</span>&nbsp;<span class="ident" id="7707639">e</span><span class="op" id="7707640">.</span><span class="ident" id="7707641">Cmp</span><span class="op" id="7707644">(</span><span class="ident" id="7707645">zero</span><span class="op" id="7707649">)</span>&nbsp;<span class="op" id="7707651">&lt;</span>&nbsp;<span class="num" id="7707653">0</span>&nbsp;<span class="op" id="7707655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707660">e</span><span class="op" id="7707661">.</span><span class="ident" id="7707662">Sub</span><span class="op" id="7707665">(</span><span class="ident" id="7707666">zero</span><span class="op" id="7707670">,</span>&nbsp;<span class="ident" id="7707672">e</span><span class="op" id="7707673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707681">z</span>&nbsp;<span class="op" id="7707683">:=</span>&nbsp;<span class="builtinfunc" id="7707686">new</span><span class="op" id="7707689">(</span><span class="ident" id="7707690">Rat</span><span class="op" id="7707693">)</span><span class="op" id="7707694">.</span><span class="ident" id="7707695">Abs</span><span class="op" id="7707698">(</span><span class="ident" id="7707699">x</span><span class="op" id="7707700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707704">if</span>&nbsp;<span class="ident" id="7707707">z</span><span class="op" id="7707708">.</span><span class="ident" id="7707709">Cmp</span><span class="op" id="7707712">(</span><span class="ident" id="7707713">e</span><span class="op" id="7707714">)</span>&nbsp;<span class="op" id="7707716">!=</span>&nbsp;<span class="num" id="7707719">0</span>&nbsp;<span class="op" id="7707721">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707726">t</span><span class="op" id="7707727">.</span><span class="ident" id="7707728">Errorf</span><span class="op" id="7707734">(</span><span class="string" id="7707735">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7707762">,</span>&nbsp;<span class="ident" id="7707764">x</span><span class="op" id="7707765">,</span>&nbsp;<span class="ident" id="7707767">z</span><span class="op" id="7707768">,</span>&nbsp;<span class="ident" id="7707770">e</span><span class="op" id="7707771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707778">}</span><br>
<span class="lineno"></span><span class="op" id="7707780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7707783">func</span>&nbsp;<span class="ident" id="7707788">TestRatNeg</span><span class="op" id="7707798">(</span><span class="ident" id="7707799">t</span>&nbsp;<span class="op" id="7707801">*</span><span class="ident" id="7707802">testing</span><span class="op" id="7707809">.</span><span class="ident" id="7707810">T</span><span class="op" id="7707811">)</span>&nbsp;<span class="op" id="7707813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707816">zero</span>&nbsp;<span class="op" id="7707821">:=</span>&nbsp;<span class="builtinfunc" id="7707824">new</span><span class="op" id="7707827">(</span><span class="ident" id="7707828">Rat</span><span class="op" id="7707831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707834">for</span>&nbsp;<span class="ident" id="7707838">_</span><span class="op" id="7707839">,</span>&nbsp;<span class="ident" id="7707841">a</span>&nbsp;<span class="op" id="7707843">:=</span>&nbsp;<span class="keyword" id="7707846">range</span>&nbsp;<span class="ident" id="7707852">setStringTests</span>&nbsp;<span class="op" id="7707867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707871">x</span><span class="op" id="7707872">,</span>&nbsp;<span class="ident" id="7707874">ok</span>&nbsp;<span class="op" id="7707877">:=</span>&nbsp;<span class="builtinfunc" id="7707880">new</span><span class="op" id="7707883">(</span><span class="ident" id="7707884">Rat</span><span class="op" id="7707887">)</span><span class="op" id="7707888">.</span><span class="ident" id="7707889">SetString</span><span class="op" id="7707898">(</span><span class="ident" id="7707899">a</span><span class="op" id="7707900">.</span><span class="ident" id="7707901">in</span><span class="op" id="7707903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707907">if</span>&nbsp;<span class="op" id="7707910">!</span><span class="ident" id="7707911">ok</span>&nbsp;<span class="op" id="7707914">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707919">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707934">e</span>&nbsp;<span class="op" id="7707936">:=</span>&nbsp;<span class="builtinfunc" id="7707939">new</span><span class="op" id="7707942">(</span><span class="ident" id="7707943">Rat</span><span class="op" id="7707946">)</span><span class="op" id="7707947">.</span><span class="ident" id="7707948">Sub</span><span class="op" id="7707951">(</span><span class="ident" id="7707952">zero</span><span class="op" id="7707956">,</span>&nbsp;<span class="ident" id="7707958">x</span><span class="op" id="7707959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707963">z</span>&nbsp;<span class="op" id="7707965">:=</span>&nbsp;<span class="builtinfunc" id="7707968">new</span><span class="op" id="7707971">(</span><span class="ident" id="7707972">Rat</span><span class="op" id="7707975">)</span><span class="op" id="7707976">.</span><span class="ident" id="7707977">Neg</span><span class="op" id="7707980">(</span><span class="ident" id="7707981">x</span><span class="op" id="7707982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707986">if</span>&nbsp;<span class="ident" id="7707989">z</span><span class="op" id="7707990">.</span><span class="ident" id="7707991">Cmp</span><span class="op" id="7707994">(</span><span class="ident" id="7707995">e</span><span class="op" id="7707996">)</span>&nbsp;<span class="op" id="7707998">!=</span>&nbsp;<span class="num" id="7708001">0</span>&nbsp;<span class="op" id="7708003">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708008">t</span><span class="op" id="7708009">.</span><span class="ident" id="7708010">Errorf</span><span class="op" id="7708016">(</span><span class="string" id="7708017">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7708044">,</span>&nbsp;<span class="ident" id="7708046">x</span><span class="op" id="7708047">,</span>&nbsp;<span class="ident" id="7708049">z</span><span class="op" id="7708050">,</span>&nbsp;<span class="ident" id="7708052">e</span><span class="op" id="7708053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708060">}</span><br>
<span class="lineno"></span><span class="op" id="7708062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7708065">func</span>&nbsp;<span class="ident" id="7708070">TestRatInv</span><span class="op" id="7708080">(</span><span class="ident" id="7708081">t</span>&nbsp;<span class="op" id="7708083">*</span><span class="ident" id="7708084">testing</span><span class="op" id="7708091">.</span><span class="ident" id="7708092">T</span><span class="op" id="7708093">)</span>&nbsp;<span class="op" id="7708095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708098">zero</span>&nbsp;<span class="op" id="7708103">:=</span>&nbsp;<span class="builtinfunc" id="7708106">new</span><span class="op" id="7708109">(</span><span class="ident" id="7708110">Rat</span><span class="op" id="7708113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708116">for</span>&nbsp;<span class="ident" id="7708120">_</span><span class="op" id="7708121">,</span>&nbsp;<span class="ident" id="7708123">a</span>&nbsp;<span class="op" id="7708125">:=</span>&nbsp;<span class="keyword" id="7708128">range</span>&nbsp;<span class="ident" id="7708134">setStringTests</span>&nbsp;<span class="op" id="7708149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708153">x</span><span class="op" id="7708154">,</span>&nbsp;<span class="ident" id="7708156">ok</span>&nbsp;<span class="op" id="7708159">:=</span>&nbsp;<span class="builtinfunc" id="7708162">new</span><span class="op" id="7708165">(</span><span class="ident" id="7708166">Rat</span><span class="op" id="7708169">)</span><span class="op" id="7708170">.</span><span class="ident" id="7708171">SetString</span><span class="op" id="7708180">(</span><span class="ident" id="7708181">a</span><span class="op" id="7708182">.</span><span class="ident" id="7708183">in</span><span class="op" id="7708185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708189">if</span>&nbsp;<span class="op" id="7708192">!</span><span class="ident" id="7708193">ok</span>&nbsp;<span class="op" id="7708196">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708201">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708216">if</span>&nbsp;<span class="ident" id="7708219">x</span><span class="op" id="7708220">.</span><span class="ident" id="7708221">Cmp</span><span class="op" id="7708224">(</span><span class="ident" id="7708225">zero</span><span class="op" id="7708229">)</span>&nbsp;<span class="op" id="7708231">==</span>&nbsp;<span class="num" id="7708234">0</span>&nbsp;<span class="op" id="7708236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708241">continue</span>&nbsp;<span class="comment" id="7708250">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708278">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708282">e</span>&nbsp;<span class="op" id="7708284">:=</span>&nbsp;<span class="builtinfunc" id="7708287">new</span><span class="op" id="7708290">(</span><span class="ident" id="7708291">Rat</span><span class="op" id="7708294">)</span><span class="op" id="7708295">.</span><span class="ident" id="7708296">SetFrac</span><span class="op" id="7708303">(</span><span class="ident" id="7708304">x</span><span class="op" id="7708305">.</span><span class="ident" id="7708306">Denom</span><span class="op" id="7708311">(</span><span class="op" id="7708312">)</span><span class="op" id="7708313">,</span>&nbsp;<span class="ident" id="7708315">x</span><span class="op" id="7708316">.</span><span class="ident" id="7708317">Num</span><span class="op" id="7708320">(</span><span class="op" id="7708321">)</span><span class="op" id="7708322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708326">z</span>&nbsp;<span class="op" id="7708328">:=</span>&nbsp;<span class="builtinfunc" id="7708331">new</span><span class="op" id="7708334">(</span><span class="ident" id="7708335">Rat</span><span class="op" id="7708338">)</span><span class="op" id="7708339">.</span><span class="ident" id="7708340">Inv</span><span class="op" id="7708343">(</span><span class="ident" id="7708344">x</span><span class="op" id="7708345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708349">if</span>&nbsp;<span class="ident" id="7708352">z</span><span class="op" id="7708353">.</span><span class="ident" id="7708354">Cmp</span><span class="op" id="7708357">(</span><span class="ident" id="7708358">e</span><span class="op" id="7708359">)</span>&nbsp;<span class="op" id="7708361">!=</span>&nbsp;<span class="num" id="7708364">0</span>&nbsp;<span class="op" id="7708366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708371">t</span><span class="op" id="7708372">.</span><span class="ident" id="7708373">Errorf</span><span class="op" id="7708379">(</span><span class="string" id="7708380">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7708407">,</span>&nbsp;<span class="ident" id="7708409">x</span><span class="op" id="7708410">,</span>&nbsp;<span class="ident" id="7708412">z</span><span class="op" id="7708413">,</span>&nbsp;<span class="ident" id="7708415">e</span><span class="op" id="7708416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708420">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708423">}</span><br>
<span class="lineno"></span><span class="op" id="7708425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708428">type</span>&nbsp;<span class="ident" id="7708433">ratBinFun</span>&nbsp;<span class="keyword" id="7708443">func</span><span class="op" id="7708447">(</span><span class="ident" id="7708448">z</span><span class="op" id="7708449">,</span>&nbsp;<span class="ident" id="7708451">x</span><span class="op" id="7708452">,</span>&nbsp;<span class="ident" id="7708454">y</span>&nbsp;<span class="op" id="7708456">*</span><span class="ident" id="7708457">Rat</span><span class="op" id="7708460">)</span>&nbsp;<span class="op" id="7708462">*</span><span class="ident" id="7708463">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="7708467">type</span>&nbsp;<span class="ident" id="7708472">ratBinArg</span>&nbsp;<span class="keyword" id="7708482">struct</span>&nbsp;<span class="op" id="7708489">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708492">x</span><span class="op" id="7708493">,</span>&nbsp;<span class="ident" id="7708495">y</span><span class="op" id="7708496">,</span>&nbsp;<span class="ident" id="7708498">z</span>&nbsp;<span class="builtintype" id="7708500">string</span><br>
<span class="lineno"></span><span class="op" id="7708507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708510">func</span>&nbsp;<span class="ident" id="7708515">testRatBin</span><span class="op" id="7708525">(</span><span class="ident" id="7708526">t</span>&nbsp;<span class="op" id="7708528">*</span><span class="ident" id="7708529">testing</span><span class="op" id="7708536">.</span><span class="ident" id="7708537">T</span><span class="op" id="7708538">,</span>&nbsp;<span class="ident" id="7708540">i</span>&nbsp;<span class="builtintype" id="7708542">int</span><span class="op" id="7708545">,</span>&nbsp;<span class="ident" id="7708547">name</span>&nbsp;<span class="builtintype" id="7708552">string</span><span class="op" id="7708558">,</span>&nbsp;<span class="ident" id="7708560">f</span>&nbsp;<span class="ident" id="7708562">ratBinFun</span><span class="op" id="7708571">,</span>&nbsp;<span class="ident" id="7708573">a</span>&nbsp;<span class="ident" id="7708575">ratBinArg</span><span class="op" id="7708584">)</span>&nbsp;<span class="op" id="7708586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708589">x</span><span class="op" id="7708590">,</span>&nbsp;<span class="ident" id="7708592">_</span>&nbsp;<span class="op" id="7708594">:=</span>&nbsp;<span class="builtinfunc" id="7708597">new</span><span class="op" id="7708600">(</span><span class="ident" id="7708601">Rat</span><span class="op" id="7708604">)</span><span class="op" id="7708605">.</span><span class="ident" id="7708606">SetString</span><span class="op" id="7708615">(</span><span class="ident" id="7708616">a</span><span class="op" id="7708617">.</span><span class="ident" id="7708618">x</span><span class="op" id="7708619">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708622">y</span><span class="op" id="7708623">,</span>&nbsp;<span class="ident" id="7708625">_</span>&nbsp;<span class="op" id="7708627">:=</span>&nbsp;<span class="builtinfunc" id="7708630">new</span><span class="op" id="7708633">(</span><span class="ident" id="7708634">Rat</span><span class="op" id="7708637">)</span><span class="op" id="7708638">.</span><span class="ident" id="7708639">SetString</span><span class="op" id="7708648">(</span><span class="ident" id="7708649">a</span><span class="op" id="7708650">.</span><span class="ident" id="7708651">y</span><span class="op" id="7708652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708655">z</span><span class="op" id="7708656">,</span>&nbsp;<span class="ident" id="7708658">_</span>&nbsp;<span class="op" id="7708660">:=</span>&nbsp;<span class="builtinfunc" id="7708663">new</span><span class="op" id="7708666">(</span><span class="ident" id="7708667">Rat</span><span class="op" id="7708670">)</span><span class="op" id="7708671">.</span><span class="ident" id="7708672">SetString</span><span class="op" id="7708681">(</span><span class="ident" id="7708682">a</span><span class="op" id="7708683">.</span><span class="ident" id="7708684">z</span><span class="op" id="7708685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708688">out</span>&nbsp;<span class="op" id="7708692">:=</span>&nbsp;<span class="ident" id="7708695">f</span><span class="op" id="7708696">(</span><span class="builtinfunc" id="7708697">new</span><span class="op" id="7708700">(</span><span class="ident" id="7708701">Rat</span><span class="op" id="7708704">)</span><span class="op" id="7708705">,</span>&nbsp;<span class="ident" id="7708707">x</span><span class="op" id="7708708">,</span>&nbsp;<span class="ident" id="7708710">y</span><span class="op" id="7708711">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708715">if</span>&nbsp;<span class="ident" id="7708718">out</span><span class="op" id="7708721">.</span><span class="ident" id="7708722">Cmp</span><span class="op" id="7708725">(</span><span class="ident" id="7708726">z</span><span class="op" id="7708727">)</span>&nbsp;<span class="op" id="7708729">!=</span>&nbsp;<span class="num" id="7708732">0</span>&nbsp;<span class="op" id="7708734">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708738">t</span><span class="op" id="7708739">.</span><span class="ident" id="7708740">Errorf</span><span class="op" id="7708746">(</span><span class="string" id="7708747">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7708770">,</span>&nbsp;<span class="ident" id="7708772">name</span><span class="op" id="7708776">,</span>&nbsp;<span class="ident" id="7708778">i</span><span class="op" id="7708779">,</span>&nbsp;<span class="ident" id="7708781">out</span><span class="op" id="7708784">,</span>&nbsp;<span class="ident" id="7708786">z</span><span class="op" id="7708787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708790">}</span><br>
<span class="lineno"></span><span class="op" id="7708792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708795">var</span>&nbsp;<span class="ident" id="7708799">ratBinTests</span>&nbsp;<span class="op" id="7708811">=</span>&nbsp;<span class="op" id="7708813">[</span><span class="op" id="7708814">]</span><span class="keyword" id="7708815">struct</span>&nbsp;<span class="op" id="7708822">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708825">x</span><span class="op" id="7708826">,</span>&nbsp;<span class="ident" id="7708828">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7708835">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708843">sum</span><span class="op" id="7708846">,</span>&nbsp;<span class="ident" id="7708848">prod</span>&nbsp;<span class="builtintype" id="7708853">string</span><br>
<span class="lineno"></span><span class="op" id="7708860">}</span><span class="op" id="7708861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708864">{</span><span class="string" id="7708865">&#34;0&#34;</span><span class="op" id="7708868">,</span>&nbsp;<span class="string" id="7708870">&#34;0&#34;</span><span class="op" id="7708873">,</span>&nbsp;<span class="string" id="7708875">&#34;0&#34;</span><span class="op" id="7708878">,</span>&nbsp;<span class="string" id="7708880">&#34;0&#34;</span><span class="op" id="7708883">}</span><span class="op" id="7708884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708887">{</span><span class="string" id="7708888">&#34;0&#34;</span><span class="op" id="7708891">,</span>&nbsp;<span class="string" id="7708893">&#34;1&#34;</span><span class="op" id="7708896">,</span>&nbsp;<span class="string" id="7708898">&#34;1&#34;</span><span class="op" id="7708901">,</span>&nbsp;<span class="string" id="7708903">&#34;0&#34;</span><span class="op" id="7708906">}</span><span class="op" id="7708907">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708910">{</span><span class="string" id="7708911">&#34;-1&#34;</span><span class="op" id="7708915">,</span>&nbsp;<span class="string" id="7708917">&#34;0&#34;</span><span class="op" id="7708920">,</span>&nbsp;<span class="string" id="7708922">&#34;-1&#34;</span><span class="op" id="7708926">,</span>&nbsp;<span class="string" id="7708928">&#34;0&#34;</span><span class="op" id="7708931">}</span><span class="op" id="7708932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708935">{</span><span class="string" id="7708936">&#34;-1&#34;</span><span class="op" id="7708940">,</span>&nbsp;<span class="string" id="7708942">&#34;1&#34;</span><span class="op" id="7708945">,</span>&nbsp;<span class="string" id="7708947">&#34;0&#34;</span><span class="op" id="7708950">,</span>&nbsp;<span class="string" id="7708952">&#34;-1&#34;</span><span class="op" id="7708956">}</span><span class="op" id="7708957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708960">{</span><span class="string" id="7708961">&#34;1&#34;</span><span class="op" id="7708964">,</span>&nbsp;<span class="string" id="7708966">&#34;1&#34;</span><span class="op" id="7708969">,</span>&nbsp;<span class="string" id="7708971">&#34;2&#34;</span><span class="op" id="7708974">,</span>&nbsp;<span class="string" id="7708976">&#34;1&#34;</span><span class="op" id="7708979">}</span><span class="op" id="7708980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708983">{</span><span class="string" id="7708984">&#34;1/2&#34;</span><span class="op" id="7708989">,</span>&nbsp;<span class="string" id="7708991">&#34;1/2&#34;</span><span class="op" id="7708996">,</span>&nbsp;<span class="string" id="7708998">&#34;1&#34;</span><span class="op" id="7709001">,</span>&nbsp;<span class="string" id="7709003">&#34;1/4&#34;</span><span class="op" id="7709008">}</span><span class="op" id="7709009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709012">{</span><span class="string" id="7709013">&#34;1/4&#34;</span><span class="op" id="7709018">,</span>&nbsp;<span class="string" id="7709020">&#34;1/3&#34;</span><span class="op" id="7709025">,</span>&nbsp;<span class="string" id="7709027">&#34;7/12&#34;</span><span class="op" id="7709033">,</span>&nbsp;<span class="string" id="7709035">&#34;1/12&#34;</span><span class="op" id="7709041">}</span><span class="op" id="7709042">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709045">{</span><span class="string" id="7709046">&#34;2/5&#34;</span><span class="op" id="7709051">,</span>&nbsp;<span class="string" id="7709053">&#34;-14/3&#34;</span><span class="op" id="7709060">,</span>&nbsp;<span class="string" id="7709062">&#34;-64/15&#34;</span><span class="op" id="7709070">,</span>&nbsp;<span class="string" id="7709072">&#34;-28/15&#34;</span><span class="op" id="7709080">}</span><span class="op" id="7709081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709084">{</span><span class="string" id="7709085">&#34;4707/49292519774798173060&#34;</span><span class="op" id="7709112">,</span>&nbsp;<span class="string" id="7709114">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="7709142">,</span>&nbsp;<span class="string" id="7709144">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="7709210">,</span>&nbsp;<span class="string" id="7709212">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="7709262">}</span><span class="op" id="7709263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709266">{</span><span class="string" id="7709267">&#34;-61204110018146728334/3&#34;</span><span class="op" id="7709292">,</span>&nbsp;<span class="string" id="7709294">&#34;-31052192278051565633/2&#34;</span><span class="op" id="7709319">,</span>&nbsp;<span class="string" id="7709321">&#34;-215564796870448153567/6&#34;</span><span class="op" id="7709347">,</span>&nbsp;<span class="string" id="7709349">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="7709392">}</span><span class="op" id="7709393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709396">{</span><span class="string" id="7709397">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="7709459">,</span>&nbsp;<span class="string" id="7709461">&#34;-18/31750379913563777419&#34;</span><span class="op" id="7709487">,</span>&nbsp;<span class="string" id="7709489">&#34;-27/133467566250814981&#34;</span><span class="op" id="7709513">,</span>&nbsp;<span class="string" id="7709515">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="7709598">}</span><span class="op" id="7709599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709602">{</span><span class="string" id="7709603">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="7709662">,</span>&nbsp;<span class="string" id="7709664">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="7709697">,</span>&nbsp;<span class="string" id="7709699">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="7709733">,</span>&nbsp;<span class="string" id="7709735">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="7709822">}</span><span class="op" id="7709823">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709826">{</span><span class="string" id="7709827">&#34;-3/26206484091896184128&#34;</span><span class="op" id="7709852">,</span>&nbsp;<span class="string" id="7709854">&#34;5/2848423294177090248&#34;</span><span class="op" id="7709877">,</span>&nbsp;<span class="string" id="7709879">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="7709939">,</span>&nbsp;<span class="string" id="7709941">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="7709984">}</span><span class="op" id="7709985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709988">{</span><span class="string" id="7709989">&#34;26946729/330400702820&#34;</span><span class="op" id="7710012">,</span>&nbsp;<span class="string" id="7710014">&#34;41563965/225583428284&#34;</span><span class="op" id="7710037">,</span>&nbsp;<span class="string" id="7710039">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="7710083">,</span>&nbsp;<span class="string" id="7710085">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="7710126">}</span><span class="op" id="7710127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710130">{</span><span class="string" id="7710131">&#34;-8259900599013409474/7&#34;</span><span class="op" id="7710155">,</span>&nbsp;<span class="string" id="7710157">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="7710201">,</span>&nbsp;<span class="string" id="7710203">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="7710267">,</span>&nbsp;<span class="string" id="7710269">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="7710332">}</span><span class="op" id="7710333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710336">{</span><span class="string" id="7710337">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="7710377">,</span>&nbsp;<span class="string" id="7710379">&#34;29/712593081308&#34;</span><span class="op" id="7710396">,</span>&nbsp;<span class="string" id="7710398">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="7710461">,</span>&nbsp;<span class="string" id="7710463">&#34;808/45524274987585732633&#34;</span><span class="op" id="7710489">}</span><span class="op" id="7710490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710493">{</span><span class="string" id="7710494">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="7710535">,</span>&nbsp;<span class="string" id="7710537">&#34;6269770/1992362624741777&#34;</span><span class="op" id="7710563">,</span>&nbsp;<span class="string" id="7710565">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="7710636">,</span>&nbsp;<span class="string" id="7710638">&#34;8967230/3296219033&#34;</span><span class="op" id="7710658">}</span><span class="op" id="7710659">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710662">{</span><span class="string" id="7710663">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="7710710">,</span>&nbsp;<span class="string" id="7710712">&#34;9381566963714/9633539&#34;</span><span class="op" id="7710735">,</span>&nbsp;<span class="string" id="7710737">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="7710806">,</span>&nbsp;<span class="string" id="7710808">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="7710835">}</span><span class="op" id="7710836">,</span><br>
<span class="lineno"></span><span class="op" id="7710838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7710841">func</span>&nbsp;<span class="ident" id="7710846">TestRatBin</span><span class="op" id="7710856">(</span><span class="ident" id="7710857">t</span>&nbsp;<span class="op" id="7710859">*</span><span class="ident" id="7710860">testing</span><span class="op" id="7710867">.</span><span class="ident" id="7710868">T</span><span class="op" id="7710869">)</span>&nbsp;<span class="op" id="7710871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710874">for</span>&nbsp;<span class="ident" id="7710878">i</span><span class="op" id="7710879">,</span>&nbsp;<span class="ident" id="7710881">test</span>&nbsp;<span class="op" id="7710886">:=</span>&nbsp;<span class="keyword" id="7710889">range</span>&nbsp;<span class="ident" id="7710895">ratBinTests</span>&nbsp;<span class="op" id="7710907">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710911">arg</span>&nbsp;<span class="op" id="7710915">:=</span>&nbsp;<span class="ident" id="7710918">ratBinArg</span><span class="op" id="7710927">{</span><span class="ident" id="7710928">test</span><span class="op" id="7710932">.</span><span class="ident" id="7710933">x</span><span class="op" id="7710934">,</span>&nbsp;<span class="ident" id="7710936">test</span><span class="op" id="7710940">.</span><span class="ident" id="7710941">y</span><span class="op" id="7710942">,</span>&nbsp;<span class="ident" id="7710944">test</span><span class="op" id="7710948">.</span><span class="ident" id="7710949">sum</span><span class="op" id="7710952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710956">testRatBin</span><span class="op" id="7710966">(</span><span class="ident" id="7710967">t</span><span class="op" id="7710968">,</span>&nbsp;<span class="ident" id="7710970">i</span><span class="op" id="7710971">,</span>&nbsp;<span class="string" id="7710973">&#34;Add&#34;</span><span class="op" id="7710978">,</span>&nbsp;<span class="op" id="7710980">(</span><span class="op" id="7710981">*</span><span class="ident" id="7710982">Rat</span><span class="op" id="7710985">)</span><span class="op" id="7710986">.</span><span class="ident" id="7710987">Add</span><span class="op" id="7710990">,</span>&nbsp;<span class="ident" id="7710992">arg</span><span class="op" id="7710995">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711000">arg</span>&nbsp;<span class="op" id="7711004">=</span>&nbsp;<span class="ident" id="7711006">ratBinArg</span><span class="op" id="7711015">{</span><span class="ident" id="7711016">test</span><span class="op" id="7711020">.</span><span class="ident" id="7711021">y</span><span class="op" id="7711022">,</span>&nbsp;<span class="ident" id="7711024">test</span><span class="op" id="7711028">.</span><span class="ident" id="7711029">x</span><span class="op" id="7711030">,</span>&nbsp;<span class="ident" id="7711032">test</span><span class="op" id="7711036">.</span><span class="ident" id="7711037">sum</span><span class="op" id="7711040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711044">testRatBin</span><span class="op" id="7711054">(</span><span class="ident" id="7711055">t</span><span class="op" id="7711056">,</span>&nbsp;<span class="ident" id="7711058">i</span><span class="op" id="7711059">,</span>&nbsp;<span class="string" id="7711061">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="7711076">,</span>&nbsp;<span class="op" id="7711078">(</span><span class="op" id="7711079">*</span><span class="ident" id="7711080">Rat</span><span class="op" id="7711083">)</span><span class="op" id="7711084">.</span><span class="ident" id="7711085">Add</span><span class="op" id="7711088">,</span>&nbsp;<span class="ident" id="7711090">arg</span><span class="op" id="7711093">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711098">arg</span>&nbsp;<span class="op" id="7711102">=</span>&nbsp;<span class="ident" id="7711104">ratBinArg</span><span class="op" id="7711113">{</span><span class="ident" id="7711114">test</span><span class="op" id="7711118">.</span><span class="ident" id="7711119">sum</span><span class="op" id="7711122">,</span>&nbsp;<span class="ident" id="7711124">test</span><span class="op" id="7711128">.</span><span class="ident" id="7711129">x</span><span class="op" id="7711130">,</span>&nbsp;<span class="ident" id="7711132">test</span><span class="op" id="7711136">.</span><span class="ident" id="7711137">y</span><span class="op" id="7711138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711142">testRatBin</span><span class="op" id="7711152">(</span><span class="ident" id="7711153">t</span><span class="op" id="7711154">,</span>&nbsp;<span class="ident" id="7711156">i</span><span class="op" id="7711157">,</span>&nbsp;<span class="string" id="7711159">&#34;Sub&#34;</span><span class="op" id="7711164">,</span>&nbsp;<span class="op" id="7711166">(</span><span class="op" id="7711167">*</span><span class="ident" id="7711168">Rat</span><span class="op" id="7711171">)</span><span class="op" id="7711172">.</span><span class="ident" id="7711173">Sub</span><span class="op" id="7711176">,</span>&nbsp;<span class="ident" id="7711178">arg</span><span class="op" id="7711181">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711186">arg</span>&nbsp;<span class="op" id="7711190">=</span>&nbsp;<span class="ident" id="7711192">ratBinArg</span><span class="op" id="7711201">{</span><span class="ident" id="7711202">test</span><span class="op" id="7711206">.</span><span class="ident" id="7711207">sum</span><span class="op" id="7711210">,</span>&nbsp;<span class="ident" id="7711212">test</span><span class="op" id="7711216">.</span><span class="ident" id="7711217">y</span><span class="op" id="7711218">,</span>&nbsp;<span class="ident" id="7711220">test</span><span class="op" id="7711224">.</span><span class="ident" id="7711225">x</span><span class="op" id="7711226">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711230">testRatBin</span><span class="op" id="7711240">(</span><span class="ident" id="7711241">t</span><span class="op" id="7711242">,</span>&nbsp;<span class="ident" id="7711244">i</span><span class="op" id="7711245">,</span>&nbsp;<span class="string" id="7711247">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="7711262">,</span>&nbsp;<span class="op" id="7711264">(</span><span class="op" id="7711265">*</span><span class="ident" id="7711266">Rat</span><span class="op" id="7711269">)</span><span class="op" id="7711270">.</span><span class="ident" id="7711271">Sub</span><span class="op" id="7711274">,</span>&nbsp;<span class="ident" id="7711276">arg</span><span class="op" id="7711279">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711284">arg</span>&nbsp;<span class="op" id="7711288">=</span>&nbsp;<span class="ident" id="7711290">ratBinArg</span><span class="op" id="7711299">{</span><span class="ident" id="7711300">test</span><span class="op" id="7711304">.</span><span class="ident" id="7711305">x</span><span class="op" id="7711306">,</span>&nbsp;<span class="ident" id="7711308">test</span><span class="op" id="7711312">.</span><span class="ident" id="7711313">y</span><span class="op" id="7711314">,</span>&nbsp;<span class="ident" id="7711316">test</span><span class="op" id="7711320">.</span><span class="ident" id="7711321">prod</span><span class="op" id="7711325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711329">testRatBin</span><span class="op" id="7711339">(</span><span class="ident" id="7711340">t</span><span class="op" id="7711341">,</span>&nbsp;<span class="ident" id="7711343">i</span><span class="op" id="7711344">,</span>&nbsp;<span class="string" id="7711346">&#34;Mul&#34;</span><span class="op" id="7711351">,</span>&nbsp;<span class="op" id="7711353">(</span><span class="op" id="7711354">*</span><span class="ident" id="7711355">Rat</span><span class="op" id="7711358">)</span><span class="op" id="7711359">.</span><span class="ident" id="7711360">Mul</span><span class="op" id="7711363">,</span>&nbsp;<span class="ident" id="7711365">arg</span><span class="op" id="7711368">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711373">arg</span>&nbsp;<span class="op" id="7711377">=</span>&nbsp;<span class="ident" id="7711379">ratBinArg</span><span class="op" id="7711388">{</span><span class="ident" id="7711389">test</span><span class="op" id="7711393">.</span><span class="ident" id="7711394">y</span><span class="op" id="7711395">,</span>&nbsp;<span class="ident" id="7711397">test</span><span class="op" id="7711401">.</span><span class="ident" id="7711402">x</span><span class="op" id="7711403">,</span>&nbsp;<span class="ident" id="7711405">test</span><span class="op" id="7711409">.</span><span class="ident" id="7711410">prod</span><span class="op" id="7711414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711418">testRatBin</span><span class="op" id="7711428">(</span><span class="ident" id="7711429">t</span><span class="op" id="7711430">,</span>&nbsp;<span class="ident" id="7711432">i</span><span class="op" id="7711433">,</span>&nbsp;<span class="string" id="7711435">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="7711450">,</span>&nbsp;<span class="op" id="7711452">(</span><span class="op" id="7711453">*</span><span class="ident" id="7711454">Rat</span><span class="op" id="7711457">)</span><span class="op" id="7711458">.</span><span class="ident" id="7711459">Mul</span><span class="op" id="7711462">,</span>&nbsp;<span class="ident" id="7711464">arg</span><span class="op" id="7711467">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711472">if</span>&nbsp;<span class="ident" id="7711475">test</span><span class="op" id="7711479">.</span><span class="ident" id="7711480">x</span>&nbsp;<span class="op" id="7711482">!=</span>&nbsp;<span class="string" id="7711485">&#34;0&#34;</span>&nbsp;<span class="op" id="7711489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711494">arg</span>&nbsp;<span class="op" id="7711498">=</span>&nbsp;<span class="ident" id="7711500">ratBinArg</span><span class="op" id="7711509">{</span><span class="ident" id="7711510">test</span><span class="op" id="7711514">.</span><span class="ident" id="7711515">prod</span><span class="op" id="7711519">,</span>&nbsp;<span class="ident" id="7711521">test</span><span class="op" id="7711525">.</span><span class="ident" id="7711526">x</span><span class="op" id="7711527">,</span>&nbsp;<span class="ident" id="7711529">test</span><span class="op" id="7711533">.</span><span class="ident" id="7711534">y</span><span class="op" id="7711535">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711540">testRatBin</span><span class="op" id="7711550">(</span><span class="ident" id="7711551">t</span><span class="op" id="7711552">,</span>&nbsp;<span class="ident" id="7711554">i</span><span class="op" id="7711555">,</span>&nbsp;<span class="string" id="7711557">&#34;Quo&#34;</span><span class="op" id="7711562">,</span>&nbsp;<span class="op" id="7711564">(</span><span class="op" id="7711565">*</span><span class="ident" id="7711566">Rat</span><span class="op" id="7711569">)</span><span class="op" id="7711570">.</span><span class="ident" id="7711571">Quo</span><span class="op" id="7711574">,</span>&nbsp;<span class="ident" id="7711576">arg</span><span class="op" id="7711579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711588">if</span>&nbsp;<span class="ident" id="7711591">test</span><span class="op" id="7711595">.</span><span class="ident" id="7711596">y</span>&nbsp;<span class="op" id="7711598">!=</span>&nbsp;<span class="string" id="7711601">&#34;0&#34;</span>&nbsp;<span class="op" id="7711605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711610">arg</span>&nbsp;<span class="op" id="7711614">=</span>&nbsp;<span class="ident" id="7711616">ratBinArg</span><span class="op" id="7711625">{</span><span class="ident" id="7711626">test</span><span class="op" id="7711630">.</span><span class="ident" id="7711631">prod</span><span class="op" id="7711635">,</span>&nbsp;<span class="ident" id="7711637">test</span><span class="op" id="7711641">.</span><span class="ident" id="7711642">y</span><span class="op" id="7711643">,</span>&nbsp;<span class="ident" id="7711645">test</span><span class="op" id="7711649">.</span><span class="ident" id="7711650">x</span><span class="op" id="7711651">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711656">testRatBin</span><span class="op" id="7711666">(</span><span class="ident" id="7711667">t</span><span class="op" id="7711668">,</span>&nbsp;<span class="ident" id="7711670">i</span><span class="op" id="7711671">,</span>&nbsp;<span class="string" id="7711673">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="7711688">,</span>&nbsp;<span class="op" id="7711690">(</span><span class="op" id="7711691">*</span><span class="ident" id="7711692">Rat</span><span class="op" id="7711695">)</span><span class="op" id="7711696">.</span><span class="ident" id="7711697">Quo</span><span class="op" id="7711700">,</span>&nbsp;<span class="ident" id="7711702">arg</span><span class="op" id="7711705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711712">}</span><br>
<span class="lineno"></span><span class="op" id="7711714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7711717">func</span>&nbsp;<span class="ident" id="7711722">TestIssue820</span><span class="op" id="7711734">(</span><span class="ident" id="7711735">t</span>&nbsp;<span class="op" id="7711737">*</span><span class="ident" id="7711738">testing</span><span class="op" id="7711745">.</span><span class="ident" id="7711746">T</span><span class="op" id="7711747">)</span>&nbsp;<span class="op" id="7711749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711752">x</span>&nbsp;<span class="op" id="7711754">:=</span>&nbsp;<span class="ident" id="7711757">NewRat</span><span class="op" id="7711763">(</span><span class="num" id="7711764">3</span><span class="op" id="7711765">,</span>&nbsp;<span class="num" id="7711767">1</span><span class="op" id="7711768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711771">y</span>&nbsp;<span class="op" id="7711773">:=</span>&nbsp;<span class="ident" id="7711776">NewRat</span><span class="op" id="7711782">(</span><span class="num" id="7711783">2</span><span class="op" id="7711784">,</span>&nbsp;<span class="num" id="7711786">1</span><span class="op" id="7711787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711790">z</span>&nbsp;<span class="op" id="7711792">:=</span>&nbsp;<span class="ident" id="7711795">y</span><span class="op" id="7711796">.</span><span class="ident" id="7711797">Quo</span><span class="op" id="7711800">(</span><span class="ident" id="7711801">x</span><span class="op" id="7711802">,</span>&nbsp;<span class="ident" id="7711804">y</span><span class="op" id="7711805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711808">q</span>&nbsp;<span class="op" id="7711810">:=</span>&nbsp;<span class="ident" id="7711813">NewRat</span><span class="op" id="7711819">(</span><span class="num" id="7711820">3</span><span class="op" id="7711821">,</span>&nbsp;<span class="num" id="7711823">2</span><span class="op" id="7711824">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711827">if</span>&nbsp;<span class="ident" id="7711830">z</span><span class="op" id="7711831">.</span><span class="ident" id="7711832">Cmp</span><span class="op" id="7711835">(</span><span class="ident" id="7711836">q</span><span class="op" id="7711837">)</span>&nbsp;<span class="op" id="7711839">!=</span>&nbsp;<span class="num" id="7711842">0</span>&nbsp;<span class="op" id="7711844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711848">t</span><span class="op" id="7711849">.</span><span class="ident" id="7711850">Errorf</span><span class="op" id="7711856">(</span><span class="string" id="7711857">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7711873">,</span>&nbsp;<span class="ident" id="7711875">z</span><span class="op" id="7711876">,</span>&nbsp;<span class="ident" id="7711878">q</span><span class="op" id="7711879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711886">y</span>&nbsp;<span class="op" id="7711888">=</span>&nbsp;<span class="ident" id="7711890">NewRat</span><span class="op" id="7711896">(</span><span class="num" id="7711897">3</span><span class="op" id="7711898">,</span>&nbsp;<span class="num" id="7711900">1</span><span class="op" id="7711901">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711904">x</span>&nbsp;<span class="op" id="7711906">=</span>&nbsp;<span class="ident" id="7711908">NewRat</span><span class="op" id="7711914">(</span><span class="num" id="7711915">2</span><span class="op" id="7711916">,</span>&nbsp;<span class="num" id="7711918">1</span><span class="op" id="7711919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711922">z</span>&nbsp;<span class="op" id="7711924">=</span>&nbsp;<span class="ident" id="7711926">y</span><span class="op" id="7711927">.</span><span class="ident" id="7711928">Quo</span><span class="op" id="7711931">(</span><span class="ident" id="7711932">x</span><span class="op" id="7711933">,</span>&nbsp;<span class="ident" id="7711935">y</span><span class="op" id="7711936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711939">q</span>&nbsp;<span class="op" id="7711941">=</span>&nbsp;<span class="ident" id="7711943">NewRat</span><span class="op" id="7711949">(</span><span class="num" id="7711950">2</span><span class="op" id="7711951">,</span>&nbsp;<span class="num" id="7711953">3</span><span class="op" id="7711954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711957">if</span>&nbsp;<span class="ident" id="7711960">z</span><span class="op" id="7711961">.</span><span class="ident" id="7711962">Cmp</span><span class="op" id="7711965">(</span><span class="ident" id="7711966">q</span><span class="op" id="7711967">)</span>&nbsp;<span class="op" id="7711969">!=</span>&nbsp;<span class="num" id="7711972">0</span>&nbsp;<span class="op" id="7711974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711978">t</span><span class="op" id="7711979">.</span><span class="ident" id="7711980">Errorf</span><span class="op" id="7711986">(</span><span class="string" id="7711987">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7712003">,</span>&nbsp;<span class="ident" id="7712005">z</span><span class="op" id="7712006">,</span>&nbsp;<span class="ident" id="7712008">q</span><span class="op" id="7712009">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712016">x</span>&nbsp;<span class="op" id="7712018">=</span>&nbsp;<span class="ident" id="7712020">NewRat</span><span class="op" id="7712026">(</span><span class="num" id="7712027">3</span><span class="op" id="7712028">,</span>&nbsp;<span class="num" id="7712030">1</span><span class="op" id="7712031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712034">z</span>&nbsp;<span class="op" id="7712036">=</span>&nbsp;<span class="ident" id="7712038">x</span><span class="op" id="7712039">.</span><span class="ident" id="7712040">Quo</span><span class="op" id="7712043">(</span><span class="ident" id="7712044">x</span><span class="op" id="7712045">,</span>&nbsp;<span class="ident" id="7712047">x</span><span class="op" id="7712048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712051">q</span>&nbsp;<span class="op" id="7712053">=</span>&nbsp;<span class="ident" id="7712055">NewRat</span><span class="op" id="7712061">(</span><span class="num" id="7712062">3</span><span class="op" id="7712063">,</span>&nbsp;<span class="num" id="7712065">3</span><span class="op" id="7712066">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712069">if</span>&nbsp;<span class="ident" id="7712072">z</span><span class="op" id="7712073">.</span><span class="ident" id="7712074">Cmp</span><span class="op" id="7712077">(</span><span class="ident" id="7712078">q</span><span class="op" id="7712079">)</span>&nbsp;<span class="op" id="7712081">!=</span>&nbsp;<span class="num" id="7712084">0</span>&nbsp;<span class="op" id="7712086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712090">t</span><span class="op" id="7712091">.</span><span class="ident" id="7712092">Errorf</span><span class="op" id="7712098">(</span><span class="string" id="7712099">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7712115">,</span>&nbsp;<span class="ident" id="7712117">z</span><span class="op" id="7712118">,</span>&nbsp;<span class="ident" id="7712120">q</span><span class="op" id="7712121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712124">}</span><br>
<span class="lineno"></span><span class="op" id="7712126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="7712129">var</span>&nbsp;<span class="ident" id="7712133">setFrac64Tests</span>&nbsp;<span class="op" id="7712148">=</span>&nbsp;<span class="op" id="7712150">[</span><span class="op" id="7712151">]</span><span class="keyword" id="7712152">struct</span>&nbsp;<span class="op" id="7712159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712162">a</span><span class="op" id="7712163">,</span>&nbsp;<span class="ident" id="7712165">b</span>&nbsp;<span class="ident" id="7712167">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712174">out</span>&nbsp;&nbsp;<span class="builtintype" id="7712179">string</span><br>
<span class="lineno"></span><span class="op" id="7712186">}</span><span class="op" id="7712187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712190">{</span><span class="num" id="7712191">0</span><span class="op" id="7712192">,</span>&nbsp;<span class="num" id="7712194">1</span><span class="op" id="7712195">,</span>&nbsp;<span class="string" id="7712197">&#34;0&#34;</span><span class="op" id="7712200">}</span><span class="op" id="7712201">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712204">{</span><span class="num" id="7712205">0</span><span class="op" id="7712206">,</span>&nbsp;<span class="op" id="7712208">-</span><span class="num" id="7712209">1</span><span class="op" id="7712210">,</span>&nbsp;<span class="string" id="7712212">&#34;0&#34;</span><span class="op" id="7712215">}</span><span class="op" id="7712216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712219">{</span><span class="num" id="7712220">1</span><span class="op" id="7712221">,</span>&nbsp;<span class="num" id="7712223">1</span><span class="op" id="7712224">,</span>&nbsp;<span class="string" id="7712226">&#34;1&#34;</span><span class="op" id="7712229">}</span><span class="op" id="7712230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712233">{</span><span class="op" id="7712234">-</span><span class="num" id="7712235">1</span><span class="op" id="7712236">,</span>&nbsp;<span class="num" id="7712238">1</span><span class="op" id="7712239">,</span>&nbsp;<span class="string" id="7712241">&#34;-1&#34;</span><span class="op" id="7712245">}</span><span class="op" id="7712246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712249">{</span><span class="num" id="7712250">1</span><span class="op" id="7712251">,</span>&nbsp;<span class="op" id="7712253">-</span><span class="num" id="7712254">1</span><span class="op" id="7712255">,</span>&nbsp;<span class="string" id="7712257">&#34;-1&#34;</span><span class="op" id="7712261">}</span><span class="op" id="7712262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712265">{</span><span class="op" id="7712266">-</span><span class="num" id="7712267">1</span><span class="op" id="7712268">,</span>&nbsp;<span class="op" id="7712270">-</span><span class="num" id="7712271">1</span><span class="op" id="7712272">,</span>&nbsp;<span class="string" id="7712274">&#34;1&#34;</span><span class="op" id="7712277">}</span><span class="op" id="7712278">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712281">{</span><span class="op" id="7712282">-</span><span class="num" id="7712283">9223372036854775808</span><span class="op" id="7712302">,</span>&nbsp;<span class="op" id="7712304">-</span><span class="num" id="7712305">9223372036854775808</span><span class="op" id="7712324">,</span>&nbsp;<span class="string" id="7712326">&#34;1&#34;</span><span class="op" id="7712329">}</span><span class="op" id="7712330">,</span><br>
<span class="lineno"></span><span class="op" id="7712332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7712335">func</span>&nbsp;<span class="ident" id="7712340">TestRatSetFrac64Rat</span><span class="op" id="7712359">(</span><span class="ident" id="7712360">t</span>&nbsp;<span class="op" id="7712362">*</span><span class="ident" id="7712363">testing</span><span class="op" id="7712370">.</span><span class="ident" id="7712371">T</span><span class="op" id="7712372">)</span>&nbsp;<span class="op" id="7712374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712377">for</span>&nbsp;<span class="ident" id="7712381">i</span><span class="op" id="7712382">,</span>&nbsp;<span class="ident" id="7712384">test</span>&nbsp;<span class="op" id="7712389">:=</span>&nbsp;<span class="keyword" id="7712392">range</span>&nbsp;<span class="ident" id="7712398">setFrac64Tests</span>&nbsp;<span class="op" id="7712413">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712417">x</span>&nbsp;<span class="op" id="7712419">:=</span>&nbsp;<span class="builtinfunc" id="7712422">new</span><span class="op" id="7712425">(</span><span class="ident" id="7712426">Rat</span><span class="op" id="7712429">)</span><span class="op" id="7712430">.</span><span class="ident" id="7712431">SetFrac64</span><span class="op" id="7712440">(</span><span class="ident" id="7712441">test</span><span class="op" id="7712445">.</span><span class="ident" id="7712446">a</span><span class="op" id="7712447">,</span>&nbsp;<span class="ident" id="7712449">test</span><span class="op" id="7712453">.</span><span class="ident" id="7712454">b</span><span class="op" id="7712455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712459">if</span>&nbsp;<span class="ident" id="7712462">x</span><span class="op" id="7712463">.</span><span class="ident" id="7712464">RatString</span><span class="op" id="7712473">(</span><span class="op" id="7712474">)</span>&nbsp;<span class="op" id="7712476">!=</span>&nbsp;<span class="ident" id="7712479">test</span><span class="op" id="7712483">.</span><span class="ident" id="7712484">out</span>&nbsp;<span class="op" id="7712488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712493">t</span><span class="op" id="7712494">.</span><span class="ident" id="7712495">Errorf</span><span class="op" id="7712501">(</span><span class="string" id="7712502">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7712522">,</span>&nbsp;<span class="ident" id="7712524">i</span><span class="op" id="7712525">,</span>&nbsp;<span class="ident" id="7712527">x</span><span class="op" id="7712528">.</span><span class="ident" id="7712529">RatString</span><span class="op" id="7712538">(</span><span class="op" id="7712539">)</span><span class="op" id="7712540">,</span>&nbsp;<span class="ident" id="7712542">test</span><span class="op" id="7712546">.</span><span class="ident" id="7712547">out</span><span class="op" id="7712550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712557">}</span><br>
<span class="lineno">390</span><span class="op" id="7712559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7712562">func</span>&nbsp;<span class="ident" id="7712567">TestRatGobEncoding</span><span class="op" id="7712585">(</span><span class="ident" id="7712586">t</span>&nbsp;<span class="op" id="7712588">*</span><span class="ident" id="7712589">testing</span><span class="op" id="7712596">.</span><span class="ident" id="7712597">T</span><span class="op" id="7712598">)</span>&nbsp;<span class="op" id="7712600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712603">var</span>&nbsp;<span class="ident" id="7712607">medium</span>&nbsp;<span class="ident" id="7712614">bytes</span><span class="op" id="7712619">.</span><span class="ident" id="7712620">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712628">enc</span>&nbsp;<span class="op" id="7712632">:=</span>&nbsp;<span class="ident" id="7712635">gob</span><span class="op" id="7712638">.</span><span class="ident" id="7712639">NewEncoder</span><span class="op" id="7712649">(</span><span class="op" id="7712650">&amp;</span><span class="ident" id="7712651">medium</span><span class="op" id="7712657">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712660">dec</span>&nbsp;<span class="op" id="7712664">:=</span>&nbsp;<span class="ident" id="7712667">gob</span><span class="op" id="7712670">.</span><span class="ident" id="7712671">NewDecoder</span><span class="op" id="7712681">(</span><span class="op" id="7712682">&amp;</span><span class="ident" id="7712683">medium</span><span class="op" id="7712689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712692">for</span>&nbsp;<span class="ident" id="7712696">_</span><span class="op" id="7712697">,</span>&nbsp;<span class="ident" id="7712699">test</span>&nbsp;<span class="op" id="7712704">:=</span>&nbsp;<span class="keyword" id="7712707">range</span>&nbsp;<span class="ident" id="7712713">encodingTests</span>&nbsp;<span class="op" id="7712727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712731">medium</span><span class="op" id="7712737">.</span><span class="ident" id="7712738">Reset</span><span class="op" id="7712743">(</span><span class="op" id="7712744">)</span>&nbsp;<span class="comment" id="7712746">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712805">var</span>&nbsp;<span class="ident" id="7712809">tx</span>&nbsp;<span class="ident" id="7712812">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712818">tx</span><span class="op" id="7712820">.</span><span class="ident" id="7712821">SetString</span><span class="op" id="7712830">(</span><span class="ident" id="7712831">test</span>&nbsp;<span class="op" id="7712836">+</span>&nbsp;<span class="string" id="7712838">&#34;.14159265&#34;</span><span class="op" id="7712849">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712853">if</span>&nbsp;<span class="ident" id="7712856">err</span>&nbsp;<span class="op" id="7712860">:=</span>&nbsp;<span class="ident" id="7712863">enc</span><span class="op" id="7712866">.</span><span class="ident" id="7712867">Encode</span><span class="op" id="7712873">(</span><span class="op" id="7712874">&amp;</span><span class="ident" id="7712875">tx</span><span class="op" id="7712877">)</span><span class="op" id="7712878">;</span>&nbsp;<span class="ident" id="7712880">err</span>&nbsp;<span class="op" id="7712884">!=</span>&nbsp;<span class="ident" id="7712887">nil</span>&nbsp;<span class="op" id="7712891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712896">t</span><span class="op" id="7712897">.</span><span class="ident" id="7712898">Errorf</span><span class="op" id="7712904">(</span><span class="string" id="7712905">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7712932">,</span>&nbsp;<span class="op" id="7712934">&amp;</span><span class="ident" id="7712935">tx</span><span class="op" id="7712937">,</span>&nbsp;<span class="ident" id="7712939">err</span><span class="op" id="7712942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712950">var</span>&nbsp;<span class="ident" id="7712954">rx</span>&nbsp;<span class="ident" id="7712957">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712963">if</span>&nbsp;<span class="ident" id="7712966">err</span>&nbsp;<span class="op" id="7712970">:=</span>&nbsp;<span class="ident" id="7712973">dec</span><span class="op" id="7712976">.</span><span class="ident" id="7712977">Decode</span><span class="op" id="7712983">(</span><span class="op" id="7712984">&amp;</span><span class="ident" id="7712985">rx</span><span class="op" id="7712987">)</span><span class="op" id="7712988">;</span>&nbsp;<span class="ident" id="7712990">err</span>&nbsp;<span class="op" id="7712994">!=</span>&nbsp;<span class="ident" id="7712997">nil</span>&nbsp;<span class="op" id="7713001">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713006">t</span><span class="op" id="7713007">.</span><span class="ident" id="7713008">Errorf</span><span class="op" id="7713014">(</span><span class="string" id="7713015">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7713042">,</span>&nbsp;<span class="op" id="7713044">&amp;</span><span class="ident" id="7713045">tx</span><span class="op" id="7713047">,</span>&nbsp;<span class="ident" id="7713049">err</span><span class="op" id="7713052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713060">if</span>&nbsp;<span class="ident" id="7713063">rx</span><span class="op" id="7713065">.</span><span class="ident" id="7713066">Cmp</span><span class="op" id="7713069">(</span><span class="op" id="7713070">&amp;</span><span class="ident" id="7713071">tx</span><span class="op" id="7713073">)</span>&nbsp;<span class="op" id="7713075">!=</span>&nbsp;<span class="num" id="7713078">0</span>&nbsp;<span class="op" id="7713080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713085">t</span><span class="op" id="7713086">.</span><span class="ident" id="7713087">Errorf</span><span class="op" id="7713093">(</span><span class="string" id="7713094">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7713137">,</span>&nbsp;<span class="op" id="7713139">&amp;</span><span class="ident" id="7713140">tx</span><span class="op" id="7713142">,</span>&nbsp;<span class="op" id="7713144">&amp;</span><span class="ident" id="7713145">rx</span><span class="op" id="7713147">,</span>&nbsp;<span class="op" id="7713149">&amp;</span><span class="ident" id="7713150">tx</span><span class="op" id="7713152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713156">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713159">}</span><br>
<span class="lineno"></span><span class="op" id="7713161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7713164">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="7713259">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="7713284">func</span>&nbsp;<span class="ident" id="7713289">TestGobEncodingNilRatInSlice</span><span class="op" id="7713317">(</span><span class="ident" id="7713318">t</span>&nbsp;<span class="op" id="7713320">*</span><span class="ident" id="7713321">testing</span><span class="op" id="7713328">.</span><span class="ident" id="7713329">T</span><span class="op" id="7713330">)</span>&nbsp;<span class="op" id="7713332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713335">buf</span>&nbsp;<span class="op" id="7713339">:=</span>&nbsp;<span class="builtinfunc" id="7713342">new</span><span class="op" id="7713345">(</span><span class="ident" id="7713346">bytes</span><span class="op" id="7713351">.</span><span class="ident" id="7713352">Buffer</span><span class="op" id="7713358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713361">enc</span>&nbsp;<span class="op" id="7713365">:=</span>&nbsp;<span class="ident" id="7713368">gob</span><span class="op" id="7713371">.</span><span class="ident" id="7713372">NewEncoder</span><span class="op" id="7713382">(</span><span class="ident" id="7713383">buf</span><span class="op" id="7713386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713389">dec</span>&nbsp;<span class="op" id="7713393">:=</span>&nbsp;<span class="ident" id="7713396">gob</span><span class="op" id="7713399">.</span><span class="ident" id="7713400">NewDecoder</span><span class="op" id="7713410">(</span><span class="ident" id="7713411">buf</span><span class="op" id="7713414">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713418">var</span>&nbsp;<span class="ident" id="7713422">in</span>&nbsp;<span class="op" id="7713425">=</span>&nbsp;<span class="builtinfunc" id="7713427">make</span><span class="op" id="7713431">(</span><span class="op" id="7713432">[</span><span class="op" id="7713433">]</span><span class="op" id="7713434">*</span><span class="ident" id="7713435">Rat</span><span class="op" id="7713438">,</span>&nbsp;<span class="num" id="7713440">1</span><span class="op" id="7713441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713444">err</span>&nbsp;<span class="op" id="7713448">:=</span>&nbsp;<span class="ident" id="7713451">enc</span><span class="op" id="7713454">.</span><span class="ident" id="7713455">Encode</span><span class="op" id="7713461">(</span><span class="op" id="7713462">&amp;</span><span class="ident" id="7713463">in</span><span class="op" id="7713465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713468">if</span>&nbsp;<span class="ident" id="7713471">err</span>&nbsp;<span class="op" id="7713475">!=</span>&nbsp;<span class="ident" id="7713478">nil</span>&nbsp;<span class="op" id="7713482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713486">t</span><span class="op" id="7713487">.</span><span class="ident" id="7713488">Errorf</span><span class="op" id="7713494">(</span><span class="string" id="7713495">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7713518">,</span>&nbsp;<span class="ident" id="7713520">err</span><span class="op" id="7713523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713526">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713529">var</span>&nbsp;<span class="ident" id="7713533">out</span>&nbsp;<span class="op" id="7713537">[</span><span class="op" id="7713538">]</span><span class="op" id="7713539">*</span><span class="ident" id="7713540">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713545">err</span>&nbsp;<span class="op" id="7713549">=</span>&nbsp;<span class="ident" id="7713551">dec</span><span class="op" id="7713554">.</span><span class="ident" id="7713555">Decode</span><span class="op" id="7713561">(</span><span class="op" id="7713562">&amp;</span><span class="ident" id="7713563">out</span><span class="op" id="7713566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713569">if</span>&nbsp;<span class="ident" id="7713572">err</span>&nbsp;<span class="op" id="7713576">!=</span>&nbsp;<span class="ident" id="7713579">nil</span>&nbsp;<span class="op" id="7713583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713587">t</span><span class="op" id="7713588">.</span><span class="ident" id="7713589">Fatalf</span><span class="op" id="7713595">(</span><span class="string" id="7713596">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7713619">,</span>&nbsp;<span class="ident" id="7713621">err</span><span class="op" id="7713624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713627">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713630">if</span>&nbsp;<span class="builtinfunc" id="7713633">len</span><span class="op" id="7713636">(</span><span class="ident" id="7713637">out</span><span class="op" id="7713640">)</span>&nbsp;<span class="op" id="7713642">!=</span>&nbsp;<span class="num" id="7713645">1</span>&nbsp;<span class="op" id="7713647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713651">t</span><span class="op" id="7713652">.</span><span class="ident" id="7713653">Fatalf</span><span class="op" id="7713659">(</span><span class="string" id="7713660">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7713686">,</span>&nbsp;<span class="builtinfunc" id="7713688">len</span><span class="op" id="7713691">(</span><span class="ident" id="7713692">out</span><span class="op" id="7713695">)</span><span class="op" id="7713696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713702">var</span>&nbsp;<span class="ident" id="7713706">zero</span>&nbsp;<span class="ident" id="7713711">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713716">if</span>&nbsp;<span class="ident" id="7713719">out</span><span class="op" id="7713722">[</span><span class="num" id="7713723">0</span><span class="op" id="7713724">]</span><span class="op" id="7713725">.</span><span class="ident" id="7713726">Cmp</span><span class="op" id="7713729">(</span><span class="op" id="7713730">&amp;</span><span class="ident" id="7713731">zero</span><span class="op" id="7713735">)</span>&nbsp;<span class="op" id="7713737">!=</span>&nbsp;<span class="num" id="7713740">0</span>&nbsp;<span class="op" id="7713742">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713746">t</span><span class="op" id="7713747">.</span><span class="ident" id="7713748">Errorf</span><span class="op" id="7713754">(</span><span class="string" id="7713755">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="7713807">,</span>&nbsp;<span class="ident" id="7713809">out</span><span class="op" id="7713812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713815">}</span><br>
<span class="lineno"></span><span class="op" id="7713817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7713820">var</span>&nbsp;<span class="ident" id="7713824">ratNums</span>&nbsp;<span class="op" id="7713832">=</span>&nbsp;<span class="op" id="7713834">[</span><span class="op" id="7713835">]</span><span class="builtintype" id="7713836">string</span><span class="op" id="7713842">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713845">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7713923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713926">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="7713969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713972">&#34;-141592653589793&#34;</span><span class="op" id="7713990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713993">&#34;-1&#34;</span><span class="op" id="7713997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714000">&#34;0&#34;</span><span class="op" id="7714003">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714006">&#34;1&#34;</span><span class="op" id="7714009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714012">&#34;141592653589793&#34;</span><span class="op" id="7714029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714032">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="7714074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714077">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7714154">,</span><br>
<span class="lineno"></span><span class="op" id="7714156">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7714159">var</span>&nbsp;<span class="ident" id="7714163">ratDenoms</span>&nbsp;<span class="op" id="7714173">=</span>&nbsp;<span class="op" id="7714175">[</span><span class="op" id="7714176">]</span><span class="builtintype" id="7714177">string</span><span class="op" id="7714183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714186">&#34;1&#34;</span><span class="op" id="7714189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714192">&#34;718281828459045&#34;</span><span class="op" id="7714209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714212">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="7714254">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714257">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="7714334">,</span><br>
<span class="lineno"></span><span class="op" id="7714336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7714339">func</span>&nbsp;<span class="ident" id="7714344">TestRatJSONEncoding</span><span class="op" id="7714363">(</span><span class="ident" id="7714364">t</span>&nbsp;<span class="op" id="7714366">*</span><span class="ident" id="7714367">testing</span><span class="op" id="7714374">.</span><span class="ident" id="7714375">T</span><span class="op" id="7714376">)</span>&nbsp;<span class="op" id="7714378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714381">for</span>&nbsp;<span class="ident" id="7714385">_</span><span class="op" id="7714386">,</span>&nbsp;<span class="ident" id="7714388">num</span>&nbsp;<span class="op" id="7714392">:=</span>&nbsp;<span class="keyword" id="7714395">range</span>&nbsp;<span class="ident" id="7714401">ratNums</span>&nbsp;<span class="op" id="7714409">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714413">for</span>&nbsp;<span class="ident" id="7714417">_</span><span class="op" id="7714418">,</span>&nbsp;<span class="ident" id="7714420">denom</span>&nbsp;<span class="op" id="7714426">:=</span>&nbsp;<span class="keyword" id="7714429">range</span>&nbsp;<span class="ident" id="7714435">ratDenoms</span>&nbsp;<span class="op" id="7714445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714450">var</span>&nbsp;<span class="ident" id="7714454">tx</span>&nbsp;<span class="ident" id="7714457">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714464">tx</span><span class="op" id="7714466">.</span><span class="ident" id="7714467">SetString</span><span class="op" id="7714476">(</span><span class="ident" id="7714477">num</span>&nbsp;<span class="op" id="7714481">+</span>&nbsp;<span class="string" id="7714483">&#34;/&#34;</span>&nbsp;<span class="op" id="7714487">+</span>&nbsp;<span class="ident" id="7714489">denom</span><span class="op" id="7714494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714499">b</span><span class="op" id="7714500">,</span>&nbsp;<span class="ident" id="7714502">err</span>&nbsp;<span class="op" id="7714506">:=</span>&nbsp;<span class="ident" id="7714509">json</span><span class="op" id="7714513">.</span><span class="ident" id="7714514">Marshal</span><span class="op" id="7714521">(</span><span class="op" id="7714522">&amp;</span><span class="ident" id="7714523">tx</span><span class="op" id="7714525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714530">if</span>&nbsp;<span class="ident" id="7714533">err</span>&nbsp;<span class="op" id="7714537">!=</span>&nbsp;<span class="ident" id="7714540">nil</span>&nbsp;<span class="op" id="7714544">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714550">t</span><span class="op" id="7714551">.</span><span class="ident" id="7714552">Errorf</span><span class="op" id="7714558">(</span><span class="string" id="7714559">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7714588">,</span>&nbsp;<span class="op" id="7714590">&amp;</span><span class="ident" id="7714591">tx</span><span class="op" id="7714593">,</span>&nbsp;<span class="ident" id="7714595">err</span><span class="op" id="7714598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714604">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714621">var</span>&nbsp;<span class="ident" id="7714625">rx</span>&nbsp;<span class="ident" id="7714628">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714635">if</span>&nbsp;<span class="ident" id="7714638">err</span>&nbsp;<span class="op" id="7714642">:=</span>&nbsp;<span class="ident" id="7714645">json</span><span class="op" id="7714649">.</span><span class="ident" id="7714650">Unmarshal</span><span class="op" id="7714659">(</span><span class="ident" id="7714660">b</span><span class="op" id="7714661">,</span>&nbsp;<span class="op" id="7714663">&amp;</span><span class="ident" id="7714664">rx</span><span class="op" id="7714666">)</span><span class="op" id="7714667">;</span>&nbsp;<span class="ident" id="7714669">err</span>&nbsp;<span class="op" id="7714673">!=</span>&nbsp;<span class="ident" id="7714676">nil</span>&nbsp;<span class="op" id="7714680">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714686">t</span><span class="op" id="7714687">.</span><span class="ident" id="7714688">Errorf</span><span class="op" id="7714694">(</span><span class="string" id="7714695">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7714726">,</span>&nbsp;<span class="op" id="7714728">&amp;</span><span class="ident" id="7714729">tx</span><span class="op" id="7714731">,</span>&nbsp;<span class="ident" id="7714733">err</span><span class="op" id="7714736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714742">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714759">if</span>&nbsp;<span class="ident" id="7714762">rx</span><span class="op" id="7714764">.</span><span class="ident" id="7714765">Cmp</span><span class="op" id="7714768">(</span><span class="op" id="7714769">&amp;</span><span class="ident" id="7714770">tx</span><span class="op" id="7714772">)</span>&nbsp;<span class="op" id="7714774">!=</span>&nbsp;<span class="num" id="7714777">0</span>&nbsp;<span class="op" id="7714779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714785">t</span><span class="op" id="7714786">.</span><span class="ident" id="7714787">Errorf</span><span class="op" id="7714793">(</span><span class="string" id="7714794">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7714838">,</span>&nbsp;<span class="op" id="7714840">&amp;</span><span class="ident" id="7714841">tx</span><span class="op" id="7714843">,</span>&nbsp;<span class="op" id="7714845">&amp;</span><span class="ident" id="7714846">rx</span><span class="op" id="7714848">,</span>&nbsp;<span class="op" id="7714850">&amp;</span><span class="ident" id="7714851">tx</span><span class="op" id="7714853">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714865">}</span><br>
<span class="lineno"></span><span class="op" id="7714867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="7714870">func</span>&nbsp;<span class="ident" id="7714875">TestRatXMLEncoding</span><span class="op" id="7714893">(</span><span class="ident" id="7714894">t</span>&nbsp;<span class="op" id="7714896">*</span><span class="ident" id="7714897">testing</span><span class="op" id="7714904">.</span><span class="ident" id="7714905">T</span><span class="op" id="7714906">)</span>&nbsp;<span class="op" id="7714908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714911">for</span>&nbsp;<span class="ident" id="7714915">_</span><span class="op" id="7714916">,</span>&nbsp;<span class="ident" id="7714918">num</span>&nbsp;<span class="op" id="7714922">:=</span>&nbsp;<span class="keyword" id="7714925">range</span>&nbsp;<span class="ident" id="7714931">ratNums</span>&nbsp;<span class="op" id="7714939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714943">for</span>&nbsp;<span class="ident" id="7714947">_</span><span class="op" id="7714948">,</span>&nbsp;<span class="ident" id="7714950">denom</span>&nbsp;<span class="op" id="7714956">:=</span>&nbsp;<span class="keyword" id="7714959">range</span>&nbsp;<span class="ident" id="7714965">ratDenoms</span>&nbsp;<span class="op" id="7714975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714980">var</span>&nbsp;<span class="ident" id="7714984">tx</span>&nbsp;<span class="ident" id="7714987">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714994">tx</span><span class="op" id="7714996">.</span><span class="ident" id="7714997">SetString</span><span class="op" id="7715006">(</span><span class="ident" id="7715007">num</span>&nbsp;<span class="op" id="7715011">+</span>&nbsp;<span class="string" id="7715013">&#34;/&#34;</span>&nbsp;<span class="op" id="7715017">+</span>&nbsp;<span class="ident" id="7715019">denom</span><span class="op" id="7715024">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715029">b</span><span class="op" id="7715030">,</span>&nbsp;<span class="ident" id="7715032">err</span>&nbsp;<span class="op" id="7715036">:=</span>&nbsp;<span class="ident" id="7715039">xml</span><span class="op" id="7715042">.</span><span class="ident" id="7715043">Marshal</span><span class="op" id="7715050">(</span><span class="op" id="7715051">&amp;</span><span class="ident" id="7715052">tx</span><span class="op" id="7715054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715059">if</span>&nbsp;<span class="ident" id="7715062">err</span>&nbsp;<span class="op" id="7715066">!=</span>&nbsp;<span class="ident" id="7715069">nil</span>&nbsp;<span class="op" id="7715073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715079">t</span><span class="op" id="7715080">.</span><span class="ident" id="7715081">Errorf</span><span class="op" id="7715087">(</span><span class="string" id="7715088">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7715117">,</span>&nbsp;<span class="op" id="7715119">&amp;</span><span class="ident" id="7715120">tx</span><span class="op" id="7715122">,</span>&nbsp;<span class="ident" id="7715124">err</span><span class="op" id="7715127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715133">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715145">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715150">var</span>&nbsp;<span class="ident" id="7715154">rx</span>&nbsp;<span class="ident" id="7715157">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715164">if</span>&nbsp;<span class="ident" id="7715167">err</span>&nbsp;<span class="op" id="7715171">:=</span>&nbsp;<span class="ident" id="7715174">xml</span><span class="op" id="7715177">.</span><span class="ident" id="7715178">Unmarshal</span><span class="op" id="7715187">(</span><span class="ident" id="7715188">b</span><span class="op" id="7715189">,</span>&nbsp;<span class="op" id="7715191">&amp;</span><span class="ident" id="7715192">rx</span><span class="op" id="7715194">)</span><span class="op" id="7715195">;</span>&nbsp;<span class="ident" id="7715197">err</span>&nbsp;<span class="op" id="7715201">!=</span>&nbsp;<span class="ident" id="7715204">nil</span>&nbsp;<span class="op" id="7715208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715214">t</span><span class="op" id="7715215">.</span><span class="ident" id="7715216">Errorf</span><span class="op" id="7715222">(</span><span class="string" id="7715223">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7715254">,</span>&nbsp;<span class="op" id="7715256">&amp;</span><span class="ident" id="7715257">tx</span><span class="op" id="7715259">,</span>&nbsp;<span class="ident" id="7715261">err</span><span class="op" id="7715264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715270">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715282">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715287">if</span>&nbsp;<span class="ident" id="7715290">rx</span><span class="op" id="7715292">.</span><span class="ident" id="7715293">Cmp</span><span class="op" id="7715296">(</span><span class="op" id="7715297">&amp;</span><span class="ident" id="7715298">tx</span><span class="op" id="7715300">)</span>&nbsp;<span class="op" id="7715302">!=</span>&nbsp;<span class="num" id="7715305">0</span>&nbsp;<span class="op" id="7715307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715313">t</span><span class="op" id="7715314">.</span><span class="ident" id="7715315">Errorf</span><span class="op" id="7715321">(</span><span class="string" id="7715322">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7715365">,</span>&nbsp;<span class="op" id="7715367">&amp;</span><span class="ident" id="7715368">tx</span><span class="op" id="7715370">,</span>&nbsp;<span class="op" id="7715372">&amp;</span><span class="ident" id="7715373">rx</span><span class="op" id="7715375">,</span>&nbsp;<span class="op" id="7715377">&amp;</span><span class="ident" id="7715378">tx</span><span class="op" id="7715380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715392">}</span><br>
<span class="lineno">500</span><span class="op" id="7715394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7715397">func</span>&nbsp;<span class="ident" id="7715402">TestIssue2379</span><span class="op" id="7715415">(</span><span class="ident" id="7715416">t</span>&nbsp;<span class="op" id="7715418">*</span><span class="ident" id="7715419">testing</span><span class="op" id="7715426">.</span><span class="ident" id="7715427">T</span><span class="op" id="7715428">)</span>&nbsp;<span class="op" id="7715430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7715433">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715452">q</span>&nbsp;<span class="op" id="7715454">:=</span>&nbsp;<span class="ident" id="7715457">NewRat</span><span class="op" id="7715463">(</span><span class="num" id="7715464">3</span><span class="op" id="7715465">,</span>&nbsp;<span class="num" id="7715467">2</span><span class="op" id="7715468">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715471">x</span>&nbsp;<span class="op" id="7715473">:=</span>&nbsp;<span class="builtinfunc" id="7715476">new</span><span class="op" id="7715479">(</span><span class="ident" id="7715480">Rat</span><span class="op" id="7715483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715486">x</span><span class="op" id="7715487">.</span><span class="ident" id="7715488">SetFrac</span><span class="op" id="7715495">(</span><span class="ident" id="7715496">NewInt</span><span class="op" id="7715502">(</span><span class="num" id="7715503">3</span><span class="op" id="7715504">)</span><span class="op" id="7715505">,</span>&nbsp;<span class="ident" id="7715507">NewInt</span><span class="op" id="7715513">(</span><span class="num" id="7715514">2</span><span class="op" id="7715515">)</span><span class="op" id="7715516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715519">if</span>&nbsp;<span class="ident" id="7715522">x</span><span class="op" id="7715523">.</span><span class="ident" id="7715524">Cmp</span><span class="op" id="7715527">(</span><span class="ident" id="7715528">q</span><span class="op" id="7715529">)</span>&nbsp;<span class="op" id="7715531">!=</span>&nbsp;<span class="num" id="7715534">0</span>&nbsp;<span class="op" id="7715536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715540">t</span><span class="op" id="7715541">.</span><span class="ident" id="7715542">Errorf</span><span class="op" id="7715548">(</span><span class="string" id="7715549">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7715568">,</span>&nbsp;<span class="ident" id="7715570">x</span><span class="op" id="7715571">,</span>&nbsp;<span class="ident" id="7715573">q</span><span class="op" id="7715574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715577">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7715581">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715610">x</span>&nbsp;<span class="op" id="7715612">=</span>&nbsp;<span class="ident" id="7715614">NewRat</span><span class="op" id="7715620">(</span><span class="num" id="7715621">2</span><span class="op" id="7715622">,</span>&nbsp;<span class="num" id="7715624">3</span><span class="op" id="7715625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715628">x</span><span class="op" id="7715629">.</span><span class="ident" id="7715630">SetFrac</span><span class="op" id="7715637">(</span><span class="ident" id="7715638">NewInt</span><span class="op" id="7715644">(</span><span class="num" id="7715645">3</span><span class="op" id="7715646">)</span><span class="op" id="7715647">,</span>&nbsp;<span class="ident" id="7715649">x</span><span class="op" id="7715650">.</span><span class="ident" id="7715651">Num</span><span class="op" id="7715654">(</span><span class="op" id="7715655">)</span><span class="op" id="7715656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715659">if</span>&nbsp;<span class="ident" id="7715662">x</span><span class="op" id="7715663">.</span><span class="ident" id="7715664">Cmp</span><span class="op" id="7715667">(</span><span class="ident" id="7715668">q</span><span class="op" id="7715669">)</span>&nbsp;<span class="op" id="7715671">!=</span>&nbsp;<span class="num" id="7715674">0</span>&nbsp;<span class="op" id="7715676">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715680">t</span><span class="op" id="7715681">.</span><span class="ident" id="7715682">Errorf</span><span class="op" id="7715688">(</span><span class="string" id="7715689">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7715708">,</span>&nbsp;<span class="ident" id="7715710">x</span><span class="op" id="7715711">,</span>&nbsp;<span class="ident" id="7715713">q</span><span class="op" id="7715714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7715721">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715752">x</span>&nbsp;<span class="op" id="7715754">=</span>&nbsp;<span class="ident" id="7715756">NewRat</span><span class="op" id="7715762">(</span><span class="num" id="7715763">2</span><span class="op" id="7715764">,</span>&nbsp;<span class="num" id="7715766">3</span><span class="op" id="7715767">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715770">x</span><span class="op" id="7715771">.</span><span class="ident" id="7715772">SetFrac</span><span class="op" id="7715779">(</span><span class="ident" id="7715780">x</span><span class="op" id="7715781">.</span><span class="ident" id="7715782">Denom</span><span class="op" id="7715787">(</span><span class="op" id="7715788">)</span><span class="op" id="7715789">,</span>&nbsp;<span class="ident" id="7715791">NewInt</span><span class="op" id="7715797">(</span><span class="num" id="7715798">2</span><span class="op" id="7715799">)</span><span class="op" id="7715800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715803">if</span>&nbsp;<span class="ident" id="7715806">x</span><span class="op" id="7715807">.</span><span class="ident" id="7715808">Cmp</span><span class="op" id="7715811">(</span><span class="ident" id="7715812">q</span><span class="op" id="7715813">)</span>&nbsp;<span class="op" id="7715815">!=</span>&nbsp;<span class="num" id="7715818">0</span>&nbsp;<span class="op" id="7715820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715824">t</span><span class="op" id="7715825">.</span><span class="ident" id="7715826">Errorf</span><span class="op" id="7715832">(</span><span class="string" id="7715833">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7715852">,</span>&nbsp;<span class="ident" id="7715854">x</span><span class="op" id="7715855">,</span>&nbsp;<span class="ident" id="7715857">q</span><span class="op" id="7715858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7715865">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715910">x</span>&nbsp;<span class="op" id="7715912">=</span>&nbsp;<span class="ident" id="7715914">NewRat</span><span class="op" id="7715920">(</span><span class="num" id="7715921">2</span><span class="op" id="7715922">,</span>&nbsp;<span class="num" id="7715924">3</span><span class="op" id="7715925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715928">x</span><span class="op" id="7715929">.</span><span class="ident" id="7715930">SetFrac</span><span class="op" id="7715937">(</span><span class="ident" id="7715938">x</span><span class="op" id="7715939">.</span><span class="ident" id="7715940">Denom</span><span class="op" id="7715945">(</span><span class="op" id="7715946">)</span><span class="op" id="7715947">,</span>&nbsp;<span class="ident" id="7715949">x</span><span class="op" id="7715950">.</span><span class="ident" id="7715951">Num</span><span class="op" id="7715954">(</span><span class="op" id="7715955">)</span><span class="op" id="7715956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715959">if</span>&nbsp;<span class="ident" id="7715962">x</span><span class="op" id="7715963">.</span><span class="ident" id="7715964">Cmp</span><span class="op" id="7715967">(</span><span class="ident" id="7715968">q</span><span class="op" id="7715969">)</span>&nbsp;<span class="op" id="7715971">!=</span>&nbsp;<span class="num" id="7715974">0</span>&nbsp;<span class="op" id="7715976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715980">t</span><span class="op" id="7715981">.</span><span class="ident" id="7715982">Errorf</span><span class="op" id="7715988">(</span><span class="string" id="7715989">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7716008">,</span>&nbsp;<span class="ident" id="7716010">x</span><span class="op" id="7716011">,</span>&nbsp;<span class="ident" id="7716013">q</span><span class="op" id="7716014">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716021">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716067">q</span>&nbsp;<span class="op" id="7716069">=</span>&nbsp;<span class="ident" id="7716071">NewRat</span><span class="op" id="7716077">(</span><span class="num" id="7716078">1</span><span class="op" id="7716079">,</span>&nbsp;<span class="num" id="7716081">1</span><span class="op" id="7716082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716085">x</span>&nbsp;<span class="op" id="7716087">=</span>&nbsp;<span class="builtinfunc" id="7716089">new</span><span class="op" id="7716092">(</span><span class="ident" id="7716093">Rat</span><span class="op" id="7716096">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716099">n</span>&nbsp;<span class="op" id="7716101">:=</span>&nbsp;<span class="ident" id="7716104">NewInt</span><span class="op" id="7716110">(</span><span class="num" id="7716111">7</span><span class="op" id="7716112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716115">x</span><span class="op" id="7716116">.</span><span class="ident" id="7716117">SetFrac</span><span class="op" id="7716124">(</span><span class="ident" id="7716125">n</span><span class="op" id="7716126">,</span>&nbsp;<span class="ident" id="7716128">n</span><span class="op" id="7716129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716132">if</span>&nbsp;<span class="ident" id="7716135">x</span><span class="op" id="7716136">.</span><span class="ident" id="7716137">Cmp</span><span class="op" id="7716140">(</span><span class="ident" id="7716141">q</span><span class="op" id="7716142">)</span>&nbsp;<span class="op" id="7716144">!=</span>&nbsp;<span class="num" id="7716147">0</span>&nbsp;<span class="op" id="7716149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716153">t</span><span class="op" id="7716154">.</span><span class="ident" id="7716155">Errorf</span><span class="op" id="7716161">(</span><span class="string" id="7716162">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7716181">,</span>&nbsp;<span class="ident" id="7716183">x</span><span class="op" id="7716184">,</span>&nbsp;<span class="ident" id="7716186">q</span><span class="op" id="7716187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716190">}</span><br>
<span class="lineno">540</span><span class="op" id="7716192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7716195">func</span>&nbsp;<span class="ident" id="7716200">TestIssue3521</span><span class="op" id="7716213">(</span><span class="ident" id="7716214">t</span>&nbsp;<span class="op" id="7716216">*</span><span class="ident" id="7716217">testing</span><span class="op" id="7716224">.</span><span class="ident" id="7716225">T</span><span class="op" id="7716226">)</span>&nbsp;<span class="op" id="7716228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716231">a</span>&nbsp;<span class="op" id="7716233">:=</span>&nbsp;<span class="builtinfunc" id="7716236">new</span><span class="op" id="7716239">(</span><span class="ident" id="7716240">Int</span><span class="op" id="7716243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716246">b</span>&nbsp;<span class="op" id="7716248">:=</span>&nbsp;<span class="builtinfunc" id="7716251">new</span><span class="op" id="7716254">(</span><span class="ident" id="7716255">Int</span><span class="op" id="7716258">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716261">a</span><span class="op" id="7716262">.</span><span class="ident" id="7716263">SetString</span><span class="op" id="7716272">(</span><span class="string" id="7716273">&#34;64375784358435883458348587&#34;</span><span class="op" id="7716301">,</span>&nbsp;<span class="num" id="7716303">0</span><span class="op" id="7716304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716307">b</span><span class="op" id="7716308">.</span><span class="ident" id="7716309">SetString</span><span class="op" id="7716318">(</span><span class="string" id="7716319">&#34;4789759874531&#34;</span><span class="op" id="7716334">,</span>&nbsp;<span class="num" id="7716336">0</span><span class="op" id="7716337">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716341">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716386">zero</span>&nbsp;<span class="op" id="7716391">:=</span>&nbsp;<span class="builtinfunc" id="7716394">new</span><span class="op" id="7716397">(</span><span class="ident" id="7716398">Rat</span><span class="op" id="7716401">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716404">one</span>&nbsp;<span class="op" id="7716408">:=</span>&nbsp;<span class="ident" id="7716411">NewInt</span><span class="op" id="7716417">(</span><span class="num" id="7716418">1</span><span class="op" id="7716419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716422">if</span>&nbsp;<span class="ident" id="7716425">zero</span><span class="op" id="7716429">.</span><span class="ident" id="7716430">Denom</span><span class="op" id="7716435">(</span><span class="op" id="7716436">)</span><span class="op" id="7716437">.</span><span class="ident" id="7716438">Cmp</span><span class="op" id="7716441">(</span><span class="ident" id="7716442">one</span><span class="op" id="7716445">)</span>&nbsp;<span class="op" id="7716447">!=</span>&nbsp;<span class="num" id="7716450">0</span>&nbsp;<span class="op" id="7716452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716456">t</span><span class="op" id="7716457">.</span><span class="ident" id="7716458">Errorf</span><span class="op" id="7716464">(</span><span class="string" id="7716465">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7716484">,</span>&nbsp;<span class="ident" id="7716486">zero</span><span class="op" id="7716490">.</span><span class="ident" id="7716491">Denom</span><span class="op" id="7716496">(</span><span class="op" id="7716497">)</span><span class="op" id="7716498">,</span>&nbsp;<span class="ident" id="7716500">one</span><span class="op" id="7716503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716510">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716571">x</span>&nbsp;<span class="op" id="7716573">:=</span>&nbsp;<span class="builtinfunc" id="7716576">new</span><span class="op" id="7716579">(</span><span class="ident" id="7716580">Rat</span><span class="op" id="7716583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716586">x</span><span class="op" id="7716587">.</span><span class="ident" id="7716588">Denom</span><span class="op" id="7716593">(</span><span class="op" id="7716594">)</span><span class="op" id="7716595">.</span><span class="ident" id="7716596">Set</span><span class="op" id="7716599">(</span><span class="builtinfunc" id="7716600">new</span><span class="op" id="7716603">(</span><span class="ident" id="7716604">Int</span><span class="op" id="7716607">)</span><span class="op" id="7716608">.</span><span class="ident" id="7716609">Neg</span><span class="op" id="7716612">(</span><span class="ident" id="7716613">b</span><span class="op" id="7716614">)</span><span class="op" id="7716615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716618">if</span>&nbsp;<span class="ident" id="7716621">x</span><span class="op" id="7716622">.</span><span class="ident" id="7716623">Cmp</span><span class="op" id="7716626">(</span><span class="ident" id="7716627">zero</span><span class="op" id="7716631">)</span>&nbsp;<span class="op" id="7716633">!=</span>&nbsp;<span class="num" id="7716636">0</span>&nbsp;<span class="op" id="7716638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716642">t</span><span class="op" id="7716643">.</span><span class="ident" id="7716644">Errorf</span><span class="op" id="7716650">(</span><span class="string" id="7716651">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7716671">,</span>&nbsp;<span class="ident" id="7716673">x</span><span class="op" id="7716674">,</span>&nbsp;<span class="ident" id="7716676">zero</span><span class="op" id="7716680">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716687">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716745">x</span><span class="op" id="7716746">.</span><span class="ident" id="7716747">Num</span><span class="op" id="7716750">(</span><span class="op" id="7716751">)</span><span class="op" id="7716752">.</span><span class="ident" id="7716753">Set</span><span class="op" id="7716756">(</span><span class="ident" id="7716757">a</span><span class="op" id="7716758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716761">qab</span>&nbsp;<span class="op" id="7716765">:=</span>&nbsp;<span class="builtinfunc" id="7716768">new</span><span class="op" id="7716771">(</span><span class="ident" id="7716772">Rat</span><span class="op" id="7716775">)</span><span class="op" id="7716776">.</span><span class="ident" id="7716777">SetFrac</span><span class="op" id="7716784">(</span><span class="ident" id="7716785">a</span><span class="op" id="7716786">,</span>&nbsp;<span class="ident" id="7716788">b</span><span class="op" id="7716789">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716792">if</span>&nbsp;<span class="ident" id="7716795">x</span><span class="op" id="7716796">.</span><span class="ident" id="7716797">Cmp</span><span class="op" id="7716800">(</span><span class="ident" id="7716801">qab</span><span class="op" id="7716804">)</span>&nbsp;<span class="op" id="7716806">!=</span>&nbsp;<span class="num" id="7716809">0</span>&nbsp;<span class="op" id="7716811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716815">t</span><span class="op" id="7716816">.</span><span class="ident" id="7716817">Errorf</span><span class="op" id="7716823">(</span><span class="string" id="7716824">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7716844">,</span>&nbsp;<span class="ident" id="7716846">x</span><span class="op" id="7716847">,</span>&nbsp;<span class="ident" id="7716849">qab</span><span class="op" id="7716852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716859">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716929">x</span><span class="op" id="7716930">.</span><span class="ident" id="7716931">SetFrac64</span><span class="op" id="7716940">(</span><span class="num" id="7716941">10</span><span class="op" id="7716943">,</span>&nbsp;<span class="num" id="7716945">2</span><span class="op" id="7716946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716949">x</span><span class="op" id="7716950">.</span><span class="ident" id="7716951">Denom</span><span class="op" id="7716956">(</span><span class="op" id="7716957">)</span><span class="op" id="7716958">.</span><span class="ident" id="7716959">SetInt64</span><span class="op" id="7716967">(</span><span class="num" id="7716968">3</span><span class="op" id="7716969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716972">q53</span>&nbsp;<span class="op" id="7716976">:=</span>&nbsp;<span class="ident" id="7716979">NewRat</span><span class="op" id="7716985">(</span><span class="num" id="7716986">5</span><span class="op" id="7716987">,</span>&nbsp;<span class="num" id="7716989">3</span><span class="op" id="7716990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716993">if</span>&nbsp;<span class="ident" id="7716996">x</span><span class="op" id="7716997">.</span><span class="ident" id="7716998">Cmp</span><span class="op" id="7717001">(</span><span class="ident" id="7717002">q53</span><span class="op" id="7717005">)</span>&nbsp;<span class="op" id="7717007">!=</span>&nbsp;<span class="num" id="7717010">0</span>&nbsp;<span class="op" id="7717012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717016">t</span><span class="op" id="7717017">.</span><span class="ident" id="7717018">Errorf</span><span class="op" id="7717024">(</span><span class="string" id="7717025">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7717045">,</span>&nbsp;<span class="ident" id="7717047">x</span><span class="op" id="7717048">,</span>&nbsp;<span class="ident" id="7717050">q53</span><span class="op" id="7717053">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7717060">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717130">x</span>&nbsp;<span class="op" id="7717132">=</span>&nbsp;<span class="ident" id="7717134">NewRat</span><span class="op" id="7717140">(</span><span class="num" id="7717141">10</span><span class="op" id="7717143">,</span>&nbsp;<span class="num" id="7717145">2</span><span class="op" id="7717146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717149">x</span><span class="op" id="7717150">.</span><span class="ident" id="7717151">Denom</span><span class="op" id="7717156">(</span><span class="op" id="7717157">)</span><span class="op" id="7717158">.</span><span class="ident" id="7717159">SetInt64</span><span class="op" id="7717167">(</span><span class="num" id="7717168">3</span><span class="op" id="7717169">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717172">if</span>&nbsp;<span class="ident" id="7717175">x</span><span class="op" id="7717176">.</span><span class="ident" id="7717177">Cmp</span><span class="op" id="7717180">(</span><span class="ident" id="7717181">q53</span><span class="op" id="7717184">)</span>&nbsp;<span class="op" id="7717186">!=</span>&nbsp;<span class="num" id="7717189">0</span>&nbsp;<span class="op" id="7717191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717195">t</span><span class="op" id="7717196">.</span><span class="ident" id="7717197">Errorf</span><span class="op" id="7717203">(</span><span class="string" id="7717204">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7717224">,</span>&nbsp;<span class="ident" id="7717226">x</span><span class="op" id="7717227">,</span>&nbsp;<span class="ident" id="7717229">q53</span><span class="op" id="7717232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7717239">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717306">x</span><span class="op" id="7717307">.</span><span class="ident" id="7717308">SetFrac</span><span class="op" id="7717315">(</span><span class="ident" id="7717316">a</span><span class="op" id="7717317">,</span>&nbsp;<span class="ident" id="7717319">b</span><span class="op" id="7717320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717323">a</span>&nbsp;<span class="op" id="7717325">=</span>&nbsp;<span class="ident" id="7717327">x</span><span class="op" id="7717328">.</span><span class="ident" id="7717329">Num</span><span class="op" id="7717332">(</span><span class="op" id="7717333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717336">b</span>&nbsp;<span class="op" id="7717338">=</span>&nbsp;<span class="ident" id="7717340">x</span><span class="op" id="7717341">.</span><span class="ident" id="7717342">Denom</span><span class="op" id="7717347">(</span><span class="op" id="7717348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717351">a</span><span class="op" id="7717352">.</span><span class="ident" id="7717353">SetInt64</span><span class="op" id="7717361">(</span><span class="num" id="7717362">5</span><span class="op" id="7717363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717366">b</span><span class="op" id="7717367">.</span><span class="ident" id="7717368">SetInt64</span><span class="op" id="7717376">(</span><span class="num" id="7717377">3</span><span class="op" id="7717378">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717381">if</span>&nbsp;<span class="ident" id="7717384">x</span><span class="op" id="7717385">.</span><span class="ident" id="7717386">Cmp</span><span class="op" id="7717389">(</span><span class="ident" id="7717390">q53</span><span class="op" id="7717393">)</span>&nbsp;<span class="op" id="7717395">!=</span>&nbsp;<span class="num" id="7717398">0</span>&nbsp;<span class="op" id="7717400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717404">t</span><span class="op" id="7717405">.</span><span class="ident" id="7717406">Errorf</span><span class="op" id="7717412">(</span><span class="string" id="7717413">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7717432">,</span>&nbsp;<span class="ident" id="7717434">x</span><span class="op" id="7717435">,</span>&nbsp;<span class="ident" id="7717437">q53</span><span class="op" id="7717440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717443">}</span><br>
<span class="lineno"></span><span class="op" id="7717445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="7717448">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="7717517">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="7717589">var</span>&nbsp;<span class="ident" id="7717593">float64inputs</span>&nbsp;<span class="op" id="7717607">=</span>&nbsp;<span class="op" id="7717609">[</span><span class="op" id="7717610">]</span><span class="builtintype" id="7717611">string</span><span class="op" id="7717617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7717620">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7717670">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717740">&#34;5e+125&#34;</span><span class="op" id="7717748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717751">&#34;69e+267&#34;</span><span class="op" id="7717760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717763">&#34;999e-026&#34;</span><span class="op" id="7717773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717776">&#34;7861e-034&#34;</span><span class="op" id="7717787">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717790">&#34;75569e-254&#34;</span><span class="op" id="7717802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717805">&#34;928609e-261&#34;</span><span class="op" id="7717818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717821">&#34;9210917e+080&#34;</span><span class="op" id="7717835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717838">&#34;84863171e+114&#34;</span><span class="op" id="7717853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717856">&#34;653777767e+273&#34;</span><span class="op" id="7717872">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717875">&#34;5232604057e-298&#34;</span><span class="op" id="7717892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717895">&#34;27235667517e-109&#34;</span><span class="op" id="7717913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717916">&#34;653532977297e-123&#34;</span><span class="op" id="7717935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717938">&#34;3142213164987e-294&#34;</span><span class="op" id="7717958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717961">&#34;46202199371337e-072&#34;</span><span class="op" id="7717982">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717985">&#34;231010996856685e-073&#34;</span><span class="op" id="7718007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718010">&#34;9324754620109615e+212&#34;</span><span class="op" id="7718033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718036">&#34;78459735791271921e+049&#34;</span><span class="op" id="7718060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718063">&#34;272104041512242479e+200&#34;</span><span class="op" id="7718088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718091">&#34;6802601037806061975e+198&#34;</span><span class="op" id="7718117">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718120">&#34;20505426358836677347e-221&#34;</span><span class="op" id="7718147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718150">&#34;836168422905420598437e-234&#34;</span><span class="op" id="7718178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718181">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="7718210">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718214">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718284">&#34;9e-265&#34;</span><span class="op" id="7718292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718295">&#34;85e-037&#34;</span><span class="op" id="7718304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718307">&#34;623e+100&#34;</span><span class="op" id="7718317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718320">&#34;3571e+263&#34;</span><span class="op" id="7718331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718334">&#34;81661e+153&#34;</span><span class="op" id="7718346">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718349">&#34;920657e-023&#34;</span><span class="op" id="7718362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718365">&#34;4603285e-024&#34;</span><span class="op" id="7718379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718382">&#34;87575437e-309&#34;</span><span class="op" id="7718397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718400">&#34;245540327e+122&#34;</span><span class="op" id="7718416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718419">&#34;6138508175e+120&#34;</span><span class="op" id="7718436">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718439">&#34;83356057653e+193&#34;</span><span class="op" id="7718457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718460">&#34;619534293513e+124&#34;</span><span class="op" id="7718479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718482">&#34;2335141086879e+218&#34;</span><span class="op" id="7718502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718505">&#34;36167929443327e-159&#34;</span><span class="op" id="7718526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718529">&#34;609610927149051e-255&#34;</span><span class="op" id="7718551">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718554">&#34;3743626360493413e-165&#34;</span><span class="op" id="7718577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718580">&#34;94080055902682397e-242&#34;</span><span class="op" id="7718604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718607">&#34;899810892172646163e+283&#34;</span><span class="op" id="7718632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718635">&#34;7120190517612959703e+120&#34;</span><span class="op" id="7718661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718664">&#34;25188282901709339043e-252&#34;</span><span class="op" id="7718691">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718694">&#34;308984926168550152811e-052&#34;</span><span class="op" id="7718722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718725">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="7718754">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718758">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718828">&#34;5e-20&#34;</span><span class="op" id="7718835">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718838">&#34;67e+14&#34;</span><span class="op" id="7718846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718849">&#34;985e+15&#34;</span><span class="op" id="7718858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718861">&#34;7693e-42&#34;</span><span class="op" id="7718871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718874">&#34;55895e-16&#34;</span><span class="op" id="7718885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718888">&#34;996622e-44&#34;</span><span class="op" id="7718900">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718903">&#34;7038531e-32&#34;</span><span class="op" id="7718916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718919">&#34;60419369e-46&#34;</span><span class="op" id="7718933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718936">&#34;702990899e-20&#34;</span><span class="op" id="7718951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718954">&#34;6930161142e-48&#34;</span><span class="op" id="7718970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718973">&#34;25933168707e+13&#34;</span><span class="op" id="7718990">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718993">&#34;596428896559e+20&#34;</span><span class="op" id="7719011">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719015">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719085">&#34;3e-23&#34;</span><span class="op" id="7719092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719095">&#34;57e+18&#34;</span><span class="op" id="7719103">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719106">&#34;789e-35&#34;</span><span class="op" id="7719115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719118">&#34;2539e-18&#34;</span><span class="op" id="7719128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719131">&#34;76173e+28&#34;</span><span class="op" id="7719142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719145">&#34;887745e-11&#34;</span><span class="op" id="7719157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719160">&#34;5382571e-37&#34;</span><span class="op" id="7719173">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719176">&#34;82381273e-35&#34;</span><span class="op" id="7719190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719193">&#34;750486563e-38&#34;</span><span class="op" id="7719208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719211">&#34;3752432815e-39&#34;</span><span class="op" id="7719227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719230">&#34;75224575729e-45&#34;</span><span class="op" id="7719247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719250">&#34;459926601011e+15&#34;</span><span class="op" id="7719268">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719272">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719324">&#34;0&#34;</span><span class="op" id="7719327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719330">&#34;1&#34;</span><span class="op" id="7719333">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719336">&#34;+1&#34;</span><span class="op" id="7719340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719343">&#34;1e23&#34;</span><span class="op" id="7719349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719352">&#34;1E23&#34;</span><span class="op" id="7719358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719361">&#34;100000000000000000000000&#34;</span><span class="op" id="7719387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719390">&#34;1e-100&#34;</span><span class="op" id="7719398">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719401">&#34;123456700&#34;</span><span class="op" id="7719412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719415">&#34;99999999999999974834176&#34;</span><span class="op" id="7719440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719443">&#34;100000000000000000000001&#34;</span><span class="op" id="7719469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719472">&#34;100000000000000008388608&#34;</span><span class="op" id="7719498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719501">&#34;100000000000000016777215&#34;</span><span class="op" id="7719527">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719530">&#34;100000000000000016777216&#34;</span><span class="op" id="7719556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719559">&#34;-1&#34;</span><span class="op" id="7719563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719566">&#34;-0.1&#34;</span><span class="op" id="7719572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719575">&#34;-0&#34;</span><span class="op" id="7719579">,</span>&nbsp;<span class="comment" id="7719581">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719619">&#34;1e-20&#34;</span><span class="op" id="7719626">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719629">&#34;625e-3&#34;</span><span class="op" id="7719637">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719641">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719661">&#34;1.7976931348623157e308&#34;</span><span class="op" id="7719685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719688">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="7719713">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719716">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719745">&#34;1.7976931348623159e308&#34;</span><span class="op" id="7719769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719772">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="7719797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719800">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719828">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719850">&#34;1.7976931348623158e308&#34;</span><span class="op" id="7719874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719877">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="7719902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719905">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719932">&#34;1.797693134862315808e308&#34;</span><span class="op" id="7719958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7719961">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="7719988">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719992">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720015">&#34;1e308&#34;</span><span class="op" id="7720022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720025">&#34;2e308&#34;</span><span class="op" id="7720032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720035">&#34;1e309&#34;</span><span class="op" id="7720042">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720046">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720064">&#34;1e310&#34;</span><span class="op" id="7720071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720074">&#34;-1e310&#34;</span><span class="op" id="7720082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720085">&#34;1e400&#34;</span><span class="op" id="7720092">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720095">&#34;-1e400&#34;</span><span class="op" id="7720103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720106">&#34;long:1e400000&#34;</span><span class="op" id="7720121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720124">&#34;long:-1e400000&#34;</span><span class="op" id="7720140">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720144">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720161">&#34;1e-305&#34;</span><span class="op" id="7720169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720172">&#34;1e-306&#34;</span><span class="op" id="7720180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720183">&#34;1e-307&#34;</span><span class="op" id="7720191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720194">&#34;1e-308&#34;</span><span class="op" id="7720202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720205">&#34;1e-309&#34;</span><span class="op" id="7720213">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720216">&#34;1e-310&#34;</span><span class="op" id="7720224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720227">&#34;1e-322&#34;</span><span class="op" id="7720235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720238">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720260">&#34;5e-324&#34;</span><span class="op" id="7720268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720271">&#34;4e-324&#34;</span><span class="op" id="7720279">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720282">&#34;3e-324&#34;</span><span class="op" id="7720290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720293">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720307">&#34;2e-324&#34;</span><span class="op" id="7720315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720318">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720336">&#34;1e-350&#34;</span><span class="op" id="7720344">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720347">&#34;long:1e-400000&#34;</span><span class="op" id="7720363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720366">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720394">&#34;-1e-350&#34;</span><span class="op" id="7720403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720406">&#34;long:-1e-400000&#34;</span><span class="op" id="7720423">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720427">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720456">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720515">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720536">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720557">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720588">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720620">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720707">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="7720732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720735">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720822">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="7720847">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720851">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720925">&#34;4.630813248087435e+307&#34;</span><span class="op" id="7720949">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720953">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720996">&#34;22.222222222222222&#34;</span><span class="op" id="7721016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721019">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="7721029">+</span>&nbsp;<span class="ident" id="7721031">strings</span><span class="op" id="7721038">.</span><span class="ident" id="7721039">Repeat</span><span class="op" id="7721045">(</span><span class="string" id="7721046">&#34;2&#34;</span><span class="op" id="7721049">,</span>&nbsp;<span class="num" id="7721051">4000</span><span class="op" id="7721055">)</span>&nbsp;<span class="op" id="7721057">+</span>&nbsp;<span class="string" id="7721059">&#34;e+1&#34;</span><span class="op" id="7721064">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721068">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721124">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721150">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="7721207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721210">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721248">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="7721305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721308">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721339">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="7721396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721399">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721465">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="7721528">+</span>&nbsp;<span class="ident" id="7721530">strings</span><span class="op" id="7721537">.</span><span class="ident" id="7721538">Repeat</span><span class="op" id="7721544">(</span><span class="string" id="7721545">&#34;0&#34;</span><span class="op" id="7721548">,</span>&nbsp;<span class="num" id="7721550">10000</span><span class="op" id="7721555">)</span>&nbsp;<span class="op" id="7721557">+</span>&nbsp;<span class="string" id="7721559">&#34;1&#34;</span><span class="op" id="7721562">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721566">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721602">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="7721650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721653">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721697">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="7721745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721748">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721807">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721852">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="7721900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721903">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721971">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722016">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="7722064">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722068">&#34;1152921504606846975&#34;</span><span class="op" id="7722089">,</span>&nbsp;&nbsp;<span class="comment" id="7722092">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722108">&#34;-1152921504606846975&#34;</span><span class="op" id="7722130">,</span>&nbsp;<span class="comment" id="7722132">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722149">&#34;1152921504606846977&#34;</span><span class="op" id="7722170">,</span>&nbsp;&nbsp;<span class="comment" id="7722173">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722189">&#34;-1152921504606846977&#34;</span><span class="op" id="7722211">,</span>&nbsp;<span class="comment" id="7722213">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722231">&#34;1/3&#34;</span><span class="op" id="7722236">,</span><br>
<span class="lineno"></span><span class="op" id="7722238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7722241">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="7722307">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="7722367">func</span>&nbsp;<span class="ident" id="7722372">isFinite</span><span class="op" id="7722380">(</span><span class="ident" id="7722381">f</span>&nbsp;<span class="builtintype" id="7722383">float64</span><span class="op" id="7722390">)</span>&nbsp;<span class="builtintype" id="7722392">bool</span>&nbsp;<span class="op" id="7722397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722400">return</span>&nbsp;<span class="ident" id="7722407">math</span><span class="op" id="7722411">.</span><span class="ident" id="7722412">Abs</span><span class="op" id="7722415">(</span><span class="ident" id="7722416">f</span><span class="op" id="7722417">)</span>&nbsp;<span class="op" id="7722419">&lt;=</span>&nbsp;<span class="ident" id="7722422">math</span><span class="op" id="7722426">.</span><span class="ident" id="7722427">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="7722438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7722441">func</span>&nbsp;<span class="ident" id="7722446">TestFloat32SpecialCases</span><span class="op" id="7722469">(</span><span class="ident" id="7722470">t</span>&nbsp;<span class="op" id="7722472">*</span><span class="ident" id="7722473">testing</span><span class="op" id="7722480">.</span><span class="ident" id="7722481">T</span><span class="op" id="7722482">)</span>&nbsp;<span class="op" id="7722484">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722487">for</span>&nbsp;<span class="ident" id="7722491">_</span><span class="op" id="7722492">,</span>&nbsp;<span class="ident" id="7722494">input</span>&nbsp;<span class="op" id="7722500">:=</span>&nbsp;<span class="keyword" id="7722503">range</span>&nbsp;<span class="ident" id="7722509">float64inputs</span>&nbsp;<span class="op" id="7722523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722527">if</span>&nbsp;<span class="ident" id="7722530">strings</span><span class="op" id="7722537">.</span><span class="ident" id="7722538">HasPrefix</span><span class="op" id="7722547">(</span><span class="ident" id="7722548">input</span><span class="op" id="7722553">,</span>&nbsp;<span class="string" id="7722555">&#34;long:&#34;</span><span class="op" id="7722562">)</span>&nbsp;<span class="op" id="7722564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722569">if</span>&nbsp;<span class="ident" id="7722572">testing</span><span class="op" id="7722579">.</span><span class="ident" id="7722580">Short</span><span class="op" id="7722585">(</span><span class="op" id="7722586">)</span>&nbsp;<span class="op" id="7722588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722594">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722606">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722611">input</span>&nbsp;<span class="op" id="7722617">=</span>&nbsp;<span class="ident" id="7722619">input</span><span class="op" id="7722624">[</span><span class="builtinfunc" id="7722625">len</span><span class="op" id="7722628">(</span><span class="string" id="7722629">&#34;long:&#34;</span><span class="op" id="7722636">)</span><span class="op" id="7722637">:</span><span class="op" id="7722638">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722647">r</span><span class="op" id="7722648">,</span>&nbsp;<span class="ident" id="7722650">ok</span>&nbsp;<span class="op" id="7722653">:=</span>&nbsp;<span class="builtinfunc" id="7722656">new</span><span class="op" id="7722659">(</span><span class="ident" id="7722660">Rat</span><span class="op" id="7722663">)</span><span class="op" id="7722664">.</span><span class="ident" id="7722665">SetString</span><span class="op" id="7722674">(</span><span class="ident" id="7722675">input</span><span class="op" id="7722680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722684">if</span>&nbsp;<span class="op" id="7722687">!</span><span class="ident" id="7722688">ok</span>&nbsp;<span class="op" id="7722691">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722696">t</span><span class="op" id="7722697">.</span><span class="ident" id="7722698">Errorf</span><span class="op" id="7722704">(</span><span class="string" id="7722705">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7722731">,</span>&nbsp;<span class="ident" id="7722733">input</span><span class="op" id="7722738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722743">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722758">f</span><span class="op" id="7722759">,</span>&nbsp;<span class="ident" id="7722761">exact</span>&nbsp;<span class="op" id="7722767">:=</span>&nbsp;<span class="ident" id="7722770">r</span><span class="op" id="7722771">.</span><span class="ident" id="7722772">Float32</span><span class="op" id="7722779">(</span><span class="op" id="7722780">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7722785">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7722840">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7722881">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722943">if</span>&nbsp;<span class="op" id="7722946">!</span><span class="ident" id="7722947">strings</span><span class="op" id="7722954">.</span><span class="ident" id="7722955">Contains</span><span class="op" id="7722963">(</span><span class="ident" id="7722964">input</span><span class="op" id="7722969">,</span>&nbsp;<span class="string" id="7722971">&#34;/&#34;</span><span class="op" id="7722974">)</span>&nbsp;<span class="op" id="7722976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722981">e64</span><span class="op" id="7722984">,</span>&nbsp;<span class="ident" id="7722986">_</span>&nbsp;<span class="op" id="7722988">:=</span>&nbsp;<span class="ident" id="7722991">strconv</span><span class="op" id="7722998">.</span><span class="ident" id="7722999">ParseFloat</span><span class="op" id="7723009">(</span><span class="ident" id="7723010">input</span><span class="op" id="7723015">,</span>&nbsp;<span class="num" id="7723017">32</span><span class="op" id="7723019">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723024">e</span>&nbsp;<span class="op" id="7723026">:=</span>&nbsp;<span class="builtintype" id="7723029">float32</span><span class="op" id="7723036">(</span><span class="ident" id="7723037">e64</span><span class="op" id="7723040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723046">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723089">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723139">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723185">switch</span>&nbsp;<span class="op" id="7723192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723197">case</span>&nbsp;<span class="ident" id="7723202">math</span><span class="op" id="7723206">.</span><span class="ident" id="7723207">Float32bits</span><span class="op" id="7723218">(</span><span class="ident" id="7723219">e</span><span class="op" id="7723220">)</span>&nbsp;<span class="op" id="7723222">==</span>&nbsp;<span class="ident" id="7723225">math</span><span class="op" id="7723229">.</span><span class="ident" id="7723230">Float32bits</span><span class="op" id="7723241">(</span><span class="ident" id="7723242">f</span><span class="op" id="7723243">)</span><span class="op" id="7723244">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723250">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723275">case</span>&nbsp;<span class="ident" id="7723280">f</span>&nbsp;<span class="op" id="7723282">==</span>&nbsp;<span class="num" id="7723285">0</span>&nbsp;<span class="op" id="7723287">&amp;&amp;</span>&nbsp;<span class="ident" id="7723290">r</span><span class="op" id="7723291">.</span><span class="ident" id="7723292">Num</span><span class="op" id="7723295">(</span><span class="op" id="7723296">)</span><span class="op" id="7723297">.</span><span class="ident" id="7723298">BitLen</span><span class="op" id="7723304">(</span><span class="op" id="7723305">)</span>&nbsp;<span class="op" id="7723307">==</span>&nbsp;<span class="num" id="7723310">0</span><span class="op" id="7723311">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723317">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723372">default</span><span class="op" id="7723379">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723385">t</span><span class="op" id="7723386">.</span><span class="ident" id="7723387">Errorf</span><span class="op" id="7723393">(</span><span class="string" id="7723394">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7723454">,</span>&nbsp;<span class="ident" id="7723456">input</span><span class="op" id="7723461">,</span>&nbsp;<span class="ident" id="7723463">e</span><span class="op" id="7723464">,</span>&nbsp;<span class="ident" id="7723466">e</span><span class="op" id="7723467">,</span>&nbsp;<span class="ident" id="7723469">f</span><span class="op" id="7723470">,</span>&nbsp;<span class="ident" id="7723472">f</span><span class="op" id="7723473">,</span>&nbsp;<span class="ident" id="7723475">f</span><span class="op" id="7723476">-</span><span class="ident" id="7723477">e</span><span class="op" id="7723478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723492">if</span>&nbsp;<span class="op" id="7723495">!</span><span class="ident" id="7723496">isFinite</span><span class="op" id="7723504">(</span><span class="builtintype" id="7723505">float64</span><span class="op" id="7723512">(</span><span class="ident" id="7723513">f</span><span class="op" id="7723514">)</span><span class="op" id="7723515">)</span>&nbsp;<span class="op" id="7723517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723522">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723538">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723582">if</span>&nbsp;<span class="op" id="7723585">!</span><span class="ident" id="7723586">checkIsBestApprox32</span><span class="op" id="7723605">(</span><span class="ident" id="7723606">t</span><span class="op" id="7723607">,</span>&nbsp;<span class="ident" id="7723609">f</span><span class="op" id="7723610">,</span>&nbsp;<span class="ident" id="7723612">r</span><span class="op" id="7723613">)</span>&nbsp;<span class="op" id="7723615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723620">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723654">t</span><span class="op" id="7723655">.</span><span class="ident" id="7723656">Errorf</span><span class="op" id="7723662">(</span><span class="string" id="7723663">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7723679">,</span>&nbsp;<span class="ident" id="7723681">input</span><span class="op" id="7723686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723695">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723741">checkNonLossyRoundtrip32</span><span class="op" id="7723765">(</span><span class="ident" id="7723766">t</span><span class="op" id="7723767">,</span>&nbsp;<span class="ident" id="7723769">f</span><span class="op" id="7723770">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723775">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723821">if</span>&nbsp;<span class="ident" id="7723824">wasExact</span>&nbsp;<span class="op" id="7723833">:=</span>&nbsp;<span class="builtinfunc" id="7723836">new</span><span class="op" id="7723839">(</span><span class="ident" id="7723840">Rat</span><span class="op" id="7723843">)</span><span class="op" id="7723844">.</span><span class="ident" id="7723845">SetFloat64</span><span class="op" id="7723855">(</span><span class="builtintype" id="7723856">float64</span><span class="op" id="7723863">(</span><span class="ident" id="7723864">f</span><span class="op" id="7723865">)</span><span class="op" id="7723866">)</span><span class="op" id="7723867">.</span><span class="ident" id="7723868">Cmp</span><span class="op" id="7723871">(</span><span class="ident" id="7723872">r</span><span class="op" id="7723873">)</span>&nbsp;<span class="op" id="7723875">==</span>&nbsp;<span class="num" id="7723878">0</span><span class="op" id="7723879">;</span>&nbsp;<span class="ident" id="7723881">wasExact</span>&nbsp;<span class="op" id="7723890">!=</span>&nbsp;<span class="ident" id="7723893">exact</span>&nbsp;<span class="op" id="7723899">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723904">t</span><span class="op" id="7723905">.</span><span class="ident" id="7723906">Errorf</span><span class="op" id="7723912">(</span><span class="string" id="7723913">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7723962">,</span>&nbsp;<span class="ident" id="7723964">input</span><span class="op" id="7723969">,</span>&nbsp;<span class="ident" id="7723971">exact</span><span class="op" id="7723976">,</span>&nbsp;<span class="ident" id="7723978">wasExact</span><span class="op" id="7723986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723993">}</span><br>
<span class="lineno"></span><span class="op" id="7723995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="7723998">func</span>&nbsp;<span class="ident" id="7724003">TestFloat64SpecialCases</span><span class="op" id="7724026">(</span><span class="ident" id="7724027">t</span>&nbsp;<span class="op" id="7724029">*</span><span class="ident" id="7724030">testing</span><span class="op" id="7724037">.</span><span class="ident" id="7724038">T</span><span class="op" id="7724039">)</span>&nbsp;<span class="op" id="7724041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724044">for</span>&nbsp;<span class="ident" id="7724048">_</span><span class="op" id="7724049">,</span>&nbsp;<span class="ident" id="7724051">input</span>&nbsp;<span class="op" id="7724057">:=</span>&nbsp;<span class="keyword" id="7724060">range</span>&nbsp;<span class="ident" id="7724066">float64inputs</span>&nbsp;<span class="op" id="7724080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724084">if</span>&nbsp;<span class="ident" id="7724087">strings</span><span class="op" id="7724094">.</span><span class="ident" id="7724095">HasPrefix</span><span class="op" id="7724104">(</span><span class="ident" id="7724105">input</span><span class="op" id="7724110">,</span>&nbsp;<span class="string" id="7724112">&#34;long:&#34;</span><span class="op" id="7724119">)</span>&nbsp;<span class="op" id="7724121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724126">if</span>&nbsp;<span class="ident" id="7724129">testing</span><span class="op" id="7724136">.</span><span class="ident" id="7724137">Short</span><span class="op" id="7724142">(</span><span class="op" id="7724143">)</span>&nbsp;<span class="op" id="7724145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724151">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724168">input</span>&nbsp;<span class="op" id="7724174">=</span>&nbsp;<span class="ident" id="7724176">input</span><span class="op" id="7724181">[</span><span class="builtinfunc" id="7724182">len</span><span class="op" id="7724185">(</span><span class="string" id="7724186">&#34;long:&#34;</span><span class="op" id="7724193">)</span><span class="op" id="7724194">:</span><span class="op" id="7724195">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724204">r</span><span class="op" id="7724205">,</span>&nbsp;<span class="ident" id="7724207">ok</span>&nbsp;<span class="op" id="7724210">:=</span>&nbsp;<span class="builtinfunc" id="7724213">new</span><span class="op" id="7724216">(</span><span class="ident" id="7724217">Rat</span><span class="op" id="7724220">)</span><span class="op" id="7724221">.</span><span class="ident" id="7724222">SetString</span><span class="op" id="7724231">(</span><span class="ident" id="7724232">input</span><span class="op" id="7724237">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724241">if</span>&nbsp;<span class="op" id="7724244">!</span><span class="ident" id="7724245">ok</span>&nbsp;<span class="op" id="7724248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724253">t</span><span class="op" id="7724254">.</span><span class="ident" id="7724255">Errorf</span><span class="op" id="7724261">(</span><span class="string" id="7724262">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7724288">,</span>&nbsp;<span class="ident" id="7724290">input</span><span class="op" id="7724295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724300">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724315">f</span><span class="op" id="7724316">,</span>&nbsp;<span class="ident" id="7724318">exact</span>&nbsp;<span class="op" id="7724324">:=</span>&nbsp;<span class="ident" id="7724327">r</span><span class="op" id="7724328">.</span><span class="ident" id="7724329">Float64</span><span class="op" id="7724336">(</span><span class="op" id="7724337">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7724342">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7724397">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7724438">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724500">if</span>&nbsp;<span class="op" id="7724503">!</span><span class="ident" id="7724504">strings</span><span class="op" id="7724511">.</span><span class="ident" id="7724512">Contains</span><span class="op" id="7724520">(</span><span class="ident" id="7724521">input</span><span class="op" id="7724526">,</span>&nbsp;<span class="string" id="7724528">&#34;/&#34;</span><span class="op" id="7724531">)</span>&nbsp;<span class="op" id="7724533">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724538">e</span><span class="op" id="7724539">,</span>&nbsp;<span class="ident" id="7724541">_</span>&nbsp;<span class="op" id="7724543">:=</span>&nbsp;<span class="ident" id="7724546">strconv</span><span class="op" id="7724553">.</span><span class="ident" id="7724554">ParseFloat</span><span class="op" id="7724564">(</span><span class="ident" id="7724565">input</span><span class="op" id="7724570">,</span>&nbsp;<span class="num" id="7724572">64</span><span class="op" id="7724574">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7724580">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7724623">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7724673">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724719">switch</span>&nbsp;<span class="op" id="7724726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724731">case</span>&nbsp;<span class="ident" id="7724736">math</span><span class="op" id="7724740">.</span><span class="ident" id="7724741">Float64bits</span><span class="op" id="7724752">(</span><span class="ident" id="7724753">e</span><span class="op" id="7724754">)</span>&nbsp;<span class="op" id="7724756">==</span>&nbsp;<span class="ident" id="7724759">math</span><span class="op" id="7724763">.</span><span class="ident" id="7724764">Float64bits</span><span class="op" id="7724775">(</span><span class="ident" id="7724776">f</span><span class="op" id="7724777">)</span><span class="op" id="7724778">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7724784">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724809">case</span>&nbsp;<span class="ident" id="7724814">f</span>&nbsp;<span class="op" id="7724816">==</span>&nbsp;<span class="num" id="7724819">0</span>&nbsp;<span class="op" id="7724821">&amp;&amp;</span>&nbsp;<span class="ident" id="7724824">r</span><span class="op" id="7724825">.</span><span class="ident" id="7724826">Num</span><span class="op" id="7724829">(</span><span class="op" id="7724830">)</span><span class="op" id="7724831">.</span><span class="ident" id="7724832">BitLen</span><span class="op" id="7724838">(</span><span class="op" id="7724839">)</span>&nbsp;<span class="op" id="7724841">==</span>&nbsp;<span class="num" id="7724844">0</span><span class="op" id="7724845">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7724851">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724906">default</span><span class="op" id="7724913">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724919">t</span><span class="op" id="7724920">.</span><span class="ident" id="7724921">Errorf</span><span class="op" id="7724927">(</span><span class="string" id="7724928">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7724988">,</span>&nbsp;<span class="ident" id="7724990">input</span><span class="op" id="7724995">,</span>&nbsp;<span class="ident" id="7724997">e</span><span class="op" id="7724998">,</span>&nbsp;<span class="ident" id="7725000">e</span><span class="op" id="7725001">,</span>&nbsp;<span class="ident" id="7725003">f</span><span class="op" id="7725004">,</span>&nbsp;<span class="ident" id="7725006">f</span><span class="op" id="7725007">,</span>&nbsp;<span class="ident" id="7725009">f</span><span class="op" id="7725010">-</span><span class="ident" id="7725011">e</span><span class="op" id="7725012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725026">if</span>&nbsp;<span class="op" id="7725029">!</span><span class="ident" id="7725030">isFinite</span><span class="op" id="7725038">(</span><span class="ident" id="7725039">f</span><span class="op" id="7725040">)</span>&nbsp;<span class="op" id="7725042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725047">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725063">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725107">if</span>&nbsp;<span class="op" id="7725110">!</span><span class="ident" id="7725111">checkIsBestApprox64</span><span class="op" id="7725130">(</span><span class="ident" id="7725131">t</span><span class="op" id="7725132">,</span>&nbsp;<span class="ident" id="7725134">f</span><span class="op" id="7725135">,</span>&nbsp;<span class="ident" id="7725137">r</span><span class="op" id="7725138">)</span>&nbsp;<span class="op" id="7725140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725145">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725179">t</span><span class="op" id="7725180">.</span><span class="ident" id="7725181">Errorf</span><span class="op" id="7725187">(</span><span class="string" id="7725188">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7725204">,</span>&nbsp;<span class="ident" id="7725206">input</span><span class="op" id="7725211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725220">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725266">checkNonLossyRoundtrip64</span><span class="op" id="7725290">(</span><span class="ident" id="7725291">t</span><span class="op" id="7725292">,</span>&nbsp;<span class="ident" id="7725294">f</span><span class="op" id="7725295">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725300">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725346">if</span>&nbsp;<span class="ident" id="7725349">wasExact</span>&nbsp;<span class="op" id="7725358">:=</span>&nbsp;<span class="builtinfunc" id="7725361">new</span><span class="op" id="7725364">(</span><span class="ident" id="7725365">Rat</span><span class="op" id="7725368">)</span><span class="op" id="7725369">.</span><span class="ident" id="7725370">SetFloat64</span><span class="op" id="7725380">(</span><span class="ident" id="7725381">f</span><span class="op" id="7725382">)</span><span class="op" id="7725383">.</span><span class="ident" id="7725384">Cmp</span><span class="op" id="7725387">(</span><span class="ident" id="7725388">r</span><span class="op" id="7725389">)</span>&nbsp;<span class="op" id="7725391">==</span>&nbsp;<span class="num" id="7725394">0</span><span class="op" id="7725395">;</span>&nbsp;<span class="ident" id="7725397">wasExact</span>&nbsp;<span class="op" id="7725406">!=</span>&nbsp;<span class="ident" id="7725409">exact</span>&nbsp;<span class="op" id="7725415">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725420">t</span><span class="op" id="7725421">.</span><span class="ident" id="7725422">Errorf</span><span class="op" id="7725428">(</span><span class="string" id="7725429">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7725478">,</span>&nbsp;<span class="ident" id="7725480">input</span><span class="op" id="7725485">,</span>&nbsp;<span class="ident" id="7725487">exact</span><span class="op" id="7725492">,</span>&nbsp;<span class="ident" id="7725494">wasExact</span><span class="op" id="7725502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725509">}</span><br>
<span class="lineno"></span><span class="op" id="7725511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7725514">func</span>&nbsp;<span class="ident" id="7725519">TestFloat32Distribution</span><span class="op" id="7725542">(</span><span class="ident" id="7725543">t</span>&nbsp;<span class="op" id="7725545">*</span><span class="ident" id="7725546">testing</span><span class="op" id="7725553">.</span><span class="ident" id="7725554">T</span><span class="op" id="7725555">)</span>&nbsp;<span class="op" id="7725557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725560">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725620">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725680">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725732">var</span>&nbsp;<span class="ident" id="7725736">add</span>&nbsp;<span class="op" id="7725740">=</span>&nbsp;<span class="op" id="7725742">[</span><span class="op" id="7725743">]</span><span class="ident" id="7725744">int64</span><span class="op" id="7725749">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7725753">0</span><span class="op" id="7725754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7725758">1</span><span class="op" id="7725759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7725763">3</span><span class="op" id="7725764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7725768">5</span><span class="op" id="7725769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7725773">7</span><span class="op" id="7725774">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7725778">9</span><span class="op" id="7725779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7725783">11</span><span class="op" id="7725785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725791">var</span>&nbsp;<span class="ident" id="7725795">winc</span><span class="op" id="7725799">,</span>&nbsp;<span class="ident" id="7725801">einc</span>&nbsp;<span class="op" id="7725806">=</span>&nbsp;<span class="ident" id="7725808">uint64</span><span class="op" id="7725814">(</span><span class="num" id="7725815">1</span><span class="op" id="7725816">)</span><span class="op" id="7725817">,</span>&nbsp;<span class="num" id="7725819">1</span>&nbsp;<span class="comment" id="7725821">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725853">if</span>&nbsp;<span class="ident" id="7725856">testing</span><span class="op" id="7725863">.</span><span class="ident" id="7725864">Short</span><span class="op" id="7725869">(</span><span class="op" id="7725870">)</span>&nbsp;<span class="op" id="7725872">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725876">winc</span><span class="op" id="7725880">,</span>&nbsp;<span class="ident" id="7725882">einc</span>&nbsp;<span class="op" id="7725887">=</span>&nbsp;<span class="num" id="7725889">5</span><span class="op" id="7725890">,</span>&nbsp;<span class="num" id="7725892">15</span>&nbsp;<span class="comment" id="7725895">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725932">for</span>&nbsp;<span class="ident" id="7725936">_</span><span class="op" id="7725937">,</span>&nbsp;<span class="ident" id="7725939">sign</span>&nbsp;<span class="op" id="7725944">:=</span>&nbsp;<span class="keyword" id="7725947">range</span>&nbsp;<span class="string" id="7725953">&#34;+-&#34;</span>&nbsp;<span class="op" id="7725958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725962">for</span>&nbsp;<span class="ident" id="7725966">_</span><span class="op" id="7725967">,</span>&nbsp;<span class="ident" id="7725969">a</span>&nbsp;<span class="op" id="7725971">:=</span>&nbsp;<span class="keyword" id="7725974">range</span>&nbsp;<span class="ident" id="7725980">add</span>&nbsp;<span class="op" id="7725984">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725989">for</span>&nbsp;<span class="ident" id="7725993">wid</span>&nbsp;<span class="op" id="7725997">:=</span>&nbsp;<span class="ident" id="7726000">uint64</span><span class="op" id="7726006">(</span><span class="num" id="7726007">0</span><span class="op" id="7726008">)</span><span class="op" id="7726009">;</span>&nbsp;<span class="ident" id="7726011">wid</span>&nbsp;<span class="op" id="7726015">&lt;</span>&nbsp;<span class="num" id="7726017">30</span><span class="op" id="7726019">;</span>&nbsp;<span class="ident" id="7726021">wid</span>&nbsp;<span class="op" id="7726025">+=</span>&nbsp;<span class="ident" id="7726028">winc</span>&nbsp;<span class="op" id="7726033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726039">b</span>&nbsp;<span class="op" id="7726041">:=</span>&nbsp;<span class="num" id="7726044">1</span><span class="op" id="7726045">&lt;&lt;</span><span class="ident" id="7726047">wid</span>&nbsp;<span class="op" id="7726051">+</span>&nbsp;<span class="ident" id="7726053">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726059">if</span>&nbsp;<span class="ident" id="7726062">sign</span>&nbsp;<span class="op" id="7726067">==</span>&nbsp;<span class="string" id="7726070">&#39;-&#39;</span>&nbsp;<span class="op" id="7726074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726081">b</span>&nbsp;<span class="op" id="7726083">=</span>&nbsp;<span class="op" id="7726085">-</span><span class="ident" id="7726086">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726092">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726098">for</span>&nbsp;<span class="ident" id="7726102">exp</span>&nbsp;<span class="op" id="7726106">:=</span>&nbsp;<span class="op" id="7726109">-</span><span class="num" id="7726110">150</span><span class="op" id="7726113">;</span>&nbsp;<span class="ident" id="7726115">exp</span>&nbsp;<span class="op" id="7726119">&lt;</span>&nbsp;<span class="num" id="7726121">150</span><span class="op" id="7726124">;</span>&nbsp;<span class="ident" id="7726126">exp</span>&nbsp;<span class="op" id="7726130">+=</span>&nbsp;<span class="ident" id="7726133">einc</span>&nbsp;<span class="op" id="7726138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726145">num</span><span class="op" id="7726148">,</span>&nbsp;<span class="ident" id="7726150">den</span>&nbsp;<span class="op" id="7726154">:=</span>&nbsp;<span class="ident" id="7726157">NewInt</span><span class="op" id="7726163">(</span><span class="ident" id="7726164">b</span><span class="op" id="7726165">)</span><span class="op" id="7726166">,</span>&nbsp;<span class="ident" id="7726168">NewInt</span><span class="op" id="7726174">(</span><span class="num" id="7726175">1</span><span class="op" id="7726176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726183">if</span>&nbsp;<span class="ident" id="7726186">exp</span>&nbsp;<span class="op" id="7726190">&gt;</span>&nbsp;<span class="num" id="7726192">0</span>&nbsp;<span class="op" id="7726194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726202">num</span><span class="op" id="7726205">.</span><span class="ident" id="7726206">Lsh</span><span class="op" id="7726209">(</span><span class="ident" id="7726210">num</span><span class="op" id="7726213">,</span>&nbsp;<span class="builtintype" id="7726215">uint</span><span class="op" id="7726219">(</span><span class="ident" id="7726220">exp</span><span class="op" id="7726223">)</span><span class="op" id="7726224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726231">}</span>&nbsp;<span class="keyword" id="7726233">else</span>&nbsp;<span class="op" id="7726238">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726246">den</span><span class="op" id="7726249">.</span><span class="ident" id="7726250">Lsh</span><span class="op" id="7726253">(</span><span class="ident" id="7726254">den</span><span class="op" id="7726257">,</span>&nbsp;<span class="builtintype" id="7726259">uint</span><span class="op" id="7726263">(</span><span class="op" id="7726264">-</span><span class="ident" id="7726265">exp</span><span class="op" id="7726268">)</span><span class="op" id="7726269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726283">r</span>&nbsp;<span class="op" id="7726285">:=</span>&nbsp;<span class="builtinfunc" id="7726288">new</span><span class="op" id="7726291">(</span><span class="ident" id="7726292">Rat</span><span class="op" id="7726295">)</span><span class="op" id="7726296">.</span><span class="ident" id="7726297">SetFrac</span><span class="op" id="7726304">(</span><span class="ident" id="7726305">num</span><span class="op" id="7726308">,</span>&nbsp;<span class="ident" id="7726310">den</span><span class="op" id="7726313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726320">f</span><span class="op" id="7726321">,</span>&nbsp;<span class="ident" id="7726323">_</span>&nbsp;<span class="op" id="7726325">:=</span>&nbsp;<span class="ident" id="7726328">r</span><span class="op" id="7726329">.</span><span class="ident" id="7726330">Float32</span><span class="op" id="7726337">(</span><span class="op" id="7726338">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726346">if</span>&nbsp;<span class="op" id="7726349">!</span><span class="ident" id="7726350">checkIsBestApprox32</span><span class="op" id="7726369">(</span><span class="ident" id="7726370">t</span><span class="op" id="7726371">,</span>&nbsp;<span class="ident" id="7726373">f</span><span class="op" id="7726374">,</span>&nbsp;<span class="ident" id="7726376">r</span><span class="op" id="7726377">)</span>&nbsp;<span class="op" id="7726379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7726387">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726424">t</span><span class="op" id="7726425">.</span><span class="ident" id="7726426">Errorf</span><span class="op" id="7726432">(</span><span class="string" id="7726433">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7726496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726505">b</span><span class="op" id="7726506">,</span>&nbsp;<span class="ident" id="7726508">exp</span><span class="op" id="7726511">,</span>&nbsp;<span class="ident" id="7726513">f</span><span class="op" id="7726514">,</span>&nbsp;<span class="ident" id="7726516">f</span><span class="op" id="7726517">,</span>&nbsp;<span class="ident" id="7726519">math</span><span class="op" id="7726523">.</span><span class="ident" id="7726524">Ldexp</span><span class="op" id="7726529">(</span><span class="builtintype" id="7726530">float64</span><span class="op" id="7726537">(</span><span class="ident" id="7726538">b</span><span class="op" id="7726539">)</span><span class="op" id="7726540">,</span>&nbsp;<span class="ident" id="7726542">exp</span><span class="op" id="7726545">)</span><span class="op" id="7726546">,</span>&nbsp;<span class="ident" id="7726548">r</span><span class="op" id="7726549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726556">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726564">checkNonLossyRoundtrip32</span><span class="op" id="7726588">(</span><span class="ident" id="7726589">t</span><span class="op" id="7726590">,</span>&nbsp;<span class="ident" id="7726592">f</span><span class="op" id="7726593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726608">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726611">}</span><br>
<span class="lineno"></span><span class="op" id="7726613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7726616">func</span>&nbsp;<span class="ident" id="7726621">TestFloat64Distribution</span><span class="op" id="7726644">(</span><span class="ident" id="7726645">t</span>&nbsp;<span class="op" id="7726647">*</span><span class="ident" id="7726648">testing</span><span class="op" id="7726655">.</span><span class="ident" id="7726656">T</span><span class="op" id="7726657">)</span>&nbsp;<span class="op" id="7726659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7726662">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7726722">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7726782">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726834">var</span>&nbsp;<span class="ident" id="7726838">add</span>&nbsp;<span class="op" id="7726842">=</span>&nbsp;<span class="op" id="7726844">[</span><span class="op" id="7726845">]</span><span class="ident" id="7726846">int64</span><span class="op" id="7726851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7726855">0</span><span class="op" id="7726856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7726860">1</span><span class="op" id="7726861">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7726865">3</span><span class="op" id="7726866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7726870">5</span><span class="op" id="7726871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7726875">7</span><span class="op" id="7726876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7726880">9</span><span class="op" id="7726881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7726885">11</span><span class="op" id="7726887">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726893">var</span>&nbsp;<span class="ident" id="7726897">winc</span><span class="op" id="7726901">,</span>&nbsp;<span class="ident" id="7726903">einc</span>&nbsp;<span class="op" id="7726908">=</span>&nbsp;<span class="ident" id="7726910">uint64</span><span class="op" id="7726916">(</span><span class="num" id="7726917">1</span><span class="op" id="7726918">)</span><span class="op" id="7726919">,</span>&nbsp;<span class="num" id="7726921">1</span>&nbsp;<span class="comment" id="7726923">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726954">if</span>&nbsp;<span class="ident" id="7726957">testing</span><span class="op" id="7726964">.</span><span class="ident" id="7726965">Short</span><span class="op" id="7726970">(</span><span class="op" id="7726971">)</span>&nbsp;<span class="op" id="7726973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726977">winc</span><span class="op" id="7726981">,</span>&nbsp;<span class="ident" id="7726983">einc</span>&nbsp;<span class="op" id="7726988">=</span>&nbsp;<span class="num" id="7726990">10</span><span class="op" id="7726992">,</span>&nbsp;<span class="num" id="7726994">500</span>&nbsp;<span class="comment" id="7726998">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727031">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727035">for</span>&nbsp;<span class="ident" id="7727039">_</span><span class="op" id="7727040">,</span>&nbsp;<span class="ident" id="7727042">sign</span>&nbsp;<span class="op" id="7727047">:=</span>&nbsp;<span class="keyword" id="7727050">range</span>&nbsp;<span class="string" id="7727056">&#34;+-&#34;</span>&nbsp;<span class="op" id="7727061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727065">for</span>&nbsp;<span class="ident" id="7727069">_</span><span class="op" id="7727070">,</span>&nbsp;<span class="ident" id="7727072">a</span>&nbsp;<span class="op" id="7727074">:=</span>&nbsp;<span class="keyword" id="7727077">range</span>&nbsp;<span class="ident" id="7727083">add</span>&nbsp;<span class="op" id="7727087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727092">for</span>&nbsp;<span class="ident" id="7727096">wid</span>&nbsp;<span class="op" id="7727100">:=</span>&nbsp;<span class="ident" id="7727103">uint64</span><span class="op" id="7727109">(</span><span class="num" id="7727110">0</span><span class="op" id="7727111">)</span><span class="op" id="7727112">;</span>&nbsp;<span class="ident" id="7727114">wid</span>&nbsp;<span class="op" id="7727118">&lt;</span>&nbsp;<span class="num" id="7727120">60</span><span class="op" id="7727122">;</span>&nbsp;<span class="ident" id="7727124">wid</span>&nbsp;<span class="op" id="7727128">+=</span>&nbsp;<span class="ident" id="7727131">winc</span>&nbsp;<span class="op" id="7727136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727142">b</span>&nbsp;<span class="op" id="7727144">:=</span>&nbsp;<span class="num" id="7727147">1</span><span class="op" id="7727148">&lt;&lt;</span><span class="ident" id="7727150">wid</span>&nbsp;<span class="op" id="7727154">+</span>&nbsp;<span class="ident" id="7727156">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727162">if</span>&nbsp;<span class="ident" id="7727165">sign</span>&nbsp;<span class="op" id="7727170">==</span>&nbsp;<span class="string" id="7727173">&#39;-&#39;</span>&nbsp;<span class="op" id="7727177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727184">b</span>&nbsp;<span class="op" id="7727186">=</span>&nbsp;<span class="op" id="7727188">-</span><span class="ident" id="7727189">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727201">for</span>&nbsp;<span class="ident" id="7727205">exp</span>&nbsp;<span class="op" id="7727209">:=</span>&nbsp;<span class="op" id="7727212">-</span><span class="num" id="7727213">1100</span><span class="op" id="7727217">;</span>&nbsp;<span class="ident" id="7727219">exp</span>&nbsp;<span class="op" id="7727223">&lt;</span>&nbsp;<span class="num" id="7727225">1100</span><span class="op" id="7727229">;</span>&nbsp;<span class="ident" id="7727231">exp</span>&nbsp;<span class="op" id="7727235">+=</span>&nbsp;<span class="ident" id="7727238">einc</span>&nbsp;<span class="op" id="7727243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727250">num</span><span class="op" id="7727253">,</span>&nbsp;<span class="ident" id="7727255">den</span>&nbsp;<span class="op" id="7727259">:=</span>&nbsp;<span class="ident" id="7727262">NewInt</span><span class="op" id="7727268">(</span><span class="ident" id="7727269">b</span><span class="op" id="7727270">)</span><span class="op" id="7727271">,</span>&nbsp;<span class="ident" id="7727273">NewInt</span><span class="op" id="7727279">(</span><span class="num" id="7727280">1</span><span class="op" id="7727281">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727288">if</span>&nbsp;<span class="ident" id="7727291">exp</span>&nbsp;<span class="op" id="7727295">&gt;</span>&nbsp;<span class="num" id="7727297">0</span>&nbsp;<span class="op" id="7727299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727307">num</span><span class="op" id="7727310">.</span><span class="ident" id="7727311">Lsh</span><span class="op" id="7727314">(</span><span class="ident" id="7727315">num</span><span class="op" id="7727318">,</span>&nbsp;<span class="builtintype" id="7727320">uint</span><span class="op" id="7727324">(</span><span class="ident" id="7727325">exp</span><span class="op" id="7727328">)</span><span class="op" id="7727329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727336">}</span>&nbsp;<span class="keyword" id="7727338">else</span>&nbsp;<span class="op" id="7727343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727351">den</span><span class="op" id="7727354">.</span><span class="ident" id="7727355">Lsh</span><span class="op" id="7727358">(</span><span class="ident" id="7727359">den</span><span class="op" id="7727362">,</span>&nbsp;<span class="builtintype" id="7727364">uint</span><span class="op" id="7727368">(</span><span class="op" id="7727369">-</span><span class="ident" id="7727370">exp</span><span class="op" id="7727373">)</span><span class="op" id="7727374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727381">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727388">r</span>&nbsp;<span class="op" id="7727390">:=</span>&nbsp;<span class="builtinfunc" id="7727393">new</span><span class="op" id="7727396">(</span><span class="ident" id="7727397">Rat</span><span class="op" id="7727400">)</span><span class="op" id="7727401">.</span><span class="ident" id="7727402">SetFrac</span><span class="op" id="7727409">(</span><span class="ident" id="7727410">num</span><span class="op" id="7727413">,</span>&nbsp;<span class="ident" id="7727415">den</span><span class="op" id="7727418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727425">f</span><span class="op" id="7727426">,</span>&nbsp;<span class="ident" id="7727428">_</span>&nbsp;<span class="op" id="7727430">:=</span>&nbsp;<span class="ident" id="7727433">r</span><span class="op" id="7727434">.</span><span class="ident" id="7727435">Float64</span><span class="op" id="7727442">(</span><span class="op" id="7727443">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727451">if</span>&nbsp;<span class="op" id="7727454">!</span><span class="ident" id="7727455">checkIsBestApprox64</span><span class="op" id="7727474">(</span><span class="ident" id="7727475">t</span><span class="op" id="7727476">,</span>&nbsp;<span class="ident" id="7727478">f</span><span class="op" id="7727479">,</span>&nbsp;<span class="ident" id="7727481">r</span><span class="op" id="7727482">)</span>&nbsp;<span class="op" id="7727484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7727492">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727529">t</span><span class="op" id="7727530">.</span><span class="ident" id="7727531">Errorf</span><span class="op" id="7727537">(</span><span class="string" id="7727538">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7727601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727610">b</span><span class="op" id="7727611">,</span>&nbsp;<span class="ident" id="7727613">exp</span><span class="op" id="7727616">,</span>&nbsp;<span class="ident" id="7727618">f</span><span class="op" id="7727619">,</span>&nbsp;<span class="ident" id="7727621">f</span><span class="op" id="7727622">,</span>&nbsp;<span class="ident" id="7727624">math</span><span class="op" id="7727628">.</span><span class="ident" id="7727629">Ldexp</span><span class="op" id="7727634">(</span><span class="builtintype" id="7727635">float64</span><span class="op" id="7727642">(</span><span class="ident" id="7727643">b</span><span class="op" id="7727644">)</span><span class="op" id="7727645">,</span>&nbsp;<span class="ident" id="7727647">exp</span><span class="op" id="7727650">)</span><span class="op" id="7727651">,</span>&nbsp;<span class="ident" id="7727653">r</span><span class="op" id="7727654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727669">checkNonLossyRoundtrip64</span><span class="op" id="7727693">(</span><span class="ident" id="7727694">t</span><span class="op" id="7727695">,</span>&nbsp;<span class="ident" id="7727697">f</span><span class="op" id="7727698">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727716">}</span><br>
<span class="lineno"></span><span class="op" id="7727718">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7727721">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7727793">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7727809">func</span>&nbsp;<span class="ident" id="7727814">TestSetFloat64NonFinite</span><span class="op" id="7727837">(</span><span class="ident" id="7727838">t</span>&nbsp;<span class="op" id="7727840">*</span><span class="ident" id="7727841">testing</span><span class="op" id="7727848">.</span><span class="ident" id="7727849">T</span><span class="op" id="7727850">)</span>&nbsp;<span class="op" id="7727852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727855">for</span>&nbsp;<span class="ident" id="7727859">_</span><span class="op" id="7727860">,</span>&nbsp;<span class="ident" id="7727862">f</span>&nbsp;<span class="op" id="7727864">:=</span>&nbsp;<span class="keyword" id="7727867">range</span>&nbsp;<span class="op" id="7727873">[</span><span class="op" id="7727874">]</span><span class="builtintype" id="7727875">float64</span><span class="op" id="7727882">{</span><span class="ident" id="7727883">math</span><span class="op" id="7727887">.</span><span class="ident" id="7727888">NaN</span><span class="op" id="7727891">(</span><span class="op" id="7727892">)</span><span class="op" id="7727893">,</span>&nbsp;<span class="ident" id="7727895">math</span><span class="op" id="7727899">.</span><span class="ident" id="7727900">Inf</span><span class="op" id="7727903">(</span><span class="op" id="7727904">+</span><span class="num" id="7727905">1</span><span class="op" id="7727906">)</span><span class="op" id="7727907">,</span>&nbsp;<span class="ident" id="7727909">math</span><span class="op" id="7727913">.</span><span class="ident" id="7727914">Inf</span><span class="op" id="7727917">(</span><span class="op" id="7727918">-</span><span class="num" id="7727919">1</span><span class="op" id="7727920">)</span><span class="op" id="7727921">}</span>&nbsp;<span class="op" id="7727923">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727927">var</span>&nbsp;<span class="ident" id="7727931">r</span>&nbsp;<span class="ident" id="7727933">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727939">if</span>&nbsp;<span class="ident" id="7727942">r2</span>&nbsp;<span class="op" id="7727945">:=</span>&nbsp;<span class="ident" id="7727948">r</span><span class="op" id="7727949">.</span><span class="ident" id="7727950">SetFloat64</span><span class="op" id="7727960">(</span><span class="ident" id="7727961">f</span><span class="op" id="7727962">)</span><span class="op" id="7727963">;</span>&nbsp;<span class="ident" id="7727965">r2</span>&nbsp;<span class="op" id="7727968">!=</span>&nbsp;<span class="ident" id="7727971">nil</span>&nbsp;<span class="op" id="7727975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727980">t</span><span class="op" id="7727981">.</span><span class="ident" id="7727982">Errorf</span><span class="op" id="7727988">(</span><span class="string" id="7727989">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7728022">,</span>&nbsp;<span class="ident" id="7728024">f</span><span class="op" id="7728025">,</span>&nbsp;<span class="ident" id="7728027">r2</span><span class="op" id="7728029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728036">}</span><br>
<span class="lineno">1015</span><span class="op" id="7728038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7728041">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7728114">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7728141">func</span>&nbsp;<span class="ident" id="7728146">checkNonLossyRoundtrip32</span><span class="op" id="7728170">(</span><span class="ident" id="7728171">t</span>&nbsp;<span class="op" id="7728173">*</span><span class="ident" id="7728174">testing</span><span class="op" id="7728181">.</span><span class="ident" id="7728182">T</span><span class="op" id="7728183">,</span>&nbsp;<span class="ident" id="7728185">f</span>&nbsp;<span class="builtintype" id="7728187">float32</span><span class="op" id="7728194">)</span>&nbsp;<span class="op" id="7728196">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728199">if</span>&nbsp;<span class="op" id="7728202">!</span><span class="ident" id="7728203">isFinite</span><span class="op" id="7728211">(</span><span class="builtintype" id="7728212">float64</span><span class="op" id="7728219">(</span><span class="ident" id="7728220">f</span><span class="op" id="7728221">)</span><span class="op" id="7728222">)</span>&nbsp;<span class="op" id="7728224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728228">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728239">r</span>&nbsp;<span class="op" id="7728241">:=</span>&nbsp;<span class="builtinfunc" id="7728244">new</span><span class="op" id="7728247">(</span><span class="ident" id="7728248">Rat</span><span class="op" id="7728251">)</span><span class="op" id="7728252">.</span><span class="ident" id="7728253">SetFloat64</span><span class="op" id="7728263">(</span><span class="builtintype" id="7728264">float64</span><span class="op" id="7728271">(</span><span class="ident" id="7728272">f</span><span class="op" id="7728273">)</span><span class="op" id="7728274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728277">if</span>&nbsp;<span class="ident" id="7728280">r</span>&nbsp;<span class="op" id="7728282">==</span>&nbsp;<span class="ident" id="7728285">nil</span>&nbsp;<span class="op" id="7728289">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728293">t</span><span class="op" id="7728294">.</span><span class="ident" id="7728295">Errorf</span><span class="op" id="7728301">(</span><span class="string" id="7728302">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7728343">,</span>&nbsp;<span class="ident" id="7728345">f</span><span class="op" id="7728346">,</span>&nbsp;<span class="ident" id="7728348">f</span><span class="op" id="7728349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728353">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728364">f2</span><span class="op" id="7728366">,</span>&nbsp;<span class="ident" id="7728368">exact</span>&nbsp;<span class="op" id="7728374">:=</span>&nbsp;<span class="ident" id="7728377">r</span><span class="op" id="7728378">.</span><span class="ident" id="7728379">Float32</span><span class="op" id="7728386">(</span><span class="op" id="7728387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728390">if</span>&nbsp;<span class="ident" id="7728393">f</span>&nbsp;<span class="op" id="7728395">!=</span>&nbsp;<span class="ident" id="7728398">f2</span>&nbsp;<span class="op" id="7728401">||</span>&nbsp;<span class="op" id="7728404">!</span><span class="ident" id="7728405">exact</span>&nbsp;<span class="op" id="7728411">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728415">t</span><span class="op" id="7728416">.</span><span class="ident" id="7728417">Errorf</span><span class="op" id="7728423">(</span><span class="string" id="7728424">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7728507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728512">f</span><span class="op" id="7728513">,</span>&nbsp;<span class="ident" id="7728515">f2</span><span class="op" id="7728517">,</span>&nbsp;<span class="ident" id="7728519">f2</span><span class="op" id="7728521">,</span>&nbsp;<span class="ident" id="7728523">exact</span><span class="op" id="7728528">,</span>&nbsp;<span class="ident" id="7728530">f</span><span class="op" id="7728531">,</span>&nbsp;<span class="ident" id="7728533">f</span><span class="op" id="7728534">,</span>&nbsp;<span class="builtintype" id="7728536">true</span><span class="op" id="7728540">,</span>&nbsp;<span class="ident" id="7728542">f2</span><span class="op" id="7728544">-</span><span class="ident" id="7728545">f</span><span class="op" id="7728546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728549">}</span><br>
<span class="lineno"></span><span class="op" id="7728551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7728554">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7728627">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7728654">func</span>&nbsp;<span class="ident" id="7728659">checkNonLossyRoundtrip64</span><span class="op" id="7728683">(</span><span class="ident" id="7728684">t</span>&nbsp;<span class="op" id="7728686">*</span><span class="ident" id="7728687">testing</span><span class="op" id="7728694">.</span><span class="ident" id="7728695">T</span><span class="op" id="7728696">,</span>&nbsp;<span class="ident" id="7728698">f</span>&nbsp;<span class="builtintype" id="7728700">float64</span><span class="op" id="7728707">)</span>&nbsp;<span class="op" id="7728709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728712">if</span>&nbsp;<span class="op" id="7728715">!</span><span class="ident" id="7728716">isFinite</span><span class="op" id="7728724">(</span><span class="ident" id="7728725">f</span><span class="op" id="7728726">)</span>&nbsp;<span class="op" id="7728728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728732">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728743">r</span>&nbsp;<span class="op" id="7728745">:=</span>&nbsp;<span class="builtinfunc" id="7728748">new</span><span class="op" id="7728751">(</span><span class="ident" id="7728752">Rat</span><span class="op" id="7728755">)</span><span class="op" id="7728756">.</span><span class="ident" id="7728757">SetFloat64</span><span class="op" id="7728767">(</span><span class="ident" id="7728768">f</span><span class="op" id="7728769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728772">if</span>&nbsp;<span class="ident" id="7728775">r</span>&nbsp;<span class="op" id="7728777">==</span>&nbsp;<span class="ident" id="7728780">nil</span>&nbsp;<span class="op" id="7728784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728788">t</span><span class="op" id="7728789">.</span><span class="ident" id="7728790">Errorf</span><span class="op" id="7728796">(</span><span class="string" id="7728797">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7728829">,</span>&nbsp;<span class="ident" id="7728831">f</span><span class="op" id="7728832">,</span>&nbsp;<span class="ident" id="7728834">f</span><span class="op" id="7728835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728839">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728850">f2</span><span class="op" id="7728852">,</span>&nbsp;<span class="ident" id="7728854">exact</span>&nbsp;<span class="op" id="7728860">:=</span>&nbsp;<span class="ident" id="7728863">r</span><span class="op" id="7728864">.</span><span class="ident" id="7728865">Float64</span><span class="op" id="7728872">(</span><span class="op" id="7728873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728876">if</span>&nbsp;<span class="ident" id="7728879">f</span>&nbsp;<span class="op" id="7728881">!=</span>&nbsp;<span class="ident" id="7728884">f2</span>&nbsp;<span class="op" id="7728887">||</span>&nbsp;<span class="op" id="7728890">!</span><span class="ident" id="7728891">exact</span>&nbsp;<span class="op" id="7728897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728901">t</span><span class="op" id="7728902">.</span><span class="ident" id="7728903">Errorf</span><span class="op" id="7728909">(</span><span class="string" id="7728910">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7728984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728989">f</span><span class="op" id="7728990">,</span>&nbsp;<span class="ident" id="7728992">f2</span><span class="op" id="7728994">,</span>&nbsp;<span class="ident" id="7728996">f2</span><span class="op" id="7728998">,</span>&nbsp;<span class="ident" id="7729000">exact</span><span class="op" id="7729005">,</span>&nbsp;<span class="ident" id="7729007">f</span><span class="op" id="7729008">,</span>&nbsp;<span class="ident" id="7729010">f</span><span class="op" id="7729011">,</span>&nbsp;<span class="builtintype" id="7729013">true</span><span class="op" id="7729017">,</span>&nbsp;<span class="ident" id="7729019">f2</span><span class="op" id="7729021">-</span><span class="ident" id="7729022">f</span><span class="op" id="7729023">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729026">}</span><br>
<span class="lineno"></span><span class="op" id="7729028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7729031">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7729089">func</span>&nbsp;<span class="ident" id="7729094">delta</span><span class="op" id="7729099">(</span><span class="ident" id="7729100">r</span>&nbsp;<span class="op" id="7729102">*</span><span class="ident" id="7729103">Rat</span><span class="op" id="7729106">,</span>&nbsp;<span class="ident" id="7729108">f</span>&nbsp;<span class="builtintype" id="7729110">float64</span><span class="op" id="7729117">)</span>&nbsp;<span class="op" id="7729119">*</span><span class="ident" id="7729120">Rat</span>&nbsp;<span class="op" id="7729124">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729127">d</span>&nbsp;<span class="op" id="7729129">:=</span>&nbsp;<span class="builtinfunc" id="7729132">new</span><span class="op" id="7729135">(</span><span class="ident" id="7729136">Rat</span><span class="op" id="7729139">)</span><span class="op" id="7729140">.</span><span class="ident" id="7729141">Sub</span><span class="op" id="7729144">(</span><span class="ident" id="7729145">r</span><span class="op" id="7729146">,</span>&nbsp;<span class="builtinfunc" id="7729148">new</span><span class="op" id="7729151">(</span><span class="ident" id="7729152">Rat</span><span class="op" id="7729155">)</span><span class="op" id="7729156">.</span><span class="ident" id="7729157">SetFloat64</span><span class="op" id="7729167">(</span><span class="ident" id="7729168">f</span><span class="op" id="7729169">)</span><span class="op" id="7729170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729173">return</span>&nbsp;<span class="ident" id="7729180">d</span><span class="op" id="7729181">.</span><span class="ident" id="7729182">Abs</span><span class="op" id="7729185">(</span><span class="ident" id="7729186">d</span><span class="op" id="7729187">)</span><br>
<span class="lineno"></span><span class="op" id="7729189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7729192">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7729258">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7729281">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7729309">func</span>&nbsp;<span class="ident" id="7729314">checkIsBestApprox32</span><span class="op" id="7729333">(</span><span class="ident" id="7729334">t</span>&nbsp;<span class="op" id="7729336">*</span><span class="ident" id="7729337">testing</span><span class="op" id="7729344">.</span><span class="ident" id="7729345">T</span><span class="op" id="7729346">,</span>&nbsp;<span class="ident" id="7729348">f</span>&nbsp;<span class="builtintype" id="7729350">float32</span><span class="op" id="7729357">,</span>&nbsp;<span class="ident" id="7729359">r</span>&nbsp;<span class="op" id="7729361">*</span><span class="ident" id="7729362">Rat</span><span class="op" id="7729365">)</span>&nbsp;<span class="builtintype" id="7729367">bool</span>&nbsp;<span class="op" id="7729372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729375">if</span>&nbsp;<span class="ident" id="7729378">math</span><span class="op" id="7729382">.</span><span class="ident" id="7729383">Abs</span><span class="op" id="7729386">(</span><span class="builtintype" id="7729387">float64</span><span class="op" id="7729394">(</span><span class="ident" id="7729395">f</span><span class="op" id="7729396">)</span><span class="op" id="7729397">)</span>&nbsp;<span class="op" id="7729399">&gt;=</span>&nbsp;<span class="ident" id="7729402">math</span><span class="op" id="7729406">.</span><span class="ident" id="7729407">MaxFloat32</span>&nbsp;<span class="op" id="7729418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7729422">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7729493">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729541">return</span>&nbsp;<span class="builtintype" id="7729548">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7729558">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729625">f0</span>&nbsp;<span class="op" id="7729628">:=</span>&nbsp;<span class="ident" id="7729631">math</span><span class="op" id="7729635">.</span><span class="ident" id="7729636">Nextafter32</span><span class="op" id="7729647">(</span><span class="ident" id="7729648">f</span><span class="op" id="7729649">,</span>&nbsp;<span class="builtintype" id="7729651">float32</span><span class="op" id="7729658">(</span><span class="ident" id="7729659">math</span><span class="op" id="7729663">.</span><span class="ident" id="7729664">Inf</span><span class="op" id="7729667">(</span><span class="op" id="7729668">-</span><span class="num" id="7729669">1</span><span class="op" id="7729670">)</span><span class="op" id="7729671">)</span><span class="op" id="7729672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729675">f1</span>&nbsp;<span class="op" id="7729678">:=</span>&nbsp;<span class="ident" id="7729681">math</span><span class="op" id="7729685">.</span><span class="ident" id="7729686">Nextafter32</span><span class="op" id="7729697">(</span><span class="ident" id="7729698">f</span><span class="op" id="7729699">,</span>&nbsp;<span class="builtintype" id="7729701">float32</span><span class="op" id="7729708">(</span><span class="ident" id="7729709">math</span><span class="op" id="7729713">.</span><span class="ident" id="7729714">Inf</span><span class="op" id="7729717">(</span><span class="op" id="7729718">+</span><span class="num" id="7729719">1</span><span class="op" id="7729720">)</span><span class="op" id="7729721">)</span><span class="op" id="7729722">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7729726">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729791">df</span>&nbsp;<span class="op" id="7729794">:=</span>&nbsp;<span class="ident" id="7729797">delta</span><span class="op" id="7729802">(</span><span class="ident" id="7729803">r</span><span class="op" id="7729804">,</span>&nbsp;<span class="builtintype" id="7729806">float64</span><span class="op" id="7729813">(</span><span class="ident" id="7729814">f</span><span class="op" id="7729815">)</span><span class="op" id="7729816">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729819">df0</span>&nbsp;<span class="op" id="7729823">:=</span>&nbsp;<span class="ident" id="7729826">delta</span><span class="op" id="7729831">(</span><span class="ident" id="7729832">r</span><span class="op" id="7729833">,</span>&nbsp;<span class="builtintype" id="7729835">float64</span><span class="op" id="7729842">(</span><span class="ident" id="7729843">f0</span><span class="op" id="7729845">)</span><span class="op" id="7729846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729849">df1</span>&nbsp;<span class="op" id="7729853">:=</span>&nbsp;<span class="ident" id="7729856">delta</span><span class="op" id="7729861">(</span><span class="ident" id="7729862">r</span><span class="op" id="7729863">,</span>&nbsp;<span class="builtintype" id="7729865">float64</span><span class="op" id="7729872">(</span><span class="ident" id="7729873">f1</span><span class="op" id="7729875">)</span><span class="op" id="7729876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729879">if</span>&nbsp;<span class="ident" id="7729882">df</span><span class="op" id="7729884">.</span><span class="ident" id="7729885">Cmp</span><span class="op" id="7729888">(</span><span class="ident" id="7729889">df0</span><span class="op" id="7729892">)</span>&nbsp;<span class="op" id="7729894">&gt;</span>&nbsp;<span class="num" id="7729896">0</span>&nbsp;<span class="op" id="7729898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729902">t</span><span class="op" id="7729903">.</span><span class="ident" id="7729904">Errorf</span><span class="op" id="7729910">(</span><span class="string" id="7729911">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7729980">,</span>&nbsp;<span class="ident" id="7729982">r</span><span class="op" id="7729983">,</span>&nbsp;<span class="ident" id="7729985">f</span><span class="op" id="7729986">,</span>&nbsp;<span class="ident" id="7729988">f</span><span class="op" id="7729989">,</span>&nbsp;<span class="ident" id="7729991">f0</span><span class="op" id="7729993">,</span>&nbsp;<span class="ident" id="7729995">f0</span><span class="op" id="7729997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730001">return</span>&nbsp;<span class="builtintype" id="7730008">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730018">if</span>&nbsp;<span class="ident" id="7730021">df</span><span class="op" id="7730023">.</span><span class="ident" id="7730024">Cmp</span><span class="op" id="7730027">(</span><span class="ident" id="7730028">df1</span><span class="op" id="7730031">)</span>&nbsp;<span class="op" id="7730033">&gt;</span>&nbsp;<span class="num" id="7730035">0</span>&nbsp;<span class="op" id="7730037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730041">t</span><span class="op" id="7730042">.</span><span class="ident" id="7730043">Errorf</span><span class="op" id="7730049">(</span><span class="string" id="7730050">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7730115">,</span>&nbsp;<span class="ident" id="7730117">r</span><span class="op" id="7730118">,</span>&nbsp;<span class="ident" id="7730120">f</span><span class="op" id="7730121">,</span>&nbsp;<span class="ident" id="7730123">f</span><span class="op" id="7730124">,</span>&nbsp;<span class="ident" id="7730126">f1</span><span class="op" id="7730128">,</span>&nbsp;<span class="ident" id="7730130">f1</span><span class="op" id="7730132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730136">return</span>&nbsp;<span class="builtintype" id="7730143">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730150">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730153">if</span>&nbsp;<span class="ident" id="7730156">df</span><span class="op" id="7730158">.</span><span class="ident" id="7730159">Cmp</span><span class="op" id="7730162">(</span><span class="ident" id="7730163">df0</span><span class="op" id="7730166">)</span>&nbsp;<span class="op" id="7730168">==</span>&nbsp;<span class="num" id="7730171">0</span>&nbsp;<span class="op" id="7730173">&amp;&amp;</span>&nbsp;<span class="op" id="7730176">!</span><span class="ident" id="7730177">isEven32</span><span class="op" id="7730185">(</span><span class="ident" id="7730186">f</span><span class="op" id="7730187">)</span>&nbsp;<span class="op" id="7730189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730193">t</span><span class="op" id="7730194">.</span><span class="ident" id="7730195">Errorf</span><span class="op" id="7730201">(</span><span class="string" id="7730202">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7730279">,</span>&nbsp;<span class="ident" id="7730281">r</span><span class="op" id="7730282">,</span>&nbsp;<span class="ident" id="7730284">f</span><span class="op" id="7730285">,</span>&nbsp;<span class="ident" id="7730287">f</span><span class="op" id="7730288">,</span>&nbsp;<span class="ident" id="7730290">f0</span><span class="op" id="7730292">,</span>&nbsp;<span class="ident" id="7730294">f0</span><span class="op" id="7730296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730300">return</span>&nbsp;<span class="builtintype" id="7730307">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730317">if</span>&nbsp;<span class="ident" id="7730320">df</span><span class="op" id="7730322">.</span><span class="ident" id="7730323">Cmp</span><span class="op" id="7730326">(</span><span class="ident" id="7730327">df1</span><span class="op" id="7730330">)</span>&nbsp;<span class="op" id="7730332">==</span>&nbsp;<span class="num" id="7730335">0</span>&nbsp;<span class="op" id="7730337">&amp;&amp;</span>&nbsp;<span class="op" id="7730340">!</span><span class="ident" id="7730341">isEven32</span><span class="op" id="7730349">(</span><span class="ident" id="7730350">f</span><span class="op" id="7730351">)</span>&nbsp;<span class="op" id="7730353">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730357">t</span><span class="op" id="7730358">.</span><span class="ident" id="7730359">Errorf</span><span class="op" id="7730365">(</span><span class="string" id="7730366">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7730443">,</span>&nbsp;<span class="ident" id="7730445">r</span><span class="op" id="7730446">,</span>&nbsp;<span class="ident" id="7730448">f</span><span class="op" id="7730449">,</span>&nbsp;<span class="ident" id="7730451">f</span><span class="op" id="7730452">,</span>&nbsp;<span class="ident" id="7730454">f1</span><span class="op" id="7730456">,</span>&nbsp;<span class="ident" id="7730458">f1</span><span class="op" id="7730460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730464">return</span>&nbsp;<span class="builtintype" id="7730471">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730481">return</span>&nbsp;<span class="builtintype" id="7730488">true</span><br>
<span class="lineno"></span><span class="op" id="7730493">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7730496">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7730562">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7730585">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7730613">func</span>&nbsp;<span class="ident" id="7730618">checkIsBestApprox64</span><span class="op" id="7730637">(</span><span class="ident" id="7730638">t</span>&nbsp;<span class="op" id="7730640">*</span><span class="ident" id="7730641">testing</span><span class="op" id="7730648">.</span><span class="ident" id="7730649">T</span><span class="op" id="7730650">,</span>&nbsp;<span class="ident" id="7730652">f</span>&nbsp;<span class="builtintype" id="7730654">float64</span><span class="op" id="7730661">,</span>&nbsp;<span class="ident" id="7730663">r</span>&nbsp;<span class="op" id="7730665">*</span><span class="ident" id="7730666">Rat</span><span class="op" id="7730669">)</span>&nbsp;<span class="builtintype" id="7730671">bool</span>&nbsp;<span class="op" id="7730676">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730679">if</span>&nbsp;<span class="ident" id="7730682">math</span><span class="op" id="7730686">.</span><span class="ident" id="7730687">Abs</span><span class="op" id="7730690">(</span><span class="ident" id="7730691">f</span><span class="op" id="7730692">)</span>&nbsp;<span class="op" id="7730694">&gt;=</span>&nbsp;<span class="ident" id="7730697">math</span><span class="op" id="7730701">.</span><span class="ident" id="7730702">MaxFloat64</span>&nbsp;<span class="op" id="7730713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7730717">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7730788">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730836">return</span>&nbsp;<span class="builtintype" id="7730843">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730849">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7730853">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730920">f0</span>&nbsp;<span class="op" id="7730923">:=</span>&nbsp;<span class="ident" id="7730926">math</span><span class="op" id="7730930">.</span><span class="ident" id="7730931">Nextafter</span><span class="op" id="7730940">(</span><span class="ident" id="7730941">f</span><span class="op" id="7730942">,</span>&nbsp;<span class="ident" id="7730944">math</span><span class="op" id="7730948">.</span><span class="ident" id="7730949">Inf</span><span class="op" id="7730952">(</span><span class="op" id="7730953">-</span><span class="num" id="7730954">1</span><span class="op" id="7730955">)</span><span class="op" id="7730956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730959">f1</span>&nbsp;<span class="op" id="7730962">:=</span>&nbsp;<span class="ident" id="7730965">math</span><span class="op" id="7730969">.</span><span class="ident" id="7730970">Nextafter</span><span class="op" id="7730979">(</span><span class="ident" id="7730980">f</span><span class="op" id="7730981">,</span>&nbsp;<span class="ident" id="7730983">math</span><span class="op" id="7730987">.</span><span class="ident" id="7730988">Inf</span><span class="op" id="7730991">(</span><span class="op" id="7730992">+</span><span class="num" id="7730993">1</span><span class="op" id="7730994">)</span><span class="op" id="7730995">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7730999">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731064">df</span>&nbsp;<span class="op" id="7731067">:=</span>&nbsp;<span class="ident" id="7731070">delta</span><span class="op" id="7731075">(</span><span class="ident" id="7731076">r</span><span class="op" id="7731077">,</span>&nbsp;<span class="ident" id="7731079">f</span><span class="op" id="7731080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731083">df0</span>&nbsp;<span class="op" id="7731087">:=</span>&nbsp;<span class="ident" id="7731090">delta</span><span class="op" id="7731095">(</span><span class="ident" id="7731096">r</span><span class="op" id="7731097">,</span>&nbsp;<span class="ident" id="7731099">f0</span><span class="op" id="7731101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731104">df1</span>&nbsp;<span class="op" id="7731108">:=</span>&nbsp;<span class="ident" id="7731111">delta</span><span class="op" id="7731116">(</span><span class="ident" id="7731117">r</span><span class="op" id="7731118">,</span>&nbsp;<span class="ident" id="7731120">f1</span><span class="op" id="7731122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731125">if</span>&nbsp;<span class="ident" id="7731128">df</span><span class="op" id="7731130">.</span><span class="ident" id="7731131">Cmp</span><span class="op" id="7731134">(</span><span class="ident" id="7731135">df0</span><span class="op" id="7731138">)</span>&nbsp;<span class="op" id="7731140">&gt;</span>&nbsp;<span class="num" id="7731142">0</span>&nbsp;<span class="op" id="7731144">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731148">t</span><span class="op" id="7731149">.</span><span class="ident" id="7731150">Errorf</span><span class="op" id="7731156">(</span><span class="string" id="7731157">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7731226">,</span>&nbsp;<span class="ident" id="7731228">r</span><span class="op" id="7731229">,</span>&nbsp;<span class="ident" id="7731231">f</span><span class="op" id="7731232">,</span>&nbsp;<span class="ident" id="7731234">f</span><span class="op" id="7731235">,</span>&nbsp;<span class="ident" id="7731237">f0</span><span class="op" id="7731239">,</span>&nbsp;<span class="ident" id="7731241">f0</span><span class="op" id="7731243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731247">return</span>&nbsp;<span class="builtintype" id="7731254">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731264">if</span>&nbsp;<span class="ident" id="7731267">df</span><span class="op" id="7731269">.</span><span class="ident" id="7731270">Cmp</span><span class="op" id="7731273">(</span><span class="ident" id="7731274">df1</span><span class="op" id="7731277">)</span>&nbsp;<span class="op" id="7731279">&gt;</span>&nbsp;<span class="num" id="7731281">0</span>&nbsp;<span class="op" id="7731283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731287">t</span><span class="op" id="7731288">.</span><span class="ident" id="7731289">Errorf</span><span class="op" id="7731295">(</span><span class="string" id="7731296">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7731361">,</span>&nbsp;<span class="ident" id="7731363">r</span><span class="op" id="7731364">,</span>&nbsp;<span class="ident" id="7731366">f</span><span class="op" id="7731367">,</span>&nbsp;<span class="ident" id="7731369">f</span><span class="op" id="7731370">,</span>&nbsp;<span class="ident" id="7731372">f1</span><span class="op" id="7731374">,</span>&nbsp;<span class="ident" id="7731376">f1</span><span class="op" id="7731378">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731382">return</span>&nbsp;<span class="builtintype" id="7731389">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731399">if</span>&nbsp;<span class="ident" id="7731402">df</span><span class="op" id="7731404">.</span><span class="ident" id="7731405">Cmp</span><span class="op" id="7731408">(</span><span class="ident" id="7731409">df0</span><span class="op" id="7731412">)</span>&nbsp;<span class="op" id="7731414">==</span>&nbsp;<span class="num" id="7731417">0</span>&nbsp;<span class="op" id="7731419">&amp;&amp;</span>&nbsp;<span class="op" id="7731422">!</span><span class="ident" id="7731423">isEven64</span><span class="op" id="7731431">(</span><span class="ident" id="7731432">f</span><span class="op" id="7731433">)</span>&nbsp;<span class="op" id="7731435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731439">t</span><span class="op" id="7731440">.</span><span class="ident" id="7731441">Errorf</span><span class="op" id="7731447">(</span><span class="string" id="7731448">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7731525">,</span>&nbsp;<span class="ident" id="7731527">r</span><span class="op" id="7731528">,</span>&nbsp;<span class="ident" id="7731530">f</span><span class="op" id="7731531">,</span>&nbsp;<span class="ident" id="7731533">f</span><span class="op" id="7731534">,</span>&nbsp;<span class="ident" id="7731536">f0</span><span class="op" id="7731538">,</span>&nbsp;<span class="ident" id="7731540">f0</span><span class="op" id="7731542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731546">return</span>&nbsp;<span class="builtintype" id="7731553">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731563">if</span>&nbsp;<span class="ident" id="7731566">df</span><span class="op" id="7731568">.</span><span class="ident" id="7731569">Cmp</span><span class="op" id="7731572">(</span><span class="ident" id="7731573">df1</span><span class="op" id="7731576">)</span>&nbsp;<span class="op" id="7731578">==</span>&nbsp;<span class="num" id="7731581">0</span>&nbsp;<span class="op" id="7731583">&amp;&amp;</span>&nbsp;<span class="op" id="7731586">!</span><span class="ident" id="7731587">isEven64</span><span class="op" id="7731595">(</span><span class="ident" id="7731596">f</span><span class="op" id="7731597">)</span>&nbsp;<span class="op" id="7731599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731603">t</span><span class="op" id="7731604">.</span><span class="ident" id="7731605">Errorf</span><span class="op" id="7731611">(</span><span class="string" id="7731612">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7731689">,</span>&nbsp;<span class="ident" id="7731691">r</span><span class="op" id="7731692">,</span>&nbsp;<span class="ident" id="7731694">f</span><span class="op" id="7731695">,</span>&nbsp;<span class="ident" id="7731697">f</span><span class="op" id="7731698">,</span>&nbsp;<span class="ident" id="7731700">f1</span><span class="op" id="7731702">,</span>&nbsp;<span class="ident" id="7731704">f1</span><span class="op" id="7731706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731710">return</span>&nbsp;<span class="builtintype" id="7731717">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731724">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731727">return</span>&nbsp;<span class="builtintype" id="7731734">true</span><br>
<span class="lineno"></span><span class="op" id="7731739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7731742">func</span>&nbsp;<span class="ident" id="7731747">isEven32</span><span class="op" id="7731755">(</span><span class="ident" id="7731756">f</span>&nbsp;<span class="builtintype" id="7731758">float32</span><span class="op" id="7731765">)</span>&nbsp;<span class="builtintype" id="7731767">bool</span>&nbsp;<span class="op" id="7731772">{</span>&nbsp;<span class="keyword" id="7731774">return</span>&nbsp;<span class="ident" id="7731781">math</span><span class="op" id="7731785">.</span><span class="ident" id="7731786">Float32bits</span><span class="op" id="7731797">(</span><span class="ident" id="7731798">f</span><span class="op" id="7731799">)</span><span class="op" id="7731800">&amp;</span><span class="num" id="7731801">1</span>&nbsp;<span class="op" id="7731803">==</span>&nbsp;<span class="num" id="7731806">0</span>&nbsp;<span class="op" id="7731808">}</span><br>
<span class="lineno"></span><span class="keyword" id="7731810">func</span>&nbsp;<span class="ident" id="7731815">isEven64</span><span class="op" id="7731823">(</span><span class="ident" id="7731824">f</span>&nbsp;<span class="builtintype" id="7731826">float64</span><span class="op" id="7731833">)</span>&nbsp;<span class="builtintype" id="7731835">bool</span>&nbsp;<span class="op" id="7731840">{</span>&nbsp;<span class="keyword" id="7731842">return</span>&nbsp;<span class="ident" id="7731849">math</span><span class="op" id="7731853">.</span><span class="ident" id="7731854">Float64bits</span><span class="op" id="7731865">(</span><span class="ident" id="7731866">f</span><span class="op" id="7731867">)</span><span class="op" id="7731868">&amp;</span><span class="num" id="7731869">1</span>&nbsp;<span class="op" id="7731871">==</span>&nbsp;<span class="num" id="7731874">0</span>&nbsp;<span class="op" id="7731876">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7731879">func</span>&nbsp;<span class="ident" id="7731884">TestIsFinite</span><span class="op" id="7731896">(</span><span class="ident" id="7731897">t</span>&nbsp;<span class="op" id="7731899">*</span><span class="ident" id="7731900">testing</span><span class="op" id="7731907">.</span><span class="ident" id="7731908">T</span><span class="op" id="7731909">)</span>&nbsp;<span class="op" id="7731911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731914">finites</span>&nbsp;<span class="op" id="7731922">:=</span>&nbsp;<span class="op" id="7731925">[</span><span class="op" id="7731926">]</span><span class="builtintype" id="7731927">float64</span><span class="op" id="7731934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7731938">1.0</span>&nbsp;<span class="op" id="7731942">/</span>&nbsp;<span class="num" id="7731944">3</span><span class="op" id="7731945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7731949">4891559871276714924261e+222</span><span class="op" id="7731976">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731980">math</span><span class="op" id="7731984">.</span><span class="ident" id="7731985">MaxFloat64</span><span class="op" id="7731995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731999">math</span><span class="op" id="7732003">.</span><span class="ident" id="7732004">SmallestNonzeroFloat64</span><span class="op" id="7732026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732030">-</span><span class="ident" id="7732031">math</span><span class="op" id="7732035">.</span><span class="ident" id="7732036">MaxFloat64</span><span class="op" id="7732046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732050">-</span><span class="ident" id="7732051">math</span><span class="op" id="7732055">.</span><span class="ident" id="7732056">SmallestNonzeroFloat64</span><span class="op" id="7732078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732081">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732084">for</span>&nbsp;<span class="ident" id="7732088">_</span><span class="op" id="7732089">,</span>&nbsp;<span class="ident" id="7732091">f</span>&nbsp;<span class="op" id="7732093">:=</span>&nbsp;<span class="keyword" id="7732096">range</span>&nbsp;<span class="ident" id="7732102">finites</span>&nbsp;<span class="op" id="7732110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732114">if</span>&nbsp;<span class="op" id="7732117">!</span><span class="ident" id="7732118">isFinite</span><span class="op" id="7732126">(</span><span class="ident" id="7732127">f</span><span class="op" id="7732128">)</span>&nbsp;<span class="op" id="7732130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732135">t</span><span class="op" id="7732136">.</span><span class="ident" id="7732137">Errorf</span><span class="op" id="7732143">(</span><span class="string" id="7732144">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7732164">,</span>&nbsp;<span class="ident" id="7732166">f</span><span class="op" id="7732167">,</span>&nbsp;<span class="ident" id="7732169">f</span><span class="op" id="7732170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732177">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732180">nonfinites</span>&nbsp;<span class="op" id="7732191">:=</span>&nbsp;<span class="op" id="7732194">[</span><span class="op" id="7732195">]</span><span class="builtintype" id="7732196">float64</span><span class="op" id="7732203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732207">math</span><span class="op" id="7732211">.</span><span class="ident" id="7732212">NaN</span><span class="op" id="7732215">(</span><span class="op" id="7732216">)</span><span class="op" id="7732217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732221">math</span><span class="op" id="7732225">.</span><span class="ident" id="7732226">Inf</span><span class="op" id="7732229">(</span><span class="op" id="7732230">-</span><span class="num" id="7732231">1</span><span class="op" id="7732232">)</span><span class="op" id="7732233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732237">math</span><span class="op" id="7732241">.</span><span class="ident" id="7732242">Inf</span><span class="op" id="7732245">(</span><span class="op" id="7732246">+</span><span class="num" id="7732247">1</span><span class="op" id="7732248">)</span><span class="op" id="7732249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732252">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732255">for</span>&nbsp;<span class="ident" id="7732259">_</span><span class="op" id="7732260">,</span>&nbsp;<span class="ident" id="7732262">f</span>&nbsp;<span class="op" id="7732264">:=</span>&nbsp;<span class="keyword" id="7732267">range</span>&nbsp;<span class="ident" id="7732273">nonfinites</span>&nbsp;<span class="op" id="7732284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732288">if</span>&nbsp;<span class="ident" id="7732291">isFinite</span><span class="op" id="7732299">(</span><span class="ident" id="7732300">f</span><span class="op" id="7732301">)</span>&nbsp;<span class="op" id="7732303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732308">t</span><span class="op" id="7732309">.</span><span class="ident" id="7732310">Errorf</span><span class="op" id="7732316">(</span><span class="string" id="7732317">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7732337">,</span>&nbsp;<span class="ident" id="7732339">f</span><span class="op" id="7732340">,</span>&nbsp;<span class="ident" id="7732342">f</span><span class="op" id="7732343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732350">}</span><br>
<span class="lineno">1160</span><span class="op" id="7732352">}</span>
</div>
</body>
</html>
