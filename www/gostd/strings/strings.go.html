<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strings</h2>
<ul>
<li><a href="/gostd/strings/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/strings/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/strings/reader.go.html">reader.go</a></li>
<li><a href="/gostd/strings/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/strings/replace.go.html">replace.go</a></li>
<li><a href="/gostd/strings/replace_test.go.html">replace_test.go</a></li>
<li><a href="/gostd/strings/search.go.html">search.go</a></li>
<li><a href="/gostd/strings/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/strings/strings.go.html" class="current">strings.go</a></li>
<li><a href="/gostd/strings/strings_decl.go.html">strings_decl.go</a></li>
<li><a href="/gostd/strings/strings_test.go.html">strings_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2351103">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2351158">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2351212">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2351263">//&nbsp;Package&nbsp;strings&nbsp;implements&nbsp;simple&nbsp;functions&nbsp;to&nbsp;manipulate&nbsp;strings.</span><br>
<span class="lineno"></span><span class="keyword" id="2351333">package</span>&nbsp;<span class="ident" id="2351341">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2351350">import</span>&nbsp;<span class="op" id="2351357">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2351360">&#34;unicode&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2351371">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2351386">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2351389">//&nbsp;explode&nbsp;splits&nbsp;s&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;UTF-8&nbsp;sequences,&nbsp;one&nbsp;per&nbsp;Unicode&nbsp;character&nbsp;(still&nbsp;strings)&nbsp;up&nbsp;to&nbsp;a&nbsp;maximum&nbsp;of&nbsp;n&nbsp;(n&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;no&nbsp;limit).</span><br>
<span class="lineno"></span><span class="comment" id="2351530">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequences&nbsp;become&nbsp;correct&nbsp;encodings&nbsp;of&nbsp;U+FFF8.</span><br>
<span class="lineno">15</span><span class="keyword" id="2351593">func</span>&nbsp;<span class="ident" id="2351598">explode</span><span class="op" id="2351605">(</span><span class="ident" id="2351606">s</span>&nbsp;<span class="builtintype" id="2351608">string</span><span class="op" id="2351614">,</span>&nbsp;<span class="ident" id="2351616">n</span>&nbsp;<span class="builtintype" id="2351618">int</span><span class="op" id="2351621">)</span>&nbsp;<span class="op" id="2351623">[</span><span class="op" id="2351624">]</span><span class="builtintype" id="2351625">string</span>&nbsp;<span class="op" id="2351632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2351635">if</span>&nbsp;<span class="ident" id="2351638">n</span>&nbsp;<span class="op" id="2351640">==</span>&nbsp;<span class="num" id="2351643">0</span>&nbsp;<span class="op" id="2351645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2351649">return</span>&nbsp;<span class="builtintype" id="2351656">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2351661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2351664">l</span>&nbsp;<span class="op" id="2351666">:=</span>&nbsp;<span class="ident" id="2351669">utf8</span><span class="op" id="2351673">.</span><span class="ident" id="2351674">RuneCountInString</span><span class="op" id="2351691">(</span><span class="ident" id="2351692">s</span><span class="op" id="2351693">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2351696">if</span>&nbsp;<span class="ident" id="2351699">n</span>&nbsp;<span class="op" id="2351701">&lt;=</span>&nbsp;<span class="num" id="2351704">0</span>&nbsp;<span class="op" id="2351706">||</span>&nbsp;<span class="ident" id="2351709">n</span>&nbsp;<span class="op" id="2351711">&gt;</span>&nbsp;<span class="ident" id="2351713">l</span>&nbsp;<span class="op" id="2351715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2351719">n</span>&nbsp;<span class="op" id="2351721">=</span>&nbsp;<span class="ident" id="2351723">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2351726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2351729">a</span>&nbsp;<span class="op" id="2351731">:=</span>&nbsp;<span class="builtinfunc" id="2351734">make</span><span class="op" id="2351738">(</span><span class="op" id="2351739">[</span><span class="op" id="2351740">]</span><span class="builtintype" id="2351741">string</span><span class="op" id="2351747">,</span>&nbsp;<span class="ident" id="2351749">n</span><span class="op" id="2351750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2351753">var</span>&nbsp;<span class="ident" id="2351757">size</span>&nbsp;<span class="builtintype" id="2351762">int</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2351767">var</span>&nbsp;<span class="ident" id="2351771">ch</span>&nbsp;<span class="builtintype" id="2351774">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2351780">i</span><span class="op" id="2351781">,</span>&nbsp;<span class="ident" id="2351783">cur</span>&nbsp;<span class="op" id="2351787">:=</span>&nbsp;<span class="num" id="2351790">0</span><span class="op" id="2351791">,</span>&nbsp;<span class="num" id="2351793">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2351796">for</span>&nbsp;<span class="op" id="2351800">;</span>&nbsp;<span class="ident" id="2351802">i</span><span class="op" id="2351803">+</span><span class="num" id="2351804">1</span>&nbsp;<span class="op" id="2351806">&lt;</span>&nbsp;<span class="ident" id="2351808">n</span><span class="op" id="2351809">;</span>&nbsp;<span class="ident" id="2351811">i</span><span class="op" id="2351812">++</span>&nbsp;<span class="op" id="2351815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2351819">ch</span><span class="op" id="2351821">,</span>&nbsp;<span class="ident" id="2351823">size</span>&nbsp;<span class="op" id="2351828">=</span>&nbsp;<span class="ident" id="2351830">utf8</span><span class="op" id="2351834">.</span><span class="ident" id="2351835">DecodeRuneInString</span><span class="op" id="2351853">(</span><span class="ident" id="2351854">s</span><span class="op" id="2351855">[</span><span class="ident" id="2351856">cur</span><span class="op" id="2351859">:</span><span class="op" id="2351860">]</span><span class="op" id="2351861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2351865">if</span>&nbsp;<span class="ident" id="2351868">ch</span>&nbsp;<span class="op" id="2351871">==</span>&nbsp;<span class="ident" id="2351874">utf8</span><span class="op" id="2351878">.</span><span class="ident" id="2351879">RuneError</span>&nbsp;<span class="op" id="2351889">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2351894">a</span><span class="op" id="2351895">[</span><span class="ident" id="2351896">i</span><span class="op" id="2351897">]</span>&nbsp;<span class="op" id="2351899">=</span>&nbsp;<span class="builtintype" id="2351901">string</span><span class="op" id="2351907">(</span><span class="ident" id="2351908">utf8</span><span class="op" id="2351912">.</span><span class="ident" id="2351913">RuneError</span><span class="op" id="2351922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2351926">}</span>&nbsp;<span class="keyword" id="2351928">else</span>&nbsp;<span class="op" id="2351933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2351938">a</span><span class="op" id="2351939">[</span><span class="ident" id="2351940">i</span><span class="op" id="2351941">]</span>&nbsp;<span class="op" id="2351943">=</span>&nbsp;<span class="ident" id="2351945">s</span><span class="op" id="2351946">[</span><span class="ident" id="2351947">cur</span>&nbsp;<span class="op" id="2351951">:</span>&nbsp;<span class="ident" id="2351953">cur</span><span class="op" id="2351956">+</span><span class="ident" id="2351957">size</span><span class="op" id="2351961">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2351965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2351969">cur</span>&nbsp;<span class="op" id="2351973">+=</span>&nbsp;<span class="ident" id="2351976">size</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2351982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2351985">//&nbsp;add&nbsp;the&nbsp;rest,&nbsp;if&nbsp;there&nbsp;is&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352019">if</span>&nbsp;<span class="ident" id="2352022">cur</span>&nbsp;<span class="op" id="2352026">&lt;</span>&nbsp;<span class="builtinfunc" id="2352028">len</span><span class="op" id="2352031">(</span><span class="ident" id="2352032">s</span><span class="op" id="2352033">)</span>&nbsp;<span class="op" id="2352035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2352039">a</span><span class="op" id="2352040">[</span><span class="ident" id="2352041">i</span><span class="op" id="2352042">]</span>&nbsp;<span class="op" id="2352044">=</span>&nbsp;<span class="ident" id="2352046">s</span><span class="op" id="2352047">[</span><span class="ident" id="2352048">cur</span><span class="op" id="2352051">:</span><span class="op" id="2352052">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2352055">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352058">return</span>&nbsp;<span class="ident" id="2352065">a</span><br>
<span class="lineno"></span><span class="op" id="2352067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2352070">//&nbsp;primeRK&nbsp;is&nbsp;the&nbsp;prime&nbsp;base&nbsp;used&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="2352129">const</span>&nbsp;<span class="ident" id="2352135">primeRK</span>&nbsp;<span class="op" id="2352143">=</span>&nbsp;<span class="num" id="2352145">16777619</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2352155">//&nbsp;hashStr&nbsp;returns&nbsp;the&nbsp;hash&nbsp;and&nbsp;the&nbsp;appropriate&nbsp;multiplicative</span><br>
<span class="lineno"></span><span class="comment" id="2352218">//&nbsp;factor&nbsp;for&nbsp;use&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="2352261">func</span>&nbsp;<span class="ident" id="2352266">hashStr</span><span class="op" id="2352273">(</span><span class="ident" id="2352274">sep</span>&nbsp;<span class="builtintype" id="2352278">string</span><span class="op" id="2352284">)</span>&nbsp;<span class="op" id="2352286">(</span><span class="builtintype" id="2352287">uint32</span><span class="op" id="2352293">,</span>&nbsp;<span class="builtintype" id="2352295">uint32</span><span class="op" id="2352301">)</span>&nbsp;<span class="op" id="2352303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2352306">hash</span>&nbsp;<span class="op" id="2352311">:=</span>&nbsp;<span class="builtintype" id="2352314">uint32</span><span class="op" id="2352320">(</span><span class="num" id="2352321">0</span><span class="op" id="2352322">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352325">for</span>&nbsp;<span class="ident" id="2352329">i</span>&nbsp;<span class="op" id="2352331">:=</span>&nbsp;<span class="num" id="2352334">0</span><span class="op" id="2352335">;</span>&nbsp;<span class="ident" id="2352337">i</span>&nbsp;<span class="op" id="2352339">&lt;</span>&nbsp;<span class="builtinfunc" id="2352341">len</span><span class="op" id="2352344">(</span><span class="ident" id="2352345">sep</span><span class="op" id="2352348">)</span><span class="op" id="2352349">;</span>&nbsp;<span class="ident" id="2352351">i</span><span class="op" id="2352352">++</span>&nbsp;<span class="op" id="2352355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2352359">hash</span>&nbsp;<span class="op" id="2352364">=</span>&nbsp;<span class="ident" id="2352366">hash</span><span class="op" id="2352370">*</span><span class="ident" id="2352371">primeRK</span>&nbsp;<span class="op" id="2352379">+</span>&nbsp;<span class="builtintype" id="2352381">uint32</span><span class="op" id="2352387">(</span><span class="ident" id="2352388">sep</span><span class="op" id="2352391">[</span><span class="ident" id="2352392">i</span><span class="op" id="2352393">]</span><span class="op" id="2352394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2352397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352400">var</span>&nbsp;<span class="ident" id="2352404">pow</span><span class="op" id="2352407">,</span>&nbsp;<span class="ident" id="2352409">sq</span>&nbsp;<span class="builtintype" id="2352412">uint32</span>&nbsp;<span class="op" id="2352419">=</span>&nbsp;<span class="num" id="2352421">1</span><span class="op" id="2352422">,</span>&nbsp;<span class="ident" id="2352424">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352433">for</span>&nbsp;<span class="ident" id="2352437">i</span>&nbsp;<span class="op" id="2352439">:=</span>&nbsp;<span class="builtinfunc" id="2352442">len</span><span class="op" id="2352445">(</span><span class="ident" id="2352446">sep</span><span class="op" id="2352449">)</span><span class="op" id="2352450">;</span>&nbsp;<span class="ident" id="2352452">i</span>&nbsp;<span class="op" id="2352454">&gt;</span>&nbsp;<span class="num" id="2352456">0</span><span class="op" id="2352457">;</span>&nbsp;<span class="ident" id="2352459">i</span>&nbsp;<span class="op" id="2352461">&gt;&gt;=</span>&nbsp;<span class="num" id="2352465">1</span>&nbsp;<span class="op" id="2352467">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352471">if</span>&nbsp;<span class="ident" id="2352474">i</span><span class="op" id="2352475">&amp;</span><span class="num" id="2352476">1</span>&nbsp;<span class="op" id="2352478">!=</span>&nbsp;<span class="num" id="2352481">0</span>&nbsp;<span class="op" id="2352483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2352488">pow</span>&nbsp;<span class="op" id="2352492">*=</span>&nbsp;<span class="ident" id="2352495">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2352500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2352504">sq</span>&nbsp;<span class="op" id="2352507">*=</span>&nbsp;<span class="ident" id="2352510">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2352514">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352517">return</span>&nbsp;<span class="ident" id="2352524">hash</span><span class="op" id="2352528">,</span>&nbsp;<span class="ident" id="2352530">pow</span><br>
<span class="lineno"></span><span class="op" id="2352534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2352537">//&nbsp;hashStrRev&nbsp;returns&nbsp;the&nbsp;hash&nbsp;of&nbsp;the&nbsp;reverse&nbsp;of&nbsp;sep&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2352598">//&nbsp;appropriate&nbsp;multiplicative&nbsp;factor&nbsp;for&nbsp;use&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno">65</span><span class="keyword" id="2352668">func</span>&nbsp;<span class="ident" id="2352673">hashStrRev</span><span class="op" id="2352683">(</span><span class="ident" id="2352684">sep</span>&nbsp;<span class="builtintype" id="2352688">string</span><span class="op" id="2352694">)</span>&nbsp;<span class="op" id="2352696">(</span><span class="builtintype" id="2352697">uint32</span><span class="op" id="2352703">,</span>&nbsp;<span class="builtintype" id="2352705">uint32</span><span class="op" id="2352711">)</span>&nbsp;<span class="op" id="2352713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2352716">hash</span>&nbsp;<span class="op" id="2352721">:=</span>&nbsp;<span class="builtintype" id="2352724">uint32</span><span class="op" id="2352730">(</span><span class="num" id="2352731">0</span><span class="op" id="2352732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352735">for</span>&nbsp;<span class="ident" id="2352739">i</span>&nbsp;<span class="op" id="2352741">:=</span>&nbsp;<span class="builtinfunc" id="2352744">len</span><span class="op" id="2352747">(</span><span class="ident" id="2352748">sep</span><span class="op" id="2352751">)</span>&nbsp;<span class="op" id="2352753">-</span>&nbsp;<span class="num" id="2352755">1</span><span class="op" id="2352756">;</span>&nbsp;<span class="ident" id="2352758">i</span>&nbsp;<span class="op" id="2352760">&gt;=</span>&nbsp;<span class="num" id="2352763">0</span><span class="op" id="2352764">;</span>&nbsp;<span class="ident" id="2352766">i</span><span class="op" id="2352767">--</span>&nbsp;<span class="op" id="2352770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2352774">hash</span>&nbsp;<span class="op" id="2352779">=</span>&nbsp;<span class="ident" id="2352781">hash</span><span class="op" id="2352785">*</span><span class="ident" id="2352786">primeRK</span>&nbsp;<span class="op" id="2352794">+</span>&nbsp;<span class="builtintype" id="2352796">uint32</span><span class="op" id="2352802">(</span><span class="ident" id="2352803">sep</span><span class="op" id="2352806">[</span><span class="ident" id="2352807">i</span><span class="op" id="2352808">]</span><span class="op" id="2352809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2352812">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352815">var</span>&nbsp;<span class="ident" id="2352819">pow</span><span class="op" id="2352822">,</span>&nbsp;<span class="ident" id="2352824">sq</span>&nbsp;<span class="builtintype" id="2352827">uint32</span>&nbsp;<span class="op" id="2352834">=</span>&nbsp;<span class="num" id="2352836">1</span><span class="op" id="2352837">,</span>&nbsp;<span class="ident" id="2352839">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352848">for</span>&nbsp;<span class="ident" id="2352852">i</span>&nbsp;<span class="op" id="2352854">:=</span>&nbsp;<span class="builtinfunc" id="2352857">len</span><span class="op" id="2352860">(</span><span class="ident" id="2352861">sep</span><span class="op" id="2352864">)</span><span class="op" id="2352865">;</span>&nbsp;<span class="ident" id="2352867">i</span>&nbsp;<span class="op" id="2352869">&gt;</span>&nbsp;<span class="num" id="2352871">0</span><span class="op" id="2352872">;</span>&nbsp;<span class="ident" id="2352874">i</span>&nbsp;<span class="op" id="2352876">&gt;&gt;=</span>&nbsp;<span class="num" id="2352880">1</span>&nbsp;<span class="op" id="2352882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352886">if</span>&nbsp;<span class="ident" id="2352889">i</span><span class="op" id="2352890">&amp;</span><span class="num" id="2352891">1</span>&nbsp;<span class="op" id="2352893">!=</span>&nbsp;<span class="num" id="2352896">0</span>&nbsp;<span class="op" id="2352898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2352903">pow</span>&nbsp;<span class="op" id="2352907">*=</span>&nbsp;<span class="ident" id="2352910">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2352915">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2352919">sq</span>&nbsp;<span class="op" id="2352922">*=</span>&nbsp;<span class="ident" id="2352925">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2352929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2352932">return</span>&nbsp;<span class="ident" id="2352939">hash</span><span class="op" id="2352943">,</span>&nbsp;<span class="ident" id="2352945">pow</span><br>
<span class="lineno"></span><span class="op" id="2352949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="2352952">//&nbsp;Count&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;non-overlapping&nbsp;instances&nbsp;of&nbsp;sep&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2353021">func</span>&nbsp;<span class="ident" id="2353026">Count</span><span class="op" id="2353031">(</span><span class="ident" id="2353032">s</span><span class="op" id="2353033">,</span>&nbsp;<span class="ident" id="2353035">sep</span>&nbsp;<span class="builtintype" id="2353039">string</span><span class="op" id="2353045">)</span>&nbsp;<span class="builtintype" id="2353047">int</span>&nbsp;<span class="op" id="2353051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353054">n</span>&nbsp;<span class="op" id="2353056">:=</span>&nbsp;<span class="num" id="2353059">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2353062">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353080">switch</span>&nbsp;<span class="op" id="2353087">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353090">case</span>&nbsp;<span class="builtinfunc" id="2353095">len</span><span class="op" id="2353098">(</span><span class="ident" id="2353099">sep</span><span class="op" id="2353102">)</span>&nbsp;<span class="op" id="2353104">==</span>&nbsp;<span class="num" id="2353107">0</span><span class="op" id="2353108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353112">return</span>&nbsp;<span class="ident" id="2353119">utf8</span><span class="op" id="2353123">.</span><span class="ident" id="2353124">RuneCountInString</span><span class="op" id="2353141">(</span><span class="ident" id="2353142">s</span><span class="op" id="2353143">)</span>&nbsp;<span class="op" id="2353145">+</span>&nbsp;<span class="num" id="2353147">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353150">case</span>&nbsp;<span class="builtinfunc" id="2353155">len</span><span class="op" id="2353158">(</span><span class="ident" id="2353159">sep</span><span class="op" id="2353162">)</span>&nbsp;<span class="op" id="2353164">==</span>&nbsp;<span class="num" id="2353167">1</span><span class="op" id="2353168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2353172">//&nbsp;special&nbsp;case&nbsp;worth&nbsp;making&nbsp;fast</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353208">c</span>&nbsp;<span class="op" id="2353210">:=</span>&nbsp;<span class="ident" id="2353213">sep</span><span class="op" id="2353216">[</span><span class="num" id="2353217">0</span><span class="op" id="2353218">]</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353222">for</span>&nbsp;<span class="ident" id="2353226">i</span>&nbsp;<span class="op" id="2353228">:=</span>&nbsp;<span class="num" id="2353231">0</span><span class="op" id="2353232">;</span>&nbsp;<span class="ident" id="2353234">i</span>&nbsp;<span class="op" id="2353236">&lt;</span>&nbsp;<span class="builtinfunc" id="2353238">len</span><span class="op" id="2353241">(</span><span class="ident" id="2353242">s</span><span class="op" id="2353243">)</span><span class="op" id="2353244">;</span>&nbsp;<span class="ident" id="2353246">i</span><span class="op" id="2353247">++</span>&nbsp;<span class="op" id="2353250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353255">if</span>&nbsp;<span class="ident" id="2353258">s</span><span class="op" id="2353259">[</span><span class="ident" id="2353260">i</span><span class="op" id="2353261">]</span>&nbsp;<span class="op" id="2353263">==</span>&nbsp;<span class="ident" id="2353266">c</span>&nbsp;<span class="op" id="2353268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353274">n</span><span class="op" id="2353275">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2353281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2353285">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353289">return</span>&nbsp;<span class="ident" id="2353296">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353299">case</span>&nbsp;<span class="builtinfunc" id="2353304">len</span><span class="op" id="2353307">(</span><span class="ident" id="2353308">sep</span><span class="op" id="2353311">)</span>&nbsp;<span class="op" id="2353313">&gt;</span>&nbsp;<span class="builtinfunc" id="2353315">len</span><span class="op" id="2353318">(</span><span class="ident" id="2353319">s</span><span class="op" id="2353320">)</span><span class="op" id="2353321">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353325">return</span>&nbsp;<span class="num" id="2353332">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353335">case</span>&nbsp;<span class="builtinfunc" id="2353340">len</span><span class="op" id="2353343">(</span><span class="ident" id="2353344">sep</span><span class="op" id="2353347">)</span>&nbsp;<span class="op" id="2353349">==</span>&nbsp;<span class="builtinfunc" id="2353352">len</span><span class="op" id="2353355">(</span><span class="ident" id="2353356">s</span><span class="op" id="2353357">)</span><span class="op" id="2353358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353362">if</span>&nbsp;<span class="ident" id="2353365">sep</span>&nbsp;<span class="op" id="2353369">==</span>&nbsp;<span class="ident" id="2353372">s</span>&nbsp;<span class="op" id="2353374">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353379">return</span>&nbsp;<span class="num" id="2353386">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2353390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353394">return</span>&nbsp;<span class="num" id="2353401">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2353404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2353407">//&nbsp;Rabin-Karp&nbsp;search</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353429">hashsep</span><span class="op" id="2353436">,</span>&nbsp;<span class="ident" id="2353438">pow</span>&nbsp;<span class="op" id="2353442">:=</span>&nbsp;<span class="ident" id="2353445">hashStr</span><span class="op" id="2353452">(</span><span class="ident" id="2353453">sep</span><span class="op" id="2353456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353459">h</span>&nbsp;<span class="op" id="2353461">:=</span>&nbsp;<span class="builtintype" id="2353464">uint32</span><span class="op" id="2353470">(</span><span class="num" id="2353471">0</span><span class="op" id="2353472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353475">for</span>&nbsp;<span class="ident" id="2353479">i</span>&nbsp;<span class="op" id="2353481">:=</span>&nbsp;<span class="num" id="2353484">0</span><span class="op" id="2353485">;</span>&nbsp;<span class="ident" id="2353487">i</span>&nbsp;<span class="op" id="2353489">&lt;</span>&nbsp;<span class="builtinfunc" id="2353491">len</span><span class="op" id="2353494">(</span><span class="ident" id="2353495">sep</span><span class="op" id="2353498">)</span><span class="op" id="2353499">;</span>&nbsp;<span class="ident" id="2353501">i</span><span class="op" id="2353502">++</span>&nbsp;<span class="op" id="2353505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353509">h</span>&nbsp;<span class="op" id="2353511">=</span>&nbsp;<span class="ident" id="2353513">h</span><span class="op" id="2353514">*</span><span class="ident" id="2353515">primeRK</span>&nbsp;<span class="op" id="2353523">+</span>&nbsp;<span class="builtintype" id="2353525">uint32</span><span class="op" id="2353531">(</span><span class="ident" id="2353532">s</span><span class="op" id="2353533">[</span><span class="ident" id="2353534">i</span><span class="op" id="2353535">]</span><span class="op" id="2353536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2353539">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353542">lastmatch</span>&nbsp;<span class="op" id="2353552">:=</span>&nbsp;<span class="num" id="2353555">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353558">if</span>&nbsp;<span class="ident" id="2353561">h</span>&nbsp;<span class="op" id="2353563">==</span>&nbsp;<span class="ident" id="2353566">hashsep</span>&nbsp;<span class="op" id="2353574">&amp;&amp;</span>&nbsp;<span class="ident" id="2353577">s</span><span class="op" id="2353578">[</span><span class="op" id="2353579">:</span><span class="builtinfunc" id="2353580">len</span><span class="op" id="2353583">(</span><span class="ident" id="2353584">sep</span><span class="op" id="2353587">)</span><span class="op" id="2353588">]</span>&nbsp;<span class="op" id="2353590">==</span>&nbsp;<span class="ident" id="2353593">sep</span>&nbsp;<span class="op" id="2353597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353601">n</span><span class="op" id="2353602">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353607">lastmatch</span>&nbsp;<span class="op" id="2353617">=</span>&nbsp;<span class="builtinfunc" id="2353619">len</span><span class="op" id="2353622">(</span><span class="ident" id="2353623">sep</span><span class="op" id="2353626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2353629">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353632">for</span>&nbsp;<span class="ident" id="2353636">i</span>&nbsp;<span class="op" id="2353638">:=</span>&nbsp;<span class="builtinfunc" id="2353641">len</span><span class="op" id="2353644">(</span><span class="ident" id="2353645">sep</span><span class="op" id="2353648">)</span><span class="op" id="2353649">;</span>&nbsp;<span class="ident" id="2353651">i</span>&nbsp;<span class="op" id="2353653">&lt;</span>&nbsp;<span class="builtinfunc" id="2353655">len</span><span class="op" id="2353658">(</span><span class="ident" id="2353659">s</span><span class="op" id="2353660">)</span><span class="op" id="2353661">;</span>&nbsp;<span class="op" id="2353663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353667">h</span>&nbsp;<span class="op" id="2353669">*=</span>&nbsp;<span class="ident" id="2353672">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353682">h</span>&nbsp;<span class="op" id="2353684">+=</span>&nbsp;<span class="builtintype" id="2353687">uint32</span><span class="op" id="2353693">(</span><span class="ident" id="2353694">s</span><span class="op" id="2353695">[</span><span class="ident" id="2353696">i</span><span class="op" id="2353697">]</span><span class="op" id="2353698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353702">h</span>&nbsp;<span class="op" id="2353704">-=</span>&nbsp;<span class="ident" id="2353707">pow</span>&nbsp;<span class="op" id="2353711">*</span>&nbsp;<span class="builtintype" id="2353713">uint32</span><span class="op" id="2353719">(</span><span class="ident" id="2353720">s</span><span class="op" id="2353721">[</span><span class="ident" id="2353722">i</span><span class="op" id="2353723">-</span><span class="builtinfunc" id="2353724">len</span><span class="op" id="2353727">(</span><span class="ident" id="2353728">sep</span><span class="op" id="2353731">)</span><span class="op" id="2353732">]</span><span class="op" id="2353733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353737">i</span><span class="op" id="2353738">++</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353743">if</span>&nbsp;<span class="ident" id="2353746">h</span>&nbsp;<span class="op" id="2353748">==</span>&nbsp;<span class="ident" id="2353751">hashsep</span>&nbsp;<span class="op" id="2353759">&amp;&amp;</span>&nbsp;<span class="ident" id="2353762">lastmatch</span>&nbsp;<span class="op" id="2353772">&lt;=</span>&nbsp;<span class="ident" id="2353775">i</span><span class="op" id="2353776">-</span><span class="builtinfunc" id="2353777">len</span><span class="op" id="2353780">(</span><span class="ident" id="2353781">sep</span><span class="op" id="2353784">)</span>&nbsp;<span class="op" id="2353786">&amp;&amp;</span>&nbsp;<span class="ident" id="2353789">s</span><span class="op" id="2353790">[</span><span class="ident" id="2353791">i</span><span class="op" id="2353792">-</span><span class="builtinfunc" id="2353793">len</span><span class="op" id="2353796">(</span><span class="ident" id="2353797">sep</span><span class="op" id="2353800">)</span><span class="op" id="2353801">:</span><span class="ident" id="2353802">i</span><span class="op" id="2353803">]</span>&nbsp;<span class="op" id="2353805">==</span>&nbsp;<span class="ident" id="2353808">sep</span>&nbsp;<span class="op" id="2353812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353817">n</span><span class="op" id="2353818">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2353824">lastmatch</span>&nbsp;<span class="op" id="2353834">=</span>&nbsp;<span class="ident" id="2353836">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2353840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2353843">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353846">return</span>&nbsp;<span class="ident" id="2353853">n</span><br>
<span class="lineno"></span><span class="op" id="2353855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2353858">//&nbsp;Contains&nbsp;returns&nbsp;true&nbsp;if&nbsp;substr&nbsp;is&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2353906">func</span>&nbsp;<span class="ident" id="2353911">Contains</span><span class="op" id="2353919">(</span><span class="ident" id="2353920">s</span><span class="op" id="2353921">,</span>&nbsp;<span class="ident" id="2353923">substr</span>&nbsp;<span class="builtintype" id="2353930">string</span><span class="op" id="2353936">)</span>&nbsp;<span class="builtintype" id="2353938">bool</span>&nbsp;<span class="op" id="2353943">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2353946">return</span>&nbsp;<span class="ident" id="2353953">Index</span><span class="op" id="2353958">(</span><span class="ident" id="2353959">s</span><span class="op" id="2353960">,</span>&nbsp;<span class="ident" id="2353962">substr</span><span class="op" id="2353968">)</span>&nbsp;<span class="op" id="2353970">&gt;=</span>&nbsp;<span class="num" id="2353973">0</span><br>
<span class="lineno"></span><span class="op" id="2353975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2353978">//&nbsp;ContainsAny&nbsp;returns&nbsp;true&nbsp;if&nbsp;any&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;in&nbsp;chars&nbsp;are&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2354056">func</span>&nbsp;<span class="ident" id="2354061">ContainsAny</span><span class="op" id="2354072">(</span><span class="ident" id="2354073">s</span><span class="op" id="2354074">,</span>&nbsp;<span class="ident" id="2354076">chars</span>&nbsp;<span class="builtintype" id="2354082">string</span><span class="op" id="2354088">)</span>&nbsp;<span class="builtintype" id="2354090">bool</span>&nbsp;<span class="op" id="2354095">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354098">return</span>&nbsp;<span class="ident" id="2354105">IndexAny</span><span class="op" id="2354113">(</span><span class="ident" id="2354114">s</span><span class="op" id="2354115">,</span>&nbsp;<span class="ident" id="2354117">chars</span><span class="op" id="2354122">)</span>&nbsp;<span class="op" id="2354124">&gt;=</span>&nbsp;<span class="num" id="2354127">0</span><br>
<span class="lineno"></span><span class="op" id="2354129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2354132">//&nbsp;ContainsRune&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;r&nbsp;is&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2354202">func</span>&nbsp;<span class="ident" id="2354207">ContainsRune</span><span class="op" id="2354219">(</span><span class="ident" id="2354220">s</span>&nbsp;<span class="builtintype" id="2354222">string</span><span class="op" id="2354228">,</span>&nbsp;<span class="ident" id="2354230">r</span>&nbsp;<span class="builtintype" id="2354232">rune</span><span class="op" id="2354236">)</span>&nbsp;<span class="builtintype" id="2354238">bool</span>&nbsp;<span class="op" id="2354243">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354246">return</span>&nbsp;<span class="ident" id="2354253">IndexRune</span><span class="op" id="2354262">(</span><span class="ident" id="2354263">s</span><span class="op" id="2354264">,</span>&nbsp;<span class="ident" id="2354266">r</span><span class="op" id="2354267">)</span>&nbsp;<span class="op" id="2354269">&gt;=</span>&nbsp;<span class="num" id="2354272">0</span><br>
<span class="lineno"></span><span class="op" id="2354274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2354277">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;sep&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;sep&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2354373">func</span>&nbsp;<span class="ident" id="2354378">Index</span><span class="op" id="2354383">(</span><span class="ident" id="2354384">s</span><span class="op" id="2354385">,</span>&nbsp;<span class="ident" id="2354387">sep</span>&nbsp;<span class="builtintype" id="2354391">string</span><span class="op" id="2354397">)</span>&nbsp;<span class="builtintype" id="2354399">int</span>&nbsp;<span class="op" id="2354403">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2354406">n</span>&nbsp;<span class="op" id="2354408">:=</span>&nbsp;<span class="builtinfunc" id="2354411">len</span><span class="op" id="2354414">(</span><span class="ident" id="2354415">sep</span><span class="op" id="2354418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354421">switch</span>&nbsp;<span class="op" id="2354428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354431">case</span>&nbsp;<span class="ident" id="2354436">n</span>&nbsp;<span class="op" id="2354438">==</span>&nbsp;<span class="num" id="2354441">0</span><span class="op" id="2354442">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354446">return</span>&nbsp;<span class="num" id="2354453">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354456">case</span>&nbsp;<span class="ident" id="2354461">n</span>&nbsp;<span class="op" id="2354463">==</span>&nbsp;<span class="num" id="2354466">1</span><span class="op" id="2354467">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354471">return</span>&nbsp;<span class="ident" id="2354478">IndexByte</span><span class="op" id="2354487">(</span><span class="ident" id="2354488">s</span><span class="op" id="2354489">,</span>&nbsp;<span class="ident" id="2354491">sep</span><span class="op" id="2354494">[</span><span class="num" id="2354495">0</span><span class="op" id="2354496">]</span><span class="op" id="2354497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354500">case</span>&nbsp;<span class="ident" id="2354505">n</span>&nbsp;<span class="op" id="2354507">==</span>&nbsp;<span class="builtinfunc" id="2354510">len</span><span class="op" id="2354513">(</span><span class="ident" id="2354514">s</span><span class="op" id="2354515">)</span><span class="op" id="2354516">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354520">if</span>&nbsp;<span class="ident" id="2354523">sep</span>&nbsp;<span class="op" id="2354527">==</span>&nbsp;<span class="ident" id="2354530">s</span>&nbsp;<span class="op" id="2354532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354537">return</span>&nbsp;<span class="num" id="2354544">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2354548">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354552">return</span>&nbsp;<span class="op" id="2354559">-</span><span class="num" id="2354560">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354563">case</span>&nbsp;<span class="ident" id="2354568">n</span>&nbsp;<span class="op" id="2354570">&gt;</span>&nbsp;<span class="builtinfunc" id="2354572">len</span><span class="op" id="2354575">(</span><span class="ident" id="2354576">s</span><span class="op" id="2354577">)</span><span class="op" id="2354578">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354582">return</span>&nbsp;<span class="op" id="2354589">-</span><span class="num" id="2354590">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2354593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2354596">//&nbsp;Rabin-Karp&nbsp;search</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2354618">hashsep</span><span class="op" id="2354625">,</span>&nbsp;<span class="ident" id="2354627">pow</span>&nbsp;<span class="op" id="2354631">:=</span>&nbsp;<span class="ident" id="2354634">hashStr</span><span class="op" id="2354641">(</span><span class="ident" id="2354642">sep</span><span class="op" id="2354645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354648">var</span>&nbsp;<span class="ident" id="2354652">h</span>&nbsp;<span class="builtintype" id="2354654">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354662">for</span>&nbsp;<span class="ident" id="2354666">i</span>&nbsp;<span class="op" id="2354668">:=</span>&nbsp;<span class="num" id="2354671">0</span><span class="op" id="2354672">;</span>&nbsp;<span class="ident" id="2354674">i</span>&nbsp;<span class="op" id="2354676">&lt;</span>&nbsp;<span class="ident" id="2354678">n</span><span class="op" id="2354679">;</span>&nbsp;<span class="ident" id="2354681">i</span><span class="op" id="2354682">++</span>&nbsp;<span class="op" id="2354685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2354689">h</span>&nbsp;<span class="op" id="2354691">=</span>&nbsp;<span class="ident" id="2354693">h</span><span class="op" id="2354694">*</span><span class="ident" id="2354695">primeRK</span>&nbsp;<span class="op" id="2354703">+</span>&nbsp;<span class="builtintype" id="2354705">uint32</span><span class="op" id="2354711">(</span><span class="ident" id="2354712">s</span><span class="op" id="2354713">[</span><span class="ident" id="2354714">i</span><span class="op" id="2354715">]</span><span class="op" id="2354716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2354719">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354722">if</span>&nbsp;<span class="ident" id="2354725">h</span>&nbsp;<span class="op" id="2354727">==</span>&nbsp;<span class="ident" id="2354730">hashsep</span>&nbsp;<span class="op" id="2354738">&amp;&amp;</span>&nbsp;<span class="ident" id="2354741">s</span><span class="op" id="2354742">[</span><span class="op" id="2354743">:</span><span class="ident" id="2354744">n</span><span class="op" id="2354745">]</span>&nbsp;<span class="op" id="2354747">==</span>&nbsp;<span class="ident" id="2354750">sep</span>&nbsp;<span class="op" id="2354754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354758">return</span>&nbsp;<span class="num" id="2354765">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2354768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354771">for</span>&nbsp;<span class="ident" id="2354775">i</span>&nbsp;<span class="op" id="2354777">:=</span>&nbsp;<span class="ident" id="2354780">n</span><span class="op" id="2354781">;</span>&nbsp;<span class="ident" id="2354783">i</span>&nbsp;<span class="op" id="2354785">&lt;</span>&nbsp;<span class="builtinfunc" id="2354787">len</span><span class="op" id="2354790">(</span><span class="ident" id="2354791">s</span><span class="op" id="2354792">)</span><span class="op" id="2354793">;</span>&nbsp;<span class="op" id="2354795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2354799">h</span>&nbsp;<span class="op" id="2354801">*=</span>&nbsp;<span class="ident" id="2354804">primeRK</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2354814">h</span>&nbsp;<span class="op" id="2354816">+=</span>&nbsp;<span class="builtintype" id="2354819">uint32</span><span class="op" id="2354825">(</span><span class="ident" id="2354826">s</span><span class="op" id="2354827">[</span><span class="ident" id="2354828">i</span><span class="op" id="2354829">]</span><span class="op" id="2354830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2354834">h</span>&nbsp;<span class="op" id="2354836">-=</span>&nbsp;<span class="ident" id="2354839">pow</span>&nbsp;<span class="op" id="2354843">*</span>&nbsp;<span class="builtintype" id="2354845">uint32</span><span class="op" id="2354851">(</span><span class="ident" id="2354852">s</span><span class="op" id="2354853">[</span><span class="ident" id="2354854">i</span><span class="op" id="2354855">-</span><span class="ident" id="2354856">n</span><span class="op" id="2354857">]</span><span class="op" id="2354858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2354862">i</span><span class="op" id="2354863">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354868">if</span>&nbsp;<span class="ident" id="2354871">h</span>&nbsp;<span class="op" id="2354873">==</span>&nbsp;<span class="ident" id="2354876">hashsep</span>&nbsp;<span class="op" id="2354884">&amp;&amp;</span>&nbsp;<span class="ident" id="2354887">s</span><span class="op" id="2354888">[</span><span class="ident" id="2354889">i</span><span class="op" id="2354890">-</span><span class="ident" id="2354891">n</span><span class="op" id="2354892">:</span><span class="ident" id="2354893">i</span><span class="op" id="2354894">]</span>&nbsp;<span class="op" id="2354896">==</span>&nbsp;<span class="ident" id="2354899">sep</span>&nbsp;<span class="op" id="2354903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354908">return</span>&nbsp;<span class="ident" id="2354915">i</span>&nbsp;<span class="op" id="2354917">-</span>&nbsp;<span class="ident" id="2354919">n</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2354923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2354926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2354929">return</span>&nbsp;<span class="op" id="2354936">-</span><span class="num" id="2354937">1</span><br>
<span class="lineno"></span><span class="op" id="2354939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="2354942">//&nbsp;LastIndex&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;last&nbsp;instance&nbsp;of&nbsp;sep&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;sep&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2355041">func</span>&nbsp;<span class="ident" id="2355046">LastIndex</span><span class="op" id="2355055">(</span><span class="ident" id="2355056">s</span><span class="op" id="2355057">,</span>&nbsp;<span class="ident" id="2355059">sep</span>&nbsp;<span class="builtintype" id="2355063">string</span><span class="op" id="2355069">)</span>&nbsp;<span class="builtintype" id="2355071">int</span>&nbsp;<span class="op" id="2355075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2355078">n</span>&nbsp;<span class="op" id="2355080">:=</span>&nbsp;<span class="builtinfunc" id="2355083">len</span><span class="op" id="2355086">(</span><span class="ident" id="2355087">sep</span><span class="op" id="2355090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355093">switch</span>&nbsp;<span class="op" id="2355100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355103">case</span>&nbsp;<span class="ident" id="2355108">n</span>&nbsp;<span class="op" id="2355110">==</span>&nbsp;<span class="num" id="2355113">0</span><span class="op" id="2355114">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355118">return</span>&nbsp;<span class="builtinfunc" id="2355125">len</span><span class="op" id="2355128">(</span><span class="ident" id="2355129">s</span><span class="op" id="2355130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355133">case</span>&nbsp;<span class="ident" id="2355138">n</span>&nbsp;<span class="op" id="2355140">==</span>&nbsp;<span class="num" id="2355143">1</span><span class="op" id="2355144">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2355148">//&nbsp;special&nbsp;case&nbsp;worth&nbsp;making&nbsp;fast</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2355184">c</span>&nbsp;<span class="op" id="2355186">:=</span>&nbsp;<span class="ident" id="2355189">sep</span><span class="op" id="2355192">[</span><span class="num" id="2355193">0</span><span class="op" id="2355194">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355198">for</span>&nbsp;<span class="ident" id="2355202">i</span>&nbsp;<span class="op" id="2355204">:=</span>&nbsp;<span class="builtinfunc" id="2355207">len</span><span class="op" id="2355210">(</span><span class="ident" id="2355211">s</span><span class="op" id="2355212">)</span>&nbsp;<span class="op" id="2355214">-</span>&nbsp;<span class="num" id="2355216">1</span><span class="op" id="2355217">;</span>&nbsp;<span class="ident" id="2355219">i</span>&nbsp;<span class="op" id="2355221">&gt;=</span>&nbsp;<span class="num" id="2355224">0</span><span class="op" id="2355225">;</span>&nbsp;<span class="ident" id="2355227">i</span><span class="op" id="2355228">--</span>&nbsp;<span class="op" id="2355231">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355236">if</span>&nbsp;<span class="ident" id="2355239">s</span><span class="op" id="2355240">[</span><span class="ident" id="2355241">i</span><span class="op" id="2355242">]</span>&nbsp;<span class="op" id="2355244">==</span>&nbsp;<span class="ident" id="2355247">c</span>&nbsp;<span class="op" id="2355249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355255">return</span>&nbsp;<span class="ident" id="2355262">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2355267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2355271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355275">return</span>&nbsp;<span class="op" id="2355282">-</span><span class="num" id="2355283">1</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355286">case</span>&nbsp;<span class="ident" id="2355291">n</span>&nbsp;<span class="op" id="2355293">==</span>&nbsp;<span class="builtinfunc" id="2355296">len</span><span class="op" id="2355299">(</span><span class="ident" id="2355300">s</span><span class="op" id="2355301">)</span><span class="op" id="2355302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355306">if</span>&nbsp;<span class="ident" id="2355309">sep</span>&nbsp;<span class="op" id="2355313">==</span>&nbsp;<span class="ident" id="2355316">s</span>&nbsp;<span class="op" id="2355318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355323">return</span>&nbsp;<span class="num" id="2355330">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2355334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355338">return</span>&nbsp;<span class="op" id="2355345">-</span><span class="num" id="2355346">1</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355349">case</span>&nbsp;<span class="ident" id="2355354">n</span>&nbsp;<span class="op" id="2355356">&gt;</span>&nbsp;<span class="builtinfunc" id="2355358">len</span><span class="op" id="2355361">(</span><span class="ident" id="2355362">s</span><span class="op" id="2355363">)</span><span class="op" id="2355364">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355368">return</span>&nbsp;<span class="op" id="2355375">-</span><span class="num" id="2355376">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2355379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2355382">//&nbsp;Rabin-Karp&nbsp;search&nbsp;from&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2355431">hashsep</span><span class="op" id="2355438">,</span>&nbsp;<span class="ident" id="2355440">pow</span>&nbsp;<span class="op" id="2355444">:=</span>&nbsp;<span class="ident" id="2355447">hashStrRev</span><span class="op" id="2355457">(</span><span class="ident" id="2355458">sep</span><span class="op" id="2355461">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2355464">last</span>&nbsp;<span class="op" id="2355469">:=</span>&nbsp;<span class="builtinfunc" id="2355472">len</span><span class="op" id="2355475">(</span><span class="ident" id="2355476">s</span><span class="op" id="2355477">)</span>&nbsp;<span class="op" id="2355479">-</span>&nbsp;<span class="ident" id="2355481">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355484">var</span>&nbsp;<span class="ident" id="2355488">h</span>&nbsp;<span class="builtintype" id="2355490">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355498">for</span>&nbsp;<span class="ident" id="2355502">i</span>&nbsp;<span class="op" id="2355504">:=</span>&nbsp;<span class="builtinfunc" id="2355507">len</span><span class="op" id="2355510">(</span><span class="ident" id="2355511">s</span><span class="op" id="2355512">)</span>&nbsp;<span class="op" id="2355514">-</span>&nbsp;<span class="num" id="2355516">1</span><span class="op" id="2355517">;</span>&nbsp;<span class="ident" id="2355519">i</span>&nbsp;<span class="op" id="2355521">&gt;=</span>&nbsp;<span class="ident" id="2355524">last</span><span class="op" id="2355528">;</span>&nbsp;<span class="ident" id="2355530">i</span><span class="op" id="2355531">--</span>&nbsp;<span class="op" id="2355534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2355538">h</span>&nbsp;<span class="op" id="2355540">=</span>&nbsp;<span class="ident" id="2355542">h</span><span class="op" id="2355543">*</span><span class="ident" id="2355544">primeRK</span>&nbsp;<span class="op" id="2355552">+</span>&nbsp;<span class="builtintype" id="2355554">uint32</span><span class="op" id="2355560">(</span><span class="ident" id="2355561">s</span><span class="op" id="2355562">[</span><span class="ident" id="2355563">i</span><span class="op" id="2355564">]</span><span class="op" id="2355565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2355568">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355571">if</span>&nbsp;<span class="ident" id="2355574">h</span>&nbsp;<span class="op" id="2355576">==</span>&nbsp;<span class="ident" id="2355579">hashsep</span>&nbsp;<span class="op" id="2355587">&amp;&amp;</span>&nbsp;<span class="ident" id="2355590">s</span><span class="op" id="2355591">[</span><span class="ident" id="2355592">last</span><span class="op" id="2355596">:</span><span class="op" id="2355597">]</span>&nbsp;<span class="op" id="2355599">==</span>&nbsp;<span class="ident" id="2355602">sep</span>&nbsp;<span class="op" id="2355606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355610">return</span>&nbsp;<span class="ident" id="2355617">last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2355623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355626">for</span>&nbsp;<span class="ident" id="2355630">i</span>&nbsp;<span class="op" id="2355632">:=</span>&nbsp;<span class="ident" id="2355635">last</span>&nbsp;<span class="op" id="2355640">-</span>&nbsp;<span class="num" id="2355642">1</span><span class="op" id="2355643">;</span>&nbsp;<span class="ident" id="2355645">i</span>&nbsp;<span class="op" id="2355647">&gt;=</span>&nbsp;<span class="num" id="2355650">0</span><span class="op" id="2355651">;</span>&nbsp;<span class="ident" id="2355653">i</span><span class="op" id="2355654">--</span>&nbsp;<span class="op" id="2355657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2355661">h</span>&nbsp;<span class="op" id="2355663">*=</span>&nbsp;<span class="ident" id="2355666">primeRK</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2355676">h</span>&nbsp;<span class="op" id="2355678">+=</span>&nbsp;<span class="builtintype" id="2355681">uint32</span><span class="op" id="2355687">(</span><span class="ident" id="2355688">s</span><span class="op" id="2355689">[</span><span class="ident" id="2355690">i</span><span class="op" id="2355691">]</span><span class="op" id="2355692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2355696">h</span>&nbsp;<span class="op" id="2355698">-=</span>&nbsp;<span class="ident" id="2355701">pow</span>&nbsp;<span class="op" id="2355705">*</span>&nbsp;<span class="builtintype" id="2355707">uint32</span><span class="op" id="2355713">(</span><span class="ident" id="2355714">s</span><span class="op" id="2355715">[</span><span class="ident" id="2355716">i</span><span class="op" id="2355717">+</span><span class="ident" id="2355718">n</span><span class="op" id="2355719">]</span><span class="op" id="2355720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355724">if</span>&nbsp;<span class="ident" id="2355727">h</span>&nbsp;<span class="op" id="2355729">==</span>&nbsp;<span class="ident" id="2355732">hashsep</span>&nbsp;<span class="op" id="2355740">&amp;&amp;</span>&nbsp;<span class="ident" id="2355743">s</span><span class="op" id="2355744">[</span><span class="ident" id="2355745">i</span><span class="op" id="2355746">:</span><span class="ident" id="2355747">i</span><span class="op" id="2355748">+</span><span class="ident" id="2355749">n</span><span class="op" id="2355750">]</span>&nbsp;<span class="op" id="2355752">==</span>&nbsp;<span class="ident" id="2355755">sep</span>&nbsp;<span class="op" id="2355759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355764">return</span>&nbsp;<span class="ident" id="2355771">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2355775">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2355778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355781">return</span>&nbsp;<span class="op" id="2355788">-</span><span class="num" id="2355789">1</span><br>
<span class="lineno"></span><span class="op" id="2355791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2355794">//&nbsp;IndexRune&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point</span><br>
<span class="lineno">225</span><span class="comment" id="2355873">//&nbsp;r,&nbsp;or&nbsp;-1&nbsp;if&nbsp;rune&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2355914">func</span>&nbsp;<span class="ident" id="2355919">IndexRune</span><span class="op" id="2355928">(</span><span class="ident" id="2355929">s</span>&nbsp;<span class="builtintype" id="2355931">string</span><span class="op" id="2355937">,</span>&nbsp;<span class="ident" id="2355939">r</span>&nbsp;<span class="builtintype" id="2355941">rune</span><span class="op" id="2355945">)</span>&nbsp;<span class="builtintype" id="2355947">int</span>&nbsp;<span class="op" id="2355951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355954">switch</span>&nbsp;<span class="op" id="2355961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355964">case</span>&nbsp;<span class="ident" id="2355969">r</span>&nbsp;<span class="op" id="2355971">&lt;</span>&nbsp;<span class="ident" id="2355973">utf8</span><span class="op" id="2355977">.</span><span class="ident" id="2355978">RuneSelf</span><span class="op" id="2355986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2355990">return</span>&nbsp;<span class="ident" id="2355997">IndexByte</span><span class="op" id="2356006">(</span><span class="ident" id="2356007">s</span><span class="op" id="2356008">,</span>&nbsp;<span class="builtintype" id="2356010">byte</span><span class="op" id="2356014">(</span><span class="ident" id="2356015">r</span><span class="op" id="2356016">)</span><span class="op" id="2356017">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356020">default</span><span class="op" id="2356027">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356031">for</span>&nbsp;<span class="ident" id="2356035">i</span><span class="op" id="2356036">,</span>&nbsp;<span class="ident" id="2356038">c</span>&nbsp;<span class="op" id="2356040">:=</span>&nbsp;<span class="keyword" id="2356043">range</span>&nbsp;<span class="ident" id="2356049">s</span>&nbsp;<span class="op" id="2356051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356056">if</span>&nbsp;<span class="ident" id="2356059">c</span>&nbsp;<span class="op" id="2356061">==</span>&nbsp;<span class="ident" id="2356064">r</span>&nbsp;<span class="op" id="2356066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356072">return</span>&nbsp;<span class="ident" id="2356079">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356084">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356094">return</span>&nbsp;<span class="op" id="2356101">-</span><span class="num" id="2356102">1</span><br>
<span class="lineno"></span><span class="op" id="2356104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="comment" id="2356107">//&nbsp;IndexAny&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;any&nbsp;Unicode&nbsp;code&nbsp;point</span><br>
<span class="lineno"></span><span class="comment" id="2356185">//&nbsp;from&nbsp;chars&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;no&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;chars&nbsp;is&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2356264">func</span>&nbsp;<span class="ident" id="2356269">IndexAny</span><span class="op" id="2356277">(</span><span class="ident" id="2356278">s</span><span class="op" id="2356279">,</span>&nbsp;<span class="ident" id="2356281">chars</span>&nbsp;<span class="builtintype" id="2356287">string</span><span class="op" id="2356293">)</span>&nbsp;<span class="builtintype" id="2356295">int</span>&nbsp;<span class="op" id="2356299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356302">if</span>&nbsp;<span class="builtinfunc" id="2356305">len</span><span class="op" id="2356308">(</span><span class="ident" id="2356309">chars</span><span class="op" id="2356314">)</span>&nbsp;<span class="op" id="2356316">&gt;</span>&nbsp;<span class="num" id="2356318">0</span>&nbsp;<span class="op" id="2356320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356324">for</span>&nbsp;<span class="ident" id="2356328">i</span><span class="op" id="2356329">,</span>&nbsp;<span class="ident" id="2356331">c</span>&nbsp;<span class="op" id="2356333">:=</span>&nbsp;<span class="keyword" id="2356336">range</span>&nbsp;<span class="ident" id="2356342">s</span>&nbsp;<span class="op" id="2356344">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356349">for</span>&nbsp;<span class="ident" id="2356353">_</span><span class="op" id="2356354">,</span>&nbsp;<span class="ident" id="2356356">m</span>&nbsp;<span class="op" id="2356358">:=</span>&nbsp;<span class="keyword" id="2356361">range</span>&nbsp;<span class="ident" id="2356367">chars</span>&nbsp;<span class="op" id="2356373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356379">if</span>&nbsp;<span class="ident" id="2356382">c</span>&nbsp;<span class="op" id="2356384">==</span>&nbsp;<span class="ident" id="2356387">m</span>&nbsp;<span class="op" id="2356389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356396">return</span>&nbsp;<span class="ident" id="2356403">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356414">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356424">return</span>&nbsp;<span class="op" id="2356431">-</span><span class="num" id="2356432">1</span><br>
<span class="lineno"></span><span class="op" id="2356434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="2356437">//&nbsp;LastIndexAny&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;last&nbsp;instance&nbsp;of&nbsp;any&nbsp;Unicode&nbsp;code</span><br>
<span class="lineno"></span><span class="comment" id="2356512">//&nbsp;point&nbsp;from&nbsp;chars&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;no&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;chars&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2356583">//&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2356600">func</span>&nbsp;<span class="ident" id="2356605">LastIndexAny</span><span class="op" id="2356617">(</span><span class="ident" id="2356618">s</span><span class="op" id="2356619">,</span>&nbsp;<span class="ident" id="2356621">chars</span>&nbsp;<span class="builtintype" id="2356627">string</span><span class="op" id="2356633">)</span>&nbsp;<span class="builtintype" id="2356635">int</span>&nbsp;<span class="op" id="2356639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356642">if</span>&nbsp;<span class="builtinfunc" id="2356645">len</span><span class="op" id="2356648">(</span><span class="ident" id="2356649">chars</span><span class="op" id="2356654">)</span>&nbsp;<span class="op" id="2356656">&gt;</span>&nbsp;<span class="num" id="2356658">0</span>&nbsp;<span class="op" id="2356660">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356664">for</span>&nbsp;<span class="ident" id="2356668">i</span>&nbsp;<span class="op" id="2356670">:=</span>&nbsp;<span class="builtinfunc" id="2356673">len</span><span class="op" id="2356676">(</span><span class="ident" id="2356677">s</span><span class="op" id="2356678">)</span><span class="op" id="2356679">;</span>&nbsp;<span class="ident" id="2356681">i</span>&nbsp;<span class="op" id="2356683">&gt;</span>&nbsp;<span class="num" id="2356685">0</span><span class="op" id="2356686">;</span>&nbsp;<span class="op" id="2356688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2356693">rune</span><span class="op" id="2356697">,</span>&nbsp;<span class="ident" id="2356699">size</span>&nbsp;<span class="op" id="2356704">:=</span>&nbsp;<span class="ident" id="2356707">utf8</span><span class="op" id="2356711">.</span><span class="ident" id="2356712">DecodeLastRuneInString</span><span class="op" id="2356734">(</span><span class="ident" id="2356735">s</span><span class="op" id="2356736">[</span><span class="num" id="2356737">0</span><span class="op" id="2356738">:</span><span class="ident" id="2356739">i</span><span class="op" id="2356740">]</span><span class="op" id="2356741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2356746">i</span>&nbsp;<span class="op" id="2356748">-=</span>&nbsp;<span class="ident" id="2356751">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356759">for</span>&nbsp;<span class="ident" id="2356763">_</span><span class="op" id="2356764">,</span>&nbsp;<span class="ident" id="2356766">m</span>&nbsp;<span class="op" id="2356768">:=</span>&nbsp;<span class="keyword" id="2356771">range</span>&nbsp;<span class="ident" id="2356777">chars</span>&nbsp;<span class="op" id="2356783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356789">if</span>&nbsp;<span class="builtintype" id="2356792">rune</span>&nbsp;<span class="op" id="2356797">==</span>&nbsp;<span class="ident" id="2356800">m</span>&nbsp;<span class="op" id="2356802">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356809">return</span>&nbsp;<span class="ident" id="2356816">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2356834">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2356837">return</span>&nbsp;<span class="op" id="2356844">-</span><span class="num" id="2356845">1</span><br>
<span class="lineno"></span><span class="op" id="2356847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2356850">//&nbsp;Generic&nbsp;split:&nbsp;splits&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep,</span><br>
<span class="lineno"></span><span class="comment" id="2356903">//&nbsp;including&nbsp;sepSave&nbsp;bytes&nbsp;of&nbsp;sep&nbsp;in&nbsp;the&nbsp;subarrays.</span><br>
<span class="lineno">275</span><span class="keyword" id="2356955">func</span>&nbsp;<span class="ident" id="2356960">genSplit</span><span class="op" id="2356968">(</span><span class="ident" id="2356969">s</span><span class="op" id="2356970">,</span>&nbsp;<span class="ident" id="2356972">sep</span>&nbsp;<span class="builtintype" id="2356976">string</span><span class="op" id="2356982">,</span>&nbsp;<span class="ident" id="2356984">sepSave</span><span class="op" id="2356991">,</span>&nbsp;<span class="ident" id="2356993">n</span>&nbsp;<span class="builtintype" id="2356995">int</span><span class="op" id="2356998">)</span>&nbsp;<span class="op" id="2357000">[</span><span class="op" id="2357001">]</span><span class="builtintype" id="2357002">string</span>&nbsp;<span class="op" id="2357009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2357012">if</span>&nbsp;<span class="ident" id="2357015">n</span>&nbsp;<span class="op" id="2357017">==</span>&nbsp;<span class="num" id="2357020">0</span>&nbsp;<span class="op" id="2357022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2357026">return</span>&nbsp;<span class="builtintype" id="2357033">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2357038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2357041">if</span>&nbsp;<span class="ident" id="2357044">sep</span>&nbsp;<span class="op" id="2357048">==</span>&nbsp;<span class="string" id="2357051">&#34;&#34;</span>&nbsp;<span class="op" id="2357054">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2357058">return</span>&nbsp;<span class="ident" id="2357065">explode</span><span class="op" id="2357072">(</span><span class="ident" id="2357073">s</span><span class="op" id="2357074">,</span>&nbsp;<span class="ident" id="2357076">n</span><span class="op" id="2357077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2357080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2357083">if</span>&nbsp;<span class="ident" id="2357086">n</span>&nbsp;<span class="op" id="2357088">&lt;</span>&nbsp;<span class="num" id="2357090">0</span>&nbsp;<span class="op" id="2357092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2357096">n</span>&nbsp;<span class="op" id="2357098">=</span>&nbsp;<span class="ident" id="2357100">Count</span><span class="op" id="2357105">(</span><span class="ident" id="2357106">s</span><span class="op" id="2357107">,</span>&nbsp;<span class="ident" id="2357109">sep</span><span class="op" id="2357112">)</span>&nbsp;<span class="op" id="2357114">+</span>&nbsp;<span class="num" id="2357116">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2357119">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2357122">c</span>&nbsp;<span class="op" id="2357124">:=</span>&nbsp;<span class="ident" id="2357127">sep</span><span class="op" id="2357130">[</span><span class="num" id="2357131">0</span><span class="op" id="2357132">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2357135">start</span>&nbsp;<span class="op" id="2357141">:=</span>&nbsp;<span class="num" id="2357144">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2357147">a</span>&nbsp;<span class="op" id="2357149">:=</span>&nbsp;<span class="builtinfunc" id="2357152">make</span><span class="op" id="2357156">(</span><span class="op" id="2357157">[</span><span class="op" id="2357158">]</span><span class="builtintype" id="2357159">string</span><span class="op" id="2357165">,</span>&nbsp;<span class="ident" id="2357167">n</span><span class="op" id="2357168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2357171">na</span>&nbsp;<span class="op" id="2357174">:=</span>&nbsp;<span class="num" id="2357177">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2357180">for</span>&nbsp;<span class="ident" id="2357184">i</span>&nbsp;<span class="op" id="2357186">:=</span>&nbsp;<span class="num" id="2357189">0</span><span class="op" id="2357190">;</span>&nbsp;<span class="ident" id="2357192">i</span><span class="op" id="2357193">+</span><span class="builtinfunc" id="2357194">len</span><span class="op" id="2357197">(</span><span class="ident" id="2357198">sep</span><span class="op" id="2357201">)</span>&nbsp;<span class="op" id="2357203">&lt;=</span>&nbsp;<span class="builtinfunc" id="2357206">len</span><span class="op" id="2357209">(</span><span class="ident" id="2357210">s</span><span class="op" id="2357211">)</span>&nbsp;<span class="op" id="2357213">&amp;&amp;</span>&nbsp;<span class="ident" id="2357216">na</span><span class="op" id="2357218">+</span><span class="num" id="2357219">1</span>&nbsp;<span class="op" id="2357221">&lt;</span>&nbsp;<span class="ident" id="2357223">n</span><span class="op" id="2357224">;</span>&nbsp;<span class="ident" id="2357226">i</span><span class="op" id="2357227">++</span>&nbsp;<span class="op" id="2357230">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2357234">if</span>&nbsp;<span class="ident" id="2357237">s</span><span class="op" id="2357238">[</span><span class="ident" id="2357239">i</span><span class="op" id="2357240">]</span>&nbsp;<span class="op" id="2357242">==</span>&nbsp;<span class="ident" id="2357245">c</span>&nbsp;<span class="op" id="2357247">&amp;&amp;</span>&nbsp;<span class="op" id="2357250">(</span><span class="builtinfunc" id="2357251">len</span><span class="op" id="2357254">(</span><span class="ident" id="2357255">sep</span><span class="op" id="2357258">)</span>&nbsp;<span class="op" id="2357260">==</span>&nbsp;<span class="num" id="2357263">1</span>&nbsp;<span class="op" id="2357265">||</span>&nbsp;<span class="ident" id="2357268">s</span><span class="op" id="2357269">[</span><span class="ident" id="2357270">i</span><span class="op" id="2357271">:</span><span class="ident" id="2357272">i</span><span class="op" id="2357273">+</span><span class="builtinfunc" id="2357274">len</span><span class="op" id="2357277">(</span><span class="ident" id="2357278">sep</span><span class="op" id="2357281">)</span><span class="op" id="2357282">]</span>&nbsp;<span class="op" id="2357284">==</span>&nbsp;<span class="ident" id="2357287">sep</span><span class="op" id="2357290">)</span>&nbsp;<span class="op" id="2357292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2357297">a</span><span class="op" id="2357298">[</span><span class="ident" id="2357299">na</span><span class="op" id="2357301">]</span>&nbsp;<span class="op" id="2357303">=</span>&nbsp;<span class="ident" id="2357305">s</span><span class="op" id="2357306">[</span><span class="ident" id="2357307">start</span>&nbsp;<span class="op" id="2357313">:</span>&nbsp;<span class="ident" id="2357315">i</span><span class="op" id="2357316">+</span><span class="ident" id="2357317">sepSave</span><span class="op" id="2357324">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2357329">na</span><span class="op" id="2357331">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2357337">start</span>&nbsp;<span class="op" id="2357343">=</span>&nbsp;<span class="ident" id="2357345">i</span>&nbsp;<span class="op" id="2357347">+</span>&nbsp;<span class="builtinfunc" id="2357349">len</span><span class="op" id="2357352">(</span><span class="ident" id="2357353">sep</span><span class="op" id="2357356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2357361">i</span>&nbsp;<span class="op" id="2357363">+=</span>&nbsp;<span class="builtinfunc" id="2357366">len</span><span class="op" id="2357369">(</span><span class="ident" id="2357370">sep</span><span class="op" id="2357373">)</span>&nbsp;<span class="op" id="2357375">-</span>&nbsp;<span class="num" id="2357377">1</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2357381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2357384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2357387">a</span><span class="op" id="2357388">[</span><span class="ident" id="2357389">na</span><span class="op" id="2357391">]</span>&nbsp;<span class="op" id="2357393">=</span>&nbsp;<span class="ident" id="2357395">s</span><span class="op" id="2357396">[</span><span class="ident" id="2357397">start</span><span class="op" id="2357402">:</span><span class="op" id="2357403">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2357406">return</span>&nbsp;<span class="ident" id="2357413">a</span><span class="op" id="2357414">[</span><span class="num" id="2357415">0</span>&nbsp;<span class="op" id="2357417">:</span>&nbsp;<span class="ident" id="2357419">na</span><span class="op" id="2357421">+</span><span class="num" id="2357422">1</span><span class="op" id="2357423">]</span><br>
<span class="lineno"></span><span class="op" id="2357425">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="2357428">//&nbsp;SplitN&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;sep&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2357503">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;separators.</span><br>
<span class="lineno"></span><span class="comment" id="2357547">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitN&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="2357608">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno">305</span><span class="comment" id="2357668">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="2357752">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="2357801">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="2357828">func</span>&nbsp;<span class="ident" id="2357833">SplitN</span><span class="op" id="2357839">(</span><span class="ident" id="2357840">s</span><span class="op" id="2357841">,</span>&nbsp;<span class="ident" id="2357843">sep</span>&nbsp;<span class="builtintype" id="2357847">string</span><span class="op" id="2357853">,</span>&nbsp;<span class="ident" id="2357855">n</span>&nbsp;<span class="builtintype" id="2357857">int</span><span class="op" id="2357860">)</span>&nbsp;<span class="op" id="2357862">[</span><span class="op" id="2357863">]</span><span class="builtintype" id="2357864">string</span>&nbsp;<span class="op" id="2357871">{</span>&nbsp;<span class="keyword" id="2357873">return</span>&nbsp;<span class="ident" id="2357880">genSplit</span><span class="op" id="2357888">(</span><span class="ident" id="2357889">s</span><span class="op" id="2357890">,</span>&nbsp;<span class="ident" id="2357892">sep</span><span class="op" id="2357895">,</span>&nbsp;<span class="num" id="2357897">0</span><span class="op" id="2357898">,</span>&nbsp;<span class="ident" id="2357900">n</span><span class="op" id="2357901">)</span>&nbsp;<span class="op" id="2357903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="2357906">//&nbsp;SplitAfterN&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2357977">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;those&nbsp;substrings.</span><br>
<span class="lineno"></span><span class="comment" id="2358017">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitAfterN&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="2358083">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno"></span><span class="comment" id="2358143">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno">315</span><span class="comment" id="2358227">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="2358276">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="2358303">func</span>&nbsp;<span class="ident" id="2358308">SplitAfterN</span><span class="op" id="2358319">(</span><span class="ident" id="2358320">s</span><span class="op" id="2358321">,</span>&nbsp;<span class="ident" id="2358323">sep</span>&nbsp;<span class="builtintype" id="2358327">string</span><span class="op" id="2358333">,</span>&nbsp;<span class="ident" id="2358335">n</span>&nbsp;<span class="builtintype" id="2358337">int</span><span class="op" id="2358340">)</span>&nbsp;<span class="op" id="2358342">[</span><span class="op" id="2358343">]</span><span class="builtintype" id="2358344">string</span>&nbsp;<span class="op" id="2358351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2358354">return</span>&nbsp;<span class="ident" id="2358361">genSplit</span><span class="op" id="2358369">(</span><span class="ident" id="2358370">s</span><span class="op" id="2358371">,</span>&nbsp;<span class="ident" id="2358373">sep</span><span class="op" id="2358376">,</span>&nbsp;<span class="builtinfunc" id="2358378">len</span><span class="op" id="2358381">(</span><span class="ident" id="2358382">sep</span><span class="op" id="2358385">)</span><span class="op" id="2358386">,</span>&nbsp;<span class="ident" id="2358388">n</span><span class="op" id="2358389">)</span><br>
<span class="lineno"></span><span class="op" id="2358391">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="2358394">//&nbsp;Split&nbsp;slices&nbsp;s&nbsp;into&nbsp;all&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;sep&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2358472">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;separators.</span><br>
<span class="lineno"></span><span class="comment" id="2358516">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;Split&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="2358576">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;SplitN&nbsp;with&nbsp;a&nbsp;count&nbsp;of&nbsp;-1.</span><br>
<span class="lineno">325</span><span class="keyword" id="2358626">func</span>&nbsp;<span class="ident" id="2358631">Split</span><span class="op" id="2358636">(</span><span class="ident" id="2358637">s</span><span class="op" id="2358638">,</span>&nbsp;<span class="ident" id="2358640">sep</span>&nbsp;<span class="builtintype" id="2358644">string</span><span class="op" id="2358650">)</span>&nbsp;<span class="op" id="2358652">[</span><span class="op" id="2358653">]</span><span class="builtintype" id="2358654">string</span>&nbsp;<span class="op" id="2358661">{</span>&nbsp;<span class="keyword" id="2358663">return</span>&nbsp;<span class="ident" id="2358670">genSplit</span><span class="op" id="2358678">(</span><span class="ident" id="2358679">s</span><span class="op" id="2358680">,</span>&nbsp;<span class="ident" id="2358682">sep</span><span class="op" id="2358685">,</span>&nbsp;<span class="num" id="2358687">0</span><span class="op" id="2358688">,</span>&nbsp;<span class="op" id="2358690">-</span><span class="num" id="2358691">1</span><span class="op" id="2358692">)</span>&nbsp;<span class="op" id="2358694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2358697">//&nbsp;SplitAfter&nbsp;slices&nbsp;s&nbsp;into&nbsp;all&nbsp;substrings&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2358771">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;those&nbsp;substrings.</span><br>
<span class="lineno"></span><span class="comment" id="2358811">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitAfter&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno">330</span><span class="comment" id="2358876">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;SplitAfterN&nbsp;with&nbsp;a&nbsp;count&nbsp;of&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="2358931">func</span>&nbsp;<span class="ident" id="2358936">SplitAfter</span><span class="op" id="2358946">(</span><span class="ident" id="2358947">s</span><span class="op" id="2358948">,</span>&nbsp;<span class="ident" id="2358950">sep</span>&nbsp;<span class="builtintype" id="2358954">string</span><span class="op" id="2358960">)</span>&nbsp;<span class="op" id="2358962">[</span><span class="op" id="2358963">]</span><span class="builtintype" id="2358964">string</span>&nbsp;<span class="op" id="2358971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2358974">return</span>&nbsp;<span class="ident" id="2358981">genSplit</span><span class="op" id="2358989">(</span><span class="ident" id="2358990">s</span><span class="op" id="2358991">,</span>&nbsp;<span class="ident" id="2358993">sep</span><span class="op" id="2358996">,</span>&nbsp;<span class="builtinfunc" id="2358998">len</span><span class="op" id="2359001">(</span><span class="ident" id="2359002">sep</span><span class="op" id="2359005">)</span><span class="op" id="2359006">,</span>&nbsp;<span class="op" id="2359008">-</span><span class="num" id="2359009">1</span><span class="op" id="2359010">)</span><br>
<span class="lineno"></span><span class="op" id="2359012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="comment" id="2359015">//&nbsp;Fields&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;around&nbsp;each&nbsp;instance&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;consecutive&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span><span class="comment" id="2359105">//&nbsp;characters,&nbsp;as&nbsp;defined&nbsp;by&nbsp;unicode.IsSpace,&nbsp;returning&nbsp;an&nbsp;array&nbsp;of&nbsp;substrings&nbsp;of&nbsp;s&nbsp;or&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="2359195">//&nbsp;empty&nbsp;list&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="2359241">func</span>&nbsp;<span class="ident" id="2359246">Fields</span><span class="op" id="2359252">(</span><span class="ident" id="2359253">s</span>&nbsp;<span class="builtintype" id="2359255">string</span><span class="op" id="2359261">)</span>&nbsp;<span class="op" id="2359263">[</span><span class="op" id="2359264">]</span><span class="builtintype" id="2359265">string</span>&nbsp;<span class="op" id="2359272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2359275">return</span>&nbsp;<span class="ident" id="2359282">FieldsFunc</span><span class="op" id="2359292">(</span><span class="ident" id="2359293">s</span><span class="op" id="2359294">,</span>&nbsp;<span class="ident" id="2359296">unicode</span><span class="op" id="2359303">.</span><span class="ident" id="2359304">IsSpace</span><span class="op" id="2359311">)</span><br>
<span class="lineno">340</span><span class="op" id="2359313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2359316">//&nbsp;FieldsFunc&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;at&nbsp;each&nbsp;run&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)</span><br>
<span class="lineno"></span><span class="comment" id="2359403">//&nbsp;and&nbsp;returns&nbsp;an&nbsp;array&nbsp;of&nbsp;slices&nbsp;of&nbsp;s.&nbsp;If&nbsp;all&nbsp;code&nbsp;points&nbsp;in&nbsp;s&nbsp;satisfy&nbsp;f(c)&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2359487">//&nbsp;string&nbsp;is&nbsp;empty,&nbsp;an&nbsp;empty&nbsp;slice&nbsp;is&nbsp;returned.</span><br>
<span class="lineno">345</span><span class="comment" id="2359535">//&nbsp;FieldsFunc&nbsp;makes&nbsp;no&nbsp;guarantees&nbsp;about&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;it&nbsp;calls&nbsp;f(c).</span><br>
<span class="lineno"></span><span class="comment" id="2359609">//&nbsp;If&nbsp;f&nbsp;does&nbsp;not&nbsp;return&nbsp;consistent&nbsp;results&nbsp;for&nbsp;a&nbsp;given&nbsp;c,&nbsp;FieldsFunc&nbsp;may&nbsp;crash.</span><br>
<span class="lineno"></span><span class="keyword" id="2359689">func</span>&nbsp;<span class="ident" id="2359694">FieldsFunc</span><span class="op" id="2359704">(</span><span class="ident" id="2359705">s</span>&nbsp;<span class="builtintype" id="2359707">string</span><span class="op" id="2359713">,</span>&nbsp;<span class="ident" id="2359715">f</span>&nbsp;<span class="keyword" id="2359717">func</span><span class="op" id="2359721">(</span><span class="builtintype" id="2359722">rune</span><span class="op" id="2359726">)</span>&nbsp;<span class="builtintype" id="2359728">bool</span><span class="op" id="2359732">)</span>&nbsp;<span class="op" id="2359734">[</span><span class="op" id="2359735">]</span><span class="builtintype" id="2359736">string</span>&nbsp;<span class="op" id="2359743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2359746">//&nbsp;First&nbsp;count&nbsp;the&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2359774">n</span>&nbsp;<span class="op" id="2359776">:=</span>&nbsp;<span class="num" id="2359779">0</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2359782">inField</span>&nbsp;<span class="op" id="2359790">:=</span>&nbsp;<span class="builtintype" id="2359793">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2359800">for</span>&nbsp;<span class="ident" id="2359804">_</span><span class="op" id="2359805">,</span>&nbsp;<span class="builtintype" id="2359807">rune</span>&nbsp;<span class="op" id="2359812">:=</span>&nbsp;<span class="keyword" id="2359815">range</span>&nbsp;<span class="ident" id="2359821">s</span>&nbsp;<span class="op" id="2359823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2359827">wasInField</span>&nbsp;<span class="op" id="2359838">:=</span>&nbsp;<span class="ident" id="2359841">inField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2359851">inField</span>&nbsp;<span class="op" id="2359859">=</span>&nbsp;<span class="op" id="2359861">!</span><span class="ident" id="2359862">f</span><span class="op" id="2359863">(</span><span class="builtintype" id="2359864">rune</span><span class="op" id="2359868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2359872">if</span>&nbsp;<span class="ident" id="2359875">inField</span>&nbsp;<span class="op" id="2359883">&amp;&amp;</span>&nbsp;<span class="op" id="2359886">!</span><span class="ident" id="2359887">wasInField</span>&nbsp;<span class="op" id="2359898">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2359903">n</span><span class="op" id="2359904">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2359909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2359912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2359916">//&nbsp;Now&nbsp;create&nbsp;them.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2359937">a</span>&nbsp;<span class="op" id="2359939">:=</span>&nbsp;<span class="builtinfunc" id="2359942">make</span><span class="op" id="2359946">(</span><span class="op" id="2359947">[</span><span class="op" id="2359948">]</span><span class="builtintype" id="2359949">string</span><span class="op" id="2359955">,</span>&nbsp;<span class="ident" id="2359957">n</span><span class="op" id="2359958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2359961">na</span>&nbsp;<span class="op" id="2359964">:=</span>&nbsp;<span class="num" id="2359967">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2359970">fieldStart</span>&nbsp;<span class="op" id="2359981">:=</span>&nbsp;<span class="op" id="2359984">-</span><span class="num" id="2359985">1</span>&nbsp;<span class="comment" id="2359987">//&nbsp;Set&nbsp;to&nbsp;-1&nbsp;when&nbsp;looking&nbsp;for&nbsp;start&nbsp;of&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360034">for</span>&nbsp;<span class="ident" id="2360038">i</span><span class="op" id="2360039">,</span>&nbsp;<span class="builtintype" id="2360041">rune</span>&nbsp;<span class="op" id="2360046">:=</span>&nbsp;<span class="keyword" id="2360049">range</span>&nbsp;<span class="ident" id="2360055">s</span>&nbsp;<span class="op" id="2360057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360061">if</span>&nbsp;<span class="ident" id="2360064">f</span><span class="op" id="2360065">(</span><span class="builtintype" id="2360066">rune</span><span class="op" id="2360070">)</span>&nbsp;<span class="op" id="2360072">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360077">if</span>&nbsp;<span class="ident" id="2360080">fieldStart</span>&nbsp;<span class="op" id="2360091">&gt;=</span>&nbsp;<span class="num" id="2360094">0</span>&nbsp;<span class="op" id="2360096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360102">a</span><span class="op" id="2360103">[</span><span class="ident" id="2360104">na</span><span class="op" id="2360106">]</span>&nbsp;<span class="op" id="2360108">=</span>&nbsp;<span class="ident" id="2360110">s</span><span class="op" id="2360111">[</span><span class="ident" id="2360112">fieldStart</span><span class="op" id="2360122">:</span><span class="ident" id="2360123">i</span><span class="op" id="2360124">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360130">na</span><span class="op" id="2360132">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360139">fieldStart</span>&nbsp;<span class="op" id="2360150">=</span>&nbsp;<span class="op" id="2360152">-</span><span class="num" id="2360153">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2360158">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2360162">}</span>&nbsp;<span class="keyword" id="2360164">else</span>&nbsp;<span class="keyword" id="2360169">if</span>&nbsp;<span class="ident" id="2360172">fieldStart</span>&nbsp;<span class="op" id="2360183">==</span>&nbsp;<span class="op" id="2360186">-</span><span class="num" id="2360187">1</span>&nbsp;<span class="op" id="2360189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360194">fieldStart</span>&nbsp;<span class="op" id="2360205">=</span>&nbsp;<span class="ident" id="2360207">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2360211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2360214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360217">if</span>&nbsp;<span class="ident" id="2360220">fieldStart</span>&nbsp;<span class="op" id="2360231">&gt;=</span>&nbsp;<span class="num" id="2360234">0</span>&nbsp;<span class="op" id="2360236">{</span>&nbsp;<span class="comment" id="2360238">//&nbsp;Last&nbsp;field&nbsp;might&nbsp;end&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360272">a</span><span class="op" id="2360273">[</span><span class="ident" id="2360274">na</span><span class="op" id="2360276">]</span>&nbsp;<span class="op" id="2360278">=</span>&nbsp;<span class="ident" id="2360280">s</span><span class="op" id="2360281">[</span><span class="ident" id="2360282">fieldStart</span><span class="op" id="2360292">:</span><span class="op" id="2360293">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2360296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360299">return</span>&nbsp;<span class="ident" id="2360306">a</span><br>
<span class="lineno"></span><span class="op" id="2360308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="comment" id="2360311">//&nbsp;Join&nbsp;concatenates&nbsp;the&nbsp;elements&nbsp;of&nbsp;a&nbsp;to&nbsp;create&nbsp;a&nbsp;single&nbsp;string.&nbsp;&nbsp;&nbsp;The&nbsp;separator&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="2360400">//&nbsp;sep&nbsp;is&nbsp;placed&nbsp;between&nbsp;elements&nbsp;in&nbsp;the&nbsp;resulting&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2360459">func</span>&nbsp;<span class="ident" id="2360464">Join</span><span class="op" id="2360468">(</span><span class="ident" id="2360469">a</span>&nbsp;<span class="op" id="2360471">[</span><span class="op" id="2360472">]</span><span class="builtintype" id="2360473">string</span><span class="op" id="2360479">,</span>&nbsp;<span class="ident" id="2360481">sep</span>&nbsp;<span class="builtintype" id="2360485">string</span><span class="op" id="2360491">)</span>&nbsp;<span class="builtintype" id="2360493">string</span>&nbsp;<span class="op" id="2360500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360503">if</span>&nbsp;<span class="builtinfunc" id="2360506">len</span><span class="op" id="2360509">(</span><span class="ident" id="2360510">a</span><span class="op" id="2360511">)</span>&nbsp;<span class="op" id="2360513">==</span>&nbsp;<span class="num" id="2360516">0</span>&nbsp;<span class="op" id="2360518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360522">return</span>&nbsp;<span class="string" id="2360529">&#34;&#34;</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2360533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360536">if</span>&nbsp;<span class="builtinfunc" id="2360539">len</span><span class="op" id="2360542">(</span><span class="ident" id="2360543">a</span><span class="op" id="2360544">)</span>&nbsp;<span class="op" id="2360546">==</span>&nbsp;<span class="num" id="2360549">1</span>&nbsp;<span class="op" id="2360551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360555">return</span>&nbsp;<span class="ident" id="2360562">a</span><span class="op" id="2360563">[</span><span class="num" id="2360564">0</span><span class="op" id="2360565">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2360568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360571">n</span>&nbsp;<span class="op" id="2360573">:=</span>&nbsp;<span class="builtinfunc" id="2360576">len</span><span class="op" id="2360579">(</span><span class="ident" id="2360580">sep</span><span class="op" id="2360583">)</span>&nbsp;<span class="op" id="2360585">*</span>&nbsp;<span class="op" id="2360587">(</span><span class="builtinfunc" id="2360588">len</span><span class="op" id="2360591">(</span><span class="ident" id="2360592">a</span><span class="op" id="2360593">)</span>&nbsp;<span class="op" id="2360595">-</span>&nbsp;<span class="num" id="2360597">1</span><span class="op" id="2360598">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360601">for</span>&nbsp;<span class="ident" id="2360605">i</span>&nbsp;<span class="op" id="2360607">:=</span>&nbsp;<span class="num" id="2360610">0</span><span class="op" id="2360611">;</span>&nbsp;<span class="ident" id="2360613">i</span>&nbsp;<span class="op" id="2360615">&lt;</span>&nbsp;<span class="builtinfunc" id="2360617">len</span><span class="op" id="2360620">(</span><span class="ident" id="2360621">a</span><span class="op" id="2360622">)</span><span class="op" id="2360623">;</span>&nbsp;<span class="ident" id="2360625">i</span><span class="op" id="2360626">++</span>&nbsp;<span class="op" id="2360629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360633">n</span>&nbsp;<span class="op" id="2360635">+=</span>&nbsp;<span class="builtinfunc" id="2360638">len</span><span class="op" id="2360641">(</span><span class="ident" id="2360642">a</span><span class="op" id="2360643">[</span><span class="ident" id="2360644">i</span><span class="op" id="2360645">]</span><span class="op" id="2360646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2360649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360653">b</span>&nbsp;<span class="op" id="2360655">:=</span>&nbsp;<span class="builtinfunc" id="2360658">make</span><span class="op" id="2360662">(</span><span class="op" id="2360663">[</span><span class="op" id="2360664">]</span><span class="builtintype" id="2360665">byte</span><span class="op" id="2360669">,</span>&nbsp;<span class="ident" id="2360671">n</span><span class="op" id="2360672">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360675">bp</span>&nbsp;<span class="op" id="2360678">:=</span>&nbsp;<span class="builtinfunc" id="2360681">copy</span><span class="op" id="2360685">(</span><span class="ident" id="2360686">b</span><span class="op" id="2360687">,</span>&nbsp;<span class="ident" id="2360689">a</span><span class="op" id="2360690">[</span><span class="num" id="2360691">0</span><span class="op" id="2360692">]</span><span class="op" id="2360693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360696">for</span>&nbsp;<span class="ident" id="2360700">_</span><span class="op" id="2360701">,</span>&nbsp;<span class="ident" id="2360703">s</span>&nbsp;<span class="op" id="2360705">:=</span>&nbsp;<span class="keyword" id="2360708">range</span>&nbsp;<span class="ident" id="2360714">a</span><span class="op" id="2360715">[</span><span class="num" id="2360716">1</span><span class="op" id="2360717">:</span><span class="op" id="2360718">]</span>&nbsp;<span class="op" id="2360720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360724">bp</span>&nbsp;<span class="op" id="2360727">+=</span>&nbsp;<span class="builtinfunc" id="2360730">copy</span><span class="op" id="2360734">(</span><span class="ident" id="2360735">b</span><span class="op" id="2360736">[</span><span class="ident" id="2360737">bp</span><span class="op" id="2360739">:</span><span class="op" id="2360740">]</span><span class="op" id="2360741">,</span>&nbsp;<span class="ident" id="2360743">sep</span><span class="op" id="2360746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2360750">bp</span>&nbsp;<span class="op" id="2360753">+=</span>&nbsp;<span class="builtinfunc" id="2360756">copy</span><span class="op" id="2360760">(</span><span class="ident" id="2360761">b</span><span class="op" id="2360762">[</span><span class="ident" id="2360763">bp</span><span class="op" id="2360765">:</span><span class="op" id="2360766">]</span><span class="op" id="2360767">,</span>&nbsp;<span class="ident" id="2360769">s</span><span class="op" id="2360770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2360773">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360776">return</span>&nbsp;<span class="builtintype" id="2360783">string</span><span class="op" id="2360789">(</span><span class="ident" id="2360790">b</span><span class="op" id="2360791">)</span><br>
<span class="lineno"></span><span class="op" id="2360793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2360796">//&nbsp;HasPrefix&nbsp;tests&nbsp;whether&nbsp;the&nbsp;string&nbsp;s&nbsp;begins&nbsp;with&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="2360856">func</span>&nbsp;<span class="ident" id="2360861">HasPrefix</span><span class="op" id="2360870">(</span><span class="ident" id="2360871">s</span><span class="op" id="2360872">,</span>&nbsp;<span class="ident" id="2360874">prefix</span>&nbsp;<span class="builtintype" id="2360881">string</span><span class="op" id="2360887">)</span>&nbsp;<span class="builtintype" id="2360889">bool</span>&nbsp;<span class="op" id="2360894">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2360897">return</span>&nbsp;<span class="builtinfunc" id="2360904">len</span><span class="op" id="2360907">(</span><span class="ident" id="2360908">s</span><span class="op" id="2360909">)</span>&nbsp;<span class="op" id="2360911">&gt;=</span>&nbsp;<span class="builtinfunc" id="2360914">len</span><span class="op" id="2360917">(</span><span class="ident" id="2360918">prefix</span><span class="op" id="2360924">)</span>&nbsp;<span class="op" id="2360926">&amp;&amp;</span>&nbsp;<span class="ident" id="2360929">s</span><span class="op" id="2360930">[</span><span class="num" id="2360931">0</span><span class="op" id="2360932">:</span><span class="builtinfunc" id="2360933">len</span><span class="op" id="2360936">(</span><span class="ident" id="2360937">prefix</span><span class="op" id="2360943">)</span><span class="op" id="2360944">]</span>&nbsp;<span class="op" id="2360946">==</span>&nbsp;<span class="ident" id="2360949">prefix</span><br>
<span class="lineno"></span><span class="op" id="2360956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2360959">//&nbsp;HasSuffix&nbsp;tests&nbsp;whether&nbsp;the&nbsp;string&nbsp;s&nbsp;ends&nbsp;with&nbsp;suffix.</span><br>
<span class="lineno"></span><span class="keyword" id="2361017">func</span>&nbsp;<span class="ident" id="2361022">HasSuffix</span><span class="op" id="2361031">(</span><span class="ident" id="2361032">s</span><span class="op" id="2361033">,</span>&nbsp;<span class="ident" id="2361035">suffix</span>&nbsp;<span class="builtintype" id="2361042">string</span><span class="op" id="2361048">)</span>&nbsp;<span class="builtintype" id="2361050">bool</span>&nbsp;<span class="op" id="2361055">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2361058">return</span>&nbsp;<span class="builtinfunc" id="2361065">len</span><span class="op" id="2361068">(</span><span class="ident" id="2361069">s</span><span class="op" id="2361070">)</span>&nbsp;<span class="op" id="2361072">&gt;=</span>&nbsp;<span class="builtinfunc" id="2361075">len</span><span class="op" id="2361078">(</span><span class="ident" id="2361079">suffix</span><span class="op" id="2361085">)</span>&nbsp;<span class="op" id="2361087">&amp;&amp;</span>&nbsp;<span class="ident" id="2361090">s</span><span class="op" id="2361091">[</span><span class="builtinfunc" id="2361092">len</span><span class="op" id="2361095">(</span><span class="ident" id="2361096">s</span><span class="op" id="2361097">)</span><span class="op" id="2361098">-</span><span class="builtinfunc" id="2361099">len</span><span class="op" id="2361102">(</span><span class="ident" id="2361103">suffix</span><span class="op" id="2361109">)</span><span class="op" id="2361110">:</span><span class="op" id="2361111">]</span>&nbsp;<span class="op" id="2361113">==</span>&nbsp;<span class="ident" id="2361116">suffix</span><br>
<span class="lineno"></span><span class="op" id="2361123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2361126">//&nbsp;Map&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;its&nbsp;characters&nbsp;modified</span><br>
<span class="lineno"></span><span class="comment" id="2361197">//&nbsp;according&nbsp;to&nbsp;the&nbsp;mapping&nbsp;function.&nbsp;If&nbsp;mapping&nbsp;returns&nbsp;a&nbsp;negative&nbsp;value,&nbsp;the&nbsp;character&nbsp;is</span><br>
<span class="lineno">415</span><span class="comment" id="2361289">//&nbsp;dropped&nbsp;from&nbsp;the&nbsp;string&nbsp;with&nbsp;no&nbsp;replacement.</span><br>
<span class="lineno"></span><span class="keyword" id="2361337">func</span>&nbsp;<span class="ident" id="2361342">Map</span><span class="op" id="2361345">(</span><span class="ident" id="2361346">mapping</span>&nbsp;<span class="keyword" id="2361354">func</span><span class="op" id="2361358">(</span><span class="builtintype" id="2361359">rune</span><span class="op" id="2361363">)</span>&nbsp;<span class="builtintype" id="2361365">rune</span><span class="op" id="2361369">,</span>&nbsp;<span class="ident" id="2361371">s</span>&nbsp;<span class="builtintype" id="2361373">string</span><span class="op" id="2361379">)</span>&nbsp;<span class="builtintype" id="2361381">string</span>&nbsp;<span class="op" id="2361388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2361391">//&nbsp;In&nbsp;the&nbsp;worst&nbsp;case,&nbsp;the&nbsp;string&nbsp;can&nbsp;grow&nbsp;when&nbsp;mapped,&nbsp;making</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2361454">//&nbsp;things&nbsp;unpleasant.&nbsp;&nbsp;But&nbsp;it&#39;s&nbsp;so&nbsp;rare&nbsp;we&nbsp;barge&nbsp;in&nbsp;assuming&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2361521">//&nbsp;fine.&nbsp;&nbsp;It&nbsp;could&nbsp;also&nbsp;shrink&nbsp;but&nbsp;that&nbsp;falls&nbsp;out&nbsp;naturally.</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2361583">maxbytes</span>&nbsp;<span class="op" id="2361592">:=</span>&nbsp;<span class="builtinfunc" id="2361595">len</span><span class="op" id="2361598">(</span><span class="ident" id="2361599">s</span><span class="op" id="2361600">)</span>&nbsp;<span class="comment" id="2361602">//&nbsp;length&nbsp;of&nbsp;b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2361618">nbytes</span>&nbsp;<span class="op" id="2361625">:=</span>&nbsp;<span class="num" id="2361628">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2361637">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;encoded&nbsp;in&nbsp;b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2361670">//&nbsp;The&nbsp;output&nbsp;buffer&nbsp;b&nbsp;is&nbsp;initialized&nbsp;on&nbsp;demand,&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2361730">//&nbsp;time&nbsp;a&nbsp;character&nbsp;differs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2361760">var</span>&nbsp;<span class="ident" id="2361764">b</span>&nbsp;<span class="op" id="2361766">[</span><span class="op" id="2361767">]</span><span class="builtintype" id="2361768">byte</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2361775">for</span>&nbsp;<span class="ident" id="2361779">i</span><span class="op" id="2361780">,</span>&nbsp;<span class="ident" id="2361782">c</span>&nbsp;<span class="op" id="2361784">:=</span>&nbsp;<span class="keyword" id="2361787">range</span>&nbsp;<span class="ident" id="2361793">s</span>&nbsp;<span class="op" id="2361795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2361799">r</span>&nbsp;<span class="op" id="2361801">:=</span>&nbsp;<span class="ident" id="2361804">mapping</span><span class="op" id="2361811">(</span><span class="ident" id="2361812">c</span><span class="op" id="2361813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2361817">if</span>&nbsp;<span class="ident" id="2361820">b</span>&nbsp;<span class="op" id="2361822">==</span>&nbsp;<span class="builtintype" id="2361825">nil</span>&nbsp;<span class="op" id="2361829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2361834">if</span>&nbsp;<span class="ident" id="2361837">r</span>&nbsp;<span class="op" id="2361839">==</span>&nbsp;<span class="ident" id="2361842">c</span>&nbsp;<span class="op" id="2361844">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2361850">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2361862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2361867">b</span>&nbsp;<span class="op" id="2361869">=</span>&nbsp;<span class="builtinfunc" id="2361871">make</span><span class="op" id="2361875">(</span><span class="op" id="2361876">[</span><span class="op" id="2361877">]</span><span class="builtintype" id="2361878">byte</span><span class="op" id="2361882">,</span>&nbsp;<span class="ident" id="2361884">maxbytes</span><span class="op" id="2361892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2361897">nbytes</span>&nbsp;<span class="op" id="2361904">=</span>&nbsp;<span class="builtinfunc" id="2361906">copy</span><span class="op" id="2361910">(</span><span class="ident" id="2361911">b</span><span class="op" id="2361912">,</span>&nbsp;<span class="ident" id="2361914">s</span><span class="op" id="2361915">[</span><span class="op" id="2361916">:</span><span class="ident" id="2361917">i</span><span class="op" id="2361918">]</span><span class="op" id="2361919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2361923">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2361927">if</span>&nbsp;<span class="ident" id="2361930">r</span>&nbsp;<span class="op" id="2361932">&gt;=</span>&nbsp;<span class="num" id="2361935">0</span>&nbsp;<span class="op" id="2361937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2361942">wid</span>&nbsp;<span class="op" id="2361946">:=</span>&nbsp;<span class="num" id="2361949">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2361954">if</span>&nbsp;<span class="ident" id="2361957">r</span>&nbsp;<span class="op" id="2361959">&gt;=</span>&nbsp;<span class="ident" id="2361962">utf8</span><span class="op" id="2361966">.</span><span class="ident" id="2361967">RuneSelf</span>&nbsp;<span class="op" id="2361976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2361982">wid</span>&nbsp;<span class="op" id="2361986">=</span>&nbsp;<span class="ident" id="2361988">utf8</span><span class="op" id="2361992">.</span><span class="ident" id="2361993">RuneLen</span><span class="op" id="2362000">(</span><span class="ident" id="2362001">r</span><span class="op" id="2362002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2362007">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2362012">if</span>&nbsp;<span class="ident" id="2362015">nbytes</span><span class="op" id="2362021">+</span><span class="ident" id="2362022">wid</span>&nbsp;<span class="op" id="2362026">&gt;</span>&nbsp;<span class="ident" id="2362028">maxbytes</span>&nbsp;<span class="op" id="2362037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2362043">//&nbsp;Grow&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2362067">maxbytes</span>&nbsp;<span class="op" id="2362076">=</span>&nbsp;<span class="ident" id="2362078">maxbytes</span><span class="op" id="2362086">*</span><span class="num" id="2362087">2</span>&nbsp;<span class="op" id="2362089">+</span>&nbsp;<span class="ident" id="2362091">utf8</span><span class="op" id="2362095">.</span><span class="ident" id="2362096">UTFMax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2362107">nb</span>&nbsp;<span class="op" id="2362110">:=</span>&nbsp;<span class="builtinfunc" id="2362113">make</span><span class="op" id="2362117">(</span><span class="op" id="2362118">[</span><span class="op" id="2362119">]</span><span class="builtintype" id="2362120">byte</span><span class="op" id="2362124">,</span>&nbsp;<span class="ident" id="2362126">maxbytes</span><span class="op" id="2362134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2362140">copy</span><span class="op" id="2362144">(</span><span class="ident" id="2362145">nb</span><span class="op" id="2362147">,</span>&nbsp;<span class="ident" id="2362149">b</span><span class="op" id="2362150">[</span><span class="num" id="2362151">0</span><span class="op" id="2362152">:</span><span class="ident" id="2362153">nbytes</span><span class="op" id="2362159">]</span><span class="op" id="2362160">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2362166">b</span>&nbsp;<span class="op" id="2362168">=</span>&nbsp;<span class="ident" id="2362170">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2362176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2362181">nbytes</span>&nbsp;<span class="op" id="2362188">+=</span>&nbsp;<span class="ident" id="2362191">utf8</span><span class="op" id="2362195">.</span><span class="ident" id="2362196">EncodeRune</span><span class="op" id="2362206">(</span><span class="ident" id="2362207">b</span><span class="op" id="2362208">[</span><span class="ident" id="2362209">nbytes</span><span class="op" id="2362215">:</span><span class="ident" id="2362216">maxbytes</span><span class="op" id="2362224">]</span><span class="op" id="2362225">,</span>&nbsp;<span class="ident" id="2362227">r</span><span class="op" id="2362228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2362232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2362235">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2362238">if</span>&nbsp;<span class="ident" id="2362241">b</span>&nbsp;<span class="op" id="2362243">==</span>&nbsp;<span class="builtintype" id="2362246">nil</span>&nbsp;<span class="op" id="2362250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2362254">return</span>&nbsp;<span class="ident" id="2362261">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2362264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2362267">return</span>&nbsp;<span class="builtintype" id="2362274">string</span><span class="op" id="2362280">(</span><span class="ident" id="2362281">b</span><span class="op" id="2362282">[</span><span class="num" id="2362283">0</span><span class="op" id="2362284">:</span><span class="ident" id="2362285">nbytes</span><span class="op" id="2362291">]</span><span class="op" id="2362292">)</span><br>
<span class="lineno"></span><span class="op" id="2362294">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span><span class="comment" id="2362297">//&nbsp;Repeat&nbsp;returns&nbsp;a&nbsp;new&nbsp;string&nbsp;consisting&nbsp;of&nbsp;count&nbsp;copies&nbsp;of&nbsp;the&nbsp;string&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2362372">func</span>&nbsp;<span class="ident" id="2362377">Repeat</span><span class="op" id="2362383">(</span><span class="ident" id="2362384">s</span>&nbsp;<span class="builtintype" id="2362386">string</span><span class="op" id="2362392">,</span>&nbsp;<span class="ident" id="2362394">count</span>&nbsp;<span class="builtintype" id="2362400">int</span><span class="op" id="2362403">)</span>&nbsp;<span class="builtintype" id="2362405">string</span>&nbsp;<span class="op" id="2362412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2362415">b</span>&nbsp;<span class="op" id="2362417">:=</span>&nbsp;<span class="builtinfunc" id="2362420">make</span><span class="op" id="2362424">(</span><span class="op" id="2362425">[</span><span class="op" id="2362426">]</span><span class="builtintype" id="2362427">byte</span><span class="op" id="2362431">,</span>&nbsp;<span class="builtinfunc" id="2362433">len</span><span class="op" id="2362436">(</span><span class="ident" id="2362437">s</span><span class="op" id="2362438">)</span><span class="op" id="2362439">*</span><span class="ident" id="2362440">count</span><span class="op" id="2362445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2362448">bp</span>&nbsp;<span class="op" id="2362451">:=</span>&nbsp;<span class="builtinfunc" id="2362454">copy</span><span class="op" id="2362458">(</span><span class="ident" id="2362459">b</span><span class="op" id="2362460">,</span>&nbsp;<span class="ident" id="2362462">s</span><span class="op" id="2362463">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2362466">for</span>&nbsp;<span class="ident" id="2362470">bp</span>&nbsp;<span class="op" id="2362473">&lt;</span>&nbsp;<span class="builtinfunc" id="2362475">len</span><span class="op" id="2362478">(</span><span class="ident" id="2362479">b</span><span class="op" id="2362480">)</span>&nbsp;<span class="op" id="2362482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2362486">copy</span><span class="op" id="2362490">(</span><span class="ident" id="2362491">b</span><span class="op" id="2362492">[</span><span class="ident" id="2362493">bp</span><span class="op" id="2362495">:</span><span class="op" id="2362496">]</span><span class="op" id="2362497">,</span>&nbsp;<span class="ident" id="2362499">b</span><span class="op" id="2362500">[</span><span class="op" id="2362501">:</span><span class="ident" id="2362502">bp</span><span class="op" id="2362504">]</span><span class="op" id="2362505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2362509">bp</span>&nbsp;<span class="op" id="2362512">*=</span>&nbsp;<span class="num" id="2362515">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2362518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2362521">return</span>&nbsp;<span class="builtintype" id="2362528">string</span><span class="op" id="2362534">(</span><span class="ident" id="2362535">b</span><span class="op" id="2362536">)</span><br>
<span class="lineno">465</span><span class="op" id="2362538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2362541">//&nbsp;ToUpper&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;upper&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2362636">func</span>&nbsp;<span class="ident" id="2362641">ToUpper</span><span class="op" id="2362648">(</span><span class="ident" id="2362649">s</span>&nbsp;<span class="builtintype" id="2362651">string</span><span class="op" id="2362657">)</span>&nbsp;<span class="builtintype" id="2362659">string</span>&nbsp;<span class="op" id="2362666">{</span>&nbsp;<span class="keyword" id="2362668">return</span>&nbsp;<span class="ident" id="2362675">Map</span><span class="op" id="2362678">(</span><span class="ident" id="2362679">unicode</span><span class="op" id="2362686">.</span><span class="ident" id="2362687">ToUpper</span><span class="op" id="2362694">,</span>&nbsp;<span class="ident" id="2362696">s</span><span class="op" id="2362697">)</span>&nbsp;<span class="op" id="2362699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">470</span><span class="comment" id="2362702">//&nbsp;ToLower&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;lower&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2362797">func</span>&nbsp;<span class="ident" id="2362802">ToLower</span><span class="op" id="2362809">(</span><span class="ident" id="2362810">s</span>&nbsp;<span class="builtintype" id="2362812">string</span><span class="op" id="2362818">)</span>&nbsp;<span class="builtintype" id="2362820">string</span>&nbsp;<span class="op" id="2362827">{</span>&nbsp;<span class="keyword" id="2362829">return</span>&nbsp;<span class="ident" id="2362836">Map</span><span class="op" id="2362839">(</span><span class="ident" id="2362840">unicode</span><span class="op" id="2362847">.</span><span class="ident" id="2362848">ToLower</span><span class="op" id="2362855">,</span>&nbsp;<span class="ident" id="2362857">s</span><span class="op" id="2362858">)</span>&nbsp;<span class="op" id="2362860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2362863">//&nbsp;ToTitle&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;title&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2362958">func</span>&nbsp;<span class="ident" id="2362963">ToTitle</span><span class="op" id="2362970">(</span><span class="ident" id="2362971">s</span>&nbsp;<span class="builtintype" id="2362973">string</span><span class="op" id="2362979">)</span>&nbsp;<span class="builtintype" id="2362981">string</span>&nbsp;<span class="op" id="2362988">{</span>&nbsp;<span class="keyword" id="2362990">return</span>&nbsp;<span class="ident" id="2362997">Map</span><span class="op" id="2363000">(</span><span class="ident" id="2363001">unicode</span><span class="op" id="2363008">.</span><span class="ident" id="2363009">ToTitle</span><span class="op" id="2363016">,</span>&nbsp;<span class="ident" id="2363018">s</span><span class="op" id="2363019">)</span>&nbsp;<span class="op" id="2363021">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span><span class="comment" id="2363024">//&nbsp;ToUpperSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="2363114">//&nbsp;upper&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="2363174">func</span>&nbsp;<span class="ident" id="2363179">ToUpperSpecial</span><span class="op" id="2363193">(</span><span class="ident" id="2363194">_case</span>&nbsp;<span class="ident" id="2363200">unicode</span><span class="op" id="2363207">.</span><span class="ident" id="2363208">SpecialCase</span><span class="op" id="2363219">,</span>&nbsp;<span class="ident" id="2363221">s</span>&nbsp;<span class="builtintype" id="2363223">string</span><span class="op" id="2363229">)</span>&nbsp;<span class="builtintype" id="2363231">string</span>&nbsp;<span class="op" id="2363238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2363241">return</span>&nbsp;<span class="ident" id="2363248">Map</span><span class="op" id="2363251">(</span><span class="keyword" id="2363252">func</span><span class="op" id="2363256">(</span><span class="ident" id="2363257">r</span>&nbsp;<span class="builtintype" id="2363259">rune</span><span class="op" id="2363263">)</span>&nbsp;<span class="builtintype" id="2363265">rune</span>&nbsp;<span class="op" id="2363270">{</span>&nbsp;<span class="keyword" id="2363272">return</span>&nbsp;<span class="ident" id="2363279">_case</span><span class="op" id="2363284">.</span><span class="ident" id="2363285">ToUpper</span><span class="op" id="2363292">(</span><span class="ident" id="2363293">r</span><span class="op" id="2363294">)</span>&nbsp;<span class="op" id="2363296">}</span><span class="op" id="2363297">,</span>&nbsp;<span class="ident" id="2363299">s</span><span class="op" id="2363300">)</span><br>
<span class="lineno">480</span><span class="op" id="2363302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2363305">//&nbsp;ToLowerSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="2363395">//&nbsp;lower&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="2363455">func</span>&nbsp;<span class="ident" id="2363460">ToLowerSpecial</span><span class="op" id="2363474">(</span><span class="ident" id="2363475">_case</span>&nbsp;<span class="ident" id="2363481">unicode</span><span class="op" id="2363488">.</span><span class="ident" id="2363489">SpecialCase</span><span class="op" id="2363500">,</span>&nbsp;<span class="ident" id="2363502">s</span>&nbsp;<span class="builtintype" id="2363504">string</span><span class="op" id="2363510">)</span>&nbsp;<span class="builtintype" id="2363512">string</span>&nbsp;<span class="op" id="2363519">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2363522">return</span>&nbsp;<span class="ident" id="2363529">Map</span><span class="op" id="2363532">(</span><span class="keyword" id="2363533">func</span><span class="op" id="2363537">(</span><span class="ident" id="2363538">r</span>&nbsp;<span class="builtintype" id="2363540">rune</span><span class="op" id="2363544">)</span>&nbsp;<span class="builtintype" id="2363546">rune</span>&nbsp;<span class="op" id="2363551">{</span>&nbsp;<span class="keyword" id="2363553">return</span>&nbsp;<span class="ident" id="2363560">_case</span><span class="op" id="2363565">.</span><span class="ident" id="2363566">ToLower</span><span class="op" id="2363573">(</span><span class="ident" id="2363574">r</span><span class="op" id="2363575">)</span>&nbsp;<span class="op" id="2363577">}</span><span class="op" id="2363578">,</span>&nbsp;<span class="ident" id="2363580">s</span><span class="op" id="2363581">)</span><br>
<span class="lineno"></span><span class="op" id="2363583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2363586">//&nbsp;ToTitleSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="2363676">//&nbsp;title&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno">490</span><span class="keyword" id="2363736">func</span>&nbsp;<span class="ident" id="2363741">ToTitleSpecial</span><span class="op" id="2363755">(</span><span class="ident" id="2363756">_case</span>&nbsp;<span class="ident" id="2363762">unicode</span><span class="op" id="2363769">.</span><span class="ident" id="2363770">SpecialCase</span><span class="op" id="2363781">,</span>&nbsp;<span class="ident" id="2363783">s</span>&nbsp;<span class="builtintype" id="2363785">string</span><span class="op" id="2363791">)</span>&nbsp;<span class="builtintype" id="2363793">string</span>&nbsp;<span class="op" id="2363800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2363803">return</span>&nbsp;<span class="ident" id="2363810">Map</span><span class="op" id="2363813">(</span><span class="keyword" id="2363814">func</span><span class="op" id="2363818">(</span><span class="ident" id="2363819">r</span>&nbsp;<span class="builtintype" id="2363821">rune</span><span class="op" id="2363825">)</span>&nbsp;<span class="builtintype" id="2363827">rune</span>&nbsp;<span class="op" id="2363832">{</span>&nbsp;<span class="keyword" id="2363834">return</span>&nbsp;<span class="ident" id="2363841">_case</span><span class="op" id="2363846">.</span><span class="ident" id="2363847">ToTitle</span><span class="op" id="2363854">(</span><span class="ident" id="2363855">r</span><span class="op" id="2363856">)</span>&nbsp;<span class="op" id="2363858">}</span><span class="op" id="2363859">,</span>&nbsp;<span class="ident" id="2363861">s</span><span class="op" id="2363862">)</span><br>
<span class="lineno"></span><span class="op" id="2363864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2363867">//&nbsp;isSeparator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;rune&nbsp;could&nbsp;mark&nbsp;a&nbsp;word&nbsp;boundary.</span><br>
<span class="lineno">495</span><span class="comment" id="2363935">//&nbsp;TODO:&nbsp;update&nbsp;when&nbsp;package&nbsp;unicode&nbsp;captures&nbsp;more&nbsp;of&nbsp;the&nbsp;properties.</span><br>
<span class="lineno"></span><span class="keyword" id="2364005">func</span>&nbsp;<span class="ident" id="2364010">isSeparator</span><span class="op" id="2364021">(</span><span class="ident" id="2364022">r</span>&nbsp;<span class="builtintype" id="2364024">rune</span><span class="op" id="2364028">)</span>&nbsp;<span class="builtintype" id="2364030">bool</span>&nbsp;<span class="op" id="2364035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2364038">//&nbsp;ASCII&nbsp;alphanumerics&nbsp;and&nbsp;underscore&nbsp;are&nbsp;not&nbsp;separators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364096">if</span>&nbsp;<span class="ident" id="2364099">r</span>&nbsp;<span class="op" id="2364101">&lt;=</span>&nbsp;<span class="num" id="2364104">0x7F</span>&nbsp;<span class="op" id="2364109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364113">switch</span>&nbsp;<span class="op" id="2364120">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364124">case</span>&nbsp;<span class="string" id="2364129">&#39;0&#39;</span>&nbsp;<span class="op" id="2364133">&lt;=</span>&nbsp;<span class="ident" id="2364136">r</span>&nbsp;<span class="op" id="2364138">&amp;&amp;</span>&nbsp;<span class="ident" id="2364141">r</span>&nbsp;<span class="op" id="2364143">&lt;=</span>&nbsp;<span class="string" id="2364146">&#39;9&#39;</span><span class="op" id="2364149">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364154">return</span>&nbsp;<span class="builtintype" id="2364161">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364169">case</span>&nbsp;<span class="string" id="2364174">&#39;a&#39;</span>&nbsp;<span class="op" id="2364178">&lt;=</span>&nbsp;<span class="ident" id="2364181">r</span>&nbsp;<span class="op" id="2364183">&amp;&amp;</span>&nbsp;<span class="ident" id="2364186">r</span>&nbsp;<span class="op" id="2364188">&lt;=</span>&nbsp;<span class="string" id="2364191">&#39;z&#39;</span><span class="op" id="2364194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364199">return</span>&nbsp;<span class="builtintype" id="2364206">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364214">case</span>&nbsp;<span class="string" id="2364219">&#39;A&#39;</span>&nbsp;<span class="op" id="2364223">&lt;=</span>&nbsp;<span class="ident" id="2364226">r</span>&nbsp;<span class="op" id="2364228">&amp;&amp;</span>&nbsp;<span class="ident" id="2364231">r</span>&nbsp;<span class="op" id="2364233">&lt;=</span>&nbsp;<span class="string" id="2364236">&#39;Z&#39;</span><span class="op" id="2364239">:</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364244">return</span>&nbsp;<span class="builtintype" id="2364251">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364259">case</span>&nbsp;<span class="ident" id="2364264">r</span>&nbsp;<span class="op" id="2364266">==</span>&nbsp;<span class="string" id="2364269">&#39;_&#39;</span><span class="op" id="2364272">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364277">return</span>&nbsp;<span class="builtintype" id="2364284">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2364292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364296">return</span>&nbsp;<span class="builtintype" id="2364303">true</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2364309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2364312">//&nbsp;Letters&nbsp;and&nbsp;digits&nbsp;are&nbsp;not&nbsp;separators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364354">if</span>&nbsp;<span class="ident" id="2364357">unicode</span><span class="op" id="2364364">.</span><span class="ident" id="2364365">IsLetter</span><span class="op" id="2364373">(</span><span class="ident" id="2364374">r</span><span class="op" id="2364375">)</span>&nbsp;<span class="op" id="2364377">||</span>&nbsp;<span class="ident" id="2364380">unicode</span><span class="op" id="2364387">.</span><span class="ident" id="2364388">IsDigit</span><span class="op" id="2364395">(</span><span class="ident" id="2364396">r</span><span class="op" id="2364397">)</span>&nbsp;<span class="op" id="2364399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364403">return</span>&nbsp;<span class="builtintype" id="2364410">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2364417">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2364420">//&nbsp;Otherwise,&nbsp;all&nbsp;we&nbsp;can&nbsp;do&nbsp;for&nbsp;now&nbsp;is&nbsp;treat&nbsp;spaces&nbsp;as&nbsp;separators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364488">return</span>&nbsp;<span class="ident" id="2364495">unicode</span><span class="op" id="2364502">.</span><span class="ident" id="2364503">IsSpace</span><span class="op" id="2364510">(</span><span class="ident" id="2364511">r</span><span class="op" id="2364512">)</span><br>
<span class="lineno"></span><span class="op" id="2364514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2364517">//&nbsp;Title&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;that&nbsp;begin&nbsp;words</span><br>
<span class="lineno">520</span><span class="comment" id="2364599">//&nbsp;mapped&nbsp;to&nbsp;their&nbsp;title&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2364630">//</span><br>
<span class="lineno"></span><span class="comment" id="2364633">//&nbsp;BUG:&nbsp;The&nbsp;rule&nbsp;Title&nbsp;uses&nbsp;for&nbsp;word&nbsp;boundaries&nbsp;does&nbsp;not&nbsp;handle&nbsp;Unicode&nbsp;punctuation&nbsp;properly.</span><br>
<span class="lineno"></span><span class="keyword" id="2364727">func</span>&nbsp;<span class="ident" id="2364732">Title</span><span class="op" id="2364737">(</span><span class="ident" id="2364738">s</span>&nbsp;<span class="builtintype" id="2364740">string</span><span class="op" id="2364746">)</span>&nbsp;<span class="builtintype" id="2364748">string</span>&nbsp;<span class="op" id="2364755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2364758">//&nbsp;Use&nbsp;a&nbsp;closure&nbsp;here&nbsp;to&nbsp;remember&nbsp;state.</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2364800">//&nbsp;Hackish&nbsp;but&nbsp;effective.&nbsp;Depends&nbsp;on&nbsp;Map&nbsp;scanning&nbsp;in&nbsp;order&nbsp;and&nbsp;calling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2364872">//&nbsp;the&nbsp;closure&nbsp;once&nbsp;per&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364903">prev</span>&nbsp;<span class="op" id="2364908">:=</span>&nbsp;<span class="string" id="2364911">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364916">return</span>&nbsp;<span class="ident" id="2364923">Map</span><span class="op" id="2364926">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364930">func</span><span class="op" id="2364934">(</span><span class="ident" id="2364935">r</span>&nbsp;<span class="builtintype" id="2364937">rune</span><span class="op" id="2364941">)</span>&nbsp;<span class="builtintype" id="2364943">rune</span>&nbsp;<span class="op" id="2364948">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364953">if</span>&nbsp;<span class="ident" id="2364956">isSeparator</span><span class="op" id="2364967">(</span><span class="ident" id="2364968">prev</span><span class="op" id="2364972">)</span>&nbsp;<span class="op" id="2364974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364980">prev</span>&nbsp;<span class="op" id="2364985">=</span>&nbsp;<span class="ident" id="2364987">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364993">return</span>&nbsp;<span class="ident" id="2365000">unicode</span><span class="op" id="2365007">.</span><span class="ident" id="2365008">ToTitle</span><span class="op" id="2365015">(</span><span class="ident" id="2365016">r</span><span class="op" id="2365017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2365022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2365027">prev</span>&nbsp;<span class="op" id="2365032">=</span>&nbsp;<span class="ident" id="2365034">r</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2365039">return</span>&nbsp;<span class="ident" id="2365046">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2365050">}</span><span class="op" id="2365051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2365055">s</span><span class="op" id="2365056">)</span><br>
<span class="lineno"></span><span class="op" id="2365058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">540</span><span class="comment" id="2365061">//&nbsp;TrimLeftFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2365126">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2365176">func</span>&nbsp;<span class="ident" id="2365181">TrimLeftFunc</span><span class="op" id="2365193">(</span><span class="ident" id="2365194">s</span>&nbsp;<span class="builtintype" id="2365196">string</span><span class="op" id="2365202">,</span>&nbsp;<span class="ident" id="2365204">f</span>&nbsp;<span class="keyword" id="2365206">func</span><span class="op" id="2365210">(</span><span class="builtintype" id="2365211">rune</span><span class="op" id="2365215">)</span>&nbsp;<span class="builtintype" id="2365217">bool</span><span class="op" id="2365221">)</span>&nbsp;<span class="builtintype" id="2365223">string</span>&nbsp;<span class="op" id="2365230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2365233">i</span>&nbsp;<span class="op" id="2365235">:=</span>&nbsp;<span class="ident" id="2365238">indexFunc</span><span class="op" id="2365247">(</span><span class="ident" id="2365248">s</span><span class="op" id="2365249">,</span>&nbsp;<span class="ident" id="2365251">f</span><span class="op" id="2365252">,</span>&nbsp;<span class="builtintype" id="2365254">false</span><span class="op" id="2365259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2365262">if</span>&nbsp;<span class="ident" id="2365265">i</span>&nbsp;<span class="op" id="2365267">==</span>&nbsp;<span class="op" id="2365270">-</span><span class="num" id="2365271">1</span>&nbsp;<span class="op" id="2365273">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2365277">return</span>&nbsp;<span class="string" id="2365284">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2365288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2365291">return</span>&nbsp;<span class="ident" id="2365298">s</span><span class="op" id="2365299">[</span><span class="ident" id="2365300">i</span><span class="op" id="2365301">:</span><span class="op" id="2365302">]</span><br>
<span class="lineno"></span><span class="op" id="2365304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="comment" id="2365307">//&nbsp;TrimRightFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="2365374">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2365424">func</span>&nbsp;<span class="ident" id="2365429">TrimRightFunc</span><span class="op" id="2365442">(</span><span class="ident" id="2365443">s</span>&nbsp;<span class="builtintype" id="2365445">string</span><span class="op" id="2365451">,</span>&nbsp;<span class="ident" id="2365453">f</span>&nbsp;<span class="keyword" id="2365455">func</span><span class="op" id="2365459">(</span><span class="builtintype" id="2365460">rune</span><span class="op" id="2365464">)</span>&nbsp;<span class="builtintype" id="2365466">bool</span><span class="op" id="2365470">)</span>&nbsp;<span class="builtintype" id="2365472">string</span>&nbsp;<span class="op" id="2365479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2365482">i</span>&nbsp;<span class="op" id="2365484">:=</span>&nbsp;<span class="ident" id="2365487">lastIndexFunc</span><span class="op" id="2365500">(</span><span class="ident" id="2365501">s</span><span class="op" id="2365502">,</span>&nbsp;<span class="ident" id="2365504">f</span><span class="op" id="2365505">,</span>&nbsp;<span class="builtintype" id="2365507">false</span><span class="op" id="2365512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2365515">if</span>&nbsp;<span class="ident" id="2365518">i</span>&nbsp;<span class="op" id="2365520">&gt;=</span>&nbsp;<span class="num" id="2365523">0</span>&nbsp;<span class="op" id="2365525">&amp;&amp;</span>&nbsp;<span class="ident" id="2365528">s</span><span class="op" id="2365529">[</span><span class="ident" id="2365530">i</span><span class="op" id="2365531">]</span>&nbsp;<span class="op" id="2365533">&gt;=</span>&nbsp;<span class="ident" id="2365536">utf8</span><span class="op" id="2365540">.</span><span class="ident" id="2365541">RuneSelf</span>&nbsp;<span class="op" id="2365550">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2365554">_</span><span class="op" id="2365555">,</span>&nbsp;<span class="ident" id="2365557">wid</span>&nbsp;<span class="op" id="2365561">:=</span>&nbsp;<span class="ident" id="2365564">utf8</span><span class="op" id="2365568">.</span><span class="ident" id="2365569">DecodeRuneInString</span><span class="op" id="2365587">(</span><span class="ident" id="2365588">s</span><span class="op" id="2365589">[</span><span class="ident" id="2365590">i</span><span class="op" id="2365591">:</span><span class="op" id="2365592">]</span><span class="op" id="2365593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2365597">i</span>&nbsp;<span class="op" id="2365599">+=</span>&nbsp;<span class="ident" id="2365602">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2365607">}</span>&nbsp;<span class="keyword" id="2365609">else</span>&nbsp;<span class="op" id="2365614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2365618">i</span><span class="op" id="2365619">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2365623">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2365626">return</span>&nbsp;<span class="ident" id="2365633">s</span><span class="op" id="2365634">[</span><span class="num" id="2365635">0</span><span class="op" id="2365636">:</span><span class="ident" id="2365637">i</span><span class="op" id="2365638">]</span><br>
<span class="lineno"></span><span class="op" id="2365640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2365643">//&nbsp;TrimFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2365704">//&nbsp;and&nbsp;trailing&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno">565</span><span class="keyword" id="2365767">func</span>&nbsp;<span class="ident" id="2365772">TrimFunc</span><span class="op" id="2365780">(</span><span class="ident" id="2365781">s</span>&nbsp;<span class="builtintype" id="2365783">string</span><span class="op" id="2365789">,</span>&nbsp;<span class="ident" id="2365791">f</span>&nbsp;<span class="keyword" id="2365793">func</span><span class="op" id="2365797">(</span><span class="builtintype" id="2365798">rune</span><span class="op" id="2365802">)</span>&nbsp;<span class="builtintype" id="2365804">bool</span><span class="op" id="2365808">)</span>&nbsp;<span class="builtintype" id="2365810">string</span>&nbsp;<span class="op" id="2365817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2365820">return</span>&nbsp;<span class="ident" id="2365827">TrimRightFunc</span><span class="op" id="2365840">(</span><span class="ident" id="2365841">TrimLeftFunc</span><span class="op" id="2365853">(</span><span class="ident" id="2365854">s</span><span class="op" id="2365855">,</span>&nbsp;<span class="ident" id="2365857">f</span><span class="op" id="2365858">)</span><span class="op" id="2365859">,</span>&nbsp;<span class="ident" id="2365861">f</span><span class="op" id="2365862">)</span><br>
<span class="lineno"></span><span class="op" id="2365864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2365867">//&nbsp;IndexFunc&nbsp;returns&nbsp;the&nbsp;index&nbsp;into&nbsp;s&nbsp;of&nbsp;the&nbsp;first&nbsp;Unicode</span><br>
<span class="lineno">570</span><span class="comment" id="2365926">//&nbsp;code&nbsp;point&nbsp;satisfying&nbsp;f(c),&nbsp;or&nbsp;-1&nbsp;if&nbsp;none&nbsp;do.</span><br>
<span class="lineno"></span><span class="keyword" id="2365975">func</span>&nbsp;<span class="ident" id="2365980">IndexFunc</span><span class="op" id="2365989">(</span><span class="ident" id="2365990">s</span>&nbsp;<span class="builtintype" id="2365992">string</span><span class="op" id="2365998">,</span>&nbsp;<span class="ident" id="2366000">f</span>&nbsp;<span class="keyword" id="2366002">func</span><span class="op" id="2366006">(</span><span class="builtintype" id="2366007">rune</span><span class="op" id="2366011">)</span>&nbsp;<span class="builtintype" id="2366013">bool</span><span class="op" id="2366017">)</span>&nbsp;<span class="builtintype" id="2366019">int</span>&nbsp;<span class="op" id="2366023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366026">return</span>&nbsp;<span class="ident" id="2366033">indexFunc</span><span class="op" id="2366042">(</span><span class="ident" id="2366043">s</span><span class="op" id="2366044">,</span>&nbsp;<span class="ident" id="2366046">f</span><span class="op" id="2366047">,</span>&nbsp;<span class="builtintype" id="2366049">true</span><span class="op" id="2366053">)</span><br>
<span class="lineno"></span><span class="op" id="2366055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2366058">//&nbsp;LastIndexFunc&nbsp;returns&nbsp;the&nbsp;index&nbsp;into&nbsp;s&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span><span class="comment" id="2366112">//&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;satisfying&nbsp;f(c),&nbsp;or&nbsp;-1&nbsp;if&nbsp;none&nbsp;do.</span><br>
<span class="lineno"></span><span class="keyword" id="2366169">func</span>&nbsp;<span class="ident" id="2366174">LastIndexFunc</span><span class="op" id="2366187">(</span><span class="ident" id="2366188">s</span>&nbsp;<span class="builtintype" id="2366190">string</span><span class="op" id="2366196">,</span>&nbsp;<span class="ident" id="2366198">f</span>&nbsp;<span class="keyword" id="2366200">func</span><span class="op" id="2366204">(</span><span class="builtintype" id="2366205">rune</span><span class="op" id="2366209">)</span>&nbsp;<span class="builtintype" id="2366211">bool</span><span class="op" id="2366215">)</span>&nbsp;<span class="builtintype" id="2366217">int</span>&nbsp;<span class="op" id="2366221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366224">return</span>&nbsp;<span class="ident" id="2366231">lastIndexFunc</span><span class="op" id="2366244">(</span><span class="ident" id="2366245">s</span><span class="op" id="2366246">,</span>&nbsp;<span class="ident" id="2366248">f</span><span class="op" id="2366249">,</span>&nbsp;<span class="builtintype" id="2366251">true</span><span class="op" id="2366255">)</span><br>
<span class="lineno"></span><span class="op" id="2366257">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2366260">//&nbsp;indexFunc&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;IndexFunc&nbsp;except&nbsp;that&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="2366313">//&nbsp;truth==false,&nbsp;the&nbsp;sense&nbsp;of&nbsp;the&nbsp;predicate&nbsp;function&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2366369">//&nbsp;inverted.</span><br>
<span class="lineno"></span><span class="keyword" id="2366382">func</span>&nbsp;<span class="ident" id="2366387">indexFunc</span><span class="op" id="2366396">(</span><span class="ident" id="2366397">s</span>&nbsp;<span class="builtintype" id="2366399">string</span><span class="op" id="2366405">,</span>&nbsp;<span class="ident" id="2366407">f</span>&nbsp;<span class="keyword" id="2366409">func</span><span class="op" id="2366413">(</span><span class="builtintype" id="2366414">rune</span><span class="op" id="2366418">)</span>&nbsp;<span class="builtintype" id="2366420">bool</span><span class="op" id="2366424">,</span>&nbsp;<span class="ident" id="2366426">truth</span>&nbsp;<span class="builtintype" id="2366432">bool</span><span class="op" id="2366436">)</span>&nbsp;<span class="builtintype" id="2366438">int</span>&nbsp;<span class="op" id="2366442">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2366445">start</span>&nbsp;<span class="op" id="2366451">:=</span>&nbsp;<span class="num" id="2366454">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366457">for</span>&nbsp;<span class="ident" id="2366461">start</span>&nbsp;<span class="op" id="2366467">&lt;</span>&nbsp;<span class="builtinfunc" id="2366469">len</span><span class="op" id="2366472">(</span><span class="ident" id="2366473">s</span><span class="op" id="2366474">)</span>&nbsp;<span class="op" id="2366476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2366480">wid</span>&nbsp;<span class="op" id="2366484">:=</span>&nbsp;<span class="num" id="2366487">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2366491">r</span>&nbsp;<span class="op" id="2366493">:=</span>&nbsp;<span class="builtintype" id="2366496">rune</span><span class="op" id="2366500">(</span><span class="ident" id="2366501">s</span><span class="op" id="2366502">[</span><span class="ident" id="2366503">start</span><span class="op" id="2366508">]</span><span class="op" id="2366509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366513">if</span>&nbsp;<span class="ident" id="2366516">r</span>&nbsp;<span class="op" id="2366518">&gt;=</span>&nbsp;<span class="ident" id="2366521">utf8</span><span class="op" id="2366525">.</span><span class="ident" id="2366526">RuneSelf</span>&nbsp;<span class="op" id="2366535">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2366540">r</span><span class="op" id="2366541">,</span>&nbsp;<span class="ident" id="2366543">wid</span>&nbsp;<span class="op" id="2366547">=</span>&nbsp;<span class="ident" id="2366549">utf8</span><span class="op" id="2366553">.</span><span class="ident" id="2366554">DecodeRuneInString</span><span class="op" id="2366572">(</span><span class="ident" id="2366573">s</span><span class="op" id="2366574">[</span><span class="ident" id="2366575">start</span><span class="op" id="2366580">:</span><span class="op" id="2366581">]</span><span class="op" id="2366582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2366586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366590">if</span>&nbsp;<span class="ident" id="2366593">f</span><span class="op" id="2366594">(</span><span class="ident" id="2366595">r</span><span class="op" id="2366596">)</span>&nbsp;<span class="op" id="2366598">==</span>&nbsp;<span class="ident" id="2366601">truth</span>&nbsp;<span class="op" id="2366607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366612">return</span>&nbsp;<span class="ident" id="2366619">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2366627">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2366631">start</span>&nbsp;<span class="op" id="2366637">+=</span>&nbsp;<span class="ident" id="2366640">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2366645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366648">return</span>&nbsp;<span class="op" id="2366655">-</span><span class="num" id="2366656">1</span><br>
<span class="lineno"></span><span class="op" id="2366658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span><span class="comment" id="2366661">//&nbsp;lastIndexFunc&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;LastIndexFunc&nbsp;except&nbsp;that&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="2366722">//&nbsp;truth==false,&nbsp;the&nbsp;sense&nbsp;of&nbsp;the&nbsp;predicate&nbsp;function&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2366778">//&nbsp;inverted.</span><br>
<span class="lineno"></span><span class="keyword" id="2366791">func</span>&nbsp;<span class="ident" id="2366796">lastIndexFunc</span><span class="op" id="2366809">(</span><span class="ident" id="2366810">s</span>&nbsp;<span class="builtintype" id="2366812">string</span><span class="op" id="2366818">,</span>&nbsp;<span class="ident" id="2366820">f</span>&nbsp;<span class="keyword" id="2366822">func</span><span class="op" id="2366826">(</span><span class="builtintype" id="2366827">rune</span><span class="op" id="2366831">)</span>&nbsp;<span class="builtintype" id="2366833">bool</span><span class="op" id="2366837">,</span>&nbsp;<span class="ident" id="2366839">truth</span>&nbsp;<span class="builtintype" id="2366845">bool</span><span class="op" id="2366849">)</span>&nbsp;<span class="builtintype" id="2366851">int</span>&nbsp;<span class="op" id="2366855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366858">for</span>&nbsp;<span class="ident" id="2366862">i</span>&nbsp;<span class="op" id="2366864">:=</span>&nbsp;<span class="builtinfunc" id="2366867">len</span><span class="op" id="2366870">(</span><span class="ident" id="2366871">s</span><span class="op" id="2366872">)</span><span class="op" id="2366873">;</span>&nbsp;<span class="ident" id="2366875">i</span>&nbsp;<span class="op" id="2366877">&gt;</span>&nbsp;<span class="num" id="2366879">0</span><span class="op" id="2366880">;</span>&nbsp;<span class="op" id="2366882">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2366886">r</span><span class="op" id="2366887">,</span>&nbsp;<span class="ident" id="2366889">size</span>&nbsp;<span class="op" id="2366894">:=</span>&nbsp;<span class="ident" id="2366897">utf8</span><span class="op" id="2366901">.</span><span class="ident" id="2366902">DecodeLastRuneInString</span><span class="op" id="2366924">(</span><span class="ident" id="2366925">s</span><span class="op" id="2366926">[</span><span class="num" id="2366927">0</span><span class="op" id="2366928">:</span><span class="ident" id="2366929">i</span><span class="op" id="2366930">]</span><span class="op" id="2366931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2366935">i</span>&nbsp;<span class="op" id="2366937">-=</span>&nbsp;<span class="ident" id="2366940">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366947">if</span>&nbsp;<span class="ident" id="2366950">f</span><span class="op" id="2366951">(</span><span class="ident" id="2366952">r</span><span class="op" id="2366953">)</span>&nbsp;<span class="op" id="2366955">==</span>&nbsp;<span class="ident" id="2366958">truth</span>&nbsp;<span class="op" id="2366964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366969">return</span>&nbsp;<span class="ident" id="2366976">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2366980">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2366983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2366986">return</span>&nbsp;<span class="op" id="2366993">-</span><span class="num" id="2366994">1</span><br>
<span class="lineno"></span><span class="op" id="2366996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2366999">func</span>&nbsp;<span class="ident" id="2367004">makeCutsetFunc</span><span class="op" id="2367018">(</span><span class="ident" id="2367019">cutset</span>&nbsp;<span class="builtintype" id="2367026">string</span><span class="op" id="2367032">)</span>&nbsp;<span class="keyword" id="2367034">func</span><span class="op" id="2367038">(</span><span class="builtintype" id="2367039">rune</span><span class="op" id="2367043">)</span>&nbsp;<span class="builtintype" id="2367045">bool</span>&nbsp;<span class="op" id="2367050">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2367053">return</span>&nbsp;<span class="keyword" id="2367060">func</span><span class="op" id="2367064">(</span><span class="ident" id="2367065">r</span>&nbsp;<span class="builtintype" id="2367067">rune</span><span class="op" id="2367071">)</span>&nbsp;<span class="builtintype" id="2367073">bool</span>&nbsp;<span class="op" id="2367078">{</span>&nbsp;<span class="keyword" id="2367080">return</span>&nbsp;<span class="ident" id="2367087">IndexRune</span><span class="op" id="2367096">(</span><span class="ident" id="2367097">cutset</span><span class="op" id="2367103">,</span>&nbsp;<span class="ident" id="2367105">r</span><span class="op" id="2367106">)</span>&nbsp;<span class="op" id="2367108">&gt;=</span>&nbsp;<span class="num" id="2367111">0</span>&nbsp;<span class="op" id="2367113">}</span><br>
<span class="lineno"></span><span class="op" id="2367115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2367118">//&nbsp;Trim&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2367179">//&nbsp;trailing&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno">620</span><span class="keyword" id="2367240">func</span>&nbsp;<span class="ident" id="2367245">Trim</span><span class="op" id="2367249">(</span><span class="ident" id="2367250">s</span>&nbsp;<span class="builtintype" id="2367252">string</span><span class="op" id="2367258">,</span>&nbsp;<span class="ident" id="2367260">cutset</span>&nbsp;<span class="builtintype" id="2367267">string</span><span class="op" id="2367273">)</span>&nbsp;<span class="builtintype" id="2367275">string</span>&nbsp;<span class="op" id="2367282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2367285">if</span>&nbsp;<span class="ident" id="2367288">s</span>&nbsp;<span class="op" id="2367290">==</span>&nbsp;<span class="string" id="2367293">&#34;&#34;</span>&nbsp;<span class="op" id="2367296">||</span>&nbsp;<span class="ident" id="2367299">cutset</span>&nbsp;<span class="op" id="2367306">==</span>&nbsp;<span class="string" id="2367309">&#34;&#34;</span>&nbsp;<span class="op" id="2367312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2367316">return</span>&nbsp;<span class="ident" id="2367323">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2367326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2367329">return</span>&nbsp;<span class="ident" id="2367336">TrimFunc</span><span class="op" id="2367344">(</span><span class="ident" id="2367345">s</span><span class="op" id="2367346">,</span>&nbsp;<span class="ident" id="2367348">makeCutsetFunc</span><span class="op" id="2367362">(</span><span class="ident" id="2367363">cutset</span><span class="op" id="2367369">)</span><span class="op" id="2367370">)</span><br>
<span class="lineno">625</span><span class="op" id="2367372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2367375">//&nbsp;TrimLeft&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2367436">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2367488">func</span>&nbsp;<span class="ident" id="2367493">TrimLeft</span><span class="op" id="2367501">(</span><span class="ident" id="2367502">s</span>&nbsp;<span class="builtintype" id="2367504">string</span><span class="op" id="2367510">,</span>&nbsp;<span class="ident" id="2367512">cutset</span>&nbsp;<span class="builtintype" id="2367519">string</span><span class="op" id="2367525">)</span>&nbsp;<span class="builtintype" id="2367527">string</span>&nbsp;<span class="op" id="2367534">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2367537">if</span>&nbsp;<span class="ident" id="2367540">s</span>&nbsp;<span class="op" id="2367542">==</span>&nbsp;<span class="string" id="2367545">&#34;&#34;</span>&nbsp;<span class="op" id="2367548">||</span>&nbsp;<span class="ident" id="2367551">cutset</span>&nbsp;<span class="op" id="2367558">==</span>&nbsp;<span class="string" id="2367561">&#34;&#34;</span>&nbsp;<span class="op" id="2367564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2367568">return</span>&nbsp;<span class="ident" id="2367575">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2367578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2367581">return</span>&nbsp;<span class="ident" id="2367588">TrimLeftFunc</span><span class="op" id="2367600">(</span><span class="ident" id="2367601">s</span><span class="op" id="2367602">,</span>&nbsp;<span class="ident" id="2367604">makeCutsetFunc</span><span class="op" id="2367618">(</span><span class="ident" id="2367619">cutset</span><span class="op" id="2367625">)</span><span class="op" id="2367626">)</span><br>
<span class="lineno"></span><span class="op" id="2367628">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="2367631">//&nbsp;TrimRight&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s,&nbsp;with&nbsp;all&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="2367695">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="2367747">func</span>&nbsp;<span class="ident" id="2367752">TrimRight</span><span class="op" id="2367761">(</span><span class="ident" id="2367762">s</span>&nbsp;<span class="builtintype" id="2367764">string</span><span class="op" id="2367770">,</span>&nbsp;<span class="ident" id="2367772">cutset</span>&nbsp;<span class="builtintype" id="2367779">string</span><span class="op" id="2367785">)</span>&nbsp;<span class="builtintype" id="2367787">string</span>&nbsp;<span class="op" id="2367794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2367797">if</span>&nbsp;<span class="ident" id="2367800">s</span>&nbsp;<span class="op" id="2367802">==</span>&nbsp;<span class="string" id="2367805">&#34;&#34;</span>&nbsp;<span class="op" id="2367808">||</span>&nbsp;<span class="ident" id="2367811">cutset</span>&nbsp;<span class="op" id="2367818">==</span>&nbsp;<span class="string" id="2367821">&#34;&#34;</span>&nbsp;<span class="op" id="2367824">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2367828">return</span>&nbsp;<span class="ident" id="2367835">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2367838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2367841">return</span>&nbsp;<span class="ident" id="2367848">TrimRightFunc</span><span class="op" id="2367861">(</span><span class="ident" id="2367862">s</span><span class="op" id="2367863">,</span>&nbsp;<span class="ident" id="2367865">makeCutsetFunc</span><span class="op" id="2367879">(</span><span class="ident" id="2367880">cutset</span><span class="op" id="2367886">)</span><span class="op" id="2367887">)</span><br>
<span class="lineno"></span><span class="op" id="2367889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">645</span><span class="comment" id="2367892">//&nbsp;TrimSpace&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s,&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="2367955">//&nbsp;and&nbsp;trailing&nbsp;white&nbsp;space&nbsp;removed,&nbsp;as&nbsp;defined&nbsp;by&nbsp;Unicode.</span><br>
<span class="lineno"></span><span class="keyword" id="2368015">func</span>&nbsp;<span class="ident" id="2368020">TrimSpace</span><span class="op" id="2368029">(</span><span class="ident" id="2368030">s</span>&nbsp;<span class="builtintype" id="2368032">string</span><span class="op" id="2368038">)</span>&nbsp;<span class="builtintype" id="2368040">string</span>&nbsp;<span class="op" id="2368047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2368050">return</span>&nbsp;<span class="ident" id="2368057">TrimFunc</span><span class="op" id="2368065">(</span><span class="ident" id="2368066">s</span><span class="op" id="2368067">,</span>&nbsp;<span class="ident" id="2368069">unicode</span><span class="op" id="2368076">.</span><span class="ident" id="2368077">IsSpace</span><span class="op" id="2368084">)</span><br>
<span class="lineno"></span><span class="op" id="2368086">}</span><br>
<span class="lineno">650</span><br>
<span class="lineno"></span><span class="comment" id="2368089">//&nbsp;TrimPrefix&nbsp;returns&nbsp;s&nbsp;without&nbsp;the&nbsp;provided&nbsp;leading&nbsp;prefix&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2368157">//&nbsp;If&nbsp;s&nbsp;doesn&#39;t&nbsp;start&nbsp;with&nbsp;prefix,&nbsp;s&nbsp;is&nbsp;returned&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2368217">func</span>&nbsp;<span class="ident" id="2368222">TrimPrefix</span><span class="op" id="2368232">(</span><span class="ident" id="2368233">s</span><span class="op" id="2368234">,</span>&nbsp;<span class="ident" id="2368236">prefix</span>&nbsp;<span class="builtintype" id="2368243">string</span><span class="op" id="2368249">)</span>&nbsp;<span class="builtintype" id="2368251">string</span>&nbsp;<span class="op" id="2368258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2368261">if</span>&nbsp;<span class="ident" id="2368264">HasPrefix</span><span class="op" id="2368273">(</span><span class="ident" id="2368274">s</span><span class="op" id="2368275">,</span>&nbsp;<span class="ident" id="2368277">prefix</span><span class="op" id="2368283">)</span>&nbsp;<span class="op" id="2368285">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2368289">return</span>&nbsp;<span class="ident" id="2368296">s</span><span class="op" id="2368297">[</span><span class="builtinfunc" id="2368298">len</span><span class="op" id="2368301">(</span><span class="ident" id="2368302">prefix</span><span class="op" id="2368308">)</span><span class="op" id="2368309">:</span><span class="op" id="2368310">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2368313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2368316">return</span>&nbsp;<span class="ident" id="2368323">s</span><br>
<span class="lineno"></span><span class="op" id="2368325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">660</span><span class="comment" id="2368328">//&nbsp;TrimSuffix&nbsp;returns&nbsp;s&nbsp;without&nbsp;the&nbsp;provided&nbsp;trailing&nbsp;suffix&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2368397">//&nbsp;If&nbsp;s&nbsp;doesn&#39;t&nbsp;end&nbsp;with&nbsp;suffix,&nbsp;s&nbsp;is&nbsp;returned&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2368455">func</span>&nbsp;<span class="ident" id="2368460">TrimSuffix</span><span class="op" id="2368470">(</span><span class="ident" id="2368471">s</span><span class="op" id="2368472">,</span>&nbsp;<span class="ident" id="2368474">suffix</span>&nbsp;<span class="builtintype" id="2368481">string</span><span class="op" id="2368487">)</span>&nbsp;<span class="builtintype" id="2368489">string</span>&nbsp;<span class="op" id="2368496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2368499">if</span>&nbsp;<span class="ident" id="2368502">HasSuffix</span><span class="op" id="2368511">(</span><span class="ident" id="2368512">s</span><span class="op" id="2368513">,</span>&nbsp;<span class="ident" id="2368515">suffix</span><span class="op" id="2368521">)</span>&nbsp;<span class="op" id="2368523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2368527">return</span>&nbsp;<span class="ident" id="2368534">s</span><span class="op" id="2368535">[</span><span class="op" id="2368536">:</span><span class="builtinfunc" id="2368537">len</span><span class="op" id="2368540">(</span><span class="ident" id="2368541">s</span><span class="op" id="2368542">)</span><span class="op" id="2368543">-</span><span class="builtinfunc" id="2368544">len</span><span class="op" id="2368547">(</span><span class="ident" id="2368548">suffix</span><span class="op" id="2368554">)</span><span class="op" id="2368555">]</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2368558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2368561">return</span>&nbsp;<span class="ident" id="2368568">s</span><br>
<span class="lineno"></span><span class="op" id="2368570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2368573">//&nbsp;Replace&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;the&nbsp;first&nbsp;n</span><br>
<span class="lineno">670</span><span class="comment" id="2368632">//&nbsp;non-overlapping&nbsp;instances&nbsp;of&nbsp;old&nbsp;replaced&nbsp;by&nbsp;new.</span><br>
<span class="lineno"></span><span class="comment" id="2368685">//&nbsp;If&nbsp;old&nbsp;is&nbsp;empty,&nbsp;it&nbsp;matches&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="2368747">//&nbsp;and&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence,&nbsp;yielding&nbsp;up&nbsp;to&nbsp;k+1&nbsp;replacements</span><br>
<span class="lineno"></span><span class="comment" id="2368813">//&nbsp;for&nbsp;a&nbsp;k-rune&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2368837">//&nbsp;If&nbsp;n&nbsp;&lt;&nbsp;0,&nbsp;there&nbsp;is&nbsp;no&nbsp;limit&nbsp;on&nbsp;the&nbsp;number&nbsp;of&nbsp;replacements.</span><br>
<span class="lineno">675</span><span class="keyword" id="2368899">func</span>&nbsp;<span class="ident" id="2368904">Replace</span><span class="op" id="2368911">(</span><span class="ident" id="2368912">s</span><span class="op" id="2368913">,</span>&nbsp;<span class="ident" id="2368915">old</span><span class="op" id="2368918">,</span>&nbsp;<span class="builtinfunc" id="2368920">new</span>&nbsp;<span class="builtintype" id="2368924">string</span><span class="op" id="2368930">,</span>&nbsp;<span class="ident" id="2368932">n</span>&nbsp;<span class="builtintype" id="2368934">int</span><span class="op" id="2368937">)</span>&nbsp;<span class="builtintype" id="2368939">string</span>&nbsp;<span class="op" id="2368946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2368949">if</span>&nbsp;<span class="ident" id="2368952">old</span>&nbsp;<span class="op" id="2368956">==</span>&nbsp;<span class="builtinfunc" id="2368959">new</span>&nbsp;<span class="op" id="2368963">||</span>&nbsp;<span class="ident" id="2368966">n</span>&nbsp;<span class="op" id="2368968">==</span>&nbsp;<span class="num" id="2368971">0</span>&nbsp;<span class="op" id="2368973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2368977">return</span>&nbsp;<span class="ident" id="2368984">s</span>&nbsp;<span class="comment" id="2368986">//&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2369007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2369011">//&nbsp;Compute&nbsp;number&nbsp;of&nbsp;replacements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2369047">if</span>&nbsp;<span class="ident" id="2369050">m</span>&nbsp;<span class="op" id="2369052">:=</span>&nbsp;<span class="ident" id="2369055">Count</span><span class="op" id="2369060">(</span><span class="ident" id="2369061">s</span><span class="op" id="2369062">,</span>&nbsp;<span class="ident" id="2369064">old</span><span class="op" id="2369067">)</span><span class="op" id="2369068">;</span>&nbsp;<span class="ident" id="2369070">m</span>&nbsp;<span class="op" id="2369072">==</span>&nbsp;<span class="num" id="2369075">0</span>&nbsp;<span class="op" id="2369077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2369081">return</span>&nbsp;<span class="ident" id="2369088">s</span>&nbsp;<span class="comment" id="2369090">//&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2369111">}</span>&nbsp;<span class="keyword" id="2369113">else</span>&nbsp;<span class="keyword" id="2369118">if</span>&nbsp;<span class="ident" id="2369121">n</span>&nbsp;<span class="op" id="2369123">&lt;</span>&nbsp;<span class="num" id="2369125">0</span>&nbsp;<span class="op" id="2369127">||</span>&nbsp;<span class="ident" id="2369130">m</span>&nbsp;<span class="op" id="2369132">&lt;</span>&nbsp;<span class="ident" id="2369134">n</span>&nbsp;<span class="op" id="2369136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369140">n</span>&nbsp;<span class="op" id="2369142">=</span>&nbsp;<span class="ident" id="2369144">m</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2369147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2369151">//&nbsp;Apply&nbsp;replacements&nbsp;to&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369185">t</span>&nbsp;<span class="op" id="2369187">:=</span>&nbsp;<span class="builtinfunc" id="2369190">make</span><span class="op" id="2369194">(</span><span class="op" id="2369195">[</span><span class="op" id="2369196">]</span><span class="builtintype" id="2369197">byte</span><span class="op" id="2369201">,</span>&nbsp;<span class="builtinfunc" id="2369203">len</span><span class="op" id="2369206">(</span><span class="ident" id="2369207">s</span><span class="op" id="2369208">)</span><span class="op" id="2369209">+</span><span class="ident" id="2369210">n</span><span class="op" id="2369211">*</span><span class="op" id="2369212">(</span><span class="builtinfunc" id="2369213">len</span><span class="op" id="2369216">(</span><span class="builtinfunc" id="2369217">new</span><span class="op" id="2369220">)</span><span class="op" id="2369221">-</span><span class="builtinfunc" id="2369222">len</span><span class="op" id="2369225">(</span><span class="ident" id="2369226">old</span><span class="op" id="2369229">)</span><span class="op" id="2369230">)</span><span class="op" id="2369231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369234">w</span>&nbsp;<span class="op" id="2369236">:=</span>&nbsp;<span class="num" id="2369239">0</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369242">start</span>&nbsp;<span class="op" id="2369248">:=</span>&nbsp;<span class="num" id="2369251">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2369254">for</span>&nbsp;<span class="ident" id="2369258">i</span>&nbsp;<span class="op" id="2369260">:=</span>&nbsp;<span class="num" id="2369263">0</span><span class="op" id="2369264">;</span>&nbsp;<span class="ident" id="2369266">i</span>&nbsp;<span class="op" id="2369268">&lt;</span>&nbsp;<span class="ident" id="2369270">n</span><span class="op" id="2369271">;</span>&nbsp;<span class="ident" id="2369273">i</span><span class="op" id="2369274">++</span>&nbsp;<span class="op" id="2369277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369281">j</span>&nbsp;<span class="op" id="2369283">:=</span>&nbsp;<span class="ident" id="2369286">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2369294">if</span>&nbsp;<span class="builtinfunc" id="2369297">len</span><span class="op" id="2369300">(</span><span class="ident" id="2369301">old</span><span class="op" id="2369304">)</span>&nbsp;<span class="op" id="2369306">==</span>&nbsp;<span class="num" id="2369309">0</span>&nbsp;<span class="op" id="2369311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2369316">if</span>&nbsp;<span class="ident" id="2369319">i</span>&nbsp;<span class="op" id="2369321">&gt;</span>&nbsp;<span class="num" id="2369323">0</span>&nbsp;<span class="op" id="2369325">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369331">_</span><span class="op" id="2369332">,</span>&nbsp;<span class="ident" id="2369334">wid</span>&nbsp;<span class="op" id="2369338">:=</span>&nbsp;<span class="ident" id="2369341">utf8</span><span class="op" id="2369345">.</span><span class="ident" id="2369346">DecodeRuneInString</span><span class="op" id="2369364">(</span><span class="ident" id="2369365">s</span><span class="op" id="2369366">[</span><span class="ident" id="2369367">start</span><span class="op" id="2369372">:</span><span class="op" id="2369373">]</span><span class="op" id="2369374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369380">j</span>&nbsp;<span class="op" id="2369382">+=</span>&nbsp;<span class="ident" id="2369385">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2369392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2369396">}</span>&nbsp;<span class="keyword" id="2369398">else</span>&nbsp;<span class="op" id="2369403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369408">j</span>&nbsp;<span class="op" id="2369410">+=</span>&nbsp;<span class="ident" id="2369413">Index</span><span class="op" id="2369418">(</span><span class="ident" id="2369419">s</span><span class="op" id="2369420">[</span><span class="ident" id="2369421">start</span><span class="op" id="2369426">:</span><span class="op" id="2369427">]</span><span class="op" id="2369428">,</span>&nbsp;<span class="ident" id="2369430">old</span><span class="op" id="2369433">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2369437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369441">w</span>&nbsp;<span class="op" id="2369443">+=</span>&nbsp;<span class="builtinfunc" id="2369446">copy</span><span class="op" id="2369450">(</span><span class="ident" id="2369451">t</span><span class="op" id="2369452">[</span><span class="ident" id="2369453">w</span><span class="op" id="2369454">:</span><span class="op" id="2369455">]</span><span class="op" id="2369456">,</span>&nbsp;<span class="ident" id="2369458">s</span><span class="op" id="2369459">[</span><span class="ident" id="2369460">start</span><span class="op" id="2369465">:</span><span class="ident" id="2369466">j</span><span class="op" id="2369467">]</span><span class="op" id="2369468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369472">w</span>&nbsp;<span class="op" id="2369474">+=</span>&nbsp;<span class="builtinfunc" id="2369477">copy</span><span class="op" id="2369481">(</span><span class="ident" id="2369482">t</span><span class="op" id="2369483">[</span><span class="ident" id="2369484">w</span><span class="op" id="2369485">:</span><span class="op" id="2369486">]</span><span class="op" id="2369487">,</span>&nbsp;<span class="builtinfunc" id="2369489">new</span><span class="op" id="2369492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369496">start</span>&nbsp;<span class="op" id="2369502">=</span>&nbsp;<span class="ident" id="2369504">j</span>&nbsp;<span class="op" id="2369506">+</span>&nbsp;<span class="builtinfunc" id="2369508">len</span><span class="op" id="2369511">(</span><span class="ident" id="2369512">old</span><span class="op" id="2369515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2369518">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369521">w</span>&nbsp;<span class="op" id="2369523">+=</span>&nbsp;<span class="builtinfunc" id="2369526">copy</span><span class="op" id="2369530">(</span><span class="ident" id="2369531">t</span><span class="op" id="2369532">[</span><span class="ident" id="2369533">w</span><span class="op" id="2369534">:</span><span class="op" id="2369535">]</span><span class="op" id="2369536">,</span>&nbsp;<span class="ident" id="2369538">s</span><span class="op" id="2369539">[</span><span class="ident" id="2369540">start</span><span class="op" id="2369545">:</span><span class="op" id="2369546">]</span><span class="op" id="2369547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2369550">return</span>&nbsp;<span class="builtintype" id="2369557">string</span><span class="op" id="2369563">(</span><span class="ident" id="2369564">t</span><span class="op" id="2369565">[</span><span class="num" id="2369566">0</span><span class="op" id="2369567">:</span><span class="ident" id="2369568">w</span><span class="op" id="2369569">]</span><span class="op" id="2369570">)</span><br>
<span class="lineno"></span><span class="op" id="2369572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2369575">//&nbsp;EqualFold&nbsp;reports&nbsp;whether&nbsp;s&nbsp;and&nbsp;t,&nbsp;interpreted&nbsp;as&nbsp;UTF-8&nbsp;strings,</span><br>
<span class="lineno">710</span><span class="comment" id="2369643">//&nbsp;are&nbsp;equal&nbsp;under&nbsp;Unicode&nbsp;case-folding.</span><br>
<span class="lineno"></span><span class="keyword" id="2369684">func</span>&nbsp;<span class="ident" id="2369689">EqualFold</span><span class="op" id="2369698">(</span><span class="ident" id="2369699">s</span><span class="op" id="2369700">,</span>&nbsp;<span class="ident" id="2369702">t</span>&nbsp;<span class="builtintype" id="2369704">string</span><span class="op" id="2369710">)</span>&nbsp;<span class="builtintype" id="2369712">bool</span>&nbsp;<span class="op" id="2369717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2369720">for</span>&nbsp;<span class="ident" id="2369724">s</span>&nbsp;<span class="op" id="2369726">!=</span>&nbsp;<span class="string" id="2369729">&#34;&#34;</span>&nbsp;<span class="op" id="2369732">&amp;&amp;</span>&nbsp;<span class="ident" id="2369735">t</span>&nbsp;<span class="op" id="2369737">!=</span>&nbsp;<span class="string" id="2369740">&#34;&#34;</span>&nbsp;<span class="op" id="2369743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2369747">//&nbsp;Extract&nbsp;first&nbsp;rune&nbsp;from&nbsp;each&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2369789">var</span>&nbsp;<span class="ident" id="2369793">sr</span><span class="op" id="2369795">,</span>&nbsp;<span class="ident" id="2369797">tr</span>&nbsp;<span class="builtintype" id="2369800">rune</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2369807">if</span>&nbsp;<span class="ident" id="2369810">s</span><span class="op" id="2369811">[</span><span class="num" id="2369812">0</span><span class="op" id="2369813">]</span>&nbsp;<span class="op" id="2369815">&lt;</span>&nbsp;<span class="ident" id="2369817">utf8</span><span class="op" id="2369821">.</span><span class="ident" id="2369822">RuneSelf</span>&nbsp;<span class="op" id="2369831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369836">sr</span><span class="op" id="2369838">,</span>&nbsp;<span class="ident" id="2369840">s</span>&nbsp;<span class="op" id="2369842">=</span>&nbsp;<span class="builtintype" id="2369844">rune</span><span class="op" id="2369848">(</span><span class="ident" id="2369849">s</span><span class="op" id="2369850">[</span><span class="num" id="2369851">0</span><span class="op" id="2369852">]</span><span class="op" id="2369853">)</span><span class="op" id="2369854">,</span>&nbsp;<span class="ident" id="2369856">s</span><span class="op" id="2369857">[</span><span class="num" id="2369858">1</span><span class="op" id="2369859">:</span><span class="op" id="2369860">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2369864">}</span>&nbsp;<span class="keyword" id="2369866">else</span>&nbsp;<span class="op" id="2369871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369876">r</span><span class="op" id="2369877">,</span>&nbsp;<span class="ident" id="2369879">size</span>&nbsp;<span class="op" id="2369884">:=</span>&nbsp;<span class="ident" id="2369887">utf8</span><span class="op" id="2369891">.</span><span class="ident" id="2369892">DecodeRuneInString</span><span class="op" id="2369910">(</span><span class="ident" id="2369911">s</span><span class="op" id="2369912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369917">sr</span><span class="op" id="2369919">,</span>&nbsp;<span class="ident" id="2369921">s</span>&nbsp;<span class="op" id="2369923">=</span>&nbsp;<span class="ident" id="2369925">r</span><span class="op" id="2369926">,</span>&nbsp;<span class="ident" id="2369928">s</span><span class="op" id="2369929">[</span><span class="ident" id="2369930">size</span><span class="op" id="2369934">:</span><span class="op" id="2369935">]</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2369939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2369943">if</span>&nbsp;<span class="ident" id="2369946">t</span><span class="op" id="2369947">[</span><span class="num" id="2369948">0</span><span class="op" id="2369949">]</span>&nbsp;<span class="op" id="2369951">&lt;</span>&nbsp;<span class="ident" id="2369953">utf8</span><span class="op" id="2369957">.</span><span class="ident" id="2369958">RuneSelf</span>&nbsp;<span class="op" id="2369967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2369972">tr</span><span class="op" id="2369974">,</span>&nbsp;<span class="ident" id="2369976">t</span>&nbsp;<span class="op" id="2369978">=</span>&nbsp;<span class="builtintype" id="2369980">rune</span><span class="op" id="2369984">(</span><span class="ident" id="2369985">t</span><span class="op" id="2369986">[</span><span class="num" id="2369987">0</span><span class="op" id="2369988">]</span><span class="op" id="2369989">)</span><span class="op" id="2369990">,</span>&nbsp;<span class="ident" id="2369992">t</span><span class="op" id="2369993">[</span><span class="num" id="2369994">1</span><span class="op" id="2369995">:</span><span class="op" id="2369996">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2370000">}</span>&nbsp;<span class="keyword" id="2370002">else</span>&nbsp;<span class="op" id="2370007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2370012">r</span><span class="op" id="2370013">,</span>&nbsp;<span class="ident" id="2370015">size</span>&nbsp;<span class="op" id="2370020">:=</span>&nbsp;<span class="ident" id="2370023">utf8</span><span class="op" id="2370027">.</span><span class="ident" id="2370028">DecodeRuneInString</span><span class="op" id="2370046">(</span><span class="ident" id="2370047">t</span><span class="op" id="2370048">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2370053">tr</span><span class="op" id="2370055">,</span>&nbsp;<span class="ident" id="2370057">t</span>&nbsp;<span class="op" id="2370059">=</span>&nbsp;<span class="ident" id="2370061">r</span><span class="op" id="2370062">,</span>&nbsp;<span class="ident" id="2370064">t</span><span class="op" id="2370065">[</span><span class="ident" id="2370066">size</span><span class="op" id="2370070">:</span><span class="op" id="2370071">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2370075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2370080">//&nbsp;If&nbsp;they&nbsp;match,&nbsp;keep&nbsp;going;&nbsp;if&nbsp;not,&nbsp;return&nbsp;false.</span><br>
<span class="lineno"></span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2370135">//&nbsp;Easy&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370151">if</span>&nbsp;<span class="ident" id="2370154">tr</span>&nbsp;<span class="op" id="2370157">==</span>&nbsp;<span class="ident" id="2370160">sr</span>&nbsp;<span class="op" id="2370163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370168">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2370179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2370184">//&nbsp;Make&nbsp;sr&nbsp;&lt;&nbsp;tr&nbsp;to&nbsp;simplify&nbsp;what&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370228">if</span>&nbsp;<span class="ident" id="2370231">tr</span>&nbsp;<span class="op" id="2370234">&lt;</span>&nbsp;<span class="ident" id="2370236">sr</span>&nbsp;<span class="op" id="2370239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2370244">tr</span><span class="op" id="2370246">,</span>&nbsp;<span class="ident" id="2370248">sr</span>&nbsp;<span class="op" id="2370251">=</span>&nbsp;<span class="ident" id="2370253">sr</span><span class="op" id="2370255">,</span>&nbsp;<span class="ident" id="2370257">tr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2370262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2370266">//&nbsp;Fast&nbsp;check&nbsp;for&nbsp;ASCII.</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370293">if</span>&nbsp;<span class="ident" id="2370296">tr</span>&nbsp;<span class="op" id="2370299">&lt;</span>&nbsp;<span class="ident" id="2370301">utf8</span><span class="op" id="2370305">.</span><span class="ident" id="2370306">RuneSelf</span>&nbsp;<span class="op" id="2370315">&amp;&amp;</span>&nbsp;<span class="string" id="2370318">&#39;A&#39;</span>&nbsp;<span class="op" id="2370322">&lt;=</span>&nbsp;<span class="ident" id="2370325">sr</span>&nbsp;<span class="op" id="2370328">&amp;&amp;</span>&nbsp;<span class="ident" id="2370331">sr</span>&nbsp;<span class="op" id="2370334">&lt;=</span>&nbsp;<span class="string" id="2370337">&#39;Z&#39;</span>&nbsp;<span class="op" id="2370341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2370346">//&nbsp;ASCII,&nbsp;and&nbsp;sr&nbsp;is&nbsp;upper&nbsp;case.&nbsp;&nbsp;tr&nbsp;must&nbsp;be&nbsp;lower&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370405">if</span>&nbsp;<span class="ident" id="2370408">tr</span>&nbsp;<span class="op" id="2370411">==</span>&nbsp;<span class="ident" id="2370414">sr</span><span class="op" id="2370416">+</span><span class="string" id="2370417">&#39;a&#39;</span><span class="op" id="2370420">-</span><span class="string" id="2370421">&#39;A&#39;</span>&nbsp;<span class="op" id="2370425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370431">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2370443">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370448">return</span>&nbsp;<span class="builtintype" id="2370455">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2370463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2370468">//&nbsp;General&nbsp;case.&nbsp;&nbsp;SimpleFold(x)&nbsp;returns&nbsp;the&nbsp;next&nbsp;equivalent&nbsp;rune&nbsp;&gt;&nbsp;x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2370539">//&nbsp;or&nbsp;wraps&nbsp;around&nbsp;to&nbsp;smaller&nbsp;values.</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2370579">r</span>&nbsp;<span class="op" id="2370581">:=</span>&nbsp;<span class="ident" id="2370584">unicode</span><span class="op" id="2370591">.</span><span class="ident" id="2370592">SimpleFold</span><span class="op" id="2370602">(</span><span class="ident" id="2370603">sr</span><span class="op" id="2370605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370609">for</span>&nbsp;<span class="ident" id="2370613">r</span>&nbsp;<span class="op" id="2370615">!=</span>&nbsp;<span class="ident" id="2370618">sr</span>&nbsp;<span class="op" id="2370621">&amp;&amp;</span>&nbsp;<span class="ident" id="2370624">r</span>&nbsp;<span class="op" id="2370626">&lt;</span>&nbsp;<span class="ident" id="2370628">tr</span>&nbsp;<span class="op" id="2370631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2370636">r</span>&nbsp;<span class="op" id="2370638">=</span>&nbsp;<span class="ident" id="2370640">unicode</span><span class="op" id="2370647">.</span><span class="ident" id="2370648">SimpleFold</span><span class="op" id="2370658">(</span><span class="ident" id="2370659">r</span><span class="op" id="2370660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2370664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370668">if</span>&nbsp;<span class="ident" id="2370671">r</span>&nbsp;<span class="op" id="2370673">==</span>&nbsp;<span class="ident" id="2370676">tr</span>&nbsp;<span class="op" id="2370679">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370684">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2370695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370699">return</span>&nbsp;<span class="builtintype" id="2370706">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2370713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2370717">//&nbsp;One&nbsp;string&nbsp;is&nbsp;empty.&nbsp;&nbsp;Are&nbsp;both?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2370753">return</span>&nbsp;<span class="ident" id="2370760">s</span>&nbsp;<span class="op" id="2370762">==</span>&nbsp;<span class="ident" id="2370765">t</span><br>
<span class="lineno"></span><span class="op" id="2370767">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
