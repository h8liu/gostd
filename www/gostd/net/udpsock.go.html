<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3410306">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3410362">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3410416">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3410467">package</span>&nbsp;<span class="ident" id="3410475">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3410480">//&nbsp;UDPAddr&nbsp;represents&nbsp;the&nbsp;address&nbsp;of&nbsp;a&nbsp;UDP&nbsp;end&nbsp;point.</span><br>
<span class="lineno"></span><span class="keyword" id="3410534">type</span>&nbsp;<span class="ident" id="3410539">UDPAddr</span>&nbsp;<span class="keyword" id="3410547">struct</span>&nbsp;<span class="op" id="3410554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3410557">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3410562">IP</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3410566">Port</span>&nbsp;<span class="builtintype" id="3410571">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3410576">Zone</span>&nbsp;<span class="builtintype" id="3410581">string</span>&nbsp;<span class="comment" id="3410588">//&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone</span><br>
<span class="lineno"></span><span class="op" id="3410619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3410622">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;udp&#34;.</span><br>
<span class="lineno">15</span><span class="keyword" id="3410676">func</span>&nbsp;<span class="op" id="3410681">(</span><span class="ident" id="3410682">a</span>&nbsp;<span class="op" id="3410684">*</span><span class="ident" id="3410685">UDPAddr</span><span class="op" id="3410692">)</span>&nbsp;<span class="ident" id="3410694">Network</span><span class="op" id="3410701">(</span><span class="op" id="3410702">)</span>&nbsp;<span class="builtintype" id="3410704">string</span>&nbsp;<span class="op" id="3410711">{</span>&nbsp;<span class="keyword" id="3410713">return</span>&nbsp;<span class="string" id="3410720">&#34;udp&#34;</span>&nbsp;<span class="op" id="3410726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3410729">func</span>&nbsp;<span class="op" id="3410734">(</span><span class="ident" id="3410735">a</span>&nbsp;<span class="op" id="3410737">*</span><span class="ident" id="3410738">UDPAddr</span><span class="op" id="3410745">)</span>&nbsp;<span class="ident" id="3410747">String</span><span class="op" id="3410753">(</span><span class="op" id="3410754">)</span>&nbsp;<span class="builtintype" id="3410756">string</span>&nbsp;<span class="op" id="3410763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3410766">if</span>&nbsp;<span class="ident" id="3410769">a</span>&nbsp;<span class="op" id="3410771">==</span>&nbsp;<span class="ident" id="3410774">nil</span>&nbsp;<span class="op" id="3410778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3410782">return</span>&nbsp;<span class="string" id="3410789">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3410798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3410801">ip</span>&nbsp;<span class="op" id="3410804">:=</span>&nbsp;<span class="ident" id="3410807">ipEmptyString</span><span class="op" id="3410820">(</span><span class="ident" id="3410821">a</span><span class="op" id="3410822">.</span><span class="ident" id="3410823">IP</span><span class="op" id="3410825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3410828">if</span>&nbsp;<span class="ident" id="3410831">a</span><span class="op" id="3410832">.</span><span class="ident" id="3410833">Zone</span>&nbsp;<span class="op" id="3410838">!=</span>&nbsp;<span class="string" id="3410841">&#34;&#34;</span>&nbsp;<span class="op" id="3410844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3410848">return</span>&nbsp;<span class="ident" id="3410855">JoinHostPort</span><span class="op" id="3410867">(</span><span class="ident" id="3410868">ip</span><span class="op" id="3410870">+</span><span class="string" id="3410871">&#34;%&#34;</span><span class="op" id="3410874">+</span><span class="ident" id="3410875">a</span><span class="op" id="3410876">.</span><span class="ident" id="3410877">Zone</span><span class="op" id="3410881">,</span>&nbsp;<span class="ident" id="3410883">itoa</span><span class="op" id="3410887">(</span><span class="ident" id="3410888">a</span><span class="op" id="3410889">.</span><span class="ident" id="3410890">Port</span><span class="op" id="3410894">)</span><span class="op" id="3410895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3410898">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3410901">return</span>&nbsp;<span class="ident" id="3410908">JoinHostPort</span><span class="op" id="3410920">(</span><span class="ident" id="3410921">ip</span><span class="op" id="3410923">,</span>&nbsp;<span class="ident" id="3410925">itoa</span><span class="op" id="3410929">(</span><span class="ident" id="3410930">a</span><span class="op" id="3410931">.</span><span class="ident" id="3410932">Port</span><span class="op" id="3410936">)</span><span class="op" id="3410937">)</span><br>
<span class="lineno"></span><span class="op" id="3410939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3410942">func</span>&nbsp;<span class="op" id="3410947">(</span><span class="ident" id="3410948">a</span>&nbsp;<span class="op" id="3410950">*</span><span class="ident" id="3410951">UDPAddr</span><span class="op" id="3410958">)</span>&nbsp;<span class="ident" id="3410960">toAddr</span><span class="op" id="3410966">(</span><span class="op" id="3410967">)</span>&nbsp;<span class="ident" id="3410969">Addr</span>&nbsp;<span class="op" id="3410974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3410977">if</span>&nbsp;<span class="ident" id="3410980">a</span>&nbsp;<span class="op" id="3410982">==</span>&nbsp;<span class="ident" id="3410985">nil</span>&nbsp;<span class="op" id="3410989">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3410993">return</span>&nbsp;<span class="ident" id="3411000">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3411005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3411008">return</span>&nbsp;<span class="ident" id="3411015">a</span><br>
<span class="lineno"></span><span class="op" id="3411017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3411020">//&nbsp;ResolveUDPAddr&nbsp;parses&nbsp;addr&nbsp;as&nbsp;a&nbsp;UDP&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host:port&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3411091">//&nbsp;or&nbsp;&#34;[ipv6-host%zone]:port&#34;&nbsp;and&nbsp;resolves&nbsp;a&nbsp;pair&nbsp;of&nbsp;domain&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3411160">//&nbsp;port&nbsp;name&nbsp;on&nbsp;the&nbsp;network&nbsp;net,&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;udp&#34;,&nbsp;&#34;udp4&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3411224">//&nbsp;&#34;udp6&#34;.&nbsp;&nbsp;A&nbsp;literal&nbsp;address&nbsp;or&nbsp;host&nbsp;name&nbsp;for&nbsp;IPv6&nbsp;must&nbsp;be&nbsp;enclosed</span><br>
<span class="lineno"></span><span class="comment" id="3411293">//&nbsp;in&nbsp;square&nbsp;brackets,&nbsp;as&nbsp;in&nbsp;&#34;[::1]:80&#34;,&nbsp;&#34;[ipv6-host]:http&#34;&nbsp;or</span><br>
<span class="lineno">40</span><span class="comment" id="3411356">//&nbsp;&#34;[ipv6-host%zone]:80&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3411382">func</span>&nbsp;<span class="ident" id="3411387">ResolveUDPAddr</span><span class="op" id="3411401">(</span><span class="ident" id="3411402">net</span><span class="op" id="3411405">,</span>&nbsp;<span class="ident" id="3411407">addr</span>&nbsp;<span class="builtintype" id="3411412">string</span><span class="op" id="3411418">)</span>&nbsp;<span class="op" id="3411420">(</span><span class="op" id="3411421">*</span><span class="ident" id="3411422">UDPAddr</span><span class="op" id="3411429">,</span>&nbsp;<span class="builtintype" id="3411431">error</span><span class="op" id="3411436">)</span>&nbsp;<span class="op" id="3411438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3411441">switch</span>&nbsp;<span class="ident" id="3411448">net</span>&nbsp;<span class="op" id="3411452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3411455">case</span>&nbsp;<span class="string" id="3411460">&#34;udp&#34;</span><span class="op" id="3411465">,</span>&nbsp;<span class="string" id="3411467">&#34;udp4&#34;</span><span class="op" id="3411473">,</span>&nbsp;<span class="string" id="3411475">&#34;udp6&#34;</span><span class="op" id="3411481">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3411484">case</span>&nbsp;<span class="string" id="3411489">&#34;&#34;</span><span class="op" id="3411491">:</span>&nbsp;<span class="comment" id="3411493">//&nbsp;a&nbsp;hint&nbsp;wildcard&nbsp;for&nbsp;Go&nbsp;1.0&nbsp;undocumented&nbsp;behavior</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3411547">net</span>&nbsp;<span class="op" id="3411551">=</span>&nbsp;<span class="string" id="3411553">&#34;udp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3411560">default</span><span class="op" id="3411567">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3411571">return</span>&nbsp;<span class="ident" id="3411578">nil</span><span class="op" id="3411581">,</span>&nbsp;<span class="ident" id="3411583">UnknownNetworkError</span><span class="op" id="3411602">(</span><span class="ident" id="3411603">net</span><span class="op" id="3411606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3411609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3411612">a</span><span class="op" id="3411613">,</span>&nbsp;<span class="ident" id="3411615">err</span>&nbsp;<span class="op" id="3411619">:=</span>&nbsp;<span class="ident" id="3411622">resolveInternetAddr</span><span class="op" id="3411641">(</span><span class="ident" id="3411642">net</span><span class="op" id="3411645">,</span>&nbsp;<span class="ident" id="3411647">addr</span><span class="op" id="3411651">,</span>&nbsp;<span class="ident" id="3411653">noDeadline</span><span class="op" id="3411663">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3411666">if</span>&nbsp;<span class="ident" id="3411669">err</span>&nbsp;<span class="op" id="3411673">!=</span>&nbsp;<span class="ident" id="3411676">nil</span>&nbsp;<span class="op" id="3411680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3411684">return</span>&nbsp;<span class="ident" id="3411691">nil</span><span class="op" id="3411694">,</span>&nbsp;<span class="ident" id="3411696">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3411701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3411704">return</span>&nbsp;<span class="ident" id="3411711">a</span><span class="op" id="3411712">.</span><span class="ident" id="3411713">toAddr</span><span class="op" id="3411719">(</span><span class="op" id="3411720">)</span><span class="op" id="3411721">.</span><span class="op" id="3411722">(</span><span class="op" id="3411723">*</span><span class="ident" id="3411724">UDPAddr</span><span class="op" id="3411731">)</span><span class="op" id="3411732">,</span>&nbsp;<span class="ident" id="3411734">nil</span><br>
<span class="lineno"></span><span class="op" id="3411738">}</span>
</div>
</body>
</html>
