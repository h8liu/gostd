<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/binary</h2>
<ul>
<li><a href="/gostd/encoding/binary/binary.go.html">binary.go</a></li>
<li><a href="/gostd/encoding/binary/binary_test.go.html">binary_test.go</a></li>
<li><a href="/gostd/encoding/binary/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/binary/varint.go.html">varint.go</a></li>
<li><a href="/gostd/encoding/binary/varint_test.go.html">varint_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8470898">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8470953">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8471007">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8471058">package</span>&nbsp;<span class="ident" id="8471066">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8471074">import</span>&nbsp;<span class="op" id="8471081">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8471084">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8471093">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8471099">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8471109">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8471112">func</span>&nbsp;<span class="ident" id="8471117">testConstant</span><span class="op" id="8471129">(</span><span class="ident" id="8471130">t</span>&nbsp;<span class="op" id="8471132">*</span><span class="ident" id="8471133">testing</span><span class="op" id="8471140">.</span><span class="ident" id="8471141">T</span><span class="op" id="8471142">,</span>&nbsp;<span class="ident" id="8471144">w</span>&nbsp;<span class="builtintype" id="8471146">uint</span><span class="op" id="8471150">,</span>&nbsp;<span class="ident" id="8471152">max</span>&nbsp;<span class="builtintype" id="8471156">int</span><span class="op" id="8471159">)</span>&nbsp;<span class="op" id="8471161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471164">buf</span>&nbsp;<span class="op" id="8471168">:=</span>&nbsp;<span class="builtinfunc" id="8471171">make</span><span class="op" id="8471175">(</span><span class="op" id="8471176">[</span><span class="op" id="8471177">]</span><span class="builtintype" id="8471178">byte</span><span class="op" id="8471182">,</span>&nbsp;<span class="ident" id="8471184">MaxVarintLen64</span><span class="op" id="8471198">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471201">n</span>&nbsp;<span class="op" id="8471203">:=</span>&nbsp;<span class="ident" id="8471206">PutUvarint</span><span class="op" id="8471216">(</span><span class="ident" id="8471217">buf</span><span class="op" id="8471220">,</span>&nbsp;<span class="num" id="8471222">1</span><span class="op" id="8471223">&lt;&lt;</span><span class="ident" id="8471225">w</span><span class="op" id="8471226">-</span><span class="num" id="8471227">1</span><span class="op" id="8471228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8471231">if</span>&nbsp;<span class="ident" id="8471234">n</span>&nbsp;<span class="op" id="8471236">!=</span>&nbsp;<span class="ident" id="8471239">max</span>&nbsp;<span class="op" id="8471243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471247">t</span><span class="op" id="8471248">.</span><span class="ident" id="8471249">Errorf</span><span class="op" id="8471255">(</span><span class="string" id="8471256">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8471286">,</span>&nbsp;<span class="ident" id="8471288">w</span><span class="op" id="8471289">,</span>&nbsp;<span class="ident" id="8471291">max</span><span class="op" id="8471294">,</span>&nbsp;<span class="ident" id="8471296">n</span><span class="op" id="8471297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471300">}</span><br>
<span class="lineno"></span><span class="op" id="8471302">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8471305">func</span>&nbsp;<span class="ident" id="8471310">TestConstants</span><span class="op" id="8471323">(</span><span class="ident" id="8471324">t</span>&nbsp;<span class="op" id="8471326">*</span><span class="ident" id="8471327">testing</span><span class="op" id="8471334">.</span><span class="ident" id="8471335">T</span><span class="op" id="8471336">)</span>&nbsp;<span class="op" id="8471338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471341">testConstant</span><span class="op" id="8471353">(</span><span class="ident" id="8471354">t</span><span class="op" id="8471355">,</span>&nbsp;<span class="num" id="8471357">16</span><span class="op" id="8471359">,</span>&nbsp;<span class="ident" id="8471361">MaxVarintLen16</span><span class="op" id="8471375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471378">testConstant</span><span class="op" id="8471390">(</span><span class="ident" id="8471391">t</span><span class="op" id="8471392">,</span>&nbsp;<span class="num" id="8471394">32</span><span class="op" id="8471396">,</span>&nbsp;<span class="ident" id="8471398">MaxVarintLen32</span><span class="op" id="8471412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471415">testConstant</span><span class="op" id="8471427">(</span><span class="ident" id="8471428">t</span><span class="op" id="8471429">,</span>&nbsp;<span class="num" id="8471431">64</span><span class="op" id="8471433">,</span>&nbsp;<span class="ident" id="8471435">MaxVarintLen64</span><span class="op" id="8471449">)</span><br>
<span class="lineno">25</span><span class="op" id="8471451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8471454">func</span>&nbsp;<span class="ident" id="8471459">testVarint</span><span class="op" id="8471469">(</span><span class="ident" id="8471470">t</span>&nbsp;<span class="op" id="8471472">*</span><span class="ident" id="8471473">testing</span><span class="op" id="8471480">.</span><span class="ident" id="8471481">T</span><span class="op" id="8471482">,</span>&nbsp;<span class="ident" id="8471484">x</span>&nbsp;<span class="ident" id="8471486">int64</span><span class="op" id="8471491">)</span>&nbsp;<span class="op" id="8471493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471496">buf</span>&nbsp;<span class="op" id="8471500">:=</span>&nbsp;<span class="builtinfunc" id="8471503">make</span><span class="op" id="8471507">(</span><span class="op" id="8471508">[</span><span class="op" id="8471509">]</span><span class="builtintype" id="8471510">byte</span><span class="op" id="8471514">,</span>&nbsp;<span class="ident" id="8471516">MaxVarintLen64</span><span class="op" id="8471530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471533">n</span>&nbsp;<span class="op" id="8471535">:=</span>&nbsp;<span class="ident" id="8471538">PutVarint</span><span class="op" id="8471547">(</span><span class="ident" id="8471548">buf</span><span class="op" id="8471551">,</span>&nbsp;<span class="ident" id="8471553">x</span><span class="op" id="8471554">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471557">y</span><span class="op" id="8471558">,</span>&nbsp;<span class="ident" id="8471560">m</span>&nbsp;<span class="op" id="8471562">:=</span>&nbsp;<span class="ident" id="8471565">Varint</span><span class="op" id="8471571">(</span><span class="ident" id="8471572">buf</span><span class="op" id="8471575">[</span><span class="num" id="8471576">0</span><span class="op" id="8471577">:</span><span class="ident" id="8471578">n</span><span class="op" id="8471579">]</span><span class="op" id="8471580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8471583">if</span>&nbsp;<span class="ident" id="8471586">x</span>&nbsp;<span class="op" id="8471588">!=</span>&nbsp;<span class="ident" id="8471591">y</span>&nbsp;<span class="op" id="8471593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471597">t</span><span class="op" id="8471598">.</span><span class="ident" id="8471599">Errorf</span><span class="op" id="8471605">(</span><span class="string" id="8471606">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8471626">,</span>&nbsp;<span class="ident" id="8471628">x</span><span class="op" id="8471629">,</span>&nbsp;<span class="ident" id="8471631">y</span><span class="op" id="8471632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8471638">if</span>&nbsp;<span class="ident" id="8471641">n</span>&nbsp;<span class="op" id="8471643">!=</span>&nbsp;<span class="ident" id="8471646">m</span>&nbsp;<span class="op" id="8471648">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471652">t</span><span class="op" id="8471653">.</span><span class="ident" id="8471654">Errorf</span><span class="op" id="8471660">(</span><span class="string" id="8471661">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8471694">,</span>&nbsp;<span class="ident" id="8471696">x</span><span class="op" id="8471697">,</span>&nbsp;<span class="ident" id="8471699">m</span><span class="op" id="8471700">,</span>&nbsp;<span class="ident" id="8471702">n</span><span class="op" id="8471703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471710">y</span><span class="op" id="8471711">,</span>&nbsp;<span class="ident" id="8471713">err</span>&nbsp;<span class="op" id="8471717">:=</span>&nbsp;<span class="ident" id="8471720">ReadVarint</span><span class="op" id="8471730">(</span><span class="ident" id="8471731">bytes</span><span class="op" id="8471736">.</span><span class="ident" id="8471737">NewReader</span><span class="op" id="8471746">(</span><span class="ident" id="8471747">buf</span><span class="op" id="8471750">)</span><span class="op" id="8471751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8471754">if</span>&nbsp;<span class="ident" id="8471757">err</span>&nbsp;<span class="op" id="8471761">!=</span>&nbsp;<span class="ident" id="8471764">nil</span>&nbsp;<span class="op" id="8471768">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471772">t</span><span class="op" id="8471773">.</span><span class="ident" id="8471774">Errorf</span><span class="op" id="8471780">(</span><span class="string" id="8471781">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="8471801">,</span>&nbsp;<span class="ident" id="8471803">x</span><span class="op" id="8471804">,</span>&nbsp;<span class="ident" id="8471806">err</span><span class="op" id="8471809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8471815">if</span>&nbsp;<span class="ident" id="8471818">x</span>&nbsp;<span class="op" id="8471820">!=</span>&nbsp;<span class="ident" id="8471823">y</span>&nbsp;<span class="op" id="8471825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471829">t</span><span class="op" id="8471830">.</span><span class="ident" id="8471831">Errorf</span><span class="op" id="8471837">(</span><span class="string" id="8471838">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8471862">,</span>&nbsp;<span class="ident" id="8471864">x</span><span class="op" id="8471865">,</span>&nbsp;<span class="ident" id="8471867">y</span><span class="op" id="8471868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8471871">}</span><br>
<span class="lineno">45</span><span class="op" id="8471873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8471876">func</span>&nbsp;<span class="ident" id="8471881">testUvarint</span><span class="op" id="8471892">(</span><span class="ident" id="8471893">t</span>&nbsp;<span class="op" id="8471895">*</span><span class="ident" id="8471896">testing</span><span class="op" id="8471903">.</span><span class="ident" id="8471904">T</span><span class="op" id="8471905">,</span>&nbsp;<span class="ident" id="8471907">x</span>&nbsp;<span class="ident" id="8471909">uint64</span><span class="op" id="8471915">)</span>&nbsp;<span class="op" id="8471917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471920">buf</span>&nbsp;<span class="op" id="8471924">:=</span>&nbsp;<span class="builtinfunc" id="8471927">make</span><span class="op" id="8471931">(</span><span class="op" id="8471932">[</span><span class="op" id="8471933">]</span><span class="builtintype" id="8471934">byte</span><span class="op" id="8471938">,</span>&nbsp;<span class="ident" id="8471940">MaxVarintLen64</span><span class="op" id="8471954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471957">n</span>&nbsp;<span class="op" id="8471959">:=</span>&nbsp;<span class="ident" id="8471962">PutUvarint</span><span class="op" id="8471972">(</span><span class="ident" id="8471973">buf</span><span class="op" id="8471976">,</span>&nbsp;<span class="ident" id="8471978">x</span><span class="op" id="8471979">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8471982">y</span><span class="op" id="8471983">,</span>&nbsp;<span class="ident" id="8471985">m</span>&nbsp;<span class="op" id="8471987">:=</span>&nbsp;<span class="ident" id="8471990">Uvarint</span><span class="op" id="8471997">(</span><span class="ident" id="8471998">buf</span><span class="op" id="8472001">[</span><span class="num" id="8472002">0</span><span class="op" id="8472003">:</span><span class="ident" id="8472004">n</span><span class="op" id="8472005">]</span><span class="op" id="8472006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472009">if</span>&nbsp;<span class="ident" id="8472012">x</span>&nbsp;<span class="op" id="8472014">!=</span>&nbsp;<span class="ident" id="8472017">y</span>&nbsp;<span class="op" id="8472019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472023">t</span><span class="op" id="8472024">.</span><span class="ident" id="8472025">Errorf</span><span class="op" id="8472031">(</span><span class="string" id="8472032">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8472053">,</span>&nbsp;<span class="ident" id="8472055">x</span><span class="op" id="8472056">,</span>&nbsp;<span class="ident" id="8472058">y</span><span class="op" id="8472059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472065">if</span>&nbsp;<span class="ident" id="8472068">n</span>&nbsp;<span class="op" id="8472070">!=</span>&nbsp;<span class="ident" id="8472073">m</span>&nbsp;<span class="op" id="8472075">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472079">t</span><span class="op" id="8472080">.</span><span class="ident" id="8472081">Errorf</span><span class="op" id="8472087">(</span><span class="string" id="8472088">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8472122">,</span>&nbsp;<span class="ident" id="8472124">x</span><span class="op" id="8472125">,</span>&nbsp;<span class="ident" id="8472127">m</span><span class="op" id="8472128">,</span>&nbsp;<span class="ident" id="8472130">n</span><span class="op" id="8472131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472138">y</span><span class="op" id="8472139">,</span>&nbsp;<span class="ident" id="8472141">err</span>&nbsp;<span class="op" id="8472145">:=</span>&nbsp;<span class="ident" id="8472148">ReadUvarint</span><span class="op" id="8472159">(</span><span class="ident" id="8472160">bytes</span><span class="op" id="8472165">.</span><span class="ident" id="8472166">NewReader</span><span class="op" id="8472175">(</span><span class="ident" id="8472176">buf</span><span class="op" id="8472179">)</span><span class="op" id="8472180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472183">if</span>&nbsp;<span class="ident" id="8472186">err</span>&nbsp;<span class="op" id="8472190">!=</span>&nbsp;<span class="ident" id="8472193">nil</span>&nbsp;<span class="op" id="8472197">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472201">t</span><span class="op" id="8472202">.</span><span class="ident" id="8472203">Errorf</span><span class="op" id="8472209">(</span><span class="string" id="8472210">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="8472231">,</span>&nbsp;<span class="ident" id="8472233">x</span><span class="op" id="8472234">,</span>&nbsp;<span class="ident" id="8472236">err</span><span class="op" id="8472239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472245">if</span>&nbsp;<span class="ident" id="8472248">x</span>&nbsp;<span class="op" id="8472250">!=</span>&nbsp;<span class="ident" id="8472253">y</span>&nbsp;<span class="op" id="8472255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472259">t</span><span class="op" id="8472260">.</span><span class="ident" id="8472261">Errorf</span><span class="op" id="8472267">(</span><span class="string" id="8472268">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8472293">,</span>&nbsp;<span class="ident" id="8472295">x</span><span class="op" id="8472296">,</span>&nbsp;<span class="ident" id="8472298">y</span><span class="op" id="8472299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472302">}</span><br>
<span class="lineno">65</span><span class="op" id="8472304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8472307">var</span>&nbsp;<span class="ident" id="8472311">tests</span>&nbsp;<span class="op" id="8472317">=</span>&nbsp;<span class="op" id="8472319">[</span><span class="op" id="8472320">]</span><span class="ident" id="8472321">int64</span><span class="op" id="8472326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472329">-</span><span class="num" id="8472330">1</span>&nbsp;<span class="op" id="8472332">&lt;&lt;</span>&nbsp;<span class="num" id="8472335">63</span><span class="op" id="8472337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472340">-</span><span class="num" id="8472341">1</span><span class="op" id="8472342">&lt;&lt;</span><span class="num" id="8472344">63</span>&nbsp;<span class="op" id="8472347">+</span>&nbsp;<span class="num" id="8472349">1</span><span class="op" id="8472350">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472353">-</span><span class="num" id="8472354">1</span><span class="op" id="8472355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472358">0</span><span class="op" id="8472359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472362">1</span><span class="op" id="8472363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472366">2</span><span class="op" id="8472367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472370">10</span><span class="op" id="8472372">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472375">20</span><span class="op" id="8472377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472380">63</span><span class="op" id="8472382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472385">64</span><span class="op" id="8472387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472390">65</span><span class="op" id="8472392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472395">127</span><span class="op" id="8472398">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472401">128</span><span class="op" id="8472404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472407">129</span><span class="op" id="8472410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472413">255</span><span class="op" id="8472416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472419">256</span><span class="op" id="8472422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472425">257</span><span class="op" id="8472428">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8472431">1</span><span class="op" id="8472432">&lt;&lt;</span><span class="num" id="8472434">63</span>&nbsp;<span class="op" id="8472437">-</span>&nbsp;<span class="num" id="8472439">1</span><span class="op" id="8472440">,</span><br>
<span class="lineno"></span><span class="op" id="8472442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8472445">func</span>&nbsp;<span class="ident" id="8472450">TestVarint</span><span class="op" id="8472460">(</span><span class="ident" id="8472461">t</span>&nbsp;<span class="op" id="8472463">*</span><span class="ident" id="8472464">testing</span><span class="op" id="8472471">.</span><span class="ident" id="8472472">T</span><span class="op" id="8472473">)</span>&nbsp;<span class="op" id="8472475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472478">for</span>&nbsp;<span class="ident" id="8472482">_</span><span class="op" id="8472483">,</span>&nbsp;<span class="ident" id="8472485">x</span>&nbsp;<span class="op" id="8472487">:=</span>&nbsp;<span class="keyword" id="8472490">range</span>&nbsp;<span class="ident" id="8472496">tests</span>&nbsp;<span class="op" id="8472502">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472506">testVarint</span><span class="op" id="8472516">(</span><span class="ident" id="8472517">t</span><span class="op" id="8472518">,</span>&nbsp;<span class="ident" id="8472520">x</span><span class="op" id="8472521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472525">testVarint</span><span class="op" id="8472535">(</span><span class="ident" id="8472536">t</span><span class="op" id="8472537">,</span>&nbsp;<span class="op" id="8472539">-</span><span class="ident" id="8472540">x</span><span class="op" id="8472541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472547">for</span>&nbsp;<span class="ident" id="8472551">x</span>&nbsp;<span class="op" id="8472553">:=</span>&nbsp;<span class="ident" id="8472556">int64</span><span class="op" id="8472561">(</span><span class="num" id="8472562">0x7</span><span class="op" id="8472565">)</span><span class="op" id="8472566">;</span>&nbsp;<span class="ident" id="8472568">x</span>&nbsp;<span class="op" id="8472570">!=</span>&nbsp;<span class="num" id="8472573">0</span><span class="op" id="8472574">;</span>&nbsp;<span class="ident" id="8472576">x</span>&nbsp;<span class="op" id="8472578">&lt;&lt;=</span>&nbsp;<span class="num" id="8472582">1</span>&nbsp;<span class="op" id="8472584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472588">testVarint</span><span class="op" id="8472598">(</span><span class="ident" id="8472599">t</span><span class="op" id="8472600">,</span>&nbsp;<span class="ident" id="8472602">x</span><span class="op" id="8472603">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472607">testVarint</span><span class="op" id="8472617">(</span><span class="ident" id="8472618">t</span><span class="op" id="8472619">,</span>&nbsp;<span class="op" id="8472621">-</span><span class="ident" id="8472622">x</span><span class="op" id="8472623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472626">}</span><br>
<span class="lineno"></span><span class="op" id="8472628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8472631">func</span>&nbsp;<span class="ident" id="8472636">TestUvarint</span><span class="op" id="8472647">(</span><span class="ident" id="8472648">t</span>&nbsp;<span class="op" id="8472650">*</span><span class="ident" id="8472651">testing</span><span class="op" id="8472658">.</span><span class="ident" id="8472659">T</span><span class="op" id="8472660">)</span>&nbsp;<span class="op" id="8472662">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472665">for</span>&nbsp;<span class="ident" id="8472669">_</span><span class="op" id="8472670">,</span>&nbsp;<span class="ident" id="8472672">x</span>&nbsp;<span class="op" id="8472674">:=</span>&nbsp;<span class="keyword" id="8472677">range</span>&nbsp;<span class="ident" id="8472683">tests</span>&nbsp;<span class="op" id="8472689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472693">testUvarint</span><span class="op" id="8472704">(</span><span class="ident" id="8472705">t</span><span class="op" id="8472706">,</span>&nbsp;<span class="ident" id="8472708">uint64</span><span class="op" id="8472714">(</span><span class="ident" id="8472715">x</span><span class="op" id="8472716">)</span><span class="op" id="8472717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472723">for</span>&nbsp;<span class="ident" id="8472727">x</span>&nbsp;<span class="op" id="8472729">:=</span>&nbsp;<span class="ident" id="8472732">uint64</span><span class="op" id="8472738">(</span><span class="num" id="8472739">0x7</span><span class="op" id="8472742">)</span><span class="op" id="8472743">;</span>&nbsp;<span class="ident" id="8472745">x</span>&nbsp;<span class="op" id="8472747">!=</span>&nbsp;<span class="num" id="8472750">0</span><span class="op" id="8472751">;</span>&nbsp;<span class="ident" id="8472753">x</span>&nbsp;<span class="op" id="8472755">&lt;&lt;=</span>&nbsp;<span class="num" id="8472759">1</span>&nbsp;<span class="op" id="8472761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472765">testUvarint</span><span class="op" id="8472776">(</span><span class="ident" id="8472777">t</span><span class="op" id="8472778">,</span>&nbsp;<span class="ident" id="8472780">x</span><span class="op" id="8472781">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8472784">}</span><br>
<span class="lineno"></span><span class="op" id="8472786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8472789">func</span>&nbsp;<span class="ident" id="8472794">TestBufferTooSmall</span><span class="op" id="8472812">(</span><span class="ident" id="8472813">t</span>&nbsp;<span class="op" id="8472815">*</span><span class="ident" id="8472816">testing</span><span class="op" id="8472823">.</span><span class="ident" id="8472824">T</span><span class="op" id="8472825">)</span>&nbsp;<span class="op" id="8472827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472830">buf</span>&nbsp;<span class="op" id="8472834">:=</span>&nbsp;<span class="op" id="8472837">[</span><span class="op" id="8472838">]</span><span class="builtintype" id="8472839">byte</span><span class="op" id="8472843">{</span><span class="num" id="8472844">0x80</span><span class="op" id="8472848">,</span>&nbsp;<span class="num" id="8472850">0x80</span><span class="op" id="8472854">,</span>&nbsp;<span class="num" id="8472856">0x80</span><span class="op" id="8472860">,</span>&nbsp;<span class="num" id="8472862">0x80</span><span class="op" id="8472866">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472869">for</span>&nbsp;<span class="ident" id="8472873">i</span>&nbsp;<span class="op" id="8472875">:=</span>&nbsp;<span class="num" id="8472878">0</span><span class="op" id="8472879">;</span>&nbsp;<span class="ident" id="8472881">i</span>&nbsp;<span class="op" id="8472883">&lt;=</span>&nbsp;<span class="builtinfunc" id="8472886">len</span><span class="op" id="8472889">(</span><span class="ident" id="8472890">buf</span><span class="op" id="8472893">)</span><span class="op" id="8472894">;</span>&nbsp;<span class="ident" id="8472896">i</span><span class="op" id="8472897">++</span>&nbsp;<span class="op" id="8472900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472904">buf</span>&nbsp;<span class="op" id="8472908">:=</span>&nbsp;<span class="ident" id="8472911">buf</span><span class="op" id="8472914">[</span><span class="num" id="8472915">0</span><span class="op" id="8472916">:</span><span class="ident" id="8472917">i</span><span class="op" id="8472918">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472922">x</span><span class="op" id="8472923">,</span>&nbsp;<span class="ident" id="8472925">n</span>&nbsp;<span class="op" id="8472927">:=</span>&nbsp;<span class="ident" id="8472930">Uvarint</span><span class="op" id="8472937">(</span><span class="ident" id="8472938">buf</span><span class="op" id="8472941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8472945">if</span>&nbsp;<span class="ident" id="8472948">x</span>&nbsp;<span class="op" id="8472950">!=</span>&nbsp;<span class="num" id="8472953">0</span>&nbsp;<span class="op" id="8472955">||</span>&nbsp;<span class="ident" id="8472958">n</span>&nbsp;<span class="op" id="8472960">!=</span>&nbsp;<span class="num" id="8472963">0</span>&nbsp;<span class="op" id="8472965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8472970">t</span><span class="op" id="8472971">.</span><span class="ident" id="8472972">Errorf</span><span class="op" id="8472978">(</span><span class="string" id="8472979">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="8473012">,</span>&nbsp;<span class="ident" id="8473014">buf</span><span class="op" id="8473017">,</span>&nbsp;<span class="ident" id="8473019">x</span><span class="op" id="8473020">,</span>&nbsp;<span class="ident" id="8473022">n</span><span class="op" id="8473023">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473032">x</span><span class="op" id="8473033">,</span>&nbsp;<span class="ident" id="8473035">err</span>&nbsp;<span class="op" id="8473039">:=</span>&nbsp;<span class="ident" id="8473042">ReadUvarint</span><span class="op" id="8473053">(</span><span class="ident" id="8473054">bytes</span><span class="op" id="8473059">.</span><span class="ident" id="8473060">NewReader</span><span class="op" id="8473069">(</span><span class="ident" id="8473070">buf</span><span class="op" id="8473073">)</span><span class="op" id="8473074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473078">if</span>&nbsp;<span class="ident" id="8473081">x</span>&nbsp;<span class="op" id="8473083">!=</span>&nbsp;<span class="num" id="8473086">0</span>&nbsp;<span class="op" id="8473088">||</span>&nbsp;<span class="ident" id="8473091">err</span>&nbsp;<span class="op" id="8473095">!=</span>&nbsp;<span class="ident" id="8473098">io</span><span class="op" id="8473100">.</span><span class="ident" id="8473101">EOF</span>&nbsp;<span class="op" id="8473105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473110">t</span><span class="op" id="8473111">.</span><span class="ident" id="8473112">Errorf</span><span class="op" id="8473118">(</span><span class="string" id="8473119">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="8473158">,</span>&nbsp;<span class="ident" id="8473160">buf</span><span class="op" id="8473163">,</span>&nbsp;<span class="ident" id="8473165">x</span><span class="op" id="8473166">,</span>&nbsp;<span class="ident" id="8473168">err</span><span class="op" id="8473171">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473178">}</span><br>
<span class="lineno"></span><span class="op" id="8473180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8473183">func</span>&nbsp;<span class="ident" id="8473188">testOverflow</span><span class="op" id="8473200">(</span><span class="ident" id="8473201">t</span>&nbsp;<span class="op" id="8473203">*</span><span class="ident" id="8473204">testing</span><span class="op" id="8473211">.</span><span class="ident" id="8473212">T</span><span class="op" id="8473213">,</span>&nbsp;<span class="ident" id="8473215">buf</span>&nbsp;<span class="op" id="8473219">[</span><span class="op" id="8473220">]</span><span class="builtintype" id="8473221">byte</span><span class="op" id="8473225">,</span>&nbsp;<span class="ident" id="8473227">n0</span>&nbsp;<span class="builtintype" id="8473230">int</span><span class="op" id="8473233">,</span>&nbsp;<span class="ident" id="8473235">err0</span>&nbsp;<span class="builtintype" id="8473240">error</span><span class="op" id="8473245">)</span>&nbsp;<span class="op" id="8473247">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473250">x</span><span class="op" id="8473251">,</span>&nbsp;<span class="ident" id="8473253">n</span>&nbsp;<span class="op" id="8473255">:=</span>&nbsp;<span class="ident" id="8473258">Uvarint</span><span class="op" id="8473265">(</span><span class="ident" id="8473266">buf</span><span class="op" id="8473269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473272">if</span>&nbsp;<span class="ident" id="8473275">x</span>&nbsp;<span class="op" id="8473277">!=</span>&nbsp;<span class="num" id="8473280">0</span>&nbsp;<span class="op" id="8473282">||</span>&nbsp;<span class="ident" id="8473285">n</span>&nbsp;<span class="op" id="8473287">!=</span>&nbsp;<span class="ident" id="8473290">n0</span>&nbsp;<span class="op" id="8473293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473297">t</span><span class="op" id="8473298">.</span><span class="ident" id="8473299">Errorf</span><span class="op" id="8473305">(</span><span class="string" id="8473306">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="8473351">,</span>&nbsp;<span class="ident" id="8473353">buf</span><span class="op" id="8473356">,</span>&nbsp;<span class="ident" id="8473358">x</span><span class="op" id="8473359">,</span>&nbsp;<span class="ident" id="8473361">n</span><span class="op" id="8473362">,</span>&nbsp;<span class="ident" id="8473364">n0</span><span class="op" id="8473366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473373">x</span><span class="op" id="8473374">,</span>&nbsp;<span class="ident" id="8473376">err</span>&nbsp;<span class="op" id="8473380">:=</span>&nbsp;<span class="ident" id="8473383">ReadUvarint</span><span class="op" id="8473394">(</span><span class="ident" id="8473395">bytes</span><span class="op" id="8473400">.</span><span class="ident" id="8473401">NewReader</span><span class="op" id="8473410">(</span><span class="ident" id="8473411">buf</span><span class="op" id="8473414">)</span><span class="op" id="8473415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473418">if</span>&nbsp;<span class="ident" id="8473421">x</span>&nbsp;<span class="op" id="8473423">!=</span>&nbsp;<span class="num" id="8473426">0</span>&nbsp;<span class="op" id="8473428">||</span>&nbsp;<span class="ident" id="8473431">err</span>&nbsp;<span class="op" id="8473435">!=</span>&nbsp;<span class="ident" id="8473438">err0</span>&nbsp;<span class="op" id="8473443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473447">t</span><span class="op" id="8473448">.</span><span class="ident" id="8473449">Errorf</span><span class="op" id="8473455">(</span><span class="string" id="8473456">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="8473507">,</span>&nbsp;<span class="ident" id="8473509">buf</span><span class="op" id="8473512">,</span>&nbsp;<span class="ident" id="8473514">x</span><span class="op" id="8473515">,</span>&nbsp;<span class="ident" id="8473517">err</span><span class="op" id="8473520">,</span>&nbsp;<span class="ident" id="8473522">err0</span><span class="op" id="8473526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473529">}</span><br>
<span class="lineno"></span><span class="op" id="8473531">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="8473534">func</span>&nbsp;<span class="ident" id="8473539">TestOverflow</span><span class="op" id="8473551">(</span><span class="ident" id="8473552">t</span>&nbsp;<span class="op" id="8473554">*</span><span class="ident" id="8473555">testing</span><span class="op" id="8473562">.</span><span class="ident" id="8473563">T</span><span class="op" id="8473564">)</span>&nbsp;<span class="op" id="8473566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473569">testOverflow</span><span class="op" id="8473581">(</span><span class="ident" id="8473582">t</span><span class="op" id="8473583">,</span>&nbsp;<span class="op" id="8473585">[</span><span class="op" id="8473586">]</span><span class="builtintype" id="8473587">byte</span><span class="op" id="8473591">{</span><span class="num" id="8473592">0x80</span><span class="op" id="8473596">,</span>&nbsp;<span class="num" id="8473598">0x80</span><span class="op" id="8473602">,</span>&nbsp;<span class="num" id="8473604">0x80</span><span class="op" id="8473608">,</span>&nbsp;<span class="num" id="8473610">0x80</span><span class="op" id="8473614">,</span>&nbsp;<span class="num" id="8473616">0x80</span><span class="op" id="8473620">,</span>&nbsp;<span class="num" id="8473622">0x80</span><span class="op" id="8473626">,</span>&nbsp;<span class="num" id="8473628">0x80</span><span class="op" id="8473632">,</span>&nbsp;<span class="num" id="8473634">0x80</span><span class="op" id="8473638">,</span>&nbsp;<span class="num" id="8473640">0x80</span><span class="op" id="8473644">,</span>&nbsp;<span class="num" id="8473646">0x2</span><span class="op" id="8473649">}</span><span class="op" id="8473650">,</span>&nbsp;<span class="op" id="8473652">-</span><span class="num" id="8473653">10</span><span class="op" id="8473655">,</span>&nbsp;<span class="ident" id="8473657">overflow</span><span class="op" id="8473665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473668">testOverflow</span><span class="op" id="8473680">(</span><span class="ident" id="8473681">t</span><span class="op" id="8473682">,</span>&nbsp;<span class="op" id="8473684">[</span><span class="op" id="8473685">]</span><span class="builtintype" id="8473686">byte</span><span class="op" id="8473690">{</span><span class="num" id="8473691">0x80</span><span class="op" id="8473695">,</span>&nbsp;<span class="num" id="8473697">0x80</span><span class="op" id="8473701">,</span>&nbsp;<span class="num" id="8473703">0x80</span><span class="op" id="8473707">,</span>&nbsp;<span class="num" id="8473709">0x80</span><span class="op" id="8473713">,</span>&nbsp;<span class="num" id="8473715">0x80</span><span class="op" id="8473719">,</span>&nbsp;<span class="num" id="8473721">0x80</span><span class="op" id="8473725">,</span>&nbsp;<span class="num" id="8473727">0x80</span><span class="op" id="8473731">,</span>&nbsp;<span class="num" id="8473733">0x80</span><span class="op" id="8473737">,</span>&nbsp;<span class="num" id="8473739">0x80</span><span class="op" id="8473743">,</span>&nbsp;<span class="num" id="8473745">0x80</span><span class="op" id="8473749">,</span>&nbsp;<span class="num" id="8473751">0x80</span><span class="op" id="8473755">,</span>&nbsp;<span class="num" id="8473757">0x80</span><span class="op" id="8473761">,</span>&nbsp;<span class="num" id="8473763">0x1</span><span class="op" id="8473766">,</span>&nbsp;<span class="num" id="8473768">0</span><span class="op" id="8473769">,</span>&nbsp;<span class="num" id="8473771">0</span><span class="op" id="8473772">}</span><span class="op" id="8473773">,</span>&nbsp;<span class="op" id="8473775">-</span><span class="num" id="8473776">13</span><span class="op" id="8473778">,</span>&nbsp;<span class="ident" id="8473780">overflow</span><span class="op" id="8473788">)</span><br>
<span class="lineno"></span><span class="op" id="8473790">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8473793">func</span>&nbsp;<span class="ident" id="8473798">TestNonCanonicalZero</span><span class="op" id="8473818">(</span><span class="ident" id="8473819">t</span>&nbsp;<span class="op" id="8473821">*</span><span class="ident" id="8473822">testing</span><span class="op" id="8473829">.</span><span class="ident" id="8473830">T</span><span class="op" id="8473831">)</span>&nbsp;<span class="op" id="8473833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473836">buf</span>&nbsp;<span class="op" id="8473840">:=</span>&nbsp;<span class="op" id="8473843">[</span><span class="op" id="8473844">]</span><span class="builtintype" id="8473845">byte</span><span class="op" id="8473849">{</span><span class="num" id="8473850">0x80</span><span class="op" id="8473854">,</span>&nbsp;<span class="num" id="8473856">0x80</span><span class="op" id="8473860">,</span>&nbsp;<span class="num" id="8473862">0x80</span><span class="op" id="8473866">,</span>&nbsp;<span class="num" id="8473868">0</span><span class="op" id="8473869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473872">x</span><span class="op" id="8473873">,</span>&nbsp;<span class="ident" id="8473875">n</span>&nbsp;<span class="op" id="8473877">:=</span>&nbsp;<span class="ident" id="8473880">Uvarint</span><span class="op" id="8473887">(</span><span class="ident" id="8473888">buf</span><span class="op" id="8473891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8473894">if</span>&nbsp;<span class="ident" id="8473897">x</span>&nbsp;<span class="op" id="8473899">!=</span>&nbsp;<span class="num" id="8473902">0</span>&nbsp;<span class="op" id="8473904">||</span>&nbsp;<span class="ident" id="8473907">n</span>&nbsp;<span class="op" id="8473909">!=</span>&nbsp;<span class="num" id="8473912">4</span>&nbsp;<span class="op" id="8473914">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8473918">t</span><span class="op" id="8473919">.</span><span class="ident" id="8473920">Errorf</span><span class="op" id="8473926">(</span><span class="string" id="8473927">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="8473971">,</span>&nbsp;<span class="ident" id="8473973">buf</span><span class="op" id="8473976">,</span>&nbsp;<span class="ident" id="8473978">x</span><span class="op" id="8473979">,</span>&nbsp;<span class="ident" id="8473981">n</span><span class="op" id="8473982">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8473986">}</span><br>
<span class="lineno"></span><span class="op" id="8473988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="8473991">func</span>&nbsp;<span class="ident" id="8473996">BenchmarkPutUvarint32</span><span class="op" id="8474017">(</span><span class="ident" id="8474018">b</span>&nbsp;<span class="op" id="8474020">*</span><span class="ident" id="8474021">testing</span><span class="op" id="8474028">.</span><span class="ident" id="8474029">B</span><span class="op" id="8474030">)</span>&nbsp;<span class="op" id="8474032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474035">buf</span>&nbsp;<span class="op" id="8474039">:=</span>&nbsp;<span class="builtinfunc" id="8474042">make</span><span class="op" id="8474046">(</span><span class="op" id="8474047">[</span><span class="op" id="8474048">]</span><span class="builtintype" id="8474049">byte</span><span class="op" id="8474053">,</span>&nbsp;<span class="ident" id="8474055">MaxVarintLen32</span><span class="op" id="8474069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474072">b</span><span class="op" id="8474073">.</span><span class="ident" id="8474074">SetBytes</span><span class="op" id="8474082">(</span><span class="num" id="8474083">4</span><span class="op" id="8474084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474087">for</span>&nbsp;<span class="ident" id="8474091">i</span>&nbsp;<span class="op" id="8474093">:=</span>&nbsp;<span class="num" id="8474096">0</span><span class="op" id="8474097">;</span>&nbsp;<span class="ident" id="8474099">i</span>&nbsp;<span class="op" id="8474101">&lt;</span>&nbsp;<span class="ident" id="8474103">b</span><span class="op" id="8474104">.</span><span class="ident" id="8474105">N</span><span class="op" id="8474106">;</span>&nbsp;<span class="ident" id="8474108">i</span><span class="op" id="8474109">++</span>&nbsp;<span class="op" id="8474112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474116">for</span>&nbsp;<span class="ident" id="8474120">j</span>&nbsp;<span class="op" id="8474122">:=</span>&nbsp;<span class="builtintype" id="8474125">uint</span><span class="op" id="8474129">(</span><span class="num" id="8474130">0</span><span class="op" id="8474131">)</span><span class="op" id="8474132">;</span>&nbsp;<span class="ident" id="8474134">j</span>&nbsp;<span class="op" id="8474136">&lt;</span>&nbsp;<span class="ident" id="8474138">MaxVarintLen32</span><span class="op" id="8474152">;</span>&nbsp;<span class="ident" id="8474154">j</span><span class="op" id="8474155">++</span>&nbsp;<span class="op" id="8474158">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474163">PutUvarint</span><span class="op" id="8474173">(</span><span class="ident" id="8474174">buf</span><span class="op" id="8474177">,</span>&nbsp;<span class="num" id="8474179">1</span><span class="op" id="8474180">&lt;&lt;</span><span class="op" id="8474182">(</span><span class="ident" id="8474183">j</span><span class="op" id="8474184">*</span><span class="num" id="8474185">7</span><span class="op" id="8474186">)</span><span class="op" id="8474187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474194">}</span><br>
<span class="lineno"></span><span class="op" id="8474196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8474199">func</span>&nbsp;<span class="ident" id="8474204">BenchmarkPutUvarint64</span><span class="op" id="8474225">(</span><span class="ident" id="8474226">b</span>&nbsp;<span class="op" id="8474228">*</span><span class="ident" id="8474229">testing</span><span class="op" id="8474236">.</span><span class="ident" id="8474237">B</span><span class="op" id="8474238">)</span>&nbsp;<span class="op" id="8474240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474243">buf</span>&nbsp;<span class="op" id="8474247">:=</span>&nbsp;<span class="builtinfunc" id="8474250">make</span><span class="op" id="8474254">(</span><span class="op" id="8474255">[</span><span class="op" id="8474256">]</span><span class="builtintype" id="8474257">byte</span><span class="op" id="8474261">,</span>&nbsp;<span class="ident" id="8474263">MaxVarintLen64</span><span class="op" id="8474277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474280">b</span><span class="op" id="8474281">.</span><span class="ident" id="8474282">SetBytes</span><span class="op" id="8474290">(</span><span class="num" id="8474291">8</span><span class="op" id="8474292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474295">for</span>&nbsp;<span class="ident" id="8474299">i</span>&nbsp;<span class="op" id="8474301">:=</span>&nbsp;<span class="num" id="8474304">0</span><span class="op" id="8474305">;</span>&nbsp;<span class="ident" id="8474307">i</span>&nbsp;<span class="op" id="8474309">&lt;</span>&nbsp;<span class="ident" id="8474311">b</span><span class="op" id="8474312">.</span><span class="ident" id="8474313">N</span><span class="op" id="8474314">;</span>&nbsp;<span class="ident" id="8474316">i</span><span class="op" id="8474317">++</span>&nbsp;<span class="op" id="8474320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8474324">for</span>&nbsp;<span class="ident" id="8474328">j</span>&nbsp;<span class="op" id="8474330">:=</span>&nbsp;<span class="builtintype" id="8474333">uint</span><span class="op" id="8474337">(</span><span class="num" id="8474338">0</span><span class="op" id="8474339">)</span><span class="op" id="8474340">;</span>&nbsp;<span class="ident" id="8474342">j</span>&nbsp;<span class="op" id="8474344">&lt;</span>&nbsp;<span class="ident" id="8474346">MaxVarintLen64</span><span class="op" id="8474360">;</span>&nbsp;<span class="ident" id="8474362">j</span><span class="op" id="8474363">++</span>&nbsp;<span class="op" id="8474366">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8474371">PutUvarint</span><span class="op" id="8474381">(</span><span class="ident" id="8474382">buf</span><span class="op" id="8474385">,</span>&nbsp;<span class="num" id="8474387">1</span><span class="op" id="8474388">&lt;&lt;</span><span class="op" id="8474390">(</span><span class="ident" id="8474391">j</span><span class="op" id="8474392">*</span><span class="num" id="8474393">7</span><span class="op" id="8474394">)</span><span class="op" id="8474395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8474402">}</span><br>
<span class="lineno"></span><span class="op" id="8474404">}</span>
</div>
</body>
</html>
