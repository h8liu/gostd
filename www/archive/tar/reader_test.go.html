<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7699803">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7699858">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7699912">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7699963">package</span>&nbsp;<span class="ident" id="7699971">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7699976">import</span>&nbsp;<span class="op" id="7699983">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7699986">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7699995">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700009">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700016">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700022">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700035">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700041">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700052">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700063">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700074">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7700081">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7700084">type</span>&nbsp;<span class="ident" id="7700089">untarTest</span>&nbsp;<span class="keyword" id="7700099">struct</span>&nbsp;<span class="op" id="7700106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700109">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7700117">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700125">headers</span>&nbsp;<span class="op" id="7700133">[</span><span class="op" id="7700134">]</span><span class="op" id="7700135">*</span><span class="ident" id="7700136">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700144">cksums</span>&nbsp;&nbsp;<span class="op" id="7700152">[</span><span class="op" id="7700153">]</span><span class="builtintype" id="7700154">string</span><br>
<span class="lineno"></span><span class="op" id="7700161">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7700164">var</span>&nbsp;<span class="ident" id="7700168">gnuTarTest</span>&nbsp;<span class="op" id="7700179">=</span>&nbsp;<span class="op" id="7700181">&amp;</span><span class="ident" id="7700182">untarTest</span><span class="op" id="7700191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700194">file</span><span class="op" id="7700198">:</span>&nbsp;<span class="string" id="7700200">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7700218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700221">headers</span><span class="op" id="7700228">:</span>&nbsp;<span class="op" id="7700230">[</span><span class="op" id="7700231">]</span><span class="op" id="7700232">*</span><span class="ident" id="7700233">Header</span><span class="op" id="7700239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700243">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700248">Name</span><span class="op" id="7700252">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700258">&#34;small.txt&#34;</span><span class="op" id="7700269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700274">Mode</span><span class="op" id="7700278">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700284">0640</span><span class="op" id="7700288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700293">Uid</span><span class="op" id="7700296">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700303">73025</span><span class="op" id="7700308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700313">Gid</span><span class="op" id="7700316">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700323">5000</span><span class="op" id="7700327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700332">Size</span><span class="op" id="7700336">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700342">5</span><span class="op" id="7700343">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700348">ModTime</span><span class="op" id="7700355">:</span>&nbsp;&nbsp;<span class="ident" id="7700358">time</span><span class="op" id="7700362">.</span><span class="ident" id="7700363">Unix</span><span class="op" id="7700367">(</span><span class="num" id="7700368">1244428340</span><span class="op" id="7700378">,</span>&nbsp;<span class="num" id="7700380">0</span><span class="op" id="7700381">)</span><span class="op" id="7700382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700387">Typeflag</span><span class="op" id="7700395">:</span>&nbsp;<span class="string" id="7700397">&#39;0&#39;</span><span class="op" id="7700400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700405">Uname</span><span class="op" id="7700410">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700415">&#34;dsymonds&#34;</span><span class="op" id="7700425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700430">Gname</span><span class="op" id="7700435">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700440">&#34;eng&#34;</span><span class="op" id="7700445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700449">}</span><span class="op" id="7700450">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700459">Name</span><span class="op" id="7700463">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700469">&#34;small2.txt&#34;</span><span class="op" id="7700481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700486">Mode</span><span class="op" id="7700490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700496">0640</span><span class="op" id="7700500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700505">Uid</span><span class="op" id="7700508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700515">73025</span><span class="op" id="7700520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700525">Gid</span><span class="op" id="7700528">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700535">5000</span><span class="op" id="7700539">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700544">Size</span><span class="op" id="7700548">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700554">11</span><span class="op" id="7700556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700561">ModTime</span><span class="op" id="7700568">:</span>&nbsp;&nbsp;<span class="ident" id="7700571">time</span><span class="op" id="7700575">.</span><span class="ident" id="7700576">Unix</span><span class="op" id="7700580">(</span><span class="num" id="7700581">1244436044</span><span class="op" id="7700591">,</span>&nbsp;<span class="num" id="7700593">0</span><span class="op" id="7700594">)</span><span class="op" id="7700595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700600">Typeflag</span><span class="op" id="7700608">:</span>&nbsp;<span class="string" id="7700610">&#39;0&#39;</span><span class="op" id="7700613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700618">Uname</span><span class="op" id="7700623">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700628">&#34;dsymonds&#34;</span><span class="op" id="7700638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700643">Gname</span><span class="op" id="7700648">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700653">&#34;eng&#34;</span><span class="op" id="7700658">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700662">}</span><span class="op" id="7700663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700666">}</span><span class="op" id="7700667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700670">cksums</span><span class="op" id="7700676">:</span>&nbsp;<span class="op" id="7700678">[</span><span class="op" id="7700679">]</span><span class="builtintype" id="7700680">string</span><span class="op" id="7700686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700690">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="7700724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700728">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="7700762">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700765">}</span><span class="op" id="7700766">,</span><br>
<span class="lineno"></span><span class="op" id="7700768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7700771">var</span>&nbsp;<span class="ident" id="7700775">sparseTarTest</span>&nbsp;<span class="op" id="7700789">=</span>&nbsp;<span class="op" id="7700791">&amp;</span><span class="ident" id="7700792">untarTest</span><span class="op" id="7700801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700804">file</span><span class="op" id="7700808">:</span>&nbsp;<span class="string" id="7700810">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="7700839">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700842">headers</span><span class="op" id="7700849">:</span>&nbsp;<span class="op" id="7700851">[</span><span class="op" id="7700852">]</span><span class="op" id="7700853">*</span><span class="ident" id="7700854">Header</span><span class="op" id="7700860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700869">Name</span><span class="op" id="7700873">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700879">&#34;sparse-gnu&#34;</span><span class="op" id="7700891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700896">Mode</span><span class="op" id="7700900">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700906">420</span><span class="op" id="7700909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700914">Uid</span><span class="op" id="7700917">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700924">1000</span><span class="op" id="7700928">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700933">Gid</span><span class="op" id="7700936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700943">1000</span><span class="op" id="7700947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700952">Size</span><span class="op" id="7700956">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700962">200</span><span class="op" id="7700965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700970">ModTime</span><span class="op" id="7700977">:</span>&nbsp;&nbsp;<span class="ident" id="7700980">time</span><span class="op" id="7700984">.</span><span class="ident" id="7700985">Unix</span><span class="op" id="7700989">(</span><span class="num" id="7700990">1392395740</span><span class="op" id="7701000">,</span>&nbsp;<span class="num" id="7701002">0</span><span class="op" id="7701003">)</span><span class="op" id="7701004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701009">Typeflag</span><span class="op" id="7701017">:</span>&nbsp;<span class="num" id="7701019">0x53</span><span class="op" id="7701023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701028">Linkname</span><span class="op" id="7701036">:</span>&nbsp;<span class="string" id="7701038">&#34;&#34;</span><span class="op" id="7701040">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701045">Uname</span><span class="op" id="7701050">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701055">&#34;david&#34;</span><span class="op" id="7701062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701067">Gname</span><span class="op" id="7701072">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701077">&#34;david&#34;</span><span class="op" id="7701084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701089">Devmajor</span><span class="op" id="7701097">:</span>&nbsp;<span class="num" id="7701099">0</span><span class="op" id="7701100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701105">Devminor</span><span class="op" id="7701113">:</span>&nbsp;<span class="num" id="7701115">0</span><span class="op" id="7701116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701120">}</span><span class="op" id="7701121">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701130">Name</span><span class="op" id="7701134">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701140">&#34;sparse-posix-0.0&#34;</span><span class="op" id="7701158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701163">Mode</span><span class="op" id="7701167">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701173">420</span><span class="op" id="7701176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701181">Uid</span><span class="op" id="7701184">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701191">1000</span><span class="op" id="7701195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701200">Gid</span><span class="op" id="7701203">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701210">1000</span><span class="op" id="7701214">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701219">Size</span><span class="op" id="7701223">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701229">200</span><span class="op" id="7701232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701237">ModTime</span><span class="op" id="7701244">:</span>&nbsp;&nbsp;<span class="ident" id="7701247">time</span><span class="op" id="7701251">.</span><span class="ident" id="7701252">Unix</span><span class="op" id="7701256">(</span><span class="num" id="7701257">1392342187</span><span class="op" id="7701267">,</span>&nbsp;<span class="num" id="7701269">0</span><span class="op" id="7701270">)</span><span class="op" id="7701271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701276">Typeflag</span><span class="op" id="7701284">:</span>&nbsp;<span class="num" id="7701286">0x30</span><span class="op" id="7701290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701295">Linkname</span><span class="op" id="7701303">:</span>&nbsp;<span class="string" id="7701305">&#34;&#34;</span><span class="op" id="7701307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701312">Uname</span><span class="op" id="7701317">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701322">&#34;david&#34;</span><span class="op" id="7701329">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701334">Gname</span><span class="op" id="7701339">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701344">&#34;david&#34;</span><span class="op" id="7701351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701356">Devmajor</span><span class="op" id="7701364">:</span>&nbsp;<span class="num" id="7701366">0</span><span class="op" id="7701367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701372">Devminor</span><span class="op" id="7701380">:</span>&nbsp;<span class="num" id="7701382">0</span><span class="op" id="7701383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701387">}</span><span class="op" id="7701388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701392">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701397">Name</span><span class="op" id="7701401">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701407">&#34;sparse-posix-0.1&#34;</span><span class="op" id="7701425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701430">Mode</span><span class="op" id="7701434">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701440">420</span><span class="op" id="7701443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701448">Uid</span><span class="op" id="7701451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701458">1000</span><span class="op" id="7701462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701467">Gid</span><span class="op" id="7701470">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701477">1000</span><span class="op" id="7701481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701486">Size</span><span class="op" id="7701490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701496">200</span><span class="op" id="7701499">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701504">ModTime</span><span class="op" id="7701511">:</span>&nbsp;&nbsp;<span class="ident" id="7701514">time</span><span class="op" id="7701518">.</span><span class="ident" id="7701519">Unix</span><span class="op" id="7701523">(</span><span class="num" id="7701524">1392340456</span><span class="op" id="7701534">,</span>&nbsp;<span class="num" id="7701536">0</span><span class="op" id="7701537">)</span><span class="op" id="7701538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701543">Typeflag</span><span class="op" id="7701551">:</span>&nbsp;<span class="num" id="7701553">0x30</span><span class="op" id="7701557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701562">Linkname</span><span class="op" id="7701570">:</span>&nbsp;<span class="string" id="7701572">&#34;&#34;</span><span class="op" id="7701574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701579">Uname</span><span class="op" id="7701584">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701589">&#34;david&#34;</span><span class="op" id="7701596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701601">Gname</span><span class="op" id="7701606">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701611">&#34;david&#34;</span><span class="op" id="7701618">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701623">Devmajor</span><span class="op" id="7701631">:</span>&nbsp;<span class="num" id="7701633">0</span><span class="op" id="7701634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701639">Devminor</span><span class="op" id="7701647">:</span>&nbsp;<span class="num" id="7701649">0</span><span class="op" id="7701650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701654">}</span><span class="op" id="7701655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701664">Name</span><span class="op" id="7701668">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701674">&#34;sparse-posix-1.0&#34;</span><span class="op" id="7701692">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701697">Mode</span><span class="op" id="7701701">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701707">420</span><span class="op" id="7701710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701715">Uid</span><span class="op" id="7701718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701725">1000</span><span class="op" id="7701729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701734">Gid</span><span class="op" id="7701737">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701744">1000</span><span class="op" id="7701748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701753">Size</span><span class="op" id="7701757">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701763">200</span><span class="op" id="7701766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701771">ModTime</span><span class="op" id="7701778">:</span>&nbsp;&nbsp;<span class="ident" id="7701781">time</span><span class="op" id="7701785">.</span><span class="ident" id="7701786">Unix</span><span class="op" id="7701790">(</span><span class="num" id="7701791">1392337404</span><span class="op" id="7701801">,</span>&nbsp;<span class="num" id="7701803">0</span><span class="op" id="7701804">)</span><span class="op" id="7701805">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701810">Typeflag</span><span class="op" id="7701818">:</span>&nbsp;<span class="num" id="7701820">0x30</span><span class="op" id="7701824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701829">Linkname</span><span class="op" id="7701837">:</span>&nbsp;<span class="string" id="7701839">&#34;&#34;</span><span class="op" id="7701841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701846">Uname</span><span class="op" id="7701851">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701856">&#34;david&#34;</span><span class="op" id="7701863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701868">Gname</span><span class="op" id="7701873">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701878">&#34;david&#34;</span><span class="op" id="7701885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701890">Devmajor</span><span class="op" id="7701898">:</span>&nbsp;<span class="num" id="7701900">0</span><span class="op" id="7701901">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701906">Devminor</span><span class="op" id="7701914">:</span>&nbsp;<span class="num" id="7701916">0</span><span class="op" id="7701917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701921">}</span><span class="op" id="7701922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701931">Name</span><span class="op" id="7701935">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701941">&#34;end&#34;</span><span class="op" id="7701946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701951">Mode</span><span class="op" id="7701955">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701961">420</span><span class="op" id="7701964">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701969">Uid</span><span class="op" id="7701972">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701979">1000</span><span class="op" id="7701983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701988">Gid</span><span class="op" id="7701991">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701998">1000</span><span class="op" id="7702002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702007">Size</span><span class="op" id="7702011">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702017">4</span><span class="op" id="7702018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702023">ModTime</span><span class="op" id="7702030">:</span>&nbsp;&nbsp;<span class="ident" id="7702033">time</span><span class="op" id="7702037">.</span><span class="ident" id="7702038">Unix</span><span class="op" id="7702042">(</span><span class="num" id="7702043">1392398319</span><span class="op" id="7702053">,</span>&nbsp;<span class="num" id="7702055">0</span><span class="op" id="7702056">)</span><span class="op" id="7702057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702062">Typeflag</span><span class="op" id="7702070">:</span>&nbsp;<span class="num" id="7702072">0x30</span><span class="op" id="7702076">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702081">Linkname</span><span class="op" id="7702089">:</span>&nbsp;<span class="string" id="7702091">&#34;&#34;</span><span class="op" id="7702093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702098">Uname</span><span class="op" id="7702103">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702108">&#34;david&#34;</span><span class="op" id="7702115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702120">Gname</span><span class="op" id="7702125">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702130">&#34;david&#34;</span><span class="op" id="7702137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702142">Devmajor</span><span class="op" id="7702150">:</span>&nbsp;<span class="num" id="7702152">0</span><span class="op" id="7702153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702158">Devminor</span><span class="op" id="7702166">:</span>&nbsp;<span class="num" id="7702168">0</span><span class="op" id="7702169">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702173">}</span><span class="op" id="7702174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702177">}</span><span class="op" id="7702178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702181">cksums</span><span class="op" id="7702187">:</span>&nbsp;<span class="op" id="7702189">[</span><span class="op" id="7702190">]</span><span class="builtintype" id="7702191">string</span><span class="op" id="7702197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702201">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7702235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702239">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7702273">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702277">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7702311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702315">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7702349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7702353">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="7702387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702390">}</span><span class="op" id="7702391">,</span><br>
<span class="lineno"></span><span class="op" id="7702393">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7702396">var</span>&nbsp;<span class="ident" id="7702400">untarTests</span>&nbsp;<span class="op" id="7702411">=</span>&nbsp;<span class="op" id="7702413">[</span><span class="op" id="7702414">]</span><span class="op" id="7702415">*</span><span class="ident" id="7702416">untarTest</span><span class="op" id="7702425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702428">gnuTarTest</span><span class="op" id="7702438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702441">sparseTarTest</span><span class="op" id="7702454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702457">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702461">file</span><span class="op" id="7702465">:</span>&nbsp;<span class="string" id="7702467">&#34;testdata/star.tar&#34;</span><span class="op" id="7702486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702490">headers</span><span class="op" id="7702497">:</span>&nbsp;<span class="op" id="7702499">[</span><span class="op" id="7702500">]</span><span class="op" id="7702501">*</span><span class="ident" id="7702502">Header</span><span class="op" id="7702508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702519">Name</span><span class="op" id="7702523">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702531">&#34;small.txt&#34;</span><span class="op" id="7702542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702548">Mode</span><span class="op" id="7702552">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702560">0640</span><span class="op" id="7702564">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702570">Uid</span><span class="op" id="7702573">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702582">73025</span><span class="op" id="7702587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702593">Gid</span><span class="op" id="7702596">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702605">5000</span><span class="op" id="7702609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702615">Size</span><span class="op" id="7702619">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702627">5</span><span class="op" id="7702628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702634">ModTime</span><span class="op" id="7702641">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702646">time</span><span class="op" id="7702650">.</span><span class="ident" id="7702651">Unix</span><span class="op" id="7702655">(</span><span class="num" id="7702656">1244592783</span><span class="op" id="7702666">,</span>&nbsp;<span class="num" id="7702668">0</span><span class="op" id="7702669">)</span><span class="op" id="7702670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702676">Typeflag</span><span class="op" id="7702684">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7702688">&#39;0&#39;</span><span class="op" id="7702691">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702697">Uname</span><span class="op" id="7702702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702709">&#34;dsymonds&#34;</span><span class="op" id="7702719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702725">Gname</span><span class="op" id="7702730">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702737">&#34;eng&#34;</span><span class="op" id="7702742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702748">AccessTime</span><span class="op" id="7702758">:</span>&nbsp;<span class="ident" id="7702760">time</span><span class="op" id="7702764">.</span><span class="ident" id="7702765">Unix</span><span class="op" id="7702769">(</span><span class="num" id="7702770">1244592783</span><span class="op" id="7702780">,</span>&nbsp;<span class="num" id="7702782">0</span><span class="op" id="7702783">)</span><span class="op" id="7702784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702790">ChangeTime</span><span class="op" id="7702800">:</span>&nbsp;<span class="ident" id="7702802">time</span><span class="op" id="7702806">.</span><span class="ident" id="7702807">Unix</span><span class="op" id="7702811">(</span><span class="num" id="7702812">1244592783</span><span class="op" id="7702822">,</span>&nbsp;<span class="num" id="7702824">0</span><span class="op" id="7702825">)</span><span class="op" id="7702826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702831">}</span><span class="op" id="7702832">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702843">Name</span><span class="op" id="7702847">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702855">&#34;small2.txt&#34;</span><span class="op" id="7702867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702873">Mode</span><span class="op" id="7702877">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702885">0640</span><span class="op" id="7702889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702895">Uid</span><span class="op" id="7702898">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702907">73025</span><span class="op" id="7702912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702918">Gid</span><span class="op" id="7702921">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702930">5000</span><span class="op" id="7702934">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702940">Size</span><span class="op" id="7702944">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7702952">11</span><span class="op" id="7702954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702960">ModTime</span><span class="op" id="7702967">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702972">time</span><span class="op" id="7702976">.</span><span class="ident" id="7702977">Unix</span><span class="op" id="7702981">(</span><span class="num" id="7702982">1244592783</span><span class="op" id="7702992">,</span>&nbsp;<span class="num" id="7702994">0</span><span class="op" id="7702995">)</span><span class="op" id="7702996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703002">Typeflag</span><span class="op" id="7703010">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7703014">&#39;0&#39;</span><span class="op" id="7703017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703023">Uname</span><span class="op" id="7703028">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7703035">&#34;dsymonds&#34;</span><span class="op" id="7703045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703051">Gname</span><span class="op" id="7703056">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7703063">&#34;eng&#34;</span><span class="op" id="7703068">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703074">AccessTime</span><span class="op" id="7703084">:</span>&nbsp;<span class="ident" id="7703086">time</span><span class="op" id="7703090">.</span><span class="ident" id="7703091">Unix</span><span class="op" id="7703095">(</span><span class="num" id="7703096">1244592783</span><span class="op" id="7703106">,</span>&nbsp;<span class="num" id="7703108">0</span><span class="op" id="7703109">)</span><span class="op" id="7703110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703116">ChangeTime</span><span class="op" id="7703126">:</span>&nbsp;<span class="ident" id="7703128">time</span><span class="op" id="7703132">.</span><span class="ident" id="7703133">Unix</span><span class="op" id="7703137">(</span><span class="num" id="7703138">1244592783</span><span class="op" id="7703148">,</span>&nbsp;<span class="num" id="7703150">0</span><span class="op" id="7703151">)</span><span class="op" id="7703152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703157">}</span><span class="op" id="7703158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703162">}</span><span class="op" id="7703163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703166">}</span><span class="op" id="7703167">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703174">file</span><span class="op" id="7703178">:</span>&nbsp;<span class="string" id="7703180">&#34;testdata/v7.tar&#34;</span><span class="op" id="7703197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703201">headers</span><span class="op" id="7703208">:</span>&nbsp;<span class="op" id="7703210">[</span><span class="op" id="7703211">]</span><span class="op" id="7703212">*</span><span class="ident" id="7703213">Header</span><span class="op" id="7703219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703230">Name</span><span class="op" id="7703234">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7703240">&#34;small.txt&#34;</span><span class="op" id="7703251">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703257">Mode</span><span class="op" id="7703261">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703267">0444</span><span class="op" id="7703271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703277">Uid</span><span class="op" id="7703280">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703287">73025</span><span class="op" id="7703292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703298">Gid</span><span class="op" id="7703301">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703308">5000</span><span class="op" id="7703312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703318">Size</span><span class="op" id="7703322">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703328">5</span><span class="op" id="7703329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703335">ModTime</span><span class="op" id="7703342">:</span>&nbsp;&nbsp;<span class="ident" id="7703345">time</span><span class="op" id="7703349">.</span><span class="ident" id="7703350">Unix</span><span class="op" id="7703354">(</span><span class="num" id="7703355">1244593104</span><span class="op" id="7703365">,</span>&nbsp;<span class="num" id="7703367">0</span><span class="op" id="7703368">)</span><span class="op" id="7703369">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703375">Typeflag</span><span class="op" id="7703383">:</span>&nbsp;<span class="string" id="7703385">&#39;\x00&#39;</span><span class="op" id="7703391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703396">}</span><span class="op" id="7703397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703408">Name</span><span class="op" id="7703412">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7703418">&#34;small2.txt&#34;</span><span class="op" id="7703430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703436">Mode</span><span class="op" id="7703440">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703446">0444</span><span class="op" id="7703450">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703456">Uid</span><span class="op" id="7703459">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703466">73025</span><span class="op" id="7703471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703477">Gid</span><span class="op" id="7703480">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703487">5000</span><span class="op" id="7703491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703497">Size</span><span class="op" id="7703501">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703507">11</span><span class="op" id="7703509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703515">ModTime</span><span class="op" id="7703522">:</span>&nbsp;&nbsp;<span class="ident" id="7703525">time</span><span class="op" id="7703529">.</span><span class="ident" id="7703530">Unix</span><span class="op" id="7703534">(</span><span class="num" id="7703535">1244593104</span><span class="op" id="7703545">,</span>&nbsp;<span class="num" id="7703547">0</span><span class="op" id="7703548">)</span><span class="op" id="7703549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703555">Typeflag</span><span class="op" id="7703563">:</span>&nbsp;<span class="string" id="7703565">&#39;\x00&#39;</span><span class="op" id="7703571">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703576">}</span><span class="op" id="7703577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703581">}</span><span class="op" id="7703582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703585">}</span><span class="op" id="7703586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703593">file</span><span class="op" id="7703597">:</span>&nbsp;<span class="string" id="7703599">&#34;testdata/pax.tar&#34;</span><span class="op" id="7703617">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703621">headers</span><span class="op" id="7703628">:</span>&nbsp;<span class="op" id="7703630">[</span><span class="op" id="7703631">]</span><span class="op" id="7703632">*</span><span class="ident" id="7703633">Header</span><span class="op" id="7703639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7703644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703650">Name</span><span class="op" id="7703654">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7703662">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7703858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703864">Mode</span><span class="op" id="7703868">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703876">0664</span><span class="op" id="7703880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703886">Uid</span><span class="op" id="7703889">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703898">1000</span><span class="op" id="7703902">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703908">Gid</span><span class="op" id="7703911">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703920">1000</span><span class="op" id="7703924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703930">Uname</span><span class="op" id="7703935">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7703942">&#34;shane&#34;</span><span class="op" id="7703949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703955">Gname</span><span class="op" id="7703960">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7703967">&#34;shane&#34;</span><span class="op" id="7703974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703980">Size</span><span class="op" id="7703984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7703992">7</span><span class="op" id="7703993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7703999">ModTime</span><span class="op" id="7704006">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704011">time</span><span class="op" id="7704015">.</span><span class="ident" id="7704016">Unix</span><span class="op" id="7704020">(</span><span class="num" id="7704021">1350244992</span><span class="op" id="7704031">,</span>&nbsp;<span class="num" id="7704033">23960108</span><span class="op" id="7704041">)</span><span class="op" id="7704042">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704048">ChangeTime</span><span class="op" id="7704058">:</span>&nbsp;<span class="ident" id="7704060">time</span><span class="op" id="7704064">.</span><span class="ident" id="7704065">Unix</span><span class="op" id="7704069">(</span><span class="num" id="7704070">1350244992</span><span class="op" id="7704080">,</span>&nbsp;<span class="num" id="7704082">23960108</span><span class="op" id="7704090">)</span><span class="op" id="7704091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704097">AccessTime</span><span class="op" id="7704107">:</span>&nbsp;<span class="ident" id="7704109">time</span><span class="op" id="7704113">.</span><span class="ident" id="7704114">Unix</span><span class="op" id="7704118">(</span><span class="num" id="7704119">1350244992</span><span class="op" id="7704129">,</span>&nbsp;<span class="num" id="7704131">23960108</span><span class="op" id="7704139">)</span><span class="op" id="7704140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704146">Typeflag</span><span class="op" id="7704154">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7704158">TypeReg</span><span class="op" id="7704165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704170">}</span><span class="op" id="7704171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704176">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704182">Name</span><span class="op" id="7704186">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7704194">&#34;a/b&#34;</span><span class="op" id="7704199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704205">Mode</span><span class="op" id="7704209">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7704217">0777</span><span class="op" id="7704221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704227">Uid</span><span class="op" id="7704230">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7704239">1000</span><span class="op" id="7704243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704249">Gid</span><span class="op" id="7704252">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7704261">1000</span><span class="op" id="7704265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704271">Uname</span><span class="op" id="7704276">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7704283">&#34;shane&#34;</span><span class="op" id="7704290">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704296">Gname</span><span class="op" id="7704301">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7704308">&#34;shane&#34;</span><span class="op" id="7704315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704321">Size</span><span class="op" id="7704325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7704333">0</span><span class="op" id="7704334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704340">ModTime</span><span class="op" id="7704347">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704352">time</span><span class="op" id="7704356">.</span><span class="ident" id="7704357">Unix</span><span class="op" id="7704361">(</span><span class="num" id="7704362">1350266320</span><span class="op" id="7704372">,</span>&nbsp;<span class="num" id="7704374">910238425</span><span class="op" id="7704383">)</span><span class="op" id="7704384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704390">ChangeTime</span><span class="op" id="7704400">:</span>&nbsp;<span class="ident" id="7704402">time</span><span class="op" id="7704406">.</span><span class="ident" id="7704407">Unix</span><span class="op" id="7704411">(</span><span class="num" id="7704412">1350266320</span><span class="op" id="7704422">,</span>&nbsp;<span class="num" id="7704424">910238425</span><span class="op" id="7704433">)</span><span class="op" id="7704434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704440">AccessTime</span><span class="op" id="7704450">:</span>&nbsp;<span class="ident" id="7704452">time</span><span class="op" id="7704456">.</span><span class="ident" id="7704457">Unix</span><span class="op" id="7704461">(</span><span class="num" id="7704462">1350266320</span><span class="op" id="7704472">,</span>&nbsp;<span class="num" id="7704474">910238425</span><span class="op" id="7704483">)</span><span class="op" id="7704484">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704490">Typeflag</span><span class="op" id="7704498">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7704502">TypeSymlink</span><span class="op" id="7704513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704519">Linkname</span><span class="op" id="7704527">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7704531">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7704725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704730">}</span><span class="op" id="7704731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704735">}</span><span class="op" id="7704736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704739">}</span><span class="op" id="7704740">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704747">file</span><span class="op" id="7704751">:</span>&nbsp;<span class="string" id="7704753">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="7704775">,</span>&nbsp;<span class="comment" id="7704777">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704804">headers</span><span class="op" id="7704811">:</span>&nbsp;<span class="op" id="7704813">[</span><span class="op" id="7704814">]</span><span class="op" id="7704815">*</span><span class="ident" id="7704816">Header</span><span class="op" id="7704822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7704827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704833">Name</span><span class="op" id="7704837">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7704843">&#34;P1050238.JPG.log&#34;</span><span class="op" id="7704861">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704867">Mode</span><span class="op" id="7704871">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7704877">0664</span><span class="op" id="7704881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704887">Uid</span><span class="op" id="7704890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7704897">0</span><span class="op" id="7704898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704904">Gid</span><span class="op" id="7704907">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7704914">0</span><span class="op" id="7704915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704921">Size</span><span class="op" id="7704925">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7704931">14</span><span class="op" id="7704933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704939">ModTime</span><span class="op" id="7704946">:</span>&nbsp;&nbsp;<span class="ident" id="7704949">time</span><span class="op" id="7704953">.</span><span class="ident" id="7704954">Unix</span><span class="op" id="7704958">(</span><span class="num" id="7704959">1365454838</span><span class="op" id="7704969">,</span>&nbsp;<span class="num" id="7704971">0</span><span class="op" id="7704972">)</span><span class="op" id="7704973">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7704979">Typeflag</span><span class="op" id="7704987">:</span>&nbsp;<span class="ident" id="7704989">TypeReg</span><span class="op" id="7704996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705002">Linkname</span><span class="op" id="7705010">:</span>&nbsp;<span class="string" id="7705012">&#34;&#34;</span><span class="op" id="7705014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705020">Uname</span><span class="op" id="7705025">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705030">&#34;eyefi&#34;</span><span class="op" id="7705037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705043">Gname</span><span class="op" id="7705048">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705053">&#34;eyefi&#34;</span><span class="op" id="7705060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705066">Devmajor</span><span class="op" id="7705074">:</span>&nbsp;<span class="num" id="7705076">0</span><span class="op" id="7705077">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705083">Devminor</span><span class="op" id="7705091">:</span>&nbsp;<span class="num" id="7705093">0</span><span class="op" id="7705094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705099">}</span><span class="op" id="7705100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705104">}</span><span class="op" id="7705105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705108">}</span><span class="op" id="7705109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705112">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705116">file</span><span class="op" id="7705120">:</span>&nbsp;<span class="string" id="7705122">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="7705143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705147">headers</span><span class="op" id="7705154">:</span>&nbsp;<span class="op" id="7705156">[</span><span class="op" id="7705157">]</span><span class="op" id="7705158">*</span><span class="ident" id="7705159">Header</span><span class="op" id="7705165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705176">Name</span><span class="op" id="7705180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705188">&#34;small.txt&#34;</span><span class="op" id="7705199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705205">Mode</span><span class="op" id="7705209">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705217">0644</span><span class="op" id="7705221">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705227">Uid</span><span class="op" id="7705230">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705239">1000</span><span class="op" id="7705243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705249">Gid</span><span class="op" id="7705252">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705261">10</span><span class="op" id="7705263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705269">Size</span><span class="op" id="7705273">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705281">5</span><span class="op" id="7705282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705288">ModTime</span><span class="op" id="7705295">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705300">time</span><span class="op" id="7705304">.</span><span class="ident" id="7705305">Unix</span><span class="op" id="7705309">(</span><span class="num" id="7705310">1386065770</span><span class="op" id="7705320">,</span>&nbsp;<span class="num" id="7705322">448252320</span><span class="op" id="7705331">)</span><span class="op" id="7705332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705338">Typeflag</span><span class="op" id="7705346">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7705350">&#39;0&#39;</span><span class="op" id="7705353">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705359">Uname</span><span class="op" id="7705364">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705371">&#34;alex&#34;</span><span class="op" id="7705377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705383">Gname</span><span class="op" id="7705388">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705395">&#34;wheel&#34;</span><span class="op" id="7705402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705408">AccessTime</span><span class="op" id="7705418">:</span>&nbsp;<span class="ident" id="7705420">time</span><span class="op" id="7705424">.</span><span class="ident" id="7705425">Unix</span><span class="op" id="7705429">(</span><span class="num" id="7705430">1389782991</span><span class="op" id="7705440">,</span>&nbsp;<span class="num" id="7705442">419875220</span><span class="op" id="7705451">)</span><span class="op" id="7705452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705458">ChangeTime</span><span class="op" id="7705468">:</span>&nbsp;<span class="ident" id="7705470">time</span><span class="op" id="7705474">.</span><span class="ident" id="7705475">Unix</span><span class="op" id="7705479">(</span><span class="num" id="7705480">1389782956</span><span class="op" id="7705490">,</span>&nbsp;<span class="num" id="7705492">794414986</span><span class="op" id="7705501">)</span><span class="op" id="7705502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705508">Xattrs</span><span class="op" id="7705514">:</span>&nbsp;<span class="keyword" id="7705516">map</span><span class="op" id="7705519">[</span><span class="builtintype" id="7705520">string</span><span class="op" id="7705526">]</span><span class="builtintype" id="7705527">string</span><span class="op" id="7705533">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7705540">&#34;user.key&#34;</span><span class="op" id="7705550">:</span>&nbsp;&nbsp;<span class="string" id="7705553">&#34;value&#34;</span><span class="op" id="7705560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7705567">&#34;user.key2&#34;</span><span class="op" id="7705578">:</span>&nbsp;<span class="string" id="7705580">&#34;value2&#34;</span><span class="op" id="7705588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7705595">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7705672">&#34;security.selinux&#34;</span><span class="op" id="7705690">:</span>&nbsp;<span class="string" id="7705692">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7705732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705738">}</span><span class="op" id="7705739">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705744">}</span><span class="op" id="7705745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705756">Name</span><span class="op" id="7705760">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705768">&#34;small2.txt&#34;</span><span class="op" id="7705780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705786">Mode</span><span class="op" id="7705790">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705798">0644</span><span class="op" id="7705802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705808">Uid</span><span class="op" id="7705811">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705820">1000</span><span class="op" id="7705824">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705830">Gid</span><span class="op" id="7705833">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705842">10</span><span class="op" id="7705844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705850">Size</span><span class="op" id="7705854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7705862">11</span><span class="op" id="7705864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705870">ModTime</span><span class="op" id="7705877">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705882">time</span><span class="op" id="7705886">.</span><span class="ident" id="7705887">Unix</span><span class="op" id="7705891">(</span><span class="num" id="7705892">1386065770</span><span class="op" id="7705902">,</span>&nbsp;<span class="num" id="7705904">449252304</span><span class="op" id="7705913">)</span><span class="op" id="7705914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705920">Typeflag</span><span class="op" id="7705928">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7705932">&#39;0&#39;</span><span class="op" id="7705935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705941">Uname</span><span class="op" id="7705946">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705953">&#34;alex&#34;</span><span class="op" id="7705959">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705965">Gname</span><span class="op" id="7705970">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7705977">&#34;wheel&#34;</span><span class="op" id="7705984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705990">AccessTime</span><span class="op" id="7706000">:</span>&nbsp;<span class="ident" id="7706002">time</span><span class="op" id="7706006">.</span><span class="ident" id="7706007">Unix</span><span class="op" id="7706011">(</span><span class="num" id="7706012">1389782991</span><span class="op" id="7706022">,</span>&nbsp;<span class="num" id="7706024">419875220</span><span class="op" id="7706033">)</span><span class="op" id="7706034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706040">ChangeTime</span><span class="op" id="7706050">:</span>&nbsp;<span class="ident" id="7706052">time</span><span class="op" id="7706056">.</span><span class="ident" id="7706057">Unix</span><span class="op" id="7706061">(</span><span class="num" id="7706062">1386065770</span><span class="op" id="7706072">,</span>&nbsp;<span class="num" id="7706074">449252304</span><span class="op" id="7706083">)</span><span class="op" id="7706084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706090">Xattrs</span><span class="op" id="7706096">:</span>&nbsp;<span class="keyword" id="7706098">map</span><span class="op" id="7706101">[</span><span class="builtintype" id="7706102">string</span><span class="op" id="7706108">]</span><span class="builtintype" id="7706109">string</span><span class="op" id="7706115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7706122">&#34;security.selinux&#34;</span><span class="op" id="7706140">:</span>&nbsp;<span class="string" id="7706142">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7706182">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706188">}</span><span class="op" id="7706189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706194">}</span><span class="op" id="7706195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706199">}</span><span class="op" id="7706200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706203">}</span><span class="op" id="7706204">,</span><br>
<span class="lineno"></span><span class="op" id="7706206">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="7706209">func</span>&nbsp;<span class="ident" id="7706214">TestReader</span><span class="op" id="7706224">(</span><span class="ident" id="7706225">t</span>&nbsp;<span class="op" id="7706227">*</span><span class="ident" id="7706228">testing</span><span class="op" id="7706235">.</span><span class="ident" id="7706236">T</span><span class="op" id="7706237">)</span>&nbsp;<span class="op" id="7706239">{</span><br>
<span class="lineno"></span><span class="ident" id="7706241">testLoop</span><span class="op" id="7706249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706252">for</span>&nbsp;<span class="ident" id="7706256">i</span><span class="op" id="7706257">,</span>&nbsp;<span class="ident" id="7706259">test</span>&nbsp;<span class="op" id="7706264">:=</span>&nbsp;<span class="keyword" id="7706267">range</span>&nbsp;<span class="ident" id="7706273">untarTests</span>&nbsp;<span class="op" id="7706284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706288">f</span><span class="op" id="7706289">,</span>&nbsp;<span class="ident" id="7706291">err</span>&nbsp;<span class="op" id="7706295">:=</span>&nbsp;<span class="ident" id="7706298">os</span><span class="op" id="7706300">.</span><span class="ident" id="7706301">Open</span><span class="op" id="7706305">(</span><span class="ident" id="7706306">test</span><span class="op" id="7706310">.</span><span class="ident" id="7706311">file</span><span class="op" id="7706315">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706319">if</span>&nbsp;<span class="ident" id="7706322">err</span>&nbsp;<span class="op" id="7706326">!=</span>&nbsp;<span class="ident" id="7706329">nil</span>&nbsp;<span class="op" id="7706333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706338">t</span><span class="op" id="7706339">.</span><span class="ident" id="7706340">Errorf</span><span class="op" id="7706346">(</span><span class="string" id="7706347">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7706378">,</span>&nbsp;<span class="ident" id="7706380">i</span><span class="op" id="7706381">,</span>&nbsp;<span class="ident" id="7706383">err</span><span class="op" id="7706386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706391">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706406">defer</span>&nbsp;<span class="ident" id="7706412">f</span><span class="op" id="7706413">.</span><span class="ident" id="7706414">Close</span><span class="op" id="7706419">(</span><span class="op" id="7706420">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706424">tr</span>&nbsp;<span class="op" id="7706427">:=</span>&nbsp;<span class="ident" id="7706430">NewReader</span><span class="op" id="7706439">(</span><span class="ident" id="7706440">f</span><span class="op" id="7706441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706445">for</span>&nbsp;<span class="ident" id="7706449">j</span><span class="op" id="7706450">,</span>&nbsp;<span class="ident" id="7706452">header</span>&nbsp;<span class="op" id="7706459">:=</span>&nbsp;<span class="keyword" id="7706462">range</span>&nbsp;<span class="ident" id="7706468">test</span><span class="op" id="7706472">.</span><span class="ident" id="7706473">headers</span>&nbsp;<span class="op" id="7706481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706486">hdr</span><span class="op" id="7706489">,</span>&nbsp;<span class="ident" id="7706491">err</span>&nbsp;<span class="op" id="7706495">:=</span>&nbsp;<span class="ident" id="7706498">tr</span><span class="op" id="7706500">.</span><span class="ident" id="7706501">Next</span><span class="op" id="7706505">(</span><span class="op" id="7706506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706511">if</span>&nbsp;<span class="ident" id="7706514">err</span>&nbsp;<span class="op" id="7706518">!=</span>&nbsp;<span class="ident" id="7706521">nil</span>&nbsp;<span class="op" id="7706525">||</span>&nbsp;<span class="ident" id="7706528">hdr</span>&nbsp;<span class="op" id="7706532">==</span>&nbsp;<span class="ident" id="7706535">nil</span>&nbsp;<span class="op" id="7706539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706545">t</span><span class="op" id="7706546">.</span><span class="ident" id="7706547">Errorf</span><span class="op" id="7706553">(</span><span class="string" id="7706554">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="7706595">,</span>&nbsp;<span class="ident" id="7706597">i</span><span class="op" id="7706598">,</span>&nbsp;<span class="ident" id="7706600">j</span><span class="op" id="7706601">,</span>&nbsp;<span class="ident" id="7706603">err</span><span class="op" id="7706606">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706612">f</span><span class="op" id="7706613">.</span><span class="ident" id="7706614">Close</span><span class="op" id="7706619">(</span><span class="op" id="7706620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706626">continue</span>&nbsp;<span class="ident" id="7706635">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706652">if</span>&nbsp;<span class="op" id="7706655">!</span><span class="ident" id="7706656">reflect</span><span class="op" id="7706663">.</span><span class="ident" id="7706664">DeepEqual</span><span class="op" id="7706673">(</span><span class="op" id="7706674">*</span><span class="ident" id="7706675">hdr</span><span class="op" id="7706678">,</span>&nbsp;<span class="op" id="7706680">*</span><span class="ident" id="7706681">header</span><span class="op" id="7706687">)</span>&nbsp;<span class="op" id="7706689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706695">t</span><span class="op" id="7706696">.</span><span class="ident" id="7706697">Errorf</span><span class="op" id="7706703">(</span><span class="string" id="7706704">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7706762">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706769">i</span><span class="op" id="7706770">,</span>&nbsp;<span class="ident" id="7706772">j</span><span class="op" id="7706773">,</span>&nbsp;<span class="op" id="7706775">*</span><span class="ident" id="7706776">hdr</span><span class="op" id="7706779">,</span>&nbsp;<span class="op" id="7706781">*</span><span class="ident" id="7706782">header</span><span class="op" id="7706788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706801">hdr</span><span class="op" id="7706804">,</span>&nbsp;<span class="ident" id="7706806">err</span>&nbsp;<span class="op" id="7706810">:=</span>&nbsp;<span class="ident" id="7706813">tr</span><span class="op" id="7706815">.</span><span class="ident" id="7706816">Next</span><span class="op" id="7706820">(</span><span class="op" id="7706821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706825">if</span>&nbsp;<span class="ident" id="7706828">err</span>&nbsp;<span class="op" id="7706832">==</span>&nbsp;<span class="ident" id="7706835">io</span><span class="op" id="7706837">.</span><span class="ident" id="7706838">EOF</span>&nbsp;<span class="op" id="7706842">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706847">continue</span>&nbsp;<span class="ident" id="7706856">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706871">if</span>&nbsp;<span class="ident" id="7706874">hdr</span>&nbsp;<span class="op" id="7706878">!=</span>&nbsp;<span class="ident" id="7706881">nil</span>&nbsp;<span class="op" id="7706885">||</span>&nbsp;<span class="ident" id="7706888">err</span>&nbsp;<span class="op" id="7706892">!=</span>&nbsp;<span class="ident" id="7706895">nil</span>&nbsp;<span class="op" id="7706899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706904">t</span><span class="op" id="7706905">.</span><span class="ident" id="7706906">Errorf</span><span class="op" id="7706912">(</span><span class="string" id="7706913">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="7706964">,</span>&nbsp;<span class="ident" id="7706966">i</span><span class="op" id="7706967">,</span>&nbsp;<span class="ident" id="7706969">hdr</span><span class="op" id="7706972">,</span>&nbsp;<span class="ident" id="7706974">err</span><span class="op" id="7706977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706981">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706984">}</span><br>
<span class="lineno"></span><span class="op" id="7706986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7706989">func</span>&nbsp;<span class="ident" id="7706994">TestPartialRead</span><span class="op" id="7707009">(</span><span class="ident" id="7707010">t</span>&nbsp;<span class="op" id="7707012">*</span><span class="ident" id="7707013">testing</span><span class="op" id="7707020">.</span><span class="ident" id="7707021">T</span><span class="op" id="7707022">)</span>&nbsp;<span class="op" id="7707024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707027">f</span><span class="op" id="7707028">,</span>&nbsp;<span class="ident" id="7707030">err</span>&nbsp;<span class="op" id="7707034">:=</span>&nbsp;<span class="ident" id="7707037">os</span><span class="op" id="7707039">.</span><span class="ident" id="7707040">Open</span><span class="op" id="7707044">(</span><span class="string" id="7707045">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7707063">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707066">if</span>&nbsp;<span class="ident" id="7707069">err</span>&nbsp;<span class="op" id="7707073">!=</span>&nbsp;<span class="ident" id="7707076">nil</span>&nbsp;<span class="op" id="7707080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707084">t</span><span class="op" id="7707085">.</span><span class="ident" id="7707086">Fatalf</span><span class="op" id="7707092">(</span><span class="string" id="7707093">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7707115">,</span>&nbsp;<span class="ident" id="7707117">err</span><span class="op" id="7707120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707126">defer</span>&nbsp;<span class="ident" id="7707132">f</span><span class="op" id="7707133">.</span><span class="ident" id="7707134">Close</span><span class="op" id="7707139">(</span><span class="op" id="7707140">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707144">tr</span>&nbsp;<span class="op" id="7707147">:=</span>&nbsp;<span class="ident" id="7707150">NewReader</span><span class="op" id="7707159">(</span><span class="ident" id="7707160">f</span><span class="op" id="7707161">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7707165">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707230">hdr</span><span class="op" id="7707233">,</span>&nbsp;<span class="ident" id="7707235">err</span>&nbsp;<span class="op" id="7707239">:=</span>&nbsp;<span class="ident" id="7707242">tr</span><span class="op" id="7707244">.</span><span class="ident" id="7707245">Next</span><span class="op" id="7707249">(</span><span class="op" id="7707250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707253">if</span>&nbsp;<span class="ident" id="7707256">err</span>&nbsp;<span class="op" id="7707260">!=</span>&nbsp;<span class="ident" id="7707263">nil</span>&nbsp;<span class="op" id="7707267">||</span>&nbsp;<span class="ident" id="7707270">hdr</span>&nbsp;<span class="op" id="7707274">==</span>&nbsp;<span class="ident" id="7707277">nil</span>&nbsp;<span class="op" id="7707281">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707285">t</span><span class="op" id="7707286">.</span><span class="ident" id="7707287">Fatalf</span><span class="op" id="7707293">(</span><span class="string" id="7707294">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7707321">,</span>&nbsp;<span class="ident" id="7707323">err</span><span class="op" id="7707326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707332">buf</span>&nbsp;<span class="op" id="7707336">:=</span>&nbsp;<span class="builtinfunc" id="7707339">make</span><span class="op" id="7707343">(</span><span class="op" id="7707344">[</span><span class="op" id="7707345">]</span><span class="builtintype" id="7707346">byte</span><span class="op" id="7707350">,</span>&nbsp;<span class="num" id="7707352">4</span><span class="op" id="7707353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707356">if</span>&nbsp;<span class="ident" id="7707359">_</span><span class="op" id="7707360">,</span>&nbsp;<span class="ident" id="7707362">err</span>&nbsp;<span class="op" id="7707366">:=</span>&nbsp;<span class="ident" id="7707369">io</span><span class="op" id="7707371">.</span><span class="ident" id="7707372">ReadFull</span><span class="op" id="7707380">(</span><span class="ident" id="7707381">tr</span><span class="op" id="7707383">,</span>&nbsp;<span class="ident" id="7707385">buf</span><span class="op" id="7707388">)</span><span class="op" id="7707389">;</span>&nbsp;<span class="ident" id="7707391">err</span>&nbsp;<span class="op" id="7707395">!=</span>&nbsp;<span class="ident" id="7707398">nil</span>&nbsp;<span class="op" id="7707402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707406">t</span><span class="op" id="7707407">.</span><span class="ident" id="7707408">Fatalf</span><span class="op" id="7707414">(</span><span class="string" id="7707415">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7707437">,</span>&nbsp;<span class="ident" id="7707439">err</span><span class="op" id="7707442">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707448">if</span>&nbsp;<span class="ident" id="7707451">expected</span>&nbsp;<span class="op" id="7707460">:=</span>&nbsp;<span class="op" id="7707463">[</span><span class="op" id="7707464">]</span><span class="builtintype" id="7707465">byte</span><span class="op" id="7707469">(</span><span class="string" id="7707470">&#34;Kilt&#34;</span><span class="op" id="7707476">)</span><span class="op" id="7707477">;</span>&nbsp;<span class="op" id="7707479">!</span><span class="ident" id="7707480">bytes</span><span class="op" id="7707485">.</span><span class="ident" id="7707486">Equal</span><span class="op" id="7707491">(</span><span class="ident" id="7707492">buf</span><span class="op" id="7707495">,</span>&nbsp;<span class="ident" id="7707497">expected</span><span class="op" id="7707505">)</span>&nbsp;<span class="op" id="7707507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707511">t</span><span class="op" id="7707512">.</span><span class="ident" id="7707513">Errorf</span><span class="op" id="7707519">(</span><span class="string" id="7707520">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7707544">,</span>&nbsp;<span class="ident" id="7707546">buf</span><span class="op" id="7707549">,</span>&nbsp;<span class="ident" id="7707551">expected</span><span class="op" id="7707559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7707566">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707582">hdr</span><span class="op" id="7707585">,</span>&nbsp;<span class="ident" id="7707587">err</span>&nbsp;<span class="op" id="7707591">=</span>&nbsp;<span class="ident" id="7707593">tr</span><span class="op" id="7707595">.</span><span class="ident" id="7707596">Next</span><span class="op" id="7707600">(</span><span class="op" id="7707601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707604">if</span>&nbsp;<span class="ident" id="7707607">err</span>&nbsp;<span class="op" id="7707611">!=</span>&nbsp;<span class="ident" id="7707614">nil</span>&nbsp;<span class="op" id="7707618">||</span>&nbsp;<span class="ident" id="7707621">hdr</span>&nbsp;<span class="op" id="7707625">==</span>&nbsp;<span class="ident" id="7707628">nil</span>&nbsp;<span class="op" id="7707632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707636">t</span><span class="op" id="7707637">.</span><span class="ident" id="7707638">Fatalf</span><span class="op" id="7707644">(</span><span class="string" id="7707645">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7707673">,</span>&nbsp;<span class="ident" id="7707675">err</span><span class="op" id="7707678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707681">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707684">buf</span>&nbsp;<span class="op" id="7707688">=</span>&nbsp;<span class="builtinfunc" id="7707690">make</span><span class="op" id="7707694">(</span><span class="op" id="7707695">[</span><span class="op" id="7707696">]</span><span class="builtintype" id="7707697">byte</span><span class="op" id="7707701">,</span>&nbsp;<span class="num" id="7707703">6</span><span class="op" id="7707704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707707">if</span>&nbsp;<span class="ident" id="7707710">_</span><span class="op" id="7707711">,</span>&nbsp;<span class="ident" id="7707713">err</span>&nbsp;<span class="op" id="7707717">:=</span>&nbsp;<span class="ident" id="7707720">io</span><span class="op" id="7707722">.</span><span class="ident" id="7707723">ReadFull</span><span class="op" id="7707731">(</span><span class="ident" id="7707732">tr</span><span class="op" id="7707734">,</span>&nbsp;<span class="ident" id="7707736">buf</span><span class="op" id="7707739">)</span><span class="op" id="7707740">;</span>&nbsp;<span class="ident" id="7707742">err</span>&nbsp;<span class="op" id="7707746">!=</span>&nbsp;<span class="ident" id="7707749">nil</span>&nbsp;<span class="op" id="7707753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707757">t</span><span class="op" id="7707758">.</span><span class="ident" id="7707759">Fatalf</span><span class="op" id="7707765">(</span><span class="string" id="7707766">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7707788">,</span>&nbsp;<span class="ident" id="7707790">err</span><span class="op" id="7707793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707799">if</span>&nbsp;<span class="ident" id="7707802">expected</span>&nbsp;<span class="op" id="7707811">:=</span>&nbsp;<span class="op" id="7707814">[</span><span class="op" id="7707815">]</span><span class="builtintype" id="7707816">byte</span><span class="op" id="7707820">(</span><span class="string" id="7707821">&#34;Google&#34;</span><span class="op" id="7707829">)</span><span class="op" id="7707830">;</span>&nbsp;<span class="op" id="7707832">!</span><span class="ident" id="7707833">bytes</span><span class="op" id="7707838">.</span><span class="ident" id="7707839">Equal</span><span class="op" id="7707844">(</span><span class="ident" id="7707845">buf</span><span class="op" id="7707848">,</span>&nbsp;<span class="ident" id="7707850">expected</span><span class="op" id="7707858">)</span>&nbsp;<span class="op" id="7707860">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707864">t</span><span class="op" id="7707865">.</span><span class="ident" id="7707866">Errorf</span><span class="op" id="7707872">(</span><span class="string" id="7707873">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7707897">,</span>&nbsp;<span class="ident" id="7707899">buf</span><span class="op" id="7707902">,</span>&nbsp;<span class="ident" id="7707904">expected</span><span class="op" id="7707912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707915">}</span><br>
<span class="lineno"></span><span class="op" id="7707917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7707920">func</span>&nbsp;<span class="ident" id="7707925">TestIncrementalRead</span><span class="op" id="7707944">(</span><span class="ident" id="7707945">t</span>&nbsp;<span class="op" id="7707947">*</span><span class="ident" id="7707948">testing</span><span class="op" id="7707955">.</span><span class="ident" id="7707956">T</span><span class="op" id="7707957">)</span>&nbsp;<span class="op" id="7707959">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707962">test</span>&nbsp;<span class="op" id="7707967">:=</span>&nbsp;<span class="ident" id="7707970">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707982">f</span><span class="op" id="7707983">,</span>&nbsp;<span class="ident" id="7707985">err</span>&nbsp;<span class="op" id="7707989">:=</span>&nbsp;<span class="ident" id="7707992">os</span><span class="op" id="7707994">.</span><span class="ident" id="7707995">Open</span><span class="op" id="7707999">(</span><span class="ident" id="7708000">test</span><span class="op" id="7708004">.</span><span class="ident" id="7708005">file</span><span class="op" id="7708009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708012">if</span>&nbsp;<span class="ident" id="7708015">err</span>&nbsp;<span class="op" id="7708019">!=</span>&nbsp;<span class="ident" id="7708022">nil</span>&nbsp;<span class="op" id="7708026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708030">t</span><span class="op" id="7708031">.</span><span class="ident" id="7708032">Fatalf</span><span class="op" id="7708038">(</span><span class="string" id="7708039">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7708061">,</span>&nbsp;<span class="ident" id="7708063">err</span><span class="op" id="7708066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708069">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708072">defer</span>&nbsp;<span class="ident" id="7708078">f</span><span class="op" id="7708079">.</span><span class="ident" id="7708080">Close</span><span class="op" id="7708085">(</span><span class="op" id="7708086">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708090">tr</span>&nbsp;<span class="op" id="7708093">:=</span>&nbsp;<span class="ident" id="7708096">NewReader</span><span class="op" id="7708105">(</span><span class="ident" id="7708106">f</span><span class="op" id="7708107">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708111">headers</span>&nbsp;<span class="op" id="7708119">:=</span>&nbsp;<span class="ident" id="7708122">test</span><span class="op" id="7708126">.</span><span class="ident" id="7708127">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708136">cksums</span>&nbsp;<span class="op" id="7708143">:=</span>&nbsp;<span class="ident" id="7708146">test</span><span class="op" id="7708150">.</span><span class="ident" id="7708151">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708159">nread</span>&nbsp;<span class="op" id="7708165">:=</span>&nbsp;<span class="num" id="7708168">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7708172">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708196">for</span>&nbsp;<span class="op" id="7708200">;</span>&nbsp;<span class="op" id="7708202">;</span>&nbsp;<span class="ident" id="7708204">nread</span><span class="op" id="7708209">++</span>&nbsp;<span class="op" id="7708212">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708216">hdr</span><span class="op" id="7708219">,</span>&nbsp;<span class="ident" id="7708221">err</span>&nbsp;<span class="op" id="7708225">:=</span>&nbsp;<span class="ident" id="7708228">tr</span><span class="op" id="7708230">.</span><span class="ident" id="7708231">Next</span><span class="op" id="7708235">(</span><span class="op" id="7708236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708240">if</span>&nbsp;<span class="ident" id="7708243">hdr</span>&nbsp;<span class="op" id="7708247">==</span>&nbsp;<span class="ident" id="7708250">nil</span>&nbsp;<span class="op" id="7708254">||</span>&nbsp;<span class="ident" id="7708257">err</span>&nbsp;<span class="op" id="7708261">==</span>&nbsp;<span class="ident" id="7708264">io</span><span class="op" id="7708266">.</span><span class="ident" id="7708267">EOF</span>&nbsp;<span class="op" id="7708271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708276">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7708289">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708311">if</span>&nbsp;<span class="op" id="7708314">!</span><span class="ident" id="7708315">reflect</span><span class="op" id="7708322">.</span><span class="ident" id="7708323">DeepEqual</span><span class="op" id="7708332">(</span><span class="op" id="7708333">*</span><span class="ident" id="7708334">hdr</span><span class="op" id="7708337">,</span>&nbsp;<span class="op" id="7708339">*</span><span class="ident" id="7708340">headers</span><span class="op" id="7708347">[</span><span class="ident" id="7708348">nread</span><span class="op" id="7708353">]</span><span class="op" id="7708354">)</span>&nbsp;<span class="op" id="7708356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708361">t</span><span class="op" id="7708362">.</span><span class="ident" id="7708363">Errorf</span><span class="op" id="7708369">(</span><span class="string" id="7708370">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7708409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708415">*</span><span class="ident" id="7708416">hdr</span><span class="op" id="7708419">,</span>&nbsp;<span class="ident" id="7708421">headers</span><span class="op" id="7708428">[</span><span class="ident" id="7708429">nread</span><span class="op" id="7708434">]</span><span class="op" id="7708435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708439">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7708444">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7708490">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708520">h</span>&nbsp;<span class="op" id="7708522">:=</span>&nbsp;<span class="ident" id="7708525">md5</span><span class="op" id="7708528">.</span><span class="ident" id="7708529">New</span><span class="op" id="7708532">(</span><span class="op" id="7708533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708537">rdbuf</span>&nbsp;<span class="op" id="7708543">:=</span>&nbsp;<span class="builtinfunc" id="7708546">make</span><span class="op" id="7708550">(</span><span class="op" id="7708551">[</span><span class="op" id="7708552">]</span><span class="builtintype" id="7708553">uint8</span><span class="op" id="7708558">,</span>&nbsp;<span class="num" id="7708560">8</span><span class="op" id="7708561">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708565">for</span>&nbsp;<span class="op" id="7708569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708574">nr</span><span class="op" id="7708576">,</span>&nbsp;<span class="ident" id="7708578">err</span>&nbsp;<span class="op" id="7708582">:=</span>&nbsp;<span class="ident" id="7708585">tr</span><span class="op" id="7708587">.</span><span class="ident" id="7708588">Read</span><span class="op" id="7708592">(</span><span class="ident" id="7708593">rdbuf</span><span class="op" id="7708598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708603">if</span>&nbsp;<span class="ident" id="7708606">err</span>&nbsp;<span class="op" id="7708610">==</span>&nbsp;<span class="ident" id="7708613">io</span><span class="op" id="7708615">.</span><span class="ident" id="7708616">EOF</span>&nbsp;<span class="op" id="7708620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708626">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708635">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708640">if</span>&nbsp;<span class="ident" id="7708643">err</span>&nbsp;<span class="op" id="7708647">!=</span>&nbsp;<span class="ident" id="7708650">nil</span>&nbsp;<span class="op" id="7708654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708660">t</span><span class="op" id="7708661">.</span><span class="ident" id="7708662">Errorf</span><span class="op" id="7708668">(</span><span class="string" id="7708669">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7708698">,</span>&nbsp;<span class="ident" id="7708700">err</span><span class="op" id="7708703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708709">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708723">h</span><span class="op" id="7708724">.</span><span class="ident" id="7708725">Write</span><span class="op" id="7708730">(</span><span class="ident" id="7708731">rdbuf</span><span class="op" id="7708736">[</span><span class="num" id="7708737">0</span><span class="op" id="7708738">:</span><span class="ident" id="7708739">nr</span><span class="op" id="7708741">]</span><span class="op" id="7708742">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7708750">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708771">have</span>&nbsp;<span class="op" id="7708776">:=</span>&nbsp;<span class="ident" id="7708779">fmt</span><span class="op" id="7708782">.</span><span class="ident" id="7708783">Sprintf</span><span class="op" id="7708790">(</span><span class="string" id="7708791">&#34;%x&#34;</span><span class="op" id="7708795">,</span>&nbsp;<span class="ident" id="7708797">h</span><span class="op" id="7708798">.</span><span class="ident" id="7708799">Sum</span><span class="op" id="7708802">(</span><span class="ident" id="7708803">nil</span><span class="op" id="7708806">)</span><span class="op" id="7708807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708811">want</span>&nbsp;<span class="op" id="7708816">:=</span>&nbsp;<span class="ident" id="7708819">cksums</span><span class="op" id="7708825">[</span><span class="ident" id="7708826">nread</span><span class="op" id="7708831">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708835">if</span>&nbsp;<span class="ident" id="7708838">want</span>&nbsp;<span class="op" id="7708843">!=</span>&nbsp;<span class="ident" id="7708846">have</span>&nbsp;<span class="op" id="7708851">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708856">t</span><span class="op" id="7708857">.</span><span class="ident" id="7708858">Errorf</span><span class="op" id="7708864">(</span><span class="string" id="7708865">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7708911">,</span>&nbsp;<span class="ident" id="7708913">hdr</span><span class="op" id="7708916">.</span><span class="ident" id="7708917">Name</span><span class="op" id="7708921">,</span>&nbsp;<span class="ident" id="7708923">have</span><span class="op" id="7708927">,</span>&nbsp;<span class="ident" id="7708929">want</span><span class="op" id="7708933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708943">if</span>&nbsp;<span class="ident" id="7708946">nread</span>&nbsp;<span class="op" id="7708952">!=</span>&nbsp;<span class="builtinfunc" id="7708955">len</span><span class="op" id="7708958">(</span><span class="ident" id="7708959">headers</span><span class="op" id="7708966">)</span>&nbsp;<span class="op" id="7708968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708972">t</span><span class="op" id="7708973">.</span><span class="ident" id="7708974">Errorf</span><span class="op" id="7708980">(</span><span class="string" id="7708981">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7709037">,</span>&nbsp;<span class="builtinfunc" id="7709039">len</span><span class="op" id="7709042">(</span><span class="ident" id="7709043">headers</span><span class="op" id="7709050">)</span><span class="op" id="7709051">,</span>&nbsp;<span class="ident" id="7709053">nread</span><span class="op" id="7709058">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709061">}</span><br>
<span class="lineno"></span><span class="op" id="7709063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7709066">func</span>&nbsp;<span class="ident" id="7709071">TestNonSeekable</span><span class="op" id="7709086">(</span><span class="ident" id="7709087">t</span>&nbsp;<span class="op" id="7709089">*</span><span class="ident" id="7709090">testing</span><span class="op" id="7709097">.</span><span class="ident" id="7709098">T</span><span class="op" id="7709099">)</span>&nbsp;<span class="op" id="7709101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709104">test</span>&nbsp;<span class="op" id="7709109">:=</span>&nbsp;<span class="ident" id="7709112">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709124">f</span><span class="op" id="7709125">,</span>&nbsp;<span class="ident" id="7709127">err</span>&nbsp;<span class="op" id="7709131">:=</span>&nbsp;<span class="ident" id="7709134">os</span><span class="op" id="7709136">.</span><span class="ident" id="7709137">Open</span><span class="op" id="7709141">(</span><span class="ident" id="7709142">test</span><span class="op" id="7709146">.</span><span class="ident" id="7709147">file</span><span class="op" id="7709151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709154">if</span>&nbsp;<span class="ident" id="7709157">err</span>&nbsp;<span class="op" id="7709161">!=</span>&nbsp;<span class="ident" id="7709164">nil</span>&nbsp;<span class="op" id="7709168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709172">t</span><span class="op" id="7709173">.</span><span class="ident" id="7709174">Fatalf</span><span class="op" id="7709180">(</span><span class="string" id="7709181">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7709203">,</span>&nbsp;<span class="ident" id="7709205">err</span><span class="op" id="7709208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709214">defer</span>&nbsp;<span class="ident" id="7709220">f</span><span class="op" id="7709221">.</span><span class="ident" id="7709222">Close</span><span class="op" id="7709227">(</span><span class="op" id="7709228">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709232">type</span>&nbsp;<span class="ident" id="7709237">readerOnly</span>&nbsp;<span class="keyword" id="7709248">struct</span>&nbsp;<span class="op" id="7709255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709259">io</span><span class="op" id="7709261">.</span><span class="ident" id="7709262">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709273">tr</span>&nbsp;<span class="op" id="7709276">:=</span>&nbsp;<span class="ident" id="7709279">NewReader</span><span class="op" id="7709288">(</span><span class="ident" id="7709289">readerOnly</span><span class="op" id="7709299">{</span><span class="ident" id="7709300">f</span><span class="op" id="7709301">}</span><span class="op" id="7709302">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709305">nread</span>&nbsp;<span class="op" id="7709311">:=</span>&nbsp;<span class="num" id="7709314">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709318">for</span>&nbsp;<span class="op" id="7709322">;</span>&nbsp;<span class="op" id="7709324">;</span>&nbsp;<span class="ident" id="7709326">nread</span><span class="op" id="7709331">++</span>&nbsp;<span class="op" id="7709334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709338">_</span><span class="op" id="7709339">,</span>&nbsp;<span class="ident" id="7709341">err</span>&nbsp;<span class="op" id="7709345">:=</span>&nbsp;<span class="ident" id="7709348">tr</span><span class="op" id="7709350">.</span><span class="ident" id="7709351">Next</span><span class="op" id="7709355">(</span><span class="op" id="7709356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709360">if</span>&nbsp;<span class="ident" id="7709363">err</span>&nbsp;<span class="op" id="7709367">==</span>&nbsp;<span class="ident" id="7709370">io</span><span class="op" id="7709372">.</span><span class="ident" id="7709373">EOF</span>&nbsp;<span class="op" id="7709377">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709382">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709394">if</span>&nbsp;<span class="ident" id="7709397">err</span>&nbsp;<span class="op" id="7709401">!=</span>&nbsp;<span class="ident" id="7709404">nil</span>&nbsp;<span class="op" id="7709408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709413">t</span><span class="op" id="7709414">.</span><span class="ident" id="7709415">Fatalf</span><span class="op" id="7709421">(</span><span class="string" id="7709422">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7709444">,</span>&nbsp;<span class="ident" id="7709446">err</span><span class="op" id="7709449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709453">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709460">if</span>&nbsp;<span class="ident" id="7709463">nread</span>&nbsp;<span class="op" id="7709469">!=</span>&nbsp;<span class="builtinfunc" id="7709472">len</span><span class="op" id="7709475">(</span><span class="ident" id="7709476">test</span><span class="op" id="7709480">.</span><span class="ident" id="7709481">headers</span><span class="op" id="7709488">)</span>&nbsp;<span class="op" id="7709490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709494">t</span><span class="op" id="7709495">.</span><span class="ident" id="7709496">Errorf</span><span class="op" id="7709502">(</span><span class="string" id="7709503">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7709559">,</span>&nbsp;<span class="builtinfunc" id="7709561">len</span><span class="op" id="7709564">(</span><span class="ident" id="7709565">test</span><span class="op" id="7709569">.</span><span class="ident" id="7709570">headers</span><span class="op" id="7709577">)</span><span class="op" id="7709578">,</span>&nbsp;<span class="ident" id="7709580">nread</span><span class="op" id="7709585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709588">}</span><br>
<span class="lineno">440</span><span class="op" id="7709590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7709593">func</span>&nbsp;<span class="ident" id="7709598">TestParsePAXHeader</span><span class="op" id="7709616">(</span><span class="ident" id="7709617">t</span>&nbsp;<span class="op" id="7709619">*</span><span class="ident" id="7709620">testing</span><span class="op" id="7709627">.</span><span class="ident" id="7709628">T</span><span class="op" id="7709629">)</span>&nbsp;<span class="op" id="7709631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709634">paxTests</span>&nbsp;<span class="op" id="7709643">:=</span>&nbsp;<span class="op" id="7709646">[</span><span class="op" id="7709647">]</span><span class="op" id="7709648">[</span><span class="num" id="7709649">3</span><span class="op" id="7709650">]</span><span class="builtintype" id="7709651">string</span><span class="op" id="7709657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709661">{</span><span class="string" id="7709662">&#34;a&#34;</span><span class="op" id="7709665">,</span>&nbsp;<span class="string" id="7709667">&#34;a=name&#34;</span><span class="op" id="7709675">,</span>&nbsp;<span class="string" id="7709677">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="7709690">}</span><span class="op" id="7709691">,</span>&nbsp;<span class="comment" id="7709693">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709746">{</span><span class="string" id="7709747">&#34;a&#34;</span><span class="op" id="7709750">,</span>&nbsp;<span class="string" id="7709752">&#34;a=name&#34;</span><span class="op" id="7709760">,</span>&nbsp;<span class="string" id="7709762">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="7709774">}</span><span class="op" id="7709775">,</span>&nbsp;&nbsp;<span class="comment" id="7709778">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709830">{</span><span class="string" id="7709831">&#34;mtime&#34;</span><span class="op" id="7709838">,</span>&nbsp;<span class="string" id="7709840">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="7709868">,</span>&nbsp;<span class="string" id="7709870">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="7709903">}</span><span class="op" id="7709904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709907">for</span>&nbsp;<span class="ident" id="7709911">_</span><span class="op" id="7709912">,</span>&nbsp;<span class="ident" id="7709914">test</span>&nbsp;<span class="op" id="7709919">:=</span>&nbsp;<span class="keyword" id="7709922">range</span>&nbsp;<span class="ident" id="7709928">paxTests</span>&nbsp;<span class="op" id="7709937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709941">key</span><span class="op" id="7709944">,</span>&nbsp;<span class="ident" id="7709946">expected</span><span class="op" id="7709954">,</span>&nbsp;<span class="ident" id="7709956">raw</span>&nbsp;<span class="op" id="7709960">:=</span>&nbsp;<span class="ident" id="7709963">test</span><span class="op" id="7709967">[</span><span class="num" id="7709968">0</span><span class="op" id="7709969">]</span><span class="op" id="7709970">,</span>&nbsp;<span class="ident" id="7709972">test</span><span class="op" id="7709976">[</span><span class="num" id="7709977">1</span><span class="op" id="7709978">]</span><span class="op" id="7709979">,</span>&nbsp;<span class="ident" id="7709981">test</span><span class="op" id="7709985">[</span><span class="num" id="7709986">2</span><span class="op" id="7709987">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709991">reader</span>&nbsp;<span class="op" id="7709998">:=</span>&nbsp;<span class="ident" id="7710001">bytes</span><span class="op" id="7710006">.</span><span class="ident" id="7710007">NewReader</span><span class="op" id="7710016">(</span><span class="op" id="7710017">[</span><span class="op" id="7710018">]</span><span class="builtintype" id="7710019">byte</span><span class="op" id="7710023">(</span><span class="ident" id="7710024">raw</span><span class="op" id="7710027">)</span><span class="op" id="7710028">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710032">headers</span><span class="op" id="7710039">,</span>&nbsp;<span class="ident" id="7710041">err</span>&nbsp;<span class="op" id="7710045">:=</span>&nbsp;<span class="ident" id="7710048">parsePAX</span><span class="op" id="7710056">(</span><span class="ident" id="7710057">reader</span><span class="op" id="7710063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710067">if</span>&nbsp;<span class="ident" id="7710070">err</span>&nbsp;<span class="op" id="7710074">!=</span>&nbsp;<span class="ident" id="7710077">nil</span>&nbsp;<span class="op" id="7710081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710086">t</span><span class="op" id="7710087">.</span><span class="ident" id="7710088">Errorf</span><span class="op" id="7710094">(</span><span class="string" id="7710095">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="7710143">,</span>&nbsp;<span class="ident" id="7710145">err</span><span class="op" id="7710148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710153">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710164">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710168">if</span>&nbsp;<span class="ident" id="7710171">strings</span><span class="op" id="7710178">.</span><span class="ident" id="7710179">EqualFold</span><span class="op" id="7710188">(</span><span class="ident" id="7710189">headers</span><span class="op" id="7710196">[</span><span class="ident" id="7710197">key</span><span class="op" id="7710200">]</span><span class="op" id="7710201">,</span>&nbsp;<span class="ident" id="7710203">expected</span><span class="op" id="7710211">)</span>&nbsp;<span class="op" id="7710213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710218">t</span><span class="op" id="7710219">.</span><span class="ident" id="7710220">Errorf</span><span class="op" id="7710226">(</span><span class="string" id="7710227">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="7710279">,</span>&nbsp;<span class="ident" id="7710281">headers</span><span class="op" id="7710288">[</span><span class="ident" id="7710289">key</span><span class="op" id="7710292">]</span><span class="op" id="7710293">,</span>&nbsp;<span class="ident" id="7710295">expected</span><span class="op" id="7710303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710308">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710323">trailer</span>&nbsp;<span class="op" id="7710331">:=</span>&nbsp;<span class="builtinfunc" id="7710334">make</span><span class="op" id="7710338">(</span><span class="op" id="7710339">[</span><span class="op" id="7710340">]</span><span class="builtintype" id="7710341">byte</span><span class="op" id="7710345">,</span>&nbsp;<span class="num" id="7710347">100</span><span class="op" id="7710350">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710354">n</span><span class="op" id="7710355">,</span>&nbsp;<span class="ident" id="7710357">err</span>&nbsp;<span class="op" id="7710361">:=</span>&nbsp;<span class="ident" id="7710364">reader</span><span class="op" id="7710370">.</span><span class="ident" id="7710371">Read</span><span class="op" id="7710375">(</span><span class="ident" id="7710376">trailer</span><span class="op" id="7710383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710387">if</span>&nbsp;<span class="ident" id="7710390">err</span>&nbsp;<span class="op" id="7710394">!=</span>&nbsp;<span class="ident" id="7710397">io</span><span class="op" id="7710399">.</span><span class="ident" id="7710400">EOF</span>&nbsp;<span class="op" id="7710404">||</span>&nbsp;<span class="ident" id="7710407">n</span>&nbsp;<span class="op" id="7710409">!=</span>&nbsp;<span class="num" id="7710412">0</span>&nbsp;<span class="op" id="7710414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710419">t</span><span class="op" id="7710420">.</span><span class="ident" id="7710421">Error</span><span class="op" id="7710426">(</span><span class="string" id="7710427">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="7710451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710458">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710461">badHeader</span>&nbsp;<span class="op" id="7710471">:=</span>&nbsp;<span class="ident" id="7710474">bytes</span><span class="op" id="7710479">.</span><span class="ident" id="7710480">NewReader</span><span class="op" id="7710489">(</span><span class="op" id="7710490">[</span><span class="op" id="7710491">]</span><span class="builtintype" id="7710492">byte</span><span class="op" id="7710496">(</span><span class="string" id="7710497">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="7710513">)</span><span class="op" id="7710514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710517">if</span>&nbsp;<span class="ident" id="7710520">_</span><span class="op" id="7710521">,</span>&nbsp;<span class="ident" id="7710523">err</span>&nbsp;<span class="op" id="7710527">:=</span>&nbsp;<span class="ident" id="7710530">parsePAX</span><span class="op" id="7710538">(</span><span class="ident" id="7710539">badHeader</span><span class="op" id="7710548">)</span><span class="op" id="7710549">;</span>&nbsp;<span class="ident" id="7710551">err</span>&nbsp;<span class="op" id="7710555">!=</span>&nbsp;<span class="ident" id="7710558">ErrHeader</span>&nbsp;<span class="op" id="7710568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710572">t</span><span class="op" id="7710573">.</span><span class="ident" id="7710574">Fatal</span><span class="op" id="7710579">(</span><span class="string" id="7710580">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="7710624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710627">}</span><br>
<span class="lineno"></span><span class="op" id="7710629">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="7710632">func</span>&nbsp;<span class="ident" id="7710637">TestParsePAXTime</span><span class="op" id="7710653">(</span><span class="ident" id="7710654">t</span>&nbsp;<span class="op" id="7710656">*</span><span class="ident" id="7710657">testing</span><span class="op" id="7710664">.</span><span class="ident" id="7710665">T</span><span class="op" id="7710666">)</span>&nbsp;<span class="op" id="7710668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7710671">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710702">timestamps</span>&nbsp;<span class="op" id="7710713">:=</span>&nbsp;<span class="keyword" id="7710716">map</span><span class="op" id="7710719">[</span><span class="builtintype" id="7710720">string</span><span class="op" id="7710726">]</span><span class="ident" id="7710727">time</span><span class="op" id="7710731">.</span><span class="ident" id="7710732">Time</span><span class="op" id="7710736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7710740">&#34;1350244992.023960108&#34;</span><span class="op" id="7710762">:</span>&nbsp;&nbsp;<span class="ident" id="7710765">time</span><span class="op" id="7710769">.</span><span class="ident" id="7710770">Unix</span><span class="op" id="7710774">(</span><span class="num" id="7710775">1350244992</span><span class="op" id="7710785">,</span>&nbsp;<span class="num" id="7710787">23960108</span><span class="op" id="7710795">)</span><span class="op" id="7710796">,</span>&nbsp;<span class="comment" id="7710798">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7710819">&#34;1350244992.02396010&#34;</span><span class="op" id="7710840">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7710844">time</span><span class="op" id="7710848">.</span><span class="ident" id="7710849">Unix</span><span class="op" id="7710853">(</span><span class="num" id="7710854">1350244992</span><span class="op" id="7710864">,</span>&nbsp;<span class="num" id="7710866">23960100</span><span class="op" id="7710874">)</span><span class="op" id="7710875">,</span>&nbsp;<span class="comment" id="7710877">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7710904">&#34;1350244992.0239601089&#34;</span><span class="op" id="7710927">:</span>&nbsp;<span class="ident" id="7710929">time</span><span class="op" id="7710933">.</span><span class="ident" id="7710934">Unix</span><span class="op" id="7710938">(</span><span class="num" id="7710939">1350244992</span><span class="op" id="7710949">,</span>&nbsp;<span class="num" id="7710951">23960108</span><span class="op" id="7710959">)</span><span class="op" id="7710960">,</span>&nbsp;<span class="comment" id="7710962">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7710990">&#34;1350244992&#34;</span><span class="op" id="7711002">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711015">time</span><span class="op" id="7711019">.</span><span class="ident" id="7711020">Unix</span><span class="op" id="7711024">(</span><span class="num" id="7711025">1350244992</span><span class="op" id="7711035">,</span>&nbsp;<span class="num" id="7711037">0</span><span class="op" id="7711038">)</span><span class="op" id="7711039">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711048">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711075">for</span>&nbsp;<span class="ident" id="7711079">input</span><span class="op" id="7711084">,</span>&nbsp;<span class="ident" id="7711086">expected</span>&nbsp;<span class="op" id="7711095">:=</span>&nbsp;<span class="keyword" id="7711098">range</span>&nbsp;<span class="ident" id="7711104">timestamps</span>&nbsp;<span class="op" id="7711115">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711119">ts</span><span class="op" id="7711121">,</span>&nbsp;<span class="ident" id="7711123">err</span>&nbsp;<span class="op" id="7711127">:=</span>&nbsp;<span class="ident" id="7711130">parsePAXTime</span><span class="op" id="7711142">(</span><span class="ident" id="7711143">input</span><span class="op" id="7711148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711152">if</span>&nbsp;<span class="ident" id="7711155">err</span>&nbsp;<span class="op" id="7711159">!=</span>&nbsp;<span class="ident" id="7711162">nil</span>&nbsp;<span class="op" id="7711166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711171">t</span><span class="op" id="7711172">.</span><span class="ident" id="7711173">Fatal</span><span class="op" id="7711178">(</span><span class="ident" id="7711179">err</span><span class="op" id="7711182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711190">if</span>&nbsp;<span class="op" id="7711193">!</span><span class="ident" id="7711194">ts</span><span class="op" id="7711196">.</span><span class="ident" id="7711197">Equal</span><span class="op" id="7711202">(</span><span class="ident" id="7711203">expected</span><span class="op" id="7711211">)</span>&nbsp;<span class="op" id="7711213">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711218">t</span><span class="op" id="7711219">.</span><span class="ident" id="7711220">Fatalf</span><span class="op" id="7711226">(</span><span class="string" id="7711227">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="7711255">,</span>&nbsp;<span class="ident" id="7711257">ts</span><span class="op" id="7711259">,</span>&nbsp;<span class="ident" id="7711261">expected</span><span class="op" id="7711269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711276">}</span><br>
<span class="lineno"></span><span class="op" id="7711278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="7711281">func</span>&nbsp;<span class="ident" id="7711286">TestMergePAX</span><span class="op" id="7711298">(</span><span class="ident" id="7711299">t</span>&nbsp;<span class="op" id="7711301">*</span><span class="ident" id="7711302">testing</span><span class="op" id="7711309">.</span><span class="ident" id="7711310">T</span><span class="op" id="7711311">)</span>&nbsp;<span class="op" id="7711313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711316">hdr</span>&nbsp;<span class="op" id="7711320">:=</span>&nbsp;<span class="builtinfunc" id="7711323">new</span><span class="op" id="7711326">(</span><span class="ident" id="7711327">Header</span><span class="op" id="7711333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7711336">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711386">headers</span>&nbsp;<span class="op" id="7711394">:=</span>&nbsp;<span class="keyword" id="7711397">map</span><span class="op" id="7711400">[</span><span class="builtintype" id="7711401">string</span><span class="op" id="7711407">]</span><span class="builtintype" id="7711408">string</span><span class="op" id="7711414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7711418">&#34;path&#34;</span><span class="op" id="7711424">:</span>&nbsp;&nbsp;<span class="string" id="7711427">&#34;a/b/c&#34;</span><span class="op" id="7711434">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7711438">&#34;uid&#34;</span><span class="op" id="7711443">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7711447">&#34;1000&#34;</span><span class="op" id="7711453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7711457">&#34;mtime&#34;</span><span class="op" id="7711464">:</span>&nbsp;<span class="string" id="7711466">&#34;1350244992.023960108&#34;</span><span class="op" id="7711488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711494">err</span>&nbsp;<span class="op" id="7711498">:=</span>&nbsp;<span class="ident" id="7711501">mergePAX</span><span class="op" id="7711509">(</span><span class="ident" id="7711510">hdr</span><span class="op" id="7711513">,</span>&nbsp;<span class="ident" id="7711515">headers</span><span class="op" id="7711522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711525">if</span>&nbsp;<span class="ident" id="7711528">err</span>&nbsp;<span class="op" id="7711532">!=</span>&nbsp;<span class="ident" id="7711535">nil</span>&nbsp;<span class="op" id="7711539">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711543">t</span><span class="op" id="7711544">.</span><span class="ident" id="7711545">Fatal</span><span class="op" id="7711550">(</span><span class="ident" id="7711551">err</span><span class="op" id="7711554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711560">want</span>&nbsp;<span class="op" id="7711565">:=</span>&nbsp;<span class="op" id="7711568">&amp;</span><span class="ident" id="7711569">Header</span><span class="op" id="7711575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711579">Name</span><span class="op" id="7711583">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7711588">&#34;a/b/c&#34;</span><span class="op" id="7711595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711599">Uid</span><span class="op" id="7711602">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7711608">1000</span><span class="op" id="7711612">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711616">ModTime</span><span class="op" id="7711623">:</span>&nbsp;<span class="ident" id="7711625">time</span><span class="op" id="7711629">.</span><span class="ident" id="7711630">Unix</span><span class="op" id="7711634">(</span><span class="num" id="7711635">1350244992</span><span class="op" id="7711645">,</span>&nbsp;<span class="num" id="7711647">23960108</span><span class="op" id="7711655">)</span><span class="op" id="7711656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711662">if</span>&nbsp;<span class="op" id="7711665">!</span><span class="ident" id="7711666">reflect</span><span class="op" id="7711673">.</span><span class="ident" id="7711674">DeepEqual</span><span class="op" id="7711683">(</span><span class="ident" id="7711684">hdr</span><span class="op" id="7711687">,</span>&nbsp;<span class="ident" id="7711689">want</span><span class="op" id="7711693">)</span>&nbsp;<span class="op" id="7711695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711699">t</span><span class="op" id="7711700">.</span><span class="ident" id="7711701">Errorf</span><span class="op" id="7711707">(</span><span class="string" id="7711708">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7711744">,</span>&nbsp;<span class="ident" id="7711746">hdr</span><span class="op" id="7711749">,</span>&nbsp;<span class="ident" id="7711751">want</span><span class="op" id="7711755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711758">}</span><br>
<span class="lineno">510</span><span class="op" id="7711760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7711763">func</span>&nbsp;<span class="ident" id="7711768">TestSparseEndToEnd</span><span class="op" id="7711786">(</span><span class="ident" id="7711787">t</span>&nbsp;<span class="op" id="7711789">*</span><span class="ident" id="7711790">testing</span><span class="op" id="7711797">.</span><span class="ident" id="7711798">T</span><span class="op" id="7711799">)</span>&nbsp;<span class="op" id="7711801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711804">test</span>&nbsp;<span class="op" id="7711809">:=</span>&nbsp;<span class="ident" id="7711812">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711827">f</span><span class="op" id="7711828">,</span>&nbsp;<span class="ident" id="7711830">err</span>&nbsp;<span class="op" id="7711834">:=</span>&nbsp;<span class="ident" id="7711837">os</span><span class="op" id="7711839">.</span><span class="ident" id="7711840">Open</span><span class="op" id="7711844">(</span><span class="ident" id="7711845">test</span><span class="op" id="7711849">.</span><span class="ident" id="7711850">file</span><span class="op" id="7711854">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711857">if</span>&nbsp;<span class="ident" id="7711860">err</span>&nbsp;<span class="op" id="7711864">!=</span>&nbsp;<span class="ident" id="7711867">nil</span>&nbsp;<span class="op" id="7711871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711875">t</span><span class="op" id="7711876">.</span><span class="ident" id="7711877">Fatalf</span><span class="op" id="7711883">(</span><span class="string" id="7711884">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7711906">,</span>&nbsp;<span class="ident" id="7711908">err</span><span class="op" id="7711911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711917">defer</span>&nbsp;<span class="ident" id="7711923">f</span><span class="op" id="7711924">.</span><span class="ident" id="7711925">Close</span><span class="op" id="7711930">(</span><span class="op" id="7711931">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711935">tr</span>&nbsp;<span class="op" id="7711938">:=</span>&nbsp;<span class="ident" id="7711941">NewReader</span><span class="op" id="7711950">(</span><span class="ident" id="7711951">f</span><span class="op" id="7711952">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711956">headers</span>&nbsp;<span class="op" id="7711964">:=</span>&nbsp;<span class="ident" id="7711967">test</span><span class="op" id="7711971">.</span><span class="ident" id="7711972">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711981">cksums</span>&nbsp;<span class="op" id="7711988">:=</span>&nbsp;<span class="ident" id="7711991">test</span><span class="op" id="7711995">.</span><span class="ident" id="7711996">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712004">nread</span>&nbsp;<span class="op" id="7712010">:=</span>&nbsp;<span class="num" id="7712013">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7712017">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712041">for</span>&nbsp;<span class="op" id="7712045">;</span>&nbsp;<span class="op" id="7712047">;</span>&nbsp;<span class="ident" id="7712049">nread</span><span class="op" id="7712054">++</span>&nbsp;<span class="op" id="7712057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712061">hdr</span><span class="op" id="7712064">,</span>&nbsp;<span class="ident" id="7712066">err</span>&nbsp;<span class="op" id="7712070">:=</span>&nbsp;<span class="ident" id="7712073">tr</span><span class="op" id="7712075">.</span><span class="ident" id="7712076">Next</span><span class="op" id="7712080">(</span><span class="op" id="7712081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712085">if</span>&nbsp;<span class="ident" id="7712088">hdr</span>&nbsp;<span class="op" id="7712092">==</span>&nbsp;<span class="ident" id="7712095">nil</span>&nbsp;<span class="op" id="7712099">||</span>&nbsp;<span class="ident" id="7712102">err</span>&nbsp;<span class="op" id="7712106">==</span>&nbsp;<span class="ident" id="7712109">io</span><span class="op" id="7712111">.</span><span class="ident" id="7712112">EOF</span>&nbsp;<span class="op" id="7712116">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712121">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7712134">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712156">if</span>&nbsp;<span class="op" id="7712159">!</span><span class="ident" id="7712160">reflect</span><span class="op" id="7712167">.</span><span class="ident" id="7712168">DeepEqual</span><span class="op" id="7712177">(</span><span class="op" id="7712178">*</span><span class="ident" id="7712179">hdr</span><span class="op" id="7712182">,</span>&nbsp;<span class="op" id="7712184">*</span><span class="ident" id="7712185">headers</span><span class="op" id="7712192">[</span><span class="ident" id="7712193">nread</span><span class="op" id="7712198">]</span><span class="op" id="7712199">)</span>&nbsp;<span class="op" id="7712201">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712206">t</span><span class="op" id="7712207">.</span><span class="ident" id="7712208">Errorf</span><span class="op" id="7712214">(</span><span class="string" id="7712215">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7712254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712260">*</span><span class="ident" id="7712261">hdr</span><span class="op" id="7712264">,</span>&nbsp;<span class="ident" id="7712266">headers</span><span class="op" id="7712273">[</span><span class="ident" id="7712274">nread</span><span class="op" id="7712279">]</span><span class="op" id="7712280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7712289">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712326">h</span>&nbsp;<span class="op" id="7712328">:=</span>&nbsp;<span class="ident" id="7712331">md5</span><span class="op" id="7712334">.</span><span class="ident" id="7712335">New</span><span class="op" id="7712338">(</span><span class="op" id="7712339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712343">_</span><span class="op" id="7712344">,</span>&nbsp;<span class="ident" id="7712346">err</span>&nbsp;<span class="op" id="7712350">=</span>&nbsp;<span class="ident" id="7712352">io</span><span class="op" id="7712354">.</span><span class="ident" id="7712355">Copy</span><span class="op" id="7712359">(</span><span class="ident" id="7712360">h</span><span class="op" id="7712361">,</span>&nbsp;<span class="ident" id="7712363">tr</span><span class="op" id="7712365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712369">if</span>&nbsp;<span class="ident" id="7712372">err</span>&nbsp;<span class="op" id="7712376">!=</span>&nbsp;<span class="ident" id="7712379">nil</span>&nbsp;<span class="op" id="7712383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712388">t</span><span class="op" id="7712389">.</span><span class="ident" id="7712390">Fatalf</span><span class="op" id="7712396">(</span><span class="string" id="7712397">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7712419">,</span>&nbsp;<span class="ident" id="7712421">err</span><span class="op" id="7712424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712428">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7712433">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712454">have</span>&nbsp;<span class="op" id="7712459">:=</span>&nbsp;<span class="ident" id="7712462">fmt</span><span class="op" id="7712465">.</span><span class="ident" id="7712466">Sprintf</span><span class="op" id="7712473">(</span><span class="string" id="7712474">&#34;%x&#34;</span><span class="op" id="7712478">,</span>&nbsp;<span class="ident" id="7712480">h</span><span class="op" id="7712481">.</span><span class="ident" id="7712482">Sum</span><span class="op" id="7712485">(</span><span class="ident" id="7712486">nil</span><span class="op" id="7712489">)</span><span class="op" id="7712490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712494">want</span>&nbsp;<span class="op" id="7712499">:=</span>&nbsp;<span class="ident" id="7712502">cksums</span><span class="op" id="7712508">[</span><span class="ident" id="7712509">nread</span><span class="op" id="7712514">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712518">if</span>&nbsp;<span class="ident" id="7712521">want</span>&nbsp;<span class="op" id="7712526">!=</span>&nbsp;<span class="ident" id="7712529">have</span>&nbsp;<span class="op" id="7712534">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712539">t</span><span class="op" id="7712540">.</span><span class="ident" id="7712541">Errorf</span><span class="op" id="7712547">(</span><span class="string" id="7712548">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7712594">,</span>&nbsp;<span class="ident" id="7712596">hdr</span><span class="op" id="7712599">.</span><span class="ident" id="7712600">Name</span><span class="op" id="7712604">,</span>&nbsp;<span class="ident" id="7712606">have</span><span class="op" id="7712610">,</span>&nbsp;<span class="ident" id="7712612">want</span><span class="op" id="7712616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712626">if</span>&nbsp;<span class="ident" id="7712629">nread</span>&nbsp;<span class="op" id="7712635">!=</span>&nbsp;<span class="builtinfunc" id="7712638">len</span><span class="op" id="7712641">(</span><span class="ident" id="7712642">headers</span><span class="op" id="7712649">)</span>&nbsp;<span class="op" id="7712651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712655">t</span><span class="op" id="7712656">.</span><span class="ident" id="7712657">Errorf</span><span class="op" id="7712663">(</span><span class="string" id="7712664">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7712720">,</span>&nbsp;<span class="builtinfunc" id="7712722">len</span><span class="op" id="7712725">(</span><span class="ident" id="7712726">headers</span><span class="op" id="7712733">)</span><span class="op" id="7712734">,</span>&nbsp;<span class="ident" id="7712736">nread</span><span class="op" id="7712741">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712744">}</span><br>
<span class="lineno"></span><span class="op" id="7712746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7712749">type</span>&nbsp;<span class="ident" id="7712754">sparseFileReadTest</span>&nbsp;<span class="keyword" id="7712773">struct</span>&nbsp;<span class="op" id="7712780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712783">sparseData</span>&nbsp;<span class="op" id="7712794">[</span><span class="op" id="7712795">]</span><span class="builtintype" id="7712796">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712802">sparseMap</span>&nbsp;&nbsp;<span class="op" id="7712813">[</span><span class="op" id="7712814">]</span><span class="ident" id="7712815">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712828">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7712839">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712846">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7712857">[</span><span class="op" id="7712858">]</span><span class="builtintype" id="7712859">byte</span><br>
<span class="lineno"></span><span class="op" id="7712864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7712867">var</span>&nbsp;<span class="ident" id="7712871">sparseFileReadTests</span>&nbsp;<span class="op" id="7712891">=</span>&nbsp;<span class="op" id="7712893">[</span><span class="op" id="7712894">]</span><span class="ident" id="7712895">sparseFileReadTest</span><span class="op" id="7712913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712920">sparseData</span><span class="op" id="7712930">:</span>&nbsp;<span class="op" id="7712932">[</span><span class="op" id="7712933">]</span><span class="builtintype" id="7712934">byte</span><span class="op" id="7712938">(</span><span class="string" id="7712939">&#34;abcde&#34;</span><span class="op" id="7712946">)</span><span class="op" id="7712947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712951">sparseMap</span><span class="op" id="7712960">:</span>&nbsp;<span class="op" id="7712962">[</span><span class="op" id="7712963">]</span><span class="ident" id="7712964">sparseEntry</span><span class="op" id="7712975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712980">{</span><span class="ident" id="7712981">offset</span><span class="op" id="7712987">:</span>&nbsp;<span class="num" id="7712989">0</span><span class="op" id="7712990">,</span>&nbsp;<span class="ident" id="7712992">numBytes</span><span class="op" id="7713000">:</span>&nbsp;<span class="num" id="7713002">2</span><span class="op" id="7713003">}</span><span class="op" id="7713004">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713009">{</span><span class="ident" id="7713010">offset</span><span class="op" id="7713016">:</span>&nbsp;<span class="num" id="7713018">5</span><span class="op" id="7713019">,</span>&nbsp;<span class="ident" id="7713021">numBytes</span><span class="op" id="7713029">:</span>&nbsp;<span class="num" id="7713031">3</span><span class="op" id="7713032">}</span><span class="op" id="7713033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713037">}</span><span class="op" id="7713038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713042">realSize</span><span class="op" id="7713050">:</span>&nbsp;<span class="num" id="7713052">8</span><span class="op" id="7713053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713057">expected</span><span class="op" id="7713065">:</span>&nbsp;<span class="op" id="7713067">[</span><span class="op" id="7713068">]</span><span class="builtintype" id="7713069">byte</span><span class="op" id="7713073">(</span><span class="string" id="7713074">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="7713093">)</span><span class="op" id="7713094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713097">}</span><span class="op" id="7713098">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713105">sparseData</span><span class="op" id="7713115">:</span>&nbsp;<span class="op" id="7713117">[</span><span class="op" id="7713118">]</span><span class="builtintype" id="7713119">byte</span><span class="op" id="7713123">(</span><span class="string" id="7713124">&#34;abcde&#34;</span><span class="op" id="7713131">)</span><span class="op" id="7713132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713136">sparseMap</span><span class="op" id="7713145">:</span>&nbsp;<span class="op" id="7713147">[</span><span class="op" id="7713148">]</span><span class="ident" id="7713149">sparseEntry</span><span class="op" id="7713160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713165">{</span><span class="ident" id="7713166">offset</span><span class="op" id="7713172">:</span>&nbsp;<span class="num" id="7713174">0</span><span class="op" id="7713175">,</span>&nbsp;<span class="ident" id="7713177">numBytes</span><span class="op" id="7713185">:</span>&nbsp;<span class="num" id="7713187">2</span><span class="op" id="7713188">}</span><span class="op" id="7713189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713194">{</span><span class="ident" id="7713195">offset</span><span class="op" id="7713201">:</span>&nbsp;<span class="num" id="7713203">5</span><span class="op" id="7713204">,</span>&nbsp;<span class="ident" id="7713206">numBytes</span><span class="op" id="7713214">:</span>&nbsp;<span class="num" id="7713216">3</span><span class="op" id="7713217">}</span><span class="op" id="7713218">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713222">}</span><span class="op" id="7713223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713227">realSize</span><span class="op" id="7713235">:</span>&nbsp;<span class="num" id="7713237">10</span><span class="op" id="7713239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713243">expected</span><span class="op" id="7713251">:</span>&nbsp;<span class="op" id="7713253">[</span><span class="op" id="7713254">]</span><span class="builtintype" id="7713255">byte</span><span class="op" id="7713259">(</span><span class="string" id="7713260">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="7713287">)</span><span class="op" id="7713288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713291">}</span><span class="op" id="7713292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713295">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713299">sparseData</span><span class="op" id="7713309">:</span>&nbsp;<span class="op" id="7713311">[</span><span class="op" id="7713312">]</span><span class="builtintype" id="7713313">byte</span><span class="op" id="7713317">(</span><span class="string" id="7713318">&#34;abcde&#34;</span><span class="op" id="7713325">)</span><span class="op" id="7713326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713330">sparseMap</span><span class="op" id="7713339">:</span>&nbsp;<span class="op" id="7713341">[</span><span class="op" id="7713342">]</span><span class="ident" id="7713343">sparseEntry</span><span class="op" id="7713354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713359">{</span><span class="ident" id="7713360">offset</span><span class="op" id="7713366">:</span>&nbsp;<span class="num" id="7713368">1</span><span class="op" id="7713369">,</span>&nbsp;<span class="ident" id="7713371">numBytes</span><span class="op" id="7713379">:</span>&nbsp;<span class="num" id="7713381">3</span><span class="op" id="7713382">}</span><span class="op" id="7713383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713388">{</span><span class="ident" id="7713389">offset</span><span class="op" id="7713395">:</span>&nbsp;<span class="num" id="7713397">6</span><span class="op" id="7713398">,</span>&nbsp;<span class="ident" id="7713400">numBytes</span><span class="op" id="7713408">:</span>&nbsp;<span class="num" id="7713410">2</span><span class="op" id="7713411">}</span><span class="op" id="7713412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713416">}</span><span class="op" id="7713417">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713421">realSize</span><span class="op" id="7713429">:</span>&nbsp;<span class="num" id="7713431">8</span><span class="op" id="7713432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713436">expected</span><span class="op" id="7713444">:</span>&nbsp;<span class="op" id="7713446">[</span><span class="op" id="7713447">]</span><span class="builtintype" id="7713448">byte</span><span class="op" id="7713452">(</span><span class="string" id="7713453">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="7713472">)</span><span class="op" id="7713473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713476">}</span><span class="op" id="7713477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713484">sparseData</span><span class="op" id="7713494">:</span>&nbsp;<span class="op" id="7713496">[</span><span class="op" id="7713497">]</span><span class="builtintype" id="7713498">byte</span><span class="op" id="7713502">(</span><span class="string" id="7713503">&#34;abcde&#34;</span><span class="op" id="7713510">)</span><span class="op" id="7713511">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713515">sparseMap</span><span class="op" id="7713524">:</span>&nbsp;<span class="op" id="7713526">[</span><span class="op" id="7713527">]</span><span class="ident" id="7713528">sparseEntry</span><span class="op" id="7713539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713544">{</span><span class="ident" id="7713545">offset</span><span class="op" id="7713551">:</span>&nbsp;<span class="num" id="7713553">1</span><span class="op" id="7713554">,</span>&nbsp;<span class="ident" id="7713556">numBytes</span><span class="op" id="7713564">:</span>&nbsp;<span class="num" id="7713566">3</span><span class="op" id="7713567">}</span><span class="op" id="7713568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713573">{</span><span class="ident" id="7713574">offset</span><span class="op" id="7713580">:</span>&nbsp;<span class="num" id="7713582">6</span><span class="op" id="7713583">,</span>&nbsp;<span class="ident" id="7713585">numBytes</span><span class="op" id="7713593">:</span>&nbsp;<span class="num" id="7713595">2</span><span class="op" id="7713596">}</span><span class="op" id="7713597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713601">}</span><span class="op" id="7713602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713606">realSize</span><span class="op" id="7713614">:</span>&nbsp;<span class="num" id="7713616">10</span><span class="op" id="7713618">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713622">expected</span><span class="op" id="7713630">:</span>&nbsp;<span class="op" id="7713632">[</span><span class="op" id="7713633">]</span><span class="builtintype" id="7713634">byte</span><span class="op" id="7713638">(</span><span class="string" id="7713639">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="7713666">)</span><span class="op" id="7713667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713670">}</span><span class="op" id="7713671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713678">sparseData</span><span class="op" id="7713688">:</span>&nbsp;<span class="op" id="7713690">[</span><span class="op" id="7713691">]</span><span class="builtintype" id="7713692">byte</span><span class="op" id="7713696">(</span><span class="string" id="7713697">&#34;&#34;</span><span class="op" id="7713699">)</span><span class="op" id="7713700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713704">sparseMap</span><span class="op" id="7713713">:</span>&nbsp;&nbsp;<span class="ident" id="7713716">nil</span><span class="op" id="7713719">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713723">realSize</span><span class="op" id="7713731">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="7713735">2</span><span class="op" id="7713736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713740">expected</span><span class="op" id="7713748">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7713752">[</span><span class="op" id="7713753">]</span><span class="builtintype" id="7713754">byte</span><span class="op" id="7713758">(</span><span class="string" id="7713759">&#34;\x00\x00&#34;</span><span class="op" id="7713769">)</span><span class="op" id="7713770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713773">}</span><span class="op" id="7713774">,</span><br>
<span class="lineno"></span><span class="op" id="7713776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="7713779">func</span>&nbsp;<span class="ident" id="7713784">TestSparseFileReader</span><span class="op" id="7713804">(</span><span class="ident" id="7713805">t</span>&nbsp;<span class="op" id="7713807">*</span><span class="ident" id="7713808">testing</span><span class="op" id="7713815">.</span><span class="ident" id="7713816">T</span><span class="op" id="7713817">)</span>&nbsp;<span class="op" id="7713819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713822">for</span>&nbsp;<span class="ident" id="7713826">i</span><span class="op" id="7713827">,</span>&nbsp;<span class="ident" id="7713829">test</span>&nbsp;<span class="op" id="7713834">:=</span>&nbsp;<span class="keyword" id="7713837">range</span>&nbsp;<span class="ident" id="7713843">sparseFileReadTests</span>&nbsp;<span class="op" id="7713863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713867">r</span>&nbsp;<span class="op" id="7713869">:=</span>&nbsp;<span class="ident" id="7713872">bytes</span><span class="op" id="7713877">.</span><span class="ident" id="7713878">NewReader</span><span class="op" id="7713887">(</span><span class="ident" id="7713888">test</span><span class="op" id="7713892">.</span><span class="ident" id="7713893">sparseData</span><span class="op" id="7713903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713907">nb</span>&nbsp;<span class="op" id="7713910">:=</span>&nbsp;<span class="ident" id="7713913">int64</span><span class="op" id="7713918">(</span><span class="ident" id="7713919">r</span><span class="op" id="7713920">.</span><span class="ident" id="7713921">Len</span><span class="op" id="7713924">(</span><span class="op" id="7713925">)</span><span class="op" id="7713926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713930">sfr</span>&nbsp;<span class="op" id="7713934">:=</span>&nbsp;<span class="op" id="7713937">&amp;</span><span class="ident" id="7713938">sparseFileReader</span><span class="op" id="7713954">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713959">rfr</span><span class="op" id="7713962">:</span>&nbsp;<span class="op" id="7713964">&amp;</span><span class="ident" id="7713965">regFileReader</span><span class="op" id="7713978">{</span><span class="ident" id="7713979">r</span><span class="op" id="7713980">:</span>&nbsp;<span class="ident" id="7713982">r</span><span class="op" id="7713983">,</span>&nbsp;<span class="ident" id="7713985">nb</span><span class="op" id="7713987">:</span>&nbsp;<span class="ident" id="7713989">nb</span><span class="op" id="7713991">}</span><span class="op" id="7713992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713997">sp</span><span class="op" id="7713999">:</span>&nbsp;&nbsp;<span class="ident" id="7714002">test</span><span class="op" id="7714006">.</span><span class="ident" id="7714007">sparseMap</span><span class="op" id="7714016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714021">pos</span><span class="op" id="7714024">:</span>&nbsp;<span class="num" id="7714026">0</span><span class="op" id="7714027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714032">tot</span><span class="op" id="7714035">:</span>&nbsp;<span class="ident" id="7714037">test</span><span class="op" id="7714041">.</span><span class="ident" id="7714042">realSize</span><span class="op" id="7714050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714054">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714058">if</span>&nbsp;<span class="ident" id="7714061">sfr</span><span class="op" id="7714064">.</span><span class="ident" id="7714065">numBytes</span><span class="op" id="7714073">(</span><span class="op" id="7714074">)</span>&nbsp;<span class="op" id="7714076">!=</span>&nbsp;<span class="ident" id="7714079">nb</span>&nbsp;<span class="op" id="7714082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714087">t</span><span class="op" id="7714088">.</span><span class="ident" id="7714089">Errorf</span><span class="op" id="7714095">(</span><span class="string" id="7714096">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7714151">,</span>&nbsp;<span class="ident" id="7714153">i</span><span class="op" id="7714154">,</span>&nbsp;<span class="ident" id="7714156">sfr</span><span class="op" id="7714159">.</span><span class="ident" id="7714160">numBytes</span><span class="op" id="7714168">(</span><span class="op" id="7714169">)</span><span class="op" id="7714170">,</span>&nbsp;<span class="ident" id="7714172">nb</span><span class="op" id="7714174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714182">buf</span><span class="op" id="7714185">,</span>&nbsp;<span class="ident" id="7714187">err</span>&nbsp;<span class="op" id="7714191">:=</span>&nbsp;<span class="ident" id="7714194">ioutil</span><span class="op" id="7714200">.</span><span class="ident" id="7714201">ReadAll</span><span class="op" id="7714208">(</span><span class="ident" id="7714209">sfr</span><span class="op" id="7714212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714216">if</span>&nbsp;<span class="ident" id="7714219">err</span>&nbsp;<span class="op" id="7714223">!=</span>&nbsp;<span class="ident" id="7714226">nil</span>&nbsp;<span class="op" id="7714230">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714235">t</span><span class="op" id="7714236">.</span><span class="ident" id="7714237">Errorf</span><span class="op" id="7714243">(</span><span class="string" id="7714244">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7714275">,</span>&nbsp;<span class="ident" id="7714277">i</span><span class="op" id="7714278">,</span>&nbsp;<span class="ident" id="7714280">err</span><span class="op" id="7714283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714291">if</span>&nbsp;<span class="ident" id="7714294">e</span>&nbsp;<span class="op" id="7714296">:=</span>&nbsp;<span class="ident" id="7714299">test</span><span class="op" id="7714303">.</span><span class="ident" id="7714304">expected</span><span class="op" id="7714312">;</span>&nbsp;<span class="op" id="7714314">!</span><span class="ident" id="7714315">bytes</span><span class="op" id="7714320">.</span><span class="ident" id="7714321">Equal</span><span class="op" id="7714326">(</span><span class="ident" id="7714327">buf</span><span class="op" id="7714330">,</span>&nbsp;<span class="ident" id="7714332">e</span><span class="op" id="7714333">)</span>&nbsp;<span class="op" id="7714335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714340">t</span><span class="op" id="7714341">.</span><span class="ident" id="7714342">Errorf</span><span class="op" id="7714348">(</span><span class="string" id="7714349">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7714382">,</span>&nbsp;<span class="ident" id="7714384">i</span><span class="op" id="7714385">,</span>&nbsp;<span class="ident" id="7714387">buf</span><span class="op" id="7714390">,</span>&nbsp;<span class="ident" id="7714392">e</span><span class="op" id="7714393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714397">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714401">if</span>&nbsp;<span class="ident" id="7714404">sfr</span><span class="op" id="7714407">.</span><span class="ident" id="7714408">numBytes</span><span class="op" id="7714416">(</span><span class="op" id="7714417">)</span>&nbsp;<span class="op" id="7714419">!=</span>&nbsp;<span class="num" id="7714422">0</span>&nbsp;<span class="op" id="7714424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714429">t</span><span class="op" id="7714430">.</span><span class="ident" id="7714431">Errorf</span><span class="op" id="7714437">(</span><span class="string" id="7714438">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="7714498">,</span>&nbsp;<span class="ident" id="7714500">i</span><span class="op" id="7714501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714508">}</span><br>
<span class="lineno"></span><span class="op" id="7714510">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="7714513">func</span>&nbsp;<span class="ident" id="7714518">TestSparseIncrementalRead</span><span class="op" id="7714543">(</span><span class="ident" id="7714544">t</span>&nbsp;<span class="op" id="7714546">*</span><span class="ident" id="7714547">testing</span><span class="op" id="7714554">.</span><span class="ident" id="7714555">T</span><span class="op" id="7714556">)</span>&nbsp;<span class="op" id="7714558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714561">sparseMap</span>&nbsp;<span class="op" id="7714571">:=</span>&nbsp;<span class="op" id="7714574">[</span><span class="op" id="7714575">]</span><span class="ident" id="7714576">sparseEntry</span><span class="op" id="7714587">{</span><span class="op" id="7714588">{</span><span class="num" id="7714589">10</span><span class="op" id="7714591">,</span>&nbsp;<span class="num" id="7714593">2</span><span class="op" id="7714594">}</span><span class="op" id="7714595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714598">sparseData</span>&nbsp;<span class="op" id="7714609">:=</span>&nbsp;<span class="op" id="7714612">[</span><span class="op" id="7714613">]</span><span class="builtintype" id="7714614">byte</span><span class="op" id="7714618">(</span><span class="string" id="7714619">&#34;Go&#34;</span><span class="op" id="7714623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714626">expected</span>&nbsp;<span class="op" id="7714635">:=</span>&nbsp;<span class="string" id="7714638">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714717">r</span>&nbsp;<span class="op" id="7714719">:=</span>&nbsp;<span class="ident" id="7714722">bytes</span><span class="op" id="7714727">.</span><span class="ident" id="7714728">NewReader</span><span class="op" id="7714737">(</span><span class="ident" id="7714738">sparseData</span><span class="op" id="7714748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714751">nb</span>&nbsp;<span class="op" id="7714754">:=</span>&nbsp;<span class="ident" id="7714757">int64</span><span class="op" id="7714762">(</span><span class="ident" id="7714763">r</span><span class="op" id="7714764">.</span><span class="ident" id="7714765">Len</span><span class="op" id="7714768">(</span><span class="op" id="7714769">)</span><span class="op" id="7714770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714773">sfr</span>&nbsp;<span class="op" id="7714777">:=</span>&nbsp;<span class="op" id="7714780">&amp;</span><span class="ident" id="7714781">sparseFileReader</span><span class="op" id="7714797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714801">rfr</span><span class="op" id="7714804">:</span>&nbsp;<span class="op" id="7714806">&amp;</span><span class="ident" id="7714807">regFileReader</span><span class="op" id="7714820">{</span><span class="ident" id="7714821">r</span><span class="op" id="7714822">:</span>&nbsp;<span class="ident" id="7714824">r</span><span class="op" id="7714825">,</span>&nbsp;<span class="ident" id="7714827">nb</span><span class="op" id="7714829">:</span>&nbsp;<span class="ident" id="7714831">nb</span><span class="op" id="7714833">}</span><span class="op" id="7714834">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714838">sp</span><span class="op" id="7714840">:</span>&nbsp;&nbsp;<span class="ident" id="7714843">sparseMap</span><span class="op" id="7714852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714856">pos</span><span class="op" id="7714859">:</span>&nbsp;<span class="num" id="7714861">0</span><span class="op" id="7714862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714866">tot</span><span class="op" id="7714869">:</span>&nbsp;<span class="ident" id="7714871">int64</span><span class="op" id="7714876">(</span><span class="builtinfunc" id="7714877">len</span><span class="op" id="7714880">(</span><span class="ident" id="7714881">expected</span><span class="op" id="7714889">)</span><span class="op" id="7714890">)</span><span class="op" id="7714891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7714898">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7714967">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715015">var</span>&nbsp;<span class="ident" id="7715019">outputBuf</span>&nbsp;<span class="ident" id="7715029">bytes</span><span class="op" id="7715034">.</span><span class="ident" id="7715035">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715043">buf</span>&nbsp;<span class="op" id="7715047">:=</span>&nbsp;<span class="builtinfunc" id="7715050">make</span><span class="op" id="7715054">(</span><span class="op" id="7715055">[</span><span class="op" id="7715056">]</span><span class="builtintype" id="7715057">byte</span><span class="op" id="7715061">,</span>&nbsp;<span class="num" id="7715063">6</span><span class="op" id="7715064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715067">for</span>&nbsp;<span class="op" id="7715071">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715075">n</span><span class="op" id="7715076">,</span>&nbsp;<span class="ident" id="7715078">err</span>&nbsp;<span class="op" id="7715082">:=</span>&nbsp;<span class="ident" id="7715085">sfr</span><span class="op" id="7715088">.</span><span class="ident" id="7715089">Read</span><span class="op" id="7715093">(</span><span class="ident" id="7715094">buf</span><span class="op" id="7715097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715101">if</span>&nbsp;<span class="ident" id="7715104">err</span>&nbsp;<span class="op" id="7715108">==</span>&nbsp;<span class="ident" id="7715111">io</span><span class="op" id="7715113">.</span><span class="ident" id="7715114">EOF</span>&nbsp;<span class="op" id="7715118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715123">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715135">if</span>&nbsp;<span class="ident" id="7715138">err</span>&nbsp;<span class="op" id="7715142">!=</span>&nbsp;<span class="ident" id="7715145">nil</span>&nbsp;<span class="op" id="7715149">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715154">t</span><span class="op" id="7715155">.</span><span class="ident" id="7715156">Errorf</span><span class="op" id="7715162">(</span><span class="string" id="7715163">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7715192">,</span>&nbsp;<span class="ident" id="7715194">err</span><span class="op" id="7715197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715205">if</span>&nbsp;<span class="ident" id="7715208">n</span>&nbsp;<span class="op" id="7715210">&gt;</span>&nbsp;<span class="num" id="7715212">0</span>&nbsp;<span class="op" id="7715214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715219">_</span><span class="op" id="7715220">,</span>&nbsp;<span class="ident" id="7715222">err</span>&nbsp;<span class="op" id="7715226">:=</span>&nbsp;<span class="ident" id="7715229">outputBuf</span><span class="op" id="7715238">.</span><span class="ident" id="7715239">Write</span><span class="op" id="7715244">(</span><span class="ident" id="7715245">buf</span><span class="op" id="7715248">[</span><span class="op" id="7715249">:</span><span class="ident" id="7715250">n</span><span class="op" id="7715251">]</span><span class="op" id="7715252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715257">if</span>&nbsp;<span class="ident" id="7715260">err</span>&nbsp;<span class="op" id="7715264">!=</span>&nbsp;<span class="ident" id="7715267">nil</span>&nbsp;<span class="op" id="7715271">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715277">t</span><span class="op" id="7715278">.</span><span class="ident" id="7715279">Errorf</span><span class="op" id="7715285">(</span><span class="string" id="7715286">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7715316">,</span>&nbsp;<span class="ident" id="7715318">err</span><span class="op" id="7715321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715336">got</span>&nbsp;<span class="op" id="7715340">:=</span>&nbsp;<span class="ident" id="7715343">outputBuf</span><span class="op" id="7715352">.</span><span class="ident" id="7715353">String</span><span class="op" id="7715359">(</span><span class="op" id="7715360">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715363">if</span>&nbsp;<span class="ident" id="7715366">got</span>&nbsp;<span class="op" id="7715370">!=</span>&nbsp;<span class="ident" id="7715373">expected</span>&nbsp;<span class="op" id="7715382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715386">t</span><span class="op" id="7715387">.</span><span class="ident" id="7715388">Errorf</span><span class="op" id="7715394">(</span><span class="string" id="7715395">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7715419">,</span>&nbsp;<span class="ident" id="7715421">got</span><span class="op" id="7715424">,</span>&nbsp;<span class="ident" id="7715426">expected</span><span class="op" id="7715434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715437">}</span><br>
<span class="lineno"></span><span class="op" id="7715439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7715442">func</span>&nbsp;<span class="ident" id="7715447">TestReadGNUSparseMap0x1</span><span class="op" id="7715470">(</span><span class="ident" id="7715471">t</span>&nbsp;<span class="op" id="7715473">*</span><span class="ident" id="7715474">testing</span><span class="op" id="7715481">.</span><span class="ident" id="7715482">T</span><span class="op" id="7715483">)</span>&nbsp;<span class="op" id="7715485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715488">headers</span>&nbsp;<span class="op" id="7715496">:=</span>&nbsp;<span class="keyword" id="7715499">map</span><span class="op" id="7715502">[</span><span class="builtintype" id="7715503">string</span><span class="op" id="7715509">]</span><span class="builtintype" id="7715510">string</span><span class="op" id="7715516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715520">paxGNUSparseNumBlocks</span><span class="op" id="7715541">:</span>&nbsp;<span class="string" id="7715543">&#34;4&#34;</span><span class="op" id="7715546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715550">paxGNUSparseMap</span><span class="op" id="7715565">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715573">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="7715593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715596">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715599">expected</span>&nbsp;<span class="op" id="7715608">:=</span>&nbsp;<span class="op" id="7715611">[</span><span class="op" id="7715612">]</span><span class="ident" id="7715613">sparseEntry</span><span class="op" id="7715624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715628">{</span><span class="ident" id="7715629">offset</span><span class="op" id="7715635">:</span>&nbsp;<span class="num" id="7715637">0</span><span class="op" id="7715638">,</span>&nbsp;<span class="ident" id="7715640">numBytes</span><span class="op" id="7715648">:</span>&nbsp;<span class="num" id="7715650">5</span><span class="op" id="7715651">}</span><span class="op" id="7715652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715656">{</span><span class="ident" id="7715657">offset</span><span class="op" id="7715663">:</span>&nbsp;<span class="num" id="7715665">10</span><span class="op" id="7715667">,</span>&nbsp;<span class="ident" id="7715669">numBytes</span><span class="op" id="7715677">:</span>&nbsp;<span class="num" id="7715679">5</span><span class="op" id="7715680">}</span><span class="op" id="7715681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715685">{</span><span class="ident" id="7715686">offset</span><span class="op" id="7715692">:</span>&nbsp;<span class="num" id="7715694">20</span><span class="op" id="7715696">,</span>&nbsp;<span class="ident" id="7715698">numBytes</span><span class="op" id="7715706">:</span>&nbsp;<span class="num" id="7715708">5</span><span class="op" id="7715709">}</span><span class="op" id="7715710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715714">{</span><span class="ident" id="7715715">offset</span><span class="op" id="7715721">:</span>&nbsp;<span class="num" id="7715723">30</span><span class="op" id="7715725">,</span>&nbsp;<span class="ident" id="7715727">numBytes</span><span class="op" id="7715735">:</span>&nbsp;<span class="num" id="7715737">5</span><span class="op" id="7715738">}</span><span class="op" id="7715739">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715746">sp</span><span class="op" id="7715748">,</span>&nbsp;<span class="ident" id="7715750">err</span>&nbsp;<span class="op" id="7715754">:=</span>&nbsp;<span class="ident" id="7715757">readGNUSparseMap0x1</span><span class="op" id="7715776">(</span><span class="ident" id="7715777">headers</span><span class="op" id="7715784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715787">if</span>&nbsp;<span class="ident" id="7715790">err</span>&nbsp;<span class="op" id="7715794">!=</span>&nbsp;<span class="ident" id="7715797">nil</span>&nbsp;<span class="op" id="7715801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715805">t</span><span class="op" id="7715806">.</span><span class="ident" id="7715807">Errorf</span><span class="op" id="7715813">(</span><span class="string" id="7715814">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7715836">,</span>&nbsp;<span class="ident" id="7715838">err</span><span class="op" id="7715841">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715847">if</span>&nbsp;<span class="op" id="7715850">!</span><span class="ident" id="7715851">reflect</span><span class="op" id="7715858">.</span><span class="ident" id="7715859">DeepEqual</span><span class="op" id="7715868">(</span><span class="ident" id="7715869">sp</span><span class="op" id="7715871">,</span>&nbsp;<span class="ident" id="7715873">expected</span><span class="op" id="7715881">)</span>&nbsp;<span class="op" id="7715883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715887">t</span><span class="op" id="7715888">.</span><span class="ident" id="7715889">Errorf</span><span class="op" id="7715895">(</span><span class="string" id="7715896">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7715937">,</span>&nbsp;<span class="ident" id="7715939">sp</span><span class="op" id="7715941">,</span>&nbsp;<span class="ident" id="7715943">expected</span><span class="op" id="7715951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715954">}</span><br>
<span class="lineno"></span><span class="op" id="7715956">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="7715959">func</span>&nbsp;<span class="ident" id="7715964">TestReadGNUSparseMap1x0</span><span class="op" id="7715987">(</span><span class="ident" id="7715988">t</span>&nbsp;<span class="op" id="7715990">*</span><span class="ident" id="7715991">testing</span><span class="op" id="7715998">.</span><span class="ident" id="7715999">T</span><span class="op" id="7716000">)</span>&nbsp;<span class="op" id="7716002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716005">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716089">numEntries</span>&nbsp;<span class="op" id="7716100">:=</span>&nbsp;<span class="num" id="7716103">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716108">expected</span>&nbsp;<span class="op" id="7716117">:=</span>&nbsp;<span class="builtinfunc" id="7716120">make</span><span class="op" id="7716124">(</span><span class="op" id="7716125">[</span><span class="op" id="7716126">]</span><span class="ident" id="7716127">sparseEntry</span><span class="op" id="7716138">,</span>&nbsp;<span class="num" id="7716140">0</span><span class="op" id="7716141">,</span>&nbsp;<span class="ident" id="7716143">numEntries</span><span class="op" id="7716153">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716156">sparseMap</span>&nbsp;<span class="op" id="7716166">:=</span>&nbsp;<span class="builtinfunc" id="7716169">new</span><span class="op" id="7716172">(</span><span class="ident" id="7716173">bytes</span><span class="op" id="7716178">.</span><span class="ident" id="7716179">Buffer</span><span class="op" id="7716185">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716189">fmt</span><span class="op" id="7716192">.</span><span class="ident" id="7716193">Fprintf</span><span class="op" id="7716200">(</span><span class="ident" id="7716201">sparseMap</span><span class="op" id="7716210">,</span>&nbsp;<span class="string" id="7716212">&#34;%d\n&#34;</span><span class="op" id="7716218">,</span>&nbsp;<span class="ident" id="7716220">numEntries</span><span class="op" id="7716230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716233">for</span>&nbsp;<span class="ident" id="7716237">i</span>&nbsp;<span class="op" id="7716239">:=</span>&nbsp;<span class="num" id="7716242">0</span><span class="op" id="7716243">;</span>&nbsp;<span class="ident" id="7716245">i</span>&nbsp;<span class="op" id="7716247">&lt;</span>&nbsp;<span class="ident" id="7716249">numEntries</span><span class="op" id="7716259">;</span>&nbsp;<span class="ident" id="7716261">i</span><span class="op" id="7716262">++</span>&nbsp;<span class="op" id="7716265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716269">offset</span>&nbsp;<span class="op" id="7716276">:=</span>&nbsp;<span class="ident" id="7716279">int64</span><span class="op" id="7716284">(</span><span class="num" id="7716285">2048</span>&nbsp;<span class="op" id="7716290">*</span>&nbsp;<span class="ident" id="7716292">i</span><span class="op" id="7716293">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716297">numBytes</span>&nbsp;<span class="op" id="7716306">:=</span>&nbsp;<span class="ident" id="7716309">int64</span><span class="op" id="7716314">(</span><span class="num" id="7716315">1024</span><span class="op" id="7716319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716323">expected</span>&nbsp;<span class="op" id="7716332">=</span>&nbsp;<span class="builtinfunc" id="7716334">append</span><span class="op" id="7716340">(</span><span class="ident" id="7716341">expected</span><span class="op" id="7716349">,</span>&nbsp;<span class="ident" id="7716351">sparseEntry</span><span class="op" id="7716362">{</span><span class="ident" id="7716363">offset</span><span class="op" id="7716369">:</span>&nbsp;<span class="ident" id="7716371">offset</span><span class="op" id="7716377">,</span>&nbsp;<span class="ident" id="7716379">numBytes</span><span class="op" id="7716387">:</span>&nbsp;<span class="ident" id="7716389">numBytes</span><span class="op" id="7716397">}</span><span class="op" id="7716398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716402">fmt</span><span class="op" id="7716405">.</span><span class="ident" id="7716406">Fprintf</span><span class="op" id="7716413">(</span><span class="ident" id="7716414">sparseMap</span><span class="op" id="7716423">,</span>&nbsp;<span class="string" id="7716425">&#34;%d\n%d\n&#34;</span><span class="op" id="7716435">,</span>&nbsp;<span class="ident" id="7716437">offset</span><span class="op" id="7716443">,</span>&nbsp;<span class="ident" id="7716445">numBytes</span><span class="op" id="7716453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716460">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716539">headerBlocks</span>&nbsp;<span class="op" id="7716552">:=</span>&nbsp;<span class="op" id="7716555">(</span><span class="ident" id="7716556">sparseMap</span><span class="op" id="7716565">.</span><span class="ident" id="7716566">Len</span><span class="op" id="7716569">(</span><span class="op" id="7716570">)</span>&nbsp;<span class="op" id="7716572">+</span>&nbsp;<span class="ident" id="7716574">blockSize</span>&nbsp;<span class="op" id="7716584">-</span>&nbsp;<span class="num" id="7716586">1</span><span class="op" id="7716587">)</span>&nbsp;<span class="op" id="7716589">/</span>&nbsp;<span class="ident" id="7716591">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716602">bufLen</span>&nbsp;<span class="op" id="7716609">:=</span>&nbsp;<span class="ident" id="7716612">blockSize</span>&nbsp;<span class="op" id="7716622">*</span>&nbsp;<span class="ident" id="7716624">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716638">buf</span>&nbsp;<span class="op" id="7716642">:=</span>&nbsp;<span class="builtinfunc" id="7716645">make</span><span class="op" id="7716649">(</span><span class="op" id="7716650">[</span><span class="op" id="7716651">]</span><span class="builtintype" id="7716652">byte</span><span class="op" id="7716656">,</span>&nbsp;<span class="ident" id="7716658">bufLen</span><span class="op" id="7716664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7716667">copy</span><span class="op" id="7716671">(</span><span class="ident" id="7716672">buf</span><span class="op" id="7716675">,</span>&nbsp;<span class="ident" id="7716677">sparseMap</span><span class="op" id="7716686">.</span><span class="ident" id="7716687">Bytes</span><span class="op" id="7716692">(</span><span class="op" id="7716693">)</span><span class="op" id="7716694">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716698">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716739">r</span>&nbsp;<span class="op" id="7716741">:=</span>&nbsp;<span class="ident" id="7716744">bytes</span><span class="op" id="7716749">.</span><span class="ident" id="7716750">NewReader</span><span class="op" id="7716759">(</span><span class="ident" id="7716760">buf</span><span class="op" id="7716763">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716767">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716791">sp</span><span class="op" id="7716793">,</span>&nbsp;<span class="ident" id="7716795">err</span>&nbsp;<span class="op" id="7716799">:=</span>&nbsp;<span class="ident" id="7716802">readGNUSparseMap1x0</span><span class="op" id="7716821">(</span><span class="ident" id="7716822">r</span><span class="op" id="7716823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716826">if</span>&nbsp;<span class="ident" id="7716829">err</span>&nbsp;<span class="op" id="7716833">!=</span>&nbsp;<span class="ident" id="7716836">nil</span>&nbsp;<span class="op" id="7716840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716844">t</span><span class="op" id="7716845">.</span><span class="ident" id="7716846">Errorf</span><span class="op" id="7716852">(</span><span class="string" id="7716853">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7716875">,</span>&nbsp;<span class="ident" id="7716877">err</span><span class="op" id="7716880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716886">if</span>&nbsp;<span class="op" id="7716889">!</span><span class="ident" id="7716890">reflect</span><span class="op" id="7716897">.</span><span class="ident" id="7716898">DeepEqual</span><span class="op" id="7716907">(</span><span class="ident" id="7716908">sp</span><span class="op" id="7716910">,</span>&nbsp;<span class="ident" id="7716912">expected</span><span class="op" id="7716920">)</span>&nbsp;<span class="op" id="7716922">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716926">t</span><span class="op" id="7716927">.</span><span class="ident" id="7716928">Errorf</span><span class="op" id="7716934">(</span><span class="string" id="7716935">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7716976">,</span>&nbsp;<span class="ident" id="7716978">sp</span><span class="op" id="7716980">,</span>&nbsp;<span class="ident" id="7716982">expected</span><span class="op" id="7716990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716993">}</span><br>
<span class="lineno"></span><span class="op" id="7716995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7716998">func</span>&nbsp;<span class="ident" id="7717003">TestUninitializedRead</span><span class="op" id="7717024">(</span><span class="ident" id="7717025">t</span>&nbsp;<span class="op" id="7717027">*</span><span class="ident" id="7717028">testing</span><span class="op" id="7717035">.</span><span class="ident" id="7717036">T</span><span class="op" id="7717037">)</span>&nbsp;<span class="op" id="7717039">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717042">test</span>&nbsp;<span class="op" id="7717047">:=</span>&nbsp;<span class="ident" id="7717050">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717062">f</span><span class="op" id="7717063">,</span>&nbsp;<span class="ident" id="7717065">err</span>&nbsp;<span class="op" id="7717069">:=</span>&nbsp;<span class="ident" id="7717072">os</span><span class="op" id="7717074">.</span><span class="ident" id="7717075">Open</span><span class="op" id="7717079">(</span><span class="ident" id="7717080">test</span><span class="op" id="7717084">.</span><span class="ident" id="7717085">file</span><span class="op" id="7717089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717092">if</span>&nbsp;<span class="ident" id="7717095">err</span>&nbsp;<span class="op" id="7717099">!=</span>&nbsp;<span class="ident" id="7717102">nil</span>&nbsp;<span class="op" id="7717106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717110">t</span><span class="op" id="7717111">.</span><span class="ident" id="7717112">Fatalf</span><span class="op" id="7717118">(</span><span class="string" id="7717119">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7717141">,</span>&nbsp;<span class="ident" id="7717143">err</span><span class="op" id="7717146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717149">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717152">defer</span>&nbsp;<span class="ident" id="7717158">f</span><span class="op" id="7717159">.</span><span class="ident" id="7717160">Close</span><span class="op" id="7717165">(</span><span class="op" id="7717166">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717170">tr</span>&nbsp;<span class="op" id="7717173">:=</span>&nbsp;<span class="ident" id="7717176">NewReader</span><span class="op" id="7717185">(</span><span class="ident" id="7717186">f</span><span class="op" id="7717187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717190">_</span><span class="op" id="7717191">,</span>&nbsp;<span class="ident" id="7717193">err</span>&nbsp;<span class="op" id="7717197">=</span>&nbsp;<span class="ident" id="7717199">tr</span><span class="op" id="7717201">.</span><span class="ident" id="7717202">Read</span><span class="op" id="7717206">(</span><span class="op" id="7717207">[</span><span class="op" id="7717208">]</span><span class="builtintype" id="7717209">byte</span><span class="op" id="7717213">{</span><span class="op" id="7717214">}</span><span class="op" id="7717215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717218">if</span>&nbsp;<span class="ident" id="7717221">err</span>&nbsp;<span class="op" id="7717225">==</span>&nbsp;<span class="ident" id="7717228">nil</span>&nbsp;<span class="op" id="7717232">||</span>&nbsp;<span class="ident" id="7717235">err</span>&nbsp;<span class="op" id="7717239">!=</span>&nbsp;<span class="ident" id="7717242">io</span><span class="op" id="7717244">.</span><span class="ident" id="7717245">EOF</span>&nbsp;<span class="op" id="7717249">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717253">t</span><span class="op" id="7717254">.</span><span class="ident" id="7717255">Errorf</span><span class="op" id="7717261">(</span><span class="string" id="7717262">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7717295">,</span>&nbsp;<span class="ident" id="7717297">err</span><span class="op" id="7717300">,</span>&nbsp;<span class="ident" id="7717302">io</span><span class="op" id="7717304">.</span><span class="ident" id="7717305">EOF</span><span class="op" id="7717308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="7717314">}</span>
</div>
</body>
</html>
