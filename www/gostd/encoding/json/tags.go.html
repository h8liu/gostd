<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4018986">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4019041">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4019095">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4019146">package</span>&nbsp;<span class="ident" id="4019154">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4019160">import</span>&nbsp;<span class="op" id="4019167">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4019170">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4019180">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="4019183">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4019256">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="4019324">type</span>&nbsp;<span class="ident" id="4019329">tagOptions</span>&nbsp;<span class="builtintype" id="4019340">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4019348">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4019411">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="4019439">func</span>&nbsp;<span class="ident" id="4019444">parseTag</span><span class="op" id="4019452">(</span><span class="ident" id="4019453">tag</span>&nbsp;<span class="builtintype" id="4019457">string</span><span class="op" id="4019463">)</span>&nbsp;<span class="op" id="4019465">(</span><span class="builtintype" id="4019466">string</span><span class="op" id="4019472">,</span>&nbsp;<span class="ident" id="4019474">tagOptions</span><span class="op" id="4019484">)</span>&nbsp;<span class="op" id="4019486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4019489">if</span>&nbsp;<span class="ident" id="4019492">idx</span>&nbsp;<span class="op" id="4019496">:=</span>&nbsp;<span class="ident" id="4019499">strings</span><span class="op" id="4019506">.</span><span class="ident" id="4019507">Index</span><span class="op" id="4019512">(</span><span class="ident" id="4019513">tag</span><span class="op" id="4019516">,</span>&nbsp;<span class="string" id="4019518">&#34;,&#34;</span><span class="op" id="4019521">)</span><span class="op" id="4019522">;</span>&nbsp;<span class="ident" id="4019524">idx</span>&nbsp;<span class="op" id="4019528">!=</span>&nbsp;<span class="op" id="4019531">-</span><span class="num" id="4019532">1</span>&nbsp;<span class="op" id="4019534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4019538">return</span>&nbsp;<span class="ident" id="4019545">tag</span><span class="op" id="4019548">[</span><span class="op" id="4019549">:</span><span class="ident" id="4019550">idx</span><span class="op" id="4019553">]</span><span class="op" id="4019554">,</span>&nbsp;<span class="ident" id="4019556">tagOptions</span><span class="op" id="4019566">(</span><span class="ident" id="4019567">tag</span><span class="op" id="4019570">[</span><span class="ident" id="4019571">idx</span><span class="op" id="4019574">+</span><span class="num" id="4019575">1</span><span class="op" id="4019576">:</span><span class="op" id="4019577">]</span><span class="op" id="4019578">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4019581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4019584">return</span>&nbsp;<span class="ident" id="4019591">tag</span><span class="op" id="4019594">,</span>&nbsp;<span class="ident" id="4019596">tagOptions</span><span class="op" id="4019606">(</span><span class="string" id="4019607">&#34;&#34;</span><span class="op" id="4019609">)</span><br>
<span class="lineno"></span><span class="op" id="4019611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4019614">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="4019676">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4019745">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="4019775">func</span>&nbsp;<span class="op" id="4019780">(</span><span class="ident" id="4019781">o</span>&nbsp;<span class="ident" id="4019783">tagOptions</span><span class="op" id="4019793">)</span>&nbsp;<span class="ident" id="4019795">Contains</span><span class="op" id="4019803">(</span><span class="ident" id="4019804">optionName</span>&nbsp;<span class="builtintype" id="4019815">string</span><span class="op" id="4019821">)</span>&nbsp;<span class="builtintype" id="4019823">bool</span>&nbsp;<span class="op" id="4019828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4019831">if</span>&nbsp;<span class="builtinfunc" id="4019834">len</span><span class="op" id="4019837">(</span><span class="ident" id="4019838">o</span><span class="op" id="4019839">)</span>&nbsp;<span class="op" id="4019841">==</span>&nbsp;<span class="num" id="4019844">0</span>&nbsp;<span class="op" id="4019846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4019850">return</span>&nbsp;<span class="builtintype" id="4019857">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4019864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4019867">s</span>&nbsp;<span class="op" id="4019869">:=</span>&nbsp;<span class="builtintype" id="4019872">string</span><span class="op" id="4019878">(</span><span class="ident" id="4019879">o</span><span class="op" id="4019880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4019883">for</span>&nbsp;<span class="ident" id="4019887">s</span>&nbsp;<span class="op" id="4019889">!=</span>&nbsp;<span class="string" id="4019892">&#34;&#34;</span>&nbsp;<span class="op" id="4019895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4019899">var</span>&nbsp;<span class="ident" id="4019903">next</span>&nbsp;<span class="builtintype" id="4019908">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4019917">i</span>&nbsp;<span class="op" id="4019919">:=</span>&nbsp;<span class="ident" id="4019922">strings</span><span class="op" id="4019929">.</span><span class="ident" id="4019930">Index</span><span class="op" id="4019935">(</span><span class="ident" id="4019936">s</span><span class="op" id="4019937">,</span>&nbsp;<span class="string" id="4019939">&#34;,&#34;</span><span class="op" id="4019942">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4019946">if</span>&nbsp;<span class="ident" id="4019949">i</span>&nbsp;<span class="op" id="4019951">&gt;=</span>&nbsp;<span class="num" id="4019954">0</span>&nbsp;<span class="op" id="4019956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4019961">s</span><span class="op" id="4019962">,</span>&nbsp;<span class="ident" id="4019964">next</span>&nbsp;<span class="op" id="4019969">=</span>&nbsp;<span class="ident" id="4019971">s</span><span class="op" id="4019972">[</span><span class="op" id="4019973">:</span><span class="ident" id="4019974">i</span><span class="op" id="4019975">]</span><span class="op" id="4019976">,</span>&nbsp;<span class="ident" id="4019978">s</span><span class="op" id="4019979">[</span><span class="ident" id="4019980">i</span><span class="op" id="4019981">+</span><span class="num" id="4019982">1</span><span class="op" id="4019983">:</span><span class="op" id="4019984">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4019988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4019992">if</span>&nbsp;<span class="ident" id="4019995">s</span>&nbsp;<span class="op" id="4019997">==</span>&nbsp;<span class="ident" id="4020000">optionName</span>&nbsp;<span class="op" id="4020011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4020016">return</span>&nbsp;<span class="builtintype" id="4020023">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4020030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4020034">s</span>&nbsp;<span class="op" id="4020036">=</span>&nbsp;<span class="ident" id="4020038">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4020044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4020047">return</span>&nbsp;<span class="builtintype" id="4020054">false</span><br>
<span class="lineno"></span><span class="op" id="4020060">}</span>
</div>
</body>
</html>
