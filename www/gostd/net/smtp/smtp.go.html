<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/smtp</h2>
<ul>
<li><a href="/gostd/net/smtp/auth.go.html">auth.go</a></li>
<li><a href="/gostd/net/smtp/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/smtp/smtp.go.html" class="current">smtp.go</a></li>
<li><a href="/gostd/net/smtp/smtp_test.go.html">smtp_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5790375">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5790430">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5790484">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5790535">//&nbsp;Package&nbsp;smtp&nbsp;implements&nbsp;the&nbsp;Simple&nbsp;Mail&nbsp;Transfer&nbsp;Protocol&nbsp;as&nbsp;defined&nbsp;in&nbsp;RFC&nbsp;5321.</span><br>
<span class="lineno"></span><span class="comment" id="5790620">//&nbsp;It&nbsp;also&nbsp;implements&nbsp;the&nbsp;following&nbsp;extensions:</span><br>
<span class="lineno"></span><span class="comment" id="5790668">//&nbsp;&nbsp;&nbsp;&nbsp;8BITMIME&nbsp;&nbsp;RFC&nbsp;1652</span><br>
<span class="lineno"></span><span class="comment" id="5790690">//&nbsp;&nbsp;&nbsp;&nbsp;AUTH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RFC&nbsp;2554</span><br>
<span class="lineno"></span><span class="comment" id="5790712">//&nbsp;&nbsp;&nbsp;&nbsp;STARTTLS&nbsp;&nbsp;RFC&nbsp;3207</span><br>
<span class="lineno">10</span><span class="comment" id="5790734">//&nbsp;Additional&nbsp;extensions&nbsp;may&nbsp;be&nbsp;handled&nbsp;by&nbsp;clients.</span><br>
<span class="lineno"></span><span class="keyword" id="5790786">package</span>&nbsp;<span class="ident" id="5790794">smtp</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5790800">import</span>&nbsp;<span class="op" id="5790807">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5790810">&#34;crypto/tls&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5790824">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5790843">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5790853">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5790859">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5790866">&#34;net/textproto&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5790883">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5790893">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5790896">//&nbsp;A&nbsp;Client&nbsp;represents&nbsp;a&nbsp;client&nbsp;connection&nbsp;to&nbsp;an&nbsp;SMTP&nbsp;server.</span><br>
<span class="lineno"></span><span class="keyword" id="5790958">type</span>&nbsp;<span class="ident" id="5790963">Client</span>&nbsp;<span class="keyword" id="5790970">struct</span>&nbsp;<span class="op" id="5790977">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5790980">//&nbsp;Text&nbsp;is&nbsp;the&nbsp;textproto.Conn&nbsp;used&nbsp;by&nbsp;the&nbsp;Client.&nbsp;It&nbsp;is&nbsp;exported&nbsp;to&nbsp;allow&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5791059">//&nbsp;clients&nbsp;to&nbsp;add&nbsp;extensions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791090">Text</span>&nbsp;<span class="op" id="5791095">*</span><span class="ident" id="5791096"><a href="/gostd/net/smtp/smtp.go.html#5790866">textproto</a></span><span class="op" id="5791105">.</span><span class="ident" id="5791106"><a href="/gostd/net/textproto/textproto.go.html#4350487">Conn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5791112">//&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;connection&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;create&nbsp;a&nbsp;TLS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5791185">//&nbsp;connection&nbsp;later</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791206">conn</span>&nbsp;<span class="ident" id="5791211"><a href="/gostd/net/smtp/smtp.go.html#5790859">net</a></span><span class="op" id="5791214">.</span><span class="ident" id="5791215"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5791221">//&nbsp;whether&nbsp;the&nbsp;Client&nbsp;is&nbsp;using&nbsp;TLS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791257">tls</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5791268">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791274">serverName</span>&nbsp;<span class="builtintype" id="5791285">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5791293">//&nbsp;map&nbsp;of&nbsp;supported&nbsp;extensions</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791325">ext</span>&nbsp;<span class="keyword" id="5791329">map</span><span class="op" id="5791332">[</span><span class="builtintype" id="5791333">string</span><span class="op" id="5791339">]</span><span class="builtintype" id="5791340">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5791348">//&nbsp;supported&nbsp;auth&nbsp;mechanisms</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791378">auth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5791389">[</span><span class="op" id="5791390">]</span><span class="builtintype" id="5791391">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791399">localName</span>&nbsp;&nbsp;<span class="builtintype" id="5791410">string</span>&nbsp;<span class="comment" id="5791417">//&nbsp;the&nbsp;name&nbsp;to&nbsp;use&nbsp;in&nbsp;HELO/EHLO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791450">didHello</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5791461">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5791468">//&nbsp;whether&nbsp;we&#39;ve&nbsp;said&nbsp;HELO/EHLO</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791501">helloError</span>&nbsp;<span class="builtintype" id="5791512">error</span>&nbsp;&nbsp;<span class="comment" id="5791519">//&nbsp;the&nbsp;error&nbsp;from&nbsp;the&nbsp;hello</span><br>
<span class="lineno"></span><span class="op" id="5791547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5791550">//&nbsp;Dial&nbsp;returns&nbsp;a&nbsp;new&nbsp;Client&nbsp;connected&nbsp;to&nbsp;an&nbsp;SMTP&nbsp;server&nbsp;at&nbsp;addr.</span><br>
<span class="lineno"></span><span class="comment" id="5791616">//&nbsp;The&nbsp;addr&nbsp;must&nbsp;include&nbsp;a&nbsp;port&nbsp;number.</span><br>
<span class="lineno">45</span><span class="keyword" id="5791656">func</span>&nbsp;<span class="ident" id="5791661">Dial</span><span class="op" id="5791665">(</span><span class="ident" id="5791666">addr</span>&nbsp;<span class="builtintype" id="5791671">string</span><span class="op" id="5791677">)</span>&nbsp;<span class="op" id="5791679">(</span><span class="op" id="5791680">*</span><span class="ident" id="5791681"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5791687">,</span>&nbsp;<span class="builtintype" id="5791689">error</span><span class="op" id="5791694">)</span>&nbsp;<span class="op" id="5791696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791699">conn</span><span class="op" id="5791703">,</span>&nbsp;<span class="ident" id="5791705">err</span>&nbsp;<span class="op" id="5791709">:=</span>&nbsp;<span class="ident" id="5791712"><a href="/gostd/net/smtp/smtp.go.html#5790859">net</a></span><span class="op" id="5791715">.</span><span class="ident" id="5791716"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="5791720">(</span><span class="string" id="5791721">&#34;tcp&#34;</span><span class="op" id="5791726">,</span>&nbsp;<span class="ident" id="5791728"><a href="/gostd/net/smtp/smtp.go.html#5791666">addr</a></span><span class="op" id="5791732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5791735">if</span>&nbsp;<span class="ident" id="5791738"><a href="/gostd/net/smtp/smtp.go.html#5791705">err</a></span>&nbsp;<span class="op" id="5791742">!=</span>&nbsp;<span class="builtintype" id="5791745">nil</span>&nbsp;<span class="op" id="5791749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5791753">return</span>&nbsp;<span class="builtintype" id="5791760">nil</span><span class="op" id="5791763">,</span>&nbsp;<span class="ident" id="5791765"><a href="/gostd/net/smtp/smtp.go.html#5791705">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5791770">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5791773">host</span><span class="op" id="5791777">,</span>&nbsp;<span class="ident" id="5791779">_</span><span class="op" id="5791780">,</span>&nbsp;<span class="ident" id="5791782">_</span>&nbsp;<span class="op" id="5791784">:=</span>&nbsp;<span class="ident" id="5791787"><a href="/gostd/net/smtp/smtp.go.html#5790859">net</a></span><span class="op" id="5791790">.</span><span class="ident" id="5791791"><a href="/gostd/net/ipsock.go.html#3313208">SplitHostPort</a></span><span class="op" id="5791804">(</span><span class="ident" id="5791805"><a href="/gostd/net/smtp/smtp.go.html#5791666">addr</a></span><span class="op" id="5791809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5791812">return</span>&nbsp;<span class="ident" id="5791819"><a href="/gostd/net/smtp/smtp.go.html#5791973">NewClient</a></span><span class="op" id="5791828">(</span><span class="ident" id="5791829"><a href="/gostd/net/smtp/smtp.go.html#5791699">conn</a></span><span class="op" id="5791833">,</span>&nbsp;<span class="ident" id="5791835"><a href="/gostd/net/smtp/smtp.go.html#5791773">host</a></span><span class="op" id="5791839">)</span><br>
<span class="lineno"></span><span class="op" id="5791841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5791844">//&nbsp;NewClient&nbsp;returns&nbsp;a&nbsp;new&nbsp;Client&nbsp;using&nbsp;an&nbsp;existing&nbsp;connection&nbsp;and&nbsp;host&nbsp;as&nbsp;a</span><br>
<span class="lineno">55</span><span class="comment" id="5791921">//&nbsp;server&nbsp;name&nbsp;to&nbsp;be&nbsp;used&nbsp;when&nbsp;authenticating.</span><br>
<span class="lineno"></span><span class="keyword" id="5791968">func</span>&nbsp;<span class="ident" id="5791973">NewClient</span><span class="op" id="5791982">(</span><span class="ident" id="5791983">conn</span>&nbsp;<span class="ident" id="5791988"><a href="/gostd/net/smtp/smtp.go.html#5790859">net</a></span><span class="op" id="5791991">.</span><span class="ident" id="5791992"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="5791996">,</span>&nbsp;<span class="ident" id="5791998">host</span>&nbsp;<span class="builtintype" id="5792003">string</span><span class="op" id="5792009">)</span>&nbsp;<span class="op" id="5792011">(</span><span class="op" id="5792012">*</span><span class="ident" id="5792013"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5792019">,</span>&nbsp;<span class="builtintype" id="5792021">error</span><span class="op" id="5792026">)</span>&nbsp;<span class="op" id="5792028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5792031">text</span>&nbsp;<span class="op" id="5792036">:=</span>&nbsp;<span class="ident" id="5792039"><a href="/gostd/net/smtp/smtp.go.html#5790866">textproto</a></span><span class="op" id="5792048">.</span><span class="ident" id="5792049"><a href="/gostd/net/textproto/textproto.go.html#4350610">NewConn</a></span><span class="op" id="5792056">(</span><span class="ident" id="5792057"><a href="/gostd/net/smtp/smtp.go.html#5791983">conn</a></span><span class="op" id="5792061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5792064">_</span><span class="op" id="5792065">,</span>&nbsp;<span class="ident" id="5792067">_</span><span class="op" id="5792068">,</span>&nbsp;<span class="ident" id="5792070">err</span>&nbsp;<span class="op" id="5792074">:=</span>&nbsp;<span class="ident" id="5792077"><a href="/gostd/net/smtp/smtp.go.html#5792031">text</a></span><span class="op" id="5792081">.</span><span class="ident" id="5792082"><a href="/gostd/net/textproto/reader.go.html#4339377">ReadResponse</a></span><span class="op" id="5792094">(</span><span class="num" id="5792095">220</span><span class="op" id="5792098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5792101">if</span>&nbsp;<span class="ident" id="5792104"><a href="/gostd/net/smtp/smtp.go.html#5792070">err</a></span>&nbsp;<span class="op" id="5792108">!=</span>&nbsp;<span class="builtintype" id="5792111">nil</span>&nbsp;<span class="op" id="5792115">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5792119"><a href="/gostd/net/smtp/smtp.go.html#5792031">text</a></span><span class="op" id="5792123">.</span><span class="ident" id="5792124"><a href="/gostd/net/textproto/textproto.go.html#4350823">Close</a></span><span class="op" id="5792129">(</span><span class="op" id="5792130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5792134">return</span>&nbsp;<span class="builtintype" id="5792141">nil</span><span class="op" id="5792144">,</span>&nbsp;<span class="ident" id="5792146"><a href="/gostd/net/smtp/smtp.go.html#5792070">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5792151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5792154">c</span>&nbsp;<span class="op" id="5792156">:=</span>&nbsp;<span class="op" id="5792159">&amp;</span><span class="ident" id="5792160"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5792166">{</span><span class="ident" id="5792167"><a href="/gostd/net/smtp/smtp.go.html#5791090">Text</a></span><span class="op" id="5792171">:</span>&nbsp;<span class="ident" id="5792173"><a href="/gostd/net/smtp/smtp.go.html#5792031">text</a></span><span class="op" id="5792177">,</span>&nbsp;<span class="ident" id="5792179"><a href="/gostd/net/smtp/smtp.go.html#5791206">conn</a></span><span class="op" id="5792183">:</span>&nbsp;<span class="ident" id="5792185"><a href="/gostd/net/smtp/smtp.go.html#5791983">conn</a></span><span class="op" id="5792189">,</span>&nbsp;<span class="ident" id="5792191"><a href="/gostd/net/smtp/smtp.go.html#5791274">serverName</a></span><span class="op" id="5792201">:</span>&nbsp;<span class="ident" id="5792203"><a href="/gostd/net/smtp/smtp.go.html#5791998">host</a></span><span class="op" id="5792207">,</span>&nbsp;<span class="ident" id="5792209"><a href="/gostd/net/smtp/smtp.go.html#5791399">localName</a></span><span class="op" id="5792218">:</span>&nbsp;<span class="string" id="5792220">&#34;localhost&#34;</span><span class="op" id="5792231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5792234">return</span>&nbsp;<span class="ident" id="5792241"><a href="/gostd/net/smtp/smtp.go.html#5792154">c</a></span><span class="op" id="5792242">,</span>&nbsp;<span class="builtintype" id="5792244">nil</span><br>
<span class="lineno">65</span><span class="op" id="5792248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5792251">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="5792283">func</span>&nbsp;<span class="op" id="5792288">(</span><span class="ident" id="5792289">c</span>&nbsp;<span class="op" id="5792291">*</span><span class="ident" id="5792292"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5792298">)</span>&nbsp;<span class="ident" id="5792300">Close</span><span class="op" id="5792305">(</span><span class="op" id="5792306">)</span>&nbsp;<span class="builtintype" id="5792308">error</span>&nbsp;<span class="op" id="5792314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5792317">return</span>&nbsp;<span class="ident" id="5792324"><a href="/gostd/net/smtp/smtp.go.html#5792289">c</a></span><span class="op" id="5792325">.</span><span class="ident" id="5792326"><a href="/gostd/net/smtp/smtp.go.html#5791090">Text</a></span><span class="op" id="5792330">.</span><span class="ident" id="5792331"><a href="/gostd/net/textproto/textproto.go.html#4350823">Close</a></span><span class="op" id="5792336">(</span><span class="op" id="5792337">)</span><br>
<span class="lineno">70</span><span class="op" id="5792339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5792342">//&nbsp;hello&nbsp;runs&nbsp;a&nbsp;hello&nbsp;exchange&nbsp;if&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="5792384">func</span>&nbsp;<span class="op" id="5792389">(</span><span class="ident" id="5792390">c</span>&nbsp;<span class="op" id="5792392">*</span><span class="ident" id="5792393"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5792399">)</span>&nbsp;<span class="ident" id="5792401">hello</span><span class="op" id="5792406">(</span><span class="op" id="5792407">)</span>&nbsp;<span class="builtintype" id="5792409">error</span>&nbsp;<span class="op" id="5792415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5792418">if</span>&nbsp;<span class="op" id="5792421">!</span><span class="ident" id="5792422"><a href="/gostd/net/smtp/smtp.go.html#5792390">c</a></span><span class="op" id="5792423">.</span><span class="ident" id="5792424"><a href="/gostd/net/smtp/smtp.go.html#5791450">didHello</a></span>&nbsp;<span class="op" id="5792433">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5792437"><a href="/gostd/net/smtp/smtp.go.html#5792390">c</a></span><span class="op" id="5792438">.</span><span class="ident" id="5792439"><a href="/gostd/net/smtp/smtp.go.html#5791450">didHello</a></span>&nbsp;<span class="op" id="5792448">=</span>&nbsp;<span class="builtintype" id="5792450">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5792457">err</span>&nbsp;<span class="op" id="5792461">:=</span>&nbsp;<span class="ident" id="5792464"><a href="/gostd/net/smtp/smtp.go.html#5792390">c</a></span><span class="op" id="5792465">.</span><span class="ident" id="5792466"><a href="/gostd/net/smtp/smtp.go.html#5793801">ehlo</a></span><span class="op" id="5792470">(</span><span class="op" id="5792471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5792475">if</span>&nbsp;<span class="ident" id="5792478"><a href="/gostd/net/smtp/smtp.go.html#5792457">err</a></span>&nbsp;<span class="op" id="5792482">!=</span>&nbsp;<span class="builtintype" id="5792485">nil</span>&nbsp;<span class="op" id="5792489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5792494"><a href="/gostd/net/smtp/smtp.go.html#5792390">c</a></span><span class="op" id="5792495">.</span><span class="ident" id="5792496"><a href="/gostd/net/smtp/smtp.go.html#5791501">helloError</a></span>&nbsp;<span class="op" id="5792507">=</span>&nbsp;<span class="ident" id="5792509"><a href="/gostd/net/smtp/smtp.go.html#5792390">c</a></span><span class="op" id="5792510">.</span><span class="ident" id="5792511"><a href="/gostd/net/smtp/smtp.go.html#5793560">helo</a></span><span class="op" id="5792515">(</span><span class="op" id="5792516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5792520">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5792523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5792526">return</span>&nbsp;<span class="ident" id="5792533"><a href="/gostd/net/smtp/smtp.go.html#5792390">c</a></span><span class="op" id="5792534">.</span><span class="ident" id="5792535"><a href="/gostd/net/smtp/smtp.go.html#5791501">helloError</a></span><br>
<span class="lineno"></span><span class="op" id="5792546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5792549">//&nbsp;Hello&nbsp;sends&nbsp;a&nbsp;HELO&nbsp;or&nbsp;EHLO&nbsp;to&nbsp;the&nbsp;server&nbsp;as&nbsp;the&nbsp;given&nbsp;host&nbsp;name.</span><br>
<span class="lineno">85</span><span class="comment" id="5792617">//&nbsp;Calling&nbsp;this&nbsp;method&nbsp;is&nbsp;only&nbsp;necessary&nbsp;if&nbsp;the&nbsp;client&nbsp;needs&nbsp;control</span><br>
<span class="lineno"></span><span class="comment" id="5792686">//&nbsp;over&nbsp;the&nbsp;host&nbsp;name&nbsp;used.&nbsp;&nbsp;The&nbsp;client&nbsp;will&nbsp;introduce&nbsp;itself&nbsp;as&nbsp;&#34;localhost&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5792763">//&nbsp;automatically&nbsp;otherwise.&nbsp;&nbsp;If&nbsp;Hello&nbsp;is&nbsp;called,&nbsp;it&nbsp;must&nbsp;be&nbsp;called&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="5792837">//&nbsp;any&nbsp;of&nbsp;the&nbsp;other&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="5792866">func</span>&nbsp;<span class="op" id="5792871">(</span><span class="ident" id="5792872">c</span>&nbsp;<span class="op" id="5792874">*</span><span class="ident" id="5792875"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5792881">)</span>&nbsp;<span class="ident" id="5792883">Hello</span><span class="op" id="5792888">(</span><span class="ident" id="5792889">localName</span>&nbsp;<span class="builtintype" id="5792899">string</span><span class="op" id="5792905">)</span>&nbsp;<span class="builtintype" id="5792907">error</span>&nbsp;<span class="op" id="5792913">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5792916">if</span>&nbsp;<span class="ident" id="5792919"><a href="/gostd/net/smtp/smtp.go.html#5792872">c</a></span><span class="op" id="5792920">.</span><span class="ident" id="5792921"><a href="/gostd/net/smtp/smtp.go.html#5791450">didHello</a></span>&nbsp;<span class="op" id="5792930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5792934">return</span>&nbsp;<span class="ident" id="5792941"><a href="/gostd/net/smtp/smtp.go.html#5790843">errors</a></span><span class="op" id="5792947">.</span><span class="ident" id="5792948"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5792951">(</span><span class="string" id="5792952">&#34;smtp:&nbsp;Hello&nbsp;called&nbsp;after&nbsp;other&nbsp;methods&#34;</span><span class="op" id="5792992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5792995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5792998"><a href="/gostd/net/smtp/smtp.go.html#5792872">c</a></span><span class="op" id="5792999">.</span><span class="ident" id="5793000"><a href="/gostd/net/smtp/smtp.go.html#5791399">localName</a></span>&nbsp;<span class="op" id="5793010">=</span>&nbsp;<span class="ident" id="5793012"><a href="/gostd/net/smtp/smtp.go.html#5792889">localName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5793023">return</span>&nbsp;<span class="ident" id="5793030"><a href="/gostd/net/smtp/smtp.go.html#5792872">c</a></span><span class="op" id="5793031">.</span><span class="ident" id="5793032"><a href="/gostd/net/smtp/smtp.go.html#5792401">hello</a></span><span class="op" id="5793037">(</span><span class="op" id="5793038">)</span><br>
<span class="lineno">95</span><span class="op" id="5793040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5793043">//&nbsp;cmd&nbsp;is&nbsp;a&nbsp;convenience&nbsp;function&nbsp;that&nbsp;sends&nbsp;a&nbsp;command&nbsp;and&nbsp;returns&nbsp;the&nbsp;response</span><br>
<span class="lineno"></span><span class="keyword" id="5793122">func</span>&nbsp;<span class="op" id="5793127">(</span><span class="ident" id="5793128">c</span>&nbsp;<span class="op" id="5793130">*</span><span class="ident" id="5793131"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5793137">)</span>&nbsp;<span class="ident" id="5793139">cmd</span><span class="op" id="5793142">(</span><span class="ident" id="5793143">expectCode</span>&nbsp;<span class="builtintype" id="5793154">int</span><span class="op" id="5793157">,</span>&nbsp;<span class="ident" id="5793159">format</span>&nbsp;<span class="builtintype" id="5793166">string</span><span class="op" id="5793172">,</span>&nbsp;<span class="ident" id="5793174">args</span>&nbsp;<span class="op" id="5793179">...</span><span class="keyword" id="5793182">interface</span><span class="op" id="5793191">{</span><span class="op" id="5793192">}</span><span class="op" id="5793193">)</span>&nbsp;<span class="op" id="5793195">(</span><span class="builtintype" id="5793196">int</span><span class="op" id="5793199">,</span>&nbsp;<span class="builtintype" id="5793201">string</span><span class="op" id="5793207">,</span>&nbsp;<span class="builtintype" id="5793209">error</span><span class="op" id="5793214">)</span>&nbsp;<span class="op" id="5793216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5793219">id</span><span class="op" id="5793221">,</span>&nbsp;<span class="ident" id="5793223">err</span>&nbsp;<span class="op" id="5793227">:=</span>&nbsp;<span class="ident" id="5793230"><a href="/gostd/net/smtp/smtp.go.html#5793128">c</a></span><span class="op" id="5793231">.</span><span class="ident" id="5793232"><a href="/gostd/net/smtp/smtp.go.html#5791090">Text</a></span><span class="op" id="5793236">.</span><span class="ident" id="5793237"><a href="/gostd/net/textproto/textproto.go.html#4351825">Cmd</a></span><span class="op" id="5793240">(</span><span class="ident" id="5793241"><a href="/gostd/net/smtp/smtp.go.html#5793159">format</a></span><span class="op" id="5793247">,</span>&nbsp;<span class="ident" id="5793249"><a href="/gostd/net/smtp/smtp.go.html#5793174">args</a></span><span class="op" id="5793253">...</span><span class="op" id="5793256">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5793259">if</span>&nbsp;<span class="ident" id="5793262"><a href="/gostd/net/smtp/smtp.go.html#5793223">err</a></span>&nbsp;<span class="op" id="5793266">!=</span>&nbsp;<span class="builtintype" id="5793269">nil</span>&nbsp;<span class="op" id="5793273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5793277">return</span>&nbsp;<span class="num" id="5793284">0</span><span class="op" id="5793285">,</span>&nbsp;<span class="string" id="5793287">&#34;&#34;</span><span class="op" id="5793289">,</span>&nbsp;<span class="ident" id="5793291"><a href="/gostd/net/smtp/smtp.go.html#5793223">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5793296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5793299"><a href="/gostd/net/smtp/smtp.go.html#5793128">c</a></span><span class="op" id="5793300">.</span><span class="ident" id="5793301"><a href="/gostd/net/smtp/smtp.go.html#5791090">Text</a></span><span class="op" id="5793305">.</span><span class="ident" id="5793306"><a href="/gostd/net/textproto/pipeline.go.html#4331187">StartResponse</a></span><span class="op" id="5793319">(</span><span class="ident" id="5793320"><a href="/gostd/net/smtp/smtp.go.html#5793219">id</a></span><span class="op" id="5793322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5793325">defer</span>&nbsp;<span class="ident" id="5793331"><a href="/gostd/net/smtp/smtp.go.html#5793128">c</a></span><span class="op" id="5793332">.</span><span class="ident" id="5793333"><a href="/gostd/net/smtp/smtp.go.html#5791090">Text</a></span><span class="op" id="5793337">.</span><span class="ident" id="5793338"><a href="/gostd/net/textproto/pipeline.go.html#4331372">EndResponse</a></span><span class="op" id="5793349">(</span><span class="ident" id="5793350"><a href="/gostd/net/smtp/smtp.go.html#5793219">id</a></span><span class="op" id="5793352">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5793355">code</span><span class="op" id="5793359">,</span>&nbsp;<span class="ident" id="5793361">msg</span><span class="op" id="5793364">,</span>&nbsp;<span class="ident" id="5793366"><a href="/gostd/net/smtp/smtp.go.html#5793223">err</a></span>&nbsp;<span class="op" id="5793370">:=</span>&nbsp;<span class="ident" id="5793373"><a href="/gostd/net/smtp/smtp.go.html#5793128">c</a></span><span class="op" id="5793374">.</span><span class="ident" id="5793375"><a href="/gostd/net/smtp/smtp.go.html#5791090">Text</a></span><span class="op" id="5793379">.</span><span class="ident" id="5793380"><a href="/gostd/net/textproto/reader.go.html#4339377">ReadResponse</a></span><span class="op" id="5793392">(</span><span class="ident" id="5793393"><a href="/gostd/net/smtp/smtp.go.html#5793143">expectCode</a></span><span class="op" id="5793403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5793406">return</span>&nbsp;<span class="ident" id="5793413"><a href="/gostd/net/smtp/smtp.go.html#5793355">code</a></span><span class="op" id="5793417">,</span>&nbsp;<span class="ident" id="5793419"><a href="/gostd/net/smtp/smtp.go.html#5793361">msg</a></span><span class="op" id="5793422">,</span>&nbsp;<span class="ident" id="5793424"><a href="/gostd/net/smtp/smtp.go.html#5793223">err</a></span><br>
<span class="lineno"></span><span class="op" id="5793428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5793431">//&nbsp;helo&nbsp;sends&nbsp;the&nbsp;HELO&nbsp;greeting&nbsp;to&nbsp;the&nbsp;server.&nbsp;It&nbsp;should&nbsp;be&nbsp;used&nbsp;only&nbsp;when&nbsp;the</span><br>
<span class="lineno">110</span><span class="comment" id="5793510">//&nbsp;server&nbsp;does&nbsp;not&nbsp;support&nbsp;ehlo.</span><br>
<span class="lineno"></span><span class="keyword" id="5793543">func</span>&nbsp;<span class="op" id="5793548">(</span><span class="ident" id="5793549">c</span>&nbsp;<span class="op" id="5793551">*</span><span class="ident" id="5793552"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5793558">)</span>&nbsp;<span class="ident" id="5793560">helo</span><span class="op" id="5793564">(</span><span class="op" id="5793565">)</span>&nbsp;<span class="builtintype" id="5793567">error</span>&nbsp;<span class="op" id="5793573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5793576"><a href="/gostd/net/smtp/smtp.go.html#5793549">c</a></span><span class="op" id="5793577">.</span><span class="ident" id="5793578"><a href="/gostd/net/smtp/smtp.go.html#5791325">ext</a></span>&nbsp;<span class="op" id="5793582">=</span>&nbsp;<span class="builtintype" id="5793584">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5793589">_</span><span class="op" id="5793590">,</span>&nbsp;<span class="ident" id="5793592">_</span><span class="op" id="5793593">,</span>&nbsp;<span class="ident" id="5793595">err</span>&nbsp;<span class="op" id="5793599">:=</span>&nbsp;<span class="ident" id="5793602"><a href="/gostd/net/smtp/smtp.go.html#5793549">c</a></span><span class="op" id="5793603">.</span><span class="ident" id="5793604"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5793607">(</span><span class="num" id="5793608">250</span><span class="op" id="5793611">,</span>&nbsp;<span class="string" id="5793613">&#34;HELO&nbsp;%s&#34;</span><span class="op" id="5793622">,</span>&nbsp;<span class="ident" id="5793624"><a href="/gostd/net/smtp/smtp.go.html#5793549">c</a></span><span class="op" id="5793625">.</span><span class="ident" id="5793626"><a href="/gostd/net/smtp/smtp.go.html#5791399">localName</a></span><span class="op" id="5793635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5793638">return</span>&nbsp;<span class="ident" id="5793645"><a href="/gostd/net/smtp/smtp.go.html#5793595">err</a></span><br>
<span class="lineno">115</span><span class="op" id="5793649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5793652">//&nbsp;ehlo&nbsp;sends&nbsp;the&nbsp;EHLO&nbsp;(extended&nbsp;hello)&nbsp;greeting&nbsp;to&nbsp;the&nbsp;server.&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="5793719">//&nbsp;should&nbsp;be&nbsp;the&nbsp;preferred&nbsp;greeting&nbsp;for&nbsp;servers&nbsp;that&nbsp;support&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5793784">func</span>&nbsp;<span class="op" id="5793789">(</span><span class="ident" id="5793790">c</span>&nbsp;<span class="op" id="5793792">*</span><span class="ident" id="5793793"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5793799">)</span>&nbsp;<span class="ident" id="5793801">ehlo</span><span class="op" id="5793805">(</span><span class="op" id="5793806">)</span>&nbsp;<span class="builtintype" id="5793808">error</span>&nbsp;<span class="op" id="5793814">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5793817">_</span><span class="op" id="5793818">,</span>&nbsp;<span class="ident" id="5793820">msg</span><span class="op" id="5793823">,</span>&nbsp;<span class="ident" id="5793825">err</span>&nbsp;<span class="op" id="5793829">:=</span>&nbsp;<span class="ident" id="5793832"><a href="/gostd/net/smtp/smtp.go.html#5793790">c</a></span><span class="op" id="5793833">.</span><span class="ident" id="5793834"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5793837">(</span><span class="num" id="5793838">250</span><span class="op" id="5793841">,</span>&nbsp;<span class="string" id="5793843">&#34;EHLO&nbsp;%s&#34;</span><span class="op" id="5793852">,</span>&nbsp;<span class="ident" id="5793854"><a href="/gostd/net/smtp/smtp.go.html#5793790">c</a></span><span class="op" id="5793855">.</span><span class="ident" id="5793856"><a href="/gostd/net/smtp/smtp.go.html#5791399">localName</a></span><span class="op" id="5793865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5793868">if</span>&nbsp;<span class="ident" id="5793871"><a href="/gostd/net/smtp/smtp.go.html#5793825">err</a></span>&nbsp;<span class="op" id="5793875">!=</span>&nbsp;<span class="builtintype" id="5793878">nil</span>&nbsp;<span class="op" id="5793882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5793886">return</span>&nbsp;<span class="ident" id="5793893"><a href="/gostd/net/smtp/smtp.go.html#5793825">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5793898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5793901">ext</span>&nbsp;<span class="op" id="5793905">:=</span>&nbsp;<span class="builtinfunc" id="5793908">make</span><span class="op" id="5793912">(</span><span class="keyword" id="5793913">map</span><span class="op" id="5793916">[</span><span class="builtintype" id="5793917">string</span><span class="op" id="5793923">]</span><span class="builtintype" id="5793924">string</span><span class="op" id="5793930">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5793933">extList</span>&nbsp;<span class="op" id="5793941">:=</span>&nbsp;<span class="ident" id="5793944"><a href="/gostd/net/smtp/smtp.go.html#5790883">strings</a></span><span class="op" id="5793951">.</span><span class="ident" id="5793952"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="5793957">(</span><span class="ident" id="5793958"><a href="/gostd/net/smtp/smtp.go.html#5793820">msg</a></span><span class="op" id="5793961">,</span>&nbsp;<span class="string" id="5793963">&#34;\n&#34;</span><span class="op" id="5793967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5793970">if</span>&nbsp;<span class="builtinfunc" id="5793973">len</span><span class="op" id="5793976">(</span><span class="ident" id="5793977"><a href="/gostd/net/smtp/smtp.go.html#5793933">extList</a></span><span class="op" id="5793984">)</span>&nbsp;<span class="op" id="5793986">&gt;</span>&nbsp;<span class="num" id="5793988">1</span>&nbsp;<span class="op" id="5793990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5793994"><a href="/gostd/net/smtp/smtp.go.html#5793933">extList</a></span>&nbsp;<span class="op" id="5794002">=</span>&nbsp;<span class="ident" id="5794004"><a href="/gostd/net/smtp/smtp.go.html#5793933">extList</a></span><span class="op" id="5794011">[</span><span class="num" id="5794012">1</span><span class="op" id="5794013">:</span><span class="op" id="5794014">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5794018">for</span>&nbsp;<span class="ident" id="5794022">_</span><span class="op" id="5794023">,</span>&nbsp;<span class="ident" id="5794025">line</span>&nbsp;<span class="op" id="5794030">:=</span>&nbsp;<span class="keyword" id="5794033">range</span>&nbsp;<span class="ident" id="5794039"><a href="/gostd/net/smtp/smtp.go.html#5793933">extList</a></span>&nbsp;<span class="op" id="5794047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5794052">args</span>&nbsp;<span class="op" id="5794057">:=</span>&nbsp;<span class="ident" id="5794060"><a href="/gostd/net/smtp/smtp.go.html#5790883">strings</a></span><span class="op" id="5794067">.</span><span class="ident" id="5794068"><a href="/gostd/strings/strings.go.html#2972338">SplitN</a></span><span class="op" id="5794074">(</span><span class="ident" id="5794075"><a href="/gostd/net/smtp/smtp.go.html#5794025">line</a></span><span class="op" id="5794079">,</span>&nbsp;<span class="string" id="5794081">&#34;&nbsp;&#34;</span><span class="op" id="5794084">,</span>&nbsp;<span class="num" id="5794086">2</span><span class="op" id="5794087">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5794092">if</span>&nbsp;<span class="builtinfunc" id="5794095">len</span><span class="op" id="5794098">(</span><span class="ident" id="5794099"><a href="/gostd/net/smtp/smtp.go.html#5794052">args</a></span><span class="op" id="5794103">)</span>&nbsp;<span class="op" id="5794105">&gt;</span>&nbsp;<span class="num" id="5794107">1</span>&nbsp;<span class="op" id="5794109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5794115"><a href="/gostd/net/smtp/smtp.go.html#5793901">ext</a></span><span class="op" id="5794118">[</span><span class="ident" id="5794119"><a href="/gostd/net/smtp/smtp.go.html#5794052">args</a></span><span class="op" id="5794123">[</span><span class="num" id="5794124">0</span><span class="op" id="5794125">]</span><span class="op" id="5794126">]</span>&nbsp;<span class="op" id="5794128">=</span>&nbsp;<span class="ident" id="5794130"><a href="/gostd/net/smtp/smtp.go.html#5794052">args</a></span><span class="op" id="5794134">[</span><span class="num" id="5794135">1</span><span class="op" id="5794136">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5794141">}</span>&nbsp;<span class="keyword" id="5794143">else</span>&nbsp;<span class="op" id="5794148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5794154"><a href="/gostd/net/smtp/smtp.go.html#5793901">ext</a></span><span class="op" id="5794157">[</span><span class="ident" id="5794158"><a href="/gostd/net/smtp/smtp.go.html#5794052">args</a></span><span class="op" id="5794162">[</span><span class="num" id="5794163">0</span><span class="op" id="5794164">]</span><span class="op" id="5794165">]</span>&nbsp;<span class="op" id="5794167">=</span>&nbsp;<span class="string" id="5794169">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5794175">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5794179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5794182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5794185">if</span>&nbsp;<span class="ident" id="5794188">mechs</span><span class="op" id="5794193">,</span>&nbsp;<span class="ident" id="5794195">ok</span>&nbsp;<span class="op" id="5794198">:=</span>&nbsp;<span class="ident" id="5794201"><a href="/gostd/net/smtp/smtp.go.html#5793901">ext</a></span><span class="op" id="5794204">[</span><span class="string" id="5794205">&#34;AUTH&#34;</span><span class="op" id="5794211">]</span><span class="op" id="5794212">;</span>&nbsp;<span class="ident" id="5794214"><a href="/gostd/net/smtp/smtp.go.html#5794195">ok</a></span>&nbsp;<span class="op" id="5794217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5794221"><a href="/gostd/net/smtp/smtp.go.html#5793790">c</a></span><span class="op" id="5794222">.</span><span class="ident" id="5794223"><a href="/gostd/net/smtp/smtp.go.html#5791378">auth</a></span>&nbsp;<span class="op" id="5794228">=</span>&nbsp;<span class="ident" id="5794230"><a href="/gostd/net/smtp/smtp.go.html#5790883">strings</a></span><span class="op" id="5794237">.</span><span class="ident" id="5794238"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="5794243">(</span><span class="ident" id="5794244"><a href="/gostd/net/smtp/smtp.go.html#5794188">mechs</a></span><span class="op" id="5794249">,</span>&nbsp;<span class="string" id="5794251">&#34;&nbsp;&#34;</span><span class="op" id="5794254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5794257">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5794260"><a href="/gostd/net/smtp/smtp.go.html#5793790">c</a></span><span class="op" id="5794261">.</span><span class="ident" id="5794262"><a href="/gostd/net/smtp/smtp.go.html#5791325">ext</a></span>&nbsp;<span class="op" id="5794266">=</span>&nbsp;<span class="ident" id="5794268"><a href="/gostd/net/smtp/smtp.go.html#5793901">ext</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5794273">return</span>&nbsp;<span class="ident" id="5794280"><a href="/gostd/net/smtp/smtp.go.html#5793825">err</a></span><br>
<span class="lineno"></span><span class="op" id="5794284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5794287">//&nbsp;StartTLS&nbsp;sends&nbsp;the&nbsp;STARTTLS&nbsp;command&nbsp;and&nbsp;encrypts&nbsp;all&nbsp;further&nbsp;communication.</span><br>
<span class="lineno">145</span><span class="comment" id="5794366">//&nbsp;Only&nbsp;servers&nbsp;that&nbsp;advertise&nbsp;the&nbsp;STARTTLS&nbsp;extension&nbsp;support&nbsp;this&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5794443">func</span>&nbsp;<span class="op" id="5794448">(</span><span class="ident" id="5794449">c</span>&nbsp;<span class="op" id="5794451">*</span><span class="ident" id="5794452"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5794458">)</span>&nbsp;<span class="ident" id="5794460">StartTLS</span><span class="op" id="5794468">(</span><span class="ident" id="5794469">config</span>&nbsp;<span class="op" id="5794476">*</span><span class="ident" id="5794477"><a href="/gostd/net/smtp/smtp.go.html#5790810">tls</a></span><span class="op" id="5794480">.</span><span class="ident" id="5794481"><a href="/gostd/crypto/tls/common.go.html#4450481">Config</a></span><span class="op" id="5794487">)</span>&nbsp;<span class="builtintype" id="5794489">error</span>&nbsp;<span class="op" id="5794495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5794498">if</span>&nbsp;<span class="ident" id="5794501">err</span>&nbsp;<span class="op" id="5794505">:=</span>&nbsp;<span class="ident" id="5794508"><a href="/gostd/net/smtp/smtp.go.html#5794449">c</a></span><span class="op" id="5794509">.</span><span class="ident" id="5794510"><a href="/gostd/net/smtp/smtp.go.html#5792401">hello</a></span><span class="op" id="5794515">(</span><span class="op" id="5794516">)</span><span class="op" id="5794517">;</span>&nbsp;<span class="ident" id="5794519"><a href="/gostd/net/smtp/smtp.go.html#5794501">err</a></span>&nbsp;<span class="op" id="5794523">!=</span>&nbsp;<span class="builtintype" id="5794526">nil</span>&nbsp;<span class="op" id="5794530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5794534">return</span>&nbsp;<span class="ident" id="5794541"><a href="/gostd/net/smtp/smtp.go.html#5794501">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5794546">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5794549">_</span><span class="op" id="5794550">,</span>&nbsp;<span class="ident" id="5794552">_</span><span class="op" id="5794553">,</span>&nbsp;<span class="ident" id="5794555">err</span>&nbsp;<span class="op" id="5794559">:=</span>&nbsp;<span class="ident" id="5794562"><a href="/gostd/net/smtp/smtp.go.html#5794449">c</a></span><span class="op" id="5794563">.</span><span class="ident" id="5794564"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5794567">(</span><span class="num" id="5794568">220</span><span class="op" id="5794571">,</span>&nbsp;<span class="string" id="5794573">&#34;STARTTLS&#34;</span><span class="op" id="5794583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5794586">if</span>&nbsp;<span class="ident" id="5794589"><a href="/gostd/net/smtp/smtp.go.html#5794555">err</a></span>&nbsp;<span class="op" id="5794593">!=</span>&nbsp;<span class="builtintype" id="5794596">nil</span>&nbsp;<span class="op" id="5794600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5794604">return</span>&nbsp;<span class="ident" id="5794611"><a href="/gostd/net/smtp/smtp.go.html#5794555">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5794616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5794619"><a href="/gostd/net/smtp/smtp.go.html#5794449">c</a></span><span class="op" id="5794620">.</span><span class="ident" id="5794621"><a href="/gostd/net/smtp/smtp.go.html#5791206">conn</a></span>&nbsp;<span class="op" id="5794626">=</span>&nbsp;<span class="ident" id="5794628"><a href="/gostd/net/smtp/smtp.go.html#5790810">tls</a></span><span class="op" id="5794631">.</span><span class="ident" id="5794632"><a href="/gostd/crypto/tls/tls.go.html#4584036">Client</a></span><span class="op" id="5794638">(</span><span class="ident" id="5794639"><a href="/gostd/net/smtp/smtp.go.html#5794449">c</a></span><span class="op" id="5794640">.</span><span class="ident" id="5794641"><a href="/gostd/net/smtp/smtp.go.html#5791206">conn</a></span><span class="op" id="5794645">,</span>&nbsp;<span class="ident" id="5794647"><a href="/gostd/net/smtp/smtp.go.html#5794469">config</a></span><span class="op" id="5794653">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5794656"><a href="/gostd/net/smtp/smtp.go.html#5794449">c</a></span><span class="op" id="5794657">.</span><span class="ident" id="5794658"><a href="/gostd/net/smtp/smtp.go.html#5791090">Text</a></span>&nbsp;<span class="op" id="5794663">=</span>&nbsp;<span class="ident" id="5794665"><a href="/gostd/net/smtp/smtp.go.html#5790866">textproto</a></span><span class="op" id="5794674">.</span><span class="ident" id="5794675"><a href="/gostd/net/textproto/textproto.go.html#4350610">NewConn</a></span><span class="op" id="5794682">(</span><span class="ident" id="5794683"><a href="/gostd/net/smtp/smtp.go.html#5794449">c</a></span><span class="op" id="5794684">.</span><span class="ident" id="5794685"><a href="/gostd/net/smtp/smtp.go.html#5791206">conn</a></span><span class="op" id="5794689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5794692"><a href="/gostd/net/smtp/smtp.go.html#5794449">c</a></span><span class="op" id="5794693">.</span><span class="ident" id="5794694"><a href="/gostd/net/smtp/smtp.go.html#5791257">tls</a></span>&nbsp;<span class="op" id="5794698">=</span>&nbsp;<span class="builtintype" id="5794700">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5794706">return</span>&nbsp;<span class="ident" id="5794713"><a href="/gostd/net/smtp/smtp.go.html#5794449">c</a></span><span class="op" id="5794714">.</span><span class="ident" id="5794715"><a href="/gostd/net/smtp/smtp.go.html#5793801">ehlo</a></span><span class="op" id="5794719">(</span><span class="op" id="5794720">)</span><br>
<span class="lineno"></span><span class="op" id="5794722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="5794725">//&nbsp;Verify&nbsp;checks&nbsp;the&nbsp;validity&nbsp;of&nbsp;an&nbsp;email&nbsp;address&nbsp;on&nbsp;the&nbsp;server.</span><br>
<span class="lineno"></span><span class="comment" id="5794790">//&nbsp;If&nbsp;Verify&nbsp;returns&nbsp;nil,&nbsp;the&nbsp;address&nbsp;is&nbsp;valid.&nbsp;A&nbsp;non-nil&nbsp;return</span><br>
<span class="lineno"></span><span class="comment" id="5794855">//&nbsp;does&nbsp;not&nbsp;necessarily&nbsp;indicate&nbsp;an&nbsp;invalid&nbsp;address.&nbsp;Many&nbsp;servers</span><br>
<span class="lineno"></span><span class="comment" id="5794921">//&nbsp;will&nbsp;not&nbsp;verify&nbsp;addresses&nbsp;for&nbsp;security&nbsp;reasons.</span><br>
<span class="lineno"></span><span class="keyword" id="5794972">func</span>&nbsp;<span class="op" id="5794977">(</span><span class="ident" id="5794978">c</span>&nbsp;<span class="op" id="5794980">*</span><span class="ident" id="5794981"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5794987">)</span>&nbsp;<span class="ident" id="5794989">Verify</span><span class="op" id="5794995">(</span><span class="ident" id="5794996">addr</span>&nbsp;<span class="builtintype" id="5795001">string</span><span class="op" id="5795007">)</span>&nbsp;<span class="builtintype" id="5795009">error</span>&nbsp;<span class="op" id="5795015">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795018">if</span>&nbsp;<span class="ident" id="5795021">err</span>&nbsp;<span class="op" id="5795025">:=</span>&nbsp;<span class="ident" id="5795028"><a href="/gostd/net/smtp/smtp.go.html#5794978">c</a></span><span class="op" id="5795029">.</span><span class="ident" id="5795030"><a href="/gostd/net/smtp/smtp.go.html#5792401">hello</a></span><span class="op" id="5795035">(</span><span class="op" id="5795036">)</span><span class="op" id="5795037">;</span>&nbsp;<span class="ident" id="5795039"><a href="/gostd/net/smtp/smtp.go.html#5795021">err</a></span>&nbsp;<span class="op" id="5795043">!=</span>&nbsp;<span class="builtintype" id="5795046">nil</span>&nbsp;<span class="op" id="5795050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795054">return</span>&nbsp;<span class="ident" id="5795061"><a href="/gostd/net/smtp/smtp.go.html#5795021">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5795066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795069">_</span><span class="op" id="5795070">,</span>&nbsp;<span class="ident" id="5795072">_</span><span class="op" id="5795073">,</span>&nbsp;<span class="ident" id="5795075">err</span>&nbsp;<span class="op" id="5795079">:=</span>&nbsp;<span class="ident" id="5795082"><a href="/gostd/net/smtp/smtp.go.html#5794978">c</a></span><span class="op" id="5795083">.</span><span class="ident" id="5795084"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5795087">(</span><span class="num" id="5795088">250</span><span class="op" id="5795091">,</span>&nbsp;<span class="string" id="5795093">&#34;VRFY&nbsp;%s&#34;</span><span class="op" id="5795102">,</span>&nbsp;<span class="ident" id="5795104"><a href="/gostd/net/smtp/smtp.go.html#5794996">addr</a></span><span class="op" id="5795108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795111">return</span>&nbsp;<span class="ident" id="5795118"><a href="/gostd/net/smtp/smtp.go.html#5795075">err</a></span><br>
<span class="lineno">170</span><span class="op" id="5795122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5795125">//&nbsp;Auth&nbsp;authenticates&nbsp;a&nbsp;client&nbsp;using&nbsp;the&nbsp;provided&nbsp;authentication&nbsp;mechanism.</span><br>
<span class="lineno"></span><span class="comment" id="5795201">//&nbsp;A&nbsp;failed&nbsp;authentication&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="5795251">//&nbsp;Only&nbsp;servers&nbsp;that&nbsp;advertise&nbsp;the&nbsp;AUTH&nbsp;extension&nbsp;support&nbsp;this&nbsp;function.</span><br>
<span class="lineno">175</span><span class="keyword" id="5795324">func</span>&nbsp;<span class="op" id="5795329">(</span><span class="ident" id="5795330">c</span>&nbsp;<span class="op" id="5795332">*</span><span class="ident" id="5795333"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5795339">)</span>&nbsp;<span class="ident" id="5795341">Auth</span><span class="op" id="5795345">(</span><span class="ident" id="5795346">a</span>&nbsp;<span class="ident" id="5795348"><a href="/gostd/net/smtp/auth.go.html#5787279">Auth</a></span><span class="op" id="5795352">)</span>&nbsp;<span class="builtintype" id="5795354">error</span>&nbsp;<span class="op" id="5795360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795363">if</span>&nbsp;<span class="ident" id="5795366">err</span>&nbsp;<span class="op" id="5795370">:=</span>&nbsp;<span class="ident" id="5795373"><a href="/gostd/net/smtp/smtp.go.html#5795330">c</a></span><span class="op" id="5795374">.</span><span class="ident" id="5795375"><a href="/gostd/net/smtp/smtp.go.html#5792401">hello</a></span><span class="op" id="5795380">(</span><span class="op" id="5795381">)</span><span class="op" id="5795382">;</span>&nbsp;<span class="ident" id="5795384"><a href="/gostd/net/smtp/smtp.go.html#5795366">err</a></span>&nbsp;<span class="op" id="5795388">!=</span>&nbsp;<span class="builtintype" id="5795391">nil</span>&nbsp;<span class="op" id="5795395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795399">return</span>&nbsp;<span class="ident" id="5795406"><a href="/gostd/net/smtp/smtp.go.html#5795366">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5795411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795414">encoding</span>&nbsp;<span class="op" id="5795423">:=</span>&nbsp;<span class="ident" id="5795426"><a href="/gostd/net/smtp/smtp.go.html#5790824">base64</a></span><span class="op" id="5795432">.</span><span class="ident" id="5795433"><a href="/gostd/encoding/base64/base64.go.html#4053069">StdEncoding</a></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795446">mech</span><span class="op" id="5795450">,</span>&nbsp;<span class="ident" id="5795452">resp</span><span class="op" id="5795456">,</span>&nbsp;<span class="ident" id="5795458">err</span>&nbsp;<span class="op" id="5795462">:=</span>&nbsp;<span class="ident" id="5795465"><a href="/gostd/net/smtp/smtp.go.html#5795346">a</a></span><span class="op" id="5795466">.</span><span class="ident" id="5795467"><a href="/gostd/net/smtp/auth.go.html#5787690">Start</a></span><span class="op" id="5795472">(</span><span class="op" id="5795473">&amp;</span><span class="ident" id="5795474"><a href="/gostd/net/smtp/auth.go.html#5788236">ServerInfo</a></span><span class="op" id="5795484">{</span><span class="ident" id="5795485"><a href="/gostd/net/smtp/smtp.go.html#5795330">c</a></span><span class="op" id="5795486">.</span><span class="ident" id="5795487"><a href="/gostd/net/smtp/smtp.go.html#5791274">serverName</a></span><span class="op" id="5795497">,</span>&nbsp;<span class="ident" id="5795499"><a href="/gostd/net/smtp/smtp.go.html#5795330">c</a></span><span class="op" id="5795500">.</span><span class="ident" id="5795501"><a href="/gostd/net/smtp/smtp.go.html#5791257">tls</a></span><span class="op" id="5795504">,</span>&nbsp;<span class="ident" id="5795506"><a href="/gostd/net/smtp/smtp.go.html#5795330">c</a></span><span class="op" id="5795507">.</span><span class="ident" id="5795508"><a href="/gostd/net/smtp/smtp.go.html#5791378">auth</a></span><span class="op" id="5795512">}</span><span class="op" id="5795513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795516">if</span>&nbsp;<span class="ident" id="5795519"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span>&nbsp;<span class="op" id="5795523">!=</span>&nbsp;<span class="builtintype" id="5795526">nil</span>&nbsp;<span class="op" id="5795530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795534"><a href="/gostd/net/smtp/smtp.go.html#5795330">c</a></span><span class="op" id="5795535">.</span><span class="ident" id="5795536"><a href="/gostd/net/smtp/smtp.go.html#5799642">Quit</a></span><span class="op" id="5795540">(</span><span class="op" id="5795541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795545">return</span>&nbsp;<span class="ident" id="5795552"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5795557">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795560">resp64</span>&nbsp;<span class="op" id="5795567">:=</span>&nbsp;<span class="builtinfunc" id="5795570">make</span><span class="op" id="5795574">(</span><span class="op" id="5795575">[</span><span class="op" id="5795576">]</span><span class="builtintype" id="5795577">byte</span><span class="op" id="5795581">,</span>&nbsp;<span class="ident" id="5795583"><a href="/gostd/net/smtp/smtp.go.html#5795414">encoding</a></span><span class="op" id="5795591">.</span><span class="ident" id="5795592"><a href="/gostd/encoding/base64/base64.go.html#4056463">EncodedLen</a></span><span class="op" id="5795602">(</span><span class="builtinfunc" id="5795603">len</span><span class="op" id="5795606">(</span><span class="ident" id="5795607"><a href="/gostd/net/smtp/smtp.go.html#5795452">resp</a></span><span class="op" id="5795611">)</span><span class="op" id="5795612">)</span><span class="op" id="5795613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795616"><a href="/gostd/net/smtp/smtp.go.html#5795414">encoding</a></span><span class="op" id="5795624">.</span><span class="ident" id="5795625"><a href="/gostd/encoding/base64/base64.go.html#4053678">Encode</a></span><span class="op" id="5795631">(</span><span class="ident" id="5795632"><a href="/gostd/net/smtp/smtp.go.html#5795560">resp64</a></span><span class="op" id="5795638">,</span>&nbsp;<span class="ident" id="5795640"><a href="/gostd/net/smtp/smtp.go.html#5795452">resp</a></span><span class="op" id="5795644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795647">code</span><span class="op" id="5795651">,</span>&nbsp;<span class="ident" id="5795653">msg64</span><span class="op" id="5795658">,</span>&nbsp;<span class="ident" id="5795660"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span>&nbsp;<span class="op" id="5795664">:=</span>&nbsp;<span class="ident" id="5795667"><a href="/gostd/net/smtp/smtp.go.html#5795330">c</a></span><span class="op" id="5795668">.</span><span class="ident" id="5795669"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5795672">(</span><span class="num" id="5795673">0</span><span class="op" id="5795674">,</span>&nbsp;<span class="string" id="5795676">&#34;AUTH&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="5795688">,</span>&nbsp;<span class="ident" id="5795690"><a href="/gostd/net/smtp/smtp.go.html#5795446">mech</a></span><span class="op" id="5795694">,</span>&nbsp;<span class="ident" id="5795696"><a href="/gostd/net/smtp/smtp.go.html#5795560">resp64</a></span><span class="op" id="5795702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795705">for</span>&nbsp;<span class="ident" id="5795709"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span>&nbsp;<span class="op" id="5795713">==</span>&nbsp;<span class="builtintype" id="5795716">nil</span>&nbsp;<span class="op" id="5795720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795724">var</span>&nbsp;<span class="ident" id="5795728">msg</span>&nbsp;<span class="op" id="5795732">[</span><span class="op" id="5795733">]</span><span class="builtintype" id="5795734">byte</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795741">switch</span>&nbsp;<span class="ident" id="5795748"><a href="/gostd/net/smtp/smtp.go.html#5795647">code</a></span>&nbsp;<span class="op" id="5795753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795757">case</span>&nbsp;<span class="num" id="5795762">334</span><span class="op" id="5795765">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795770"><a href="/gostd/net/smtp/smtp.go.html#5795728">msg</a></span><span class="op" id="5795773">,</span>&nbsp;<span class="ident" id="5795775"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span>&nbsp;<span class="op" id="5795779">=</span>&nbsp;<span class="ident" id="5795781"><a href="/gostd/net/smtp/smtp.go.html#5795414">encoding</a></span><span class="op" id="5795789">.</span><span class="ident" id="5795790"><a href="/gostd/encoding/base64/base64.go.html#4058942">DecodeString</a></span><span class="op" id="5795802">(</span><span class="ident" id="5795803"><a href="/gostd/net/smtp/smtp.go.html#5795653">msg64</a></span><span class="op" id="5795808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795812">case</span>&nbsp;<span class="num" id="5795817">235</span><span class="op" id="5795820">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5795825">//&nbsp;the&nbsp;last&nbsp;message&nbsp;isn&#39;t&nbsp;base64&nbsp;because&nbsp;it&nbsp;isn&#39;t&nbsp;a&nbsp;challenge</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795890"><a href="/gostd/net/smtp/smtp.go.html#5795728">msg</a></span>&nbsp;<span class="op" id="5795894">=</span>&nbsp;<span class="op" id="5795896">[</span><span class="op" id="5795897">]</span><span class="builtintype" id="5795898">byte</span><span class="op" id="5795902">(</span><span class="ident" id="5795903"><a href="/gostd/net/smtp/smtp.go.html#5795653">msg64</a></span><span class="op" id="5795908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795912">default</span><span class="op" id="5795919">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795924"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span>&nbsp;<span class="op" id="5795928">=</span>&nbsp;<span class="op" id="5795930">&amp;</span><span class="ident" id="5795931"><a href="/gostd/net/smtp/smtp.go.html#5790866">textproto</a></span><span class="op" id="5795940">.</span><span class="ident" id="5795941"><a href="/gostd/net/textproto/textproto.go.html#4349882">Error</a></span><span class="op" id="5795946">{</span><span class="ident" id="5795947"><a href="/gostd/net/textproto/textproto.go.html#4349898">Code</a></span><span class="op" id="5795951">:</span>&nbsp;<span class="ident" id="5795953"><a href="/gostd/net/smtp/smtp.go.html#5795647">code</a></span><span class="op" id="5795957">,</span>&nbsp;<span class="ident" id="5795959"><a href="/gostd/net/textproto/textproto.go.html#4349908">Msg</a></span><span class="op" id="5795962">:</span>&nbsp;<span class="ident" id="5795964"><a href="/gostd/net/smtp/smtp.go.html#5795653">msg64</a></span><span class="op" id="5795969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5795973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5795977">if</span>&nbsp;<span class="ident" id="5795980"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span>&nbsp;<span class="op" id="5795984">==</span>&nbsp;<span class="builtintype" id="5795987">nil</span>&nbsp;<span class="op" id="5795991">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5795996"><a href="/gostd/net/smtp/smtp.go.html#5795452">resp</a></span><span class="op" id="5796000">,</span>&nbsp;<span class="ident" id="5796002"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span>&nbsp;<span class="op" id="5796006">=</span>&nbsp;<span class="ident" id="5796008"><a href="/gostd/net/smtp/smtp.go.html#5795346">a</a></span><span class="op" id="5796009">.</span><span class="ident" id="5796010"><a href="/gostd/net/smtp/auth.go.html#5788108">Next</a></span><span class="op" id="5796014">(</span><span class="ident" id="5796015"><a href="/gostd/net/smtp/smtp.go.html#5795728">msg</a></span><span class="op" id="5796018">,</span>&nbsp;<span class="ident" id="5796020"><a href="/gostd/net/smtp/smtp.go.html#5795647">code</a></span>&nbsp;<span class="op" id="5796025">==</span>&nbsp;<span class="num" id="5796028">334</span><span class="op" id="5796031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5796035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5796039">if</span>&nbsp;<span class="ident" id="5796042"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span>&nbsp;<span class="op" id="5796046">!=</span>&nbsp;<span class="builtintype" id="5796049">nil</span>&nbsp;<span class="op" id="5796053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5796058">//&nbsp;abort&nbsp;the&nbsp;AUTH</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5796079"><a href="/gostd/net/smtp/smtp.go.html#5795330">c</a></span><span class="op" id="5796080">.</span><span class="ident" id="5796081"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5796084">(</span><span class="num" id="5796085">501</span><span class="op" id="5796088">,</span>&nbsp;<span class="string" id="5796090">&#34;*&#34;</span><span class="op" id="5796093">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5796098"><a href="/gostd/net/smtp/smtp.go.html#5795330">c</a></span><span class="op" id="5796099">.</span><span class="ident" id="5796100"><a href="/gostd/net/smtp/smtp.go.html#5799642">Quit</a></span><span class="op" id="5796104">(</span><span class="op" id="5796105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5796110">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5796118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5796122">if</span>&nbsp;<span class="ident" id="5796125"><a href="/gostd/net/smtp/smtp.go.html#5795452">resp</a></span>&nbsp;<span class="op" id="5796130">==</span>&nbsp;<span class="builtintype" id="5796133">nil</span>&nbsp;<span class="op" id="5796137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5796142">break</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5796150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5796154"><a href="/gostd/net/smtp/smtp.go.html#5795560">resp64</a></span>&nbsp;<span class="op" id="5796161">=</span>&nbsp;<span class="builtinfunc" id="5796163">make</span><span class="op" id="5796167">(</span><span class="op" id="5796168">[</span><span class="op" id="5796169">]</span><span class="builtintype" id="5796170">byte</span><span class="op" id="5796174">,</span>&nbsp;<span class="ident" id="5796176"><a href="/gostd/net/smtp/smtp.go.html#5795414">encoding</a></span><span class="op" id="5796184">.</span><span class="ident" id="5796185"><a href="/gostd/encoding/base64/base64.go.html#4056463">EncodedLen</a></span><span class="op" id="5796195">(</span><span class="builtinfunc" id="5796196">len</span><span class="op" id="5796199">(</span><span class="ident" id="5796200"><a href="/gostd/net/smtp/smtp.go.html#5795452">resp</a></span><span class="op" id="5796204">)</span><span class="op" id="5796205">)</span><span class="op" id="5796206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5796210"><a href="/gostd/net/smtp/smtp.go.html#5795414">encoding</a></span><span class="op" id="5796218">.</span><span class="ident" id="5796219"><a href="/gostd/encoding/base64/base64.go.html#4053678">Encode</a></span><span class="op" id="5796225">(</span><span class="ident" id="5796226"><a href="/gostd/net/smtp/smtp.go.html#5795560">resp64</a></span><span class="op" id="5796232">,</span>&nbsp;<span class="ident" id="5796234"><a href="/gostd/net/smtp/smtp.go.html#5795452">resp</a></span><span class="op" id="5796238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5796242"><a href="/gostd/net/smtp/smtp.go.html#5795647">code</a></span><span class="op" id="5796246">,</span>&nbsp;<span class="ident" id="5796248"><a href="/gostd/net/smtp/smtp.go.html#5795653">msg64</a></span><span class="op" id="5796253">,</span>&nbsp;<span class="ident" id="5796255"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span>&nbsp;<span class="op" id="5796259">=</span>&nbsp;<span class="ident" id="5796261"><a href="/gostd/net/smtp/smtp.go.html#5795330">c</a></span><span class="op" id="5796262">.</span><span class="ident" id="5796263"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5796266">(</span><span class="num" id="5796267">0</span><span class="op" id="5796268">,</span>&nbsp;<span class="builtintype" id="5796270">string</span><span class="op" id="5796276">(</span><span class="ident" id="5796277"><a href="/gostd/net/smtp/smtp.go.html#5795560">resp64</a></span><span class="op" id="5796283">)</span><span class="op" id="5796284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5796287">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5796290">return</span>&nbsp;<span class="ident" id="5796297"><a href="/gostd/net/smtp/smtp.go.html#5795458">err</a></span><br>
<span class="lineno"></span><span class="op" id="5796301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5796304">//&nbsp;Mail&nbsp;issues&nbsp;a&nbsp;MAIL&nbsp;command&nbsp;to&nbsp;the&nbsp;server&nbsp;using&nbsp;the&nbsp;provided&nbsp;email&nbsp;address.</span><br>
<span class="lineno"></span><span class="comment" id="5796382">//&nbsp;If&nbsp;the&nbsp;server&nbsp;supports&nbsp;the&nbsp;8BITMIME&nbsp;extension,&nbsp;Mail&nbsp;adds&nbsp;the&nbsp;BODY=8BITMIME</span><br>
<span class="lineno">220</span><span class="comment" id="5796460">//&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="5796474">//&nbsp;This&nbsp;initiates&nbsp;a&nbsp;mail&nbsp;transaction&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more&nbsp;Rcpt&nbsp;calls.</span><br>
<span class="lineno"></span><span class="keyword" id="5796554">func</span>&nbsp;<span class="op" id="5796559">(</span><span class="ident" id="5796560">c</span>&nbsp;<span class="op" id="5796562">*</span><span class="ident" id="5796563"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5796569">)</span>&nbsp;<span class="ident" id="5796571">Mail</span><span class="op" id="5796575">(</span><span class="ident" id="5796576">from</span>&nbsp;<span class="builtintype" id="5796581">string</span><span class="op" id="5796587">)</span>&nbsp;<span class="builtintype" id="5796589">error</span>&nbsp;<span class="op" id="5796595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5796598">if</span>&nbsp;<span class="ident" id="5796601">err</span>&nbsp;<span class="op" id="5796605">:=</span>&nbsp;<span class="ident" id="5796608"><a href="/gostd/net/smtp/smtp.go.html#5796560">c</a></span><span class="op" id="5796609">.</span><span class="ident" id="5796610"><a href="/gostd/net/smtp/smtp.go.html#5792401">hello</a></span><span class="op" id="5796615">(</span><span class="op" id="5796616">)</span><span class="op" id="5796617">;</span>&nbsp;<span class="ident" id="5796619"><a href="/gostd/net/smtp/smtp.go.html#5796601">err</a></span>&nbsp;<span class="op" id="5796623">!=</span>&nbsp;<span class="builtintype" id="5796626">nil</span>&nbsp;<span class="op" id="5796630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5796634">return</span>&nbsp;<span class="ident" id="5796641"><a href="/gostd/net/smtp/smtp.go.html#5796601">err</a></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5796646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5796649">cmdStr</span>&nbsp;<span class="op" id="5796656">:=</span>&nbsp;<span class="string" id="5796659">&#34;MAIL&nbsp;FROM:&lt;%s&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5796677">if</span>&nbsp;<span class="ident" id="5796680"><a href="/gostd/net/smtp/smtp.go.html#5796560">c</a></span><span class="op" id="5796681">.</span><span class="ident" id="5796682"><a href="/gostd/net/smtp/smtp.go.html#5791325">ext</a></span>&nbsp;<span class="op" id="5796686">!=</span>&nbsp;<span class="builtintype" id="5796689">nil</span>&nbsp;<span class="op" id="5796693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5796697">if</span>&nbsp;<span class="ident" id="5796700">_</span><span class="op" id="5796701">,</span>&nbsp;<span class="ident" id="5796703">ok</span>&nbsp;<span class="op" id="5796706">:=</span>&nbsp;<span class="ident" id="5796709"><a href="/gostd/net/smtp/smtp.go.html#5796560">c</a></span><span class="op" id="5796710">.</span><span class="ident" id="5796711"><a href="/gostd/net/smtp/smtp.go.html#5791325">ext</a></span><span class="op" id="5796714">[</span><span class="string" id="5796715">&#34;8BITMIME&#34;</span><span class="op" id="5796725">]</span><span class="op" id="5796726">;</span>&nbsp;<span class="ident" id="5796728"><a href="/gostd/net/smtp/smtp.go.html#5796703">ok</a></span>&nbsp;<span class="op" id="5796731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5796736"><a href="/gostd/net/smtp/smtp.go.html#5796649">cmdStr</a></span>&nbsp;<span class="op" id="5796743">+=</span>&nbsp;<span class="string" id="5796746">&#34;&nbsp;BODY=8BITMIME&#34;</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5796765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5796768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5796771">_</span><span class="op" id="5796772">,</span>&nbsp;<span class="ident" id="5796774">_</span><span class="op" id="5796775">,</span>&nbsp;<span class="ident" id="5796777">err</span>&nbsp;<span class="op" id="5796781">:=</span>&nbsp;<span class="ident" id="5796784"><a href="/gostd/net/smtp/smtp.go.html#5796560">c</a></span><span class="op" id="5796785">.</span><span class="ident" id="5796786"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5796789">(</span><span class="num" id="5796790">250</span><span class="op" id="5796793">,</span>&nbsp;<span class="ident" id="5796795"><a href="/gostd/net/smtp/smtp.go.html#5796649">cmdStr</a></span><span class="op" id="5796801">,</span>&nbsp;<span class="ident" id="5796803"><a href="/gostd/net/smtp/smtp.go.html#5796576">from</a></span><span class="op" id="5796807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5796810">return</span>&nbsp;<span class="ident" id="5796817"><a href="/gostd/net/smtp/smtp.go.html#5796777">err</a></span><br>
<span class="lineno"></span><span class="op" id="5796821">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="5796824">//&nbsp;Rcpt&nbsp;issues&nbsp;a&nbsp;RCPT&nbsp;command&nbsp;to&nbsp;the&nbsp;server&nbsp;using&nbsp;the&nbsp;provided&nbsp;email&nbsp;address.</span><br>
<span class="lineno"></span><span class="comment" id="5796902">//&nbsp;A&nbsp;call&nbsp;to&nbsp;Rcpt&nbsp;must&nbsp;be&nbsp;preceded&nbsp;by&nbsp;a&nbsp;call&nbsp;to&nbsp;Mail&nbsp;and&nbsp;may&nbsp;be&nbsp;followed&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5796978">//&nbsp;a&nbsp;Data&nbsp;call&nbsp;or&nbsp;another&nbsp;Rcpt&nbsp;call.</span><br>
<span class="lineno"></span><span class="keyword" id="5797015">func</span>&nbsp;<span class="op" id="5797020">(</span><span class="ident" id="5797021">c</span>&nbsp;<span class="op" id="5797023">*</span><span class="ident" id="5797024"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5797030">)</span>&nbsp;<span class="ident" id="5797032">Rcpt</span><span class="op" id="5797036">(</span><span class="ident" id="5797037">to</span>&nbsp;<span class="builtintype" id="5797040">string</span><span class="op" id="5797046">)</span>&nbsp;<span class="builtintype" id="5797048">error</span>&nbsp;<span class="op" id="5797054">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5797057">_</span><span class="op" id="5797058">,</span>&nbsp;<span class="ident" id="5797060">_</span><span class="op" id="5797061">,</span>&nbsp;<span class="ident" id="5797063">err</span>&nbsp;<span class="op" id="5797067">:=</span>&nbsp;<span class="ident" id="5797070"><a href="/gostd/net/smtp/smtp.go.html#5797021">c</a></span><span class="op" id="5797071">.</span><span class="ident" id="5797072"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5797075">(</span><span class="num" id="5797076">25</span><span class="op" id="5797078">,</span>&nbsp;<span class="string" id="5797080">&#34;RCPT&nbsp;TO:&lt;%s&gt;&#34;</span><span class="op" id="5797094">,</span>&nbsp;<span class="ident" id="5797096"><a href="/gostd/net/smtp/smtp.go.html#5797037">to</a></span><span class="op" id="5797098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5797101">return</span>&nbsp;<span class="ident" id="5797108"><a href="/gostd/net/smtp/smtp.go.html#5797063">err</a></span><br>
<span class="lineno"></span><span class="op" id="5797112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5797115">type</span>&nbsp;<span class="ident" id="5797120">dataCloser</span>&nbsp;<span class="keyword" id="5797131">struct</span>&nbsp;<span class="op" id="5797138">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5797141">c</span>&nbsp;<span class="op" id="5797143">*</span><span class="ident" id="5797144"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5797152"><a href="/gostd/net/smtp/smtp.go.html#5790853">io</a></span><span class="op" id="5797154">.</span><span class="ident" id="5797155"><a href="/gostd/io/io.go.html#1423540">WriteCloser</a></span><br>
<span class="lineno"></span><span class="op" id="5797167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5797170">func</span>&nbsp;<span class="op" id="5797175">(</span><span class="ident" id="5797176">d</span>&nbsp;<span class="op" id="5797178">*</span><span class="ident" id="5797179"><a href="/gostd/net/smtp/smtp.go.html#5797120">dataCloser</a></span><span class="op" id="5797189">)</span>&nbsp;<span class="ident" id="5797191">Close</span><span class="op" id="5797196">(</span><span class="op" id="5797197">)</span>&nbsp;<span class="builtintype" id="5797199">error</span>&nbsp;<span class="op" id="5797205">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5797208"><a href="/gostd/net/smtp/smtp.go.html#5797176">d</a></span><span class="op" id="5797209">.</span><span class="ident" id="5797210"><a href="/gostd/net/smtp/smtp.go.html#5797152">WriteCloser</a></span><span class="op" id="5797221">.</span><span class="ident" id="5797222"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="5797227">(</span><span class="op" id="5797228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5797231">_</span><span class="op" id="5797232">,</span>&nbsp;<span class="ident" id="5797234">_</span><span class="op" id="5797235">,</span>&nbsp;<span class="ident" id="5797237">err</span>&nbsp;<span class="op" id="5797241">:=</span>&nbsp;<span class="ident" id="5797244"><a href="/gostd/net/smtp/smtp.go.html#5797176">d</a></span><span class="op" id="5797245">.</span><span class="ident" id="5797246"><a href="/gostd/net/smtp/smtp.go.html#5797141">c</a></span><span class="op" id="5797247">.</span><span class="ident" id="5797248"><a href="/gostd/net/smtp/smtp.go.html#5791090">Text</a></span><span class="op" id="5797252">.</span><span class="ident" id="5797253"><a href="/gostd/net/textproto/reader.go.html#4339377">ReadResponse</a></span><span class="op" id="5797265">(</span><span class="num" id="5797266">250</span><span class="op" id="5797269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5797272">return</span>&nbsp;<span class="ident" id="5797279"><a href="/gostd/net/smtp/smtp.go.html#5797237">err</a></span><br>
<span class="lineno"></span><span class="op" id="5797283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="5797286">//&nbsp;Data&nbsp;issues&nbsp;a&nbsp;DATA&nbsp;command&nbsp;to&nbsp;the&nbsp;server&nbsp;and&nbsp;returns&nbsp;a&nbsp;writer&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5797356">//&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;write&nbsp;the&nbsp;data.&nbsp;The&nbsp;caller&nbsp;should&nbsp;close&nbsp;the&nbsp;writer</span><br>
<span class="lineno"></span><span class="comment" id="5797425">//&nbsp;before&nbsp;calling&nbsp;any&nbsp;more&nbsp;methods&nbsp;on&nbsp;c.</span><br>
<span class="lineno"></span><span class="comment" id="5797466">//&nbsp;A&nbsp;call&nbsp;to&nbsp;Data&nbsp;must&nbsp;be&nbsp;preceded&nbsp;by&nbsp;one&nbsp;or&nbsp;more&nbsp;calls&nbsp;to&nbsp;Rcpt.</span><br>
<span class="lineno"></span><span class="keyword" id="5797531">func</span>&nbsp;<span class="op" id="5797536">(</span><span class="ident" id="5797537">c</span>&nbsp;<span class="op" id="5797539">*</span><span class="ident" id="5797540"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5797546">)</span>&nbsp;<span class="ident" id="5797548">Data</span><span class="op" id="5797552">(</span><span class="op" id="5797553">)</span>&nbsp;<span class="op" id="5797555">(</span><span class="ident" id="5797556"><a href="/gostd/net/smtp/smtp.go.html#5790853">io</a></span><span class="op" id="5797558">.</span><span class="ident" id="5797559"><a href="/gostd/io/io.go.html#1423540">WriteCloser</a></span><span class="op" id="5797570">,</span>&nbsp;<span class="builtintype" id="5797572">error</span><span class="op" id="5797577">)</span>&nbsp;<span class="op" id="5797579">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5797582">_</span><span class="op" id="5797583">,</span>&nbsp;<span class="ident" id="5797585">_</span><span class="op" id="5797586">,</span>&nbsp;<span class="ident" id="5797588">err</span>&nbsp;<span class="op" id="5797592">:=</span>&nbsp;<span class="ident" id="5797595"><a href="/gostd/net/smtp/smtp.go.html#5797537">c</a></span><span class="op" id="5797596">.</span><span class="ident" id="5797597"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5797600">(</span><span class="num" id="5797601">354</span><span class="op" id="5797604">,</span>&nbsp;<span class="string" id="5797606">&#34;DATA&#34;</span><span class="op" id="5797612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5797615">if</span>&nbsp;<span class="ident" id="5797618"><a href="/gostd/net/smtp/smtp.go.html#5797588">err</a></span>&nbsp;<span class="op" id="5797622">!=</span>&nbsp;<span class="builtintype" id="5797625">nil</span>&nbsp;<span class="op" id="5797629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5797633">return</span>&nbsp;<span class="builtintype" id="5797640">nil</span><span class="op" id="5797643">,</span>&nbsp;<span class="ident" id="5797645"><a href="/gostd/net/smtp/smtp.go.html#5797588">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5797650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5797653">return</span>&nbsp;<span class="op" id="5797660">&amp;</span><span class="ident" id="5797661"><a href="/gostd/net/smtp/smtp.go.html#5797120">dataCloser</a></span><span class="op" id="5797671">{</span><span class="ident" id="5797672"><a href="/gostd/net/smtp/smtp.go.html#5797537">c</a></span><span class="op" id="5797673">,</span>&nbsp;<span class="ident" id="5797675"><a href="/gostd/net/smtp/smtp.go.html#5797537">c</a></span><span class="op" id="5797676">.</span><span class="ident" id="5797677"><a href="/gostd/net/smtp/smtp.go.html#5791090">Text</a></span><span class="op" id="5797681">.</span><span class="ident" id="5797682"><a href="/gostd/net/textproto/writer.go.html#4353922">DotWriter</a></span><span class="op" id="5797691">(</span><span class="op" id="5797692">)</span><span class="op" id="5797693">}</span><span class="op" id="5797694">,</span>&nbsp;<span class="builtintype" id="5797696">nil</span><br>
<span class="lineno">265</span><span class="op" id="5797700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5797703">var</span>&nbsp;<span class="ident" id="5797707">testHookStartTLS</span>&nbsp;<span class="keyword" id="5797724">func</span><span class="op" id="5797728">(</span><span class="op" id="5797729">*</span><span class="ident" id="5797730"><a href="/gostd/net/smtp/smtp.go.html#5790810">tls</a></span><span class="op" id="5797733">.</span><span class="ident" id="5797734"><a href="/gostd/crypto/tls/common.go.html#4450481">Config</a></span><span class="op" id="5797740">)</span>&nbsp;<span class="comment" id="5797742">//&nbsp;nil,&nbsp;except&nbsp;for&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5797768">//&nbsp;SendMail&nbsp;connects&nbsp;to&nbsp;the&nbsp;server&nbsp;at&nbsp;addr,&nbsp;switches&nbsp;to&nbsp;TLS&nbsp;if</span><br>
<span class="lineno">270</span><span class="comment" id="5797831">//&nbsp;possible,&nbsp;authenticates&nbsp;with&nbsp;the&nbsp;optional&nbsp;mechanism&nbsp;a&nbsp;if&nbsp;possible,</span><br>
<span class="lineno"></span><span class="comment" id="5797901">//&nbsp;and&nbsp;then&nbsp;sends&nbsp;an&nbsp;email&nbsp;from&nbsp;address&nbsp;from,&nbsp;to&nbsp;addresses&nbsp;to,&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5797969">//&nbsp;message&nbsp;msg.</span><br>
<span class="lineno"></span><span class="keyword" id="5797985">func</span>&nbsp;<span class="ident" id="5797990">SendMail</span><span class="op" id="5797998">(</span><span class="ident" id="5797999">addr</span>&nbsp;<span class="builtintype" id="5798004">string</span><span class="op" id="5798010">,</span>&nbsp;<span class="ident" id="5798012">a</span>&nbsp;<span class="ident" id="5798014"><a href="/gostd/net/smtp/auth.go.html#5787279">Auth</a></span><span class="op" id="5798018">,</span>&nbsp;<span class="ident" id="5798020">from</span>&nbsp;<span class="builtintype" id="5798025">string</span><span class="op" id="5798031">,</span>&nbsp;<span class="ident" id="5798033">to</span>&nbsp;<span class="op" id="5798036">[</span><span class="op" id="5798037">]</span><span class="builtintype" id="5798038">string</span><span class="op" id="5798044">,</span>&nbsp;<span class="ident" id="5798046">msg</span>&nbsp;<span class="op" id="5798050">[</span><span class="op" id="5798051">]</span><span class="builtintype" id="5798052">byte</span><span class="op" id="5798056">)</span>&nbsp;<span class="builtintype" id="5798058">error</span>&nbsp;<span class="op" id="5798064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5798067">c</span><span class="op" id="5798068">,</span>&nbsp;<span class="ident" id="5798070">err</span>&nbsp;<span class="op" id="5798074">:=</span>&nbsp;<span class="ident" id="5798077"><a href="/gostd/net/smtp/smtp.go.html#5791661">Dial</a></span><span class="op" id="5798081">(</span><span class="ident" id="5798082"><a href="/gostd/net/smtp/smtp.go.html#5797999">addr</a></span><span class="op" id="5798086">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798089">if</span>&nbsp;<span class="ident" id="5798092"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798096">!=</span>&nbsp;<span class="builtintype" id="5798099">nil</span>&nbsp;<span class="op" id="5798103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798107">return</span>&nbsp;<span class="ident" id="5798114"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798122">defer</span>&nbsp;<span class="ident" id="5798128"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798129">.</span><span class="ident" id="5798130"><a href="/gostd/net/smtp/smtp.go.html#5792300">Close</a></span><span class="op" id="5798135">(</span><span class="op" id="5798136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798139">if</span>&nbsp;<span class="ident" id="5798142"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798146">=</span>&nbsp;<span class="ident" id="5798148"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798149">.</span><span class="ident" id="5798150"><a href="/gostd/net/smtp/smtp.go.html#5792401">hello</a></span><span class="op" id="5798155">(</span><span class="op" id="5798156">)</span><span class="op" id="5798157">;</span>&nbsp;<span class="ident" id="5798159"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798163">!=</span>&nbsp;<span class="builtintype" id="5798166">nil</span>&nbsp;<span class="op" id="5798170">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798174">return</span>&nbsp;<span class="ident" id="5798181"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798189">if</span>&nbsp;<span class="ident" id="5798192">ok</span><span class="op" id="5798194">,</span>&nbsp;<span class="ident" id="5798196">_</span>&nbsp;<span class="op" id="5798198">:=</span>&nbsp;<span class="ident" id="5798201"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798202">.</span><span class="ident" id="5798203"><a href="/gostd/net/smtp/smtp.go.html#5799121">Extension</a></span><span class="op" id="5798212">(</span><span class="string" id="5798213">&#34;STARTTLS&#34;</span><span class="op" id="5798223">)</span><span class="op" id="5798224">;</span>&nbsp;<span class="ident" id="5798226"><a href="/gostd/net/smtp/smtp.go.html#5798192">ok</a></span>&nbsp;<span class="op" id="5798229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5798233">config</span>&nbsp;<span class="op" id="5798240">:=</span>&nbsp;<span class="op" id="5798243">&amp;</span><span class="ident" id="5798244"><a href="/gostd/net/smtp/smtp.go.html#5790810">tls</a></span><span class="op" id="5798247">.</span><span class="ident" id="5798248"><a href="/gostd/crypto/tls/common.go.html#4450481">Config</a></span><span class="op" id="5798254">{</span><span class="ident" id="5798255"><a href="/gostd/crypto/tls/common.go.html#4452279">ServerName</a></span><span class="op" id="5798265">:</span>&nbsp;<span class="ident" id="5798267"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798268">.</span><span class="ident" id="5798269"><a href="/gostd/net/smtp/smtp.go.html#5791274">serverName</a></span><span class="op" id="5798279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798283">if</span>&nbsp;<span class="ident" id="5798286"><a href="/gostd/net/smtp/smtp.go.html#5797707">testHookStartTLS</a></span>&nbsp;<span class="op" id="5798303">!=</span>&nbsp;<span class="builtintype" id="5798306">nil</span>&nbsp;<span class="op" id="5798310">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5798315"><a href="/gostd/net/smtp/smtp.go.html#5797707">testHookStartTLS</a></span><span class="op" id="5798331">(</span><span class="ident" id="5798332"><a href="/gostd/net/smtp/smtp.go.html#5798233">config</a></span><span class="op" id="5798338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798346">if</span>&nbsp;<span class="ident" id="5798349"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798353">=</span>&nbsp;<span class="ident" id="5798355"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798356">.</span><span class="ident" id="5798357"><a href="/gostd/net/smtp/smtp.go.html#5794460">StartTLS</a></span><span class="op" id="5798365">(</span><span class="ident" id="5798366"><a href="/gostd/net/smtp/smtp.go.html#5798233">config</a></span><span class="op" id="5798372">)</span><span class="op" id="5798373">;</span>&nbsp;<span class="ident" id="5798375"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798379">!=</span>&nbsp;<span class="builtintype" id="5798382">nil</span>&nbsp;<span class="op" id="5798386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798391">return</span>&nbsp;<span class="ident" id="5798398"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798404">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798410">if</span>&nbsp;<span class="ident" id="5798413"><a href="/gostd/net/smtp/smtp.go.html#5798012">a</a></span>&nbsp;<span class="op" id="5798415">!=</span>&nbsp;<span class="builtintype" id="5798418">nil</span>&nbsp;<span class="op" id="5798422">&amp;&amp;</span>&nbsp;<span class="ident" id="5798425"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798426">.</span><span class="ident" id="5798427"><a href="/gostd/net/smtp/smtp.go.html#5791325">ext</a></span>&nbsp;<span class="op" id="5798431">!=</span>&nbsp;<span class="builtintype" id="5798434">nil</span>&nbsp;<span class="op" id="5798438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798442">if</span>&nbsp;<span class="ident" id="5798445">_</span><span class="op" id="5798446">,</span>&nbsp;<span class="ident" id="5798448">ok</span>&nbsp;<span class="op" id="5798451">:=</span>&nbsp;<span class="ident" id="5798454"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798455">.</span><span class="ident" id="5798456"><a href="/gostd/net/smtp/smtp.go.html#5791325">ext</a></span><span class="op" id="5798459">[</span><span class="string" id="5798460">&#34;AUTH&#34;</span><span class="op" id="5798466">]</span><span class="op" id="5798467">;</span>&nbsp;<span class="ident" id="5798469"><a href="/gostd/net/smtp/smtp.go.html#5798448">ok</a></span>&nbsp;<span class="op" id="5798472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798477">if</span>&nbsp;<span class="ident" id="5798480"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798484">=</span>&nbsp;<span class="ident" id="5798486"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798487">.</span><span class="ident" id="5798488"><a href="/gostd/net/smtp/smtp.go.html#5795341">Auth</a></span><span class="op" id="5798492">(</span><span class="ident" id="5798493"><a href="/gostd/net/smtp/smtp.go.html#5798012">a</a></span><span class="op" id="5798494">)</span><span class="op" id="5798495">;</span>&nbsp;<span class="ident" id="5798497"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798501">!=</span>&nbsp;<span class="builtintype" id="5798504">nil</span>&nbsp;<span class="op" id="5798508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798514">return</span>&nbsp;<span class="ident" id="5798521"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798538">if</span>&nbsp;<span class="ident" id="5798541"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798545">=</span>&nbsp;<span class="ident" id="5798547"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798548">.</span><span class="ident" id="5798549"><a href="/gostd/net/smtp/smtp.go.html#5796571">Mail</a></span><span class="op" id="5798553">(</span><span class="ident" id="5798554"><a href="/gostd/net/smtp/smtp.go.html#5798020">from</a></span><span class="op" id="5798558">)</span><span class="op" id="5798559">;</span>&nbsp;<span class="ident" id="5798561"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798565">!=</span>&nbsp;<span class="builtintype" id="5798568">nil</span>&nbsp;<span class="op" id="5798572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798576">return</span>&nbsp;<span class="ident" id="5798583"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798591">for</span>&nbsp;<span class="ident" id="5798595">_</span><span class="op" id="5798596">,</span>&nbsp;<span class="ident" id="5798598">addr</span>&nbsp;<span class="op" id="5798603">:=</span>&nbsp;<span class="keyword" id="5798606">range</span>&nbsp;<span class="ident" id="5798612"><a href="/gostd/net/smtp/smtp.go.html#5798033">to</a></span>&nbsp;<span class="op" id="5798615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798619">if</span>&nbsp;<span class="ident" id="5798622"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798626">=</span>&nbsp;<span class="ident" id="5798628"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798629">.</span><span class="ident" id="5798630"><a href="/gostd/net/smtp/smtp.go.html#5797032">Rcpt</a></span><span class="op" id="5798634">(</span><span class="ident" id="5798635"><a href="/gostd/net/smtp/smtp.go.html#5798598">addr</a></span><span class="op" id="5798639">)</span><span class="op" id="5798640">;</span>&nbsp;<span class="ident" id="5798642"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798646">!=</span>&nbsp;<span class="builtintype" id="5798649">nil</span>&nbsp;<span class="op" id="5798653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798658">return</span>&nbsp;<span class="ident" id="5798665"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798671">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5798677">w</span><span class="op" id="5798678">,</span>&nbsp;<span class="ident" id="5798680"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798684">:=</span>&nbsp;<span class="ident" id="5798687"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798688">.</span><span class="ident" id="5798689"><a href="/gostd/net/smtp/smtp.go.html#5797548">Data</a></span><span class="op" id="5798693">(</span><span class="op" id="5798694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798697">if</span>&nbsp;<span class="ident" id="5798700"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798704">!=</span>&nbsp;<span class="builtintype" id="5798707">nil</span>&nbsp;<span class="op" id="5798711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798715">return</span>&nbsp;<span class="ident" id="5798722"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798727">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5798730">_</span><span class="op" id="5798731">,</span>&nbsp;<span class="ident" id="5798733"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798737">=</span>&nbsp;<span class="ident" id="5798739"><a href="/gostd/net/smtp/smtp.go.html#5798677">w</a></span><span class="op" id="5798740">.</span><span class="ident" id="5798741"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5798746">(</span><span class="ident" id="5798747"><a href="/gostd/net/smtp/smtp.go.html#5798046">msg</a></span><span class="op" id="5798750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798753">if</span>&nbsp;<span class="ident" id="5798756"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798760">!=</span>&nbsp;<span class="builtintype" id="5798763">nil</span>&nbsp;<span class="op" id="5798767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798771">return</span>&nbsp;<span class="ident" id="5798778"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5798786"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798790">=</span>&nbsp;<span class="ident" id="5798792"><a href="/gostd/net/smtp/smtp.go.html#5798677">w</a></span><span class="op" id="5798793">.</span><span class="ident" id="5798794"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="5798799">(</span><span class="op" id="5798800">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798803">if</span>&nbsp;<span class="ident" id="5798806"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span>&nbsp;<span class="op" id="5798810">!=</span>&nbsp;<span class="builtintype" id="5798813">nil</span>&nbsp;<span class="op" id="5798817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798821">return</span>&nbsp;<span class="ident" id="5798828"><a href="/gostd/net/smtp/smtp.go.html#5798070">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5798833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5798836">return</span>&nbsp;<span class="ident" id="5798843"><a href="/gostd/net/smtp/smtp.go.html#5798067">c</a></span><span class="op" id="5798844">.</span><span class="ident" id="5798845"><a href="/gostd/net/smtp/smtp.go.html#5799642">Quit</a></span><span class="op" id="5798849">(</span><span class="op" id="5798850">)</span><br>
<span class="lineno"></span><span class="op" id="5798852">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5798855">//&nbsp;Extension&nbsp;reports&nbsp;whether&nbsp;an&nbsp;extension&nbsp;is&nbsp;support&nbsp;by&nbsp;the&nbsp;server.</span><br>
<span class="lineno"></span><span class="comment" id="5798923">//&nbsp;The&nbsp;extension&nbsp;name&nbsp;is&nbsp;case-insensitive.&nbsp;If&nbsp;the&nbsp;extension&nbsp;is&nbsp;supported,</span><br>
<span class="lineno"></span><span class="comment" id="5798997">//&nbsp;Extension&nbsp;also&nbsp;returns&nbsp;a&nbsp;string&nbsp;that&nbsp;contains&nbsp;any&nbsp;parameters&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5799065">//&nbsp;server&nbsp;specifies&nbsp;for&nbsp;the&nbsp;extension.</span><br>
<span class="lineno">325</span><span class="keyword" id="5799104">func</span>&nbsp;<span class="op" id="5799109">(</span><span class="ident" id="5799110">c</span>&nbsp;<span class="op" id="5799112">*</span><span class="ident" id="5799113"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5799119">)</span>&nbsp;<span class="ident" id="5799121">Extension</span><span class="op" id="5799130">(</span><span class="ident" id="5799131">ext</span>&nbsp;<span class="builtintype" id="5799135">string</span><span class="op" id="5799141">)</span>&nbsp;<span class="op" id="5799143">(</span><span class="builtintype" id="5799144">bool</span><span class="op" id="5799148">,</span>&nbsp;<span class="builtintype" id="5799150">string</span><span class="op" id="5799156">)</span>&nbsp;<span class="op" id="5799158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799161">if</span>&nbsp;<span class="ident" id="5799164">err</span>&nbsp;<span class="op" id="5799168">:=</span>&nbsp;<span class="ident" id="5799171"><a href="/gostd/net/smtp/smtp.go.html#5799110">c</a></span><span class="op" id="5799172">.</span><span class="ident" id="5799173"><a href="/gostd/net/smtp/smtp.go.html#5792401">hello</a></span><span class="op" id="5799178">(</span><span class="op" id="5799179">)</span><span class="op" id="5799180">;</span>&nbsp;<span class="ident" id="5799182"><a href="/gostd/net/smtp/smtp.go.html#5799164">err</a></span>&nbsp;<span class="op" id="5799186">!=</span>&nbsp;<span class="builtintype" id="5799189">nil</span>&nbsp;<span class="op" id="5799193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799197">return</span>&nbsp;<span class="builtintype" id="5799204">false</span><span class="op" id="5799209">,</span>&nbsp;<span class="string" id="5799211">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5799215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799218">if</span>&nbsp;<span class="ident" id="5799221"><a href="/gostd/net/smtp/smtp.go.html#5799110">c</a></span><span class="op" id="5799222">.</span><span class="ident" id="5799223"><a href="/gostd/net/smtp/smtp.go.html#5791325">ext</a></span>&nbsp;<span class="op" id="5799227">==</span>&nbsp;<span class="builtintype" id="5799230">nil</span>&nbsp;<span class="op" id="5799234">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799238">return</span>&nbsp;<span class="builtintype" id="5799245">false</span><span class="op" id="5799250">,</span>&nbsp;<span class="string" id="5799252">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5799256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5799259"><a href="/gostd/net/smtp/smtp.go.html#5799131">ext</a></span>&nbsp;<span class="op" id="5799263">=</span>&nbsp;<span class="ident" id="5799265"><a href="/gostd/net/smtp/smtp.go.html#5790883">strings</a></span><span class="op" id="5799272">.</span><span class="ident" id="5799273"><a href="/gostd/strings/strings.go.html#2977146">ToUpper</a></span><span class="op" id="5799280">(</span><span class="ident" id="5799281"><a href="/gostd/net/smtp/smtp.go.html#5799131">ext</a></span><span class="op" id="5799284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5799287">param</span><span class="op" id="5799292">,</span>&nbsp;<span class="ident" id="5799294">ok</span>&nbsp;<span class="op" id="5799297">:=</span>&nbsp;<span class="ident" id="5799300"><a href="/gostd/net/smtp/smtp.go.html#5799110">c</a></span><span class="op" id="5799301">.</span><span class="ident" id="5799302"><a href="/gostd/net/smtp/smtp.go.html#5791325">ext</a></span><span class="op" id="5799305">[</span><span class="ident" id="5799306"><a href="/gostd/net/smtp/smtp.go.html#5799131">ext</a></span><span class="op" id="5799309">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799312">return</span>&nbsp;<span class="ident" id="5799319"><a href="/gostd/net/smtp/smtp.go.html#5799294">ok</a></span><span class="op" id="5799321">,</span>&nbsp;<span class="ident" id="5799323"><a href="/gostd/net/smtp/smtp.go.html#5799287">param</a></span><br>
<span class="lineno">335</span><span class="op" id="5799329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5799332">//&nbsp;Reset&nbsp;sends&nbsp;the&nbsp;RSET&nbsp;command&nbsp;to&nbsp;the&nbsp;server,&nbsp;aborting&nbsp;the&nbsp;current&nbsp;mail</span><br>
<span class="lineno"></span><span class="comment" id="5799405">//&nbsp;transaction.</span><br>
<span class="lineno"></span><span class="keyword" id="5799421">func</span>&nbsp;<span class="op" id="5799426">(</span><span class="ident" id="5799427">c</span>&nbsp;<span class="op" id="5799429">*</span><span class="ident" id="5799430"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5799436">)</span>&nbsp;<span class="ident" id="5799438">Reset</span><span class="op" id="5799443">(</span><span class="op" id="5799444">)</span>&nbsp;<span class="builtintype" id="5799446">error</span>&nbsp;<span class="op" id="5799452">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799455">if</span>&nbsp;<span class="ident" id="5799458">err</span>&nbsp;<span class="op" id="5799462">:=</span>&nbsp;<span class="ident" id="5799465"><a href="/gostd/net/smtp/smtp.go.html#5799427">c</a></span><span class="op" id="5799466">.</span><span class="ident" id="5799467"><a href="/gostd/net/smtp/smtp.go.html#5792401">hello</a></span><span class="op" id="5799472">(</span><span class="op" id="5799473">)</span><span class="op" id="5799474">;</span>&nbsp;<span class="ident" id="5799476"><a href="/gostd/net/smtp/smtp.go.html#5799458">err</a></span>&nbsp;<span class="op" id="5799480">!=</span>&nbsp;<span class="builtintype" id="5799483">nil</span>&nbsp;<span class="op" id="5799487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799491">return</span>&nbsp;<span class="ident" id="5799498"><a href="/gostd/net/smtp/smtp.go.html#5799458">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5799503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5799506">_</span><span class="op" id="5799507">,</span>&nbsp;<span class="ident" id="5799509">_</span><span class="op" id="5799510">,</span>&nbsp;<span class="ident" id="5799512">err</span>&nbsp;<span class="op" id="5799516">:=</span>&nbsp;<span class="ident" id="5799519"><a href="/gostd/net/smtp/smtp.go.html#5799427">c</a></span><span class="op" id="5799520">.</span><span class="ident" id="5799521"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5799524">(</span><span class="num" id="5799525">250</span><span class="op" id="5799528">,</span>&nbsp;<span class="string" id="5799530">&#34;RSET&#34;</span><span class="op" id="5799536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799539">return</span>&nbsp;<span class="ident" id="5799546"><a href="/gostd/net/smtp/smtp.go.html#5799512">err</a></span><br>
<span class="lineno">345</span><span class="op" id="5799550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5799553">//&nbsp;Quit&nbsp;sends&nbsp;the&nbsp;QUIT&nbsp;command&nbsp;and&nbsp;closes&nbsp;the&nbsp;connection&nbsp;to&nbsp;the&nbsp;server.</span><br>
<span class="lineno"></span><span class="keyword" id="5799625">func</span>&nbsp;<span class="op" id="5799630">(</span><span class="ident" id="5799631">c</span>&nbsp;<span class="op" id="5799633">*</span><span class="ident" id="5799634"><a href="/gostd/net/smtp/smtp.go.html#5790963">Client</a></span><span class="op" id="5799640">)</span>&nbsp;<span class="ident" id="5799642">Quit</span><span class="op" id="5799646">(</span><span class="op" id="5799647">)</span>&nbsp;<span class="builtintype" id="5799649">error</span>&nbsp;<span class="op" id="5799655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799658">if</span>&nbsp;<span class="ident" id="5799661">err</span>&nbsp;<span class="op" id="5799665">:=</span>&nbsp;<span class="ident" id="5799668"><a href="/gostd/net/smtp/smtp.go.html#5799631">c</a></span><span class="op" id="5799669">.</span><span class="ident" id="5799670"><a href="/gostd/net/smtp/smtp.go.html#5792401">hello</a></span><span class="op" id="5799675">(</span><span class="op" id="5799676">)</span><span class="op" id="5799677">;</span>&nbsp;<span class="ident" id="5799679"><a href="/gostd/net/smtp/smtp.go.html#5799661">err</a></span>&nbsp;<span class="op" id="5799683">!=</span>&nbsp;<span class="builtintype" id="5799686">nil</span>&nbsp;<span class="op" id="5799690">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799694">return</span>&nbsp;<span class="ident" id="5799701"><a href="/gostd/net/smtp/smtp.go.html#5799661">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5799706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5799709">_</span><span class="op" id="5799710">,</span>&nbsp;<span class="ident" id="5799712">_</span><span class="op" id="5799713">,</span>&nbsp;<span class="ident" id="5799715">err</span>&nbsp;<span class="op" id="5799719">:=</span>&nbsp;<span class="ident" id="5799722"><a href="/gostd/net/smtp/smtp.go.html#5799631">c</a></span><span class="op" id="5799723">.</span><span class="ident" id="5799724"><a href="/gostd/net/smtp/smtp.go.html#5793139">cmd</a></span><span class="op" id="5799727">(</span><span class="num" id="5799728">221</span><span class="op" id="5799731">,</span>&nbsp;<span class="string" id="5799733">&#34;QUIT&#34;</span><span class="op" id="5799739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799742">if</span>&nbsp;<span class="ident" id="5799745"><a href="/gostd/net/smtp/smtp.go.html#5799715">err</a></span>&nbsp;<span class="op" id="5799749">!=</span>&nbsp;<span class="builtintype" id="5799752">nil</span>&nbsp;<span class="op" id="5799756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799760">return</span>&nbsp;<span class="ident" id="5799767"><a href="/gostd/net/smtp/smtp.go.html#5799715">err</a></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5799772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5799775">return</span>&nbsp;<span class="ident" id="5799782"><a href="/gostd/net/smtp/smtp.go.html#5799631">c</a></span><span class="op" id="5799783">.</span><span class="ident" id="5799784"><a href="/gostd/net/smtp/smtp.go.html#5791090">Text</a></span><span class="op" id="5799788">.</span><span class="ident" id="5799789"><a href="/gostd/net/textproto/textproto.go.html#4350823">Close</a></span><span class="op" id="5799794">(</span><span class="op" id="5799795">)</span><br>
<span class="lineno"></span><span class="op" id="5799797">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
