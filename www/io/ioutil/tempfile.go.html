<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3609295">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3609351">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3609405">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3609456">package</span>&nbsp;<span class="ident" id="3609464">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3609472">import</span>&nbsp;<span class="op" id="3609479">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3609482">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3609488">&#34;path/filepath&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3609505">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3609516">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3609524">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3609531">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3609534">//&nbsp;Random&nbsp;number&nbsp;state.</span><br>
<span class="lineno"></span><span class="comment" id="3609558">//&nbsp;We&nbsp;generate&nbsp;random&nbsp;temporary&nbsp;file&nbsp;names&nbsp;so&nbsp;that&nbsp;there&#39;s&nbsp;a&nbsp;good</span><br>
<span class="lineno"></span><span class="comment" id="3609624">//&nbsp;chance&nbsp;the&nbsp;file&nbsp;doesn&#39;t&nbsp;exist&nbsp;yet&nbsp;-&nbsp;keeps&nbsp;the&nbsp;number&nbsp;of&nbsp;tries&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3609692">//&nbsp;TempFile&nbsp;to&nbsp;a&nbsp;minimum.</span><br>
<span class="lineno"></span><span class="keyword" id="3609718">var</span>&nbsp;<span class="ident" id="3609722">rand</span>&nbsp;<span class="builtintype" id="3609727">uint32</span><br>
<span class="lineno">20</span><span class="keyword" id="3609734">var</span>&nbsp;<span class="ident" id="3609738">randmu</span>&nbsp;<span class="ident" id="3609745"><a href="/io/ioutil/tempfile.go.html#3609516">sync</a></span><span class="op" id="3609749">.</span><span class="ident" id="3609750">Mutex</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3609757">func</span>&nbsp;<span class="ident" id="3609762">reseed</span><span class="op" id="3609768">(</span><span class="op" id="3609769">)</span>&nbsp;<span class="builtintype" id="3609771">uint32</span>&nbsp;<span class="op" id="3609778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3609781">return</span>&nbsp;<span class="builtintype" id="3609788">uint32</span><span class="op" id="3609794">(</span><span class="ident" id="3609795"><a href="/io/ioutil/tempfile.go.html#3609524">time</a></span><span class="op" id="3609799">.</span><span class="ident" id="3609800">Now</span><span class="op" id="3609803">(</span><span class="op" id="3609804">)</span><span class="op" id="3609805">.</span><span class="ident" id="3609806">UnixNano</span><span class="op" id="3609814">(</span><span class="op" id="3609815">)</span>&nbsp;<span class="op" id="3609817">+</span>&nbsp;<span class="ident" id="3609819">int64</span><span class="op" id="3609824">(</span><span class="ident" id="3609825"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3609827">.</span><span class="ident" id="3609828">Getpid</span><span class="op" id="3609834">(</span><span class="op" id="3609835">)</span><span class="op" id="3609836">)</span><span class="op" id="3609837">)</span><br>
<span class="lineno"></span><span class="op" id="3609839">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3609842">func</span>&nbsp;<span class="ident" id="3609847">nextSuffix</span><span class="op" id="3609857">(</span><span class="op" id="3609858">)</span>&nbsp;<span class="builtintype" id="3609860">string</span>&nbsp;<span class="op" id="3609867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609870"><a href="/io/ioutil/tempfile.go.html#3609738">randmu</a></span><span class="op" id="3609876">.</span><span class="ident" id="3609877">Lock</span><span class="op" id="3609881">(</span><span class="op" id="3609882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609885">r</span>&nbsp;<span class="op" id="3609887">:=</span>&nbsp;<span class="ident" id="3609890"><a href="/io/ioutil/tempfile.go.html#3609722">rand</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3609896">if</span>&nbsp;<span class="ident" id="3609899"><a href="/io/ioutil/tempfile.go.html#3609885">r</a></span>&nbsp;<span class="op" id="3609901">==</span>&nbsp;<span class="num" id="3609904">0</span>&nbsp;<span class="op" id="3609906">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609910"><a href="/io/ioutil/tempfile.go.html#3609885">r</a></span>&nbsp;<span class="op" id="3609912">=</span>&nbsp;<span class="ident" id="3609914"><a href="/io/ioutil/tempfile.go.html#3609762">reseed</a></span><span class="op" id="3609920">(</span><span class="op" id="3609921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3609924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609927"><a href="/io/ioutil/tempfile.go.html#3609885">r</a></span>&nbsp;<span class="op" id="3609929">=</span>&nbsp;<span class="ident" id="3609931"><a href="/io/ioutil/tempfile.go.html#3609885">r</a></span><span class="op" id="3609932">*</span><span class="num" id="3609933">1664525</span>&nbsp;<span class="op" id="3609941">+</span>&nbsp;<span class="num" id="3609943">1013904223</span>&nbsp;<span class="comment" id="3609954">//&nbsp;constants&nbsp;from&nbsp;Numerical&nbsp;Recipes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609991"><a href="/io/ioutil/tempfile.go.html#3609722">rand</a></span>&nbsp;<span class="op" id="3609996">=</span>&nbsp;<span class="ident" id="3609998"><a href="/io/ioutil/tempfile.go.html#3609885">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610001"><a href="/io/ioutil/tempfile.go.html#3609738">randmu</a></span><span class="op" id="3610007">.</span><span class="ident" id="3610008">Unlock</span><span class="op" id="3610014">(</span><span class="op" id="3610015">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610018">return</span>&nbsp;<span class="ident" id="3610025"><a href="/io/ioutil/tempfile.go.html#3609505">strconv</a></span><span class="op" id="3610032">.</span><span class="ident" id="3610033">Itoa</span><span class="op" id="3610037">(</span><span class="builtintype" id="3610038">int</span><span class="op" id="3610041">(</span><span class="num" id="3610042">1e9</span>&nbsp;<span class="op" id="3610046">+</span>&nbsp;<span class="ident" id="3610048"><a href="/io/ioutil/tempfile.go.html#3609885">r</a></span><span class="op" id="3610049">%</span><span class="num" id="3610050">1e9</span><span class="op" id="3610053">)</span><span class="op" id="3610054">)</span><span class="op" id="3610055">[</span><span class="num" id="3610056">1</span><span class="op" id="3610057">:</span><span class="op" id="3610058">]</span><br>
<span class="lineno"></span><span class="op" id="3610060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3610063">//&nbsp;TempFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;file&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3610125">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix,&nbsp;opens&nbsp;the&nbsp;file&nbsp;for&nbsp;reading</span><br>
<span class="lineno">40</span><span class="comment" id="3610190">//&nbsp;and&nbsp;writing,&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="comment" id="3610242">//&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempFile&nbsp;uses&nbsp;the&nbsp;default&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="3610309">//&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3610350">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempFile&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3610403">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;file.&nbsp;&nbsp;The&nbsp;caller&nbsp;can&nbsp;use&nbsp;f.Name()</span><br>
<span class="lineno">45</span><span class="comment" id="3610466">//&nbsp;to&nbsp;find&nbsp;the&nbsp;pathname&nbsp;of&nbsp;the&nbsp;file.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3610538">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;file&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3610583">func</span>&nbsp;<span class="ident" id="3610588">TempFile</span><span class="op" id="3610596">(</span><span class="ident" id="3610597">dir</span><span class="op" id="3610600">,</span>&nbsp;<span class="ident" id="3610602">prefix</span>&nbsp;<span class="builtintype" id="3610609">string</span><span class="op" id="3610615">)</span>&nbsp;<span class="op" id="3610617">(</span><span class="ident" id="3610618">f</span>&nbsp;<span class="op" id="3610620">*</span><span class="ident" id="3610621"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3610623">.</span><span class="ident" id="3610624">File</span><span class="op" id="3610628">,</span>&nbsp;<span class="ident" id="3610630">err</span>&nbsp;<span class="builtintype" id="3610634">error</span><span class="op" id="3610639">)</span>&nbsp;<span class="op" id="3610641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610644">if</span>&nbsp;<span class="ident" id="3610647"><a href="/io/ioutil/tempfile.go.html#3610597">dir</a></span>&nbsp;<span class="op" id="3610651">==</span>&nbsp;<span class="string" id="3610654">&#34;&#34;</span>&nbsp;<span class="op" id="3610657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610661"><a href="/io/ioutil/tempfile.go.html#3610597">dir</a></span>&nbsp;<span class="op" id="3610665">=</span>&nbsp;<span class="ident" id="3610667"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3610669">.</span><span class="ident" id="3610670">TempDir</span><span class="op" id="3610677">(</span><span class="op" id="3610678">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3610681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610685">nconflict</span>&nbsp;<span class="op" id="3610695">:=</span>&nbsp;<span class="num" id="3610698">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610701">for</span>&nbsp;<span class="ident" id="3610705">i</span>&nbsp;<span class="op" id="3610707">:=</span>&nbsp;<span class="num" id="3610710">0</span><span class="op" id="3610711">;</span>&nbsp;<span class="ident" id="3610713"><a href="/io/ioutil/tempfile.go.html#3610705">i</a></span>&nbsp;<span class="op" id="3610715">&lt;</span>&nbsp;<span class="num" id="3610717">10000</span><span class="op" id="3610722">;</span>&nbsp;<span class="ident" id="3610724"><a href="/io/ioutil/tempfile.go.html#3610705">i</a></span><span class="op" id="3610725">++</span>&nbsp;<span class="op" id="3610728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610732">name</span>&nbsp;<span class="op" id="3610737">:=</span>&nbsp;<span class="ident" id="3610740"><a href="/io/ioutil/tempfile.go.html#3609488">filepath</a></span><span class="op" id="3610748">.</span><span class="ident" id="3610749">Join</span><span class="op" id="3610753">(</span><span class="ident" id="3610754"><a href="/io/ioutil/tempfile.go.html#3610597">dir</a></span><span class="op" id="3610757">,</span>&nbsp;<span class="ident" id="3610759"><a href="/io/ioutil/tempfile.go.html#3610602">prefix</a></span><span class="op" id="3610765">+</span><span class="ident" id="3610766"><a href="/io/ioutil/tempfile.go.html#3609847">nextSuffix</a></span><span class="op" id="3610776">(</span><span class="op" id="3610777">)</span><span class="op" id="3610778">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610782"><a href="/io/ioutil/tempfile.go.html#3610618">f</a></span><span class="op" id="3610783">,</span>&nbsp;<span class="ident" id="3610785"><a href="/io/ioutil/tempfile.go.html#3610630">err</a></span>&nbsp;<span class="op" id="3610789">=</span>&nbsp;<span class="ident" id="3610791"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3610793">.</span><span class="ident" id="3610794">OpenFile</span><span class="op" id="3610802">(</span><span class="ident" id="3610803"><a href="/io/ioutil/tempfile.go.html#3610732">name</a></span><span class="op" id="3610807">,</span>&nbsp;<span class="ident" id="3610809"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3610811">.</span><span class="ident" id="3610812">O_RDWR</span><span class="op" id="3610818">|</span><span class="ident" id="3610819"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3610821">.</span><span class="ident" id="3610822">O_CREATE</span><span class="op" id="3610830">|</span><span class="ident" id="3610831"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3610833">.</span><span class="ident" id="3610834">O_EXCL</span><span class="op" id="3610840">,</span>&nbsp;<span class="num" id="3610842">0600</span><span class="op" id="3610846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610850">if</span>&nbsp;<span class="ident" id="3610853"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3610855">.</span><span class="ident" id="3610856">IsExist</span><span class="op" id="3610863">(</span><span class="ident" id="3610864"><a href="/io/ioutil/tempfile.go.html#3610630">err</a></span><span class="op" id="3610867">)</span>&nbsp;<span class="op" id="3610869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610874">if</span>&nbsp;<span class="ident" id="3610877"><a href="/io/ioutil/tempfile.go.html#3610685">nconflict</a></span><span class="op" id="3610886">++</span><span class="op" id="3610888">;</span>&nbsp;<span class="ident" id="3610890"><a href="/io/ioutil/tempfile.go.html#3610685">nconflict</a></span>&nbsp;<span class="op" id="3610900">&gt;</span>&nbsp;<span class="num" id="3610902">10</span>&nbsp;<span class="op" id="3610905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610911"><a href="/io/ioutil/tempfile.go.html#3609722">rand</a></span>&nbsp;<span class="op" id="3610916">=</span>&nbsp;<span class="ident" id="3610918"><a href="/io/ioutil/tempfile.go.html#3609762">reseed</a></span><span class="op" id="3610924">(</span><span class="op" id="3610925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3610930">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610935">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3610946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610950">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3610957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610960">return</span><br>
<span class="lineno">65</span><span class="op" id="3610967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3610970">//&nbsp;TempDir&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;directory&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3611036">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;and&nbsp;returns&nbsp;the&nbsp;path&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3611101">//&nbsp;new&nbsp;directory.&nbsp;&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempDir&nbsp;uses&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="3611165">//&nbsp;default&nbsp;directory&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3611224">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempDir&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3611276">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;directory.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3611350">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;directory&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3611400">func</span>&nbsp;<span class="ident" id="3611405">TempDir</span><span class="op" id="3611412">(</span><span class="ident" id="3611413">dir</span><span class="op" id="3611416">,</span>&nbsp;<span class="ident" id="3611418">prefix</span>&nbsp;<span class="builtintype" id="3611425">string</span><span class="op" id="3611431">)</span>&nbsp;<span class="op" id="3611433">(</span><span class="ident" id="3611434">name</span>&nbsp;<span class="builtintype" id="3611439">string</span><span class="op" id="3611445">,</span>&nbsp;<span class="ident" id="3611447">err</span>&nbsp;<span class="builtintype" id="3611451">error</span><span class="op" id="3611456">)</span>&nbsp;<span class="op" id="3611458">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611461">if</span>&nbsp;<span class="ident" id="3611464"><a href="/io/ioutil/tempfile.go.html#3611413">dir</a></span>&nbsp;<span class="op" id="3611468">==</span>&nbsp;<span class="string" id="3611471">&#34;&#34;</span>&nbsp;<span class="op" id="3611474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611478"><a href="/io/ioutil/tempfile.go.html#3611413">dir</a></span>&nbsp;<span class="op" id="3611482">=</span>&nbsp;<span class="ident" id="3611484"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3611486">.</span><span class="ident" id="3611487">TempDir</span><span class="op" id="3611494">(</span><span class="op" id="3611495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3611498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611502">nconflict</span>&nbsp;<span class="op" id="3611512">:=</span>&nbsp;<span class="num" id="3611515">0</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611518">for</span>&nbsp;<span class="ident" id="3611522">i</span>&nbsp;<span class="op" id="3611524">:=</span>&nbsp;<span class="num" id="3611527">0</span><span class="op" id="3611528">;</span>&nbsp;<span class="ident" id="3611530"><a href="/io/ioutil/tempfile.go.html#3611522">i</a></span>&nbsp;<span class="op" id="3611532">&lt;</span>&nbsp;<span class="num" id="3611534">10000</span><span class="op" id="3611539">;</span>&nbsp;<span class="ident" id="3611541"><a href="/io/ioutil/tempfile.go.html#3611522">i</a></span><span class="op" id="3611542">++</span>&nbsp;<span class="op" id="3611545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611549">try</span>&nbsp;<span class="op" id="3611553">:=</span>&nbsp;<span class="ident" id="3611556"><a href="/io/ioutil/tempfile.go.html#3609488">filepath</a></span><span class="op" id="3611564">.</span><span class="ident" id="3611565">Join</span><span class="op" id="3611569">(</span><span class="ident" id="3611570"><a href="/io/ioutil/tempfile.go.html#3611413">dir</a></span><span class="op" id="3611573">,</span>&nbsp;<span class="ident" id="3611575"><a href="/io/ioutil/tempfile.go.html#3611418">prefix</a></span><span class="op" id="3611581">+</span><span class="ident" id="3611582"><a href="/io/ioutil/tempfile.go.html#3609847">nextSuffix</a></span><span class="op" id="3611592">(</span><span class="op" id="3611593">)</span><span class="op" id="3611594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611598"><a href="/io/ioutil/tempfile.go.html#3611447">err</a></span>&nbsp;<span class="op" id="3611602">=</span>&nbsp;<span class="ident" id="3611604"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3611606">.</span><span class="ident" id="3611607">Mkdir</span><span class="op" id="3611612">(</span><span class="ident" id="3611613"><a href="/io/ioutil/tempfile.go.html#3611549">try</a></span><span class="op" id="3611616">,</span>&nbsp;<span class="num" id="3611618">0700</span><span class="op" id="3611622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611626">if</span>&nbsp;<span class="ident" id="3611629"><a href="/io/ioutil/tempfile.go.html#3609482">os</a></span><span class="op" id="3611631">.</span><span class="ident" id="3611632">IsExist</span><span class="op" id="3611639">(</span><span class="ident" id="3611640"><a href="/io/ioutil/tempfile.go.html#3611447">err</a></span><span class="op" id="3611643">)</span>&nbsp;<span class="op" id="3611645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611650">if</span>&nbsp;<span class="ident" id="3611653"><a href="/io/ioutil/tempfile.go.html#3611502">nconflict</a></span><span class="op" id="3611662">++</span><span class="op" id="3611664">;</span>&nbsp;<span class="ident" id="3611666"><a href="/io/ioutil/tempfile.go.html#3611502">nconflict</a></span>&nbsp;<span class="op" id="3611676">&gt;</span>&nbsp;<span class="num" id="3611678">10</span>&nbsp;<span class="op" id="3611681">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611687"><a href="/io/ioutil/tempfile.go.html#3609722">rand</a></span>&nbsp;<span class="op" id="3611692">=</span>&nbsp;<span class="ident" id="3611694"><a href="/io/ioutil/tempfile.go.html#3609762">reseed</a></span><span class="op" id="3611700">(</span><span class="op" id="3611701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3611706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611711">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3611722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611726">if</span>&nbsp;<span class="ident" id="3611729"><a href="/io/ioutil/tempfile.go.html#3611447">err</a></span>&nbsp;<span class="op" id="3611733">==</span>&nbsp;<span class="ident" id="3611736">nil</span>&nbsp;<span class="op" id="3611740">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611745"><a href="/io/ioutil/tempfile.go.html#3611434">name</a></span>&nbsp;<span class="op" id="3611750">=</span>&nbsp;<span class="ident" id="3611752"><a href="/io/ioutil/tempfile.go.html#3611549">try</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3611758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611762">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3611769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611772">return</span><br>
<span class="lineno">95</span><span class="op" id="3611779">}</span>
</div>
</body>
</html>
