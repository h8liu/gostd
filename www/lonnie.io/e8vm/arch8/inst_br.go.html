<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5967152">package</span>&nbsp;<span class="ident" id="5967160">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5967167">//&nbsp;InstBr&nbsp;exectues&nbsp;branch&nbsp;instruction</span><br>
<span class="lineno"></span><span class="keyword" id="5967205">type</span>&nbsp;<span class="ident" id="5967210">instBr</span>&nbsp;<span class="keyword" id="5967217">struct</span><span class="op" id="5967223">{</span><span class="op" id="5967224">}</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span><span class="comment" id="5967227">//&nbsp;I&nbsp;executes&nbsp;the&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="5967258">//&nbsp;Might&nbsp;return&nbsp;invalid&nbsp;instruction&nbsp;exception.</span><br>
<span class="lineno"></span><span class="keyword" id="5967305">func</span>&nbsp;<span class="op" id="5967310">(</span><span class="ident" id="5967311">i</span>&nbsp;<span class="op" id="5967313">*</span><span class="ident" id="5967314"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967210">instBr</a></span><span class="op" id="5967320">)</span>&nbsp;<span class="ident" id="5967322">I</span><span class="op" id="5967323">(</span><span class="ident" id="5967324">cpu</span>&nbsp;<span class="op" id="5967328">*</span><span class="ident" id="5967329"><a href="/lonnie.io/e8vm/arch8/cpu.go.html#5961070">cpu</a></span><span class="op" id="5967332">,</span>&nbsp;<span class="ident" id="5967334">in</span>&nbsp;<span class="builtintype" id="5967337">uint32</span><span class="op" id="5967343">)</span>&nbsp;<span class="op" id="5967345">*</span><span class="ident" id="5967346"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5965541">Excep</a></span>&nbsp;<span class="op" id="5967352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967355">op</span>&nbsp;<span class="op" id="5967358">:=</span>&nbsp;<span class="op" id="5967361">(</span><span class="ident" id="5967362"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967334">in</a></span>&nbsp;<span class="op" id="5967365">&gt;&gt;</span>&nbsp;<span class="num" id="5967368">24</span><span class="op" id="5967370">)</span>&nbsp;<span class="op" id="5967372">&amp;</span>&nbsp;<span class="num" id="5967374">0xff</span>&nbsp;&nbsp;<span class="comment" id="5967380">//&nbsp;(32:24]</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967392">src1</span>&nbsp;<span class="op" id="5967397">:=</span>&nbsp;<span class="op" id="5967400">(</span><span class="ident" id="5967401"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967334">in</a></span>&nbsp;<span class="op" id="5967404">&gt;&gt;</span>&nbsp;<span class="num" id="5967407">21</span><span class="op" id="5967409">)</span>&nbsp;<span class="op" id="5967411">&amp;</span>&nbsp;<span class="num" id="5967413">0x7</span>&nbsp;<span class="comment" id="5967417">//&nbsp;(24:21]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967429">src2</span>&nbsp;<span class="op" id="5967434">:=</span>&nbsp;<span class="op" id="5967437">(</span><span class="ident" id="5967438"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967334">in</a></span>&nbsp;<span class="op" id="5967441">&gt;&gt;</span>&nbsp;<span class="num" id="5967444">18</span><span class="op" id="5967446">)</span>&nbsp;<span class="op" id="5967448">&amp;</span>&nbsp;<span class="num" id="5967450">0x7</span>&nbsp;<span class="comment" id="5967454">//&nbsp;(21:18]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967466">im</span>&nbsp;<span class="op" id="5967469">:=</span>&nbsp;<span class="ident" id="5967472"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967334">in</a></span>&nbsp;<span class="op" id="5967475">&amp;</span>&nbsp;<span class="num" id="5967477">0x3ffff</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5967491">//&nbsp;(18:0]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967503">s1</span>&nbsp;<span class="op" id="5967506">:=</span>&nbsp;<span class="ident" id="5967509"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967324">cpu</a></span><span class="op" id="5967512">.</span><span class="ident" id="5967513">regs</span><span class="op" id="5967517">[</span><span class="ident" id="5967518"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967392">src1</a></span><span class="op" id="5967522">]</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967525">s2</span>&nbsp;<span class="op" id="5967528">:=</span>&nbsp;<span class="ident" id="5967531"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967324">cpu</a></span><span class="op" id="5967534">.</span><span class="ident" id="5967535">regs</span><span class="op" id="5967539">[</span><span class="ident" id="5967540"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967429">src2</a></span><span class="op" id="5967544">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967547">pc</span>&nbsp;<span class="op" id="5967550">:=</span>&nbsp;<span class="ident" id="5967553"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967324">cpu</a></span><span class="op" id="5967556">.</span><span class="ident" id="5967557">regs</span><span class="op" id="5967561">[</span><span class="ident" id="5967562"><a href="/lonnie.io/e8vm/arch8/regs.go.html#5986853">PC</a></span><span class="op" id="5967564">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967567">br</span>&nbsp;<span class="op" id="5967570">:=</span>&nbsp;<span class="ident" id="5967573"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967547">pc</a></span>&nbsp;<span class="op" id="5967576">+</span>&nbsp;<span class="builtintype" id="5967578">uint32</span><span class="op" id="5967584">(</span><span class="builtintype" id="5967585">int32</span><span class="op" id="5967590">(</span><span class="ident" id="5967591"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967466">im</a></span><span class="op" id="5967593">&lt;&lt;</span><span class="num" id="5967595">14</span><span class="op" id="5967597">)</span><span class="op" id="5967598">&gt;&gt;</span><span class="num" id="5967600">12</span><span class="op" id="5967602">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5967606">switch</span>&nbsp;<span class="ident" id="5967613"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967355">op</a></span>&nbsp;<span class="op" id="5967616">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5967619">case</span>&nbsp;<span class="num" id="5967624">32</span><span class="op" id="5967626">:</span>&nbsp;<span class="comment" id="5967628">//&nbsp;bne</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5967637">if</span>&nbsp;<span class="ident" id="5967640"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967503">s1</a></span>&nbsp;<span class="op" id="5967643">!=</span>&nbsp;<span class="ident" id="5967646"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967525">s2</a></span>&nbsp;<span class="op" id="5967649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967654"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967547">pc</a></span>&nbsp;<span class="op" id="5967657">=</span>&nbsp;<span class="ident" id="5967659"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967567">br</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5967664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5967667">case</span>&nbsp;<span class="num" id="5967672">33</span><span class="op" id="5967674">:</span>&nbsp;<span class="comment" id="5967676">//&nbsp;beq</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5967685">if</span>&nbsp;<span class="ident" id="5967688"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967503">s1</a></span>&nbsp;<span class="op" id="5967691">==</span>&nbsp;<span class="ident" id="5967694"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967525">s2</a></span>&nbsp;<span class="op" id="5967697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967702"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967547">pc</a></span>&nbsp;<span class="op" id="5967705">=</span>&nbsp;<span class="ident" id="5967707"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967567">br</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5967712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5967715">default</span><span class="op" id="5967722">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5967726">return</span>&nbsp;<span class="ident" id="5967733"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5966122">errInvalidInst</a></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5967749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5967753"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967324">cpu</a></span><span class="op" id="5967756">.</span><span class="ident" id="5967757">regs</span><span class="op" id="5967761">[</span><span class="ident" id="5967762"><a href="/lonnie.io/e8vm/arch8/regs.go.html#5986853">PC</a></span><span class="op" id="5967764">]</span>&nbsp;<span class="op" id="5967766">=</span>&nbsp;<span class="ident" id="5967768"><a href="/lonnie.io/e8vm/arch8/inst_br.go.html#5967547">pc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5967772">return</span>&nbsp;<span class="ident" id="5967779">nil</span><br>
<span class="lineno"></span><span class="op" id="5967783">}</span>
</div>
</body>
</html>
