<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sort</h2>
<ul>
<li><a href="/gostd/sort/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/sort/example_keys_test.go.html">example_keys_test.go</a></li>
<li><a href="/gostd/sort/example_multi_test.go.html">example_multi_test.go</a></li>
<li><a href="/gostd/sort/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/sort/example_wrapper_test.go.html">example_wrapper_test.go</a></li>
<li><a href="/gostd/sort/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/sort/search.go.html">search.go</a></li>
<li><a href="/gostd/sort/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/sort/sort.go.html">sort.go</a></li>
<li><a href="/gostd/sort/sort_test.go.html">sort_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3018011">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3018066">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3018120">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3018171">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="3018243">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="3018259">package</span>&nbsp;<span class="ident" id="3018267">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3018273">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="3018345">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3018418">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="3018483">type</span>&nbsp;<span class="ident" id="3018488">Interface</span>&nbsp;<span class="keyword" id="3018498">interface</span>&nbsp;<span class="op" id="3018508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3018511">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3018564">Len</span><span class="op" id="3018567">(</span><span class="op" id="3018568">)</span>&nbsp;<span class="builtintype" id="3018570">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3018575">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3018617">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3018674">Less</span><span class="op" id="3018678">(</span><span class="ident" id="3018679">i</span><span class="op" id="3018680">,</span>&nbsp;<span class="ident" id="3018682">j</span>&nbsp;<span class="builtintype" id="3018684">int</span><span class="op" id="3018687">)</span>&nbsp;<span class="builtintype" id="3018689">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3018695">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3018745">Swap</span><span class="op" id="3018749">(</span><span class="ident" id="3018750">i</span><span class="op" id="3018751">,</span>&nbsp;<span class="ident" id="3018753">j</span>&nbsp;<span class="builtintype" id="3018755">int</span><span class="op" id="3018758">)</span><br>
<span class="lineno">20</span><span class="op" id="3018760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3018763">func</span>&nbsp;<span class="ident" id="3018768">min</span><span class="op" id="3018771">(</span><span class="ident" id="3018772">a</span><span class="op" id="3018773">,</span>&nbsp;<span class="ident" id="3018775">b</span>&nbsp;<span class="builtintype" id="3018777">int</span><span class="op" id="3018780">)</span>&nbsp;<span class="builtintype" id="3018782">int</span>&nbsp;<span class="op" id="3018786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3018789">if</span>&nbsp;<span class="ident" id="3018792">a</span>&nbsp;<span class="op" id="3018794">&lt;</span>&nbsp;<span class="ident" id="3018796">b</span>&nbsp;<span class="op" id="3018798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3018802">return</span>&nbsp;<span class="ident" id="3018809">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3018812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3018815">return</span>&nbsp;<span class="ident" id="3018822">b</span><br>
<span class="lineno"></span><span class="op" id="3018824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3018827">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="3018845">func</span>&nbsp;<span class="ident" id="3018850">insertionSort</span><span class="op" id="3018863">(</span><span class="ident" id="3018864">data</span>&nbsp;<span class="ident" id="3018869">Interface</span><span class="op" id="3018878">,</span>&nbsp;<span class="ident" id="3018880">a</span><span class="op" id="3018881">,</span>&nbsp;<span class="ident" id="3018883">b</span>&nbsp;<span class="builtintype" id="3018885">int</span><span class="op" id="3018888">)</span>&nbsp;<span class="op" id="3018890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3018893">for</span>&nbsp;<span class="ident" id="3018897">i</span>&nbsp;<span class="op" id="3018899">:=</span>&nbsp;<span class="ident" id="3018902">a</span>&nbsp;<span class="op" id="3018904">+</span>&nbsp;<span class="num" id="3018906">1</span><span class="op" id="3018907">;</span>&nbsp;<span class="ident" id="3018909">i</span>&nbsp;<span class="op" id="3018911">&lt;</span>&nbsp;<span class="ident" id="3018913">b</span><span class="op" id="3018914">;</span>&nbsp;<span class="ident" id="3018916">i</span><span class="op" id="3018917">++</span>&nbsp;<span class="op" id="3018920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3018924">for</span>&nbsp;<span class="ident" id="3018928">j</span>&nbsp;<span class="op" id="3018930">:=</span>&nbsp;<span class="ident" id="3018933">i</span><span class="op" id="3018934">;</span>&nbsp;<span class="ident" id="3018936">j</span>&nbsp;<span class="op" id="3018938">&gt;</span>&nbsp;<span class="ident" id="3018940">a</span>&nbsp;<span class="op" id="3018942">&amp;&amp;</span>&nbsp;<span class="ident" id="3018945">data</span><span class="op" id="3018949">.</span><span class="ident" id="3018950">Less</span><span class="op" id="3018954">(</span><span class="ident" id="3018955">j</span><span class="op" id="3018956">,</span>&nbsp;<span class="ident" id="3018958">j</span><span class="op" id="3018959">-</span><span class="num" id="3018960">1</span><span class="op" id="3018961">)</span><span class="op" id="3018962">;</span>&nbsp;<span class="ident" id="3018964">j</span><span class="op" id="3018965">--</span>&nbsp;<span class="op" id="3018968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3018973">data</span><span class="op" id="3018977">.</span><span class="ident" id="3018978">Swap</span><span class="op" id="3018982">(</span><span class="ident" id="3018983">j</span><span class="op" id="3018984">,</span>&nbsp;<span class="ident" id="3018986">j</span><span class="op" id="3018987">-</span><span class="num" id="3018988">1</span><span class="op" id="3018989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3018993">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3018996">}</span><br>
<span class="lineno"></span><span class="op" id="3018998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3019001">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="3019059">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="3019129">func</span>&nbsp;<span class="ident" id="3019134">siftDown</span><span class="op" id="3019142">(</span><span class="ident" id="3019143">data</span>&nbsp;<span class="ident" id="3019148">Interface</span><span class="op" id="3019157">,</span>&nbsp;<span class="ident" id="3019159">lo</span><span class="op" id="3019161">,</span>&nbsp;<span class="ident" id="3019163">hi</span><span class="op" id="3019165">,</span>&nbsp;<span class="ident" id="3019167">first</span>&nbsp;<span class="builtintype" id="3019173">int</span><span class="op" id="3019176">)</span>&nbsp;<span class="op" id="3019178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019181">root</span>&nbsp;<span class="op" id="3019186">:=</span>&nbsp;<span class="ident" id="3019189">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3019193">for</span>&nbsp;<span class="op" id="3019197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019201">child</span>&nbsp;<span class="op" id="3019207">:=</span>&nbsp;<span class="num" id="3019210">2</span><span class="op" id="3019211">*</span><span class="ident" id="3019212">root</span>&nbsp;<span class="op" id="3019217">+</span>&nbsp;<span class="num" id="3019219">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3019223">if</span>&nbsp;<span class="ident" id="3019226">child</span>&nbsp;<span class="op" id="3019232">&gt;=</span>&nbsp;<span class="ident" id="3019235">hi</span>&nbsp;<span class="op" id="3019238">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3019243">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3019251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3019255">if</span>&nbsp;<span class="ident" id="3019258">child</span><span class="op" id="3019263">+</span><span class="num" id="3019264">1</span>&nbsp;<span class="op" id="3019266">&lt;</span>&nbsp;<span class="ident" id="3019268">hi</span>&nbsp;<span class="op" id="3019271">&amp;&amp;</span>&nbsp;<span class="ident" id="3019274">data</span><span class="op" id="3019278">.</span><span class="ident" id="3019279">Less</span><span class="op" id="3019283">(</span><span class="ident" id="3019284">first</span><span class="op" id="3019289">+</span><span class="ident" id="3019290">child</span><span class="op" id="3019295">,</span>&nbsp;<span class="ident" id="3019297">first</span><span class="op" id="3019302">+</span><span class="ident" id="3019303">child</span><span class="op" id="3019308">+</span><span class="num" id="3019309">1</span><span class="op" id="3019310">)</span>&nbsp;<span class="op" id="3019312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019317">child</span><span class="op" id="3019322">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3019327">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3019331">if</span>&nbsp;<span class="op" id="3019334">!</span><span class="ident" id="3019335">data</span><span class="op" id="3019339">.</span><span class="ident" id="3019340">Less</span><span class="op" id="3019344">(</span><span class="ident" id="3019345">first</span><span class="op" id="3019350">+</span><span class="ident" id="3019351">root</span><span class="op" id="3019355">,</span>&nbsp;<span class="ident" id="3019357">first</span><span class="op" id="3019362">+</span><span class="ident" id="3019363">child</span><span class="op" id="3019368">)</span>&nbsp;<span class="op" id="3019370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3019375">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3019384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019388">data</span><span class="op" id="3019392">.</span><span class="ident" id="3019393">Swap</span><span class="op" id="3019397">(</span><span class="ident" id="3019398">first</span><span class="op" id="3019403">+</span><span class="ident" id="3019404">root</span><span class="op" id="3019408">,</span>&nbsp;<span class="ident" id="3019410">first</span><span class="op" id="3019415">+</span><span class="ident" id="3019416">child</span><span class="op" id="3019421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019425">root</span>&nbsp;<span class="op" id="3019430">=</span>&nbsp;<span class="ident" id="3019432">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3019439">}</span><br>
<span class="lineno"></span><span class="op" id="3019441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3019444">func</span>&nbsp;<span class="ident" id="3019449">heapSort</span><span class="op" id="3019457">(</span><span class="ident" id="3019458">data</span>&nbsp;<span class="ident" id="3019463">Interface</span><span class="op" id="3019472">,</span>&nbsp;<span class="ident" id="3019474">a</span><span class="op" id="3019475">,</span>&nbsp;<span class="ident" id="3019477">b</span>&nbsp;<span class="builtintype" id="3019479">int</span><span class="op" id="3019482">)</span>&nbsp;<span class="op" id="3019484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019487">first</span>&nbsp;<span class="op" id="3019493">:=</span>&nbsp;<span class="ident" id="3019496">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019499">lo</span>&nbsp;<span class="op" id="3019502">:=</span>&nbsp;<span class="num" id="3019505">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019508">hi</span>&nbsp;<span class="op" id="3019511">:=</span>&nbsp;<span class="ident" id="3019514">b</span>&nbsp;<span class="op" id="3019516">-</span>&nbsp;<span class="ident" id="3019518">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3019522">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3019567">for</span>&nbsp;<span class="ident" id="3019571">i</span>&nbsp;<span class="op" id="3019573">:=</span>&nbsp;<span class="op" id="3019576">(</span><span class="ident" id="3019577">hi</span>&nbsp;<span class="op" id="3019580">-</span>&nbsp;<span class="num" id="3019582">1</span><span class="op" id="3019583">)</span>&nbsp;<span class="op" id="3019585">/</span>&nbsp;<span class="num" id="3019587">2</span><span class="op" id="3019588">;</span>&nbsp;<span class="ident" id="3019590">i</span>&nbsp;<span class="op" id="3019592">&gt;=</span>&nbsp;<span class="num" id="3019595">0</span><span class="op" id="3019596">;</span>&nbsp;<span class="ident" id="3019598">i</span><span class="op" id="3019599">--</span>&nbsp;<span class="op" id="3019602">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019606">siftDown</span><span class="op" id="3019614">(</span><span class="ident" id="3019615">data</span><span class="op" id="3019619">,</span>&nbsp;<span class="ident" id="3019621">i</span><span class="op" id="3019622">,</span>&nbsp;<span class="ident" id="3019624">hi</span><span class="op" id="3019626">,</span>&nbsp;<span class="ident" id="3019628">first</span><span class="op" id="3019633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3019636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3019640">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3019691">for</span>&nbsp;<span class="ident" id="3019695">i</span>&nbsp;<span class="op" id="3019697">:=</span>&nbsp;<span class="ident" id="3019700">hi</span>&nbsp;<span class="op" id="3019703">-</span>&nbsp;<span class="num" id="3019705">1</span><span class="op" id="3019706">;</span>&nbsp;<span class="ident" id="3019708">i</span>&nbsp;<span class="op" id="3019710">&gt;=</span>&nbsp;<span class="num" id="3019713">0</span><span class="op" id="3019714">;</span>&nbsp;<span class="ident" id="3019716">i</span><span class="op" id="3019717">--</span>&nbsp;<span class="op" id="3019720">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019724">data</span><span class="op" id="3019728">.</span><span class="ident" id="3019729">Swap</span><span class="op" id="3019733">(</span><span class="ident" id="3019734">first</span><span class="op" id="3019739">,</span>&nbsp;<span class="ident" id="3019741">first</span><span class="op" id="3019746">+</span><span class="ident" id="3019747">i</span><span class="op" id="3019748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3019752">siftDown</span><span class="op" id="3019760">(</span><span class="ident" id="3019761">data</span><span class="op" id="3019765">,</span>&nbsp;<span class="ident" id="3019767">lo</span><span class="op" id="3019769">,</span>&nbsp;<span class="ident" id="3019771">i</span><span class="op" id="3019772">,</span>&nbsp;<span class="ident" id="3019774">first</span><span class="op" id="3019779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3019782">}</span><br>
<span class="lineno"></span><span class="op" id="3019784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="3019787">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="3019832">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3019889">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="3019983">func</span>&nbsp;<span class="ident" id="3019988">medianOfThree</span><span class="op" id="3020001">(</span><span class="ident" id="3020002">data</span>&nbsp;<span class="ident" id="3020007">Interface</span><span class="op" id="3020016">,</span>&nbsp;<span class="ident" id="3020018">a</span><span class="op" id="3020019">,</span>&nbsp;<span class="ident" id="3020021">b</span><span class="op" id="3020022">,</span>&nbsp;<span class="ident" id="3020024">c</span>&nbsp;<span class="builtintype" id="3020026">int</span><span class="op" id="3020029">)</span>&nbsp;<span class="op" id="3020031">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020034">m0</span>&nbsp;<span class="op" id="3020037">:=</span>&nbsp;<span class="ident" id="3020040">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020043">m1</span>&nbsp;<span class="op" id="3020046">:=</span>&nbsp;<span class="ident" id="3020049">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020052">m2</span>&nbsp;<span class="op" id="3020055">:=</span>&nbsp;<span class="ident" id="3020058">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020061">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3020091">if</span>&nbsp;<span class="ident" id="3020094">data</span><span class="op" id="3020098">.</span><span class="ident" id="3020099">Less</span><span class="op" id="3020103">(</span><span class="ident" id="3020104">m1</span><span class="op" id="3020106">,</span>&nbsp;<span class="ident" id="3020108">m0</span><span class="op" id="3020110">)</span>&nbsp;<span class="op" id="3020112">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020116">data</span><span class="op" id="3020120">.</span><span class="ident" id="3020121">Swap</span><span class="op" id="3020125">(</span><span class="ident" id="3020126">m1</span><span class="op" id="3020128">,</span>&nbsp;<span class="ident" id="3020130">m0</span><span class="op" id="3020132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3020135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3020138">if</span>&nbsp;<span class="ident" id="3020141">data</span><span class="op" id="3020145">.</span><span class="ident" id="3020146">Less</span><span class="op" id="3020150">(</span><span class="ident" id="3020151">m2</span><span class="op" id="3020153">,</span>&nbsp;<span class="ident" id="3020155">m1</span><span class="op" id="3020157">)</span>&nbsp;<span class="op" id="3020159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020163">data</span><span class="op" id="3020167">.</span><span class="ident" id="3020168">Swap</span><span class="op" id="3020172">(</span><span class="ident" id="3020173">m2</span><span class="op" id="3020175">,</span>&nbsp;<span class="ident" id="3020177">m1</span><span class="op" id="3020179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3020182">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3020185">if</span>&nbsp;<span class="ident" id="3020188">data</span><span class="op" id="3020192">.</span><span class="ident" id="3020193">Less</span><span class="op" id="3020197">(</span><span class="ident" id="3020198">m1</span><span class="op" id="3020200">,</span>&nbsp;<span class="ident" id="3020202">m0</span><span class="op" id="3020204">)</span>&nbsp;<span class="op" id="3020206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020210">data</span><span class="op" id="3020214">.</span><span class="ident" id="3020215">Swap</span><span class="op" id="3020219">(</span><span class="ident" id="3020220">m1</span><span class="op" id="3020222">,</span>&nbsp;<span class="ident" id="3020224">m0</span><span class="op" id="3020226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3020229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020232">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="3020272">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="3020275">func</span>&nbsp;<span class="ident" id="3020280">swapRange</span><span class="op" id="3020289">(</span><span class="ident" id="3020290">data</span>&nbsp;<span class="ident" id="3020295">Interface</span><span class="op" id="3020304">,</span>&nbsp;<span class="ident" id="3020306">a</span><span class="op" id="3020307">,</span>&nbsp;<span class="ident" id="3020309">b</span><span class="op" id="3020310">,</span>&nbsp;<span class="ident" id="3020312">n</span>&nbsp;<span class="builtintype" id="3020314">int</span><span class="op" id="3020317">)</span>&nbsp;<span class="op" id="3020319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3020322">for</span>&nbsp;<span class="ident" id="3020326">i</span>&nbsp;<span class="op" id="3020328">:=</span>&nbsp;<span class="num" id="3020331">0</span><span class="op" id="3020332">;</span>&nbsp;<span class="ident" id="3020334">i</span>&nbsp;<span class="op" id="3020336">&lt;</span>&nbsp;<span class="ident" id="3020338">n</span><span class="op" id="3020339">;</span>&nbsp;<span class="ident" id="3020341">i</span><span class="op" id="3020342">++</span>&nbsp;<span class="op" id="3020345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020349">data</span><span class="op" id="3020353">.</span><span class="ident" id="3020354">Swap</span><span class="op" id="3020358">(</span><span class="ident" id="3020359">a</span><span class="op" id="3020360">+</span><span class="ident" id="3020361">i</span><span class="op" id="3020362">,</span>&nbsp;<span class="ident" id="3020364">b</span><span class="op" id="3020365">+</span><span class="ident" id="3020366">i</span><span class="op" id="3020367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3020370">}</span><br>
<span class="lineno">100</span><span class="op" id="3020372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3020375">func</span>&nbsp;<span class="ident" id="3020380">doPivot</span><span class="op" id="3020387">(</span><span class="ident" id="3020388">data</span>&nbsp;<span class="ident" id="3020393">Interface</span><span class="op" id="3020402">,</span>&nbsp;<span class="ident" id="3020404">lo</span><span class="op" id="3020406">,</span>&nbsp;<span class="ident" id="3020408">hi</span>&nbsp;<span class="builtintype" id="3020411">int</span><span class="op" id="3020414">)</span>&nbsp;<span class="op" id="3020416">(</span><span class="ident" id="3020417">midlo</span><span class="op" id="3020422">,</span>&nbsp;<span class="ident" id="3020424">midhi</span>&nbsp;<span class="builtintype" id="3020430">int</span><span class="op" id="3020433">)</span>&nbsp;<span class="op" id="3020435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020438">m</span>&nbsp;<span class="op" id="3020440">:=</span>&nbsp;<span class="ident" id="3020443">lo</span>&nbsp;<span class="op" id="3020446">+</span>&nbsp;<span class="op" id="3020448">(</span><span class="ident" id="3020449">hi</span><span class="op" id="3020451">-</span><span class="ident" id="3020452">lo</span><span class="op" id="3020454">)</span><span class="op" id="3020455">/</span><span class="num" id="3020456">2</span>&nbsp;<span class="comment" id="3020458">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3020507">if</span>&nbsp;<span class="ident" id="3020510">hi</span><span class="op" id="3020512">-</span><span class="ident" id="3020513">lo</span>&nbsp;<span class="op" id="3020516">&gt;</span>&nbsp;<span class="num" id="3020518">40</span>&nbsp;<span class="op" id="3020521">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020525">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020585">s</span>&nbsp;<span class="op" id="3020587">:=</span>&nbsp;<span class="op" id="3020590">(</span><span class="ident" id="3020591">hi</span>&nbsp;<span class="op" id="3020594">-</span>&nbsp;<span class="ident" id="3020596">lo</span><span class="op" id="3020598">)</span>&nbsp;<span class="op" id="3020600">/</span>&nbsp;<span class="num" id="3020602">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020606">medianOfThree</span><span class="op" id="3020619">(</span><span class="ident" id="3020620">data</span><span class="op" id="3020624">,</span>&nbsp;<span class="ident" id="3020626">lo</span><span class="op" id="3020628">,</span>&nbsp;<span class="ident" id="3020630">lo</span><span class="op" id="3020632">+</span><span class="ident" id="3020633">s</span><span class="op" id="3020634">,</span>&nbsp;<span class="ident" id="3020636">lo</span><span class="op" id="3020638">+</span><span class="num" id="3020639">2</span><span class="op" id="3020640">*</span><span class="ident" id="3020641">s</span><span class="op" id="3020642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020646">medianOfThree</span><span class="op" id="3020659">(</span><span class="ident" id="3020660">data</span><span class="op" id="3020664">,</span>&nbsp;<span class="ident" id="3020666">m</span><span class="op" id="3020667">,</span>&nbsp;<span class="ident" id="3020669">m</span><span class="op" id="3020670">-</span><span class="ident" id="3020671">s</span><span class="op" id="3020672">,</span>&nbsp;<span class="ident" id="3020674">m</span><span class="op" id="3020675">+</span><span class="ident" id="3020676">s</span><span class="op" id="3020677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020681">medianOfThree</span><span class="op" id="3020694">(</span><span class="ident" id="3020695">data</span><span class="op" id="3020699">,</span>&nbsp;<span class="ident" id="3020701">hi</span><span class="op" id="3020703">-</span><span class="num" id="3020704">1</span><span class="op" id="3020705">,</span>&nbsp;<span class="ident" id="3020707">hi</span><span class="op" id="3020709">-</span><span class="num" id="3020710">1</span><span class="op" id="3020711">-</span><span class="ident" id="3020712">s</span><span class="op" id="3020713">,</span>&nbsp;<span class="ident" id="3020715">hi</span><span class="op" id="3020717">-</span><span class="num" id="3020718">1</span><span class="op" id="3020719">-</span><span class="num" id="3020720">2</span><span class="op" id="3020721">*</span><span class="ident" id="3020722">s</span><span class="op" id="3020723">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3020726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3020729">medianOfThree</span><span class="op" id="3020742">(</span><span class="ident" id="3020743">data</span><span class="op" id="3020747">,</span>&nbsp;<span class="ident" id="3020749">lo</span><span class="op" id="3020751">,</span>&nbsp;<span class="ident" id="3020753">m</span><span class="op" id="3020754">,</span>&nbsp;<span class="ident" id="3020756">hi</span><span class="op" id="3020758">-</span><span class="num" id="3020759">1</span><span class="op" id="3020760">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020764">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020784">//&nbsp;&nbsp;&nbsp;&nbspdata[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020829">//&nbsp;&nbsp;&nbsp;&nbspdata[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020859">//&nbsp;&nbsp;&nbsp;&nbspdata[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020888">//&nbsp;&nbsp;&nbsp;&nbspdata[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020923">//&nbsp;&nbsp;&nbsp;&nbspdata[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020952">//&nbsp;&nbsp;&nbsp;&nbspdata[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020982">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3020986">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3021038">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021072">pivot</span>&nbsp;<span class="op" id="3021078">:=</span>&nbsp;<span class="ident" id="3021081">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021085">a</span><span class="op" id="3021086">,</span>&nbsp;<span class="ident" id="3021088">b</span><span class="op" id="3021089">,</span>&nbsp;<span class="ident" id="3021091">c</span><span class="op" id="3021092">,</span>&nbsp;<span class="ident" id="3021094">d</span>&nbsp;<span class="op" id="3021096">:=</span>&nbsp;<span class="ident" id="3021099">lo</span><span class="op" id="3021101">+</span><span class="num" id="3021102">1</span><span class="op" id="3021103">,</span>&nbsp;<span class="ident" id="3021105">lo</span><span class="op" id="3021107">+</span><span class="num" id="3021108">1</span><span class="op" id="3021109">,</span>&nbsp;<span class="ident" id="3021111">hi</span><span class="op" id="3021113">,</span>&nbsp;<span class="ident" id="3021115">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021119">for</span>&nbsp;<span class="op" id="3021123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021127">for</span>&nbsp;<span class="ident" id="3021131">b</span>&nbsp;<span class="op" id="3021133">&lt;</span>&nbsp;<span class="ident" id="3021135">c</span>&nbsp;<span class="op" id="3021137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021142">if</span>&nbsp;<span class="ident" id="3021145">data</span><span class="op" id="3021149">.</span><span class="ident" id="3021150">Less</span><span class="op" id="3021154">(</span><span class="ident" id="3021155">b</span><span class="op" id="3021156">,</span>&nbsp;<span class="ident" id="3021158">pivot</span><span class="op" id="3021163">)</span>&nbsp;<span class="op" id="3021165">{</span>&nbsp;<span class="comment" id="3021167">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021190">b</span><span class="op" id="3021191">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021197">}</span>&nbsp;<span class="keyword" id="3021199">else</span>&nbsp;<span class="keyword" id="3021204">if</span>&nbsp;<span class="op" id="3021207">!</span><span class="ident" id="3021208">data</span><span class="op" id="3021212">.</span><span class="ident" id="3021213">Less</span><span class="op" id="3021217">(</span><span class="ident" id="3021218">pivot</span><span class="op" id="3021223">,</span>&nbsp;<span class="ident" id="3021225">b</span><span class="op" id="3021226">)</span>&nbsp;<span class="op" id="3021228">{</span>&nbsp;<span class="comment" id="3021230">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021253">data</span><span class="op" id="3021257">.</span><span class="ident" id="3021258">Swap</span><span class="op" id="3021262">(</span><span class="ident" id="3021263">a</span><span class="op" id="3021264">,</span>&nbsp;<span class="ident" id="3021266">b</span><span class="op" id="3021267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021273">a</span><span class="op" id="3021274">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021281">b</span><span class="op" id="3021282">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021288">}</span>&nbsp;<span class="keyword" id="3021290">else</span>&nbsp;<span class="op" id="3021295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021301">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021318">for</span>&nbsp;<span class="ident" id="3021322">b</span>&nbsp;<span class="op" id="3021324">&lt;</span>&nbsp;<span class="ident" id="3021326">c</span>&nbsp;<span class="op" id="3021328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021333">if</span>&nbsp;<span class="ident" id="3021336">data</span><span class="op" id="3021340">.</span><span class="ident" id="3021341">Less</span><span class="op" id="3021345">(</span><span class="ident" id="3021346">pivot</span><span class="op" id="3021351">,</span>&nbsp;<span class="ident" id="3021353">c</span><span class="op" id="3021354">-</span><span class="num" id="3021355">1</span><span class="op" id="3021356">)</span>&nbsp;<span class="op" id="3021358">{</span>&nbsp;<span class="comment" id="3021360">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021385">c</span><span class="op" id="3021386">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021392">}</span>&nbsp;<span class="keyword" id="3021394">else</span>&nbsp;<span class="keyword" id="3021399">if</span>&nbsp;<span class="op" id="3021402">!</span><span class="ident" id="3021403">data</span><span class="op" id="3021407">.</span><span class="ident" id="3021408">Less</span><span class="op" id="3021412">(</span><span class="ident" id="3021413">c</span><span class="op" id="3021414">-</span><span class="num" id="3021415">1</span><span class="op" id="3021416">,</span>&nbsp;<span class="ident" id="3021418">pivot</span><span class="op" id="3021423">)</span>&nbsp;<span class="op" id="3021425">{</span>&nbsp;<span class="comment" id="3021427">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021452">data</span><span class="op" id="3021456">.</span><span class="ident" id="3021457">Swap</span><span class="op" id="3021461">(</span><span class="ident" id="3021462">c</span><span class="op" id="3021463">-</span><span class="num" id="3021464">1</span><span class="op" id="3021465">,</span>&nbsp;<span class="ident" id="3021467">d</span><span class="op" id="3021468">-</span><span class="num" id="3021469">1</span><span class="op" id="3021470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021476">c</span><span class="op" id="3021477">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021484">d</span><span class="op" id="3021485">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021491">}</span>&nbsp;<span class="keyword" id="3021493">else</span>&nbsp;<span class="op" id="3021498">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021504">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021521">if</span>&nbsp;<span class="ident" id="3021524">b</span>&nbsp;<span class="op" id="3021526">&gt;=</span>&nbsp;<span class="ident" id="3021529">c</span>&nbsp;<span class="op" id="3021531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021536">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3021548">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021588">data</span><span class="op" id="3021592">.</span><span class="ident" id="3021593">Swap</span><span class="op" id="3021597">(</span><span class="ident" id="3021598">b</span><span class="op" id="3021599">,</span>&nbsp;<span class="ident" id="3021601">c</span><span class="op" id="3021602">-</span><span class="num" id="3021603">1</span><span class="op" id="3021604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021608">b</span><span class="op" id="3021609">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021614">c</span><span class="op" id="3021615">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021623">n</span>&nbsp;<span class="op" id="3021625">:=</span>&nbsp;<span class="ident" id="3021628">min</span><span class="op" id="3021631">(</span><span class="ident" id="3021632">b</span><span class="op" id="3021633">-</span><span class="ident" id="3021634">a</span><span class="op" id="3021635">,</span>&nbsp;<span class="ident" id="3021637">a</span><span class="op" id="3021638">-</span><span class="ident" id="3021639">lo</span><span class="op" id="3021641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021644">swapRange</span><span class="op" id="3021653">(</span><span class="ident" id="3021654">data</span><span class="op" id="3021658">,</span>&nbsp;<span class="ident" id="3021660">lo</span><span class="op" id="3021662">,</span>&nbsp;<span class="ident" id="3021664">b</span><span class="op" id="3021665">-</span><span class="ident" id="3021666">n</span><span class="op" id="3021667">,</span>&nbsp;<span class="ident" id="3021669">n</span><span class="op" id="3021670">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021674">n</span>&nbsp;<span class="op" id="3021676">=</span>&nbsp;<span class="ident" id="3021678">min</span><span class="op" id="3021681">(</span><span class="ident" id="3021682">hi</span><span class="op" id="3021684">-</span><span class="ident" id="3021685">d</span><span class="op" id="3021686">,</span>&nbsp;<span class="ident" id="3021688">d</span><span class="op" id="3021689">-</span><span class="ident" id="3021690">c</span><span class="op" id="3021691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021694">swapRange</span><span class="op" id="3021703">(</span><span class="ident" id="3021704">data</span><span class="op" id="3021708">,</span>&nbsp;<span class="ident" id="3021710">c</span><span class="op" id="3021711">,</span>&nbsp;<span class="ident" id="3021713">hi</span><span class="op" id="3021715">-</span><span class="ident" id="3021716">n</span><span class="op" id="3021717">,</span>&nbsp;<span class="ident" id="3021719">n</span><span class="op" id="3021720">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021724">return</span>&nbsp;<span class="ident" id="3021731">lo</span>&nbsp;<span class="op" id="3021734">+</span>&nbsp;<span class="ident" id="3021736">b</span>&nbsp;<span class="op" id="3021738">-</span>&nbsp;<span class="ident" id="3021740">a</span><span class="op" id="3021741">,</span>&nbsp;<span class="ident" id="3021743">hi</span>&nbsp;<span class="op" id="3021746">-</span>&nbsp;<span class="op" id="3021748">(</span><span class="ident" id="3021749">d</span>&nbsp;<span class="op" id="3021751">-</span>&nbsp;<span class="ident" id="3021753">c</span><span class="op" id="3021754">)</span><br>
<span class="lineno"></span><span class="op" id="3021756">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="3021759">func</span>&nbsp;<span class="ident" id="3021764">quickSort</span><span class="op" id="3021773">(</span><span class="ident" id="3021774">data</span>&nbsp;<span class="ident" id="3021779">Interface</span><span class="op" id="3021788">,</span>&nbsp;<span class="ident" id="3021790">a</span><span class="op" id="3021791">,</span>&nbsp;<span class="ident" id="3021793">b</span><span class="op" id="3021794">,</span>&nbsp;<span class="ident" id="3021796">maxDepth</span>&nbsp;<span class="builtintype" id="3021805">int</span><span class="op" id="3021808">)</span>&nbsp;<span class="op" id="3021810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021813">for</span>&nbsp;<span class="ident" id="3021817">b</span><span class="op" id="3021818">-</span><span class="ident" id="3021819">a</span>&nbsp;<span class="op" id="3021821">&gt;</span>&nbsp;<span class="num" id="3021823">7</span>&nbsp;<span class="op" id="3021825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021829">if</span>&nbsp;<span class="ident" id="3021832">maxDepth</span>&nbsp;<span class="op" id="3021841">==</span>&nbsp;<span class="num" id="3021844">0</span>&nbsp;<span class="op" id="3021846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021851">heapSort</span><span class="op" id="3021859">(</span><span class="ident" id="3021860">data</span><span class="op" id="3021864">,</span>&nbsp;<span class="ident" id="3021866">a</span><span class="op" id="3021867">,</span>&nbsp;<span class="ident" id="3021869">b</span><span class="op" id="3021870">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3021875">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3021884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021888">maxDepth</span><span class="op" id="3021896">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3021901">mlo</span><span class="op" id="3021904">,</span>&nbsp;<span class="ident" id="3021906">mhi</span>&nbsp;<span class="op" id="3021910">:=</span>&nbsp;<span class="ident" id="3021913">doPivot</span><span class="op" id="3021920">(</span><span class="ident" id="3021921">data</span><span class="op" id="3021925">,</span>&nbsp;<span class="ident" id="3021927">a</span><span class="op" id="3021928">,</span>&nbsp;<span class="ident" id="3021930">b</span><span class="op" id="3021931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3021935">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3021995">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3022034">if</span>&nbsp;<span class="ident" id="3022037">mlo</span><span class="op" id="3022040">-</span><span class="ident" id="3022041">a</span>&nbsp;<span class="op" id="3022043">&lt;</span>&nbsp;<span class="ident" id="3022045">b</span><span class="op" id="3022046">-</span><span class="ident" id="3022047">mhi</span>&nbsp;<span class="op" id="3022051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022056">quickSort</span><span class="op" id="3022065">(</span><span class="ident" id="3022066">data</span><span class="op" id="3022070">,</span>&nbsp;<span class="ident" id="3022072">a</span><span class="op" id="3022073">,</span>&nbsp;<span class="ident" id="3022075">mlo</span><span class="op" id="3022078">,</span>&nbsp;<span class="ident" id="3022080">maxDepth</span><span class="op" id="3022088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022093">a</span>&nbsp;<span class="op" id="3022095">=</span>&nbsp;<span class="ident" id="3022097">mhi</span>&nbsp;<span class="comment" id="3022101">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3022136">}</span>&nbsp;<span class="keyword" id="3022138">else</span>&nbsp;<span class="op" id="3022143">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022148">quickSort</span><span class="op" id="3022157">(</span><span class="ident" id="3022158">data</span><span class="op" id="3022162">,</span>&nbsp;<span class="ident" id="3022164">mhi</span><span class="op" id="3022167">,</span>&nbsp;<span class="ident" id="3022169">b</span><span class="op" id="3022170">,</span>&nbsp;<span class="ident" id="3022172">maxDepth</span><span class="op" id="3022180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022185">b</span>&nbsp;<span class="op" id="3022187">=</span>&nbsp;<span class="ident" id="3022189">mlo</span>&nbsp;<span class="comment" id="3022193">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3022228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3022231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3022234">if</span>&nbsp;<span class="ident" id="3022237">b</span><span class="op" id="3022238">-</span><span class="ident" id="3022239">a</span>&nbsp;<span class="op" id="3022241">&gt;</span>&nbsp;<span class="num" id="3022243">1</span>&nbsp;<span class="op" id="3022245">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022249">insertionSort</span><span class="op" id="3022262">(</span><span class="ident" id="3022263">data</span><span class="op" id="3022267">,</span>&nbsp;<span class="ident" id="3022269">a</span><span class="op" id="3022270">,</span>&nbsp;<span class="ident" id="3022272">b</span><span class="op" id="3022273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3022276">}</span><br>
<span class="lineno"></span><span class="op" id="3022278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3022281">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="3022301">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3022375">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="3022444">func</span>&nbsp;<span class="ident" id="3022449">Sort</span><span class="op" id="3022453">(</span><span class="ident" id="3022454">data</span>&nbsp;<span class="ident" id="3022459">Interface</span><span class="op" id="3022468">)</span>&nbsp;<span class="op" id="3022470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3022473">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022536">n</span>&nbsp;<span class="op" id="3022538">:=</span>&nbsp;<span class="ident" id="3022541">data</span><span class="op" id="3022545">.</span><span class="ident" id="3022546">Len</span><span class="op" id="3022549">(</span><span class="op" id="3022550">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022553">maxDepth</span>&nbsp;<span class="op" id="3022562">:=</span>&nbsp;<span class="num" id="3022565">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3022568">for</span>&nbsp;<span class="ident" id="3022572">i</span>&nbsp;<span class="op" id="3022574">:=</span>&nbsp;<span class="ident" id="3022577">n</span><span class="op" id="3022578">;</span>&nbsp;<span class="ident" id="3022580">i</span>&nbsp;<span class="op" id="3022582">&gt;</span>&nbsp;<span class="num" id="3022584">0</span><span class="op" id="3022585">;</span>&nbsp;<span class="ident" id="3022587">i</span>&nbsp;<span class="op" id="3022589">&gt;&gt;=</span>&nbsp;<span class="num" id="3022593">1</span>&nbsp;<span class="op" id="3022595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022599">maxDepth</span><span class="op" id="3022607">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3022611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022614">maxDepth</span>&nbsp;<span class="op" id="3022623">*=</span>&nbsp;<span class="num" id="3022626">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022629">quickSort</span><span class="op" id="3022638">(</span><span class="ident" id="3022639">data</span><span class="op" id="3022643">,</span>&nbsp;<span class="num" id="3022645">0</span><span class="op" id="3022646">,</span>&nbsp;<span class="ident" id="3022648">n</span><span class="op" id="3022649">,</span>&nbsp;<span class="ident" id="3022651">maxDepth</span><span class="op" id="3022659">)</span><br>
<span class="lineno"></span><span class="op" id="3022661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3022664">type</span>&nbsp;<span class="ident" id="3022669">reverse</span>&nbsp;<span class="keyword" id="3022677">struct</span>&nbsp;<span class="op" id="3022684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3022687">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3022753">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3022791">Interface</span><br>
<span class="lineno"></span><span class="op" id="3022801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3022804">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="3022879">func</span>&nbsp;<span class="op" id="3022884">(</span><span class="ident" id="3022885">r</span>&nbsp;<span class="ident" id="3022887">reverse</span><span class="op" id="3022894">)</span>&nbsp;<span class="ident" id="3022896">Less</span><span class="op" id="3022900">(</span><span class="ident" id="3022901">i</span><span class="op" id="3022902">,</span>&nbsp;<span class="ident" id="3022904">j</span>&nbsp;<span class="builtintype" id="3022906">int</span><span class="op" id="3022909">)</span>&nbsp;<span class="builtintype" id="3022911">bool</span>&nbsp;<span class="op" id="3022916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3022919">return</span>&nbsp;<span class="ident" id="3022926">r</span><span class="op" id="3022927">.</span><span class="ident" id="3022928">Interface</span><span class="op" id="3022937">.</span><span class="ident" id="3022938">Less</span><span class="op" id="3022942">(</span><span class="ident" id="3022943">j</span><span class="op" id="3022944">,</span>&nbsp;<span class="ident" id="3022946">i</span><span class="op" id="3022947">)</span><br>
<span class="lineno"></span><span class="op" id="3022949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3022952">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="3022999">func</span>&nbsp;<span class="ident" id="3023004">Reverse</span><span class="op" id="3023011">(</span><span class="ident" id="3023012">data</span>&nbsp;<span class="ident" id="3023017">Interface</span><span class="op" id="3023026">)</span>&nbsp;<span class="ident" id="3023028">Interface</span>&nbsp;<span class="op" id="3023038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3023041">return</span>&nbsp;<span class="op" id="3023048">&amp;</span><span class="ident" id="3023049">reverse</span><span class="op" id="3023056">{</span><span class="ident" id="3023057">data</span><span class="op" id="3023061">}</span><br>
<span class="lineno"></span><span class="op" id="3023063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3023066">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="3023110">func</span>&nbsp;<span class="ident" id="3023115">IsSorted</span><span class="op" id="3023123">(</span><span class="ident" id="3023124">data</span>&nbsp;<span class="ident" id="3023129">Interface</span><span class="op" id="3023138">)</span>&nbsp;<span class="builtintype" id="3023140">bool</span>&nbsp;<span class="op" id="3023145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3023148">n</span>&nbsp;<span class="op" id="3023150">:=</span>&nbsp;<span class="ident" id="3023153">data</span><span class="op" id="3023157">.</span><span class="ident" id="3023158">Len</span><span class="op" id="3023161">(</span><span class="op" id="3023162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3023165">for</span>&nbsp;<span class="ident" id="3023169">i</span>&nbsp;<span class="op" id="3023171">:=</span>&nbsp;<span class="ident" id="3023174">n</span>&nbsp;<span class="op" id="3023176">-</span>&nbsp;<span class="num" id="3023178">1</span><span class="op" id="3023179">;</span>&nbsp;<span class="ident" id="3023181">i</span>&nbsp;<span class="op" id="3023183">&gt;</span>&nbsp;<span class="num" id="3023185">0</span><span class="op" id="3023186">;</span>&nbsp;<span class="ident" id="3023188">i</span><span class="op" id="3023189">--</span>&nbsp;<span class="op" id="3023192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3023196">if</span>&nbsp;<span class="ident" id="3023199">data</span><span class="op" id="3023203">.</span><span class="ident" id="3023204">Less</span><span class="op" id="3023208">(</span><span class="ident" id="3023209">i</span><span class="op" id="3023210">,</span>&nbsp;<span class="ident" id="3023212">i</span><span class="op" id="3023213">-</span><span class="num" id="3023214">1</span><span class="op" id="3023215">)</span>&nbsp;<span class="op" id="3023217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3023222">return</span>&nbsp;<span class="builtintype" id="3023229">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3023237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3023240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3023243">return</span>&nbsp;<span class="builtintype" id="3023250">true</span><br>
<span class="lineno"></span><span class="op" id="3023255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="3023258">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3023297">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3023382">type</span>&nbsp;<span class="ident" id="3023387">IntSlice</span>&nbsp;<span class="op" id="3023396">[</span><span class="op" id="3023397">]</span><span class="builtintype" id="3023398">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="3023403">func</span>&nbsp;<span class="op" id="3023408">(</span><span class="ident" id="3023409">p</span>&nbsp;<span class="ident" id="3023411">IntSlice</span><span class="op" id="3023419">)</span>&nbsp;<span class="ident" id="3023421">Len</span><span class="op" id="3023424">(</span><span class="op" id="3023425">)</span>&nbsp;<span class="builtintype" id="3023427">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3023441">{</span>&nbsp;<span class="keyword" id="3023443">return</span>&nbsp;<span class="builtinfunc" id="3023450">len</span><span class="op" id="3023453">(</span><span class="ident" id="3023454">p</span><span class="op" id="3023455">)</span>&nbsp;<span class="op" id="3023457">}</span><br>
<span class="lineno"></span><span class="keyword" id="3023459">func</span>&nbsp;<span class="op" id="3023464">(</span><span class="ident" id="3023465">p</span>&nbsp;<span class="ident" id="3023467">IntSlice</span><span class="op" id="3023475">)</span>&nbsp;<span class="ident" id="3023477">Less</span><span class="op" id="3023481">(</span><span class="ident" id="3023482">i</span><span class="op" id="3023483">,</span>&nbsp;<span class="ident" id="3023485">j</span>&nbsp;<span class="builtintype" id="3023487">int</span><span class="op" id="3023490">)</span>&nbsp;<span class="builtintype" id="3023492">bool</span>&nbsp;<span class="op" id="3023497">{</span>&nbsp;<span class="keyword" id="3023499">return</span>&nbsp;<span class="ident" id="3023506">p</span><span class="op" id="3023507">[</span><span class="ident" id="3023508">i</span><span class="op" id="3023509">]</span>&nbsp;<span class="op" id="3023511">&lt;</span>&nbsp;<span class="ident" id="3023513">p</span><span class="op" id="3023514">[</span><span class="ident" id="3023515">j</span><span class="op" id="3023516">]</span>&nbsp;<span class="op" id="3023518">}</span><br>
<span class="lineno"></span><span class="keyword" id="3023520">func</span>&nbsp;<span class="op" id="3023525">(</span><span class="ident" id="3023526">p</span>&nbsp;<span class="ident" id="3023528">IntSlice</span><span class="op" id="3023536">)</span>&nbsp;<span class="ident" id="3023538">Swap</span><span class="op" id="3023542">(</span><span class="ident" id="3023543">i</span><span class="op" id="3023544">,</span>&nbsp;<span class="ident" id="3023546">j</span>&nbsp;<span class="builtintype" id="3023548">int</span><span class="op" id="3023551">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3023558">{</span>&nbsp;<span class="ident" id="3023560">p</span><span class="op" id="3023561">[</span><span class="ident" id="3023562">i</span><span class="op" id="3023563">]</span><span class="op" id="3023564">,</span>&nbsp;<span class="ident" id="3023566">p</span><span class="op" id="3023567">[</span><span class="ident" id="3023568">j</span><span class="op" id="3023569">]</span>&nbsp;<span class="op" id="3023571">=</span>&nbsp;<span class="ident" id="3023573">p</span><span class="op" id="3023574">[</span><span class="ident" id="3023575">j</span><span class="op" id="3023576">]</span><span class="op" id="3023577">,</span>&nbsp;<span class="ident" id="3023579">p</span><span class="op" id="3023580">[</span><span class="ident" id="3023581">i</span><span class="op" id="3023582">]</span>&nbsp;<span class="op" id="3023584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3023587">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="3023620">func</span>&nbsp;<span class="op" id="3023625">(</span><span class="ident" id="3023626">p</span>&nbsp;<span class="ident" id="3023628">IntSlice</span><span class="op" id="3023636">)</span>&nbsp;<span class="ident" id="3023638">Sort</span><span class="op" id="3023642">(</span><span class="op" id="3023643">)</span>&nbsp;<span class="op" id="3023645">{</span>&nbsp;<span class="ident" id="3023647">Sort</span><span class="op" id="3023651">(</span><span class="ident" id="3023652">p</span><span class="op" id="3023653">)</span>&nbsp;<span class="op" id="3023655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3023658">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3023751">type</span>&nbsp;<span class="ident" id="3023756">Float64Slice</span>&nbsp;<span class="op" id="3023769">[</span><span class="op" id="3023770">]</span><span class="builtintype" id="3023771">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="3023780">func</span>&nbsp;<span class="op" id="3023785">(</span><span class="ident" id="3023786">p</span>&nbsp;<span class="ident" id="3023788">Float64Slice</span><span class="op" id="3023800">)</span>&nbsp;<span class="ident" id="3023802">Len</span><span class="op" id="3023805">(</span><span class="op" id="3023806">)</span>&nbsp;<span class="builtintype" id="3023808">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3023822">{</span>&nbsp;<span class="keyword" id="3023824">return</span>&nbsp;<span class="builtinfunc" id="3023831">len</span><span class="op" id="3023834">(</span><span class="ident" id="3023835">p</span><span class="op" id="3023836">)</span>&nbsp;<span class="op" id="3023838">}</span><br>
<span class="lineno"></span><span class="keyword" id="3023840">func</span>&nbsp;<span class="op" id="3023845">(</span><span class="ident" id="3023846">p</span>&nbsp;<span class="ident" id="3023848">Float64Slice</span><span class="op" id="3023860">)</span>&nbsp;<span class="ident" id="3023862">Less</span><span class="op" id="3023866">(</span><span class="ident" id="3023867">i</span><span class="op" id="3023868">,</span>&nbsp;<span class="ident" id="3023870">j</span>&nbsp;<span class="builtintype" id="3023872">int</span><span class="op" id="3023875">)</span>&nbsp;<span class="builtintype" id="3023877">bool</span>&nbsp;<span class="op" id="3023882">{</span>&nbsp;<span class="keyword" id="3023884">return</span>&nbsp;<span class="ident" id="3023891">p</span><span class="op" id="3023892">[</span><span class="ident" id="3023893">i</span><span class="op" id="3023894">]</span>&nbsp;<span class="op" id="3023896">&lt;</span>&nbsp;<span class="ident" id="3023898">p</span><span class="op" id="3023899">[</span><span class="ident" id="3023900">j</span><span class="op" id="3023901">]</span>&nbsp;<span class="op" id="3023903">||</span>&nbsp;<span class="ident" id="3023906">isNaN</span><span class="op" id="3023911">(</span><span class="ident" id="3023912">p</span><span class="op" id="3023913">[</span><span class="ident" id="3023914">i</span><span class="op" id="3023915">]</span><span class="op" id="3023916">)</span>&nbsp;<span class="op" id="3023918">&amp;&amp;</span>&nbsp;<span class="op" id="3023921">!</span><span class="ident" id="3023922">isNaN</span><span class="op" id="3023927">(</span><span class="ident" id="3023928">p</span><span class="op" id="3023929">[</span><span class="ident" id="3023930">j</span><span class="op" id="3023931">]</span><span class="op" id="3023932">)</span>&nbsp;<span class="op" id="3023934">}</span><br>
<span class="lineno"></span><span class="keyword" id="3023936">func</span>&nbsp;<span class="op" id="3023941">(</span><span class="ident" id="3023942">p</span>&nbsp;<span class="ident" id="3023944">Float64Slice</span><span class="op" id="3023956">)</span>&nbsp;<span class="ident" id="3023958">Swap</span><span class="op" id="3023962">(</span><span class="ident" id="3023963">i</span><span class="op" id="3023964">,</span>&nbsp;<span class="ident" id="3023966">j</span>&nbsp;<span class="builtintype" id="3023968">int</span><span class="op" id="3023971">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3023978">{</span>&nbsp;<span class="ident" id="3023980">p</span><span class="op" id="3023981">[</span><span class="ident" id="3023982">i</span><span class="op" id="3023983">]</span><span class="op" id="3023984">,</span>&nbsp;<span class="ident" id="3023986">p</span><span class="op" id="3023987">[</span><span class="ident" id="3023988">j</span><span class="op" id="3023989">]</span>&nbsp;<span class="op" id="3023991">=</span>&nbsp;<span class="ident" id="3023993">p</span><span class="op" id="3023994">[</span><span class="ident" id="3023995">j</span><span class="op" id="3023996">]</span><span class="op" id="3023997">,</span>&nbsp;<span class="ident" id="3023999">p</span><span class="op" id="3024000">[</span><span class="ident" id="3024001">i</span><span class="op" id="3024002">]</span>&nbsp;<span class="op" id="3024004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3024007">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="3024083">func</span>&nbsp;<span class="ident" id="3024088">isNaN</span><span class="op" id="3024093">(</span><span class="ident" id="3024094">f</span>&nbsp;<span class="builtintype" id="3024096">float64</span><span class="op" id="3024103">)</span>&nbsp;<span class="builtintype" id="3024105">bool</span>&nbsp;<span class="op" id="3024110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3024113">return</span>&nbsp;<span class="ident" id="3024120">f</span>&nbsp;<span class="op" id="3024122">!=</span>&nbsp;<span class="ident" id="3024125">f</span><br>
<span class="lineno"></span><span class="op" id="3024127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3024130">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="3024163">func</span>&nbsp;<span class="op" id="3024168">(</span><span class="ident" id="3024169">p</span>&nbsp;<span class="ident" id="3024171">Float64Slice</span><span class="op" id="3024183">)</span>&nbsp;<span class="ident" id="3024185">Sort</span><span class="op" id="3024189">(</span><span class="op" id="3024190">)</span>&nbsp;<span class="op" id="3024192">{</span>&nbsp;<span class="ident" id="3024194">Sort</span><span class="op" id="3024198">(</span><span class="ident" id="3024199">p</span><span class="op" id="3024200">)</span>&nbsp;<span class="op" id="3024202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3024205">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3024296">type</span>&nbsp;<span class="ident" id="3024301">StringSlice</span>&nbsp;<span class="op" id="3024313">[</span><span class="op" id="3024314">]</span><span class="builtintype" id="3024315">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="3024323">func</span>&nbsp;<span class="op" id="3024328">(</span><span class="ident" id="3024329">p</span>&nbsp;<span class="ident" id="3024331">StringSlice</span><span class="op" id="3024342">)</span>&nbsp;<span class="ident" id="3024344">Len</span><span class="op" id="3024347">(</span><span class="op" id="3024348">)</span>&nbsp;<span class="builtintype" id="3024350">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3024364">{</span>&nbsp;<span class="keyword" id="3024366">return</span>&nbsp;<span class="builtinfunc" id="3024373">len</span><span class="op" id="3024376">(</span><span class="ident" id="3024377">p</span><span class="op" id="3024378">)</span>&nbsp;<span class="op" id="3024380">}</span><br>
<span class="lineno"></span><span class="keyword" id="3024382">func</span>&nbsp;<span class="op" id="3024387">(</span><span class="ident" id="3024388">p</span>&nbsp;<span class="ident" id="3024390">StringSlice</span><span class="op" id="3024401">)</span>&nbsp;<span class="ident" id="3024403">Less</span><span class="op" id="3024407">(</span><span class="ident" id="3024408">i</span><span class="op" id="3024409">,</span>&nbsp;<span class="ident" id="3024411">j</span>&nbsp;<span class="builtintype" id="3024413">int</span><span class="op" id="3024416">)</span>&nbsp;<span class="builtintype" id="3024418">bool</span>&nbsp;<span class="op" id="3024423">{</span>&nbsp;<span class="keyword" id="3024425">return</span>&nbsp;<span class="ident" id="3024432">p</span><span class="op" id="3024433">[</span><span class="ident" id="3024434">i</span><span class="op" id="3024435">]</span>&nbsp;<span class="op" id="3024437">&lt;</span>&nbsp;<span class="ident" id="3024439">p</span><span class="op" id="3024440">[</span><span class="ident" id="3024441">j</span><span class="op" id="3024442">]</span>&nbsp;<span class="op" id="3024444">}</span><br>
<span class="lineno"></span><span class="keyword" id="3024446">func</span>&nbsp;<span class="op" id="3024451">(</span><span class="ident" id="3024452">p</span>&nbsp;<span class="ident" id="3024454">StringSlice</span><span class="op" id="3024465">)</span>&nbsp;<span class="ident" id="3024467">Swap</span><span class="op" id="3024471">(</span><span class="ident" id="3024472">i</span><span class="op" id="3024473">,</span>&nbsp;<span class="ident" id="3024475">j</span>&nbsp;<span class="builtintype" id="3024477">int</span><span class="op" id="3024480">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3024487">{</span>&nbsp;<span class="ident" id="3024489">p</span><span class="op" id="3024490">[</span><span class="ident" id="3024491">i</span><span class="op" id="3024492">]</span><span class="op" id="3024493">,</span>&nbsp;<span class="ident" id="3024495">p</span><span class="op" id="3024496">[</span><span class="ident" id="3024497">j</span><span class="op" id="3024498">]</span>&nbsp;<span class="op" id="3024500">=</span>&nbsp;<span class="ident" id="3024502">p</span><span class="op" id="3024503">[</span><span class="ident" id="3024504">j</span><span class="op" id="3024505">]</span><span class="op" id="3024506">,</span>&nbsp;<span class="ident" id="3024508">p</span><span class="op" id="3024509">[</span><span class="ident" id="3024510">i</span><span class="op" id="3024511">]</span>&nbsp;<span class="op" id="3024513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3024516">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="3024549">func</span>&nbsp;<span class="op" id="3024554">(</span><span class="ident" id="3024555">p</span>&nbsp;<span class="ident" id="3024557">StringSlice</span><span class="op" id="3024568">)</span>&nbsp;<span class="ident" id="3024570">Sort</span><span class="op" id="3024574">(</span><span class="op" id="3024575">)</span>&nbsp;<span class="op" id="3024577">{</span>&nbsp;<span class="ident" id="3024579">Sort</span><span class="op" id="3024583">(</span><span class="ident" id="3024584">p</span><span class="op" id="3024585">)</span>&nbsp;<span class="op" id="3024587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3024590">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3024632">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="3024683">func</span>&nbsp;<span class="ident" id="3024688">Ints</span><span class="op" id="3024692">(</span><span class="ident" id="3024693">a</span>&nbsp;<span class="op" id="3024695">[</span><span class="op" id="3024696">]</span><span class="builtintype" id="3024697">int</span><span class="op" id="3024700">)</span>&nbsp;<span class="op" id="3024702">{</span>&nbsp;<span class="ident" id="3024704">Sort</span><span class="op" id="3024708">(</span><span class="ident" id="3024709">IntSlice</span><span class="op" id="3024717">(</span><span class="ident" id="3024718">a</span><span class="op" id="3024719">)</span><span class="op" id="3024720">)</span>&nbsp;<span class="op" id="3024722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3024725">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3024784">func</span>&nbsp;<span class="ident" id="3024789">Float64s</span><span class="op" id="3024797">(</span><span class="ident" id="3024798">a</span>&nbsp;<span class="op" id="3024800">[</span><span class="op" id="3024801">]</span><span class="builtintype" id="3024802">float64</span><span class="op" id="3024809">)</span>&nbsp;<span class="op" id="3024811">{</span>&nbsp;<span class="ident" id="3024813">Sort</span><span class="op" id="3024817">(</span><span class="ident" id="3024818">Float64Slice</span><span class="op" id="3024830">(</span><span class="ident" id="3024831">a</span><span class="op" id="3024832">)</span><span class="op" id="3024833">)</span>&nbsp;<span class="op" id="3024835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="3024838">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3024895">func</span>&nbsp;<span class="ident" id="3024900">Strings</span><span class="op" id="3024907">(</span><span class="ident" id="3024908">a</span>&nbsp;<span class="op" id="3024910">[</span><span class="op" id="3024911">]</span><span class="builtintype" id="3024912">string</span><span class="op" id="3024918">)</span>&nbsp;<span class="op" id="3024920">{</span>&nbsp;<span class="ident" id="3024922">Sort</span><span class="op" id="3024926">(</span><span class="ident" id="3024927">StringSlice</span><span class="op" id="3024938">(</span><span class="ident" id="3024939">a</span><span class="op" id="3024940">)</span><span class="op" id="3024941">)</span>&nbsp;<span class="op" id="3024943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3024946">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3025024">func</span>&nbsp;<span class="ident" id="3025029">IntsAreSorted</span><span class="op" id="3025042">(</span><span class="ident" id="3025043">a</span>&nbsp;<span class="op" id="3025045">[</span><span class="op" id="3025046">]</span><span class="builtintype" id="3025047">int</span><span class="op" id="3025050">)</span>&nbsp;<span class="builtintype" id="3025052">bool</span>&nbsp;<span class="op" id="3025057">{</span>&nbsp;<span class="keyword" id="3025059">return</span>&nbsp;<span class="ident" id="3025066">IsSorted</span><span class="op" id="3025074">(</span><span class="ident" id="3025075">IntSlice</span><span class="op" id="3025083">(</span><span class="ident" id="3025084">a</span><span class="op" id="3025085">)</span><span class="op" id="3025086">)</span>&nbsp;<span class="op" id="3025088">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="3025091">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3025177">func</span>&nbsp;<span class="ident" id="3025182">Float64sAreSorted</span><span class="op" id="3025199">(</span><span class="ident" id="3025200">a</span>&nbsp;<span class="op" id="3025202">[</span><span class="op" id="3025203">]</span><span class="builtintype" id="3025204">float64</span><span class="op" id="3025211">)</span>&nbsp;<span class="builtintype" id="3025213">bool</span>&nbsp;<span class="op" id="3025218">{</span>&nbsp;<span class="keyword" id="3025220">return</span>&nbsp;<span class="ident" id="3025227">IsSorted</span><span class="op" id="3025235">(</span><span class="ident" id="3025236">Float64Slice</span><span class="op" id="3025248">(</span><span class="ident" id="3025249">a</span><span class="op" id="3025250">)</span><span class="op" id="3025251">)</span>&nbsp;<span class="op" id="3025253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3025256">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="3025340">func</span>&nbsp;<span class="ident" id="3025345">StringsAreSorted</span><span class="op" id="3025361">(</span><span class="ident" id="3025362">a</span>&nbsp;<span class="op" id="3025364">[</span><span class="op" id="3025365">]</span><span class="builtintype" id="3025366">string</span><span class="op" id="3025372">)</span>&nbsp;<span class="builtintype" id="3025374">bool</span>&nbsp;<span class="op" id="3025379">{</span>&nbsp;<span class="keyword" id="3025381">return</span>&nbsp;<span class="ident" id="3025388">IsSorted</span><span class="op" id="3025396">(</span><span class="ident" id="3025397">StringSlice</span><span class="op" id="3025408">(</span><span class="ident" id="3025409">a</span><span class="op" id="3025410">)</span><span class="op" id="3025411">)</span>&nbsp;<span class="op" id="3025413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3025416">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="3025444">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="3025520">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="3025595">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="3025658">//</span><br>
<span class="lineno"></span><span class="comment" id="3025661">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="3025703">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="3025775">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="3025793">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="3025847">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="3025924">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="3025996">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="3026068">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="3026123">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3026196">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="3026247">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="3026323">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="3026397">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="3026463">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="3026540">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3026619">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="3026697">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="3026771">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="3026819">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="3026893">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3026942">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="3027015">//</span><br>
<span class="lineno">315</span><span class="comment" id="3027018">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3027088">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="3027144">func</span>&nbsp;<span class="ident" id="3027149">Stable</span><span class="op" id="3027155">(</span><span class="ident" id="3027156">data</span>&nbsp;<span class="ident" id="3027161">Interface</span><span class="op" id="3027170">)</span>&nbsp;<span class="op" id="3027172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027175">n</span>&nbsp;<span class="op" id="3027177">:=</span>&nbsp;<span class="ident" id="3027180">data</span><span class="op" id="3027184">.</span><span class="ident" id="3027185">Len</span><span class="op" id="3027188">(</span><span class="op" id="3027189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027192">blockSize</span>&nbsp;<span class="op" id="3027202">:=</span>&nbsp;<span class="num" id="3027205">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027209">a</span><span class="op" id="3027210">,</span>&nbsp;<span class="ident" id="3027212">b</span>&nbsp;<span class="op" id="3027214">:=</span>&nbsp;<span class="num" id="3027217">0</span><span class="op" id="3027218">,</span>&nbsp;<span class="ident" id="3027220">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3027231">for</span>&nbsp;<span class="ident" id="3027235">b</span>&nbsp;<span class="op" id="3027237">&lt;=</span>&nbsp;<span class="ident" id="3027240">n</span>&nbsp;<span class="op" id="3027242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027246">insertionSort</span><span class="op" id="3027259">(</span><span class="ident" id="3027260">data</span><span class="op" id="3027264">,</span>&nbsp;<span class="ident" id="3027266">a</span><span class="op" id="3027267">,</span>&nbsp;<span class="ident" id="3027269">b</span><span class="op" id="3027270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027274">a</span>&nbsp;<span class="op" id="3027276">=</span>&nbsp;<span class="ident" id="3027278">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027282">b</span>&nbsp;<span class="op" id="3027284">+=</span>&nbsp;<span class="ident" id="3027287">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3027298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027301">insertionSort</span><span class="op" id="3027314">(</span><span class="ident" id="3027315">data</span><span class="op" id="3027319">,</span>&nbsp;<span class="ident" id="3027321">a</span><span class="op" id="3027322">,</span>&nbsp;<span class="ident" id="3027324">n</span><span class="op" id="3027325">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3027329">for</span>&nbsp;<span class="ident" id="3027333">blockSize</span>&nbsp;<span class="op" id="3027343">&lt;</span>&nbsp;<span class="ident" id="3027345">n</span>&nbsp;<span class="op" id="3027347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027351">a</span><span class="op" id="3027352">,</span>&nbsp;<span class="ident" id="3027354">b</span>&nbsp;<span class="op" id="3027356">=</span>&nbsp;<span class="num" id="3027358">0</span><span class="op" id="3027359">,</span>&nbsp;<span class="num" id="3027361">2</span><span class="op" id="3027362">*</span><span class="ident" id="3027363">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3027375">for</span>&nbsp;<span class="ident" id="3027379">b</span>&nbsp;<span class="op" id="3027381">&lt;=</span>&nbsp;<span class="ident" id="3027384">n</span>&nbsp;<span class="op" id="3027386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027391">symMerge</span><span class="op" id="3027399">(</span><span class="ident" id="3027400">data</span><span class="op" id="3027404">,</span>&nbsp;<span class="ident" id="3027406">a</span><span class="op" id="3027407">,</span>&nbsp;<span class="ident" id="3027409">a</span><span class="op" id="3027410">+</span><span class="ident" id="3027411">blockSize</span><span class="op" id="3027420">,</span>&nbsp;<span class="ident" id="3027422">b</span><span class="op" id="3027423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027428">a</span>&nbsp;<span class="op" id="3027430">=</span>&nbsp;<span class="ident" id="3027432">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027437">b</span>&nbsp;<span class="op" id="3027439">+=</span>&nbsp;<span class="num" id="3027442">2</span>&nbsp;<span class="op" id="3027444">*</span>&nbsp;<span class="ident" id="3027446">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3027458">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027462">symMerge</span><span class="op" id="3027470">(</span><span class="ident" id="3027471">data</span><span class="op" id="3027475">,</span>&nbsp;<span class="ident" id="3027477">a</span><span class="op" id="3027478">,</span>&nbsp;<span class="ident" id="3027480">a</span><span class="op" id="3027481">+</span><span class="ident" id="3027482">blockSize</span><span class="op" id="3027491">,</span>&nbsp;<span class="ident" id="3027493">n</span><span class="op" id="3027494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3027498">blockSize</span>&nbsp;<span class="op" id="3027508">*=</span>&nbsp;<span class="num" id="3027511">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3027514">}</span><br>
<span class="lineno"></span><span class="op" id="3027516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="3027519">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="3027596">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="3027673">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="3027748">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3027823">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="3027875">//</span><br>
<span class="lineno"></span><span class="comment" id="3027878">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="3027919">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="3027970">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="3028031">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="3028090">//</span><br>
<span class="lineno"></span><span class="comment" id="3028093">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3028168">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="3028248">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="3028325">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="3028368">func</span>&nbsp;<span class="ident" id="3028373">symMerge</span><span class="op" id="3028381">(</span><span class="ident" id="3028382">data</span>&nbsp;<span class="ident" id="3028387">Interface</span><span class="op" id="3028396">,</span>&nbsp;<span class="ident" id="3028398">a</span><span class="op" id="3028399">,</span>&nbsp;<span class="ident" id="3028401">m</span><span class="op" id="3028402">,</span>&nbsp;<span class="ident" id="3028404">b</span>&nbsp;<span class="builtintype" id="3028406">int</span><span class="op" id="3028409">)</span>&nbsp;<span class="op" id="3028411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028414">if</span>&nbsp;<span class="ident" id="3028417">a</span>&nbsp;<span class="op" id="3028419">&gt;=</span>&nbsp;<span class="ident" id="3028422">m</span>&nbsp;<span class="op" id="3028424">||</span>&nbsp;<span class="ident" id="3028427">m</span>&nbsp;<span class="op" id="3028429">&gt;=</span>&nbsp;<span class="ident" id="3028432">b</span>&nbsp;<span class="op" id="3028434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028438">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3028446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028450">mid</span>&nbsp;<span class="op" id="3028454">:=</span>&nbsp;<span class="ident" id="3028457">a</span>&nbsp;<span class="op" id="3028459">+</span>&nbsp;<span class="op" id="3028461">(</span><span class="ident" id="3028462">b</span><span class="op" id="3028463">-</span><span class="ident" id="3028464">a</span><span class="op" id="3028465">)</span><span class="op" id="3028466">/</span><span class="num" id="3028467">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028470">n</span>&nbsp;<span class="op" id="3028472">:=</span>&nbsp;<span class="ident" id="3028475">mid</span>&nbsp;<span class="op" id="3028479">+</span>&nbsp;<span class="ident" id="3028481">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028484">start</span>&nbsp;<span class="op" id="3028490">:=</span>&nbsp;<span class="num" id="3028493">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028496">if</span>&nbsp;<span class="ident" id="3028499">m</span>&nbsp;<span class="op" id="3028501">&gt;</span>&nbsp;<span class="ident" id="3028503">mid</span>&nbsp;<span class="op" id="3028507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028511">start</span>&nbsp;<span class="op" id="3028517">=</span>&nbsp;<span class="ident" id="3028519">n</span>&nbsp;<span class="op" id="3028521">-</span>&nbsp;<span class="ident" id="3028523">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028527">r</span><span class="op" id="3028528">,</span>&nbsp;<span class="ident" id="3028530">p</span>&nbsp;<span class="op" id="3028532">:=</span>&nbsp;<span class="ident" id="3028535">mid</span><span class="op" id="3028538">,</span>&nbsp;<span class="ident" id="3028540">n</span><span class="op" id="3028541">-</span><span class="num" id="3028542">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028546">for</span>&nbsp;<span class="ident" id="3028550">start</span>&nbsp;<span class="op" id="3028556">&lt;</span>&nbsp;<span class="ident" id="3028558">r</span>&nbsp;<span class="op" id="3028560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028565">c</span>&nbsp;<span class="op" id="3028567">:=</span>&nbsp;<span class="ident" id="3028570">start</span>&nbsp;<span class="op" id="3028576">+</span>&nbsp;<span class="op" id="3028578">(</span><span class="ident" id="3028579">r</span><span class="op" id="3028580">-</span><span class="ident" id="3028581">start</span><span class="op" id="3028586">)</span><span class="op" id="3028587">/</span><span class="num" id="3028588">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028593">if</span>&nbsp;<span class="op" id="3028596">!</span><span class="ident" id="3028597">data</span><span class="op" id="3028601">.</span><span class="ident" id="3028602">Less</span><span class="op" id="3028606">(</span><span class="ident" id="3028607">p</span><span class="op" id="3028608">-</span><span class="ident" id="3028609">c</span><span class="op" id="3028610">,</span>&nbsp;<span class="ident" id="3028612">c</span><span class="op" id="3028613">)</span>&nbsp;<span class="op" id="3028615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028621">start</span>&nbsp;<span class="op" id="3028627">=</span>&nbsp;<span class="ident" id="3028629">c</span>&nbsp;<span class="op" id="3028631">+</span>&nbsp;<span class="num" id="3028633">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3028638">}</span>&nbsp;<span class="keyword" id="3028640">else</span>&nbsp;<span class="op" id="3028645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028651">r</span>&nbsp;<span class="op" id="3028653">=</span>&nbsp;<span class="ident" id="3028655">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3028660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3028664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3028667">}</span>&nbsp;<span class="keyword" id="3028669">else</span>&nbsp;<span class="op" id="3028674">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028678">start</span>&nbsp;<span class="op" id="3028684">=</span>&nbsp;<span class="ident" id="3028686">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028690">r</span><span class="op" id="3028691">,</span>&nbsp;<span class="ident" id="3028693">p</span>&nbsp;<span class="op" id="3028695">:=</span>&nbsp;<span class="ident" id="3028698">m</span><span class="op" id="3028699">,</span>&nbsp;<span class="ident" id="3028701">n</span><span class="op" id="3028702">-</span><span class="num" id="3028703">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028707">for</span>&nbsp;<span class="ident" id="3028711">start</span>&nbsp;<span class="op" id="3028717">&lt;</span>&nbsp;<span class="ident" id="3028719">r</span>&nbsp;<span class="op" id="3028721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028726">c</span>&nbsp;<span class="op" id="3028728">:=</span>&nbsp;<span class="ident" id="3028731">start</span>&nbsp;<span class="op" id="3028737">+</span>&nbsp;<span class="op" id="3028739">(</span><span class="ident" id="3028740">r</span><span class="op" id="3028741">-</span><span class="ident" id="3028742">start</span><span class="op" id="3028747">)</span><span class="op" id="3028748">/</span><span class="num" id="3028749">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028754">if</span>&nbsp;<span class="op" id="3028757">!</span><span class="ident" id="3028758">data</span><span class="op" id="3028762">.</span><span class="ident" id="3028763">Less</span><span class="op" id="3028767">(</span><span class="ident" id="3028768">p</span><span class="op" id="3028769">-</span><span class="ident" id="3028770">c</span><span class="op" id="3028771">,</span>&nbsp;<span class="ident" id="3028773">c</span><span class="op" id="3028774">)</span>&nbsp;<span class="op" id="3028776">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028782">start</span>&nbsp;<span class="op" id="3028788">=</span>&nbsp;<span class="ident" id="3028790">c</span>&nbsp;<span class="op" id="3028792">+</span>&nbsp;<span class="num" id="3028794">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3028799">}</span>&nbsp;<span class="keyword" id="3028801">else</span>&nbsp;<span class="op" id="3028806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028812">r</span>&nbsp;<span class="op" id="3028814">=</span>&nbsp;<span class="ident" id="3028816">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3028821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3028825">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3028828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028831">end</span>&nbsp;<span class="op" id="3028835">:=</span>&nbsp;<span class="ident" id="3028838">n</span>&nbsp;<span class="op" id="3028840">-</span>&nbsp;<span class="ident" id="3028842">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028849">rotate</span><span class="op" id="3028855">(</span><span class="ident" id="3028856">data</span><span class="op" id="3028860">,</span>&nbsp;<span class="ident" id="3028862">start</span><span class="op" id="3028867">,</span>&nbsp;<span class="ident" id="3028869">m</span><span class="op" id="3028870">,</span>&nbsp;<span class="ident" id="3028872">end</span><span class="op" id="3028875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028878">symMerge</span><span class="op" id="3028886">(</span><span class="ident" id="3028887">data</span><span class="op" id="3028891">,</span>&nbsp;<span class="ident" id="3028893">a</span><span class="op" id="3028894">,</span>&nbsp;<span class="ident" id="3028896">start</span><span class="op" id="3028901">,</span>&nbsp;<span class="ident" id="3028903">mid</span><span class="op" id="3028906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028909">symMerge</span><span class="op" id="3028917">(</span><span class="ident" id="3028918">data</span><span class="op" id="3028922">,</span>&nbsp;<span class="ident" id="3028924">mid</span><span class="op" id="3028927">,</span>&nbsp;<span class="ident" id="3028929">end</span><span class="op" id="3028932">,</span>&nbsp;<span class="ident" id="3028934">b</span><span class="op" id="3028935">)</span><br>
<span class="lineno">390</span><span class="op" id="3028937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3028940">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="3029015">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="3029070">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="3029126">func</span>&nbsp;<span class="ident" id="3029131">rotate</span><span class="op" id="3029137">(</span><span class="ident" id="3029138">data</span>&nbsp;<span class="ident" id="3029143">Interface</span><span class="op" id="3029152">,</span>&nbsp;<span class="ident" id="3029154">a</span><span class="op" id="3029155">,</span>&nbsp;<span class="ident" id="3029157">m</span><span class="op" id="3029158">,</span>&nbsp;<span class="ident" id="3029160">b</span>&nbsp;<span class="builtintype" id="3029162">int</span><span class="op" id="3029165">)</span>&nbsp;<span class="op" id="3029167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029170">i</span>&nbsp;<span class="op" id="3029172">:=</span>&nbsp;<span class="ident" id="3029175">m</span>&nbsp;<span class="op" id="3029177">-</span>&nbsp;<span class="ident" id="3029179">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029182">if</span>&nbsp;<span class="ident" id="3029185">i</span>&nbsp;<span class="op" id="3029187">==</span>&nbsp;<span class="num" id="3029190">0</span>&nbsp;<span class="op" id="3029192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029196">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029204">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029207">j</span>&nbsp;<span class="op" id="3029209">:=</span>&nbsp;<span class="ident" id="3029212">b</span>&nbsp;<span class="op" id="3029214">-</span>&nbsp;<span class="ident" id="3029216">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029219">if</span>&nbsp;<span class="ident" id="3029222">j</span>&nbsp;<span class="op" id="3029224">==</span>&nbsp;<span class="num" id="3029227">0</span>&nbsp;<span class="op" id="3029229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029233">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029245">if</span>&nbsp;<span class="ident" id="3029248">i</span>&nbsp;<span class="op" id="3029250">==</span>&nbsp;<span class="ident" id="3029253">j</span>&nbsp;<span class="op" id="3029255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029259">swapRange</span><span class="op" id="3029268">(</span><span class="ident" id="3029269">data</span><span class="op" id="3029273">,</span>&nbsp;<span class="ident" id="3029275">a</span><span class="op" id="3029276">,</span>&nbsp;<span class="ident" id="3029278">m</span><span class="op" id="3029279">,</span>&nbsp;<span class="ident" id="3029281">i</span><span class="op" id="3029282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029286">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029298">p</span>&nbsp;<span class="op" id="3029300">:=</span>&nbsp;<span class="ident" id="3029303">a</span>&nbsp;<span class="op" id="3029305">+</span>&nbsp;<span class="ident" id="3029307">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029310">for</span>&nbsp;<span class="ident" id="3029314">i</span>&nbsp;<span class="op" id="3029316">!=</span>&nbsp;<span class="ident" id="3029319">j</span>&nbsp;<span class="op" id="3029321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029325">if</span>&nbsp;<span class="ident" id="3029328">i</span>&nbsp;<span class="op" id="3029330">&gt;</span>&nbsp;<span class="ident" id="3029332">j</span>&nbsp;<span class="op" id="3029334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029339">swapRange</span><span class="op" id="3029348">(</span><span class="ident" id="3029349">data</span><span class="op" id="3029353">,</span>&nbsp;<span class="ident" id="3029355">p</span><span class="op" id="3029356">-</span><span class="ident" id="3029357">i</span><span class="op" id="3029358">,</span>&nbsp;<span class="ident" id="3029360">p</span><span class="op" id="3029361">,</span>&nbsp;<span class="ident" id="3029363">j</span><span class="op" id="3029364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029369">i</span>&nbsp;<span class="op" id="3029371">-=</span>&nbsp;<span class="ident" id="3029374">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029378">}</span>&nbsp;<span class="keyword" id="3029380">else</span>&nbsp;<span class="op" id="3029385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029390">swapRange</span><span class="op" id="3029399">(</span><span class="ident" id="3029400">data</span><span class="op" id="3029404">,</span>&nbsp;<span class="ident" id="3029406">p</span><span class="op" id="3029407">-</span><span class="ident" id="3029408">i</span><span class="op" id="3029409">,</span>&nbsp;<span class="ident" id="3029411">p</span><span class="op" id="3029412">+</span><span class="ident" id="3029413">j</span><span class="op" id="3029414">-</span><span class="ident" id="3029415">i</span><span class="op" id="3029416">,</span>&nbsp;<span class="ident" id="3029418">i</span><span class="op" id="3029419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029424">j</span>&nbsp;<span class="op" id="3029426">-=</span>&nbsp;<span class="ident" id="3029429">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029436">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029439">swapRange</span><span class="op" id="3029448">(</span><span class="ident" id="3029449">data</span><span class="op" id="3029453">,</span>&nbsp;<span class="ident" id="3029455">p</span><span class="op" id="3029456">-</span><span class="ident" id="3029457">i</span><span class="op" id="3029458">,</span>&nbsp;<span class="ident" id="3029460">p</span><span class="op" id="3029461">,</span>&nbsp;<span class="ident" id="3029463">i</span><span class="op" id="3029464">)</span><br>
<span class="lineno"></span><span class="op" id="3029466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3029469">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
