<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/format</h2>
<ul>
<li><a href="/gostd/go/format/format.go.html">format.go</a></li>
<li><a href="/gostd/go/format/format_test.go.html" class="current">format_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7733537">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7733592">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7733646">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7733697">package</span>&nbsp;<span class="ident" id="7733705">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733713">import</span>&nbsp;<span class="op" id="7733720">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733723">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733732">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733745">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733757">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733770">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733781">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7733791">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7733794">const</span>&nbsp;<span class="ident" id="7733800">testfile</span>&nbsp;<span class="op" id="7733809">=</span>&nbsp;<span class="string" id="7733811">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733829">func</span>&nbsp;<span class="ident" id="7733834">diff</span><span class="op" id="7733838">(</span><span class="ident" id="7733839">t</span>&nbsp;<span class="op" id="7733841">*</span><span class="ident" id="7733842">testing</span><span class="op" id="7733849">.</span><span class="ident" id="7733850">T</span><span class="op" id="7733851">,</span>&nbsp;<span class="ident" id="7733853">dst</span><span class="op" id="7733856">,</span>&nbsp;<span class="ident" id="7733858">src</span>&nbsp;<span class="op" id="7733862">[</span><span class="op" id="7733863">]</span><span class="builtintype" id="7733864">byte</span><span class="op" id="7733868">)</span>&nbsp;<span class="op" id="7733870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733873">line</span>&nbsp;<span class="op" id="7733878">:=</span>&nbsp;<span class="num" id="7733881">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733884">offs</span>&nbsp;<span class="op" id="7733889">:=</span>&nbsp;<span class="num" id="7733892">0</span>&nbsp;<span class="comment" id="7733894">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733910">for</span>&nbsp;<span class="ident" id="7733914">i</span>&nbsp;<span class="op" id="7733916">:=</span>&nbsp;<span class="num" id="7733919">0</span><span class="op" id="7733920">;</span>&nbsp;<span class="ident" id="7733922">i</span>&nbsp;<span class="op" id="7733924">&lt;</span>&nbsp;<span class="builtinfunc" id="7733926">len</span><span class="op" id="7733929">(</span><span class="ident" id="7733930">dst</span><span class="op" id="7733933">)</span>&nbsp;<span class="op" id="7733935">&amp;&amp;</span>&nbsp;<span class="ident" id="7733938">i</span>&nbsp;<span class="op" id="7733940">&lt;</span>&nbsp;<span class="builtinfunc" id="7733942">len</span><span class="op" id="7733945">(</span><span class="ident" id="7733946">src</span><span class="op" id="7733949">)</span><span class="op" id="7733950">;</span>&nbsp;<span class="ident" id="7733952">i</span><span class="op" id="7733953">++</span>&nbsp;<span class="op" id="7733956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733960">d</span>&nbsp;<span class="op" id="7733962">:=</span>&nbsp;<span class="ident" id="7733965">dst</span><span class="op" id="7733968">[</span><span class="ident" id="7733969">i</span><span class="op" id="7733970">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733974">s</span>&nbsp;<span class="op" id="7733976">:=</span>&nbsp;<span class="ident" id="7733979">src</span><span class="op" id="7733982">[</span><span class="ident" id="7733983">i</span><span class="op" id="7733984">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733988">if</span>&nbsp;<span class="ident" id="7733991">d</span>&nbsp;<span class="op" id="7733993">!=</span>&nbsp;<span class="ident" id="7733996">s</span>&nbsp;<span class="op" id="7733998">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734003">t</span><span class="op" id="7734004">.</span><span class="ident" id="7734005">Errorf</span><span class="op" id="7734011">(</span><span class="string" id="7734012">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="7734026">,</span>&nbsp;<span class="ident" id="7734028">line</span><span class="op" id="7734032">,</span>&nbsp;<span class="ident" id="7734034">dst</span><span class="op" id="7734037">[</span><span class="ident" id="7734038">offs</span><span class="op" id="7734042">:</span><span class="ident" id="7734043">i</span><span class="op" id="7734044">+</span><span class="num" id="7734045">1</span><span class="op" id="7734046">]</span><span class="op" id="7734047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734052">t</span><span class="op" id="7734053">.</span><span class="ident" id="7734054">Errorf</span><span class="op" id="7734060">(</span><span class="string" id="7734061">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="7734075">,</span>&nbsp;<span class="ident" id="7734077">line</span><span class="op" id="7734081">,</span>&nbsp;<span class="ident" id="7734083">src</span><span class="op" id="7734086">[</span><span class="ident" id="7734087">offs</span><span class="op" id="7734091">:</span><span class="ident" id="7734092">i</span><span class="op" id="7734093">+</span><span class="num" id="7734094">1</span><span class="op" id="7734095">]</span><span class="op" id="7734096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734101">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734114">if</span>&nbsp;<span class="ident" id="7734117">s</span>&nbsp;<span class="op" id="7734119">==</span>&nbsp;<span class="string" id="7734122">&#39;\n&#39;</span>&nbsp;<span class="op" id="7734127">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734132">line</span><span class="op" id="7734136">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734142">offs</span>&nbsp;<span class="op" id="7734147">=</span>&nbsp;<span class="ident" id="7734149">i</span>&nbsp;<span class="op" id="7734151">+</span>&nbsp;<span class="num" id="7734153">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734163">if</span>&nbsp;<span class="builtinfunc" id="7734166">len</span><span class="op" id="7734169">(</span><span class="ident" id="7734170">dst</span><span class="op" id="7734173">)</span>&nbsp;<span class="op" id="7734175">!=</span>&nbsp;<span class="builtinfunc" id="7734178">len</span><span class="op" id="7734181">(</span><span class="ident" id="7734182">src</span><span class="op" id="7734185">)</span>&nbsp;<span class="op" id="7734187">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734191">t</span><span class="op" id="7734192">.</span><span class="ident" id="7734193">Errorf</span><span class="op" id="7734199">(</span><span class="string" id="7734200">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="7734240">,</span>&nbsp;<span class="builtinfunc" id="7734242">len</span><span class="op" id="7734245">(</span><span class="ident" id="7734246">dst</span><span class="op" id="7734249">)</span><span class="op" id="7734250">,</span>&nbsp;<span class="builtinfunc" id="7734252">len</span><span class="op" id="7734255">(</span><span class="ident" id="7734256">src</span><span class="op" id="7734259">)</span><span class="op" id="7734260">,</span>&nbsp;<span class="ident" id="7734262">src</span><span class="op" id="7734265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734268">}</span><br>
<span class="lineno"></span><span class="op" id="7734270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7734273">func</span>&nbsp;<span class="ident" id="7734278">TestNode</span><span class="op" id="7734286">(</span><span class="ident" id="7734287">t</span>&nbsp;<span class="op" id="7734289">*</span><span class="ident" id="7734290">testing</span><span class="op" id="7734297">.</span><span class="ident" id="7734298">T</span><span class="op" id="7734299">)</span>&nbsp;<span class="op" id="7734301">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734304">src</span><span class="op" id="7734307">,</span>&nbsp;<span class="ident" id="7734309">err</span>&nbsp;<span class="op" id="7734313">:=</span>&nbsp;<span class="ident" id="7734316">ioutil</span><span class="op" id="7734322">.</span><span class="ident" id="7734323">ReadFile</span><span class="op" id="7734331">(</span><span class="ident" id="7734332">testfile</span><span class="op" id="7734340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734343">if</span>&nbsp;<span class="ident" id="7734346">err</span>&nbsp;<span class="op" id="7734350">!=</span>&nbsp;<span class="builtintype" id="7734353">nil</span>&nbsp;<span class="op" id="7734357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734361">t</span><span class="op" id="7734362">.</span><span class="ident" id="7734363">Fatal</span><span class="op" id="7734368">(</span><span class="ident" id="7734369">err</span><span class="op" id="7734372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734379">fset</span>&nbsp;<span class="op" id="7734384">:=</span>&nbsp;<span class="ident" id="7734387">token</span><span class="op" id="7734392">.</span><span class="ident" id="7734393">NewFileSet</span><span class="op" id="7734403">(</span><span class="op" id="7734404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734407">file</span><span class="op" id="7734411">,</span>&nbsp;<span class="ident" id="7734413">err</span>&nbsp;<span class="op" id="7734417">:=</span>&nbsp;<span class="ident" id="7734420">parser</span><span class="op" id="7734426">.</span><span class="ident" id="7734427">ParseFile</span><span class="op" id="7734436">(</span><span class="ident" id="7734437">fset</span><span class="op" id="7734441">,</span>&nbsp;<span class="ident" id="7734443">testfile</span><span class="op" id="7734451">,</span>&nbsp;<span class="ident" id="7734453">src</span><span class="op" id="7734456">,</span>&nbsp;<span class="ident" id="7734458">parser</span><span class="op" id="7734464">.</span><span class="ident" id="7734465">ParseComments</span><span class="op" id="7734478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734481">if</span>&nbsp;<span class="ident" id="7734484">err</span>&nbsp;<span class="op" id="7734488">!=</span>&nbsp;<span class="builtintype" id="7734491">nil</span>&nbsp;<span class="op" id="7734495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734499">t</span><span class="op" id="7734500">.</span><span class="ident" id="7734501">Fatal</span><span class="op" id="7734506">(</span><span class="ident" id="7734507">err</span><span class="op" id="7734510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734513">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734517">var</span>&nbsp;<span class="ident" id="7734521">buf</span>&nbsp;<span class="ident" id="7734525">bytes</span><span class="op" id="7734530">.</span><span class="ident" id="7734531">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734540">if</span>&nbsp;<span class="ident" id="7734543">err</span>&nbsp;<span class="op" id="7734547">=</span>&nbsp;<span class="ident" id="7734549">Node</span><span class="op" id="7734553">(</span><span class="op" id="7734554">&amp;</span><span class="ident" id="7734555">buf</span><span class="op" id="7734558">,</span>&nbsp;<span class="ident" id="7734560">fset</span><span class="op" id="7734564">,</span>&nbsp;<span class="ident" id="7734566">file</span><span class="op" id="7734570">)</span><span class="op" id="7734571">;</span>&nbsp;<span class="ident" id="7734573">err</span>&nbsp;<span class="op" id="7734577">!=</span>&nbsp;<span class="builtintype" id="7734580">nil</span>&nbsp;<span class="op" id="7734584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734588">t</span><span class="op" id="7734589">.</span><span class="ident" id="7734590">Fatal</span><span class="op" id="7734595">(</span><span class="string" id="7734596">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="7734610">,</span>&nbsp;<span class="ident" id="7734612">err</span><span class="op" id="7734615">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734622">diff</span><span class="op" id="7734626">(</span><span class="ident" id="7734627">t</span><span class="op" id="7734628">,</span>&nbsp;<span class="ident" id="7734630">buf</span><span class="op" id="7734633">.</span><span class="ident" id="7734634">Bytes</span><span class="op" id="7734639">(</span><span class="op" id="7734640">)</span><span class="op" id="7734641">,</span>&nbsp;<span class="ident" id="7734643">src</span><span class="op" id="7734646">)</span><br>
<span class="lineno"></span><span class="op" id="7734648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7734651">func</span>&nbsp;<span class="ident" id="7734656">TestSource</span><span class="op" id="7734666">(</span><span class="ident" id="7734667">t</span>&nbsp;<span class="op" id="7734669">*</span><span class="ident" id="7734670">testing</span><span class="op" id="7734677">.</span><span class="ident" id="7734678">T</span><span class="op" id="7734679">)</span>&nbsp;<span class="op" id="7734681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734684">src</span><span class="op" id="7734687">,</span>&nbsp;<span class="ident" id="7734689">err</span>&nbsp;<span class="op" id="7734693">:=</span>&nbsp;<span class="ident" id="7734696">ioutil</span><span class="op" id="7734702">.</span><span class="ident" id="7734703">ReadFile</span><span class="op" id="7734711">(</span><span class="ident" id="7734712">testfile</span><span class="op" id="7734720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734723">if</span>&nbsp;<span class="ident" id="7734726">err</span>&nbsp;<span class="op" id="7734730">!=</span>&nbsp;<span class="builtintype" id="7734733">nil</span>&nbsp;<span class="op" id="7734737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734741">t</span><span class="op" id="7734742">.</span><span class="ident" id="7734743">Fatal</span><span class="op" id="7734748">(</span><span class="ident" id="7734749">err</span><span class="op" id="7734752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734755">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734759">res</span><span class="op" id="7734762">,</span>&nbsp;<span class="ident" id="7734764">err</span>&nbsp;<span class="op" id="7734768">:=</span>&nbsp;<span class="ident" id="7734771">Source</span><span class="op" id="7734777">(</span><span class="ident" id="7734778">src</span><span class="op" id="7734781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734784">if</span>&nbsp;<span class="ident" id="7734787">err</span>&nbsp;<span class="op" id="7734791">!=</span>&nbsp;<span class="builtintype" id="7734794">nil</span>&nbsp;<span class="op" id="7734798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734802">t</span><span class="op" id="7734803">.</span><span class="ident" id="7734804">Fatal</span><span class="op" id="7734809">(</span><span class="string" id="7734810">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="7734826">,</span>&nbsp;<span class="ident" id="7734828">err</span><span class="op" id="7734831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734834">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734838">diff</span><span class="op" id="7734842">(</span><span class="ident" id="7734843">t</span><span class="op" id="7734844">,</span>&nbsp;<span class="ident" id="7734846">res</span><span class="op" id="7734849">,</span>&nbsp;<span class="ident" id="7734851">src</span><span class="op" id="7734854">)</span><br>
<span class="lineno"></span><span class="op" id="7734856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7734859">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="7734933">var</span>&nbsp;<span class="ident" id="7734937">tests</span>&nbsp;<span class="op" id="7734943">=</span>&nbsp;<span class="op" id="7734945">[</span><span class="op" id="7734946">]</span><span class="builtintype" id="7734947">string</span><span class="op" id="7734953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7734956">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734978">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="7734998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735001">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="7735012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735015">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="7735045">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7735049">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735069">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="7735077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735080">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="7735116">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7735120">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735164">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="7735184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735187">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7735213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735216">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7735252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735255">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7735299">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735302">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="7735359">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7735365">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735409">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="7735470">,</span>&nbsp;<span class="comment" id="7735472">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7735519">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735532">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="7735554">,</span>&nbsp;<span class="comment" id="7735556">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7735573">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735596">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="7735610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735613">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="7735627">,</span><br>
<span class="lineno"></span><span class="op" id="7735629">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="7735632">func</span>&nbsp;<span class="ident" id="7735637">String</span><span class="op" id="7735643">(</span><span class="ident" id="7735644">s</span>&nbsp;<span class="builtintype" id="7735646">string</span><span class="op" id="7735652">)</span>&nbsp;<span class="op" id="7735654">(</span><span class="builtintype" id="7735655">string</span><span class="op" id="7735661">,</span>&nbsp;<span class="builtintype" id="7735663">error</span><span class="op" id="7735668">)</span>&nbsp;<span class="op" id="7735670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735673">res</span><span class="op" id="7735676">,</span>&nbsp;<span class="ident" id="7735678">err</span>&nbsp;<span class="op" id="7735682">:=</span>&nbsp;<span class="ident" id="7735685">Source</span><span class="op" id="7735691">(</span><span class="op" id="7735692">[</span><span class="op" id="7735693">]</span><span class="builtintype" id="7735694">byte</span><span class="op" id="7735698">(</span><span class="ident" id="7735699">s</span><span class="op" id="7735700">)</span><span class="op" id="7735701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7735704">if</span>&nbsp;<span class="ident" id="7735707">err</span>&nbsp;<span class="op" id="7735711">!=</span>&nbsp;<span class="builtintype" id="7735714">nil</span>&nbsp;<span class="op" id="7735718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7735722">return</span>&nbsp;<span class="string" id="7735729">&#34;&#34;</span><span class="op" id="7735731">,</span>&nbsp;<span class="ident" id="7735733">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7735741">return</span>&nbsp;<span class="builtintype" id="7735748">string</span><span class="op" id="7735754">(</span><span class="ident" id="7735755">res</span><span class="op" id="7735758">)</span><span class="op" id="7735759">,</span>&nbsp;<span class="builtintype" id="7735761">nil</span><br>
<span class="lineno"></span><span class="op" id="7735765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7735768">func</span>&nbsp;<span class="ident" id="7735773">TestPartial</span><span class="op" id="7735784">(</span><span class="ident" id="7735785">t</span>&nbsp;<span class="op" id="7735787">*</span><span class="ident" id="7735788">testing</span><span class="op" id="7735795">.</span><span class="ident" id="7735796">T</span><span class="op" id="7735797">)</span>&nbsp;<span class="op" id="7735799">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7735802">for</span>&nbsp;<span class="ident" id="7735806">_</span><span class="op" id="7735807">,</span>&nbsp;<span class="ident" id="7735809">src</span>&nbsp;<span class="op" id="7735813">:=</span>&nbsp;<span class="keyword" id="7735816">range</span>&nbsp;<span class="ident" id="7735822">tests</span>&nbsp;<span class="op" id="7735828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7735832">if</span>&nbsp;<span class="ident" id="7735835">strings</span><span class="op" id="7735842">.</span><span class="ident" id="7735843">HasPrefix</span><span class="op" id="7735852">(</span><span class="ident" id="7735853">src</span><span class="op" id="7735856">,</span>&nbsp;<span class="string" id="7735858">&#34;ERROR&#34;</span><span class="op" id="7735865">)</span>&nbsp;<span class="op" id="7735867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7735872">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735900">src</span>&nbsp;<span class="op" id="7735904">=</span>&nbsp;<span class="ident" id="7735906">src</span><span class="op" id="7735909">[</span><span class="num" id="7735910">5</span><span class="op" id="7735911">:</span><span class="op" id="7735912">]</span>&nbsp;<span class="comment" id="7735914">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735940">res</span><span class="op" id="7735943">,</span>&nbsp;<span class="ident" id="7735945">err</span>&nbsp;<span class="op" id="7735949">:=</span>&nbsp;<span class="ident" id="7735952">String</span><span class="op" id="7735958">(</span><span class="ident" id="7735959">src</span><span class="op" id="7735962">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7735967">if</span>&nbsp;<span class="ident" id="7735970">err</span>&nbsp;<span class="op" id="7735974">==</span>&nbsp;<span class="builtintype" id="7735977">nil</span>&nbsp;<span class="op" id="7735981">&amp;&amp;</span>&nbsp;<span class="ident" id="7735984">res</span>&nbsp;<span class="op" id="7735988">==</span>&nbsp;<span class="ident" id="7735991">src</span>&nbsp;<span class="op" id="7735995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736001">t</span><span class="op" id="7736002">.</span><span class="ident" id="7736003">Errorf</span><span class="op" id="7736009">(</span><span class="string" id="7736010">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="7736062">,</span>&nbsp;<span class="ident" id="7736064">src</span><span class="op" id="7736067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736076">}</span>&nbsp;<span class="keyword" id="7736078">else</span>&nbsp;<span class="op" id="7736083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7736088">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736119">res</span><span class="op" id="7736122">,</span>&nbsp;<span class="ident" id="7736124">err</span>&nbsp;<span class="op" id="7736128">:=</span>&nbsp;<span class="ident" id="7736131">String</span><span class="op" id="7736137">(</span><span class="ident" id="7736138">src</span><span class="op" id="7736141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7736146">if</span>&nbsp;<span class="ident" id="7736149">err</span>&nbsp;<span class="op" id="7736153">!=</span>&nbsp;<span class="builtintype" id="7736156">nil</span>&nbsp;<span class="op" id="7736160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736166">t</span><span class="op" id="7736167">.</span><span class="ident" id="7736168">Errorf</span><span class="op" id="7736174">(</span><span class="string" id="7736175">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="7736204">,</span>&nbsp;<span class="ident" id="7736206">err</span><span class="op" id="7736209">,</span>&nbsp;<span class="ident" id="7736211">src</span><span class="op" id="7736214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736219">}</span>&nbsp;<span class="keyword" id="7736221">else</span>&nbsp;<span class="keyword" id="7736226">if</span>&nbsp;<span class="ident" id="7736229">res</span>&nbsp;<span class="op" id="7736233">!=</span>&nbsp;<span class="ident" id="7736236">src</span>&nbsp;<span class="op" id="7736240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736246">t</span><span class="op" id="7736247">.</span><span class="ident" id="7736248">Errorf</span><span class="op" id="7736254">(</span><span class="string" id="7736255">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="7736302">,</span>&nbsp;<span class="ident" id="7736304">src</span><span class="op" id="7736307">,</span>&nbsp;<span class="ident" id="7736309">res</span><span class="op" id="7736312">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736324">}</span><br>
<span class="lineno"></span><span class="op" id="7736326">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
